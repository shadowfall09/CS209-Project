{"items":[{"tags":["java","java-8"],"comments":[{"owner":{"account_id":2139538,"reputation":42501,"user_id":1898563,"accept_rate":78,"display_name":"Michael"},"score":0,"creation_date":1589371015,"post_id":61773982,"comment_id":109265461,"body_markdown":"Please explain the problem in more than one short sentence. It is not clear what you want to achieve.","body":"Please explain the problem in more than one short sentence. It is not clear what you want to achieve."},{"owner":{"account_id":15547052,"reputation":59,"user_id":11215920,"display_name":"LoganPaul"},"score":0,"creation_date":1589371129,"post_id":61773982,"comment_id":109265519,"body_markdown":"@Michael, sir problem description added.","body":"@Michael, sir problem description added."}],"answers":[{"tags":[],"owner":{"account_id":1263831,"reputation":388998,"user_id":1221571,"accept_rate":67,"display_name":"Eran"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1589371162,"creation_date":1589371162,"answer_id":61774068,"question_id":61773982,"body_markdown":"You can use `filter` to filter out the term you wish to exclude from the product:\r\n\r\n    int[] ints = Arrays.stream(arrays)\r\n                       .map(s -&gt; Arrays.stream(arrays).filter(x -&gt; x != s).reduce(1, (x, y) -&gt; x * y))\r\n                       .toArray();\r\n\r\nOutput (for your input array):\r\n\r\n    60 // 3 * 4 * 5\r\n    40 // 2 * 4 * 5\r\n    30 // 2 * 3 * 5\r\n    24 // 2 * 3 * 4","title":"Product of array elements except itself in Java8 without division","body":"<p>You can use <code>filter</code> to filter out the term you wish to exclude from the product:</p>\n\n<pre><code>int[] ints = Arrays.stream(arrays)\n                   .map(s -&gt; Arrays.stream(arrays).filter(x -&gt; x != s).reduce(1, (x, y) -&gt; x * y))\n                   .toArray();\n</code></pre>\n\n<p>Output (for your input array):</p>\n\n<pre><code>60 // 3 * 4 * 5\n40 // 2 * 4 * 5\n30 // 2 * 3 * 5\n24 // 2 * 3 * 4\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3211603,"reputation":289297,"user_id":2711488,"display_name":"Holger"},"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1589374891,"creation_date":1589374891,"answer_id":61775343,"question_id":61773982,"body_markdown":"A solution performing the task in O(n) without division, is\r\n\r\n    int[] array = {2, 3, 4, 5};\r\n\r\n    int[] ints = new int[array.length];\r\n    ints[0] = 1;\r\n    for(int ix = 1, p = array[0]; ix &lt; array.length; ix++) {\r\n        ints[ix] = p;\r\n        p *= array[ix];\r\n    }\r\n    for(int ix = array.length - 1, p = array[ix--]; ix &gt;= 0; ix--) {\r\n        ints[ix] *= p;\r\n        p *= array[ix];\r\n    }\r\n\r\n    System.out.println(Arrays.toString(ints));\r\n\r\nFor each element at position *x*, we have to multiply the prefix, the product of all elements before *x*, with the suffix, the product of all elements after *x*. The first loop calculates the prefix for all elements, which we can simply assign to the target array. The second loop calculates the suffix and multiplies it with the prefix in the target array.\r\n\r\nThis is not a solution specific to Java&#160;8, but I don’t think that there is a major benefit from using Java&#160;8.\r\n\r\nThe closest operation would be `Arrays.parallelPrefix(…)` but it would need adaptation steps to make it work for this particular task. Further, there is no equivalent operation for the suffix. Also, the mandatory parallel processing will cause a higher overhead than benefit for anything but very large arrays (not even counting the necessary adaptation steps).\r\n\r\n    int[] tmp = new int[array.length+1];\r\n    tmp[0] = 1;\r\n    System.arraycopy(array, 0, tmp, 1, array.length);\r\n    Arrays.parallelPrefix(tmp, (i,j) -&gt; i*j);\r\n    int[] solution2 = new int[array.length];\r\n    // there&#39;s no Arrays.parallelSuffix...\r\n    for(int ix = array.length - 1, p = 1; ix &gt;= 0; ix--) {\r\n        solution2[ix] = tmp[ix] * p;\r\n        p *= array[ix];\r\n    }\r\n\r\n    System.out.println(Arrays.toString(solution2));\r\n\r\nSo the solution using two loops is the best option here.\r\n","title":"Product of array elements except itself in Java8 without division","body":"<p>A solution performing the task in O(n) without division, is</p>\n\n<pre><code>int[] array = {2, 3, 4, 5};\n\nint[] ints = new int[array.length];\nints[0] = 1;\nfor(int ix = 1, p = array[0]; ix &lt; array.length; ix++) {\n    ints[ix] = p;\n    p *= array[ix];\n}\nfor(int ix = array.length - 1, p = array[ix--]; ix &gt;= 0; ix--) {\n    ints[ix] *= p;\n    p *= array[ix];\n}\n\nSystem.out.println(Arrays.toString(ints));\n</code></pre>\n\n<p>For each element at position <em>x</em>, we have to multiply the prefix, the product of all elements before <em>x</em>, with the suffix, the product of all elements after <em>x</em>. The first loop calculates the prefix for all elements, which we can simply assign to the target array. The second loop calculates the suffix and multiplies it with the prefix in the target array.</p>\n\n<p>This is not a solution specific to Java 8, but I don’t think that there is a major benefit from using Java 8.</p>\n\n<p>The closest operation would be <code>Arrays.parallelPrefix(…)</code> but it would need adaptation steps to make it work for this particular task. Further, there is no equivalent operation for the suffix. Also, the mandatory parallel processing will cause a higher overhead than benefit for anything but very large arrays (not even counting the necessary adaptation steps).</p>\n\n<pre><code>int[] tmp = new int[array.length+1];\ntmp[0] = 1;\nSystem.arraycopy(array, 0, tmp, 1, array.length);\nArrays.parallelPrefix(tmp, (i,j) -&gt; i*j);\nint[] solution2 = new int[array.length];\n// there's no Arrays.parallelSuffix...\nfor(int ix = array.length - 1, p = 1; ix &gt;= 0; ix--) {\n    solution2[ix] = tmp[ix] * p;\n    p *= array[ix];\n}\n\nSystem.out.println(Arrays.toString(solution2));\n</code></pre>\n\n<p>So the solution using two loops is the best option here.</p>\n"},{"tags":[],"owner":{"account_id":6401714,"reputation":5744,"user_id":4964136,"accept_rate":100,"display_name":"Vishwa Ratna"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1589375084,"creation_date":1589375084,"answer_id":61775409,"question_id":61773982,"body_markdown":"Well, to get it solved in **O(n)** you can follow as below:\r\n\r\nLet&#39;s make `left_Array`, `right_Array`, and `output_Array`. Fix the leftmost side of `left_Array` as `1` and rightmost side of `right_Array` as `1`. \r\n\r\nNow to fill the `left_Array` you need to traverse the original array from `i=1` to `i= array.length-1` // Note: We had already fixed the value of `left_Array[0] =1`;\r\n\r\nTo fill the `right_Array` you need to traverse the original array from `i=N-2` to `i= 0` // Note: We had already fixed the value of `right_Array[N-1] =1`;\r\n\r\nNow to get the `output_Array[]` we need to make a product of `left_Array[i]*right_Array[i];`\r\n\r\n    int [] arrays = {2,3,4,5};\r\n    int N = arrays.length;\r\n    int [] left_Array = new int[N];\r\n    int [] right_Array = new int [N];\r\n    int [] output_Array = new int [N];\r\n      left_Array[0]=1;\r\n      right_Array[N-1]=1;\r\n      IntStream.range(1,N).forEach(s-&gt;left_Array[s]=arrays[s-1]*left_Array[s-1]);\r\n      for (int j = N-2;j&gt;=0;j--){\r\n        right_Array[j]= arrays[j+1]*right_Array[j+1];\r\n      }\r\n      IntStream.range(0,N).forEach(k-&gt;output_Array[k]= left_Array[k]*right_Array[k]);\r\n      Arrays.stream(output_Array).forEach(System.out::println);\r\n\r\n&gt; PS: If anyone could write a reverse `Intstream.range()` for the\r\n&gt; `right_Array` loop then It would be great.","title":"Product of array elements except itself in Java8 without division","body":"<p>Well, to get it solved in <strong>O(n)</strong> you can follow as below:</p>\n\n<p>Let's make <code>left_Array</code>, <code>right_Array</code>, and <code>output_Array</code>. Fix the leftmost side of <code>left_Array</code> as <code>1</code> and rightmost side of <code>right_Array</code> as <code>1</code>. </p>\n\n<p>Now to fill the <code>left_Array</code> you need to traverse the original array from <code>i=1</code> to <code>i= array.length-1</code> // Note: We had already fixed the value of <code>left_Array[0] =1</code>;</p>\n\n<p>To fill the <code>right_Array</code> you need to traverse the original array from <code>i=N-2</code> to <code>i= 0</code> // Note: We had already fixed the value of <code>right_Array[N-1] =1</code>;</p>\n\n<p>Now to get the <code>output_Array[]</code> we need to make a product of <code>left_Array[i]*right_Array[i];</code></p>\n\n<pre><code>int [] arrays = {2,3,4,5};\nint N = arrays.length;\nint [] left_Array = new int[N];\nint [] right_Array = new int [N];\nint [] output_Array = new int [N];\n  left_Array[0]=1;\n  right_Array[N-1]=1;\n  IntStream.range(1,N).forEach(s-&gt;left_Array[s]=arrays[s-1]*left_Array[s-1]);\n  for (int j = N-2;j&gt;=0;j--){\n    right_Array[j]= arrays[j+1]*right_Array[j+1];\n  }\n  IntStream.range(0,N).forEach(k-&gt;output_Array[k]= left_Array[k]*right_Array[k]);\n  Arrays.stream(output_Array).forEach(System.out::println);\n</code></pre>\n\n<blockquote>\n  <p>PS: If anyone could write a reverse <code>Intstream.range()</code> for the\n  <code>right_Array</code> loop then It would be great.</p>\n</blockquote>\n"},{"tags":[],"owner":{"account_id":5122294,"reputation":11550,"user_id":4105457,"display_name":"Flown"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1589391494,"creation_date":1589376707,"answer_id":61776001,"question_id":61773982,"body_markdown":"I can agree with the other solution that this is not really solvable using `Stream` API. Also this seems to be easy using recursion:\r\n\r\n    public int[] prod(int[] arr) {\r\n      int[] result = new int[arr.length];\r\n      prod(arr, result, 0, 1);\r\n      return result;\r\n    }\r\n    \r\n    private int prod(int[] arr, int[] result, int i, int left) {\r\n      if (i &gt;= arr.length) {\r\n        return 1;\r\n      }\r\n      int right = prod(arr, result, i + 1, left * arr[i]);\r\n      result[i] = left * right;\r\n      return right * arr[i];\r\n    }\r\n\r\nCan be done also using 2 for loops:\r\n\r\n    public int[] prod(int[] arr) {\r\n      int[] result = new int[arr.length];\r\n      for (int i = 0, left = 1; i &lt; arr.length; left *= arr[i++]) {\r\n        result[i] = left;\r\n      }\r\n      for (int i = arr.length - 1, right = 1; i &gt;= 0; right *= arr[i--]) {\r\n        result[i] *= right;\r\n      }\r\n      return result;\r\n    }\r\n\r\nSince you have to traverse the array twice you could also get the product and divide at the second iteration:\r\n\r\n    public int[] prod(int[] arr) {\r\n      long product = Arrays.stream(arr).asLongStream().reduce(1L, (a, b) -&gt; a * b);\r\n      return Arrays.stream(arr).map(a -&gt; (int) (product / a)).toArray();\r\n    }","title":"Product of array elements except itself in Java8 without division","body":"<p>I can agree with the other solution that this is not really solvable using <code>Stream</code> API. Also this seems to be easy using recursion:</p>\n\n<pre><code>public int[] prod(int[] arr) {\n  int[] result = new int[arr.length];\n  prod(arr, result, 0, 1);\n  return result;\n}\n\nprivate int prod(int[] arr, int[] result, int i, int left) {\n  if (i &gt;= arr.length) {\n    return 1;\n  }\n  int right = prod(arr, result, i + 1, left * arr[i]);\n  result[i] = left * right;\n  return right * arr[i];\n}\n</code></pre>\n\n<p>Can be done also using 2 for loops:</p>\n\n<pre><code>public int[] prod(int[] arr) {\n  int[] result = new int[arr.length];\n  for (int i = 0, left = 1; i &lt; arr.length; left *= arr[i++]) {\n    result[i] = left;\n  }\n  for (int i = arr.length - 1, right = 1; i &gt;= 0; right *= arr[i--]) {\n    result[i] *= right;\n  }\n  return result;\n}\n</code></pre>\n\n<p>Since you have to traverse the array twice you could also get the product and divide at the second iteration:</p>\n\n<pre><code>public int[] prod(int[] arr) {\n  long product = Arrays.stream(arr).asLongStream().reduce(1L, (a, b) -&gt; a * b);\n  return Arrays.stream(arr).map(a -&gt; (int) (product / a)).toArray();\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":14194543,"reputation":361,"user_id":10254216,"display_name":"isilia"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1658909677,"creation_date":1658909677,"answer_id":73134408,"question_id":61773982,"body_markdown":"I have O(n) solution for the above question. Please let me know if that solves your question.\r\n\r\n```\r\nclass ProductArray  \r\n{  \r\n  public static int[] findProduct(int arr[])  \r\n  {    \r\n    int [] result = new int[arr.length];\r\n    int temp = 1;\r\n    \r\n    for (int i = 0; i &lt; arr.length; i++)\r\n    {\r\n      if (arr[i] == 0)\r\n      {\r\n        continue;\r\n      }\r\n      \r\n      temp = temp * arr[i];\r\n    }\r\n\r\n    for (int i = 0; i &lt; arr.length; i++)\r\n    {\r\n      if (arr[i] == 0)\r\n      {\r\n        result[i] = temp;\r\n        break;\r\n      }\r\n      else \r\n      {\r\n        result[i] = temp / arr[i];\r\n      }\r\n\r\n    }\r\n\r\n    // write your code here\r\n\r\n    return result; \r\n   } \r\n} \r\n\r\n```","title":"Product of array elements except itself in Java8 without division","body":"<p>I have O(n) solution for the above question. Please let me know if that solves your question.</p>\n<pre><code>class ProductArray  \n{  \n  public static int[] findProduct(int arr[])  \n  {    \n    int [] result = new int[arr.length];\n    int temp = 1;\n    \n    for (int i = 0; i &lt; arr.length; i++)\n    {\n      if (arr[i] == 0)\n      {\n        continue;\n      }\n      \n      temp = temp * arr[i];\n    }\n\n    for (int i = 0; i &lt; arr.length; i++)\n    {\n      if (arr[i] == 0)\n      {\n        result[i] = temp;\n        break;\n      }\n      else \n      {\n        result[i] = temp / arr[i];\n      }\n\n    }\n\n    // write your code here\n\n    return result; \n   } \n} \n\n</code></pre>\n"},{"tags":[],"owner":{"account_id":11879840,"reputation":1,"user_id":8693830,"display_name":"Shashank Shukla"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1697820651,"creation_date":1697820651,"answer_id":77332598,"question_id":61773982,"body_markdown":"\t\tprivate void productArray(int[] arr, int n) {\r\n\t\t\tint[] res = new int[n];\r\n\t\t\tint total = 1;\r\n\t\t\tfor (int i = 0; i &lt; n; i++) {\r\n\t\t\t\ttotal *= arr[i];\r\n\t\t\t}\r\n\r\n\t\t\tfor (int i = 0; i &lt; n; i++) {\r\n\t\t\t\tres[i] = total / arr[i];\r\n\t\t\t}\r\n\t\t\tfor (int i = 0; i &lt; n; i++) {\r\n\t\t\t\tSystem.out.println(res[i]);\r\n\t\t\t}\r\n\t\t}","title":"Product of array elements except itself in Java8 without division","body":"<pre><code>    private void productArray(int[] arr, int n) {\n        int[] res = new int[n];\n        int total = 1;\n        for (int i = 0; i &lt; n; i++) {\n            total *= arr[i];\n        }\n\n        for (int i = 0; i &lt; n; i++) {\n            res[i] = total / arr[i];\n        }\n        for (int i = 0; i &lt; n; i++) {\n            System.out.println(res[i]);\n        }\n    }\n</code></pre>\n"}],"owner":{"account_id":15547052,"reputation":59,"user_id":11215920,"display_name":"LoganPaul"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1044,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"accepted_answer_id":61775343,"answer_count":6,"score":0,"last_activity_date":1697820651,"creation_date":1589370909,"question_id":61773982,"body_markdown":"How to solve the below problem without division in java-8 ?\r\n\r\n          int [] arrays = {2,3,4,5};\r\n          int[] ints = Arrays.stream(arrays).map(s -&gt; \r\n                       Arrays.stream(arrays).reduce(1, (x, y) -&gt; x * y) / s)\r\n                       .toArray();\r\n          Arrays.stream(ints).forEach(System.out::println);\r\n\r\nThe problem is Like: Make a product of all elements of the array except self.\r\n\r\nEx: if array has `2,3,4` as elements then the final array will be like: `12,8,6`\r\n\r\n**Thanks @Eran for the quick answer, but cant I solve this in O(n) ??** ","title":"Product of array elements except itself in Java8 without division","body":"<p>How to solve the below problem without division in java-8 ?</p>\n\n<pre><code>      int [] arrays = {2,3,4,5};\n      int[] ints = Arrays.stream(arrays).map(s -&gt; \n                   Arrays.stream(arrays).reduce(1, (x, y) -&gt; x * y) / s)\n                   .toArray();\n      Arrays.stream(ints).forEach(System.out::println);\n</code></pre>\n\n<p>The problem is Like: Make a product of all elements of the array except self.</p>\n\n<p>Ex: if array has <code>2,3,4</code> as elements then the final array will be like: <code>12,8,6</code></p>\n\n<p><strong>Thanks @Eran for the quick answer, but cant I solve this in O(n) ??</strong> </p>\n"},{"tags":["java","spring-cloud","spring-cloud-feign"],"owner":{"account_id":27022021,"reputation":13,"user_id":20579864,"display_name":"heh"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":28,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1697820186,"creation_date":1697819630,"question_id":77332512,"body_markdown":"I&#39;m having problems with the fallback implementation.\r\nFor some reason, when my service is not running, I get error 500, and there is no fallback interception\r\nThat&#39;s my implementation:\r\n\r\n```\r\n@FeignClient(name = &quot;planner-users&quot;, fallback = UserFeignClientFallback.class)\r\npublic interface UserFeignClient {\r\n\r\n    @PostMapping(&quot;/user/id&quot;)\r\n    ResponseEntity&lt;User&gt; findUserById(@RequestBody Long id);\r\n}\r\n\r\n@Component\r\nclass UserFeignClientFallback implements UserFeignClient {\r\n\r\n    @Override\r\n    public ResponseEntity&lt;User&gt; findUserById(Long id) {\r\n        return null;\r\n    }\r\n}\r\n```\r\n\r\n\r\n```\r\nResponseEntity&lt;User&gt; result =  userFeignClient.findUserById(category.getUserId());\r\n\r\n        if (result == null){\r\n            return new ResponseEntity(&quot;System users doesn&#39;t work right now&quot;, HttpStatus.NOT_FOUND);\r\n        }\r\n\r\n        if (result.getBody() != null)\r\n            return ResponseEntity.ok(categoryService.add(category));\r\n\r\n        return new ResponseEntity(&quot;user id=&quot; + category.getUserId() + &quot; not found&quot;, HttpStatus.NOT_ACCEPTABLE);\r\n```\r\n\r\n```\r\n@Component\r\npublic class FeignExceptionHandler implements ErrorDecoder {\r\n\r\n    @Override\r\n    public Exception decode(String methodKey, Response response) {\r\n\r\n        switch (response.status()) {\r\n            case 406: {\r\n                return new ResponseStatusException(HttpStatus.NOT_ACCEPTABLE, readMessage(response));\r\n            }\r\n        }\r\n\r\n        return null;\r\n    }\r\n    private String readMessage(Response response) {\r\n\r\n        String message = null;\r\n        Reader reader = null;\r\n\r\n        try {\r\n\r\n            reader = response.body().asReader(Charset.defaultCharset());\r\n            message = CharStreams.toString(reader);\r\n\r\n        } catch (IOException e) {\r\n            e.printStackTrace();\r\n        } finally {\r\n            try {\r\n                if (reader != null)\r\n                    reader.close();\r\n            } catch (IOException e) {\r\n                e.printStackTrace();\r\n            }\r\n        }\r\n\r\n        return message;\r\n    }\r\n\r\n}\r\n```\r\n\r\n\r\n\r\n\r\n\r\nI have added the following dependencies:\r\n```\r\nimplementation &#39;org.springframework.cloud:spring-cloud-starter-netflix-hystrix:+&#39;\r\nimplementation &#39;org.springframework.cloud:spring-cloud-starter-circuitbreaker-resilience4j:+&#39;\r\n```\r\nAlso I added next conf in git property:\r\n`feign.circuitbreaker.enabled=true`\r\nMy service reads the config, because it connected to server.\r\nI&#39;ve read this question - https://stackoverflow.com/questions/69524571/spring-cloud-openfeign-3-0-1-fallback-not-being-triggered but it doesn&#39;t work :( \r\nThis is the answer in Postman:`&quot;timestamp&quot;: &quot;2023-10-20T16:24:43.978+00:00&quot;,\r\n    &quot;status&quot;: 500,\r\n    &quot;error&quot;: &quot;Internal Server Error&quot;,\r\n    &quot;message&quot;: &quot;Cannot throw exception because the return value of \\&quot;feign.ResponseHandler.decodeError(String, feign.Response)\\&quot; is null&quot;,\r\n    &quot;path&quot;: &quot;/category/add&quot;`","title":"Spring cloud netflix hystrix fallback not being triggered","body":"<p>I'm having problems with the fallback implementation.\nFor some reason, when my service is not running, I get error 500, and there is no fallback interception\nThat's my implementation:</p>\n<pre><code>@FeignClient(name = &quot;planner-users&quot;, fallback = UserFeignClientFallback.class)\npublic interface UserFeignClient {\n\n    @PostMapping(&quot;/user/id&quot;)\n    ResponseEntity&lt;User&gt; findUserById(@RequestBody Long id);\n}\n\n@Component\nclass UserFeignClientFallback implements UserFeignClient {\n\n    @Override\n    public ResponseEntity&lt;User&gt; findUserById(Long id) {\n        return null;\n    }\n}\n</code></pre>\n<pre><code>ResponseEntity&lt;User&gt; result =  userFeignClient.findUserById(category.getUserId());\n\n        if (result == null){\n            return new ResponseEntity(&quot;System users doesn't work right now&quot;, HttpStatus.NOT_FOUND);\n        }\n\n        if (result.getBody() != null)\n            return ResponseEntity.ok(categoryService.add(category));\n\n        return new ResponseEntity(&quot;user id=&quot; + category.getUserId() + &quot; not found&quot;, HttpStatus.NOT_ACCEPTABLE);\n</code></pre>\n<pre><code>@Component\npublic class FeignExceptionHandler implements ErrorDecoder {\n\n    @Override\n    public Exception decode(String methodKey, Response response) {\n\n        switch (response.status()) {\n            case 406: {\n                return new ResponseStatusException(HttpStatus.NOT_ACCEPTABLE, readMessage(response));\n            }\n        }\n\n        return null;\n    }\n    private String readMessage(Response response) {\n\n        String message = null;\n        Reader reader = null;\n\n        try {\n\n            reader = response.body().asReader(Charset.defaultCharset());\n            message = CharStreams.toString(reader);\n\n        } catch (IOException e) {\n            e.printStackTrace();\n        } finally {\n            try {\n                if (reader != null)\n                    reader.close();\n            } catch (IOException e) {\n                e.printStackTrace();\n            }\n        }\n\n        return message;\n    }\n\n}\n</code></pre>\n<p>I have added the following dependencies:</p>\n<pre><code>implementation 'org.springframework.cloud:spring-cloud-starter-netflix-hystrix:+'\nimplementation 'org.springframework.cloud:spring-cloud-starter-circuitbreaker-resilience4j:+'\n</code></pre>\n<p>Also I added next conf in git property:\n<code>feign.circuitbreaker.enabled=true</code>\nMy service reads the config, because it connected to server.\nI've read this question - <a href=\"https://stackoverflow.com/questions/69524571/spring-cloud-openfeign-3-0-1-fallback-not-being-triggered\">Spring cloud openfeign 3.0.1 fallback not being triggered</a> but it doesn't work :(\nThis is the answer in Postman:<code>&quot;timestamp&quot;: &quot;2023-10-20T16:24:43.978+00:00&quot;, &quot;status&quot;: 500, &quot;error&quot;: &quot;Internal Server Error&quot;, &quot;message&quot;: &quot;Cannot throw exception because the return value of \\&quot;feign.ResponseHandler.decodeError(String, feign.Response)\\&quot; is null&quot;, &quot;path&quot;: &quot;/category/add&quot;</code></p>\n"},{"tags":["java","logging","logback"],"answers":[{"tags":[],"owner":{"account_id":35628,"reputation":26827,"user_id":100970,"display_name":"Ceki"},"down_vote_count":0,"up_vote_count":11,"is_accepted":true,"score":11,"last_activity_date":1357943543,"creation_date":1357943543,"answer_id":14287760,"question_id":14271253,"body_markdown":"By default, properties are defined in &quot;local&quot; [scope][1]. However, you can force a property to have context scope, in which case it&#39;s pretty easy to get the value of the property:\r\n\r\n     LoggerContext lc = (LoggerContext) LoggerFactory.getILoggerFactory();\r\n     String val = lc.getProperty(aString);\r\n\r\nDefining properties in &quot;context&quot; scope is considered a little heavy handed. Instead of defining all/many properties in context scope, you could define only a single property in context scope. Here is an example:\r\n\r\n    &lt;configuration&gt;\r\n      &lt;!-- get many props from a file --&gt;\r\n      &lt;property resource=&#39;log.properties&#39;/&gt;\r\n      &lt;-- set only one to be in context scope --&gt;\r\n      &lt;property scope=&quot;context&quot; name=&quot;log.dir.ctx&quot; value=&quot;${log.dir}&quot; /&gt;\r\n      ...\r\n    &lt;/configuration&gt;\r\n\r\nYou could then obtain the value you are looking for with:\r\n\r\n     LoggerContext lc = (LoggerContext) LoggerFactory.getILoggerFactory();\r\n     String val = lc.getProperty(&quot;log.dir.ctx&quot;); \r\n\r\n\r\n  [1]: http://logback.qos.ch/manual/configuration.html#scopes","title":"Access Properties Defined in Logback programmatically","body":"<p>By default, properties are defined in \"local\" <a href=\"http://logback.qos.ch/manual/configuration.html#scopes\" rel=\"noreferrer\">scope</a>. However, you can force a property to have context scope, in which case it's pretty easy to get the value of the property:</p>\n\n<pre><code> LoggerContext lc = (LoggerContext) LoggerFactory.getILoggerFactory();\n String val = lc.getProperty(aString);\n</code></pre>\n\n<p>Defining properties in \"context\" scope is considered a little heavy handed. Instead of defining all/many properties in context scope, you could define only a single property in context scope. Here is an example:</p>\n\n<pre><code>&lt;configuration&gt;\n  &lt;!-- get many props from a file --&gt;\n  &lt;property resource='log.properties'/&gt;\n  &lt;-- set only one to be in context scope --&gt;\n  &lt;property scope=\"context\" name=\"log.dir.ctx\" value=\"${log.dir}\" /&gt;\n  ...\n&lt;/configuration&gt;\n</code></pre>\n\n<p>You could then obtain the value you are looking for with:</p>\n\n<pre><code> LoggerContext lc = (LoggerContext) LoggerFactory.getILoggerFactory();\n String val = lc.getProperty(\"log.dir.ctx\"); \n</code></pre>\n"},{"tags":[],"owner":{"account_id":1560000,"reputation":1,"user_id":1450100,"display_name":"snour"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1594657799,"creation_date":1594655288,"answer_id":62879510,"question_id":14271253,"body_markdown":"Properties are also defined in `LoggerContextVO`, you can get your defined properties like this:  \r\n```\r\nLoggerContext context = (LoggerContext) LoggerFactory.getILoggerFactory();\r\nLoggerContextVO loggerContextRemoteView = context.getLoggerContextRemoteView();\r\nMap&lt;String, String&gt; propertyMap = loggerContextRemoteView.getPropertyMap();\r\nString loggingFile = propertyMap.get(&quot;log.dir.ctx&quot;);\r\n```\r\n","title":"Access Properties Defined in Logback programmatically","body":"<p>Properties are also defined in <code>LoggerContextVO</code>, you can get your defined properties like this:</p>\n<pre><code>LoggerContext context = (LoggerContext) LoggerFactory.getILoggerFactory();\nLoggerContextVO loggerContextRemoteView = context.getLoggerContextRemoteView();\nMap&lt;String, String&gt; propertyMap = loggerContextRemoteView.getPropertyMap();\nString loggingFile = propertyMap.get(&quot;log.dir.ctx&quot;);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":12036420,"reputation":91,"user_id":8804741,"display_name":"Mikk"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1697819939,"creation_date":1697819939,"answer_id":77332544,"question_id":14271253,"body_markdown":"I was trying to use a Spring property defined in *application.properties* when configuring a custom Encoder programmatically. In the Encoder it would have to decide whether to manipulate the log or not. This feature could be toggled on or off by a configurable parameter.\r\n\r\nSince this logging library would be used by many different projects, each deployment could configure their needs with this property from their own *application.property* file.\r\n\r\nI solved it like this:\r\n\r\nYou can access spring properties defined in *application.properties* from logback.xml.\r\n\r\n```\r\n&lt;configuration&gt;\r\n    &lt;springProperty scope=&quot;context&quot; name=&quot;ourCustomParameter&quot; source=&quot;eu.some.property.name&quot; /&gt;\r\n...\r\n&lt;/configuration&gt;\r\n```\r\nNote the declaration of scope. We need to be able to retrieve this variable from Context in Java code.\r\n\r\nIn Logback you can get it from Context now. Writing a custom Encoder you can access it like this \r\n```\r\nthis.getContext().getProperty(&quot;ourCustomParameter&quot;);\r\n```\r\n\r\nOr a larger example:\r\n\r\n```\r\npublic class CustomLoggingEventCompositeJsonEncoder extends LoggingEventCompositeJsonEncoder {\r\n  \r\n  ...\r\n  \r\n  @Override\r\n  public byte[] encode(ILoggingEvent iLoggingEvent) {\r\n    return super.encode(iLoggingEvent);\r\n  }\r\n  \r\n  ...\r\n  \r\n  private String getOurSpringProp() {\r\n    return this.getContext().getProperty(&quot;&quot;);\r\n    // Note that this will return null if this property does not exist\r\n  }\r\n}\r\n```","title":"Access Properties Defined in Logback programmatically","body":"<p>I was trying to use a Spring property defined in <em>application.properties</em> when configuring a custom Encoder programmatically. In the Encoder it would have to decide whether to manipulate the log or not. This feature could be toggled on or off by a configurable parameter.</p>\n<p>Since this logging library would be used by many different projects, each deployment could configure their needs with this property from their own <em>application.property</em> file.</p>\n<p>I solved it like this:</p>\n<p>You can access spring properties defined in <em>application.properties</em> from logback.xml.</p>\n<pre><code>&lt;configuration&gt;\n    &lt;springProperty scope=&quot;context&quot; name=&quot;ourCustomParameter&quot; source=&quot;eu.some.property.name&quot; /&gt;\n...\n&lt;/configuration&gt;\n</code></pre>\n<p>Note the declaration of scope. We need to be able to retrieve this variable from Context in Java code.</p>\n<p>In Logback you can get it from Context now. Writing a custom Encoder you can access it like this</p>\n<pre><code>this.getContext().getProperty(&quot;ourCustomParameter&quot;);\n</code></pre>\n<p>Or a larger example:</p>\n<pre><code>public class CustomLoggingEventCompositeJsonEncoder extends LoggingEventCompositeJsonEncoder {\n  \n  ...\n  \n  @Override\n  public byte[] encode(ILoggingEvent iLoggingEvent) {\n    return super.encode(iLoggingEvent);\n  }\n  \n  ...\n  \n  private String getOurSpringProp() {\n    return this.getContext().getProperty(&quot;&quot;);\n    // Note that this will return null if this property does not exist\n  }\n}\n</code></pre>\n"}],"owner":{"account_id":51881,"reputation":38016,"user_id":155020,"accept_rate":80,"display_name":"chubbsondubs"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":4279,"favorite_count":0,"down_vote_count":0,"up_vote_count":9,"accepted_answer_id":14287760,"answer_count":3,"score":9,"last_activity_date":1697819939,"creation_date":1357875368,"question_id":14271253,"body_markdown":"I have an administration console I&#39;m building, and I want to display the logs created in `Logback` for my application.  However, where those logs are stored is different per environment.  I have several property files that define where the logs are stored:\r\n\r\n    &lt;configuration&gt;\r\n      &lt;property resource=&#39;log.properties&#39;/&gt;\r\n      &lt;property resource=&#39;log.${ENV:-prod}.properties&#39;/&gt;\r\n\r\n      &lt;appender name=&quot;FILE&quot; class=&quot;ch.qos.logback.core.rolling.RollingFileAppender&quot;&gt;\r\n        &lt;file&gt;${log.dir}/sync.log&lt;/file&gt;\r\n      ...\r\n    &lt;/configuration&gt;\r\n\r\nI&#39;d like to find the value of `${log.dir}` from `Logback&#39;s` Java API.  I&#39;d tried the following, but it doesn&#39;t have any of the properties defined in the resources.  For example:\r\n\r\n     LoggerContext loggerContext = (LoggerContext) LoggerFactory.getILoggerFactory();\r\n     String logDir = loggerContext.getProperty(&quot;log.dir&quot;); // this always returns null\r\n\r\nSo my question is what API should I be using?\r\n\r\n","title":"Access Properties Defined in Logback programmatically","body":"<p>I have an administration console I'm building, and I want to display the logs created in <code>Logback</code> for my application.  However, where those logs are stored is different per environment.  I have several property files that define where the logs are stored:</p>\n\n<pre><code>&lt;configuration&gt;\n  &lt;property resource='log.properties'/&gt;\n  &lt;property resource='log.${ENV:-prod}.properties'/&gt;\n\n  &lt;appender name=\"FILE\" class=\"ch.qos.logback.core.rolling.RollingFileAppender\"&gt;\n    &lt;file&gt;${log.dir}/sync.log&lt;/file&gt;\n  ...\n&lt;/configuration&gt;\n</code></pre>\n\n<p>I'd like to find the value of <code>${log.dir}</code> from <code>Logback's</code> Java API.  I'd tried the following, but it doesn't have any of the properties defined in the resources.  For example:</p>\n\n<pre><code> LoggerContext loggerContext = (LoggerContext) LoggerFactory.getILoggerFactory();\n String logDir = loggerContext.getProperty(\"log.dir\"); // this always returns null\n</code></pre>\n\n<p>So my question is what API should I be using?</p>\n"},{"tags":["java","spring","spring-boot","elasticsearch","gradle"],"comments":[{"owner":{"account_id":13039762,"reputation":294,"user_id":9423518,"display_name":"Black Bear"},"score":0,"creation_date":1697834333,"post_id":77332472,"comment_id":136334091,"body_markdown":"Can you provide some more java codes?The classes that you listed above","body":"Can you provide some more java codes?The classes that you listed above"},{"owner":{"account_id":18347006,"reputation":133,"user_id":13361997,"display_name":"Joshua Spinak"},"score":0,"creation_date":1697919238,"post_id":77332472,"comment_id":136340669,"body_markdown":"The library class StateTraversalService is here: https://github.com/jspinak/brobot/blob/main/library/src/main/java/io/github/jspinak/brobot/testingAUTs/StateTraversalService.java. I pushed the test application to Github just now: https://github.com/jspinak/spring-elastic-tests. I set up the test application to run the library&#39;s Spring configuration, which should communicate with the Elasticsearch container. The test application could call any class; the method it calls doesn&#39;t do anything in this context.","body":"The library class StateTraversalService is here: <a href=\"https://github.com/jspinak/brobot/blob/main/library/src/main/java/io/github/jspinak/brobot/testingAUTs/StateTraversalService.java\" rel=\"nofollow noreferrer\">github.com/jspinak/brobot/blob/main/library/src/main/java/io&zwnj;&#8203;/&hellip;</a>. I pushed the test application to Github just now: <a href=\"https://github.com/jspinak/spring-elastic-tests\" rel=\"nofollow noreferrer\">github.com/jspinak/spring-elastic-tests</a>. I set up the test application to run the library&#39;s Spring configuration, which should communicate with the Elasticsearch container. The test application could call any class; the method it calls doesn&#39;t do anything in this context."},{"owner":{"account_id":18347006,"reputation":133,"user_id":13361997,"display_name":"Joshua Spinak"},"score":0,"creation_date":1697919259,"post_id":77332472,"comment_id":136340673,"body_markdown":"The classes ElasticClient https://github.com/jspinak/brobot/blob/main/library/src/main/java/io/github/jspinak/brobot/testingAUTs/configuration/ElasticClient.java and HttpClientConfigImpl https://github.com/jspinak/brobot/blob/main/library/src/main/java/io/github/jspinak/brobot/testingAUTs/configuration/HttpClientConfigImpl.java set up the connection to Elasticsearch. The Spring dependencies recognize the annotations on these classes and initiate the connection when setting up beans.","body":"The classes ElasticClient <a href=\"https://github.com/jspinak/brobot/blob/main/library/src/main/java/io/github/jspinak/brobot/testingAUTs/configuration/ElasticClient.java\" rel=\"nofollow noreferrer\">github.com/jspinak/brobot/blob/main/library/src/main/java/io&zwnj;&#8203;/&hellip;</a> and HttpClientConfigImpl <a href=\"https://github.com/jspinak/brobot/blob/main/library/src/main/java/io/github/jspinak/brobot/testingAUTs/configuration/HttpClientConfigImpl.java\" rel=\"nofollow noreferrer\">github.com/jspinak/brobot/blob/main/library/src/main/java/io&zwnj;&#8203;/&hellip;</a> set up the connection to Elasticsearch. The Spring dependencies recognize the annotations on these classes and initiate the connection when setting up beans."},{"owner":{"account_id":18347006,"reputation":133,"user_id":13361997,"display_name":"Joshua Spinak"},"score":0,"creation_date":1698431472,"post_id":77332472,"comment_id":136409569,"body_markdown":"When the `org.springframework.boot` plugin is set to version 2.6.2, the application recognizes the library&#39;s beans. Later versions cause the `bean not found` error. Does anyone know why or how to fix this?","body":"When the <code>org.springframework.boot</code> plugin is set to version 2.6.2, the application recognizes the library&#39;s beans. Later versions cause the <code>bean not found</code> error. Does anyone know why or how to fix this?"}],"owner":{"account_id":18347006,"reputation":133,"user_id":13361997,"display_name":"Joshua Spinak"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":63,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1697819165,"creation_date":1697819165,"question_id":77332472,"body_markdown":"The error I’m getting in my Spring Boot project is:\r\n```\r\nParameter 0 of constructor in brobot.elasticsearch.tests.TestElasticsearch required a bean of type &#39;io.github.jspinak.brobot.testingAUTs.StateTraversalService&#39; that could not be found.\r\n```\r\n`brobot.elasticsearch.tests.TestElasticsearch` is a class in a Spring Boot application that tests the functionality of a Java library @ https://github.com/jspinak/brobot. The library class `StateTraversalService` is correctly annotated with `@Component`. In the test application, the library class imports show up without errors in the IDE. \r\n\r\nThis error showed up after I updated a number of dependencies in the *build.gradle* file. The reason I can’t go back to the old dependencies is that I need the updated *build.gradle* file for new functionality. I want to export logs from the library to an Elasticsearch container. Initially, I followed these instructions to set up Elasticsearch and Kibana containers with security: https://www.elastic.co/de/blog/getting-started-with-the-elastic-stack-and-docker-compose. The containers worked and I could access Elasticsearch from my terminal as well as from https://localhost:9200. However, I kept getting an https connection error despite having https specified in my configuration class.\r\n\r\nIn config class: `RestClientBuilder builder = RestClient.builder(new HttpHost(&quot;localhost&quot;, 9200, &quot;https&quot;));`\r\nElasticsearch log error: `received plaintext http traffic on an https channel, closing connection.`\r\n\r\nI then bought a course online, downloaded the demo Spring Boot application, and followed the instructions to set up Elasticsearch and Kibana containers. It worked for the demo but not for my project. I still got the same https error message, despite having identical code for Elasticsearch and identical containers to the course demo. I then decided to update the dependencies to match those of the demo. This is when I got the *bean not found* error.\r\n\r\nThe project uses Java 20 and Gradle 8.4. I’ve specified Java 20 in 5 places in the Intellij IDE: *Settings*: (1) Gradle JVM, (2) Java compiler project bytecode version; *Project Structure*: (3) Project, (4) Modules, (5) SDKs\r\n\r\nThe matching dependencies in the test application and library have the same versions. Both test and library applications have the same Gradle and Java versions. \r\n\r\nHere is the library&#39;s *build.gradle* file:\r\n```\r\nplugins {\r\n    id &#39;org.springframework.boot&#39; version &#39;3.1.0&#39;\r\n    id &#39;io.spring.dependency-management&#39; version &#39;1.1.0&#39;\r\n    id &#39;java&#39;\r\n    id &#39;io.freefair.lombok&#39; version &#39;8.4&#39;\r\n    id &#39;maven-publish&#39;\r\n    id &#39;signing&#39;\r\n}\r\n\r\ngroup &#39;io.github.jspinak&#39;\r\nversion &#39;1.0.7&#39;\r\n\r\nrepositories {\r\n    mavenCentral()\r\n}\r\n\r\nconfigurations {\r\n    compileOnly {\r\n        extendsFrom annotationProcessor\r\n    }\r\n}\r\n\r\ndependencies {\r\n    implementation(&#39;com.sikulix:sikulixapi:2.0.5&#39;) {\r\n        exclude group: &#39;org.slf4j&#39;, module: &#39;slf4j-nop&#39;\r\n    }\r\n    implementation &#39;ch.qos.logback:logback-classic&#39; \r\n\r\n    implementation &#39;com.squareup:javapoet:1.9.0&#39;\r\n    implementation &quot;org.deeplearning4j:deeplearning4j-core:1.0.0-M1&quot;\r\n    implementation &quot;org.nd4j:nd4j-native-platform:1.0.0-M1&quot;\r\n    implementation &#39;com.github.kwhat:jnativehook:2.2.2&#39;\r\n\r\n    implementation &#39;co.elastic.clients:elasticsearch-java:8.3.3&#39;\r\n    implementation &#39;com.fasterxml.jackson.core:jackson-databind:2.12.3&#39;\r\n    implementation &#39;org.springframework.boot:spring-boot-starter-web&#39;\r\n    implementation &#39;org.springframework.boot:spring-boot-starter-data-elasticsearch&#39;\r\n}\r\n\r\njava {\r\n    withJavadocJar()\r\n    withSourcesJar()\r\n}\r\n\r\npublishing ...\r\n```","title":"Spring Boot could not find bean after dependencies updated","body":"<p>The error I’m getting in my Spring Boot project is:</p>\n<pre><code>Parameter 0 of constructor in brobot.elasticsearch.tests.TestElasticsearch required a bean of type 'io.github.jspinak.brobot.testingAUTs.StateTraversalService' that could not be found.\n</code></pre>\n<p><code>brobot.elasticsearch.tests.TestElasticsearch</code> is a class in a Spring Boot application that tests the functionality of a Java library @ <a href=\"https://github.com/jspinak/brobot\" rel=\"nofollow noreferrer\">https://github.com/jspinak/brobot</a>. The library class <code>StateTraversalService</code> is correctly annotated with <code>@Component</code>. In the test application, the library class imports show up without errors in the IDE.</p>\n<p>This error showed up after I updated a number of dependencies in the <em>build.gradle</em> file. The reason I can’t go back to the old dependencies is that I need the updated <em>build.gradle</em> file for new functionality. I want to export logs from the library to an Elasticsearch container. Initially, I followed these instructions to set up Elasticsearch and Kibana containers with security: <a href=\"https://www.elastic.co/de/blog/getting-started-with-the-elastic-stack-and-docker-compose\" rel=\"nofollow noreferrer\">https://www.elastic.co/de/blog/getting-started-with-the-elastic-stack-and-docker-compose</a>. The containers worked and I could access Elasticsearch from my terminal as well as from https://localhost:9200. However, I kept getting an https connection error despite having https specified in my configuration class.</p>\n<p>In config class: <code>RestClientBuilder builder = RestClient.builder(new HttpHost(&quot;localhost&quot;, 9200, &quot;https&quot;));</code>\nElasticsearch log error: <code>received plaintext http traffic on an https channel, closing connection.</code></p>\n<p>I then bought a course online, downloaded the demo Spring Boot application, and followed the instructions to set up Elasticsearch and Kibana containers. It worked for the demo but not for my project. I still got the same https error message, despite having identical code for Elasticsearch and identical containers to the course demo. I then decided to update the dependencies to match those of the demo. This is when I got the <em>bean not found</em> error.</p>\n<p>The project uses Java 20 and Gradle 8.4. I’ve specified Java 20 in 5 places in the Intellij IDE: <em>Settings</em>: (1) Gradle JVM, (2) Java compiler project bytecode version; <em>Project Structure</em>: (3) Project, (4) Modules, (5) SDKs</p>\n<p>The matching dependencies in the test application and library have the same versions. Both test and library applications have the same Gradle and Java versions.</p>\n<p>Here is the library's <em>build.gradle</em> file:</p>\n<pre><code>plugins {\n    id 'org.springframework.boot' version '3.1.0'\n    id 'io.spring.dependency-management' version '1.1.0'\n    id 'java'\n    id 'io.freefair.lombok' version '8.4'\n    id 'maven-publish'\n    id 'signing'\n}\n\ngroup 'io.github.jspinak'\nversion '1.0.7'\n\nrepositories {\n    mavenCentral()\n}\n\nconfigurations {\n    compileOnly {\n        extendsFrom annotationProcessor\n    }\n}\n\ndependencies {\n    implementation('com.sikulix:sikulixapi:2.0.5') {\n        exclude group: 'org.slf4j', module: 'slf4j-nop'\n    }\n    implementation 'ch.qos.logback:logback-classic' \n\n    implementation 'com.squareup:javapoet:1.9.0'\n    implementation &quot;org.deeplearning4j:deeplearning4j-core:1.0.0-M1&quot;\n    implementation &quot;org.nd4j:nd4j-native-platform:1.0.0-M1&quot;\n    implementation 'com.github.kwhat:jnativehook:2.2.2'\n\n    implementation 'co.elastic.clients:elasticsearch-java:8.3.3'\n    implementation 'com.fasterxml.jackson.core:jackson-databind:2.12.3'\n    implementation 'org.springframework.boot:spring-boot-starter-web'\n    implementation 'org.springframework.boot:spring-boot-starter-data-elasticsearch'\n}\n\njava {\n    withJavadocJar()\n    withSourcesJar()\n}\n\npublishing ...\n</code></pre>\n"},{"tags":["java","jakarta-ee","jndi","apache-tomee","module-path"],"owner":{"account_id":27455786,"reputation":1,"user_id":20947263,"display_name":"jmb"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":15,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1697818372,"creation_date":1697818372,"question_id":77332392,"body_markdown":"I have several web applications packaged in war files, running on a TomEE 9.1 server, with JDK17.\r\nThe war files are built with Maven.\r\nOne of these applications (named Historisation) has an interface package in a Historisation.jar file, and an implementation packaged in a Historisation.war file. In Historisation.jar, there is an EJB remote interface, and in Historisation.war, the EJB implementation.\r\nAs every other application uses this EJB, I specified in the respective pom.xml a dependency with Histoeisation.jar :\r\n\r\n```\r\n    &lt;dependency\\&gt;\r\n        &lt;groupId\\&gt;xxx\\&lt;/groupId\\&gt;\r\n        &lt;artifactId\\&gt;Historisation\\&lt;/artifactId\\&gt;\r\n    &lt;/dependency\\&gt;\r\n```\r\n\r\nThe result is that in every war file, there is the Historisation.jar file in the WEB-INF/lib directory.\r\n\r\nMy problem occurs at execution time : when an application X tries to use the EJB, it \\*\\*does \\*\\*get it from the JNDI, but it can&#39;t cast it with the correct class. The class name is correct but it is seen in an other module :\r\n`java.lang.ClassCastException: class jdk.proxy14.$Proxy596 cannot be cast to class fr.csf.histo.handlers.HistSender (jdk.proxy14.$Proxy596 is in module jdk.proxy14 of loader org.apache.tomee.catalina.TomEEWebappClassLoader @3f4b138; fr.csf.histo.handlers.HistSender is in unnamed module of loader org.apache.tomee.catalina.TomEEWebappClassLoader @44bb33a4)`\r\n\r\nI don&#39;t use the module specificities anywhere in theses applications. Everything was OK with JDK 8, and I don&#39;t know what to do to make the class of the object got from the JNDI seen from the classpath rather than a module.\r\n\r\nI tried to copy Historisation.jar in the lib directory of the TomEE server.\r\nIt seems to work, but it looks more like a workaround than a solution.\r\nI really have the feeling that I missed something.\r\n\r\nThank you for your help.","title":"Module path problem when looking for a remote EJB in JNDI","body":"<p>I have several web applications packaged in war files, running on a TomEE 9.1 server, with JDK17.\nThe war files are built with Maven.\nOne of these applications (named Historisation) has an interface package in a Historisation.jar file, and an implementation packaged in a Historisation.war file. In Historisation.jar, there is an EJB remote interface, and in Historisation.war, the EJB implementation.\nAs every other application uses this EJB, I specified in the respective pom.xml a dependency with Histoeisation.jar :</p>\n<pre><code>    &lt;dependency\\&gt;\n        &lt;groupId\\&gt;xxx\\&lt;/groupId\\&gt;\n        &lt;artifactId\\&gt;Historisation\\&lt;/artifactId\\&gt;\n    &lt;/dependency\\&gt;\n</code></pre>\n<p>The result is that in every war file, there is the Historisation.jar file in the WEB-INF/lib directory.</p>\n<p>My problem occurs at execution time : when an application X tries to use the EJB, it **does **get it from the JNDI, but it can't cast it with the correct class. The class name is correct but it is seen in an other module :\n<code>java.lang.ClassCastException: class jdk.proxy14.$Proxy596 cannot be cast to class fr.csf.histo.handlers.HistSender (jdk.proxy14.$Proxy596 is in module jdk.proxy14 of loader org.apache.tomee.catalina.TomEEWebappClassLoader @3f4b138; fr.csf.histo.handlers.HistSender is in unnamed module of loader org.apache.tomee.catalina.TomEEWebappClassLoader @44bb33a4)</code></p>\n<p>I don't use the module specificities anywhere in theses applications. Everything was OK with JDK 8, and I don't know what to do to make the class of the object got from the JNDI seen from the classpath rather than a module.</p>\n<p>I tried to copy Historisation.jar in the lib directory of the TomEE server.\nIt seems to work, but it looks more like a workaround than a solution.\nI really have the feeling that I missed something.</p>\n<p>Thank you for your help.</p>\n"},{"tags":["java","https","wsdl"],"owner":{"account_id":29449673,"reputation":1,"user_id":22566366,"display_name":"keydeveloper"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":25,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1697818309,"creation_date":1697797114,"question_id":77330134,"body_markdown":"File **APPWSImpl.java**\r\n\r\n```\r\n@WebService(serviceName = APPWSService&quot;, portName = &quot;APPWSPort&quot;, targetNamespace = &quot;http://webservice.app.com/&quot;, endpointInterface = &quot;com.app.webservice.APPWS&quot;)\r\n@HandlerChain(file = &quot;handlers.xml&quot;)\r\npublic class APPWSImpl implements APPWS {\r\n\r\n\tprivate static final Logger LOGGER = LogManager.getLogger(APPWSImpl.class);\r\n\r\n\t@Resource\r\n\tWebServiceContext webServiceContext;\r\n\r\n\t@Override\r\n\tpublic APPResponse handleRequest(APPRequest request) {\r\n\t\treturn handleRequest(request, APPUtil.getRemoteHost(webServiceContext));\r\n\t}\r\n\r\n\tprivate APPResponse handleRequest(APPRequest request, String remoteHost) {\r\n\t\treturn APPHandler.handleRequest(request, remoteHost);\r\n\t}\r\n\r\n        @Override\r\n\tpublic ReadCalendarsResponse readCalendars(ReadCalendarsRequest request) {\r\n\t\treturn (ReadCalendarsResponse) APPHandlerUtil.handleStaticRequest(request,\r\n\t\t\t\tAPPUtil.getRemoteHost(webServiceContext));\r\n\t}\r\n\r\n}\r\n```\r\nFile **APPWS.java**\r\n\r\n   \r\n\r\n     @WebService\r\n    public interface APPWS {\r\n    \r\n    \t@WebMethod\r\n    \t@WebResult(name = &quot;return&quot;)\r\n    \tpublic APPResponse handleRequest(APPRequest request);\r\n    \r\n    \t@SOAPBinding(parameterStyle = SOAPBinding.ParameterStyle.BARE)\r\n    \t@WebResult(name = &quot;readCalendarsResponse&quot;)\r\n    \tpublic ReadCalendarsResponse readCalendars(ReadCalendarsRequest request);\r\n    \r\n    \t\r\n    \r\n    }\r\n\r\n\r\nFile **binding.xml**\r\n\r\n        &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n    &lt;bindings xmlns:wsdl=&quot;http://schemas.xmlsoap.org/wsdl/&quot;\r\n    \twsdlLocation=&quot;../wsdl/APPWSService.wsdl&quot; xmlns=&quot;http://java.sun.com/xml/ns/jaxws&quot;\r\n    \txmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n    \txsi:schemaLocation=&quot;http://java.sun.com/xml/ns/jaxws http://www.oracle.com/webfolder/technetwork/jsc/xml/ns/jaxws/wsdl_customizationschema_2_0.xsd&quot;&gt;\r\n    \r\n    \t&lt;enableWrapperStyle&gt;false&lt;/enableWrapperStyle&gt;\r\n    \r\n    \t&lt;bindings node=&quot;wsdl:definitions/wsdl:portType[@name=&#39;APPWS&#39;]/wsdl:operation[@name=&#39;handleRequest&#39;]&quot;&gt;\r\n    \t\t&lt;enableWrapperStyle&gt;true&lt;/enableWrapperStyle&gt;\r\n    \t&lt;/bindings&gt;\r\n    &lt;/bindings&gt;\r\n\r\n\r\nFile **APPWSService.wsdl**\r\n\r\n        &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; standalone=&quot;yes&quot;?&gt;\r\n    &lt;!-- Generated by JAX-WS RI at http://jax-ws.dev.java.net. RI&#39;s version is JAX-WS RI 2.2.9-b14002 svn-revision#14004. --&gt;\r\n    &lt;definitions targetNamespace=&quot;https://dominio.dev.corp/APPWebService/HandleRequest/APPWSService.wsdl&quot; name=&quot;APPWSService&quot; xmlns=&quot;http://schemas.xmlsoap.org/wsdl/&quot; xmlns:wsp=&quot;http://www.w3.org/ns/ws-policy&quot; xmlns:wsu=&quot;http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd&quot; xmlns:wsp1_2=&quot;http://schemas.xmlsoap.org/ws/2004/09/policy&quot; xmlns:tns=&quot;https://dominio.dev.corp/APPWebService/HandleRequest/APPWSService.wsdl&quot; xmlns:xsd=&quot;http://www.w3.org/2001/XMLSchema&quot; xmlns:soap=&quot;http://schemas.xmlsoap.org/wsdl/soap/&quot; xmlns:wsam=&quot;http://www.w3.org/2007/05/addressing/metadata&quot;&gt;\r\n      &lt;types&gt;\r\n        &lt;xsd:schema&gt;\r\n          &lt;xsd:import namespace=&quot;https://dominio.dev.corp/APPWebService/HandleRequest/APPWSService.wsdl&quot; schemaLocation=&quot;APPWSService_schema1.xsd&quot;/&gt;\r\n        &lt;/xsd:schema&gt;\r\n      &lt;/types&gt;\r\n      &lt;message name=&quot;readCalendars&quot;&gt;\r\n        &lt;part name=&quot;readCalendars&quot; element=&quot;tns:readCalendars&quot;/&gt;\r\n      &lt;/message&gt;\r\n      &lt;message name=&quot;readCalendarsResponse&quot;&gt;\r\n        &lt;part name=&quot;readCalendarsResponse&quot; element=&quot;tns:readCalendarsResponse&quot;/&gt;\r\n      &lt;/message&gt;\r\n    \r\n      &lt;portType name=&quot;APPWS&quot;&gt;\r\n        &lt;operation name=&quot;readCalendars&quot;&gt;\r\n          &lt;input wsam:Action=&quot;https://webservice.APP.com/APPWS/readCalendarsRequest&quot; message=&quot;tns:readCalendars&quot;/&gt;\r\n          &lt;output wsam:Action=&quot;https://webservice.APP.com/APPWS/readCalendarsResponse&quot; message=&quot;tns:readCalendarsResponse&quot;/&gt;\r\n        &lt;/operation&gt;\r\n      &lt;/portType&gt;\r\n      &lt;binding name=&quot;APPWSPortBinding&quot; type=&quot;tns:APPWS&quot;&gt;\r\n        &lt;soap:binding transport=&quot;http://schemas.xmlsoap.org/soap/http&quot; style=&quot;document&quot;/&gt;\r\n        &lt;operation name=&quot;readCalendars&quot;&gt;\r\n          &lt;soap:operation soapAction=&quot;&quot;/&gt;\r\n          &lt;input&gt;\r\n            &lt;soap:body use=&quot;literal&quot;/&gt;\r\n          &lt;/input&gt;\r\n          &lt;output&gt;\r\n            &lt;soap:body use=&quot;literal&quot;/&gt;\r\n          &lt;/output&gt;\r\n        &lt;/operation&gt;\r\n      &lt;/binding&gt;\r\n      &lt;service name=&quot;APPWSService&quot;&gt;\r\n        &lt;port name=&quot;APPWSPort&quot; binding=&quot;tns:APPWSPortBinding&quot;&gt;\r\n          &lt;soap:address location=&quot;https://dominio.dev.corp/APPWebService/HandleRequest&quot;/&gt;\r\n        &lt;/port&gt;\r\n      &lt;/service&gt;\r\n    &lt;/definitions&gt;\r\n\r\nFile **APPWSService_schema1.xsd**\r\n\r\n        &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; standalone=&quot;yes&quot;?&gt;\r\n    &lt;xs:schema version=&quot;1.0&quot; targetNamespace=&quot;https://dominio.dev.corp/APPWebService/HandleRequest/APPWSService.wsdl&quot; xmlns:tns=&quot;https://dominio.dev.corp/APPWebService/HandleRequest/APPWSService.wsdl&quot; xmlns:xs=&quot;http://www.w3.org/2001/XMLSchema&quot;&gt;\r\n    \r\n      &lt;xs:element name=&quot;readCalendars&quot; nillable=&quot;true&quot; type=&quot;tns:readCalendarsRequest&quot;/&gt;\r\n    \r\n      &lt;xs:element name=&quot;readCalendarsResponse&quot; nillable=&quot;true&quot; type=&quot;tns:readCalendarsResponse&quot;/&gt;\r\n    \r\n      &lt;xs:complexType name=&quot;readCalendarsRequest&quot;&gt;\r\n        &lt;xs:sequence&gt;\r\n          &lt;xs:element name=&quot;credentials&quot; type=&quot;tns:credentials&quot;/&gt;\r\n        &lt;/xs:sequence&gt;\r\n      &lt;/xs:complexType&gt;\r\n    \r\n      &lt;xs:complexType name=&quot;readCalendarsResponse&quot;&gt;\r\n        &lt;xs:sequence&gt;\r\n          &lt;xs:element name=&quot;responseStatus&quot; type=&quot;tns:responseStatus&quot;/&gt;\r\n          &lt;xs:element name=&quot;calendar&quot; type=&quot;xs:string&quot; maxOccurs=&quot;unbounded&quot;/&gt;\r\n        &lt;/xs:sequence&gt;\r\n      &lt;/xs:complexType&gt;\r\n    \r\n    &lt;/xs:schema&gt;\r\n\r\n\r\nThe client services have been created from wsdl and xsd with Maven.\r\n\r\nFile **pom.xml**\r\n\r\n        &lt;plugin&gt;\r\n    \t&lt;groupId&gt;org.codehaus.mojo&lt;/groupId&gt;\r\n    \t&lt;artifactId&gt;jaxws-maven-plugin&lt;/artifactId&gt;\r\n    \t&lt;executions&gt;\r\n    \t\t&lt;execution&gt;\r\n    \t\t\t&lt;id&gt;generate-wsdl-client-APPWSService&lt;/id&gt;\r\n    \t\t\t&lt;goals&gt;\r\n    \t\t\t\t&lt;goal&gt;wsimport&lt;/goal&gt;\r\n    \t\t\t&lt;/goals&gt;\r\n    \t\t\t&lt;configuration&gt;\r\n    \t\t\t\t&lt;bindingDirectory&gt;${project.basedir}/src/jaxws&lt;/bindingDirectory&gt;\r\n    \t\t\t\t&lt;wsdlDirectory&gt;${project.basedir}/src/wsdl&lt;/wsdlDirectory&gt;\r\n    \t\t\t\t&lt;wsdlFiles&gt; \r\n    \t\t\t\t\t&lt;wsdlFile&gt;APPWSService.wsdl&lt;/wsdlFile&gt; \r\n    \t\t\t\t&lt;/wsdlFiles&gt;\r\n    \t\t\t\t&lt;wsdlLocation&gt;APPWSService.wsdl&lt;/wsdlLocation&gt;\r\n    \t\t\t\t&lt;packageName&gt;com.app.ws.client&lt;/packageName&gt;\r\n    \t\t\t&lt;/configuration&gt;\r\n    \t\t&lt;/execution&gt;\r\n    &lt;/plugin&gt;\r\n\r\nIf I load the wsdl in SOAPUI, the https actions respond correctly. What it does not believe well is the wsdl information document when requested by the secure protocol `https://dominio.dev.corp/APPWebService/HandleRequest?wsdl`. It always appears as http and the service block is as follows:\r\n\r\n      &lt;service name=&quot;APPWSService&quot;&gt;\r\n        &lt;port name=&quot;APPWSPort&quot; binding=&quot;tns:APPWSPortBinding&quot;&gt;\r\n          &lt;soap:address location=&quot;http://dominio.dev.corp:80/APPWebService/HandleRequest&quot;/&gt;\r\n        &lt;/port&gt;\r\n      &lt;/service&gt;\r\n\r\n\r\nWhat I need is the wsdl with the location property, `\\&lt;soap:address location=`, the url with the secure protocol. This way anyone can call the information document and load it into SOAPUI without modifying anything.\r\n\r\nHas anything like this happened to anyone?\r\n\r\nThank you very much in advance.","title":"Information document with secure protocol in wsdl","body":"<p>File <strong>APPWSImpl.java</strong></p>\n<pre><code>@WebService(serviceName = APPWSService&quot;, portName = &quot;APPWSPort&quot;, targetNamespace = &quot;http://webservice.app.com/&quot;, endpointInterface = &quot;com.app.webservice.APPWS&quot;)\n@HandlerChain(file = &quot;handlers.xml&quot;)\npublic class APPWSImpl implements APPWS {\n\n    private static final Logger LOGGER = LogManager.getLogger(APPWSImpl.class);\n\n    @Resource\n    WebServiceContext webServiceContext;\n\n    @Override\n    public APPResponse handleRequest(APPRequest request) {\n        return handleRequest(request, APPUtil.getRemoteHost(webServiceContext));\n    }\n\n    private APPResponse handleRequest(APPRequest request, String remoteHost) {\n        return APPHandler.handleRequest(request, remoteHost);\n    }\n\n        @Override\n    public ReadCalendarsResponse readCalendars(ReadCalendarsRequest request) {\n        return (ReadCalendarsResponse) APPHandlerUtil.handleStaticRequest(request,\n                APPUtil.getRemoteHost(webServiceContext));\n    }\n\n}\n</code></pre>\n<p>File <strong>APPWS.java</strong></p>\n<pre><code> @WebService\npublic interface APPWS {\n\n    @WebMethod\n    @WebResult(name = &quot;return&quot;)\n    public APPResponse handleRequest(APPRequest request);\n\n    @SOAPBinding(parameterStyle = SOAPBinding.ParameterStyle.BARE)\n    @WebResult(name = &quot;readCalendarsResponse&quot;)\n    public ReadCalendarsResponse readCalendars(ReadCalendarsRequest request);\n\n    \n\n}\n</code></pre>\n<p>File <strong>binding.xml</strong></p>\n<pre><code>    &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;bindings xmlns:wsdl=&quot;http://schemas.xmlsoap.org/wsdl/&quot;\n    wsdlLocation=&quot;../wsdl/APPWSService.wsdl&quot; xmlns=&quot;http://java.sun.com/xml/ns/jaxws&quot;\n    xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\n    xsi:schemaLocation=&quot;http://java.sun.com/xml/ns/jaxws http://www.oracle.com/webfolder/technetwork/jsc/xml/ns/jaxws/wsdl_customizationschema_2_0.xsd&quot;&gt;\n\n    &lt;enableWrapperStyle&gt;false&lt;/enableWrapperStyle&gt;\n\n    &lt;bindings node=&quot;wsdl:definitions/wsdl:portType[@name='APPWS']/wsdl:operation[@name='handleRequest']&quot;&gt;\n        &lt;enableWrapperStyle&gt;true&lt;/enableWrapperStyle&gt;\n    &lt;/bindings&gt;\n&lt;/bindings&gt;\n</code></pre>\n<p>File <strong>APPWSService.wsdl</strong></p>\n<pre><code>    &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; standalone=&quot;yes&quot;?&gt;\n&lt;!-- Generated by JAX-WS RI at http://jax-ws.dev.java.net. RI's version is JAX-WS RI 2.2.9-b14002 svn-revision#14004. --&gt;\n&lt;definitions targetNamespace=&quot;https://dominio.dev.corp/APPWebService/HandleRequest/APPWSService.wsdl&quot; name=&quot;APPWSService&quot; xmlns=&quot;http://schemas.xmlsoap.org/wsdl/&quot; xmlns:wsp=&quot;http://www.w3.org/ns/ws-policy&quot; xmlns:wsu=&quot;http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd&quot; xmlns:wsp1_2=&quot;http://schemas.xmlsoap.org/ws/2004/09/policy&quot; xmlns:tns=&quot;https://dominio.dev.corp/APPWebService/HandleRequest/APPWSService.wsdl&quot; xmlns:xsd=&quot;http://www.w3.org/2001/XMLSchema&quot; xmlns:soap=&quot;http://schemas.xmlsoap.org/wsdl/soap/&quot; xmlns:wsam=&quot;http://www.w3.org/2007/05/addressing/metadata&quot;&gt;\n  &lt;types&gt;\n    &lt;xsd:schema&gt;\n      &lt;xsd:import namespace=&quot;https://dominio.dev.corp/APPWebService/HandleRequest/APPWSService.wsdl&quot; schemaLocation=&quot;APPWSService_schema1.xsd&quot;/&gt;\n    &lt;/xsd:schema&gt;\n  &lt;/types&gt;\n  &lt;message name=&quot;readCalendars&quot;&gt;\n    &lt;part name=&quot;readCalendars&quot; element=&quot;tns:readCalendars&quot;/&gt;\n  &lt;/message&gt;\n  &lt;message name=&quot;readCalendarsResponse&quot;&gt;\n    &lt;part name=&quot;readCalendarsResponse&quot; element=&quot;tns:readCalendarsResponse&quot;/&gt;\n  &lt;/message&gt;\n\n  &lt;portType name=&quot;APPWS&quot;&gt;\n    &lt;operation name=&quot;readCalendars&quot;&gt;\n      &lt;input wsam:Action=&quot;https://webservice.APP.com/APPWS/readCalendarsRequest&quot; message=&quot;tns:readCalendars&quot;/&gt;\n      &lt;output wsam:Action=&quot;https://webservice.APP.com/APPWS/readCalendarsResponse&quot; message=&quot;tns:readCalendarsResponse&quot;/&gt;\n    &lt;/operation&gt;\n  &lt;/portType&gt;\n  &lt;binding name=&quot;APPWSPortBinding&quot; type=&quot;tns:APPWS&quot;&gt;\n    &lt;soap:binding transport=&quot;http://schemas.xmlsoap.org/soap/http&quot; style=&quot;document&quot;/&gt;\n    &lt;operation name=&quot;readCalendars&quot;&gt;\n      &lt;soap:operation soapAction=&quot;&quot;/&gt;\n      &lt;input&gt;\n        &lt;soap:body use=&quot;literal&quot;/&gt;\n      &lt;/input&gt;\n      &lt;output&gt;\n        &lt;soap:body use=&quot;literal&quot;/&gt;\n      &lt;/output&gt;\n    &lt;/operation&gt;\n  &lt;/binding&gt;\n  &lt;service name=&quot;APPWSService&quot;&gt;\n    &lt;port name=&quot;APPWSPort&quot; binding=&quot;tns:APPWSPortBinding&quot;&gt;\n      &lt;soap:address location=&quot;https://dominio.dev.corp/APPWebService/HandleRequest&quot;/&gt;\n    &lt;/port&gt;\n  &lt;/service&gt;\n&lt;/definitions&gt;\n</code></pre>\n<p>File <strong>APPWSService_schema1.xsd</strong></p>\n<pre><code>    &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; standalone=&quot;yes&quot;?&gt;\n&lt;xs:schema version=&quot;1.0&quot; targetNamespace=&quot;https://dominio.dev.corp/APPWebService/HandleRequest/APPWSService.wsdl&quot; xmlns:tns=&quot;https://dominio.dev.corp/APPWebService/HandleRequest/APPWSService.wsdl&quot; xmlns:xs=&quot;http://www.w3.org/2001/XMLSchema&quot;&gt;\n\n  &lt;xs:element name=&quot;readCalendars&quot; nillable=&quot;true&quot; type=&quot;tns:readCalendarsRequest&quot;/&gt;\n\n  &lt;xs:element name=&quot;readCalendarsResponse&quot; nillable=&quot;true&quot; type=&quot;tns:readCalendarsResponse&quot;/&gt;\n\n  &lt;xs:complexType name=&quot;readCalendarsRequest&quot;&gt;\n    &lt;xs:sequence&gt;\n      &lt;xs:element name=&quot;credentials&quot; type=&quot;tns:credentials&quot;/&gt;\n    &lt;/xs:sequence&gt;\n  &lt;/xs:complexType&gt;\n\n  &lt;xs:complexType name=&quot;readCalendarsResponse&quot;&gt;\n    &lt;xs:sequence&gt;\n      &lt;xs:element name=&quot;responseStatus&quot; type=&quot;tns:responseStatus&quot;/&gt;\n      &lt;xs:element name=&quot;calendar&quot; type=&quot;xs:string&quot; maxOccurs=&quot;unbounded&quot;/&gt;\n    &lt;/xs:sequence&gt;\n  &lt;/xs:complexType&gt;\n\n&lt;/xs:schema&gt;\n</code></pre>\n<p>The client services have been created from wsdl and xsd with Maven.</p>\n<p>File <strong>pom.xml</strong></p>\n<pre><code>    &lt;plugin&gt;\n    &lt;groupId&gt;org.codehaus.mojo&lt;/groupId&gt;\n    &lt;artifactId&gt;jaxws-maven-plugin&lt;/artifactId&gt;\n    &lt;executions&gt;\n        &lt;execution&gt;\n            &lt;id&gt;generate-wsdl-client-APPWSService&lt;/id&gt;\n            &lt;goals&gt;\n                &lt;goal&gt;wsimport&lt;/goal&gt;\n            &lt;/goals&gt;\n            &lt;configuration&gt;\n                &lt;bindingDirectory&gt;${project.basedir}/src/jaxws&lt;/bindingDirectory&gt;\n                &lt;wsdlDirectory&gt;${project.basedir}/src/wsdl&lt;/wsdlDirectory&gt;\n                &lt;wsdlFiles&gt; \n                    &lt;wsdlFile&gt;APPWSService.wsdl&lt;/wsdlFile&gt; \n                &lt;/wsdlFiles&gt;\n                &lt;wsdlLocation&gt;APPWSService.wsdl&lt;/wsdlLocation&gt;\n                &lt;packageName&gt;com.app.ws.client&lt;/packageName&gt;\n            &lt;/configuration&gt;\n        &lt;/execution&gt;\n&lt;/plugin&gt;\n</code></pre>\n<p>If I load the wsdl in SOAPUI, the https actions respond correctly. What it does not believe well is the wsdl information document when requested by the secure protocol <code>https://dominio.dev.corp/APPWebService/HandleRequest?wsdl</code>. It always appears as http and the service block is as follows:</p>\n<pre><code>  &lt;service name=&quot;APPWSService&quot;&gt;\n    &lt;port name=&quot;APPWSPort&quot; binding=&quot;tns:APPWSPortBinding&quot;&gt;\n      &lt;soap:address location=&quot;http://dominio.dev.corp:80/APPWebService/HandleRequest&quot;/&gt;\n    &lt;/port&gt;\n  &lt;/service&gt;\n</code></pre>\n<p>What I need is the wsdl with the location property, <code>\\&lt;soap:address location=</code>, the url with the secure protocol. This way anyone can call the information document and load it into SOAPUI without modifying anything.</p>\n<p>Has anything like this happened to anyone?</p>\n<p>Thank you very much in advance.</p>\n"},{"tags":["java","spring-boot","spring-logback"],"comments":[{"owner":{"account_id":10777133,"reputation":7282,"user_id":7928721,"display_name":"samabcde"},"score":0,"creation_date":1697813227,"post_id":77329051,"comment_id":136330884,"body_markdown":"Does this answer your question? [SpringBoot with LogBack creating LOG\\_PATH\\_IS\\_UNDEFINED folder](https://stackoverflow.com/questions/25251983/springboot-with-logback-creating-log-path-is-undefined-folder)","body":"Does this answer your question? <a href=\"https://stackoverflow.com/questions/25251983/springboot-with-logback-creating-log-path-is-undefined-folder\">SpringBoot with LogBack creating LOG_PATH_IS_UNDEFINED folder</a>"}],"owner":{"account_id":22543404,"reputation":11,"user_id":21369220,"display_name":"EasonHu"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":46,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1697818257,"creation_date":1697786928,"question_id":77329051,"body_markdown":"This is my `logback-spring.xml`:\r\n\r\n```xml\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n&lt;configuration  scan=&quot;true&quot; scanPeriod=&quot;10 seconds&quot;&gt;\r\n    &lt;contextName&gt;logback&lt;/contextName&gt;\r\n\r\n    &lt;springProperty scope=&quot;context&quot; name=&quot;logLocation&quot; source=&quot;logging.file.path&quot; default=&quot;/data/applog/zzq/init&quot;/&gt;\r\n\r\n    &lt;conversionRule conversionWord=&quot;clr&quot; converterClass=&quot;org.springframework.boot.logging.logback.ColorConverter&quot; /&gt;\r\n    &lt;conversionRule conversionWord=&quot;wex&quot; converterClass=&quot;org.springframework.boot.logging.logback.WhitespaceThrowableProxyConverter&quot; /&gt;\r\n    &lt;conversionRule conversionWord=&quot;wEx&quot; converterClass=&quot;org.springframework.boot.logging.logback.ExtendedWhitespaceThrowableProxyConverter&quot; /&gt;\r\n    &lt;!-- Colorful --&gt;\r\n    &lt;property name=&quot;CONSOLE_LOG_PATTERN&quot; value=&quot;${CONSOLE_LOG_PATTERN:-%clr(%d{MM-dd HH:mm:ss.SSS}){faint} %clr(${LOG_LEVEL_PATTERN:-%5p}) %clr(${PID:- }){magenta} %clr(---){faint} %clr([%15.15t]){faint} %clr(%-40.40logger{39}){cyan} %clr(:){faint} %m%n${LOG_EXCEPTION_CONVERSION_WORD:-%wEx}}&quot;/&gt;\r\n\r\n\r\n    &lt;appender name=&quot;console&quot; class=&quot;ch.qos.logback.core.ConsoleAppender&quot;&gt;\r\n        &lt;encoder&gt;\r\n            &lt;pattern&gt;${CONSOLE_LOG_PATTERN}&lt;/pattern&gt;\r\n        &lt;/encoder&gt;\r\n    &lt;/appender&gt;\r\n\r\n    &lt;appender name=&quot;logFile&quot;  class=&quot;ch.qos.logback.core.rolling.RollingFileAppender&quot;&gt;\r\n        &lt;Prudent&gt;true&lt;/Prudent&gt;\r\n        &lt;encoder&gt;\r\n            &lt;pattern&gt;%d{MM-dd HH:mm:ss.SSS} [%thread] %-5level %logger{50} - %msg%n&lt;/pattern&gt;\r\n            &lt;charset&gt;UTF-8&lt;/charset&gt;\r\n        &lt;/encoder&gt;\r\n        &lt;rollingPolicy class=&quot;ch.qos.logback.core.rolling.SizeAndTimeBasedRollingPolicy&quot;&gt;\r\n            &lt;FileNamePattern&gt;\r\n                ${logLocation}/%d{yyyy-MM-dd}/%d{MM-dd}.%i.log\r\n            &lt;/FileNamePattern&gt;\r\n            &lt;maxFileSize&gt;500MB&lt;/maxFileSize&gt;\r\n            &lt;maxHistory&gt;180&lt;/maxHistory&gt;\r\n        &lt;/rollingPolicy&gt;\r\n    &lt;/appender&gt;\r\n\r\n    &lt;root level=&quot;debug&quot;&gt;\r\n        &lt;appender-ref ref=&quot;STDOUT&quot;/&gt;\r\n        &lt;appender-ref ref=&quot;FILE&quot;/&gt;\r\n    &lt;/root&gt;\r\n\r\n    &lt;root level=&quot;info&quot;&gt;\r\n        &lt;appender-ref ref=&quot;STDOUT&quot;/&gt;\r\n        &lt;appender-ref ref=&quot;FILE&quot;/&gt;\r\n    &lt;/root&gt;\r\n\r\n    &lt;root level=&quot;error&quot;&gt;\r\n        &lt;appender-ref ref=&quot;console&quot;/&gt;\r\n        &lt;appender-ref ref=&quot;logFile&quot; /&gt;\r\n    &lt;/root&gt;\r\n\r\n&lt;/configuration&gt;\r\n```\r\n\r\nThis is my `application.yml`:\r\n\r\n```yml\r\nlogging:\r\n  config: classpath:logback-spring.xml\r\n  file:\r\n    path: /data/applog/zzq/${spring.application.name}\r\n  level:\r\n    com.xmzn: debug\r\n    com.baomidou.mybatisplus: debug\r\n    com.*.mapper: debug\r\n    org.springframework: info\r\n```\r\n\r\nIt works fine on windows, storing directly to the specified directory, but running it on `linux (CentOS7) `generates the directory `logLocation_IS_UNDEFINED`\r\n\r\n[Windows](https://i.stack.imgur.com/RivSM.png)\r\n\r\n[linux](https://i.stack.imgur.com/Xnp3v.png)\r\n\r\n\r\n\r\n\r\nHow can I fix it? Are there some other methods？","title":"SpringBoot 3.1.4 generated .log directory is undefined. How to fix it?","body":"<p>This is my <code>logback-spring.xml</code>:</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;configuration  scan=&quot;true&quot; scanPeriod=&quot;10 seconds&quot;&gt;\n    &lt;contextName&gt;logback&lt;/contextName&gt;\n\n    &lt;springProperty scope=&quot;context&quot; name=&quot;logLocation&quot; source=&quot;logging.file.path&quot; default=&quot;/data/applog/zzq/init&quot;/&gt;\n\n    &lt;conversionRule conversionWord=&quot;clr&quot; converterClass=&quot;org.springframework.boot.logging.logback.ColorConverter&quot; /&gt;\n    &lt;conversionRule conversionWord=&quot;wex&quot; converterClass=&quot;org.springframework.boot.logging.logback.WhitespaceThrowableProxyConverter&quot; /&gt;\n    &lt;conversionRule conversionWord=&quot;wEx&quot; converterClass=&quot;org.springframework.boot.logging.logback.ExtendedWhitespaceThrowableProxyConverter&quot; /&gt;\n    &lt;!-- Colorful --&gt;\n    &lt;property name=&quot;CONSOLE_LOG_PATTERN&quot; value=&quot;${CONSOLE_LOG_PATTERN:-%clr(%d{MM-dd HH:mm:ss.SSS}){faint} %clr(${LOG_LEVEL_PATTERN:-%5p}) %clr(${PID:- }){magenta} %clr(---){faint} %clr([%15.15t]){faint} %clr(%-40.40logger{39}){cyan} %clr(:){faint} %m%n${LOG_EXCEPTION_CONVERSION_WORD:-%wEx}}&quot;/&gt;\n\n\n    &lt;appender name=&quot;console&quot; class=&quot;ch.qos.logback.core.ConsoleAppender&quot;&gt;\n        &lt;encoder&gt;\n            &lt;pattern&gt;${CONSOLE_LOG_PATTERN}&lt;/pattern&gt;\n        &lt;/encoder&gt;\n    &lt;/appender&gt;\n\n    &lt;appender name=&quot;logFile&quot;  class=&quot;ch.qos.logback.core.rolling.RollingFileAppender&quot;&gt;\n        &lt;Prudent&gt;true&lt;/Prudent&gt;\n        &lt;encoder&gt;\n            &lt;pattern&gt;%d{MM-dd HH:mm:ss.SSS} [%thread] %-5level %logger{50} - %msg%n&lt;/pattern&gt;\n            &lt;charset&gt;UTF-8&lt;/charset&gt;\n        &lt;/encoder&gt;\n        &lt;rollingPolicy class=&quot;ch.qos.logback.core.rolling.SizeAndTimeBasedRollingPolicy&quot;&gt;\n            &lt;FileNamePattern&gt;\n                ${logLocation}/%d{yyyy-MM-dd}/%d{MM-dd}.%i.log\n            &lt;/FileNamePattern&gt;\n            &lt;maxFileSize&gt;500MB&lt;/maxFileSize&gt;\n            &lt;maxHistory&gt;180&lt;/maxHistory&gt;\n        &lt;/rollingPolicy&gt;\n    &lt;/appender&gt;\n\n    &lt;root level=&quot;debug&quot;&gt;\n        &lt;appender-ref ref=&quot;STDOUT&quot;/&gt;\n        &lt;appender-ref ref=&quot;FILE&quot;/&gt;\n    &lt;/root&gt;\n\n    &lt;root level=&quot;info&quot;&gt;\n        &lt;appender-ref ref=&quot;STDOUT&quot;/&gt;\n        &lt;appender-ref ref=&quot;FILE&quot;/&gt;\n    &lt;/root&gt;\n\n    &lt;root level=&quot;error&quot;&gt;\n        &lt;appender-ref ref=&quot;console&quot;/&gt;\n        &lt;appender-ref ref=&quot;logFile&quot; /&gt;\n    &lt;/root&gt;\n\n&lt;/configuration&gt;\n</code></pre>\n<p>This is my <code>application.yml</code>:</p>\n<pre class=\"lang-yaml prettyprint-override\"><code>logging:\n  config: classpath:logback-spring.xml\n  file:\n    path: /data/applog/zzq/${spring.application.name}\n  level:\n    com.xmzn: debug\n    com.baomidou.mybatisplus: debug\n    com.*.mapper: debug\n    org.springframework: info\n</code></pre>\n<p>It works fine on windows, storing directly to the specified directory, but running it on <code>linux (CentOS7) </code>generates the directory <code>logLocation_IS_UNDEFINED</code></p>\n<p><a href=\"https://i.stack.imgur.com/RivSM.png\" rel=\"nofollow noreferrer\">Windows</a></p>\n<p><a href=\"https://i.stack.imgur.com/Xnp3v.png\" rel=\"nofollow noreferrer\">linux</a></p>\n<p>How can I fix it? Are there some other methods？</p>\n"},{"tags":["java","spring-boot","docker","apache-kafka"],"comments":[{"owner":{"account_id":2671330,"reputation":183376,"user_id":2308683,"accept_rate":90,"display_name":"OneCricketeer"},"score":0,"creation_date":1697980772,"post_id":77331619,"comment_id":136344742,"body_markdown":"1) Start with one broker. 2) Kafka doesn&#39;t require Zookeeper anymore 3) You&#39;re missing `KAFKA_LISTENERS` 4) `docker ps` output? Is cluster actually healthy (do you have enough memory to run 5 containers **and** Java code, and any other programs on your machine)? 5) Never run an even number of Zookeepers 6) I suggest you get kafka-console-producer / kafka-topics CLI working before moving to other clients 7) Don&#39;t set both consumer and producer properties in one config","body":"1) Start with one broker. 2) Kafka doesn&#39;t require Zookeeper anymore 3) You&#39;re missing <code>KAFKA_LISTENERS</code> 4) <code>docker ps</code> output? Is cluster actually healthy (do you have enough memory to run 5 containers <b>and</b> Java code, and any other programs on your machine)? 5) Never run an even number of Zookeepers 6) I suggest you get kafka-console-producer / kafka-topics CLI working before moving to other clients 7) Don&#39;t set both consumer and producer properties in one config"}],"answers":[{"tags":[],"owner":{"account_id":10379925,"reputation":1,"user_id":7655051,"display_name":"AYUSH SINGHANIA"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1697818043,"creation_date":1697818043,"answer_id":77332366,"question_id":77331619,"body_markdown":"you should try defining a network in the docker-compose.","title":"Unable to connect to kafka cluster running inside docker from spring boot application running outside docker","body":"<p>you should try defining a network in the docker-compose.</p>\n"}],"owner":{"account_id":16636762,"reputation":876,"user_id":12023261,"display_name":"Arpan Banerjee"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":60,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"closed_date":1697980587,"answer_count":1,"score":0,"last_activity_date":1697818043,"creation_date":1697811016,"question_id":77331619,"body_markdown":"Here is my docker-compose file-\r\nI am not able to connect to kafka running in docker from a springboot application running in my windows local. I have shared the necessary files. I have created topic by doing exec in the docker container, all that is working, but i need to access it from my local application.\r\n\r\n```\r\nversion: &#39;3&#39;\r\nservices:\r\n  zookeeper-1:\r\n    image: confluentinc/cp-zookeeper:latest\r\n    container_name: zookeeper-1\r\n    environment:\r\n      ZOOKEEPER_SERVER_ID: 1\r\n      ZOOKEEPER_CLIENT_PORT: 2181\r\n      ZOOKEEPER_TICK_TIME: 2000\r\n    ports:\r\n      - &quot;22181:2181&quot;\r\n\r\n  zookeeper-2:\r\n    image: confluentinc/cp-zookeeper:latest\r\n    container_name: zookeeper-2\r\n    environment:\r\n      ZOOKEEPER_SERVER_ID: 2\r\n      ZOOKEEPER_CLIENT_PORT: 2181\r\n      ZOOKEEPER_TICK_TIME: 2000\r\n    ports:\r\n      - &quot;32181:2181&quot;\r\n\r\n  broker-1:\r\n    image: confluentinc/cp-kafka:latest\r\n    container_name: broker-1\r\n    ports:\r\n      - &quot;19092:9092&quot;\r\n    depends_on:\r\n      - zookeeper-1\r\n      - zookeeper-2\r\n    environment:\r\n      KAFKA_BROKER_ID: 1\r\n      KAFKA_AUTO_CREATE_TOPICS_ENABLE: &quot;true&quot;\r\n      KAFKA_ZOOKEEPER_CONNECT: &#39;zookeeper-1:2181,zookeeper-2:2181&#39;\r\n      KAFKA_LISTENER_SECURITY_PROTOCOL_MAP: PLAINTEXT:PLAINTEXT,PLAINTEXT_HOST:PLAINTEXT\r\n      KAFKA_ADVERTISED_LISTENERS: PLAINTEXT://broker-1:9092,PLAINTEXT_HOST://localhost:19092\r\n      KAFKA_INTER_BROKER_LISTENER_NAME: PLAINTEXT\r\n\r\n  broker-2:\r\n    image: confluentinc/cp-kafka:latest\r\n    container_name: broker-2\r\n    ports:\r\n      - &quot;19093:9092&quot;\r\n    depends_on:\r\n      - zookeeper-1\r\n      - zookeeper-2\r\n    environment:\r\n      KAFKA_BROKER_ID: 2\r\n      KAFKA_AUTO_CREATE_TOPICS_ENABLE: &quot;true&quot;\r\n      KAFKA_ZOOKEEPER_CONNECT: &#39;zookeeper-1:2181,zookeeper-2:2181&#39;\r\n      KAFKA_LISTENER_SECURITY_PROTOCOL_MAP: PLAINTEXT:PLAINTEXT,PLAINTEXT_HOST:PLAINTEXT\r\n      KAFKA_ADVERTISED_LISTENERS: PLAINTEXT://broker-2:9093,PLAINTEXT_HOST://localhost:19093\r\n      KAFKA_INTER_BROKER_LISTENER_NAME: PLAINTEXT\r\n\r\n  broker-3:\r\n    image: confluentinc/cp-kafka:latest\r\n    container_name: broker-3\r\n    ports:\r\n      - &quot;19094:9092&quot;\r\n    depends_on:\r\n      - zookeeper-1\r\n      - zookeeper-2\r\n    environment:\r\n      KAFKA_BROKER_ID: 3\r\n      KAFKA_AUTO_CREATE_TOPICS_ENABLE: &quot;true&quot;\r\n      KAFKA_ZOOKEEPER_CONNECT: &#39;zookeeper-1:2181,zookeeper-2:2181&#39;\r\n      KAFKA_LISTENER_SECURITY_PROTOCOL_MAP: PLAINTEXT:PLAINTEXT,PLAINTEXT_HOST:PLAINTEXT\r\n      KAFKA_ADVERTISED_LISTENERS: PLAINTEXT://broker-3:9094,PLAINTEXT_HOST://localhost:19094\r\n      KAFKA_INTER_BROKER_LISTENER_NAME: PLAINTEXT\r\n\r\n```\r\nI have added all the configs. I tried searching a lot, but I could not find the issue.\r\n\r\nApp properties file in spring boot-\r\n```\r\nspring.kafka.bootstrap-servers=localhost:19092,localhost:19093,localhost:19094\r\nspring.kafka.consumer.group-id=profile\r\nspring.kafka.consumer.auto-offset-reset=earliest\r\nspring.kafka.consumer.key-deserializer=org.apache.kafka.common.serialization.StringDeserializer\r\nspring.kafka.consumer.value-deserializer=org.apache.kafka.common.serialization.StringDeserializer\r\nspring.kafka.producer.key-serializer=org.apache.kafka.common.serialization.StringSerializer\r\nspring.kafka.producer.value-serializer=org.apache.kafka.common.serialization.StringSerializer\r\n```\r\n\r\nkafkaconfig class-\r\n\r\n```\r\n\r\n@Configuration\r\n@Getter\r\npublic class KakfaConfig {\r\n    @Value(&quot;${spring.kafka.bootstrap-servers}&quot;)\r\n    private String bootstrapServers;\r\n\r\n    @Value(&quot;${spring.kafka.consumer.group-id}&quot;)\r\n    private String consumerGroupId;\r\n\r\n    @Value(&quot;${spring.kafka.consumer.auto-offset-reset}&quot;)\r\n    private String autoOffsetReset;\r\n\r\n    @Value(&quot;${spring.kafka.consumer.key-deserializer}&quot;)\r\n    private String keyDeserializer;\r\n\r\n    @Value(&quot;${spring.kafka.consumer.value-deserializer}&quot;)\r\n    private String valueDeserializer;\r\n\r\n    @Value(&quot;${spring.kafka.producer.key-serializer}&quot;)\r\n    private String keySerializer;\r\n\r\n        @Value(&quot;${spring.kafka.producer.value-serializer}&quot;)\r\n        private String valueSerializer;\r\n\r\n    @Bean\r\n    public Map&lt;String, Object&gt; getKafkaTemplate() {\r\n        Map&lt;String, Object&gt; props = new HashMap&lt;&gt;();\r\n        props.put(&quot;bootstrap.servers&quot;, bootstrapServers);\r\n        props.put(&quot;group.id&quot;, consumerGroupId);\r\n        props.put(&quot;auto.offset.reset&quot;, autoOffsetReset);\r\n        props.put(&quot;key.deserializer&quot;, keyDeserializer);\r\n        props.put(&quot;value.deserializer&quot;, valueDeserializer);\r\n        props.put(&quot;key.serializer&quot;, keySerializer);\r\n        props.put(&quot;value.serializer&quot;, valueSerializer);\r\n        return props;\r\n    }\r\n\r\n    @Bean(name = &quot;userProfileKafkaTemplate&quot;)\r\n    public KafkaTemplate&lt;String, String&gt; userProfileKafkaTemplate() {\r\n        Map&lt;String, Object&gt; props = getKafkaTemplate();\r\n        props.put(ProducerConfig.BOOTSTRAP_SERVERS_CONFIG, bootstrapServers);\r\n        return new KafkaTemplate&lt;&gt;(new DefaultKafkaProducerFactory&lt;&gt;(props));\r\n    }\r\n}\r\n```\r\nError message-\r\n```\r\n2023-10-20T19:38:49.111+05:30  INFO 19236 --- [nio-8080-exec-1] c.c.p.producer.UserProfileKakfaProducer  : Sending message to user profile topic: user-profile-topic, Event type USER_PROFILE_CREATED\r\n2023-10-20T19:38:49.198+05:30  INFO 19236 --- [nio-8080-exec-1] o.a.k.clients.producer.ProducerConfig    : ProducerConfig values: \r\n\tacks = -1\r\n\tauto.include.jmx.reporter = true\r\n\tbatch.size = 16384\r\n\tbootstrap.servers = [localhost:19092, localhost:19093, localhost:19094]\r\n\tbuffer.memory = 33554432\r\n\tclient.dns.lookup = use_all_dns_ips\r\n\tclient.id = producer-1\r\n\tcompression.type = none\r\n\tconnections.max.idle.ms = 540000\r\n\tdelivery.timeout.ms = 120000\r\n\tenable.idempotence = true\r\n\tinterceptor.classes = []\r\n\tkey.serializer = class org.apache.kafka.common.serialization.StringSerializer\r\n\tlinger.ms = 0\r\n\tmax.block.ms = 60000\r\n\tmax.in.flight.requests.per.connection = 5\r\n\tmax.request.size = 1048576\r\n\tmetadata.max.age.ms = 300000\r\n\tmetadata.max.idle.ms = 300000\r\n\tmetric.reporters = []\r\n\tmetrics.num.samples = 2\r\n\tmetrics.recording.level = INFO\r\n\tmetrics.sample.window.ms = 30000\r\n\tpartitioner.adaptive.partitioning.enable = true\r\n\tpartitioner.availability.timeout.ms = 0\r\n\tpartitioner.class = null\r\n\tpartitioner.ignore.keys = false\r\n\treceive.buffer.bytes = 32768\r\n\treconnect.backoff.max.ms = 1000\r\n\treconnect.backoff.ms = 50\r\n\trequest.timeout.ms = 30000\r\n\tretries = 2147483647\r\n\tretry.backoff.ms = 100\r\n\tsasl.client.callback.handler.class = null\r\n\tsasl.jaas.config = null\r\n\tsasl.kerberos.kinit.cmd = /usr/bin/kinit\r\n\tsasl.kerberos.min.time.before.relogin = 60000\r\n\tsasl.kerberos.service.name = null\r\n\tsasl.kerberos.ticket.renew.jitter = 0.05\r\n\tsasl.kerberos.ticket.renew.window.factor = 0.8\r\n\tsasl.login.callback.handler.class = null\r\n\tsasl.login.class = null\r\n\tsasl.login.connect.timeout.ms = null\r\n\tsasl.login.read.timeout.ms = null\r\n\tsasl.login.refresh.buffer.seconds = 300\r\n\tsasl.login.refresh.min.period.seconds = 60\r\n\tsasl.login.refresh.window.factor = 0.8\r\n\tsasl.login.refresh.window.jitter = 0.05\r\n\tsasl.login.retry.backoff.max.ms = 10000\r\n\tsasl.login.retry.backoff.ms = 100\r\n\tsasl.mechanism = GSSAPI\r\n\tsasl.oauthbearer.clock.skew.seconds = 30\r\n\tsasl.oauthbearer.expected.audience = null\r\n\tsasl.oauthbearer.expected.issuer = null\r\n\tsasl.oauthbearer.jwks.endpoint.refresh.ms = 3600000\r\n\tsasl.oauthbearer.jwks.endpoint.retry.backoff.max.ms = 10000\r\n\tsasl.oauthbearer.jwks.endpoint.retry.backoff.ms = 100\r\n\tsasl.oauthbearer.jwks.endpoint.url = null\r\n\tsasl.oauthbearer.scope.claim.name = scope\r\n\tsasl.oauthbearer.sub.claim.name = sub\r\n\tsasl.oauthbearer.token.endpoint.url = null\r\n\tsecurity.protocol = PLAINTEXT\r\n\tsecurity.providers = null\r\n\tsend.buffer.bytes = 131072\r\n\tsocket.connection.setup.timeout.max.ms = 30000\r\n\tsocket.connection.setup.timeout.ms = 10000\r\n\tssl.cipher.suites = null\r\n\tssl.enabled.protocols = [TLSv1.2, TLSv1.3]\r\n\tssl.endpoint.identification.algorithm = https\r\n\tssl.engine.factory.class = null\r\n\tssl.key.password = null\r\n\tssl.keymanager.algorithm = SunX509\r\n\tssl.keystore.certificate.chain = null\r\n\tssl.keystore.key = null\r\n\tssl.keystore.location = null\r\n\tssl.keystore.password = null\r\n\tssl.keystore.type = JKS\r\n\tssl.protocol = TLSv1.3\r\n\tssl.provider = null\r\n\tssl.secure.random.implementation = null\r\n\tssl.trustmanager.algorithm = PKIX\r\n\tssl.truststore.certificates = null\r\n\tssl.truststore.location = null\r\n\tssl.truststore.password = null\r\n\tssl.truststore.type = JKS\r\n\ttransaction.timeout.ms = 60000\r\n\ttransactional.id = null\r\n\tvalue.serializer = class org.apache.kafka.common.serialization.StringSerializer\r\n\r\n2023-10-20T19:38:49.399+05:30  INFO 19236 --- [nio-8080-exec-1] o.a.k.clients.producer.KafkaProducer     : [Producer clientId=producer-1] Instantiated an idempotent producer.\r\n2023-10-20T19:38:49.524+05:30  WARN 19236 --- [nio-8080-exec-1] o.a.k.clients.producer.ProducerConfig    : These configurations &#39;[key.deserializer, value.deserializer, group.id, auto.offset.reset]&#39; were supplied but are not used yet.\r\n2023-10-20T19:38:49.526+05:30  INFO 19236 --- [nio-8080-exec-1] o.a.kafka.common.utils.AppInfoParser     : Kafka version: 3.4.1\r\n2023-10-20T19:38:49.527+05:30  INFO 19236 --- [nio-8080-exec-1] o.a.kafka.common.utils.AppInfoParser     : Kafka commitId: 8a516edc2755df89\r\n2023-10-20T19:38:49.527+05:30  INFO 19236 --- [nio-8080-exec-1] o.a.kafka.common.utils.AppInfoParser     : Kafka startTimeMs: 1697810929524\r\n2023-10-20T19:38:50.448+05:30  INFO 19236 --- [ad | producer-1] org.apache.kafka.clients.NetworkClient   : [Producer clientId=producer-1] Node -3 disconnected.\r\n2023-10-20T19:38:50.455+05:30  WARN 19236 --- [ad | producer-1] org.apache.kafka.clients.NetworkClient   : [Producer clientId=producer-1] Connection to node -3 (localhost/127.0.0.1:19094) could not be established. Broker may not be available.\r\n2023-10-20T19:38:50.456+05:30  WARN 19236 --- [ad | producer-1] org.apache.kafka.clients.NetworkClient   : [Producer clientId=producer-1] Bootstrap broker localhost:19094 (id: -3 rack: null) disconnected\r\n2023-10-20T19:38:50.851+05:30  INFO 19236 --- [ad | producer-1] org.apache.kafka.clients.Metadata        : [Producer clientId=producer-1] Resetting the last seen epoch of partition user-profile-topic-0 to 5 since the associated topicId changed from null to 96WtPNbMTqWDKfQuy2GZxg\r\n2023-10-20T19:38:50.853+05:30  INFO 19236 --- [ad | producer-1] org.apache.kafka.clients.Metadata        : [Producer clientId=producer-1] Resetting the last seen epoch of partition user-profile-topic-5 to 4 since the associated topicId changed from null to 96WtPNbMTqWDKfQuy2GZxg\r\n2023-10-20T19:38:50.854+05:30  INFO 19236 --- [ad | producer-1] org.apache.kafka.clients.Metadata        : [Producer clientId=producer-1] Resetting the last seen epoch of partition user-profile-topic-1 to 4 since the associated topicId changed from null to 96WtPNbMTqWDKfQuy2GZxg\r\n2023-10-20T19:38:50.854+05:30  INFO 19236 --- [ad | producer-1] org.apache.kafka.clients.Metadata        : [Producer clientId=producer-1] Resetting the last seen epoch of partition user-profile-topic-4 to 4 since the associated topicId changed from null to 96WtPNbMTqWDKfQuy2GZxg\r\n2023-10-20T19:38:50.854+05:30  INFO 19236 --- [ad | producer-1] org.apache.kafka.clients.Metadata        : [Producer clientId=producer-1] Resetting the last seen epoch of partition user-profile-topic-2 to 4 since the associated topicId changed from null to 96WtPNbMTqWDKfQuy2GZxg\r\n2023-10-20T19:38:50.854+05:30  INFO 19236 --- [ad | producer-1] org.apache.kafka.clients.Metadata        : [Producer clientId=producer-1] Resetting the last seen epoch of partition user-profile-topic-3 to 5 since the associated topicId changed from null to 96WtPNbMTqWDKfQuy2GZxg\r\n2023-10-20T19:38:50.861+05:30  INFO 19236 --- [ad | producer-1] org.apache.kafka.clients.Metadata        : [Producer clientId=producer-1] Cluster ID: LR9OWVzUToybvB004q6T2g\r\n2023-10-20T19:38:51.018+05:30  INFO 19236 --- [ad | producer-1] o.a.k.c.p.internals.TransactionManager   : [Producer clientId=producer-1] ProducerId set to 1000 with epoch 0\r\n2023-10-20T19:38:53.713+05:30  WARN 19236 --- [ad | producer-1] org.apache.kafka.clients.NetworkClient   : [Producer clientId=producer-1] Error connecting to node broker-1:9092 (id: 1 rack: null)\r\n\r\njava.net.UnknownHostException: No such host is known (broker-1)\r\n\tat java.base/java.net.Inet6AddressImpl.lookupAllHostAddr(Native Method) ~[na:na]\r\n\tat java.base/java.net.InetAddress$PlatformNameService.lookupAllHostAddr(InetAddress.java:933) ~[na:na]\r\n\tat java.base/java.net.InetAddress.getAddressesFromNameService(InetAddress.java:1543) ~[na:na]\r\n\tat java.base/java.net.InetAddress$NameServiceAddresses.get(InetAddress.java:852) ~[na:na]\r\n\tat java.base/java.net.InetAddress.getAllByName0(InetAddress.java:1532) ~[na:na]\r\n\tat java.base/java.net.InetAddress.getAllByName(InetAddress.java:1384) ~[na:na]\r\n\tat java.base/java.net.InetAddress.getAllByName(InetAddress.java:1305) ~[na:na]\r\n\tat org.apache.kafka.clients.DefaultHostResolver.resolve(DefaultHostResolver.java:27) ~[kafka-clients-3.4.1.jar:na]\r\n\tat org.apache.kafka.clients.ClientUtils.resolve(ClientUtils.java:110) ~[kafka-clients-3.4.1.jar:na]\r\n\tat org.apache.kafka.clients.ClusterConnectionStates$NodeConnectionState.currentAddress(ClusterConnectionStates.java:510) ~[kafka-clients-3.4.1.jar:na]\r\n\tat org.apache.kafka.clients.ClusterConnectionStates$NodeConnectionState.access$200(ClusterConnectionStates.java:467) ~[kafka-clients-3.4.1.jar:na]\r\n\tat org.apache.kafka.clients.ClusterConnectionStates.currentAddress(ClusterConnectionStates.java:173) ~[kafka-clients-3.4.1.jar:na]\r\n\tat org.apache.kafka.clients.NetworkClient.initiateConnect(NetworkClient.java:990) ~[kafka-clients-3.4.1.jar:na]\r\n\tat org.apache.kafka.clients.NetworkClient.ready(NetworkClient.java:301) ~[kafka-clients-3.4.1.jar:na]\r\n\tat org.apache.kafka.clients.producer.internals.Sender.sendProducerData(Sender.java:354) ~[kafka-clients-3.4.1.jar:na]\r\n\tat org.apache.kafka.clients.producer.internals.Sender.runOnce(Sender.java:327) ~[kafka-clients-3.4.1.jar:na]\r\n\tat org.apache.kafka.clients.producer.internals.Sender.run(Sender.java:243) ~[kafka-clients-3.4.1.jar:na]\r\n\tat java.base/java.lang.Thread.run(Thread.java:833) ~[na:na]\r\n\r\n2023-10-20T19:38:56.398+05:30  WARN 19236 --- [ad | producer-1] org.apache.kafka.clients.NetworkClient   : [Producer clientId=producer-1] Error connecting to node broker-2:9093 (id: 2 rack: null)\r\n\r\njava.net.UnknownHostException: No such host is known (broker-2)\r\n\tat java.base/java.net.Inet6AddressImpl.lookupAllHostAddr(Native Method) ~[na:na]\r\n\tat java.base/java.net.InetAddress$PlatformNameService.lookupAllHostAddr(InetAddress.java:933) ~[na:na]\r\n\tat java.base/java.net.InetAddress.getAddressesFromNameService(InetAddress.java:1543) ~[na:na]\r\n\tat java.base/java.net.InetAddress$NameServiceAddresses.get(InetAddress.java:852) ~[na:na]\r\n\tat java.base/java.net.InetAddress.getAllByName0(InetAddress.java:1532) ~[na:na]\r\n\tat java.base/java.net.InetAddress.getAllByName(InetAddress.java:1384) ~[na:na]\r\n\tat java.base/java.net.InetAddress.getAllByName(InetAddress.java:1305) ~[na:na]\r\n\tat org.apache.kafka.clients.DefaultHostResolver.resolve(DefaultHostResolver.java:27) ~[kafka-clients-3.4.1.jar:na]\r\n\tat org.apache.kafka.clients.ClientUtils.resolve(ClientUtils.java:110) ~[kafka-clients-3.4.1.jar:na]\r\n\tat org.apache.kafka.clients.ClusterConnectionStates$NodeConnectionState.currentAddress(ClusterConnectionStates.java:510) ~[kafka-clients-3.4.1.jar:na]\r\n\tat org.apache.kafka.clients.ClusterConnectionStates$NodeConnectionState.access$200(ClusterConnectionStates.java:467) ~[kafka-clients-3.4.1.jar:na]\r\n\tat org.apache.kafka.clients.ClusterConnectionStates.currentAddress(ClusterConnectionStates.java:173) ~[kafka-clients-3.4.1.jar:na]\r\n\tat org.apache.kafka.clients.NetworkClient.initiateConnect(Netw\r\n```\r\n\r\nPlease help me.\r\n\r\n","title":"Unable to connect to kafka cluster running inside docker from spring boot application running outside docker","body":"<p>Here is my docker-compose file-\nI am not able to connect to kafka running in docker from a springboot application running in my windows local. I have shared the necessary files. I have created topic by doing exec in the docker container, all that is working, but i need to access it from my local application.</p>\n<pre><code>version: '3'\nservices:\n  zookeeper-1:\n    image: confluentinc/cp-zookeeper:latest\n    container_name: zookeeper-1\n    environment:\n      ZOOKEEPER_SERVER_ID: 1\n      ZOOKEEPER_CLIENT_PORT: 2181\n      ZOOKEEPER_TICK_TIME: 2000\n    ports:\n      - &quot;22181:2181&quot;\n\n  zookeeper-2:\n    image: confluentinc/cp-zookeeper:latest\n    container_name: zookeeper-2\n    environment:\n      ZOOKEEPER_SERVER_ID: 2\n      ZOOKEEPER_CLIENT_PORT: 2181\n      ZOOKEEPER_TICK_TIME: 2000\n    ports:\n      - &quot;32181:2181&quot;\n\n  broker-1:\n    image: confluentinc/cp-kafka:latest\n    container_name: broker-1\n    ports:\n      - &quot;19092:9092&quot;\n    depends_on:\n      - zookeeper-1\n      - zookeeper-2\n    environment:\n      KAFKA_BROKER_ID: 1\n      KAFKA_AUTO_CREATE_TOPICS_ENABLE: &quot;true&quot;\n      KAFKA_ZOOKEEPER_CONNECT: 'zookeeper-1:2181,zookeeper-2:2181'\n      KAFKA_LISTENER_SECURITY_PROTOCOL_MAP: PLAINTEXT:PLAINTEXT,PLAINTEXT_HOST:PLAINTEXT\n      KAFKA_ADVERTISED_LISTENERS: PLAINTEXT://broker-1:9092,PLAINTEXT_HOST://localhost:19092\n      KAFKA_INTER_BROKER_LISTENER_NAME: PLAINTEXT\n\n  broker-2:\n    image: confluentinc/cp-kafka:latest\n    container_name: broker-2\n    ports:\n      - &quot;19093:9092&quot;\n    depends_on:\n      - zookeeper-1\n      - zookeeper-2\n    environment:\n      KAFKA_BROKER_ID: 2\n      KAFKA_AUTO_CREATE_TOPICS_ENABLE: &quot;true&quot;\n      KAFKA_ZOOKEEPER_CONNECT: 'zookeeper-1:2181,zookeeper-2:2181'\n      KAFKA_LISTENER_SECURITY_PROTOCOL_MAP: PLAINTEXT:PLAINTEXT,PLAINTEXT_HOST:PLAINTEXT\n      KAFKA_ADVERTISED_LISTENERS: PLAINTEXT://broker-2:9093,PLAINTEXT_HOST://localhost:19093\n      KAFKA_INTER_BROKER_LISTENER_NAME: PLAINTEXT\n\n  broker-3:\n    image: confluentinc/cp-kafka:latest\n    container_name: broker-3\n    ports:\n      - &quot;19094:9092&quot;\n    depends_on:\n      - zookeeper-1\n      - zookeeper-2\n    environment:\n      KAFKA_BROKER_ID: 3\n      KAFKA_AUTO_CREATE_TOPICS_ENABLE: &quot;true&quot;\n      KAFKA_ZOOKEEPER_CONNECT: 'zookeeper-1:2181,zookeeper-2:2181'\n      KAFKA_LISTENER_SECURITY_PROTOCOL_MAP: PLAINTEXT:PLAINTEXT,PLAINTEXT_HOST:PLAINTEXT\n      KAFKA_ADVERTISED_LISTENERS: PLAINTEXT://broker-3:9094,PLAINTEXT_HOST://localhost:19094\n      KAFKA_INTER_BROKER_LISTENER_NAME: PLAINTEXT\n\n</code></pre>\n<p>I have added all the configs. I tried searching a lot, but I could not find the issue.</p>\n<p>App properties file in spring boot-</p>\n<pre><code>spring.kafka.bootstrap-servers=localhost:19092,localhost:19093,localhost:19094\nspring.kafka.consumer.group-id=profile\nspring.kafka.consumer.auto-offset-reset=earliest\nspring.kafka.consumer.key-deserializer=org.apache.kafka.common.serialization.StringDeserializer\nspring.kafka.consumer.value-deserializer=org.apache.kafka.common.serialization.StringDeserializer\nspring.kafka.producer.key-serializer=org.apache.kafka.common.serialization.StringSerializer\nspring.kafka.producer.value-serializer=org.apache.kafka.common.serialization.StringSerializer\n</code></pre>\n<p>kafkaconfig class-</p>\n<pre><code>\n@Configuration\n@Getter\npublic class KakfaConfig {\n    @Value(&quot;${spring.kafka.bootstrap-servers}&quot;)\n    private String bootstrapServers;\n\n    @Value(&quot;${spring.kafka.consumer.group-id}&quot;)\n    private String consumerGroupId;\n\n    @Value(&quot;${spring.kafka.consumer.auto-offset-reset}&quot;)\n    private String autoOffsetReset;\n\n    @Value(&quot;${spring.kafka.consumer.key-deserializer}&quot;)\n    private String keyDeserializer;\n\n    @Value(&quot;${spring.kafka.consumer.value-deserializer}&quot;)\n    private String valueDeserializer;\n\n    @Value(&quot;${spring.kafka.producer.key-serializer}&quot;)\n    private String keySerializer;\n\n        @Value(&quot;${spring.kafka.producer.value-serializer}&quot;)\n        private String valueSerializer;\n\n    @Bean\n    public Map&lt;String, Object&gt; getKafkaTemplate() {\n        Map&lt;String, Object&gt; props = new HashMap&lt;&gt;();\n        props.put(&quot;bootstrap.servers&quot;, bootstrapServers);\n        props.put(&quot;group.id&quot;, consumerGroupId);\n        props.put(&quot;auto.offset.reset&quot;, autoOffsetReset);\n        props.put(&quot;key.deserializer&quot;, keyDeserializer);\n        props.put(&quot;value.deserializer&quot;, valueDeserializer);\n        props.put(&quot;key.serializer&quot;, keySerializer);\n        props.put(&quot;value.serializer&quot;, valueSerializer);\n        return props;\n    }\n\n    @Bean(name = &quot;userProfileKafkaTemplate&quot;)\n    public KafkaTemplate&lt;String, String&gt; userProfileKafkaTemplate() {\n        Map&lt;String, Object&gt; props = getKafkaTemplate();\n        props.put(ProducerConfig.BOOTSTRAP_SERVERS_CONFIG, bootstrapServers);\n        return new KafkaTemplate&lt;&gt;(new DefaultKafkaProducerFactory&lt;&gt;(props));\n    }\n}\n</code></pre>\n<p>Error message-</p>\n<pre><code>2023-10-20T19:38:49.111+05:30  INFO 19236 --- [nio-8080-exec-1] c.c.p.producer.UserProfileKakfaProducer  : Sending message to user profile topic: user-profile-topic, Event type USER_PROFILE_CREATED\n2023-10-20T19:38:49.198+05:30  INFO 19236 --- [nio-8080-exec-1] o.a.k.clients.producer.ProducerConfig    : ProducerConfig values: \n    acks = -1\n    auto.include.jmx.reporter = true\n    batch.size = 16384\n    bootstrap.servers = [localhost:19092, localhost:19093, localhost:19094]\n    buffer.memory = 33554432\n    client.dns.lookup = use_all_dns_ips\n    client.id = producer-1\n    compression.type = none\n    connections.max.idle.ms = 540000\n    delivery.timeout.ms = 120000\n    enable.idempotence = true\n    interceptor.classes = []\n    key.serializer = class org.apache.kafka.common.serialization.StringSerializer\n    linger.ms = 0\n    max.block.ms = 60000\n    max.in.flight.requests.per.connection = 5\n    max.request.size = 1048576\n    metadata.max.age.ms = 300000\n    metadata.max.idle.ms = 300000\n    metric.reporters = []\n    metrics.num.samples = 2\n    metrics.recording.level = INFO\n    metrics.sample.window.ms = 30000\n    partitioner.adaptive.partitioning.enable = true\n    partitioner.availability.timeout.ms = 0\n    partitioner.class = null\n    partitioner.ignore.keys = false\n    receive.buffer.bytes = 32768\n    reconnect.backoff.max.ms = 1000\n    reconnect.backoff.ms = 50\n    request.timeout.ms = 30000\n    retries = 2147483647\n    retry.backoff.ms = 100\n    sasl.client.callback.handler.class = null\n    sasl.jaas.config = null\n    sasl.kerberos.kinit.cmd = /usr/bin/kinit\n    sasl.kerberos.min.time.before.relogin = 60000\n    sasl.kerberos.service.name = null\n    sasl.kerberos.ticket.renew.jitter = 0.05\n    sasl.kerberos.ticket.renew.window.factor = 0.8\n    sasl.login.callback.handler.class = null\n    sasl.login.class = null\n    sasl.login.connect.timeout.ms = null\n    sasl.login.read.timeout.ms = null\n    sasl.login.refresh.buffer.seconds = 300\n    sasl.login.refresh.min.period.seconds = 60\n    sasl.login.refresh.window.factor = 0.8\n    sasl.login.refresh.window.jitter = 0.05\n    sasl.login.retry.backoff.max.ms = 10000\n    sasl.login.retry.backoff.ms = 100\n    sasl.mechanism = GSSAPI\n    sasl.oauthbearer.clock.skew.seconds = 30\n    sasl.oauthbearer.expected.audience = null\n    sasl.oauthbearer.expected.issuer = null\n    sasl.oauthbearer.jwks.endpoint.refresh.ms = 3600000\n    sasl.oauthbearer.jwks.endpoint.retry.backoff.max.ms = 10000\n    sasl.oauthbearer.jwks.endpoint.retry.backoff.ms = 100\n    sasl.oauthbearer.jwks.endpoint.url = null\n    sasl.oauthbearer.scope.claim.name = scope\n    sasl.oauthbearer.sub.claim.name = sub\n    sasl.oauthbearer.token.endpoint.url = null\n    security.protocol = PLAINTEXT\n    security.providers = null\n    send.buffer.bytes = 131072\n    socket.connection.setup.timeout.max.ms = 30000\n    socket.connection.setup.timeout.ms = 10000\n    ssl.cipher.suites = null\n    ssl.enabled.protocols = [TLSv1.2, TLSv1.3]\n    ssl.endpoint.identification.algorithm = https\n    ssl.engine.factory.class = null\n    ssl.key.password = null\n    ssl.keymanager.algorithm = SunX509\n    ssl.keystore.certificate.chain = null\n    ssl.keystore.key = null\n    ssl.keystore.location = null\n    ssl.keystore.password = null\n    ssl.keystore.type = JKS\n    ssl.protocol = TLSv1.3\n    ssl.provider = null\n    ssl.secure.random.implementation = null\n    ssl.trustmanager.algorithm = PKIX\n    ssl.truststore.certificates = null\n    ssl.truststore.location = null\n    ssl.truststore.password = null\n    ssl.truststore.type = JKS\n    transaction.timeout.ms = 60000\n    transactional.id = null\n    value.serializer = class org.apache.kafka.common.serialization.StringSerializer\n\n2023-10-20T19:38:49.399+05:30  INFO 19236 --- [nio-8080-exec-1] o.a.k.clients.producer.KafkaProducer     : [Producer clientId=producer-1] Instantiated an idempotent producer.\n2023-10-20T19:38:49.524+05:30  WARN 19236 --- [nio-8080-exec-1] o.a.k.clients.producer.ProducerConfig    : These configurations '[key.deserializer, value.deserializer, group.id, auto.offset.reset]' were supplied but are not used yet.\n2023-10-20T19:38:49.526+05:30  INFO 19236 --- [nio-8080-exec-1] o.a.kafka.common.utils.AppInfoParser     : Kafka version: 3.4.1\n2023-10-20T19:38:49.527+05:30  INFO 19236 --- [nio-8080-exec-1] o.a.kafka.common.utils.AppInfoParser     : Kafka commitId: 8a516edc2755df89\n2023-10-20T19:38:49.527+05:30  INFO 19236 --- [nio-8080-exec-1] o.a.kafka.common.utils.AppInfoParser     : Kafka startTimeMs: 1697810929524\n2023-10-20T19:38:50.448+05:30  INFO 19236 --- [ad | producer-1] org.apache.kafka.clients.NetworkClient   : [Producer clientId=producer-1] Node -3 disconnected.\n2023-10-20T19:38:50.455+05:30  WARN 19236 --- [ad | producer-1] org.apache.kafka.clients.NetworkClient   : [Producer clientId=producer-1] Connection to node -3 (localhost/127.0.0.1:19094) could not be established. Broker may not be available.\n2023-10-20T19:38:50.456+05:30  WARN 19236 --- [ad | producer-1] org.apache.kafka.clients.NetworkClient   : [Producer clientId=producer-1] Bootstrap broker localhost:19094 (id: -3 rack: null) disconnected\n2023-10-20T19:38:50.851+05:30  INFO 19236 --- [ad | producer-1] org.apache.kafka.clients.Metadata        : [Producer clientId=producer-1] Resetting the last seen epoch of partition user-profile-topic-0 to 5 since the associated topicId changed from null to 96WtPNbMTqWDKfQuy2GZxg\n2023-10-20T19:38:50.853+05:30  INFO 19236 --- [ad | producer-1] org.apache.kafka.clients.Metadata        : [Producer clientId=producer-1] Resetting the last seen epoch of partition user-profile-topic-5 to 4 since the associated topicId changed from null to 96WtPNbMTqWDKfQuy2GZxg\n2023-10-20T19:38:50.854+05:30  INFO 19236 --- [ad | producer-1] org.apache.kafka.clients.Metadata        : [Producer clientId=producer-1] Resetting the last seen epoch of partition user-profile-topic-1 to 4 since the associated topicId changed from null to 96WtPNbMTqWDKfQuy2GZxg\n2023-10-20T19:38:50.854+05:30  INFO 19236 --- [ad | producer-1] org.apache.kafka.clients.Metadata        : [Producer clientId=producer-1] Resetting the last seen epoch of partition user-profile-topic-4 to 4 since the associated topicId changed from null to 96WtPNbMTqWDKfQuy2GZxg\n2023-10-20T19:38:50.854+05:30  INFO 19236 --- [ad | producer-1] org.apache.kafka.clients.Metadata        : [Producer clientId=producer-1] Resetting the last seen epoch of partition user-profile-topic-2 to 4 since the associated topicId changed from null to 96WtPNbMTqWDKfQuy2GZxg\n2023-10-20T19:38:50.854+05:30  INFO 19236 --- [ad | producer-1] org.apache.kafka.clients.Metadata        : [Producer clientId=producer-1] Resetting the last seen epoch of partition user-profile-topic-3 to 5 since the associated topicId changed from null to 96WtPNbMTqWDKfQuy2GZxg\n2023-10-20T19:38:50.861+05:30  INFO 19236 --- [ad | producer-1] org.apache.kafka.clients.Metadata        : [Producer clientId=producer-1] Cluster ID: LR9OWVzUToybvB004q6T2g\n2023-10-20T19:38:51.018+05:30  INFO 19236 --- [ad | producer-1] o.a.k.c.p.internals.TransactionManager   : [Producer clientId=producer-1] ProducerId set to 1000 with epoch 0\n2023-10-20T19:38:53.713+05:30  WARN 19236 --- [ad | producer-1] org.apache.kafka.clients.NetworkClient   : [Producer clientId=producer-1] Error connecting to node broker-1:9092 (id: 1 rack: null)\n\njava.net.UnknownHostException: No such host is known (broker-1)\n    at java.base/java.net.Inet6AddressImpl.lookupAllHostAddr(Native Method) ~[na:na]\n    at java.base/java.net.InetAddress$PlatformNameService.lookupAllHostAddr(InetAddress.java:933) ~[na:na]\n    at java.base/java.net.InetAddress.getAddressesFromNameService(InetAddress.java:1543) ~[na:na]\n    at java.base/java.net.InetAddress$NameServiceAddresses.get(InetAddress.java:852) ~[na:na]\n    at java.base/java.net.InetAddress.getAllByName0(InetAddress.java:1532) ~[na:na]\n    at java.base/java.net.InetAddress.getAllByName(InetAddress.java:1384) ~[na:na]\n    at java.base/java.net.InetAddress.getAllByName(InetAddress.java:1305) ~[na:na]\n    at org.apache.kafka.clients.DefaultHostResolver.resolve(DefaultHostResolver.java:27) ~[kafka-clients-3.4.1.jar:na]\n    at org.apache.kafka.clients.ClientUtils.resolve(ClientUtils.java:110) ~[kafka-clients-3.4.1.jar:na]\n    at org.apache.kafka.clients.ClusterConnectionStates$NodeConnectionState.currentAddress(ClusterConnectionStates.java:510) ~[kafka-clients-3.4.1.jar:na]\n    at org.apache.kafka.clients.ClusterConnectionStates$NodeConnectionState.access$200(ClusterConnectionStates.java:467) ~[kafka-clients-3.4.1.jar:na]\n    at org.apache.kafka.clients.ClusterConnectionStates.currentAddress(ClusterConnectionStates.java:173) ~[kafka-clients-3.4.1.jar:na]\n    at org.apache.kafka.clients.NetworkClient.initiateConnect(NetworkClient.java:990) ~[kafka-clients-3.4.1.jar:na]\n    at org.apache.kafka.clients.NetworkClient.ready(NetworkClient.java:301) ~[kafka-clients-3.4.1.jar:na]\n    at org.apache.kafka.clients.producer.internals.Sender.sendProducerData(Sender.java:354) ~[kafka-clients-3.4.1.jar:na]\n    at org.apache.kafka.clients.producer.internals.Sender.runOnce(Sender.java:327) ~[kafka-clients-3.4.1.jar:na]\n    at org.apache.kafka.clients.producer.internals.Sender.run(Sender.java:243) ~[kafka-clients-3.4.1.jar:na]\n    at java.base/java.lang.Thread.run(Thread.java:833) ~[na:na]\n\n2023-10-20T19:38:56.398+05:30  WARN 19236 --- [ad | producer-1] org.apache.kafka.clients.NetworkClient   : [Producer clientId=producer-1] Error connecting to node broker-2:9093 (id: 2 rack: null)\n\njava.net.UnknownHostException: No such host is known (broker-2)\n    at java.base/java.net.Inet6AddressImpl.lookupAllHostAddr(Native Method) ~[na:na]\n    at java.base/java.net.InetAddress$PlatformNameService.lookupAllHostAddr(InetAddress.java:933) ~[na:na]\n    at java.base/java.net.InetAddress.getAddressesFromNameService(InetAddress.java:1543) ~[na:na]\n    at java.base/java.net.InetAddress$NameServiceAddresses.get(InetAddress.java:852) ~[na:na]\n    at java.base/java.net.InetAddress.getAllByName0(InetAddress.java:1532) ~[na:na]\n    at java.base/java.net.InetAddress.getAllByName(InetAddress.java:1384) ~[na:na]\n    at java.base/java.net.InetAddress.getAllByName(InetAddress.java:1305) ~[na:na]\n    at org.apache.kafka.clients.DefaultHostResolver.resolve(DefaultHostResolver.java:27) ~[kafka-clients-3.4.1.jar:na]\n    at org.apache.kafka.clients.ClientUtils.resolve(ClientUtils.java:110) ~[kafka-clients-3.4.1.jar:na]\n    at org.apache.kafka.clients.ClusterConnectionStates$NodeConnectionState.currentAddress(ClusterConnectionStates.java:510) ~[kafka-clients-3.4.1.jar:na]\n    at org.apache.kafka.clients.ClusterConnectionStates$NodeConnectionState.access$200(ClusterConnectionStates.java:467) ~[kafka-clients-3.4.1.jar:na]\n    at org.apache.kafka.clients.ClusterConnectionStates.currentAddress(ClusterConnectionStates.java:173) ~[kafka-clients-3.4.1.jar:na]\n    at org.apache.kafka.clients.NetworkClient.initiateConnect(Netw\n</code></pre>\n<p>Please help me.</p>\n"},{"tags":["java","spring","postgresql","spring-boot","intellij-idea"],"comments":[{"owner":{"account_id":6627494,"reputation":2666,"user_id":5117236,"accept_rate":84,"display_name":"Impulse The Fox"},"score":3,"creation_date":1524573577,"post_id":50001883,"comment_id":87019861,"body_markdown":"https://github.com/pgjdbc/pgjdbc/issues/1102 http://vkuzel.blogspot.de/2016/03/spring-boot-jpa-hibernate-atomikos.html","body":"<a href=\"https://github.com/pgjdbc/pgjdbc/issues/1102\" rel=\"nofollow noreferrer\">github.com/pgjdbc/pgjdbc/issues/1102</a> <a href=\"http://vkuzel.blogspot.de/2016/03/spring-boot-jpa-hibernate-atomikos.html\" rel=\"nofollow noreferrer\">vkuzel.blogspot.de/2016/03/&hellip;</a>"}],"answers":[{"tags":[],"owner":{"account_id":6627494,"reputation":2666,"user_id":5117236,"accept_rate":84,"display_name":"Impulse The Fox"},"down_vote_count":0,"up_vote_count":10,"is_accepted":true,"score":10,"last_activity_date":1524573984,"creation_date":1524573984,"answer_id":50002080,"question_id":50001883,"body_markdown":"Add these lines to your `application.properties` and it should work.\r\n\r\n    # Disable feature detection by this undocumented parameter. Check the org.hibernate.engine.jdbc.internal.JdbcServiceImpl.configure method for more details.\r\n    spring.jpa.properties.hibernate.temp.use_jdbc_metadata_defaults=false\r\n\r\n    # Because detection is disabled you have to set correct dialect by hand.\r\n    spring.jpa.database-platform=org.hibernate.dialect.PostgreSQL9Dialect\r\n\r\n&lt;hr/&gt;\r\n\r\nLinks\r\n\r\n- [GitHub Issue](https://github.com/pgjdbc/pgjdbc/issues/1102)\r\n- [Solution Source](http://vkuzel.blogspot.de/2016/03/spring-boot-jpa-hibernate-atomikos.html)","title":"Spring Boot to Postgres Database - Driver Issue","body":"<p>Add these lines to your <code>application.properties</code> and it should work.</p>\n\n<pre><code># Disable feature detection by this undocumented parameter. Check the org.hibernate.engine.jdbc.internal.JdbcServiceImpl.configure method for more details.\nspring.jpa.properties.hibernate.temp.use_jdbc_metadata_defaults=false\n\n# Because detection is disabled you have to set correct dialect by hand.\nspring.jpa.database-platform=org.hibernate.dialect.PostgreSQL9Dialect\n</code></pre>\n\n<hr/>\n\n<p>Links</p>\n\n<ul>\n<li><a href=\"https://github.com/pgjdbc/pgjdbc/issues/1102\" rel=\"noreferrer\">GitHub Issue</a></li>\n<li><a href=\"http://vkuzel.blogspot.de/2016/03/spring-boot-jpa-hibernate-atomikos.html\" rel=\"noreferrer\">Solution Source</a></li>\n</ul>\n"},{"tags":[],"owner":{"account_id":6469743,"reputation":2377,"user_id":5010285,"display_name":"Petronella"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1697817443,"creation_date":1697817443,"answer_id":77332311,"question_id":50001883,"body_markdown":"What worked for me in the end was to do a Maven Project Reload - for some reason it didn&#39;t see the driver in the dependencies after clean, install, verify, validate ...","title":"Spring Boot to Postgres Database - Driver Issue","body":"<p>What worked for me in the end was to do a Maven Project Reload - for some reason it didn't see the driver in the dependencies after clean, install, verify, validate ...</p>\n"}],"owner":{"account_id":2977114,"reputation":3234,"user_id":2527942,"accept_rate":78,"display_name":"Erdinc Ay"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":23430,"favorite_count":0,"down_vote_count":0,"up_vote_count":4,"accepted_answer_id":50002080,"answer_count":2,"score":4,"last_activity_date":1697817443,"creation_date":1524573387,"question_id":50001883,"body_markdown":"i am working on a new Spring Boot application (my first actually), and using IntelliJ 2018.1.1 with Maven, my configuration for Maven looks like this:\r\n\r\n**pom.xml**\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n\t&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt; \r\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n\r\n    &lt;groupId&gt;com.mygroupid&lt;/groupId&gt;\r\n    &lt;artifactId&gt;myartifactid&lt;/artifactId&gt;\r\n    &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\r\n    &lt;packaging&gt;jar&lt;/packaging&gt;\r\n\r\n    &lt;name&gt;first-spring-boot-application&lt;/name&gt;\r\n    &lt;description&gt;Spring Boot&lt;/description&gt;\r\n\r\n    &lt;parent&gt;\r\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n        &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\r\n        &lt;version&gt;2.0.1.RELEASE&lt;/version&gt;\r\n        &lt;relativePath/&gt;\r\n    &lt;/parent&gt;\r\n\r\n    &lt;properties&gt;\r\n        &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\r\n        &lt;project.reporting.outputEncoding&gt;UTF-8&lt;/project.reporting.outputEncoding&gt;\r\n        &lt;java.version&gt;1.8&lt;/java.version&gt;\r\n    &lt;/properties&gt;\r\n\r\n    &lt;dependencies&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n            &lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n            &lt;artifactId&gt;spring-boot-starter-thymeleaf&lt;/artifactId&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n            &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.postgresql&lt;/groupId&gt;\r\n            &lt;artifactId&gt;postgresql&lt;/artifactId&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\r\n            &lt;artifactId&gt;lombok&lt;/artifactId&gt;\r\n            &lt;optional&gt;true&lt;/optional&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n            &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\r\n            &lt;scope&gt;test&lt;/scope&gt;\r\n        &lt;/dependency&gt;\r\n    &lt;/dependencies&gt;\r\n\r\n    &lt;build&gt;\r\n        &lt;plugins&gt;\r\n            &lt;plugin&gt;\r\n                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n                &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\r\n            &lt;/plugin&gt;\r\n        &lt;/plugins&gt;\r\n    &lt;/build&gt;\r\n\r\n&lt;/project&gt;\r\n\r\nthe application works well using h2 database, but i need to use Postgres, so i added the dependency for it, and started configuring it.\r\n\r\n**application.properties**\r\n\r\n    ###############\r\n    # POSTGRES\r\n    ###############\r\n    \r\n    spring.datasource.platform=postgres\r\n    spring.datasource.name=mydatasource\r\n    spring.datasource.driverClassName=org.postgresql.Driver \r\n    spring.datasource.url=jdbc:postgresql://localhost:5432/mydatabase\r\n    spring.datasource.username=justauser\r\n    spring.datasource.password=justapassword\r\n    \r\n    ###############\r\n    # H2\r\n    ###############\r\n    \r\n    # spring.h2.console.enabled=true\r\n    # spring.datasource.name=sp2ndsem\r\n    \r\n    ###############\r\n    # OUTPUT\r\n    ###############\r\n    \r\n    spring.jpa.show-sql=true\r\n    \r\n    ###############\r\n    # WEB\r\n    ###############\r\n    \r\n    spring.resources.static-locations=classpath:/META-INF/resources/,classpath:/resources/,classpath:/static/,classpath:/public/\r\n\r\n**Errors**\r\n\r\nnow, when starting the application, i am getting an error, which more or less means that there is no Postgres Driver installed.\r\n\r\nIntelliJ is marking the driver name in the application.properties in red color: \r\n\r\n    spring.datasource.driverClassName=org.postgresql.Driver\r\n\r\nand the output is showing me something that i really cannot figure out why:\r\n\r\n    java.lang.reflect.InvocationTargetException: null\r\n\tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:1.8.0_152]\r\n\tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62) ~[na:1.8.0_152]\r\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:1.8.0_152]\r\n\tat java.lang.reflect.Method.invoke(Method.java:498) ~[na:1.8.0_152]\r\n\tat org.hibernate.engine.jdbc.env.internal.LobCreatorBuilderImpl.useContextualLobCreation(LobCreatorBuilderImpl.java:113) [hibernate-core-5.2.16.Final.jar:5.2.16.Final]\r\n\tat org.hibernate.engine.jdbc.env.internal.LobCreatorBuilderImpl.makeLobCreatorBuilder(LobCreatorBuilderImpl.java:54) [hibernate-core-5.2.16.Final.jar:5.2.16.Final]\r\n\tat org.hibernate.engine.jdbc.env.internal.JdbcEnvironmentImpl.&lt;init&gt;(JdbcEnvironmentImpl.java:271) [hibernate-core-5.2.16.Final.jar:5.2.16.Final]\r\n\tat org.hibernate.engine.jdbc.env.internal.JdbcEnvironmentInitiator.initiateService(JdbcEnvironmentInitiator.java:114) [hibernate-core-5.2.16.Final.jar:5.2.16.Final]\r\n\tat org.hibernate.engine.jdbc.env.internal.JdbcEnvironmentInitiator.initiateService(JdbcEnvironmentInitiator.java:35) [hibernate-core-5.2.16.Final.jar:5.2.16.Final]\r\n\tat org.hibernate.boot.registry.internal.StandardServiceRegistryImpl.initiateService(StandardServiceRegistryImpl.java:88) [hibernate-core-5.2.16.Final.jar:5.2.16.Final]\r\n\tat org.hibernate.service.internal.AbstractServiceRegistryImpl.createService(AbstractServiceRegistryImpl.java:259) [hibernate-core-5.2.16.Final.jar:5.2.16.Final]\r\n\tat org.hibernate.service.internal.AbstractServiceRegistryImpl.initializeService(AbstractServiceRegistryImpl.java:233) [hibernate-core-5.2.16.Final.jar:5.2.16.Final]\r\n\tat org.hibernate.service.internal.AbstractServiceRegistryImpl.getService(AbstractServiceRegistryImpl.java:210) [hibernate-core-5.2.16.Final.jar:5.2.16.Final]\r\n\tat org.hibernate.engine.jdbc.internal.JdbcServicesImpl.configure(JdbcServicesImpl.java:51) [hibernate-core-5.2.16.Final.jar:5.2.16.Final]\r\n\tat org.hibernate.boot.registry.internal.StandardServiceRegistryImpl.configureService(StandardServiceRegistryImpl.java:94) [hibernate-core-5.2.16.Final.jar:5.2.16.Final]\r\n\tat org.hibernate.service.internal.AbstractServiceRegistryImpl.initializeService(AbstractServiceRegistryImpl.java:242) [hibernate-core-5.2.16.Final.jar:5.2.16.Final]\r\n\tat org.hibernate.service.internal.AbstractServiceRegistryImpl.getService(AbstractServiceRegistryImpl.java:210) [hibernate-core-5.2.16.Final.jar:5.2.16.Final]\r\n\tat org.hibernate.boot.model.process.spi.MetadataBuildingProcess.handleTypes(MetadataBuildingProcess.java:352) [hibernate-core-5.2.16.Final.jar:5.2.16.Final]\r\n\tat org.hibernate.boot.model.process.spi.MetadataBuildingProcess.complete(MetadataBuildingProcess.java:111) [hibernate-core-5.2.16.Final.jar:5.2.16.Final]\r\n\tat org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl.metadata(EntityManagerFactoryBuilderImpl.java:861) [hibernate-core-5.2.16.Final.jar:5.2.16.Final]\r\n\tat org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl.build(EntityManagerFactoryBuilderImpl.java:888) [hibernate-core-5.2.16.Final.jar:5.2.16.Final]\r\n\tat org.springframework.orm.jpa.vendor.SpringHibernateJpaPersistenceProvider.createContainerEntityManagerFactory(SpringHibernateJpaPersistenceProvider.java:57) [spring-orm-5.0.5.RELEASE.jar:5.0.5.RELEASE]\r\n\tat org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.createNativeEntityManagerFactory(LocalContainerEntityManagerFactoryBean.java:365) [spring-orm-5.0.5.RELEASE.jar:5.0.5.RELEASE]\r\n\tat org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.buildNativeEntityManagerFactory(AbstractEntityManagerFactoryBean.java:390) [spring-orm-5.0.5.RELEASE.jar:5.0.5.RELEASE]\r\n\tat org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.afterPropertiesSet(AbstractEntityManagerFactoryBean.java:377) [spring-orm-5.0.5.RELEASE.jar:5.0.5.RELEASE]\r\n\tat org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.afterPropertiesSet(LocalContainerEntityManagerFactoryBean.java:341) [spring-orm-5.0.5.RELEASE.jar:5.0.5.RELEASE]\r\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1761) [spring-beans-5.0.5.RELEASE.jar:5.0.5.RELEASE]\r\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1698) [spring-beans-5.0.5.RELEASE.jar:5.0.5.RELEASE]\r\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:579) [spring-beans-5.0.5.RELEASE.jar:5.0.5.RELEASE]\r\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:501) [spring-beans-5.0.5.RELEASE.jar:5.0.5.RELEASE]\r\n\tat org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:317) [spring-beans-5.0.5.RELEASE.jar:5.0.5.RELEASE]\r\n\tat org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:228) ~[spring-beans-5.0.5.RELEASE.jar:5.0.5.RELEASE]\r\n\tat org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:315) [spring-beans-5.0.5.RELEASE.jar:5.0.5.RELEASE]\r\n\tat org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199) [spring-beans-5.0.5.RELEASE.jar:5.0.5.RELEASE]\r\n\tat org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1089) ~[spring-context-5.0.5.RELEASE.jar:5.0.5.RELEASE]\r\n\tat org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:859) ~[spring-context-5.0.5.RELEASE.jar:5.0.5.RELEASE]\r\n\tat org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:550) ~[spring-context-5.0.5.RELEASE.jar:5.0.5.RELEASE]\r\n\tat org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:140) ~[spring-boot-2.0.1.RELEASE.jar:2.0.1.RELEASE]\r\n\tat org.springframework.boot.SpringApplication.refresh(SpringApplication.java:759) ~[spring-boot-2.0.1.RELEASE.jar:2.0.1.RELEASE]\r\n\tat org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:395) ~[spring-boot-2.0.1.RELEASE.jar:2.0.1.RELEASE]\r\n\tat org.springframework.boot.SpringApplication.run(SpringApplication.java:327) ~[spring-boot-2.0.1.RELEASE.jar:2.0.1.RELEASE]\r\n\tat org.springframework.boot.SpringApplication.run(SpringApplication.java:1255) ~[spring-boot-2.0.1.RELEASE.jar:2.0.1.RELEASE]\r\n\tat org.springframework.boot.SpringApplication.run(SpringApplication.java:1243) ~[spring-boot-2.0.1.RELEASE.jar:2.0.1.RELEASE]\r\n\tat com.mygroupid.myartifactid.SpringBootApplication.main(SpringBootApplication.java:26) ~[classes/:na]\r\n\r\nCaused by: java.sql.SQLFeatureNotSupportedException: Die Methode org.postgresql.jdbc.PgConnection.createClob() ist noch nicht implementiert.\r\n\tat org.postgresql.Driver.notImplemented(Driver.java:669) ~[postgresql-42.1.4.jar:42.1.4]\r\n\tat org.postgresql.jdbc.PgConnection.createClob(PgConnection.java:1246) ~[postgresql-42.1.4.jar:42.1.4]\r\n\t... 44 common frames omitted\r\n\r\n**in English: org.postgresql.jdbc.PgConnection.createClob() is not implemented**\r\n\r\nwhat am i doing wrong?","title":"Spring Boot to Postgres Database - Driver Issue","body":"<p>i am working on a new Spring Boot application (my first actually), and using IntelliJ 2018.1.1 with Maven, my configuration for Maven looks like this:</p>\n\n<p><strong>pom.xml</strong></p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;project xmlns=\"http://maven.apache.org/POM/4.0.0\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xsi:schemaLocation=\"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd\"&gt; \n&lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n\n&lt;groupId&gt;com.mygroupid&lt;/groupId&gt;\n&lt;artifactId&gt;myartifactid&lt;/artifactId&gt;\n&lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\n&lt;packaging&gt;jar&lt;/packaging&gt;\n\n&lt;name&gt;first-spring-boot-application&lt;/name&gt;\n&lt;description&gt;Spring Boot&lt;/description&gt;\n\n&lt;parent&gt;\n    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n    &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\n    &lt;version&gt;2.0.1.RELEASE&lt;/version&gt;\n    &lt;relativePath/&gt;\n&lt;/parent&gt;\n\n&lt;properties&gt;\n    &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\n    &lt;project.reporting.outputEncoding&gt;UTF-8&lt;/project.reporting.outputEncoding&gt;\n    &lt;java.version&gt;1.8&lt;/java.version&gt;\n&lt;/properties&gt;\n\n&lt;dependencies&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-thymeleaf&lt;/artifactId&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.postgresql&lt;/groupId&gt;\n        &lt;artifactId&gt;postgresql&lt;/artifactId&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\n        &lt;artifactId&gt;lombok&lt;/artifactId&gt;\n        &lt;optional&gt;true&lt;/optional&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\n        &lt;scope&gt;test&lt;/scope&gt;\n    &lt;/dependency&gt;\n&lt;/dependencies&gt;\n\n&lt;build&gt;\n    &lt;plugins&gt;\n        &lt;plugin&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\n        &lt;/plugin&gt;\n    &lt;/plugins&gt;\n&lt;/build&gt;\n</code></pre>\n\n<p></p>\n\n<p>the application works well using h2 database, but i need to use Postgres, so i added the dependency for it, and started configuring it.</p>\n\n<p><strong>application.properties</strong></p>\n\n<pre><code>###############\n# POSTGRES\n###############\n\nspring.datasource.platform=postgres\nspring.datasource.name=mydatasource\nspring.datasource.driverClassName=org.postgresql.Driver \nspring.datasource.url=jdbc:postgresql://localhost:5432/mydatabase\nspring.datasource.username=justauser\nspring.datasource.password=justapassword\n\n###############\n# H2\n###############\n\n# spring.h2.console.enabled=true\n# spring.datasource.name=sp2ndsem\n\n###############\n# OUTPUT\n###############\n\nspring.jpa.show-sql=true\n\n###############\n# WEB\n###############\n\nspring.resources.static-locations=classpath:/META-INF/resources/,classpath:/resources/,classpath:/static/,classpath:/public/\n</code></pre>\n\n<p><strong>Errors</strong></p>\n\n<p>now, when starting the application, i am getting an error, which more or less means that there is no Postgres Driver installed.</p>\n\n<p>IntelliJ is marking the driver name in the application.properties in red color: </p>\n\n<pre><code>spring.datasource.driverClassName=org.postgresql.Driver\n</code></pre>\n\n<p>and the output is showing me something that i really cannot figure out why:</p>\n\n<pre><code>java.lang.reflect.InvocationTargetException: null\nat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:1.8.0_152]\nat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62) ~[na:1.8.0_152]\nat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:1.8.0_152]\nat java.lang.reflect.Method.invoke(Method.java:498) ~[na:1.8.0_152]\nat org.hibernate.engine.jdbc.env.internal.LobCreatorBuilderImpl.useContextualLobCreation(LobCreatorBuilderImpl.java:113) [hibernate-core-5.2.16.Final.jar:5.2.16.Final]\nat org.hibernate.engine.jdbc.env.internal.LobCreatorBuilderImpl.makeLobCreatorBuilder(LobCreatorBuilderImpl.java:54) [hibernate-core-5.2.16.Final.jar:5.2.16.Final]\nat org.hibernate.engine.jdbc.env.internal.JdbcEnvironmentImpl.&lt;init&gt;(JdbcEnvironmentImpl.java:271) [hibernate-core-5.2.16.Final.jar:5.2.16.Final]\nat org.hibernate.engine.jdbc.env.internal.JdbcEnvironmentInitiator.initiateService(JdbcEnvironmentInitiator.java:114) [hibernate-core-5.2.16.Final.jar:5.2.16.Final]\nat org.hibernate.engine.jdbc.env.internal.JdbcEnvironmentInitiator.initiateService(JdbcEnvironmentInitiator.java:35) [hibernate-core-5.2.16.Final.jar:5.2.16.Final]\nat org.hibernate.boot.registry.internal.StandardServiceRegistryImpl.initiateService(StandardServiceRegistryImpl.java:88) [hibernate-core-5.2.16.Final.jar:5.2.16.Final]\nat org.hibernate.service.internal.AbstractServiceRegistryImpl.createService(AbstractServiceRegistryImpl.java:259) [hibernate-core-5.2.16.Final.jar:5.2.16.Final]\nat org.hibernate.service.internal.AbstractServiceRegistryImpl.initializeService(AbstractServiceRegistryImpl.java:233) [hibernate-core-5.2.16.Final.jar:5.2.16.Final]\nat org.hibernate.service.internal.AbstractServiceRegistryImpl.getService(AbstractServiceRegistryImpl.java:210) [hibernate-core-5.2.16.Final.jar:5.2.16.Final]\nat org.hibernate.engine.jdbc.internal.JdbcServicesImpl.configure(JdbcServicesImpl.java:51) [hibernate-core-5.2.16.Final.jar:5.2.16.Final]\nat org.hibernate.boot.registry.internal.StandardServiceRegistryImpl.configureService(StandardServiceRegistryImpl.java:94) [hibernate-core-5.2.16.Final.jar:5.2.16.Final]\nat org.hibernate.service.internal.AbstractServiceRegistryImpl.initializeService(AbstractServiceRegistryImpl.java:242) [hibernate-core-5.2.16.Final.jar:5.2.16.Final]\nat org.hibernate.service.internal.AbstractServiceRegistryImpl.getService(AbstractServiceRegistryImpl.java:210) [hibernate-core-5.2.16.Final.jar:5.2.16.Final]\nat org.hibernate.boot.model.process.spi.MetadataBuildingProcess.handleTypes(MetadataBuildingProcess.java:352) [hibernate-core-5.2.16.Final.jar:5.2.16.Final]\nat org.hibernate.boot.model.process.spi.MetadataBuildingProcess.complete(MetadataBuildingProcess.java:111) [hibernate-core-5.2.16.Final.jar:5.2.16.Final]\nat org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl.metadata(EntityManagerFactoryBuilderImpl.java:861) [hibernate-core-5.2.16.Final.jar:5.2.16.Final]\nat org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl.build(EntityManagerFactoryBuilderImpl.java:888) [hibernate-core-5.2.16.Final.jar:5.2.16.Final]\nat org.springframework.orm.jpa.vendor.SpringHibernateJpaPersistenceProvider.createContainerEntityManagerFactory(SpringHibernateJpaPersistenceProvider.java:57) [spring-orm-5.0.5.RELEASE.jar:5.0.5.RELEASE]\nat org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.createNativeEntityManagerFactory(LocalContainerEntityManagerFactoryBean.java:365) [spring-orm-5.0.5.RELEASE.jar:5.0.5.RELEASE]\nat org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.buildNativeEntityManagerFactory(AbstractEntityManagerFactoryBean.java:390) [spring-orm-5.0.5.RELEASE.jar:5.0.5.RELEASE]\nat org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.afterPropertiesSet(AbstractEntityManagerFactoryBean.java:377) [spring-orm-5.0.5.RELEASE.jar:5.0.5.RELEASE]\nat org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.afterPropertiesSet(LocalContainerEntityManagerFactoryBean.java:341) [spring-orm-5.0.5.RELEASE.jar:5.0.5.RELEASE]\nat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1761) [spring-beans-5.0.5.RELEASE.jar:5.0.5.RELEASE]\nat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1698) [spring-beans-5.0.5.RELEASE.jar:5.0.5.RELEASE]\nat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:579) [spring-beans-5.0.5.RELEASE.jar:5.0.5.RELEASE]\nat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:501) [spring-beans-5.0.5.RELEASE.jar:5.0.5.RELEASE]\nat org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:317) [spring-beans-5.0.5.RELEASE.jar:5.0.5.RELEASE]\nat org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:228) ~[spring-beans-5.0.5.RELEASE.jar:5.0.5.RELEASE]\nat org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:315) [spring-beans-5.0.5.RELEASE.jar:5.0.5.RELEASE]\nat org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199) [spring-beans-5.0.5.RELEASE.jar:5.0.5.RELEASE]\nat org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1089) ~[spring-context-5.0.5.RELEASE.jar:5.0.5.RELEASE]\nat org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:859) ~[spring-context-5.0.5.RELEASE.jar:5.0.5.RELEASE]\nat org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:550) ~[spring-context-5.0.5.RELEASE.jar:5.0.5.RELEASE]\nat org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:140) ~[spring-boot-2.0.1.RELEASE.jar:2.0.1.RELEASE]\nat org.springframework.boot.SpringApplication.refresh(SpringApplication.java:759) ~[spring-boot-2.0.1.RELEASE.jar:2.0.1.RELEASE]\nat org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:395) ~[spring-boot-2.0.1.RELEASE.jar:2.0.1.RELEASE]\nat org.springframework.boot.SpringApplication.run(SpringApplication.java:327) ~[spring-boot-2.0.1.RELEASE.jar:2.0.1.RELEASE]\nat org.springframework.boot.SpringApplication.run(SpringApplication.java:1255) ~[spring-boot-2.0.1.RELEASE.jar:2.0.1.RELEASE]\nat org.springframework.boot.SpringApplication.run(SpringApplication.java:1243) ~[spring-boot-2.0.1.RELEASE.jar:2.0.1.RELEASE]\nat com.mygroupid.myartifactid.SpringBootApplication.main(SpringBootApplication.java:26) ~[classes/:na]\n</code></pre>\n\n<p>Caused by: java.sql.SQLFeatureNotSupportedException: Die Methode org.postgresql.jdbc.PgConnection.createClob() ist noch nicht implementiert.\n    at org.postgresql.Driver.notImplemented(Driver.java:669) ~[postgresql-42.1.4.jar:42.1.4]\n    at org.postgresql.jdbc.PgConnection.createClob(PgConnection.java:1246) ~[postgresql-42.1.4.jar:42.1.4]\n    ... 44 common frames omitted</p>\n\n<p><strong>in English: org.postgresql.jdbc.PgConnection.createClob() is not implemented</strong></p>\n\n<p>what am i doing wrong?</p>\n"},{"tags":["java","android","kotlin"],"owner":{"account_id":29275519,"reputation":1,"user_id":22429343,"display_name":"Saad Ullah"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":12,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1697817292,"creation_date":1692708848,"question_id":76953539,"body_markdown":"I want to know some way in which we can change a recorded audio into some celebrity or cartoon character&#39;s voice.\r\nI&#39;ve done the audio recording part but looking for some help in applying voice effects on that recorded audio.\r\n\r\n\r\nI&#39;ve done recording the audio and saving in internal storage. I just need help in applying voice effects.","title":"Applying voice effects on recorded audio","body":"<p>I want to know some way in which we can change a recorded audio into some celebrity or cartoon character's voice.\nI've done the audio recording part but looking for some help in applying voice effects on that recorded audio.</p>\n<p>I've done recording the audio and saving in internal storage. I just need help in applying voice effects.</p>\n"},{"tags":["java","android","firebase","firebase-authentication","facebook-authentication"],"owner":{"account_id":29579771,"reputation":11,"user_id":22669827,"display_name":"Mohamed Hossam"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":29,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1697816686,"creation_date":1697816686,"question_id":77332239,"body_markdown":"I am newbie in authenticate facebook with firebase in android application now I am building an android application which I need to login with facebook I follow many tutorials on youtube and facebook developer documentation but nothing work with me.\r\nNothing happened when I click on Login with Facebook, no error, also no show me a message in logcat that request successful and no users added to firebase user\r\nthis is my code\r\n***RegisterFragment.java***\r\n```\r\npublic class RegisterFragment extends Fragment {\r\n\r\n\r\n    public RegisterFragment() {\r\n        // Required empty public constructor\r\n    }\r\n\r\n    @Override\r\n    public void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n\r\n    }\r\n\r\n    private FragmentRegisterBinding binding;\r\n    private HelperClass helper;\r\n    private CallbackManager callbackManager;\r\n    private String TAG = &quot;FragmentRegister&quot;;\r\n    private FirebaseAuth mAuth;\r\n\r\n    @Override\r\n    public View onCreateView(LayoutInflater inflater, ViewGroup container,\r\n                             Bundle savedInstanceState) {\r\n\r\n        binding = FragmentRegisterBinding.inflate(inflater,container,false);\r\n        mAuth = FirebaseAuth.getInstance();\r\n        helper = HelperClass.getInstance(this);\r\n\r\n        callbackManager = CallbackManager.Factory.create();\r\n        binding.btnRegisterFacebook.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View view) {\r\n                try {\r\n                    FacebookSdk.sdkInitialize(getContext());\r\n                    LoginManager.getInstance().logInWithReadPermissions(getActivity(), Arrays.asList(&quot;public_profile&quot;, &quot;email&quot;));\r\n                } catch (Exception e) {\r\n                    Toast.makeText(getContext(),e.getMessage(),Toast.LENGTH_SHORT).show();\r\n                }\r\n            }\r\n        });\r\n\r\n        LoginWithFB();\r\n\r\n        return binding.getRoot();\r\n    }\r\n\r\n    private void LoginWithFB() {\r\n        callbackManager = CallbackManager.Factory.create();\r\n\r\n        LoginManager.getInstance().registerCallback(callbackManager,\r\n                new FacebookCallback&lt;LoginResult&gt;() {\r\n                    @Override\r\n                    public void onSuccess(LoginResult loginResult) {\r\n                        // App code\r\n                        handleFacebookAccessToken(loginResult.getAccessToken());\r\n                    }\r\n\r\n                    @Override\r\n                    public void onCancel() {\r\n                        // App code\r\n                    }\r\n\r\n                    @Override\r\n                    public void onError(FacebookException exception) {\r\n                        // App code\r\n                        Toast.makeText(getContext(), exception.getMessage(), Toast.LENGTH_SHORT).show();\r\n                    }\r\n                });\r\n    }\r\n\r\n    private void handleFacebookAccessToken(AccessToken token) {\r\n        Log.d(TAG, &quot;handleFacebookAccessToken:&quot; + token);\r\n\r\n        AuthCredential credential = FacebookAuthProvider.getCredential(token.getToken());\r\n        mAuth.signInWithCredential(credential)\r\n                .addOnCompleteListener(getActivity(), new OnCompleteListener&lt;AuthResult&gt;() {\r\n                    @Override\r\n                    public void onComplete(@NonNull Task&lt;AuthResult&gt; task) {\r\n                        if (task.isSuccessful()) {\r\n                            // Sign in success, update UI with the signed-in user&#39;s information\r\n                            Log.d(TAG, &quot;signInWithCredential:success&quot;);\r\n                            FirebaseUser user = mAuth.getCurrentUser();\r\n                            Toast.makeText(getContext(), &quot;success&quot;, Toast.LENGTH_SHORT).show();\r\n                            //updateUI();\r\n                            helper.navigate(R.id.homeFragment,null);\r\n                        } else {\r\n                            // If sign in fails, display a message to the user.\r\n                            Log.w(TAG, &quot;signInWithCredential:failure&quot;, task.getException());\r\n                            Toast.makeText(getContext(), &quot;Authentication failed.&quot;,\r\n                                    Toast.LENGTH_SHORT).show();\r\n                            //updateUI();\r\n                        }\r\n                    }\r\n                });\r\n    }\r\n\r\n\r\n    @Override\r\n    public void onActivityResult(int requestCode, int resultCode, @Nullable Intent data) {\r\n        super.onActivityResult(requestCode, resultCode, data);\r\n\r\n        callbackManager.onActivityResult(requestCode, resultCode, data);\r\n\r\n    }\r\n\r\n\r\n}\r\n```\r\nwhen I run application it openes this activity\r\n[](https://i.stack.imgur.com/q7Rs4.jpg)\r\nwhen I click on Continue as Mohamed it returns back to register fragment and no users displays in users tab in firebase.\r\ncode doesn&#39;t crash but doesn&#39;t display toast message and also doesn&#39;t show any messages in logcat.&lt;br&gt;\r\nif anyone can help me in that, Thanks in advance\r\n\r\nI followed the facebook and firebase documentation but nothing helped me in my problem","title":"Facebook Authentication with Firebase doesn&#39;t work correctly in android","body":"<p>I am newbie in authenticate facebook with firebase in android application now I am building an android application which I need to login with facebook I follow many tutorials on youtube and facebook developer documentation but nothing work with me.\nNothing happened when I click on Login with Facebook, no error, also no show me a message in logcat that request successful and no users added to firebase user\nthis is my code\n<em><strong>RegisterFragment.java</strong></em></p>\n<pre><code>public class RegisterFragment extends Fragment {\n\n\n    public RegisterFragment() {\n        // Required empty public constructor\n    }\n\n    @Override\n    public void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n\n    }\n\n    private FragmentRegisterBinding binding;\n    private HelperClass helper;\n    private CallbackManager callbackManager;\n    private String TAG = &quot;FragmentRegister&quot;;\n    private FirebaseAuth mAuth;\n\n    @Override\n    public View onCreateView(LayoutInflater inflater, ViewGroup container,\n                             Bundle savedInstanceState) {\n\n        binding = FragmentRegisterBinding.inflate(inflater,container,false);\n        mAuth = FirebaseAuth.getInstance();\n        helper = HelperClass.getInstance(this);\n\n        callbackManager = CallbackManager.Factory.create();\n        binding.btnRegisterFacebook.setOnClickListener(new View.OnClickListener() {\n            @Override\n            public void onClick(View view) {\n                try {\n                    FacebookSdk.sdkInitialize(getContext());\n                    LoginManager.getInstance().logInWithReadPermissions(getActivity(), Arrays.asList(&quot;public_profile&quot;, &quot;email&quot;));\n                } catch (Exception e) {\n                    Toast.makeText(getContext(),e.getMessage(),Toast.LENGTH_SHORT).show();\n                }\n            }\n        });\n\n        LoginWithFB();\n\n        return binding.getRoot();\n    }\n\n    private void LoginWithFB() {\n        callbackManager = CallbackManager.Factory.create();\n\n        LoginManager.getInstance().registerCallback(callbackManager,\n                new FacebookCallback&lt;LoginResult&gt;() {\n                    @Override\n                    public void onSuccess(LoginResult loginResult) {\n                        // App code\n                        handleFacebookAccessToken(loginResult.getAccessToken());\n                    }\n\n                    @Override\n                    public void onCancel() {\n                        // App code\n                    }\n\n                    @Override\n                    public void onError(FacebookException exception) {\n                        // App code\n                        Toast.makeText(getContext(), exception.getMessage(), Toast.LENGTH_SHORT).show();\n                    }\n                });\n    }\n\n    private void handleFacebookAccessToken(AccessToken token) {\n        Log.d(TAG, &quot;handleFacebookAccessToken:&quot; + token);\n\n        AuthCredential credential = FacebookAuthProvider.getCredential(token.getToken());\n        mAuth.signInWithCredential(credential)\n                .addOnCompleteListener(getActivity(), new OnCompleteListener&lt;AuthResult&gt;() {\n                    @Override\n                    public void onComplete(@NonNull Task&lt;AuthResult&gt; task) {\n                        if (task.isSuccessful()) {\n                            // Sign in success, update UI with the signed-in user's information\n                            Log.d(TAG, &quot;signInWithCredential:success&quot;);\n                            FirebaseUser user = mAuth.getCurrentUser();\n                            Toast.makeText(getContext(), &quot;success&quot;, Toast.LENGTH_SHORT).show();\n                            //updateUI();\n                            helper.navigate(R.id.homeFragment,null);\n                        } else {\n                            // If sign in fails, display a message to the user.\n                            Log.w(TAG, &quot;signInWithCredential:failure&quot;, task.getException());\n                            Toast.makeText(getContext(), &quot;Authentication failed.&quot;,\n                                    Toast.LENGTH_SHORT).show();\n                            //updateUI();\n                        }\n                    }\n                });\n    }\n\n\n    @Override\n    public void onActivityResult(int requestCode, int resultCode, @Nullable Intent data) {\n        super.onActivityResult(requestCode, resultCode, data);\n\n        callbackManager.onActivityResult(requestCode, resultCode, data);\n\n    }\n\n\n}\n</code></pre>\n<p>when I run application it openes this activity\n<a href=\"https://i.stack.imgur.com/q7Rs4.jpg\" rel=\"nofollow noreferrer\"></a>\nwhen I click on Continue as Mohamed it returns back to register fragment and no users displays in users tab in firebase.\ncode doesn't crash but doesn't display toast message and also doesn't show any messages in logcat.<br>\nif anyone can help me in that, Thanks in advance</p>\n<p>I followed the facebook and firebase documentation but nothing helped me in my problem</p>\n"},{"tags":["java","spring","hibernate","serialization","jackson"],"comments":[{"owner":{"account_id":1251163,"reputation":1546,"user_id":1211547,"accept_rate":50,"display_name":"indybee"},"score":4,"creation_date":1392139232,"post_id":21708339,"comment_id":32824243,"body_markdown":"approach described in these 2 links worked for me, [Spring 3.1, Hibernate 4 and Jackson-Module-Hibernate](http://blog.pastelstudios.com/2012/03/12/spring-3-1-hibernate-4-jackson-module-hibernate/)  and [FasterXML / jackson-datatype-hibernate](https://github.com/FasterXML/jackson-datatype-hibernate)","body":"approach described in these 2 links worked for me, <a href=\"http://blog.pastelstudios.com/2012/03/12/spring-3-1-hibernate-4-jackson-module-hibernate/\" rel=\"nofollow noreferrer\">Spring 3.1, Hibernate 4 and Jackson-Module-Hibernate</a>  and <a href=\"https://github.com/FasterXML/jackson-datatype-hibernate\" rel=\"nofollow noreferrer\">FasterXML / jackson-datatype-hibernate</a>"},{"owner":{"account_id":1514753,"reputation":5733,"user_id":1416034,"display_name":"r1ckr"},"score":0,"creation_date":1392300325,"post_id":21708339,"comment_id":32908833,"body_markdown":"Thank you indybee, I&#39;ve been watching the tutorial, spring 3.2.5 already have a MappingJackson2HttpMessageConverter, but I cannot use it to avoid the non fetched lazy object, also I&#39;ve tried to implementing the one in the tutorial, but nothing...","body":"Thank you indybee, I&#39;ve been watching the tutorial, spring 3.2.5 already have a MappingJackson2HttpMessageConverter, but I cannot use it to avoid the non fetched lazy object, also I&#39;ve tried to implementing the one in the tutorial, but nothing..."},{"owner":{"account_id":1251163,"reputation":1546,"user_id":1211547,"accept_rate":50,"display_name":"indybee"},"score":1,"creation_date":1392301483,"post_id":21708339,"comment_id":32909694,"body_markdown":"are you getting the same error &quot;could not initialize proxy&quot; or something different? (i used the additional HibernateAwareObjectMapper described in the articles with Spring 3.2.6 and Hibernate 4.1.7 and jackson 2.3)","body":"are you getting the same error &quot;could not initialize proxy&quot; or something different? (i used the additional HibernateAwareObjectMapper described in the articles with Spring 3.2.6 and Hibernate 4.1.7 and jackson 2.3)"},{"owner":{"account_id":1514753,"reputation":5733,"user_id":1416034,"display_name":"r1ckr"},"score":1,"creation_date":1392310178,"post_id":21708339,"comment_id":32916094,"body_markdown":"Got it!! Since version 3.1.2 Spring have his own **MappingJackson2HttpMessageConverter** and have almost the same behavior of the one in the tutorial, but the problem was that I am using Spring java config and I&#39;m starting with javaconfigs. I was trying to make a *@Bean MappingJackson2HttpMessageConverter*, instead of adding it to the HttpMessageConverters of Spring, maybe it&#39;s clearer in the answer :)","body":"Got it!! Since version 3.1.2 Spring have his own <b>MappingJackson2HttpMessageConverter</b> and have almost the same behavior of the one in the tutorial, but the problem was that I am using Spring java config and I&#39;m starting with javaconfigs. I was trying to make a <i>@Bean MappingJackson2HttpMessageConverter</i>, instead of adding it to the HttpMessageConverters of Spring, maybe it&#39;s clearer in the answer :)"},{"owner":{"account_id":2496504,"reputation":3612,"user_id":2172731,"accept_rate":67,"display_name":"Munish Chandel"},"score":0,"creation_date":1533954721,"post_id":21708339,"comment_id":90549279,"body_markdown":"Is it broken in Spring Boot 2?","body":"Is it broken in Spring Boot 2?"}],"answers":[{"tags":[],"owner":{"account_id":1514753,"reputation":5733,"user_id":1416034,"display_name":"r1ckr"},"down_vote_count":1,"up_vote_count":103,"is_accepted":true,"score":102,"last_activity_date":1392310136,"creation_date":1392310136,"answer_id":21760361,"question_id":21708339,"body_markdown":"I finally found the solution! thanks to indybee for giving me a clue.\r\n\r\nThe tutorial [Spring 3.1, Hibernate 4 and Jackson-Module-Hibernate][1] have a good solution for Spring 3.1 and earlier versions. But since version 3.1.2 Spring have his own **MappingJackson2HttpMessageConverter** with almost the same functionality as the one in the tutorial, so we don&#39;t need to create this custom HTTPMessageConverter.\r\n\r\nWith javaconfig we don&#39;t need to create a **HibernateAwareObjectMapper** too, we just need to add the **Hibernate4Module** to the default **MappingJackson2HttpMessageConverter** that Spring already have and add it to the HttpMessageConverters of the application, so we need to:\r\n\r\n1. Extend our spring config class from **WebMvcConfigurerAdapter** and override the method **configureMessageConverters**. \r\n\r\n2. On that method add the **MappingJackson2HttpMessageConverter** with the **Hibernate4Module** registered in a previus method.\r\n\r\nOur config class should look like this:\r\n\r\n\t@Configuration\r\n\t@EnableWebMvc\r\n\tpublic class MyConfigClass extends WebMvcConfigurerAdapter{\r\n\r\n\t\t//More configuration....\r\n\t\t\r\n\t\t/* Here we register the Hibernate4Module into an ObjectMapper, then set this custom-configured ObjectMapper\r\n\t\t * to the MessageConverter and return it to be added to the HttpMessageConverters of our application*/\r\n\t\tpublic MappingJackson2HttpMessageConverter jacksonMessageConverter(){\r\n\t\t\tMappingJackson2HttpMessageConverter messageConverter = new MappingJackson2HttpMessageConverter();\r\n\t\t\t\r\n\t\t\tObjectMapper mapper = new ObjectMapper();\r\n\t\t\t//Registering Hibernate4Module to support lazy objects\r\n\t\t\tmapper.registerModule(new Hibernate4Module());\r\n\t\t\t\r\n\t\t\tmessageConverter.setObjectMapper(mapper);\r\n\t\t\treturn messageConverter;\r\n\t\t\t\r\n\t\t}\r\n\r\n\t\t@Override\r\n\t\tpublic void configureMessageConverters(List&lt;HttpMessageConverter&lt;?&gt;&gt; converters) {\r\n\t\t\t//Here we add our custom-configured HttpMessageConverter\r\n\t\t\tconverters.add(jacksonMessageConverter());\r\n\t\t\tsuper.configureMessageConverters(converters);\r\n\t\t}\r\n\t\t\r\n\t\t//More configuration....\r\n\t}\r\n\t\r\nIf you have an xml configuration, you don&#39;t need to create your own MappingJackson2HttpMessageConverter either, but you do need to create the personalized mapper that appears in the tutorial (HibernateAwareObjectMapper), so your xml config should look like this:\r\n\r\n\t&lt;mvc:message-converters&gt;\r\n\t\t&lt;bean class=&quot;org.springframework.http.converter.json.MappingJackson2HttpMessageConverter&quot;&gt;\r\n\t\t\t&lt;property name=&quot;objectMapper&quot;&gt;\r\n\t\t\t\t&lt;bean class=&quot;com.pastelstudios.json.HibernateAwareObjectMapper&quot; /&gt;\r\n\t\t\t&lt;/property&gt;\r\n\t\t&lt;/bean&gt;\r\n\t&lt;/mvc:message-converters&gt;\r\n\t\r\nHope this answer be understandable and helps someone find the solution for this problem, any questions feel free to ask!\r\n\r\n\r\n  [1]: http://blog.pastelstudios.com/2012/03/12/spring-3-1-hibernate-4-jackson-module-hibernate/","title":"Avoid Jackson serialization on non fetched lazy objects","body":"<p>I finally found the solution! thanks to indybee for giving me a clue.</p>\n\n<p>The tutorial <a href=\"http://blog.pastelstudios.com/2012/03/12/spring-3-1-hibernate-4-jackson-module-hibernate/\">Spring 3.1, Hibernate 4 and Jackson-Module-Hibernate</a> have a good solution for Spring 3.1 and earlier versions. But since version 3.1.2 Spring have his own <strong>MappingJackson2HttpMessageConverter</strong> with almost the same functionality as the one in the tutorial, so we don't need to create this custom HTTPMessageConverter.</p>\n\n<p>With javaconfig we don't need to create a <strong>HibernateAwareObjectMapper</strong> too, we just need to add the <strong>Hibernate4Module</strong> to the default <strong>MappingJackson2HttpMessageConverter</strong> that Spring already have and add it to the HttpMessageConverters of the application, so we need to:</p>\n\n<ol>\n<li><p>Extend our spring config class from <strong>WebMvcConfigurerAdapter</strong> and override the method <strong>configureMessageConverters</strong>. </p></li>\n<li><p>On that method add the <strong>MappingJackson2HttpMessageConverter</strong> with the <strong>Hibernate4Module</strong> registered in a previus method.</p></li>\n</ol>\n\n<p>Our config class should look like this:</p>\n\n<pre><code>@Configuration\n@EnableWebMvc\npublic class MyConfigClass extends WebMvcConfigurerAdapter{\n\n    //More configuration....\n\n    /* Here we register the Hibernate4Module into an ObjectMapper, then set this custom-configured ObjectMapper\n     * to the MessageConverter and return it to be added to the HttpMessageConverters of our application*/\n    public MappingJackson2HttpMessageConverter jacksonMessageConverter(){\n        MappingJackson2HttpMessageConverter messageConverter = new MappingJackson2HttpMessageConverter();\n\n        ObjectMapper mapper = new ObjectMapper();\n        //Registering Hibernate4Module to support lazy objects\n        mapper.registerModule(new Hibernate4Module());\n\n        messageConverter.setObjectMapper(mapper);\n        return messageConverter;\n\n    }\n\n    @Override\n    public void configureMessageConverters(List&lt;HttpMessageConverter&lt;?&gt;&gt; converters) {\n        //Here we add our custom-configured HttpMessageConverter\n        converters.add(jacksonMessageConverter());\n        super.configureMessageConverters(converters);\n    }\n\n    //More configuration....\n}\n</code></pre>\n\n<p>If you have an xml configuration, you don't need to create your own MappingJackson2HttpMessageConverter either, but you do need to create the personalized mapper that appears in the tutorial (HibernateAwareObjectMapper), so your xml config should look like this:</p>\n\n<pre><code>&lt;mvc:message-converters&gt;\n    &lt;bean class=\"org.springframework.http.converter.json.MappingJackson2HttpMessageConverter\"&gt;\n        &lt;property name=\"objectMapper\"&gt;\n            &lt;bean class=\"com.pastelstudios.json.HibernateAwareObjectMapper\" /&gt;\n        &lt;/property&gt;\n    &lt;/bean&gt;\n&lt;/mvc:message-converters&gt;\n</code></pre>\n\n<p>Hope this answer be understandable and helps someone find the solution for this problem, any questions feel free to ask!</p>\n"},{"tags":[],"owner":{"account_id":59412,"reputation":362,"user_id":1967185,"display_name":"blackwood"},"down_vote_count":1,"up_vote_count":5,"is_accepted":false,"score":4,"last_activity_date":1408901995,"creation_date":1408901690,"answer_id":25474428,"question_id":21708339,"body_markdown":"If you use XML config and use `&lt;annotation-driven /&gt;`, I found that you have to nest `&lt;message-converters&gt;` inside `&lt;annotation-driven&gt;` as recommended on the [Jackson Github account][1].\r\n\r\nLike so:\r\n\r\n    &lt;annotation-driven&gt;\r\n      &lt;message-converters&gt;\r\n        &lt;beans:bean class=&quot;org.springframework.http.converter.json.MappingJackson2HttpMessageConverter&quot;&gt;\r\n          &lt;beans:property name=&quot;objectMapper&quot;&gt;\r\n            &lt;beans:bean class=&quot;com.pastelstudios.json.HibernateAwareObjectMapper&quot; /&gt;\r\n          &lt;/beans:property&gt;\r\n        &lt;/beans:bean&gt; \r\n      &lt;/message-converters&gt;\r\n    &lt;/annotation-driven&gt;\r\n `\r\n\r\n\r\n\r\n  [1]: https://github.com/FasterXML/jackson-datatype-hibernate","title":"Avoid Jackson serialization on non fetched lazy objects","body":"<p>If you use XML config and use <code>&lt;annotation-driven /&gt;</code>, I found that you have to nest <code>&lt;message-converters&gt;</code> inside <code>&lt;annotation-driven&gt;</code> as recommended on the <a href=\"https://github.com/FasterXML/jackson-datatype-hibernate\" rel=\"nofollow noreferrer\">Jackson Github account</a>.</p>\n\n<p>Like so:</p>\n\n<pre><code>&lt;annotation-driven&gt;\n  &lt;message-converters&gt;\n    &lt;beans:bean class=\"org.springframework.http.converter.json.MappingJackson2HttpMessageConverter\"&gt;\n      &lt;beans:property name=\"objectMapper\"&gt;\n        &lt;beans:bean class=\"com.pastelstudios.json.HibernateAwareObjectMapper\" /&gt;\n      &lt;/beans:property&gt;\n    &lt;/beans:bean&gt; \n  &lt;/message-converters&gt;\n&lt;/annotation-driven&gt;\n</code></pre>\n\n<p>`</p>\n"},{"tags":[],"owner":{"account_id":129495,"reputation":7313,"user_id":328121,"accept_rate":62,"display_name":"Przemek Nowak"},"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1409660127,"creation_date":1409660127,"answer_id":25623219,"question_id":21708339,"body_markdown":"You can use the following helper from Spring Data Rest project:\r\n\r\n    Jackson2DatatypeHelper.configureObjectMapper(objectMapper);","title":"Avoid Jackson serialization on non fetched lazy objects","body":"<p>You can use the following helper from Spring Data Rest project:</p>\n\n<pre><code>Jackson2DatatypeHelper.configureObjectMapper(objectMapper);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":131644,"reputation":479,"user_id":331793,"display_name":"Luis Belloch"},"down_vote_count":2,"up_vote_count":17,"is_accepted":false,"score":15,"last_activity_date":1422392492,"creation_date":1422392492,"answer_id":28179906,"question_id":21708339,"body_markdown":"This is similar to accepted solution by @rick.\r\n\r\nIf you don&#39;t want to touch existing message converters configuration you can just declare a `Jackson2ObjectMapperBuilder` bean like:\r\n\r\n    @Bean\r\n    public Jackson2ObjectMapperBuilder configureObjectMapper() {\r\n        return new Jackson2ObjectMapperBuilder()\r\n            .modulesToInstall(Hibernate4Module.class);\r\n    }\r\n\r\nDo not forget to add the following dependency to your Gradle file (or Maven):\r\n\r\n    compile &#39;com.fasterxml.jackson.datatype:jackson-datatype-hibernate4:2.4.4&#39;\r\n\r\nUseful if you have a [tag:spring-boot] application and you want to keep the ability to modify Jackson features from `application.properties` file.","title":"Avoid Jackson serialization on non fetched lazy objects","body":"<p>This is similar to accepted solution by @rick.</p>\n\n<p>If you don't want to touch existing message converters configuration you can just declare a <code>Jackson2ObjectMapperBuilder</code> bean like:</p>\n\n<pre><code>@Bean\npublic Jackson2ObjectMapperBuilder configureObjectMapper() {\n    return new Jackson2ObjectMapperBuilder()\n        .modulesToInstall(Hibernate4Module.class);\n}\n</code></pre>\n\n<p>Do not forget to add the following dependency to your Gradle file (or Maven):</p>\n\n<pre><code>compile 'com.fasterxml.jackson.datatype:jackson-datatype-hibernate4:2.4.4'\n</code></pre>\n\n<p>Useful if you have a <a href=\"/questions/tagged/spring-boot\" class=\"post-tag\" title=\"show questions tagged 'spring-boot'\" rel=\"tag\">spring-boot</a> application and you want to keep the ability to modify Jackson features from <code>application.properties</code> file.</p>\n"},{"tags":[],"owner":{"account_id":299846,"reputation":6993,"user_id":606662,"accept_rate":72,"display_name":"Markus Pscheidt"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1587807224,"creation_date":1450194124,"answer_id":34293357,"question_id":21708339,"body_markdown":"I tried [@rick&#39;s useful answer](https://stackoverflow.com/a/21760361/606662), but ran into the problem that &quot;well-known modules&quot; such as [jackson-datatype-jsr310](https://github.com/FasterXML/jackson-datatype-jsr310) weren&#39;t automatically registered despite them being on the classpath. (This [blog post](https://spring.io/blog/2014/12/02/latest-jackson-integration-improvements-in-spring#jackson-modules) explains the auto-registration.)\r\n\r\nExpanding on @rick&#39;s answer, here&#39;s a variation using Spring&#39;s [Jackson2ObjectMapperBuilder](http://docs.spring.io/spring/docs/current/javadoc-api/org/springframework/http/converter/json/Jackson2ObjectMapperBuilder.html) to create the `ObjectMapper`. This auto-registers the &quot;well-known modules&quot; and sets certain features in addition to installing the `Hibernate4Module`.\r\n\r\n    @Configuration\r\n    @EnableWebMvc\r\n    public class MyWebConfig extends WebMvcConfigurerAdapter {\r\n\r\n\t\t// get a configured Hibernate4Module\r\n\t\t// here as an example with a disabled USE_TRANSIENT_ANNOTATION feature\r\n\t\tprivate Hibernate4Module hibernate4Module() {\r\n\t\t\treturn new Hibernate4Module().disable(Hibernate4Module.Feature.USE_TRANSIENT_ANNOTATION);\r\n\t\t}\r\n\r\n\t\t// create the ObjectMapper with Spring&#39;s Jackson2ObjectMapperBuilder\r\n\t\t// and passing the hibernate4Module to modulesToInstall()\r\n\t\tprivate MappingJackson2HttpMessageConverter jacksonMessageConverter(){\r\n\t\t\tJackson2ObjectMapperBuilder builder = new Jackson2ObjectMapperBuilder()\r\n\t\t\t\t\t\t\t\t.modulesToInstall(hibernate4Module());\r\n        \treturn new MappingJackson2HttpMessageConverter(builder.build());\r\n\t  }\r\n\r\n\t\t@Override\r\n\t\tpublic void configureMessageConverters(List&lt;HttpMessageConverter&lt;?&gt;&gt; converters) {\r\n\t\t\tconverters.add(jacksonMessageConverter());\r\n\t\t\tsuper.configureMessageConverters(converters);\r\n\t\t}\r\n\t}\r\n","title":"Avoid Jackson serialization on non fetched lazy objects","body":"<p>I tried <a href=\"https://stackoverflow.com/a/21760361/606662\">@rick's useful answer</a>, but ran into the problem that \"well-known modules\" such as <a href=\"https://github.com/FasterXML/jackson-datatype-jsr310\" rel=\"nofollow noreferrer\">jackson-datatype-jsr310</a> weren't automatically registered despite them being on the classpath. (This <a href=\"https://spring.io/blog/2014/12/02/latest-jackson-integration-improvements-in-spring#jackson-modules\" rel=\"nofollow noreferrer\">blog post</a> explains the auto-registration.)</p>\n\n<p>Expanding on @rick's answer, here's a variation using Spring's <a href=\"http://docs.spring.io/spring/docs/current/javadoc-api/org/springframework/http/converter/json/Jackson2ObjectMapperBuilder.html\" rel=\"nofollow noreferrer\">Jackson2ObjectMapperBuilder</a> to create the <code>ObjectMapper</code>. This auto-registers the \"well-known modules\" and sets certain features in addition to installing the <code>Hibernate4Module</code>.</p>\n\n<pre><code>@Configuration\n@EnableWebMvc\npublic class MyWebConfig extends WebMvcConfigurerAdapter {\n\n    // get a configured Hibernate4Module\n    // here as an example with a disabled USE_TRANSIENT_ANNOTATION feature\n    private Hibernate4Module hibernate4Module() {\n        return new Hibernate4Module().disable(Hibernate4Module.Feature.USE_TRANSIENT_ANNOTATION);\n    }\n\n    // create the ObjectMapper with Spring's Jackson2ObjectMapperBuilder\n    // and passing the hibernate4Module to modulesToInstall()\n    private MappingJackson2HttpMessageConverter jacksonMessageConverter(){\n        Jackson2ObjectMapperBuilder builder = new Jackson2ObjectMapperBuilder()\n                            .modulesToInstall(hibernate4Module());\n        return new MappingJackson2HttpMessageConverter(builder.build());\n  }\n\n    @Override\n    public void configureMessageConverters(List&lt;HttpMessageConverter&lt;?&gt;&gt; converters) {\n        converters.add(jacksonMessageConverter());\n        super.configureMessageConverters(converters);\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":16650,"reputation":6289,"user_id":36510,"accept_rate":57,"display_name":"nevster"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1462978717,"creation_date":1462950154,"answer_id":37155331,"question_id":21708339,"body_markdown":"Although this question is slightly different to this one : https://stackoverflow.com/questions/4362104/strange-jackson-exception-being-thrown-when-serializing-hibernate-object/, the underlying problem can be fixed in the same way with this code:\r\n\r\n\r\n    @Provider\r\n    public class MyJacksonJsonProvider extends JacksonJsonProvider {\r\n        public MyJacksonJsonProvider() {\r\n            ObjectMapper mapper = new ObjectMapper();\r\n            mapper.disable(SerializationFeature.FAIL_ON_EMPTY_BEANS);\r\n            setMapper(mapper);\r\n        }\r\n    }\r\n","title":"Avoid Jackson serialization on non fetched lazy objects","body":"<p>Although this question is slightly different to this one : <a href=\"https://stackoverflow.com/questions/4362104/strange-jackson-exception-being-thrown-when-serializing-hibernate-object/\">Strange Jackson exception being thrown when serializing Hibernate object</a>, the underlying problem can be fixed in the same way with this code:</p>\n\n<pre><code>@Provider\npublic class MyJacksonJsonProvider extends JacksonJsonProvider {\n    public MyJacksonJsonProvider() {\n        ObjectMapper mapper = new ObjectMapper();\n        mapper.disable(SerializationFeature.FAIL_ON_EMPTY_BEANS);\n        setMapper(mapper);\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3554628,"reputation":794,"user_id":2968675,"display_name":"user2968675"},"down_vote_count":1,"up_vote_count":4,"is_accepted":false,"score":3,"last_activity_date":1465448297,"creation_date":1465448297,"answer_id":37717139,"question_id":21708339,"body_markdown":"For those who came here looking to find the solution for Apache CXF-based RESTful service, the configuration that fixes it is below:\r\n\r\n    &lt;jaxrs:providers&gt;\r\n        &lt;bean class=&quot;com.fasterxml.jackson.jaxrs.json.JacksonJsonProvider&quot;&gt;\r\n            &lt;property name=&quot;mapper&quot; ref=&quot;objectMapper&quot;/&gt;\r\n        &lt;/bean&gt;\r\n    &lt;/jaxrs:providers&gt;\r\n\r\n    &lt;bean id=&quot;objectMapper&quot; class=&quot;path.to.your.HibernateAwareObjectMapper&quot;/&gt;\r\n\r\nWhere HibernateAwareObjectMapper is defined as:\r\n\r\n    public class HibernateAwareObjectMapper extends ObjectMapper {\r\n\t    public HibernateAwareObjectMapper() {\r\n            registerModule(new Hibernate5Module());\r\n        }\r\n    }\r\n\r\nThe following dependency is required as of June 2016 (provided you&#39;re using Hibernate5):\r\n\r\n    &lt;dependency&gt;\r\n  \t    &lt;groupId&gt;com.fasterxml.jackson.datatype&lt;/groupId&gt;\r\n  \t    &lt;artifactId&gt;jackson-datatype-hibernate5&lt;/artifactId&gt;\r\n  \t\t&lt;version&gt;2.7.4&lt;/version&gt;\r\n\t&lt;/dependency&gt;  \r\n\r\n   \r\n\r\n\r\n\r\n\r\n   ","title":"Avoid Jackson serialization on non fetched lazy objects","body":"<p>For those who came here looking to find the solution for Apache CXF-based RESTful service, the configuration that fixes it is below:</p>\n\n<pre><code>&lt;jaxrs:providers&gt;\n    &lt;bean class=\"com.fasterxml.jackson.jaxrs.json.JacksonJsonProvider\"&gt;\n        &lt;property name=\"mapper\" ref=\"objectMapper\"/&gt;\n    &lt;/bean&gt;\n&lt;/jaxrs:providers&gt;\n\n&lt;bean id=\"objectMapper\" class=\"path.to.your.HibernateAwareObjectMapper\"/&gt;\n</code></pre>\n\n<p>Where HibernateAwareObjectMapper is defined as:</p>\n\n<pre><code>public class HibernateAwareObjectMapper extends ObjectMapper {\n    public HibernateAwareObjectMapper() {\n        registerModule(new Hibernate5Module());\n    }\n}\n</code></pre>\n\n<p>The following dependency is required as of June 2016 (provided you're using Hibernate5):</p>\n\n<pre><code>&lt;dependency&gt;\n    &lt;groupId&gt;com.fasterxml.jackson.datatype&lt;/groupId&gt;\n    &lt;artifactId&gt;jackson-datatype-hibernate5&lt;/artifactId&gt;\n    &lt;version&gt;2.7.4&lt;/version&gt;\n&lt;/dependency&gt;  \n</code></pre>\n"},{"tags":[],"owner":{"account_id":80866,"reputation":11667,"user_id":228369,"accept_rate":79,"display_name":"chrismarx"},"down_vote_count":1,"up_vote_count":50,"is_accepted":false,"score":49,"last_activity_date":1466006707,"creation_date":1466006707,"answer_id":37840526,"question_id":21708339,"body_markdown":"As of Spring 4.2 and using Spring Boot and javaconfig, registering the Hibernate4Module is now as simple as adding this to your configuration:\r\n\r\n    @Bean\r\n\tpublic Module datatypeHibernateModule() {\r\n\t  return new Hibernate4Module();\r\n\t}\r\n\r\nref: https://spring.io/blog/2014/12/02/latest-jackson-integration-improvements-in-spring\r\n","title":"Avoid Jackson serialization on non fetched lazy objects","body":"<p>As of Spring 4.2 and using Spring Boot and javaconfig, registering the Hibernate4Module is now as simple as adding this to your configuration:</p>\n\n<pre><code>@Bean\npublic Module datatypeHibernateModule() {\n  return new Hibernate4Module();\n}\n</code></pre>\n\n<p>ref: <a href=\"https://spring.io/blog/2014/12/02/latest-jackson-integration-improvements-in-spring\" rel=\"noreferrer\">https://spring.io/blog/2014/12/02/latest-jackson-integration-improvements-in-spring</a></p>\n"},{"tags":[],"owner":{"account_id":3745896,"reputation":2369,"user_id":3114566,"display_name":"ahll"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1472208872,"creation_date":1472208872,"answer_id":39164608,"question_id":21708339,"body_markdown":"I tried this, and worked:\r\n\r\n// custom configuration for lazy loading\r\n\r\n    public static class HibernateLazyInitializerSerializer extends JsonSerializer&lt;JavassistLazyInitializer&gt; {\r\n    \r\n        @Override\r\n        public void serialize(JavassistLazyInitializer initializer, JsonGenerator jsonGenerator,\r\n                SerializerProvider serializerProvider)\r\n                throws IOException, JsonProcessingException {\r\n            jsonGenerator.writeNull();\r\n        }\r\n    }\r\n\r\nand configure mapper:\r\n\r\n        mapper = new JacksonMapper();\r\n        SimpleModule simpleModule = new SimpleModule(\r\n                &quot;SimpleModule&quot;, new Version(1,0,0,null)\r\n        );\r\n        simpleModule.addSerializer(\r\n                JavassistLazyInitializer.class,\r\n                new HibernateLazyInitializerSerializer()\r\n        );\r\n        mapper.registerModule(simpleModule);","title":"Avoid Jackson serialization on non fetched lazy objects","body":"<p>I tried this, and worked:</p>\n\n<p>// custom configuration for lazy loading</p>\n\n<pre><code>public static class HibernateLazyInitializerSerializer extends JsonSerializer&lt;JavassistLazyInitializer&gt; {\n\n    @Override\n    public void serialize(JavassistLazyInitializer initializer, JsonGenerator jsonGenerator,\n            SerializerProvider serializerProvider)\n            throws IOException, JsonProcessingException {\n        jsonGenerator.writeNull();\n    }\n}\n</code></pre>\n\n<p>and configure mapper:</p>\n\n<pre><code>    mapper = new JacksonMapper();\n    SimpleModule simpleModule = new SimpleModule(\n            \"SimpleModule\", new Version(1,0,0,null)\n    );\n    simpleModule.addSerializer(\n            JavassistLazyInitializer.class,\n            new HibernateLazyInitializerSerializer()\n    );\n    mapper.registerModule(simpleModule);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1434762,"reputation":22772,"user_id":1356423,"accept_rate":65,"display_name":"Alan Hay"},"down_vote_count":1,"up_vote_count":12,"is_accepted":false,"score":11,"last_activity_date":1487789918,"creation_date":1487768349,"answer_id":42392195,"question_id":21708339,"body_markdown":"In the case of Spring Data Rest then, while the solution posted by @r1ckr works, all that is required is to add one of the following dependencies depending on your Hibernate version:\r\n\r\n    &lt;dependency&gt;\r\n    \t&lt;groupId&gt;com.fasterxml.jackson.datatype&lt;/groupId&gt;\r\n    \t&lt;artifactId&gt;jackson-datatype-hibernate4&lt;/artifactId&gt;\r\n    \t&lt;version&gt;${jackson.version}&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n\r\nor\r\n\r\n\r\n    &lt;dependency&gt;\r\n    \t&lt;groupId&gt;com.fasterxml.jackson.datatype&lt;/groupId&gt;\r\n    \t&lt;artifactId&gt;jackson-datatype-hibernate5&lt;/artifactId&gt;\r\n    \t&lt;version&gt;${jackson.version}&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n\r\nWithin Spring Data Rest there is a class:\r\n\r\n`org.springframework.data.rest.webmvc.json.Jackson2DatatypeHelper` \r\n\r\nwhich will auto-detect and register the Module on application start-up.\r\n\r\nThere is however an issue:\r\n\r\nhttps://stackoverflow.com/questions/42395831/issue-serializing-lazy-manytoone\r\n\r\n\r\n","title":"Avoid Jackson serialization on non fetched lazy objects","body":"<p>In the case of Spring Data Rest then, while the solution posted by @r1ckr works, all that is required is to add one of the following dependencies depending on your Hibernate version:</p>\n\n<pre><code>&lt;dependency&gt;\n    &lt;groupId&gt;com.fasterxml.jackson.datatype&lt;/groupId&gt;\n    &lt;artifactId&gt;jackson-datatype-hibernate4&lt;/artifactId&gt;\n    &lt;version&gt;${jackson.version}&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n\n<p>or</p>\n\n<pre><code>&lt;dependency&gt;\n    &lt;groupId&gt;com.fasterxml.jackson.datatype&lt;/groupId&gt;\n    &lt;artifactId&gt;jackson-datatype-hibernate5&lt;/artifactId&gt;\n    &lt;version&gt;${jackson.version}&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n\n<p>Within Spring Data Rest there is a class:</p>\n\n<p><code>org.springframework.data.rest.webmvc.json.Jackson2DatatypeHelper</code> </p>\n\n<p>which will auto-detect and register the Module on application start-up.</p>\n\n<p>There is however an issue:</p>\n\n<p><a href=\"https://stackoverflow.com/questions/42395831/issue-serializing-lazy-manytoone\">Issue Serializing Lazy @ManyToOne</a></p>\n"},{"tags":[],"owner":{"account_id":3701900,"reputation":631,"user_id":3081357,"display_name":"sdw"},"down_vote_count":1,"up_vote_count":6,"is_accepted":false,"score":5,"last_activity_date":1547580806,"creation_date":1547528876,"answer_id":54192969,"question_id":21708339,"body_markdown":"The following solution is for Spring 4.3, (non-boot) &amp; Hibernate 5.1 where we transitioned all fetchtypes to `fetch=FetchType.LAZY` from cases of `fetch=FetchType.EAGER` for performance reasons. Immediately we saw the `com.fasterxml.jackson.databind.JsonMappingException: could not initialize proxy` exception due to the lazy load issue. \r\n\r\nFirst, we add the following maven dependency:\r\n\r\n    &lt;dependency&gt;\r\n        &lt;groupId&gt;com.fasterxml.jackson.datatype&lt;/groupId&gt;\r\n        &lt;artifactId&gt;jackson-datatype-hibernate5&lt;/artifactId&gt;\r\n    &lt;/dependency&gt;  \r\n\r\nThen the following is added to our Java MVC configuration file:\r\n\r\n    @Configuration\r\n    @EnableWebMvc \r\n    public class MvcConfig extends WebMvcConfigurerAdapter {\r\n\r\n    @Override\r\n\tpublic void extendMessageConverters(List&lt;HttpMessageConverter&lt;?&gt;&gt; converters) {\r\n\r\n\t\tHibernate5Module h5module = new Hibernate5Module();\r\n\t\th5module.disable(Hibernate5Module.Feature.USE_TRANSIENT_ANNOTATION);\r\n\t\th5module.enable(Hibernate5Module.Feature.FORCE_LAZY_LOADING);\r\n\r\n\t\tfor (HttpMessageConverter&lt;?&gt; mc : converters){\r\n\t\t\tif (mc instanceof MappingJackson2HttpMessageConverter || mc instanceof MappingJackson2XmlHttpMessageConverter) {\r\n\t\t\t\t((AbstractJackson2HttpMessageConverter) mc).getObjectMapper().registerModule(h5module);\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn;\r\n\t}\r\n\r\nNotes:\r\n\r\n* You need to create and configure the Hibernate5Module to get behavior similar to Jackson without this module. The default makes incompatible assumptions.\r\n\r\n* Our `WebMvcConfigurerAdapter` has a lot of other configuration in it and we wanted to avoid another configuration class, which is why we didn&#39;t use the `WebMvcConfigurationSupport#addDefaultHttpMessageConverters` function that has been referred to on other posts.\r\n \r\n* `WebMvcConfigurerAdapter#configureMessageConverters` disables all of Spring&#39;s internal configuration of message converters. We preferred to avoid the potential issues around this.  \r\n\r\n* Using `extendMessageConverters` enabled access to all the automatically-configured Jackson classes without losing the configuration of all other message converters.\r\n\r\n* Using `getObjectMapper#registerModule` we were able to add the `Hibernate5Module` to the existing converters.  \r\n* The module was added to both the JSON and XML processors\r\n\r\nThis addition solved the issue with Hibernate and lazy loading but caused a **residual issue with the generated JSON format**.  As reported in [this github issue][1], the hibernate-jackson lazy load module currently ignores the @JsonUnwrapped annotation, leading to potential data errors. This happens regardless of the force-loading feature setting.  The problem has been there since 2016.  \r\n\r\n---\r\n\r\n**Note**\r\n\r\nIt appears that by adding the following to classes that are lazy-loaded, the built-in ObjectMapper works without adding the hibernate5 module:\r\n\r\n    @JsonIgnoreProperties(  {&quot;handler&quot;,&quot;hibernateLazyInitializer&quot;} )\r\n    public class Anyclass {\r\n    \r\n\r\n\r\n\r\n  [1]: https://github.com/FasterXML/jackson-datatype-hibernate/issues/97","title":"Avoid Jackson serialization on non fetched lazy objects","body":"<p>The following solution is for Spring 4.3, (non-boot) &amp; Hibernate 5.1 where we transitioned all fetchtypes to <code>fetch=FetchType.LAZY</code> from cases of <code>fetch=FetchType.EAGER</code> for performance reasons. Immediately we saw the <code>com.fasterxml.jackson.databind.JsonMappingException: could not initialize proxy</code> exception due to the lazy load issue. </p>\n\n<p>First, we add the following maven dependency:</p>\n\n<pre><code>&lt;dependency&gt;\n    &lt;groupId&gt;com.fasterxml.jackson.datatype&lt;/groupId&gt;\n    &lt;artifactId&gt;jackson-datatype-hibernate5&lt;/artifactId&gt;\n&lt;/dependency&gt;  \n</code></pre>\n\n<p>Then the following is added to our Java MVC configuration file:</p>\n\n<pre><code>@Configuration\n@EnableWebMvc \npublic class MvcConfig extends WebMvcConfigurerAdapter {\n\n@Override\npublic void extendMessageConverters(List&lt;HttpMessageConverter&lt;?&gt;&gt; converters) {\n\n    Hibernate5Module h5module = new Hibernate5Module();\n    h5module.disable(Hibernate5Module.Feature.USE_TRANSIENT_ANNOTATION);\n    h5module.enable(Hibernate5Module.Feature.FORCE_LAZY_LOADING);\n\n    for (HttpMessageConverter&lt;?&gt; mc : converters){\n        if (mc instanceof MappingJackson2HttpMessageConverter || mc instanceof MappingJackson2XmlHttpMessageConverter) {\n            ((AbstractJackson2HttpMessageConverter) mc).getObjectMapper().registerModule(h5module);\n        }\n    }\n    return;\n}\n</code></pre>\n\n<p>Notes:</p>\n\n<ul>\n<li><p>You need to create and configure the Hibernate5Module to get behavior similar to Jackson without this module. The default makes incompatible assumptions.</p></li>\n<li><p>Our <code>WebMvcConfigurerAdapter</code> has a lot of other configuration in it and we wanted to avoid another configuration class, which is why we didn't use the <code>WebMvcConfigurationSupport#addDefaultHttpMessageConverters</code> function that has been referred to on other posts.</p></li>\n<li><p><code>WebMvcConfigurerAdapter#configureMessageConverters</code> disables all of Spring's internal configuration of message converters. We preferred to avoid the potential issues around this.  </p></li>\n<li><p>Using <code>extendMessageConverters</code> enabled access to all the automatically-configured Jackson classes without losing the configuration of all other message converters.</p></li>\n<li><p>Using <code>getObjectMapper#registerModule</code> we were able to add the <code>Hibernate5Module</code> to the existing converters.  </p></li>\n<li>The module was added to both the JSON and XML processors</li>\n</ul>\n\n<p>This addition solved the issue with Hibernate and lazy loading but caused a <strong>residual issue with the generated JSON format</strong>.  As reported in <a href=\"https://github.com/FasterXML/jackson-datatype-hibernate/issues/97\" rel=\"noreferrer\">this github issue</a>, the hibernate-jackson lazy load module currently ignores the @JsonUnwrapped annotation, leading to potential data errors. This happens regardless of the force-loading feature setting.  The problem has been there since 2016.  </p>\n\n<hr>\n\n<p><strong>Note</strong></p>\n\n<p>It appears that by adding the following to classes that are lazy-loaded, the built-in ObjectMapper works without adding the hibernate5 module:</p>\n\n<pre><code>@JsonIgnoreProperties(  {\"handler\",\"hibernateLazyInitializer\"} )\npublic class Anyclass {\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2302601,"reputation":896,"user_id":2022579,"display_name":"Pedro Bacchini"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1567080289,"creation_date":1567080289,"answer_id":57709849,"question_id":21708339,"body_markdown":"I made a very simple solution to this problem.\r\n\r\n    @JsonInclude(JsonInclude.Include.NON_EMPTY)\r\n    public Set&lt;Pendency&gt; getPendencies() {\r\n        return Hibernate.isInitialized(this.pendencies) ? Collections.unmodifiableSet(this.pendencies) : new HashSet&lt;&gt;();\r\n    }\r\n\r\nIn my case I was giving the error because whenever I was returning a pendencies, as a good practice I converted it to a list that cannot be modified, but how it could or might not be in lazy depending on the method I used to get instance (with or without fetch), I do a test before it was initialized by Hibernate and add the annotation that prevents serializing an empty property and that solved my problem.","title":"Avoid Jackson serialization on non fetched lazy objects","body":"<p>I made a very simple solution to this problem.</p>\n\n<pre><code>@JsonInclude(JsonInclude.Include.NON_EMPTY)\npublic Set&lt;Pendency&gt; getPendencies() {\n    return Hibernate.isInitialized(this.pendencies) ? Collections.unmodifiableSet(this.pendencies) : new HashSet&lt;&gt;();\n}\n</code></pre>\n\n<p>In my case I was giving the error because whenever I was returning a pendencies, as a good practice I converted it to a list that cannot be modified, but how it could or might not be in lazy depending on the method I used to get instance (with or without fetch), I do a test before it was initialized by Hibernate and add the annotation that prevents serializing an empty property and that solved my problem.</p>\n"},{"tags":[],"owner":{"account_id":10816575,"reputation":548,"user_id":7955307,"display_name":"bianbian"},"down_vote_count":4,"up_vote_count":0,"is_accepted":false,"score":-4,"last_activity_date":1583602864,"creation_date":1583602864,"answer_id":60580456,"question_id":21708339,"body_markdown":"Another solution for spring boot:\r\nconfiguration:\r\n`spring.jpa.open-in-view=true`","title":"Avoid Jackson serialization on non fetched lazy objects","body":"<p>Another solution for spring boot:\nconfiguration:\n<code>spring.jpa.open-in-view=true</code></p>\n"},{"tags":[],"owner":{"account_id":13632899,"reputation":2116,"user_id":9834603,"display_name":"Dmitry Kaltovich"},"down_vote_count":0,"up_vote_count":7,"is_accepted":false,"score":7,"last_activity_date":1587807276,"creation_date":1587806672,"answer_id":61423496,"question_id":21708339,"body_markdown":"I&#39;ve spent whole day trying to solve the same problem. You can do it without changing existing message converters configuration.\r\n\r\nIn my opinion the easiest way to solve this problem only with 2 steps with help of [jackson-datatype-hibernate](https://github.com/FasterXML/jackson-datatype-hibernate):\r\n\r\n&gt; kotlin example (same as java):\r\n\r\n1. Add In `build.gradle.kts`:\r\n\r\n```kotlin                \r\nimplementation(&quot;com.fasterxml.jackson.datatype:jackson-datatype-hibernate5:$jacksonHibernate&quot;)\r\n```\r\n\r\n\r\n2. Create `@Bean`\r\n```kotlin                    \r\n   @Bean\r\n   fun hibernate5Module(): Module = Hibernate5Module()\r\n```\r\n\r\n___\r\n* Notice that `Module` is `com.fasterxml.jackson.databind.Module`, not `java.util.Module`\r\n\r\n* Also good practice is to add [`@JsonBackReference`](https://www.baeldung.com/jackson-bidirectional-relationships-and-infinite-recursion) &amp; `@JsonManagedReference` to `@OneToMany` &amp; `@ManyToOne` relationships. `@JsonBackReference` could be only 1 in class. ","title":"Avoid Jackson serialization on non fetched lazy objects","body":"<p>I've spent whole day trying to solve the same problem. You can do it without changing existing message converters configuration.</p>\n\n<p>In my opinion the easiest way to solve this problem only with 2 steps with help of <a href=\"https://github.com/FasterXML/jackson-datatype-hibernate\" rel=\"noreferrer\">jackson-datatype-hibernate</a>:</p>\n\n<blockquote>\n  <p>kotlin example (same as java):</p>\n</blockquote>\n\n<ol>\n<li>Add In <code>build.gradle.kts</code>:</li>\n</ol>\n\n<pre class=\"lang-kotlin prettyprint-override\"><code>implementation(\"com.fasterxml.jackson.datatype:jackson-datatype-hibernate5:$jacksonHibernate\")\n</code></pre>\n\n<ol start=\"2\">\n<li>Create <code>@Bean</code></li>\n</ol>\n\n<pre class=\"lang-kotlin prettyprint-override\"><code>   @Bean\n   fun hibernate5Module(): Module = Hibernate5Module()\n</code></pre>\n\n<hr>\n\n<ul>\n<li><p>Notice that <code>Module</code> is <code>com.fasterxml.jackson.databind.Module</code>, not <code>java.util.Module</code></p></li>\n<li><p>Also good practice is to add <a href=\"https://www.baeldung.com/jackson-bidirectional-relationships-and-infinite-recursion\" rel=\"noreferrer\"><code>@JsonBackReference</code></a> &amp; <code>@JsonManagedReference</code> to <code>@OneToMany</code> &amp; <code>@ManyToOne</code> relationships. <code>@JsonBackReference</code> could be only 1 in class. </p></li>\n</ul>\n"},{"tags":[],"owner":{"account_id":5705055,"reputation":1872,"user_id":4508899,"accept_rate":75,"display_name":"Jonas_Hess"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1622134137,"creation_date":1622134137,"answer_id":67726588,"question_id":21708339,"body_markdown":"We couldn’t work around the problem that we had to call `Hibernate.initialize(objX.getAttributeY())` for all Attributes.  So here we wrote a utils class to call the initialize methods on all attributes that have the Entity annotation.\r\nCollections still must be handled separately.\r\n\r\n\r\n\r\n    import org.hibernate.Hibernate;\r\n    \r\n    import javax.persistence.Entity;\r\n    import java.beans.IntrospectionException;\r\n    import java.beans.PropertyDescriptor;\r\n    import java.lang.reflect.Field;\r\n    import java.lang.reflect.InvocationTargetException;\r\n    import java.lang.reflect.Method;\r\n    import java.util.ArrayList;\r\n    import java.util.Collections;\r\n    import java.util.List;\r\n    \r\n    public class HibernateInitialiseUtil&lt;T&gt; {\r\n    \r\n        private final List&lt;Method&gt; entityGetterMethods;\r\n    \r\n        public HibernateInitialiseUtil(Class&lt;T&gt; clazz) {\r\n            this.entityGetterMethods = this.getGettersMethodsOfEntityAttributes(clazz);\r\n        }\r\n    \r\n        public void initializeAllEntityAttributes(T obj) throws InvocationTargetException, IllegalAccessException {\r\n            for (Method getter : this.entityGetterMethods) {\r\n                Hibernate.initialize(getter.invoke(obj));\r\n            }\r\n        }\r\n    \r\n        private List&lt;String&gt; getNameOfEntityAttributes(final Class&lt;T&gt; targetClass) {\r\n            Field[] attributes =  targetClass.getDeclaredFields();\r\n            List&lt;String&gt; fields = new ArrayList&lt;&gt;();\r\n            for (Field attribute : attributes) {\r\n                if (attribute.getType().isAnnotationPresent(Entity.class)) {\r\n                    fields.add(attribute.getName());\r\n                }\r\n            }\r\n            return fields;\r\n        }\r\n    \r\n        private List&lt;Method&gt; getGettersMethodsOfEntityAttributes(final Class&lt;T&gt; targetClass) {\r\n            List&lt;Method&gt; resultList = new ArrayList&lt;&gt;();\r\n            for (String attributeName : getNameOfEntityAttributes(targetClass)) {\r\n                try {\r\n                    PropertyDescriptor pd = new PropertyDescriptor(attributeName, targetClass);\r\n                    Method getter = pd.getReadMethod();\r\n                    resultList.add(getter);\r\n                } catch (IllegalArgumentException | IntrospectionException e) {\r\n                    e.printStackTrace();\r\n                }\r\n            }\r\n            return Collections.unmodifiableList(resultList);\r\n        }\r\n    }","title":"Avoid Jackson serialization on non fetched lazy objects","body":"<p>We couldn’t work around the problem that we had to call <code>Hibernate.initialize(objX.getAttributeY())</code> for all Attributes.  So here we wrote a utils class to call the initialize methods on all attributes that have the Entity annotation.\nCollections still must be handled separately.</p>\n<pre><code>import org.hibernate.Hibernate;\n\nimport javax.persistence.Entity;\nimport java.beans.IntrospectionException;\nimport java.beans.PropertyDescriptor;\nimport java.lang.reflect.Field;\nimport java.lang.reflect.InvocationTargetException;\nimport java.lang.reflect.Method;\nimport java.util.ArrayList;\nimport java.util.Collections;\nimport java.util.List;\n\npublic class HibernateInitialiseUtil&lt;T&gt; {\n\n    private final List&lt;Method&gt; entityGetterMethods;\n\n    public HibernateInitialiseUtil(Class&lt;T&gt; clazz) {\n        this.entityGetterMethods = this.getGettersMethodsOfEntityAttributes(clazz);\n    }\n\n    public void initializeAllEntityAttributes(T obj) throws InvocationTargetException, IllegalAccessException {\n        for (Method getter : this.entityGetterMethods) {\n            Hibernate.initialize(getter.invoke(obj));\n        }\n    }\n\n    private List&lt;String&gt; getNameOfEntityAttributes(final Class&lt;T&gt; targetClass) {\n        Field[] attributes =  targetClass.getDeclaredFields();\n        List&lt;String&gt; fields = new ArrayList&lt;&gt;();\n        for (Field attribute : attributes) {\n            if (attribute.getType().isAnnotationPresent(Entity.class)) {\n                fields.add(attribute.getName());\n            }\n        }\n        return fields;\n    }\n\n    private List&lt;Method&gt; getGettersMethodsOfEntityAttributes(final Class&lt;T&gt; targetClass) {\n        List&lt;Method&gt; resultList = new ArrayList&lt;&gt;();\n        for (String attributeName : getNameOfEntityAttributes(targetClass)) {\n            try {\n                PropertyDescriptor pd = new PropertyDescriptor(attributeName, targetClass);\n                Method getter = pd.getReadMethod();\n                resultList.add(getter);\n            } catch (IllegalArgumentException | IntrospectionException e) {\n                e.printStackTrace();\n            }\n        }\n        return Collections.unmodifiableList(resultList);\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1824191,"reputation":5574,"user_id":1657465,"display_name":"luiscla27"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1697816270,"creation_date":1697740143,"answer_id":77326268,"question_id":21708339,"body_markdown":"##### TLDR: Always serialize [DTO&#39;s][1], avoid returning entities. Explicitly for OP question, answer is `@JsonIgnore`\r\n\r\n---\r\nThe reason for the issue is that when retrieving lazily-loaded data, first step is populate the main object, and second to retrieve the data within its proxies. For this, an open Session in Hibernate is needed.\r\n \r\nThe problem arises when the second step happens after the transaction has closed, which leads to a `LazyInitializationException`.\r\n\r\nI&#39;m going to summarize some solutions here while adding mine:\r\n```\r\n1. Avoid entity serialization, **instead serialize a dto**\r\n2. Add `@JsonIgnore` to your `LAZY` attributes\r\n3. Change `FetchType` to `EAGER`\r\n4. Set `hibernate.enable_lazy_load_no_trans=true` \r\n```\r\n\r\nOnly points 1 and 2 are recommended, the other 2 aren&#39;t meant to be used at serialization phase. As they have a HUGE performance cost there, they both make a hit to the database to retrieve extra data. **Option 4, actually creates a new transaction for every lazy object so please [AVOID!][2]**.\r\n\r\n\r\n\r\nMy grain of sand in this question is to highly recommend to explicitly use ONLY options 1 and 2, and also `FetchType.EAGER` only for business logic, not as a solution for this issue.\r\n\r\n\r\n  [1]: https://medium.com/javarevisited/not-so-obvious-tips-to-write-better-dtos-in-java-c6116895b180\r\n  [2]: https://www.baeldung.com/hibernate-lazy-loading-workaround#4-lazy-loading-with-automatic-transaction","title":"Avoid Jackson serialization on non fetched lazy objects","body":"<h5>TLDR: Always serialize <a href=\"https://medium.com/javarevisited/not-so-obvious-tips-to-write-better-dtos-in-java-c6116895b180\" rel=\"nofollow noreferrer\">DTO's</a>, avoid returning entities. Explicitly for OP question, answer is <code>@JsonIgnore</code></h5>\n<hr />\n<p>The reason for the issue is that when retrieving lazily-loaded data, first step is populate the main object, and second to retrieve the data within its proxies. For this, an open Session in Hibernate is needed.</p>\n<p>The problem arises when the second step happens after the transaction has closed, which leads to a <code>LazyInitializationException</code>.</p>\n<p>I'm going to summarize some solutions here while adding mine:</p>\n<pre><code>1. Avoid entity serialization, **instead serialize a dto**\n2. Add `@JsonIgnore` to your `LAZY` attributes\n3. Change `FetchType` to `EAGER`\n4. Set `hibernate.enable_lazy_load_no_trans=true` \n</code></pre>\n<p>Only points 1 and 2 are recommended, the other 2 aren't meant to be used at serialization phase. As they have a HUGE performance cost there, they both make a hit to the database to retrieve extra data. <strong>Option 4, actually creates a new transaction for every lazy object so please <a href=\"https://www.baeldung.com/hibernate-lazy-loading-workaround#4-lazy-loading-with-automatic-transaction\" rel=\"nofollow noreferrer\">AVOID!</a></strong>.</p>\n<p>My grain of sand in this question is to highly recommend to explicitly use ONLY options 1 and 2, and also <code>FetchType.EAGER</code> only for business logic, not as a solution for this issue.</p>\n"}],"owner":{"account_id":1514753,"reputation":5733,"user_id":1416034,"display_name":"r1ckr"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":95930,"favorite_count":0,"down_vote_count":0,"up_vote_count":98,"accepted_answer_id":21760361,"answer_count":16,"score":98,"last_activity_date":1697816270,"creation_date":1392138434,"question_id":21708339,"body_markdown":"I have a simple controller that return a User object, this user have a attribute coordinates that have the hibernate property FetchType.LAZY.\r\n\r\nWhen I try to get this user, I always have to load all the coordinates to get the user object, otherwise when Jackson try to serialize the User throws the exception:\r\n&gt;com.fasterxml.jackson.databind.JsonMappingException: could not initialize proxy - no Session\r\n\r\nThis is due to Jackson is trying to fetch this unfetched object. Here are the objects:\r\n\r\n\r\n    public class User{\r\n    \r\n    \t@OneToMany(fetch = FetchType.LAZY, mappedBy = &quot;user&quot;)\r\n    \t@JsonManagedReference(&quot;user-coordinate&quot;)\r\n    \tprivate List&lt;Coordinate&gt; coordinates;\r\n    }\r\n\r\n    public class Coordinate {\r\n    \r\n    \t@ManyToOne\r\n    \t@JoinColumn(name = &quot;user_id&quot;, nullable = false)\r\n    \t@JsonBackReference(&quot;user-coordinate&quot;)\r\n    \tprivate User user;\r\n    }\r\n\r\nAnd the controller:\r\n\r\n\r\n\r\n    @RequestMapping(value = &quot;/user/{username}&quot;, method=RequestMethod.GET)\r\n    public @ResponseBody User getUser(@PathVariable String username) {\r\n    \t\t\r\n    \tUser user = userService.getUser(username);\r\n    \t\t\r\n    \treturn user;\r\n    \t\t\r\n    }\r\n\r\nThere is a way to tell Jackson to not serialize the unfetched objects? I&#39;ve been looking other answers posted 3 years ago implementing jackson-hibernate-module. But probably it could be achieved with a new jackson feature.\r\n\r\nMy versions are:\r\n\r\n - Spring 3.2.5 \r\n - Hibernate 4.1.7 \r\n - Jackson 2.2","title":"Avoid Jackson serialization on non fetched lazy objects","body":"<p>I have a simple controller that return a User object, this user have a attribute coordinates that have the hibernate property FetchType.LAZY.</p>\n<p>When I try to get this user, I always have to load all the coordinates to get the user object, otherwise when Jackson try to serialize the User throws the exception:</p>\n<blockquote>\n<p>com.fasterxml.jackson.databind.JsonMappingException: could not initialize proxy - no Session</p>\n</blockquote>\n<p>This is due to Jackson is trying to fetch this unfetched object. Here are the objects:</p>\n<pre><code>public class User{\n\n    @OneToMany(fetch = FetchType.LAZY, mappedBy = &quot;user&quot;)\n    @JsonManagedReference(&quot;user-coordinate&quot;)\n    private List&lt;Coordinate&gt; coordinates;\n}\n\npublic class Coordinate {\n\n    @ManyToOne\n    @JoinColumn(name = &quot;user_id&quot;, nullable = false)\n    @JsonBackReference(&quot;user-coordinate&quot;)\n    private User user;\n}\n</code></pre>\n<p>And the controller:</p>\n<pre><code>@RequestMapping(value = &quot;/user/{username}&quot;, method=RequestMethod.GET)\npublic @ResponseBody User getUser(@PathVariable String username) {\n        \n    User user = userService.getUser(username);\n        \n    return user;\n        \n}\n</code></pre>\n<p>There is a way to tell Jackson to not serialize the unfetched objects? I've been looking other answers posted 3 years ago implementing jackson-hibernate-module. But probably it could be achieved with a new jackson feature.</p>\n<p>My versions are:</p>\n<ul>\n<li>Spring 3.2.5</li>\n<li>Hibernate 4.1.7</li>\n<li>Jackson 2.2</li>\n</ul>\n"},{"tags":["java","hibernate","session","orm","lazy-loading"],"answers":[{"tags":[],"owner":{"account_id":105356,"reputation":2071,"user_id":281191,"accept_rate":0,"display_name":"goroncy"},"down_vote_count":0,"up_vote_count":108,"is_accepted":true,"score":108,"last_activity_date":1674029973,"creation_date":1391598105,"answer_id":21575368,"question_id":21574236,"body_markdown":"What is wrong here is that your session management configuration is set to close session when you commit transaction. Check if you have something like:\r\n\r\n```xml\r\n&lt;property name=&quot;current_session_context_class&quot;&gt;thread&lt;/property&gt;\r\n```\r\n\r\nin your configuration.\r\n\r\nIn order to overcome this problem you could change the configuration of session factory or open another session and only then ask for those lazy loaded objects. But what I would suggest here is to initialize this lazy collection in `getModelByModelGroup` itself and call:\r\n\r\n```java\r\nHibernate.initialize(subProcessModel.getElement());\r\n```\r\n\r\nwhen you are still in active session.\r\n\r\nAnd one last thing. A friendly advice. You have something like this in your method:\r\n\r\n```java\r\nfor (Model m : modelList) {\r\n    if (m.getModelType().getId() == 3) {\r\n        model = m;\r\n        break;\r\n    }\r\n}\r\n```\r\n\r\nPlease insted of this code just filter those models with type id equal to 3 in the query statement just couple of lines above. \r\n\r\nSome more reading:\r\n\r\n[session factory configuration][1]\r\n\r\n[problem with closed session][2]\r\n\r\n\r\n  [1]: http://www.coderanch.com/t/428509/ORM/databases/committing-transaction-closes-session\r\n  [2]: http://forum.zkoss.org/question/45772/hibernate-problem-session-is-closed/","title":"How to fix org.hibernate.LazyInitializationException - could not initialize proxy - no Session","body":"<p>What is wrong here is that your session management configuration is set to close session when you commit transaction. Check if you have something like:</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;property name=&quot;current_session_context_class&quot;&gt;thread&lt;/property&gt;\n</code></pre>\n<p>in your configuration.</p>\n<p>In order to overcome this problem you could change the configuration of session factory or open another session and only then ask for those lazy loaded objects. But what I would suggest here is to initialize this lazy collection in <code>getModelByModelGroup</code> itself and call:</p>\n<pre class=\"lang-java prettyprint-override\"><code>Hibernate.initialize(subProcessModel.getElement());\n</code></pre>\n<p>when you are still in active session.</p>\n<p>And one last thing. A friendly advice. You have something like this in your method:</p>\n<pre class=\"lang-java prettyprint-override\"><code>for (Model m : modelList) {\n    if (m.getModelType().getId() == 3) {\n        model = m;\n        break;\n    }\n}\n</code></pre>\n<p>Please insted of this code just filter those models with type id equal to 3 in the query statement just couple of lines above.</p>\n<p>Some more reading:</p>\n<p><a href=\"http://www.coderanch.com/t/428509/ORM/databases/committing-transaction-closes-session\" rel=\"nofollow noreferrer\">session factory configuration</a></p>\n<p><a href=\"http://forum.zkoss.org/question/45772/hibernate-problem-session-is-closed/\" rel=\"nofollow noreferrer\">problem with closed session</a></p>\n"},{"tags":[],"owner":{"account_id":2084440,"reputation":204,"user_id":1855717,"accept_rate":60,"display_name":"Sandeep Roniyaar"},"down_vote_count":5,"up_vote_count":2,"is_accepted":false,"score":-3,"last_activity_date":1406801527,"creation_date":1406801527,"answer_id":25056258,"question_id":21574236,"body_markdown":"you could also solved it by adding lazy=false into &lt;class name=&quot;com.employees.model.Employee&quot; table=&quot;employees&quot;&gt;  into your *.hbm.xml file or you can init your object in Hibernate.init(Object) when you get object from db","title":"How to fix org.hibernate.LazyInitializationException - could not initialize proxy - no Session","body":"<p>you could also solved it by adding lazy=false into   into your *.hbm.xml file or you can init your object in Hibernate.init(Object) when you get object from db</p>\n"},{"tags":[],"owner":{"account_id":1344992,"reputation":2404,"user_id":1285923,"accept_rate":43,"display_name":"Wilianto Indrawan"},"down_vote_count":18,"up_vote_count":129,"is_accepted":false,"score":111,"last_activity_date":1697738178,"creation_date":1417725223,"answer_id":27303504,"question_id":21574236,"body_markdown":"##### WARNING: This solution creates a NEW TRANSACTION for every LAZY object that is fetched outside a transaction. Use at your own risk.\r\n---\r\n\r\nYou can try to set the following in `hibernate.cfg.xml` or `persistence.xml`\r\n\r\n    &lt;property name=&quot;hibernate.enable_lazy_load_no_trans&quot;&gt;true&lt;/property&gt;\r\n\r\n\r\nThe problem to keep in mind with this property are well explained [here][1]\r\n\r\n\r\n  [1]: https://stackoverflow.com/a/25367976/1657465","title":"How to fix org.hibernate.LazyInitializationException - could not initialize proxy - no Session","body":"<h5>WARNING: This solution creates a NEW TRANSACTION for every LAZY object that is fetched outside a transaction. Use at your own risk.</h5>\n<hr />\n<p>You can try to set the following in <code>hibernate.cfg.xml</code> or <code>persistence.xml</code></p>\n<pre><code>&lt;property name=&quot;hibernate.enable_lazy_load_no_trans&quot;&gt;true&lt;/property&gt;\n</code></pre>\n<p>The problem to keep in mind with this property are well explained <a href=\"https://stackoverflow.com/a/25367976/1657465\">here</a></p>\n"},{"tags":[],"owner":{"account_id":4996035,"reputation":4281,"user_id":4098074,"accept_rate":19,"display_name":"Tony Vu"},"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1428914681,"creation_date":1428914681,"answer_id":29601232,"question_id":21574236,"body_markdown":"I encountered the same issue. I think another way to fix this is that you can change the query to join fetch your Element from Model as follows:\r\n\r\n    Query query = session.createQuery(&quot;from Model m join fetch m.element where modelGroup.id = :modelGroupId&quot;)\r\n\r\n ","title":"How to fix org.hibernate.LazyInitializationException - could not initialize proxy - no Session","body":"<p>I encountered the same issue. I think another way to fix this is that you can change the query to join fetch your Element from Model as follows:</p>\n\n<pre><code>Query query = session.createQuery(\"from Model m join fetch m.element where modelGroup.id = :modelGroupId\")\n</code></pre>\n"},{"tags":[],"owner":{"account_id":5907936,"reputation":77,"user_id":4863488,"display_name":"Artavazd Manukyan"},"down_vote_count":5,"up_vote_count":2,"is_accepted":false,"score":-3,"last_activity_date":1440537681,"creation_date":1440537681,"answer_id":32214318,"question_id":21574236,"body_markdown":"uses session.get(*.class, id); but do not load function\r\n","title":"How to fix org.hibernate.LazyInitializationException - could not initialize proxy - no Session","body":"<p>uses session.get(*.class, id); but do not load function</p>\n"},{"tags":[],"owner":{"account_id":3071426,"reputation":6563,"user_id":2601995,"accept_rate":100,"display_name":"user2601995"},"down_vote_count":2,"up_vote_count":292,"is_accepted":false,"score":290,"last_activity_date":1584579899,"creation_date":1440783937,"answer_id":32276916,"question_id":21574236,"body_markdown":"If you using Spring mark the class as [@Transactional][1], then Spring will handle session management.\r\n\r\n    @Transactional\r\n    public class MyClass {\r\n        ...\r\n    }\r\n\r\nBy using `@Transactional`, many important aspects such as transaction propagation are handled automatically. In this case if another transactional method is called the method will have the option of joining the ongoing transaction avoiding the &quot;no session&quot; exception.\r\n\r\n**WARNING** If you do use `@Transactional`, please be aware of the resulting behavior. See [this article][2] for common pitfalls. For example, updates to entities are persisted *even if* you don&#39;t explicitly call `save`\r\n\r\n\r\n  [1]: http://docs.spring.io/spring/docs/current/javadoc-api/org/springframework/transaction/annotation/Transactional.html\r\n  [2]: https://codete.com/blog/5-common-spring-transactional-pitfalls/","title":"How to fix org.hibernate.LazyInitializationException - could not initialize proxy - no Session","body":"<p>If you using Spring mark the class as <a href=\"http://docs.spring.io/spring/docs/current/javadoc-api/org/springframework/transaction/annotation/Transactional.html\" rel=\"noreferrer\">@Transactional</a>, then Spring will handle session management.</p>\n\n<pre><code>@Transactional\npublic class MyClass {\n    ...\n}\n</code></pre>\n\n<p>By using <code>@Transactional</code>, many important aspects such as transaction propagation are handled automatically. In this case if another transactional method is called the method will have the option of joining the ongoing transaction avoiding the \"no session\" exception.</p>\n\n<p><strong>WARNING</strong> If you do use <code>@Transactional</code>, please be aware of the resulting behavior. See <a href=\"https://codete.com/blog/5-common-spring-transactional-pitfalls/\" rel=\"noreferrer\">this article</a> for common pitfalls. For example, updates to entities are persisted <em>even if</em> you don't explicitly call <code>save</code></p>\n"},{"tags":[],"owner":{"account_id":305493,"reputation":4238,"user_id":615686,"display_name":"Night Owl"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1458006936,"creation_date":1458006936,"answer_id":36001361,"question_id":21574236,"body_markdown":"There are several good answers here that handle this error in a broad scope. I ran into a specific situation with Spring Security which had a quick, although probably not optimal, fix.\r\n\r\nDuring user authorization (immediately after logging in and passing authentication) I was testing a user entity for a specific authority in a custom class that extends SimpleUrlAuthenticationSuccessHandler.\r\n\r\nMy user entity implements UserDetails and has a Set of lazy loaded Roles which threw the &quot;org.hibernate.LazyInitializationException - could not initialize proxy - no Session&quot; exception. Changing that Set from &quot;fetch=FetchType.LAZY&quot; to &quot;fetch=FetchType.EAGER&quot; fixed this for me.","title":"How to fix org.hibernate.LazyInitializationException - could not initialize proxy - no Session","body":"<p>There are several good answers here that handle this error in a broad scope. I ran into a specific situation with Spring Security which had a quick, although probably not optimal, fix.</p>\n\n<p>During user authorization (immediately after logging in and passing authentication) I was testing a user entity for a specific authority in a custom class that extends SimpleUrlAuthenticationSuccessHandler.</p>\n\n<p>My user entity implements UserDetails and has a Set of lazy loaded Roles which threw the \"org.hibernate.LazyInitializationException - could not initialize proxy - no Session\" exception. Changing that Set from \"fetch=FetchType.LAZY\" to \"fetch=FetchType.EAGER\" fixed this for me.</p>\n"},{"tags":[],"owner":{"account_id":1636378,"reputation":3853,"user_id":1509738,"accept_rate":75,"display_name":"ArunDhwaj IIITH"},"down_vote_count":4,"up_vote_count":1,"is_accepted":false,"score":-3,"last_activity_date":1460161798,"creation_date":1460161798,"answer_id":36511384,"question_id":21574236,"body_markdown":"Do the following changes in **servlet-context.xml**\r\n\r\n        &lt;beans:property name=&quot;hibernateProperties&quot;&gt;\r\n            &lt;beans:props&gt;\r\n               \r\n                &lt;beans:prop key=&quot;hibernate.enable_lazy_load_no_trans&quot;&gt;true&lt;/beans:prop&gt;\r\n                \r\n            &lt;/beans:props&gt;\r\n        &lt;/beans:property&gt;","title":"How to fix org.hibernate.LazyInitializationException - could not initialize proxy - no Session","body":"<p>Do the following changes in <strong>servlet-context.xml</strong></p>\n\n<pre><code>    &lt;beans:property name=\"hibernateProperties\"&gt;\n        &lt;beans:props&gt;\n\n            &lt;beans:prop key=\"hibernate.enable_lazy_load_no_trans\"&gt;true&lt;/beans:prop&gt;\n\n        &lt;/beans:props&gt;\n    &lt;/beans:property&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":9053796,"reputation":500,"user_id":6742855,"display_name":"R Pidugu"},"down_vote_count":1,"up_vote_count":12,"is_accepted":false,"score":11,"last_activity_date":1473259037,"creation_date":1473257844,"answer_id":39372379,"question_id":21574236,"body_markdown":"This exception because of when you call `session.getEntityById()`, the session will be closed. So you need to re-attach the entity to the session. Or Easy solution is just configure `default-lazy=&quot;false&quot;`  to your `entity.hbm.xml` or if you are using annotations just add `@Proxy(lazy=false)` to your entity class.","title":"How to fix org.hibernate.LazyInitializationException - could not initialize proxy - no Session","body":"<p>This exception because of when you call <code>session.getEntityById()</code>, the session will be closed. So you need to re-attach the entity to the session. Or Easy solution is just configure <code>default-lazy=\"false\"</code>  to your <code>entity.hbm.xml</code> or if you are using annotations just add <code>@Proxy(lazy=false)</code> to your entity class.</p>\n"},{"tags":[],"owner":{"account_id":1012936,"reputation":145168,"user_id":1025118,"accept_rate":100,"display_name":"Vlad Mihalcea"},"down_vote_count":0,"up_vote_count":98,"is_accepted":false,"score":98,"last_activity_date":1610140044,"creation_date":1473754237,"answer_id":39465150,"question_id":21574236,"body_markdown":"The best way to handle the `LazyInitializationException` is to use the `JOIN FETCH` directive:\r\n\r\n    Query query = session.createQuery(&quot;&quot;&quot;\r\n        select m\r\n        from Model m\r\n        join fetch m.modelType\r\n        where modelGroup.id = :modelGroupId\r\n        &quot;&quot;&quot;\r\n    );\r\n\r\nAnyway, DO NOT use the following Anti-Patterns as suggested by some of the answers:\r\n\r\n- [Open Session in View](https://stackoverflow.com/a/37526397/1025118)\r\n- [`hibernate.enable_lazy_load_no_trans`](https://stackoverflow.com/a/39723223/1025118)\r\n\r\nSometimes, a DTO projection is a better choice than fetching entities, and this way, you won&#39;t get any `LazyInitializationException`.\r\n","title":"How to fix org.hibernate.LazyInitializationException - could not initialize proxy - no Session","body":"<p>The best way to handle the <code>LazyInitializationException</code> is to use the <code>JOIN FETCH</code> directive:</p>\n<pre><code>Query query = session.createQuery(&quot;&quot;&quot;\n    select m\n    from Model m\n    join fetch m.modelType\n    where modelGroup.id = :modelGroupId\n    &quot;&quot;&quot;\n);\n</code></pre>\n<p>Anyway, DO NOT use the following Anti-Patterns as suggested by some of the answers:</p>\n<ul>\n<li><a href=\"https://stackoverflow.com/a/37526397/1025118\">Open Session in View</a></li>\n<li><a href=\"https://stackoverflow.com/a/39723223/1025118\"><code>hibernate.enable_lazy_load_no_trans</code></a></li>\n</ul>\n<p>Sometimes, a DTO projection is a better choice than fetching entities, and this way, you won't get any <code>LazyInitializationException</code>.</p>\n"},{"tags":[],"owner":{"account_id":3598530,"reputation":2727,"user_id":3002465,"accept_rate":75,"display_name":"Zeb"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1477571884,"creation_date":1477571884,"answer_id":40284778,"question_id":21574236,"body_markdown":"If you are using `Grail&#39;s` Framework, it&#39;s simple to resolve *lazy initialization exception* by using `Lazy` keyword on specific field in Domain Class.\r\n\r\nFor-example: \r\n\r\n    class Book {\r\n        static belongsTo = [author: Author]\r\n        static mapping = {\r\n            author lazy: false\r\n        }\r\n    }\r\n\r\nFind further information [here][1]\r\n\r\n\r\n  [1]: http://docs.grails.org/3.1.1/ref/Database%20Mapping/lazy.html","title":"How to fix org.hibernate.LazyInitializationException - could not initialize proxy - no Session","body":"<p>If you are using <code>Grail's</code> Framework, it's simple to resolve <em>lazy initialization exception</em> by using <code>Lazy</code> keyword on specific field in Domain Class.</p>\n\n<p>For-example: </p>\n\n<pre><code>class Book {\n    static belongsTo = [author: Author]\n    static mapping = {\n        author lazy: false\n    }\n}\n</code></pre>\n\n<p>Find further information <a href=\"http://docs.grails.org/3.1.1/ref/Database%20Mapping/lazy.html\" rel=\"nofollow\">here</a></p>\n"},{"tags":[],"owner":{"account_id":1635591,"reputation":123,"user_id":1509191,"display_name":"xihui"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1490306105,"creation_date":1490306105,"answer_id":42987719,"question_id":21574236,"body_markdown":"If you are using JPQL, use JOIN FETCH is the easiest way:\r\nhttp://www.objectdb.com/java/jpa/query/jpql/from#LEFT_OUTER_INNER_JOIN_FETCH_","title":"How to fix org.hibernate.LazyInitializationException - could not initialize proxy - no Session","body":"<p>If you are using JPQL, use JOIN FETCH is the easiest way:\n<a href=\"http://www.objectdb.com/java/jpa/query/jpql/from#LEFT_OUTER_INNER_JOIN_FETCH_\" rel=\"nofollow noreferrer\">http://www.objectdb.com/java/jpa/query/jpql/from#LEFT_OUTER_INNER_JOIN_FETCH_</a></p>\n"},{"tags":[],"owner":{"account_id":186658,"reputation":789,"user_id":3572263,"accept_rate":80,"display_name":"Smruti R Tripathy"},"down_vote_count":8,"up_vote_count":34,"is_accepted":false,"score":26,"last_activity_date":1512065882,"creation_date":1505902894,"answer_id":46319489,"question_id":21574236,"body_markdown":"I was getting the same error for a one to many relationships for below annotation. \r\n\r\n    @OneToMany(mappedBy=&quot;department&quot;, cascade = CascadeType.ALL)\r\n\r\nChanged as below after adding fetch=FetchType.EAGER, it worked for me.\r\n\r\n    @OneToMany(mappedBy=&quot;department&quot;, cascade = CascadeType.ALL, fetch=FetchType.EAGER)","title":"How to fix org.hibernate.LazyInitializationException - could not initialize proxy - no Session","body":"<p>I was getting the same error for a one to many relationships for below annotation. </p>\n\n<pre><code>@OneToMany(mappedBy=\"department\", cascade = CascadeType.ALL)\n</code></pre>\n\n<p>Changed as below after adding fetch=FetchType.EAGER, it worked for me.</p>\n\n<pre><code>@OneToMany(mappedBy=\"department\", cascade = CascadeType.ALL, fetch=FetchType.EAGER)\n</code></pre>\n"},{"tags":[],"owner":{"account_id":6329781,"reputation":1049,"user_id":4915001,"display_name":"rex roy"},"down_vote_count":0,"up_vote_count":7,"is_accepted":false,"score":7,"last_activity_date":1524483371,"creation_date":1524483371,"answer_id":49980166,"question_id":21574236,"body_markdown":"This means that the object which you are trying to access is not loaded, so write a query that makes a **join fetch** of the object which you are trying to access. \r\n\r\nEg:\r\n\r\nIf you are trying to get ObjectB from ObjectA where ObjectB is a foreign key in ObjectA.\r\n\r\nQuery :\r\n\r\n    SELECT objA FROM ObjectA obj JOIN FETCH obj.objectB objB\r\n\r\n","title":"How to fix org.hibernate.LazyInitializationException - could not initialize proxy - no Session","body":"<p>This means that the object which you are trying to access is not loaded, so write a query that makes a <strong>join fetch</strong> of the object which you are trying to access. </p>\n\n<p>Eg:</p>\n\n<p>If you are trying to get ObjectB from ObjectA where ObjectB is a foreign key in ObjectA.</p>\n\n<p>Query :</p>\n\n<pre><code>SELECT objA FROM ObjectA obj JOIN FETCH obj.objectB objB\n</code></pre>\n"},{"tags":[],"owner":{"account_id":4239064,"reputation":10026,"user_id":3469489,"accept_rate":43,"display_name":"Shaaban Ebrahim"},"down_vote_count":4,"up_vote_count":32,"is_accepted":false,"score":28,"last_activity_date":1529097894,"creation_date":1529097894,"answer_id":50882857,"question_id":21574236,"body_markdown":"if you use spring data jpa , spring boot you can add this line in application.properties\r\n\r\n    spring.jpa.properties.hibernate.enable_lazy_load_no_trans=true","title":"How to fix org.hibernate.LazyInitializationException - could not initialize proxy - no Session","body":"<p>if you use spring data jpa , spring boot you can add this line in application.properties</p>\n\n<pre><code>spring.jpa.properties.hibernate.enable_lazy_load_no_trans=true\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3286384,"reputation":3371,"user_id":2765792,"display_name":"Aman Goel"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1585627525,"creation_date":1540547251,"answer_id":53005977,"question_id":21574236,"body_markdown":"This means you are using JPA or hibernate in your code and performing modifying operation on DB without making the business logic transaction.\r\nSo simple solution for this is mark your piece of code @Transactional\r\n ","title":"How to fix org.hibernate.LazyInitializationException - could not initialize proxy - no Session","body":"<p>This means you are using JPA or hibernate in your code and performing modifying operation on DB without making the business logic transaction.\nSo simple solution for this is mark your piece of code @Transactional</p>\n"},{"tags":[],"owner":{"account_id":9512217,"reputation":1116,"user_id":7069816,"accept_rate":75,"display_name":"absin"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1540908254,"creation_date":1540908254,"answer_id":53066107,"question_id":21574236,"body_markdown":"In my case a misplaced `session.clear()` was causing this problem. ","title":"How to fix org.hibernate.LazyInitializationException - could not initialize proxy - no Session","body":"<p>In my case a misplaced <code>session.clear()</code> was causing this problem. </p>\n"},{"tags":[],"owner":{"account_id":4506248,"reputation":1109,"user_id":3663495,"display_name":"Kms"},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1563131916,"creation_date":1563131916,"answer_id":57030407,"question_id":21574236,"body_markdown":"**Faced the same Exception in different use case.**\r\n\r\n[![enter image description here][1]][1]\r\n\r\n**Use Case :** Try to read data from DB with **DTO projection.**\r\n\r\n**Solution:** Use **get** method instead of **load**.\r\n\r\n**Generic Operation**\r\n\r\n    public class HibernateTemplate {\r\n\tpublic static Object loadObject(Class&lt;?&gt; cls, Serializable s) {\r\n\t\tObject o = null;\r\n\t\tTransaction tx = null;\r\n\t\ttry {\r\n\t\t\tSession session = HibernateUtil.getSessionFactory().openSession();\r\n\t\t\ttx = session.beginTransaction();\r\n\t\t\to = session.load(cls, s); /*change load to get*/\r\n\t\t\ttx.commit();\r\n\t\t\tsession.close();\r\n\t\t} catch (Exception e) {\r\n\t\t\te.printStackTrace();\r\n\t\t}\r\n\t\treturn o;\r\n\t}\r\n}\r\n\r\n**Persistence Class**\r\n\r\n    public class Customer {\r\n\r\n\t@Id\r\n\t@GeneratedValue(strategy = GenerationType.IDENTITY)\r\n\t@Column(name = &quot;Id&quot;)\r\n\tprivate int customerId;\r\n\r\n\t@Column(name = &quot;Name&quot;)\r\n\tprivate String customerName;\r\n\r\n\t@Column(name = &quot;City&quot;)\r\n\tprivate String city;\r\n\r\n\t//constructors , setters and getters\r\n\t\r\n\t}\r\n\r\n\r\n**CustomerDAO interface**\r\n\r\n    public interface CustomerDAO \r\n         {\r\n\t   public CustomerTO getCustomerById(int cid);\r\n         }\r\n\r\n**Entity Transfer Object Class**\r\n\r\n    public class CustomerTO {\r\n\r\n\tprivate int customerId;\r\n\r\n\tprivate String customerName;\r\n\r\n\tprivate String city;\r\n\r\n    //constructors , setters and getters\r\n}\r\n\r\n**Factory Class**\r\n\r\n    public class DAOFactory {\r\n\r\n\tstatic CustomerDAO customerDAO;\r\n\tstatic {\r\n\t\tcustomerDAO = new HibernateCustomerDAO();\r\n\t}\r\n\r\n\tpublic static CustomerDAO getCustomerDAO() {\r\n\t\treturn customerDAO;\r\n\t}\r\n}\r\n\r\n**Entity specific DAO**\r\n\r\n    public class HibernateCustomerDAO implements CustomerDAO {\r\n\r\n\t@Override\r\n\tpublic CustomerTO getCustomerById(int cid) {\r\n\t\tCustomer cust = (Customer) HibernateTemplate.loadObject(Customer.class, cid);\r\n\t\tCustomerTO cto = new CustomerTO(cust.getCustomerId(), cust.getCustomerName(), cust.getCity());\r\n\t\treturn cto;\r\n\t}\r\n}\r\n\r\n**Retrieving data: Test Class**\r\n\r\n\tCustomerDAO cdao = DAOFactory.getCustomerDAO();\r\n\tCustomerTO c1 = cdao.getCustomerById(2);\r\n\tSystem.out.println(&quot;CustomerName -&gt; &quot; + c1.getCustomerName() + &quot; ,CustomerCity -&gt; &quot; + c1.getCity());\r\n\r\n**Present Data**\r\n\r\n[![enter image description here][2]][2]\r\n\r\n**Query and output generated by Hibernate System**\r\n\r\nHibernate: select customer0_.Id as Id1_0_0_, customer0_.City as City2_0_0_, customer0_.Name as Name3_0_0_ from CustomerLab31 customer0_ where customer0_.Id=?\r\n\r\nCustomerName -&gt; Cody ,CustomerCity -&gt; LA\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/NuOKs.png\r\n  [2]: https://i.stack.imgur.com/1afXX.png","title":"How to fix org.hibernate.LazyInitializationException - could not initialize proxy - no Session","body":"<p><strong>Faced the same Exception in different use case.</strong></p>\n\n<p><a href=\"https://i.stack.imgur.com/NuOKs.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/NuOKs.png\" alt=\"enter image description here\"></a></p>\n\n<p><strong>Use Case :</strong> Try to read data from DB with <strong>DTO projection.</strong></p>\n\n<p><strong>Solution:</strong> Use <strong>get</strong> method instead of <strong>load</strong>.</p>\n\n<p><strong>Generic Operation</strong></p>\n\n<pre><code>public class HibernateTemplate {\npublic static Object loadObject(Class&lt;?&gt; cls, Serializable s) {\n    Object o = null;\n    Transaction tx = null;\n    try {\n        Session session = HibernateUtil.getSessionFactory().openSession();\n        tx = session.beginTransaction();\n        o = session.load(cls, s); /*change load to get*/\n        tx.commit();\n        session.close();\n    } catch (Exception e) {\n        e.printStackTrace();\n    }\n    return o;\n}\n</code></pre>\n\n<p>}</p>\n\n<p><strong>Persistence Class</strong></p>\n\n<pre><code>public class Customer {\n\n@Id\n@GeneratedValue(strategy = GenerationType.IDENTITY)\n@Column(name = \"Id\")\nprivate int customerId;\n\n@Column(name = \"Name\")\nprivate String customerName;\n\n@Column(name = \"City\")\nprivate String city;\n\n//constructors , setters and getters\n\n}\n</code></pre>\n\n<p><strong>CustomerDAO interface</strong></p>\n\n<pre><code>public interface CustomerDAO \n     {\n   public CustomerTO getCustomerById(int cid);\n     }\n</code></pre>\n\n<p><strong>Entity Transfer Object Class</strong></p>\n\n<pre><code>public class CustomerTO {\n\nprivate int customerId;\n\nprivate String customerName;\n\nprivate String city;\n\n//constructors , setters and getters\n</code></pre>\n\n<p>}</p>\n\n<p><strong>Factory Class</strong></p>\n\n<pre><code>public class DAOFactory {\n\nstatic CustomerDAO customerDAO;\nstatic {\n    customerDAO = new HibernateCustomerDAO();\n}\n\npublic static CustomerDAO getCustomerDAO() {\n    return customerDAO;\n}\n</code></pre>\n\n<p>}</p>\n\n<p><strong>Entity specific DAO</strong></p>\n\n<pre><code>public class HibernateCustomerDAO implements CustomerDAO {\n\n@Override\npublic CustomerTO getCustomerById(int cid) {\n    Customer cust = (Customer) HibernateTemplate.loadObject(Customer.class, cid);\n    CustomerTO cto = new CustomerTO(cust.getCustomerId(), cust.getCustomerName(), cust.getCity());\n    return cto;\n}\n</code></pre>\n\n<p>}</p>\n\n<p><strong>Retrieving data: Test Class</strong></p>\n\n<pre><code>CustomerDAO cdao = DAOFactory.getCustomerDAO();\nCustomerTO c1 = cdao.getCustomerById(2);\nSystem.out.println(\"CustomerName -&gt; \" + c1.getCustomerName() + \" ,CustomerCity -&gt; \" + c1.getCity());\n</code></pre>\n\n<p><strong>Present Data</strong></p>\n\n<p><a href=\"https://i.stack.imgur.com/1afXX.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/1afXX.png\" alt=\"enter image description here\"></a></p>\n\n<p><strong>Query and output generated by Hibernate System</strong></p>\n\n<p>Hibernate: select customer0_.Id as Id1_0_0_, customer0_.City as City2_0_0_, customer0_.Name as Name3_0_0_ from CustomerLab31 customer0_ where customer0_.Id=?</p>\n\n<p>CustomerName -> Cody ,CustomerCity -> LA</p>\n"},{"tags":[],"owner":{"account_id":1142508,"reputation":131,"user_id":1126011,"display_name":"Nightfa11"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1605314261,"creation_date":1605314261,"answer_id":64829771,"question_id":21574236,"body_markdown":"This happened to me when I was already using `@Transactional(value=...)` and was using multiple transaction managers.\r\n\r\nMy forms were sending back data that already had `@JsonIgnore` on them, so the data being sent back from forms was incomplete.\r\n\r\nOriginally I used the anti pattern solution, but found it was incredibly slow. I disabled this by setting it to false. \r\n```\r\nspring.jpa.properties.hibernate.enable_lazy_load_no_trans=false\r\n```\r\n\r\nThe fix was to ensure that any objects that had lazy-loaded data that weren&#39;t loading were retrieved from the database first.\r\n\r\n```\r\nOptional&lt;Object&gt; objectDBOpt = objectRepository.findById(object.getId());\r\n\r\nif (objectDBOpt.isEmpty()) {\r\n    // Throw error\r\n} else {\r\n    Object objectFromDB = objectDBOpt.get();\r\n}\r\n```\r\nIn short, if you&#39;ve tried all of the other answers, just make sure you look back to check you&#39;re loading from the database first if you haven&#39;t provided all the `@JsonIgnore` properties and are using them in your database query.","title":"How to fix org.hibernate.LazyInitializationException - could not initialize proxy - no Session","body":"<p>This happened to me when I was already using <code>@Transactional(value=...)</code> and was using multiple transaction managers.</p>\n<p>My forms were sending back data that already had <code>@JsonIgnore</code> on them, so the data being sent back from forms was incomplete.</p>\n<p>Originally I used the anti pattern solution, but found it was incredibly slow. I disabled this by setting it to false.</p>\n<pre><code>spring.jpa.properties.hibernate.enable_lazy_load_no_trans=false\n</code></pre>\n<p>The fix was to ensure that any objects that had lazy-loaded data that weren't loading were retrieved from the database first.</p>\n<pre><code>Optional&lt;Object&gt; objectDBOpt = objectRepository.findById(object.getId());\n\nif (objectDBOpt.isEmpty()) {\n    // Throw error\n} else {\n    Object objectFromDB = objectDBOpt.get();\n}\n</code></pre>\n<p>In short, if you've tried all of the other answers, just make sure you look back to check you're loading from the database first if you haven't provided all the <code>@JsonIgnore</code> properties and are using them in your database query.</p>\n"},{"tags":[],"owner":{"account_id":11312373,"reputation":271,"user_id":8295173,"display_name":"Mehdi Varse"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1623676285,"creation_date":1623676285,"answer_id":67970860,"question_id":21574236,"body_markdown":"In Spring Application Just Add\r\n\r\n    @Transactional(readOnly = true)\r\n\r\non your Function.\r\n\r\n&gt; Remind that import spring Transactional annotation\r\n&gt; \r\n&gt;  import org.springframework.transaction.annotation.Transactional;\r\n\r\n","title":"How to fix org.hibernate.LazyInitializationException - could not initialize proxy - no Session","body":"<p>In Spring Application Just Add</p>\n<pre><code>@Transactional(readOnly = true)\n</code></pre>\n<p>on your Function.</p>\n<blockquote>\n<p>Remind that import spring Transactional annotation</p>\n<p>import org.springframework.transaction.annotation.Transactional;</p>\n</blockquote>\n"},{"tags":[],"owner":{"account_id":12969674,"reputation":713,"user_id":9375838,"display_name":"Leena"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1634533521,"creation_date":1634533521,"answer_id":69611021,"question_id":21574236,"body_markdown":"Use **@NamedEntityGraph**. Eagar fetch will deteriorate the performance. Refer https://thorben-janssen.com/lazyinitializationexception/ for in-depth explanation.","title":"How to fix org.hibernate.LazyInitializationException - could not initialize proxy - no Session","body":"<p>Use <strong>@NamedEntityGraph</strong>. Eagar fetch will deteriorate the performance. Refer <a href=\"https://thorben-janssen.com/lazyinitializationexception/\" rel=\"nofollow noreferrer\">https://thorben-janssen.com/lazyinitializationexception/</a> for in-depth explanation.</p>\n"},{"tags":[],"owner":{"account_id":18125741,"reputation":119,"user_id":13181284,"display_name":"Fabio Sartor"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1645085260,"creation_date":1645032899,"answer_id":71146636,"question_id":21574236,"body_markdown":"All answers about adding JOIN FETCH (or left join fetch) are correct, I want only to add this: \r\nif you have converter be sure the getAsObject sub uses a &quot;find&quot; than includes in the sql the Join Fetch too.\r\nI lost much time to fix a similar problem, and the problem was in the converter.\r\n","title":"How to fix org.hibernate.LazyInitializationException - could not initialize proxy - no Session","body":"<p>All answers about adding JOIN FETCH (or left join fetch) are correct, I want only to add this:\nif you have converter be sure the getAsObject sub uses a &quot;find&quot; than includes in the sql the Join Fetch too.\nI lost much time to fix a similar problem, and the problem was in the converter.</p>\n"},{"tags":[],"owner":{"account_id":12514032,"reputation":614,"user_id":9108026,"display_name":"AissaDevLab"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1650978837,"creation_date":1650978837,"answer_id":72014614,"question_id":21574236,"body_markdown":"- springBootVersion = &#39;2.6.7&#39;\r\n- hibernate = 5.6.8.Final&#39;\r\n\r\nFor me i get the error in: \r\n\r\n    MyEntity myEntity = myEntityRepository.getById(id);\r\n\r\nI change to this: \r\n\r\n    MyEntity myEntity = myEntityRepository.findById(id).orElse(null);\r\n\r\nand i add `@ManyToOne(fetch = FetchType.EAGER)` in entity","title":"How to fix org.hibernate.LazyInitializationException - could not initialize proxy - no Session","body":"<ul>\n<li>springBootVersion = '2.6.7'</li>\n<li>hibernate = 5.6.8.Final'</li>\n</ul>\n<p>For me i get the error in:</p>\n<pre><code>MyEntity myEntity = myEntityRepository.getById(id);\n</code></pre>\n<p>I change to this:</p>\n<pre><code>MyEntity myEntity = myEntityRepository.findById(id).orElse(null);\n</code></pre>\n<p>and i add <code>@ManyToOne(fetch = FetchType.EAGER)</code> in entity</p>\n"},{"tags":[],"owner":{"account_id":20453332,"reputation":305,"user_id":15007593,"display_name":"Fotis Kolytoumpas"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1659429611,"creation_date":1659429611,"answer_id":73204456,"question_id":21574236,"body_markdown":"I was getting this error in my JAX-RS application when I was trying to get all the Departments. I had to add the `@JsonbTransient` Annotation to the attributes of both classes. My entities are Department and Employee, and the DB relationship is Many to Many.\r\n\r\nEmployee.java\r\n\r\n    ...\r\n    @ManyToMany\r\n    @JoinTable(\r\n            name = &quot;emp_dept&quot;,\r\n            joinColumns = {@JoinColumn(name = &quot;emp_id&quot;, referencedColumnName = &quot;id&quot;)},\r\n            inverseJoinColumns = {@JoinColumn(name = &quot;dept_id&quot;, referencedColumnName = &quot;id&quot;)}\r\n    )\r\n    @JsonbTransient\r\n    private Set&lt;Department&gt; departments = new HashSet&lt;Department&gt;();\r\n    ...\r\n\r\nDepartment.java\r\n\r\n    ...\r\n    @ManyToMany(mappedBy = &quot;departments&quot;)\r\n    @JsonbTransient\r\n    private Set&lt;Employee&gt; employees = new HashSet&lt;Employee&gt;();\r\n    ...","title":"How to fix org.hibernate.LazyInitializationException - could not initialize proxy - no Session","body":"<p>I was getting this error in my JAX-RS application when I was trying to get all the Departments. I had to add the <code>@JsonbTransient</code> Annotation to the attributes of both classes. My entities are Department and Employee, and the DB relationship is Many to Many.</p>\n<p>Employee.java</p>\n<pre><code>...\n@ManyToMany\n@JoinTable(\n        name = &quot;emp_dept&quot;,\n        joinColumns = {@JoinColumn(name = &quot;emp_id&quot;, referencedColumnName = &quot;id&quot;)},\n        inverseJoinColumns = {@JoinColumn(name = &quot;dept_id&quot;, referencedColumnName = &quot;id&quot;)}\n)\n@JsonbTransient\nprivate Set&lt;Department&gt; departments = new HashSet&lt;Department&gt;();\n...\n</code></pre>\n<p>Department.java</p>\n<pre><code>...\n@ManyToMany(mappedBy = &quot;departments&quot;)\n@JsonbTransient\nprivate Set&lt;Employee&gt; employees = new HashSet&lt;Employee&gt;();\n...\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1824191,"reputation":5574,"user_id":1657465,"display_name":"luiscla27"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1697816236,"creation_date":1697739923,"answer_id":77326239,"question_id":21574236,"body_markdown":"##### TLDR: Always serialize [DTO&#39;s][1], avoid returning entities.\r\n\r\n---\r\nThe reason for the issue is that when retrieving lazily-loaded data, first step is populate the main object, and second to retrieve the data within its proxies. For this, an open Session in Hibernate is needed.\r\n \r\nThe problem arises when the second step happens after the transaction has closed, which leads to a `LazyInitializationException`.\r\n\r\nI&#39;m going to summarize some solutions here while adding mine:\r\n```\r\n1. Avoid entity serialization, **instead serialize a dto**\r\n2. Add `@JsonIgnore` to your `LAZY` attributes\r\n3. Change `FetchType` to `EAGER`\r\n4. Set `hibernate.enable_lazy_load_no_trans=true` \r\n```\r\n\r\nOnly points 1 and 2 are recommended, the other 2 aren&#39;t meant to be used at serialization phase. As they have a HUGE performance cost there, they both make a hit to the database to retrieve extra data. **Option 4, actually creates a new transaction for every lazy object so please [AVOID!][2]**.\r\n\r\n\r\n\r\nMy grain of sand in this question is to highly recommend to explicitly use ONLY options 1 and 2, and also `FetchType.EAGER` only for business logic, not as a solution for this issue.\r\n\r\n\r\n  [1]: https://medium.com/javarevisited/not-so-obvious-tips-to-write-better-dtos-in-java-c6116895b180\r\n  [2]: https://www.baeldung.com/hibernate-lazy-loading-workaround#4-lazy-loading-with-automatic-transaction","title":"How to fix org.hibernate.LazyInitializationException - could not initialize proxy - no Session","body":"<h5>TLDR: Always serialize <a href=\"https://medium.com/javarevisited/not-so-obvious-tips-to-write-better-dtos-in-java-c6116895b180\" rel=\"nofollow noreferrer\">DTO's</a>, avoid returning entities.</h5>\n<hr />\n<p>The reason for the issue is that when retrieving lazily-loaded data, first step is populate the main object, and second to retrieve the data within its proxies. For this, an open Session in Hibernate is needed.</p>\n<p>The problem arises when the second step happens after the transaction has closed, which leads to a <code>LazyInitializationException</code>.</p>\n<p>I'm going to summarize some solutions here while adding mine:</p>\n<pre><code>1. Avoid entity serialization, **instead serialize a dto**\n2. Add `@JsonIgnore` to your `LAZY` attributes\n3. Change `FetchType` to `EAGER`\n4. Set `hibernate.enable_lazy_load_no_trans=true` \n</code></pre>\n<p>Only points 1 and 2 are recommended, the other 2 aren't meant to be used at serialization phase. As they have a HUGE performance cost there, they both make a hit to the database to retrieve extra data. <strong>Option 4, actually creates a new transaction for every lazy object so please <a href=\"https://www.baeldung.com/hibernate-lazy-loading-workaround#4-lazy-loading-with-automatic-transaction\" rel=\"nofollow noreferrer\">AVOID!</a></strong>.</p>\n<p>My grain of sand in this question is to highly recommend to explicitly use ONLY options 1 and 2, and also <code>FetchType.EAGER</code> only for business logic, not as a solution for this issue.</p>\n"}],"owner":{"account_id":3736418,"reputation":3293,"user_id":3107262,"accept_rate":55,"display_name":"Blerta Dhimitri"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":678839,"favorite_count":0,"down_vote_count":0,"up_vote_count":283,"accepted_answer_id":21575368,"answer_count":25,"score":283,"last_activity_date":1697816236,"creation_date":1391595141,"question_id":21574236,"body_markdown":"I get the following exception:\r\n\r\n&lt;!-- language: lang-none --&gt;\r\n\r\n    Exception in thread &quot;main&quot; org.hibernate.LazyInitializationException: could not initialize proxy - no Session\r\n    \tat org.hibernate.proxy.AbstractLazyInitializer.initialize(AbstractLazyInitializer.java:167)\r\n    \tat org.hibernate.proxy.AbstractLazyInitializer.getImplementation(AbstractLazyInitializer.java:215)\r\n    \tat org.hibernate.proxy.pojo.javassist.JavassistLazyInitializer.invoke(JavassistLazyInitializer.java:190)\r\n    \tat sei.persistence.wf.entities.Element_$$_jvstc68_47.getNote(Element_$$_jvstc68_47.java)\r\n    \tat JSON_to_XML.createBpmnRepresantation(JSON_to_XML.java:139)\r\n    \tat JSON_to_XML.main(JSON_to_XML.java:84)\r\n\r\nwhen I try to call from main the following lines:\r\n\r\n```java\r\nModel subProcessModel = getModelByModelGroup(1112);\r\nSystem.out.println(subProcessModel.getElement().getNote());\r\n```\r\n\r\nI implemented the `getModelByModelGroup(int modelgroupid)` method firstly like this :\r\n\r\n```java\r\npublic static Model getModelByModelGroup(int modelGroupId, boolean openTransaction) {\r\n      \t\t\r\n    Session session = SessionFactoryHelper.getSessionFactory().getCurrentSession();\t\t\r\n    Transaction tx = null;\r\n      \t\t\r\n    if (openTransaction) {\r\n        tx = session.getTransaction();\r\n    }\r\n\r\n    String responseMessage = &quot;&quot;;\r\n      \t\t\r\n \ttry {\r\n        if (openTransaction) {\r\n      \t    tx.begin();\r\n        }\r\n      \tQuery query = session.createQuery(&quot;from Model where modelGroup.id = :modelGroupId&quot;);\r\n      \tquery.setParameter(&quot;modelGroupId&quot;, modelGroupId);\r\n      \t\r\n    \tList&lt;Model&gt; modelList = (List&lt;Model&gt;)query.list(); \r\n      \tModel model = null;\r\n      \t\r\n        for (Model m : modelList) {\r\n      \t    if (m.getModelType().getId() == 3) {\r\n      \t\t    model = m;\r\n      \t\t\tbreak;\r\n      \t\t}\r\n        }\r\n      \t\t\t\r\n      \tif (model == null) {\r\n      \t    Object[] arrModels = modelList.toArray();\r\n      \t\tif (arrModels.length == 0) {\r\n      \t\t    throw new Exception(&quot;Non esiste &quot;);\r\n            }\r\n      \t\t\t\t\r\n      \t\tmodel = (Model)arrModels[0];\r\n      \t}\r\n      \t\t\t\r\n      \tif (openTransaction) {\r\n            tx.commit();\r\n        }\r\n      \t\r\n        return model;\r\n      \t\t\t\r\n   } catch(Exception ex) {\r\n       if (openTransaction) {\r\n           tx.rollback();\r\n       }\r\n       ex.printStackTrace();\r\n       if (responseMessage.compareTo(&quot;&quot;) == 0) {\r\n           responseMessage = &quot;Error&quot; + ex.getMessage();\r\n       }\r\n       return null;\r\n    }\r\n}\r\n```\r\n\r\nand got the exception. Then a friend suggested me to always test the session and get the current session to avoid this error. So I did this:\r\n\r\n```java\r\npublic static Model getModelByModelGroup(int modelGroupId) {\r\n    Session session = null;\r\n    boolean openSession = session == null;\r\n    Transaction tx = null;\r\n    if (openSession) {\r\n        session = SessionFactoryHelper.getSessionFactory().getCurrentSession();\t\r\n      \ttx = session.getTransaction();\r\n    }\r\n    String responseMessage = &quot;&quot;;\r\n    \t\t\r\n    try {\r\n        if (openSession) {\r\n      \t    tx.begin();\r\n        }\r\n\t\tQuery query = session.createQuery(&quot;from Model where modelGroup.id = :modelGroupId&quot;);\r\n      \tquery.setParameter(&quot;modelGroupId&quot;, modelGroupId);\r\n      \t\r\n    \tList&lt;Model&gt; modelList = (List&lt;Model&gt;)query.list(); \r\n      \tModel model = null;\r\n      \t\r\n        for (Model m : modelList) {\r\n      \t    if (m.getModelType().getId() == 3) {\r\n      \t\t    model = m;\r\n      \t\t\tbreak;\r\n      \t\t}\r\n        }\r\n      \t\t\t\r\n      \tif (model == null) {\r\n      \t    Object[] arrModels = modelList.toArray();\r\n      \t\tif (arrModels.length == 0) {\r\n      \t\t    throw new RuntimeException(&quot;Non esiste&quot;);\r\n            }\r\n      \t\t\t\t\r\n      \t\tmodel = (Model)arrModels[0];\r\n      \t\t\t\r\n      \t\tif (openSession) {\r\n      \t\t    tx.commit();\r\n            }\r\n      \t\treturn model;\r\n      \t} catch(RuntimeException ex) {\r\n      \t    if (openSession) {\r\n  \t\t\t    tx.rollback();\r\n            }\r\n      \t\tex.printStackTrace();\r\n      \t\tif (responseMessage.compareTo(&quot;&quot;) == 0) {\r\n      \t\t    responseMessage = &quot;Error&quot; + ex.getMessage();\r\n            }\r\n      \t\treturn null;\t\t\r\n      \t}\r\n    }\r\n}\r\n```\r\n\r\nbut still, get the same error. \r\nI have been reading a lot for this error and found some possible solutions. One of them was to set lazyLoad to false but I am not allowed to do this that&#39;s why I was suggested to control the session","title":"How to fix org.hibernate.LazyInitializationException - could not initialize proxy - no Session","body":"<p>I get the following exception:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>Exception in thread \"main\" org.hibernate.LazyInitializationException: could not initialize proxy - no Session\n    at org.hibernate.proxy.AbstractLazyInitializer.initialize(AbstractLazyInitializer.java:167)\n    at org.hibernate.proxy.AbstractLazyInitializer.getImplementation(AbstractLazyInitializer.java:215)\n    at org.hibernate.proxy.pojo.javassist.JavassistLazyInitializer.invoke(JavassistLazyInitializer.java:190)\n    at sei.persistence.wf.entities.Element_$$_jvstc68_47.getNote(Element_$$_jvstc68_47.java)\n    at JSON_to_XML.createBpmnRepresantation(JSON_to_XML.java:139)\n    at JSON_to_XML.main(JSON_to_XML.java:84)\n</code></pre>\n\n<p>when I try to call from main the following lines:</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>Model subProcessModel = getModelByModelGroup(1112);\nSystem.out.println(subProcessModel.getElement().getNote());\n</code></pre>\n\n<p>I implemented the <code>getModelByModelGroup(int modelgroupid)</code> method firstly like this :</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>public static Model getModelByModelGroup(int modelGroupId, boolean openTransaction) {\n\n    Session session = SessionFactoryHelper.getSessionFactory().getCurrentSession();     \n    Transaction tx = null;\n\n    if (openTransaction) {\n        tx = session.getTransaction();\n    }\n\n    String responseMessage = \"\";\n\n    try {\n        if (openTransaction) {\n            tx.begin();\n        }\n        Query query = session.createQuery(\"from Model where modelGroup.id = :modelGroupId\");\n        query.setParameter(\"modelGroupId\", modelGroupId);\n\n        List&lt;Model&gt; modelList = (List&lt;Model&gt;)query.list(); \n        Model model = null;\n\n        for (Model m : modelList) {\n            if (m.getModelType().getId() == 3) {\n                model = m;\n                break;\n            }\n        }\n\n        if (model == null) {\n            Object[] arrModels = modelList.toArray();\n            if (arrModels.length == 0) {\n                throw new Exception(\"Non esiste \");\n            }\n\n            model = (Model)arrModels[0];\n        }\n\n        if (openTransaction) {\n            tx.commit();\n        }\n\n        return model;\n\n   } catch(Exception ex) {\n       if (openTransaction) {\n           tx.rollback();\n       }\n       ex.printStackTrace();\n       if (responseMessage.compareTo(\"\") == 0) {\n           responseMessage = \"Error\" + ex.getMessage();\n       }\n       return null;\n    }\n}\n</code></pre>\n\n<p>and got the exception. Then a friend suggested me to always test the session and get the current session to avoid this error. So I did this:</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>public static Model getModelByModelGroup(int modelGroupId) {\n    Session session = null;\n    boolean openSession = session == null;\n    Transaction tx = null;\n    if (openSession) {\n        session = SessionFactoryHelper.getSessionFactory().getCurrentSession(); \n        tx = session.getTransaction();\n    }\n    String responseMessage = \"\";\n\n    try {\n        if (openSession) {\n            tx.begin();\n        }\n        Query query = session.createQuery(\"from Model where modelGroup.id = :modelGroupId\");\n        query.setParameter(\"modelGroupId\", modelGroupId);\n\n        List&lt;Model&gt; modelList = (List&lt;Model&gt;)query.list(); \n        Model model = null;\n\n        for (Model m : modelList) {\n            if (m.getModelType().getId() == 3) {\n                model = m;\n                break;\n            }\n        }\n\n        if (model == null) {\n            Object[] arrModels = modelList.toArray();\n            if (arrModels.length == 0) {\n                throw new RuntimeException(\"Non esiste\");\n            }\n\n            model = (Model)arrModels[0];\n\n            if (openSession) {\n                tx.commit();\n            }\n            return model;\n        } catch(RuntimeException ex) {\n            if (openSession) {\n                tx.rollback();\n            }\n            ex.printStackTrace();\n            if (responseMessage.compareTo(\"\") == 0) {\n                responseMessage = \"Error\" + ex.getMessage();\n            }\n            return null;        \n        }\n    }\n}\n</code></pre>\n\n<p>but still, get the same error. \nI have been reading a lot for this error and found some possible solutions. One of them was to set lazyLoad to false but I am not allowed to do this that's why I was suggested to control the session</p>\n"},{"tags":["java","jquery","spring","spring-boot"],"answers":[{"tags":[],"owner":{"account_id":11725107,"reputation":754,"user_id":8582685,"display_name":"Lee Greiner"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1697816185,"creation_date":1697816185,"answer_id":77332193,"question_id":77331172,"body_markdown":"Depends on security is configured. If you put the .ttf in src/main/resources/static you will be able to access the file directly without going through a controller. This assumes no security or security configured as \r\n\r\n    http.authorizeHttpRequests()\r\n          .requestMatchers(PathRequest.toStaticResources().atCommonLocations()).permitAll()\r\n\r\nThese static locations include /static/css, /static/js, /static/img, and a few others. If you want to put your .ttf file somewhere other than in the &#39;common locations&#39; you will have to add your own matcher to allow access to this /static location and permitAll().\r\n\r\n","title":"Spring Boot - load a file in JS code without triggering a controller","body":"<p>Depends on security is configured. If you put the .ttf in src/main/resources/static you will be able to access the file directly without going through a controller. This assumes no security or security configured as</p>\n<pre><code>http.authorizeHttpRequests()\n      .requestMatchers(PathRequest.toStaticResources().atCommonLocations()).permitAll()\n</code></pre>\n<p>These static locations include /static/css, /static/js, /static/img, and a few others. If you want to put your .ttf file somewhere other than in the 'common locations' you will have to add your own matcher to allow access to this /static location and permitAll().</p>\n"}],"owner":{"account_id":2487587,"reputation":4296,"user_id":2165744,"accept_rate":29,"display_name":"jarosik"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":21,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1697816185,"creation_date":1697807388,"question_id":77331172,"body_markdown":"I have a Spring Boot project with plain JavaScript and jQuery.\r\nFor one of the JS plugins, I must load a .ttf font without triggering a controller.\r\nJS code should just read a file from project folder.\r\nIs this possible?","title":"Spring Boot - load a file in JS code without triggering a controller","body":"<p>I have a Spring Boot project with plain JavaScript and jQuery.\nFor one of the JS plugins, I must load a .ttf font without triggering a controller.\nJS code should just read a file from project folder.\nIs this possible?</p>\n"},{"tags":["java","spring-boot","caching","in-memory","chronicle-map"],"comments":[{"owner":{"account_id":9760,"reputation":85859,"user_id":18157,"accept_rate":100,"display_name":"Jim Garrison"},"score":0,"creation_date":1696458877,"post_id":77233120,"comment_id":136157385,"body_markdown":"_&quot;can&#39;t seem to seiralize/deserialize &quot;_ - What does this mean? Provide error messages/stack trace.","body":"<i>&quot;can&#39;t seem to seiralize/deserialize &quot;</i> - What does this mean? Provide error messages/stack trace."},{"owner":{"account_id":9760,"reputation":85859,"user_id":18157,"accept_rate":100,"display_name":"Jim Garrison"},"score":0,"creation_date":1696458941,"post_id":77233120,"comment_id":136157393,"body_markdown":"`Net o = (NetKey) object` class `Net` doesn&#39;t seem to appear in the class hierarchy of `NetKey`...?","body":"<code>Net o = (NetKey) object</code> class <code>Net</code> doesn&#39;t seem to appear in the class hierarchy of <code>NetKey</code>...?"},{"owner":{"account_id":9760,"reputation":85859,"user_id":18157,"accept_rate":100,"display_name":"Jim Garrison"},"score":0,"creation_date":1696459000,"post_id":77233120,"comment_id":136157402,"body_markdown":"Trying to find the docs online... the ChronicleMap developer site hides the Javadoc behind a registration-wall.  Very contrary to OSS ethics.","body":"Trying to find the docs online... the ChronicleMap developer site hides the Javadoc behind a registration-wall.  Very contrary to OSS ethics."},{"owner":{"account_id":2864880,"reputation":99,"user_id":2459396,"accept_rate":29,"display_name":"user2459396"},"score":0,"creation_date":1696493205,"post_id":77233120,"comment_id":136160640,"body_markdown":"@JimGarrison It was a typo, updated it to `NetKey o = (NetKey) object;`","body":"@JimGarrison It was a typo, updated it to <code>NetKey o = (NetKey) object;</code>"},{"owner":{"account_id":9760,"reputation":85859,"user_id":18157,"accept_rate":100,"display_name":"Jim Garrison"},"score":0,"creation_date":1696551484,"post_id":77233120,"comment_id":136171307,"body_markdown":"The stack trace doesn&#39;t include any entries in your code.  Did you post the ***complete*** stack trace?  Also, StackOverflow in this case is strongly suggestive of a circular reference that isn&#39;t being handled correctly.  Does ChronicleMap handle circular references?  This is a question for Chronicle&#39;s support.","body":"The stack trace doesn&#39;t include any entries in your code.  Did you post the <b><i>complete</i></b> stack trace?  Also, StackOverflow in this case is strongly suggestive of a circular reference that isn&#39;t being handled correctly.  Does ChronicleMap handle circular references?  This is a question for Chronicle&#39;s support."}],"answers":[{"tags":[],"owner":{"account_id":2864880,"reputation":99,"user_id":2459396,"accept_rate":29,"display_name":"user2459396"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1697816159,"creation_date":1697816159,"answer_id":77332190,"question_id":77233120,"body_markdown":"I was able to solve this by changing my key &amp; value to Class and using custom serializers.\r\n\r\n```\r\n@Getter\r\n@Setter\r\n@SuperBuilder\r\nclass NetKey extends CacheKey {\r\n    private String productType;\r\n    private String dealDate;\r\n\r\n    @Override\r\n    public boolean equals(Object object) {\r\n        if (this == object) return true;\r\n        if (object == null || getClass() != object.getClass()) return false;\r\n\r\n        NetKey nk = (NetKey) object;\r\n        return super.equals(object) &amp;&amp;\r\n                (isEmpty(this.productType) || Objects.equals(this.productType, nk.productType)) &amp;&amp;\r\n                Objects.equals(this.dealDate, nk.dealDate);\r\n    }\r\n\r\n    @Override\r\n    public int hashCode() {\r\n        return Objects.hash(super.hashCode(), productType, dealDate);\r\n    }\r\n\r\n    @Override\r\n    public String toString() {\r\n        return &quot;NetKey{&quot; +\r\n                super.toString() +\r\n                &quot;, productType=&#39;&quot; + productType + &#39;\\&#39;&#39; +\r\n                &quot;, dealDate=&#39;&quot; + dealDate + &#39;\\&#39;&#39; +\r\n                &#39;}&#39;;\r\n    }\r\n\r\n}\r\n\r\n@Setter\r\n@Getter\r\n@SuperBuilder\r\nclass CacheKey {\r\n    private String cacheType;\r\n\r\n    @Override\r\n    public boolean equals(Object object) {\r\n        if (this == object) return true;\r\n        if (object == null || getClass() != object.getClass()) return false;\r\n\r\n        CacheKey na = (CacheKey) object;\r\n        return Objects.equals(this.cacheType, na.cacheType);\r\n    }\r\n\r\n    @Override\r\n    public int hashCode() {\r\n        return Objects.hash(cacheType);\r\n    }\r\n\r\n    @Override\r\n    public String toString() {\r\n        return &quot;CacheKey{&quot; +\r\n                &quot;cacheType=&#39;&quot; + cacheType + &#39;\\&#39;&#39; +\r\n                &#39;}&#39;;\r\n    }\r\n\r\n}\r\n\r\n@SuperBuilder\r\n@Getter\r\n@Setter\r\nclass NetValue extends CacheValue {\r\n    private String entity;\r\n    private String group;\r\n    private String service;\r\n\r\n    @Override\r\n    public boolean equals(Object o) {\r\n        if (this == o) return true;\r\n        if (o == null || getClass() != o.getClass()) return false;\r\n\r\n        NetValue that = (NetValue) o;\r\n        return super.equals(o) &amp;&amp;\r\n                Objects.equals(entity, that.entity) &amp;&amp;\r\n                Objects.equals(group, that.group) &amp;&amp;\r\n                Objects.equals(service, this.service);\r\n    }\r\n\r\n    @Override\r\n    public int hashCode() {\r\n        return Objects.hash(entity, group, service);\r\n    }\r\n\r\n    @Override\r\n    public String toString() {\r\n        return &quot;NetValue{&quot; +\r\n                &quot;entity=&#39;&quot; + entity + &#39;\\&#39;&#39; +\r\n                &quot;, group=&#39;&quot; + group + &#39;\\&#39;&#39; +\r\n                &quot;, service=&quot; + service +\r\n                &#39;}&#39;;\r\n    }\r\n\r\n}\r\n\r\n@SuperBuilder\r\n@Getter\r\n@Setter\r\nclass CacheValue {\r\n    private String cacheType;\r\n\r\n    @Override\r\n    public boolean equals(Object object) {\r\n        if (this == object) return true;\r\n        if (object == null || getClass() != object.getClass()) return false;\r\n\r\n        CacheValue na = (CacheValue) object;\r\n        return Objects.equals(this.cacheType, na.cacheType);\r\n    }\r\n\r\n    @Override\r\n    public int hashCode() {\r\n        return Objects.hash(cacheType);\r\n    }\r\n\r\n    @Override\r\n    public String toString() {\r\n        return &quot;CacheValue{&quot; +\r\n                &quot;cacheType=&#39;&quot; + cacheType + &#39;\\&#39;&#39; +\r\n                &#39;}&#39;;\r\n    }\r\n\r\n}\r\n\r\nclass CacheKeyMarshaller implements BytesReader&lt;CacheKey&gt;, BytesWriter&lt;CacheKey&gt; {\r\n\r\n    public static CacheKeyMarshaller INSTANCE = new CacheKeyMarshaller();\r\n\r\n    private CacheKeyMarshaller() {\r\n    }\r\n\r\n    @Override\r\n    public CacheKey read(Bytes in, CacheKey using) throws IllegalStateException {\r\n        String cacheType = in.readUtf8();\r\n\r\n        CacheType cache = CacheType.valueOf(cacheType);\r\n        if (cache == CacheType.NETTING) {\r\n            return readNetKey(in, using, cacheType);\r\n        } else {\r\n            using = readCacheKey(in, using, cacheType);\r\n        }\r\n\r\n        return using;\r\n    }\r\n\r\n    @Override\r\n    public void write(Bytes out, CacheKey toWrite) {\r\n        CacheType cache = CacheType.valueOf(toWrite.getCacheType());\r\n        if (cache == CacheType.NETTING) {\r\n            writeNetKey(out, (NetKey) toWrite);\r\n        } else {\r\n            writeCacheKey(out, toWrite);\r\n        }\r\n    }\r\n\r\n    private CacheKey readCacheKey(Bytes in, CacheKey using, String cacheType) {\r\n        if (using == null) {\r\n            using = CacheKey.builder().cacheType(cacheType).build();\r\n        } else {\r\n            using.setCacheType(cacheType);\r\n        }\r\n        return using;\r\n\r\n    }\r\n\r\n    private NetKey readNetKey(Bytes in, CacheKey using, String cacheType) {\r\n        String productType = in.readUtf8();\r\n        String dealDate = in.readUtf8();\r\n\r\n        NetKey value;\r\n        if (using == null) {\r\n            value = NetKey.builder().cacheType(cacheType)\r\n                    .productType(productType)\r\n                    .dealDate(dealDate)\r\n                    .build();\r\n        } else {\r\n            value = (NetKey) using;\r\n            value.setCacheType(cacheType);\r\n            value.setProductType(productType);\r\n            value.setDealDate(dealDate);\r\n        }\r\n        return value;\r\n    }\r\n\r\n    private void writeCacheKey(Bytes out, CacheKey toWrite) {\r\n        out.writeUtf8(toWrite.getCacheType());\r\n    }\r\n\r\n    private void writeNetKey(Bytes out, NetKey toWrite) {\r\n        out.writeUtf8(toWrite.getCacheType());\r\n        out.writeUtf8(toWrite.getProductType());\r\n        out.writeUtf8(toWrite.getDealDate());\r\n    }\r\n\r\n}\r\n\r\nclass CacheValueMarshaller implements BytesReader&lt;CacheValue&gt;, BytesWriter&lt;CacheValue&gt; {\r\n\r\n    public static CacheValueMarshaller INSTANCE = new CacheValueMarshaller();\r\n\r\n    private CacheValueMarshaller() {\r\n    }\r\n\r\n    @Override\r\n    public void write(Bytes out, CacheValue toWrite) {\r\n        String cacheType = toWrite.getCacheType();\r\n\r\n        CacheType cache = CacheType.valueOf(cacheType);\r\n        if (cache == CacheType.NETTING) {\r\n            writeNetValue(out, (NetValue) toWrite, cacheType);\r\n        } else {\r\n            writeCacheValue(out, toWrite);\r\n        }\r\n    }\r\n\r\n    @Override\r\n    public CacheValue read(Bytes in, CacheValue using) {\r\n        String cacheType = in.readUtf8();\r\n\r\n        CacheType cache = CacheType.valueOf(cacheType);\r\n        if (cache == CacheType.NETTING) {\r\n            return readNetValue(in, (NetValue) using, cacheType);\r\n        } else {\r\n            return readValueBase(in, using, cacheType);\r\n        }\r\n    }\r\n\r\n    private NetValue readNetValue(Bytes in, NetValue using, String cacheType) {\r\n        if (using == null) {\r\n            using = NetValue.builder().cacheType(cacheType)\r\n                    .entity(in.readUtf8())\r\n                    .group(in.readUtf8())\r\n                    .service(in.readUtf8())\r\n                    .build();\r\n        } else {\r\n            using.setCacheType(cacheType);\r\n            using.setEntity(in.readUtf8());\r\n            using.setGroup(in.readUtf8());\r\n            using.setService(in.readUtf8());\r\n        }\r\n        return using;\r\n    }\r\n\r\n    private CacheValue readValueBase(Bytes in, CacheValue using, String cacheType) {\r\n        if (using == null) {\r\n            using = CacheValue.builder().cacheType(cacheType).build();\r\n        } else {\r\n            using.setCacheType(cacheType);\r\n        }\r\n        return using;\r\n    }\r\n\r\n    private void writeNetValue(Bytes out, NetValue toWrite, String cacheType) {\r\n        out.writeUtf8(cacheType);\r\n        out.writeUtf8(toWrite.getEntity());\r\n        out.writeUtf8(toWrite.getGroup());\r\n        out.writeUtf8(toWrite.getService());\r\n    }\r\n\r\n    private void writeCacheValue(Bytes out, CacheValue toWrite) {\r\n        out.writeUtf8(toWrite.getCacheType());\r\n    }\r\n\r\n}\r\n\r\npublic class Test {\r\n\r\n    public static void main(String[] args) {\r\n        ChronicleMap&lt;CacheKey, CacheValue&gt; map = null;\r\n        try {\r\n            NetKey key = NetKey.builder().cacheType(CacheType.NETTING.name())\r\n                    .productType(&quot;type&quot;)\r\n                    .dealDate(&quot;2023-04-23&quot;)\r\n                    .build();\r\n\r\n            NetValue value = NetValue.builder().cacheType(CacheType.NETTING.name())\r\n                    .entity(&quot;entity&quot;)\r\n                    .group(&quot;group&quot;)\r\n                    .service(&quot;service&quot;)\r\n                    .build();\r\n\r\n            map = ChronicleMap.of(CacheKey.class, CacheValue.class)\r\n                    .name(&quot;Sample-map&quot;)\r\n                    .entries(50)\r\n                    .averageKey(key)\r\n                    .averageValue(value)\r\n                    .keyMarshaller(CacheKeyMarshaller.INSTANCE)\r\n                    .valueMarshaller(CacheValueMarshaller.INSTANCE)\r\n                    .create();\r\n\r\n            map.put(key, value);\r\n            map.forEach((key1, value1) -&gt; System.out.println(key1 + &quot;-&gt;&quot; + value1));\r\n        } finally {\r\n            if (map != null) map.close();\r\n        }\r\n\r\n    }\r\n\r\n}\r\n```","title":"ChronicleMap Custom Key &amp; Value serialisers","body":"<p>I was able to solve this by changing my key &amp; value to Class and using custom serializers.</p>\n<pre><code>@Getter\n@Setter\n@SuperBuilder\nclass NetKey extends CacheKey {\n    private String productType;\n    private String dealDate;\n\n    @Override\n    public boolean equals(Object object) {\n        if (this == object) return true;\n        if (object == null || getClass() != object.getClass()) return false;\n\n        NetKey nk = (NetKey) object;\n        return super.equals(object) &amp;&amp;\n                (isEmpty(this.productType) || Objects.equals(this.productType, nk.productType)) &amp;&amp;\n                Objects.equals(this.dealDate, nk.dealDate);\n    }\n\n    @Override\n    public int hashCode() {\n        return Objects.hash(super.hashCode(), productType, dealDate);\n    }\n\n    @Override\n    public String toString() {\n        return &quot;NetKey{&quot; +\n                super.toString() +\n                &quot;, productType='&quot; + productType + '\\'' +\n                &quot;, dealDate='&quot; + dealDate + '\\'' +\n                '}';\n    }\n\n}\n\n@Setter\n@Getter\n@SuperBuilder\nclass CacheKey {\n    private String cacheType;\n\n    @Override\n    public boolean equals(Object object) {\n        if (this == object) return true;\n        if (object == null || getClass() != object.getClass()) return false;\n\n        CacheKey na = (CacheKey) object;\n        return Objects.equals(this.cacheType, na.cacheType);\n    }\n\n    @Override\n    public int hashCode() {\n        return Objects.hash(cacheType);\n    }\n\n    @Override\n    public String toString() {\n        return &quot;CacheKey{&quot; +\n                &quot;cacheType='&quot; + cacheType + '\\'' +\n                '}';\n    }\n\n}\n\n@SuperBuilder\n@Getter\n@Setter\nclass NetValue extends CacheValue {\n    private String entity;\n    private String group;\n    private String service;\n\n    @Override\n    public boolean equals(Object o) {\n        if (this == o) return true;\n        if (o == null || getClass() != o.getClass()) return false;\n\n        NetValue that = (NetValue) o;\n        return super.equals(o) &amp;&amp;\n                Objects.equals(entity, that.entity) &amp;&amp;\n                Objects.equals(group, that.group) &amp;&amp;\n                Objects.equals(service, this.service);\n    }\n\n    @Override\n    public int hashCode() {\n        return Objects.hash(entity, group, service);\n    }\n\n    @Override\n    public String toString() {\n        return &quot;NetValue{&quot; +\n                &quot;entity='&quot; + entity + '\\'' +\n                &quot;, group='&quot; + group + '\\'' +\n                &quot;, service=&quot; + service +\n                '}';\n    }\n\n}\n\n@SuperBuilder\n@Getter\n@Setter\nclass CacheValue {\n    private String cacheType;\n\n    @Override\n    public boolean equals(Object object) {\n        if (this == object) return true;\n        if (object == null || getClass() != object.getClass()) return false;\n\n        CacheValue na = (CacheValue) object;\n        return Objects.equals(this.cacheType, na.cacheType);\n    }\n\n    @Override\n    public int hashCode() {\n        return Objects.hash(cacheType);\n    }\n\n    @Override\n    public String toString() {\n        return &quot;CacheValue{&quot; +\n                &quot;cacheType='&quot; + cacheType + '\\'' +\n                '}';\n    }\n\n}\n\nclass CacheKeyMarshaller implements BytesReader&lt;CacheKey&gt;, BytesWriter&lt;CacheKey&gt; {\n\n    public static CacheKeyMarshaller INSTANCE = new CacheKeyMarshaller();\n\n    private CacheKeyMarshaller() {\n    }\n\n    @Override\n    public CacheKey read(Bytes in, CacheKey using) throws IllegalStateException {\n        String cacheType = in.readUtf8();\n\n        CacheType cache = CacheType.valueOf(cacheType);\n        if (cache == CacheType.NETTING) {\n            return readNetKey(in, using, cacheType);\n        } else {\n            using = readCacheKey(in, using, cacheType);\n        }\n\n        return using;\n    }\n\n    @Override\n    public void write(Bytes out, CacheKey toWrite) {\n        CacheType cache = CacheType.valueOf(toWrite.getCacheType());\n        if (cache == CacheType.NETTING) {\n            writeNetKey(out, (NetKey) toWrite);\n        } else {\n            writeCacheKey(out, toWrite);\n        }\n    }\n\n    private CacheKey readCacheKey(Bytes in, CacheKey using, String cacheType) {\n        if (using == null) {\n            using = CacheKey.builder().cacheType(cacheType).build();\n        } else {\n            using.setCacheType(cacheType);\n        }\n        return using;\n\n    }\n\n    private NetKey readNetKey(Bytes in, CacheKey using, String cacheType) {\n        String productType = in.readUtf8();\n        String dealDate = in.readUtf8();\n\n        NetKey value;\n        if (using == null) {\n            value = NetKey.builder().cacheType(cacheType)\n                    .productType(productType)\n                    .dealDate(dealDate)\n                    .build();\n        } else {\n            value = (NetKey) using;\n            value.setCacheType(cacheType);\n            value.setProductType(productType);\n            value.setDealDate(dealDate);\n        }\n        return value;\n    }\n\n    private void writeCacheKey(Bytes out, CacheKey toWrite) {\n        out.writeUtf8(toWrite.getCacheType());\n    }\n\n    private void writeNetKey(Bytes out, NetKey toWrite) {\n        out.writeUtf8(toWrite.getCacheType());\n        out.writeUtf8(toWrite.getProductType());\n        out.writeUtf8(toWrite.getDealDate());\n    }\n\n}\n\nclass CacheValueMarshaller implements BytesReader&lt;CacheValue&gt;, BytesWriter&lt;CacheValue&gt; {\n\n    public static CacheValueMarshaller INSTANCE = new CacheValueMarshaller();\n\n    private CacheValueMarshaller() {\n    }\n\n    @Override\n    public void write(Bytes out, CacheValue toWrite) {\n        String cacheType = toWrite.getCacheType();\n\n        CacheType cache = CacheType.valueOf(cacheType);\n        if (cache == CacheType.NETTING) {\n            writeNetValue(out, (NetValue) toWrite, cacheType);\n        } else {\n            writeCacheValue(out, toWrite);\n        }\n    }\n\n    @Override\n    public CacheValue read(Bytes in, CacheValue using) {\n        String cacheType = in.readUtf8();\n\n        CacheType cache = CacheType.valueOf(cacheType);\n        if (cache == CacheType.NETTING) {\n            return readNetValue(in, (NetValue) using, cacheType);\n        } else {\n            return readValueBase(in, using, cacheType);\n        }\n    }\n\n    private NetValue readNetValue(Bytes in, NetValue using, String cacheType) {\n        if (using == null) {\n            using = NetValue.builder().cacheType(cacheType)\n                    .entity(in.readUtf8())\n                    .group(in.readUtf8())\n                    .service(in.readUtf8())\n                    .build();\n        } else {\n            using.setCacheType(cacheType);\n            using.setEntity(in.readUtf8());\n            using.setGroup(in.readUtf8());\n            using.setService(in.readUtf8());\n        }\n        return using;\n    }\n\n    private CacheValue readValueBase(Bytes in, CacheValue using, String cacheType) {\n        if (using == null) {\n            using = CacheValue.builder().cacheType(cacheType).build();\n        } else {\n            using.setCacheType(cacheType);\n        }\n        return using;\n    }\n\n    private void writeNetValue(Bytes out, NetValue toWrite, String cacheType) {\n        out.writeUtf8(cacheType);\n        out.writeUtf8(toWrite.getEntity());\n        out.writeUtf8(toWrite.getGroup());\n        out.writeUtf8(toWrite.getService());\n    }\n\n    private void writeCacheValue(Bytes out, CacheValue toWrite) {\n        out.writeUtf8(toWrite.getCacheType());\n    }\n\n}\n\npublic class Test {\n\n    public static void main(String[] args) {\n        ChronicleMap&lt;CacheKey, CacheValue&gt; map = null;\n        try {\n            NetKey key = NetKey.builder().cacheType(CacheType.NETTING.name())\n                    .productType(&quot;type&quot;)\n                    .dealDate(&quot;2023-04-23&quot;)\n                    .build();\n\n            NetValue value = NetValue.builder().cacheType(CacheType.NETTING.name())\n                    .entity(&quot;entity&quot;)\n                    .group(&quot;group&quot;)\n                    .service(&quot;service&quot;)\n                    .build();\n\n            map = ChronicleMap.of(CacheKey.class, CacheValue.class)\n                    .name(&quot;Sample-map&quot;)\n                    .entries(50)\n                    .averageKey(key)\n                    .averageValue(value)\n                    .keyMarshaller(CacheKeyMarshaller.INSTANCE)\n                    .valueMarshaller(CacheValueMarshaller.INSTANCE)\n                    .create();\n\n            map.put(key, value);\n            map.forEach((key1, value1) -&gt; System.out.println(key1 + &quot;-&gt;&quot; + value1));\n        } finally {\n            if (map != null) map.close();\n        }\n\n    }\n\n}\n</code></pre>\n"}],"owner":{"account_id":2864880,"reputation":99,"user_id":2459396,"accept_rate":29,"display_name":"user2459396"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":55,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1697816159,"creation_date":1696455287,"question_id":77233120,"body_markdown":"Hello ChronicleMap Users,\r\n\r\nI am trying to use ChronicleMap with custom Key and Value. The Key is composed of various inputs and Value is the result of a database lookup. I would like to store this in memory to speed up subsequent requests. However, I am struggling to decide on what should be the approach for Key &amp; Value serializers. Here are my Key and Value with the base Key being CacheKey and an implementation being NetKey; I have few different keys to be used. I have tried few options but can&#39;t seem to seiralize/deserialize my key/value.\r\n\r\n```\r\npublic interface CacheKey extends Serializable {\r\n    byte[] getKey();\r\n    void setKey(Object object);\r\n}\r\n\r\npublic interface CacheValue extends Serializable {\r\n    byte[] getValue();\r\n    void setValue(Object object);\r\n}\r\n\r\n@Builder\r\npublic class NetKey implements CacheKey {\r\n\r\n    private String name;\r\n    private String productType;\r\n    private String dealDate;\r\n    \r\n    @Override\r\n    public byte[] getKey() {\r\n        return Util.writeToByte(this);\r\n    }\r\n\r\n    @Override\r\n    public void setKey(Object object) {\r\n        if (object instanceof NetKey) {\r\n            NetKey o = (NetKey) object;\r\n            this.name = o.name;\r\n            this.productType = o.productType;\r\n            this.dealDate = o.dealDate;\r\n        }\r\n    }\r\n\r\n    //... override equals and hashCode\r\n}\r\n\r\n@Builder\r\npublic class NetValue implements CacheValue {\r\n\r\n    private String entity;\r\n    private String group;\r\n    private Service service;\r\n\r\n    @Override\r\n    public byte[] getValue() {\r\n        return Util.writeToByte(this);\r\n    }\r\n\r\n    @Override\r\n    public void setValue(Object object) {\r\n        if (object instanceof NetValue) {\r\n            NetValue o = (NetValue) object;\r\n            this.entity = o.entity;\r\n            this.group = o.group;\r\n            this.service = o.service;\r\n        }\r\n    }\r\n \r\n    // override equals and hashCode\r\n}\r\n\r\npublic class MyKeySerializer implements BytesReader&lt;CacheKey&gt;, BytesWriter&lt;CacheKey&gt; {\r\n\r\n    private static MyKeySerializer INSTANCE = new MyKeySerializer();\r\n\r\n    public static MyKeySerializer getInstance() { return INSTANCE; }\r\n\r\n    private MyKeySerializer() {}\r\n\r\n    @NotNull\r\n    @Override\r\n    public CacheKey read(Bytes in, @Nullable CacheKey using) {\r\n        if (using == null) {\r\n            using = new CacheKey() {\r\n                @Override\r\n                public CacheKey getKey() {\r\n                    return this;\r\n                }\r\n\r\n                @Override\r\n                public void setKey(CacheKey object) {\r\n\r\n                }\r\n            };\r\n        }\r\n\r\n        int len = in.readInt();\r\n        Object object = Util.readFromByte(in.toByteArray());\r\n        using.setKey(object == null ? null : (CacheKey) object);\r\n        return using;\r\n    }\r\n\r\n    @Override\r\n    public void write(Bytes out, @NotNull CacheKey toWrite) {\r\n        byte[] content = Util.writeToByte(toWrite.getKey());\r\n        out.writeInt(content.length);\r\n        out.write(content);\r\n    }\r\n\r\n}\r\n\r\npublic class MyValueSerializer implements BytesReader&lt;CacheValue&gt;, BytesWriter&lt;CacheValue&gt; {\r\n\r\n    private static MyValueSerializer INSTANCE = new MyValueSerializer();\r\n\r\n    public static MyValueSerializer getInstance() { return INSTANCE; }\r\n\r\n    private MyValueSerializer() {}\r\n\r\n    @NotNull\r\n    @Override\r\n    public CacheValue read(Bytes in, @Nullable CacheValue using) {\r\n        // TODO need help to implement this method\r\n    }\r\n\r\n    @Override\r\n    public void write(Bytes out, @NotNull CacheValue toWrite) {\r\n        // TODO need help to implement this method\r\n    }\r\n\r\n}\r\n\r\npublic class Test {\r\n    \r\n    public static void main(String[] args) {\r\n        NetKey netKey = ...;\r\n        NetValue netValue = ...;\r\n\r\n        ChronicleMap&lt;CacheKey, CacheValue&gt; inMemoryMap = ChronicleMap.of(CacheKey.class, CacheKey.class)\r\n           .name(&quot;sample-map&quot;)\r\n           .entries(50)\r\n           .averageKey(netKey)\r\n           .averageValue(netValue)\r\n           .keyMarshallers(MyKeySerializer.class)\r\n           .valueMarshallers(MyValueSerializer.class)\r\n           .create();\r\n        inMemoryMap.put(netKey, netValue);\r\n    }\r\n}\r\n```\r\n\r\n**Update 1**\r\n\r\nError I am seeing is StackOverflow\r\n```\r\nException in thread &quot;main&quot; java.lang.StackOverflowError\r\n\tat java.base/java.lang.RuntimeException.&lt;init&gt;(RuntimeException.java:52)\r\n\tat java.base/java.lang.IllegalArgumentException.&lt;init&gt;(IllegalArgumentException.java:40)\r\n\tat java.base/java.util.regex.PatternSyntaxException.&lt;init&gt;(PatternSyntaxException.java:58)\r\n\tat java.base/java.util.regex.Pattern.error(Pattern.java:2028)\r\n\tat java.base/java.util.regex.Pattern.&lt;init&gt;(Pattern.java:1432)\r\n\tat java.base/java.util.regex.Pattern.compile(Pattern.java:1069)\r\n\tat java.base/java.util.regex.Pattern.matches(Pattern.java:1174)\r\n\tat java.base/java.lang.String.matches(String.java:2839)\r\n\tat net.openhft.chronicle.values.CodeTemplate.lambda$null$20(CodeTemplate.java:206)\r\n\tat java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:178)\r\n\tat java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179)\r\n\tat java.base/java.util.TreeMap$KeySpliterator.tryAdvance(TreeMap.java:3088)\r\n\tat java.base/java.util.stream.ReferencePipeline.forEachWithCancel(ReferencePipeline.java:129)\r\n\tat java.base/java.util.stream.AbstractPipeline.copyIntoWithCancel(AbstractPipeline.java:527)\r\n\tat java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:513)\r\n\tat java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499)\r\n\tat java.base/java.util.stream.FindOps$FindOp.evaluateSequential(FindOps.java:150)\r\n\tat java.base/java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)\r\n\tat java.base/java.util.stream.ReferencePipeline.findFirst(ReferencePipeline.java:647)\r\n\tat net.openhft.chronicle.values.CodeTemplate.lambda$methodsAndTemplatesByField$21(CodeTemplate.java:207)\r\n\tat java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197)\r\n\tat java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179)\r\n\tat java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179)\r\n\tat java.base/java.util.Spliterators$ArraySpliterator.forEachRemaining(Spliterators.java:992)\r\n\tat java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509)\r\n\tat java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499)\r\n\tat java.base/java.util.stream.ReduceOps$ReduceOp.evaluateSequential(ReduceOps.java:921)\r\n\tat java.base/java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)\r\n\tat java.base/java.util.stream.ReferencePipeline.collect(ReferencePipeline.java:682)\r\n\tat net.openhft.chronicle.values.CodeTemplate.methodsAndTemplatesByField(CodeTemplate.java:214)\r\n\tat net.openhft.chronicle.values.CodeTemplate.createValueModel(CodeTemplate.java:104)\r\n\tat net.openhft.chronicle.values.ValueModel$1.computeValue(ValueModel.java:46)\r\n\tat java.base/java.lang.ClassValue.getFromHashMap(ClassValue.java:228)\r\n\tat java.base/java.lang.ClassValue.getFromBackup(ClassValue.java:210)\r\n```","title":"ChronicleMap Custom Key &amp; Value serialisers","body":"<p>Hello ChronicleMap Users,</p>\n<p>I am trying to use ChronicleMap with custom Key and Value. The Key is composed of various inputs and Value is the result of a database lookup. I would like to store this in memory to speed up subsequent requests. However, I am struggling to decide on what should be the approach for Key &amp; Value serializers. Here are my Key and Value with the base Key being CacheKey and an implementation being NetKey; I have few different keys to be used. I have tried few options but can't seem to seiralize/deserialize my key/value.</p>\n<pre><code>public interface CacheKey extends Serializable {\n    byte[] getKey();\n    void setKey(Object object);\n}\n\npublic interface CacheValue extends Serializable {\n    byte[] getValue();\n    void setValue(Object object);\n}\n\n@Builder\npublic class NetKey implements CacheKey {\n\n    private String name;\n    private String productType;\n    private String dealDate;\n    \n    @Override\n    public byte[] getKey() {\n        return Util.writeToByte(this);\n    }\n\n    @Override\n    public void setKey(Object object) {\n        if (object instanceof NetKey) {\n            NetKey o = (NetKey) object;\n            this.name = o.name;\n            this.productType = o.productType;\n            this.dealDate = o.dealDate;\n        }\n    }\n\n    //... override equals and hashCode\n}\n\n@Builder\npublic class NetValue implements CacheValue {\n\n    private String entity;\n    private String group;\n    private Service service;\n\n    @Override\n    public byte[] getValue() {\n        return Util.writeToByte(this);\n    }\n\n    @Override\n    public void setValue(Object object) {\n        if (object instanceof NetValue) {\n            NetValue o = (NetValue) object;\n            this.entity = o.entity;\n            this.group = o.group;\n            this.service = o.service;\n        }\n    }\n \n    // override equals and hashCode\n}\n\npublic class MyKeySerializer implements BytesReader&lt;CacheKey&gt;, BytesWriter&lt;CacheKey&gt; {\n\n    private static MyKeySerializer INSTANCE = new MyKeySerializer();\n\n    public static MyKeySerializer getInstance() { return INSTANCE; }\n\n    private MyKeySerializer() {}\n\n    @NotNull\n    @Override\n    public CacheKey read(Bytes in, @Nullable CacheKey using) {\n        if (using == null) {\n            using = new CacheKey() {\n                @Override\n                public CacheKey getKey() {\n                    return this;\n                }\n\n                @Override\n                public void setKey(CacheKey object) {\n\n                }\n            };\n        }\n\n        int len = in.readInt();\n        Object object = Util.readFromByte(in.toByteArray());\n        using.setKey(object == null ? null : (CacheKey) object);\n        return using;\n    }\n\n    @Override\n    public void write(Bytes out, @NotNull CacheKey toWrite) {\n        byte[] content = Util.writeToByte(toWrite.getKey());\n        out.writeInt(content.length);\n        out.write(content);\n    }\n\n}\n\npublic class MyValueSerializer implements BytesReader&lt;CacheValue&gt;, BytesWriter&lt;CacheValue&gt; {\n\n    private static MyValueSerializer INSTANCE = new MyValueSerializer();\n\n    public static MyValueSerializer getInstance() { return INSTANCE; }\n\n    private MyValueSerializer() {}\n\n    @NotNull\n    @Override\n    public CacheValue read(Bytes in, @Nullable CacheValue using) {\n        // TODO need help to implement this method\n    }\n\n    @Override\n    public void write(Bytes out, @NotNull CacheValue toWrite) {\n        // TODO need help to implement this method\n    }\n\n}\n\npublic class Test {\n    \n    public static void main(String[] args) {\n        NetKey netKey = ...;\n        NetValue netValue = ...;\n\n        ChronicleMap&lt;CacheKey, CacheValue&gt; inMemoryMap = ChronicleMap.of(CacheKey.class, CacheKey.class)\n           .name(&quot;sample-map&quot;)\n           .entries(50)\n           .averageKey(netKey)\n           .averageValue(netValue)\n           .keyMarshallers(MyKeySerializer.class)\n           .valueMarshallers(MyValueSerializer.class)\n           .create();\n        inMemoryMap.put(netKey, netValue);\n    }\n}\n</code></pre>\n<p><strong>Update 1</strong></p>\n<p>Error I am seeing is StackOverflow</p>\n<pre><code>Exception in thread &quot;main&quot; java.lang.StackOverflowError\n    at java.base/java.lang.RuntimeException.&lt;init&gt;(RuntimeException.java:52)\n    at java.base/java.lang.IllegalArgumentException.&lt;init&gt;(IllegalArgumentException.java:40)\n    at java.base/java.util.regex.PatternSyntaxException.&lt;init&gt;(PatternSyntaxException.java:58)\n    at java.base/java.util.regex.Pattern.error(Pattern.java:2028)\n    at java.base/java.util.regex.Pattern.&lt;init&gt;(Pattern.java:1432)\n    at java.base/java.util.regex.Pattern.compile(Pattern.java:1069)\n    at java.base/java.util.regex.Pattern.matches(Pattern.java:1174)\n    at java.base/java.lang.String.matches(String.java:2839)\n    at net.openhft.chronicle.values.CodeTemplate.lambda$null$20(CodeTemplate.java:206)\n    at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:178)\n    at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179)\n    at java.base/java.util.TreeMap$KeySpliterator.tryAdvance(TreeMap.java:3088)\n    at java.base/java.util.stream.ReferencePipeline.forEachWithCancel(ReferencePipeline.java:129)\n    at java.base/java.util.stream.AbstractPipeline.copyIntoWithCancel(AbstractPipeline.java:527)\n    at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:513)\n    at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499)\n    at java.base/java.util.stream.FindOps$FindOp.evaluateSequential(FindOps.java:150)\n    at java.base/java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)\n    at java.base/java.util.stream.ReferencePipeline.findFirst(ReferencePipeline.java:647)\n    at net.openhft.chronicle.values.CodeTemplate.lambda$methodsAndTemplatesByField$21(CodeTemplate.java:207)\n    at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197)\n    at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179)\n    at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179)\n    at java.base/java.util.Spliterators$ArraySpliterator.forEachRemaining(Spliterators.java:992)\n    at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509)\n    at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499)\n    at java.base/java.util.stream.ReduceOps$ReduceOp.evaluateSequential(ReduceOps.java:921)\n    at java.base/java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)\n    at java.base/java.util.stream.ReferencePipeline.collect(ReferencePipeline.java:682)\n    at net.openhft.chronicle.values.CodeTemplate.methodsAndTemplatesByField(CodeTemplate.java:214)\n    at net.openhft.chronicle.values.CodeTemplate.createValueModel(CodeTemplate.java:104)\n    at net.openhft.chronicle.values.ValueModel$1.computeValue(ValueModel.java:46)\n    at java.base/java.lang.ClassValue.getFromHashMap(ClassValue.java:228)\n    at java.base/java.lang.ClassValue.getFromBackup(ClassValue.java:210)\n</code></pre>\n"},{"tags":["java","mongodb","spring-boot","spring-data"],"comments":[{"owner":{"account_id":26391128,"reputation":4716,"user_id":20042973,"display_name":"user20042973"},"score":0,"creation_date":1697822278,"post_id":77332071,"comment_id":136332472,"body_markdown":"I&#39;m a little confused by the premise of the question. Deletion of documents via a TTL index is indeed done _per document_. From [the documentation](https://www.mongodb.com/docs/manual/core/index-ttl/#expiration-of-data): &quot;_TTL indexes expire documents after the specified number of seconds has passed since the indexed field value; i.e. the expiration threshold is the indexed field value plus the specified number of seconds._&quot; So I think the solution to your problem is to set the appropriate value for each document? If not can you further clarify on what you&#39;re trying to do?","body":"I&#39;m a little confused by the premise of the question. Deletion of documents via a TTL index is indeed done <i>per document</i>. From <a href=\"https://www.mongodb.com/docs/manual/core/index-ttl/#expiration-of-data\" rel=\"nofollow noreferrer\">the documentation</a>: &quot;<i>TTL indexes expire documents after the specified number of seconds has passed since the indexed field value; i.e. the expiration threshold is the indexed field value plus the specified number of seconds.</i>&quot; So I think the solution to your problem is to set the appropriate value for each document? If not can you further clarify on what you&#39;re trying to do?"}],"owner":{"account_id":14429263,"reputation":31,"user_id":10423066,"display_name":"Alex.B"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":31,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1697815143,"creation_date":1697815143,"question_id":77332071,"body_markdown":"I know that with Spring Data for MongoDB you can set a document to be deleted:\r\n\r\n```java\r\n    @Indexed(name = &quot;ttl&quot;, expireAfterSeconds = 12)\r\n    private LocalDateTime expireAfterSeconds;\r\n```\r\n\r\nor\r\n\r\n```java\r\n    @Indexed(name = &quot;ttl&quot;, expireAfter = &quot;12s&quot;)\r\n    private LocalDateTime expireAfterSeconds;\r\n```\r\n\r\nThose documents will be deleted after the time specified in the annotation, it will be the same for every document that gets created.\r\n\r\nI would like to understand if it&#39;s possible to still create a TTL index but the value can be calculated for each document. (Like in DynamoDB you&#39;d pass an epoch time in seconds)\r\n\r\nSomething like\r\n\r\n```java\r\n@Document(&quot;groceryitems&quot;)\r\npublic class GroceryItem {\r\n\r\n    @Id\r\n    private String id;\r\n\r\n    @Indexed(name = &quot;deleteThisRecordAfter&quot;, expireAfter = &quot;@checkActualValue&quot;)\r\n    private LocalDateTime expireAfter;\r\n\r\n    // or\r\n    @Indexed(name = &quot;deleteThisRecordAfter&quot;, ttlIndex = true)\r\n    /*\r\n    * ttlIndex = true doesn&#39;t exist,\r\n    * but I would like to only have a TTL index and then provide a value for the field\r\n    * that mongod will use to determine when to delete the document.\r\n     */\r\n    private LocalDateTime expireAfter;\r\n\r\n    public GroceryItem(String id, LocalDateTime expireAfter) {\r\n        super();\r\n        this.id = id;\r\n        this.expireAfter = expireAfter;\r\n    }\r\n}\r\n```\r\n\r\n```java\r\n    public persist(Item item) {\r\n        repository.save(new GroceryItem(item.getId(), getCorrectTTL(item.getExpirationDate(), item.getCategory())));\r\n    }\r\n```","title":"Different TTL per document using Spring Data MongoDB @Indexed annotation","body":"<p>I know that with Spring Data for MongoDB you can set a document to be deleted:</p>\n<pre class=\"lang-java prettyprint-override\"><code>    @Indexed(name = &quot;ttl&quot;, expireAfterSeconds = 12)\n    private LocalDateTime expireAfterSeconds;\n</code></pre>\n<p>or</p>\n<pre class=\"lang-java prettyprint-override\"><code>    @Indexed(name = &quot;ttl&quot;, expireAfter = &quot;12s&quot;)\n    private LocalDateTime expireAfterSeconds;\n</code></pre>\n<p>Those documents will be deleted after the time specified in the annotation, it will be the same for every document that gets created.</p>\n<p>I would like to understand if it's possible to still create a TTL index but the value can be calculated for each document. (Like in DynamoDB you'd pass an epoch time in seconds)</p>\n<p>Something like</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Document(&quot;groceryitems&quot;)\npublic class GroceryItem {\n\n    @Id\n    private String id;\n\n    @Indexed(name = &quot;deleteThisRecordAfter&quot;, expireAfter = &quot;@checkActualValue&quot;)\n    private LocalDateTime expireAfter;\n\n    // or\n    @Indexed(name = &quot;deleteThisRecordAfter&quot;, ttlIndex = true)\n    /*\n    * ttlIndex = true doesn't exist,\n    * but I would like to only have a TTL index and then provide a value for the field\n    * that mongod will use to determine when to delete the document.\n     */\n    private LocalDateTime expireAfter;\n\n    public GroceryItem(String id, LocalDateTime expireAfter) {\n        super();\n        this.id = id;\n        this.expireAfter = expireAfter;\n    }\n}\n</code></pre>\n<pre class=\"lang-java prettyprint-override\"><code>    public persist(Item item) {\n        repository.save(new GroceryItem(item.getId(), getCorrectTTL(item.getExpirationDate(), item.getCategory())));\n    }\n</code></pre>\n"},{"tags":["java","database","firebase","firebase-realtime-database"],"comments":[{"owner":{"account_id":6819231,"reputation":132841,"user_id":5246885,"accept_rate":78,"display_name":"Alex Mamo"},"score":0,"creation_date":1675092014,"post_id":75235566,"comment_id":132848602,"body_markdown":"I&#39;m not sure I understand.\nWhat exactly in this code doesn&#39;t work the way you expect?\nTell us what is wrong with shared code. Do you have any errors?","body":"I&#39;m not sure I understand. What exactly in this code doesn&#39;t work the way you expect? Tell us what is wrong with shared code. Do you have any errors?"}],"answers":[{"tags":[],"owner":{"account_id":9717916,"reputation":40,"user_id":7207607,"display_name":"Ram Sai Meghnadh"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1674661156,"creation_date":1674661156,"answer_id":75236309,"question_id":75235566,"body_markdown":"**It seems you might be using set()**  **function to update data in firebase.** \r\n\r\n*( in your case setValue(), I&#39;m not sure if it is Firebase function or user defined function , Firebase uses set() method in almost in every SDK, not sure about Java SDK for Firebase )*\r\n\r\nPlease note that set() will **replace the existing value**, or create a new key if there isn&#39;t any. \r\n\r\n\r\n\r\n&gt; **Use update() function instead of set()**\r\n\r\n\r\n&gt; **Ways to Save Data**\r\n&gt; \r\n&gt; **set**\t- Write or replace data to a defined path, like messages/users/&lt;username&gt;\r\n&gt; \r\n&gt; **update**\t- Update some of the keys for a defined path without replacing all of the data\r\n&gt; \r\n&gt; **push** - Add to a list of data in the database. Every time you push a new node onto a list, your database generates a unique key, like\r\n&gt; messages/users/&lt;unique-user-id&gt;/&lt;username&gt;\r\n&gt; \r\n&gt; **transaction**\t- Use transactions when working with complex data that could be corrupted by concurrent updates\r\n\r\nrefer the docs [here][1]\r\n\r\n\r\n  [1]: https://firebase.google.com/docs/database/admin/save-data\r\n\r\n","title":"How do i create a key with FirebaseDatabase","body":"<p><strong>It seems you might be using set()</strong>  <strong>function to update data in firebase.</strong></p>\n<p><em>( in your case setValue(), I'm not sure if it is Firebase function or user defined function , Firebase uses set() method in almost in every SDK, not sure about Java SDK for Firebase )</em></p>\n<p>Please note that set() will <strong>replace the existing value</strong>, or create a new key if there isn't any.</p>\n<blockquote>\n<p><strong>Use update() function instead of set()</strong></p>\n</blockquote>\n<blockquote>\n<p><strong>Ways to Save Data</strong></p>\n<p><strong>set</strong>   - Write or replace data to a defined path, like messages/users/</p>\n<p><strong>update</strong>    - Update some of the keys for a defined path without replacing all of the data</p>\n<p><strong>push</strong> - Add to a list of data in the database. Every time you push a new node onto a list, your database generates a unique key, like\nmessages/users//</p>\n<p><strong>transaction</strong>   - Use transactions when working with complex data that could be corrupted by concurrent updates</p>\n</blockquote>\n<p>refer the docs <a href=\"https://firebase.google.com/docs/database/admin/save-data\" rel=\"nofollow noreferrer\">here</a></p>\n"}],"owner":{"account_id":25774232,"reputation":1,"user_id":20382242,"display_name":"Apfelsaft147"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":43,"favorite_count":0,"down_vote_count":2,"up_vote_count":0,"answer_count":1,"score":-2,"last_activity_date":1697814909,"creation_date":1674657631,"question_id":75235566,"body_markdown":"How can I program a **key** in my FirebaseDatabase that is created by the **userName**. **wText** should then be the **text: &quot;&quot;** Value.\r\n\r\nI try to create a key but when i run my app it removes all values in my database\r\n\r\nThe Code:\r\n\r\n\r\n\r\n\r\n`\r\n\r\n                // getting text from our edittext fields.\r\n                String nameValue = userName.getText().toString();\r\n                String textValue = wText.getText().toString();\r\n\r\n                // below line is for checking whether the\r\n                // edittext fields are empty or not.\r\n                if (nameValue.isEmpty() &amp;&amp; textValue.isEmpty()) {\r\n                    // if the text fields are empty\r\n                    // then show the below message.\r\n                    Toast.makeText(AddTextActivity.this, &quot;Please add some data.&quot;, Toast.LENGTH_SHORT).show();\r\n                    return;\r\n                } else {\r\n                    // else call the method to add\r\n                    // data to our database.\r\n                    addDatatoFirebase(nameValue, textValue);\r\n                    finish();\r\n                }\r\n            }\r\n        });\r\n\r\n    }\r\n\r\n        private void addDatatoFirebase(String name, String wText) {\r\n            // below 3 lines of code is used to set\r\n            // data in our object class.\r\n            Messages.setuserName(name);\r\n            Messages.setText(wText);\r\n\r\n            // we are use add value event listener method\r\n            // which is called with database reference.\r\n            myRef.addValueEventListener(new ValueEventListener() {\r\n                @Override\r\n                public void onDataChange(@NonNull DataSnapshot snapshot) {\r\n                    // inside the method of on Data change we are setting\r\n                    // our object class to our database reference.\r\n                    // data base reference will sends data to firebase.\r\n                    myRef.setValue(text);\r\n\r\n                    // after adding this data we are showing toast message.\r\n                    Toast.makeText(AddTextActivity.this, &quot;data added&quot;, Toast.LENGTH_SHORT).show();\r\n                }\r\n\r\n                @Override\r\n                public void onCancelled(@NonNull DatabaseError error) {\r\n                    // if the data is not added or it is cancelled then\r\n                    // we are displaying a failure toast message.\r\n                    Toast.makeText(AddTextActivity.this, &quot;Fail to add data&quot; + error, Toast.LENGTH_SHORT).show();\r\n                }\r\n            }); `","title":"How do i create a key with FirebaseDatabase","body":"<p>How can I program a <strong>key</strong> in my FirebaseDatabase that is created by the <strong>userName</strong>. <strong>wText</strong> should then be the <strong>text: &quot;&quot;</strong> Value.</p>\n<p>I try to create a key but when i run my app it removes all values in my database</p>\n<p>The Code:</p>\n<p>`</p>\n<pre><code>            // getting text from our edittext fields.\n            String nameValue = userName.getText().toString();\n            String textValue = wText.getText().toString();\n\n            // below line is for checking whether the\n            // edittext fields are empty or not.\n            if (nameValue.isEmpty() &amp;&amp; textValue.isEmpty()) {\n                // if the text fields are empty\n                // then show the below message.\n                Toast.makeText(AddTextActivity.this, &quot;Please add some data.&quot;, Toast.LENGTH_SHORT).show();\n                return;\n            } else {\n                // else call the method to add\n                // data to our database.\n                addDatatoFirebase(nameValue, textValue);\n                finish();\n            }\n        }\n    });\n\n}\n\n    private void addDatatoFirebase(String name, String wText) {\n        // below 3 lines of code is used to set\n        // data in our object class.\n        Messages.setuserName(name);\n        Messages.setText(wText);\n\n        // we are use add value event listener method\n        // which is called with database reference.\n        myRef.addValueEventListener(new ValueEventListener() {\n            @Override\n            public void onDataChange(@NonNull DataSnapshot snapshot) {\n                // inside the method of on Data change we are setting\n                // our object class to our database reference.\n                // data base reference will sends data to firebase.\n                myRef.setValue(text);\n\n                // after adding this data we are showing toast message.\n                Toast.makeText(AddTextActivity.this, &quot;data added&quot;, Toast.LENGTH_SHORT).show();\n            }\n\n            @Override\n            public void onCancelled(@NonNull DatabaseError error) {\n                // if the data is not added or it is cancelled then\n                // we are displaying a failure toast message.\n                Toast.makeText(AddTextActivity.this, &quot;Fail to add data&quot; + error, Toast.LENGTH_SHORT).show();\n            }\n        }); `\n</code></pre>\n"},{"tags":["java","spring","spring-boot","soap","jboss"],"owner":{"account_id":13165,"reputation":7004,"user_id":26270,"accept_rate":38,"display_name":"user26270"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":38,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1697814738,"creation_date":1697221551,"question_id":77289952,"body_markdown":"I&#39;m trying to modernize/convert an old SOAP web service to work with Spring 5 and Spring Boot 2.7, and eventually deploy to jboss 7. I&#39;ve finally gotten through all the Spring Context errors (not finding beans to autoconfigure, etc.) so it will deploy successfully. But when I try to hit the url, it returns a 404. I haven&#39;t worked with SOAP/wsdl in a long time so I think I&#39;m missing a mapping piece.  \r\n\r\nThe url I&#39;m using is `http://localhost:8080/PrintQueueDetailService`\r\n\r\nI was trying to re-use as much as possible, so I was told that I could re-use the existing class which had the `@WebService` and `@SOAPBinding` : \r\n\r\n    @WebService(targetNamespace = &quot;http://www.mycompany.com/pdfrm/PrintQueDetail&quot;, name = &quot;PrintQueDetailWSService&quot;)\r\n    @SOAPBinding(parameterStyle = ParameterStyle.BARE)\r\n    @Service\r\n    public class PrintQueueDtlServiceImpl implements PrintQueDetailWSService {\r\n        ....\r\n    }\r\n\r\nAdditional config, which I found I was supposed to add to &#39;wire&#39; together the old code and new SpringBoot WS pieces, and which would do some magic servlet mapping behind the scenes:\r\n\r\n    @Configuration\r\n    public class WebServiceConfig extends SpringBootServletInitializer {\r\n    \r\n        @Override\r\n        protected SpringApplicationBuilder configure(SpringApplicationBuilder application) {\r\n            return application.sources(PrintQueueApp.class);\r\n        }\r\n    \r\n        @Bean\r\n        public SimpleJaxWsServiceExporter simpleJaxWsServiceExporter() {\r\n            SimpleJaxWsServiceExporter exporter = new SimpleJaxWsServiceExporter();\r\n            exporter.setBaseAddress(&quot;/PrintQueueDetailService&quot;);\r\n            return exporter;\r\n        }\r\n    \r\n    }\r\n\r\nMore context: This is a multi-module maven project. 1 submodule is db/repos/services, 1 submodule is the SOAP interface with wsdl, where the cxf generation happens. And then the 3rd is the &#39;main&#39; module, which has the main PrintQueueDtlServiceImpl that handles the SOAP calls.  \r\n\r\nThis is being deployed to jboss 7. I&#39;m just running and testing locally with some jboss/wildfly server inside IntelliJ. I noticed there is also this piece, within /webapp/WEB-CONFIG/jboss-web.xml:\r\n\r\n    &lt;jboss-web&gt;\r\n        &lt;context-root&gt;/PrintQueueDetailService&lt;/context-root&gt;\r\n    &lt;/jboss-web&gt;\r\n\r\nI&#39;m still not clear on if or how the /webapp/WEB-INF is packaged under the &#39;new&#39; spring boot. I&#39;m packaging it as a .war in maven.","title":"how to configure the url of an old @SOAPBinding @Webservice to work with spring boot 2.7 and deploy to jboss?","body":"<p>I'm trying to modernize/convert an old SOAP web service to work with Spring 5 and Spring Boot 2.7, and eventually deploy to jboss 7. I've finally gotten through all the Spring Context errors (not finding beans to autoconfigure, etc.) so it will deploy successfully. But when I try to hit the url, it returns a 404. I haven't worked with SOAP/wsdl in a long time so I think I'm missing a mapping piece.</p>\n<p>The url I'm using is <code>http://localhost:8080/PrintQueueDetailService</code></p>\n<p>I was trying to re-use as much as possible, so I was told that I could re-use the existing class which had the <code>@WebService</code> and <code>@SOAPBinding</code> :</p>\n<pre><code>@WebService(targetNamespace = &quot;http://www.mycompany.com/pdfrm/PrintQueDetail&quot;, name = &quot;PrintQueDetailWSService&quot;)\n@SOAPBinding(parameterStyle = ParameterStyle.BARE)\n@Service\npublic class PrintQueueDtlServiceImpl implements PrintQueDetailWSService {\n    ....\n}\n</code></pre>\n<p>Additional config, which I found I was supposed to add to 'wire' together the old code and new SpringBoot WS pieces, and which would do some magic servlet mapping behind the scenes:</p>\n<pre><code>@Configuration\npublic class WebServiceConfig extends SpringBootServletInitializer {\n\n    @Override\n    protected SpringApplicationBuilder configure(SpringApplicationBuilder application) {\n        return application.sources(PrintQueueApp.class);\n    }\n\n    @Bean\n    public SimpleJaxWsServiceExporter simpleJaxWsServiceExporter() {\n        SimpleJaxWsServiceExporter exporter = new SimpleJaxWsServiceExporter();\n        exporter.setBaseAddress(&quot;/PrintQueueDetailService&quot;);\n        return exporter;\n    }\n\n}\n</code></pre>\n<p>More context: This is a multi-module maven project. 1 submodule is db/repos/services, 1 submodule is the SOAP interface with wsdl, where the cxf generation happens. And then the 3rd is the 'main' module, which has the main PrintQueueDtlServiceImpl that handles the SOAP calls.</p>\n<p>This is being deployed to jboss 7. I'm just running and testing locally with some jboss/wildfly server inside IntelliJ. I noticed there is also this piece, within /webapp/WEB-CONFIG/jboss-web.xml:</p>\n<pre><code>&lt;jboss-web&gt;\n    &lt;context-root&gt;/PrintQueueDetailService&lt;/context-root&gt;\n&lt;/jboss-web&gt;\n</code></pre>\n<p>I'm still not clear on if or how the /webapp/WEB-INF is packaged under the 'new' spring boot. I'm packaging it as a .war in maven.</p>\n"},{"tags":["java","jar","war"],"comments":[{"owner":{"account_id":71712,"reputation":11000,"user_id":207364,"accept_rate":93,"display_name":"Dan"},"score":1,"creation_date":1259875317,"post_id":1842972,"comment_id":1736281,"body_markdown":"Haven&#39;t tried this, but what about adding a &#39;Class-Path&#39; entry to the manifest?","body":"Haven&#39;t tried this, but what about adding a &#39;Class-Path&#39; entry to the manifest?"},{"owner":{"account_id":9410,"reputation":9391,"user_id":17375,"accept_rate":84,"display_name":"unorsk"},"score":0,"creation_date":1259875360,"post_id":1842972,"comment_id":1736285,"body_markdown":"Have you any reasons for this? Why won&#39;t you try to keep two different assemblies - one for web and one as a standalone application?","body":"Have you any reasons for this? Why won&#39;t you try to keep two different assemblies - one for web and one as a standalone application?"},{"owner":{"account_id":59933,"reputation":6258,"user_id":179189,"accept_rate":100,"display_name":"Murali VP"},"score":0,"creation_date":1259875431,"post_id":1842972,"comment_id":1736292,"body_markdown":"Did you try putting a classpath in the manifest.mf which had WEB-INF/classes and leave the Main-Class as mypackage.MyEntryPointClass\n?","body":"Did you try putting a classpath in the manifest.mf which had WEB-INF/classes and leave the Main-Class as mypackage.MyEntryPointClass ?"},{"owner":{"account_id":12256,"reputation":79165,"user_id":24039,"accept_rate":56,"display_name":"Simon"},"score":0,"creation_date":1259875678,"post_id":1842972,"comment_id":1736324,"body_markdown":"tried the classpath idea, didn&#39;t work","body":"tried the classpath idea, didn&#39;t work"},{"owner":{"account_id":12256,"reputation":79165,"user_id":24039,"accept_rate":56,"display_name":"Simon"},"score":0,"creation_date":1259875759,"post_id":1842972,"comment_id":1736333,"body_markdown":"@Andrew, I could have two different packages, it just seems wasteful when the content of one is a superset of the content of the other","body":"@Andrew, I could have two different packages, it just seems wasteful when the content of one is a superset of the content of the other"}],"answers":[{"tags":[],"owner":{"account_id":661,"reputation":5281,"user_id":869,"accept_rate":100,"display_name":"Jason Gritman"},"down_vote_count":0,"up_vote_count":7,"is_accepted":false,"score":7,"last_activity_date":1259875488,"creation_date":1259875488,"answer_id":1843021,"question_id":1842972,"body_markdown":"The rules of locating classes in an archive file is that the location of the file&#39;s package declaration and the location of the file within the archive have to match.  Since your class is located in WEB-INF/classes, it thinks the class is not valid to run in the current context.\r\n\r\nThe only way you can do what you&#39;re asking is to repackage the war so the `.class` file resides in the `mypackage` directory in the root of the archive rather than the WEB-INF/classes directory.  However, if you do that you won&#39;t be able to access the file from any of your web classes anymore.\r\n\r\nIf you want to reuse this class in both the war and outside from the java command line, consider building an executable jar you can run from the command line, then putting that jar in the `war` file&#39;s WEB-INF/lib directory.","title":"How do I run a class in a WAR from the command line?","body":"<p>The rules of locating classes in an archive file is that the location of the file's package declaration and the location of the file within the archive have to match.  Since your class is located in WEB-INF/classes, it thinks the class is not valid to run in the current context.</p>\n\n<p>The only way you can do what you're asking is to repackage the war so the <code>.class</code> file resides in the <code>mypackage</code> directory in the root of the archive rather than the WEB-INF/classes directory.  However, if you do that you won't be able to access the file from any of your web classes anymore.</p>\n\n<p>If you want to reuse this class in both the war and outside from the java command line, consider building an executable jar you can run from the command line, then putting that jar in the <code>war</code> file's WEB-INF/lib directory.</p>\n"},{"tags":[],"owner":{"account_id":70258,"reputation":590444,"user_id":203907,"accept_rate":81,"display_name":"Bozho"},"down_vote_count":1,"up_vote_count":11,"is_accepted":false,"score":10,"last_activity_date":1259875500,"creation_date":1259875500,"answer_id":1843025,"question_id":1842972,"body_markdown":"A war is a webapp. If you want to have a console/standalone application reusing the same classes as you webapp, consider packaging your shared classes in a jar, which you can put in `WEB-INF/lib`. Then use that jar from the command line.\r\nThus you get both your console application, and you can use the same classes in your servlets, without making two different packages.\r\nThis, of course, is true when the war is exploded.","title":"How do I run a class in a WAR from the command line?","body":"<p>A war is a webapp. If you want to have a console/standalone application reusing the same classes as you webapp, consider packaging your shared classes in a jar, which you can put in <code>WEB-INF/lib</code>. Then use that jar from the command line.\nThus you get both your console application, and you can use the same classes in your servlets, without making two different packages.\nThis, of course, is true when the war is exploded.</p>\n"},{"tags":[],"owner":{"account_id":20439,"reputation":4580,"user_id":48839,"display_name":"Chad Okere"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1259875588,"creation_date":1259875588,"answer_id":1843035,"question_id":1842972,"body_markdown":"Well, according to &lt;a href=&quot;http://en.wikipedia.org/wiki/WAR_file&quot;&gt;Wikipedia&lt;/a&gt;, with a WAR file, the classes that get loaded into the classpath are in the &quot;/WEB-INF/classes&quot; and &quot;/WEB-INF/lib&quot; directory. \r\n\r\nYou could try simply putting a copy of the classes on the root file system of the zip file (which is what a war/jar is).  I&#39;m not sure if that would work though. \r\n\r\nYou can always just create two separate files.","title":"How do I run a class in a WAR from the command line?","body":"<p>Well, according to <a href=\"http://en.wikipedia.org/wiki/WAR_file\" rel=\"nofollow noreferrer\">Wikipedia</a>, with a WAR file, the classes that get loaded into the classpath are in the \"/WEB-INF/classes\" and \"/WEB-INF/lib\" directory. </p>\n\n<p>You could try simply putting a copy of the classes on the root file system of the zip file (which is what a war/jar is).  I'm not sure if that would work though. </p>\n\n<p>You can always just create two separate files.</p>\n"},{"tags":[],"owner":{"account_id":10582,"reputation":2468,"user_id":20065,"accept_rate":76,"display_name":"Yonatan Maman"},"down_vote_count":0,"up_vote_count":56,"is_accepted":false,"score":56,"last_activity_date":1386162925,"creation_date":1285598011,"answer_id":3804844,"question_id":1842972,"body_markdown":"You can do what [Hudson][1] (continuous integration project) does.\r\nyou download a war which can be deployed in tomcat or to execute using\r\n\r\n    java -jar hudson.war\r\n\r\n(Because it has an embedded Jetty engine, running it from command line cause a server to be launched.) Anyway  by looking at  hudson&#39;s manifest I understand that they put a Main class in the root for the archive. In your case your war layout should be look like:\r\n\r\nunder root:\r\n\r\n - mypackage/MyEntryPointClass.class  \r\n - WEB-INF/lib \r\n - WEB-INF/classes\r\n - META-INF/MANIFEST.MF\r\n\r\nwhile the manifest should include the following line:\r\n\r\n    Main-Class: mypackage.MyEntryPointClass\r\n\r\nplease notice that the  mypackage/MyEntryPointClass.class  is accessable from the command line only, and the classes under WEB-INF/classes are accessable from the application server only.\r\n\r\nHTH\r\n \r\n  [1]: http://hudson-ci.org/","title":"How do I run a class in a WAR from the command line?","body":"<p>You can do what <a href=\"http://hudson-ci.org/\" rel=\"noreferrer\">Hudson</a> (continuous integration project) does.\nyou download a war which can be deployed in tomcat or to execute using</p>\n\n<pre><code>java -jar hudson.war\n</code></pre>\n\n<p>(Because it has an embedded Jetty engine, running it from command line cause a server to be launched.) Anyway  by looking at  hudson's manifest I understand that they put a Main class in the root for the archive. In your case your war layout should be look like:</p>\n\n<p>under root:</p>\n\n<ul>\n<li>mypackage/MyEntryPointClass.class  </li>\n<li>WEB-INF/lib </li>\n<li>WEB-INF/classes</li>\n<li>META-INF/MANIFEST.MF</li>\n</ul>\n\n<p>while the manifest should include the following line:</p>\n\n<pre><code>Main-Class: mypackage.MyEntryPointClass\n</code></pre>\n\n<p>please notice that the  mypackage/MyEntryPointClass.class  is accessable from the command line only, and the classes under WEB-INF/classes are accessable from the application server only.</p>\n\n<p>HTH</p>\n"},{"tags":[],"owner":{"account_id":174804,"reputation":27548,"user_id":404395,"accept_rate":73,"display_name":"marioosh"},"down_vote_count":1,"up_vote_count":7,"is_accepted":false,"score":6,"last_activity_date":1303300026,"creation_date":1303300026,"answer_id":5729694,"question_id":1842972,"body_markdown":"In [Maven][1] project, You can build jar automatically using [Maven War plugin][2] by setting `archiveClasses` to `true`. Example below.\r\n\r\n    &lt;plugin&gt;\r\n           &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n           &lt;artifactId&gt;maven-war-plugin&lt;/artifactId&gt;\r\n           &lt;configuration&gt;\r\n           \t&lt;archiveClasses&gt;true&lt;/archiveClasses&gt;\r\n           &lt;/configuration&gt;\r\n    &lt;/plugin&gt;\r\n\r\n\r\n  [1]: http://maven.apache.org\r\n  [2]: http://maven.apache.org/plugins/maven-war-plugin/","title":"How do I run a class in a WAR from the command line?","body":"<p>In <a href=\"http://maven.apache.org\" rel=\"noreferrer\">Maven</a> project, You can build jar automatically using <a href=\"http://maven.apache.org/plugins/maven-war-plugin/\" rel=\"noreferrer\">Maven War plugin</a> by setting <code>archiveClasses</code> to <code>true</code>. Example below.</p>\n\n<pre><code>&lt;plugin&gt;\n       &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n       &lt;artifactId&gt;maven-war-plugin&lt;/artifactId&gt;\n       &lt;configuration&gt;\n        &lt;archiveClasses&gt;true&lt;/archiveClasses&gt;\n       &lt;/configuration&gt;\n&lt;/plugin&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1381169,"reputation":97,"user_id":1314130,"display_name":"Richard Detsch"},"down_vote_count":2,"up_vote_count":10,"is_accepted":false,"score":8,"last_activity_date":1626234526,"creation_date":1333587148,"answer_id":10021303,"question_id":1842972,"body_markdown":"To execute `SomeClass.main(String [] args)` from a deployed war file do:\r\n\r\n1. Write class `SomeClass.java` that has a main method method i.e. (*public static void main(String[] args) {...}*)\r\n2. Deploy your WAR\r\n3. `cd /usr/local/&lt;yourprojectsname&gt;/tomcat/webapps/projectName/WEB-INF`  \r\n4. `java -cp &quot;lib/jar1.jar:lib/jar2.jar: ... :lib/jarn.jar&quot; com.mypackage.SomeClass arg1 arg2 ... arg3` \r\n\r\nNote1: to see if the class `SomeOtherClass.class` is in `/usr/tomcat/webapps/&lt;projectName&gt;/WEB-INF/lib` run:\r\n\r\n    cd /usr/tomcat/webapps/projectName/WEB-INF/lib &amp;&amp; \r\n    find . -name &#39;*.jar&#39; | while read jarfile; do if jar tf &quot;$jarfile&quot; | grep SomeOtherClass.class; then echo &quot;$jarfile&quot;; fi; done \r\n  \r\nNote2: Write to standard out so you can see if your main actually works via print statements to the console.  This is called a back door. \r\n  \r\nNote3: The comment above by Bozhidar Bozhanov seems correct \r\n\r\n","title":"How do I run a class in a WAR from the command line?","body":"<p>To execute <code>SomeClass.main(String [] args)</code> from a deployed war file do:</p>\n<ol>\n<li>Write class <code>SomeClass.java</code> that has a main method method i.e. (<em>public static void main(String[] args) {...}</em>)</li>\n<li>Deploy your WAR</li>\n<li><code>cd /usr/local/&lt;yourprojectsname&gt;/tomcat/webapps/projectName/WEB-INF</code></li>\n<li><code>java -cp &quot;lib/jar1.jar:lib/jar2.jar: ... :lib/jarn.jar&quot; com.mypackage.SomeClass arg1 arg2 ... arg3</code></li>\n</ol>\n<p>Note1: to see if the class <code>SomeOtherClass.class</code> is in <code>/usr/tomcat/webapps/&lt;projectName&gt;/WEB-INF/lib</code> run:</p>\n<pre><code>cd /usr/tomcat/webapps/projectName/WEB-INF/lib &amp;&amp; \nfind . -name '*.jar' | while read jarfile; do if jar tf &quot;$jarfile&quot; | grep SomeOtherClass.class; then echo &quot;$jarfile&quot;; fi; done \n</code></pre>\n<p>Note2: Write to standard out so you can see if your main actually works via print statements to the console.  This is called a back door.</p>\n<p>Note3: The comment above by Bozhidar Bozhanov seems correct</p>\n"},{"tags":[],"owner":{"account_id":3074971,"reputation":1,"user_id":2604596,"display_name":"Rawat"},"down_vote_count":3,"up_vote_count":0,"is_accepted":false,"score":-3,"last_activity_date":1433758771,"creation_date":1433757431,"answer_id":30706143,"question_id":1842972,"body_markdown":"It&#39;s not possible to run a java class from a WAR file. WAR files have a different structure to Jar files.\r\n\r\nTo find the related java classes, export (preferred way to use ant) them as Jar put it in your web app lib.\r\n\r\nThen you can use the jar file as normal to run java program. The same jar was also referred in web app (if you put this jar in web app lib)","title":"How do I run a class in a WAR from the command line?","body":"<p>It's not possible to run a java class from a WAR file. WAR files have a different structure to Jar files.</p>\n\n<p>To find the related java classes, export (preferred way to use ant) them as Jar put it in your web app lib.</p>\n\n<p>Then you can use the jar file as normal to run java program. The same jar was also referred in web app (if you put this jar in web app lib)</p>\n"},{"tags":[],"owner":{"account_id":6692704,"reputation":2426,"user_id":5161718,"display_name":"Bojan Petkovic"},"down_vote_count":0,"up_vote_count":65,"is_accepted":false,"score":65,"last_activity_date":1445451625,"creation_date":1445451625,"answer_id":33266505,"question_id":1842972,"body_markdown":"Similar to what Richard Detsch but with a bit easier to follow (works with packages as well)\r\n\r\nStep 1: Unwrap the War file.\r\n\r\n    jar -xvf MyWar.war\r\nStep 2: move into the directory\r\n\r\n    cd WEB-INF\r\nStep 3: Run your main with all dependendecies\r\n\r\n    java -classpath &quot;lib/*:classes/.&quot; my.packages.destination.FileToRun\r\n\r\n\r\n","title":"How do I run a class in a WAR from the command line?","body":"<p>Similar to what Richard Detsch but with a bit easier to follow (works with packages as well)</p>\n\n<p>Step 1: Unwrap the War file.</p>\n\n<pre><code>jar -xvf MyWar.war\n</code></pre>\n\n<p>Step 2: move into the directory</p>\n\n<pre><code>cd WEB-INF\n</code></pre>\n\n<p>Step 3: Run your main with all dependendecies</p>\n\n<pre><code>java -classpath \"lib/*:classes/.\" my.packages.destination.FileToRun\n</code></pre>\n"},{"tags":[],"owner":{"account_id":255268,"reputation":22641,"user_id":535203,"accept_rate":73,"display_name":"Anthony O."},"down_vote_count":0,"up_vote_count":10,"is_accepted":false,"score":10,"last_activity_date":1455615108,"creation_date":1455615108,"answer_id":35428647,"question_id":1842972,"body_markdown":"If you&#39;re using Maven, just follow the `maven-war-plugin` documentation about &quot;[How do I create a JAR containing the classes in my webapp?][1]&quot;: add **`&lt;attachClasses&gt;true&lt;/attachClasses&gt;`** to the `&lt;configuration&gt;` of the plugin:\r\n\r\n&lt;!-- language: lang-xml --&gt;\r\n\r\n\t&lt;project&gt;\r\n\t  ...\r\n\t  &lt;artifactId&gt;mywebapp&lt;/artifactId&gt;\r\n\t  &lt;version&gt;1.0-SNAPSHOT&lt;/version&gt;\r\n\t  ...\r\n\t  &lt;build&gt;\r\n\t    &lt;plugins&gt;\r\n\t      &lt;plugin&gt;\r\n\t\t&lt;artifactId&gt;maven-war-plugin&lt;/artifactId&gt;\r\n\t\t&lt;version&gt;2.6&lt;/version&gt;\r\n\t\t&lt;configuration&gt;\r\n\t\t  &lt;attachClasses&gt;true&lt;/attachClasses&gt;\r\n\t\t&lt;/configuration&gt;\r\n\t      &lt;/plugin&gt;\r\n\t    &lt;/plugins&gt;\r\n\t  &lt;/build&gt;\r\n\t  ...\r\n\t&lt;/project&gt;\r\n\r\nThe you will have 2 products in the `target/` folder:\r\n\r\n - The `project.war` itself\r\n - The `project-classes.jar` which contains all the compiled classes in a jar\r\n\r\nThen you will be able to execute a main class using classic method: `java -cp target/project-classes.jar &#39;com.mycompany.MainClass&#39; param1 param2`\r\n\r\n  [1]: https://maven.apache.org/plugins/maven-war-plugin/faq.html#attached","title":"How do I run a class in a WAR from the command line?","body":"<p>If you're using Maven, just follow the <code>maven-war-plugin</code> documentation about \"<a href=\"https://maven.apache.org/plugins/maven-war-plugin/faq.html#attached\" rel=\"noreferrer\">How do I create a JAR containing the classes in my webapp?</a>\": add <strong><code>&lt;attachClasses&gt;true&lt;/attachClasses&gt;</code></strong> to the <code>&lt;configuration&gt;</code> of the plugin:</p>\n\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;project&gt;\n  ...\n  &lt;artifactId&gt;mywebapp&lt;/artifactId&gt;\n  &lt;version&gt;1.0-SNAPSHOT&lt;/version&gt;\n  ...\n  &lt;build&gt;\n    &lt;plugins&gt;\n      &lt;plugin&gt;\n    &lt;artifactId&gt;maven-war-plugin&lt;/artifactId&gt;\n    &lt;version&gt;2.6&lt;/version&gt;\n    &lt;configuration&gt;\n      &lt;attachClasses&gt;true&lt;/attachClasses&gt;\n    &lt;/configuration&gt;\n      &lt;/plugin&gt;\n    &lt;/plugins&gt;\n  &lt;/build&gt;\n  ...\n&lt;/project&gt;\n</code></pre>\n\n<p>The you will have 2 products in the <code>target/</code> folder:</p>\n\n<ul>\n<li>The <code>project.war</code> itself</li>\n<li>The <code>project-classes.jar</code> which contains all the compiled classes in a jar</li>\n</ul>\n\n<p>Then you will be able to execute a main class using classic method: <code>java -cp target/project-classes.jar 'com.mycompany.MainClass' param1 param2</code></p>\n"},{"tags":[],"owner":{"account_id":15662588,"reputation":102,"user_id":11301191,"display_name":"Rick"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1585133420,"creation_date":1585133420,"answer_id":60847299,"question_id":1842972,"body_markdown":"the best way if you use Spring Boot is : \r\n\r\n1/ Create a ServletInitializer extends **SpringBootServletInitializer** Class\r\n   . With method **configure** which run your Application Class \r\n\r\n2/ Generate **always** a maven install **WAR** file\r\n\r\n3/ With this artefact you can even :\r\n\r\n        . start application from war file with java -jar file.war\r\n\r\n        . put your war file in your favorite Web App server (like tomcat, ...)","title":"How do I run a class in a WAR from the command line?","body":"<p>the best way if you use Spring Boot is : </p>\n\n<p>1/ Create a ServletInitializer extends <strong>SpringBootServletInitializer</strong> Class\n   . With method <strong>configure</strong> which run your Application Class </p>\n\n<p>2/ Generate <strong>always</strong> a maven install <strong>WAR</strong> file</p>\n\n<p>3/ With this artefact you can even :</p>\n\n<pre><code>    . start application from war file with java -jar file.war\n\n    . put your war file in your favorite Web App server (like tomcat, ...)\n</code></pre>\n"},{"tags":[],"owner":{"account_id":241158,"reputation":9333,"user_id":511804,"accept_rate":56,"display_name":"Alexandr"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1628667310,"creation_date":1628666619,"answer_id":68737690,"question_id":1842972,"body_markdown":"As an alternative option, include into the `war` file, the rest service to trigger the application logic via url. Deploy the `war` file onto any web/application server you want.\r\n\r\nThen you can start your application via any command-line based HTTP client like `curl` on Linux.\r\n\r\nThe disadvantage: usually these HTTP clients are different on different OSs. Which is not critical for a lot of cases. Also you can install `curl` on Windows. ","title":"How do I run a class in a WAR from the command line?","body":"<p>As an alternative option, include into the <code>war</code> file, the rest service to trigger the application logic via url. Deploy the <code>war</code> file onto any web/application server you want.</p>\n<p>Then you can start your application via any command-line based HTTP client like <code>curl</code> on Linux.</p>\n<p>The disadvantage: usually these HTTP clients are different on different OSs. Which is not critical for a lot of cases. Also you can install <code>curl</code> on Windows.</p>\n"},{"tags":[],"owner":{"account_id":114451,"reputation":3268,"user_id":300929,"accept_rate":95,"display_name":"Efrain"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1697814614,"creation_date":1697814614,"answer_id":77332015,"question_id":1842972,"body_markdown":"A solution with docker:\r\n\r\n    docker run --rm -it -v ${PWD}:/usr/local/tomcat/webapps -p 8080:8080 tomcat\r\n\r\nThis is the Windows syntax - for Linux/Mac replace ${PWD} with $(pwd).\r\n\r\nA .war file is a Java Servlet web-application archive that is supposed to be ran within so called servlet container, which in practice means Apache Tomcat. The easiest way to do this is to simply run Tomcat which we can do using docker with the above command. Unfortunately, I had no luck running the (legacy) applications I was trying to run - I assume it&#39;s a mismatch of the Servlet-API versions. ","title":"How do I run a class in a WAR from the command line?","body":"<p>A solution with docker:</p>\n<pre><code>docker run --rm -it -v ${PWD}:/usr/local/tomcat/webapps -p 8080:8080 tomcat\n</code></pre>\n<p>This is the Windows syntax - for Linux/Mac replace ${PWD} with $(pwd).</p>\n<p>A .war file is a Java Servlet web-application archive that is supposed to be ran within so called servlet container, which in practice means Apache Tomcat. The easiest way to do this is to simply run Tomcat which we can do using docker with the above command. Unfortunately, I had no luck running the (legacy) applications I was trying to run - I assume it's a mismatch of the Servlet-API versions.</p>\n"}],"owner":{"account_id":12256,"reputation":79165,"user_id":24039,"accept_rate":56,"display_name":"Simon"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":264429,"favorite_count":0,"down_vote_count":0,"up_vote_count":91,"answer_count":12,"score":91,"last_activity_date":1697814614,"creation_date":1259874992,"question_id":1842972,"body_markdown":"I have a Java class which has a main and I used to run as a standalone app from the command line e.g.\r\n\r\n    java -jar myjar.jar params\r\n\r\nI needed to repackage the code to run under apache and all my code, including the entry point class from the old jar, has ended up in a WAR file for easy deplyment into the web server.\r\n\r\nHowever, I still want to be able to run it from the command line and the code has not changed and is all in there, I just can&#39;t figure out how to get it to run.\r\n\r\nHere&#39;s what I tried...\r\n\r\nI presumed the WAR was just like a jar, so\r\n\r\n    java -jar mywar.war params\r\n\r\nThat failed saying there was no main class defined in the manifest.\r\n\r\nI manually added a manifest to the war and tried again, with the same effect.\r\n\r\nI noticed that in my war I had a folder called META-INF containing a manifest.mf, so I added a line to that declaring my main class as I would to a normal manifest...\r\n\r\n    Manifest-Version: 1.0\r\n    Main-Class: mypackage.MyEntryPointClass\r\n\r\nThis gave a `noClassDefFoundError mypackage.MyEntryPointClass`, which is progress of a sort.  That led me to believe that it was just a path issue, so I tried\r\n\r\n    Manifest-Version: 1.0\r\n    Main-Class: WEB-INF.classes.mypackage.MyEntryPointClass\r\n\r\nI now get the same error, but with a stack trace...\r\n\r\n    Exception in thread &quot;main&quot; java.lang.NoClassDefFoundError: WEB-INF/classes/mypackage/MyEntryPointClass (wrong name: mypackage/MyEntryPointClass)\r\n            at java.lang.ClassLoader.defineClass1(Native Method)\r\n            at java.lang.ClassLoader.defineClass(Unknown Source)\r\n            at java.security.SecureClassLoader.defineClass(Unknown Source)\r\n            at java.net.URLClassLoader.defineClass(Unknown Source)\r\n            at java.net.URLClassLoader.access$100(Unknown Source)\r\n            at java.net.URLClassLoader$1.run(Unknown Source)\r\n            at java.security.AccessController.doPrivileged(Native Method)\r\n            at java.net.URLClassLoader.findClass(Unknown Source)\r\n            at java.lang.ClassLoader.loadClass(Unknown Source)\r\n            at sun.misc.Launcher$AppClassLoader.loadClass(Unknown Source)\r\n            at java.lang.ClassLoader.loadClass(Unknown Source)\r\n            at java.lang.ClassLoader.loadClassInternal(Unknown Source)\r\n\r\nI&#39;ve googled for a bit but can&#39;t find anything which answers my question, and I read a couple of other questions here which are slightly different, so I thought I would post.\r\n\r\nJava 1.5, not that I think that should make any difference.","title":"How do I run a class in a WAR from the command line?","body":"<p>I have a Java class which has a main and I used to run as a standalone app from the command line e.g.</p>\n\n<pre><code>java -jar myjar.jar params\n</code></pre>\n\n<p>I needed to repackage the code to run under apache and all my code, including the entry point class from the old jar, has ended up in a WAR file for easy deplyment into the web server.</p>\n\n<p>However, I still want to be able to run it from the command line and the code has not changed and is all in there, I just can't figure out how to get it to run.</p>\n\n<p>Here's what I tried...</p>\n\n<p>I presumed the WAR was just like a jar, so</p>\n\n<pre><code>java -jar mywar.war params\n</code></pre>\n\n<p>That failed saying there was no main class defined in the manifest.</p>\n\n<p>I manually added a manifest to the war and tried again, with the same effect.</p>\n\n<p>I noticed that in my war I had a folder called META-INF containing a manifest.mf, so I added a line to that declaring my main class as I would to a normal manifest...</p>\n\n<pre><code>Manifest-Version: 1.0\nMain-Class: mypackage.MyEntryPointClass\n</code></pre>\n\n<p>This gave a <code>noClassDefFoundError mypackage.MyEntryPointClass</code>, which is progress of a sort.  That led me to believe that it was just a path issue, so I tried</p>\n\n<pre><code>Manifest-Version: 1.0\nMain-Class: WEB-INF.classes.mypackage.MyEntryPointClass\n</code></pre>\n\n<p>I now get the same error, but with a stack trace...</p>\n\n<pre><code>Exception in thread \"main\" java.lang.NoClassDefFoundError: WEB-INF/classes/mypackage/MyEntryPointClass (wrong name: mypackage/MyEntryPointClass)\n        at java.lang.ClassLoader.defineClass1(Native Method)\n        at java.lang.ClassLoader.defineClass(Unknown Source)\n        at java.security.SecureClassLoader.defineClass(Unknown Source)\n        at java.net.URLClassLoader.defineClass(Unknown Source)\n        at java.net.URLClassLoader.access$100(Unknown Source)\n        at java.net.URLClassLoader$1.run(Unknown Source)\n        at java.security.AccessController.doPrivileged(Native Method)\n        at java.net.URLClassLoader.findClass(Unknown Source)\n        at java.lang.ClassLoader.loadClass(Unknown Source)\n        at sun.misc.Launcher$AppClassLoader.loadClass(Unknown Source)\n        at java.lang.ClassLoader.loadClass(Unknown Source)\n        at java.lang.ClassLoader.loadClassInternal(Unknown Source)\n</code></pre>\n\n<p>I've googled for a bit but can't find anything which answers my question, and I read a couple of other questions here which are slightly different, so I thought I would post.</p>\n\n<p>Java 1.5, not that I think that should make any difference.</p>\n"},{"tags":["java","spring","spring-cloud","service-discovery"],"comments":[{"owner":{"account_id":1368060,"reputation":24601,"user_id":2730527,"display_name":"spencergibb"},"score":0,"creation_date":1550814061,"post_id":54820276,"comment_id":96416520,"body_markdown":"Why are the other beans a problem?","body":"Why are the other beans a problem?"},{"owner":{"account_id":5080491,"reputation":15121,"user_id":4076764,"accept_rate":74,"display_name":"Adam Hughes"},"score":0,"creation_date":1550816145,"post_id":54820276,"comment_id":96417192,"body_markdown":"Well - it&#39;s more of a source of confusion than anything.  For example - say we implemented the `description()` method of `InHouseDiscoveryClient` to return something informative like the email address for our support team.  Users call this method and get &quot;Composite Discovery Client&quot; and I anticipate they would be confused by this and possibly think something is wrong w/ their config.  So we&#39;ll either need to clearly describe this behavior in our documentation (ie. that 3 beans are autowiring and not 1).  What is the use-case for having multiple clients, maybe I don&#39;t understand?","body":"Well - it&#39;s more of a source of confusion than anything.  For example - say we implemented the <code>description()</code> method of <code>InHouseDiscoveryClient</code> to return something informative like the email address for our support team.  Users call this method and get &quot;Composite Discovery Client&quot; and I anticipate they would be confused by this and possibly think something is wrong w/ their config.  So we&#39;ll either need to clearly describe this behavior in our documentation (ie. that 3 beans are autowiring and not 1).  What is the use-case for having multiple clients, maybe I don&#39;t understand?"},{"owner":{"account_id":1368060,"reputation":24601,"user_id":2730527,"display_name":"spencergibb"},"score":1,"creation_date":1550949990,"post_id":54820276,"comment_id":96463635,"body_markdown":"I&#39;m trying to determine if there is a technical problem or not. Users wanted to be able to sidestep a discovery system and put entries in configuration for various reasons. https://github.com/spring-cloud/spring-cloud-commons/issues/140 it&#39;s going on a few years old.","body":"I&#39;m trying to determine if there is a technical problem or not. Users wanted to be able to sidestep a discovery system and put entries in configuration for various reasons. <a href=\"https://github.com/spring-cloud/spring-cloud-commons/issues/140\" rel=\"nofollow noreferrer\">github.com/spring-cloud/spring-cloud-commons/issues/140</a> it&#39;s going on a few years old."},{"owner":{"account_id":1368060,"reputation":24601,"user_id":2730527,"display_name":"spencergibb"},"score":1,"creation_date":1550950023,"post_id":54820276,"comment_id":96463645,"body_markdown":"To turn them off you need to exclude https://github.com/spring-cloud/spring-cloud-commons/blob/master/spring-cloud-commons/src/main/java/org/springframework/cloud/client/discovery/composite/CompositeDiscoveryClientAutoConfiguration.java and https://github.com/spring-cloud/spring-cloud-commons/blob/master/spring-cloud-commons/src/main/java/org/springframework/cloud/client/discovery/simple/SimpleDiscoveryClientAutoConfiguration.java via properties `spring.autoconfigure.exclude`","body":"To turn them off you need to exclude <a href=\"https://github.com/spring-cloud/spring-cloud-commons/blob/master/spring-cloud-commons/src/main/java/org/springframework/cloud/client/discovery/composite/CompositeDiscoveryClientAutoConfiguration.java\" rel=\"nofollow noreferrer\">github.com/spring-cloud/spring-cloud-commons/blob/master/&hellip;</a> and <a href=\"https://github.com/spring-cloud/spring-cloud-commons/blob/master/spring-cloud-commons/src/main/java/org/springframework/cloud/client/discovery/simple/SimpleDiscoveryClientAutoConfiguration.java\" rel=\"nofollow noreferrer\">github.com/spring-cloud/spring-cloud-commons/blob/master/&hellip;</a> via properties <code>spring.autoconfigure.exclude</code>"},{"owner":{"account_id":5080491,"reputation":15121,"user_id":4076764,"accept_rate":74,"display_name":"Adam Hughes"},"score":0,"creation_date":1550964146,"post_id":54820276,"comment_id":96467043,"body_markdown":"Thanks @spencergibb - I had actually done this using ExclusionFilter - have updated answer.  I don&#39;t think there&#39;s a technical problem per-se, but the linked issue seems like a specialized usecase which perhaps should be opt-in?  I&#39;d be happy to discuss my use case at more length if that would help, but to be honest we just wanted to use the commons interfaces/abstractions and found some of the default implementations to be in the way.  Perhaps it would be possible to split the commons abstractions into a standalone submodule?","body":"Thanks @spencergibb - I had actually done this using ExclusionFilter - have updated answer.  I don&#39;t think there&#39;s a technical problem per-se, but the linked issue seems like a specialized usecase which perhaps should be opt-in?  I&#39;d be happy to discuss my use case at more length if that would help, but to be honest we just wanted to use the commons interfaces/abstractions and found some of the default implementations to be in the way.  Perhaps it would be possible to split the commons abstractions into a standalone submodule?"}],"answers":[{"tags":[],"owner":{"account_id":5080491,"reputation":15121,"user_id":4076764,"accept_rate":74,"display_name":"Adam Hughes"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1550966613,"creation_date":1550963533,"answer_id":54847194,"question_id":54820276,"body_markdown":"I ended up extended `AutoConfigurationImportFilter` in my library to remove the autowired beans from cloud-commons.  I also removed it&#39;s health indicator, but we had a very particular reason to do so - most probably would rather keep it.\r\n\r\n    my.package\r\n\r\n    public class StratusDiscoveryExclusionFilter implements AutoConfigurationImportFilter {\r\n\r\n    private static final Set&lt;String&gt; SHOULD_SKIP = new HashSet&lt;&gt;(\r\n            Arrays.asList(\r\n                    // DiscoveryClient Beans\r\n                    &quot;org.springframework.cloud.client.discovery.composite.CompositeDiscoveryClientAutoConfiguration&quot;,\r\n                    &quot;org.springframework.cloud.client.discovery.simple.SimpleDiscoveryClientAutoConfiguration&quot;,\r\n                    // Health indicators\r\n                    &quot;org.springframework.cloud.client.CommonsClientAutoConfiguration&quot;)\r\n    );\r\n\r\n    /**\r\n     * For each class name, provide an assocated boolean array indicated whether or not to include\r\n     */\r\n    @Override\r\n    public boolean[] match(String[] classNames, AutoConfigurationMetadata metadata) {\r\n        boolean[] matches = new boolean[classNames.length];\r\n\r\n        for (int i = 0; i &lt; classNames.length; i++) {\r\n            matches[i] = !SHOULD_SKIP.contains(classNames[i]);\r\n        }\r\n        return matches;\r\n     }\r\n    }\r\n\r\nI think add a reference to this in my library&#39;s `spring.factories` file\r\n\r\n    org.springframework.boot.autoconfigure.AutoConfigurationImportFilter=my.package.MyExclusionFilter\r\n","title":"How to disable CompositeDiscoveryClient and SimpleDiscoveryClient in service discovery library","body":"<p>I ended up extended <code>AutoConfigurationImportFilter</code> in my library to remove the autowired beans from cloud-commons.  I also removed it's health indicator, but we had a very particular reason to do so - most probably would rather keep it.</p>\n\n<pre><code>my.package\n\npublic class StratusDiscoveryExclusionFilter implements AutoConfigurationImportFilter {\n\nprivate static final Set&lt;String&gt; SHOULD_SKIP = new HashSet&lt;&gt;(\n        Arrays.asList(\n                // DiscoveryClient Beans\n                \"org.springframework.cloud.client.discovery.composite.CompositeDiscoveryClientAutoConfiguration\",\n                \"org.springframework.cloud.client.discovery.simple.SimpleDiscoveryClientAutoConfiguration\",\n                // Health indicators\n                \"org.springframework.cloud.client.CommonsClientAutoConfiguration\")\n);\n\n/**\n * For each class name, provide an assocated boolean array indicated whether or not to include\n */\n@Override\npublic boolean[] match(String[] classNames, AutoConfigurationMetadata metadata) {\n    boolean[] matches = new boolean[classNames.length];\n\n    for (int i = 0; i &lt; classNames.length; i++) {\n        matches[i] = !SHOULD_SKIP.contains(classNames[i]);\n    }\n    return matches;\n }\n}\n</code></pre>\n\n<p>I think add a reference to this in my library's <code>spring.factories</code> file</p>\n\n<pre><code>org.springframework.boot.autoconfigure.AutoConfigurationImportFilter=my.package.MyExclusionFilter\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1525566,"reputation":1183,"user_id":1424108,"display_name":"ibai"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1697814488,"creation_date":1697814488,"answer_id":77332002,"question_id":54820276,"body_markdown":"There are two `AutoConfiguration` classes that need to be excluded.\r\n\r\nYou can do that through the `@SpringBootApplication` annotation.\r\n\r\n```\r\n@SpringBootApplication(exclude = {CompositeDiscoveryClientAutoConfiguration.class, SimpleDiscoveryClientAutoConfiguration.class})\r\npublic class Application {\r\n\r\n    public static void main(String[] args) {\r\n        SpringApplication.run(Application.class, args);\r\n    }\r\n}\r\n```\r\n\r\nOr through the properties file as `@spencergibb` suggested:\r\n```\r\n# yml version\r\nspring:\r\n  autoconfigure:\r\n    exclude:\r\n      - org.springframework.cloud.client.discovery.composite.CompositeDiscoveryClientAutoConfiguration\r\n      - org.springframework.cloud.client.discovery.simple.SimpleDiscoveryClientAutoConfiguration\r\n```\r\n```\r\n# classic version\r\nspring.autoconfigure.exclude= \\\r\n  org.springframework.cloud.client.discovery.composite.CompositeDiscoveryClientAutoConfiguration, \\\r\n  org.springframework.cloud.client.discovery.simple.SimpleDiscoveryClientAutoConfiguration\r\n```","title":"How to disable CompositeDiscoveryClient and SimpleDiscoveryClient in service discovery library","body":"<p>There are two <code>AutoConfiguration</code> classes that need to be excluded.</p>\n<p>You can do that through the <code>@SpringBootApplication</code> annotation.</p>\n<pre><code>@SpringBootApplication(exclude = {CompositeDiscoveryClientAutoConfiguration.class, SimpleDiscoveryClientAutoConfiguration.class})\npublic class Application {\n\n    public static void main(String[] args) {\n        SpringApplication.run(Application.class, args);\n    }\n}\n</code></pre>\n<p>Or through the properties file as <code>@spencergibb</code> suggested:</p>\n<pre><code># yml version\nspring:\n  autoconfigure:\n    exclude:\n      - org.springframework.cloud.client.discovery.composite.CompositeDiscoveryClientAutoConfiguration\n      - org.springframework.cloud.client.discovery.simple.SimpleDiscoveryClientAutoConfiguration\n</code></pre>\n<pre><code># classic version\nspring.autoconfigure.exclude= \\\n  org.springframework.cloud.client.discovery.composite.CompositeDiscoveryClientAutoConfiguration, \\\n  org.springframework.cloud.client.discovery.simple.SimpleDiscoveryClientAutoConfiguration\n</code></pre>\n"}],"owner":{"account_id":5080491,"reputation":15121,"user_id":4076764,"accept_rate":74,"display_name":"Adam Hughes"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1920,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":54847194,"answer_count":2,"score":2,"last_activity_date":1697814488,"creation_date":1550811163,"question_id":54820276,"body_markdown":"We&#39;ve written an in-house service discovery (SD) client based on the [spring-cloud-commons SPI][1], meaning it provides implementations for interfaces `ServiceRegistry` and `DiscoveryClient` and some other Spring-provided abstractions.\r\n\r\nApps that use our library merely add it to their pom file, and it autowires the `DiscoveryClient` with its own implementation, `InHouseDiscoveryClient`\r\n\r\n    &lt;dependency&gt;\r\n       &lt;groupId&gt;blah.blah&lt;groupId&gt;\r\n       &lt;artifactId&gt;inhouse-service-discovery-client&lt;artifactId&gt;\r\n    &lt;dependency&gt;\r\n\r\nHowever, rather than referring to `InHouseDiscoveryClient` in code, it&#39;s best practices to use the interface `DiscoveryClient` as shown below\r\n\r\n    # Good \r\n    @Autowired\r\n    DiscoveryClient client;\r\n\r\n    # Bad (binds app to a particular SD implementation)\r\n    @Autowired\r\n    InHouseDiscoveryClient client;\r\n\r\n\r\nAs such, we are required to add `spring-cloud-commons` to the project.\r\n\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;\r\n            &lt;artifactId&gt;spring-cloud-commons&lt;/artifactId&gt;\r\n        &lt;/dependency&gt;\r\n\r\n*This is where the issue starts*.  The commons library actually autowires two additional implementations of `DiscoveryClient` - the `SimpleDiscoveryClient` and the `CompositeDiscoveryClient`.  \r\n\r\nThis makes for an odd user experience for our clients.  Instead of simply having `InHouseDiscoveryClient`, users find themselves with these additional beans.  \r\n\r\nIs it possible to prevent `spring-cloud-commons`&#39;s `DiscoveryClient` implementations from autowiring?  And if so, can this be done in our library rather than in the end-user&#39;s applications?\r\n\r\n  [1]: https://spring.io/projects/spring-cloud-commons","title":"How to disable CompositeDiscoveryClient and SimpleDiscoveryClient in service discovery library","body":"<p>We've written an in-house service discovery (SD) client based on the <a href=\"https://spring.io/projects/spring-cloud-commons\" rel=\"nofollow noreferrer\">spring-cloud-commons SPI</a>, meaning it provides implementations for interfaces <code>ServiceRegistry</code> and <code>DiscoveryClient</code> and some other Spring-provided abstractions.</p>\n\n<p>Apps that use our library merely add it to their pom file, and it autowires the <code>DiscoveryClient</code> with its own implementation, <code>InHouseDiscoveryClient</code></p>\n\n<pre><code>&lt;dependency&gt;\n   &lt;groupId&gt;blah.blah&lt;groupId&gt;\n   &lt;artifactId&gt;inhouse-service-discovery-client&lt;artifactId&gt;\n&lt;dependency&gt;\n</code></pre>\n\n<p>However, rather than referring to <code>InHouseDiscoveryClient</code> in code, it's best practices to use the interface <code>DiscoveryClient</code> as shown below</p>\n\n<pre><code># Good \n@Autowired\nDiscoveryClient client;\n\n# Bad (binds app to a particular SD implementation)\n@Autowired\nInHouseDiscoveryClient client;\n</code></pre>\n\n<p>As such, we are required to add <code>spring-cloud-commons</code> to the project.</p>\n\n<pre><code>    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-cloud-commons&lt;/artifactId&gt;\n    &lt;/dependency&gt;\n</code></pre>\n\n<p><em>This is where the issue starts</em>.  The commons library actually autowires two additional implementations of <code>DiscoveryClient</code> - the <code>SimpleDiscoveryClient</code> and the <code>CompositeDiscoveryClient</code>.  </p>\n\n<p>This makes for an odd user experience for our clients.  Instead of simply having <code>InHouseDiscoveryClient</code>, users find themselves with these additional beans.  </p>\n\n<p>Is it possible to prevent <code>spring-cloud-commons</code>'s <code>DiscoveryClient</code> implementations from autowiring?  And if so, can this be done in our library rather than in the end-user's applications?</p>\n"},{"tags":["java","spring-boot","scheduled-tasks","shedlock"],"comments":[{"owner":{"account_id":2734183,"reputation":715,"user_id":2357209,"display_name":"Onur Başt&#252;rk"},"score":0,"creation_date":1601550787,"post_id":64152064,"comment_id":113445879,"body_markdown":"Well create a table ScheduledTask and create a column of type Bit with a name started. Check its value at the beginning of your task. Set it to 1 when the task begins to execute. And if it&#39;s already 1 don&#39;t start your task. Set it again to 0 after your task completes!","body":"Well create a table ScheduledTask and create a column of type Bit with a name started. Check its value at the beginning of your task. Set it to 1 when the task begins to execute. And if it&#39;s already 1 don&#39;t start your task. Set it again to 0 after your task completes!"}],"answers":[{"tags":[],"owner":{"account_id":1220335,"reputation":257,"user_id":1187088,"accept_rate":47,"display_name":"eRez"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1601555453,"creation_date":1601555453,"answer_id":64155468,"question_id":64152064,"body_markdown":"well, apparently in my big project there was another config class (besides the `AppConfig`) - one called `SqlSpringConfig`, inside the db module.\r\nonce i put the `LockProvider` bean there, all works like a charm","title":"Java Spring shedlock fails","body":"<p>well, apparently in my big project there was another config class (besides the <code>AppConfig</code>) - one called <code>SqlSpringConfig</code>, inside the db module.\nonce i put the <code>LockProvider</code> bean there, all works like a charm</p>\n"},{"tags":[],"owner":{"account_id":29304954,"reputation":1,"user_id":22452222,"display_name":"jaejun"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1697813802,"creation_date":1697813723,"answer_id":77331926,"question_id":64152064,"body_markdown":"You should check your taskConfiguration implementation.\r\n\r\nI have same issue in my project. Problem is below code.\r\n\r\n    @Configuration\r\n    public class SchedulerConfig implements SchedulingConfigurer {\r\n        private final int POOL_SIZE = 10;\r\n    \r\n        @Override\r\n        public void configureTasks(ScheduledTaskRegistrar scheduledTaskRegistrar) {\r\n            ThreadPoolTaskScheduler threadPoolTaskScheduler = new ThreadPoolTaskScheduler();\r\n    \r\n            threadPoolTaskScheduler.setPoolSize(POOL_SIZE);\r\n            threadPoolTaskScheduler.setThreadNamePrefix(&quot;my-scheduled-task-pool-&quot;);\r\n            threadPoolTaskScheduler.initialize();\r\n    \r\n            scheduledTaskRegistrar.setTaskScheduler(threadPoolTaskScheduler);\r\n        }\r\n    }\r\n\r\nWe add custom configuration by implementing ScheduledTaskRegistrar for using multi-threading to execute tasks. But if you override configureTasks, shedlock doesn&#39;t work. You should inject by using @Bean. So,\r\n\r\n```java\r\n    @Bean\r\n    public TaskScheduler taskScheduler() {\r\n        ThreadPoolTaskScheduler threadPoolTaskScheduler = new ThreadPoolTaskScheduler();\r\n    \r\n        threadPoolTaskScheduler.setPoolSize(POOL_SIZE);\r\n        threadPoolTaskScheduler.setThreadNamePrefix(&quot;custom-scheduler-&quot;);\r\n        threadPoolTaskScheduler.initialize();\r\n    \r\n        return threadPoolTaskScheduler;\r\n    }\r\n```\r\nwhen i change override to inject by @Bean, it works well!\r\n\r\n- official github : https://github.com/lukas-krecan/ShedLock#taskscheduler-proxy\r\n- why shedlock doesn&#39;t work : https://github.com/lukas-krecan/ShedLock/issues/137#issuecomment-481596720","title":"Java Spring shedlock fails","body":"<p>You should check your taskConfiguration implementation.</p>\n<p>I have same issue in my project. Problem is below code.</p>\n<pre><code>@Configuration\npublic class SchedulerConfig implements SchedulingConfigurer {\n    private final int POOL_SIZE = 10;\n\n    @Override\n    public void configureTasks(ScheduledTaskRegistrar scheduledTaskRegistrar) {\n        ThreadPoolTaskScheduler threadPoolTaskScheduler = new ThreadPoolTaskScheduler();\n\n        threadPoolTaskScheduler.setPoolSize(POOL_SIZE);\n        threadPoolTaskScheduler.setThreadNamePrefix(&quot;my-scheduled-task-pool-&quot;);\n        threadPoolTaskScheduler.initialize();\n\n        scheduledTaskRegistrar.setTaskScheduler(threadPoolTaskScheduler);\n    }\n}\n</code></pre>\n<p>We add custom configuration by implementing ScheduledTaskRegistrar for using multi-threading to execute tasks. But if you override configureTasks, shedlock doesn't work. You should inject by using @Bean. So,</p>\n<pre class=\"lang-java prettyprint-override\"><code>    @Bean\n    public TaskScheduler taskScheduler() {\n        ThreadPoolTaskScheduler threadPoolTaskScheduler = new ThreadPoolTaskScheduler();\n    \n        threadPoolTaskScheduler.setPoolSize(POOL_SIZE);\n        threadPoolTaskScheduler.setThreadNamePrefix(&quot;custom-scheduler-&quot;);\n        threadPoolTaskScheduler.initialize();\n    \n        return threadPoolTaskScheduler;\n    }\n</code></pre>\n<p>when i change override to inject by @Bean, it works well!</p>\n<ul>\n<li>official github : <a href=\"https://github.com/lukas-krecan/ShedLock#taskscheduler-proxy\" rel=\"nofollow noreferrer\">https://github.com/lukas-krecan/ShedLock#taskscheduler-proxy</a></li>\n<li>why shedlock doesn't work : <a href=\"https://github.com/lukas-krecan/ShedLock/issues/137#issuecomment-481596720\" rel=\"nofollow noreferrer\">https://github.com/lukas-krecan/ShedLock/issues/137#issuecomment-481596720</a></li>\n</ul>\n"}],"owner":{"account_id":1220335,"reputation":257,"user_id":1187088,"accept_rate":47,"display_name":"eRez"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":5206,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":64155468,"answer_count":2,"score":0,"last_activity_date":1697813802,"creation_date":1601542677,"question_id":64152064,"body_markdown":"i have a spring-boot app, which on production environment runs in 2 instances, resulting in scheduled tasks running twice.  to avoid that i&#39;m trying use shedlock, as explained [here][1] and [here][2], but it has no affect. \r\ni&#39;m already using a MySql db, to which i added a `shedlock` table as explained on both of the examples above.\r\n\r\nmy project&#39;s structure is as follows (partially) - \r\n\r\n[![enter image description here][3]][3]\r\n\r\nin my `application.properties` file i have this settings - \r\n\r\n    db.driver=com.mysql.cj.jdbc.Driver\r\n    db.url=jdbc:mysql://localhost:3306/b4ad?autoReconnect=true&amp;useSSL=false&amp;useUnicode=true&amp;useJDBCCompliantTimezoneShift=true&amp;useLegacyDatetimeCode=false&amp;serverTimezone=UTC\r\n    db.username=*****\r\n    db.password=*****\r\n\r\nto the `AppConfig` class i added this annotation - \r\n\r\n    @EnableSchedulerLock(defaultLockAtMostFor = &quot;PT30S&quot;)\r\n\r\nand this bean - \r\n\r\n    @Bean\r\n    public LockProvider lockProvider(DataSource dataSource) {\r\n        return new JdbcTemplateLockProvider(dataSource, &quot;b4ad.shedlock&quot;);\r\n    }\r\n\r\nand in the `ScheduledManager` class i have this scheduled task - \r\n\r\n     @Scheduled(cron = &quot;0 0/1 * * * ?&quot;)\r\n    @SchedulerLock(name = &quot;deactivateExpiredOrganizations&quot;, lockAtLeastFor = &quot;PT5M&quot;)\r\n    public void deactivateExpiredOrganizations() {\r\n        // my code...\r\n    }\r\n\r\nwhen i run my application locally on 2 instances (using 2 different ports in the `application.properties` file), looking at the log i can see that the task runs on both instances, and at the same time the `shedlock` table remains empty.\r\naccording to the second item in the [troubleshooting][4] section, it seems that i miss-configured something, but i can&#39;t tell what.\r\n\r\nany help will be appreciated.\r\n\r\n\r\n  [1]: https://www.baeldung.com/shedlock-spring\r\n  [2]: https://github.com/lukas-krecan/ShedLock\r\n  [3]: https://i.stack.imgur.com/FXlFk.png\r\n  [4]: https://github.com/lukas-krecan/ShedLock#troubleshooting","title":"Java Spring shedlock fails","body":"<p>i have a spring-boot app, which on production environment runs in 2 instances, resulting in scheduled tasks running twice.  to avoid that i'm trying use shedlock, as explained <a href=\"https://www.baeldung.com/shedlock-spring\" rel=\"nofollow noreferrer\">here</a> and <a href=\"https://github.com/lukas-krecan/ShedLock\" rel=\"nofollow noreferrer\">here</a>, but it has no affect.\ni'm already using a MySql db, to which i added a <code>shedlock</code> table as explained on both of the examples above.</p>\n<p>my project's structure is as follows (partially) -</p>\n<p><a href=\"https://i.stack.imgur.com/FXlFk.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/FXlFk.png\" alt=\"enter image description here\" /></a></p>\n<p>in my <code>application.properties</code> file i have this settings -</p>\n<pre><code>db.driver=com.mysql.cj.jdbc.Driver\ndb.url=jdbc:mysql://localhost:3306/b4ad?autoReconnect=true&amp;useSSL=false&amp;useUnicode=true&amp;useJDBCCompliantTimezoneShift=true&amp;useLegacyDatetimeCode=false&amp;serverTimezone=UTC\ndb.username=*****\ndb.password=*****\n</code></pre>\n<p>to the <code>AppConfig</code> class i added this annotation -</p>\n<pre><code>@EnableSchedulerLock(defaultLockAtMostFor = &quot;PT30S&quot;)\n</code></pre>\n<p>and this bean -</p>\n<pre><code>@Bean\npublic LockProvider lockProvider(DataSource dataSource) {\n    return new JdbcTemplateLockProvider(dataSource, &quot;b4ad.shedlock&quot;);\n}\n</code></pre>\n<p>and in the <code>ScheduledManager</code> class i have this scheduled task -</p>\n<pre><code> @Scheduled(cron = &quot;0 0/1 * * * ?&quot;)\n@SchedulerLock(name = &quot;deactivateExpiredOrganizations&quot;, lockAtLeastFor = &quot;PT5M&quot;)\npublic void deactivateExpiredOrganizations() {\n    // my code...\n}\n</code></pre>\n<p>when i run my application locally on 2 instances (using 2 different ports in the <code>application.properties</code> file), looking at the log i can see that the task runs on both instances, and at the same time the <code>shedlock</code> table remains empty.\naccording to the second item in the <a href=\"https://github.com/lukas-krecan/ShedLock#troubleshooting\" rel=\"nofollow noreferrer\">troubleshooting</a> section, it seems that i miss-configured something, but i can't tell what.</p>\n<p>any help will be appreciated.</p>\n"},{"tags":["java","arrays","average","sliding-window"],"comments":[{"owner":{"account_id":4181375,"reputation":5091,"user_id":3426309,"display_name":"Andrey B. Panfilov"},"score":1,"creation_date":1697813042,"post_id":77331785,"comment_id":136330847,"body_markdown":"the mistake is: you are always &quot;increasing&quot; sum, however you should reset it at each iteration of outer loop. moreover, I do believe the idea of &quot;sliding window&quot; is to reuse previous computations - there should be just one loop.","body":"the mistake is: you are always &quot;increasing&quot; sum, however you should reset it at each iteration of outer loop. moreover, I do believe the idea of &quot;sliding window&quot; is to reuse previous computations - there should be just one loop."},{"owner":{"account_id":1350869,"reputation":16563,"user_id":1322268,"display_name":"shawnt00"},"score":0,"creation_date":1697816008,"post_id":77331785,"comment_id":136331420,"body_markdown":"You really just need to maximize the sum. Do the division once at the end and work with integers within the loop.","body":"You really just need to maximize the sum. Do the division once at the end and work with integers within the loop."},{"owner":{"account_id":6606677,"reputation":1024,"user_id":5103317,"display_name":"Old Dog Programmer"},"score":0,"creation_date":1697818073,"post_id":77331785,"comment_id":136331743,"body_markdown":"For reference, the LeetCode page for this problem is https://leetcode.com/problems/maximum-average-subarray-i/","body":"For reference, the LeetCode page for this problem is <a href=\"https://leetcode.com/problems/maximum-average-subarray-i/\" rel=\"nofollow noreferrer\">leetcode.com/problems/maximum-average-subarray-i</a>"},{"owner":{"account_id":6606677,"reputation":1024,"user_id":5103317,"display_name":"Old Dog Programmer"},"score":0,"creation_date":1697821090,"post_id":77331785,"comment_id":136332250,"body_markdown":"Please edit the question, and explain why you believe your code has a problem. It would help to include example input (in this case, values of `nums` and `k`), expected output, and actual output.","body":"Please edit the question, and explain why you believe your code has a problem. It would help to include example input (in this case, values of <code>nums</code> and <code>k</code>), expected output, and actual output."}],"answers":[{"tags":[],"owner":{"account_id":1352170,"reputation":34246,"user_id":1291492,"accept_rate":100,"display_name":"ControlAltDel"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1697813656,"creation_date":1697813656,"answer_id":77331920,"question_id":77331785,"body_markdown":"You don&#39;t need a double loop for this. Just iterate over the numbers array, removing the number from one end and adding the number at the other end.\r\n\r\n    int sum = 0;\r\n    int max = 0;\r\n    for (int i = 0; i &lt; k; i++) {\r\n      sum = sum + nums[i];\r\n    }\r\n    max = sum;\r\n    for (int i = k; i &lt; nums.length; i++) {\r\n      sum = sum - nums[i - k] + nums[i];\r\n      max = Math.max(sum, max);\r\n    }\r\n    double avg = max / (double) k;","title":"To find Maximum Average Subarray","body":"<p>You don't need a double loop for this. Just iterate over the numbers array, removing the number from one end and adding the number at the other end.</p>\n<pre><code>int sum = 0;\nint max = 0;\nfor (int i = 0; i &lt; k; i++) {\n  sum = sum + nums[i];\n}\nmax = sum;\nfor (int i = k; i &lt; nums.length; i++) {\n  sum = sum - nums[i - k] + nums[i];\n  max = Math.max(sum, max);\n}\ndouble avg = max / (double) k;\n</code></pre>\n"}],"owner":{"account_id":27692926,"reputation":1,"user_id":21139257,"display_name":"Bhoomika"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":71,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1697813656,"creation_date":1697812445,"question_id":77331785,"body_markdown":"This is a Leetcode problem, \r\nYou are given an integer array nums consisting of n elements, and an integer k. Find a contiguous subarray whose length is equal to k that has the maximum average value and return this value. Any answer with a calculation error less than 10-5 will be accepted.\r\n\r\nExample 1:\r\n\r\nInput: nums = [1,12,-5,-6,50,3], k = 4\r\nOutput: 12.75000\r\nExplanation: Maximum average is (12 - 5 - 6 + 50) / 4 = 51 / 4 = 12.75\r\n\r\nI feel like I&#39;m close, but there&#39;s some small logical error that I&#39;m unable to figure out. Please help me out. This is the code I wrote so far: \r\n\r\n```\r\nclass Solution {\r\n    public double findMaxAverage(int[] nums, int k) {\r\n        int n = nums.length;\r\n        int sum=0;\r\n        double avg;\r\n        double maxavg=0.0;\r\n        for(int i=0;i&lt;n-k+1;i++)\r\n        {\r\n            for(int j=0;j&lt;k;j++)\r\n            {\r\n                sum = sum+nums[i+j];\r\n            }\r\n            avg=((double)sum/(double)k);\r\n            maxavg = Math.max(avg,maxavg);\r\n        }\r\n        return maxavg;\r\n    }\r\n}\r\n```\r\n","title":"To find Maximum Average Subarray","body":"<p>This is a Leetcode problem,\nYou are given an integer array nums consisting of n elements, and an integer k. Find a contiguous subarray whose length is equal to k that has the maximum average value and return this value. Any answer with a calculation error less than 10-5 will be accepted.</p>\n<p>Example 1:</p>\n<p>Input: nums = [1,12,-5,-6,50,3], k = 4\nOutput: 12.75000\nExplanation: Maximum average is (12 - 5 - 6 + 50) / 4 = 51 / 4 = 12.75</p>\n<p>I feel like I'm close, but there's some small logical error that I'm unable to figure out. Please help me out. This is the code I wrote so far:</p>\n<pre><code>class Solution {\n    public double findMaxAverage(int[] nums, int k) {\n        int n = nums.length;\n        int sum=0;\n        double avg;\n        double maxavg=0.0;\n        for(int i=0;i&lt;n-k+1;i++)\n        {\n            for(int j=0;j&lt;k;j++)\n            {\n                sum = sum+nums[i+j];\n            }\n            avg=((double)sum/(double)k);\n            maxavg = Math.max(avg,maxavg);\n        }\n        return maxavg;\n    }\n}\n</code></pre>\n"},{"tags":["java","spring","spring-boot","kafka-consumer-api","spring-kafka"],"comments":[{"owner":{"account_id":3273937,"reputation":114855,"user_id":2756547,"accept_rate":75,"display_name":"Artem Bilan"},"score":0,"creation_date":1652281930,"post_id":72203440,"comment_id":127569988,"body_markdown":"That exception is thrown on the `this.configs = new ConcurrentHashMap&lt;&gt;(configs);`. So, looks like something in your `xxConsumerConfigs` is really `null`.","body":"That exception is thrown on the <code>this.configs = new ConcurrentHashMap&lt;&gt;(configs);</code>. So, looks like something in your <code>xxConsumerConfigs</code> is really <code>null</code>."},{"owner":{"account_id":3192259,"reputation":117599,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1652283628,"post_id":72203440,"comment_id":127570744,"body_markdown":"Spring Boot 2.6 uses Spring 5.3, you have Spring 5.2 dependencies in there.","body":"Spring Boot 2.6 uses Spring 5.3, you have Spring 5.2 dependencies in there."}],"answers":[{"tags":[],"owner":{"account_id":6305411,"reputation":63,"user_id":4898612,"display_name":"shazwashere"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1661585559,"creation_date":1661585559,"answer_id":73509138,"question_id":72203440,"body_markdown":"I was facing the same error where before the Springboot upgrade (v2.2.4 -&gt; v2.7.3), the code was working fine and post-upgrade, it started throwing a `NullPointerException`. I would strongly recommend debugging the code and go inside Spring libraries to understand which exact property is failing. In my case, it was \r\n\r\n        SslConfigs.SSL_ENDPOINT_IDENTIFICATION_ALGORITHM_CONFIG=\r\n    or\r\n        ssl.endpoint.identification.algorithm=\r\n\r\nwhich had been working fine as a `null` before the upgrade. But after the upgrade, it had to be set to an empty String due to changes in Kafka library.\r\n\r\nFound help from this answer: https://stackoverflow.com/a/56648768/4898612.\r\n\r\nGood luck!\r\n","title":"DefaultKafkaConsumerFactory - ConcurrentHashMap - NullPointerException","body":"<p>I was facing the same error where before the Springboot upgrade (v2.2.4 -&gt; v2.7.3), the code was working fine and post-upgrade, it started throwing a <code>NullPointerException</code>. I would strongly recommend debugging the code and go inside Spring libraries to understand which exact property is failing. In my case, it was</p>\n<pre><code>    SslConfigs.SSL_ENDPOINT_IDENTIFICATION_ALGORITHM_CONFIG=\nor\n    ssl.endpoint.identification.algorithm=\n</code></pre>\n<p>which had been working fine as a <code>null</code> before the upgrade. But after the upgrade, it had to be set to an empty String due to changes in Kafka library.</p>\n<p>Found help from this answer: <a href=\"https://stackoverflow.com/a/56648768/4898612\">https://stackoverflow.com/a/56648768/4898612</a>.</p>\n<p>Good luck!</p>\n"},{"tags":[],"owner":{"account_id":11070249,"reputation":25,"user_id":8128615,"display_name":"SPACE _PRO"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1697813590,"creation_date":1697813590,"answer_id":77331911,"question_id":72203440,"body_markdown":"Please make sure all the values fetched from kafkaListenerConfig are not null, i.e. props.put(ConsumerConfig.BOOTSTRAP_SERVERS_CONFIG, **kafkaListenerConfig.getKafkaServerConfig**());\r\n\r\nIf one of the required parameter is null, DefaultKafkaConsumer throws NPE. ","title":"DefaultKafkaConsumerFactory - ConcurrentHashMap - NullPointerException","body":"<p>Please make sure all the values fetched from kafkaListenerConfig are not null, i.e. props.put(ConsumerConfig.BOOTSTRAP_SERVERS_CONFIG, <strong>kafkaListenerConfig.getKafkaServerConfig</strong>());</p>\n<p>If one of the required parameter is null, DefaultKafkaConsumer throws NPE.</p>\n"}],"owner":{"account_id":16511022,"reputation":75,"user_id":11929768,"display_name":"Madhu"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":932,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1697813590,"creation_date":1652281718,"question_id":72203440,"body_markdown":"I am using kafka consumer. i did an upgrade from Spring boot 1.5 to 2.6. now when i run the applicaiton, its failing to start throwing NullPointerException . please let me know if any one could help me on this issue.\r\n```\r\nCaused by: java.lang.NullPointerException\r\n\tat java.util.concurrent.ConcurrentHashMap.putVal(ConcurrentHashMap.java:1011) ~[?:1.8.0_25]\r\n\tat java.util.concurrent.ConcurrentHashMap.putAll(ConcurrentHashMap.java:1084) ~[?:1.8.0_25]\r\n\tat java.util.concurrent.ConcurrentHashMap.&lt;init&gt;(ConcurrentHashMap.java:852) ~[?:1.8.0_25]\r\n\tat org.springframework.kafka.core.DefaultKafkaConsumerFactory.&lt;init&gt;(DefaultKafkaConsumerFactory.java:129) ~[spring-kafka-2.8.4.jar:2.8.4]\r\n\tat org.springframework.kafka.core.DefaultKafkaConsumerFactory.&lt;init&gt;(DefaultKafkaConsumerFactory.java:98) ~[spring-kafka-2.8.4.jar:2.8.4]\r\n\r\nFailed to instantiate [org.springframework.kafka.core.ConsumerFactory\r\n```\r\npom.xml\r\n```xml\r\n&lt;parent&gt;\r\n\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t&lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\r\n\t\t&lt;version&gt;2.6.6&lt;/version&gt;\r\n\t&lt;/parent&gt;\r\n&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.kafka&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-kafka&lt;/artifactId&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n            &lt;groupId&gt;org.springframework.integration&lt;/groupId&gt;\r\n            &lt;artifactId&gt;spring-integration-kafka&lt;/artifactId&gt;\r\n        &lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.apache.kafka&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;kafka-clients&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;3.0.0&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t    &lt;groupId&gt;org.springframework&lt;/groupId&gt;\r\n\t\t    &lt;artifactId&gt;spring-tx&lt;/artifactId&gt;\r\n\t\t    &lt;version&gt;5.2.12.RELEASE&lt;/version&gt;\r\n\t\t&lt;/dependency&gt; \r\n```\r\nReceiverConfigClass:\r\n-------------------\r\n```java\r\n@Slf4j\r\n@Configuration\r\n@EnableKafka\r\n@ExcludeKafkaReceiver\r\npublic class XXTriggerKakfaReceiverConfig {\r\n   \r\n\t@Autowired\r\n\txxTriggerKafkaManagedBean kafkaListenerConfig;\r\n\r\n    @Bean\r\n    public Map&lt;String, Object&gt; xxConsumerConfigs() {\r\n        Map&lt;String, Object&gt; props = new HashMap&lt;&gt;();\r\n        kafkaListenerConfig.getKafkaServerConfig());\r\n        props.put(ConsumerConfig.BOOTSTRAP_SERVERS_CONFIG, kafkaListenerConfig.getKafkaServerConfig());\r\n        props.put(ConsumerConfig.KEY_DESERIALIZER_CLASS_CONFIG, StringDeserializer.class);\r\n\t\tprops.put(ConsumerConfig.VALUE_DESERIALIZER_CLASS_CONFIG, MessageSerializerType.getValue(kafkaListenerConfig.getValueDeserializerClass()));\r\n        props.put(Constants.AVRO_MSG_CLASS_TYPE, kafkaListenerConfig.getAvroMessageClassType());\r\n        // consumer groups allow a pool of processes to divide the work of\r\n        // consuming and processing records\r\n        props.put(ConsumerConfig.PARTITION_ASSIGNMENT_STRATEGY_CONFIG, kafkaListenerConfig.getPartitionAssignmentStrategy());\r\n        props.put(ConsumerConfig.GROUP_ID_CONFIG, kafkaListenerConfig.getGroupId());\r\n        props.put(ConsumerConfig.AUTO_OFFSET_RESET_CONFIG, kafkaListenerConfig.getAutoOffsetReset());\r\n        props.put(ConsumerConfig.ENABLE_AUTO_COMMIT_CONFIG, kafkaListenerConfig.getEnableAutoCommit());\r\n        props.put(ConsumerConfig.SESSION_TIMEOUT_MS_CONFIG, kafkaListenerConfig.getSessionTimeoutMS());\r\n        props.put(ConsumerConfig.HEARTBEAT_INTERVAL_MS_CONFIG, kafkaListenerConfig.getHeartbeatIntervalMS());\r\n        props.put(ConsumerConfig.REQUEST_TIMEOUT_MS_CONFIG, kafkaListenerConfig.getRequestTimeoutMS());\r\n        props.put(ConsumerConfig.FETCH_MAX_WAIT_MS_CONFIG, kafkaListenerConfig.getFetchMaxWaitMS());\r\n        props.put(ConsumerConfig.RECONNECT_BACKOFF_MS_CONFIG, kafkaListenerConfig.getReconnectBackoffMS());\r\n        props.put(ConsumerConfig.RETRY_BACKOFF_MS_CONFIG, kafkaListenerConfig.getRetryBackoffMS());\r\n        props.put(ConsumerConfig.MAX_PARTITION_FETCH_BYTES_CONFIG, kafkaListenerConfig.getMaxPartitionFetchSize());\r\n        props.put(ConsumerConfig.FETCH_MIN_BYTES_CONFIG, kafkaListenerConfig.getFetchMinBytes());\r\n        props.put(ConsumerConfig.MAX_POLL_RECORDS_CONFIG, kafkaListenerConfig.getMaxPollRecords());\r\n\r\n        return props;\r\n    }\r\n\r\n    @Bean\r\n    public ConsumerFactory&lt;String, Object&gt; xxConsumerFactory() {\r\n        return new DefaultKafkaConsumerFactory&lt;&gt;(xxConsumerConfigs());  //This is the place throwing Null pointer Exception\r\n    }\r\n\r\n    /**\r\n     * A concurrent Kafka listener with concurrency managed through {concurrent_kafka_listeners} property value.\r\n     *\r\n     * @return ConcurrentKafkaListenerContainerFactory instance \r\n     */\r\n    @Bean\r\n    public ConcurrentKafkaListenerContainerFactory&lt;String, Object&gt; xxKafkaListenerContainerFactory() {\r\n        ConcurrentKafkaListenerContainerFactory&lt;String, Object&gt; factory = new ConcurrentKafkaListenerContainerFactory&lt;&gt;();\r\n        factory.setConsumerFactory(xxConsumerFactory());\r\n        factory.setConcurrency(kafkaListenerConfig.getNumberOfConcurrentListeners());\r\n        factory.getContainerProperties().setAckMode(AckMode.MANUAL_IMMEDIATE);\r\n        ErrorHandler errorHandler = new KafkaListenerErrorHandler();\r\n        errorHandler.setAckAfterHandle(false);        \r\n        factory.setCommonErrorHandler((CommonErrorHandler) errorHandler);\r\n        return factory;\r\n    }\r\n\r\n    /**\r\n     * A concurrent Kafka batch listener with concurrency managed through {concurrent_kafka_listeners} property value.\r\n     *\r\n     * @return ConcurrentKafkaListenerContainerFactory instance\r\n     */\r\n    @Bean\r\n    public ConcurrentKafkaListenerContainerFactory&lt;String, Object&gt; xxKafkaBatchListenerContainerFactory() {\r\n        ConcurrentKafkaListenerContainerFactory&lt;String, Object&gt; factory = new ConcurrentKafkaListenerContainerFactory&lt;&gt;();\r\n        factory.setConsumerFactory(xxConsumerFactory());\r\n        factory.setConcurrency(kafkaListenerConfig.getNumberOfConcurrentListeners());\r\n        factory.getContainerProperties().setAckMode(AckMode.MANUAL_IMMEDIATE);\r\n        ErrorHandler errorHandler = new KafkaListenerErrorHandler(); \r\n        errorHandler.setAckAfterHandle(false);        \r\n        factory.setCommonErrorHandler((CommonErrorHandler) errorHandler);\r\n        factory.setBatchListener(true);\r\n        return factory;\r\n    }\r\n```","title":"DefaultKafkaConsumerFactory - ConcurrentHashMap - NullPointerException","body":"<p>I am using kafka consumer. i did an upgrade from Spring boot 1.5 to 2.6. now when i run the applicaiton, its failing to start throwing NullPointerException . please let me know if any one could help me on this issue.</p>\n<pre><code>Caused by: java.lang.NullPointerException\n    at java.util.concurrent.ConcurrentHashMap.putVal(ConcurrentHashMap.java:1011) ~[?:1.8.0_25]\n    at java.util.concurrent.ConcurrentHashMap.putAll(ConcurrentHashMap.java:1084) ~[?:1.8.0_25]\n    at java.util.concurrent.ConcurrentHashMap.&lt;init&gt;(ConcurrentHashMap.java:852) ~[?:1.8.0_25]\n    at org.springframework.kafka.core.DefaultKafkaConsumerFactory.&lt;init&gt;(DefaultKafkaConsumerFactory.java:129) ~[spring-kafka-2.8.4.jar:2.8.4]\n    at org.springframework.kafka.core.DefaultKafkaConsumerFactory.&lt;init&gt;(DefaultKafkaConsumerFactory.java:98) ~[spring-kafka-2.8.4.jar:2.8.4]\n\nFailed to instantiate [org.springframework.kafka.core.ConsumerFactory\n</code></pre>\n<p>pom.xml</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;parent&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\n        &lt;version&gt;2.6.6&lt;/version&gt;\n    &lt;/parent&gt;\n&lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.kafka&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-kafka&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.integration&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-integration-kafka&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.apache.kafka&lt;/groupId&gt;\n            &lt;artifactId&gt;kafka-clients&lt;/artifactId&gt;\n            &lt;version&gt;3.0.0&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-tx&lt;/artifactId&gt;\n            &lt;version&gt;5.2.12.RELEASE&lt;/version&gt;\n        &lt;/dependency&gt; \n</code></pre>\n<h2>ReceiverConfigClass:</h2>\n<pre class=\"lang-java prettyprint-override\"><code>@Slf4j\n@Configuration\n@EnableKafka\n@ExcludeKafkaReceiver\npublic class XXTriggerKakfaReceiverConfig {\n   \n    @Autowired\n    xxTriggerKafkaManagedBean kafkaListenerConfig;\n\n    @Bean\n    public Map&lt;String, Object&gt; xxConsumerConfigs() {\n        Map&lt;String, Object&gt; props = new HashMap&lt;&gt;();\n        kafkaListenerConfig.getKafkaServerConfig());\n        props.put(ConsumerConfig.BOOTSTRAP_SERVERS_CONFIG, kafkaListenerConfig.getKafkaServerConfig());\n        props.put(ConsumerConfig.KEY_DESERIALIZER_CLASS_CONFIG, StringDeserializer.class);\n        props.put(ConsumerConfig.VALUE_DESERIALIZER_CLASS_CONFIG, MessageSerializerType.getValue(kafkaListenerConfig.getValueDeserializerClass()));\n        props.put(Constants.AVRO_MSG_CLASS_TYPE, kafkaListenerConfig.getAvroMessageClassType());\n        // consumer groups allow a pool of processes to divide the work of\n        // consuming and processing records\n        props.put(ConsumerConfig.PARTITION_ASSIGNMENT_STRATEGY_CONFIG, kafkaListenerConfig.getPartitionAssignmentStrategy());\n        props.put(ConsumerConfig.GROUP_ID_CONFIG, kafkaListenerConfig.getGroupId());\n        props.put(ConsumerConfig.AUTO_OFFSET_RESET_CONFIG, kafkaListenerConfig.getAutoOffsetReset());\n        props.put(ConsumerConfig.ENABLE_AUTO_COMMIT_CONFIG, kafkaListenerConfig.getEnableAutoCommit());\n        props.put(ConsumerConfig.SESSION_TIMEOUT_MS_CONFIG, kafkaListenerConfig.getSessionTimeoutMS());\n        props.put(ConsumerConfig.HEARTBEAT_INTERVAL_MS_CONFIG, kafkaListenerConfig.getHeartbeatIntervalMS());\n        props.put(ConsumerConfig.REQUEST_TIMEOUT_MS_CONFIG, kafkaListenerConfig.getRequestTimeoutMS());\n        props.put(ConsumerConfig.FETCH_MAX_WAIT_MS_CONFIG, kafkaListenerConfig.getFetchMaxWaitMS());\n        props.put(ConsumerConfig.RECONNECT_BACKOFF_MS_CONFIG, kafkaListenerConfig.getReconnectBackoffMS());\n        props.put(ConsumerConfig.RETRY_BACKOFF_MS_CONFIG, kafkaListenerConfig.getRetryBackoffMS());\n        props.put(ConsumerConfig.MAX_PARTITION_FETCH_BYTES_CONFIG, kafkaListenerConfig.getMaxPartitionFetchSize());\n        props.put(ConsumerConfig.FETCH_MIN_BYTES_CONFIG, kafkaListenerConfig.getFetchMinBytes());\n        props.put(ConsumerConfig.MAX_POLL_RECORDS_CONFIG, kafkaListenerConfig.getMaxPollRecords());\n\n        return props;\n    }\n\n    @Bean\n    public ConsumerFactory&lt;String, Object&gt; xxConsumerFactory() {\n        return new DefaultKafkaConsumerFactory&lt;&gt;(xxConsumerConfigs());  //This is the place throwing Null pointer Exception\n    }\n\n    /**\n     * A concurrent Kafka listener with concurrency managed through {concurrent_kafka_listeners} property value.\n     *\n     * @return ConcurrentKafkaListenerContainerFactory instance \n     */\n    @Bean\n    public ConcurrentKafkaListenerContainerFactory&lt;String, Object&gt; xxKafkaListenerContainerFactory() {\n        ConcurrentKafkaListenerContainerFactory&lt;String, Object&gt; factory = new ConcurrentKafkaListenerContainerFactory&lt;&gt;();\n        factory.setConsumerFactory(xxConsumerFactory());\n        factory.setConcurrency(kafkaListenerConfig.getNumberOfConcurrentListeners());\n        factory.getContainerProperties().setAckMode(AckMode.MANUAL_IMMEDIATE);\n        ErrorHandler errorHandler = new KafkaListenerErrorHandler();\n        errorHandler.setAckAfterHandle(false);        \n        factory.setCommonErrorHandler((CommonErrorHandler) errorHandler);\n        return factory;\n    }\n\n    /**\n     * A concurrent Kafka batch listener with concurrency managed through {concurrent_kafka_listeners} property value.\n     *\n     * @return ConcurrentKafkaListenerContainerFactory instance\n     */\n    @Bean\n    public ConcurrentKafkaListenerContainerFactory&lt;String, Object&gt; xxKafkaBatchListenerContainerFactory() {\n        ConcurrentKafkaListenerContainerFactory&lt;String, Object&gt; factory = new ConcurrentKafkaListenerContainerFactory&lt;&gt;();\n        factory.setConsumerFactory(xxConsumerFactory());\n        factory.setConcurrency(kafkaListenerConfig.getNumberOfConcurrentListeners());\n        factory.getContainerProperties().setAckMode(AckMode.MANUAL_IMMEDIATE);\n        ErrorHandler errorHandler = new KafkaListenerErrorHandler(); \n        errorHandler.setAckAfterHandle(false);        \n        factory.setCommonErrorHandler((CommonErrorHandler) errorHandler);\n        factory.setBatchListener(true);\n        return factory;\n    }\n</code></pre>\n"},{"tags":["java","spring","multithreading","spring-jms"],"comments":[{"owner":{"account_id":18991509,"reputation":190,"user_id":13860684,"display_name":"Nine Friends"},"score":0,"creation_date":1697913610,"post_id":77331062,"comment_id":136340200,"body_markdown":"What is the purpose of letting the messages being sent to so many different queues, if it is only one single application which builds one single joined list of messages from all those queues? Would it make sense to change your overall queueing design to have only one queue as input to your application and let all message producers use this queue as destination?","body":"What is the purpose of letting the messages being sent to so many different queues, if it is only one single application which builds one single joined list of messages from all those queues? Would it make sense to change your overall queueing design to have only one queue as input to your application and let all message producers use this queue as destination?"},{"owner":{"account_id":15569141,"reputation":33,"user_id":11232057,"display_name":"Ru5Ty"},"score":0,"creation_date":1698036900,"post_id":77331062,"comment_id":136349514,"body_markdown":"Actually this application is basically like a one stop admin tool which takes data i.e. message from many differennt department and applications from the whole bank like credit processing, bank transfer, loan processing which are spread across organistion.\nThis application was built many years ago for managers and supervisor to over see the internal operations, now our team was given this project to improve the application and perfromace and port into newer srping version only thing is the perfiomance we are not able to get past 20 mins.","body":"Actually this application is basically like a one stop admin tool which takes data i.e. message from many differennt department and applications from the whole bank like credit processing, bank transfer, loan processing which are spread across organistion. This application was built many years ago for managers and supervisor to over see the internal operations, now our team was given this project to improve the application and perfromace and port into newer srping version only thing is the perfiomance we are not able to get past 20 mins."}],"owner":{"account_id":15569141,"reputation":33,"user_id":11232057,"display_name":"Ru5Ty"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":36,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1697813579,"creation_date":1697806251,"question_id":77331062,"body_markdown":"I am working on a project in my company where we have a application that displays message from the queues **IBM MQ** and the user can select and do operation on that message like send them to other queue or remove them after inspecting them.\r\n\r\nThe problem is as the application is rest service we have to get all the messages in all the MQs once user hits the page in react application.\r\n\r\nThere will be different brokers as well. For example we have 50 Mqs and two brokers (all MQ are there in each broker) that means we have 100 Mqs from which we have to browse and parse the message into json and send the message to front end\r\n\r\nProblem is the time taken currently is too long it takes 20 mins plus to read all the message\r\n\r\nAs I can not share the real code I have added dummy code \r\n\r\n```\r\n    public Object getAllMessage() {\r\n\r\n//        Some list of mqs\r\n        List&lt;String&gt; mqs = new ArrayList&lt;&gt;();\r\n\r\n//        Some list of connection Factory\r\n        List&lt;ConnectionFactory&gt; connectionFactoryList = new ArrayList&lt;&gt;();\r\n\r\n//        Logic to read\r\n        connectionFactoryList.forEach(c -&gt; {\r\n            CachingConnectionFactory cachingConnectionFactory = new CachingConnectionFactory(c);\r\n            cachingConnectionFactory.setSessionCacheSize(10);\r\n\r\n            JmsTemplate jmsTemplate = new JmsTemplate(cachingConnectionFactory);\r\n\r\n//            Tried this approach after reading some posts where we can use a single session \r\n//            and read all the queues using that session then move on to next Queue Manager\r\n//            but it didnt help in performance increase\r\n            jmsTemplate.execute(session -&gt; {\r\n                mqs.stream().parallel().forEach(mq -&gt; {\r\n                    Enumeration enumeration = session.createBrowser(session.createQueue(mq)).getEnumeration();\r\n\r\n                    while (enumeration.hasMoreElements()) {\r\n//                        process the message and add it to a List\r\n                    }\r\n\r\n                });\r\n                return null;\r\n            });\r\n\r\n        });\r\n    return null;\r\n    }\r\n```\r\n\r\nWhat can I do to improve the performance, Can I run each mq read operation in a new thread using jms Template, Can Jms Template or session call be shared among threads? \r\ncan we cerate multiple sessions for single connection factory ?\r\n\r\nNot experienced in multithreading any help or dummy code will help a lot.\r\n\r\nThe end goal io to have all messages from all MQ from all Queue Managers into a list taht will be sent back to the front end and the business team can do their operation\r\n\r\nNOTE : Dont want to delete the message fro MQ just read it as per the buisness requirement, need the fastest way to read all the message \r\n\r\n\r\n","title":"How to read multuiple Queues with spring jmsTemplate","body":"<p>I am working on a project in my company where we have a application that displays message from the queues <strong>IBM MQ</strong> and the user can select and do operation on that message like send them to other queue or remove them after inspecting them.</p>\n<p>The problem is as the application is rest service we have to get all the messages in all the MQs once user hits the page in react application.</p>\n<p>There will be different brokers as well. For example we have 50 Mqs and two brokers (all MQ are there in each broker) that means we have 100 Mqs from which we have to browse and parse the message into json and send the message to front end</p>\n<p>Problem is the time taken currently is too long it takes 20 mins plus to read all the message</p>\n<p>As I can not share the real code I have added dummy code</p>\n<pre><code>    public Object getAllMessage() {\n\n//        Some list of mqs\n        List&lt;String&gt; mqs = new ArrayList&lt;&gt;();\n\n//        Some list of connection Factory\n        List&lt;ConnectionFactory&gt; connectionFactoryList = new ArrayList&lt;&gt;();\n\n//        Logic to read\n        connectionFactoryList.forEach(c -&gt; {\n            CachingConnectionFactory cachingConnectionFactory = new CachingConnectionFactory(c);\n            cachingConnectionFactory.setSessionCacheSize(10);\n\n            JmsTemplate jmsTemplate = new JmsTemplate(cachingConnectionFactory);\n\n//            Tried this approach after reading some posts where we can use a single session \n//            and read all the queues using that session then move on to next Queue Manager\n//            but it didnt help in performance increase\n            jmsTemplate.execute(session -&gt; {\n                mqs.stream().parallel().forEach(mq -&gt; {\n                    Enumeration enumeration = session.createBrowser(session.createQueue(mq)).getEnumeration();\n\n                    while (enumeration.hasMoreElements()) {\n//                        process the message and add it to a List\n                    }\n\n                });\n                return null;\n            });\n\n        });\n    return null;\n    }\n</code></pre>\n<p>What can I do to improve the performance, Can I run each mq read operation in a new thread using jms Template, Can Jms Template or session call be shared among threads?\ncan we cerate multiple sessions for single connection factory ?</p>\n<p>Not experienced in multithreading any help or dummy code will help a lot.</p>\n<p>The end goal io to have all messages from all MQ from all Queue Managers into a list taht will be sent back to the front end and the business team can do their operation</p>\n<p>NOTE : Dont want to delete the message fro MQ just read it as per the buisness requirement, need the fastest way to read all the message</p>\n"},{"tags":["java","caching","ignite"],"comments":[{"owner":{"account_id":5190889,"reputation":2147,"user_id":4153863,"display_name":"Stanislav Lukyanov"},"score":0,"creation_date":1664219323,"post_id":73850877,"comment_id":130416800,"body_markdown":"Can you share the code you use to subscribe to Continuous Queries? I assume all clients subscribe to them?","body":"Can you share the code you use to subscribe to Continuous Queries? I assume all clients subscribe to them?"},{"owner":{"account_id":5089244,"reputation":1920,"user_id":4082814,"display_name":"Danut Radoaica"},"score":0,"creation_date":1664306793,"post_id":73850877,"comment_id":130440398,"body_markdown":"You should increase timeout on java thin client: ClientConfiguration target = new ClientConfiguration().setAddresses(&quot;127.0.0.1:10800&quot;, &quot;127.0.0.1:10801&quot;).setTimeout(&lt;&lt;time in milliseconds&gt;&gt;);","body":"You should increase timeout on java thin client: ClientConfiguration target = new ClientConfiguration().setAddresses(&quot;127.0.0.1:10800&quot;, &quot;127.0.0.1:10801&quot;).setTimeout(&lt;&lt;time in milliseconds&gt;&gt;);"},{"owner":{"account_id":2849183,"reputation":83,"user_id":2446727,"display_name":"Vikas Tyagi"},"score":0,"creation_date":1664340999,"post_id":73850877,"comment_id":130446286,"body_markdown":"@DanutRadoaica  we are using thick client. Will try to that for them.","body":"@DanutRadoaica  we are using thick client. Will try to that for them."},{"owner":{"account_id":5089244,"reputation":1920,"user_id":4082814,"display_name":"Danut Radoaica"},"score":0,"creation_date":1664349926,"post_id":73850877,"comment_id":130448439,"body_markdown":"for thick client: IgniteConfiguration#setNetworkTimeout, IgniteConfiguration#setFailureDetectionTimeout, IgniteConfiguration#setClientFailureDetectionTimeout, IgniteConfiguration#getDiscoverySpi#setNetworkTimeout,IgniteConfiguration#getDiscoverySpi#setSocketWriteTimeout","body":"for thick client: IgniteConfiguration#setNetworkTimeout, IgniteConfiguration#setFailureDetectionTimeout, IgniteConfiguration#setClientFailureDetectionTimeout, IgniteConfiguration#getDiscoverySpi#setNetworkTimeout,Ignite&zwnj;&#8203;Configuration#getDis&zwnj;&#8203;coverySpi#setSocketW&zwnj;&#8203;riteTimeout"},{"owner":{"account_id":2849183,"reputation":83,"user_id":2446727,"display_name":"Vikas Tyagi"},"score":0,"creation_date":1664355310,"post_id":73850877,"comment_id":130450355,"body_markdown":"@StanislavLukyanov I found code which we run from our worker node. I have added it as part of original question.","body":"@StanislavLukyanov I found code which we run from our worker node. I have added it as part of original question."},{"owner":{"account_id":5190889,"reputation":2147,"user_id":4153863,"display_name":"Stanislav Lukyanov"},"score":0,"creation_date":1664359488,"post_id":73850877,"comment_id":130451887,"body_markdown":"Hmm... Someone should write a test that: \n1. Starts multiple thick clients and a cache\n2. Starts CQ on each\n3. Writes into the cache continuously\n4. Hard-kills one of the clients (`kill -9` or use some test trickery to avoid client from waving goodbye)\n\nThere might be one already in the Ignite codebase. Unfortunately, I don&#39;t have time to check right now.","body":"Hmm... Someone should write a test that:  1. Starts multiple thick clients and a cache 2. Starts CQ on each 3. Writes into the cache continuously 4. Hard-kills one of the clients (<code>kill -9</code> or use some test trickery to avoid client from waving goodbye)  There might be one already in the Ignite codebase. Unfortunately, I don&#39;t have time to check right now."}],"owner":{"account_id":2849183,"reputation":83,"user_id":2446727,"display_name":"Vikas Tyagi"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":310,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1697813396,"creation_date":1664177724,"question_id":73850877,"body_markdown":"We have Ignite cluster having server(data/cache) and client(worker) nodes where client pulls data from server nodes to perform computation. This setup works fine except sometime this whole cluster becomes unresponsive and we have to restart the complete grid. The pattern I observe is:\r\n\r\n 1. Any of the client(worker) node exit the cluster/topology w/o publishing Node exit event.\r\n 2. This triggers following exception on data nodes.\r\n&lt;!-- language: lang-none --&gt;\r\n\r\n    org.apache.ignite.IgniteCheckedException: Timeout was reached before computation completed.\r\n    \tat org.apache.ignite.internal.util.IgniteUtils.cast(IgniteUtils.java:7563) ~[ignite-core-2.9.1.jar:2.9.1]\r\n    \tat org.apache.ignite.internal.util.future.GridFutureAdapter.resolve(GridFutureAdapter.java:260) ~[ignite-core-2.9.1.jar:2.9.1]\r\n    \tat org.apache.ignite.internal.util.future.GridFutureAdapter.get0(GridFutureAdapter.java:172) ~[ignite-core-2.9.1.jar:2.9.1]\r\n    \tat org.apache.ignite.internal.util.future.GridFutureAdapter.get(GridFutureAdapter.java:141) ~[ignite-core-2.9.1.jar:2.9.1]\r\n    \tat org.apache.ignite.spi.communication.tcp.TcpCommunicationSpi.reserveClient(TcpCommunicationSpi.java:3229) [ignite-core-2.9.1.jar:2.9.1]\r\n    \tat org.apache.ignite.spi.communication.tcp.TcpCommunicationSpi.sendMessage0(TcpCommunicationSpi.java:3013) [ignite-core-2.9.1.jar:2.9.1]\r\n    \tat org.apache.ignite.spi.communication.tcp.TcpCommunicationSpi.sendMessage(TcpCommunicationSpi.java:2960) [ignite-core-2.9.1.jar:2.9.1]\r\n    \tat org.apache.ignite.internal.managers.communication.GridIoManager.send(GridIoManager.java:2100) [ignite-core-2.9.1.jar:2.9.1]\r\n    \tat org.apache.ignite.internal.managers.communication.GridIoManager.sendOrderedMessage(GridIoManager.java:2365) [ignite-core-2.9.1.jar:2.9.1]\r\n    \tat org.apache.ignite.internal.processors.continuous.GridContinuousProcessor.sendWithRetries(GridContinuousProcessor.java:1964) [ignite-core-2.9.1.jar:2.9.1]\r\n    \tat org.apache.ignite.internal.processors.continuous.GridContinuousProcessor.sendWithRetries(GridContinuousProcessor.java:1935) [ignite-core-2.9.1.jar:2.9.1]\r\n    \tat org.apache.ignite.internal.processors.continuous.GridContinuousProcessor.sendWithRetries(GridContinuousProcessor.java:1917) [ignite-core-2.9.1.jar:2.9.1]\r\n    \tat org.apache.ignite.internal.processors.continuous.GridContinuousProcessor.sendNotification(GridContinuousProcessor.java:1324) [ignite-core-2.9.1.jar:2.9.1]\r\n    \tat org.apache.ignite.internal.processors.continuous.GridContinuousProcessor.addNotification(GridContinuousProcessor.java:1261) [ignite-core-2.9.1.jar:2.9.1]\r\n    \tat org.apache.ignite.internal.processors.cache.query.continuous.CacheContinuousQueryHandler.onEntryUpdate(CacheContinuousQueryHandler.java:1059) [ignite-core-2.9.1.jar:2.9.1]\r\n    \tat org.apache.ignite.internal.processors.cache.query.continuous.CacheContinuousQueryHandler.access$600(CacheContinuousQueryHandler.java:90) [ignite-core-2.9.1.jar:2.9.1]\r\n    \tat org.apache.ignite.internal.processors.cache.query.continuous.CacheContinuousQueryHandler$2.onEntryUpdated(CacheContinuousQueryHandler.java:459) [ignite-core-2.9.1.jar:2.9.1]\r\n    \tat org.apache.ignite.internal.processors.cache.query.continuous.CacheContinuousQueryManager.onEntryUpdated(CacheContinuousQueryManager.java:447) [ignite-core-2.9.1.jar:2.9.1]\r\n    \tat org.apache.ignite.internal.processors.cache.GridCacheMapEntry.innerUpdate(GridCacheMapEntry.java:2495) [ignite-core-2.9.1.jar:2.9.1]\r\n    \tat org.apache.ignite.internal.processors.cache.distributed.dht.atomic.GridDhtAtomicCache.updateSingle(GridDhtAtomicCache.java:2657) [ignite-core-2.9.1.jar:2.9.1]\r\n    \tat org.apache.ignite.internal.processors.cache.distributed.dht.atomic.GridDhtAtomicCache.update(GridDhtAtomicCache.java:2118) [ignite-core-2.9.1.jar:2.9.1]\r\n    \tat org.apache.ignite.internal.processors.cache.distributed.dht.atomic.GridDhtAtomicCache.updateAllAsyncInternal0(GridDhtAtomicCache.java:1935) [ignite-core-2.9.1.jar:2.9.1]\r\n    \tat org.apache.ignite.internal.processors.cache.distributed.dht.atomic.GridDhtAtomicCache.updateAllAsyncInternal(GridDhtAtomicCache.java:1734) [ignite-core-2.9.1.jar:2.9.1]\r\n    \tat org.apache.ignite.internal.processors.cache.distributed.dht.atomic.GridDhtAtomicCache.processNearAtomicUpdateRequest(GridDhtAtomicCache.java:3322) [ignite-core-2.9.1.jar:2.9.1]\r\n    \tat org.apache.ignite.internal.processors.cache.distributed.dht.atomic.GridDhtAtomicCache.access$400(GridDhtAtomicCache.java:141) [ignite-core-2.9.1.jar:2.9.1]\r\n    \tat org.apache.ignite.internal.processors.cache.distributed.dht.atomic.GridDhtAtomicCache$5.apply(GridDhtAtomicCache.java:273) [ignite-core-2.9.1.jar:2.9.1]\r\n    \tat org.apache.ignite.internal.processors.cache.distributed.dht.atomic.GridDhtAtomicCache$5.apply(GridDhtAtomicCache.java:268) [ignite-core-2.9.1.jar:2.9.1]\r\n    \tat org.apache.ignite.internal.processors.cache.GridCacheIoManager.processMessage(GridCacheIoManager.java:1142) [ignite-core-2.9.1.jar:2.9.1]\r\n    \tat org.apache.ignite.internal.processors.cache.GridCacheIoManager.onMessage0(GridCacheIoManager.java:591) [ignite-core-2.9.1.jar:2.9.1]\r\n    \tat org.apache.ignite.internal.processors.cache.GridCacheIoManager.handleMessage(GridCacheIoManager.java:392) [ignite-core-2.9.1.jar:2.9.1]\r\n    \tat org.apache.ignite.internal.processors.cache.GridCacheIoManager.handleMessage(GridCacheIoManager.java:318) [ignite-core-2.9.1.jar:2.9.1]\r\n    \tat org.apache.ignite.internal.processors.cache.GridCacheIoManager.access$100(GridCacheIoManager.java:109) [ignite-core-2.9.1.jar:2.9.1]\r\n    \tat org.apache.ignite.internal.processors.cache.GridCacheIoManager$1.onMessage(GridCacheIoManager.java:308) [ignite-core-2.9.1.jar:2.9.1]\r\n    \tat org.apache.ignite.internal.managers.communication.GridIoManager.invokeListener(GridIoManager.java:1907) [ignite-core-2.9.1.jar:2.9.1]\r\n    \tat org.apache.ignite.internal.managers.communication.GridIoManager.processRegularMessage0(GridIoManager.java:1528) [ignite-core-2.9.1.jar:2.9.1]\r\n    \tat org.apache.ignite.internal.managers.communication.GridIoManager.access$5300(GridIoManager.java:241) [ignite-core-2.9.1.jar:2.9.1]\r\n    \tat org.apache.ignite.internal.managers.communication.GridIoManager$9.execute(GridIoManager.java:1421) [ignite-core-2.9.1.jar:2.9.1]\r\n    \tat org.apache.ignite.internal.managers.communication.TraceRunnable.run(TraceRunnable.java:55) [ignite-core-2.9.1.jar:2.9.1]\r\n    \tat org.apache.ignite.internal.util.StripedExecutor$Stripe.body(StripedExecutor.java:565) [ignite-core-2.9.1.jar:2.9.1]\r\n    \tat org.apache.ignite.internal.util.worker.GridWorker.run(GridWorker.java:120) [ignite-core-2.9.1.jar:2.9.1]\r\n    \tat java.lang.Thread.run(Thread.java:748) [na:1.8.0_212]\r\n    Caused by: org.apache.ignite.spi.IgniteSpiException: Timeout was reached before computation completed.\r\n    \tat org.apache.ignite.spi.communication.tcp.TcpCommunicationSpi.handleUnreachableNodeException(TcpCommunicationSpi.java:3304) [ignite-core-2.9.1.jar:2.9.1]\r\n    \tat org.apache.ignite.spi.communication.tcp.TcpCommunicationSpi.reserveClient(TcpCommunicationSpi.java:3211) [ignite-core-2.9.1.jar:2.9.1]\r\n    \tat org.apache.ignite.spi.communication.tcp.TcpCommunicationSpi.access$6700(TcpCommunicationSpi.java:307) [ignite-core-2.9.1.jar:2.9.1]\r\n    \tat org.apache.ignite.spi.communication.tcp.TcpCommunicationSpi$CommunicationWorker.processDisconnect(TcpCommunicationSpi.java:5150) ~[ignite-core-2.9.1.jar:2.9.1]\r\n    \tat org.apache.ignite.spi.communication.tcp.TcpCommunicationSpi$CommunicationWorker.body(TcpCommunicationSpi.java:4951) ~[ignite-core-2.9.1.jar:2.9.1]\r\n    \tat org.apache.ignite.internal.util.worker.GridWorker.run(GridWorker.java:120) [ignite-core-2.9.1.jar:2.9.1]\r\n    \tat org.apache.ignite.spi.communication.tcp.TcpCommunicationSpi$5.body(TcpCommunicationSpi.java:2503) ~[ignite-core-2.9.1.jar:2.9.1]\r\n    \tat org.apache.ignite.spi.IgniteSpiThread.run(IgniteSpiThread.java:58) ~[ignite-core-2.9.1.jar:2.9.1]\r\n    \tSuppressed: org.apache.ignite.spi.communication.tcp.internal.NodeUnreachableException: Failed to connect to all addresses of node 46ea1c96-edbb-4c92-ae15-4930b48c6d84: [/10.228.29.168:47000]; inverse connection will be requested.\r\n    \t\tat org.apache.ignite.spi.communication.tcp.TcpCommunicationSpi.createNioSession(TcpCommunicationSpi.java:3982) [ignite-core-2.9.1.jar:2.9.1]\r\n    \t\tat org.apache.ignite.spi.communication.tcp.TcpCommunicationSpi.createTcpClient(TcpCommunicationSpi.java:3635) [ignite-core-2.9.1.jar:2.9.1]\r\n    \t\tat org.apache.ignite.spi.communication.tcp.TcpCommunicationSpi.createCommunicationClient(TcpCommunicationSpi.java:3375) [ignite-core-2.9.1.jar:2.9.1]\r\n    \t\tat org.apache.ignite.spi.communication.tcp.TcpCommunicationSpi.reserveClient(TcpCommunicationSpi.java:3180) [ignite-core-2.9.1.jar:2.9.1]\r\n    \t\t... 6 common frames omitted\r\n    Caused by: org.apache.ignite.internal.IgniteFutureTimeoutCheckedException: Timeout was reached before computation completed.\r\n    \tat org.apache.ignite.internal.util.future.GridFutureAdapter.get0(GridFutureAdapter.java:244) ~[ignite-core-2.9.1.jar:2.9.1]\r\n    \tat org.apache.ignite.internal.util.future.GridFutureAdapter.get(GridFutureAdapter.java:160) ~[ignite-core-2.9.1.jar:2.9.1]\r\n    \tat org.apache.ignite.internal.util.future.GridFutureAdapter.get(GridFutureAdapter.java:152) ~[ignite-core-2.9.1.jar:2.9.1]\r\n    \tat org.apache.ignite.spi.communication.tcp.TcpCommunicationSpi.handleUnreachableNodeException(TcpCommunicationSpi.java:3301) [ignite-core-2.9.1.jar:2.9.1]\r\n    \t... 7 common frames omitted\r\n\r\n 3. I can see following warning on server node which could be related:\r\n&lt;!-- language: lang-none --&gt;\r\n\r\n    Possible starvation in striped pool.\r\n        Thread name: sys-stripe-5-#6%pv-ib-valuation%\r\n        Queue: [Message closure [msg=GridIoMessage [plc=2, topic=TOPIC_CACHE, topicOrd=8, ordered=false, timeout=0, skipOnTimeout=false, msg=GridNearAtomicSingleUpdateFilterRequest [filter=[o.a.i.i.processors.cache.CacheEntrySerializablePredicate@35b24146], parent=GridNearAtomicSingleUpdateRequest [key=KeyCacheObjectImpl [part=775, val=null, hasValBytes=true], parent=GridNearAtomicAbstractSingleUpdateRequest [nodeId=null, futId=786433, topVer=AffinityTopologyVersion [topVer=716, minorTopVer=0], parent=GridNearAtomicAbstractUpdateRequest [res=null, flags=needRes]]]]]], Message closure [msg=GridIoMessage [plc=2, topic=TOPIC_CACHE, topicOrd=8, ordered=false, timeout=0, skipOnTimeout=false, msg=GridNearAtomicSingleUpdateFilterRequest [filter=[o.a.i.i.processors.cache.CacheEntrySerializablePredicate@77901da5], parent=GridNearAtomicSingleUpdateRequest [key=KeyCacheObjectImpl [part=775, val=null, hasValBytes=true], parent=GridNearAtomicAbstractSingleUpdateRequest [nodeId=null, futId=835585, topVer=AffinityTopologyVersion [topVer=716, minorTopVer=0], parent=GridNearAtomicAbstractUpdateRequest [res=null, flags=needRes]]]]]], Message closure [msg=GridIoMessage [plc=2, topic=TOPIC_CACHE, topicOrd=8, ordered=false, timeout=0, skipOnTimeout=false, msg=GridNearGetRequest [futId=fae5b635381-3bb423f1-d4d5-4223-90d4-e239b7254f34, miniId=0be5b635381-3bb423f1-d4d5-4223-90d4-e239b7254f34, ver=GridCacheVersion [topVer=274988830, order=1663551612761, nodeOrder=674], keyMap=null, flags=5, topVer=AffinityTopologyVersion [topVer=716, minorTopVer=0], subjId=f3e89bcb-caa0-4004-bc24-dc7bbf2687ed, taskNameHash=0, createTtl=43200000, accessTtl=-1, txLbl=null, mvccSnapshot=null]]], Message closure [msg=GridIoMessage [plc=2, topic=TOPIC_CACHE, topicOrd=8, ordered=false, timeout=0, skipOnTimeout=false, msg=GridNearAtomicSingleUpdateFilterRequest [filter=[o.a.i.i.processors.cache.CacheEntrySerializablePredicate@5d7d3932], parent=GridNearAtomicSingleUpdateRequest [key=KeyCacheObjectImpl [part=775, val=null, hasValBytes=true], parent=GridNearAtomicAbstractSingleUpdateRequest [nodeId=null, futId=802817, topVer=AffinityTopologyVersion [topVer=716, minorTopVer=0], parent=GridNearAtomicAbstractUpdateRequest [res=null, flags=needRes]]]]]], Message closure [msg=GridIoMessage [plc=2, topic=TOPIC_CACHE, topicOrd=8, ordered=false, timeout=0, skipOnTimeout=false, msg=GridNearGetRequest [futId=bbb6b635381-3bb423f1-d4d5-4223-90d4-e239b7254f34, miniId=cbb6b635381-3bb423f1-d4d5-4223-90d4-e239b7254f34, ver=GridCacheVersion [topVer=274988830, order=1663551612762, nodeOrder=674], keyMap=null, flags=5, topVer=AffinityTopologyVersion [topVer=716, minorTopVer=0], subjId=f3e89bcb-caa0-4004-bc24-dc7bbf2687ed, taskNameHash=0, createTtl=43200000, accessTtl=-1, txLbl=null, mvccSnapshot=null]]], Message closure [msg=GridIoMessage [plc=2, topic=TOPIC_CACHE, topicOrd=8, ordered=false, timeout=0, skipOnTimeout=false, msg=GridNearGetRequest [futId=dbb6b635381-3bb423f1-d4d5-4223-90d4-e239b7254f34, miniId=ebb6b635381-3bb423f1-d4d5-4223-90d4-e239b7254f34, ver=GridCacheVersion [topVer=274988830, order=1663551612763, nodeOrder=674], keyMap=null, flags=5, topVer=AffinityTopologyVersion [topVer=716, minorTopVer=0], subjId=f3e89bcb-caa0-4004-bc24-dc7bbf2687ed, taskNameHash=0, createTtl=43200000, accessTtl=-1, txLbl=null, mvccSnapshot=null]]], Message closure [msg=GridIoMessage [plc=2, topic=TOPIC_CACHE, topicOrd=8, ordered=false, timeout=0, skipOnTimeout=false, msg=GridNearGetRequest [futId=fbb6b635381-3bb423f1-d4d5-4223-90d4-e239b7254f34, miniId=0cb6b635381-3bb423f1-d4d5-4223-90d4-e239b7254f34, ver=GridCacheVersion [topVer=274988830, order=1663551612764, nodeOrder=674], keyMap=null, flags=5, topVer=AffinityTopologyVersion [topVer=716, minorTopVer=0], subjId=f3e89bcb-caa0-4004-bc24-dc7bbf2687ed, taskNameHash=0, createTtl=43200000, accessTtl=-1, txLbl=null, mvccSnapshot=null]]], Message closure [msg=GridIoMessage [plc=2, topic=TOPIC_CACHE, topicOrd=8, ordered=false, timeout=0, skipOnTimeout=false, msg=GridNearGetRequest [futId=1cb6b635381-3bb423f1-d4d5-4223-90d4-e239b7254f34, miniId=2cb6b635381-3bb423f1-d4d5-4223-90d4-e239b7254f34, ver=GridCacheVersion [topVer=274988830, order=1663551612765, nodeOrder=674], keyMap=null, flags=5, topVer=AffinityTopologyVersion [topVer=716, minorTopVer=0], subjId=f3e89bcb-caa0-4004-bc24-dc7bbf2687ed, taskNameHash=0, createTtl=43200000, accessTtl=-1, txLbl=null, mvccSnapshot=null]]], Message closure [msg=GridIoMessage [plc=2, topic=TOPIC_CACHE, topicOrd=8, ordered=false, timeout=0, skipOnTimeout=false, msg=GridNearGetRequest [futId=464b9635381-7057249e-b58b-42aa-ac97-d99f8f02bb68, miniId=564b9635381-7057249e-b58b-42aa-ac97-d99f8f02bb68, ver=GridCacheVersion [topVer=274988830, order=1663551612460, nodeOrder=673], keyMap=null, flags=5, topVer=AffinityTopologyVersion [topVer=716, minorTopVer=0], subjId=276a2bbe-45a2-473e-bdea-31c41e87a7a9, taskNameHash=0, createTtl=43200000, accessTtl=-1, txLbl=null, mvccSnapshot=null]]], Message closure [msg=GridIoMessage [plc=2, topic=TOPIC_CACHE, topicOrd=8, ordered=false, timeout=0, skipOnTimeout=false, msg=GridNearGetRequest [futId=664b9635381-7057249e-b58b-42aa-ac97-d99f8f02bb68, miniId=764b9635381-7057249e-b58b-42aa-ac97-d99f8f02bb68, ver=GridCacheVersion [topVer=274988830, order=1663551612461, nodeOrder=673], keyMap=null, flags=5, topVer=AffinityTopologyVersion [topVer=716, minorTopVer=0], subjId=276a2bbe-45a2-473e-bdea-31c41e87a7a9, taskNameHash=0, createTtl=43200000, accessTtl=-1, txLbl=null, mvccSnapshot=null]]], Message closure [msg=GridIoMessage [plc=2, topic=TOPIC_CACHE, topicOrd=8, ordered=false, timeout=0, skipOnTimeout=false, msg=GridNearGetRequest [futId=8693c635381-3bb423f1-d4d5-4223-90d4-e239b7254f34, miniId=9693c635381-3bb423f1-d4d5-4223-90d4-e239b7254f34, ver=GridCacheVersion [topVer=274988857, order=1663551612767, nodeOrder=674], keyMap=null, flags=5, topVer=AffinityTopologyVersion [topVer=743, minorTopVer=0], subjId=f3e89bcb-caa0-4004-bc24-dc7bbf2687ed, taskNameHash=0, createTtl=43200000, accessTtl=-1, txLbl=null, mvccSnapshot=null]]], Message closure [msg=GridIoMessage [plc=2, topic=TOPIC_CACHE, topicOrd=8, ordered=false, timeout=0, skipOnTimeout=false, msg=GridNearGetRequest [futId=7693c635381-3bb423f1-d4d5-4223-90d4-e239b7254f34, miniId=a693c635381-3bb423f1-d4d5-4223-90d4-e239b7254f34, ver=GridCacheVersion [topVer=274988857, order=1663551612766, nodeOrder=674], keyMap=null, flags=5, topVer=AffinityTopologyVersion [topVer=743, minorTopVer=0], subjId=f3e89bcb-caa0-4004-bc24-dc7bbf2687ed, taskNameHash=0, createTtl=43200000, accessTtl=-1, txLbl=null, mvccSnapshot=null]]]]\r\n        Deadlock: false\r\n        Completed: 432169\r\n    Thread [name=&quot;sys-stripe-5-#6%pv-ib-valuation%&quot;, id=41, state=TIMED_WAITING, blockCnt=24514, waitCnt=284215]\r\n            at java.lang.Thread.sleep(Native Method)\r\n            at o.a.i.i.util.IgniteUtils.sleep(IgniteUtils.java:7894)\r\n            at o.a.i.i.processors.continuous.GridContinuousProcessor.sendWithRetries(GridContinuousProcessor.java:1991)\r\n            at o.a.i.i.processors.continuous.GridContinuousProcessor.sendWithRetries(GridContinuousProcessor.java:1935)\r\n            at o.a.i.i.processors.continuous.GridContinuousProcessor.sendWithRetries(GridContinuousProcessor.java:1917)\r\n            at o.a.i.i.processors.continuous.GridContinuousProcessor.sendNotification(GridContinuousProcessor.java:1324)\r\n            at o.a.i.i.processors.continuous.GridContinuousProcessor.addNotification(GridContinuousProcessor.java:1261)\r\n            at o.a.i.i.processors.cache.query.continuous.CacheContinuousQueryHandler.onEntryUpdate(CacheContinuousQueryHandler.java:1059)\r\n            at o.a.i.i.processors.cache.query.continuous.CacheContinuousQueryHandler.access$600(CacheContinuousQueryHandler.java:90)\r\n            at o.a.i.i.processors.cache.query.continuous.CacheContinuousQueryHandler$2.onEntryUpdated(CacheContinuousQueryHandler.java:459)\r\n            at o.a.i.i.processors.cache.query.continuous.CacheContinuousQueryManager.onEntryUpdated(CacheContinuousQueryManager.java:447)\r\n            at o.a.i.i.processors.cache.GridCacheMapEntry.innerUpdate(GridCacheMapEntry.java:2495)\r\n            at o.a.i.i.processors.cache.distributed.dht.atomic.GridDhtAtomicCache.updateSingle(GridDhtAtomicCache.java:2657)\r\n            at o.a.i.i.processors.cache.distributed.dht.atomic.GridDhtAtomicCache.update(GridDhtAtomicCache.java:2118)\r\n            at o.a.i.i.processors.cache.distributed.dht.atomic.GridDhtAtomicCache.updateAllAsyncInternal0(GridDhtAtomicCache.java:1935)\r\n            at o.a.i.i.processors.cache.distributed.dht.atomic.GridDhtAtomicCache.updateAllAsyncInternal(GridDhtAtomicCache.java:1734)\r\n            at o.a.i.i.processors.cache.distributed.dht.atomic.GridDhtAtomicCache.processNearAtomicUpdateRequest(GridDhtAtomicCache.java:3322)\r\n            at o.a.i.i.processors.cache.distributed.dht.atomic.GridDhtAtomicCache.access$400(GridDhtAtomicCache.java:141)\r\n            at o.a.i.i.processors.cache.distributed.dht.atomic.GridDhtAtomicCache$5.apply(GridDhtAtomicCache.java:273)\r\n            at o.a.i.i.processors.cache.distributed.dht.atomic.GridDhtAtomicCache$5.apply(GridDhtAtomicCache.java:268)\r\n            at o.a.i.i.processors.cache.GridCacheIoManager.processMessage(GridCacheIoManager.java:1142)\r\n            at o.a.i.i.processors.cache.GridCacheIoManager.onMessage0(GridCacheIoManager.java:591)\r\n            at o.a.i.i.processors.cache.GridCacheIoManager.handleMessage(GridCacheIoManager.java:392)\r\n            at o.a.i.i.processors.cache.GridCacheIoManager.handleMessage(GridCacheIoManager.java:318)\r\n            at o.a.i.i.processors.cache.GridCacheIoManager.access$100(GridCacheIoManager.java:109)\r\n            at o.a.i.i.processors.cache.GridCacheIoManager$1.onMessage(GridCacheIoManager.java:308)\r\n            at o.a.i.i.managers.communication.GridIoManager.invokeListener(GridIoManager.java:1907)\r\n            at o.a.i.i.managers.communication.GridIoManager.processRegularMessage0(GridIoManager.java:1528)\r\n            at o.a.i.i.managers.communication.GridIoManager.access$5300(GridIoManager.java:241)\r\n            at o.a.i.i.managers.communication.GridIoManager$9.execute(GridIoManager.java:1421)\r\n            at o.a.i.i.managers.communication.TraceRunnable.run(TraceRunnable.java:55)\r\n            at o.a.i.i.util.StripedExecutor$Stripe.body(StripedExecutor.java:565)\r\n            at o.a.i.i.util.worker.GridWorker.run(GridWorker.java:120)\r\n            at java.lang.Thread.run(Thread.java:748)\r\n\r\n 4. Grid graually started to slow down and at the end it just become unresponsive.\r\n\r\nAny lead what could be wrong with it and why client exit is causing data/server node to become unresponsive? \r\n\r\n**Continuous Query From Worker/Client:**\r\n\r\n    IgniteCache&lt;String, Object[]&gt; cache = ignite.cache(&quot;dataCache&quot;);\r\n    ContinuousQuery&lt;String, Object[]&gt; query = new ContinuousQuery();\r\n    CacheEntryUpdatedListenerAsync&lt;String, Object[]&gt; listener = e -&gt; e.forEach(this::processCacheEvent);\r\n    query.setLocalListener(listener);\r\n    cache.query(query);\r\n\r\n","title":"Apache Ignite becomes unresponsive on bad exit of client node","body":"<p>We have Ignite cluster having server(data/cache) and client(worker) nodes where client pulls data from server nodes to perform computation. This setup works fine except sometime this whole cluster becomes unresponsive and we have to restart the complete grid. The pattern I observe is:</p>\n<ol>\n<li>Any of the client(worker) node exit the cluster/topology w/o publishing Node exit event.</li>\n<li>This triggers following exception on data nodes.</li>\n</ol>\n<pre class=\"lang-none prettyprint-override\"><code>org.apache.ignite.IgniteCheckedException: Timeout was reached before computation completed.\n    at org.apache.ignite.internal.util.IgniteUtils.cast(IgniteUtils.java:7563) ~[ignite-core-2.9.1.jar:2.9.1]\n    at org.apache.ignite.internal.util.future.GridFutureAdapter.resolve(GridFutureAdapter.java:260) ~[ignite-core-2.9.1.jar:2.9.1]\n    at org.apache.ignite.internal.util.future.GridFutureAdapter.get0(GridFutureAdapter.java:172) ~[ignite-core-2.9.1.jar:2.9.1]\n    at org.apache.ignite.internal.util.future.GridFutureAdapter.get(GridFutureAdapter.java:141) ~[ignite-core-2.9.1.jar:2.9.1]\n    at org.apache.ignite.spi.communication.tcp.TcpCommunicationSpi.reserveClient(TcpCommunicationSpi.java:3229) [ignite-core-2.9.1.jar:2.9.1]\n    at org.apache.ignite.spi.communication.tcp.TcpCommunicationSpi.sendMessage0(TcpCommunicationSpi.java:3013) [ignite-core-2.9.1.jar:2.9.1]\n    at org.apache.ignite.spi.communication.tcp.TcpCommunicationSpi.sendMessage(TcpCommunicationSpi.java:2960) [ignite-core-2.9.1.jar:2.9.1]\n    at org.apache.ignite.internal.managers.communication.GridIoManager.send(GridIoManager.java:2100) [ignite-core-2.9.1.jar:2.9.1]\n    at org.apache.ignite.internal.managers.communication.GridIoManager.sendOrderedMessage(GridIoManager.java:2365) [ignite-core-2.9.1.jar:2.9.1]\n    at org.apache.ignite.internal.processors.continuous.GridContinuousProcessor.sendWithRetries(GridContinuousProcessor.java:1964) [ignite-core-2.9.1.jar:2.9.1]\n    at org.apache.ignite.internal.processors.continuous.GridContinuousProcessor.sendWithRetries(GridContinuousProcessor.java:1935) [ignite-core-2.9.1.jar:2.9.1]\n    at org.apache.ignite.internal.processors.continuous.GridContinuousProcessor.sendWithRetries(GridContinuousProcessor.java:1917) [ignite-core-2.9.1.jar:2.9.1]\n    at org.apache.ignite.internal.processors.continuous.GridContinuousProcessor.sendNotification(GridContinuousProcessor.java:1324) [ignite-core-2.9.1.jar:2.9.1]\n    at org.apache.ignite.internal.processors.continuous.GridContinuousProcessor.addNotification(GridContinuousProcessor.java:1261) [ignite-core-2.9.1.jar:2.9.1]\n    at org.apache.ignite.internal.processors.cache.query.continuous.CacheContinuousQueryHandler.onEntryUpdate(CacheContinuousQueryHandler.java:1059) [ignite-core-2.9.1.jar:2.9.1]\n    at org.apache.ignite.internal.processors.cache.query.continuous.CacheContinuousQueryHandler.access$600(CacheContinuousQueryHandler.java:90) [ignite-core-2.9.1.jar:2.9.1]\n    at org.apache.ignite.internal.processors.cache.query.continuous.CacheContinuousQueryHandler$2.onEntryUpdated(CacheContinuousQueryHandler.java:459) [ignite-core-2.9.1.jar:2.9.1]\n    at org.apache.ignite.internal.processors.cache.query.continuous.CacheContinuousQueryManager.onEntryUpdated(CacheContinuousQueryManager.java:447) [ignite-core-2.9.1.jar:2.9.1]\n    at org.apache.ignite.internal.processors.cache.GridCacheMapEntry.innerUpdate(GridCacheMapEntry.java:2495) [ignite-core-2.9.1.jar:2.9.1]\n    at org.apache.ignite.internal.processors.cache.distributed.dht.atomic.GridDhtAtomicCache.updateSingle(GridDhtAtomicCache.java:2657) [ignite-core-2.9.1.jar:2.9.1]\n    at org.apache.ignite.internal.processors.cache.distributed.dht.atomic.GridDhtAtomicCache.update(GridDhtAtomicCache.java:2118) [ignite-core-2.9.1.jar:2.9.1]\n    at org.apache.ignite.internal.processors.cache.distributed.dht.atomic.GridDhtAtomicCache.updateAllAsyncInternal0(GridDhtAtomicCache.java:1935) [ignite-core-2.9.1.jar:2.9.1]\n    at org.apache.ignite.internal.processors.cache.distributed.dht.atomic.GridDhtAtomicCache.updateAllAsyncInternal(GridDhtAtomicCache.java:1734) [ignite-core-2.9.1.jar:2.9.1]\n    at org.apache.ignite.internal.processors.cache.distributed.dht.atomic.GridDhtAtomicCache.processNearAtomicUpdateRequest(GridDhtAtomicCache.java:3322) [ignite-core-2.9.1.jar:2.9.1]\n    at org.apache.ignite.internal.processors.cache.distributed.dht.atomic.GridDhtAtomicCache.access$400(GridDhtAtomicCache.java:141) [ignite-core-2.9.1.jar:2.9.1]\n    at org.apache.ignite.internal.processors.cache.distributed.dht.atomic.GridDhtAtomicCache$5.apply(GridDhtAtomicCache.java:273) [ignite-core-2.9.1.jar:2.9.1]\n    at org.apache.ignite.internal.processors.cache.distributed.dht.atomic.GridDhtAtomicCache$5.apply(GridDhtAtomicCache.java:268) [ignite-core-2.9.1.jar:2.9.1]\n    at org.apache.ignite.internal.processors.cache.GridCacheIoManager.processMessage(GridCacheIoManager.java:1142) [ignite-core-2.9.1.jar:2.9.1]\n    at org.apache.ignite.internal.processors.cache.GridCacheIoManager.onMessage0(GridCacheIoManager.java:591) [ignite-core-2.9.1.jar:2.9.1]\n    at org.apache.ignite.internal.processors.cache.GridCacheIoManager.handleMessage(GridCacheIoManager.java:392) [ignite-core-2.9.1.jar:2.9.1]\n    at org.apache.ignite.internal.processors.cache.GridCacheIoManager.handleMessage(GridCacheIoManager.java:318) [ignite-core-2.9.1.jar:2.9.1]\n    at org.apache.ignite.internal.processors.cache.GridCacheIoManager.access$100(GridCacheIoManager.java:109) [ignite-core-2.9.1.jar:2.9.1]\n    at org.apache.ignite.internal.processors.cache.GridCacheIoManager$1.onMessage(GridCacheIoManager.java:308) [ignite-core-2.9.1.jar:2.9.1]\n    at org.apache.ignite.internal.managers.communication.GridIoManager.invokeListener(GridIoManager.java:1907) [ignite-core-2.9.1.jar:2.9.1]\n    at org.apache.ignite.internal.managers.communication.GridIoManager.processRegularMessage0(GridIoManager.java:1528) [ignite-core-2.9.1.jar:2.9.1]\n    at org.apache.ignite.internal.managers.communication.GridIoManager.access$5300(GridIoManager.java:241) [ignite-core-2.9.1.jar:2.9.1]\n    at org.apache.ignite.internal.managers.communication.GridIoManager$9.execute(GridIoManager.java:1421) [ignite-core-2.9.1.jar:2.9.1]\n    at org.apache.ignite.internal.managers.communication.TraceRunnable.run(TraceRunnable.java:55) [ignite-core-2.9.1.jar:2.9.1]\n    at org.apache.ignite.internal.util.StripedExecutor$Stripe.body(StripedExecutor.java:565) [ignite-core-2.9.1.jar:2.9.1]\n    at org.apache.ignite.internal.util.worker.GridWorker.run(GridWorker.java:120) [ignite-core-2.9.1.jar:2.9.1]\n    at java.lang.Thread.run(Thread.java:748) [na:1.8.0_212]\nCaused by: org.apache.ignite.spi.IgniteSpiException: Timeout was reached before computation completed.\n    at org.apache.ignite.spi.communication.tcp.TcpCommunicationSpi.handleUnreachableNodeException(TcpCommunicationSpi.java:3304) [ignite-core-2.9.1.jar:2.9.1]\n    at org.apache.ignite.spi.communication.tcp.TcpCommunicationSpi.reserveClient(TcpCommunicationSpi.java:3211) [ignite-core-2.9.1.jar:2.9.1]\n    at org.apache.ignite.spi.communication.tcp.TcpCommunicationSpi.access$6700(TcpCommunicationSpi.java:307) [ignite-core-2.9.1.jar:2.9.1]\n    at org.apache.ignite.spi.communication.tcp.TcpCommunicationSpi$CommunicationWorker.processDisconnect(TcpCommunicationSpi.java:5150) ~[ignite-core-2.9.1.jar:2.9.1]\n    at org.apache.ignite.spi.communication.tcp.TcpCommunicationSpi$CommunicationWorker.body(TcpCommunicationSpi.java:4951) ~[ignite-core-2.9.1.jar:2.9.1]\n    at org.apache.ignite.internal.util.worker.GridWorker.run(GridWorker.java:120) [ignite-core-2.9.1.jar:2.9.1]\n    at org.apache.ignite.spi.communication.tcp.TcpCommunicationSpi$5.body(TcpCommunicationSpi.java:2503) ~[ignite-core-2.9.1.jar:2.9.1]\n    at org.apache.ignite.spi.IgniteSpiThread.run(IgniteSpiThread.java:58) ~[ignite-core-2.9.1.jar:2.9.1]\n    Suppressed: org.apache.ignite.spi.communication.tcp.internal.NodeUnreachableException: Failed to connect to all addresses of node 46ea1c96-edbb-4c92-ae15-4930b48c6d84: [/10.228.29.168:47000]; inverse connection will be requested.\n        at org.apache.ignite.spi.communication.tcp.TcpCommunicationSpi.createNioSession(TcpCommunicationSpi.java:3982) [ignite-core-2.9.1.jar:2.9.1]\n        at org.apache.ignite.spi.communication.tcp.TcpCommunicationSpi.createTcpClient(TcpCommunicationSpi.java:3635) [ignite-core-2.9.1.jar:2.9.1]\n        at org.apache.ignite.spi.communication.tcp.TcpCommunicationSpi.createCommunicationClient(TcpCommunicationSpi.java:3375) [ignite-core-2.9.1.jar:2.9.1]\n        at org.apache.ignite.spi.communication.tcp.TcpCommunicationSpi.reserveClient(TcpCommunicationSpi.java:3180) [ignite-core-2.9.1.jar:2.9.1]\n        ... 6 common frames omitted\nCaused by: org.apache.ignite.internal.IgniteFutureTimeoutCheckedException: Timeout was reached before computation completed.\n    at org.apache.ignite.internal.util.future.GridFutureAdapter.get0(GridFutureAdapter.java:244) ~[ignite-core-2.9.1.jar:2.9.1]\n    at org.apache.ignite.internal.util.future.GridFutureAdapter.get(GridFutureAdapter.java:160) ~[ignite-core-2.9.1.jar:2.9.1]\n    at org.apache.ignite.internal.util.future.GridFutureAdapter.get(GridFutureAdapter.java:152) ~[ignite-core-2.9.1.jar:2.9.1]\n    at org.apache.ignite.spi.communication.tcp.TcpCommunicationSpi.handleUnreachableNodeException(TcpCommunicationSpi.java:3301) [ignite-core-2.9.1.jar:2.9.1]\n    ... 7 common frames omitted\n</code></pre>\n<ol start=\"3\">\n<li>I can see following warning on server node which could be related:</li>\n</ol>\n<pre class=\"lang-none prettyprint-override\"><code>Possible starvation in striped pool.\n    Thread name: sys-stripe-5-#6%pv-ib-valuation%\n    Queue: [Message closure [msg=GridIoMessage [plc=2, topic=TOPIC_CACHE, topicOrd=8, ordered=false, timeout=0, skipOnTimeout=false, msg=GridNearAtomicSingleUpdateFilterRequest [filter=[o.a.i.i.processors.cache.CacheEntrySerializablePredicate@35b24146], parent=GridNearAtomicSingleUpdateRequest [key=KeyCacheObjectImpl [part=775, val=null, hasValBytes=true], parent=GridNearAtomicAbstractSingleUpdateRequest [nodeId=null, futId=786433, topVer=AffinityTopologyVersion [topVer=716, minorTopVer=0], parent=GridNearAtomicAbstractUpdateRequest [res=null, flags=needRes]]]]]], Message closure [msg=GridIoMessage [plc=2, topic=TOPIC_CACHE, topicOrd=8, ordered=false, timeout=0, skipOnTimeout=false, msg=GridNearAtomicSingleUpdateFilterRequest [filter=[o.a.i.i.processors.cache.CacheEntrySerializablePredicate@77901da5], parent=GridNearAtomicSingleUpdateRequest [key=KeyCacheObjectImpl [part=775, val=null, hasValBytes=true], parent=GridNearAtomicAbstractSingleUpdateRequest [nodeId=null, futId=835585, topVer=AffinityTopologyVersion [topVer=716, minorTopVer=0], parent=GridNearAtomicAbstractUpdateRequest [res=null, flags=needRes]]]]]], Message closure [msg=GridIoMessage [plc=2, topic=TOPIC_CACHE, topicOrd=8, ordered=false, timeout=0, skipOnTimeout=false, msg=GridNearGetRequest [futId=fae5b635381-3bb423f1-d4d5-4223-90d4-e239b7254f34, miniId=0be5b635381-3bb423f1-d4d5-4223-90d4-e239b7254f34, ver=GridCacheVersion [topVer=274988830, order=1663551612761, nodeOrder=674], keyMap=null, flags=5, topVer=AffinityTopologyVersion [topVer=716, minorTopVer=0], subjId=f3e89bcb-caa0-4004-bc24-dc7bbf2687ed, taskNameHash=0, createTtl=43200000, accessTtl=-1, txLbl=null, mvccSnapshot=null]]], Message closure [msg=GridIoMessage [plc=2, topic=TOPIC_CACHE, topicOrd=8, ordered=false, timeout=0, skipOnTimeout=false, msg=GridNearAtomicSingleUpdateFilterRequest [filter=[o.a.i.i.processors.cache.CacheEntrySerializablePredicate@5d7d3932], parent=GridNearAtomicSingleUpdateRequest [key=KeyCacheObjectImpl [part=775, val=null, hasValBytes=true], parent=GridNearAtomicAbstractSingleUpdateRequest [nodeId=null, futId=802817, topVer=AffinityTopologyVersion [topVer=716, minorTopVer=0], parent=GridNearAtomicAbstractUpdateRequest [res=null, flags=needRes]]]]]], Message closure [msg=GridIoMessage [plc=2, topic=TOPIC_CACHE, topicOrd=8, ordered=false, timeout=0, skipOnTimeout=false, msg=GridNearGetRequest [futId=bbb6b635381-3bb423f1-d4d5-4223-90d4-e239b7254f34, miniId=cbb6b635381-3bb423f1-d4d5-4223-90d4-e239b7254f34, ver=GridCacheVersion [topVer=274988830, order=1663551612762, nodeOrder=674], keyMap=null, flags=5, topVer=AffinityTopologyVersion [topVer=716, minorTopVer=0], subjId=f3e89bcb-caa0-4004-bc24-dc7bbf2687ed, taskNameHash=0, createTtl=43200000, accessTtl=-1, txLbl=null, mvccSnapshot=null]]], Message closure [msg=GridIoMessage [plc=2, topic=TOPIC_CACHE, topicOrd=8, ordered=false, timeout=0, skipOnTimeout=false, msg=GridNearGetRequest [futId=dbb6b635381-3bb423f1-d4d5-4223-90d4-e239b7254f34, miniId=ebb6b635381-3bb423f1-d4d5-4223-90d4-e239b7254f34, ver=GridCacheVersion [topVer=274988830, order=1663551612763, nodeOrder=674], keyMap=null, flags=5, topVer=AffinityTopologyVersion [topVer=716, minorTopVer=0], subjId=f3e89bcb-caa0-4004-bc24-dc7bbf2687ed, taskNameHash=0, createTtl=43200000, accessTtl=-1, txLbl=null, mvccSnapshot=null]]], Message closure [msg=GridIoMessage [plc=2, topic=TOPIC_CACHE, topicOrd=8, ordered=false, timeout=0, skipOnTimeout=false, msg=GridNearGetRequest [futId=fbb6b635381-3bb423f1-d4d5-4223-90d4-e239b7254f34, miniId=0cb6b635381-3bb423f1-d4d5-4223-90d4-e239b7254f34, ver=GridCacheVersion [topVer=274988830, order=1663551612764, nodeOrder=674], keyMap=null, flags=5, topVer=AffinityTopologyVersion [topVer=716, minorTopVer=0], subjId=f3e89bcb-caa0-4004-bc24-dc7bbf2687ed, taskNameHash=0, createTtl=43200000, accessTtl=-1, txLbl=null, mvccSnapshot=null]]], Message closure [msg=GridIoMessage [plc=2, topic=TOPIC_CACHE, topicOrd=8, ordered=false, timeout=0, skipOnTimeout=false, msg=GridNearGetRequest [futId=1cb6b635381-3bb423f1-d4d5-4223-90d4-e239b7254f34, miniId=2cb6b635381-3bb423f1-d4d5-4223-90d4-e239b7254f34, ver=GridCacheVersion [topVer=274988830, order=1663551612765, nodeOrder=674], keyMap=null, flags=5, topVer=AffinityTopologyVersion [topVer=716, minorTopVer=0], subjId=f3e89bcb-caa0-4004-bc24-dc7bbf2687ed, taskNameHash=0, createTtl=43200000, accessTtl=-1, txLbl=null, mvccSnapshot=null]]], Message closure [msg=GridIoMessage [plc=2, topic=TOPIC_CACHE, topicOrd=8, ordered=false, timeout=0, skipOnTimeout=false, msg=GridNearGetRequest [futId=464b9635381-7057249e-b58b-42aa-ac97-d99f8f02bb68, miniId=564b9635381-7057249e-b58b-42aa-ac97-d99f8f02bb68, ver=GridCacheVersion [topVer=274988830, order=1663551612460, nodeOrder=673], keyMap=null, flags=5, topVer=AffinityTopologyVersion [topVer=716, minorTopVer=0], subjId=276a2bbe-45a2-473e-bdea-31c41e87a7a9, taskNameHash=0, createTtl=43200000, accessTtl=-1, txLbl=null, mvccSnapshot=null]]], Message closure [msg=GridIoMessage [plc=2, topic=TOPIC_CACHE, topicOrd=8, ordered=false, timeout=0, skipOnTimeout=false, msg=GridNearGetRequest [futId=664b9635381-7057249e-b58b-42aa-ac97-d99f8f02bb68, miniId=764b9635381-7057249e-b58b-42aa-ac97-d99f8f02bb68, ver=GridCacheVersion [topVer=274988830, order=1663551612461, nodeOrder=673], keyMap=null, flags=5, topVer=AffinityTopologyVersion [topVer=716, minorTopVer=0], subjId=276a2bbe-45a2-473e-bdea-31c41e87a7a9, taskNameHash=0, createTtl=43200000, accessTtl=-1, txLbl=null, mvccSnapshot=null]]], Message closure [msg=GridIoMessage [plc=2, topic=TOPIC_CACHE, topicOrd=8, ordered=false, timeout=0, skipOnTimeout=false, msg=GridNearGetRequest [futId=8693c635381-3bb423f1-d4d5-4223-90d4-e239b7254f34, miniId=9693c635381-3bb423f1-d4d5-4223-90d4-e239b7254f34, ver=GridCacheVersion [topVer=274988857, order=1663551612767, nodeOrder=674], keyMap=null, flags=5, topVer=AffinityTopologyVersion [topVer=743, minorTopVer=0], subjId=f3e89bcb-caa0-4004-bc24-dc7bbf2687ed, taskNameHash=0, createTtl=43200000, accessTtl=-1, txLbl=null, mvccSnapshot=null]]], Message closure [msg=GridIoMessage [plc=2, topic=TOPIC_CACHE, topicOrd=8, ordered=false, timeout=0, skipOnTimeout=false, msg=GridNearGetRequest [futId=7693c635381-3bb423f1-d4d5-4223-90d4-e239b7254f34, miniId=a693c635381-3bb423f1-d4d5-4223-90d4-e239b7254f34, ver=GridCacheVersion [topVer=274988857, order=1663551612766, nodeOrder=674], keyMap=null, flags=5, topVer=AffinityTopologyVersion [topVer=743, minorTopVer=0], subjId=f3e89bcb-caa0-4004-bc24-dc7bbf2687ed, taskNameHash=0, createTtl=43200000, accessTtl=-1, txLbl=null, mvccSnapshot=null]]]]\n    Deadlock: false\n    Completed: 432169\nThread [name=&quot;sys-stripe-5-#6%pv-ib-valuation%&quot;, id=41, state=TIMED_WAITING, blockCnt=24514, waitCnt=284215]\n        at java.lang.Thread.sleep(Native Method)\n        at o.a.i.i.util.IgniteUtils.sleep(IgniteUtils.java:7894)\n        at o.a.i.i.processors.continuous.GridContinuousProcessor.sendWithRetries(GridContinuousProcessor.java:1991)\n        at o.a.i.i.processors.continuous.GridContinuousProcessor.sendWithRetries(GridContinuousProcessor.java:1935)\n        at o.a.i.i.processors.continuous.GridContinuousProcessor.sendWithRetries(GridContinuousProcessor.java:1917)\n        at o.a.i.i.processors.continuous.GridContinuousProcessor.sendNotification(GridContinuousProcessor.java:1324)\n        at o.a.i.i.processors.continuous.GridContinuousProcessor.addNotification(GridContinuousProcessor.java:1261)\n        at o.a.i.i.processors.cache.query.continuous.CacheContinuousQueryHandler.onEntryUpdate(CacheContinuousQueryHandler.java:1059)\n        at o.a.i.i.processors.cache.query.continuous.CacheContinuousQueryHandler.access$600(CacheContinuousQueryHandler.java:90)\n        at o.a.i.i.processors.cache.query.continuous.CacheContinuousQueryHandler$2.onEntryUpdated(CacheContinuousQueryHandler.java:459)\n        at o.a.i.i.processors.cache.query.continuous.CacheContinuousQueryManager.onEntryUpdated(CacheContinuousQueryManager.java:447)\n        at o.a.i.i.processors.cache.GridCacheMapEntry.innerUpdate(GridCacheMapEntry.java:2495)\n        at o.a.i.i.processors.cache.distributed.dht.atomic.GridDhtAtomicCache.updateSingle(GridDhtAtomicCache.java:2657)\n        at o.a.i.i.processors.cache.distributed.dht.atomic.GridDhtAtomicCache.update(GridDhtAtomicCache.java:2118)\n        at o.a.i.i.processors.cache.distributed.dht.atomic.GridDhtAtomicCache.updateAllAsyncInternal0(GridDhtAtomicCache.java:1935)\n        at o.a.i.i.processors.cache.distributed.dht.atomic.GridDhtAtomicCache.updateAllAsyncInternal(GridDhtAtomicCache.java:1734)\n        at o.a.i.i.processors.cache.distributed.dht.atomic.GridDhtAtomicCache.processNearAtomicUpdateRequest(GridDhtAtomicCache.java:3322)\n        at o.a.i.i.processors.cache.distributed.dht.atomic.GridDhtAtomicCache.access$400(GridDhtAtomicCache.java:141)\n        at o.a.i.i.processors.cache.distributed.dht.atomic.GridDhtAtomicCache$5.apply(GridDhtAtomicCache.java:273)\n        at o.a.i.i.processors.cache.distributed.dht.atomic.GridDhtAtomicCache$5.apply(GridDhtAtomicCache.java:268)\n        at o.a.i.i.processors.cache.GridCacheIoManager.processMessage(GridCacheIoManager.java:1142)\n        at o.a.i.i.processors.cache.GridCacheIoManager.onMessage0(GridCacheIoManager.java:591)\n        at o.a.i.i.processors.cache.GridCacheIoManager.handleMessage(GridCacheIoManager.java:392)\n        at o.a.i.i.processors.cache.GridCacheIoManager.handleMessage(GridCacheIoManager.java:318)\n        at o.a.i.i.processors.cache.GridCacheIoManager.access$100(GridCacheIoManager.java:109)\n        at o.a.i.i.processors.cache.GridCacheIoManager$1.onMessage(GridCacheIoManager.java:308)\n        at o.a.i.i.managers.communication.GridIoManager.invokeListener(GridIoManager.java:1907)\n        at o.a.i.i.managers.communication.GridIoManager.processRegularMessage0(GridIoManager.java:1528)\n        at o.a.i.i.managers.communication.GridIoManager.access$5300(GridIoManager.java:241)\n        at o.a.i.i.managers.communication.GridIoManager$9.execute(GridIoManager.java:1421)\n        at o.a.i.i.managers.communication.TraceRunnable.run(TraceRunnable.java:55)\n        at o.a.i.i.util.StripedExecutor$Stripe.body(StripedExecutor.java:565)\n        at o.a.i.i.util.worker.GridWorker.run(GridWorker.java:120)\n        at java.lang.Thread.run(Thread.java:748)\n</code></pre>\n<ol start=\"4\">\n<li>Grid graually started to slow down and at the end it just become unresponsive.</li>\n</ol>\n<p>Any lead what could be wrong with it and why client exit is causing data/server node to become unresponsive?</p>\n<p><strong>Continuous Query From Worker/Client:</strong></p>\n<pre><code>IgniteCache&lt;String, Object[]&gt; cache = ignite.cache(&quot;dataCache&quot;);\nContinuousQuery&lt;String, Object[]&gt; query = new ContinuousQuery();\nCacheEntryUpdatedListenerAsync&lt;String, Object[]&gt; listener = e -&gt; e.forEach(this::processCacheEvent);\nquery.setLocalListener(listener);\ncache.query(query);\n</code></pre>\n"},{"tags":["java","tomcat","https","jks","crt"],"comments":[{"owner":{"account_id":3421244,"reputation":35863,"user_id":2868801,"display_name":"dave_thompson_085"},"score":0,"creation_date":1697628923,"post_id":77314796,"comment_id":136303186,"body_markdown":"Not programming or development, but: are you using OpenSSL &gt;= 3.0.0? If so it creates PKCS12 using &#39;modern&#39; encryption (specifically PBES2/PBKDF2) that older Java did not handle; add `-legacy` to the `openssl pkcs12 -export` command. (Or if you want strong encryption on the certificates, which isn&#39;t really needed but some people like, make it `-legacy -descert`. Yes it&#39;s spelled `-descert` even though it actually does 3DES not DES.)","body":"Not programming or development, but: are you using OpenSSL &gt;= 3.0.0? If so it creates PKCS12 using &#39;modern&#39; encryption (specifically PBES2/PBKDF2) that older Java did not handle; add <code>-legacy</code> to the <code>openssl pkcs12 -export</code> command. (Or if you want strong encryption on the certificates, which isn&#39;t really needed but some people like, make it <code>-legacy -descert</code>. Yes it&#39;s spelled <code>-descert</code> even though it actually does 3DES not DES.)"},{"owner":{"account_id":28633305,"reputation":1,"user_id":21923878,"display_name":"Andrea P."},"score":0,"creation_date":1697632028,"post_id":77314796,"comment_id":136303852,"body_markdown":"Yes, I used 3.1.3. If I try to add -legacy I receive this message : pkcs12: unable to load provider legacy\nHint: use -provider-path option or OPENSSL_MODULES environment variable.\nF8210000:error:12800067:DSO support routines:win32_load:could not load the shared library:crypto\\dso\\dso_win32.c:108:filename(C:\\Program Files\\OpenSSL\\lib\\ossl-modules\\legacy.dll)\nF8210000:error:12800067:DSO support routines:DSO_load:could not load the shared library:crypto\\dso\\dso_lib.c:152:\nF8210000:error:07880025:common libcrypto routines:provider_init:reason(524325):crypto\\provider_core.c:904:name=legacy","body":"Yes, I used 3.1.3. If I try to add -legacy I receive this message : pkcs12: unable to load provider legacy Hint: use -provider-path option or OPENSSL_MODULES environment variable. F8210000:error:12800067:DSO support routines:win32_load:could not load the shared library:crypto\\dso\\dso_win32.c:108:filename(C:\\Program Files\\OpenSSL\\lib\\ossl-modules\\legacy.dll) F8210000:error:12800067:DSO support routines:DSO_load:could not load the shared library:crypto\\dso\\dso_lib.c:152: F8210000:error:07880025:common libcrypto routines:provider_init:reason(524325):crypto\\provider_core.c&zwnj;&#8203;:904:name=legacy"},{"owner":{"account_id":3421244,"reputation":35863,"user_id":2868801,"display_name":"dave_thompson_085"},"score":0,"creation_date":1697685811,"post_id":77314796,"comment_id":136311776,"body_markdown":"Okay, your openssl build or install is broken. If you want to pursue that we would need details of the build, install, and possibly config, and I&#39;m not sure SO is the right place. Alternatively it should work to not invoke the legacy logic but instead specify explicitly (but less conveniently) `-keypbe PBE-SHA1-3DES -certpbe PBE-SHA1-3DES -macalg SHA1`.","body":"Okay, your openssl build or install is broken. If you want to pursue that we would need details of the build, install, and possibly config, and I&#39;m not sure SO is the right place. Alternatively it should work to not invoke the legacy logic but instead specify explicitly (but less conveniently) <code>-keypbe PBE-SHA1-3DES -certpbe PBE-SHA1-3DES -macalg SHA1</code>."}],"answers":[{"tags":[],"owner":{"account_id":28633305,"reputation":1,"user_id":21923878,"display_name":"Andrea P."},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1697813101,"creation_date":1697634927,"answer_id":77316673,"question_id":77314796,"body_markdown":"As @dave_thompson_085 said the problem was openssl version.\r\nI installed 1.1.1 version, and then the jks it was correctly created.\r\n\r\nTo use the jks created in Tomcat use this configuration\r\n\r\n    &lt;Connector SSLEnabled=&quot;true&quot; clientAuth=&quot;false&quot;  keyAlias=&quot;myalias&quot; keystoreFile=&quot;conf\\myalias.jks&quot; \r\n    \tkeystorePass=&quot;mypassword &quot; keystoreType=&quot;JKS&quot; maxThreads=&quot;200&quot; port=&quot;8443&quot; protocol=&quot;org.apache.coyote.http11.Http11NioProtocol&quot; \r\n    \tscheme=&quot;https&quot; secure=&quot;true&quot; sslProtocol=&quot;TLS&quot;/&gt; \r\n\r\n","title":"Create jks from crt and key and than configure Tomcat","body":"<p>As @dave_thompson_085 said the problem was openssl version.\nI installed 1.1.1 version, and then the jks it was correctly created.</p>\n<p>To use the jks created in Tomcat use this configuration</p>\n<pre><code>&lt;Connector SSLEnabled=&quot;true&quot; clientAuth=&quot;false&quot;  keyAlias=&quot;myalias&quot; keystoreFile=&quot;conf\\myalias.jks&quot; \n    keystorePass=&quot;mypassword &quot; keystoreType=&quot;JKS&quot; maxThreads=&quot;200&quot; port=&quot;8443&quot; protocol=&quot;org.apache.coyote.http11.Http11NioProtocol&quot; \n    scheme=&quot;https&quot; secure=&quot;true&quot; sslProtocol=&quot;TLS&quot;/&gt; \n</code></pre>\n"}],"owner":{"account_id":28633305,"reputation":1,"user_id":21923878,"display_name":"Andrea P."},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":69,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1697813101,"creation_date":1697618819,"question_id":77314796,"body_markdown":"I have received from my client *.crt, *.key and *.ca-bundle files and my environment use jre7.\r\n\r\nI need to create *.jks file to configure Tomcat7.\r\n\r\nI read this https://stackoverflow.com/questions/38250271/creating-a-jks-from-a-crt-and-key-file-is-that-possible but unfortunately at the end after this command \r\n\r\n    C:\\Program Files\\Java\\jre7\\bin&gt;keytool -importkeystore -srckeystore C:\\keystore\\mykey.pfx -srcstoretype pkcs12 -srcalias 1 -srcstorepass mypass -destkeystore C:\\keystore\\local.jks -deststoretype jks -deststorepass mypass -destalias myAlias\r\n\r\nI receive the error \r\n\r\n    keytool error: java.io.IOException: parseAlgParameters failed: DER input not an octet string\r\n\r\nHow can I generate jks file and avoid that error?\r\n\r\nAfter the jks file will be generated I will move it into ${TOMCAT_HOME}\\conf folder.\r\n\r\nIs this Tomcat configuration correct?\r\n\r\n    &lt;Connector port=&quot;8443&quot; protocol=&quot;org.apache.coyote.http11.Http11NioProtocol&quot; \r\n    \tmaxThreads=&quot;200&quot; SSLEnabled=&quot;true&quot; scheme=&quot;https&quot; secure=&quot;true&quot; \r\n    \tclientAuth=&quot;false&quot; sslProtocol=&quot;TLSv1.2&quot; keystoreFile=&quot;conf\\local.jks&quot; keystorePass=&quot;mypass&quot; sslEnabledProtocols=&quot;TLSv1.2&quot; /&gt;\r\n\r\n\r\n\r\nThanks in advance\r\n","title":"Create jks from crt and key and than configure Tomcat","body":"<p>I have received from my client *.crt, *.key and *.ca-bundle files and my environment use jre7.</p>\n<p>I need to create *.jks file to configure Tomcat7.</p>\n<p>I read this <a href=\"https://stackoverflow.com/questions/38250271/creating-a-jks-from-a-crt-and-key-file-is-that-possible\">Creating a .jks from a .crt and .key file, is that possible</a> but unfortunately at the end after this command</p>\n<pre><code>C:\\Program Files\\Java\\jre7\\bin&gt;keytool -importkeystore -srckeystore C:\\keystore\\mykey.pfx -srcstoretype pkcs12 -srcalias 1 -srcstorepass mypass -destkeystore C:\\keystore\\local.jks -deststoretype jks -deststorepass mypass -destalias myAlias\n</code></pre>\n<p>I receive the error</p>\n<pre><code>keytool error: java.io.IOException: parseAlgParameters failed: DER input not an octet string\n</code></pre>\n<p>How can I generate jks file and avoid that error?</p>\n<p>After the jks file will be generated I will move it into ${TOMCAT_HOME}\\conf folder.</p>\n<p>Is this Tomcat configuration correct?</p>\n<pre><code>&lt;Connector port=&quot;8443&quot; protocol=&quot;org.apache.coyote.http11.Http11NioProtocol&quot; \n    maxThreads=&quot;200&quot; SSLEnabled=&quot;true&quot; scheme=&quot;https&quot; secure=&quot;true&quot; \n    clientAuth=&quot;false&quot; sslProtocol=&quot;TLSv1.2&quot; keystoreFile=&quot;conf\\local.jks&quot; keystorePass=&quot;mypass&quot; sslEnabledProtocols=&quot;TLSv1.2&quot; /&gt;\n</code></pre>\n<p>Thanks in advance</p>\n"},{"tags":["java","postgresql","pgbouncer"],"comments":[{"owner":{"account_id":1018432,"reputation":21783,"user_id":1029453,"accept_rate":100,"display_name":"Richard Huxton"},"score":0,"creation_date":1697799054,"post_id":77329823,"comment_id":136328135,"body_markdown":"currentSchema isn&#39;t a postgresql connection parameter (https://www.postgresql.org/docs/current/libpq-connect.html#LIBPQ-PARAMKEYWORDS) you&#39;ll need to find out what jdbc does to handle that.","body":"currentSchema isn&#39;t a postgresql connection parameter (<a href=\"https://www.postgresql.org/docs/current/libpq-connect.html#LIBPQ-PARAMKEYWORDS\" rel=\"nofollow noreferrer\">postgresql.org/docs/current/&hellip;</a>) you&#39;ll need to find out what jdbc does to handle that."},{"owner":{"account_id":13669231,"reputation":21,"user_id":10907449,"display_name":"Nikolay Debolsky"},"score":0,"creation_date":1697799135,"post_id":77329823,"comment_id":136328153,"body_markdown":"@RichardHuxton this is tomcat parameter","body":"@RichardHuxton this is tomcat parameter"},{"owner":{"account_id":1018432,"reputation":21783,"user_id":1029453,"accept_rate":100,"display_name":"Richard Huxton"},"score":0,"creation_date":1697803351,"post_id":77329823,"comment_id":136328934,"body_markdown":"Lovely. And if you can explain how it sets the &quot;current schema&quot; someone will be able to how that is going to interact with your connection pool. Because obviously the whole point of a connection pool is that connections get re-used, so presumably you&#39;re getting a connection from the pool where the schema hasn&#39;t been set","body":"Lovely. And if you can explain how it sets the &quot;current schema&quot; someone will be able to how that is going to interact with your connection pool. Because obviously the whole point of a connection pool is that connections get re-used, so presumably you&#39;re getting a connection from the pool where the schema hasn&#39;t been set"},{"owner":{"account_id":13669231,"reputation":21,"user_id":10907449,"display_name":"Nikolay Debolsky"},"score":0,"creation_date":1697804188,"post_id":77329823,"comment_id":136329104,"body_markdown":"I created separate user and set search_path to another schema. This is work, but i want use one user for connect db","body":"I created separate user and set search_path to another schema. This is work, but i want use one user for connect db"},{"owner":{"account_id":1018432,"reputation":21783,"user_id":1029453,"accept_rate":100,"display_name":"Richard Huxton"},"score":0,"creation_date":1697805280,"post_id":77329823,"comment_id":136329299,"body_markdown":"Then if you&#39;re not prepared to share what your java code is doing you&#39;ll have to hope that someone who understands both tomcat and pgbouncer comes along.","body":"Then if you&#39;re not prepared to share what your java code is doing you&#39;ll have to hope that someone who understands both tomcat and pgbouncer comes along."}],"answers":[{"tags":[],"owner":{"account_id":1906465,"reputation":39489,"user_id":1721239,"display_name":"jjanes"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1697813053,"creation_date":1697813053,"answer_id":77331845,"question_id":77329823,"body_markdown":"pgbouncer does not support this directly.\r\n\r\nYou could make your system issue &quot;set search_path=quartz&quot; as the first statement every time a new connection is obtained.  Or you could use the other approach you have already described but didn&#39;t like.","title":"pgbouncer with currentSchema","body":"<p>pgbouncer does not support this directly.</p>\n<p>You could make your system issue &quot;set search_path=quartz&quot; as the first statement every time a new connection is obtained.  Or you could use the other approach you have already described but didn't like.</p>\n"}],"owner":{"account_id":13669231,"reputation":21,"user_id":10907449,"display_name":"Nikolay Debolsky"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":53,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":77331845,"answer_count":1,"score":0,"last_activity_date":1697813053,"creation_date":1697794440,"question_id":77329823,"body_markdown":"Java application works with two shemas: **public** and **quartz**. And i try connect to shema **quartz** with pgbouncer:\r\n\r\n    jdbc:postgresql://127.0.0.1:6432/test_db?currentSchema=quartz;prepareThreshold=0&quot;\r\n\r\nBut my app failed startup. In logs i see error about table (qrtz_locks) doesn&#39;t exist (log follow)[![enter image description here][1]][1]\r\n\r\n\r\nThis table exist in shema **quartz**. I think that app ignored my props in jdbc - *?currentSchema=quartz* and connect to public. If i used default postgres connect (port 5432), app works correctly. \r\n\r\nHow to fix my problem and connect to db via pgbouncer with my schema?\r\n\r\nThis is pgbouncer.ini config\r\n\r\n    [databases]\r\n    ; fallback connect string\r\n    * = host=10.1.2.2 port=5432\r\n    \r\n    [pgbouncer]\r\n    logfile = /var/log/pgbouncer/pgbouncer.log\r\n    pidfile = /var/run/pgbouncer/pgbouncer.pid\r\n    \r\n    listen_addr = *\r\n    listen_port = 6432\r\n    \r\n    auth_type = md5\r\n    auth_file = /etc/pgbouncer/userlist\r\n    auth_hba_file = /etc/pgbouncer/pb_hba.conf\r\n    admin_users = postgres\r\n    stats_users = postgres\r\n    \r\n    pool_mode = transaction\r\n    ignore_startup_parameters = extra_float_digits,search_path\r\n    application_name_add_host = 1\r\n    max_client_conn = 500\r\n    default_pool_size = 15\r\n    reserve_pool_size = 10\r\n    reserve_pool_timeout = 3\r\n    \r\n    server_lifetime = 300\r\n    server_idle_timeout = 120\r\n    server_connect_timeout = 5\r\n    server_login_retry = 1\r\n    \r\n    query_timeout = 60\r\n    query_wait_timeout = 60\r\n    \r\n    client_idle_timeout = 60\r\n    client_login_timeout = 60\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/1veAK.png","title":"pgbouncer with currentSchema","body":"<p>Java application works with two shemas: <strong>public</strong> and <strong>quartz</strong>. And i try connect to shema <strong>quartz</strong> with pgbouncer:</p>\n<pre><code>jdbc:postgresql://127.0.0.1:6432/test_db?currentSchema=quartz;prepareThreshold=0&quot;\n</code></pre>\n<p>But my app failed startup. In logs i see error about table (qrtz_locks) doesn't exist (log follow)<a href=\"https://i.stack.imgur.com/1veAK.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/1veAK.png\" alt=\"enter image description here\" /></a></p>\n<p>This table exist in shema <strong>quartz</strong>. I think that app ignored my props in jdbc - <em>?currentSchema=quartz</em> and connect to public. If i used default postgres connect (port 5432), app works correctly.</p>\n<p>How to fix my problem and connect to db via pgbouncer with my schema?</p>\n<p>This is pgbouncer.ini config</p>\n<pre><code>[databases]\n; fallback connect string\n* = host=10.1.2.2 port=5432\n\n[pgbouncer]\nlogfile = /var/log/pgbouncer/pgbouncer.log\npidfile = /var/run/pgbouncer/pgbouncer.pid\n\nlisten_addr = *\nlisten_port = 6432\n\nauth_type = md5\nauth_file = /etc/pgbouncer/userlist\nauth_hba_file = /etc/pgbouncer/pb_hba.conf\nadmin_users = postgres\nstats_users = postgres\n\npool_mode = transaction\nignore_startup_parameters = extra_float_digits,search_path\napplication_name_add_host = 1\nmax_client_conn = 500\ndefault_pool_size = 15\nreserve_pool_size = 10\nreserve_pool_timeout = 3\n\nserver_lifetime = 300\nserver_idle_timeout = 120\nserver_connect_timeout = 5\nserver_login_retry = 1\n\nquery_timeout = 60\nquery_wait_timeout = 60\n\nclient_idle_timeout = 60\nclient_login_timeout = 60\n</code></pre>\n"},{"tags":["java","serialization"],"comments":[{"owner":{"account_id":96837,"reputation":94466,"user_id":263004,"accept_rate":96,"display_name":"Vivin Paliath"},"score":0,"creation_date":1285945578,"post_id":3840356,"comment_id":4079218,"body_markdown":"Are you trying to test to see if the object gets serialized and deserialized properly?","body":"Are you trying to test to see if the object gets serialized and deserialized properly?"}],"answers":[{"tags":[],"owner":{"account_id":11089,"reputation":400030,"user_id":21234,"accept_rate":91,"display_name":"skaffman"},"down_vote_count":0,"up_vote_count":137,"is_accepted":true,"score":137,"last_activity_date":1441259825,"creation_date":1285945433,"answer_id":3840409,"question_id":3840356,"body_markdown":"The easy way is to check that the object is an instance of `java.io.Serializable` or `java.io.Externalizable`, but that doesn&#39;t really prove that the object really is serializable.\r\n\r\nThe only way to be sure is to try it for real. The simplest test is something like:\r\n\r\n    new ObjectOutputStream(new ByteArrayOutputStream()).writeObject(myObject);\r\n\r\nand check it doesn&#39;t throw an exception.\r\n\r\n[Apache Commons Lang][1] provides a rather more brief version:\r\n\r\n    SerializationUtils.serialize(myObject);\r\n\r\nand again, check for the exception.\r\n\r\nYou can be more rigourous still, and check that it deserializes back into something equal to the original:\r\n\r\n    Serializable original = ...\r\n    Serializable copy = SerializationUtils.clone(original);\r\n    assertEquals(original, copy);\r\n\r\nand so on.\r\n\r\n  [1]: http://commons.apache.org/lang/","title":"how to test in Java that a class implements Serializable correctly (not just is an instance of Serializable)","body":"<p>The easy way is to check that the object is an instance of <code>java.io.Serializable</code> or <code>java.io.Externalizable</code>, but that doesn't really prove that the object really is serializable.</p>\n\n<p>The only way to be sure is to try it for real. The simplest test is something like:</p>\n\n<pre><code>new ObjectOutputStream(new ByteArrayOutputStream()).writeObject(myObject);\n</code></pre>\n\n<p>and check it doesn't throw an exception.</p>\n\n<p><a href=\"http://commons.apache.org/lang/\" rel=\"noreferrer\">Apache Commons Lang</a> provides a rather more brief version:</p>\n\n<pre><code>SerializationUtils.serialize(myObject);\n</code></pre>\n\n<p>and again, check for the exception.</p>\n\n<p>You can be more rigourous still, and check that it deserializes back into something equal to the original:</p>\n\n<pre><code>Serializable original = ...\nSerializable copy = SerializationUtils.clone(original);\nassertEquals(original, copy);\n</code></pre>\n\n<p>and so on.</p>\n"},{"tags":[],"owner":{"account_id":165118,"reputation":14339,"user_id":388299,"accept_rate":77,"display_name":"YoK"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1285946211,"creation_date":1285945483,"answer_id":3840417,"question_id":3840356,"body_markdown":"You can do following test:\r\n\r\n - Serialize object to file and make\r\n   sure no exception is thrown.\r\n - Additionally, deserialize object back and compare\r\n   with original object.\r\n\r\nHere is example for serializing and deserializing object to file:\r\n\r\nhttp://www.rgagnon.com/javadetails/java-0075.html\r\n\r\nhttp://www.javapractices.com/topic/TopicAction.do?Id=57","title":"how to test in Java that a class implements Serializable correctly (not just is an instance of Serializable)","body":"<p>You can do following test:</p>\n\n<ul>\n<li>Serialize object to file and make\nsure no exception is thrown.</li>\n<li>Additionally, deserialize object back and compare\nwith original object.</li>\n</ul>\n\n<p>Here is example for serializing and deserializing object to file:</p>\n\n<p><a href=\"http://www.rgagnon.com/javadetails/java-0075.html\" rel=\"nofollow\">http://www.rgagnon.com/javadetails/java-0075.html</a></p>\n\n<p><a href=\"http://www.javapractices.com/topic/TopicAction.do?Id=57\" rel=\"nofollow\">http://www.javapractices.com/topic/TopicAction.do?Id=57</a></p>\n"},{"tags":[],"owner":{"account_id":19462,"reputation":102762,"user_id":45664,"accept_rate":91,"display_name":"Andrzej Doyle"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1285945551,"creation_date":1285945551,"answer_id":3840431,"question_id":3840356,"body_markdown":"The short answer is, you can come up with some candidate objects and actually try to serialize them using the mechanism of your choice.  The test here is that no errors are encountered during marshalling/unmarshalling, and that the resulting &quot;rehydrated&quot; object is equal to the original.\r\n\r\nAlternatively, if you don&#39;t have any candidate objects, you could implement a reflection-based test that introspects the (non-static, non-transient) fields of your class to ensure that they too are Serializable.  Speaking from experience, this gets surprisingly complex surprisingly quickly, but it can be done to a reasonable extent.\r\n\r\nThe downside to this latter approach is that if a field is e.g. `List&lt;String&gt;`, then you can either fail the class for not having a strictly serializable field, or simply assume that a serializable implementation of List will be used.  Neither is perfect.  (Mind you, the latter problem exists for examples too; if every example used in the test uses serializable Lists, there&#39;s nothing to prevent a non-serializable version being used by some other code in practice).","title":"how to test in Java that a class implements Serializable correctly (not just is an instance of Serializable)","body":"<p>The short answer is, you can come up with some candidate objects and actually try to serialize them using the mechanism of your choice.  The test here is that no errors are encountered during marshalling/unmarshalling, and that the resulting \"rehydrated\" object is equal to the original.</p>\n\n<p>Alternatively, if you don't have any candidate objects, you could implement a reflection-based test that introspects the (non-static, non-transient) fields of your class to ensure that they too are Serializable.  Speaking from experience, this gets surprisingly complex surprisingly quickly, but it can be done to a reasonable extent.</p>\n\n<p>The downside to this latter approach is that if a field is e.g. <code>List&lt;String&gt;</code>, then you can either fail the class for not having a strictly serializable field, or simply assume that a serializable implementation of List will be used.  Neither is perfect.  (Mind you, the latter problem exists for examples too; if every example used in the test uses serializable Lists, there's nothing to prevent a non-serializable version being used by some other code in practice).</p>\n"},{"tags":[],"owner":{"account_id":25591,"reputation":61024,"user_id":65868,"accept_rate":68,"display_name":"TofuBeer"},"down_vote_count":1,"up_vote_count":4,"is_accepted":false,"score":3,"last_activity_date":1372177958,"creation_date":1285946664,"answer_id":3840591,"question_id":3840356,"body_markdown":"This code should do it...\r\n\r\n    import java.io.ByteArrayOutputStream;\r\n    import java.io.Externalizable;\r\n    import java.io.IOException;\r\n    import java.io.ObjectOutputStream;\r\n    import java.io.OutputStream;\r\n    import java.io.Serializable;\r\n    \r\n    public class Main\r\n    {\r\n        public static void main(String[] args)\r\n        {\r\n            System.out.println(isSerializable(&quot;Hello&quot;));\r\n            System.out.println(isSerializable(new Main()));\r\n        }\r\n    \r\n        public static boolean isSerializable(final Object o)\r\n        {\r\n            final boolean retVal;\r\n    \r\n            if(implementsInterface(o))\r\n            {\r\n                retVal = attemptToSerialize(o);\r\n            }\r\n            else\r\n            {\r\n                retVal = false;\r\n            }\r\n    \r\n            return (retVal);\r\n        }\r\n    \r\n        private static boolean implementsInterface(final Object o)\r\n        {\r\n            final boolean retVal;\r\n    \r\n            retVal = ((o instanceof Serializable) || (o instanceof Externalizable));\r\n    \r\n            return (retVal);\r\n        }\r\n    \r\n        private static boolean attemptToSerialize(final Object o)\r\n        {\r\n            final OutputStream sink;\r\n            ObjectOutputStream stream;\r\n    \r\n            stream = null;\r\n    \r\n            try\r\n            {\r\n                sink   = new ByteArrayOutputStream();\r\n                stream = new ObjectOutputStream(sink);\r\n                stream.writeObject(o);\r\n                // could also re-serilalize at this point too\r\n            }\r\n            catch(final IOException ex)\r\n            {\r\n                return (false);\r\n            }\r\n            finally\r\n            {\r\n                if(stream != null)\r\n                {\r\n                    try\r\n                    {\r\n                        stream.close();\r\n                    }\r\n                    catch(final IOException ex)\r\n                    {\r\n                        // should not be able to happen\r\n                    }\r\n                }\r\n            }\r\n            \r\n            return (true);\r\n        }\r\n    }\r\n\r\n","title":"how to test in Java that a class implements Serializable correctly (not just is an instance of Serializable)","body":"<p>This code should do it...</p>\n\n<pre><code>import java.io.ByteArrayOutputStream;\nimport java.io.Externalizable;\nimport java.io.IOException;\nimport java.io.ObjectOutputStream;\nimport java.io.OutputStream;\nimport java.io.Serializable;\n\npublic class Main\n{\n    public static void main(String[] args)\n    {\n        System.out.println(isSerializable(\"Hello\"));\n        System.out.println(isSerializable(new Main()));\n    }\n\n    public static boolean isSerializable(final Object o)\n    {\n        final boolean retVal;\n\n        if(implementsInterface(o))\n        {\n            retVal = attemptToSerialize(o);\n        }\n        else\n        {\n            retVal = false;\n        }\n\n        return (retVal);\n    }\n\n    private static boolean implementsInterface(final Object o)\n    {\n        final boolean retVal;\n\n        retVal = ((o instanceof Serializable) || (o instanceof Externalizable));\n\n        return (retVal);\n    }\n\n    private static boolean attemptToSerialize(final Object o)\n    {\n        final OutputStream sink;\n        ObjectOutputStream stream;\n\n        stream = null;\n\n        try\n        {\n            sink   = new ByteArrayOutputStream();\n            stream = new ObjectOutputStream(sink);\n            stream.writeObject(o);\n            // could also re-serilalize at this point too\n        }\n        catch(final IOException ex)\n        {\n            return (false);\n        }\n        finally\n        {\n            if(stream != null)\n            {\n                try\n                {\n                    stream.close();\n                }\n                catch(final IOException ex)\n                {\n                    // should not be able to happen\n                }\n            }\n        }\n\n        return (true);\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":19061,"reputation":185736,"user_id":44330,"accept_rate":70,"display_name":"Jason S"},"down_vote_count":0,"up_vote_count":34,"is_accepted":false,"score":34,"last_activity_date":1285948126,"creation_date":1285948126,"answer_id":3840817,"question_id":3840356,"body_markdown":"utility methods based on skaffman&#39;s answer:\r\n\r\n    private static &lt;T extends Serializable&gt; byte[] pickle(T obj) \r\n           throws IOException \r\n    {\r\n\t\tByteArrayOutputStream baos = new ByteArrayOutputStream();\r\n\t\tObjectOutputStream oos = new ObjectOutputStream(baos);\r\n\t\toos.writeObject(obj);\r\n\t\toos.close();\r\n\t\treturn baos.toByteArray();\r\n\t}\r\n    \r\n\tprivate static &lt;T extends Serializable&gt; T unpickle(byte[] b, Class&lt;T&gt; cl)\r\n           throws IOException, ClassNotFoundException \r\n    {\r\n\t\tByteArrayInputStream bais = new ByteArrayInputStream(b);\r\n\t\tObjectInputStream ois = new ObjectInputStream(bais);\r\n\t\tObject o = ois.readObject();\r\n\t\treturn cl.cast(o);\r\n\t}","title":"how to test in Java that a class implements Serializable correctly (not just is an instance of Serializable)","body":"<p>utility methods based on skaffman's answer:</p>\n\n<pre><code>private static &lt;T extends Serializable&gt; byte[] pickle(T obj) \n       throws IOException \n{\n    ByteArrayOutputStream baos = new ByteArrayOutputStream();\n    ObjectOutputStream oos = new ObjectOutputStream(baos);\n    oos.writeObject(obj);\n    oos.close();\n    return baos.toByteArray();\n}\n\nprivate static &lt;T extends Serializable&gt; T unpickle(byte[] b, Class&lt;T&gt; cl)\n       throws IOException, ClassNotFoundException \n{\n    ByteArrayInputStream bais = new ByteArrayInputStream(b);\n    ObjectInputStream ois = new ObjectInputStream(bais);\n    Object o = ois.readObject();\n    return cl.cast(o);\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":25900,"reputation":326,"user_id":66982,"display_name":"ouster"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1370577361,"creation_date":1370577361,"answer_id":16975975,"question_id":3840356,"body_markdown":"This only works for fully populated objects, if you require that any objects composed in your top level object are also serializable then they cannot be null for this test to be valid as serialization/deserialization skips the null objects","title":"how to test in Java that a class implements Serializable correctly (not just is an instance of Serializable)","body":"<p>This only works for fully populated objects, if you require that any objects composed in your top level object are also serializable then they cannot be null for this test to be valid as serialization/deserialization skips the null objects</p>\n"},{"tags":[],"owner":{"account_id":3543761,"reputation":749,"user_id":2960236,"accept_rate":43,"display_name":"wu-lee"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1533663114,"creation_date":1533662465,"answer_id":51732244,"question_id":3840356,"body_markdown":"I&#39;ve attempted to write a unit test (in Groovy using Spock) which can check that a given interface for use with RMI is in fact fully serializable - all the parameters, exceptions, and possible implementations of types defined in the methods.\r\n\r\nIt seems to work for me so far, however, this is a bit fiddly to do and there may be cases this doesn&#39;t cover, so use at your own risk!\r\n\r\nYou will need to replace the example interfaces `Notification` etc. with your own. The example includes one unserializable field as an illustration.\r\n\r\n    package example\r\n    \r\n    import groovy.transform.CompileDynamic\r\n    import groovy.transform.CompileStatic\r\n    import spock.lang.Specification\r\n    \r\n    import java.lang.reflect.*\r\n    import java.rmi.Remote\r\n    import java.rmi.RemoteException\r\n    \r\n    /** This checks that the a remoting API NotifierServer is safe\r\n     *\r\n     * It attempts to flush out any parameter classes which are\r\n     * not Serializable. This isn&#39;t checked at compile time!\r\n     *\r\n     */\r\n    @CompileStatic\r\n    class RemotableInterfaceTest extends Specification {\r\n        static class NotificationException extends RuntimeException {\r\n            Object unserializable\r\n        }\r\n    \r\n        static interface Notification {\r\n            String getMessage()\r\n    \r\n            Date getDate()\r\n        }\r\n\r\n        static interface Notifier extends Remote {\r\n            void accept(Notification notification) throws RemoteException, NotificationException\r\n        }\r\n    \r\n    \r\n        static interface NotifierServer extends Remote {\r\n            void subscribe(Notification notifier) throws RemoteException\r\n            void notify(Notification message) throws RemoteException\r\n        }\r\n    \r\n        // From https://www.javaworld.com/article/2077477/learn-java/java-tip-113--identify-subclasses-at-runtime.html\r\n        /**\r\n         * Scans all classes accessible from the context class loader which belong to the given package and subpackages.\r\n         *\r\n         * @param packageName The base package\r\n         * @return The classes\r\n         * @throws ClassNotFoundException\r\n         * @throws IOException\r\n         */\r\n        static Class[] getClasses(String packageName)\r\n                throws ClassNotFoundException, IOException {\r\n            ClassLoader classLoader = Thread.currentThread().getContextClassLoader()\r\n            assert classLoader != null\r\n            String path = packageName.replace(&#39;.&#39;, &#39;/&#39;)\r\n            Enumeration resources = classLoader.getResources(path)\r\n            List&lt;File&gt; dirs = new ArrayList()\r\n            while (resources.hasMoreElements()) {\r\n                URL resource = resources.nextElement()\r\n                dirs.add(new File(resource.getFile()))\r\n            }\r\n            ArrayList classes = new ArrayList()\r\n            for (File directory : dirs) {\r\n                classes.addAll(findClasses(directory, packageName))\r\n            }\r\n            return classes.toArray(new Class[classes.size()])\r\n        }\r\n    \r\n        /**\r\n         * Recursive method used to find all classes in a given directory and subdirs.\r\n         *\r\n         * @param directory   The base directory\r\n         * @param packageName The package name for classes found inside the base directory\r\n         * @return The classes\r\n         * @throws ClassNotFoundException\r\n         */\r\n        static List&lt;Class&gt; findClasses(File directory, String packageName) throws ClassNotFoundException {\r\n            List&lt;Class&gt; classes = new ArrayList()\r\n            if (!directory.exists()) {\r\n                return classes\r\n            }\r\n            File[] files = directory.listFiles()\r\n            for (File file : files) {\r\n                if (file.isDirectory()) {\r\n                    //assert !file.getName().contains(&quot;.&quot;);\r\n                    classes.addAll(findClasses(file, packageName + &quot;.&quot; + file.getName()))\r\n                } else if (file.getName().endsWith(&quot;.class&quot;)) {\r\n                    classes.add(Class.forName(packageName + &#39;.&#39; + file.getName().substring(0, file.getName().length() - 6)))\r\n                }\r\n            }\r\n            return classes\r\n        }\r\n    \r\n        /** Finds all known subclasses of a class */\r\n        @CompileDynamic\r\n        static List&lt;Class&gt; getSubclasses(Class type) {\r\n            allClasses\r\n                .findAll { Class it -&gt;\r\n                    !Modifier.isAbstract(it.modifiers) &amp;&amp;\r\n                    it != type &amp;&amp;\r\n                    type.isAssignableFrom(it)\r\n                }\r\n        }\r\n    \r\n        /** Checks if a type is nominally serializable or remotable.\r\n         *\r\n         * Notes:\r\n         * &lt;ul&gt;\r\n         * &lt;li&gt; primitives are implicitly serializable\r\n         * &lt;li&gt; interfaces are serializable or remotable by themselves, but we\r\n         * assume that since #getSerializedTypes checks derived types of interfaces,\r\n         * we can safely assume that all implementations will be checked\r\n         *&lt;/ul&gt;\r\n         *\r\n         * @param it\r\n         * @return\r\n         */\r\n        static boolean isSerializableOrRemotable(Class&lt;?&gt; it) {\r\n            return it.primitive || it.interface || Serializable.isAssignableFrom(it) || Remote.isAssignableFrom(it)\r\n        }\r\n    \r\n        /** Recursively finds all (new) types associated with a given type \r\n         * which need to be serialized because they are fields, parameterized\r\n         * types, implementations, etc. */\r\n        static void getSerializedTypes(final Set&lt;Class&lt;?&gt;&gt; types, Type... it) {\r\n            for(Type type in it) {\r\n                println &quot;type: $type.typeName&quot;\r\n    \r\n                if (type instanceof GenericArrayType) {\r\n                    type = ((GenericArrayType)type).genericComponentType\r\n                }\r\n    \r\n                if (type instanceof ParameterizedType) {\r\n                    ParameterizedType ptype = (ParameterizedType)type\r\n                    getSerializedTypes(types, ptype.actualTypeArguments)\r\n                    break\r\n                }\r\n    \r\n    \r\n                if (type instanceof Class) {\r\n                    Class ctype = (Class)type\r\n    \r\n                    if (ctype == Object)\r\n                        break\r\n    \r\n                    if (types.contains(type))\r\n                        break\r\n    \r\n                    types &lt;&lt; ctype\r\n                    for (Field field : ctype.declaredFields) {\r\n                        println &quot;${ctype.simpleName}.${field.name}: ${field.type.simpleName}&quot;\r\n                        if (Modifier.isVolatile(field.modifiers) ||\r\n                            Modifier.isTransient(field.modifiers) ||\r\n                            Modifier.isStatic(field.modifiers))\r\n                            continue\r\n    \r\n                        Class&lt;?&gt; fieldType = field.type\r\n                        if (fieldType.array)\r\n                            fieldType = fieldType.componentType\r\n    \r\n                        if (types.contains(fieldType))\r\n                            continue\r\n    \r\n                        types &lt;&lt; fieldType\r\n                        if (!fieldType.primitive)\r\n                            getSerializedTypes(types, fieldType)\r\n                    }\r\n    \r\n                    if (ctype.genericSuperclass) {\r\n                        getSerializedTypes(types, ctype.genericSuperclass)\r\n                    }\r\n    \r\n                    getSubclasses(ctype).each { Class c -&gt; getSerializedTypes(types, c) }\r\n    \r\n                    break\r\n                }\r\n            }\r\n        }\r\n    \r\n        /** Recursively checks a type&#39;s methods for related classes which\r\n         * need to be serializable if the type is remoted */\r\n        static Set&lt;Class&lt;?&gt;&gt; getMethodTypes(Class&lt;?&gt; it) {\r\n            Set&lt;Class&lt;?&gt;&gt; types = []\r\n            for(Method method: it.methods) {\r\n                println &quot;method: ${it.simpleName}.$method.name&quot;\r\n                getSerializedTypes(types, method.genericParameterTypes)\r\n                getSerializedTypes(types, method.genericReturnType)\r\n                getSerializedTypes(types, method.genericExceptionTypes)\r\n            }\r\n            return types\r\n        }\r\n    \r\n        /** All the known defined classes */\r\n        static List&lt;Class&gt; allClasses = Package.packages.collectMany { Package p -&gt; getClasses(p.name) as Collection&lt;Class&gt; }\r\n    \r\n    \r\n        @CompileDynamic\r\n        def &quot;NotifierServer interface should only expose serializable or remotable types&quot;() {\r\n            given:\r\n            Set&lt;Class&gt; types = getMethodTypes(NotifierServer)\r\n    \r\n            Set&lt;Class&gt; nonSerializableTypes = types.findAll { !isSerializableOrRemotable(it) }\r\n    \r\n            expect:\r\n            nonSerializableTypes.empty\r\n        }\r\n    \r\n    }\r\n\r\n\r\n","title":"how to test in Java that a class implements Serializable correctly (not just is an instance of Serializable)","body":"<p>I've attempted to write a unit test (in Groovy using Spock) which can check that a given interface for use with RMI is in fact fully serializable - all the parameters, exceptions, and possible implementations of types defined in the methods.</p>\n\n<p>It seems to work for me so far, however, this is a bit fiddly to do and there may be cases this doesn't cover, so use at your own risk!</p>\n\n<p>You will need to replace the example interfaces <code>Notification</code> etc. with your own. The example includes one unserializable field as an illustration.</p>\n\n<pre><code>package example\n\nimport groovy.transform.CompileDynamic\nimport groovy.transform.CompileStatic\nimport spock.lang.Specification\n\nimport java.lang.reflect.*\nimport java.rmi.Remote\nimport java.rmi.RemoteException\n\n/** This checks that the a remoting API NotifierServer is safe\n *\n * It attempts to flush out any parameter classes which are\n * not Serializable. This isn't checked at compile time!\n *\n */\n@CompileStatic\nclass RemotableInterfaceTest extends Specification {\n    static class NotificationException extends RuntimeException {\n        Object unserializable\n    }\n\n    static interface Notification {\n        String getMessage()\n\n        Date getDate()\n    }\n\n    static interface Notifier extends Remote {\n        void accept(Notification notification) throws RemoteException, NotificationException\n    }\n\n\n    static interface NotifierServer extends Remote {\n        void subscribe(Notification notifier) throws RemoteException\n        void notify(Notification message) throws RemoteException\n    }\n\n    // From https://www.javaworld.com/article/2077477/learn-java/java-tip-113--identify-subclasses-at-runtime.html\n    /**\n     * Scans all classes accessible from the context class loader which belong to the given package and subpackages.\n     *\n     * @param packageName The base package\n     * @return The classes\n     * @throws ClassNotFoundException\n     * @throws IOException\n     */\n    static Class[] getClasses(String packageName)\n            throws ClassNotFoundException, IOException {\n        ClassLoader classLoader = Thread.currentThread().getContextClassLoader()\n        assert classLoader != null\n        String path = packageName.replace('.', '/')\n        Enumeration resources = classLoader.getResources(path)\n        List&lt;File&gt; dirs = new ArrayList()\n        while (resources.hasMoreElements()) {\n            URL resource = resources.nextElement()\n            dirs.add(new File(resource.getFile()))\n        }\n        ArrayList classes = new ArrayList()\n        for (File directory : dirs) {\n            classes.addAll(findClasses(directory, packageName))\n        }\n        return classes.toArray(new Class[classes.size()])\n    }\n\n    /**\n     * Recursive method used to find all classes in a given directory and subdirs.\n     *\n     * @param directory   The base directory\n     * @param packageName The package name for classes found inside the base directory\n     * @return The classes\n     * @throws ClassNotFoundException\n     */\n    static List&lt;Class&gt; findClasses(File directory, String packageName) throws ClassNotFoundException {\n        List&lt;Class&gt; classes = new ArrayList()\n        if (!directory.exists()) {\n            return classes\n        }\n        File[] files = directory.listFiles()\n        for (File file : files) {\n            if (file.isDirectory()) {\n                //assert !file.getName().contains(\".\");\n                classes.addAll(findClasses(file, packageName + \".\" + file.getName()))\n            } else if (file.getName().endsWith(\".class\")) {\n                classes.add(Class.forName(packageName + '.' + file.getName().substring(0, file.getName().length() - 6)))\n            }\n        }\n        return classes\n    }\n\n    /** Finds all known subclasses of a class */\n    @CompileDynamic\n    static List&lt;Class&gt; getSubclasses(Class type) {\n        allClasses\n            .findAll { Class it -&gt;\n                !Modifier.isAbstract(it.modifiers) &amp;&amp;\n                it != type &amp;&amp;\n                type.isAssignableFrom(it)\n            }\n    }\n\n    /** Checks if a type is nominally serializable or remotable.\n     *\n     * Notes:\n     * &lt;ul&gt;\n     * &lt;li&gt; primitives are implicitly serializable\n     * &lt;li&gt; interfaces are serializable or remotable by themselves, but we\n     * assume that since #getSerializedTypes checks derived types of interfaces,\n     * we can safely assume that all implementations will be checked\n     *&lt;/ul&gt;\n     *\n     * @param it\n     * @return\n     */\n    static boolean isSerializableOrRemotable(Class&lt;?&gt; it) {\n        return it.primitive || it.interface || Serializable.isAssignableFrom(it) || Remote.isAssignableFrom(it)\n    }\n\n    /** Recursively finds all (new) types associated with a given type \n     * which need to be serialized because they are fields, parameterized\n     * types, implementations, etc. */\n    static void getSerializedTypes(final Set&lt;Class&lt;?&gt;&gt; types, Type... it) {\n        for(Type type in it) {\n            println \"type: $type.typeName\"\n\n            if (type instanceof GenericArrayType) {\n                type = ((GenericArrayType)type).genericComponentType\n            }\n\n            if (type instanceof ParameterizedType) {\n                ParameterizedType ptype = (ParameterizedType)type\n                getSerializedTypes(types, ptype.actualTypeArguments)\n                break\n            }\n\n\n            if (type instanceof Class) {\n                Class ctype = (Class)type\n\n                if (ctype == Object)\n                    break\n\n                if (types.contains(type))\n                    break\n\n                types &lt;&lt; ctype\n                for (Field field : ctype.declaredFields) {\n                    println \"${ctype.simpleName}.${field.name}: ${field.type.simpleName}\"\n                    if (Modifier.isVolatile(field.modifiers) ||\n                        Modifier.isTransient(field.modifiers) ||\n                        Modifier.isStatic(field.modifiers))\n                        continue\n\n                    Class&lt;?&gt; fieldType = field.type\n                    if (fieldType.array)\n                        fieldType = fieldType.componentType\n\n                    if (types.contains(fieldType))\n                        continue\n\n                    types &lt;&lt; fieldType\n                    if (!fieldType.primitive)\n                        getSerializedTypes(types, fieldType)\n                }\n\n                if (ctype.genericSuperclass) {\n                    getSerializedTypes(types, ctype.genericSuperclass)\n                }\n\n                getSubclasses(ctype).each { Class c -&gt; getSerializedTypes(types, c) }\n\n                break\n            }\n        }\n    }\n\n    /** Recursively checks a type's methods for related classes which\n     * need to be serializable if the type is remoted */\n    static Set&lt;Class&lt;?&gt;&gt; getMethodTypes(Class&lt;?&gt; it) {\n        Set&lt;Class&lt;?&gt;&gt; types = []\n        for(Method method: it.methods) {\n            println \"method: ${it.simpleName}.$method.name\"\n            getSerializedTypes(types, method.genericParameterTypes)\n            getSerializedTypes(types, method.genericReturnType)\n            getSerializedTypes(types, method.genericExceptionTypes)\n        }\n        return types\n    }\n\n    /** All the known defined classes */\n    static List&lt;Class&gt; allClasses = Package.packages.collectMany { Package p -&gt; getClasses(p.name) as Collection&lt;Class&gt; }\n\n\n    @CompileDynamic\n    def \"NotifierServer interface should only expose serializable or remotable types\"() {\n        given:\n        Set&lt;Class&gt; types = getMethodTypes(NotifierServer)\n\n        Set&lt;Class&gt; nonSerializableTypes = types.findAll { !isSerializableOrRemotable(it) }\n\n        expect:\n        nonSerializableTypes.empty\n    }\n\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":25397307,"reputation":1,"user_id":19207374,"display_name":"Ali Artukov"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1697813034,"creation_date":1697813034,"answer_id":77331842,"question_id":3840356,"body_markdown":"***Create POJO class:***\r\n\r\n    package com.example.simpleproject.dto;\r\n    import lombok.EqualsAndHashCode;\r\n    import lombok.Getter;\r\n    import lombok.Setter;\r\n    import lombok.ToString;\r\n    import java.io.Serializable;\r\n    @Getter\r\n    @Setter\r\n    @EqualsAndHashCode\r\n    @ToString\r\n    public class ExtraInfo implements Serializable {\r\n\r\n        private String phoneNumber;\r\n        private String other;\r\n    }\r\n\r\n***Create test class and write next unit test method:***\r\n\r\n    package com.example.simpleproject.dto;\r\n    import org.junit.jupiter.api.BeforeEach;\r\n    import org.junit.jupiter.api.Test;\r\n    import org.springframework.util.SerializationUtils;\r\n    import java.io.Serializable;\r\n    import static org.junit.jupiter.api.Assertions.assertEquals;\r\n    class ExtraInfoTest {\r\n\r\n        private ExtraInfo objectUnderTest;\r\n\r\n        @BeforeEach\r\n        void setUp() {\r\n            objectUnderTest = new ExtraInfo();\r\n        }\r\n\r\n        @Test\r\n        void testSerializable() {\r\n            Serializable serialized = SerializationUtils.serialize(objectUnderTest);\r\n            Object deserialized = SerializationUtils.deserialize((byte[]) serialized);\r\n            assertEquals(objectUnderTest, deserialized);\r\n        }\r\n    }","title":"how to test in Java that a class implements Serializable correctly (not just is an instance of Serializable)","body":"<p><em><strong>Create POJO class:</strong></em></p>\n<pre><code>package com.example.simpleproject.dto;\nimport lombok.EqualsAndHashCode;\nimport lombok.Getter;\nimport lombok.Setter;\nimport lombok.ToString;\nimport java.io.Serializable;\n@Getter\n@Setter\n@EqualsAndHashCode\n@ToString\npublic class ExtraInfo implements Serializable {\n\n    private String phoneNumber;\n    private String other;\n}\n</code></pre>\n<p><em><strong>Create test class and write next unit test method:</strong></em></p>\n<pre><code>package com.example.simpleproject.dto;\nimport org.junit.jupiter.api.BeforeEach;\nimport org.junit.jupiter.api.Test;\nimport org.springframework.util.SerializationUtils;\nimport java.io.Serializable;\nimport static org.junit.jupiter.api.Assertions.assertEquals;\nclass ExtraInfoTest {\n\n    private ExtraInfo objectUnderTest;\n\n    @BeforeEach\n    void setUp() {\n        objectUnderTest = new ExtraInfo();\n    }\n\n    @Test\n    void testSerializable() {\n        Serializable serialized = SerializationUtils.serialize(objectUnderTest);\n        Object deserialized = SerializationUtils.deserialize((byte[]) serialized);\n        assertEquals(objectUnderTest, deserialized);\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":19061,"reputation":185736,"user_id":44330,"accept_rate":70,"display_name":"Jason S"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":56747,"favorite_count":0,"down_vote_count":0,"up_vote_count":82,"accepted_answer_id":3840409,"answer_count":8,"score":82,"last_activity_date":1697813034,"creation_date":1285945115,"question_id":3840356,"body_markdown":"I am implementing a class to be Serializable (so it&#39;s a value object for use w/ RMI). But I need to test it. Is there a way to do this easily?\r\n\r\n\r\n**clarification**: I&#39;m implementing the class, so it&#39;s trivial to stick Serializable in the class definition. I need to manually serialize/deserialize it to see if it works.\r\n\r\nI found this [C# question][1], is there a similar answer for Java?\r\n\r\n\r\n  [1]: https://stackoverflow.com/questions/236599/how-to-unit-test-if-my-object-is-really-serializable","title":"how to test in Java that a class implements Serializable correctly (not just is an instance of Serializable)","body":"<p>I am implementing a class to be Serializable (so it's a value object for use w/ RMI). But I need to test it. Is there a way to do this easily?</p>\n\n<p><strong>clarification</strong>: I'm implementing the class, so it's trivial to stick Serializable in the class definition. I need to manually serialize/deserialize it to see if it works.</p>\n\n<p>I found this <a href=\"https://stackoverflow.com/questions/236599/how-to-unit-test-if-my-object-is-really-serializable\">C# question</a>, is there a similar answer for Java?</p>\n"},{"tags":["java","kotlin","boot"],"comments":[{"owner":{"account_id":187094,"reputation":5113,"user_id":424903,"display_name":"Gimby"},"score":1,"creation_date":1697810923,"post_id":77330878,"comment_id":136330378,"body_markdown":"The site has many rules regarding how a question should be written. One such rules is that error messages and code must always be placed as text in the question, never an image.","body":"The site has many rules regarding how a question should be written. One such rules is that error messages and code must always be placed as text in the question, never an image."}],"owner":{"account_id":11844940,"reputation":33,"user_id":8667708,"display_name":"funKatz"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":135,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1697812989,"creation_date":1697804514,"question_id":77330878,"body_markdown":"I am trying to upgrade my Spring Boot project from Boot 2.7 to 3.1.\r\nAt the same time I am migrating some codes using httpclient to hc client5.\r\n\r\nBelow is the code.\r\n```kotlin\r\nimport org.apache.http.client.config.RequestConfig\r\n\r\nclass Boot2 {\r\n    fun springBoot2() {\r\n        val requestConfig = RequestConfig.custom()\r\n            .setSocketTimeout(1)\r\n            .setConnectionRequestTimeout(3)\r\n            .build()\r\n    }\r\n}\r\n```\r\n\r\nI tried to convert the code to\r\n```kotlin\r\nimport org.apache.hc.client5.http.config.RequestConfig\r\nimport org.apache.hc.core5.util.Timeout\r\n\r\nclass Boot3 {\r\n    fun springBoot3() {\r\n        val requestConfig = RequestConfig.custom()\r\n            .setResponseTimeout(Timeout.ofSeconds(1L))\r\n            .setConnectionRequestTimeout(Timeout.ofSeconds(3L))\r\n            .build()\r\n    }\r\n}\r\n```\r\n\r\nThe code using hc client 5 seems wrong. This is the message I got:\r\n`Cannot access class &#39;org.apache.hc.core5.util.Timeout&#39;. Check your module classpath for missing or conflicting dependencies`\r\n[![enter image description here][1]][1]\r\n\r\nI cannot understand how RequestConfig.builder cannot access to core5.util.Timeout. I thought they are from the same dependency (maven &quot;org.apache.httpcomponents.client5:httpclient5:5.2.1&quot;) but seems like I am wrong.\r\n\r\nWhat would be a better way for this situation? This is my first time using hc client5 and I am a bit confused. Thanks for your help.\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/ORLpT.png","title":"httpClient to httpClient5","body":"<p>I am trying to upgrade my Spring Boot project from Boot 2.7 to 3.1.\nAt the same time I am migrating some codes using httpclient to hc client5.</p>\n<p>Below is the code.</p>\n<pre class=\"lang-kotlin prettyprint-override\"><code>import org.apache.http.client.config.RequestConfig\n\nclass Boot2 {\n    fun springBoot2() {\n        val requestConfig = RequestConfig.custom()\n            .setSocketTimeout(1)\n            .setConnectionRequestTimeout(3)\n            .build()\n    }\n}\n</code></pre>\n<p>I tried to convert the code to</p>\n<pre class=\"lang-kotlin prettyprint-override\"><code>import org.apache.hc.client5.http.config.RequestConfig\nimport org.apache.hc.core5.util.Timeout\n\nclass Boot3 {\n    fun springBoot3() {\n        val requestConfig = RequestConfig.custom()\n            .setResponseTimeout(Timeout.ofSeconds(1L))\n            .setConnectionRequestTimeout(Timeout.ofSeconds(3L))\n            .build()\n    }\n}\n</code></pre>\n<p>The code using hc client 5 seems wrong. This is the message I got:\n<code>Cannot access class 'org.apache.hc.core5.util.Timeout'. Check your module classpath for missing or conflicting dependencies</code>\n<a href=\"https://i.stack.imgur.com/ORLpT.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/ORLpT.png\" alt=\"enter image description here\" /></a></p>\n<p>I cannot understand how RequestConfig.builder cannot access to core5.util.Timeout. I thought they are from the same dependency (maven &quot;org.apache.httpcomponents.client5:httpclient5:5.2.1&quot;) but seems like I am wrong.</p>\n<p>What would be a better way for this situation? This is my first time using hc client5 and I am a bit confused. Thanks for your help.</p>\n"},{"tags":["java","url"],"comments":[{"owner":{"account_id":2345668,"reputation":13002,"user_id":2055998,"accept_rate":68,"display_name":"PM 77-1"},"score":0,"creation_date":1697813472,"post_id":77331813,"comment_id":136330939,"body_markdown":"Have you already reviewed answers for https://stackoverflow.com/questions/60439440/http-response-411-length-required-when-communicating-with ?","body":"Have you already reviewed answers for <a href=\"https://stackoverflow.com/questions/60439440/http-response-411-length-required-when-communicating-with\" title=\"http response 411 length required when communicating with\">stackoverflow.com/questions/60439440/&hellip;</a> ?"},{"owner":{"account_id":3316240,"reputation":303,"user_id":2788547,"display_name":"Aniket"},"score":0,"creation_date":1697813598,"post_id":77331813,"comment_id":136330964,"body_markdown":"this post seems to be related to [this link here](https://stackoverflow.com/questions/26247555/http-post-request-in-java-setting-content-length) also\nI&#39;ll suggest you check this thread out for few workarounds if you don&#39;t mind.","body":"this post seems to be related to <a href=\"https://stackoverflow.com/questions/26247555/http-post-request-in-java-setting-content-length\">this link here</a> also I&#39;ll suggest you check this thread out for few workarounds if you don&#39;t mind."},{"owner":{"account_id":6632648,"reputation":525,"user_id":5120843,"accept_rate":40,"display_name":"Morkus"},"score":0,"creation_date":1697814008,"post_id":77331813,"comment_id":136331041,"body_markdown":"Thanks but I tried all the suggestions there, but am still getting the Length Required error.","body":"Thanks but I tried all the suggestions there, but am still getting the Length Required error."},{"owner":{"account_id":372682,"reputation":22426,"user_id":721855,"display_name":"aled"},"score":3,"creation_date":1697814896,"post_id":77331813,"comment_id":136331205,"body_markdown":"Does this answer your question? [content-length in HttpURLConnection](https://stackoverflow.com/questions/47594463/content-length-in-httpurlconnection). You are not sending the body for the request. Once you do that the content length should be automatically generated.","body":"Does this answer your question? <a href=\"https://stackoverflow.com/questions/47594463/content-length-in-httpurlconnection\">content-length in HttpURLConnection</a>. You are not sending the body for the request. Once you do that the content length should be automatically generated."},{"owner":{"account_id":6632648,"reputation":525,"user_id":5120843,"accept_rate":40,"display_name":"Morkus"},"score":0,"creation_date":1697817844,"post_id":77331813,"comment_id":136331710,"body_markdown":"Yes, thank you! That fixed it. I appreciate it. Thanks again.","body":"Yes, thank you! That fixed it. I appreciate it. Thanks again."}],"owner":{"account_id":6632648,"reputation":525,"user_id":5120843,"accept_rate":40,"display_name":"Morkus"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":42,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1697812695,"creation_date":1697812695,"question_id":77331813,"body_markdown":"In Java, due to errors received when POSTing, I am trying to correctly set the Content-Length header, but no matter what I try, I get the &quot;Length Required, 411&quot; error.\r\n\r\n    String theURL  =  &quot;https://&lt;the_url&gt;&quot;;\r\n    byte[] postDataBytes = (theURL).toString() .getBytes(&quot;UTF-8&quot;);\r\n    URL getToken = new URL(theURL);\r\n    HttpURLConnection conn = (HttpURLConnection) getToken.openConnection();\r\n    conn.setRequestMethod(&quot;POST&quot;);\r\n    conn.setRequestProperty (&quot;Authorization&quot;, &quot;Basic tc1jdfadfakdjfhalsdjh&quot;);\r\n    conn.setRequestProperty(&quot;content-type&quot;, &quot;application/json&quot;);\r\n    conn.setRequestProperty(&quot;Content-Length&quot;, String.valueOf(postDataBytes.length));\r\n    conn.connect();\r\n    String response = conn.getResponseMessage() + &quot; (&quot; + conn.getResponseCode() + &quot;)&quot;;\r\n    \r\n    System.out.println(response);\r\n\r\n&gt; Prints: &quot;Length Required (411)&quot;\r\n\r\nDoing the same Request in POSTMAN works fine so I&#39;m not sure what&#39;s off in the code above. I checked other Stack postings, but didn&#39;t find what the problem was.\r\n\r\nSuggestions to get this working?\r\n\r\nThanks.","title":"How to set Content-Length to Avoid 411 Error?","body":"<p>In Java, due to errors received when POSTing, I am trying to correctly set the Content-Length header, but no matter what I try, I get the &quot;Length Required, 411&quot; error.</p>\n<pre><code>String theURL  =  &quot;https://&lt;the_url&gt;&quot;;\nbyte[] postDataBytes = (theURL).toString() .getBytes(&quot;UTF-8&quot;);\nURL getToken = new URL(theURL);\nHttpURLConnection conn = (HttpURLConnection) getToken.openConnection();\nconn.setRequestMethod(&quot;POST&quot;);\nconn.setRequestProperty (&quot;Authorization&quot;, &quot;Basic tc1jdfadfakdjfhalsdjh&quot;);\nconn.setRequestProperty(&quot;content-type&quot;, &quot;application/json&quot;);\nconn.setRequestProperty(&quot;Content-Length&quot;, String.valueOf(postDataBytes.length));\nconn.connect();\nString response = conn.getResponseMessage() + &quot; (&quot; + conn.getResponseCode() + &quot;)&quot;;\n\nSystem.out.println(response);\n</code></pre>\n<blockquote>\n<p>Prints: &quot;Length Required (411)&quot;</p>\n</blockquote>\n<p>Doing the same Request in POSTMAN works fine so I'm not sure what's off in the code above. I checked other Stack postings, but didn't find what the problem was.</p>\n<p>Suggestions to get this working?</p>\n<p>Thanks.</p>\n"},{"tags":["java","testing","junit"],"answers":[{"tags":[],"owner":{"account_id":1663234,"reputation":138406,"user_id":1531124,"accept_rate":96,"display_name":"GhostCat"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1467790407,"creation_date":1467790076,"answer_id":38218405,"question_id":38218379,"body_markdown":"In Java, the only thing you can do is make things **package protected** if you want them to be used from your test code (that is: if you don&#39;t want them to be public). \r\n\r\nExample: my classes very often look like\r\n\r\n    class Whatever\r\n      public Whatever() { this(new A(), new B()); };\r\n      Whatever(A a, B b) { ...\r\n\r\nallowing me to use the second constructor for unit tests that require dependency injection; and at the same time relying on the &quot;convention&quot; that production code should prefer to always use the public constructor.\r\n\r\nSo even when I have classes that I don&#39;t want to be used outside of my package ... i make the constructor public to indicate: use this one please.\r\n\r\nThe idea is basically that your production code and test code resides in identically-named packages.\r\n\r\nIn other words: Java doesn&#39;t have this nice feature of giving access *only* to test code.","title":"How to test default access level class in Java without making everything public?","body":"<p>In Java, the only thing you can do is make things <strong>package protected</strong> if you want them to be used from your test code (that is: if you don't want them to be public). </p>\n\n<p>Example: my classes very often look like</p>\n\n<pre><code>class Whatever\n  public Whatever() { this(new A(), new B()); };\n  Whatever(A a, B b) { ...\n</code></pre>\n\n<p>allowing me to use the second constructor for unit tests that require dependency injection; and at the same time relying on the \"convention\" that production code should prefer to always use the public constructor.</p>\n\n<p>So even when I have classes that I don't want to be used outside of my package ... i make the constructor public to indicate: use this one please.</p>\n\n<p>The idea is basically that your production code and test code resides in identically-named packages.</p>\n\n<p>In other words: Java doesn't have this nice feature of giving access <em>only</em> to test code.</p>\n"},{"tags":[],"owner":{"account_id":8533337,"reputation":136,"user_id":6396113,"display_name":"Prateek Jain"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1467790931,"creation_date":1467790472,"answer_id":38218523,"question_id":38218379,"body_markdown":"Quoting an answer to a [similar question][1] \r\n\r\n&quot;\r\n\r\n&gt; You generally don&#39;t unit test private methods directly. Since they are\r\n&gt; private, consider them an implementation detail. Nobody is ever going\r\n&gt; to call one of them and expect it to work a particular way.\r\n&gt; \r\n&gt; You should instead test your public interface. If the methods that\r\n&gt; call your private methods are working as you expect, you then assume\r\n&gt; by extension that your private methods are working correctly.&quot;\r\n\r\nThis is equivalent to option 1 in this [link][2]\r\n\r\nIf 1 does not fit your goals, you can try Approach 2,3 and 4 mentioned in the link\r\n\r\n\r\n  [1]: https://softwareengineering.stackexchange.com/a/100966/165701  \r\n  [2]: http://www.artima.com/suiterunner/private2.html","title":"How to test default access level class in Java without making everything public?","body":"<p>Quoting an answer to a <a href=\"https://softwareengineering.stackexchange.com/a/100966/165701\">similar question</a> </p>\n\n<p>\"</p>\n\n<blockquote>\n  <p>You generally don't unit test private methods directly. Since they are\n  private, consider them an implementation detail. Nobody is ever going\n  to call one of them and expect it to work a particular way.</p>\n  \n  <p>You should instead test your public interface. If the methods that\n  call your private methods are working as you expect, you then assume\n  by extension that your private methods are working correctly.\"</p>\n</blockquote>\n\n<p>This is equivalent to option 1 in this <a href=\"http://www.artima.com/suiterunner/private2.html\" rel=\"nofollow noreferrer\">link</a></p>\n\n<p>If 1 does not fit your goals, you can try Approach 2,3 and 4 mentioned in the link</p>\n"},{"tags":[],"owner":{"account_id":1642932,"reputation":1379,"user_id":1515042,"accept_rate":54,"display_name":"Nadir"},"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1467793743,"creation_date":1467790723,"answer_id":38218596,"question_id":38218379,"body_markdown":"There are @VisibleForTesting annotations in some java libs, but generally it does not prevent illegal access. Even making package protected does not solve all the issues as still some other classes can use testing code, which can lead to some unexpected behaviour. I recently stumbled upon nice construct that allows you to show the intentions about exposing some methods for tests\r\n\r\n    public class A{\r\n       private int someMethodYouWantToTest(){}\r\n    \r\n       private Testability testability = new Testability();\r\n    \r\n       class Testability{\r\n          int exposedMethodForTest(){\r\n              someMethodYouWantToTest()  \r\n          }\r\n       }\r\n    }\r\n\r\nAnd then in your test class\r\n\r\n    public class Test{\r\n        private A underTest = new A()\r\n    \r\n       public void testHiddenMethod(){\r\n          a.testability.exposedMethodForTest()\r\n       }\r\n    }\r\n\r\nThis way you private method is private, and only access if by dedicated testability inner class that clearly states its purpose, so no one by accident calls your method outside of tests. This solves issues with package protected businness methods that may be called from other places but were really meant to be private.","title":"How to test default access level class in Java without making everything public?","body":"<p>There are @VisibleForTesting annotations in some java libs, but generally it does not prevent illegal access. Even making package protected does not solve all the issues as still some other classes can use testing code, which can lead to some unexpected behaviour. I recently stumbled upon nice construct that allows you to show the intentions about exposing some methods for tests</p>\n\n<pre><code>public class A{\n   private int someMethodYouWantToTest(){}\n\n   private Testability testability = new Testability();\n\n   class Testability{\n      int exposedMethodForTest(){\n          someMethodYouWantToTest()  \n      }\n   }\n}\n</code></pre>\n\n<p>And then in your test class</p>\n\n<pre><code>public class Test{\n    private A underTest = new A()\n\n   public void testHiddenMethod(){\n      a.testability.exposedMethodForTest()\n   }\n}\n</code></pre>\n\n<p>This way you private method is private, and only access if by dedicated testability inner class that clearly states its purpose, so no one by accident calls your method outside of tests. This solves issues with package protected businness methods that may be called from other places but were really meant to be private.</p>\n"},{"tags":[],"owner":{"account_id":8484024,"reputation":336,"user_id":6362878,"display_name":"martinhh"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1697811063,"creation_date":1467804101,"answer_id":38222800,"question_id":38218379,"body_markdown":"Sure it is not perfect that one has to make methods visible for testing that would otherwise be private, even if it is only in the classes own package. \r\n\r\nOn the other side, it is anyway recommended (and has many great benefits) not to depend on implementations but on Interfaces.\r\n\r\nThat means: Give the client an Interface that declares only the methods you want to expose and make the methods you have to test in your implementation protected and do not include them in the interface.","title":"How to test default access level class in Java without making everything public?","body":"<p>Sure it is not perfect that one has to make methods visible for testing that would otherwise be private, even if it is only in the classes own package.</p>\n<p>On the other side, it is anyway recommended (and has many great benefits) not to depend on implementations but on Interfaces.</p>\n<p>That means: Give the client an Interface that declares only the methods you want to expose and make the methods you have to test in your implementation protected and do not include them in the interface.</p>\n"},{"tags":[],"owner":{"account_id":1668855,"reputation":14404,"user_id":2700303,"accept_rate":63,"display_name":"MiguelSlv"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1697811911,"creation_date":1697811911,"answer_id":77331729,"question_id":38218379,"body_markdown":"To test default access level classes, which is package private access level, you simple create the test class in the same package, under the test root folder.\r\nExample:\r\n\r\nJava root:\r\n \r\n    package com.mycompany.example\r\n    class MyProdCodeClass {\r\n      ...\r\n    }\r\n\r\nTest root:\r\n\r\n    package com.mycompany.example\r\n    class MyProdCodeClassTest {\r\n      ...\r\n    }\r\n","title":"How to test default access level class in Java without making everything public?","body":"<p>To test default access level classes, which is package private access level, you simple create the test class in the same package, under the test root folder.\nExample:</p>\n<p>Java root:</p>\n<pre><code>package com.mycompany.example\nclass MyProdCodeClass {\n  ...\n}\n</code></pre>\n<p>Test root:</p>\n<pre><code>package com.mycompany.example\nclass MyProdCodeClassTest {\n  ...\n}\n</code></pre>\n"}],"owner":{"account_id":7327084,"reputation":9738,"user_id":5581182,"accept_rate":88,"display_name":"Thor"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2359,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":38218596,"answer_count":5,"score":2,"last_activity_date":1697811911,"creation_date":1467789979,"question_id":38218379,"body_markdown":"In Swift, to test a default access level class, one can put `@testable` in the test class header, making the internal access level class accessible and testable from the test package, without everything in the class public. I was wondering if Java has a way to access the same purpose?\r\n\r\nHow can I test a default access level class in Java from the test package without making everything in the class public?\r\n","title":"How to test default access level class in Java without making everything public?","body":"<p>In Swift, to test a default access level class, one can put <code>@testable</code> in the test class header, making the internal access level class accessible and testable from the test package, without everything in the class public. I was wondering if Java has a way to access the same purpose?</p>\n\n<p>How can I test a default access level class in Java from the test package without making everything in the class public?</p>\n"},{"tags":["java","rmi","rmic"],"comments":[{"owner":{"account_id":1211967,"reputation":7024,"user_id":1180351,"display_name":"Rob Spoor"},"score":2,"creation_date":1697814961,"post_id":77331697,"comment_id":136331219,"body_markdown":"`rmic` has been deprecated in Java 13 and removed in Java 15. You simply don&#39;t need it anymore. Just skip step 3.","body":"<code>rmic</code> has been deprecated in Java 13 and removed in Java 15. You simply don&#39;t need it anymore. Just skip step 3."},{"owner":{"account_id":71739,"reputation":307142,"user_id":207421,"accept_rate":82,"display_name":"user207421"},"score":1,"creation_date":1697816287,"post_id":77331697,"comment_id":136331467,"body_markdown":"And skeletons have been obsolete since 1998. Don’t use third-party tutorials when Oracle have a perfectly good one.","body":"And skeletons have been obsolete since 1998. Don’t use third-party tutorials when Oracle have a perfectly good one."},{"owner":{"account_id":4968367,"reputation":83,"user_id":3996969,"display_name":"ninjarubberband"},"score":0,"creation_date":1697879986,"post_id":77331697,"comment_id":136337114,"body_markdown":"I see, thank you!","body":"I see, thank you!"}],"owner":{"account_id":4968367,"reputation":83,"user_id":3996969,"display_name":"ninjarubberband"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":42,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1697811611,"creation_date":1697811611,"question_id":77331697,"body_markdown":"I am learning to use RMI in Java, and have been following this GeeksForGeeks tutorial: https://www.geeksforgeeks.org/remote-method-invocation-in-java/. \r\n\r\nIn step 3, I need to use the rmic tool to create a stub and skeleton, but when I use it together with my implementation class, I get the error: \r\n\r\n&quot;The operation couldn’t be completed. Unable to locate a Java Runtime that supports rmic. Please visit http://www.java.com for information on installing Java.&quot;\r\n \r\nAfterwards I tried installing jdk 21, but still got the error. \r\n\r\nAnyone who knows how to fix it? \r\n\r\nI use MacOS 13.2.1. \r\n\r\n","title":"Using rmic gives me error, when trying to create stub and skeleton for Remote Method Invocation","body":"<p>I am learning to use RMI in Java, and have been following this GeeksForGeeks tutorial: <a href=\"https://www.geeksforgeeks.org/remote-method-invocation-in-java/\" rel=\"nofollow noreferrer\">https://www.geeksforgeeks.org/remote-method-invocation-in-java/</a>.</p>\n<p>In step 3, I need to use the rmic tool to create a stub and skeleton, but when I use it together with my implementation class, I get the error:</p>\n<p>&quot;The operation couldn’t be completed. Unable to locate a Java Runtime that supports rmic. Please visit <a href=\"http://www.java.com\" rel=\"nofollow noreferrer\">http://www.java.com</a> for information on installing Java.&quot;</p>\n<p>Afterwards I tried installing jdk 21, but still got the error.</p>\n<p>Anyone who knows how to fix it?</p>\n<p>I use MacOS 13.2.1.</p>\n"},{"tags":["java","android","canvas","view","drawable"],"answers":[{"tags":[],"owner":{"display_name":"user17568964"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1688991848,"creation_date":1688991848,"answer_id":76653718,"question_id":76648913,"body_markdown":"Okey, finally I found a solution by myself, before somebody was able to answer my question.\r\n\r\nThe problem is that the bounds of the drawable were null(all zero), so I just had to call ```icon.setBounds(0,0, width,height)```(where &quot;icon&quot; is the drawable) and now it draws correctly.\r\n\r\nAnd this is one of things that the ```setBackground(drawable)``` method of my view doing with any drawable that I give it.\r\nHope it helps somebody who had the same problem.","title":"Drawing the Drawable of icon of an app doesn&#39;t works","body":"<p>Okey, finally I found a solution by myself, before somebody was able to answer my question.</p>\n<p>The problem is that the bounds of the drawable were null(all zero), so I just had to call <code>icon.setBounds(0,0, width,height)</code>(where &quot;icon&quot; is the drawable) and now it draws correctly.</p>\n<p>And this is one of things that the <code>setBackground(drawable)</code> method of my view doing with any drawable that I give it.\nHope it helps somebody who had the same problem.</p>\n"}],"owner":{"display_name":"user17568964"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":22,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76653718,"answer_count":1,"score":0,"last_activity_date":1697811349,"creation_date":1688926809,"question_id":76648913,"body_markdown":"I&#39;m creating a launcher app on Android, and I get the icon of an app by calling ```mResolveInfo.activityInfo.loadIcon(mPackageManager)```. The problem is that when I&#39;m trying to draw this drawable on canvas in ```draw``` method of my custom view by calling ```icon.draw(canvas)``` (where &quot;icon&quot; is the drawable), this draws nothing.\r\n\r\nBUT if I set the drawable as the background of the view, it draws the icon pirfectly when I call ```super.draw(canvas)``` method.\r\n\r\nI don&#39;t know what the ```View``` class does with the drawables to make them work, but it proves that there must be a way to do this, and I absolutely need to avoid using of ```super.draw(canvas)``` method, because I need to customise what my view is drawing when it&#39;s focused (if I use my app with a keyboard, for example).\r\n\r\n**Edit: *if my question helped you, please vote it, I have not enough reputation because of stupid questions I have posted in the past so I&#39;m not able to ask a new question no more***","title":"Drawing the Drawable of icon of an app doesn&#39;t works","body":"<p>I'm creating a launcher app on Android, and I get the icon of an app by calling <code>mResolveInfo.activityInfo.loadIcon(mPackageManager)</code>. The problem is that when I'm trying to draw this drawable on canvas in <code>draw</code> method of my custom view by calling <code>icon.draw(canvas)</code> (where &quot;icon&quot; is the drawable), this draws nothing.</p>\n<p>BUT if I set the drawable as the background of the view, it draws the icon pirfectly when I call <code>super.draw(canvas)</code> method.</p>\n<p>I don't know what the <code>View</code> class does with the drawables to make them work, but it proves that there must be a way to do this, and I absolutely need to avoid using of <code>super.draw(canvas)</code> method, because I need to customise what my view is drawing when it's focused (if I use my app with a keyboard, for example).</p>\n<p><strong>Edit: <em>if my question helped you, please vote it, I have not enough reputation because of stupid questions I have posted in the past so I'm not able to ask a new question no more</em></strong></p>\n"},{"tags":["java","jenkins"],"comments":[{"owner":{"account_id":11683,"reputation":1438161,"user_id":22656,"accept_rate":86,"display_name":"Jon Skeet"},"score":0,"creation_date":1697734726,"post_id":77325726,"comment_id":136320223,"body_markdown":"Is it possible that the server is compressing the file, and FileUtils isn&#39;t decompressing it?","body":"Is it possible that the server is compressing the file, and FileUtils isn&#39;t decompressing it?"},{"owner":{"account_id":292165,"reputation":5455,"user_id":594765,"accept_rate":70,"display_name":"JBoy"},"score":0,"creation_date":1697735033,"post_id":77325726,"comment_id":136320282,"body_markdown":"Thanks, the server is a Jenkins installation, i dont know what is the default behavior, i would have to look into that","body":"Thanks, the server is a Jenkins installation, i dont know what is the default behavior, i would have to look into that"},{"owner":{"account_id":292165,"reputation":5455,"user_id":594765,"accept_rate":70,"display_name":"JBoy"},"score":0,"creation_date":1697735083,"post_id":77325726,"comment_id":136320290,"body_markdown":"@CardinalSystem when i try to open the downloaded file, winRar tells me indeed that it is corrupted","body":"@CardinalSystem when i try to open the downloaded file, winRar tells me indeed that it is corrupted"},{"owner":{"account_id":7421543,"reputation":2880,"user_id":5645656,"accept_rate":100,"display_name":"Cardinal System"},"score":0,"creation_date":1697735266,"post_id":77325726,"comment_id":136320324,"body_markdown":"Did you try downloading the file from your browser? Did it work?","body":"Did you try downloading the file from your browser? Did it work?"},{"owner":{"account_id":292165,"reputation":5455,"user_id":594765,"accept_rate":70,"display_name":"JBoy"},"score":0,"creation_date":1697735481,"post_id":77325726,"comment_id":136320364,"body_markdown":"@CardinalSystem it works but i it pauses at 30MB, i have to resume it and only then it downloads the whole file","body":"@CardinalSystem it works but i it pauses at 30MB, i have to resume it and only then it downloads the whole file"},{"owner":{"account_id":71739,"reputation":307142,"user_id":207421,"accept_rate":82,"display_name":"user207421"},"score":0,"creation_date":1697736066,"post_id":77325726,"comment_id":136320450,"body_markdown":"Are you perhaps downloading the HTML download page instead of the file?","body":"Are you perhaps downloading the HTML download page instead of the file?"},{"owner":{"account_id":292165,"reputation":5455,"user_id":594765,"accept_rate":70,"display_name":"JBoy"},"score":0,"creation_date":1697736164,"post_id":77325726,"comment_id":136320466,"body_markdown":"@user207421 no, in the corrupted file i see part of the jar content","body":"@user207421 no, in the corrupted file i see part of the jar content"},{"owner":{"account_id":292165,"reputation":5455,"user_id":594765,"accept_rate":70,"display_name":"JBoy"},"score":0,"creation_date":1697736299,"post_id":77325726,"comment_id":136320494,"body_markdown":"Jenkins is only serving me the first chunk, i need to find a way to tell Jenkins to give me the whole thing","body":"Jenkins is only serving me the first chunk, i need to find a way to tell Jenkins to give me the whole thing"}],"answers":[{"tags":[],"owner":{"account_id":292165,"reputation":5455,"user_id":594765,"accept_rate":70,"display_name":"JBoy"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1697811062,"creation_date":1697811062,"answer_id":77331628,"question_id":77325726,"body_markdown":"I fixed it like this:\r\n\r\n      private File downloadFromJenkins(String stringUrl) throws IOException {\r\n        String[] jarParts = stringUrl.split(&quot;/&quot;);\r\n        String jarDump = Util.addTrailingSlash(config.getJarsTmpStorage()) + jarParts[jarParts.length - 1];\r\n        File dumpFile = new File(jarDump);\r\n    \r\n        logger.info(&quot;Downloading jar {} \\n to: {}&quot;, stringUrl, jarDump);\r\n        URL website = new URL(stringUrl);\r\n        URLConnection connection = website.openConnection();\r\n        ReadableByteChannel rbc = Channels.newChannel(connection.getInputStream());\r\n        FileOutputStream fos = new FileOutputStream(dumpFile);\r\n        long expectedSize = connection.getContentLength();\r\n        logger.info(&quot;Expected size: {}&quot;, expectedSize);\r\n        long transferedSize = 0L;\r\n        while (transferedSize &lt; expectedSize) {\r\n          transferedSize +=\r\n              fos.getChannel().transferFrom(rbc, transferedSize, 1 &lt;&lt; 24);\r\n          logger.info( &quot;{} bytes received&quot;, transferedSize);\r\n        }\r\n        fos.close();\r\n        return dumpFile;\r\n      }","title":"Downloading big file (54MB) from Jenkins installation with apache FileUtils only downloads 9% of it","body":"<p>I fixed it like this:</p>\n<pre><code>  private File downloadFromJenkins(String stringUrl) throws IOException {\n    String[] jarParts = stringUrl.split(&quot;/&quot;);\n    String jarDump = Util.addTrailingSlash(config.getJarsTmpStorage()) + jarParts[jarParts.length - 1];\n    File dumpFile = new File(jarDump);\n\n    logger.info(&quot;Downloading jar {} \\n to: {}&quot;, stringUrl, jarDump);\n    URL website = new URL(stringUrl);\n    URLConnection connection = website.openConnection();\n    ReadableByteChannel rbc = Channels.newChannel(connection.getInputStream());\n    FileOutputStream fos = new FileOutputStream(dumpFile);\n    long expectedSize = connection.getContentLength();\n    logger.info(&quot;Expected size: {}&quot;, expectedSize);\n    long transferedSize = 0L;\n    while (transferedSize &lt; expectedSize) {\n      transferedSize +=\n          fos.getChannel().transferFrom(rbc, transferedSize, 1 &lt;&lt; 24);\n      logger.info( &quot;{} bytes received&quot;, transferedSize);\n    }\n    fos.close();\n    return dumpFile;\n  }\n</code></pre>\n"}],"owner":{"account_id":292165,"reputation":5455,"user_id":594765,"accept_rate":70,"display_name":"JBoy"},"comment_count":8,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":43,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1697811062,"creation_date":1697734494,"question_id":77325726,"body_markdown":"I am trying to download a fat jar (54MB) from Jenkins using Apache commons IO.&lt;br&gt;\r\nCodewise i think i am doing the right thing, but unexteptedly, the dowloaded file is only 4.5MB.&lt;br&gt;\r\nMy code:\r\n\r\n    File dumpFile = new File(local_file_location);\r\n    FileUtils.copyURLToFile(new URL(remoteURL), dumpFile, 300000, 300000);\r\n\r\nAny advice? am i missing some option?","title":"Downloading big file (54MB) from Jenkins installation with apache FileUtils only downloads 9% of it","body":"<p>I am trying to download a fat jar (54MB) from Jenkins using Apache commons IO.<br>\nCodewise i think i am doing the right thing, but unexteptedly, the dowloaded file is only 4.5MB.<br>\nMy code:</p>\n<pre><code>File dumpFile = new File(local_file_location);\nFileUtils.copyURLToFile(new URL(remoteURL), dumpFile, 300000, 300000);\n</code></pre>\n<p>Any advice? am i missing some option?</p>\n"},{"tags":["java","scala","internationalization","open-source","iso"],"answers":[{"tags":[],"owner":{"account_id":113167,"reputation":6029,"user_id":298182,"accept_rate":83,"display_name":"Shcheklein"},"down_vote_count":1,"up_vote_count":3,"is_accepted":true,"score":2,"last_activity_date":1503363741,"creation_date":1503363741,"answer_id":45807488,"question_id":45580288,"body_markdown":"I would take a look at this one: [scala-iso](https://github.com/vitorsvieira/scala-iso). This is the best option I&#39;ve found so far.\r\n","title":"Java Internationalisation - ISO ISO 3166-2 (subdivisions - e.g. provinces or states) or UN/LOCODE - library","body":"<p>I would take a look at this one: <a href=\"https://github.com/vitorsvieira/scala-iso\" rel=\"nofollow noreferrer\">scala-iso</a>. This is the best option I've found so far.</p>\n"},{"tags":[],"owner":{"account_id":29715704,"reputation":1,"user_id":22774286,"display_name":"Pranshu Sharma"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1697810868,"creation_date":1697800589,"answer_id":77330487,"question_id":45580288,"body_markdown":"Take a look at [this][1].It is the only library i could find.\r\nAlternatively you could use the csv file by official body.\r\n\r\n\r\n  [1]: https://github.com/tobias-/i18n-subdivisions","title":"Java Internationalisation - ISO ISO 3166-2 (subdivisions - e.g. provinces or states) or UN/LOCODE - library","body":"<p>Take a look at <a href=\"https://github.com/tobias-/i18n-subdivisions\" rel=\"nofollow noreferrer\">this</a>.It is the only library i could find.\nAlternatively you could use the csv file by official body.</p>\n"}],"owner":{"account_id":386580,"reputation":7724,"user_id":744415,"accept_rate":86,"display_name":"NightWolf"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2002,"favorite_count":0,"down_vote_count":2,"up_vote_count":3,"closed_date":1697898985,"accepted_answer_id":45807488,"answer_count":2,"score":1,"last_activity_date":1697810868,"creation_date":1502241923,"question_id":45580288,"body_markdown":"I&#39;m looking for a JVM library in Java, Scala etc which supports mapping between various country subdivisions/states as defined in the [ISO 3166-2][1] standard. \r\n\r\nIs there a recommended Java Library (preferable on maven) or an API like Google Maps which can do this mapping. \r\n\r\nFor example in Australia we have the following;\r\n\r\n    Code\tSubdivision name (en)\tSubdivision category\r\n    AU-NSW\t New South Wales\t            state\r\n    AU-QLD\t Queensland\t                    state\r\n    AU-SA\t South Australia\t            state\r\n    AU-TAS\t Tasmania\t                    state\r\n    AU-VIC\t Victoria\t                    state\r\n    AU-WA\t Western Australia\t            state\r\n    AU-ACT\t Australian Capital Territory\tterritory\r\n    AU-NT\t Northern Territory\t            territory\r\n\r\n \r\n\r\n\r\n  [1]: https://en.wikipedia.org/wiki/ISO_3166-2","title":"Java Internationalisation - ISO ISO 3166-2 (subdivisions - e.g. provinces or states) or UN/LOCODE - library","body":"<p>I'm looking for a JVM library in Java, Scala etc which supports mapping between various country subdivisions/states as defined in the <a href=\"https://en.wikipedia.org/wiki/ISO_3166-2\" rel=\"nofollow noreferrer\">ISO 3166-2</a> standard. </p>\n\n<p>Is there a recommended Java Library (preferable on maven) or an API like Google Maps which can do this mapping. </p>\n\n<p>For example in Australia we have the following;</p>\n\n<pre><code>Code    Subdivision name (en)   Subdivision category\nAU-NSW   New South Wales                state\nAU-QLD   Queensland                     state\nAU-SA    South Australia                state\nAU-TAS   Tasmania                       state\nAU-VIC   Victoria                       state\nAU-WA    Western Australia              state\nAU-ACT   Australian Capital Territory   territory\nAU-NT    Northern Territory             territory\n</code></pre>\n"},{"tags":["java","floating-point","integer"],"comments":[{"owner":{"account_id":23121,"reputation":527346,"user_id":57695,"accept_rate":75,"display_name":"Peter Lawrey"},"score":3,"creation_date":1296062566,"post_id":4806944,"comment_id":5329059,"body_markdown":"I think you mean `float` and `int`. The classes `Float` and `Integer` are wrappers for these. They are also the same size. ;)","body":"I think you mean <code>float</code> and <code>int</code>. The classes <code>Float</code> and <code>Integer</code> are wrappers for these. They are also the same size. ;)"}],"answers":[{"tags":[],"owner":{"account_id":27626,"reputation":346906,"user_id":73070,"accept_rate":81,"display_name":"Joey"},"down_vote_count":0,"up_vote_count":114,"is_accepted":false,"score":114,"last_activity_date":1697810720,"creation_date":1296058887,"answer_id":4806966,"question_id":4806944,"body_markdown":"* `float` stores floating-point values, that is, values that have potential decimal places\r\n* `int` only stores integral values, that is, whole numbers\r\n\r\nSo while both are 32 bits wide, their use (and representation) is quite different. You cannot store 3.141 in an integer, but you can in a `float`.\r\n\r\nDissecting them both a little further:\r\n\r\nIn an integer, *all* bits except the leftmost one are used to store the number value. This is (in Java and many computers too) done in the so-called *two&#39;s complement*, which support negatives values. Two&#39;s complement uses the leftmost bit to store the positive (0) or negative sign (1). This basically means that you can represent the values of &amp;minus;2&lt;sup&gt;31&lt;/sup&gt; to 2&lt;sup&gt;31&lt;/sup&gt;&amp;nbsp;&amp;minus;&amp;nbsp;1.\r\n\r\nIn a float, those 32 bits are divided between three distinct parts: The sign bit, the exponent and the mantissa. They are laid out as follows:\r\n\r\n    S EEEEEEEE MMMMMMMMMMMMMMMMMMMMMMM\r\n\r\nThere is a single bit that determines whether the number is negative or non-negative (zero is neither positive nor negative, but has the sign bit set to zero). Then there are eight bits of an exponent and 23 bits of mantissa. To get a useful number from that, (roughly) the following calculation is performed:\r\n\r\n&gt; *M* &#215; 2&lt;sup&gt;*E*&lt;/sup&gt;\r\n\r\n(There is more to it, but this should suffice for the purpose of this discussion)\r\n\r\nThe mantissa is in essence not much more than a 24-bit integer number. This gets multiplied by 2 to the power of the exponent part, which, roughly, is a number between &amp;minus;128 and 127.\r\n\r\nTherefore you can accurately represent all numbers that would fit in a 24-bit integer but the numeric range is also much greater as larger exponents allow for larger values. For example, the maximum value for a `float` is around 3.4 &#215; 10&lt;sup&gt;38&lt;/sup&gt; whereas `int` only allows values up to 2.1 &#215; 10&lt;sup&gt;9&lt;/sup&gt;.\r\n\r\nBut that also means, since 32 bits only have 4.2 &#215; 10&lt;sup&gt;9&lt;/sup&gt; different states (which are all used to represent the values `int` can store), that at the larger end of `float`&#39;s numeric range the numbers are spaced wider apart (since there cannot be more unique `float` numbers than there are unique `int` numbers). You cannot represent some numbers exactly, then. For example, the number 2 &#215; 10&lt;sup&gt;12&lt;/sup&gt; has a representation in `float` of 1,999,999,991,808. That might be *close* to 2,000,000,000,000 but it&#39;s not exact. Likewise, adding 1 to that number does not change it because 1 is too small to make a difference in the larger scales `float` is using there.\r\n\r\nSimilarly, you can also represent very small numbers (between 0 and 1) in a `float` but regardless of whether the numbers are very large or very small, `float` only has a precision of around 6 or 7 decimal digits. If you have large numbers those digits are at the start of the number (e.g. 4.51534 &#215; 10&lt;sup&gt;35&lt;/sup&gt;, which is nothing more than 451534 follows by 30 zeroes – and `float` cannot tell anything useful about whether those 30 digits are actually zeroes or something else), for very small numbers (e.g. 3.14159 &#215; 10&lt;sup&gt;&amp;minus;27&lt;/sup&gt;) they are at the far end of the number, way beyond the starting digits of 0.0000...","title":"What is the difference between the float and integer data type when the size is the same?","body":"<ul>\n<li><code>float</code> stores floating-point values, that is, values that have potential decimal places</li>\n<li><code>int</code> only stores integral values, that is, whole numbers</li>\n</ul>\n<p>So while both are 32 bits wide, their use (and representation) is quite different. You cannot store 3.141 in an integer, but you can in a <code>float</code>.</p>\n<p>Dissecting them both a little further:</p>\n<p>In an integer, <em>all</em> bits except the leftmost one are used to store the number value. This is (in Java and many computers too) done in the so-called <em>two's complement</em>, which support negatives values. Two's complement uses the leftmost bit to store the positive (0) or negative sign (1). This basically means that you can represent the values of −2<sup>31</sup> to 2<sup>31</sup> − 1.</p>\n<p>In a float, those 32 bits are divided between three distinct parts: The sign bit, the exponent and the mantissa. They are laid out as follows:</p>\n<pre><code>S EEEEEEEE MMMMMMMMMMMMMMMMMMMMMMM\n</code></pre>\n<p>There is a single bit that determines whether the number is negative or non-negative (zero is neither positive nor negative, but has the sign bit set to zero). Then there are eight bits of an exponent and 23 bits of mantissa. To get a useful number from that, (roughly) the following calculation is performed:</p>\n<blockquote>\n<p><em>M</em> × 2<sup><em>E</em></sup></p>\n</blockquote>\n<p>(There is more to it, but this should suffice for the purpose of this discussion)</p>\n<p>The mantissa is in essence not much more than a 24-bit integer number. This gets multiplied by 2 to the power of the exponent part, which, roughly, is a number between −128 and 127.</p>\n<p>Therefore you can accurately represent all numbers that would fit in a 24-bit integer but the numeric range is also much greater as larger exponents allow for larger values. For example, the maximum value for a <code>float</code> is around 3.4 × 10<sup>38</sup> whereas <code>int</code> only allows values up to 2.1 × 10<sup>9</sup>.</p>\n<p>But that also means, since 32 bits only have 4.2 × 10<sup>9</sup> different states (which are all used to represent the values <code>int</code> can store), that at the larger end of <code>float</code>'s numeric range the numbers are spaced wider apart (since there cannot be more unique <code>float</code> numbers than there are unique <code>int</code> numbers). You cannot represent some numbers exactly, then. For example, the number 2 × 10<sup>12</sup> has a representation in <code>float</code> of 1,999,999,991,808. That might be <em>close</em> to 2,000,000,000,000 but it's not exact. Likewise, adding 1 to that number does not change it because 1 is too small to make a difference in the larger scales <code>float</code> is using there.</p>\n<p>Similarly, you can also represent very small numbers (between 0 and 1) in a <code>float</code> but regardless of whether the numbers are very large or very small, <code>float</code> only has a precision of around 6 or 7 decimal digits. If you have large numbers those digits are at the start of the number (e.g. 4.51534 × 10<sup>35</sup>, which is nothing more than 451534 follows by 30 zeroes – and <code>float</code> cannot tell anything useful about whether those 30 digits are actually zeroes or something else), for very small numbers (e.g. 3.14159 × 10<sup>−27</sup>) they are at the far end of the number, way beyond the starting digits of 0.0000...</p>\n"},{"tags":[],"owner":{"account_id":3393,"reputation":60796,"user_id":4893,"accept_rate":64,"display_name":"sblundy"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1442941028,"creation_date":1296059176,"answer_id":4807032,"question_id":4806944,"body_markdown":"Floats are used to store a wider range of number than can be fit in an integer. These include decimal numbers and scientific notation style numbers that can be bigger values than can fit in 32 bits. Here&#39;s the deep dive into them: http://en.wikipedia.org/wiki/Floating_point","title":"What is the difference between the float and integer data type when the size is the same?","body":"<p>Floats are used to store a wider range of number than can be fit in an integer. These include decimal numbers and scientific notation style numbers that can be bigger values than can fit in 32 bits. Here's the deep dive into them: <a href=\"http://en.wikipedia.org/wiki/Floating_point\" rel=\"nofollow\">http://en.wikipedia.org/wiki/Floating_point</a></p>\n"},{"tags":[],"owner":{"account_id":3439962,"reputation":1,"user_id":2882148,"display_name":"user2882148"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1639063764,"creation_date":1639063377,"answer_id":70292431,"question_id":4806944,"body_markdown":"Joey&#39;s answer is quite good. You might check the below calculation in Python.. It shows how the 32bit float maximum and minimum are obtained. Please correct me if my understanding is wrong.\r\nHope it&#39;s helpful.\r\n```\r\nimport math\r\ndef convertToIntegerLessThanK(K):\r\n    return int(K) if K &gt; 0 else int(K) - 1\r\n\r\nE = [-126, 127]\r\nn = 23\r\nconverted_power = math.log(2,10) * E[1]\r\nten_power = convertToIntegerLessThanK(converted_power)\r\nfraction = converted_power - ten_power\r\n\r\nmaximum_M = (2 - pow(2, -n))\r\nsignificant_part = pow(10, fraction) * maximum_M\r\n\r\nprint(str(significant_part) + &quot;e&quot; + str(ten_power))\r\n\r\n\r\n# compute minimum float significant part\r\nconverted_power = math.log(2,10) * E[0]\r\nten_power = convertToIntegerLessThanK(converted_power)\r\nfraction = converted_power - ten_power\r\n\r\nminimum_M = (1+ pow(2, -n))\r\nsignificant_part = pow(10, fraction) * minimum_M\r\n\r\nprint(str(significant_part) + &quot;e&quot; + str(ten_power))\r\n#3.402823466385235e38\r\n#1.1754944909521525e-38\r\n```","title":"What is the difference between the float and integer data type when the size is the same?","body":"<p>Joey's answer is quite good. You might check the below calculation in Python.. It shows how the 32bit float maximum and minimum are obtained. Please correct me if my understanding is wrong.\nHope it's helpful.</p>\n<pre><code>import math\ndef convertToIntegerLessThanK(K):\n    return int(K) if K &gt; 0 else int(K) - 1\n\nE = [-126, 127]\nn = 23\nconverted_power = math.log(2,10) * E[1]\nten_power = convertToIntegerLessThanK(converted_power)\nfraction = converted_power - ten_power\n\nmaximum_M = (2 - pow(2, -n))\nsignificant_part = pow(10, fraction) * maximum_M\n\nprint(str(significant_part) + &quot;e&quot; + str(ten_power))\n\n\n# compute minimum float significant part\nconverted_power = math.log(2,10) * E[0]\nten_power = convertToIntegerLessThanK(converted_power)\nfraction = converted_power - ten_power\n\nminimum_M = (1+ pow(2, -n))\nsignificant_part = pow(10, fraction) * minimum_M\n\nprint(str(significant_part) + &quot;e&quot; + str(ten_power))\n#3.402823466385235e38\n#1.1754944909521525e-38\n</code></pre>\n"}],"owner":{"account_id":289754,"reputation":561,"user_id":590916,"display_name":"akk"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":223564,"favorite_count":0,"down_vote_count":0,"up_vote_count":56,"answer_count":3,"score":56,"last_activity_date":1697810720,"creation_date":1296058791,"question_id":4806944,"body_markdown":"What the difference between the float and integer data type when size is same?","title":"What is the difference between the float and integer data type when the size is the same?","body":"<p>What the difference between the float and integer data type when size is same?</p>\n"},{"tags":["java","android","compiler-errors","android-webview"],"comments":[{"owner":{"account_id":29708060,"reputation":1,"user_id":22768441,"display_name":"Md Belal Dev"},"score":0,"creation_date":1697716336,"post_id":77323445,"comment_id":136316322,"body_markdown":"I given everything here. Code and Error message both are included here","body":"I given everything here. Code and Error message both are included here"},{"owner":{"account_id":6982783,"reputation":326,"user_id":5354987,"display_name":"Samuel Marchant"},"score":0,"creation_date":1697716915,"post_id":77323445,"comment_id":136316436,"body_markdown":"Do a compile of the code using the  -Xlint:deprecation switch with the java command and it will list back all the deprecated API methods that have been replaced by newer methods, look them up in the API documentation to see the recommendations for those methods to replace.","body":"Do a compile of the code using the  -Xlint:deprecation switch with the java command and it will list back all the deprecated API methods that have been replaced by newer methods, look them up in the API documentation to see the recommendations for those methods to replace."},{"owner":{"account_id":50585,"reputation":39940,"user_id":150978,"accept_rate":78,"display_name":"Robert"},"score":0,"creation_date":1697717364,"post_id":77323445,"comment_id":136316519,"body_markdown":"What you have posted is not en error message but just a note. As you can see the compilation just continues. This is not the reason why the build process failed.","body":"What you have posted is not en error message but just a note. As you can see the compilation just continues. This is not the reason why the build process failed."}],"owner":{"account_id":29708060,"reputation":1,"user_id":22768441,"display_name":"Md Belal Dev"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":88,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1697810606,"creation_date":1697715565,"question_id":77323445,"body_markdown":"I cloned a file for my website from GitHUB which was web-view-app. I was trying export my app after change all information. I exported from Build&gt;Generate Singed Bundle/Apk but I&#39;m getting the error.\r\n\r\nThis is the Error Message:\r\n```\r\nTask :app:compileReleaseJavaWithJavac\r\nNote: D:\\Android App\\Accounting Software v1.0.0\\accounting_main\\app\\src\\main\\java\\com\\webview\\myapplication\\MainActivity.java uses or overrides a deprecated API.\r\nNote: Recompile with -Xlint:deprecation for details.\r\n```\r\n\r\nAnd Error screenshot:\r\n\r\n![Screenshot](https://i.stack.imgur.com/Maw6a.png)\r\n\r\nMy Java Code is here :\r\n```\r\npackage com.webview.myapplication;\r\n\r\nimport android.Manifest;\r\nimport android.annotation.SuppressLint;\r\nimport android.app.Activity;\r\nimport android.app.AlertDialog;\r\nimport android.app.DownloadManager;\r\nimport android.content.Context;\r\nimport android.net.Uri;\r\nimport android.os.Build;\r\nimport android.os.Bundle;\r\nimport android.os.Environment;\r\nimport android.webkit.CookieManager;\r\nimport android.webkit.URLUtil;\r\nimport android.webkit.WebSettings;\r\nimport android.webkit.WebView;\r\nimport android.webkit.WebViewClient;\r\nimport android.widget.Toast;\r\nimport androidx.annotation.RequiresApi;\r\nimport androidx.core.app.ActivityCompat;\r\n\r\npublic class MainActivity extends Activity {\r\n\r\n    private final int STORAGE_PERMISSION_CODE = 1;\r\n    private WebView mWebView;\r\n\r\n    private void requestStoragePermission() {\r\n        if (ActivityCompat.shouldShowRequestPermissionRationale(this, Manifest.permission.READ_EXTERNAL_STORAGE)) {\r\n            new AlertDialog.Builder(this)\r\n                    .setTitle(&quot;Permission needed&quot;)\r\n                    .setMessage(&quot;This permission is needed to download files&quot;)\r\n                    .setPositiveButton(&quot;ok&quot;, (dialog, which) -&gt; ActivityCompat.requestPermissions(MainActivity.this,\r\n                            new String[]{Manifest.permission.READ_EXTERNAL_STORAGE}, STORAGE_PERMISSION_CODE))\r\n                    .setNegativeButton(&quot;cancel&quot;, (dialog, which) -&gt; dialog.dismiss())\r\n                    .create().show();\r\n        } else {\r\n            ActivityCompat.requestPermissions(this,\r\n                    new String[]{Manifest.permission.READ_EXTERNAL_STORAGE}, STORAGE_PERMISSION_CODE);\r\n        }\r\n    }\r\n\r\n    @RequiresApi(api = Build.VERSION_CODES.Q)\r\n    @Override\r\n    @SuppressLint(&quot;SetJavaScriptEnabled&quot;)\r\n    protected void onCreate(Bundle savedInstanceState) {\r\n        requestStoragePermission();\r\n        super.onCreate(savedInstanceState);\r\n        setContentView(R.layout.activity_main);\r\n        mWebView = findViewById(R.id.activity_main_webview);\r\n        WebSettings webSettings = mWebView.getSettings();\r\n        webSettings.setJavaScriptEnabled(true);\r\n        mWebView.setWebViewClient(new HelloWebViewClient());\r\n        mWebView.setDownloadListener((url, userAgent, contentDisposition, mimeType, contentLength) -&gt; {\r\n            Uri source = Uri.parse(url);\r\n            DownloadManager.Request request = new DownloadManager.Request(source);\r\n            String cookies = CookieManager.getInstance().getCookie(url);\r\n            request.addRequestHeader(&quot;cookie&quot;, cookies);\r\n            request.addRequestHeader(&quot;User-Agent&quot;, userAgent);\r\n            request.setDescription(&quot;Downloading File...&quot;);\r\n            request.setTitle(URLUtil.guessFileName(url, contentDisposition, mimeType));\r\n            request.allowScanningByMediaScanner();\r\n            request.setNotificationVisibility(DownloadManager.Request.VISIBILITY_VISIBLE_NOTIFY_COMPLETED);\r\n            request.setDestinationInExternalPublicDir(Environment.DIRECTORY_DOWNLOADS, URLUtil.guessFileName(url, contentDisposition, mimeType));\r\n            DownloadManager dm = (DownloadManager) getSystemService(Context.DOWNLOAD_SERVICE);\r\n            dm.enqueue(request);\r\n            Toast.makeText(getApplicationContext(), &quot;Downloading File&quot;, Toast.LENGTH_LONG).show();\r\n        });\r\n        mWebView.loadUrl(&quot;https://account.founderitltd.com&quot;); //Replace The Link Here\r\n    }\r\n    private static class HelloWebViewClient extends WebViewClient\r\n    {\r\n        @Override\r\n        public boolean shouldOverrideUrlLoading(final WebView view, final String url)\r\n        {\r\n            view.loadUrl(url);\r\n            return true;\r\n        }\r\n    }\r\n\r\n    @Override\r\n    public void onBackPressed() {\r\n        if (mWebView.canGoBack()) {\r\n            mWebView.goBack();\r\n        } else {\r\n            super.onBackPressed();\r\n        }\r\n    }\r\n\r\n}\r\n```\r\n\r\n\r\nI want to make a web view app which I&#39;ll publish on play store.","title":"Recompile with -Xlint:deprecation for details For WebView Application From GitHub","body":"<p>I cloned a file for my website from GitHUB which was web-view-app. I was trying export my app after change all information. I exported from Build&gt;Generate Singed Bundle/Apk but I'm getting the error.</p>\n<p>This is the Error Message:</p>\n<pre><code>Task :app:compileReleaseJavaWithJavac\nNote: D:\\Android App\\Accounting Software v1.0.0\\accounting_main\\app\\src\\main\\java\\com\\webview\\myapplication\\MainActivity.java uses or overrides a deprecated API.\nNote: Recompile with -Xlint:deprecation for details.\n</code></pre>\n<p>And Error screenshot:</p>\n<p><img src=\"https://i.stack.imgur.com/Maw6a.png\" alt=\"Screenshot\" /></p>\n<p>My Java Code is here :</p>\n<pre><code>package com.webview.myapplication;\n\nimport android.Manifest;\nimport android.annotation.SuppressLint;\nimport android.app.Activity;\nimport android.app.AlertDialog;\nimport android.app.DownloadManager;\nimport android.content.Context;\nimport android.net.Uri;\nimport android.os.Build;\nimport android.os.Bundle;\nimport android.os.Environment;\nimport android.webkit.CookieManager;\nimport android.webkit.URLUtil;\nimport android.webkit.WebSettings;\nimport android.webkit.WebView;\nimport android.webkit.WebViewClient;\nimport android.widget.Toast;\nimport androidx.annotation.RequiresApi;\nimport androidx.core.app.ActivityCompat;\n\npublic class MainActivity extends Activity {\n\n    private final int STORAGE_PERMISSION_CODE = 1;\n    private WebView mWebView;\n\n    private void requestStoragePermission() {\n        if (ActivityCompat.shouldShowRequestPermissionRationale(this, Manifest.permission.READ_EXTERNAL_STORAGE)) {\n            new AlertDialog.Builder(this)\n                    .setTitle(&quot;Permission needed&quot;)\n                    .setMessage(&quot;This permission is needed to download files&quot;)\n                    .setPositiveButton(&quot;ok&quot;, (dialog, which) -&gt; ActivityCompat.requestPermissions(MainActivity.this,\n                            new String[]{Manifest.permission.READ_EXTERNAL_STORAGE}, STORAGE_PERMISSION_CODE))\n                    .setNegativeButton(&quot;cancel&quot;, (dialog, which) -&gt; dialog.dismiss())\n                    .create().show();\n        } else {\n            ActivityCompat.requestPermissions(this,\n                    new String[]{Manifest.permission.READ_EXTERNAL_STORAGE}, STORAGE_PERMISSION_CODE);\n        }\n    }\n\n    @RequiresApi(api = Build.VERSION_CODES.Q)\n    @Override\n    @SuppressLint(&quot;SetJavaScriptEnabled&quot;)\n    protected void onCreate(Bundle savedInstanceState) {\n        requestStoragePermission();\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.activity_main);\n        mWebView = findViewById(R.id.activity_main_webview);\n        WebSettings webSettings = mWebView.getSettings();\n        webSettings.setJavaScriptEnabled(true);\n        mWebView.setWebViewClient(new HelloWebViewClient());\n        mWebView.setDownloadListener((url, userAgent, contentDisposition, mimeType, contentLength) -&gt; {\n            Uri source = Uri.parse(url);\n            DownloadManager.Request request = new DownloadManager.Request(source);\n            String cookies = CookieManager.getInstance().getCookie(url);\n            request.addRequestHeader(&quot;cookie&quot;, cookies);\n            request.addRequestHeader(&quot;User-Agent&quot;, userAgent);\n            request.setDescription(&quot;Downloading File...&quot;);\n            request.setTitle(URLUtil.guessFileName(url, contentDisposition, mimeType));\n            request.allowScanningByMediaScanner();\n            request.setNotificationVisibility(DownloadManager.Request.VISIBILITY_VISIBLE_NOTIFY_COMPLETED);\n            request.setDestinationInExternalPublicDir(Environment.DIRECTORY_DOWNLOADS, URLUtil.guessFileName(url, contentDisposition, mimeType));\n            DownloadManager dm = (DownloadManager) getSystemService(Context.DOWNLOAD_SERVICE);\n            dm.enqueue(request);\n            Toast.makeText(getApplicationContext(), &quot;Downloading File&quot;, Toast.LENGTH_LONG).show();\n        });\n        mWebView.loadUrl(&quot;https://account.founderitltd.com&quot;); //Replace The Link Here\n    }\n    private static class HelloWebViewClient extends WebViewClient\n    {\n        @Override\n        public boolean shouldOverrideUrlLoading(final WebView view, final String url)\n        {\n            view.loadUrl(url);\n            return true;\n        }\n    }\n\n    @Override\n    public void onBackPressed() {\n        if (mWebView.canGoBack()) {\n            mWebView.goBack();\n        } else {\n            super.onBackPressed();\n        }\n    }\n\n}\n</code></pre>\n<p>I want to make a web view app which I'll publish on play store.</p>\n"},{"tags":["java","apache-commons","vfs","apache-commons-vfs"],"comments":[{"owner":{"account_id":7567,"reputation":10188,"user_id":13189,"accept_rate":75,"display_name":"eckes"},"score":0,"creation_date":1420827593,"post_id":11101267,"comment_id":44135936,"body_markdown":"Besides rolling your own monitor (as described in the accepted answer) there is no common progress callback infrastructure in Commons VFS (but there probably should). It is already mentioned as a TODO on http://wiki.apache.org/commons/VfsNext","body":"Besides rolling your own monitor (as described in the accepted answer) there is no common progress callback infrastructure in Commons VFS (but there probably should). It is already mentioned as a TODO on <a href=\"http://wiki.apache.org/commons/VfsNext\" rel=\"nofollow noreferrer\">wiki.apache.org/commons/VfsNext</a>"}],"answers":[{"tags":[],"owner":{"account_id":95356,"reputation":10155,"user_id":259747,"accept_rate":94,"display_name":"Daniel"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1340266237,"creation_date":1340266237,"answer_id":11134020,"question_id":11101267,"body_markdown":"It can be done by getting input and output streams from VFS. The following example uses a utility class from commons-net (a dependency of VFS) to manage the copying and progress-monitoring. You could equally do it manually.\r\n\r\n    import org.apache.commons.net.io.Util;\r\n    import org.apache.commons.net.io.CopyStreamListener;\r\n\r\n    private void copy(FileObject sourceFile, FileObject destinationFile, CopyStreamListener progressMonitor) throws IOException {\r\n        InputStream sourceFileIn = sourceFile.getContent().getInputStream();\r\n        try {\r\n            OutputStream destinationFileOut = destinationFile.getContent().getOutputStream();\r\n            try {\r\n                Util.copyStream(sourceFileIn, destinationFileOut, Util.DEFAULT_COPY_BUFFER_SIZE, sourceFile.getContent().getSize(), progressMonitor);\r\n            } finally {\r\n                destinationFileOut.close();\r\n            }\r\n        } finally {\r\n            sourceFileIn.close();\r\n        }\r\n    }","title":"How do I monitor the progress of a file transfer in Apache Commons VFS?","body":"<p>It can be done by getting input and output streams from VFS. The following example uses a utility class from commons-net (a dependency of VFS) to manage the copying and progress-monitoring. You could equally do it manually.</p>\n\n<pre><code>import org.apache.commons.net.io.Util;\nimport org.apache.commons.net.io.CopyStreamListener;\n\nprivate void copy(FileObject sourceFile, FileObject destinationFile, CopyStreamListener progressMonitor) throws IOException {\n    InputStream sourceFileIn = sourceFile.getContent().getInputStream();\n    try {\n        OutputStream destinationFileOut = destinationFile.getContent().getOutputStream();\n        try {\n            Util.copyStream(sourceFileIn, destinationFileOut, Util.DEFAULT_COPY_BUFFER_SIZE, sourceFile.getContent().getSize(), progressMonitor);\n        } finally {\n            destinationFileOut.close();\n        }\n    } finally {\n        sourceFileIn.close();\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1483504,"reputation":20404,"user_id":1392277,"accept_rate":84,"display_name":"LppEdd"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1697810156,"creation_date":1619119839,"answer_id":67219652,"question_id":11101267,"body_markdown":"The proposed solution is kinda off, and a bit &quot;weak&quot;. Let&#39;s try with a neater one!  \r\n*Note: the following code requires JDK 16.*\r\n\r\nGiven an example copy operation initiated with the standard:\r\n\r\n    final var manager = VFS.getManager();\r\n    final var origin = manager.resolveFile(originUri.toString(), fileSystemOptions);\r\n    final var destination = manager.resolveFile(destinationUri.toString(), fileSystemOptions);\r\n    destination.copyFrom(origin, Selectors.SELECT_ALL);\r\n\r\nSimply wrap the destination `FileObject` with a custom delegating implementation that we may call `ProgressFileObject`, which will accept also a `ProgressListener`:\r\n\r\n    final var listener = new ProgressListener() {\r\n      @Override\r\n      public void started() {\r\n        System.out.println(&quot;Started&quot;);\r\n      }\r\n    \r\n      @Override\r\n      public void completed() {\r\n        System.out.println(&quot;Completed&quot;);\r\n      }\r\n\r\n      @Override\r\n      public void failed(@NotNull final Exception e) {\r\n        System.out.println(&quot;Failed: &quot; + e.getMessage());\r\n      }\r\n\r\n      @Override\r\n      public void progress(@NotNull final ProgressEvent event) {\r\n        final var out = &quot;%d\\t\\t\\t%d\\t\\t\\tFile: %s&quot;.formatted(\r\n            event.totalBytes(),\r\n            event.totalTransferredBytes(),\r\n            event.lastFileDestinationPath()\r\n        );\r\n\r\n        System.out.println(out);\r\n      }\r\n    };\r\n\r\n    final var progressFileObject = new ProgressFileObject(destination, listener);\r\n    progressFileObject.copyFrom(origin, Selectors.SELECT_ALL);\r\n\r\nWhich will result in, with a folder:\r\n\r\n    Started\r\n    4648320\t\t\t119391\t\t\tFile: /test_dir/AN/ANI0.evt\r\n    4648320\t\t\t119511\t\t\tFile: /test_dir/AN/ANI0.hpj\r\n    4648320\t\t\t119584\t\t\tFile: /test_dir/AN/ANI0.ipf\r\n    4648320\t\t\t119585\t\t\tFile: /test_dir/AN/ANI0.ipm\r\n    4648320\t\t\t1907060\t\t\tFile: /test_dir/AN/ANI0.LST\r\n    4648320\t\t\t1907253\t\t\tFile: /test_dir/AN/ANI0.MRG\r\n    4648320\t\t\t2472700\t\t\tFile: /test_dir/AN/ANI0.ODF\r\n    4648320\t\t\t2472707\t\t\tFile: /test_dir/AN/ANI0.ph\r\n    4648320\t\t\t2473421\t\t\tFile: /test_dir/AN/ANI0.rbj\r\n    4648320\t\t\t2473547\t\t\tFile: /test_dir/AN/ANI0.rc\r\n    4648320\t\t\t2473708\t\t\tFile: /test_dir/AN/ANI0.rst\r\n    4648320\t\t\t2474813\t\t\tFile: /test_dir/AN/ANI0.rtf\r\n    4648320\t\t\t2474814\t\t\tFile: /test_dir/AN/ANI0.txc\r\n    4648320\t\t\t2474819\t\t\tFile: /test_dir/AN/ANI0.txm\r\n    4648320\t\t\t2474820\t\t\tFile: /test_dir/AN/ANI0.vpf\r\n    4648320\t\t\t2829348\t\t\tFile: /test_dir/AN/ANI0.VPG\r\n    4648320\t\t\t2829466\t\t\tFile: /test_dir/AN/P0000001.rc\r\n    4648320\t\t\t2829592\t\t\tFile: /test_dir/AN/P0000002.rc\r\n    4648320\t\t\t4648275\t\t\tFile: /test_dir/AN/VPGSAV55.C2T\r\n    4648320\t\t\t4648320\t\t\tFile: /test_dir/AN/VRPGWIN.RC\r\n    Completed\r\n\r\nAnd here are the `ProgressFileObject`, `ProgressListener`, and `ProgressEvent` sources:\r\n\r\n    /**\r\n     * @author Edoardo Luppi\r\n     */\r\n    public class ProgressFileObject extends DecoratedFileObject {\r\n      private final FileObject fileObject;\r\n      private final ProgressListener listener;\r\n    \r\n      public ProgressFileObject(\r\n          @NotNull final FileObject fileObject,\r\n          @NotNull final ProgressListener listener) {\r\n        super(fileObject);\r\n        this.fileObject = fileObject;\r\n        this.listener = listener;\r\n      }\r\n    \r\n      @Override\r\n      public void copyFrom(final FileObject file, final FileSelector selector) throws FileSystemException {\r\n        if (!FileObjectUtils.exists(file)) {\r\n          final var exception = new FileSystemException(&quot;vfs.provider/copy-missing-file.error&quot;, file);\r\n          listener.failed(exception);\r\n          throw exception;\r\n        }\r\n    \r\n        listener.started();\r\n    \r\n        // Locate the files to copy across\r\n        final List&lt;FileObject&gt; files = new ArrayList&lt;&gt;();\r\n        file.findFiles(selector, false, files);\r\n    \r\n        // Calculate the total bytes that will be copied\r\n        var totalBytes = 0L;\r\n    \r\n        for (final var srcFile : files) {\r\n          if (srcFile.getType().hasContent()) {\r\n            totalBytes += srcFile.getContent().getSize();\r\n          }\r\n        }\r\n    \r\n        var totalTransferredBytes = 0L;\r\n    \r\n        // Copy everything across\r\n        for (final var srcFile : files) {\r\n          // Determine the destination file\r\n          final var relPath = file.getName().getRelativeName(srcFile.getName());\r\n          final var destFile = resolveFile(relPath, NameScope.DESCENDENT_OR_SELF);\r\n    \r\n          // Clean up the destination file, if necessary\r\n          if (FileObjectUtils.exists(destFile) &amp;&amp; destFile.getType() != srcFile.getType()) {\r\n            // The destination file exists, and is not of the same type, so delete it\r\n            destFile.deleteAll();\r\n          }\r\n    \r\n          // Copy across\r\n          try {\r\n            if (srcFile.getType().hasContent()) {\r\n              try (final var content = srcFile.getContent()) {\r\n                final var fileTransferredBytes = content.write(destFile);\r\n                totalTransferredBytes += fileTransferredBytes;\r\n                final var event = new ProgressEvent(\r\n                    totalBytes,\r\n                    totalTransferredBytes,\r\n                    fileTransferredBytes,\r\n                    srcFile.getName().getPath(),\r\n                    destFile.getName().getPath()\r\n                );\r\n            \r\n                listener.progress(event);\r\n              }\r\n            } else if (srcFile.getType().hasChildren()) {\r\n              destFile.createFolder();\r\n            }\r\n          } catch (final IOException e) {\r\n            final var exception = new FileSystemException(&quot;vfs.provider/copy-file.error&quot;, e, srcFile, destFile);\r\n            listener.failed(exception);\r\n            throw exception;\r\n          }\r\n        }\r\n    \r\n        listener.completed();\r\n      }\r\n    \r\n      @Override\r\n      public URI getURI() {\r\n        return fileObject.getURI();\r\n      }\r\n    \r\n      @Override\r\n      public Path getPath() {\r\n        return fileObject.getPath();\r\n      }\r\n    \r\n      @Override\r\n      public boolean isSymbolicLink() throws FileSystemException {\r\n        return fileObject.isSymbolicLink();\r\n      }\r\n    \r\n      @Override\r\n      public void forEach(final Consumer&lt;? super FileObject&gt; action) {\r\n        fileObject.forEach(action);\r\n      }\r\n    \r\n      @Override\r\n      public Spliterator&lt;FileObject&gt; spliterator() {\r\n        return fileObject.spliterator();\r\n      }\r\n    \r\n      @Override\r\n      public int hashCode() {\r\n        return fileObject.hashCode();\r\n      }\r\n    \r\n      @Override\r\n      public boolean equals(final Object obj) {\r\n        return fileObject.equals(obj);\r\n      }\r\n    \r\n      @Override\r\n      public String toString() {\r\n        return fileObject.toString();\r\n      }\r\n    \r\n      public interface ProgressListener {\r\n        void started();\r\n        void completed();\r\n        void failed(@NotNull final Exception e);\r\n        void progress(@NotNull final ProgressEvent event);\r\n      }\r\n    \r\n      public record ProgressEvent(\r\n          long totalBytes,\r\n          long totalTransferredBytes,\r\n          long lastFileTransferredBytes,\r\n          String lastFileOriginPath,\r\n          String lastFileDestinationPath\r\n      ) {}\r\n    }","title":"How do I monitor the progress of a file transfer in Apache Commons VFS?","body":"<p>The proposed solution is kinda off, and a bit &quot;weak&quot;. Let's try with a neater one!<br />\n<em>Note: the following code requires JDK 16.</em></p>\n<p>Given an example copy operation initiated with the standard:</p>\n<pre><code>final var manager = VFS.getManager();\nfinal var origin = manager.resolveFile(originUri.toString(), fileSystemOptions);\nfinal var destination = manager.resolveFile(destinationUri.toString(), fileSystemOptions);\ndestination.copyFrom(origin, Selectors.SELECT_ALL);\n</code></pre>\n<p>Simply wrap the destination <code>FileObject</code> with a custom delegating implementation that we may call <code>ProgressFileObject</code>, which will accept also a <code>ProgressListener</code>:</p>\n<pre><code>final var listener = new ProgressListener() {\n  @Override\n  public void started() {\n    System.out.println(&quot;Started&quot;);\n  }\n\n  @Override\n  public void completed() {\n    System.out.println(&quot;Completed&quot;);\n  }\n\n  @Override\n  public void failed(@NotNull final Exception e) {\n    System.out.println(&quot;Failed: &quot; + e.getMessage());\n  }\n\n  @Override\n  public void progress(@NotNull final ProgressEvent event) {\n    final var out = &quot;%d\\t\\t\\t%d\\t\\t\\tFile: %s&quot;.formatted(\n        event.totalBytes(),\n        event.totalTransferredBytes(),\n        event.lastFileDestinationPath()\n    );\n\n    System.out.println(out);\n  }\n};\n\nfinal var progressFileObject = new ProgressFileObject(destination, listener);\nprogressFileObject.copyFrom(origin, Selectors.SELECT_ALL);\n</code></pre>\n<p>Which will result in, with a folder:</p>\n<pre><code>Started\n4648320         119391          File: /test_dir/AN/ANI0.evt\n4648320         119511          File: /test_dir/AN/ANI0.hpj\n4648320         119584          File: /test_dir/AN/ANI0.ipf\n4648320         119585          File: /test_dir/AN/ANI0.ipm\n4648320         1907060         File: /test_dir/AN/ANI0.LST\n4648320         1907253         File: /test_dir/AN/ANI0.MRG\n4648320         2472700         File: /test_dir/AN/ANI0.ODF\n4648320         2472707         File: /test_dir/AN/ANI0.ph\n4648320         2473421         File: /test_dir/AN/ANI0.rbj\n4648320         2473547         File: /test_dir/AN/ANI0.rc\n4648320         2473708         File: /test_dir/AN/ANI0.rst\n4648320         2474813         File: /test_dir/AN/ANI0.rtf\n4648320         2474814         File: /test_dir/AN/ANI0.txc\n4648320         2474819         File: /test_dir/AN/ANI0.txm\n4648320         2474820         File: /test_dir/AN/ANI0.vpf\n4648320         2829348         File: /test_dir/AN/ANI0.VPG\n4648320         2829466         File: /test_dir/AN/P0000001.rc\n4648320         2829592         File: /test_dir/AN/P0000002.rc\n4648320         4648275         File: /test_dir/AN/VPGSAV55.C2T\n4648320         4648320         File: /test_dir/AN/VRPGWIN.RC\nCompleted\n</code></pre>\n<p>And here are the <code>ProgressFileObject</code>, <code>ProgressListener</code>, and <code>ProgressEvent</code> sources:</p>\n<pre><code>/**\n * @author Edoardo Luppi\n */\npublic class ProgressFileObject extends DecoratedFileObject {\n  private final FileObject fileObject;\n  private final ProgressListener listener;\n\n  public ProgressFileObject(\n      @NotNull final FileObject fileObject,\n      @NotNull final ProgressListener listener) {\n    super(fileObject);\n    this.fileObject = fileObject;\n    this.listener = listener;\n  }\n\n  @Override\n  public void copyFrom(final FileObject file, final FileSelector selector) throws FileSystemException {\n    if (!FileObjectUtils.exists(file)) {\n      final var exception = new FileSystemException(&quot;vfs.provider/copy-missing-file.error&quot;, file);\n      listener.failed(exception);\n      throw exception;\n    }\n\n    listener.started();\n\n    // Locate the files to copy across\n    final List&lt;FileObject&gt; files = new ArrayList&lt;&gt;();\n    file.findFiles(selector, false, files);\n\n    // Calculate the total bytes that will be copied\n    var totalBytes = 0L;\n\n    for (final var srcFile : files) {\n      if (srcFile.getType().hasContent()) {\n        totalBytes += srcFile.getContent().getSize();\n      }\n    }\n\n    var totalTransferredBytes = 0L;\n\n    // Copy everything across\n    for (final var srcFile : files) {\n      // Determine the destination file\n      final var relPath = file.getName().getRelativeName(srcFile.getName());\n      final var destFile = resolveFile(relPath, NameScope.DESCENDENT_OR_SELF);\n\n      // Clean up the destination file, if necessary\n      if (FileObjectUtils.exists(destFile) &amp;&amp; destFile.getType() != srcFile.getType()) {\n        // The destination file exists, and is not of the same type, so delete it\n        destFile.deleteAll();\n      }\n\n      // Copy across\n      try {\n        if (srcFile.getType().hasContent()) {\n          try (final var content = srcFile.getContent()) {\n            final var fileTransferredBytes = content.write(destFile);\n            totalTransferredBytes += fileTransferredBytes;\n            final var event = new ProgressEvent(\n                totalBytes,\n                totalTransferredBytes,\n                fileTransferredBytes,\n                srcFile.getName().getPath(),\n                destFile.getName().getPath()\n            );\n        \n            listener.progress(event);\n          }\n        } else if (srcFile.getType().hasChildren()) {\n          destFile.createFolder();\n        }\n      } catch (final IOException e) {\n        final var exception = new FileSystemException(&quot;vfs.provider/copy-file.error&quot;, e, srcFile, destFile);\n        listener.failed(exception);\n        throw exception;\n      }\n    }\n\n    listener.completed();\n  }\n\n  @Override\n  public URI getURI() {\n    return fileObject.getURI();\n  }\n\n  @Override\n  public Path getPath() {\n    return fileObject.getPath();\n  }\n\n  @Override\n  public boolean isSymbolicLink() throws FileSystemException {\n    return fileObject.isSymbolicLink();\n  }\n\n  @Override\n  public void forEach(final Consumer&lt;? super FileObject&gt; action) {\n    fileObject.forEach(action);\n  }\n\n  @Override\n  public Spliterator&lt;FileObject&gt; spliterator() {\n    return fileObject.spliterator();\n  }\n\n  @Override\n  public int hashCode() {\n    return fileObject.hashCode();\n  }\n\n  @Override\n  public boolean equals(final Object obj) {\n    return fileObject.equals(obj);\n  }\n\n  @Override\n  public String toString() {\n    return fileObject.toString();\n  }\n\n  public interface ProgressListener {\n    void started();\n    void completed();\n    void failed(@NotNull final Exception e);\n    void progress(@NotNull final ProgressEvent event);\n  }\n\n  public record ProgressEvent(\n      long totalBytes,\n      long totalTransferredBytes,\n      long lastFileTransferredBytes,\n      String lastFileOriginPath,\n      String lastFileDestinationPath\n  ) {}\n}\n</code></pre>\n"}],"owner":{"account_id":95356,"reputation":10155,"user_id":259747,"accept_rate":94,"display_name":"Daniel"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2735,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":11134020,"answer_count":2,"score":1,"last_activity_date":1697810156,"creation_date":1340110073,"question_id":11101267,"body_markdown":"Using [Apache Commons VFS][1], how do I monitor the progress of a file transfer. I need to be able to do it with uploads and downloads. I also need to monitor progress over HTTP, FTP, SFTP and FTPS. I can&#39;t find anything in the documentation about it.\r\n\r\n\r\n  [1]: http://commons.apache.org/vfs/","title":"How do I monitor the progress of a file transfer in Apache Commons VFS?","body":"<p>Using <a href=\"http://commons.apache.org/vfs/\" rel=\"nofollow\">Apache Commons VFS</a>, how do I monitor the progress of a file transfer. I need to be able to do it with uploads and downloads. I also need to monitor progress over HTTP, FTP, SFTP and FTPS. I can't find anything in the documentation about it.</p>\n"},{"tags":["java","docker","eclipse","remote-debugging","spring-tool-suite"],"comments":[{"owner":{"account_id":9337172,"reputation":1341,"user_id":6931023,"accept_rate":50,"display_name":"gladiator"},"score":0,"creation_date":1697809757,"post_id":77245650,"comment_id":136330137,"body_markdown":"More details here https://github.com/eclipse-jdt/eclipse.jdt.debug/issues/39","body":"More details here <a href=\"https://github.com/eclipse-jdt/eclipse.jdt.debug/issues/39\" rel=\"nofollow noreferrer\">github.com/eclipse-jdt/eclipse.jdt.debug/issues/39</a>"}],"owner":{"account_id":9337172,"reputation":1341,"user_id":6931023,"accept_rate":50,"display_name":"gladiator"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":36,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1697809802,"creation_date":1696605656,"question_id":77245650,"body_markdown":"There is a java app deployed on remote machine , I use port forward to debug it .\r\nBut the connection takes too much time .\r\n\r\nOn running ssh connection in debug mode I get below logs \r\n\r\n    debug1: Connection to port 5005 forwarding to 10.1.1.234 port 8000 requested.\r\n    debug1: channel 2: new [direct-tcpip]\r\n\r\nIn eclipse I get no error or logs when ran eclipse in debug mode with console log.\r\n\r\nIs there a way to speed up the connection time and speed of debugging .\r\nI have set all java debug properties in STS as optimal as possible to speed up debug but thats not helping .\r\n \r\nI have disabled all monitors and show threads in debug\r\nHere is configuration \r\n[![here is configuration ][1]][1]\r\nMore details and logs and data on issue here\r\nhttps://github.com/eclipse-jdt/eclipse.jdt.debug/issues/39\r\n\r\n  [1]: https://i.stack.imgur.com/SIjND.jpg","title":"Spring tool Suite Remote Debug over ssh port forward too slow","body":"<p>There is a java app deployed on remote machine , I use port forward to debug it .\nBut the connection takes too much time .</p>\n<p>On running ssh connection in debug mode I get below logs</p>\n<pre><code>debug1: Connection to port 5005 forwarding to 10.1.1.234 port 8000 requested.\ndebug1: channel 2: new [direct-tcpip]\n</code></pre>\n<p>In eclipse I get no error or logs when ran eclipse in debug mode with console log.</p>\n<p>Is there a way to speed up the connection time and speed of debugging .\nI have set all java debug properties in STS as optimal as possible to speed up debug but thats not helping .</p>\n<p>I have disabled all monitors and show threads in debug\nHere is configuration\n<a href=\"https://i.stack.imgur.com/SIjND.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/SIjND.jpg\" alt=\"here is configuration \" /></a>\nMore details and logs and data on issue here\n<a href=\"https://github.com/eclipse-jdt/eclipse.jdt.debug/issues/39\" rel=\"nofollow noreferrer\">https://github.com/eclipse-jdt/eclipse.jdt.debug/issues/39</a></p>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":1197724,"reputation":4404,"user_id":1169091,"accept_rate":9,"display_name":"nicomp"},"score":3,"creation_date":1563972421,"post_id":57183301,"comment_id":100877308,"body_markdown":"Show us your code. We will help.","body":"Show us your code. We will help."}],"answers":[{"tags":[],"owner":{"account_id":4360446,"reputation":2005,"user_id":3557714,"display_name":"Ben R."},"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1697809705,"creation_date":1563972604,"answer_id":57183375,"question_id":57183301,"body_markdown":"**Quick answer:**\r\n\r\n```java\r\nString currentDir = Paths.get(&quot;&quot;).toAbsolutePath().getFileName().toString();\r\n```\r\n\r\n**Full explanation:**\r\n\r\nYou first ask for the current directory:\r\n\r\n```java\r\nPaths.get(&quot;&quot;);\r\n```\r\nBut a toString() wouldn&#39;t show you anything, as you are where you are.\r\n\r\nSo then you ask for the absolute path:\r\n\r\n```java\r\nPaths.get(&quot;&quot;).toAbsolutePath();\r\n```\r\nBut a toString() would get you the full path `C:\\Users\\Test`.\r\n\r\nSo now you ask for the &quot;getFileName&quot;, which gets you just the name of the directory, and a toString() to convert it to a string:\r\n\r\n```java\r\nString currentDir = Paths.get(&quot;&quot;).toAbsolutePath().getFileName().toString();\r\n```","title":"Get current folder name without an absolute path","body":"<p><strong>Quick answer:</strong></p>\n<pre class=\"lang-java prettyprint-override\"><code>String currentDir = Paths.get(&quot;&quot;).toAbsolutePath().getFileName().toString();\n</code></pre>\n<p><strong>Full explanation:</strong></p>\n<p>You first ask for the current directory:</p>\n<pre class=\"lang-java prettyprint-override\"><code>Paths.get(&quot;&quot;);\n</code></pre>\n<p>But a toString() wouldn't show you anything, as you are where you are.</p>\n<p>So then you ask for the absolute path:</p>\n<pre class=\"lang-java prettyprint-override\"><code>Paths.get(&quot;&quot;).toAbsolutePath();\n</code></pre>\n<p>But a toString() would get you the full path <code>C:\\Users\\Test</code>.</p>\n<p>So now you ask for the &quot;getFileName&quot;, which gets you just the name of the directory, and a toString() to convert it to a string:</p>\n<pre class=\"lang-java prettyprint-override\"><code>String currentDir = Paths.get(&quot;&quot;).toAbsolutePath().getFileName().toString();\n</code></pre>\n"},{"tags":[],"owner":{"account_id":12461617,"reputation":49,"user_id":9073076,"display_name":"Maniram Yadav"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1563974388,"creation_date":1563974388,"answer_id":57183948,"question_id":57183301,"body_markdown":"There is two way to get the name of the current working folder in java\r\n\r\n - Using java.lang.System class\r\n\r\n\t\tString directory=System.getProperty(&quot;user.dir&quot;);\r\n\t\tString currentFolderName=directory.substring(directory.lastIndexOf(&quot;\\\\&quot;)+1);\r\n\t\tSystem.out.println(currentFolderName);\r\n\r\n\r\n - Using java.nio.file.Paths class\r\n\r\n\t\tSystem.out.println(Paths.get(directory).getFileName());","title":"Get current folder name without an absolute path","body":"<p>There is two way to get the name of the current working folder in java</p>\n\n<ul>\n<li><p>Using java.lang.System class</p>\n\n<pre><code>String directory=System.getProperty(\"user.dir\");\nString currentFolderName=directory.substring(directory.lastIndexOf(\"\\\\\")+1);\nSystem.out.println(currentFolderName);\n</code></pre></li>\n<li><p>Using java.nio.file.Paths class</p>\n\n<pre><code>System.out.println(Paths.get(directory).getFileName());\n</code></pre></li>\n</ul>\n"}],"owner":{"account_id":8595799,"reputation":31,"user_id":6438852,"display_name":"Bikir"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":504,"favorite_count":0,"down_vote_count":6,"up_vote_count":1,"answer_count":2,"score":-5,"last_activity_date":1697809705,"creation_date":1563972369,"question_id":57183301,"body_markdown":"How to get the parent name of the current working directory with out the absolute path name, just the name of the folder. For example, if I am on &quot;C:\\Users\\Test&quot; folder I need only &quot;Test&quot;.","title":"Get current folder name without an absolute path","body":"<p>How to get the parent name of the current working directory with out the absolute path name, just the name of the folder. For example, if I am on \"C:\\Users\\Test\" folder I need only \"Test\".</p>\n"},{"tags":["java","recursive-backtracking"],"comments":[{"owner":{"account_id":3771148,"reputation":34903,"user_id":3133316,"display_name":"PaulMcKenzie"},"score":0,"creation_date":1697809375,"post_id":77329049,"comment_id":136330059,"body_markdown":"Do not tag this as `dsa`.  The `dsa` tag is for `Digital Signature Algorithm`.","body":"Do not tag this as <code>dsa</code>.  The <code>dsa</code> tag is for <code>Digital Signature Algorithm</code>."}],"answers":[{"tags":[],"owner":{"account_id":8433338,"reputation":20038,"user_id":6328256,"display_name":"Sash Sinha"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1697787285,"creation_date":1697787285,"answer_id":77329083,"question_id":77329049,"body_markdown":"The key difference between the two codes is the `start` parameter in `backtrack()` method of code #1, which ensures you only move forward or stay at the current element when making recursive calls. This avoids permutations of the same combination without needing a Set for deduplication.\r\n\r\n- In code #1: `backtrack(list, temp, nums, remain - nums[i], i);`  \r\nNotice the `i` in the recursive call. This ensures you reuse the current number or use numbers that come after it, avoiding duplicates.\r\n\r\n- In code #2: `combi(n, arr, tar, res, opt, sum+arr[i]);`  \r\nThere&#39;s no such constraint. You always start from `i=0`, leading to permutations of the same combination.","title":"Differencce between the given codes for combination sum problem","body":"<p>The key difference between the two codes is the <code>start</code> parameter in <code>backtrack()</code> method of code #1, which ensures you only move forward or stay at the current element when making recursive calls. This avoids permutations of the same combination without needing a Set for deduplication.</p>\n<ul>\n<li><p>In code #1: <code>backtrack(list, temp, nums, remain - nums[i], i);</code><br />\nNotice the <code>i</code> in the recursive call. This ensures you reuse the current number or use numbers that come after it, avoiding duplicates.</p>\n</li>\n<li><p>In code #2: <code>combi(n, arr, tar, res, opt, sum+arr[i]);</code><br />\nThere's no such constraint. You always start from <code>i=0</code>, leading to permutations of the same combination.</p>\n</li>\n</ul>\n"}],"owner":{"account_id":26695241,"reputation":11,"user_id":20303214,"display_name":"Rai"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":33,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":1,"score":0,"last_activity_date":1697809380,"creation_date":1697786918,"question_id":77329049,"body_markdown":"Ok, I have been trying to find the mistake in my code or the place where it changes from the given code.\r\nThere are two codes here \r\ncode #1-\r\n```\r\nclass Solution {\r\n    public List&lt;List&lt;Integer&gt;&gt; combinationSum(int[] candidates, int target) {\r\n      List&lt;List&lt;Integer&gt;&gt; list = new ArrayList&lt;&gt;();\r\n      Arrays.sort(candidates);\r\n      backtrack(list, new ArrayList&lt;&gt;(), candidates, target, 0);\r\n      return list;  \r\n    }\r\n    public void backtrack(List&lt;List&lt;Integer&gt;&gt; list, List&lt;Integer&gt; temp, int[] nums, int remain, int start) {\r\n        if(remain &lt; 0) return;\r\n        else if (remain == 0) list.add(new ArrayList&lt;&gt;(temp));\r\n        else {\r\n            for(int i = start; i &lt; nums.length; i ++) {\r\n                temp.add(nums[i]);\r\n                backtrack(list, temp, nums, remain - nums[i], i);\r\n                temp.remove(temp.size() - 1);\r\n            }\r\n        }\r\n    }\r\n}\r\n\r\n```\r\ncode #2-\r\n```\r\nclass Solution {\r\n    public static void combi(int n, int[] arr, int tar, List&lt;List&lt;Integer&gt;&gt; res, List&lt;Integer&gt; opt, int sum){\r\n        if(sum&gt;tar){\r\n            return;\r\n        }else if(sum == tar){\r\n            res.add(new ArrayList&lt;&gt;(opt));\r\n          \r\n        }else{\r\n        for(int i=0;i&lt;n;i++){\r\n             opt.add(arr[i]);\r\n             combi(n, arr, tar, res, opt, sum+arr[i]);\r\n             opt.remove(opt.size()-1);\r\n             \r\n        }}\r\n    }\r\n    public List&lt;List&lt;Integer&gt;&gt; combinationSum(int[] arr, int tar) {\r\n       List&lt;List&lt;Integer&gt;&gt; res = new ArrayList&lt;&gt;();\r\n       Arrays.sort(arr);\r\n       combi(arr.length, arr, tar, res, new ArrayList&lt;&gt;(), 0);\r\n       return res; \r\n    }\r\n```\r\n   \r\ncode 2 is written by me now i want to know why the code1 is giving only the unique sol&#39;n when i believe it should give all the possible sol&#39;n, duplicates too as my code gives. I dont get it can you please tell me what is the difference.\r\n\r\nso the test case is\r\n\r\n[2,3,6,7]\r\n\r\nand my code gives \r\n`your text`\r\n[[2,2,3],[2,3,2],[3,2,2],[7]]\r\n```\r\ntype here\r\n```\r\n\r\n\r\nbut the code gives\r\n\r\n[[2,2,3],[7]]\r\n\r\nOne thing I can do is use set to get the unique sol&#39;n but what ever the first code does is much easier I just don&#39;t get why the code give unique sol&#39;ns only.","title":"Differencce between the given codes for combination sum problem","body":"<p>Ok, I have been trying to find the mistake in my code or the place where it changes from the given code.\nThere are two codes here\ncode #1-</p>\n<pre><code>class Solution {\n    public List&lt;List&lt;Integer&gt;&gt; combinationSum(int[] candidates, int target) {\n      List&lt;List&lt;Integer&gt;&gt; list = new ArrayList&lt;&gt;();\n      Arrays.sort(candidates);\n      backtrack(list, new ArrayList&lt;&gt;(), candidates, target, 0);\n      return list;  \n    }\n    public void backtrack(List&lt;List&lt;Integer&gt;&gt; list, List&lt;Integer&gt; temp, int[] nums, int remain, int start) {\n        if(remain &lt; 0) return;\n        else if (remain == 0) list.add(new ArrayList&lt;&gt;(temp));\n        else {\n            for(int i = start; i &lt; nums.length; i ++) {\n                temp.add(nums[i]);\n                backtrack(list, temp, nums, remain - nums[i], i);\n                temp.remove(temp.size() - 1);\n            }\n        }\n    }\n}\n\n</code></pre>\n<p>code #2-</p>\n<pre><code>class Solution {\n    public static void combi(int n, int[] arr, int tar, List&lt;List&lt;Integer&gt;&gt; res, List&lt;Integer&gt; opt, int sum){\n        if(sum&gt;tar){\n            return;\n        }else if(sum == tar){\n            res.add(new ArrayList&lt;&gt;(opt));\n          \n        }else{\n        for(int i=0;i&lt;n;i++){\n             opt.add(arr[i]);\n             combi(n, arr, tar, res, opt, sum+arr[i]);\n             opt.remove(opt.size()-1);\n             \n        }}\n    }\n    public List&lt;List&lt;Integer&gt;&gt; combinationSum(int[] arr, int tar) {\n       List&lt;List&lt;Integer&gt;&gt; res = new ArrayList&lt;&gt;();\n       Arrays.sort(arr);\n       combi(arr.length, arr, tar, res, new ArrayList&lt;&gt;(), 0);\n       return res; \n    }\n</code></pre>\n<p>code 2 is written by me now i want to know why the code1 is giving only the unique sol'n when i believe it should give all the possible sol'n, duplicates too as my code gives. I dont get it can you please tell me what is the difference.</p>\n<p>so the test case is</p>\n<p>[2,3,6,7]</p>\n<p>and my code gives\n<code>your text</code>\n[[2,2,3],[2,3,2],[3,2,2],[7]]</p>\n<pre><code>type here\n</code></pre>\n<p>but the code gives</p>\n<p>[[2,2,3],[7]]</p>\n<p>One thing I can do is use set to get the unique sol'n but what ever the first code does is much easier I just don't get why the code give unique sol'ns only.</p>\n"},{"tags":["java","postgresql","hibernate","jpa","jsonb"],"comments":[{"owner":{"account_id":7678058,"reputation":2129,"user_id":5818250,"display_name":"Jabongg"},"score":0,"creation_date":1545211032,"post_id":53847917,"comment_id":94543428,"body_markdown":"possible duplicate of : https://stackoverflow.com/questions/20401719/insert-bytea-into-postgresql-json-type... \n\nkindly visit above link.","body":"possible duplicate of : <a href=\"https://stackoverflow.com/questions/20401719/insert-bytea-into-postgresql-json-type\" title=\"insert bytea into postgresql json type\">stackoverflow.com/questions/20401719/&hellip;</a>...   kindly visit above link."},{"owner":{"account_id":7797669,"reputation":228,"user_id":5898205,"display_name":"Varshney P."},"score":0,"creation_date":1574316034,"post_id":53847917,"comment_id":104190700,"body_markdown":"@Arihant Jain: I am too facing such issue. Did u resolved urs?","body":"@Arihant Jain: I am too facing such issue. Did u resolved urs?"}],"answers":[{"tags":[],"owner":{"account_id":1012936,"reputation":145168,"user_id":1025118,"accept_rate":100,"display_name":"Vlad Mihalcea"},"down_vote_count":1,"up_vote_count":5,"is_accepted":false,"score":4,"last_activity_date":1610121755,"creation_date":1545211453,"answer_id":53848099,"question_id":53847917,"body_markdown":"The cause of the error\r\n----------------------\r\n\r\nYou could get this PostgreSQL:\r\n\r\n&gt; ERROR: column “metadata” is of type jsonb but expression is of type bytea Hint: You will need to rewrite or cast the expression.\r\n\r\nif you are executing a native SQL DML statement.\r\n\r\nNative SQL DML statement\r\n------------------------\r\n\r\nFor instance, let&#39;s assume you want to do something like this:\r\n\r\n    int updateCount = entityManager.createNativeQuery(&quot;&quot;&quot;\r\n        UPDATE\r\n            room_categories\r\n        SET\r\n            metadata = :metadata\r\n        WHERE\r\n            code = :code AND\r\n            metadata -&gt;&gt; &#39;field1&#39; is null            \r\n        &quot;&quot;&quot;)\r\n    .setParameter(&quot;code &quot;, &quot;123-ABC&quot;)\r\n    .setParameter(\r\n        &quot;metadata&quot;,\r\n        new Metadata()\r\n            .setField1(&quot;ABC&quot;)\r\n            .setField2(&quot;123&quot;)\r\n    )\r\n    .executeUpdate();\r\n\r\nThe `bytea` type stands for byte array, and, since the `Metadata` type implements the `Serializable` interface, Hibernate falls back to using the `SerializableType` when no other type is more appropriate. \r\n\r\nBut, since you cannot bind a byte array to a `jsonb` column, PostgreSQL throws the aforementioned error.\r\n\r\nThe fix\r\n-------\r\n\r\nTo fix it, we have to set the `JsonBinaryType` explicitly using the Hibernate-specific `setParameter` `Query` method:\r\n\r\n    int updateCount = entityManager.createNativeQuery(&quot;&quot;&quot;\r\n        UPDATE\r\n            room_categories\r\n        SET\r\n            metadata = :metadata\r\n        WHERE\r\n            code = :code AND\r\n            metadata -&gt;&gt; &#39;field1&#39; is null            \r\n        &quot;&quot;&quot;)\r\n    .setParameter(&quot;code &quot;, &quot;123-ABC&quot;)\r\n    .unwrap(org.hibernate.query.Query.class)\r\n    .setParameter(\r\n        &quot;metadata&quot;,\r\n        new Metadata()\r\n            .setField1(&quot;ABC&quot;)\r\n            .setField2(&quot;123&quot;),\r\n        JsonBinaryType.INSTANCE\r\n    )\r\n    .executeUpdate();\r\n\r\nFirst, we had to `unwrap` the JPA `Query` to a Hibernate `org.hibernate.query.Query` and call the `setParameter` method that takes a Hibernate Type instance.\r\n\r\nNow, Hibernate will know that the `metadata` parameter needs to be handled by the `JsonBinaryType`, and not by the `SerializableType`. ","title":"PostgreSQL throws &quot;column is of type jsonb but expression is of type bytea&quot; with JPA and Hibernate","body":"<h2>The cause of the error</h2>\n<p>You could get this PostgreSQL:</p>\n<blockquote>\n<p>ERROR: column “metadata” is of type jsonb but expression is of type bytea Hint: You will need to rewrite or cast the expression.</p>\n</blockquote>\n<p>if you are executing a native SQL DML statement.</p>\n<h2>Native SQL DML statement</h2>\n<p>For instance, let's assume you want to do something like this:</p>\n<pre><code>int updateCount = entityManager.createNativeQuery(&quot;&quot;&quot;\n    UPDATE\n        room_categories\n    SET\n        metadata = :metadata\n    WHERE\n        code = :code AND\n        metadata -&gt;&gt; 'field1' is null            \n    &quot;&quot;&quot;)\n.setParameter(&quot;code &quot;, &quot;123-ABC&quot;)\n.setParameter(\n    &quot;metadata&quot;,\n    new Metadata()\n        .setField1(&quot;ABC&quot;)\n        .setField2(&quot;123&quot;)\n)\n.executeUpdate();\n</code></pre>\n<p>The <code>bytea</code> type stands for byte array, and, since the <code>Metadata</code> type implements the <code>Serializable</code> interface, Hibernate falls back to using the <code>SerializableType</code> when no other type is more appropriate.</p>\n<p>But, since you cannot bind a byte array to a <code>jsonb</code> column, PostgreSQL throws the aforementioned error.</p>\n<h2>The fix</h2>\n<p>To fix it, we have to set the <code>JsonBinaryType</code> explicitly using the Hibernate-specific <code>setParameter</code> <code>Query</code> method:</p>\n<pre><code>int updateCount = entityManager.createNativeQuery(&quot;&quot;&quot;\n    UPDATE\n        room_categories\n    SET\n        metadata = :metadata\n    WHERE\n        code = :code AND\n        metadata -&gt;&gt; 'field1' is null            \n    &quot;&quot;&quot;)\n.setParameter(&quot;code &quot;, &quot;123-ABC&quot;)\n.unwrap(org.hibernate.query.Query.class)\n.setParameter(\n    &quot;metadata&quot;,\n    new Metadata()\n        .setField1(&quot;ABC&quot;)\n        .setField2(&quot;123&quot;),\n    JsonBinaryType.INSTANCE\n)\n.executeUpdate();\n</code></pre>\n<p>First, we had to <code>unwrap</code> the JPA <code>Query</code> to a Hibernate <code>org.hibernate.query.Query</code> and call the <code>setParameter</code> method that takes a Hibernate Type instance.</p>\n<p>Now, Hibernate will know that the <code>metadata</code> parameter needs to be handled by the <code>JsonBinaryType</code>, and not by the <code>SerializableType</code>.</p>\n"},{"tags":[],"owner":{"account_id":939554,"reputation":322,"user_id":967873,"display_name":"Ali Faradjpour"},"down_vote_count":0,"up_vote_count":15,"is_accepted":false,"score":15,"last_activity_date":1594123191,"creation_date":1594123191,"answer_id":62774773,"question_id":53847917,"body_markdown":"Simply convert your object by an ObjectMapper to a json string and then use (::jsonb) as cast to jsonb type: \r\n\r\n    INSERT INTO room_categories (name, code, metadata)\r\n    \tVALUES (?, ?, ? ::jsonb ); \r\n\r\n(you will need to use native queries to query data stored as jsonb)","title":"PostgreSQL throws &quot;column is of type jsonb but expression is of type bytea&quot; with JPA and Hibernate","body":"<p>Simply convert your object by an ObjectMapper to a json string and then use (::jsonb) as cast to jsonb type:</p>\n<pre><code>INSERT INTO room_categories (name, code, metadata)\n    VALUES (?, ?, ? ::jsonb ); \n</code></pre>\n<p>(you will need to use native queries to query data stored as jsonb)</p>\n"},{"tags":[],"owner":{"account_id":1988712,"reputation":655,"user_id":1783283,"display_name":"Jonathan"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1697808816,"creation_date":1697808816,"answer_id":77331338,"question_id":53847917,"body_markdown":"if you use the **JpaRespository** save interface method, you can add the cast method above the issue property \r\n\r\n    @ColumnTransformer(write = &quot;?::jsonb&quot;)\r\n    private Metadata metadata;","title":"PostgreSQL throws &quot;column is of type jsonb but expression is of type bytea&quot; with JPA and Hibernate","body":"<p>if you use the <strong>JpaRespository</strong> save interface method, you can add the cast method above the issue property</p>\n<pre><code>@ColumnTransformer(write = &quot;?::jsonb&quot;)\nprivate Metadata metadata;\n</code></pre>\n"}],"owner":{"account_id":14974170,"reputation":151,"user_id":10810056,"display_name":"Arihant Jain"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":34134,"favorite_count":0,"down_vote_count":0,"up_vote_count":15,"answer_count":3,"score":15,"last_activity_date":1697808816,"creation_date":1545210819,"question_id":53847917,"body_markdown":"This is my entity class that is mapped to a table in `postgres` (9.4)\r\nI am trying to store metadata as `jsonb` type in the database\r\n    \r\n    @Entity\r\n    @Table(name = “room_categories”)\r\n    @TypeDef(name = “jsonb”, typeClass = JsonBinaryType.class)\r\n    public class RoomCategory extends AbstractEntity implements Serializable {\r\n        private String name;\r\n        private String code;\r\n        @Type(type = &quot;jsonb&quot;)\r\n        @Column(columnDefinition = &quot;json&quot;)\r\n        private Metadata metadata;\r\n        \r\n    }\r\nThis is the metadata class:\r\n    \r\n    public class Metadata implements Serializable {\r\n        private String field1;\r\n        private String field2;\r\n        \r\n    }\r\nI have used following migration file to add `jsonb` column:\r\n\r\n    databaseChangeLog:\r\n    – changeSet:\r\n    id: addColumn_metadata-room_categories\r\n    author: arihant\r\n    changes:\r\n    – addColumn:\r\n    schemaName: public\r\n    tableName: room_categories\r\n    columns:\r\n    – column:\r\n    name: metadata\r\n    type: jsonb\r\n    \r\n\r\nI am getting this error while creating the record in `postgres`:\r\nERROR: column “metadata” is of type `jsonb` but expression is of type `bytea`\r\nHint: You will need to rewrite or cast the expression.\r\n    \r\nThis is the request body i am trying to persist in db:\r\n  \r\n\r\n      {\r\n        “name”: “Test102”,\r\n        “code”: “Code102”,\r\n        “metadata”: {\r\n        “field1”: “field11”,\r\n        “field2”: “field12”\r\n        }\r\n        }\r\n    \r\nPlease help how to convert `bytea` type to `jsonb` in java spring boot app","title":"PostgreSQL throws &quot;column is of type jsonb but expression is of type bytea&quot; with JPA and Hibernate","body":"<p>This is my entity class that is mapped to a table in <code>postgres</code> (9.4)\nI am trying to store metadata as <code>jsonb</code> type in the database</p>\n\n<pre><code>@Entity\n@Table(name = “room_categories”)\n@TypeDef(name = “jsonb”, typeClass = JsonBinaryType.class)\npublic class RoomCategory extends AbstractEntity implements Serializable {\n    private String name;\n    private String code;\n    @Type(type = \"jsonb\")\n    @Column(columnDefinition = \"json\")\n    private Metadata metadata;\n\n}\n</code></pre>\n\n<p>This is the metadata class:</p>\n\n<pre><code>public class Metadata implements Serializable {\n    private String field1;\n    private String field2;\n\n}\n</code></pre>\n\n<p>I have used following migration file to add <code>jsonb</code> column:</p>\n\n<pre><code>databaseChangeLog:\n– changeSet:\nid: addColumn_metadata-room_categories\nauthor: arihant\nchanges:\n– addColumn:\nschemaName: public\ntableName: room_categories\ncolumns:\n– column:\nname: metadata\ntype: jsonb\n</code></pre>\n\n<p>I am getting this error while creating the record in <code>postgres</code>:\nERROR: column “metadata” is of type <code>jsonb</code> but expression is of type <code>bytea</code>\nHint: You will need to rewrite or cast the expression.</p>\n\n<p>This is the request body i am trying to persist in db:</p>\n\n<pre><code>  {\n    “name”: “Test102”,\n    “code”: “Code102”,\n    “metadata”: {\n    “field1”: “field11”,\n    “field2”: “field12”\n    }\n    }\n</code></pre>\n\n<p>Please help how to convert <code>bytea</code> type to <code>jsonb</code> in java spring boot app</p>\n"},{"tags":["java","gradle"],"owner":{"account_id":205806,"reputation":725,"user_id":454742,"accept_rate":65,"display_name":"Luis C."},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":36,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1697808455,"creation_date":1697808455,"question_id":77331298,"body_markdown":"I&#39;m develop a simple plugin for gradle. I&#39;ve bootstraped the project for the plugin throught:\r\n```\r\ngradle init\r\n```\r\nAnd I choose Java and Groovy (DSL).\r\n\r\nFirst of all, I&#39;ve added the `maven-publish` plugin to have all the necessary for deploying. Also, in the `build.gradle` I added the version (1.0.0-SNAPSHOT).\r\n\r\nI run build and publishToMavenLocal and I haven&#39;t errors. \r\n\r\nWith the same procedure `gradle init` I&#39;ve created a sample application. I&#39;ve imported the plugin throught their id, obviosuly after update the repositories with mavenLocal (everything, buildscript also).\r\n\r\nUntil this, I have always the same error:\r\n```\r\n* Exception is:\r\norg.gradle.api.plugins.UnknownPluginException: Plugin [id: &#39;com.myplugin&#39;] was not found in any of the following sources:\r\n\r\n- Gradle Core Plugins (plugin is not in &#39;org.gradle&#39; namespace)\r\n- Plugin Repositories (plugin dependency must include a version number for this source)\r\n```\r\n\r\nWhat I missing?!?\r\n\r\nThanks!\r\n\r\n\r\n","title":"How to publish correctly my Gradle plugin into mavenLocal","body":"<p>I'm develop a simple plugin for gradle. I've bootstraped the project for the plugin throught:</p>\n<pre><code>gradle init\n</code></pre>\n<p>And I choose Java and Groovy (DSL).</p>\n<p>First of all, I've added the <code>maven-publish</code> plugin to have all the necessary for deploying. Also, in the <code>build.gradle</code> I added the version (1.0.0-SNAPSHOT).</p>\n<p>I run build and publishToMavenLocal and I haven't errors.</p>\n<p>With the same procedure <code>gradle init</code> I've created a sample application. I've imported the plugin throught their id, obviosuly after update the repositories with mavenLocal (everything, buildscript also).</p>\n<p>Until this, I have always the same error:</p>\n<pre><code>* Exception is:\norg.gradle.api.plugins.UnknownPluginException: Plugin [id: 'com.myplugin'] was not found in any of the following sources:\n\n- Gradle Core Plugins (plugin is not in 'org.gradle' namespace)\n- Plugin Repositories (plugin dependency must include a version number for this source)\n</code></pre>\n<p>What I missing?!?</p>\n<p>Thanks!</p>\n"},{"tags":["javascript","java","hover","extract","inspect"],"comments":[{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1697814100,"post_id":77331270,"comment_id":136331061,"body_markdown":"Please clarify your specific problem or provide additional details to highlight exactly what you need. As it&#39;s currently written, it&#39;s hard to tell exactly what you&#39;re asking.","body":"Please clarify your specific problem or provide additional details to highlight exactly what you need. As it&#39;s currently written, it&#39;s hard to tell exactly what you&#39;re asking."}],"owner":{"account_id":29716456,"reputation":1,"user_id":22774865,"display_name":"Abdul Khoir Firdaus"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":8,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1697808323,"creation_date":1697808323,"question_id":77331270,"body_markdown":"my ground seems error at inspect on live server, but at vscode there&#39;s no problem appear.\r\n\r\ni&#39;ve tried to see it one by one but still not get what makes ground error in the inspect. somebody told me to hover my ground and extract it to inspect in Microsoft edge","title":"how to Hover Ground into inspect","body":"<p>my ground seems error at inspect on live server, but at vscode there's no problem appear.</p>\n<p>i've tried to see it one by one but still not get what makes ground error in the inspect. somebody told me to hover my ground and extract it to inspect in Microsoft edge</p>\n"},{"tags":["java","gradle","dependencies","project","root"],"answers":[{"tags":[],"owner":{"account_id":903132,"reputation":15025,"user_id":938694,"accept_rate":59,"display_name":"Cubic"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1697808104,"creation_date":1697808104,"answer_id":77331256,"question_id":77331131,"body_markdown":"The problem is this:\r\n\r\n```\r\nplugins {\r\n    id(&quot;java&quot;)\r\n    id(&quot;jacoco&quot;)\r\n}\r\n```\r\n\r\nSince these are core plugins, this is _only_ useful if you want to apply them to the current project. Just remove these lines if the root project is not meant to produce a jar.","title":"Gradle Root Project: Unnecessary Empty JAR Generation","body":"<p>The problem is this:</p>\n<pre><code>plugins {\n    id(&quot;java&quot;)\n    id(&quot;jacoco&quot;)\n}\n</code></pre>\n<p>Since these are core plugins, this is <em>only</em> useful if you want to apply them to the current project. Just remove these lines if the root project is not meant to produce a jar.</p>\n"}],"owner":{"account_id":29716176,"reputation":1,"user_id":22774644,"display_name":"Mihai Mecarian"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":43,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1697808104,"creation_date":1697806984,"question_id":77331131,"body_markdown":"I am working on a Gradle multi-project build with four Java sub-projects. I recently decided to centralize the dependency declarations for these sub-projects within the `build.gradle.kts`\r\nof the root project. This approach has been successful in managing dependencies across my projects.\r\n\r\nHowever, I have encountered an annoying issue. When I build the project, a build folder is generated in the root project directory, and within it, an empty JAR file is created, containing only a manifest file. The root project has no source code and is merely a directory for managing the sub-projects. Also an empty code coverage report folder is generated in the build folder, even if there&#39;s no code.\r\n\r\nMy question is twofold:\r\n\r\n- Why is Gradle generating an empty JAR and a build folder for the root project, which contains no source code?\r\n- How can I configure Gradle to treat the root project as a non-Java project, as a bare project?\r\n\r\n**Root Project Configuration**\r\n\r\n`settings.gradle.kts` file:\r\n\r\n```\r\nrootProject.name = &quot;root\r\ninclude(&quot;core&quot;)\r\ninclude(&quot;app&quot;)\r\ninclude(&quot;ui&quot;)\r\n```\r\n\r\n`build.gradle.kts` file:\r\n\r\n```\r\nplugins {\r\n    id(&quot;java&quot;)\r\n    id(&quot;jacoco&quot;)\r\n}\r\n\r\nconfigure(subprojects) {\r\n    repositories {\r\n        mavenCentral()\r\n    }\r\n\r\n    plugins.apply(&quot;java&quot;)\r\n    plugins.apply(&quot;jacoco&quot;)\r\n\r\n    dependencies {\r\n        implementation(platform(&quot;org.apache.logging.log4j:log4j-bom:2.20.0&quot;))\r\n        implementation(&quot;org.apache.logging.log4j:log4j-api&quot;)\r\n        implementation(&quot;org.apache.logging.log4j:log4j-core&quot;)\r\n        implementation(&quot;org.apache.logging.log4j:log4j-slf4j-impl&quot;)\r\n        implementation(&quot;org.slf4j:slf4j-api:1.7.32&quot;)\r\n        testImplementation(platform(&quot;org.junit:junit-bom:5.10.0&quot;))\r\n        testImplementation(&quot;org.junit.jupiter:junit-jupiter&quot;)\r\n        testRuntimeOnly(&quot;org.junit.platform:junit-platform-launcher&quot;)\r\n    }\r\n\r\n    tasks.test {\r\n        useJUnitPlatform()\r\n    }\r\n\r\n    tasks.jacocoTestReport {\r\n        dependsOn(tasks.test)\r\n    }\r\n\r\n    tasks.jacocoTestCoverageVerification {\r\n        dependsOn(tasks.jacocoTestReport)\r\n    }\r\n}\r\n```\r\n\r\nYour insights and suggestions on how to configure Gradle to treat the root project appropriately would be greatly appreciated. Thank you.\r\n\r\nI tried to use `apply false` for each plugin, but it&#39;s an error, they are core plugins.\r\n\r\n```\r\nplugins {\r\n    id(&quot;java&quot;) apply false\r\n    id(&quot;jacoco&quot;) apply false\r\n}\r\n```","title":"Gradle Root Project: Unnecessary Empty JAR Generation","body":"<p>I am working on a Gradle multi-project build with four Java sub-projects. I recently decided to centralize the dependency declarations for these sub-projects within the <code>build.gradle.kts</code>\nof the root project. This approach has been successful in managing dependencies across my projects.</p>\n<p>However, I have encountered an annoying issue. When I build the project, a build folder is generated in the root project directory, and within it, an empty JAR file is created, containing only a manifest file. The root project has no source code and is merely a directory for managing the sub-projects. Also an empty code coverage report folder is generated in the build folder, even if there's no code.</p>\n<p>My question is twofold:</p>\n<ul>\n<li>Why is Gradle generating an empty JAR and a build folder for the root project, which contains no source code?</li>\n<li>How can I configure Gradle to treat the root project as a non-Java project, as a bare project?</li>\n</ul>\n<p><strong>Root Project Configuration</strong></p>\n<p><code>settings.gradle.kts</code> file:</p>\n<pre><code>rootProject.name = &quot;root\ninclude(&quot;core&quot;)\ninclude(&quot;app&quot;)\ninclude(&quot;ui&quot;)\n</code></pre>\n<p><code>build.gradle.kts</code> file:</p>\n<pre><code>plugins {\n    id(&quot;java&quot;)\n    id(&quot;jacoco&quot;)\n}\n\nconfigure(subprojects) {\n    repositories {\n        mavenCentral()\n    }\n\n    plugins.apply(&quot;java&quot;)\n    plugins.apply(&quot;jacoco&quot;)\n\n    dependencies {\n        implementation(platform(&quot;org.apache.logging.log4j:log4j-bom:2.20.0&quot;))\n        implementation(&quot;org.apache.logging.log4j:log4j-api&quot;)\n        implementation(&quot;org.apache.logging.log4j:log4j-core&quot;)\n        implementation(&quot;org.apache.logging.log4j:log4j-slf4j-impl&quot;)\n        implementation(&quot;org.slf4j:slf4j-api:1.7.32&quot;)\n        testImplementation(platform(&quot;org.junit:junit-bom:5.10.0&quot;))\n        testImplementation(&quot;org.junit.jupiter:junit-jupiter&quot;)\n        testRuntimeOnly(&quot;org.junit.platform:junit-platform-launcher&quot;)\n    }\n\n    tasks.test {\n        useJUnitPlatform()\n    }\n\n    tasks.jacocoTestReport {\n        dependsOn(tasks.test)\n    }\n\n    tasks.jacocoTestCoverageVerification {\n        dependsOn(tasks.jacocoTestReport)\n    }\n}\n</code></pre>\n<p>Your insights and suggestions on how to configure Gradle to treat the root project appropriately would be greatly appreciated. Thank you.</p>\n<p>I tried to use <code>apply false</code> for each plugin, but it's an error, they are core plugins.</p>\n<pre><code>plugins {\n    id(&quot;java&quot;) apply false\n    id(&quot;jacoco&quot;) apply false\n}\n</code></pre>\n"},{"tags":["java","android"],"owner":{"account_id":19839090,"reputation":632,"user_id":14551576,"display_name":"pilotman"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":20,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1697808039,"creation_date":1697808039,"question_id":77331249,"body_markdown":"I have the following code in my android application (Capacitor): \r\n\r\n```\r\nimport com.getcapacitor.JSObject;\r\nimport com.getcapacitor.Plugin;\r\nimport com.getcapacitor.PluginCall;\r\nimport com.getcapacitor.PluginMethod;\r\nimport com.getcapacitor.annotation.CapacitorPlugin;\r\nimport com.itextpdf.text.Document;\r\nimport com.itextpdf.text.Paragraph;\r\nimport com.itextpdf.text.pdf.PdfWriter;\r\n\r\nimport java.io.File;\r\nimport java.io.FileOutputStream;\r\nimport java.util.Base64;\r\n\r\n@CapacitorPlugin(name = &quot;Echo&quot;)\r\npublic class EchoPlugin extends Plugin {\r\n\r\n  @PluginMethod()\r\n  public void echo(PluginCall call) {\r\n    // Get the base64 string from the call\r\n    String base64data = call.getString(&quot;value&quot;);\r\n    assert base64data != null;\r\n    String base64WithoutPrefix = base64data.replaceFirst(&quot;data:application/pdf;base64,&quot;, &quot;&quot;);\r\n    try {\r\n      // Create a PDF document\r\n      Document document = new Document();\r\n      File outputFile = new File(getContext().getFilesDir(), &quot;output.pdf&quot;);\r\n      PdfWriter.getInstance(document, new FileOutputStream(outputFile));\r\n      document.open();\r\n\r\n      // Convert base64 string to a byte array\r\n      byte[] pdfData = new byte[0];\r\n      if (android.os.Build.VERSION.SDK_INT &gt;= android.os.Build.VERSION_CODES.O) {\r\n        pdfData = Base64.getDecoder().decode(base64WithoutPrefix);\r\n      }\r\n\r\n      // Add the base64 data to the PDF\r\n      document.add(new Paragraph(new String(pdfData)));\r\n\r\n      // Close the PDF document\r\n      document.close();\r\n\r\n      // Return the path to the generated PDF file\r\n      JSObject ret = new JSObject();\r\n      ret.put(&quot;value&quot;, outputFile.getAbsolutePath());\r\n      call.resolve(ret);\r\n    } catch (Exception e) {\r\n      // Handle any exceptions\r\n      call.reject(&quot;PDF generation failed: &quot; + e.getMessage());\r\n    }\r\n  }\r\n}\r\n\r\n```\r\n\r\n\r\nthe files is created and opens but the PDF formatting is not there. Instead it just prints out the formatting in the document like in the picture attached. \r\n\r\nWondering if anyone can help resolve this. \r\n\r\n[![Example output][1]][1]\r\n\r\nThanks \r\n\r\n\r\n  [1]: https://i.stack.imgur.com/XrFTU.png","title":"Android: Generating PDF from base64 string does not contain formatting","body":"<p>I have the following code in my android application (Capacitor):</p>\n<pre><code>import com.getcapacitor.JSObject;\nimport com.getcapacitor.Plugin;\nimport com.getcapacitor.PluginCall;\nimport com.getcapacitor.PluginMethod;\nimport com.getcapacitor.annotation.CapacitorPlugin;\nimport com.itextpdf.text.Document;\nimport com.itextpdf.text.Paragraph;\nimport com.itextpdf.text.pdf.PdfWriter;\n\nimport java.io.File;\nimport java.io.FileOutputStream;\nimport java.util.Base64;\n\n@CapacitorPlugin(name = &quot;Echo&quot;)\npublic class EchoPlugin extends Plugin {\n\n  @PluginMethod()\n  public void echo(PluginCall call) {\n    // Get the base64 string from the call\n    String base64data = call.getString(&quot;value&quot;);\n    assert base64data != null;\n    String base64WithoutPrefix = base64data.replaceFirst(&quot;data:application/pdf;base64,&quot;, &quot;&quot;);\n    try {\n      // Create a PDF document\n      Document document = new Document();\n      File outputFile = new File(getContext().getFilesDir(), &quot;output.pdf&quot;);\n      PdfWriter.getInstance(document, new FileOutputStream(outputFile));\n      document.open();\n\n      // Convert base64 string to a byte array\n      byte[] pdfData = new byte[0];\n      if (android.os.Build.VERSION.SDK_INT &gt;= android.os.Build.VERSION_CODES.O) {\n        pdfData = Base64.getDecoder().decode(base64WithoutPrefix);\n      }\n\n      // Add the base64 data to the PDF\n      document.add(new Paragraph(new String(pdfData)));\n\n      // Close the PDF document\n      document.close();\n\n      // Return the path to the generated PDF file\n      JSObject ret = new JSObject();\n      ret.put(&quot;value&quot;, outputFile.getAbsolutePath());\n      call.resolve(ret);\n    } catch (Exception e) {\n      // Handle any exceptions\n      call.reject(&quot;PDF generation failed: &quot; + e.getMessage());\n    }\n  }\n}\n\n</code></pre>\n<p>the files is created and opens but the PDF formatting is not there. Instead it just prints out the formatting in the document like in the picture attached.</p>\n<p>Wondering if anyone can help resolve this.</p>\n<p><a href=\"https://i.stack.imgur.com/XrFTU.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/XrFTU.png\" alt=\"Example output\" /></a></p>\n<p>Thanks</p>\n"},{"tags":["java","extentreports"],"answers":[{"tags":[],"owner":{"account_id":7423601,"reputation":18712,"user_id":5646962,"display_name":"Thomas Kl&#228;ger"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1697807652,"creation_date":1697807652,"answer_id":77331206,"question_id":77330901,"body_markdown":"According to [Issue With Version 5.1.0](https://github.com/extent-framework/extentreports-java/issues/394) ExtendReports Version 5.1.0 and later require Java 11.\r\n\r\nIf you cannot upgrade your project to Java 11 you must use an earlier version of ExtendReports. Currently the latest version before 5.1.0 is version 5.0.9 (https://mvnrepository.com/artifact/com.aventstack/extentreports) ","title":"Java 11 is not installed but still getting the error as &quot;class file has wrong version 55.0, should be 52.0&quot;","body":"<p>According to <a href=\"https://github.com/extent-framework/extentreports-java/issues/394\" rel=\"nofollow noreferrer\">Issue With Version 5.1.0</a> ExtendReports Version 5.1.0 and later require Java 11.</p>\n<p>If you cannot upgrade your project to Java 11 you must use an earlier version of ExtendReports. Currently the latest version before 5.1.0 is version 5.0.9 (<a href=\"https://mvnrepository.com/artifact/com.aventstack/extentreports\" rel=\"nofollow noreferrer\">https://mvnrepository.com/artifact/com.aventstack/extentreports</a>)</p>\n"}],"owner":{"account_id":19877927,"reputation":41,"user_id":14562530,"display_name":"AKSHAY NAIR"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":60,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1697807652,"creation_date":1697804731,"question_id":77330901,"body_markdown":"I am trying to implement extent report v5.1.1 into my java project which uses java 8 as the Version,but when I try to execute the script via the ant command,I am getting the error as **class file has wrong version 55.0, should be 52.0**\r\nEven though I cross-checked the compilation version in Eclipse, it still shows the same error if we try to execute via testNG too.\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/jWZls.png","title":"Java 11 is not installed but still getting the error as &quot;class file has wrong version 55.0, should be 52.0&quot;","body":"<p>I am trying to implement extent report v5.1.1 into my java project which uses java 8 as the Version,but when I try to execute the script via the ant command,I am getting the error as <strong>class file has wrong version 55.0, should be 52.0</strong>\nEven though I cross-checked the compilation version in Eclipse, it still shows the same error if we try to execute via testNG too.\n<a href=\"https://i.stack.imgur.com/jWZls.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/jWZls.png\" alt=\"enter image description here\" /></a></p>\n"},{"tags":["java","eclipse","warnings","compiler-warnings","suppress-warnings"],"comments":[{"owner":{"account_id":355044,"reputation":37880,"user_id":693752,"accept_rate":63,"display_name":"Snicolas"},"score":6,"creation_date":1474392454,"post_id":1205995,"comment_id":66508993,"body_markdown":"This question is really nice and answers are useful. If someone from the JCP looks at it, you should realize how messy it is to add a suppress warning. There is no convention on case, hyphen, camel case, it&#39;s just a plain mess, it would be lovely to standardize this.","body":"This question is really nice and answers are useful. If someone from the JCP looks at it, you should realize how messy it is to add a suppress warning. There is no convention on case, hyphen, camel case, it&#39;s just a plain mess, it would be lovely to standardize this."},{"owner":{"account_id":94193,"reputation":20589,"user_id":257299,"accept_rate":64,"display_name":"kevinarpe"},"score":0,"creation_date":1492664858,"post_id":1205995,"comment_id":74075337,"body_markdown":"I see `&quot;ProhibitedExceptionDeclared&quot;` within Eclipse Collections Framework (`org.eclipse.collections.impl.block.function.checked.ThrowingFunction`), and that is not listed below.","body":"I see <code>&quot;ProhibitedExceptionDeclared&quot;</code> within Eclipse Collections Framework (<code>org.eclipse.collections.impl.block.function.checked.Throwin&zwnj;&#8203;gFunction</code>), and that is not listed below."}],"answers":[{"tags":[],"owner":{"account_id":9867,"reputation":618181,"user_id":18393,"accept_rate":82,"display_name":"cletus"},"down_vote_count":0,"up_vote_count":293,"is_accepted":true,"score":293,"last_activity_date":1414605581,"creation_date":1248953234,"answer_id":1206001,"question_id":1205995,"body_markdown":"It depends on your IDE or compiler.\r\n\r\nHere is a [list][1] for Eclipse Galileo:\r\n\r\n&gt; - **all** to suppress all warnings\r\n&gt; - **boxing** to suppress warnings relative to boxing/unboxing operations\r\n&gt; - **cast** to suppress warnings relative to cast operations\r\n&gt; - **dep-ann** to suppress warnings relative to deprecated annotation\r\n&gt; - **deprecation** to suppress warnings relative to deprecation\r\n&gt; - **fallthrough** to suppress warnings relative to missing breaks in switch\r\n&gt; statements\r\n&gt; - **finally** to suppress warnings relative to finally block that don’t\r\n&gt; return\r\n&gt; - **hiding** to suppress warnings relative to locals that hide variable\r\n&gt; - **incomplete-switch** to suppress warnings relative to missing entries\r\n&gt; in a switch statement (enum case)\r\n&gt; - **nls** to suppress warnings relative to non-nls string literals\r\n&gt; - **null** to suppress warnings relative to null analysis\r\n&gt; - **restriction** to suppress warnings relative to usage of discouraged or\r\n&gt; forbidden references\r\n&gt; - **serial** to suppress warnings relative to missing serialVersionUID\r\n&gt; field for a serializable class\r\n&gt; - **static-access** to suppress warnings relative to incorrect static\r\n&gt; access\r\n&gt; - **synthetic-access** to suppress warnings relative to unoptimized\r\n&gt; access from inner classes\r\n&gt; - **unchecked** to suppress warnings relative to unchecked operations\r\n&gt; - **unqualified-field-access** to suppress warnings relative to field\r\n&gt; access unqualified\r\n&gt; - **unused** to suppress warnings relative to unused code\r\n\r\n[List][2] for Indigo adds:\r\n\r\n&gt; - **javadoc** to suppress warnings relative to javadoc warnings\r\n&gt; - **rawtypes** to suppress warnings relative to usage of raw types\r\n&gt; - **static-method** to suppress warnings relative to methods that could be declared as static\r\n&gt;- **super** to suppress warnings relative to overriding a method without super invocations\r\n\r\n[List][3] for Juno adds:\r\n\r\n&gt;- **resource** to suppress warnings relative to usage of resources of type Closeable\r\n&gt;- **sync-override** to suppress warnings because of missing synchronize when overriding a synchronized method\r\n\r\nKepler and Luna use the same token list as Juno ([list](http://help.eclipse.org/luna/index.jsp?topic=/org.eclipse.jdt.doc.user/tasks/task-suppress_warnings.htm)).\r\n\r\nOthers will be similar but vary.\r\n\r\n  [1]: http://www.breakitdownblog.com/supported-values-for-suppresswarnings/\r\n  [2]: http://help.eclipse.org/indigo/index.jsp?topic=/org.eclipse.jdt.doc.isv/guide/jdt_api_compile.htm\r\n  [3]: http://help.eclipse.org/juno/index.jsp?topic=/org.eclipse.jdt.doc.user/tasks/task-suppress_warnings.htm","title":"What is the list of valid @SuppressWarnings warning names in Java?","body":"<p>It depends on your IDE or compiler.</p>\n\n<p>Here is a <a href=\"http://www.breakitdownblog.com/supported-values-for-suppresswarnings/\" rel=\"noreferrer\">list</a> for Eclipse Galileo:</p>\n\n<blockquote>\n  <ul>\n  <li><strong>all</strong> to suppress all warnings</li>\n  <li><strong>boxing</strong> to suppress warnings relative to boxing/unboxing operations</li>\n  <li><strong>cast</strong> to suppress warnings relative to cast operations</li>\n  <li><strong>dep-ann</strong> to suppress warnings relative to deprecated annotation</li>\n  <li><strong>deprecation</strong> to suppress warnings relative to deprecation</li>\n  <li><strong>fallthrough</strong> to suppress warnings relative to missing breaks in switch\n  statements</li>\n  <li><strong>finally</strong> to suppress warnings relative to finally block that don’t\n  return</li>\n  <li><strong>hiding</strong> to suppress warnings relative to locals that hide variable</li>\n  <li><strong>incomplete-switch</strong> to suppress warnings relative to missing entries\n  in a switch statement (enum case)</li>\n  <li><strong>nls</strong> to suppress warnings relative to non-nls string literals</li>\n  <li><strong>null</strong> to suppress warnings relative to null analysis</li>\n  <li><strong>restriction</strong> to suppress warnings relative to usage of discouraged or\n  forbidden references</li>\n  <li><strong>serial</strong> to suppress warnings relative to missing serialVersionUID\n  field for a serializable class</li>\n  <li><strong>static-access</strong> to suppress warnings relative to incorrect static\n  access</li>\n  <li><strong>synthetic-access</strong> to suppress warnings relative to unoptimized\n  access from inner classes</li>\n  <li><strong>unchecked</strong> to suppress warnings relative to unchecked operations</li>\n  <li><strong>unqualified-field-access</strong> to suppress warnings relative to field\n  access unqualified</li>\n  <li><strong>unused</strong> to suppress warnings relative to unused code</li>\n  </ul>\n</blockquote>\n\n<p><a href=\"http://help.eclipse.org/indigo/index.jsp?topic=/org.eclipse.jdt.doc.isv/guide/jdt_api_compile.htm\" rel=\"noreferrer\">List</a> for Indigo adds:</p>\n\n<blockquote>\n  <ul>\n  <li><strong>javadoc</strong> to suppress warnings relative to javadoc warnings</li>\n  <li><strong>rawtypes</strong> to suppress warnings relative to usage of raw types</li>\n  <li><strong>static-method</strong> to suppress warnings relative to methods that could be declared as static</li>\n  <li><strong>super</strong> to suppress warnings relative to overriding a method without super invocations</li>\n  </ul>\n</blockquote>\n\n<p><a href=\"http://help.eclipse.org/juno/index.jsp?topic=/org.eclipse.jdt.doc.user/tasks/task-suppress_warnings.htm\" rel=\"noreferrer\">List</a> for Juno adds:</p>\n\n<blockquote>\n  <ul>\n  <li><strong>resource</strong> to suppress warnings relative to usage of resources of type Closeable</li>\n  <li><strong>sync-override</strong> to suppress warnings because of missing synchronize when overriding a synchronized method</li>\n  </ul>\n</blockquote>\n\n<p>Kepler and Luna use the same token list as Juno (<a href=\"http://help.eclipse.org/luna/index.jsp?topic=/org.eclipse.jdt.doc.user/tasks/task-suppress_warnings.htm\" rel=\"noreferrer\">list</a>).</p>\n\n<p>Others will be similar but vary.</p>\n"},{"tags":[],"owner":{"account_id":3166,"reputation":2611,"user_id":4507,"accept_rate":64,"display_name":"Martin McNulty"},"down_vote_count":0,"up_vote_count":52,"is_accepted":false,"score":52,"last_activity_date":1475112352,"creation_date":1248953372,"answer_id":1206013,"question_id":1205995,"body_markdown":"All values are permitted (unrecognized ones are ignored).  The list of recognized ones is compiler specific.  \r\n\r\nIn [The Java Tutorials](https://docs.oracle.com/javase/tutorial/java/annotations/predefined.html) `unchecked` and `deprecation` are listed as the two warnings required by The Java Language Specification, therefore, they should be valid with all compilers:\r\n\r\n&gt;Every compiler warning belongs to a category. The Java Language Specification lists two categories: deprecation and unchecked.\r\n\r\nThe specific sections inside [The Java Language Specification](https://docs.oracle.com/javase/specs/) where they are defined is not consistent across versions. In the Java SE 8 Specification `unchecked` and `deprecation` are listed as compiler warnings in sections **9.6.4.5. @SuppressWarnings** and **9.6.4.6 @Deprecated**, respectively.\r\n\r\nFor Sun&#39;s compiler, running `javac -X` gives a list of all values recognized by that version.  For 1.5.0_17, the list appears to be:\r\n\r\n- all\r\n- deprecation\r\n- unchecked\r\n- fallthrough\r\n- path\r\n- serial\r\n- finally","title":"What is the list of valid @SuppressWarnings warning names in Java?","body":"<p>All values are permitted (unrecognized ones are ignored).  The list of recognized ones is compiler specific.  </p>\n\n<p>In <a href=\"https://docs.oracle.com/javase/tutorial/java/annotations/predefined.html\" rel=\"noreferrer\">The Java Tutorials</a> <code>unchecked</code> and <code>deprecation</code> are listed as the two warnings required by The Java Language Specification, therefore, they should be valid with all compilers:</p>\n\n<blockquote>\n  <p>Every compiler warning belongs to a category. The Java Language Specification lists two categories: deprecation and unchecked.</p>\n</blockquote>\n\n<p>The specific sections inside <a href=\"https://docs.oracle.com/javase/specs/\" rel=\"noreferrer\">The Java Language Specification</a> where they are defined is not consistent across versions. In the Java SE 8 Specification <code>unchecked</code> and <code>deprecation</code> are listed as compiler warnings in sections <strong>9.6.4.5. @SuppressWarnings</strong> and <strong>9.6.4.6 @Deprecated</strong>, respectively.</p>\n\n<p>For Sun's compiler, running <code>javac -X</code> gives a list of all values recognized by that version.  For 1.5.0_17, the list appears to be:</p>\n\n<ul>\n<li>all</li>\n<li>deprecation</li>\n<li>unchecked</li>\n<li>fallthrough</li>\n<li>path</li>\n<li>serial</li>\n<li>finally</li>\n</ul>\n"},{"tags":[],"owner":{"account_id":24236,"reputation":7530,"user_id":61530,"accept_rate":93,"display_name":"D. Wroblewski"},"down_vote_count":0,"up_vote_count":49,"is_accepted":false,"score":49,"last_activity_date":1248956437,"creation_date":1248953894,"answer_id":1206052,"question_id":1205995,"body_markdown":"The list is compiler specific. But here are the values supported in [Eclipse][1]:\r\n\r\n&gt;- **allDeprecation** \tdeprecation even inside deprecated code  \r\n&gt;- **allJavadoc** \tinvalid or missing javadoc  \r\n&gt;-    **assertIdentifier** \toccurrence of assert used as identifier  \r\n&gt;-    **boxing** \tautoboxing conversion  \r\n&gt;-    **charConcat** \twhen a char array is used in a string concatenation without being converted explicitly to a string   \r\n&gt;-    **conditionAssign** \tpossible accidental boolean assignment  \r\n&gt;-    **constructorName** \tmethod with\r\n&gt; constructor name  \r\n&gt;-    **dep-ann** \tmissing @Deprecated\r\n&gt; annotation  \r\n&gt;-    **deprecation** \tusage of deprecated type or member outside deprecated code  \r\n&gt;-    **discouraged** \tuse of types matching a discouraged access rule  \r\n&gt;-    **emptyBlock** \tundocumented empty block  \r\n&gt;-    **enumSwitch**, **incomplete-switch** \tincomplete enum switch  \r\n&gt;-    **fallthrough** \tpossible fall-through case  \r\n&gt;-    **fieldHiding** \tfield hiding another variable  \r\n&gt;-    **finalBound** \ttype parameter with final bound  \r\n&gt;-    **finally** \tfinally block not completing normally  \r\n&gt;-    **forbidden** \tuse of types matching a forbidden access rule  \r\n&gt;-    **hiding** \tmacro for fieldHiding, localHiding, typeHiding and maskedCatchBlock  \r\n&gt;-    **indirectStatic** \tindirect reference to static member  \r\n&gt;-    **intfAnnotation** \tannotation type used as super interface  \r\n&gt;-    **intfNonInherited** \tinterface non-inherited method compatibility  \r\n&gt;-    **javadoc** \tinvalid javadoc  \r\n&gt;-    **localHiding** \tlocal variable hiding another variable  \r\n&gt;-    **maskedCatchBlocks** \thidden catch block  \r\n&gt;-    **nls** \tnon-nls string literals (lacking of tags //$NON-NLS-&lt;n&gt;)  \r\n&gt;-    **noEffectAssign** \tassignment with no effect  \r\n&gt;-    **null** \tpotential missing or redundant null check  \r\n&gt;-    **nullDereference** \tmissing null check  \r\n&gt;-    **over-ann** \tmissing @Override annotation  \r\n&gt;-    **paramAssign** \tassignment to a parameter  \r\n&gt;-    **pkgDefaultMethod** \tattempt to override package-default method  \r\n&gt;-    **raw** \tusage a of raw type (instead of a parametrized type)  \r\n&gt;-    **semicolon** \tunnecessary semicolon or empty statement  \r\n&gt;-    **serial** \tmissing serialVersionUID  \r\n&gt;-    **specialParamHiding** \tconstructor or setter parameter hiding another field  \r\n&gt;-    **static-access** \tmacro for indirectStatic and staticReceiver  \r\n&gt;-    **staticReceiver** \tif a non static receiver is used to get a static field or call a static method  \r\n&gt;-    **super** \toverriding a method without making a super invocation  \r\n&gt;-    **suppress** \tenable @SuppressWarnings  \r\n&gt;-    **syntheticAccess, synthetic-access** \twhen performing synthetic access for innerclass  \r\n&gt;-    **tasks** \tenable support for tasks tags in source code  \r\n&gt;-    **typeHiding** \ttype parameter hiding another type  \r\n&gt;-    **unchecked** \tunchecked type operation  \r\n&gt;-    **unnecessaryElse** \tunnecessary else clause  \r\n&gt;-    **unqualified-field-access, unqualifiedField** \tunqualified\r\n&gt; reference to field  \r\n&gt;-    **unused** \tmacro for unusedArgument, unusedImport, unusedLabel, unusedLocal, unusedPrivate and unusedThrown  \r\n&gt;-    **unusedArgument** \tunused method argument  \r\n&gt;-    **unusedImport** \tunused import reference  \r\n&gt;-    **unusedLabel** \tunused label  \r\n&gt;-    **unusedLocal** \tunused local variable  \r\n&gt;-    **unusedPrivate** \tunused private member declaration  \r\n&gt;-    **unusedThrown** \tunused declared thrown exception  \r\n&gt;-    **uselessTypeCheck** \tunnecessary cast/instanceof operation  \r\n&gt;-    **varargsCast** \tvarargs argument need explicit cast  \r\n&gt;-    **warningToken** \tunhandled warning token in @SuppressWarnings  \r\n\r\n\r\n\r\n\r\nSun JDK (1.6) has a shorter [list][2] of supported warnings:\r\n\r\n&gt;- **deprecation**  \tCheck for use of depreciated items.  \r\n&gt;- **unchecked**  Give more detail for unchecked conversion warnings that are mandated by the Java Language Specification.  \r\n&gt;- **serial** Warn about missing serialVersionUID definitions on serializable classes.  \r\n&gt;- **finally** Warn about finally clauses that cannot complete normally.  \r\n&gt;- **fallthrough** Check switch blocks for fall-through cases and provide a warning message for any that are found.  \r\n&gt;- **path**  \tCheck for a nonexistent path in environment paths (such as classpath).  \r\n\r\n\r\n\r\nThe latest available javac (1.6.0_13) for mac have the following supported warnings\r\n&gt;- **all**  \r\n&gt;- **cast**  \r\n&gt;- **deprecation**  \r\n&gt;- **divzero**  \r\n&gt;- **empty**  \r\n&gt;- **unchecked**  \r\n&gt;- **fallthrough**  \r\n&gt;- **path**  \r\n&gt;- **serial**  \r\n&gt;- **finally**  \r\n&gt;- **overrides**  \r\n\r\n\r\n  [1]:  http://help.eclipse.org/help33/index.jsp?topic=/org.eclipse.jdt.doc.isv/guide/jdt_api_compile.htm\r\n  [2]: http://java.sun.com/javase/6/docs/technotes/tools/solaris/javac.html#options","title":"What is the list of valid @SuppressWarnings warning names in Java?","body":"<p>The list is compiler specific. But here are the values supported in <a href=\"http://help.eclipse.org/help33/index.jsp?topic=/org.eclipse.jdt.doc.isv/guide/jdt_api_compile.htm\" rel=\"noreferrer\">Eclipse</a>:</p>\n\n<blockquote>\n  <ul>\n  <li><strong>allDeprecation</strong>   deprecation even inside deprecated code  </li>\n  <li><strong>allJavadoc</strong>   invalid or missing javadoc  </li>\n  <li><strong>assertIdentifier</strong>  occurrence of assert used as identifier  </li>\n  <li><strong>boxing</strong>    autoboxing conversion  </li>\n  <li><strong>charConcat</strong>    when a char array is used in a string concatenation without being converted explicitly to a string   </li>\n  <li><strong>conditionAssign</strong>   possible accidental boolean assignment  </li>\n  <li><strong>constructorName</strong>   method with\n  constructor name  </li>\n  <li><strong>dep-ann</strong>   missing @Deprecated\n  annotation  </li>\n  <li><strong>deprecation</strong>   usage of deprecated type or member outside deprecated code  </li>\n  <li><strong>discouraged</strong>   use of types matching a discouraged access rule  </li>\n  <li><strong>emptyBlock</strong>    undocumented empty block  </li>\n  <li><strong>enumSwitch</strong>, <strong>incomplete-switch</strong>     incomplete enum switch  </li>\n  <li><strong>fallthrough</strong>   possible fall-through case  </li>\n  <li><strong>fieldHiding</strong>   field hiding another variable  </li>\n  <li><strong>finalBound</strong>    type parameter with final bound  </li>\n  <li><strong>finally</strong>   finally block not completing normally  </li>\n  <li><strong>forbidden</strong>     use of types matching a forbidden access rule  </li>\n  <li><strong>hiding</strong>    macro for fieldHiding, localHiding, typeHiding and maskedCatchBlock  </li>\n  <li><strong>indirectStatic</strong>    indirect reference to static member  </li>\n  <li><strong>intfAnnotation</strong>    annotation type used as super interface  </li>\n  <li><strong>intfNonInherited</strong>  interface non-inherited method compatibility  </li>\n  <li><strong>javadoc</strong>   invalid javadoc  </li>\n  <li><strong>localHiding</strong>   local variable hiding another variable  </li>\n  <li><strong>maskedCatchBlocks</strong>     hidden catch block  </li>\n  <li><strong>nls</strong>   non-nls string literals (lacking of tags //$NON-NLS-)  </li>\n  <li><strong>noEffectAssign</strong>    assignment with no effect  </li>\n  <li><strong>null</strong>  potential missing or redundant null check  </li>\n  <li><strong>nullDereference</strong>   missing null check  </li>\n  <li><strong>over-ann</strong>  missing @Override annotation  </li>\n  <li><strong>paramAssign</strong>   assignment to a parameter  </li>\n  <li><strong>pkgDefaultMethod</strong>  attempt to override package-default method  </li>\n  <li><strong>raw</strong>   usage a of raw type (instead of a parametrized type)  </li>\n  <li><strong>semicolon</strong>     unnecessary semicolon or empty statement  </li>\n  <li><strong>serial</strong>    missing serialVersionUID  </li>\n  <li><strong>specialParamHiding</strong>    constructor or setter parameter hiding another field  </li>\n  <li><strong>static-access</strong>     macro for indirectStatic and staticReceiver  </li>\n  <li><strong>staticReceiver</strong>    if a non static receiver is used to get a static field or call a static method  </li>\n  <li><strong>super</strong>     overriding a method without making a super invocation  </li>\n  <li><strong>suppress</strong>  enable @SuppressWarnings  </li>\n  <li><strong>syntheticAccess, synthetic-access</strong>     when performing synthetic access for innerclass  </li>\n  <li><strong>tasks</strong>     enable support for tasks tags in source code  </li>\n  <li><strong>typeHiding</strong>    type parameter hiding another type  </li>\n  <li><strong>unchecked</strong>     unchecked type operation  </li>\n  <li><strong>unnecessaryElse</strong>   unnecessary else clause  </li>\n  <li><strong>unqualified-field-access, unqualifiedField</strong>    unqualified\n  reference to field  </li>\n  <li><strong>unused</strong>    macro for unusedArgument, unusedImport, unusedLabel, unusedLocal, unusedPrivate and unusedThrown  </li>\n  <li><strong>unusedArgument</strong>    unused method argument  </li>\n  <li><strong>unusedImport</strong>  unused import reference  </li>\n  <li><strong>unusedLabel</strong>   unused label  </li>\n  <li><strong>unusedLocal</strong>   unused local variable  </li>\n  <li><strong>unusedPrivate</strong>     unused private member declaration  </li>\n  <li><strong>unusedThrown</strong>  unused declared thrown exception  </li>\n  <li><strong>uselessTypeCheck</strong>  unnecessary cast/instanceof operation  </li>\n  <li><strong>varargsCast</strong>   varargs argument need explicit cast  </li>\n  <li><strong>warningToken</strong>  unhandled warning token in @SuppressWarnings  </li>\n  </ul>\n</blockquote>\n\n<p>Sun JDK (1.6) has a shorter <a href=\"http://java.sun.com/javase/6/docs/technotes/tools/solaris/javac.html#options\" rel=\"noreferrer\">list</a> of supported warnings:</p>\n\n<blockquote>\n  <ul>\n  <li><strong>deprecation</strong>      Check for use of depreciated items.  </li>\n  <li><strong>unchecked</strong>  Give more detail for unchecked conversion warnings that are mandated by the Java Language Specification.  </li>\n  <li><strong>serial</strong> Warn about missing serialVersionUID definitions on serializable classes.  </li>\n  <li><strong>finally</strong> Warn about finally clauses that cannot complete normally.  </li>\n  <li><strong>fallthrough</strong> Check switch blocks for fall-through cases and provide a warning message for any that are found.  </li>\n  <li><strong>path</strong>     Check for a nonexistent path in environment paths (such as classpath).  </li>\n  </ul>\n</blockquote>\n\n<p>The latest available javac (1.6.0_13) for mac have the following supported warnings</p>\n\n<blockquote>\n  <ul>\n  <li><strong>all</strong>  </li>\n  <li><strong>cast</strong>  </li>\n  <li><strong>deprecation</strong>  </li>\n  <li><strong>divzero</strong>  </li>\n  <li><strong>empty</strong>  </li>\n  <li><strong>unchecked</strong>  </li>\n  <li><strong>fallthrough</strong>  </li>\n  <li><strong>path</strong>  </li>\n  <li><strong>serial</strong>  </li>\n  <li><strong>finally</strong>  </li>\n  <li><strong>overrides</strong>  </li>\n  </ul>\n</blockquote>\n"},{"tags":[],"owner":{"account_id":373909,"reputation":2979,"user_id":723825,"accept_rate":68,"display_name":"matteo"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1688056299,"creation_date":1413048391,"answer_id":26317274,"question_id":1205995,"body_markdown":"This seems to be a much more complete list, where I found some warnings specific to Android Studio that I couldn&#39;t find elsewhere (e.g. `SynchronizeOnNonFinalField`):\r\n\r\nhttps://jazzy.id.au/2008/10/30/list_of_suppresswarnings_arguments.html\r\n\r\nOh, now SO&#39;s guidelines contradict SO&#39;s restrictions.\r\nOn one hand, I am supposed to copy the list rather than providing only the link.\r\nBut on the other hand, this would exceed the maximum allowed number of characters. So let&#39;s just hope the link won&#39;t break.\r\n","title":"What is the list of valid @SuppressWarnings warning names in Java?","body":"<p>This seems to be a much more complete list, where I found some warnings specific to Android Studio that I couldn't find elsewhere (e.g. <code>SynchronizeOnNonFinalField</code>):</p>\n<p><a href=\"https://jazzy.id.au/2008/10/30/list_of_suppresswarnings_arguments.html\" rel=\"nofollow noreferrer\">https://jazzy.id.au/2008/10/30/list_of_suppresswarnings_arguments.html</a></p>\n<p>Oh, now SO's guidelines contradict SO's restrictions.\nOn one hand, I am supposed to copy the list rather than providing only the link.\nBut on the other hand, this would exceed the maximum allowed number of characters. So let's just hope the link won't break.</p>\n"},{"tags":[],"owner":{"account_id":481416,"reputation":355314,"user_id":895245,"accept_rate":49,"display_name":"Ciro Santilli OurBigBook.com"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1508501727,"creation_date":1427379399,"answer_id":29280792,"question_id":1205995,"body_markdown":"**JSL 1.7**\r\n\r\n[The Oracle documentation][1] mentions:\r\n\r\n- `unchecked`: Unchecked warnings are identified by the string &quot;unchecked&quot;. \r\n- `deprecation`: A Java compiler must produce a deprecation warning when a type, method, field, or constructor whose declaration is annotated with the annotation @Deprecated is used (i.e. overridden, invoked, or referenced by name), unless: [...] The use is within an entity that is annotated to suppress the warning with the annotation @SuppressWarnings(&quot;deprecation&quot;); or\r\n\r\nIt then explains that implementations can add and document their own:\r\n\r\n&gt; Compiler vendors should document the warning names they support in conjunction with this annotation type. Vendors are encouraged to cooperate to ensure that the same names work across multiple compilers.\r\n\r\n\r\n  [1]: http://docs.oracle.com/javase/specs/jls/se7/html/jls-9.html","title":"What is the list of valid @SuppressWarnings warning names in Java?","body":"<p><strong>JSL 1.7</strong></p>\n\n<p><a href=\"http://docs.oracle.com/javase/specs/jls/se7/html/jls-9.html\" rel=\"nofollow noreferrer\">The Oracle documentation</a> mentions:</p>\n\n<ul>\n<li><code>unchecked</code>: Unchecked warnings are identified by the string \"unchecked\". </li>\n<li><code>deprecation</code>: A Java compiler must produce a deprecation warning when a type, method, field, or constructor whose declaration is annotated with the annotation @Deprecated is used (i.e. overridden, invoked, or referenced by name), unless: [...] The use is within an entity that is annotated to suppress the warning with the annotation @SuppressWarnings(\"deprecation\"); or</li>\n</ul>\n\n<p>It then explains that implementations can add and document their own:</p>\n\n<blockquote>\n  <p>Compiler vendors should document the warning names they support in conjunction with this annotation type. Vendors are encouraged to cooperate to ensure that the same names work across multiple compilers.</p>\n</blockquote>\n"},{"tags":[],"owner":{"account_id":874523,"reputation":2017,"user_id":1216686,"accept_rate":11,"display_name":"Matt Campbell"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1513788260,"creation_date":1513788260,"answer_id":47910744,"question_id":1205995,"body_markdown":"I just want to add that there is a master list of IntelliJ suppress parameters at: https://gist.github.com/vegaasen/157fbc6dce8545b7f12c\r\n\r\nIt looks fairly comprehensive.  Partial:\r\n\r\n    Warning Description - Warning Name\r\n\r\n    &quot;Magic character&quot; MagicCharacter \r\n    &quot;Magic number&quot; MagicNumber \r\n    &#39;Comparator.compare()&#39; method does not use parameter ComparatorMethodParameterNotUsed \r\n    &#39;Connection.prepare*()&#39; call with non-constant string JDBCPrepareStatementWithNonConstantString \r\n    &#39;Iterator.hasNext()&#39; which calls &#39;next()&#39; IteratorHasNextCallsIteratorNext \r\n    &#39;Iterator.next()&#39; which can&#39;t throw &#39;NoSuchElementException&#39; IteratorNextCanNotThrowNoSuchElementException \r\n    &#39;Statement.execute()&#39; call with non-constant string JDBCExecuteWithNonConstantString \r\n    &#39;String.equals(&quot;&quot;)&#39; StringEqualsEmptyString \r\n    &#39;StringBuffer&#39; may be &#39;StringBuilder&#39; (JDK 5.0 only) StringBufferMayBeStringBuilder \r\n    &#39;StringBuffer.toString()&#39; in concatenation StringBufferToStringInConcatenation \r\n    &#39;assert&#39; statement AssertStatement \r\n    &#39;assertEquals()&#39; between objects of inconvertible types AssertEqualsBetweenInconvertibleTypes \r\n    &#39;await()&#39; not in loop AwaitNotInLoop \r\n    &#39;await()&#39; without corresponding &#39;signal()&#39; AwaitWithoutCorrespondingSignal \r\n    &#39;break&#39; statement BreakStatement \r\n    &#39;break&#39; statement with label BreakStatementWithLabel \r\n    &#39;catch&#39; generic class CatchGenericClass \r\n    &#39;clone()&#39; does not call &#39;super.clone()&#39; CloneDoesntCallSuperClone","title":"What is the list of valid @SuppressWarnings warning names in Java?","body":"<p>I just want to add that there is a master list of IntelliJ suppress parameters at: <a href=\"https://gist.github.com/vegaasen/157fbc6dce8545b7f12c\" rel=\"nofollow noreferrer\">https://gist.github.com/vegaasen/157fbc6dce8545b7f12c</a></p>\n\n<p>It looks fairly comprehensive.  Partial:</p>\n\n<pre><code>Warning Description - Warning Name\n\n\"Magic character\" MagicCharacter \n\"Magic number\" MagicNumber \n'Comparator.compare()' method does not use parameter ComparatorMethodParameterNotUsed \n'Connection.prepare*()' call with non-constant string JDBCPrepareStatementWithNonConstantString \n'Iterator.hasNext()' which calls 'next()' IteratorHasNextCallsIteratorNext \n'Iterator.next()' which can't throw 'NoSuchElementException' IteratorNextCanNotThrowNoSuchElementException \n'Statement.execute()' call with non-constant string JDBCExecuteWithNonConstantString \n'String.equals(\"\")' StringEqualsEmptyString \n'StringBuffer' may be 'StringBuilder' (JDK 5.0 only) StringBufferMayBeStringBuilder \n'StringBuffer.toString()' in concatenation StringBufferToStringInConcatenation \n'assert' statement AssertStatement \n'assertEquals()' between objects of inconvertible types AssertEqualsBetweenInconvertibleTypes \n'await()' not in loop AwaitNotInLoop \n'await()' without corresponding 'signal()' AwaitWithoutCorrespondingSignal \n'break' statement BreakStatement \n'break' statement with label BreakStatementWithLabel \n'catch' generic class CatchGenericClass \n'clone()' does not call 'super.clone()' CloneDoesntCallSuperClone\n</code></pre>\n"},{"tags":[],"owner":{"account_id":63286,"reputation":4422,"user_id":187423,"accept_rate":83,"display_name":"barclay"},"down_vote_count":2,"up_vote_count":10,"is_accepted":false,"score":8,"last_activity_date":1549572526,"creation_date":1521754411,"answer_id":49438849,"question_id":1205995,"body_markdown":"A new favorite for me is `@SuppressWarnings(&quot;WeakerAccess&quot;)` in IntelliJ, which keeps it from complaining when it thinks you should have a weaker access modifier than you are using. We have to have public access for some methods to support testing, and the `@VisibleForTesting` annotation doesn&#39;t prevent the warnings.\r\n\r\nETA:\r\n&quot;Anonymous&quot; commented, on the page @MattCampbell linked to, the following incredibly useful note:\r\n\r\n&gt; You shouldn&#39;t need to use this list for the purpose you are\r\n&gt; describing. IntelliJ will add those SuppressWarnings for you\r\n&gt; automatically if you ask it to. It has been capable of doing this for\r\n&gt; as many releases back as I remember.\r\n&gt; \r\n&gt; Just go to the location where you have the warning and type Alt-Enter\r\n&gt; (or select it in the Inspections list if you are seeing it there).\r\n&gt; When the menu comes up, showing the warning and offering to fix it for\r\n&gt; you (e.g. if the warning is &quot;Method may be static&quot; then &quot;make static&quot;\r\n&gt; is IntellJ&#39;s offer to fix it for you), instead of selecting &quot;enter&quot;,\r\n&gt; just use the right arrow button to access the submenu, which will have\r\n&gt; options like &quot;Edit inspection profile setting&quot; and so forth. At the\r\n&gt; bottom of this list will be options like &quot;Suppress all inspections for\r\n&gt; class&quot;, &quot;Suppress for class&quot;, &quot;Suppress for method&quot;, and occasionally\r\n&gt; &quot;Suppress for statement&quot;. You probably want whichever one of these\r\n&gt; appears last on the list. Selecting one of these will add a\r\n&gt; @SuppressWarnings annotation (or comment in some cases) to your code\r\n&gt; suppressing the warning in question. You won&#39;t need to guess at which\r\n&gt; annotation to add, because IntelliJ will choose based on the warning\r\n&gt; you selected.","title":"What is the list of valid @SuppressWarnings warning names in Java?","body":"<p>A new favorite for me is <code>@SuppressWarnings(\"WeakerAccess\")</code> in IntelliJ, which keeps it from complaining when it thinks you should have a weaker access modifier than you are using. We have to have public access for some methods to support testing, and the <code>@VisibleForTesting</code> annotation doesn't prevent the warnings.</p>\n\n<p>ETA:\n\"Anonymous\" commented, on the page @MattCampbell linked to, the following incredibly useful note:</p>\n\n<blockquote>\n  <p>You shouldn't need to use this list for the purpose you are\n  describing. IntelliJ will add those SuppressWarnings for you\n  automatically if you ask it to. It has been capable of doing this for\n  as many releases back as I remember.</p>\n  \n  <p>Just go to the location where you have the warning and type Alt-Enter\n  (or select it in the Inspections list if you are seeing it there).\n  When the menu comes up, showing the warning and offering to fix it for\n  you (e.g. if the warning is \"Method may be static\" then \"make static\"\n  is IntellJ's offer to fix it for you), instead of selecting \"enter\",\n  just use the right arrow button to access the submenu, which will have\n  options like \"Edit inspection profile setting\" and so forth. At the\n  bottom of this list will be options like \"Suppress all inspections for\n  class\", \"Suppress for class\", \"Suppress for method\", and occasionally\n  \"Suppress for statement\". You probably want whichever one of these\n  appears last on the list. Selecting one of these will add a\n  @SuppressWarnings annotation (or comment in some cases) to your code\n  suppressing the warning in question. You won't need to guess at which\n  annotation to add, because IntelliJ will choose based on the warning\n  you selected.</p>\n</blockquote>\n"},{"tags":[],"owner":{"account_id":7673543,"reputation":3490,"user_id":5815054,"accept_rate":50,"display_name":"hb0"},"down_vote_count":0,"up_vote_count":9,"is_accepted":false,"score":9,"last_activity_date":1547822645,"creation_date":1547737325,"answer_id":54238673,"question_id":1205995,"body_markdown":"I noticed that `//noinspection` can be auto-generated in **IntelliJ**\r\n\r\n* make sure you have not already a plan `@SuppressWarninigs` before the statement\r\n* Now you can auto-generate the specific `//noinspection` by hitting **Alt+Enter** when you have the warning selected and then use the **right arrow key** to see the *Suppress for ...* option\r\n\r\n\r\n*Ended up here when I wanted to suppress a &quot;switch has too few case labels&quot; warning from IntelliJ. I did not find a complete List for IntelliJ&#39;s `@SuppressWarning` support but `//noinspection` did the trick for me.*","title":"What is the list of valid @SuppressWarnings warning names in Java?","body":"<p>I noticed that <code>//noinspection</code> can be auto-generated in <strong>IntelliJ</strong></p>\n\n<ul>\n<li>make sure you have not already a plan <code>@SuppressWarninigs</code> before the statement</li>\n<li>Now you can auto-generate the specific <code>//noinspection</code> by hitting <strong>Alt+Enter</strong> when you have the warning selected and then use the <strong>right arrow key</strong> to see the <em>Suppress for ...</em> option</li>\n</ul>\n\n<p><em>Ended up here when I wanted to suppress a \"switch has too few case labels\" warning from IntelliJ. I did not find a complete List for IntelliJ's <code>@SuppressWarning</code> support but <code>//noinspection</code> did the trick for me.</em></p>\n"},{"tags":[],"owner":{"account_id":13955245,"reputation":29,"user_id":10077827,"display_name":"R Strauss"},"down_vote_count":1,"up_vote_count":2,"is_accepted":false,"score":1,"last_activity_date":1555468892,"creation_date":1555468892,"answer_id":55719123,"question_id":1205995,"body_markdown":"If you&#39;re using SonarLint,\r\ntry above the method or class the whole squid string:\r\n    @SuppressWarnings(&quot;squid:S1172&quot;)\r\n","title":"What is the list of valid @SuppressWarnings warning names in Java?","body":"<p>If you're using SonarLint,\ntry above the method or class the whole squid string:\n    @SuppressWarnings(\"squid:S1172\")</p>\n"},{"tags":[],"owner":{"account_id":92486,"reputation":45185,"user_id":253468,"accept_rate":79,"display_name":"TWiStErRob"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1697806995,"creation_date":1697806995,"answer_id":77331135,"question_id":1205995,"body_markdown":"## Official sources for the list of supported values\r\n * [JSL 9.6.4.5 `@SuppressWarnings`](https://docs.oracle.com/javase/specs/jls/se21/html/jls-9.html#jls-9.6.4.5)\r\n * [`javac` docs](https://docs.oracle.com/en/java/javase/21/docs/specs/man/javac.html#option-Xlint-custom)\r\n * CLI of your actual `java`\r\n   * Java 5-16 `javac -help -X`\r\n   * Java 17-21 `javac --help-lint`\r\n * In case you need older documentation, https://javaalmanac.io seems to be a pretty good reference.\r\n * Anything else that your IDE, or static code analyzer can understand. For example\r\n   * Eclipse has a few additional ones that look like Java offical ones\r\n   * IntelliJ IDEA has inspections that can be suppressed the same way.\r\n   * Checkstyle, PMD, etc. can also use this same annotation.\r\n\r\n## `javac -Xlint` options across JDK versions\r\nBased on the above here&#39;s an official-ish list from Oracle/OpenJDK JDKs.\r\n\r\n| Name | Since* | Description |\r\n| - | - | - |\r\n| all | 5 | Enable all warnings |\r\n| none | 6 | Disable all warnings |\r\n| preview | 11&lt;br&gt;17&lt;sup&gt;std&lt;/sup&gt; | Warn about use of preview language features. |\r\n| auxiliaryclass | 8 | Warn about an auxiliary class that is hidden in a source file, and is used from other files. |\r\n| cast | 6 | Warn about use of unnecessary casts. |\r\n| classfile | 7 | Warn about issues related to classfile contents. |\r\n| deprecation | 5&lt;br&gt;11&lt;sup&gt;std&lt;/sup&gt; | Warn about use of deprecated items. |\r\n| dep-ann | 7 | Warn about items marked as deprecated in JavaDoc but not using the @Deprecated annotation. |\r\n| divzero | 6 | Warn about division by constant integer 0. |\r\n| empty | 6 | Warn about empty statement after if. |\r\n| exports | 17 | Warn about issues regarding module exports. |\r\n| fallthrough | 5 | Warn about falling through from one case of a switch statement to the next. |\r\n| finally | 5 | Warn about finally clauses that do not terminate normally. |\r\n| lossy-conversions | 21 | Warn about possible lossy conversions in compound assignment. |\r\n| missing-explicit-ctor | 17 | Warn about missing explicit constructors in public and protected classes in exported packages. |\r\n| module | 9 | Warn about module system related issues. |\r\n| opens | 9 | Warn about issues regarding module opens. |\r\n| options | 7 | Warn about issues relating to use of command line options. |\r\n| output-file-clash | 21 | Warn when an output file is overwritten during compilation. This can occur, for example, on case-insensitive filesystems. Covers class files, native header files, and source files. |\r\n| overloads | 8 | Warn about issues regarding method overloads. |\r\n| overrides | 6 | Warn about issues regarding method overrides. |\r\n| path | 5 | Warn about invalid path elements on the command line. |\r\n| processing | 7 | Warn about issues regarding annotation processing. |\r\n| rawtypes | 7 | Warn about use of raw types. |\r\n| removal | 9&lt;br&gt;11&lt;sup&gt;std&lt;/sup&gt; | Warn about use of API that has been marked for removal. |\r\n| requires-automatic | 9 | Warn about use of automatic modules in the requires clauses. |\r\n| requires-transitive-automatic | 9 | Warn about automatic modules in requires transitive. |\r\n| serial | 5 | Warn about Serializable classes that do not have a serialVersionUID field. Also warn about other suspect declarations in Serializable and Externalizable classes and interfaces. |\r\n| static | 7 | Warn about accessing a static member using an instance. |\r\n| strictfp | 17 | Warn about unnecessary use of the strictfp modifier. |\r\n| synchronization | 17 | Warn about synchronization attempts on instances of value-based classes. |\r\n | text-blocks | 17 | Warn about inconsistent white space characters in text block indentation. |\r\n| this-escape | 21 | Warn when a constructor invokes a method that could be overriden in an external subclass. Such a method would execute before the subclass constructor completes its initialization. |\r\n| try | 7 | Warn about issues relating to use of try blocks (i.e. try-with-resources). |\r\n| unchecked | 5&lt;br&gt;6&lt;sup&gt;std&lt;/sup&gt; | Warn about unchecked operations. |\r\n| varargs | 7 | Warn about potentially unsafe vararg methods. |\r\n\r\n\\* I only checked the commonly occurring 5, 6, 7, 8, 9, 11, 17, 21 versions.  \r\n&lt;sup&gt;std&lt;/sup&gt; ones are standard according to JLS version evolution.","title":"What is the list of valid @SuppressWarnings warning names in Java?","body":"<h2>Official sources for the list of supported values</h2>\n<ul>\n<li><a href=\"https://docs.oracle.com/javase/specs/jls/se21/html/jls-9.html#jls-9.6.4.5\" rel=\"nofollow noreferrer\">JSL 9.6.4.5 <code>@SuppressWarnings</code></a></li>\n<li><a href=\"https://docs.oracle.com/en/java/javase/21/docs/specs/man/javac.html#option-Xlint-custom\" rel=\"nofollow noreferrer\"><code>javac</code> docs</a></li>\n<li>CLI of your actual <code>java</code>\n<ul>\n<li>Java 5-16 <code>javac -help -X</code></li>\n<li>Java 17-21 <code>javac --help-lint</code></li>\n</ul>\n</li>\n<li>In case you need older documentation, <a href=\"https://javaalmanac.io\" rel=\"nofollow noreferrer\">https://javaalmanac.io</a> seems to be a pretty good reference.</li>\n<li>Anything else that your IDE, or static code analyzer can understand. For example\n<ul>\n<li>Eclipse has a few additional ones that look like Java offical ones</li>\n<li>IntelliJ IDEA has inspections that can be suppressed the same way.</li>\n<li>Checkstyle, PMD, etc. can also use this same annotation.</li>\n</ul>\n</li>\n</ul>\n<h2><code>javac -Xlint</code> options across JDK versions</h2>\n<p>Based on the above here's an official-ish list from Oracle/OpenJDK JDKs.</p>\n<div class=\"s-table-container\">\n<table class=\"s-table\">\n<thead>\n<tr>\n<th>Name</th>\n<th>Since*</th>\n<th>Description</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>all</td>\n<td>5</td>\n<td>Enable all warnings</td>\n</tr>\n<tr>\n<td>none</td>\n<td>6</td>\n<td>Disable all warnings</td>\n</tr>\n<tr>\n<td>preview</td>\n<td>11<br>17<sup>std</sup></td>\n<td>Warn about use of preview language features.</td>\n</tr>\n<tr>\n<td>auxiliaryclass</td>\n<td>8</td>\n<td>Warn about an auxiliary class that is hidden in a source file, and is used from other files.</td>\n</tr>\n<tr>\n<td>cast</td>\n<td>6</td>\n<td>Warn about use of unnecessary casts.</td>\n</tr>\n<tr>\n<td>classfile</td>\n<td>7</td>\n<td>Warn about issues related to classfile contents.</td>\n</tr>\n<tr>\n<td>deprecation</td>\n<td>5<br>11<sup>std</sup></td>\n<td>Warn about use of deprecated items.</td>\n</tr>\n<tr>\n<td>dep-ann</td>\n<td>7</td>\n<td>Warn about items marked as deprecated in JavaDoc but not using the @Deprecated annotation.</td>\n</tr>\n<tr>\n<td>divzero</td>\n<td>6</td>\n<td>Warn about division by constant integer 0.</td>\n</tr>\n<tr>\n<td>empty</td>\n<td>6</td>\n<td>Warn about empty statement after if.</td>\n</tr>\n<tr>\n<td>exports</td>\n<td>17</td>\n<td>Warn about issues regarding module exports.</td>\n</tr>\n<tr>\n<td>fallthrough</td>\n<td>5</td>\n<td>Warn about falling through from one case of a switch statement to the next.</td>\n</tr>\n<tr>\n<td>finally</td>\n<td>5</td>\n<td>Warn about finally clauses that do not terminate normally.</td>\n</tr>\n<tr>\n<td>lossy-conversions</td>\n<td>21</td>\n<td>Warn about possible lossy conversions in compound assignment.</td>\n</tr>\n<tr>\n<td>missing-explicit-ctor</td>\n<td>17</td>\n<td>Warn about missing explicit constructors in public and protected classes in exported packages.</td>\n</tr>\n<tr>\n<td>module</td>\n<td>9</td>\n<td>Warn about module system related issues.</td>\n</tr>\n<tr>\n<td>opens</td>\n<td>9</td>\n<td>Warn about issues regarding module opens.</td>\n</tr>\n<tr>\n<td>options</td>\n<td>7</td>\n<td>Warn about issues relating to use of command line options.</td>\n</tr>\n<tr>\n<td>output-file-clash</td>\n<td>21</td>\n<td>Warn when an output file is overwritten during compilation. This can occur, for example, on case-insensitive filesystems. Covers class files, native header files, and source files.</td>\n</tr>\n<tr>\n<td>overloads</td>\n<td>8</td>\n<td>Warn about issues regarding method overloads.</td>\n</tr>\n<tr>\n<td>overrides</td>\n<td>6</td>\n<td>Warn about issues regarding method overrides.</td>\n</tr>\n<tr>\n<td>path</td>\n<td>5</td>\n<td>Warn about invalid path elements on the command line.</td>\n</tr>\n<tr>\n<td>processing</td>\n<td>7</td>\n<td>Warn about issues regarding annotation processing.</td>\n</tr>\n<tr>\n<td>rawtypes</td>\n<td>7</td>\n<td>Warn about use of raw types.</td>\n</tr>\n<tr>\n<td>removal</td>\n<td>9<br>11<sup>std</sup></td>\n<td>Warn about use of API that has been marked for removal.</td>\n</tr>\n<tr>\n<td>requires-automatic</td>\n<td>9</td>\n<td>Warn about use of automatic modules in the requires clauses.</td>\n</tr>\n<tr>\n<td>requires-transitive-automatic</td>\n<td>9</td>\n<td>Warn about automatic modules in requires transitive.</td>\n</tr>\n<tr>\n<td>serial</td>\n<td>5</td>\n<td>Warn about Serializable classes that do not have a serialVersionUID field. Also warn about other suspect declarations in Serializable and Externalizable classes and interfaces.</td>\n</tr>\n<tr>\n<td>static</td>\n<td>7</td>\n<td>Warn about accessing a static member using an instance.</td>\n</tr>\n<tr>\n<td>strictfp</td>\n<td>17</td>\n<td>Warn about unnecessary use of the strictfp modifier.</td>\n</tr>\n<tr>\n<td>synchronization</td>\n<td>17</td>\n<td>Warn about synchronization attempts on instances of value-based classes.</td>\n</tr>\n<tr>\n<td>text-blocks</td>\n<td>17</td>\n<td>Warn about inconsistent white space characters in text block indentation.</td>\n</tr>\n<tr>\n<td>this-escape</td>\n<td>21</td>\n<td>Warn when a constructor invokes a method that could be overriden in an external subclass. Such a method would execute before the subclass constructor completes its initialization.</td>\n</tr>\n<tr>\n<td>try</td>\n<td>7</td>\n<td>Warn about issues relating to use of try blocks (i.e. try-with-resources).</td>\n</tr>\n<tr>\n<td>unchecked</td>\n<td>5<br>6<sup>std</sup></td>\n<td>Warn about unchecked operations.</td>\n</tr>\n<tr>\n<td>varargs</td>\n<td>7</td>\n<td>Warn about potentially unsafe vararg methods.</td>\n</tr>\n</tbody>\n</table>\n</div>\n<p>* I only checked the commonly occurring 5, 6, 7, 8, 9, 11, 17, 21 versions.<br />\n<sup>std</sup> ones are standard according to JLS version evolution.</p>\n"}],"owner":{"account_id":717,"reputation":54118,"user_id":939,"accept_rate":81,"display_name":"Ron Tuffin"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":196688,"favorite_count":0,"down_vote_count":0,"up_vote_count":322,"accepted_answer_id":1206001,"answer_count":10,"score":322,"last_activity_date":1697806995,"creation_date":1248953134,"question_id":1205995,"body_markdown":"What is the list of valid `@SuppressWarnings` warning names in Java?\r\n\r\nThe bit that comes in between the `(&quot;&quot;)` in `@SuppressWarnings(&quot;&quot;)`.","title":"What is the list of valid @SuppressWarnings warning names in Java?","body":"<p>What is the list of valid <code>@SuppressWarnings</code> warning names in Java?</p>\n\n<p>The bit that comes in between the <code>(\"\")</code> in <code>@SuppressWarnings(\"\")</code>.</p>\n"},{"tags":["java","windows-services","java-service-wrapper"],"comments":[{"owner":{"account_id":17649836,"reputation":1,"user_id":12810494,"display_name":"Karthikeyan S"},"score":0,"creation_date":1580351078,"post_id":47711905,"comment_id":106071933,"body_markdown":"The answer is exist in the below link... [how-to-create-a-windows-service](https://stackoverflow.com/questions/68113/how-to-create-a-windows-service-from-java-app/59978239#59978239)","body":"The answer is exist in the below link... <a href=\"https://stackoverflow.com/questions/68113/how-to-create-a-windows-service-from-java-app/59978239#59978239\">how-to-create-a-windows-service</a>"},{"owner":{"account_id":17649836,"reputation":1,"user_id":12810494,"display_name":"Karthikeyan S"},"score":0,"creation_date":1580351252,"post_id":47711905,"comment_id":106071960,"body_markdown":"Already answered in the below stack overflow question... [how-to-create-a-windows-service...](https://stackoverflow.com/questions/68113/how-to-create-a-windows-service-from-java-app/59978239#59978239)","body":"Already answered in the below stack overflow question... <a href=\"https://stackoverflow.com/questions/68113/how-to-create-a-windows-service-from-java-app/59978239#59978239\">how-to-create-a-windows-service...</a>"}],"answers":[{"tags":[],"owner":{"account_id":4180478,"reputation":21,"user_id":3425664,"display_name":"Walter"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1512728081,"creation_date":1512728081,"answer_id":47712134,"question_id":47711905,"body_markdown":"I have used this approach before in a productive environment, so I can assure you it is safe to use. \n\nThe Jar-File is wrapped in an exe and then it is added to the windows service scheduler (or however you want to call this). If you have a maven project this is also really easy to accomplish. \n\nhttps://dzone.com/articles/installing-a-java-application-as-a-windows-service\n\nEdit: you said you can’t use external software. With this approach everything that is needed is packed in the exe file. Including a JRE, I hope that that is allowed by your client’s policy. ","title":"Running Java jars as windows service","body":"<p>I have used this approach before in a productive environment, so I can assure you it is safe to use. </p>\n\n<p>The Jar-File is wrapped in an exe and then it is added to the windows service scheduler (or however you want to call this). If you have a maven project this is also really easy to accomplish. </p>\n\n<p><a href=\"https://dzone.com/articles/installing-a-java-application-as-a-windows-service\" rel=\"nofollow noreferrer\">https://dzone.com/articles/installing-a-java-application-as-a-windows-service</a></p>\n\n<p>Edit: you said you can’t use external software. With this approach everything that is needed is packed in the exe file. Including a JRE, I hope that that is allowed by your client’s policy. </p>\n"}],"owner":{"account_id":7042332,"reputation":121,"user_id":5394411,"accept_rate":29,"display_name":"Jay"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":13078,"favorite_count":0,"down_vote_count":0,"up_vote_count":4,"answer_count":1,"score":4,"last_activity_date":1697806915,"creation_date":1512727338,"question_id":47711905,"body_markdown":"I have an executable jar and I was trying to create a Windows Service using sc.exe. I used the below code for creating service:\r\n\r\n    sc create &quot;TestService&quot; binPath= &quot;C:\\Program Files\\Java\\jdk1.6.0_03\\jre\\bin\\java.exe -jar C:\\abc\\MainClass.jar&quot;\r\n\r\nThe service got created but when I was trying to start the service I got the below error: \r\n\r\n    Error 1053: The service did not respond to the start or control request in a timely fashion.\r\n\r\nLater I tried to use Java Service Wrapper (Community Edition), the service starts for some time but is getting stopped everytime. The wrapper log tells something like:\r\n\r\n    Advice:\r\n    The Wrapper consists of a native component as well as a set of classes\r\n    which run within the JVM that it launches.  The Java component of the\r\n    Wrapper must be initialized promptly after the JVM is launched or the\r\n    Wrapper will timeout, as just happened.  Most likely the main class\r\n    specified in the Wrapper configuration file is not correctly initializing\r\n    the Wrapper classes:\r\n    com.MainClass\r\n    While it is possible to do so manually, the Wrapper ships with helper\r\n    classes to make this initialization processes automatic.\r\n    Please review the integration section of the Wrapper&#39;s documentation\r\n    for the various methods which can be employed to launch an application\r\n    within the Wrapper\r\n\r\nCould anyone please tell me how can I run jar as a Windows Service without using external software as I can&#39;t use any third party app on Client&#39;s prod env.\r\n\r\nIf not what other configs I need to do in Java Service Wrapper to make the service start.\r\n\r\nI tried to find some info related to this on stackoverflow but I did not get anything thing. If any one has anything on stackoverflow please feel free to put this in comment.","title":"Running Java jars as windows service","body":"<p>I have an executable jar and I was trying to create a Windows Service using sc.exe. I used the below code for creating service:</p>\n\n<pre><code>sc create \"TestService\" binPath= \"C:\\Program Files\\Java\\jdk1.6.0_03\\jre\\bin\\java.exe -jar C:\\abc\\MainClass.jar\"\n</code></pre>\n\n<p>The service got created but when I was trying to start the service I got the below error: </p>\n\n<pre><code>Error 1053: The service did not respond to the start or control request in a timely fashion.\n</code></pre>\n\n<p>Later I tried to use Java Service Wrapper (Community Edition), the service starts for some time but is getting stopped everytime. The wrapper log tells something like:</p>\n\n<pre><code>Advice:\nThe Wrapper consists of a native component as well as a set of classes\nwhich run within the JVM that it launches.  The Java component of the\nWrapper must be initialized promptly after the JVM is launched or the\nWrapper will timeout, as just happened.  Most likely the main class\nspecified in the Wrapper configuration file is not correctly initializing\nthe Wrapper classes:\ncom.MainClass\nWhile it is possible to do so manually, the Wrapper ships with helper\nclasses to make this initialization processes automatic.\nPlease review the integration section of the Wrapper's documentation\nfor the various methods which can be employed to launch an application\nwithin the Wrapper\n</code></pre>\n\n<p>Could anyone please tell me how can I run jar as a Windows Service without using external software as I can't use any third party app on Client's prod env.</p>\n\n<p>If not what other configs I need to do in Java Service Wrapper to make the service start.</p>\n\n<p>I tried to find some info related to this on stackoverflow but I did not get anything thing. If any one has anything on stackoverflow please feel free to put this in comment.</p>\n"},{"tags":["java","arrays","global-variables"],"answers":[{"tags":[],"owner":{"account_id":234840,"reputation":160679,"user_id":501250,"accept_rate":75,"display_name":"cdhowie"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1292428664,"creation_date":1292428664,"answer_id":4451966,"question_id":4451937,"body_markdown":"If you want the fields to be global, you need to declare them static:\r\n\r\n    static String[] columnNames = ...\r\n\r\n    static Object[][] data = ...\r\n\r\nWithout the `static` keyword, the fields belong to *instances* of `OptraderGlobal` and not to the class itself.","title":"Java - Acessing global variables &amp; Arrays","body":"<p>If you want the fields to be global, you need to declare them static:</p>\n\n<pre><code>static String[] columnNames = ...\n\nstatic Object[][] data = ...\n</code></pre>\n\n<p>Without the <code>static</code> keyword, the fields belong to <em>instances</em> of <code>OptraderGlobal</code> and not to the class itself.</p>\n"},{"tags":[],"owner":{"account_id":27166,"reputation":19089,"user_id":71399,"accept_rate":65,"display_name":"pauljwilliams"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1292428673,"creation_date":1292428673,"answer_id":4451972,"question_id":4451937,"body_markdown":"Make columnNames static.","title":"Java - Acessing global variables &amp; Arrays","body":"<p>Make columnNames static.</p>\n"},{"tags":[],"owner":{"account_id":19462,"reputation":102762,"user_id":45664,"accept_rate":91,"display_name":"Andrzej Doyle"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1292428691,"creation_date":1292428691,"answer_id":4451976,"question_id":4451937,"body_markdown":"If you want something to be global to a class, you need to declare it as `static`.  This means that the field is associated with the class itself (only one copy), rather than a new version being created for each instance.\r\n\r\nSince you didn&#39;t do this at present, you ended up with the error copied in your VolatilityTableModel - you can&#39;t reference the field without some *particular* instance of OptraderGlobal.\r\n\r\nI would suggest that you take a look at some resources dealing with [Object oriented programming](http://en.wikipedia.org/wiki/Object-oriented_programming) - both this mistake, and your design as a whole (i.e. globals are generally a bad idea), indicate perhaps a lack of familiarity with these principles.  Since Java is an object-oriented language, becoming familiar with this style will help you no end.","title":"Java - Acessing global variables &amp; Arrays","body":"<p>If you want something to be global to a class, you need to declare it as <code>static</code>.  This means that the field is associated with the class itself (only one copy), rather than a new version being created for each instance.</p>\n\n<p>Since you didn't do this at present, you ended up with the error copied in your VolatilityTableModel - you can't reference the field without some <em>particular</em> instance of OptraderGlobal.</p>\n\n<p>I would suggest that you take a look at some resources dealing with <a href=\"http://en.wikipedia.org/wiki/Object-oriented_programming\" rel=\"nofollow\">Object oriented programming</a> - both this mistake, and your design as a whole (i.e. globals are generally a bad idea), indicate perhaps a lack of familiarity with these principles.  Since Java is an object-oriented language, becoming familiar with this style will help you no end.</p>\n"},{"tags":[],"owner":{"account_id":1885,"reputation":137382,"user_id":2598,"accept_rate":93,"display_name":"jjnguy"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1292428726,"creation_date":1292428726,"answer_id":4451984,"question_id":4451937,"body_markdown":"You need to declare them as `public static` to access them the way you want.\r\n\r\n    public static String[] columnNames\r\n               = {&quot;Ex-Date&quot;,\r\n                  &quot;Dividend&quot;,\r\n                  &quot;Actual&quot;,\r\n                  &quot;Yield (%)&quot;\r\n                 };\r\n    \r\n    public static Object[][] data  = {\r\n           {&quot;dd/mm/yyyy&quot;, new Double(5), new Boolean(false), \r\n                     {&quot;21/12/2013&quot;, new Double(5), new Boolean(false)};\r\n                         }\r\n\r\nYou should declare the classes as public as well.","title":"Java - Acessing global variables &amp; Arrays","body":"<p>You need to declare them as <code>public static</code> to access them the way you want.</p>\n\n<pre><code>public static String[] columnNames\n           = {\"Ex-Date\",\n              \"Dividend\",\n              \"Actual\",\n              \"Yield (%)\"\n             };\n\npublic static Object[][] data  = {\n       {\"dd/mm/yyyy\", new Double(5), new Boolean(false), \n                 {\"21/12/2013\", new Double(5), new Boolean(false)};\n                     }\n</code></pre>\n\n<p>You should declare the classes as public as well.</p>\n"},{"tags":[],"owner":{"account_id":112931,"reputation":77772,"user_id":297696,"accept_rate":100,"display_name":"wkl"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1292428741,"creation_date":1292428741,"answer_id":4451988,"question_id":4451937,"body_markdown":"You have to learn more about [member fields in Java](http://download.oracle.com/javase/tutorial/java/javaOO/classvars.html).\r\n\r\nIn your case if you want them just accessible from other classes without creating an instance of `OptTraderGlobal`, you have to make `columnNames` and `data` `static`.","title":"Java - Acessing global variables &amp; Arrays","body":"<p>You have to learn more about <a href=\"http://download.oracle.com/javase/tutorial/java/javaOO/classvars.html\" rel=\"nofollow\">member fields in Java</a>.</p>\n\n<p>In your case if you want them just accessible from other classes without creating an instance of <code>OptTraderGlobal</code>, you have to make <code>columnNames</code> and <code>data</code> <code>static</code>.</p>\n"},{"tags":[],"owner":{"account_id":23740623,"reputation":1,"user_id":17758716,"display_name":"Reilas"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1684805186,"creation_date":1684805186,"answer_id":76310767,"question_id":4451937,"body_markdown":"You can either create a new instance of `OptraderGlobal`, or declare the `columnNames` variable as `static`.\r\n\r\nIt appears you are trying to access it in a static contex\r\n\r\n```java\r\nstatic String[] columnNames = { &quot;Ex-Date&quot;, &quot;Dividend&quot;, &quot;Actual&quot;, &quot;Yield (%)&quot; };\r\n```","title":"Java - Acessing global variables &amp; Arrays","body":"<p>You can either create a new instance of <code>OptraderGlobal</code>, or declare the <code>columnNames</code> variable as <code>static</code>.</p>\n<p>It appears you are trying to access it in a static contex</p>\n<pre class=\"lang-java prettyprint-override\"><code>static String[] columnNames = { &quot;Ex-Date&quot;, &quot;Dividend&quot;, &quot;Actual&quot;, &quot;Yield (%)&quot; };\n</code></pre>\n"}],"owner":{"account_id":684283,"reputation":19,"user_id":543579,"display_name":"Stephen"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":8226,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":6,"score":0,"last_activity_date":1697806915,"creation_date":1292428481,"question_id":4451937,"body_markdown":"I have a simple question regarding how to access global variables and global array information which I have had no luck.\r\n\r\nI have two Java files, but can&#39;t access the string and array information in my application `Optrader.java`.\r\n\r\n1. Optrader.java\r\n2. OptraderGlobals\r\n\r\nMy OptraderGlobal.java file:\r\n\r\n     class OptraderGlobal\r\n     {\r\n        String[] columnNames\r\n               = {&quot;Ex-Date&quot;,\r\n                  &quot;Dividend&quot;,\r\n                  &quot;Actual&quot;,\r\n                  &quot;Yield (%)&quot;\r\n                 };\r\n    \r\n      Object[][] data  = {\r\n           {&quot;dd/mm/yyyy&quot;, new Double(5), new Boolean(false), \r\n              {&quot;21/12/2013&quot;, new Double(5), new Boolean(false)};\r\n           }\r\n    }\r\nMy Optrader.java file:\r\n\r\n    /* Volatility Table Model is  CLASS within Optrader.java */\r\n    //Create Volatility Table\r\n    class VolatilityTableModel extends AbstractTableModel\r\n    {\r\n       public int getColumnCount()\r\n       {\r\n             return OptraderGlobal.columnNames1.length;\r\n        }   \r\n     }\r\n\r\nerror:\r\n\r\n     non-static variable columnNames cannot be\r\n     referenced from a static context\r\n     return OptraderGlobal.columnNames.length;\r\n\r\nAlso I need to access the global array data within other classes in Optrader.java.","title":"Java - Acessing global variables &amp; Arrays","body":"<p>I have a simple question regarding how to access global variables and global array information which I have had no luck.</p>\n\n<p>I have two Java files, but can't access the string and array information in my application <code>Optrader.java</code>.</p>\n\n<ol>\n<li>Optrader.java</li>\n<li>OptraderGlobals</li>\n</ol>\n\n<p>My OptraderGlobal.java file:</p>\n\n<pre><code> class OptraderGlobal\n {\n    String[] columnNames\n           = {\"Ex-Date\",\n              \"Dividend\",\n              \"Actual\",\n              \"Yield (%)\"\n             };\n\n  Object[][] data  = {\n       {\"dd/mm/yyyy\", new Double(5), new Boolean(false), \n          {\"21/12/2013\", new Double(5), new Boolean(false)};\n       }\n}\n</code></pre>\n\n<p>My Optrader.java file:</p>\n\n<pre><code>/* Volatility Table Model is  CLASS within Optrader.java */\n//Create Volatility Table\nclass VolatilityTableModel extends AbstractTableModel\n{\n   public int getColumnCount()\n   {\n         return OptraderGlobal.columnNames1.length;\n    }   \n }\n</code></pre>\n\n<p>error:</p>\n\n<pre><code> non-static variable columnNames cannot be\n referenced from a static context\n return OptraderGlobal.columnNames.length;\n</code></pre>\n\n<p>Also I need to access the global array data within other classes in Optrader.java.</p>\n"},{"tags":["java","nsis","apache-commons","apache-commons-daemon"],"comments":[{"owner":{"account_id":2513,"reputation":98324,"user_id":3501,"accept_rate":30,"display_name":"Anders"},"score":0,"creation_date":1697813723,"post_id":77330837,"comment_id":136330989,"body_markdown":"I doubt the NSIS tag is relevant here","body":"I doubt the NSIS tag is relevant here"}],"owner":{"account_id":26815442,"reputation":1,"user_id":22258674,"display_name":"tictac"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":56,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1697806438,"creation_date":1697804141,"question_id":77330837,"body_markdown":"I already have an application in Java 8 which started correctly as a windows service with apache commons daemon.\r\nBut recently by upgrading the application on java 17 I don&#39;t know why the application can&#39;t be started as a service.\r\n\r\nAnyone have an idea of the problem?\r\nBelow code for launching with NSIS installer:\r\n\r\n` ExecWait &#39;$INSTDIR\\MyServer-Service.exe //IS//MyServer-Service --Description=&quot;My Server Service&quot; --Install=$INSTDIR\\MyServer-Service.exe --Jvm=%JAVA_HOME% --Classpath=%CLASSPATH%;$INSTDIR\\my-server.jar --StartMode=jvm --StartClass=com.crimson.core.CsLauncher --StartParams=-conf;$INSTDIR\\conf\\default.json --StopMode=jvm --StopClass=com.crimson.core.CsLauncher --StopMethod=stopService&#39;`\r\n\r\n\r\n\r\nand logging by using servicew.exe:\r\n\r\n\r\n```\r\n[2023-10-20 11:45:13] [debug] ( prunsrv.c:2010) [27080] Apache Commons Daemon procrun log initialized.\r\n[2023-10-20 11:45:13] [info]  ( prunsrv.c:2018) [27080] Apache Commons Daemon procrun (1.3.4.0 32-bit) started.\r\n[2023-10-20 11:45:13] [info]  ( prunsrv.c:1922) [27080] Running Service &#39;My-ServerService&#39;...\r\n[2023-10-20 11:45:13] [debug] ( prunsrv.c:1681) [29020] Inside serviceMain()...\r\n[2023-10-20 11:45:13] [debug] ( prunsrv.c:1127) [29020] reportServiceStatusE: dwCurrentState = 2 (SERVICE_START_PENDING), dwWin32ExitCode = 0, dwWaitHint = 3000 milliseconds, dwServiceSpecificExitCode = 0.\r\n[2023-10-20 11:45:13] [info]  ( prunsrv.c:1426) [29020] Starting service...\r\n[2023-10-20 11:45:13] [debug] ( javajni.c:216 ) [29020] Explicit RuntimeLib specified &#39;D:\\Users\\adrien\\.jdks\\openjdk-17.0.2\\bin\\server\\jvm.dll&#39;\r\n[2023-10-20 11:45:13] [debug] ( javajni.c:285 ) [29020] Adding Java bin path to the PATH to fix loading of awt.dll: &#39;D:\\Users\\adrien\\.jdks\\openjdk-17.0.2\\bin&#39;\r\n[2023-10-20 11:45:13] [debug] ( javajni.c:291 ) [29020] Loading JVM DLL &#39;D:\\Users\\adrien\\.jdks\\openjdk-17.0.2\\bin\\server\\jvm.dll&#39;\r\n[2023-10-20 11:45:13] [error] ( javajni.c:300 ) [29020] Found &#39;D:\\Users\\adrien\\.jdks\\openjdk-17.0.2\\bin\\server\\jvm.dll&#39; but couldn&#39;t load it.\r\n[2023-10-20 11:45:13] [error] ( javajni.c:300 ) [29020] %1 n’est pas une application Win32 valide.\r\n[2023-10-20 11:45:13] [debug] ( javajni.c:321 ) [29020] Invalid JVM DLL handle.\r\n[2023-10-20 11:45:13] [debug] ( javajni.c:322 ) [29020] Loading JVM DLL &#39;D:\\Users\\adrien\\.jdks\\openjdk-17.0.2\\bin\\server\\jvm.dll&#39; using LOAD_WITH_ALTERED_SEARCH_PATH.\r\n[2023-10-20 11:45:13] [debug] ( javajni.c:326 ) [29020] Invalid JVM DLL handle.\r\n[2023-10-20 11:45:13] [debug] ( javajni.c:329 ) [29020] Setting DLL search path to &#39;D:\\Users\\adrien\\.jdks\\openjdk-17.0.2\\bin\\server\\jvm.dll&#39;\r\n[2023-10-20 11:45:13] [debug] ( javajni.c:332 ) [29020] Loading JVM DLL &#39;D:\\Users\\adrien\\.jdks\\openjdk-17.0.2\\bin\\server\\jvm.dll&#39;.\r\n[2023-10-20 11:45:13] [debug] ( javajni.c:335 ) [29020] Invalid JVM DLL handle.\r\n[2023-10-20 11:45:13] [debug] ( javajni.c:336 ) [29020] Loading JVM DLL &#39;D:\\Users\\adrien\\.jdks\\openjdk-17.0.2\\bin\\server\\jvm.dll&#39; using LOAD_WITH_ALTERED_SEARCH_PATH.\r\n[2023-10-20 11:45:13] [error] ( javajni.c:343 ) [29020] Invalid JVM DLL handle.\r\n[2023-10-20 11:45:13] [error] ( javajni.c:343 ) [29020] %1 n’est pas une application Win32 valide.\r\n[2023-10-20 11:45:13] [error] ( javajni.c:344 ) [29020] %1 n’est pas une application Win32 valide.\r\n[2023-10-20 11:45:13] [error] ( javajni.c:416 ) [29020] Failed to load JVM DLL &#39;D:\\Users\\adrien\\.jdks\\openjdk-17.0.2\\bin\\server\\jvm.dll&#39;, home &#39;(null)&#39;.\r\n[2023-10-20 11:45:13] [error] ( javajni.c:416 ) [29020] %1 n’est pas une application Win32 valide.\r\n[2023-10-20 11:45:13] [error] ( prunsrv.c:1465) [29020] Failed creating Java &#39;D:\\Users\\adrien\\.jdks\\openjdk-17.0.2\\bin\\server\\jvm.dll&#39;.\r\n[2023-10-20 11:45:13] [error] ( prunsrv.c:1465) [29020] %1 n’est pas une application Win32 valide.\r\n[2023-10-20 11:45:13] [error] ( prunsrv.c:1854) [29020] ServiceStart returned 1.\r\n[2023-10-20 11:45:13] [error] ( prunsrv.c:1854) [29020] %1 n’est pas une application Win32 valide.\r\n[2023-10-20 11:45:13] [debug] ( prunsrv.c:1127) [29020] reportServiceStatusE: dwCurrentState = 1 (SERVICE_STOPPED), dwWin32ExitCode = 1066, dwWaitHint = 0 milliseconds, dwServiceSpecificExitCode = 1.\r\n[2023-10-20 11:45:13] [info]  ( prunsrv.c:1924) [27080] Run service finished.\r\n[2023-10-20 11:45:13] [info]  ( prunsrv.c:2102) [27080] Apache Commons Daemon procrun finished.\r\n```\r\n\r\n\r\nMy Java home point exactly on the JDK 17 and I don&#39;t know why my service doesn&#39;t start\r\n\r\nI expect a solution for starting correctly my service with JDK 17","title":"Unable to launch jar with apache commons daemon since java 17","body":"<p>I already have an application in Java 8 which started correctly as a windows service with apache commons daemon.\nBut recently by upgrading the application on java 17 I don't know why the application can't be started as a service.</p>\n<p>Anyone have an idea of the problem?\nBelow code for launching with NSIS installer:</p>\n<p><code> ExecWait '$INSTDIR\\MyServer-Service.exe //IS//MyServer-Service --Description=&quot;My Server Service&quot; --Install=$INSTDIR\\MyServer-Service.exe --Jvm=%JAVA_HOME% --Classpath=%CLASSPATH%;$INSTDIR\\my-server.jar --StartMode=jvm --StartClass=com.crimson.core.CsLauncher --StartParams=-conf;$INSTDIR\\conf\\default.json --StopMode=jvm --StopClass=com.crimson.core.CsLauncher --StopMethod=stopService'</code></p>\n<p>and logging by using servicew.exe:</p>\n<pre><code>[2023-10-20 11:45:13] [debug] ( prunsrv.c:2010) [27080] Apache Commons Daemon procrun log initialized.\n[2023-10-20 11:45:13] [info]  ( prunsrv.c:2018) [27080] Apache Commons Daemon procrun (1.3.4.0 32-bit) started.\n[2023-10-20 11:45:13] [info]  ( prunsrv.c:1922) [27080] Running Service 'My-ServerService'...\n[2023-10-20 11:45:13] [debug] ( prunsrv.c:1681) [29020] Inside serviceMain()...\n[2023-10-20 11:45:13] [debug] ( prunsrv.c:1127) [29020] reportServiceStatusE: dwCurrentState = 2 (SERVICE_START_PENDING), dwWin32ExitCode = 0, dwWaitHint = 3000 milliseconds, dwServiceSpecificExitCode = 0.\n[2023-10-20 11:45:13] [info]  ( prunsrv.c:1426) [29020] Starting service...\n[2023-10-20 11:45:13] [debug] ( javajni.c:216 ) [29020] Explicit RuntimeLib specified 'D:\\Users\\adrien\\.jdks\\openjdk-17.0.2\\bin\\server\\jvm.dll'\n[2023-10-20 11:45:13] [debug] ( javajni.c:285 ) [29020] Adding Java bin path to the PATH to fix loading of awt.dll: 'D:\\Users\\adrien\\.jdks\\openjdk-17.0.2\\bin'\n[2023-10-20 11:45:13] [debug] ( javajni.c:291 ) [29020] Loading JVM DLL 'D:\\Users\\adrien\\.jdks\\openjdk-17.0.2\\bin\\server\\jvm.dll'\n[2023-10-20 11:45:13] [error] ( javajni.c:300 ) [29020] Found 'D:\\Users\\adrien\\.jdks\\openjdk-17.0.2\\bin\\server\\jvm.dll' but couldn't load it.\n[2023-10-20 11:45:13] [error] ( javajni.c:300 ) [29020] %1 n’est pas une application Win32 valide.\n[2023-10-20 11:45:13] [debug] ( javajni.c:321 ) [29020] Invalid JVM DLL handle.\n[2023-10-20 11:45:13] [debug] ( javajni.c:322 ) [29020] Loading JVM DLL 'D:\\Users\\adrien\\.jdks\\openjdk-17.0.2\\bin\\server\\jvm.dll' using LOAD_WITH_ALTERED_SEARCH_PATH.\n[2023-10-20 11:45:13] [debug] ( javajni.c:326 ) [29020] Invalid JVM DLL handle.\n[2023-10-20 11:45:13] [debug] ( javajni.c:329 ) [29020] Setting DLL search path to 'D:\\Users\\adrien\\.jdks\\openjdk-17.0.2\\bin\\server\\jvm.dll'\n[2023-10-20 11:45:13] [debug] ( javajni.c:332 ) [29020] Loading JVM DLL 'D:\\Users\\adrien\\.jdks\\openjdk-17.0.2\\bin\\server\\jvm.dll'.\n[2023-10-20 11:45:13] [debug] ( javajni.c:335 ) [29020] Invalid JVM DLL handle.\n[2023-10-20 11:45:13] [debug] ( javajni.c:336 ) [29020] Loading JVM DLL 'D:\\Users\\adrien\\.jdks\\openjdk-17.0.2\\bin\\server\\jvm.dll' using LOAD_WITH_ALTERED_SEARCH_PATH.\n[2023-10-20 11:45:13] [error] ( javajni.c:343 ) [29020] Invalid JVM DLL handle.\n[2023-10-20 11:45:13] [error] ( javajni.c:343 ) [29020] %1 n’est pas une application Win32 valide.\n[2023-10-20 11:45:13] [error] ( javajni.c:344 ) [29020] %1 n’est pas une application Win32 valide.\n[2023-10-20 11:45:13] [error] ( javajni.c:416 ) [29020] Failed to load JVM DLL 'D:\\Users\\adrien\\.jdks\\openjdk-17.0.2\\bin\\server\\jvm.dll', home '(null)'.\n[2023-10-20 11:45:13] [error] ( javajni.c:416 ) [29020] %1 n’est pas une application Win32 valide.\n[2023-10-20 11:45:13] [error] ( prunsrv.c:1465) [29020] Failed creating Java 'D:\\Users\\adrien\\.jdks\\openjdk-17.0.2\\bin\\server\\jvm.dll'.\n[2023-10-20 11:45:13] [error] ( prunsrv.c:1465) [29020] %1 n’est pas une application Win32 valide.\n[2023-10-20 11:45:13] [error] ( prunsrv.c:1854) [29020] ServiceStart returned 1.\n[2023-10-20 11:45:13] [error] ( prunsrv.c:1854) [29020] %1 n’est pas une application Win32 valide.\n[2023-10-20 11:45:13] [debug] ( prunsrv.c:1127) [29020] reportServiceStatusE: dwCurrentState = 1 (SERVICE_STOPPED), dwWin32ExitCode = 1066, dwWaitHint = 0 milliseconds, dwServiceSpecificExitCode = 1.\n[2023-10-20 11:45:13] [info]  ( prunsrv.c:1924) [27080] Run service finished.\n[2023-10-20 11:45:13] [info]  ( prunsrv.c:2102) [27080] Apache Commons Daemon procrun finished.\n</code></pre>\n<p>My Java home point exactly on the JDK 17 and I don't know why my service doesn't start</p>\n<p>I expect a solution for starting correctly my service with JDK 17</p>\n"},{"tags":["java","arrays"],"comments":[{"owner":{"account_id":2485939,"reputation":19426,"user_id":2164365,"accept_rate":40,"display_name":"Abra"},"score":0,"creation_date":1697802588,"post_id":77328924,"comment_id":136328796,"body_markdown":"You wrote (in your question): _Coming from a C++ background_ Speaking from experience, first thing you need to do is [think in Java](https://github.com/media-lib/prog_lib/blob/master/java/Bruce%20Eckel%20-%20Thinking%20in%20Java%204th%20Edition.pdf). I suggest you look at [JavaBeans](https://en.wikipedia.org/wiki/JavaBeans). If _JavaBeans_ is appropriate, then maybe [BeanUtils](https://commons.apache.org/proper/commons-beanutils/) may also be helpful. By the way, as a new SO member, I recommend that you take the [tour] and visit the [help].","body":"You wrote (in your question): <i>Coming from a C++ background</i> Speaking from experience, first thing you need to do is <a href=\"https://github.com/media-lib/prog_lib/blob/master/java/Bruce%20Eckel%20-%20Thinking%20in%20Java%204th%20Edition.pdf\" rel=\"nofollow noreferrer\">think in Java</a>. I suggest you look at <a href=\"https://en.wikipedia.org/wiki/JavaBeans\" rel=\"nofollow noreferrer\">JavaBeans</a>. If <i>JavaBeans</i> is appropriate, then maybe <a href=\"https://commons.apache.org/proper/commons-beanutils/\" rel=\"nofollow noreferrer\">BeanUtils</a> may also be helpful. By the way, as a new SO member, I recommend that you take the <a href=\"https://stackoverflow.com/tour\">tour</a> and visit the <a href=\"https://stackoverflow.com/help\">help center</a>."},{"owner":{"account_id":2485939,"reputation":19426,"user_id":2164365,"accept_rate":40,"display_name":"Abra"},"score":0,"creation_date":1697802940,"post_id":77328924,"comment_id":136328861,"body_markdown":"You wrote (in your question): _My goal is to export this list of persons into a table which should be easily_ ___expendable___ I think you mean _expAndable_ One letter difference, but two entirely different words.","body":"You wrote (in your question): <i>My goal is to export this list of persons into a table which should be easily</i> <b><i>expendable</i></b> I think you mean <i>expAndable</i> One letter difference, but two entirely different words."}],"answers":[{"tags":[],"owner":{"account_id":2485939,"reputation":19426,"user_id":2164365,"accept_rate":40,"display_name":"Abra"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1697806434,"creation_date":1697805603,"answer_id":77330993,"question_id":77328924,"body_markdown":"You wrote (in your question):\r\n&gt; I imagine something like a function pointer\r\n\r\nAs far as I know, Java does not have function pointers. Instead you create an [interface][1].\r\n\r\nYou also wrote (in your question):\r\n&gt;a function pointer which I can store in the array\r\n\r\nI think you mean a [map][2] where the map key is the name of the attribute (in class `Person`) and the map value is an object that implements the interface.\r\n\r\nIn fact, there is already an existing interface, i.e. [Function][3], that is what you require. And since `Function` is a _functional_ interface, it can be implemented via a [lambda expression][4].\r\n\r\nHere is a small example demonstrating the above:\r\n```java\r\nimport java.lang.reflect.Field;\r\nimport java.util.ArrayList;\r\nimport java.util.HashMap;\r\nimport java.util.List;\r\nimport java.util.Map;\r\nimport java.util.function.Function;\r\n\r\npublic class Person {\r\n    private String name;\r\n    private int age;\r\n    private Address address;\r\n\r\n    public Person(String name, int age, Address address) {\r\n        this.name = name;\r\n        this.age = age;\r\n        this.address = address;\r\n    }\r\n\r\n    public Address getAddress() {\r\n        return address;\r\n    }\r\n\r\n    public int getAge() {\r\n        return age;\r\n    }\r\n\r\n    public String getName() {\r\n        return name;\r\n    }\r\n\r\n    public static void main(String[] args) {\r\n        Map&lt;String, Function&lt;Person, String&gt;&gt; converters = new HashMap&lt;&gt;();\r\n        Function&lt;Person, String&gt; convertName = p -&gt; p.getName();\r\n        Function&lt;Person, String&gt; convertAge = p -&gt; String.valueOf(p.getAge());\r\n        Function&lt;Person, String&gt; convertAddress = p -&gt; p.getAddress().toString();\r\n        converters.put(&quot;name&quot;, convertName);\r\n        converters.put(&quot;age&quot;, convertAge);\r\n        converters.put(&quot;address&quot;, convertAddress);\r\n        List&lt;Person&gt; persons = List.of(new Person(&quot;John&quot;, 45, new Address(813, &quot;Howard street&quot;, &quot;Oswego&quot;)),\r\n                                       new Person(&quot;Marc&quot;, 27, new Address(123, &quot;&quot;, &quot;Hogwarts&quot;)));\r\n        Class&lt;?&gt; personClass = Person.class;\r\n        Field[] fields = personClass.getDeclaredFields();\r\n        List&lt;String&gt; fieldNames = new ArrayList&lt;&gt;();\r\n        for (Field field : fields) {\r\n            String fieldName = field.getName();\r\n            fieldNames.add(fieldName);\r\n        }\r\n        for (Person person : persons) {\r\n            for (String fieldName : fieldNames) {\r\n                Function&lt;Person, String&gt; lambda = converters.get(fieldName);\r\n                if (lambda != null) {\r\n                    System.out.println(lambda.apply(person));\r\n                }\r\n            }\r\n        }\r\n    }\r\n}\r\n\r\nrecord Address(int number, String street, String city) {\r\n    \r\n}\r\n```\r\nThe above code uses [records][5], only to allow me to write a bit less code. It also uses [reflection][6] to get the names of all the attributes in class `Person`. It also uses [generics][7] &amp;ndash; which [I believe] is equivalent to *templates* in C++. It also adheres to [Java naming conventions][8].\r\n\r\nRunning the above code produces the following:  \r\n(Java 21 on Windows 10)\r\n```none\r\nJohn\r\n45\r\nAddress[number=813, street=Howard street, city=Oswego]\r\nMarc\r\n27\r\nAddress[number=123, street=, city=Hogwarts]\r\n```\r\n\r\n\r\n  [1]: https://docs.oracle.com/javase/tutorial/java/concepts/interface.html\r\n  [2]: https://docs.oracle.com/javase/tutorial/collections/interfaces/map.html\r\n  [3]: https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/function/Function.html\r\n  [4]: https://docs.oracle.com/javase/tutorial/java/javaOO/lambdaexpressions.html\r\n  [5]: https://openjdk.org/jeps/395\r\n  [6]: https://docs.oracle.com/javase/tutorial/reflect/index.html\r\n  [7]: https://docs.oracle.com/javase/tutorial/java/generics/index.html\r\n  [8]: https://www.oracle.com/java/technologies/javase/codeconventions-namingconventions.html","title":"How can I store references to member instances and their corresponding conversion functions in an array?","body":"<p>You wrote (in your question):</p>\n<blockquote>\n<p>I imagine something like a function pointer</p>\n</blockquote>\n<p>As far as I know, Java does not have function pointers. Instead you create an <a href=\"https://docs.oracle.com/javase/tutorial/java/concepts/interface.html\" rel=\"nofollow noreferrer\">interface</a>.</p>\n<p>You also wrote (in your question):</p>\n<blockquote>\n<p>a function pointer which I can store in the array</p>\n</blockquote>\n<p>I think you mean a <a href=\"https://docs.oracle.com/javase/tutorial/collections/interfaces/map.html\" rel=\"nofollow noreferrer\">map</a> where the map key is the name of the attribute (in class <code>Person</code>) and the map value is an object that implements the interface.</p>\n<p>In fact, there is already an existing interface, i.e. <a href=\"https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/function/Function.html\" rel=\"nofollow noreferrer\">Function</a>, that is what you require. And since <code>Function</code> is a <em>functional</em> interface, it can be implemented via a <a href=\"https://docs.oracle.com/javase/tutorial/java/javaOO/lambdaexpressions.html\" rel=\"nofollow noreferrer\">lambda expression</a>.</p>\n<p>Here is a small example demonstrating the above:</p>\n<pre class=\"lang-java prettyprint-override\"><code>import java.lang.reflect.Field;\nimport java.util.ArrayList;\nimport java.util.HashMap;\nimport java.util.List;\nimport java.util.Map;\nimport java.util.function.Function;\n\npublic class Person {\n    private String name;\n    private int age;\n    private Address address;\n\n    public Person(String name, int age, Address address) {\n        this.name = name;\n        this.age = age;\n        this.address = address;\n    }\n\n    public Address getAddress() {\n        return address;\n    }\n\n    public int getAge() {\n        return age;\n    }\n\n    public String getName() {\n        return name;\n    }\n\n    public static void main(String[] args) {\n        Map&lt;String, Function&lt;Person, String&gt;&gt; converters = new HashMap&lt;&gt;();\n        Function&lt;Person, String&gt; convertName = p -&gt; p.getName();\n        Function&lt;Person, String&gt; convertAge = p -&gt; String.valueOf(p.getAge());\n        Function&lt;Person, String&gt; convertAddress = p -&gt; p.getAddress().toString();\n        converters.put(&quot;name&quot;, convertName);\n        converters.put(&quot;age&quot;, convertAge);\n        converters.put(&quot;address&quot;, convertAddress);\n        List&lt;Person&gt; persons = List.of(new Person(&quot;John&quot;, 45, new Address(813, &quot;Howard street&quot;, &quot;Oswego&quot;)),\n                                       new Person(&quot;Marc&quot;, 27, new Address(123, &quot;&quot;, &quot;Hogwarts&quot;)));\n        Class&lt;?&gt; personClass = Person.class;\n        Field[] fields = personClass.getDeclaredFields();\n        List&lt;String&gt; fieldNames = new ArrayList&lt;&gt;();\n        for (Field field : fields) {\n            String fieldName = field.getName();\n            fieldNames.add(fieldName);\n        }\n        for (Person person : persons) {\n            for (String fieldName : fieldNames) {\n                Function&lt;Person, String&gt; lambda = converters.get(fieldName);\n                if (lambda != null) {\n                    System.out.println(lambda.apply(person));\n                }\n            }\n        }\n    }\n}\n\nrecord Address(int number, String street, String city) {\n    \n}\n</code></pre>\n<p>The above code uses <a href=\"https://openjdk.org/jeps/395\" rel=\"nofollow noreferrer\">records</a>, only to allow me to write a bit less code. It also uses <a href=\"https://docs.oracle.com/javase/tutorial/reflect/index.html\" rel=\"nofollow noreferrer\">reflection</a> to get the names of all the attributes in class <code>Person</code>. It also uses <a href=\"https://docs.oracle.com/javase/tutorial/java/generics/index.html\" rel=\"nofollow noreferrer\">generics</a> – which [I believe] is equivalent to <em>templates</em> in C++. It also adheres to <a href=\"https://www.oracle.com/java/technologies/javase/codeconventions-namingconventions.html\" rel=\"nofollow noreferrer\">Java naming conventions</a>.</p>\n<p>Running the above code produces the following:<br />\n(Java 21 on Windows 10)</p>\n<pre class=\"lang-none prettyprint-override\"><code>John\n45\nAddress[number=813, street=Howard street, city=Oswego]\nMarc\n27\nAddress[number=123, street=, city=Hogwarts]\n</code></pre>\n"}],"owner":{"account_id":29713762,"reputation":1,"user_id":22772745,"display_name":"Dominic x"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":49,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1697806434,"creation_date":1697785613,"question_id":77328924,"body_markdown":"I have a collection of objects, specifically a list of individuals, each with various instance variables. These variables include attributes such as name, age, and address etc. My goal is to export this list of persons into a table which should be easily expendable. \r\n\r\nI imagine an array where I can input all the _getter_ functions and then I can iterate over the array and output the corresponding result. \r\n\r\nFor example the `Person` class:\r\n```java\r\npublic class Person\r\n{  \r\n  private String name\r\n  private integer age;\r\n  private Address address;\r\n  // More variables\r\n  // Getter and setters\r\n}\r\n```\r\nThe `Exporter` function\r\n```java\r\nimaginay_Array = {\r\n                   {Person::name, convert_name()},\r\n                   {Person::age, convert_age()},\r\n                   {Person::address, convert_address()}\r\n                 };\r\n\r\n\r\npublic static void export(List&lt;Person&gt; persons) {\r\n  /// Write headers of table\r\n  /// ...\r\n  ///\r\n\r\n\r\n  for (Person person : persons) {\r\n    for (XXX variable : imaginay_Array) {\r\n      writeCell(person.variable())\r\n    }\r\n  }\r\n}\r\n```\r\nIn the end I expect something like this:\r\n\r\n| Name | Age | Address |\r\n| -------- | -------- |-------- |\r\n| John  | 45   | 813 Howard Street Oswego NY 13126 |\r\n| Marc | 27 | 123 Hogwarts |\r\n\r\nAnd if I later need more fields exported then I can just add them to the array.\r\n\r\nComing from a C++ background I imagine something like a function pointer which I can store in the array.\r\n","title":"How can I store references to member instances and their corresponding conversion functions in an array?","body":"<p>I have a collection of objects, specifically a list of individuals, each with various instance variables. These variables include attributes such as name, age, and address etc. My goal is to export this list of persons into a table which should be easily expendable.</p>\n<p>I imagine an array where I can input all the <em>getter</em> functions and then I can iterate over the array and output the corresponding result.</p>\n<p>For example the <code>Person</code> class:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class Person\n{  \n  private String name\n  private integer age;\n  private Address address;\n  // More variables\n  // Getter and setters\n}\n</code></pre>\n<p>The <code>Exporter</code> function</p>\n<pre class=\"lang-java prettyprint-override\"><code>imaginay_Array = {\n                   {Person::name, convert_name()},\n                   {Person::age, convert_age()},\n                   {Person::address, convert_address()}\n                 };\n\n\npublic static void export(List&lt;Person&gt; persons) {\n  /// Write headers of table\n  /// ...\n  ///\n\n\n  for (Person person : persons) {\n    for (XXX variable : imaginay_Array) {\n      writeCell(person.variable())\n    }\n  }\n}\n</code></pre>\n<p>In the end I expect something like this:</p>\n<div class=\"s-table-container\">\n<table class=\"s-table\">\n<thead>\n<tr>\n<th>Name</th>\n<th>Age</th>\n<th>Address</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>John</td>\n<td>45</td>\n<td>813 Howard Street Oswego NY 13126</td>\n</tr>\n<tr>\n<td>Marc</td>\n<td>27</td>\n<td>123 Hogwarts</td>\n</tr>\n</tbody>\n</table>\n</div>\n<p>And if I later need more fields exported then I can just add them to the array.</p>\n<p>Coming from a C++ background I imagine something like a function pointer which I can store in the array.</p>\n"},{"tags":["java","process","inputstream","outputstream"],"comments":[{"owner":{"account_id":2053598,"reputation":41316,"user_id":1831987,"display_name":"VGR"},"score":0,"creation_date":1697819322,"post_id":77331038,"comment_id":136331940,"body_markdown":"You should change while(p.isAlive()); to `while (p.isAlive()) { Thread.onSpinWait(); }`.  [Thread.onSpinWait](https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Thread.html#onSpinWait()) exists for exactly this purpose.","body":"You should change while(p.isAlive()); to <code>while (p.isAlive()) { Thread.onSpinWait(); }</code>.  <a href=\"https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Thread.html#onSpinWait()\" rel=\"nofollow noreferrer\">Thread.onSpinWait</a> exists for exactly this purpose."},{"owner":{"account_id":5998820,"reputation":12656,"user_id":4712734,"display_name":"DuncG"},"score":0,"creation_date":1697819833,"post_id":77331038,"comment_id":136332016,"body_markdown":"The delete works every time for me. Which JDK have you tested with?","body":"The delete works every time for me. Which JDK have you tested with?"},{"owner":{"account_id":19931278,"reputation":129,"user_id":15095576,"display_name":"user12345"},"score":0,"creation_date":1697849901,"post_id":77331038,"comment_id":136335477,"body_markdown":"@DuncG, running `11.0.19+9`on Windows","body":"@DuncG, running <code>11.0.19+9</code>on Windows"},{"owner":{"account_id":19931278,"reputation":129,"user_id":15095576,"display_name":"user12345"},"score":0,"creation_date":1697851154,"post_id":77331038,"comment_id":136335531,"body_markdown":"@Computable I noticed that the delete consistently succeeds even if I have a simple for loop. Like so\n`for(int i = 0; i &lt; 1000000; i++);Files.delete(stdout);`","body":"@Computable I noticed that the delete consistently succeeds even if I have a simple for loop. Like so <code>for(int i = 0; i &lt; 1000000; i++);Files.delete(stdout);</code>"}],"owner":{"account_id":19931278,"reputation":129,"user_id":15095576,"display_name":"user12345"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":79,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":0,"score":0,"last_activity_date":1697805985,"creation_date":1697805985,"question_id":77331038,"body_markdown":"On Windows, I am creating subprocess via `java.lang.ProcessBuilder`. On trying to cleanup the process and its standard output log file if my caller function is interrupted, I get error &quot;The process cannot access the file because it is being used by another process&quot;. I am ensuring that I destroy the subprocess first and then delete the logfile.\r\n\r\nQuestion - Are there any best practices when cleaning up processes and log files that are platform agnostic?\r\n\r\nHere is a reproducible example for Windows.\r\n\r\n\r\nBelow snippet is creating a subprocess.\r\n```java\r\npublic class UndeletableFileExample {\r\n    public static void func() throws IOException {\r\n        ProcessBuilder pb = null;\r\n        Path stdout = null;\r\n        Process p = null;\r\n        long bufferTimeSecs = 30L;\r\n        try {\r\n            stdout = Files.createTempFile(&quot;example&quot;, &quot;.log&quot;);\r\n            pb = new ProcessBuilder(&quot;loop.cmd&quot;);\r\n            pb.redirectErrorStream(true);\r\n            pb.redirectOutput(stdout.toFile());\r\n            p = pb.start();\r\n            p.waitFor(bufferTimeSecs, TimeUnit.SECONDS);\r\n            p.destroy();\r\n            p.waitFor(bufferTimeSecs, TimeUnit.SECONDS);\r\n            p.destroyForcibly();\r\n            String out = Files.readString(stdout);\r\n            int exitcode = p.exitValue();\r\n            if(exitcode != 0) {\r\n                throw new RuntimeException(&quot;Exited with code &quot; + exitcode);\r\n            }\r\n            System.out.println(out);\r\n        }\r\n        catch(InterruptedException e) {\r\n            Thread.currentThread().interrupt();\r\n            throw new RuntimeException(&quot;interrupted!&quot;);\r\n        }\r\n        finally {\r\n            if(p != null) {\r\n                p = p.destroyForcibly();\r\n                while(p.isAlive()); // Is this while loop a potential problem?\r\n                System.out.println(p.exitValue());\r\n            }\r\n            if(stdout != null) {\r\n                Files.delete(stdout);\r\n            }\r\n        }\r\n    }\r\n}\r\n```  \r\n\r\nBelow snippet is for the for-loop file &quot;loop.cmd&quot;. It will print numbers from 1 till 1e5. This takes a good 20-30 seconds on my machine.\r\n```cmd\r\nFOR /L %%i IN (1,1,100000) DO echo %%i\r\n```\r\n\r\nBelow snippet is for the main program that does the simulation.\r\n```java\r\npublic class Demo {\r\n    public static void main(String[] args) throws InterruptedException {\r\n        Thread t = new Thread() {\r\n            @Override\r\n            public void run() {\r\n                try {\r\n                    UndeletableFileExample.func();\r\n                } catch (IOException e) {\r\n                    throw new RuntimeException(e);\r\n                }\r\n            }\r\n        };\r\n        t.start();\r\n        Thread.sleep(2000L);\r\n        t.interrupt();\r\n        t.join();\r\n    }\r\n}\r\n```\r\n\r\nI also have access to a MacOS machine. I didn&#39;t encounter any problem there in cleaning up the process and the logfile on a thread interrupt.\r\n\r\nThe loop example for MacOS changes to - \r\n```bash\r\nfor i in `seq 1 1000000`; do echo $i; done\r\n```\r\n\r\nThe exact error on Windows is as follows - \r\n```text\r\nException in thread &quot;Thread-0&quot; java.lang.RuntimeException: java.nio.file.FileSystemException: &lt;...&gt;\\example1234.log: The process cannot access the file because it is being used by another process. \r\n```\r\n","title":"Java - Unable to delete temporary output file for Process on Windows","body":"<p>On Windows, I am creating subprocess via <code>java.lang.ProcessBuilder</code>. On trying to cleanup the process and its standard output log file if my caller function is interrupted, I get error &quot;The process cannot access the file because it is being used by another process&quot;. I am ensuring that I destroy the subprocess first and then delete the logfile.</p>\n<p>Question - Are there any best practices when cleaning up processes and log files that are platform agnostic?</p>\n<p>Here is a reproducible example for Windows.</p>\n<p>Below snippet is creating a subprocess.</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class UndeletableFileExample {\n    public static void func() throws IOException {\n        ProcessBuilder pb = null;\n        Path stdout = null;\n        Process p = null;\n        long bufferTimeSecs = 30L;\n        try {\n            stdout = Files.createTempFile(&quot;example&quot;, &quot;.log&quot;);\n            pb = new ProcessBuilder(&quot;loop.cmd&quot;);\n            pb.redirectErrorStream(true);\n            pb.redirectOutput(stdout.toFile());\n            p = pb.start();\n            p.waitFor(bufferTimeSecs, TimeUnit.SECONDS);\n            p.destroy();\n            p.waitFor(bufferTimeSecs, TimeUnit.SECONDS);\n            p.destroyForcibly();\n            String out = Files.readString(stdout);\n            int exitcode = p.exitValue();\n            if(exitcode != 0) {\n                throw new RuntimeException(&quot;Exited with code &quot; + exitcode);\n            }\n            System.out.println(out);\n        }\n        catch(InterruptedException e) {\n            Thread.currentThread().interrupt();\n            throw new RuntimeException(&quot;interrupted!&quot;);\n        }\n        finally {\n            if(p != null) {\n                p = p.destroyForcibly();\n                while(p.isAlive()); // Is this while loop a potential problem?\n                System.out.println(p.exitValue());\n            }\n            if(stdout != null) {\n                Files.delete(stdout);\n            }\n        }\n    }\n}\n</code></pre>\n<p>Below snippet is for the for-loop file &quot;loop.cmd&quot;. It will print numbers from 1 till 1e5. This takes a good 20-30 seconds on my machine.</p>\n<pre><code>FOR /L %%i IN (1,1,100000) DO echo %%i\n</code></pre>\n<p>Below snippet is for the main program that does the simulation.</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class Demo {\n    public static void main(String[] args) throws InterruptedException {\n        Thread t = new Thread() {\n            @Override\n            public void run() {\n                try {\n                    UndeletableFileExample.func();\n                } catch (IOException e) {\n                    throw new RuntimeException(e);\n                }\n            }\n        };\n        t.start();\n        Thread.sleep(2000L);\n        t.interrupt();\n        t.join();\n    }\n}\n</code></pre>\n<p>I also have access to a MacOS machine. I didn't encounter any problem there in cleaning up the process and the logfile on a thread interrupt.</p>\n<p>The loop example for MacOS changes to -</p>\n<pre class=\"lang-bash prettyprint-override\"><code>for i in `seq 1 1000000`; do echo $i; done\n</code></pre>\n<p>The exact error on Windows is as follows -</p>\n<pre><code>Exception in thread &quot;Thread-0&quot; java.lang.RuntimeException: java.nio.file.FileSystemException: &lt;...&gt;\\example1234.log: The process cannot access the file because it is being used by another process. \n</code></pre>\n"},{"tags":["java","mongodb","spring-boot","criteria","mongotemplate"],"comments":[{"owner":{"account_id":5951494,"reputation":12969,"user_id":4679320,"accept_rate":67,"display_name":"prasad_"},"score":0,"creation_date":1589027368,"post_id":61695664,"comment_id":109131216,"body_markdown":"To run an Aggregation query as you are trying in `db.employee.aggregate([{$match:{&quot;code&quot; : &quot;DEVELOPER&quot;}}, ...`, you have to use the `MongoTemplate.aggregate` method (not the `find` method).","body":"To run an Aggregation query as you are trying in <code>db.employee.aggregate([{$match:{&quot;code&quot; : &quot;DEVELOPER&quot;}}, ...</code>, you have to use the <code>MongoTemplate.aggregate</code> method (not the <code>find</code> method)."},{"owner":{"account_id":5268074,"reputation":17816,"user_id":4207306,"display_name":"Eklavya"},"score":0,"creation_date":1589028654,"post_id":61695664,"comment_id":109131687,"body_markdown":"@prasad_ But there is no problem using find query which one OP tried.Have a look","body":"@prasad_ But there is no problem using find query which one OP tried.Have a look"},{"owner":{"account_id":5951494,"reputation":12969,"user_id":4679320,"accept_rate":67,"display_name":"prasad_"},"score":0,"creation_date":1589031817,"post_id":61695664,"comment_id":109132933,"body_markdown":"@Eklavya The `find` query wont give the same result as that of the aggregate query.","body":"@Eklavya The <code>find</code> query wont give the same result as that of the aggregate query."},{"owner":{"account_id":5268074,"reputation":17816,"user_id":4207306,"display_name":"Eklavya"},"score":0,"creation_date":1589034556,"post_id":61695664,"comment_id":109134093,"body_markdown":"@prasad_ I won&#39;t say about aggregate query I am saying find query is okay .","body":"@prasad_ I won&#39;t say about aggregate query I am saying find query is okay ."},{"owner":{"account_id":12676758,"reputation":94,"user_id":9212165,"accept_rate":20,"display_name":"M N"},"score":0,"creation_date":1589041341,"post_id":61695664,"comment_id":109137222,"body_markdown":"@prasad_ Can you help me to convert that **mongo native query** to **mongotemplate** aggregate query","body":"@prasad_ Can you help me to convert that <b>mongo native query</b> to <b>mongotemplate</b> aggregate query"},{"owner":{"account_id":5951494,"reputation":12969,"user_id":4679320,"accept_rate":67,"display_name":"prasad_"},"score":1,"creation_date":1589162215,"post_id":61695664,"comment_id":109174811,"body_markdown":"You can use the answer in this post as an example to use **springdata+mongodb** with **aggregate+project+filter**: [Create filter aggregation in spring](https://stackoverflow.com/questions/46767750/create-filter-aggregation-in-spring) To use **regex** use syntax like this: `Pattern p = Pattern.compile(&quot;ja&quot;, Pattern.CASE_INSENSITIVE); Criteria c = Criteria.where(&quot;someField&quot;).regex(p);`","body":"You can use the answer in this post as an example to use <b>springdata+mongodb</b> with <b>aggregate+project+filter</b>: <a href=\"https://stackoverflow.com/questions/46767750/create-filter-aggregation-in-spring\">Create filter aggregation in spring</a> To use <b>regex</b> use syntax like this: <code>Pattern p = Pattern.compile(&quot;ja&quot;, Pattern.CASE_INSENSITIVE); Criteria c = Criteria.where(&quot;someField&quot;).regex(p);</code>"}],"owner":{"account_id":12676758,"reputation":94,"user_id":9212165,"accept_rate":20,"display_name":"M N"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":332,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1697805238,"creation_date":1589022130,"question_id":61695664,"body_markdown":"I want to create spring boot repository query using mongo db. I have collection name as **qualification**\r\n\r\n```\r\n{\r\n    &quot;code&quot;: &quot;DEVELOPER&quot;,\r\n    &quot;description&quot;: &quot;Software Developer&quot;,\r\n    &quot;status&quot;: &quot;ACTIVE&quot;,\r\n    &quot;listItems&quot;: [\r\n        {\r\n            &quot;itemId&quot;: &quot;JAVA&quot;,\r\n            &quot;item&quot;: &quot;Java&quot;\r\n        },\r\n        {\r\n            &quot;itemId&quot;: &quot;PYTHON&quot;,\r\n            &quot;item&quot;: &quot;Python&quot;\r\n        },\r\n        {\r\n            &quot;itemId&quot;: &quot;PHP&quot;,\r\n            &quot;item&quot;: &quot;Php&quot;\r\n        },\r\n        {\r\n            &quot;itemId&quot;: &quot;JAVASCRIPT&quot;,\r\n            &quot;item&quot;: &quot;Javascript&quot;\r\n        }\r\n    ],\r\n    &quot;returncode&quot;: &quot;00000&quot;,\r\n    &quot;message&quot;: &quot;Data Available&quot;\r\n}\r\n```\r\nI tried the below query to get whatever matches this pattern *ja*,\r\n\r\n```\r\ndb.employee.aggregate([{$match:{&quot;code&quot; : &quot;DEVELOPER&quot;}},\r\n{$project : {listItems:{$filter:{\r\n    input: &quot;$listItems&quot;,\r\n               as: &quot;listItems&quot;,\r\n               cond: { $regexMatch:{\r\n                        input:&quot;$$listItems.item&quot;,\r\n                        regex: /ja/i}  }\r\n}}}}])\r\n```\r\n\r\nand i got exact answer as,\r\n```\r\n{\r\n    &quot;code&quot;: &quot;DEVELOPER&quot;,\r\n    &quot;description&quot;: &quot;Software Developer&quot;,\r\n    &quot;status&quot;: &quot;ACTIVE&quot;,\r\n    &quot;listItems&quot;: [\r\n        {\r\n            &quot;itemId&quot;: &quot;JAVA&quot;,\r\n            &quot;item&quot;: &quot;Java&quot;\r\n        },\r\n        {\r\n            &quot;itemId&quot;: &quot;JAVASCRIPT&quot;,\r\n            &quot;item&quot;: &quot;Javascript&quot;\r\n        }\r\n    ],\r\n    &quot;returncode&quot;: &quot;00000&quot;,\r\n    &quot;message&quot;: &quot;Data Available&quot;\r\n}\r\n```\r\nBut when i tried in java using mongotemplate and got NULL pointer exception and didn&#39;t get any output\r\n\r\n```\r\npublic List&lt;ListValue&gt; findAllByCode(String code,String item) {\r\n\t\t   Query query = new Query();\r\n\t\t   query.addCriteria(Criteria.where(&quot;code&quot;).is(code).and(&quot;listItems.item&quot;).regex(&quot;^&quot; + item + &quot;$&quot;, &quot;i&quot;));\r\n\t\t  \r\n\t\t   return mongoTemplate.find(query, ListValue.class);\r\n\t\t}\r\n```\r\n","title":"How to Create an Aggregation Query Using Spring Boot Repository in MongoDB?","body":"<p>I want to create spring boot repository query using mongo db. I have collection name as <strong>qualification</strong></p>\n\n<pre><code>{\n    \"code\": \"DEVELOPER\",\n    \"description\": \"Software Developer\",\n    \"status\": \"ACTIVE\",\n    \"listItems\": [\n        {\n            \"itemId\": \"JAVA\",\n            \"item\": \"Java\"\n        },\n        {\n            \"itemId\": \"PYTHON\",\n            \"item\": \"Python\"\n        },\n        {\n            \"itemId\": \"PHP\",\n            \"item\": \"Php\"\n        },\n        {\n            \"itemId\": \"JAVASCRIPT\",\n            \"item\": \"Javascript\"\n        }\n    ],\n    \"returncode\": \"00000\",\n    \"message\": \"Data Available\"\n}\n</code></pre>\n\n<p>I tried the below query to get whatever matches this pattern <em>ja</em>,</p>\n\n<pre><code>db.employee.aggregate([{$match:{\"code\" : \"DEVELOPER\"}},\n{$project : {listItems:{$filter:{\n    input: \"$listItems\",\n               as: \"listItems\",\n               cond: { $regexMatch:{\n                        input:\"$$listItems.item\",\n                        regex: /ja/i}  }\n}}}}])\n</code></pre>\n\n<p>and i got exact answer as,</p>\n\n<pre><code>{\n    \"code\": \"DEVELOPER\",\n    \"description\": \"Software Developer\",\n    \"status\": \"ACTIVE\",\n    \"listItems\": [\n        {\n            \"itemId\": \"JAVA\",\n            \"item\": \"Java\"\n        },\n        {\n            \"itemId\": \"JAVASCRIPT\",\n            \"item\": \"Javascript\"\n        }\n    ],\n    \"returncode\": \"00000\",\n    \"message\": \"Data Available\"\n}\n</code></pre>\n\n<p>But when i tried in java using mongotemplate and got NULL pointer exception and didn't get any output</p>\n\n<pre><code>public List&lt;ListValue&gt; findAllByCode(String code,String item) {\n           Query query = new Query();\n           query.addCriteria(Criteria.where(\"code\").is(code).and(\"listItems.item\").regex(\"^\" + item + \"$\", \"i\"));\n\n           return mongoTemplate.find(query, ListValue.class);\n        }\n</code></pre>\n"},{"tags":["java","spring","jhipster","jhipster-gateway"],"comments":[{"owner":{"account_id":33534,"reputation":16098,"user_id":93960,"display_name":"Ga&#235;l Marziou"},"score":0,"creation_date":1697881305,"post_id":77330911,"comment_id":136337203,"body_markdown":"You should post an issue on github. Probably a bug about websockets, have you tried removing websocket from your JDL?","body":"You should post an issue on github. Probably a bug about websockets, have you tried removing websocket from your JDL?"},{"owner":{"account_id":1754832,"reputation":687,"user_id":1603120,"accept_rate":83,"display_name":"Vicky"},"score":0,"creation_date":1698298666,"post_id":77330911,"comment_id":136387924,"body_markdown":"Not sure if its a bug or my understanding problem. I removed web socket from the jdl and now I get different problem in gateway application build. reactor.core.Exceptions$ErrorCallbackNotImplemented: java.lang.IllegalArgumentException: Unable to find GatewayFilterFactory with name TokenRelay\nCaused by: java.lang.IllegalArgumentException: Unable to find GatewayFilterFactory with name TokenRelay","body":"Not sure if its a bug or my understanding problem. I removed web socket from the jdl and now I get different problem in gateway application build. reactor.core.Exceptions$ErrorCallbackNotImplemented: java.lang.IllegalArgumentException: Unable to find GatewayFilterFactory with name TokenRelay Caused by: java.lang.IllegalArgumentException: Unable to find GatewayFilterFactory with name TokenRelay"}],"owner":{"account_id":1754832,"reputation":687,"user_id":1603120,"accept_rate":83,"display_name":"Vicky"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":31,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1697804807,"creation_date":1697804807,"question_id":77330911,"body_markdown":"I am getting following error:\r\n\r\n*Error starting ApplicationContext. To display the condition evaluation report re-run your application with &#39;debug&#39; enabled.\r\n2023-10-20T17:33:24.634+05:30 ERROR 28508 --- [  restartedMain] o.s.boot.SpringApplication               : Application run failed\r\norg.springframework.beans.factory.BeanCreationException: Error creating bean with name &#39;stompWebSocketHandlerMapping&#39; defined in class path resource [org/springframework/web/socket/config/annotation/DelegatingWebSocketMessageBrokerConfiguration.class]: Failed to instantiate [org.springframework.web.servlet.HandlerMapping]: Factory method &#39;stompWebSocketHandlerMapping&#39; threw exception with message: jakarta/websocket/Endpoint*\r\n\r\nHere is my jdl for reference:\r\n\r\n        application {\r\n          config {\r\n            enableTranslation true\r\n            applicationType gateway\r\n            serviceDiscoveryType consul\r\n            languages [en, hi, te]\r\n            nativeLanguage en\r\n            packageName in.beze.pc\r\n            testFrameworks [gatling, cucumber, protractor]\r\n            websocket spring-websocket\r\n            baseName pc\r\n            serverPort 8080\r\n            jhiPrefix sys\r\n            prodDatabaseType postgresql\r\n            devDatabaseType postgresql\r\n            databaseType sql\r\n            cacheProvider ehcache\r\n            enableHibernateCache true\r\n            authenticationType session\r\n            buildTool gradle\r\n            clientPackageManager npm\r\n            clientFramework angularX\r\n          }\r\n          entities *\r\n        }\r\n        \r\n        application {\r\n          config {\r\n            baseName masters\r\n            applicationType microservice\r\n            packageName in.beze.masters\r\n            serviceDiscoveryType consul\r\n            authenticationType session\r\n            prodDatabaseType postgresql\r\n            devDatabaseType postgresql\r\n            databaseType sql\r\n            buildTool gradle\r\n            serverPort 8081\r\n            skipUserManagement true\r\n        \tcacheProvider ehcache\r\n            enableHibernateCache true\r\n        \twebsocket spring-websocket\r\n          }\r\n          entities Attachment, ContentType, Equipment, EquipmentType, FacilityType, FacilityGroupType, FacilityGroup, Facility, FacilityHistory, FacilityUser, FacilityAttachment, FacilityEquipment, FrequencyType, Frequency, Gender, JobSandbox, Language, Party, Permission, PermissionAuthority, ProductStoreType, ProductStore, ProductStoreFacility, ProductStoreUserGroup, Responsibility, RoleType, Scheduler, StatusCategory, Status, StatusValidChange, UserRole, UserGroup, UserGroupAuthority, UserGroupMember, Uom, UomType, UserAttachment, SystemParameters, QRCode, QRCodeType, QRCodeAttachment, Product, ProductType, ProductCategoryType, ProductCategory, ProductCategoryMember, Stage, ProductSpecGroup, ProductSpec, ProductSpecItem, StabilityCondition, StabilityConditionAttachment\r\n        }\r\n    \r\n    application {\r\n      config {\r\n        baseName stability\r\n        applicationType microservice\r\n        packageName in.beze.stability\r\n        serviceDiscoveryType consul\r\n        authenticationType session\r\n        prodDatabaseType postgresql\r\n        devDatabaseType postgresql\r\n        databaseType sql\r\n        buildTool gradle\r\n        serverPort 8082\r\n        skipUserManagement true\r\n    \tcacheProvider ehcache\r\n        enableHibernateCache true\r\n        websocket spring-websocket\r\n      }\r\n      entities StAttachment, StContentType, AnalysisType, SpEquipment, SsEquipment, SpProductSpec, StabilityProgramme, StabilityAttachment, SampleType, StabilitySample, SampleResult, SampleAttachment, SampleResultAttachment, EquipmentSc\r\n    }\r\n\r\nI have tried different java versions and couldn&#39;t get it up and running.\r\n","title":"jHipster Release 8.0.0-rc.1: Unable to run gateway app","body":"<p>I am getting following error:</p>\n<p><em>Error starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.\n2023-10-20T17:33:24.634+05:30 ERROR 28508 --- [  restartedMain] o.s.boot.SpringApplication               : Application run failed\norg.springframework.beans.factory.BeanCreationException: Error creating bean with name 'stompWebSocketHandlerMapping' defined in class path resource [org/springframework/web/socket/config/annotation/DelegatingWebSocketMessageBrokerConfiguration.class]: Failed to instantiate [org.springframework.web.servlet.HandlerMapping]: Factory method 'stompWebSocketHandlerMapping' threw exception with message: jakarta/websocket/Endpoint</em></p>\n<p>Here is my jdl for reference:</p>\n<pre><code>    application {\n      config {\n        enableTranslation true\n        applicationType gateway\n        serviceDiscoveryType consul\n        languages [en, hi, te]\n        nativeLanguage en\n        packageName in.beze.pc\n        testFrameworks [gatling, cucumber, protractor]\n        websocket spring-websocket\n        baseName pc\n        serverPort 8080\n        jhiPrefix sys\n        prodDatabaseType postgresql\n        devDatabaseType postgresql\n        databaseType sql\n        cacheProvider ehcache\n        enableHibernateCache true\n        authenticationType session\n        buildTool gradle\n        clientPackageManager npm\n        clientFramework angularX\n      }\n      entities *\n    }\n    \n    application {\n      config {\n        baseName masters\n        applicationType microservice\n        packageName in.beze.masters\n        serviceDiscoveryType consul\n        authenticationType session\n        prodDatabaseType postgresql\n        devDatabaseType postgresql\n        databaseType sql\n        buildTool gradle\n        serverPort 8081\n        skipUserManagement true\n        cacheProvider ehcache\n        enableHibernateCache true\n        websocket spring-websocket\n      }\n      entities Attachment, ContentType, Equipment, EquipmentType, FacilityType, FacilityGroupType, FacilityGroup, Facility, FacilityHistory, FacilityUser, FacilityAttachment, FacilityEquipment, FrequencyType, Frequency, Gender, JobSandbox, Language, Party, Permission, PermissionAuthority, ProductStoreType, ProductStore, ProductStoreFacility, ProductStoreUserGroup, Responsibility, RoleType, Scheduler, StatusCategory, Status, StatusValidChange, UserRole, UserGroup, UserGroupAuthority, UserGroupMember, Uom, UomType, UserAttachment, SystemParameters, QRCode, QRCodeType, QRCodeAttachment, Product, ProductType, ProductCategoryType, ProductCategory, ProductCategoryMember, Stage, ProductSpecGroup, ProductSpec, ProductSpecItem, StabilityCondition, StabilityConditionAttachment\n    }\n\napplication {\n  config {\n    baseName stability\n    applicationType microservice\n    packageName in.beze.stability\n    serviceDiscoveryType consul\n    authenticationType session\n    prodDatabaseType postgresql\n    devDatabaseType postgresql\n    databaseType sql\n    buildTool gradle\n    serverPort 8082\n    skipUserManagement true\n    cacheProvider ehcache\n    enableHibernateCache true\n    websocket spring-websocket\n  }\n  entities StAttachment, StContentType, AnalysisType, SpEquipment, SsEquipment, SpProductSpec, StabilityProgramme, StabilityAttachment, SampleType, StabilitySample, SampleResult, SampleAttachment, SampleResultAttachment, EquipmentSc\n}\n</code></pre>\n<p>I have tried different java versions and couldn't get it up and running.</p>\n"},{"tags":["java","watchservice"],"comments":[{"owner":{"account_id":8532578,"reputation":39898,"user_id":6395627,"display_name":"Slaw"},"score":0,"creation_date":1697347136,"post_id":77295287,"comment_id":136267120,"body_markdown":"Are you reading the file _immediately_ after receiving a create event? If you are, what happens if you add a delay before reading the file (possibly where the delay restarts if you receive a modify event before the delay elapsed, assuming you register for `ENTRY_MODIFY` as well).","body":"Are you reading the file <i>immediately</i> after receiving a create event? If you are, what happens if you add a delay before reading the file (possibly where the delay restarts if you receive a modify event before the delay elapsed, assuming you register for <code>ENTRY_MODIFY</code> as well)."},{"owner":{"account_id":543582,"reputation":2626,"user_id":912772,"accept_rate":32,"display_name":"vic"},"score":0,"creation_date":1697347807,"post_id":77295287,"comment_id":136267156,"body_markdown":"Yes, a CSV file is processed once it is detected in the directory. There isn&#39;t ENTRY_MODIFY in the code. So, what you said is that CSVParser may not get any data from the file right after it is created,","body":"Yes, a CSV file is processed once it is detected in the directory. There isn&#39;t ENTRY_MODIFY in the code. So, what you said is that CSVParser may not get any data from the file right after it is created,"},{"owner":{"account_id":8532578,"reputation":39898,"user_id":6395627,"display_name":"Slaw"},"score":0,"creation_date":1697348049,"post_id":77295287,"comment_id":136267166,"body_markdown":"Yes, I&#39;m suggesting that you are reading the file before anything has actually been written to it. Or at least before the written data becomes visible to other applications. And that&#39;s why I asked if your code works if you add a delay. Also, I know there&#39;s no `ENTRY_MODIFY` in your code; didn&#39;t say there was. I was suggesting that you may want to register for those events as well, so that you can restart the delay when you receive a modify event. But only if that&#39;s important to your use case.","body":"Yes, I&#39;m suggesting that you are reading the file before anything has actually been written to it. Or at least before the written data becomes visible to other applications. And that&#39;s why I asked if your code works if you add a delay. Also, I know there&#39;s no <code>ENTRY_MODIFY</code> in your code; didn&#39;t say there was. I was suggesting that you may want to register for those events as well, so that you can restart the delay when you receive a modify event. But only if that&#39;s important to your use case."},{"owner":{"account_id":543582,"reputation":2626,"user_id":912772,"accept_rate":32,"display_name":"vic"},"score":0,"creation_date":1697349492,"post_id":77295287,"comment_id":136267232,"body_markdown":"Not sure I follow. The code reads and parses the data in a CSV file. It is straightforward. If I pause the code after creating a CSVParser, the whole procedure will be paused, I guess. If ENTRY_MODIFY means to detect the same file in the directory for a second time, the event isn&#39;t in the use case. One CSV file only can be dropped in the directory once. I hope I understand your suggestion correctly.","body":"Not sure I follow. The code reads and parses the data in a CSV file. It is straightforward. If I pause the code after creating a CSVParser, the whole procedure will be paused, I guess. If ENTRY_MODIFY means to detect the same file in the directory for a second time, the event isn&#39;t in the use case. One CSV file only can be dropped in the directory once. I hope I understand your suggestion correctly."},{"owner":{"account_id":543582,"reputation":2626,"user_id":912772,"accept_rate":32,"display_name":"vic"},"score":0,"creation_date":1697349595,"post_id":77295287,"comment_id":136267237,"body_markdown":"Also, I need to mention that I only observed the issue with one CSV file, but not the other file of two files for the test.","body":"Also, I need to mention that I only observed the issue with one CSV file, but not the other file of two files for the test."},{"owner":{"account_id":8532578,"reputation":39898,"user_id":6395627,"display_name":"Slaw"},"score":0,"creation_date":1697349646,"post_id":77295287,"comment_id":136267238,"body_markdown":"You receive an `ENTRY_CREATE` event and then immediately open the file for reading. I&#39;m suggesting that you aren&#39;t giving enough time for whatever application created the file to actually write any data to said file. If you are _moving_ an existing file, then what I&#39;m suggesting may not apply to your situation, but only if the move is atomic.","body":"You receive an <code>ENTRY_CREATE</code> event and then immediately open the file for reading. I&#39;m suggesting that you aren&#39;t giving enough time for whatever application created the file to actually write any data to said file. If you are <i>moving</i> an existing file, then what I&#39;m suggesting may not apply to your situation, but only if the move is atomic."},{"owner":{"account_id":8532578,"reputation":39898,"user_id":6395627,"display_name":"Slaw"},"score":0,"creation_date":1697351280,"post_id":77295287,"comment_id":136267325,"body_markdown":"Note that my comments are only a hypothesis regarding what may be going wrong with your code. It&#39;s possible you are running into a different issue. Or maybe you&#39;re running into the timing issue I&#39;ve described in addition to another issue.","body":"Note that my comments are only a hypothesis regarding what may be going wrong with your code. It&#39;s possible you are running into a different issue. Or maybe you&#39;re running into the timing issue I&#39;ve described in addition to another issue."},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1697353533,"post_id":77295287,"comment_id":136267447,"body_markdown":"*if (csvParser.iterator().hasNext())* surely should be `while` ..?","body":"<i>if (csvParser.iterator().hasNext())</i> surely should be <code>while</code> ..?"},{"owner":{"account_id":543582,"reputation":2626,"user_id":912772,"accept_rate":32,"display_name":"vic"},"score":0,"creation_date":1697383688,"post_id":77295287,"comment_id":136270337,"body_markdown":"@g00se the condition was added to prevent an exception we are discussing.","body":"@g00se the condition was added to prevent an exception we are discussing."},{"owner":{"account_id":543582,"reputation":2626,"user_id":912772,"accept_rate":32,"display_name":"vic"},"score":0,"creation_date":1697384059,"post_id":77295287,"comment_id":136270384,"body_markdown":"@Slaw I forgot to provide a detail on the test I mentioned.  I placed the CSV file in the directory. After the code didn&#39;t work as expected, I removed the file. The same for the second time. Without this detail, you likely think the ENTRY_MODIFY event should be created.","body":"@Slaw I forgot to provide a detail on the test I mentioned.  I placed the CSV file in the directory. After the code didn&#39;t work as expected, I removed the file. The same for the second time. Without this detail, you likely think the ENTRY_MODIFY event should be created."},{"owner":{"account_id":8532578,"reputation":39898,"user_id":6395627,"display_name":"Slaw"},"score":0,"creation_date":1697408356,"post_id":77295287,"comment_id":136272743,"body_markdown":"I think you are focusing too much on my mention of `ENTRY_MODIFY`, which was essentially a side point. The important part is that you delay before reading the file.","body":"I think you are focusing too much on my mention of <code>ENTRY_MODIFY</code>, which was essentially a side point. The important part is that you delay before reading the file."}],"answers":[{"tags":[],"owner":{"account_id":5998820,"reputation":12656,"user_id":4712734,"display_name":"DuncG"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1697804790,"creation_date":1697804790,"answer_id":77330907,"question_id":77295287,"body_markdown":"It is unwise to handle watch service events immediately especially as the `WatchService` would normally provide DELETE+CREATE+N x MODIFY events for same file operation. As you are ignoring MODIFY you won&#39;t know when it is safe(ish) to access your CSV.\r\n\r\nYou will be better off collating events and handling in separate process queue once the watch service is quiet, and use combination of poll+take. Have a look at this [answer][1] which should provide a better trigger point for you to begin operations on the CSV. In the example `setListener` just prints the activity, replace with your own handler for CSV.\r\n\r\n  [1]: https://stackoverflow.com/questions/65223686/java-watchservice-perform-action-on-event-using-threads/65251819#65251819","title":"CSV File Parsing Issue - csvParser.iterator().next()","body":"<p>It is unwise to handle watch service events immediately especially as the <code>WatchService</code> would normally provide DELETE+CREATE+N x MODIFY events for same file operation. As you are ignoring MODIFY you won't know when it is safe(ish) to access your CSV.</p>\n<p>You will be better off collating events and handling in separate process queue once the watch service is quiet, and use combination of poll+take. Have a look at this <a href=\"https://stackoverflow.com/questions/65223686/java-watchservice-perform-action-on-event-using-threads/65251819#65251819\">answer</a> which should provide a better trigger point for you to begin operations on the CSV. In the example <code>setListener</code> just prints the activity, replace with your own handler for CSV.</p>\n"}],"owner":{"account_id":543582,"reputation":2626,"user_id":912772,"accept_rate":32,"display_name":"vic"},"comment_count":11,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":98,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1697804790,"creation_date":1697343698,"question_id":77295287,"body_markdown":"Here is the Java code for reading and parsing a CSV file.\r\n```\r\nString filePath = dir.resolve(filename).toString();\r\ntry (FileReader fileReader = new FileReader(filePath);\r\n     CSVParser csvParser = new CSVParser(fileReader, CSVFormat.DEFAULT\r\n         .withHeader(...))) {\r\n\r\n    // Check if there is a next element before calling next()\r\n    if (csvParser.iterator().hasNext()) {\r\n        csvParser.iterator().next();\r\n        \r\n        for (CSVRecord record : csvParser) {\r\n        ...\r\n        }\r\n        ...\r\n    } else {\r\n        // Handle the case where there are no more CSV records available\r\n        log.warn(&quot;No more CSV records available&quot;);\r\n    }\r\n}\r\n```\r\nThe above code will have different outcomes for the same CSV file. That is the condition (csvParser.iterator().hasNext() will return different values between true and false. I just did a test for the same CSV file and the first two times it goes to the line _&quot;No more CSV records available&quot; (I removed the file when this case occurred) and the data in the CSV file is loaded on the third attempt. To my eyes, I can&#39;t find any issues in the CSV file.\r\n\r\nI&#39;ve ruled out issues related to file content, format, and headers, there could be other factors contributing to this inconsistency. The additional points I can&#39;t consider to be the cause:\r\n\r\nResource Handling: Ensure that the csvParser and fileReader are properly managed and not subject to unexpected closures or resource issues. Double-check for any resource-related exceptions that might affect the behavior of the CSVParser.\r\n\r\nConcurrency: If multiple threads or processes are accessing the same file concurrently, it can lead to unpredictable results. Ensure that you have proper synchronization in place to avoid concurrent access issues.\r\n\r\nLibrary Version: Check if you are using an older or less stable version of the CSV parsing library. Updating to a more recent version or switching to a different library might help resolve the issue if it&#39;s a library-specific bug.\r\n\r\nJVM or Environment Issues: In rare cases, JVM or environment-specific issues could lead to inconsistent behavior. Make sure your JVM and environment are up to date and correctly configured.\r\n\r\nExternal Factors: Consider other factors that might be affecting the behavior, such as system load, file system issues, or other external factors that can impact file access and I/O operations.\r\n\r\nI don&#39;t know whether this issue relates to how the file is read or not. I use the WatchService to get a CSV file\r\n```java\r\ntry {\r\n    String path = System.getProperty(&quot;user.home&quot;) + &quot;/my_file&quot;;\r\n    Path dir = Paths.get(path);\r\n    WatchService watcher = FileSystems.getDefault().newWatchService();\r\n    dir.register(watcher, StandardWatchEventKinds.ENTRY_CREATE);\r\n    log.warn(&quot;Monitoring directory: &quot; + dir);\r\n\r\n    while (true) {\r\n        WatchKey key = watcher.take();\r\n        boolean oneLoop = processWatchKeyEvents(key, dir);\r\n        boolean valid = key.reset();\r\n        if (!valid) {\r\n            break;\r\n        }\r\n        if (oneLoop) {\r\n            break;\r\n        }\r\n    }\r\n} catch (IOException | InterruptedException e) {\r\n    log.error(&quot;Error in monitoring directory: &quot; + e.getMessage());\r\n}\r\n```\r\nWhat is a possible cause of this issue?","title":"CSV File Parsing Issue - csvParser.iterator().next()","body":"<p>Here is the Java code for reading and parsing a CSV file.</p>\n<pre><code>String filePath = dir.resolve(filename).toString();\ntry (FileReader fileReader = new FileReader(filePath);\n     CSVParser csvParser = new CSVParser(fileReader, CSVFormat.DEFAULT\n         .withHeader(...))) {\n\n    // Check if there is a next element before calling next()\n    if (csvParser.iterator().hasNext()) {\n        csvParser.iterator().next();\n        \n        for (CSVRecord record : csvParser) {\n        ...\n        }\n        ...\n    } else {\n        // Handle the case where there are no more CSV records available\n        log.warn(&quot;No more CSV records available&quot;);\n    }\n}\n</code></pre>\n<p>The above code will have different outcomes for the same CSV file. That is the condition (csvParser.iterator().hasNext() will return different values between true and false. I just did a test for the same CSV file and the first two times it goes to the line _&quot;No more CSV records available&quot; (I removed the file when this case occurred) and the data in the CSV file is loaded on the third attempt. To my eyes, I can't find any issues in the CSV file.</p>\n<p>I've ruled out issues related to file content, format, and headers, there could be other factors contributing to this inconsistency. The additional points I can't consider to be the cause:</p>\n<p>Resource Handling: Ensure that the csvParser and fileReader are properly managed and not subject to unexpected closures or resource issues. Double-check for any resource-related exceptions that might affect the behavior of the CSVParser.</p>\n<p>Concurrency: If multiple threads or processes are accessing the same file concurrently, it can lead to unpredictable results. Ensure that you have proper synchronization in place to avoid concurrent access issues.</p>\n<p>Library Version: Check if you are using an older or less stable version of the CSV parsing library. Updating to a more recent version or switching to a different library might help resolve the issue if it's a library-specific bug.</p>\n<p>JVM or Environment Issues: In rare cases, JVM or environment-specific issues could lead to inconsistent behavior. Make sure your JVM and environment are up to date and correctly configured.</p>\n<p>External Factors: Consider other factors that might be affecting the behavior, such as system load, file system issues, or other external factors that can impact file access and I/O operations.</p>\n<p>I don't know whether this issue relates to how the file is read or not. I use the WatchService to get a CSV file</p>\n<pre class=\"lang-java prettyprint-override\"><code>try {\n    String path = System.getProperty(&quot;user.home&quot;) + &quot;/my_file&quot;;\n    Path dir = Paths.get(path);\n    WatchService watcher = FileSystems.getDefault().newWatchService();\n    dir.register(watcher, StandardWatchEventKinds.ENTRY_CREATE);\n    log.warn(&quot;Monitoring directory: &quot; + dir);\n\n    while (true) {\n        WatchKey key = watcher.take();\n        boolean oneLoop = processWatchKeyEvents(key, dir);\n        boolean valid = key.reset();\n        if (!valid) {\n            break;\n        }\n        if (oneLoop) {\n            break;\n        }\n    }\n} catch (IOException | InterruptedException e) {\n    log.error(&quot;Error in monitoring directory: &quot; + e.getMessage());\n}\n</code></pre>\n<p>What is a possible cause of this issue?</p>\n"},{"tags":["java","lombok"],"comments":[{"owner":{"account_id":4687309,"reputation":1639,"user_id":5058677,"accept_rate":50,"display_name":"Rumid"},"score":0,"creation_date":1573823324,"post_id":58877639,"comment_id":104022791,"body_markdown":"Probably you need to customize your IDE. https://projectlombok.org/setup/intellij","body":"Probably you need to customize your IDE. <a href=\"https://projectlombok.org/setup/intellij\" rel=\"nofollow noreferrer\">projectlombok.org/setup/intellij</a>"}],"answers":[{"tags":[],"owner":{"account_id":16021607,"reputation":464,"user_id":11562992,"display_name":"Youssef Tounoussi"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1573824827,"creation_date":1573823610,"answer_id":58877824,"question_id":58877639,"body_markdown":"I think you are just missing the installation of the `Lombok` on `intellij`\r\ndouble click on `Lombok.jar` and chose the `intelliJ IDE`\r\n\r\nExample config for lombok annotation procession in your `build.gradle` :\r\n\r\n    dependencies {\r\n        compileOnly(&#39;org.projectlombok:lombok:1.16.20&#39;)\r\n        annotationProcessor &#39;org.projectlombok:lombok:1.16.20&#39;\r\n        // compile &#39;org.projectlombok:lombok:1.16.20&#39; &lt;-- this no longer works!\r\n        // other dependencies...\r\n    }\r\n\r\n&gt; @Wither is deprecated since 10.X.X. With has been promoted to the main\r\n&gt; package, so use that one instead.\r\n\r\nPlease look at this [Lombok Wither][1]\r\n\r\n\r\nthat&#39;s why you are not having the withA() function, if you downgrade your package you could use it sure\r\n\r\n\r\n  [1]: https://projectlombok.org/api/lombok/experimental/Wither.html","title":"Why Lombok does not compile when @Wither is used?","body":"<p>I think you are just missing the installation of the <code>Lombok</code> on <code>intellij</code>\ndouble click on <code>Lombok.jar</code> and chose the <code>intelliJ IDE</code></p>\n\n<p>Example config for lombok annotation procession in your <code>build.gradle</code> :</p>\n\n<pre><code>dependencies {\n    compileOnly('org.projectlombok:lombok:1.16.20')\n    annotationProcessor 'org.projectlombok:lombok:1.16.20'\n    // compile 'org.projectlombok:lombok:1.16.20' &lt;-- this no longer works!\n    // other dependencies...\n}\n</code></pre>\n\n<blockquote>\n  <p>@Wither is deprecated since 10.X.X. With has been promoted to the main\n  package, so use that one instead.</p>\n</blockquote>\n\n<p>Please look at this <a href=\"https://projectlombok.org/api/lombok/experimental/Wither.html\" rel=\"nofollow noreferrer\">Lombok Wither</a></p>\n\n<p>that's why you are not having the withA() function, if you downgrade your package you could use it sure</p>\n"},{"tags":[],"owner":{"account_id":298886,"reputation":40470,"user_id":605153,"accept_rate":67,"display_name":"Mark Bramnik"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1573823990,"creation_date":1573823990,"answer_id":58877918,"question_id":58877639,"body_markdown":"Line `compileOnly &#39;org.projectlombok:lombok:1.18.8&#39;` shows that you&#39;re using gradle.\r\n\r\nI think the easiest way to check whether it works or not can be just running the gradle build (without IDE). \r\nSince lombok is an annotation processor, as long as the code passes the compilation, it&#39;s supposed to work (and the chances are that it really works based on that line).\r\n\r\nSo you should check how does the IDE (you haven&#39;t specified which IDE it is actually) integrate with lombok. Maybe you need to enable &quot;annotation processing&quot; if you compile it with java compiler (like in intelliJ) and configure lombok. You an also install Lombok plugin for your IDE. \r\n\r\nAnother useful hint is to use delombok and see whether the lombok has actually generated something or not\r\n","title":"Why Lombok does not compile when @Wither is used?","body":"<p>Line <code>compileOnly 'org.projectlombok:lombok:1.18.8'</code> shows that you're using gradle.</p>\n\n<p>I think the easiest way to check whether it works or not can be just running the gradle build (without IDE). \nSince lombok is an annotation processor, as long as the code passes the compilation, it's supposed to work (and the chances are that it really works based on that line).</p>\n\n<p>So you should check how does the IDE (you haven't specified which IDE it is actually) integrate with lombok. Maybe you need to enable \"annotation processing\" if you compile it with java compiler (like in intelliJ) and configure lombok. You an also install Lombok plugin for your IDE. </p>\n\n<p>Another useful hint is to use delombok and see whether the lombok has actually generated something or not</p>\n"},{"tags":[],"owner":{"account_id":8347952,"reputation":5186,"user_id":6271180,"display_name":"Benoit"},"down_vote_count":0,"up_vote_count":4,"is_accepted":true,"score":4,"last_activity_date":1574066327,"creation_date":1573825368,"answer_id":58878301,"question_id":58877639,"body_markdown":"### Lombok 1.18.8: @Wither ###\r\n\r\nIf you look at the actual implementation of `withA()` you will notice that it relies on an all-args constructors. To make your example work, try to add it, as well as a no-arg constructor:\r\n\r\n    @Wither\r\n    @AllArgsConstructor\r\n    @NoArgsConstructor\r\n    public class User {\r\n        private int a;\r\n    }\r\n\r\nThe *delombok*&#39;d version is:\r\n\r\n    public class User {\r\n        private int a;\r\n    \r\n        public User withA(int a) {\r\n            return this.a == a ? this : new User(a);\r\n        }\r\n    \r\n        public User(int a) {\r\n            this.a = a;\r\n        }\r\n    \r\n        public User() {\r\n        }\r\n    }\r\n\r\n\r\n\r\nNote: This has been tested with Lombok 1.18.8, IntelliJ IDEA and Lombok plugin.\r\n\r\n### Lombok 1.18.10: @With ###\r\n\r\n`@With` has been promoted and `@Wither` deprecated:\r\nSimply replace `lombok.experimental.Wither` with `lombok.With`. Everything else is similar to `1.18.8`:\r\n\r\n    @With\r\n    @AllArgsConstructor\r\n    @NoArgsConstructor\r\n    public class User {\r\n        private int a;\r\n    }","title":"Why Lombok does not compile when @Wither is used?","body":"<h3>Lombok 1.18.8: @Wither</h3>\n\n<p>If you look at the actual implementation of <code>withA()</code> you will notice that it relies on an all-args constructors. To make your example work, try to add it, as well as a no-arg constructor:</p>\n\n<pre><code>@Wither\n@AllArgsConstructor\n@NoArgsConstructor\npublic class User {\n    private int a;\n}\n</code></pre>\n\n<p>The <em>delombok</em>'d version is:</p>\n\n<pre><code>public class User {\n    private int a;\n\n    public User withA(int a) {\n        return this.a == a ? this : new User(a);\n    }\n\n    public User(int a) {\n        this.a = a;\n    }\n\n    public User() {\n    }\n}\n</code></pre>\n\n<p>Note: This has been tested with Lombok 1.18.8, IntelliJ IDEA and Lombok plugin.</p>\n\n<h3>Lombok 1.18.10: @With</h3>\n\n<p><code>@With</code> has been promoted and <code>@Wither</code> deprecated:\nSimply replace <code>lombok.experimental.Wither</code> with <code>lombok.With</code>. Everything else is similar to <code>1.18.8</code>:</p>\n\n<pre><code>@With\n@AllArgsConstructor\n@NoArgsConstructor\npublic class User {\n    private int a;\n}\n</code></pre>\n"}],"owner":{"account_id":10595855,"reputation":2708,"user_id":7804595,"display_name":"Valeriy K."},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":5252,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"accepted_answer_id":58878301,"answer_count":3,"score":0,"last_activity_date":1697804498,"creation_date":1573822909,"question_id":58877639,"body_markdown":"I&#39;m using Lombok 1.18.8:\r\n\r\n    compileOnly &#39;org.projectlombok:lombok:1.18.8&#39;\r\n\r\nHere is my simple class with `@Wither`:   \r\n\r\n    @Wither\r\n    public class User {\r\n    \tprivate int a;\r\n    }\r\n\r\nBut `withA()` method doesn&#39;t appear when I&#39;m trying to call it in another class:\r\n\r\n    class test {\r\n        User user = new User().withA(1); // withA is red\r\n    }\r\n\r\nWhat is wrong with my code? \r\n\r\nUPD: Other Lombok annotations work. For example `@Setter`, `@Getter`, and `@NoArgsConstructor`.\r\n\r\n","title":"Why Lombok does not compile when @Wither is used?","body":"<p>I'm using Lombok 1.18.8:</p>\n<pre><code>compileOnly 'org.projectlombok:lombok:1.18.8'\n</code></pre>\n<p>Here is my simple class with <code>@Wither</code>:</p>\n<pre><code>@Wither\npublic class User {\n    private int a;\n}\n</code></pre>\n<p>But <code>withA()</code> method doesn't appear when I'm trying to call it in another class:</p>\n<pre><code>class test {\n    User user = new User().withA(1); // withA is red\n}\n</code></pre>\n<p>What is wrong with my code?</p>\n<p>UPD: Other Lombok annotations work. For example <code>@Setter</code>, <code>@Getter</code>, and <code>@NoArgsConstructor</code>.</p>\n"},{"tags":["java","spring","spring-boot"],"owner":{"account_id":24442443,"reputation":53,"user_id":18365949,"display_name":"Mihajlo Stankov"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":28,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1697804333,"creation_date":1697804333,"question_id":77330859,"body_markdown":"just one question. Is it possible to use Spring HandlerMethodArgumentResolver for POST requests?\r\nIf it is, please share some examples or links with an explanation.\r\nThanks in advance","title":"Spring HandlerMethodArgumentResolver for the POST requests","body":"<p>just one question. Is it possible to use Spring HandlerMethodArgumentResolver for POST requests?\nIf it is, please share some examples or links with an explanation.\nThanks in advance</p>\n"},{"tags":["java","kotlin","fonts","apache-poi","awt"],"comments":[{"owner":{"account_id":14010051,"reputation":1143,"user_id":10118965,"display_name":"davidalayachew"},"score":1,"creation_date":1697804127,"post_id":77330759,"comment_id":136329088,"body_markdown":"Potentially unhelpful comment, but if you restrict your fonts to only use Monospaced fonts, you can avoid this problem entirely. All characters in a Monospaced font have the exact same width - by definition. I understand if that is not an option for you though.","body":"Potentially unhelpful comment, but if you restrict your fonts to only use Monospaced fonts, you can avoid this problem entirely. All characters in a Monospaced font have the exact same width - by definition. I understand if that is not an option for you though."},{"owner":{"account_id":350017,"reputation":47555,"user_id":685641,"display_name":"Gagravarr"},"score":0,"creation_date":1697804849,"post_id":77330759,"comment_id":136329225,"body_markdown":"Do you have the font referenced in the PPTX file installed on the machine running the program?","body":"Do you have the font referenced in the PPTX file installed on the machine running the program?"},{"owner":{"account_id":18497547,"reputation":35,"user_id":13475627,"display_name":"Poui"},"score":0,"creation_date":1697806667,"post_id":77330759,"comment_id":136329526,"body_markdown":"@davidalayachew Thanks for the idea but I sadly can&#39;t do that, the presentation was made with that font in mind and changing it to anonymize will negatively affect the design in mind","body":"@davidalayachew Thanks for the idea but I sadly can&#39;t do that, the presentation was made with that font in mind and changing it to anonymize will negatively affect the design in mind"},{"owner":{"account_id":18497547,"reputation":35,"user_id":13475627,"display_name":"Poui"},"score":0,"creation_date":1697806672,"post_id":77330759,"comment_id":136329527,"body_markdown":"@Gagravarr I don&#39;t think, the program will be hosted in Railway and some presentations uses paid / custom fonts BUT the fonts should be embedded inside the PPTX File, we always have that option on for all presentations","body":"@Gagravarr I don&#39;t think, the program will be hosted in Railway and some presentations uses paid / custom fonts BUT the fonts should be embedded inside the PPTX File, we always have that option on for all presentations"}],"owner":{"account_id":18497547,"reputation":35,"user_id":13475627,"display_name":"Poui"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":64,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1697803231,"creation_date":1697803231,"question_id":77330759,"body_markdown":"I made a program that replace all the words in PPTX with latin words that have the same number of letter\r\nThe issue is that words don&#39;t have the same physical size because of the different distribution and size of each characters inside of it.\r\nSo I need a way to know / estimate the actual size of a word with a given font to replace it with another latin words with a close size.\r\nThe program is in Kotlin and I use Apache POI XSLF library\r\n\r\nI found that the AWT Java library can estimate the actual physical size but I don&#39;t think I can extract the actual font file using Apache POI XSLF library to use it with AWT Java library","title":"Is there a way to know the actual size of a word with a given font?","body":"<p>I made a program that replace all the words in PPTX with latin words that have the same number of letter\nThe issue is that words don't have the same physical size because of the different distribution and size of each characters inside of it.\nSo I need a way to know / estimate the actual size of a word with a given font to replace it with another latin words with a close size.\nThe program is in Kotlin and I use Apache POI XSLF library</p>\n<p>I found that the AWT Java library can estimate the actual physical size but I don't think I can extract the actual font file using Apache POI XSLF library to use it with AWT Java library</p>\n"},{"tags":["java","json","datetime","jackson","java-8"],"comments":[{"owner":{"account_id":1850363,"reputation":4684,"user_id":1677033,"display_name":"Meiko Rachimow"},"score":0,"creation_date":1459114598,"post_id":36252556,"comment_id":60135584,"body_markdown":"strange, I expected this error `Failed to parse Date value &#39;2016-03-28T19:00:00.000+01:00&#39; (format: &quot;yyyy-MM-dd&#39;T&#39;HH:mm:ss.SSSZ&quot;): Unparseable date: &quot;2016-03-28T19:00:00.000+01:00&quot;` and after trying your code, I got this kind of error in both cases. The format is not matching... did you tried it without any annotations?","body":"strange, I expected this error <code>Failed to parse Date value &#39;2016-03-28T19:00:00.000+01:00&#39; (format: &quot;yyyy-MM-dd&#39;T&#39;HH:mm:ss.SSSZ&quot;): Unparseable date: &quot;2016-03-28T19:00:00.000+01:00&quot;</code> and after trying your code, I got this kind of error in both cases. The format is not matching... did you tried it without any annotations?"},{"owner":{"account_id":1850363,"reputation":4684,"user_id":1677033,"display_name":"Meiko Rachimow"},"score":2,"creation_date":1459114736,"post_id":36252556,"comment_id":60135629,"body_markdown":"or with this pattern: yyyy-MM-dd&#39;T&#39;HH:mm:ss.SSSXXX (see: https://docs.oracle.com/javase/7/docs/api/java/text/SimpleDateFormat.html)","body":"or with this pattern: yyyy-MM-dd&#39;T&#39;HH:mm:ss.SSSXXX (see: <a href=\"https://docs.oracle.com/javase/7/docs/api/java/text/SimpleDateFormat.html\" rel=\"nofollow noreferrer\">docs.oracle.com/javase/7/docs/api/java/text/&hellip;</a>)"},{"owner":{"account_id":265903,"reputation":5352,"user_id":2092870,"accept_rate":80,"display_name":"Krešimir Nesek"},"score":0,"creation_date":1459115171,"post_id":36252556,"comment_id":60135778,"body_markdown":"Without any annotations it works but only if the offset is specified as Z. It won&#39;t work for +0100 or +01:00. I tried your format and I still get Unsupported field: YearOfEra exception, indicating that deserializer&#39;s formatter is not configured with a time zone (for some reason java 8 fromatter requires TZ even though the offset is specified in the string and the Instant is fully defined).","body":"Without any annotations it works but only if the offset is specified as Z. It won&#39;t work for +0100 or +01:00. I tried your format and I still get Unsupported field: YearOfEra exception, indicating that deserializer&#39;s formatter is not configured with a time zone (for some reason java 8 fromatter requires TZ even though the offset is specified in the string and the Instant is fully defined)."},{"owner":{"account_id":1850363,"reputation":4684,"user_id":1677033,"display_name":"Meiko Rachimow"},"score":0,"creation_date":1459115324,"post_id":36252556,"comment_id":60135828,"body_markdown":"which version of jackson / jackson-datatype-jsr310 you are using?","body":"which version of jackson / jackson-datatype-jsr310 you are using?"},{"owner":{"account_id":265903,"reputation":5352,"user_id":2092870,"accept_rate":80,"display_name":"Krešimir Nesek"},"score":0,"creation_date":1459116521,"post_id":36252556,"comment_id":60136221,"body_markdown":"Jackson 2.6.5 and jackson-datatype-jsr310 2.6.5","body":"Jackson 2.6.5 and jackson-datatype-jsr310 2.6.5"},{"owner":{"account_id":265903,"reputation":5352,"user_id":2092870,"accept_rate":80,"display_name":"Krešimir Nesek"},"score":0,"creation_date":1459117140,"post_id":36252556,"comment_id":60136392,"body_markdown":"Ok - I noticed that there&#39;s a separate problem with how I annotated the class (I&#39;m actually using Kotlin which has annotation use-sites which I didn&#39;t use correctly). Anyhow, when trying your format string, it worked. Please copy your comment with your pattern to the answer so I can accept it.","body":"Ok - I noticed that there&#39;s a separate problem with how I annotated the class (I&#39;m actually using Kotlin which has annotation use-sites which I didn&#39;t use correctly). Anyhow, when trying your format string, it worked. Please copy your comment with your pattern to the answer so I can accept it."}],"answers":[{"tags":[],"owner":{"account_id":1850363,"reputation":4684,"user_id":1677033,"display_name":"Meiko Rachimow"},"down_vote_count":0,"up_vote_count":80,"is_accepted":true,"score":80,"last_activity_date":1588589612,"creation_date":1459118958,"answer_id":36253614,"question_id":36252556,"body_markdown":"\r\nYou need to set the explicit time zone via `XXX` in your modell  class:\r\n\r\n     \r\n    @JsonFormat(shape = JsonFormat.Shape.STRING, pattern = &quot;yyyy-MM-dd&#39;T&#39;HH:mm:ss.SSSXXX&quot;)\r\n     \r\n\r\n(see: https://docs.oracle.com/javase/7/docs/api/java/text/SimpleDateFormat.html)\r\n","title":"Jackson deserialize ISO8601 formatted date-time into Java8 Instant","body":"<p>You need to set the explicit time zone via <code>XXX</code> in your modell  class:</p>\n\n<pre><code>@JsonFormat(shape = JsonFormat.Shape.STRING, pattern = \"yyyy-MM-dd'T'HH:mm:ss.SSSXXX\")\n</code></pre>\n\n<p>(see: <a href=\"https://docs.oracle.com/javase/7/docs/api/java/text/SimpleDateFormat.html\" rel=\"noreferrer\">https://docs.oracle.com/javase/7/docs/api/java/text/SimpleDateFormat.html</a>)</p>\n"},{"tags":[],"owner":{"account_id":3803727,"reputation":323,"user_id":3156671,"display_name":"Mick Belker - Pseudonym"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1466753957,"creation_date":1466753957,"answer_id":38008077,"question_id":36252556,"body_markdown":"The format &quot;Z&quot; does not work with &quot;+01:00&quot; as this is a different pattern.\r\nJsonFormat is using SimpleDateFormat patterns. &quot;Z&quot; in **upper case** only represents strict RFC 822. You have to use syntax like: &quot;+0100&quot;, without colon.\r\n\r\nSee: [ISO 8601:2004][1], [SimpleDateFormat patterns][2]\r\n\r\n\r\n  [1]: http://www.uai.cl/images/sitio/biblioteca/citas/ISO_8601_2004en.pdf\r\n  [2]: http://docs.oracle.com/javase/1.5.0/docs/api/java/text/SimpleDateFormat.html?is-external=true","title":"Jackson deserialize ISO8601 formatted date-time into Java8 Instant","body":"<p>The format \"Z\" does not work with \"+01:00\" as this is a different pattern.\nJsonFormat is using SimpleDateFormat patterns. \"Z\" in <strong>upper case</strong> only represents strict RFC 822. You have to use syntax like: \"+0100\", without colon.</p>\n\n<p>See: <a href=\"http://www.uai.cl/images/sitio/biblioteca/citas/ISO_8601_2004en.pdf\" rel=\"noreferrer\">ISO 8601:2004</a>, <a href=\"http://docs.oracle.com/javase/1.5.0/docs/api/java/text/SimpleDateFormat.html?is-external=true\" rel=\"noreferrer\">SimpleDateFormat patterns</a></p>\n"},{"tags":[],"owner":{"account_id":21889,"reputation":30982,"user_id":53538,"accept_rate":88,"display_name":"Guss"},"down_vote_count":0,"up_vote_count":18,"is_accepted":false,"score":18,"last_activity_date":1540415221,"creation_date":1540415221,"answer_id":52977921,"question_id":36252556,"body_markdown":"If you want to serialize `Date` objects into ISO-8601, you don&#39;t need to specify a pattern at all - ISO-8601 is the default pattern. It is kind of mentioned in the [`JsonFormat` Java doc][1]:\r\n\r\n&gt; Common uses include choosing between alternate representations -- for example, whether Date is to be serialized as number (Java timestamp) or **String (such as ISO-8601 compatible time value)** -- as well as configuring exact details with pattern() property.\r\n\r\n[emphasasis mine] you should understand from the above text that specifying `shape = STRING` would mean an ISO-8601 format but you can choose something else using the `pattern` property.\r\n\r\nIn my experience, this always turns out a UTC date format (with the time zone rendered as `+0000`), which could be the default time zone in my VM (even though my operating system clock is not set to UTC).\r\n\r\n\r\n  [1]: https://fasterxml.github.io/jackson-annotations/javadoc/2.8/com/fasterxml/jackson/annotation/JsonFormat.html","title":"Jackson deserialize ISO8601 formatted date-time into Java8 Instant","body":"<p>If you want to serialize <code>Date</code> objects into ISO-8601, you don't need to specify a pattern at all - ISO-8601 is the default pattern. It is kind of mentioned in the <a href=\"https://fasterxml.github.io/jackson-annotations/javadoc/2.8/com/fasterxml/jackson/annotation/JsonFormat.html\" rel=\"noreferrer\"><code>JsonFormat</code> Java doc</a>:</p>\n\n<blockquote>\n  <p>Common uses include choosing between alternate representations -- for example, whether Date is to be serialized as number (Java timestamp) or <strong>String (such as ISO-8601 compatible time value)</strong> -- as well as configuring exact details with pattern() property.</p>\n</blockquote>\n\n<p>[emphasasis mine] you should understand from the above text that specifying <code>shape = STRING</code> would mean an ISO-8601 format but you can choose something else using the <code>pattern</code> property.</p>\n\n<p>In my experience, this always turns out a UTC date format (with the time zone rendered as <code>+0000</code>), which could be the default time zone in my VM (even though my operating system clock is not set to UTC).</p>\n"},{"tags":[],"owner":{"account_id":9226148,"reputation":419,"user_id":6853890,"display_name":"zoomout"},"down_vote_count":0,"up_vote_count":20,"is_accepted":false,"score":20,"last_activity_date":1549988761,"creation_date":1549988761,"answer_id":54654547,"question_id":36252556,"body_markdown":"In Jackson 2.9.8 (current one as I&#39;m writing this) it&#39;s better to use Instant instead of Date. \r\n\r\nYou have to add a dependency:\r\n\r\n    &lt;dependency&gt;\r\n        &lt;groupId&gt;com.fasterxml.jackson.datatype&lt;/groupId&gt;\r\n        &lt;artifactId&gt;jackson-datatype-jsr310&lt;/artifactId&gt;\r\n        &lt;version&gt;2.9.8&lt;/version&gt;\r\n    &lt;/dependency&gt; \r\n\r\nAlso, register the module and configure SerializationFeature.WRITE_DATES_AS_TIMESTAMPS to false.\r\n\r\n    new ObjectMapper()\r\n                    .findAndRegisterModules()\r\n                    .configure(SerializationFeature.WRITE_DATES_AS_TIMESTAMPS, false);\r\n\r\nMore information about Jackson for Java8 here: https://github.com/FasterXML/jackson-modules-java8","title":"Jackson deserialize ISO8601 formatted date-time into Java8 Instant","body":"<p>In Jackson 2.9.8 (current one as I'm writing this) it's better to use Instant instead of Date. </p>\n\n<p>You have to add a dependency:</p>\n\n<pre><code>&lt;dependency&gt;\n    &lt;groupId&gt;com.fasterxml.jackson.datatype&lt;/groupId&gt;\n    &lt;artifactId&gt;jackson-datatype-jsr310&lt;/artifactId&gt;\n    &lt;version&gt;2.9.8&lt;/version&gt;\n&lt;/dependency&gt; \n</code></pre>\n\n<p>Also, register the module and configure SerializationFeature.WRITE_DATES_AS_TIMESTAMPS to false.</p>\n\n<pre><code>new ObjectMapper()\n                .findAndRegisterModules()\n                .configure(SerializationFeature.WRITE_DATES_AS_TIMESTAMPS, false);\n</code></pre>\n\n<p>More information about Jackson for Java8 here: <a href=\"https://github.com/FasterXML/jackson-modules-java8\" rel=\"noreferrer\">https://github.com/FasterXML/jackson-modules-java8</a></p>\n"},{"tags":[],"owner":{"account_id":5544246,"reputation":2369,"user_id":4399576,"display_name":"Dimitar II"},"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1596656759,"creation_date":1596656759,"answer_id":63272521,"question_id":36252556,"body_markdown":"Jackson can be configured globally (without annotations) to accept timestamps with or without colon:\r\n\r\n    ObjectMapper mapper = new ObjectMapper();\r\n    mapper.setDateFormat(new StdDateFormat().withColonInTimeZone(true));\r\n\r\nThe default Jackson timezone format was changed since version 2.11 from &#39;+0000&#39; to &#39;+00:00&#39;. Both formats are valid according to ISO-8601.","title":"Jackson deserialize ISO8601 formatted date-time into Java8 Instant","body":"<p>Jackson can be configured globally (without annotations) to accept timestamps with or without colon:</p>\n<pre><code>ObjectMapper mapper = new ObjectMapper();\nmapper.setDateFormat(new StdDateFormat().withColonInTimeZone(true));\n</code></pre>\n<p>The default Jackson timezone format was changed since version 2.11 from '+0000' to '+00:00'. Both formats are valid according to ISO-8601.</p>\n"},{"tags":[],"owner":{"account_id":3439239,"reputation":116,"user_id":2881562,"display_name":"Rama Sharma"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1697803089,"creation_date":1697803089,"answer_id":77330749,"question_id":36252556,"body_markdown":"I was facing this issue while sending Instant data type variable on a RMQ queue. It was giving errors in different scenarios . \r\n\r\n1st error that i encountered was \r\n\r\njava.base/java.lang.Thread.run(Thread.java:829)\\nCaused by: com.fasterxml.jackson.databind.exc.InvalidDefinitionException: Java 8 date/time type `java.time.Instant` not supported by default:\r\n\r\n\r\nSolution was too add dependency of \r\n\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;com.fasterxml.jackson.datatype&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;jackson-datatype-jsr310&lt;/artifactId&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\n\r\nThen second issue I started facing was that it was not able to serialise the date format . I tried to load JAVA TIME Modules with object mapper but that didn&#39;t help me.  What worked for me is as below. \r\n\r\n\r\n\t@JsonSerialize(using = InstantSerializer.class)\r\n\t@JsonDeserialize(using = CustomInstantDeserializer.class)\r\n\tInstant updateTime;\r\n\r\n\r\nCustomeDeserialser i had to write because it was giving error that \r\nInvalidDefinitionException: Class com.fasterxml.jackson.datatype.jsr310.deser.InstantDeserializer has no default (no arg) constructor\\n\r\n\r\n\r\n    public class CustomInstantDeserializer extends \r\n     InstantDeserializer&lt;Instant&gt; { \r\n          public CustomInstantDeserializer() {\r\n\t\t       super(InstantDeserializer.INSTANT,\r\n\t\t\t\tnew DateTimeFormatterBuilder().\r\n         parseCaseInsensitive()\r\n       .append(DateTimeFormatter.ISO_LOCAL_DATE_TIME)\r\n\t\t\t\t\t\t.optionalStart().appendOffset(&quot;+HH:MM&quot;, \r\n      &quot;+00:00&quot;).optionalEnd().optionalStart()\r\n\t\t\t\t\t\t.appendOffset(&quot;+HHMM&quot;, \r\n        &quot;+0000&quot;).optionalEnd().optionalStart().appendOffset(&quot;+HH&quot;, &quot;Z&quot;)\r\n\t\t\t\t\t\t.optionalEnd().toFormatter());\r\n\t      }\r\n\r\n        }","title":"Jackson deserialize ISO8601 formatted date-time into Java8 Instant","body":"<p>I was facing this issue while sending Instant data type variable on a RMQ queue. It was giving errors in different scenarios .</p>\n<p>1st error that i encountered was</p>\n<p>java.base/java.lang.Thread.run(Thread.java:829)\\nCaused by: com.fasterxml.jackson.databind.exc.InvalidDefinitionException: Java 8 date/time type <code>java.time.Instant</code> not supported by default:</p>\n<p>Solution was too add dependency of</p>\n<pre><code>    &lt;dependency&gt;\n        &lt;groupId&gt;com.fasterxml.jackson.datatype&lt;/groupId&gt;\n        &lt;artifactId&gt;jackson-datatype-jsr310&lt;/artifactId&gt;\n    &lt;/dependency&gt;\n</code></pre>\n<p>Then second issue I started facing was that it was not able to serialise the date format . I tried to load JAVA TIME Modules with object mapper but that didn't help me.  What worked for me is as below.</p>\n<pre><code>@JsonSerialize(using = InstantSerializer.class)\n@JsonDeserialize(using = CustomInstantDeserializer.class)\nInstant updateTime;\n</code></pre>\n<p>CustomeDeserialser i had to write because it was giving error that\nInvalidDefinitionException: Class com.fasterxml.jackson.datatype.jsr310.deser.InstantDeserializer has no default (no arg) constructor\\n</p>\n<pre><code>public class CustomInstantDeserializer extends \n InstantDeserializer&lt;Instant&gt; { \n      public CustomInstantDeserializer() {\n           super(InstantDeserializer.INSTANT,\n            new DateTimeFormatterBuilder().\n     parseCaseInsensitive()\n   .append(DateTimeFormatter.ISO_LOCAL_DATE_TIME)\n                    .optionalStart().appendOffset(&quot;+HH:MM&quot;, \n  &quot;+00:00&quot;).optionalEnd().optionalStart()\n                    .appendOffset(&quot;+HHMM&quot;, \n    &quot;+0000&quot;).optionalEnd().optionalStart().appendOffset(&quot;+HH&quot;, &quot;Z&quot;)\n                    .optionalEnd().toFormatter());\n      }\n\n    }\n</code></pre>\n"}],"owner":{"account_id":265903,"reputation":5352,"user_id":2092870,"accept_rate":80,"display_name":"Krešimir Nesek"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":121757,"favorite_count":0,"down_vote_count":0,"up_vote_count":71,"accepted_answer_id":36253614,"answer_count":6,"score":71,"last_activity_date":1697803089,"creation_date":1459112158,"question_id":36252556,"body_markdown":"I&#39;m trying to deserialize an ISO8601 formatted date into Java8 `java.time.Instant` using Jackson. I registered JavaTimeModule with the ObjectMapper, and turned off the `WRITE_DATES_AS_TIMESTAMPS` setting.\r\n\r\nHowever, if one tries to deserialize `2016-03-28T19:00:00.000+01:00` it will not work, because it seems that JavaTimeModule will only deserialize date-times formatted with UTC timezone offset (e.g. `2016-03-28T18:00:00.000Z`). I then tried using `@JsonFormat` annotation like this:\r\n\r\n    @JsonFormat(shape=JsonFormat.Shape.STRING, pattern=&quot;yyyy-MM-dd&#39;T&#39;HH:mm:ss.SSSZ&quot;, timezone = &quot;UTC&quot;)\r\n\r\nAnd like this:\r\n\r\n    @JsonFormat(shape=JsonFormat.Shape.STRING, pattern=&quot;yyyy-MM-dd&#39;T&#39;HH:mm:ss.SSSZ&quot;, timezone = JsonFormat.DEFAULT_TIMEZONE)\r\n\r\nHowever, neither of these work and I get an exception:\r\n\r\n    com.fasterxml.jackson.databind.JsonMappingException: Unsupported field: YearOfEra (through reference chain: org.example.Article[&quot;date&quot;])\r\n\r\nWhich implies that timezone parameter is ignored and date time formatter doesn&#39;t know how to format an Instant without a timezone. \r\n\r\nIs there a way to deserialize a ISO8601 string that&#39;s not in UTC time zone offset to Java 8 `java.time.Instant` using Jackson and JavaTimeModule without writing a custom deserializer?\r\n \r\n ","title":"Jackson deserialize ISO8601 formatted date-time into Java8 Instant","body":"<p>I'm trying to deserialize an ISO8601 formatted date into Java8 <code>java.time.Instant</code> using Jackson. I registered JavaTimeModule with the ObjectMapper, and turned off the <code>WRITE_DATES_AS_TIMESTAMPS</code> setting.</p>\n\n<p>However, if one tries to deserialize <code>2016-03-28T19:00:00.000+01:00</code> it will not work, because it seems that JavaTimeModule will only deserialize date-times formatted with UTC timezone offset (e.g. <code>2016-03-28T18:00:00.000Z</code>). I then tried using <code>@JsonFormat</code> annotation like this:</p>\n\n<pre><code>@JsonFormat(shape=JsonFormat.Shape.STRING, pattern=\"yyyy-MM-dd'T'HH:mm:ss.SSSZ\", timezone = \"UTC\")\n</code></pre>\n\n<p>And like this:</p>\n\n<pre><code>@JsonFormat(shape=JsonFormat.Shape.STRING, pattern=\"yyyy-MM-dd'T'HH:mm:ss.SSSZ\", timezone = JsonFormat.DEFAULT_TIMEZONE)\n</code></pre>\n\n<p>However, neither of these work and I get an exception:</p>\n\n<pre><code>com.fasterxml.jackson.databind.JsonMappingException: Unsupported field: YearOfEra (through reference chain: org.example.Article[\"date\"])\n</code></pre>\n\n<p>Which implies that timezone parameter is ignored and date time formatter doesn't know how to format an Instant without a timezone. </p>\n\n<p>Is there a way to deserialize a ISO8601 string that's not in UTC time zone offset to Java 8 <code>java.time.Instant</code> using Jackson and JavaTimeModule without writing a custom deserializer?</p>\n"},{"tags":["java","maven","java-17","java-text-blocks"],"comments":[{"owner":{"account_id":7423601,"reputation":18712,"user_id":5646962,"display_name":"Thomas Kl&#228;ger"},"score":6,"creation_date":1697650332,"post_id":77318464,"comment_id":136307816,"body_markdown":"The error message is not from the Java Compiler but from the checkstyle plugin / from checkstyle. It could be that you are using an old version of the checkstyle plugin (your version is 2.17, the current version is 3.3.0) and / or an old version of checkstyle itself that doesn&#39;t yet support the multiline strings that have been added to Java 17. The fix would be to upgrade the checkstyle plugin and the checkstyle version.","body":"The error message is not from the Java Compiler but from the checkstyle plugin / from checkstyle. It could be that you are using an old version of the checkstyle plugin (your version is 2.17, the current version is 3.3.0) and / or an old version of checkstyle itself that doesn&#39;t yet support the multiline strings that have been added to Java 17. The fix would be to upgrade the checkstyle plugin and the checkstyle version."},{"owner":{"account_id":7423601,"reputation":18712,"user_id":5646962,"display_name":"Thomas Kl&#228;ger"},"score":4,"creation_date":1697650461,"post_id":77318464,"comment_id":136307835,"body_markdown":"@OHGODSPIDERS Java has support for multiline strings since around Java 15 (https://stackoverflow.com/questions/878573/does-java-have-support-for-multiline-strings) and the OPs code is valid Java code for Java 17.","body":"@OHGODSPIDERS Java has support for multiline strings since around Java 15 (<a href=\"https://stackoverflow.com/questions/878573/does-java-have-support-for-multiline-strings\" title=\"does java have support for multiline strings\">stackoverflow.com/questions/878573/&hellip;</a>) and the OPs code is valid Java code for Java 17."},{"owner":{"account_id":7423601,"reputation":18712,"user_id":5646962,"display_name":"Thomas Kl&#228;ger"},"score":4,"creation_date":1697650801,"post_id":77318464,"comment_id":136307887,"body_markdown":"According to https://github.com/checkstyle/checkstyle/issues/9111 you need at least CheckStyle version 8.36 (and a version of the CheckStyle plugin that supports CheckStyle 8.36)","body":"According to <a href=\"https://github.com/checkstyle/checkstyle/issues/9111\" rel=\"nofollow noreferrer\">github.com/checkstyle/checkstyle/issues/9111</a> you need at least CheckStyle version 8.36 (and a version of the CheckStyle plugin that supports CheckStyle 8.36)"},{"owner":{"account_id":5998820,"reputation":12656,"user_id":4712734,"display_name":"DuncG"},"score":1,"creation_date":1697652694,"post_id":77318464,"comment_id":136308180,"body_markdown":"The close as duplicate isn&#39;t correct - an unescaped quote is valid in multi-line declaration, its just that checkstyle isn&#39;t up to date.","body":"The close as duplicate isn&#39;t correct - an unescaped quote is valid in multi-line declaration, its just that checkstyle isn&#39;t up to date."},{"owner":{"account_id":318670,"reputation":15681,"user_id":636009,"display_name":"David Conrad"},"score":1,"creation_date":1697653086,"post_id":77318464,"comment_id":136308233,"body_markdown":"@ThomasKl&#228;ger your comments would form the basis of a good answer. Hint, hint.","body":"@ThomasKl&#228;ger your comments would form the basis of a good answer. Hint, hint."},{"owner":{"account_id":112317,"reputation":93939,"user_id":296328,"accept_rate":60,"display_name":"khmarbaise"},"score":0,"creation_date":1697655715,"post_id":77318464,"comment_id":136308680,"body_markdown":"Please upgrade the maven-checkstyle-plugin versions to most recent version... https://maven.apache.org/plugins/maven-checkstyle-plugin/","body":"Please upgrade the maven-checkstyle-plugin versions to most recent version... <a href=\"https://maven.apache.org/plugins/maven-checkstyle-plugin/\" rel=\"nofollow noreferrer\">maven.apache.org/plugins/maven-checkstyle-plugin</a>"}],"answers":[{"tags":[],"owner":{"account_id":7423601,"reputation":18712,"user_id":5646962,"display_name":"Thomas Kl&#228;ger"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1697660673,"creation_date":1697655275,"answer_id":77318930,"question_id":77318464,"body_markdown":"The error message is produced by an outdated version of [CheckStyle](https://checkstyle.org/).\r\n\r\nAccording to the CheckStyle ticket [Support for Java 15 Strings](https://github.com/checkstyle/checkstyle/issues/9111) you need at least CheckStyle version 8.36 if you want to use [text blocks][1] / multiline strings together with CheckStyle checks.\r\n\r\nThe error message (_org.apache.maven.plugins:maven-checkstyle-plugin:2.17:check_) indicates that your project uses the Maven-CheckStyle-Plugin version 2.17 which according to [Maven Checkstyle Plugin Releases History](https://maven.apache.org/plugins/maven-checkstyle-plugin/history.html)  by default uses CheckStyle version 6.11.2\r\n\r\nYou can try to configure your project to use the Maven CheckStyle Plugin 2.17 together with the CheckStyle version 8.36 using the following configuration (source: [Upgrading Checkstyle at Runtime](https://maven.apache.org/plugins/maven-checkstyle-plugin/examples/upgrading-checkstyle.html)):\r\n\r\n    &lt;project&gt;\r\n      ...\r\n      &lt;build&gt;\r\n        &lt;pluginManagement&gt;\r\n          &lt;plugins&gt;\r\n            &lt;plugin&gt;\r\n              &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n              &lt;artifactId&gt;maven-checkstyle-plugin&lt;/artifactId&gt;\r\n              &lt;version&gt;2.17&lt;/version&gt;\r\n              &lt;dependencies&gt;\r\n                &lt;dependency&gt;\r\n                  &lt;groupId&gt;com.puppycrawl.tools&lt;/groupId&gt;\r\n                  &lt;artifactId&gt;checkstyle&lt;/artifactId&gt;\r\n                  &lt;version&gt;8.36&lt;/version&gt;\r\n                &lt;/dependency&gt;\r\n              &lt;/dependencies&gt;\r\n            &lt;/plugin&gt;\r\n          &lt;/plugins&gt;\r\n        &lt;/pluginManagement&gt;\r\n      &lt;/build&gt;\r\n      ...\r\n    &lt;/project&gt;\r\n\r\n\r\n  [1]: https://openjdk.org/jeps/378","title":"Multi line string in Java 17","body":"<p>The error message is produced by an outdated version of <a href=\"https://checkstyle.org/\" rel=\"nofollow noreferrer\">CheckStyle</a>.</p>\n<p>According to the CheckStyle ticket <a href=\"https://github.com/checkstyle/checkstyle/issues/9111\" rel=\"nofollow noreferrer\">Support for Java 15 Strings</a> you need at least CheckStyle version 8.36 if you want to use <a href=\"https://openjdk.org/jeps/378\" rel=\"nofollow noreferrer\">text blocks</a> / multiline strings together with CheckStyle checks.</p>\n<p>The error message (<em>org.apache.maven.plugins:maven-checkstyle-plugin:2.17:check</em>) indicates that your project uses the Maven-CheckStyle-Plugin version 2.17 which according to <a href=\"https://maven.apache.org/plugins/maven-checkstyle-plugin/history.html\" rel=\"nofollow noreferrer\">Maven Checkstyle Plugin Releases History</a>  by default uses CheckStyle version 6.11.2</p>\n<p>You can try to configure your project to use the Maven CheckStyle Plugin 2.17 together with the CheckStyle version 8.36 using the following configuration (source: <a href=\"https://maven.apache.org/plugins/maven-checkstyle-plugin/examples/upgrading-checkstyle.html\" rel=\"nofollow noreferrer\">Upgrading Checkstyle at Runtime</a>):</p>\n<pre><code>&lt;project&gt;\n  ...\n  &lt;build&gt;\n    &lt;pluginManagement&gt;\n      &lt;plugins&gt;\n        &lt;plugin&gt;\n          &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n          &lt;artifactId&gt;maven-checkstyle-plugin&lt;/artifactId&gt;\n          &lt;version&gt;2.17&lt;/version&gt;\n          &lt;dependencies&gt;\n            &lt;dependency&gt;\n              &lt;groupId&gt;com.puppycrawl.tools&lt;/groupId&gt;\n              &lt;artifactId&gt;checkstyle&lt;/artifactId&gt;\n              &lt;version&gt;8.36&lt;/version&gt;\n            &lt;/dependency&gt;\n          &lt;/dependencies&gt;\n        &lt;/plugin&gt;\n      &lt;/plugins&gt;\n    &lt;/pluginManagement&gt;\n  &lt;/build&gt;\n  ...\n&lt;/project&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":29045360,"reputation":13,"user_id":22249313,"display_name":"pirateking"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1697802928,"creation_date":1697750588,"answer_id":77327173,"question_id":77318464,"body_markdown":"Upgrading the `maven-checkstyle-plugin` and `checkstyle` resolved the issue:\r\n\r\n```xml\r\n&lt;plugin&gt;\r\n  &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n  &lt;artifactId&gt;maven-checkstyle-plugin&lt;/artifactId&gt;\r\n  &lt;version&gt;3.3.0&lt;/version&gt;\r\n  &lt;dependencies&gt;\r\n    &lt;dependency&gt;\r\n      &lt;groupId&gt;com.puppycrawl.tools&lt;/groupId&gt;\r\n      &lt;artifactId&gt;checkstyle&lt;/artifactId&gt;\r\n      &lt;version&gt;10.12.1&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n  &lt;/dependencies&gt;\r\n&lt;/plugin&gt;\r\n```","title":"Multi line string in Java 17","body":"<p>Upgrading the <code>maven-checkstyle-plugin</code> and <code>checkstyle</code> resolved the issue:</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;plugin&gt;\n  &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n  &lt;artifactId&gt;maven-checkstyle-plugin&lt;/artifactId&gt;\n  &lt;version&gt;3.3.0&lt;/version&gt;\n  &lt;dependencies&gt;\n    &lt;dependency&gt;\n      &lt;groupId&gt;com.puppycrawl.tools&lt;/groupId&gt;\n      &lt;artifactId&gt;checkstyle&lt;/artifactId&gt;\n      &lt;version&gt;10.12.1&lt;/version&gt;\n    &lt;/dependency&gt;\n  &lt;/dependencies&gt;\n&lt;/plugin&gt;\n</code></pre>\n"}],"owner":{"account_id":29045360,"reputation":13,"user_id":22249313,"display_name":"pirateking"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":191,"favorite_count":0,"down_vote_count":3,"up_vote_count":1,"accepted_answer_id":77318930,"answer_count":2,"score":-2,"last_activity_date":1697802928,"creation_date":1697650005,"question_id":77318464,"body_markdown":"I am using multi line strings  in java 17.0.2 but have been recieving the following error \r\n\r\n```\r\n        String test = &quot;&quot;&quot;\r\n        {\r\n            &quot;deploymentResourceId&quot;: &quot;deployment&quot;\r\n\t    }\r\n        &quot;&quot;&quot;;\r\n```\r\nError:\r\n\r\n```\r\n/sparta/input/PackageResource.java:262:25: expecting SEMI, found &#39;&quot;\r\n        {\r\n            &quot;&#39;\r\n\r\n2023-10-17 23:31:16.027 UTC [ERROR] Failed to execute goal org.apache.maven.plugins:maven-checkstyle-plugin:2.17:check (verify-style-1) on project : Execution verify-style-1 of goal org.apache.maven.plugins:maven-checkstyle-plugin:2.17:check failed: begin 1253, end 18, length 18 -&gt; [Help 1]\r\n```\r\n\r\n\r\n\r\nUsing string builder works fine but i want to use multi line strings\r\n","title":"Multi line string in Java 17","body":"<p>I am using multi line strings  in java 17.0.2 but have been recieving the following error</p>\n<pre><code>        String test = &quot;&quot;&quot;\n        {\n            &quot;deploymentResourceId&quot;: &quot;deployment&quot;\n        }\n        &quot;&quot;&quot;;\n</code></pre>\n<p>Error:</p>\n<pre><code>/sparta/input/PackageResource.java:262:25: expecting SEMI, found '&quot;\n        {\n            &quot;'\n\n2023-10-17 23:31:16.027 UTC [ERROR] Failed to execute goal org.apache.maven.plugins:maven-checkstyle-plugin:2.17:check (verify-style-1) on project : Execution verify-style-1 of goal org.apache.maven.plugins:maven-checkstyle-plugin:2.17:check failed: begin 1253, end 18, length 18 -&gt; [Help 1]\n</code></pre>\n<p>Using string builder works fine but i want to use multi line strings</p>\n"},{"tags":["java","android","in-app"],"owner":{"display_name":"user4450672"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":292,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1697802866,"creation_date":1691003594,"question_id":76822871,"body_markdown":"The appUpdateManager.startUpdateFlowForResult portion of the In-App Update shown on developer.android shows as being deprecated in Android Studio. I&#39;ve searched for something that would work in its place, but the most current examples are only in Kotlin, and I&#39;m still using Java... for the time being. Anyway, I understand the appUpdateManager.startUpdateFlowForResult that still works has different arguments. I figured out part of it, but still have one error on &quot;Activity&quot;.\r\n\r\nI tried &quot;MainActivity.this&quot;, and I tried just plain &quot;activity&quot;,\r\nbut it didn&#39;t like either of those. The Context Actions suggest &quot;Introduce Local Variable&quot;.\r\nI did that... Activity activity; and ActivityResultLauncher&lt;IntentSenderRequest&gt; activity;\r\nBut even though &quot;activity&quot; isn&#39;t in Red font color anymore, it&#39;s underlined like it&#39;s still an issue.\r\n\r\nI saw on another post here that [Beyka/Android-TifBitmapFactory][1] was a breeze, and [code.google.com/p/tiffonandroid][2] but I haven&#39;t figured either of them out! Still looking for documentation, and maybe an example... just  to display a TIF\r\n\r\n&lt;code&gt;\r\nappUpdateManager.startUpdateFlowForResult(\r\n                    appUpdateInfo,\r\n                    MainActivity.this,\r\n                    AppUpdateOptions.defaultOptions(AppUpdateType.IMMEDIATE)\r\n&lt;/code&gt;\r\n\r\n\r\n  [1]: https://github.com/Beyka/Android-TiffBitmapFactory\r\n  [2]: https://code.google.com/p/tiffonandroid","title":"In-App Update appUpdateManager.startUpdateFlowForResult Android Java","body":"<p>The appUpdateManager.startUpdateFlowForResult portion of the In-App Update shown on developer.android shows as being deprecated in Android Studio. I've searched for something that would work in its place, but the most current examples are only in Kotlin, and I'm still using Java... for the time being. Anyway, I understand the appUpdateManager.startUpdateFlowForResult that still works has different arguments. I figured out part of it, but still have one error on &quot;Activity&quot;.</p>\n<p>I tried &quot;MainActivity.this&quot;, and I tried just plain &quot;activity&quot;,\nbut it didn't like either of those. The Context Actions suggest &quot;Introduce Local Variable&quot;.\nI did that... Activity activity; and ActivityResultLauncher activity;\nBut even though &quot;activity&quot; isn't in Red font color anymore, it's underlined like it's still an issue.</p>\n<p>I saw on another post here that <a href=\"https://github.com/Beyka/Android-TiffBitmapFactory\" rel=\"nofollow noreferrer\">Beyka/Android-TifBitmapFactory</a> was a breeze, and <a href=\"https://code.google.com/p/tiffonandroid\" rel=\"nofollow noreferrer\">code.google.com/p/tiffonandroid</a> but I haven't figured either of them out! Still looking for documentation, and maybe an example... just  to display a TIF</p>\n<code>\nappUpdateManager.startUpdateFlowForResult(\n                    appUpdateInfo,\n                    MainActivity.this,\n                    AppUpdateOptions.defaultOptions(AppUpdateType.IMMEDIATE)\n</code>\n"},{"tags":["java","io","nio"],"answers":[{"tags":[],"owner":{"account_id":71739,"reputation":307142,"user_id":207421,"accept_rate":82,"display_name":"user207421"},"down_vote_count":2,"up_vote_count":20,"is_accepted":false,"score":18,"last_activity_date":1466299506,"creation_date":1368102800,"answer_id":16461868,"question_id":16461284,"body_markdown":"They&#39;re not equivalent at all.\r\n\r\nA `ByteBuffer` is normally ready for `read()` (or for `put()`).\r\n\r\n`flip()` makes it ready for `write()` (or for `get()`).\r\n\r\n`rewind()` and `compact()` and `clear()` make it ready for `read()/put()` again after `write()` (or `get()`).","title":"difference between bytebuffer.flip() and bytebuffer.rewind()","body":"<p>They're not equivalent at all.</p>\n\n<p>A <code>ByteBuffer</code> is normally ready for <code>read()</code> (or for <code>put()</code>).</p>\n\n<p><code>flip()</code> makes it ready for <code>write()</code> (or for <code>get()</code>).</p>\n\n<p><code>rewind()</code> and <code>compact()</code> and <code>clear()</code> make it ready for <code>read()/put()</code> again after <code>write()</code> (or <code>get()</code>).</p>\n"},{"tags":[],"owner":{"account_id":5299388,"reputation":773,"user_id":4229567,"display_name":"sofia"},"down_vote_count":1,"up_vote_count":5,"is_accepted":false,"score":4,"last_activity_date":1456041101,"creation_date":1456041101,"answer_id":35533658,"question_id":16461284,"body_markdown":"The rewind( ) method is similar to flip( ) but does not affect the limit. It only sets the position back to 0. You can use rewind( ) to go back and reread the data in a buffer that has already been flipped. A common situation would be : after you use flip(), you read the data from the buffer, the you want to reread the data, this method would work.\r\n","title":"difference between bytebuffer.flip() and bytebuffer.rewind()","body":"<p>The rewind( ) method is similar to flip( ) but does not affect the limit. It only sets the position back to 0. You can use rewind( ) to go back and reread the data in a buffer that has already been flipped. A common situation would be : after you use flip(), you read the data from the buffer, the you want to reread the data, this method would work.</p>\n"},{"tags":[],"owner":{"account_id":477949,"reputation":5596,"user_id":889742,"accept_rate":28,"display_name":"Gonen I"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1474222966,"creation_date":1474222966,"answer_id":39561120,"question_id":16461284,"body_markdown":"Here is an example where the two will produce different results.\r\nAs you said, both set position to 0, the difference between the two is that flip sets the limit to the previous position.\r\n\r\nSo with flip, if you were writing ( put ) , the limit for reading ( get ) will become the position of the last element you wrote. If you try to read any more than that, it will throw an exception.\r\n\r\nRewind leaves the limit unchanged. Assuming it was at capacity ( buffer size ) , it will let you keep on reading beyond the data that you actually wrote, in this case reading the initial zeros that the buffer was initialized with.\r\n\r\n\tByteBuffer bb = ByteBuffer.allocateDirect(2);\r\n\tbyte b = 127;\r\n\tbb.put(b);\r\n\tbb.rewind();//or flip();\r\n\r\n\tSystem.out.println(bb.get());  // will print 127 in either case\r\n\tSystem.out.println(bb.get());  // will print 0 for rewind, BufferUnderflow exception for flip","title":"difference between bytebuffer.flip() and bytebuffer.rewind()","body":"<p>Here is an example where the two will produce different results.\nAs you said, both set position to 0, the difference between the two is that flip sets the limit to the previous position.</p>\n\n<p>So with flip, if you were writing ( put ) , the limit for reading ( get ) will become the position of the last element you wrote. If you try to read any more than that, it will throw an exception.</p>\n\n<p>Rewind leaves the limit unchanged. Assuming it was at capacity ( buffer size ) , it will let you keep on reading beyond the data that you actually wrote, in this case reading the initial zeros that the buffer was initialized with.</p>\n\n<pre><code>ByteBuffer bb = ByteBuffer.allocateDirect(2);\nbyte b = 127;\nbb.put(b);\nbb.rewind();//or flip();\n\nSystem.out.println(bb.get());  // will print 127 in either case\nSystem.out.println(bb.get());  // will print 0 for rewind, BufferUnderflow exception for flip\n</code></pre>\n"},{"tags":[],"owner":{"account_id":9247444,"reputation":449,"user_id":6868909,"display_name":"lxy"},"down_vote_count":0,"up_vote_count":21,"is_accepted":false,"score":21,"last_activity_date":1521176269,"creation_date":1499170521,"answer_id":44905735,"question_id":16461284,"body_markdown":"From the source code, they are very similar. You can see the follow:\r\n\r\n    public final Buffer flip() {\r\n        limit = position;\r\n        position = 0;\r\n        mark = -1;\r\n        return this;\r\n    }\r\n\r\n    public final Buffer rewind() {\r\n        position = 0;\r\n        mark = -1;\r\n        return this;\r\n    }\r\n\r\n\r\n\r\nSo the difference is the `flip` set the `limit` to the `position`, while `rewind` not. \r\nConsider you have allocated a buffer with 8 bytes, you have filled the buffer with 4 bytes, then the position is set to 3, just show as follow:\r\n\r\n        [ 1  1  1  1  0  0  0  0]\r\n                   |           |\r\n    flip           limit       |\r\n    rewind                     limit\r\n\r\nSo `rewind` just used limit has set appropriately.","title":"difference between bytebuffer.flip() and bytebuffer.rewind()","body":"<p>From the source code, they are very similar. You can see the follow:</p>\n\n<pre><code>public final Buffer flip() {\n    limit = position;\n    position = 0;\n    mark = -1;\n    return this;\n}\n\npublic final Buffer rewind() {\n    position = 0;\n    mark = -1;\n    return this;\n}\n</code></pre>\n\n<p>So the difference is the <code>flip</code> set the <code>limit</code> to the <code>position</code>, while <code>rewind</code> not. \nConsider you have allocated a buffer with 8 bytes, you have filled the buffer with 4 bytes, then the position is set to 3, just show as follow:</p>\n\n<pre><code>    [ 1  1  1  1  0  0  0  0]\n               |           |\nflip           limit       |\nrewind                     limit\n</code></pre>\n\n<p>So <code>rewind</code> just used limit has set appropriately.</p>\n"},{"tags":[],"owner":{"account_id":4655265,"reputation":779,"user_id":3771015,"accept_rate":25,"display_name":"crakama"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1517538540,"creation_date":1517538540,"answer_id":48574848,"question_id":16461284,"body_markdown":"@user963241 To add more colour on @EJP&#39;s answer.\r\n\r\n&gt; flip() makes it ready for write() (or for get())\r\n\r\n**get() Example;** \r\n\r\nYou might want to read data ***from the buffer*** (*assuming that you had initially stored it in there*)and use it for something else such as converting to a string and manipulate it for further use. \r\n\r\n\r\n\r\n    ByteBuffer buf = ByteBuffer.allocateDirect(80);\r\n    private String method(){\r\n    buf.flip();\r\n    byte[] bytes = byte[10]; //creates a byte array where you can place your data \r\n    buf.get(bytes); //reads data from buffer and places it in the byte array created above\r\n    return bytes;\r\n    }\r\n\r\n\r\n**write() Example;** After you have read data from socket channel **into the buffer** you might want to write it back to socket channel - assuming that you want to implement something like a server that echos same message received from client. \r\n\r\nSo you will read from channel to buffer and from buffer back to channel\r\n\r\n    SocketChannel socketChannel = SocketChannel.open();\r\n    ...\r\n    \r\n    ByteBuffer buf = ByteBuffer.allocateDirect(80);\r\n    \r\n    int data = socketChannel.read(buf); // Reads from channel and places it into the buffer\r\n    while(data != -1){ //checks if not end of reading\r\n    buf.flip();        //prepares for writing\r\n    ....\r\n    socketChannel.write(buf) // if you had initially placed data into buf and you want to read \r\n                             //from it so that you can write it back into the channel\r\n                             \r\n\r\n      }\r\n \r\n\r\n","title":"difference between bytebuffer.flip() and bytebuffer.rewind()","body":"<p>@user963241 To add more colour on @EJP's answer.</p>\n\n<blockquote>\n  <p>flip() makes it ready for write() (or for get())</p>\n</blockquote>\n\n<p><strong>get() Example;</strong> </p>\n\n<p>You might want to read data <strong><em>from the buffer</em></strong> (<em>assuming that you had initially stored it in there</em>)and use it for something else such as converting to a string and manipulate it for further use. </p>\n\n<pre><code>ByteBuffer buf = ByteBuffer.allocateDirect(80);\nprivate String method(){\nbuf.flip();\nbyte[] bytes = byte[10]; //creates a byte array where you can place your data \nbuf.get(bytes); //reads data from buffer and places it in the byte array created above\nreturn bytes;\n}\n</code></pre>\n\n<p><strong>write() Example;</strong> After you have read data from socket channel <strong>into the buffer</strong> you might want to write it back to socket channel - assuming that you want to implement something like a server that echos same message received from client. </p>\n\n<p>So you will read from channel to buffer and from buffer back to channel</p>\n\n<pre><code>SocketChannel socketChannel = SocketChannel.open();\n...\n\nByteBuffer buf = ByteBuffer.allocateDirect(80);\n\nint data = socketChannel.read(buf); // Reads from channel and places it into the buffer\nwhile(data != -1){ //checks if not end of reading\nbuf.flip();        //prepares for writing\n....\nsocketChannel.write(buf) // if you had initially placed data into buf and you want to read \n                         //from it so that you can write it back into the channel\n\n\n  }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":9893515,"reputation":6772,"user_id":7325804,"display_name":"Arnav Rao"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1527052384,"creation_date":1527052384,"answer_id":50480271,"question_id":16461284,"body_markdown":"Buffer has position, limit and capacity properties. You can allocate space for n number of elements while creating a buffer. Here n is the capacity. After buffer is allocated, position is set to 0 and limit is set to capacity.\r\n\r\nIf you filled the buffer with n-x number of elements, position will be set to n-x. Buffer will have empty elements after n-x.\r\n\r\nIf you want to drain the buffer at this point and that too want only non empty values, you need set limit to current position and position to zero. Using hasRemaining(), you can get elements till n-x. Flip sets the limit and position properties like described above. \r\n\r\nDifference between flip and rewind is that flip sets the position to 0 and sets limit to active content. Method rewind just sets the position to 0.\r\n\r\nFor more information http://www.zoftino.com/java-nio-tutorial","title":"difference between bytebuffer.flip() and bytebuffer.rewind()","body":"<p>Buffer has position, limit and capacity properties. You can allocate space for n number of elements while creating a buffer. Here n is the capacity. After buffer is allocated, position is set to 0 and limit is set to capacity.</p>\n\n<p>If you filled the buffer with n-x number of elements, position will be set to n-x. Buffer will have empty elements after n-x.</p>\n\n<p>If you want to drain the buffer at this point and that too want only non empty values, you need set limit to current position and position to zero. Using hasRemaining(), you can get elements till n-x. Flip sets the limit and position properties like described above. </p>\n\n<p>Difference between flip and rewind is that flip sets the position to 0 and sets limit to active content. Method rewind just sets the position to 0.</p>\n\n<p>For more information <a href=\"http://www.zoftino.com/java-nio-tutorial\" rel=\"nofollow noreferrer\">http://www.zoftino.com/java-nio-tutorial</a></p>\n"},{"tags":[],"owner":{"account_id":29580870,"reputation":67,"user_id":22670690,"display_name":"GreyBit"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1697802489,"creation_date":1697717083,"answer_id":77323600,"question_id":16461284,"body_markdown":"A buffer is conceptually a sequential store of data (let&#39;s say of bytes) into which you can write data and that you can read data from.  \r\n(Forget any associations with `Channel`&#39;s `read` and `write`. When I say &quot;read&quot; I&#39;m referring to `Buffer.get` and when I say `write` I mean `Buffer.put`)\r\n\r\nThe common  use case is to write something to the buffer and then read what was written.\r\n\r\nThe `limit` marks the position in the buffer where either operation (read or write) should stop: it is the first position that should *not* be read/written.\r\n\r\nIf we want to write to a buffer, we want to start at the beginning and stop when the buffer is full; there&#39;s no point in stopping earlier (unless we ran out of data). So it makes sense to set the `limit` to the `capacity` of the buffer.\r\nThus, when we want to start writing to a buffer, we call `clear`. This sets the current `position` to the start of the buffer and the `limit` to its capacity.\r\n\r\nIf we want to start reading from a buffer, the situation is different. We don&#39;t know how many elements were actually written into the buffer - we don&#39;t know if it&#39;s full. But we usually only want to read as many elements as were written: anything past that point is essentially garbage; reading till the end of the buffer is likely a bug!  \r\n\r\nLuckily, the previous write operation has left its last position in place, so the buffer itself *does* know how many elements were written into the buffer. It encapsulates this knowledge nicely in the form of the `flip` method which sets the `limit` to the current `position` and then sets the current `position` to 0.\r\n\r\nIn essence, this means that after having called `flip`, when we now start reading from the buffer, we will start at the beginning and stop after we&#39;ve read the last element written by the previous write operation. This ensures we don&#39;t read garbage.\r\n\r\nThe function of `rewind` is similar to but decidedly different from that of `flip`. It does *not* reset `limit` to the old `position`. Using `rewind` mostly makes sense when you have more specific use cases than simply writing into and then reading out of a buffer.  \r\nFor example you would use `rewind` if you have written to the buffer, called `flip`, read the buffer, and now want to read it a second (or third) time.    \r\n*Do not use* `rewind` *unless you have a clear and specific reason. For the common case of reading all data that was just written to a buffer, use* `flip` *instead.*\r\n\r\nRewriting your example to be closer to the common use case:\r\n\r\n    ByteBuffer bb = ByteBuffer.allocate(2); // limit initially 2\r\n    byte b = 127;\r\n    bb.put(b);\r\n\r\n    bb.rewind(); // after this call limit is still 2: probably not what we want!\r\n\r\n    System.out.println(&quot;Reading buffer after rewinding:&quot;);\r\n    while (bb.hasRemaining()) {\r\n        System.out.println(bb.get()); // two lines! 127 followed by 0\r\n    }\r\n\r\n    ByteBuffer bbFlip = ByteBuffer.allocate(2); // limit initially 2\r\n    bbFlip.put(b);\r\n\r\n    bbFlip.flip(); // after this call limit is 1 because position was 1 when we called flip()\r\n\r\n    System.out.println(&quot;Reading buffer after flipping:&quot;);\r\n    while (bbFlip.hasRemaining()) {\r\n        System.out.println(bbFlip.get()); // only one line: 127\r\n    }\r\n\r\nAs illustrated, when we use `rewind` in this way, we lose the information regarding how many elements were written to our buffer. If our requirement is that we must read those (and only those) elements that were just written, then we&#39;ve just introduced a bug into our code!","title":"difference between bytebuffer.flip() and bytebuffer.rewind()","body":"<p>A buffer is conceptually a sequential store of data (let's say of bytes) into which you can write data and that you can read data from.<br />\n(Forget any associations with <code>Channel</code>'s <code>read</code> and <code>write</code>. When I say &quot;read&quot; I'm referring to <code>Buffer.get</code> and when I say <code>write</code> I mean <code>Buffer.put</code>)</p>\n<p>The common  use case is to write something to the buffer and then read what was written.</p>\n<p>The <code>limit</code> marks the position in the buffer where either operation (read or write) should stop: it is the first position that should <em>not</em> be read/written.</p>\n<p>If we want to write to a buffer, we want to start at the beginning and stop when the buffer is full; there's no point in stopping earlier (unless we ran out of data). So it makes sense to set the <code>limit</code> to the <code>capacity</code> of the buffer.\nThus, when we want to start writing to a buffer, we call <code>clear</code>. This sets the current <code>position</code> to the start of the buffer and the <code>limit</code> to its capacity.</p>\n<p>If we want to start reading from a buffer, the situation is different. We don't know how many elements were actually written into the buffer - we don't know if it's full. But we usually only want to read as many elements as were written: anything past that point is essentially garbage; reading till the end of the buffer is likely a bug!</p>\n<p>Luckily, the previous write operation has left its last position in place, so the buffer itself <em>does</em> know how many elements were written into the buffer. It encapsulates this knowledge nicely in the form of the <code>flip</code> method which sets the <code>limit</code> to the current <code>position</code> and then sets the current <code>position</code> to 0.</p>\n<p>In essence, this means that after having called <code>flip</code>, when we now start reading from the buffer, we will start at the beginning and stop after we've read the last element written by the previous write operation. This ensures we don't read garbage.</p>\n<p>The function of <code>rewind</code> is similar to but decidedly different from that of <code>flip</code>. It does <em>not</em> reset <code>limit</code> to the old <code>position</code>. Using <code>rewind</code> mostly makes sense when you have more specific use cases than simply writing into and then reading out of a buffer.<br />\nFor example you would use <code>rewind</code> if you have written to the buffer, called <code>flip</code>, read the buffer, and now want to read it a second (or third) time.<br />\n<em>Do not use</em> <code>rewind</code> <em>unless you have a clear and specific reason. For the common case of reading all data that was just written to a buffer, use</em> <code>flip</code> <em>instead.</em></p>\n<p>Rewriting your example to be closer to the common use case:</p>\n<pre><code>ByteBuffer bb = ByteBuffer.allocate(2); // limit initially 2\nbyte b = 127;\nbb.put(b);\n\nbb.rewind(); // after this call limit is still 2: probably not what we want!\n\nSystem.out.println(&quot;Reading buffer after rewinding:&quot;);\nwhile (bb.hasRemaining()) {\n    System.out.println(bb.get()); // two lines! 127 followed by 0\n}\n\nByteBuffer bbFlip = ByteBuffer.allocate(2); // limit initially 2\nbbFlip.put(b);\n\nbbFlip.flip(); // after this call limit is 1 because position was 1 when we called flip()\n\nSystem.out.println(&quot;Reading buffer after flipping:&quot;);\nwhile (bbFlip.hasRemaining()) {\n    System.out.println(bbFlip.get()); // only one line: 127\n}\n</code></pre>\n<p>As illustrated, when we use <code>rewind</code> in this way, we lose the information regarding how many elements were written to our buffer. If our requirement is that we must read those (and only those) elements that were just written, then we've just introduced a bug into our code!</p>\n"}],"owner":{"account_id":2296572,"reputation":12728,"user_id":2017866,"accept_rate":76,"display_name":"Rollerball"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":21242,"favorite_count":0,"down_vote_count":0,"up_vote_count":32,"answer_count":7,"score":32,"last_activity_date":1697802489,"creation_date":1368100837,"question_id":16461284,"body_markdown":"I am aware that flip() set the current buffer position to 0 and set the limit to the previous buffer position whereas rewind() just set the current buffer position to 0.\r\n\r\nIn the following code, either I use rewind() or flip() i get the same result.\r\n\r\n    byte b = 127;\r\n\tbb.put(b);\r\n\tbb.rewind();//or flip();\r\n\t\r\n\tSystem.out.println(bb.get());\r\n\tbb.rewind();// or flip();\r\n\tSystem.out.println(bb.get());\r\n\t\r\nCould you provide me with a real example where the difference of these 2 methods really matters? Thanks in advance.","title":"difference between bytebuffer.flip() and bytebuffer.rewind()","body":"<p>I am aware that flip() set the current buffer position to 0 and set the limit to the previous buffer position whereas rewind() just set the current buffer position to 0.</p>\n<p>In the following code, either I use rewind() or flip() i get the same result.</p>\n<pre><code>byte b = 127;\nbb.put(b);\nbb.rewind();//or flip();\n\nSystem.out.println(bb.get());\nbb.rewind();// or flip();\nSystem.out.println(bb.get());\n</code></pre>\n<p>Could you provide me with a real example where the difference of these 2 methods really matters? Thanks in advance.</p>\n"},{"tags":["java","apache","apache-poi","hssf"],"comments":[{"owner":{"account_id":1586146,"reputation":2608,"user_id":1470454,"display_name":"Norbert Radyk"},"score":2,"creation_date":1399443763,"post_id":23506238,"comment_id":36057908,"body_markdown":"One suggestion would be that in Apache POI some of the resources such as CellStyle and Font need to be reused otherwise a new object will be attached every time to the cell (there is no notion of checking whether the given style has been already created). Can you please post your code and describe a bit more the inputs (size, number of rows etc.) to avoid speculation on what could have gone wrong?","body":"One suggestion would be that in Apache POI some of the resources such as CellStyle and Font need to be reused otherwise a new object will be attached every time to the cell (there is no notion of checking whether the given style has been already created). Can you please post your code and describe a bit more the inputs (size, number of rows etc.) to avoid speculation on what could have gone wrong?"},{"owner":{"account_id":350017,"reputation":47555,"user_id":685641,"display_name":"Gagravarr"},"score":0,"creation_date":1399451436,"post_id":23506238,"comment_id":36062015,"body_markdown":"Are you sure you&#39;re removing all references to the file when you&#39;re done? No lingering entries in lists or maps? No streams left open? No references passed to other libraries that might cache things?","body":"Are you sure you&#39;re removing all references to the file when you&#39;re done? No lingering entries in lists or maps? No streams left open? No references passed to other libraries that might cache things?"},{"owner":{"account_id":1438052,"reputation":243,"user_id":1359010,"accept_rate":0,"display_name":"user1359010"},"score":0,"creation_date":1399499398,"post_id":23506238,"comment_id":36093885,"body_markdown":"Norbert: thanks for suggestion. Code is very large (and ugly) so it might not help to post. Re: sheet size -- quite modest: three sheets, two w/200 rows of 5 cols, one with 2000 rows of 3 cols. So ss size likely not the issue. Can you indicate source of claim that CellStyle and Font need to be reused, so I can see what *else* is in that category, and can re-use accordingly? As noted, I am prepared to re-use rather than generate new objects, if I know which have to be handled that way.","body":"Norbert: thanks for suggestion. Code is very large (and ugly) so it might not help to post. Re: sheet size -- quite modest: three sheets, two w/200 rows of 5 cols, one with 2000 rows of 3 cols. So ss size likely not the issue. Can you indicate source of claim that CellStyle and Font need to be reused, so I can see what <i>else</i> is in that category, and can re-use accordingly? As noted, I am prepared to re-use rather than generate new objects, if I know which have to be handled that way."}],"answers":[{"tags":[],"owner":{"account_id":17659919,"reputation":608,"user_id":12818585,"display_name":"Andrea Ciccotta"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1697802439,"creation_date":1697796064,"answer_id":77330026,"question_id":23506238,"body_markdown":"I recommend to call workbook `.close()` method at the end of your flow.","title":"Memory leak when using Apache POI HSSF?","body":"<p>I recommend to call workbook <code>.close()</code> method at the end of your flow.</p>\n"}],"owner":{"account_id":1438052,"reputation":243,"user_id":1359010,"accept_rate":0,"display_name":"user1359010"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":1832,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1697802439,"creation_date":1399419041,"question_id":23506238,"body_markdown":"Have looked around extensively but can&#39;t find a definitive answer to this: are objects created using Apachie POI HSSF reclaimed by the normal Java gc, or do I need to do something else?\r\n\r\nI have a Java program that reads files of test data and writes xls files of data analysis. I&#39;ve noticed that the working set size (as reported by Process Explorer) gets larger by about 3MB for each file processed, leading me to suspect that (despite explicit calls to gc), the POI objects (cells, rows, sheets) are not being reclaimed, even though there are no lingering pointers to them once each file is written.\r\n\r\nI had not anticipated this, so the code currently creates new objects (cells, etc.) every time it needs one. One suggestion I have seen says to create the needed sheets, rows, cells once, then just keep setting new values in them before writing out each xls file. Will this in fact cut down on memory usage or does setting new values into cells also eat memory?\r\n\r\nIn case it matters, I&#39;m using poi-3.9-20121203\r\n\r\nI&#39;m running into a problem because I&#39;ve now got several thousand files to process and wind up with out of memory errors. (For various reasons it&#39;s much easier if I can do them all in one pass, instead of having to do say 500 at a time.)\r\n\r\nMany thanks for any recommendations and/or suggestions.\r\n","title":"Memory leak when using Apache POI HSSF?","body":"<p>Have looked around extensively but can't find a definitive answer to this: are objects created using Apachie POI HSSF reclaimed by the normal Java gc, or do I need to do something else?</p>\n\n<p>I have a Java program that reads files of test data and writes xls files of data analysis. I've noticed that the working set size (as reported by Process Explorer) gets larger by about 3MB for each file processed, leading me to suspect that (despite explicit calls to gc), the POI objects (cells, rows, sheets) are not being reclaimed, even though there are no lingering pointers to them once each file is written.</p>\n\n<p>I had not anticipated this, so the code currently creates new objects (cells, etc.) every time it needs one. One suggestion I have seen says to create the needed sheets, rows, cells once, then just keep setting new values in them before writing out each xls file. Will this in fact cut down on memory usage or does setting new values into cells also eat memory?</p>\n\n<p>In case it matters, I'm using poi-3.9-20121203</p>\n\n<p>I'm running into a problem because I've now got several thousand files to process and wind up with out of memory errors. (For various reasons it's much easier if I can do them all in one pass, instead of having to do say 500 at a time.)</p>\n\n<p>Many thanks for any recommendations and/or suggestions.</p>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":967624,"reputation":10828,"user_id":990750,"accept_rate":50,"display_name":"Tarik"},"score":0,"creation_date":1635733124,"post_id":69791042,"comment_id":123365708,"body_markdown":"If this is an academic exercise, then ok. If this is for a production system, use established authentication mechanisms using widely adopted libraries. On Windows platform use Windows integrated authentication.","body":"If this is an academic exercise, then ok. If this is for a production system, use established authentication mechanisms using widely adopted libraries. On Windows platform use Windows integrated authentication."}],"answers":[{"tags":[],"owner":{"account_id":19092422,"reputation":51311,"user_id":13942448,"display_name":"jccampanero"},"down_vote_count":1,"up_vote_count":2,"is_accepted":false,"score":1,"last_activity_date":1635781402,"creation_date":1635721812,"answer_id":69791273,"question_id":69791042,"body_markdown":"Your code looks fine (well, be aware that you are using SHA-512 not SHA-256 as the question suggest) but please, take into account that you need to store the salt as well as the obtained hash in the database in order to validate the user password later.\r\n\r\nSalts are used in hashes as a way to protect against password identification, i.e., in order to prevent that applying the same hash algorithm to the same password for two different subjects gave as a result the same hash.\r\n\r\nBasically, you hash the result of concatenating the generated random salt and the user provided password: as mentioned, to validate the password later you need to store in the database the password as well.\r\n\r\nIn your test you should always use the same `salt`:\r\n\r\n```java\r\npublic static void main(String[] args) {\r\n    //do some things ....\r\n    System.out.println(&quot;\\nEnter your password&quot;);\r\n    String password = scanner.nextLine();\r\n\r\n    // The salt should be the same every time you generate the hash\r\n    byte[] salt = getSalt();\r\n\r\n    try {\r\n        securePassword = get_SHA_512_SecurePassword(password, salt); // This is saved in the database.\r\n        System.out.println(securePassword);\r\n    \r\n    } catch (NoSuchAlgorithmException e) {\r\n        e.printStackTrace();\r\n    }\r\n\r\n    //Now ask user to enter his password\r\n    System.out.println(&quot;Enter your password&quot;);\r\n    String password1 = scanner.nextLine();\r\n\r\n    //validate user password. Compare password with password1\r\n    try {\r\n        securePassword1 = get_SHA_512_SecurePassword(password1, salt);\r\n        System.out.println(securePassword1);\r\n    \r\n    } catch (NoSuchAlgorithmException e) {\r\n        e.printStackTrace();\r\n    }\r\n\r\n    //I believe this is wrong but I don&#39;t have alternative\r\n    if (securePassword.equals(securePassword1)) {\r\n        System.out.println(&quot;Both are equal&quot;);\r\n    } else {\r\n        System.out.println(&quot;Both are not equal&quot;);\r\n    }\r\n}\r\n```\r\n\r\n------\r\n\r\nA word of caution, though.\r\n\r\nThe proposed approach has several disadvantages, among others:\r\n\r\n - As you indicated in your comment, you need to manage `salt`s in addition to the password themselves.\r\n - The SHA-* message digest algorithms are more suitable for general purpose hashing.\r\n\r\nFor these and other reasons, especially to improve security, to deal with [password hashing](https://en.wikipedia.org/wiki/Key_derivation_function#Password_hashing) exist a whole family of well khown algorithms such as [`bcrypt`](https://en.wikipedia.org/wiki/Bcrypt), [`PBKDF2`](https://en.wikipedia.org/wiki/PBKDF2), or the more resource expensive [`scrypt`](https://en.wikipedia.org/wiki/Scrypt), to name some of them.\r\n\r\nPlease, prefer the use of any of these algorithms and, if possible, use a battle tested and widely used implementation such as the one provided by [BouncyCastle](https://www.bouncycastle.org/) - even in these libraries you can find [flaws](https://portswigger.net/daily-swig/bcrypt-implementation-flaw-in-bouncy-castle-crypto-library-laid-bare). For instance:\r\n\r\n```java\r\nimport java.security.SecureRandom;\r\n\r\nimport org.bouncycastle.crypto.generators.OpenBSDBCrypt;\r\n\r\npublic class BCryptPasswordHashing {\r\n\r\n  private static final SecureRandom  secureRandom = new SecureRandom();\r\n\r\n  private final int costFactor;\r\n\r\n  /**\r\n   * Creates a new instance of &lt;code&gt;BCryptPasswordHashing&lt;/code&gt;.\r\n   *\r\n   * @param costFactor the BCrypt cost factor, must be between 4 and 31, inclusive.\r\n   *                   The greatest this value, the greatest hashing strength, but\r\n   *                   more computational power as well.\r\n   */\r\n  public BCryptPasswordHashing(int costFactor) {\r\n    this.costFactor = costFactor;\r\n  }\r\n\r\n  public final String hashPassword(char[] password) {\r\n    if (password == null) {\r\n      return null;\r\n    }\r\n\r\n    final byte[] salt = this.getSalt();\r\n    final String bCryptHash = OpenBSDBCrypt.generate(password, salt, this.costFactor);\r\n    return bCryptHash;\r\n  }\r\n\r\n  public final boolean verifyPassword(char[] password, String storedPassword) {\r\n    if (password == null) {\r\n      return (storedPassword == null);\r\n    }\r\n\r\n    if (storedPassword == null) {\r\n      return false;\r\n    }\r\n\r\n    return OpenBSDBCrypt.checkPassword(storedPassword, password);\r\n  }\r\n\r\n  private byte[] getSalt() {\r\n    byte[] salt = new byte[16]; // BCrypt salt size\r\n    secureRandom.nextBytes(salt);\r\n    return salt;\r\n  }\r\n}\r\n```\r\n\r\nYou can test this code with the following main method:\r\n\r\n```java\r\npublic static void main(String[] args) {\r\n  //do some things ....\r\n  System.out.println(&quot;\\nEnter your password&quot;);\r\n  String password = scanner.nextLine();\r\n  \r\n  // In my opinion, a cost factor between 12 and 16 is ok\r\n  // Please, consider read: https://labs.clio.com/bcrypt-cost-factor-4ca0a9b03966 \r\n  final BCryptPasswordHashing bCryptPasswordHashing = new BCryptPasswordHashing(12);\r\n  final String bCryptHash = bCryptPasswordHashing.hashPassword(password.toCharArray());\r\n  \r\n  //Now ask user to enter his password\r\n  System.out.println(&quot;Enter your password&quot;);\r\n  String password1 = scanner.nextLine();\r\n\r\n  final boolean passwordMatch = bCryptPasswordHashing.verifyPassword(password1.toCharArray(), bCryptHash);\r\n\r\n  if (passwordMatch) {\r\n    System.out.println(&quot;Both are equal&quot;);\r\n  } else {\r\n    System.out.println(&quot;Both are not equal&quot;);\r\n  }\r\n}\r\n```\r\n\r\nAlthough my recommendation had been to use a battle tested library, for its simplicity, it is worth value to mention the different algorithms implementations provided by Patrick Favre. Consider for instance [this](https://github.com/patrickfav/bcrypt) of BCrypt.","title":"How to validate user password after hashing using sha-256 salted in Java","body":"<p>Your code looks fine (well, be aware that you are using SHA-512 not SHA-256 as the question suggest) but please, take into account that you need to store the salt as well as the obtained hash in the database in order to validate the user password later.</p>\n<p>Salts are used in hashes as a way to protect against password identification, i.e., in order to prevent that applying the same hash algorithm to the same password for two different subjects gave as a result the same hash.</p>\n<p>Basically, you hash the result of concatenating the generated random salt and the user provided password: as mentioned, to validate the password later you need to store in the database the password as well.</p>\n<p>In your test you should always use the same <code>salt</code>:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public static void main(String[] args) {\n    //do some things ....\n    System.out.println(&quot;\\nEnter your password&quot;);\n    String password = scanner.nextLine();\n\n    // The salt should be the same every time you generate the hash\n    byte[] salt = getSalt();\n\n    try {\n        securePassword = get_SHA_512_SecurePassword(password, salt); // This is saved in the database.\n        System.out.println(securePassword);\n    \n    } catch (NoSuchAlgorithmException e) {\n        e.printStackTrace();\n    }\n\n    //Now ask user to enter his password\n    System.out.println(&quot;Enter your password&quot;);\n    String password1 = scanner.nextLine();\n\n    //validate user password. Compare password with password1\n    try {\n        securePassword1 = get_SHA_512_SecurePassword(password1, salt);\n        System.out.println(securePassword1);\n    \n    } catch (NoSuchAlgorithmException e) {\n        e.printStackTrace();\n    }\n\n    //I believe this is wrong but I don't have alternative\n    if (securePassword.equals(securePassword1)) {\n        System.out.println(&quot;Both are equal&quot;);\n    } else {\n        System.out.println(&quot;Both are not equal&quot;);\n    }\n}\n</code></pre>\n<hr />\n<p>A word of caution, though.</p>\n<p>The proposed approach has several disadvantages, among others:</p>\n<ul>\n<li>As you indicated in your comment, you need to manage <code>salt</code>s in addition to the password themselves.</li>\n<li>The SHA-* message digest algorithms are more suitable for general purpose hashing.</li>\n</ul>\n<p>For these and other reasons, especially to improve security, to deal with <a href=\"https://en.wikipedia.org/wiki/Key_derivation_function#Password_hashing\" rel=\"nofollow noreferrer\">password hashing</a> exist a whole family of well khown algorithms such as <a href=\"https://en.wikipedia.org/wiki/Bcrypt\" rel=\"nofollow noreferrer\"><code>bcrypt</code></a>, <a href=\"https://en.wikipedia.org/wiki/PBKDF2\" rel=\"nofollow noreferrer\"><code>PBKDF2</code></a>, or the more resource expensive <a href=\"https://en.wikipedia.org/wiki/Scrypt\" rel=\"nofollow noreferrer\"><code>scrypt</code></a>, to name some of them.</p>\n<p>Please, prefer the use of any of these algorithms and, if possible, use a battle tested and widely used implementation such as the one provided by <a href=\"https://www.bouncycastle.org/\" rel=\"nofollow noreferrer\">BouncyCastle</a> - even in these libraries you can find <a href=\"https://portswigger.net/daily-swig/bcrypt-implementation-flaw-in-bouncy-castle-crypto-library-laid-bare\" rel=\"nofollow noreferrer\">flaws</a>. For instance:</p>\n<pre class=\"lang-java prettyprint-override\"><code>import java.security.SecureRandom;\n\nimport org.bouncycastle.crypto.generators.OpenBSDBCrypt;\n\npublic class BCryptPasswordHashing {\n\n  private static final SecureRandom  secureRandom = new SecureRandom();\n\n  private final int costFactor;\n\n  /**\n   * Creates a new instance of &lt;code&gt;BCryptPasswordHashing&lt;/code&gt;.\n   *\n   * @param costFactor the BCrypt cost factor, must be between 4 and 31, inclusive.\n   *                   The greatest this value, the greatest hashing strength, but\n   *                   more computational power as well.\n   */\n  public BCryptPasswordHashing(int costFactor) {\n    this.costFactor = costFactor;\n  }\n\n  public final String hashPassword(char[] password) {\n    if (password == null) {\n      return null;\n    }\n\n    final byte[] salt = this.getSalt();\n    final String bCryptHash = OpenBSDBCrypt.generate(password, salt, this.costFactor);\n    return bCryptHash;\n  }\n\n  public final boolean verifyPassword(char[] password, String storedPassword) {\n    if (password == null) {\n      return (storedPassword == null);\n    }\n\n    if (storedPassword == null) {\n      return false;\n    }\n\n    return OpenBSDBCrypt.checkPassword(storedPassword, password);\n  }\n\n  private byte[] getSalt() {\n    byte[] salt = new byte[16]; // BCrypt salt size\n    secureRandom.nextBytes(salt);\n    return salt;\n  }\n}\n</code></pre>\n<p>You can test this code with the following main method:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public static void main(String[] args) {\n  //do some things ....\n  System.out.println(&quot;\\nEnter your password&quot;);\n  String password = scanner.nextLine();\n  \n  // In my opinion, a cost factor between 12 and 16 is ok\n  // Please, consider read: https://labs.clio.com/bcrypt-cost-factor-4ca0a9b03966 \n  final BCryptPasswordHashing bCryptPasswordHashing = new BCryptPasswordHashing(12);\n  final String bCryptHash = bCryptPasswordHashing.hashPassword(password.toCharArray());\n  \n  //Now ask user to enter his password\n  System.out.println(&quot;Enter your password&quot;);\n  String password1 = scanner.nextLine();\n\n  final boolean passwordMatch = bCryptPasswordHashing.verifyPassword(password1.toCharArray(), bCryptHash);\n\n  if (passwordMatch) {\n    System.out.println(&quot;Both are equal&quot;);\n  } else {\n    System.out.println(&quot;Both are not equal&quot;);\n  }\n}\n</code></pre>\n<p>Although my recommendation had been to use a battle tested library, for its simplicity, it is worth value to mention the different algorithms implementations provided by Patrick Favre. Consider for instance <a href=\"https://github.com/patrickfav/bcrypt\" rel=\"nofollow noreferrer\">this</a> of BCrypt.</p>\n"},{"tags":[],"owner":{"account_id":401843,"reputation":89758,"user_id":768644,"display_name":"rzwitserloot"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1635730327,"creation_date":1635730327,"answer_id":69791872,"question_id":69791042,"body_markdown":"&gt;  I want to hash user password and save in the database using sha-256\r\n\r\nWhy? This is not industry standard. It is in fact an industry non-standard: A known bad thing. SHA-256 is optimized to run a few billion a second. There is active pressure on creating cheap rigs that can go as fast as possible what with all the cryptocurrencies flying around.\r\n\r\n__billions__. You can scan a single hash for all variations including a capital and a special symbol for the entire english dictionary in less than a second.\r\n\r\nWhat you want is a hash algorithm that is hard to create optimized hardware for - that your general purpose IAAS server CPU can do about as fast as custom code on a graphics card, or faster. Because a giant rig of a ton of full blown CPUs is a heck of a lot more expensive than an array of graphics cards, and harder to get your hands on.\r\n\r\nIn other words, you want a __password hashing algorithm__. There are many; the oldest and still perfectly suitable (in rather marked contrast to the SHA-and-co world, where SHA1 used to rule the roost, but that&#39;s at this point no longer advised for just about anything, by anybody), is BCrypt.\r\n\r\nThere are others: SCrypt, PBKDF, and more.\r\n\r\nPick any one of those. Forget SHA-512.\r\n\r\nYour second problem is salts. The point of them is that you _store them_. They are randomly generated and are required to check the hash later. The algorithm you run when a user enters a new password is this:\r\n\r\n* Generate a salt with a random number generator.\r\n* Hash up the concatenation of the salt and that password.\r\n* Store _both_ the salt _and_ that hash result in your DB.\r\n\r\nThen, when a user enters their password again later you need to verify it, like this:\r\n\r\n* The user entered username and password.\r\n* Look up the salt in your DB based on that username.\r\n* Concatenate the salt and the password they just entered, and hash it.\r\n* If it is identical to the result value in your DB row - that was the password. If not it wasn&#39;t.\r\n\r\nThis API in the end boils down to something quite simple:\r\n\r\n```\r\n/**\r\n * @return This method returns voodoo magic. You don&#39;t need to know what it is, just store it, and return it unchanged later when you call verify. */\r\npublic String createHash(String password) {\r\n   ... implementation here ...\r\n}\r\n\r\npublic boolean verify(String password, String thatThingIGaveYouEarlier) {\r\n   ... implementation here ...\r\n}\r\n```\r\n\r\nBecause that is simple and hard to mess up, __that is what your password hashing system should work with__. Not what you&#39;re doing: Hand-managing the salting, the hashing, and the verifying.\r\n\r\nNB: Just to satisfy a curiosity you might have, that string it returns is an encoded thing that contains only safe characters and contains both the salt and the hash and some extra placeholders that even make it compatible with other, non-java-written libraries.\r\n\r\nFortunately, _all_ of the good password hash implementations for java work just like that. That&#39;s great - it&#39;s easy to use. It also means you get to enjoy your current &#39;use one column for storing this stuff&#39;. It&#39;s just that this column will contain a string that contains all the relevant information (hash _and_ salt).\r\n\r\n[Here is an entire tutorial about it](https://www.baeldung.com/java-password-hashing) if you like a second source.\r\n\r\nHere is the [Java BCrypt](https://www.mindrot.org/projects/jBCrypt/) implementation, with the above API. Yes, that site looks old, and mentions 2015 as the last update. It&#39;s not because it isn&#39;t being maintained, it&#39;s because BCrypt has been the go-to answer, without any relevant attacks or issues, __for a decade__. This is good news, for security. It&#39;s a single java file, with a very permissive open source license. Just paste it in your project and go, if you prefer that over adding it to your build system&#39;s dependency list.\r\n","title":"How to validate user password after hashing using sha-256 salted in Java","body":"<blockquote>\n<p>I want to hash user password and save in the database using sha-256</p>\n</blockquote>\n<p>Why? This is not industry standard. It is in fact an industry non-standard: A known bad thing. SHA-256 is optimized to run a few billion a second. There is active pressure on creating cheap rigs that can go as fast as possible what with all the cryptocurrencies flying around.</p>\n<p><strong>billions</strong>. You can scan a single hash for all variations including a capital and a special symbol for the entire english dictionary in less than a second.</p>\n<p>What you want is a hash algorithm that is hard to create optimized hardware for - that your general purpose IAAS server CPU can do about as fast as custom code on a graphics card, or faster. Because a giant rig of a ton of full blown CPUs is a heck of a lot more expensive than an array of graphics cards, and harder to get your hands on.</p>\n<p>In other words, you want a <strong>password hashing algorithm</strong>. There are many; the oldest and still perfectly suitable (in rather marked contrast to the SHA-and-co world, where SHA1 used to rule the roost, but that's at this point no longer advised for just about anything, by anybody), is BCrypt.</p>\n<p>There are others: SCrypt, PBKDF, and more.</p>\n<p>Pick any one of those. Forget SHA-512.</p>\n<p>Your second problem is salts. The point of them is that you <em>store them</em>. They are randomly generated and are required to check the hash later. The algorithm you run when a user enters a new password is this:</p>\n<ul>\n<li>Generate a salt with a random number generator.</li>\n<li>Hash up the concatenation of the salt and that password.</li>\n<li>Store <em>both</em> the salt <em>and</em> that hash result in your DB.</li>\n</ul>\n<p>Then, when a user enters their password again later you need to verify it, like this:</p>\n<ul>\n<li>The user entered username and password.</li>\n<li>Look up the salt in your DB based on that username.</li>\n<li>Concatenate the salt and the password they just entered, and hash it.</li>\n<li>If it is identical to the result value in your DB row - that was the password. If not it wasn't.</li>\n</ul>\n<p>This API in the end boils down to something quite simple:</p>\n<pre><code>/**\n * @return This method returns voodoo magic. You don't need to know what it is, just store it, and return it unchanged later when you call verify. */\npublic String createHash(String password) {\n   ... implementation here ...\n}\n\npublic boolean verify(String password, String thatThingIGaveYouEarlier) {\n   ... implementation here ...\n}\n</code></pre>\n<p>Because that is simple and hard to mess up, <strong>that is what your password hashing system should work with</strong>. Not what you're doing: Hand-managing the salting, the hashing, and the verifying.</p>\n<p>NB: Just to satisfy a curiosity you might have, that string it returns is an encoded thing that contains only safe characters and contains both the salt and the hash and some extra placeholders that even make it compatible with other, non-java-written libraries.</p>\n<p>Fortunately, <em>all</em> of the good password hash implementations for java work just like that. That's great - it's easy to use. It also means you get to enjoy your current 'use one column for storing this stuff'. It's just that this column will contain a string that contains all the relevant information (hash <em>and</em> salt).</p>\n<p><a href=\"https://www.baeldung.com/java-password-hashing\" rel=\"nofollow noreferrer\">Here is an entire tutorial about it</a> if you like a second source.</p>\n<p>Here is the <a href=\"https://www.mindrot.org/projects/jBCrypt/\" rel=\"nofollow noreferrer\">Java BCrypt</a> implementation, with the above API. Yes, that site looks old, and mentions 2015 as the last update. It's not because it isn't being maintained, it's because BCrypt has been the go-to answer, without any relevant attacks or issues, <strong>for a decade</strong>. This is good news, for security. It's a single java file, with a very permissive open source license. Just paste it in your project and go, if you prefer that over adding it to your build system's dependency list.</p>\n"},{"tags":[],"owner":{"account_id":10945532,"reputation":4337,"user_id":8043806,"display_name":"Giddy Naya"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1635731361,"creation_date":1635731361,"answer_id":69791945,"question_id":69791042,"body_markdown":"You&#39;ve two options to pass validation:\r\n\r\n 1. Use a constant value for salt. \r\n 2. Use a dynamic value for salt but maintain a logic where the value of salt is the same for both password1 (The user&#39;s password in db) and password2 (The password to compare with).","title":"How to validate user password after hashing using sha-256 salted in Java","body":"<p>You've two options to pass validation:</p>\n<ol>\n<li>Use a constant value for salt.</li>\n<li>Use a dynamic value for salt but maintain a logic where the value of salt is the same for both password1 (The user's password in db) and password2 (The password to compare with).</li>\n</ol>\n"},{"tags":[],"owner":{"account_id":29715880,"reputation":1,"user_id":22774417,"display_name":"olin00"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1697802387,"creation_date":1697802387,"answer_id":77330678,"question_id":69791042,"body_markdown":"Basically what @jccampanero wrote is correct but does not highlight the issue in your code:\r\nYour passwords don&#39;t match because the salt variable that you pass into the hashing function is generated 2x as a random number. Therefore the hash for the first password contains salt1 and hash for the second password contains salt2 (salt 1 and 2 are different values). If you use the same salt value then the passwords will match.","title":"How to validate user password after hashing using sha-256 salted in Java","body":"<p>Basically what @jccampanero wrote is correct but does not highlight the issue in your code:\nYour passwords don't match because the salt variable that you pass into the hashing function is generated 2x as a random number. Therefore the hash for the first password contains salt1 and hash for the second password contains salt2 (salt 1 and 2 are different values). If you use the same salt value then the passwords will match.</p>\n"}],"owner":{"account_id":12483533,"reputation":59,"user_id":9087451,"display_name":"Olu"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":3368,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":4,"score":2,"last_activity_date":1697802387,"creation_date":1635719036,"question_id":69791042,"body_markdown":"I am new to Java; so also postgresql I am using for the backend.\r\nI want to hash user password and save in the database using sha-256\r\nNext time the user visits, I want to compare the password user submitted with the saved hashpassword, &quot;at the java end&quot;.\r\nI have tried this (I got from the internet):\r\n\r\n    private static String get_SHA_512_SecurePassword(String passwordToHash, byte[] salt) {\r\n\t\t\t\r\n\t\tString generatedPassword = null;\r\n\t    try {\r\n\t        MessageDigest md = MessageDigest.getInstance(&quot;SHA-512&quot;);\r\n\t        md.update(salt);\r\n\t        byte[] bytes = md.digest(passwordToHash.getBytes());\r\n\t        StringBuilder sb = new StringBuilder();\r\n\t        for(int i=0; i&lt; bytes.length ;i++)\r\n\t        {\r\n\t            sb.append(Integer.toString((bytes[i] &amp; 0xff) + 0x100, 16).substring(1));\r\n\t        }\r\n\t        generatedPassword = sb.toString();\r\n\t    } \r\n\t    catch (NoSuchAlgorithmException e) \r\n\t    {\r\n\t        e.printStackTrace();\r\n\t    }\r\n\t    return generatedPassword;\r\n\t}\r\n\t\t\r\n\r\n\tprivate static byte[] getSalt() throws NoSuchAlgorithmException {\r\n\t    SecureRandom sr = SecureRandom.getInstance(&quot;SHA1PRNG&quot;);\r\n\t    byte[] salt = new byte[16];\r\n\t    sr.nextBytes(salt);\r\n\t    return salt;\r\n\t}\r\n\r\n\tpublic static void main(String[] args) {\r\n\t\t//do some things ....\r\n\t\tSystem.out.println(&quot;\\nEnter your password&quot;);\r\n\t\tString password = scanner.nextLine();\r\n\r\n\t\ttry {\r\n\t\t\tbyte[] salt = getSalt();\r\n\t\t\tsecurePassword = get_SHA_512_SecurePassword(password, salt); // This is saved in the database.\r\n\t\t    System.out.println(securePassword);\r\n\t    \r\n\t\t} catch (NoSuchAlgorithmException e) {\r\n\t\t\te.printStackTrace();\r\n\t\t}\r\n\r\n\t\t//Now ask user to enter his password\r\n\t\tSystem.out.println(&quot;Enter your password&quot;);\r\n\t\tString password1 = scanner.nextLine();\r\n\r\n\t\t//validate user password. Compare password with password1\r\n\t\ttry {\r\n\t\t\tbyte[] salt = getSalt();\r\n\t\t\tsecurePassword1 = get_SHA_512_SecurePassword(password1, salt);\r\n\t\t    System.out.println(securePassword1);\r\n\t    \r\n\t\t} catch (NoSuchAlgorithmException e) {\r\n\t\t\te.printStackTrace();\r\n\t\t}\r\n\r\n\t\t//I believe this is wrong but I don&#39;t have alternative\r\n\t\tif (securePassword.equals(securePassword1)) {\r\n\t\t\tSystem.out.println(&quot;Both are equal&quot;);\r\n\t\t} else {\r\n\t\t\tSystem.out.println(&quot;Both are not equal&quot;);\r\n\t\t}\r\n\t}\r\n\r\nEven when both passwords are same, the comparison fails. \r\nThe result is same &quot;Both are not equal&quot; whether both passwords are same or different.\r\nSo is there a method of validating the user password? I have searched. The solution I got is to use Spring Bcript which I don&#39;t want for now.\r\nAnother alternative I am pushing to future is to do verification at the backend (as is the practise with php-Mysqli password_verify($password, $passwodhashed)). Reason is I am using postgresql with java, both new to me.\r\nThank you","title":"How to validate user password after hashing using sha-256 salted in Java","body":"<p>I am new to Java; so also postgresql I am using for the backend.\nI want to hash user password and save in the database using sha-256\nNext time the user visits, I want to compare the password user submitted with the saved hashpassword, &quot;at the java end&quot;.\nI have tried this (I got from the internet):</p>\n<pre><code>private static String get_SHA_512_SecurePassword(String passwordToHash, byte[] salt) {\n        \n    String generatedPassword = null;\n    try {\n        MessageDigest md = MessageDigest.getInstance(&quot;SHA-512&quot;);\n        md.update(salt);\n        byte[] bytes = md.digest(passwordToHash.getBytes());\n        StringBuilder sb = new StringBuilder();\n        for(int i=0; i&lt; bytes.length ;i++)\n        {\n            sb.append(Integer.toString((bytes[i] &amp; 0xff) + 0x100, 16).substring(1));\n        }\n        generatedPassword = sb.toString();\n    } \n    catch (NoSuchAlgorithmException e) \n    {\n        e.printStackTrace();\n    }\n    return generatedPassword;\n}\n    \n\nprivate static byte[] getSalt() throws NoSuchAlgorithmException {\n    SecureRandom sr = SecureRandom.getInstance(&quot;SHA1PRNG&quot;);\n    byte[] salt = new byte[16];\n    sr.nextBytes(salt);\n    return salt;\n}\n\npublic static void main(String[] args) {\n    //do some things ....\n    System.out.println(&quot;\\nEnter your password&quot;);\n    String password = scanner.nextLine();\n\n    try {\n        byte[] salt = getSalt();\n        securePassword = get_SHA_512_SecurePassword(password, salt); // This is saved in the database.\n        System.out.println(securePassword);\n    \n    } catch (NoSuchAlgorithmException e) {\n        e.printStackTrace();\n    }\n\n    //Now ask user to enter his password\n    System.out.println(&quot;Enter your password&quot;);\n    String password1 = scanner.nextLine();\n\n    //validate user password. Compare password with password1\n    try {\n        byte[] salt = getSalt();\n        securePassword1 = get_SHA_512_SecurePassword(password1, salt);\n        System.out.println(securePassword1);\n    \n    } catch (NoSuchAlgorithmException e) {\n        e.printStackTrace();\n    }\n\n    //I believe this is wrong but I don't have alternative\n    if (securePassword.equals(securePassword1)) {\n        System.out.println(&quot;Both are equal&quot;);\n    } else {\n        System.out.println(&quot;Both are not equal&quot;);\n    }\n}\n</code></pre>\n<p>Even when both passwords are same, the comparison fails.\nThe result is same &quot;Both are not equal&quot; whether both passwords are same or different.\nSo is there a method of validating the user password? I have searched. The solution I got is to use Spring Bcript which I don't want for now.\nAnother alternative I am pushing to future is to do verification at the backend (as is the practise with php-Mysqli password_verify($password, $passwodhashed)). Reason is I am using postgresql with java, both new to me.\nThank you</p>\n"},{"tags":["java","android","kotlin","android-13"],"answers":[{"tags":[],"owner":{"account_id":17973935,"reputation":185,"user_id":13062000,"display_name":"404NotFound"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1697801974,"creation_date":1697801974,"answer_id":77330630,"question_id":77325163,"body_markdown":"Most of the times it gives empty string only: this is what official document says [Link][1]\r\n\r\n&gt; Returns the ICC ID. Starting with API level 29 Security Patch 2021-04-05, &gt; returns the ICC ID if the calling app has been granted the \r\n&gt; READ_PRIVILEGED_PHONE_STATE permission, has carrier privileges (see \r\n&gt; TelephonyManager#hasCarrierPrivileges), or is a device owner or profile \r\n&gt; owner that has been granted the READ_PHONE_STATE permission. The profile \r\n&gt; owner is an app that owns a managed profile on the device; for more \r\n&gt; details see Work profiles. Profile owner access is deprecated and will be \r\n&gt; removed in a future release.\r\n\r\n\r\n  [1]: https://developer.android.com/reference/android/telephony/SubscriptionInfo#getIccId()","title":"Obtaining SIM Serial Number in Android 13","body":"<p>Most of the times it gives empty string only: this is what official document says <a href=\"https://developer.android.com/reference/android/telephony/SubscriptionInfo#getIccId()\" rel=\"nofollow noreferrer\">Link</a></p>\n<blockquote>\n<p>Returns the ICC ID. Starting with API level 29 Security Patch 2021-04-05, &gt; returns the ICC ID if the calling app has been granted the\nREAD_PRIVILEGED_PHONE_STATE permission, has carrier privileges (see\nTelephonyManager#hasCarrierPrivileges), or is a device owner or profile\nowner that has been granted the READ_PHONE_STATE permission. The profile\nowner is an app that owns a managed profile on the device; for more\ndetails see Work profiles. Profile owner access is deprecated and will be\nremoved in a future release.</p>\n</blockquote>\n"}],"owner":{"account_id":10133958,"reputation":486,"user_id":7486233,"display_name":"Vishal Sojitra"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":314,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1697801974,"creation_date":1697729258,"question_id":77325163,"body_markdown":"I&#39;m trying to retrieve the SIM serial number (also known as ICCID) in Android 13 using the TelephonyManager and SubscriptionManager, but I&#39;m encountering some issues. Here&#39;s what I&#39;ve tried:\r\n1. I&#39;ve declared the necessary permissions in my AndroidManifest.xml file:\r\n\r\n```\r\n&lt;uses-permission android:name=&quot;android.permission.READ_PHONE_STATE&quot; /&gt;\r\n```\r\n\r\n2.I&#39;m using the following code to get the SIM serial number:\r\n\r\n\r\n```\r\nTelephonyManager telephonyManager = getSystemService(Context.TELEPHONY_SERVICE);\r\nif (telephonyManager != null) {\r\n    SubscriptionManager subscriptionManager = getSystemService(SubscriptionManager.class);\r\n    List&lt;SubscriptionInfo&gt; subscriptionInfoList = subscriptionManager.getActiveSubscriptionInfoList();\r\n    \r\n    if (subscriptionInfoList != null) {\r\n        for (SubscriptionInfo subscriptionInfo : subscriptionInfoList) {\r\n            String simSerialNumber = subscriptionInfo.getIccId();\r\n            // Handle the SIM serial number here\r\n        }\r\n    }\r\n}\r\n\r\n```\r\nHowever, this code doesn&#39;t seem to be working in Android 13. It used to work in earlier versions, but it&#39;s not retrieving the SIM serial number.\r\n\r\n\r\n\r\nAre there any alternative methods to retrieve the SIM serial number in Android 13?\r\nAny help or guidance on this issue would be greatly appreciated. Thank you!","title":"Obtaining SIM Serial Number in Android 13","body":"<p>I'm trying to retrieve the SIM serial number (also known as ICCID) in Android 13 using the TelephonyManager and SubscriptionManager, but I'm encountering some issues. Here's what I've tried:</p>\n<ol>\n<li>I've declared the necessary permissions in my AndroidManifest.xml file:</li>\n</ol>\n<pre><code>&lt;uses-permission android:name=&quot;android.permission.READ_PHONE_STATE&quot; /&gt;\n</code></pre>\n<p>2.I'm using the following code to get the SIM serial number:</p>\n<pre><code>TelephonyManager telephonyManager = getSystemService(Context.TELEPHONY_SERVICE);\nif (telephonyManager != null) {\n    SubscriptionManager subscriptionManager = getSystemService(SubscriptionManager.class);\n    List&lt;SubscriptionInfo&gt; subscriptionInfoList = subscriptionManager.getActiveSubscriptionInfoList();\n    \n    if (subscriptionInfoList != null) {\n        for (SubscriptionInfo subscriptionInfo : subscriptionInfoList) {\n            String simSerialNumber = subscriptionInfo.getIccId();\n            // Handle the SIM serial number here\n        }\n    }\n}\n\n</code></pre>\n<p>However, this code doesn't seem to be working in Android 13. It used to work in earlier versions, but it's not retrieving the SIM serial number.</p>\n<p>Are there any alternative methods to retrieve the SIM serial number in Android 13?\nAny help or guidance on this issue would be greatly appreciated. Thank you!</p>\n"},{"tags":["java","interpreter","zpl"],"comments":[{"owner":{"account_id":372682,"reputation":22426,"user_id":721855,"display_name":"aled"},"score":2,"creation_date":1697800863,"post_id":77330502,"comment_id":136328505,"body_markdown":"Questions asking us to [recommend or find a book](https://stackoverflow.com/help/on-topic), tool, software library, tutorial or other off-site resource are off-topic for Stack Overflow as they tend to attract opinionated answers and spam.","body":"Questions asking us to <a href=\"https://stackoverflow.com/help/on-topic\">recommend or find a book</a>, tool, software library, tutorial or other off-site resource are off-topic for Stack Overflow as they tend to attract opinionated answers and spam."},{"owner":{"account_id":372682,"reputation":22426,"user_id":721855,"display_name":"aled"},"score":0,"creation_date":1697803978,"post_id":77330502,"comment_id":136329062,"body_markdown":"In the link it says explicitly &quot;3. Questions asking us to recommend or find a book, tool, software library, tutorial or other off-site resource are off-topic for Stack Overflow as they tend to attract opinionated answers and spam. Instead, describe the problem and what has been done so far to solve it.&quot; which is what I mentioned above. Unfortunately even with the changes it still is a request for recommendations.","body":"In the link it says explicitly &quot;3. Questions asking us to recommend or find a book, tool, software library, tutorial or other off-site resource are off-topic for Stack Overflow as they tend to attract opinionated answers and spam. Instead, describe the problem and what has been done so far to solve it.&quot; which is what I mentioned above. Unfortunately even with the changes it still is a request for recommendations."},{"owner":{"account_id":15701581,"reputation":1802,"user_id":11329562,"display_name":"Delphi Coder"},"score":0,"creation_date":1699270886,"post_id":77330502,"comment_id":136506240,"body_markdown":"I once wrote such an interpreter for a small subset of ZPL commands in Delphi: https://github.com/TheDelphiCoder/Zebra","body":"I once wrote such an interpreter for a small subset of ZPL commands in Delphi: <a href=\"https://github.com/TheDelphiCoder/Zebra\" rel=\"nofollow noreferrer\">github.com/TheDelphiCoder/Zebra</a>"},{"owner":{"account_id":28267143,"reputation":89,"user_id":21610914,"display_name":"malz"},"score":0,"creation_date":1699271397,"post_id":77330502,"comment_id":136506319,"body_markdown":"Thank you; it&#39;s fascinating how you&#39;ve tackled this. Could you share a sample output you&#39;ve obtained from the interpreter? Based on what I&#39;ve observed, this should be capable of offering a preview of the ZPL Code, correct?","body":"Thank you; it&#39;s fascinating how you&#39;ve tackled this. Could you share a sample output you&#39;ve obtained from the interpreter? Based on what I&#39;ve observed, this should be capable of offering a preview of the ZPL Code, correct?"}],"owner":{"account_id":28267143,"reputation":89,"user_id":21610914,"display_name":"malz"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":67,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1697801232,"creation_date":1697800763,"question_id":77330502,"body_markdown":"I&#39;m currently working on a project to develop a ZPL Viewer in Java, aimed at rendering ZPL label designs and providing a user-friendly interface. To achieve this, I am in search of a Java library or framework capable of interpreting ZPL code and converting it into Java objects or a similar data format. This interpretation step is crucial for rendering the ZPL label designs effectively.\r\n\r\nWhile exploring potential solutions, I have come across the GitHub repository w3blogfr/zebra-zpl. However, upon closer examination, it seems that this repository lacks the interpreter functionality I need for my project.\r\n\r\nGiven this context, I have a few questions:\r\n\r\n1. Can anyone recommend a Java library or framework that can effectively interpret ZPL code and convert it into Java objects or data structures suitable for rendering ZPL label designs?\r\n\r\n2. If such a library doesn&#39;t exist, I&#39;m also considering the option of writing my own ZPL code interpreter. Are there any resources or best practices that you can recommend for building a ZPL interpreter in Java?\r\n\r\nI appreciate any insights, recommendations, or guidance on this matter. Your assistance will be valuable in making this ZPL Viewer project a success. Thank you in advance!\r\n","title":"Java Library for ZPL Code Interpretation to Build a ZPL Viewer","body":"<p>I'm currently working on a project to develop a ZPL Viewer in Java, aimed at rendering ZPL label designs and providing a user-friendly interface. To achieve this, I am in search of a Java library or framework capable of interpreting ZPL code and converting it into Java objects or a similar data format. This interpretation step is crucial for rendering the ZPL label designs effectively.</p>\n<p>While exploring potential solutions, I have come across the GitHub repository w3blogfr/zebra-zpl. However, upon closer examination, it seems that this repository lacks the interpreter functionality I need for my project.</p>\n<p>Given this context, I have a few questions:</p>\n<ol>\n<li><p>Can anyone recommend a Java library or framework that can effectively interpret ZPL code and convert it into Java objects or data structures suitable for rendering ZPL label designs?</p>\n</li>\n<li><p>If such a library doesn't exist, I'm also considering the option of writing my own ZPL code interpreter. Are there any resources or best practices that you can recommend for building a ZPL interpreter in Java?</p>\n</li>\n</ol>\n<p>I appreciate any insights, recommendations, or guidance on this matter. Your assistance will be valuable in making this ZPL Viewer project a success. Thank you in advance!</p>\n"},{"tags":["java","android","google-maps","android-fragments","android-permissions"],"comments":[{"owner":{"account_id":39846,"reputation":991133,"user_id":115145,"accept_rate":84,"display_name":"CommonsWare"},"score":0,"creation_date":1462888385,"post_id":37140519,"comment_id":61819834,"body_markdown":"I am surprised that this compiles. `checkSelfPermission()` uses `LocationActivity.this`. The second `requestPermissions()` uses `PermissionsRequestActivity.this`.","body":"I am surprised that this compiles. <code>checkSelfPermission()</code> uses <code>LocationActivity.this</code>. The second <code>requestPermissions()</code> uses <code>PermissionsRequestActivity.this</code>."},{"owner":{"account_id":8414729,"reputation":321,"user_id":6315532,"display_name":"Robin"},"score":0,"creation_date":1462888449,"post_id":37140519,"comment_id":61819877,"body_markdown":"Sorry yes, I had to change my code slightly for posting, the second one should be LocationActivity.this","body":"Sorry yes, I had to change my code slightly for posting, the second one should be LocationActivity.this"},{"owner":{"account_id":8414729,"reputation":321,"user_id":6315532,"display_name":"Robin"},"score":0,"creation_date":1462888523,"post_id":37140519,"comment_id":61819940,"body_markdown":"I had been trying making all requestPermissions in a separate Activity, but this makes the callback difficult, and is hacky.","body":"I had been trying making all requestPermissions in a separate Activity, but this makes the callback difficult, and is hacky."},{"owner":{"account_id":39846,"reputation":991133,"user_id":115145,"accept_rate":84,"display_name":"CommonsWare"},"score":0,"creation_date":1462888541,"post_id":37140519,"comment_id":61819948,"body_markdown":"FWIW, [this sample app](https://github.com/commonsguy/cw-omnibus/tree/master/MapsV2/MyLocationMNC) uses runtime permissions without issue.","body":"FWIW, <a href=\"https://github.com/commonsguy/cw-omnibus/tree/master/MapsV2/MyLocationMNC\" rel=\"nofollow noreferrer\">this sample app</a> uses runtime permissions without issue."},{"owner":{"account_id":2535419,"reputation":5583,"user_id":2202675,"display_name":"danny117"},"score":0,"creation_date":1462888547,"post_id":37140519,"comment_id":61819959,"body_markdown":"Shouldn&#39;t you have specified finelocation in the manifest?  Or has android changed completely in the last year?","body":"Shouldn&#39;t you have specified finelocation in the manifest?  Or has android changed completely in the last year?"},{"owner":{"account_id":8414729,"reputation":321,"user_id":6315532,"display_name":"Robin"},"score":0,"creation_date":1462889497,"post_id":37140519,"comment_id":61820631,"body_markdown":"@CommonsWare I can confirm your sample also works when the AbstractMapActivity extends FragmentActivity too, so I guess it&#39;s not related to the map, or that...","body":"@CommonsWare I can confirm your sample also works when the AbstractMapActivity extends FragmentActivity too, so I guess it&#39;s not related to the map, or that..."}],"answers":[{"tags":[],"owner":{"account_id":8414729,"reputation":321,"user_id":6315532,"display_name":"Robin"},"down_vote_count":0,"up_vote_count":14,"is_accepted":true,"score":14,"last_activity_date":1472649939,"creation_date":1462893400,"answer_id":37142595,"question_id":37140519,"body_markdown":"After stripping out my class completely, and it still not working, I realised that this Activity is being instantiated using a TabHost. \r\n\r\nWhen I stop using the TabHost, the prompt is displayed successfully. I guess TabHosts are not supported by the new permissions prompts - is this a bug?\r\n\r\nSame problem as https://stackoverflow.com/questions/36529635/app-requests-arent-showing-up\r\n\r\nI ended up creating a PermissionsRequestActivity which handles the permission request and response on behalf of my TabHost, then exits (pass the requested permission information in through the Intent extras Bundle).  \r\nIt passes back the response to the request as a Broadcast, which is picked up by my TabHost.  \r\n\r\nBit of a hack but works OK!","title":"ActivityCompat.requestPermissions does not show prompt","body":"<p>After stripping out my class completely, and it still not working, I realised that this Activity is being instantiated using a TabHost. </p>\n\n<p>When I stop using the TabHost, the prompt is displayed successfully. I guess TabHosts are not supported by the new permissions prompts - is this a bug?</p>\n\n<p>Same problem as <a href=\"https://stackoverflow.com/questions/36529635/app-requests-arent-showing-up\">App requests aren&#39;t showing up</a></p>\n\n<p>I ended up creating a PermissionsRequestActivity which handles the permission request and response on behalf of my TabHost, then exits (pass the requested permission information in through the Intent extras Bundle).<br>\nIt passes back the response to the request as a Broadcast, which is picked up by my TabHost.  </p>\n\n<p>Bit of a hack but works OK!</p>\n"},{"tags":[],"owner":{"account_id":2819088,"reputation":3661,"user_id":2423274,"accept_rate":94,"display_name":"Alejandro Casanova"},"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1697800774,"creation_date":1463953501,"answer_id":37379969,"question_id":37140519,"body_markdown":"Check that you have already added the requested permission in Android&#39;s manifest file like before Android M, only then you will get expected behaviour.\r\n\r\nAdd the permission to your manifest so you can request it via \r\n    ActivityCompat.requestPermissions:\r\n\r\n    &lt;uses-permission android:name=&quot;android.permission.ACCESS_FINE_LOCATION&quot; /&gt;","title":"ActivityCompat.requestPermissions does not show prompt","body":"<p>Check that you have already added the requested permission in Android's manifest file like before Android M, only then you will get expected behaviour.</p>\n<p>Add the permission to your manifest so you can request it via\nActivityCompat.requestPermissions:</p>\n<pre><code>&lt;uses-permission android:name=&quot;android.permission.ACCESS_FINE_LOCATION&quot; /&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":9545349,"reputation":481,"user_id":7091686,"display_name":"Luidgi Gromat"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1508532687,"creation_date":1508532687,"answer_id":46857160,"question_id":37140519,"body_markdown":"I&#39;ve faced the same problem on a project which use TabHost.\r\nBasis on @Robin solution, I use the EventBus library for send a message from child activity to the TabActity.\r\n\r\nEventBus : https://github.com/greenrobot/EventBus\r\n\r\nCreate an event object :\r\n\r\n    public class MessageEvent {\r\n        private String message;\r\n        public MessageEvent(String message){\r\n            this.message = message;\r\n        }\r\n    \r\n        public String getMessage(){\r\n            return this.message;\r\n        }\r\n    }\r\n\r\nIn your main Activity :\r\n\r\n    private EventBus eventBus = EventBus.getDefault();\r\n    @Override\r\n\tprotected void onCreate(Bundle savedInstanceState) {\r\n        eventBus.register(this);\r\n    }\r\n    @Override\r\n    protected void onDestroy() {\r\n        eventBus.unregister(this);\r\n        super.onDestroy();\r\n    }\r\n    @Subscribe(threadMode = ThreadMode.MAIN)\r\n    public void onMessageEvent(MessageEvent event) {\r\n        if (event.getMessage().equals(&quot;contacts&quot;)){\r\n            if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.M &amp;&amp; checkSelfPermission(android.Manifest.permission.WRITE_CONTACTS) != PackageManager.PERMISSION_GRANTED) {\r\n                ActivityCompat.requestPermissions(MainPage.this,new String[]{android.Manifest.permission.WRITE_CONTACTS}, 100 );\r\n            }\r\n        }\r\n    };\r\n\r\nSet a different message for the permission your want to request.\r\nIn your child activity you can than post the adequate message :\r\n\r\n    EventBus.getDefault().post(new MessageEvent(&quot;contacts&quot;));\r\n\r\nBe aware of onRequestPermissionsResult callback and the request code ;)! It will only work in the main activity.\r\n","title":"ActivityCompat.requestPermissions does not show prompt","body":"<p>I've faced the same problem on a project which use TabHost.\nBasis on @Robin solution, I use the EventBus library for send a message from child activity to the TabActity.</p>\n\n<p>EventBus : <a href=\"https://github.com/greenrobot/EventBus\" rel=\"nofollow noreferrer\">https://github.com/greenrobot/EventBus</a></p>\n\n<p>Create an event object :</p>\n\n<pre><code>public class MessageEvent {\n    private String message;\n    public MessageEvent(String message){\n        this.message = message;\n    }\n\n    public String getMessage(){\n        return this.message;\n    }\n}\n</code></pre>\n\n<p>In your main Activity :</p>\n\n<pre><code>private EventBus eventBus = EventBus.getDefault();\n@Override\nprotected void onCreate(Bundle savedInstanceState) {\n    eventBus.register(this);\n}\n@Override\nprotected void onDestroy() {\n    eventBus.unregister(this);\n    super.onDestroy();\n}\n@Subscribe(threadMode = ThreadMode.MAIN)\npublic void onMessageEvent(MessageEvent event) {\n    if (event.getMessage().equals(\"contacts\")){\n        if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.M &amp;&amp; checkSelfPermission(android.Manifest.permission.WRITE_CONTACTS) != PackageManager.PERMISSION_GRANTED) {\n            ActivityCompat.requestPermissions(MainPage.this,new String[]{android.Manifest.permission.WRITE_CONTACTS}, 100 );\n        }\n    }\n};\n</code></pre>\n\n<p>Set a different message for the permission your want to request.\nIn your child activity you can than post the adequate message :</p>\n\n<pre><code>EventBus.getDefault().post(new MessageEvent(\"contacts\"));\n</code></pre>\n\n<p>Be aware of onRequestPermissionsResult callback and the request code ;)! It will only work in the main activity.</p>\n"}],"owner":{"account_id":8414729,"reputation":321,"user_id":6315532,"display_name":"Robin"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":10797,"favorite_count":0,"down_vote_count":0,"up_vote_count":8,"accepted_answer_id":37142595,"answer_count":3,"score":8,"last_activity_date":1697800774,"creation_date":1462888215,"question_id":37140519,"body_markdown":"I&#39;m attempting to request `ACCESS_FINE_LOCATION` permissions in order to get the user&#39;s current location.\r\n\r\nMy logging indicates that my app does not currently have this permission when querying `ContextCompat.checkSelfPermission()`, but when calling `ActivityCompat.requestPermissions()` nothing is displayed.\r\n\r\nMy Google map code (implementing `OnMapReadyCallback` and `ActivityCompat.OnRequestPermissionsResultCallback()`) is in a `FragmentActivity`.\r\n\r\nI have managed to get the `requestPermissions()` function working successfully in other Activities in the app, it&#39;s just the one with the Google map. It doesn&#39;t work when placed in the `onCreate()` method of the `Activity`, or in `onMapReady()` (where it needs to go).\r\n\r\n    if(ContextCompat.checkSelfPermission(LocationActivity.this, android.Manifest.permission.ACCESS_FINE_LOCATION) != PackageManager.PERMISSION_GRANTED) {\r\n            Log.d(TAG, &quot;not granted&quot;);\r\n            final String[] permissions = new String[] {android.Manifest.permission.ACCESS_FINE_LOCATION};\r\n        if(ActivityCompat.shouldShowRequestPermissionRationale(this, android.Manifest.permission.ACCESS_FINE_LOCATION)) {\r\n                Log.d(TAG, &quot;rationale&quot;);\r\n                // Explain to the user why permission is required, then request again\r\n                AlertDialog.Builder builder = new AlertDialog.Builder(this);\r\n                builder.setMessage(&quot;We need permissions&quot;)\r\n                        .setCancelable(false)\r\n                        .setPositiveButton(&quot;OK&quot;, new DialogInterface.OnClickListener() {\r\n                            public void onClick(DialogInterface dialog, int id) {\r\n                                ActivityCompat.requestPermissions(LocationActivity.this, permissions, 1);\r\n                        }\r\n                    });\r\n            AlertDialog alert = builder.create();\r\n            alert.show();\r\n\r\n        } else {\r\n            Log.d(TAG, &quot;request&quot; + android.Manifest.permission.ACCESS_FINE_LOCATION);\r\n            // If permission has not been denied before, request the permission\r\n            ActivityCompat.requestPermissions(LocationActivity.this, permissions, 1);\r\n        }\r\n    } else {\r\n        Log.d(TAG, &quot;granted&quot;);\r\n    }\r\n\r\n\r\nAny ideas? Is it something to do with my Activity&#39;s class (`FragmentActivity`), or possible the Google map calling the permissions request asynchronously?","title":"ActivityCompat.requestPermissions does not show prompt","body":"<p>I'm attempting to request <code>ACCESS_FINE_LOCATION</code> permissions in order to get the user's current location.</p>\n\n<p>My logging indicates that my app does not currently have this permission when querying <code>ContextCompat.checkSelfPermission()</code>, but when calling <code>ActivityCompat.requestPermissions()</code> nothing is displayed.</p>\n\n<p>My Google map code (implementing <code>OnMapReadyCallback</code> and <code>ActivityCompat.OnRequestPermissionsResultCallback()</code>) is in a <code>FragmentActivity</code>.</p>\n\n<p>I have managed to get the <code>requestPermissions()</code> function working successfully in other Activities in the app, it's just the one with the Google map. It doesn't work when placed in the <code>onCreate()</code> method of the <code>Activity</code>, or in <code>onMapReady()</code> (where it needs to go).</p>\n\n<pre><code>if(ContextCompat.checkSelfPermission(LocationActivity.this, android.Manifest.permission.ACCESS_FINE_LOCATION) != PackageManager.PERMISSION_GRANTED) {\n        Log.d(TAG, \"not granted\");\n        final String[] permissions = new String[] {android.Manifest.permission.ACCESS_FINE_LOCATION};\n    if(ActivityCompat.shouldShowRequestPermissionRationale(this, android.Manifest.permission.ACCESS_FINE_LOCATION)) {\n            Log.d(TAG, \"rationale\");\n            // Explain to the user why permission is required, then request again\n            AlertDialog.Builder builder = new AlertDialog.Builder(this);\n            builder.setMessage(\"We need permissions\")\n                    .setCancelable(false)\n                    .setPositiveButton(\"OK\", new DialogInterface.OnClickListener() {\n                        public void onClick(DialogInterface dialog, int id) {\n                            ActivityCompat.requestPermissions(LocationActivity.this, permissions, 1);\n                    }\n                });\n        AlertDialog alert = builder.create();\n        alert.show();\n\n    } else {\n        Log.d(TAG, \"request\" + android.Manifest.permission.ACCESS_FINE_LOCATION);\n        // If permission has not been denied before, request the permission\n        ActivityCompat.requestPermissions(LocationActivity.this, permissions, 1);\n    }\n} else {\n    Log.d(TAG, \"granted\");\n}\n</code></pre>\n\n<p>Any ideas? Is it something to do with my Activity's class (<code>FragmentActivity</code>), or possible the Google map calling the permissions request asynchronously?</p>\n"},{"tags":["java","string","key-value"],"comments":[{"owner":{"account_id":322981,"reputation":310744,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"score":0,"creation_date":1697818212,"post_id":6712587,"comment_id":136331766,"body_markdown":"You’ll find more good Answers on this duplicate: [*How to convert stream of character to Map&lt;Character, Integer&gt;*](https://stackoverflow.com/q/77325629/642706)","body":"You’ll find more good Answers on this duplicate: <a href=\"https://stackoverflow.com/q/77325629/642706\"><i>How to convert stream of character to Map&lt;Character, Integer&gt;</i></a>"}],"answers":[{"tags":[],"owner":{"account_id":70258,"reputation":590444,"user_id":203907,"accept_rate":81,"display_name":"Bozho"},"down_vote_count":2,"up_vote_count":16,"is_accepted":false,"score":14,"last_activity_date":1369027751,"creation_date":1310760613,"answer_id":6712620,"question_id":6712587,"body_markdown":"You can use a [Multiset][1] (from [guava][2]). It will give you the count for each object. For example:\r\n             \r\n\r\n\r\n    Multiset&lt;Character&gt; chars = HashMultiset.create();\r\n    for (int i = 0; i &lt; string.length(); i++) {\r\n        chars.add(string.charAt(i));\r\n    }\r\n\r\n\r\nThen for each character you can call `chars.count(&#39;a&#39;)` and it returns the number of occurrences\r\n\r\n  [1]: http://guava-libraries.googlecode.com/svn/tags/release09/javadoc/com/google/common/collect/Multiset.html\r\n  [2]: http://code.google.com/p/guava-libraries/","title":"How to count frequency of characters in a string?","body":"<p>You can use a <a href=\"http://guava-libraries.googlecode.com/svn/tags/release09/javadoc/com/google/common/collect/Multiset.html\" rel=\"noreferrer\">Multiset</a> (from <a href=\"http://code.google.com/p/guava-libraries/\" rel=\"noreferrer\">guava</a>). It will give you the count for each object. For example:</p>\n\n<pre><code>Multiset&lt;Character&gt; chars = HashMultiset.create();\nfor (int i = 0; i &lt; string.length(); i++) {\n    chars.add(string.charAt(i));\n}\n</code></pre>\n\n<p>Then for each character you can call <code>chars.count('a')</code> and it returns the number of occurrences</p>\n"},{"tags":[],"owner":{"account_id":307351,"reputation":23310,"user_id":618598,"accept_rate":76,"display_name":"Bernd Elkemann"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1310760734,"creation_date":1310760734,"answer_id":6712636,"question_id":6712587,"body_markdown":"If this does not need to be super-fast just create an array of integers, one integer for each letter (only alphabetic so 2*26 integers? or any binary data possible?). go through the string one char at a time, get the index of the responsible integer (e.g. if you only have alphabetic chars you can have &#39;A&#39; be at index 0 and get that index by subtracting any &#39;A&#39; to &#39;Z&#39; by &#39;A&#39; just as an example of how you can get reasonably fast indices) and increment the value in that index.\r\n\r\nThere are various micro-optimizations to make this faster (if necessary).","title":"How to count frequency of characters in a string?","body":"<p>If this does not need to be super-fast just create an array of integers, one integer for each letter (only alphabetic so 2*26 integers? or any binary data possible?). go through the string one char at a time, get the index of the responsible integer (e.g. if you only have alphabetic chars you can have 'A' be at index 0 and get that index by subtracting any 'A' to 'Z' by 'A' just as an example of how you can get reasonably fast indices) and increment the value in that index.</p>\n\n<p>There are various micro-optimizations to make this faster (if necessary).</p>\n"},{"tags":[],"owner":{"account_id":392943,"reputation":1161,"user_id":754519,"accept_rate":94,"display_name":"Ram"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1310760754,"creation_date":1310760754,"answer_id":6712643,"question_id":6712587,"body_markdown":"Well, two ways come to mind and it depends on your preference:\r\n\r\n1. Sort the array by characters. Then, counting each character becomes trivial. But you will have to make a copy of the array first.\r\n\r\n2. Create another integer array of size 26 (say freq) and str is the array of characters.\r\n\r\n    `for(int i = 0; i &lt; str.length; i ++)`\r\n    \r\n    `freq[str[i] - &#39;a&#39;] ++; //Assuming all characters are in lower case`\r\n\r\nSo the number of &#39;a&#39; &#39;s will be stored at freq[0] and the number of &#39;z&#39; &#39;s will be at freq[25]","title":"How to count frequency of characters in a string?","body":"<p>Well, two ways come to mind and it depends on your preference:</p>\n\n<ol>\n<li><p>Sort the array by characters. Then, counting each character becomes trivial. But you will have to make a copy of the array first.</p></li>\n<li><p>Create another integer array of size 26 (say freq) and str is the array of characters.</p>\n\n<p><code>for(int i = 0; i &lt; str.length; i ++)</code></p>\n\n<p><code>freq[str[i] - 'a'] ++; //Assuming all characters are in lower case</code></p></li>\n</ol>\n\n<p>So the number of 'a' 's will be stored at freq[0] and the number of 'z' 's will be at freq[25]</p>\n"},{"tags":[],"owner":{"account_id":114651,"reputation":527,"user_id":301385,"display_name":"xunil154"},"down_vote_count":2,"up_vote_count":38,"is_accepted":true,"score":36,"last_activity_date":1668694494,"creation_date":1310761140,"answer_id":6712708,"question_id":6712587,"body_markdown":"You can use a java Map and map a `char` to an `int`. You can then iterate over the characters in the string and check if they have been added to the map, if they have, you can then increment its value.\r\n\r\nFor example:\r\n\r\n    Map&lt;Character, Integer&gt; map = new HashMap&lt;Character, Integer&gt;();\r\n    String s = &quot;aasjjikkk&quot;;\r\n    for (int i = 0; i &lt; s.length(); i++) {\r\n        char c = s.charAt(i);\r\n        Integer val = map.get(c);\r\n        if (val != null) {\r\n            map.put(c, val + 1);\r\n        }\r\n        else {\r\n           map.put(c, 1);\r\n       }\r\n    }\r\n\r\n\r\nAt the end you will have a count of all the characters you encountered and you can extract their frequencies from that.\r\n\r\nAlternatively, you can use Bozho&#39;s solution of using a Multiset and counting the total occurences.","title":"How to count frequency of characters in a string?","body":"<p>You can use a java Map and map a <code>char</code> to an <code>int</code>. You can then iterate over the characters in the string and check if they have been added to the map, if they have, you can then increment its value.</p>\n<p>For example:</p>\n<pre><code>Map&lt;Character, Integer&gt; map = new HashMap&lt;Character, Integer&gt;();\nString s = &quot;aasjjikkk&quot;;\nfor (int i = 0; i &lt; s.length(); i++) {\n    char c = s.charAt(i);\n    Integer val = map.get(c);\n    if (val != null) {\n        map.put(c, val + 1);\n    }\n    else {\n       map.put(c, 1);\n   }\n}\n</code></pre>\n<p>At the end you will have a count of all the characters you encountered and you can extract their frequencies from that.</p>\n<p>Alternatively, you can use Bozho's solution of using a Multiset and counting the total occurences.</p>\n"},{"tags":[],"owner":{"account_id":235494,"reputation":1156,"user_id":502344,"accept_rate":86,"display_name":"Mike Caputo"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1310762165,"creation_date":1310761365,"answer_id":6712745,"question_id":6712587,"body_markdown":"You can use a Hashtable with each character as the key and the total count becomes the value.\r\n\r\n    Hashtable&lt;Character,Integer&gt; table = new Hashtable&lt;Character,Integer&gt;();\r\n    String str = &quot;aasjjikkk&quot;;\r\n    for( c in str ) {\r\n        if( table.get(c) == null )\r\n            table.put(c,1);\r\n        else\r\n            table.put(c,table.get(c) + 1);\r\n    }\r\n\r\n    for( elem in table ) {\r\n        println &quot;elem:&quot; + elem;\r\n    }","title":"How to count frequency of characters in a string?","body":"<p>You can use a Hashtable with each character as the key and the total count becomes the value.</p>\n\n<pre><code>Hashtable&lt;Character,Integer&gt; table = new Hashtable&lt;Character,Integer&gt;();\nString str = \"aasjjikkk\";\nfor( c in str ) {\n    if( table.get(c) == null )\n        table.put(c,1);\n    else\n        table.put(c,table.get(c) + 1);\n}\n\nfor( elem in table ) {\n    println \"elem:\" + elem;\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":294022,"reputation":115930,"user_id":597657,"accept_rate":99,"display_name":"Eng.Fouad"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1310762098,"creation_date":1310762098,"answer_id":6712857,"question_id":6712587,"body_markdown":"Here is a solution:\r\n\r\nDefine your own `Pair`:\r\n\r\n    public class Pair\r\n    {\r\n        private char letter;\r\n        private int count;\r\n        public Pair(char letter, int count)\r\n        {\r\n            this.letter = letter;\r\n            this.count= count;\r\n        }\r\n        public char getLetter(){return key;}\r\n        public int getCount(){return count;}\r\n    }\r\n\r\n\r\nThen you could do:\r\n\r\n    public static Pair countCharFreq(String s)\r\n    {\r\n        String temp = s;\r\n        java.util.List&lt;Pair&gt; list = new java.util.ArrayList&lt;Pair&gt;();\r\n        while(temp.length() != 0)\r\n        {\r\n            list.add(new Pair(temp.charAt(0), countOccurrences(temp, temp.charAt(0))));\r\n            temp.replaceAll(&quot;[&quot; + temp.charAt(0) +&quot;]&quot;,&quot;&quot;);\r\n        }\r\n    }\r\n\r\n    public static int countOccurrences(String s, char c)\r\n    {\r\n        int count = 0;\r\n        for(int i = 0; i &lt; s.length(); i++)\r\n        {\r\n            if(s.charAt(i) == c) count++;\r\n        }\r\n        return count;\r\n    }","title":"How to count frequency of characters in a string?","body":"<p>Here is a solution:</p>\n\n<p>Define your own <code>Pair</code>:</p>\n\n<pre><code>public class Pair\n{\n    private char letter;\n    private int count;\n    public Pair(char letter, int count)\n    {\n        this.letter = letter;\n        this.count= count;\n    }\n    public char getLetter(){return key;}\n    public int getCount(){return count;}\n}\n</code></pre>\n\n<p>Then you could do:</p>\n\n<pre><code>public static Pair countCharFreq(String s)\n{\n    String temp = s;\n    java.util.List&lt;Pair&gt; list = new java.util.ArrayList&lt;Pair&gt;();\n    while(temp.length() != 0)\n    {\n        list.add(new Pair(temp.charAt(0), countOccurrences(temp, temp.charAt(0))));\n        temp.replaceAll(\"[\" + temp.charAt(0) +\"]\",\"\");\n    }\n}\n\npublic static int countOccurrences(String s, char c)\n{\n    int count = 0;\n    for(int i = 0; i &lt; s.length(); i++)\n    {\n        if(s.charAt(i) == c) count++;\n    }\n    return count;\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1834232,"reputation":49,"user_id":1664908,"display_name":"Michael"},"down_vote_count":1,"up_vote_count":5,"is_accepted":false,"score":4,"last_activity_date":1405926414,"creation_date":1347433150,"answer_id":12382724,"question_id":6712587,"body_markdown":"Here is another solution, dodgy as it may be.\r\n\r\n\tpublic char getNumChar(String s) {\r\n\t\tchar[] c = s.toCharArray();\r\n\t\tString alphabet = &quot;abcdefghijklmnopqrstuvwxyz&quot;;\r\n\t\tint[] countArray = new int[26];\r\n\t\tfor (char x : c) {\r\n\t\t\tfor (int i = 0; i &lt; alphabet.length(); i++) {\r\n\t\t\t\tif (alphabet.charAt(i) == x) {\r\n\t\t\t\t\tcountArray[i]++;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tjava.util.HashMap&lt;Integer, Character&gt; countList = new java.util.HashMap&lt;Integer, Character&gt;();\r\n\r\n\t\tfor (int i = 0; i &lt; 26; i++) {\r\n\t\t\tcountList.put(countArray[i], alphabet.charAt(i));\r\n\t\t}\r\n\t\tjava.util.Arrays.sort(countArray);\r\n\t\tint max = countArray[25];\r\n\t\treturn countList.get(max);\r\n\t}","title":"How to count frequency of characters in a string?","body":"<p>Here is another solution, dodgy as it may be.</p>\n\n<pre><code>public char getNumChar(String s) {\n    char[] c = s.toCharArray();\n    String alphabet = \"abcdefghijklmnopqrstuvwxyz\";\n    int[] countArray = new int[26];\n    for (char x : c) {\n        for (int i = 0; i &lt; alphabet.length(); i++) {\n            if (alphabet.charAt(i) == x) {\n                countArray[i]++;\n            }\n        }\n    }\n\n    java.util.HashMap&lt;Integer, Character&gt; countList = new java.util.HashMap&lt;Integer, Character&gt;();\n\n    for (int i = 0; i &lt; 26; i++) {\n        countList.put(countArray[i], alphabet.charAt(i));\n    }\n    java.util.Arrays.sort(countArray);\n    int max = countArray[25];\n    return countList.get(max);\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1783291,"reputation":929,"user_id":1625434,"display_name":"varna"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1393568188,"creation_date":1393568188,"answer_id":22087665,"question_id":6712587,"body_markdown":"This is similar to xunil154&#39;s answer, except that a string is made a char array and a linked hashmap is used to maintain the insertion order of the characters.\r\n   \r\n    String text = &quot;aasjjikkk&quot;;\r\n    char[] charArray = text.toCharArray();\r\n    Map&lt;Character, Integer&gt; freqList = new LinkedHashMap&lt;Character, Integer&gt;();\r\n\r\n            for(char key : charArray) {\r\n                if(freqList.containsKey(key)) {\r\n                   freqList.put(key, freqList.get(key) + 1);\r\n                } else\r\n                    freqList.put(key, 1);\r\n            }","title":"How to count frequency of characters in a string?","body":"<p>This is similar to xunil154's answer, except that a string is made a char array and a linked hashmap is used to maintain the insertion order of the characters.</p>\n\n<pre><code>String text = \"aasjjikkk\";\nchar[] charArray = text.toCharArray();\nMap&lt;Character, Integer&gt; freqList = new LinkedHashMap&lt;Character, Integer&gt;();\n\n        for(char key : charArray) {\n            if(freqList.containsKey(key)) {\n               freqList.put(key, freqList.get(key) + 1);\n            } else\n                freqList.put(key, 1);\n        }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":4250244,"reputation":1,"user_id":3477552,"display_name":"Nitish Rajan"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1404821917,"creation_date":1404821917,"answer_id":24631699,"question_id":6712587,"body_markdown":"    import java.io.FileInputStream;\r\n    import java.util.HashSet;\r\n    import java.util.Iterator;\r\n    public class CountFrequencyOfCharater {\r\n    public static void main(String args[]) throws Exception\r\n    {\r\n        HashSet hs=new HashSet();\r\n        String str=&quot;hey how are you?&quot;;\r\n        char arr[]=new char[str.length()];\r\n        for(int i=0;i&lt;str.length();i++)\r\n        {\r\n            arr[i]=str.charAt(i);\r\n        }\r\n        for(int j=0;j&lt;str.length();j++)\r\n        {\r\n            int c=0;\r\n            for(int k=0;k&lt;str.length();k++)\r\n            {\r\n                if(arr[j]==arr[k])\r\n                c++;\r\n            }\r\n            hs.add(arr[j]+&quot;=&quot;+c+&quot;,&quot;);\r\n        }\r\n            Iterator it=hs.iterator();\r\n            while(it.hasNext())\r\n            {\r\n                 System.out.print(it.next());\r\n            }\r\n      }\r\n    }","title":"How to count frequency of characters in a string?","body":"<pre><code>import java.io.FileInputStream;\nimport java.util.HashSet;\nimport java.util.Iterator;\npublic class CountFrequencyOfCharater {\npublic static void main(String args[]) throws Exception\n{\n    HashSet hs=new HashSet();\n    String str=\"hey how are you?\";\n    char arr[]=new char[str.length()];\n    for(int i=0;i&lt;str.length();i++)\n    {\n        arr[i]=str.charAt(i);\n    }\n    for(int j=0;j&lt;str.length();j++)\n    {\n        int c=0;\n        for(int k=0;k&lt;str.length();k++)\n        {\n            if(arr[j]==arr[k])\n            c++;\n        }\n        hs.add(arr[j]+\"=\"+c+\",\");\n    }\n        Iterator it=hs.iterator();\n        while(it.hasNext())\n        {\n             System.out.print(it.next());\n        }\n  }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":4808098,"reputation":51,"user_id":3882435,"display_name":"weldino"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1596058164,"creation_date":1409349250,"answer_id":25576773,"question_id":6712587,"body_markdown":"\r\n    \r\n    \r\n    import java.util.HashMap;\r\n    import java.util.Iterator;\r\n    import java.util.Map;\r\n    import java.util.Map.Entry;\r\n    import java.util.Scanner;\r\n    \r\n    \r\n    public class FrequenceyOfCharacters {\r\n    \r\n    \tpublic static void main(String[] args) {\r\n    \t\tSystem.out.println(&quot;Please enter the string to count each character frequencey: &quot;);\r\n    \t\tScanner sc=new  Scanner(System.in);\r\n    \t\tString s =sc.nextLine();\r\n            String input = s.replaceAll(&quot;\\\\s&quot;,&quot;&quot;); // To remove space.\r\n    \t\tfrequenceyCount(input);\r\n    \t\t\r\n    \t\t\r\n    \t}\r\n    \r\n    \tprivate static void frequenceyCount(String input) {\r\n    \t\t\r\n    \t\tMap&lt;Character,Integer&gt; hashCount=new HashMap&lt;&gt;();\r\n    \t\tCharacter c;\r\n    \t\tfor(int i=0; i&lt;input.length();i++)\r\n    \t\t{\r\n    \t\t   c =input.charAt(i);\r\n    \t\t   if(hashCount.get(c)!=null){\r\n    \t\t\t   hashCount.put(c, hashCount.get(c)+1);\r\n    \t\t   }else{\r\n    \t\t\t   hashCount.put(c, 1);\r\n    \t\t   }\r\n    \t\t}\r\n    \t\tIterator it = hashCount.entrySet().iterator();\r\n    \t\tSystem.out.println(&quot;char : frequency&quot;);\r\n    \t    while (it.hasNext()) {\r\n    \t        Map.Entry pairs = (Map.Entry)it.next();\r\n    \t        System.out.println(pairs.getKey() + &quot; : &quot; + pairs.getValue());\r\n    \t        it.remove(); \r\n    \t    }\r\n    \t\t\r\n    \t}\r\n    \r\n    }\r\n\r\n","title":"How to count frequency of characters in a string?","body":"<pre><code>import java.util.HashMap;\nimport java.util.Iterator;\nimport java.util.Map;\nimport java.util.Map.Entry;\nimport java.util.Scanner;\n\n\npublic class FrequenceyOfCharacters {\n\n    public static void main(String[] args) {\n        System.out.println(&quot;Please enter the string to count each character frequencey: &quot;);\n        Scanner sc=new  Scanner(System.in);\n        String s =sc.nextLine();\n        String input = s.replaceAll(&quot;\\\\s&quot;,&quot;&quot;); // To remove space.\n        frequenceyCount(input);\n        \n        \n    }\n\n    private static void frequenceyCount(String input) {\n        \n        Map&lt;Character,Integer&gt; hashCount=new HashMap&lt;&gt;();\n        Character c;\n        for(int i=0; i&lt;input.length();i++)\n        {\n           c =input.charAt(i);\n           if(hashCount.get(c)!=null){\n               hashCount.put(c, hashCount.get(c)+1);\n           }else{\n               hashCount.put(c, 1);\n           }\n        }\n        Iterator it = hashCount.entrySet().iterator();\n        System.out.println(&quot;char : frequency&quot;);\n        while (it.hasNext()) {\n            Map.Entry pairs = (Map.Entry)it.next();\n            System.out.println(pairs.getKey() + &quot; : &quot; + pairs.getValue());\n            it.remove(); \n        }\n        \n    }\n\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":7525922,"reputation":1,"user_id":5716101,"display_name":"Raghu Da"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1451029737,"creation_date":1451025701,"answer_id":34460635,"question_id":6712587,"body_markdown":"    import java.util.*;\r\n    class Charfrequency\r\n    {\r\n     public static void main(String a[]){\r\n     \r\n    \t\tScanner sc=new Scanner(System.in);\r\n    \t\tSystem.out.println(&quot;Enter Your String :&quot;);\r\n    \t\tString s1=sc.nextLine();\r\n    \t\tint count,j=1;\r\n    \t\tchar var=&#39;a&#39;;\r\n    \t\tchar ch[]=s1.toCharArray();\r\n    \t\twhile(j&lt;=26)\r\n    \t\t{\r\n    \t\t   count=0;\r\n    \t\t\t\tfor(int i=0; i&lt;s1.length(); i++)\r\n    \t\t\t\t{\r\n    \t\t\t\t\tif(ch[i]==var || ch[i]==var-32)\r\n    \t\t\t\t\t{\r\n    \t\t\t\t\t\tcount++;\r\n    \t\t\t\t\t}\r\n    \t\t\t\t}\r\n    \t\t\t\tif(count&gt;0){\r\n    \t\t\t\tSystem.out.println(&quot;Frequency of &quot;+var+&quot; is &quot;+count);\r\n    \t\t\t\t}\r\n    \t\t\t\tvar++;\r\n    \t\t\t\tj++;\r\n    \t\t}\r\n     }\r\n    }","title":"How to count frequency of characters in a string?","body":"<pre><code>import java.util.*;\nclass Charfrequency\n{\n public static void main(String a[]){\n\n        Scanner sc=new Scanner(System.in);\n        System.out.println(\"Enter Your String :\");\n        String s1=sc.nextLine();\n        int count,j=1;\n        char var='a';\n        char ch[]=s1.toCharArray();\n        while(j&lt;=26)\n        {\n           count=0;\n                for(int i=0; i&lt;s1.length(); i++)\n                {\n                    if(ch[i]==var || ch[i]==var-32)\n                    {\n                        count++;\n                    }\n                }\n                if(count&gt;0){\n                System.out.println(\"Frequency of \"+var+\" is \"+count);\n                }\n                var++;\n                j++;\n        }\n }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":5368006,"reputation":2152,"user_id":4277293,"accept_rate":62,"display_name":"RishiKesh Pathak"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1459227676,"creation_date":1459168003,"answer_id":36262287,"question_id":6712587,"body_markdown":"    package com.rishi.zava;\r\n    \r\n    import java.util.HashMap;\r\n    import java.util.Map;\r\n    import java.util.Map.Entry;\r\n    \r\n    public class ZipString {\r\n    \tpublic static void main(String arg[]) {\r\n    \t\tString input = &quot;aaaajjjgggtttssvvkkllaaiiikk&quot;;\r\n    \t\tint len = input.length();\r\n    \t\tMap&lt;Character, Integer&gt; zip = new HashMap&lt;Character, Integer&gt;();\r\n    \t\tfor (int j = 0; len &gt; j; j++) {\r\n    \t\t\tint count = 0;\r\n    \t\t\tfor (int i = 0; len &gt; i; i++) {\r\n    \t\t\t\tif (input.charAt(j) == input.charAt(i)) {\r\n    \t\t\t\t\tcount++;\r\n    \t\t\t\t}\r\n    \t\t\t}\r\n    \t\t\tzip.put(input.charAt(j), count);\r\n    \t\t}\r\n    \t\tStringBuffer myValue = new StringBuffer();\r\n    \t\tString myMapKeyValue = &quot;&quot;;\r\n    \t\tfor (Entry&lt;Character, Integer&gt; entry : zip.entrySet()) {\r\n    \t\t\tmyMapKeyValue = Character.toString(entry.getKey()).concat(\r\n    \t\t\t\t\tInteger.toString(entry.getValue()));\r\n    \t\t\tmyValue.append(myMapKeyValue);\r\n    \t\t}\r\n    \t\tSystem.out.println(myValue);\r\n    \t}\r\n    }\r\n\r\n\r\n**Input** = *aaaajjjgggtttssvvkkllaaiiikk*\r\n\r\n**Output** = *a6s2t3v2g3i3j3k4l2*\r\n","title":"How to count frequency of characters in a string?","body":"<pre><code>package com.rishi.zava;\n\nimport java.util.HashMap;\nimport java.util.Map;\nimport java.util.Map.Entry;\n\npublic class ZipString {\n    public static void main(String arg[]) {\n        String input = \"aaaajjjgggtttssvvkkllaaiiikk\";\n        int len = input.length();\n        Map&lt;Character, Integer&gt; zip = new HashMap&lt;Character, Integer&gt;();\n        for (int j = 0; len &gt; j; j++) {\n            int count = 0;\n            for (int i = 0; len &gt; i; i++) {\n                if (input.charAt(j) == input.charAt(i)) {\n                    count++;\n                }\n            }\n            zip.put(input.charAt(j), count);\n        }\n        StringBuffer myValue = new StringBuffer();\n        String myMapKeyValue = \"\";\n        for (Entry&lt;Character, Integer&gt; entry : zip.entrySet()) {\n            myMapKeyValue = Character.toString(entry.getKey()).concat(\n                    Integer.toString(entry.getValue()));\n            myValue.append(myMapKeyValue);\n        }\n        System.out.println(myValue);\n    }\n}\n</code></pre>\n\n<p><strong>Input</strong> = <em>aaaajjjgggtttssvvkkllaaiiikk</em></p>\n\n<p><strong>Output</strong> = <em>a6s2t3v2g3i3j3k4l2</em></p>\n"},{"tags":[],"owner":{"account_id":5871763,"reputation":1,"user_id":4623887,"display_name":"Gaurav Walia"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1459724870,"creation_date":1459724870,"answer_id":36392384,"question_id":6712587,"body_markdown":"The shorted possible code using a HashMap. (With no forceful line saves)\r\n\r\n    private static Map&lt;Character, Integer&gt; findCharacterFrequency(String str) {\r\n    \t\t\r\n    \t\tMap&lt;Character, Integer&gt; map = new HashMap&lt;&gt;();\r\n    \t\t\r\n    \t\tfor (char ch : str.toCharArray()) {\r\n    \t\t\t/* Using getOrDefault(), since Java1.8 */\r\n    \t\t\tmap.put(ch, map.getOrDefault(ch, 0) + 1);\r\n    \t\t}\r\n    \t\treturn map;\r\n    \t}","title":"How to count frequency of characters in a string?","body":"<p>The shorted possible code using a HashMap. (With no forceful line saves)</p>\n\n<pre><code>private static Map&lt;Character, Integer&gt; findCharacterFrequency(String str) {\n\n        Map&lt;Character, Integer&gt; map = new HashMap&lt;&gt;();\n\n        for (char ch : str.toCharArray()) {\n            /* Using getOrDefault(), since Java1.8 */\n            map.put(ch, map.getOrDefault(ch, 0) + 1);\n        }\n        return map;\n    }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":8449580,"reputation":303,"user_id":6338857,"display_name":"Sreekanth"},"down_vote_count":0,"up_vote_count":19,"is_accepted":false,"score":19,"last_activity_date":1512049902,"creation_date":1497577706,"answer_id":44579581,"question_id":6712587,"body_markdown":"A concise way to do this is:\r\n\r\n    Map&lt;Character,Integer&gt; frequencies = new HashMap&lt;&gt;();\r\n    for (char ch : input.toCharArray()) \r\n       frequencies.put(ch, frequencies.getOrDefault(ch, 0) + 1);\r\n\r\nWe use a for-each to loop through every character. The `frequencies.getOrDefault()` gets value if key is present or returns(as default) its second argument. ","title":"How to count frequency of characters in a string?","body":"<p>A concise way to do this is:</p>\n\n<pre><code>Map&lt;Character,Integer&gt; frequencies = new HashMap&lt;&gt;();\nfor (char ch : input.toCharArray()) \n   frequencies.put(ch, frequencies.getOrDefault(ch, 0) + 1);\n</code></pre>\n\n<p>We use a for-each to loop through every character. The <code>frequencies.getOrDefault()</code> gets value if key is present or returns(as default) its second argument. </p>\n"},{"tags":[],"owner":{"account_id":1712726,"reputation":6528,"user_id":1570415,"display_name":"Donald Raab"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1573351082,"creation_date":1498244119,"answer_id":44728240,"question_id":6712587,"body_markdown":"You can use a `CharAdapter` and a `CharBag` from [Eclipse Collections][1] and avoid boxing to `Character` and `Integer`.\r\n\r\n    CharBag bag = Strings.asChars(&quot;aasjjikkk&quot;).toBag();\r\n    \r\n    Assert.assertEquals(2, bag.occurrencesOf(&#39;a&#39;));\r\n    Assert.assertEquals(1, bag.occurrencesOf(&#39;s&#39;));\r\n    Assert.assertEquals(2, bag.occurrencesOf(&#39;j&#39;));\r\n    Assert.assertEquals(1, bag.occurrencesOf(&#39;i&#39;));\r\n    Assert.assertEquals(3, bag.occurrencesOf(&#39;k&#39;));\r\n\r\nNote: I am a committer for Eclipse Collections.\r\n\r\n\r\n  [1]: https://www.eclipse.org/collections/","title":"How to count frequency of characters in a string?","body":"<p>You can use a <code>CharAdapter</code> and a <code>CharBag</code> from <a href=\"https://www.eclipse.org/collections/\" rel=\"nofollow noreferrer\">Eclipse Collections</a> and avoid boxing to <code>Character</code> and <code>Integer</code>.</p>\n\n<pre><code>CharBag bag = Strings.asChars(\"aasjjikkk\").toBag();\n\nAssert.assertEquals(2, bag.occurrencesOf('a'));\nAssert.assertEquals(1, bag.occurrencesOf('s'));\nAssert.assertEquals(2, bag.occurrencesOf('j'));\nAssert.assertEquals(1, bag.occurrencesOf('i'));\nAssert.assertEquals(3, bag.occurrencesOf('k'));\n</code></pre>\n\n<p>Note: I am a committer for Eclipse Collections.</p>\n"},{"tags":[],"owner":{"account_id":2809874,"reputation":4581,"user_id":2416313,"accept_rate":92,"display_name":"Thirumalai Parthasarathi"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1532281724,"creation_date":1507880227,"answer_id":46724837,"question_id":6712587,"body_markdown":"Since there was no Java 8 solution, thought of posting one. Also, this solution is much neater, readable and concise than some of the other solutions mentioned here.\r\n\r\n    String string = &quot;aasjjikkk&quot;;\r\n\t\t\r\n    Map&lt;Character, Long&gt; characterFrequency = string.chars()  // creates an IntStream\r\n        .mapToObj(c -&gt; (char) c) // converts the IntStream to Stream&lt;Character&gt;\r\n        .collect(Collectors.groupingBy(c -&gt; c, Collectors.counting())); // creates a\r\n                                                                        // Map&lt;Character, Long&gt; \r\n                                                                        // where the Long is\r\n                                                                        // the frequency","title":"How to count frequency of characters in a string?","body":"<p>Since there was no Java 8 solution, thought of posting one. Also, this solution is much neater, readable and concise than some of the other solutions mentioned here.</p>\n\n<pre><code>String string = \"aasjjikkk\";\n\nMap&lt;Character, Long&gt; characterFrequency = string.chars()  // creates an IntStream\n    .mapToObj(c -&gt; (char) c) // converts the IntStream to Stream&lt;Character&gt;\n    .collect(Collectors.groupingBy(c -&gt; c, Collectors.counting())); // creates a\n                                                                    // Map&lt;Character, Long&gt; \n                                                                    // where the Long is\n                                                                    // the frequency\n</code></pre>\n"},{"tags":[],"owner":{"account_id":10968796,"reputation":1,"user_id":8059753,"display_name":"naveen prasanna"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1511249718,"creation_date":1511248776,"answer_id":47407351,"question_id":6712587,"body_markdown":"   Please try the given code below, hope it will helpful to you,    \r\n    \r\n    import java.util.Scanner;\r\n    \r\n    class String55 {\r\n        public static int frequency(String s1,String s2)\r\n        {\r\n            \r\n            int count=0;\r\n            char ch[]=s1.toCharArray();\r\n            char ch1[]=s2.toCharArray();\r\n            for (int i=0;i&lt;ch.length-1; i++)\r\n            {\r\n            \t\r\n               \r\n                \r\n                \tint k=i;\r\n                \r\n                \tint j1=i+1;\r\n                \tint j=0;\r\n                \tint j11=j;\r\n                \tint j2=j+1;\r\n                \t{\r\n                \t\twhile(k&lt;ch.length &amp;&amp; j11&lt;ch1.length &amp;&amp; ch[k]==ch1[j11])\r\n                \t\t{\r\n                \t\tk++;\r\n                \t\tj11++;\r\n              \r\n                \t\t}\r\n                \t\r\n                \r\n                    int l=k+j1;\r\n    \t\t\t\tint m=j11+j2;\r\n    \t\t\t\tif( l== m)\r\n                    {\r\n                        count=1;\r\n                        count++;\r\n                    }\r\n                    \r\n                    \r\n                \r\n                \t\r\n               \r\n            }\r\n            }\r\n            return count;\r\n    \t\t\r\n            \r\n        }\r\n    \tpublic static void main (String[] args) {\r\n    \t    Scanner sc=new Scanner(System.in);\r\n    \t\tSystem.out.println(&quot;enter the pattern&quot;);\r\n    \t\tString s1=sc.next();\r\n    \t\t\tSystem.out.println(&quot;enter the String&quot;);\r\n    \t\t\tString s2=sc.next();\r\n    \t\t\tint res=frequency(s1, s2);\r\n    \t\t\tSystem.out.println(&quot;FREQUENCY==&quot; +res);\r\n    \t\t\t\r\n    \t}\r\n    }\r\nSAMPLE OUTPUT:\r\nenter the pattern\r\nman\r\nenter the String\r\ndhimanman\r\nFREQUENCY==2\r\n\r\nThank-you.Happy coding.","title":"How to count frequency of characters in a string?","body":"<p>Please try the given code below, hope it will helpful to you,    </p>\n\n<pre><code>import java.util.Scanner;\n\nclass String55 {\n    public static int frequency(String s1,String s2)\n    {\n\n        int count=0;\n        char ch[]=s1.toCharArray();\n        char ch1[]=s2.toCharArray();\n        for (int i=0;i&lt;ch.length-1; i++)\n        {\n\n\n\n                int k=i;\n\n                int j1=i+1;\n                int j=0;\n                int j11=j;\n                int j2=j+1;\n                {\n                    while(k&lt;ch.length &amp;&amp; j11&lt;ch1.length &amp;&amp; ch[k]==ch1[j11])\n                    {\n                    k++;\n                    j11++;\n\n                    }\n\n\n                int l=k+j1;\n                int m=j11+j2;\n                if( l== m)\n                {\n                    count=1;\n                    count++;\n                }\n\n\n\n\n\n        }\n        }\n        return count;\n\n\n    }\n    public static void main (String[] args) {\n        Scanner sc=new Scanner(System.in);\n        System.out.println(\"enter the pattern\");\n        String s1=sc.next();\n            System.out.println(\"enter the String\");\n            String s2=sc.next();\n            int res=frequency(s1, s2);\n            System.out.println(\"FREQUENCY==\" +res);\n\n    }\n}\n</code></pre>\n\n<p>SAMPLE OUTPUT:\nenter the pattern\nman\nenter the String\ndhimanman\nFREQUENCY==2</p>\n\n<p>Thank-you.Happy coding.</p>\n"},{"tags":[],"owner":{"account_id":7743155,"reputation":55371,"user_id":5862071,"accept_rate":86,"display_name":"Ousmane D."},"down_vote_count":0,"up_vote_count":21,"is_accepted":false,"score":21,"last_activity_date":1697800608,"creation_date":1532177944,"answer_id":51456335,"question_id":6712587,"body_markdown":"Using the stream API as of JDK-8:\r\n\r\n    Map&lt;Character, Long&gt; frequency =\r\n                str.chars()\r\n                   .mapToObj(c -&gt; (char)c)\r\n                   .collect(Collectors.groupingBy(Function.identity(), Collectors.counting()));\r\n\r\nor if you want the values as `Integer`s:\r\n\r\n    Map&lt;Character, Integer&gt; frequency =\r\n                str.chars()\r\n                   .mapToObj(c -&gt; (char)c)\r\n                   .collect(Collectors.groupingBy(Function.identity(), Collectors.summingInt(c -&gt; 1)));\r\n\r\nAnother variant:\r\n\r\n    Map&lt;Character, Integer&gt; frequency = \r\n                str.chars()\r\n                   .mapToObj(c -&gt; (char)c)\r\n                   .collect(Collectors.toMap(Function.identity(), c -&gt; 1, Math::addExact));","title":"How to count frequency of characters in a string?","body":"<p>Using the stream API as of JDK-8:</p>\n<pre><code>Map&lt;Character, Long&gt; frequency =\n            str.chars()\n               .mapToObj(c -&gt; (char)c)\n               .collect(Collectors.groupingBy(Function.identity(), Collectors.counting()));\n</code></pre>\n<p>or if you want the values as <code>Integer</code>s:</p>\n<pre><code>Map&lt;Character, Integer&gt; frequency =\n            str.chars()\n               .mapToObj(c -&gt; (char)c)\n               .collect(Collectors.groupingBy(Function.identity(), Collectors.summingInt(c -&gt; 1)));\n</code></pre>\n<p>Another variant:</p>\n<pre><code>Map&lt;Character, Integer&gt; frequency = \n            str.chars()\n               .mapToObj(c -&gt; (char)c)\n               .collect(Collectors.toMap(Function.identity(), c -&gt; 1, Math::addExact));\n</code></pre>\n"},{"tags":[],"owner":{"account_id":4220013,"reputation":1,"user_id":3455012,"display_name":"DiptiPrakash"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1544485588,"creation_date":1544485588,"answer_id":53715400,"question_id":6712587,"body_markdown":"    package com.dipu.string;\r\n    \r\n    import java.util.HashMap;\r\n    import java.util.Map;\r\n    \r\n    public class RepetativeCharInString {\r\n    \tpublic static void main(String[] args) {\r\n    \t\tString data = &quot;aaabbbcccdddffffrss&quot;;\r\n    \t\tchar[] charArray = data.toCharArray();\r\n    \t\tMap&lt;Character, Integer&gt; map = new HashMap&lt;&gt;();\r\n    \t\tfor (char c : charArray) {\r\n    \t\t\tif (map.containsKey(c)) {\r\n    \t\t\t\tmap.put(c, map.get(c) + 1);\r\n    \t\t\t} else {\r\n    \t\t\t\tmap.put(c, 1);\r\n    \t\t\t}\r\n    \t\t}\r\n    \t\tSystem.out.println(map);\r\n    \r\n    \t}\r\n    }\r\n\r\n","title":"How to count frequency of characters in a string?","body":"<pre><code>package com.dipu.string;\n\nimport java.util.HashMap;\nimport java.util.Map;\n\npublic class RepetativeCharInString {\n    public static void main(String[] args) {\n        String data = \"aaabbbcccdddffffrss\";\n        char[] charArray = data.toCharArray();\n        Map&lt;Character, Integer&gt; map = new HashMap&lt;&gt;();\n        for (char c : charArray) {\n            if (map.containsKey(c)) {\n                map.put(c, map.get(c) + 1);\n            } else {\n                map.put(c, 1);\n            }\n        }\n        System.out.println(map);\n\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":15294065,"reputation":1,"user_id":11034750,"display_name":"MinakshiJ"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1549650692,"creation_date":1549644332,"answer_id":54596835,"question_id":6712587,"body_markdown":"    *import java.util.ArrayList;\r\n    import java.util.Collections;\r\n    \r\n    public class Freq {\r\n    \r\n    \tpublic static void main(String[] args) {\r\n    \t\t// TODO Auto-generated method stub\r\n    \t\tString temp=&quot;zsaaqaaaaaaaabbbbbcc&quot;;\r\n\t\tList&lt;String&gt; temp1= new ArrayList&lt;String&gt; ();\r\n\t\tArrayList&lt;Integer&gt;freq=new ArrayList&lt;Integer&gt;();\r\n\t\tfor(int i=0;i&lt;temp.length()-1;i++)\r\n\t\t{\t\t\r\n\t\t\ttemp1.add(Character.toString(temp.charAt(i)));\t\t\r\n\t\t}\r\n\t\tSet&lt;String&gt; uniqset=new HashSet&lt;String&gt;(temp1);\r\n\t\tfor(String s:uniqset)\r\n\t\t{\r\n\t\t\tfreq.add(Collections.frequency(temp1, s));\r\n\t\t\tSystem.out.println(s+&quot; --&gt;&gt;&quot;+Collections.frequency(temp1, s));\r\n\t\t}\r\n    \t}\r\n    \r\n    }\r\n               ------Output-------\r\n           a --&gt;&gt;10\r\n           b --&gt;&gt;5\r\n           c --&gt;&gt;1\r\n           q --&gt;&gt;1\r\n           s --&gt;&gt;1\r\n           z --&gt;&gt;1\r\nUse collections frequency method to count frequency of char*\r\n","title":"How to count frequency of characters in a string?","body":"<pre><code>*import java.util.ArrayList;\nimport java.util.Collections;\n\npublic class Freq {\n\n    public static void main(String[] args) {\n        // TODO Auto-generated method stub\n        String temp=\"zsaaqaaaaaaaabbbbbcc\";\n    List&lt;String&gt; temp1= new ArrayList&lt;String&gt; ();\n    ArrayList&lt;Integer&gt;freq=new ArrayList&lt;Integer&gt;();\n    for(int i=0;i&lt;temp.length()-1;i++)\n    {       \n        temp1.add(Character.toString(temp.charAt(i)));      \n    }\n    Set&lt;String&gt; uniqset=new HashSet&lt;String&gt;(temp1);\n    for(String s:uniqset)\n    {\n        freq.add(Collections.frequency(temp1, s));\n        System.out.println(s+\" --&gt;&gt;\"+Collections.frequency(temp1, s));\n    }\n    }\n\n}\n           ------Output-------\n       a --&gt;&gt;10\n       b --&gt;&gt;5\n       c --&gt;&gt;1\n       q --&gt;&gt;1\n       s --&gt;&gt;1\n       z --&gt;&gt;1\n</code></pre>\n\n<p>Use collections frequency method to count frequency of char*</p>\n"},{"tags":[],"owner":{"account_id":7768515,"reputation":1636,"user_id":7972621,"display_name":"Ankit Sharma"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1556562907,"creation_date":1556562907,"answer_id":55909034,"question_id":6712587,"body_markdown":"    String s = &quot;aaaabbbbcccddddd&quot;;\r\n    Map&lt;Character, Integer&gt; map = new HashMap&lt;&gt;();\r\n\r\nUsing one line in Java8\r\n\r\n    s.chars().forEach(e-&gt;map.put((char)e, map.getOrDefault((char)e, 0) + 1));","title":"How to count frequency of characters in a string?","body":"<pre><code>String s = \"aaaabbbbcccddddd\";\nMap&lt;Character, Integer&gt; map = new HashMap&lt;&gt;();\n</code></pre>\n\n<p>Using one line in Java8</p>\n\n<pre><code>s.chars().forEach(e-&gt;map.put((char)e, map.getOrDefault((char)e, 0) + 1));\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1483039,"reputation":8759,"user_id":1391924,"accept_rate":41,"display_name":"Chandrayya G K"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1557154471,"creation_date":1557154471,"answer_id":56007674,"question_id":6712587,"body_markdown":"Uffh. Don&#39;t you think this is the simplest solution?\r\n\r\n        char inputChar = &#39;|&#39;;\r\n\t\tint freq = &quot;|fd|fdfd|f dfd|fd&quot;.replaceAll(&quot;[^&quot; + inputChar +&quot;]&quot;, &quot;&quot;).length();\r\n\t\tSystem.out.println(&quot;freq &quot; + freq);","title":"How to count frequency of characters in a string?","body":"<p>Uffh. Don't you think this is the simplest solution?</p>\n\n<pre><code>    char inputChar = '|';\n    int freq = \"|fd|fdfd|f dfd|fd\".replaceAll(\"[^\" + inputChar +\"]\", \"\").length();\n    System.out.println(\"freq \" + freq);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":13746341,"reputation":449,"user_id":9919896,"display_name":"Suraj Verma"},"down_vote_count":3,"up_vote_count":0,"is_accepted":false,"score":-3,"last_activity_date":1596186954,"creation_date":1564229652,"answer_id":57232043,"question_id":6712587,"body_markdown":"       \r\n    \r\n#From C language \r\n    \r\n     #include&lt;stdio.h&gt;`\r\n     #include &lt;string.h&gt;`\r\n      int main()\r\n    {\r\n        char s[1000];  \r\n        int  i,j,k,count=0,n;\r\n        printf(&quot;Enter  the string : &quot;);\r\n        gets(s);\r\n        for(j=0;s[j];j++);\r\n    \tn=j; \r\n    \tprintf(&quot; frequency count character in string:\\n&quot;);\r\n        for(i=0;i&lt;n;i++)  \r\n        {\r\n         \tcount=1;\r\n        \tif(s[i])\r\n        \t{\r\n    \t\t\r\n     \t\t  for(j=i+1;j&lt;n;j++)  \r\n    \t      {   \r\n    \t    \t\r\n    \t        if(s[i]==s[j])\r\n        \t    {\r\n                     count++;\r\n                     s[j]=&#39;\\0&#39;;\r\n    \t     \t}\r\n    \t      }  \r\n    \t      printf(&quot; &#39;%c&#39; = %d \\n&quot;,s[i],count);\r\n           }\r\n     \t} \r\n        return 0;\r\n    }","title":"How to count frequency of characters in a string?","body":"<p>#From C language</p>\n<pre><code> #include&lt;stdio.h&gt;`\n #include &lt;string.h&gt;`\n  int main()\n{\n    char s[1000];  \n    int  i,j,k,count=0,n;\n    printf(&quot;Enter  the string : &quot;);\n    gets(s);\n    for(j=0;s[j];j++);\n    n=j; \n    printf(&quot; frequency count character in string:\\n&quot;);\n    for(i=0;i&lt;n;i++)  \n    {\n        count=1;\n        if(s[i])\n        {\n        \n          for(j=i+1;j&lt;n;j++)  \n          {   \n            \n            if(s[i]==s[j])\n            {\n                 count++;\n                 s[j]='\\0';\n            }\n          }  \n          printf(&quot; '%c' = %d \\n&quot;,s[i],count);\n       }\n    } \n    return 0;\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":7334368,"reputation":11,"user_id":5586274,"display_name":"Baidyanath"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1572081973,"creation_date":1571490699,"answer_id":58464037,"question_id":6712587,"body_markdown":"We can use frequency method of Collections class for this.\r\nSplit the string into string array. Use HashSet to remove duplicates and check frequency of each object in HashSet using frequency method of Collections\r\n\r\n```\r\nvoid usingCollections(){\r\n\r\n  String input = &quot;cuttack&quot;;\r\n\r\n  String [] stringArray = input.split(&quot;&quot;);\r\n\r\n  Set&lt;String&gt; s = new HashSet(Arrays.asList(stringArray));\r\n\r\n  for(String abc : s){\r\n\r\n    System.out.println (abc + &quot;:&quot;+Collections.frequency(Arrays.asList(stringArray),abc));\r\n\r\n  }\r\n}\r\n```","title":"How to count frequency of characters in a string?","body":"<p>We can use frequency method of Collections class for this.\nSplit the string into string array. Use HashSet to remove duplicates and check frequency of each object in HashSet using frequency method of Collections</p>\n\n<pre><code>void usingCollections(){\n\n  String input = \"cuttack\";\n\n  String [] stringArray = input.split(\"\");\n\n  Set&lt;String&gt; s = new HashSet(Arrays.asList(stringArray));\n\n  for(String abc : s){\n\n    System.out.println (abc + \":\"+Collections.frequency(Arrays.asList(stringArray),abc));\n\n  }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":10655561,"reputation":482,"user_id":10867487,"display_name":"Echoinacup"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1584619223,"creation_date":1575056688,"answer_id":59110239,"question_id":6712587,"body_markdown":"There is one more option and it looks quite nice.\r\nSince java 8 there is new method merge [java doc][1]\r\n\r\n      public static void main(String[] args) {\r\n        String s = &quot;aaabbbcca&quot;;\r\n\r\n        Map&lt;Character, Integer&gt; freqMap = new HashMap&lt;&gt;();\r\n        for (int i = 0; i &lt; s.length(); i++) {\r\n            Character c = s.charAt(i);\r\n            freqMap.merge(c, 1, (a, b) -&gt; a + b);\r\n        }\r\n        freqMap.forEach((k, v) -&gt; System.out.println(k + &quot; and &quot; + v));\r\n    }\r\n\r\nOr even cleaner with ForEach\r\n\r\n           for (Character c : s.toCharArray()) {\r\n                freqMapSecond.merge(c, 1, Integer::sum);\r\n               }\r\n\r\n  [1]: https://docs.oracle.com/javase/8/docs/api/java/util/Map.html#merge-K-V-java.util.function.BiFunction-","title":"How to count frequency of characters in a string?","body":"<p>There is one more option and it looks quite nice.\nSince java 8 there is new method merge <a href=\"https://docs.oracle.com/javase/8/docs/api/java/util/Map.html#merge-K-V-java.util.function.BiFunction-\" rel=\"nofollow noreferrer\">java doc</a></p>\n\n<pre><code>  public static void main(String[] args) {\n    String s = \"aaabbbcca\";\n\n    Map&lt;Character, Integer&gt; freqMap = new HashMap&lt;&gt;();\n    for (int i = 0; i &lt; s.length(); i++) {\n        Character c = s.charAt(i);\n        freqMap.merge(c, 1, (a, b) -&gt; a + b);\n    }\n    freqMap.forEach((k, v) -&gt; System.out.println(k + \" and \" + v));\n}\n</code></pre>\n\n<p>Or even cleaner with ForEach</p>\n\n<pre><code>       for (Character c : s.toCharArray()) {\n            freqMapSecond.merge(c, 1, Integer::sum);\n           }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":7020430,"reputation":341,"user_id":5380038,"display_name":"Dipen Chawla"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1576263052,"creation_date":1576263052,"answer_id":59328285,"question_id":6712587,"body_markdown":"**This is more Effective way to count frequency of characters in a string**\r\n\r\n    public class demo {\r\n        public static void main(String[] args) {\r\n            String s = &quot;babdcwertyuiuygf&quot;;\r\n            Map&lt;Character, Integer&gt; map = new TreeMap&lt;&gt;();\r\n            s.chars().forEach(e-&gt;map.put((char)e, map.getOrDefault((char)e, 0) + 1));\r\n            StringBuffer myValue = new StringBuffer();\r\n            String myMapKeyValue = &quot;&quot;;\r\n            for (Map.Entry&lt;Character, Integer&gt; entry : map.entrySet()) {\r\n                myMapKeyValue = Character.toString(entry.getKey()).concat(\r\n                    Integer.toString(entry.getValue()));\r\n                myValue.append(myMapKeyValue);\r\n            }\r\n            System.out.println(myValue);\r\n        }\r\n    }","title":"How to count frequency of characters in a string?","body":"<p><strong>This is more Effective way to count frequency of characters in a string</strong></p>\n\n<pre><code>public class demo {\n    public static void main(String[] args) {\n        String s = \"babdcwertyuiuygf\";\n        Map&lt;Character, Integer&gt; map = new TreeMap&lt;&gt;();\n        s.chars().forEach(e-&gt;map.put((char)e, map.getOrDefault((char)e, 0) + 1));\n        StringBuffer myValue = new StringBuffer();\n        String myMapKeyValue = \"\";\n        for (Map.Entry&lt;Character, Integer&gt; entry : map.entrySet()) {\n            myMapKeyValue = Character.toString(entry.getKey()).concat(\n                Integer.toString(entry.getValue()));\n            myValue.append(myMapKeyValue);\n        }\n        System.out.println(myValue);\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":12460498,"reputation":81,"user_id":9072300,"display_name":"Gajraj Tanwar"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1584420615,"creation_date":1584420615,"answer_id":60716405,"question_id":6712587,"body_markdown":"Another way using map merge method\r\n\r\n       Map&lt;Character, Integer&gt; map = new HashMap&lt;&gt;();\r\n       String s = &quot;aasjjikkk&quot;;\r\n    \tfor (int i = 0; i &lt; s.length(); i++) {\r\n    \t\tmap.merge(s.charAt(i), 1, (l, r) -&gt; l + r);\r\n","title":"How to count frequency of characters in a string?","body":"<p>Another way using map merge method</p>\n\n<pre><code>   Map&lt;Character, Integer&gt; map = new HashMap&lt;&gt;();\n   String s = \"aasjjikkk\";\n    for (int i = 0; i &lt; s.length(); i++) {\n        map.merge(s.charAt(i), 1, (l, r) -&gt; l + r);\n</code></pre>\n"}],"owner":{"account_id":764678,"reputation":509,"user_id":792080,"accept_rate":86,"display_name":"Bill"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":163182,"favorite_count":0,"down_vote_count":0,"up_vote_count":36,"accepted_answer_id":6712708,"answer_count":27,"score":36,"last_activity_date":1697800608,"creation_date":1310760425,"question_id":6712587,"body_markdown":"I need to write some kind of loop that can count the frequency of each letter in a string. &lt;br&gt;\r\nFor example: &quot;aasjjikkk&quot; would count 2 &#39;a&#39;, 1 &#39;s&#39;, 2 &#39;j&#39;, 1 &#39;i&#39;, 3 &#39;k&#39;. Ultimately id like these to end up in a map with the character as the key and the count as the value. Any good idea how to do this? ","title":"How to count frequency of characters in a string?","body":"<p>I need to write some kind of loop that can count the frequency of each letter in a string. <br>\nFor example: \"aasjjikkk\" would count 2 'a', 1 's', 2 'j', 1 'i', 3 'k'. Ultimately id like these to end up in a map with the character as the key and the count as the value. Any good idea how to do this? </p>\n"},{"tags":["java","spring","scheduled-tasks"],"comments":[{"owner":{"account_id":15027359,"reputation":255,"user_id":10846709,"display_name":"Sergey Bzhezitskiy"},"score":0,"creation_date":1558951508,"post_id":56302020,"comment_id":99255494,"body_markdown":"Have you seen the comments under this answer? &quot;it doesn&#39;t work&quot; is for most of guys.","body":"Have you seen the comments under this answer? &quot;it doesn&#39;t work&quot; is for most of guys."},{"owner":{"account_id":6115119,"reputation":618,"user_id":4770397,"accept_rate":26,"display_name":"mayank bisht"},"score":0,"creation_date":1558957408,"post_id":56302020,"comment_id":99258337,"body_markdown":"None reported, that this solution isn&#39;t working.","body":"None reported, that this solution isn&#39;t working."},{"owner":{"account_id":6115119,"reputation":618,"user_id":4770397,"accept_rate":26,"display_name":"mayank bisht"},"score":0,"creation_date":1558957434,"post_id":56302020,"comment_id":99258348,"body_markdown":"Nevertheless, do you know Any other way to achieve this?","body":"Nevertheless, do you know Any other way to achieve this?"},{"owner":{"account_id":5433910,"reputation":10649,"user_id":4323935,"accept_rate":69,"display_name":"dpr"},"score":1,"creation_date":1576744385,"post_id":56302020,"comment_id":104999676,"body_markdown":"If you feel that my answer helped you, you could [accept my answer](http://meta.stackexchange.com/a/5235).","body":"If you feel that my answer helped you, you could <a href=\"http://meta.stackexchange.com/a/5235\">accept my answer</a>."}],"answers":[{"tags":[],"owner":{"account_id":9720713,"reputation":906,"user_id":7209547,"display_name":"Mukul Bansal"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1558953767,"creation_date":1558953087,"answer_id":56324317,"question_id":56302020,"body_markdown":"Spring&#39;s `@Scheduled` annotation does not provide this support.\r\n&lt;p&gt;\r\nThis is my preferred implementation of a similar feature using a Queue-based solution which allows flexibility of timing and very robust implementation of this scheduler functionality.\r\n&lt;p&gt;\r\nThis is the pipeline-\r\n[![enter image description here][1]][1]\r\n\r\n  [1]: https://i.stack.imgur.com/XHFHx.jpg\r\n\r\n 1. **Cron Maintainer and Publisher**- For every task, there is an affiliated `cron` and a single-threaded executor service which is responsible for publishing messages to the Queue as per the cron. The `task-cron` mappings are persisted in the `database` and are initialized during the startup. Also, we have an `API` exposed to update cron for a task at runtime.\r\n&lt;p&gt;\r\nWe simply shut down the old scheduled executor service and create a one whenever we trigger a change in the cron via our API. Also, we update the same in the database.\r\n 2. **Queue**- Used for storing messages published by the publisher.\r\n 3. **Scheduler**- This is where the business logic of the schedulers reside. A listener on the Queue(Kafka, in our case) listens for the incoming messages and invokes the corresponding scheduler task in a new thread whenever it receives a message for the same.\r\n&lt;p&gt;\r\n\r\nThere are various advantages to this approach. This decouples the scheduler from the schedule management task. Now, the scheduler can focus on business logic alone. Also, we can write as many schedulers as we want, all listening to the same queue and acting accordingly. ","title":"Modify scheduler timing dynamically based on the condition used with spring-boot @Scheduled annotation","body":"<p>Spring's <code>@Scheduled</code> annotation does not provide this support.\n<p>\nThis is my preferred implementation of a similar feature using a Queue-based solution which allows flexibility of timing and very robust implementation of this scheduler functionality.\n<p>\nThis is the pipeline-\n<a href=\"https://i.stack.imgur.com/XHFHx.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/XHFHx.jpg\" alt=\"enter image description here\"></a></p>\n\n<ol>\n<li><strong>Cron Maintainer and Publisher</strong>- For every task, there is an affiliated <code>cron</code> and a single-threaded executor service which is responsible for publishing messages to the Queue as per the cron. The <code>task-cron</code> mappings are persisted in the <code>database</code> and are initialized during the startup. Also, we have an <code>API</code> exposed to update cron for a task at runtime.\n<p>\nWe simply shut down the old scheduled executor service and create a one whenever we trigger a change in the cron via our API. Also, we update the same in the database.</li>\n<li><strong>Queue</strong>- Used for storing messages published by the publisher.</li>\n<li><strong>Scheduler</strong>- This is where the business logic of the schedulers reside. A listener on the Queue(Kafka, in our case) listens for the incoming messages and invokes the corresponding scheduler task in a new thread whenever it receives a message for the same.\n<p></li>\n</ol>\n\n<p>There are various advantages to this approach. This decouples the scheduler from the schedule management task. Now, the scheduler can focus on business logic alone. Also, we can write as many schedulers as we want, all listening to the same queue and acting accordingly. </p>\n"},{"tags":[],"owner":{"account_id":5433910,"reputation":10649,"user_id":4323935,"accept_rate":69,"display_name":"dpr"},"down_vote_count":0,"up_vote_count":12,"is_accepted":false,"score":12,"last_activity_date":1582135043,"creation_date":1558985865,"answer_id":56331619,"question_id":56302020,"body_markdown":"Using `@Scheduled` will only allow to use static schedules. You can use properties to make the schedule configruable like this\r\n\r\n```\r\n@Scheduled(cron = &quot;${yourConfiguration.cronExpression}&quot;)\r\n\r\n// or\r\n\r\n@Scheduled(fixedDelayString = &quot;${yourConfiguration.fixedDelay}&quot;)\r\n```\r\n\r\nHowever the resulting schedule will be fixed once your spring context is initialized (the application is started).\r\n\r\nTo get fine grained control over a scheduled execution you need implement a custom [`Trigger`][2] - similar to what you already did. Together with the to be executed task, this trigger can be registered by implementing [`SchedulingConfigurer`][3] in your `@Configuration` class using [`ScheduledTaskRegistrar.addTriggerTask`][4]:\r\n\r\n```\r\n@Configuration\r\n@EnableScheduling\r\npublic class AppConfig implements SchedulingConfigurer {\r\n    @Override\r\n    public void configureTasks(ScheduledTaskRegistrar taskRegistrar) {\r\n        taskRegistrar.setScheduler(taskScheduler());\r\n        taskRegistrar.addTriggerTask(() -&gt; myTask().work(), myTrigger());\r\n    }\r\n\r\n    @Bean(destroyMethod=&quot;shutdown&quot;)\r\n    public Executor taskScheduler() {\r\n        return Executors.newScheduledThreadPool(42);\r\n    }\r\n\r\n    @Bean\r\n    public CustomDynamicSchedule myTrigger() {\r\n        new CustomDynamicSchedule();\r\n    }\r\n\r\n    @Bean\r\n    public MyTask myTask() {\r\n        return new MyTask();\r\n    }\r\n}\r\n```\r\n\r\n\r\nBut don&#39;t do any registration of a task in the `CustomDynamicSchedule` just use it to compute the next execution time:\r\n\r\n\r\n```\r\npublic class CustomDynamicSchedule extends DynamicSchedule implements Trigger {\r\n\r\n    private long delayInterval;\r\n  \r\n    @Override\r\n    public synchronized void increaseDelayInterval(Long delay) {\r\n        this.delayInterval += delay;\r\n    }\r\n  \r\n    @Override\r\n    public synchronized void decreaseDelayInterval(Long delay) {\r\n        this.delayInterval += delay;\r\n    }\r\n  \r\n    @Override\r\n    public synchronized void delay(Long delay) {\r\n        this.delayInterval = delay;\r\n    }\r\n  \r\n    @Override\r\n    public Date nextExecutionTime(TriggerContext triggerContext) {\r\n        Date lastTime = triggerContext.lastActualExecutionTime();\r\n        return (lastTime == null) ? new Date() : new Date(lastTime.getTime() + delayInterval);\r\n    }\r\n}\r\n```\r\n\r\nBut remember to make `CustomDynamicSchedule` thread safe as it will be created as singleton by spring and might be accessed by multiple threads in parallel.\r\n\r\n\r\n  [2]: https://docs.spring.io/spring/docs/current/javadoc-api/org/springframework/scheduling/Trigger.html\r\n  [3]: https://docs.spring.io/spring/docs/current/javadoc-api/org/springframework/scheduling/annotation/SchedulingConfigurer.html\r\n  [4]: https://docs.spring.io/spring/docs/current/javadoc-api/org/springframework/scheduling/config/ScheduledTaskRegistrar.html#addTriggerTask-java.lang.Runnable-org.springframework.scheduling.Trigger-","title":"Modify scheduler timing dynamically based on the condition used with spring-boot @Scheduled annotation","body":"<p>Using <code>@Scheduled</code> will only allow to use static schedules. You can use properties to make the schedule configruable like this</p>\n\n<pre><code>@Scheduled(cron = \"${yourConfiguration.cronExpression}\")\n\n// or\n\n@Scheduled(fixedDelayString = \"${yourConfiguration.fixedDelay}\")\n</code></pre>\n\n<p>However the resulting schedule will be fixed once your spring context is initialized (the application is started).</p>\n\n<p>To get fine grained control over a scheduled execution you need implement a custom <a href=\"https://docs.spring.io/spring/docs/current/javadoc-api/org/springframework/scheduling/Trigger.html\" rel=\"nofollow noreferrer\"><code>Trigger</code></a> - similar to what you already did. Together with the to be executed task, this trigger can be registered by implementing <a href=\"https://docs.spring.io/spring/docs/current/javadoc-api/org/springframework/scheduling/annotation/SchedulingConfigurer.html\" rel=\"nofollow noreferrer\"><code>SchedulingConfigurer</code></a> in your <code>@Configuration</code> class using <a href=\"https://docs.spring.io/spring/docs/current/javadoc-api/org/springframework/scheduling/config/ScheduledTaskRegistrar.html#addTriggerTask-java.lang.Runnable-org.springframework.scheduling.Trigger-\" rel=\"nofollow noreferrer\"><code>ScheduledTaskRegistrar.addTriggerTask</code></a>:</p>\n\n<pre><code>@Configuration\n@EnableScheduling\npublic class AppConfig implements SchedulingConfigurer {\n    @Override\n    public void configureTasks(ScheduledTaskRegistrar taskRegistrar) {\n        taskRegistrar.setScheduler(taskScheduler());\n        taskRegistrar.addTriggerTask(() -&gt; myTask().work(), myTrigger());\n    }\n\n    @Bean(destroyMethod=\"shutdown\")\n    public Executor taskScheduler() {\n        return Executors.newScheduledThreadPool(42);\n    }\n\n    @Bean\n    public CustomDynamicSchedule myTrigger() {\n        new CustomDynamicSchedule();\n    }\n\n    @Bean\n    public MyTask myTask() {\n        return new MyTask();\n    }\n}\n</code></pre>\n\n<p>But don't do any registration of a task in the <code>CustomDynamicSchedule</code> just use it to compute the next execution time:</p>\n\n<pre><code>public class CustomDynamicSchedule extends DynamicSchedule implements Trigger {\n\n    private long delayInterval;\n\n    @Override\n    public synchronized void increaseDelayInterval(Long delay) {\n        this.delayInterval += delay;\n    }\n\n    @Override\n    public synchronized void decreaseDelayInterval(Long delay) {\n        this.delayInterval += delay;\n    }\n\n    @Override\n    public synchronized void delay(Long delay) {\n        this.delayInterval = delay;\n    }\n\n    @Override\n    public Date nextExecutionTime(TriggerContext triggerContext) {\n        Date lastTime = triggerContext.lastActualExecutionTime();\n        return (lastTime == null) ? new Date() : new Date(lastTime.getTime() + delayInterval);\n    }\n}\n</code></pre>\n\n<p>But remember to make <code>CustomDynamicSchedule</code> thread safe as it will be created as singleton by spring and might be accessed by multiple threads in parallel.</p>\n"},{"tags":[],"owner":{"account_id":2330823,"reputation":9304,"user_id":2044302,"accept_rate":74,"display_name":"Alexander Petrov"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1569486470,"creation_date":1559036585,"answer_id":56339318,"question_id":56302020,"body_markdown":"With annotation you can do it only by aproximation by finding a common denominator and poll it. I will show you later. If you want a real dynamic solution you can not use annotations but you can use programmatic configuration. **The positive of this solution is that you can change the execution period even in runtime!** Here is an example on how to do that:\r\n\r\n    \r\n      public initializeDynamicScheduledTAsk (ThreadPoolTaskScheduler scheduler,Date start,long executionPeriod) {\r\n        scheduler.schedule(\r\n          new ScheduledTask(),\r\n          new Date(startTime),period\r\n        );\r\n        }\r\n    class ScheduledTask implements Runnable{\r\n      \r\n         \r\n        @Override\r\n        public void run() {\r\n           // my scheduled logic here \r\n        }\r\n    }\r\n\r\nThere is a way to cheat and actually do something with annotations. But you can do that only if precision is not important. What does it mean precision. If you know that you want to start it every 5 seconds but 100ms more or less is not important. If you know that you need to start every 5-6-8 or 10 seconds you can configure one job that is executing every second and check within one if statement how long has it passed since the previous execution. It is very lame, but it works :) as long as you don&#39;t need up to millisecond precision. Here is an example:\r\n\r\n    public class SemiDynamicScheduledService {\r\n    \r\n    private Long lastExecution;\r\n    @Value(#{yourDynamicConfiguration})\r\n    private int executeEveryInMS\r\n    \r\n    @Scheduled(fixedDelay=1000)\r\n    public semiDynamicScheduledMethod() {\r\n       if (System.currentTimeMS() - lastExecution&gt;executeEveryInMS) {\r\n          lastExecution = System.currentTimeMS();\r\n          // put your processing logic here\r\n       }\r\n    }\r\n    \r\n    }\r\n\r\nI is a bit lame but will do the job for simple cases.","title":"Modify scheduler timing dynamically based on the condition used with spring-boot @Scheduled annotation","body":"<p>With annotation you can do it only by aproximation by finding a common denominator and poll it. I will show you later. If you want a real dynamic solution you can not use annotations but you can use programmatic configuration. <strong>The positive of this solution is that you can change the execution period even in runtime!</strong> Here is an example on how to do that:</p>\n\n<pre><code>  public initializeDynamicScheduledTAsk (ThreadPoolTaskScheduler scheduler,Date start,long executionPeriod) {\n    scheduler.schedule(\n      new ScheduledTask(),\n      new Date(startTime),period\n    );\n    }\nclass ScheduledTask implements Runnable{\n\n\n    @Override\n    public void run() {\n       // my scheduled logic here \n    }\n}\n</code></pre>\n\n<p>There is a way to cheat and actually do something with annotations. But you can do that only if precision is not important. What does it mean precision. If you know that you want to start it every 5 seconds but 100ms more or less is not important. If you know that you need to start every 5-6-8 or 10 seconds you can configure one job that is executing every second and check within one if statement how long has it passed since the previous execution. It is very lame, but it works :) as long as you don't need up to millisecond precision. Here is an example:</p>\n\n<pre><code>public class SemiDynamicScheduledService {\n\nprivate Long lastExecution;\n@Value(#{yourDynamicConfiguration})\nprivate int executeEveryInMS\n\n@Scheduled(fixedDelay=1000)\npublic semiDynamicScheduledMethod() {\n   if (System.currentTimeMS() - lastExecution&gt;executeEveryInMS) {\n      lastExecution = System.currentTimeMS();\n      // put your processing logic here\n   }\n}\n\n}\n</code></pre>\n\n<p>I is a bit lame but will do the job for simple cases.</p>\n"},{"tags":[],"owner":{"account_id":21521011,"reputation":39,"user_id":15862161,"display_name":"Raja Mahapatra"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1683478351,"creation_date":1683478351,"answer_id":76195189,"question_id":56302020,"body_markdown":"Spring does not have direct support using a variable for Frequency of a scheduler. Writing a custom master scheduler (say scheduled to execute every second) to control the other schedules is a good option. ","title":"Modify scheduler timing dynamically based on the condition used with spring-boot @Scheduled annotation","body":"<p>Spring does not have direct support using a variable for Frequency of a scheduler. Writing a custom master scheduler (say scheduled to execute every second) to control the other schedules is a good option.</p>\n"}],"owner":{"account_id":6115119,"reputation":618,"user_id":4770397,"accept_rate":26,"display_name":"mayank bisht"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":16502,"favorite_count":0,"down_vote_count":0,"up_vote_count":13,"answer_count":4,"score":13,"last_activity_date":1697800121,"creation_date":1558762317,"question_id":56302020,"body_markdown":"I have a scheduler, which triggers at a fixed delay of 5secs. I am planning to have more than one schedulers, but for now, let&#39;s stick to just one scheduler.\r\n\r\n**Requirement:** Based on business condition scheduler&#39;s *fixedDelay* should be changed (**e.g,** default *fixedDelay* is *5secs*, but it can be *6, 8, 10secs*, based on condition).\r\n\r\nIn order to achieve this, I am trying to modify the *fixedDelay*. But it&#39;s not working for me.\r\n\r\nInterface, with delay methods\r\n\r\n    public abstract class DynamicSchedule{\r\n            /**\r\n             * Delays scheduler\r\n             * @param milliseconds - the time to delay scheduler.\r\n             */\r\n            abstract void delay(Long milliseconds);\r\n    \r\n            /**\r\n             * Decreases delay period\r\n             * @param milliseconds - the time to decrease delay period.\r\n             */\r\n            abstract void decreaseDelayInterval(Long milliseconds);\r\n    \r\n            /**\r\n             * Increases delay period\r\n             * @param milliseconds - the time to increase dela period\r\n            */\r\n            abstract void increaseDelayInterval(Long milliseconds);\r\n    }\r\n\r\n\r\nImplementating Trigger interface that is located at org.springframework.scheduling in the spring-context project.\r\n\r\n\r\n    import org.springframework.scheduling.TaskScheduler;\r\n    import org.springframework.scheduling.Trigger;\r\n    import org.springframework.scheduling.TriggerContext;\r\n    \r\n    import java.util.Date;\r\n    import java.util.concurrent.ScheduledFuture;\r\n    \r\n    public class CustomDynamicSchedule extends DynamicSchedule implements Trigger {\r\n    \r\n        private TaskScheduler taskScheduler;\r\n        private ScheduledFuture&lt;?&gt; schedulerFuture;\r\n    \r\n        /**\r\n         * milliseconds\r\n         */\r\n        private long delayInterval;\r\n    \r\n        public CustomDynamicSchedule(TaskScheduler taskScheduler) {\r\n            this.taskScheduler = taskScheduler;\r\n        }\r\n    \r\n    \r\n        @Override\r\n        public void increaseDelayInterval(Long delay) {\r\n            if (schedulerFuture != null) {\r\n                schedulerFuture.cancel(true);\r\n            }\r\n            this.delayInterval += delay;\r\n            schedulerFuture = taskScheduler.schedule(() -&gt; { }, this);\r\n        }\r\n    \r\n        @Override\r\n        public void decreaseDelayInterval(Long delay) {\r\n            if (schedulerFuture != null) {\r\n                schedulerFuture.cancel(true);\r\n            }\r\n            this.delayInterval += delay;\r\n            schedulerFuture = taskScheduler.schedule(() -&gt; { }, this);\r\n        }\r\n    \r\n        @Override\r\n        public void delay(Long delay) {\r\n            if (schedulerFuture != null) {\r\n                schedulerFuture.cancel(true);\r\n            }\r\n            this.delayInterval = delay;\r\n            schedulerFuture = taskScheduler.schedule(() -&gt; { }, this);\r\n        }\r\n    \r\n        @Override\r\n        public Date nextExecutionTime(TriggerContext triggerContext) {\r\n            Date lastTime = triggerContext.lastActualExecutionTime();\r\n            return (lastTime == null) ? new Date() : new Date(lastTime.getTime() + delayInterval);\r\n        }\r\n    }\r\n\r\nconfiguration:\r\n\r\n    @Configuration\r\n    public class DynamicSchedulerConfig {\r\n        @Bean\r\n        public CustomDynamicSchedule getDinamicScheduler() {\r\n            ThreadPoolTaskScheduler threadPoolTaskScheduler = new ThreadPoolTaskScheduler();\r\n            threadPoolTaskScheduler.initialize();\r\n            return  new CustomDynamicSchedule(threadPoolTaskScheduler);\r\n        }\r\n    }\r\n\r\nTest class, to test the usage.\r\n\r\n    @EnableScheduling\r\n    @Component\r\n    public class TestSchedulerComponent {\r\n    \r\n        @Autowired\r\n        private CustomDynamicSchedule dynamicSchedule;\r\n    \r\n        @Scheduled(fixedDelay = 5000)\r\n        public void testMethod() {\r\n            dynamicSchedule.delay(1000l);\r\n            dynamicSchedule.increaseDelayInterval(9000l);\r\n            dynamicSchedule.decreaseDelayInterval(5000l);\r\n        }\r\n    \r\n    }\r\n\r\nI have tried to use https://stackoverflow.com/a/51333059/4770397 but this code is not working for me.\r\n\r\nScheduler is running at *fixedDelay*, there is no change in that.","title":"Modify scheduler timing dynamically based on the condition used with spring-boot @Scheduled annotation","body":"<p>I have a scheduler, which triggers at a fixed delay of 5secs. I am planning to have more than one schedulers, but for now, let's stick to just one scheduler.</p>\n<p><strong>Requirement:</strong> Based on business condition scheduler's <em>fixedDelay</em> should be changed (<strong>e.g,</strong> default <em>fixedDelay</em> is <em>5secs</em>, but it can be <em>6, 8, 10secs</em>, based on condition).</p>\n<p>In order to achieve this, I am trying to modify the <em>fixedDelay</em>. But it's not working for me.</p>\n<p>Interface, with delay methods</p>\n<pre><code>public abstract class DynamicSchedule{\n        /**\n         * Delays scheduler\n         * @param milliseconds - the time to delay scheduler.\n         */\n        abstract void delay(Long milliseconds);\n\n        /**\n         * Decreases delay period\n         * @param milliseconds - the time to decrease delay period.\n         */\n        abstract void decreaseDelayInterval(Long milliseconds);\n\n        /**\n         * Increases delay period\n         * @param milliseconds - the time to increase dela period\n        */\n        abstract void increaseDelayInterval(Long milliseconds);\n}\n</code></pre>\n<p>Implementating Trigger interface that is located at org.springframework.scheduling in the spring-context project.</p>\n<pre><code>import org.springframework.scheduling.TaskScheduler;\nimport org.springframework.scheduling.Trigger;\nimport org.springframework.scheduling.TriggerContext;\n\nimport java.util.Date;\nimport java.util.concurrent.ScheduledFuture;\n\npublic class CustomDynamicSchedule extends DynamicSchedule implements Trigger {\n\n    private TaskScheduler taskScheduler;\n    private ScheduledFuture&lt;?&gt; schedulerFuture;\n\n    /**\n     * milliseconds\n     */\n    private long delayInterval;\n\n    public CustomDynamicSchedule(TaskScheduler taskScheduler) {\n        this.taskScheduler = taskScheduler;\n    }\n\n\n    @Override\n    public void increaseDelayInterval(Long delay) {\n        if (schedulerFuture != null) {\n            schedulerFuture.cancel(true);\n        }\n        this.delayInterval += delay;\n        schedulerFuture = taskScheduler.schedule(() -&gt; { }, this);\n    }\n\n    @Override\n    public void decreaseDelayInterval(Long delay) {\n        if (schedulerFuture != null) {\n            schedulerFuture.cancel(true);\n        }\n        this.delayInterval += delay;\n        schedulerFuture = taskScheduler.schedule(() -&gt; { }, this);\n    }\n\n    @Override\n    public void delay(Long delay) {\n        if (schedulerFuture != null) {\n            schedulerFuture.cancel(true);\n        }\n        this.delayInterval = delay;\n        schedulerFuture = taskScheduler.schedule(() -&gt; { }, this);\n    }\n\n    @Override\n    public Date nextExecutionTime(TriggerContext triggerContext) {\n        Date lastTime = triggerContext.lastActualExecutionTime();\n        return (lastTime == null) ? new Date() : new Date(lastTime.getTime() + delayInterval);\n    }\n}\n</code></pre>\n<p>configuration:</p>\n<pre><code>@Configuration\npublic class DynamicSchedulerConfig {\n    @Bean\n    public CustomDynamicSchedule getDinamicScheduler() {\n        ThreadPoolTaskScheduler threadPoolTaskScheduler = new ThreadPoolTaskScheduler();\n        threadPoolTaskScheduler.initialize();\n        return  new CustomDynamicSchedule(threadPoolTaskScheduler);\n    }\n}\n</code></pre>\n<p>Test class, to test the usage.</p>\n<pre><code>@EnableScheduling\n@Component\npublic class TestSchedulerComponent {\n\n    @Autowired\n    private CustomDynamicSchedule dynamicSchedule;\n\n    @Scheduled(fixedDelay = 5000)\n    public void testMethod() {\n        dynamicSchedule.delay(1000l);\n        dynamicSchedule.increaseDelayInterval(9000l);\n        dynamicSchedule.decreaseDelayInterval(5000l);\n    }\n\n}\n</code></pre>\n<p>I have tried to use <a href=\"https://stackoverflow.com/a/51333059/4770397\">https://stackoverflow.com/a/51333059/4770397</a> but this code is not working for me.</p>\n<p>Scheduler is running at <em>fixedDelay</em>, there is no change in that.</p>\n"},{"tags":["java","visual-studio-code"],"comments":[{"owner":{"account_id":25311208,"reputation":7305,"user_id":19133920,"display_name":"JialeDu"},"score":0,"creation_date":1697786973,"post_id":77325177,"comment_id":136325998,"body_markdown":"What operation do you use to sort? In addition, the two sorts in your questions are not different.  Please see [how to ask](https://stackoverflow.com/help/how-to-ask).\n\n[minimal reproducible example](https://stackoverflow.com/help/minimal-reproducible-example)","body":"What operation do you use to sort? In addition, the two sorts in your questions are not different.  Please see <a href=\"https://stackoverflow.com/help/how-to-ask\">how to ask</a>.  <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>"},{"owner":{"account_id":2772487,"reputation":446,"user_id":3171172,"display_name":"PandaCheLion"},"score":0,"creation_date":1697799748,"post_id":77325177,"comment_id":136328272,"body_markdown":"I&#39;m using the `Organize Imports` function (I&#39;ll update the question to include that information). Regarding the second remark, you are right.  I&#39;ve updated the expected result part. Thanks","body":"I&#39;m using the <code>Organize Imports</code> function (I&#39;ll update the question to include that information). Regarding the second remark, you are right.  I&#39;ve updated the expected result part. Thanks"},{"owner":{"account_id":25311208,"reputation":7305,"user_id":19133920,"display_name":"JialeDu"},"score":0,"creation_date":1698128285,"post_id":77325177,"comment_id":136362358,"body_markdown":"Please provide a complete reproducible example. `Organize Imports` will remove unused imports.","body":"Please provide a complete reproducible example. <code>Organize Imports</code> will remove unused imports."}],"owner":{"account_id":2772487,"reputation":446,"user_id":3171172,"display_name":"PandaCheLion"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":54,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1697799910,"creation_date":1697729380,"question_id":77325177,"body_markdown":"Our project has agreed upon a `checkstyle` which defines the expected order of the imports\r\n\r\n```\r\n(..)\r\n     &lt;module name=&quot;CustomImportOrder&quot;&gt;\r\n        &lt;property name=&quot;sortImportsInGroupAlphabetically&quot; value=&quot;true&quot;/&gt;\r\n        &lt;property name=&quot;separateLineBetweenGroups&quot; value=&quot;true&quot;/&gt;\r\n        &lt;property name=&quot;customImportOrderRules&quot; value=&quot;STATIC###STANDARD_JAVA_PACKAGE###THIRD_PARTY_PACKAGE###SAME_PACKAGE(3)&quot;/&gt;\r\n        &lt;property name=&quot;tokens&quot; value=&quot;IMPORT, STATIC_IMPORT, PACKAGE_DEF&quot;/&gt;\r\n     &lt;/module&gt;\r\n(..)\r\n```\r\n\r\nI understand VSCode does not support getting the order from the checkstyle.xml files but it allows (through Language support for Java ™ for Visual Studio Code plugin) for the Organize Imports order to be customized by the defining it with the property `&quot;java.completion.importOrder&quot;`.\r\n\r\nWhile attempting to replicate the order in the checkstyle, I&#39;ve tried several approaches all of them using the `Organize Imports` function available. The one that came closer was:\r\n\r\n```  \r\n&quot;java.completion.importOrder&quot;: [\r\n  &quot;#&quot;,\r\n  &quot;java&quot;, \r\n  &quot;javax&quot;,\r\n  &quot;&quot;,\r\n  &quot;com,org&quot;,\r\n  &quot;com.myProject&quot;\r\n],\r\n```\r\n\r\nBut it still divides the `java.*` group from the `javax.*`.\r\n\r\nWith the above setting I get:\r\n```\r\npackage (...)\r\n\r\nimport java.io.IOException;\r\n\r\nimport javax.xml.transform.TransformerException;\r\n\r\nimport com.company.AddIssueRequest;\r\nimport com.company.AddIssueResponse;\r\nimport org.lombok;\r\nimport org.springframework.ws.WebServiceMessage;\r\nimport org.springframework.ws.WebServiceMessageFactory;\r\nimport org.springframework.ws.client.core.WebServiceMessageCallback;\r\nimport org.springframework.ws.client.core.support.WebServiceGatewaySupport;\r\n\r\nimport com.myProject.exception.MethodNotImplementedException;\r\n\r\nclass (...)\r\n```\r\n\r\nAnd I wanted it group java and javax imports as part of the same group like the example below.\r\n```\r\npackage (...)\r\n\r\nimport java.io.IOException;\r\nimport javax.xml.transform.TransformerException;\r\n\r\nimport com.company.AddIssueRequest;\r\nimport com.company.AddIssueResponse;\r\nimport org.lombok;\r\nimport org.springframework.ws.WebServiceMessage;\r\nimport org.springframework.ws.WebServiceMessageFactory;\r\nimport org.springframework.ws.client.core.WebServiceMessageCallback;\r\nimport org.springframework.ws.client.core.support.WebServiceGatewaySupport;\r\n\r\nimport com.myProject.exception.MethodNotImplementedException;\r\n\r\nclass (...)\r\n```\r\n\r\nIs that possible?\r\n\r\nI&#39;ve also tried to set both prefixed in the same item group, like it was done for `com` and `org` (see below) but is seems to not work the same way.\r\n```\r\n&quot;java.completion.importOrder&quot;: [\r\n  &quot;#&quot;,\r\n  &quot;java,javax&quot;,\r\n  &quot;&quot;,\r\n  &quot;com,org&quot;,\r\n  &quot;com.myProject&quot;\r\n],\r\n```\r\n\r\nWith this configuration the `java` and `javax` import groups are bundled together in the same json array element like the `&quot;com,org&quot;` import group below. I also tried using regular expressions and it also did not work.","title":"VSCode - Customize imports organization","body":"<p>Our project has agreed upon a <code>checkstyle</code> which defines the expected order of the imports</p>\n<pre><code>(..)\n     &lt;module name=&quot;CustomImportOrder&quot;&gt;\n        &lt;property name=&quot;sortImportsInGroupAlphabetically&quot; value=&quot;true&quot;/&gt;\n        &lt;property name=&quot;separateLineBetweenGroups&quot; value=&quot;true&quot;/&gt;\n        &lt;property name=&quot;customImportOrderRules&quot; value=&quot;STATIC###STANDARD_JAVA_PACKAGE###THIRD_PARTY_PACKAGE###SAME_PACKAGE(3)&quot;/&gt;\n        &lt;property name=&quot;tokens&quot; value=&quot;IMPORT, STATIC_IMPORT, PACKAGE_DEF&quot;/&gt;\n     &lt;/module&gt;\n(..)\n</code></pre>\n<p>I understand VSCode does not support getting the order from the checkstyle.xml files but it allows (through Language support for Java ™ for Visual Studio Code plugin) for the Organize Imports order to be customized by the defining it with the property <code>&quot;java.completion.importOrder&quot;</code>.</p>\n<p>While attempting to replicate the order in the checkstyle, I've tried several approaches all of them using the <code>Organize Imports</code> function available. The one that came closer was:</p>\n<pre><code>&quot;java.completion.importOrder&quot;: [\n  &quot;#&quot;,\n  &quot;java&quot;, \n  &quot;javax&quot;,\n  &quot;&quot;,\n  &quot;com,org&quot;,\n  &quot;com.myProject&quot;\n],\n</code></pre>\n<p>But it still divides the <code>java.*</code> group from the <code>javax.*</code>.</p>\n<p>With the above setting I get:</p>\n<pre><code>package (...)\n\nimport java.io.IOException;\n\nimport javax.xml.transform.TransformerException;\n\nimport com.company.AddIssueRequest;\nimport com.company.AddIssueResponse;\nimport org.lombok;\nimport org.springframework.ws.WebServiceMessage;\nimport org.springframework.ws.WebServiceMessageFactory;\nimport org.springframework.ws.client.core.WebServiceMessageCallback;\nimport org.springframework.ws.client.core.support.WebServiceGatewaySupport;\n\nimport com.myProject.exception.MethodNotImplementedException;\n\nclass (...)\n</code></pre>\n<p>And I wanted it group java and javax imports as part of the same group like the example below.</p>\n<pre><code>package (...)\n\nimport java.io.IOException;\nimport javax.xml.transform.TransformerException;\n\nimport com.company.AddIssueRequest;\nimport com.company.AddIssueResponse;\nimport org.lombok;\nimport org.springframework.ws.WebServiceMessage;\nimport org.springframework.ws.WebServiceMessageFactory;\nimport org.springframework.ws.client.core.WebServiceMessageCallback;\nimport org.springframework.ws.client.core.support.WebServiceGatewaySupport;\n\nimport com.myProject.exception.MethodNotImplementedException;\n\nclass (...)\n</code></pre>\n<p>Is that possible?</p>\n<p>I've also tried to set both prefixed in the same item group, like it was done for <code>com</code> and <code>org</code> (see below) but is seems to not work the same way.</p>\n<pre><code>&quot;java.completion.importOrder&quot;: [\n  &quot;#&quot;,\n  &quot;java,javax&quot;,\n  &quot;&quot;,\n  &quot;com,org&quot;,\n  &quot;com.myProject&quot;\n],\n</code></pre>\n<p>With this configuration the <code>java</code> and <code>javax</code> import groups are bundled together in the same json array element like the <code>&quot;com,org&quot;</code> import group below. I also tried using regular expressions and it also did not work.</p>\n"},{"tags":["java","spring-boot","download","pdf-generation"],"comments":[{"owner":{"account_id":1806969,"reputation":102,"user_id":1643891,"display_name":"Sup19"},"score":0,"creation_date":1697783076,"post_id":77328473,"comment_id":136325354,"body_markdown":"Have you checked the default downloads folder?","body":"Have you checked the default downloads folder?"}],"answers":[{"tags":[],"owner":{"account_id":26746848,"reputation":226,"user_id":20346807,"display_name":"Joan"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1697799756,"creation_date":1697799756,"answer_id":77330404,"question_id":77328473,"body_markdown":"This should work for you:\r\n\r\n\r\n    @GetMapping(value = &quot;/generatepdf&quot;, produces = MediaType.APPLICATION_PDF_VALUE)\r\n    public ResponseEntity generatepdf(\r\n    \tfinal HttpServletResponse response\r\n    ) throws IOException {\r\n    \tfinal String headerKey = CONTENT_DISPOSITION;\r\n        final String headerValue = &quot;attachment; filename=&quot;foo.pdf&quot;;\r\n        response.setHeader(headerKey, headerValue);\r\n    \r\n    \t// Write what you want in the: response.getOutputStream()\r\n\r\n        response.flushBuffer();\r\n        return new ResponseEntity&lt;&gt;(HttpStatus.OK);\r\n    }","title":"PDF unable to download on browser when i hit my spring boot API from angular","body":"<p>This should work for you:</p>\n<pre><code>@GetMapping(value = &quot;/generatepdf&quot;, produces = MediaType.APPLICATION_PDF_VALUE)\npublic ResponseEntity generatepdf(\n    final HttpServletResponse response\n) throws IOException {\n    final String headerKey = CONTENT_DISPOSITION;\n    final String headerValue = &quot;attachment; filename=&quot;foo.pdf&quot;;\n    response.setHeader(headerKey, headerValue);\n\n    // Write what you want in the: response.getOutputStream()\n\n    response.flushBuffer();\n    return new ResponseEntity&lt;&gt;(HttpStatus.OK);\n}\n</code></pre>\n"}],"owner":{"account_id":28716170,"reputation":1,"user_id":21990740,"display_name":"Vaibhav Varade"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":20,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":1,"score":-1,"last_activity_date":1697799756,"creation_date":1697779319,"question_id":77328473,"body_markdown":"this is my controller method to download created PDF from html - \r\n\r\n    @PostMapping(&quot;/downloadPdf/{apiGroup}/{api}&quot;)\r\n\tpublic ResponseEntity&lt;InputStreamResource&gt; generatePdf(@PathVariable String apiGroup, @PathVariable String api, HttpServletRequest req,HttpServletResponse resp){\r\n\t\t\r\n\t\tResponse response = new Response();\r\n\t\tLoggerDto loggerDto = new LoggerDto();\r\n\t\tloggerDto.setMessage(&quot;Inside generatePdf of DocumentGenerationController&quot; );\r\n\t\tlogger.printLog(DbEnum.INFO,loggerDto);\r\n\t\t\r\n\t\ttry {\r\n\t\t\tByteArrayInputStream pdfStream = documentGenerationService.generatePdf(req, resp, apiGroup, api, loggerDto, logger);\r\n\t\t\tif(pdfStream != null){\r\n\t\t\t\tloggerDto.setMessage(&quot;PDF stream returned from DocumentGeneratorUtil&quot; );\r\n\t\t\t\tlogger.printLog(DbEnum.INFO,loggerDto);\r\n\t\t\t\tHttpHeaders httpHeaders = new HttpHeaders();\r\n\t\t\t\thttpHeaders.add(&quot;Content-Disposition&quot;, &quot;attachment; filename=&quot;+api+&quot;.pdf&quot;);\r\n\t\t\r\n\t\t\t\treturn ResponseEntity\r\n\t\t\t\t\t\t.ok()\r\n\t\t\t\t\t\t.headers(httpHeaders)\r\n\t\t\t\t\t\t.contentType(MediaType.parseMediaType(&quot;application/octet-stream&quot;))\r\n\t\t\t\t\t\t.body(new InputStreamResource(pdfStream));\r\n\r\n\r\nWhen I am hitting this API, PDF does not get downloaded on browser. \r\n\r\nIn response header I get below data :\r\n\r\nContent-Disposition:\r\nattachment; filename=Generate Quick invoice.pdf\r\n\r\nContent-Type:\r\napplication/octet-stream\r\n\r\n\r\n","title":"PDF unable to download on browser when i hit my spring boot API from angular","body":"<p>this is my controller method to download created PDF from html -</p>\n<pre><code>@PostMapping(&quot;/downloadPdf/{apiGroup}/{api}&quot;)\npublic ResponseEntity&lt;InputStreamResource&gt; generatePdf(@PathVariable String apiGroup, @PathVariable String api, HttpServletRequest req,HttpServletResponse resp){\n    \n    Response response = new Response();\n    LoggerDto loggerDto = new LoggerDto();\n    loggerDto.setMessage(&quot;Inside generatePdf of DocumentGenerationController&quot; );\n    logger.printLog(DbEnum.INFO,loggerDto);\n    \n    try {\n        ByteArrayInputStream pdfStream = documentGenerationService.generatePdf(req, resp, apiGroup, api, loggerDto, logger);\n        if(pdfStream != null){\n            loggerDto.setMessage(&quot;PDF stream returned from DocumentGeneratorUtil&quot; );\n            logger.printLog(DbEnum.INFO,loggerDto);\n            HttpHeaders httpHeaders = new HttpHeaders();\n            httpHeaders.add(&quot;Content-Disposition&quot;, &quot;attachment; filename=&quot;+api+&quot;.pdf&quot;);\n    \n            return ResponseEntity\n                    .ok()\n                    .headers(httpHeaders)\n                    .contentType(MediaType.parseMediaType(&quot;application/octet-stream&quot;))\n                    .body(new InputStreamResource(pdfStream));\n</code></pre>\n<p>When I am hitting this API, PDF does not get downloaded on browser.</p>\n<p>In response header I get below data :</p>\n<p>Content-Disposition:\nattachment; filename=Generate Quick invoice.pdf</p>\n<p>Content-Type:\napplication/octet-stream</p>\n"},{"tags":["java","spring-data","spring-data-r2dbc","r2dbc","r2dbc-postgresql"],"owner":{"account_id":18345697,"reputation":1,"user_id":13360929,"display_name":"Mercury"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":42,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1697799586,"creation_date":1697799586,"question_id":77330385,"body_markdown":"How to map the row from the table to single field.\r\n\r\nHere is an example with book that holds the metadata in another class:\r\n\r\n```\r\n// Simple pojo that contains the information about papers\r\nclass PapersInfo {\r\n    Long paperCount;\r\n    Long blankPaperCount;\r\n}\r\n// Book entity\r\n@Entity\r\nclass Book {\r\n    @Id\r\n    Long id;\r\n    String name;\r\n    PapersInfo paperInfo;\r\n\r\n}\r\n```\r\n\r\nHow to map the PapersInfo so it won&#39;t throw an exception?\r\n\r\nSo here is what I tried:\r\n\r\n- Using the AfterConvertCallback\\&lt;Book\\&gt; and then enhance property but it can&#39;t be done because of onAfterConvert(T entity, SqlIdentifier table) method does not contain any Row information.\r\n\r\n- Using the Converter from Spring core and use Converter\\&lt;Row, Book\\&gt; it works, but I need to map the whole entity by myself(including the book name, id and so on). In my project the entity is pretty large and mapping all the fields by myself is hard.\r\n\r\n- Using the Converter from Spring core but with Converter\\&lt;Row, PapersInfo\\&gt; but it is does not work, because MappingR2dbcConverter can parse Row only for entity class(for Book in this example). I thought about extending the MappingR2dbcConverter and override the read method, but almost all methods in MappingR2dbcConverter are private and I will need to rewrite it.\r\n\r\n  Ideally I would like to override the\r\n\r\n  ```\r\n  private &lt;R&gt; R read(RelationalPersistentEntity&lt;R&gt; entity, Row row, @Nullable RowMetadata metadata)\r\n  ```\r\n\r\n  method from the MappingR2dbcConverter and add the ability to parse the Row to specific field, but it is private.\r\n\r\n- Of course I can annotate the PapersInfo with @Transient annotation and  hold the fields from PapersInfo in Book class and map them in AfterConvertCallback but I think it should be better solution.\r\n\r\n  Maybe I am missing something? Thanks for the help!","title":"How to map the row to the specific field in entity using R2DBC","body":"<p>How to map the row from the table to single field.</p>\n<p>Here is an example with book that holds the metadata in another class:</p>\n<pre><code>// Simple pojo that contains the information about papers\nclass PapersInfo {\n    Long paperCount;\n    Long blankPaperCount;\n}\n// Book entity\n@Entity\nclass Book {\n    @Id\n    Long id;\n    String name;\n    PapersInfo paperInfo;\n\n}\n</code></pre>\n<p>How to map the PapersInfo so it won't throw an exception?</p>\n<p>So here is what I tried:</p>\n<ul>\n<li><p>Using the AfterConvertCallback&lt;Book&gt; and then enhance property but it can't be done because of onAfterConvert(T entity, SqlIdentifier table) method does not contain any Row information.</p>\n</li>\n<li><p>Using the Converter from Spring core and use Converter&lt;Row, Book&gt; it works, but I need to map the whole entity by myself(including the book name, id and so on). In my project the entity is pretty large and mapping all the fields by myself is hard.</p>\n</li>\n<li><p>Using the Converter from Spring core but with Converter&lt;Row, PapersInfo&gt; but it is does not work, because MappingR2dbcConverter can parse Row only for entity class(for Book in this example). I thought about extending the MappingR2dbcConverter and override the read method, but almost all methods in MappingR2dbcConverter are private and I will need to rewrite it.</p>\n<p>Ideally I would like to override the</p>\n<pre><code>private &lt;R&gt; R read(RelationalPersistentEntity&lt;R&gt; entity, Row row, @Nullable RowMetadata metadata)\n</code></pre>\n<p>method from the MappingR2dbcConverter and add the ability to parse the Row to specific field, but it is private.</p>\n</li>\n<li><p>Of course I can annotate the PapersInfo with @Transient annotation and  hold the fields from PapersInfo in Book class and map them in AfterConvertCallback but I think it should be better solution.</p>\n<p>Maybe I am missing something? Thanks for the help!</p>\n</li>\n</ul>\n"},{"tags":["java","docker","armv7"],"comments":[{"owner":{"account_id":26698569,"reputation":875,"user_id":20306007,"display_name":"life888888"},"score":0,"creation_date":1692545705,"post_id":76940132,"comment_id":135635138,"body_markdown":"Does this answer your question? [Build linux/arm64 docker image on linux/amd64 host](https://stackoverflow.com/questions/70757791/build-linux-arm64-docker-image-on-linux-amd64-host)","body":"Does this answer your question? <a href=\"https://stackoverflow.com/questions/70757791/build-linux-arm64-docker-image-on-linux-amd64-host\">Build linux/arm64 docker image on linux/amd64 host</a>"},{"owner":{"account_id":29262370,"reputation":13,"user_id":22419034,"display_name":"4ctive"},"score":0,"creation_date":1692547921,"post_id":76940132,"comment_id":135635400,"body_markdown":"No, thats another problem. I have listed the platform I need (&quot;linux/arm/v7&quot;), but am not able to run the build with it...","body":"No, thats another problem. I have listed the platform I need (&quot;linux/arm/v7&quot;), but am not able to run the build with it..."}],"answers":[{"tags":[],"owner":{"account_id":350117,"reputation":8653,"user_id":685806,"accept_rate":44,"display_name":"Pino"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1697799123,"creation_date":1692555741,"answer_id":76940788,"question_id":76940132,"body_markdown":"`openjdk:20` is available for `arm64/v8`, not for `arm/v7` which is 32 bit (see [this page][2]). It is also a bit old and vulnerable, furthermore the `openjdk` repository on Docker Hub is deprecated (see the [deprecation notice][1]).\r\n\r\n[`arm32v7/eclipse-temurin`][3] has recent images but it supports up to Java 17.  Do you really use some Java 20 feature?  I have not found a pre-built image of Java 20 for `arm/v7`, however consider that Java 17 is the latest LTS so it is not obsolete.\r\n\r\n`arm32v7/eclipse-temurin` offers both JDK and JRE images.  It seems that you need just a JRE but you were trying to use a JDK which is bigger; I recommend `arm32v7/eclipse-temurin:17-jre`.\r\n\r\n\r\n  [1]: https://hub.docker.com/_/openjdk\r\n  [2]: https://hub.docker.com/layers/library/openjdk/20/images/sha256-c46cc372084e55b20d5d8bf02859ce96f188c90ed907a8c1fb9c23613b9a4ff3\r\n  [3]: https://hub.docker.com/r/arm32v7/eclipse-temurin/","title":"trying to build a docker image from my java app: openjdk:20 linux/arm/v7 - no match for platform in manifest","body":"<p><code>openjdk:20</code> is available for <code>arm64/v8</code>, not for <code>arm/v7</code> which is 32 bit (see <a href=\"https://hub.docker.com/layers/library/openjdk/20/images/sha256-c46cc372084e55b20d5d8bf02859ce96f188c90ed907a8c1fb9c23613b9a4ff3\" rel=\"nofollow noreferrer\">this page</a>). It is also a bit old and vulnerable, furthermore the <code>openjdk</code> repository on Docker Hub is deprecated (see the <a href=\"https://hub.docker.com/_/openjdk\" rel=\"nofollow noreferrer\">deprecation notice</a>).</p>\n<p><a href=\"https://hub.docker.com/r/arm32v7/eclipse-temurin/\" rel=\"nofollow noreferrer\"><code>arm32v7/eclipse-temurin</code></a> has recent images but it supports up to Java 17.  Do you really use some Java 20 feature?  I have not found a pre-built image of Java 20 for <code>arm/v7</code>, however consider that Java 17 is the latest LTS so it is not obsolete.</p>\n<p><code>arm32v7/eclipse-temurin</code> offers both JDK and JRE images.  It seems that you need just a JRE but you were trying to use a JDK which is bigger; I recommend <code>arm32v7/eclipse-temurin:17-jre</code>.</p>\n"},{"tags":[],"owner":{"account_id":16834351,"reputation":171,"user_id":12171447,"display_name":"Francesco"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1692556593,"creation_date":1692556593,"answer_id":76940848,"question_id":76940132,"body_markdown":"OpenJDK is deprecated and will not work with your architecture. try with this Dockerfile:\r\n\r\n```Dockerfile\r\nFROM arm32v7/eclipse-temurin:17-jammy\r\n\r\nENV ENVIRONMENT=prod\r\n\r\nLABEL maintainer=&quot;XXX&quot;\r\n\r\nEXPOSE 8080\r\n\r\nADD backend/target/capstone.jar app.jar\r\n\r\nCMD [ &quot;sh&quot;, &quot;-c&quot;, &quot;java -jar /app.jar&quot; ]\r\n```\r\n\r\nThe image arm32v7/eclipse-temurin:17-jammy is a little downgrade from the JDK 20 but will work on your machine. Also the eclipse-temurin offers the JRE only if you needed.","title":"trying to build a docker image from my java app: openjdk:20 linux/arm/v7 - no match for platform in manifest","body":"<p>OpenJDK is deprecated and will not work with your architecture. try with this Dockerfile:</p>\n<pre><code>FROM arm32v7/eclipse-temurin:17-jammy\n\nENV ENVIRONMENT=prod\n\nLABEL maintainer=&quot;XXX&quot;\n\nEXPOSE 8080\n\nADD backend/target/capstone.jar app.jar\n\nCMD [ &quot;sh&quot;, &quot;-c&quot;, &quot;java -jar /app.jar&quot; ]\n</code></pre>\n<p>The image arm32v7/eclipse-temurin:17-jammy is a little downgrade from the JDK 20 but will work on your machine. Also the eclipse-temurin offers the JRE only if you needed.</p>\n"}],"owner":{"account_id":29262370,"reputation":13,"user_id":22419034,"display_name":"4ctive"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":441,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76940848,"answer_count":2,"score":0,"last_activity_date":1697799123,"creation_date":1692545292,"question_id":76940132,"body_markdown":"I am trying to build an docker image out of my IntelliJ.\r\nIt is a Java (openjdk:20) project. I need to have the image as an linux/arm/v7 to run on a raspberry pi 2. \r\nBut when I try to build the image a get the following error: ERROR: failed to solve: openjdk:20: no match for platform in manifest \r\n\r\nWhen I run docker buildX ls I see that I should be able to build it:\r\n```\r\nNAME/NODE       DRIVER/ENDPOINT STATUS  BUILDKIT                              PLATFORMS\r\ndefault         docker                                                        \r\n  default       default         running v0.11.7-0.20230525183624-798ad6b0ce9f linux/arm64, linux/amd64, linux/amd64/v2, linux/riscv64, linux/ppc64le, linux/s390x, linux/386, linux/mips64le, linux/mips64, linux/arm/v7, linux/arm/v6\r\ndesktop-linux * docker                                                        \r\n  desktop-linux desktop-linux   running v0.11.7-0.20230525183624-798ad6b0ce9f linux/arm64, linux/amd64, linux/amd64/v2, linux/riscv64, linux/ppc64le, linux/s390x, linux/386, linux/mips64le, linux/mips64, linux/arm/v7, linux/arm/v6\r\n```\r\n \r\nI am using this command: \r\n```\r\ndocker buildx build --platform linux/arm/v7 --tag testarmv7 .\r\n```\r\n\r\nMy Dockerfile looks like this:\r\n```\r\nFROM openjdk:20\r\n\r\nENV ENVIRONMENT=prod\r\n\r\nLABEL maintainer=&quot;XXX&quot;\r\n\r\nEXPOSE 8080\r\n\r\nADD backend/target/capstone.jar app.jar\r\n\r\nCMD [ &quot;sh&quot;, &quot;-c&quot;, &quot;java -jar /app.jar&quot; ]\r\n```\r\n\r\nI really appreciate any help I can get!\r\n\r\nI tried to change the jdk to 17, 11 and 8, but it didnt solve the problem.","title":"trying to build a docker image from my java app: openjdk:20 linux/arm/v7 - no match for platform in manifest","body":"<p>I am trying to build an docker image out of my IntelliJ.\nIt is a Java (openjdk:20) project. I need to have the image as an linux/arm/v7 to run on a raspberry pi 2.\nBut when I try to build the image a get the following error: ERROR: failed to solve: openjdk:20: no match for platform in manifest</p>\n<p>When I run docker buildX ls I see that I should be able to build it:</p>\n<pre><code>NAME/NODE       DRIVER/ENDPOINT STATUS  BUILDKIT                              PLATFORMS\ndefault         docker                                                        \n  default       default         running v0.11.7-0.20230525183624-798ad6b0ce9f linux/arm64, linux/amd64, linux/amd64/v2, linux/riscv64, linux/ppc64le, linux/s390x, linux/386, linux/mips64le, linux/mips64, linux/arm/v7, linux/arm/v6\ndesktop-linux * docker                                                        \n  desktop-linux desktop-linux   running v0.11.7-0.20230525183624-798ad6b0ce9f linux/arm64, linux/amd64, linux/amd64/v2, linux/riscv64, linux/ppc64le, linux/s390x, linux/386, linux/mips64le, linux/mips64, linux/arm/v7, linux/arm/v6\n</code></pre>\n<p>I am using this command:</p>\n<pre><code>docker buildx build --platform linux/arm/v7 --tag testarmv7 .\n</code></pre>\n<p>My Dockerfile looks like this:</p>\n<pre><code>FROM openjdk:20\n\nENV ENVIRONMENT=prod\n\nLABEL maintainer=&quot;XXX&quot;\n\nEXPOSE 8080\n\nADD backend/target/capstone.jar app.jar\n\nCMD [ &quot;sh&quot;, &quot;-c&quot;, &quot;java -jar /app.jar&quot; ]\n</code></pre>\n<p>I really appreciate any help I can get!</p>\n<p>I tried to change the jdk to 17, 11 and 8, but it didnt solve the problem.</p>\n"},{"tags":["java","spring-boot","dns"],"owner":{"account_id":12620592,"reputation":99,"user_id":9176238,"display_name":"Anurag Srivastava"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":39,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1697798776,"creation_date":1697798776,"question_id":77330307,"body_markdown":"I&#39;m facing a issue while running spark-submit command on my mac (Apple M1 pro Ventura 13.6 ) with openjdk11 and  spring boot version 2.7.17. \r\nError message is like `Unable to load io.netty.resolver.dns.macos.MacOSDnsServerAddressStreamProvider`, fallback to system defaults. How to resolve this issue? \r\nI tried adding below dependency, but didn&#39;t resolved the issue.\r\n \r\n```\r\n&lt;dependency&gt;\r\n  &lt;groupId&gt;io.netty&lt;/groupId&gt;\r\n  &lt;artifactId&gt;netty-resolver-dns-native-macos&lt;/artifactId&gt;\r\n  &lt;classifier&gt;osx-aarch_64&lt;/classifier&gt;\r\n&lt;/dependency&gt;\r\n```\r\n","title":"Spring Boot 2.7.11 - DNS Resolution Problem at start on Apple M1 Ventura OS","body":"<p>I'm facing a issue while running spark-submit command on my mac (Apple M1 pro Ventura 13.6 ) with openjdk11 and  spring boot version 2.7.17.\nError message is like <code>Unable to load io.netty.resolver.dns.macos.MacOSDnsServerAddressStreamProvider</code>, fallback to system defaults. How to resolve this issue?\nI tried adding below dependency, but didn't resolved the issue.</p>\n<pre><code>&lt;dependency&gt;\n  &lt;groupId&gt;io.netty&lt;/groupId&gt;\n  &lt;artifactId&gt;netty-resolver-dns-native-macos&lt;/artifactId&gt;\n  &lt;classifier&gt;osx-aarch_64&lt;/classifier&gt;\n&lt;/dependency&gt;\n</code></pre>\n"},{"tags":["java","spring-boot","dns"],"answers":[{"tags":[],"owner":{"account_id":20592199,"reputation":131,"user_id":15115539,"display_name":"cavelling"},"down_vote_count":0,"up_vote_count":13,"is_accepted":false,"score":13,"last_activity_date":1612101289,"creation_date":1612074780,"answer_id":65976398,"question_id":65954571,"body_markdown":"For this pull request https://github.com/netty/netty/pull/10848, the log level changes from &quot;debug&quot; to &quot;warn.&quot;\r\n\r\nTo solve this problem, you can add this dependency:\r\n\r\n    &lt;dependency&gt;\r\n        &lt;groupId&gt;io.netty&lt;/groupId&gt;\r\n        &lt;artifactId&gt;netty-all&lt;/artifactId&gt;\r\n    &lt;/dependency&gt;","title":"Spring Boot 2.4.2 - DNS Resolution Problem at start on Apple M1","body":"<p>For this pull request <a href=\"https://github.com/netty/netty/pull/10848\" rel=\"noreferrer\">https://github.com/netty/netty/pull/10848</a>, the log level changes from &quot;debug&quot; to &quot;warn.&quot;</p>\n<p>To solve this problem, you can add this dependency:</p>\n<pre><code>&lt;dependency&gt;\n    &lt;groupId&gt;io.netty&lt;/groupId&gt;\n    &lt;artifactId&gt;netty-all&lt;/artifactId&gt;\n&lt;/dependency&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":165768,"reputation":3642,"user_id":389489,"accept_rate":78,"display_name":"Somu"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1614848840,"creation_date":1614100574,"answer_id":66337918,"question_id":65954571,"body_markdown":"As suggested [here][1], add the following dependency in your module.\r\n\r\n    &lt;properties&gt;\r\n\t  &lt;version.netty&gt;4.1.59.Final&lt;/version.netty&gt;\r\n    &lt;/properties&gt;\r\n\r\n    &lt;dependency&gt;\r\n\t  &lt;groupId&gt;io.netty&lt;/groupId&gt;\r\n\t  &lt;artifactId&gt;netty-resolver-dns-native-macos&lt;/artifactId&gt;\r\n\t  &lt;version&gt;${version.netty}&lt;/version&gt;\r\n\t  &lt;scope&gt;runtime&lt;/scope&gt;\r\n\t  &lt;classifier&gt;osx-x86_64&lt;/classifier&gt;\r\n    &lt;/dependency&gt;\r\n\r\nIf you face this issue only while running your app locally on macOS, you may add the dependency for a specific maven profile, e.g. &quot;local&quot;.\r\n\r\n    &lt;profiles&gt;\r\n      &lt;profile&gt;\r\n        &lt;id&gt;local&lt;/id&gt;\r\n        &lt;dependencies&gt;\r\n          &lt;dependency&gt;\r\n            &lt;groupId&gt;io.netty&lt;/groupId&gt;\r\n            &lt;artifactId&gt;netty-resolver-dns-native-macos&lt;/artifactId&gt;\r\n            &lt;version&gt;${version.netty}&lt;/version&gt;\r\n            &lt;scope&gt;runtime&lt;/scope&gt;\r\n            &lt;classifier&gt;osx-x86_64&lt;/classifier&gt;\r\n          &lt;/dependency&gt;\r\n        &lt;/dependencies&gt;\r\n      &lt;/profile&gt;\r\n    &lt;/profiles&gt;\r\n\r\nYou can avoid specifying `version` if you import [netty-bom][2] in `dependencyManagement`.\r\n\r\n  [1]: https://github.com/netty/netty/issues/11020\r\n  [2]: https://mvnrepository.com/artifact/io.netty/netty-bom","title":"Spring Boot 2.4.2 - DNS Resolution Problem at start on Apple M1","body":"<p>As suggested <a href=\"https://github.com/netty/netty/issues/11020\" rel=\"nofollow noreferrer\">here</a>, add the following dependency in your module.</p>\n<pre><code>&lt;properties&gt;\n  &lt;version.netty&gt;4.1.59.Final&lt;/version.netty&gt;\n&lt;/properties&gt;\n\n&lt;dependency&gt;\n  &lt;groupId&gt;io.netty&lt;/groupId&gt;\n  &lt;artifactId&gt;netty-resolver-dns-native-macos&lt;/artifactId&gt;\n  &lt;version&gt;${version.netty}&lt;/version&gt;\n  &lt;scope&gt;runtime&lt;/scope&gt;\n  &lt;classifier&gt;osx-x86_64&lt;/classifier&gt;\n&lt;/dependency&gt;\n</code></pre>\n<p>If you face this issue only while running your app locally on macOS, you may add the dependency for a specific maven profile, e.g. &quot;local&quot;.</p>\n<pre><code>&lt;profiles&gt;\n  &lt;profile&gt;\n    &lt;id&gt;local&lt;/id&gt;\n    &lt;dependencies&gt;\n      &lt;dependency&gt;\n        &lt;groupId&gt;io.netty&lt;/groupId&gt;\n        &lt;artifactId&gt;netty-resolver-dns-native-macos&lt;/artifactId&gt;\n        &lt;version&gt;${version.netty}&lt;/version&gt;\n        &lt;scope&gt;runtime&lt;/scope&gt;\n        &lt;classifier&gt;osx-x86_64&lt;/classifier&gt;\n      &lt;/dependency&gt;\n    &lt;/dependencies&gt;\n  &lt;/profile&gt;\n&lt;/profiles&gt;\n</code></pre>\n<p>You can avoid specifying <code>version</code> if you import <a href=\"https://mvnrepository.com/artifact/io.netty/netty-bom\" rel=\"nofollow noreferrer\">netty-bom</a> in <code>dependencyManagement</code>.</p>\n"},{"tags":[],"owner":{"account_id":455892,"reputation":6866,"user_id":854342,"accept_rate":17,"display_name":"Curtis Yallop"},"down_vote_count":1,"up_vote_count":24,"is_accepted":false,"score":23,"last_activity_date":1642021807,"creation_date":1614846369,"answer_id":66471176,"question_id":65954571,"body_markdown":"I needed a version in addition to classifier:\r\n\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;io.netty&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;netty-resolver-dns-native-macos&lt;/artifactId&gt;\r\n\t\t\t&lt;scope&gt;runtime&lt;/scope&gt;\r\n\t\t\t&lt;classifier&gt;osx-x86_64&lt;/classifier&gt;\r\n\t\t\t&lt;version&gt;4.1.59.Final&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\nscope is optional but classifier is required.\r\n\r\nFor the latest version, see:\r\nhttps://mvnrepository.com/artifact/io.netty/netty-resolver-dns-native-macos\r\n\r\nExample: Latest version for M1 macs (aarch_64), as of 2022-01:\r\n\r\n    &lt;classifier&gt;osx-aarch_64&lt;/classifier&gt;\r\n    &lt;version&gt;4.1.72.Final&lt;/version&gt;\r\n","title":"Spring Boot 2.4.2 - DNS Resolution Problem at start on Apple M1","body":"<p>I needed a version in addition to classifier:</p>\n<pre><code>    &lt;dependency&gt;\n        &lt;groupId&gt;io.netty&lt;/groupId&gt;\n        &lt;artifactId&gt;netty-resolver-dns-native-macos&lt;/artifactId&gt;\n        &lt;scope&gt;runtime&lt;/scope&gt;\n        &lt;classifier&gt;osx-x86_64&lt;/classifier&gt;\n        &lt;version&gt;4.1.59.Final&lt;/version&gt;\n    &lt;/dependency&gt;\n</code></pre>\n<p>scope is optional but classifier is required.</p>\n<p>For the latest version, see:\n<a href=\"https://mvnrepository.com/artifact/io.netty/netty-resolver-dns-native-macos\" rel=\"noreferrer\">https://mvnrepository.com/artifact/io.netty/netty-resolver-dns-native-macos</a></p>\n<p>Example: Latest version for M1 macs (aarch_64), as of 2022-01:</p>\n<pre><code>&lt;classifier&gt;osx-aarch_64&lt;/classifier&gt;\n&lt;version&gt;4.1.72.Final&lt;/version&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":14052508,"reputation":141,"user_id":10150839,"display_name":"Peter Cui"},"down_vote_count":0,"up_vote_count":14,"is_accepted":false,"score":14,"last_activity_date":1642067332,"creation_date":1622445426,"answer_id":67769368,"question_id":65954571,"body_markdown":"**Gradle** **syntax** if you prefer:\r\n\r\n    compile &quot;io.netty:netty-resolver-dns-native-macos:4.1.72.Final:osx-x86_64&quot;\r\n\r\nand for ARM-based macbook:\r\n\r\n    compile &quot;io.netty:netty-resolver-dns-native-macos:4.1.72.Final:osx-aarch_64&quot;\r\n","title":"Spring Boot 2.4.2 - DNS Resolution Problem at start on Apple M1","body":"<p><strong>Gradle</strong> <strong>syntax</strong> if you prefer:</p>\n<pre><code>compile &quot;io.netty:netty-resolver-dns-native-macos:4.1.72.Final:osx-x86_64&quot;\n</code></pre>\n<p>and for ARM-based macbook:</p>\n<pre><code>compile &quot;io.netty:netty-resolver-dns-native-macos:4.1.72.Final:osx-aarch_64&quot;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2777877,"reputation":49,"user_id":2391064,"display_name":"Maknaka"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1640710619,"creation_date":1640710619,"answer_id":70510159,"question_id":65954571,"body_markdown":"This one is working on my MacBook Pro M1 Pro \r\n```\r\n&lt;dependency&gt;\r\n    &lt;groupId&gt;io.netty&lt;/groupId&gt;\r\n    &lt;artifactId&gt;netty-all&lt;/artifactId&gt;\r\n&lt;/dependency&gt;\r\n```","title":"Spring Boot 2.4.2 - DNS Resolution Problem at start on Apple M1","body":"<p>This one is working on my MacBook Pro M1 Pro</p>\n<pre><code>&lt;dependency&gt;\n    &lt;groupId&gt;io.netty&lt;/groupId&gt;\n    &lt;artifactId&gt;netty-all&lt;/artifactId&gt;\n&lt;/dependency&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":112364,"reputation":25221,"user_id":296427,"accept_rate":91,"display_name":"pixel"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1646384716,"creation_date":1646384716,"answer_id":71348963,"question_id":65954571,"body_markdown":"If you have Gradle and want to include netty only locally you can make use of https://github.com/google/osdetector-gradle-plugin\r\n\r\n```gradle\r\nplugins {\r\n    id(&quot;com.google.osdetector&quot;) version &quot;1.7.0&quot;\r\n}\r\n\r\ndependencies {\r\n    if (osdetector.arch.equals(&quot;aarch_64&quot;)) {\r\n        implementation(&quot;io.netty:netty-all&quot;)\r\n    }\r\n}\r\n```","title":"Spring Boot 2.4.2 - DNS Resolution Problem at start on Apple M1","body":"<p>If you have Gradle and want to include netty only locally you can make use of <a href=\"https://github.com/google/osdetector-gradle-plugin\" rel=\"nofollow noreferrer\">https://github.com/google/osdetector-gradle-plugin</a></p>\n<pre><code>plugins {\n    id(&quot;com.google.osdetector&quot;) version &quot;1.7.0&quot;\n}\n\ndependencies {\n    if (osdetector.arch.equals(&quot;aarch_64&quot;)) {\n        implementation(&quot;io.netty:netty-all&quot;)\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":8499305,"reputation":61,"user_id":6372890,"display_name":"Rodrigo Bautista"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1648225375,"creation_date":1648225375,"answer_id":71620147,"question_id":65954571,"body_markdown":"If you are using Intellij and gradle try File-&gt;invalidate caches\r\n\r\n    implementation(&quot;io.netty:netty-all:4.1.75.Final&quot;)","title":"Spring Boot 2.4.2 - DNS Resolution Problem at start on Apple M1","body":"<p>If you are using Intellij and gradle try File-&gt;invalidate caches</p>\n<pre><code>implementation(&quot;io.netty:netty-all:4.1.75.Final&quot;)\n</code></pre>\n"},{"tags":[],"owner":{"account_id":5219040,"reputation":743,"user_id":4173048,"display_name":"withoutOne"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1665246029,"creation_date":1665246029,"answer_id":73998625,"question_id":65954571,"body_markdown":"    &lt;dependency&gt;\r\n                    &lt;groupId&gt;io.netty&lt;/groupId&gt;\r\n                    &lt;artifactId&gt;netty-resolver-dns-native-macos&lt;/artifactId&gt;\r\n                    &lt;version&gt;4.1.72.Final&lt;/version&gt;\r\n                    &lt;classifier&gt;osx-aarch_64&lt;/classifier&gt;\r\n    &lt;/dependency&gt;\r\n\r\nit works for me on my M1 pro","title":"Spring Boot 2.4.2 - DNS Resolution Problem at start on Apple M1","body":"<pre><code>&lt;dependency&gt;\n                &lt;groupId&gt;io.netty&lt;/groupId&gt;\n                &lt;artifactId&gt;netty-resolver-dns-native-macos&lt;/artifactId&gt;\n                &lt;version&gt;4.1.72.Final&lt;/version&gt;\n                &lt;classifier&gt;osx-aarch_64&lt;/classifier&gt;\n&lt;/dependency&gt;\n</code></pre>\n<p>it works for me on my M1 pro</p>\n"},{"tags":[],"owner":{"account_id":1744260,"reputation":14886,"user_id":1594823,"accept_rate":64,"display_name":"Saikat"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1690955954,"creation_date":1690955954,"answer_id":76816981,"question_id":65954571,"body_markdown":"It will mostly occur during local development on macOS with Apple Silicon as discussed in [this issue][1].\r\n\r\nIf you are using Maven then adding the following under the `project` tag in `pom.xml` should solve the issue:\r\n\r\n```xml\r\n&lt;profiles&gt;\r\n  &lt;profile&gt;\r\n    &lt;id&gt;macos-m1&lt;/id&gt;\r\n    &lt;activation&gt;\r\n      &lt;os&gt;\r\n        &lt;family&gt;mac&lt;/family&gt;\r\n        &lt;arch&gt;aarch64&lt;/arch&gt;\r\n      &lt;/os&gt;\r\n    &lt;/activation&gt;\r\n    &lt;dependencies&gt;\r\n      &lt;dependency&gt;\r\n        &lt;groupId&gt;io.netty&lt;/groupId&gt;\r\n        &lt;artifactId&gt;netty-resolver-dns-native-macos&lt;/artifactId&gt;\r\n        &lt;classifier&gt;osx-aarch_64&lt;/classifier&gt;\r\n      &lt;/dependency&gt;\r\n    &lt;/dependencies&gt;\r\n  &lt;/profile&gt;\r\n&lt;/profiles&gt;\r\n```\r\nThis ensures the profile is only activated for macOS with ARM64.\r\n\r\n  [1]: https://github.com/netty/netty/issues/11020","title":"Spring Boot 2.4.2 - DNS Resolution Problem at start on Apple M1","body":"<p>It will mostly occur during local development on macOS with Apple Silicon as discussed in <a href=\"https://github.com/netty/netty/issues/11020\" rel=\"nofollow noreferrer\">this issue</a>.</p>\n<p>If you are using Maven then adding the following under the <code>project</code> tag in <code>pom.xml</code> should solve the issue:</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;profiles&gt;\n  &lt;profile&gt;\n    &lt;id&gt;macos-m1&lt;/id&gt;\n    &lt;activation&gt;\n      &lt;os&gt;\n        &lt;family&gt;mac&lt;/family&gt;\n        &lt;arch&gt;aarch64&lt;/arch&gt;\n      &lt;/os&gt;\n    &lt;/activation&gt;\n    &lt;dependencies&gt;\n      &lt;dependency&gt;\n        &lt;groupId&gt;io.netty&lt;/groupId&gt;\n        &lt;artifactId&gt;netty-resolver-dns-native-macos&lt;/artifactId&gt;\n        &lt;classifier&gt;osx-aarch_64&lt;/classifier&gt;\n      &lt;/dependency&gt;\n    &lt;/dependencies&gt;\n  &lt;/profile&gt;\n&lt;/profiles&gt;\n</code></pre>\n<p>This ensures the profile is only activated for macOS with ARM64.</p>\n"},{"tags":[],"owner":{"account_id":6691602,"reputation":989,"user_id":5160940,"display_name":"DockYard"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1693142293,"creation_date":1693142293,"answer_id":76987303,"question_id":65954571,"body_markdown":"Assuming you are facing this issue in your local Apple M1/M2, and if you don&#39;t want to add any additional dependencies then you can use this below solution:\r\n\r\nStep 1)Download any IntelX64 based JDK distribution.\r\n\r\nSample download source:\r\nhttps://learn.microsoft.com/en-us/java/openjdk/download(In my case, I was using jdk11 hence I downloaded ```microsoft-jdk-11.0.20-macOS-x64.tar.gz``` from this page)\r\n\r\n\r\nStep 2)Set your java to this new jdk from your IDE(Intellij Idea for my case)\r\n\r\n\r\n\r\n\r\nThis worked like a charm for me","title":"Spring Boot 2.4.2 - DNS Resolution Problem at start on Apple M1","body":"<p>Assuming you are facing this issue in your local Apple M1/M2, and if you don't want to add any additional dependencies then you can use this below solution:</p>\n<p>Step 1)Download any IntelX64 based JDK distribution.</p>\n<p>Sample download source:\nhttps://learn.microsoft.com/en-us/java/openjdk/download(In my case, I was using jdk11 hence I downloaded <code>microsoft-jdk-11.0.20-macOS-x64.tar.gz</code> from this page)</p>\n<p>Step 2)Set your java to this new jdk from your IDE(Intellij Idea for my case)</p>\n<p>This worked like a charm for me</p>\n"}],"owner":{"account_id":19786915,"reputation":341,"user_id":14490702,"display_name":"Baris Ucakturk"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":32012,"favorite_count":0,"down_vote_count":0,"up_vote_count":34,"answer_count":10,"score":34,"last_activity_date":1697798696,"creation_date":1611923662,"question_id":65954571,"body_markdown":"I&#39;m upgrading my Spring Boot version from `2.1.x` to `2.4.2`. When I compiled and run the code, I got the following warning:\r\n\r\n    Unable to load io.netty.resolver.dns.macos.MacOSDnsServerAddressStreamProvider,fallback to system defaults. This may result in incorrect DNS resolutions on MacOS.\r\n    java.lang.ClassNotFoundException: io.netty.resolver.dns.macos.MacOSDnsServerAddressStreamProvider\r\n\r\nWhen I deploy the project to DEV environment which is in AWS and CentOS machine, there is no such warning message in the logs. \r\n\r\nThanks, ","title":"Spring Boot 2.4.2 - DNS Resolution Problem at start on Apple M1","body":"<p>I'm upgrading my Spring Boot version from <code>2.1.x</code> to <code>2.4.2</code>. When I compiled and run the code, I got the following warning:</p>\n<pre><code>Unable to load io.netty.resolver.dns.macos.MacOSDnsServerAddressStreamProvider,fallback to system defaults. This may result in incorrect DNS resolutions on MacOS.\njava.lang.ClassNotFoundException: io.netty.resolver.dns.macos.MacOSDnsServerAddressStreamProvider\n</code></pre>\n<p>When I deploy the project to DEV environment which is in AWS and CentOS machine, there is no such warning message in the logs.</p>\n<p>Thanks,</p>\n"},{"tags":["java","drools"],"answers":[{"tags":[],"owner":{"account_id":350117,"reputation":8653,"user_id":685806,"accept_rate":44,"display_name":"Pino"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1697798265,"creation_date":1697729264,"answer_id":77325165,"question_id":77324827,"body_markdown":"To collect the `ItemFact` instances whose `id` is in the selected `CanUseItemInBasket` instances you can use `accumulate`:\r\n\r\n```drools\r\nrule &quot;Collect beers&quot;\r\nwhen\r\n    $beers : List() from accumulate(CanUseItemInBasket($itemId: orderItemId, basketId == 5) and\r\n\t                                $item: ItemFact(id == $itemId);\r\n\t                                collectList($item))\r\nthen\r\n\tSystem.out.println($beers);\r\nend\r\n```\r\n\r\nThe [v6.x language reference][1] says:\r\n\r\n&gt; The Conditional Element `accumulate` is a more flexible and powerful\r\n&gt; form of `collect`, in the sense that it can be used to do what\r\n&gt; `collect` does and also achieve results that the CE `collect` is not\r\n&gt; capable of achieving.\r\n\r\nA similar note is in [v7.x][2], and [v8.x][3] lists `collect` among obsolete keywords.\r\n\r\n\r\n  [1]: https://docs.drools.org/6.5.0.Final/drools-docs/html_single/#d0e11001\r\n  [2]: https://docs.drools.org/7.74.1.Final/drools-docs/html_single/#:~:text=all%20parents.%0Aend-,accumulate,-Use%20this%20to\r\n  [3]: https://docs.drools.org/8.44.0.Final/drools-docs/drools/language-reference/index.html#_legacy_drl_rule_condition_elements","title":"Drools &quot;join&quot; like SQL in collect","body":"<p>To collect the <code>ItemFact</code> instances whose <code>id</code> is in the selected <code>CanUseItemInBasket</code> instances you can use <code>accumulate</code>:</p>\n<pre><code>rule &quot;Collect beers&quot;\nwhen\n    $beers : List() from accumulate(CanUseItemInBasket($itemId: orderItemId, basketId == 5) and\n                                    $item: ItemFact(id == $itemId);\n                                    collectList($item))\nthen\n    System.out.println($beers);\nend\n</code></pre>\n<p>The <a href=\"https://docs.drools.org/6.5.0.Final/drools-docs/html_single/#d0e11001\" rel=\"nofollow noreferrer\">v6.x language reference</a> says:</p>\n<blockquote>\n<p>The Conditional Element <code>accumulate</code> is a more flexible and powerful\nform of <code>collect</code>, in the sense that it can be used to do what\n<code>collect</code> does and also achieve results that the CE <code>collect</code> is not\ncapable of achieving.</p>\n</blockquote>\n<p>A similar note is in <a href=\"https://docs.drools.org/7.74.1.Final/drools-docs/html_single/#:%7E:text=all%20parents.%0Aend-,accumulate,-Use%20this%20to\" rel=\"nofollow noreferrer\">v7.x</a>, and <a href=\"https://docs.drools.org/8.44.0.Final/drools-docs/drools/language-reference/index.html#_legacy_drl_rule_condition_elements\" rel=\"nofollow noreferrer\">v8.x</a> lists <code>collect</code> among obsolete keywords.</p>\n"}],"owner":{"account_id":8773814,"reputation":315,"user_id":6559689,"display_name":"colorgreen"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":62,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":77325165,"answer_count":1,"score":0,"last_activity_date":1697798265,"creation_date":1697727000,"question_id":77324827,"body_markdown":"So I something like SQL join possible in drools. I have ItemFact collection (1,2,3,...), each item may be used in different baskets. I have CanUseItemInBasket facts, that represents if item can be used in basket or no\r\n\r\nI have tried this \r\n```drools\r\nrule &quot;xxx&quot;\r\n    when\r\n        $beers : ArrayList() from collect( ItemFact(id == $orderItemId )\r\n                             from collect(CanUseItemInBasket($itemId: orderItemId, basketId == 5)))\r\n    then\r\n    ...\r\nend\r\n```\r\nor this\r\n```drools\r\nrule &quot;xxx&quot;\r\n    when\r\n        $beers : ArrayList() from collect( ItemFact(id == $orderItemId ), CanUseItemInBasket($itemId: orderItemId, basketId == 5))\r\n    then\r\n    ...\r\nend\r\n```\r\nbut this approaches not work. I know I add field `basketId` to ItemFact and add multiple ItemFacts with the same `id` and different `basketIds`, but in this approach ItemFact is &quot;cloned&quot; in working memory","title":"Drools &quot;join&quot; like SQL in collect","body":"<p>So I something like SQL join possible in drools. I have ItemFact collection (1,2,3,...), each item may be used in different baskets. I have CanUseItemInBasket facts, that represents if item can be used in basket or no</p>\n<p>I have tried this</p>\n<pre><code>rule &quot;xxx&quot;\n    when\n        $beers : ArrayList() from collect( ItemFact(id == $orderItemId )\n                             from collect(CanUseItemInBasket($itemId: orderItemId, basketId == 5)))\n    then\n    ...\nend\n</code></pre>\n<p>or this</p>\n<pre><code>rule &quot;xxx&quot;\n    when\n        $beers : ArrayList() from collect( ItemFact(id == $orderItemId ), CanUseItemInBasket($itemId: orderItemId, basketId == 5))\n    then\n    ...\nend\n</code></pre>\n<p>but this approaches not work. I know I add field <code>basketId</code> to ItemFact and add multiple ItemFacts with the same <code>id</code> and different <code>basketIds</code>, but in this approach ItemFact is &quot;cloned&quot; in working memory</p>\n"},{"tags":["java","exception","logging","try-catch"],"comments":[{"owner":{"account_id":3557625,"reputation":198996,"user_id":2970947,"display_name":"Elliott Frisch"},"score":0,"creation_date":1393513722,"post_id":22072343,"comment_id":33471966,"body_markdown":"Seems fine to me, as long as MyCustomException is a checked Exception.","body":"Seems fine to me, as long as MyCustomException is a checked Exception."},{"owner":{"account_id":3407565,"reputation":725,"user_id":2858279,"accept_rate":50,"display_name":"xrabbit"},"score":0,"creation_date":1393517225,"post_id":22072343,"comment_id":33474806,"body_markdown":"thanks every one for your replies!\nyou helped me very much to understand how to write logging/exception handling.","body":"thanks every one for your replies! you helped me very much to understand how to write logging/exception handling."}],"answers":[{"tags":[],"owner":{"account_id":243084,"reputation":31440,"user_id":515034,"accept_rate":59,"display_name":"Abimaran Kugathasan"},"down_vote_count":2,"up_vote_count":21,"is_accepted":true,"score":19,"last_activity_date":1665021724,"creation_date":1393513787,"answer_id":22072503,"question_id":22072343,"body_markdown":"I use both in some cases, logging and throwing the exception. Especially, it&#39;s useful in APIs. By throwing the exception, we allow the caller to handle it, and by logging, we can identify the root cause of it ourselves.\r\n\r\nAnd, if the caller is in the same system, then if we add logs in every catch, there will be duplicate logs.","title":"Throw exception vs Logging","body":"<p>I use both in some cases, logging and throwing the exception. Especially, it's useful in APIs. By throwing the exception, we allow the caller to handle it, and by logging, we can identify the root cause of it ourselves.</p>\n<p>And, if the caller is in the same system, then if we add logs in every catch, there will be duplicate logs.</p>\n"},{"tags":[],"owner":{"account_id":7450,"reputation":269210,"user_id":12960,"display_name":"Brian Agnew"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1393513876,"creation_date":1393513876,"answer_id":22072546,"question_id":22072343,"body_markdown":"I think you may need to use the pattern judiciously. As you&#39;ve written the above, for each exception you&#39;re going to log 2 stacktraces and that may fill your logs with excessive information.\r\n\r\nWith respect to logging vs. throwing, they&#39;re two separate concerns. Throwing an exception will interrupt your execution, prevent any further work, perhaps rollback database commits etc. Logging will simply dump info to the log file (or elsewhere). It&#39;s of more use for debugging, and often much more difficult to test.","title":"Throw exception vs Logging","body":"<p>I think you may need to use the pattern judiciously. As you've written the above, for each exception you're going to log 2 stacktraces and that may fill your logs with excessive information.</p>\n\n<p>With respect to logging vs. throwing, they're two separate concerns. Throwing an exception will interrupt your execution, prevent any further work, perhaps rollback database commits etc. Logging will simply dump info to the log file (or elsewhere). It's of more use for debugging, and often much more difficult to test.</p>\n"},{"tags":[],"owner":{"account_id":66969,"reputation":22196,"user_id":196211,"accept_rate":67,"display_name":"Eyal Schneider"},"down_vote_count":0,"up_vote_count":8,"is_accepted":false,"score":8,"last_activity_date":1393515313,"creation_date":1393513975,"answer_id":22072585,"question_id":22072343,"body_markdown":"When using the pattern you suggest, you usually end up with error events being reported multiple times in the log. In addition, it&#39;s not always simple to connect between them when reading the log.\r\n\r\nPersonally I prefer logging error events only once, and doing it in the higher call levels. Therefore I almost never log &amp; re-throw. I usually let the exception go up the call stack until it reached a context where it can be handled somehow, and this is where I log.\r\n\r\nIf the exceptions are wrapped and re-thrown correctly, the context should be perfectly clear from the stack traces of the single log message.","title":"Throw exception vs Logging","body":"<p>When using the pattern you suggest, you usually end up with error events being reported multiple times in the log. In addition, it's not always simple to connect between them when reading the log.</p>\n\n<p>Personally I prefer logging error events only once, and doing it in the higher call levels. Therefore I almost never log &amp; re-throw. I usually let the exception go up the call stack until it reached a context where it can be handled somehow, and this is where I log.</p>\n\n<p>If the exceptions are wrapped and re-thrown correctly, the context should be perfectly clear from the stack traces of the single log message.</p>\n"},{"tags":[],"owner":{"account_id":1696444,"reputation":1760,"user_id":1557750,"display_name":"Arnaud Potier"},"down_vote_count":1,"up_vote_count":4,"is_accepted":false,"score":3,"last_activity_date":1393514018,"creation_date":1393514018,"answer_id":22072605,"question_id":22072343,"body_markdown":"The proper answer would be: &quot;it depends&quot;\r\n\r\nYou do want in general log the exceptions that you catch, since they correspond to something going wrong. That is why code analysis tools such as sonar will raise warnings when you do not log them.\r\n\r\nConsider the following taks: parsing a file. While parsing the file you actually try to parse each line. Sometimes some lines will be malformed, and therefore you don&#39;t want to stop parsing the file because of it. In that case, you probably want to just log the wrong line and keep going on the file.\r\nHowever, imagine that at some point you encounter an I/O exception while reading (for example some other program deleted the file while yours was accessing it).\r\n\r\nIn this case, you will probably want to log your log the error you encounter, and throw a new exception to stop processing the whole file.\r\n\r\nSo in short, you have to think about what is the best thing to do. But both practices are not bad.\r\n\r\n","title":"Throw exception vs Logging","body":"<p>The proper answer would be: \"it depends\"</p>\n\n<p>You do want in general log the exceptions that you catch, since they correspond to something going wrong. That is why code analysis tools such as sonar will raise warnings when you do not log them.</p>\n\n<p>Consider the following taks: parsing a file. While parsing the file you actually try to parse each line. Sometimes some lines will be malformed, and therefore you don't want to stop parsing the file because of it. In that case, you probably want to just log the wrong line and keep going on the file.\nHowever, imagine that at some point you encounter an I/O exception while reading (for example some other program deleted the file while yours was accessing it).</p>\n\n<p>In this case, you will probably want to log your log the error you encounter, and throw a new exception to stop processing the whole file.</p>\n\n<p>So in short, you have to think about what is the best thing to do. But both practices are not bad.</p>\n"},{"tags":[],"owner":{"account_id":23503,"reputation":28545,"user_id":58956,"accept_rate":91,"display_name":"gustafc"},"down_vote_count":0,"up_vote_count":30,"is_accepted":false,"score":30,"last_activity_date":1393515217,"creation_date":1393515217,"answer_id":22073102,"question_id":22072343,"body_markdown":"Normally, I&#39;d argue that you should either log _or_ rethrow. Doing both will just cause every layer to log the exception again and again, which makes the logs hard to read. Even worse, it&#39;s hard to figure out how many errors you actually have - was it seven errors, or seven layers of the app which logged the same error?\r\n\r\nThis means that **if you suppress an exception**, you log it and say why you didn&#39;t think it was worth rethrowing. \r\n\r\nOn the other hand, if you **re-throw the exception**, you know it&#39;s either going to be caught and suppressed (in which case the catcher logs the exception and why it was suppressed), or it will bubble up out of your app and be caught by the app container, which will catch and log the exception. Every exception shows up once and only once in the logs.\r\n","title":"Throw exception vs Logging","body":"<p>Normally, I'd argue that you should either log <em>or</em> rethrow. Doing both will just cause every layer to log the exception again and again, which makes the logs hard to read. Even worse, it's hard to figure out how many errors you actually have - was it seven errors, or seven layers of the app which logged the same error?</p>\n\n<p>This means that <strong>if you suppress an exception</strong>, you log it and say why you didn't think it was worth rethrowing. </p>\n\n<p>On the other hand, if you <strong>re-throw the exception</strong>, you know it's either going to be caught and suppressed (in which case the catcher logs the exception and why it was suppressed), or it will bubble up out of your app and be caught by the app container, which will catch and log the exception. Every exception shows up once and only once in the logs.</p>\n"},{"tags":[],"owner":{"account_id":6051935,"reputation":327,"user_id":5497749,"display_name":"Vijit"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1615285052,"creation_date":1615284336,"answer_id":66544766,"question_id":22072343,"body_markdown":"*I know that is really old question, but I have an another solution.*\r\n\r\nConsider this. You can log the problem in `catch` block and throw a new *unchecked* exception (of course with passing the previous one inside). In such solution there is no overflow in the logs and exception still bubble up to the highest level.\r\n```\r\ntry {\r\n    //my code here\r\n} catch (SomeException e) {\r\n    logger.error(&quot;Some error occured&quot;, e);\r\n    throw new MyUncheckedException(&quot;Some error &quot;, e);\r\n}\r\n```","title":"Throw exception vs Logging","body":"<p><em>I know that is really old question, but I have an another solution.</em></p>\n<p>Consider this. You can log the problem in <code>catch</code> block and throw a new <em>unchecked</em> exception (of course with passing the previous one inside). In such solution there is no overflow in the logs and exception still bubble up to the highest level.</p>\n<pre><code>try {\n    //my code here\n} catch (SomeException e) {\n    logger.error(&quot;Some error occured&quot;, e);\n    throw new MyUncheckedException(&quot;Some error &quot;, e);\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":19489822,"reputation":1,"user_id":14258233,"display_name":"Kai"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1656927546,"creation_date":1656927546,"answer_id":72854657,"question_id":22072343,"body_markdown":"My opinion.\r\n\r\nWhen you need to throw an exception, no matter if it is a Checked or UnChecked(Most RD would not catch this.). It means that you want to do something else by stopping the process.\r\n\r\nWhen you need to log something.\r\nIt means you want to track it.\r\n\r\nIt&#39;s quite different things.\r\nYou need to check what you really need.\r\n\r\nBTW: If your exception was thrown by getting no data from DB. \r\nI suggest you to modify the process to return an empty Data Object(POJO). It is better than throwing an exception.","title":"Throw exception vs Logging","body":"<p>My opinion.</p>\n<p>When you need to throw an exception, no matter if it is a Checked or UnChecked(Most RD would not catch this.). It means that you want to do something else by stopping the process.</p>\n<p>When you need to log something.\nIt means you want to track it.</p>\n<p>It's quite different things.\nYou need to check what you really need.</p>\n<p>BTW: If your exception was thrown by getting no data from DB.\nI suggest you to modify the process to return an empty Data Object(POJO). It is better than throwing an exception.</p>\n"},{"tags":[],"owner":{"account_id":18810759,"reputation":1,"user_id":13718992,"display_name":"Patrick Chimeudeonwo"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1697797897,"creation_date":1697618742,"answer_id":77314785,"question_id":22072343,"body_markdown":"You can log the error and return the status code to notify the client why the error happened. For example:\r\n    \r\n    if(inValidInputFromClient) {\r\n        log.error(&quot;in valid input from client&quot;);\r\n        return new ResponseEntity&lt;ReturnType&gt;(HttpStatus.BAD_REQUEST);\r\n    }\r\n    \r\n    try {\r\n        //my code here\r\n    } catch (Exception e) {\r\n        log.error(&quot;Some error occurred&quot;, e);\r\n        return new ResponseEntity&lt;ReturnType&gt;(HttpStatus.INTERNAL_SERVER_ERROR);\r\n    }\r\n    \r\nThis way, the client will handle the error accordingly.","title":"Throw exception vs Logging","body":"<p>You can log the error and return the status code to notify the client why the error happened. For example:</p>\n<pre><code>if(inValidInputFromClient) {\n    log.error(&quot;in valid input from client&quot;);\n    return new ResponseEntity&lt;ReturnType&gt;(HttpStatus.BAD_REQUEST);\n}\n\ntry {\n    //my code here\n} catch (Exception e) {\n    log.error(&quot;Some error occurred&quot;, e);\n    return new ResponseEntity&lt;ReturnType&gt;(HttpStatus.INTERNAL_SERVER_ERROR);\n}\n</code></pre>\n<p>This way, the client will handle the error accordingly.</p>\n"}],"owner":{"account_id":3407565,"reputation":725,"user_id":2858279,"accept_rate":50,"display_name":"xrabbit"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":31655,"favorite_count":0,"down_vote_count":0,"up_vote_count":45,"accepted_answer_id":22072503,"answer_count":8,"score":45,"last_activity_date":1697797897,"creation_date":1393513423,"question_id":22072343,"body_markdown":"Is the following way to code good practice?\r\n\r\n    try {\r\n        //my code here\r\n    } catch (Exception e) {\r\n        logger.error(&quot;Some error &quot;, e);\r\n        throw new MyCustomException(&quot;Some error &quot;, e);\r\n    }\r\n\r\nMoreover, should I.. \r\n\r\n- use only the logger?\r\n- throw only the exception? \r\n- do both?\r\n\r\nI understand that with `throw` I can catch the exception in another part of the callstack, but maybe additional logging has some hidden benefits and is useful as well.","title":"Throw exception vs Logging","body":"<p>Is the following way to code good practice?</p>\n\n<pre><code>try {\n    //my code here\n} catch (Exception e) {\n    logger.error(\"Some error \", e);\n    throw new MyCustomException(\"Some error \", e);\n}\n</code></pre>\n\n<p>Moreover, should I.. </p>\n\n<ul>\n<li>use only the logger?</li>\n<li>throw only the exception? </li>\n<li>do both?</li>\n</ul>\n\n<p>I understand that with <code>throw</code> I can catch the exception in another part of the callstack, but maybe additional logging has some hidden benefits and is useful as well.</p>\n"},{"tags":["java","infinispan","distributed-caching","jgroups"],"comments":[{"owner":{"account_id":3534106,"reputation":1214,"user_id":2952847,"display_name":"pruivo"},"score":0,"creation_date":1697705262,"post_id":77314585,"comment_id":136314277,"body_markdown":"I&#39;ve never used JDBC_PING but where does `JROUPS_NODE_NAME` come from? Is some environment variable set?","body":"I&#39;ve never used JDBC_PING but where does <code>JROUPS_NODE_NAME</code> come from? Is some environment variable set?"},{"owner":{"account_id":5345287,"reputation":114,"user_id":4261002,"display_name":"Mayur"},"score":0,"creation_date":1697708977,"post_id":77314585,"comment_id":136314981,"body_markdown":"Yes, JGROUPS_NODE_NAME is a unique value which is set as environment property at each node.","body":"Yes, JGROUPS_NODE_NAME is a unique value which is set as environment property at each node."},{"owner":{"account_id":3534106,"reputation":1214,"user_id":2952847,"display_name":"pruivo"},"score":0,"creation_date":1697710517,"post_id":77314585,"comment_id":136315281,"body_markdown":"Have you double-checked if it is unique? Did you try to attach a debugger to see what is the real query being executed?","body":"Have you double-checked if it is unique? Did you try to attach a debugger to see what is the real query being executed?"},{"owner":{"account_id":5345287,"reputation":114,"user_id":4261002,"display_name":"Mayur"},"score":0,"creation_date":1697712204,"post_id":77314585,"comment_id":136315549,"body_markdown":"Yes, I have cross checked, the JGROUPS_NODE_NAME is set with unique value at all the nodes. I have tried debugging JGROUPS_PING Class where it was seen with unique value set by the node. The main thing I have seen is, all other nodes jgroups use JGROUPS_NODE_NAME of first node which makes first entry in JGROUPSPING table.","body":"Yes, I have cross checked, the JGROUPS_NODE_NAME is set with unique value at all the nodes. I have tried debugging JGROUPS_PING Class where it was seen with unique value set by the node. The main thing I have seen is, all other nodes jgroups use JGROUPS_NODE_NAME of first node which makes first entry in JGROUPSPING table."}],"answers":[{"tags":[],"owner":{"account_id":2672966,"reputation":2186,"user_id":2309917,"display_name":"Bela Ban"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1697797329,"creation_date":1697797329,"answer_id":77330156,"question_id":77314585,"body_markdown":"I can only support Pedro&#39;s answer: if you see unique values on the different members, then debug the insert_single_sql statement execution in all nodes. If the insert is successful, then the values must be unique.\r\nHave you defined the other sql statements in JDBC_PING? e.g. select_all_ping_data?","title":"Jgroups nodes failed to add unique value to custom column of JGROUPSPING table","body":"<p>I can only support Pedro's answer: if you see unique values on the different members, then debug the insert_single_sql statement execution in all nodes. If the insert is successful, then the values must be unique.\nHave you defined the other sql statements in JDBC_PING? e.g. select_all_ping_data?</p>\n"}],"owner":{"account_id":5345287,"reputation":114,"user_id":4261002,"display_name":"Mayur"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":98,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1697797329,"creation_date":1697617298,"question_id":77314585,"body_markdown":"Hope you all are doing well.\r\n\r\nWe are using Infinispan distributed caching using jgroups. The JDBC_PING protocol is used for registering and synchronizing nodes. We are adding one custom column (`node_name`) in jgroupsping table to uniquely identify each nodes. Here, it is expected that, each node should add unique identifier to custom column (unique identifier is the unique value set to environment property of each node).\r\n\r\nBut post nodes are registered to the JDBC_PING table, we see custom column value is same for all the nodes. Can anybody please let me know why this custom_column value is duplicated? Basically, first node value is used by all other nodes.\r\n\r\n**create table sql : **\r\n\r\n```\r\nCREATE TABLE IF NOT EXISTS jgroupsping (\r\n   own_addr varchar(200) NOT NULL, \r\n   cluster_name varchar(200) NOT NULL, \r\n   ping_data varbinary(5000) DEFAULT NULL, \r\n   node_name varchar(50), \r\n   PRIMARY KEY (own_addr, cluster_name)) \r\n   DEFAULT CHARSET=utf8&quot;\r\n```\r\n\r\n**Jgroups-tcp.xml insert-sql :** \r\n\r\n```\r\ninsert_single_sql=&quot;INSERT INTO JGROUPSPING (own_addr, cluster_name, ping_data, node_name) values (?, ?, ?,&#39;${UNIQUE_NODE_NAME}&#39; )&quot;\r\n```\r\n\r\n**Files:**\r\n\r\n**infinispan-configs.xml :**\r\n[![enter image description here](https://i.stack.imgur.com/V7cqb.png)](https://i.stack.imgur.com/V7cqb.png)\r\n**jgroups-tcp.xml :**\r\n[![enter image description here][1]][1]\r\n\r\nThanks in advance,\r\n\r\n\r\njgroupsping table status post 2 nodes started in distributed mode:\r\n\r\n[![enter image description here](https://i.stack.imgur.com/ku0E0.png)](https://i.stack.imgur.com/ku0E0.png)\r\n\r\nHere, you can see same `node_name` is inserted for both the nodes even when nodes has unique value.\r\n\r\nWhy Jgroups does so? What is the way to insert unique value in node_name column of jgroupping table.\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/TxpIF.png","title":"Jgroups nodes failed to add unique value to custom column of JGROUPSPING table","body":"<p>Hope you all are doing well.</p>\n<p>We are using Infinispan distributed caching using jgroups. The JDBC_PING protocol is used for registering and synchronizing nodes. We are adding one custom column (<code>node_name</code>) in jgroupsping table to uniquely identify each nodes. Here, it is expected that, each node should add unique identifier to custom column (unique identifier is the unique value set to environment property of each node).</p>\n<p>But post nodes are registered to the JDBC_PING table, we see custom column value is same for all the nodes. Can anybody please let me know why this custom_column value is duplicated? Basically, first node value is used by all other nodes.</p>\n<p>**create table sql : **</p>\n<pre><code>CREATE TABLE IF NOT EXISTS jgroupsping (\n   own_addr varchar(200) NOT NULL, \n   cluster_name varchar(200) NOT NULL, \n   ping_data varbinary(5000) DEFAULT NULL, \n   node_name varchar(50), \n   PRIMARY KEY (own_addr, cluster_name)) \n   DEFAULT CHARSET=utf8&quot;\n</code></pre>\n<p><strong>Jgroups-tcp.xml insert-sql :</strong></p>\n<pre><code>insert_single_sql=&quot;INSERT INTO JGROUPSPING (own_addr, cluster_name, ping_data, node_name) values (?, ?, ?,'${UNIQUE_NODE_NAME}' )&quot;\n</code></pre>\n<p><strong>Files:</strong></p>\n<p><strong>infinispan-configs.xml :</strong>\n<a href=\"https://i.stack.imgur.com/V7cqb.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/V7cqb.png\" alt=\"enter image description here\" /></a>\n<strong>jgroups-tcp.xml :</strong>\n<a href=\"https://i.stack.imgur.com/TxpIF.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/TxpIF.png\" alt=\"enter image description here\" /></a></p>\n<p>Thanks in advance,</p>\n<p>jgroupsping table status post 2 nodes started in distributed mode:</p>\n<p><a href=\"https://i.stack.imgur.com/ku0E0.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/ku0E0.png\" alt=\"enter image description here\" /></a></p>\n<p>Here, you can see same <code>node_name</code> is inserted for both the nodes even when nodes has unique value.</p>\n<p>Why Jgroups does so? What is the way to insert unique value in node_name column of jgroupping table.</p>\n"},{"tags":["java","sonarqube","try-with-resources"],"owner":{"account_id":1447743,"reputation":2678,"user_id":1379730,"accept_rate":52,"display_name":"Jason"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":54,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1697797112,"creation_date":1697720894,"question_id":77324048,"body_markdown":"We are testing the introduction of some SonarQube rules in our codebase that have to do with flagging openings of connections that are not closed in `catch` or `finally` blocks, and missed opportunities to use try-with-resources. The rules flag the following code block:\r\n\r\n```java\r\nfinal Connection connection = jThalesDs.getConnection();\r\nfinal PreparedStatement pstmt = connection.prepareStatement(String.format(GET_SERVER_IDS_AND_TEST_LOGINS, dbSchemaProps.getOracleJThales()));\r\ntry {\r\n    // Some calls that may or may not throw something\r\n} catch(Throwable exc){\r\n    // Closing the resources and re-throwing the exception\r\n    pstmt.close();\r\n    connection.close();\r\n    throw exc;\r\n}\r\n// Whoops, forgot to include a finally block where we close the connections.\r\n```\r\n\r\nAs can be verified through this screenshot:\r\n\r\n  [![Code smell that is flagged by SQ][1]][1]\r\n\r\nIn the very same file, however, a more serious violation of the same rule is not being flagged as either a bug or a code smell, and SonarQube instead focuses on the genericity of the class being thrown (a `RuntimeException`):\r\n\r\n```java\r\nfinal Connection conn = jThalesDs.getConnection();\r\ntry  {\r\n\t // More calls that may or may not throw\r\n}\r\ncatch (Throwable ex) {\r\n\t// Whoops, forgot to close the connection if not null!\r\n\tthrow new RuntimeException(TEST_LOGINS_DB_ERROR, ex);\r\n}\r\n```\r\n\r\n[![Failing to reproduce a scenario with an even more grave violation of the rules.][2]][2]\r\n\r\nSo, to recap. In the same file, I have a bug and code smell that _is_ being caught by SonarQube, and it concerns the fact that I am not closing resources in a `finally` block. However, in an even more grievous violation of the same rules, in the same file, those rules are not triggered. \r\n\r\nWhat could be going on here? FWIW, we are running the latest LTS, 9.9.2.\r\n\r\n  [1]: https://i.stack.imgur.com/watUS.png\r\n  [2]: https://i.stack.imgur.com/8FHGK.png","title":"SonarQube doesn&#39;t flag code smell identical to one it does","body":"<p>We are testing the introduction of some SonarQube rules in our codebase that have to do with flagging openings of connections that are not closed in <code>catch</code> or <code>finally</code> blocks, and missed opportunities to use try-with-resources. The rules flag the following code block:</p>\n<pre class=\"lang-java prettyprint-override\"><code>final Connection connection = jThalesDs.getConnection();\nfinal PreparedStatement pstmt = connection.prepareStatement(String.format(GET_SERVER_IDS_AND_TEST_LOGINS, dbSchemaProps.getOracleJThales()));\ntry {\n    // Some calls that may or may not throw something\n} catch(Throwable exc){\n    // Closing the resources and re-throwing the exception\n    pstmt.close();\n    connection.close();\n    throw exc;\n}\n// Whoops, forgot to include a finally block where we close the connections.\n</code></pre>\n<p>As can be verified through this screenshot:</p>\n<p><a href=\"https://i.stack.imgur.com/watUS.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/watUS.png\" alt=\"Code smell that is flagged by SQ\" /></a></p>\n<p>In the very same file, however, a more serious violation of the same rule is not being flagged as either a bug or a code smell, and SonarQube instead focuses on the genericity of the class being thrown (a <code>RuntimeException</code>):</p>\n<pre class=\"lang-java prettyprint-override\"><code>final Connection conn = jThalesDs.getConnection();\ntry  {\n     // More calls that may or may not throw\n}\ncatch (Throwable ex) {\n    // Whoops, forgot to close the connection if not null!\n    throw new RuntimeException(TEST_LOGINS_DB_ERROR, ex);\n}\n</code></pre>\n<p><a href=\"https://i.stack.imgur.com/8FHGK.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/8FHGK.png\" alt=\"Failing to reproduce a scenario with an even more grave violation of the rules.\" /></a></p>\n<p>So, to recap. In the same file, I have a bug and code smell that <em>is</em> being caught by SonarQube, and it concerns the fact that I am not closing resources in a <code>finally</code> block. However, in an even more grievous violation of the same rules, in the same file, those rules are not triggered.</p>\n<p>What could be going on here? FWIW, we are running the latest LTS, 9.9.2.</p>\n"},{"tags":["java","spring-boot","intellij-idea","spring-boot-maven-plugin"],"comments":[{"owner":{"account_id":17383128,"reputation":5465,"user_id":12594975,"display_name":"Koyasha"},"score":0,"creation_date":1697812985,"post_id":77330101,"comment_id":136330829,"body_markdown":"Hi Ruth. Would it be possible for you to provide your project? (or a stripped down demo of it). You can upload it to https://uploads.jetbrains.com and share the id of the upload here.","body":"Hi Ruth. Would it be possible for you to provide your project? (or a stripped down demo of it). You can upload it to <a href=\"https://uploads.jetbrains.com\" rel=\"nofollow noreferrer\">uploads.jetbrains.com</a> and share the id of the upload here."}],"owner":{"account_id":25702571,"reputation":1,"user_id":19462404,"display_name":" Ruth Reji"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":26,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1697796817,"creation_date":1697796817,"question_id":77330101,"body_markdown":"I need to exclude these two packages based on any conditional value from an external source before running my application.\r\n\r\nSince I need to determine these packages based on an external value before building , I cant use hardcoded annotations.\r\n\r\n@ComponentScan( basePackages = &quot;com.ReadDB.reader&quot;,\r\n\t\texcludeFilters = {\r\n\t\t\t\t@ComponentScan.Filter(type = FilterType.REGEX, pattern = &quot;com\\\\.ReadDB\\\\.reader\\\\.opendental\\\\..*&quot;),\r\n\t\t\t\t@ComponentScan.Filter(type = FilterType.REGEX, pattern = &quot;com\\\\.ReadDB\\\\.reader\\\\.mysql\\\\..*&quot;)\r\n\t\t}\r\n) \r\n\r\nthis annotation on my main class is working , \r\n\r\n```\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; ?&gt;\r\n&lt;beans xmlns=&quot;http://www.springframework.org/schema/beans&quot;\r\n       xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n       xmlns:context=&quot;http://www.springframework.org/schema/context&quot;\r\n       xsi:schemaLocation=&quot;\r\n           http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd\r\n           http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context.xsd&quot;&gt;\r\n\r\n    &lt;context:component-scan base-package=&quot;com.ReadDB.reader&quot;&gt;\r\n        &lt;context:exclude-filter type=&quot;regex&quot; expression=&quot;com\\.ReadDB\\.reader\\.opendental\\..*&quot;/&gt;\r\n        &lt;context:exclude-filter type=&quot;regex&quot; expression=&quot;com\\.ReadDB\\.reader\\.mysql\\..*&quot;/&gt;\r\n    &lt;/context:component-scan&gt;\r\n\r\n&lt;/beans&gt; \r\n```\r\n\r\nbut this xml file in my resources folder and @ImportResource(&quot;classpath:applicationContext.xml&quot;) annotation on my main class is not working. \r\n\r\nAny idea on how to fix this.\r\n\r\n","title":"spring boot - exclude bean from component scan does not work in XML","body":"<p>I need to exclude these two packages based on any conditional value from an external source before running my application.</p>\n<p>Since I need to determine these packages based on an external value before building , I cant use hardcoded annotations.</p>\n<p>@ComponentScan( basePackages = &quot;com.ReadDB.reader&quot;,\nexcludeFilters = {\n@ComponentScan.Filter(type = FilterType.REGEX, pattern = &quot;com\\.ReadDB\\.reader\\.opendental\\..<em>&quot;),\n@ComponentScan.Filter(type = FilterType.REGEX, pattern = &quot;com\\.ReadDB\\.reader\\.mysql\\..</em>&quot;)\n}\n)</p>\n<p>this annotation on my main class is working ,</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; ?&gt;\n&lt;beans xmlns=&quot;http://www.springframework.org/schema/beans&quot;\n       xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\n       xmlns:context=&quot;http://www.springframework.org/schema/context&quot;\n       xsi:schemaLocation=&quot;\n           http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd\n           http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context.xsd&quot;&gt;\n\n    &lt;context:component-scan base-package=&quot;com.ReadDB.reader&quot;&gt;\n        &lt;context:exclude-filter type=&quot;regex&quot; expression=&quot;com\\.ReadDB\\.reader\\.opendental\\..*&quot;/&gt;\n        &lt;context:exclude-filter type=&quot;regex&quot; expression=&quot;com\\.ReadDB\\.reader\\.mysql\\..*&quot;/&gt;\n    &lt;/context:component-scan&gt;\n\n&lt;/beans&gt; \n</code></pre>\n<p>but this xml file in my resources folder and @ImportResource(&quot;classpath:applicationContext.xml&quot;) annotation on my main class is not working.</p>\n<p>Any idea on how to fix this.</p>\n"},{"tags":["java","apache-spark"],"comments":[{"owner":{"account_id":8824090,"reputation":206,"user_id":6592859,"display_name":"sai pradeep kumar kotha"},"score":0,"creation_date":1521607240,"post_id":49395093,"comment_id":85798047,"body_markdown":"can you paste the code here we can understand what you are doing .you are getting the non serializable code error because you may be using class objects which is not serializable","body":"can you paste the code here we can understand what you are doing .you are getting the non serializable code error because you may be using class objects which is not serializable"},{"owner":{"account_id":4955434,"reputation":165,"user_id":5240772,"display_name":"Vish"},"score":0,"creation_date":1521648144,"post_id":49395093,"comment_id":85823960,"body_markdown":"what if HashMap is converted into dataframe? What SQL functions can be used to update dsRecords?","body":"what if HashMap is converted into dataframe? What SQL functions can be used to update dsRecords?"},{"owner":{"account_id":4955434,"reputation":165,"user_id":5240772,"display_name":"Vish"},"score":0,"creation_date":1521759417,"post_id":49395093,"comment_id":85881481,"body_markdown":"I could update columns by using JOIN after converting Map to dataset. No success iterating and updating from Map.","body":"I could update columns by using JOIN after converting Map to dataset. No success iterating and updating from Map."}],"answers":[{"tags":[],"owner":{"account_id":4955434,"reputation":165,"user_id":5240772,"display_name":"Vish"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1524691490,"creation_date":1524691490,"answer_id":50031577,"question_id":49395093,"body_markdown":"Since I didn&#39;t find any better answer around, I&#39;m going to answer my question with the solution I implemented (and it looks ugly!) -\r\n\r\n    Dataset&lt;Row&gt; processByRowUpdate(Dataset&lt;Row&gt; dsRecords, SparkSession sparkSession) {\r\n    \t\tList&lt;Row&gt; rows = dsRecords.select(&quot;accountIdentifier&quot;, &quot;accountNumber&quot;).collectAsList();\r\n    List&lt;MongoRecord&gt; newRows = new ArrayList&lt;MongoRecord&gt;();\r\n    \t\tListIterator&lt;Row&gt; it = rows.listIterator();\r\n    \t\tboolean errorOccurred = false;\r\n    \t\twhile (it.hasNext()) {\r\n    \t\t\ttry {\r\n    \t\t\t\tRow record = it.next();\r\n    \t\t\t\tMongoRecord mongo = new MongoRecord();\r\n           if (!record.isNullAt(record.fieldIndex(&quot;accountIdentifier&quot;)))\r\n    \t\t\t\t\tmongo.setAccountIdentifier(String.valueOf(record.getDouble(record.fieldIndex(&quot;accountIdentifier&quot;))));\r\n    \r\n               //... and so on\r\n           newRows.add(mongo);\r\n    \t   } catch (Exception exception) {}\r\n    sparkSession.createDataFrame(newRows, MongoRecord.class);\r\n\r\n","title":"How to iterate through a spark dataset and update a column value in Java?","body":"<p>Since I didn't find any better answer around, I'm going to answer my question with the solution I implemented (and it looks ugly!) -</p>\n\n<pre><code>Dataset&lt;Row&gt; processByRowUpdate(Dataset&lt;Row&gt; dsRecords, SparkSession sparkSession) {\n        List&lt;Row&gt; rows = dsRecords.select(\"accountIdentifier\", \"accountNumber\").collectAsList();\nList&lt;MongoRecord&gt; newRows = new ArrayList&lt;MongoRecord&gt;();\n        ListIterator&lt;Row&gt; it = rows.listIterator();\n        boolean errorOccurred = false;\n        while (it.hasNext()) {\n            try {\n                Row record = it.next();\n                MongoRecord mongo = new MongoRecord();\n       if (!record.isNullAt(record.fieldIndex(\"accountIdentifier\")))\n                    mongo.setAccountIdentifier(String.valueOf(record.getDouble(record.fieldIndex(\"accountIdentifier\"))));\n\n           //... and so on\n       newRows.add(mongo);\n       } catch (Exception exception) {}\nsparkSession.createDataFrame(newRows, MongoRecord.class);\n</code></pre>\n"}],"owner":{"account_id":4955434,"reputation":165,"user_id":5240772,"display_name":"Vish"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":11195,"favorite_count":0,"down_vote_count":0,"up_vote_count":4,"answer_count":1,"score":4,"last_activity_date":1697796440,"creation_date":1521584499,"question_id":49395093,"body_markdown":"I&#39;m working on POC where I have to update the account number in DB with tokens. I read the data into a dataset&lt;Row&gt; dsRecords(about 2M records). I have another routine that had captured distinct account numbers and got the tokens, the mapping is stored in HashMap. \r\n\r\n    Dataset&lt;Row&gt; applySwappedTokens(Dataset&lt;Row&gt; dsRecords, Map&lt;String, String&gt; mappedTokens){\r\n    }\r\n\r\nNow, I must iterate through the dataset to do the following -\r\n1. Read account number column (accountNumber) value and update (I know dataset is immutable. So, updating the dataset means creating copy of dataset with updated rows) it with the token value from mappedTokens. This can be achieved through JOIN or other operations but I am not spending effort on this because of 2nd task.\r\n2. Read another XML blob column and find the account number and update it.\r\n\r\nAll the options I have tried so far are resulting into compile-time error or test compilation error due to non-serializable code. Most online resources are in Scala and not Java. Please help.\r\n\r\nSpark 2.1\r\nJava 8\r\n\r\n**Approach1 - Couldn&#39;t test due to serialization error.**\r\n\r\n    Dataset&lt;Row&gt; output = sparkSession.sqlContext().createDataFrame(dsRecords.javaRDD().map(row -&gt;  {\r\n                return RowFactory.create(row.get(0), row.get(1), row.get(2), swapToken(row.get(3)),row.get(4));\r\n            }), dsRecords.schema());\r\n    \r\n            return output;\r\n    \r\n    String swapToken(Object inputToken) {\r\n    \t\treturn mappedTokens.get(inputToken);//mappedToken will have to be instance field.\r\n    \t}\r\n\r\n**Approach2- Incomplete.**\r\n\r\n    dsRecords.foreach((ForeachFunction&lt;Row&gt;) row -&gt; {\r\n    \t\t\tInteger index = row.fieldIndex(&quot;accountNumber&quot;);\r\n    \t\t\tString pan = row.getString(index);\r\n    \t\t\tString swap = this.swapToken(pan);\r\n                //TODO: create a dataset with rows from dsRecords but swap value.\r\n    \t\t\t\r\n    \t\t});\r\n\r\n**Approach 3 - Use UDF with map function**\r\n\r\nCreate a UDF2 (that takes 2 input parameters viz. accountNumber and mappedToken and returns token). It seems UDF can only take column values\r\n\r\n**update 1 - UDF**\r\nSo, I implemented UDF (AFK, will post the code later):\r\n1. Defined UDF1 ‘updateToken’ to pass the xml column value and return the updated xml value. \r\n2. The HashMap instance ‘mappedTokens’ that has the account-token pair mapping is made static. It is accessed inside my UDF function to find the account in xml string and update with the token. \r\n\r\nI could test my applySwappedTokens function which calls the above UDF on dataset ‘withColumn’.  However when I run the spark program, I see that ‘mappedToken’ has ‘null’ data and hence, xml column gets updated with empty data. I think the static ‘mappedTokens’ is either in another JVM or driver (even in local the spark creates isolated driver, executor). It’s frustrating that there is no simple solution to iterate and update rows in spark.\r\n\r\n    Dataset&lt;Row&gt; processByRow(Dataset&lt;Row&gt; dsRecords, SparkSession sparkSession) {\r\n    \t\tsparkSession.udf().register(&quot;updateToken&quot;, updateToken, DataTypes.StringType);    \t\t\r\n    \t\treturn ds = dsRecords.withColumn(&quot;eventRecordTokenText&quot;, callUDF(&quot;updateToken&quot;, dsRecords.col(&quot;eventRecordTokenText&quot;)));\r\n    \t    \t}\r\n\r\n    static UDF1 updateToken = new UDF1&lt;String, String&gt;() {\r\n    \t\tpublic String call(final String tokenText) throws Exception {\r\n    \t\t\t\t// xml operations here..\r\n    \t\t\t\tfor (int nodeIndex = 0; nodeIndex &lt; nList.getLength(); nodeIndex++) {\r\n    \t\t\t\t\tNode thisNode = nList.item(nodeIndex);\r\n    \t\t\t\t\tif (thisNode.getAttributes().getNamedItem(&quot;ProcessTokenValue&quot;) != null &amp;&amp; thisNode.getAttributes()\r\n    \t\t\t\t\t\t\t.getNamedItem(&quot;ProcessTokenValue&quot;).getNodeValue().equalsIgnoreCase(&quot;true&quot;)) {\r\n    \t\t\t\t\t\tNode valueNode = thisNode.getAttributes().getNamedItem(&quot;Value&quot;);\r\n    \t\t\t\t\t\tString thisToken = valueNode.getNodeValue();\r\n    \t\t\t\t\t\tString newToken = mappedTokens.get(thisToken); // *returns null values from the map*\r\n    \t\t\t\t\t\tif(newToken != null &amp;&amp; !newToken.isEmpty())\r\n    \t\t\t\t\t\tvalueNode.setNodeValue(newToken);\r\n    \t\t\t\t\t}\r\n    \t\t\t\t}\r\n    \t\t\t\t// more xml operations here..\r\n    \t\t\t\treturn output;\r\n    \t\t}\r\n    \t};\r\n\r\n**update 2 - iterate &amp; update**\r\nNow, I am trying row by row traversing ..\r\n\r\n    Dataset&lt;Row&gt; processByRow1(Dataset&lt;Row&gt; dsRecords, SparkSession sparkSession) {\r\n            List&lt;MongoRecordSmall&gt; newRows = new ArrayList&lt;MongoRecordSmall&gt;();\r\n                dsRecords.foreach((ForeachFunction&lt;Row&gt;) record -&gt; {\r\n                String currentToken = record.getAs(AppConstants.TokenCol);\r\n                String newToken = mappedTokens.get(currentToken);\r\n                newRows.add(new MongoRecordSmall(record.getString(0), record.getString(1), newToken, record.getString(3)));\r\n                logger.error(“Size plus=“+newRows.size());\r\n            });\r\n           return sparkSession.createDataFrame(newRows, MongoRecordSmall.class);\r\n        }\r\n\r\nThis is throwing serliazation error. It seems (https://databricks.gitbooks.io/databricks-spark-knowledge-base/content/troubleshooting/javaionotserializableexception.html) my class where the above logic exists, is being serlalized and sent to worker nodes and failing in doing so.","title":"How to iterate through a spark dataset and update a column value in Java?","body":"<p>I'm working on POC where I have to update the account number in DB with tokens. I read the data into a dataset dsRecords(about 2M records). I have another routine that had captured distinct account numbers and got the tokens, the mapping is stored in HashMap. </p>\n\n<pre><code>Dataset&lt;Row&gt; applySwappedTokens(Dataset&lt;Row&gt; dsRecords, Map&lt;String, String&gt; mappedTokens){\n}\n</code></pre>\n\n<p>Now, I must iterate through the dataset to do the following -\n1. Read account number column (accountNumber) value and update (I know dataset is immutable. So, updating the dataset means creating copy of dataset with updated rows) it with the token value from mappedTokens. This can be achieved through JOIN or other operations but I am not spending effort on this because of 2nd task.\n2. Read another XML blob column and find the account number and update it.</p>\n\n<p>All the options I have tried so far are resulting into compile-time error or test compilation error due to non-serializable code. Most online resources are in Scala and not Java. Please help.</p>\n\n<p>Spark 2.1\nJava 8</p>\n\n<p><strong>Approach1 - Couldn't test due to serialization error.</strong></p>\n\n<pre><code>Dataset&lt;Row&gt; output = sparkSession.sqlContext().createDataFrame(dsRecords.javaRDD().map(row -&gt;  {\n            return RowFactory.create(row.get(0), row.get(1), row.get(2), swapToken(row.get(3)),row.get(4));\n        }), dsRecords.schema());\n\n        return output;\n\nString swapToken(Object inputToken) {\n        return mappedTokens.get(inputToken);//mappedToken will have to be instance field.\n    }\n</code></pre>\n\n<p><strong>Approach2- Incomplete.</strong></p>\n\n<pre><code>dsRecords.foreach((ForeachFunction&lt;Row&gt;) row -&gt; {\n            Integer index = row.fieldIndex(\"accountNumber\");\n            String pan = row.getString(index);\n            String swap = this.swapToken(pan);\n            //TODO: create a dataset with rows from dsRecords but swap value.\n\n        });\n</code></pre>\n\n<p><strong>Approach 3 - Use UDF with map function</strong></p>\n\n<p>Create a UDF2 (that takes 2 input parameters viz. accountNumber and mappedToken and returns token). It seems UDF can only take column values</p>\n\n<p><strong>update 1 - UDF</strong>\nSo, I implemented UDF (AFK, will post the code later):\n1. Defined UDF1 ‘updateToken’ to pass the xml column value and return the updated xml value. \n2. The HashMap instance ‘mappedTokens’ that has the account-token pair mapping is made static. It is accessed inside my UDF function to find the account in xml string and update with the token. </p>\n\n<p>I could test my applySwappedTokens function which calls the above UDF on dataset ‘withColumn’.  However when I run the spark program, I see that ‘mappedToken’ has ‘null’ data and hence, xml column gets updated with empty data. I think the static ‘mappedTokens’ is either in another JVM or driver (even in local the spark creates isolated driver, executor). It’s frustrating that there is no simple solution to iterate and update rows in spark.</p>\n\n<pre><code>Dataset&lt;Row&gt; processByRow(Dataset&lt;Row&gt; dsRecords, SparkSession sparkSession) {\n        sparkSession.udf().register(\"updateToken\", updateToken, DataTypes.StringType);          \n        return ds = dsRecords.withColumn(\"eventRecordTokenText\", callUDF(\"updateToken\", dsRecords.col(\"eventRecordTokenText\")));\n            }\n\nstatic UDF1 updateToken = new UDF1&lt;String, String&gt;() {\n        public String call(final String tokenText) throws Exception {\n                // xml operations here..\n                for (int nodeIndex = 0; nodeIndex &lt; nList.getLength(); nodeIndex++) {\n                    Node thisNode = nList.item(nodeIndex);\n                    if (thisNode.getAttributes().getNamedItem(\"ProcessTokenValue\") != null &amp;&amp; thisNode.getAttributes()\n                            .getNamedItem(\"ProcessTokenValue\").getNodeValue().equalsIgnoreCase(\"true\")) {\n                        Node valueNode = thisNode.getAttributes().getNamedItem(\"Value\");\n                        String thisToken = valueNode.getNodeValue();\n                        String newToken = mappedTokens.get(thisToken); // *returns null values from the map*\n                        if(newToken != null &amp;&amp; !newToken.isEmpty())\n                        valueNode.setNodeValue(newToken);\n                    }\n                }\n                // more xml operations here..\n                return output;\n        }\n    };\n</code></pre>\n\n<p><strong>update 2 - iterate &amp; update</strong>\nNow, I am trying row by row traversing ..</p>\n\n<pre><code>Dataset&lt;Row&gt; processByRow1(Dataset&lt;Row&gt; dsRecords, SparkSession sparkSession) {\n        List&lt;MongoRecordSmall&gt; newRows = new ArrayList&lt;MongoRecordSmall&gt;();\n            dsRecords.foreach((ForeachFunction&lt;Row&gt;) record -&gt; {\n            String currentToken = record.getAs(AppConstants.TokenCol);\n            String newToken = mappedTokens.get(currentToken);\n            newRows.add(new MongoRecordSmall(record.getString(0), record.getString(1), newToken, record.getString(3)));\n            logger.error(“Size plus=“+newRows.size());\n        });\n       return sparkSession.createDataFrame(newRows, MongoRecordSmall.class);\n    }\n</code></pre>\n\n<p>This is throwing serliazation error. It seems (<a href=\"https://databricks.gitbooks.io/databricks-spark-knowledge-base/content/troubleshooting/javaionotserializableexception.html\" rel=\"nofollow noreferrer\">https://databricks.gitbooks.io/databricks-spark-knowledge-base/content/troubleshooting/javaionotserializableexception.html</a>) my class where the above logic exists, is being serlalized and sent to worker nodes and failing in doing so.</p>\n"},{"tags":["java","android","kotlin","android-api-levels"],"comments":[{"owner":{"account_id":1642711,"reputation":19832,"user_id":1514861,"accept_rate":86,"display_name":"Ivo"},"score":1,"creation_date":1697795792,"post_id":77329938,"comment_id":136327564,"body_markdown":"I don&#39;t think the code is wrong. It&#39;s just a warning. I think you could annotate the method with `@SuppressWarnings(&quot;deprecation&quot;)` to remove it maybe","body":"I don&#39;t think the code is wrong. It&#39;s just a warning. I think you could annotate the method with <code>@SuppressWarnings(&quot;deprecation&quot;)</code> to remove it maybe"},{"owner":{"account_id":19315649,"reputation":692,"user_id":14120486,"display_name":"ItzDavi"},"score":0,"creation_date":1697795888,"post_id":77329938,"comment_id":136327581,"body_markdown":"Code is ok. Just tested and it&#39;s **not** warning me with deprecation. Can&#39;t reproduce it.","body":"Code is ok. Just tested and it&#39;s <b>not</b> warning me with deprecation. Can&#39;t reproduce it."},{"owner":{"account_id":19315649,"reputation":692,"user_id":14120486,"display_name":"ItzDavi"},"score":0,"creation_date":1697795996,"post_id":77329938,"comment_id":136327612,"body_markdown":"Can you post your whole code ?","body":"Can you post your whole code ?"},{"owner":{"account_id":27817647,"reputation":591,"user_id":21238708,"display_name":"Jatin guglani"},"score":0,"creation_date":1697796432,"post_id":77329938,"comment_id":136327678,"body_markdown":"@ItzDavi, have posted the whole code except the import statements.","body":"@ItzDavi, have posted the whole code except the import statements."},{"owner":{"account_id":19315649,"reputation":692,"user_id":14120486,"display_name":"ItzDavi"},"score":0,"creation_date":1697796614,"post_id":77329938,"comment_id":136327702,"body_markdown":"Please if you can post also your imports, manifest and gradles files it could help.","body":"Please if you can post also your imports, manifest and gradles files it could help."},{"owner":{"account_id":31180,"reputation":29173,"user_id":85421,"display_name":"user85421"},"score":1,"creation_date":1697798760,"post_id":77329938,"comment_id":136328080,"body_markdown":"BTW the compiler will not run your code, that is, it does not matter if there is an `if-else` checking the version - it will always compile both blocks (the `if` one and the `else` one)","body":"BTW the compiler will not run your code, that is, it does not matter if there is an <code>if-else</code> checking the version - it will always compile both blocks (the <code>if</code> one and the <code>else</code> one)"},{"owner":{"account_id":31180,"reputation":29173,"user_id":85421,"display_name":"user85421"},"score":0,"creation_date":1698913690,"post_id":77329938,"comment_id":136465353,"body_markdown":"( unless the condition is a compile time constant )","body":"( unless the condition is a compile time constant )"}],"owner":{"account_id":27817647,"reputation":591,"user_id":21238708,"display_name":"Jatin guglani"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":69,"favorite_count":0,"down_vote_count":1,"up_vote_count":3,"answer_count":0,"score":2,"last_activity_date":1697796319,"creation_date":1697795404,"question_id":77329938,"body_markdown":"After going through some stack overflow questions, I have written the code to get the height and width in Android for _Api level &gt;= 30_ and _Api level &lt; 30_ below :\r\n            \r\n    class MainActivity : AppCompatActivity() {\r\n\r\n            override fun onCreate(savedInstanceState: Bundle?) {\r\n            super.onCreate(savedInstanceState)\r\n\r\n            val backgroundThread = Thread {\r\n\r\n            val metric: WindowMetrics\r\n            val insets: Insets    // An Insets instance holds four integer offsets which describe changes to the four edges of a Rectangle.\r\n            val displayMetrics: DisplayMetrics\r\n            val width: Int\r\n            val height: Int\r\n            val insetsWidth: Int\r\n            val insetsHeight: Int\r\n\r\n            if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.R) {\r\n\r\n                // Code for API level 30 and higher\r\n\r\n                metric = windowManager.currentWindowMetrics\r\n                insets = windowManager.currentWindowMetrics.windowInsets.getInsetsIgnoringVisibility (WindowInsets.Type.navigationBars() or WindowInsets.Type.displayCutout ())\r\n\r\n                insetsWidth = insets.right + insets.left\r\n                insetsHeight = insets.top + insets.bottom\r\n\r\n                Log.d (&quot;tally&quot;, &quot;${insets.right}, ${insets.left}, ${insets.top}, ${insets.bottom}&quot;)\r\n\r\n                width = metric.bounds.width () - insetsWidth\r\n                height = metric.bounds.height () - insetsHeight\r\n\r\n            } else {\r\n\r\n                displayMetrics = DisplayMetrics ()\r\n                windowManager.defaultDisplay.getMetrics (displayMetrics)\r\n\r\n                width = displayMetrics.widthPixels\r\n                height = displayMetrics.heightPixels\r\n            }\r\n        }\r\n        backgroundThread.start()\r\n    }\r\n    \r\n    /**\r\n     * A native method that is implemented by the &#39;dpi_poc&#39; native library,\r\n     * which is packaged with this application.\r\n     */\r\n    external fun stringFromJNI(): String\r\n\r\n    companion object {\r\n        // Used to load the &#39;dpi_poc&#39; library on application startup.\r\n        init {\r\n            System.loadLibrary(&quot;dpi_poc&quot;)\r\n        }\r\n    }\r\n}\r\n\r\nI&#39;m not able to understand why I&#39;m still getting the deprecated warning, as shown in the image below, even after enclosing the code in if else block.\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/1eHH5l.png\r\n\r\nWhat&#39;s wrong in the above code and how to solve this warning and write code to get the height and width in android for both api level &gt;= 30 and api level &lt; 30?","title":"Getting deprecated warning while getting the height, width in android for Api &gt;= 30 and Api &lt; 30 even after enclosing the code in if else block","body":"<p>After going through some stack overflow questions, I have written the code to get the height and width in Android for <em>Api level &gt;= 30</em> and <em>Api level &lt; 30</em> below :</p>\n<pre><code>class MainActivity : AppCompatActivity() {\n\n        override fun onCreate(savedInstanceState: Bundle?) {\n        super.onCreate(savedInstanceState)\n\n        val backgroundThread = Thread {\n\n        val metric: WindowMetrics\n        val insets: Insets    // An Insets instance holds four integer offsets which describe changes to the four edges of a Rectangle.\n        val displayMetrics: DisplayMetrics\n        val width: Int\n        val height: Int\n        val insetsWidth: Int\n        val insetsHeight: Int\n\n        if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.R) {\n\n            // Code for API level 30 and higher\n\n            metric = windowManager.currentWindowMetrics\n            insets = windowManager.currentWindowMetrics.windowInsets.getInsetsIgnoringVisibility (WindowInsets.Type.navigationBars() or WindowInsets.Type.displayCutout ())\n\n            insetsWidth = insets.right + insets.left\n            insetsHeight = insets.top + insets.bottom\n\n            Log.d (&quot;tally&quot;, &quot;${insets.right}, ${insets.left}, ${insets.top}, ${insets.bottom}&quot;)\n\n            width = metric.bounds.width () - insetsWidth\n            height = metric.bounds.height () - insetsHeight\n\n        } else {\n\n            displayMetrics = DisplayMetrics ()\n            windowManager.defaultDisplay.getMetrics (displayMetrics)\n\n            width = displayMetrics.widthPixels\n            height = displayMetrics.heightPixels\n        }\n    }\n    backgroundThread.start()\n}\n\n/**\n * A native method that is implemented by the 'dpi_poc' native library,\n * which is packaged with this application.\n */\nexternal fun stringFromJNI(): String\n\ncompanion object {\n    // Used to load the 'dpi_poc' library on application startup.\n    init {\n        System.loadLibrary(&quot;dpi_poc&quot;)\n    }\n}\n</code></pre>\n<p>}</p>\n<p>I'm not able to understand why I'm still getting the deprecated warning, as shown in the image below, even after enclosing the code in if else block.</p>\n<p><a href=\"https://i.stack.imgur.com/1eHH5l.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/1eHH5l.png\" alt=\"enter image description here\" /></a></p>\n<p>What's wrong in the above code and how to solve this warning and write code to get the height and width in android for both api level &gt;= 30 and api level &lt; 30?</p>\n"},{"tags":["java","spring-boot","spring-security","spring-oauth2"],"answers":[{"tags":[],"owner":{"account_id":24440940,"reputation":3122,"user_id":18364656,"display_name":"Andrei Lisa"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1697441618,"creation_date":1697441618,"answer_id":77300104,"question_id":77299557,"body_markdown":"In current implementation i see some missconfiguration and also some deprecated things and based on it I suggest you to have a look at [Migration Guide][1]\r\n\r\nAlso to get what you want you should replace current one body method to next one:\r\n\r\n      @Bean\r\n      public SecurityFilterChain filterChain(HttpSecurity http) throws Exception {\r\n           http.authorizeHttpRequests(requestMatcherRegistry -&gt; {\r\n                requestMatcherRegistry.requestMatchers(&quot;/RemoteHandlerServices/Handle&quot;)\r\n                    .authenticated();\r\n                requestMatcherRegistry.anyRequest().denyAll();\r\n               });\r\n           return http.build();\r\n        }\r\n\r\nShort summary about it:\r\nEvery request to `/RemoteHandlerServices/Handle` should be `authenticated`\r\nand any others path requests will be denied.\r\n\r\nTo have more details how it work you have to read/check [documentation][2] \r\n\r\n\r\n  [1]: https://docs.spring.io/spring-security/reference/5.8/migration/servlet/config.html\r\n  [2]: https://docs.spring.io/spring-security/reference/5.8/getting-spring-security.html","title":"Spring security failing to block the URLs","body":"<p>In current implementation i see some missconfiguration and also some deprecated things and based on it I suggest you to have a look at <a href=\"https://docs.spring.io/spring-security/reference/5.8/migration/servlet/config.html\" rel=\"nofollow noreferrer\">Migration Guide</a></p>\n<p>Also to get what you want you should replace current one body method to next one:</p>\n<pre><code>  @Bean\n  public SecurityFilterChain filterChain(HttpSecurity http) throws Exception {\n       http.authorizeHttpRequests(requestMatcherRegistry -&gt; {\n            requestMatcherRegistry.requestMatchers(&quot;/RemoteHandlerServices/Handle&quot;)\n                .authenticated();\n            requestMatcherRegistry.anyRequest().denyAll();\n           });\n       return http.build();\n    }\n</code></pre>\n<p>Short summary about it:\nEvery request to <code>/RemoteHandlerServices/Handle</code> should be <code>authenticated</code>\nand any others path requests will be denied.</p>\n<p>To have more details how it work you have to read/check <a href=\"https://docs.spring.io/spring-security/reference/5.8/getting-spring-security.html\" rel=\"nofollow noreferrer\">documentation</a></p>\n"},{"tags":[],"owner":{"account_id":29313159,"reputation":193,"user_id":22458461,"display_name":"fforfabio"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1697796287,"creation_date":1697442992,"answer_id":77300266,"question_id":77299557,"body_markdown":"You can try to substitute your _filterChain_ with this one:\r\n\r\n    @Bean\r\n    public SecurityFilterChain filterChain(HttpSecurity http) throws Exception {\r\n\t    http\r\n\t\t    .authorizeHttpRequests(url -&gt; url\r\n\t\t\t    .antMatchers(&quot;/RemoteHandlerServices/Handle&quot;).authenticated()\r\n\t\t\t    .antMatchers(&quot;/OtherHandlerServices/Test&quot;).denyAll()\r\n\t\t\t    .anyRequest().authenticated());\r\n\treturn http.build();\r\n\r\n**Pay attention** that from Spring Security 5.8 the _antMatchers_ (with some others) method has been deprecated and you should use [requestMatchers](https://docs.spring.io/spring-security/reference/5.8/migration/servlet/config.html#use-new-requestmatchers). From Spring Security 6 they have been removed.\r\n\r\nRemember that, by default, the first matching filter is the one that is applied to the url, so the next ones are discard.\r\n\r\nHere are some useful links: [security filters](https://docs.spring.io/spring-security/reference/servlet/architecture.html#servlet-security-filters), [httpsecurity](https://docs.spring.io/spring-security/reference/servlet/configuration/java.html#jc-httpsecurity), [java config spring security](https://www.baeldung.com/java-config-spring-security)","title":"Spring security failing to block the URLs","body":"<p>You can try to substitute your <em>filterChain</em> with this one:</p>\n<pre><code>@Bean\npublic SecurityFilterChain filterChain(HttpSecurity http) throws Exception {\n    http\n        .authorizeHttpRequests(url -&gt; url\n            .antMatchers(&quot;/RemoteHandlerServices/Handle&quot;).authenticated()\n            .antMatchers(&quot;/OtherHandlerServices/Test&quot;).denyAll()\n            .anyRequest().authenticated());\nreturn http.build();\n</code></pre>\n<p><strong>Pay attention</strong> that from Spring Security 5.8 the <em>antMatchers</em> (with some others) method has been deprecated and you should use <a href=\"https://docs.spring.io/spring-security/reference/5.8/migration/servlet/config.html#use-new-requestmatchers\" rel=\"nofollow noreferrer\">requestMatchers</a>. From Spring Security 6 they have been removed.</p>\n<p>Remember that, by default, the first matching filter is the one that is applied to the url, so the next ones are discard.</p>\n<p>Here are some useful links: <a href=\"https://docs.spring.io/spring-security/reference/servlet/architecture.html#servlet-security-filters\" rel=\"nofollow noreferrer\">security filters</a>, <a href=\"https://docs.spring.io/spring-security/reference/servlet/configuration/java.html#jc-httpsecurity\" rel=\"nofollow noreferrer\">httpsecurity</a>, <a href=\"https://www.baeldung.com/java-config-spring-security\" rel=\"nofollow noreferrer\">java config spring security</a></p>\n"}],"owner":{"account_id":9117693,"reputation":48,"user_id":6784294,"display_name":"PDS"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":98,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":77300266,"answer_count":2,"score":0,"last_activity_date":1697796287,"creation_date":1697433919,"question_id":77299557,"body_markdown":"I have the following scenario where I have to allow only a particular URL and deny others. But I am not sure why its allowing both URLs\r\n\r\n    @Bean\r\n        public SecurityFilterChain filterChain(HttpSecurity http) throws Exception {\r\n            try{\r\n                return http\r\n                        .requestMatcher(new AntPathRequestMatcher(&quot;/RemoteHandlerServices/Handle&quot;))\r\n                            .authorizeHttpRequests(r -&gt; r\r\n                                .antMatchers(&quot;/RemoteHandlerServices/Handle&quot;).authenticated())\r\n                        .requestMatcher(new AntPathRequestMatcher(&quot;/OtherHandlerServices/Test&quot;))\r\n                            .authorizeHttpRequests(r -&gt; r\r\n                                .antMatchers(&quot;/OtherHandlerServices/Test&quot;).denyAll()\r\n                                .anyRequest().denyAll()\r\n                        )\r\n                        .build();\r\n\r\n        } catch(Exception e){\r\n                throw new RuntimeException(&quot;Authentication is failed&quot;);\r\n            }\r\n        }\r\n\r\nCould someone explain me why this is happening?","title":"Spring security failing to block the URLs","body":"<p>I have the following scenario where I have to allow only a particular URL and deny others. But I am not sure why its allowing both URLs</p>\n<pre><code>@Bean\n    public SecurityFilterChain filterChain(HttpSecurity http) throws Exception {\n        try{\n            return http\n                    .requestMatcher(new AntPathRequestMatcher(&quot;/RemoteHandlerServices/Handle&quot;))\n                        .authorizeHttpRequests(r -&gt; r\n                            .antMatchers(&quot;/RemoteHandlerServices/Handle&quot;).authenticated())\n                    .requestMatcher(new AntPathRequestMatcher(&quot;/OtherHandlerServices/Test&quot;))\n                        .authorizeHttpRequests(r -&gt; r\n                            .antMatchers(&quot;/OtherHandlerServices/Test&quot;).denyAll()\n                            .anyRequest().denyAll()\n                    )\n                    .build();\n\n    } catch(Exception e){\n            throw new RuntimeException(&quot;Authentication is failed&quot;);\n        }\n    }\n</code></pre>\n<p>Could someone explain me why this is happening?</p>\n"},{"tags":["java","maven","javafx","pom.xml","module-info"],"comments":[{"owner":{"account_id":5640884,"reputation":1954,"user_id":4465539,"accept_rate":33,"display_name":"deduper"},"score":0,"creation_date":1601771383,"post_id":64189054,"comment_id":113509232,"body_markdown":"I didn&#39;t see your „*I&#39;m just trying to **run** the javafx application*“ at first. In my haste, my original solution mistakenly assumed you were reporting a compilation error. So it proposed a configuration for the maven-compiler-plugin. I&#39;ve corrected the solution now with a proposed configuration for the javafx-maven-plugin.","body":"I didn&#39;t see your „<i>I&#39;m just trying to <b>run</b> the javafx application</i>“ at first. In my haste, my original solution mistakenly assumed you were reporting a compilation error. So it proposed a configuration for the maven-compiler-plugin. I&#39;ve corrected the solution now with a proposed configuration for the javafx-maven-plugin."}],"answers":[{"tags":[],"owner":{"account_id":5640884,"reputation":1954,"user_id":4465539,"accept_rate":33,"display_name":"deduper"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1601772218,"creation_date":1601768541,"answer_id":64189954,"question_id":64189054,"body_markdown":"***TL;DR*** — The two modules have a [*split package*](http://mail.openjdk.java.net/pipermail/jigsaw-dev/2016-November/009964.html) in common. And JPMS forbids split packages.\r\n\r\n\r\n----\r\n\r\n***The long-winded version***\r\n\r\nThe ***first sentence*** of [*this 2010 blog*](https://nirmalsasidharan.wordpress.com/2010/09/02/split-packages-an-osgi-nightmare/) gives a summary of what a split package is…&lt;sup&gt;*1*&lt;/sup&gt;\r\n\r\n&gt;&gt; „*…A “split package” is a pretty old Java term where you have packages in different libraries with the same name providing related (or sometimes unrelated functionality)…*“\r\n\r\nKeep in mind that was written in 2010 though; before JPMS. So the blog&#39;s claim of „*without any problem at both compile and runtime*“ in the *second sentence* is out-of-date; for the modulepath in any case.\r\n\r\nFor a way more detailed, more up-to-date explanation, watch this [*Project Jigsaw: Under the Hood video*](https://www.youtube.com/watch?v=Vxfd3ehdAZc) from JavaOne 2016.&lt;sup&gt;*2*&lt;/sup&gt;\r\n\r\n&gt; „*…why the error is referencing the `sisu.inject.bean` and `aopalliance` modules…*“\r\n\r\nBecause your project has a module descriptor (*module-info.java*) Maven has  put those dependencies — *which I can see you declared in your pom* — on the modulepath.\r\n\r\n&gt; „*…However I have no idea why I&#39;m getting this error…*“\r\n\r\nBecause JPMS abhors split packages…&lt;sup&gt;*3*&lt;/sup&gt;\r\n\r\n&gt;&gt; …\r\n&gt;&gt;\r\n&gt;&gt; „*There are two issues with split packages*,\r\n&gt;&gt; - *if you have the same class in each part of the package, the behavior of your \r\n&gt;&gt; [program] depend on the order in the classpath,*\r\n&gt;&gt;  *i&#39;ve experienced this kind of bugs with two different libraries requiring \r\n&gt;&gt; different version of ASM, at runtime, a class of the older version was calling a\r\n&gt;&gt; class of the newer version :(*\r\n&gt;&gt; - *security, if you allow split packages, you allow anybody to insert any classes in any packages.*\r\n&gt;&gt;\r\n&gt;&gt; …\r\n\r\n\r\n***The solution***\r\n\r\n```xml\r\n…\r\n&lt;plugin&gt;\r\n    &lt;groupId&gt;org.openjfx&lt;/groupId&gt;\r\n    &lt;artifactId&gt;javafx-maven-plugin&lt;/artifactId&gt;\r\n    &lt;version&gt;0.0.4&lt;/version&gt;\r\n\t&lt;configuration&gt;\r\n\t\t&lt;options&gt;\r\n\t\t\t&lt;option&gt;--patch-module&lt;/option&gt;\r\n\t\t\t&lt;option&gt;org.sonatype.sisu=${env.M2_REPO}/aopalliance/aopalliance/1.0/aopalliance-1.0jar&lt;/option&gt;\r\n\t\t&lt;/options&gt;\r\n        &lt;mainClass&gt;ui.java.App&lt;/mainClass&gt;\r\n\t&lt;/configuration&gt;\r\n&lt;/plugin&gt;\r\n…\r\n```\r\n\r\n\r\n&lt;br /&gt;\r\n&lt;br /&gt;\r\n&lt;br /&gt;\r\n&lt;br /&gt;\r\n&lt;br /&gt;\r\n\r\n----\r\n\r\n&lt;sup&gt;&lt;sup&gt;*1*&lt;/sup&gt;&lt;/sup&gt;&amp;nbsp;&lt;sup&gt;*That&amp;nbsp;blog&amp;nbsp;talks&amp;nbsp;about&amp;nbsp;OSGi.&amp;nbsp;But&amp;nbsp;the&amp;nbsp;core&amp;nbsp;split&amp;nbsp;package&amp;nbsp;**definition**&amp;nbsp;applies&amp;nbsp;to&amp;nbsp;JPMS&amp;nbsp;too.*&lt;/sup&gt;&lt;br /&gt;\r\n&lt;sup&gt;&lt;sup&gt;*2*&lt;/sup&gt;&lt;/sup&gt;&amp;nbsp;&lt;sup&gt;[*Project&amp;nbsp;Jigsaw:&amp;nbsp;Under&amp;nbsp;The&amp;nbsp;Hood&amp;nbsp;—&amp;nbsp;accompanying&amp;nbsp;slides*](http://openjdk.java.net/projects/jigsaw/talks/#j1-2016).&lt;/sup&gt;&lt;br /&gt;\r\n&lt;sup&gt;&lt;sup&gt;*3*&lt;/sup&gt;&lt;/sup&gt;&amp;nbsp;&lt;sup&gt;R&#233;mi&amp;nbsp;*Forax&amp;nbsp;—&amp;nbsp;The&amp;nbsp;split&amp;nbsp;package&amp;nbsp;problem&amp;nbsp;—&amp;nbsp;Jigsaw&amp;nbsp;Dev&amp;nbsp;Mailing&amp;nbsp;List&amp;nbsp;—&amp;nbsp;November&amp;nbsp;2016.*&lt;/sup&gt;\r\n","title":"Running javafx application - Error occurred during initialization of boot layer: java.lang.module.ResolutionException","body":"<p><em><strong>TL;DR</strong></em> — The two modules have a <a href=\"http://mail.openjdk.java.net/pipermail/jigsaw-dev/2016-November/009964.html\" rel=\"nofollow noreferrer\"><em>split package</em></a> in common. And JPMS forbids split packages.</p>\n<hr />\n<p><em><strong>The long-winded version</strong></em></p>\n<p>The <em><strong>first sentence</strong></em> of <a href=\"https://nirmalsasidharan.wordpress.com/2010/09/02/split-packages-an-osgi-nightmare/\" rel=\"nofollow noreferrer\"><em>this 2010 blog</em></a> gives a summary of what a split package is…<sup><em>1</em></sup></p>\n<blockquote>\n<blockquote>\n<p>„<em>…A “split package” is a pretty old Java term where you have packages in different libraries with the same name providing related (or sometimes unrelated functionality)…</em>“</p>\n</blockquote>\n</blockquote>\n<p>Keep in mind that was written in 2010 though; before JPMS. So the blog's claim of „<em>without any problem at both compile and runtime</em>“ in the <em>second sentence</em> is out-of-date; for the modulepath in any case.</p>\n<p>For a way more detailed, more up-to-date explanation, watch this <a href=\"https://www.youtube.com/watch?v=Vxfd3ehdAZc\" rel=\"nofollow noreferrer\"><em>Project Jigsaw: Under the Hood video</em></a> from JavaOne 2016.<sup><em>2</em></sup></p>\n<blockquote>\n<p>„<em>…why the error is referencing the <code>sisu.inject.bean</code> and <code>aopalliance</code> modules…</em>“</p>\n</blockquote>\n<p>Because your project has a module descriptor (<em>module-info.java</em>) Maven has  put those dependencies — <em>which I can see you declared in your pom</em> — on the modulepath.</p>\n<blockquote>\n<p>„<em>…However I have no idea why I'm getting this error…</em>“</p>\n</blockquote>\n<p>Because JPMS abhors split packages…<sup><em>3</em></sup></p>\n<blockquote>\n<blockquote>\n<p>…</p>\n<p>„<em>There are two issues with split packages</em>,</p>\n<ul>\n<li><em>if you have the same class in each part of the package, the behavior of your\n[program] depend on the order in the classpath,</em>\n<em>i've experienced this kind of bugs with two different libraries requiring\ndifferent version of ASM, at runtime, a class of the older version was calling a\nclass of the newer version :(</em></li>\n<li><em>security, if you allow split packages, you allow anybody to insert any classes in any packages.</em></li>\n</ul>\n<p>…</p>\n</blockquote>\n</blockquote>\n<p><em><strong>The solution</strong></em></p>\n<pre class=\"lang-xml prettyprint-override\"><code>…\n&lt;plugin&gt;\n    &lt;groupId&gt;org.openjfx&lt;/groupId&gt;\n    &lt;artifactId&gt;javafx-maven-plugin&lt;/artifactId&gt;\n    &lt;version&gt;0.0.4&lt;/version&gt;\n    &lt;configuration&gt;\n        &lt;options&gt;\n            &lt;option&gt;--patch-module&lt;/option&gt;\n            &lt;option&gt;org.sonatype.sisu=${env.M2_REPO}/aopalliance/aopalliance/1.0/aopalliance-1.0jar&lt;/option&gt;\n        &lt;/options&gt;\n        &lt;mainClass&gt;ui.java.App&lt;/mainClass&gt;\n    &lt;/configuration&gt;\n&lt;/plugin&gt;\n…\n</code></pre>\n<br />\n<br />\n<br />\n<br />\n<br />\n<hr />\n<p><sup><sup><em>1</em></sup></sup> <sup><em>That blog talks about OSGi. But the core split package <strong>definition</strong> applies to JPMS too.</em></sup><br />\n<sup><sup><em>2</em></sup></sup> <sup><a href=\"http://openjdk.java.net/projects/jigsaw/talks/#j1-2016\" rel=\"nofollow noreferrer\"><em>Project Jigsaw: Under The Hood — accompanying slides</em></a>.</sup><br />\n<sup><sup><em>3</em></sup></sup> <sup>Rémi <em>Forax — The split package problem — Jigsaw Dev Mailing List — November 2016.</em></sup></p>\n"},{"tags":[],"owner":{"account_id":10617054,"reputation":51,"user_id":10622384,"display_name":"slaszu"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1697796163,"creation_date":1697796163,"answer_id":77330036,"question_id":64189054,"body_markdown":"I found another solution.  When you use module-info.java file and surefire plugin then the best solution is to use &quot;useModulePath&quot; option \r\n\r\n    &lt;plugin&gt;\r\n        &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n        &lt;artifactId&gt;maven-surefire-plugin&lt;/artifactId&gt;\r\n        &lt;configuration&gt;\r\n            &lt;useModulePath&gt;false&lt;/useModulePath&gt;\r\n        &lt;/configuration&gt;\r\n    &lt;/plugin&gt;\r\n\r\nSee here https://stackoverflow.com/questions/53161703/get-maven-surefire-to-run-on-classpath-with-module-info-java-file-present","title":"Running javafx application - Error occurred during initialization of boot layer: java.lang.module.ResolutionException","body":"<p>I found another solution.  When you use module-info.java file and surefire plugin then the best solution is to use &quot;useModulePath&quot; option</p>\n<pre><code>&lt;plugin&gt;\n    &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n    &lt;artifactId&gt;maven-surefire-plugin&lt;/artifactId&gt;\n    &lt;configuration&gt;\n        &lt;useModulePath&gt;false&lt;/useModulePath&gt;\n    &lt;/configuration&gt;\n&lt;/plugin&gt;\n</code></pre>\n<p>See here <a href=\"https://stackoverflow.com/questions/53161703/get-maven-surefire-to-run-on-classpath-with-module-info-java-file-present\">Get maven surefire to run on classpath with module-info.java file present</a></p>\n"}],"owner":{"account_id":18126016,"reputation":41,"user_id":13181536,"display_name":"Sigbj&#248;rn Berdal"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1390,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":2,"score":1,"last_activity_date":1697796163,"creation_date":1601759559,"question_id":64189054,"body_markdown":"As the title says, I&#39;m just trying to run the javafx application. However I have no idea why I&#39;m getting this error, and I don&#39;t know why the error is referencing the `sisu.inject.bean` and `aopalliance` modules. I don&#39;t know wether the module-info.java or the pom.xml is causing the error. Thanks in advance for any anwser.\r\n\r\nmodule-info.java:  \r\n```\r\nmodule ui {\r\n    requires javafx.fxml;\r\n    requires transitive javafx.graphics;\r\n    requires javafx.controls;\r\n    requires org.testfx.junit5;\r\n    requires junit;\r\n    requires core;\r\n    exports ui.java;\r\n    exports test.ui to junit;\r\n}\r\n```\r\n\r\npom.xml:  \r\n```\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n\r\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot;\r\n         xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n         xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\r\n\r\n    &lt;parent&gt;\r\n        &lt;groupId&gt;it1901.nachwithme&lt;/groupId&gt;\r\n        &lt;artifactId&gt;parent&lt;/artifactId&gt;\r\n        &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\r\n    &lt;/parent&gt;\r\n\r\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n    &lt;artifactId&gt;ui&lt;/artifactId&gt;\r\n\r\n    &lt;dependencies&gt;\r\n        &lt;!-- UI imports core as a dependency --&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;it1901.nachwithme&lt;/groupId&gt;\r\n            &lt;artifactId&gt;core&lt;/artifactId&gt;\r\n            &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;!-- Dependencies for javafx --&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.openjfx&lt;/groupId&gt;\r\n            &lt;artifactId&gt;javafx-fxml&lt;/artifactId&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.testfx&lt;/groupId&gt;\r\n            &lt;artifactId&gt;testfx-core&lt;/artifactId&gt;\r\n            &lt;exclusions&gt;\r\n                &lt;exclusion&gt;\r\n                    &lt;!-- https://mvnrepository.com/artifact/org.sonatype.sisu/sisu-inject-bean --&gt;\r\n                    &lt;groupId&gt;org.sonatype.sisu&lt;/groupId&gt;\r\n                    &lt;artifactId&gt;sisu-inject-bean&lt;/artifactId&gt;\r\n                &lt;/exclusion&gt;\r\n                &lt;exclusion&gt;\r\n                    &lt;!-- https://mvnrepository.com/artifact/aopalliance/aopalliance --&gt;\r\n                    &lt;groupId&gt;aopalliance&lt;/groupId&gt;\r\n                    &lt;artifactId&gt;aopalliance&lt;/artifactId&gt;\r\n                &lt;/exclusion&gt;\r\n            &lt;/exclusions&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;!-- Dependencies for javafx --&gt;\r\n\r\n        &lt;!-- Dependencies for unit-testing --&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.junit.jupiter&lt;/groupId&gt;\r\n            &lt;artifactId&gt;junit-jupiter-api&lt;/artifactId&gt;\r\n            &lt;scope&gt;test&lt;/scope&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.junit.jupiter&lt;/groupId&gt;\r\n            &lt;artifactId&gt;junit-jupiter-engine&lt;/artifactId&gt;\r\n            &lt;scope&gt;test&lt;/scope&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.openjfx&lt;/groupId&gt;\r\n            &lt;artifactId&gt;javafx-graphics&lt;/artifactId&gt;\r\n            &lt;version&gt;16-ea+2&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;junit&lt;/groupId&gt;\r\n            &lt;artifactId&gt;junit&lt;/artifactId&gt;\r\n            &lt;scope&gt;compile&lt;/scope&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.testfx&lt;/groupId&gt;\r\n            &lt;artifactId&gt;testfx-junit5&lt;/artifactId&gt;\r\n            &lt;scope&gt;compile&lt;/scope&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;!-- Dependencies for unit-testing --&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.testng&lt;/groupId&gt;\r\n            &lt;artifactId&gt;testng&lt;/artifactId&gt;\r\n        &lt;/dependency&gt;\r\n    &lt;/dependencies&gt;\r\n\r\n    &lt;build&gt;\r\n        &lt;plugins&gt;\r\n            &lt;plugin&gt;\r\n                &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\r\n            &lt;/plugin&gt;\r\n            &lt;plugin&gt;\r\n                &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n                &lt;artifactId&gt;maven-surefire-plugin&lt;/artifactId&gt;\r\n            &lt;/plugin&gt;\r\n            &lt;plugin&gt;\r\n                &lt;groupId&gt;org.jacoco&lt;/groupId&gt;\r\n                &lt;artifactId&gt;jacoco-maven-plugin&lt;/artifactId&gt;\r\n                &lt;executions&gt;\r\n                    &lt;execution&gt;\r\n                        &lt;goals&gt;\r\n                            &lt;goal&gt;prepare-agent&lt;/goal&gt;\r\n                        &lt;/goals&gt;\r\n                    &lt;/execution&gt;\r\n                    &lt;execution&gt;\r\n                        &lt;id&gt;report&lt;/id&gt;\r\n                        &lt;phase&gt;test&lt;/phase&gt;\r\n                        &lt;goals&gt;\r\n                            &lt;goal&gt;report&lt;/goal&gt;\r\n                        &lt;/goals&gt;\r\n                    &lt;/execution&gt;\r\n                &lt;/executions&gt;\r\n            &lt;/plugin&gt;\r\n            &lt;plugin&gt;\r\n                &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n                &lt;artifactId&gt;maven-checkstyle-plugin&lt;/artifactId&gt;\r\n            &lt;/plugin&gt;\r\n            &lt;plugin&gt;\r\n                &lt;groupId&gt;com.github.spotbugs&lt;/groupId&gt;\r\n                &lt;artifactId&gt;spotbugs-maven-plugin&lt;/artifactId&gt;\r\n            &lt;/plugin&gt;\r\n            &lt;plugin&gt;\r\n                &lt;groupId&gt;org.openjfx&lt;/groupId&gt;\r\n                &lt;artifactId&gt;javafx-maven-plugin&lt;/artifactId&gt;\r\n                &lt;configuration&gt;\r\n                    &lt;options&gt;\r\n                        &lt;!-- &lt;option&gt;dash dash enable-preview&lt;/option&gt; --&gt;\r\n                    &lt;/options&gt;\r\n                    &lt;mainClass&gt;ui.java.App&lt;/mainClass&gt;\r\n                &lt;/configuration&gt;\r\n            &lt;/plugin&gt;\r\n        &lt;/plugins&gt;\r\n        &lt;sourceDirectory&gt;src&lt;/sourceDirectory&gt;\r\n        &lt;resources&gt;\r\n            &lt;resource&gt;\r\n                &lt;directory&gt;src&lt;/directory&gt;\r\n                &lt;includes&gt;\r\n                    &lt;include&gt;**/*.fxml&lt;/include&gt;\r\n                    &lt;include&gt;**/*.png&lt;/include&gt;\r\n                &lt;/includes&gt;\r\n            &lt;/resource&gt;\r\n        &lt;/resources&gt;\r\n        &lt;testSourceDirectory&gt;src/test&lt;/testSourceDirectory&gt;\r\n        &lt;testResources&gt;\r\n            &lt;testResource&gt;\r\n                &lt;directory&gt;test&lt;/directory&gt;\r\n                &lt;includes&gt;\r\n                    &lt;include&gt;**/*.fxml&lt;/include&gt;\r\n                    &lt;include&gt;**/*.png&lt;/include&gt;\r\n                &lt;/includes&gt;\r\n            &lt;/testResource&gt;\r\n        &lt;/testResources&gt;\r\n    &lt;/build&gt;\r\n&lt;/project&gt;\r\n```\r\n\r\n\r\nError:  \r\n```\r\nError occurred during initialization of boot layer  \r\njava.lang.module.ResolutionException: Modules sisu.inject.bean and aopalliance export package org.aopalliance.aop to module org.testfx\r\n\r\nProcess finished with exit code 1\r\n```","title":"Running javafx application - Error occurred during initialization of boot layer: java.lang.module.ResolutionException","body":"<p>As the title says, I'm just trying to run the javafx application. However I have no idea why I'm getting this error, and I don't know why the error is referencing the <code>sisu.inject.bean</code> and <code>aopalliance</code> modules. I don't know wether the module-info.java or the pom.xml is causing the error. Thanks in advance for any anwser.</p>\n<p>module-info.java:</p>\n<pre><code>module ui {\n    requires javafx.fxml;\n    requires transitive javafx.graphics;\n    requires javafx.controls;\n    requires org.testfx.junit5;\n    requires junit;\n    requires core;\n    exports ui.java;\n    exports test.ui to junit;\n}\n</code></pre>\n<p>pom.xml:</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot;\n         xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\n         xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\n\n    &lt;parent&gt;\n        &lt;groupId&gt;it1901.nachwithme&lt;/groupId&gt;\n        &lt;artifactId&gt;parent&lt;/artifactId&gt;\n        &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\n    &lt;/parent&gt;\n\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n    &lt;artifactId&gt;ui&lt;/artifactId&gt;\n\n    &lt;dependencies&gt;\n        &lt;!-- UI imports core as a dependency --&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;it1901.nachwithme&lt;/groupId&gt;\n            &lt;artifactId&gt;core&lt;/artifactId&gt;\n            &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;!-- Dependencies for javafx --&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.openjfx&lt;/groupId&gt;\n            &lt;artifactId&gt;javafx-fxml&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.testfx&lt;/groupId&gt;\n            &lt;artifactId&gt;testfx-core&lt;/artifactId&gt;\n            &lt;exclusions&gt;\n                &lt;exclusion&gt;\n                    &lt;!-- https://mvnrepository.com/artifact/org.sonatype.sisu/sisu-inject-bean --&gt;\n                    &lt;groupId&gt;org.sonatype.sisu&lt;/groupId&gt;\n                    &lt;artifactId&gt;sisu-inject-bean&lt;/artifactId&gt;\n                &lt;/exclusion&gt;\n                &lt;exclusion&gt;\n                    &lt;!-- https://mvnrepository.com/artifact/aopalliance/aopalliance --&gt;\n                    &lt;groupId&gt;aopalliance&lt;/groupId&gt;\n                    &lt;artifactId&gt;aopalliance&lt;/artifactId&gt;\n                &lt;/exclusion&gt;\n            &lt;/exclusions&gt;\n        &lt;/dependency&gt;\n        &lt;!-- Dependencies for javafx --&gt;\n\n        &lt;!-- Dependencies for unit-testing --&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.junit.jupiter&lt;/groupId&gt;\n            &lt;artifactId&gt;junit-jupiter-api&lt;/artifactId&gt;\n            &lt;scope&gt;test&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.junit.jupiter&lt;/groupId&gt;\n            &lt;artifactId&gt;junit-jupiter-engine&lt;/artifactId&gt;\n            &lt;scope&gt;test&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.openjfx&lt;/groupId&gt;\n            &lt;artifactId&gt;javafx-graphics&lt;/artifactId&gt;\n            &lt;version&gt;16-ea+2&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;junit&lt;/groupId&gt;\n            &lt;artifactId&gt;junit&lt;/artifactId&gt;\n            &lt;scope&gt;compile&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.testfx&lt;/groupId&gt;\n            &lt;artifactId&gt;testfx-junit5&lt;/artifactId&gt;\n            &lt;scope&gt;compile&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;!-- Dependencies for unit-testing --&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.testng&lt;/groupId&gt;\n            &lt;artifactId&gt;testng&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n    &lt;/dependencies&gt;\n\n    &lt;build&gt;\n        &lt;plugins&gt;\n            &lt;plugin&gt;\n                &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\n            &lt;/plugin&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n                &lt;artifactId&gt;maven-surefire-plugin&lt;/artifactId&gt;\n            &lt;/plugin&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.jacoco&lt;/groupId&gt;\n                &lt;artifactId&gt;jacoco-maven-plugin&lt;/artifactId&gt;\n                &lt;executions&gt;\n                    &lt;execution&gt;\n                        &lt;goals&gt;\n                            &lt;goal&gt;prepare-agent&lt;/goal&gt;\n                        &lt;/goals&gt;\n                    &lt;/execution&gt;\n                    &lt;execution&gt;\n                        &lt;id&gt;report&lt;/id&gt;\n                        &lt;phase&gt;test&lt;/phase&gt;\n                        &lt;goals&gt;\n                            &lt;goal&gt;report&lt;/goal&gt;\n                        &lt;/goals&gt;\n                    &lt;/execution&gt;\n                &lt;/executions&gt;\n            &lt;/plugin&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n                &lt;artifactId&gt;maven-checkstyle-plugin&lt;/artifactId&gt;\n            &lt;/plugin&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;com.github.spotbugs&lt;/groupId&gt;\n                &lt;artifactId&gt;spotbugs-maven-plugin&lt;/artifactId&gt;\n            &lt;/plugin&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.openjfx&lt;/groupId&gt;\n                &lt;artifactId&gt;javafx-maven-plugin&lt;/artifactId&gt;\n                &lt;configuration&gt;\n                    &lt;options&gt;\n                        &lt;!-- &lt;option&gt;dash dash enable-preview&lt;/option&gt; --&gt;\n                    &lt;/options&gt;\n                    &lt;mainClass&gt;ui.java.App&lt;/mainClass&gt;\n                &lt;/configuration&gt;\n            &lt;/plugin&gt;\n        &lt;/plugins&gt;\n        &lt;sourceDirectory&gt;src&lt;/sourceDirectory&gt;\n        &lt;resources&gt;\n            &lt;resource&gt;\n                &lt;directory&gt;src&lt;/directory&gt;\n                &lt;includes&gt;\n                    &lt;include&gt;**/*.fxml&lt;/include&gt;\n                    &lt;include&gt;**/*.png&lt;/include&gt;\n                &lt;/includes&gt;\n            &lt;/resource&gt;\n        &lt;/resources&gt;\n        &lt;testSourceDirectory&gt;src/test&lt;/testSourceDirectory&gt;\n        &lt;testResources&gt;\n            &lt;testResource&gt;\n                &lt;directory&gt;test&lt;/directory&gt;\n                &lt;includes&gt;\n                    &lt;include&gt;**/*.fxml&lt;/include&gt;\n                    &lt;include&gt;**/*.png&lt;/include&gt;\n                &lt;/includes&gt;\n            &lt;/testResource&gt;\n        &lt;/testResources&gt;\n    &lt;/build&gt;\n&lt;/project&gt;\n</code></pre>\n<p>Error:</p>\n<pre><code>Error occurred during initialization of boot layer  \njava.lang.module.ResolutionException: Modules sisu.inject.bean and aopalliance export package org.aopalliance.aop to module org.testfx\n\nProcess finished with exit code 1\n</code></pre>\n"},{"tags":["java","spring","spring-boot","spring-security","cors"],"comments":[{"owner":{"account_id":308139,"reputation":8189,"user_id":619830,"accept_rate":75,"display_name":"ch4mp"},"score":1,"creation_date":1697738315,"post_id":77325532,"comment_id":136320848,"body_markdown":"I believe I already wrote that to you, but your **Vue.js application should not be an OAuth2 client**. Such clients are &quot;public&quot; clients and [this is now discouraged](https://github.com/spring-projects/spring-authorization-server/issues/297#issue-896744390). Your Vue app should be secured with sessions on a BFF with OAuth2 login and something to replace session cookie with an authorization header containing an access token as done in [this tutorial](https://github.com/ch4mpy/spring-addons/tree/master/samples/tutorials/bff)","body":"I believe I already wrote that to you, but your <b>Vue.js application should not be an OAuth2 client</b>. Such clients are &quot;public&quot; clients and <a href=\"https://github.com/spring-projects/spring-authorization-server/issues/297#issue-896744390\" rel=\"nofollow noreferrer\">this is now discouraged</a>. Your Vue app should be secured with sessions on a BFF with OAuth2 login and something to replace session cookie with an authorization header containing an access token as done in <a href=\"https://github.com/ch4mpy/spring-addons/tree/master/samples/tutorials/bff\" rel=\"nofollow noreferrer\">this tutorial</a>"},{"owner":{"account_id":308139,"reputation":8189,"user_id":619830,"accept_rate":75,"display_name":"ch4mp"},"score":1,"creation_date":1697738529,"post_id":77325532,"comment_id":136320896,"body_markdown":"If you use spring-cloud-gateway as BFF, as done in the tutorial just linked, and serve the authorization server, the Vue.js assets and REST services through the gateway, then all requests will have the same origin (the gateway). You&#39;d need CORS config only for what is not served through the gateway (like the authorization server if you want to share it with another app for SSO)","body":"If you use spring-cloud-gateway as BFF, as done in the tutorial just linked, and serve the authorization server, the Vue.js assets and REST services through the gateway, then all requests will have the same origin (the gateway). You&#39;d need CORS config only for what is not served through the gateway (like the authorization server if you want to share it with another app for SSO)"},{"owner":{"account_id":20251935,"reputation":6409,"user_id":14852784,"display_name":"J. M. Arnold"},"score":0,"creation_date":1697792208,"post_id":77325532,"comment_id":136326919,"body_markdown":"@ch4mp May you write this as an answer and I&#39;ll gladly accept this. Please - as this has mroe of a CORS-relevancy - go more in-depth regarding your last statement &quot;You&#39;d need CORS config only for what is not served through the gateway (like the authorization server if you want to share it with another app for SSO)&quot;","body":"@ch4mp May you write this as an answer and I&#39;ll gladly accept this. Please - as this has mroe of a CORS-relevancy - go more in-depth regarding your last statement &quot;You&#39;d need CORS config only for what is not served through the gateway (like the authorization server if you want to share it with another app for SSO)&quot;"}],"answers":[{"tags":[],"owner":{"account_id":308139,"reputation":8189,"user_id":619830,"accept_rate":75,"display_name":"ch4mp"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1697796121,"creation_date":1697796121,"answer_id":77330035,"question_id":77325532,"body_markdown":"**S**ingle **P**age **A**pplications (Angular, React, Vue.js, etc.), as well as mobile applications, should not be OAuth2 client. Such clients are &quot;public&quot; clients and [this is now discouraged][1].\r\n\r\nYour Vue app should be secured with sessions on a BFF with OAuth2 login and something to replace session cookie with an authorization header containing an access token. The easiest way to achieve that is probably using `spring-cloud-gateway` with the `TokenRelay` filter and `spring-boot-starter-oauth2-client` with `oauth2Login` as I do in [this tutorial][2]. The frontend in this tutorial is using Angular, but login and logout are plain Typsecript code and is pretty easy to port to React or Vue.\r\n\r\nIn addition the securing the frontend with sessions, the gateway can remove the need for most of CORS configuration: from the browser point of view, all requests routed through the gateway have the same origin (the gateway).\r\n\r\nIn the tutorial linked:\r\n- all requests to the gateway (lets say https://localhost:**8080**) with a path starting with `/ui/` are routed to the what serves the UI assets (something like https://localhost:**4200**/ui/ in the case of an Angular dev server, but could be a Vue dev server, a NGINX instance containing anything, or whatever)\r\n- all requests tho the gateway with a path starting with `/bff/v1/` are routed to a resource server (something like https://localhost:**7084**/)\r\n\r\nIn the configuration above, if the user points its browser to https://localhost:**8080**/ui/ and if the SPA is configured to send REST requests to https://localhost:**8080**/bff/v1/**, then, from the browser perspective, both the requests to the UI and to the API have https://localhost:**8080** as origin.\r\n\r\nStill in this tutorial, the authorization server is not routed through the gateway and needs some CORS configuration to allow requests with the gateway as origin. The reason is that, most frequently, when using OAuth2 you are interested in **S**ingle **S**ign **O**n: share the same authorization server across different applications to save the user the need for authenticating several times when using the same browser, which requires to be using the same cookie and as a consequence the same host &amp; port (the authorization server is contacted by the browser on let&#39;s say https://oidc.c4-soft.com) whatever the BFF instances (instead of something like https://localhost:8080/auth for instance in the case of the tutorial BFF).\r\n\r\nAll that to write that if using a gateway as OAuth2 confidential client, you can remove the need for CORS configuration:\r\n- from resource servers (if you route the UI and REST requests through the gateway)\r\n- from the authorization server (if you route the UI and the authorization server through the gateway, but at the price of loosing SSO)\r\n\r\n  [1]: https://github.com/spring-projects/spring-authorization-server/issues/297#issue-896744390\r\n  [2]: https://github.com/ch4mpy/spring-addons/tree/master/samples/tutorials/bff","title":"How to properly configure CORS on a Spring Boot Auth Server?","body":"<p><strong>S</strong>ingle <strong>P</strong>age <strong>A</strong>pplications (Angular, React, Vue.js, etc.), as well as mobile applications, should not be OAuth2 client. Such clients are &quot;public&quot; clients and <a href=\"https://github.com/spring-projects/spring-authorization-server/issues/297#issue-896744390\" rel=\"nofollow noreferrer\">this is now discouraged</a>.</p>\n<p>Your Vue app should be secured with sessions on a BFF with OAuth2 login and something to replace session cookie with an authorization header containing an access token. The easiest way to achieve that is probably using <code>spring-cloud-gateway</code> with the <code>TokenRelay</code> filter and <code>spring-boot-starter-oauth2-client</code> with <code>oauth2Login</code> as I do in <a href=\"https://github.com/ch4mpy/spring-addons/tree/master/samples/tutorials/bff\" rel=\"nofollow noreferrer\">this tutorial</a>. The frontend in this tutorial is using Angular, but login and logout are plain Typsecript code and is pretty easy to port to React or Vue.</p>\n<p>In addition the securing the frontend with sessions, the gateway can remove the need for most of CORS configuration: from the browser point of view, all requests routed through the gateway have the same origin (the gateway).</p>\n<p>In the tutorial linked:</p>\n<ul>\n<li>all requests to the gateway (lets say https://localhost:<strong>8080</strong>) with a path starting with <code>/ui/</code> are routed to the what serves the UI assets (something like https://localhost:<strong>4200</strong>/ui/ in the case of an Angular dev server, but could be a Vue dev server, a NGINX instance containing anything, or whatever)</li>\n<li>all requests tho the gateway with a path starting with <code>/bff/v1/</code> are routed to a resource server (something like https://localhost:<strong>7084</strong>/)</li>\n</ul>\n<p>In the configuration above, if the user points its browser to https://localhost:<strong>8080</strong>/ui/ and if the SPA is configured to send REST requests to https://localhost:<strong>8080</strong>/bff/v1/**, then, from the browser perspective, both the requests to the UI and to the API have https://localhost:<strong>8080</strong> as origin.</p>\n<p>Still in this tutorial, the authorization server is not routed through the gateway and needs some CORS configuration to allow requests with the gateway as origin. The reason is that, most frequently, when using OAuth2 you are interested in <strong>S</strong>ingle <strong>S</strong>ign <strong>O</strong>n: share the same authorization server across different applications to save the user the need for authenticating several times when using the same browser, which requires to be using the same cookie and as a consequence the same host &amp; port (the authorization server is contacted by the browser on let's say <a href=\"https://oidc.c4-soft.com\" rel=\"nofollow noreferrer\">https://oidc.c4-soft.com</a>) whatever the BFF instances (instead of something like https://localhost:8080/auth for instance in the case of the tutorial BFF).</p>\n<p>All that to write that if using a gateway as OAuth2 confidential client, you can remove the need for CORS configuration:</p>\n<ul>\n<li>from resource servers (if you route the UI and REST requests through the gateway)</li>\n<li>from the authorization server (if you route the UI and the authorization server through the gateway, but at the price of loosing SSO)</li>\n</ul>\n"}],"owner":{"account_id":20251935,"reputation":6409,"user_id":14852784,"display_name":"J. M. Arnold"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":161,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":77330035,"answer_count":1,"score":2,"last_activity_date":1697796121,"creation_date":1697732442,"question_id":77325532,"body_markdown":"I got a basic Vue.js application for the authentication at our Spring Boot auth server. What follows is that code that does the full log-in (redirect to /login, request to the token endpoint, etc.):\r\n\r\n```javascript\r\n&lt;template&gt;\r\n    &lt;div class=&quot;h-screen w-screen flex flex-col items-center justify-center&quot;&gt;\r\n        &lt;p class=&quot;text-center mb-5&quot;&gt;You need to be logged in&lt;br&gt;to access the admin dashboard.&lt;/p&gt;\r\n        &lt;button @click.prevent=&quot;startAuthFlow&quot; class=&quot;bg-blue-500 text-white h-8 w-36 rounded shadow&quot;&gt;Login&lt;/button&gt;\r\n    &lt;/div&gt;\r\n&lt;/template&gt;\r\n\r\n&lt;script setup&gt;\r\nimport { config \r\n} from &quot;./../common/config.js&quot;;\r\nimport { parseQueryString, generateRandomString } from &quot;./../utils/authHelpers.js&quot;;\r\nimport router from &#39;./../router&#39;;\r\nimport { useAuthStore } from &#39;./../stores/auth.js&#39;;\r\n\r\nconst auth = useAuthStore();\r\n\r\nif (auth.access_token) {\r\n    router.push({ name: &#39;home&#39;, replace: true });\r\n}\r\n\r\nconst startAuthFlow = () =&gt; {\r\n    console.log(&quot;Starting auth flow...&quot;);\r\n\r\n    // Create and store a random &quot;state&quot; value\r\n    var state = generateRandomString();\r\n    localStorage.setItem(&quot;pkce_state&quot;, state);\r\n    console.log(state);\r\n\r\n    // Build the authorization URL\r\n    var url = config.authorization_endpoint\r\n        + &quot;?response_type=code&quot;\r\n        + &quot;&amp;client_id=&quot; + encodeURIComponent(config.client_id)\r\n        + &quot;&amp;state=&quot; + encodeURIComponent(state)\r\n        + &quot;&amp;redirect_uri=&quot; + encodeURIComponent(config.redirect_uri);\r\n\r\n    // Redirect to the authorization server\r\n    window.location = url;\r\n};\r\n\r\n// Handle the redirect back from the authorization server and\r\n// get an access token from the token endpoint\r\nvar q = parseQueryString(window.location.search.substring(1));\r\n\r\n// Check if the server returned an error string\r\nif (q.error) {\r\n    alert(&quot;Error returned from authorization server: &quot; + q.error);\r\n}\r\n\r\n// If the server returned an authorization code, attempt to exchange it for an access token\r\nif (q.code) {\r\n    // Verify state matches what we set at the beginning\r\n    if (localStorage.getItem(&quot;pkce_state&quot;) != q.state) {\r\n        alert(&quot;Invalid state&quot;);\r\n    } else {\r\n        // Base64 encode client credentials\r\n        const base64Credentials = btoa(config.client_id + &#39;:&#39; + config.client_secret);\r\n\r\n        // Build the token URL\r\n        var url = config.token_endpoint\r\n            + &quot;?grant_type=authorization_code&quot;\r\n            + &quot;&amp;client_id=&quot; + encodeURIComponent(config.client_id)\r\n            + &quot;&amp;code=&quot; + q.code\r\n            + &quot;&amp;redirect_uri=&quot; + encodeURIComponent(config.redirect_uri);\r\n\r\n        // Send POST request to token endpoint to retrieve access token\r\n        fetch(url, {\r\n            method: &quot;POST&quot;,\r\n            headers: {\r\n                &quot;Authorization&quot;: &quot;Basic &quot; + base64Credentials,\r\n                &#39;Content-Type&#39;: &#39;application/x-www-form-urlencoded&#39;,\r\n            }\r\n        }).then(response =&gt; response.json())\r\n            .then(result =&gt; {\r\n                console.log(result);\r\n                // Extracting tokens from result\r\n                const { access_token, refresh_token } = result;\r\n\r\n                // Save login to pinia and tokens to cookies\r\n                auth.login({ access_token, refresh_token, user: null });\r\n\r\n                router.push({ name: &#39;home&#39;, replace: true });\r\n            })\r\n            .catch(error =&gt; console.log(&#39;error&#39;, error));\r\n    }\r\n\r\n    // Clean up local storage\r\n    localStorage.removeItem(&quot;pkce_state&quot;);\r\n}\r\n\r\n&lt;/script&gt;\r\n```\r\n\r\nWhen using a browser with deactivated security features (does **not** check CORS), this works perfectly fine. Both the log-in as well as other requests.\r\n\r\nNow when using a normal browser, the redirect to `/login` works perfectly fine. But when sending a request to the `token` endpoint the following error appears:\r\n\r\n&gt; Access to fetch at\r\n&gt; &#39;http://localhost:8081/oauth2/token?grant_type=authorization_code&amp;client_id=core-server&amp;code=Ps19gIUUePThDLr15xX0U-UWEMd0HgHfyAOCcZjGmfXUqED80GOMLBykuldNrL7k23dxEydcP49hX_kGigKsZjcFCTS93xU7kwdwAIm6-eIcIk_ayN5i0mZPLeg_bDYx&amp;redirect_uri=http%3A%2F%2Flocalhost%3A5173%2F&#39;\r\n&gt; from origin &#39;http://localhost:5173&#39; has been blocked by CORS policy:\r\n&gt; Response to preflight request doesn&#39;t pass access control check: No\r\n&gt; &#39;Access-Control-Allow-Origin&#39; header is present on the requested\r\n&gt; resource. If an opaque response serves your needs, set the request&#39;s\r\n&gt; mode to &#39;no-cors&#39; to fetch the resource with CORS disabled.\r\n\r\nIn the CORS-deactivated browser, I get the following headers back:\r\n\r\n    Vary: Origin \r\n    Vary: Access-Control-Request-Method \r\n    Vary: Access-Control-Request-Headers\r\n\r\nWhat follows is my `SecurityConfig` file as well as the `CorsConfig`:\r\n\r\n```java\r\n@Configuration\r\npublic class\r\nCorsConfig {\r\n\r\n    private static final Logger logger = LoggerFactory.getLogger(CorsConfig.class);\r\n\r\n    /**\r\n     * Cors configuration\r\n     */\r\n    @Bean(name=&quot;corsConfigurationSource&quot;)\r\n    CorsConfigurationSource corsConfigurationSource() {\r\n\r\n        logger.info(&quot;Creating corsConfigurationSource bean&quot;);\r\n\r\n        CorsConfiguration configuration = new CorsConfiguration();\r\n        configuration.setAllowedOrigins(List.of(\r\n                &quot;http://localhost:5173&quot;,\r\n                &quot;http://192.168.2.144:5173&quot;\r\n        ));\r\n\r\n        configuration.setAllowedMethods(List.of(&quot;GET&quot;, &quot;POST&quot;, &quot;PUT&quot;, &quot;DELETE&quot;));\r\n        configuration.setAllowCredentials(true);\r\n        configuration.setAllowedHeaders(List.of(\r\n                &quot;Authorization&quot;,\r\n                &quot;Content-Type&quot;,\r\n                &quot;Accept&quot;,\r\n                &quot;Origin&quot;,\r\n                &quot;X-Requested-With&quot;\r\n        ));\r\n        configuration.setExposedHeaders(List.of(\r\n                &quot;Cache-Control&quot;,\r\n                &quot;Content-Language&quot;,\r\n                &quot;Content-Type&quot;,\r\n                &quot;Expires&quot;,\r\n                &quot;Last-Modified&quot;,\r\n                &quot;Pragma&quot;\r\n        ));\r\n        configuration.setMaxAge(3600L);\r\n        UrlBasedCorsConfigurationSource source = new UrlBasedCorsConfigurationSource();\r\n        source.registerCorsConfiguration(&quot;/**&quot;, configuration);\r\n        return source;\r\n    }\r\n}\r\n```\r\n\r\nand\r\n\r\n```java\r\n@Configuration\r\n@EnableWebSecurity\r\npublic class SecurityConfig {\r\n\r\n    // claim names used in the bearer token\r\n    private static final String ROLES_CLAIM = &quot;user-authorities&quot;;\r\n    private static final String SCOPES_CLAIM = &quot;scope&quot;;\r\n\r\n    private static final Logger logger = LoggerFactory.getLogger(SecurityConfig.class);\r\n\r\n\r\n    @Bean\r\n    @Order(1)\r\n    public CorsFilter corsFilter(CorsConfigurationSource corsConfigurationSource) {\r\n        logger.info(&quot;Creating corsFilter bean&quot;);\r\n        return new CorsFilter(corsConfigurationSource);\r\n    }\r\n\r\n\r\n    /**\r\n     * Configures the authorization server endpoints.\r\n     */\r\n    @Bean\r\n    @Order(2)\r\n    public SecurityFilterChain authorizationServerSecurityFilterChain(HttpSecurity http, RegisteredClientRepository clientRepository) throws Exception {\r\n\r\n        logger.info(&quot;Creating authorizationServerSecurityFilterChain bean&quot;);\r\n\r\n        OAuth2AuthorizationServerConfiguration.applyDefaultSecurity(http);\r\n\r\n        http.getConfigurer(OAuth2AuthorizationServerConfigurer.class)\r\n                .registeredClientRepository(clientRepository) // autowired from ClientConfig.java\r\n                .oidc(Customizer.withDefaults());\r\n\r\n        http.exceptionHandling((exceptions) -&gt; exceptions\r\n            .defaultAuthenticationEntryPointFor(\r\n                new LoginUrlAuthenticationEntryPoint(&quot;/login&quot;),\r\n                new MediaTypeRequestMatcher(MediaType.TEXT_HTML)\r\n            )\r\n        );\r\n\r\n        http.oauth2ResourceServer((resourceServer) -&gt; resourceServer\r\n                .jwt(Customizer.withDefaults()));\r\n\r\n        http.csrf(AbstractHttpConfigurer::disable);\r\n\r\n        return http.build();\r\n    }\r\n\r\n\r\n    /**\r\n     * Secures pages used to log in, log out, register etc.\r\n     * Sets custom login menu.\r\n     */\r\n    @Bean\r\n    @Order(3)\r\n    public SecurityFilterChain defaultSecurityFilterChain(HttpSecurity http) throws Exception {\r\n        http.securityMatcher(new NegatedRequestMatcher(new AntPathRequestMatcher(&quot;/admin/**&quot;)));\r\n\r\n        logger.info(&quot;Creating defaultSecurityFilterChain bean&quot;);\r\n\r\n        http.authorizeHttpRequests((authorize) -&gt;\r\n                authorize\r\n                        .requestMatchers(new AntPathRequestMatcher(&quot;/register&quot;)).permitAll()\r\n                        .requestMatchers(new AntPathRequestMatcher(&quot;/recover/**&quot;)).permitAll()\r\n                        .requestMatchers(new AntPathRequestMatcher(&quot;/error/**&quot;)).permitAll()\r\n                        .requestMatchers(new AntPathRequestMatcher(&quot;/css/**&quot;)).permitAll()\r\n                        .requestMatchers(new AntPathRequestMatcher(&quot;/js/**&quot;)).permitAll()\r\n                        .requestMatchers(new AntPathRequestMatcher(&quot;/favicon.ico&quot;)).permitAll()\r\n                        .anyRequest().authenticated());\r\n\r\n        http.oauth2ResourceServer((resourceServer) -&gt; resourceServer\r\n                .jwt(Customizer.withDefaults()));\r\n\r\n        // set custom login form\r\n        http.formLogin(form -&gt; {\r\n            form.loginPage(&quot;/login&quot;);\r\n            form.permitAll();\r\n        });\r\n\r\n        http.logout(conf -&gt; {\r\n            // default logout url\r\n            conf.logoutSuccessHandler(logoutSuccessHandler());\r\n        });\r\n\r\n        // Temp disable CSRF\r\n        http.csrf(AbstractHttpConfigurer::disable);\r\n        http.cors(AbstractHttpConfigurer::disable);\r\n\r\n        return http.build();\r\n    }\r\n\r\n\r\n    /**\r\n     * Secures admin endpoints with a bearer token. Does not use session authentication.\r\n     */\r\n    @Bean\r\n    @Order(4)\r\n    public SecurityFilterChain adminResourceFilterChain(HttpSecurity http) throws Exception {\r\n\r\n        logger.info(&quot;Creating adminResourceFilterChain bean&quot;);\r\n\r\n        // handle out custom endpoints in this filter chain\r\n        http.authorizeHttpRequests((authorize) -&gt;\r\n                authorize\r\n                        .requestMatchers(new AntPathRequestMatcher(&quot;/admin/**&quot;)).hasRole(&quot;ADMIN&quot;)\r\n                        .anyRequest().authenticated());\r\n\r\n        http.sessionManagement(conf -&gt; conf.sessionCreationPolicy(SessionCreationPolicy.STATELESS));\r\n\r\n        http.oauth2ResourceServer((resourceServer) -&gt; resourceServer\r\n                .jwt(Customizer.withDefaults()));\r\n\r\n        // Temp disable CSRF\r\n        http.csrf(AbstractHttpConfigurer::disable);\r\n        http.cors(AbstractHttpConfigurer::disable);\r\n\r\n\r\n        return http.build();\r\n    }\r\n\r\n// ...\r\n```\r\n\r\nI tried lots of different approaches:\r\n\r\n- Changed the filter chains (e.g. instead of `Order(1)` I included the CORS config at the top of each Security Bean)\r\n- Went ahead and implemented the [CORS Tutorial][1] one by one.\r\n- Tried to set the request headers manually *(which isn&#39;t a solution in the long-term)*.\r\n- Tried pattern matching to allow every incoming request temporarily (didn&#39;t work, so it&#39;s apparently an issue with the CORS Config in itself)\r\n\r\n\r\n\r\n  [1]: https://docs.spring.io/spring-security/reference/reactive/integrations/cors.html","title":"How to properly configure CORS on a Spring Boot Auth Server?","body":"<p>I got a basic Vue.js application for the authentication at our Spring Boot auth server. What follows is that code that does the full log-in (redirect to /login, request to the token endpoint, etc.):</p>\n<pre class=\"lang-js prettyprint-override\"><code>&lt;template&gt;\n    &lt;div class=&quot;h-screen w-screen flex flex-col items-center justify-center&quot;&gt;\n        &lt;p class=&quot;text-center mb-5&quot;&gt;You need to be logged in&lt;br&gt;to access the admin dashboard.&lt;/p&gt;\n        &lt;button @click.prevent=&quot;startAuthFlow&quot; class=&quot;bg-blue-500 text-white h-8 w-36 rounded shadow&quot;&gt;Login&lt;/button&gt;\n    &lt;/div&gt;\n&lt;/template&gt;\n\n&lt;script setup&gt;\nimport { config \n} from &quot;./../common/config.js&quot;;\nimport { parseQueryString, generateRandomString } from &quot;./../utils/authHelpers.js&quot;;\nimport router from './../router';\nimport { useAuthStore } from './../stores/auth.js';\n\nconst auth = useAuthStore();\n\nif (auth.access_token) {\n    router.push({ name: 'home', replace: true });\n}\n\nconst startAuthFlow = () =&gt; {\n    console.log(&quot;Starting auth flow...&quot;);\n\n    // Create and store a random &quot;state&quot; value\n    var state = generateRandomString();\n    localStorage.setItem(&quot;pkce_state&quot;, state);\n    console.log(state);\n\n    // Build the authorization URL\n    var url = config.authorization_endpoint\n        + &quot;?response_type=code&quot;\n        + &quot;&amp;client_id=&quot; + encodeURIComponent(config.client_id)\n        + &quot;&amp;state=&quot; + encodeURIComponent(state)\n        + &quot;&amp;redirect_uri=&quot; + encodeURIComponent(config.redirect_uri);\n\n    // Redirect to the authorization server\n    window.location = url;\n};\n\n// Handle the redirect back from the authorization server and\n// get an access token from the token endpoint\nvar q = parseQueryString(window.location.search.substring(1));\n\n// Check if the server returned an error string\nif (q.error) {\n    alert(&quot;Error returned from authorization server: &quot; + q.error);\n}\n\n// If the server returned an authorization code, attempt to exchange it for an access token\nif (q.code) {\n    // Verify state matches what we set at the beginning\n    if (localStorage.getItem(&quot;pkce_state&quot;) != q.state) {\n        alert(&quot;Invalid state&quot;);\n    } else {\n        // Base64 encode client credentials\n        const base64Credentials = btoa(config.client_id + ':' + config.client_secret);\n\n        // Build the token URL\n        var url = config.token_endpoint\n            + &quot;?grant_type=authorization_code&quot;\n            + &quot;&amp;client_id=&quot; + encodeURIComponent(config.client_id)\n            + &quot;&amp;code=&quot; + q.code\n            + &quot;&amp;redirect_uri=&quot; + encodeURIComponent(config.redirect_uri);\n\n        // Send POST request to token endpoint to retrieve access token\n        fetch(url, {\n            method: &quot;POST&quot;,\n            headers: {\n                &quot;Authorization&quot;: &quot;Basic &quot; + base64Credentials,\n                'Content-Type': 'application/x-www-form-urlencoded',\n            }\n        }).then(response =&gt; response.json())\n            .then(result =&gt; {\n                console.log(result);\n                // Extracting tokens from result\n                const { access_token, refresh_token } = result;\n\n                // Save login to pinia and tokens to cookies\n                auth.login({ access_token, refresh_token, user: null });\n\n                router.push({ name: 'home', replace: true });\n            })\n            .catch(error =&gt; console.log('error', error));\n    }\n\n    // Clean up local storage\n    localStorage.removeItem(&quot;pkce_state&quot;);\n}\n\n&lt;/script&gt;\n</code></pre>\n<p>When using a browser with deactivated security features (does <strong>not</strong> check CORS), this works perfectly fine. Both the log-in as well as other requests.</p>\n<p>Now when using a normal browser, the redirect to <code>/login</code> works perfectly fine. But when sending a request to the <code>token</code> endpoint the following error appears:</p>\n<blockquote>\n<p>Access to fetch at\n'http://localhost:8081/oauth2/token?grant_type=authorization_code&amp;client_id=core-server&amp;code=Ps19gIUUePThDLr15xX0U-UWEMd0HgHfyAOCcZjGmfXUqED80GOMLBykuldNrL7k23dxEydcP49hX_kGigKsZjcFCTS93xU7kwdwAIm6-eIcIk_ayN5i0mZPLeg_bDYx&amp;redirect_uri=http%3A%2F%2Flocalhost%3A5173%2F'\nfrom origin 'http://localhost:5173' has been blocked by CORS policy:\nResponse to preflight request doesn't pass access control check: No\n'Access-Control-Allow-Origin' header is present on the requested\nresource. If an opaque response serves your needs, set the request's\nmode to 'no-cors' to fetch the resource with CORS disabled.</p>\n</blockquote>\n<p>In the CORS-deactivated browser, I get the following headers back:</p>\n<pre><code>Vary: Origin \nVary: Access-Control-Request-Method \nVary: Access-Control-Request-Headers\n</code></pre>\n<p>What follows is my <code>SecurityConfig</code> file as well as the <code>CorsConfig</code>:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Configuration\npublic class\nCorsConfig {\n\n    private static final Logger logger = LoggerFactory.getLogger(CorsConfig.class);\n\n    /**\n     * Cors configuration\n     */\n    @Bean(name=&quot;corsConfigurationSource&quot;)\n    CorsConfigurationSource corsConfigurationSource() {\n\n        logger.info(&quot;Creating corsConfigurationSource bean&quot;);\n\n        CorsConfiguration configuration = new CorsConfiguration();\n        configuration.setAllowedOrigins(List.of(\n                &quot;http://localhost:5173&quot;,\n                &quot;http://192.168.2.144:5173&quot;\n        ));\n\n        configuration.setAllowedMethods(List.of(&quot;GET&quot;, &quot;POST&quot;, &quot;PUT&quot;, &quot;DELETE&quot;));\n        configuration.setAllowCredentials(true);\n        configuration.setAllowedHeaders(List.of(\n                &quot;Authorization&quot;,\n                &quot;Content-Type&quot;,\n                &quot;Accept&quot;,\n                &quot;Origin&quot;,\n                &quot;X-Requested-With&quot;\n        ));\n        configuration.setExposedHeaders(List.of(\n                &quot;Cache-Control&quot;,\n                &quot;Content-Language&quot;,\n                &quot;Content-Type&quot;,\n                &quot;Expires&quot;,\n                &quot;Last-Modified&quot;,\n                &quot;Pragma&quot;\n        ));\n        configuration.setMaxAge(3600L);\n        UrlBasedCorsConfigurationSource source = new UrlBasedCorsConfigurationSource();\n        source.registerCorsConfiguration(&quot;/**&quot;, configuration);\n        return source;\n    }\n}\n</code></pre>\n<p>and</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Configuration\n@EnableWebSecurity\npublic class SecurityConfig {\n\n    // claim names used in the bearer token\n    private static final String ROLES_CLAIM = &quot;user-authorities&quot;;\n    private static final String SCOPES_CLAIM = &quot;scope&quot;;\n\n    private static final Logger logger = LoggerFactory.getLogger(SecurityConfig.class);\n\n\n    @Bean\n    @Order(1)\n    public CorsFilter corsFilter(CorsConfigurationSource corsConfigurationSource) {\n        logger.info(&quot;Creating corsFilter bean&quot;);\n        return new CorsFilter(corsConfigurationSource);\n    }\n\n\n    /**\n     * Configures the authorization server endpoints.\n     */\n    @Bean\n    @Order(2)\n    public SecurityFilterChain authorizationServerSecurityFilterChain(HttpSecurity http, RegisteredClientRepository clientRepository) throws Exception {\n\n        logger.info(&quot;Creating authorizationServerSecurityFilterChain bean&quot;);\n\n        OAuth2AuthorizationServerConfiguration.applyDefaultSecurity(http);\n\n        http.getConfigurer(OAuth2AuthorizationServerConfigurer.class)\n                .registeredClientRepository(clientRepository) // autowired from ClientConfig.java\n                .oidc(Customizer.withDefaults());\n\n        http.exceptionHandling((exceptions) -&gt; exceptions\n            .defaultAuthenticationEntryPointFor(\n                new LoginUrlAuthenticationEntryPoint(&quot;/login&quot;),\n                new MediaTypeRequestMatcher(MediaType.TEXT_HTML)\n            )\n        );\n\n        http.oauth2ResourceServer((resourceServer) -&gt; resourceServer\n                .jwt(Customizer.withDefaults()));\n\n        http.csrf(AbstractHttpConfigurer::disable);\n\n        return http.build();\n    }\n\n\n    /**\n     * Secures pages used to log in, log out, register etc.\n     * Sets custom login menu.\n     */\n    @Bean\n    @Order(3)\n    public SecurityFilterChain defaultSecurityFilterChain(HttpSecurity http) throws Exception {\n        http.securityMatcher(new NegatedRequestMatcher(new AntPathRequestMatcher(&quot;/admin/**&quot;)));\n\n        logger.info(&quot;Creating defaultSecurityFilterChain bean&quot;);\n\n        http.authorizeHttpRequests((authorize) -&gt;\n                authorize\n                        .requestMatchers(new AntPathRequestMatcher(&quot;/register&quot;)).permitAll()\n                        .requestMatchers(new AntPathRequestMatcher(&quot;/recover/**&quot;)).permitAll()\n                        .requestMatchers(new AntPathRequestMatcher(&quot;/error/**&quot;)).permitAll()\n                        .requestMatchers(new AntPathRequestMatcher(&quot;/css/**&quot;)).permitAll()\n                        .requestMatchers(new AntPathRequestMatcher(&quot;/js/**&quot;)).permitAll()\n                        .requestMatchers(new AntPathRequestMatcher(&quot;/favicon.ico&quot;)).permitAll()\n                        .anyRequest().authenticated());\n\n        http.oauth2ResourceServer((resourceServer) -&gt; resourceServer\n                .jwt(Customizer.withDefaults()));\n\n        // set custom login form\n        http.formLogin(form -&gt; {\n            form.loginPage(&quot;/login&quot;);\n            form.permitAll();\n        });\n\n        http.logout(conf -&gt; {\n            // default logout url\n            conf.logoutSuccessHandler(logoutSuccessHandler());\n        });\n\n        // Temp disable CSRF\n        http.csrf(AbstractHttpConfigurer::disable);\n        http.cors(AbstractHttpConfigurer::disable);\n\n        return http.build();\n    }\n\n\n    /**\n     * Secures admin endpoints with a bearer token. Does not use session authentication.\n     */\n    @Bean\n    @Order(4)\n    public SecurityFilterChain adminResourceFilterChain(HttpSecurity http) throws Exception {\n\n        logger.info(&quot;Creating adminResourceFilterChain bean&quot;);\n\n        // handle out custom endpoints in this filter chain\n        http.authorizeHttpRequests((authorize) -&gt;\n                authorize\n                        .requestMatchers(new AntPathRequestMatcher(&quot;/admin/**&quot;)).hasRole(&quot;ADMIN&quot;)\n                        .anyRequest().authenticated());\n\n        http.sessionManagement(conf -&gt; conf.sessionCreationPolicy(SessionCreationPolicy.STATELESS));\n\n        http.oauth2ResourceServer((resourceServer) -&gt; resourceServer\n                .jwt(Customizer.withDefaults()));\n\n        // Temp disable CSRF\n        http.csrf(AbstractHttpConfigurer::disable);\n        http.cors(AbstractHttpConfigurer::disable);\n\n\n        return http.build();\n    }\n\n// ...\n</code></pre>\n<p>I tried lots of different approaches:</p>\n<ul>\n<li>Changed the filter chains (e.g. instead of <code>Order(1)</code> I included the CORS config at the top of each Security Bean)</li>\n<li>Went ahead and implemented the <a href=\"https://docs.spring.io/spring-security/reference/reactive/integrations/cors.html\" rel=\"nofollow noreferrer\">CORS Tutorial</a> one by one.</li>\n<li>Tried to set the request headers manually <em>(which isn't a solution in the long-term)</em>.</li>\n<li>Tried pattern matching to allow every incoming request temporarily (didn't work, so it's apparently an issue with the CORS Config in itself)</li>\n</ul>\n"},{"tags":["java","hibernate","spring-data-jpa","spring-data"],"comments":[{"owner":{"account_id":1100252,"reputation":10087,"user_id":1092818,"display_name":"crizzis"},"score":0,"creation_date":1697795248,"post_id":77329541,"comment_id":136327458,"body_markdown":"Does this answer your question? [How to skip the rollback for DataIntegrityViolationException](https://stackoverflow.com/questions/70203663/how-to-skip-the-rollback-for-dataintegrityviolationexception)","body":"Does this answer your question? <a href=\"https://stackoverflow.com/questions/70203663/how-to-skip-the-rollback-for-dataintegrityviolationexception\">How to skip the rollback for DataIntegrityViolationException</a>"},{"owner":{"account_id":27112570,"reputation":3,"user_id":20657479,"display_name":"Akash Jain"},"score":0,"creation_date":1697795922,"post_id":77329541,"comment_id":136327595,"body_markdown":"but there is not exception as well, if there was any it would be fine","body":"but there is not exception as well, if there was any it would be fine"},{"owner":{"account_id":1100252,"reputation":10087,"user_id":1092818,"display_name":"crizzis"},"score":0,"creation_date":1697796187,"post_id":77329541,"comment_id":136327641,"body_markdown":"Do you mean to say neither of the two `catch` block is entered when you run the code? Have you setup a breakpoint in each of them?","body":"Do you mean to say neither of the two <code>catch</code> block is entered when you run the code? Have you setup a breakpoint in each of them?"},{"owner":{"account_id":27112570,"reputation":3,"user_id":20657479,"display_name":"Akash Jain"},"score":0,"creation_date":1697796387,"post_id":77329541,"comment_id":136327672,"body_markdown":"yes, it&#39;s coming to neither and yes i have set up debug point on both of them","body":"yes, it&#39;s coming to neither and yes i have set up debug point on both of them"}],"owner":{"account_id":27112570,"reputation":3,"user_id":20657479,"display_name":"Akash Jain"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":44,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1697796116,"creation_date":1697791736,"question_id":77329541,"body_markdown":"I&#39;m trying to save some data in a database. I have a native query for my save function and, when I execute it, there is no exception thrown but the data is not visible in the DB.\r\n\r\n```java\r\npublic interface DBConnection extends JpaRepository&lt;Enitty, Long&gt; {\r\n\r\n    String query = &quot;INSERT INTO My_table (MESSAGE_CODE, MESSAGE, LANGUAGE, ID) VALUES(?1,?2,?3,?4)&quot;;\r\n\r\n    @Modifying\r\n    @Transactional\r\n    @Query(value = query, nativeQuery = true)\r\n    void save(String a, String r, String t, String s);\r\n\r\n}\r\n\r\n```\r\n\r\nBased on other SO question, the data was probably not flushing or not getting committed, but I have called `flush()` function and if I understand Spring-JPA correctly then `@Transactional` should commit once the transaction is completed, but both of them are failing, (I have used both `Transactional` javax and spring.)\r\n\r\nAlso note there is not exception being thrown at all, and no logs to help what issues it&#39;s facing during persistance\r\n\r\n```java\r\n    @Transactional\r\n    private void saveToDB(List&lt;List&lt;String&gt;&gt; records) {\r\n        int count = 0;\r\n        for (List&lt;String&gt; record : records) {\r\n            try {\r\n                dbConnection.save(record.get(0), record.get(1), record.get(2), record.get(3));\r\n                dbConnection.flush();\r\n            } catch (DataIntegrityViolationException e) {\r\n                count++;\r\n                System.out.println(&quot;element probably exists &quot; + record);\r\n            } catch (Exception e) {\r\n                System.out.println(&quot;Error record is &quot; + record);\r\n                e.printStackTrace();\r\n            }\r\n        }\r\n        System.out.println(count);\r\n    }\r\n```","title":"Data not getting saved in DB even after flush and @Transactional","body":"<p>I'm trying to save some data in a database. I have a native query for my save function and, when I execute it, there is no exception thrown but the data is not visible in the DB.</p>\n<pre class=\"lang-java prettyprint-override\"><code>public interface DBConnection extends JpaRepository&lt;Enitty, Long&gt; {\n\n    String query = &quot;INSERT INTO My_table (MESSAGE_CODE, MESSAGE, LANGUAGE, ID) VALUES(?1,?2,?3,?4)&quot;;\n\n    @Modifying\n    @Transactional\n    @Query(value = query, nativeQuery = true)\n    void save(String a, String r, String t, String s);\n\n}\n\n</code></pre>\n<p>Based on other SO question, the data was probably not flushing or not getting committed, but I have called <code>flush()</code> function and if I understand Spring-JPA correctly then <code>@Transactional</code> should commit once the transaction is completed, but both of them are failing, (I have used both <code>Transactional</code> javax and spring.)</p>\n<p>Also note there is not exception being thrown at all, and no logs to help what issues it's facing during persistance</p>\n<pre class=\"lang-java prettyprint-override\"><code>    @Transactional\n    private void saveToDB(List&lt;List&lt;String&gt;&gt; records) {\n        int count = 0;\n        for (List&lt;String&gt; record : records) {\n            try {\n                dbConnection.save(record.get(0), record.get(1), record.get(2), record.get(3));\n                dbConnection.flush();\n            } catch (DataIntegrityViolationException e) {\n                count++;\n                System.out.println(&quot;element probably exists &quot; + record);\n            } catch (Exception e) {\n                System.out.println(&quot;Error record is &quot; + record);\n                e.printStackTrace();\n            }\n        }\n        System.out.println(count);\n    }\n</code></pre>\n"},{"tags":["java","embedded-jetty"],"answers":[{"tags":[],"owner":{"account_id":4295729,"reputation":972,"user_id":3510860,"display_name":"apflieger"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1697796021,"creation_date":1697796021,"answer_id":77330022,"question_id":77330021,"body_markdown":"The default timeout can be configured on the Connector\r\n\r\n    Server server = new Server();\r\n    ServerConnector connector = new ServerConnector(server);\r\n    connector.setIdleTimeout(Duration.ofMinutes(5).toMillis());\r\n    server.addConnector(connector);\r\n\r\nBe careful to not pass connection related arguments to `new Server()`, like port or InetSocketAddress, otherwise, the Server constructor creates a connector that won&#39;t have the IdleTimeout you want. Instead, pass the port or InetSocketAddress to the connector yourself.","title":"How to configure Idle Timeout (request timeout) on jetty embedded","body":"<p>The default timeout can be configured on the Connector</p>\n<pre><code>Server server = new Server();\nServerConnector connector = new ServerConnector(server);\nconnector.setIdleTimeout(Duration.ofMinutes(5).toMillis());\nserver.addConnector(connector);\n</code></pre>\n<p>Be careful to not pass connection related arguments to <code>new Server()</code>, like port or InetSocketAddress, otherwise, the Server constructor creates a connector that won't have the IdleTimeout you want. Instead, pass the port or InetSocketAddress to the connector yourself.</p>\n"}],"owner":{"account_id":4295729,"reputation":972,"user_id":3510860,"display_name":"apflieger"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":23,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1697796021,"creation_date":1697796021,"question_id":77330021,"body_markdown":"Request fail with this exception\r\n\r\n    java.util.concurrent.TimeoutException: Idle timeout expired: 30002/30000 ms\r\n        at org.eclipse.jetty.io.IdleTimeout.checkIdleTimeout(IdleTimeout.java:167)\r\n    \tat org.eclipse.jetty.io.IdleTimeout.idleCheck(IdleTimeout.java:113)\r\n    \tat java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:577)\r\n    \tat java.base/java.util.concurrent.FutureTask.run(FutureTask.java:317)\r\n    \tat java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:304)\r\n    \tat java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)\r\n    \tat java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)\r\n    \tat java.base/java.lang.Thread.run(Thread.java:1589)\r\n\r\nHow to configure this default 30 seconds timeout?","title":"How to configure Idle Timeout (request timeout) on jetty embedded","body":"<p>Request fail with this exception</p>\n<pre><code>java.util.concurrent.TimeoutException: Idle timeout expired: 30002/30000 ms\n    at org.eclipse.jetty.io.IdleTimeout.checkIdleTimeout(IdleTimeout.java:167)\n    at org.eclipse.jetty.io.IdleTimeout.idleCheck(IdleTimeout.java:113)\n    at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:577)\n    at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:317)\n    at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:304)\n    at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)\n    at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)\n    at java.base/java.lang.Thread.run(Thread.java:1589)\n</code></pre>\n<p>How to configure this default 30 seconds timeout?</p>\n"},{"tags":["java","selenium-webdriver","cucumber","bdd"],"comments":[{"owner":{"account_id":6284,"reputation":14589,"user_id":10508,"accept_rate":53,"display_name":"David M. Karr"},"score":1,"creation_date":1630263837,"post_id":68974753,"comment_id":121903403,"body_markdown":"I imagine the following leads to the solution, although I imagine it might be a little difficult for you to understand: https://stackoverflow.com/questions/41265266/how-to-solve-inaccessibleobjectexception-unable-to-make-member-accessible-m/41265267#41265267 .","body":"I imagine the following leads to the solution, although I imagine it might be a little difficult for you to understand: <a href=\"https://stackoverflow.com/questions/41265266/how-to-solve-inaccessibleobjectexception-unable-to-make-member-accessible-m/41265267#41265267\" title=\"how to solve inaccessibleobjectexception unable to make member accessible m\">stackoverflow.com/questions/41265266/&hellip;</a> ."}],"answers":[{"tags":[],"owner":{"account_id":4895787,"reputation":10833,"user_id":3945473,"display_name":"M.P. Korstanje"},"down_vote_count":0,"up_vote_count":7,"is_accepted":false,"score":7,"last_activity_date":1630268146,"creation_date":1630268146,"answer_id":68976568,"question_id":68974753,"body_markdown":"Your version of Cucumber is not compatible with your version of Java. Either upgrade Cucumber or downgrade Java.\r\n\r\n Because of the Scenario you are testing I am guessing you are following an old tutorial. This one is up to date:\r\n\r\nhttps://cucumber.io/docs/guides/10-minute-tutorial/","title":"Unable to make field private final java.util.Comparator java.util.TreeMap.comparator accessible: java.base doesn&#39;t &quot;opens java.util&quot; to unnamed module","body":"<p>Your version of Cucumber is not compatible with your version of Java. Either upgrade Cucumber or downgrade Java.</p>\n<p>Because of the Scenario you are testing I am guessing you are following an old tutorial. This one is up to date:</p>\n<p><a href=\"https://cucumber.io/docs/guides/10-minute-tutorial/\" rel=\"noreferrer\">https://cucumber.io/docs/guides/10-minute-tutorial/</a></p>\n"},{"tags":[],"owner":{"account_id":23102584,"reputation":11,"user_id":17211811,"display_name":"Suhas Awale"},"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1634830447,"creation_date":1634824896,"answer_id":69663394,"question_id":68974753,"body_markdown":"I&#39;ve face the same issue but resolved the issue with following code.\r\n----------------------------------------\r\n******** Feature file **************\r\n    \r\n    Feature: Application login\r\n    Scenario: Login into Application\r\n    Given user click on login page\r\n    When user enter username password\r\n    Then user can see home page\r\n    \r\n----------------------------------------\r\n*********** StepDefination file************\r\n    \r\n    package StepDefinations;\r\n    import org.junit.runner.RunWith;\r\n    @RunWith(io.cucumber.junit.Cucumber.class)\r\n    public class StepDefination {\r\n    @io.cucumber.java.en.Given(&quot;^user click on login page$&quot;)\r\n    public void user_click_on_login_page() throws Throwable {\r\n    // Write code here that turns the phrase above into concrete actions\r\n    System.out.println(&quot;test 1&quot;);\r\n    }\r\n    \r\n    \r\n    @io.cucumber.java.en.When(&quot;^user enter username password$&quot;)\r\n    public void user_enter_username_password() throws Throwable {\r\n    // Write code here that turns the phrase above into concrete actions\r\n    System.out.println(&quot;test 2&quot;);\r\n    }\r\n    \r\n    \r\n    @io.cucumber.java.en.Then(&quot;^user can see home page$&quot;)\r\n    public void user_can_see_home_page() throws Throwable {\r\n    // Write code here that turns the phrase above into concrete actions\r\n    System.out.println(&quot;test 3&quot;);\r\n    }}\r\n\r\n----------------------------------------\r\n    \r\n********* TestRunner file **************\r\n    \r\n    package cucumber.Options;\r\n    import org.junit.runner.RunWith;\r\n    @RunWith(io.cucumber.junit.Cucumber.class)\r\n    @io.cucumber.junit.CucumberOptions(features=&quot;src/test/java/features&quot;,` `glue={&quot;StepDefinations&quot;})\r\n    \r\n    public class TestRunner {}","title":"Unable to make field private final java.util.Comparator java.util.TreeMap.comparator accessible: java.base doesn&#39;t &quot;opens java.util&quot; to unnamed module","body":"<h2>I've face the same issue but resolved the issue with following code.</h2>\n<p>******** Feature file **************</p>\n<pre><code>Feature: Application login\nScenario: Login into Application\nGiven user click on login page\nWhen user enter username password\nThen user can see home page\n</code></pre>\n<hr />\n<p>*********** StepDefination file************</p>\n<pre><code>package StepDefinations;\nimport org.junit.runner.RunWith;\n@RunWith(io.cucumber.junit.Cucumber.class)\npublic class StepDefination {\n@io.cucumber.java.en.Given(&quot;^user click on login page$&quot;)\npublic void user_click_on_login_page() throws Throwable {\n// Write code here that turns the phrase above into concrete actions\nSystem.out.println(&quot;test 1&quot;);\n}\n\n\n@io.cucumber.java.en.When(&quot;^user enter username password$&quot;)\npublic void user_enter_username_password() throws Throwable {\n// Write code here that turns the phrase above into concrete actions\nSystem.out.println(&quot;test 2&quot;);\n}\n\n\n@io.cucumber.java.en.Then(&quot;^user can see home page$&quot;)\npublic void user_can_see_home_page() throws Throwable {\n// Write code here that turns the phrase above into concrete actions\nSystem.out.println(&quot;test 3&quot;);\n}}\n</code></pre>\n<hr />\n<p>********* TestRunner file **************</p>\n<pre><code>package cucumber.Options;\nimport org.junit.runner.RunWith;\n@RunWith(io.cucumber.junit.Cucumber.class)\n@io.cucumber.junit.CucumberOptions(features=&quot;src/test/java/features&quot;,` `glue={&quot;StepDefinations&quot;})\n\npublic class TestRunner {}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":16376703,"reputation":1,"user_id":11828632,"display_name":"M&#252;ge Sasmaz"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1643133037,"creation_date":1643133037,"answer_id":70853368,"question_id":68974753,"body_markdown":"Change the maven dependencies. \r\nMy application uses the **info-cukes** for cucumber in pom.xml. \r\nI changed them with **io-cucumber**. it works for me.","title":"Unable to make field private final java.util.Comparator java.util.TreeMap.comparator accessible: java.base doesn&#39;t &quot;opens java.util&quot; to unnamed module","body":"<p>Change the maven dependencies.\nMy application uses the <strong>info-cukes</strong> for cucumber in pom.xml.\nI changed them with <strong>io-cucumber</strong>. it works for me.</p>\n"},{"tags":[],"owner":{"account_id":2222612,"reputation":922,"user_id":1961655,"accept_rate":36,"display_name":"Asaf Magen"},"down_vote_count":0,"up_vote_count":22,"is_accepted":false,"score":22,"last_activity_date":1674068398,"creation_date":1655206041,"answer_id":72616180,"question_id":68974753,"body_markdown":"I did not have an Cucumber feature installed so the problem in my setup was not related to it.\r\nwhat did help me is updating the maven plugin settings in my pom file as below.\r\n\r\n```xml\r\n&lt;plugin&gt;\r\n  &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n  &lt;artifactId&gt;maven-war-plugin&lt;/artifactId&gt;\r\n  &lt;version&gt;3.3.1&lt;/version&gt;\r\n&lt;/plugin&gt;\r\n&lt;plugin&gt;\r\n  &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n  &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\r\n  &lt;version&gt;3.8.1&lt;/version&gt;\r\n&lt;/plugin&gt;\r\n```\r\n","title":"Unable to make field private final java.util.Comparator java.util.TreeMap.comparator accessible: java.base doesn&#39;t &quot;opens java.util&quot; to unnamed module","body":"<p>I did not have an Cucumber feature installed so the problem in my setup was not related to it.\nwhat did help me is updating the maven plugin settings in my pom file as below.</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;plugin&gt;\n  &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n  &lt;artifactId&gt;maven-war-plugin&lt;/artifactId&gt;\n  &lt;version&gt;3.3.1&lt;/version&gt;\n&lt;/plugin&gt;\n&lt;plugin&gt;\n  &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n  &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\n  &lt;version&gt;3.8.1&lt;/version&gt;\n&lt;/plugin&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":7427874,"reputation":374,"user_id":5649810,"display_name":"lubrum"},"down_vote_count":1,"up_vote_count":4,"is_accepted":false,"score":3,"last_activity_date":1677877297,"creation_date":1677877241,"answer_id":75631830,"question_id":68974753,"body_markdown":"In my case, I forgot to change java version of my application. \r\n\r\nAfter changing java from version 17 to version 8 fixed the issue.","title":"Unable to make field private final java.util.Comparator java.util.TreeMap.comparator accessible: java.base doesn&#39;t &quot;opens java.util&quot; to unnamed module","body":"<p>In my case, I forgot to change java version of my application.</p>\n<p>After changing java from version 17 to version 8 fixed the issue.</p>\n"},{"tags":[],"owner":{"account_id":8761405,"reputation":1504,"user_id":6551263,"display_name":"Chetan Ahirrao"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1680695712,"creation_date":1680695712,"answer_id":75939117,"question_id":68974753,"body_markdown":"For me, it worked when I changed JRE System library to JDK JRE instead of default JRE.&lt;br/&gt; ```Right click project-&gt; go to Build Path -&gt; Configure Build Path and ADD Library-&gt; Select path to JDK folder and set it as default.``` ","title":"Unable to make field private final java.util.Comparator java.util.TreeMap.comparator accessible: java.base doesn&#39;t &quot;opens java.util&quot; to unnamed module","body":"<p>For me, it worked when I changed JRE System library to JDK JRE instead of default JRE.<br/> <code>Right click project-&gt; go to Build Path -&gt; Configure Build Path and ADD Library-&gt; Select path to JDK folder and set it as default.</code></p>\n"},{"tags":[],"owner":{"account_id":28910497,"reputation":1,"user_id":22143610,"display_name":"Santu Yadav"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1687937540,"creation_date":1687937540,"answer_id":76570962,"question_id":68974753,"body_markdown":"In my case my sts was pointing to jre instead of jdk. This was ressolved once I deleted jre from build path and pointed to jdk home directory.","title":"Unable to make field private final java.util.Comparator java.util.TreeMap.comparator accessible: java.base doesn&#39;t &quot;opens java.util&quot; to unnamed module","body":"<p>In my case my sts was pointing to jre instead of jdk. This was ressolved once I deleted jre from build path and pointed to jdk home directory.</p>\n"},{"tags":[],"owner":{"account_id":26233052,"reputation":39,"user_id":19908643,"display_name":"Enlem Enlem"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1692558707,"creation_date":1692558663,"answer_id":76940952,"question_id":68974753,"body_markdown":"this fixed my issue:\r\nupdate maven-war-plugin to 3.2.3\r\n\r\nmvn org.apache.maven.plugins:maven-war-plugin:3.2.3\r\n","title":"Unable to make field private final java.util.Comparator java.util.TreeMap.comparator accessible: java.base doesn&#39;t &quot;opens java.util&quot; to unnamed module","body":"<p>this fixed my issue:\nupdate maven-war-plugin to 3.2.3</p>\n<p>mvn org.apache.maven.plugins:maven-war-plugin:3.2.3</p>\n"},{"tags":[],"owner":{"account_id":29715211,"reputation":1,"user_id":22773883,"display_name":"Chandan Kumar"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1697795654,"creation_date":1697795654,"answer_id":77329970,"question_id":68974753,"body_markdown":"You can check the JDK is configure with Eclipse.\r\nCheck from Eclipse &gt;&gt; Window &gt;&gt; Preferences &gt;&gt; Search Jre &gt;&gt; Click on the Install JRE &gt;&gt; Check JDK showing or not. If not in showing then add JDK.","title":"Unable to make field private final java.util.Comparator java.util.TreeMap.comparator accessible: java.base doesn&#39;t &quot;opens java.util&quot; to unnamed module","body":"<p>You can check the JDK is configure with Eclipse.\nCheck from Eclipse &gt;&gt; Window &gt;&gt; Preferences &gt;&gt; Search Jre &gt;&gt; Click on the Install JRE &gt;&gt; Check JDK showing or not. If not in showing then add JDK.</p>\n"}],"owner":{"account_id":22598991,"reputation":271,"user_id":16780853,"display_name":"Анна Мейшутович"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":71529,"favorite_count":0,"down_vote_count":0,"up_vote_count":27,"answer_count":9,"score":27,"last_activity_date":1697795654,"creation_date":1630253477,"question_id":68974753,"body_markdown":"I have created a Cucumber feature file and steps file, then I have clicked &quot;Run configurations&quot; for feature file and I see the following in the console. How can I solve this problem?\r\n\r\n    *Feature: Login into account\r\n      Existing user should be able to login to account using correct credentials\r\n      \r\n    Scenario: Login into account with correct credentials     # C:/Users/MI/Desktop/CucumberFramework/CucumberFramework/src/test/java/CucumberFramework/featureFiles/Login.feature:4\r\n        \r\n    Given User navigates to stackoverflow website           # LoginSteps.user_navigates_to_stackoverflow_website()\r\n          java.lang.ExceptionInInitializerError\r\n          \tat cucumber.deps.com.thoughtworks.xstream.XStream.setupConverters(XStream.java:820)\r\n          \tat cucumber.deps.com.thoughtworks.xstream.XStream.&lt;init&gt;(XStream.java:574)\r\n          \tat cucumber.deps.com.thoughtworks.xstream.XStream.&lt;init&gt;(XStream.java:530)\r\n          \tat cucumber.runtime.xstream.LocalizedXStreams$LocalizedXStream.&lt;init&gt;(LocalizedXStreams.java:50)\r\n          \tat cucumber.runtime.xstream.LocalizedXStreams.newXStream(LocalizedXStreams.java:37)\r\n          \tat cucumber.runtime.xstream.LocalizedXStreams.get(LocalizedXStreams.java:29)\r\n          \tat cucumber.runtime.StepDefinitionMatch.runStep(StepDefinitionMatch.java:37)\r\n          \tat cucumber.runtime.Runtime.runStep(Runtime.java:300)\r\n          \tat cucumber.runtime.model.StepContainer.runStep(StepContainer.java:44)\r\n          \tat cucumber.runtime.model.StepContainer.runSteps(StepContainer.java:39)\r\n          \tat cucumber.runtime.model.CucumberScenario.run(CucumberScenario.java:44)\r\n          \tat cucumber.runtime.model.CucumberFeature.run(CucumberFeature.java:165)\r\n          \tat cucumber.runtime.Runtime.run(Runtime.java:122)\r\n          \tat cucumber.api.cli.Main.run(Main.java:36)\r\n          \tat cucumber.api.cli.Main.main(Main.java:18)\r\n          \tat ✽.Given User navigates to stackoverflow website(C:/Users/MI/Desktop/CucumberFramework/CucumberFramework/src/test/java/CucumberFramework/featureFiles/Login.feature:5)\r\n         \r\n     Caused by: java.lang.reflect.InaccessibleObjectException: Unable to make field private final java.util.Comparator java.util.TreeMap.comparator accessible: module java.base does not &quot;opens java.util&quot; to unnamed module @5afa04c\r\n          \tat java.base/java.lang.reflect.AccessibleObject.checkCanSetAccessible(AccessibleObject.java:357)\r\n          \tat java.base/java.lang.reflect.AccessibleObject.checkCanSetAccessible(AccessibleObject.java:297)\r\n          \tat java.base/java.lang.reflect.Field.checkCanSetAccessible(Field.java:177)\r\n          \tat java.base/java.lang.reflect.Field.setAccessible(Field.java:171)\r\n          \tat cucumber.deps.com.thoughtworks.xstream.core.util.Fields.locate(Fields.java:39)\r\n          \tat cucumber.deps.com.thoughtworks.xstream.converters.collections.TreeMapConverter.&lt;clinit&gt;(TreeMapConverter.java:50)\r\n          \tat cucumber.deps.com.thoughtworks.xstream.XStream.setupConverters(XStream.java:820)\r\n          \tat cucumber.deps.com.thoughtworks.xstream.XStream.&lt;init&gt;(XStream.java:574)\r\n          \tat cucumber.deps.com.thoughtworks.xstream.XStream.&lt;init&gt;(XStream.java:530)\r\n          \tat cucumber.runtime.xstream.LocalizedXStreams$LocalizedXStream.&lt;init&gt;(LocalizedXStreams.java:50)\r\n          \tat cucumber.runtime.xstream.LocalizedXStreams.newXStream(LocalizedXStreams.java:37)\r\n          \tat cucumber.runtime.xstream.LocalizedXStreams.get(LocalizedXStreams.java:29)\r\n          \tat cucumber.runtime.StepDefinitionMatch.runStep(StepDefinitionMatch.java:37)\r\n          \tat cucumber.runtime.Runtime.runStep(Runtime.java:300)\r\n          \tat cucumber.runtime.model.StepContainer.runStep(StepContainer.java:44)\r\n          \tat cucumber.runtime.model.StepContainer.runSteps(StepContainer.java:39)\r\n          \tat cucumber.runtime.model.CucumberScenario.run(CucumberScenario.java:44)\r\n          \tat cucumber.runtime.model.CucumberFeature.run(CucumberFeature.java:165)\r\n          \tat cucumber.runtime.Runtime.run(Runtime.java:122)\r\n          \tat cucumber.api.cli.Main.run(Main.java:36)\r\n          \tat cucumber.api.cli.Main.main(Main.java:18)\r\n        \r\n    And User clicks on the login button on homepage         # LoginSteps.user_clicks_on_the_login_button_on_homepage()\r\n        \r\n    And User enters a valid username                        # LoginSteps.user_enters_a_valid_username()\r\n        \r\n    And User enters a valid password                        # LoginSteps.user_enters_a_valid_password()\r\n        \r\n    When User clicks on the login button                    # LoginSteps.user_clicks_on_the_login_button()\r\n        \r\n    Then User should be taken to the successfull login page # LoginSteps.user_should_be_taken_to_the_successfull_login_page()\r\n    \r\n    Failed scenarios:\r\n    C:/Users/MI/Desktop/CucumberFramework/CucumberFramework/src/test/java/CucumberFramework/featureFiles/Login.feature:4 # Scenario: Login into account with correct credentials\r\n    1 Scenarios (1 failed)\r\n    6 Steps (1 failed, 5 skipped)\r\n    0m0,357s\r\n    \r\n    java.lang.ExceptionInInitializerError\r\n    \tat cucumber.deps.com.thoughtworks.xstream.XStream.setupConverters(XStream.java:820)\r\n    \tat cucumber.deps.com.thoughtworks.xstream.XStream.&lt;init&gt;(XStream.java:574)\r\n    \tat cucumber.deps.com.thoughtworks.xstream.XStream.&lt;init&gt;(XStream.java:530)\r\n    \tat cucumber.runtime.xstream.LocalizedXStreams$LocalizedXStream.&lt;init&gt;(LocalizedXStreams.java:50)\r\n    \tat cucumber.runtime.xstream.LocalizedXStreams.newXStream(LocalizedXStreams.java:37)\r\n    \tat cucumber.runtime.xstream.LocalizedXStreams.get(LocalizedXStreams.java:29)\r\n    \tat cucumber.runtime.StepDefinitionMatch.runStep(StepDefinitionMatch.java:37)\r\n    \tat cucumber.runtime.Runtime.runStep(Runtime.java:300)\r\n    \tat cucumber.runtime.model.StepContainer.runStep(StepContainer.java:44)\r\n    \tat cucumber.runtime.model.StepContainer.runSteps(StepContainer.java:39)\r\n    \tat cucumber.runtime.model.CucumberScenario.run(CucumberScenario.java:44)\r\n    \tat cucumber.runtime.model.CucumberFeature.run(CucumberFeature.java:165)\r\n    \tat cucumber.runtime.Runtime.run(Runtime.java:122)\r\n    \tat cucumber.api.cli.Main.run(Main.java:36)\r\n    \tat cucumber.api.cli.Main.main(Main.java:18)\r\n    \tat ✽.Given User navigates to stackoverflow website(C:/Users/MI/Desktop/CucumberFramework/CucumberFramework/src/test/java/CucumberFramework/featureFiles/Login.feature:5)\r\n    \r\n    Caused by: java.lang.reflect.InaccessibleObjectException: Unable to make field private final java.util.Comparator java.util.TreeMap.comparator accessible: module java.base does not &quot;opens java.util&quot; to unnamed module @5afa04c\r\n    \tat java.base/java.lang.reflect.AccessibleObject.checkCanSetAccessible(AccessibleObject.java:357)\r\n    \tat java.base/java.lang.reflect.AccessibleObject.checkCanSetAccessible(AccessibleObject.java:297)\r\n    \tat java.base/java.lang.reflect.Field.checkCanSetAccessible(Field.java:177)\r\n    \tat java.base/java.lang.reflect.Field.setAccessible(Field.java:171)\r\n    \tat cucumber.deps.com.thoughtworks.xstream.core.util.Fields.locate(Fields.java:39)\r\n    \tat cucumber.deps.com.thoughtworks.xstream.converters.collections.TreeMapConverter.&lt;clinit&gt;(TreeMapConverter.java:50)\r\n    \tat cucumber.deps.com.thoughtworks.xstream.XStream.setupConverters(XStream.java:820)\r\n    \tat cucumber.deps.com.thoughtworks.xstream.XStream.&lt;init&gt;(XStream.java:574)\r\n    \tat cucumber.deps.com.thoughtworks.xstream.XStream.&lt;init&gt;(XStream.java:530)\r\n    \tat cucumber.runtime.xstream.LocalizedXStreams$LocalizedXStream.&lt;init&gt;(LocalizedXStreams.java:50)\r\n    \tat cucumber.runtime.xstream.LocalizedXStreams.newXStream(LocalizedXStreams.java:37)\r\n    \tat cucumber.runtime.xstream.LocalizedXStreams.get(LocalizedXStreams.java:29)\r\n    \tat cucumber.runtime.StepDefinitionMatch.runStep(StepDefinitionMatch.java:37)\r\n    \tat cucumber.runtime.Runtime.runStep(Runtime.java:300)\r\n    \tat cucumber.runtime.model.StepContainer.runStep(StepContainer.java:44)\r\n    \tat cucumber.runtime.model.StepContainer.runSteps(StepContainer.java:39)\r\n    \tat cucumber.runtime.model.CucumberScenario.run(CucumberScenario.java:44)\r\n    \tat cucumber.runtime.model.CucumberFeature.run(CucumberFeature.java:165)\r\n    \tat cucumber.runtime.Runtime.run(Runtime.java:122)\r\n    \tat cucumber.api.cli.Main.run(Main.java:36)\r\n    \tat cucumber.api.cli.Main.main(Main.java:18)*\r\n\r\n","title":"Unable to make field private final java.util.Comparator java.util.TreeMap.comparator accessible: java.base doesn&#39;t &quot;opens java.util&quot; to unnamed module","body":"<p>I have created a Cucumber feature file and steps file, then I have clicked &quot;Run configurations&quot; for feature file and I see the following in the console. How can I solve this problem?</p>\n<pre><code>*Feature: Login into account\n  Existing user should be able to login to account using correct credentials\n  \nScenario: Login into account with correct credentials     # C:/Users/MI/Desktop/CucumberFramework/CucumberFramework/src/test/java/CucumberFramework/featureFiles/Login.feature:4\n    \nGiven User navigates to stackoverflow website           # LoginSteps.user_navigates_to_stackoverflow_website()\n      java.lang.ExceptionInInitializerError\n        at cucumber.deps.com.thoughtworks.xstream.XStream.setupConverters(XStream.java:820)\n        at cucumber.deps.com.thoughtworks.xstream.XStream.&lt;init&gt;(XStream.java:574)\n        at cucumber.deps.com.thoughtworks.xstream.XStream.&lt;init&gt;(XStream.java:530)\n        at cucumber.runtime.xstream.LocalizedXStreams$LocalizedXStream.&lt;init&gt;(LocalizedXStreams.java:50)\n        at cucumber.runtime.xstream.LocalizedXStreams.newXStream(LocalizedXStreams.java:37)\n        at cucumber.runtime.xstream.LocalizedXStreams.get(LocalizedXStreams.java:29)\n        at cucumber.runtime.StepDefinitionMatch.runStep(StepDefinitionMatch.java:37)\n        at cucumber.runtime.Runtime.runStep(Runtime.java:300)\n        at cucumber.runtime.model.StepContainer.runStep(StepContainer.java:44)\n        at cucumber.runtime.model.StepContainer.runSteps(StepContainer.java:39)\n        at cucumber.runtime.model.CucumberScenario.run(CucumberScenario.java:44)\n        at cucumber.runtime.model.CucumberFeature.run(CucumberFeature.java:165)\n        at cucumber.runtime.Runtime.run(Runtime.java:122)\n        at cucumber.api.cli.Main.run(Main.java:36)\n        at cucumber.api.cli.Main.main(Main.java:18)\n        at ✽.Given User navigates to stackoverflow website(C:/Users/MI/Desktop/CucumberFramework/CucumberFramework/src/test/java/CucumberFramework/featureFiles/Login.feature:5)\n     \n Caused by: java.lang.reflect.InaccessibleObjectException: Unable to make field private final java.util.Comparator java.util.TreeMap.comparator accessible: module java.base does not &quot;opens java.util&quot; to unnamed module @5afa04c\n        at java.base/java.lang.reflect.AccessibleObject.checkCanSetAccessible(AccessibleObject.java:357)\n        at java.base/java.lang.reflect.AccessibleObject.checkCanSetAccessible(AccessibleObject.java:297)\n        at java.base/java.lang.reflect.Field.checkCanSetAccessible(Field.java:177)\n        at java.base/java.lang.reflect.Field.setAccessible(Field.java:171)\n        at cucumber.deps.com.thoughtworks.xstream.core.util.Fields.locate(Fields.java:39)\n        at cucumber.deps.com.thoughtworks.xstream.converters.collections.TreeMapConverter.&lt;clinit&gt;(TreeMapConverter.java:50)\n        at cucumber.deps.com.thoughtworks.xstream.XStream.setupConverters(XStream.java:820)\n        at cucumber.deps.com.thoughtworks.xstream.XStream.&lt;init&gt;(XStream.java:574)\n        at cucumber.deps.com.thoughtworks.xstream.XStream.&lt;init&gt;(XStream.java:530)\n        at cucumber.runtime.xstream.LocalizedXStreams$LocalizedXStream.&lt;init&gt;(LocalizedXStreams.java:50)\n        at cucumber.runtime.xstream.LocalizedXStreams.newXStream(LocalizedXStreams.java:37)\n        at cucumber.runtime.xstream.LocalizedXStreams.get(LocalizedXStreams.java:29)\n        at cucumber.runtime.StepDefinitionMatch.runStep(StepDefinitionMatch.java:37)\n        at cucumber.runtime.Runtime.runStep(Runtime.java:300)\n        at cucumber.runtime.model.StepContainer.runStep(StepContainer.java:44)\n        at cucumber.runtime.model.StepContainer.runSteps(StepContainer.java:39)\n        at cucumber.runtime.model.CucumberScenario.run(CucumberScenario.java:44)\n        at cucumber.runtime.model.CucumberFeature.run(CucumberFeature.java:165)\n        at cucumber.runtime.Runtime.run(Runtime.java:122)\n        at cucumber.api.cli.Main.run(Main.java:36)\n        at cucumber.api.cli.Main.main(Main.java:18)\n    \nAnd User clicks on the login button on homepage         # LoginSteps.user_clicks_on_the_login_button_on_homepage()\n    \nAnd User enters a valid username                        # LoginSteps.user_enters_a_valid_username()\n    \nAnd User enters a valid password                        # LoginSteps.user_enters_a_valid_password()\n    \nWhen User clicks on the login button                    # LoginSteps.user_clicks_on_the_login_button()\n    \nThen User should be taken to the successfull login page # LoginSteps.user_should_be_taken_to_the_successfull_login_page()\n\nFailed scenarios:\nC:/Users/MI/Desktop/CucumberFramework/CucumberFramework/src/test/java/CucumberFramework/featureFiles/Login.feature:4 # Scenario: Login into account with correct credentials\n1 Scenarios (1 failed)\n6 Steps (1 failed, 5 skipped)\n0m0,357s\n\njava.lang.ExceptionInInitializerError\n    at cucumber.deps.com.thoughtworks.xstream.XStream.setupConverters(XStream.java:820)\n    at cucumber.deps.com.thoughtworks.xstream.XStream.&lt;init&gt;(XStream.java:574)\n    at cucumber.deps.com.thoughtworks.xstream.XStream.&lt;init&gt;(XStream.java:530)\n    at cucumber.runtime.xstream.LocalizedXStreams$LocalizedXStream.&lt;init&gt;(LocalizedXStreams.java:50)\n    at cucumber.runtime.xstream.LocalizedXStreams.newXStream(LocalizedXStreams.java:37)\n    at cucumber.runtime.xstream.LocalizedXStreams.get(LocalizedXStreams.java:29)\n    at cucumber.runtime.StepDefinitionMatch.runStep(StepDefinitionMatch.java:37)\n    at cucumber.runtime.Runtime.runStep(Runtime.java:300)\n    at cucumber.runtime.model.StepContainer.runStep(StepContainer.java:44)\n    at cucumber.runtime.model.StepContainer.runSteps(StepContainer.java:39)\n    at cucumber.runtime.model.CucumberScenario.run(CucumberScenario.java:44)\n    at cucumber.runtime.model.CucumberFeature.run(CucumberFeature.java:165)\n    at cucumber.runtime.Runtime.run(Runtime.java:122)\n    at cucumber.api.cli.Main.run(Main.java:36)\n    at cucumber.api.cli.Main.main(Main.java:18)\n    at ✽.Given User navigates to stackoverflow website(C:/Users/MI/Desktop/CucumberFramework/CucumberFramework/src/test/java/CucumberFramework/featureFiles/Login.feature:5)\n\nCaused by: java.lang.reflect.InaccessibleObjectException: Unable to make field private final java.util.Comparator java.util.TreeMap.comparator accessible: module java.base does not &quot;opens java.util&quot; to unnamed module @5afa04c\n    at java.base/java.lang.reflect.AccessibleObject.checkCanSetAccessible(AccessibleObject.java:357)\n    at java.base/java.lang.reflect.AccessibleObject.checkCanSetAccessible(AccessibleObject.java:297)\n    at java.base/java.lang.reflect.Field.checkCanSetAccessible(Field.java:177)\n    at java.base/java.lang.reflect.Field.setAccessible(Field.java:171)\n    at cucumber.deps.com.thoughtworks.xstream.core.util.Fields.locate(Fields.java:39)\n    at cucumber.deps.com.thoughtworks.xstream.converters.collections.TreeMapConverter.&lt;clinit&gt;(TreeMapConverter.java:50)\n    at cucumber.deps.com.thoughtworks.xstream.XStream.setupConverters(XStream.java:820)\n    at cucumber.deps.com.thoughtworks.xstream.XStream.&lt;init&gt;(XStream.java:574)\n    at cucumber.deps.com.thoughtworks.xstream.XStream.&lt;init&gt;(XStream.java:530)\n    at cucumber.runtime.xstream.LocalizedXStreams$LocalizedXStream.&lt;init&gt;(LocalizedXStreams.java:50)\n    at cucumber.runtime.xstream.LocalizedXStreams.newXStream(LocalizedXStreams.java:37)\n    at cucumber.runtime.xstream.LocalizedXStreams.get(LocalizedXStreams.java:29)\n    at cucumber.runtime.StepDefinitionMatch.runStep(StepDefinitionMatch.java:37)\n    at cucumber.runtime.Runtime.runStep(Runtime.java:300)\n    at cucumber.runtime.model.StepContainer.runStep(StepContainer.java:44)\n    at cucumber.runtime.model.StepContainer.runSteps(StepContainer.java:39)\n    at cucumber.runtime.model.CucumberScenario.run(CucumberScenario.java:44)\n    at cucumber.runtime.model.CucumberFeature.run(CucumberFeature.java:165)\n    at cucumber.runtime.Runtime.run(Runtime.java:122)\n    at cucumber.api.cli.Main.run(Main.java:36)\n    at cucumber.api.cli.Main.main(Main.java:18)*\n</code></pre>\n"},{"tags":["java","sqlite","jdbc","resultset"],"comments":[{"owner":{"account_id":6740011,"reputation":46650,"user_id":5193536,"display_name":"nbk"},"score":3,"creation_date":1697759604,"post_id":77327563,"comment_id":136323586,"body_markdown":"use aliases if both have the same name","body":"use aliases if both have the same name"},{"owner":{"account_id":163324,"reputation":991,"user_id":385390,"accept_rate":91,"display_name":"bliako"},"score":0,"creation_date":1697759825,"post_id":77327563,"comment_id":136323600,"body_markdown":"oh you mean in the SQL? Ok that&#39;s a solution.","body":"oh you mean in the SQL? Ok that&#39;s a solution."},{"owner":{"account_id":213468,"reputation":103493,"user_id":466862,"display_name":"Mark Rotteveel"},"score":1,"creation_date":1697795894,"post_id":77327563,"comment_id":136327586,"body_markdown":"Or retrieve by index instead of by name. The JDBC API explicitly [documents this](https://docs.oracle.com/en/java/javase/17/docs/api/java.sql/java/sql/ResultSet.html).","body":"Or retrieve by index instead of by name. The JDBC API explicitly <a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.sql/java/sql/ResultSet.html\" rel=\"nofollow noreferrer\">documents this</a>."}],"owner":{"account_id":163324,"reputation":991,"user_id":385390,"accept_rate":91,"display_name":"bliako"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":29,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"closed_date":1697795632,"answer_count":0,"score":0,"last_activity_date":1697795653,"creation_date":1697758590,"question_id":77327563,"body_markdown":"Using JDBC and SQLite, the ResultSet obtained from a SELECT with an INNER JOIN may contain duplicate column-names, e.g.\r\n```\r\nSELECT A.id, B.id FROM A\r\nINNER JOIN B ON (A.id=B.ref)\r\n```\r\n\r\nHow can I get the ```A.id``` and ```B.id```?\r\n\r\np.s. I can see that ```ResultSetMetaData meta = rs.getMetaData()``` does contain the table name for each column, referenced by column number. But I can&#39;t see how to tell ```rs.getString(...)``` to give me ```A.id``` etc. ","title":"How to access a column by name from ResultSet of an INNER JOIN - duplicate column names?","body":"<p>Using JDBC and SQLite, the ResultSet obtained from a SELECT with an INNER JOIN may contain duplicate column-names, e.g.</p>\n<pre><code>SELECT A.id, B.id FROM A\nINNER JOIN B ON (A.id=B.ref)\n</code></pre>\n<p>How can I get the <code>A.id</code> and <code>B.id</code>?</p>\n<p>p.s. I can see that <code>ResultSetMetaData meta = rs.getMetaData()</code> does contain the table name for each column, referenced by column number. But I can't see how to tell <code>rs.getString(...)</code> to give me <code>A.id</code> etc.</p>\n"},{"tags":["java","jaxb","jakarta-migration"],"comments":[{"owner":{"account_id":29874264,"reputation":463,"user_id":22894892,"display_name":"Laurent Schoelens"},"score":0,"creation_date":1700554188,"post_id":77329894,"comment_id":136665718,"body_markdown":"I&#39;d like to help you solve your problem but could you precise your change from `javax.xml.bind` to `jakarta.xml.bind` ? You mean you changed your dependencies from `javax` to `jakarta` for jaxb ? What import is used in your `Car` class for `@XmlRootElement` ? Thanks","body":"I&#39;d like to help you solve your problem but could you precise your change from <code>javax.xml.bind</code> to <code>jakarta.xml.bind</code> ? You mean you changed your dependencies from <code>javax</code> to <code>jakarta</code> for jaxb ? What import is used in your <code>Car</code> class for <code>@XmlRootElement</code> ? Thanks"},{"owner":{"account_id":3217427,"reputation":895,"user_id":2715720,"accept_rate":82,"display_name":"rala"},"score":0,"creation_date":1701712303,"post_id":77329894,"comment_id":136807232,"body_markdown":"I have the same issue and we are using jakarta now everywhere _(I checked \neverywhere I could imagine it might be relevant)_","body":"I have the same issue and we are using jakarta now everywhere <i>(I checked  everywhere I could imagine it might be relevant)</i>"}],"owner":{"account_id":12135541,"reputation":35,"user_id":8861123,"display_name":"ritu"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":89,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1697795647,"creation_date":1697794967,"question_id":77329894,"body_markdown":"After changing javax.xml.bind to jakarta.xml.bind getting missing an @XmlRootElement annotation issue. Annotation  **@XmlRootElement** is already present in the Car class. can you please help me on this.\r\n\r\n\r\n&lt;!-- language: lang-css --&gt;\r\n\r\n    jakarta.xml.bind.MarshalException with linked exception: [com.sun.istack.SAXException2: unable to marshal type &quot;com.test.v2.Car&quot; as an element because it is missing an @XmlRootElement annotation]\r\n\r\n&lt;!-- end snippet --&gt;\r\nUsing code for Marshalling:\r\n\r\n\r\n&lt;!-- language: lang-js --&gt;\r\n\r\n            ByteArrayOutputStream byteArrayOutputStream = new ByteArrayOutputStream();\r\n            JAXBContext jaxbContext = JAXBContext.newInstance(Car.class);\r\n            Marshaller jaxbMarshaller = jaxbContext.createMarshaller();\r\n            jaxbMarshaller.setProperty(Marshaller.JAXB_FORMATTED_OUTPUT, true);\r\n            jaxbMarshaller.marshal(car, byteArrayOutputStream);\r\n            byteArrayOutputStream.close();\r\n            String payloadString = String.valueOf(byteArrayOutputStream);            \r\n\r\n&lt;!-- end snippet --&gt;\r\n\r\n\r\n\r\n&lt;!-- language: lang-js --&gt;\r\n\r\n    @XmlAccessorType(XmlAccessType.FIELD)\r\n    @XmlType(\r\n        name = &quot;&quot;,\r\n        propOrder = {\r\n            &quot;a&quot;,\r\n            &quot;b&quot;,\r\n            &quot;c&quot;\r\n        }\r\n    )\r\n    @XmlRootElement(\r\n        name = &quot;Car&quot;\r\n    )\r\n    public class Car {\r\n        String a;\r\n\r\n        String b;\r\n\r\n        String c;\r\n        public String getA() {\r\n            return this.A;\r\n        }\r\n\r\n        public String getB() {\r\n            return this.B;\r\n        }\r\n        public String getC() {\r\n            return this.C;\r\n        }\r\n    }\r\n\r\n&lt;!-- end snippet --&gt;\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n","title":"Changing javax.xml.bind to jakarta.xml.bind getting missing an @XmlRootElement annotation issue","body":"<p>After changing javax.xml.bind to jakarta.xml.bind getting missing an @XmlRootElement annotation issue. Annotation  <strong>@XmlRootElement</strong> is already present in the Car class. can you please help me on this.</p>\n<pre class=\"lang-css prettyprint-override\"><code>jakarta.xml.bind.MarshalException with linked exception: [com.sun.istack.SAXException2: unable to marshal type &quot;com.test.v2.Car&quot; as an element because it is missing an @XmlRootElement annotation]\n</code></pre>\n\n<p>Using code for Marshalling:</p>\n<pre class=\"lang-js prettyprint-override\"><code>        ByteArrayOutputStream byteArrayOutputStream = new ByteArrayOutputStream();\n        JAXBContext jaxbContext = JAXBContext.newInstance(Car.class);\n        Marshaller jaxbMarshaller = jaxbContext.createMarshaller();\n        jaxbMarshaller.setProperty(Marshaller.JAXB_FORMATTED_OUTPUT, true);\n        jaxbMarshaller.marshal(car, byteArrayOutputStream);\n        byteArrayOutputStream.close();\n        String payloadString = String.valueOf(byteArrayOutputStream);            \n</code></pre>\n\n<pre class=\"lang-js prettyprint-override\"><code>@XmlAccessorType(XmlAccessType.FIELD)\n@XmlType(\n    name = &quot;&quot;,\n    propOrder = {\n        &quot;a&quot;,\n        &quot;b&quot;,\n        &quot;c&quot;\n    }\n)\n@XmlRootElement(\n    name = &quot;Car&quot;\n)\npublic class Car {\n    String a;\n\n    String b;\n\n    String c;\n    public String getA() {\n        return this.A;\n    }\n\n    public String getB() {\n        return this.B;\n    }\n    public String getC() {\n        return this.C;\n    }\n}\n</code></pre>\n\n"},{"tags":["java","ssl","java.security"],"comments":[{"owner":{"account_id":372682,"reputation":22426,"user_id":721855,"display_name":"aled"},"score":0,"creation_date":1697801101,"post_id":77329876,"comment_id":136328549,"body_markdown":"Please provide a [minimal reproducible example](http://stackoverflow.com/help/minimal-reproducible-example). Which Jersey version are you using?","body":"Please provide a <a href=\"http://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>. Which Jersey version are you using?"}],"owner":{"account_id":27355785,"reputation":11,"user_id":20864199,"display_name":"Marcin"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":30,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1697795073,"creation_date":1697794879,"question_id":77329876,"body_markdown":"I have a Java client that connects to an HTTPS server. That server can use any of TLS1_1 TLS1_2 TLS1_3.\r\n\r\nWith default java.security settings:\r\n```\r\njdk.tls.disabledAlgorithms=SSLv3, TLSv1, RC4, DES, MD5withRSA, \\\r\n    DH keySize &lt; 1024, EC keySize &lt; 224, 3DES_EDE_CBC, anon, NULL\r\n```\r\nMy client fails miserably with:\r\n\r\n```\r\n javax.net.ssl.SSLHandshakeException: No appropriate protocol (protocol is disabled or cipher suites\r\n are inappropriate)\r\n```\r\nWhich I understand as _&quot;I don&#39;t have implementation for anything that is allowed&quot;_.\r\n\r\nWhen I comment out jdk.tls.disabledAlgorithms:\r\n\r\n```\r\n#jdk.tls.disabledAlgorithms=SSLv3, TLSv1, RC4, DES, MD5withRSA, \\\r\n    DH keySize &lt; 1024, EC keySize &lt; 224, 3DES_EDE_CBC, anon, NULL\r\n```\r\n\r\nMy client fails less miserably, but fails anyway due to the server not willing to talk over TLS1:\r\n\r\n```none\r\nProduced ClientHello handshake message (\r\n&quot;ClientHello&quot;: {\r\n  &quot;client version&quot;      : &quot;TLSv1&quot;,\r\n\r\n...\r\n\r\nReceived alert message (\r\n&quot;Alert&quot;: {\r\n  &quot;level&quot;      : &quot;fatal&quot;,\r\n  &quot;description&quot;: &quot;protocol_version&quot;\r\n}\r\n\r\n..\r\n\r\nFatal (PROTOCOL_VERSION): Received\r\nfatal alert: protocol_version (\r\n&quot;throwable&quot; : {\r\n  javax.net.ssl.SSLHandshakeException: Received fatal alert: protocol_version\r\n```\r\n\r\nI am using OpenJDK 17 on Red Hat Enterprise Server 8.7. My Java client uses Jersey REST client.\r\n\r\nWhy does my Java client not want to start handshake with higher TLS versions?","title":"Java SSL connection fails after disabling TLS1","body":"<p>I have a Java client that connects to an HTTPS server. That server can use any of TLS1_1 TLS1_2 TLS1_3.</p>\n<p>With default java.security settings:</p>\n<pre><code>jdk.tls.disabledAlgorithms=SSLv3, TLSv1, RC4, DES, MD5withRSA, \\\n    DH keySize &lt; 1024, EC keySize &lt; 224, 3DES_EDE_CBC, anon, NULL\n</code></pre>\n<p>My client fails miserably with:</p>\n<pre><code> javax.net.ssl.SSLHandshakeException: No appropriate protocol (protocol is disabled or cipher suites\n are inappropriate)\n</code></pre>\n<p>Which I understand as <em>&quot;I don't have implementation for anything that is allowed&quot;</em>.</p>\n<p>When I comment out jdk.tls.disabledAlgorithms:</p>\n<pre><code>#jdk.tls.disabledAlgorithms=SSLv3, TLSv1, RC4, DES, MD5withRSA, \\\n    DH keySize &lt; 1024, EC keySize &lt; 224, 3DES_EDE_CBC, anon, NULL\n</code></pre>\n<p>My client fails less miserably, but fails anyway due to the server not willing to talk over TLS1:</p>\n<pre class=\"lang-none prettyprint-override\"><code>Produced ClientHello handshake message (\n&quot;ClientHello&quot;: {\n  &quot;client version&quot;      : &quot;TLSv1&quot;,\n\n...\n\nReceived alert message (\n&quot;Alert&quot;: {\n  &quot;level&quot;      : &quot;fatal&quot;,\n  &quot;description&quot;: &quot;protocol_version&quot;\n}\n\n..\n\nFatal (PROTOCOL_VERSION): Received\nfatal alert: protocol_version (\n&quot;throwable&quot; : {\n  javax.net.ssl.SSLHandshakeException: Received fatal alert: protocol_version\n</code></pre>\n<p>I am using OpenJDK 17 on Red Hat Enterprise Server 8.7. My Java client uses Jersey REST client.</p>\n<p>Why does my Java client not want to start handshake with higher TLS versions?</p>\n"},{"tags":["java","android","sqlite"],"comments":[{"owner":{"account_id":13789219,"reputation":48460,"user_id":9952196,"display_name":"Shawn"},"score":0,"creation_date":1563523494,"post_id":57107489,"comment_id":100735952,"body_markdown":"Storing your data as a binary blob and not a base-64 encoded string will save space. But iirc there&#39;s a fairly small upper limit on Android&#39;s version of sqlite for how big a blob or string can be.","body":"Storing your data as a binary blob and not a base-64 encoded string will save space. But iirc there&#39;s a fairly small upper limit on Android&#39;s version of sqlite for how big a blob or string can be."}],"answers":[{"tags":[],"owner":{"account_id":2568972,"reputation":1742,"user_id":2228226,"display_name":"Hardik Bambhania"},"down_vote_count":2,"up_vote_count":0,"is_accepted":false,"score":-2,"last_activity_date":1563521507,"creation_date":1563521507,"answer_id":57107608,"question_id":57107489,"body_markdown":"Store image in device under your application private storage.And store that image path in database. ","title":"SQLiteBlobTooBigException: Row too big to fit into CursorWindow while writing to DB","body":"<p>Store image in device under your application private storage.And store that image path in database. </p>\n"},{"tags":[],"owner":{"account_id":6077735,"reputation":52951,"user_id":4744514,"accept_rate":96,"display_name":"MikeT"},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1640094301,"creation_date":1563527937,"answer_id":57109330,"question_id":57107489,"body_markdown":"&gt; What I was thinking of doing is to store the image in the device\r\n&gt; itself and just store the path in the DB.\r\n\r\nNot going to answer, as you are the best to answer that question.\r\n\r\n&gt; Is there some compression we can do to the image to reduce its file\r\n&gt; size?\r\n\r\nPossibly but that isn&#39;t necessarily going to eliminate the problem. As even if you compressed the images to say 2Mb (half the **4Mb** limit of a Cursor Window ) then the likeliehood is that only 1 row would fit into a cursor window at a time. The result would likely be very poor performance and the bottlehead isn&#39;t really SQLite but handling the Cursor.\r\n\r\n- **not recommended**\r\n\r\nAnother solution, but still costly, would be to store the image in parts/chunks, an example of doing so (noting that no tuning was undertaken to establish the 256kb chunk size) can be found [here](https://stackoverflow.com/questions/55321154/how-to-use-images-in-android-sqlite-that-are-larger-than-the-limitations-of-a-cu/55321155#55321155). **Noting that the response time, is considered very poor**.\r\n\r\n- **not recommended** but if poor performance is not an issue then could be a solution\r\n\r\nThe solution that doesn&#39;t require the overheads of additional compression/decompsression is to store images or images over a set size in the file system (e.g. external storage) and store the path or a part of the path.  \r\n\r\n- The latter option, storing small images in the database and larger images as files, could take advantage of [35% Faster Than The Filesystem](https://www.sqlite.org/fasterthanfs.html)).\r\n\r\n- **an example of a mixed path/blob solution in in the [answer here](https://stackoverflow.com/questions/51633055/guide-to-use-a-large-sqlite-propulated-database/51633408#51633408).**\r\n  - **Note** this example could be used as the basis for both just storing paths or for a mixed solution.\r\n\r\n- **recommended**\r\n\r\n\r\n&gt; Is it possible to tune some db setting to ensure that it can handle\r\n&gt; larger image sizes?\r\n\r\nYes. \r\n\r\nYou could consider:-\r\n\r\n- optimising your queries. See, as a start, [EXPLAIN QUERY PLAN](https://www.sqlite.org/eqp.html) and [The SQLite Query Optimizer Overview](https://www.sqlite.org/optoverview.html)\r\n- increasing the page size (noting the limitations as when), \r\n- increasing the [cache size](https://www.sqlite.org/pragma.html#pragma_cache_size), \r\n- risk turning [synchronous](https://www.sqlite.org/pragma.html#pragma_synchronous) to off and \r\n- risk using [exclusive locking](https://www.sqlite.org/pragma.html#pragma_locking_mode).\r\n- compiling your own tuned version of SQLite applying [compile time options](https://www.sqlite.org/compile.html) to suit.\r\n- further reading the above links as there may be additional applicable tuning settings.\r\n","title":"SQLiteBlobTooBigException: Row too big to fit into CursorWindow while writing to DB","body":"<blockquote>\n<p>What I was thinking of doing is to store the image in the device\nitself and just store the path in the DB.</p>\n</blockquote>\n<p>Not going to answer, as you are the best to answer that question.</p>\n<blockquote>\n<p>Is there some compression we can do to the image to reduce its file\nsize?</p>\n</blockquote>\n<p>Possibly but that isn't necessarily going to eliminate the problem. As even if you compressed the images to say 2Mb (half the <strong>4Mb</strong> limit of a Cursor Window ) then the likeliehood is that only 1 row would fit into a cursor window at a time. The result would likely be very poor performance and the bottlehead isn't really SQLite but handling the Cursor.</p>\n<ul>\n<li><strong>not recommended</strong></li>\n</ul>\n<p>Another solution, but still costly, would be to store the image in parts/chunks, an example of doing so (noting that no tuning was undertaken to establish the 256kb chunk size) can be found <a href=\"https://stackoverflow.com/questions/55321154/how-to-use-images-in-android-sqlite-that-are-larger-than-the-limitations-of-a-cu/55321155#55321155\">here</a>. <strong>Noting that the response time, is considered very poor</strong>.</p>\n<ul>\n<li><strong>not recommended</strong> but if poor performance is not an issue then could be a solution</li>\n</ul>\n<p>The solution that doesn't require the overheads of additional compression/decompsression is to store images or images over a set size in the file system (e.g. external storage) and store the path or a part of the path.</p>\n<ul>\n<li><p>The latter option, storing small images in the database and larger images as files, could take advantage of <a href=\"https://www.sqlite.org/fasterthanfs.html\" rel=\"nofollow noreferrer\">35% Faster Than The Filesystem</a>).</p>\n</li>\n<li><p><strong>an example of a mixed path/blob solution in in the <a href=\"https://stackoverflow.com/questions/51633055/guide-to-use-a-large-sqlite-propulated-database/51633408#51633408\">answer here</a>.</strong></p>\n<ul>\n<li><strong>Note</strong> this example could be used as the basis for both just storing paths or for a mixed solution.</li>\n</ul>\n</li>\n<li><p><strong>recommended</strong></p>\n</li>\n</ul>\n<blockquote>\n<p>Is it possible to tune some db setting to ensure that it can handle\nlarger image sizes?</p>\n</blockquote>\n<p>Yes.</p>\n<p>You could consider:-</p>\n<ul>\n<li>optimising your queries. See, as a start, <a href=\"https://www.sqlite.org/eqp.html\" rel=\"nofollow noreferrer\">EXPLAIN QUERY PLAN</a> and <a href=\"https://www.sqlite.org/optoverview.html\" rel=\"nofollow noreferrer\">The SQLite Query Optimizer Overview</a></li>\n<li>increasing the page size (noting the limitations as when),</li>\n<li>increasing the <a href=\"https://www.sqlite.org/pragma.html#pragma_cache_size\" rel=\"nofollow noreferrer\">cache size</a>,</li>\n<li>risk turning <a href=\"https://www.sqlite.org/pragma.html#pragma_synchronous\" rel=\"nofollow noreferrer\">synchronous</a> to off and</li>\n<li>risk using <a href=\"https://www.sqlite.org/pragma.html#pragma_locking_mode\" rel=\"nofollow noreferrer\">exclusive locking</a>.</li>\n<li>compiling your own tuned version of SQLite applying <a href=\"https://www.sqlite.org/compile.html\" rel=\"nofollow noreferrer\">compile time options</a> to suit.</li>\n<li>further reading the above links as there may be additional applicable tuning settings.</li>\n</ul>\n"},{"tags":[],"owner":{"account_id":1742047,"reputation":998,"user_id":1593170,"accept_rate":3,"display_name":"Omi"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1565780372,"creation_date":1565780372,"answer_id":57493390,"question_id":57107489,"body_markdown":"Yes - this is a genuine issue. But I implemented a fix for this. We basically biometric images in our document. what I do now: store the individual biometric entities (Ex: fingerprint) in separate documents. Have a master document that has the ID of this doc.\r\n\r\nEx: we capture thumb and index finger for a person. We store 2 docs to store them - lets call them thumb.json and index.json. These have doc ID as thumb_100 and index_100 respectively. Now, we have a master biometric doc that looks something like:\r\n\r\n&quot;thumb&quot;: &quot;thumb_100&quot;\r\n&quot;index&quot;: &quot;index_100&quot;\r\n\r\nThis helps us get the thumb and index finger print from the master document. More importantly, it ensures that an individual row size does not exceed the limit or cause an exception as seen earlier.","title":"SQLiteBlobTooBigException: Row too big to fit into CursorWindow while writing to DB","body":"<p>Yes - this is a genuine issue. But I implemented a fix for this. We basically biometric images in our document. what I do now: store the individual biometric entities (Ex: fingerprint) in separate documents. Have a master document that has the ID of this doc.</p>\n\n<p>Ex: we capture thumb and index finger for a person. We store 2 docs to store them - lets call them thumb.json and index.json. These have doc ID as thumb_100 and index_100 respectively. Now, we have a master biometric doc that looks something like:</p>\n\n<p>\"thumb\": \"thumb_100\"\n\"index\": \"index_100\"</p>\n\n<p>This helps us get the thumb and index finger print from the master document. More importantly, it ensures that an individual row size does not exceed the limit or cause an exception as seen earlier.</p>\n"},{"tags":[],"owner":{"account_id":15078265,"reputation":79,"user_id":10881655,"display_name":"Dropin&#39; Science"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1576452100,"creation_date":1576452100,"answer_id":59348942,"question_id":57107489,"body_markdown":"I found how to use length() and substr() to request only 1MB (the max for CursorWindow is 2MB), maybe it will [help][1]. (in case users have this issue and you need to avoid the exception) Also, you could use `context.getContentResolver().query()` with a selection that only includes the relevant columns, that way you won&#39;t load data related to the other columns (and save some space). Otherwise, I would recommend the first option you suggested, which is to store the file in internal storage and store the filepath in the database.\r\n\r\n\r\n  [1]: https://stackoverflow.com/questions/59348784/sqliteblobtoobigexception-still-occurs-after-dividing-the-request-in-chunks-of-1","title":"SQLiteBlobTooBigException: Row too big to fit into CursorWindow while writing to DB","body":"<p>I found how to use length() and substr() to request only 1MB (the max for CursorWindow is 2MB), maybe it will <a href=\"https://stackoverflow.com/questions/59348784/sqliteblobtoobigexception-still-occurs-after-dividing-the-request-in-chunks-of-1\">help</a>. (in case users have this issue and you need to avoid the exception) Also, you could use <code>context.getContentResolver().query()</code> with a selection that only includes the relevant columns, that way you won't load data related to the other columns (and save some space). Otherwise, I would recommend the first option you suggested, which is to store the file in internal storage and store the filepath in the database.</p>\n"},{"tags":[],"owner":{"account_id":9815465,"reputation":709,"user_id":7272120,"display_name":"J.Dragon"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1581956686,"creation_date":1581956686,"answer_id":60266601,"question_id":57107489,"body_markdown":"If you want to save image as a byte array in SQLite or Room, you should **compress** the byte array.\r\n\r\nlike this\r\n\r\n    Bitmap bmp = intent.getExtras().get(&quot;data&quot;);\r\n    ByteArrayOutputStream stream = new ByteArrayOutputStream();\r\n    bmp.compress(Bitmap.CompressFormat.PNG, 100, stream);\r\n    byte[] byteArray = stream.toByteArray();\r\n   ","title":"SQLiteBlobTooBigException: Row too big to fit into CursorWindow while writing to DB","body":"<p>If you want to save image as a byte array in SQLite or Room, you should <strong>compress</strong> the byte array.</p>\n\n<p>like this</p>\n\n<pre><code>Bitmap bmp = intent.getExtras().get(\"data\");\nByteArrayOutputStream stream = new ByteArrayOutputStream();\nbmp.compress(Bitmap.CompressFormat.PNG, 100, stream);\nbyte[] byteArray = stream.toByteArray();\n</code></pre>\n"},{"tags":[],"owner":{"account_id":4548703,"reputation":91,"user_id":3694451,"display_name":"Leo Vitor"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1599612175,"creation_date":1599612175,"answer_id":63803272,"question_id":57107489,"body_markdown":"I resolved it as follows: When I search for images from my remote bank, I check their size and if they are larger than 500 kb, I do a resizing process.\r\n\r\n\r\n    produto.setImagem_img(imagemTratada(rs.getBytes(&quot;imagem_img&quot;)));\r\n\r\n\r\nThe method that does the magic:\r\n\r\n    private byte[] imagemTratada(byte[] imagem_img){\r\n\r\n        while (imagem_img.length &gt; 500000){\r\n            Bitmap bitmap = BitmapFactory.decodeByteArray(imagem_img, 0, imagem_img.length);\r\n            Bitmap resized = Bitmap.createScaledBitmap(bitmap, (int)(bitmap.getWidth()*0.8), (int)(bitmap.getHeight()*0.8), true);\r\n            ByteArrayOutputStream stream = new ByteArrayOutputStream();\r\n            resized.compress(Bitmap.CompressFormat.PNG, 100, stream);\r\n            imagem_img = stream.toByteArray();\r\n        }\r\n        return imagem_img;\r\n\r\n    }","title":"SQLiteBlobTooBigException: Row too big to fit into CursorWindow while writing to DB","body":"<p>I resolved it as follows: When I search for images from my remote bank, I check their size and if they are larger than 500 kb, I do a resizing process.</p>\n<pre><code>produto.setImagem_img(imagemTratada(rs.getBytes(&quot;imagem_img&quot;)));\n</code></pre>\n<p>The method that does the magic:</p>\n<pre><code>private byte[] imagemTratada(byte[] imagem_img){\n\n    while (imagem_img.length &gt; 500000){\n        Bitmap bitmap = BitmapFactory.decodeByteArray(imagem_img, 0, imagem_img.length);\n        Bitmap resized = Bitmap.createScaledBitmap(bitmap, (int)(bitmap.getWidth()*0.8), (int)(bitmap.getHeight()*0.8), true);\n        ByteArrayOutputStream stream = new ByteArrayOutputStream();\n        resized.compress(Bitmap.CompressFormat.PNG, 100, stream);\n        imagem_img = stream.toByteArray();\n    }\n    return imagem_img;\n\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":10867051,"reputation":1119,"user_id":7990095,"accept_rate":50,"display_name":"ndreisg"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1697794496,"creation_date":1697794496,"answer_id":77329828,"question_id":57107489,"body_markdown":"I recently stumbled over the same issue and after quite some research I found this fix:\r\n\r\nAdd the following code to your MainApplication.onCreate\r\n\r\n    try {\r\n      Field field = CursorWindow.class.getDeclaredField(&quot;sCursorWindowSize&quot;);\r\n      field.setAccessible(true);\r\n      field.set(null, 100 * 1024 * 1024); // 100MB is the new size\r\n    } catch (Exception e) {\r\n      if (BuildConfig.DEBUG) {\r\n        e.printStackTrace();\r\n      }\r\n    }\r\n\r\nyou need the following imports:\r\n\r\n    import android.database.CursorWindow;\r\n    import java.lang.reflect.Field;\r\n\r\nCredits to [@bashen1][1] who posted this solution [in this github issue][2] \r\n\r\n\r\n  [1]: https://github.com/bashen1\r\n  [2]: https://github.com/andpor/react-native-sqlite-storage/issues/364#issuecomment-526423153","title":"SQLiteBlobTooBigException: Row too big to fit into CursorWindow while writing to DB","body":"<p>I recently stumbled over the same issue and after quite some research I found this fix:</p>\n<p>Add the following code to your MainApplication.onCreate</p>\n<pre><code>try {\n  Field field = CursorWindow.class.getDeclaredField(&quot;sCursorWindowSize&quot;);\n  field.setAccessible(true);\n  field.set(null, 100 * 1024 * 1024); // 100MB is the new size\n} catch (Exception e) {\n  if (BuildConfig.DEBUG) {\n    e.printStackTrace();\n  }\n}\n</code></pre>\n<p>you need the following imports:</p>\n<pre><code>import android.database.CursorWindow;\nimport java.lang.reflect.Field;\n</code></pre>\n<p>Credits to <a href=\"https://github.com/bashen1\" rel=\"nofollow noreferrer\">@bashen1</a> who posted this solution <a href=\"https://github.com/andpor/react-native-sqlite-storage/issues/364#issuecomment-526423153\" rel=\"nofollow noreferrer\">in this github issue</a></p>\n"}],"owner":{"account_id":1742047,"reputation":998,"user_id":1593170,"accept_rate":3,"display_name":"Omi"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":19621,"favorite_count":0,"down_vote_count":0,"up_vote_count":6,"answer_count":7,"score":6,"last_activity_date":1697794496,"creation_date":1563521065,"question_id":57107489,"body_markdown":"I see the above error when I try to add to sqllite DB on android.I am using cloudant library. Here&#39;s the stack trace:\r\n\r\n    2019-07-17 18:04:48.292 5522-5753/org.iprd.identity E/SQLiteQuery: exception: Row too big to fit into CursorWindow requiredPos=0, totalRows=1; query: SELECT docs.docid, docs.doc_id, revid, sequence, current, deleted, parent, json FROM revs, docs WHERE docs.docid=? AND revs.doc_id=docs.doc_id AND revid=? ORDER BY revs.sequence LIMIT 1\r\n    2019-07-17 18:04:48.302 5522-5522/org.iprd.identity E/DatabaseImpl: Failed to create document\r\n        java.util.concurrent.ExecutionException: android.database.sqlite.SQLiteBlobTooBigException: Row too big to fit into CursorWindow requiredPos=0, totalRows=1\r\n            at java.util.concurrent.FutureTask.report(FutureTask.java:123)\r\n            at java.util.concurrent.FutureTask.get(FutureTask.java:193)\r\n            at com.cloudant.sync.internal.documentstore.DatabaseImpl.get(DatabaseImpl.java:1084)\r\n            at com.cloudant.sync.internal.documentstore.DatabaseImpl.create(DatabaseImpl.java:925)\r\n\r\nI never got this issue previously, however, I recently made a change and started using a 3rd party tool to give me some images. With this new tool, the image sizes seem to be much bigger than before. I am storing these images in my db as a string by doing a Base64 encoding of the image. However, with this new tool, while storing the image, I get the above exception. \r\n\r\nI have a unit test which I tried using one of the generated strings from this image, but that also throws an error that the string size is too large and does not even compile.\r\n\r\nWhat is the best approach to solve this? - \r\n\r\n1. What I was thinking of doing is to store the image in the device itself and just store the path in the DB.\r\n\r\n2. Is there some compression we can do to the image to reduce its file size?\r\n\r\n3. Is it possible to tune some db setting to ensure that it can handle larger image sizes?\r\n\r\nThanks in advance!\r\n\r\n","title":"SQLiteBlobTooBigException: Row too big to fit into CursorWindow while writing to DB","body":"<p>I see the above error when I try to add to sqllite DB on android.I am using cloudant library. Here's the stack trace:</p>\n\n<pre><code>2019-07-17 18:04:48.292 5522-5753/org.iprd.identity E/SQLiteQuery: exception: Row too big to fit into CursorWindow requiredPos=0, totalRows=1; query: SELECT docs.docid, docs.doc_id, revid, sequence, current, deleted, parent, json FROM revs, docs WHERE docs.docid=? AND revs.doc_id=docs.doc_id AND revid=? ORDER BY revs.sequence LIMIT 1\n2019-07-17 18:04:48.302 5522-5522/org.iprd.identity E/DatabaseImpl: Failed to create document\n    java.util.concurrent.ExecutionException: android.database.sqlite.SQLiteBlobTooBigException: Row too big to fit into CursorWindow requiredPos=0, totalRows=1\n        at java.util.concurrent.FutureTask.report(FutureTask.java:123)\n        at java.util.concurrent.FutureTask.get(FutureTask.java:193)\n        at com.cloudant.sync.internal.documentstore.DatabaseImpl.get(DatabaseImpl.java:1084)\n        at com.cloudant.sync.internal.documentstore.DatabaseImpl.create(DatabaseImpl.java:925)\n</code></pre>\n\n<p>I never got this issue previously, however, I recently made a change and started using a 3rd party tool to give me some images. With this new tool, the image sizes seem to be much bigger than before. I am storing these images in my db as a string by doing a Base64 encoding of the image. However, with this new tool, while storing the image, I get the above exception. </p>\n\n<p>I have a unit test which I tried using one of the generated strings from this image, but that also throws an error that the string size is too large and does not even compile.</p>\n\n<p>What is the best approach to solve this? - </p>\n\n<ol>\n<li><p>What I was thinking of doing is to store the image in the device itself and just store the path in the DB.</p></li>\n<li><p>Is there some compression we can do to the image to reduce its file size?</p></li>\n<li><p>Is it possible to tune some db setting to ensure that it can handle larger image sizes?</p></li>\n</ol>\n\n<p>Thanks in advance!</p>\n"},{"tags":["java","spring","hibernate"],"answers":[{"tags":[],"owner":{"account_id":8884226,"reputation":514,"user_id":6633045,"display_name":"phuongnq1995"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1697623506,"creation_date":1697623506,"answer_id":77315338,"question_id":77312100,"body_markdown":"So what happened when you tried to save `permissionEntity` (without fetching its reference) is Hibernate generated several queries: \r\n\r\n 1. Select by id(`15991`) query to check wether insert or update -&gt; Existed!\r\n 2. Update all columns of `permissionEntity`\r\n 3. There is only 1 item in `Set&lt;Role&gt; roles` and this is a new object reference -&gt; Insert to relation table.\r\n\r\nTo solve this, let&#39;s update your service by fetching entity instead of mapping them from dto.\r\n```\r\nPermission permissionEntity = permissionRepository.findOne(permissionDto.getId());\r\n// Update properties by mapper\r\n\r\nSet&lt;Role&gt; roles = roleRepository.findByIdIn(permissionDto.getRoleIds());\r\npermissionEntity.getRoles().clear();\r\npermissionEntity.getRoles().addAll(roles);\r\npermissionRepository.save(permissionEntity)\r\n```\r\n\r\nYou can refer to this [doc](https://vladmihalcea.com/the-best-way-to-use-the-manytomany-annotation-with-jpa-and-hibernate).\r\n","title":"Refresh many to many relations on update in Hibernate","body":"<p>So what happened when you tried to save <code>permissionEntity</code> (without fetching its reference) is Hibernate generated several queries:</p>\n<ol>\n<li>Select by id(<code>15991</code>) query to check wether insert or update -&gt; Existed!</li>\n<li>Update all columns of <code>permissionEntity</code></li>\n<li>There is only 1 item in <code>Set&lt;Role&gt; roles</code> and this is a new object reference -&gt; Insert to relation table.</li>\n</ol>\n<p>To solve this, let's update your service by fetching entity instead of mapping them from dto.</p>\n<pre><code>Permission permissionEntity = permissionRepository.findOne(permissionDto.getId());\n// Update properties by mapper\n\nSet&lt;Role&gt; roles = roleRepository.findByIdIn(permissionDto.getRoleIds());\npermissionEntity.getRoles().clear();\npermissionEntity.getRoles().addAll(roles);\npermissionRepository.save(permissionEntity)\n</code></pre>\n<p>You can refer to this <a href=\"https://vladmihalcea.com/the-best-way-to-use-the-manytomany-annotation-with-jpa-and-hibernate\" rel=\"nofollow noreferrer\">doc</a>.</p>\n"},{"tags":[],"owner":{"account_id":6742219,"reputation":3296,"user_id":5922757,"accept_rate":100,"display_name":"Jezor"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1697793880,"creation_date":1697793880,"answer_id":77329773,"question_id":77312100,"body_markdown":"Your relations are not symmetric. If you change:\r\n\r\n    @ManyToMany(cascade = {MERGE}, fetch = FetchType.EAGER)\r\n    @JoinTable(\r\n            name = &quot;roles_permissions&quot;,\r\n            joinColumns = {@JoinColumn(name = &quot;permission_id&quot;)},\r\n            inverseJoinColumns = {@JoinColumn(name = &quot;role_id&quot;)}\r\n    )\r\n    @ToString.Exclude\r\n    private Set&lt;Role&gt; roles = new HashSet&lt;&gt;();\r\n\r\nAnd:\r\n\r\n    @ManyToMany(cascade = {MERGE}, fetch = FetchType.EAGER)\r\n    @JoinTable(\r\n            name = &quot;roles_permissions&quot;,\r\n            joinColumns = {@JoinColumn(name = &quot;role_id&quot;)},\r\n            inverseJoinColumns = {@JoinColumn(name = &quot;permission_id&quot;)}\r\n    )\r\n    @ToString.Exclude\r\n    private Set&lt;Permission&gt; permissions = new HashSet&lt;&gt;();\r\n\r\nThen the update will propagade correctly.","title":"Refresh many to many relations on update in Hibernate","body":"<p>Your relations are not symmetric. If you change:</p>\n<pre><code>@ManyToMany(cascade = {MERGE}, fetch = FetchType.EAGER)\n@JoinTable(\n        name = &quot;roles_permissions&quot;,\n        joinColumns = {@JoinColumn(name = &quot;permission_id&quot;)},\n        inverseJoinColumns = {@JoinColumn(name = &quot;role_id&quot;)}\n)\n@ToString.Exclude\nprivate Set&lt;Role&gt; roles = new HashSet&lt;&gt;();\n</code></pre>\n<p>And:</p>\n<pre><code>@ManyToMany(cascade = {MERGE}, fetch = FetchType.EAGER)\n@JoinTable(\n        name = &quot;roles_permissions&quot;,\n        joinColumns = {@JoinColumn(name = &quot;role_id&quot;)},\n        inverseJoinColumns = {@JoinColumn(name = &quot;permission_id&quot;)}\n)\n@ToString.Exclude\nprivate Set&lt;Permission&gt; permissions = new HashSet&lt;&gt;();\n</code></pre>\n<p>Then the update will propagade correctly.</p>\n"}],"owner":{"account_id":26289969,"reputation":313,"user_id":19957114,"display_name":"dev-rifaii"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":65,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":77329773,"answer_count":2,"score":0,"last_activity_date":1697793880,"creation_date":1697574711,"question_id":77312100,"body_markdown":"I have 2 entities with many to many relationship:\r\n\r\nPermission (AbstractActiveEntity simply has 2 fields, Long Id and boolean Active):\r\n\r\n```java\r\n@Entity(name = &quot;Permission&quot;)\r\n@NoArgsConstructor\r\n@SuperBuilder(toBuilder = true)\r\n@Table(name = &quot;permission&quot;)\r\n@AllArgsConstructor\r\n@Getter\r\n@Setter\r\n@ToString\r\npublic class Permission extends AbstractActiveEntity {\r\n\r\n    String code;\r\n\r\n    @ManyToMany(\r\n            mappedBy = &quot;permissions&quot;,\r\n            fetch = FetchType.LAZY,\r\n            cascade = {MERGE},\r\n            targetEntity = Role.class\r\n    )\r\n    @ToString.Exclude\r\n    private Set&lt;Role&gt; roles = new HashSet&lt;&gt;();\r\n\r\n//equals and hashcode\r\n}\r\n```\r\n\r\nand this Role entity:\r\n\r\n```java\r\n@Getter\r\n@SuperBuilder(toBuilder = true)\r\n@Entity\r\n@Setter\r\n@ToString\r\n@RequiredArgsConstructor\r\npublic class Role extends AbstractActiveEntity {\r\n\r\n    private String name;\r\n\r\n    @ManyToMany(cascade = {MERGE})\r\n    @JoinTable(\r\n            name = &quot;roles_permissions&quot;,\r\n            joinColumns = {@JoinColumn(name = &quot;role_id&quot;)},\r\n            inverseJoinColumns = {@JoinColumn(name = &quot;permission_id&quot;)}\r\n    )\r\n    private Set&lt;Permission&gt; permissions = new HashSet&lt;&gt;();\r\n//equals and hashcode\r\n}\r\n```\r\n\r\nThis is my update method:\r\n\r\n```java\r\n    public PermissionDto update(@Valid PermissionDto permissionDto) {\r\n        Permission permissionEntity = permissionMapper.toEntity(permissionDto);\r\n        return permissionMapper.toDto(permissionRepository.save(permissionEntity));\r\n    }\r\n```\r\n\r\nUpdate API:\r\n\r\n```java\r\n    @PatchMapping\r\n    public PermissionDto update(@RequestBody @Valid PermissionDto permissionDto) {\r\n        return permissionService.update(permissionDto);\r\n    }\r\n```\r\n\r\nPermissionDto:\r\n\r\n```java\r\n@Getter\r\n@Setter\r\n@SuperBuilder(toBuilder = true)\r\n@NoArgsConstructor\r\npublic class PermissionDto extends AbstractActiveDto {\r\n\r\n    @NotBlank\r\n    private String code;\r\n\r\n    private Set&lt;Long&gt; rolesIds = new HashSet&lt;&gt;();\r\n\r\n}\r\n```\r\n\r\nRoleDto:\r\n\r\n```java\r\n@NoArgsConstructor\r\n@SuperBuilder(toBuilder=true)\r\n@Data\r\npublic class RoleDto extends AbstractActiveDto {\r\n\r\n    @NotBlank\r\n    private String name;\r\n\r\n    @ToString.Exclude\r\n    private Set&lt;Long&gt; permissionsIds;\r\n\r\n}\r\n```\r\n\r\nPermissionMapper:\r\n\r\n```java\r\n@Mapper(componentModel = &quot;spring&quot;,\r\n        unmappedTargetPolicy = ReportingPolicy.WARN,\r\n        builder = @Builder(disableBuilder = true),\r\n        uses = RoleMapper.class)\r\npublic interface PermissionMapper extends EntityMapper&lt;Permission, PermissionDto&gt; {\r\n\r\n    @Override\r\n    @Mapping(source = &quot;rolesIds&quot;, target = &quot;roles&quot;)\r\n    Permission toEntity(PermissionDto dto);\r\n\r\n    @Override\r\n    @Mapping(source = &quot;roles&quot;, target = &quot;rolesIds&quot;)\r\n    PermissionDto toDto(Permission entity);\r\n\r\n    @AfterMapping\r\n    default void assignPermissionToRoles(@MappingTarget Permission permission) {\r\n        var permissionIdSet = new HashSet&lt;Permission&gt;();\r\n        permissionIdSet.add(permission);\r\n        permission.getRoles().forEach(role -&gt; role.setPermissions(permissionIdSet));\r\n    }\r\n\r\n}\r\n\r\n```\r\n\r\nRoleMapper:\r\n\r\n```java\r\n@Mapper(componentModel = &quot;spring&quot;,\r\n        unmappedTargetPolicy = ReportingPolicy.WARN,\r\n        uses = PermissionMapper.class)\r\npublic abstract class RoleMapper {\r\n\r\n    @Autowired\r\n    private RoleRepository roleRepository;\r\n\r\n    public abstract Role toEntity(RoleDto dto);\r\n\r\n    public abstract RoleDto toDto(Role entity);\r\n\r\n    Set&lt;Role&gt; mapRolesIdsToRoles(Set&lt;Long&gt; rolesIds) {\r\n        return rolesIds.stream()\r\n                       .map(roleId -&gt; roleRepository.findById(roleId).orElseThrow(\r\n                               () -&gt; new ResourceNotFoundException(&quot;Role with ID %d not found&quot;.formatted(roleId))\r\n                       ))\r\n                       .collect(Collectors.toSet());\r\n    }\r\n\r\n    Set&lt;Long&gt; mapRolesToRolesIds(Set&lt;Role&gt; roles) {\r\n        return roles.stream().map(Role::getId).collect(Collectors.toSet());\r\n    }\r\n\r\n}\r\n```\r\n\r\n\r\nWhen I try to update an existing permission that has a role related to it, hibernate does not delete the current relation and insert the new one, it only inserts the new one.\r\n\r\nfor example, if I have a permission related to Role with id 1, and I try to update it by passing this JSON:\r\n\r\n```json\r\n{\r\n  &quot;id&quot;: 15991,\r\n  &quot;active&quot;: true,\r\n  &quot;code&quot;: &quot;NEW_ROLE&quot;,\r\n  &quot;rolesIds&quot;: [\r\n     2\r\n  ]\r\n}\r\n```\r\n\r\nThen I end up with 2 rows in the join table, one for roleId 1 and another for roleId 2.\r\n\r\nWhat I&#39;d like to happen is to have the role relations refreshed on each update.","title":"Refresh many to many relations on update in Hibernate","body":"<p>I have 2 entities with many to many relationship:</p>\n<p>Permission (AbstractActiveEntity simply has 2 fields, Long Id and boolean Active):</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Entity(name = &quot;Permission&quot;)\n@NoArgsConstructor\n@SuperBuilder(toBuilder = true)\n@Table(name = &quot;permission&quot;)\n@AllArgsConstructor\n@Getter\n@Setter\n@ToString\npublic class Permission extends AbstractActiveEntity {\n\n    String code;\n\n    @ManyToMany(\n            mappedBy = &quot;permissions&quot;,\n            fetch = FetchType.LAZY,\n            cascade = {MERGE},\n            targetEntity = Role.class\n    )\n    @ToString.Exclude\n    private Set&lt;Role&gt; roles = new HashSet&lt;&gt;();\n\n//equals and hashcode\n}\n</code></pre>\n<p>and this Role entity:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Getter\n@SuperBuilder(toBuilder = true)\n@Entity\n@Setter\n@ToString\n@RequiredArgsConstructor\npublic class Role extends AbstractActiveEntity {\n\n    private String name;\n\n    @ManyToMany(cascade = {MERGE})\n    @JoinTable(\n            name = &quot;roles_permissions&quot;,\n            joinColumns = {@JoinColumn(name = &quot;role_id&quot;)},\n            inverseJoinColumns = {@JoinColumn(name = &quot;permission_id&quot;)}\n    )\n    private Set&lt;Permission&gt; permissions = new HashSet&lt;&gt;();\n//equals and hashcode\n}\n</code></pre>\n<p>This is my update method:</p>\n<pre class=\"lang-java prettyprint-override\"><code>    public PermissionDto update(@Valid PermissionDto permissionDto) {\n        Permission permissionEntity = permissionMapper.toEntity(permissionDto);\n        return permissionMapper.toDto(permissionRepository.save(permissionEntity));\n    }\n</code></pre>\n<p>Update API:</p>\n<pre class=\"lang-java prettyprint-override\"><code>    @PatchMapping\n    public PermissionDto update(@RequestBody @Valid PermissionDto permissionDto) {\n        return permissionService.update(permissionDto);\n    }\n</code></pre>\n<p>PermissionDto:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Getter\n@Setter\n@SuperBuilder(toBuilder = true)\n@NoArgsConstructor\npublic class PermissionDto extends AbstractActiveDto {\n\n    @NotBlank\n    private String code;\n\n    private Set&lt;Long&gt; rolesIds = new HashSet&lt;&gt;();\n\n}\n</code></pre>\n<p>RoleDto:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@NoArgsConstructor\n@SuperBuilder(toBuilder=true)\n@Data\npublic class RoleDto extends AbstractActiveDto {\n\n    @NotBlank\n    private String name;\n\n    @ToString.Exclude\n    private Set&lt;Long&gt; permissionsIds;\n\n}\n</code></pre>\n<p>PermissionMapper:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Mapper(componentModel = &quot;spring&quot;,\n        unmappedTargetPolicy = ReportingPolicy.WARN,\n        builder = @Builder(disableBuilder = true),\n        uses = RoleMapper.class)\npublic interface PermissionMapper extends EntityMapper&lt;Permission, PermissionDto&gt; {\n\n    @Override\n    @Mapping(source = &quot;rolesIds&quot;, target = &quot;roles&quot;)\n    Permission toEntity(PermissionDto dto);\n\n    @Override\n    @Mapping(source = &quot;roles&quot;, target = &quot;rolesIds&quot;)\n    PermissionDto toDto(Permission entity);\n\n    @AfterMapping\n    default void assignPermissionToRoles(@MappingTarget Permission permission) {\n        var permissionIdSet = new HashSet&lt;Permission&gt;();\n        permissionIdSet.add(permission);\n        permission.getRoles().forEach(role -&gt; role.setPermissions(permissionIdSet));\n    }\n\n}\n\n</code></pre>\n<p>RoleMapper:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Mapper(componentModel = &quot;spring&quot;,\n        unmappedTargetPolicy = ReportingPolicy.WARN,\n        uses = PermissionMapper.class)\npublic abstract class RoleMapper {\n\n    @Autowired\n    private RoleRepository roleRepository;\n\n    public abstract Role toEntity(RoleDto dto);\n\n    public abstract RoleDto toDto(Role entity);\n\n    Set&lt;Role&gt; mapRolesIdsToRoles(Set&lt;Long&gt; rolesIds) {\n        return rolesIds.stream()\n                       .map(roleId -&gt; roleRepository.findById(roleId).orElseThrow(\n                               () -&gt; new ResourceNotFoundException(&quot;Role with ID %d not found&quot;.formatted(roleId))\n                       ))\n                       .collect(Collectors.toSet());\n    }\n\n    Set&lt;Long&gt; mapRolesToRolesIds(Set&lt;Role&gt; roles) {\n        return roles.stream().map(Role::getId).collect(Collectors.toSet());\n    }\n\n}\n</code></pre>\n<p>When I try to update an existing permission that has a role related to it, hibernate does not delete the current relation and insert the new one, it only inserts the new one.</p>\n<p>for example, if I have a permission related to Role with id 1, and I try to update it by passing this JSON:</p>\n<pre class=\"lang-json prettyprint-override\"><code>{\n  &quot;id&quot;: 15991,\n  &quot;active&quot;: true,\n  &quot;code&quot;: &quot;NEW_ROLE&quot;,\n  &quot;rolesIds&quot;: [\n     2\n  ]\n}\n</code></pre>\n<p>Then I end up with 2 rows in the join table, one for roleId 1 and another for roleId 2.</p>\n<p>What I'd like to happen is to have the role relations refreshed on each update.</p>\n"},{"tags":["java","spring"],"comments":[{"owner":{"account_id":3192259,"reputation":117599,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1697521380,"post_id":77304104,"comment_id":136286636,"body_markdown":"You have a chicken/egg problem here, you want to use a `BeanPostProcessor` but you also want to inject beans, that need processing into the `BeanPostProcessor`. Also you should just use `@Value(&quot;${wisdom}&quot;)` Spring will the conversion to an array. I wonder how you are running this and what the logging output actually is.","body":"You have a chicken/egg problem here, you want to use a <code>BeanPostProcessor</code> but you also want to inject beans, that need processing into the <code>BeanPostProcessor</code>. Also you should just use <code>@Value(&quot;${wisdom}&quot;)</code> Spring will the conversion to an array. I wonder how you are running this and what the logging output actually is."},{"owner":{"account_id":3192259,"reputation":117599,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1697521763,"post_id":77304104,"comment_id":136286674,"body_markdown":"The problem is also enhanced by the fact that `BeanPostProcessor` instances are created very early in the whole proces. Autowiring has to be done very carefully and when doing so you might get beans that are fully processed yet due to the moment in the lifecycle.","body":"The problem is also enhanced by the fact that <code>BeanPostProcessor</code> instances are created very early in the whole proces. Autowiring has to be done very carefully and when doing so you might get beans that are fully processed yet due to the moment in the lifecycle."},{"owner":{"account_id":28965224,"reputation":321,"user_id":22186847,"display_name":"JoreJoh"},"score":0,"creation_date":1697537148,"post_id":77304104,"comment_id":136289380,"body_markdown":"@M.Deinum are `BeanPostProcessor`s created from `BeanDefintion`s? Are those `BeanDefinition`s processed by `BeanFactoryPostProcessor`s (such as `PropertySourcesPlaceholderConfigurer`)?","body":"@M.Deinum are <code>BeanPostProcessor</code>s created from <code>BeanDefintion</code>s? Are those <code>BeanDefinition</code>s processed by <code>BeanFactoryPostProcessor</code>s (such as <code>PropertySourcesPlaceholderConfigurer</code>)?"},{"owner":{"account_id":3192259,"reputation":117599,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1697537445,"post_id":77304104,"comment_id":136289436,"body_markdown":"As stated yes but... As they are created very early in the process not everything applies. Also as they are very early you trigger very early instantiation of the beans it needs which are then no longer being processed. When adding Spring Boot in the mix (which I suspect is the case) things change slightly again, but not in regards of processing.","body":"As stated yes but... As they are created very early in the process not everything applies. Also as they are very early you trigger very early instantiation of the beans it needs which are then no longer being processed. When adding Spring Boot in the mix (which I suspect is the case) things change slightly again, but not in regards of processing."},{"owner":{"account_id":28965224,"reputation":321,"user_id":22186847,"display_name":"JoreJoh"},"score":0,"creation_date":1697822307,"post_id":77304104,"comment_id":136332479,"body_markdown":"@M.Deinum you were mistaken, it can work (see the answer)","body":"@M.Deinum you were mistaken, it can work (see the answer)"},{"owner":{"account_id":3192259,"reputation":117599,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1698129707,"post_id":77304104,"comment_id":136362572,"body_markdown":"No I&#39;m not mistaken as you still have a chicken/egg problem with the `BeanPostProcessor`, however Spirng will do its best to prevent it but cannot in all cases. Both the `BeanFactoryPostProcessor` and `BeanPostProcessor` are needed very early on (the `BeanFactoryPostProcessor` very early as that operates on bean definitions and not beans).","body":"No I&#39;m not mistaken as you still have a chicken/egg problem with the <code>BeanPostProcessor</code>, however Spirng will do its best to prevent it but cannot in all cases. Both the <code>BeanFactoryPostProcessor</code> and <code>BeanPostProcessor</code> are needed very early on (the <code>BeanFactoryPostProcessor</code> very early as that operates on bean definitions and not beans)."},{"owner":{"account_id":28965224,"reputation":321,"user_id":22186847,"display_name":"JoreJoh"},"score":0,"creation_date":1698218976,"post_id":77304104,"comment_id":136375713,"body_markdown":"@M.Deinum what exactly may be the problem? Notice it&#39;s `static`. First, a BeanFactoryPostProcessor is created, it processes a `BeanDefinition` of my `BeanPostProcessor`, then the latter gets created from that modified `BeanDefinition` and does its job. I don&#39;t see any problems at all","body":"@M.Deinum what exactly may be the problem? Notice it&#39;s <code>static</code>. First, a BeanFactoryPostProcessor is created, it processes a <code>BeanDefinition</code> of my <code>BeanPostProcessor</code>, then the latter gets created from that modified <code>BeanDefinition</code> and does its job. I don&#39;t see any problems at all"},{"owner":{"account_id":3192259,"reputation":117599,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1698225943,"post_id":77304104,"comment_id":136377096,"body_markdown":"Not in this particulair case but in general (as also explained/referenced/hinted) in the actual Spring documentation. Especially with regards to proxy creation (which isn&#39;t the case here) and injection into a `BeanPostProcessor` as proxy creation is also done through a `BeanPostProcessor` and that might not be ready. So injection into a `BeanPostProcessor` might lead to surprising results.","body":"Not in this particulair case but in general (as also explained/referenced/hinted) in the actual Spring documentation. Especially with regards to proxy creation (which isn&#39;t the case here) and injection into a <code>BeanPostProcessor</code> as proxy creation is also done through a <code>BeanPostProcessor</code> and that might not be ready. So injection into a <code>BeanPostProcessor</code> might lead to surprising results."},{"owner":{"account_id":28965224,"reputation":321,"user_id":22186847,"display_name":"JoreJoh"},"score":0,"creation_date":1698234828,"post_id":77304104,"comment_id":136378791,"body_markdown":"@M.Deinum even when those injections are `@Lazy`?","body":"@M.Deinum even when those injections are <code>@Lazy</code>?"},{"owner":{"account_id":3192259,"reputation":117599,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1698238230,"post_id":77304104,"comment_id":136379544,"body_markdown":"That depends on the usage but that is one of the likely workarounds.","body":"That depends on the usage but that is one of the likely workarounds."}],"answers":[{"tags":[],"owner":{"account_id":28965224,"reputation":321,"user_id":22186847,"display_name":"JoreJoh"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1697793772,"creation_date":1697793772,"answer_id":77329758,"question_id":77304104,"body_markdown":"Actually, it can work, but you need to register that `BeanFactoryPostProcessor` that processes `@Value` annotations in the context if it&#39;s a non-Boot project\r\n```java\r\n@Configuration\r\n@ComponentScan\r\n@PropertySource(&quot;classpath:application.properties&quot;)\r\npublic class Config {\r\n    @Bean\r\n    public static PropertySourcesPlaceholderConfigurer propertySourcesPlaceholderConfigurer() {\r\n        return new PropertySourcesPlaceholderConfigurer();\r\n    }\r\n}\r\n```","title":"Do BeanFactoryPostProcessors affect BeanPostProcessors?","body":"<p>Actually, it can work, but you need to register that <code>BeanFactoryPostProcessor</code> that processes <code>@Value</code> annotations in the context if it's a non-Boot project</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Configuration\n@ComponentScan\n@PropertySource(&quot;classpath:application.properties&quot;)\npublic class Config {\n    @Bean\n    public static PropertySourcesPlaceholderConfigurer propertySourcesPlaceholderConfigurer() {\n        return new PropertySourcesPlaceholderConfigurer();\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":28965224,"reputation":321,"user_id":22186847,"display_name":"JoreJoh"},"comment_count":10,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":29,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1697793772,"creation_date":1697479662,"question_id":77304104,"body_markdown":"If a `BeanPostProcessor` or its dependency is annotated with `@Value`, would that work?\r\n```java\r\n@Component\r\n@Slf4j\r\npublic class Sage {\r\n    @Wisdom\r\n    private String wisdom;\r\n\r\n    public void sayWisdom() {\r\n        String processedWisdom = process(wisdom);\r\n        log.info(processedWisdom);\r\n    }\r\n\r\n    private String process(String wisdom) {\r\n        String intro = getIntro();\r\n        String wiserWisdom = makeItSoundWiser(wisdom);\r\n        return intro + &quot; &quot; + wiserWisdom;\r\n    }\r\n\r\n    private String getIntro() {\r\n        return &quot;Sage says:&quot;;\r\n    }\r\n\r\n    private String makeItSoundWiser(String wisdom) {\r\n        return wisdom.replaceAll(&quot;\\\\.(?=\\\\s|$)|(?&lt;!\\\\.)(?=$)&quot;, &quot;...&quot;);\r\n    }\r\n}\r\n```\r\n```java\r\n@Retention(RetentionPolicy.RUNTIME)\r\n@Target(ElementType.FIELD)\r\npublic @interface Wisdom {\r\n}\r\n```\r\n```java\r\npublic interface WisdomProvider {\r\n    String getWisdom();\r\n}\r\n```\r\n```java\r\n@Component\r\n@RequiredArgsConstructor\r\npublic class WisdomBeanPostProcessor implements BeanPostProcessor {\r\n    private final WisdomProvider wisdomProvider;\r\n    @Override\r\n    public Object postProcessBeforeInitialization(Object bean, String beanName) throws BeansException {\r\n        Field[] fields = bean.getClass().getDeclaredFields();\r\n        for (Field field : fields) {\r\n            Wisdom wisdom = field.getAnnotation(Wisdom.class);\r\n            if (Objects.nonNull(wisdom)) {\r\n                field.setAccessible(true);\r\n                ReflectionUtils.setField(field, bean, wisdomProvider.getWisdom());\r\n                break;\r\n            }\r\n        }\r\n        return bean;\r\n    }\r\n}\r\n```\r\n```java\r\n@Component\r\n@PropertySource(&quot;classpath:application.properties&quot;)\r\npublic class SimpleWisdomProvider implements WisdomProvider {\r\n    @Value(&quot;#{&#39;${wisdoms}&#39;.split(&#39;,&#39;)}&quot;) // notice this\r\n    private String[] wisdoms;\r\n\r\n    @Override\r\n    public String getWisdom() {\r\n        int randomIndex = ThreadLocalRandom.current().nextInt(wisdoms.length);\r\n        return wisdoms[randomIndex];\r\n    }\r\n}\r\n```\r\n```properties\r\nwisdoms=Tomorrow is often the busiest day of the week,\\\r\n        I have always wanted to be somebody, but I see now I should have been more specific,\\\r\n        Knowledge is like underwear. It is useful to have it, but not necessary to show it off,\\\r\n        Go to Heaven for the climate, Hell for the company,\\\r\n        Going to church doesn&#39;t make you a Christian any more than going to a garage makes you an automobile\r\n```\r\nThe answer it no, it won&#39;t work\r\n```\r\nINFO  [main] : Sage says: ${wisdoms}...\r\n```\r\nThe question I have is why? `BeanFactoryPostProcessor`s (including `PropertySourcesPlaceholderConfigurer` that processes `@Value`s) should run fine on `BeanPostProcessor`s&#39; `BeanDefinition`s. Unless `BeanPostProcessor`s don&#39;t get created from `BeanDefinition`s... What is the explanation? What is the workaround?","title":"Do BeanFactoryPostProcessors affect BeanPostProcessors?","body":"<p>If a <code>BeanPostProcessor</code> or its dependency is annotated with <code>@Value</code>, would that work?</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Component\n@Slf4j\npublic class Sage {\n    @Wisdom\n    private String wisdom;\n\n    public void sayWisdom() {\n        String processedWisdom = process(wisdom);\n        log.info(processedWisdom);\n    }\n\n    private String process(String wisdom) {\n        String intro = getIntro();\n        String wiserWisdom = makeItSoundWiser(wisdom);\n        return intro + &quot; &quot; + wiserWisdom;\n    }\n\n    private String getIntro() {\n        return &quot;Sage says:&quot;;\n    }\n\n    private String makeItSoundWiser(String wisdom) {\n        return wisdom.replaceAll(&quot;\\\\.(?=\\\\s|$)|(?&lt;!\\\\.)(?=$)&quot;, &quot;...&quot;);\n    }\n}\n</code></pre>\n<pre class=\"lang-java prettyprint-override\"><code>@Retention(RetentionPolicy.RUNTIME)\n@Target(ElementType.FIELD)\npublic @interface Wisdom {\n}\n</code></pre>\n<pre class=\"lang-java prettyprint-override\"><code>public interface WisdomProvider {\n    String getWisdom();\n}\n</code></pre>\n<pre class=\"lang-java prettyprint-override\"><code>@Component\n@RequiredArgsConstructor\npublic class WisdomBeanPostProcessor implements BeanPostProcessor {\n    private final WisdomProvider wisdomProvider;\n    @Override\n    public Object postProcessBeforeInitialization(Object bean, String beanName) throws BeansException {\n        Field[] fields = bean.getClass().getDeclaredFields();\n        for (Field field : fields) {\n            Wisdom wisdom = field.getAnnotation(Wisdom.class);\n            if (Objects.nonNull(wisdom)) {\n                field.setAccessible(true);\n                ReflectionUtils.setField(field, bean, wisdomProvider.getWisdom());\n                break;\n            }\n        }\n        return bean;\n    }\n}\n</code></pre>\n<pre class=\"lang-java prettyprint-override\"><code>@Component\n@PropertySource(&quot;classpath:application.properties&quot;)\npublic class SimpleWisdomProvider implements WisdomProvider {\n    @Value(&quot;#{'${wisdoms}'.split(',')}&quot;) // notice this\n    private String[] wisdoms;\n\n    @Override\n    public String getWisdom() {\n        int randomIndex = ThreadLocalRandom.current().nextInt(wisdoms.length);\n        return wisdoms[randomIndex];\n    }\n}\n</code></pre>\n<pre><code>wisdoms=Tomorrow is often the busiest day of the week,\\\n        I have always wanted to be somebody, but I see now I should have been more specific,\\\n        Knowledge is like underwear. It is useful to have it, but not necessary to show it off,\\\n        Go to Heaven for the climate, Hell for the company,\\\n        Going to church doesn't make you a Christian any more than going to a garage makes you an automobile\n</code></pre>\n<p>The answer it no, it won't work</p>\n<pre><code>INFO  [main] : Sage says: ${wisdoms}...\n</code></pre>\n<p>The question I have is why? <code>BeanFactoryPostProcessor</code>s (including <code>PropertySourcesPlaceholderConfigurer</code> that processes <code>@Value</code>s) should run fine on <code>BeanPostProcessor</code>s' <code>BeanDefinition</code>s. Unless <code>BeanPostProcessor</code>s don't get created from <code>BeanDefinition</code>s... What is the explanation? What is the workaround?</p>\n"},{"tags":["java","cron"],"comments":[{"owner":{"account_id":5998820,"reputation":12656,"user_id":4712734,"display_name":"DuncG"},"score":0,"creation_date":1697792883,"post_id":77329200,"comment_id":136327052,"body_markdown":"`source` isn&#39;t an executable, it is built-in to a shell.","body":"<code>source</code> isn&#39;t an executable, it is built-in to a shell."}],"answers":[{"tags":[],"owner":{"account_id":5998820,"reputation":12656,"user_id":4712734,"display_name":"DuncG"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1697793654,"creation_date":1697793654,"answer_id":77329743,"question_id":77329200,"body_markdown":"I suggest you package your command into a script, test it, and call that script from cron. Something like `run.sh`:\r\n\r\n    #!/bin/bash\r\n    source &quot;/path/to/javaenv.txt&quot; &amp;&amp; java pkgName.ClassName cmd-line-params &gt; /tmp/test-$(date +%s).txt 2&gt;&amp;1\r\n   \r\n","title":"CLASSPATH in crontab","body":"<p>I suggest you package your command into a script, test it, and call that script from cron. Something like <code>run.sh</code>:</p>\n<pre><code>#!/bin/bash\nsource &quot;/path/to/javaenv.txt&quot; &amp;&amp; java pkgName.ClassName cmd-line-params &gt; /tmp/test-$(date +%s).txt 2&gt;&amp;1\n</code></pre>\n"}],"owner":{"account_id":7430214,"reputation":1253,"user_id":5651468,"accept_rate":100,"display_name":"Sandeep"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":40,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1697793654,"creation_date":1697788412,"question_id":77329200,"body_markdown":"I am having trouble getting my Java program to run from `cron`.  I am able to recreate the problem, using a simple example, as explained below:\r\n\r\nIn the file `/path/to/javaenv.txt` I define my `CLASSPATH` variable as follows:\r\n\r\n    export CLASSPATH=\\\r\n    &quot;/path/to/dir1&quot;:\\\r\n    &quot;/path/to/dir2&quot;:\\\r\n    &quot;/path/to/dirn&quot;:\\\r\n    &quot;/path/to/jar1&quot;:\\\r\n    &quot;/path/to/jar2&quot;:\\\r\n    &quot;/path/to/jarn&quot;\r\n\r\nFrom the command line I am able to execute the Java program quite easily by doing something like this:\r\n\r\n    source &quot;/path/to/javaenv.txt&quot; &amp;&amp; java pkgName.ClassName cmd-line-params &gt; /tmp/test-$(date +%s).txt 2&gt;&amp;1\r\n\r\nHowever, the job does not get executed from `cron`, eventhough my `crontab` has the following entry:\r\n\r\n    * * * * * source &quot;/path/to/javaenv.txt&quot; &amp;&amp; java pkgName.ClassName cmd-line-params &gt; /tmp/test-$(date +%s).txt 2&gt;&amp;1\r\n\r\n","title":"CLASSPATH in crontab","body":"<p>I am having trouble getting my Java program to run from <code>cron</code>.  I am able to recreate the problem, using a simple example, as explained below:</p>\n<p>In the file <code>/path/to/javaenv.txt</code> I define my <code>CLASSPATH</code> variable as follows:</p>\n<pre><code>export CLASSPATH=\\\n&quot;/path/to/dir1&quot;:\\\n&quot;/path/to/dir2&quot;:\\\n&quot;/path/to/dirn&quot;:\\\n&quot;/path/to/jar1&quot;:\\\n&quot;/path/to/jar2&quot;:\\\n&quot;/path/to/jarn&quot;\n</code></pre>\n<p>From the command line I am able to execute the Java program quite easily by doing something like this:</p>\n<pre><code>source &quot;/path/to/javaenv.txt&quot; &amp;&amp; java pkgName.ClassName cmd-line-params &gt; /tmp/test-$(date +%s).txt 2&gt;&amp;1\n</code></pre>\n<p>However, the job does not get executed from <code>cron</code>, eventhough my <code>crontab</code> has the following entry:</p>\n<pre><code>* * * * * source &quot;/path/to/javaenv.txt&quot; &amp;&amp; java pkgName.ClassName cmd-line-params &gt; /tmp/test-$(date +%s).txt 2&gt;&amp;1\n</code></pre>\n"},{"tags":["java","android","permissions"],"comments":[{"owner":{"account_id":7868321,"reputation":1163,"user_id":5946486,"display_name":"Idan Ayzen"},"score":0,"creation_date":1455807354,"post_id":35484767,"comment_id":58663048,"body_markdown":"btw i already tried to change the string to &quot;android.permission.READ_PHONE_STATE&quot; still the same","body":"btw i already tried to change the string to &quot;android.permission.READ_PHONE_STATE&quot; still the same"},{"owner":{"account_id":6811689,"reputation":22994,"user_id":5241603,"accept_rate":95,"display_name":"K.Sopheak"},"score":0,"creation_date":1477035516,"post_id":35484767,"comment_id":67609690,"body_markdown":"Is the permission is blocked?","body":"Is the permission is blocked?"}],"answers":[{"tags":[],"owner":{"account_id":39846,"reputation":991133,"user_id":115145,"accept_rate":84,"display_name":"CommonsWare"},"down_vote_count":1,"up_vote_count":16,"is_accepted":false,"score":15,"last_activity_date":1455808612,"creation_date":1455808612,"answer_id":35485338,"question_id":35484767,"body_markdown":"Replace:\r\n\r\n    ActivityCompat.requestPermissions(this, new String[]{&quot;Manifest.permission.READ_PHONE_STATE&quot;}, 225);\r\n\r\nwith:\r\n\r\n    ActivityCompat.requestPermissions(this, new String[]{Manifest.permission.READ_PHONE_STATE}, 225);\r\n\r\n[The actual string for that permission][1] is not `&quot;Manifest.permission.READ_PHONE_STATE&quot;`. Use the symbol `Manifest.permission.READ_PHONE_STATE`.\r\n\r\n\r\n  [1]: http://developer.android.com/reference/android/Manifest.permission.html#READ_PHONE_STATE","title":"ActivityCompat.requestPermissions not showing dialog box","body":"<p>Replace:</p>\n\n<pre><code>ActivityCompat.requestPermissions(this, new String[]{\"Manifest.permission.READ_PHONE_STATE\"}, 225);\n</code></pre>\n\n<p>with:</p>\n\n<pre><code>ActivityCompat.requestPermissions(this, new String[]{Manifest.permission.READ_PHONE_STATE}, 225);\n</code></pre>\n\n<p><a href=\"http://developer.android.com/reference/android/Manifest.permission.html#READ_PHONE_STATE\" rel=\"noreferrer\">The actual string for that permission</a> is not <code>\"Manifest.permission.READ_PHONE_STATE\"</code>. Use the symbol <code>Manifest.permission.READ_PHONE_STATE</code>.</p>\n"},{"tags":[],"owner":{"account_id":1784372,"reputation":2091,"user_id":1626190,"display_name":"RickBoyerDev"},"down_vote_count":5,"up_vote_count":117,"is_accepted":true,"score":112,"last_activity_date":1469772907,"creation_date":1455810737,"answer_id":35486162,"question_id":35484767,"body_markdown":"Here&#39;s an example of using `requestPermissions()`:\r\n\r\nFirst, define the permission (as you did in your post) in the manifest, otherwise, your request will automatically be denied:\r\n\r\n    &lt;uses-permission android:name=&quot;android.permission.READ_PHONE_STATE&quot; /&gt;\r\n\r\nNext, define a value to handle the permission callback, in onRequestPermissionsResult():  \r\n  \r\n    private final int REQUEST_PERMISSION_PHONE_STATE=1;\r\n\r\nHere&#39;s the code to call requestPermissions():\r\n\r\n    private void showPhoneStatePermission() {\r\n        int permissionCheck = ContextCompat.checkSelfPermission(\r\n                this, Manifest.permission.READ_PHONE_STATE);\r\n        if (permissionCheck != PackageManager.PERMISSION_GRANTED) {\r\n            if (ActivityCompat.shouldShowRequestPermissionRationale(this,\r\n                    Manifest.permission.READ_PHONE_STATE)) {\r\n                showExplanation(&quot;Permission Needed&quot;, &quot;Rationale&quot;, Manifest.permission.READ_PHONE_STATE, REQUEST_PERMISSION_PHONE_STATE);\r\n            } else {\r\n                requestPermission(Manifest.permission.READ_PHONE_STATE, REQUEST_PERMISSION_PHONE_STATE);\r\n            }\r\n        } else {\r\n            Toast.makeText(MainActivity.this, &quot;Permission (already) Granted!&quot;, Toast.LENGTH_SHORT).show();\r\n        }\r\n    }\r\n\r\nFirst, you check if you already have permission (remember, even after being granted permission, the user can later revoke the permission in the App Settings.)  \r\n\r\nAnd finally, this is how you check if you received permission or not:\r\n\r\n    @Override\r\n    public void onRequestPermissionsResult(\r\n            int requestCode,\r\n            String permissions[],\r\n            int[] grantResults) {\r\n        switch (requestCode) {\r\n            case REQUEST_PERMISSION_PHONE_STATE:\r\n                if (grantResults.length &gt; 0\r\n                        &amp;&amp; grantResults[0] == PackageManager.PERMISSION_GRANTED) {\r\n                    Toast.makeText(MainActivity.this, &quot;Permission Granted!&quot;, Toast.LENGTH_SHORT).show();\r\n                } else {\r\n                    Toast.makeText(MainActivity.this, &quot;Permission Denied!&quot;, Toast.LENGTH_SHORT).show();\r\n                }\r\n        }\r\n    }\r\n\r\n    private void showExplanation(String title,\r\n    \t\t\t\t\t\t\t String message,\r\n    \t\t\t\t\t\t\t final String permission,\r\n    \t\t\t\t\t\t\t final int permissionRequestCode) {\r\n    \tAlertDialog.Builder builder = new AlertDialog.Builder(this);\r\n    \tbuilder.setTitle(title)\r\n    \t\t\t.setMessage(message)\r\n    \t\t\t.setPositiveButton(android.R.string.ok, new DialogInterface.OnClickListener() {\r\n    \t\t\t\tpublic void onClick(DialogInterface dialog, int id) {\r\n    \t\t\t\t\trequestPermission(permission, permissionRequestCode);\r\n    \t\t\t\t}\r\n    \t\t\t});\r\n    \tbuilder.create().show();\r\n    }\r\n    \r\n    private void requestPermission(String permissionName, int permissionRequestCode) {\r\n    \tActivityCompat.requestPermissions(this,\r\n    \t\t\tnew String[]{permissionName}, permissionRequestCode);\r\n    }\r\n\r\n\r\n\r\n","title":"ActivityCompat.requestPermissions not showing dialog box","body":"<p>Here's an example of using <code>requestPermissions()</code>:</p>\n\n<p>First, define the permission (as you did in your post) in the manifest, otherwise, your request will automatically be denied:</p>\n\n<pre><code>&lt;uses-permission android:name=\"android.permission.READ_PHONE_STATE\" /&gt;\n</code></pre>\n\n<p>Next, define a value to handle the permission callback, in onRequestPermissionsResult():  </p>\n\n<pre><code>private final int REQUEST_PERMISSION_PHONE_STATE=1;\n</code></pre>\n\n<p>Here's the code to call requestPermissions():</p>\n\n<pre><code>private void showPhoneStatePermission() {\n    int permissionCheck = ContextCompat.checkSelfPermission(\n            this, Manifest.permission.READ_PHONE_STATE);\n    if (permissionCheck != PackageManager.PERMISSION_GRANTED) {\n        if (ActivityCompat.shouldShowRequestPermissionRationale(this,\n                Manifest.permission.READ_PHONE_STATE)) {\n            showExplanation(\"Permission Needed\", \"Rationale\", Manifest.permission.READ_PHONE_STATE, REQUEST_PERMISSION_PHONE_STATE);\n        } else {\n            requestPermission(Manifest.permission.READ_PHONE_STATE, REQUEST_PERMISSION_PHONE_STATE);\n        }\n    } else {\n        Toast.makeText(MainActivity.this, \"Permission (already) Granted!\", Toast.LENGTH_SHORT).show();\n    }\n}\n</code></pre>\n\n<p>First, you check if you already have permission (remember, even after being granted permission, the user can later revoke the permission in the App Settings.)  </p>\n\n<p>And finally, this is how you check if you received permission or not:</p>\n\n<pre><code>@Override\npublic void onRequestPermissionsResult(\n        int requestCode,\n        String permissions[],\n        int[] grantResults) {\n    switch (requestCode) {\n        case REQUEST_PERMISSION_PHONE_STATE:\n            if (grantResults.length &gt; 0\n                    &amp;&amp; grantResults[0] == PackageManager.PERMISSION_GRANTED) {\n                Toast.makeText(MainActivity.this, \"Permission Granted!\", Toast.LENGTH_SHORT).show();\n            } else {\n                Toast.makeText(MainActivity.this, \"Permission Denied!\", Toast.LENGTH_SHORT).show();\n            }\n    }\n}\n\nprivate void showExplanation(String title,\n                             String message,\n                             final String permission,\n                             final int permissionRequestCode) {\n    AlertDialog.Builder builder = new AlertDialog.Builder(this);\n    builder.setTitle(title)\n            .setMessage(message)\n            .setPositiveButton(android.R.string.ok, new DialogInterface.OnClickListener() {\n                public void onClick(DialogInterface dialog, int id) {\n                    requestPermission(permission, permissionRequestCode);\n                }\n            });\n    builder.create().show();\n}\n\nprivate void requestPermission(String permissionName, int permissionRequestCode) {\n    ActivityCompat.requestPermissions(this,\n            new String[]{permissionName}, permissionRequestCode);\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":7997161,"reputation":27,"user_id":6033075,"display_name":"Bk245"},"down_vote_count":2,"up_vote_count":2,"is_accepted":false,"score":0,"last_activity_date":1463628849,"creation_date":1463628849,"answer_id":37313520,"question_id":35484767,"body_markdown":"I had this same issue.I updated to **buildToolsVersion &quot;23.0.3&quot;** It all of a sudden worked. Hope this helps anyone having this issue.","title":"ActivityCompat.requestPermissions not showing dialog box","body":"<p>I had this same issue.I updated to <strong>buildToolsVersion \"23.0.3\"</strong> It all of a sudden worked. Hope this helps anyone having this issue.</p>\n"},{"tags":[],"owner":{"account_id":399865,"reputation":1484,"user_id":765507,"display_name":"Meanman"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1468318731,"creation_date":1468318731,"answer_id":38326041,"question_id":35484767,"body_markdown":"For me the issue was requesting a group mistakenly instead of the actual permissions.","title":"ActivityCompat.requestPermissions not showing dialog box","body":"<p>For me the issue was requesting a group mistakenly instead of the actual permissions.</p>\n"},{"tags":[],"owner":{"account_id":107924,"reputation":1554,"user_id":1802804,"display_name":"hrunk"},"down_vote_count":0,"up_vote_count":60,"is_accepted":false,"score":60,"last_activity_date":1511484565,"creation_date":1479942496,"answer_id":40775623,"question_id":35484767,"body_markdown":"I had the same issue and it turned out to be due to the [manifest merger tool](https://developer.android.com/studio/build/manifest-merge.html) pulling in an `android:maxSdkVersion` attribute from a dependency.\r\n\r\nTo view the actual permissions you&#39;re requesting in your APK you can use the `aapt` tool, like this:\r\n\r\n    /path/to/android-sdk/build-tools/version/aapt d permissions /path/to/your-apk.apk\r\n\r\nin my case, it printed:\r\n\r\n    uses-permission: name=&#39;android.permission.WRITE_EXTERNAL_STORAGE&#39; maxSdkVersion=&#39;18&#39;\r\n\r\neven though I hadn&#39;t specified a `maxSdkVersion` in my manifest. I fixed this issue by changing `&lt;uses-permission&gt;` in my manifest to:\r\n\r\n    &lt;uses-permission android:name=&quot;android.permission.WRITE_EXTERNAL_STORAGE&quot; tools:remove=&quot;android:maxSdkVersion&quot;/&gt;\r\n\r\n(where the tools namespace is `http://schemas.android.com/tools`)","title":"ActivityCompat.requestPermissions not showing dialog box","body":"<p>I had the same issue and it turned out to be due to the <a href=\"https://developer.android.com/studio/build/manifest-merge.html\" rel=\"noreferrer\">manifest merger tool</a> pulling in an <code>android:maxSdkVersion</code> attribute from a dependency.</p>\n\n<p>To view the actual permissions you're requesting in your APK you can use the <code>aapt</code> tool, like this:</p>\n\n<pre><code>/path/to/android-sdk/build-tools/version/aapt d permissions /path/to/your-apk.apk\n</code></pre>\n\n<p>in my case, it printed:</p>\n\n<pre><code>uses-permission: name='android.permission.WRITE_EXTERNAL_STORAGE' maxSdkVersion='18'\n</code></pre>\n\n<p>even though I hadn't specified a <code>maxSdkVersion</code> in my manifest. I fixed this issue by changing <code>&lt;uses-permission&gt;</code> in my manifest to:</p>\n\n<pre><code>&lt;uses-permission android:name=\"android.permission.WRITE_EXTERNAL_STORAGE\" tools:remove=\"android:maxSdkVersion\"/&gt;\n</code></pre>\n\n<p>(where the tools namespace is <code>http://schemas.android.com/tools</code>)</p>\n"},{"tags":[],"owner":{"account_id":6741122,"reputation":533,"user_id":5194344,"accept_rate":0,"display_name":"Shyam Sunder"},"down_vote_count":1,"up_vote_count":4,"is_accepted":false,"score":3,"last_activity_date":1492718631,"creation_date":1492718631,"answer_id":43528880,"question_id":35484767,"body_markdown":"I updated my target SDK version from 22 to 23 and it worked perfectly.","title":"ActivityCompat.requestPermissions not showing dialog box","body":"<p>I updated my target SDK version from 22 to 23 and it worked perfectly.</p>\n"},{"tags":[],"owner":{"account_id":10874463,"reputation":11,"user_id":7995249,"display_name":"Beaux"},"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1494478806,"creation_date":1494478806,"answer_id":43906861,"question_id":35484767,"body_markdown":"I was having the same problem, and solved it by replacing Manifest.permission.READ_PHONE_STATE with android.Manifest.permission.READ_PHONE_STATE.\r\n","title":"ActivityCompat.requestPermissions not showing dialog box","body":"<p>I was having the same problem, and solved it by replacing Manifest.permission.READ_PHONE_STATE with android.Manifest.permission.READ_PHONE_STATE.</p>\n"},{"tags":[],"owner":{"account_id":1117516,"reputation":729,"user_id":1106528,"accept_rate":8,"display_name":"griffin2000"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1500405722,"creation_date":1500405722,"answer_id":45175388,"question_id":35484767,"body_markdown":"For me the issue was I had an invalid request code. I choose 0xDEADBEEF as a request code and it was silently failing (maybe it&#39;s cast to something smaller than 32-bit somewhere internally?) If I choose 255 everything worked fine as NightSkyDev described above.","title":"ActivityCompat.requestPermissions not showing dialog box","body":"<p>For me the issue was I had an invalid request code. I choose 0xDEADBEEF as a request code and it was silently failing (maybe it's cast to something smaller than 32-bit somewhere internally?) If I choose 255 everything worked fine as NightSkyDev described above.</p>\n"},{"tags":[],"owner":{"account_id":2508057,"reputation":862,"user_id":2181146,"display_name":"Eliot Gillum"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1505117204,"creation_date":1505117204,"answer_id":46150927,"question_id":35484767,"body_markdown":"The above information is good, but setting `targetSdkVersion` to 23 (or higher) is **critical** for Android to interpret the `&lt;uses-permission&gt;` tag in the manifest as &quot;I will ask in code&quot; instead of &quot;I demand upon installation.&quot;  Lots of sources will tell you that you need the `&lt;uses-permission&gt;` tag, but no one says why and if you don&#39;t have that value set, you&#39;re going to be as confused as I was for hours on end.","title":"ActivityCompat.requestPermissions not showing dialog box","body":"<p>The above information is good, but setting <code>targetSdkVersion</code> to 23 (or higher) is <strong>critical</strong> for Android to interpret the <code>&lt;uses-permission&gt;</code> tag in the manifest as \"I will ask in code\" instead of \"I demand upon installation.\"  Lots of sources will tell you that you need the <code>&lt;uses-permission&gt;</code> tag, but no one says why and if you don't have that value set, you're going to be as confused as I was for hours on end.</p>\n"},{"tags":[],"owner":{"account_id":1131963,"reputation":5224,"user_id":1117848,"accept_rate":73,"display_name":"Benjamin H"},"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1506103047,"creation_date":1506103047,"answer_id":46370639,"question_id":35484767,"body_markdown":"This just happened to me.  It turned out I was requesting ALL permissions, when I needed to filter to just DANGEROUS permissions, and it suddenly started working.\r\n\r\n    fun requestPermissions() {\r\n        val missingDangerPermissions = PERMISSIONS\r\n                .filter { ContextCompat.checkSelfPermission(this, it) != PackageManager.PERMISSION_GRANTED }\r\n                .filter { this.getPackageManager().getPermissionInfo(it, PackageManager.GET_META_DATA).protectionLevel == PermissionInfo.PROTECTION_DANGEROUS } // THIS FILTER HERE!\r\n\r\n        if (missingDangerPermissions.isNotEmpty()) {\r\n            Log.i(TAG, &quot;Requesting dangerous permission to $missingDangerPermissions.&quot;)\r\n            ActivityCompat.requestPermissions(this,\r\n                    missingDangerPermissions.toTypedArray(),\r\n                    REQUEST_CODE_REQUIRED_PERMISSIONS);\r\n            return\r\n        } else {\r\n            Log.i(TAG, &quot;We had all the permissions we needed (yay!)&quot;)\r\n        }\r\n    }","title":"ActivityCompat.requestPermissions not showing dialog box","body":"<p>This just happened to me.  It turned out I was requesting ALL permissions, when I needed to filter to just DANGEROUS permissions, and it suddenly started working.</p>\n\n<pre><code>fun requestPermissions() {\n    val missingDangerPermissions = PERMISSIONS\n            .filter { ContextCompat.checkSelfPermission(this, it) != PackageManager.PERMISSION_GRANTED }\n            .filter { this.getPackageManager().getPermissionInfo(it, PackageManager.GET_META_DATA).protectionLevel == PermissionInfo.PROTECTION_DANGEROUS } // THIS FILTER HERE!\n\n    if (missingDangerPermissions.isNotEmpty()) {\n        Log.i(TAG, \"Requesting dangerous permission to $missingDangerPermissions.\")\n        ActivityCompat.requestPermissions(this,\n                missingDangerPermissions.toTypedArray(),\n                REQUEST_CODE_REQUIRED_PERMISSIONS);\n        return\n    } else {\n        Log.i(TAG, \"We had all the permissions we needed (yay!)\")\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3233980,"reputation":441,"user_id":2728592,"display_name":"AlainPre"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1508176352,"creation_date":1508176352,"answer_id":46776255,"question_id":35484767,"body_markdown":"For me the error was in the manifest: the permission was in uppercase. Android Studio suggest me the permissions in uppercase. I don&#39;t care about that and it took me two hours to fixe this problem.\r\n\r\nThe right syntaxe for permission is &lt;br/&gt;\r\n&amp;lt;uses-permission android:name=&quot;android.permission.WRITE_EXTERNAL_STORAGE&quot;/&amp;gt;","title":"ActivityCompat.requestPermissions not showing dialog box","body":"<p>For me the error was in the manifest: the permission was in uppercase. Android Studio suggest me the permissions in uppercase. I don't care about that and it took me two hours to fixe this problem.</p>\n\n<p>The right syntaxe for permission is <br/>\n&lt;uses-permission android:name=\"android.permission.WRITE_EXTERNAL_STORAGE\"/&gt;</p>\n"},{"tags":[],"owner":{"account_id":2776472,"reputation":373,"user_id":2389962,"display_name":"Talha"},"down_vote_count":0,"up_vote_count":31,"is_accepted":false,"score":31,"last_activity_date":1592498023,"creation_date":1510654897,"answer_id":47283187,"question_id":35484767,"body_markdown":"I had a need to request permission for `WRITE_EXTERNAL_STORAGE` but was not getting a pop-up despite trying all of the different suggestions mentioned.\r\n\r\nThe culprit in the end was HockeyApp. It uses manifest merging to include its own permission for `WRITE_EXTERNAL_STORAGE` except it applies a max sdk version onto it.\r\n\r\nThe way to get around this problem is to include it in your Manifest file but with a replace against it, to override the HockeyApp&#39;s version and success!\r\n\r\n&gt; 4.7.2 Other dependencies requesting the external storage permission (SDK version 5.0.0 and later) To be ready for Android O,\r\n&gt; HockeySDK-Android 5.0.0 and later limit the `WRITE_EXTERNAL_STORAGE`\r\n&gt; permission with the maxSdkVersion filter. In some use cases, e.g.\r\n&gt; where an app contains a dependency that requires this permission,\r\n&gt; maxSdkVersion makes it impossible for those dependencies to grant or\r\n&gt; request the permission. The solution for those cases is as follows:\r\n\r\n    &lt;uses-permission android:name=&quot;android.permission.WRITE_EXTERNAL_STORAGE&quot; tools:node=&quot;replace&quot;/&gt;\r\n\r\n&gt; It will cause that other attributes from low\r\n&gt; priority manifests will be replaced instead of being merged.\r\n\r\nhttps://support.hockeyapp.net/kb/client-integration-android/hockeyapp-for-android-sdk#permissions-advanced","title":"ActivityCompat.requestPermissions not showing dialog box","body":"<p>I had a need to request permission for <code>WRITE_EXTERNAL_STORAGE</code> but was not getting a pop-up despite trying all of the different suggestions mentioned.</p>\n\n<p>The culprit in the end was HockeyApp. It uses manifest merging to include its own permission for <code>WRITE_EXTERNAL_STORAGE</code> except it applies a max sdk version onto it.</p>\n\n<p>The way to get around this problem is to include it in your Manifest file but with a replace against it, to override the HockeyApp's version and success!</p>\n\n<blockquote>\n  <p>4.7.2 Other dependencies requesting the external storage permission (SDK version 5.0.0 and later) To be ready for Android O,\n  HockeySDK-Android 5.0.0 and later limit the <code>WRITE_EXTERNAL_STORAGE</code>\n  permission with the maxSdkVersion filter. In some use cases, e.g.\n  where an app contains a dependency that requires this permission,\n  maxSdkVersion makes it impossible for those dependencies to grant or\n  request the permission. The solution for those cases is as follows:</p>\n</blockquote>\n\n<pre><code>&lt;uses-permission android:name=\"android.permission.WRITE_EXTERNAL_STORAGE\" tools:node=\"replace\"/&gt;\n</code></pre>\n\n<blockquote>\n  <p>It will cause that other attributes from low\n  priority manifests will be replaced instead of being merged.</p>\n</blockquote>\n\n<p><a href=\"https://support.hockeyapp.net/kb/client-integration-android/hockeyapp-for-android-sdk#permissions-advanced\" rel=\"noreferrer\">https://support.hockeyapp.net/kb/client-integration-android/hockeyapp-for-android-sdk#permissions-advanced</a></p>\n"},{"tags":[],"owner":{"account_id":10801085,"reputation":9,"user_id":7945024,"display_name":"Jair Martinez"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1521258067,"creation_date":1521258067,"answer_id":49332266,"question_id":35484767,"body_markdown":"it happen to me i was running it on API 23 and i had to use the code to request permission like this code below put it on on create method. note that MY_PERMISSIONS_REQUEST_READ_LOCATION is an integer that is equal to 1 example int MY_PERMISSIONS_REQUEST_READ_LOCATION = 1:\r\n\r\nif (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.M) {\r\n            requestPermissions(new String[]{ Manifest.permission.ACCESS_COARSE_LOCATION},MY_PERMISSIONS_REQUEST_READ_LOCATION);\r\n        }","title":"ActivityCompat.requestPermissions not showing dialog box","body":"<p>it happen to me i was running it on API 23 and i had to use the code to request permission like this code below put it on on create method. note that MY_PERMISSIONS_REQUEST_READ_LOCATION is an integer that is equal to 1 example int MY_PERMISSIONS_REQUEST_READ_LOCATION = 1:</p>\n\n<p>if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.M) {\n            requestPermissions(new String[]{ Manifest.permission.ACCESS_COARSE_LOCATION},MY_PERMISSIONS_REQUEST_READ_LOCATION);\n        }</p>\n"},{"tags":[],"owner":{"account_id":9497320,"reputation":709,"user_id":7059839,"display_name":"grandia"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1535526279,"creation_date":1535526279,"answer_id":52071418,"question_id":35484767,"body_markdown":"I came across this problem in Samsung S8 and N8 (havent found in any other)\r\n\r\nso the problem is in the manifest file uses-permission\r\n\r\n    &lt;uses-permission android:name=&quot;android.permission.CAMERA&quot;\r\n    android:requiredFeature=&quot;true&quot; /&gt;\r\n\r\nFor some reason, the attribute `android:requiredFeature` is the culprit. and I haven&#39;t found the explanation on why.\r\n\r\nto solve simply remove it,\r\n\r\n    &lt;uses-permission android:name=&quot;android.permission.CAMERA&quot; /&gt;","title":"ActivityCompat.requestPermissions not showing dialog box","body":"<p>I came across this problem in Samsung S8 and N8 (havent found in any other)</p>\n\n<p>so the problem is in the manifest file uses-permission</p>\n\n<pre><code>&lt;uses-permission android:name=\"android.permission.CAMERA\"\nandroid:requiredFeature=\"true\" /&gt;\n</code></pre>\n\n<p>For some reason, the attribute <code>android:requiredFeature</code> is the culprit. and I haven't found the explanation on why.</p>\n\n<p>to solve simply remove it,</p>\n\n<pre><code>&lt;uses-permission android:name=\"android.permission.CAMERA\" /&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3829661,"reputation":3055,"user_id":3175580,"accept_rate":87,"display_name":"androidguy"},"down_vote_count":0,"up_vote_count":16,"is_accepted":false,"score":16,"last_activity_date":1612489153,"creation_date":1542081116,"answer_id":53273522,"question_id":35484767,"body_markdown":"It could be not a problem with a single line of your code.\r\n\r\nOn some devices (I don&#39;t recall if it is in stock Android) the Permission dialog includes a check box labeled &quot;Never ask again&quot;. If you click Deny with the box checked then you won&#39;t be prompted again for that permission, it will automatically be denied to the app. To revert this, you have to go into Settings -&gt; App -&gt; Permissions and re--enable that perm for the app. Then turn it off to deny it again. You may have to open the app before turning it off again, not sure.\r\n\r\nI don&#39;t know if your Nexus has it. Maybe worth a try.","title":"ActivityCompat.requestPermissions not showing dialog box","body":"<p>It could be not a problem with a single line of your code.</p>\n<p>On some devices (I don't recall if it is in stock Android) the Permission dialog includes a check box labeled &quot;Never ask again&quot;. If you click Deny with the box checked then you won't be prompted again for that permission, it will automatically be denied to the app. To revert this, you have to go into Settings -&gt; App -&gt; Permissions and re--enable that perm for the app. Then turn it off to deny it again. You may have to open the app before turning it off again, not sure.</p>\n<p>I don't know if your Nexus has it. Maybe worth a try.</p>\n"},{"tags":[],"owner":{"account_id":15182761,"reputation":1,"user_id":10955646,"display_name":"user10955646"},"down_vote_count":4,"up_vote_count":0,"is_accepted":false,"score":-4,"last_activity_date":1548248223,"creation_date":1548245849,"answer_id":54327088,"question_id":35484767,"body_markdown":"Maybe this solution could help anyone \r\nrather than:\r\n\r\n    ActivityCompat.requestPermissions(this, new String[]{Manifest.permission.WRITE_EXTERNAL_STORAGE}, 1);\r\n\r\nuse :\r\n\r\n    ActivityCompat.requestPermissions(this, new String[]{android.Manifest.permission.WRITE_EXTERNAL_STORAGE}, 1);\r\n\r\n\r\nso we add `android.` to `Manifest.permission.WRITE_EXTERNAL_STORAGE`","title":"ActivityCompat.requestPermissions not showing dialog box","body":"<p>Maybe this solution could help anyone \nrather than:</p>\n\n<pre><code>ActivityCompat.requestPermissions(this, new String[]{Manifest.permission.WRITE_EXTERNAL_STORAGE}, 1);\n</code></pre>\n\n<p>use :</p>\n\n<pre><code>ActivityCompat.requestPermissions(this, new String[]{android.Manifest.permission.WRITE_EXTERNAL_STORAGE}, 1);\n</code></pre>\n\n<p>so we add <code>android.</code> to <code>Manifest.permission.WRITE_EXTERNAL_STORAGE</code></p>\n"},{"tags":[],"owner":{"account_id":3677069,"reputation":416,"user_id":3062923,"display_name":"JohnT"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1553083963,"creation_date":1553083963,"answer_id":55260509,"question_id":35484767,"body_markdown":"For me the problem was that right after making the request, my main activity launched another activity. That superseded the dialog so it was never seen.","title":"ActivityCompat.requestPermissions not showing dialog box","body":"<p>For me the problem was that right after making the request, my main activity launched another activity. That superseded the dialog so it was never seen.</p>\n"},{"tags":[],"owner":{"account_id":6502239,"reputation":1558,"user_id":5032550,"accept_rate":67,"display_name":"Luis Cabrera Benito"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1658364998,"creation_date":1569951200,"answer_id":58189749,"question_id":35484767,"body_markdown":"Don&#39;t forget to write the permissions without extra spaces in the manifest. In my case, I had:\r\n\r\n```xml\r\n&lt;uses-permission android:name=&quot;android.permission.WRITE_EXTERNAL_STORAGE &quot; /&gt;\r\n```\r\n\r\nBut look, at the end, there&#39;s an extra space. Just write it the right way:\r\n\r\n```xml\r\n&lt;uses-permission android:name=&quot;android.permission.WRITE_EXTERNAL_STORAGE&quot; /&gt;\r\n```\r\n\r\nAnd it&#39;s working now.","title":"ActivityCompat.requestPermissions not showing dialog box","body":"<p>Don't forget to write the permissions without extra spaces in the manifest. In my case, I had:</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;uses-permission android:name=&quot;android.permission.WRITE_EXTERNAL_STORAGE &quot; /&gt;\n</code></pre>\n<p>But look, at the end, there's an extra space. Just write it the right way:</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;uses-permission android:name=&quot;android.permission.WRITE_EXTERNAL_STORAGE&quot; /&gt;\n</code></pre>\n<p>And it's working now.</p>\n"},{"tags":[],"owner":{"account_id":6064119,"reputation":1809,"user_id":4735043,"display_name":"Jin Lim"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1580228844,"creation_date":1580228844,"answer_id":59953087,"question_id":35484767,"body_markdown":"***No matter what you do, Check if you declare Permission you need in the Manifest file.*** \r\n==\r\n\r\n```\r\n\r\n    &lt;!--Declaring the required permissions--&gt;\r\n    &lt;uses-permission\r\n        android:name=&quot;android.permission.READ_EXTERNAL_STORAGE&quot; /&gt;\r\n    &lt;uses-permission\r\n        android:name=&quot;android.permission.WRITE_EXTERNAL_STORAGE&quot; /&gt;\r\n    &lt;uses-permission\r\n        android:name=&quot;android.permission.CAMERA&quot; /&gt;\r\n\r\n\r\n```\r\n\r\nThen go to next steps..\r\n","title":"ActivityCompat.requestPermissions not showing dialog box","body":"<h1><strong><em>No matter what you do, Check if you declare Permission you need in the Manifest file.</em></strong></h1>\n\n<pre><code>\n    &lt;!--Declaring the required permissions--&gt;\n    &lt;uses-permission\n        android:name=\"android.permission.READ_EXTERNAL_STORAGE\" /&gt;\n    &lt;uses-permission\n        android:name=\"android.permission.WRITE_EXTERNAL_STORAGE\" /&gt;\n    &lt;uses-permission\n        android:name=\"android.permission.CAMERA\" /&gt;\n\n\n</code></pre>\n\n<p>Then go to next steps..</p>\n"},{"tags":[],"owner":{"account_id":5601902,"reputation":71,"user_id":4437878,"display_name":"Peter"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1697793397,"creation_date":1583934247,"answer_id":60637490,"question_id":35484767,"body_markdown":"Here is another experience I&#39;d like to share with you guys. The problem showed up after I implemented the following code to check for BLE access permission:\r\n\r\n```java\r\nfinal String requiredPermission = (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.Q &amp;&amp; targetSdkVersion &gt;= Build.VERSION_CODES.Q) ?\r\n            android.Manifest.permission.ACCESS_FINE_LOCATION :\r\n            android.Manifest.permission.ACCESS_COARSE_LOCATION;\r\n```\r\n\r\nI meant to distinguish between FINE and COARSE location permission requests, both had been defined in the manifest. When checking for ACCESS_COARSE_LOCATION permission, the &quot;Request permission&quot; dialog never poped up but `onRequestPermissionsResult` was always called with PERMISSION_DENIED (in case permission was not enabled in app settings). So I removed the check for BUILD.SDK and checked only for `ACCESS_FINE_LOCATION` and voilla the missing dialog showed up.\r\n\r\n```java\r\nfinal String requiredPermission = android.Manifest.permission.ACCESS_FINE_LOCATION;\r\n```\r\n\r\ndid the trick.\r\n\r\nThe Manifest source contains:\r\n\r\n```xml\r\n&lt;uses-permission android:name=&quot;android.permission.ACCESS_COARSE_LOCATION&quot; /&gt;\r\n&lt;uses-permission android:name=&quot;android.permission.ACCESS_FINE_LOCATION&quot; /&gt;\r\n```\r\n\r\nbut the apk contained `android.permission.ACCESS_FINE_LOCATION` only. Sometime during build, the `ACCESS_COARSE_LOCATION` had been removed.\r\n\r\nI hope this might help somebody having the same issue.","title":"ActivityCompat.requestPermissions not showing dialog box","body":"<p>Here is another experience I'd like to share with you guys. The problem showed up after I implemented the following code to check for BLE access permission:</p>\n<pre class=\"lang-java prettyprint-override\"><code>final String requiredPermission = (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.Q &amp;&amp; targetSdkVersion &gt;= Build.VERSION_CODES.Q) ?\n            android.Manifest.permission.ACCESS_FINE_LOCATION :\n            android.Manifest.permission.ACCESS_COARSE_LOCATION;\n</code></pre>\n<p>I meant to distinguish between FINE and COARSE location permission requests, both had been defined in the manifest. When checking for ACCESS_COARSE_LOCATION permission, the &quot;Request permission&quot; dialog never poped up but <code>onRequestPermissionsResult</code> was always called with PERMISSION_DENIED (in case permission was not enabled in app settings). So I removed the check for BUILD.SDK and checked only for <code>ACCESS_FINE_LOCATION</code> and voilla the missing dialog showed up.</p>\n<pre class=\"lang-java prettyprint-override\"><code>final String requiredPermission = android.Manifest.permission.ACCESS_FINE_LOCATION;\n</code></pre>\n<p>did the trick.</p>\n<p>The Manifest source contains:</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;uses-permission android:name=&quot;android.permission.ACCESS_COARSE_LOCATION&quot; /&gt;\n&lt;uses-permission android:name=&quot;android.permission.ACCESS_FINE_LOCATION&quot; /&gt;\n</code></pre>\n<p>but the apk contained <code>android.permission.ACCESS_FINE_LOCATION</code> only. Sometime during build, the <code>ACCESS_COARSE_LOCATION</code> had been removed.</p>\n<p>I hope this might help somebody having the same issue.</p>\n"},{"tags":[],"owner":{"account_id":3354060,"reputation":5435,"user_id":2817457,"accept_rate":50,"display_name":"Jianwu Chen"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1646628264,"creation_date":1646628264,"answer_id":71376512,"question_id":35484767,"body_markdown":"I followed the top answer, but still didn&#39;t work. This simple issue wasted me many days. For my case, I&#39;m trying to get access for `MANAGE_EXTERNAL_STORAGE`. At the end, I found for this particular permission, we can&#39;t use `ActivityCompat.requestPermissions()`, instead I have to use `Settings.ACTION_MANAGE_APP_ALL_FILES_ACCESS_PERMISSION`. And to check if the permission is there, we also need to use a different API: `Environment.isExternalStorageManager()` instead of `ContextCompat.checkSelfPermission()`, not sure why they design in such an inconsistent way cause so much confusions. \r\n\r\nI get my issue resolved following: https://stackoverflow.com/questions/64250814/how-to-obtain-manage-external-storage-permission\r\n\r\nAnd also this is mentioned in SDK document of: [manage-all-files][1].\r\n\r\n\r\n  [1]: https://developer.android.com/training/data-storage/manage-all-files","title":"ActivityCompat.requestPermissions not showing dialog box","body":"<p>I followed the top answer, but still didn't work. This simple issue wasted me many days. For my case, I'm trying to get access for <code>MANAGE_EXTERNAL_STORAGE</code>. At the end, I found for this particular permission, we can't use <code>ActivityCompat.requestPermissions()</code>, instead I have to use <code>Settings.ACTION_MANAGE_APP_ALL_FILES_ACCESS_PERMISSION</code>. And to check if the permission is there, we also need to use a different API: <code>Environment.isExternalStorageManager()</code> instead of <code>ContextCompat.checkSelfPermission()</code>, not sure why they design in such an inconsistent way cause so much confusions.</p>\n<p>I get my issue resolved following: <a href=\"https://stackoverflow.com/questions/64250814/how-to-obtain-manage-external-storage-permission\">How to obtain MANAGE_EXTERNAL_STORAGE permission</a></p>\n<p>And also this is mentioned in SDK document of: <a href=\"https://developer.android.com/training/data-storage/manage-all-files\" rel=\"nofollow noreferrer\">manage-all-files</a>.</p>\n"},{"tags":[],"owner":{"account_id":1946193,"reputation":388,"user_id":1751294,"display_name":"Victor Lee"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1652799659,"creation_date":1652799659,"answer_id":72276339,"question_id":35484767,"body_markdown":"TL;DR: \r\nAdd the following to your Manifest file:\r\n\r\n&lt;uses-permission android:name=&quot;android.permission.WRITE_EXTERNAL_STORAGE&quot; **tools:remove=&quot;android:maxSdkVersion&quot;** /&gt;\r\n\r\n\r\nCheck this article, it fixed it for me: \r\n\r\nhttps://nphau.medium.com/android-request-permissions-not-showing-a-dialog-box-b7f2067d7b09\r\n\r\n","title":"ActivityCompat.requestPermissions not showing dialog box","body":"<p>TL;DR:\nAdd the following to your Manifest file:</p>\n<p>&lt;uses-permission android:name=&quot;android.permission.WRITE_EXTERNAL_STORAGE&quot; <strong>tools:remove=&quot;android:maxSdkVersion&quot;</strong> /&gt;</p>\n<p>Check this article, it fixed it for me:</p>\n<p><a href=\"https://nphau.medium.com/android-request-permissions-not-showing-a-dialog-box-b7f2067d7b09\" rel=\"nofollow noreferrer\">https://nphau.medium.com/android-request-permissions-not-showing-a-dialog-box-b7f2067d7b09</a></p>\n"},{"tags":[],"owner":{"account_id":17835692,"reputation":67,"user_id":12954755,"display_name":"Nur Shuvo"},"down_vote_count":1,"up_vote_count":6,"is_accepted":false,"score":5,"last_activity_date":1675192846,"creation_date":1675192846,"answer_id":75302150,"question_id":35484767,"body_markdown":"In my case, target sdk 33 to 32 solves it","title":"ActivityCompat.requestPermissions not showing dialog box","body":"<p>In my case, target sdk 33 to 32 solves it</p>\n"},{"tags":[],"owner":{"account_id":172873,"reputation":2540,"user_id":401183,"accept_rate":71,"display_name":"user401183"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1675384026,"creation_date":1675384026,"answer_id":75330286,"question_id":35484767,"body_markdown":"For me, this was related to them getting more granular with permissions in 33, related to requesting read_external_storage. \r\n\r\nThis is the kotlin code I&#39;m using to check and request access in Jan 2023.\r\n\r\n\r\n    private fun checkPermissions():Boolean{\r\n            // version 33 gets more granular\r\n            if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.TIRAMISU) {\r\n                if (checkSelfPermission(Manifest.permission.READ_MEDIA_IMAGES)\r\n                    != PackageManager.PERMISSION_GRANTED) {\r\n                    ActivityCompat.requestPermissions(\r\n                        this, arrayOf(\r\n                            Manifest.permission.READ_MEDIA_IMAGES,\r\n                            Manifest.permission.READ_MEDIA_VIDEO // why isn&#39;t this plural too\r\n                        ),\r\n                        1\r\n                    )\r\n                    return false\r\n                }\r\n            }else{\r\n                if (checkSelfPermission(Manifest.permission.READ_EXTERNAL_STORAGE)\r\n                    != PackageManager.PERMISSION_GRANTED) {\r\n                    ActivityCompat.requestPermissions(\r\n                        this, arrayOf(\r\n                            Manifest.permission.READ_EXTERNAL_STORAGE\r\n                        ),\r\n                        1\r\n                    )\r\n                    return false\r\n                }\r\n            }\r\n            return true\r\n        }\r\n\r\n\r\n\r\nI also had to add all 3 of these to my manifest, to support apis 31-33.\r\n\r\n\r\n    &lt;uses-permission android:name=&quot;android.permission.READ_EXTERNAL_STORAGE&quot;  /&gt;    \r\n    &lt;uses-permission android:name=&quot;android.permission.READ_MEDIA_VIDEO&quot;  /&gt;\r\n    &lt;uses-permission android:name=&quot;android.permission.READ_MEDIA_IMAGES&quot;  /&gt;\r\n\r\n\r\n","title":"ActivityCompat.requestPermissions not showing dialog box","body":"<p>For me, this was related to them getting more granular with permissions in 33, related to requesting read_external_storage.</p>\n<p>This is the kotlin code I'm using to check and request access in Jan 2023.</p>\n<pre><code>private fun checkPermissions():Boolean{\n        // version 33 gets more granular\n        if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.TIRAMISU) {\n            if (checkSelfPermission(Manifest.permission.READ_MEDIA_IMAGES)\n                != PackageManager.PERMISSION_GRANTED) {\n                ActivityCompat.requestPermissions(\n                    this, arrayOf(\n                        Manifest.permission.READ_MEDIA_IMAGES,\n                        Manifest.permission.READ_MEDIA_VIDEO // why isn't this plural too\n                    ),\n                    1\n                )\n                return false\n            }\n        }else{\n            if (checkSelfPermission(Manifest.permission.READ_EXTERNAL_STORAGE)\n                != PackageManager.PERMISSION_GRANTED) {\n                ActivityCompat.requestPermissions(\n                    this, arrayOf(\n                        Manifest.permission.READ_EXTERNAL_STORAGE\n                    ),\n                    1\n                )\n                return false\n            }\n        }\n        return true\n    }\n</code></pre>\n<p>I also had to add all 3 of these to my manifest, to support apis 31-33.</p>\n<pre><code>&lt;uses-permission android:name=&quot;android.permission.READ_EXTERNAL_STORAGE&quot;  /&gt;    \n&lt;uses-permission android:name=&quot;android.permission.READ_MEDIA_VIDEO&quot;  /&gt;\n&lt;uses-permission android:name=&quot;android.permission.READ_MEDIA_IMAGES&quot;  /&gt;\n</code></pre>\n"}],"owner":{"account_id":7868321,"reputation":1163,"user_id":5946486,"display_name":"Idan Ayzen"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":161944,"favorite_count":0,"down_vote_count":0,"up_vote_count":113,"accepted_answer_id":35486162,"answer_count":24,"score":113,"last_activity_date":1697793397,"creation_date":1455807245,"question_id":35484767,"body_markdown":"    if (ContextCompat.checkSelfPermission(RegisterActivity.this,      Manifest.permission.READ_PHONE_STATE) == PackageManager.PERMISSION_DENIED){\r\n                ActivityCompat.requestPermissions(this,\r\n                        new String[]{Manifest.permission.READ_PHONE_STATE}, REQUEST_READ_PHONE_STATE_PERMISSION);\r\n\r\n\r\ni&#39;m trying to use this function on nexus 5 api 23 and its just not showing me the dialog box like its supposed to do, it&#39;s just not doing anything.\r\nwhat could cause the problem? (this code is in the java activity)\r\ni tried changing my minimum api to 23 and use the requestPermissions() without the ActivityCompat but still not working.\r\n\r\n    apply plugin: &#39;com.android.application&#39;\r\n\r\n    android {\r\n    compileSdkVersion 23\r\n    buildToolsVersion &quot;23.0.2&quot;\r\n\r\n    defaultConfig {\r\n        applicationId &quot;com.example.idanayzen.photomap&quot;\r\n        minSdkVersion 23\r\n        targetSdkVersion 23\r\n        versionCode 1\r\n        versionName &quot;1.0&quot;\r\n    }\r\n    buildTypes {\r\n        release {\r\n            minifyEnabled false\r\n            proguardFiles getDefaultProguardFile(&#39;proguard-android.txt&#39;), &#39;proguard-rules.pro&#39;\r\n        }\r\n    }\r\n    }\r\n\r\n    dependencies {\r\n    compile fileTree(dir: &#39;libs&#39;, include: [&#39;*.jar&#39;])\r\n    testCompile &#39;junit:junit:4.12&#39;\r\n    compile &#39;com.android.support:appcompat-v7:23.1.1&#39;\r\n    compile &#39;com.google.android.gms:play-services:8.4.0&#39;\r\n    compile &#39;com.android.support:design:23.1.1&#39;\r\n    }\r\n\r\nand the Manifest:\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\r\n    &lt;manifest xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\r\n    package=&quot;com.example.idanayzen.photomap&quot;&gt;\r\n\r\n    &lt;uses-permission android:name=&quot;android.permission.ACCESS_FINE_LOCATION&quot; /&gt;\r\n    &lt;uses-permission android:name=&quot;android.permission.READ_PHONE_STATE&quot; /&gt;\r\n    &lt;uses-permission android:name=&quot;android.permission.READ_SMS&quot; /&gt;\r\n\r\n    &lt;application\r\n        android:allowBackup=&quot;true&quot;\r\n        android:icon=&quot;@mipmap/ic_launcher&quot;\r\n        android:label=&quot;@string/app_name&quot;\r\n        android:supportsRtl=&quot;true&quot;\r\n        android:theme=&quot;@style/AppTheme&quot;&gt;\r\n\r\n\r\n        &lt;meta-data\r\n            android:name=&quot;com.google.android.geo.API_KEY&quot;\r\n            android:value=&quot;@string/google_maps_key&quot; /&gt;\r\n\r\n        &lt;activity\r\n            android:name=&quot;.MapsActivity&quot;\r\n            android:label=&quot;@string/title_activity_maps&quot; /&gt;\r\n        &lt;activity android:name=&quot;.RegisterActivity&quot;&gt;\r\n            &lt;intent-filter&gt;\r\n                &lt;action android:name=&quot;android.intent.action.MAIN&quot; /&gt;\r\n\r\n                &lt;category android:name=&quot;android.intent.category.LAUNCHER&quot; /&gt;\r\n            &lt;/intent-filter&gt;\r\n        &lt;/activity&gt;\r\n        &lt;activity android:name=&quot;.WrongPhoneNum&quot;&gt;&lt;/activity&gt;\r\n    &lt;/application&gt;\r\n\r\n    &lt;/manifest&gt;\r\n","title":"ActivityCompat.requestPermissions not showing dialog box","body":"<pre><code>if (ContextCompat.checkSelfPermission(RegisterActivity.this,      Manifest.permission.READ_PHONE_STATE) == PackageManager.PERMISSION_DENIED){\n            ActivityCompat.requestPermissions(this,\n                    new String[]{Manifest.permission.READ_PHONE_STATE}, REQUEST_READ_PHONE_STATE_PERMISSION);\n</code></pre>\n\n<p>i'm trying to use this function on nexus 5 api 23 and its just not showing me the dialog box like its supposed to do, it's just not doing anything.\nwhat could cause the problem? (this code is in the java activity)\ni tried changing my minimum api to 23 and use the requestPermissions() without the ActivityCompat but still not working.</p>\n\n<pre><code>apply plugin: 'com.android.application'\n\nandroid {\ncompileSdkVersion 23\nbuildToolsVersion \"23.0.2\"\n\ndefaultConfig {\n    applicationId \"com.example.idanayzen.photomap\"\n    minSdkVersion 23\n    targetSdkVersion 23\n    versionCode 1\n    versionName \"1.0\"\n}\nbuildTypes {\n    release {\n        minifyEnabled false\n        proguardFiles getDefaultProguardFile('proguard-android.txt'), 'proguard-rules.pro'\n    }\n}\n}\n\ndependencies {\ncompile fileTree(dir: 'libs', include: ['*.jar'])\ntestCompile 'junit:junit:4.12'\ncompile 'com.android.support:appcompat-v7:23.1.1'\ncompile 'com.google.android.gms:play-services:8.4.0'\ncompile 'com.android.support:design:23.1.1'\n}\n</code></pre>\n\n<p>and the Manifest:</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"utf-8\"?&gt;\n&lt;manifest xmlns:android=\"http://schemas.android.com/apk/res/android\"\npackage=\"com.example.idanayzen.photomap\"&gt;\n\n&lt;uses-permission android:name=\"android.permission.ACCESS_FINE_LOCATION\" /&gt;\n&lt;uses-permission android:name=\"android.permission.READ_PHONE_STATE\" /&gt;\n&lt;uses-permission android:name=\"android.permission.READ_SMS\" /&gt;\n\n&lt;application\n    android:allowBackup=\"true\"\n    android:icon=\"@mipmap/ic_launcher\"\n    android:label=\"@string/app_name\"\n    android:supportsRtl=\"true\"\n    android:theme=\"@style/AppTheme\"&gt;\n\n\n    &lt;meta-data\n        android:name=\"com.google.android.geo.API_KEY\"\n        android:value=\"@string/google_maps_key\" /&gt;\n\n    &lt;activity\n        android:name=\".MapsActivity\"\n        android:label=\"@string/title_activity_maps\" /&gt;\n    &lt;activity android:name=\".RegisterActivity\"&gt;\n        &lt;intent-filter&gt;\n            &lt;action android:name=\"android.intent.action.MAIN\" /&gt;\n\n            &lt;category android:name=\"android.intent.category.LAUNCHER\" /&gt;\n        &lt;/intent-filter&gt;\n    &lt;/activity&gt;\n    &lt;activity android:name=\".WrongPhoneNum\"&gt;&lt;/activity&gt;\n&lt;/application&gt;\n\n&lt;/manifest&gt;\n</code></pre>\n"},{"tags":["java","open-telemetry","aws-xray"],"comments":[{"owner":{"account_id":11152648,"reputation":267,"user_id":8185365,"display_name":"William Armiros"},"score":0,"creation_date":1665759559,"post_id":73957707,"comment_id":130780344,"body_markdown":"Hello - this may be an issue with the AWS SDK instrumentation. The instrumentation should pass in trace context as an [SQS system message attribute](https://docs.aws.amazon.com/AWSSimpleQueueService/latest/SQSDeveloperGuide/sqs-message-metadata.html#sqs-message-system-attributes) for it to be recognized downstream. Please open an issue here to describe this bug: https://github.com/open-telemetry/opentelemetry-java-instrumentation/","body":"Hello - this may be an issue with the AWS SDK instrumentation. The instrumentation should pass in trace context as an <a href=\"https://docs.aws.amazon.com/AWSSimpleQueueService/latest/SQSDeveloperGuide/sqs-message-metadata.html#sqs-message-system-attributes\" rel=\"nofollow noreferrer\">SQS system message attribute</a> for it to be recognized downstream. Please open an issue here to describe this bug: <a href=\"https://github.com/open-telemetry/opentelemetry-java-instrumentation/\" rel=\"nofollow noreferrer\">github.com/open-telemetry/opentelemetry-java-instrumentation</a>"},{"owner":{"account_id":26528435,"reputation":21,"user_id":20161040,"display_name":"Russell Jacobs"},"score":0,"creation_date":1667299182,"post_id":73957707,"comment_id":131130434,"body_markdown":"https://github.com/aws-observability/aws-otel-java-instrumentation/issues/244. It is already a message attribute. Basically this is a general with SQS. The instrumentation should automatically extracts the SQS trace context into a span per message received","body":"<a href=\"https://github.com/aws-observability/aws-otel-java-instrumentation/issues/244\" rel=\"nofollow noreferrer\">github.com/aws-observability/aws-otel-java-instrumentation/&hellip;</a>&zwnj;&#8203;. It is already a message attribute. Basically this is a general with SQS. The instrumentation should automatically extracts the SQS trace context into a span per message received"}],"answers":[{"tags":[],"owner":{"account_id":28023588,"reputation":11,"user_id":21691066,"display_name":"Ilia Beliaev"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1697793307,"creation_date":1697629497,"answer_id":77316001,"question_id":73957707,"body_markdown":"With a current state of opentelemetry library (1.31.0) from my (somewhat limited) understanding, the attributes are correctly propagated to SQS queue when `otel.instrumentation.aws-sdk.experimental-use-propagator-for-messaging` property is specified (or an `OTEL_INSTRUMENTATION_AWS_SDK_EXPERIMENTAL_USE_PROPAGATOR_FOR_MESSAGING` env variable).\r\n\r\nHowever, when they are read from the SQS message attributes on the receiving side, a context with trace values is created and immediately closed without wrapping the actual message handling (see [code on GitHub][1]):\r\n```java\r\n  private static void createConsumerSpan(\r\n      Message message,\r\n      SdkHttpResponse httpResponse,\r\n      ExecutionAttributes executionAttributes,\r\n      TracingExecutionInterceptor config) {\r\n\r\n    io.opentelemetry.context.Context parentContext = io.opentelemetry.context.Context.root();\r\n\r\n    TextMapPropagator messagingPropagator = config.getMessagingPropagator();\r\n    if (messagingPropagator != null) {\r\n      parentContext =\r\n          SqsParentContext.ofMessageAttributes(message.messageAttributes(), messagingPropagator);\r\n    }\r\n\r\n    if (config.shouldUseXrayPropagator()\r\n        &amp;&amp; parentContext == io.opentelemetry.context.Context.root()) {\r\n      parentContext = SqsParentContext.ofSystemAttributes(message.attributesAsStrings());\r\n    }\r\n\r\n    Instrumenter&lt;ExecutionAttributes, SdkHttpResponse&gt; consumerInstrumenter =\r\n        config.getConsumerInstrumenter();\r\n    if (consumerInstrumenter.shouldStart(parentContext, executionAttributes)) {\r\n      io.opentelemetry.context.Context context =\r\n          consumerInstrumenter.start(parentContext, executionAttributes);\r\n\r\n      // TODO: Even if we keep HTTP attributes (see afterMarshalling), does it make sense here\r\n      //  per-message?\r\n      // TODO: Should we really create root spans if we can&#39;t extract anything, or should we attach\r\n      //  to the current context?\r\n      consumerInstrumenter.end(context, executionAttributes, httpResponse, null);\r\n    }\r\n  }\r\n```\r\nAs a far as I see, that&#39;s done like this because AWS SQS SDK pulls messages in batches (even if you set it to a batch size of 1 it will still be a list).\r\nYou would need to setup manual span creation from remote parent in a place of message handling. Something like this should work (example written in kotlin, should be similar for java):\r\n```kotlin\r\nimport software.amazon.awssdk.services.sqs.model.Message\r\n\r\n    val tracer: Tracer\r\n\r\n    fun handle(\r\n        message: Message,\r\n        block: (Message) -&gt; Unit,\r\n    ) {\r\n        val span = createSpan(message)\r\n        try {\r\n            span.makeCurrent().use { block(message) }\r\n        } catch (e: Throwable) {\r\n            span.recordException(e)\r\n            throw e\r\n        } finally {\r\n            span.end()\r\n        }\r\n    }\r\n\r\n   fun createSpan(message: Message): Span {\r\n        // Example uses b3multi headers, change to what is used in your case\r\n        val traceId = message.messageAttributes()[&quot;X-B3-TraceId&quot;]?.stringValue()\r\n        val spanId = message.messageAttributes()[&quot;X-B3-SpanId&quot;]?.stringValue()\r\n        val isSampled = message.messageAttributes().getOrDefault(&quot;X-B3-Sampled&quot;, &quot;false&quot;)\r\n            .let { it == &quot;true&quot; || it == &quot;1&quot; }\r\n        val traceFlags = if (isSampled) TraceFlags.getSampled() else TraceFlags.getDefault()\r\n        return if (traceId != null &amp;&amp; spanId != null) {\r\n            tracer.spanBuilder(&quot;span-name&quot;)\r\n                .setParent(\r\n                    Context.current().with(\r\n                        Span.wrap(\r\n                            SpanContext.createFromRemoteParent(\r\n                                traceId,\r\n                                spanId,\r\n                                traceFlags,\r\n                                TraceState.getDefault(),\r\n                            ),\r\n                        ),\r\n                    ),\r\n                ).startSpan()\r\n        } else {\r\n            Span.current()\r\n        }\r\n    }\r\n```\r\n**EDIT:** it seems like propagation with SqsTemplate (in case of spring) doesn&#39;t work reliably, because for the first request a queue url is fetched and then in an async manner the actual send request is done.\r\n\r\n\r\n  [1]: https://github.com/open-telemetry/opentelemetry-java-instrumentation/blob/v1.31.0/instrumentation/aws-sdk/aws-sdk-2.2/library/src/main/java/io/opentelemetry/instrumentation/awssdk/v2_2/SqsImpl.java#L88","title":"How do I propagate SQS calls with OpenTelemetry auto-instrumentation","body":"<p>With a current state of opentelemetry library (1.31.0) from my (somewhat limited) understanding, the attributes are correctly propagated to SQS queue when <code>otel.instrumentation.aws-sdk.experimental-use-propagator-for-messaging</code> property is specified (or an <code>OTEL_INSTRUMENTATION_AWS_SDK_EXPERIMENTAL_USE_PROPAGATOR_FOR_MESSAGING</code> env variable).</p>\n<p>However, when they are read from the SQS message attributes on the receiving side, a context with trace values is created and immediately closed without wrapping the actual message handling (see <a href=\"https://github.com/open-telemetry/opentelemetry-java-instrumentation/blob/v1.31.0/instrumentation/aws-sdk/aws-sdk-2.2/library/src/main/java/io/opentelemetry/instrumentation/awssdk/v2_2/SqsImpl.java#L88\" rel=\"nofollow noreferrer\">code on GitHub</a>):</p>\n<pre class=\"lang-java prettyprint-override\"><code>  private static void createConsumerSpan(\n      Message message,\n      SdkHttpResponse httpResponse,\n      ExecutionAttributes executionAttributes,\n      TracingExecutionInterceptor config) {\n\n    io.opentelemetry.context.Context parentContext = io.opentelemetry.context.Context.root();\n\n    TextMapPropagator messagingPropagator = config.getMessagingPropagator();\n    if (messagingPropagator != null) {\n      parentContext =\n          SqsParentContext.ofMessageAttributes(message.messageAttributes(), messagingPropagator);\n    }\n\n    if (config.shouldUseXrayPropagator()\n        &amp;&amp; parentContext == io.opentelemetry.context.Context.root()) {\n      parentContext = SqsParentContext.ofSystemAttributes(message.attributesAsStrings());\n    }\n\n    Instrumenter&lt;ExecutionAttributes, SdkHttpResponse&gt; consumerInstrumenter =\n        config.getConsumerInstrumenter();\n    if (consumerInstrumenter.shouldStart(parentContext, executionAttributes)) {\n      io.opentelemetry.context.Context context =\n          consumerInstrumenter.start(parentContext, executionAttributes);\n\n      // TODO: Even if we keep HTTP attributes (see afterMarshalling), does it make sense here\n      //  per-message?\n      // TODO: Should we really create root spans if we can't extract anything, or should we attach\n      //  to the current context?\n      consumerInstrumenter.end(context, executionAttributes, httpResponse, null);\n    }\n  }\n</code></pre>\n<p>As a far as I see, that's done like this because AWS SQS SDK pulls messages in batches (even if you set it to a batch size of 1 it will still be a list).\nYou would need to setup manual span creation from remote parent in a place of message handling. Something like this should work (example written in kotlin, should be similar for java):</p>\n<pre class=\"lang-kotlin prettyprint-override\"><code>import software.amazon.awssdk.services.sqs.model.Message\n\n    val tracer: Tracer\n\n    fun handle(\n        message: Message,\n        block: (Message) -&gt; Unit,\n    ) {\n        val span = createSpan(message)\n        try {\n            span.makeCurrent().use { block(message) }\n        } catch (e: Throwable) {\n            span.recordException(e)\n            throw e\n        } finally {\n            span.end()\n        }\n    }\n\n   fun createSpan(message: Message): Span {\n        // Example uses b3multi headers, change to what is used in your case\n        val traceId = message.messageAttributes()[&quot;X-B3-TraceId&quot;]?.stringValue()\n        val spanId = message.messageAttributes()[&quot;X-B3-SpanId&quot;]?.stringValue()\n        val isSampled = message.messageAttributes().getOrDefault(&quot;X-B3-Sampled&quot;, &quot;false&quot;)\n            .let { it == &quot;true&quot; || it == &quot;1&quot; }\n        val traceFlags = if (isSampled) TraceFlags.getSampled() else TraceFlags.getDefault()\n        return if (traceId != null &amp;&amp; spanId != null) {\n            tracer.spanBuilder(&quot;span-name&quot;)\n                .setParent(\n                    Context.current().with(\n                        Span.wrap(\n                            SpanContext.createFromRemoteParent(\n                                traceId,\n                                spanId,\n                                traceFlags,\n                                TraceState.getDefault(),\n                            ),\n                        ),\n                    ),\n                ).startSpan()\n        } else {\n            Span.current()\n        }\n    }\n</code></pre>\n<p><strong>EDIT:</strong> it seems like propagation with SqsTemplate (in case of spring) doesn't work reliably, because for the first request a queue url is fetched and then in an async manner the actual send request is done.</p>\n"}],"owner":{"account_id":26528435,"reputation":21,"user_id":20161040,"display_name":"Russell Jacobs"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":959,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":1,"score":2,"last_activity_date":1697793307,"creation_date":1664958445,"question_id":73957707,"body_markdown":"I&#39;ve done the necessary sidecar setup in CloudFormation for the collector and added the following to my docker file for my Java applications deployed in AWS ECS (obviously replacing myservice with relevant name):\r\n\r\n```\r\nENV OTEL_SERVICE_NAME=&quot;MyService&quot;\r\nENV OTEL_EXPORTER_OTLP_ENDPOINT=&quot;http://localhost:4317&quot;\r\nENV OTEL_PROPAGATORS=&quot;tracecontext,baggage,xray&quot;\r\n\r\nCMD java -XX:+UseContainerSupport -XX:MaxRAMPercentage=80.0 -javaagent:aws-opentelemetry-agent.jar -jar myservice-1.0.jar\r\n```\r\n\r\nTraces for calls to synchronous endpoints work fantastically but traces do not seem to be propagated across SQS calls. \r\n\r\nAny ideas?","title":"How do I propagate SQS calls with OpenTelemetry auto-instrumentation","body":"<p>I've done the necessary sidecar setup in CloudFormation for the collector and added the following to my docker file for my Java applications deployed in AWS ECS (obviously replacing myservice with relevant name):</p>\n<pre><code>ENV OTEL_SERVICE_NAME=&quot;MyService&quot;\nENV OTEL_EXPORTER_OTLP_ENDPOINT=&quot;http://localhost:4317&quot;\nENV OTEL_PROPAGATORS=&quot;tracecontext,baggage,xray&quot;\n\nCMD java -XX:+UseContainerSupport -XX:MaxRAMPercentage=80.0 -javaagent:aws-opentelemetry-agent.jar -jar myservice-1.0.jar\n</code></pre>\n<p>Traces for calls to synchronous endpoints work fantastically but traces do not seem to be propagated across SQS calls.</p>\n<p>Any ideas?</p>\n"},{"tags":["java","android","google-maps","permissions","location"],"comments":[{"owner":{"account_id":11283090,"reputation":7449,"user_id":8274756,"display_name":"Tamir Abutbul"},"score":0,"creation_date":1563467484,"post_id":57098852,"comment_id":100719260,"body_markdown":"Check [this](https://github.com/googlesamples/easypermissions)","body":"Check <a href=\"https://github.com/googlesamples/easypermissions\" rel=\"nofollow noreferrer\">this</a>"}],"answers":[{"tags":[],"owner":{"account_id":16342666,"reputation":109,"user_id":11803223,"display_name":"Andino Inyang"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1563470200,"creation_date":1563467836,"answer_id":57099143,"question_id":57098852,"body_markdown":"\r\n    if (ContextCompat.checkSelfPermission(thisActivity,\r\n            Manifest.permission.READ_CONTACTS)\r\n            != PackageManager.PERMISSION_GRANTED) {\r\n    \r\n        // Permission is not granted\r\n        // Should we show an explanation?\r\n        if (ActivityCompat.shouldShowRequestPermissionRationale(thisActivity,\r\n                Manifest.permission.ACCESS_FINE_LOCATION)) {\r\n\r\n        } else {\r\n            ActivityCompat.requestPermissions(thisActivity,\r\n                    new String[]{Manifest.permission.ACCESS_COARSE_LOCATION});\r\n        }\r\n    } else {\r\n        // Permission has already been granted\r\n    }","title":"How to ask for location permission in Android?","body":"<pre><code>if (ContextCompat.checkSelfPermission(thisActivity,\n        Manifest.permission.READ_CONTACTS)\n        != PackageManager.PERMISSION_GRANTED) {\n\n    // Permission is not granted\n    // Should we show an explanation?\n    if (ActivityCompat.shouldShowRequestPermissionRationale(thisActivity,\n            Manifest.permission.ACCESS_FINE_LOCATION)) {\n\n    } else {\n        ActivityCompat.requestPermissions(thisActivity,\n                new String[]{Manifest.permission.ACCESS_COARSE_LOCATION});\n    }\n} else {\n    // Permission has already been granted\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":11276487,"reputation":305,"user_id":8270400,"display_name":"Ajith Ramesh"},"down_vote_count":0,"up_vote_count":4,"is_accepted":true,"score":4,"last_activity_date":1697793153,"creation_date":1563469321,"answer_id":57099478,"question_id":57098852,"body_markdown":"From API level 23 (Android 6.0 Marshmallow) we need to ask Run-time permission from the user-end. You can do this in two steps.\r\n\r\n1) Add these two permissions in ```AndroidManifest.xml``` file.\r\n\r\n```&lt;uses-permission android:name=&quot;android.permission.ACCESS_FINE_LOCATION&quot; /&gt;```\r\n\r\n```&lt;uses-permission android:name=&quot;android.permission.ACCESS_COARSE_LOCATION&quot; /&gt;```\r\n\r\nExample:\r\n```\r\n&lt;manifest xlmns:android...&gt;\r\n ...\r\n &lt;uses-permission android:name=&quot;android.permission.ACCESS_FINE_LOCATION&quot; /&gt;\r\n &lt;uses-permission android:name=&quot;android.permission.ACCESS_COARSE_LOCATION&quot; /&gt; \r\n &lt;application ...\r\n&lt;/manifest&gt;\r\n```\r\n\r\n2) Put this code block inside class where you need to get current location\r\n  ```void CheckUserPermsions(){\r\n      if ( Build.VERSION.SDK_INT &gt;= 23){\r\n                if (ActivityCompat.checkSelfPermission(this, android.Manifest.permission.ACCESS_FINE_LOCATION) !=\r\n                            PackageManager.PERMISSION_GRANTED  ){\r\n                     requestPermissions(new String[]{\r\n                                        android.Manifest.permission.ACCESS_FINE_LOCATION},\r\n                                REQUEST_CODE_ASK_PERMISSIONS);\r\n                        return ;\r\n                    }\r\n                }\r\n\r\n                getLocation();\r\n              \r\n    }\r\n    //get access to location permission\r\n    final private int REQUEST_CODE_ASK_PERMISSIONS = 123;\r\n\r\n\r\n\r\n    @Override\r\n    public void onRequestPermissionsResult(int requestCode, String[] permissions, int[] grantResults) {\r\n        switch (requestCode) {\r\n            case REQUEST_CODE_ASK_PERMISSIONS:\r\n                if (grantResults[0] == PackageManager.PERMISSION_GRANTED) {\r\n                    getLocation();\r\n                } else {\r\n                    // Permission Denied\r\n                    Toast.makeText( this,&quot;your message&quot; , Toast.LENGTH_SHORT)\r\n                            .show();\r\n                }\r\n                break;\r\n            default:\r\n                super.onRequestPermissionsResult(requestCode, permissions, grantResults);\r\n        }\r\n    }\r\n\r\n//Get location\r\n  public  void getLocation(){\r\n  \t    LocationManager locationManager = (LocationManager) getSystemService(LOCATION_SERVICE);\r\n  \t        Location myLocation=locationManager.getLastKnownLocation(LocationManager.GPS_PROVIDER);\r\n                if (myLocation == null) \r\n                {\r\n                    myLocation = locationManager.getLastKnownLocation(LocationManager.PASSIVE_PROVIDER);\r\n\r\n                }\r\n    }\r\n```","title":"How to ask for location permission in Android?","body":"<p>From API level 23 (Android 6.0 Marshmallow) we need to ask Run-time permission from the user-end. You can do this in two steps.</p>\n<ol>\n<li>Add these two permissions in <code>AndroidManifest.xml</code> file.</li>\n</ol>\n<p><code>&lt;uses-permission android:name=&quot;android.permission.ACCESS_FINE_LOCATION&quot; /&gt;</code></p>\n<p><code>&lt;uses-permission android:name=&quot;android.permission.ACCESS_COARSE_LOCATION&quot; /&gt;</code></p>\n<p>Example:</p>\n<pre><code>&lt;manifest xlmns:android...&gt;\n ...\n &lt;uses-permission android:name=&quot;android.permission.ACCESS_FINE_LOCATION&quot; /&gt;\n &lt;uses-permission android:name=&quot;android.permission.ACCESS_COARSE_LOCATION&quot; /&gt; \n &lt;application ...\n&lt;/manifest&gt;\n</code></pre>\n<ol start=\"2\">\n<li>Put this code block inside class where you need to get current location</li>\n</ol>\n<pre><code>    if ( Build.VERSION.SDK_INT &gt;= 23){\n              if (ActivityCompat.checkSelfPermission(this, android.Manifest.permission.ACCESS_FINE_LOCATION) !=\n                          PackageManager.PERMISSION_GRANTED  ){\n                   requestPermissions(new String[]{\n                                      android.Manifest.permission.ACCESS_FINE_LOCATION},\n                              REQUEST_CODE_ASK_PERMISSIONS);\n                      return ;\n                  }\n              }\n\n              getLocation();\n            \n  }\n  //get access to location permission\n  final private int REQUEST_CODE_ASK_PERMISSIONS = 123;\n\n\n\n  @Override\n  public void onRequestPermissionsResult(int requestCode, String[] permissions, int[] grantResults) {\n      switch (requestCode) {\n          case REQUEST_CODE_ASK_PERMISSIONS:\n              if (grantResults[0] == PackageManager.PERMISSION_GRANTED) {\n                  getLocation();\n              } else {\n                  // Permission Denied\n                  Toast.makeText( this,&quot;your message&quot; , Toast.LENGTH_SHORT)\n                          .show();\n              }\n              break;\n          default:\n              super.onRequestPermissionsResult(requestCode, permissions, grantResults);\n      }\n  }\n\n//Get location\npublic  void getLocation(){\n      LocationManager locationManager = (LocationManager) getSystemService(LOCATION_SERVICE);\n          Location myLocation=locationManager.getLastKnownLocation(LocationManager.GPS_PROVIDER);\n              if (myLocation == null) \n              {\n                  myLocation = locationManager.getLastKnownLocation(LocationManager.PASSIVE_PROVIDER);\n\n              }\n  }\n</code></pre>\n"}],"owner":{"account_id":15781516,"reputation":43,"user_id":11387753,"display_name":"stefan"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":13129,"favorite_count":0,"down_vote_count":0,"up_vote_count":4,"accepted_answer_id":57099478,"answer_count":2,"score":4,"last_activity_date":1697793153,"creation_date":1563466640,"question_id":57098852,"body_markdown":"I have tried so many codes and solutions but none of them worked. I want to ask the user for permission and get the pop-up window. Even though I used the code the window won&#39;t show? I think the code can get changed but I don&#39;t know exactly where to place it. Also, I&#39;m new to Android Studio\r\n\r\n```java\r\n\r\n\r\npublic class MainActivity extends AppCompatActivity implements OnMapReadyCallback {\r\n\r\n\r\n    private GoogleMap mMap;\r\n    private LatLngBounds PODGORICA = new LatLngBounds(\r\n            new LatLng(42.400334, 19.227705), new LatLng(42.470269, 19.323107));\r\n\r\n    private DrawerLayout mDrawerLayout;\r\n    private ActionBarDrawerToggle mToggle;\r\n\r\n\r\n    private static final String TAG = &quot;MapActivity&quot;;\r\n\r\n    LocationManager locationManager;\r\n    String provider;\r\n\r\n\r\n    @Override\r\n    protected void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        setContentView(R.layout.activity_main);\r\n\r\n\r\n        mDrawerLayout = (DrawerLayout) findViewById(R.id.drawerLayout);\r\n        mToggle = new ActionBarDrawerToggle(this, mDrawerLayout, R.string.open, R.string.close);\r\n\r\n        mDrawerLayout.addDrawerListener(mToggle);\r\n        mToggle.syncState();\r\n\r\n        getSupportActionBar().setDisplayHomeAsUpEnabled(true);\r\n\r\n        // Obtain the SupportMapFragment and get notified when the map is ready to be used.\r\n        SupportMapFragment mapFragment = (SupportMapFragment) getSupportFragmentManager().findFragmentById(R.id.map);\r\n        mapFragment.getMapAsync(this);\r\n\r\n\r\n        Button btnQR = (Button) findViewById(R.id.skener);\r\n\r\n\r\n        btnQR.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View v) {\r\n                Intent intent = new Intent(MainActivity.this, Main2Activity.class);\r\n                startActivity(intent);\r\n            }\r\n        });\r\n\r\n        if (ActivityCompat.checkSelfPermission(this, Manifest.permission.ACCESS_FINE_LOCATION) != PackageManager.PERMISSION_GRANTED &amp;&amp; ActivityCompat.checkSelfPermission(this, Manifest.permission.ACCESS_COARSE_LOCATION) != PackageManager.PERMISSION_GRANTED) {\r\n            if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.M) {\r\n                requestPermissions(new String[]{Manifest.permission.ACCESS_COARSE_LOCATION,Manifest.permission.ACCESS_FINE_LOCATION,Manifest.permission.INTERNET}\r\n                        ,10);\r\n            }\r\n            return;\r\n        }\r\n\r\n\r\n    }\r\n\r\n\r\n    @Override\r\n    public boolean onOptionsItemSelected(MenuItem item) {\r\n        if (mToggle.onOptionsItemSelected(item)) {\r\n            return true;\r\n        }\r\n        return super.onOptionsItemSelected(item);\r\n    }\r\n\r\n\r\n    @Override\r\n    public void onMapReady(GoogleMap googleMap) {\r\n\r\n\r\n        mMap = googleMap;\r\n\r\n        mMap.setLatLngBoundsForCameraTarget(PODGORICA);\r\n        mMap.setMinZoomPreference(5.0f);\r\n        mMap.setMaxZoomPreference(25.0f);\r\n\r\n        CameraPosition cameraPosition = new CameraPosition.Builder()\r\n                .target(new LatLng(42.441332, 19.262953))\r\n                .zoom(15)\r\n                .bearing(0)\r\n                //.tilt(45)\r\n                .build();\r\n        mMap.animateCamera(CameraUpdateFactory.newCameraPosition(cameraPosition));\r\n\r\n\r\n\r\n     //   mMap.setMyLocationEnabled(true);\r\n\r\n    }\r\n\r\n```\r\n\r\nI even tried codes from Googles official page but got same result...","title":"How to ask for location permission in Android?","body":"<p>I have tried so many codes and solutions but none of them worked. I want to ask the user for permission and get the pop-up window. Even though I used the code the window won't show? I think the code can get changed but I don't know exactly where to place it. Also, I'm new to Android Studio</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>\n\npublic class MainActivity extends AppCompatActivity implements OnMapReadyCallback {\n\n\n    private GoogleMap mMap;\n    private LatLngBounds PODGORICA = new LatLngBounds(\n            new LatLng(42.400334, 19.227705), new LatLng(42.470269, 19.323107));\n\n    private DrawerLayout mDrawerLayout;\n    private ActionBarDrawerToggle mToggle;\n\n\n    private static final String TAG = \"MapActivity\";\n\n    LocationManager locationManager;\n    String provider;\n\n\n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.activity_main);\n\n\n        mDrawerLayout = (DrawerLayout) findViewById(R.id.drawerLayout);\n        mToggle = new ActionBarDrawerToggle(this, mDrawerLayout, R.string.open, R.string.close);\n\n        mDrawerLayout.addDrawerListener(mToggle);\n        mToggle.syncState();\n\n        getSupportActionBar().setDisplayHomeAsUpEnabled(true);\n\n        // Obtain the SupportMapFragment and get notified when the map is ready to be used.\n        SupportMapFragment mapFragment = (SupportMapFragment) getSupportFragmentManager().findFragmentById(R.id.map);\n        mapFragment.getMapAsync(this);\n\n\n        Button btnQR = (Button) findViewById(R.id.skener);\n\n\n        btnQR.setOnClickListener(new View.OnClickListener() {\n            @Override\n            public void onClick(View v) {\n                Intent intent = new Intent(MainActivity.this, Main2Activity.class);\n                startActivity(intent);\n            }\n        });\n\n        if (ActivityCompat.checkSelfPermission(this, Manifest.permission.ACCESS_FINE_LOCATION) != PackageManager.PERMISSION_GRANTED &amp;&amp; ActivityCompat.checkSelfPermission(this, Manifest.permission.ACCESS_COARSE_LOCATION) != PackageManager.PERMISSION_GRANTED) {\n            if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.M) {\n                requestPermissions(new String[]{Manifest.permission.ACCESS_COARSE_LOCATION,Manifest.permission.ACCESS_FINE_LOCATION,Manifest.permission.INTERNET}\n                        ,10);\n            }\n            return;\n        }\n\n\n    }\n\n\n    @Override\n    public boolean onOptionsItemSelected(MenuItem item) {\n        if (mToggle.onOptionsItemSelected(item)) {\n            return true;\n        }\n        return super.onOptionsItemSelected(item);\n    }\n\n\n    @Override\n    public void onMapReady(GoogleMap googleMap) {\n\n\n        mMap = googleMap;\n\n        mMap.setLatLngBoundsForCameraTarget(PODGORICA);\n        mMap.setMinZoomPreference(5.0f);\n        mMap.setMaxZoomPreference(25.0f);\n\n        CameraPosition cameraPosition = new CameraPosition.Builder()\n                .target(new LatLng(42.441332, 19.262953))\n                .zoom(15)\n                .bearing(0)\n                //.tilt(45)\n                .build();\n        mMap.animateCamera(CameraUpdateFactory.newCameraPosition(cameraPosition));\n\n\n\n     //   mMap.setMyLocationEnabled(true);\n\n    }\n\n</code></pre>\n\n<p>I even tried codes from Googles official page but got same result...</p>\n"},{"tags":["java","java-8","base64","deprecated","java-11"],"comments":[{"owner":{"account_id":47283,"reputation":703817,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"score":3,"creation_date":1591269554,"post_id":62193303,"comment_id":109994700,"body_markdown":"You could always build your own JVM from the OpenJDK sources.   A more practical approach may be to say to the 3rd-party &quot;fix your buggy library to work on Java 11 ... or I stop paying for support&quot;.  People should not write their code to depend on internal classes.  Sun / Oracle said it was a bad idea.  There were always alternatives.","body":"You could always build your own JVM from the OpenJDK sources.   A more practical approach may be to say to the 3rd-party &quot;fix your buggy library to work on Java 11 ... or I stop paying for support&quot;.  People should not write their code to depend on internal classes.  Sun / Oracle said it was a bad idea.  There were always alternatives."}],"answers":[{"tags":[],"owner":{"account_id":362885,"reputation":37256,"user_id":706317,"accept_rate":70,"display_name":"ZhekaKozlov"},"down_vote_count":0,"up_vote_count":8,"is_accepted":false,"score":8,"last_activity_date":1591369923,"creation_date":1591369923,"answer_id":62218609,"question_id":62193303,"body_markdown":"One possible solution to this is you use `--patch-module` argument (if you are flexible in changing your command line). You will need to create a JAR with two class files `BASE64Encoder.class` and `CharacterEncoder.class` inside:\r\n\r\n    base64.jar\r\n        sun\r\n            misc\r\n                BASE64Encoder.class\r\n                CharacterEncoder.class\r\n\r\nThen you can run your application using the following options:\r\n\r\n    java --patch-module jdk.unsupported=base64.jar ...\r\n\r\n`--patch-module` will augment the `jdk.unsupported` module with two new classes so now you can use them at runtime.\r\n","title":"Java 11 : Patch sun.misc.BASE64Encoder","body":"<p>One possible solution to this is you use <code>--patch-module</code> argument (if you are flexible in changing your command line). You will need to create a JAR with two class files <code>BASE64Encoder.class</code> and <code>CharacterEncoder.class</code> inside:</p>\n\n<pre><code>base64.jar\n    sun\n        misc\n            BASE64Encoder.class\n            CharacterEncoder.class\n</code></pre>\n\n<p>Then you can run your application using the following options:</p>\n\n<pre><code>java --patch-module jdk.unsupported=base64.jar ...\n</code></pre>\n\n<p><code>--patch-module</code> will augment the <code>jdk.unsupported</code> module with two new classes so now you can use them at runtime.</p>\n"},{"tags":[],"owner":{"account_id":4422,"reputation":7797,"user_id":6629,"accept_rate":75,"display_name":"Kinjal Dixit"},"down_vote_count":1,"up_vote_count":12,"is_accepted":false,"score":11,"last_activity_date":1636293510,"creation_date":1636293510,"answer_id":69873095,"question_id":62193303,"body_markdown":"The JDK 11 replacement for sun.misc.BASE64Encoder and sun.miscBASE64Decoder is [java.util.Base64.Encoder](https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/Base64.Encoder.html) and [java.util.Base64.Decoder](https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/Base64.Decoder.html).\r\n\r\nTypical code in JDK 1.8 would look like:\r\n\r\n    String encoded = new BASE64Encoder().encode(bBytes);\r\n    byte[] decoded = new BASE64Decoder().decodeBuffer(encoded);\r\n\r\nThe JDK 11 replacements which would generate identical values are:\r\n\r\n    import java.util.Base64;\r\n    // ...\r\n    String encoded = Base64.getEncoder().encodeToString(bBytes);\r\n    byte[] decoded = Base64.getDecoder().decode(encoded);\r\n\r\n","title":"Java 11 : Patch sun.misc.BASE64Encoder","body":"<p>The JDK 11 replacement for sun.misc.BASE64Encoder and sun.miscBASE64Decoder is <a href=\"https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/Base64.Encoder.html\" rel=\"noreferrer\">java.util.Base64.Encoder</a> and <a href=\"https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/Base64.Decoder.html\" rel=\"noreferrer\">java.util.Base64.Decoder</a>.</p>\n<p>Typical code in JDK 1.8 would look like:</p>\n<pre><code>String encoded = new BASE64Encoder().encode(bBytes);\nbyte[] decoded = new BASE64Decoder().decodeBuffer(encoded);\n</code></pre>\n<p>The JDK 11 replacements which would generate identical values are:</p>\n<pre><code>import java.util.Base64;\n// ...\nString encoded = Base64.getEncoder().encodeToString(bBytes);\nbyte[] decoded = Base64.getDecoder().decode(encoded);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":223320,"reputation":31,"user_id":2655840,"display_name":"CormacM"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1697792986,"creation_date":1697501737,"answer_id":77305555,"question_id":62193303,"body_markdown":"I was getting the same error trying to run Spring 5 on Java 11. I can&#39;t upgrade to Spring 6 since my company hasn&#39;t certified Java 17 yet (another story).\r\n\r\nThe answer from ZhekaKozlov worked for me, although I had to add `sun/misc/CharacterEncoder.class` to my patch jar.\r\nAlso worth noting that adding my `base64.jar` to the classpath had no effect - I had to use the patch-module argument.","title":"Java 11 : Patch sun.misc.BASE64Encoder","body":"<p>I was getting the same error trying to run Spring 5 on Java 11. I can't upgrade to Spring 6 since my company hasn't certified Java 17 yet (another story).</p>\n<p>The answer from ZhekaKozlov worked for me, although I had to add <code>sun/misc/CharacterEncoder.class</code> to my patch jar.\nAlso worth noting that adding my <code>base64.jar</code> to the classpath had no effect - I had to use the patch-module argument.</p>\n"},{"tags":[],"owner":{"account_id":223320,"reputation":31,"user_id":2655840,"display_name":"CormacM"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1697501906,"creation_date":1697501906,"answer_id":77305565,"question_id":62193303,"body_markdown":"I was getting the same error trying to run Spring 5 on Java 11. I can&#39;t upgrade to Spring 6 since my company hasn&#39;t certified Java 17 yet (another story).\r\nThe answer from ZhekaKozlov worked for me, although I had to add sun/misc/CEStreamExhausted.class to my patch jar (I got all the sun classes from rt.jar)\r\nAlso worth noting that adding my base64.jar to the classpath had no effect - I had to use the patch-module argument.","title":"Java 11 : Patch sun.misc.BASE64Encoder","body":"<p>I was getting the same error trying to run Spring 5 on Java 11. I can't upgrade to Spring 6 since my company hasn't certified Java 17 yet (another story).\nThe answer from ZhekaKozlov worked for me, although I had to add sun/misc/CEStreamExhausted.class to my patch jar (I got all the sun classes from rt.jar)\nAlso worth noting that adding my base64.jar to the classpath had no effect - I had to use the patch-module argument.</p>\n"}],"owner":{"account_id":1135699,"reputation":30287,"user_id":1120793,"accept_rate":35,"display_name":"Darshan Mehta"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":24637,"favorite_count":0,"down_vote_count":0,"up_vote_count":8,"answer_count":4,"score":8,"last_activity_date":1697792986,"creation_date":1591269431,"question_id":62193303,"body_markdown":"This question is not a duplicate of [java.lang.NoClassDefFoundError: sun/misc/BASE64Encoder][1].\r\n\r\nI am trying to update the Java Version (to 11) in my app and one of the libraries in my app uses `sun.misc.BASE64Encoder` class, so I inevitably get this exception:\r\n\r\n```\r\nCaused by: java.lang.ClassNotFoundException: sun.misc.BASE64Encoder\r\n\tat java.base/jdk.internal.loader.BuiltinClassLoader.loadClass(BuiltinClassLoader.java:581)\r\n\tat java.base/jdk.internal.loader.ClassLoaders$AppClassLoader.loadClass(ClassLoaders.java:178)\r\n\tat java.base/java.lang.ClassLoader.loadClass(ClassLoader.java:521)\r\n```\r\n\r\nNow, the way to solve would be to use `java.util.Base64` or apache commons as the other answers suggest. However, the problem is, this library belongs to a third party and I don&#39;t have the source code for it. There doesn&#39;t seem to be a new version that is not using these classes. So, to work around this issue, I did the following:\r\n\r\n * Created package `sun.misc`\r\n * Copied both `BASE64Encoder` and `CharacterEncoder` classes in this package\r\n\r\nBut now, I get a compilation error saying `The package sun.misc conflicts with a package accessible from another module: jdk.unsupported`.\r\n\r\nIs there any way to get around this error? If not, can I add a `jar` to the dependencies that contains these classes? I am just trying to make sure these classes are available to that third party library at runtime (either via my own source code or via a jar that bundles these classes in).\r\n\r\n  [1]: https://stackoverflow.com/questions/29692146/java-lang-noclassdeffounderror-sun-misc-base64encoder","title":"Java 11 : Patch sun.misc.BASE64Encoder","body":"<p>This question is not a duplicate of <a href=\"https://stackoverflow.com/questions/29692146/java-lang-noclassdeffounderror-sun-misc-base64encoder\">java.lang.NoClassDefFoundError: sun/misc/BASE64Encoder</a>.</p>\n\n<p>I am trying to update the Java Version (to 11) in my app and one of the libraries in my app uses <code>sun.misc.BASE64Encoder</code> class, so I inevitably get this exception:</p>\n\n<pre><code>Caused by: java.lang.ClassNotFoundException: sun.misc.BASE64Encoder\n    at java.base/jdk.internal.loader.BuiltinClassLoader.loadClass(BuiltinClassLoader.java:581)\n    at java.base/jdk.internal.loader.ClassLoaders$AppClassLoader.loadClass(ClassLoaders.java:178)\n    at java.base/java.lang.ClassLoader.loadClass(ClassLoader.java:521)\n</code></pre>\n\n<p>Now, the way to solve would be to use <code>java.util.Base64</code> or apache commons as the other answers suggest. However, the problem is, this library belongs to a third party and I don't have the source code for it. There doesn't seem to be a new version that is not using these classes. So, to work around this issue, I did the following:</p>\n\n<ul>\n<li>Created package <code>sun.misc</code></li>\n<li>Copied both <code>BASE64Encoder</code> and <code>CharacterEncoder</code> classes in this package</li>\n</ul>\n\n<p>But now, I get a compilation error saying <code>The package sun.misc conflicts with a package accessible from another module: jdk.unsupported</code>.</p>\n\n<p>Is there any way to get around this error? If not, can I add a <code>jar</code> to the dependencies that contains these classes? I am just trying to make sure these classes are available to that third party library at runtime (either via my own source code or via a jar that bundles these classes in).</p>\n"}],"has_more":true,"quota_max":10000,"quota_remaining":9921,"page":111,"page_size":100}
