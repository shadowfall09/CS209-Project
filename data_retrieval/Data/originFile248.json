{"items":[{"tags":["java","gradle","jacoco"],"answers":[{"comments":[{"owner":{"account_id":5733229,"reputation":546,"user_id":4528146,"display_name":"Tasos Zervos"},"score":1,"creation_date":1689949810,"post_id":73552241,"comment_id":135289633,"body_markdown":"Getting errors on 8.0.2 with `xml.required = true` (Could not find method required() for arguments [true] on Report xml of type org.gradle.api.reporting.internal.TaskGeneratedSingleFileReport.)","body":"Getting errors on 8.0.2 with <code>xml.required = true</code> (Could not find method required() for arguments [true] on Report xml of type org.gradle.api.reporting.internal.TaskGeneratedSingleFileRep&zwnj;&#8203;ort.)"},{"owner":{"account_id":6464248,"reputation":6030,"user_id":5006866,"display_name":"thokuest"},"score":0,"creation_date":1689955875,"post_id":73552241,"comment_id":135290838,"body_markdown":"@TasosZervos Just tested with Gradle 8.0.2. `xml.required = true` just works fine. Syntax is correct as per [Docs: JaCoCo Report configuration](https://docs.gradle.org/8.0.2/userguide/jacoco_plugin.html#sec:jacoco_report_configuration).","body":"@TasosZervos Just tested with Gradle 8.0.2. <code>xml.required = true</code> just works fine. Syntax is correct as per <a href=\"https://docs.gradle.org/8.0.2/userguide/jacoco_plugin.html#sec:jacoco_report_configuration\" rel=\"nofollow noreferrer\">Docs: JaCoCo Report configuration</a>."},{"owner":{"account_id":5733229,"reputation":546,"user_id":4528146,"display_name":"Tasos Zervos"},"score":0,"creation_date":1690105569,"post_id":73552241,"comment_id":135304261,"body_markdown":"Correction (I couldn&#39;t edit the comment when I&#39;ve noticed) - I am using version 8.2.1.\nI will try again and with 8.0.2 and see if it&#39;s related to this or something else.","body":"Correction (I couldn&#39;t edit the comment when I&#39;ve noticed) - I am using version 8.2.1. I will try again and with 8.0.2 and see if it&#39;s related to this or something else."},{"owner":{"account_id":5733229,"reputation":546,"user_id":4528146,"display_name":"Tasos Zervos"},"score":0,"creation_date":1690211728,"post_id":73552241,"comment_id":135318320,"body_markdown":"It looks like the issue for me was only related to IntelliJ complaining about it.","body":"It looks like the issue for me was only related to IntelliJ complaining about it."}],"tags":[],"owner":{"account_id":6464248,"reputation":6030,"user_id":5006866,"display_name":"thokuest"},"comment_count":4,"down_vote_count":0,"up_vote_count":45,"is_accepted":true,"score":45,"last_activity_date":1692102305,"creation_date":1661930628,"answer_id":73552241,"question_id":73546718,"body_markdown":"`required` is a property, not a method. This should help:\r\n\r\n**Groovy DSL (build.gradle)**\r\n\r\n```gradle\r\njacocoTestReport {\r\n    reports {\r\n        xml.required = false\r\n        csv.required = false\r\n        html.required = true\r\n    }\r\n}\r\n```\r\n\r\n**Kotlin DSL (build.gradle.kts)**\r\n\r\n```kotlin\r\ntasks.jacocoTestReport {\r\n    reports {\r\n        xml.required.set(false)\r\n        csv.required.set(false)\r\n        html.required.set(true)\r\n    }\r\n}\r\n```\r\n\r\nSee: [JaCoCo Report configuration][1]\r\n\r\n\r\n  [1]: https://docs.gradle.org/current/userguide/jacoco_plugin.html#sec:jacoco_report_configuration","title":"Changing enabled to required throws an error in gradle","body":"<p><code>required</code> is a property, not a method. This should help:</p>\n<p><strong>Groovy DSL (build.gradle)</strong></p>\n<pre><code>jacocoTestReport {\n    reports {\n        xml.required = false\n        csv.required = false\n        html.required = true\n    }\n}\n</code></pre>\n<p><strong>Kotlin DSL (build.gradle.kts)</strong></p>\n<pre class=\"lang-kotlin prettyprint-override\"><code>tasks.jacocoTestReport {\n    reports {\n        xml.required.set(false)\n        csv.required.set(false)\n        html.required.set(true)\n    }\n}\n</code></pre>\n<p>See: <a href=\"https://docs.gradle.org/current/userguide/jacoco_plugin.html#sec:jacoco_report_configuration\" rel=\"noreferrer\">JaCoCo Report configuration</a></p>\n"},{"comments":[{"owner":{"account_id":4845455,"reputation":3888,"user_id":3909198,"accept_rate":86,"display_name":"inquisitive"},"score":0,"creation_date":1690942509,"post_id":76738937,"comment_id":135421966,"body_markdown":"is there any difference between required and enabled?","body":"is there any difference between required and enabled?"},{"owner":{"account_id":10037631,"reputation":1115,"user_id":7421645,"display_name":"James"},"score":0,"creation_date":1691015209,"post_id":76738937,"comment_id":135435234,"body_markdown":"enabled doesn&#39;t appear to be available when running in gradle 8.2.1. I just upgraded gradle and `enabled` wasn&#39;t available. this answer works for me.","body":"enabled doesn&#39;t appear to be available when running in gradle 8.2.1. I just upgraded gradle and <code>enabled</code> wasn&#39;t available. this answer works for me."},{"owner":{"account_id":5733229,"reputation":546,"user_id":4528146,"display_name":"Tasos Zervos"},"score":2,"creation_date":1691058985,"post_id":76738937,"comment_id":135441615,"body_markdown":"@inquisitive\nSee: https://docs.gradle.org/7.5/dsl/org.gradle.api.reporting.Report.html#org.gradle.api.reporting.Report:enabled\n\nEnabled has been replaced by required","body":"@inquisitive See: <a href=\"https://docs.gradle.org/7.5/dsl/org.gradle.api.reporting.Report.html#org.gradle.api.reporting.Report:enabled\" rel=\"nofollow noreferrer\">docs.gradle.org/7.5/dsl/&hellip;</a>  Enabled has been replaced by required"},{"owner":{"account_id":3818241,"reputation":4374,"user_id":3167016,"accept_rate":94,"display_name":"TuGordoBello"},"score":0,"creation_date":1692199935,"post_id":76738937,"comment_id":135592123,"body_markdown":"Perfect for gradle 8","body":"Perfect for gradle 8"}],"tags":[],"owner":{"account_id":5733229,"reputation":546,"user_id":4528146,"display_name":"Tasos Zervos"},"comment_count":4,"down_vote_count":0,"up_vote_count":8,"is_accepted":false,"score":8,"last_activity_date":1689950911,"creation_date":1689950210,"answer_id":76738937,"question_id":73546718,"body_markdown":"For gradle 8.2.1 I have found that previous answers also fail.\r\n\r\nThis has worked for me:\r\n```\r\njacocoTestReport {\r\n    reports {\r\n        xml.required.set(false)\r\n        csv.required.set(false)\r\n        html.required.set(true)\r\n    }\r\n}\r\n```","title":"Changing enabled to required throws an error in gradle","body":"<p>For gradle 8.2.1 I have found that previous answers also fail.</p>\n<p>This has worked for me:</p>\n<pre><code>jacocoTestReport {\n    reports {\n        xml.required.set(false)\n        csv.required.set(false)\n        html.required.set(true)\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":2141833,"reputation":5558,"user_id":1900290,"accept_rate":59,"display_name":"Rpj"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":11990,"favorite_count":0,"down_vote_count":1,"up_vote_count":24,"accepted_answer_id":73552241,"answer_count":2,"score":23,"last_activity_date":1692102305,"creation_date":1661882394,"question_id":73546718,"body_markdown":"Changing enabled to required throws an error in gradle 7.5\r\n\r\n    &gt; Configure project :\r\n    The Report.enabled property has been deprecated. This is scheduled to be removed in Gradle 8.0. Please use the required property instead. See https://docs.gradle.org/7.5/dsl/org.gradle.api.reporting.Report.html#org.gradle.api.reporting.Report:enabled for more details.\r\n\r\n     jacocoTestReport {\r\n         reports {\r\n    -        xml.enabled false\r\n    -        csv.enabled false\r\n    -        html.enabled true\r\n    +        xml.required false\r\n    +        csv.required false\r\n    +        html.required true\r\n         }\r\n     }\r\n\r\n    &gt; Could not find method required() for arguments [false] on Report xml of type org.gradle.api.reporting.internal.TaskGeneratedSingleFileReport.\r\n\r\n","title":"Changing enabled to required throws an error in gradle","body":"<p>Changing enabled to required throws an error in gradle 7.5</p>\n<pre><code>&gt; Configure project :\nThe Report.enabled property has been deprecated. This is scheduled to be removed in Gradle 8.0. Please use the required property instead. See https://docs.gradle.org/7.5/dsl/org.gradle.api.reporting.Report.html#org.gradle.api.reporting.Report:enabled for more details.\n\n jacocoTestReport {\n     reports {\n-        xml.enabled false\n-        csv.enabled false\n-        html.enabled true\n+        xml.required false\n+        csv.required false\n+        html.required true\n     }\n }\n\n&gt; Could not find method required() for arguments [false] on Report xml of type org.gradle.api.reporting.internal.TaskGeneratedSingleFileReport.\n</code></pre>\n"},{"tags":["java","karate"],"answers":[{"comments":[{"owner":{"account_id":354814,"reputation":12916,"user_id":693387,"display_name":"Tomasz Stanczak"},"score":1,"creation_date":1692099810,"post_id":76905587,"comment_id":135576092,"body_markdown":"Yey, looks like that&#39;s it - protocol.runner has a &#39;hook&#39; method! Thanks!","body":"Yey, looks like that&#39;s it - protocol.runner has a &#39;hook&#39; method! Thanks!"}],"tags":[],"owner":{"account_id":48302,"reputation":55363,"user_id":143475,"display_name":"Peter Thomas"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1692099124,"creation_date":1692099124,"answer_id":76905587,"question_id":76905518,"body_markdown":"It should be possible, here is the relevant documentation: https://github.com/karatelabs/karate/tree/master/karate-gatling#runner","title":"setting RuntimeHook on karate from scala/gatling side","body":"<p>It should be possible, here is the relevant documentation: <a href=\"https://github.com/karatelabs/karate/tree/master/karate-gatling#runner\" rel=\"nofollow noreferrer\">https://github.com/karatelabs/karate/tree/master/karate-gatling#runner</a></p>\n"}],"owner":{"account_id":354814,"reputation":12916,"user_id":693387,"display_name":"Tomasz Stanczak"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":35,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"accepted_answer_id":76905587,"answer_count":1,"score":0,"last_activity_date":1692102248,"creation_date":1692098535,"question_id":76905518,"body_markdown":"All our karate features being executed as integration tests got a RuntimeHook implementation.\r\nNow I see that they are also called from Scala for performance testing and cannot figure out how to set the same RuntimeHook on them.\r\nIs it possible at all? Did I miss something? \r\n\r\nJava snippet from an integration test:\r\n\r\n       @Karate.Test\r\n       Karate karateFeatureTest() {\r\n            return Karate.run(&quot;classpath:karate/somedir/a.feature&quot;).hook(new KarateHook());\r\n        }\r\n\r\nScala snippet:\r\n\r\n      val myVar: ScenarioBuilder = scenario(&quot;Test scenario&quot;)\r\n        .exec(karateFeature(&quot;classpath:karate/somedir/a.feature&quot;))\r\n\r\nWhile the Karate class has a &#39;hook&#39; method, karateFeature scala method doesn&#39;t have a parameter for a hook.","title":"setting RuntimeHook on karate from scala/gatling side","body":"<p>All our karate features being executed as integration tests got a RuntimeHook implementation.\nNow I see that they are also called from Scala for performance testing and cannot figure out how to set the same RuntimeHook on them.\nIs it possible at all? Did I miss something?</p>\n<p>Java snippet from an integration test:</p>\n<pre><code>   @Karate.Test\n   Karate karateFeatureTest() {\n        return Karate.run(&quot;classpath:karate/somedir/a.feature&quot;).hook(new KarateHook());\n    }\n</code></pre>\n<p>Scala snippet:</p>\n<pre><code>  val myVar: ScenarioBuilder = scenario(&quot;Test scenario&quot;)\n    .exec(karateFeature(&quot;classpath:karate/somedir/a.feature&quot;))\n</code></pre>\n<p>While the Karate class has a 'hook' method, karateFeature scala method doesn't have a parameter for a hook.</p>\n"},{"tags":["java","amazon-dynamodb"],"comments":[{"owner":{"account_id":2053623,"reputation":551,"user_id":1832003,"accept_rate":41,"display_name":"shrewquest"},"score":0,"creation_date":1457948919,"post_id":27500749,"comment_id":59621249,"body_markdown":"I have a similar use case. How do you do the opposite - convert Map&lt;String,AttributeValue&gt; to an Item? I have streams enabled but the DynamoDBKinesisStreamsAdapter returns a Map&lt;String,AttributeValue&gt; ... see http://docs.aws.amazon.com/amazondynamodb/latest/developerguide/Streams.KCLAdapter.Walkthrough.html .. I want to convert the AttributeValue to Object (Item returns a Map&lt;String,Object&gt; on .asMap)","body":"I have a similar use case. How do you do the opposite - convert Map&lt;String,AttributeValue&gt; to an Item? I have streams enabled but the DynamoDBKinesisStreamsAdapter returns a Map&lt;String,AttributeValue&gt; ... see <a href=\"http://docs.aws.amazon.com/amazondynamodb/latest/developerguide/Streams.KCLAdapter.Walkthrough.html\" rel=\"nofollow noreferrer\">docs.aws.amazon.com/amazondynamodb/latest/developerguide/&hellip;</a> .. I want to convert the AttributeValue to Object (Item returns a Map&lt;String,Object&gt; on .asMap)"},{"owner":{"account_id":5264625,"reputation":144,"user_id":4205016,"accept_rate":86,"display_name":"Sailesh Sriram"},"score":0,"creation_date":1493363289,"post_id":27500749,"comment_id":74394115,"body_markdown":"@shrewquest Did you have any luck in finding a solution?","body":"@shrewquest Did you have any luck in finding a solution?"},{"owner":{"account_id":95716,"reputation":6589,"user_id":260516,"accept_rate":63,"display_name":"Jesse Barnum"},"score":1,"creation_date":1519339890,"post_id":27500749,"comment_id":84883978,"body_markdown":"@shrewquest Item.fromMap( InternalUtils.toSimpleMapValue( mapOfAttributes ) )","body":"@shrewquest Item.fromMap( InternalUtils.toSimpleMapValue( mapOfAttributes ) )"}],"answers":[{"comments":[{"owner":{"account_id":3581514,"reputation":1651,"user_id":5651359,"accept_rate":80,"display_name":"boden"},"score":12,"creation_date":1484069431,"post_id":27538483,"comment_id":70354394,"body_markdown":"how I can convert from `Map&lt;String,AttributeValue&gt;` to Object ?","body":"how I can convert from <code>Map&lt;String,AttributeValue&gt;</code> to Object ?"},{"owner":{"account_id":476220,"reputation":894,"user_id":887012,"accept_rate":82,"display_name":"saccharine"},"score":2,"creation_date":1505433037,"post_id":27538483,"comment_id":79423399,"body_markdown":"This is a fantastic find. Thank you.","body":"This is a fantastic find. Thank you."},{"owner":{"account_id":995271,"reputation":5074,"user_id":1080804,"accept_rate":49,"display_name":"ecoe"},"score":1,"creation_date":1522690379,"post_id":27538483,"comment_id":86238391,"body_markdown":"@BohdanKorinnyi The approach taken by @BPm also has a method for converting the `Map&lt;String,AttributeValue&gt;` to `List&lt;Item&gt;`, which would allow you to then have access to the actual primitive types (e.g. like `item.getBoolean(attrName)`). If that fits your use-case, then see: [toItemList](https://github.com/aws/aws-sdk-java/blob/master/aws-java-sdk-dynamodb/src/main/java/com/amazonaws/services/dynamodbv2/document/internal/InternalUtils.java#L49)","body":"@BohdanKorinnyi The approach taken by @BPm also has a method for converting the <code>Map&lt;String,AttributeValue&gt;</code> to <code>List&lt;Item&gt;</code>, which would allow you to then have access to the actual primitive types (e.g. like <code>item.getBoolean(attrName)</code>). If that fits your use-case, then see: <a href=\"https://github.com/aws/aws-sdk-java/blob/master/aws-java-sdk-dynamodb/src/main/java/com/amazonaws/services/dynamodbv2/document/internal/InternalUtils.java#L49\" rel=\"nofollow noreferrer\">toItemList</a>"},{"owner":{"account_id":321223,"reputation":1357,"user_id":639919,"display_name":"mmindenhall"},"score":2,"creation_date":1554798414,"post_id":27538483,"comment_id":97873507,"body_markdown":"The `InternalUtils` class is deprecated (use [ItemUtils](https://docs.aws.amazon.com/AWSJavaSDK/latest/javadoc/com/amazonaws/services/dynamodbv2/document/ItemUtils.html) instead).","body":"The <code>InternalUtils</code> class is deprecated (use <a href=\"https://docs.aws.amazon.com/AWSJavaSDK/latest/javadoc/com/amazonaws/services/dynamodbv2/document/ItemUtils.html\" rel=\"nofollow noreferrer\">ItemUtils</a> instead)."},{"owner":{"account_id":1982406,"reputation":198,"user_id":1778675,"accept_rate":88,"display_name":"GP cyborg"},"score":1,"creation_date":1561588395,"post_id":27538483,"comment_id":100118317,"body_markdown":"This method doesn&#39;t work if the source Object has a ByteBuffer field.\n\nJson converts it into struct and AttributeValue considers it to be a Map.","body":"This method doesn&#39;t work if the source Object has a ByteBuffer field.  Json converts it into struct and AttributeValue considers it to be a Map."},{"owner":{"account_id":5227890,"reputation":301,"user_id":6768865,"display_name":"Batman"},"score":0,"creation_date":1654285499,"post_id":27538483,"comment_id":128063033,"body_markdown":"@GPcyborg yes. How can use overcome when we have ByteBuffer fields ?","body":"@GPcyborg yes. How can use overcome when we have ByteBuffer fields ?"}],"tags":[],"owner":{"account_id":908939,"reputation":2924,"user_id":949806,"accept_rate":82,"display_name":"BPm"},"comment_count":6,"down_vote_count":0,"up_vote_count":45,"is_accepted":true,"score":45,"last_activity_date":1418871007,"creation_date":1418871007,"answer_id":27538483,"question_id":27500749,"body_markdown":"Finally figured out by looking at how [AWS parses the JSON][1]\r\n\r\nBasically, this is the code:\r\n\r\n        Item item = new Item().withJSON(&quot;document&quot;, jsonStr);\r\n\t\tMap&lt;String,AttributeValue&gt; attributes = InternalUtils.toAttributeValues(item);\r\n\t\treturn attributes.get(&quot;document&quot;).getM();\r\n\r\n\r\nVery neat.\r\n\r\n\r\n  [1]: https://github.com/aws/aws-sdk-java/blob/c19606a6a5bfcc0e8cc7d33dde5e4f20425ca33e/aws-java-sdk-dynamodb/src/main/java/com/amazonaws/services/dynamodbv2/document/Item.java#L908","title":"DynamoDB - Object to AttributeValue","body":"<p>Finally figured out by looking at how <a href=\"https://github.com/aws/aws-sdk-java/blob/c19606a6a5bfcc0e8cc7d33dde5e4f20425ca33e/aws-java-sdk-dynamodb/src/main/java/com/amazonaws/services/dynamodbv2/document/Item.java#L908\">AWS parses the JSON</a></p>\n\n<p>Basically, this is the code:</p>\n\n<pre><code>    Item item = new Item().withJSON(\"document\", jsonStr);\n    Map&lt;String,AttributeValue&gt; attributes = InternalUtils.toAttributeValues(item);\n    return attributes.get(\"document\").getM();\n</code></pre>\n\n<p>Very neat.</p>\n"},{"comments":[{"owner":{"account_id":14323979,"reputation":2032,"user_id":10346580,"display_name":"Sunny Goel"},"score":0,"creation_date":1681246422,"post_id":45525372,"comment_id":134025131,"body_markdown":"this code only convert values which is of string type not other types like numbers etc.","body":"this code only convert values which is of string type not other types like numbers etc."},{"owner":{"account_id":14323979,"reputation":2032,"user_id":10346580,"display_name":"Sunny Goel"},"score":0,"creation_date":1681246454,"post_id":45525372,"comment_id":134025135,"body_markdown":"can you update your code to work for all types values ?","body":"can you update your code to work for all types values ?"}],"tags":[],"owner":{"account_id":11206844,"reputation":115,"user_id":8222199,"display_name":"Harsh"},"comment_count":2,"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1501959131,"creation_date":1501959131,"answer_id":45525372,"question_id":27500749,"body_markdown":"Following is a simple solution which can be applied to convert any DynamoDB Json to Simple JSON.\r\n\r\n    //passing the reponse.getItems() \r\n\tpublic static Object getJson(List&lt;Map&lt;String,AttributeValue&gt;&gt; mapList) {\r\n\t\tList&lt;Object&gt; finalJson= new ArrayList();\r\n\t\tfor(Map&lt;String,AttributeValue&gt; eachEntry : mapList) {\r\n\t\t\tfinalJson.add(mapToJson(eachEntry));\r\n\t\t}\r\n\t\treturn finalJson;\r\n\t}\r\n\t\r\n\t\r\n\t//if the map is null then it add the key and value(string) in the finalKeyValueMap\r\n\tpublic static Map&lt;String,Object&gt; mapToJson(Map&lt;String,AttributeValue&gt; keyValueMap){\r\n\t\tMap&lt;String,Object&gt; finalKeyValueMap = new HashMap();\r\n\t\tfor(Map.Entry&lt;String, AttributeValue&gt; entry : keyValueMap.entrySet()) \r\n\t\t{\r\n\t\t\tif(entry.getValue().getM() == null) {\r\n\t\t\t\tfinalKeyValueMap.put(entry.getKey(),entry.getValue().getS());\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tfinalKeyValueMap.put(entry.getKey(),mapToJson(entry.getValue().getM()));\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn finalKeyValueMap;\r\n\t}\r\n\r\nThis will produce your desired Json in the form of `List&lt;Map&lt;String,Object&gt;&gt;` which is subset of the `object`. \r\n\r\n","title":"DynamoDB - Object to AttributeValue","body":"<p>Following is a simple solution which can be applied to convert any DynamoDB Json to Simple JSON.</p>\n\n<pre><code>//passing the reponse.getItems() \npublic static Object getJson(List&lt;Map&lt;String,AttributeValue&gt;&gt; mapList) {\n    List&lt;Object&gt; finalJson= new ArrayList();\n    for(Map&lt;String,AttributeValue&gt; eachEntry : mapList) {\n        finalJson.add(mapToJson(eachEntry));\n    }\n    return finalJson;\n}\n\n\n//if the map is null then it add the key and value(string) in the finalKeyValueMap\npublic static Map&lt;String,Object&gt; mapToJson(Map&lt;String,AttributeValue&gt; keyValueMap){\n    Map&lt;String,Object&gt; finalKeyValueMap = new HashMap();\n    for(Map.Entry&lt;String, AttributeValue&gt; entry : keyValueMap.entrySet()) \n    {\n        if(entry.getValue().getM() == null) {\n            finalKeyValueMap.put(entry.getKey(),entry.getValue().getS());\n        }\n        else {\n            finalKeyValueMap.put(entry.getKey(),mapToJson(entry.getValue().getM()));\n        }\n    }\n    return finalKeyValueMap;\n}\n</code></pre>\n\n<p>This will produce your desired Json in the form of <code>List&lt;Map&lt;String,Object&gt;&gt;</code> which is subset of the <code>object</code>. </p>\n"},{"tags":[],"owner":{"account_id":3373147,"reputation":1276,"user_id":2831921,"accept_rate":63,"display_name":"Jay Patel"},"comment_count":0,"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1531514914,"creation_date":1531514914,"answer_id":51332616,"question_id":27500749,"body_markdown":"I used [JacksonConverterImpl][1] to convert ```JsonNode``` to ```Map&lt;String, AttributeValue&gt;```\r\n\r\n    ObjectMapper objectMapper = new ObjectMapper();\r\n    JsonNode jsonNode = objectMapper.readValue(jsonString, JsonNode.class);\r\n    final JacksonConverter converter = new JacksonConverterImpl();\r\n    Map&lt;String, AttributeValue&gt; map = converter.jsonObjectToMap(jsonNode);\r\n\r\nHope this helps!\r\n\r\nThanks,\r\nJay\r\n\r\n\r\n  [1]: https://github.com/aws-samples/aws-dynamodb-mars-json-demo/blob/master/ingester/src/main/java/com/amazonaws/services/dynamodbv2/json/converter/impl/JacksonConverterImpl.java","title":"DynamoDB - Object to AttributeValue","body":"<p>I used <a href=\"https://github.com/aws-samples/aws-dynamodb-mars-json-demo/blob/master/ingester/src/main/java/com/amazonaws/services/dynamodbv2/json/converter/impl/JacksonConverterImpl.java\" rel=\"noreferrer\">JacksonConverterImpl</a> to convert <code>JsonNode</code> to <code>Map&lt;String, AttributeValue&gt;</code></p>\n\n<pre><code>ObjectMapper objectMapper = new ObjectMapper();\nJsonNode jsonNode = objectMapper.readValue(jsonString, JsonNode.class);\nfinal JacksonConverter converter = new JacksonConverterImpl();\nMap&lt;String, AttributeValue&gt; map = converter.jsonObjectToMap(jsonNode);\n</code></pre>\n\n<p>Hope this helps!</p>\n\n<p>Thanks,\nJay</p>\n"},{"comments":[{"owner":{"account_id":154180,"reputation":7191,"user_id":369930,"accept_rate":91,"display_name":"markdsievers"},"score":2,"creation_date":1674611007,"post_id":74192341,"comment_id":132750187,"body_markdown":"Its absolutely insane there is not an equivalent for the 2.x SDK.","body":"Its absolutely insane there is not an equivalent for the 2.x SDK."}],"tags":[],"owner":{"account_id":47296,"reputation":27247,"user_id":140037,"accept_rate":74,"display_name":"Brett Ryan"},"comment_count":1,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1666719873,"creation_date":1666692279,"answer_id":74192341,"question_id":27500749,"body_markdown":"With the 2.x SDK, I have not yet identified an equivalent provided by the SDK. As an exercise I decided to solve this with switch expressions\r\n\r\nThis implementation will marshal maps, records, primitives, byte arrays, collection types and will call `toString()` on unknown types. The only datatype I did not implement was a byte set (BS) as it&#39;s not as trivial to determine unique byte array values.\r\n\r\nYou could add support for bean properties, but I figured it would be error prone and decided to just support `toString` in default.\r\n\r\nHave included `unmarshal` as an exercise also.\r\n\r\n\r\n```java\r\nimport java.lang.reflect.InvocationTargetException;\r\nimport java.util.Arrays;\r\nimport java.util.Collection;\r\nimport java.util.HashMap;\r\nimport java.util.Map;\r\nimport java.util.Map.Entry;\r\nimport java.util.Optional;\r\nimport java.util.Set;\r\nimport java.util.regex.Pattern;\r\n\r\nimport software.amazon.awssdk.core.SdkBytes;\r\nimport software.amazon.awssdk.services.dynamodb.model.AttributeValue;\r\n\r\nimport static java.util.stream.Collectors.toList;\r\nimport static java.util.stream.Collectors.toMap;\r\nimport static java.util.stream.Collectors.toSet;\r\n\r\n\r\npublic class AttributeValueConverter {\r\n\r\n    public static AttributeValue fromCollection(Collection&lt;? extends Object&gt; c) {\r\n        if (c instanceof Set s &amp;&amp; s.stream().allMatch(n -&gt; n instanceof String)) {\r\n            var vals = c.stream()\r\n                .map(n -&gt; (String) n)\r\n                .collect(toList());\r\n            return AttributeValue.fromSs(vals);\r\n        }\r\n        var vals = c.stream()\r\n            .map(x -&gt; marshal(x))\r\n            .collect(toList());\r\n        return AttributeValue.fromL(vals);\r\n    }\r\n\r\n    public static AttributeValue fromMap(Map&lt;? extends Object, ? extends Object&gt; m) {\r\n        var vals = new HashMap&lt;String, AttributeValue&gt;();\r\n        m.forEach((k, v) -&gt;\r\n            vals.put(k.toString(), marshal(v))\r\n        );\r\n        return AttributeValue.fromM(vals);\r\n    }\r\n\r\n    public static AttributeValue fromRecord(Record r) {\r\n        var vals = new HashMap&lt;String, AttributeValue&gt;();\r\n        var components = r.getClass().getRecordComponents();\r\n        for (var component : components) {\r\n            try {\r\n                vals.put(\r\n                    component.getName(),\r\n                    marshal(component.getAccessor().invoke(r))\r\n                );\r\n            } catch (IllegalAccessException | InvocationTargetException ex) {\r\n                // will happen if the class is not accessible\r\n            }\r\n        }\r\n        return AttributeValue.fromM(vals);\r\n    }\r\n\r\n    public static AttributeValue marshal(Object obj) {\r\n        return switch (obj) {\r\n            case null           -&gt; AttributeValue.fromNul(true);\r\n            case Optional opt   -&gt; opt.isPresent()\r\n                                   ? marshal(opt.get())\r\n                                   : AttributeValue.fromNul(true);\r\n            case Boolean b      -&gt; AttributeValue.fromBool(b);\r\n            case Number n       -&gt; AttributeValue.fromN(n.toString());\r\n            case String s       -&gt; AttributeValue.fromS(s);\r\n            // string representations of temporals are mostly what you want\r\n            //case Temporal t     -&gt; AttributeValue.fromS(t.toString());\r\n            case Collection c   -&gt; fromCollection(c);\r\n            case Map m          -&gt; fromMap(m);\r\n            case Record r       -&gt; fromRecord(r);\r\n            case Object o when o.getClass().isArray() -&gt; {\r\n                var ctype = obj.getClass().getComponentType().getTypeName();\r\n                if (&quot;byte&quot;.equals(ctype)) {\r\n                    yield AttributeValue.fromB(\r\n                        SdkBytes.fromByteArray((byte[]) obj)\r\n                    );\r\n                }\r\n                yield fromCollection(Arrays.asList((Object[]) obj));\r\n            }\r\n            default -&gt; AttributeValue.fromS(obj.toString());\r\n        };\r\n    }\r\n\r\n    private static final Pattern INT_PATTERN = Pattern.compile(&quot;^-?[0-9]+$&quot;);\r\n\r\n    private static Number parseNumber(String n) {\r\n        if (INT_PATTERN.matcher(n).matches()) {\r\n            if (n.length() &lt; 10) {\r\n                return Integer.valueOf(n);\r\n            }\r\n            return Long.valueOf(n);\r\n        }\r\n        return Double.valueOf(n);\r\n    }\r\n\r\n    public static Object unmarshal(AttributeValue av) {\r\n        return switch (av.type()) {\r\n            case B      -&gt; av.b().asByteArray();\r\n            case BOOL   -&gt; av.bool();\r\n            case BS     -&gt; av.bs().stream()\r\n                            .map(SdkBytes::asByteArray)\r\n                            .collect(toList());\r\n            case L      -&gt; av.l().stream()\r\n                            .map(AttributeValueConverter::unmarshal)\r\n                            .collect(toList());\r\n            case M      -&gt; av.m().entrySet().stream()\r\n                            .collect(toMap(\r\n                                Entry::getKey,\r\n                                n -&gt; Optional.ofNullable(unmarshal(n.getValue()))\r\n                            ));\r\n            case N      -&gt; parseNumber(av.n());\r\n            case NS     -&gt; av.ns().stream()\r\n                            .map(AttributeValueConverter::parseNumber)\r\n                            .collect(toSet());\r\n            case NUL    -&gt; null;\r\n            case S      -&gt; av.s();\r\n            case SS     -&gt; Set.copyOf(av.ss());\r\n            case UNKNOWN_TO_SDK_VERSION -&gt;\r\n                throw new UnsupportedOperationException(&quot;Type not supported&quot;);\r\n        };\r\n    }\r\n\r\n}\r\n```\r\n","title":"DynamoDB - Object to AttributeValue","body":"<p>With the 2.x SDK, I have not yet identified an equivalent provided by the SDK. As an exercise I decided to solve this with switch expressions</p>\n<p>This implementation will marshal maps, records, primitives, byte arrays, collection types and will call <code>toString()</code> on unknown types. The only datatype I did not implement was a byte set (BS) as it's not as trivial to determine unique byte array values.</p>\n<p>You could add support for bean properties, but I figured it would be error prone and decided to just support <code>toString</code> in default.</p>\n<p>Have included <code>unmarshal</code> as an exercise also.</p>\n<pre class=\"lang-java prettyprint-override\"><code>import java.lang.reflect.InvocationTargetException;\nimport java.util.Arrays;\nimport java.util.Collection;\nimport java.util.HashMap;\nimport java.util.Map;\nimport java.util.Map.Entry;\nimport java.util.Optional;\nimport java.util.Set;\nimport java.util.regex.Pattern;\n\nimport software.amazon.awssdk.core.SdkBytes;\nimport software.amazon.awssdk.services.dynamodb.model.AttributeValue;\n\nimport static java.util.stream.Collectors.toList;\nimport static java.util.stream.Collectors.toMap;\nimport static java.util.stream.Collectors.toSet;\n\n\npublic class AttributeValueConverter {\n\n    public static AttributeValue fromCollection(Collection&lt;? extends Object&gt; c) {\n        if (c instanceof Set s &amp;&amp; s.stream().allMatch(n -&gt; n instanceof String)) {\n            var vals = c.stream()\n                .map(n -&gt; (String) n)\n                .collect(toList());\n            return AttributeValue.fromSs(vals);\n        }\n        var vals = c.stream()\n            .map(x -&gt; marshal(x))\n            .collect(toList());\n        return AttributeValue.fromL(vals);\n    }\n\n    public static AttributeValue fromMap(Map&lt;? extends Object, ? extends Object&gt; m) {\n        var vals = new HashMap&lt;String, AttributeValue&gt;();\n        m.forEach((k, v) -&gt;\n            vals.put(k.toString(), marshal(v))\n        );\n        return AttributeValue.fromM(vals);\n    }\n\n    public static AttributeValue fromRecord(Record r) {\n        var vals = new HashMap&lt;String, AttributeValue&gt;();\n        var components = r.getClass().getRecordComponents();\n        for (var component : components) {\n            try {\n                vals.put(\n                    component.getName(),\n                    marshal(component.getAccessor().invoke(r))\n                );\n            } catch (IllegalAccessException | InvocationTargetException ex) {\n                // will happen if the class is not accessible\n            }\n        }\n        return AttributeValue.fromM(vals);\n    }\n\n    public static AttributeValue marshal(Object obj) {\n        return switch (obj) {\n            case null           -&gt; AttributeValue.fromNul(true);\n            case Optional opt   -&gt; opt.isPresent()\n                                   ? marshal(opt.get())\n                                   : AttributeValue.fromNul(true);\n            case Boolean b      -&gt; AttributeValue.fromBool(b);\n            case Number n       -&gt; AttributeValue.fromN(n.toString());\n            case String s       -&gt; AttributeValue.fromS(s);\n            // string representations of temporals are mostly what you want\n            //case Temporal t     -&gt; AttributeValue.fromS(t.toString());\n            case Collection c   -&gt; fromCollection(c);\n            case Map m          -&gt; fromMap(m);\n            case Record r       -&gt; fromRecord(r);\n            case Object o when o.getClass().isArray() -&gt; {\n                var ctype = obj.getClass().getComponentType().getTypeName();\n                if (&quot;byte&quot;.equals(ctype)) {\n                    yield AttributeValue.fromB(\n                        SdkBytes.fromByteArray((byte[]) obj)\n                    );\n                }\n                yield fromCollection(Arrays.asList((Object[]) obj));\n            }\n            default -&gt; AttributeValue.fromS(obj.toString());\n        };\n    }\n\n    private static final Pattern INT_PATTERN = Pattern.compile(&quot;^-?[0-9]+$&quot;);\n\n    private static Number parseNumber(String n) {\n        if (INT_PATTERN.matcher(n).matches()) {\n            if (n.length() &lt; 10) {\n                return Integer.valueOf(n);\n            }\n            return Long.valueOf(n);\n        }\n        return Double.valueOf(n);\n    }\n\n    public static Object unmarshal(AttributeValue av) {\n        return switch (av.type()) {\n            case B      -&gt; av.b().asByteArray();\n            case BOOL   -&gt; av.bool();\n            case BS     -&gt; av.bs().stream()\n                            .map(SdkBytes::asByteArray)\n                            .collect(toList());\n            case L      -&gt; av.l().stream()\n                            .map(AttributeValueConverter::unmarshal)\n                            .collect(toList());\n            case M      -&gt; av.m().entrySet().stream()\n                            .collect(toMap(\n                                Entry::getKey,\n                                n -&gt; Optional.ofNullable(unmarshal(n.getValue()))\n                            ));\n            case N      -&gt; parseNumber(av.n());\n            case NS     -&gt; av.ns().stream()\n                            .map(AttributeValueConverter::parseNumber)\n                            .collect(toSet());\n            case NUL    -&gt; null;\n            case S      -&gt; av.s();\n            case SS     -&gt; Set.copyOf(av.ss());\n            case UNKNOWN_TO_SDK_VERSION -&gt;\n                throw new UnsupportedOperationException(&quot;Type not supported&quot;);\n        };\n    }\n\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3847134,"reputation":1,"user_id":3188296,"display_name":"ghabersetzer"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1687894251,"creation_date":1687894251,"answer_id":76568056,"question_id":27500749,"body_markdown":"For the 2.x SDK, use `DynamoDBEnhancedClient`.\r\n\r\n```\r\nDynamoDbClient ddb = DynamoDbClient.builder()\r\n                .region(region)\r\n                .credentialsProvider(credentialsProvider)\r\nDynamoDbEnhancedClient enhancedClient = DynamoDbEnhancedClient.builder()\r\n     .dynamoDbClient(ddb)\r\n     .build();\r\nDynamoDbTable&lt;Customer&gt; custTable = enhancedClient.table(&quot;Customer&quot;, TableSchema.fromBean(Customer.class));\r\nCustomer record = new Customer();\r\n            record.setCustName(&quot;Fred Pink&quot;);\r\n            record.setId(&quot;id110&quot;);\r\n            record.setEmail(&quot;fredp@noserver.com&quot;);\r\n// Put the customer data into an Amazon DynamoDB table.\r\ncustTable.putItem(record);\r\n\r\n```\r\n\r\nHere is a full example: \r\nhttps://github.com/awsdocs/aws-doc-sdk-examples/blob/main/javav2/example_code/dynamodb/src/main/java/com/example/dynamodb/enhanced/EnhancedPutItem.java","title":"DynamoDB - Object to AttributeValue","body":"<p>For the 2.x SDK, use <code>DynamoDBEnhancedClient</code>.</p>\n<pre><code>DynamoDbClient ddb = DynamoDbClient.builder()\n                .region(region)\n                .credentialsProvider(credentialsProvider)\nDynamoDbEnhancedClient enhancedClient = DynamoDbEnhancedClient.builder()\n     .dynamoDbClient(ddb)\n     .build();\nDynamoDbTable&lt;Customer&gt; custTable = enhancedClient.table(&quot;Customer&quot;, TableSchema.fromBean(Customer.class));\nCustomer record = new Customer();\n            record.setCustName(&quot;Fred Pink&quot;);\n            record.setId(&quot;id110&quot;);\n            record.setEmail(&quot;fredp@noserver.com&quot;);\n// Put the customer data into an Amazon DynamoDB table.\ncustTable.putItem(record);\n\n</code></pre>\n<p>Here is a full example:\n<a href=\"https://github.com/awsdocs/aws-doc-sdk-examples/blob/main/javav2/example_code/dynamodb/src/main/java/com/example/dynamodb/enhanced/EnhancedPutItem.java\" rel=\"nofollow noreferrer\">https://github.com/awsdocs/aws-doc-sdk-examples/blob/main/javav2/example_code/dynamodb/src/main/java/com/example/dynamodb/enhanced/EnhancedPutItem.java</a></p>\n"},{"tags":[],"owner":{"account_id":3925758,"reputation":396,"user_id":3246308,"accept_rate":25,"display_name":"Jeff I"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1692102158,"creation_date":1692102158,"answer_id":76905949,"question_id":27500749,"body_markdown":"If you have an annotated bean (@DynamoDbBean) and just want to convert a POJO, I found this:\r\n\r\nM bean = ....;\r\nTableSchema&lt;M&gt; tableSchema = (TableSchema&lt;M&gt;)TableSchema.fromClass(bean.getClass());\r\nMap&lt;String, software.amazon.awssdk.services.dynamodb.model.AttributeValue&gt; itemMap = tableSchema.itemToMap(bean, true);","title":"DynamoDB - Object to AttributeValue","body":"<p>If you have an annotated bean (@DynamoDbBean) and just want to convert a POJO, I found this:</p>\n<p>M bean = ....;\nTableSchema tableSchema = (TableSchema)TableSchema.fromClass(bean.getClass());\nMap&lt;String, software.amazon.awssdk.services.dynamodb.model.AttributeValue&gt; itemMap = tableSchema.itemToMap(bean, true);</p>\n"}],"owner":{"account_id":908939,"reputation":2924,"user_id":949806,"accept_rate":82,"display_name":"BPm"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":38088,"favorite_count":0,"down_vote_count":0,"up_vote_count":13,"accepted_answer_id":27538483,"answer_count":6,"score":13,"last_activity_date":1692102158,"creation_date":1418720014,"question_id":27500749,"body_markdown":"I&#39;m aware of DynamoDBMapper but in my case I can&#39;t use it because I don&#39;t know all the attributes beforehand.\r\n\r\nI have a JSON and it&#39;s parsed to a map of objects by using `Jackson` parser:\r\n\r\n    Map&lt;String, Object&gt; userData = mapper.readValue(new File(&quot;user.json&quot;), Map.class);\r\n\r\nLooping through each attribute, how can I convert the value to `AttributeValue` given that DynamoDB `AttributeValue` supports Boolean, String, Number, Bytes, List, etc.\r\n\r\nIs there an efficient way to do this? Is there a library for this already? My naive approach is to check if each value is of type Boolean/String/Number/etc. and then call the appropriate `AttributeValue` method, e.g: `new AttributeValue().withN(value.toString())` - which gives me long lines of `if, else if`","title":"DynamoDB - Object to AttributeValue","body":"<p>I'm aware of DynamoDBMapper but in my case I can't use it because I don't know all the attributes beforehand.</p>\n\n<p>I have a JSON and it's parsed to a map of objects by using <code>Jackson</code> parser:</p>\n\n<pre><code>Map&lt;String, Object&gt; userData = mapper.readValue(new File(\"user.json\"), Map.class);\n</code></pre>\n\n<p>Looping through each attribute, how can I convert the value to <code>AttributeValue</code> given that DynamoDB <code>AttributeValue</code> supports Boolean, String, Number, Bytes, List, etc.</p>\n\n<p>Is there an efficient way to do this? Is there a library for this already? My naive approach is to check if each value is of type Boolean/String/Number/etc. and then call the appropriate <code>AttributeValue</code> method, e.g: <code>new AttributeValue().withN(value.toString())</code> - which gives me long lines of <code>if, else if</code></p>\n"},{"tags":["java","hibernate","swing","jpa"],"answers":[{"tags":[],"owner":{"account_id":17228781,"reputation":3548,"user_id":12473843,"display_name":"Sergey Tsypanov"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1692101610,"creation_date":1692101610,"answer_id":76905884,"question_id":76903760,"body_markdown":"Which version of Hibernate do you use? In modern versions (5+) you don&#39;t need to enlist entities anywhere, especially when using Spring Data JPA.\r\n\r\nAlternatively, you can specify package to scan for Hibernate&#39;s `Sessionfactory`. See e.g. https://stackoverflow.com/a/11257714/12473843 or https://stackoverflow.com/a/16088340/12473843","title":"Should we repeatedly use the mapping class to hibernate.cfg.xml?","body":"<p>Which version of Hibernate do you use? In modern versions (5+) you don't need to enlist entities anywhere, especially when using Spring Data JPA.</p>\n<p>Alternatively, you can specify package to scan for Hibernate's <code>Sessionfactory</code>. See e.g. <a href=\"https://stackoverflow.com/a/11257714/12473843\">https://stackoverflow.com/a/11257714/12473843</a> or <a href=\"https://stackoverflow.com/a/16088340/12473843\">https://stackoverflow.com/a/16088340/12473843</a></p>\n"}],"owner":{"account_id":4279712,"reputation":11,"user_id":3499494,"display_name":"asif"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":29,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1692101759,"creation_date":1692080495,"question_id":76903760,"body_markdown":"I&#39;m working on a Java project using Hibernate for database interactions. I have multiple entity classes annotated with `@Entity` and mapped to corresponding database tables. In my `hibernate.cfg.xml` configuration file, I&#39;m using the `&lt;mapping class=&quot;com.example.model.User&quot;/&gt;` tag to specify each entity class.\r\n\r\nMy question is whether I need to include this &lt;mapping&gt; entry for every entity class in the project or if there&#39;s a more efficient way to configure Hibernate to automatically detect and map all annotated entity classes without explicitly listing them in the `hibernate.cfg.xml` file.\r\n\r\nCould someone clarify the recommended approach and whether it&#39;s necessary to repeatedly list each entity class in the `hibernate.cfg.xml` file? If there&#39;s a more streamlined way to handle this, I&#39;d appreciate any guidance or examples. Thanks!\r\n\r\nI&#39;ve seen some examples where only the base package name is specified, and Hibernate scans and maps all entity classes within that package. However, I&#39;m unsure about the best approach and whether this can lead to potential issues in larger projects.\r\n\r\nMy hibernate.cfg.xml file:\r\n```xml\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\r\n&lt;!DOCTYPE hibernate-configuration PUBLIC\r\n        &quot;-//Hibernate/Hibernate Configuration DTD 3.0//EN&quot;\r\n        &quot;http://www.hibernate.org/dtd/hibernate-configuration-3.0.dtd&quot;&gt;\r\n&lt;hibernate-configuration&gt;\r\n    &lt;session-factory&gt;\r\n        &lt;property name=&quot;hibernate.dialect&quot;&gt;org.hibernate.community.dialect.SQLiteDialect&lt;/property&gt;\r\n        &lt;property name=&quot;hibernate.connection.driver_class&quot;&gt;org.sqlite.JDBC&lt;/property&gt;\r\n        &lt;property name=&quot;hibernate.connection.url&quot;&gt;jdbc:sqlite:fuelvalley.sqlite&lt;/property&gt;\r\n        &lt;property name=&quot;hibernate.hbm2ddl.auto&quot;&gt;update&lt;/property&gt;\r\n        &lt;property name=&quot;hibernate.show_sql&quot;&gt;true&lt;/property&gt;\r\n        &lt;property name=&quot;hibernate.use_sql_comments&quot;&gt;true&lt;/property&gt;\r\n        &lt;mapping class=&quot;com.example.erp.models.Users&quot;/&gt;\r\n    &lt;/session-factory&gt;\r\n&lt;/hibernate-configuration&gt;\r\n```","title":"Should we repeatedly use the mapping class to hibernate.cfg.xml?","body":"<p>I'm working on a Java project using Hibernate for database interactions. I have multiple entity classes annotated with <code>@Entity</code> and mapped to corresponding database tables. In my <code>hibernate.cfg.xml</code> configuration file, I'm using the <code>&lt;mapping class=&quot;com.example.model.User&quot;/&gt;</code> tag to specify each entity class.</p>\n<p>My question is whether I need to include this  entry for every entity class in the project or if there's a more efficient way to configure Hibernate to automatically detect and map all annotated entity classes without explicitly listing them in the <code>hibernate.cfg.xml</code> file.</p>\n<p>Could someone clarify the recommended approach and whether it's necessary to repeatedly list each entity class in the <code>hibernate.cfg.xml</code> file? If there's a more streamlined way to handle this, I'd appreciate any guidance or examples. Thanks!</p>\n<p>I've seen some examples where only the base package name is specified, and Hibernate scans and maps all entity classes within that package. However, I'm unsure about the best approach and whether this can lead to potential issues in larger projects.</p>\n<p>My hibernate.cfg.xml file:</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\n&lt;!DOCTYPE hibernate-configuration PUBLIC\n        &quot;-//Hibernate/Hibernate Configuration DTD 3.0//EN&quot;\n        &quot;http://www.hibernate.org/dtd/hibernate-configuration-3.0.dtd&quot;&gt;\n&lt;hibernate-configuration&gt;\n    &lt;session-factory&gt;\n        &lt;property name=&quot;hibernate.dialect&quot;&gt;org.hibernate.community.dialect.SQLiteDialect&lt;/property&gt;\n        &lt;property name=&quot;hibernate.connection.driver_class&quot;&gt;org.sqlite.JDBC&lt;/property&gt;\n        &lt;property name=&quot;hibernate.connection.url&quot;&gt;jdbc:sqlite:fuelvalley.sqlite&lt;/property&gt;\n        &lt;property name=&quot;hibernate.hbm2ddl.auto&quot;&gt;update&lt;/property&gt;\n        &lt;property name=&quot;hibernate.show_sql&quot;&gt;true&lt;/property&gt;\n        &lt;property name=&quot;hibernate.use_sql_comments&quot;&gt;true&lt;/property&gt;\n        &lt;mapping class=&quot;com.example.erp.models.Users&quot;/&gt;\n    &lt;/session-factory&gt;\n&lt;/hibernate-configuration&gt;\n</code></pre>\n"},{"tags":["java","web","javabeans","java-ee-7","java-ee-8"],"owner":{"account_id":27116540,"reputation":1,"user_id":20660794,"display_name":"Vsevolod Kasatchikov"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":45,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1692101741,"creation_date":1692101741,"question_id":76905902,"body_markdown":"I created the configuration of OpenWebBeans as indicated in the video tutorial, but for some reason I get a NoSuchElementException exception. Why can&#39;t I find Bean&#39;s name? How to fix it?\r\n\r\n[project structure][1]\r\n\r\n```java\r\npublic class MyTag2{\r\n    public static void main(String[] args) {\r\n        ContainerLifecycle lifecycle = WebBeansContext\r\n                .currentInstance().getService(ContainerLifecycle.class);\r\n        lifecycle.startApplication(null);\r\n\r\n        BeanManager beanManager = lifecycle.getBeanManager();\r\n        Bean&lt;?&gt; bean = beanManager.getBeans(&quot;myBean&quot;).iterator().next();\r\n\r\n        MyBean myBean = (MyBean) lifecycle.getBeanManager()\r\n                .getReference(bean, MyBean.class, beanManager.createCreationalContext(bean));\r\n        myBean.print();\r\n\r\n        lifecycle.stopApplication(null);\r\n    }\r\n}\r\n\r\n\r\n@Model\r\n@Named(&quot;myBean&quot;)\r\nclass MyBean {\r\n    public void print() {\r\n        System.out.println(&quot;hello&quot;);\r\n    }\r\n}\r\n\r\n```\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/wFR8X.png","title":"OpenWebBeans throws NoSuchElementException java ee","body":"<p>I created the configuration of OpenWebBeans as indicated in the video tutorial, but for some reason I get a NoSuchElementException exception. Why can't I find Bean's name? How to fix it?</p>\n<p><a href=\"https://i.stack.imgur.com/wFR8X.png\" rel=\"nofollow noreferrer\">project structure</a></p>\n<pre class=\"lang-java prettyprint-override\"><code>public class MyTag2{\n    public static void main(String[] args) {\n        ContainerLifecycle lifecycle = WebBeansContext\n                .currentInstance().getService(ContainerLifecycle.class);\n        lifecycle.startApplication(null);\n\n        BeanManager beanManager = lifecycle.getBeanManager();\n        Bean&lt;?&gt; bean = beanManager.getBeans(&quot;myBean&quot;).iterator().next();\n\n        MyBean myBean = (MyBean) lifecycle.getBeanManager()\n                .getReference(bean, MyBean.class, beanManager.createCreationalContext(bean));\n        myBean.print();\n\n        lifecycle.stopApplication(null);\n    }\n}\n\n\n@Model\n@Named(&quot;myBean&quot;)\nclass MyBean {\n    public void print() {\n        System.out.println(&quot;hello&quot;);\n    }\n}\n\n</code></pre>\n"},{"tags":["java","log4j","log4j2"],"answers":[{"tags":[],"owner":{"account_id":5238779,"reputation":115,"user_id":4186539,"accept_rate":100,"display_name":"Malawirel"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1692101116,"creation_date":1692101116,"answer_id":76905834,"question_id":76905284,"body_markdown":"I figured it out. There was an extra point at the end of the filePattern. After removing that, it worked as expected.\r\n\r\nNote the difference in the original question and the code snippet below.\r\n\r\n    .addAttribute(&quot;filePattern&quot;, fileName + &quot;-%i.log&quot;)","title":"Log4j: How to set DefaultRolloverStrategy programmatically?","body":"<p>I figured it out. There was an extra point at the end of the filePattern. After removing that, it worked as expected.</p>\n<p>Note the difference in the original question and the code snippet below.</p>\n<pre><code>.addAttribute(&quot;filePattern&quot;, fileName + &quot;-%i.log&quot;)\n</code></pre>\n"}],"owner":{"account_id":5238779,"reputation":115,"user_id":4186539,"accept_rate":100,"display_name":"Malawirel"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":20,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76905834,"answer_count":1,"score":0,"last_activity_date":1692101116,"creation_date":1692096625,"question_id":76905284,"body_markdown":"I am using the code below to set my Log4j configuration programmatically.\r\n\r\n    private void initLog4JConfig() {\r\n        if (!firstCall) {\r\n            return;\r\n        }\r\n\r\n        Level logLevel = Level.INFO;\r\n        String pattern = &quot;%d{yyyy-MM-dd HH:mm:ss,SSS} | %-5p | %m%n&quot;;\r\n        String fileName = GlobalData.getLogFileName();\r\n\r\n        if (GlobalData.getDebugLevel() &gt; 10) {\r\n            logLevel = Level.DEBUG;\r\n        }\r\n\r\n        // console\r\n        ConfigurationBuilder&lt;BuiltConfiguration&gt; builder = ConfigurationBuilderFactory.newConfigurationBuilder();\r\n        builder.setStatusLevel(logLevel);\r\n        builder.setConfigurationName(&quot;DefaultLogger&quot;);\r\n\r\n        AppenderComponentBuilder appenderBuilder\r\n                = builder.newAppender(&quot;Console&quot;, &quot;CONSOLE&quot;).addAttribute(&quot;target&quot;, ConsoleAppender.Target.SYSTEM_OUT);\r\n\r\n        appenderBuilder.add(builder.newLayout(&quot;PatternLayout&quot;))\r\n                .addAttribute(&quot;pattern&quot;, pattern);\r\n        RootLoggerComponentBuilder rootLogger = builder.newRootLogger(logLevel);\r\n        rootLogger.add(builder.newAppenderRef(&quot;Console&quot;));\r\n\r\n        builder.add(appenderBuilder);\r\n        builder.add(rootLogger);\r\n        Configurator.reconfigure(builder.build());\r\n\r\n        // rolling file\r\n        ConfigurationBuilder&lt;BuiltConfiguration&gt; builder2 = ConfigurationBuilderFactory.newConfigurationBuilder();\r\n        builder2.setStatusLevel(logLevel);\r\n        builder2.setConfigurationName(&quot;DefaultRollingFileLogger&quot;);\r\n\r\n        LayoutComponentBuilder layoutBuilder = builder2.newLayout(&quot;PatternLayout&quot;)\r\n                .addAttribute(&quot;pattern&quot;, pattern);\r\n        ComponentBuilder triggeringPolicy = builder2.newComponent(&quot;Policies&quot;)\r\n                .addComponent(builder2.newComponent(&quot;SizeBasedTriggeringPolicy&quot;).addAttribute(&quot;size&quot;, &quot;10KB&quot;));\r\n        ComponentBuilder filePolicy = builder2.newComponent(&quot;DefaultRolloverStrategy&quot;).addAttribute(&quot;max&quot;, 15);\r\n\r\n        AppenderComponentBuilder appenderBuilder2 = builder2.newAppender(&quot;LogToRollingFile&quot;, &quot;RollingFile&quot;)\r\n                .addAttribute(&quot;fileName&quot;, fileName + &quot;.log&quot;)\r\n                .addAttribute(&quot;filePattern&quot;, fileName + &quot;-%i.log.&quot;)\r\n                .add(layoutBuilder)\r\n                .addComponent(triggeringPolicy)\r\n                .addComponent(filePolicy);\r\n\r\n        builder2.add(appenderBuilder2);\r\n        rootLogger.add(builder2.newAppenderRef(&quot;LogToRollingFile&quot;));\r\n        builder2.add(rootLogger);\r\n        Configurator.reconfigure(builder2.build());\r\n    }\r\n\r\nSetting the SizeBasedTriggeringPolicy to 10KB (I am using a low value for testing) works fine, but setting the DefaultRolloverStrategy to 15 files does not work. What am I doing wrong here? It only keeps the original file and then a second file (-1.log).\r\n\r\nFYI: I am on Log4j 2.20.0 and Java 8u381.","title":"Log4j: How to set DefaultRolloverStrategy programmatically?","body":"<p>I am using the code below to set my Log4j configuration programmatically.</p>\n<pre><code>private void initLog4JConfig() {\n    if (!firstCall) {\n        return;\n    }\n\n    Level logLevel = Level.INFO;\n    String pattern = &quot;%d{yyyy-MM-dd HH:mm:ss,SSS} | %-5p | %m%n&quot;;\n    String fileName = GlobalData.getLogFileName();\n\n    if (GlobalData.getDebugLevel() &gt; 10) {\n        logLevel = Level.DEBUG;\n    }\n\n    // console\n    ConfigurationBuilder&lt;BuiltConfiguration&gt; builder = ConfigurationBuilderFactory.newConfigurationBuilder();\n    builder.setStatusLevel(logLevel);\n    builder.setConfigurationName(&quot;DefaultLogger&quot;);\n\n    AppenderComponentBuilder appenderBuilder\n            = builder.newAppender(&quot;Console&quot;, &quot;CONSOLE&quot;).addAttribute(&quot;target&quot;, ConsoleAppender.Target.SYSTEM_OUT);\n\n    appenderBuilder.add(builder.newLayout(&quot;PatternLayout&quot;))\n            .addAttribute(&quot;pattern&quot;, pattern);\n    RootLoggerComponentBuilder rootLogger = builder.newRootLogger(logLevel);\n    rootLogger.add(builder.newAppenderRef(&quot;Console&quot;));\n\n    builder.add(appenderBuilder);\n    builder.add(rootLogger);\n    Configurator.reconfigure(builder.build());\n\n    // rolling file\n    ConfigurationBuilder&lt;BuiltConfiguration&gt; builder2 = ConfigurationBuilderFactory.newConfigurationBuilder();\n    builder2.setStatusLevel(logLevel);\n    builder2.setConfigurationName(&quot;DefaultRollingFileLogger&quot;);\n\n    LayoutComponentBuilder layoutBuilder = builder2.newLayout(&quot;PatternLayout&quot;)\n            .addAttribute(&quot;pattern&quot;, pattern);\n    ComponentBuilder triggeringPolicy = builder2.newComponent(&quot;Policies&quot;)\n            .addComponent(builder2.newComponent(&quot;SizeBasedTriggeringPolicy&quot;).addAttribute(&quot;size&quot;, &quot;10KB&quot;));\n    ComponentBuilder filePolicy = builder2.newComponent(&quot;DefaultRolloverStrategy&quot;).addAttribute(&quot;max&quot;, 15);\n\n    AppenderComponentBuilder appenderBuilder2 = builder2.newAppender(&quot;LogToRollingFile&quot;, &quot;RollingFile&quot;)\n            .addAttribute(&quot;fileName&quot;, fileName + &quot;.log&quot;)\n            .addAttribute(&quot;filePattern&quot;, fileName + &quot;-%i.log.&quot;)\n            .add(layoutBuilder)\n            .addComponent(triggeringPolicy)\n            .addComponent(filePolicy);\n\n    builder2.add(appenderBuilder2);\n    rootLogger.add(builder2.newAppenderRef(&quot;LogToRollingFile&quot;));\n    builder2.add(rootLogger);\n    Configurator.reconfigure(builder2.build());\n}\n</code></pre>\n<p>Setting the SizeBasedTriggeringPolicy to 10KB (I am using a low value for testing) works fine, but setting the DefaultRolloverStrategy to 15 files does not work. What am I doing wrong here? It only keeps the original file and then a second file (-1.log).</p>\n<p>FYI: I am on Log4j 2.20.0 and Java 8u381.</p>\n"},{"tags":["java","postgresql","hibernate","spring-data-jpa","aws-fargate"],"answers":[{"tags":[],"owner":{"account_id":1503493,"reputation":488,"user_id":1407422,"display_name":"Gulliva"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1692100891,"creation_date":1691760109,"answer_id":76883940,"question_id":76881108,"body_markdown":"We found the bug finally today.\r\nIt is a constellation where the web container and the worker query the same entity which is attached to different JVM Entity Managers.\r\n\r\nWhen the web request, which is only a read request, and the commit from the worker run concurrent the entity manager of the web container detects a change and updates the complete page of fetched entities and hence he overrides the changes.\r\n\r\nWe will fix the bug with optimistic locking by adding @Version to our parent entity. Hopefully this helps us the fix the issue.\r\n\r\n**Update**\r\n\r\nThe bug was even easier to fix. We removed a wrongly introduced @Transactional in a simple find method. This led to an update statement made on the passed entity.\r\n\r\n ","title":"Spring Data Hibernate 6 losing data in parent object","body":"<p>We found the bug finally today.\nIt is a constellation where the web container and the worker query the same entity which is attached to different JVM Entity Managers.</p>\n<p>When the web request, which is only a read request, and the commit from the worker run concurrent the entity manager of the web container detects a change and updates the complete page of fetched entities and hence he overrides the changes.</p>\n<p>We will fix the bug with optimistic locking by adding @Version to our parent entity. Hopefully this helps us the fix the issue.</p>\n<p><strong>Update</strong></p>\n<p>The bug was even easier to fix. We removed a wrongly introduced @Transactional in a simple find method. This led to an update statement made on the passed entity.</p>\n"}],"owner":{"account_id":1503493,"reputation":488,"user_id":1407422,"display_name":"Gulliva"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":45,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1692100891,"creation_date":1691734600,"question_id":76881108,"body_markdown":"I&#39;m facing a strange problem. We&#39;re searching this bug for two weeks now and have no idea why this happens. \r\n\r\n**Let me explain the process and situation.**\r\n\r\nWe have an application that receives data and stores them in the Postgres database in status &quot;UPLOADED&quot;. \r\nA separate running worker picks the data in this state and works on it in a scheduled job. \r\nThe process fetches data from some other sources and adds them to the parent entity. After the data has been enriched the parent entity changes the state to &quot;READY&quot; and within the same process the parent entity is rated by some rules.\r\n\r\nIf the rating is ok the parent entity is &quot;ACCEPTED&quot; or &quot;REJECTED&quot;, if some data is missing the parent entity remains in state &quot;READY&quot;.\r\nIn case of ACCEPTED or REJECTED some follow up operations are started. \r\n\r\nThe whole code is running within one Transaction managed by Springs Transaction Manager\r\n\r\n    final var uploadedData = repository.findByStatus(ParentEntity.UPLOADED, PageRequest.of(0, 50, Sort.by(&quot;createdAt&quot;, &quot;id&quot;).ascending())); \r\n   \r\n    uploadedData\r\n                .forEach(parentEntity -&gt; {\r\n                    ...\r\n                    var processedParentEntity = parentEntity;\r\n                    try {\r\n                        processedParentEntity = transaction.execute(status -&gt; {\r\n                            analyze(parentEntity, retries.getOrDefault(parentEntity.getId(), 0) &lt; maxTries);\r\n                            return receiptRepository.findFirstById(parentEntity.getId()).get();\r\n                        });\r\n                     \r\n                    } catch (final TemporaryProblem temporaryProblem) {\r\n                      ...\r\n                    } catch (final Exception exception) {\r\n                     ...\r\n                    }\r\n                });\r\n            logger.info(&quot;finished parentEntity analysis&quot;);\r\n\r\nThe problem is that in some cases under certain conditions, the data of the parentEntity are persisted wrong although the logs say that the entity is in the correct state and has the correct data.\r\nEvery added child entity in 1..N relations is persisted correctly. No Exception occur and nothing is rolled back.\r\n\r\nIn over 99 % the data is persisted correctly but in some strange cases the parentEntity remains in status &quot;UPLOADED&quot; and the worker processes the entity once again which ends in follow up problems.\r\n\r\nWe can see that the problem is perhaps related to the Spring Boot 3 updated we made in May. We can see that when the problem occurs often multiple parentEntities are affected in a row and then for hours the problem doesn&#39;t occur.\r\n\r\nThe Task is running in an AWS fargate container and the DB is a managed RDS instance.\r\nWe have a lot of integration tests and by now we cannot reproduce the problem in a local environment.\r\n\r\n\r\n \r\n\r\n","title":"Spring Data Hibernate 6 losing data in parent object","body":"<p>I'm facing a strange problem. We're searching this bug for two weeks now and have no idea why this happens.</p>\n<p><strong>Let me explain the process and situation.</strong></p>\n<p>We have an application that receives data and stores them in the Postgres database in status &quot;UPLOADED&quot;.\nA separate running worker picks the data in this state and works on it in a scheduled job.\nThe process fetches data from some other sources and adds them to the parent entity. After the data has been enriched the parent entity changes the state to &quot;READY&quot; and within the same process the parent entity is rated by some rules.</p>\n<p>If the rating is ok the parent entity is &quot;ACCEPTED&quot; or &quot;REJECTED&quot;, if some data is missing the parent entity remains in state &quot;READY&quot;.\nIn case of ACCEPTED or REJECTED some follow up operations are started.</p>\n<p>The whole code is running within one Transaction managed by Springs Transaction Manager</p>\n<pre><code>final var uploadedData = repository.findByStatus(ParentEntity.UPLOADED, PageRequest.of(0, 50, Sort.by(&quot;createdAt&quot;, &quot;id&quot;).ascending())); \n\nuploadedData\n            .forEach(parentEntity -&gt; {\n                ...\n                var processedParentEntity = parentEntity;\n                try {\n                    processedParentEntity = transaction.execute(status -&gt; {\n                        analyze(parentEntity, retries.getOrDefault(parentEntity.getId(), 0) &lt; maxTries);\n                        return receiptRepository.findFirstById(parentEntity.getId()).get();\n                    });\n                 \n                } catch (final TemporaryProblem temporaryProblem) {\n                  ...\n                } catch (final Exception exception) {\n                 ...\n                }\n            });\n        logger.info(&quot;finished parentEntity analysis&quot;);\n</code></pre>\n<p>The problem is that in some cases under certain conditions, the data of the parentEntity are persisted wrong although the logs say that the entity is in the correct state and has the correct data.\nEvery added child entity in 1..N relations is persisted correctly. No Exception occur and nothing is rolled back.</p>\n<p>In over 99 % the data is persisted correctly but in some strange cases the parentEntity remains in status &quot;UPLOADED&quot; and the worker processes the entity once again which ends in follow up problems.</p>\n<p>We can see that the problem is perhaps related to the Spring Boot 3 updated we made in May. We can see that when the problem occurs often multiple parentEntities are affected in a row and then for hours the problem doesn't occur.</p>\n<p>The Task is running in an AWS fargate container and the DB is a managed RDS instance.\nWe have a lot of integration tests and by now we cannot reproduce the problem in a local environment.</p>\n"},{"tags":["java","spring-boot","maven","render.com"],"comments":[{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":1,"creation_date":1692090437,"post_id":76904613,"comment_id":135574460,"body_markdown":"*COPY --from=build /target/QuickMaster-1.0.0.jar demo.jar* Don&#39;t know Docker but there&#39;s a space in that path by the looks (which probably would break it) Also (not fatal) *-Pprod -DskipTests* both look wrong [and 1st reported as wrong]. The last is usually `-Dmaven.test.skip=true`","body":"<i>COPY --from=build /target/QuickMaster-1.0.0.jar demo.jar</i> Don&#39;t know Docker but there&#39;s a space in that path by the looks (which probably would break it) Also (not fatal) <i>-Pprod -DskipTests</i> both look wrong [and 1st reported as wrong]. The last is usually <code>-Dmaven.test.skip=true</code>"},{"owner":{"account_id":1127859,"reputation":897,"user_id":1114682,"accept_rate":9,"display_name":"Noriaki Takamizawa"},"score":0,"creation_date":1692090825,"post_id":76904613,"comment_id":135574525,"body_markdown":"Thanks! But unfortunately, after replacing `RUN mvn clean package -Dmaven.test.skip=true`, it&#39;s still same.","body":"Thanks! But unfortunately, after replacing <code>RUN mvn clean package -Dmaven.test.skip=true</code>, it&#39;s still same."},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1692090925,"post_id":76904613,"comment_id":135574539,"body_markdown":"You *did* notice my &quot;not fatal&quot; comment? What else did you change?","body":"You <i>did</i> notice my &quot;not fatal&quot; comment? What else did you change?"},{"owner":{"account_id":1127859,"reputation":897,"user_id":1114682,"accept_rate":9,"display_name":"Noriaki Takamizawa"},"score":0,"creation_date":1692091059,"post_id":76904613,"comment_id":135574560,"body_markdown":"Ah, now I notice your &quot;not fatal&quot;. I only replaced 3rd line on Dockerfile.","body":"Ah, now I notice your &quot;not fatal&quot;. I only replaced 3rd line on Dockerfile."},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1692091388,"post_id":76904613,"comment_id":135574621,"body_markdown":"Difficult to see definitive docs, but try `cp build/target/QuickMaster-1.0.0.jar demo.jar`","body":"Difficult to see definitive docs, but try <code>cp build&#47;target&#47;QuickMaster-1.0.0.jar demo.jar</code>"},{"owner":{"account_id":1127859,"reputation":897,"user_id":1114682,"accept_rate":9,"display_name":"Noriaki Takamizawa"},"score":0,"creation_date":1692091832,"post_id":76904613,"comment_id":135574697,"body_markdown":"Oh thank you. I&#39;m sure I will.","body":"Oh thank you. I&#39;m sure I will."},{"owner":{"account_id":1127859,"reputation":897,"user_id":1114682,"accept_rate":9,"display_name":"Noriaki Takamizawa"},"score":0,"creation_date":1692092081,"post_id":76904613,"comment_id":135574726,"body_markdown":"@g00se BTW, where should I do cp command?","body":"@g00se BTW, where should I do cp command?"},{"owner":{"account_id":1127859,"reputation":897,"user_id":1114682,"accept_rate":9,"display_name":"Noriaki Takamizawa"},"score":0,"creation_date":1692092212,"post_id":76904613,"comment_id":135574739,"body_markdown":"@Mar-Z Thanks. So how should I provide it? I&#39;d appreciate if you could show how.","body":"@Mar-Z Thanks. So how should I provide it? I&#39;d appreciate if you could show how."},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1692092415,"post_id":76904613,"comment_id":135574775,"body_markdown":"*use the RUN command for that. RUN cp build/target/QuickMaster-1.0.0.jar demo.jar* Did you try that (in place of your current COPY)?","body":"<i>use the RUN command for that. RUN cp build/target/QuickMaster-1.0.0.jar demo.jar</i> Did you try that (in place of your current COPY)?"},{"owner":{"account_id":19535095,"reputation":2874,"user_id":14294053,"display_name":"Mar-Z"},"score":0,"creation_date":1692092821,"post_id":76904613,"comment_id":135574843,"body_markdown":"Check a similar example here: https://dev.to/merkasin/learning-to-deploy-spring-boot-web-application-to-on-renderfree-tier-478m","body":"Check a similar example here: <a href=\"https://dev.to/merkasin/learning-to-deploy-spring-boot-web-application-to-on-renderfree-tier-478m\" rel=\"nofollow noreferrer\">dev.to/merkasin/&hellip;</a>"},{"owner":{"account_id":1127859,"reputation":897,"user_id":1114682,"accept_rate":9,"display_name":"Noriaki Takamizawa"},"score":0,"creation_date":1692092864,"post_id":76904613,"comment_id":135574850,"body_markdown":"Error turns to `[stage-1 2/2] RUN cp build/target/QuickMaster-1.0.0.jar demo.jar:\ncp: can&#39;t stat &#39;build/target/QuickMaster-1.0.0.jar&#39;: No such file or directory` Still it&#39;s difficult.","body":"Error turns to <code>[stage-1 2&#47;2] RUN cp build&#47;target&#47;QuickMaster-1.0.0.jar demo.jar: cp: can&#39;t stat &#39;build&#47;target&#47;QuickMaster-1.0.0.jar&#39;: No such file or directory</code> Still it&#39;s difficult."},{"owner":{"account_id":1127859,"reputation":897,"user_id":1114682,"accept_rate":9,"display_name":"Noriaki Takamizawa"},"score":0,"creation_date":1692097730,"post_id":76904613,"comment_id":135575664,"body_markdown":"@Mar-Z Oops, is that so? Sorry again, and could you give me how to provide Java command and runtime.","body":"@Mar-Z Oops, is that so? Sorry again, and could you give me how to provide Java command and runtime."}],"answers":[{"tags":[],"owner":{"account_id":5221534,"reputation":314,"user_id":4174849,"display_name":"Omid"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1692100823,"creation_date":1692100823,"answer_id":76905801,"question_id":76904613,"body_markdown":"The error you&#39;re encountering, seems to be related to the way you&#39;re specifying the ENTRYPOINT command in your Dockerfile. The issue likely stems from the use of curly quotes instead of regular double quotes. Docker expects regular double quotes for specifying commands.\r\n\r\nHere&#39;s your original Dockerfile line causing the issue:\r\n\r\n    ENTRYPOINT [“java”,“-jar”,“demo.jar”]\r\n\r\nReplace the curly quotes with regular double quotes:\r\n\r\n    ENTRYPOINT [&quot;java&quot;, &quot;-jar&quot;, &quot;demo.jar&quot;]","title":"Why I don&#39;t find jar file?","body":"<p>The error you're encountering, seems to be related to the way you're specifying the ENTRYPOINT command in your Dockerfile. The issue likely stems from the use of curly quotes instead of regular double quotes. Docker expects regular double quotes for specifying commands.</p>\n<p>Here's your original Dockerfile line causing the issue:</p>\n<pre><code>ENTRYPOINT [“java”,“-jar”,“demo.jar”]\n</code></pre>\n<p>Replace the curly quotes with regular double quotes:</p>\n<pre><code>ENTRYPOINT [&quot;java&quot;, &quot;-jar&quot;, &quot;demo.jar&quot;]\n</code></pre>\n"}],"owner":{"account_id":1127859,"reputation":897,"user_id":1114682,"accept_rate":9,"display_name":"Noriaki Takamizawa"},"comment_count":12,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":102,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":1,"score":0,"last_activity_date":1692100823,"creation_date":1692090123,"question_id":76904613,"body_markdown":"I created sample Java spring boot code like this. \r\n**Code**\r\nhttps://github.com/hardreggaecafe/java_spring_boot_sample\r\n\r\nAnd When I deploy this code to Render.com, it fails. Dockerfile is here.\r\n\r\n**Dockerfile**\r\n```\r\nFROM maven:3-eclipse-temurin-17 AS build\r\nCOPY . .\r\nRUN mvn clean package -Pprod -DskipTests\r\nFROM eclipse-temurin:17-alpine\r\nCOPY --from=build /target/QuickMaster-1.0.0.jar demo.jar\r\nEXPOSE 8080\r\nENTRYPOINT [“java”,“-jar”,“demo.jar”]\r\n```\r\n\r\n**Error**\r\n\r\n```\r\nDownloaded from central: https://repo.maven.apache.org/maven2/com/google/guava/guava/28.2-android/guava-28.2-android.jar (2.6 MB at 5.8 MB/s)\r\nAug 15 05:44:08 PM  #11 20.12 [INFO] Replacing main artifact /target/QuickMaster-1.0.0.jar with repackaged archive, adding nested dependencies in BOOT-INF/.\r\nAug 15 05:44:08 PM  #11 20.12 [INFO] The original artifact has been renamed to /target/QuickMaster-1.0.0.jar.original\r\nAug 15 05:44:08 PM  #11 20.12 [INFO] ------------------------------------------------------------------------\r\nAug 15 05:44:08 PM  #11 20.12 [INFO] BUILD SUCCESS\r\nAug 15 05:44:08 PM  #11 20.12 [INFO] ------------------------------------------------------------------------\r\nAug 15 05:44:08 PM  #11 20.12 [INFO] Total time:  17.180 s\r\nAug 15 05:44:08 PM  #11 20.12 [INFO] Finished at: 2023-08-15T08:44:07Z\r\nAug 15 05:44:08 PM  #11 20.12 [INFO] ------------------------------------------------------------------------\r\nAug 15 05:44:08 PM  #11 20.12 [WARNING] The requested profile &quot;prod&quot; could not be activated because it does not exist.\r\nAug 15 05:44:08 PM  #11 DONE 20.3s\r\nAug 15 05:44:08 PM  \r\nAug 15 05:44:08 PM  #12 [stage-1 2/2] COPY --from=build /target/QuickMaster-1.0.0.jar demo.jar\r\nAug 15 05:44:08 PM  #12 DONE 0.1s\r\nAug 15 05:44:08 PM  \r\nAug 15 05:44:08 PM  #13 exporting to docker image format\r\nAug 15 05:44:08 PM  #13 exporting layers\r\nAug 15 05:44:09 PM  #13 exporting layers 1.1s done\r\nAug 15 05:44:09 PM  #13 exporting manifest sha256:1ed8ee65532237425105db1aae4daf717d2a9a7713ff828eaceb10c126220ee9 done\r\nAug 15 05:44:09 PM  #13 exporting config sha256:13704bb38ca3dfc2f382ecf143bcf3adccbd4609b81037ceb10138f1197599f6 done\r\nAug 15 05:44:14 PM  #13 DONE 6.2s\r\nAug 15 05:44:14 PM  \r\nAug 15 05:44:14 PM  #14 exporting content cache\r\nAug 15 05:44:14 PM  #14 preparing build cache for export\r\nAug 15 05:44:30 PM  #14 DONE 16.4s\r\nAug 15 05:44:31 PM  Pushing image to registry...\r\nAug 15 05:44:34 PM  Upload succeeded\r\nAug 15 05:44:34 PM  DONE\r\nAug 15 05:44:51 PM  /bin/sh: [“java”,“-jar”,“demo.jar”]: not found\r\nAug 15 05:44:52 PM  /bin/sh: [“java”,“-jar”,“demo.jar”]: not found\r\nAug 15 05:45:08 PM  /bin/sh: [“java”,“-jar”,“demo.jar”]: not found\r\n```\r\n\r\nI can&#39;t figure out\r\n`/bin/sh: [“java”,“-jar”,“demo.jar”]: not found`.\r\n\r\nI&#39;d appreciate if someone tell me how to fix it.\r\n\r\n","title":"Why I don&#39;t find jar file?","body":"<p>I created sample Java spring boot code like this.\n<strong>Code</strong>\n<a href=\"https://github.com/hardreggaecafe/java_spring_boot_sample\" rel=\"nofollow noreferrer\">https://github.com/hardreggaecafe/java_spring_boot_sample</a></p>\n<p>And When I deploy this code to Render.com, it fails. Dockerfile is here.</p>\n<p><strong>Dockerfile</strong></p>\n<pre><code>FROM maven:3-eclipse-temurin-17 AS build\nCOPY . .\nRUN mvn clean package -Pprod -DskipTests\nFROM eclipse-temurin:17-alpine\nCOPY --from=build /target/QuickMaster-1.0.0.jar demo.jar\nEXPOSE 8080\nENTRYPOINT [“java”,“-jar”,“demo.jar”]\n</code></pre>\n<p><strong>Error</strong></p>\n<pre><code>Downloaded from central: https://repo.maven.apache.org/maven2/com/google/guava/guava/28.2-android/guava-28.2-android.jar (2.6 MB at 5.8 MB/s)\nAug 15 05:44:08 PM  #11 20.12 [INFO] Replacing main artifact /target/QuickMaster-1.0.0.jar with repackaged archive, adding nested dependencies in BOOT-INF/.\nAug 15 05:44:08 PM  #11 20.12 [INFO] The original artifact has been renamed to /target/QuickMaster-1.0.0.jar.original\nAug 15 05:44:08 PM  #11 20.12 [INFO] ------------------------------------------------------------------------\nAug 15 05:44:08 PM  #11 20.12 [INFO] BUILD SUCCESS\nAug 15 05:44:08 PM  #11 20.12 [INFO] ------------------------------------------------------------------------\nAug 15 05:44:08 PM  #11 20.12 [INFO] Total time:  17.180 s\nAug 15 05:44:08 PM  #11 20.12 [INFO] Finished at: 2023-08-15T08:44:07Z\nAug 15 05:44:08 PM  #11 20.12 [INFO] ------------------------------------------------------------------------\nAug 15 05:44:08 PM  #11 20.12 [WARNING] The requested profile &quot;prod&quot; could not be activated because it does not exist.\nAug 15 05:44:08 PM  #11 DONE 20.3s\nAug 15 05:44:08 PM  \nAug 15 05:44:08 PM  #12 [stage-1 2/2] COPY --from=build /target/QuickMaster-1.0.0.jar demo.jar\nAug 15 05:44:08 PM  #12 DONE 0.1s\nAug 15 05:44:08 PM  \nAug 15 05:44:08 PM  #13 exporting to docker image format\nAug 15 05:44:08 PM  #13 exporting layers\nAug 15 05:44:09 PM  #13 exporting layers 1.1s done\nAug 15 05:44:09 PM  #13 exporting manifest sha256:1ed8ee65532237425105db1aae4daf717d2a9a7713ff828eaceb10c126220ee9 done\nAug 15 05:44:09 PM  #13 exporting config sha256:13704bb38ca3dfc2f382ecf143bcf3adccbd4609b81037ceb10138f1197599f6 done\nAug 15 05:44:14 PM  #13 DONE 6.2s\nAug 15 05:44:14 PM  \nAug 15 05:44:14 PM  #14 exporting content cache\nAug 15 05:44:14 PM  #14 preparing build cache for export\nAug 15 05:44:30 PM  #14 DONE 16.4s\nAug 15 05:44:31 PM  Pushing image to registry...\nAug 15 05:44:34 PM  Upload succeeded\nAug 15 05:44:34 PM  DONE\nAug 15 05:44:51 PM  /bin/sh: [“java”,“-jar”,“demo.jar”]: not found\nAug 15 05:44:52 PM  /bin/sh: [“java”,“-jar”,“demo.jar”]: not found\nAug 15 05:45:08 PM  /bin/sh: [“java”,“-jar”,“demo.jar”]: not found\n</code></pre>\n<p>I can't figure out\n<code>/bin/sh: [“java”,“-jar”,“demo.jar”]: not found</code>.</p>\n<p>I'd appreciate if someone tell me how to fix it.</p>\n"},{"tags":["java","gradle","testng","intellij-14"],"comments":[{"owner":{"account_id":1797676,"reputation":300,"user_id":1636730,"display_name":"Al Jacinto"},"score":0,"creation_date":1430830287,"post_id":30039144,"comment_id":48221443,"body_markdown":"Do you have the intellij plugin in your build.gradle?","body":"Do you have the intellij plugin in your build.gradle?"},{"owner":{"account_id":56561,"reputation":2573,"user_id":169447,"accept_rate":89,"display_name":"Sakamoto Kazuma"},"score":0,"creation_date":1430834027,"post_id":30039144,"comment_id":48224447,"body_markdown":"No not that I know of anyways","body":"No not that I know of anyways"},{"owner":{"account_id":1797676,"reputation":300,"user_id":1636730,"display_name":"Al Jacinto"},"score":0,"creation_date":1430838164,"post_id":30039144,"comment_id":48227914,"body_markdown":"it is also complaining you don&#39;t have source for test, where are your test classes?","body":"it is also complaining you don&#39;t have source for test, where are your test classes?"}],"answers":[{"tags":[],"owner":{"account_id":40774,"reputation":28739,"user_id":118228,"accept_rate":85,"display_name":"djangofan"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1486316838,"creation_date":1486316838,"answer_id":42055269,"question_id":30039144,"body_markdown":"Let me cite another example project I am working on:\r\nhttps://github.com/virenv/ParallelReporter\r\n\r\nAt the top of my build.gradle, it is configured like so:\r\n\r\n    apply plugin: &#39;java&#39;\r\n    apply plugin: &#39;idea&#39;\r\n    apply plugin: &#39;eclipse&#39;\r\n\r\nThen setup your project with this command:\r\n\r\n    gradle clean idea\r\n\r\nIf you are getting test output to **/out**, then you are probably running the tests as TestNG, not from the Gradle executor.   If you are doing it right, Gradle will generate a `/build` folder and you can control where your test report is generated with something like this:\r\n\r\n    test {\r\n        reports.html.destination = file(&quot;$buildDir/reports/gradle&quot;)\r\n        ....\r\n\r\nOne advantage of running the tests as &quot;pure TestNG&quot; rather than using the Gradle executor, is that IntelliJ-IDEA will display to you more information about the individual test successes.   When running with Gradle, IntelliJ-IDEA is not smart enough to show you that info and so you need to rely on your test report.","title":"IntelliJ settings for Gradle and TestNG","body":"<p>Let me cite another example project I am working on:\n<a href=\"https://github.com/virenv/ParallelReporter\" rel=\"nofollow noreferrer\">https://github.com/virenv/ParallelReporter</a></p>\n\n<p>At the top of my build.gradle, it is configured like so:</p>\n\n<pre><code>apply plugin: 'java'\napply plugin: 'idea'\napply plugin: 'eclipse'\n</code></pre>\n\n<p>Then setup your project with this command:</p>\n\n<pre><code>gradle clean idea\n</code></pre>\n\n<p>If you are getting test output to <strong>/out</strong>, then you are probably running the tests as TestNG, not from the Gradle executor.   If you are doing it right, Gradle will generate a <code>/build</code> folder and you can control where your test report is generated with something like this:</p>\n\n<pre><code>test {\n    reports.html.destination = file(\"$buildDir/reports/gradle\")\n    ....\n</code></pre>\n\n<p>One advantage of running the tests as \"pure TestNG\" rather than using the Gradle executor, is that IntelliJ-IDEA will display to you more information about the individual test successes.   When running with Gradle, IntelliJ-IDEA is not smart enough to show you that info and so you need to rely on your test report.</p>\n"}],"owner":{"account_id":56561,"reputation":2573,"user_id":169447,"accept_rate":89,"display_name":"Sakamoto Kazuma"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":2457,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":1,"score":2,"last_activity_date":1692100344,"creation_date":1430770433,"question_id":30039144,"body_markdown":"I started creating a set of tests with Selenium and TestNG (Java base language) in IntelliJ IDEA. I was able to compile and run within IntelliJ, but when I added a Gradle file (shown below) I&#39;m getting some compile path errors. \r\n\r\nGradle:\r\n\r\n        apply plugin: &#39;java&#39;\r\n    \r\n    \r\n    dependencies {\r\n        \r\n        testCompile(group: &#39;org.uncommons&#39;, name: &#39;reportng&#39;, version: &#39;1.1.4&#39;) {\r\n            exclude(module: &#39;testng&#39;)\r\n        }\r\n    \r\n        testCompile group: &#39;com.google.inject&#39;, name: &#39;guice&#39;, version: &#39;3.0&#39;\r\n        compile group: &#39;xml-apis&#39;, name: &#39;xml-apis&#39;, version:&#39;1.4.01&#39;\r\n    \r\n    }\r\n    \r\n    configurations.all {\r\n        resolutionStrategy {\r\n            force &#39;xml-apis:xml-apis:1.4.01&#39;\r\n        }\r\n    }\r\n    \r\n    task testfeature1(type: Test) {\r\n        ignoreFailures = true\r\n        useTestNG() {\r\n            suites &#39;Resources/Dashboards/feature1_testng.xml&#39;\r\n            useDefaultListeners = false\r\n            listeners &lt;&lt; &#39;org.uncommons.reportng.HTMLReporter&#39;\r\n            listeners &lt;&lt; &#39;org.uncommons.reportng.JUnitXMLReporter&#39;\r\n        }\r\n    }\r\n\r\n\r\nTerminal Output:\r\n\r\n    13:51:08.287 [DEBUG] \r\n\r\n    [org.gradle.api.internal.tasks.execution.ExecuteAtMostOnceTaskExecuter] Starting to execute task &#39;:testfeature1&#39;\r\n    13:51:08.301 [INFO] [org.gradle.api.internal.file.collections.DirectoryFileTree] file or directory &#39;/Users/******/Workspace/TestNG_Automation/build/classes/test&#39;, not found\r\n    13:51:08.301 [INFO] [org.gradle.api.internal.tasks.execution.SkipEmptySourceFilesTaskExecuter] Skipping task &#39;:testfeature1&#39; as it has no source files.\r\n\r\nI&#39;m guessing IntelliJ compiles things to the out folder, as I see that now, but no *build* folder.\r\n\r\nHow do I change this to make Gradle and IntelliJ work the same way?","title":"IntelliJ settings for Gradle and TestNG","body":"<p>I started creating a set of tests with Selenium and TestNG (Java base language) in IntelliJ IDEA. I was able to compile and run within IntelliJ, but when I added a Gradle file (shown below) I'm getting some compile path errors.</p>\n<p>Gradle:</p>\n<pre><code>    apply plugin: 'java'\n\n\ndependencies {\n    \n    testCompile(group: 'org.uncommons', name: 'reportng', version: '1.1.4') {\n        exclude(module: 'testng')\n    }\n\n    testCompile group: 'com.google.inject', name: 'guice', version: '3.0'\n    compile group: 'xml-apis', name: 'xml-apis', version:'1.4.01'\n\n}\n\nconfigurations.all {\n    resolutionStrategy {\n        force 'xml-apis:xml-apis:1.4.01'\n    }\n}\n\ntask testfeature1(type: Test) {\n    ignoreFailures = true\n    useTestNG() {\n        suites 'Resources/Dashboards/feature1_testng.xml'\n        useDefaultListeners = false\n        listeners &lt;&lt; 'org.uncommons.reportng.HTMLReporter'\n        listeners &lt;&lt; 'org.uncommons.reportng.JUnitXMLReporter'\n    }\n}\n</code></pre>\n<p>Terminal Output:</p>\n<pre><code>13:51:08.287 [DEBUG] \n\n[org.gradle.api.internal.tasks.execution.ExecuteAtMostOnceTaskExecuter] Starting to execute task ':testfeature1'\n13:51:08.301 [INFO] [org.gradle.api.internal.file.collections.DirectoryFileTree] file or directory '/Users/******/Workspace/TestNG_Automation/build/classes/test', not found\n13:51:08.301 [INFO] [org.gradle.api.internal.tasks.execution.SkipEmptySourceFilesTaskExecuter] Skipping task ':testfeature1' as it has no source files.\n</code></pre>\n<p>I'm guessing IntelliJ compiles things to the out folder, as I see that now, but no <em>build</em> folder.</p>\n<p>How do I change this to make Gradle and IntelliJ work the same way?</p>\n"},{"tags":["java","android","android-camera2","android-mediacodec"],"comments":[{"owner":{"account_id":1420007,"reputation":17492,"user_id":1344825,"display_name":"Eddy Talvala"},"score":0,"creation_date":1692122291,"post_id":76903048,"comment_id":135580664,"body_markdown":"Does logcat have any errors from the camera service when you just use the one output?","body":"Does logcat have any errors from the camera service when you just use the one output?"},{"owner":{"account_id":4321349,"reputation":41,"user_id":3529460,"display_name":"user3529460"},"score":0,"creation_date":1692123402,"post_id":76903048,"comment_id":135580853,"body_markdown":"I&#39;ve just noticed I do get an error &quot;Receive capture error on unknown request ID -1&quot;. I believe I&#39;ve found the issue. I am using an old pixel 3 to run the app which has 2 front cameras. I just realised the front main camera has a hardware fault and so the default camera app (and other apps) switch to the wide angle front camera. For some reason my app does not automatically switch to that unless I use a SurfaceView","body":"I&#39;ve just noticed I do get an error &quot;Receive capture error on unknown request ID -1&quot;. I believe I&#39;ve found the issue. I am using an old pixel 3 to run the app which has 2 front cameras. I just realised the front main camera has a hardware fault and so the default camera app (and other apps) switch to the wide angle front camera. For some reason my app does not automatically switch to that unless I use a SurfaceView"},{"owner":{"account_id":4321349,"reputation":41,"user_id":3529460,"display_name":"user3529460"},"score":0,"creation_date":1692123839,"post_id":76903048,"comment_id":135580919,"body_markdown":"I realised this after I switched to the rear camera and that worked fine","body":"I realised this after I switched to the rear camera and that worked fine"}],"owner":{"account_id":4321349,"reputation":41,"user_id":3529460,"display_name":"user3529460"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":59,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1692099489,"creation_date":1692065020,"question_id":76903048,"body_markdown":"I am trying to stream the raw camera feed using the camera2 API. The end goal is to stream the feed to a server where it will be converted and saved as an MP4 file when the stream is stopped. I would ideally like to run this as a foreground service.\r\n\r\nI came across the MediaCodec class and looks like it would be helpful to encode the data before sending, but I&#39;ve been having trouble setting it up using the camera.\r\n\r\nI have the following code to set up the MediaCodec for encoding. The MediaFormat currently uses fixed values as I was testing it out, but the framerate, size etc are all supported by the camera\r\n\r\n```\r\ntry {\r\n    MediaFormat mediaFormat = new MediaFormatConfigurationBuilder(&quot;video/avc&quot;)\r\n                    .setSize(width, height)\r\n                    .setFrameRate(54)\r\n                    .setBitrate(BIT_RATE)\r\n                    .setIFrameInterval(2)\r\n                    .build();\r\n\r\n    videoCodec = MediaCodec.createEncoderByType(&quot;video/avc&quot;);\r\n    videoCodec.setCallback(new CameraStream(this));\r\n    videoCodec.configure(mediaFormat, null, null, MediaCodec.CONFIGURE_FLAG_ENCODE);\r\n\r\n    HandlerThread bThread = new HandlerThread(&quot;Camera-Stream&quot;);\r\n    bThread.start();\r\n    Handler handler = new Handler(bThread.getLooper());\r\n\r\n    // The ImageReader was used to test if it&#39;s surface works or not\r\n    ImageReader reader = ImageReader.newInstance(width, height, ImageFormat.YUV_420_888, 5);\r\n\r\n    reader.setOnImageAvailableListener(new ImageReader.OnImageAvailableListener() \r\n    {\r\n        @Override\r\n        public void onImageAvailable(ImageReader reader) {\r\n            System.out.println(&quot;Received image&quot;);\r\n            reader.acquireLatestImage().close();\r\n        }\r\n    }, handler);\r\n\r\n\r\n    Surface dummySurface = reader.getSurface();\r\n\r\n    Surface encoderSurface = MediaCodec.createPersistentInputSurface();\r\n    videoCodec.setInputSurface(encoderSurface);\r\n\r\n    videoCodec.start();\r\n    cameraManager.openCamera(\r\n        cameraId,\r\n        new CameraDevice.StateCallback() {\r\n            @Override\r\n            public void onOpened(@NonNull CameraDevice camera) {\r\n                System.out.println(&quot;Opening camera&quot;);\r\n                startStreamingCamera(camera, encoderSurface, UISurfaceView);\r\n            }\r\n\r\n            @Override\r\n            public void onDisconnected(@NonNull CameraDevice camera) {\r\n//              cameraInputSurface.release();\r\n//              videoCodec.release();\r\n            }\r\n\r\n            @Override\r\n            public void onError(@NonNull CameraDevice camera, int error) {\r\n//              cameraInputSurface.release();\r\n//              videoCodec.release();\r\n            }\r\n        },\r\n        handler\r\n      );\r\n    } catch (CameraAccessException | IOException e) {\r\n        throw new RuntimeException(e);\r\n}\r\n```\r\n\r\nThe startStreaming method is as follows\r\n\r\n```\r\nprivate void startStreamingCamera(CameraDevice camera, Surface encoderSurface, Surface UISurface) {\r\n    System.out.println(&quot;Streaming camera...&quot;);\r\n\r\n    try {\r\n\r\n// Create a CameraCaptureSession\r\n        CameraCaptureSession.StateCallback captureSessionStateCallback = new CameraCaptureSession.StateCallback() {\r\n            @Override\r\n            public void onConfigured(@NonNull CameraCaptureSession session) {\r\n                // The camera capture session is now configured and can be used to capture frames\r\n                // Configure the MediaCodec&#39;s input surface as the target surface for the camera capture\r\n                try {\r\n\r\n                    CaptureRequest.Builder captureRequestBuilder = camera.createCaptureRequest(CameraDevice.TEMPLATE_RECORD);\r\n                    captureRequestBuilder.addTarget(encoderSurface);\r\n                    // Uncommenting the following line works for some reason\r\n//                  captureRequestBuilder.addTarget(UISurface);\r\n\r\n                    session.setRepeatingRequest(captureRequestBuilder.build(), new CameraCaptureSession.CaptureCallback() {\r\n                        @Override\r\n                        public void onCaptureCompleted(@NonNull CameraCaptureSession session, @NonNull CaptureRequest request, @NonNull TotalCaptureResult result) {\r\n                            super.onCaptureCompleted(session, request, result);\r\n                        }\r\n                    }, null);\r\n                } catch (CameraAccessException e) {\r\n                    e.printStackTrace();\r\n                }\r\n            }\r\n\r\n            @Override\r\n            public void onConfigureFailed(@NonNull CameraCaptureSession session) {\r\n                // Handle configuration failure\r\n                throw new RuntimeException(&quot;Failed to configure capture session&quot;);\r\n            }\r\n        };\r\n        camera.createCaptureSession(Arrays.asList(encoderSurface, UISurface), captureSessionStateCallback, null);\r\n    } catch (CameraAccessException e) {\r\n        throw new RuntimeException(e);\r\n    }\r\n}\r\n```\r\n\r\nThe videoCodec callback simply makes print statements now when the output buffer is available, however I would eventually like it to send the data off to a server.\r\n\r\nI tried using a separate thread to call the `videoCodec.dequeueOutputBuffer()` but the output buffer was always empty with that too. For some reason the output buffer is empty if I set the target to just the input surface of the encoder, but it works fine if I also add a SurfaceView surface as a target.\r\n\r\nI tried to replace the surface view surface with an ImageReader surface but that crashes and fails to open the camera with error code 3.\r\n\r\nMy problem is as follows:\r\n- If I set the target of the camera session to **ONLY** the encoders input surface, nothing happens (the callback is not called and there is no data in the output buffer of the encoder)\r\n- If I uncomment the `captureRequestBuilder.setTarget(UISurface)` and set the target of the camera session to **BOTH** the encoders input surface and a SurfaceView I have set up in the main activity to see what is being streamed, then data appears in the output buffer of the encoder however I don&#39;t know if the encoders output is correct.\r\n\r\nBut I would ideally like to run this as a foreground service so its not ideal having a SurfaceView, is there any way to make this work with just the media codecs input surface?\r\n\r\nThanks","title":"MediaCodec encoder with raw camera stream requires surfaceview surface to work","body":"<p>I am trying to stream the raw camera feed using the camera2 API. The end goal is to stream the feed to a server where it will be converted and saved as an MP4 file when the stream is stopped. I would ideally like to run this as a foreground service.</p>\n<p>I came across the MediaCodec class and looks like it would be helpful to encode the data before sending, but I've been having trouble setting it up using the camera.</p>\n<p>I have the following code to set up the MediaCodec for encoding. The MediaFormat currently uses fixed values as I was testing it out, but the framerate, size etc are all supported by the camera</p>\n<pre><code>try {\n    MediaFormat mediaFormat = new MediaFormatConfigurationBuilder(&quot;video/avc&quot;)\n                    .setSize(width, height)\n                    .setFrameRate(54)\n                    .setBitrate(BIT_RATE)\n                    .setIFrameInterval(2)\n                    .build();\n\n    videoCodec = MediaCodec.createEncoderByType(&quot;video/avc&quot;);\n    videoCodec.setCallback(new CameraStream(this));\n    videoCodec.configure(mediaFormat, null, null, MediaCodec.CONFIGURE_FLAG_ENCODE);\n\n    HandlerThread bThread = new HandlerThread(&quot;Camera-Stream&quot;);\n    bThread.start();\n    Handler handler = new Handler(bThread.getLooper());\n\n    // The ImageReader was used to test if it's surface works or not\n    ImageReader reader = ImageReader.newInstance(width, height, ImageFormat.YUV_420_888, 5);\n\n    reader.setOnImageAvailableListener(new ImageReader.OnImageAvailableListener() \n    {\n        @Override\n        public void onImageAvailable(ImageReader reader) {\n            System.out.println(&quot;Received image&quot;);\n            reader.acquireLatestImage().close();\n        }\n    }, handler);\n\n\n    Surface dummySurface = reader.getSurface();\n\n    Surface encoderSurface = MediaCodec.createPersistentInputSurface();\n    videoCodec.setInputSurface(encoderSurface);\n\n    videoCodec.start();\n    cameraManager.openCamera(\n        cameraId,\n        new CameraDevice.StateCallback() {\n            @Override\n            public void onOpened(@NonNull CameraDevice camera) {\n                System.out.println(&quot;Opening camera&quot;);\n                startStreamingCamera(camera, encoderSurface, UISurfaceView);\n            }\n\n            @Override\n            public void onDisconnected(@NonNull CameraDevice camera) {\n//              cameraInputSurface.release();\n//              videoCodec.release();\n            }\n\n            @Override\n            public void onError(@NonNull CameraDevice camera, int error) {\n//              cameraInputSurface.release();\n//              videoCodec.release();\n            }\n        },\n        handler\n      );\n    } catch (CameraAccessException | IOException e) {\n        throw new RuntimeException(e);\n}\n</code></pre>\n<p>The startStreaming method is as follows</p>\n<pre><code>private void startStreamingCamera(CameraDevice camera, Surface encoderSurface, Surface UISurface) {\n    System.out.println(&quot;Streaming camera...&quot;);\n\n    try {\n\n// Create a CameraCaptureSession\n        CameraCaptureSession.StateCallback captureSessionStateCallback = new CameraCaptureSession.StateCallback() {\n            @Override\n            public void onConfigured(@NonNull CameraCaptureSession session) {\n                // The camera capture session is now configured and can be used to capture frames\n                // Configure the MediaCodec's input surface as the target surface for the camera capture\n                try {\n\n                    CaptureRequest.Builder captureRequestBuilder = camera.createCaptureRequest(CameraDevice.TEMPLATE_RECORD);\n                    captureRequestBuilder.addTarget(encoderSurface);\n                    // Uncommenting the following line works for some reason\n//                  captureRequestBuilder.addTarget(UISurface);\n\n                    session.setRepeatingRequest(captureRequestBuilder.build(), new CameraCaptureSession.CaptureCallback() {\n                        @Override\n                        public void onCaptureCompleted(@NonNull CameraCaptureSession session, @NonNull CaptureRequest request, @NonNull TotalCaptureResult result) {\n                            super.onCaptureCompleted(session, request, result);\n                        }\n                    }, null);\n                } catch (CameraAccessException e) {\n                    e.printStackTrace();\n                }\n            }\n\n            @Override\n            public void onConfigureFailed(@NonNull CameraCaptureSession session) {\n                // Handle configuration failure\n                throw new RuntimeException(&quot;Failed to configure capture session&quot;);\n            }\n        };\n        camera.createCaptureSession(Arrays.asList(encoderSurface, UISurface), captureSessionStateCallback, null);\n    } catch (CameraAccessException e) {\n        throw new RuntimeException(e);\n    }\n}\n</code></pre>\n<p>The videoCodec callback simply makes print statements now when the output buffer is available, however I would eventually like it to send the data off to a server.</p>\n<p>I tried using a separate thread to call the <code>videoCodec.dequeueOutputBuffer()</code> but the output buffer was always empty with that too. For some reason the output buffer is empty if I set the target to just the input surface of the encoder, but it works fine if I also add a SurfaceView surface as a target.</p>\n<p>I tried to replace the surface view surface with an ImageReader surface but that crashes and fails to open the camera with error code 3.</p>\n<p>My problem is as follows:</p>\n<ul>\n<li>If I set the target of the camera session to <strong>ONLY</strong> the encoders input surface, nothing happens (the callback is not called and there is no data in the output buffer of the encoder)</li>\n<li>If I uncomment the <code>captureRequestBuilder.setTarget(UISurface)</code> and set the target of the camera session to <strong>BOTH</strong> the encoders input surface and a SurfaceView I have set up in the main activity to see what is being streamed, then data appears in the output buffer of the encoder however I don't know if the encoders output is correct.</li>\n</ul>\n<p>But I would ideally like to run this as a foreground service so its not ideal having a SurfaceView, is there any way to make this work with just the media codecs input surface?</p>\n<p>Thanks</p>\n"},{"tags":["java","jakarta-ee","ejb","cdi"],"answers":[{"comments":[{"owner":{"account_id":1202806,"reputation":23223,"user_id":1173112,"accept_rate":89,"display_name":"Koray Tugay"},"score":3,"creation_date":1371668903,"post_id":8138303,"comment_id":24911260,"body_markdown":"What exactly makes the injection when we use @Inject? The JavaEE container? Can it inject POJO &#39;s?","body":"What exactly makes the injection when we use @Inject? The JavaEE container? Can it inject POJO &#39;s?"},{"owner":{"account_id":70258,"reputation":590444,"user_id":203907,"accept_rate":81,"display_name":"Bozho"},"score":4,"creation_date":1371718464,"post_id":8138303,"comment_id":24928012,"body_markdown":"with CDI it&#39;s the CDI container (bundled in the JavaEE container)","body":"with CDI it&#39;s the CDI container (bundled in the JavaEE container)"}],"tags":[],"owner":{"account_id":70258,"reputation":590444,"user_id":203907,"accept_rate":81,"display_name":"Bozho"},"comment_count":2,"down_vote_count":0,"up_vote_count":38,"is_accepted":false,"score":38,"last_activity_date":1321369072,"creation_date":1321369072,"answer_id":8138303,"question_id":8138232,"body_markdown":"`@Inject` can inject any bean, while `@EJB` can only inject EJBs. You can use either to inject EJBs, but I&#39;d prefer `@Inject` everywhere.","title":"Should I use @EJB or @Inject","body":"<p><code>@Inject</code> can inject any bean, while <code>@EJB</code> can only inject EJBs. You can use either to inject EJBs, but I'd prefer <code>@Inject</code> everywhere.</p>\n"},{"comments":[{"owner":{"account_id":309077,"reputation":24064,"user_id":621338,"accept_rate":90,"display_name":"necromancer"},"score":4,"creation_date":1368347456,"post_id":8138452,"comment_id":23693928,"body_markdown":"why does `@EJB` work for circular injection (one singleton bean and another bean needing a reference to each other)? (with reference to my answer below - i am not sure if i am doing the right thing by switching to `@EJB`)","body":"why does <code>@EJB</code> work for circular injection (one singleton bean and another bean needing a reference to each other)? (with reference to my answer below - i am not sure if i am doing the right thing by switching to <code>@EJB</code>)"},{"owner":{"account_id":1697192,"reputation":608,"user_id":1558323,"display_name":"him"},"score":2,"creation_date":1539985073,"post_id":8138452,"comment_id":92712667,"body_markdown":"because you&#39;re not injecting the implementation, but a proxy that interposes on the implementation.  because of this, you get the advantages of &quot;late binding&quot; and other container features.","body":"because you&#39;re not injecting the implementation, but a proxy that interposes on the implementation.  because of this, you get the advantages of &quot;late binding&quot; and other container features."}],"tags":[],"owner":{"account_id":558023,"reputation":17978,"user_id":920607,"accept_rate":89,"display_name":"Piotr Nowicki"},"comment_count":2,"down_vote_count":0,"up_vote_count":198,"is_accepted":true,"score":198,"last_activity_date":1692099158,"creation_date":1321369720,"answer_id":8138452,"question_id":8138232,"body_markdown":"The `@EJB` is used to inject EJB&#39;s only and is available for quite some time now. `@Inject` can inject any managed bean and is a part of the new CDI specification (since Java EE 6).\r\n\r\nIn simple cases you can simply change `@EJB` to `@Inject`. In more advanced cases (e.g. when you heavily depend on `@EJB`&#39;s attributes like `beanName`, `lookup` or `beanInterface`) than in order to use `@Inject` you would need to define a `@Producer` field or method.\r\n\r\nThese resources might be helpful to understand the differences between `@EJB` and `@Produces` and how to get the best of them:\r\n\r\nAntonio Goncalves&#39; blog:  \r\n[CDI Part I][1]  \r\n[CDI Part II][2]  \r\n[CDI Part III][3]  \r\n\r\nJBoss Weld documentation:  \r\n[CDI and the Java EE ecosystem][4]\r\n\r\nStackOverflow:  \r\nhttps://stackoverflow.com/questions/7920123/inject-ejb-bean-based-on-conditions/7923159#7923159\r\n\r\n  [1]: http://agoncal.wordpress.com/2011/04/07/injection-with-cdi-part-i/\r\n  [2]: http://agoncal.wordpress.com/2011/05/03/injection-with-cdi-part-ii/\r\n  [3]: http://agoncal.wordpress.com/2011/09/25/injection-with-cdi-part-iii/\r\n  [4]: http://docs.jboss.org/weld/reference/latest/en-US/html/part4.html","title":"Should I use @EJB or @Inject","body":"<p>The <code>@EJB</code> is used to inject EJB's only and is available for quite some time now. <code>@Inject</code> can inject any managed bean and is a part of the new CDI specification (since Java EE 6).</p>\n<p>In simple cases you can simply change <code>@EJB</code> to <code>@Inject</code>. In more advanced cases (e.g. when you heavily depend on <code>@EJB</code>'s attributes like <code>beanName</code>, <code>lookup</code> or <code>beanInterface</code>) than in order to use <code>@Inject</code> you would need to define a <code>@Producer</code> field or method.</p>\n<p>These resources might be helpful to understand the differences between <code>@EJB</code> and <code>@Produces</code> and how to get the best of them:</p>\n<p>Antonio Goncalves' blog:<br />\n<a href=\"http://agoncal.wordpress.com/2011/04/07/injection-with-cdi-part-i/\" rel=\"nofollow noreferrer\">CDI Part I</a><br />\n<a href=\"http://agoncal.wordpress.com/2011/05/03/injection-with-cdi-part-ii/\" rel=\"nofollow noreferrer\">CDI Part II</a><br />\n<a href=\"http://agoncal.wordpress.com/2011/09/25/injection-with-cdi-part-iii/\" rel=\"nofollow noreferrer\">CDI Part III</a></p>\n<p>JBoss Weld documentation:<br />\n<a href=\"http://docs.jboss.org/weld/reference/latest/en-US/html/part4.html\" rel=\"nofollow noreferrer\">CDI and the Java EE ecosystem</a></p>\n<p>StackOverflow:<br />\n<a href=\"https://stackoverflow.com/questions/7920123/inject-ejb-bean-based-on-conditions/7923159#7923159\">Inject @EJB bean based on conditions</a></p>\n"},{"comments":[{"owner":{"account_id":2314766,"reputation":13150,"user_id":2032064,"accept_rate":100,"display_name":"Mifeet"},"score":1,"creation_date":1449937720,"post_id":12736096,"comment_id":56226125,"body_markdown":"While this may theoretically answer the question, it would be preferable to include the essential parts of the answer here, and provide the link for reference. That way this answer would be valuable even now when the link is dead.","body":"While this may theoretically answer the question, it would be preferable to include the essential parts of the answer here, and provide the link for reference. That way this answer would be valuable even now when the link is dead."},{"owner":{"account_id":1862192,"reputation":1849,"user_id":1686575,"accept_rate":65,"display_name":"John Manko"},"score":1,"creation_date":1455897295,"post_id":12736096,"comment_id":58709786,"body_markdown":"https://web.archive.org/web/20140812065624/http://www.seamframework.org/107780.lace","body":"<a href=\"https://web.archive.org/web/20140812065624/http://www.seamframework.org/107780.lace\" rel=\"nofollow noreferrer\">web.archive.org/web/20140812065624/http://www.seamframework.&zwnj;&#8203;org/&hellip;</a>"}],"tags":[],"owner":{"account_id":1862192,"reputation":1849,"user_id":1686575,"accept_rate":65,"display_name":"John Manko"},"comment_count":2,"down_vote_count":0,"up_vote_count":12,"is_accepted":false,"score":12,"last_activity_date":1455897632,"creation_date":1349385435,"answer_id":12736096,"question_id":8138232,"body_markdown":"Here is a good discussion on the topic.  Gavin King recommends @Inject over @EJB for non remote EJBs.  \r\n\r\nhttp://www.seamframework.org/107780.lace\r\n\r\nor \r\n\r\nhttps://web.archive.org/web/20140812065624/http://www.seamframework.org/107780.lace\r\n\r\n&gt; Re: Injecting with @EJB or @Inject?\r\n&gt; \t\r\n&gt; 26. Nov 2009, 20:48 America/New_York | Link Gavin King \t\r\n&gt; \r\n&gt; That error is very strange, since EJB local references should always\r\n&gt; be serializable. Bug in glassfish, perhaps?\r\n&gt; \r\n&gt; Basically, @Inject is always better, since:\r\n&gt; \r\n&gt;     it is more typesafe,\r\n&gt;     it supports @Alternatives, and\r\n&gt;     it is aware of the scope of the injected object.\r\n&gt; \r\n&gt; I recommend against the use of @EJB except for declaring references to\r\n&gt; remote EJBs.\r\n\r\nand\r\n\r\n&gt; Re: Injecting with @EJB or @Inject?\r\n&gt; \t\r\n&gt; 29. Nov 2009, 17:42 America/New_York | Link Gavin King\r\n&gt; \t\r\n&gt; \r\n&gt;     Does it mean @EJB better with remote EJBs? \r\n&gt; \r\n&gt; For a remote EJB, we can&#39;t declare metadata like qualifiers,\r\n&gt; @Alternative, etc, on the bean class, since the client simply isn&#39;t\r\n&gt; going to have access to that metadata. Furthermore, some additional\r\n&gt; metadata must be specified that we don&#39;t need for the local case\r\n&gt; (global JNDI name of whatever). So all that stuff needs to go\r\n&gt; somewhere else: namely the @Produces declaration.\r\n\r\n","title":"Should I use @EJB or @Inject","body":"<p>Here is a good discussion on the topic.  Gavin King recommends @Inject over @EJB for non remote EJBs.  </p>\n\n<p><a href=\"http://www.seamframework.org/107780.lace\" rel=\"noreferrer\">http://www.seamframework.org/107780.lace</a></p>\n\n<p>or </p>\n\n<p><a href=\"https://web.archive.org/web/20140812065624/http://www.seamframework.org/107780.lace\" rel=\"noreferrer\">https://web.archive.org/web/20140812065624/http://www.seamframework.org/107780.lace</a></p>\n\n<blockquote>\n  <p>Re: Injecting with @EJB or @Inject?</p>\n  \n  <ol start=\"26\">\n  <li>Nov 2009, 20:48 America/New_York | Link Gavin King    </li>\n  </ol>\n  \n  <p>That error is very strange, since EJB local references should always\n  be serializable. Bug in glassfish, perhaps?</p>\n  \n  <p>Basically, @Inject is always better, since:</p>\n\n<pre><code>it is more typesafe,\nit supports @Alternatives, and\nit is aware of the scope of the injected object.\n</code></pre>\n  \n  <p>I recommend against the use of @EJB except for declaring references to\n  remote EJBs.</p>\n</blockquote>\n\n<p>and</p>\n\n<blockquote>\n  <p>Re: Injecting with @EJB or @Inject?</p>\n  \n  <ol start=\"29\">\n  <li><p>Nov 2009, 17:42 America/New_York | Link Gavin King</p>\n  \n  <p>Does it mean @EJB better with remote EJBs? </p></li>\n  </ol>\n  \n  <p>For a remote EJB, we can't declare metadata like qualifiers,\n  @Alternative, etc, on the bean class, since the client simply isn't\n  going to have access to that metadata. Furthermore, some additional\n  metadata must be specified that we don't need for the local case\n  (global JNDI name of whatever). So all that stuff needs to go\n  somewhere else: namely the @Produces declaration.</p>\n</blockquote>\n"},{"comments":[{"owner":{"account_id":309077,"reputation":24064,"user_id":621338,"accept_rate":90,"display_name":"necromancer"},"score":0,"creation_date":1423570425,"post_id":16505384,"comment_id":45193089,"body_markdown":"@MartijnBurger I don&#39;t have the code handy, nor a Java EE environment handy. Just create 2 Java classes and `@Inject` them into each other&#39;s public fields. If that works then my answer is wrong. If that does not work, then my answer is correct so far. Next change the `@Inject` to `@EJB` (and possibly annotate the classes themselves? I forget.). Then the cyclic mutual injection should work fine. That&#39;s why I switched from `@Inject` to `@EJB`. Hope this makes sense.","body":"@MartijnBurger I don&#39;t have the code handy, nor a Java EE environment handy. Just create 2 Java classes and <code>@Inject</code> them into each other&#39;s public fields. If that works then my answer is wrong. If that does not work, then my answer is correct so far. Next change the <code>@Inject</code> to <code>@EJB</code> (and possibly annotate the classes themselves? I forget.). Then the cyclic mutual injection should work fine. That&#39;s why I switched from <code>@Inject</code> to <code>@EJB</code>. Hope this makes sense."},{"owner":{"account_id":462919,"reputation":7373,"user_id":865505,"accept_rate":98,"display_name":"Martijn Burger"},"score":0,"creation_date":1423573770,"post_id":16505384,"comment_id":45195046,"body_markdown":"I created two pojo&#39;s and injected the pojo&#39;s into each other. Works without problems in my config (WildFly 8.2 = CDI 1.2)","body":"I created two pojo&#39;s and injected the pojo&#39;s into each other. Works without problems in my config (WildFly 8.2 = CDI 1.2)"},{"owner":{"account_id":309077,"reputation":24064,"user_id":621338,"accept_rate":90,"display_name":"necromancer"},"score":1,"creation_date":1423640387,"post_id":16505384,"comment_id":45226033,"body_markdown":"Thanks @MartijnBurger, I&#39;ll confirm that, and in the meanwhile add a note of caution to my answer.","body":"Thanks @MartijnBurger, I&#39;ll confirm that, and in the meanwhile add a note of caution to my answer."},{"owner":{"account_id":1116645,"reputation":1415,"user_id":1105832,"display_name":"JanM"},"score":0,"creation_date":1441463623,"post_id":16505384,"comment_id":52695372,"body_markdown":"No exactly sure what you wanted to achieve, but this probably does exactly what you wanted and without a circular dependency. http://tomee.apache.org/examples-trunk/async-postconstruct/README.html. Also asynchronous CDI events could be a cleaner way to go (depending on the requirements).","body":"No exactly sure what you wanted to achieve, but this probably does exactly what you wanted and without a circular dependency. <a href=\"http://tomee.apache.org/examples-trunk/async-postconstruct/README.html\" rel=\"nofollow noreferrer\">tomee.apache.org/examples-trunk/async-postconstruct/README.h&zwnj;&#8203;tml</a>. Also asynchronous CDI events could be a cleaner way to go (depending on the requirements)."}],"tags":[],"owner":{"account_id":309077,"reputation":24064,"user_id":621338,"accept_rate":90,"display_name":"necromancer"},"comment_count":4,"down_vote_count":1,"up_vote_count":17,"is_accepted":false,"score":16,"last_activity_date":1423640489,"creation_date":1368346075,"answer_id":16505384,"question_id":8138232,"body_markdown":"**Update:** This answer may be incorrect or out of date. Please see comments for details.\r\n\r\nI switched from `@Inject` to `@EJB` because `@EJB` allows circular injection whereas `@Inject` pukes on it.\r\n\r\nDetails: I needed `@PostConstruct` to call an `@Asynchronous` method but it would do so synchronously. The only way to make the asynchronous call was to have the original call a method of another bean and have it call back the method of the original bean. To do this each bean needed a reference to the other -- thus circular. `@Inject` failed for this task whereas `@EJB` worked. ","title":"Should I use @EJB or @Inject","body":"<p><strong>Update:</strong> This answer may be incorrect or out of date. Please see comments for details.</p>\n\n<p>I switched from <code>@Inject</code> to <code>@EJB</code> because <code>@EJB</code> allows circular injection whereas <code>@Inject</code> pukes on it.</p>\n\n<p>Details: I needed <code>@PostConstruct</code> to call an <code>@Asynchronous</code> method but it would do so synchronously. The only way to make the asynchronous call was to have the original call a method of another bean and have it call back the method of the original bean. To do this each bean needed a reference to the other -- thus circular. <code>@Inject</code> failed for this task whereas <code>@EJB</code> worked. </p>\n"},{"tags":[],"owner":{"account_id":2768061,"reputation":288,"user_id":2383279,"accept_rate":67,"display_name":"javierZanetti"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1465760980,"creation_date":1465760980,"answer_id":37778454,"question_id":8138232,"body_markdown":"Injection already existed in Java EE 5 with the @Resource, @PersistentUnit or @EJB annotations, for example.\r\nBut it was limited to certain resources (datasource, EJB . . .) and into certain components (Servlets, EJBs, JSF backing\r\nbean . . .). With CDI you can inject nearly anything anywhere thanks to the @Inject annotation.","title":"Should I use @EJB or @Inject","body":"<p>Injection already existed in Java EE 5 with the @Resource, @PersistentUnit or @EJB annotations, for example.\nBut it was limited to certain resources (datasource, EJB . . .) and into certain components (Servlets, EJBs, JSF backing\nbean . . .). With CDI you can inject nearly anything anywhere thanks to the @Inject annotation.</p>\n"},{"tags":[],"owner":{"account_id":4288660,"reputation":471,"user_id":3505579,"accept_rate":50,"display_name":"ken"},"comment_count":0,"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1502175062,"creation_date":1502175062,"answer_id":45561198,"question_id":8138232,"body_markdown":"It may also be usefull to understand the difference in term of Session Bean Identity when using @EJB and @Inject.\r\nAccording to the specifications the following code will always be `true`:\r\n\r\n    @EJB Cart cart1;\r\n    @EJB Cart cart2;\r\n    … if (cart1.equals(cart2)) { // this test must return true ...}\r\n\r\nUsing @Inject instead of @EJB there is not the same.\r\n\r\nsee also [stateless session beans identity][1] for further info\r\n\r\n\r\n  [1]: https://stackoverflow.com/questions/45460383/stateless-session-beans-identity-with-ejb-and-inject","title":"Should I use @EJB or @Inject","body":"<p>It may also be usefull to understand the difference in term of Session Bean Identity when using @EJB and @Inject.\nAccording to the specifications the following code will always be <code>true</code>:</p>\n\n<pre><code>@EJB Cart cart1;\n@EJB Cart cart2;\n… if (cart1.equals(cart2)) { // this test must return true ...}\n</code></pre>\n\n<p>Using @Inject instead of @EJB there is not the same.</p>\n\n<p>see also <a href=\"https://stackoverflow.com/questions/45460383/stateless-session-beans-identity-with-ejb-and-inject\">stateless session beans identity</a> for further info</p>\n"},{"tags":[],"owner":{"account_id":6773822,"reputation":349,"user_id":5216331,"display_name":"Chris"},"comment_count":0,"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1632420247,"creation_date":1632420247,"answer_id":69304933,"question_id":8138232,"body_markdown":"use @EBJ with EJB&#39;s.  This is for creating a separated business logic layer that is independent of the types of interfaces (Tiered Applications).   \r\n\r\nThis (used correctly) allows the business logic to be modified and deployed separately from the (multiple) user-interface applications without loss of availability.\r\n\r\n\r\n\r\n","title":"Should I use @EJB or @Inject","body":"<p>use @EBJ with EJB's.  This is for creating a separated business logic layer that is independent of the types of interfaces (Tiered Applications).</p>\n<p>This (used correctly) allows the business logic to be modified and deployed separately from the (multiple) user-interface applications without loss of availability.</p>\n"},{"tags":[],"owner":{"account_id":22124063,"reputation":11,"user_id":16376769,"display_name":"behabtu Getnet"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1652869749,"creation_date":1652777369,"answer_id":72270924,"question_id":8138232,"body_markdown":"when you heavily depend on @EJB&#39;s attributes like beanName, lookup or beanInterface) than in order to use @Inject you would need to define a @Producer field or method.","title":"Should I use @EJB or @Inject","body":"<p>when you heavily depend on @EJB's attributes like beanName, lookup or beanInterface) than in order to use @Inject you would need to define a @Producer field or method.</p>\n"},{"tags":[],"owner":{"account_id":2836571,"reputation":61,"user_id":2437067,"display_name":"zenon"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1666878279,"creation_date":1666878279,"answer_id":74223125,"question_id":8138232,"body_markdown":"@Inject is a documented annotation, so IDEA knows how to process it and you can see a different colours in a code. @EJB - no.","title":"Should I use @EJB or @Inject","body":"<p>@Inject is a documented annotation, so IDEA knows how to process it and you can see a different colours in a code. @EJB - no.</p>\n"}],"owner":{"account_id":205346,"reputation":48091,"user_id":454049,"accept_rate":72,"display_name":"LuckyLuke"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":121040,"favorite_count":0,"down_vote_count":0,"up_vote_count":167,"accepted_answer_id":8138452,"answer_count":9,"score":167,"last_activity_date":1692099158,"creation_date":1321368760,"question_id":8138232,"body_markdown":"I have found this question: https://stackoverflow.com/questions/5889767/what-is-the-difference-between-inject-and-ejb but I did not get any wiser. I have not done Java EE before nor do I have experience with dependency injection so I do not understand what I should use?\r\n\r\nIs `@EJB` an old way of injecting? Is the injection done by the EJB container when using this annotation while using `@Inject` use the new CDI framework? Is that the difference and should I be using `@Inject` instead of `@EJB` if this is the case?","title":"Should I use @EJB or @Inject","body":"<p>I have found this question: <a href=\"https://stackoverflow.com/questions/5889767/what-is-the-difference-between-inject-and-ejb\">What is the difference between @Inject and @EJB</a> but I did not get any wiser. I have not done Java EE before nor do I have experience with dependency injection so I do not understand what I should use?</p>\n<p>Is <code>@EJB</code> an old way of injecting? Is the injection done by the EJB container when using this annotation while using <code>@Inject</code> use the new CDI framework? Is that the difference and should I be using <code>@Inject</code> instead of <code>@EJB</code> if this is the case?</p>\n"},{"tags":["java"],"owner":{"account_id":28881303,"reputation":13,"user_id":22120727,"display_name":"Elvio Prado"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":76,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1692099103,"creation_date":1692099103,"question_id":76905585,"body_markdown":"I have tried to read data from ESP32 via Bluetooth in Android Studio. But what I could get so far is write(send) the content of data from app to ESP32. How Can I read data and show in app? \r\nBecause when I run the code below and call the function &quot;receber&quot;(mmInStream) through a button, the app freezes.\r\n\r\n\r\n```java\r\n\r\npublic ConnectedThread(BluetoothSocket socket) {\r\n    mmSocket = socket;\r\n    InputStream tmpIn = null;\r\n    OutputStream tmpOut = null;\r\n    try {\r\n         tmpIn = socket.getInputStream();\r\n    } catch (IOException e) {\r\n         Log.e(TAG, &quot;Error occurred when creating input stream&quot;, e);\r\n    }\r\n    try {\r\n         tmpOut = socket.getOutputStream();\r\n    } catch (IOException e) {\r\n         Log.e(TAG, &quot;Error occurred when creating output stream&quot;, e);\r\n    }\r\n         mmInStream = tmpIn;\r\n         mmOutStream = tmpOut;\r\n    }\r\n\r\npublic void enviar(String dadosEnviar) {\r\n            byte[] msgBuffer = dadosEnviar.getBytes();\r\n            try {\r\n                mmOutStream.write(msgBuffer);\r\n\r\n\r\n              \r\n            } catch (IOException e) {\r\n\r\n               \r\n            }\r\n        }\r\n\r\n        public String receber(String dadosLidos) {\r\n\r\n            byte[] msgBuffer = dadosLidos.getBytes();\r\n            try {\r\n\r\n                int bytes = mmInStream.read(msgBuffer);\r\n                String readMessage = new String(msgBuffer, 0, bytes);\r\n                Toast.makeText(MainActivity.this, readMessage, Toast.LENGTH_SHORT).show();\r\n\r\n\r\n                \r\n            } catch (IOException e) {\r\n\r\n                \r\n\r\n\r\n            }\r\n            return dadosLidos;\r\n```\r\n\r\n","title":"How to read data from ESP32 via Bluetooth in Android Studio","body":"<p>I have tried to read data from ESP32 via Bluetooth in Android Studio. But what I could get so far is write(send) the content of data from app to ESP32. How Can I read data and show in app?\nBecause when I run the code below and call the function &quot;receber&quot;(mmInStream) through a button, the app freezes.</p>\n<pre class=\"lang-java prettyprint-override\"><code>\npublic ConnectedThread(BluetoothSocket socket) {\n    mmSocket = socket;\n    InputStream tmpIn = null;\n    OutputStream tmpOut = null;\n    try {\n         tmpIn = socket.getInputStream();\n    } catch (IOException e) {\n         Log.e(TAG, &quot;Error occurred when creating input stream&quot;, e);\n    }\n    try {\n         tmpOut = socket.getOutputStream();\n    } catch (IOException e) {\n         Log.e(TAG, &quot;Error occurred when creating output stream&quot;, e);\n    }\n         mmInStream = tmpIn;\n         mmOutStream = tmpOut;\n    }\n\npublic void enviar(String dadosEnviar) {\n            byte[] msgBuffer = dadosEnviar.getBytes();\n            try {\n                mmOutStream.write(msgBuffer);\n\n\n              \n            } catch (IOException e) {\n\n               \n            }\n        }\n\n        public String receber(String dadosLidos) {\n\n            byte[] msgBuffer = dadosLidos.getBytes();\n            try {\n\n                int bytes = mmInStream.read(msgBuffer);\n                String readMessage = new String(msgBuffer, 0, bytes);\n                Toast.makeText(MainActivity.this, readMessage, Toast.LENGTH_SHORT).show();\n\n\n                \n            } catch (IOException e) {\n\n                \n\n\n            }\n            return dadosLidos;\n</code></pre>\n"},{"tags":["java","spring","rest","validation"],"comments":[{"owner":{"account_id":5404,"reputation":22100,"user_id":8681,"accept_rate":67,"display_name":"Jorn"},"score":0,"creation_date":1692098436,"post_id":76905352,"comment_id":135575798,"body_markdown":"You&#39;re already using `@Valid`. The same validation library offers annotations to define *what* needs to be validated. You can find which ones and how to use them in the same article that told you to use `@Valid` (and many thousands more).","body":"You&#39;re already using <code>@Valid</code>. The same validation library offers annotations to define <i>what</i> needs to be validated. You can find which ones and how to use them in the same article that told you to use <code>@Valid</code> (and many thousands more)."},{"owner":{"account_id":92673,"reputation":10568,"user_id":253898,"accept_rate":92,"display_name":"Linora"},"score":0,"creation_date":1692098877,"post_id":76905352,"comment_id":135575892,"body_markdown":"Yes, you are correct that I&#39;m already using some validation. But as stated in the original post, I need to do some validation on the json before it is converted into a class. No validation library can do that for me (as I&#39;m aware of).","body":"Yes, you are correct that I&#39;m already using some validation. But as stated in the original post, I need to do some validation on the json before it is converted into a class. No validation library can do that for me (as I&#39;m aware of)."},{"owner":{"account_id":3097035,"reputation":1105,"user_id":2622026,"accept_rate":71,"display_name":"hermit"},"score":0,"creation_date":1692100408,"post_id":76905352,"comment_id":135576221,"body_markdown":"Seems more like a Front end validation problem.","body":"Seems more like a Front end validation problem."},{"owner":{"account_id":5404,"reputation":22100,"user_id":8681,"accept_rate":67,"display_name":"Jorn"},"score":1,"creation_date":1692106462,"post_id":76905352,"comment_id":135577385,"body_markdown":"@hermit Front end only validation is never enough. Because you shouldn&#39;t assume that your front end is the only user of your backend, even if the API isn&#39;t documented.","body":"@hermit Front end only validation is never enough. Because you shouldn&#39;t assume that your front end is the only user of your backend, even if the API isn&#39;t documented."}],"answers":[{"comments":[{"owner":{"account_id":92673,"reputation":10568,"user_id":253898,"accept_rate":92,"display_name":"Linora"},"score":0,"creation_date":1692099718,"post_id":76905583,"comment_id":135576076,"body_markdown":"Thansk for your answer. I am using some contraints in some of the underlying classes, that is why the @Valid&#39;s are there. Some may be unnecessary tho.\n\nHowever this will not solve my issue as f.ex. the &#39;select&#39; field can be empty. That is why I need to add some validation of the json input BEFORE it is converted to the class as the conversion can emit some data if there is an error in the json.","body":"Thansk for your answer. I am using some contraints in some of the underlying classes, that is why the @Valid&#39;s are there. Some may be unnecessary tho.  However this will not solve my issue as f.ex. the &#39;select&#39; field can be empty. That is why I need to add some validation of the json input BEFORE it is converted to the class as the conversion can emit some data if there is an error in the json."},{"owner":{"account_id":23598607,"reputation":63,"user_id":17635436,"display_name":"Łukasz Mączka"},"score":0,"creation_date":1692105915,"post_id":76905583,"comment_id":135577279,"body_markdown":"By the example and the explanation I don&#39;t think I understand correctly, but when you use `@NotEmpty` for a collection it checks for two things, first if it is null and if the size is greater than zero. If a validation fails, you still need a class that is a `@ControllerAdvice` together with `@ExceptionHandler` method to catch `MethodArgumentNotValidException`,\nthen you need to extract error messages and present them in a &quot;nice way&quot; for user by returning them in a ResponseEntity for example.","body":"By the example and the explanation I don&#39;t think I understand correctly, but when you use <code>@NotEmpty</code> for a collection it checks for two things, first if it is null and if the size is greater than zero. If a validation fails, you still need a class that is a <code>@ControllerAdvice</code> together with <code>@ExceptionHandler</code> method to catch <code>MethodArgumentNotValidException</code>, then you need to extract error messages and present them in a &quot;nice way&quot; for user by returning them in a ResponseEntity for example."}],"tags":[],"owner":{"account_id":23598607,"reputation":63,"user_id":17635436,"display_name":"Łukasz Mączka"},"comment_count":2,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1692099073,"creation_date":1692099073,"answer_id":76905583,"question_id":76905352,"body_markdown":"By what I see here you are using a lot of @Valid that you propably don&#39;t need. \r\n@Valid annotation lets you &#39;run&#39; validator on objects and check if they met validation criteria made by you using annotations. So in you case this will propably solve your issue.\r\n\r\n    public class Search {\r\n\r\n        @NotEmpty(message = &quot;Message for user&quot;)\r\n        private List&lt;String&gt; select = new ArrayList&lt;&gt;();\r\n\r\n        @NotEmpty(message = &quot;Message for user&quot;)\r\n        private List&lt;/* Use @Valid here if Filter class has some validation */Filter&gt; filters = new ArrayList&lt;&gt;();\r\n\r\n\r\n        public Search(List&lt;String&gt; select, List&lt;Filter&gt; filters) {\r\n            this.select = select;\r\n            this.filters = filters;\r\n        }\r\n    }\r\n\r\nAnd your contoller: \r\n\r\n    test(@NotNull String id, @Valid Search search) {}\r\n\r\n","title":"Spring rest validation of a custom class","body":"<p>By what I see here you are using a lot of @Valid that you propably don't need.\n@Valid annotation lets you 'run' validator on objects and check if they met validation criteria made by you using annotations. So in you case this will propably solve your issue.</p>\n<pre><code>public class Search {\n\n    @NotEmpty(message = &quot;Message for user&quot;)\n    private List&lt;String&gt; select = new ArrayList&lt;&gt;();\n\n    @NotEmpty(message = &quot;Message for user&quot;)\n    private List&lt;/* Use @Valid here if Filter class has some validation */Filter&gt; filters = new ArrayList&lt;&gt;();\n\n\n    public Search(List&lt;String&gt; select, List&lt;Filter&gt; filters) {\n        this.select = select;\n        this.filters = filters;\n    }\n}\n</code></pre>\n<p>And your contoller:</p>\n<pre><code>test(@NotNull String id, @Valid Search search) {}\n</code></pre>\n"}],"owner":{"account_id":92673,"reputation":10568,"user_id":253898,"accept_rate":92,"display_name":"Linora"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":47,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":1,"score":0,"last_activity_date":1692099073,"creation_date":1692097227,"question_id":76905352,"body_markdown":"I have a RestController method that takes a json string input (converted to a Search class):\r\n\r\n    results(@NotNull @Valid String id, @Valid Search search) {}\r\n\r\nHow can I add validation of the contents of this class? If there is a mistake in the json input I will not be able to know it as the fields will just be empty. I want to return a response to the client if there is a mistake.\r\n\r\nF.ex. there is a field called &#39;select&#39;. If there is a typo and they put &#39;seletc&#39; in the json, the select field in the class will just be null and no error is found. So I want to do some validation of the json parameter BEFORE spring converts the json to a class. What is the best approach to do this?\r\n\r\n\r\nThe Search class looks like this:\r\n\r\n    public class Search {\r\n\r\n    @Valid\r\n    private List&lt;String&gt; select = new ArrayList&lt;&gt;();\r\n\r\n    @Valid\r\n    private List&lt;@Valid Filter&gt; filters = new ArrayList&lt;&gt;();\r\n\r\n\r\n    public Search(List&lt;String&gt; select, List&lt;@Valid Filter&gt; filters) {\r\n      this.select = select;\r\n      this.filters = filters;\r\n    }","title":"Spring rest validation of a custom class","body":"<p>I have a RestController method that takes a json string input (converted to a Search class):</p>\n<pre><code>results(@NotNull @Valid String id, @Valid Search search) {}\n</code></pre>\n<p>How can I add validation of the contents of this class? If there is a mistake in the json input I will not be able to know it as the fields will just be empty. I want to return a response to the client if there is a mistake.</p>\n<p>F.ex. there is a field called 'select'. If there is a typo and they put 'seletc' in the json, the select field in the class will just be null and no error is found. So I want to do some validation of the json parameter BEFORE spring converts the json to a class. What is the best approach to do this?</p>\n<p>The Search class looks like this:</p>\n<pre><code>public class Search {\n\n@Valid\nprivate List&lt;String&gt; select = new ArrayList&lt;&gt;();\n\n@Valid\nprivate List&lt;@Valid Filter&gt; filters = new ArrayList&lt;&gt;();\n\n\npublic Search(List&lt;String&gt; select, List&lt;@Valid Filter&gt; filters) {\n  this.select = select;\n  this.filters = filters;\n}\n</code></pre>\n"},{"tags":["java","android","exception","kotlin","code-generation"],"comments":[{"owner":{"account_id":12107389,"reputation":733,"user_id":8845653,"display_name":"Josep Bigorra"},"score":0,"creation_date":1535628557,"post_id":52081383,"comment_id":91141836,"body_markdown":"So I split the function in two and the problem got solved. Turns out too much code in one function will bug the compiler! Keep that in mind as a heads up! I can&#39;t figure out how to mark as solved :)","body":"So I split the function in two and the problem got solved. Turns out too much code in one function will bug the compiler! Keep that in mind as a heads up! I can&#39;t figure out how to mark as solved :)"}],"answers":[{"tags":[],"owner":{"account_id":415780,"reputation":6821,"user_id":790785,"accept_rate":70,"display_name":"Atharva"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1536832675,"creation_date":1536832675,"answer_id":52311240,"question_id":52081383,"body_markdown":"This type of issue usually occurs when the Kotlin has a complex function definition. For example, declaring a class that inherits from AsyncTask. Best solution is try to pull some of this complexity out of the function call.","title":"(Kotlin) Backend Internal error: Exception during code generation","body":"<p>This type of issue usually occurs when the Kotlin has a complex function definition. For example, declaring a class that inherits from AsyncTask. Best solution is try to pull some of this complexity out of the function call.</p>\n"},{"tags":[],"owner":{"account_id":974734,"reputation":2864,"user_id":4957915,"display_name":"solamour"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1539967772,"creation_date":1539967772,"answer_id":52896771,"question_id":52081383,"body_markdown":"As for my case, `java.lang.IllegalStateException: Backend Internal error` went away when I moved some of the private functions and properties from a big class to other parts of the project. The class wasn&#39;t big initially, but I kept adding things without properly organizing.","title":"(Kotlin) Backend Internal error: Exception during code generation","body":"<p>As for my case, <code>java.lang.IllegalStateException: Backend Internal error</code> went away when I moved some of the private functions and properties from a big class to other parts of the project. The class wasn't big initially, but I kept adding things without properly organizing.</p>\n"},{"tags":[],"owner":{"account_id":13227889,"reputation":137,"user_id":9552485,"display_name":"BraveEvidence"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1542093517,"creation_date":1542093517,"answer_id":53275759,"question_id":52081383,"body_markdown":"I was getting the same error in my Android Project.\r\nThe cause of the error was i taking my `recyclerview&#39;s` id from `xml` and just pasted the id in my code without apply any kind of property or calling any function on it.","title":"(Kotlin) Backend Internal error: Exception during code generation","body":"<p>I was getting the same error in my Android Project.\nThe cause of the error was i taking my <code>recyclerview's</code> id from <code>xml</code> and just pasted the id in my code without apply any kind of property or calling any function on it.</p>\n"},{"tags":[],"owner":{"account_id":10958086,"reputation":99,"user_id":8052227,"display_name":"AndyGeek"},"comment_count":0,"down_vote_count":2,"up_vote_count":8,"is_accepted":false,"score":6,"last_activity_date":1544020164,"creation_date":1544020164,"answer_id":53634556,"question_id":52081383,"body_markdown":"**Finally I Solved that Issue** *after Given 3 hours over it and Tried Almost everything*\r\n \r\n&gt;Reason : This Issue may be generate whenever you had taken any **XML LAYOUT ID** On Java File and you are not using it further.\r\n**this Garbage XML ID on Java File leads to this Error** Named As &quot;Backend Internal error: Exception during code generation Android&quot;\r\n\r\n**How Do Solve** : well, you can find your garbage XML ID from That Error Itself...\r\nJust Copy paste your error on Notepad file and read it carefully , you will find **XML ID NAME** in near by file location in error line number , Thanks :)","title":"(Kotlin) Backend Internal error: Exception during code generation","body":"<p><strong>Finally I Solved that Issue</strong> <em>after Given 3 hours over it and Tried Almost everything</em></p>\n\n<blockquote>\n  <p>Reason : This Issue may be generate whenever you had taken any <strong>XML LAYOUT ID</strong> On Java File and you are not using it further.\n  <strong>this Garbage XML ID on Java File leads to this Error</strong> Named As \"Backend Internal error: Exception during code generation Android\"</p>\n</blockquote>\n\n<p><strong>How Do Solve</strong> : well, you can find your garbage XML ID from That Error Itself...\nJust Copy paste your error on Notepad file and read it carefully , you will find <strong>XML ID NAME</strong> in near by file location in error line number , Thanks :)</p>\n"},{"comments":[{"owner":{"account_id":1164600,"reputation":5578,"user_id":1143482,"accept_rate":63,"display_name":"jpganz18"},"score":0,"creation_date":1560348458,"post_id":53709161,"comment_id":99707815,"body_markdown":"Is it a dependency? I dont even have it and Im getting that error","body":"Is it a dependency? I dont even have it and Im getting that error"},{"owner":{"account_id":1373152,"reputation":7553,"user_id":1307690,"accept_rate":62,"display_name":"Roman Nazarevych"},"score":1,"creation_date":1560355280,"post_id":53709161,"comment_id":99711850,"body_markdown":"Yes, this is a dependency conflict, but there might be other causes of this exception.","body":"Yes, this is a dependency conflict, but there might be other causes of this exception."},{"owner":{"account_id":5496842,"reputation":9244,"user_id":4367683,"accept_rate":100,"display_name":"Machado"},"score":1,"creation_date":1588199301,"post_id":53709161,"comment_id":108812326,"body_markdown":"I my case I had this issue with the Kotlin compiler extension for Jetpack Compose.","body":"I my case I had this issue with the Kotlin compiler extension for Jetpack Compose."}],"tags":[],"owner":{"account_id":1373152,"reputation":7553,"user_id":1307690,"accept_rate":62,"display_name":"Roman Nazarevych"},"comment_count":3,"down_vote_count":2,"up_vote_count":15,"is_accepted":true,"score":13,"last_activity_date":1544457139,"creation_date":1544457139,"answer_id":53709161,"question_id":52081383,"body_markdown":"I had the same problem, because I was using inconsistent version of Anko. With kotlin **1.3.x** you have to use this [v0.10.8][1] version of anko or newer.\r\n\r\n\r\n  [1]: https://github.com/Kotlin/anko/releases/tag/v0.10.8","title":"(Kotlin) Backend Internal error: Exception during code generation","body":"<p>I had the same problem, because I was using inconsistent version of Anko. With kotlin <strong>1.3.x</strong> you have to use this <a href=\"https://github.com/Kotlin/anko/releases/tag/v0.10.8\" rel=\"noreferrer\">v0.10.8</a> version of anko or newer.</p>\n"},{"tags":[],"owner":{"account_id":11652260,"reputation":1,"user_id":8533187,"display_name":"Ivan Stepanov"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1562845011,"creation_date":1562845011,"answer_id":56988292,"question_id":52081383,"body_markdown":"I too was getting the same error in my Android Project. But in my project i was using when inside lambda and i try return not correct type in 4 line \r\n\r\n&lt;!-- begin snippet: js hide: false console: true babel: false --&gt;\r\n\r\n&lt;!-- language: lang-html --&gt;\r\n\r\n        private val innChecker: (s: Editable?) -&gt; String? = { s -&gt;\r\n            when {\r\n                CheckUtils.checkZero(s.toString()) -&gt; {\r\n                    if (!isBudget) textViewRed\r\n                    null\r\n                }\r\n                CheckUtils.checkAllZero(s.toString()) -&gt; getString(R.string.not_all_zero)\r\n                CheckUtils.checkStartZeroZero(s.toString()) -&gt; getString(R.string.two_first_not_zero)\r\n                CheckUtils.checkInn(s.toString(), isBudget, { textViewRedErrorKpp.isEnabled = it }, { textViewRedErrorKpp.setTextToEditText(it) }) -&gt; {\r\n                    if (s?.length == 10) mPaymentRecipientPresenter?.tryFindInn()\r\n                    when {\r\n                        isHardChecked -&gt; {\r\n                            null\r\n                        }\r\n                        else -&gt; null\r\n                    }\r\n\r\n\r\n                }\r\n                else -&gt; getString(R.string.enter_5_10_12_or_0)\r\n            }\r\n\r\n        }\r\n\r\n&lt;!-- end snippet --&gt;\r\n\r\n","title":"(Kotlin) Backend Internal error: Exception during code generation","body":"<p>I too was getting the same error in my Android Project. But in my project i was using when inside lambda and i try return not correct type in 4 line </p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-html lang-html prettyprint-override\"><code>    private val innChecker: (s: Editable?) -&gt; String? = { s -&gt;\r\n        when {\r\n            CheckUtils.checkZero(s.toString()) -&gt; {\r\n                if (!isBudget) textViewRed\r\n                null\r\n            }\r\n            CheckUtils.checkAllZero(s.toString()) -&gt; getString(R.string.not_all_zero)\r\n            CheckUtils.checkStartZeroZero(s.toString()) -&gt; getString(R.string.two_first_not_zero)\r\n            CheckUtils.checkInn(s.toString(), isBudget, { textViewRedErrorKpp.isEnabled = it }, { textViewRedErrorKpp.setTextToEditText(it) }) -&gt; {\r\n                if (s?.length == 10) mPaymentRecipientPresenter?.tryFindInn()\r\n                when {\r\n                    isHardChecked -&gt; {\r\n                        null\r\n                    }\r\n                    else -&gt; null\r\n                }\r\n\r\n\r\n            }\r\n            else -&gt; getString(R.string.enter_5_10_12_or_0)\r\n        }\r\n\r\n    }</code></pre>\r\n</div>\r\n</div>\r\n</p>\n"},{"tags":[],"owner":{"account_id":13022438,"reputation":171,"user_id":9411376,"display_name":"MRamzan"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1577871908,"creation_date":1577871908,"answer_id":59551416,"question_id":52081383,"body_markdown":"I was facing a similar problem [**due to my negligence XD**] and got it resolved \r\nThe line that causing it [i gussesd] was:\r\n\r\n            previewJobDialog.jobs_details_save_button\r\n\r\nAnd I corrected it to as I forgot to complete the code for it:\r\n          \r\n           previewJobDialog.jobs_details_save_button.setOnClickListener {\r\n                   //my implementation\r\n                }\r\n\r\nI hope it might help someone. [I do not know how anko was involved in it, but after seeing the logs that were saying: **During Execution of lambda**. I rushed to this line and completed this code and error went away].\r\n","title":"(Kotlin) Backend Internal error: Exception during code generation","body":"<p>I was facing a similar problem [<strong>due to my negligence XD</strong>] and got it resolved \nThe line that causing it [i gussesd] was:</p>\n\n<pre><code>        previewJobDialog.jobs_details_save_button\n</code></pre>\n\n<p>And I corrected it to as I forgot to complete the code for it:</p>\n\n<pre><code>       previewJobDialog.jobs_details_save_button.setOnClickListener {\n               //my implementation\n            }\n</code></pre>\n\n<p>I hope it might help someone. [I do not know how anko was involved in it, but after seeing the logs that were saying: <strong>During Execution of lambda</strong>. I rushed to this line and completed this code and error went away].</p>\n"},{"comments":[{"owner":{"account_id":7665503,"reputation":1002,"user_id":5809339,"display_name":"kishan verma"},"score":0,"creation_date":1594024385,"post_id":59997874,"comment_id":110970410,"body_markdown":"Could not find method composeOptions() for arguments","body":"Could not find method composeOptions() for arguments"},{"owner":{"account_id":11899869,"reputation":580,"user_id":8797900,"display_name":"gromyk"},"score":0,"creation_date":1594848474,"post_id":59997874,"comment_id":111274874,"body_markdown":"@kishanverma make sure if you are using the proper version of the android studio, it should be the one from the canary channel.","body":"@kishanverma make sure if you are using the proper version of the android studio, it should be the one from the canary channel."},{"owner":{"account_id":10267945,"reputation":138,"user_id":7577312,"accept_rate":33,"display_name":"Md. Rafsan Biswas"},"score":0,"creation_date":1627386562,"post_id":59997874,"comment_id":121137433,"body_markdown":"Simply try with &#39;Invalidate Caches/Restart&#39; if you face this during jetpack compose development.","body":"Simply try with &#39;Invalidate Caches/Restart&#39; if you face this during jetpack compose development."}],"tags":[],"owner":{"account_id":8652943,"reputation":22456,"user_id":6478047,"accept_rate":76,"display_name":"Manohar"},"comment_count":3,"down_vote_count":1,"up_vote_count":10,"is_accepted":false,"score":9,"last_activity_date":1580445048,"creation_date":1580445048,"answer_id":59997874,"question_id":52081383,"body_markdown":"For people who are having this issue with jetpack compose add the following lines in `build.gradle` file \r\n\r\n    android {\r\n        ...\r\n        composeOptions {\r\n            kotlinCompilerExtensionVersion &quot;0.1.0-dev04&quot;\r\n        }\r\n    }\r\n\r\nCredit to [EPIXOR][1]\r\n\r\n\r\n  [1]: https://www.reddit.com/r/androiddev/comments/evspa0/jetpack_compose_dev04/ffy5g8r?utm_source=share&amp;utm_medium=web2x","title":"(Kotlin) Backend Internal error: Exception during code generation","body":"<p>For people who are having this issue with jetpack compose add the following lines in <code>build.gradle</code> file </p>\n\n<pre><code>android {\n    ...\n    composeOptions {\n        kotlinCompilerExtensionVersion \"0.1.0-dev04\"\n    }\n}\n</code></pre>\n\n<p>Credit to <a href=\"https://www.reddit.com/r/androiddev/comments/evspa0/jetpack_compose_dev04/ffy5g8r?utm_source=share&amp;utm_medium=web2x\" rel=\"noreferrer\">EPIXOR</a></p>\n"},{"tags":[],"owner":{"account_id":4639590,"reputation":2255,"user_id":3759846,"display_name":"Wajid"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1583850338,"creation_date":1583850338,"answer_id":60619638,"question_id":52081383,"body_markdown":"When I converted my class from Java to Kotlin, this is what converter did to runnable:\r\n\r\n    runnable = label@ Runnable {\r\n                    if (condition) {\r\n                        handler!!.removeCallbacks(runnable)\r\n                        return@label\r\n                    }\r\n                    if (condition) {\r\n                        handler!!.postDelayed(runnable, 2000)\r\n                        return@label\r\n                    }\r\n                   //rest of the logic here\r\n                }\r\n\r\nThis is where the build process was throwing the above error. The reason was `return@label`\r\n\r\nnow what I did, \r\n\r\n    runnable = Runnable {\r\n                        if (condition) {\r\n                            handler!!.removeCallbacks(runnable)\r\n                            return@Runnable\r\n                        }\r\n                        if (condition) {\r\n                            handler!!.postDelayed(runnable, 2000)\r\n                            return@Runnable\r\n                        }\r\n                       //rest of the logic here\r\n                    }\r\n\r\nnow everything is super fine.\r\nhope it will help someone!","title":"(Kotlin) Backend Internal error: Exception during code generation","body":"<p>When I converted my class from Java to Kotlin, this is what converter did to runnable:</p>\n\n<pre><code>runnable = label@ Runnable {\n                if (condition) {\n                    handler!!.removeCallbacks(runnable)\n                    return@label\n                }\n                if (condition) {\n                    handler!!.postDelayed(runnable, 2000)\n                    return@label\n                }\n               //rest of the logic here\n            }\n</code></pre>\n\n<p>This is where the build process was throwing the above error. The reason was <code>return@label</code></p>\n\n<p>now what I did, </p>\n\n<pre><code>runnable = Runnable {\n                    if (condition) {\n                        handler!!.removeCallbacks(runnable)\n                        return@Runnable\n                    }\n                    if (condition) {\n                        handler!!.postDelayed(runnable, 2000)\n                        return@Runnable\n                    }\n                   //rest of the logic here\n                }\n</code></pre>\n\n<p>now everything is super fine.\nhope it will help someone!</p>\n"},{"comments":[{"owner":{"account_id":2763336,"reputation":1348,"user_id":2379746,"display_name":"Kharda"},"score":0,"creation_date":1604624293,"post_id":61439829,"comment_id":114411327,"body_markdown":"I experience the same for UI Test :(. For method names that have more than ~220 characters.","body":"I experience the same for UI Test :(. For method names that have more than ~220 characters."}],"tags":[],"owner":{"account_id":11355762,"reputation":67,"user_id":8325405,"display_name":"Vishnu Singhal"},"comment_count":1,"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1587900093,"creation_date":1587900093,"answer_id":61439829,"question_id":52081383,"body_markdown":"I was getting the same error. But in my case, I was writing unit test case and my test case name was too long. like this...\r\n\r\n    @Test\r\n    fun `check invocation of sendMessageWithImages on invocation of sendMessage when isUploadImageValid and reponse is success with no error`() { //test implemantation}\r\n\r\nI find this culprit by thinking, what unusual, I am doing here, that we not supposed to do in real android programming. So think like this. If any given solution not work for you. \r\nThanks","title":"(Kotlin) Backend Internal error: Exception during code generation","body":"<p>I was getting the same error. But in my case, I was writing unit test case and my test case name was too long. like this...</p>\n\n<pre><code>@Test\nfun `check invocation of sendMessageWithImages on invocation of sendMessage when isUploadImageValid and reponse is success with no error`() { //test implemantation}\n</code></pre>\n\n<p>I find this culprit by thinking, what unusual, I am doing here, that we not supposed to do in real android programming. So think like this. If any given solution not work for you. \nThanks</p>\n"},{"tags":[],"owner":{"account_id":500243,"reputation":6414,"user_id":2233706,"accept_rate":74,"display_name":"user2233706"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1617810983,"creation_date":1617810983,"answer_id":66989735,"question_id":52081383,"body_markdown":"This problem went away when I restarted Intellij. It happened for the following:\r\n```\r\nsealed class ApiException(error: String) : Exception(error) {\r\n    class UpdateException() :\r\n        ApiException(&quot;Failed to update&quot;)\r\n\r\n    class GetException() :\r\n        ApiException(&quot;Failed to get&quot;)\r\n}\r\n\r\n```","title":"(Kotlin) Backend Internal error: Exception during code generation","body":"<p>This problem went away when I restarted Intellij. It happened for the following:</p>\n<pre><code>sealed class ApiException(error: String) : Exception(error) {\n    class UpdateException() :\n        ApiException(&quot;Failed to update&quot;)\n\n    class GetException() :\n        ApiException(&quot;Failed to get&quot;)\n}\n\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3006386,"reputation":61,"user_id":2550851,"display_name":"Vyacheslav Trushin"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1617975624,"creation_date":1617975624,"answer_id":67022211,"question_id":52081383,"body_markdown":"In my case the problem was related to Unit tests like Vishnu Singhal mentioned above. But not with the long test name, instead the problem was that I used quote sign in the test name like this:\r\n\r\n    fun `fetchUserData @ &quot;by default&quot;`() \r\n\r\nThe tests were running successfully on developers with MacOS, but for Windows users it was a problem with encoding probably. The solution was to remove quote signs from test name","title":"(Kotlin) Backend Internal error: Exception during code generation","body":"<p>In my case the problem was related to Unit tests like Vishnu Singhal mentioned above. But not with the long test name, instead the problem was that I used quote sign in the test name like this:</p>\n<pre><code>fun `fetchUserData @ &quot;by default&quot;`() \n</code></pre>\n<p>The tests were running successfully on developers with MacOS, but for Windows users it was a problem with encoding probably. The solution was to remove quote signs from test name</p>\n"},{"tags":[],"owner":{"account_id":10267945,"reputation":138,"user_id":7577312,"accept_rate":33,"display_name":"Md. Rafsan Biswas"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1627386525,"creation_date":1627386525,"answer_id":68544273,"question_id":52081383,"body_markdown":"Simply try with &#39;Invalidate Caches/Restart&#39; if you face this during jetpack compose development.","title":"(Kotlin) Backend Internal error: Exception during code generation","body":"<p>Simply try with 'Invalidate Caches/Restart' if you face this during jetpack compose development.</p>\n"},{"tags":[],"owner":{"account_id":7103730,"reputation":31,"user_id":12155101,"display_name":"Chup bae"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1692097966,"creation_date":1692097966,"answer_id":76905447,"question_id":52081383,"body_markdown":"For me the issue was i was passing an int array to compose&#39;s constructor. I had to refactored it to strign and then convert it to int array in compose","title":"(Kotlin) Backend Internal error: Exception during code generation","body":"<p>For me the issue was i was passing an int array to compose's constructor. I had to refactored it to strign and then convert it to int array in compose</p>\n"}],"owner":{"account_id":12107389,"reputation":733,"user_id":8845653,"display_name":"Josep Bigorra"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":26613,"favorite_count":0,"down_vote_count":0,"up_vote_count":31,"accepted_answer_id":53709161,"answer_count":14,"score":31,"last_activity_date":1692097966,"creation_date":1535557264,"question_id":52081383,"body_markdown":"I am creating a very thorough converter for Android with Kotlin, using the latest Android Studio Canary build and latest Kotlin.\r\nI am suddenly getting a compiling error, even thought Android Studio doesn&#39;t see any bug in the code, it is complaining about a backend error, so I think my project is good but the Android Studio has a bug?? Please help confirm, this has been a lot of work....\r\n\r\nIt is complaining about my class MassCalc, which is 6500 lines long, because of many cases for conversion, so maybe that is the problem??\r\n\r\nUPDATE\r\nThe error does not occur when hitting Clean project or Rebuild Project, it occurs when I try to launch it in the emulator!\r\n\r\nVery simple code but long file: \r\n\r\n[https://github.com/Josep-Jesus-Bigorra-Algaba/SuperConverterAndroid][1]\r\n\r\nI am experienced with Java but had never seen this exception!\r\n\r\n    e: java.lang.IllegalStateException: Backend Internal error: Exception during code generation\r\n\r\nAlso:\r\n\r\n    org.gradle.execution.MultipleBuildFailures: Build completed with 1 failures.\r\n    \tat org.gradle.initialization.DefaultGradleLauncher$ExecuteTasks.run(DefaultGradleLauncher.java:350)\r\n    \tat org.gradle.internal.operations.DefaultBuildOperationExecutor$RunnableBuildOperationWorker.execute(DefaultBuildOperationExecutor.java:300)\r\n    \tat org.gradle.internal.operations.DefaultBuildOperationExecutor$RunnableBuildOperationWorker.execute(DefaultBuildOperationExecutor.java:292)\r\n    \tat org.gradle.internal.operations.DefaultBuildOperationExecutor.execute(DefaultBuildOperationExecutor.java:174)\r\n    \tat org.gradle.internal.operations.DefaultBuildOperationExecutor.run(DefaultBuildOperationExecutor.java:90)\r\n    \tat org.gradle.internal.operations.DelegatingBuildOperationExecutor.run(DelegatingBuildOperationExecutor.java:31)\r\n    \tat org.gradle.initialization.DefaultGradleLauncher.runTasks(DefaultGradleLauncher.java:216)\r\n    \tat org.gradle.initialization.DefaultGradleLauncher.doBuildStages(DefaultGradleLauncher.java:146)\r\n    \tat org.gradle.initialization.DefaultGradleLauncher.executeTasks(DefaultGradleLauncher.java:121)\r\n    \tat org.gradle.internal.invocation.GradleBuildController$1.call(GradleBuildController.java:77)\r\n    \tat org.gradle.internal.invocation.GradleBuildController$1.call(GradleBuildController.java:74)\r\n    \tat org.gradle.internal.work.DefaultWorkerLeaseService.withLocks(DefaultWorkerLeaseService.java:152)\r\n    \tat org.gradle.internal.work.StopShieldingWorkerLeaseService.withLocks(StopShieldingWorkerLeaseService.java:38)\r\n    \tat org.gradle.internal.invocation.GradleBuildController.doBuild(GradleBuildController.java:96)\r\n    \tat org.gradle.internal.invocation.GradleBuildController.run(GradleBuildController.java:74)\r\n    \tat org.gradle.tooling.internal.provider.runner.ClientProvidedBuildActionRunner.run(ClientProvidedBuildActionRunner.java:68)\r\n    \tat org.gradle.launcher.exec.ChainingBuildActionRunner.run(ChainingBuildActionRunner.java:35)\r\n    \tat org.gradle.launcher.exec.ChainingBuildActionRunner.run(ChainingBuildActionRunner.java:35)\r\n    \tat org.gradle.tooling.internal.provider.ValidatingBuildActionRunner.run(ValidatingBuildActionRunner.java:32)\r\n    \tat org.gradle.launcher.exec.RunAsBuildOperationBuildActionRunner$3.run(RunAsBuildOperationBuildActionRunner.java:47)\r\n    \tat org.gradle.internal.operations.DefaultBuildOperationExecutor$RunnableBuildOperationWorker.execute(DefaultBuildOperationExecutor.java:300)\r\n    \tat org.gradle.internal.operations.DefaultBuildOperationExecutor$RunnableBuildOperationWorker.execute(DefaultBuildOperationExecutor.java:292)\r\n    \tat org.gradle.internal.operations.DefaultBuildOperationExecutor.execute(DefaultBuildOperationExecutor.java:174)\r\n    \tat org.gradle.internal.operations.DefaultBuildOperationExecutor.run(DefaultBuildOperationExecutor.java:90)\r\n    \tat org.gradle.internal.operations.DelegatingBuildOperationExecutor.run(DelegatingBuildOperationExecutor.java:31)\r\n    \tat org.gradle.launcher.exec.RunAsBuildOperationBuildActionRunner.run(RunAsBuildOperationBuildActionRunner.java:43)\r\n    \tat org.gradle.tooling.internal.provider.SubscribableBuildActionRunner.run(SubscribableBuildActionRunner.java:51)\r\n    \tat org.gradle.launcher.exec.InProcessBuildActionExecuter$1.transform(InProcessBuildActionExecuter.java:50)\r\n    \tat org.gradle.launcher.exec.InProcessBuildActionExecuter$1.transform(InProcessBuildActionExecuter.java:46)\r\n    \tat org.gradle.composite.internal.DefaultRootBuildState.run(DefaultRootBuildState.java:74)\r\n    \tat org.gradle.launcher.exec.InProcessBuildActionExecuter.execute(InProcessBuildActionExecuter.java:46)\r\n    \tat org.gradle.launcher.exec.InProcessBuildActionExecuter.execute(InProcessBuildActionExecuter.java:32)\r\n    \tat org.gradle.launcher.exec.BuildTreeScopeBuildActionExecuter.execute(BuildTreeScopeBuildActionExecuter.java:39)\r\n    \tat org.gradle.launcher.exec.BuildTreeScopeBuildActionExecuter.execute(BuildTreeScopeBuildActionExecuter.java:25)\r\n    \tat org.gradle.tooling.internal.provider.ContinuousBuildActionExecuter.execute(ContinuousBuildActionExecuter.java:80)\r\n    \tat org.gradle.tooling.internal.provider.ContinuousBuildActionExecuter.execute(ContinuousBuildActionExecuter.java:53)\r\n    \tat org.gradle.tooling.internal.provider.ServicesSetupBuildActionExecuter.execute(ServicesSetupBuildActionExecuter.java:62)\r\n    \tat org.gradle.tooling.internal.provider.ServicesSetupBuildActionExecuter.execute(ServicesSetupBuildActionExecuter.java:34)\r\n    \tat org.gradle.tooling.internal.provider.GradleThreadBuildActionExecuter.execute(GradleThreadBuildActionExecuter.java:36)\r\n    \tat org.gradle.tooling.internal.provider.GradleThreadBuildActionExecuter.execute(GradleThreadBuildActionExecuter.java:25)\r\n    \tat org.gradle.tooling.internal.provider.ParallelismConfigurationBuildActionExecuter.execute(ParallelismConfigurationBuildActionExecuter.java:43)\r\n    \tat org.gradle.tooling.internal.provider.ParallelismConfigurationBuildActionExecuter.execute(ParallelismConfigurationBuildActionExecuter.java:29)\r\n    \tat org.gradle.tooling.internal.provider.StartParamsValidatingActionExecuter.execute(StartParamsValidatingActionExecuter.java:59)\r\n    \tat org.gradle.tooling.internal.provider.StartParamsValidatingActionExecuter.execute(StartParamsValidatingActionExecuter.java:31)\r\n    \tat org.gradle.tooling.internal.provider.SessionFailureReportingActionExecuter.execute(SessionFailureReportingActionExecuter.java:59)\r\n    \tat org.gradle.tooling.internal.provider.SessionFailureReportingActionExecuter.execute(SessionFailureReportingActionExecuter.java:44)\r\n    \tat org.gradle.tooling.internal.provider.SetupLoggingActionExecuter.execute(SetupLoggingActionExecuter.java:46)\r\n    \tat org.gradle.tooling.internal.provider.SetupLoggingActionExecuter.execute(SetupLoggingActionExecuter.java:30)\r\n    \tat org.gradle.launcher.daemon.server.exec.ExecuteBuild.doBuild(ExecuteBuild.java:67)\r\n    \tat org.gradle.launcher.daemon.server.exec.BuildCommandOnly.execute(BuildCommandOnly.java:36)\r\n    \tat org.gradle.launcher.daemon.server.api.DaemonCommandExecution.proceed(DaemonCommandExecution.java:122)\r\n    \tat org.gradle.launcher.daemon.server.exec.WatchForDisconnection.execute(WatchForDisconnection.java:37)\r\n    \tat org.gradle.launcher.daemon.server.api.DaemonCommandExecution.proceed(DaemonCommandExecution.java:122)\r\n    \tat org.gradle.launcher.daemon.server.exec.ResetDeprecationLogger.execute(ResetDeprecationLogger.java:26)\r\n    \tat org.gradle.launcher.daemon.server.api.DaemonCommandExecution.proceed(DaemonCommandExecution.java:122)\r\n    \tat org.gradle.launcher.daemon.server.exec.RequestStopIfSingleUsedDaemon.execute(RequestStopIfSingleUsedDaemon.java:34)\r\n    \tat org.gradle.launcher.daemon.server.api.DaemonCommandExecution.proceed(DaemonCommandExecution.java:122)\r\n    \tat org.gradle.launcher.daemon.server.exec.ForwardClientInput$2.call(ForwardClientInput.java:74)\r\n    \tat org.gradle.launcher.daemon.server.exec.ForwardClientInput$2.call(ForwardClientInput.java:72)\r\n    \tat org.gradle.util.Swapper.swap(Swapper.java:38)\r\n    \tat org.gradle.launcher.daemon.server.exec.ForwardClientInput.execute(ForwardClientInput.java:72)\r\n    \tat org.gradle.launcher.daemon.server.api.DaemonCommandExecution.proceed(DaemonCommandExecution.java:122)\r\n    \tat org.gradle.launcher.daemon.server.exec.LogAndCheckHealth.execute(LogAndCheckHealth.java:55)\r\n    \tat org.gradle.launcher.daemon.server.api.DaemonCommandExecution.proceed(DaemonCommandExecution.java:122)\r\n    \tat org.gradle.launcher.daemon.server.exec.LogToClient.doBuild(LogToClient.java:62)\r\n    \tat org.gradle.launcher.daemon.server.exec.BuildCommandOnly.execute(BuildCommandOnly.java:36)\r\n    \tat org.gradle.launcher.daemon.server.api.DaemonCommandExecution.proceed(DaemonCommandExecution.java:122)\r\n    \tat org.gradle.launcher.daemon.server.exec.EstablishBuildEnvironment.doBuild(EstablishBuildEnvironment.java:82)\r\n    \tat org.gradle.launcher.daemon.server.exec.BuildCommandOnly.execute(BuildCommandOnly.java:36)\r\n    \tat org.gradle.launcher.daemon.server.api.DaemonCommandExecution.proceed(DaemonCommandExecution.java:122)\r\n    \tat org.gradle.launcher.daemon.server.exec.StartBuildOrRespondWithBusy$1.run(StartBuildOrRespondWithBusy.java:50)\r\n    \tat org.gradle.launcher.daemon.server.DaemonStateCoordinator$1.run(DaemonStateCoordinator.java:295)\r\n    \tat org.gradle.internal.concurrent.ExecutorPolicy$CatchAndRecordFailures.onExecute(ExecutorPolicy.java:63)\r\n    \tat org.gradle.internal.concurrent.ManagedExecutorImpl$1.run(ManagedExecutorImpl.java:46)\r\n    \tat java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)\r\n    \tat java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)\r\n    \tat org.gradle.internal.concurrent.ThreadFactoryImpl$ManagedThreadRunnable.run(ThreadFactoryImpl.java:55)\r\n    \tat java.lang.Thread.run(Thread.java:745)\r\n    Caused by: org.gradle.api.tasks.TaskExecutionException: Execution failed for task &#39;:app:compileDebugKotlin&#39;.\r\n    \tat org.gradle.api.internal.tasks.execution.ExecuteActionsTaskExecuter.executeActions(ExecuteActionsTaskExecuter.java:110)\r\n    \tat org.gradle.api.internal.tasks.execution.ExecuteActionsTaskExecuter.execute(ExecuteActionsTaskExecuter.java:77)\r\n    \tat org.gradle.api.internal.tasks.execution.OutputDirectoryCreatingTaskExecuter.execute(OutputDirectoryCreatingTaskExecuter.java:51)\r\n    \tat org.gradle.api.internal.tasks.execution.SkipUpToDateTaskExecuter.execute(SkipUpToDateTaskExecuter.java:59)\r\n    \tat org.gradle.api.internal.tasks.execution.ResolveTaskOutputCachingStateExecuter.execute(ResolveTaskOutputCachingStateExecuter.java:54)\r\n    \tat org.gradle.api.internal.tasks.execution.ValidatingTaskExecuter.execute(ValidatingTaskExecuter.java:59)\r\n    \tat org.gradle.api.internal.tasks.execution.SkipEmptySourceFilesTaskExecuter.execute(SkipEmptySourceFilesTaskExecuter.java:101)\r\n    \tat org.gradle.api.internal.tasks.execution.FinalizeInputFilePropertiesTaskExecuter.execute(FinalizeInputFilePropertiesTaskExecuter.java:44)\r\n    \tat org.gradle.api.internal.tasks.execution.CleanupStaleOutputsExecuter.execute(CleanupStaleOutputsExecuter.java:91)\r\n    \tat org.gradle.api.internal.tasks.execution.ResolveTaskArtifactStateTaskExecuter.execute(ResolveTaskArtifactStateTaskExecuter.java:62)\r\n    \tat org.gradle.api.internal.tasks.execution.SkipTaskWithNoActionsExecuter.execute(SkipTaskWithNoActionsExecuter.java:59)\r\n    \tat org.gradle.api.internal.tasks.execution.SkipOnlyIfTaskExecuter.execute(SkipOnlyIfTaskExecuter.java:54)\r\n    \tat org.gradle.api.internal.tasks.execution.ExecuteAtMostOnceTaskExecuter.execute(ExecuteAtMostOnceTaskExecuter.java:43)\r\n    \tat org.gradle.api.internal.tasks.execution.CatchExceptionTaskExecuter.execute(CatchExceptionTaskExecuter.java:34)\r\n    \tat org.gradle.api.internal.tasks.execution.EventFiringTaskExecuter$1.run(EventFiringTaskExecuter.java:51)\r\n    \tat org.gradle.internal.operations.DefaultBuildOperationExecutor$RunnableBuildOperationWorker.execute(DefaultBuildOperationExecutor.java:300)\r\n    \tat org.gradle.internal.operations.DefaultBuildOperationExecutor$RunnableBuildOperationWorker.execute(DefaultBuildOperationExecutor.java:292)\r\n    \tat org.gradle.internal.operations.DefaultBuildOperationExecutor.execute(DefaultBuildOperationExecutor.java:174)\r\n    \tat org.gradle.internal.operations.DefaultBuildOperationExecutor.run(DefaultBuildOperationExecutor.java:90)\r\n    \tat org.gradle.internal.operations.DelegatingBuildOperationExecutor.run(DelegatingBuildOperationExecutor.java:31)\r\n    \tat org.gradle.api.internal.tasks.execution.EventFiringTaskExecuter.execute(EventFiringTaskExecuter.java:46)\r\n    \tat org.gradle.execution.taskgraph.LocalTaskInfoExecutor.execute(LocalTaskInfoExecutor.java:42)\r\n    \tat org.gradle.execution.taskgraph.DefaultTaskExecutionGraph$BuildOperationAwareWorkItemExecutor.execute(DefaultTaskExecutionGraph.java:273)\r\n    \tat org.gradle.execution.taskgraph.DefaultTaskExecutionGraph$BuildOperationAwareWorkItemExecutor.execute(DefaultTaskExecutionGraph.java:258)\r\n    \tat org.gradle.execution.taskgraph.DefaultTaskPlanExecutor$ExecutorWorker$1.execute(DefaultTaskPlanExecutor.java:135)\r\n    \tat org.gradle.execution.taskgraph.DefaultTaskPlanExecutor$ExecutorWorker$1.execute(DefaultTaskPlanExecutor.java:130)\r\n    \tat org.gradle.execution.taskgraph.DefaultTaskPlanExecutor$ExecutorWorker.execute(DefaultTaskPlanExecutor.java:200)\r\n    \tat org.gradle.execution.taskgraph.DefaultTaskPlanExecutor$ExecutorWorker.executeWithWork(DefaultTaskPlanExecutor.java:191)\r\n    \tat org.gradle.execution.taskgraph.DefaultTaskPlanExecutor$ExecutorWorker.run(DefaultTaskPlanExecutor.java:130)\r\n    \t... 6 more\r\n    Caused by: org.gradle.api.GradleException: Internal compiler error. See log for more details\r\n    \tat org.jetbrains.kotlin.gradle.tasks.TasksUtilsKt.throwGradleExceptionIfError(tasksUtils.kt:17)\r\n    \tat org.jetbrains.kotlin.gradle.tasks.KotlinCompile.processCompilerExitCode(Tasks.kt:434)\r\n    \tat org.jetbrains.kotlin.gradle.tasks.KotlinCompile.callCompiler$kotlin_gradle_plugin(Tasks.kt:396)\r\n    \tat org.jetbrains.kotlin.gradle.tasks.KotlinCompile.callCompiler$kotlin_gradle_plugin(Tasks.kt:292)\r\n    \tat org.jetbrains.kotlin.gradle.tasks.AbstractKotlinCompile.execute(Tasks.kt:254)\r\n    \tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n    \tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\r\n    \tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n    \tat java.lang.reflect.Method.invoke(Method.java:498)\r\n    \tat org.gradle.internal.reflect.JavaMethod.invoke(JavaMethod.java:73)\r\n    \tat org.gradle.api.internal.project.taskfactory.IncrementalTaskAction.doExecute(IncrementalTaskAction.java:50)\r\n    \tat org.gradle.api.internal.project.taskfactory.StandardTaskAction.execute(StandardTaskAction.java:39)\r\n    \tat org.gradle.api.internal.project.taskfactory.StandardTaskAction.execute(StandardTaskAction.java:26)\r\n    \tat org.gradle.api.internal.tasks.execution.ExecuteActionsTaskExecuter$1.run(ExecuteActionsTaskExecuter.java:131)\r\n    \tat org.gradle.internal.operations.DefaultBuildOperationExecutor$RunnableBuildOperationWorker.execute(DefaultBuildOperationExecutor.java:300)\r\n    \tat org.gradle.internal.operations.DefaultBuildOperationExecutor$RunnableBuildOperationWorker.execute(DefaultBuildOperationExecutor.java:292)\r\n    \tat org.gradle.internal.operations.DefaultBuildOperationExecutor.execute(DefaultBuildOperationExecutor.java:174)\r\n    \tat org.gradle.internal.operations.DefaultBuildOperationExecutor.run(DefaultBuildOperationExecutor.java:90)\r\n    \tat org.gradle.internal.operations.DelegatingBuildOperationExecutor.run(DelegatingBuildOperationExecutor.java:31)\r\n    \tat org.gradle.api.internal.tasks.execution.ExecuteActionsTaskExecuter.executeAction(ExecuteActionsTaskExecuter.java:120)\r\n    \tat org.gradle.api.internal.tasks.execution.ExecuteActionsTaskExecuter.executeActions(ExecuteActionsTaskExecuter.java:99)\r\n    \t... 34 more\r\n\r\nAnd in the log:\r\n\r\n    org.gradle.api.tasks.TaskExecutionException: Execution failed for task &#39;:app:compileDebugKotlin&#39;.\r\n    \tat org.gradle.api.internal.tasks.execution.ExecuteActionsTaskExecuter.executeActions(ExecuteActionsTaskExecuter.java:110)\r\n    \tat org.gradle.api.internal.tasks.execution.ExecuteActionsTaskExecuter.execute(ExecuteActionsTaskExecuter.java:77)\r\n    \tat org.gradle.api.internal.tasks.execution.OutputDirectoryCreatingTaskExecuter.execute(OutputDirectoryCreatingTaskExecuter.java:51)\r\n    \tat org.gradle.api.internal.tasks.execution.SkipUpToDateTaskExecuter.execute(SkipUpToDateTaskExecuter.java:59)\r\n    \tat org.gradle.api.internal.tasks.execution.ResolveTaskOutputCachingStateExecuter.execute(ResolveTaskOutputCachingStateExecuter.java:54)\r\n    \tat org.gradle.api.internal.tasks.execution.ValidatingTaskExecuter.execute(ValidatingTaskExecuter.java:59)\r\n    \tat org.gradle.api.internal.tasks.execution.SkipEmptySourceFilesTaskExecuter.execute(SkipEmptySourceFilesTaskExecuter.java:101)\r\n    \tat org.gradle.api.internal.tasks.execution.FinalizeInputFilePropertiesTaskExecuter.execute(FinalizeInputFilePropertiesTaskExecuter.java:44)\r\n    \tat org.gradle.api.internal.tasks.execution.CleanupStaleOutputsExecuter.execute(CleanupStaleOutputsExecuter.java:91)\r\n    \tat org.gradle.api.internal.tasks.execution.ResolveTaskArtifactStateTaskExecuter.execute(ResolveTaskArtifactStateTaskExecuter.java:62)\r\n    \tat org.gradle.api.internal.tasks.execution.SkipTaskWithNoActionsExecuter.execute(SkipTaskWithNoActionsExecuter.java:59)\r\n    \tat org.gradle.api.internal.tasks.execution.SkipOnlyIfTaskExecuter.execute(SkipOnlyIfTaskExecuter.java:54)\r\n    \tat org.gradle.api.internal.tasks.execution.ExecuteAtMostOnceTaskExecuter.execute(ExecuteAtMostOnceTaskExecuter.java:43)\r\n    \tat org.gradle.api.internal.tasks.execution.CatchExceptionTaskExecuter.execute(CatchExceptionTaskExecuter.java:34)\r\n    \tat org.gradle.api.internal.tasks.execution.EventFiringTaskExecuter$1.run(EventFiringTaskExecuter.java:51)\r\n    \tat org.gradle.internal.operations.DefaultBuildOperationExecutor$RunnableBuildOperationWorker.execute(DefaultBuildOperationExecutor.java:300)\r\n    \tat org.gradle.internal.operations.DefaultBuildOperationExecutor$RunnableBuildOperationWorker.execute(DefaultBuildOperationExecutor.java:292)\r\n    \tat org.gradle.internal.operations.DefaultBuildOperationExecutor.execute(DefaultBuildOperationExecutor.java:174)\r\n    \tat org.gradle.internal.operations.DefaultBuildOperationExecutor.run(DefaultBuildOperationExecutor.java:90)\r\n    \tat org.gradle.internal.operations.DelegatingBuildOperationExecutor.run(DelegatingBuildOperationExecutor.java:31)\r\n    \tat org.gradle.api.internal.tasks.execution.EventFiringTaskExecuter.execute(EventFiringTaskExecuter.java:46)\r\n    \tat org.gradle.execution.taskgraph.LocalTaskInfoExecutor.execute(LocalTaskInfoExecutor.java:42)\r\n    \tat org.gradle.execution.taskgraph.DefaultTaskExecutionGraph$BuildOperationAwareWorkItemExecutor.execute(DefaultTaskExecutionGraph.java:273)\r\n    \tat org.gradle.execution.taskgraph.DefaultTaskExecutionGraph$BuildOperationAwareWorkItemExecutor.execute(DefaultTaskExecutionGraph.java:258)\r\n    \tat org.gradle.execution.taskgraph.DefaultTaskPlanExecutor$ExecutorWorker$1.execute(DefaultTaskPlanExecutor.java:135)\r\n    \tat org.gradle.execution.taskgraph.DefaultTaskPlanExecutor$ExecutorWorker$1.execute(DefaultTaskPlanExecutor.java:130)\r\n    \tat org.gradle.execution.taskgraph.DefaultTaskPlanExecutor$ExecutorWorker.execute(DefaultTaskPlanExecutor.java:200)\r\n    \tat org.gradle.execution.taskgraph.DefaultTaskPlanExecutor$ExecutorWorker.executeWithWork(DefaultTaskPlanExecutor.java:191)\r\n    \tat org.gradle.execution.taskgraph.DefaultTaskPlanExecutor$ExecutorWorker.run(DefaultTaskPlanExecutor.java:130)\r\n    \tat org.gradle.internal.concurrent.ExecutorPolicy$CatchAndRecordFailures.onExecute(ExecutorPolicy.java:63)\r\n    \tat org.gradle.internal.concurrent.ManagedExecutorImpl$1.run(ManagedExecutorImpl.java:46)\r\n    \tat java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)\r\n    \tat java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)\r\n    \tat org.gradle.internal.concurrent.ThreadFactoryImpl$ManagedThreadRunnable.run(ThreadFactoryImpl.java:55)\r\n    \tat java.lang.Thread.run(Thread.java:745)\r\n    Caused by: org.gradle.api.GradleException: Internal compiler error. See log for more details\r\n    \tat org.jetbrains.kotlin.gradle.tasks.TasksUtilsKt.throwGradleExceptionIfError(tasksUtils.kt:17)\r\n    \tat org.jetbrains.kotlin.gradle.tasks.KotlinCompile.processCompilerExitCode(Tasks.kt:434)\r\n    \tat org.jetbrains.kotlin.gradle.tasks.KotlinCompile.callCompiler$kotlin_gradle_plugin(Tasks.kt:396)\r\n    \tat org.jetbrains.kotlin.gradle.tasks.KotlinCompile.callCompiler$kotlin_gradle_plugin(Tasks.kt:292)\r\n    \tat org.jetbrains.kotlin.gradle.tasks.AbstractKotlinCompile.execute(Tasks.kt:254)\r\n    \tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n    \tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\r\n    \tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n    \tat java.lang.reflect.Method.invoke(Method.java:498)\r\n    \tat org.gradle.internal.reflect.JavaMethod.invoke(JavaMethod.java:73)\r\n    \tat org.gradle.api.internal.project.taskfactory.IncrementalTaskAction.doExecute(IncrementalTaskAction.java:50)\r\n    \tat org.gradle.api.internal.project.taskfactory.StandardTaskAction.execute(StandardTaskAction.java:39)\r\n    \tat org.gradle.api.internal.project.taskfactory.StandardTaskAction.execute(StandardTaskAction.java:26)\r\n    \tat org.gradle.api.internal.tasks.execution.ExecuteActionsTaskExecuter$1.run(ExecuteActionsTaskExecuter.java:131)\r\n    \tat org.gradle.internal.operations.DefaultBuildOperationExecutor$RunnableBuildOperationWorker.execute(DefaultBuildOperationExecutor.java:300)\r\n    \tat org.gradle.internal.operations.DefaultBuildOperationExecutor$RunnableBuildOperationWorker.execute(DefaultBuildOperationExecutor.java:292)\r\n    \tat org.gradle.internal.operations.DefaultBuildOperationExecutor.execute(DefaultBuildOperationExecutor.java:174)\r\n    \tat org.gradle.internal.operations.DefaultBuildOperationExecutor.run(DefaultBuildOperationExecutor.java:90)\r\n    \tat org.gradle.internal.operations.DelegatingBuildOperationExecutor.run(DelegatingBuildOperationExecutor.java:31)\r\n    \tat org.gradle.api.internal.tasks.execution.ExecuteActionsTaskExecuter.executeAction(ExecuteActionsTaskExecuter.java:120)\r\n    \tat org.gradle.api.internal.tasks.execution.ExecuteActionsTaskExecuter.executeActions(ExecuteActionsTaskExecuter.java:99)\r\n    \t... 34 more\r\n\r\n\r\n  [1]: https://github.com/Josep-Jesus-Bigorra-Algaba/SuperConverterAndroid\r\n\r\n\r\nAny help will be greatly appreciated!\r\nEdit: I work from macOS High Sierra but am downloading Linux Mint and will probably try in that to see if the issue persists!","title":"(Kotlin) Backend Internal error: Exception during code generation","body":"<p>I am creating a very thorough converter for Android with Kotlin, using the latest Android Studio Canary build and latest Kotlin.\nI am suddenly getting a compiling error, even thought Android Studio doesn't see any bug in the code, it is complaining about a backend error, so I think my project is good but the Android Studio has a bug?? Please help confirm, this has been a lot of work....</p>\n\n<p>It is complaining about my class MassCalc, which is 6500 lines long, because of many cases for conversion, so maybe that is the problem??</p>\n\n<p>UPDATE\nThe error does not occur when hitting Clean project or Rebuild Project, it occurs when I try to launch it in the emulator!</p>\n\n<p>Very simple code but long file: </p>\n\n<p><a href=\"https://github.com/Josep-Jesus-Bigorra-Algaba/SuperConverterAndroid\" rel=\"noreferrer\">https://github.com/Josep-Jesus-Bigorra-Algaba/SuperConverterAndroid</a></p>\n\n<p>I am experienced with Java but had never seen this exception!</p>\n\n<pre><code>e: java.lang.IllegalStateException: Backend Internal error: Exception during code generation\n</code></pre>\n\n<p>Also:</p>\n\n<pre><code>org.gradle.execution.MultipleBuildFailures: Build completed with 1 failures.\n    at org.gradle.initialization.DefaultGradleLauncher$ExecuteTasks.run(DefaultGradleLauncher.java:350)\n    at org.gradle.internal.operations.DefaultBuildOperationExecutor$RunnableBuildOperationWorker.execute(DefaultBuildOperationExecutor.java:300)\n    at org.gradle.internal.operations.DefaultBuildOperationExecutor$RunnableBuildOperationWorker.execute(DefaultBuildOperationExecutor.java:292)\n    at org.gradle.internal.operations.DefaultBuildOperationExecutor.execute(DefaultBuildOperationExecutor.java:174)\n    at org.gradle.internal.operations.DefaultBuildOperationExecutor.run(DefaultBuildOperationExecutor.java:90)\n    at org.gradle.internal.operations.DelegatingBuildOperationExecutor.run(DelegatingBuildOperationExecutor.java:31)\n    at org.gradle.initialization.DefaultGradleLauncher.runTasks(DefaultGradleLauncher.java:216)\n    at org.gradle.initialization.DefaultGradleLauncher.doBuildStages(DefaultGradleLauncher.java:146)\n    at org.gradle.initialization.DefaultGradleLauncher.executeTasks(DefaultGradleLauncher.java:121)\n    at org.gradle.internal.invocation.GradleBuildController$1.call(GradleBuildController.java:77)\n    at org.gradle.internal.invocation.GradleBuildController$1.call(GradleBuildController.java:74)\n    at org.gradle.internal.work.DefaultWorkerLeaseService.withLocks(DefaultWorkerLeaseService.java:152)\n    at org.gradle.internal.work.StopShieldingWorkerLeaseService.withLocks(StopShieldingWorkerLeaseService.java:38)\n    at org.gradle.internal.invocation.GradleBuildController.doBuild(GradleBuildController.java:96)\n    at org.gradle.internal.invocation.GradleBuildController.run(GradleBuildController.java:74)\n    at org.gradle.tooling.internal.provider.runner.ClientProvidedBuildActionRunner.run(ClientProvidedBuildActionRunner.java:68)\n    at org.gradle.launcher.exec.ChainingBuildActionRunner.run(ChainingBuildActionRunner.java:35)\n    at org.gradle.launcher.exec.ChainingBuildActionRunner.run(ChainingBuildActionRunner.java:35)\n    at org.gradle.tooling.internal.provider.ValidatingBuildActionRunner.run(ValidatingBuildActionRunner.java:32)\n    at org.gradle.launcher.exec.RunAsBuildOperationBuildActionRunner$3.run(RunAsBuildOperationBuildActionRunner.java:47)\n    at org.gradle.internal.operations.DefaultBuildOperationExecutor$RunnableBuildOperationWorker.execute(DefaultBuildOperationExecutor.java:300)\n    at org.gradle.internal.operations.DefaultBuildOperationExecutor$RunnableBuildOperationWorker.execute(DefaultBuildOperationExecutor.java:292)\n    at org.gradle.internal.operations.DefaultBuildOperationExecutor.execute(DefaultBuildOperationExecutor.java:174)\n    at org.gradle.internal.operations.DefaultBuildOperationExecutor.run(DefaultBuildOperationExecutor.java:90)\n    at org.gradle.internal.operations.DelegatingBuildOperationExecutor.run(DelegatingBuildOperationExecutor.java:31)\n    at org.gradle.launcher.exec.RunAsBuildOperationBuildActionRunner.run(RunAsBuildOperationBuildActionRunner.java:43)\n    at org.gradle.tooling.internal.provider.SubscribableBuildActionRunner.run(SubscribableBuildActionRunner.java:51)\n    at org.gradle.launcher.exec.InProcessBuildActionExecuter$1.transform(InProcessBuildActionExecuter.java:50)\n    at org.gradle.launcher.exec.InProcessBuildActionExecuter$1.transform(InProcessBuildActionExecuter.java:46)\n    at org.gradle.composite.internal.DefaultRootBuildState.run(DefaultRootBuildState.java:74)\n    at org.gradle.launcher.exec.InProcessBuildActionExecuter.execute(InProcessBuildActionExecuter.java:46)\n    at org.gradle.launcher.exec.InProcessBuildActionExecuter.execute(InProcessBuildActionExecuter.java:32)\n    at org.gradle.launcher.exec.BuildTreeScopeBuildActionExecuter.execute(BuildTreeScopeBuildActionExecuter.java:39)\n    at org.gradle.launcher.exec.BuildTreeScopeBuildActionExecuter.execute(BuildTreeScopeBuildActionExecuter.java:25)\n    at org.gradle.tooling.internal.provider.ContinuousBuildActionExecuter.execute(ContinuousBuildActionExecuter.java:80)\n    at org.gradle.tooling.internal.provider.ContinuousBuildActionExecuter.execute(ContinuousBuildActionExecuter.java:53)\n    at org.gradle.tooling.internal.provider.ServicesSetupBuildActionExecuter.execute(ServicesSetupBuildActionExecuter.java:62)\n    at org.gradle.tooling.internal.provider.ServicesSetupBuildActionExecuter.execute(ServicesSetupBuildActionExecuter.java:34)\n    at org.gradle.tooling.internal.provider.GradleThreadBuildActionExecuter.execute(GradleThreadBuildActionExecuter.java:36)\n    at org.gradle.tooling.internal.provider.GradleThreadBuildActionExecuter.execute(GradleThreadBuildActionExecuter.java:25)\n    at org.gradle.tooling.internal.provider.ParallelismConfigurationBuildActionExecuter.execute(ParallelismConfigurationBuildActionExecuter.java:43)\n    at org.gradle.tooling.internal.provider.ParallelismConfigurationBuildActionExecuter.execute(ParallelismConfigurationBuildActionExecuter.java:29)\n    at org.gradle.tooling.internal.provider.StartParamsValidatingActionExecuter.execute(StartParamsValidatingActionExecuter.java:59)\n    at org.gradle.tooling.internal.provider.StartParamsValidatingActionExecuter.execute(StartParamsValidatingActionExecuter.java:31)\n    at org.gradle.tooling.internal.provider.SessionFailureReportingActionExecuter.execute(SessionFailureReportingActionExecuter.java:59)\n    at org.gradle.tooling.internal.provider.SessionFailureReportingActionExecuter.execute(SessionFailureReportingActionExecuter.java:44)\n    at org.gradle.tooling.internal.provider.SetupLoggingActionExecuter.execute(SetupLoggingActionExecuter.java:46)\n    at org.gradle.tooling.internal.provider.SetupLoggingActionExecuter.execute(SetupLoggingActionExecuter.java:30)\n    at org.gradle.launcher.daemon.server.exec.ExecuteBuild.doBuild(ExecuteBuild.java:67)\n    at org.gradle.launcher.daemon.server.exec.BuildCommandOnly.execute(BuildCommandOnly.java:36)\n    at org.gradle.launcher.daemon.server.api.DaemonCommandExecution.proceed(DaemonCommandExecution.java:122)\n    at org.gradle.launcher.daemon.server.exec.WatchForDisconnection.execute(WatchForDisconnection.java:37)\n    at org.gradle.launcher.daemon.server.api.DaemonCommandExecution.proceed(DaemonCommandExecution.java:122)\n    at org.gradle.launcher.daemon.server.exec.ResetDeprecationLogger.execute(ResetDeprecationLogger.java:26)\n    at org.gradle.launcher.daemon.server.api.DaemonCommandExecution.proceed(DaemonCommandExecution.java:122)\n    at org.gradle.launcher.daemon.server.exec.RequestStopIfSingleUsedDaemon.execute(RequestStopIfSingleUsedDaemon.java:34)\n    at org.gradle.launcher.daemon.server.api.DaemonCommandExecution.proceed(DaemonCommandExecution.java:122)\n    at org.gradle.launcher.daemon.server.exec.ForwardClientInput$2.call(ForwardClientInput.java:74)\n    at org.gradle.launcher.daemon.server.exec.ForwardClientInput$2.call(ForwardClientInput.java:72)\n    at org.gradle.util.Swapper.swap(Swapper.java:38)\n    at org.gradle.launcher.daemon.server.exec.ForwardClientInput.execute(ForwardClientInput.java:72)\n    at org.gradle.launcher.daemon.server.api.DaemonCommandExecution.proceed(DaemonCommandExecution.java:122)\n    at org.gradle.launcher.daemon.server.exec.LogAndCheckHealth.execute(LogAndCheckHealth.java:55)\n    at org.gradle.launcher.daemon.server.api.DaemonCommandExecution.proceed(DaemonCommandExecution.java:122)\n    at org.gradle.launcher.daemon.server.exec.LogToClient.doBuild(LogToClient.java:62)\n    at org.gradle.launcher.daemon.server.exec.BuildCommandOnly.execute(BuildCommandOnly.java:36)\n    at org.gradle.launcher.daemon.server.api.DaemonCommandExecution.proceed(DaemonCommandExecution.java:122)\n    at org.gradle.launcher.daemon.server.exec.EstablishBuildEnvironment.doBuild(EstablishBuildEnvironment.java:82)\n    at org.gradle.launcher.daemon.server.exec.BuildCommandOnly.execute(BuildCommandOnly.java:36)\n    at org.gradle.launcher.daemon.server.api.DaemonCommandExecution.proceed(DaemonCommandExecution.java:122)\n    at org.gradle.launcher.daemon.server.exec.StartBuildOrRespondWithBusy$1.run(StartBuildOrRespondWithBusy.java:50)\n    at org.gradle.launcher.daemon.server.DaemonStateCoordinator$1.run(DaemonStateCoordinator.java:295)\n    at org.gradle.internal.concurrent.ExecutorPolicy$CatchAndRecordFailures.onExecute(ExecutorPolicy.java:63)\n    at org.gradle.internal.concurrent.ManagedExecutorImpl$1.run(ManagedExecutorImpl.java:46)\n    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)\n    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)\n    at org.gradle.internal.concurrent.ThreadFactoryImpl$ManagedThreadRunnable.run(ThreadFactoryImpl.java:55)\n    at java.lang.Thread.run(Thread.java:745)\nCaused by: org.gradle.api.tasks.TaskExecutionException: Execution failed for task ':app:compileDebugKotlin'.\n    at org.gradle.api.internal.tasks.execution.ExecuteActionsTaskExecuter.executeActions(ExecuteActionsTaskExecuter.java:110)\n    at org.gradle.api.internal.tasks.execution.ExecuteActionsTaskExecuter.execute(ExecuteActionsTaskExecuter.java:77)\n    at org.gradle.api.internal.tasks.execution.OutputDirectoryCreatingTaskExecuter.execute(OutputDirectoryCreatingTaskExecuter.java:51)\n    at org.gradle.api.internal.tasks.execution.SkipUpToDateTaskExecuter.execute(SkipUpToDateTaskExecuter.java:59)\n    at org.gradle.api.internal.tasks.execution.ResolveTaskOutputCachingStateExecuter.execute(ResolveTaskOutputCachingStateExecuter.java:54)\n    at org.gradle.api.internal.tasks.execution.ValidatingTaskExecuter.execute(ValidatingTaskExecuter.java:59)\n    at org.gradle.api.internal.tasks.execution.SkipEmptySourceFilesTaskExecuter.execute(SkipEmptySourceFilesTaskExecuter.java:101)\n    at org.gradle.api.internal.tasks.execution.FinalizeInputFilePropertiesTaskExecuter.execute(FinalizeInputFilePropertiesTaskExecuter.java:44)\n    at org.gradle.api.internal.tasks.execution.CleanupStaleOutputsExecuter.execute(CleanupStaleOutputsExecuter.java:91)\n    at org.gradle.api.internal.tasks.execution.ResolveTaskArtifactStateTaskExecuter.execute(ResolveTaskArtifactStateTaskExecuter.java:62)\n    at org.gradle.api.internal.tasks.execution.SkipTaskWithNoActionsExecuter.execute(SkipTaskWithNoActionsExecuter.java:59)\n    at org.gradle.api.internal.tasks.execution.SkipOnlyIfTaskExecuter.execute(SkipOnlyIfTaskExecuter.java:54)\n    at org.gradle.api.internal.tasks.execution.ExecuteAtMostOnceTaskExecuter.execute(ExecuteAtMostOnceTaskExecuter.java:43)\n    at org.gradle.api.internal.tasks.execution.CatchExceptionTaskExecuter.execute(CatchExceptionTaskExecuter.java:34)\n    at org.gradle.api.internal.tasks.execution.EventFiringTaskExecuter$1.run(EventFiringTaskExecuter.java:51)\n    at org.gradle.internal.operations.DefaultBuildOperationExecutor$RunnableBuildOperationWorker.execute(DefaultBuildOperationExecutor.java:300)\n    at org.gradle.internal.operations.DefaultBuildOperationExecutor$RunnableBuildOperationWorker.execute(DefaultBuildOperationExecutor.java:292)\n    at org.gradle.internal.operations.DefaultBuildOperationExecutor.execute(DefaultBuildOperationExecutor.java:174)\n    at org.gradle.internal.operations.DefaultBuildOperationExecutor.run(DefaultBuildOperationExecutor.java:90)\n    at org.gradle.internal.operations.DelegatingBuildOperationExecutor.run(DelegatingBuildOperationExecutor.java:31)\n    at org.gradle.api.internal.tasks.execution.EventFiringTaskExecuter.execute(EventFiringTaskExecuter.java:46)\n    at org.gradle.execution.taskgraph.LocalTaskInfoExecutor.execute(LocalTaskInfoExecutor.java:42)\n    at org.gradle.execution.taskgraph.DefaultTaskExecutionGraph$BuildOperationAwareWorkItemExecutor.execute(DefaultTaskExecutionGraph.java:273)\n    at org.gradle.execution.taskgraph.DefaultTaskExecutionGraph$BuildOperationAwareWorkItemExecutor.execute(DefaultTaskExecutionGraph.java:258)\n    at org.gradle.execution.taskgraph.DefaultTaskPlanExecutor$ExecutorWorker$1.execute(DefaultTaskPlanExecutor.java:135)\n    at org.gradle.execution.taskgraph.DefaultTaskPlanExecutor$ExecutorWorker$1.execute(DefaultTaskPlanExecutor.java:130)\n    at org.gradle.execution.taskgraph.DefaultTaskPlanExecutor$ExecutorWorker.execute(DefaultTaskPlanExecutor.java:200)\n    at org.gradle.execution.taskgraph.DefaultTaskPlanExecutor$ExecutorWorker.executeWithWork(DefaultTaskPlanExecutor.java:191)\n    at org.gradle.execution.taskgraph.DefaultTaskPlanExecutor$ExecutorWorker.run(DefaultTaskPlanExecutor.java:130)\n    ... 6 more\nCaused by: org.gradle.api.GradleException: Internal compiler error. See log for more details\n    at org.jetbrains.kotlin.gradle.tasks.TasksUtilsKt.throwGradleExceptionIfError(tasksUtils.kt:17)\n    at org.jetbrains.kotlin.gradle.tasks.KotlinCompile.processCompilerExitCode(Tasks.kt:434)\n    at org.jetbrains.kotlin.gradle.tasks.KotlinCompile.callCompiler$kotlin_gradle_plugin(Tasks.kt:396)\n    at org.jetbrains.kotlin.gradle.tasks.KotlinCompile.callCompiler$kotlin_gradle_plugin(Tasks.kt:292)\n    at org.jetbrains.kotlin.gradle.tasks.AbstractKotlinCompile.execute(Tasks.kt:254)\n    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\n    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n    at java.lang.reflect.Method.invoke(Method.java:498)\n    at org.gradle.internal.reflect.JavaMethod.invoke(JavaMethod.java:73)\n    at org.gradle.api.internal.project.taskfactory.IncrementalTaskAction.doExecute(IncrementalTaskAction.java:50)\n    at org.gradle.api.internal.project.taskfactory.StandardTaskAction.execute(StandardTaskAction.java:39)\n    at org.gradle.api.internal.project.taskfactory.StandardTaskAction.execute(StandardTaskAction.java:26)\n    at org.gradle.api.internal.tasks.execution.ExecuteActionsTaskExecuter$1.run(ExecuteActionsTaskExecuter.java:131)\n    at org.gradle.internal.operations.DefaultBuildOperationExecutor$RunnableBuildOperationWorker.execute(DefaultBuildOperationExecutor.java:300)\n    at org.gradle.internal.operations.DefaultBuildOperationExecutor$RunnableBuildOperationWorker.execute(DefaultBuildOperationExecutor.java:292)\n    at org.gradle.internal.operations.DefaultBuildOperationExecutor.execute(DefaultBuildOperationExecutor.java:174)\n    at org.gradle.internal.operations.DefaultBuildOperationExecutor.run(DefaultBuildOperationExecutor.java:90)\n    at org.gradle.internal.operations.DelegatingBuildOperationExecutor.run(DelegatingBuildOperationExecutor.java:31)\n    at org.gradle.api.internal.tasks.execution.ExecuteActionsTaskExecuter.executeAction(ExecuteActionsTaskExecuter.java:120)\n    at org.gradle.api.internal.tasks.execution.ExecuteActionsTaskExecuter.executeActions(ExecuteActionsTaskExecuter.java:99)\n    ... 34 more\n</code></pre>\n\n<p>And in the log:</p>\n\n<pre><code>org.gradle.api.tasks.TaskExecutionException: Execution failed for task ':app:compileDebugKotlin'.\n    at org.gradle.api.internal.tasks.execution.ExecuteActionsTaskExecuter.executeActions(ExecuteActionsTaskExecuter.java:110)\n    at org.gradle.api.internal.tasks.execution.ExecuteActionsTaskExecuter.execute(ExecuteActionsTaskExecuter.java:77)\n    at org.gradle.api.internal.tasks.execution.OutputDirectoryCreatingTaskExecuter.execute(OutputDirectoryCreatingTaskExecuter.java:51)\n    at org.gradle.api.internal.tasks.execution.SkipUpToDateTaskExecuter.execute(SkipUpToDateTaskExecuter.java:59)\n    at org.gradle.api.internal.tasks.execution.ResolveTaskOutputCachingStateExecuter.execute(ResolveTaskOutputCachingStateExecuter.java:54)\n    at org.gradle.api.internal.tasks.execution.ValidatingTaskExecuter.execute(ValidatingTaskExecuter.java:59)\n    at org.gradle.api.internal.tasks.execution.SkipEmptySourceFilesTaskExecuter.execute(SkipEmptySourceFilesTaskExecuter.java:101)\n    at org.gradle.api.internal.tasks.execution.FinalizeInputFilePropertiesTaskExecuter.execute(FinalizeInputFilePropertiesTaskExecuter.java:44)\n    at org.gradle.api.internal.tasks.execution.CleanupStaleOutputsExecuter.execute(CleanupStaleOutputsExecuter.java:91)\n    at org.gradle.api.internal.tasks.execution.ResolveTaskArtifactStateTaskExecuter.execute(ResolveTaskArtifactStateTaskExecuter.java:62)\n    at org.gradle.api.internal.tasks.execution.SkipTaskWithNoActionsExecuter.execute(SkipTaskWithNoActionsExecuter.java:59)\n    at org.gradle.api.internal.tasks.execution.SkipOnlyIfTaskExecuter.execute(SkipOnlyIfTaskExecuter.java:54)\n    at org.gradle.api.internal.tasks.execution.ExecuteAtMostOnceTaskExecuter.execute(ExecuteAtMostOnceTaskExecuter.java:43)\n    at org.gradle.api.internal.tasks.execution.CatchExceptionTaskExecuter.execute(CatchExceptionTaskExecuter.java:34)\n    at org.gradle.api.internal.tasks.execution.EventFiringTaskExecuter$1.run(EventFiringTaskExecuter.java:51)\n    at org.gradle.internal.operations.DefaultBuildOperationExecutor$RunnableBuildOperationWorker.execute(DefaultBuildOperationExecutor.java:300)\n    at org.gradle.internal.operations.DefaultBuildOperationExecutor$RunnableBuildOperationWorker.execute(DefaultBuildOperationExecutor.java:292)\n    at org.gradle.internal.operations.DefaultBuildOperationExecutor.execute(DefaultBuildOperationExecutor.java:174)\n    at org.gradle.internal.operations.DefaultBuildOperationExecutor.run(DefaultBuildOperationExecutor.java:90)\n    at org.gradle.internal.operations.DelegatingBuildOperationExecutor.run(DelegatingBuildOperationExecutor.java:31)\n    at org.gradle.api.internal.tasks.execution.EventFiringTaskExecuter.execute(EventFiringTaskExecuter.java:46)\n    at org.gradle.execution.taskgraph.LocalTaskInfoExecutor.execute(LocalTaskInfoExecutor.java:42)\n    at org.gradle.execution.taskgraph.DefaultTaskExecutionGraph$BuildOperationAwareWorkItemExecutor.execute(DefaultTaskExecutionGraph.java:273)\n    at org.gradle.execution.taskgraph.DefaultTaskExecutionGraph$BuildOperationAwareWorkItemExecutor.execute(DefaultTaskExecutionGraph.java:258)\n    at org.gradle.execution.taskgraph.DefaultTaskPlanExecutor$ExecutorWorker$1.execute(DefaultTaskPlanExecutor.java:135)\n    at org.gradle.execution.taskgraph.DefaultTaskPlanExecutor$ExecutorWorker$1.execute(DefaultTaskPlanExecutor.java:130)\n    at org.gradle.execution.taskgraph.DefaultTaskPlanExecutor$ExecutorWorker.execute(DefaultTaskPlanExecutor.java:200)\n    at org.gradle.execution.taskgraph.DefaultTaskPlanExecutor$ExecutorWorker.executeWithWork(DefaultTaskPlanExecutor.java:191)\n    at org.gradle.execution.taskgraph.DefaultTaskPlanExecutor$ExecutorWorker.run(DefaultTaskPlanExecutor.java:130)\n    at org.gradle.internal.concurrent.ExecutorPolicy$CatchAndRecordFailures.onExecute(ExecutorPolicy.java:63)\n    at org.gradle.internal.concurrent.ManagedExecutorImpl$1.run(ManagedExecutorImpl.java:46)\n    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)\n    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)\n    at org.gradle.internal.concurrent.ThreadFactoryImpl$ManagedThreadRunnable.run(ThreadFactoryImpl.java:55)\n    at java.lang.Thread.run(Thread.java:745)\nCaused by: org.gradle.api.GradleException: Internal compiler error. See log for more details\n    at org.jetbrains.kotlin.gradle.tasks.TasksUtilsKt.throwGradleExceptionIfError(tasksUtils.kt:17)\n    at org.jetbrains.kotlin.gradle.tasks.KotlinCompile.processCompilerExitCode(Tasks.kt:434)\n    at org.jetbrains.kotlin.gradle.tasks.KotlinCompile.callCompiler$kotlin_gradle_plugin(Tasks.kt:396)\n    at org.jetbrains.kotlin.gradle.tasks.KotlinCompile.callCompiler$kotlin_gradle_plugin(Tasks.kt:292)\n    at org.jetbrains.kotlin.gradle.tasks.AbstractKotlinCompile.execute(Tasks.kt:254)\n    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\n    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n    at java.lang.reflect.Method.invoke(Method.java:498)\n    at org.gradle.internal.reflect.JavaMethod.invoke(JavaMethod.java:73)\n    at org.gradle.api.internal.project.taskfactory.IncrementalTaskAction.doExecute(IncrementalTaskAction.java:50)\n    at org.gradle.api.internal.project.taskfactory.StandardTaskAction.execute(StandardTaskAction.java:39)\n    at org.gradle.api.internal.project.taskfactory.StandardTaskAction.execute(StandardTaskAction.java:26)\n    at org.gradle.api.internal.tasks.execution.ExecuteActionsTaskExecuter$1.run(ExecuteActionsTaskExecuter.java:131)\n    at org.gradle.internal.operations.DefaultBuildOperationExecutor$RunnableBuildOperationWorker.execute(DefaultBuildOperationExecutor.java:300)\n    at org.gradle.internal.operations.DefaultBuildOperationExecutor$RunnableBuildOperationWorker.execute(DefaultBuildOperationExecutor.java:292)\n    at org.gradle.internal.operations.DefaultBuildOperationExecutor.execute(DefaultBuildOperationExecutor.java:174)\n    at org.gradle.internal.operations.DefaultBuildOperationExecutor.run(DefaultBuildOperationExecutor.java:90)\n    at org.gradle.internal.operations.DelegatingBuildOperationExecutor.run(DelegatingBuildOperationExecutor.java:31)\n    at org.gradle.api.internal.tasks.execution.ExecuteActionsTaskExecuter.executeAction(ExecuteActionsTaskExecuter.java:120)\n    at org.gradle.api.internal.tasks.execution.ExecuteActionsTaskExecuter.executeActions(ExecuteActionsTaskExecuter.java:99)\n    ... 34 more\n</code></pre>\n\n<p>Any help will be greatly appreciated!\nEdit: I work from macOS High Sierra but am downloading Linux Mint and will probably try in that to see if the issue persists!</p>\n"},{"tags":["java","spring","spring-boot","netflix-eureka"],"comments":[{"owner":{"account_id":3192259,"reputation":117619,"user_id":2696260,"display_name":"M. Deinum"},"score":2,"creation_date":1589870492,"post_id":61884617,"comment_id":109456359,"body_markdown":"Well the `Caused by: java.lang.NoClassDefFoundError: com/google/common/collect/Lists` is telling you what is wrong (you are missing a dependency).","body":"Well the <code>Caused by: java.lang.NoClassDefFoundError: com&#47;google&#47;common&#47;collect&#47;Lists</code> is telling you what is wrong (you are missing a dependency)."},{"owner":{"account_id":10263461,"reputation":231,"user_id":7574116,"accept_rate":25,"display_name":"SrikR"},"score":0,"creation_date":1589871788,"post_id":61884617,"comment_id":109456868,"body_markdown":"@M.Deinum, yes even i thought same and added following dependency \\&lt;groupId&gt;com.google.guava&lt;/groupId&gt;&lt;artifactId&gt;guava&lt;/artifactId&gt;version&gt;29.0-jre&lt;/version&gt; but still no luck, can you guide me in finding required dependency","body":"@M.Deinum, yes even i thought same and added following dependency \\&lt;groupId&gt;com.google.guava&lt;/groupId&gt;&lt;artifactId&gt;guava&lt;/artif&zwnj;&#8203;actId&gt;version&gt;29.0-j&zwnj;&#8203;re&lt;/version&gt; but still no luck, can you guide me in finding required dependency"},{"owner":{"account_id":3192259,"reputation":117619,"user_id":2696260,"display_name":"M. Deinum"},"score":1,"creation_date":1589872209,"post_id":61884617,"comment_id":109457058,"body_markdown":"The fact that you added that dependency doesn&#39;t mean you have other issues? ALso could be that the jar is corrupted. Try `mvn dependency:purge-local-repository` which will remove all dependencies and afterwards (when building) reload them. You might want to try first without the Guava dependency (ideally it should be pulled in automatically).","body":"The fact that you added that dependency doesn&#39;t mean you have other issues? ALso could be that the jar is corrupted. Try <code>mvn dependency:purge-local-repository</code> which will remove all dependencies and afterwards (when building) reload them. You might want to try first without the Guava dependency (ideally it should be pulled in automatically)."}],"answers":[{"tags":[],"owner":{"account_id":14707994,"reputation":162,"user_id":10622099,"display_name":"DaniyalVaghar"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1602068763,"creation_date":1602068763,"answer_id":64242754,"question_id":61884617,"body_markdown":"it seems your problem because of using Lists whithout adding its dependency in maven\r\nadd the code blow to your pom:\r\n\r\n        &lt;dependency&gt;\r\n                &lt;groupId&gt;com.google.guava&lt;/groupId&gt;\r\n                &lt;artifactId&gt;guava&lt;/artifactId&gt;\r\n                &lt;version&gt;29.0-jre&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n\r\n\r\n","title":"BeanCreationException: Error creating bean with name &#39;simpleMeterRegistry&#39; is thrown on adding eureka server to spring boot Applicatio","body":"<p>it seems your problem because of using Lists whithout adding its dependency in maven\nadd the code blow to your pom:</p>\n<pre><code>    &lt;dependency&gt;\n            &lt;groupId&gt;com.google.guava&lt;/groupId&gt;\n            &lt;artifactId&gt;guava&lt;/artifactId&gt;\n            &lt;version&gt;29.0-jre&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n"}],"owner":{"account_id":10263461,"reputation":231,"user_id":7574116,"accept_rate":25,"display_name":"SrikR"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":9134,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":1,"score":2,"last_activity_date":1692097555,"creation_date":1589869911,"question_id":61884617,"body_markdown":"I am just trying to learn spring microservices with reference to udemy course. So as part of exercise i was trying to create and run a component with eureka server but I am not able to run application because of following error: UnsatisfiedDependencyException: Error creating bean with name &#39;webMvcMetricsFilter&#39;.\r\n\r\nSince I am new to spring boot and eureka server can anyone help me in identifying the mistake I am doing here due to which applcation fails.\r\n\r\nFollowing are the details related to application:\r\n\r\n**Spring boot logs:**\r\n\r\n    020-05-19 11:51:38.457  INFO 25168 --- [           main] ConditionEvaluationReportLoggingListener : \r\n    \r\n    Error starting ApplicationContext. To display the conditions report re-run your application with &#39;debug&#39; enabled.\r\n    2020-05-19 11:51:38.471 ERROR 25168 --- [           main] o.s.boot.SpringApplication               : Application run failed\r\n    \r\n    org.springframework.context.ApplicationContextException: Unable to start web server; nested exception is org.springframework.boot.web.server.WebServerException: Unable to start embedded Tomcat\r\n    \tat org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.onRefresh(ServletWebServerApplicationContext.java:156) ~[spring-boot-2.1.14.RELEASE.jar:2.1.14.RELEASE]\r\n    \tat org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:543) ~[spring-context-5.1.15.RELEASE.jar:5.1.15.RELEASE]\r\n    \tat org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:141) ~[spring-boot-2.1.14.RELEASE.jar:2.1.14.RELEASE]\r\n    \tat org.springframework.boot.SpringApplication.refresh(SpringApplication.java:744) [spring-boot-2.1.14.RELEASE.jar:2.1.14.RELEASE]\r\n    \tat org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:391) [spring-boot-2.1.14.RELEASE.jar:2.1.14.RELEASE]\r\n    \tat org.springframework.boot.SpringApplication.run(SpringApplication.java:312) [spring-boot-2.1.14.RELEASE.jar:2.1.14.RELEASE]\r\n    \tat org.springframework.boot.SpringApplication.run(SpringApplication.java:1215) [spring-boot-2.1.14.RELEASE.jar:2.1.14.RELEASE]\r\n    \tat org.springframework.boot.SpringApplication.run(SpringApplication.java:1204) [spring-boot-2.1.14.RELEASE.jar:2.1.14.RELEASE]\r\n    \tat com.srik.namingservereureka.NamingServerEurekaApplication.main(NamingServerEurekaApplication.java:25) [classes/:na]\r\n    Caused by: org.springframework.boot.web.server.WebServerException: Unable to start embedded Tomcat\r\n    \tat org.springframework.boot.web.embedded.tomcat.TomcatWebServer.initialize(TomcatWebServer.java:124) ~[spring-boot-2.1.14.RELEASE.jar:2.1.14.RELEASE]\r\n    \tat org.springframework.boot.web.embedded.tomcat.TomcatWebServer.&lt;init&gt;(TomcatWebServer.java:86) ~[spring-boot-2.1.14.RELEASE.jar:2.1.14.RELEASE]\r\n    \tat org.springframework.boot.web.embedded.tomcat.TomcatServletWebServerFactory.getTomcatWebServer(TomcatServletWebServerFactory.java:416) ~[spring-boot-2.1.14.RELEASE.jar:2.1.14.RELEASE]\r\n    \tat org.springframework.boot.web.embedded.tomcat.TomcatServletWebServerFactory.getWebServer(TomcatServletWebServerFactory.java:180) ~[spring-boot-2.1.14.RELEASE.jar:2.1.14.RELEASE]\r\n    \tat org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.createWebServer(ServletWebServerApplicationContext.java:180) ~[spring-boot-2.1.14.RELEASE.jar:2.1.14.RELEASE]\r\n    \tat org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.onRefresh(ServletWebServerApplicationContext.java:153) ~[spring-boot-2.1.14.RELEASE.jar:2.1.14.RELEASE]\r\n    \t... 8 common frames omitted\r\n    Caused by: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name &#39;webMvcMetricsFilter&#39; defined in class path resource [org/springframework/boot/actuate/autoconfigure/metrics/web/servlet/WebMvcMetricsAutoConfiguration.class]: Unsatisfied dependency expressed through method &#39;webMvcMetricsFilter&#39; parameter 0; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name &#39;simpleMeterRegistry&#39; defined in class path resource [org/springframework/boot/actuate/autoconfigure/metrics/export/simple/SimpleMetricsExportAutoConfiguration.class]: Initialization of bean failed; nested exception is java.lang.NoClassDefFoundError: com/google/common/collect/Lists\r\n    \tat org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:769) ~[spring-beans-5.1.15.RELEASE.jar:5.1.15.RELEASE]\r\n    \tat org.springframework.beans.factory.support.ConstructorResolver.instantiateUsingFactoryMethod(ConstructorResolver.java:509) ~[spring-beans-5.1.15.RELEASE.jar:5.1.15.RELEASE]\r\n    \tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateUsingFactoryMethod(AbstractAutowireCapableBeanFactory.java:1320) ~[spring-beans-5.1.15.RELEASE.jar:5.1.15.RELEASE]\r\n    \tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1159) ~[spring-beans-5.1.15.RELEASE.jar:5.1.15.RELEASE]\r\n    \tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:555) ~[spring-beans-5.1.15.RELEASE.jar:5.1.15.RELEASE]\r\n    \tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:515) ~[spring-beans-5.1.15.RELEASE.jar:5.1.15.RELEASE]\r\n    \tat org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:320) ~[spring-beans-5.1.15.RELEASE.jar:5.1.15.RELEASE]\r\n    \tat org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:226) ~[spring-beans-5.1.15.RELEASE.jar:5.1.15.RELEASE]\r\n    \tat org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:318) ~[spring-beans-5.1.15.RELEASE.jar:5.1.15.RELEASE]\r\n    \tat org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:204) ~[spring-beans-5.1.15.RELEASE.jar:5.1.15.RELEASE]\r\n    \tat org.springframework.boot.web.servlet.ServletContextInitializerBeans.getOrderedBeansOfType(ServletContextInitializerBeans.java:211) ~[spring-boot-2.1.14.RELEASE.jar:2.1.14.RELEASE]\r\n    \tat org.springframework.boot.web.servlet.ServletContextInitializerBeans.getOrderedBeansOfType(ServletContextInitializerBeans.java:202) ~[spring-boot-2.1.14.RELEASE.jar:2.1.14.RELEASE]\r\n    \tat org.springframework.boot.web.servlet.ServletContextInitializerBeans.addServletContextInitializerBeans(ServletContextInitializerBeans.java:96) ~[spring-boot-2.1.14.RELEASE.jar:2.1.14.RELEASE]\r\n    \tat org.springframework.boot.web.servlet.ServletContextInitializerBeans.&lt;init&gt;(ServletContextInitializerBeans.java:85) ~[spring-boot-2.1.14.RELEASE.jar:2.1.14.RELEASE]\r\n    \tat org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.getServletContextInitializerBeans(ServletWebServerApplicationContext.java:253) ~[spring-boot-2.1.14.RELEASE.jar:2.1.14.RELEASE]\r\n    \tat org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.selfInitialize(ServletWebServerApplicationContext.java:227) ~[spring-boot-2.1.14.RELEASE.jar:2.1.14.RELEASE]\r\n    \tat org.springframework.boot.web.embedded.tomcat.TomcatStarter.onStartup(TomcatStarter.java:53) ~[spring-boot-2.1.14.RELEASE.jar:2.1.14.RELEASE]\r\n    \tat org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:5140) ~[tomcat-embed-core-9.0.34.jar:9.0.34]\r\n    \tat org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:183) ~[tomcat-embed-core-9.0.34.jar:9.0.34]\r\n    \tat org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1384) ~[tomcat-embed-core-9.0.34.jar:9.0.34]\r\n    \tat org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1374) ~[tomcat-embed-core-9.0.34.jar:9.0.34]\r\n    \tat java.util.concurrent.FutureTask.run(FutureTask.java:266) ~[na:1.8.0_181]\r\n    \tat org.apache.tomcat.util.threads.InlineExecutorService.execute(InlineExecutorService.java:75) ~[tomcat-embed-core-9.0.34.jar:9.0.34]\r\n    \tat java.util.concurrent.AbstractExecutorService.submit(AbstractExecutorService.java:134) ~[na:1.8.0_181]\r\n    \tat org.apache.catalina.core.ContainerBase.startInternal(ContainerBase.java:909) ~[tomcat-embed-core-9.0.34.jar:9.0.34]\r\n    \tat org.apache.catalina.core.StandardHost.startInternal(StandardHost.java:841) ~[tomcat-embed-core-9.0.34.jar:9.0.34]\r\n    \tat org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:183) ~[tomcat-embed-core-9.0.34.jar:9.0.34]\r\n    \tat org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1384) ~[tomcat-embed-core-9.0.34.jar:9.0.34]\r\n    \tat org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1374) ~[tomcat-embed-core-9.0.34.jar:9.0.34]\r\n    \tat java.util.concurrent.FutureTask.run(FutureTask.java:266) ~[na:1.8.0_181]\r\n    \tat org.apache.tomcat.util.threads.InlineExecutorService.execute(InlineExecutorService.java:75) ~[tomcat-embed-core-9.0.34.jar:9.0.34]\r\n    \tat java.util.concurrent.AbstractExecutorService.submit(AbstractExecutorService.java:134) ~[na:1.8.0_181]\r\n    \tat org.apache.catalina.core.ContainerBase.startInternal(ContainerBase.java:909) ~[tomcat-embed-core-9.0.34.jar:9.0.34]\r\n    \tat org.apache.catalina.core.StandardEngine.startInternal(StandardEngine.java:262) ~[tomcat-embed-core-9.0.34.jar:9.0.34]\r\n    \tat org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:183) ~[tomcat-embed-core-9.0.34.jar:9.0.34]\r\n    \tat org.apache.catalina.core.StandardService.startInternal(StandardService.java:421) ~[tomcat-embed-core-9.0.34.jar:9.0.34]\r\n    \tat org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:183) ~[tomcat-embed-core-9.0.34.jar:9.0.34]\r\n    \tat org.apache.catalina.core.StandardServer.startInternal(StandardServer.java:930) ~[tomcat-embed-core-9.0.34.jar:9.0.34]\r\n    \tat org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:183) ~[tomcat-embed-core-9.0.34.jar:9.0.34]\r\n    \tat org.apache.catalina.startup.Tomcat.start(Tomcat.java:468) ~[tomcat-embed-core-9.0.34.jar:9.0.34]\r\n    \tat org.springframework.boot.web.embedded.tomcat.TomcatWebServer.initialize(TomcatWebServer.java:105) ~[spring-boot-2.1.14.RELEASE.jar:2.1.14.RELEASE]\r\n    \t... 13 common frames omitted\r\n    Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name &#39;simpleMeterRegistry&#39; defined in class path resource [org/springframework/boot/actuate/autoconfigure/metrics/export/simple/SimpleMetricsExportAutoConfiguration.class]: Initialization of bean failed; nested exception is java.lang.NoClassDefFoundError: com/google/common/collect/Lists\r\n    \tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:601) ~[spring-beans-5.1.15.RELEASE.jar:5.1.15.RELEASE]\r\n    \tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:515) ~[spring-beans-5.1.15.RELEASE.jar:5.1.15.RELEASE]\r\n    \tat org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:320) ~[spring-beans-5.1.15.RELEASE.jar:5.1.15.RELEASE]\r\n    \tat org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:226) ~[spring-beans-5.1.15.RELEASE.jar:5.1.15.RELEASE]\r\n    \tat org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:318) ~[spring-beans-5.1.15.RELEASE.jar:5.1.15.RELEASE]\r\n    \tat org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199) ~[spring-beans-5.1.15.RELEASE.jar:5.1.15.RELEASE]\r\n    \tat org.springframework.beans.factory.config.DependencyDescriptor.resolveCandidate(DependencyDescriptor.java:277) ~[spring-beans-5.1.15.RELEASE.jar:5.1.15.RELEASE]\r\n    \tat org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1271) ~[spring-beans-5.1.15.RELEASE.jar:5.1.15.RELEASE]\r\n    \tat org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1191) ~[spring-beans-5.1.15.RELEASE.jar:5.1.15.RELEASE]\r\n    \tat org.springframework.beans.factory.support.ConstructorResolver.resolveAutowiredArgument(ConstructorResolver.java:857) ~[spring-beans-5.1.15.RELEASE.jar:5.1.15.RELEASE]\r\n    \tat org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:760) ~[spring-beans-5.1.15.RELEASE.jar:5.1.15.RELEASE]\r\n    \t... 53 common frames omitted\r\n    Caused by: java.lang.NoClassDefFoundError: com/google/common/collect/Lists\r\n    \tat com.netflix.config.PropertyWrapper.&lt;init&gt;(PropertyWrapper.java:41) ~[archaius-core-0.7.6.jar:0.7.6]\r\n    \tat com.netflix.hystrix.strategy.properties.archaius.HystrixDynamicPropertiesArchaius$ArchaiusDynamicProperty.&lt;init&gt;(HystrixDynamicPropertiesArchaius.java:62) ~[hystrix-core-1.5.18.jar:1.5.18]\r\n    \tat com.netflix.hystrix.strategy.properties.archaius.HystrixDynamicPropertiesArchaius$StringDynamicProperty.&lt;init&gt;(HystrixDynamicPropertiesArchaius.java:73) ~[hystrix-core-1.5.18.jar:1.5.18]\r\n    \tat com.netflix.hystrix.strategy.properties.archaius.HystrixDynamicPropertiesArchaius.getString(HystrixDynamicPropertiesArchaius.java:34) ~[hystrix-core-1.5.18.jar:1.5.18]\r\n    \tat com.netflix.hystrix.strategy.HystrixPlugins.getPluginImplementationViaProperties(HystrixPlugins.java:344) ~[hystrix-core-1.5.18.jar:1.5.18]\r\n    \tat com.netflix.hystrix.strategy.HystrixPlugins.getPluginImplementation(HystrixPlugins.java:334) ~[hystrix-core-1.5.18.jar:1.5.18]\r\n    \tat com.netflix.hystrix.strategy.HystrixPlugins.getEventNotifier(HystrixPlugins.java:129) ~[hystrix-core-1.5.18.jar:1.5.18]\r\n    \tat io.micrometer.core.instrument.binder.hystrix.HystrixMetricsBinder.bindTo(HystrixMetricsBinder.java:36) ~[micrometer-core-1.1.13.jar:1.1.13]\r\n    \tat org.springframework.boot.actuate.autoconfigure.metrics.MeterRegistryConfigurer.lambda$addBinders$1(MeterRegistryConfigurer.java:84) ~[spring-boot-actuator-autoconfigure-2.1.14.RELEASE.jar:2.1.14.RELEASE]\r\n    \tat java.util.stream.ForEachOps$ForEachOp$OfRef.accept(ForEachOps.java:184) ~[na:1.8.0_181]\r\n    \tat java.util.ArrayList.forEach(ArrayList.java:1257) ~[na:1.8.0_181]\r\n    \tat java.util.stream.SortedOps$RefSortingSink.end(SortedOps.java:390) ~[na:1.8.0_181]\r\n    \tat java.util.stream.Sink$ChainedReference.end(Sink.java:258) ~[na:1.8.0_181]\r\n    \tat java.util.stream.Sink$ChainedReference.end(Sink.java:258) ~[na:1.8.0_181]\r\n    \tat java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:482) ~[na:1.8.0_181]\r\n    \tat java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:471) ~[na:1.8.0_181]\r\n    \tat java.util.stream.ForEachOps$ForEachOp.evaluateSequential(ForEachOps.java:151) ~[na:1.8.0_181]\r\n    \tat java.util.stream.ForEachOps$ForEachOp$OfRef.evaluateSequential(ForEachOps.java:174) ~[na:1.8.0_181]\r\n    \tat java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234) ~[na:1.8.0_181]\r\n    \tat java.util.stream.ReferencePipeline.forEach(ReferencePipeline.java:418) ~[na:1.8.0_181]\r\n    \tat org.springframework.boot.actuate.autoconfigure.metrics.MeterRegistryConfigurer.addBinders(MeterRegistryConfigurer.java:84) ~[spring-boot-actuator-autoconfigure-2.1.14.RELEASE.jar:2.1.14.RELEASE]\r\n    \tat org.springframework.boot.actuate.autoconfigure.metrics.MeterRegistryConfigurer.configure(MeterRegistryConfigurer.java:66) ~[spring-boot-actuator-autoconfigure-2.1.14.RELEASE.jar:2.1.14.RELEASE]\r\n    \tat org.springframework.boot.actuate.autoconfigure.metrics.MeterRegistryPostProcessor.postProcessAfterInitialization(MeterRegistryPostProcessor.java:64) ~[spring-boot-actuator-autoconfigure-2.1.14.RELEASE.jar:2.1.14.RELEASE]\r\n    \tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.applyBeanPostProcessorsAfterInitialization(AbstractAutowireCapableBeanFactory.java:429) ~[spring-beans-5.1.15.RELEASE.jar:5.1.15.RELEASE]\r\n    \tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1775) ~[spring-beans-5.1.15.RELEASE.jar:5.1.15.RELEASE]\r\n    \tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:593) ~[spring-beans-5.1.15.RELEASE.jar:5.1.15.RELEASE]\r\n    \t... 63 common frames omitted\r\n    Caused by: java.lang.ClassNotFoundException: com.google.common.collect.Lists\r\n    \tat java.net.URLClassLoader.findClass(URLClassLoader.java:381) ~[na:1.8.0_181]\r\n    \tat java.lang.ClassLoader.loadClass(ClassLoader.java:424) ~[na:1.8.0_181]\r\n    \tat sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:349) ~[na:1.8.0_181]\r\n    \tat java.lang.ClassLoader.loadClass(ClassLoader.java:357) ~[na:1.8.0_181]\r\n    \t... 89 common frames omitted\r\n\r\n**pom.xml file:**\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n    &lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n    \txsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\r\n    \t&lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n    \t&lt;parent&gt;\r\n    \t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n    \t\t&lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\r\n    \t\t&lt;version&gt;2.1.14.RELEASE&lt;/version&gt;\r\n    \t\t&lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;\r\n    \t&lt;/parent&gt;\r\n    \t&lt;groupId&gt;com.srik&lt;/groupId&gt;\r\n    \t&lt;artifactId&gt;naming-server-eureka&lt;/artifactId&gt;\r\n    \t&lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\r\n    \t&lt;name&gt;naming-server-eureka&lt;/name&gt;\r\n    \t&lt;description&gt;Demo project for Spring Boot&lt;/description&gt;\r\n    \r\n    \t&lt;properties&gt;\r\n    \t\t&lt;java.version&gt;1.8&lt;/java.version&gt;\r\n    \t\t&lt;maven-jar-plugin.version&gt;3.1.1&lt;/maven-jar-plugin.version&gt;\r\n    \t\t&lt;spring-cloud.version&gt;Greenwich.SR5&lt;/spring-cloud.version&gt;\r\n    \t&lt;/properties&gt;\r\n    \r\n    \t&lt;dependencies&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;spring-boot-starter-actuator&lt;/artifactId&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;spring-cloud-starter-config&lt;/artifactId&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;spring-cloud-starter-netflix-eureka-server&lt;/artifactId&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;spring-boot-devtools&lt;/artifactId&gt;\r\n    \t\t\t&lt;scope&gt;runtime&lt;/scope&gt;\r\n    \t\t\t&lt;optional&gt;true&lt;/optional&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\r\n    \t\t\t&lt;scope&gt;test&lt;/scope&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t&lt;/dependencies&gt;\r\n    \r\n    \t&lt;dependencyManagement&gt;\r\n    \t\t&lt;dependencies&gt;\r\n    \t\t\t&lt;dependency&gt;\r\n    \t\t\t\t&lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;\r\n    \t\t\t\t&lt;artifactId&gt;spring-cloud-dependencies&lt;/artifactId&gt;\r\n    \t\t\t\t&lt;version&gt;${spring-cloud.version}&lt;/version&gt;\r\n    \t\t\t\t&lt;type&gt;pom&lt;/type&gt;\r\n    \t\t\t\t&lt;scope&gt;import&lt;/scope&gt;\r\n    \t\t\t&lt;/dependency&gt;\r\n    \t\t&lt;/dependencies&gt;\r\n    \t&lt;/dependencyManagement&gt;\r\n    \r\n    \t&lt;build&gt;\r\n    \t\t&lt;plugins&gt;\r\n    \t\t\t&lt;plugin&gt;\r\n    \t\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n    \t\t\t\t&lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\r\n    \t\t\t&lt;/plugin&gt;\r\n    \t\t&lt;/plugins&gt;\r\n    \t&lt;/build&gt;\r\n    \r\n    &lt;/project&gt;\r\n\r\n**application.properties file:**\r\n\r\n    spring.application.name=naming-server-eureka\r\n    server.port=8300\r\n    eureka.client.register-with-eureka=false\r\n    eureka.client.fetch-registry=false\r\n\r\n**Main method class:**\r\n\r\n    @SpringBootApplication\r\n    \r\n    @EnableEurekaServer\r\n    public class NamingServerEurekaApplication {\r\n    \r\n    \tpublic static void main(String[] args) {\r\n    \t\tSystem.setProperty(&quot;spring.devtools.restart.enabled&quot;, &quot;false&quot;);\r\n    \t\tSpringApplication.run(NamingServerEurekaApplication.class, args);\r\n    \t}\r\n    \r\n    }\r\n\r\n","title":"BeanCreationException: Error creating bean with name &#39;simpleMeterRegistry&#39; is thrown on adding eureka server to spring boot Applicatio","body":"<p>I am just trying to learn spring microservices with reference to udemy course. So as part of exercise i was trying to create and run a component with eureka server but I am not able to run application because of following error: UnsatisfiedDependencyException: Error creating bean with name 'webMvcMetricsFilter'.</p>\n\n<p>Since I am new to spring boot and eureka server can anyone help me in identifying the mistake I am doing here due to which applcation fails.</p>\n\n<p>Following are the details related to application:</p>\n\n<p><strong>Spring boot logs:</strong></p>\n\n<pre><code>020-05-19 11:51:38.457  INFO 25168 --- [           main] ConditionEvaluationReportLoggingListener : \n\nError starting ApplicationContext. To display the conditions report re-run your application with 'debug' enabled.\n2020-05-19 11:51:38.471 ERROR 25168 --- [           main] o.s.boot.SpringApplication               : Application run failed\n\norg.springframework.context.ApplicationContextException: Unable to start web server; nested exception is org.springframework.boot.web.server.WebServerException: Unable to start embedded Tomcat\n    at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.onRefresh(ServletWebServerApplicationContext.java:156) ~[spring-boot-2.1.14.RELEASE.jar:2.1.14.RELEASE]\n    at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:543) ~[spring-context-5.1.15.RELEASE.jar:5.1.15.RELEASE]\n    at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:141) ~[spring-boot-2.1.14.RELEASE.jar:2.1.14.RELEASE]\n    at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:744) [spring-boot-2.1.14.RELEASE.jar:2.1.14.RELEASE]\n    at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:391) [spring-boot-2.1.14.RELEASE.jar:2.1.14.RELEASE]\n    at org.springframework.boot.SpringApplication.run(SpringApplication.java:312) [spring-boot-2.1.14.RELEASE.jar:2.1.14.RELEASE]\n    at org.springframework.boot.SpringApplication.run(SpringApplication.java:1215) [spring-boot-2.1.14.RELEASE.jar:2.1.14.RELEASE]\n    at org.springframework.boot.SpringApplication.run(SpringApplication.java:1204) [spring-boot-2.1.14.RELEASE.jar:2.1.14.RELEASE]\n    at com.srik.namingservereureka.NamingServerEurekaApplication.main(NamingServerEurekaApplication.java:25) [classes/:na]\nCaused by: org.springframework.boot.web.server.WebServerException: Unable to start embedded Tomcat\n    at org.springframework.boot.web.embedded.tomcat.TomcatWebServer.initialize(TomcatWebServer.java:124) ~[spring-boot-2.1.14.RELEASE.jar:2.1.14.RELEASE]\n    at org.springframework.boot.web.embedded.tomcat.TomcatWebServer.&lt;init&gt;(TomcatWebServer.java:86) ~[spring-boot-2.1.14.RELEASE.jar:2.1.14.RELEASE]\n    at org.springframework.boot.web.embedded.tomcat.TomcatServletWebServerFactory.getTomcatWebServer(TomcatServletWebServerFactory.java:416) ~[spring-boot-2.1.14.RELEASE.jar:2.1.14.RELEASE]\n    at org.springframework.boot.web.embedded.tomcat.TomcatServletWebServerFactory.getWebServer(TomcatServletWebServerFactory.java:180) ~[spring-boot-2.1.14.RELEASE.jar:2.1.14.RELEASE]\n    at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.createWebServer(ServletWebServerApplicationContext.java:180) ~[spring-boot-2.1.14.RELEASE.jar:2.1.14.RELEASE]\n    at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.onRefresh(ServletWebServerApplicationContext.java:153) ~[spring-boot-2.1.14.RELEASE.jar:2.1.14.RELEASE]\n    ... 8 common frames omitted\nCaused by: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'webMvcMetricsFilter' defined in class path resource [org/springframework/boot/actuate/autoconfigure/metrics/web/servlet/WebMvcMetricsAutoConfiguration.class]: Unsatisfied dependency expressed through method 'webMvcMetricsFilter' parameter 0; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'simpleMeterRegistry' defined in class path resource [org/springframework/boot/actuate/autoconfigure/metrics/export/simple/SimpleMetricsExportAutoConfiguration.class]: Initialization of bean failed; nested exception is java.lang.NoClassDefFoundError: com/google/common/collect/Lists\n    at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:769) ~[spring-beans-5.1.15.RELEASE.jar:5.1.15.RELEASE]\n    at org.springframework.beans.factory.support.ConstructorResolver.instantiateUsingFactoryMethod(ConstructorResolver.java:509) ~[spring-beans-5.1.15.RELEASE.jar:5.1.15.RELEASE]\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateUsingFactoryMethod(AbstractAutowireCapableBeanFactory.java:1320) ~[spring-beans-5.1.15.RELEASE.jar:5.1.15.RELEASE]\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1159) ~[spring-beans-5.1.15.RELEASE.jar:5.1.15.RELEASE]\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:555) ~[spring-beans-5.1.15.RELEASE.jar:5.1.15.RELEASE]\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:515) ~[spring-beans-5.1.15.RELEASE.jar:5.1.15.RELEASE]\n    at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:320) ~[spring-beans-5.1.15.RELEASE.jar:5.1.15.RELEASE]\n    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:226) ~[spring-beans-5.1.15.RELEASE.jar:5.1.15.RELEASE]\n    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:318) ~[spring-beans-5.1.15.RELEASE.jar:5.1.15.RELEASE]\n    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:204) ~[spring-beans-5.1.15.RELEASE.jar:5.1.15.RELEASE]\n    at org.springframework.boot.web.servlet.ServletContextInitializerBeans.getOrderedBeansOfType(ServletContextInitializerBeans.java:211) ~[spring-boot-2.1.14.RELEASE.jar:2.1.14.RELEASE]\n    at org.springframework.boot.web.servlet.ServletContextInitializerBeans.getOrderedBeansOfType(ServletContextInitializerBeans.java:202) ~[spring-boot-2.1.14.RELEASE.jar:2.1.14.RELEASE]\n    at org.springframework.boot.web.servlet.ServletContextInitializerBeans.addServletContextInitializerBeans(ServletContextInitializerBeans.java:96) ~[spring-boot-2.1.14.RELEASE.jar:2.1.14.RELEASE]\n    at org.springframework.boot.web.servlet.ServletContextInitializerBeans.&lt;init&gt;(ServletContextInitializerBeans.java:85) ~[spring-boot-2.1.14.RELEASE.jar:2.1.14.RELEASE]\n    at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.getServletContextInitializerBeans(ServletWebServerApplicationContext.java:253) ~[spring-boot-2.1.14.RELEASE.jar:2.1.14.RELEASE]\n    at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.selfInitialize(ServletWebServerApplicationContext.java:227) ~[spring-boot-2.1.14.RELEASE.jar:2.1.14.RELEASE]\n    at org.springframework.boot.web.embedded.tomcat.TomcatStarter.onStartup(TomcatStarter.java:53) ~[spring-boot-2.1.14.RELEASE.jar:2.1.14.RELEASE]\n    at org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:5140) ~[tomcat-embed-core-9.0.34.jar:9.0.34]\n    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:183) ~[tomcat-embed-core-9.0.34.jar:9.0.34]\n    at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1384) ~[tomcat-embed-core-9.0.34.jar:9.0.34]\n    at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1374) ~[tomcat-embed-core-9.0.34.jar:9.0.34]\n    at java.util.concurrent.FutureTask.run(FutureTask.java:266) ~[na:1.8.0_181]\n    at org.apache.tomcat.util.threads.InlineExecutorService.execute(InlineExecutorService.java:75) ~[tomcat-embed-core-9.0.34.jar:9.0.34]\n    at java.util.concurrent.AbstractExecutorService.submit(AbstractExecutorService.java:134) ~[na:1.8.0_181]\n    at org.apache.catalina.core.ContainerBase.startInternal(ContainerBase.java:909) ~[tomcat-embed-core-9.0.34.jar:9.0.34]\n    at org.apache.catalina.core.StandardHost.startInternal(StandardHost.java:841) ~[tomcat-embed-core-9.0.34.jar:9.0.34]\n    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:183) ~[tomcat-embed-core-9.0.34.jar:9.0.34]\n    at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1384) ~[tomcat-embed-core-9.0.34.jar:9.0.34]\n    at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1374) ~[tomcat-embed-core-9.0.34.jar:9.0.34]\n    at java.util.concurrent.FutureTask.run(FutureTask.java:266) ~[na:1.8.0_181]\n    at org.apache.tomcat.util.threads.InlineExecutorService.execute(InlineExecutorService.java:75) ~[tomcat-embed-core-9.0.34.jar:9.0.34]\n    at java.util.concurrent.AbstractExecutorService.submit(AbstractExecutorService.java:134) ~[na:1.8.0_181]\n    at org.apache.catalina.core.ContainerBase.startInternal(ContainerBase.java:909) ~[tomcat-embed-core-9.0.34.jar:9.0.34]\n    at org.apache.catalina.core.StandardEngine.startInternal(StandardEngine.java:262) ~[tomcat-embed-core-9.0.34.jar:9.0.34]\n    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:183) ~[tomcat-embed-core-9.0.34.jar:9.0.34]\n    at org.apache.catalina.core.StandardService.startInternal(StandardService.java:421) ~[tomcat-embed-core-9.0.34.jar:9.0.34]\n    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:183) ~[tomcat-embed-core-9.0.34.jar:9.0.34]\n    at org.apache.catalina.core.StandardServer.startInternal(StandardServer.java:930) ~[tomcat-embed-core-9.0.34.jar:9.0.34]\n    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:183) ~[tomcat-embed-core-9.0.34.jar:9.0.34]\n    at org.apache.catalina.startup.Tomcat.start(Tomcat.java:468) ~[tomcat-embed-core-9.0.34.jar:9.0.34]\n    at org.springframework.boot.web.embedded.tomcat.TomcatWebServer.initialize(TomcatWebServer.java:105) ~[spring-boot-2.1.14.RELEASE.jar:2.1.14.RELEASE]\n    ... 13 common frames omitted\nCaused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'simpleMeterRegistry' defined in class path resource [org/springframework/boot/actuate/autoconfigure/metrics/export/simple/SimpleMetricsExportAutoConfiguration.class]: Initialization of bean failed; nested exception is java.lang.NoClassDefFoundError: com/google/common/collect/Lists\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:601) ~[spring-beans-5.1.15.RELEASE.jar:5.1.15.RELEASE]\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:515) ~[spring-beans-5.1.15.RELEASE.jar:5.1.15.RELEASE]\n    at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:320) ~[spring-beans-5.1.15.RELEASE.jar:5.1.15.RELEASE]\n    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:226) ~[spring-beans-5.1.15.RELEASE.jar:5.1.15.RELEASE]\n    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:318) ~[spring-beans-5.1.15.RELEASE.jar:5.1.15.RELEASE]\n    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199) ~[spring-beans-5.1.15.RELEASE.jar:5.1.15.RELEASE]\n    at org.springframework.beans.factory.config.DependencyDescriptor.resolveCandidate(DependencyDescriptor.java:277) ~[spring-beans-5.1.15.RELEASE.jar:5.1.15.RELEASE]\n    at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1271) ~[spring-beans-5.1.15.RELEASE.jar:5.1.15.RELEASE]\n    at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1191) ~[spring-beans-5.1.15.RELEASE.jar:5.1.15.RELEASE]\n    at org.springframework.beans.factory.support.ConstructorResolver.resolveAutowiredArgument(ConstructorResolver.java:857) ~[spring-beans-5.1.15.RELEASE.jar:5.1.15.RELEASE]\n    at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:760) ~[spring-beans-5.1.15.RELEASE.jar:5.1.15.RELEASE]\n    ... 53 common frames omitted\nCaused by: java.lang.NoClassDefFoundError: com/google/common/collect/Lists\n    at com.netflix.config.PropertyWrapper.&lt;init&gt;(PropertyWrapper.java:41) ~[archaius-core-0.7.6.jar:0.7.6]\n    at com.netflix.hystrix.strategy.properties.archaius.HystrixDynamicPropertiesArchaius$ArchaiusDynamicProperty.&lt;init&gt;(HystrixDynamicPropertiesArchaius.java:62) ~[hystrix-core-1.5.18.jar:1.5.18]\n    at com.netflix.hystrix.strategy.properties.archaius.HystrixDynamicPropertiesArchaius$StringDynamicProperty.&lt;init&gt;(HystrixDynamicPropertiesArchaius.java:73) ~[hystrix-core-1.5.18.jar:1.5.18]\n    at com.netflix.hystrix.strategy.properties.archaius.HystrixDynamicPropertiesArchaius.getString(HystrixDynamicPropertiesArchaius.java:34) ~[hystrix-core-1.5.18.jar:1.5.18]\n    at com.netflix.hystrix.strategy.HystrixPlugins.getPluginImplementationViaProperties(HystrixPlugins.java:344) ~[hystrix-core-1.5.18.jar:1.5.18]\n    at com.netflix.hystrix.strategy.HystrixPlugins.getPluginImplementation(HystrixPlugins.java:334) ~[hystrix-core-1.5.18.jar:1.5.18]\n    at com.netflix.hystrix.strategy.HystrixPlugins.getEventNotifier(HystrixPlugins.java:129) ~[hystrix-core-1.5.18.jar:1.5.18]\n    at io.micrometer.core.instrument.binder.hystrix.HystrixMetricsBinder.bindTo(HystrixMetricsBinder.java:36) ~[micrometer-core-1.1.13.jar:1.1.13]\n    at org.springframework.boot.actuate.autoconfigure.metrics.MeterRegistryConfigurer.lambda$addBinders$1(MeterRegistryConfigurer.java:84) ~[spring-boot-actuator-autoconfigure-2.1.14.RELEASE.jar:2.1.14.RELEASE]\n    at java.util.stream.ForEachOps$ForEachOp$OfRef.accept(ForEachOps.java:184) ~[na:1.8.0_181]\n    at java.util.ArrayList.forEach(ArrayList.java:1257) ~[na:1.8.0_181]\n    at java.util.stream.SortedOps$RefSortingSink.end(SortedOps.java:390) ~[na:1.8.0_181]\n    at java.util.stream.Sink$ChainedReference.end(Sink.java:258) ~[na:1.8.0_181]\n    at java.util.stream.Sink$ChainedReference.end(Sink.java:258) ~[na:1.8.0_181]\n    at java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:482) ~[na:1.8.0_181]\n    at java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:471) ~[na:1.8.0_181]\n    at java.util.stream.ForEachOps$ForEachOp.evaluateSequential(ForEachOps.java:151) ~[na:1.8.0_181]\n    at java.util.stream.ForEachOps$ForEachOp$OfRef.evaluateSequential(ForEachOps.java:174) ~[na:1.8.0_181]\n    at java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234) ~[na:1.8.0_181]\n    at java.util.stream.ReferencePipeline.forEach(ReferencePipeline.java:418) ~[na:1.8.0_181]\n    at org.springframework.boot.actuate.autoconfigure.metrics.MeterRegistryConfigurer.addBinders(MeterRegistryConfigurer.java:84) ~[spring-boot-actuator-autoconfigure-2.1.14.RELEASE.jar:2.1.14.RELEASE]\n    at org.springframework.boot.actuate.autoconfigure.metrics.MeterRegistryConfigurer.configure(MeterRegistryConfigurer.java:66) ~[spring-boot-actuator-autoconfigure-2.1.14.RELEASE.jar:2.1.14.RELEASE]\n    at org.springframework.boot.actuate.autoconfigure.metrics.MeterRegistryPostProcessor.postProcessAfterInitialization(MeterRegistryPostProcessor.java:64) ~[spring-boot-actuator-autoconfigure-2.1.14.RELEASE.jar:2.1.14.RELEASE]\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.applyBeanPostProcessorsAfterInitialization(AbstractAutowireCapableBeanFactory.java:429) ~[spring-beans-5.1.15.RELEASE.jar:5.1.15.RELEASE]\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1775) ~[spring-beans-5.1.15.RELEASE.jar:5.1.15.RELEASE]\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:593) ~[spring-beans-5.1.15.RELEASE.jar:5.1.15.RELEASE]\n    ... 63 common frames omitted\nCaused by: java.lang.ClassNotFoundException: com.google.common.collect.Lists\n    at java.net.URLClassLoader.findClass(URLClassLoader.java:381) ~[na:1.8.0_181]\n    at java.lang.ClassLoader.loadClass(ClassLoader.java:424) ~[na:1.8.0_181]\n    at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:349) ~[na:1.8.0_181]\n    at java.lang.ClassLoader.loadClass(ClassLoader.java:357) ~[na:1.8.0_181]\n    ... 89 common frames omitted\n</code></pre>\n\n<p><strong>pom.xml file:</strong></p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;project xmlns=\"http://maven.apache.org/POM/4.0.0\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n    xsi:schemaLocation=\"http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd\"&gt;\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n    &lt;parent&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\n        &lt;version&gt;2.1.14.RELEASE&lt;/version&gt;\n        &lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;\n    &lt;/parent&gt;\n    &lt;groupId&gt;com.srik&lt;/groupId&gt;\n    &lt;artifactId&gt;naming-server-eureka&lt;/artifactId&gt;\n    &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\n    &lt;name&gt;naming-server-eureka&lt;/name&gt;\n    &lt;description&gt;Demo project for Spring Boot&lt;/description&gt;\n\n    &lt;properties&gt;\n        &lt;java.version&gt;1.8&lt;/java.version&gt;\n        &lt;maven-jar-plugin.version&gt;3.1.1&lt;/maven-jar-plugin.version&gt;\n        &lt;spring-cloud.version&gt;Greenwich.SR5&lt;/spring-cloud.version&gt;\n    &lt;/properties&gt;\n\n    &lt;dependencies&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-actuator&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-cloud-starter-config&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-cloud-starter-netflix-eureka-server&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-devtools&lt;/artifactId&gt;\n            &lt;scope&gt;runtime&lt;/scope&gt;\n            &lt;optional&gt;true&lt;/optional&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\n            &lt;scope&gt;test&lt;/scope&gt;\n        &lt;/dependency&gt;\n    &lt;/dependencies&gt;\n\n    &lt;dependencyManagement&gt;\n        &lt;dependencies&gt;\n            &lt;dependency&gt;\n                &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;\n                &lt;artifactId&gt;spring-cloud-dependencies&lt;/artifactId&gt;\n                &lt;version&gt;${spring-cloud.version}&lt;/version&gt;\n                &lt;type&gt;pom&lt;/type&gt;\n                &lt;scope&gt;import&lt;/scope&gt;\n            &lt;/dependency&gt;\n        &lt;/dependencies&gt;\n    &lt;/dependencyManagement&gt;\n\n    &lt;build&gt;\n        &lt;plugins&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n                &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\n            &lt;/plugin&gt;\n        &lt;/plugins&gt;\n    &lt;/build&gt;\n\n&lt;/project&gt;\n</code></pre>\n\n<p><strong>application.properties file:</strong></p>\n\n<pre><code>spring.application.name=naming-server-eureka\nserver.port=8300\neureka.client.register-with-eureka=false\neureka.client.fetch-registry=false\n</code></pre>\n\n<p><strong>Main method class:</strong></p>\n\n<pre><code>@SpringBootApplication\n\n@EnableEurekaServer\npublic class NamingServerEurekaApplication {\n\n    public static void main(String[] args) {\n        System.setProperty(\"spring.devtools.restart.enabled\", \"false\");\n        SpringApplication.run(NamingServerEurekaApplication.class, args);\n    }\n\n}\n</code></pre>\n"},{"tags":["java","maven","docker","jar"],"comments":[{"owner":{"account_id":3763662,"reputation":7765,"user_id":3127812,"accept_rate":0,"display_name":"Sambit"},"score":1,"creation_date":1569600846,"post_id":58138142,"comment_id":102662755,"body_markdown":"Provide the exception details.","body":"Provide the exception details."},{"owner":{"account_id":10740055,"reputation":392,"user_id":7903486,"accept_rate":71,"display_name":"LexByte"},"score":0,"creation_date":1569600977,"post_id":58138142,"comment_id":102662809,"body_markdown":"In the main project i call a constuctor for a class from the external jar and i cannot resolve the  import.","body":"In the main project i call a constuctor for a class from the external jar and i cannot resolve the  import."},{"owner":{"account_id":100270,"reputation":127154,"user_id":270371,"accept_rate":33,"display_name":"davidxxx"},"score":0,"creation_date":1569601031,"post_id":58138142,"comment_id":102662836,"body_markdown":"You need to show us how you create your docker image about that part.","body":"You need to show us how you create your docker image about that part."},{"owner":{"account_id":10740055,"reputation":392,"user_id":7903486,"accept_rate":71,"display_name":"LexByte"},"score":0,"creation_date":1569601729,"post_id":58138142,"comment_id":102663123,"body_markdown":"its simple image using official flink docker image and i just copy the jars into it as so.. FROM flink:1.9 COPY ./jars ./jars","body":"its simple image using official flink docker image and i just copy the jars into it as so.. FROM flink:1.9 COPY ./jars ./jars"}],"answers":[{"comments":[{"owner":{"account_id":10740055,"reputation":392,"user_id":7903486,"accept_rate":71,"display_name":"LexByte"},"score":0,"creation_date":1570183411,"post_id":58138963,"comment_id":102841628,"body_markdown":"I managed to fix the problem by installing the jars locally in the maven m2 folder. Added the jars as external libraries and referenced them in the dependencies with scope run time. Building the main project jar included those libraries in the big jar. Afterwards i didnt need to add the jars in the docker image.","body":"I managed to fix the problem by installing the jars locally in the maven m2 folder. Added the jars as external libraries and referenced them in the dependencies with scope run time. Building the main project jar included those libraries in the big jar. Afterwards i didnt need to add the jars in the docker image."},{"owner":{"account_id":23731,"reputation":8707,"user_id":59692,"accept_rate":57,"display_name":"glaz666"},"score":0,"creation_date":1701791237,"post_id":58138963,"comment_id":136817731,"body_markdown":"Between these choices - what is preferable way and why? Looks like everyone using 1 option, but it&#39;s bloating image registry","body":"Between these choices - what is preferable way and why? Looks like everyone using 1 option, but it&#39;s bloating image registry"}],"tags":[],"owner":{"account_id":301516,"reputation":34141,"user_id":609290,"accept_rate":62,"display_name":"DazWilkin"},"comment_count":2,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1569604738,"creation_date":1569604738,"answer_id":58138963,"question_id":58138142,"body_markdown":"IIUC you have at least two options:\r\n\r\n### 1. Add the JARs to a new image (per @LexByte suggestion above).\r\n\r\nAssuming the JARs are in `${PWD}/jars` on your host machine and you wish them in `${WORKDIR}/jars` in the container:\r\n\r\n```Dockerfile\r\nFROM [[original-image]]\r\nWORKDIR ...\r\nCOPY ./jars ./jars\r\n```\r\nThen, ensure your code references the JARs via the `[[WORKDIR]]/jars/[[some-jar]]`\r\n\r\n**NB** `[[WORKDIR]]` is whatever you set as the container&#39;s working directory.\r\n\r\n### 2. Mount the JARs into the container using the existing image:\r\n```bash\r\ndocker run ... --volume=${PWD}/jars:[[WORKDIR]]/jars ...\r\n```\r\n**NB** `[[WORKDIR]]` is whatever you will use as the container&#39;s working directory. This is the location where the JARs will be mounted in the container.","title":"using external jar dependency in docker","body":"<p>IIUC you have at least two options:</p>\n\n<h3>1. Add the JARs to a new image (per @LexByte suggestion above).</h3>\n\n<p>Assuming the JARs are in <code>${PWD}/jars</code> on your host machine and you wish them in <code>${WORKDIR}/jars</code> in the container:</p>\n\n<pre><code>FROM [[original-image]]\nWORKDIR ...\nCOPY ./jars ./jars\n</code></pre>\n\n<p>Then, ensure your code references the JARs via the <code>[[WORKDIR]]/jars/[[some-jar]]</code></p>\n\n<p><strong>NB</strong> <code>[[WORKDIR]]</code> is whatever you set as the container's working directory.</p>\n\n<h3>2. Mount the JARs into the container using the existing image:</h3>\n\n<pre class=\"lang-sh prettyprint-override\"><code>docker run ... --volume=${PWD}/jars:[[WORKDIR]]/jars ...\n</code></pre>\n\n<p><strong>NB</strong> <code>[[WORKDIR]]</code> is whatever you will use as the container's working directory. This is the location where the JARs will be mounted in the container.</p>\n"}],"owner":{"account_id":10740055,"reputation":392,"user_id":7903486,"accept_rate":71,"display_name":"LexByte"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":10055,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1692097555,"creation_date":1569600741,"question_id":58138142,"body_markdown":"I am using external jars added through scope = system with ${basedir}/src/main/java/... added as a systempath under the dependency sub group in pom.xml.\r\nWhenever I use the project locally from IntelliJ, there are no warnings or error. However when i try to start the .jar file from a docker container i get exceptions about the dependency.\r\n\r\nI have tried adding the jars though Libraries under project structure in IntelliJ and just adding the jars in libs folder under the root. \r\nFirst i was providing the absolute path but then i changed it to ${basedir} because the absolute path wasn&#39;t mapped as a volume on the docker container.\r\nIs there any way i can pack the external jars with the project jar so i could use it in a docker container?\r\n","title":"using external jar dependency in docker","body":"<p>I am using external jars added through scope = system with ${basedir}/src/main/java/... added as a systempath under the dependency sub group in pom.xml.\nWhenever I use the project locally from IntelliJ, there are no warnings or error. However when i try to start the .jar file from a docker container i get exceptions about the dependency.</p>\n\n<p>I have tried adding the jars though Libraries under project structure in IntelliJ and just adding the jars in libs folder under the root. \nFirst i was providing the absolute path but then i changed it to ${basedir} because the absolute path wasn't mapped as a volume on the docker container.\nIs there any way i can pack the external jars with the project jar so i could use it in a docker container?</p>\n"},{"tags":["java","html","http","httpserver"],"comments":[{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1692097815,"post_id":76905372,"comment_id":135575675,"body_markdown":"You need a &#39;binary&#39; file with an absolutely known content that you can check afterwards. Don&#39;t accumulate in a BOS first - write it straight to file or it&#39;s not scalable","body":"You need a &#39;binary&#39; file with an absolutely known content that you can check afterwards. Don&#39;t accumulate in a BOS first - write it straight to file or it&#39;s not scalable"},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1692099736,"post_id":76905372,"comment_id":135576082,"body_markdown":"The main noticeable problem is that you&#39;re attempting to read Content-Length before it&#39;s even been sent and you attempt to process it whether it&#39;s present or not","body":"The main noticeable problem is that you&#39;re attempting to read Content-Length before it&#39;s even been sent and you attempt to process it whether it&#39;s present or not"}],"owner":{"account_id":29228945,"reputation":11,"user_id":22393060,"display_name":"KevinV"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":30,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1692097373,"creation_date":1692097373,"question_id":76905372,"body_markdown":"I have been working on creating a Java HTTP server that serves a basic HTML page to a browser client. The server is hosted at **`http://127.0.0.1:8080/upload`**. However, I&#39;ve encountered challenges when trying to implement a file upload feature. I have been unable to find comprehensive tutorials or guides on how to correctly handle binary file uploads that are easy enough to understand within in this specific context. \r\n\r\n```\r\nimport java.io.*;\r\nimport java.net.*;\r\nimport java.nio.file.Path;\r\nimport java.nio.file.Paths;\r\nimport java.util.*;\r\n\r\npublic class HTTP {\r\n    public static void main(String[] args) throws IOException {\r\n        int port = 8080;\r\n        ServerSocket serverSocket = new ServerSocket(port);\r\n\r\n        System.out.println(&quot;Server started on port &quot; + port);\r\n\r\n        while (true) {\r\n            Socket clientSocket = serverSocket.accept();\r\n            handleRequest(clientSocket);\r\n        }\r\n    }\r\n\r\n    private static void handleRequest(Socket clientSocket) throws IOException {\r\n        BufferedReader in = new BufferedReader(new InputStreamReader(clientSocket.getInputStream()));\r\n        PrintWriter out = new PrintWriter(clientSocket.getOutputStream(), true);\r\n        \r\n        // Read the HTTP request\r\n        StringBuilder request = new StringBuilder();\r\n        String line;\r\n        while ((line = in.readLine()) != null &amp;&amp; !line.isEmpty()) {\r\n            request.append(line).append(&quot;\\r\\n&quot;);\r\n        }\r\n        \r\n        // Find the content length from the request headers\r\n        int contentLength = getContentLength(request.toString());\r\n\r\n        OutputStream outStream = clientSocket.getOutputStream();\r\n\r\n        if (request.toString().contains(&quot;/upload&quot;)) {\r\n            // Respond with an HTML page containing the upload form\r\n            sendHtmlResponse(out, getUploadPage());\r\n        } else if (request.toString().contains(&quot;/upFile&quot;)) {\r\n            // Handle file upload\r\n            saveUploadedFile(clientSocket.getInputStream(), contentLength);\r\n            sendHtmlResponse(out, getUploadSuccessPage());\r\n        } else {\r\n            // Respond with a default message\r\n            sendHtmlResponse(out, getDefaultPage());\r\n        }\r\n\r\n        clientSocket.close();\r\n    }\r\n\r\n    private static void sendHtmlResponse(PrintWriter out, String content) {\r\n        out.println(&quot;HTTP/1.1 200 OK&quot;);\r\n        out.println(&quot;Content-Type: text/html&quot;);\r\n        out.println(&quot;Content-Length: &quot; + content.length());\r\n        out.println();\r\n        out.println(content);\r\n        out.flush();\r\n    }\r\n\r\n    private static void saveUploadedFile(InputStream inputStream, int contentLength) throws IOException {\r\n        System.out.println(&quot;Getting uploaded file to save.&quot;);\r\n        String line;\r\n        String fileName = &quot;null&quot;;\r\n        int strike = 0;\r\n        StringBuilder boundary = new StringBuilder();\r\n        ByteArrayOutputStream fileContent = new ByteArrayOutputStream();\r\n        \r\n        // Read the request headers until an empty line is encountered\r\n        while ((line = new BufferedReader(new InputStreamReader(inputStream)).readLine()) != null &amp;&amp; !line.isEmpty()) {\r\n            if (line.contains(&quot;WebKitFormBoundary&quot;)) strike++;\r\n            System.out.println(&quot;In a while loop.&quot;);\r\n            System.out.println(line); // Debug: Print the incoming line\r\n            if (strike == 2) break;\r\n            if (!line.contains(&quot;WebKitFormBoundary&quot;) &amp;&amp; !line.contains(&quot;Content-Disposition&quot;) &amp;&amp; !line.contains(&quot;Content-Type:&quot;)) {\r\n                boundary.append(line);\r\n                System.out.println(&quot;Adding &quot; + line);\r\n            }\r\n            if (line.startsWith(&quot;Content-Disposition: form-data;&quot;)) {\r\n                String[] parts = line.split(&quot;; &quot;);\r\n                for (String part : parts) {\r\n                    if (part.startsWith(&quot;filename=&quot;)) {\r\n                        String[] filenameParts = part.split(&quot;=&quot;);\r\n                        String filename = filenameParts[1].replace(&quot;\\&quot;&quot;, &quot;&quot;);\r\n                        fileName = filename;\r\n                        continue;\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        \r\n        byte[] buffer = new byte[1024];\r\n        int bytesRead;\r\n        int totalBytesRead = 0;\r\n        \r\n        // Read the file content based on the provided content length\r\n        while (totalBytesRead &lt; contentLength &amp;&amp; (bytesRead = inputStream.read(buffer)) != -1) {\r\n            fileContent.write(buffer, 0, bytesRead);\r\n            totalBytesRead += bytesRead;\r\n        }\r\n        \r\n        saveBytesToFile(fileContent.toByteArray(), fileName);\r\n    }\r\n    \r\n    private static int getContentLength(String request) {\r\n        int startIndex = request.indexOf(&quot;Content-Length:&quot;) + 15;\r\n        int endIndex = request.indexOf(&quot;\\r\\n&quot;, startIndex);\r\n        String contentLengthStr = request.substring(startIndex, endIndex);\r\n        return Integer.parseInt(contentLengthStr.trim());\r\n    }\r\n    \r\n    private static void saveBytesToFile(byte[] content, String filename) throws IOException {\r\n        System.out.println(&quot;Saving file.&quot;);\r\n\r\n        Path path = Paths.get(System.getProperty(&quot;user.dir&quot;) + &quot;//&quot; + filename);\r\n        System.out.println(&quot;Path: &quot; + path.toAbsolutePath().toString());\r\n\r\n        try (FileOutputStream fos = new FileOutputStream(path.toAbsolutePath().toString())) {\r\n            fos.write(content);\r\n        } catch (IOException e) {\r\n            // Handle exception here\r\n            e.printStackTrace();\r\n        }\r\n\r\n        System.out.println(&quot;File saved: &quot; + filename);\r\n    }\r\n\r\n    private static String getUploadPage() {\r\n        return &quot;&lt;html&gt;&lt;body&gt;&lt;form action=\\&quot;/upFile\\&quot; method=\\&quot;post\\&quot; enctype=\\&quot;multipart/form-data\\&quot;&gt;\\n&quot; +\r\n               &quot;  &lt;input type=\\&quot;file\\&quot; name=\\&quot;file\\&quot;/&gt;&lt;br/&gt;\\n&quot; +\r\n               &quot;  &lt;input type=\\&quot;submit\\&quot; value=\\&quot;Upload\\&quot;/&gt;\\n&quot; +\r\n               &quot;&lt;/form&gt;&lt;/body&gt;&lt;/html&gt;&quot;;\r\n    }\r\n\r\n    private static String getUploadSuccessPage() {\r\n        return &quot;&lt;html&gt;&lt;body&gt;&lt;h1&gt;File uploaded successfully!&lt;/h1&gt;&lt;/body&gt;&lt;/html&gt;&quot;;\r\n    }\r\n\r\n    private static String getDefaultPage() {\r\n        return &quot;&lt;html&gt;&lt;body&gt;&lt;h1&gt;Welcome to the Simple HTTP Server&lt;/h1&gt;&lt;/body&gt;&lt;/html&gt;&quot;;\r\n    }\r\n```\r\n\r\nI have made some code a while ago in which txt files worked for the most part but it would corrupt other files. It seems that my implementation here does not know when to stop and I would need to stop the tab from loading to save anything. Perhaps I have poorly implemented this.","title":"Java HTTP Server file upload implementation problem","body":"<p>I have been working on creating a Java HTTP server that serves a basic HTML page to a browser client. The server is hosted at <strong><code>http://127.0.0.1:8080/upload</code></strong>. However, I've encountered challenges when trying to implement a file upload feature. I have been unable to find comprehensive tutorials or guides on how to correctly handle binary file uploads that are easy enough to understand within in this specific context.</p>\n<pre><code>import java.io.*;\nimport java.net.*;\nimport java.nio.file.Path;\nimport java.nio.file.Paths;\nimport java.util.*;\n\npublic class HTTP {\n    public static void main(String[] args) throws IOException {\n        int port = 8080;\n        ServerSocket serverSocket = new ServerSocket(port);\n\n        System.out.println(&quot;Server started on port &quot; + port);\n\n        while (true) {\n            Socket clientSocket = serverSocket.accept();\n            handleRequest(clientSocket);\n        }\n    }\n\n    private static void handleRequest(Socket clientSocket) throws IOException {\n        BufferedReader in = new BufferedReader(new InputStreamReader(clientSocket.getInputStream()));\n        PrintWriter out = new PrintWriter(clientSocket.getOutputStream(), true);\n        \n        // Read the HTTP request\n        StringBuilder request = new StringBuilder();\n        String line;\n        while ((line = in.readLine()) != null &amp;&amp; !line.isEmpty()) {\n            request.append(line).append(&quot;\\r\\n&quot;);\n        }\n        \n        // Find the content length from the request headers\n        int contentLength = getContentLength(request.toString());\n\n        OutputStream outStream = clientSocket.getOutputStream();\n\n        if (request.toString().contains(&quot;/upload&quot;)) {\n            // Respond with an HTML page containing the upload form\n            sendHtmlResponse(out, getUploadPage());\n        } else if (request.toString().contains(&quot;/upFile&quot;)) {\n            // Handle file upload\n            saveUploadedFile(clientSocket.getInputStream(), contentLength);\n            sendHtmlResponse(out, getUploadSuccessPage());\n        } else {\n            // Respond with a default message\n            sendHtmlResponse(out, getDefaultPage());\n        }\n\n        clientSocket.close();\n    }\n\n    private static void sendHtmlResponse(PrintWriter out, String content) {\n        out.println(&quot;HTTP/1.1 200 OK&quot;);\n        out.println(&quot;Content-Type: text/html&quot;);\n        out.println(&quot;Content-Length: &quot; + content.length());\n        out.println();\n        out.println(content);\n        out.flush();\n    }\n\n    private static void saveUploadedFile(InputStream inputStream, int contentLength) throws IOException {\n        System.out.println(&quot;Getting uploaded file to save.&quot;);\n        String line;\n        String fileName = &quot;null&quot;;\n        int strike = 0;\n        StringBuilder boundary = new StringBuilder();\n        ByteArrayOutputStream fileContent = new ByteArrayOutputStream();\n        \n        // Read the request headers until an empty line is encountered\n        while ((line = new BufferedReader(new InputStreamReader(inputStream)).readLine()) != null &amp;&amp; !line.isEmpty()) {\n            if (line.contains(&quot;WebKitFormBoundary&quot;)) strike++;\n            System.out.println(&quot;In a while loop.&quot;);\n            System.out.println(line); // Debug: Print the incoming line\n            if (strike == 2) break;\n            if (!line.contains(&quot;WebKitFormBoundary&quot;) &amp;&amp; !line.contains(&quot;Content-Disposition&quot;) &amp;&amp; !line.contains(&quot;Content-Type:&quot;)) {\n                boundary.append(line);\n                System.out.println(&quot;Adding &quot; + line);\n            }\n            if (line.startsWith(&quot;Content-Disposition: form-data;&quot;)) {\n                String[] parts = line.split(&quot;; &quot;);\n                for (String part : parts) {\n                    if (part.startsWith(&quot;filename=&quot;)) {\n                        String[] filenameParts = part.split(&quot;=&quot;);\n                        String filename = filenameParts[1].replace(&quot;\\&quot;&quot;, &quot;&quot;);\n                        fileName = filename;\n                        continue;\n                    }\n                }\n            }\n        }\n        \n        byte[] buffer = new byte[1024];\n        int bytesRead;\n        int totalBytesRead = 0;\n        \n        // Read the file content based on the provided content length\n        while (totalBytesRead &lt; contentLength &amp;&amp; (bytesRead = inputStream.read(buffer)) != -1) {\n            fileContent.write(buffer, 0, bytesRead);\n            totalBytesRead += bytesRead;\n        }\n        \n        saveBytesToFile(fileContent.toByteArray(), fileName);\n    }\n    \n    private static int getContentLength(String request) {\n        int startIndex = request.indexOf(&quot;Content-Length:&quot;) + 15;\n        int endIndex = request.indexOf(&quot;\\r\\n&quot;, startIndex);\n        String contentLengthStr = request.substring(startIndex, endIndex);\n        return Integer.parseInt(contentLengthStr.trim());\n    }\n    \n    private static void saveBytesToFile(byte[] content, String filename) throws IOException {\n        System.out.println(&quot;Saving file.&quot;);\n\n        Path path = Paths.get(System.getProperty(&quot;user.dir&quot;) + &quot;//&quot; + filename);\n        System.out.println(&quot;Path: &quot; + path.toAbsolutePath().toString());\n\n        try (FileOutputStream fos = new FileOutputStream(path.toAbsolutePath().toString())) {\n            fos.write(content);\n        } catch (IOException e) {\n            // Handle exception here\n            e.printStackTrace();\n        }\n\n        System.out.println(&quot;File saved: &quot; + filename);\n    }\n\n    private static String getUploadPage() {\n        return &quot;&lt;html&gt;&lt;body&gt;&lt;form action=\\&quot;/upFile\\&quot; method=\\&quot;post\\&quot; enctype=\\&quot;multipart/form-data\\&quot;&gt;\\n&quot; +\n               &quot;  &lt;input type=\\&quot;file\\&quot; name=\\&quot;file\\&quot;/&gt;&lt;br/&gt;\\n&quot; +\n               &quot;  &lt;input type=\\&quot;submit\\&quot; value=\\&quot;Upload\\&quot;/&gt;\\n&quot; +\n               &quot;&lt;/form&gt;&lt;/body&gt;&lt;/html&gt;&quot;;\n    }\n\n    private static String getUploadSuccessPage() {\n        return &quot;&lt;html&gt;&lt;body&gt;&lt;h1&gt;File uploaded successfully!&lt;/h1&gt;&lt;/body&gt;&lt;/html&gt;&quot;;\n    }\n\n    private static String getDefaultPage() {\n        return &quot;&lt;html&gt;&lt;body&gt;&lt;h1&gt;Welcome to the Simple HTTP Server&lt;/h1&gt;&lt;/body&gt;&lt;/html&gt;&quot;;\n    }\n</code></pre>\n<p>I have made some code a while ago in which txt files worked for the most part but it would corrupt other files. It seems that my implementation here does not know when to stop and I would need to stop the tab from loading to save anything. Perhaps I have poorly implemented this.</p>\n"},{"tags":["java","maven","import","openapi","openapi-generator-maven-plugin"],"answers":[{"comments":[{"owner":{"account_id":3958776,"reputation":898,"user_id":3266467,"accept_rate":100,"display_name":"Sebastian"},"score":0,"creation_date":1695367779,"post_id":75825153,"comment_id":136017605,"body_markdown":"Thank you so much for this answer. This configuration has nearly driven me mad....","body":"Thank you so much for this answer. This configuration has nearly driven me mad...."}],"tags":[],"owner":{"account_id":7968760,"reputation":156,"user_id":6014191,"accept_rate":75,"display_name":"Barmaglot"},"comment_count":1,"down_vote_count":0,"up_vote_count":10,"is_accepted":true,"score":10,"last_activity_date":1679589569,"creation_date":1679586398,"answer_id":75825153,"question_id":75825152,"body_markdown":"I&#39;ve spent on this issue a lot of time so maybe it will be useful to post it here. The solution is to use schemaMappings instead of importMappings. Like that:\r\n\r\n                    &lt;configuration&gt;\r\n                        &lt;inputSpec&gt;${project.basedir}/src/main/resources/openapi/some-api.yaml&lt;/inputSpec&gt;\r\n                        &lt;generatorName&gt;spring&lt;/generatorName&gt;\r\n                        &lt;output&gt;${project.build.directory}/generated-sources/openapi&lt;/output&gt;\r\n    &lt;schemaMappings&gt;MyDto1=com.some.project.metric.MyDto1,MyDto2=com.some.project.metric.MyDto2&lt;/schemaMappings&gt;\r\n                        &lt;generateApiTests&gt;false&lt;/generateApiTests&gt;\r\n                        &lt;generateModelTests&gt;false&lt;/generateModelTests&gt;\r\n                        &lt;generateModelTests&gt;false&lt;/generateModelTests&gt;\r\n                        &lt;generateModelDocumentation&gt;false&lt;/generateModelDocumentation&gt;\r\n                        &lt;configOptions&gt;\r\n                            &lt;title&gt;Some project&lt;/title&gt;\r\n                            &lt;library&gt;spring-boot&lt;/library&gt;\r\n                            &lt;useTags&gt;true&lt;/useTags&gt;\r\n                            &lt;dateLibrary&gt;java8&lt;/dateLibrary&gt;\r\n                            &lt;basePackage&gt;${default.package}&lt;/basePackage&gt;\r\n                            &lt;apiPackage&gt;${default.package}.api&lt;/apiPackage&gt;\r\n                            &lt;modelPackage&gt;${default.package}.model&lt;/modelPackage&gt;\r\n                            &lt;performBeanValidation&gt;true&lt;/performBeanValidation&gt;\r\n                            &lt;interfaceOnly&gt;true&lt;/interfaceOnly&gt;                        \r\n                        &lt;/configOptions&gt;\r\n                    &lt;/configuration&gt;\r\n\r\nWill be glad if you also provide your suggestions.\r\n\r\n","title":"OpenAPI generator maven plugin doesn&#39;t use import mappings","body":"<p>I've spent on this issue a lot of time so maybe it will be useful to post it here. The solution is to use schemaMappings instead of importMappings. Like that:</p>\n<pre><code>                &lt;configuration&gt;\n                    &lt;inputSpec&gt;${project.basedir}/src/main/resources/openapi/some-api.yaml&lt;/inputSpec&gt;\n                    &lt;generatorName&gt;spring&lt;/generatorName&gt;\n                    &lt;output&gt;${project.build.directory}/generated-sources/openapi&lt;/output&gt;\n&lt;schemaMappings&gt;MyDto1=com.some.project.metric.MyDto1,MyDto2=com.some.project.metric.MyDto2&lt;/schemaMappings&gt;\n                    &lt;generateApiTests&gt;false&lt;/generateApiTests&gt;\n                    &lt;generateModelTests&gt;false&lt;/generateModelTests&gt;\n                    &lt;generateModelTests&gt;false&lt;/generateModelTests&gt;\n                    &lt;generateModelDocumentation&gt;false&lt;/generateModelDocumentation&gt;\n                    &lt;configOptions&gt;\n                        &lt;title&gt;Some project&lt;/title&gt;\n                        &lt;library&gt;spring-boot&lt;/library&gt;\n                        &lt;useTags&gt;true&lt;/useTags&gt;\n                        &lt;dateLibrary&gt;java8&lt;/dateLibrary&gt;\n                        &lt;basePackage&gt;${default.package}&lt;/basePackage&gt;\n                        &lt;apiPackage&gt;${default.package}.api&lt;/apiPackage&gt;\n                        &lt;modelPackage&gt;${default.package}.model&lt;/modelPackage&gt;\n                        &lt;performBeanValidation&gt;true&lt;/performBeanValidation&gt;\n                        &lt;interfaceOnly&gt;true&lt;/interfaceOnly&gt;                        \n                    &lt;/configOptions&gt;\n                &lt;/configuration&gt;\n</code></pre>\n<p>Will be glad if you also provide your suggestions.</p>\n"},{"tags":[],"owner":{"account_id":29200498,"reputation":1,"user_id":22370736,"display_name":"Maksim Rachipa"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1692096404,"creation_date":1691754208,"answer_id":76883246,"question_id":75825152,"body_markdown":"I&#39;ll leave an alternative, this option helped me\r\n```\r\n&lt;configuration&gt;\r\n    &lt;inputSpec&gt;${project.basedir}/src/main/resources/openapi/some-api.yaml&lt;/inputSpec&gt;\r\n    &lt;generatorName&gt;spring&lt;/generatorName&gt;\r\n    &lt;output&gt;${project.build.directory}/generated-sources/openapi&lt;/output&gt;\r\n    &lt;importMappings&gt;\r\n        &lt;importMapping&gt;MyDto1=com.some.project.metric.MyDto1,MyDto2=com.some.project.metric.MyDto2&lt;/importMapping&gt;\r\n    &lt;/importMappings&gt;\r\n    &lt;generateApiTests&gt;false&lt;/generateApiTests&gt;\r\n    &lt;generateModelTests&gt;false&lt;/generateModelTests&gt;\r\n    &lt;generateModelTests&gt;false&lt;/generateModelTests&gt;\r\n    &lt;generateModelDocumentation&gt;false&lt;/generateModelDocumentation&gt;\r\n    &lt;configOptions&gt;\r\n        &lt;title&gt;Some project&lt;/title&gt;\r\n        &lt;library&gt;spring-boot&lt;/library&gt;\r\n        &lt;useTags&gt;true&lt;/useTags&gt;\r\n        &lt;dateLibrary&gt;java8&lt;/dateLibrary&gt;\r\n        &lt;basePackage&gt;${default.package}&lt;/basePackage&gt;\r\n        &lt;apiPackage&gt;${default.package}.api&lt;/apiPackage&gt;\r\n        &lt;modelPackage&gt;${default.package}.model&lt;/modelPackage&gt;\r\n        &lt;performBeanValidation&gt;true&lt;/performBeanValidation&gt;\r\n        &lt;interfaceOnly&gt;true&lt;/interfaceOnly&gt;\r\n    &lt;/configOptions&gt;\r\n&lt;/configuration&gt;\r\n```\r\n","title":"OpenAPI generator maven plugin doesn&#39;t use import mappings","body":"<p>I'll leave an alternative, this option helped me</p>\n<pre><code>&lt;configuration&gt;\n    &lt;inputSpec&gt;${project.basedir}/src/main/resources/openapi/some-api.yaml&lt;/inputSpec&gt;\n    &lt;generatorName&gt;spring&lt;/generatorName&gt;\n    &lt;output&gt;${project.build.directory}/generated-sources/openapi&lt;/output&gt;\n    &lt;importMappings&gt;\n        &lt;importMapping&gt;MyDto1=com.some.project.metric.MyDto1,MyDto2=com.some.project.metric.MyDto2&lt;/importMapping&gt;\n    &lt;/importMappings&gt;\n    &lt;generateApiTests&gt;false&lt;/generateApiTests&gt;\n    &lt;generateModelTests&gt;false&lt;/generateModelTests&gt;\n    &lt;generateModelTests&gt;false&lt;/generateModelTests&gt;\n    &lt;generateModelDocumentation&gt;false&lt;/generateModelDocumentation&gt;\n    &lt;configOptions&gt;\n        &lt;title&gt;Some project&lt;/title&gt;\n        &lt;library&gt;spring-boot&lt;/library&gt;\n        &lt;useTags&gt;true&lt;/useTags&gt;\n        &lt;dateLibrary&gt;java8&lt;/dateLibrary&gt;\n        &lt;basePackage&gt;${default.package}&lt;/basePackage&gt;\n        &lt;apiPackage&gt;${default.package}.api&lt;/apiPackage&gt;\n        &lt;modelPackage&gt;${default.package}.model&lt;/modelPackage&gt;\n        &lt;performBeanValidation&gt;true&lt;/performBeanValidation&gt;\n        &lt;interfaceOnly&gt;true&lt;/interfaceOnly&gt;\n    &lt;/configOptions&gt;\n&lt;/configuration&gt;\n</code></pre>\n"}],"owner":{"account_id":7968760,"reputation":156,"user_id":6014191,"accept_rate":75,"display_name":"Barmaglot"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":3982,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":75825153,"answer_count":2,"score":2,"last_activity_date":1692096404,"creation_date":1679586398,"question_id":75825152,"body_markdown":"I&#39;m writing a spec for spring-boot app to generate an API for clients using openapi-generator-maven-plugin. There are a few models which I wanted to import so I tried to import them as usual, using schemaMappings property, just in the same way as I did with openapi-generator-gradle-plugin.\r\nIn yaml spec, I created empty schemas of the models I wanted to import and specified desired types in plugin settings in the pom.xml.\r\nMy plugins settings:\r\n\r\n             &lt;plugin&gt;\r\n                &lt;groupId&gt;org.openapitools&lt;/groupId&gt;\r\n                &lt;artifactId&gt;openapi-generator-maven-plugin&lt;/artifactId&gt;\r\n                &lt;version&gt;6.4.0&lt;/version&gt;\r\n                &lt;executions&gt;\r\n                    &lt;execution&gt;\r\n                        &lt;phase&gt;generate-sources&lt;/phase&gt;\r\n                        &lt;goals&gt;\r\n                            &lt;goal&gt;generate&lt;/goal&gt;\r\n                        &lt;/goals&gt;\r\n                        &lt;configuration&gt;\r\n                            &lt;inputSpec&gt;${project.basedir}/src/main/resources/openapi/some-api.yaml&lt;/inputSpec&gt;\r\n                            &lt;generatorName&gt;spring&lt;/generatorName&gt;\r\n                            &lt;output&gt;${project.build.directory}/generated-sources/openapi&lt;/output&gt;\r\n                            &lt;generateApiTests&gt;false&lt;/generateApiTests&gt;\r\n                            &lt;generateModelTests&gt;false&lt;/generateModelTests&gt;\r\n                            &lt;generateModelTests&gt;false&lt;/generateModelTests&gt;\r\n                            &lt;generateModelDocumentation&gt;false&lt;/generateModelDocumentation&gt;\r\n                            &lt;importMappings&gt;\r\n                                &lt;importMapping&gt;MyDto1=com.some.project.metric.MyDto1&lt;/importMapping&gt;\r\n                                &lt;importMapping&gt;MyDto2=com.some.project.metric.MyDto2&lt;/importMapping&gt;\r\n                            &lt;/importMappings&gt;\r\n                            &lt;configOptions&gt;\r\n                                &lt;title&gt;Some project&lt;/title&gt;\r\n                                &lt;library&gt;spring-boot&lt;/library&gt;\r\n                                &lt;useTags&gt;true&lt;/useTags&gt;\r\n                                &lt;dateLibrary&gt;java8&lt;/dateLibrary&gt;\r\n                                &lt;basePackage&gt;${default.package}&lt;/basePackage&gt;\r\n                                &lt;apiPackage&gt;${default.package}.api&lt;/apiPackage&gt;\r\n                                &lt;modelPackage&gt;${default.package}.model&lt;/modelPackage&gt;\r\n                                &lt;performBeanValidation&gt;true&lt;/performBeanValidation&gt;\r\n                                &lt;interfaceOnly&gt;true&lt;/interfaceOnly&gt;\r\n                            &lt;/configOptions&gt;\r\n                        &lt;/configuration&gt;\r\n                    &lt;/execution&gt;\r\n                &lt;/executions&gt;\r\n            &lt;/plugin&gt;\r\n\r\n \r\nBut suddenly I found that for some reason the openapi-generator-maven-plugin, unlike openapi-generator-gradle-plugin, doesn&#39;t use the importMappings property. It&#39;s present in the code of the plugin and you can use it either in the configuration or in configOptions of a generator, but eventually, it doesn&#39;t work with my own DTOs.\r\nChecked one more time. In Gradle, everything worked fine, but not in Maven. It didn&#39;t generate the POJOs because they are free-form objects and simply substituted them with the Object type.\r\nI started digging into the problem and after some time I saw that the problem exists for a long time. At least from version 5.3.1. You can see [here][1]\r\n\r\n\r\n  [1]: https://github.com/OpenAPITools/openapi-generator/issues/11506","title":"OpenAPI generator maven plugin doesn&#39;t use import mappings","body":"<p>I'm writing a spec for spring-boot app to generate an API for clients using openapi-generator-maven-plugin. There are a few models which I wanted to import so I tried to import them as usual, using schemaMappings property, just in the same way as I did with openapi-generator-gradle-plugin.\nIn yaml spec, I created empty schemas of the models I wanted to import and specified desired types in plugin settings in the pom.xml.\nMy plugins settings:</p>\n<pre><code>         &lt;plugin&gt;\n            &lt;groupId&gt;org.openapitools&lt;/groupId&gt;\n            &lt;artifactId&gt;openapi-generator-maven-plugin&lt;/artifactId&gt;\n            &lt;version&gt;6.4.0&lt;/version&gt;\n            &lt;executions&gt;\n                &lt;execution&gt;\n                    &lt;phase&gt;generate-sources&lt;/phase&gt;\n                    &lt;goals&gt;\n                        &lt;goal&gt;generate&lt;/goal&gt;\n                    &lt;/goals&gt;\n                    &lt;configuration&gt;\n                        &lt;inputSpec&gt;${project.basedir}/src/main/resources/openapi/some-api.yaml&lt;/inputSpec&gt;\n                        &lt;generatorName&gt;spring&lt;/generatorName&gt;\n                        &lt;output&gt;${project.build.directory}/generated-sources/openapi&lt;/output&gt;\n                        &lt;generateApiTests&gt;false&lt;/generateApiTests&gt;\n                        &lt;generateModelTests&gt;false&lt;/generateModelTests&gt;\n                        &lt;generateModelTests&gt;false&lt;/generateModelTests&gt;\n                        &lt;generateModelDocumentation&gt;false&lt;/generateModelDocumentation&gt;\n                        &lt;importMappings&gt;\n                            &lt;importMapping&gt;MyDto1=com.some.project.metric.MyDto1&lt;/importMapping&gt;\n                            &lt;importMapping&gt;MyDto2=com.some.project.metric.MyDto2&lt;/importMapping&gt;\n                        &lt;/importMappings&gt;\n                        &lt;configOptions&gt;\n                            &lt;title&gt;Some project&lt;/title&gt;\n                            &lt;library&gt;spring-boot&lt;/library&gt;\n                            &lt;useTags&gt;true&lt;/useTags&gt;\n                            &lt;dateLibrary&gt;java8&lt;/dateLibrary&gt;\n                            &lt;basePackage&gt;${default.package}&lt;/basePackage&gt;\n                            &lt;apiPackage&gt;${default.package}.api&lt;/apiPackage&gt;\n                            &lt;modelPackage&gt;${default.package}.model&lt;/modelPackage&gt;\n                            &lt;performBeanValidation&gt;true&lt;/performBeanValidation&gt;\n                            &lt;interfaceOnly&gt;true&lt;/interfaceOnly&gt;\n                        &lt;/configOptions&gt;\n                    &lt;/configuration&gt;\n                &lt;/execution&gt;\n            &lt;/executions&gt;\n        &lt;/plugin&gt;\n</code></pre>\n<p>But suddenly I found that for some reason the openapi-generator-maven-plugin, unlike openapi-generator-gradle-plugin, doesn't use the importMappings property. It's present in the code of the plugin and you can use it either in the configuration or in configOptions of a generator, but eventually, it doesn't work with my own DTOs.\nChecked one more time. In Gradle, everything worked fine, but not in Maven. It didn't generate the POJOs because they are free-form objects and simply substituted them with the Object type.\nI started digging into the problem and after some time I saw that the problem exists for a long time. At least from version 5.3.1. You can see <a href=\"https://github.com/OpenAPITools/openapi-generator/issues/11506\" rel=\"nofollow noreferrer\">here</a></p>\n"},{"tags":["java","lombok","builder"],"comments":[{"owner":{"account_id":5281408,"reputation":18797,"user_id":4216641,"display_name":"Turing85"},"score":3,"creation_date":1692029358,"post_id":76900510,"comment_id":135567374,"body_markdown":"Lombok has a feature called &quot;delombok&quot;, replacing the annotations with the code normally generated at compile-time. I suggest taking a look at what lombok generates. --- If you are still learning the language, I recommend to not use advanced tools like lombok; they will do more harm than good.","body":"Lombok has a feature called &quot;delombok&quot;, replacing the annotations with the code normally generated at compile-time. I suggest taking a look at what lombok generates. --- If you are still learning the language, I recommend to not use advanced tools like lombok; they will do more harm than good."}],"answers":[{"comments":[{"owner":{"account_id":25627830,"reputation":59,"user_id":19398668,"display_name":"Vegan Vegeta"},"score":0,"creation_date":1692031187,"post_id":76900529,"comment_id":135567690,"body_markdown":"My bad I made a mistake in the question. I am using the `aObj.toBuilder().a(setA).build()`.  The ide is not able to recognise this.","body":"My bad I made a mistake in the question. I am using the <code>aObj.toBuilder().a(setA).build()</code>.  The ide is not able to recognise this."}],"tags":[],"owner":{"account_id":1475,"reputation":533794,"user_id":1968,"accept_rate":83,"display_name":"Konrad Rudolph"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1692029374,"creation_date":1692029374,"answer_id":76900529,"question_id":76900510,"body_markdown":"`toBuilder()` is an *instance method*. To use the static method for the builder, use `builder()`:\r\n\r\n```\r\nA.builder().a(setA).build();\r\n```\r\n\r\nOr use the `aObj` instance in your method:\r\n\r\n```\r\naObj.toBuilder().a(setA).build();\r\n```","title":"Abstract objects setting attributes in base class","body":"<p><code>toBuilder()</code> is an <em>instance method</em>. To use the static method for the builder, use <code>builder()</code>:</p>\n<pre><code>A.builder().a(setA).build();\n</code></pre>\n<p>Or use the <code>aObj</code> instance in your method:</p>\n<pre><code>aObj.toBuilder().a(setA).build();\n</code></pre>\n"}],"owner":{"account_id":25627830,"reputation":59,"user_id":19398668,"display_name":"Vegan Vegeta"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":49,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"closed_date":1692175295,"answer_count":1,"score":0,"last_activity_date":1692096373,"creation_date":1692029173,"question_id":76900510,"body_markdown":"Hello I have the following class structure - \r\n\r\n```\r\n@Getter\r\n@SuperBuilder(toBuilder = true)\r\n@ToString\r\n@NoArgsConstructor\r\nabstract class A {\r\n   String a;\r\n}\r\n\r\n\r\n@Getter\r\n@SuperBuilder(toBuilder = true)\r\n@ToString\r\n@AllArgsConstructor\r\nclass B extends A {\r\n  String b;\r\n}\r\n\r\n\r\npublic A setAField(final A aObj, final String setA) {\r\n  return aObj.toBuilder().a(setA).build();\r\n}\r\n\r\n```\r\n\r\nThe IDE is showing error as its not able to find the toBuilder() method. Do I need to cast to concrete before calling the toBuilder()?","title":"Abstract objects setting attributes in base class","body":"<p>Hello I have the following class structure -</p>\n<pre><code>@Getter\n@SuperBuilder(toBuilder = true)\n@ToString\n@NoArgsConstructor\nabstract class A {\n   String a;\n}\n\n\n@Getter\n@SuperBuilder(toBuilder = true)\n@ToString\n@AllArgsConstructor\nclass B extends A {\n  String b;\n}\n\n\npublic A setAField(final A aObj, final String setA) {\n  return aObj.toBuilder().a(setA).build();\n}\n\n</code></pre>\n<p>The IDE is showing error as its not able to find the toBuilder() method. Do I need to cast to concrete before calling the toBuilder()?</p>\n"},{"tags":["java","gradle","spring-boot","jar","build.gradle"],"comments":[{"owner":{"account_id":1169697,"reputation":1416,"user_id":1147141,"accept_rate":42,"display_name":"bichito"},"score":0,"creation_date":1488038979,"post_id":42458292,"comment_id":72059178,"body_markdown":"I would compare the paths that IDE is using and the contents of the jar","body":"I would compare the paths that IDE is using and the contents of the jar"},{"owner":{"account_id":1949626,"reputation":13702,"user_id":1754020,"accept_rate":87,"display_name":"Eddie Martinez"},"score":0,"creation_date":1488039474,"post_id":42458292,"comment_id":72059340,"body_markdown":"do you have the springboot entry class in your code ?","body":"do you have the springboot entry class in your code ?"},{"owner":{"account_id":935312,"reputation":6386,"user_id":964335,"accept_rate":92,"display_name":"Quillion"},"score":0,"creation_date":1488039670,"post_id":42458292,"comment_id":72059399,"body_markdown":"@EduardoDennis edited question showing my `Application.java`. Is that what you meant by spring boot entry class?","body":"@EduardoDennis edited question showing my <code>Application.java</code>. Is that what you meant by spring boot entry class?"},{"owner":{"account_id":935312,"reputation":6386,"user_id":964335,"accept_rate":92,"display_name":"Quillion"},"score":0,"creation_date":1488039717,"post_id":42458292,"comment_id":72059425,"body_markdown":"@efekctive I just checked my jar, and apparently it does not contain any spring boot jars at all whatsoever. This explains then why it can&#39;t run anything. Do you know how I shove spring boot jars into my jar?","body":"@efekctive I just checked my jar, and apparently it does not contain any spring boot jars at all whatsoever. This explains then why it can&#39;t run anything. Do you know how I shove spring boot jars into my jar?"},{"owner":{"account_id":1949626,"reputation":13702,"user_id":1754020,"accept_rate":87,"display_name":"Eddie Martinez"},"score":0,"creation_date":1488039865,"post_id":42458292,"comment_id":72059496,"body_markdown":"what happens when you do gradle install ? It doesnt bring in the dependencies?","body":"what happens when you do gradle install ? It doesnt bring in the dependencies?"},{"owner":{"account_id":935312,"reputation":6386,"user_id":964335,"accept_rate":92,"display_name":"Quillion"},"score":0,"creation_date":1488039972,"post_id":42458292,"comment_id":72059532,"body_markdown":"@EduardoDennis My IDE sees all the dependencies and gradle does bring them in. But when I do jar, the generated jar contains absolutely no other jars, just my code.","body":"@EduardoDennis My IDE sees all the dependencies and gradle does bring them in. But when I do jar, the generated jar contains absolutely no other jars, just my code."},{"owner":{"account_id":2555788,"reputation":794,"user_id":2217804,"accept_rate":75,"display_name":"raminr"},"score":0,"creation_date":1488041588,"post_id":42458292,"comment_id":72060084,"body_markdown":"I think you need to remove the WAR plugin, if you want an executable jar. Also try the bootRepackage plugin. http://docs.spring.io/spring-boot/docs/current/reference/html/build-tool-plugins-gradle-plugin.html#build-tool-plugins-gradle-repackage-configuration","body":"I think you need to remove the WAR plugin, if you want an executable jar. Also try the bootRepackage plugin. <a href=\"http://docs.spring.io/spring-boot/docs/current/reference/html/build-tool-plugins-gradle-plugin.html#build-tool-plugins-gradle-repackage-configuration\" rel=\"nofollow noreferrer\">docs.spring.io/spring-boot/docs/current/reference/html/&hellip;</a>"},{"owner":{"account_id":1169697,"reputation":1416,"user_id":1147141,"accept_rate":42,"display_name":"bichito"},"score":0,"creation_date":1488042028,"post_id":42458292,"comment_id":72060238,"body_markdown":"I think you need to create a fat jar but I have not done with gradle","body":"I think you need to create a fat jar but I have not done with gradle"}],"answers":[{"comments":[{"owner":{"account_id":935312,"reputation":6386,"user_id":964335,"accept_rate":92,"display_name":"Quillion"},"score":3,"creation_date":1488076140,"post_id":42462975,"comment_id":72070065,"body_markdown":"beautiful. Adding `from {\n\t\t(configurations.runtime).collect {\n\t\t\tit.isDirectory() ? it : zipTree(it)\n\t\t}\n\t}` worked like a charm for me :) thank you!","body":"beautiful. Adding <code>from { \t\t(configurations.runtime).collect { \t\t\tit.isDirectory() ? it : zipTree(it) \t\t} \t}</code> worked like a charm for me :) thank you!"}],"tags":[],"owner":{"account_id":2358514,"reputation":9644,"user_id":2065796,"accept_rate":62,"display_name":"Sasha Shpota"},"comment_count":1,"down_vote_count":1,"up_vote_count":14,"is_accepted":true,"score":13,"last_activity_date":1488066045,"creation_date":1488066045,"answer_id":42462975,"question_id":42458292,"body_markdown":"This is because your dependencies are not included into the end jar file.\r\n\r\nTake a look on the examples [here](https://www.mkyong.com/gradle/gradle-create-a-jar-file-with-dependencies/) or [here](https://discuss.gradle.org/t/how-to-include-dependencies-in-jar/19571/5).\r\n\r\nOr alternatively use ```./gradlew clean build``` that should automatically pack the app correctly. Take a look on [the official guide](https://spring.io/guides/gs/spring-boot-docker/)","title":"java.lang.NoClassDefFoundError: when trying to run jar","body":"<p>This is because your dependencies are not included into the end jar file.</p>\n\n<p>Take a look on the examples <a href=\"https://www.mkyong.com/gradle/gradle-create-a-jar-file-with-dependencies/\" rel=\"noreferrer\">here</a> or <a href=\"https://discuss.gradle.org/t/how-to-include-dependencies-in-jar/19571/5\" rel=\"noreferrer\">here</a>.</p>\n\n<p>Or alternatively use <code>./gradlew clean build</code> that should automatically pack the app correctly. Take a look on <a href=\"https://spring.io/guides/gs/spring-boot-docker/\" rel=\"noreferrer\">the official guide</a></p>\n"},{"tags":[],"owner":{"account_id":8188818,"reputation":3448,"user_id":6163756,"display_name":"K. Symbol"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1579403524,"creation_date":1579403524,"answer_id":59806831,"question_id":42458292,"body_markdown":"1. Define a task called `fatJar` in `build.gradle`:\r\n\r\n```groovy\r\njar {\r\n    baseName = &#39;base-name&#39;\r\n    version = &#39;0.1.0&#39;\r\n    manifest {\r\n        attributes(\r\n                &#39;Main-Class&#39;: &#39;com.github:&#39;\r\n        )\r\n    }\r\n}\r\n\r\ntask fatJar(type: Jar) {\r\n    manifest.from jar.manifest\r\n//    classifier = &#39;all&#39;\r\n    from {\r\n        configurations.runtime.collect { it.isDirectory() ? it : zipTree(it) }\r\n    } {\r\n        exclude &quot;META-INF/*.SF&quot;\r\n        exclude &quot;META-INF/*.DSA&quot;\r\n        exclude &quot;META-INF/*.RSA&quot;\r\n    }\r\n    with jar\r\n}\r\n\r\nartifacts {\r\n    archives fatJar\r\n}\r\n```\r\n\r\n2. Run `gradle fatJar` or `./gradlew fatJar` to generate a `jar` file with all dependencies, which can run independently but may be pretty large in size (that&#39;s why it&#39;s called a fat  jar).","title":"java.lang.NoClassDefFoundError: when trying to run jar","body":"<ol>\n<li>Define a task called <code>fatJar</code> in <code>build.gradle</code>:</li>\n</ol>\n\n<pre><code>jar {\n    baseName = 'base-name'\n    version = '0.1.0'\n    manifest {\n        attributes(\n                'Main-Class': 'com.github:'\n        )\n    }\n}\n\ntask fatJar(type: Jar) {\n    manifest.from jar.manifest\n//    classifier = 'all'\n    from {\n        configurations.runtime.collect { it.isDirectory() ? it : zipTree(it) }\n    } {\n        exclude \"META-INF/*.SF\"\n        exclude \"META-INF/*.DSA\"\n        exclude \"META-INF/*.RSA\"\n    }\n    with jar\n}\n\nartifacts {\n    archives fatJar\n}\n</code></pre>\n\n<ol start=\"2\">\n<li>Run <code>gradle fatJar</code> or <code>./gradlew fatJar</code> to generate a <code>jar</code> file with all dependencies, which can run independently but may be pretty large in size (that's why it's called a fat  jar).</li>\n</ol>\n"},{"tags":[],"owner":{"account_id":28264861,"reputation":1,"user_id":21608980,"display_name":"julez"},"comment_count":0,"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1684054475,"creation_date":1681126656,"answer_id":75976753,"question_id":42458292,"body_markdown":"I tried out Sasha Shpota answer and that was my problem too... finally after hours of searching that helped me thanks a lot &lt;3 added this to my grade.build:\r\n\r\n    jar {\r\n       from {\r\n               configurations.extraLibs.collect { it.isDirectory() ? it : \r\n      zipTree(it) }\r\n              }\r\n    }\r\n    \r\n\r\nBetter look at Sasha Shpotas answer\r\n","title":"java.lang.NoClassDefFoundError: when trying to run jar","body":"<p>I tried out Sasha Shpota answer and that was my problem too... finally after hours of searching that helped me thanks a lot &lt;3 added this to my grade.build:</p>\n<pre><code>jar {\n   from {\n           configurations.extraLibs.collect { it.isDirectory() ? it : \n  zipTree(it) }\n          }\n}\n</code></pre>\n<p>Better look at Sasha Shpotas answer</p>\n"},{"comments":[{"owner":{"account_id":16657935,"reputation":834,"user_id":13927534,"display_name":"Miss Skooter"},"score":0,"creation_date":1692272357,"post_id":76905237,"comment_id":135602221,"body_markdown":"Hello! Thank you for your answer. Can you please provide more information on how this helps OP&#39;s problem? Answers should preferably be self contained, meaning all necessary information to understand the answer should be written in the answer and not in external links because links can break over time. (Feel free to quote a source and link to it, but please put the important information here)","body":"Hello! Thank you for your answer. Can you please provide more information on how this helps OP&#39;s problem? Answers should preferably be self contained, meaning all necessary information to understand the answer should be written in the answer and not in external links because links can break over time. (Feel free to quote a source and link to it, but please put the important information here)"}],"tags":[],"owner":{"account_id":29228942,"reputation":1,"user_id":22393058,"display_name":"MegaFildi"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1692096108,"creation_date":1692096108,"answer_id":76905237,"question_id":42458292,"body_markdown":"From the official Spring-Boot-Site - [link][1]\r\n\r\nTry creating a jar with: `gradle clean bootJar`\r\n\r\n  [1]: https://docs.spring.io/spring-boot/docs/current/gradle-plugin/reference/htmlsingle/#managing-dependencies","title":"java.lang.NoClassDefFoundError: when trying to run jar","body":"<p>From the official Spring-Boot-Site - <a href=\"https://docs.spring.io/spring-boot/docs/current/gradle-plugin/reference/htmlsingle/#managing-dependencies\" rel=\"nofollow noreferrer\">link</a></p>\n<p>Try creating a jar with: <code>gradle clean bootJar</code></p>\n"}],"owner":{"account_id":935312,"reputation":6386,"user_id":964335,"accept_rate":92,"display_name":"Quillion"},"comment_count":8,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":33641,"favorite_count":0,"down_vote_count":0,"up_vote_count":12,"accepted_answer_id":42462975,"answer_count":4,"score":12,"last_activity_date":1692096108,"creation_date":1488038604,"question_id":42458292,"body_markdown":"I have a spring boot project using gradle\r\n\r\n    apply plugin: &#39;java&#39;\r\n    apply plugin: &#39;idea&#39;\r\n    apply plugin: &#39;jetty&#39;\r\n    apply plugin: &#39;war&#39;\r\n    apply plugin: &#39;org.springframework.boot&#39;\r\n    \r\n    repositories {\r\n    \tmavenCentral()\r\n    }\r\n    \r\n    dependencies {\r\n    \tcompile(&quot;org.springframework.boot:spring-boot-starter-web:1.5.1.RELEASE&quot;) {\r\n    \t\texclude module: &quot;spring-boot-starter-tomcat&quot;\r\n    \t}\r\n    \tcompile group: &#39;org.springframework.boot&#39;, name: &#39;spring-boot-starter-jetty&#39;, version: &#39;1.5.1.RELEASE&#39;\r\n    \tcompile group: &#39;org.springframework.boot&#39;, name: &#39;spring-boot-starter-actuator&#39;, version: &#39;1.5.1.RELEASE&#39;\r\n    \tcompile group: &#39;org.springframework&#39;, name: &#39;spring-webmvc&#39;, version: &#39;4.3.6.RELEASE&#39;\r\n    \tcompile group: &#39;org.springframework&#39;, name: &#39;spring-context-support&#39;, version: &#39;4.3.6.RELEASE&#39;\r\n    \tcompile group: &#39;org.springframework&#39;, name: &#39;spring-orm&#39;, version: &#39;4.3.6.RELEASE&#39;\r\n    \tcompile group: &#39;javax.servlet&#39;, name: &#39;javax.servlet-api&#39;, version: &#39;3.1.0&#39;\r\n    \tcompile group: &#39;org.freemarker&#39;, name: &#39;freemarker&#39;, version: &#39;2.3.23&#39;\r\n    \tcompile group: &#39;mysql&#39;, name: &#39;mysql-connector-java&#39;, version: &#39;6.0.5&#39;\r\n    \tcompile group: &#39;org.hibernate&#39;, name: &#39;hibernate-core&#39;, version: &#39;5.1.4.Final&#39;\r\n    \tcompile group: &#39;commons-validator&#39;, name: &#39;commons-validator&#39;, version: &#39;1.5.1&#39;\r\n    \tcompile group: &#39;junit&#39;, name: &#39;junit&#39;, version: &#39;4.12&#39;\r\n    \tcompile group: &#39;org.springframework.boot&#39;, name: &#39;spring-boot-starter-test&#39;, version: &#39;1.5.1.RELEASE&#39;\r\n    }\r\n    \r\n    task wrapper(type: Wrapper) {\r\n    \tgradleVersion = &#39;2.2&#39;\r\n    }\r\n    \r\n    buildscript {\r\n    \trepositories {\r\n    \t\tmavenCentral()\r\n    \t}\r\n    \tdependencies {\r\n    \t\tclasspath(&quot;org.springframework.boot:spring-boot-gradle-plugin:1.5.1.RELEASE&quot;)\r\n    \t}\r\n    }\r\n    \r\n    jar {\r\n    \tbaseName = &#39;base-name&#39;\r\n    \tversion = &#39;0.1.0&#39;\r\n    \tmanifest {\r\n    \t\tattributes &#39;Main-Class&#39;: &#39;some.application.Application&#39;\r\n    \t}\r\n    }\r\n    \r\n    sourceCompatibility = 1.8\r\n    targetCompatibility = 1.8\r\n\r\n\r\nI build using&lt;br&gt;\r\n`./gradlew clean jar`&lt;br&gt;\r\nThen try to run using&lt;br&gt;\r\n`java -jar &lt;jar-name&gt;.jar`\r\n\r\nHowever I get an error saying\r\n\r\n    Exception in thread &quot;main&quot; java.lang.NoClassDefFoundError: org/springframework/boot/SpringApplication\r\n            at some.application.Application.main(Application.java:11)\r\n    Caused by: java.lang.ClassNotFoundException: org.springframework.boot.SpringApplication\r\n            at java.net.URLClassLoader.findClass(URLClassLoader.java:381)\r\n            at java.lang.ClassLoader.loadClass(ClassLoader.java:424)\r\n            at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:331)\r\n            at java.lang.ClassLoader.loadClass(ClassLoader.java:357)\r\n            ... 1 more\r\n\r\n\r\nI am so confused as to why I can run it in IDE but not as a jar. Also I found out that my jar doesn&#39;t contain any libraries at all.\r\n\r\nEDIT:\r\n\r\nThis is my `Application.class`\r\n\r\npackage some.application;\r\n\r\n    import org.springframework.boot.SpringApplication;\r\n    import org.springframework.boot.autoconfigure.SpringBootApplication;\r\n    \r\n    @SpringBootApplication\r\n    public class Application\r\n    {\r\n    \tpublic static void main(String[] args)\r\n    \t{\r\n    \t\tSpringApplication.run(Application.class, args);\r\n    \t}\r\n    }\r\n\r\n","title":"java.lang.NoClassDefFoundError: when trying to run jar","body":"<p>I have a spring boot project using gradle</p>\n\n<pre><code>apply plugin: 'java'\napply plugin: 'idea'\napply plugin: 'jetty'\napply plugin: 'war'\napply plugin: 'org.springframework.boot'\n\nrepositories {\n    mavenCentral()\n}\n\ndependencies {\n    compile(\"org.springframework.boot:spring-boot-starter-web:1.5.1.RELEASE\") {\n        exclude module: \"spring-boot-starter-tomcat\"\n    }\n    compile group: 'org.springframework.boot', name: 'spring-boot-starter-jetty', version: '1.5.1.RELEASE'\n    compile group: 'org.springframework.boot', name: 'spring-boot-starter-actuator', version: '1.5.1.RELEASE'\n    compile group: 'org.springframework', name: 'spring-webmvc', version: '4.3.6.RELEASE'\n    compile group: 'org.springframework', name: 'spring-context-support', version: '4.3.6.RELEASE'\n    compile group: 'org.springframework', name: 'spring-orm', version: '4.3.6.RELEASE'\n    compile group: 'javax.servlet', name: 'javax.servlet-api', version: '3.1.0'\n    compile group: 'org.freemarker', name: 'freemarker', version: '2.3.23'\n    compile group: 'mysql', name: 'mysql-connector-java', version: '6.0.5'\n    compile group: 'org.hibernate', name: 'hibernate-core', version: '5.1.4.Final'\n    compile group: 'commons-validator', name: 'commons-validator', version: '1.5.1'\n    compile group: 'junit', name: 'junit', version: '4.12'\n    compile group: 'org.springframework.boot', name: 'spring-boot-starter-test', version: '1.5.1.RELEASE'\n}\n\ntask wrapper(type: Wrapper) {\n    gradleVersion = '2.2'\n}\n\nbuildscript {\n    repositories {\n        mavenCentral()\n    }\n    dependencies {\n        classpath(\"org.springframework.boot:spring-boot-gradle-plugin:1.5.1.RELEASE\")\n    }\n}\n\njar {\n    baseName = 'base-name'\n    version = '0.1.0'\n    manifest {\n        attributes 'Main-Class': 'some.application.Application'\n    }\n}\n\nsourceCompatibility = 1.8\ntargetCompatibility = 1.8\n</code></pre>\n\n<p>I build using<br>\n<code>./gradlew clean jar</code><br>\nThen try to run using<br>\n<code>java -jar &lt;jar-name&gt;.jar</code></p>\n\n<p>However I get an error saying</p>\n\n<pre><code>Exception in thread \"main\" java.lang.NoClassDefFoundError: org/springframework/boot/SpringApplication\n        at some.application.Application.main(Application.java:11)\nCaused by: java.lang.ClassNotFoundException: org.springframework.boot.SpringApplication\n        at java.net.URLClassLoader.findClass(URLClassLoader.java:381)\n        at java.lang.ClassLoader.loadClass(ClassLoader.java:424)\n        at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:331)\n        at java.lang.ClassLoader.loadClass(ClassLoader.java:357)\n        ... 1 more\n</code></pre>\n\n<p>I am so confused as to why I can run it in IDE but not as a jar. Also I found out that my jar doesn't contain any libraries at all.</p>\n\n<p>EDIT:</p>\n\n<p>This is my <code>Application.class</code></p>\n\n<p>package some.application;</p>\n\n<pre><code>import org.springframework.boot.SpringApplication;\nimport org.springframework.boot.autoconfigure.SpringBootApplication;\n\n@SpringBootApplication\npublic class Application\n{\n    public static void main(String[] args)\n    {\n        SpringApplication.run(Application.class, args);\n    }\n}\n</code></pre>\n"},{"tags":["java","multithreading","unit-testing","junit"],"comments":[{"owner":{"account_id":2256418,"reputation":3983,"user_id":1987514,"accept_rate":86,"display_name":"Ben Green"},"score":1,"creation_date":1459252604,"post_id":36283334,"comment_id":60192939,"body_markdown":"Using `Thread.sleep` in a unit test isn&#39;t bad practice, as all you are doing is mimicking the passage of time, which is necessary for some unit tests. The reason people say that using `Thread.sleep` is a bad practice is because it is sometimes used as an attempt to fix race condition. \n\nAre you only using the `Thread.sleep` in the tests, or in your source code?","body":"Using <code>Thread.sleep</code> in a unit test isn&#39;t bad practice, as all you are doing is mimicking the passage of time, which is necessary for some unit tests. The reason people say that using <code>Thread.sleep</code> is a bad practice is because it is sometimes used as an attempt to fix race condition.   Are you only using the <code>Thread.sleep</code> in the tests, or in your source code?"},{"owner":{"account_id":160245,"reputation":2421,"user_id":380161,"accept_rate":57,"display_name":"Anupam Saini"},"score":0,"creation_date":1459252858,"post_id":36283334,"comment_id":60193129,"body_markdown":"When you are testing the threaded code, how would you ensure your unit tests are not flaky? That they always execute in a deterministic fashion.             I think mocking the Service class is a better opiton","body":"When you are testing the threaded code, how would you ensure your unit tests are not flaky? That they always execute in a deterministic fashion.             I think mocking the Service class is a better opiton"},{"owner":{"account_id":1988392,"reputation":2547,"user_id":1783045,"accept_rate":90,"display_name":"Rufi"},"score":0,"creation_date":1459252868,"post_id":36283334,"comment_id":60193135,"body_markdown":"I am using sleep only in tests, but found quite a few places where people mention that generally sleep is not that good in unit tests. For example, also SonarLint plugin is complaining and saying that it is violation and give the following description: &quot;Using Thread.sleep in a test is just generally a bad idea. It creates brittle tests that can fail unpredictably depending on environment (&quot;Passes on my machine!&quot;) or load.&quot;","body":"I am using sleep only in tests, but found quite a few places where people mention that generally sleep is not that good in unit tests. For example, also SonarLint plugin is complaining and saying that it is violation and give the following description: &quot;Using Thread.sleep in a test is just generally a bad idea. It creates brittle tests that can fail unpredictably depending on environment (&quot;Passes on my machine!&quot;) or load.&quot;"},{"owner":{"account_id":4273793,"reputation":168,"user_id":3494992,"display_name":"MolonLabe"},"score":0,"creation_date":1459253129,"post_id":36283334,"comment_id":60193321,"body_markdown":"Agree with Ben.  We run JUnit tests during our Maven builds and the current thread doesn&#39;t wait for multithreaded processes, like JMS interactions and external performance monitoring.  Thread.sleep is what we use to ensure those processes complete before the thread is killed.","body":"Agree with Ben.  We run JUnit tests during our Maven builds and the current thread doesn&#39;t wait for multithreaded processes, like JMS interactions and external performance monitoring.  Thread.sleep is what we use to ensure those processes complete before the thread is killed."},{"owner":{"account_id":1988392,"reputation":2547,"user_id":1783045,"accept_rate":90,"display_name":"Rufi"},"score":0,"creation_date":1459253461,"post_id":36283334,"comment_id":60193556,"body_markdown":"Won&#39;t you agree that Sleep makes unit tests slower at least? Shouldn&#39;t I try to avoid it?","body":"Won&#39;t you agree that Sleep makes unit tests slower at least? Shouldn&#39;t I try to avoid it?"},{"owner":{"account_id":3617102,"reputation":1787,"user_id":3016686,"display_name":"Ultimate Fighter"},"score":0,"creation_date":1474014190,"post_id":36283334,"comment_id":66368595,"body_markdown":"perhaps it helps: [Testing Thread.start without sleep](http://stackoverflow.com/a/39525700/3016686)","body":"perhaps it helps: <a href=\"http://stackoverflow.com/a/39525700/3016686\">Testing Thread.start without sleep</a>"},{"owner":{"account_id":261142,"reputation":47118,"user_id":545127,"accept_rate":69,"display_name":"Raedwald"},"score":0,"creation_date":1510484235,"post_id":36283334,"comment_id":81446010,"body_markdown":"See also https://stackoverflow.com/questions/12159/how-should-i-unit-test-threaded-code","body":"See also <a href=\"https://stackoverflow.com/questions/12159/how-should-i-unit-test-threaded-code\" title=\"how should i unit test threaded code\">stackoverflow.com/questions/12159/&hellip;</a>"}],"answers":[{"comments":[{"owner":{"account_id":1988392,"reputation":2547,"user_id":1783045,"accept_rate":90,"display_name":"Rufi"},"score":0,"creation_date":1459253273,"post_id":36283641,"comment_id":60193412,"body_markdown":"Yes, this might be one way, however, i cannot say that I like it. Most probably my test moves from Unit test to Integration test then. RoutingService is tested, but in this case I want to verify that under certain conditions the routing was done, however, it might take some time. Of course, I can mock RoutingService and verify that specific method was called, but then I will not cover the state change.","body":"Yes, this might be one way, however, i cannot say that I like it. Most probably my test moves from Unit test to Integration test then. RoutingService is tested, but in this case I want to verify that under certain conditions the routing was done, however, it might take some time. Of course, I can mock RoutingService and verify that specific method was called, but then I will not cover the state change."},{"owner":{"account_id":3123845,"reputation":4404,"user_id":2643110,"display_name":"forgivenson"},"score":0,"creation_date":1459253903,"post_id":36283641,"comment_id":60193873,"body_markdown":"Yes, I would say if you want to do this, it becomes an integration test, and shouldn&#39;t be run with the normal set of unit tests. unit tests should complete quickly and consistently, so developers can run them all before checking in any code. Have a separate set of integration tests that get run on a regular basis (such as via Jenkins)","body":"Yes, I would say if you want to do this, it becomes an integration test, and shouldn&#39;t be run with the normal set of unit tests. unit tests should complete quickly and consistently, so developers can run them all before checking in any code. Have a separate set of integration tests that get run on a regular basis (such as via Jenkins)"}],"tags":[],"owner":{"account_id":3123845,"reputation":4404,"user_id":2643110,"display_name":"forgivenson"},"comment_count":2,"down_vote_count":0,"up_vote_count":8,"is_accepted":true,"score":8,"last_activity_date":1586291500,"creation_date":1459252741,"answer_id":36283641,"question_id":36283334,"body_markdown":"If you are testing [**Unit Test**] for the method `methodToBeTested`, you should simply mock `routingservice`.  \r\nYou shouldn&#39;t be testing any methods that `methodToBeTested` calls.  \r\n\r\nHowever, it sounds like you want to test the `RoutingService` (you said &quot;The problem is that `RoutingService` changes the state of `objectToRoute` and this is exactly what I want to check&quot;).  \r\n\r\nTo test `RoutingService` methods, you should write separate unit tests for those methods.","title":"How to avoid Thread.sleep in Unit tests?","body":"<p>If you are testing [<strong>Unit Test</strong>] for the method <code>methodToBeTested</code>, you should simply mock <code>routingservice</code>.<br>\nYou shouldn't be testing any methods that <code>methodToBeTested</code> calls.  </p>\n\n<p>However, it sounds like you want to test the <code>RoutingService</code> (you said \"The problem is that <code>RoutingService</code> changes the state of <code>objectToRoute</code> and this is exactly what I want to check\").  </p>\n\n<p>To test <code>RoutingService</code> methods, you should write separate unit tests for those methods.</p>\n"},{"tags":[],"owner":{"account_id":113085,"reputation":18448,"user_id":298029,"display_name":"fgb"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1459253807,"creation_date":1459253807,"answer_id":36284030,"question_id":36283334,"body_markdown":"You could mock `objectToRoute` to set the value of a `CompletableFuture` and then call `get` on that in your assertion. This will wait until the value is set before continuing. Then set a timeout `@Test(timeout=5000)` in case the value is never set.\r\n\r\nThis has the advantage that the test won&#39;t wait longer than necessary and it&#39;s harder to fail because of too short a time because you can make the timeout much larger than normal.","title":"How to avoid Thread.sleep in Unit tests?","body":"<p>You could mock <code>objectToRoute</code> to set the value of a <code>CompletableFuture</code> and then call <code>get</code> on that in your assertion. This will wait until the value is set before continuing. Then set a timeout <code>@Test(timeout=5000)</code> in case the value is never set.</p>\n\n<p>This has the advantage that the test won't wait longer than necessary and it's harder to fail because of too short a time because you can make the timeout much larger than normal.</p>\n"},{"tags":[],"owner":{"account_id":4342327,"reputation":145474,"user_id":3545273,"accept_rate":100,"display_name":"Serge Ballesta"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1459255897,"creation_date":1459255897,"answer_id":36284821,"question_id":36283334,"body_markdown":"It depends. As Ben Green said in his comment, sleep is dangerous in tests because it can hide a race condition. **You** know if the overall design contains such a race condition, where the service could be used before the route is ready. It it does, you should fix it in code, for example by testing a *ready* condition, and test it the same in your test class.\r\n\r\nIf you know that it cannot happen, you should document it in you main code **and** in your test class. That would then be a perfect justification for a sleep.\r\n\r\n(I assume that this is for an integration test - for unit tests *mocks* should be enough as you were said in other answers)","title":"How to avoid Thread.sleep in Unit tests?","body":"<p>It depends. As Ben Green said in his comment, sleep is dangerous in tests because it can hide a race condition. <strong>You</strong> know if the overall design contains such a race condition, where the service could be used before the route is ready. It it does, you should fix it in code, for example by testing a <em>ready</em> condition, and test it the same in your test class.</p>\n\n<p>If you know that it cannot happen, you should document it in you main code <strong>and</strong> in your test class. That would then be a perfect justification for a sleep.</p>\n\n<p>(I assume that this is for an integration test - for unit tests <em>mocks</em> should be enough as you were said in other answers)</p>\n"},{"tags":[],"owner":{"account_id":6905889,"reputation":41,"user_id":5303789,"display_name":"Pusarla Shahil"},"comment_count":0,"down_vote_count":3,"up_vote_count":0,"is_accepted":false,"score":-3,"last_activity_date":1500908217,"creation_date":1500908217,"answer_id":45283819,"question_id":36283334,"body_markdown":"Instead of avoiding Thread.sleep(), You can pass value as zero in Junit Test Case.","title":"How to avoid Thread.sleep in Unit tests?","body":"<p>Instead of avoiding Thread.sleep(), You can pass value as zero in Junit Test Case.</p>\n"},{"comments":[{"owner":{"account_id":2123935,"reputation":851,"user_id":1886601,"accept_rate":91,"display_name":"java_newbie"},"score":5,"creation_date":1553607695,"post_id":51017439,"comment_id":97440958,"body_markdown":"just wondering what&#39;s the profit here? unless we can only win some extra time so tests are a bit faster... but still it&#39;s similar to thread.sleep just with some syntax-sugar","body":"just wondering what&#39;s the profit here? unless we can only win some extra time so tests are a bit faster... but still it&#39;s similar to thread.sleep just with some syntax-sugar"},{"owner":{"account_id":6428583,"reputation":6399,"user_id":4982691,"display_name":"jumping_monkey"},"score":3,"creation_date":1653972811,"post_id":51017439,"comment_id":127974152,"body_markdown":"@java_newbie: From SonarLint Rule Description(java:S2925):`Using Thread.sleep in a test is just generally a bad idea. It creates brittle tests that can fail unpredictably depending on environment (&quot;Passes on my machine!&quot;) or load. Don’t rely on timing (use mocks) or use libraries such as Awaitility for asynchroneous testing.`","body":"@java_newbie: From SonarLint Rule Description(java:S2925):<code>Using Thread.sleep in a test is just generally a bad idea. It creates brittle tests that can fail unpredictably depending on environment (&quot;Passes on my machine!&quot;) or load. Don’t rely on timing (use mocks) or use libraries such as Awaitility for asynchroneous testing.</code>"}],"tags":[],"owner":{"account_id":7952529,"reputation":600,"user_id":6002951,"accept_rate":67,"display_name":"sarah"},"comment_count":2,"down_vote_count":0,"up_vote_count":9,"is_accepted":false,"score":9,"last_activity_date":1529908017,"creation_date":1529908017,"answer_id":51017439,"question_id":36283334,"body_markdown":"I suggest [awaitility][1] for synchronizing asynchronous tests. For example, assume you have an result object that get set after some thread operations and you want to test it. You write statement like this:\r\n\r\n     await()\r\n    .atMost(100, TimeUnit.SECONDS)\r\n    .untilAsserted(() -&gt; assertNotNull(resultObject.getResult()));\r\n\r\nIt waits maximum 100 seconds, **or** until the assertion is satisfied. For instance, if getResult() returns something that is not null in between 0-100 seconds, the execution continues unlike Thread.sleep which holds the execution for given time no matter result is there or not.\r\n\r\n\r\n  [1]: https://github.com/awaitility/awaitility\r\n\r\n","title":"How to avoid Thread.sleep in Unit tests?","body":"<p>I suggest <a href=\"https://github.com/awaitility/awaitility\" rel=\"noreferrer\">awaitility</a> for synchronizing asynchronous tests. For example, assume you have an result object that get set after some thread operations and you want to test it. You write statement like this:</p>\n\n<pre><code> await()\n.atMost(100, TimeUnit.SECONDS)\n.untilAsserted(() -&gt; assertNotNull(resultObject.getResult()));\n</code></pre>\n\n<p>It waits maximum 100 seconds, <strong>or</strong> until the assertion is satisfied. For instance, if getResult() returns something that is not null in between 0-100 seconds, the execution continues unlike Thread.sleep which holds the execution for given time no matter result is there or not.</p>\n"},{"tags":[],"owner":{"account_id":6615281,"reputation":1826,"user_id":5108777,"display_name":"manuelvigarcia"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1544523231,"creation_date":1544523231,"answer_id":53721860,"question_id":36283334,"body_markdown":"Use Object.wait()\r\n===\r\nWe have worked with some asynchronous processes that obtain files from directories or .ZIP archives. We use the content of the files somewhere else while the asynchronous one keeps on reading.\r\n\r\nThe way we came around to test them was to `wait()` on the communication object --in our case it was a Queue--, so the asynchronous process would `queue.notifyAll()` whenever there was a new file ready to be used and kept working. On the other end the consumer would process one item at a time until the queue was empty and then `queue.wait()` to wait for more. We do use a special object passed through the queue to indicate that there are no more items to process.\r\n\r\nIn your case I suppose the object you want to check, `objectToRoute,` is not really created inside the method you want to test. You could `wait()` on it inside the test, and `notifyAll()` on it inside the method you want to test, `methodToBeTested.` I know this would introduce the extra line of code in your production code base, but with nobody waiting on it, it should result harmless. It would end up something like:\r\n\r\n    public void methodToBeTested(Object objectToRoute) {\r\n        if (someConditions) {\r\n             routingService.routeInOneWay(objectToRoute);\r\n        } else {\r\n             routingService.routeInAnotherWay(objectToRoute);\r\n        }\r\n        synchronized(objectToRoute) {\r\n            objectToRoute.notifyAll();\r\n        }\r\n    }\r\n\r\nAnd in your test class there will be something like:\r\n\r\n    @Test\r\n    public void testMethodToBeTested() throws InterruptedException {\r\n        Object objectToRoute = initializeObjectToRoute();\r\n        methodToBeTested(objectToRoute);\r\n        synchronized (objectToRoute) {\r\n            objectToRoute.wait();\r\n        }\r\n        verifyConditionsAfterRouting(objectToRoute);\r\n    }\r\n\r\nI do know that in this simple example does not make too much sense, since the sample system is not multithreaded. I assume the multithread twist is added in the `routeInOneWay` and `routeInAnotherWay` methods; thus, those are the ones to call `notifyAll()` method.\r\n\r\nAs sample code to point the direction of our solution, here are some code fragments.\r\n\r\nIn the asynchronous worker side, or producer:\r\n\r\n    while(files.hasNext(){\r\n       queue.add(files.next());\r\n       synchronized (outputQueue) {\r\n           queue.notifyAll()\r\n       }\r\n    }\r\n\r\nAnd in the consumer side:\r\n\r\n    while(!finished){\r\n        while(!queue.isEmpty()){\r\n            nextFile = queue.poll();\r\n            if (nextFile.equals(NO_MORE_FILES_SIGNAL)) {\r\n                finished = true;\r\n                break;\r\n            }\r\n            doYourThingWith(nextFile);\r\n        }\r\n        if (!finished) {\r\n            synchronized (outputQueue) {\r\n                outputQueue.wait();\r\n            }\r\n        }\r\n    }","title":"How to avoid Thread.sleep in Unit tests?","body":"<h1>Use Object.wait()</h1>\n\n<p>We have worked with some asynchronous processes that obtain files from directories or .ZIP archives. We use the content of the files somewhere else while the asynchronous one keeps on reading.</p>\n\n<p>The way we came around to test them was to <code>wait()</code> on the communication object --in our case it was a Queue--, so the asynchronous process would <code>queue.notifyAll()</code> whenever there was a new file ready to be used and kept working. On the other end the consumer would process one item at a time until the queue was empty and then <code>queue.wait()</code> to wait for more. We do use a special object passed through the queue to indicate that there are no more items to process.</p>\n\n<p>In your case I suppose the object you want to check, <code>objectToRoute,</code> is not really created inside the method you want to test. You could <code>wait()</code> on it inside the test, and <code>notifyAll()</code> on it inside the method you want to test, <code>methodToBeTested.</code> I know this would introduce the extra line of code in your production code base, but with nobody waiting on it, it should result harmless. It would end up something like:</p>\n\n<pre><code>public void methodToBeTested(Object objectToRoute) {\n    if (someConditions) {\n         routingService.routeInOneWay(objectToRoute);\n    } else {\n         routingService.routeInAnotherWay(objectToRoute);\n    }\n    synchronized(objectToRoute) {\n        objectToRoute.notifyAll();\n    }\n}\n</code></pre>\n\n<p>And in your test class there will be something like:</p>\n\n<pre><code>@Test\npublic void testMethodToBeTested() throws InterruptedException {\n    Object objectToRoute = initializeObjectToRoute();\n    methodToBeTested(objectToRoute);\n    synchronized (objectToRoute) {\n        objectToRoute.wait();\n    }\n    verifyConditionsAfterRouting(objectToRoute);\n}\n</code></pre>\n\n<p>I do know that in this simple example does not make too much sense, since the sample system is not multithreaded. I assume the multithread twist is added in the <code>routeInOneWay</code> and <code>routeInAnotherWay</code> methods; thus, those are the ones to call <code>notifyAll()</code> method.</p>\n\n<p>As sample code to point the direction of our solution, here are some code fragments.</p>\n\n<p>In the asynchronous worker side, or producer:</p>\n\n<pre><code>while(files.hasNext(){\n   queue.add(files.next());\n   synchronized (outputQueue) {\n       queue.notifyAll()\n   }\n}\n</code></pre>\n\n<p>And in the consumer side:</p>\n\n<pre><code>while(!finished){\n    while(!queue.isEmpty()){\n        nextFile = queue.poll();\n        if (nextFile.equals(NO_MORE_FILES_SIGNAL)) {\n            finished = true;\n            break;\n        }\n        doYourThingWith(nextFile);\n    }\n    if (!finished) {\n        synchronized (outputQueue) {\n            outputQueue.wait();\n        }\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1961640,"reputation":12136,"user_id":1763035,"accept_rate":56,"display_name":"Andy Brown"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1692095871,"creation_date":1692095407,"answer_id":76905179,"question_id":36283334,"body_markdown":"Since java 9 you can use the `delayedExecutor` method of `CompleteableFuture` to avoid `Thread.sleep` and its SonarLint warnings.\r\n\r\nThis is the basic pattern, adjust to your needs:\r\n\r\n```java\r\nimport static java.util.concurrent.CompletableFuture.delayedExecutor;\r\nimport static java.util.concurrent.CompletableFuture.runAsync;\r\nimport static java.util.concurrent.TimeUnit.MILLISECONDS;\r\n\r\n@Test\r\nvoid yourTest() {\r\n\r\n// [...]\r\n\r\n  runAsync(() -&gt; {}, delayedExecutor(100, MILLISECONDS)).join();\r\n}\r\n```","title":"How to avoid Thread.sleep in Unit tests?","body":"<p>Since java 9 you can use the <code>delayedExecutor</code> method of <code>CompleteableFuture</code> to avoid <code>Thread.sleep</code> and its SonarLint warnings.</p>\n<p>This is the basic pattern, adjust to your needs:</p>\n<pre class=\"lang-java prettyprint-override\"><code>import static java.util.concurrent.CompletableFuture.delayedExecutor;\nimport static java.util.concurrent.CompletableFuture.runAsync;\nimport static java.util.concurrent.TimeUnit.MILLISECONDS;\n\n@Test\nvoid yourTest() {\n\n// [...]\n\n  runAsync(() -&gt; {}, delayedExecutor(100, MILLISECONDS)).join();\n}\n</code></pre>\n"}],"owner":{"account_id":1988392,"reputation":2547,"user_id":1783045,"accept_rate":90,"display_name":"Rufi"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":42840,"favorite_count":0,"down_vote_count":0,"up_vote_count":23,"accepted_answer_id":36283641,"answer_count":7,"score":23,"last_activity_date":1692095871,"creation_date":1459251844,"question_id":36283334,"body_markdown":"Let&#39;s imagine I have the following method which should be tested:\r\n\r\n    @Autowired\r\n    private RoutingService routingservice;\r\n\r\n    public void methodToBeTested() {\r\n        Object objectToRoute = initializeObjectToRoute();\r\n        if (someConditions) {\r\n             routingService.routeInOneWay(objectToRoute);\r\n        } else {\r\n             routingService.routeInAnotherWay(objectToRoute);\r\n        }\r\n    }\r\n\r\nIn this case `RoutingService` is running in the separate thread, thus in it&#39;s constructor we have the following:\r\n\r\n\tThread thread = new Thread(this);\r\n\tthread.setDaemon(true);\r\n\tthread.start();\r\n\r\nThe problem is that `RoutingService` changes the state of `objectToRoute` and this is exactly what I want to check, but this doesn&#39;t happen straight away thus the test fails. However, if I add `Thread.sleep()` then it works, but this is bad practice as I know.\r\n\r\nHow can I avoid `Thread.sleep()` in this case?","title":"How to avoid Thread.sleep in Unit tests?","body":"<p>Let's imagine I have the following method which should be tested:</p>\n\n<pre><code>@Autowired\nprivate RoutingService routingservice;\n\npublic void methodToBeTested() {\n    Object objectToRoute = initializeObjectToRoute();\n    if (someConditions) {\n         routingService.routeInOneWay(objectToRoute);\n    } else {\n         routingService.routeInAnotherWay(objectToRoute);\n    }\n}\n</code></pre>\n\n<p>In this case <code>RoutingService</code> is running in the separate thread, thus in it's constructor we have the following:</p>\n\n<pre><code>Thread thread = new Thread(this);\nthread.setDaemon(true);\nthread.start();\n</code></pre>\n\n<p>The problem is that <code>RoutingService</code> changes the state of <code>objectToRoute</code> and this is exactly what I want to check, but this doesn't happen straight away thus the test fails. However, if I add <code>Thread.sleep()</code> then it works, but this is bad practice as I know.</p>\n\n<p>How can I avoid <code>Thread.sleep()</code> in this case?</p>\n"},{"tags":["java","android","xml"],"comments":[{"owner":{"account_id":23066674,"reputation":75,"user_id":17180999,"display_name":"Jack Sparrow"},"score":0,"creation_date":1635215349,"post_id":69716781,"comment_id":123230716,"body_markdown":"why not you find your `linear layout` in where you finding all views may this help","body":"why not you find your <code>linear layout</code> in where you finding all views may this help"},{"owner":{"account_id":2483288,"reputation":699,"user_id":11097900,"display_name":"Don Ha"},"score":0,"creation_date":1635216768,"post_id":69716781,"comment_id":123230934,"body_markdown":"try to call  invalidate() on parent view","body":"try to call  invalidate() on parent view"},{"owner":{"account_id":20417309,"reputation":716,"user_id":14979180,"display_name":"Danish"},"score":0,"creation_date":1635222351,"post_id":69716781,"comment_id":123231737,"body_markdown":"use runOnUiThread and place your assess_list_layout.setVisibility(View.VISIBLE); in its run method.","body":"use runOnUiThread and place your assess_list_layout.setVisibility(View.VISIBLE); in its run method."},{"owner":{"account_id":9862108,"reputation":134,"user_id":7304712,"accept_rate":60,"display_name":"Seth Harlaar"},"score":0,"creation_date":1635249988,"post_id":69716781,"comment_id":123241223,"body_markdown":"@ Danish - So I have the context as one of the arguments of the constructor, which I casted as an Activity, which I then used to call runOnUiThread, in which I called setVisibility(View.VISIBLE), which did not work.","body":"@ Danish - So I have the context as one of the arguments of the constructor, which I casted as an Activity, which I then used to call runOnUiThread, in which I called setVisibility(View.VISIBLE), which did not work."},{"owner":{"account_id":6330332,"reputation":103,"user_id":4915428,"display_name":"Emo"},"score":0,"creation_date":1635493002,"post_id":69716781,"comment_id":123318042,"body_markdown":"Just like you found the `R.id.course_adapter_layout` view find `R.id.assess_list_layout` , like this `LinearLayout assess_list_layout = v.findViewById(R.id.assess_list_layout);` Notice the `v.findViewById` instead of `view.findViewById` . Also move it outside the `onClick` event","body":"Just like you found the <code>R.id.course_adapter_layout</code> view find <code>R.id.assess_list_layout</code> , like this <code>LinearLayout assess_list_layout = v.findViewById(R.id.assess_list_layout);</code> Notice the <code>v.findViewById</code> instead of <code>view.findViewById</code> . Also move it outside the <code>onClick</code> event"},{"owner":{"account_id":9862108,"reputation":134,"user_id":7304712,"accept_rate":60,"display_name":"Seth Harlaar"},"score":0,"creation_date":1635505038,"post_id":69716781,"comment_id":123322360,"body_markdown":"Changing view to v and v to view does not help, they are the same thing.","body":"Changing view to v and v to view does not help, they are the same thing."},{"owner":{"account_id":8373673,"reputation":61868,"user_id":6287910,"display_name":"Cheticamp"},"score":0,"creation_date":1635599631,"post_id":69716781,"comment_id":123344551,"body_markdown":"If the code works outside the click listener then it may be related to layout. Call `requestLayout()` on the clicked view group to see if that is the problem. Also, you say the id is &quot;assess_layout_list&quot; in the description but it is &quot;assess_list_layout&quot; in the code.","body":"If the code works outside the click listener then it may be related to layout. Call <code>requestLayout()</code> on the clicked view group to see if that is the problem. Also, you say the id is &quot;assess_layout_list&quot; in the description but it is &quot;assess_list_layout&quot; in the code."},{"owner":{"account_id":5877971,"reputation":1421,"user_id":4628279,"display_name":"akhil nair"},"score":0,"creation_date":1635601428,"post_id":69716781,"comment_id":123344896,"body_markdown":"The xml which you added here is it the row of `ListView`? If so then in each row you have `ListView`? Can you add more code to your `CourseListAdapter.java`","body":"The xml which you added here is it the row of <code>ListView</code>? If so then in each row you have <code>ListView</code>? Can you add more code to your <code>CourseListAdapter.java</code>"},{"owner":{"account_id":5877971,"reputation":1421,"user_id":4628279,"display_name":"akhil nair"},"score":0,"creation_date":1635770755,"post_id":69716781,"comment_id":123374741,"body_markdown":"@SethHarlaar Did you get a solution for your problem?","body":"@SethHarlaar Did you get a solution for your problem?"},{"owner":{"account_id":9862108,"reputation":134,"user_id":7304712,"accept_rate":60,"display_name":"Seth Harlaar"},"score":0,"creation_date":1635781380,"post_id":69716781,"comment_id":123379021,"body_markdown":"@Cheticamp I called requestLayout() and it did not work","body":"@Cheticamp I called requestLayout() and it did not work"},{"owner":{"account_id":9862108,"reputation":134,"user_id":7304712,"accept_rate":60,"display_name":"Seth Harlaar"},"score":0,"creation_date":1635781440,"post_id":69716781,"comment_id":123379050,"body_markdown":"@akhilnair I&#39;m not sure I understand what your asking, could you rephrase? and no, I have not","body":"@akhilnair I&#39;m not sure I understand what your asking, could you rephrase? and no, I have not"},{"owner":{"account_id":5877971,"reputation":1421,"user_id":4628279,"display_name":"akhil nair"},"score":0,"creation_date":1635803442,"post_id":69716781,"comment_id":123386343,"body_markdown":"I am here trying to understand the problem and what you have done so far. In the question I see a layout xml file `course_adapter_view` does this layout represent each row of the ListView? Can you please add full code of your `CourseListAdapter.java` to get a better picture?","body":"I am here trying to understand the problem and what you have done so far. In the question I see a layout xml file <code>course_adapter_view</code> does this layout represent each row of the ListView? Can you please add full code of your <code>CourseListAdapter.java</code> to get a better picture?"},{"owner":{"account_id":9862108,"reputation":134,"user_id":7304712,"accept_rate":60,"display_name":"Seth Harlaar"},"score":0,"creation_date":1635804421,"post_id":69716781,"comment_id":123386568,"body_markdown":"Yes, course_adapter_view represents a row in a ListView. It has two sections, the header section, which is the first nested LinearLayout, and the content section, which has id=&quot;assess_list_layout&quot; and is the second nested LinearLayout. Keep in mind that assess_list_layout also contains a ListView, but it is a different one that the CourseAdapter is being used to fill out. CourseAdapter fills out a list of courses, with the layout course_adapter_view, and AssessmentListAdapter fills out the list with id=&quot;course_adapter_assess_list&quot;, which is in the content section of assess_list_layout.","body":"Yes, course_adapter_view represents a row in a ListView. It has two sections, the header section, which is the first nested LinearLayout, and the content section, which has id=&quot;assess_list_layout&quot; and is the second nested LinearLayout. Keep in mind that assess_list_layout also contains a ListView, but it is a different one that the CourseAdapter is being used to fill out. CourseAdapter fills out a list of courses, with the layout course_adapter_view, and AssessmentListAdapter fills out the list with id=&quot;course_adapter_assess_list&quot;, which is in the content section of assess_list_layout."}],"answers":[{"comments":[{"owner":{"account_id":9862108,"reputation":134,"user_id":7304712,"accept_rate":60,"display_name":"Seth Harlaar"},"score":0,"creation_date":1635858070,"post_id":69804690,"comment_id":123399986,"body_markdown":"Good solution. I added a function to also switch the selected, and I also added some selection statements around the &#39;assess_list_layout.setVisibility(View.VISIBLE);&#39; statement that you have inside the click listener to switch if its visible or not.","body":"Good solution. I added a function to also switch the selected, and I also added some selection statements around the &#39;assess_list_layout.setVisibility(View.VISIBLE);&#39; statement that you have inside the click listener to switch if its visible or not."}],"tags":[],"owner":{"account_id":1623292,"reputation":1073,"user_id":1501864,"accept_rate":0,"display_name":"Jeevanandhan"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1635821206,"creation_date":1635819486,"answer_id":69804690,"question_id":69716781,"body_markdown":"**1.View Visibility not working**\r\n\r\nThe Visibility is not working because the view is not rendered initially. Remove the visibility gone in the xml and handle the visibility fully in the adapter class. In the &#39;assess_list_layout&#39; linerlayout height can be  hardcode because inside this layout the listview height is already hardcoded. You can hardcode to 300 and check. This way will help the view to get the initial rendering.\r\n\r\n**2. Scroll issue** \r\n\r\nWhile scrolling the already visible &#39;assess_list_layout&#39; view might be not visible. This is because we need to handle the visibility, this handling is similar to checkbox selection handling in listview. Hope the **Course** class is model class, in that add a another property named **isSelected** as boolean and set the default value to **false**. Please refer below the course class,\r\n\r\n**Course Class**\r\n\r\n    public class Course {\r\n    private boolean isSelected = false;\r\n    \r\n    public boolean isSelected() {\r\n            return isSelected;\r\n        }\r\n    \r\n        public void setSelected(boolean selected) {\r\n            isSelected = selected;\r\n        }\r\n    \r\n    }\r\n\r\nplease refer the below code changes in the adapter class.\r\n\r\n        public class CourseListAdapter extends ArrayAdapter&lt;Course&gt; {\r\n          private static final String TAG = &quot;CourseListAdapter&quot;;\r\n        \r\n          private Context context;\r\n          int mResource;\r\n        \r\n          public CourseListAdapter(@NonNull Context context, int resource, @NonNull ArrayList&lt;Course&gt; objects) {\r\n            super(context, resource, objects);\r\n            this.context = context;\r\n            mResource = resource;\r\n            }\r\n        \r\n            @NonNull\r\n            @Override\r\n            public View getView(int position, @Nullable View convertView, @NonNull ViewGroup parent) {\r\n            // get info\r\n            String course_code = getItem(position).getCourseCode();\r\n            Double course_grade = getItem(position).getCurrentGrade();\r\n        \r\n            // make inflater and inflate the layout\r\n            LayoutInflater inflater = LayoutInflater.from(context);\r\n            View v = inflater.inflate(mResource, parent, false);\r\n        \r\n        \r\n            TextView tv_course_code = v.findViewById(R.id.course_adapter_course_code);\r\n            TextView tv_course_title = v.findViewById(R.id.course_adapter_course_title);\r\n        \r\n        //My Change\r\n          // expand the view to include a new fragment\r\n                LinearLayout assess_list_layout = view.findViewById(R.id.assess_list_layout);\r\n        \r\n        // get the list view and add each course to the course view\r\n                ListView assessment_list_view = (ListView) view.findViewById(R.id.course_adapter_assess_list);\r\n        \r\n        assess_list_layout.setVisibility(View.GONE);\r\n        \r\n        if (getItem().get(position).isSelected()) {\r\n        assess_list_layout.setVisibility(View.Visible);\r\n        AssessmentListAdapter assessAdapter = new AssessmentListAdapter(getContext(), R.layout.assessment_adapter_view, getItem(position).getAssessmentList(), getItem(position));\r\n                assessment_list_view.setAdapter(assessAdapter);\r\n        }\r\n    //My Change\r\n        \r\n            tv_course_code.setText(course_code);\r\n            tv_course_title.setText(String.valueOf(course_grade));\r\n        \r\n            // add on click to each list view element\r\n            LinearLayout layout = v.findViewById(R.id.course_adapter_layout);\r\n            layout.setOnClickListener(new View.OnClickListener() {\r\n              @Override\r\n              public void onClick(View view) {\r\n                Log.i(TAG, &quot;List view element has been clicked &quot; + course_code);\r\n        \r\n               //My Change\r\n                getItem().get(position).setSelected(true);          \r\n                //My Change\r\n                assess_list_layout.setVisibility(View.VISIBLE);\r\n    \r\n                \r\n                AssessmentListAdapter assessAdapter = new AssessmentListAdapter(getContext(), R.layout.assessment_adapter_view, getItem(position).getAssessmentList(), getItem(position));\r\n                assessment_list_view.setAdapter(assessAdapter);\r\n              }\r\n            });\r\n        \r\n            return v;\r\n          }\r\n        }\r\n\r\n\r\nI have commented as **My Change** to find the difference in the code. \r\n\r\n\r\n","title":"How to recover view from View.gone. setVisibility(View.VISIBLE) not working after using &#39;android:visibility=&quot;gone&quot;&#39; in xml","body":"<p><strong>1.View Visibility not working</strong></p>\n<p>The Visibility is not working because the view is not rendered initially. Remove the visibility gone in the xml and handle the visibility fully in the adapter class. In the 'assess_list_layout' linerlayout height can be  hardcode because inside this layout the listview height is already hardcoded. You can hardcode to 300 and check. This way will help the view to get the initial rendering.</p>\n<p><strong>2. Scroll issue</strong></p>\n<p>While scrolling the already visible 'assess_list_layout' view might be not visible. This is because we need to handle the visibility, this handling is similar to checkbox selection handling in listview. Hope the <strong>Course</strong> class is model class, in that add a another property named <strong>isSelected</strong> as boolean and set the default value to <strong>false</strong>. Please refer below the course class,</p>\n<p><strong>Course Class</strong></p>\n<pre><code>public class Course {\nprivate boolean isSelected = false;\n\npublic boolean isSelected() {\n        return isSelected;\n    }\n\n    public void setSelected(boolean selected) {\n        isSelected = selected;\n    }\n\n}\n</code></pre>\n<p>please refer the below code changes in the adapter class.</p>\n<pre><code>    public class CourseListAdapter extends ArrayAdapter&lt;Course&gt; {\n      private static final String TAG = &quot;CourseListAdapter&quot;;\n    \n      private Context context;\n      int mResource;\n    \n      public CourseListAdapter(@NonNull Context context, int resource, @NonNull ArrayList&lt;Course&gt; objects) {\n        super(context, resource, objects);\n        this.context = context;\n        mResource = resource;\n        }\n    \n        @NonNull\n        @Override\n        public View getView(int position, @Nullable View convertView, @NonNull ViewGroup parent) {\n        // get info\n        String course_code = getItem(position).getCourseCode();\n        Double course_grade = getItem(position).getCurrentGrade();\n    \n        // make inflater and inflate the layout\n        LayoutInflater inflater = LayoutInflater.from(context);\n        View v = inflater.inflate(mResource, parent, false);\n    \n    \n        TextView tv_course_code = v.findViewById(R.id.course_adapter_course_code);\n        TextView tv_course_title = v.findViewById(R.id.course_adapter_course_title);\n    \n    //My Change\n      // expand the view to include a new fragment\n            LinearLayout assess_list_layout = view.findViewById(R.id.assess_list_layout);\n    \n    // get the list view and add each course to the course view\n            ListView assessment_list_view = (ListView) view.findViewById(R.id.course_adapter_assess_list);\n    \n    assess_list_layout.setVisibility(View.GONE);\n    \n    if (getItem().get(position).isSelected()) {\n    assess_list_layout.setVisibility(View.Visible);\n    AssessmentListAdapter assessAdapter = new AssessmentListAdapter(getContext(), R.layout.assessment_adapter_view, getItem(position).getAssessmentList(), getItem(position));\n            assessment_list_view.setAdapter(assessAdapter);\n    }\n//My Change\n    \n        tv_course_code.setText(course_code);\n        tv_course_title.setText(String.valueOf(course_grade));\n    \n        // add on click to each list view element\n        LinearLayout layout = v.findViewById(R.id.course_adapter_layout);\n        layout.setOnClickListener(new View.OnClickListener() {\n          @Override\n          public void onClick(View view) {\n            Log.i(TAG, &quot;List view element has been clicked &quot; + course_code);\n    \n           //My Change\n            getItem().get(position).setSelected(true);          \n            //My Change\n            assess_list_layout.setVisibility(View.VISIBLE);\n\n            \n            AssessmentListAdapter assessAdapter = new AssessmentListAdapter(getContext(), R.layout.assessment_adapter_view, getItem(position).getAssessmentList(), getItem(position));\n            assessment_list_view.setAdapter(assessAdapter);\n          }\n        });\n    \n        return v;\n      }\n    }\n</code></pre>\n<p>I have commented as <strong>My Change</strong> to find the difference in the code.</p>\n"},{"tags":[],"owner":{"account_id":12717894,"reputation":1,"user_id":9239302,"display_name":"RilkeZhu"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1635846596,"creation_date":1635845814,"answer_id":69808194,"question_id":69716781,"body_markdown":"**issue 1**\r\n~~~ java\r\n// make inflater and inflate the layout\r\n   LayoutInflater inflater = LayoutInflater.from(context);\r\n   View v = inflater.inflate(mResource, parent, false);\r\n~~~\r\nyou don&#39;t reuse view，which leads to inflate a new view every time when called getView()；As inflate() method is IO sensitive，it slow down the smoothness of scrolling ，trigger jank。\r\n\r\ntry this \r\n\r\n~~~java\r\n// make inflater and inflate the layout\r\n        View v = null;\r\n        if (convertView == null) {\r\n            LayoutInflater inflater = LayoutInflater.from(context);\r\n            v= inflater.inflate(mResource, parent, false);\r\n        } else {\r\n            v = convertView;\r\n        }\r\n~~~\r\n**issue 2**\r\n\r\nwhen scorll listview ,you need reset itemview state,add a  &quot;expand&quot; property to your **Course** bean ,when click item set **expand = true**;and then  add flowing code above layout.setOnClickListener\r\n~~~java\r\nv.findViewById(R.id.assess_list_layout).setVisibility( item.expand ? View.VISIBLE:View.GONE);\r\nListView assessment_list_view = (ListView) v.findViewById(R.id.course_adapter_assess_list);\r\nif (item.expand) {\r\n    AssessmentListAdapter assessAdapter = new  AssessmentListAdapter(getContext(), R.layout.assessment_adapter_view, \r\n   item.getAssessmentList(), item);\r\n   assessment_list_view.setAdapter(assessAdapter);\r\n}\r\n~~~\r\n\r\n**issue 3**\r\n\r\nset setOnClickListener in **getView()** method , will create a new Clicker instance every time getView() called. use **listView.setOnItemClickListener()** instead  \r\n\r\n**tips:**\r\n\r\nafter all，you should use RecyclerView instead of ListView，which is a powerful UI widget  \r\n","title":"How to recover view from View.gone. setVisibility(View.VISIBLE) not working after using &#39;android:visibility=&quot;gone&quot;&#39; in xml","body":"<p><strong>issue 1</strong></p>\n<pre class=\"lang-java prettyprint-override\"><code>// make inflater and inflate the layout\n   LayoutInflater inflater = LayoutInflater.from(context);\n   View v = inflater.inflate(mResource, parent, false);\n</code></pre>\n<p>you don't reuse view，which leads to inflate a new view every time when called getView()；As inflate() method is IO sensitive，it slow down the smoothness of scrolling ，trigger jank。</p>\n<p>try this</p>\n<pre class=\"lang-java prettyprint-override\"><code>// make inflater and inflate the layout\n        View v = null;\n        if (convertView == null) {\n            LayoutInflater inflater = LayoutInflater.from(context);\n            v= inflater.inflate(mResource, parent, false);\n        } else {\n            v = convertView;\n        }\n</code></pre>\n<p><strong>issue 2</strong></p>\n<p>when scorll listview ,you need reset itemview state,add a  &quot;expand&quot; property to your <strong>Course</strong> bean ,when click item set <strong>expand = true</strong>;and then  add flowing code above layout.setOnClickListener</p>\n<pre class=\"lang-java prettyprint-override\"><code>v.findViewById(R.id.assess_list_layout).setVisibility( item.expand ? View.VISIBLE:View.GONE);\nListView assessment_list_view = (ListView) v.findViewById(R.id.course_adapter_assess_list);\nif (item.expand) {\n    AssessmentListAdapter assessAdapter = new  AssessmentListAdapter(getContext(), R.layout.assessment_adapter_view, \n   item.getAssessmentList(), item);\n   assessment_list_view.setAdapter(assessAdapter);\n}\n</code></pre>\n<p><strong>issue 3</strong></p>\n<p>set setOnClickListener in <strong>getView()</strong> method , will create a new Clicker instance every time getView() called. use <strong>listView.setOnItemClickListener()</strong> instead</p>\n<p><strong>tips:</strong></p>\n<p>after all，you should use RecyclerView instead of ListView，which is a powerful UI widget</p>\n"}],"owner":{"account_id":9862108,"reputation":134,"user_id":7304712,"accept_rate":60,"display_name":"Seth Harlaar"},"comment_count":13,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2836,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":69804690,"answer_count":2,"score":1,"last_activity_date":1692094501,"creation_date":1635215132,"question_id":69716781,"body_markdown":"My issue:\r\nIn my xml file, I define android:visibility=&quot;gone&quot; in the linear layout labelled as assess_layout_list. Then, in the onClick() of course_adapter_layout, the whole view, I set the visibility back to View.VISIBLE, which does not work, even though the Log call just before it works, the LinearLayout object called assess_list_layout is not null, and it does work when I define the visibility=&quot;invisible&quot; in the xml file. I want it to be gone at first though, and visible after clicking as this fits the design of the app. \r\n\r\n\r\nHere is my course_adapter_view.xml file:\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\r\n    &lt;LinearLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\r\n        xmlns:app=&quot;http://schemas.android.com/apk/res-auto&quot;\r\n        android:id=&quot;@+id/course_adapter_layout&quot;\r\n        android:layout_width=&quot;match_parent&quot;\r\n        android:layout_height=&quot;wrap_content&quot;\r\n        android:orientation=&quot;vertical&quot;\r\n        android:gravity=&quot;left&quot;\r\n        &gt;\r\n    \r\n        &lt;LinearLayout\r\n            android:orientation=&quot;horizontal&quot;\r\n            android:layout_width=&quot;match_parent&quot;\r\n            android:layout_height=&quot;wrap_content&quot;\r\n            android:layout_marginHorizontal=&quot;20dp&quot;\r\n            android:layout_marginTop=&quot;20dp&quot;\r\n            android:padding=&quot;15dp&quot;\r\n            android:elevation=&quot;2dp&quot;\r\n            android:background=&quot;@drawable/course_header_background&quot;&gt;\r\n    \r\n            &lt;ImageView\r\n                android:layout_width=&quot;20dp&quot;\r\n                android:layout_height=&quot;20dp&quot;\r\n                android:src=&quot;@drawable/course_color_circle&quot;/&gt;\r\n    \r\n            &lt;Space\r\n                android:layout_width=&quot;0dp&quot;\r\n                android:layout_height=&quot;match_parent&quot;\r\n                android:layout_weight=&quot;0.25&quot;/&gt;\r\n    \r\n            &lt;TextView\r\n                android:id=&quot;@+id/course_adapter_course_code&quot;\r\n                android:text=&quot;TextView1&quot;\r\n                android:layout_width=&quot;wrap_content&quot;\r\n                android:layout_height=&quot;20dp&quot;\r\n                android:layout_weight=&quot;0.5&quot;/&gt;\r\n    \r\n            &lt;Space\r\n                android:layout_width=&quot;0dp&quot;\r\n                android:layout_height=&quot;match_parent&quot;\r\n                android:layout_weight=&quot;0.25&quot;/&gt;\r\n    \r\n    \r\n            &lt;TextView\r\n                android:id=&quot;@+id/course_adapter_course_title&quot;\r\n                android:text=&quot;TextView2&quot;\r\n                android:layout_width=&quot;wrap_content&quot;\r\n                android:layout_height=&quot;20dp&quot;/&gt;\r\n    \r\n        &lt;/LinearLayout&gt;\r\n    \r\n        &lt;LinearLayout\r\n            android:id=&quot;@+id/assess_list_layout&quot;\r\n            android:layout_width=&quot;match_parent&quot;\r\n            android:layout_height=&quot;wrap_content&quot;\r\n            android:orientation=&quot;vertical&quot;\r\n            android:layout_marginRight=&quot;40dp&quot;\r\n            android:layout_marginLeft=&quot;40dp&quot;\r\n            android:background=&quot;@drawable/course_body_background&quot;\r\n            android:padding=&quot;20dp&quot;\r\n            android:visibility=&quot;gone&quot;\r\n            &gt;\r\n    \r\n    \r\n            &lt;ListView\r\n                android:id=&quot;@+id/course_adapter_assess_list&quot;\r\n                android:layout_width=&quot;match_parent&quot;\r\n                android:layout_height=&quot;250dp&quot;\r\n                android:layout_marginBottom=&quot;10dp&quot;/&gt;\r\n            &lt;LinearLayout\r\n                android:layout_width=&quot;match_parent&quot;\r\n                android:layout_height=&quot;wrap_content&quot;\r\n                android:orientation=&quot;horizontal&quot;&gt;\r\n    \r\n                &lt;Button\r\n                    android:layout_width=&quot;wrap_content&quot;\r\n                    android:layout_height=&quot;wrap_content&quot;\r\n                    android:layout_gravity=&quot;left&quot;\r\n                    android:text=&quot;More&quot; /&gt;\r\n    \r\n                &lt;Space\r\n                    android:layout_width=&quot;wrap_content&quot;\r\n                    android:layout_height=&quot;wrap_content&quot;\r\n                    android:layout_weight=&quot;1&quot;/&gt;\r\n                &lt;Button\r\n                    android:layout_width=&quot;wrap_content&quot;\r\n                    android:layout_height=&quot;wrap_content&quot;\r\n                    android:layout_gravity=&quot;left&quot;\r\n                    android:text=&quot;New&quot;/&gt;\r\n    \r\n            &lt;/LinearLayout&gt;\r\n    \r\n    \r\n        &lt;/LinearLayout&gt;\r\n    \r\n    \r\n    &lt;/LinearLayout&gt;\r\n\r\nHere is my CourseListAdapter.java file that I use to create each view for each course in the list of courses, minus the usual stuff:\r\n\r\n    package com.example.schoolplanner2.adapters;\r\n    \r\n    \r\n    public class CourseListAdapter extends ArrayAdapter&lt;Course&gt; {\r\n      private static final String TAG = &quot;CourseListAdapter&quot;;\r\n    \r\n      private Context context;\r\n      int mResource;\r\n    \r\n      public CourseListAdapter(@NonNull Context context, int resource, @NonNull ArrayList&lt;Course&gt; objects) {\r\n        super(context, resource, objects);\r\n        this.context = context;\r\n        mResource = resource;\r\n        }\r\n\r\n        @NonNull\r\n        @Override\r\n        public View getView(int position, @Nullable View convertView, @NonNull ViewGroup parent) {\r\n        // get info\r\n        String course_code = getItem(position).getCourseCode();\r\n        Double course_grade = getItem(position).getCurrentGrade();\r\n    \r\n        // make inflater and inflate the layout\r\n        LayoutInflater inflater = LayoutInflater.from(context);\r\n        View v = inflater.inflate(mResource, parent, false);\r\n    \r\n    \r\n        TextView tv_course_code = v.findViewById(R.id.course_adapter_course_code);\r\n        TextView tv_course_title = v.findViewById(R.id.course_adapter_course_title);\r\n    \r\n        tv_course_code.setText(course_code);\r\n        tv_course_title.setText(String.valueOf(course_grade));\r\n    \r\n        // add on click to each list view element\r\n        LinearLayout layout = v.findViewById(R.id.course_adapter_layout);\r\n        layout.setOnClickListener(new View.OnClickListener() {\r\n          @Override\r\n          public void onClick(View view) {\r\n            Log.i(TAG, &quot;List view element has been clicked &quot; + course_code);\r\n    \r\n           \r\n            // expand the view to include a new fragment\r\n            LinearLayout assess_list_layout = view.findViewById(R.id.assess_list_layout);\r\n            assess_list_layout.setVisibility(View.VISIBLE);\r\n    \r\n            // get the list view and add each course to the course view\r\n            ListView assessment_list_view = (ListView) view.findViewById(R.id.course_adapter_assess_list);\r\n            AssessmentListAdapter assessAdapter = new AssessmentListAdapter(getContext(), R.layout.assessment_adapter_view, getItem(position).getAssessmentList(), getItem(position));\r\n            assessment_list_view.setAdapter(assessAdapter);\r\n          }\r\n        });\r\n    \r\n        return v;\r\n      }\r\n    }\r\n\r\n\r\n\r\nPlease let me know if there is any more information you need. Will also take suggestions on other ways of accomplishing the same thing. Thanks for your help.\r\n~Seth.\r\n\r\nEdit: when the assess_list_layout.setVisibility(View.VISIBLE) is outside of the onClick it does work.\r\n\r\nFurther Edit: Things I have tried so far to no avail:\r\n- moving the location of where I define the LinearLayout componenent\r\n- calling invalidate() on parent view\r\n- using runOnUiThread()\r\n- changing view to v in the line where I attempt to findViewById for assess_list_layout, they are the same thing so it does not help.\r\n- calling requestLayout() on assess_list_layout\r\n\r\n\r\nUpdate: I have now managed to get the assess_list_layout section to appear when the course_adapter_layout is clicked on. The only problem now is that the view does not take up anymore space on the screen, it just turns into a scrollable view that can be scrolled up and down on to see the whole view.\r\nAlso, when I scroll to fast, it resets the view back to the way it was on bootup.","title":"How to recover view from View.gone. setVisibility(View.VISIBLE) not working after using &#39;android:visibility=&quot;gone&quot;&#39; in xml","body":"<p>My issue:\nIn my xml file, I define android:visibility=&quot;gone&quot; in the linear layout labelled as assess_layout_list. Then, in the onClick() of course_adapter_layout, the whole view, I set the visibility back to View.VISIBLE, which does not work, even though the Log call just before it works, the LinearLayout object called assess_list_layout is not null, and it does work when I define the visibility=&quot;invisible&quot; in the xml file. I want it to be gone at first though, and visible after clicking as this fits the design of the app.</p>\n<p>Here is my course_adapter_view.xml file:</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\n&lt;LinearLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\n    xmlns:app=&quot;http://schemas.android.com/apk/res-auto&quot;\n    android:id=&quot;@+id/course_adapter_layout&quot;\n    android:layout_width=&quot;match_parent&quot;\n    android:layout_height=&quot;wrap_content&quot;\n    android:orientation=&quot;vertical&quot;\n    android:gravity=&quot;left&quot;\n    &gt;\n\n    &lt;LinearLayout\n        android:orientation=&quot;horizontal&quot;\n        android:layout_width=&quot;match_parent&quot;\n        android:layout_height=&quot;wrap_content&quot;\n        android:layout_marginHorizontal=&quot;20dp&quot;\n        android:layout_marginTop=&quot;20dp&quot;\n        android:padding=&quot;15dp&quot;\n        android:elevation=&quot;2dp&quot;\n        android:background=&quot;@drawable/course_header_background&quot;&gt;\n\n        &lt;ImageView\n            android:layout_width=&quot;20dp&quot;\n            android:layout_height=&quot;20dp&quot;\n            android:src=&quot;@drawable/course_color_circle&quot;/&gt;\n\n        &lt;Space\n            android:layout_width=&quot;0dp&quot;\n            android:layout_height=&quot;match_parent&quot;\n            android:layout_weight=&quot;0.25&quot;/&gt;\n\n        &lt;TextView\n            android:id=&quot;@+id/course_adapter_course_code&quot;\n            android:text=&quot;TextView1&quot;\n            android:layout_width=&quot;wrap_content&quot;\n            android:layout_height=&quot;20dp&quot;\n            android:layout_weight=&quot;0.5&quot;/&gt;\n\n        &lt;Space\n            android:layout_width=&quot;0dp&quot;\n            android:layout_height=&quot;match_parent&quot;\n            android:layout_weight=&quot;0.25&quot;/&gt;\n\n\n        &lt;TextView\n            android:id=&quot;@+id/course_adapter_course_title&quot;\n            android:text=&quot;TextView2&quot;\n            android:layout_width=&quot;wrap_content&quot;\n            android:layout_height=&quot;20dp&quot;/&gt;\n\n    &lt;/LinearLayout&gt;\n\n    &lt;LinearLayout\n        android:id=&quot;@+id/assess_list_layout&quot;\n        android:layout_width=&quot;match_parent&quot;\n        android:layout_height=&quot;wrap_content&quot;\n        android:orientation=&quot;vertical&quot;\n        android:layout_marginRight=&quot;40dp&quot;\n        android:layout_marginLeft=&quot;40dp&quot;\n        android:background=&quot;@drawable/course_body_background&quot;\n        android:padding=&quot;20dp&quot;\n        android:visibility=&quot;gone&quot;\n        &gt;\n\n\n        &lt;ListView\n            android:id=&quot;@+id/course_adapter_assess_list&quot;\n            android:layout_width=&quot;match_parent&quot;\n            android:layout_height=&quot;250dp&quot;\n            android:layout_marginBottom=&quot;10dp&quot;/&gt;\n        &lt;LinearLayout\n            android:layout_width=&quot;match_parent&quot;\n            android:layout_height=&quot;wrap_content&quot;\n            android:orientation=&quot;horizontal&quot;&gt;\n\n            &lt;Button\n                android:layout_width=&quot;wrap_content&quot;\n                android:layout_height=&quot;wrap_content&quot;\n                android:layout_gravity=&quot;left&quot;\n                android:text=&quot;More&quot; /&gt;\n\n            &lt;Space\n                android:layout_width=&quot;wrap_content&quot;\n                android:layout_height=&quot;wrap_content&quot;\n                android:layout_weight=&quot;1&quot;/&gt;\n            &lt;Button\n                android:layout_width=&quot;wrap_content&quot;\n                android:layout_height=&quot;wrap_content&quot;\n                android:layout_gravity=&quot;left&quot;\n                android:text=&quot;New&quot;/&gt;\n\n        &lt;/LinearLayout&gt;\n\n\n    &lt;/LinearLayout&gt;\n\n\n&lt;/LinearLayout&gt;\n</code></pre>\n<p>Here is my CourseListAdapter.java file that I use to create each view for each course in the list of courses, minus the usual stuff:</p>\n<pre><code>package com.example.schoolplanner2.adapters;\n\n\npublic class CourseListAdapter extends ArrayAdapter&lt;Course&gt; {\n  private static final String TAG = &quot;CourseListAdapter&quot;;\n\n  private Context context;\n  int mResource;\n\n  public CourseListAdapter(@NonNull Context context, int resource, @NonNull ArrayList&lt;Course&gt; objects) {\n    super(context, resource, objects);\n    this.context = context;\n    mResource = resource;\n    }\n\n    @NonNull\n    @Override\n    public View getView(int position, @Nullable View convertView, @NonNull ViewGroup parent) {\n    // get info\n    String course_code = getItem(position).getCourseCode();\n    Double course_grade = getItem(position).getCurrentGrade();\n\n    // make inflater and inflate the layout\n    LayoutInflater inflater = LayoutInflater.from(context);\n    View v = inflater.inflate(mResource, parent, false);\n\n\n    TextView tv_course_code = v.findViewById(R.id.course_adapter_course_code);\n    TextView tv_course_title = v.findViewById(R.id.course_adapter_course_title);\n\n    tv_course_code.setText(course_code);\n    tv_course_title.setText(String.valueOf(course_grade));\n\n    // add on click to each list view element\n    LinearLayout layout = v.findViewById(R.id.course_adapter_layout);\n    layout.setOnClickListener(new View.OnClickListener() {\n      @Override\n      public void onClick(View view) {\n        Log.i(TAG, &quot;List view element has been clicked &quot; + course_code);\n\n       \n        // expand the view to include a new fragment\n        LinearLayout assess_list_layout = view.findViewById(R.id.assess_list_layout);\n        assess_list_layout.setVisibility(View.VISIBLE);\n\n        // get the list view and add each course to the course view\n        ListView assessment_list_view = (ListView) view.findViewById(R.id.course_adapter_assess_list);\n        AssessmentListAdapter assessAdapter = new AssessmentListAdapter(getContext(), R.layout.assessment_adapter_view, getItem(position).getAssessmentList(), getItem(position));\n        assessment_list_view.setAdapter(assessAdapter);\n      }\n    });\n\n    return v;\n  }\n}\n</code></pre>\n<p>Please let me know if there is any more information you need. Will also take suggestions on other ways of accomplishing the same thing. Thanks for your help.\n~Seth.</p>\n<p>Edit: when the assess_list_layout.setVisibility(View.VISIBLE) is outside of the onClick it does work.</p>\n<p>Further Edit: Things I have tried so far to no avail:</p>\n<ul>\n<li>moving the location of where I define the LinearLayout componenent</li>\n<li>calling invalidate() on parent view</li>\n<li>using runOnUiThread()</li>\n<li>changing view to v in the line where I attempt to findViewById for assess_list_layout, they are the same thing so it does not help.</li>\n<li>calling requestLayout() on assess_list_layout</li>\n</ul>\n<p>Update: I have now managed to get the assess_list_layout section to appear when the course_adapter_layout is clicked on. The only problem now is that the view does not take up anymore space on the screen, it just turns into a scrollable view that can be scrolled up and down on to see the whole view.\nAlso, when I scroll to fast, it resets the view back to the way it was on bootup.</p>\n"},{"tags":["java","spring-webflux","reactive-programming","project-reactor"],"answers":[{"tags":[],"owner":{"account_id":3168631,"reputation":3561,"user_id":2678097,"display_name":"amanin"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1692094327,"creation_date":1692094327,"answer_id":76905064,"question_id":76894228,"body_markdown":"Your use-case is a *reduction* operation with twist: you only want to consume input stream partially. In such case, I think the simple and sane (for publisher lifecycle) solution is to use [scanWith](https://projectreactor.io/docs/core/release/api/reactor/core/publisher/Flux.html#scanWith-java.util.function.Supplier-java.util.function.BiFunction-) operator:\r\n\r\n1. As with reduction, it allow to aggregate/accumulate flow elements one by one\r\n2. But, contrary to reduction, it returns a flux of intermediate state for  each accumulated element.\r\n\r\nCombined with `takeUntil` + `last()`, it should provide what you need:\r\n\r\n```java\r\npublic Mono&lt;Map&lt;String, T&gt;&gt; extractParameters(Flux&lt;Map&lt;String, T&gt;&gt; flux, List&lt;String&gt; queryParams) {\r\n       return flux\r\n           .scanWith(HashMap::new, \r\n                     result, g -&gt; {\r\n                         result.putAll(subset(g, queryParams));\r\n                         return result;\r\n                     })\r\n           .takeUntil(result -&gt; result.keySet().containsAll(queryParams))\r\n           .last();\r\n}\r\n```","title":"Creating a Mono from certain elements of a Flux","body":"<p>Your use-case is a <em>reduction</em> operation with twist: you only want to consume input stream partially. In such case, I think the simple and sane (for publisher lifecycle) solution is to use <a href=\"https://projectreactor.io/docs/core/release/api/reactor/core/publisher/Flux.html#scanWith-java.util.function.Supplier-java.util.function.BiFunction-\" rel=\"nofollow noreferrer\">scanWith</a> operator:</p>\n<ol>\n<li>As with reduction, it allow to aggregate/accumulate flow elements one by one</li>\n<li>But, contrary to reduction, it returns a flux of intermediate state for  each accumulated element.</li>\n</ol>\n<p>Combined with <code>takeUntil</code> + <code>last()</code>, it should provide what you need:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public Mono&lt;Map&lt;String, T&gt;&gt; extractParameters(Flux&lt;Map&lt;String, T&gt;&gt; flux, List&lt;String&gt; queryParams) {\n       return flux\n           .scanWith(HashMap::new, \n                     result, g -&gt; {\n                         result.putAll(subset(g, queryParams));\n                         return result;\n                     })\n           .takeUntil(result -&gt; result.keySet().containsAll(queryParams))\n           .last();\n}\n</code></pre>\n"}],"owner":{"account_id":17356580,"reputation":107,"user_id":12573817,"display_name":"Siri"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":111,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1692094327,"creation_date":1691943379,"question_id":76894228,"body_markdown":"I am trying to create a Mono from elements of a Flux. This mono will need to contain a certain number of elements.\r\n\r\nI found a solution, which is use the Mono.create method, the takeUntil and onCancel method of flux.\r\n\r\n    private &lt;T&gt; void create(MonoSink&lt;Map&lt;String, Optional&lt;T&gt;&gt;&gt; monoSink,\r\n                                Flux&lt;Map&lt;String, Optional&lt;T&gt;&gt;&gt; flux,\r\n                                List&lt;String&gt; queryParams) {\r\n            Map&lt;String, Optional&lt;T&gt;&gt; result = new HashMap&lt;&gt;();\r\n            flux\r\n                    .doOnNext(g -&gt; result.putAll(subset(g, queryParams)))\r\n                    .doOnCancel(() -&gt; monoSink.success(result))\r\n                    .takeUntil(f -&gt; result.keySet().containsAll(queryParams))\r\n                    .subscribe();\r\n        }\r\n\r\nThen I call it in :\r\n\r\n    Mono.create(monoSink -&gt; create(monoSink, flux, params))\r\n\r\nThe flux is shared so it doesn&#39;t really get cancelled when we call the takeUntil.\r\n\r\nIs it a bad practice?\r\n\r\nthank you\r\n\r\n","title":"Creating a Mono from certain elements of a Flux","body":"<p>I am trying to create a Mono from elements of a Flux. This mono will need to contain a certain number of elements.</p>\n<p>I found a solution, which is use the Mono.create method, the takeUntil and onCancel method of flux.</p>\n<pre><code>private &lt;T&gt; void create(MonoSink&lt;Map&lt;String, Optional&lt;T&gt;&gt;&gt; monoSink,\n                            Flux&lt;Map&lt;String, Optional&lt;T&gt;&gt;&gt; flux,\n                            List&lt;String&gt; queryParams) {\n        Map&lt;String, Optional&lt;T&gt;&gt; result = new HashMap&lt;&gt;();\n        flux\n                .doOnNext(g -&gt; result.putAll(subset(g, queryParams)))\n                .doOnCancel(() -&gt; monoSink.success(result))\n                .takeUntil(f -&gt; result.keySet().containsAll(queryParams))\n                .subscribe();\n    }\n</code></pre>\n<p>Then I call it in :</p>\n<pre><code>Mono.create(monoSink -&gt; create(monoSink, flux, params))\n</code></pre>\n<p>The flux is shared so it doesn't really get cancelled when we call the takeUntil.</p>\n<p>Is it a bad practice?</p>\n<p>thank you</p>\n"},{"tags":["java","spring","mongodb","testcontainers","mockmvc"],"comments":[{"owner":{"account_id":24440940,"reputation":3132,"user_id":18364656,"display_name":"Andrei Lisa"},"score":0,"creation_date":1692100430,"post_id":76904950,"comment_id":135576227,"body_markdown":"Did you try to make an mock respose ?","body":"Did you try to make an mock respose ?"},{"owner":{"account_id":19712484,"reputation":23,"user_id":14432678,"display_name":"joeyisplaying"},"score":0,"creation_date":1692109317,"post_id":76904950,"comment_id":135578010,"body_markdown":"Yes but as it is an integration test I don&#39;t want to make the MongoTemplate object a mock object (or a MockBean).","body":"Yes but as it is an integration test I don&#39;t want to make the MongoTemplate object a mock object (or a MockBean)."},{"owner":{"account_id":24440940,"reputation":3132,"user_id":18364656,"display_name":"Andrei Lisa"},"score":0,"creation_date":1692109802,"post_id":76904950,"comment_id":135578125,"body_markdown":"i think the goal of this test-case is to check if  throwing exception is `ServiceUnavailable`.  and it`s ok to mock this one.","body":"i think the goal of this test-case is to check if  throwing exception is <code>ServiceUnavailable</code>.  and it`s ok to mock this one."},{"owner":{"account_id":19712484,"reputation":23,"user_id":14432678,"display_name":"joeyisplaying"},"score":0,"creation_date":1692110588,"post_id":76904950,"comment_id":135578303,"body_markdown":"I see. Would you say that unit tests would adequately cover this scenario? I thought I would assert that nothing persisted to Mongo after the 503 was returned to cover all bases. Would you say that is unnecessary?","body":"I see. Would you say that unit tests would adequately cover this scenario? I thought I would assert that nothing persisted to Mongo after the 503 was returned to cover all bases. Would you say that is unnecessary?"},{"owner":{"account_id":24440940,"reputation":3132,"user_id":18364656,"display_name":"Andrei Lisa"},"score":1,"creation_date":1692111413,"post_id":76904950,"comment_id":135578475,"body_markdown":"Yes, an unit test in this scenario will be enough, yest, it`s unnecessary, because when a time out is throwing it mean that something went wrong while  access a DB it show that nothing was persisted.","body":"Yes, an unit test in this scenario will be enough, yest, it`s unnecessary, because when a time out is throwing it mean that something went wrong while  access a DB it show that nothing was persisted."},{"owner":{"account_id":2537085,"reputation":6205,"user_id":2203890,"display_name":"Edd&#250; Mel&#233;ndez"},"score":1,"creation_date":1692289913,"post_id":76904950,"comment_id":135606315,"body_markdown":"Hi, you can simulate networking failures using Toxiproxy module. This blogpost can help you https://www.atomicjar.com/2023/03/developing-resilient-applications-with-toxiproxy-and-testcontainers/","body":"Hi, you can simulate networking failures using Toxiproxy module. This blogpost can help you <a href=\"https://www.atomicjar.com/2023/03/developing-resilient-applications-with-toxiproxy-and-testcontainers/\" rel=\"nofollow noreferrer\">atomicjar.com/2023/03/&hellip;</a>"}],"owner":{"account_id":19712484,"reputation":23,"user_id":14432678,"display_name":"joeyisplaying"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":61,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1692094270,"creation_date":1692093278,"question_id":76904950,"body_markdown":"I&#39;m trying to write tests that cover MongoDB being unavailable. In my code, to handle this event, I catch a `DataAccessException` and throw my own custom `ServiceUnavailableException` returning a 503 response code.\r\n\r\nUsing Testcontainers and MongoDBContainer / MongoTemplate, how do I avoid the 30-second timeout, when I stop the MongoDBContainer, to simulate Mongo being unavailable?\r\n\r\nCurrently, the 30-second timeout makes the test impractical to run. I want to be able to immediately throw a `DataAccessException` and assert a 503 response.\r\n\r\nMy test looks like this:\r\n```java\r\n    @Test\r\n    void savingDocumentToDbReturns503() throws Exception {\r\n        mongoDBContainer.stop();\r\n    \r\n        mockMvc.perform(post(&quot;/endpoint&quot;)\r\n                        .contentType(MediaType.APPLICATION_JSON)\r\n                        .content(objectMapper.writeValueAsString(request)))\r\n                .andExpect(MockMvcResultMatchers.status().isServiceUnavailable());\r\n        \r\n        mongoDBContainer.start();\r\n    }\r\n```","title":"How do I immediately throw a DataAccessException when testing a 5xx response using MongoTemplate and Testcontainers without waiting for the timeout?","body":"<p>I'm trying to write tests that cover MongoDB being unavailable. In my code, to handle this event, I catch a <code>DataAccessException</code> and throw my own custom <code>ServiceUnavailableException</code> returning a 503 response code.</p>\n<p>Using Testcontainers and MongoDBContainer / MongoTemplate, how do I avoid the 30-second timeout, when I stop the MongoDBContainer, to simulate Mongo being unavailable?</p>\n<p>Currently, the 30-second timeout makes the test impractical to run. I want to be able to immediately throw a <code>DataAccessException</code> and assert a 503 response.</p>\n<p>My test looks like this:</p>\n<pre class=\"lang-java prettyprint-override\"><code>    @Test\n    void savingDocumentToDbReturns503() throws Exception {\n        mongoDBContainer.stop();\n    \n        mockMvc.perform(post(&quot;/endpoint&quot;)\n                        .contentType(MediaType.APPLICATION_JSON)\n                        .content(objectMapper.writeValueAsString(request)))\n                .andExpect(MockMvcResultMatchers.status().isServiceUnavailable());\n        \n        mongoDBContainer.start();\n    }\n</code></pre>\n"},{"tags":["java","kotlin","maven","intellij-idea","scalatest"],"answers":[{"comments":[{"owner":{"account_id":6153144,"reputation":2226,"user_id":4796992,"accept_rate":100,"display_name":"SWiggels"},"score":0,"creation_date":1692105788,"post_id":76904953,"comment_id":135577249,"body_markdown":"Thank you for your answer but I may have not been precise enough.","body":"Thank you for your answer but I may have not been precise enough."}],"tags":[],"owner":{"account_id":3925658,"reputation":5569,"user_id":3246362,"display_name":"Sam"},"comment_count":1,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1692093288,"creation_date":1692093288,"answer_id":76904953,"question_id":76904890,"body_markdown":"Have a look here:  \r\nFile - Settings - Build, Execution, Deployment - Build Tools - Maven - User settings file\r\n\r\nCompare that with the result from\r\n\r\n    mvn -X | find &quot;settings&quot;\r\n\r\nwhere you can see what settings file you are using when running mvn from your command line.","title":"How to force IntelliJ to use pom.xml settings","body":"<p>Have a look here:<br />\nFile - Settings - Build, Execution, Deployment - Build Tools - Maven - User settings file</p>\n<p>Compare that with the result from</p>\n<pre><code>mvn -X | find &quot;settings&quot;\n</code></pre>\n<p>where you can see what settings file you are using when running mvn from your command line.</p>\n"},{"comments":[{"owner":{"account_id":6153144,"reputation":2226,"user_id":4796992,"accept_rate":100,"display_name":"SWiggels"},"score":1,"creation_date":1692100703,"post_id":76905022,"comment_id":135576280,"body_markdown":"Your second point was helpful. It seems that I cannot downgrade Kotlin because of the JPS Kotlin Plugin, which itself is depending on a certain IntelliJ version. This means I cannot run Kotlin 1.3 in IntelliJ 2023.2.","body":"Your second point was helpful. It seems that I cannot downgrade Kotlin because of the JPS Kotlin Plugin, which itself is depending on a certain IntelliJ version. This means I cannot run Kotlin 1.3 in IntelliJ 2023.2."},{"owner":{"account_id":6153144,"reputation":2226,"user_id":4796992,"accept_rate":100,"display_name":"SWiggels"},"score":1,"creation_date":1692105898,"post_id":76905022,"comment_id":135577273,"body_markdown":"Since this isn&#39;t exactly the solution but it pointed me to it I accept it as the correct answer.","body":"Since this isn&#39;t exactly the solution but it pointed me to it I accept it as the correct answer."},{"owner":{"account_id":2712514,"reputation":10118,"user_id":2340612,"accept_rate":83,"display_name":"user2340612"},"score":0,"creation_date":1692115548,"post_id":76905022,"comment_id":135579299,"body_markdown":"if you install the [Jetbrains Toolbox app](https://www.jetbrains.com/toolbox-app/), you should be able to install older version of IntelliJ and hence compile Kotlin 1.3. Alternatively, you&#39;ll find older IntelliJ versions [here](https://www.jetbrains.com/idea/download/other.html)","body":"if you install the <a href=\"https://www.jetbrains.com/toolbox-app/\" rel=\"nofollow noreferrer\">Jetbrains Toolbox app</a>, you should be able to install older version of IntelliJ and hence compile Kotlin 1.3. Alternatively, you&#39;ll find older IntelliJ versions <a href=\"https://www.jetbrains.com/idea/download/other.html\" rel=\"nofollow noreferrer\">here</a>"},{"owner":{"account_id":6153144,"reputation":2226,"user_id":4796992,"accept_rate":100,"display_name":"SWiggels"},"score":1,"creation_date":1692116743,"post_id":76905022,"comment_id":135579559,"body_markdown":"This is exactly what I did. The toolbox only the last 3 major versions. For a 2017 version you have to, as described in the link, download it manually.","body":"This is exactly what I did. The toolbox only the last 3 major versions. For a 2017 version you have to, as described in the link, download it manually."}],"tags":[],"owner":{"account_id":2712514,"reputation":10118,"user_id":2340612,"accept_rate":83,"display_name":"user2340612"},"comment_count":4,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1692093906,"creation_date":1692093906,"answer_id":76905022,"question_id":76904890,"body_markdown":"In addition to what @Sam said, you might also want to check [this page][1] in the documentation, in particular:\r\n\r\n&gt; By default, IntelliJ IDEA uses the native IntelliJ IDEA builder to build a Maven project\r\n\r\nSo I think it&#39;s just the built-in compiler that complains about the old version of Kotlin. I think you have 2 options to overcome this issue: \r\n\r\n1. Let IntelliJ delegate the build to Maven (as described in the link above)\r\n2. Configure the built-in Kotlin compiler to use an older version of the language. This can be done by changing the settings as described [here][2] (under `Settings -&gt; Build, Execution, Deployment -&gt; Compiler -&gt; Kotlin Compiler`). Depending on the version of IntelliJ + the Kotlin plugin, you might or might not be able to solve the issue this way.\r\n\r\n[1]: https://www.jetbrains.com/help/idea/delegate-build-and-run-actions-to-maven.html#delegate_to_maven\r\n[2]: https://www.jetbrains.com/help/idea/compiler-kotlin-compiler.html#kotlin-compiler-common-settings","title":"How to force IntelliJ to use pom.xml settings","body":"<p>In addition to what @Sam said, you might also want to check <a href=\"https://www.jetbrains.com/help/idea/delegate-build-and-run-actions-to-maven.html#delegate_to_maven\" rel=\"nofollow noreferrer\">this page</a> in the documentation, in particular:</p>\n<blockquote>\n<p>By default, IntelliJ IDEA uses the native IntelliJ IDEA builder to build a Maven project</p>\n</blockquote>\n<p>So I think it's just the built-in compiler that complains about the old version of Kotlin. I think you have 2 options to overcome this issue:</p>\n<ol>\n<li>Let IntelliJ delegate the build to Maven (as described in the link above)</li>\n<li>Configure the built-in Kotlin compiler to use an older version of the language. This can be done by changing the settings as described <a href=\"https://www.jetbrains.com/help/idea/compiler-kotlin-compiler.html#kotlin-compiler-common-settings\" rel=\"nofollow noreferrer\">here</a> (under <code>Settings -&gt; Build, Execution, Deployment -&gt; Compiler -&gt; Kotlin Compiler</code>). Depending on the version of IntelliJ + the Kotlin plugin, you might or might not be able to solve the issue this way.</li>\n</ol>\n"}],"owner":{"account_id":6153144,"reputation":2226,"user_id":4796992,"accept_rate":100,"display_name":"SWiggels"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":66,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":76905022,"answer_count":2,"score":1,"last_activity_date":1692094058,"creation_date":1692092819,"question_id":76904890,"body_markdown":"I&#39;m using IntelliJ IDEA 2023.2 with Apache Maven 3.9.4. \r\nWorking on a Java project with some Scala and Kotlin in it. The project is old. Hence the Kotlin version is 1.3.\r\n\r\nWhen running `mvn -f integration-test/pom.xml test-compile scalatest:test` in the terminal everything works fine. But when I try to run the test within IntelliJ like:\r\n[![Run scala test][1]][1]\r\n\r\nIt will show up an error complaining that Kotlin **1.2** is no more supported. \r\n\r\n`Kotlin: API version 1.2 is no longer supported; please, use version 1.3 or greater.`\r\n\r\nI get that, I would like to upgrade Kotlin but it is out of my scope. It&#39;s far down in the backlog. But I need a solution in the meantime.\r\n\r\nThe Kotlin dependency I use:\r\n\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;org.jetbrains.kotlin&lt;/groupId&gt;\r\n                &lt;artifactId&gt;kotlin-osgi-bundle&lt;/artifactId&gt;\r\n                &lt;version&gt;1.3&lt;/version&gt;\r\n                &lt;exclusions&gt;\r\n                    &lt;exclusion&gt;\r\n                        &lt;groupId&gt;org.jetbrains.kotlin&lt;/groupId&gt;\r\n                        &lt;artifactId&gt;*&lt;/artifactId&gt;\r\n                    &lt;/exclusion&gt;\r\n                &lt;/exclusions&gt;\r\n            &lt;/dependency&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;org.jetbrains.kotlin&lt;/groupId&gt;\r\n                &lt;artifactId&gt;kotlin-stdlib-jdk8&lt;/artifactId&gt;\r\n                &lt;version&gt;1.3&lt;/version&gt;\r\n            &lt;/dependency&gt;\r\n\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/L9uZX.png\r\n\r\n**What I try to achieve in the end?**\r\nI want to be able to run a single test so I can debug the code and figure out whats wrong with the test.\r\n\r\n**Concludes to: How can I force IntelliJ to just run the mvn project settings**\r\n\r\n\r\n","title":"How to force IntelliJ to use pom.xml settings","body":"<p>I'm using IntelliJ IDEA 2023.2 with Apache Maven 3.9.4.\nWorking on a Java project with some Scala and Kotlin in it. The project is old. Hence the Kotlin version is 1.3.</p>\n<p>When running <code>mvn -f integration-test/pom.xml test-compile scalatest:test</code> in the terminal everything works fine. But when I try to run the test within IntelliJ like:\n<a href=\"https://i.stack.imgur.com/L9uZX.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/L9uZX.png\" alt=\"Run scala test\" /></a></p>\n<p>It will show up an error complaining that Kotlin <strong>1.2</strong> is no more supported.</p>\n<p><code>Kotlin: API version 1.2 is no longer supported; please, use version 1.3 or greater.</code></p>\n<p>I get that, I would like to upgrade Kotlin but it is out of my scope. It's far down in the backlog. But I need a solution in the meantime.</p>\n<p>The Kotlin dependency I use:</p>\n<pre><code>        &lt;dependency&gt;\n            &lt;groupId&gt;org.jetbrains.kotlin&lt;/groupId&gt;\n            &lt;artifactId&gt;kotlin-osgi-bundle&lt;/artifactId&gt;\n            &lt;version&gt;1.3&lt;/version&gt;\n            &lt;exclusions&gt;\n                &lt;exclusion&gt;\n                    &lt;groupId&gt;org.jetbrains.kotlin&lt;/groupId&gt;\n                    &lt;artifactId&gt;*&lt;/artifactId&gt;\n                &lt;/exclusion&gt;\n            &lt;/exclusions&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.jetbrains.kotlin&lt;/groupId&gt;\n            &lt;artifactId&gt;kotlin-stdlib-jdk8&lt;/artifactId&gt;\n            &lt;version&gt;1.3&lt;/version&gt;\n        &lt;/dependency&gt;\n</code></pre>\n<p><strong>What I try to achieve in the end?</strong>\nI want to be able to run a single test so I can debug the code and figure out whats wrong with the test.</p>\n<p><strong>Concludes to: How can I force IntelliJ to just run the mvn project settings</strong></p>\n"},{"tags":["java","spring","git","maven","spring-mvc"],"comments":[{"owner":{"account_id":322516,"reputation":121953,"user_id":641955,"accept_rate":72,"display_name":"janos"},"score":0,"creation_date":1386661759,"post_id":20488768,"comment_id":30622501,"body_markdown":"Looks like a temporary network problem. Try again later. When you try again, you might need to add the `-U` flag to force Maven to really re-try to download.","body":"Looks like a temporary network problem. Try again later. When you try again, you might need to add the <code>-U</code> flag to force Maven to really re-try to download."}],"answers":[{"tags":[],"owner":{"account_id":24563249,"reputation":1,"user_id":18470704,"display_name":"tritran693"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1647335914,"creation_date":1647335914,"answer_id":71479689,"question_id":20488768,"body_markdown":"Well, I have encountered this problem and solved it by the flowing step:\r\n1. Delete .m2 folder in C:/User/UserName\r\n2. Go to the project and Update maven.\r\n\r\nI think the problem was caused by the conflict of some maven library of other maven project.\r\n","title":"Spring maven dependency issue","body":"<p>Well, I have encountered this problem and solved it by the flowing step:</p>\n<ol>\n<li>Delete .m2 folder in C:/User/UserName</li>\n<li>Go to the project and Update maven.</li>\n</ol>\n<p>I think the problem was caused by the conflict of some maven library of other maven project.</p>\n"}],"owner":{"account_id":3120461,"reputation":1581,"user_id":2640327,"accept_rate":73,"display_name":"Thanh Duy Ngo"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":10330,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":1,"score":2,"last_activity_date":1692093885,"creation_date":1386661505,"question_id":20488768,"body_markdown":"I have a problem that my pom.xml throw an error\r\n\r\nArtifactTransferException:\r\n\r\n&gt; Failure to transfer org.springframework:spring-tx:jar:3.2.4.RELEASE\r\n&gt; from http://  repo.maven.apache.org/maven2 was cached in the local\r\n&gt; repository, resolution will not be reattempted until the update\r\n&gt; interval   of central has elapsed or updates are forced. Original\r\n&gt; error: Could not transfer artifact org.springframework:spring-tx:jar:\r\n&gt;  3.2.4.RELEASE from/to central (http://repo.maven.apache.org/maven2): No response received after 60000\r\n\r\nThis is my pom.xml\r\n\r\n\r\n    &lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n\txsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd&quot;&gt;\r\n\t&lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n\t&lt;groupId&gt;spring-mvc-demo&lt;/groupId&gt;\r\n\t&lt;artifactId&gt;spring-mvc-tiles&lt;/artifactId&gt;\r\n\t&lt;packaging&gt;war&lt;/packaging&gt;\r\n\t&lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\r\n\t&lt;name&gt;spring-mvc-tiles Maven Webapp&lt;/name&gt;\r\n\t&lt;url&gt;http://maven.apache.org&lt;/url&gt;\r\n\t&lt;properties&gt;\r\n\t\t&lt;org.maven.compiler.version&gt;3.1&lt;/org.maven.compiler.version&gt;\r\n\t\t&lt;org.springframework.version&gt;3.2.4.RELEASE&lt;/org.springframework.version&gt;\r\n\t\t&lt;jre.version&gt;1.7&lt;/jre.version&gt;\r\n\t\t&lt;jstl.version&gt;1.2&lt;/jstl.version&gt;\r\n\t\t&lt;org.apache.tiles.version&gt;2.2.2&lt;/org.apache.tiles.version&gt;\r\n\t\t&lt;org.slf4j.version&gt;1.7.5&lt;/org.slf4j.version&gt;\r\n\t\t&lt;org.hibernate.version&gt;4.2.7.Final&lt;/org.hibernate.version&gt;\r\n\t\t&lt;mysql.version&gt;5.1.27&lt;/mysql.version&gt;\r\n\t&lt;/properties&gt;\r\n\r\n\t&lt;dependencies&gt;\r\n\r\n\t\t&lt;!-- MySQL connector --&gt;\r\n\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;mysql&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;mysql-connector-java&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;${mysql.version}&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;commons-dbcp&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;commons-dbcp&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;1.4&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\n\t\t&lt;!-- Servlet --&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;javax.inject&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;javax.inject&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;1&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;javax.servlet&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;servlet-api&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;2.5&lt;/version&gt;\r\n\t\t\t&lt;scope&gt;provided&lt;/scope&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;javax.servlet.jsp&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;jsp-api&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;2.1&lt;/version&gt;\r\n\t\t\t&lt;scope&gt;provided&lt;/scope&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;javax.servlet.jsp&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;javax.servlet.jsp-api&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;2.2.1&lt;/version&gt;\r\n\t\t\t&lt;scope&gt;provided&lt;/scope&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;javax.servlet.jsp.jstl&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;jstl-api&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;1.2&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;javax.validation&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;validation-api&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;1.1.0.Final&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\n\t\t&lt;!-- Hibernate --&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.hibernate&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;hibernate-core&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;${org.hibernate.version}&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.hibernate&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;hibernate-validator&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;5.0.1.Final&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\n\t\t&lt;!-- Spring framework --&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-context&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;${org.springframework.version}&lt;/version&gt;\r\n\t\t\t&lt;exclusions&gt;\r\n\t\t\t\t&lt;!-- Exclude Commons Logging in favor of SLF4j --&gt;\r\n\t\t\t\t&lt;exclusion&gt;\r\n\t\t\t\t\t&lt;groupId&gt;commons-logging&lt;/groupId&gt;\r\n\t\t\t\t\t&lt;artifactId&gt;commons-logging&lt;/artifactId&gt;\r\n\t\t\t\t&lt;/exclusion&gt;\r\n\t\t\t&lt;/exclusions&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-core&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;${org.springframework.version}&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-webmvc&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;${org.springframework.version}&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-web&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;${org.springframework.version}&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-tx&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;${org.springframework.version}&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-orm&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;${org.springframework.version}&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\n\r\n\r\n\t\t&lt;!-- Log --&gt;\r\n\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.slf4j&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;jcl-over-slf4j&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;${org.slf4j.version}&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.slf4j&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;slf4j-api&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;${org.slf4j.version}&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\n\t\t&lt;!-- JSTL --&gt;\r\n\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;javax.servlet&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;jstl&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;${jstl.version}&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\n\t\t&lt;!-- Apache Tiles --&gt;\r\n\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.apache.tiles&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;tiles-jsp&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;${org.apache.tiles.version}&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.apache.tiles&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;tiles-extras&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;${org.apache.tiles.version}&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.apache.tiles&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;tiles-servlet&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;${org.apache.tiles.version}&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\n\t&lt;/dependencies&gt;\r\n\t&lt;build&gt;\r\n\t\t&lt;finalName&gt;spring-mvc-tiles&lt;/finalName&gt;\r\n\t&lt;/build&gt;\r\n&lt;/project&gt;\r\n","title":"Spring maven dependency issue","body":"<p>I have a problem that my pom.xml throw an error</p>\n\n<p>ArtifactTransferException:</p>\n\n<blockquote>\n  <p>Failure to transfer org.springframework:spring-tx:jar:3.2.4.RELEASE\n  from http://  repo.maven.apache.org/maven2 was cached in the local\n  repository, resolution will not be reattempted until the update\n  interval   of central has elapsed or updates are forced. Original\n  error: Could not transfer artifact org.springframework:spring-tx:jar:\n   3.2.4.RELEASE from/to central (<a href=\"http://repo.maven.apache.org/maven2\" rel=\"nofollow\">http://repo.maven.apache.org/maven2</a>): No response received after 60000</p>\n</blockquote>\n\n<p>This is my pom.xml</p>\n\n<pre><code>&lt;project xmlns=\"http://maven.apache.org/POM/4.0.0\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\nxsi:schemaLocation=\"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd\"&gt;\n&lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n&lt;groupId&gt;spring-mvc-demo&lt;/groupId&gt;\n&lt;artifactId&gt;spring-mvc-tiles&lt;/artifactId&gt;\n&lt;packaging&gt;war&lt;/packaging&gt;\n&lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\n&lt;name&gt;spring-mvc-tiles Maven Webapp&lt;/name&gt;\n&lt;url&gt;http://maven.apache.org&lt;/url&gt;\n&lt;properties&gt;\n    &lt;org.maven.compiler.version&gt;3.1&lt;/org.maven.compiler.version&gt;\n    &lt;org.springframework.version&gt;3.2.4.RELEASE&lt;/org.springframework.version&gt;\n    &lt;jre.version&gt;1.7&lt;/jre.version&gt;\n    &lt;jstl.version&gt;1.2&lt;/jstl.version&gt;\n    &lt;org.apache.tiles.version&gt;2.2.2&lt;/org.apache.tiles.version&gt;\n    &lt;org.slf4j.version&gt;1.7.5&lt;/org.slf4j.version&gt;\n    &lt;org.hibernate.version&gt;4.2.7.Final&lt;/org.hibernate.version&gt;\n    &lt;mysql.version&gt;5.1.27&lt;/mysql.version&gt;\n&lt;/properties&gt;\n\n&lt;dependencies&gt;\n\n    &lt;!-- MySQL connector --&gt;\n\n    &lt;dependency&gt;\n        &lt;groupId&gt;mysql&lt;/groupId&gt;\n        &lt;artifactId&gt;mysql-connector-java&lt;/artifactId&gt;\n        &lt;version&gt;${mysql.version}&lt;/version&gt;\n    &lt;/dependency&gt;\n\n    &lt;dependency&gt;\n        &lt;groupId&gt;commons-dbcp&lt;/groupId&gt;\n        &lt;artifactId&gt;commons-dbcp&lt;/artifactId&gt;\n        &lt;version&gt;1.4&lt;/version&gt;\n    &lt;/dependency&gt;\n\n    &lt;!-- Servlet --&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;javax.inject&lt;/groupId&gt;\n        &lt;artifactId&gt;javax.inject&lt;/artifactId&gt;\n        &lt;version&gt;1&lt;/version&gt;\n    &lt;/dependency&gt;\n\n    &lt;dependency&gt;\n        &lt;groupId&gt;javax.servlet&lt;/groupId&gt;\n        &lt;artifactId&gt;servlet-api&lt;/artifactId&gt;\n        &lt;version&gt;2.5&lt;/version&gt;\n        &lt;scope&gt;provided&lt;/scope&gt;\n    &lt;/dependency&gt;\n\n    &lt;dependency&gt;\n        &lt;groupId&gt;javax.servlet.jsp&lt;/groupId&gt;\n        &lt;artifactId&gt;jsp-api&lt;/artifactId&gt;\n        &lt;version&gt;2.1&lt;/version&gt;\n        &lt;scope&gt;provided&lt;/scope&gt;\n    &lt;/dependency&gt;\n\n    &lt;dependency&gt;\n        &lt;groupId&gt;javax.servlet.jsp&lt;/groupId&gt;\n        &lt;artifactId&gt;javax.servlet.jsp-api&lt;/artifactId&gt;\n        &lt;version&gt;2.2.1&lt;/version&gt;\n        &lt;scope&gt;provided&lt;/scope&gt;\n    &lt;/dependency&gt;\n\n    &lt;dependency&gt;\n        &lt;groupId&gt;javax.servlet.jsp.jstl&lt;/groupId&gt;\n        &lt;artifactId&gt;jstl-api&lt;/artifactId&gt;\n        &lt;version&gt;1.2&lt;/version&gt;\n    &lt;/dependency&gt;\n\n    &lt;dependency&gt;\n        &lt;groupId&gt;javax.validation&lt;/groupId&gt;\n        &lt;artifactId&gt;validation-api&lt;/artifactId&gt;\n        &lt;version&gt;1.1.0.Final&lt;/version&gt;\n    &lt;/dependency&gt;\n\n    &lt;!-- Hibernate --&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.hibernate&lt;/groupId&gt;\n        &lt;artifactId&gt;hibernate-core&lt;/artifactId&gt;\n        &lt;version&gt;${org.hibernate.version}&lt;/version&gt;\n    &lt;/dependency&gt;\n\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.hibernate&lt;/groupId&gt;\n        &lt;artifactId&gt;hibernate-validator&lt;/artifactId&gt;\n        &lt;version&gt;5.0.1.Final&lt;/version&gt;\n    &lt;/dependency&gt;\n\n    &lt;!-- Spring framework --&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-context&lt;/artifactId&gt;\n        &lt;version&gt;${org.springframework.version}&lt;/version&gt;\n        &lt;exclusions&gt;\n            &lt;!-- Exclude Commons Logging in favor of SLF4j --&gt;\n            &lt;exclusion&gt;\n                &lt;groupId&gt;commons-logging&lt;/groupId&gt;\n                &lt;artifactId&gt;commons-logging&lt;/artifactId&gt;\n            &lt;/exclusion&gt;\n        &lt;/exclusions&gt;\n    &lt;/dependency&gt;\n\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-core&lt;/artifactId&gt;\n        &lt;version&gt;${org.springframework.version}&lt;/version&gt;\n    &lt;/dependency&gt;\n\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-webmvc&lt;/artifactId&gt;\n        &lt;version&gt;${org.springframework.version}&lt;/version&gt;\n    &lt;/dependency&gt;\n\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-web&lt;/artifactId&gt;\n        &lt;version&gt;${org.springframework.version}&lt;/version&gt;\n    &lt;/dependency&gt;\n\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-tx&lt;/artifactId&gt;\n        &lt;version&gt;${org.springframework.version}&lt;/version&gt;\n    &lt;/dependency&gt;\n\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-orm&lt;/artifactId&gt;\n        &lt;version&gt;${org.springframework.version}&lt;/version&gt;\n    &lt;/dependency&gt;\n\n\n\n    &lt;!-- Log --&gt;\n\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.slf4j&lt;/groupId&gt;\n        &lt;artifactId&gt;jcl-over-slf4j&lt;/artifactId&gt;\n        &lt;version&gt;${org.slf4j.version}&lt;/version&gt;\n    &lt;/dependency&gt;\n\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.slf4j&lt;/groupId&gt;\n        &lt;artifactId&gt;slf4j-api&lt;/artifactId&gt;\n        &lt;version&gt;${org.slf4j.version}&lt;/version&gt;\n    &lt;/dependency&gt;\n\n    &lt;!-- JSTL --&gt;\n\n    &lt;dependency&gt;\n        &lt;groupId&gt;javax.servlet&lt;/groupId&gt;\n        &lt;artifactId&gt;jstl&lt;/artifactId&gt;\n        &lt;version&gt;${jstl.version}&lt;/version&gt;\n    &lt;/dependency&gt;\n\n    &lt;!-- Apache Tiles --&gt;\n\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.apache.tiles&lt;/groupId&gt;\n        &lt;artifactId&gt;tiles-jsp&lt;/artifactId&gt;\n        &lt;version&gt;${org.apache.tiles.version}&lt;/version&gt;\n    &lt;/dependency&gt;\n\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.apache.tiles&lt;/groupId&gt;\n        &lt;artifactId&gt;tiles-extras&lt;/artifactId&gt;\n        &lt;version&gt;${org.apache.tiles.version}&lt;/version&gt;\n    &lt;/dependency&gt;\n\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.apache.tiles&lt;/groupId&gt;\n        &lt;artifactId&gt;tiles-servlet&lt;/artifactId&gt;\n        &lt;version&gt;${org.apache.tiles.version}&lt;/version&gt;\n    &lt;/dependency&gt;\n\n&lt;/dependencies&gt;\n&lt;build&gt;\n    &lt;finalName&gt;spring-mvc-tiles&lt;/finalName&gt;\n&lt;/build&gt;\n</code></pre>\n\n<p></p>\n"},{"tags":["java","android","android-camera-intent"],"comments":[{"owner":{"account_id":16768304,"reputation":8503,"user_id":12121419,"display_name":"blackapps"},"score":1,"creation_date":1692091122,"post_id":76904650,"comment_id":135574568,"body_markdown":"`createTemporaryWritableImageFile();` It is unclear what you are doing here. You should not create an empty file already. You only need a File instance that points to a non existing file. The file will then be created by the camera app if the user confirms.","body":"<code>createTemporaryWritableImageFile();</code> It is unclear what you are doing here. You should not create an empty file already. You only need a File instance that points to a non existing file. The file will then be created by the camera app if the user confirms."},{"owner":{"account_id":16768304,"reputation":8503,"user_id":12121419,"display_name":"blackapps"},"score":0,"creation_date":1692091187,"post_id":76904650,"comment_id":135574581,"body_markdown":"`Uri.fromFile(imageFile);` Uri.fromFile is not usable since Android 7. What are you programming for?","body":"<code>Uri.fromFile(imageFile);</code> Uri.fromFile is not usable since Android 7. What are you programming for?"},{"owner":{"account_id":16768304,"reputation":8503,"user_id":12121419,"display_name":"blackapps"},"score":0,"creation_date":1692091261,"post_id":76904650,"comment_id":135574597,"body_markdown":"`grantUriPermissions(intent, imageUri);` That does not make sense. You better add a WRITE flag.","body":"<code>grantUriPermissions(intent, imageUri);</code> That does not make sense. You better add a WRITE flag."},{"owner":{"account_id":16768304,"reputation":8503,"user_id":12121419,"display_name":"blackapps"},"score":0,"creation_date":1692091321,"post_id":76904650,"comment_id":135574611,"body_markdown":"`How to check if the image is captured in activity intent` You mean: How can i check if the camera app created and wrote a file?","body":"<code>How to check if the image is captured in activity intent</code> You mean: How can i check if the camera app created and wrote a file?"},{"owner":{"account_id":16768304,"reputation":8503,"user_id":12121419,"display_name":"blackapps"},"score":1,"creation_date":1692091428,"post_id":76904650,"comment_id":135574629,"body_markdown":"Further: In OnActivityResult you can check the result parameter which tells you if the picture is take/file created.","body":"Further: In OnActivityResult you can check the result parameter which tells you if the picture is take/file created."}],"answers":[{"tags":[],"owner":{"account_id":19634805,"reputation":311,"user_id":14372265,"display_name":"Yogesh Rewani"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1692091379,"creation_date":1692091379,"answer_id":76904738,"question_id":76904650,"body_markdown":"In this onActivityResult method, you can check the result code to determine whether the capture was successful\r\n\r\n    @Override\r\n    protected void onActivityResult(int requestCode, int resultCode, Intent data) {\r\n    super.onActivityResult(requestCode, resultCode, data);\r\n\r\n    if (requestCode == CAPTURE_IMAGE_REQUEST_ID) {\r\n        if (resultCode == RESULT_OK) {\r\n            // Image captured successfully\r\n            // You can now check if the image file exists at the specified path\r\n            File imageFile = new File(path);\r\n            if (imageFile.exists()) {\r\n                // Image file exists\r\n                // You can proceed with further actions\r\n            } else {\r\n                // Image file doesn&#39;t exist\r\n                // Handle this case as needed\r\n            }\r\n        } else if (resultCode == RESULT_CANCELED) {\r\n            // User canceled the capture\r\n            // Handle this case if needed\r\n        } else {\r\n            // Capture failed or was not successful\r\n            // Handle this case if needed\r\n        }\r\n    }\r\n   }\r\n\r\n","title":"How to check if the image is captured in activity intent in Android using Java","body":"<p>In this onActivityResult method, you can check the result code to determine whether the capture was successful</p>\n<pre><code>@Override\nprotected void onActivityResult(int requestCode, int resultCode, Intent data) {\nsuper.onActivityResult(requestCode, resultCode, data);\n\nif (requestCode == CAPTURE_IMAGE_REQUEST_ID) {\n    if (resultCode == RESULT_OK) {\n        // Image captured successfully\n        // You can now check if the image file exists at the specified path\n        File imageFile = new File(path);\n        if (imageFile.exists()) {\n            // Image file exists\n            // You can proceed with further actions\n        } else {\n            // Image file doesn't exist\n            // Handle this case as needed\n        }\n    } else if (resultCode == RESULT_CANCELED) {\n        // User canceled the capture\n        // Handle this case if needed\n    } else {\n        // Capture failed or was not successful\n        // Handle this case if needed\n    }\n}\n</code></pre>\n<p>}</p>\n"}],"owner":{"account_id":10146719,"reputation":5994,"user_id":9768260,"display_name":"ccd"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":38,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1692093661,"creation_date":1692090522,"question_id":76904650,"body_markdown":"I am coding an Android app using Java. I have a function to use an activity intent to capture a image file. I want how to programmatically check if the image file is captured or not.\r\n\r\nMy function:\r\n```\r\nprivate void launchTakeImageWithCameraIntent() {\r\n    Intent intent = new Intent(MediaStore.ACTION_IMAGE_CAPTURE);\r\n\r\n    File imageFile = createTemporaryWritableImageFile();\r\n    path = imageFile.getPath();\r\n\r\n    Uri imageUri = Uri.fromFile(imageFile);\r\n    intent.putExtra(MediaStore.EXTRA_OUTPUT, imageUri);\r\n    grantUriPermissions(intent, imageUri);\r\n\r\n    try {\r\n      activity.startActivityForResult(intent, CAPTURE_IMAGE_REQUEST_ID);  // &lt;-- how to check if the image file is captured or not?\r\n    } catch (ActivityNotFoundException e) {\r\n      try {\r\n        if (!imageFile.delete()) {\r\n          throw new RuntimeException(&quot;failed to delete image file.&quot;);\r\n        }\r\n      } catch (SecurityException exception) {\r\n        exception.printStackTrace();\r\n      }\r\n      result.error(\r\n          &quot;no_available_activity&quot;,\r\n          &quot;no camera available for taking picture.&quot;,\r\n          null\r\n      );\r\n    }\r\n}\r\n```\r\n\r\nAny help is appreciated.","title":"How to check if the image is captured in activity intent in Android using Java","body":"<p>I am coding an Android app using Java. I have a function to use an activity intent to capture a image file. I want how to programmatically check if the image file is captured or not.</p>\n<p>My function:</p>\n<pre><code>private void launchTakeImageWithCameraIntent() {\n    Intent intent = new Intent(MediaStore.ACTION_IMAGE_CAPTURE);\n\n    File imageFile = createTemporaryWritableImageFile();\n    path = imageFile.getPath();\n\n    Uri imageUri = Uri.fromFile(imageFile);\n    intent.putExtra(MediaStore.EXTRA_OUTPUT, imageUri);\n    grantUriPermissions(intent, imageUri);\n\n    try {\n      activity.startActivityForResult(intent, CAPTURE_IMAGE_REQUEST_ID);  // &lt;-- how to check if the image file is captured or not?\n    } catch (ActivityNotFoundException e) {\n      try {\n        if (!imageFile.delete()) {\n          throw new RuntimeException(&quot;failed to delete image file.&quot;);\n        }\n      } catch (SecurityException exception) {\n        exception.printStackTrace();\n      }\n      result.error(\n          &quot;no_available_activity&quot;,\n          &quot;no camera available for taking picture.&quot;,\n          null\n      );\n    }\n}\n</code></pre>\n<p>Any help is appreciated.</p>\n"},{"tags":["java","user-interface","vaadin","event-listener"],"answers":[{"tags":[],"owner":{"account_id":1481451,"reputation":65,"user_id":1390735,"display_name":"Giuseppe Manzo"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1638791432,"creation_date":1638791432,"answer_id":70245032,"question_id":70244723,"body_markdown":"Yes you chan use a single lister on the binder. I&#39;m in a similar situation and in order to avoid to declare a plethora of listeners, one for each binded field, I just registered on on the binder.\r\nThere are two events registrations availabel on the binder. One for any of binded field changed, and the other that triggers for a bunch of situation.\r\nHere the javadoc: https://vaadin.com/api/platform/21.0.8/com/vaadin/flow/data/binder/Binder.html","title":"Best way to implement addValueChangeListener for a complex Vaadin Component?","body":"<p>Yes you chan use a single lister on the binder. I'm in a similar situation and in order to avoid to declare a plethora of listeners, one for each binded field, I just registered on on the binder.\nThere are two events registrations availabel on the binder. One for any of binded field changed, and the other that triggers for a bunch of situation.\nHere the javadoc: <a href=\"https://vaadin.com/api/platform/21.0.8/com/vaadin/flow/data/binder/Binder.html\" rel=\"nofollow noreferrer\">https://vaadin.com/api/platform/21.0.8/com/vaadin/flow/data/binder/Binder.html</a></p>\n"},{"tags":[],"owner":{"account_id":2759852,"reputation":7920,"user_id":2376954,"display_name":"Leif &#197;strand"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1638792938,"creation_date":1638792938,"answer_id":70245357,"question_id":70244723,"body_markdown":"Rather than directly implementing the `HasValue` interface, I would recommend  one of the abstract classes that help you with all the nitty gritty details.\r\n\r\nIn your case, that might be either `AbstractCompositeField` if you want to have full control over the visual representation or `CustomField` if you Vaadin to handle things like an input label.","title":"Best way to implement addValueChangeListener for a complex Vaadin Component?","body":"<p>Rather than directly implementing the <code>HasValue</code> interface, I would recommend  one of the abstract classes that help you with all the nitty gritty details.</p>\n<p>In your case, that might be either <code>AbstractCompositeField</code> if you want to have full control over the visual representation or <code>CustomField</code> if you Vaadin to handle things like an input label.</p>\n"}],"owner":{"account_id":7753338,"reputation":1218,"user_id":5985343,"display_name":"jmizv"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1081,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":70245357,"answer_count":2,"score":0,"last_activity_date":1692093468,"creation_date":1638789852,"question_id":70244723,"body_markdown":"I have a rather complex Vaadin component with seven different inputs:\r\n\r\n```\r\npublic class MyComponent extends VerticalLayout\r\n    implements HasValue&lt;ValueChangeEvent&lt;MyPojo&gt;, MyPojo&gt; {\r\n\r\n  private final ComboBox&lt;String&gt; _objectId = new ComboBox&lt;&gt;();\r\n  private final TextField _accountId = new TextField();\r\n  private final TextField _personId = new TextField();\r\n  private final DatePicker _startDate = new DatePicker();\r\n  private final DatePicker _endDate = new DatePicker();\r\n  private final IntegerField _age = new IntegerField();\r\n  private final NumberField _amount = new NumberField();\r\n\r\n  private final Binder&lt;MyPojo&gt; _binder = new Binder&lt;&gt;();\r\n\r\n  // more implementation ...\r\n}\r\n```\r\n\r\nBecause of the implemented interface I also need to implement `Registration addValueChangeListener(ValueChangeListener&lt;? super ValueChangeEvent&lt;MyPojo&gt;&gt; listener)` What is the best way to implement this? Is there some automation or do I need to do this by hand, e.g. linking my basic input fields method `addValueChangeListener` to the complex  `ValueChangeListener&lt;? super ValueChangeEvent&lt;MyPojo&gt;&gt;`? Or could I somehow use the `_binder` for that?","title":"Best way to implement addValueChangeListener for a complex Vaadin Component?","body":"<p>I have a rather complex Vaadin component with seven different inputs:</p>\n<pre><code>public class MyComponent extends VerticalLayout\n    implements HasValue&lt;ValueChangeEvent&lt;MyPojo&gt;, MyPojo&gt; {\n\n  private final ComboBox&lt;String&gt; _objectId = new ComboBox&lt;&gt;();\n  private final TextField _accountId = new TextField();\n  private final TextField _personId = new TextField();\n  private final DatePicker _startDate = new DatePicker();\n  private final DatePicker _endDate = new DatePicker();\n  private final IntegerField _age = new IntegerField();\n  private final NumberField _amount = new NumberField();\n\n  private final Binder&lt;MyPojo&gt; _binder = new Binder&lt;&gt;();\n\n  // more implementation ...\n}\n</code></pre>\n<p>Because of the implemented interface I also need to implement <code>Registration addValueChangeListener(ValueChangeListener&lt;? super ValueChangeEvent&lt;MyPojo&gt;&gt; listener)</code> What is the best way to implement this? Is there some automation or do I need to do this by hand, e.g. linking my basic input fields method <code>addValueChangeListener</code> to the complex  <code>ValueChangeListener&lt;? super ValueChangeEvent&lt;MyPojo&gt;&gt;</code>? Or could I somehow use the <code>_binder</code> for that?</p>\n"},{"tags":["java","selenide"],"answers":[{"tags":[],"owner":{"account_id":26682848,"reputation":3568,"user_id":20292589,"display_name":"Yaroslavm"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1692093417,"creation_date":1692093417,"answer_id":76904967,"question_id":75831809,"body_markdown":"There can be 2 scenarios why are you getting this.\r\n\r\n`Element should be interactable` exception is thrown, when element actually exists in DOM, but can&#39;t be reached (invisible or overlapped by another element).\r\n\r\nIn your case:\r\n 1. After site load subscribe modal is appearing for me, so it can overlap.\r\n 2. You don&#39;t wait for input visibility (so setting value failed, because input is not appeared).\r\n\r\n```java\r\nSelenide.open(&quot;https://www.buletintv3.my/&quot;);\r\n// in case if you have modal, you should close it\r\n$(&quot;#ins-lead-collection-on-overlay [id*=close]&quot;).shouldBe(exist).click();\r\n$(&quot;#ins-lead-collection-on-overlay [id*=close]&quot;).shouldNotBe(visible);\r\n\r\nSelenideElement searchButton = $(&quot;[id*=next] #navbarNavDropdown button&quot;);\r\nSelenide.executeJavaScript(&quot;arguments[0].click()&quot;, searchButton);\r\nSelenideElement searchInput = $(&quot;#floating-search-bar input&quot;).shouldBe(visible);\r\nsearchInput.sendKeys(&quot;MB&quot;);\r\nsearchInput.pressEnter();\r\nsearchInput.shouldNotBe(visible);\r\n```","title":"Search Articles Button Not Interactable","body":"<p>There can be 2 scenarios why are you getting this.</p>\n<p><code>Element should be interactable</code> exception is thrown, when element actually exists in DOM, but can't be reached (invisible or overlapped by another element).</p>\n<p>In your case:</p>\n<ol>\n<li>After site load subscribe modal is appearing for me, so it can overlap.</li>\n<li>You don't wait for input visibility (so setting value failed, because input is not appeared).</li>\n</ol>\n<pre class=\"lang-java prettyprint-override\"><code>Selenide.open(&quot;https://www.buletintv3.my/&quot;);\n// in case if you have modal, you should close it\n$(&quot;#ins-lead-collection-on-overlay [id*=close]&quot;).shouldBe(exist).click();\n$(&quot;#ins-lead-collection-on-overlay [id*=close]&quot;).shouldNotBe(visible);\n\nSelenideElement searchButton = $(&quot;[id*=next] #navbarNavDropdown button&quot;);\nSelenide.executeJavaScript(&quot;arguments[0].click()&quot;, searchButton);\nSelenideElement searchInput = $(&quot;#floating-search-bar input&quot;).shouldBe(visible);\nsearchInput.sendKeys(&quot;MB&quot;);\nsearchInput.pressEnter();\nsearchInput.shouldNotBe(visible);\n</code></pre>\n"}],"owner":{"account_id":153568,"reputation":2613,"user_id":368907,"accept_rate":88,"display_name":"nicholas"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":35,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1692093417,"creation_date":1679649232,"question_id":75831809,"body_markdown":"I need to automation testing of a website https://www.buletintv3.my/. There is a search articles function. I&#39;m facing after clicing the search svg, there is no search box pop up/display. \r\n\r\nHere is the code:\r\n\r\n    @Test\r\n        public void testSearchArticles() {\r\n            extentTest = extentManager.getExtentReports().createTest(&quot;Search Articles Test&quot;);\r\n    \r\n            $x(&quot;//*[@id=\\&quot;__next\\&quot;]/div[3]/section[1]/div/nav/div[1]/button&quot;).click();\r\n            $x(&quot;//input[@class=&#39;form-control me-sm-2&#39;]&quot;).click();\r\n            $x(&quot;//input[@class=&#39;form-control me-sm-2&#39;]&quot;).setValue(&quot;bola&quot;);\r\n            $x(&quot;//input[@class=&#39;form-control me-sm-2&#39;]&quot;).pressEnter();\r\n        }\r\n\r\nError: \r\n&gt; Element should be interactable {By.xpath: //input[@class=&#39;form-control\r\n&gt; me-sm-2&#39;]} Element: &#39;&lt;input aria-label=&quot;Search&quot; class=&quot;form-control\r\n&gt; me-sm-2&quot; placeholder=&quot;Search&quot; type=&quot;search&quot; value\r\n&gt; displayed:false&gt;&lt;/input&gt;&#39; Actual value: hidden, opacity=1\r\n\r\n\r\n\r\nPlease let me know what wrong with the code or approach. Thanks. \r\n\r\n\r\n","title":"Search Articles Button Not Interactable","body":"<p>I need to automation testing of a website <a href=\"https://www.buletintv3.my/\" rel=\"nofollow noreferrer\">https://www.buletintv3.my/</a>. There is a search articles function. I'm facing after clicing the search svg, there is no search box pop up/display.</p>\n<p>Here is the code:</p>\n<pre><code>@Test\n    public void testSearchArticles() {\n        extentTest = extentManager.getExtentReports().createTest(&quot;Search Articles Test&quot;);\n\n        $x(&quot;//*[@id=\\&quot;__next\\&quot;]/div[3]/section[1]/div/nav/div[1]/button&quot;).click();\n        $x(&quot;//input[@class='form-control me-sm-2']&quot;).click();\n        $x(&quot;//input[@class='form-control me-sm-2']&quot;).setValue(&quot;bola&quot;);\n        $x(&quot;//input[@class='form-control me-sm-2']&quot;).pressEnter();\n    }\n</code></pre>\n<p>Error:</p>\n<blockquote>\n<p>Element should be interactable {By.xpath: //input[@class='form-control\nme-sm-2']} Element: '' Actual value: hidden, opacity=1</p>\n</blockquote>\n<p>Please let me know what wrong with the code or approach. Thanks.</p>\n"},{"tags":["java","mysql","jdbc","optimistic-locking"],"answers":[{"tags":[],"owner":{"account_id":9463219,"reputation":9357,"user_id":7036419,"display_name":"Maurice Perry"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1692093357,"creation_date":1692092883,"answer_id":76904903,"question_id":76904554,"body_markdown":"Your update statement will be executed without error even when the version is not the one expected. You need to check that the statement was correctly executed:\r\n\r\n      sql = &quot; UPDATE Product &quot;\r\n              + &quot; SET AvailableQuantity=?, version=? &quot;\r\n              + &quot; WHERE &quot;\r\n              + &quot; ID_product=? AND Blocked=0 AND Deleted=0 AND version=?&quot;;\r\n\r\n      try (PreparedStatement ps = conn.prepareStatement(sql)) {\r\n          int i=1;\r\n          ps.setInt(i++, product.getQuantity()-quantity);\r\n          ps.setLong(i++, product.getVersion()+1);\r\n          ps.setLong(i++, ID_product);\r\n          ps.setLong(i++, product.getVersion());\r\n\r\n          if (ps.executeUpdate() == 0) {\r\n              throw new OptimisticLockException(&quot;Exception lock optimistic quantity update&quot;);\r\n          }\r\n      }\r\n","title":"Why doesn&#39;t my optimistic lock implementation work with two competing requests?","body":"<p>Your update statement will be executed without error even when the version is not the one expected. You need to check that the statement was correctly executed:</p>\n<pre><code>  sql = &quot; UPDATE Product &quot;\n          + &quot; SET AvailableQuantity=?, version=? &quot;\n          + &quot; WHERE &quot;\n          + &quot; ID_product=? AND Blocked=0 AND Deleted=0 AND version=?&quot;;\n\n  try (PreparedStatement ps = conn.prepareStatement(sql)) {\n      int i=1;\n      ps.setInt(i++, product.getQuantity()-quantity);\n      ps.setLong(i++, product.getVersion()+1);\n      ps.setLong(i++, ID_product);\n      ps.setLong(i++, product.getVersion());\n\n      if (ps.executeUpdate() == 0) {\n          throw new OptimisticLockException(&quot;Exception lock optimistic quantity update&quot;);\n      }\n  }\n</code></pre>\n"}],"owner":{"account_id":29227842,"reputation":3,"user_id":22392150,"display_name":"Michael"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":51,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76904903,"answer_count":1,"score":0,"last_activity_date":1692093357,"creation_date":1692089427,"question_id":76904554,"body_markdown":"I&#39;m trying to implement an e-commerce website using java, MySQL database, and JDBC.\r\n\r\nI have some problem managing the concurrency with optimistic lock. In fact if the user &quot;A&quot; try to buy 3 items of a product and the user &quot;B&quot; try to buy 2 item of the same product at the same time (but the total available item of the product is 4) i have unpredictable results.\r\nIn fact I tried it and there were left 2 available items, the version of the column was incremented by 1 correctly but both users made a payment and complete a order (there wasn&#39;t a rollback for one of the two transaction).\r\n\r\nSeems that the request of user B overwrite the request of user A because they both check the version before one of them increase it. So when they arrive to the commit point the last one will overwrite the results of the other.\r\n\r\nOf course I&#39;m doing wrong something and maybe i even misunderstood the concept of optimistic lock, can you please help me?\r\n\r\n\r\n\r\n\r\nThis is the controller:\r\n\r\n```\r\n String applicationMessage = null;\r\n        DAOFactory sessionDAOFactory = null;\r\n        DAOFactory daoFactory = null;\r\n        User loggedUser;\r\n\r\n\r\n        Logger logger = LogService.getApplicationLogger();\r\n\r\n        try {\r\n\r\n            Map sessionFactoryParameters = new HashMap&lt;String, Object&gt;();\r\n            sessionFactoryParameters.put(&quot;request&quot;, request);\r\n            sessionFactoryParameters.put(&quot;response&quot;, response);\r\n            sessionDAOFactory = DAOFactory.getDAOFactory(Configuration.COOKIE_IMPL, sessionFactoryParameters);\r\n            sessionDAOFactory.beginTransaction();\r\n\r\n            UserDAO sessionUserDAO = sessionDAOFactory.getUserDAO();\r\n            loggedUser = sessionUserDAO.findLoggedUser();\r\n\r\n            daoFactory = DAOFactory.getDAOFactory(Configuration.DAO_IMPL, null);\r\n            daoFactory.beginTransaction();\r\n\r\n            Double CardNumber = Double.parseDouble(request.getParameter(&quot;CardNumber&quot;));\r\n            int CVV = Integer.parseInt(request.getParameter(&quot;cvv&quot;));\r\n            String Name = request.getParameter(&quot;name&quot;);\r\n            String ExpireDate = request.getParameter(&quot;expireDate&quot;);\r\n\r\n\r\n\r\n            /* I find the pending order linked with logged user*/\r\n            OrderDAO orderDAO = daoFactory.getOrderDAO();\r\n            Order order = orderDAO.findByLoggedUserAndPendingStatus(loggedUser);\r\n\r\n            //I find the cart\r\n            CartDAO cartDAO = daoFactory.getCartDAO();\r\n            Cart cart = cartDAO.findCartByOrder(order);\r\n\r\n            //Take all the cart item inside the cart\r\n            CartItemDAO cartItemDAO = daoFactory.getCartItemDAO();\r\n            List&lt;CartItem&gt; cartItems = cartItemDAO.getCartItems(cart);\r\n\r\n\r\n\r\n            //I create the payment\r\n            PaymentDAO paymentDAO = daoFactory.getPaymentDAO();\r\n            paymentDAO.create(cart.getPrice_cart(), order, CardNumber, CVV, Name, Expire);\r\n\r\n            //Set complete flag to the order\r\n            orderDAO.setCompleteStatus(order);\r\n\r\n            //Decrease the quantity of the product\r\n            for (CartItem cartItem : cartItems) {\r\n                ProductDAO productDAO = daoFactory.getProductDAO();\r\n\r\n                productDAO.checkAndDecreaseQuantity(cartItem.getProduct().getId_product(), cartItem.getQuantity());\r\n\r\n            }\r\n\r\n            daoFactory.commitTransaction();\r\n            sessionDAOFactory.commitTransaction();\r\n\r\n            applicationMessage = &quot;Payment received, order executed successfully&quot;;\r\n\r\n            request.setAttribute(&quot;loggedOn&quot;, loggedUser != null);\r\n            request.setAttribute(&quot;loggedUser&quot;, loggedUser);\r\n            request.setAttribute(&quot;applicationMessage&quot;, applicationMessage);\r\n            request.setAttribute(&quot;viewUrl&quot;, &quot;jsp/homeManagement/Home&quot;);\r\n\r\n        } catch (OptimisticLockException e) {\r\n            logger.log(Level.SEVERE, &quot;Controller Error&quot;, e);\r\n            try {\r\n                if (daoFactory != null) daoFactory.rollbackTransaction();\r\n                if (sessionDAOFactory != null) sessionDAOFactory.rollbackTransaction();\r\n\r\n            } catch (Throwable t) {\r\n            }\r\n            throw new RuntimeException(e);\r\n\r\n        } catch (NotAvailableProductException e) {\r\n            logger.log(Level.INFO, &quot;Controller Error&quot;, e);\r\n            try {\r\n                if (daoFactory != null) daoFactory.rollbackTransaction();\r\n                if (sessionDAOFactory != null) sessionDAOFactory.rollbackTransaction();\r\n            } catch (Throwable t) {\r\n            }\r\n            throw new RuntimeException(e);\r\n\r\n\r\n        } catch (Exception e) {\r\n            logger.log(Level.SEVERE, &quot;Controller Error&quot;, e);\r\n            try {\r\n                if (daoFactory != null) daoFactory.rollbackTransaction();\r\n                if (sessionDAOFactory != null) sessionDAOFactory.rollbackTransaction();\r\n\r\n            } catch (Throwable t) {\r\n            }\r\n            throw new RuntimeException(e);\r\n\r\n\r\n        } finally {\r\n            try {\r\n                if (daoFactory != null) daoFactory.closeTransaction();\r\n                if (sessionDAOFactory != null) sessionDAOFactory.closeTransaction();\r\n            } catch (Throwable t) {\r\n            }\r\n        }\r\n```\r\n\r\n\r\nThe productDAO.checkAndDecreaseQuantity is the only method that implements optimistic lock and can throw NotAvailableProductException and OptimisticLockException:\r\n\r\n```\r\npublic int checkAndDecreaseQuantity(Long ID_product, int quantity) throws NotAvaibleProductException, OptimisticLockException {\r\n    PreparedStatement ps;\r\n    Product product=null;\r\n\r\n    try {\r\n\r\n      String sql\r\n              = &quot; SELECT * FROM PRODUCT &quot;\r\n              + &quot; WHERE &quot;\r\n              + &quot;   Deleted=0 AND Blocked=0 AND ID_product=? AND AvailableQuantity&gt;=?&quot;;\r\n\r\n\r\n      ps = conn.prepareStatement(sql);\r\n      ps.setLong(1, ID_product);\r\n      ps.setInt(2,quantity);\r\n\r\n\r\n      ResultSet resultSet = ps.executeQuery();\r\n\r\n      boolean exist=false;\r\n      while (resultSet.next()) {\r\n        product = read(resultSet);\r\n        exist=true;\r\n      }\r\n\r\n      resultSet.close();\r\n\r\n      if (!exist) {\r\n        throw new NotAvaibleProductException(&quot;ProductDAOJDBCImpl.decreaseQuantity: The desired quantity of the selected product is less than the available quantity, or the product has been deleted or blocked.&quot;);\r\n      }\r\n\r\n\r\n      sql = &quot; UPDATE Product &quot;\r\n              + &quot; SET AvailableQuantity=?, version=? &quot;\r\n              + &quot; WHERE &quot;\r\n              + &quot; ID_product=? AND Blocked=0 AND Deleted=0 AND version=?&quot;;\r\n\r\n      ps = conn.prepareStatement(sql);\r\n      int i=1;\r\n      ps.setInt(i++, product.getQuantity()-quantity);\r\n      ps.setLong(i++, product.getVersion()+1);\r\n      ps.setLong(i++, ID_product);\r\n      ps.setLong(i++, product.getVersion());\r\n\r\n      ps.executeUpdate();\r\n      ps.close();\r\n\r\n\r\n    } catch (SQLException e) {\r\n      String errorMessage = e.getMessage();\r\n      int errorCode = e.getErrorCode();\r\n\r\n      if (errorMessage.contains(&quot;Unknown column&quot;) || errorCode == 1054) {\r\n        throw new OptimisticLockException(&quot;Exception lock optimistic quantity update&quot;);\r\n      } else {\r\n        throw new RuntimeException(e);\r\n      }\r\n    }\r\n    return product.getQuantity()-quantity;\r\n  }\r\n```\r\n\r\nI know that there are several security problem such as storing the credit card information into the database and store the UserID in the cookie directly, but the website won&#39;t be published, it&#39;s just for an exam where the professor told us to don&#39;t manage the security (he just mind the software engineering).\r\n\r\n\r\nIf you see that I&#39;m doing something wrong please let me know, thank you in advance.\r\n\r\n","title":"Why doesn&#39;t my optimistic lock implementation work with two competing requests?","body":"<p>I'm trying to implement an e-commerce website using java, MySQL database, and JDBC.</p>\n<p>I have some problem managing the concurrency with optimistic lock. In fact if the user &quot;A&quot; try to buy 3 items of a product and the user &quot;B&quot; try to buy 2 item of the same product at the same time (but the total available item of the product is 4) i have unpredictable results.\nIn fact I tried it and there were left 2 available items, the version of the column was incremented by 1 correctly but both users made a payment and complete a order (there wasn't a rollback for one of the two transaction).</p>\n<p>Seems that the request of user B overwrite the request of user A because they both check the version before one of them increase it. So when they arrive to the commit point the last one will overwrite the results of the other.</p>\n<p>Of course I'm doing wrong something and maybe i even misunderstood the concept of optimistic lock, can you please help me?</p>\n<p>This is the controller:</p>\n<pre><code> String applicationMessage = null;\n        DAOFactory sessionDAOFactory = null;\n        DAOFactory daoFactory = null;\n        User loggedUser;\n\n\n        Logger logger = LogService.getApplicationLogger();\n\n        try {\n\n            Map sessionFactoryParameters = new HashMap&lt;String, Object&gt;();\n            sessionFactoryParameters.put(&quot;request&quot;, request);\n            sessionFactoryParameters.put(&quot;response&quot;, response);\n            sessionDAOFactory = DAOFactory.getDAOFactory(Configuration.COOKIE_IMPL, sessionFactoryParameters);\n            sessionDAOFactory.beginTransaction();\n\n            UserDAO sessionUserDAO = sessionDAOFactory.getUserDAO();\n            loggedUser = sessionUserDAO.findLoggedUser();\n\n            daoFactory = DAOFactory.getDAOFactory(Configuration.DAO_IMPL, null);\n            daoFactory.beginTransaction();\n\n            Double CardNumber = Double.parseDouble(request.getParameter(&quot;CardNumber&quot;));\n            int CVV = Integer.parseInt(request.getParameter(&quot;cvv&quot;));\n            String Name = request.getParameter(&quot;name&quot;);\n            String ExpireDate = request.getParameter(&quot;expireDate&quot;);\n\n\n\n            /* I find the pending order linked with logged user*/\n            OrderDAO orderDAO = daoFactory.getOrderDAO();\n            Order order = orderDAO.findByLoggedUserAndPendingStatus(loggedUser);\n\n            //I find the cart\n            CartDAO cartDAO = daoFactory.getCartDAO();\n            Cart cart = cartDAO.findCartByOrder(order);\n\n            //Take all the cart item inside the cart\n            CartItemDAO cartItemDAO = daoFactory.getCartItemDAO();\n            List&lt;CartItem&gt; cartItems = cartItemDAO.getCartItems(cart);\n\n\n\n            //I create the payment\n            PaymentDAO paymentDAO = daoFactory.getPaymentDAO();\n            paymentDAO.create(cart.getPrice_cart(), order, CardNumber, CVV, Name, Expire);\n\n            //Set complete flag to the order\n            orderDAO.setCompleteStatus(order);\n\n            //Decrease the quantity of the product\n            for (CartItem cartItem : cartItems) {\n                ProductDAO productDAO = daoFactory.getProductDAO();\n\n                productDAO.checkAndDecreaseQuantity(cartItem.getProduct().getId_product(), cartItem.getQuantity());\n\n            }\n\n            daoFactory.commitTransaction();\n            sessionDAOFactory.commitTransaction();\n\n            applicationMessage = &quot;Payment received, order executed successfully&quot;;\n\n            request.setAttribute(&quot;loggedOn&quot;, loggedUser != null);\n            request.setAttribute(&quot;loggedUser&quot;, loggedUser);\n            request.setAttribute(&quot;applicationMessage&quot;, applicationMessage);\n            request.setAttribute(&quot;viewUrl&quot;, &quot;jsp/homeManagement/Home&quot;);\n\n        } catch (OptimisticLockException e) {\n            logger.log(Level.SEVERE, &quot;Controller Error&quot;, e);\n            try {\n                if (daoFactory != null) daoFactory.rollbackTransaction();\n                if (sessionDAOFactory != null) sessionDAOFactory.rollbackTransaction();\n\n            } catch (Throwable t) {\n            }\n            throw new RuntimeException(e);\n\n        } catch (NotAvailableProductException e) {\n            logger.log(Level.INFO, &quot;Controller Error&quot;, e);\n            try {\n                if (daoFactory != null) daoFactory.rollbackTransaction();\n                if (sessionDAOFactory != null) sessionDAOFactory.rollbackTransaction();\n            } catch (Throwable t) {\n            }\n            throw new RuntimeException(e);\n\n\n        } catch (Exception e) {\n            logger.log(Level.SEVERE, &quot;Controller Error&quot;, e);\n            try {\n                if (daoFactory != null) daoFactory.rollbackTransaction();\n                if (sessionDAOFactory != null) sessionDAOFactory.rollbackTransaction();\n\n            } catch (Throwable t) {\n            }\n            throw new RuntimeException(e);\n\n\n        } finally {\n            try {\n                if (daoFactory != null) daoFactory.closeTransaction();\n                if (sessionDAOFactory != null) sessionDAOFactory.closeTransaction();\n            } catch (Throwable t) {\n            }\n        }\n</code></pre>\n<p>The productDAO.checkAndDecreaseQuantity is the only method that implements optimistic lock and can throw NotAvailableProductException and OptimisticLockException:</p>\n<pre><code>public int checkAndDecreaseQuantity(Long ID_product, int quantity) throws NotAvaibleProductException, OptimisticLockException {\n    PreparedStatement ps;\n    Product product=null;\n\n    try {\n\n      String sql\n              = &quot; SELECT * FROM PRODUCT &quot;\n              + &quot; WHERE &quot;\n              + &quot;   Deleted=0 AND Blocked=0 AND ID_product=? AND AvailableQuantity&gt;=?&quot;;\n\n\n      ps = conn.prepareStatement(sql);\n      ps.setLong(1, ID_product);\n      ps.setInt(2,quantity);\n\n\n      ResultSet resultSet = ps.executeQuery();\n\n      boolean exist=false;\n      while (resultSet.next()) {\n        product = read(resultSet);\n        exist=true;\n      }\n\n      resultSet.close();\n\n      if (!exist) {\n        throw new NotAvaibleProductException(&quot;ProductDAOJDBCImpl.decreaseQuantity: The desired quantity of the selected product is less than the available quantity, or the product has been deleted or blocked.&quot;);\n      }\n\n\n      sql = &quot; UPDATE Product &quot;\n              + &quot; SET AvailableQuantity=?, version=? &quot;\n              + &quot; WHERE &quot;\n              + &quot; ID_product=? AND Blocked=0 AND Deleted=0 AND version=?&quot;;\n\n      ps = conn.prepareStatement(sql);\n      int i=1;\n      ps.setInt(i++, product.getQuantity()-quantity);\n      ps.setLong(i++, product.getVersion()+1);\n      ps.setLong(i++, ID_product);\n      ps.setLong(i++, product.getVersion());\n\n      ps.executeUpdate();\n      ps.close();\n\n\n    } catch (SQLException e) {\n      String errorMessage = e.getMessage();\n      int errorCode = e.getErrorCode();\n\n      if (errorMessage.contains(&quot;Unknown column&quot;) || errorCode == 1054) {\n        throw new OptimisticLockException(&quot;Exception lock optimistic quantity update&quot;);\n      } else {\n        throw new RuntimeException(e);\n      }\n    }\n    return product.getQuantity()-quantity;\n  }\n</code></pre>\n<p>I know that there are several security problem such as storing the credit card information into the database and store the UserID in the cookie directly, but the website won't be published, it's just for an exam where the professor told us to don't manage the security (he just mind the software engineering).</p>\n<p>If you see that I'm doing something wrong please let me know, thank you in advance.</p>\n"},{"tags":["java","android","kotlin","leakcanary"],"answers":[{"tags":[],"owner":{"account_id":24296416,"reputation":114,"user_id":18240568,"display_name":"Textnovian"},"comment_count":0,"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1645164625,"creation_date":1645163408,"answer_id":71168935,"question_id":71168408,"body_markdown":"This isn&#39;t an explanation as to why, but you may be able to work around the issue by writing an empty class that you include in your test classpath, and use that class for test environment detection.","title":"LeakCanary is currently disabled caused by leakcanary.LeakAssertions was found in classpath","body":"<p>This isn't an explanation as to why, but you may be able to work around the issue by writing an empty class that you include in your test classpath, and use that class for test environment detection.</p>\n"}],"owner":{"account_id":5638759,"reputation":1379,"user_id":4463401,"display_name":"Ruan_Lopes"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":535,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1692093204,"creation_date":1645158732,"question_id":71168408,"body_markdown":"I have been trying to add LeakCanary to my codebase. \r\n\r\nI&#39;ve read the instructions from the [Getting started](https://stackoverflow.com/editing-help#comment-formatting) where I also found out that [LeakCanary has a test environment detection](https://square.github.io/leakcanary/recipes/#leakcanary-test-environment-detection) and I should add the following to my codebase if I see the message `LeakCanary is currently disabled` \r\n\r\n    &lt;resources&gt;\r\n      &lt;string name=&quot;leak_canary_test_class_name&quot;&gt;assertk.Assert&lt;/string&gt;\r\n    &lt;/resources&gt;\r\n\r\nWhich in my case is the below as I don&#39;t use AssertK\r\n\r\n    &lt;resources&gt;\r\n      &lt;string name=&quot;leak_canary_test_class_name&quot;&gt;org.assertj.core.api.Assertions&lt;/string&gt;\r\n    &lt;/resources&gt;\r\n\r\nThe problem I&#39;m running into now is that the message looks like the following.\r\n\r\n    LeakCanary is currently disabled: test class leakcanary.LeakAssertions was found in classpath.\r\n    LeakCanary: No heap analysis performed\r\n\r\n\r\nDoes anyone know what is the issue now?","title":"LeakCanary is currently disabled caused by leakcanary.LeakAssertions was found in classpath","body":"<p>I have been trying to add LeakCanary to my codebase.</p>\n<p>I've read the instructions from the <a href=\"https://stackoverflow.com/editing-help#comment-formatting\">Getting started</a> where I also found out that <a href=\"https://square.github.io/leakcanary/recipes/#leakcanary-test-environment-detection\" rel=\"nofollow noreferrer\">LeakCanary has a test environment detection</a> and I should add the following to my codebase if I see the message <code>LeakCanary is currently disabled</code></p>\n<pre><code>&lt;resources&gt;\n  &lt;string name=&quot;leak_canary_test_class_name&quot;&gt;assertk.Assert&lt;/string&gt;\n&lt;/resources&gt;\n</code></pre>\n<p>Which in my case is the below as I don't use AssertK</p>\n<pre><code>&lt;resources&gt;\n  &lt;string name=&quot;leak_canary_test_class_name&quot;&gt;org.assertj.core.api.Assertions&lt;/string&gt;\n&lt;/resources&gt;\n</code></pre>\n<p>The problem I'm running into now is that the message looks like the following.</p>\n<pre><code>LeakCanary is currently disabled: test class leakcanary.LeakAssertions was found in classpath.\nLeakCanary: No heap analysis performed\n</code></pre>\n<p>Does anyone know what is the issue now?</p>\n"},{"tags":["java","dataframe","pyspark","hive","string-formatting"],"comments":[{"owner":{"account_id":27699053,"reputation":2348,"user_id":21144042,"display_name":"Diego Borba"},"score":0,"creation_date":1692025378,"post_id":76899544,"comment_id":135566540,"body_markdown":"Please show the code lines that give &#180;NullPointerException`.","body":"Please show the code lines that give &#180;NullPointerException`."},{"owner":{"account_id":3656420,"reputation":413,"user_id":3047319,"display_name":"DiegoMG"},"score":0,"creation_date":1692026969,"post_id":76899544,"comment_id":135566894,"body_markdown":"I can write it here but I think it&#39;s not relevant: Caused by: java.lang.NullPointerException\n\tat com.address.utils.ProcessDataframes$1.call(ProcessDataframes.java:63)","body":"I can write it here but I think it&#39;s not relevant: Caused by: java.lang.NullPointerException \tat com.address.utils.ProcessDataframes$1.call(ProcessDataframes&zwnj;&#8203;.java:63)"},{"owner":{"account_id":27699053,"reputation":2348,"user_id":21144042,"display_name":"Diego Borba"},"score":0,"creation_date":1692031333,"post_id":76899544,"comment_id":135567720,"body_markdown":"The method I mean","body":"The method I mean"},{"owner":{"account_id":2053598,"reputation":41316,"user_id":1831987,"display_name":"VGR"},"score":1,"creation_date":1692032009,"post_id":76899544,"comment_id":135567863,"body_markdown":"1.  There is no reason to use String.format when you’re only passing one argument.  2.  Edit your question show the full stack trace for each exception you’re getting.  Currently, we have no idea what you did to cause those exceptions, so we can’t suggest a remedy.  3.  The stack traces will show which lines of your code generated the exceptions.  Include those exact lines of code in your question.","body":"1.  There is no reason to use String.format when you’re only passing one argument.  2.  Edit your question show the full stack trace for each exception you’re getting.  Currently, we have no idea what you did to cause those exceptions, so we can’t suggest a remedy.  3.  The stack traces will show which lines of your code generated the exceptions.  Include those exact lines of code in your question."}],"answers":[{"tags":[],"owner":{"account_id":23740623,"reputation":1,"user_id":17758716,"display_name":"Reilas"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1692043714,"creation_date":1692043714,"answer_id":76901881,"question_id":76899544,"body_markdown":"&gt; _&quot;... After reading another stackoverflow post, I found that for pyspark this same query should be modified as follows in the split lines ...&quot;_\r\n\r\nCorrect, you&#39;ll need 4 slashes there.\r\n\r\n&gt; _&quot;... then when executing I got a NullPointerException error ...&quot;_\r\n\r\nAnd, in your comments you said,\r\n\r\n&gt; _&quot;... Caused by: java.lang.NullPointerException at com.address.utils.ProcessDataframes$1.call(ProcessDataframes.java:63) ...&quot;_\r\n\r\nSo, the error is on line 63 of the _ProcessDataframes_ class.  \r\nPossibly you&#39;re providing a _null_ object somewhere.","title":"Split() at a meta character * with pyspark and Java","body":"<blockquote>\n<p><em>&quot;... After reading another stackoverflow post, I found that for pyspark this same query should be modified as follows in the split lines ...&quot;</em></p>\n</blockquote>\n<p>Correct, you'll need 4 slashes there.</p>\n<blockquote>\n<p><em>&quot;... then when executing I got a NullPointerException error ...&quot;</em></p>\n</blockquote>\n<p>And, in your comments you said,</p>\n<blockquote>\n<p><em>&quot;... Caused by: java.lang.NullPointerException at com.address.utils.ProcessDataframes$1.call(ProcessDataframes.java:63) ...&quot;</em></p>\n</blockquote>\n<p>So, the error is on line 63 of the <em>ProcessDataframes</em> class.<br />\nPossibly you're providing a <em>null</em> object somewhere.</p>\n"},{"comments":[{"owner":{"account_id":19118721,"reputation":6319,"user_id":13963086,"display_name":"k314159"},"score":1,"creation_date":1692091644,"post_id":76904719,"comment_id":135574666,"body_markdown":"There&#39;s no need to use String.format, you can just simply do `final String addressQuery = &quot;select... where name_surname like &#39;%*%&#39;&quot;;`","body":"There&#39;s no need to use String.format, you can just simply do <code>final String addressQuery = &quot;select... where name_surname like &#39;%*%&#39;&quot;;</code>"}],"tags":[],"owner":{"account_id":3656420,"reputation":413,"user_id":3047319,"display_name":"DiegoMG"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1692091252,"creation_date":1692091252,"answer_id":76904719,"question_id":76899544,"body_markdown":"Finally the issue was solved by 1) adding 2 more backslashes for scaping when running pyspark and 2) adding a where clause like this:\r\n\r\n    final String addressQuery = String.format(\r\n                    &quot;select &#39;104&#39; as id, &quot; +\r\n                            &quot;trim(split(name_surname,&#39;\\\\\\\\*&#39;)[1]) as name, &quot; +\r\n                            &quot;trim(split(name_surname,&#39;\\\\\\\\*&#39;)[0]) as surname, &quot; +\r\n                            &quot;address, &quot; +\r\n                            &quot;zip , &quot; +\r\n                            &quot;from address_info &quot; +\r\n                            &quot;where name_surname like &#39;%s&#39;&quot;, &quot;%*%&quot;);\r\n\r\n","title":"Split() at a meta character * with pyspark and Java","body":"<p>Finally the issue was solved by 1) adding 2 more backslashes for scaping when running pyspark and 2) adding a where clause like this:</p>\n<pre><code>final String addressQuery = String.format(\n                &quot;select '104' as id, &quot; +\n                        &quot;trim(split(name_surname,'\\\\\\\\*')[1]) as name, &quot; +\n                        &quot;trim(split(name_surname,'\\\\\\\\*')[0]) as surname, &quot; +\n                        &quot;address, &quot; +\n                        &quot;zip , &quot; +\n                        &quot;from address_info &quot; +\n                        &quot;where name_surname like '%s'&quot;, &quot;%*%&quot;);\n</code></pre>\n"},{"comments":[{"owner":{"account_id":19118721,"reputation":6319,"user_id":13963086,"display_name":"k314159"},"score":0,"creation_date":1692093372,"post_id":76904917,"comment_id":135574938,"body_markdown":"He&#39;s not passing name and surname into the query, he&#39;s retrieving them _from_ the query. But your suggestion could also work well in reverse: get name_surname from the query and then do the split in Java instead of doing it in SQL.","body":"He&#39;s not passing name and surname into the query, he&#39;s retrieving them <i>from</i> the query. But your suggestion could also work well in reverse: get name_surname from the query and then do the split in Java instead of doing it in SQL."},{"owner":{"account_id":7655262,"reputation":7506,"user_id":5802417,"display_name":"Michael Gantman"},"score":0,"creation_date":1692094224,"post_id":76904917,"comment_id":135575084,"body_markdown":"@k314159 thanks for correction, and yes my idea stands. In this case I&#39;d say splitting this operation in 2 makes sense.","body":"@k314159 thanks for correction, and yes my idea stands. In this case I&#39;d say splitting this operation in 2 makes sense."}],"tags":[],"owner":{"account_id":7655262,"reputation":7506,"user_id":5802417,"display_name":"Michael Gantman"},"comment_count":2,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1692092991,"creation_date":1692092991,"answer_id":76904917,"question_id":76899544,"body_markdown":"I suggest that you split your task into 2 subtasks. do the split first and than use the split result in the query. Your split than becomes very simple:\r\n\r\n    String[] names= name_surname.split(&quot;\\\\*&quot;);\r\n\r\nAlso your query will look simpler and you will only need to invoke `split()` method once instead of twice, as in your code, plus you can validate that both name and surname are not blanks before running your query.","title":"Split() at a meta character * with pyspark and Java","body":"<p>I suggest that you split your task into 2 subtasks. do the split first and than use the split result in the query. Your split than becomes very simple:</p>\n<pre><code>String[] names= name_surname.split(&quot;\\\\*&quot;);\n</code></pre>\n<p>Also your query will look simpler and you will only need to invoke <code>split()</code> method once instead of twice, as in your code, plus you can validate that both name and surname are not blanks before running your query.</p>\n"}],"owner":{"account_id":3656420,"reputation":413,"user_id":3047319,"display_name":"DiegoMG"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":55,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":3,"score":0,"last_activity_date":1692092991,"creation_date":1692021176,"question_id":76899544,"body_markdown":"I&#39;ve fighting with this code to split the column name_surname in 2 differents columns. The content of the column name_surname is stored like i.e.: `David*Green` so the purpose of these query is to separate the content in 2 columns name and surname where &#39;*&#39; is found.\r\n\r\nThe query in java is as follows:\r\n\r\n    final String addressQuery = String.format(\r\n    \t\t\t\t&quot;select &#39;104&#39; as id, &quot; +\r\n    \t\t\t\t\t\t&quot;trim(split(name_surname,&#39;\\\\*&#39;)[1]) as name, &quot; +\r\n    \t\t\t\t\t\t&quot;trim(split(name_surname,&#39;\\\\*&#39;)[0]) as surname, &quot; +\r\n    \t\t\t\t\t\t&quot;address, &quot; +\r\n    \t\t\t\t\t\t&quot;zip , &quot; +\r\n                            &quot;from address_info &quot;);\r\n\r\nThen this is saved as a dataframe:\r\n\r\n    DataFrame addressInt = sqlContext.sql(addressQuery);\r\n\r\nWhen running this String like this, I&#39;ve the following exception:\r\njava.util.regex.PatternSyntaxException: Dangling meta character &#39;*&#39; near index 0  \r\n\r\nAfter reading another stackoverflow post, I found that for pyspark this same query should be modified as follows in the split lines:\r\n\r\n    &quot;trim(split(name_surname,&#39;\\\\\\\\*&#39;)[1]) as name, &quot; +\r\n    &quot;trim(split(name_surname,&#39;\\\\\\\\*&#39;)[0]) as surname, &quot; \r\n\r\nBut then when executing I got a NullPointerException error.\r\n\r\nDo you guys know how can I solve this issue?\r\n\r\nThanks\r\n\r\n","title":"Split() at a meta character * with pyspark and Java","body":"<p>I've fighting with this code to split the column name_surname in 2 differents columns. The content of the column name_surname is stored like i.e.: <code>David*Green</code> so the purpose of these query is to separate the content in 2 columns name and surname where '*' is found.</p>\n<p>The query in java is as follows:</p>\n<pre><code>final String addressQuery = String.format(\n                &quot;select '104' as id, &quot; +\n                        &quot;trim(split(name_surname,'\\\\*')[1]) as name, &quot; +\n                        &quot;trim(split(name_surname,'\\\\*')[0]) as surname, &quot; +\n                        &quot;address, &quot; +\n                        &quot;zip , &quot; +\n                        &quot;from address_info &quot;);\n</code></pre>\n<p>Then this is saved as a dataframe:</p>\n<pre><code>DataFrame addressInt = sqlContext.sql(addressQuery);\n</code></pre>\n<p>When running this String like this, I've the following exception:\njava.util.regex.PatternSyntaxException: Dangling meta character '*' near index 0</p>\n<p>After reading another stackoverflow post, I found that for pyspark this same query should be modified as follows in the split lines:</p>\n<pre><code>&quot;trim(split(name_surname,'\\\\\\\\*')[1]) as name, &quot; +\n&quot;trim(split(name_surname,'\\\\\\\\*')[0]) as surname, &quot; \n</code></pre>\n<p>But then when executing I got a NullPointerException error.</p>\n<p>Do you guys know how can I solve this issue?</p>\n<p>Thanks</p>\n"},{"tags":["java","sql-server","database","oracle","jdbc"],"comments":[{"owner":{"account_id":2994830,"reputation":1,"user_id":2541560,"display_name":"Kayaman"},"score":0,"creation_date":1464950434,"post_id":37612183,"comment_id":62707346,"body_markdown":"And you&#39;re sure the comments are in a column named &quot;REMARKS&quot;?","body":"And you&#39;re sure the comments are in a column named &quot;REMARKS&quot;?"},{"owner":{"account_id":3916497,"reputation":577,"user_id":3240206,"accept_rate":27,"display_name":"Chanky Mallick"},"score":0,"creation_date":1464950826,"post_id":37612183,"comment_id":62707575,"body_markdown":"@Kayaman yes .. as JavaDoc also says that  REMARKS column in metadata resultset may return Null , but not described why ....","body":"@Kayaman yes .. as JavaDoc also says that  REMARKS column in metadata resultset may return Null , but not described why ...."},{"owner":{"account_id":6482812,"reputation":6261,"user_id":5019309,"display_name":"Arkadiusz Łukasiewicz"},"score":1,"creation_date":1464950826,"post_id":37612183,"comment_id":62707576,"body_markdown":"You have to put  property `remarksReporting=true` to driverManager or  execute `((OracleConnection)conn).setRemarksReporting(true)`","body":"You have to put  property <code>remarksReporting=true</code> to driverManager or  execute <code>((OracleConnection)conn).setRemarksReporting(true)</code>"}],"answers":[{"tags":[],"owner":{"display_name":"user330315"},"comment_count":0,"down_vote_count":0,"up_vote_count":8,"is_accepted":true,"score":8,"last_activity_date":1464950922,"creation_date":1464950922,"answer_id":37612403,"question_id":37612183,"body_markdown":"For Oracle you need to provide a connection property `remarksReporting` and set that to `true` or call the method `setRemarksReporting()` to enable that. \r\n\r\n\r\n    OracleConnection oraCon = (OracleConnection)con;\r\n    oraCon.setRemarksReporting(true);\r\n\r\nAfter that, `getColumns()` will return the column (or table) comments in the `REMARKS` column of the ResultSet.\r\n\r\nSee [Oracle&#39;s JDBC Reference](https://docs.oracle.com/database/121/JJDBC/oraperf.htm#JJDBC28785) for more details\r\n\r\n---\r\n\r\nFor SQL Server this is not possible at all. \r\n\r\nNeither the Microsoft nor the jTDS driver expose table or column comments. Probably because there is no SQL support for that in SQL Server. The _usual_ approach of using &quot;extended properties&quot; and the property name MS_DESCRIPTION is not reliable. Mainly because there is no requirement to us `MS_DESCRIPTION` as the property name. Not even `sp_help` returns those remarks. And at least the jTDS driver simply calls `sp_help` go the the table columns. I don&#39;t know what the Microsoft driver does.\r\n\r\nThe only option you have there, is to use `fn_listextendedproperty()` to retrieve the comments:\r\n\r\ne.g.:\r\n\r\n    SELECT objname, cast(value as varchar(8000)) as value \r\n    FROM fn_listextendedproperty (&#39;MS_DESCRIPTION&#39;,&#39;schema&#39;, &#39;dbo&#39;, &#39;table&#39;, &#39;Student&#39;, &#39;column&#39;, null) \r\n\r\n\r\nYou need to replace `MS_DESCRIPTION` with whatever property name you use to store your comments.\r\n","title":"How to get Column Comments in JDBC","body":"<p>For Oracle you need to provide a connection property <code>remarksReporting</code> and set that to <code>true</code> or call the method <code>setRemarksReporting()</code> to enable that. </p>\n\n<pre><code>OracleConnection oraCon = (OracleConnection)con;\noraCon.setRemarksReporting(true);\n</code></pre>\n\n<p>After that, <code>getColumns()</code> will return the column (or table) comments in the <code>REMARKS</code> column of the ResultSet.</p>\n\n<p>See <a href=\"https://docs.oracle.com/database/121/JJDBC/oraperf.htm#JJDBC28785\" rel=\"noreferrer\">Oracle's JDBC Reference</a> for more details</p>\n\n<hr>\n\n<p>For SQL Server this is not possible at all. </p>\n\n<p>Neither the Microsoft nor the jTDS driver expose table or column comments. Probably because there is no SQL support for that in SQL Server. The <em>usual</em> approach of using \"extended properties\" and the property name MS_DESCRIPTION is not reliable. Mainly because there is no requirement to us <code>MS_DESCRIPTION</code> as the property name. Not even <code>sp_help</code> returns those remarks. And at least the jTDS driver simply calls <code>sp_help</code> go the the table columns. I don't know what the Microsoft driver does.</p>\n\n<p>The only option you have there, is to use <code>fn_listextendedproperty()</code> to retrieve the comments:</p>\n\n<p>e.g.:</p>\n\n<pre><code>SELECT objname, cast(value as varchar(8000)) as value \nFROM fn_listextendedproperty ('MS_DESCRIPTION','schema', 'dbo', 'table', 'Student', 'column', null) \n</code></pre>\n\n<p>You need to replace <code>MS_DESCRIPTION</code> with whatever property name you use to store your comments.</p>\n"},{"tags":[],"owner":{"account_id":963056,"reputation":994,"user_id":986966,"accept_rate":80,"display_name":"fall"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1692092915,"creation_date":1692092915,"answer_id":76904908,"question_id":37612183,"body_markdown":"The issue is that the getColumns() method from DatabaseMetaData does not retrieve the column comments/remarks by default for Oracle database. To fetch column comments in Oracle, you need to query the ALL_COL_COMMENTS view:\r\n\r\n      // Query comments \r\n      String sql = &quot;SELECT column_name, comments FROM all_col_comments WHERE table_name = ?&quot;;\r\n      PreparedStatement ps = connection.prepareStatement(sql);\r\n      ps.setString(1, tableName);\r\n    \r\n      ResultSet rs2 = ps.executeQuery();\r\n      while (rs2.next()) {\r\n        String name = rs2.getString(&quot;column_name&quot;);\r\n        String comment = rs2.getString(&quot;comments&quot;);\r\n      }","title":"How to get Column Comments in JDBC","body":"<p>The issue is that the getColumns() method from DatabaseMetaData does not retrieve the column comments/remarks by default for Oracle database. To fetch column comments in Oracle, you need to query the ALL_COL_COMMENTS view:</p>\n<pre><code>  // Query comments \n  String sql = &quot;SELECT column_name, comments FROM all_col_comments WHERE table_name = ?&quot;;\n  PreparedStatement ps = connection.prepareStatement(sql);\n  ps.setString(1, tableName);\n\n  ResultSet rs2 = ps.executeQuery();\n  while (rs2.next()) {\n    String name = rs2.getString(&quot;column_name&quot;);\n    String comment = rs2.getString(&quot;comments&quot;);\n  }\n</code></pre>\n"}],"owner":{"account_id":3916497,"reputation":577,"user_id":3240206,"accept_rate":27,"display_name":"Chanky Mallick"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":4886,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"accepted_answer_id":37612403,"answer_count":2,"score":3,"last_activity_date":1692092915,"creation_date":1464950362,"question_id":37612183,"body_markdown":"I want to fetch Column comments using JDBC Metadata , But everytime it returns null , I tested with Oracle and SqlServer both cases it returning Null.\r\n\r\n    DatabaseMetaData dmt = con.getMetaData();    \r\n    colRs = dmt.getColumns(null, &quot;dbo&quot;, &#39;Student&#39;, null);\r\n    while (colRs.next()) {\r\n    System.out.println(colRs.getString(&quot;REMARKS&quot;);\r\n       }\r\n\r\nWhile i am getting all other data like column name , length etc absolutely ok ... ","title":"How to get Column Comments in JDBC","body":"<p>I want to fetch Column comments using JDBC Metadata , But everytime it returns null , I tested with Oracle and SqlServer both cases it returning Null.</p>\n\n<pre><code>DatabaseMetaData dmt = con.getMetaData();    \ncolRs = dmt.getColumns(null, \"dbo\", 'Student', null);\nwhile (colRs.next()) {\nSystem.out.println(colRs.getString(\"REMARKS\");\n   }\n</code></pre>\n\n<p>While i am getting all other data like column name , length etc absolutely ok ... </p>\n"},{"tags":["java","android"],"comments":[{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1692157153,"post_id":76904861,"comment_id":135584370,"body_markdown":"Please provide enough code so others can better understand or reproduce the problem.","body":"Please provide enough code so others can better understand or reproduce the problem."}],"owner":{"account_id":28513741,"reputation":1,"user_id":21823373,"display_name":"Renata Sayavedra"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":14,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1692092537,"creation_date":1692092537,"question_id":76904861,"body_markdown":"I have been searching approach that might work i fist need to get the root accessibility node of the current UI using w(). This returns an AccessibilityNodeInfo object representing the root view.\r\n\r\nIt then traverses the view hierarchy recursively using getChildCount() and getChild() to navigate the subtree.\r\n\r\nFor each AccessibilityNodeInfo in the hierarchy, it calls getText() to read any text content associated with that node. This text is added to a list.\r\n\r\nIt also reads the view ID if available using getViewIdResourceName() on the node.\r\n\r\nThe view text and IDs are stored in maps/lists as the hierarchy is traversed.\r\n\r\nI really try coding it several times but i didnt have luck, im expecting if someone can provide me acode explanation of how can approach.","title":"Using accessibilty service get nodes info of current window in android","body":"<p>I have been searching approach that might work i fist need to get the root accessibility node of the current UI using w(). This returns an AccessibilityNodeInfo object representing the root view.</p>\n<p>It then traverses the view hierarchy recursively using getChildCount() and getChild() to navigate the subtree.</p>\n<p>For each AccessibilityNodeInfo in the hierarchy, it calls getText() to read any text content associated with that node. This text is added to a list.</p>\n<p>It also reads the view ID if available using getViewIdResourceName() on the node.</p>\n<p>The view text and IDs are stored in maps/lists as the hierarchy is traversed.</p>\n<p>I really try coding it several times but i didnt have luck, im expecting if someone can provide me acode explanation of how can approach.</p>\n"},{"tags":["java","algorithm","join","java-8","inner-join"],"comments":[{"owner":{"account_id":465573,"reputation":192703,"user_id":869736,"accept_rate":82,"display_name":"Louis Wasserman"},"score":0,"creation_date":1691425527,"post_id":76853488,"comment_id":135486784,"body_markdown":"An efficient implementation of this is unlikely to be possible with streams, but will probably need to involve separate data structures with maps.","body":"An efficient implementation of this is unlikely to be possible with streams, but will probably need to involve separate data structures with maps."},{"owner":{"account_id":23428052,"reputation":6895,"user_id":17487348,"display_name":"Mushroomator"},"score":0,"creation_date":1691425857,"post_id":76853488,"comment_id":135486855,"body_markdown":"You&#39;re basically looking for JOIN (more specifically an INNER JOIN) algorithms as used in database systems. [Here](https://infocenter.sybase.com/help/index.jsp?topic=/com.sybase.help.sqlanywhere.11.0.1/dbusage_en11/join-methods-optimizer-queryopt.html) (see list of algorithms on the left-hand side in the tree view) are some of the basic JOINS and ideas on how to join outlined. It shouldn&#39;t be too hard to implement e.g. a Hash-Join using `HashMap&lt;&gt;`.","body":"You&#39;re basically looking for JOIN (more specifically an INNER JOIN) algorithms as used in database systems. <a href=\"https://infocenter.sybase.com/help/index.jsp?topic=/com.sybase.help.sqlanywhere.11.0.1/dbusage_en11/join-methods-optimizer-queryopt.html\" rel=\"nofollow noreferrer\">Here</a> (see list of algorithms on the left-hand side in the tree view) are some of the basic JOINS and ideas on how to join outlined. It shouldn&#39;t be too hard to implement e.g. a Hash-Join using <code>HashMap&lt;&gt;</code>."},{"owner":{"account_id":6876679,"reputation":2100,"user_id":5284909,"accept_rate":67,"display_name":"Nilesh"},"score":0,"creation_date":1691426051,"post_id":76853488,"comment_id":135486878,"body_markdown":"@Mushroomator I am fine with HashMap or other object having these two elements. Do you have any idea to achieve this","body":"@Mushroomator I am fine with HashMap or other object having these two elements. Do you have any idea to achieve this"},{"owner":{"account_id":11400015,"reputation":1904,"user_id":8357251,"display_name":"gdomo"},"score":0,"creation_date":1691426492,"post_id":76853488,"comment_id":135486973,"body_markdown":"Is it guaranteed that every `Employee.companyId` exists among provided companies?","body":"Is it guaranteed that every <code>Employee.companyId</code> exists among provided companies?"},{"owner":{"account_id":6876679,"reputation":2100,"user_id":5284909,"accept_rate":67,"display_name":"Nilesh"},"score":0,"creation_date":1691426570,"post_id":76853488,"comment_id":135486985,"body_markdown":"Might be case where not exist","body":"Might be case where not exist"},{"owner":{"account_id":11400015,"reputation":1904,"user_id":8357251,"display_name":"gdomo"},"score":0,"creation_date":1691426922,"post_id":76853488,"comment_id":135487055,"body_markdown":"Then should such employees be present among pairs list?","body":"Then should such employees be present among pairs list?"}],"answers":[{"comments":[{"owner":{"account_id":6876679,"reputation":2100,"user_id":5284909,"accept_rate":67,"display_name":"Nilesh"},"score":0,"creation_date":1691428534,"post_id":76853699,"comment_id":135487368,"body_markdown":"Thanks let me apply this in my use case","body":"Thanks let me apply this in my use case"}],"tags":[],"owner":{"account_id":11400015,"reputation":1904,"user_id":8357251,"display_name":"gdomo"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1691433891,"creation_date":1691427157,"answer_id":76853699,"question_id":76853488,"body_markdown":"You can group employees by `companyId` and then build a pairs with the stream API:\r\n\r\n    Map&lt;String, List&lt;Employee&gt;&gt; employeesByCompanyId = employees.stream().collect(Collectors.groupingBy(Employee::getCompanyId));\r\n\r\n    List&lt;Pair&lt;Company, Employee&gt;&gt; pairs = companies.stream().flatMap(company -&gt;\r\n            employeesByCompanyId.getOrDefault(company.getId(), Collections.emptyList())\r\n                    .stream()\r\n                    .map(employee -&gt; new Pair&lt;&gt;(company, employee))\r\n    ).toList();","title":"Get List of Pair of matching objects from two separate lists of objects using java 8 streams","body":"<p>You can group employees by <code>companyId</code> and then build a pairs with the stream API:</p>\n<pre><code>Map&lt;String, List&lt;Employee&gt;&gt; employeesByCompanyId = employees.stream().collect(Collectors.groupingBy(Employee::getCompanyId));\n\nList&lt;Pair&lt;Company, Employee&gt;&gt; pairs = companies.stream().flatMap(company -&gt;\n        employeesByCompanyId.getOrDefault(company.getId(), Collections.emptyList())\n                .stream()\n                .map(employee -&gt; new Pair&lt;&gt;(company, employee))\n).toList();\n</code></pre>\n"},{"tags":[],"owner":{"account_id":23428052,"reputation":6895,"user_id":17487348,"display_name":"Mushroomator"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1692092438,"creation_date":1691428771,"answer_id":76853869,"question_id":76853488,"body_markdown":"What you are looking for is essentially a JOIN operation, more specifically an INNER JOIN, i. e. the intersection of two sets `A` and `B`. \r\n\r\nThere are many algorithms to perform these operations as these are the bread and butter of (relational) database systems. \r\n\r\n[Here](https://infocenter.sybase.com/help/index.jsp?topic=/com.sybase.help.sqlanywhere.11.0.1/dbusage_en11/hash-optimizer-queryopt.html) you find some high-level overview over some of the algorithms used (some of which I list here): \r\n- Hash-Join\r\n- Recursive-Hash-Join\r\n- Merge-Join\r\n- Nested-Loop-Join\r\n- Sorted-Merge-join\r\n- many more...\r\n\r\n### Example: Hash-Join\r\nTo give you a working example I&#39;ve implemented a very basic generic implementation of a hash join (an INNER JOIN is performed). This version is far from perfect in terms of performance/ memory consumption etc. but I think it outlines the general idea and it is flexible enough to be re-usable for other joins you might wanna perform.   \r\n\r\n\r\nThe idea is simple:\r\nYou build a lookup table of one of the two data sets you are comparing (ideally the smaller one, but I&#39;ve skipped that here). Then loop over the other set and see if the keys within the lookup table match those in your second set. If they do add them to the result. If they don&#39;t, continue.\r\nLast but not least, return the result set.\r\n\r\n```java\r\nimport java.util.*;\r\nimport java.util.function.Function;\r\n\r\npublic class Main {\r\n\r\n    public static class Pair&lt;T, U&gt;{\r\n        T x;\r\n        U y;\r\n        public Pair(T x, U y) {\r\n            this.x = x;\r\n            this.y = y;\r\n        }\r\n\r\n        @Override\r\n        public String toString() {\r\n            return &quot;Pair{&quot; +\r\n                    &quot;x=&quot; + x +\r\n                    &quot;, y=&quot; + y +\r\n                    &#39;}&#39;;\r\n        }\r\n    }\r\n\r\n    record Employee(String id, String companyId){};\r\n    record Company(String id){};\r\n\r\n    public static void main(String[] args) {\r\n        var employees = List.of(\r\n                new Employee(&quot;1&quot;, &quot;A&quot;),\r\n                new Employee(&quot;2&quot;, &quot;B&quot;)\r\n        );\r\n        var companies = List.of(\r\n                new Company(&quot;A&quot;),\r\n                new Company(&quot;B&quot;)\r\n        );\r\n\r\n        var resultSet = hashInnerJoin(companies, employees, company -&gt; company.id, employee -&gt; employee.companyId);\r\n        for (var pair: resultSet) {\r\n            System.out.println(pair);\r\n        }\r\n    }\r\n\r\n    public static &lt;T, U, V&gt; Iterable&lt;Pair&lt;T, U&gt;&gt; hashInnerJoin(Iterable&lt;T&gt; setA, Iterable&lt;U&gt; setB, Function&lt;T, V&gt; joinSetAOn, Function&lt;U, V&gt; joinSetBOn) {\r\n        var lookup = buildLookup(setA, joinSetAOn);\r\n        var result = new ArrayList&lt;Pair&lt;T, U&gt;&gt;();\r\n        setB.forEach(x -&gt; {\r\n            var correspondingValue = lookup.get(joinSetBOn.apply(x));\r\n            if(correspondingValue != null){\r\n                result.add(new Pair&lt;T, U&gt;(correspondingValue, x));\r\n            }\r\n        });\r\n        return result;\r\n    }\r\n\r\n    public static &lt;K, V&gt; Map&lt;K, V&gt; buildLookup(Iterable&lt;V&gt; input, Function&lt;V, K&gt; keySelector){\r\n        var hashMap = new HashMap&lt;K, V&gt;();\r\n        input.forEach(x -&gt; hashMap.put(keySelector.apply(x), x));\r\n        return hashMap;\r\n    }\r\n}\r\n```\r\n\r\nExpected output:\r\n```\r\nPair{x=Company[id=A], y=Employee[id=1, companyId=A]}\r\nPair{x=Company[id=B], y=Employee[id=2, companyId=B]}\r\n```\r\n\r\n&gt; **Remark**: One simple addition to this implementation would be to add an argument of `BiFunction&lt;T, U, W&gt;` which you can use to build the result value `W` which you call when you&#39;ve found a &quot;match&quot; to include in the result. It takes the two matching objects of type `T` and `U` and builds a new result value of type `W`. Currently, for simplicity I am using the `Pair&lt;T, U&gt;` as a result value, but that would be an improvement.  \r\n\r\n### See also\r\nC# has a built-in function [`Join()`](https://learn.microsoft.com/en-us/dotnet/api/system.linq.enumerable.join?view=net-7.0) which can be used on `IEnumerable&lt;T&gt;`s (essentially the equivalent to `Iterable&lt;T&gt;` in Java) which is production-ready, so you can have a look at the [C# implementation of this functionality on Github](https://github.com/microsoft/referencesource/blob/master/System.Core/System/Linq/Enumerable.cs#L677). The idea is however exactly what I&#39;ve been showing here.","title":"Get List of Pair of matching objects from two separate lists of objects using java 8 streams","body":"<p>What you are looking for is essentially a JOIN operation, more specifically an INNER JOIN, i. e. the intersection of two sets <code>A</code> and <code>B</code>.</p>\n<p>There are many algorithms to perform these operations as these are the bread and butter of (relational) database systems.</p>\n<p><a href=\"https://infocenter.sybase.com/help/index.jsp?topic=/com.sybase.help.sqlanywhere.11.0.1/dbusage_en11/hash-optimizer-queryopt.html\" rel=\"nofollow noreferrer\">Here</a> you find some high-level overview over some of the algorithms used (some of which I list here):</p>\n<ul>\n<li>Hash-Join</li>\n<li>Recursive-Hash-Join</li>\n<li>Merge-Join</li>\n<li>Nested-Loop-Join</li>\n<li>Sorted-Merge-join</li>\n<li>many more...</li>\n</ul>\n<h3>Example: Hash-Join</h3>\n<p>To give you a working example I've implemented a very basic generic implementation of a hash join (an INNER JOIN is performed). This version is far from perfect in terms of performance/ memory consumption etc. but I think it outlines the general idea and it is flexible enough to be re-usable for other joins you might wanna perform.</p>\n<p>The idea is simple:\nYou build a lookup table of one of the two data sets you are comparing (ideally the smaller one, but I've skipped that here). Then loop over the other set and see if the keys within the lookup table match those in your second set. If they do add them to the result. If they don't, continue.\nLast but not least, return the result set.</p>\n<pre class=\"lang-java prettyprint-override\"><code>import java.util.*;\nimport java.util.function.Function;\n\npublic class Main {\n\n    public static class Pair&lt;T, U&gt;{\n        T x;\n        U y;\n        public Pair(T x, U y) {\n            this.x = x;\n            this.y = y;\n        }\n\n        @Override\n        public String toString() {\n            return &quot;Pair{&quot; +\n                    &quot;x=&quot; + x +\n                    &quot;, y=&quot; + y +\n                    '}';\n        }\n    }\n\n    record Employee(String id, String companyId){};\n    record Company(String id){};\n\n    public static void main(String[] args) {\n        var employees = List.of(\n                new Employee(&quot;1&quot;, &quot;A&quot;),\n                new Employee(&quot;2&quot;, &quot;B&quot;)\n        );\n        var companies = List.of(\n                new Company(&quot;A&quot;),\n                new Company(&quot;B&quot;)\n        );\n\n        var resultSet = hashInnerJoin(companies, employees, company -&gt; company.id, employee -&gt; employee.companyId);\n        for (var pair: resultSet) {\n            System.out.println(pair);\n        }\n    }\n\n    public static &lt;T, U, V&gt; Iterable&lt;Pair&lt;T, U&gt;&gt; hashInnerJoin(Iterable&lt;T&gt; setA, Iterable&lt;U&gt; setB, Function&lt;T, V&gt; joinSetAOn, Function&lt;U, V&gt; joinSetBOn) {\n        var lookup = buildLookup(setA, joinSetAOn);\n        var result = new ArrayList&lt;Pair&lt;T, U&gt;&gt;();\n        setB.forEach(x -&gt; {\n            var correspondingValue = lookup.get(joinSetBOn.apply(x));\n            if(correspondingValue != null){\n                result.add(new Pair&lt;T, U&gt;(correspondingValue, x));\n            }\n        });\n        return result;\n    }\n\n    public static &lt;K, V&gt; Map&lt;K, V&gt; buildLookup(Iterable&lt;V&gt; input, Function&lt;V, K&gt; keySelector){\n        var hashMap = new HashMap&lt;K, V&gt;();\n        input.forEach(x -&gt; hashMap.put(keySelector.apply(x), x));\n        return hashMap;\n    }\n}\n</code></pre>\n<p>Expected output:</p>\n<pre><code>Pair{x=Company[id=A], y=Employee[id=1, companyId=A]}\nPair{x=Company[id=B], y=Employee[id=2, companyId=B]}\n</code></pre>\n<blockquote>\n<p><strong>Remark</strong>: One simple addition to this implementation would be to add an argument of <code>BiFunction&lt;T, U, W&gt;</code> which you can use to build the result value <code>W</code> which you call when you've found a &quot;match&quot; to include in the result. It takes the two matching objects of type <code>T</code> and <code>U</code> and builds a new result value of type <code>W</code>. Currently, for simplicity I am using the <code>Pair&lt;T, U&gt;</code> as a result value, but that would be an improvement.</p>\n</blockquote>\n<h3>See also</h3>\n<p>C# has a built-in function <a href=\"https://learn.microsoft.com/en-us/dotnet/api/system.linq.enumerable.join?view=net-7.0\" rel=\"nofollow noreferrer\"><code>Join()</code></a> which can be used on <code>IEnumerable&lt;T&gt;</code>s (essentially the equivalent to <code>Iterable&lt;T&gt;</code> in Java) which is production-ready, so you can have a look at the <a href=\"https://github.com/microsoft/referencesource/blob/master/System.Core/System/Linq/Enumerable.cs#L677\" rel=\"nofollow noreferrer\">C# implementation of this functionality on Github</a>. The idea is however exactly what I've been showing here.</p>\n"}],"owner":{"account_id":6876679,"reputation":2100,"user_id":5284909,"accept_rate":67,"display_name":"Nilesh"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":58,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"closed_date":1691509649,"answer_count":2,"score":0,"last_activity_date":1692092438,"creation_date":1691425337,"question_id":76853488,"body_markdown":"I have one requirement where I want pair of matching objects on some condition from two Objects\r\n\r\nFor Ex:\r\n \r\n```\r\nCompany{\r\nid;\r\ncompanyName:\r\naddress;\r\n}\r\n\r\nEmployee {\r\nid;\r\ncompanyId;\r\nname;\r\ndob;\r\naddress;\r\n}\r\n```\r\n\r\nSo from above two objects I want `List&lt;Pair&lt;Company, Employee&gt; &gt; where company.id = employee.id;`\r\n\r\n**Raw implementation:**\r\n\r\n    List&lt;Pair&lt;Company, Employee&gt; &gt; companyEmpPairList = companyList.stream().filter(company -&gt; empList.stream().filter(company.id == emp.compId).findAny()).collect.toMap(company, employee)\r\n\r\nPair is Apache Class or any equivalent is fine for me.\r\n\r\nOutput should be something like:\r\n\r\n    List[Pair(c1, e1), Pair(c2,e2), Pair(c3,e3)...]","title":"Get List of Pair of matching objects from two separate lists of objects using java 8 streams","body":"<p>I have one requirement where I want pair of matching objects on some condition from two Objects</p>\n<p>For Ex:</p>\n<pre><code>Company{\nid;\ncompanyName:\naddress;\n}\n\nEmployee {\nid;\ncompanyId;\nname;\ndob;\naddress;\n}\n</code></pre>\n<p>So from above two objects I want <code>List&lt;Pair&lt;Company, Employee&gt; &gt; where company.id = employee.id;</code></p>\n<p><strong>Raw implementation:</strong></p>\n<pre><code>List&lt;Pair&lt;Company, Employee&gt; &gt; companyEmpPairList = companyList.stream().filter(company -&gt; empList.stream().filter(company.id == emp.compId).findAny()).collect.toMap(company, employee)\n</code></pre>\n<p>Pair is Apache Class or any equivalent is fine for me.</p>\n<p>Output should be something like:</p>\n<pre><code>List[Pair(c1, e1), Pair(c2,e2), Pair(c3,e3)...]\n</code></pre>\n"},{"tags":["java","microsoft-graph-api","azure-bot-service","microsoft-graph-teams"],"comments":[{"owner":{"account_id":2431958,"reputation":11739,"user_id":2122672,"accept_rate":89,"display_name":"Kyle Delaney"},"score":1,"creation_date":1615317615,"post_id":66546216,"comment_id":117652568,"body_markdown":"This is certainly possible using the Azure Bot Service, though it&#39;s easier if you&#39;re sending messages to an existing conversation with a conversation ID. I believe you need a bot anyway because bots are the only way for a Teams app to send messages. Are you planning to message users that already have a conversation with the app, or are you planning to message users that have installed the app but aren&#39;t in a conversation with it, or are you planning to message users that haven&#39;t even installed the app?","body":"This is certainly possible using the Azure Bot Service, though it&#39;s easier if you&#39;re sending messages to an existing conversation with a conversation ID. I believe you need a bot anyway because bots are the only way for a Teams app to send messages. Are you planning to message users that already have a conversation with the app, or are you planning to message users that have installed the app but aren&#39;t in a conversation with it, or are you planning to message users that haven&#39;t even installed the app?"},{"owner":{"account_id":8407603,"reputation":51,"user_id":6310624,"display_name":"Artur P."},"score":0,"creation_date":1615360251,"post_id":66546216,"comment_id":117663475,"body_markdown":"I`m planning to message users that belong to my organization in Teams but they aren&#39;t in the conversation yet. I want to start the conversation using the bot and then continue if there is some new notification for the user.","body":"I`m planning to message users that belong to my organization in Teams but they aren&#39;t in the conversation yet. I want to start the conversation using the bot and then continue if there is some new notification for the user."},{"owner":{"account_id":8407603,"reputation":51,"user_id":6310624,"display_name":"Artur P."},"score":0,"creation_date":1615388710,"post_id":66546216,"comment_id":117675740,"body_markdown":"I created simple bot and deployed it to the Azure but I have one question:\nIf I have multiple customers from multiple Microsoft organizations and I want to provide them my bot with proactive notification feature How should I deploy it? Does each client have to provide me an access to the Microsoft AD with application permissions and add my bot to his Bot Service? Or it is possible to deploy the bot only in my environment and make it available to my clients somehow?","body":"I created simple bot and deployed it to the Azure but I have one question: If I have multiple customers from multiple Microsoft organizations and I want to provide them my bot with proactive notification feature How should I deploy it? Does each client have to provide me an access to the Microsoft AD with application permissions and add my bot to his Bot Service? Or it is possible to deploy the bot only in my environment and make it available to my clients somehow?"},{"owner":{"account_id":2431958,"reputation":11739,"user_id":2122672,"accept_rate":89,"display_name":"Kyle Delaney"},"score":0,"creation_date":1615506847,"post_id":66546216,"comment_id":117719374,"body_markdown":"That&#39;s not one question, that&#39;s three questions. Are you trying to get those questions answered, or do you want the questions from your original post answered?","body":"That&#39;s not one question, that&#39;s three questions. Are you trying to get those questions answered, or do you want the questions from your original post answered?"},{"owner":{"account_id":8407603,"reputation":51,"user_id":6310624,"display_name":"Artur P."},"score":0,"creation_date":1615792504,"post_id":66546216,"comment_id":117790836,"body_markdown":"Sorry for delay. You have right. I think I already have an answer for my question from original post - I have to use bot service to send Teams messages to particular users. So could you please answer the question from my last comment? I will update a question to comply with the rules.","body":"Sorry for delay. You have right. I think I already have an answer for my question from original post - I have to use bot service to send Teams messages to particular users. So could you please answer the question from my last comment? I will update a question to comply with the rules."},{"owner":{"account_id":346965,"reputation":2436,"user_id":680802,"display_name":"Dev"},"score":0,"creation_date":1615818779,"post_id":66546216,"comment_id":117802076,"body_markdown":"Yes try the approach what updated by Kyle and see if it fits your scenario, as the application permission is not supported at this point. Being said that, if you want Microsoft to consider implementing the feature then upvote the related [Microsoft Uservoice](https://microsoftgraph.uservoice.com/forums/920506-microsoft-graph-feature-requests/suggestions/41166340-add-support-for-application-permission-to-send-mes) as well.","body":"Yes try the approach what updated by Kyle and see if it fits your scenario, as the application permission is not supported at this point. Being said that, if you want Microsoft to consider implementing the feature then upvote the related <a href=\"https://microsoftgraph.uservoice.com/forums/920506-microsoft-graph-feature-requests/suggestions/41166340-add-support-for-application-permission-to-send-mes\" rel=\"nofollow noreferrer\">Microsoft Uservoice</a> as well."},{"owner":{"account_id":2431958,"reputation":11739,"user_id":2122672,"accept_rate":89,"display_name":"Kyle Delaney"},"score":0,"creation_date":1617145483,"post_id":66546216,"comment_id":118221278,"body_markdown":"Is my answer acceptable? (Since there are multiple other people in this thread, you will need to @ mention me if you want me to see your reply.)","body":"Is my answer acceptable? (Since there are multiple other people in this thread, you will need to @ mention me if you want me to see your reply.)"}],"answers":[{"tags":[],"owner":{"account_id":2431958,"reputation":11739,"user_id":2122672,"accept_rate":89,"display_name":"Kyle Delaney"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1616106390,"creation_date":1616106390,"answer_id":66699999,"question_id":66546216,"body_markdown":"What you&#39;re trying to do is called proactive messaging and you can read about it here: https://learn.microsoft.com/microsoftteams/platform/bots/how-to/conversations/send-proactive-messages\r\n\r\nYou can deploy your bot wherever you like so long as you make sure the Teams app is published. You can make your bot available to everyone by publishing to the Teams app store, also called AppSource: https://learn.microsoft.com/microsoftteams/platform/concepts/deploy-and-publish/appsource/publish\r\n\r\nIf you don&#39;t want the app to be available to everyone, there may be a way to publish it to individual app catalogs: https://learn.microsoft.com/MicrosoftTeams/manage-apps","title":"Sending Teams chat message to person/channel from java service","body":"<p>What you're trying to do is called proactive messaging and you can read about it here: <a href=\"https://learn.microsoft.com/microsoftteams/platform/bots/how-to/conversations/send-proactive-messages\" rel=\"nofollow noreferrer\">https://learn.microsoft.com/microsoftteams/platform/bots/how-to/conversations/send-proactive-messages</a></p>\n<p>You can deploy your bot wherever you like so long as you make sure the Teams app is published. You can make your bot available to everyone by publishing to the Teams app store, also called AppSource: <a href=\"https://learn.microsoft.com/microsoftteams/platform/concepts/deploy-and-publish/appsource/publish\" rel=\"nofollow noreferrer\">https://learn.microsoft.com/microsoftteams/platform/concepts/deploy-and-publish/appsource/publish</a></p>\n<p>If you don't want the app to be available to everyone, there may be a way to publish it to individual app catalogs: <a href=\"https://learn.microsoft.com/MicrosoftTeams/manage-apps\" rel=\"nofollow noreferrer\">https://learn.microsoft.com/MicrosoftTeams/manage-apps</a></p>\n"},{"tags":[],"owner":{"account_id":12419314,"reputation":535,"user_id":11968199,"display_name":"Maksym Kosenko"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1692092428,"creation_date":1692092428,"answer_id":76904843,"question_id":66546216,"body_markdown":"There is a way to easily send a message to a channel, but not to a direct message to a person though. To achiever so you can follow the official [documentation][1]\r\nIn other words you can add/setup an incoming web hook to a channel, grab the link provided by it and use a CURL request to send a message like so:\r\n\r\n    curl -H &quot;Content-Type: application/json&quot; -d &quot;{\\&quot;text\\&quot;: \\&quot;test\\&quot;}&quot; https://uri-provided_by_hook\r\nHopefully, there is no need to inform about how to execute an http request through Java code. \r\n\r\n\r\n  [1]: https://learn.microsoft.com/en-us/microsoftteams/platform/webhooks-and-connectors/how-to/add-incoming-webhook?tabs=dotnet","title":"Sending Teams chat message to person/channel from java service","body":"<p>There is a way to easily send a message to a channel, but not to a direct message to a person though. To achiever so you can follow the official <a href=\"https://learn.microsoft.com/en-us/microsoftteams/platform/webhooks-and-connectors/how-to/add-incoming-webhook?tabs=dotnet\" rel=\"nofollow noreferrer\">documentation</a>\nIn other words you can add/setup an incoming web hook to a channel, grab the link provided by it and use a CURL request to send a message like so:</p>\n<pre><code>curl -H &quot;Content-Type: application/json&quot; -d &quot;{\\&quot;text\\&quot;: \\&quot;test\\&quot;}&quot; https://uri-provided_by_hook\n</code></pre>\n<p>Hopefully, there is no need to inform about how to execute an http request through Java code.</p>\n"}],"owner":{"account_id":8407603,"reputation":51,"user_id":6310624,"display_name":"Artur P."},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":5721,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":2,"score":2,"last_activity_date":1692092428,"creation_date":1615290082,"question_id":66546216,"body_markdown":"I need to send a Teams message to user/channel from the java service. These are notifications about events that happen in the application (e.g. when someone sells a product, they should receive a message on the teams that the product has been sold). I have already configured Microsoft Graph API for my application in Azure but as far as I know it is not possible to send message directly to users using &quot;Application&quot; permissions. ([DOCS][1])\r\n\r\nIs it any walk around for this restriction? Can I use a newly created account specifically for my purposes to authorize from the Java service in graph API and then sending messages to users?\r\n\r\nI also found information about bots and sending proactive notifications to users. Is it possible to use it in my case as a proxy between java app and Teams user?\r\n\r\nIf I have multiple customers from multiple Microsoft organizations and I want to provide them my bot with proactive notification feature How should I deploy it? Does each client have to provide me an access to the Microsoft AD with application permissions and add my bot to his Bot Service? Or it is possible to deploy the bot only in my environment and make it available to my clients somehow?  \r\n\r\n  [1]: https://learn.microsoft.com/en-us/graph/api/chat-post?view=graph-rest-beta&amp;tabs=http","title":"Sending Teams chat message to person/channel from java service","body":"<p>I need to send a Teams message to user/channel from the java service. These are notifications about events that happen in the application (e.g. when someone sells a product, they should receive a message on the teams that the product has been sold). I have already configured Microsoft Graph API for my application in Azure but as far as I know it is not possible to send message directly to users using &quot;Application&quot; permissions. (<a href=\"https://learn.microsoft.com/en-us/graph/api/chat-post?view=graph-rest-beta&amp;tabs=http\" rel=\"nofollow noreferrer\">DOCS</a>)</p>\n<p>Is it any walk around for this restriction? Can I use a newly created account specifically for my purposes to authorize from the Java service in graph API and then sending messages to users?</p>\n<p>I also found information about bots and sending proactive notifications to users. Is it possible to use it in my case as a proxy between java app and Teams user?</p>\n<p>If I have multiple customers from multiple Microsoft organizations and I want to provide them my bot with proactive notification feature How should I deploy it? Does each client have to provide me an access to the Microsoft AD with application permissions and add my bot to his Bot Service? Or it is possible to deploy the bot only in my environment and make it available to my clients somehow?</p>\n"},{"tags":["java","spring-boot"],"comments":[{"owner":{"account_id":1658807,"reputation":31819,"user_id":1527544,"accept_rate":54,"display_name":"Antoniossss"},"score":0,"creation_date":1692031035,"post_id":76900474,"comment_id":135567659,"body_markdown":"I see no spring boot application here, only plain Java app","body":"I see no spring boot application here, only plain Java app"},{"owner":{"account_id":2679463,"reputation":2502,"user_id":2315104,"accept_rate":42,"display_name":"user2315104"},"score":0,"creation_date":1692092174,"post_id":76900474,"comment_id":135574735,"body_markdown":"@Antoniossss\nplease see the edit 1 . Using spring Initializer , created springBoot application .","body":"@Antoniossss please see the edit 1 . Using spring Initializer , created springBoot application ."},{"owner":{"account_id":1658807,"reputation":31819,"user_id":1527544,"accept_rate":54,"display_name":"Antoniossss"},"score":0,"creation_date":1692092537,"post_id":76900474,"comment_id":135574792,"body_markdown":"Still there is NO SRPING BOOT APP bootstraping in your `ValueTest` class. Having `ValueresourcesApplication` somewhere in your classpath means literally nothing.","body":"Still there is NO SRPING BOOT APP bootstraping in your <code>ValueTest</code> class. Having <code>ValueresourcesApplication</code> somewhere in your classpath means literally nothing."},{"owner":{"account_id":2679463,"reputation":2502,"user_id":2315104,"accept_rate":42,"display_name":"user2315104"},"score":0,"creation_date":1692093846,"post_id":76900474,"comment_id":135575030,"body_markdown":"Sorry , not getting @Antoniossss. Can you please helm me in code","body":"Sorry , not getting @Antoniossss. Can you please helm me in code"},{"owner":{"account_id":1658807,"reputation":31819,"user_id":1527544,"accept_rate":54,"display_name":"Antoniossss"},"score":1,"creation_date":1692113546,"post_id":76900474,"comment_id":135578876,"body_markdown":"Run `ValueresourcesApplication` not `ValueTest`","body":"Run <code>ValueresourcesApplication</code> not <code>ValueTest</code>"}],"owner":{"account_id":2679463,"reputation":2502,"user_id":2315104,"accept_rate":42,"display_name":"user2315104"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":37,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1692092113,"creation_date":1692028819,"question_id":76900474,"body_markdown":"Im newbie in java and trying to read values from application.properties file \r\nhere is the code \r\n\r\n    @Service\r\n    @Component\r\n    @Configuration\r\n    public class ReadTest {\r\n    \t\r\n    \t   @Value(&quot;${product.page.size}&quot;)\r\n    \t    public  Integer pageSize;\r\n        \r\n    \t   @Autowired   \r\n    \tpublic Integer getPageSize() {\r\n    \t\treturn pageSize;\r\n    \t}\r\n    \r\n    \tpublic void setPageSize(Integer pageSize) {\r\n    \t\tthis.pageSize = pageSize;\r\n    \t}\r\n    \r\n    \t@Autowired   \r\n    \tpublic static void main(String[] args) {\r\n    \t\t// TODO Auto-generated method stub\r\n    \t\t\r\n    \t\tReadTest r = new ReadTest();\r\n    \t\t\r\n    \t\tSystem.out.println(r.getPageSize());\r\n    \r\n    \t}\r\n    \r\n    }\r\n\r\nIm getting output as null.\r\nnot able to understand where is the problem. I read the docs but no luck \r\n\r\nreferences : \r\nhttps://www.codejava.net/frameworks/spring-boot/read-values-from-application-properties-file\r\nhttps://www.baeldung.com/properties-with-spring\r\n\r\nplease suggest . Is this the write approach ?\r\n\r\n**EDIT 1** \r\n\r\nI modified the entire code . Here is the Latest one :\r\n\r\n**ValueresourcesApplication.java**\r\n\r\n    package valuetest.valueresources;\r\n    \r\n    import org.springframework.boot.SpringApplication;\r\n    import org.springframework.boot.autoconfigure.SpringBootApplication;\r\n    \r\n    @SpringBootApplication\r\n    public class ValueresourcesApplication {\r\n    \r\n    \tpublic static void main(String[] args) {\r\n    \t\tSpringApplication.run(ValueresourcesApplication.class, args);\r\n    \t}\r\n    \r\n    }\r\n\r\n**ValueTest.java**\r\n\r\n\r\n    @Service\r\n    @Configuration\r\n    public class ValueTest {\r\n    \t\r\n    \t  @Value(&quot;${product.page.size}&quot;)\r\n    \t    private static Integer pageSize;\r\n    \r\n    \tpublic static void main(String[] args) {\r\n    \t\t// TODO Auto-generated method stub\r\n    \t\t\r\n    \t\tSystem.out.println(pageSize);\r\n    \r\n    \t}\r\n    \r\n    }\r\n\r\nNow , when Im running the main method of ValueTest , the pagesize value is not getting printed. \r\n\r\nPlease help \r\n\r\n\r\n\r\n","title":"Not able to read application.properties file using Annotation","body":"<p>Im newbie in java and trying to read values from application.properties file\nhere is the code</p>\n<pre><code>@Service\n@Component\n@Configuration\npublic class ReadTest {\n    \n       @Value(&quot;${product.page.size}&quot;)\n        public  Integer pageSize;\n    \n       @Autowired   \n    public Integer getPageSize() {\n        return pageSize;\n    }\n\n    public void setPageSize(Integer pageSize) {\n        this.pageSize = pageSize;\n    }\n\n    @Autowired   \n    public static void main(String[] args) {\n        // TODO Auto-generated method stub\n        \n        ReadTest r = new ReadTest();\n        \n        System.out.println(r.getPageSize());\n\n    }\n\n}\n</code></pre>\n<p>Im getting output as null.\nnot able to understand where is the problem. I read the docs but no luck</p>\n<p>references :\n<a href=\"https://www.codejava.net/frameworks/spring-boot/read-values-from-application-properties-file\" rel=\"nofollow noreferrer\">https://www.codejava.net/frameworks/spring-boot/read-values-from-application-properties-file</a>\n<a href=\"https://www.baeldung.com/properties-with-spring\" rel=\"nofollow noreferrer\">https://www.baeldung.com/properties-with-spring</a></p>\n<p>please suggest . Is this the write approach ?</p>\n<p><strong>EDIT 1</strong></p>\n<p>I modified the entire code . Here is the Latest one :</p>\n<p><strong>ValueresourcesApplication.java</strong></p>\n<pre><code>package valuetest.valueresources;\n\nimport org.springframework.boot.SpringApplication;\nimport org.springframework.boot.autoconfigure.SpringBootApplication;\n\n@SpringBootApplication\npublic class ValueresourcesApplication {\n\n    public static void main(String[] args) {\n        SpringApplication.run(ValueresourcesApplication.class, args);\n    }\n\n}\n</code></pre>\n<p><strong>ValueTest.java</strong></p>\n<pre><code>@Service\n@Configuration\npublic class ValueTest {\n    \n      @Value(&quot;${product.page.size}&quot;)\n        private static Integer pageSize;\n\n    public static void main(String[] args) {\n        // TODO Auto-generated method stub\n        \n        System.out.println(pageSize);\n\n    }\n\n}\n</code></pre>\n<p>Now , when Im running the main method of ValueTest , the pagesize value is not getting printed.</p>\n<p>Please help</p>\n"},{"tags":["java","spring-boot","spring-aop"],"comments":[{"owner":{"account_id":2712514,"reputation":10118,"user_id":2340612,"accept_rate":83,"display_name":"user2340612"},"score":0,"creation_date":1692093416,"post_id":76904804,"comment_id":135574944,"body_markdown":"Does this answer your question? [Spring - AspectJ pointcut for constructor object with annotation](https://stackoverflow.com/questions/27527495/spring-aspectj-pointcut-for-constructor-object-with-annotation)","body":"Does this answer your question? <a href=\"https://stackoverflow.com/questions/27527495/spring-aspectj-pointcut-for-constructor-object-with-annotation\">Spring - AspectJ pointcut for constructor object with annotation</a>"},{"owner":{"account_id":21181405,"reputation":15,"user_id":15575730,"display_name":"nghihoang2207"},"score":0,"creation_date":1692094899,"post_id":76904804,"comment_id":135575196,"body_markdown":"I&#39;ve tried, but it&#39;s not worked","body":"I&#39;ve tried, but it&#39;s not worked"},{"owner":{"account_id":2712514,"reputation":10118,"user_id":2340612,"accept_rate":83,"display_name":"user2340612"},"score":0,"creation_date":1692094984,"post_id":76904804,"comment_id":135575209,"body_markdown":"what have you tried specifically? Because the accepted answer says &quot;Spring AOP does not support constructor interception, you do need full AspectJ for it&quot;","body":"what have you tried specifically? Because the accepted answer says &quot;Spring AOP does not support constructor interception, you do need full AspectJ for it&quot;"},{"owner":{"account_id":21181405,"reputation":15,"user_id":15575730,"display_name":"nghihoang2207"},"score":0,"creation_date":1692095503,"post_id":76904804,"comment_id":135575307,"body_markdown":"i want to change value of systemType variable in constructor of DatabaseServiceImpl. This value will be changed base on the token in function &quot;Before()&quot;  of AOP class","body":"i want to change value of systemType variable in constructor of DatabaseServiceImpl. This value will be changed base on the token in function &quot;Before()&quot;  of AOP class"},{"owner":{"account_id":2712514,"reputation":10118,"user_id":2340612,"accept_rate":83,"display_name":"user2340612"},"score":0,"creation_date":1692096664,"post_id":76904804,"comment_id":135575494,"body_markdown":"yeah I get that, but according to the accepted answer I linked above, this isn&#39;t possible with plain Spring AOP and you need to use the full AspectJ capabilities instead","body":"yeah I get that, but according to the accepted answer I linked above, this isn&#39;t possible with plain Spring AOP and you need to use the full AspectJ capabilities instead"},{"owner":{"account_id":1087271,"reputation":64101,"user_id":1082681,"accept_rate":90,"display_name":"kriegaex"},"score":0,"creation_date":1692240220,"post_id":76904804,"comment_id":135597629,"body_markdown":"_&quot;I&#39;ve tried, but it&#39;s not worked&quot;_ - What have you tried? You did not show. Please post a minimal, complete reproducer (ideally a small Maven project) on GitHub, if you are unable to explain. Just let your code speak. Then, I can help you.","body":"<i>&quot;I&#39;ve tried, but it&#39;s not worked&quot;</i> - What have you tried? You did not show. Please post a minimal, complete reproducer (ideally a small Maven project) on GitHub, if you are unable to explain. Just let your code speak. Then, I can help you."},{"owner":{"account_id":1087271,"reputation":64101,"user_id":1082681,"accept_rate":90,"display_name":"kriegaex"},"score":0,"creation_date":1692240372,"post_id":76904804,"comment_id":135597638,"body_markdown":"And please, use `@Aspect @Component` for your aspects, not `@Configuration`. An aspect is **not** a configuration. Config classes are wired differently from regular components. I really wonder why I see this anti-pattern so often. There must be one bogus source, which everybody is copying the same faulty code from. This will not solve this particular problem here, because you need native AspectJ, but it shall help you to avoid problems with Spring AOP aspects.","body":"And please, use <code>@Aspect @Component</code> for your aspects, not <code>@Configuration</code>. An aspect is <b>not</b> a configuration. Config classes are wired differently from regular components. I really wonder why I see this anti-pattern so often. There must be one bogus source, which everybody is copying the same faulty code from. This will not solve this particular problem here, because you need native AspectJ, but it shall help you to avoid problems with Spring AOP aspects."}],"owner":{"account_id":21181405,"reputation":15,"user_id":15575730,"display_name":"nghihoang2207"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":44,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1692092020,"creation_date":1692092020,"question_id":76904804,"body_markdown":"I want to get value of systemType variable from login token everytime I access to API, so I&#39;ve written an AOP class :\r\n\r\n```\r\n@Aspect\r\n@Configuration\r\npublic class AspectDatabaseService {\r\n\tLogger logger = LoggerFactory.getLogger(AspectDatabaseService.class);\r\n\tpublic int systemType;\r\n\tpublic int getSystemType() {\r\n\t\treturn systemType;\r\n\t}\r\n\t\r\n\tpublic void setSystemType(int systemType) {\r\n\t\tthis.systemType = systemType;\r\n\t}\r\n\t\r\n\t@Before(&quot;execution(* com.toshiba.mwcloud.gs.dbaas.service.impl.DatabaseServiceImpl.*(..))&quot;)\r\n\tpublic void before(JoinPoint joinPoint) {\r\n.....\r\n\t\tsystemType = getSystemTypeFromToken(token);\r\n\t\tlogger.info(&quot;before called {0}&quot;, joinPoint.toString());\r\n\t}\r\n\t\r\n\tprivate HttpServletRequest getHttpServletRequest() {\r\n           ......\r\n\t}\r\n\t\r\n\tprivate int getSystemTypeFromToken(String token) {\r\n\t......\r\n\t}\r\n}\r\n```\r\n\r\nAnd I have a class with constructor like this \r\n\r\n```\r\npublic DatabaseServiceImpl(SingleDatabaseServiceImpl singleDatabaseService,\r\n\t\t\tMultiDatabaseServiceImpl multiDatabaseServiceImpl, OperatorDatabaseServiceImpl operatorDatabaseServiceImpl,\r\n\t\t\tAspectDatabaseService aspectDatabaseService) {\r\n\t\tthis.aspectDatabaseService = aspectDatabaseService;\r\n\t\tthis.systemType = aspectDatabaseService.getSystemType();\r\n\t\tif (systemType == SystemType.SINGLE.getCode()) {\r\n\t\t\tthis.databaseAbstractService = singleDatabaseService;\r\n\t\t} else if (systemType == SystemType.MULTI.getCode()) {\r\n\t\t\tthis.databaseAbstractService = multiDatabaseServiceImpl;\r\n\t\t} else {\r\n\t\t\tthis.databaseAbstractService = operatorDatabaseServiceImpl;\r\n\t\t}\r\n\t}\r\n```\r\n\r\nBut my AOP class is not worked, value of systemType in constructor of class \r\nDatabaseServiceImpl always returns 0 because Constructor still init before run AOP class\r\n\r\nWhat should I do to change value in constructor ? Thanks a lot","title":"How to change value of parameter in construction with AOP","body":"<p>I want to get value of systemType variable from login token everytime I access to API, so I've written an AOP class :</p>\n<pre><code>@Aspect\n@Configuration\npublic class AspectDatabaseService {\n    Logger logger = LoggerFactory.getLogger(AspectDatabaseService.class);\n    public int systemType;\n    public int getSystemType() {\n        return systemType;\n    }\n    \n    public void setSystemType(int systemType) {\n        this.systemType = systemType;\n    }\n    \n    @Before(&quot;execution(* com.toshiba.mwcloud.gs.dbaas.service.impl.DatabaseServiceImpl.*(..))&quot;)\n    public void before(JoinPoint joinPoint) {\n.....\n        systemType = getSystemTypeFromToken(token);\n        logger.info(&quot;before called {0}&quot;, joinPoint.toString());\n    }\n    \n    private HttpServletRequest getHttpServletRequest() {\n           ......\n    }\n    \n    private int getSystemTypeFromToken(String token) {\n    ......\n    }\n}\n</code></pre>\n<p>And I have a class with constructor like this</p>\n<pre><code>public DatabaseServiceImpl(SingleDatabaseServiceImpl singleDatabaseService,\n            MultiDatabaseServiceImpl multiDatabaseServiceImpl, OperatorDatabaseServiceImpl operatorDatabaseServiceImpl,\n            AspectDatabaseService aspectDatabaseService) {\n        this.aspectDatabaseService = aspectDatabaseService;\n        this.systemType = aspectDatabaseService.getSystemType();\n        if (systemType == SystemType.SINGLE.getCode()) {\n            this.databaseAbstractService = singleDatabaseService;\n        } else if (systemType == SystemType.MULTI.getCode()) {\n            this.databaseAbstractService = multiDatabaseServiceImpl;\n        } else {\n            this.databaseAbstractService = operatorDatabaseServiceImpl;\n        }\n    }\n</code></pre>\n<p>But my AOP class is not worked, value of systemType in constructor of class\nDatabaseServiceImpl always returns 0 because Constructor still init before run AOP class</p>\n<p>What should I do to change value in constructor ? Thanks a lot</p>\n"},{"tags":["java","generics","comparable"],"comments":[{"owner":{"account_id":6606677,"reputation":1024,"user_id":5103317,"display_name":"Old Dog Programmer"},"score":3,"creation_date":1692038270,"post_id":76901204,"comment_id":135568917,"body_markdown":"If you get compiler errors, your question should include copies of those errors.","body":"If you get compiler errors, your question should include copies of those errors."},{"owner":{"account_id":19435569,"reputation":1567,"user_id":21105992,"display_name":"teapot418"},"score":0,"creation_date":1692039345,"post_id":76901204,"comment_id":135569085,"body_markdown":"How does java&#39;s own library do it? There&#39;s no mention of Comparable in the [API method declarations](https://docs.oracle.com/javase/8/docs/api/java/util/TreeSet.html), if you didn&#39;t provide a comparator and the element is not comparable, it blows up with a ClassCastException at runtime.","body":"How does java&#39;s own library do it? There&#39;s no mention of Comparable in the <a href=\"https://docs.oracle.com/javase/8/docs/api/java/util/TreeSet.html\" rel=\"nofollow noreferrer\">API method declarations</a>, if you didn&#39;t provide a comparator and the element is not comparable, it blows up with a ClassCastException at runtime."},{"owner":{"account_id":195854,"reputation":159194,"user_id":438992,"accept_rate":90,"display_name":"Dave Newton"},"score":3,"creation_date":1692042863,"post_id":76901204,"comment_id":135569632,"body_markdown":"How would a binary tree work w/ uncomparable items?","body":"How would a binary tree work w/ uncomparable items?"}],"answers":[{"tags":[],"owner":{"account_id":1689973,"reputation":37330,"user_id":1552534,"display_name":"WJS"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1692042444,"creation_date":1692042444,"answer_id":76901778,"question_id":76901204,"body_markdown":"Just check and see if a comparator has been provided.  If so, use it.  Otherwise, `presume` that the objects implement it.  The downside is that if the objects don&#39;t implement it you will get a runtime exception instead of a compiler error.\r\n```\r\nclass BinaryTree&lt;E&gt; {\r\n\r\n    private Comparator&lt;E&gt; comparator = null;\r\n\r\n  \r\n    public BinaryTree() {\r\n    }\r\n    \r\n    public BinaryTree(Comparator&lt;E&gt; myComparator) {\r\n          this.comparator = myComparator;\r\n    }\r\n    \r\n    public void traverse() {\r\n        if (comparator != null) {\r\n            //use it\r\n        } else {\r\n            // compare Objects presuming they implement comparable.\r\n        }\r\n    }\r\n}\r\n","title":"Best way to deal with some classes implementing comparable and some not in a Binary search tree","body":"<p>Just check and see if a comparator has been provided.  If so, use it.  Otherwise, <code>presume</code> that the objects implement it.  The downside is that if the objects don't implement it you will get a runtime exception instead of a compiler error.</p>\n<pre><code>class BinaryTree&lt;E&gt; {\n\n    private Comparator&lt;E&gt; comparator = null;\n\n  \n    public BinaryTree() {\n    }\n    \n    public BinaryTree(Comparator&lt;E&gt; myComparator) {\n          this.comparator = myComparator;\n    }\n    \n    public void traverse() {\n        if (comparator != null) {\n            //use it\n        } else {\n            // compare Objects presuming they implement comparable.\n        }\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":23783500,"reputation":5175,"user_id":17795888,"display_name":"Chaosfire"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1692091438,"creation_date":1692042921,"answer_id":76901814,"question_id":76901204,"body_markdown":"Normally this use case is handled by casting. See [TreeSet][1] for example. One way to do it would be like this:\r\n```\r\npublic BinaryTree() {\r\n  this((e1, e2) -&gt; ((Comparable&lt;E&gt;) e1).compareTo(e2));\r\n}\r\n```\r\nNaturally, this will throw [ClassCastException][2] at runtime, if you try to add elements, which do not implement [Comparable][3].\r\n\r\nI would do it with a [static factory method][4]. Like this you can declare the type variable to be bound as a subclass of Comparable:\r\n```\r\npublic class BinaryTree&lt;E&gt; {\r\n  \r\n  private Comparator&lt;E&gt; comparator;\r\n\r\n  public static &lt;T extends Comparable&lt;T&gt;&gt; BinaryTree&lt;T&gt; fromComparable() {\r\n    return new BinaryTree&lt;&gt;(Comparable::compareTo);\r\n  }\r\n\r\n  public BinaryTree(Comparator&lt;E&gt; comparator) { \r\n    this.comparator = comparator;\r\n  }\r\n}\r\n```\r\nThe compiler now won&#39;t allow you to create a `BinaryTree` with non-comparable elements:\r\n```\r\nBinaryTree&lt;Integer&gt; tree1 = BinaryTree.fromComparable(); //compiles succesfully\r\nBinaryTree&lt;NonComparableClass&gt; tree2 = BinaryTree.fromComparable(); //compilation error\r\n```\r\n\r\n  [1]: https://docs.oracle.com/javase/8/docs/api/java/util/TreeSet.html#TreeSet--\r\n  [2]: https://docs.oracle.com/javase%2F7%2Fdocs%2Fapi%2F%2F/java/lang/ClassCastException.html\r\n  [3]: https://docs.oracle.com/javase/8/docs/api/java/lang/Comparable.html\r\n  [4]: https://stackoverflow.com/questions/929021/what-are-static-factory-methods","title":"Best way to deal with some classes implementing comparable and some not in a Binary search tree","body":"<p>Normally this use case is handled by casting. See <a href=\"https://docs.oracle.com/javase/8/docs/api/java/util/TreeSet.html#TreeSet--\" rel=\"nofollow noreferrer\">TreeSet</a> for example. One way to do it would be like this:</p>\n<pre><code>public BinaryTree() {\n  this((e1, e2) -&gt; ((Comparable&lt;E&gt;) e1).compareTo(e2));\n}\n</code></pre>\n<p>Naturally, this will throw <a href=\"https://docs.oracle.com/javase%2F7%2Fdocs%2Fapi%2F%2F/java/lang/ClassCastException.html\" rel=\"nofollow noreferrer\">ClassCastException</a> at runtime, if you try to add elements, which do not implement <a href=\"https://docs.oracle.com/javase/8/docs/api/java/lang/Comparable.html\" rel=\"nofollow noreferrer\">Comparable</a>.</p>\n<p>I would do it with a <a href=\"https://stackoverflow.com/questions/929021/what-are-static-factory-methods\">static factory method</a>. Like this you can declare the type variable to be bound as a subclass of Comparable:</p>\n<pre><code>public class BinaryTree&lt;E&gt; {\n  \n  private Comparator&lt;E&gt; comparator;\n\n  public static &lt;T extends Comparable&lt;T&gt;&gt; BinaryTree&lt;T&gt; fromComparable() {\n    return new BinaryTree&lt;&gt;(Comparable::compareTo);\n  }\n\n  public BinaryTree(Comparator&lt;E&gt; comparator) { \n    this.comparator = comparator;\n  }\n}\n</code></pre>\n<p>The compiler now won't allow you to create a <code>BinaryTree</code> with non-comparable elements:</p>\n<pre><code>BinaryTree&lt;Integer&gt; tree1 = BinaryTree.fromComparable(); //compiles succesfully\nBinaryTree&lt;NonComparableClass&gt; tree2 = BinaryTree.fromComparable(); //compilation error\n</code></pre>\n"}],"owner":{"account_id":16782159,"reputation":21,"user_id":12456542,"display_name":"JoPoLu"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":65,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":2,"score":1,"last_activity_date":1692091438,"creation_date":1692036038,"question_id":76901204,"body_markdown":"I am looking for suggestions on how to handle some possible elements implementing comparable and some not. \r\n\r\nI am currently trying to do it like this\r\n```java\r\nclass BinaryTree&lt;E&gt; { \r\n  private Comparator&lt;E&gt; comparator;\r\n  public &lt;T extends Comparable&lt;E&gt;&gt;() BinaryTree() {\r\n    comparator = (T a, T b) -&gt; a.compareTo(b)\r\n  }\r\n\r\n\r\n  public BinaryTree(Comparator&lt;E&gt; comparator) { \r\n    this.comparator = comparator\r\n  }\r\n}\r\n\r\n//rest of the class (add, remove etc)\r\n```\r\n And then the comparator variable is used. I cant get it to compile  tho. ","title":"Best way to deal with some classes implementing comparable and some not in a Binary search tree","body":"<p>I am looking for suggestions on how to handle some possible elements implementing comparable and some not.</p>\n<p>I am currently trying to do it like this</p>\n<pre class=\"lang-java prettyprint-override\"><code>class BinaryTree&lt;E&gt; { \n  private Comparator&lt;E&gt; comparator;\n  public &lt;T extends Comparable&lt;E&gt;&gt;() BinaryTree() {\n    comparator = (T a, T b) -&gt; a.compareTo(b)\n  }\n\n\n  public BinaryTree(Comparator&lt;E&gt; comparator) { \n    this.comparator = comparator\n  }\n}\n\n//rest of the class (add, remove etc)\n</code></pre>\n<p>And then the comparator variable is used. I cant get it to compile  tho.</p>\n"},{"tags":["java","pdf","grails","microsoft-graph-api","microsoft-graph-files"],"comments":[{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1689777956,"post_id":76722424,"comment_id":135262143,"body_markdown":"`if(resp.getHeaders().getContentType().toString().equals(&quot;application/pdf&quot;)){` is what you need, although I suspect the `toString` is redundant. You don&#39;t compare java `String` with `==`","body":"<code>if(resp.getHeaders().getContentType().toString().equals(&quot;app&zwnj;&#8203;lication&#47;pdf&quot;)){</code> is what you need, although I suspect the <code>toString</code> is redundant. You don&#39;t compare java <code>String</code> with <code>==</code>"},{"owner":{"account_id":18320732,"reputation":173,"user_id":13341552,"display_name":"Faizan Shaikh Sarkar"},"score":0,"creation_date":1689778089,"post_id":76722424,"comment_id":135262181,"body_markdown":"No, that condition is working perfectly fine. \n\nMy issue is that when I try to write pdf that I got in response I am seeing all the pages blank but the number of pages are correct, also the data I am receiving is correct as it is same as the one I receive in postman and the PDF is perfectly visible in postman so I think it has something to do with processing or decoding or idk before writing it to file.","body":"No, that condition is working perfectly fine.   My issue is that when I try to write pdf that I got in response I am seeing all the pages blank but the number of pages are correct, also the data I am receiving is correct as it is same as the one I receive in postman and the PDF is perfectly visible in postman so I think it has something to do with processing or decoding or idk before writing it to file."},{"owner":{"account_id":18320732,"reputation":173,"user_id":13341552,"display_name":"Faizan Shaikh Sarkar"},"score":0,"creation_date":1689778215,"post_id":76722424,"comment_id":135262204,"body_markdown":"@g00se basically I am not able to download(write it into local pdf file) it properly from response in java/grails.","body":"@g00se basically I am not able to download(write it into local pdf file) it properly from response in java/grails."},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":1,"creation_date":1689778278,"post_id":76722424,"comment_id":135262214,"body_markdown":"If it is, it&#39;s by sheer luck. You shouldn&#39;t get the body as a `String` - it *isn&#39;t* one. Which API are you using?","body":"If it is, it&#39;s by sheer luck. You shouldn&#39;t get the body as a <code>String</code> - it <i>isn&#39;t</i> one. Which API are you using?"},{"owner":{"account_id":18320732,"reputation":173,"user_id":13341552,"display_name":"Faizan Shaikh Sarkar"},"score":0,"creation_date":1689778618,"post_id":76722424,"comment_id":135262291,"body_markdown":"@g00se the language I am using is Groovy/grails/java the above code is in groovy that is why it is working fine also the ResponseEntity body is in text format only, I will attach a screenshot so you get the idea of the response.","body":"@g00se the language I am using is Groovy/grails/java the above code is in groovy that is why it is working fine also the ResponseEntity body is in text format only, I will attach a screenshot so you get the idea of the response."},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":1,"creation_date":1689778682,"post_id":76722424,"comment_id":135262314,"body_markdown":"Oh right, about the Groovy thing. But how can a binary file be in text format?","body":"Oh right, about the Groovy thing. But how can a binary file be in text format?"},{"owner":{"account_id":18320732,"reputation":173,"user_id":13341552,"display_name":"Faizan Shaikh Sarkar"},"score":0,"creation_date":1689778860,"post_id":76722424,"comment_id":135262358,"body_markdown":"@g00se I have attached the screenshot of the response, it is in text and content-type is &quot;application/pdf&quot;. I am confused myself maybe I guess it is in plain text pdf format?","body":"@g00se I have attached the screenshot of the response, it is in text and content-type is &quot;application/pdf&quot;. I am confused myself maybe I guess it is in plain text pdf format?"},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":1,"creation_date":1689779168,"post_id":76722424,"comment_id":135262424,"body_markdown":"I don&#39;t use Postman myself but maybe this is because you *asked for* text format. As you can see, all those weird characters in the response are basically telling you that the content can&#39;t be represented as a string, and shouldn&#39;t be requested as/parsed as one","body":"I don&#39;t use Postman myself but maybe this is because you <i>asked for</i> text format. As you can see, all those weird characters in the response are basically telling you that the content can&#39;t be represented as a string, and shouldn&#39;t be requested as/parsed as one"},{"owner":{"account_id":18320732,"reputation":173,"user_id":13341552,"display_name":"Faizan Shaikh Sarkar"},"score":0,"creation_date":1689779293,"post_id":76722424,"comment_id":135262460,"body_markdown":"The ResponseEntity body is receiving PDF data as a String only as I tried to check the class of the body and it displayed:- class java.lang.String\n\nSo yes the response is in String only, most likely some sort of plain pdf String data or maybe binary pdf data as string? maybe encoded? or something like that.\n\nI personally tried everything but none worked.","body":"The ResponseEntity body is receiving PDF data as a String only as I tried to check the class of the body and it displayed:- class java.lang.String  So yes the response is in String only, most likely some sort of plain pdf String data or maybe binary pdf data as string? maybe encoded? or something like that.  I personally tried everything but none worked."},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1689779448,"post_id":76722424,"comment_id":135262509,"body_markdown":"Let us [continue this discussion in chat](https://chat.stackoverflow.com/rooms/254572/discussion-between-g00se-and-faizan-shaikh-sarkar).","body":"Let us <a href=\"https://chat.stackoverflow.com/rooms/254572/discussion-between-g00se-and-faizan-shaikh-sarkar\">continue this discussion in chat</a>."}],"answers":[{"comments":[{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1692090756,"post_id":76904627,"comment_id":135574509,"body_markdown":"No need for 3rd party most probably: `return stream.readAllBytes()` Try-with-resources is your friend, too. Your exception handling is not correct either but I don&#39;t have time to go into that","body":"No need for 3rd party most probably: <code>return stream.readAllBytes()</code> Try-with-resources is your friend, too. Your exception handling is not correct either but I don&#39;t have time to go into that"}],"tags":[],"owner":{"account_id":18320732,"reputation":173,"user_id":13341552,"display_name":"Faizan Shaikh Sarkar"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1692090277,"creation_date":1692090277,"answer_id":76904627,"question_id":76722424,"body_markdown":"I wasn&#39;t able to find a exact solution but as I wanted to convert docx to PDF via the Micorsoft Graph, I was able to resolve it by using Microsoft Graph Java SDK. Using Microsoft Graph SDK I was able to get the converted PDF file as a InputStream and was able to get all the data perfectly.\r\n\r\n```\r\n//targetFormat is &quot;pdf&quot;\r\npublic static byte[] downloadConvertedFile(GraphServiceClient&lt;Request&gt; graphClient, String fileId, String targetFormat) throws IOException, ClientException {\r\n        try {\r\n            InputStream stream = graphClient\r\n                    .customRequest(&quot;/drives/&quot; + driveId + &quot;/items/&quot; + fileId + &quot;/content&quot;, InputStream.class)\r\n                    .buildRequest(new QueryOption(&quot;format&quot;, targetFormat))\r\n                    .get()\r\n            if (stream != null) {\r\n                return IOUtils.toByteArray(stream)\r\n            }\r\n        }catch(Exception ex){\r\n            throw new IOException(&quot;Failed to read file from response&quot;);\r\n        }\r\n    }\r\n```\r\n\r\n\r\n","title":"Not able to process and write pdf file from PDF response in java","body":"<p>I wasn't able to find a exact solution but as I wanted to convert docx to PDF via the Micorsoft Graph, I was able to resolve it by using Microsoft Graph Java SDK. Using Microsoft Graph SDK I was able to get the converted PDF file as a InputStream and was able to get all the data perfectly.</p>\n<pre><code>//targetFormat is &quot;pdf&quot;\npublic static byte[] downloadConvertedFile(GraphServiceClient&lt;Request&gt; graphClient, String fileId, String targetFormat) throws IOException, ClientException {\n        try {\n            InputStream stream = graphClient\n                    .customRequest(&quot;/drives/&quot; + driveId + &quot;/items/&quot; + fileId + &quot;/content&quot;, InputStream.class)\n                    .buildRequest(new QueryOption(&quot;format&quot;, targetFormat))\n                    .get()\n            if (stream != null) {\n                return IOUtils.toByteArray(stream)\n            }\n        }catch(Exception ex){\n            throw new IOException(&quot;Failed to read file from response&quot;);\n        }\n    }\n</code></pre>\n"}],"owner":{"account_id":18320732,"reputation":173,"user_id":13341552,"display_name":"Faizan Shaikh Sarkar"},"comment_count":10,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":125,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":76904627,"answer_count":1,"score":1,"last_activity_date":1692090277,"creation_date":1689777092,"question_id":76722424,"body_markdown":"I am trying to convert a docx into pdf, microsoft graph already provides a functionality for that but thing is I am getting a PDF in response with content type &quot;application/pdf&quot; as a string/text from microsoft graph. I know the response is correct as the PDF is visible correctly in Postman but when I try to write it to a file manually in java code I am not able to do it properly.\r\n\r\nI am able to create a PDF file of correct number of pages but the pdf has all blank pages.\r\n\r\nthe response body has text something like this:\r\n\r\n```\r\n%PDF-1.7\r\n%����\r\n1 0 obj\r\n&lt;&lt;/Type/Catalog/Pages 2 0 R/Lang(en) /StructTreeRoot 466 0 R/Outlines 420 0 R/MarkInfo&lt;&lt;/Marked true&gt;&gt;/Metadata 3921 0 R/ViewerPreferences 3922 0 R&gt;&gt;\r\nendobj\r\n2 0 obj\r\n&lt;&lt;/Type/Pages/Count 135/Kids[ 3 0 R 15 0 R 19 0 R 25 0 R 26 0 R 29 0 R 31 0 R 32 0 R 33 0 R 36 0 R 37 0 R 38 0 R 40 0 R 42 0 R 43 0 R 44 0 R 45 0 R 46 0 R 47 0 R 48 0 R 49 0 R 50 0 R 51 0 R 52 0 R 53 0 R 54 0 R 55 0 R 56 0 R 57 0 R 58 0 R 59 0 R 60 0 R 61 0 R 62 0 R 63 0 R 64 0 R 65 0 R 66 0 R 67 0 R 68 0 R 69 0 R 70 0 R 71 0 R 72 0 R 73 0 R 74 0 R 75 0 R 76 0 R 77 0 R 78 0 R 79 0 R 80 0 R 81 0 R 82 0 R 83 0 R 84 0 R 85 0 R 86 0 R 87 0 R 88 0 R 89 0 R 90 0 R 91 0 R 92 0 R 93 0 R 94 0 R 95 0 R 96 0 R 97 0 R 98 0 R 99 0 R 100 0 R 101 0 R 102 0 R 103 0 R 104 0 R 105 0 R 106 0 R 107 0 R 108 0 R 109 0 R 110 0 R 111 0 R 112 0 R 113 0 R 114 0 R 115 0 R 116 0 R 117 0 R 118 0 R 119 0 R 120 0 R 121 0 R 122 0 R 123 0 R 124 0 R 125 0 R 126 0 R 127 0 R 128 0 R 129 0 R 130 0 R 131 0 R 132 0 R 133 0 R 134 0 R 135 0 R 136 0 R 137 0 R 138 0 R 139 0 R 140 0 R 141 0 R 142 0 R 143 0 R 144 0 R 145 0 R 146 0 R 147 0 R 148 0 R 149 0 R 150 0 R 151 0 R 152 0 R 153 0 R 154 0 R 155 0 R 156 0 R 157 0 R 159 0 R 161 0 R 166 0 R 170 0 R 171 0 R 172 0 R] &gt;&gt;\r\nendobj\r\n3 0 obj\r\n&lt;&lt;/Type/Page/Parent 2 0 R/Resources&lt;&lt;/Font&lt;&lt;/F1 5 0 R/F2 9 0 R&gt;&gt;/ExtGState&lt;&lt;/GS7 7 0 R/GS8 8 0 R&gt;&gt;/XObject&lt;&lt;/Image11 11 0 R/Image13 13 0 R&gt;&gt;/ProcSet[/PDF/Text/ImageB/ImageC/ImageI] &gt;&gt;/MediaBox[ 0 0 612 792] /Contents 4 0 R/Group&lt;&lt;/Type/Group/S/Transparency/CS/DeviceRGB&gt;&gt;/Tabs/S/StructParents 0&gt;&gt;\r\nendobj\r\n4 0 obj\r\n&lt;&lt;/Filter/FlateDecode/Length 702&gt;&gt;\r\nstream\r\nx���Qo�0�ߑ��h��`� U����2-R�0���Mi�D�����~g�6�\t+Mh&quot;Y`|�w�;�=YU�]&lt;����=��x~��•�=��{/�&lt;��&quot;wg�7����ķ�������-�Q�%h!����༞\\%�����y�0�-��c���Иk4��1����|�a�`[,�`}vn[W�k����)��|&gt;�̣�o�u��h+��5��p&quot;D������N[�f�ˏ�/�2��\r\n```\r\n\r\nMY code:\r\n\r\n```\r\n\r\n            response= rest.get(url){\r\n                header &quot;Authorization&quot;, &quot;Bearer &quot;+updateBulkPublishPdfDetailsData.sharepointAccessToken\r\n            }\r\nRestResponse resp=sharepointUploadSummaryResponse.getResponseEntity()\r\n            if(resp.getHeaders().getContentType().toString()==&quot;application/pdf&quot;){\r\n                String pdfString=resp.body;\r\n                FileOutputStream out = new FileOutputStream(new File(&quot;C:\\\\Users\\\\faizanahemad.shaikh\\\\Downloads\\\\abcd.pdf&quot;));\r\n                out.write(pdfString.getBytes());\r\n                out.flush();\r\n                out.close();\r\n            }\r\n```\r\n\r\nBasically I am using groovy grails but java solution will work, I also tried all the available solutions like receiving it as blob or directly receiving it as bytearray or converting it to inputstream and writing it but none of them worked, funny thing is I know I am receiving correct response as I am able to download it well from postman.\r\n\r\nAlso I did notice the size of file created from response is a bit more in postman like slightly more for eg:\r\nthe file I create has size 1487 KB but the file I download from postman has 1563 KB and thing is both postman and my app receives same size of data, content-length is same for both: 1599780\r\n\r\nResponse:\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\nI know I am making some mistake in processing and writing the file\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/idKx6.png","title":"Not able to process and write pdf file from PDF response in java","body":"<p>I am trying to convert a docx into pdf, microsoft graph already provides a functionality for that but thing is I am getting a PDF in response with content type &quot;application/pdf&quot; as a string/text from microsoft graph. I know the response is correct as the PDF is visible correctly in Postman but when I try to write it to a file manually in java code I am not able to do it properly.</p>\n<p>I am able to create a PDF file of correct number of pages but the pdf has all blank pages.</p>\n<p>the response body has text something like this:</p>\n<pre><code>%PDF-1.7\n%����\n1 0 obj\n&lt;&lt;/Type/Catalog/Pages 2 0 R/Lang(en) /StructTreeRoot 466 0 R/Outlines 420 0 R/MarkInfo&lt;&lt;/Marked true&gt;&gt;/Metadata 3921 0 R/ViewerPreferences 3922 0 R&gt;&gt;\nendobj\n2 0 obj\n&lt;&lt;/Type/Pages/Count 135/Kids[ 3 0 R 15 0 R 19 0 R 25 0 R 26 0 R 29 0 R 31 0 R 32 0 R 33 0 R 36 0 R 37 0 R 38 0 R 40 0 R 42 0 R 43 0 R 44 0 R 45 0 R 46 0 R 47 0 R 48 0 R 49 0 R 50 0 R 51 0 R 52 0 R 53 0 R 54 0 R 55 0 R 56 0 R 57 0 R 58 0 R 59 0 R 60 0 R 61 0 R 62 0 R 63 0 R 64 0 R 65 0 R 66 0 R 67 0 R 68 0 R 69 0 R 70 0 R 71 0 R 72 0 R 73 0 R 74 0 R 75 0 R 76 0 R 77 0 R 78 0 R 79 0 R 80 0 R 81 0 R 82 0 R 83 0 R 84 0 R 85 0 R 86 0 R 87 0 R 88 0 R 89 0 R 90 0 R 91 0 R 92 0 R 93 0 R 94 0 R 95 0 R 96 0 R 97 0 R 98 0 R 99 0 R 100 0 R 101 0 R 102 0 R 103 0 R 104 0 R 105 0 R 106 0 R 107 0 R 108 0 R 109 0 R 110 0 R 111 0 R 112 0 R 113 0 R 114 0 R 115 0 R 116 0 R 117 0 R 118 0 R 119 0 R 120 0 R 121 0 R 122 0 R 123 0 R 124 0 R 125 0 R 126 0 R 127 0 R 128 0 R 129 0 R 130 0 R 131 0 R 132 0 R 133 0 R 134 0 R 135 0 R 136 0 R 137 0 R 138 0 R 139 0 R 140 0 R 141 0 R 142 0 R 143 0 R 144 0 R 145 0 R 146 0 R 147 0 R 148 0 R 149 0 R 150 0 R 151 0 R 152 0 R 153 0 R 154 0 R 155 0 R 156 0 R 157 0 R 159 0 R 161 0 R 166 0 R 170 0 R 171 0 R 172 0 R] &gt;&gt;\nendobj\n3 0 obj\n&lt;&lt;/Type/Page/Parent 2 0 R/Resources&lt;&lt;/Font&lt;&lt;/F1 5 0 R/F2 9 0 R&gt;&gt;/ExtGState&lt;&lt;/GS7 7 0 R/GS8 8 0 R&gt;&gt;/XObject&lt;&lt;/Image11 11 0 R/Image13 13 0 R&gt;&gt;/ProcSet[/PDF/Text/ImageB/ImageC/ImageI] &gt;&gt;/MediaBox[ 0 0 612 792] /Contents 4 0 R/Group&lt;&lt;/Type/Group/S/Transparency/CS/DeviceRGB&gt;&gt;/Tabs/S/StructParents 0&gt;&gt;\nendobj\n4 0 obj\n&lt;&lt;/Filter/FlateDecode/Length 702&gt;&gt;\nstream\nx���Qo�0�ߑ��h��`� U����2-R�0���Mi�D�����~g�6�   +Mh&quot;Y`|�w�;�=YU�]&lt;����=��x~��•�=��{/�&lt;��&quot;wg�7����ķ�������-�Q�%h!����༞\\%�����y�0�-��c���Иk4��1����|�a�`[,�`}vn[W�k����)��|&gt;�̣�o�u��h+��5��p&quot;D������N[�f�ˏ�/�2��\n</code></pre>\n<p>MY code:</p>\n<pre><code>\n            response= rest.get(url){\n                header &quot;Authorization&quot;, &quot;Bearer &quot;+updateBulkPublishPdfDetailsData.sharepointAccessToken\n            }\nRestResponse resp=sharepointUploadSummaryResponse.getResponseEntity()\n            if(resp.getHeaders().getContentType().toString()==&quot;application/pdf&quot;){\n                String pdfString=resp.body;\n                FileOutputStream out = new FileOutputStream(new File(&quot;C:\\\\Users\\\\faizanahemad.shaikh\\\\Downloads\\\\abcd.pdf&quot;));\n                out.write(pdfString.getBytes());\n                out.flush();\n                out.close();\n            }\n</code></pre>\n<p>Basically I am using groovy grails but java solution will work, I also tried all the available solutions like receiving it as blob or directly receiving it as bytearray or converting it to inputstream and writing it but none of them worked, funny thing is I know I am receiving correct response as I am able to download it well from postman.</p>\n<p>Also I did notice the size of file created from response is a bit more in postman like slightly more for eg:\nthe file I create has size 1487 KB but the file I download from postman has 1563 KB and thing is both postman and my app receives same size of data, content-length is same for both: 1599780</p>\n<p>Response:</p>\n<p><a href=\"https://i.stack.imgur.com/idKx6.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/idKx6.png\" alt=\"enter image description here\" /></a></p>\n<p>I know I am making some mistake in processing and writing the file</p>\n"},{"tags":["java","maven","intellij-idea","java-platform-module-system"],"comments":[{"owner":{"account_id":15064163,"reputation":13516,"user_id":10871900,"display_name":"dan1st is crying"},"score":1,"creation_date":1638442461,"post_id":70196098,"comment_id":124091268,"body_markdown":"If you use argfiles, you still need a JVM argument each time but you could try to tell your IDE to use that JVM argument for every invocation and add it to the `maven-exec-plugin` and similar (if used).","body":"If you use argfiles, you still need a JVM argument each time but you could try to tell your IDE to use that JVM argument for every invocation and add it to the <code>maven-exec-plugin</code> and similar (if used)."},{"owner":{"account_id":2273465,"reputation":15439,"user_id":2000323,"display_name":"Andrey"},"score":0,"creation_date":1638445449,"post_id":70196098,"comment_id":124092435,"body_markdown":"Are you running it via the Java main class in IDE? Check the https://stackoverflow.com/a/9846103/2000323 for the `exec-maven-plugin` example and how you can pass arguments to the Java Main class.","body":"Are you running it via the Java main class in IDE? Check the <a href=\"https://stackoverflow.com/a/9846103/2000323\">stackoverflow.com/a/9846103/2000323</a> for the <code>exec-maven-plugin</code> example and how you can pass arguments to the Java Main class."},{"owner":{"account_id":2105809,"reputation":3833,"user_id":1872168,"accept_rate":64,"display_name":"Crystark"},"score":0,"creation_date":1638460249,"post_id":70196098,"comment_id":124099330,"body_markdown":"It is a spring boot app so I&#39;m running it in IntelliJ with the classic &quot;Application&quot; configuration type. The exec-maven-plugin doesn&#39;t do much apparently regarding this. I had this working with the surfire plugin though. See the EDIT 2 i added for my latest findings","body":"It is a spring boot app so I&#39;m running it in IntelliJ with the classic &quot;Application&quot; configuration type. The exec-maven-plugin doesn&#39;t do much apparently regarding this. I had this working with the surfire plugin though. See the EDIT 2 i added for my latest findings"},{"owner":{"account_id":2273465,"reputation":15439,"user_id":2000323,"display_name":"Andrey"},"score":0,"creation_date":1638880914,"post_id":70196098,"comment_id":124200525,"body_markdown":"You can add `jvmArguments` into `spring-boot-maven-plugin`, see https://stackoverflow.com/a/67696568/2000323 and launch `spring-boot:run` Maven task from Maven tool window. But Spring Boot Application run configuration will not pick up these arguments automatically. Feel free to file a request for this: https://youtrack.jetbrains.com/issues/IDEA","body":"You can add <code>jvmArguments</code> into <code>spring-boot-maven-plugin</code>, see <a href=\"https://stackoverflow.com/a/67696568/2000323\">stackoverflow.com/a/67696568/2000323</a> and launch <code>spring-boot:run</code> Maven task from Maven tool window. But Spring Boot Application run configuration will not pick up these arguments automatically. Feel free to file a request for this: <a href=\"https://youtrack.jetbrains.com/issues/IDEA\" rel=\"nofollow noreferrer\">youtrack.jetbrains.com/issues/IDEA</a>"}],"answers":[{"tags":[],"owner":{"account_id":8036411,"reputation":50,"user_id":6059365,"display_name":"Jatin Kheradiya"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1638869462,"creation_date":1638869462,"answer_id":70257678,"question_id":70196098,"body_markdown":"You can use the option to add the JDK parameters in the maven plugins like surefire plugin.\r\n\r\n           &lt;plugin&gt;\r\n                &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n                &lt;artifactId&gt;maven-surefire-plugin&lt;/artifactId&gt;\r\n\t\t\t\t&lt;configuration&gt;\r\n                        &lt;argLine&gt;\r\n                            --add-opens java.base/java.time=ALL-UNNAMED\r\n                            ${surefireArgLine}\r\n                        &lt;/argLine&gt;\r\n                &lt;/configuration&gt;\r\n           &lt;/plugin&gt;\r\n\r\nI have tried the above approach for IntelliJ IDE and Java 17 (Temurin-17.0.1). It works fine on running via `java -jar` command, as well as on running the app via IDE.\r\n\r\nIf you have multiple such JVM options to add, try keeping those assigned to a property and use that property here in the argLine. ","title":"How can I specify --add-opens from a project level and make sure it is taken into account whatever the means to run my app?","body":"<p>You can use the option to add the JDK parameters in the maven plugins like surefire plugin.</p>\n<pre><code>       &lt;plugin&gt;\n            &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n            &lt;artifactId&gt;maven-surefire-plugin&lt;/artifactId&gt;\n            &lt;configuration&gt;\n                    &lt;argLine&gt;\n                        --add-opens java.base/java.time=ALL-UNNAMED\n                        ${surefireArgLine}\n                    &lt;/argLine&gt;\n            &lt;/configuration&gt;\n       &lt;/plugin&gt;\n</code></pre>\n<p>I have tried the above approach for IntelliJ IDE and Java 17 (Temurin-17.0.1). It works fine on running via <code>java -jar</code> command, as well as on running the app via IDE.</p>\n<p>If you have multiple such JVM options to add, try keeping those assigned to a property and use that property here in the argLine.</p>\n"},{"comments":[{"owner":{"account_id":24470605,"reputation":425,"user_id":18579129,"display_name":"Jake"},"score":0,"creation_date":1699627983,"post_id":74106951,"comment_id":136559537,"body_markdown":"This doesn&#39;t meet the requirements of the question. We shouldn&#39;t have to maintain the list here in our IDE configurations and also in some other file that specifies how to run our app in production, or in a CICD pipeline, or anywhere other than our IDE.","body":"This doesn&#39;t meet the requirements of the question. We shouldn&#39;t have to maintain the list here in our IDE configurations and also in some other file that specifies how to run our app in production, or in a CICD pipeline, or anywhere other than our IDE."}],"tags":[],"owner":{"account_id":3037164,"reputation":1912,"user_id":2574965,"display_name":"Pukhraj soni"},"comment_count":1,"down_vote_count":0,"up_vote_count":7,"is_accepted":false,"score":7,"last_activity_date":1666076579,"creation_date":1666076579,"answer_id":74106951,"question_id":70196098,"body_markdown":"Follow steps: **edit run/debug configuration -&gt; add the below option in VM options:**\r\n\r\n    --add-opens java.base/java.lang=ALL-UNNAMED\r\n\r\n","title":"How can I specify --add-opens from a project level and make sure it is taken into account whatever the means to run my app?","body":"<p>Follow steps: <strong>edit run/debug configuration -&gt; add the below option in VM options:</strong></p>\n<pre><code>--add-opens java.base/java.lang=ALL-UNNAMED\n</code></pre>\n"},{"comments":[{"owner":{"account_id":239746,"reputation":6175,"user_id":509565,"accept_rate":69,"display_name":"lrkwz"},"score":0,"creation_date":1695042250,"post_id":76675952,"comment_id":135967125,"body_markdown":"IMHO  you are missing  `&lt;jvmArguments&gt;--add-opens...` for the spring-boot:run configuration. Which unfortunately duplicates the declaration in pom.xml leading to possible errors.","body":"IMHO  you are missing  <code>&lt;jvmArguments&gt;--add-opens...</code> for the spring-boot:run configuration. Which unfortunately duplicates the declaration in pom.xml leading to possible errors."}],"tags":[],"owner":{"account_id":3366819,"reputation":2646,"user_id":2827181,"display_name":"Marc Le Bihan"},"comment_count":1,"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1692089753,"creation_date":1689222662,"answer_id":76675952,"question_id":70196098,"body_markdown":"I add here the current solution I&#39;m using.\r\n\r\nMy context is that _Spring-Boot_ generates the final executable through a `org.springframework.boot:spring-boot-maven-plugin:repackage` goal, on _Maven_ install phase.\r\n\r\nThe idea is to ask for an `org.apache.maven.plugins:maven-jar-plugin:jar` execution before it, where `Add-Exports` and `Add-Opens` are added to the `MANIFEST.MF`.\r\n\r\n   - This must be done during the _Maven_ `package` phase\r\n   - The `id` of that execution should be `&lt;id&gt;default-jar&lt;/id&gt;` to override _Spring-Boot_ execution of the jar plugin it already does.  \r\n     Else, _Maven_ will complains that it is in front of what it believes to be a second jar, and will ask you to rename it by the mean of a classifier.\r\n   - For a mysterious reason, the `=ALL-UNNAMED` ending the `--add-opens` or `--add-exports` arguments in the command line shall disappear in the manifest entries. Else, they won&#39;t be taken into account at execution time.\r\n\r\n```xml\r\n&lt;!-- Modifier le MANIFEST.MF pour y ajouter les add-opens, add-exports --&gt;\r\n&lt;plugin&gt;\r\n\t&lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n\t&lt;artifactId&gt;maven-jar-plugin&lt;/artifactId&gt;\r\n\r\n\t&lt;executions&gt;\r\n\t\t&lt;execution&gt;\r\n\t\t\t&lt;id&gt;default-jar&lt;/id&gt;\r\n\t\t\t&lt;phase&gt;package&lt;/phase&gt;\r\n\r\n\t\t\t&lt;goals&gt;\r\n\t\t\t\t&lt;goal&gt;jar&lt;/goal&gt;\r\n\t\t\t&lt;/goals&gt;\r\n\r\n\t\t\t&lt;configuration&gt;\r\n\t\t\t\t&lt;archive&gt;\r\n\t\t\t\t\t&lt;manifestEntries&gt;\r\n\t\t\t\t\t\t&lt;Add-Exports&gt;java.base/sun.nio.ch&lt;/Add-Exports&gt;\r\n\t\t\t\t\t\t&lt;Add-Opens&gt;java.base/java.util java.base/java.io java.base/java.nio java.base/java.lang java.base/java.lang.invoke java.base/sun.security.util java.base/sun.security.action&lt;/Add-Opens&gt;\r\n\t\t\t\t\t&lt;/manifestEntries&gt;\r\n\t\t\t\t&lt;/archive&gt;\r\n\t\t\t&lt;/configuration&gt;\r\n\t\t&lt;/execution&gt;\r\n\t&lt;/executions&gt;\r\n&lt;/plugin&gt;\r\n\r\n&lt;!-- G&#233;n&#233;rer l&#39;application finale (un fat jar) --&gt;\r\n&lt;plugin&gt;\r\n\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t&lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\r\n\r\n\t&lt;executions&gt;\r\n\t\t&lt;!-- Cr&#233;er le fat jar ex&#233;cutable de l&#39;application --&gt;\r\n\t\t&lt;execution&gt;\r\n\t\t\t&lt;id&gt;executable-jar&lt;/id&gt;\r\n\t\t\t&lt;phase&gt;install&lt;/phase&gt;\r\n\t\t\t\r\n\t\t\t&lt;goals&gt;\r\n\t\t\t\t&lt;goal&gt;repackage&lt;/goal&gt;\r\n\t\t\t&lt;/goals&gt;\r\n\t\t\t\r\n\t\t\t&lt;configuration&gt;\r\n\t\t\t\t&lt;executable&gt;true&lt;/executable&gt;\r\n\t\t\t&lt;/configuration&gt;\r\n\t\t&lt;/execution&gt;\r\n\t&lt;/executions&gt;\r\n&lt;/plugin&gt;\r\n```\r\n\r\nThis produces this `MANIFEST.MF`:\r\n\r\n```mf\r\nManifest-Version: 1.0\r\nCreated-By: Maven JAR Plugin 3.2.2\r\nBuild-Jdk-Spec: 17\r\nImplementation-Title: Application-Backend m&#233;tier : Services d&#39;enrichiss\r\n ement Open Data\r\nImplementation-Version: 0.0.12-SNAPSHOT\r\nAdd-Exports: java.base/sun.nio.ch\r\nAdd-Opens: java.base/java.util java.base/java.io java.base/java.nio java\r\n .base/java.lang java.base/java.lang.invoke java.base/sun.security.util \r\n java.base/sun.security.action\r\nMain-Class: org.springframework.boot.loader.JarLauncher\r\nStart-Class: fr.ecoemploi.run.Application\r\nSpring-Boot-Version: 2.7.9\r\nSpring-Boot-Classes: BOOT-INF/classes/\r\nSpring-Boot-Lib: BOOT-INF/lib/\r\nSpring-Boot-Classpath-Index: BOOT-INF/classpath.idx\r\nSpring-Boot-Layers-Index: BOOT-INF/layers.idx\r\n```\r\n\r\nAnd I can now substitute \r\n\r\n```bash\r\njava --add-exports java.base/sun.nio.ch=ALL-UNNAMED \\\r\n   --add-opens java.base/java.util=ALL-UNNAMED \\\r\n   --add-opens java.base/java.io=ALL-UNNAMED \\\r\n   --add-opens java.base/java.nio=ALL-UNNAMED \\\r\n   --add-opens java.base/java.lang=ALL-UNNAMED \\\r\n   --add-opens java.base/java.lang.invoke=ALL-UNNAMED \\\r\n   --add-opens java.base/sun.security.util=ALL-UNNAMED \\\r\n   --add-opens java.base/sun.security.action=ALL-UNNAMED \\\r\n   -jar target/application-metier-et-gestion.jar\r\n```\r\n\r\nby a:\r\n\r\n```bash\r\njava -jar target/application-metier-et-gestion.jar\r\n```\r\n\r\nWhich is far more convenient for distribution to end users, and will avoid them to change all their command lines, services to run java jars.","title":"How can I specify --add-opens from a project level and make sure it is taken into account whatever the means to run my app?","body":"<p>I add here the current solution I'm using.</p>\n<p>My context is that <em>Spring-Boot</em> generates the final executable through a <code>org.springframework.boot:spring-boot-maven-plugin:repackage</code> goal, on <em>Maven</em> install phase.</p>\n<p>The idea is to ask for an <code>org.apache.maven.plugins:maven-jar-plugin:jar</code> execution before it, where <code>Add-Exports</code> and <code>Add-Opens</code> are added to the <code>MANIFEST.MF</code>.</p>\n<ul>\n<li>This must be done during the <em>Maven</em> <code>package</code> phase</li>\n<li>The <code>id</code> of that execution should be <code>&lt;id&gt;default-jar&lt;/id&gt;</code> to override <em>Spring-Boot</em> execution of the jar plugin it already does.<br />\nElse, <em>Maven</em> will complains that it is in front of what it believes to be a second jar, and will ask you to rename it by the mean of a classifier.</li>\n<li>For a mysterious reason, the <code>=ALL-UNNAMED</code> ending the <code>--add-opens</code> or <code>--add-exports</code> arguments in the command line shall disappear in the manifest entries. Else, they won't be taken into account at execution time.</li>\n</ul>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;!-- Modifier le MANIFEST.MF pour y ajouter les add-opens, add-exports --&gt;\n&lt;plugin&gt;\n    &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n    &lt;artifactId&gt;maven-jar-plugin&lt;/artifactId&gt;\n\n    &lt;executions&gt;\n        &lt;execution&gt;\n            &lt;id&gt;default-jar&lt;/id&gt;\n            &lt;phase&gt;package&lt;/phase&gt;\n\n            &lt;goals&gt;\n                &lt;goal&gt;jar&lt;/goal&gt;\n            &lt;/goals&gt;\n\n            &lt;configuration&gt;\n                &lt;archive&gt;\n                    &lt;manifestEntries&gt;\n                        &lt;Add-Exports&gt;java.base/sun.nio.ch&lt;/Add-Exports&gt;\n                        &lt;Add-Opens&gt;java.base/java.util java.base/java.io java.base/java.nio java.base/java.lang java.base/java.lang.invoke java.base/sun.security.util java.base/sun.security.action&lt;/Add-Opens&gt;\n                    &lt;/manifestEntries&gt;\n                &lt;/archive&gt;\n            &lt;/configuration&gt;\n        &lt;/execution&gt;\n    &lt;/executions&gt;\n&lt;/plugin&gt;\n\n&lt;!-- Générer l'application finale (un fat jar) --&gt;\n&lt;plugin&gt;\n    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n    &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\n\n    &lt;executions&gt;\n        &lt;!-- Créer le fat jar exécutable de l'application --&gt;\n        &lt;execution&gt;\n            &lt;id&gt;executable-jar&lt;/id&gt;\n            &lt;phase&gt;install&lt;/phase&gt;\n            \n            &lt;goals&gt;\n                &lt;goal&gt;repackage&lt;/goal&gt;\n            &lt;/goals&gt;\n            \n            &lt;configuration&gt;\n                &lt;executable&gt;true&lt;/executable&gt;\n            &lt;/configuration&gt;\n        &lt;/execution&gt;\n    &lt;/executions&gt;\n&lt;/plugin&gt;\n</code></pre>\n<p>This produces this <code>MANIFEST.MF</code>:</p>\n<pre><code>Manifest-Version: 1.0\nCreated-By: Maven JAR Plugin 3.2.2\nBuild-Jdk-Spec: 17\nImplementation-Title: Application-Backend métier : Services d'enrichiss\n ement Open Data\nImplementation-Version: 0.0.12-SNAPSHOT\nAdd-Exports: java.base/sun.nio.ch\nAdd-Opens: java.base/java.util java.base/java.io java.base/java.nio java\n .base/java.lang java.base/java.lang.invoke java.base/sun.security.util \n java.base/sun.security.action\nMain-Class: org.springframework.boot.loader.JarLauncher\nStart-Class: fr.ecoemploi.run.Application\nSpring-Boot-Version: 2.7.9\nSpring-Boot-Classes: BOOT-INF/classes/\nSpring-Boot-Lib: BOOT-INF/lib/\nSpring-Boot-Classpath-Index: BOOT-INF/classpath.idx\nSpring-Boot-Layers-Index: BOOT-INF/layers.idx\n</code></pre>\n<p>And I can now substitute</p>\n<pre class=\"lang-bash prettyprint-override\"><code>java --add-exports java.base/sun.nio.ch=ALL-UNNAMED \\\n   --add-opens java.base/java.util=ALL-UNNAMED \\\n   --add-opens java.base/java.io=ALL-UNNAMED \\\n   --add-opens java.base/java.nio=ALL-UNNAMED \\\n   --add-opens java.base/java.lang=ALL-UNNAMED \\\n   --add-opens java.base/java.lang.invoke=ALL-UNNAMED \\\n   --add-opens java.base/sun.security.util=ALL-UNNAMED \\\n   --add-opens java.base/sun.security.action=ALL-UNNAMED \\\n   -jar target/application-metier-et-gestion.jar\n</code></pre>\n<p>by a:</p>\n<pre class=\"lang-bash prettyprint-override\"><code>java -jar target/application-metier-et-gestion.jar\n</code></pre>\n<p>Which is far more convenient for distribution to end users, and will avoid them to change all their command lines, services to run java jars.</p>\n"}],"owner":{"account_id":2105809,"reputation":3833,"user_id":1872168,"accept_rate":64,"display_name":"Crystark"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":32219,"favorite_count":0,"down_vote_count":0,"up_vote_count":19,"answer_count":3,"score":19,"last_activity_date":1692089753,"creation_date":1638433120,"question_id":70196098,"body_markdown":"I&#39;ve recently moved to Java 17 and with it came a couple restrictions requiring me to use `--add-opens` because of one dependency when running my application.\r\n\r\nI need to add this when the `java -jar` command is ran. For now I found these solutions:\r\n* I can add it to the command line argument in my Dockerfile that runs the project\r\n```\r\njava --add-opens=java.base/java.util=ALL-UNNAMED --add-opens=java.base/sun.util.calendar=ALL-UNNAMED -jar my.jar\r\n```\r\n* I can add it in my MANIFEST.MF through my maven `pom.xml`\r\n```\r\n&lt;plugin&gt;\r\n\t&lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n\t&lt;artifactId&gt;maven-jar-plugin&lt;/artifactId&gt;\r\n\t&lt;configuration&gt;\r\n\t\t&lt;archive&gt;\r\n\t\t\t&lt;manifestEntries&gt;\r\n\t\t\t\t&lt;Add-Opens&gt;java.base/sun.util.calendar java.base/java.util&lt;/Add-Opens&gt;\r\n\t\t\t&lt;/manifestEntries&gt;\r\n\t\t&lt;/archive&gt;\r\n\t&lt;/configuration&gt;\r\n&lt;/plugin&gt;\r\n```\r\n\r\nBoth work fine for production apparently. However when running my app through IntelliJ, it&#39;s not picking up the options which is normal I guess. I have to set them in my run configuration (which is also committed to my project by the way) as VM arguments.\r\n\r\n**I&#39;m looking for a way to ensure consistency automatically and not have to maintain in parallel two places where I declare my add-opens.**\r\n\r\nEDIT: I&#39;m wondering if something is doable with argfiles. Like have an argfile inside my project that would be referenced in the jar and that could be referenced in an y run configuration. I haven&#39;t found much evidence yet but that&#39;s the path I&#39;m currently pursuing.\r\n\r\nEDIT 2: I added an `addopens` file at the root of my project and can now reference this from the various points where I need it. For tests, I added this and it worked out of the box with IntelliJ tests AND maven tests together:\r\n```\r\n&lt;plugin&gt;\r\n    &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n    &lt;artifactId&gt;maven-surefire-plugin&lt;/artifactId&gt;\r\n    &lt;configuration&gt;\r\n        &lt;!-- This adds the options contained in the addopens file to the test JVM arguments --&gt;\r\n        &lt;argLine&gt;@addopens @{argLine}&lt;/argLine&gt;\r\n    &lt;/configuration&gt;\r\n&lt;/plugin&gt;\r\n```\r\nI also can ship that `addopens` file in my docker to use in production. I still need to add to my Run configuration in IntteliJ the `@addopens` manually.","title":"How can I specify --add-opens from a project level and make sure it is taken into account whatever the means to run my app?","body":"<p>I've recently moved to Java 17 and with it came a couple restrictions requiring me to use <code>--add-opens</code> because of one dependency when running my application.</p>\n<p>I need to add this when the <code>java -jar</code> command is ran. For now I found these solutions:</p>\n<ul>\n<li>I can add it to the command line argument in my Dockerfile that runs the project</li>\n</ul>\n<pre><code>java --add-opens=java.base/java.util=ALL-UNNAMED --add-opens=java.base/sun.util.calendar=ALL-UNNAMED -jar my.jar\n</code></pre>\n<ul>\n<li>I can add it in my MANIFEST.MF through my maven <code>pom.xml</code></li>\n</ul>\n<pre><code>&lt;plugin&gt;\n    &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n    &lt;artifactId&gt;maven-jar-plugin&lt;/artifactId&gt;\n    &lt;configuration&gt;\n        &lt;archive&gt;\n            &lt;manifestEntries&gt;\n                &lt;Add-Opens&gt;java.base/sun.util.calendar java.base/java.util&lt;/Add-Opens&gt;\n            &lt;/manifestEntries&gt;\n        &lt;/archive&gt;\n    &lt;/configuration&gt;\n&lt;/plugin&gt;\n</code></pre>\n<p>Both work fine for production apparently. However when running my app through IntelliJ, it's not picking up the options which is normal I guess. I have to set them in my run configuration (which is also committed to my project by the way) as VM arguments.</p>\n<p><strong>I'm looking for a way to ensure consistency automatically and not have to maintain in parallel two places where I declare my add-opens.</strong></p>\n<p>EDIT: I'm wondering if something is doable with argfiles. Like have an argfile inside my project that would be referenced in the jar and that could be referenced in an y run configuration. I haven't found much evidence yet but that's the path I'm currently pursuing.</p>\n<p>EDIT 2: I added an <code>addopens</code> file at the root of my project and can now reference this from the various points where I need it. For tests, I added this and it worked out of the box with IntelliJ tests AND maven tests together:</p>\n<pre><code>&lt;plugin&gt;\n    &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n    &lt;artifactId&gt;maven-surefire-plugin&lt;/artifactId&gt;\n    &lt;configuration&gt;\n        &lt;!-- This adds the options contained in the addopens file to the test JVM arguments --&gt;\n        &lt;argLine&gt;@addopens @{argLine}&lt;/argLine&gt;\n    &lt;/configuration&gt;\n&lt;/plugin&gt;\n</code></pre>\n<p>I also can ship that <code>addopens</code> file in my docker to use in production. I still need to add to my Run configuration in IntteliJ the <code>@addopens</code> manually.</p>\n"},{"tags":["java","spring-boot","maven","render.com"],"comments":[{"owner":{"account_id":21724606,"reputation":722,"user_id":16034206,"display_name":"experiment unit 1998X"},"score":2,"creation_date":1692088466,"post_id":76904436,"comment_id":135574119,"body_markdown":"`Replacing main artifact /target/QuickMaster-1.0.0.jar with repackaged archive`, `The original artifact has been renamed to /target/QuickMaster-1.0.0.jar.original`,  `&quot;/target/backendaccountant-0.0.1-SNAPSHOT.jar&quot;: not found` Don&#39;t know if its just me, but it kind of looks like you are looking for something that doesnt exist","body":"<code>Replacing main artifact &#47;target&#47;QuickMaster-1.0.0.jar with repackaged archive</code>, <code>The original artifact has been renamed to &#47;target&#47;QuickMaster-1.0.0.jar.original</code>,  <code>&quot;&#47;target&#47;backendaccountant-0.0.1-SNAPSHOT.jar&quot;: not found</code> Don&#39;t know if its just me, but it kind of looks like you are looking for something that doesnt exist"},{"owner":{"account_id":183306,"reputation":9436,"user_id":418599,"accept_rate":52,"display_name":"Antonio Petricca"},"score":0,"creation_date":1692089037,"post_id":76904436,"comment_id":135574195,"body_markdown":"Unfortunately your issue is not reproducible because we don&#39;t have the source code.","body":"Unfortunately your issue is not reproducible because we don&#39;t have the source code."},{"owner":{"account_id":1127859,"reputation":897,"user_id":1114682,"accept_rate":9,"display_name":"Noriaki Takamizawa"},"score":0,"creation_date":1692089416,"post_id":76904436,"comment_id":135574238,"body_markdown":"@AntonioPetricca Oops sorry. I should have put my code. I will update my post later.","body":"@AntonioPetricca Oops sorry. I should have put my code. I will update my post later."},{"owner":{"account_id":1127859,"reputation":897,"user_id":1114682,"accept_rate":9,"display_name":"Noriaki Takamizawa"},"score":0,"creation_date":1692089494,"post_id":76904436,"comment_id":135574258,"body_markdown":"@experimentunit1998X I appreciate for your comment. After replaced my code, it works. I&#39;ll write the wrap up.","body":"@experimentunit1998X I appreciate for your comment. After replaced my code, it works. I&#39;ll write the wrap up."}],"answers":[{"tags":[],"owner":{"account_id":1127859,"reputation":897,"user_id":1114682,"accept_rate":9,"display_name":"Noriaki Takamizawa"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1692089649,"creation_date":1692089649,"answer_id":76904575,"question_id":76904436,"body_markdown":"After replaced my Dockerfile like below, it works.\r\n```\r\nFROM maven:3-eclipse-temurin-17 AS build\r\nCOPY . .\r\nRUN mvn clean package -Pprod -DskipTests\r\nFROM eclipse-temurin:17-alpine\r\nCOPY --from=build /target/QuickMaster-1.0.0.jar demo.jar # &lt;- changed file name\r\nEXPOSE 8080\r\nENTRYPOINT [“java”,“-jar”,“demo.jar”]\r\n```","title":"error: failed to solve: failed to compute cache key","body":"<p>After replaced my Dockerfile like below, it works.</p>\n<pre><code>FROM maven:3-eclipse-temurin-17 AS build\nCOPY . .\nRUN mvn clean package -Pprod -DskipTests\nFROM eclipse-temurin:17-alpine\nCOPY --from=build /target/QuickMaster-1.0.0.jar demo.jar # &lt;- changed file name\nEXPOSE 8080\nENTRYPOINT [“java”,“-jar”,“demo.jar”]\n</code></pre>\n"}],"owner":{"account_id":1127859,"reputation":897,"user_id":1114682,"accept_rate":9,"display_name":"Noriaki Takamizawa"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":749,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1692089649,"creation_date":1692088266,"question_id":76904436,"body_markdown":"I&#39;m deploying Java Spring Boot Project on Render.com. Here&#39;s Dockerfile and errors.\r\nwhen deploying code, some strange error happened.\r\nI couldn&#39;t figure out what happened. Please let me know. Every comment are welcomed.\r\n\r\n**Dockerfile**\r\n```\r\nFROM maven:3-eclipse-temurin-17 AS build\r\nCOPY . .\r\nRUN mvn clean package -Pprod -DskipTests\r\nFROM openjdk:11-jdk-slim\r\nCOPY --from=build /target/backendaccountant-0.0.1-SNAPSHOT.jar demo.jar\r\nEXPOSE 8080\r\nENTRYPOINT [“java”,“-jar”,“demo.jar”]\r\n```\r\n\r\n**Error**\r\n```\r\nDownloaded from central: https://repo.maven.apache.org/maven2/com/google/guava/guava/28.2-android/guava-28.2-android.jar (2.6 MB at 4.7 MB/s)\r\nAug 15 05:20:00 PM  #11 21.07 [INFO] Replacing main artifact /target/QuickMaster-1.0.0.jar with repackaged archive, adding nested dependencies in BOOT-INF/.\r\nAug 15 05:20:00 PM  #11 21.08 [INFO] The original artifact has been renamed to /target/QuickMaster-1.0.0.jar.original\r\nAug 15 05:20:00 PM  #11 21.08 [INFO] ------------------------------------------------------------------------\r\nAug 15 05:20:00 PM  #11 21.08 [INFO] BUILD SUCCESS\r\nAug 15 05:20:00 PM  #11 21.08 [INFO] ------------------------------------------------------------------------\r\nAug 15 05:20:00 PM  #11 21.08 [INFO] Total time:  18.303 s\r\nAug 15 05:20:00 PM  #11 21.08 [INFO] Finished at: 2023-08-15T08:20:00Z\r\nAug 15 05:20:00 PM  #11 21.08 [INFO] ------------------------------------------------------------------------\r\nAug 15 05:20:00 PM  #11 21.08 [WARNING] The requested profile &quot;prod&quot; could not be activated because it does not exist.\r\nAug 15 05:20:00 PM  #11 DONE 21.2s\r\nAug 15 05:20:00 PM  \r\nAug 15 05:20:00 PM  #12 [stage-1 2/2] COPY --from=build /target/backendaccountant-0.0.1-SNAPSHOT.jar demo.jar\r\nAug 15 05:20:00 PM  #12 ERROR: failed to calculate checksum of ref 1tvcyniff9u6m4oki7cytt7fb::xbb9zgmks3mqn1pni9p0gg08s: &quot;/target/backendaccountant-0.0.1-SNAPSHOT.jar&quot;: not found\r\nAug 15 05:20:00 PM  ------\r\nAug 15 05:20:00 PM   &gt; [stage-1 2/2] COPY --from=build /target/backendaccountant-0.0.1-SNAPSHOT.jar demo.jar:\r\nAug 15 05:20:00 PM  ------\r\nAug 15 05:20:00 PM  Dockerfile:5\r\nAug 15 05:20:00 PM  --------------------\r\nAug 15 05:20:00 PM     3 |     RUN mvn clean package -Pprod -DskipTests\r\nAug 15 05:20:00 PM     4 |     FROM openjdk:11-jdk-slim\r\nAug 15 05:20:00 PM     5 | &gt;&gt;&gt; COPY --from=build /target/backendaccountant-0.0.1-SNAPSHOT.jar demo.jar\r\nAug 15 05:20:00 PM     6 |     EXPOSE 8080\r\nAug 15 05:20:00 PM     7 |     ENTRYPOINT [“java”,“-jar”,“demo.jar”]\r\nAug 15 05:20:00 PM  --------------------\r\nAug 15 05:20:00 PM  error: failed to solve: failed to compute cache key: failed to calculate checksum of ref 1tvcyniff9u6m4oki7cytt7fb::xbb9zgmks3mqn1pni9p0gg08s: &quot;/target/backendaccountant-0.0.1-SNAPSHOT.jar&quot;: not found\r\nAug 15 05:20:00 PM  error: exit status 1\r\n```\r\n\r\n[Appended]\r\nMy Code is here.\r\nhttps://github.com/hardreggaecafe/java_spring_boot_sample\r\n","title":"error: failed to solve: failed to compute cache key","body":"<p>I'm deploying Java Spring Boot Project on Render.com. Here's Dockerfile and errors.\nwhen deploying code, some strange error happened.\nI couldn't figure out what happened. Please let me know. Every comment are welcomed.</p>\n<p><strong>Dockerfile</strong></p>\n<pre><code>FROM maven:3-eclipse-temurin-17 AS build\nCOPY . .\nRUN mvn clean package -Pprod -DskipTests\nFROM openjdk:11-jdk-slim\nCOPY --from=build /target/backendaccountant-0.0.1-SNAPSHOT.jar demo.jar\nEXPOSE 8080\nENTRYPOINT [“java”,“-jar”,“demo.jar”]\n</code></pre>\n<p><strong>Error</strong></p>\n<pre><code>Downloaded from central: https://repo.maven.apache.org/maven2/com/google/guava/guava/28.2-android/guava-28.2-android.jar (2.6 MB at 4.7 MB/s)\nAug 15 05:20:00 PM  #11 21.07 [INFO] Replacing main artifact /target/QuickMaster-1.0.0.jar with repackaged archive, adding nested dependencies in BOOT-INF/.\nAug 15 05:20:00 PM  #11 21.08 [INFO] The original artifact has been renamed to /target/QuickMaster-1.0.0.jar.original\nAug 15 05:20:00 PM  #11 21.08 [INFO] ------------------------------------------------------------------------\nAug 15 05:20:00 PM  #11 21.08 [INFO] BUILD SUCCESS\nAug 15 05:20:00 PM  #11 21.08 [INFO] ------------------------------------------------------------------------\nAug 15 05:20:00 PM  #11 21.08 [INFO] Total time:  18.303 s\nAug 15 05:20:00 PM  #11 21.08 [INFO] Finished at: 2023-08-15T08:20:00Z\nAug 15 05:20:00 PM  #11 21.08 [INFO] ------------------------------------------------------------------------\nAug 15 05:20:00 PM  #11 21.08 [WARNING] The requested profile &quot;prod&quot; could not be activated because it does not exist.\nAug 15 05:20:00 PM  #11 DONE 21.2s\nAug 15 05:20:00 PM  \nAug 15 05:20:00 PM  #12 [stage-1 2/2] COPY --from=build /target/backendaccountant-0.0.1-SNAPSHOT.jar demo.jar\nAug 15 05:20:00 PM  #12 ERROR: failed to calculate checksum of ref 1tvcyniff9u6m4oki7cytt7fb::xbb9zgmks3mqn1pni9p0gg08s: &quot;/target/backendaccountant-0.0.1-SNAPSHOT.jar&quot;: not found\nAug 15 05:20:00 PM  ------\nAug 15 05:20:00 PM   &gt; [stage-1 2/2] COPY --from=build /target/backendaccountant-0.0.1-SNAPSHOT.jar demo.jar:\nAug 15 05:20:00 PM  ------\nAug 15 05:20:00 PM  Dockerfile:5\nAug 15 05:20:00 PM  --------------------\nAug 15 05:20:00 PM     3 |     RUN mvn clean package -Pprod -DskipTests\nAug 15 05:20:00 PM     4 |     FROM openjdk:11-jdk-slim\nAug 15 05:20:00 PM     5 | &gt;&gt;&gt; COPY --from=build /target/backendaccountant-0.0.1-SNAPSHOT.jar demo.jar\nAug 15 05:20:00 PM     6 |     EXPOSE 8080\nAug 15 05:20:00 PM     7 |     ENTRYPOINT [“java”,“-jar”,“demo.jar”]\nAug 15 05:20:00 PM  --------------------\nAug 15 05:20:00 PM  error: failed to solve: failed to compute cache key: failed to calculate checksum of ref 1tvcyniff9u6m4oki7cytt7fb::xbb9zgmks3mqn1pni9p0gg08s: &quot;/target/backendaccountant-0.0.1-SNAPSHOT.jar&quot;: not found\nAug 15 05:20:00 PM  error: exit status 1\n</code></pre>\n<p>[Appended]\nMy Code is here.\n<a href=\"https://github.com/hardreggaecafe/java_spring_boot_sample\" rel=\"nofollow noreferrer\">https://github.com/hardreggaecafe/java_spring_boot_sample</a></p>\n"},{"tags":["java","elasticsearch","testcontainers"],"answers":[{"tags":[],"owner":{"account_id":4430189,"reputation":730,"user_id":3607513,"accept_rate":80,"display_name":"Ira Re"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1572873770,"creation_date":1572873770,"answer_id":58694341,"question_id":58135272,"body_markdown":"I solved this problem by using [Testcontainers Dockerfile DSL][1] \r\n\r\nFor example following code snippet works for me:\r\n\r\n    @ClassRule\r\n    public static GenericContainer elastic = new GenericContainer(new ImageFromDockerfile()\r\n        .withDockerfileFromBuilder(\r\n            builder -&gt; builder.from(&quot;elasticsearch:6.8.4&quot;)\r\n                              .run(&quot;bin/elasticsearch-plugin&quot;, &quot;install&quot;, &quot;analysis-icu&quot;)\r\n                              .run(&quot;bin/elasticsearch-plugin&quot;, &quot;install&quot;, &quot;analysis-smartcn&quot;)\r\n                              .build()\r\n    )).withExposedPorts(9200);\r\n\r\n\r\n  [1]: https://www.testcontainers.org/features/creating_images/","title":"Start test container of ElasticSearch with plugin","body":"<p>I solved this problem by using <a href=\"https://www.testcontainers.org/features/creating_images/\" rel=\"nofollow noreferrer\">Testcontainers Dockerfile DSL</a> </p>\n\n<p>For example following code snippet works for me:</p>\n\n<pre><code>@ClassRule\npublic static GenericContainer elastic = new GenericContainer(new ImageFromDockerfile()\n    .withDockerfileFromBuilder(\n        builder -&gt; builder.from(\"elasticsearch:6.8.4\")\n                          .run(\"bin/elasticsearch-plugin\", \"install\", \"analysis-icu\")\n                          .run(\"bin/elasticsearch-plugin\", \"install\", \"analysis-smartcn\")\n                          .build()\n)).withExposedPorts(9200);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":8338031,"reputation":11,"user_id":6264238,"display_name":"Ruslan Peshchuk"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1662760460,"creation_date":1662760356,"answer_id":73667814,"question_id":58135272,"body_markdown":"I was able to start an Elasticsearch test container with a plugin this way (it&#39;s a Kotlin code):\r\n```\r\nElasticsearchContainer(&quot;docker.elastic.co/elasticsearch/elasticsearch:7.10.0&quot;).apply {\r\n    withCreateContainerCmdModifier { cmd -&gt;\r\n        cmd.withCmd(\r\n            *arrayOf(\r\n                &quot;bash&quot;,\r\n                &quot;-c&quot;,\r\n                &quot;&quot;&quot;/usr/share/elasticsearch/bin/elasticsearch-plugin install &lt;URL&gt; &amp;&amp;\r\n                   su elasticsearch -s /usr/share/elasticsearch/bin/elasticsearch\r\n                &quot;&quot;&quot;.trimIndent()\r\n            )\r\n        )\r\n    }\r\n    start()\r\n}\r\n```","title":"Start test container of ElasticSearch with plugin","body":"<p>I was able to start an Elasticsearch test container with a plugin this way (it's a Kotlin code):</p>\n<pre><code>ElasticsearchContainer(&quot;docker.elastic.co/elasticsearch/elasticsearch:7.10.0&quot;).apply {\n    withCreateContainerCmdModifier { cmd -&gt;\n        cmd.withCmd(\n            *arrayOf(\n                &quot;bash&quot;,\n                &quot;-c&quot;,\n                &quot;&quot;&quot;/usr/share/elasticsearch/bin/elasticsearch-plugin install &lt;URL&gt; &amp;&amp;\n                   su elasticsearch -s /usr/share/elasticsearch/bin/elasticsearch\n                &quot;&quot;&quot;.trimIndent()\n            )\n        )\n    }\n    start()\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":427053,"reputation":4001,"user_id":808615,"display_name":"uwe"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1692089622,"creation_date":1692089622,"answer_id":76904572,"question_id":58135272,"body_markdown":"For me this worked:\r\n\r\n    private static final String DOCKER_IMAGE = &quot;docker.elastic.co/elasticsearch/elasticsearch:6.8.5&quot;\r\n    private static final ElasticsearchContainer container = new ElasticsearchContainer(DOCKER_IMAGE);\r\n\r\n    static {\r\n        container.withCreateContainerCmdModifier((cmd) -&gt; {\r\n            cmd.withCmd(\r\n                &quot;bash&quot;, &quot;-c&quot;, &quot;./bin/elasticsearch-plugin install analysis-icu &amp;&amp; docker-entrypoint.sh eswrapper&quot;);\r\n\r\n        });\r\n        container.withStartupTimeout(Duration.ofSeconds(60));\r\n    }\r\n    \r\n\r\n    @BeforeClass\r\n    public static void start() {\r\n        container.start();\r\n    }\r\n\r\n    @AfterClass\r\n    public static void stop() {\r\n        container.stop();\r\n    }\r\n\r\nplease note that Elasticsearch version 6.8.5 in this example is old and you should probably use a newer one.\r\n    ","title":"Start test container of ElasticSearch with plugin","body":"<p>For me this worked:</p>\n<pre><code>private static final String DOCKER_IMAGE = &quot;docker.elastic.co/elasticsearch/elasticsearch:6.8.5&quot;\nprivate static final ElasticsearchContainer container = new ElasticsearchContainer(DOCKER_IMAGE);\n\nstatic {\n    container.withCreateContainerCmdModifier((cmd) -&gt; {\n        cmd.withCmd(\n            &quot;bash&quot;, &quot;-c&quot;, &quot;./bin/elasticsearch-plugin install analysis-icu &amp;&amp; docker-entrypoint.sh eswrapper&quot;);\n\n    });\n    container.withStartupTimeout(Duration.ofSeconds(60));\n}\n\n\n@BeforeClass\npublic static void start() {\n    container.start();\n}\n\n@AfterClass\npublic static void stop() {\n    container.stop();\n}\n</code></pre>\n<p>please note that Elasticsearch version 6.8.5 in this example is old and you should probably use a newer one.</p>\n"}],"owner":{"account_id":5513230,"reputation":3625,"user_id":4378853,"accept_rate":100,"display_name":"GotoFinal"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1528,"favorite_count":0,"down_vote_count":0,"up_vote_count":5,"answer_count":3,"score":5,"last_activity_date":1692089622,"creation_date":1569589833,"question_id":58135272,"body_markdown":"I&#39;m using testcontainers.org using `docker.elastic.co/elasticsearch/elasticsearch-oss:7.3.2` and I want to use it to test the plugin I&#39;m updating, but I can&#39;t find a way to install it inside test environment. \r\n\r\nI can try to copy file inside and install it\r\n\r\n    ElasticsearchContainer container = new ElasticsearchContainer(&quot;docker.elastic.co/elasticsearch/elasticsearch-oss:$ELASTIC_VERSION&quot;)\r\n    String pluginPath = &quot;/usr/share/elasticsearch/$PLUGIN_FILE_NAME&quot;\r\n    container.start()\r\n    container.copyFileToContainer(MountableFile.forHostPath(new File(PLUGIN_PLUGIN_PATH).toPath()), pluginPath)\r\n    ExecResult result = container.execInContainer(&quot;bin/elasticsearch-plugin&quot;, &quot;install&quot;, &quot;file://$pluginPath&quot;)\r\n\r\nbut then container is already started and elastic search is already running so plugin will not be loaded so I would need to kill it and replicate how it is created, sounds like a lot of hacking around. Is there some better way to do this?","title":"Start test container of ElasticSearch with plugin","body":"<p>I'm using testcontainers.org using <code>docker.elastic.co/elasticsearch/elasticsearch-oss:7.3.2</code> and I want to use it to test the plugin I'm updating, but I can't find a way to install it inside test environment. </p>\n\n<p>I can try to copy file inside and install it</p>\n\n<pre><code>ElasticsearchContainer container = new ElasticsearchContainer(\"docker.elastic.co/elasticsearch/elasticsearch-oss:$ELASTIC_VERSION\")\nString pluginPath = \"/usr/share/elasticsearch/$PLUGIN_FILE_NAME\"\ncontainer.start()\ncontainer.copyFileToContainer(MountableFile.forHostPath(new File(PLUGIN_PLUGIN_PATH).toPath()), pluginPath)\nExecResult result = container.execInContainer(\"bin/elasticsearch-plugin\", \"install\", \"file://$pluginPath\")\n</code></pre>\n\n<p>but then container is already started and elastic search is already running so plugin will not be loaded so I would need to kill it and replicate how it is created, sounds like a lot of hacking around. Is there some better way to do this?</p>\n"},{"tags":["java","maven","javaagents"],"comments":[{"owner":{"account_id":21994,"reputation":73808,"user_id":53897,"accept_rate":56,"display_name":"Thorbj&#248;rn Ravn Andersen"},"score":0,"creation_date":1587032929,"post_id":61245323,"comment_id":108351880,"body_markdown":"&quot;Caused by: java.lang.ClassNotFoundException: javassist.ClassPath&quot; - fix your classpath","body":"&quot;Caused by: java.lang.ClassNotFoundException: javassist.ClassPath&quot; - fix your classpath"}],"answers":[{"tags":[],"owner":{"account_id":270762,"reputation":153,"user_id":1829037,"display_name":"Richard"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1607407275,"creation_date":1607406709,"answer_id":65193793,"question_id":61245323,"body_markdown":"I faced the same issue, you can refer to the pom.xml below, and see the difference with yours in hello-world project.\r\n\r\n```\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot;\r\n         xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n         xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\r\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n\r\n    &lt;groupId&gt;com.richard&lt;/groupId&gt;\r\n    &lt;artifactId&gt;my-agent-test&lt;/artifactId&gt;\r\n    &lt;version&gt;1.0-SNAPSHOT&lt;/version&gt;\r\n\r\n    &lt;properties&gt;\r\n        &lt;java.version&gt;1.8&lt;/java.version&gt;\r\n    &lt;/properties&gt;\r\n\r\n\r\n    &lt;build&gt;\r\n        &lt;plugins&gt;\r\n            &lt;plugin&gt;\r\n                &lt;artifactId&gt;maven-assembly-plugin&lt;/artifactId&gt;\r\n                &lt;version&gt;2.4&lt;/version&gt;\r\n                &lt;configuration&gt;\r\n                    &lt;descriptorRefs&gt;\r\n                        &lt;descriptorRef&gt;jar-with-dependencies&lt;/descriptorRef&gt;\r\n                    &lt;/descriptorRefs&gt;\r\n                    &lt;archive&gt;\r\n                        &lt;manifest&gt;\r\n                            &lt;mainClass&gt;com.richard.Main&lt;/mainClass&gt;\r\n                        &lt;/manifest&gt;\r\n                    &lt;/archive&gt;\r\n                &lt;/configuration&gt;\r\n                &lt;executions&gt;\r\n                    &lt;execution&gt;\r\n                        &lt;id&gt;make-assembly&lt;/id&gt;\r\n                        &lt;phase&gt;package&lt;/phase&gt;\r\n                        &lt;goals&gt;\r\n                            &lt;goal&gt;single&lt;/goal&gt;\r\n                        &lt;/goals&gt;\r\n                    &lt;/execution&gt;\r\n                &lt;/executions&gt;\r\n            &lt;/plugin&gt;\r\n        &lt;/plugins&gt;\r\n    &lt;/build&gt;\r\n\r\n    &lt;dependencies&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.javassist&lt;/groupId&gt;\r\n            &lt;artifactId&gt;javassist&lt;/artifactId&gt;\r\n            &lt;version&gt;3.20.0-GA&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n    &lt;/dependencies&gt;\r\n\r\n&lt;/project&gt;\r\n```","title":"strange exception of &quot;java.lang.NoClassDefFoundError: javassist/ClassPath&quot; when running with commandline","body":"<p>I faced the same issue, you can refer to the pom.xml below, and see the difference with yours in hello-world project.</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot;\n         xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\n         xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n\n    &lt;groupId&gt;com.richard&lt;/groupId&gt;\n    &lt;artifactId&gt;my-agent-test&lt;/artifactId&gt;\n    &lt;version&gt;1.0-SNAPSHOT&lt;/version&gt;\n\n    &lt;properties&gt;\n        &lt;java.version&gt;1.8&lt;/java.version&gt;\n    &lt;/properties&gt;\n\n\n    &lt;build&gt;\n        &lt;plugins&gt;\n            &lt;plugin&gt;\n                &lt;artifactId&gt;maven-assembly-plugin&lt;/artifactId&gt;\n                &lt;version&gt;2.4&lt;/version&gt;\n                &lt;configuration&gt;\n                    &lt;descriptorRefs&gt;\n                        &lt;descriptorRef&gt;jar-with-dependencies&lt;/descriptorRef&gt;\n                    &lt;/descriptorRefs&gt;\n                    &lt;archive&gt;\n                        &lt;manifest&gt;\n                            &lt;mainClass&gt;com.richard.Main&lt;/mainClass&gt;\n                        &lt;/manifest&gt;\n                    &lt;/archive&gt;\n                &lt;/configuration&gt;\n                &lt;executions&gt;\n                    &lt;execution&gt;\n                        &lt;id&gt;make-assembly&lt;/id&gt;\n                        &lt;phase&gt;package&lt;/phase&gt;\n                        &lt;goals&gt;\n                            &lt;goal&gt;single&lt;/goal&gt;\n                        &lt;/goals&gt;\n                    &lt;/execution&gt;\n                &lt;/executions&gt;\n            &lt;/plugin&gt;\n        &lt;/plugins&gt;\n    &lt;/build&gt;\n\n    &lt;dependencies&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.javassist&lt;/groupId&gt;\n            &lt;artifactId&gt;javassist&lt;/artifactId&gt;\n            &lt;version&gt;3.20.0-GA&lt;/version&gt;\n        &lt;/dependency&gt;\n    &lt;/dependencies&gt;\n\n&lt;/project&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":17957934,"reputation":1,"user_id":16604686,"display_name":"Дмитрий Силин"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1692089486,"creation_date":1691729330,"answer_id":76880744,"question_id":61245323,"body_markdown":"There is something wrong with lookup paths. A possible workaround is to pack *javassist* into the JAR file containing the agent. To do that, perform the following:\r\n1. Unpack *javassist* via this command: `jar xf javassist.jar`. That will create `javassist` folder below the working directory, i.e. the folder from where you issued the command. Folder *javassist* will contain all class files of the library.\r\n2. Include the unpacked classes when building your JAR, i.e. use this command:  \r\n `jar -cvfm ./my-agent.jar manifest.mf ./my_classes ./javassist`","title":"strange exception of &quot;java.lang.NoClassDefFoundError: javassist/ClassPath&quot; when running with commandline","body":"<p>There is something wrong with lookup paths. A possible workaround is to pack <em>javassist</em> into the JAR file containing the agent. To do that, perform the following:</p>\n<ol>\n<li>Unpack <em>javassist</em> via this command: <code>jar xf javassist.jar</code>. That will create <code>javassist</code> folder below the working directory, i.e. the folder from where you issued the command. Folder <em>javassist</em> will contain all class files of the library.</li>\n<li>Include the unpacked classes when building your JAR, i.e. use this command:<br />\n<code>jar -cvfm ./my-agent.jar manifest.mf ./my_classes ./javassist</code></li>\n</ol>\n"}],"owner":{"account_id":11625942,"reputation":21,"user_id":8515704,"display_name":"lsongseven"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":1796,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":2,"score":1,"last_activity_date":1692089486,"creation_date":1587023888,"question_id":61245323,"body_markdown":"I hava a agent class, it simply print two lines before and after another project&#39;s main() method. The agent class is as follows\r\n\r\n    public class Agent {\r\n\r\n    static String packageName = &quot;xxx.hello.world&quot;;\r\n\r\n    public static void premain(String agentArgs, Instrumentation inst) {\r\n\r\n\r\n        inst.addTransformer((classLoader, s, aClass, protectionDomain, bytes) -&gt; {\r\n            byte[] transformed = null;\r\n            CtClass cl = null;\r\n            try {\r\n                ClassPool pool = new ClassPool();\r\n                pool.insertClassPath(new LoaderClassPath(Thread.currentThread().getContextClassLoader()));\r\n                pool.importPackage(packageName);\r\n                cl = pool.makeClass(new ByteArrayInputStream(bytes));\r\n                CtMethod[] methods = cl.getDeclaredMethods();\r\n\r\n                for (CtMethod method : methods) {\r\n                    if (&quot;main&quot;.equals(method.getName())) {\r\n                        method.insertBefore(&quot;System.out.println(\\&quot;&lt;-----------before-------&gt;\\&quot;);&quot;);\r\n                        method.insertAfter(&quot;System.out.println(\\&quot;&lt;-----------end-------&gt;\\&quot;);&quot;);\r\n                    }\r\n                }\r\n                transformed = cl.toBytecode();\r\n            } catch (Exception e) {\r\n                e.printStackTrace();\r\n            } finally {\r\n                if (cl != null) {\r\n                    cl.detach();\r\n                }\r\n            }\r\n            return transformed;\r\n\r\n        });\r\n    }}\r\n\r\n\r\n\r\nAnd I have another project named as &quot;HelloWorld&quot;, it simply print &quot;Hi, i am in main()&quot; in it&#39;s main method. The HelloWorld.class is as follows\r\n\r\n    public class HelloWorld {\r\n    public static void main(String[] args) {\r\n        System.out.println(&quot;Hi, i am in main()&quot;);\r\n    }\r\n\r\n\r\nThen I package the agent as a jar named as &quot;agent.jar&quot;, and add &quot;-javaagent:xxx/yyy/agent.jar&quot; to vmoptions in IDEA, like this\r\n[![enter image description here][1]][1]\r\n\r\n\r\n After that , when I run the hello-world, I get what i want like\r\n\r\n    &lt;-----------before-------&gt;\r\n     Hi, i am in main()\r\n    &lt;-----------end-------&gt;\r\n\r\nHowever, when I try to run the hello-world as a jar like &quot;hello-world.jar&quot; in command line like\r\n\r\n    java -javaagent:xxx/yyy/agent.jar -jar hello-world.jar\r\nI get a strange error like \r\n\r\n    Exception in thread &quot;main&quot; java.lang.NoClassDefFoundError: javassist/ClassPath\r\n        at java.lang.Class.getDeclaredMethods0(Native Method)\r\n        at java.lang.Class.privateGetDeclaredMethods(Unknown Source)\r\n        at java.lang.Class.getDeclaredMethod(Unknown Source)\r\n        at sun.instrument.InstrumentationImpl.loadClassAndStartAgent(Unknown Source)\r\n        at sun.instrument.InstrumentationImpl.loadClassAndCallPremain(Unknown Source)\r\n    Caused by: java.lang.ClassNotFoundException: javassist.ClassPath\r\n        at java.net.URLClassLoader.findClass(Unknown Source)\r\n        at java.lang.ClassLoader.loadClass(Unknown Source)\r\n        at sun.misc.Launcher$AppClassLoader.loadClass(Unknown Source)\r\n        at java.lang.ClassLoader.loadClass(Unknown Source)\r\n        ... 5 more\r\n\r\nIt is quite strange because I think the two ways (in IDEA and in command line) are the same. And when i check the hello-world.jar, i can see the javassist/ClassPath.class.\r\n[![enter image description here][2]][2]\r\n\r\nCan any tell me why and how to fix this problem?\r\n\r\nThanks!\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/dkiZM.png\r\n  [2]: https://i.stack.imgur.com/53fOj.png","title":"strange exception of &quot;java.lang.NoClassDefFoundError: javassist/ClassPath&quot; when running with commandline","body":"<p>I hava a agent class, it simply print two lines before and after another project's main() method. The agent class is as follows</p>\n\n<pre><code>public class Agent {\n\nstatic String packageName = \"xxx.hello.world\";\n\npublic static void premain(String agentArgs, Instrumentation inst) {\n\n\n    inst.addTransformer((classLoader, s, aClass, protectionDomain, bytes) -&gt; {\n        byte[] transformed = null;\n        CtClass cl = null;\n        try {\n            ClassPool pool = new ClassPool();\n            pool.insertClassPath(new LoaderClassPath(Thread.currentThread().getContextClassLoader()));\n            pool.importPackage(packageName);\n            cl = pool.makeClass(new ByteArrayInputStream(bytes));\n            CtMethod[] methods = cl.getDeclaredMethods();\n\n            for (CtMethod method : methods) {\n                if (\"main\".equals(method.getName())) {\n                    method.insertBefore(\"System.out.println(\\\"&lt;-----------before-------&gt;\\\");\");\n                    method.insertAfter(\"System.out.println(\\\"&lt;-----------end-------&gt;\\\");\");\n                }\n            }\n            transformed = cl.toBytecode();\n        } catch (Exception e) {\n            e.printStackTrace();\n        } finally {\n            if (cl != null) {\n                cl.detach();\n            }\n        }\n        return transformed;\n\n    });\n}}\n</code></pre>\n\n<p>And I have another project named as \"HelloWorld\", it simply print \"Hi, i am in main()\" in it's main method. The HelloWorld.class is as follows</p>\n\n<pre><code>public class HelloWorld {\npublic static void main(String[] args) {\n    System.out.println(\"Hi, i am in main()\");\n}\n</code></pre>\n\n<p>Then I package the agent as a jar named as \"agent.jar\", and add \"-javaagent:xxx/yyy/agent.jar\" to vmoptions in IDEA, like this\n<a href=\"https://i.stack.imgur.com/dkiZM.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/dkiZM.png\" alt=\"enter image description here\"></a></p>\n\n<p>After that , when I run the hello-world, I get what i want like</p>\n\n<pre><code>&lt;-----------before-------&gt;\n Hi, i am in main()\n&lt;-----------end-------&gt;\n</code></pre>\n\n<p>However, when I try to run the hello-world as a jar like \"hello-world.jar\" in command line like</p>\n\n<pre><code>java -javaagent:xxx/yyy/agent.jar -jar hello-world.jar\n</code></pre>\n\n<p>I get a strange error like </p>\n\n<pre><code>Exception in thread \"main\" java.lang.NoClassDefFoundError: javassist/ClassPath\n    at java.lang.Class.getDeclaredMethods0(Native Method)\n    at java.lang.Class.privateGetDeclaredMethods(Unknown Source)\n    at java.lang.Class.getDeclaredMethod(Unknown Source)\n    at sun.instrument.InstrumentationImpl.loadClassAndStartAgent(Unknown Source)\n    at sun.instrument.InstrumentationImpl.loadClassAndCallPremain(Unknown Source)\nCaused by: java.lang.ClassNotFoundException: javassist.ClassPath\n    at java.net.URLClassLoader.findClass(Unknown Source)\n    at java.lang.ClassLoader.loadClass(Unknown Source)\n    at sun.misc.Launcher$AppClassLoader.loadClass(Unknown Source)\n    at java.lang.ClassLoader.loadClass(Unknown Source)\n    ... 5 more\n</code></pre>\n\n<p>It is quite strange because I think the two ways (in IDEA and in command line) are the same. And when i check the hello-world.jar, i can see the javassist/ClassPath.class.\n<a href=\"https://i.stack.imgur.com/53fOj.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/53fOj.png\" alt=\"enter image description here\"></a></p>\n\n<p>Can any tell me why and how to fix this problem?</p>\n\n<p>Thanks!</p>\n"},{"tags":["java","aop","aspectj","spring-aop","feign"],"comments":[{"owner":{"account_id":1087271,"reputation":64101,"user_id":1082681,"accept_rate":90,"display_name":"kriegaex"},"score":0,"creation_date":1485426358,"post_id":41856687,"comment_id":70924599,"body_markdown":"Where does the `@Component` annotation come from? From Spring maybe? If so, do you use Spring AOP or AspectJ? How do you compile the code? And where does `@MeteredRemoteCall` come from? A special library or is it your own annotation? Can you please show the annotation source code? I think I know the answer to your question, but it depends on your answers to my questions.","body":"Where does the <code>@Component</code> annotation come from? From Spring maybe? If so, do you use Spring AOP or AspectJ? How do you compile the code? And where does <code>@MeteredRemoteCall</code> come from? A special library or is it your own annotation? Can you please show the annotation source code? I think I know the answer to your question, but it depends on your answers to my questions."},{"owner":{"account_id":7281026,"reputation":371,"user_id":5550788,"accept_rate":50,"display_name":"Anton Arsentyev"},"score":0,"creation_date":1485434237,"post_id":41856687,"comment_id":70928737,"body_markdown":"@kriegaex yes `@Component` annotation its Spring class, \nUpdated my question with new class","body":"@kriegaex yes <code>@Component</code> annotation its Spring class,  Updated my question with new class"}],"answers":[{"comments":[{"owner":{"account_id":7281026,"reputation":371,"user_id":5550788,"accept_rate":50,"display_name":"Anton Arsentyev"},"score":0,"creation_date":1485440201,"post_id":41874814,"comment_id":70932526,"body_markdown":"Thanks for detailed answer!\nCan you provide dependencies that you use ? aspectjr and aspectweaver ?","body":"Thanks for detailed answer! Can you provide dependencies that you use ? aspectjr and aspectweaver ?"},{"owner":{"account_id":7281026,"reputation":371,"user_id":5550788,"accept_rate":50,"display_name":"Anton Arsentyev"},"score":0,"creation_date":1485440899,"post_id":41874814,"comment_id":70933058,"body_markdown":"May be I cant catch calls of Feign method because I use Spring Boot ?","body":"May be I cant catch calls of Feign method because I use Spring Boot ?"},{"owner":{"account_id":1087271,"reputation":64101,"user_id":1082681,"accept_rate":90,"display_name":"kriegaex"},"score":0,"creation_date":1485441289,"post_id":41874814,"comment_id":70933329,"body_markdown":"For full AspectJ you need to compile your aspect code with the AspectJ compiler (Ajc), either from command-line or via e.g. AspectJ Maven plugin which in turn uses _aspectjtools.jar_ for compilation. For LTW you need _aspectjweaver.jar_ as a Java agent. How to exactly use it from Spring is explained in the link I provided in my answer, I guess. _aspectjrt.jar_ is smaller than _aspectjweaver.jar_ and not needed for LTW because the runtime is already contained as a subset in the weaver jar. The runtime jar is needed for compile-time weaving which is my preferred method to use AspectJ.","body":"For full AspectJ you need to compile your aspect code with the AspectJ compiler (Ajc), either from command-line or via e.g. AspectJ Maven plugin which in turn uses <i>aspectjtools.jar</i> for compilation. For LTW you need <i>aspectjweaver.jar</i> as a Java agent. How to exactly use it from Spring is explained in the link I provided in my answer, I guess. <i>aspectjrt.jar</i> is smaller than <i>aspectjweaver.jar</i> and not needed for LTW because the runtime is already contained as a subset in the weaver jar. The runtime jar is needed for compile-time weaving which is my preferred method to use AspectJ."}],"tags":[],"owner":{"account_id":1087271,"reputation":64101,"user_id":1082681,"accept_rate":90,"display_name":"kriegaex"},"comment_count":3,"down_vote_count":0,"up_vote_count":9,"is_accepted":true,"score":9,"last_activity_date":1488709672,"creation_date":1485438064,"answer_id":41874814,"question_id":41856687,"body_markdown":"Your situation is somewhat complex because you have several problems:\r\n\r\n* You use Spring AOP, an &quot;AOP lite&quot; framework based on dynamic proxies (JDK proxies for interfaces, CGLIB proxies for classes). It only works for Spring beans/components, but from what I see your `LoanClient` is not a Spring `@Component`.\r\n* Even if it was a Spring component, Feign creates its own JDK dynamic proxies via reflection. They are outside the control of Spring. Probably there is a way to wire them into Spring manually, either programmatically or via XML configuration. But there I cannot help you because I do not use Spring.\r\n* Spring AOP only supports a subset of AspectJ pointcuts. Specifically, it does not support `call()` but only `execution()`. I.e. it only weaves into the place where a method is executed, not the place where it is called.\r\n* But the execution takes place in a method implementing an interface and annotations on interface methods such as your `@MeteredRemoteCall` are never inherited by their implementing classes. In fact, method annotations are _never_ inherited in Java, only class-level annotations from class (not interface!) to respective subclass. I.e. even if your annotation class had an `@Inherited` meta annotation, it would not help for `@Target({ElementType.METHOD})`, only for `@Target({ElementType.TYPE})`. **Update:** Because I have answered this question several times before, I have just documented the problem and also a workaround in [Emulate annotation inheritance for interfaces and methods with AspectJ](https://stackoverflow.com/questions/42607015/emulate-annotation-inheritance-for-interfaces-and-methods).\r\n\r\nSo what can you do? The best option would be to [use full AspectJ via LTW](https://docs.spring.io/spring/docs/current/spring-framework-reference/html/aop.html#aop-using-aspectj) (load-time weaving) from within your Spring application. This enables you to use a `call()` pointcut instead of `execution()` which is implicitly used by Spring AOP. If you use `@annotation()` pointcuts on methods in AspectJ, it will match both calls and executions, as I will show you in a stand-alone example (no Spring, but the effect is the same as AspectJ with LTW in Spring):\r\n\r\n**Marker annotation:**\r\n\r\n&lt;!-- language: java --&gt;\r\n\r\n    package de.scrum_master.app;\r\n    \r\n    import java.lang.annotation.ElementType;\r\n    import java.lang.annotation.Retention;\r\n    import java.lang.annotation.RetentionPolicy;\r\n    import java.lang.annotation.Target;\r\n    \r\n    @Retention(RetentionPolicy.RUNTIME)\r\n    @Target(ElementType.METHOD)\r\n    public @interface MeteredRemoteCall {}\r\n\r\n**Feign client:**\r\n\r\nThis sample client grabs full StackOverflow question pages (HTML source code) as strings.\r\n\r\n&lt;!-- language: java --&gt;\r\n\r\n    package de.scrum_master.app;\r\n    \r\n    import feign.Param;\r\n    import feign.RequestLine;\r\n    \r\n    public interface StackOverflowClient {\r\n        @RequestLine(&quot;GET /questions/{questionId}&quot;)\r\n        @MeteredRemoteCall\r\n        String getQuestionPage(@Param(&quot;questionId&quot;) Long questionId);\r\n    }\r\n\r\n**Driver application:**\r\n\r\nThis application uses the Feign client interface in three different ways for demonstration purposes:\r\n\r\n1. Without Feign, manual instantiation via anonymous subclass\r\n2. Like #1, but this time with an extra marker annotation added to the implementing method\r\n3. Canonical usage via Feign\r\n\r\n&lt;!-- language: java --&gt;\r\n\r\n    package de.scrum_master.app;\r\n    \r\n    import java.util.regex.Matcher;\r\n    import java.util.regex.Pattern;\r\n    \r\n    import feign.Feign;\r\n    import feign.codec.StringDecoder;\r\n    \r\n    public class Application {\r\n        public static void main(String[] args) {\r\n            StackOverflowClient soClient;\r\n            long questionId = 41856687L;\r\n    \r\n            soClient = new StackOverflowClient() {\r\n                @Override\r\n                public String getQuestionPage(Long loanId) {\r\n                    return &quot;StackOverflowClient without Feign&quot;;\r\n                }\r\n            };\r\n            System.out.println(&quot;  &quot; + soClient.getQuestionPage(questionId));\r\n    \r\n            soClient = new StackOverflowClient() {\r\n                @Override\r\n                @MeteredRemoteCall\r\n                public String getQuestionPage(Long loanId) {\r\n                    return &quot;StackOverflowClient without Feign + extra annotation&quot;;\r\n                }\r\n            };\r\n            System.out.println(&quot;  &quot; + soClient.getQuestionPage(questionId));\r\n    \r\n            // Create StackOverflowClient via Feign\r\n            String baseUrl = &quot;http://stackoverflow.com&quot;;\r\n            soClient = Feign\r\n                .builder()\r\n                .decoder(new StringDecoder())\r\n                .target(StackOverflowClient.class, baseUrl);\r\n            Matcher titleMatcher = Pattern\r\n                .compile(&quot;&lt;title&gt;([^&lt;]+)&lt;/title&gt;&quot;, Pattern.CASE_INSENSITIVE)\r\n                .matcher(soClient.getQuestionPage(questionId));\r\n            titleMatcher.find();\r\n            System.out.println(&quot;  &quot; + titleMatcher.group(1));\r\n        }\r\n    }\r\n\r\n**Console log without aspect:**\r\n\r\n&lt;!-- language: none --&gt;\r\n\r\n      StackOverflowClient without Feign\r\n      StackOverflowClient without Feign + extra annotation\r\n      java - How to use AOP with Feign calls - Stack Overflow\r\n\r\nAs you can see, in case #3 it just prints the question title of this very StackOverflow question. ;-) I am using the regex matcher in order to extract it from the HTML code because I did not want to print the full web page.\r\n\r\n**Aspect:**\r\n\r\nThis is basically your aspect with additional joinpoint logging.\r\n\r\n&lt;!-- language: java --&gt;\r\n\r\n    package de.scrum_master.aspect;\r\n    \r\n    import org.aspectj.lang.ProceedingJoinPoint;\r\n    import org.aspectj.lang.annotation.Around;\r\n    import org.aspectj.lang.annotation.Aspect;\r\n    \r\n    import de.scrum_master.app.MeteredRemoteCall;\r\n    \r\n    @Aspect\r\n    public class MetricAspect {\r\n        @Around(value = &quot;@annotation(annotation)&quot;, argNames = &quot;joinPoint, annotation&quot;)\r\n        public Object meterRemoteCall(ProceedingJoinPoint joinPoint, MeteredRemoteCall annotation)\r\n            throws Throwable\r\n        {\r\n            System.out.println(joinPoint);\r\n            return joinPoint.proceed();\r\n        }\r\n    }\r\n\r\n**Console log with aspect:**\r\n\r\n&lt;!-- language: none --&gt;\r\n\r\n    call(String de.scrum_master.app.StackOverflowClient.getQuestionPage(Long))\r\n      StackOverflowClient without Feign\r\n    call(String de.scrum_master.app.StackOverflowClient.getQuestionPage(Long))\r\n    execution(String de.scrum_master.app.Application.2.getQuestionPage(Long))\r\n      StackOverflowClient without Feign + extra annotation\r\n    call(String de.scrum_master.app.StackOverflowClient.getQuestionPage(Long))\r\n      java - How to use AOP with Feign calls - Stack Overflow\r\n\r\nAs you can see, the following joinpoints get intercepted for each of the three cases:\r\n\r\n1. Only `call()` because even with manual instantiation the implementing class does not have the interface method&#39;s annotation. So `execution()` cannot be matched.\r\n2. Both `call()` and `execution()` because we manually added the marker annotation to the implementing class.\r\n3. Only `call()` because the dynamic proxy created by Feign does not have the interface method&#39;s annotation. So `execution()` cannot be matched.\r\n\r\nI hope this helps you understand what happened and why.\r\n\r\nBottom line: Use full AspectJ in order to let your pointcut match against `call()` joinpoints. Then your problem is solved.","title":"How to use AOP with Feign calls","body":"<p>Your situation is somewhat complex because you have several problems:</p>\n\n<ul>\n<li>You use Spring AOP, an \"AOP lite\" framework based on dynamic proxies (JDK proxies for interfaces, CGLIB proxies for classes). It only works for Spring beans/components, but from what I see your <code>LoanClient</code> is not a Spring <code>@Component</code>.</li>\n<li>Even if it was a Spring component, Feign creates its own JDK dynamic proxies via reflection. They are outside the control of Spring. Probably there is a way to wire them into Spring manually, either programmatically or via XML configuration. But there I cannot help you because I do not use Spring.</li>\n<li>Spring AOP only supports a subset of AspectJ pointcuts. Specifically, it does not support <code>call()</code> but only <code>execution()</code>. I.e. it only weaves into the place where a method is executed, not the place where it is called.</li>\n<li>But the execution takes place in a method implementing an interface and annotations on interface methods such as your <code>@MeteredRemoteCall</code> are never inherited by their implementing classes. In fact, method annotations are <em>never</em> inherited in Java, only class-level annotations from class (not interface!) to respective subclass. I.e. even if your annotation class had an <code>@Inherited</code> meta annotation, it would not help for <code>@Target({ElementType.METHOD})</code>, only for <code>@Target({ElementType.TYPE})</code>. <strong>Update:</strong> Because I have answered this question several times before, I have just documented the problem and also a workaround in <a href=\"https://stackoverflow.com/questions/42607015/emulate-annotation-inheritance-for-interfaces-and-methods\">Emulate annotation inheritance for interfaces and methods with AspectJ</a>.</li>\n</ul>\n\n<p>So what can you do? The best option would be to <a href=\"https://docs.spring.io/spring/docs/current/spring-framework-reference/html/aop.html#aop-using-aspectj\" rel=\"noreferrer\">use full AspectJ via LTW</a> (load-time weaving) from within your Spring application. This enables you to use a <code>call()</code> pointcut instead of <code>execution()</code> which is implicitly used by Spring AOP. If you use <code>@annotation()</code> pointcuts on methods in AspectJ, it will match both calls and executions, as I will show you in a stand-alone example (no Spring, but the effect is the same as AspectJ with LTW in Spring):</p>\n\n<p><strong>Marker annotation:</strong></p>\n\n<pre class=\"lang-java prettyprint-override\"><code>package de.scrum_master.app;\n\nimport java.lang.annotation.ElementType;\nimport java.lang.annotation.Retention;\nimport java.lang.annotation.RetentionPolicy;\nimport java.lang.annotation.Target;\n\n@Retention(RetentionPolicy.RUNTIME)\n@Target(ElementType.METHOD)\npublic @interface MeteredRemoteCall {}\n</code></pre>\n\n<p><strong>Feign client:</strong></p>\n\n<p>This sample client grabs full StackOverflow question pages (HTML source code) as strings.</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>package de.scrum_master.app;\n\nimport feign.Param;\nimport feign.RequestLine;\n\npublic interface StackOverflowClient {\n    @RequestLine(\"GET /questions/{questionId}\")\n    @MeteredRemoteCall\n    String getQuestionPage(@Param(\"questionId\") Long questionId);\n}\n</code></pre>\n\n<p><strong>Driver application:</strong></p>\n\n<p>This application uses the Feign client interface in three different ways for demonstration purposes:</p>\n\n<ol>\n<li>Without Feign, manual instantiation via anonymous subclass</li>\n<li>Like #1, but this time with an extra marker annotation added to the implementing method</li>\n<li>Canonical usage via Feign</li>\n</ol>\n\n<pre class=\"lang-java prettyprint-override\"><code>package de.scrum_master.app;\n\nimport java.util.regex.Matcher;\nimport java.util.regex.Pattern;\n\nimport feign.Feign;\nimport feign.codec.StringDecoder;\n\npublic class Application {\n    public static void main(String[] args) {\n        StackOverflowClient soClient;\n        long questionId = 41856687L;\n\n        soClient = new StackOverflowClient() {\n            @Override\n            public String getQuestionPage(Long loanId) {\n                return \"StackOverflowClient without Feign\";\n            }\n        };\n        System.out.println(\"  \" + soClient.getQuestionPage(questionId));\n\n        soClient = new StackOverflowClient() {\n            @Override\n            @MeteredRemoteCall\n            public String getQuestionPage(Long loanId) {\n                return \"StackOverflowClient without Feign + extra annotation\";\n            }\n        };\n        System.out.println(\"  \" + soClient.getQuestionPage(questionId));\n\n        // Create StackOverflowClient via Feign\n        String baseUrl = \"http://stackoverflow.com\";\n        soClient = Feign\n            .builder()\n            .decoder(new StringDecoder())\n            .target(StackOverflowClient.class, baseUrl);\n        Matcher titleMatcher = Pattern\n            .compile(\"&lt;title&gt;([^&lt;]+)&lt;/title&gt;\", Pattern.CASE_INSENSITIVE)\n            .matcher(soClient.getQuestionPage(questionId));\n        titleMatcher.find();\n        System.out.println(\"  \" + titleMatcher.group(1));\n    }\n}\n</code></pre>\n\n<p><strong>Console log without aspect:</strong></p>\n\n<pre class=\"lang-none prettyprint-override\"><code>  StackOverflowClient without Feign\n  StackOverflowClient without Feign + extra annotation\n  java - How to use AOP with Feign calls - Stack Overflow\n</code></pre>\n\n<p>As you can see, in case #3 it just prints the question title of this very StackOverflow question. ;-) I am using the regex matcher in order to extract it from the HTML code because I did not want to print the full web page.</p>\n\n<p><strong>Aspect:</strong></p>\n\n<p>This is basically your aspect with additional joinpoint logging.</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>package de.scrum_master.aspect;\n\nimport org.aspectj.lang.ProceedingJoinPoint;\nimport org.aspectj.lang.annotation.Around;\nimport org.aspectj.lang.annotation.Aspect;\n\nimport de.scrum_master.app.MeteredRemoteCall;\n\n@Aspect\npublic class MetricAspect {\n    @Around(value = \"@annotation(annotation)\", argNames = \"joinPoint, annotation\")\n    public Object meterRemoteCall(ProceedingJoinPoint joinPoint, MeteredRemoteCall annotation)\n        throws Throwable\n    {\n        System.out.println(joinPoint);\n        return joinPoint.proceed();\n    }\n}\n</code></pre>\n\n<p><strong>Console log with aspect:</strong></p>\n\n<pre class=\"lang-none prettyprint-override\"><code>call(String de.scrum_master.app.StackOverflowClient.getQuestionPage(Long))\n  StackOverflowClient without Feign\ncall(String de.scrum_master.app.StackOverflowClient.getQuestionPage(Long))\nexecution(String de.scrum_master.app.Application.2.getQuestionPage(Long))\n  StackOverflowClient without Feign + extra annotation\ncall(String de.scrum_master.app.StackOverflowClient.getQuestionPage(Long))\n  java - How to use AOP with Feign calls - Stack Overflow\n</code></pre>\n\n<p>As you can see, the following joinpoints get intercepted for each of the three cases:</p>\n\n<ol>\n<li>Only <code>call()</code> because even with manual instantiation the implementing class does not have the interface method's annotation. So <code>execution()</code> cannot be matched.</li>\n<li>Both <code>call()</code> and <code>execution()</code> because we manually added the marker annotation to the implementing class.</li>\n<li>Only <code>call()</code> because the dynamic proxy created by Feign does not have the interface method's annotation. So <code>execution()</code> cannot be matched.</li>\n</ol>\n\n<p>I hope this helps you understand what happened and why.</p>\n\n<p>Bottom line: Use full AspectJ in order to let your pointcut match against <code>call()</code> joinpoints. Then your problem is solved.</p>\n"},{"tags":[],"owner":{"account_id":5221534,"reputation":314,"user_id":4174849,"display_name":"Omid"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1692089232,"creation_date":1692089232,"answer_id":76904532,"question_id":41856687,"body_markdown":"Maybe it is too late but it can be worked in an easier way. Your code was correct just a tiny bug was there. You should use @within instead of @annotation. I mean the correct code is something like this:\r\n\r\n    @Aspect\r\n    @Component // Spring Component annotation\r\n    public class MetricAspect {\r\n\r\n    @Around(value = &quot;@within(package.path.MeteredRemoteCall)&quot;, argNames = &quot;joinPoint&quot;)\r\n    public Object meterRemoteCall(ProceedingJoinPoint joinPoint) throws Throwable {\r\n      // do something\r\n      }\r\n    }","title":"How to use AOP with Feign calls","body":"<p>Maybe it is too late but it can be worked in an easier way. Your code was correct just a tiny bug was there. You should use @within instead of @annotation. I mean the correct code is something like this:</p>\n<pre><code>@Aspect\n@Component // Spring Component annotation\npublic class MetricAspect {\n\n@Around(value = &quot;@within(package.path.MeteredRemoteCall)&quot;, argNames = &quot;joinPoint&quot;)\npublic Object meterRemoteCall(ProceedingJoinPoint joinPoint) throws Throwable {\n  // do something\n  }\n}\n</code></pre>\n"}],"owner":{"account_id":7281026,"reputation":371,"user_id":5550788,"accept_rate":50,"display_name":"Anton Arsentyev"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":4000,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":41874814,"answer_count":2,"score":2,"last_activity_date":1692089232,"creation_date":1485361688,"question_id":41856687,"body_markdown":"I am interested in how to use Feign client in AOP.  For example:\r\n\r\n**API:**\r\n    \r\n    public interface LoanClient {\r\n        @RequestLine(&quot;GET /loans/{loanId}&quot;)\r\n        @MeteredRemoteCall(&quot;loans&quot;)\r\n        Loan getLoan(@Param(&quot;loanId&quot;) Long loanId);\r\n    }\r\n\r\n**Config:**\r\n    \r\n    @Aspect\r\n    @Component // Spring Component annotation\r\n    public class MetricAspect {\r\n\r\n        @Around(value = &quot;@annotation(annotation)&quot;, argNames = &quot;joinPoint, annotation&quot;)\r\n        public Object meterRemoteCall(ProceedingJoinPoint joinPoint, \r\n                            MeteredRemoteCall annotation) throws Throwable {\r\n        // do something\r\n      }\r\n    }\r\n\r\n\r\nBut I do not know how to &quot;intercept&quot; the api method call. Where did I go wrong?\r\n\r\n**UPDATE:**\r\n\r\nMy Spring class annotation:\r\n\r\n    @Target({ElementType.METHOD})\r\n    @Retention(RetentionPolicy.RUNTIME)\r\n    public @interface MeteredRemoteCall {\r\n    \r\n        String serviceName();\r\n    }\r\n\r\n","title":"How to use AOP with Feign calls","body":"<p>I am interested in how to use Feign client in AOP.  For example:</p>\n\n<p><strong>API:</strong></p>\n\n<pre><code>public interface LoanClient {\n    @RequestLine(\"GET /loans/{loanId}\")\n    @MeteredRemoteCall(\"loans\")\n    Loan getLoan(@Param(\"loanId\") Long loanId);\n}\n</code></pre>\n\n<p><strong>Config:</strong></p>\n\n<pre><code>@Aspect\n@Component // Spring Component annotation\npublic class MetricAspect {\n\n    @Around(value = \"@annotation(annotation)\", argNames = \"joinPoint, annotation\")\n    public Object meterRemoteCall(ProceedingJoinPoint joinPoint, \n                        MeteredRemoteCall annotation) throws Throwable {\n    // do something\n  }\n}\n</code></pre>\n\n<p>But I do not know how to \"intercept\" the api method call. Where did I go wrong?</p>\n\n<p><strong>UPDATE:</strong></p>\n\n<p>My Spring class annotation:</p>\n\n<pre><code>@Target({ElementType.METHOD})\n@Retention(RetentionPolicy.RUNTIME)\npublic @interface MeteredRemoteCall {\n\n    String serviceName();\n}\n</code></pre>\n"},{"tags":["java","jackson","rest-assured"],"comments":[{"owner":{"account_id":5889708,"reputation":6453,"user_id":4636715,"accept_rate":100,"display_name":"vahdet"},"score":0,"creation_date":1530038483,"post_id":51049449,"comment_id":89090094,"body_markdown":"Possible duplicate of [Jackson with JSON: Unrecognized field, not marked as ignorable](https://stackoverflow.com/questions/4486787/jackson-with-json-unrecognized-field-not-marked-as-ignorable)","body":"Possible duplicate of <a href=\"https://stackoverflow.com/questions/4486787/jackson-with-json-unrecognized-field-not-marked-as-ignorable\">Jackson with JSON: Unrecognized field, not marked as ignorable</a>"}],"answers":[{"comments":[{"owner":{"account_id":5541413,"reputation":6397,"user_id":4397788,"display_name":"Luciano van der Veekens"},"score":1,"creation_date":1530610250,"post_id":51096364,"comment_id":89285615,"body_markdown":"@AakashGoyal I believe by default Jackson searches for getters/setters to find properties in a class. Because your class doesn&#39;t have those, you need the annotations.","body":"@AakashGoyal I believe by default Jackson searches for getters/setters to find properties in a class. Because your class doesn&#39;t have those, you need the annotations."}],"tags":[],"owner":{"account_id":5541413,"reputation":6397,"user_id":4397788,"display_name":"Luciano van der Veekens"},"comment_count":1,"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1692089134,"creation_date":1530256948,"answer_id":51096364,"question_id":51049449,"body_markdown":"You should actually not be ignoring unknown properties, because there are none. The response is exactly what you expect:\r\n\r\n    { \r\n      &quot;FaultId&quot;: &quot;User already exists&quot;,\r\n      &quot;fault&quot;: &quot;FAULT_USER_ALREADY_EXISTS&quot;\r\n    }\r\n\r\nBut your response class is misconfigured. Try annotating your fields with @JsonProperty.\r\n\r\n    public class RegistrationFailureResponse {\r\n        @JsonProperty private String FaultId;\r\n        @JsonProperty private String fault;\r\n    }\r\n","title":"In REST Assured, how do I solve UnrecognizedPropertyException when mapping response to an object?","body":"<p>You should actually not be ignoring unknown properties, because there are none. The response is exactly what you expect:</p>\n<pre><code>{ \n  &quot;FaultId&quot;: &quot;User already exists&quot;,\n  &quot;fault&quot;: &quot;FAULT_USER_ALREADY_EXISTS&quot;\n}\n</code></pre>\n<p>But your response class is misconfigured. Try annotating your fields with @JsonProperty.</p>\n<pre><code>public class RegistrationFailureResponse {\n    @JsonProperty private String FaultId;\n    @JsonProperty private String fault;\n}\n</code></pre>\n"}],"owner":{"account_id":4885061,"reputation":305,"user_id":3937767,"accept_rate":58,"display_name":"Aakash Goyal"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":3738,"favorite_count":0,"down_vote_count":0,"up_vote_count":4,"accepted_answer_id":51096364,"answer_count":1,"score":4,"last_activity_date":1692089134,"creation_date":1530038056,"question_id":51049449,"body_markdown":"I am new to REST Assured API testing, I have already added jackson-databind, jackson-annotations and jackson-core All 2.9.6 versions to the library.\r\n\r\nBelow is my code:     \r\n\r\n    public class SerializeAndDeserialize {\r\n\r\n\t    @Test\r\n\t    public void RegistrationSuccessful()\r\n\t    {\t\r\n\t\t\r\n\t    \tRestAssured.baseURI =&quot;http://restapi.demoqa.com/customer&quot;;\r\n\t\t    RequestSpecification request = RestAssured.given();\r\n\t \r\n    \t\tJSONObject requestParams = new JSONObject();\r\n\t    \trequestParams.put(&quot;FirstName&quot;, &quot;Virkjdender&quot;); // Cast\r\n\t\t    requestParams.put(&quot;LastName&quot;, &quot;Scklxjingh&quot;);\r\n    \t\trequestParams.put(&quot;UserName&quot;, &quot;63userf2d3cn,mxd2011&quot;);\r\n    \t\trequestParams.put(&quot;Password&quot;, &quot;passwors000mxzmd1&quot;);\t\r\n\t    \trequestParams.put(&quot;Email&quot;,  &quot;ed26dfdasdf39@gmail.com&quot;);\t\r\n\t\t\r\n\t\t\r\n\t\t    request.body(requestParams.toJSONString());\r\n     \t\tResponse response = request.post(&quot;/register&quot;);\r\n\t \r\n\t    \tResponseBody body = response.getBody();\r\n\t\t    System.out.println(response.body().asString());\r\n    \t\tSystem.out.println(response.contentType());\r\n    \t\tSystem.out.println(response.getStatusCode());\t\t\r\n \t\t\r\n    \t\tif(response.statusCode() == 200)\r\n\t    \t{\r\n\t\t    \t// Deserialize the Response body into RegistrationFailureResponse\r\n\t    \t\tRegistrationFailureResponse responseBody = body.as(RegistrationFailureResponse.class);\t \r\n    \t\t\tAssert.assertEquals(&quot;User already exists&quot;, responseBody.FaultId);\r\n\t    \t\tAssert.assertEquals(&quot;FAULT_USER_ALREADY_EXISTS&quot;, responseBody.fault);\t\r\n\t\t    }\r\n    \t\telse if (response.statusCode() == 201)\r\n\t    \t{\r\n\t\t    \t// Deserialize the Response body into RegistrationSuccessResponse\r\n\t\t\t    RegistrationSuccessResponse responseBody = body.as(RegistrationSuccessResponse.class);\t\t\t\r\n    \t\t\tAssert.assertEquals(&quot;OPERATION_SUCCESS&quot;, responseBody.SuccessCode);\r\n\t    \t\tAssert.assertEquals(&quot;Operation completed successfully&quot;, responseBody.Message);\t\r\n\t\t    }\t\r\n    \t}\r\n    }\r\n\r\nAnd the related classes are below:\r\n\r\n    public class RegistrationFailureResponse {\t\r\n        @JsonIgnoreProperties(ignoreUnknown = true)\t\r\n\r\n\t    String FaultId;\r\n\t    String fault;\t\r\n    }\r\n\r\nAnother one :\r\n     \r\n    public class RegistrationSuccessResponse {\t\r\n        @JsonIgnoreProperties(ignoreUnknown = true)\r\n\t\r\n\t    public String SuccessCode;\t \r\n\t    public String Message;\r\n    }\r\n\r\nWhen I try to run the above code tyhrough Testng.xml file , I get following error:\r\n\r\n&gt;com.fasterxml.jackson.databind.exc.UnrecognizedPropertyException: Unrecognized field &quot;FaultId&quot; (class RegistrationFailureResponse), not marked as ignorable (0 known properties: ])\r\n at [Source: (String)&quot;{\r\n    &quot;FaultId&quot;: &quot;User already exists&quot;,\r\n    &quot;fault&quot;: &quot;FAULT_USER_ALREADY_EXISTS&quot;\r\n}&quot;; line: 2, column: 17] (through reference chain: RegistrationFailureResponse[&quot;FaultId&quot;])\r\n\tat com.fasterxml.jackson.databind.exc.UnrecognizedPropertyException.from(UnrecognizedPropertyException.java:60)\r\n\tat com.fasterxml.jackson.databind.DeserializationContext.handleUnknownProperty(DeserializationContext.java:822)\r\n\tat com.fasterxml.jackson.databind.deser.std.StdDeserializer.handleUnknownProperty(StdDeserializer.java:1152)\r\n\tat com.fasterxml.jackson.databind.deser.BeanDeserializerBase.handleUnknownProperty(BeanDeserializerBase.java:1589)\r\n\tat com.fasterxml.jackson.databind.deser.BeanDeserializerBase.handleUnknownVanilla(BeanDeserializerBase.java:1567)\r\n\tat com.fasterxml.jackson.databind.deser.BeanDeserializer.vanillaDeserialize(BeanDeserializer.java:294)\r\n\tat com.fasterxml.jackson.databind.deser.BeanDeserializer.deserialize(BeanDeserializer.java:151)\r\n\tat com.fasterxml.jackson.databind.ObjectMapper._readMapAndClose(ObjectMapper.java:4013)\r\n\tat com.fasterxml.jackson.databind.ObjectMapper.readValue(ObjectMapper.java:3042)\r\n\tat com.fasterxml.jackson.databind.ObjectMapper$readValue$0.call(Unknown Source)\r\n\tat org.codehaus.groovy.runtime.callsite.CallSiteArray.defaultCall(CallSiteArray.java:48)\r\n\tat org.codehaus.groovy.runtime.callsite.AbstractCallSite.call(AbstractCallSite.java:113)\r\n\t......\r\n\r\n\r\nPlease help, I googled the solutions but none of it is related to what I am facing here","title":"In REST Assured, how do I solve UnrecognizedPropertyException when mapping response to an object?","body":"<p>I am new to REST Assured API testing, I have already added jackson-databind, jackson-annotations and jackson-core All 2.9.6 versions to the library.</p>\n\n<p>Below is my code:     </p>\n\n<pre><code>public class SerializeAndDeserialize {\n\n    @Test\n    public void RegistrationSuccessful()\n    {   \n\n        RestAssured.baseURI =\"http://restapi.demoqa.com/customer\";\n        RequestSpecification request = RestAssured.given();\n\n        JSONObject requestParams = new JSONObject();\n        requestParams.put(\"FirstName\", \"Virkjdender\"); // Cast\n        requestParams.put(\"LastName\", \"Scklxjingh\");\n        requestParams.put(\"UserName\", \"63userf2d3cn,mxd2011\");\n        requestParams.put(\"Password\", \"passwors000mxzmd1\"); \n        requestParams.put(\"Email\",  \"ed26dfdasdf39@gmail.com\"); \n\n\n        request.body(requestParams.toJSONString());\n        Response response = request.post(\"/register\");\n\n        ResponseBody body = response.getBody();\n        System.out.println(response.body().asString());\n        System.out.println(response.contentType());\n        System.out.println(response.getStatusCode());       \n\n        if(response.statusCode() == 200)\n        {\n            // Deserialize the Response body into RegistrationFailureResponse\n            RegistrationFailureResponse responseBody = body.as(RegistrationFailureResponse.class);   \n            Assert.assertEquals(\"User already exists\", responseBody.FaultId);\n            Assert.assertEquals(\"FAULT_USER_ALREADY_EXISTS\", responseBody.fault);   \n        }\n        else if (response.statusCode() == 201)\n        {\n            // Deserialize the Response body into RegistrationSuccessResponse\n            RegistrationSuccessResponse responseBody = body.as(RegistrationSuccessResponse.class);          \n            Assert.assertEquals(\"OPERATION_SUCCESS\", responseBody.SuccessCode);\n            Assert.assertEquals(\"Operation completed successfully\", responseBody.Message);  \n        }   \n    }\n}\n</code></pre>\n\n<p>And the related classes are below:</p>\n\n<pre><code>public class RegistrationFailureResponse {  \n    @JsonIgnoreProperties(ignoreUnknown = true) \n\n    String FaultId;\n    String fault;   \n}\n</code></pre>\n\n<p>Another one :</p>\n\n<pre><code>public class RegistrationSuccessResponse {  \n    @JsonIgnoreProperties(ignoreUnknown = true)\n\n    public String SuccessCode;   \n    public String Message;\n}\n</code></pre>\n\n<p>When I try to run the above code tyhrough Testng.xml file , I get following error:</p>\n\n<blockquote>\n  <p>com.fasterxml.jackson.databind.exc.UnrecognizedPropertyException: Unrecognized field \"FaultId\" (class RegistrationFailureResponse), not marked as ignorable (0 known properties: ])\n   at [Source: (String)\"{\n      \"FaultId\": \"User already exists\",\n      \"fault\": \"FAULT_USER_ALREADY_EXISTS\"\n  }\"; line: 2, column: 17] (through reference chain: RegistrationFailureResponse[\"FaultId\"])\n      at com.fasterxml.jackson.databind.exc.UnrecognizedPropertyException.from(UnrecognizedPropertyException.java:60)\n      at com.fasterxml.jackson.databind.DeserializationContext.handleUnknownProperty(DeserializationContext.java:822)\n      at com.fasterxml.jackson.databind.deser.std.StdDeserializer.handleUnknownProperty(StdDeserializer.java:1152)\n      at com.fasterxml.jackson.databind.deser.BeanDeserializerBase.handleUnknownProperty(BeanDeserializerBase.java:1589)\n      at com.fasterxml.jackson.databind.deser.BeanDeserializerBase.handleUnknownVanilla(BeanDeserializerBase.java:1567)\n      at com.fasterxml.jackson.databind.deser.BeanDeserializer.vanillaDeserialize(BeanDeserializer.java:294)\n      at com.fasterxml.jackson.databind.deser.BeanDeserializer.deserialize(BeanDeserializer.java:151)\n      at com.fasterxml.jackson.databind.ObjectMapper._readMapAndClose(ObjectMapper.java:4013)\n      at com.fasterxml.jackson.databind.ObjectMapper.readValue(ObjectMapper.java:3042)\n      at com.fasterxml.jackson.databind.ObjectMapper$readValue$0.call(Unknown Source)\n      at org.codehaus.groovy.runtime.callsite.CallSiteArray.defaultCall(CallSiteArray.java:48)\n      at org.codehaus.groovy.runtime.callsite.AbstractCallSite.call(AbstractCallSite.java:113)\n      ......</p>\n</blockquote>\n\n<p>Please help, I googled the solutions but none of it is related to what I am facing here</p>\n"},{"tags":["java","oop","design-patterns","strategy-pattern"],"comments":[{"owner":{"account_id":3380632,"reputation":14294,"user_id":2837741,"accept_rate":100,"display_name":"daniu"},"score":0,"creation_date":1614185014,"post_id":66355002,"comment_id":117310360,"body_markdown":"It&#39;s not at all clear to me how the data flow is either before nor after. Maybe some sample code how a single data item is updated with all classes involved would help.","body":"It&#39;s not at all clear to me how the data flow is either before nor after. Maybe some sample code how a single data item is updated with all classes involved would help."},{"owner":{"account_id":1992310,"reputation":11172,"user_id":1786065,"accept_rate":91,"display_name":"Rogue"},"score":0,"creation_date":1614185199,"post_id":66355002,"comment_id":117310426,"body_markdown":"Strattegy is always kind of a weak pattern; I&#39;d go for an adapter on those different sources, which could be used compositionally by `PicData`. As far as usage, the `PicData` shouldn&#39;t really know anything about the `Connection`, rather some intermediary class would serialize/handle sending the data for it over the connections.","body":"Strattegy is always kind of a weak pattern; I&#39;d go for an adapter on those different sources, which could be used compositionally by <code>PicData</code>. As far as usage, the <code>PicData</code> shouldn&#39;t really know anything about the <code>Connection</code>, rather some intermediary class would serialize/handle sending the data for it over the connections."},{"owner":{"account_id":16634092,"reputation":798,"user_id":12804925,"display_name":"Jakub Znamen&#225;ček"},"score":0,"creation_date":1614185913,"post_id":66355002,"comment_id":117310770,"body_markdown":"@daniu Hi, I have provided link to the GitHub, there you can check how I am handling the data flow (IN CURRENT DESIGN) basically now the PlcDataOpcua handles also the connection so it keeps the data in PlcData up to date. So when I need to do something based on the change of some variable I subscribe to given variable. In my diagram for example the display would display all attributes of PlcData when ever the ConnectionStatus changes.","body":"@daniu Hi, I have provided link to the GitHub, there you can check how I am handling the data flow (IN CURRENT DESIGN) basically now the PlcDataOpcua handles also the connection so it keeps the data in PlcData up to date. So when I need to do something based on the change of some variable I subscribe to given variable. In my diagram for example the display would display all attributes of PlcData when ever the ConnectionStatus changes."},{"owner":{"account_id":16634092,"reputation":798,"user_id":12804925,"display_name":"Jakub Znamen&#225;ček"},"score":0,"creation_date":1614186878,"post_id":66355002,"comment_id":117311170,"body_markdown":"@Rogue do you mean to use adapter for connection? Could you be more specific?","body":"@Rogue do you mean to use adapter for connection? Could you be more specific?"},{"owner":{"account_id":1992310,"reputation":11172,"user_id":1786065,"accept_rate":91,"display_name":"Rogue"},"score":0,"creation_date":1614192231,"post_id":66355002,"comment_id":117313338,"body_markdown":"@JakubZnamen&#225;ček no, the three `*Source` classes could be brought under a single adapter.","body":"@JakubZnamen&#225;ček no, the three <code>*Source</code> classes could be brought under a single adapter."},{"owner":{"account_id":16634092,"reputation":798,"user_id":12804925,"display_name":"Jakub Znamen&#225;ček"},"score":0,"creation_date":1614244863,"post_id":66355002,"comment_id":117328403,"body_markdown":"@Rogue could you give me an example how you would implement it, I am probably missing what it would help.","body":"@Rogue could you give me an example how you would implement it, I am probably missing what it would help."}],"answers":[{"tags":[],"owner":{"account_id":949945,"reputation":147,"user_id":8575545,"display_name":"mlntdrv"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1692088589,"creation_date":1692088589,"answer_id":76904468,"question_id":66355002,"body_markdown":"Your new design will require a so called billateral association between `PlcData` and `Connection`, meaning both should hold references to each other. This is combersome.\r\n\r\nInstead use the &#39;Replace bidirectional association with unidirectional&#39; refactoring. That way only `PlcData` will know about `Connection`, but not vice versa.\r\n\r\n`PlcData` is responsible for updating its own fields. `Connection` shouldn&#39;t know about this (it should only... connect). This means the `Connection#update*` methods belong to `PlcData`.\r\n\r\nPS: Also this smells more like the `Bridge` pattern. `Strategy` enapculates algorithms and I am not sure this is the case here.","title":"How to replace abstract class? (composition instead of inheritance) - concrete problem","body":"<p>Your new design will require a so called billateral association between <code>PlcData</code> and <code>Connection</code>, meaning both should hold references to each other. This is combersome.</p>\n<p>Instead use the 'Replace bidirectional association with unidirectional' refactoring. That way only <code>PlcData</code> will know about <code>Connection</code>, but not vice versa.</p>\n<p><code>PlcData</code> is responsible for updating its own fields. <code>Connection</code> shouldn't know about this (it should only... connect). This means the <code>Connection#update*</code> methods belong to <code>PlcData</code>.</p>\n<p>PS: Also this smells more like the <code>Bridge</code> pattern. <code>Strategy</code> enapculates algorithms and I am not sure this is the case here.</p>\n"}],"owner":{"account_id":16634092,"reputation":798,"user_id":12804925,"display_name":"Jakub Znamen&#225;ček"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":292,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":1,"score":2,"last_activity_date":1692088589,"creation_date":1614184478,"question_id":66355002,"body_markdown":"my problem started when I wanted to write unit test for an abstract class (test the common methods) than I discovered it would be probably better to prefer composition instead of inheritance (I can use mocks for the part which is changing &quot;connection&quot;)\r\n\r\nNow I have hard time to come up with some design which would be correct so could someone help me here?\r\n\r\nWhole my code can be found [here](https://github.com/bzumik1/metalForming/tree/master/src/main/java/com/siemens/metal_forming/connection) but for simplicity I will try to describe it shortly here. I have class `PlcData` which represents current status of variables I need which are read from PLC. The `PlcData` represents subject in **observer pattern** and I subscribe to it with different classes (I also need to know what exact attribute has been changed that is why `PlcData` implements &quot;source&quot; interface for each attribute I need to observe, I also need to get all data when the attribute is changed because based on some other attributes I search in database - that is why I send whole `PlcData` when any attribute changes). I would like to keep the observers of `PlcData` independent on connection (how the `PlcData` reads/writes variables from PLC).\r\n\r\nHere is my original design with abstract `PlcData`:[![Current design][1]][1]\r\n\r\n\r\nI would like to achieve something like this (a lot of programmers confirmed me that this is the correct way) where the `PlcData` is concrete class (I could use also interface for it in future) and the connection is as attribute of `PlcData`:\r\n[![New design][2]][2]\r\n\r\nMy problem is that I don&#39;t know how to correctly implement this. The each concrete class of &quot;Connection&quot; will use some library and will have a lot of specifics here but it should handle the subscription, read, write to those &quot;important&quot; variables (serialNumber, measuredCurve ... - in real code I have more of them but they are exactly given). But I would like this to be invisible for `PlcData` &quot;user&quot; so he would just call some factory method `PlcDataProvider.getPlcData()` and he would get instance of PlcData with initialised connection and he would just subscribe to variables he needs (or write to those variables and the `PlcData` class would handle how to send them to PLC over the &quot;Connection&quot; interface.\r\n\r\n***MY BIGGEST PROBLEMS***\r\n\r\n1. I don&#39;t know how to correctly make the `Connection` updating the `PlcData` and how to  write to real PLC variables over it (I am really lost here and I end up with three methods for each attribute (writeSerialNumber, readSerialNumber, subscribeToSerialNumber and the `Connection` needs to keep track of `PlcData`)\r\n\r\n1. How to correctly create PlcData using some factory\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/xD2Zo.jpg\r\n  [2]: https://i.stack.imgur.com/RZ6Np.jpg","title":"How to replace abstract class? (composition instead of inheritance) - concrete problem","body":"<p>my problem started when I wanted to write unit test for an abstract class (test the common methods) than I discovered it would be probably better to prefer composition instead of inheritance (I can use mocks for the part which is changing &quot;connection&quot;)</p>\n<p>Now I have hard time to come up with some design which would be correct so could someone help me here?</p>\n<p>Whole my code can be found <a href=\"https://github.com/bzumik1/metalForming/tree/master/src/main/java/com/siemens/metal_forming/connection\" rel=\"nofollow noreferrer\">here</a> but for simplicity I will try to describe it shortly here. I have class <code>PlcData</code> which represents current status of variables I need which are read from PLC. The <code>PlcData</code> represents subject in <strong>observer pattern</strong> and I subscribe to it with different classes (I also need to know what exact attribute has been changed that is why <code>PlcData</code> implements &quot;source&quot; interface for each attribute I need to observe, I also need to get all data when the attribute is changed because based on some other attributes I search in database - that is why I send whole <code>PlcData</code> when any attribute changes). I would like to keep the observers of <code>PlcData</code> independent on connection (how the <code>PlcData</code> reads/writes variables from PLC).</p>\n<p>Here is my original design with abstract <code>PlcData</code>:<a href=\"https://i.stack.imgur.com/xD2Zo.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/xD2Zo.jpg\" alt=\"Current design\" /></a></p>\n<p>I would like to achieve something like this (a lot of programmers confirmed me that this is the correct way) where the <code>PlcData</code> is concrete class (I could use also interface for it in future) and the connection is as attribute of <code>PlcData</code>:\n<a href=\"https://i.stack.imgur.com/RZ6Np.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/RZ6Np.jpg\" alt=\"New design\" /></a></p>\n<p>My problem is that I don't know how to correctly implement this. The each concrete class of &quot;Connection&quot; will use some library and will have a lot of specifics here but it should handle the subscription, read, write to those &quot;important&quot; variables (serialNumber, measuredCurve ... - in real code I have more of them but they are exactly given). But I would like this to be invisible for <code>PlcData</code> &quot;user&quot; so he would just call some factory method <code>PlcDataProvider.getPlcData()</code> and he would get instance of PlcData with initialised connection and he would just subscribe to variables he needs (or write to those variables and the <code>PlcData</code> class would handle how to send them to PLC over the &quot;Connection&quot; interface.</p>\n<p><em><strong>MY BIGGEST PROBLEMS</strong></em></p>\n<ol>\n<li><p>I don't know how to correctly make the <code>Connection</code> updating the <code>PlcData</code> and how to  write to real PLC variables over it (I am really lost here and I end up with three methods for each attribute (writeSerialNumber, readSerialNumber, subscribeToSerialNumber and the <code>Connection</code> needs to keep track of <code>PlcData</code>)</p>\n</li>\n<li><p>How to correctly create PlcData using some factory</p>\n</li>\n</ol>\n"},{"tags":["java","pytorch","openai-whisper","djl"],"answers":[{"tags":[],"owner":{"account_id":18830233,"reputation":21,"user_id":14698364,"display_name":"Cosmic Sparkle"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1692088147,"creation_date":1692088147,"answer_id":76904425,"question_id":76901982,"body_markdown":"Figured it out, posting here just in case others too encounter this.\r\n\r\nIn the processInput function of the WhisperTranslator, change the line below:\r\n\r\n    NDArray placeholder = ctx.getNDManager().create(&quot;&quot;).toDevice(device, true);\r\nwith\r\n\r\n    NDArray placeholder = ctx.getNDManager().create(new float[0]).toDevice(device, true);\r\n\r\nOf course the toDevice(gpu(0), copy=true) has to added too, in your extension of the WhisperTranslator class. (which for me is WhisperGPUTranslator, as described in the question)","title":"Whisper Zoo model on DJL with GPU: Getting error &quot;c10::intrusive_ptr&lt;c10::TensorImpl, c10::UndefinedTensorImpl&gt;::operator-&gt;() const+0xc&quot;","body":"<p>Figured it out, posting here just in case others too encounter this.</p>\n<p>In the processInput function of the WhisperTranslator, change the line below:</p>\n<pre><code>NDArray placeholder = ctx.getNDManager().create(&quot;&quot;).toDevice(device, true);\n</code></pre>\n<p>with</p>\n<pre><code>NDArray placeholder = ctx.getNDManager().create(new float[0]).toDevice(device, true);\n</code></pre>\n<p>Of course the toDevice(gpu(0), copy=true) has to added too, in your extension of the WhisperTranslator class. (which for me is WhisperGPUTranslator, as described in the question)</p>\n"}],"owner":{"account_id":18830233,"reputation":21,"user_id":14698364,"display_name":"Cosmic Sparkle"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":49,"favorite_count":0,"down_vote_count":2,"up_vote_count":1,"answer_count":1,"score":-1,"last_activity_date":1692088147,"creation_date":1692044953,"question_id":76901982,"body_markdown":"I&#39;m trying to run the Whisper zoo model from DJL examples in GPU. \r\n\r\nIn the first run, I got the error that two devices were found - Cuda and CPU. \r\n\r\nAs I understood that this error occurs due to just the model being in the GPU and not the input, as a fix, I created two classes extending WhisperTranslator and WhisperTranslatorFactory, namely WhisperGPUTranslator and WhisperGPUTranslatorFactory. These classes were made so as to do NDArray.to(gpu(0)) on the processed input image-data.\r\n\r\nThis worked to help me start the application. However as soon as the inference is made, I get this error:\r\n\r\n```\r\n# A fatal error has been detected by the Java Runtime Environment:\r\n#\r\n#  SIGSEGV (0xb) at pc=0x00007f971f918000, pid=22329, tid=22431\r\n#\r\n# JRE version: OpenJDK Runtime Environment (11.0.20+8) (build 11.0.20+8-post-Ubuntu-1ubuntu123.04)\r\n# Java VM: OpenJDK 64-Bit Server VM (11.0.20+8-post-Ubuntu-1ubuntu123.04, mixed mode, sharing, tiered, compressed oops, g1 gc, linux-amd64)\r\n# Problematic frame:\r\n# C  [0.23.0-libdjl_torch.so+0x118000]  c10::intrusive_ptr&lt;c10::TensorImpl, c10::UndefinedTensorImpl&gt;::operator-&gt;() const+0xc\r\n\r\n```\r\n\r\n\r\n\r\nTried changing the versions from DJL and DJL-Pytorch-Engine version from 23.0 to 21.1 (below which the example code doesn&#39;t compile). Got the exact same error every time.\r\n\r\nHoping someone here might have the insight on how to fix this. Please help.","title":"Whisper Zoo model on DJL with GPU: Getting error &quot;c10::intrusive_ptr&lt;c10::TensorImpl, c10::UndefinedTensorImpl&gt;::operator-&gt;() const+0xc&quot;","body":"<p>I'm trying to run the Whisper zoo model from DJL examples in GPU.</p>\n<p>In the first run, I got the error that two devices were found - Cuda and CPU.</p>\n<p>As I understood that this error occurs due to just the model being in the GPU and not the input, as a fix, I created two classes extending WhisperTranslator and WhisperTranslatorFactory, namely WhisperGPUTranslator and WhisperGPUTranslatorFactory. These classes were made so as to do NDArray.to(gpu(0)) on the processed input image-data.</p>\n<p>This worked to help me start the application. However as soon as the inference is made, I get this error:</p>\n<pre><code># A fatal error has been detected by the Java Runtime Environment:\n#\n#  SIGSEGV (0xb) at pc=0x00007f971f918000, pid=22329, tid=22431\n#\n# JRE version: OpenJDK Runtime Environment (11.0.20+8) (build 11.0.20+8-post-Ubuntu-1ubuntu123.04)\n# Java VM: OpenJDK 64-Bit Server VM (11.0.20+8-post-Ubuntu-1ubuntu123.04, mixed mode, sharing, tiered, compressed oops, g1 gc, linux-amd64)\n# Problematic frame:\n# C  [0.23.0-libdjl_torch.so+0x118000]  c10::intrusive_ptr&lt;c10::TensorImpl, c10::UndefinedTensorImpl&gt;::operator-&gt;() const+0xc\n\n</code></pre>\n<p>Tried changing the versions from DJL and DJL-Pytorch-Engine version from 23.0 to 21.1 (below which the example code doesn't compile). Got the exact same error every time.</p>\n<p>Hoping someone here might have the insight on how to fix this. Please help.</p>\n"},{"tags":["java","spring-boot","dockerfile","render.com"],"comments":[{"owner":{"account_id":3192259,"reputation":117619,"user_id":2696260,"display_name":"M. Deinum"},"score":2,"creation_date":1692081998,"post_id":76903843,"comment_id":135573106,"body_markdown":"`release version 17 not supported` is pretty clear. Use a JDK17 image, you are now using a JDK11 image, which obviously won&#39;t support Java 17.","body":"<code>release version 17 not supported</code> is pretty clear. Use a JDK17 image, you are now using a JDK11 image, which obviously won&#39;t support Java 17."},{"owner":{"account_id":1127859,"reputation":897,"user_id":1114682,"accept_rate":9,"display_name":"Noriaki Takamizawa"},"score":0,"creation_date":1692086841,"post_id":76903843,"comment_id":135573837,"body_markdown":"Thanks for the quick response. After replaced maven:3.8.3-openjdk-17, this error is clear but encounter next error. Will post another issue.","body":"Thanks for the quick response. After replaced maven:3.8.3-openjdk-17, this error is clear but encounter next error. Will post another issue."}],"answers":[{"tags":[],"owner":{"account_id":1127859,"reputation":897,"user_id":1114682,"accept_rate":9,"display_name":"Noriaki Takamizawa"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1692086954,"creation_date":1692086954,"answer_id":76904311,"question_id":76903843,"body_markdown":"Thanks @M. Deinum.\r\nI changed Dockerfile first line to below. It clear this error.\r\n```\r\nFROM maven:3.8.3-openjdk-17 AS build\r\n```","title":"How to write Dockerfile for Render.com deployment","body":"<p>Thanks @M. Deinum.\nI changed Dockerfile first line to below. It clear this error.</p>\n<pre><code>FROM maven:3.8.3-openjdk-17 AS build\n</code></pre>\n"},{"comments":[{"owner":{"account_id":1127859,"reputation":897,"user_id":1114682,"accept_rate":9,"display_name":"Noriaki Takamizawa"},"score":0,"creation_date":1692087693,"post_id":76904333,"comment_id":135573986,"body_markdown":"Oh, Thank you! It helps. But another error occurs. Please see above.","body":"Oh, Thank you! It helps. But another error occurs. Please see above."},{"owner":{"account_id":3192259,"reputation":117619,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1692087759,"post_id":76904333,"comment_id":135574001,"body_markdown":"Which is another question, don&#39;t shoehorn multiple questions into 1.","body":"Which is another question, don&#39;t shoehorn multiple questions into 1."},{"owner":{"account_id":1127859,"reputation":897,"user_id":1114682,"accept_rate":9,"display_name":"Noriaki Takamizawa"},"score":0,"creation_date":1692087860,"post_id":76904333,"comment_id":135574019,"body_markdown":"Oh, I see. Thanks anyway.","body":"Oh, I see. Thanks anyway."},{"owner":{"account_id":3192259,"reputation":117619,"user_id":2696260,"display_name":"M. Deinum"},"score":1,"creation_date":1692087922,"post_id":76904333,"comment_id":135574029,"body_markdown":"I did notice your running was also JDK11, I dupdated the answer to also fix that (both need to be JDK17).","body":"I did notice your running was also JDK11, I dupdated the answer to also fix that (both need to be JDK17)."},{"owner":{"account_id":1127859,"reputation":897,"user_id":1114682,"accept_rate":9,"display_name":"Noriaki Takamizawa"},"score":0,"creation_date":1692088549,"post_id":76904333,"comment_id":135574125,"body_markdown":"Super thatnks. I posted another issue and I can understand what happened.","body":"Super thatnks. I posted another issue and I can understand what happened."}],"tags":[],"owner":{"account_id":3192259,"reputation":117619,"user_id":2696260,"display_name":"M. Deinum"},"comment_count":5,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1692087901,"creation_date":1692087171,"answer_id":76904333,"question_id":76903843,"body_markdown":"Your `Dockerfile` uses the following declaration\r\n\r\n```\r\nFROM maven:3.8.2-jdk-11 AS build\r\n```\r\n\r\nWhich means it will pull in a Docker Image with JDK11. \r\n\r\nThe error you get \r\n\r\n```\r\nproject QuickMaster: Fatal error compiling: error: release version 17 not supported -&gt; [Help 1]\r\nAug 15 03:30:33 PM  #11 14.32 [ERROR]\r\n```\r\n\r\nIndicates you need to use JDK17 instead of JDK11. So use a newer Docker image. Something like\r\n\r\n```\r\nFROM maven:3-eclipse-temurin-17 AS build\r\n```\r\n\r\nEven if compilation would succeed running would fail as that will, obviously, also require JDK17, where you now also have JDK11.\r\n\r\n```\r\nFROM openjdk:11-jdk-slim\r\n```\r\n\r\nShould be something like \r\n\r\n```\r\nFROM eclipse-temurin:17-alpine\r\n```\r\n\r\nYour whole Dockerfile should look something like this\r\n\r\n```docker\r\nFROM maven:3-eclipse-temurin-17 AS build\r\nCOPY . .\r\nRUN mvn clean package -Pprod -DskipTests\r\nFROM eclipse-temurin:17-alpine\r\nCOPY --from=build /target/backendaccountant-0.0.1-SNAPSHOT.jar demo.jar\r\nEXPOSE 8080\r\nENTRYPOINT [“java”,“-jar”,“demo.jar”]\r\n```\r\n\r\nThis will use JDK17 for both the build as well as running the application. ","title":"How to write Dockerfile for Render.com deployment","body":"<p>Your <code>Dockerfile</code> uses the following declaration</p>\n<pre><code>FROM maven:3.8.2-jdk-11 AS build\n</code></pre>\n<p>Which means it will pull in a Docker Image with JDK11.</p>\n<p>The error you get</p>\n<pre><code>project QuickMaster: Fatal error compiling: error: release version 17 not supported -&gt; [Help 1]\nAug 15 03:30:33 PM  #11 14.32 [ERROR]\n</code></pre>\n<p>Indicates you need to use JDK17 instead of JDK11. So use a newer Docker image. Something like</p>\n<pre><code>FROM maven:3-eclipse-temurin-17 AS build\n</code></pre>\n<p>Even if compilation would succeed running would fail as that will, obviously, also require JDK17, where you now also have JDK11.</p>\n<pre><code>FROM openjdk:11-jdk-slim\n</code></pre>\n<p>Should be something like</p>\n<pre><code>FROM eclipse-temurin:17-alpine\n</code></pre>\n<p>Your whole Dockerfile should look something like this</p>\n<pre><code>FROM maven:3-eclipse-temurin-17 AS build\nCOPY . .\nRUN mvn clean package -Pprod -DskipTests\nFROM eclipse-temurin:17-alpine\nCOPY --from=build /target/backendaccountant-0.0.1-SNAPSHOT.jar demo.jar\nEXPOSE 8080\nENTRYPOINT [“java”,“-jar”,“demo.jar”]\n</code></pre>\n<p>This will use JDK17 for both the build as well as running the application.</p>\n"}],"owner":{"account_id":1127859,"reputation":897,"user_id":1114682,"accept_rate":9,"display_name":"Noriaki Takamizawa"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":292,"favorite_count":0,"down_vote_count":4,"up_vote_count":0,"answer_count":2,"score":-4,"last_activity_date":1692087901,"creation_date":1692081618,"question_id":76903843,"body_markdown":"I wrote sample Java spring boot code like this.\r\nhttps://github.com/hardreggaecafe/java_spring_boot_sample\r\n\r\nAnd everytime I deploy this code to Render.com, it fails.\r\nDockerfile is here.\r\n```\r\nFROM maven:3.8.2-jdk-11 AS build\r\nCOPY . .\r\nRUN mvn clean package -Pprod -DskipTests\r\nFROM openjdk:11-jdk-slim\r\nCOPY --from=build /target/backendaccountant-0.0.1-SNAPSHOT.jar demo.jar\r\nEXPOSE 8080\r\nENTRYPOINT [“java”,“-jar”,“demo.jar”]\r\n```\r\n\r\nError log is like this.\r\n```\r\nDownloaded from central: https://repo.maven.apache.org/maven2/org/codehaus/plexus/plexus-utils/3.5.0/plexus-utils-3.5.0.jar (267 kB at 6.4 MB/s)\r\nAug 15 03:30:33 PM  #11 13.84 Downloaded from central: https://repo.maven.apache.org/maven2/org/codehaus/plexus/plexus-compiler-javac/2.13.0/plexus-compiler-javac-2.13.0.jar (23 kB at 518 kB/s)\r\nAug 15 03:30:33 PM  #11 14.03 [INFO] Changes detected - recompiling the module! :dependency\r\nAug 15 03:30:33 PM  #11 14.03 [INFO] Compiling 3 source files with javac [debug release 17] to target/classes\r\nAug 15 03:30:33 PM  #11 14.32 [INFO] ------------------------------------------------------------------------\r\nAug 15 03:30:33 PM  #11 14.32 [INFO] BUILD FAILURE\r\nAug 15 03:30:33 PM  #11 14.32 [INFO] ------------------------------------------------------------------------\r\nAug 15 03:30:33 PM  #11 14.32 [INFO] Total time:  11.972 s\r\nAug 15 03:30:33 PM  #11 14.32 [INFO] Finished at: 2023-08-15T06:30:33Z\r\nAug 15 03:30:33 PM  #11 14.32 [INFO] ------------------------------------------------------------------------\r\nAug 15 03:30:33 PM  #11 14.32 [WARNING] The requested profile &quot;prod&quot; could not be activated because it does not exist.\r\nAug 15 03:30:33 PM  #11 14.32 [ERROR] Failed to execute goal org.apache.maven.plugins:maven-compiler-plugin:3.11.0:compile (default-compile) on project QuickMaster: Fatal error compiling: error: release version 17 not supported -&gt; [Help 1]\r\nAug 15 03:30:33 PM  #11 14.32 [ERROR]\r\nAug 15 03:30:33 PM  #11 14.32 [ERROR] To see the full stack trace of the errors, re-run Maven with the -e switch.\r\nAug 15 03:30:33 PM  #11 14.32 [ERROR] Re-run Maven using the -X switch to enable full debug logging.\r\nAug 15 03:30:33 PM  #11 14.32 [ERROR]\r\nAug 15 03:30:33 PM  #11 14.32 [ERROR] For more information about the errors and possible solutions, please read the following articles:\r\nAug 15 03:30:33 PM  #11 14.33 [ERROR] [Help 1] http://cwiki.apache.org/confluence/display/MAVEN/MojoExecutionException\r\nAug 15 03:30:33 PM  #11 ERROR: process &quot;/bin/sh -c mvn clean package -Pprod -DskipTests&quot; did not complete successfully: exit code: 1\r\nAug 15 03:30:33 PM  ------\r\nAug 15 03:30:33 PM   &gt; [build 3/3] RUN mvn clean package -Pprod -DskipTests:\r\nAug 15 03:30:33 PM  #11 14.32 [INFO] Finished at: 2023-08-15T06:30:33Z\r\nAug 15 03:30:33 PM  #11 14.32 [INFO] ------------------------------------------------------------------------\r\nAug 15 03:30:33 PM  #11 14.32 [WARNING] The requested profile &quot;prod&quot; could not be activated because it does not exist.\r\nAug 15 03:30:33 PM  #11 14.32 [ERROR] Failed to execute goal org.apache.maven.plugins:maven-compiler-plugin:3.11.0:compile (default-compile) on project QuickMaster: Fatal error compiling: error: release version 17 not supported -&gt; [Help 1]\r\nAug 15 03:30:33 PM  #11 14.32 [ERROR]\r\nAug 15 03:30:33 PM  #11 14.32 [ERROR] To see the full stack trace of the errors, re-run Maven with the -e switch.\r\nAug 15 03:30:33 PM  #11 14.32 [ERROR] Re-run Maven using the -X switch to enable full debug logging.\r\nAug 15 03:30:33 PM  #11 14.32 [ERROR]\r\nAug 15 03:30:33 PM  #11 14.32 [ERROR] For more information about the errors and possible solutions, please read the following articles:\r\nAug 15 03:30:33 PM  #11 14.33 [ERROR] [Help 1] http://cwiki.apache.org/confluence/display/MAVEN/MojoExecutionException\r\nAug 15 03:30:33 PM  ------\r\nAug 15 03:30:33 PM  Dockerfile:3\r\nAug 15 03:30:33 PM  --------------------\r\nAug 15 03:30:33 PM     1 |     FROM maven:3.8.2-jdk-11 AS build\r\nAug 15 03:30:33 PM     2 |     COPY . .\r\nAug 15 03:30:33 PM     3 | &gt;&gt;&gt; RUN mvn clean package -Pprod -DskipTests\r\nAug 15 03:30:33 PM     4 |     FROM openjdk:11-jdk-slim\r\nAug 15 03:30:33 PM     5 |     COPY --from=build /target/backendaccountant-0.0.1-SNAPSHOT.jar demo.jar\r\nAug 15 03:30:33 PM  --------------------\r\nAug 15 03:30:33 PM  error: failed to solve: process &quot;/bin/sh -c mvn clean package -Pprod -DskipTests&quot; did not complete successfully: exit code: 1\r\nAug 15 03:30:33 PM  error: exit status 1\r\n```\r\n\r\nSo what can I do? Please let me know. Thanks in advance.","title":"How to write Dockerfile for Render.com deployment","body":"<p>I wrote sample Java spring boot code like this.\n<a href=\"https://github.com/hardreggaecafe/java_spring_boot_sample\" rel=\"nofollow noreferrer\">https://github.com/hardreggaecafe/java_spring_boot_sample</a></p>\n<p>And everytime I deploy this code to Render.com, it fails.\nDockerfile is here.</p>\n<pre><code>FROM maven:3.8.2-jdk-11 AS build\nCOPY . .\nRUN mvn clean package -Pprod -DskipTests\nFROM openjdk:11-jdk-slim\nCOPY --from=build /target/backendaccountant-0.0.1-SNAPSHOT.jar demo.jar\nEXPOSE 8080\nENTRYPOINT [“java”,“-jar”,“demo.jar”]\n</code></pre>\n<p>Error log is like this.</p>\n<pre><code>Downloaded from central: https://repo.maven.apache.org/maven2/org/codehaus/plexus/plexus-utils/3.5.0/plexus-utils-3.5.0.jar (267 kB at 6.4 MB/s)\nAug 15 03:30:33 PM  #11 13.84 Downloaded from central: https://repo.maven.apache.org/maven2/org/codehaus/plexus/plexus-compiler-javac/2.13.0/plexus-compiler-javac-2.13.0.jar (23 kB at 518 kB/s)\nAug 15 03:30:33 PM  #11 14.03 [INFO] Changes detected - recompiling the module! :dependency\nAug 15 03:30:33 PM  #11 14.03 [INFO] Compiling 3 source files with javac [debug release 17] to target/classes\nAug 15 03:30:33 PM  #11 14.32 [INFO] ------------------------------------------------------------------------\nAug 15 03:30:33 PM  #11 14.32 [INFO] BUILD FAILURE\nAug 15 03:30:33 PM  #11 14.32 [INFO] ------------------------------------------------------------------------\nAug 15 03:30:33 PM  #11 14.32 [INFO] Total time:  11.972 s\nAug 15 03:30:33 PM  #11 14.32 [INFO] Finished at: 2023-08-15T06:30:33Z\nAug 15 03:30:33 PM  #11 14.32 [INFO] ------------------------------------------------------------------------\nAug 15 03:30:33 PM  #11 14.32 [WARNING] The requested profile &quot;prod&quot; could not be activated because it does not exist.\nAug 15 03:30:33 PM  #11 14.32 [ERROR] Failed to execute goal org.apache.maven.plugins:maven-compiler-plugin:3.11.0:compile (default-compile) on project QuickMaster: Fatal error compiling: error: release version 17 not supported -&gt; [Help 1]\nAug 15 03:30:33 PM  #11 14.32 [ERROR]\nAug 15 03:30:33 PM  #11 14.32 [ERROR] To see the full stack trace of the errors, re-run Maven with the -e switch.\nAug 15 03:30:33 PM  #11 14.32 [ERROR] Re-run Maven using the -X switch to enable full debug logging.\nAug 15 03:30:33 PM  #11 14.32 [ERROR]\nAug 15 03:30:33 PM  #11 14.32 [ERROR] For more information about the errors and possible solutions, please read the following articles:\nAug 15 03:30:33 PM  #11 14.33 [ERROR] [Help 1] http://cwiki.apache.org/confluence/display/MAVEN/MojoExecutionException\nAug 15 03:30:33 PM  #11 ERROR: process &quot;/bin/sh -c mvn clean package -Pprod -DskipTests&quot; did not complete successfully: exit code: 1\nAug 15 03:30:33 PM  ------\nAug 15 03:30:33 PM   &gt; [build 3/3] RUN mvn clean package -Pprod -DskipTests:\nAug 15 03:30:33 PM  #11 14.32 [INFO] Finished at: 2023-08-15T06:30:33Z\nAug 15 03:30:33 PM  #11 14.32 [INFO] ------------------------------------------------------------------------\nAug 15 03:30:33 PM  #11 14.32 [WARNING] The requested profile &quot;prod&quot; could not be activated because it does not exist.\nAug 15 03:30:33 PM  #11 14.32 [ERROR] Failed to execute goal org.apache.maven.plugins:maven-compiler-plugin:3.11.0:compile (default-compile) on project QuickMaster: Fatal error compiling: error: release version 17 not supported -&gt; [Help 1]\nAug 15 03:30:33 PM  #11 14.32 [ERROR]\nAug 15 03:30:33 PM  #11 14.32 [ERROR] To see the full stack trace of the errors, re-run Maven with the -e switch.\nAug 15 03:30:33 PM  #11 14.32 [ERROR] Re-run Maven using the -X switch to enable full debug logging.\nAug 15 03:30:33 PM  #11 14.32 [ERROR]\nAug 15 03:30:33 PM  #11 14.32 [ERROR] For more information about the errors and possible solutions, please read the following articles:\nAug 15 03:30:33 PM  #11 14.33 [ERROR] [Help 1] http://cwiki.apache.org/confluence/display/MAVEN/MojoExecutionException\nAug 15 03:30:33 PM  ------\nAug 15 03:30:33 PM  Dockerfile:3\nAug 15 03:30:33 PM  --------------------\nAug 15 03:30:33 PM     1 |     FROM maven:3.8.2-jdk-11 AS build\nAug 15 03:30:33 PM     2 |     COPY . .\nAug 15 03:30:33 PM     3 | &gt;&gt;&gt; RUN mvn clean package -Pprod -DskipTests\nAug 15 03:30:33 PM     4 |     FROM openjdk:11-jdk-slim\nAug 15 03:30:33 PM     5 |     COPY --from=build /target/backendaccountant-0.0.1-SNAPSHOT.jar demo.jar\nAug 15 03:30:33 PM  --------------------\nAug 15 03:30:33 PM  error: failed to solve: process &quot;/bin/sh -c mvn clean package -Pprod -DskipTests&quot; did not complete successfully: exit code: 1\nAug 15 03:30:33 PM  error: exit status 1\n</code></pre>\n<p>So what can I do? Please let me know. Thanks in advance.</p>\n"},{"tags":["java","jmx","javapolicy"],"comments":[{"owner":{"account_id":17474859,"reputation":2389,"user_id":12669945,"display_name":"Atmas"},"score":0,"creation_date":1629986200,"post_id":60872698,"comment_id":121836864,"body_markdown":"Have you considered just using an OS level firewall? (I.e.   not using java)","body":"Have you considered just using an OS level firewall? (I.e.   not using java)"},{"owner":{"account_id":1941777,"reputation":3143,"user_id":1747834,"accept_rate":58,"display_name":"Mikhail T."},"score":0,"creation_date":1630684102,"post_id":60872698,"comment_id":122032326,"body_markdown":"I have, but that requires `root`-privileges, which -- in our setup -- requires coordination with too many people to be feasible :(","body":"I have, but that requires <code>root</code>-privileges, which -- in our setup -- requires coordination with too many people to be feasible :("},{"owner":{"account_id":47283,"reputation":703927,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"score":0,"creation_date":1691461839,"post_id":60872698,"comment_id":135491535,"body_markdown":"do you know (for sure) that the security manager is using your policy file?  Have you tried using `-Djava.security.policy=&lt;absolute_pathname&gt;` to tell the security manager which policy file to use?","body":"do you know (for sure) that the security manager is using your policy file?  Have you tried using <code>-Djava.security.policy=&lt;absolute_pathname&gt;</code> to tell the security manager which policy file to use?"},{"owner":{"account_id":47283,"reputation":703927,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"score":0,"creation_date":1691462058,"post_id":60872698,"comment_id":135491552,"body_markdown":"Maybe there are other useful clues here: https://docs.oracle.com/javadb/10.10.1.2/adminguide/radminjmxenablepwdssl.html","body":"Maybe there are other useful clues here: <a href=\"https://docs.oracle.com/javadb/10.10.1.2/adminguide/radminjmxenablepwdssl.html\" rel=\"nofollow noreferrer\">docs.oracle.com/javadb/10.10.1.2/adminguide/&hellip;</a>"},{"owner":{"account_id":1941777,"reputation":3143,"user_id":1747834,"accept_rate":58,"display_name":"Mikhail T."},"score":0,"creation_date":1691498374,"post_id":60872698,"comment_id":135497323,"body_markdown":"No, [that article](https://docs.oracle.com/javadb/10.10.1.2/adminguide/radminjmxenablepwdssl.html) is about authenticating by username/password -- I am looking for means to allow passwordless access to JMX, but only from a (small) group of IP-addresses.","body":"No, <a href=\"https://docs.oracle.com/javadb/10.10.1.2/adminguide/radminjmxenablepwdssl.html\" rel=\"nofollow noreferrer\">that article</a> is about authenticating by username/password -- I am looking for means to allow passwordless access to JMX, but only from a (small) group of IP-addresses."},{"owner":{"account_id":1941777,"reputation":3143,"user_id":1747834,"accept_rate":58,"display_name":"Mikhail T."},"score":0,"creation_date":1691601365,"post_id":60872698,"comment_id":135514901,"body_markdown":"The `${user.home}/.java.policy`, if available, is always loaded after the `${java.home}/lib/security/java.policy`, according to [Java documentation](https://docs.oracle.com/javase/tutorial/security/tour2/step4.html).","body":"The <code>${user.home}&#47;.java.policy</code>, if available, is always loaded after the <code>${java.home}&#47;lib&#47;security&#47;java.policy</code>, according to <a href=\"https://docs.oracle.com/javase/tutorial/security/tour2/step4.html\" rel=\"nofollow noreferrer\">Java documentation</a>."},{"owner":{"account_id":3377022,"reputation":11135,"user_id":2834978,"display_name":"LMC"},"score":0,"creation_date":1692048034,"post_id":60872698,"comment_id":135570383,"body_markdown":"@MikhailT. The policy file is probably ignored altogether due to `com.sun.management.jmxremote.authenticate=false`. At least dummy credentials like `guest:guest` should be used and set that property to true.","body":"@MikhailT. The policy file is probably ignored altogether due to <code>com.sun.management.jmxremote.authenticate=false</code>. At least dummy credentials like <code>guest:guest</code> should be used and set that property to true."}],"answers":[{"tags":[],"owner":{"account_id":4671622,"reputation":1328,"user_id":3783275,"accept_rate":75,"display_name":"Westranger"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1692087509,"creation_date":1692024700,"answer_id":76899999,"question_id":60872698,"body_markdown":"I think this is not Possible.\r\n\r\nThe JMXPrincipal, the [source code of e.g. OpenJDK JMX classes][1] show that you always require a user/role a wildcard does not imply that you don&#39;t need a user/ authentication. \r\nAlso all other classes (in the JMX Package) don&#39;t instantiate a Socket which uses the `java.net.SocketPermission` class. The `javax.management.remote.rmi.RMIConnectorServer` which is the only class which `extends JMXConnectorServer` and [which is instantiated][2] after the VM command line parameters are read uses the `SocketPermission`, via the [LoaderHandler][3]. Also looking at the policy examples from the OpenJDK there there you can either restrict JMX access to a user/role or you can restrict the general access the JVM via `permission java.net.SocketPermission`\r\n\r\n_**update one day later**_\r\n\r\nafter thinking a while about it maybe using only `SockePermission` may work. If you look into the code you can specify port ranges. Unfortunately it is not possible to specify a network address with its mask, but you could in general allow all IP&#39;s access to all port except the JMX port and afterwards add permissions for your IP. This also requires that you start you java process with \r\n\r\n    -Dcom.sun.management.jmxremote.port=9010\r\n    -Dcom.sun.management.jmxremote.rmi.port=9010\r\n\r\nand then the permission would look like this\r\n\r\n    grant {\r\n    \tpermission java.net.SocketPermission &quot;*:1-9009&quot;, &quot;listen,resolve,connect,accept&quot;;\r\n    \tpermission java.net.SocketPermission &quot;*:9011-65535&quot;, &quot;listen,resolve,connect,accept&quot;;\r\n    \tpermission java.net.SocketPermission &quot;127.0.0.1:9010&quot;, &quot;accept&quot;;\r\n        permission java.net.SocketPermission &quot;my.lan.ip.addr:9010&quot;, &quot;accept&quot;;\r\n    \tpermission java.net.SocketPermission &quot;another.lan.ip.addr:9010&quot;, &quot;accept&quot;;\r\n    }\r\n\r\n  [1]: https://github.com/openjdk/jdk/tree/master/src/java.management/share/classes/javax/management/remote\r\n  [2]: https://github.com/openjdk/jdk/blob/master/src/jdk.management.agent/share/classes/sun/management/jmxremote/ConnectorBootstrap.java\r\n  [3]: https://github.com/openjdk/jdk/blob/master/src/java.rmi/share/classes/sun/rmi/server/LoaderHandler.java\r\n","title":"How to limit access to JMX to only certain IP-addresses?","body":"<p>I think this is not Possible.</p>\n<p>The JMXPrincipal, the <a href=\"https://github.com/openjdk/jdk/tree/master/src/java.management/share/classes/javax/management/remote\" rel=\"nofollow noreferrer\">source code of e.g. OpenJDK JMX classes</a> show that you always require a user/role a wildcard does not imply that you don't need a user/ authentication.\nAlso all other classes (in the JMX Package) don't instantiate a Socket which uses the <code>java.net.SocketPermission</code> class. The <code>javax.management.remote.rmi.RMIConnectorServer</code> which is the only class which <code>extends JMXConnectorServer</code> and <a href=\"https://github.com/openjdk/jdk/blob/master/src/jdk.management.agent/share/classes/sun/management/jmxremote/ConnectorBootstrap.java\" rel=\"nofollow noreferrer\">which is instantiated</a> after the VM command line parameters are read uses the <code>SocketPermission</code>, via the <a href=\"https://github.com/openjdk/jdk/blob/master/src/java.rmi/share/classes/sun/rmi/server/LoaderHandler.java\" rel=\"nofollow noreferrer\">LoaderHandler</a>. Also looking at the policy examples from the OpenJDK there there you can either restrict JMX access to a user/role or you can restrict the general access the JVM via <code>permission java.net.SocketPermission</code></p>\n<p><em><strong>update one day later</strong></em></p>\n<p>after thinking a while about it maybe using only <code>SockePermission</code> may work. If you look into the code you can specify port ranges. Unfortunately it is not possible to specify a network address with its mask, but you could in general allow all IP's access to all port except the JMX port and afterwards add permissions for your IP. This also requires that you start you java process with</p>\n<pre><code>-Dcom.sun.management.jmxremote.port=9010\n-Dcom.sun.management.jmxremote.rmi.port=9010\n</code></pre>\n<p>and then the permission would look like this</p>\n<pre><code>grant {\n    permission java.net.SocketPermission &quot;*:1-9009&quot;, &quot;listen,resolve,connect,accept&quot;;\n    permission java.net.SocketPermission &quot;*:9011-65535&quot;, &quot;listen,resolve,connect,accept&quot;;\n    permission java.net.SocketPermission &quot;127.0.0.1:9010&quot;, &quot;accept&quot;;\n    permission java.net.SocketPermission &quot;my.lan.ip.addr:9010&quot;, &quot;accept&quot;;\n    permission java.net.SocketPermission &quot;another.lan.ip.addr:9010&quot;, &quot;accept&quot;;\n}\n</code></pre>\n"}],"owner":{"account_id":1941777,"reputation":3143,"user_id":1747834,"accept_rate":58,"display_name":"Mikhail T."},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":323,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"answer_count":1,"score":3,"last_activity_date":1692087509,"creation_date":1585243055,"question_id":60872698,"body_markdown":"I don&#39;t want to bother with SSL and passwords each time, but still don&#39;t want my program&#39;s JMX functionality reachable by others on the LAN.\r\n\r\nI populated my `~/.java.policy` thus:\r\n\r\n\tgrant principal javax.management.remote.JMXPrincipal &quot;*&quot; {\r\n\t\tpermission java.net.SocketPermission &quot;127.0.0.1&quot;, &quot;accept&quot;;\r\n\t\tpermission java.net.SocketPermission &quot;my.lan.ip.addr&quot;, &quot;accept&quot;;\r\n\t\tpermission java.net.SocketPermission &quot;another.lan.ip.addr&quot;, &quot;accept&quot;;\r\n\t\tpermission java.net.SocketPermission &quot;*&quot;, &quot;resolve&quot;;\r\n\t}\r\nUnfortunately, this does not seem to have an effect -- when the program is started with:\r\n\r\n* `-Djava.security.manager`\r\n* `-Dcom.sun.management.jmxremote.ssl=false`\r\n* `-Dcom.sun.management.jmxremote.authenticate=false`\r\n* `-Dcom.sun.management.jmxremote`\r\n* `-Dcom.sun.management.jmxremote.port=1234`\r\n\r\nits JMX functionality remains accessible from _anywhere_, not just from the few IPs listed.\r\n\r\nHow to do it correctly? Thank you!","title":"How to limit access to JMX to only certain IP-addresses?","body":"<p>I don't want to bother with SSL and passwords each time, but still don't want my program's JMX functionality reachable by others on the LAN.</p>\n\n<p>I populated my <code>~/.java.policy</code> thus:</p>\n\n<pre><code>grant principal javax.management.remote.JMXPrincipal \"*\" {\n    permission java.net.SocketPermission \"127.0.0.1\", \"accept\";\n    permission java.net.SocketPermission \"my.lan.ip.addr\", \"accept\";\n    permission java.net.SocketPermission \"another.lan.ip.addr\", \"accept\";\n    permission java.net.SocketPermission \"*\", \"resolve\";\n}\n</code></pre>\n\n<p>Unfortunately, this does not seem to have an effect -- when the program is started with:</p>\n\n<ul>\n<li><code>-Djava.security.manager</code></li>\n<li><code>-Dcom.sun.management.jmxremote.ssl=false</code></li>\n<li><code>-Dcom.sun.management.jmxremote.authenticate=false</code></li>\n<li><code>-Dcom.sun.management.jmxremote</code></li>\n<li><code>-Dcom.sun.management.jmxremote.port=1234</code></li>\n</ul>\n\n<p>its JMX functionality remains accessible from <em>anywhere</em>, not just from the few IPs listed.</p>\n\n<p>How to do it correctly? Thank you!</p>\n"},{"tags":["java","json","rest","blob"],"comments":[{"owner":{"account_id":5114922,"reputation":359,"user_id":4100399,"accept_rate":0,"display_name":"gbenga wale"},"score":0,"creation_date":1497735284,"post_id":44609535,"comment_id":76205961,"body_markdown":"This question already has an answer\nhttps://stackoverflow.com/questions/7947871/convert-a-string-to-a-byte-array-and-then-back-to-the-original-string and https://stackoverflow.com/questions/36560223/how-do-i-convert-a-jsonobject-to-a-byte-array-and-then-convert-this-byte-array-t/36560611","body":"This question already has an answer <a href=\"https://stackoverflow.com/questions/7947871/convert-a-string-to-a-byte-array-and-then-back-to-the-original-string\" title=\"convert a string to a byte array and then back to the original string\">stackoverflow.com/questions/7947871/&hellip;</a> and <a href=\"https://stackoverflow.com/questions/36560223/how-do-i-convert-a-jsonobject-to-a-byte-array-and-then-convert-this-byte-array-t/36560611\" title=\"how do i convert a jsonobject to a byte array and then convert this byte array t\">stackoverflow.com/questions/36560223/&hellip;</a>"},{"owner":{"account_id":10791375,"reputation":1498,"user_id":7938769,"display_name":"tima"},"score":1,"creation_date":1497752441,"post_id":44609535,"comment_id":76208972,"body_markdown":"This question is the same as https://stackoverflow.com/questions/17400497/how-to-convert-blob-to-string-and-string-to-blob-in-java","body":"This question is the same as <a href=\"https://stackoverflow.com/questions/17400497/how-to-convert-blob-to-string-and-string-to-blob-in-java\" title=\"how to convert blob to string and string to blob in java\">stackoverflow.com/questions/17400497/&hellip;</a>"},{"owner":{"account_id":1446452,"reputation":4027,"user_id":1364747,"accept_rate":69,"display_name":"Teddy"},"score":0,"creation_date":1660197500,"post_id":44609535,"comment_id":129476918,"body_markdown":"@gbengawale He&#39;s asking for BLOB. Both your suggestions have nothing to do with blob.","body":"@gbengawale He&#39;s asking for BLOB. Both your suggestions have nothing to do with blob."}],"answers":[{"tags":[],"owner":{"account_id":11129897,"reputation":91,"user_id":8170173,"display_name":"Thangamudy Gurusamy"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1498121252,"creation_date":1498121252,"answer_id":44694525,"question_id":44609535,"body_markdown":"Try this\r\n\r\n    String str = json.toString();\r\n    PreparedStatement ps1 = conn.prepareStatement(&quot;update table set blob=? where id=1&quot;);\r\n    Blob blob = conn.createBlob();\r\n    blob.setBytes(1, str.getBytes());\r\n    ps1.setBlob(1, blob);\r\n    ps1.executeUpdate();\r\n","title":"How to convert Json object to BLOB in java","body":"<p>Try this</p>\n\n<pre><code>String str = json.toString();\nPreparedStatement ps1 = conn.prepareStatement(\"update table set blob=? where id=1\");\nBlob blob = conn.createBlob();\nblob.setBytes(1, str.getBytes());\nps1.setBlob(1, blob);\nps1.executeUpdate();\n</code></pre>\n"}],"owner":{"account_id":6746900,"reputation":861,"user_id":5198256,"accept_rate":13,"display_name":"Asif Billa"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":10269,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1692086580,"creation_date":1497734903,"question_id":44609535,"body_markdown":"I need to store HTTP REST API (POST, GET, PATCH, etc.) requests and responses into a database entry (Column as BLOB), so that we can audit the requests and responses later.\r\n\r\nAs part of the incoming HTTP POST request, the DTO object is coming as request body. I can extract the JSON object as a request body.\r\n\r\nHow can I convert that JSON object to BLOB in Java?","title":"How to convert Json object to BLOB in java","body":"<p>I need to store HTTP REST API (POST, GET, PATCH, etc.) requests and responses into a database entry (Column as BLOB), so that we can audit the requests and responses later.</p>\n\n<p>As part of the incoming HTTP POST request, the DTO object is coming as request body. I can extract the JSON object as a request body.</p>\n\n<p>How can I convert that JSON object to BLOB in Java?</p>\n"},{"tags":["java","android","sql-server","listview","gridview"],"comments":[{"owner":{"account_id":472002,"reputation":2130,"user_id":880181,"accept_rate":75,"display_name":"Tanim reja"},"score":0,"creation_date":1451471775,"post_id":34527630,"comment_id":56796738,"body_markdown":"are you trying to use sql server directly without any webservice? its impossible man","body":"are you trying to use sql server directly without any webservice? its impossible man"},{"owner":{"account_id":5623567,"reputation":1380,"user_id":4452649,"accept_rate":43,"display_name":"Reshma"},"score":0,"creation_date":1451471948,"post_id":34527630,"comment_id":56796817,"body_markdown":"yes, I am not using any web services.","body":"yes, I am not using any web services."}],"answers":[{"tags":[],"owner":{"account_id":472002,"reputation":2130,"user_id":880181,"accept_rate":75,"display_name":"Tanim reja"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1451472619,"creation_date":1451472619,"answer_id":34528003,"question_id":34527630,"body_markdown":"You cant access sql server directly ...\r\n\r\nFirst you need to make a web service because your database sits on your host not on your phone memory card ,  web service process a request from app and responds accordingly.That is, you pass some SQL query parameters from app to the web service and let your web service handle the request.\r\nThis web service can be of any type JAVA, PHP, etc.\r\nYou just need to use standard HTTP methods. [click][1]\r\n\r\n\r\n  [1]: http://www.tutorialspoint.com/android/android_php_mysql.htm","title":"How to retrieve data from sql server db in android","body":"<p>You cant access sql server directly ...</p>\n\n<p>First you need to make a web service because your database sits on your host not on your phone memory card ,  web service process a request from app and responds accordingly.That is, you pass some SQL query parameters from app to the web service and let your web service handle the request.\nThis web service can be of any type JAVA, PHP, etc.\nYou just need to use standard HTTP methods. <a href=\"http://www.tutorialspoint.com/android/android_php_mysql.htm\" rel=\"nofollow\">click</a></p>\n"},{"tags":[],"owner":{"account_id":3880125,"reputation":1337,"user_id":3212904,"accept_rate":50,"display_name":"Kristo"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1451476336,"creation_date":1451476336,"answer_id":34529063,"question_id":34527630,"body_markdown":"Here is an example of how you can display data gathered from a database in to a listview.\r\n\r\n        final ListView listView = getListView();\r\n\t\tfinal String[][] _customerData = MySQL.Get(&quot;SELECT Id,Name,Surname FROM customers&quot;);\r\n\t\tfinal List&lt;Integer&gt; _currentCustomerIDs = new ArrayList&lt;&gt;();\r\n\t\tfinal List&lt;String&gt; _nameList = new ArrayList&lt;&gt;();\r\n\t\t\r\n\t\tfor (String[] customer : _customerData)\r\n\t\t{\r\n\t\t\t_currentCustomerIDs.add(Integer.valueOf(customer[0]));\r\n\t\t\t_nameList.add(customer[2] + &quot; &quot; + customer[1]);\r\n\t\t}\r\n\t\tlistView.invalidateViews();\r\n\t\tlistView.setTextFilterEnabled(true);\r\n\t\tlistView.setAdapter(getListAdapter());\r\n\t\tsetListAdapter(new ArrayAdapter&lt;&gt;(this, R.layout.customer_list, _nameList.toArray()));\r\n\r\n You need to make a select query,\r\n then declare a list of integers,\r\n iterate through that list,\r\n add it to your arraylist,\r\n and finally add it to your listview.\r\n\r\nAbove is an example adding integers as well as strings to your list with data gathered from a jdbc database.\r\n\r\nGood luck, Hope it helps!","title":"How to retrieve data from sql server db in android","body":"<p>Here is an example of how you can display data gathered from a database in to a listview.</p>\n\n<pre><code>    final ListView listView = getListView();\n    final String[][] _customerData = MySQL.Get(\"SELECT Id,Name,Surname FROM customers\");\n    final List&lt;Integer&gt; _currentCustomerIDs = new ArrayList&lt;&gt;();\n    final List&lt;String&gt; _nameList = new ArrayList&lt;&gt;();\n\n    for (String[] customer : _customerData)\n    {\n        _currentCustomerIDs.add(Integer.valueOf(customer[0]));\n        _nameList.add(customer[2] + \" \" + customer[1]);\n    }\n    listView.invalidateViews();\n    listView.setTextFilterEnabled(true);\n    listView.setAdapter(getListAdapter());\n    setListAdapter(new ArrayAdapter&lt;&gt;(this, R.layout.customer_list, _nameList.toArray()));\n</code></pre>\n\n<p>You need to make a select query,\n then declare a list of integers,\n iterate through that list,\n add it to your arraylist,\n and finally add it to your listview.</p>\n\n<p>Above is an example adding integers as well as strings to your list with data gathered from a jdbc database.</p>\n\n<p>Good luck, Hope it helps!</p>\n"},{"tags":[],"owner":{"account_id":9411834,"reputation":296,"user_id":6998825,"display_name":"Hassan Badawi"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1540453173,"creation_date":1492396935,"answer_id":43444424,"question_id":34527630,"body_markdown":"in that case you \r\n\r\n    button1.setOnClickListener(new View.OnClickListener(){\r\n\r\n        @Override\r\n        public void onClick(View v) {\r\n\r\n                String newValue = editText1.getText().toString().trim();\r\n\r\n                if (newValue.toString().trim().equals(&quot;&quot;)) {\r\n                    txtView1.setText(&quot;Please Enter ID&quot;);\r\n                }\r\n                else\r\n                {\r\n                    Connection con = connectionClass.CONN();\r\n\r\n                    if(con==null)\r\n                    {\r\n                        String msg=&quot;Error in SQL Connection&quot;;\r\n                    }\r\n                    else\r\n                    {\r\n\r\n                        try {\r\n\r\n                            st = con.createStatement();\r\n\r\n                            // set the result in result set then fetch it\r\n                            rs = st.executeQuery(&quot;Select * From Employees Where EmpId=&#39;&quot;+newValue+&quot;&#39;&quot;);\r\n\r\n                            if (rs.next()){\r\n                                Toast.makeText(getApplicationContext(),&quot; EmpId :. &quot; + rs.getString(&quot;EmpId&quot;)+&quot; EmpName :. &quot;+rs.getString(&quot;EmpName&quot;)+ &quot; Designation :. &quot; + rs.getString(&quot;Designation&quot;)+&quot; Gender :. &quot;+rs.getString(&quot;Gender&quot;)+&quot; etc..&quot;,LENGTH_LONG).show();\r\n\r\n                            }else{\r\n                                // you have no record\r\n\r\n                            }\r\n\r\n\r\n                        }\r\n                    }\r\n                }\r\n\r\n\r\n        });\r\n    });\r\n\r\n","title":"How to retrieve data from sql server db in android","body":"<p>in that case you </p>\n\n<pre><code>button1.setOnClickListener(new View.OnClickListener(){\n\n    @Override\n    public void onClick(View v) {\n\n            String newValue = editText1.getText().toString().trim();\n\n            if (newValue.toString().trim().equals(\"\")) {\n                txtView1.setText(\"Please Enter ID\");\n            }\n            else\n            {\n                Connection con = connectionClass.CONN();\n\n                if(con==null)\n                {\n                    String msg=\"Error in SQL Connection\";\n                }\n                else\n                {\n\n                    try {\n\n                        st = con.createStatement();\n\n                        // set the result in result set then fetch it\n                        rs = st.executeQuery(\"Select * From Employees Where EmpId='\"+newValue+\"'\");\n\n                        if (rs.next()){\n                            Toast.makeText(getApplicationContext(),\" EmpId :. \" + rs.getString(\"EmpId\")+\" EmpName :. \"+rs.getString(\"EmpName\")+ \" Designation :. \" + rs.getString(\"Designation\")+\" Gender :. \"+rs.getString(\"Gender\")+\" etc..\",LENGTH_LONG).show();\n\n                        }else{\n                            // you have no record\n\n                        }\n\n\n                    }\n                }\n            }\n\n\n    });\n});\n</code></pre>\n"}],"owner":{"account_id":5623567,"reputation":1380,"user_id":4452649,"accept_rate":43,"display_name":"Reshma"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":20878,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":3,"score":0,"last_activity_date":1692086580,"creation_date":1451471245,"question_id":34527630,"body_markdown":"this is the first time I am developing an android application. I want to bind some data with grid view or list view based employee id provided on the text box. How can I do that. Please help me to find a proper solution. Thank you.\r\n\r\n**ConnectionClass.java:**\r\n\r\n     import android.annotation.SuppressLint;\r\n     import android.os.StrictMode;\r\n     import android.util.Log;\r\n     import java.sql.SQLException;\r\n     import java.sql.Connection;\r\n     import java.sql.DriverManager;\r\n    \r\n    /**\r\n     * Created by H-PC on 16-Oct-15.\r\n     */\r\n    public class ConnectionClass {\r\n    \r\n        String ip = &quot;******&quot;;\r\n        String classs = &quot;net.sourceforge.jtds.jdbc.Driver&quot;;\r\n        String db = &quot;IDB&quot;;\r\n        String un = &quot;sa&quot;;\r\n        String password = &quot;admin123&quot;;\r\n    \r\n        @SuppressLint(&quot;NewApi&quot;)\r\n        public Connection CONN() {\r\n            StrictMode.ThreadPolicy policy = new StrictMode.ThreadPolicy.Builder()\r\n                    .permitAll().build();\r\n            StrictMode.setThreadPolicy(policy);\r\n            Connection conn = null;\r\n            String ConnURL = null;\r\n            try {\r\n    \r\n                Class.forName(classs);\r\n                ConnURL = &quot;jdbc:jtds:sqlserver://&quot; + ip + &quot;;&quot;\r\n                        + &quot;databaseName=&quot; + db + &quot;;user=&quot; + un + &quot;;password=&quot;\r\n                        + password + &quot;;&quot;;\r\n                conn = DriverManager.getConnection(ConnURL);\r\n            } catch (SQLException se) {\r\n                Log.e(&quot;ERRO&quot;, se.getMessage());\r\n            } catch (ClassNotFoundException e) {\r\n                Log.e(&quot;ERRO&quot;, e.getMessage());\r\n            } catch (Exception e) {\r\n                Log.e(&quot;ERRO&quot;, e.getMessage());\r\n            }\r\n            return conn;\r\n        }\r\n    }\r\n\r\n    -------------------------------------------------------------------------------\r\n\r\n**MainActivity.java:**\r\n\r\n    import android.os.Bundle;\r\n    import android.support.design.widget.FloatingActionButton;\r\n    import android.support.design.widget.Snackbar;\r\n    import android.support.v7.app.AppCompatActivity;\r\n    import android.support.v7.widget.Toolbar;\r\n    import android.util.Log;\r\n    import android.view.View;\r\n    import android.view.Menu;\r\n    import android.view.MenuItem;\r\n    import android.widget.Button;\r\n    import android.widget.EditText;\r\n    import android.widget.TextView;\r\n    import android.view.View.OnClickListener;\r\n    import java.sql.Connection;\r\n\r\n    public class MainActivity extends AppCompatActivity {\r\n    \r\n        Button button1;\r\n        TextView txtView1;\r\n        EditText editText1;\r\n        ConnectionClass connectionClass;\r\n    \r\n        @Override\r\n        protected void onCreate(Bundle savedInstanceState) {\r\n            super.onCreate(savedInstanceState);\r\n            setContentView(R.layout.activity_main);\r\n            connectionClass = new ConnectionClass();\r\n            button1=(Button)findViewById(R.id.btnSearch);\r\n            txtView1=(TextView)findViewById(R.id.searchLbl);\r\n            editText1=(EditText)findViewById(R.id.txtSearch);\r\n    \r\n            button1.setOnClickListener(new View.OnClickListener(){\r\n    \r\n            @Override\r\n            public void onClick(View v) {\r\n    \r\n                    String newValue = editText1.getText().toString().trim();\r\n    \r\n                    if (newValue.toString().trim().equals(&quot;&quot;)) {\r\n                        txtView1.setText(&quot;Please Enter ID&quot;);\r\n                    }\r\n                    else\r\n                    {\r\n                        Connection con = connectionClass.CONN();\r\n\r\n                    if(con==null)\r\n                    {\r\n                        String msg=&quot;Error in SQL Connection&quot;;\r\n                    }\r\n                    else\r\n                    {\r\n                        String query= &quot;Select * From Employees Where EmpId=&#39;&quot;+newValue+&quot;&#39;&quot;;\r\n                    }\r\n                    }\r\n                }\r\n    \r\n    \r\n            });\r\n            }\r\n        }\r\n\r\n    ---------------------------------------------------------------------------\r\n**Text**\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\r\n    &lt;android.support.design.widget.CoordinatorLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\r\n        xmlns:app=&quot;http://schemas.android.com/apk/res-auto&quot;\r\n        xmlns:tools=&quot;http://schemas.android.com/tools&quot;\r\n        android:layout_width=&quot;match_parent&quot;\r\n        android:layout_height=&quot;match_parent&quot;\r\n        android:fitsSystemWindows=&quot;true&quot;\r\n        tools:context=&quot;com.example.laptop37.myapplication2.MainActivity&quot;&gt;\r\n    \r\n        &lt;RelativeLayout\r\n            android:layout_width=&quot;match_parent&quot;\r\n            android:layout_height=&quot;match_parent&quot;&gt;\r\n    \r\n            &lt;RelativeLayout\r\n                android:orientation=&quot;horizontal&quot;\r\n                android:layout_width=&quot;match_parent&quot;\r\n                android:layout_height=&quot;match_parent&quot;\r\n                android:layout_alignParentLeft=&quot;true&quot;\r\n                android:layout_alignParentStart=&quot;true&quot;&gt;\r\n    \r\n    \r\n    \r\n                &lt;EditText\r\n                    android:layout_width=&quot;285dp&quot;\r\n                    android:layout_height=&quot;42dp&quot;\r\n                    android:id=&quot;@+id/txtSearch&quot;\r\n                    android:layout_weight=&quot;1&quot;\r\n                    android:textColor=&quot;@color/material_deep_teal_500&quot;\r\n                    android:hint=&quot;enter id&quot;\r\n                    android:layout_gravity=&quot;center_vertical&quot;\r\n                    android:layout_below=&quot;@+id/textHeading&quot;\r\n                    android:layout_alignParentLeft=&quot;true&quot;\r\n                    android:layout_alignParentStart=&quot;true&quot;\r\n                    android:layout_marginTop=&quot;30px&quot;\r\n                    android:background=&quot;#b1e1b1&quot;\r\n                    android:layout_marginLeft=&quot;10px&quot;\r\n                    /&gt;\r\n    \r\n                &lt;TextView\r\n                    android:layout_width=&quot;wrap_content&quot;\r\n                    android:layout_height=&quot;wrap_content&quot;\r\n                    android:textAppearance=&quot;?android:attr/textAppearanceLarge&quot;\r\n                    android:text=&quot;Employee Data&quot;\r\n                    android:id=&quot;@+id/textHeading&quot;\r\n                    android:layout_weight=&quot;1&quot;\r\n                    android:layout_alignParentTop=&quot;true&quot;\r\n                    android:layout_alignParentLeft=&quot;true&quot;\r\n                    android:layout_alignParentStart=&quot;true&quot;\r\n                    android:layout_marginTop=&quot;30px&quot;\r\n                    android:layout_alignParentRight=&quot;true&quot;\r\n                    android:layout_alignParentEnd=&quot;true&quot;\r\n                    android:textAlignment=&quot;center&quot;\r\n                    android:textColor=&quot;#2eb114&quot;\r\n                    android:textSize=&quot;70px&quot;\r\n                    /&gt;\r\n    \r\n                &lt;Button\r\n                    android:layout_width=&quot;85dp&quot;\r\n                    android:layout_height=&quot;42dp&quot;\r\n                    android:text=&quot;Search&quot;\r\n                    android:id=&quot;@+id/btnSearch&quot;\r\n                    android:layout_weight=&quot;0.43&quot;\r\n                    android:background=&quot;@color/background_material_dark&quot;\r\n                    android:textColor=&quot;#ffffff&quot;\r\n                    android:layout_gravity=&quot;center_vertical&quot;\r\n                    android:layout_alignBottom=&quot;@+id/txtSearch&quot;\r\n                    android:layout_toRightOf=&quot;@+id/txtSearch&quot;\r\n                    android:layout_toEndOf=&quot;@+id/txtSearch&quot;\r\n                    android:layout_marginLeft=&quot;10px&quot;\r\n                    android:layout_marginStart=&quot;10px&quot;\r\n                    android:layout_marginRight=&quot;10px&quot;\r\n                    /&gt;\r\n    \r\n                &lt;TextView\r\n                    android:layout_width=&quot;wrap_content&quot;\r\n                    android:layout_height=&quot;wrap_content&quot;\r\n                    android:id=&quot;@+id/searchLbl&quot;\r\n                    android:layout_below=&quot;@+id/txtSearch&quot;\r\n                    android:layout_alignLeft=&quot;@+id/txtSearch&quot;\r\n                    android:layout_alignStart=&quot;@+id/txtSearch&quot;\r\n                    android:layout_marginTop=&quot;64dp&quot; /&gt;\r\n    \r\n                &lt;GridView\r\n                    android:layout_width=&quot;wrap_content&quot;\r\n                    android:layout_height=&quot;wrap_content&quot;\r\n                    android:id=&quot;@+id/gridViewEmp&quot;\r\n                    android:layout_alignRight=&quot;@+id/txtSearch&quot;\r\n                    android:layout_alignEnd=&quot;@+id/txtSearch&quot;\r\n                    android:layout_below=&quot;@+id/txtSearch&quot; /&gt;\r\n    \r\n    \r\n            &lt;/RelativeLayout&gt;\r\n        &lt;/RelativeLayout&gt;\r\n    \r\n    &lt;/android.support.design.widget.CoordinatorLayout&gt;\r\n    -------------------------------------------------------------------------------\r\n**Table(Employees) :**\r\n\r\n    EmpId EmpName Designation Gender Age Mob Address\r\n    ----- ------- ----------- ------ --- --- -------\r\n    1      asd    ttt           M     30     fghfhfh\r\n    2      dfg    yyy           F     26     fhgfhfhf\r\n    3      dfhh   ppp           M     47     fghhfghf\r\n\r\n    --------------------------------------------------------------------------------\r\n\r\n**Design:**\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: http://i.stack.imgur.com/FFYSu.jpg","title":"How to retrieve data from sql server db in android","body":"<p>this is the first time I am developing an android application. I want to bind some data with grid view or list view based employee id provided on the text box. How can I do that. Please help me to find a proper solution. Thank you.</p>\n\n<p><strong>ConnectionClass.java:</strong></p>\n\n<pre><code> import android.annotation.SuppressLint;\n import android.os.StrictMode;\n import android.util.Log;\n import java.sql.SQLException;\n import java.sql.Connection;\n import java.sql.DriverManager;\n\n/**\n * Created by H-PC on 16-Oct-15.\n */\npublic class ConnectionClass {\n\n    String ip = \"******\";\n    String classs = \"net.sourceforge.jtds.jdbc.Driver\";\n    String db = \"IDB\";\n    String un = \"sa\";\n    String password = \"admin123\";\n\n    @SuppressLint(\"NewApi\")\n    public Connection CONN() {\n        StrictMode.ThreadPolicy policy = new StrictMode.ThreadPolicy.Builder()\n                .permitAll().build();\n        StrictMode.setThreadPolicy(policy);\n        Connection conn = null;\n        String ConnURL = null;\n        try {\n\n            Class.forName(classs);\n            ConnURL = \"jdbc:jtds:sqlserver://\" + ip + \";\"\n                    + \"databaseName=\" + db + \";user=\" + un + \";password=\"\n                    + password + \";\";\n            conn = DriverManager.getConnection(ConnURL);\n        } catch (SQLException se) {\n            Log.e(\"ERRO\", se.getMessage());\n        } catch (ClassNotFoundException e) {\n            Log.e(\"ERRO\", e.getMessage());\n        } catch (Exception e) {\n            Log.e(\"ERRO\", e.getMessage());\n        }\n        return conn;\n    }\n}\n\n-------------------------------------------------------------------------------\n</code></pre>\n\n<p><strong>MainActivity.java:</strong></p>\n\n<pre><code>import android.os.Bundle;\nimport android.support.design.widget.FloatingActionButton;\nimport android.support.design.widget.Snackbar;\nimport android.support.v7.app.AppCompatActivity;\nimport android.support.v7.widget.Toolbar;\nimport android.util.Log;\nimport android.view.View;\nimport android.view.Menu;\nimport android.view.MenuItem;\nimport android.widget.Button;\nimport android.widget.EditText;\nimport android.widget.TextView;\nimport android.view.View.OnClickListener;\nimport java.sql.Connection;\n\npublic class MainActivity extends AppCompatActivity {\n\n    Button button1;\n    TextView txtView1;\n    EditText editText1;\n    ConnectionClass connectionClass;\n\n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.activity_main);\n        connectionClass = new ConnectionClass();\n        button1=(Button)findViewById(R.id.btnSearch);\n        txtView1=(TextView)findViewById(R.id.searchLbl);\n        editText1=(EditText)findViewById(R.id.txtSearch);\n\n        button1.setOnClickListener(new View.OnClickListener(){\n\n        @Override\n        public void onClick(View v) {\n\n                String newValue = editText1.getText().toString().trim();\n\n                if (newValue.toString().trim().equals(\"\")) {\n                    txtView1.setText(\"Please Enter ID\");\n                }\n                else\n                {\n                    Connection con = connectionClass.CONN();\n\n                if(con==null)\n                {\n                    String msg=\"Error in SQL Connection\";\n                }\n                else\n                {\n                    String query= \"Select * From Employees Where EmpId='\"+newValue+\"'\";\n                }\n                }\n            }\n\n\n        });\n        }\n    }\n\n---------------------------------------------------------------------------\n</code></pre>\n\n<p><strong>Text</strong></p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"utf-8\"?&gt;\n&lt;android.support.design.widget.CoordinatorLayout xmlns:android=\"http://schemas.android.com/apk/res/android\"\n    xmlns:app=\"http://schemas.android.com/apk/res-auto\"\n    xmlns:tools=\"http://schemas.android.com/tools\"\n    android:layout_width=\"match_parent\"\n    android:layout_height=\"match_parent\"\n    android:fitsSystemWindows=\"true\"\n    tools:context=\"com.example.laptop37.myapplication2.MainActivity\"&gt;\n\n    &lt;RelativeLayout\n        android:layout_width=\"match_parent\"\n        android:layout_height=\"match_parent\"&gt;\n\n        &lt;RelativeLayout\n            android:orientation=\"horizontal\"\n            android:layout_width=\"match_parent\"\n            android:layout_height=\"match_parent\"\n            android:layout_alignParentLeft=\"true\"\n            android:layout_alignParentStart=\"true\"&gt;\n\n\n\n            &lt;EditText\n                android:layout_width=\"285dp\"\n                android:layout_height=\"42dp\"\n                android:id=\"@+id/txtSearch\"\n                android:layout_weight=\"1\"\n                android:textColor=\"@color/material_deep_teal_500\"\n                android:hint=\"enter id\"\n                android:layout_gravity=\"center_vertical\"\n                android:layout_below=\"@+id/textHeading\"\n                android:layout_alignParentLeft=\"true\"\n                android:layout_alignParentStart=\"true\"\n                android:layout_marginTop=\"30px\"\n                android:background=\"#b1e1b1\"\n                android:layout_marginLeft=\"10px\"\n                /&gt;\n\n            &lt;TextView\n                android:layout_width=\"wrap_content\"\n                android:layout_height=\"wrap_content\"\n                android:textAppearance=\"?android:attr/textAppearanceLarge\"\n                android:text=\"Employee Data\"\n                android:id=\"@+id/textHeading\"\n                android:layout_weight=\"1\"\n                android:layout_alignParentTop=\"true\"\n                android:layout_alignParentLeft=\"true\"\n                android:layout_alignParentStart=\"true\"\n                android:layout_marginTop=\"30px\"\n                android:layout_alignParentRight=\"true\"\n                android:layout_alignParentEnd=\"true\"\n                android:textAlignment=\"center\"\n                android:textColor=\"#2eb114\"\n                android:textSize=\"70px\"\n                /&gt;\n\n            &lt;Button\n                android:layout_width=\"85dp\"\n                android:layout_height=\"42dp\"\n                android:text=\"Search\"\n                android:id=\"@+id/btnSearch\"\n                android:layout_weight=\"0.43\"\n                android:background=\"@color/background_material_dark\"\n                android:textColor=\"#ffffff\"\n                android:layout_gravity=\"center_vertical\"\n                android:layout_alignBottom=\"@+id/txtSearch\"\n                android:layout_toRightOf=\"@+id/txtSearch\"\n                android:layout_toEndOf=\"@+id/txtSearch\"\n                android:layout_marginLeft=\"10px\"\n                android:layout_marginStart=\"10px\"\n                android:layout_marginRight=\"10px\"\n                /&gt;\n\n            &lt;TextView\n                android:layout_width=\"wrap_content\"\n                android:layout_height=\"wrap_content\"\n                android:id=\"@+id/searchLbl\"\n                android:layout_below=\"@+id/txtSearch\"\n                android:layout_alignLeft=\"@+id/txtSearch\"\n                android:layout_alignStart=\"@+id/txtSearch\"\n                android:layout_marginTop=\"64dp\" /&gt;\n\n            &lt;GridView\n                android:layout_width=\"wrap_content\"\n                android:layout_height=\"wrap_content\"\n                android:id=\"@+id/gridViewEmp\"\n                android:layout_alignRight=\"@+id/txtSearch\"\n                android:layout_alignEnd=\"@+id/txtSearch\"\n                android:layout_below=\"@+id/txtSearch\" /&gt;\n\n\n        &lt;/RelativeLayout&gt;\n    &lt;/RelativeLayout&gt;\n\n&lt;/android.support.design.widget.CoordinatorLayout&gt;\n-------------------------------------------------------------------------------\n</code></pre>\n\n<p><strong>Table(Employees) :</strong></p>\n\n<pre><code>EmpId EmpName Designation Gender Age Mob Address\n----- ------- ----------- ------ --- --- -------\n1      asd    ttt           M     30     fghfhfh\n2      dfg    yyy           F     26     fhgfhfhf\n3      dfhh   ppp           M     47     fghhfghf\n\n--------------------------------------------------------------------------------\n</code></pre>\n\n<p><strong>Design:</strong></p>\n\n<p><a href=\"https://i.stack.imgur.com/FFYSu.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/FFYSu.jpg\" alt=\"enter image description here\"></a></p>\n"},{"tags":["java","hibernate","jpa","jpql"],"answers":[{"tags":[],"owner":{"account_id":7856677,"reputation":1967,"user_id":5938276,"accept_rate":38,"display_name":"Al Grant"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1691995917,"creation_date":1691995917,"answer_id":76896850,"question_id":76891108,"body_markdown":"It turns out that inner `SELECT` statements in hibernate 6 are relatively new feature.\r\n\r\nAlthough the inner `SELECT` works on its own, when used in the `LEFT JOIN` the values need aliases.\r\n\r\nSo this fragment: `SELECT MAX(w.healthCheck.catchDateTime), AVG(w.weight)` becomes `SELECT MAX(w.healthCheck.catchDateTime) AS weight_date, AVG(w.weight) AS avg_weight`\r\n\r\nPutting it all together :\r\n\r\n    @Service\r\n    @Transactional\r\n    public class CustomBirdRepositoryImpl implements CustomBirdRepository {\r\n\r\n    @PersistenceContext\r\n    private EntityManager entityManager;\r\n\r\n    @Override\r\n    public Object customQuery(Long id) {\r\n        return entityManager.createQuery(\r\n                        &quot;SELECT MAX(h.catchDateTime), AVG(l.beakLength), AVG(l.tarsusLength),  AVG(l.tarsusWidth), b.name, b.id, weight_date, avg_weight FROM LengthMeasurements l &quot; +\r\n                                &quot;JOIN l.healthCheck h &quot; +\r\n                                &quot;JOIN h.bird b &quot; +\r\n                                &quot;LEFT JOIN(SELECT MAX(w.healthCheck.catchDateTime) AS weight_date, AVG(w.weight) AS avg_weight, w.healthCheck.bird.id as bid FROM WeightMeasurements w WHERE w.healthCheck.bird.id=:id) AS x &quot; +\r\n                                &quot;ON b.id = x.bid &quot; +\r\n                                &quot;WHERE b.id=:id &quot; +\r\n                                &quot;GROUP BY b.id, h.id ORDER BY l.healthCheck.catchDateTime DESC LIMIT 1&quot;)\r\n                .setParameter(&quot;id&quot;, id)\r\n                .getSingleResult();\r\n        }\r\n    }\r\n\r\nFor completeness CustomBirdRepository\r\n\r\n    @Repository\r\n    public interface CustomBirdRepository {\r\n        Object customQuery(Long id);\r\n    }","title":"Spring Boot 3.1.2 subselect query failing - Hibernate 6.2","body":"<p>It turns out that inner <code>SELECT</code> statements in hibernate 6 are relatively new feature.</p>\n<p>Although the inner <code>SELECT</code> works on its own, when used in the <code>LEFT JOIN</code> the values need aliases.</p>\n<p>So this fragment: <code>SELECT MAX(w.healthCheck.catchDateTime), AVG(w.weight)</code> becomes <code>SELECT MAX(w.healthCheck.catchDateTime) AS weight_date, AVG(w.weight) AS avg_weight</code></p>\n<p>Putting it all together :</p>\n<pre><code>@Service\n@Transactional\npublic class CustomBirdRepositoryImpl implements CustomBirdRepository {\n\n@PersistenceContext\nprivate EntityManager entityManager;\n\n@Override\npublic Object customQuery(Long id) {\n    return entityManager.createQuery(\n                    &quot;SELECT MAX(h.catchDateTime), AVG(l.beakLength), AVG(l.tarsusLength),  AVG(l.tarsusWidth), b.name, b.id, weight_date, avg_weight FROM LengthMeasurements l &quot; +\n                            &quot;JOIN l.healthCheck h &quot; +\n                            &quot;JOIN h.bird b &quot; +\n                            &quot;LEFT JOIN(SELECT MAX(w.healthCheck.catchDateTime) AS weight_date, AVG(w.weight) AS avg_weight, w.healthCheck.bird.id as bid FROM WeightMeasurements w WHERE w.healthCheck.bird.id=:id) AS x &quot; +\n                            &quot;ON b.id = x.bid &quot; +\n                            &quot;WHERE b.id=:id &quot; +\n                            &quot;GROUP BY b.id, h.id ORDER BY l.healthCheck.catchDateTime DESC LIMIT 1&quot;)\n            .setParameter(&quot;id&quot;, id)\n            .getSingleResult();\n    }\n}\n</code></pre>\n<p>For completeness CustomBirdRepository</p>\n<pre><code>@Repository\npublic interface CustomBirdRepository {\n    Object customQuery(Long id);\n}\n</code></pre>\n"}],"owner":{"account_id":7856677,"reputation":1967,"user_id":5938276,"accept_rate":38,"display_name":"Al Grant"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":438,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76896850,"answer_count":1,"score":0,"last_activity_date":1692086501,"creation_date":1691873990,"question_id":76891108,"body_markdown":"I would like to be able to use a native Hibernate query in Spring Boot 3.1.2. The reason for this is as I understand it, HQL can handle nested SELECTS (not in where) better than JPQL. \r\n\r\nMy model is \r\nBird has OneToMany on HealthCheck\r\nHealthCheck has OneToMany on Task (abstract)\r\nLengthMeasurements (extends Task)\r\nWeightMeasurement (extends Task)\r\n\r\n **Bird**   \r\n\r\n    public class Bird {\r\n    private Long id;\r\n    @OneToMany(cascade = CascadeType.ALL, orphanRemoval = true, mappedBy = &quot;bird&quot;)\r\n    private List&lt;HealthCheck&gt; listHealthCheck = new ArrayList&lt;&gt;();\r\n\r\n**HealthCheck**\r\n\r\n    public class HealthCheck {\r\n    private Long id;\r\n\r\n    @JsonManagedReference\r\n    @ManyToOne(fetch = FetchType.EAGER, optional = false)\r\n    private Bird bird;\r\n    @JsonManagedReference\r\n    @OneToMany(cascade = CascadeType.ALL, orphanRemoval = true, mappedBy=&quot;healthCheck&quot;)\r\n    private List&lt;Task&gt; tasks;\r\n    private LocalDateTime catchDateTime;\r\n\r\n**Length Measurement**\r\n\r\n    public class LengthMeasurements extends Task {\r\n\r\n    private Double beakLength;\r\n    private Double legLength;\r\n    private Double armWidth;\r\n    private Double armDepth;\r\n\r\n**WeightMeasurement**\r\n\r\n    public class WeightMeasurements extends Task {\r\n        private Double weight;\r\n\r\nThe abstract class Task means I can&#39;t use hibernate path expressions.\r\n\r\nI want to ultimately construct a query the gets the most recent (based on check date) average of the most recent collection of measurements and the average of the most recent weights.\r\n\r\nSomething like:\r\n\r\n    +---------+-----------+---------------------+------------+-----------+-----------+--------------------+------------+\r\n    | bird.id | bird.name | recent measure date | avg length | avg width | avg depth | recent weight date | avg weight |\r\n    +---------+-----------+---------------------+------------+-----------+-----------+--------------------+------------+\r\n\r\n\r\nThere is a number of partial examples but they are old and the Spring Boot auto configuration interferes with what I have tried to date.\r\n\r\nTo give some context on my attempt so far I have the following code:\r\n\r\n    @Repository\r\n    public class CustomBirdRepositoryImpl {\r\n\r\n    @PersistenceContext\r\n    private EntityManager entityManager;\r\n\r\n\r\n        final SessionFactory sf = entityManager\r\n                .unwrap( Session.class );\r\n\r\n        public void customHql(Long id) {\r\n        Session session = sf.openSession();\r\n\r\n        String hql = &quot; SELECT MAX(h.catchDateTime), AVG(l.beakLength), \r\n    AVG(l.tarsusLength),  AVG(l.tarsusWidth), b.name FROM LengthMeasurements l \r\n     JOIN l.healthCheck.bird b \r\n     JOIN l.healthCheck h \r\n     LEFT JOIN (SELECT MAX(w.healthCheck.catchDateTIme), AVG(w.weight), w.healthCheck.bird.id as bid FROM WeightMeasurements w WHERE w.healthCheck.bird.id=1) AS x\r\n     ON x.bid = w.healthCheck.bird.id\r\n     WHERE b.id=1 GROUP BY b.id, h.id ORDER BY l.healthCheck.catchDateTime DESC LIMIT 1&quot;;\r\n        org.hibernate.query.Query&lt;BirdDetailsDto&gt; query = session.createQuery(hql);\r\n\r\n        for(BirdDetailsDto b: query.getResultList()) {\r\n            b.toString();\r\n        }\r\n\r\n       }\r\n    }\r\n\r\nIf I try to run the query above in JPA I get:\r\n\r\n      src\\main\\java\\com\\nz\\kiwi\\repository\\BirdRepository.java:54: error: &#39;)&#39; expected\r\n        &quot;WHERE b.id = :id ORDER BY l.healthCheck.catchDate DESC LIMIT 1) lm&quot;;)\r\n\r\n**UPDATE**\r\n\r\nWhen trying the query in a Hibernate session I get the more informative error:\r\n\r\n    Caused by: java.lang.IllegalArgumentException: Component at index 0 has no alias, but alias is required\r\n\r\nHow can I perform this sub select statement?","title":"Spring Boot 3.1.2 subselect query failing - Hibernate 6.2","body":"<p>I would like to be able to use a native Hibernate query in Spring Boot 3.1.2. The reason for this is as I understand it, HQL can handle nested SELECTS (not in where) better than JPQL.</p>\n<p>My model is\nBird has OneToMany on HealthCheck\nHealthCheck has OneToMany on Task (abstract)\nLengthMeasurements (extends Task)\nWeightMeasurement (extends Task)</p>\n<p><strong>Bird</strong></p>\n<pre><code>public class Bird {\nprivate Long id;\n@OneToMany(cascade = CascadeType.ALL, orphanRemoval = true, mappedBy = &quot;bird&quot;)\nprivate List&lt;HealthCheck&gt; listHealthCheck = new ArrayList&lt;&gt;();\n</code></pre>\n<p><strong>HealthCheck</strong></p>\n<pre><code>public class HealthCheck {\nprivate Long id;\n\n@JsonManagedReference\n@ManyToOne(fetch = FetchType.EAGER, optional = false)\nprivate Bird bird;\n@JsonManagedReference\n@OneToMany(cascade = CascadeType.ALL, orphanRemoval = true, mappedBy=&quot;healthCheck&quot;)\nprivate List&lt;Task&gt; tasks;\nprivate LocalDateTime catchDateTime;\n</code></pre>\n<p><strong>Length Measurement</strong></p>\n<pre><code>public class LengthMeasurements extends Task {\n\nprivate Double beakLength;\nprivate Double legLength;\nprivate Double armWidth;\nprivate Double armDepth;\n</code></pre>\n<p><strong>WeightMeasurement</strong></p>\n<pre><code>public class WeightMeasurements extends Task {\n    private Double weight;\n</code></pre>\n<p>The abstract class Task means I can't use hibernate path expressions.</p>\n<p>I want to ultimately construct a query the gets the most recent (based on check date) average of the most recent collection of measurements and the average of the most recent weights.</p>\n<p>Something like:</p>\n<pre><code>+---------+-----------+---------------------+------------+-----------+-----------+--------------------+------------+\n| bird.id | bird.name | recent measure date | avg length | avg width | avg depth | recent weight date | avg weight |\n+---------+-----------+---------------------+------------+-----------+-----------+--------------------+------------+\n</code></pre>\n<p>There is a number of partial examples but they are old and the Spring Boot auto configuration interferes with what I have tried to date.</p>\n<p>To give some context on my attempt so far I have the following code:</p>\n<pre><code>@Repository\npublic class CustomBirdRepositoryImpl {\n\n@PersistenceContext\nprivate EntityManager entityManager;\n\n\n    final SessionFactory sf = entityManager\n            .unwrap( Session.class );\n\n    public void customHql(Long id) {\n    Session session = sf.openSession();\n\n    String hql = &quot; SELECT MAX(h.catchDateTime), AVG(l.beakLength), \nAVG(l.tarsusLength),  AVG(l.tarsusWidth), b.name FROM LengthMeasurements l \n JOIN l.healthCheck.bird b \n JOIN l.healthCheck h \n LEFT JOIN (SELECT MAX(w.healthCheck.catchDateTIme), AVG(w.weight), w.healthCheck.bird.id as bid FROM WeightMeasurements w WHERE w.healthCheck.bird.id=1) AS x\n ON x.bid = w.healthCheck.bird.id\n WHERE b.id=1 GROUP BY b.id, h.id ORDER BY l.healthCheck.catchDateTime DESC LIMIT 1&quot;;\n    org.hibernate.query.Query&lt;BirdDetailsDto&gt; query = session.createQuery(hql);\n\n    for(BirdDetailsDto b: query.getResultList()) {\n        b.toString();\n    }\n\n   }\n}\n</code></pre>\n<p>If I try to run the query above in JPA I get:</p>\n<pre><code>  src\\main\\java\\com\\nz\\kiwi\\repository\\BirdRepository.java:54: error: ')' expected\n    &quot;WHERE b.id = :id ORDER BY l.healthCheck.catchDate DESC LIMIT 1) lm&quot;;)\n</code></pre>\n<p><strong>UPDATE</strong></p>\n<p>When trying the query in a Hibernate session I get the more informative error:</p>\n<pre><code>Caused by: java.lang.IllegalArgumentException: Component at index 0 has no alias, but alias is required\n</code></pre>\n<p>How can I perform this sub select statement?</p>\n"},{"tags":["java","selenium-webdriver"],"answers":[{"comments":[{"owner":{"account_id":22618955,"reputation":3,"user_id":16798063,"display_name":"Sameer Mohsin"},"score":0,"creation_date":1692086796,"post_id":76904186,"comment_id":135573830,"body_markdown":"Can you show it to me via code. It would help me understand better. My requirement is to access each megamenu and its related dropdown link.","body":"Can you show it to me via code. It would help me understand better. My requirement is to access each megamenu and its related dropdown link."},{"owner":{"account_id":26682848,"reputation":3568,"user_id":20292589,"display_name":"Yaroslavm"},"score":0,"creation_date":1692087155,"post_id":76904186,"comment_id":135573894,"body_markdown":"@SameerMohsin I need reproducible example from you to show you on real case.","body":"@SameerMohsin I need reproducible example from you to show you on real case."}],"tags":[],"owner":{"account_id":26682848,"reputation":3568,"user_id":20292589,"display_name":"Yaroslavm"},"comment_count":2,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1692085603,"creation_date":1692085603,"answer_id":76904186,"question_id":76903640,"body_markdown":"`StaleElementReferenceException` indicates that the reference to an element is now stale i.e. the element no longer appears within the HTML DOM of the page.\r\n\r\n`WebElement` is not an object itself, it is a link to an object. \r\nClicking on menu item you triggered one of events:\r\n 1. Dropdown menu is disappeared and not exist anymore (so object is not exist, but link to it still present as far as you got it before)\r\n 2. Click on dropdown triggered transition to another page.\r\n\r\nIn any case to continue operations with dropdown, you need to open it again and get array of it&#39;s elements.\r\n\r\nDepends on you case it can be done triggering back via browser if transition on another page was performed and clicking on dropdown element or just clicking on it.\r\n\r\n","title":"Selenium Automation java","body":"<p><code>StaleElementReferenceException</code> indicates that the reference to an element is now stale i.e. the element no longer appears within the HTML DOM of the page.</p>\n<p><code>WebElement</code> is not an object itself, it is a link to an object.\nClicking on menu item you triggered one of events:</p>\n<ol>\n<li>Dropdown menu is disappeared and not exist anymore (so object is not exist, but link to it still present as far as you got it before)</li>\n<li>Click on dropdown triggered transition to another page.</li>\n</ol>\n<p>In any case to continue operations with dropdown, you need to open it again and get array of it's elements.</p>\n<p>Depends on you case it can be done triggering back via browser if transition on another page was performed and clicking on dropdown element or just clicking on it.</p>\n"}],"owner":{"account_id":22618955,"reputation":3,"user_id":16798063,"display_name":"Sameer Mohsin"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":29,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1692085603,"creation_date":1692078010,"question_id":76903640,"body_markdown":"I have this code which gets me the link and name of each mega menu and dropdown I want to click all the mega menu and dropdown and then continue when I try the .click method it shows Stale Reference. Any help will be appreciated.\r\n```\r\n public static void DropdownItemsDetails(List&lt;WebElement&gt; itemLists) {\r\n            for (int j = 0; j &lt; itemLists.size(); j++) {\r\n                WebElement dropdownItem = itemLists.get(j);\r\n\r\n                // Get the dropdown item text and link\r\n                String dropdownItemText = dropdownItem.getText();\r\n                String dropdownItemLink = dropdownItem.getAttribute(&quot;href&quot;);\r\n\r\n                // Print the link and name\r\n                System.out.println(&quot;Dropdown Item: &quot; + dropdownItemText);\r\n                System.out.println(&quot;Dropdown Item Link: &quot; + dropdownItemLink);\r\n            }\r\n        }\r\npublic static void countAndRetrieveNavbarItems() {\r\n            // xpath for mega menu.\r\n            List&lt;WebElement&gt; megaMenuXpath = driver.findElements(By.xpath(&quot;//div[contains(@class, &#39;navbar&#39;)]//a[contains(@class, &#39;menu&#39;)]&quot;));\r\n\r\n            // hover object creation\r\n            Actions actions = new Actions(driver);\r\n\r\n            // total navbar items\r\n            int megaMenuCount = megaMenuXpath.size();\r\n            System.out.println(&quot;Total Mega Menu Items: &quot; + megaMenuCount + &quot;\\n*************************&quot;);\r\n\r\n            // Iterate through both navbar items and dropdown items\r\n            for (int i = 0; i &lt; megaMenuCount; i++) {\r\n                System.out.println(&quot;==========================================================================================================&quot;);\r\n                WebElement megaMenuItem = megaMenuXpath.get(i);\r\n                // Perform hover action on the navbar item\r\n                actions.moveToElement(megaMenuItem).perform();\r\n                // Get the navbar item text and link\r\n                String navbarItemText = megaMenuItem.getText();\r\n                String navbarItemLink = megaMenuItem.getAttribute(&quot;href&quot;);\r\n                System.out.println(&quot;MegaMenu Name: &quot; + navbarItemText +&quot;\\n==============&quot;);\r\n                System.out.println(&quot;MegaMenu Link: &quot; + navbarItemLink+&quot;\\n==============&quot;);\r\n\r\n                // Check if the dropdown is present for the current navbar item\r\n                try {\r\n                    WebElement dropdownContent = megaMenuItem.findElement(By.xpath(&quot;.//following-sibling::div[contains(@class, &#39;dropdown-content&#39;)]&quot;));\r\n                    if (dropdownContent != null) {\r\n                        // Get all the dropdown items\r\n                        List&lt;WebElement&gt; dropdownItems = dropdownContent.findElements(By.tagName(&quot;a&quot;));\r\n                        System.out.println(&quot;Dropdown item count: &quot;+dropdownItems.size()+ &quot;\\n*************************&quot;);\r\n                        //get dropdown details\r\n                        DropdownItemsDetails(dropdownItems);\r\n                    }\r\n                } catch (NoSuchElementException e) {\r\n                    // Dropdown not present, continue with the next navbar item\r\n                    System.out.println(&quot;No dropdown for this menu: &quot;+navbarItemText);\r\n                    continue;\r\n                }\r\n                // if end validation\r\n            } // for end navbar item\r\n        }\r\n```\r\n\r\n\r\nI tried the megaMenuItem.click(); after System.out.println(&quot;MegaMenu Link: &quot; + navbarItemLink+&quot;\\n==============&quot;); this line it gave me this error:org.openqa.selenium.StaleElementReferenceException: stale element reference: stale element not found","title":"Selenium Automation java","body":"<p>I have this code which gets me the link and name of each mega menu and dropdown I want to click all the mega menu and dropdown and then continue when I try the .click method it shows Stale Reference. Any help will be appreciated.</p>\n<pre><code> public static void DropdownItemsDetails(List&lt;WebElement&gt; itemLists) {\n            for (int j = 0; j &lt; itemLists.size(); j++) {\n                WebElement dropdownItem = itemLists.get(j);\n\n                // Get the dropdown item text and link\n                String dropdownItemText = dropdownItem.getText();\n                String dropdownItemLink = dropdownItem.getAttribute(&quot;href&quot;);\n\n                // Print the link and name\n                System.out.println(&quot;Dropdown Item: &quot; + dropdownItemText);\n                System.out.println(&quot;Dropdown Item Link: &quot; + dropdownItemLink);\n            }\n        }\npublic static void countAndRetrieveNavbarItems() {\n            // xpath for mega menu.\n            List&lt;WebElement&gt; megaMenuXpath = driver.findElements(By.xpath(&quot;//div[contains(@class, 'navbar')]//a[contains(@class, 'menu')]&quot;));\n\n            // hover object creation\n            Actions actions = new Actions(driver);\n\n            // total navbar items\n            int megaMenuCount = megaMenuXpath.size();\n            System.out.println(&quot;Total Mega Menu Items: &quot; + megaMenuCount + &quot;\\n*************************&quot;);\n\n            // Iterate through both navbar items and dropdown items\n            for (int i = 0; i &lt; megaMenuCount; i++) {\n                System.out.println(&quot;==========================================================================================================&quot;);\n                WebElement megaMenuItem = megaMenuXpath.get(i);\n                // Perform hover action on the navbar item\n                actions.moveToElement(megaMenuItem).perform();\n                // Get the navbar item text and link\n                String navbarItemText = megaMenuItem.getText();\n                String navbarItemLink = megaMenuItem.getAttribute(&quot;href&quot;);\n                System.out.println(&quot;MegaMenu Name: &quot; + navbarItemText +&quot;\\n==============&quot;);\n                System.out.println(&quot;MegaMenu Link: &quot; + navbarItemLink+&quot;\\n==============&quot;);\n\n                // Check if the dropdown is present for the current navbar item\n                try {\n                    WebElement dropdownContent = megaMenuItem.findElement(By.xpath(&quot;.//following-sibling::div[contains(@class, 'dropdown-content')]&quot;));\n                    if (dropdownContent != null) {\n                        // Get all the dropdown items\n                        List&lt;WebElement&gt; dropdownItems = dropdownContent.findElements(By.tagName(&quot;a&quot;));\n                        System.out.println(&quot;Dropdown item count: &quot;+dropdownItems.size()+ &quot;\\n*************************&quot;);\n                        //get dropdown details\n                        DropdownItemsDetails(dropdownItems);\n                    }\n                } catch (NoSuchElementException e) {\n                    // Dropdown not present, continue with the next navbar item\n                    System.out.println(&quot;No dropdown for this menu: &quot;+navbarItemText);\n                    continue;\n                }\n                // if end validation\n            } // for end navbar item\n        }\n</code></pre>\n<p>I tried the megaMenuItem.click(); after System.out.println(&quot;MegaMenu Link: &quot; + navbarItemLink+&quot;\\n==============&quot;); this line it gave me this error:org.openqa.selenium.StaleElementReferenceException: stale element reference: stale element not found</p>\n"},{"tags":["java","list"],"answers":[{"tags":[],"owner":{"account_id":100270,"reputation":127154,"user_id":270371,"accept_rate":33,"display_name":"davidxxx"},"comment_count":0,"down_vote_count":0,"up_vote_count":8,"is_accepted":true,"score":8,"last_activity_date":1539338011,"creation_date":1539338011,"answer_id":52776937,"question_id":52776889,"body_markdown":"You could use `Stream.allMatch()` by matching any contained list size (for example the first one) with all other contained lists : \r\n\r\n    boolean isSameLength = \r\n    myList.stream()\r\n          .allMatch(l -&gt; l.size() == myList.get(0).size())\r\n\r\nIt makes the first comparison helpless as it compares the same contained list but it is more readable that : \r\n\r\n    boolean isSameLength = \r\n    myList.stream()\r\n          .skip(1)\r\n          .allMatch(l -&gt; l.size() == myList.get(0).size())\r\n","title":"how to check if the lists in a list have the same length","body":"<p>You could use <code>Stream.allMatch()</code> by matching any contained list size (for example the first one) with all other contained lists : </p>\n\n<pre><code>boolean isSameLength = \nmyList.stream()\n      .allMatch(l -&gt; l.size() == myList.get(0).size())\n</code></pre>\n\n<p>It makes the first comparison helpless as it compares the same contained list but it is more readable that : </p>\n\n<pre><code>boolean isSameLength = \nmyList.stream()\n      .skip(1)\n      .allMatch(l -&gt; l.size() == myList.get(0).size())\n</code></pre>\n"},{"comments":[{"owner":{"account_id":100270,"reputation":127154,"user_id":270371,"accept_rate":33,"display_name":"davidxxx"},"score":0,"creation_date":1539339202,"post_id":52777214,"comment_id":92476140,"body_markdown":"`if (sublist.size() == myList.size()) {` is helpless. What you want to detect is &quot;if the sizes differ&quot;. Besides you can exit from the loop as soon as this condition is detected. You don&#39;t need to have a boolean flag.","body":"<code>if (sublist.size() == myList.size()) {</code> is helpless. What you want to detect is &quot;if the sizes differ&quot;. Besides you can exit from the loop as soon as this condition is detected. You don&#39;t need to have a boolean flag."},{"owner":{"account_id":8958875,"reputation":3265,"user_id":6682274,"accept_rate":25,"display_name":"Sudhir Ojha"},"score":0,"creation_date":1539339562,"post_id":52777214,"comment_id":92476323,"body_markdown":"@davidxxx boolean flag is needed because we need to override the result at each iteration.","body":"@davidxxx boolean flag is needed because we need to override the result at each iteration."},{"owner":{"account_id":5870718,"reputation":3152,"user_id":4623129,"display_name":"Khalid Shah"},"score":0,"creation_date":1539348731,"post_id":52777214,"comment_id":92481385,"body_markdown":"@SudhirOjha `sublist.size() == myList.size()` means you compare the parent list size with every child list. its not he wants. he wants to check if all sublists have same size or not ?","body":"@SudhirOjha <code>sublist.size() == myList.size()</code> means you compare the parent list size with every child list. its not he wants. he wants to check if all sublists have same size or not ?"},{"owner":{"account_id":8958875,"reputation":3265,"user_id":6682274,"accept_rate":25,"display_name":"Sudhir Ojha"},"score":0,"creation_date":1539349447,"post_id":52777214,"comment_id":92481763,"body_markdown":"So how will you do this without using stream ?","body":"So how will you do this without using stream ?"},{"owner":{"account_id":100270,"reputation":127154,"user_id":270371,"accept_rate":33,"display_name":"davidxxx"},"score":0,"creation_date":1539355987,"post_id":52777214,"comment_id":92485600,"body_markdown":"@Sudhir Ojha The answer of Raven shows the way of doing it without stream : no flag is required.","body":"@Sudhir Ojha The answer of Raven shows the way of doing it without stream : no flag is required."}],"tags":[],"owner":{"account_id":8958875,"reputation":3265,"user_id":6682274,"accept_rate":25,"display_name":"Sudhir Ojha"},"comment_count":5,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1539338859,"creation_date":1539338859,"answer_id":52777214,"question_id":52776889,"body_markdown":"You can also check using a counter variable, iterate your `myList` and get the size of `sublist`. If size of `myList`== `sublist` then assign `true` else assign `false` like following:\r\n\r\n    public static boolean isSameLength(List&lt;List&lt;Integer&gt;&gt; myList) {\r\n\t\tboolean isSame = false;\r\n\t\tfor (List&lt;Integer&gt; sublist : myList) {\r\n\t\t\tif (sublist.size() == myList.size()) {\r\n\t\t\t\tisSame = true;\r\n\t\t\t} else {\r\n\t\t\t\tisSame = false;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn isSame;\r\n\t}","title":"how to check if the lists in a list have the same length","body":"<p>You can also check using a counter variable, iterate your <code>myList</code> and get the size of <code>sublist</code>. If size of <code>myList</code>== <code>sublist</code> then assign <code>true</code> else assign <code>false</code> like following:</p>\n\n<pre><code>public static boolean isSameLength(List&lt;List&lt;Integer&gt;&gt; myList) {\n    boolean isSame = false;\n    for (List&lt;Integer&gt; sublist : myList) {\n        if (sublist.size() == myList.size()) {\n            isSame = true;\n        } else {\n            isSame = false;\n        }\n    }\n    return isSame;\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":100270,"reputation":127154,"user_id":270371,"accept_rate":33,"display_name":"davidxxx"},"score":0,"creation_date":1539354449,"post_id":52781547,"comment_id":92484659,"body_markdown":"Good answer. But I think that the first check `if(lists.get(0) == null){\n        return true;\n    }` is not required because to be consistent you should do it for every contained lists and besides checking null is actually not a requirement.","body":"Good answer. But I think that the first check <code>if(lists.get(0) == null){         return true;     }</code> is not required because to be consistent you should do it for every contained lists and besides checking null is actually not a requirement."},{"owner":{"account_id":5234978,"reputation":144,"user_id":4780472,"display_name":"Raven221221221"},"score":0,"creation_date":1539355898,"post_id":52781547,"comment_id":92485558,"body_markdown":"Thanks - the streams are more readable and optimization in this case does not make much sense, but they run a little bit longer (for a very long `List`). The null check - this would still crash if `lists` is null, but I thought that I may want to return `true` for an empty list - since across 0 lists, they all have the same length. Maybe `if(lists.isEmpty())` would make more sense.","body":"Thanks - the streams are more readable and optimization in this case does not make much sense, but they run a little bit longer (for a very long <code>List</code>). The null check - this would still crash if <code>lists</code> is null, but I thought that I may want to return <code>true</code> for an empty list - since across 0 lists, they all have the same length. Maybe <code>if(lists.isEmpty())</code> would make more sense."},{"owner":{"account_id":100270,"reputation":127154,"user_id":270371,"accept_rate":33,"display_name":"davidxxx"},"score":0,"creation_date":1539356295,"post_id":52781547,"comment_id":92485764,"body_markdown":"You are welcome :)  A list may have null elements at some indexes and not null values at the next indexes. So `lists.get(0) == null` seems to be too specific.  `if(lists.isEmpty())` would make more sense but well if there is not any contained list, it means no iteration. So no optimization.  :)","body":"You are welcome :)  A list may have null elements at some indexes and not null values at the next indexes. So <code>lists.get(0) == null</code> seems to be too specific.  <code>if(lists.isEmpty())</code> would make more sense but well if there is not any contained list, it means no iteration. So no optimization.  :)"},{"owner":{"account_id":5234978,"reputation":144,"user_id":4780472,"display_name":"Raven221221221"},"score":0,"creation_date":1539358455,"post_id":52781547,"comment_id":92486957,"body_markdown":"Of course - you&#39;re right. In this form neither check makes any sense (I did not consider the case that there is a `null` at `0` and a valid `Integer` at `1`). I wonder if you should write null checks (for example inside the foreach) or just say that an exception will be thrown if the `List` contains `null`?","body":"Of course - you&#39;re right. In this form neither check makes any sense (I did not consider the case that there is a <code>null</code> at <code>0</code> and a valid <code>Integer</code> at <code>1</code>). I wonder if you should write null checks (for example inside the foreach) or just say that an exception will be thrown if the <code>List</code> contains <code>null</code>?"},{"owner":{"account_id":100270,"reputation":127154,"user_id":270371,"accept_rate":33,"display_name":"davidxxx"},"score":1,"creation_date":1539363328,"post_id":52781547,"comment_id":92489295,"body_markdown":"according to the OP example, the null case is not possible, so as said in my first comment I just would ignore that. In a general way, performing null check is better than leaving an exception rises if the case is known and may be handled . An exception is an exceptional thing to signal a problem.","body":"according to the OP example, the null case is not possible, so as said in my first comment I just would ignore that. In a general way, performing null check is better than leaving an exception rises if the case is known and may be handled . An exception is an exceptional thing to signal a problem."}],"tags":[],"owner":{"account_id":5234978,"reputation":144,"user_id":4780472,"display_name":"Raven221221221"},"comment_count":5,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1539358546,"creation_date":1539354050,"answer_id":52781547,"question_id":52776889,"body_markdown":"You cannot hope to say that *n* lists have the same length without visiting them. You **have** to go one-by-one. davidxxx&#39;s answer shows a really nice way with streams but visits all the lists anyway. The naive way may be\r\n\r\n    public static boolean sameLength(List&lt;List&gt; lists){\r\n        if(lists.get(0) == null){ //EDIT: as davidxxx pointed out this if is superfluous\r\n            return true;\r\n        }\r\n        int len = lists.get(0).size();\r\n        for (List list : lists) {\r\n            if(list.size() != len){\r\n                return false;\r\n            }\r\n        }\r\n        return true;\r\n    }\r\n\r\nMy IDE even suggests using functional operators with the above code like davidxxx said.","title":"how to check if the lists in a list have the same length","body":"<p>You cannot hope to say that <em>n</em> lists have the same length without visiting them. You <strong>have</strong> to go one-by-one. davidxxx's answer shows a really nice way with streams but visits all the lists anyway. The naive way may be</p>\n\n<pre><code>public static boolean sameLength(List&lt;List&gt; lists){\n    if(lists.get(0) == null){ //EDIT: as davidxxx pointed out this if is superfluous\n        return true;\n    }\n    int len = lists.get(0).size();\n    for (List list : lists) {\n        if(list.size() != len){\n            return false;\n        }\n    }\n    return true;\n}\n</code></pre>\n\n<p>My IDE even suggests using functional operators with the above code like davidxxx said.</p>\n"},{"tags":[],"owner":{"account_id":9938803,"reputation":128,"user_id":7466089,"display_name":"Fabian Brand&#227;o"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1539364622,"creation_date":1539363374,"answer_id":52783977,"question_id":52776889,"body_markdown":"If you use Java 8, you can use lambda expressions to simplify your application. Look:\r\n\r\n    if (myList.stream().filter(integers -&gt; integers.size() == myList.get(0).size()).count() == myList.size()) {\r\n        System.out.println(&quot;The sub-lists have the same size&quot;);\r\n    }\r\n","title":"how to check if the lists in a list have the same length","body":"<p>If you use Java 8, you can use lambda expressions to simplify your application. Look:</p>\n\n<pre><code>if (myList.stream().filter(integers -&gt; integers.size() == myList.get(0).size()).count() == myList.size()) {\n    System.out.println(\"The sub-lists have the same size\");\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":12639214,"reputation":17265,"user_id":9187350,"accept_rate":20,"display_name":"renatodamas"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1616616771,"creation_date":1616616771,"answer_id":66788659,"question_id":52776889,"body_markdown":"I propose the following:\r\n\r\n    myList.stream()\r\n        .map(e -&gt; e.size())\r\n        .distinct()\r\n        .limit(2)  // optimization\r\n        .count() == 1;\r\n\r\nBasically checking if there are any 2 lists with a different size.","title":"how to check if the lists in a list have the same length","body":"<p>I propose the following:</p>\n<pre><code>myList.stream()\n    .map(e -&gt; e.size())\n    .distinct()\n    .limit(2)  // optimization\n    .count() == 1;\n</code></pre>\n<p>Basically checking if there are any 2 lists with a different size.</p>\n"},{"tags":[],"owner":{"account_id":6202518,"reputation":937,"user_id":4831778,"accept_rate":67,"display_name":"M2E67"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1692085598,"creation_date":1668596854,"answer_id":74459425,"question_id":52776889,"body_markdown":"```kotlin\r\nlistOfList.stream().map(list -&gt; list.size()).distinct().count() == 1\r\n```","title":"how to check if the lists in a list have the same length","body":"<pre class=\"lang-kotlin prettyprint-override\"><code>listOfList.stream().map(list -&gt; list.size()).distinct().count() == 1\n</code></pre>\n"}],"owner":{"account_id":10142806,"reputation":587,"user_id":7491982,"accept_rate":83,"display_name":"helen"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":3919,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":52776937,"answer_count":6,"score":2,"last_activity_date":1692085598,"creation_date":1539337838,"question_id":52776889,"body_markdown":"I have a list of lists in Java. Here is the code:\r\n\r\n    List&lt;List&lt;Integer&gt;&gt; myList = new ArrayList&lt;&gt;();\r\n    myList.add(new ArrayList&lt;Integer&gt;());\r\n    myList.add(new ArrayList&lt;Integer&gt;());\r\n    myList.add(new ArrayList&lt;Integer&gt;());\r\n    \r\n    myList.get(0).add(1);\r\n    myList.get(0).add(2);\r\n    myList.get(0).add(3);\r\n    myList.get(1).add(4);\r\n    myList.get(1).add(5);\r\n    myList.get(1).add(6);\r\n    myList.get(2).add(7);\r\n    myList.get(2).add(8);\r\n    myList.get(2).add(9);\r\n\r\nHow to check if the lists that exist in myList have the same length? I know that I can check the length of each list by something like `myList.get(0).size()`, so what is an efficient and short way to check if all these lists have the same length (instead of checking one by one)?","title":"how to check if the lists in a list have the same length","body":"<p>I have a list of lists in Java. Here is the code:</p>\n\n<pre><code>List&lt;List&lt;Integer&gt;&gt; myList = new ArrayList&lt;&gt;();\nmyList.add(new ArrayList&lt;Integer&gt;());\nmyList.add(new ArrayList&lt;Integer&gt;());\nmyList.add(new ArrayList&lt;Integer&gt;());\n\nmyList.get(0).add(1);\nmyList.get(0).add(2);\nmyList.get(0).add(3);\nmyList.get(1).add(4);\nmyList.get(1).add(5);\nmyList.get(1).add(6);\nmyList.get(2).add(7);\nmyList.get(2).add(8);\nmyList.get(2).add(9);\n</code></pre>\n\n<p>How to check if the lists that exist in myList have the same length? I know that I can check the length of each list by something like <code>myList.get(0).size()</code>, so what is an efficient and short way to check if all these lists have the same length (instead of checking one by one)?</p>\n"},{"tags":["java","for-loop","random","hashmap"],"comments":[{"owner":{"account_id":1888781,"reputation":2007,"user_id":1707427,"display_name":"S&#246;ren"},"score":2,"creation_date":1692085245,"post_id":76904115,"comment_id":135573564,"body_markdown":"Do you know how Maps work? What do you think happens, when you deal a player two cards of the same type?","body":"Do you know how Maps work? What do you think happens, when you deal a player two cards of the same type?"},{"owner":{"account_id":2994830,"reputation":1,"user_id":2541560,"display_name":"Kayaman"},"score":3,"creation_date":1692085247,"post_id":76904115,"comment_id":135573565,"body_markdown":"Your approach to card shuffling is wrong, since you can randomly pick the same element twice or more times. Also, creating a `Card` class would make a lot of sense, instead of fooling around with two `String[]`.","body":"Your approach to card shuffling is wrong, since you can randomly pick the same element twice or more times. Also, creating a <code>Card</code> class would make a lot of sense, instead of fooling around with two <code>String[]</code>."},{"owner":{"account_id":22509443,"reputation":11,"user_id":16704582,"display_name":"vardhiro"},"score":0,"creation_date":1692085356,"post_id":76904115,"comment_id":135573580,"body_markdown":"Figured out the problem, was with Key of the maps, thanks for assistance !","body":"Figured out the problem, was with Key of the maps, thanks for assistance !"}],"answers":[{"tags":[],"owner":{"account_id":1263831,"reputation":388998,"user_id":1221571,"accept_rate":67,"display_name":"Eran"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1692085423,"creation_date":1692085423,"answer_id":76904164,"question_id":76904115,"body_markdown":"You have several issues:\r\n\r\n1. In order for `nextInt()` to cover all the indices of your array, you should call `r.nextInt(type.length)` and `r.nextInt(colors.length)`.\r\n\r\n2. You can&#39;t use the card type as the key of your `Map`s, because such a `Map` cannot hold cards of the same type but different colors.\r\n\r\n3. Even without issue #2, there&#39;s a chance that you&#39;ll draw the same card twice, so you have to check for each card whether you already drew it, and if you did, draw another card. ","title":"HashMap extending to random length instead of 7 with for loop","body":"<p>You have several issues:</p>\n<ol>\n<li><p>In order for <code>nextInt()</code> to cover all the indices of your array, you should call <code>r.nextInt(type.length)</code> and <code>r.nextInt(colors.length)</code>.</p>\n</li>\n<li><p>You can't use the card type as the key of your <code>Map</code>s, because such a <code>Map</code> cannot hold cards of the same type but different colors.</p>\n</li>\n<li><p>Even without issue #2, there's a chance that you'll draw the same card twice, so you have to check for each card whether you already drew it, and if you did, draw another card.</p>\n</li>\n</ol>\n"}],"owner":{"account_id":22509443,"reputation":11,"user_id":16704582,"display_name":"vardhiro"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":42,"favorite_count":0,"down_vote_count":2,"up_vote_count":1,"answer_count":1,"score":-1,"last_activity_date":1692085423,"creation_date":1692084932,"question_id":76904115,"body_markdown":"I have two arrays for a card game one of type and another of color in Java. I want to run a for loop of length 7 to assert random values to the HashMaps which would be the card list for each player. But though I run the loop 7 times some Lists fill upto 5 while some upto 6. Here&#39;s the code:\r\n```\t\r\nstatic HashMap&lt;String, String&gt; p1=new HashMap&lt;&gt;(),p2=new HashMap&lt;&gt;(),p3=new HashMap&lt;&gt;(),u=new HashMap&lt;&gt;();\r\n\t\r\n\tpublic static void ini(){\r\n\t\tString [] colors = {&quot;red&quot;, &quot;green&quot;, &quot;blue&quot;, &quot;yellow&quot;};\r\n\t\tString [] type = {&quot;1&quot;,&quot;2&quot;,&quot;3&quot;,&quot;4&quot;,&quot;5&quot;,&quot;6&quot;,&quot;7&quot;,&quot;8&quot;,&quot;9&quot;,&quot;+2&quot;,&quot;+4&quot;,&quot;w&quot;,&quot;r&quot;};\r\n\t\tRandom r = new Random();\r\n\t\tfor (int i = 0; i &lt; 7; i++){\r\n\t\t\tp1.put(type[r.nextInt(type.length-1)],colors[r.nextInt(colors.length-1)]);\r\n\t\t\tp2.put(type[r.nextInt(type.length-1)],colors[r.nextInt(colors.length-1)]);\r\n\t\t\tp3.put(type[r.nextInt(type.length-1)],colors[r.nextInt(colors.length-1)]);\r\n\t\t\tu.put(type[r.nextInt(type.length-1)],colors[r.nextInt(colors.length-1)]);\r\n\t\t}\t\t\t\r\n\t}\r\npublic static void main(String[] args){\r\n\t\tini();\r\n\t\tSystem.out.println(p1);\r\n\t\tSystem.out.println(p2);\r\n\t\tSystem.out.println(p3);\r\n\t\tSystem.out.println(u);\r\n\t}\r\n```\r\nAny help would be grateful!\r\n\r\nExpectation : 7 elements / List\r\nOutcome: 4 or 5 / List","title":"HashMap extending to random length instead of 7 with for loop","body":"<p>I have two arrays for a card game one of type and another of color in Java. I want to run a for loop of length 7 to assert random values to the HashMaps which would be the card list for each player. But though I run the loop 7 times some Lists fill upto 5 while some upto 6. Here's the code:</p>\n<pre><code>static HashMap&lt;String, String&gt; p1=new HashMap&lt;&gt;(),p2=new HashMap&lt;&gt;(),p3=new HashMap&lt;&gt;(),u=new HashMap&lt;&gt;();\n    \n    public static void ini(){\n        String [] colors = {&quot;red&quot;, &quot;green&quot;, &quot;blue&quot;, &quot;yellow&quot;};\n        String [] type = {&quot;1&quot;,&quot;2&quot;,&quot;3&quot;,&quot;4&quot;,&quot;5&quot;,&quot;6&quot;,&quot;7&quot;,&quot;8&quot;,&quot;9&quot;,&quot;+2&quot;,&quot;+4&quot;,&quot;w&quot;,&quot;r&quot;};\n        Random r = new Random();\n        for (int i = 0; i &lt; 7; i++){\n            p1.put(type[r.nextInt(type.length-1)],colors[r.nextInt(colors.length-1)]);\n            p2.put(type[r.nextInt(type.length-1)],colors[r.nextInt(colors.length-1)]);\n            p3.put(type[r.nextInt(type.length-1)],colors[r.nextInt(colors.length-1)]);\n            u.put(type[r.nextInt(type.length-1)],colors[r.nextInt(colors.length-1)]);\n        }           \n    }\npublic static void main(String[] args){\n        ini();\n        System.out.println(p1);\n        System.out.println(p2);\n        System.out.println(p3);\n        System.out.println(u);\n    }\n</code></pre>\n<p>Any help would be grateful!</p>\n<p>Expectation : 7 elements / List\nOutcome: 4 or 5 / List</p>\n"},{"tags":["java","url","jsoup"],"comments":[{"owner":{"account_id":2994830,"reputation":1,"user_id":2541560,"display_name":"Kayaman"},"score":1,"creation_date":1692084977,"post_id":76904081,"comment_id":135573518,"body_markdown":"It&#39;s being double encoded. `&amp;` is `%26` with url encoding, and `%` is `%25` with urlencoding.","body":"It&#39;s being double encoded. <code>&amp;</code> is <code>%26</code> with url encoding, and <code>%</code> is <code>%25</code> with urlencoding."},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1692085192,"post_id":76904081,"comment_id":135573554,"body_markdown":"Try using `https://www.valueresearchonline.com/stocks/who-owns-what?q=Ratnamani+Metals+&amp;+Tubes`","body":"Try using <code>https:&#47;&#47;www.valueresearchonline.com&#47;stocks&#47;who-owns-what?q=R&zwnj;&#8203;atnamani+Metals+&amp;+Tu&zwnj;&#8203;bes</code>"},{"owner":{"account_id":3078593,"reputation":3418,"user_id":2607372,"accept_rate":87,"display_name":"vikramvi"},"score":0,"creation_date":1692085978,"post_id":76904081,"comment_id":135573685,"body_markdown":"@Kayaman how to solve then ? I&#39;m replacing `&amp;` with `%26` before passing the url.","body":"@Kayaman how to solve then ? I&#39;m replacing <code>&amp;</code> with <code>%26</code> before passing the url."},{"owner":{"account_id":3078593,"reputation":3418,"user_id":2607372,"accept_rate":87,"display_name":"vikramvi"},"score":0,"creation_date":1692086008,"post_id":76904081,"comment_id":135573696,"body_markdown":"@g00se it&#39;s not working","body":"@g00se it&#39;s not working"},{"owner":{"account_id":17592368,"reputation":13891,"user_id":12763954,"display_name":"Olivier"},"score":0,"creation_date":1692086127,"post_id":76904081,"comment_id":135573715,"body_markdown":"Looks like a Jsoup bug. Are you using the latest version?","body":"Looks like a Jsoup bug. Are you using the latest version?"},{"owner":{"account_id":17592368,"reputation":13891,"user_id":12763954,"display_name":"Olivier"},"score":0,"creation_date":1692086387,"post_id":76904081,"comment_id":135573766,"body_markdown":"BTW, is it allowed to scrape that site?","body":"BTW, is it allowed to scrape that site?"},{"owner":{"account_id":3078593,"reputation":3418,"user_id":2607372,"accept_rate":87,"display_name":"vikramvi"},"score":0,"creation_date":1692086720,"post_id":76904081,"comment_id":135573823,"body_markdown":"@Olivier I need to scrape company internal website / web app but just for query purpose I&#39;ve used this website. Let me check with latest version of jsoup and update","body":"@Olivier I need to scrape company internal website / web app but just for query purpose I&#39;ve used this website. Let me check with latest version of jsoup and update"},{"owner":{"account_id":17592368,"reputation":13891,"user_id":12763954,"display_name":"Olivier"},"score":2,"creation_date":1692086807,"post_id":76904081,"comment_id":135573833,"body_markdown":"If it&#39;s for internal use, you should query an API instead of scraping HTML.","body":"If it&#39;s for internal use, you should query an API instead of scraping HTML."},{"owner":{"account_id":3078593,"reputation":3418,"user_id":2607372,"accept_rate":87,"display_name":"vikramvi"},"score":0,"creation_date":1692086915,"post_id":76904081,"comment_id":135573851,"body_markdown":"@Olivier ok, let me discuss this change if it&#39;s fine as well. As sometimes there can be bug in UI and not in API. You were right about Jsoup bug; it&#39;s working as expected with version 1.16.1 and was not working with 1.15.4 ( https://mvnrepository.com/artifact/org.jsoup/jsoup ). Thanks for quick help.","body":"@Olivier ok, let me discuss this change if it&#39;s fine as well. As sometimes there can be bug in UI and not in API. You were right about Jsoup bug; it&#39;s working as expected with version 1.16.1 and was not working with 1.15.4 ( <a href=\"https://mvnrepository.com/artifact/org.jsoup/jsoup\" rel=\"nofollow noreferrer\">mvnrepository.com/artifact/org.jsoup/jsoup</a> ). Thanks for quick help."}],"owner":{"account_id":3078593,"reputation":3418,"user_id":2607372,"accept_rate":87,"display_name":"vikramvi"},"comment_count":9,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":35,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1692084489,"creation_date":1692084489,"question_id":76904081,"body_markdown":"I&#39;ve below code\r\n\r\n    Document doc = null;\r\n    \r\n    doc = Jsoup.connect(url).\r\n                                        ignoreContentType(true).\r\n                                        timeout(maxTimeout + (tryCount * maxTimeout)).\r\n                                        userAgent(&quot;Mozilla&quot;).\r\n                                        get();\r\n\r\nI&#39;m passing url value as \r\n\r\n`https://www.valueresearchonline.com/stocks/who-owns-what?q=Ratnamani+Metals+%26+Tubes` \r\n\r\nbut during debug mode, I see Document location value as\r\n\r\n `https://www.valueresearchonline.com/stocks/who-owns-what?q=Ratnamani+Metals+%2526+Tubes`\r\n\r\nwhy does `%26` is getting changed to `%2526` ?  This results in no data getting returned back.","title":"jsoup call is changing url parameter from &quot;%26&quot; to &quot;%2526&quot; during execution","body":"<p>I've below code</p>\n<pre><code>Document doc = null;\n\ndoc = Jsoup.connect(url).\n                                    ignoreContentType(true).\n                                    timeout(maxTimeout + (tryCount * maxTimeout)).\n                                    userAgent(&quot;Mozilla&quot;).\n                                    get();\n</code></pre>\n<p>I'm passing url value as</p>\n<p><code>https://www.valueresearchonline.com/stocks/who-owns-what?q=Ratnamani+Metals+%26+Tubes</code></p>\n<p>but during debug mode, I see Document location value as</p>\n<p><code>https://www.valueresearchonline.com/stocks/who-owns-what?q=Ratnamani+Metals+%2526+Tubes</code></p>\n<p>why does <code>%26</code> is getting changed to <code>%2526</code> ?  This results in no data getting returned back.</p>\n"},{"tags":["java","android","retrofit","interceptor","okhttp"],"comments":[{"owner":{"account_id":3512072,"reputation":17986,"user_id":2936153,"display_name":"Rohit5k2"},"score":0,"creation_date":1457010503,"post_id":35773028,"comment_id":59217355,"body_markdown":"What is the problem you are facing?","body":"What is the problem you are facing?"},{"owner":{"account_id":2822377,"reputation":12101,"user_id":2425851,"accept_rate":50,"display_name":"NickUnuchek"},"score":0,"creation_date":1457010695,"post_id":35773028,"comment_id":59217491,"body_markdown":"I need to set this new json to response and then return this response, how to do that?","body":"I need to set this new json to response and then return this response, how to do that?"}],"answers":[{"tags":[],"owner":{"account_id":3512072,"reputation":17986,"user_id":2936153,"display_name":"Rohit5k2"},"comment_count":0,"down_vote_count":0,"up_vote_count":39,"is_accepted":true,"score":39,"last_activity_date":1457010786,"creation_date":1457010786,"answer_id":35773177,"question_id":35773028,"body_markdown":"Add this \r\n\r\n    MediaType contentType = response.body().contentType();\r\n    ResponseBody body = ResponseBody.create(contentType, jsonObject);\r\n    return response.newBuilder().body(body).build();\r\n\r\nafter your response modification. `jsonObject` is the modified JSON you want to return.","title":"How to change body in OkHttp Response?","body":"<p>Add this </p>\n\n<pre><code>MediaType contentType = response.body().contentType();\nResponseBody body = ResponseBody.create(contentType, jsonObject);\nreturn response.newBuilder().body(body).build();\n</code></pre>\n\n<p>after your response modification. <code>jsonObject</code> is the modified JSON you want to return.</p>\n"},{"tags":[],"owner":{"account_id":1335565,"reputation":191,"user_id":1278416,"display_name":"Aniket"},"comment_count":0,"down_vote_count":0,"up_vote_count":18,"is_accepted":false,"score":18,"last_activity_date":1477476072,"creation_date":1477476072,"answer_id":40259227,"question_id":35773028,"body_markdown":"Below is Response Intercepter class where you can intercept okkhttp responce and add your own response. and send it to retrofit.\r\n\r\n    import org.json.JSONException;\r\n    import org.json.JSONObject;\r\n    \r\n    import java.io.IOException;\r\n    \r\n    import okhttp3.Interceptor;\r\n    import okhttp3.MediaType;\r\n    import okhttp3.Request;\r\n    import okhttp3.ResponseBody;\r\n    import retrofit2.Response;\r\n    \r\n    public class ApiResponseInterceptor implements Interceptor {\r\n    \r\n        @Override\r\n        public okhttp3.Response intercept(Chain chain) throws IOException {\r\n            Request request = chain.request();\r\n            okhttp3.Response response = chain.proceed(request);\r\n            if(response.code() == 200) {\r\n                JSONObject jsonObject = new JSONObject();\r\n                try {\r\n                    jsonObject.put(&quot;code&quot;,200);\r\n                    jsonObject.put(&quot;status&quot;,&quot;OK&quot;);\r\n                    jsonObject.put(&quot;message&quot;,&quot;Successful&quot;);\r\n    \r\n                    MediaType contentType = response.body().contentType();\r\n                    ResponseBody body = ResponseBody.create(contentType, jsonObject.toString());\r\n                    return response.newBuilder().body(body).build();\r\n                } catch (JSONException e) {\r\n                    e.printStackTrace();\r\n                }\r\n            } else if(response.code() == 403) {\r\n    \r\n            }\r\n            return response;\r\n        }\r\n    }\r\n\r\n\r\nYow will get your modified response here in your retrofit callback\r\n\r\n\r\n    call.enqueue(new Callback&lt;EventResponce&gt;() {\r\n                @Override\r\n                public void onResponse(Call&lt;EventResponce&gt; call, Response&lt;EventResponce&gt; response) {\r\n                    // you will get your own modified responce here\r\n                }\r\n    \r\n                @Override\r\n                public void onFailure(Call&lt;EventResponce&gt; call, Throwable t) {\r\n    \r\n                }\r\n            });","title":"How to change body in OkHttp Response?","body":"<p>Below is Response Intercepter class where you can intercept okkhttp responce and add your own response. and send it to retrofit.</p>\n\n<pre><code>import org.json.JSONException;\nimport org.json.JSONObject;\n\nimport java.io.IOException;\n\nimport okhttp3.Interceptor;\nimport okhttp3.MediaType;\nimport okhttp3.Request;\nimport okhttp3.ResponseBody;\nimport retrofit2.Response;\n\npublic class ApiResponseInterceptor implements Interceptor {\n\n    @Override\n    public okhttp3.Response intercept(Chain chain) throws IOException {\n        Request request = chain.request();\n        okhttp3.Response response = chain.proceed(request);\n        if(response.code() == 200) {\n            JSONObject jsonObject = new JSONObject();\n            try {\n                jsonObject.put(\"code\",200);\n                jsonObject.put(\"status\",\"OK\");\n                jsonObject.put(\"message\",\"Successful\");\n\n                MediaType contentType = response.body().contentType();\n                ResponseBody body = ResponseBody.create(contentType, jsonObject.toString());\n                return response.newBuilder().body(body).build();\n            } catch (JSONException e) {\n                e.printStackTrace();\n            }\n        } else if(response.code() == 403) {\n\n        }\n        return response;\n    }\n}\n</code></pre>\n\n<p>Yow will get your modified response here in your retrofit callback</p>\n\n<pre><code>call.enqueue(new Callback&lt;EventResponce&gt;() {\n            @Override\n            public void onResponse(Call&lt;EventResponce&gt; call, Response&lt;EventResponce&gt; response) {\n                // you will get your own modified responce here\n            }\n\n            @Override\n            public void onFailure(Call&lt;EventResponce&gt; call, Throwable t) {\n\n            }\n        });\n</code></pre>\n"},{"tags":[],"owner":{"account_id":403363,"reputation":1203,"user_id":771072,"display_name":"linakis"},"comment_count":0,"down_vote_count":0,"up_vote_count":10,"is_accepted":false,"score":10,"last_activity_date":1495024588,"creation_date":1495024588,"answer_id":44025078,"question_id":35773028,"body_markdown":"As a minor change I wouldn&#39;t use the `string()` method cause it can be called only once on this request. You do use the `response.newBuilder()` so other interceptors down the chain will be able to call `string()` on your new one but I found myself wasting a couple of hours because I was actually calling it twice :P. \r\n\r\nSo i suggest something like the following\r\n\r\n    BufferedSource source = response.body().source();\r\n    source.request(Long.MAX_VALUE); // Buffer the entire body.\r\n    Buffer buffer = source.buffer();\r\n    String responseBodyString = buffer.clone().readString(Charset.forName(&quot;UTF-8&quot;));","title":"How to change body in OkHttp Response?","body":"<p>As a minor change I wouldn't use the <code>string()</code> method cause it can be called only once on this request. You do use the <code>response.newBuilder()</code> so other interceptors down the chain will be able to call <code>string()</code> on your new one but I found myself wasting a couple of hours because I was actually calling it twice :P. </p>\n\n<p>So i suggest something like the following</p>\n\n<pre><code>BufferedSource source = response.body().source();\nsource.request(Long.MAX_VALUE); // Buffer the entire body.\nBuffer buffer = source.buffer();\nString responseBodyString = buffer.clone().readString(Charset.forName(\"UTF-8\"));\n</code></pre>\n"},{"tags":[],"owner":{"account_id":7000543,"reputation":1437,"user_id":5366710,"display_name":"Pong Petrung"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1519373011,"creation_date":1519373011,"answer_id":48943587,"question_id":35773028,"body_markdown":"   \r\n\r\n       JSONObject postdata = new JSONObject();\r\n                try {\r\n       \r\n                    postdata.put(&quot;citizenId&quot;, &quot;2222222222222&quot;);\r\n                    postdata.put(&quot;accuracy&quot;, 3043.323);\r\n                    postdata.put(&quot;provider&quot;, &quot;wifi&quot;);\r\n                    postdata.put(&quot;gpsTime&quot;, 1111111111111L);\r\n                    postdata.put(&quot;lat&quot;, 23434.564);\r\n                    postdata.put(&quot;lng&quot;, 34343.5445);\r\n                    postdata.put(&quot;appId&quot;, &quot;201&quot;);\r\n        \r\n                } catch(JSONException e){\r\n                    // TODO Auto-generated catch block\r\n                    e.printStackTrace();\r\n                }\r\n        \r\n                RequestBody body = RequestBody.create(MEDIA_TYPE,postdata.toString());\r\n        \r\n                HttpLoggingInterceptor interceptor = new HttpLoggingInterceptor();\r\n                interceptor.setLevel(HttpLoggingInterceptor.Level.BODY);\r\n                final OkHttpClient client = new OkHttpClient.Builder().addInterceptor(interceptor).build();\r\n        \r\n            //    final OkHttpClient client = new OkHttpClient.Builder().addInterceptor(interceptor).build();\r\n        \r\n        \r\n                final Request request = new Request.Builder()\r\n                        .url(base_url)\r\n                        .post(body)\r\n                        .addHeader(&quot;Content-Type&quot;, &quot;application/json&quot;)\r\n                        .addHeader(&quot;Authorization&quot;, &quot;JWT eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJvd25lcklkIjoyLCJvd25lclR5cGUiOiJMRUFERVIiLCJpYXQiOjE1MDE4Mjc4MDMsImV4cCI6MzMwMzc4Mjc4MDMsImF1ZCI6InNlbmRpdC5hc2lhIiwiaXNzIjoic2VsZiJ9.3Gpn3beZfdYsMOLTjksLwmxyfbrfqiojdm1n-gh6CXY&quot;)\r\n                        .addHeader(&quot;cache-control&quot;, &quot;no-cache&quot;)\r\n                        .build();\r\n        \r\n        \r\n                client.newCall(request).enqueue(new Callback() {\r\n        \r\n                    @SuppressLint(&quot;LongLogTag&quot;)\r\n                    @Override\r\n                    public void onResponse(Call call, Response response) throws IOException {\r\n        \r\n                        try {\r\n        //                    response = client.newCall(request).execute();\r\n        //                    Protocol protocol = response.protocol();\r\n        //                    assertEquals(Protocol.HTTP_1_1, protocol);\r\n        \r\n        //                    BufferedSource source = response.body().source();\r\n        //                    source.request(Long.MAX_VALUE); // Buffer the entire body.\r\n        //                    Buffer buffer = source.buffer();\r\n        //                    String responseBodyString = buffer.clone().readString(Charset.forName(&quot;UTF-8&quot;));\r\n        \r\n                            if(response.code() == 200) {\r\n                                JSONObject jsonObject = new JSONObject();\r\n                                try {\r\n                                    jsonObject.put(&quot;code&quot;,200);\r\n                                    jsonObject.put(&quot;status&quot;,&quot;OK&quot;);\r\n                                    jsonObject.put(&quot;message&quot;,&quot;Successful&quot;);\r\n        \r\n                                    MediaType contentType = response.body().contentType();\r\n                                    ResponseBody body = ResponseBody.create(contentType, jsonObject.toString());\r\n        \r\n                            BufferedSource source = response.body().source();\r\n                            source.request(Long.MAX_VALUE); // Buffer the entire body.\r\n                            Buffer buffer = source.buffer();\r\n                            String responseBodyString = buffer.clone().readString(Charset.forName(&quot;UTF-8&quot;));\r\n        \r\n                                    Log.e(&quot;response body responseBodyString &quot;, body.string());\r\n                                    Log.e(&quot;response body responseBodyString  &quot;, responseBodyString);\r\n                                } catch (JSONException e) {\r\n                                    e.printStackTrace();\r\n                                }\r\n        \r\n        \r\n                            Log.e(&quot;response&quot;, String.valueOf(response));\r\n                            Log.e(&quot;response body&quot;, String.valueOf(response.body()));\r\n        \r\n                        } }catch (IOException e) {\r\n                            e.printStackTrace();\r\n                        }\r\n                    }\r\n          \r\n                    @Override\r\n                    public void onFailure(Call call, IOException e) {\r\n                        Log.e(&quot;response  onFailure &quot;, String.valueOf(e));\r\n                    }\r\n        \r\n                });\r\n\r\n","title":"How to change body in OkHttp Response?","body":"<pre><code>   JSONObject postdata = new JSONObject();\n            try {\n\n                postdata.put(\"citizenId\", \"2222222222222\");\n                postdata.put(\"accuracy\", 3043.323);\n                postdata.put(\"provider\", \"wifi\");\n                postdata.put(\"gpsTime\", 1111111111111L);\n                postdata.put(\"lat\", 23434.564);\n                postdata.put(\"lng\", 34343.5445);\n                postdata.put(\"appId\", \"201\");\n\n            } catch(JSONException e){\n                // TODO Auto-generated catch block\n                e.printStackTrace();\n            }\n\n            RequestBody body = RequestBody.create(MEDIA_TYPE,postdata.toString());\n\n            HttpLoggingInterceptor interceptor = new HttpLoggingInterceptor();\n            interceptor.setLevel(HttpLoggingInterceptor.Level.BODY);\n            final OkHttpClient client = new OkHttpClient.Builder().addInterceptor(interceptor).build();\n\n        //    final OkHttpClient client = new OkHttpClient.Builder().addInterceptor(interceptor).build();\n\n\n            final Request request = new Request.Builder()\n                    .url(base_url)\n                    .post(body)\n                    .addHeader(\"Content-Type\", \"application/json\")\n                    .addHeader(\"Authorization\", \"JWT eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJvd25lcklkIjoyLCJvd25lclR5cGUiOiJMRUFERVIiLCJpYXQiOjE1MDE4Mjc4MDMsImV4cCI6MzMwMzc4Mjc4MDMsImF1ZCI6InNlbmRpdC5hc2lhIiwiaXNzIjoic2VsZiJ9.3Gpn3beZfdYsMOLTjksLwmxyfbrfqiojdm1n-gh6CXY\")\n                    .addHeader(\"cache-control\", \"no-cache\")\n                    .build();\n\n\n            client.newCall(request).enqueue(new Callback() {\n\n                @SuppressLint(\"LongLogTag\")\n                @Override\n                public void onResponse(Call call, Response response) throws IOException {\n\n                    try {\n    //                    response = client.newCall(request).execute();\n    //                    Protocol protocol = response.protocol();\n    //                    assertEquals(Protocol.HTTP_1_1, protocol);\n\n    //                    BufferedSource source = response.body().source();\n    //                    source.request(Long.MAX_VALUE); // Buffer the entire body.\n    //                    Buffer buffer = source.buffer();\n    //                    String responseBodyString = buffer.clone().readString(Charset.forName(\"UTF-8\"));\n\n                        if(response.code() == 200) {\n                            JSONObject jsonObject = new JSONObject();\n                            try {\n                                jsonObject.put(\"code\",200);\n                                jsonObject.put(\"status\",\"OK\");\n                                jsonObject.put(\"message\",\"Successful\");\n\n                                MediaType contentType = response.body().contentType();\n                                ResponseBody body = ResponseBody.create(contentType, jsonObject.toString());\n\n                        BufferedSource source = response.body().source();\n                        source.request(Long.MAX_VALUE); // Buffer the entire body.\n                        Buffer buffer = source.buffer();\n                        String responseBodyString = buffer.clone().readString(Charset.forName(\"UTF-8\"));\n\n                                Log.e(\"response body responseBodyString \", body.string());\n                                Log.e(\"response body responseBodyString  \", responseBodyString);\n                            } catch (JSONException e) {\n                                e.printStackTrace();\n                            }\n\n\n                        Log.e(\"response\", String.valueOf(response));\n                        Log.e(\"response body\", String.valueOf(response.body()));\n\n                    } }catch (IOException e) {\n                        e.printStackTrace();\n                    }\n                }\n\n                @Override\n                public void onFailure(Call call, IOException e) {\n                    Log.e(\"response  onFailure \", String.valueOf(e));\n                }\n\n            });\n</code></pre>\n"},{"tags":[],"owner":{"account_id":5872,"reputation":12730,"user_id":9648,"accept_rate":94,"display_name":"JohnnyLambada"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1571880615,"creation_date":1571880615,"answer_id":58532925,"question_id":35773028,"body_markdown":"Here&#39;s a tight, complete example of adding an interceptor that modifies JSON to an  [`OkHttpClient`][1]. It uses [GSON][2] to manage the JSON.\r\n\r\n            client.addInterceptor(chain -&gt; {\r\n                final Request request = chain.request();\r\n                final String path = request.url().uri().getPath();\r\n                final Response response = chain.proceed(request);\r\n\r\n                String body = response.body().string();\r\n                final JsonElement element = new JsonParser().parse(body);\r\n                if (&quot;/the/endpoint/you/want/to/modify&quot;.equals(path)){\r\n                    final JsonObject object = element.getAsJsonObject();\r\n                    // v v v v v v All this for these lines v v v v v v v\r\n                    object.addProperty(&quot;some_json_name&quot;,&quot;some_json_value&quot;);\r\n                    object.addProperty(&quot;existing_property&quot;,&quot;updated_value&quot;);\r\n                    object.addProperty(&quot;numbers_work_too&quot;,1.2);\r\n                    // ^ ^ ^ ^ ^ ^ All this for these lines ^ ^ ^ ^ ^ ^ ^\r\n                    body = object.toString();\r\n                }\r\n                return response.newBuilder().body(ResponseBody.create(response.body().contentType(), body)).build();\r\n            });\r\n\r\n\r\n  [1]: https://square.github.io/okhttp/4.x/okhttp/okhttp3/-ok-http-client/\r\n  [2]: https://github.com/google/gson","title":"How to change body in OkHttp Response?","body":"<p>Here's a tight, complete example of adding an interceptor that modifies JSON to an  <a href=\"https://square.github.io/okhttp/4.x/okhttp/okhttp3/-ok-http-client/\" rel=\"nofollow noreferrer\"><code>OkHttpClient</code></a>. It uses <a href=\"https://github.com/google/gson\" rel=\"nofollow noreferrer\">GSON</a> to manage the JSON.</p>\n\n<pre><code>        client.addInterceptor(chain -&gt; {\n            final Request request = chain.request();\n            final String path = request.url().uri().getPath();\n            final Response response = chain.proceed(request);\n\n            String body = response.body().string();\n            final JsonElement element = new JsonParser().parse(body);\n            if (\"/the/endpoint/you/want/to/modify\".equals(path)){\n                final JsonObject object = element.getAsJsonObject();\n                // v v v v v v All this for these lines v v v v v v v\n                object.addProperty(\"some_json_name\",\"some_json_value\");\n                object.addProperty(\"existing_property\",\"updated_value\");\n                object.addProperty(\"numbers_work_too\",1.2);\n                // ^ ^ ^ ^ ^ ^ All this for these lines ^ ^ ^ ^ ^ ^ ^\n                body = object.toString();\n            }\n            return response.newBuilder().body(ResponseBody.create(response.body().contentType(), body)).build();\n        });\n</code></pre>\n"},{"tags":[],"owner":{"account_id":11679511,"reputation":1329,"user_id":8551764,"display_name":"Mostafa Arian Nejad"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1692082563,"creation_date":1692082563,"answer_id":76903928,"question_id":35773028,"body_markdown":"The `create()` function has been deprecated and replaced with `.toResponseBody()` and `.asResponseBody()` extensions.\r\n\r\n\r\n    OkHttpClient.Builder().apply {\r\n        addInterceptor { chain -&gt;\r\n            // modifiedBodyString is created here ...\r\n\r\n            val contentType = response.body().contentType();\r\n\r\n            // Old approach (Deprecated):\r\n            val responseBody = ResponseBody.create(contentType, modifiedBodyString);\r\n\r\n            // New approach:\r\n            val responseBody = modifiedBodyString.toResponseBody(contentType)\r\n\r\n            response.newBuilder().body(responseBody).build(); \r\n        }\r\n    }.build()\r\n    \r\n\r\nI am using OkHttp version 4.10.0.","title":"How to change body in OkHttp Response?","body":"<p>The <code>create()</code> function has been deprecated and replaced with <code>.toResponseBody()</code> and <code>.asResponseBody()</code> extensions.</p>\n<pre><code>OkHttpClient.Builder().apply {\n    addInterceptor { chain -&gt;\n        // modifiedBodyString is created here ...\n\n        val contentType = response.body().contentType();\n\n        // Old approach (Deprecated):\n        val responseBody = ResponseBody.create(contentType, modifiedBodyString);\n\n        // New approach:\n        val responseBody = modifiedBodyString.toResponseBody(contentType)\n\n        response.newBuilder().body(responseBody).build(); \n    }\n}.build()\n</code></pre>\n<p>I am using OkHttp version 4.10.0.</p>\n"}],"owner":{"account_id":2822377,"reputation":12101,"user_id":2425851,"accept_rate":50,"display_name":"NickUnuchek"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":35360,"favorite_count":0,"down_vote_count":0,"up_vote_count":26,"accepted_answer_id":35773177,"answer_count":6,"score":26,"last_activity_date":1692082563,"creation_date":1457010350,"question_id":35773028,"body_markdown":"I&#39;m using retrofit. To catch response i&#39;m using Interceptor:\r\n  \r\n\r\n    OkHttpClient okHttpClient = new OkHttpClient();\r\n    okHttpClient.interceptors().add(myinterceptor);\r\n\r\nhere is code of interceptor:\r\n\r\n    new Interceptor() {\r\n        @Override\r\n        public Response intercept(Chain chain) throws IOException {\r\n            Request request = chain.request();\r\n            Response response = chain.proceed(request);\r\n            if (path.equals(&quot;/user&quot;)){\r\n                String stringJson = response.body().string();\r\n                JSONObject jsonObject = new JSONObject(stringJson);\r\n                jsonObject.put(&quot;key&quot;,1);\r\n                //here I need to set this new json to response and then return this response\r\n\r\nHow to change body in OkHttp Response?","title":"How to change body in OkHttp Response?","body":"<p>I'm using retrofit. To catch response i'm using Interceptor:</p>\n\n<pre><code>OkHttpClient okHttpClient = new OkHttpClient();\nokHttpClient.interceptors().add(myinterceptor);\n</code></pre>\n\n<p>here is code of interceptor:</p>\n\n<pre><code>new Interceptor() {\n    @Override\n    public Response intercept(Chain chain) throws IOException {\n        Request request = chain.request();\n        Response response = chain.proceed(request);\n        if (path.equals(\"/user\")){\n            String stringJson = response.body().string();\n            JSONObject jsonObject = new JSONObject(stringJson);\n            jsonObject.put(\"key\",1);\n            //here I need to set this new json to response and then return this response\n</code></pre>\n\n<p>How to change body in OkHttp Response?</p>\n"},{"tags":["java","android","kotlin","spell-checking"],"comments":[{"owner":{"account_id":111736,"reputation":11811,"user_id":295004,"display_name":"Morrison Chang"},"score":0,"creation_date":1692080775,"post_id":76903252,"comment_id":135572938,"body_markdown":"Unclear if you&#39;ve seen the AOSP project linked at the end of your first link, LatinIME https://android.googlesource.com/platform/packages/inputmethods/LatinIME/ and more specifically https://android.googlesource.com/platform/packages/inputmethods/LatinIME/+/refs/heads/main/java/src/com/android/inputmethod/latin/spellcheck/","body":"Unclear if you&#39;ve seen the AOSP project linked at the end of your first link, LatinIME <a href=\"https://android.googlesource.com/platform/packages/inputmethods/LatinIME/\" rel=\"nofollow noreferrer\">android.googlesource.com/platform/packages/inputmethods/&hellip;</a> and more specifically <a href=\"https://android.googlesource.com/platform/packages/inputmethods/LatinIME/+/refs/heads/main/java/src/com/android/inputmethod/latin/spellcheck/\" rel=\"nofollow noreferrer\">android.googlesource.com/platform/packages/inputmethods/&hellip;</a>"}],"answers":[{"comments":[{"owner":{"account_id":20265293,"reputation":372,"user_id":14862649,"display_name":"Grant Oganyan"},"score":1,"creation_date":1692107194,"post_id":76903911,"comment_id":135577557,"body_markdown":"I had assumed Android would have a standard built-in library for spell checking, like we do on iOS. If not, what are some good options?","body":"I had assumed Android would have a standard built-in library for spell checking, like we do on iOS. If not, what are some good options?"},{"owner":{"account_id":1790714,"reputation":91128,"user_id":1631193,"accept_rate":71,"display_name":"Gabe Sechan"},"score":0,"creation_date":1692110463,"post_id":76903911,"comment_id":135578280,"body_markdown":"No, every keyboard does their own, because they all think they can do it better.  That&#39;s one of the main reasons to use a different keyboard-  better prediction. How would the OS know the best spell check algorithm-  even if it assumes you&#39;re typing and not swiping or some other input method, it doesn&#39;t even know the layout of your keyboard.  If you make the same guesses for qwerty and dvorak, or even qwerty and azerty, you&#39;re going to have bad predictions.","body":"No, every keyboard does their own, because they all think they can do it better.  That&#39;s one of the main reasons to use a different keyboard-  better prediction. How would the OS know the best spell check algorithm-  even if it assumes you&#39;re typing and not swiping or some other input method, it doesn&#39;t even know the layout of your keyboard.  If you make the same guesses for qwerty and dvorak, or even qwerty and azerty, you&#39;re going to have bad predictions."},{"owner":{"account_id":1790714,"reputation":91128,"user_id":1631193,"accept_rate":71,"display_name":"Gabe Sechan"},"score":0,"creation_date":1692110586,"post_id":76903911,"comment_id":135578301,"body_markdown":"Also, the spell checker framework you asked about is consumed by the OS, to provide corrections in the Android UI.  Generally that&#39;s used by their grammar and spell corrections for already typed data rather than on the fly spelling correction (ever seen a word red underlined that you had previously typed?  Spell checker framework in action).","body":"Also, the spell checker framework you asked about is consumed by the OS, to provide corrections in the Android UI.  Generally that&#39;s used by their grammar and spell corrections for already typed data rather than on the fly spelling correction (ever seen a word red underlined that you had previously typed?  Spell checker framework in action)."},{"owner":{"account_id":20265293,"reputation":372,"user_id":14862649,"display_name":"Grant Oganyan"},"score":0,"creation_date":1692127445,"post_id":76903911,"comment_id":135581475,"body_markdown":"Understood, thank you, I will look for solutions. In response to your point though: I think you misunderstood what I am talking about. The OS does not need to know which best spell check algorithm to use, what input method is used, or what type of keyboard you use. What I am talking about is what we have on iOS - a built in implementation of a single spell check algorithm, which you can use anywhere: keyboard, front-end app, text-field, or whatever. Your provide misspelled text - you get back possible corrections. I was hoping there a built-in framework for that on Android, but apparently no.","body":"Understood, thank you, I will look for solutions. In response to your point though: I think you misunderstood what I am talking about. The OS does not need to know which best spell check algorithm to use, what input method is used, or what type of keyboard you use. What I am talking about is what we have on iOS - a built in implementation of a single spell check algorithm, which you can use anywhere: keyboard, front-end app, text-field, or whatever. Your provide misspelled text - you get back possible corrections. I was hoping there a built-in framework for that on Android, but apparently no."},{"owner":{"account_id":1790714,"reputation":91128,"user_id":1631193,"accept_rate":71,"display_name":"Gabe Sechan"},"score":0,"creation_date":1692128651,"post_id":76903911,"comment_id":135581651,"body_markdown":"@GrantOganyan I didn&#39;t misunderstand, I was telling you *why* it doesn&#39;t do that.  Because the philosophy is rather than providing a mediocre implementation, the keyboard is its own app and should return a *good* implementation.","body":"@GrantOganyan I didn&#39;t misunderstand, I was telling you <i>why</i> it doesn&#39;t do that.  Because the philosophy is rather than providing a mediocre implementation, the keyboard is its own app and should return a <i>good</i> implementation."},{"owner":{"account_id":20265293,"reputation":372,"user_id":14862649,"display_name":"Grant Oganyan"},"score":0,"creation_date":1692292755,"post_id":76903911,"comment_id":135606884,"body_markdown":"Your rhetorical questions did indicate lack of understanding of my problem, since they were irrelevant. Your reasoning as to &quot;why&quot; is also impractical: &quot;rather than providing a mediocre implementation...&quot; - why not ship Android with a good built-in implementation, while still allowing others to create their own? Your statement is analogous to &quot;lets not include a calculator app into the OS, because third-party devs will create a better one&quot;.","body":"Your rhetorical questions did indicate lack of understanding of my problem, since they were irrelevant. Your reasoning as to &quot;why&quot; is also impractical: &quot;rather than providing a mediocre implementation...&quot; - why not ship Android with a good built-in implementation, while still allowing others to create their own? Your statement is analogous to &quot;lets not include a calculator app into the OS, because third-party devs will create a better one&quot;."},{"owner":{"account_id":1790714,"reputation":91128,"user_id":1631193,"accept_rate":71,"display_name":"Gabe Sechan"},"score":0,"creation_date":1692297687,"post_id":76903911,"comment_id":135607804,"body_markdown":"@GrantOganyan Because a good implementation is impossible with the keyboard being a separate app, there&#39;s too much it doesn&#39;t know.  If you&#39;d ever written one, you&#39;d realize that.  And quite frankly it would be a waste of their resources to do-  there&#39;s 0 reason that spell check should be part of an operating system.","body":"@GrantOganyan Because a good implementation is impossible with the keyboard being a separate app, there&#39;s too much it doesn&#39;t know.  If you&#39;d ever written one, you&#39;d realize that.  And quite frankly it would be a waste of their resources to do-  there&#39;s 0 reason that spell check should be part of an operating system."},{"owner":{"account_id":1790714,"reputation":91128,"user_id":1631193,"accept_rate":71,"display_name":"Gabe Sechan"},"score":0,"creation_date":1692297864,"post_id":76903911,"comment_id":135607831,"body_markdown":"BTW, I did soft keyboards professionally for 4 years and know people still in that area-  no serious keyboard uses the built in iOS stuff.  They all roll their own.  It&#39;s only used by basically people writing their own toy apps.","body":"BTW, I did soft keyboards professionally for 4 years and know people still in that area-  no serious keyboard uses the built in iOS stuff.  They all roll their own.  It&#39;s only used by basically people writing their own toy apps."},{"owner":{"account_id":20265293,"reputation":372,"user_id":14862649,"display_name":"Grant Oganyan"},"score":0,"creation_date":1692308682,"post_id":76903911,"comment_id":135609630,"body_markdown":"I have written one, and actually two, also professionally. So don&#39;t bother flexing, you only humiliate yourself, especially when you don&#39;t know who is sitting on the other side. There are plenty reasons for spell check to be a part of the OS, just like any other framework. Otherwise, we&#39;d all be writing binary. If you think something should not exist because &quot;its not too good, I can do better&quot; then its your own problem. Refer to my previous comment about the calculator. I am not going to entertain your delusions any more.","body":"I have written one, and actually two, also professionally. So don&#39;t bother flexing, you only humiliate yourself, especially when you don&#39;t know who is sitting on the other side. There are plenty reasons for spell check to be a part of the OS, just like any other framework. Otherwise, we&#39;d all be writing binary. If you think something should not exist because &quot;its not too good, I can do better&quot; then its your own problem. Refer to my previous comment about the calculator. I am not going to entertain your delusions any more."},{"owner":{"account_id":1790714,"reputation":91128,"user_id":1631193,"accept_rate":71,"display_name":"Gabe Sechan"},"score":0,"creation_date":1692323924,"post_id":76903911,"comment_id":135610976,"body_markdown":"@GrantOganyan If you think the built in one is any good, then no, you haven&#39;t. The very fact that you had to ask this question means no, you haven&#39;t.","body":"@GrantOganyan If you think the built in one is any good, then no, you haven&#39;t. The very fact that you had to ask this question means no, you haven&#39;t."}],"tags":[],"owner":{"account_id":1790714,"reputation":91128,"user_id":1631193,"accept_rate":71,"display_name":"Gabe Sechan"},"comment_count":10,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1692082269,"creation_date":1692082269,"answer_id":76903911,"question_id":76903252,"body_markdown":"Generally if you&#39;re writing spell check into the IME, you don&#39;t use the spell checker framework.  That&#39;s really of use if you want to link in an external library doing it at an application level.  For an IME, you generally just do spell checking on your own.  There is no requirement for an IME to use it.\r\n\r\nInstead, after every letter is tapped (or swiped, or whatever other input method you&#39;re using), you&#39;d feed the context around the cursor into whatever algorithm you wrote, take the suggestions returned, and display them (generally in a suggestions bar, although that also is up to you).","title":"How to implement spell checking on Android with Kotlin","body":"<p>Generally if you're writing spell check into the IME, you don't use the spell checker framework.  That's really of use if you want to link in an external library doing it at an application level.  For an IME, you generally just do spell checking on your own.  There is no requirement for an IME to use it.</p>\n<p>Instead, after every letter is tapped (or swiped, or whatever other input method you're using), you'd feed the context around the cursor into whatever algorithm you wrote, take the suggestions returned, and display them (generally in a suggestions bar, although that also is up to you).</p>\n"}],"owner":{"account_id":20265293,"reputation":372,"user_id":14862649,"display_name":"Grant Oganyan"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":129,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1692082269,"creation_date":1692069652,"question_id":76903252,"body_markdown":"Coming from an iOS dev background, working on a custom android keyboard. I am trying to implement spell checking into the keyboard, but don&#39;t know how to do it.\r\n\r\nI found the [Spell checker framework](https://developer.android.com/develop/ui/views/touch-and-input/spell-checker-framework), but how I understood it, this framework only provides the blank abstract methods, while I need to implement spell checking myself. (Why..? If I created my own spell checker, surely I can make my own abstract methods to call it...)\r\n\r\nI also figured out spell checking like so:\r\n\r\n```kotlin\r\nval textServicesManager = context.getSystemService(Context.TEXT_SERVICES_MANAGER_SERVICE) as TextServicesManager\r\nval mSpellCheckerSession = textServicesManager.newSpellCheckerSession(null, null, mSpellCheckerSessionListener, true)\r\n```\r\n\r\nand then calling it with \r\n```kotlin\r\nmSpellCheckerSession?.getSuggestions(TextInfo(&quot;misspelled words&quot;), 5)\r\n```\r\n\r\nBut this method is asynchronous and I have to listen for results with  `onGetSuggestions`. This won&#39;t work for me, since my keyboard needs to spell check and correct users on the fly, after the word is typed. So I need a synchronous method.\r\n\r\nOn iOS we simply have [UITextChecker()](https://developer.apple.com/documentation/uikit/uitextchecker) from which we can synchronously ask for spelling corrections. Is there anything like that on Android? How can I get synchronous spelling suggestions?","title":"How to implement spell checking on Android with Kotlin","body":"<p>Coming from an iOS dev background, working on a custom android keyboard. I am trying to implement spell checking into the keyboard, but don't know how to do it.</p>\n<p>I found the <a href=\"https://developer.android.com/develop/ui/views/touch-and-input/spell-checker-framework\" rel=\"nofollow noreferrer\">Spell checker framework</a>, but how I understood it, this framework only provides the blank abstract methods, while I need to implement spell checking myself. (Why..? If I created my own spell checker, surely I can make my own abstract methods to call it...)</p>\n<p>I also figured out spell checking like so:</p>\n<pre class=\"lang-kotlin prettyprint-override\"><code>val textServicesManager = context.getSystemService(Context.TEXT_SERVICES_MANAGER_SERVICE) as TextServicesManager\nval mSpellCheckerSession = textServicesManager.newSpellCheckerSession(null, null, mSpellCheckerSessionListener, true)\n</code></pre>\n<p>and then calling it with</p>\n<pre class=\"lang-kotlin prettyprint-override\"><code>mSpellCheckerSession?.getSuggestions(TextInfo(&quot;misspelled words&quot;), 5)\n</code></pre>\n<p>But this method is asynchronous and I have to listen for results with  <code>onGetSuggestions</code>. This won't work for me, since my keyboard needs to spell check and correct users on the fly, after the word is typed. So I need a synchronous method.</p>\n<p>On iOS we simply have <a href=\"https://developer.apple.com/documentation/uikit/uitextchecker\" rel=\"nofollow noreferrer\">UITextChecker()</a> from which we can synchronously ask for spelling corrections. Is there anything like that on Android? How can I get synchronous spelling suggestions?</p>\n"},{"tags":["java","generics","interface"],"comments":[{"owner":{"account_id":19373190,"reputation":411,"user_id":14166067,"display_name":"Hasan Raza"},"score":1,"creation_date":1689768169,"post_id":76721041,"comment_id":135259397,"body_markdown":"define the generic types T and V at the class level after that create an instance of Specifickeygenerator and call the generatekey method","body":"define the generic types T and V at the class level after that create an instance of Specifickeygenerator and call the generatekey method"},{"owner":{"account_id":2449170,"reputation":1315,"user_id":2135838,"display_name":"Sascha"},"score":0,"creation_date":1689845166,"post_id":76721041,"comment_id":135272043,"body_markdown":"As said in the comment above, you have to add the generic and concrete types to the classes: `public interface KeyGenerator&lt;V, T&gt;` and `public class SomeSpecificKeyGenerator implements KeyGenerator&lt;SomeParameterClass, String&gt;`","body":"As said in the comment above, you have to add the generic and concrete types to the classes: <code>public interface KeyGenerator&lt;V, T&gt;</code> and <code>public class SomeSpecificKeyGenerator implements KeyGenerator&lt;SomeParameterClass, String&gt;</code>"}],"answers":[{"tags":[],"owner":{"account_id":13965071,"reputation":1,"user_id":10085104,"display_name":"Nur Mohammad Rayhan"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1692081766,"creation_date":1692081766,"answer_id":76903860,"question_id":76721041,"body_markdown":"you can write this way and getting no error\r\n```\r\npublic class SomeSpecificKeyGenerator implements KeyGenerator{\r\n    @Override\r\n    public &lt;T, V&gt; T generateKey(V parameters) {\r\n        return null;\r\n    }\r\n}\r\n```","title":"Implement an Interface method with different generic types for parameters and return","body":"<p>you can write this way and getting no error</p>\n<pre><code>public class SomeSpecificKeyGenerator implements KeyGenerator{\n    @Override\n    public &lt;T, V&gt; T generateKey(V parameters) {\n        return null;\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":11537246,"reputation":11,"user_id":8454193,"display_name":"Saharsh Singh"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":24,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1692081766,"creation_date":1689767760,"question_id":76721041,"body_markdown":"I have an interface like this\r\n\r\n    public interface KeyGenerator {\r\n        &lt;T,V&gt; T generateKey(V parameters);\r\n    }\r\n\r\nand I want to implement this function, with these data types\r\n\r\n    public class SomeSpecificKeyGenerator implements KeyGenerator\r\n\r\n    public List&lt;String&gt; generateKey(SomeParameterClass parameters){\r\n        // do something\r\n    }\r\n\r\n\r\ngetting error, that the interface method must be implemented (which I am trying to, in the above snippet)","title":"Implement an Interface method with different generic types for parameters and return","body":"<p>I have an interface like this</p>\n<pre><code>public interface KeyGenerator {\n    &lt;T,V&gt; T generateKey(V parameters);\n}\n</code></pre>\n<p>and I want to implement this function, with these data types</p>\n<pre><code>public class SomeSpecificKeyGenerator implements KeyGenerator\n\npublic List&lt;String&gt; generateKey(SomeParameterClass parameters){\n    // do something\n}\n</code></pre>\n<p>getting error, that the interface method must be implemented (which I am trying to, in the above snippet)</p>\n"},{"tags":["java","class","oop","instance"],"comments":[{"owner":{"account_id":2508174,"reputation":6519,"user_id":2181238,"display_name":"Gaurang Tandon"},"score":1,"creation_date":1515553726,"post_id":17400664,"comment_id":83339516,"body_markdown":"Related concept: https://stackoverflow.com/questions/33994009/can-we-create-object-of-abstract-class","body":"Related concept: <a href=\"https://stackoverflow.com/questions/33994009/can-we-create-object-of-abstract-class\" title=\"can we create object of abstract class\">stackoverflow.com/questions/33994009/&hellip;</a>"}],"answers":[{"comments":[{"owner":{"account_id":52616,"reputation":1042991,"user_id":157247,"accept_rate":91,"display_name":"T.J. Crowder"},"score":6,"creation_date":1372669654,"post_id":17400687,"comment_id":25265706,"body_markdown":"This is a bit misleading. The OP&#39;s question uses anonymous class syntax, which is probably the point.","body":"This is a bit misleading. The OP&#39;s question uses anonymous class syntax, which is probably the point."}],"tags":[],"owner":{"account_id":2921966,"reputation":3572,"user_id":2504013,"accept_rate":86,"display_name":"JREN"},"comment_count":1,"down_vote_count":0,"up_vote_count":13,"is_accepted":false,"score":13,"last_activity_date":1372669297,"creation_date":1372669297,"answer_id":17400687,"question_id":17400664,"body_markdown":"You can&#39;t instantiate an interface directly, but you can instantiate a class that implements that interface:\r\n\r\n    public class RunClass implements Runnable {\r\n        // Class implementation\r\n    }\r\n\r\n    Runnable r = new RunClass();\r\n\r\nThis is basically the same as what you&#39;re doing inline. The brackets after new Runnable() will contain your implementation inline.","title":"Can I create an object for Interface?","body":"<p>You can't instantiate an interface directly, but you can instantiate a class that implements that interface:</p>\n\n<pre><code>public class RunClass implements Runnable {\n    // Class implementation\n}\n\nRunnable r = new RunClass();\n</code></pre>\n\n<p>This is basically the same as what you're doing inline. The brackets after new Runnable() will contain your implementation inline.</p>\n"},{"tags":[],"owner":{"account_id":1914874,"reputation":13438,"user_id":1727645,"accept_rate":81,"display_name":"Prasad Kharkar"},"comment_count":0,"down_vote_count":0,"up_vote_count":20,"is_accepted":false,"score":20,"last_activity_date":1599019550,"creation_date":1372669311,"answer_id":17400690,"question_id":17400664,"body_markdown":"This is not creating the instance of Interface, it is creating a class that implements interface. So when you write:\r\n```java\r\nRunnable runnable = new Runnable() {\r\n    @Override\r\n    public void run() {\r\n        // TODO Auto-generated method stub\r\n\r\n    }\r\n};\r\n```\r\nYou are actually a creating a class that is implementing the Runnable interface.\r\nYou need to follow all rules here, here, we are overriding the run method for `Runnable`. There is similar thing for abstract class also. We can test using an example:\r\n```java\r\npublic abstract class AbstractClass {\r\n    public void someMethod() {\r\n        System.out.println(&quot;abstract class&quot;);\r\n    }\r\n}\r\n```\r\nand another class i.e. `TestClass`:\r\n```java\r\npublic class TestClass {\r\n    public static void main(String[] args) {\r\n        AbstractClass abstractClass = new AbstractClass() {\r\n            public void someMethod() {\r\n                System.out.println(&quot;concrete class method&quot;);\r\n            }\r\n        };\r\n        abstractClass.someMethod();\r\n    }\r\n}\r\n```\r\nThis will create the instance of a subclass in which we are overriding `someMethod()`;\r\nThis program prints:\r\n```none\r\nconcrete class method\r\n``` \r\nThis proves we are creating the instance of subclass.\r\n","title":"Can I create an object for Interface?","body":"<p>This is not creating the instance of Interface, it is creating a class that implements interface. So when you write:</p>\n<pre class=\"lang-java prettyprint-override\"><code>Runnable runnable = new Runnable() {\n    @Override\n    public void run() {\n        // TODO Auto-generated method stub\n\n    }\n};\n</code></pre>\n<p>You are actually a creating a class that is implementing the Runnable interface.\nYou need to follow all rules here, here, we are overriding the run method for <code>Runnable</code>. There is similar thing for abstract class also. We can test using an example:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public abstract class AbstractClass {\n    public void someMethod() {\n        System.out.println(&quot;abstract class&quot;);\n    }\n}\n</code></pre>\n<p>and another class i.e. <code>TestClass</code>:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class TestClass {\n    public static void main(String[] args) {\n        AbstractClass abstractClass = new AbstractClass() {\n            public void someMethod() {\n                System.out.println(&quot;concrete class method&quot;);\n            }\n        };\n        abstractClass.someMethod();\n    }\n}\n</code></pre>\n<p>This will create the instance of a subclass in which we are overriding <code>someMethod()</code>;\nThis program prints:</p>\n<pre class=\"lang-none prettyprint-override\"><code>concrete class method\n</code></pre>\n<p>This proves we are creating the instance of subclass.</p>\n"},{"tags":[],"owner":{"account_id":52616,"reputation":1042991,"user_id":157247,"accept_rate":91,"display_name":"T.J. Crowder"},"comment_count":0,"down_vote_count":0,"up_vote_count":8,"is_accepted":false,"score":8,"last_activity_date":1372669848,"creation_date":1372669356,"answer_id":17400703,"question_id":17400664,"body_markdown":"&gt; Is it possible to creating object for an interface?\r\n\r\nNo. The code you&#39;ve shown creates an object from an *anonymous class*, which implements the interface. Under the covers, the JVM actually creates a class implementing the interface, and then creates an instance of that class.\r\n\r\n-----\r\n\r\nThe &quot;anonymous&quot; class generated *will* actually have a name, based on the name of the class in which this code appears, for instance `YourClass$1` or similar. E.g.:\r\n\r\n    public class AnonymousName {\r\n        public static final void main(String[] args) {\r\n            Runnable r = new Runnable() {\r\n                public void run() {\r\n                }\r\n            };\r\n          \r\n            System.out.println(r.getClass().getName());\r\n        }\r\n    }\r\n\r\n...outputs\r\n\r\n&lt;pre&gt;AnonymousName$1&lt;/pre&gt;\r\n\r\n(At least on Oracle&#39;s JVM; I don&#39;t know if the naming convention is in the JLS or if it&#39;s JVM-specific behavior.)","title":"Can I create an object for Interface?","body":"<blockquote>\n  <p>Is it possible to creating object for an interface?</p>\n</blockquote>\n\n<p>No. The code you've shown creates an object from an <em>anonymous class</em>, which implements the interface. Under the covers, the JVM actually creates a class implementing the interface, and then creates an instance of that class.</p>\n\n<hr>\n\n<p>The \"anonymous\" class generated <em>will</em> actually have a name, based on the name of the class in which this code appears, for instance <code>YourClass$1</code> or similar. E.g.:</p>\n\n<pre><code>public class AnonymousName {\n    public static final void main(String[] args) {\n        Runnable r = new Runnable() {\n            public void run() {\n            }\n        };\n\n        System.out.println(r.getClass().getName());\n    }\n}\n</code></pre>\n\n<p>...outputs</p>\n\n<pre>AnonymousName$1</pre>\n\n<p>(At least on Oracle's JVM; I don't know if the naming convention is in the JLS or if it's JVM-specific behavior.)</p>\n"},{"comments":[{"owner":{"account_id":2769071,"reputation":600,"user_id":2384046,"accept_rate":67,"display_name":"Gaurav Manral"},"score":0,"creation_date":1372672767,"post_id":17400714,"comment_id":25267258,"body_markdown":"I don&#39;t think so Rais. May be you could solve his problem. It looks complete answer to me.","body":"I don&#39;t think so Rais. May be you could solve his problem. It looks complete answer to me."},{"owner":{"account_id":1587132,"reputation":6980,"user_id":1471203,"accept_rate":89,"display_name":"Rais Alam"},"score":1,"creation_date":1372675288,"post_id":17400714,"comment_id":25268510,"body_markdown":"your answer is correct. I guess suitable place is comment and not answer.","body":"your answer is correct. I guess suitable place is comment and not answer."}],"tags":[],"owner":{"account_id":2769071,"reputation":600,"user_id":2384046,"accept_rate":67,"display_name":"Gaurav Manral"},"comment_count":2,"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1372669395,"creation_date":1372669395,"answer_id":17400714,"question_id":17400664,"body_markdown":"we can not instatiate the interface (since do not have constructor).","title":"Can I create an object for Interface?","body":"<p>we can not instatiate the interface (since do not have constructor).</p>\n"},{"tags":[],"owner":{"account_id":2029491,"reputation":9823,"user_id":1813616,"display_name":"Uwe Plonus"},"comment_count":0,"down_vote_count":0,"up_vote_count":9,"is_accepted":false,"score":9,"last_activity_date":1372669420,"creation_date":1372669420,"answer_id":17400721,"question_id":17400664,"body_markdown":"You can create an anonymous inner class:\r\n\r\n    Runnable r = new Runnable() {\r\n        @Override\r\n        public void run() {\r\n        }\r\n    };\r\n\r\nTherefore you create a new `class` which implements the given `interface`.","title":"Can I create an object for Interface?","body":"<p>You can create an anonymous inner class:</p>\n\n<pre><code>Runnable r = new Runnable() {\n    @Override\n    public void run() {\n    }\n};\n</code></pre>\n\n<p>Therefore you create a new <code>class</code> which implements the given <code>interface</code>.</p>\n"},{"tags":[],"owner":{"account_id":1506247,"reputation":7562,"user_id":1427460,"accept_rate":64,"display_name":"bNd"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1372670111,"creation_date":1372670111,"answer_id":17400934,"question_id":17400664,"body_markdown":"What you are seeing is an  [anonymous inner class][1].\n\nit’s creating an instance of a new, anonymous,implementer of Runnable class.\n\n\n**Because an anonymous class definition is an expression, it must be part of a statement.** \n\n  [1]: http://docs.oracle.com/javase/tutorial/java/javaOO/anonymousclasses.html","title":"Can I create an object for Interface?","body":"<p>What you are seeing is an  <a href=\"http://docs.oracle.com/javase/tutorial/java/javaOO/anonymousclasses.html\" rel=\"nofollow noreferrer\">anonymous inner class</a>.</p>\n<p>it’s creating an instance of a new, anonymous,implementer of Runnable class.</p>\n<p><strong>Because an anonymous class definition is an expression, it must be part of a statement.</strong></p>\n"},{"comments":[{"owner":{"account_id":16395748,"reputation":121,"user_id":11843340,"display_name":"Shubham Uniyal"},"score":0,"creation_date":1619704043,"post_id":49606182,"comment_id":118989953,"body_markdown":"This is done to achieve abstraction, a concept to hide the details of the actual implementation while giving the output. \nEg: There can  be multiple instances created but with only single reference of the interface--\nanObject1 = new FirstClass();\nanObject2 = new SecondClass();\nanObject3 = new ThirdClass();\n\ncorresponding to the references, the corresponding methods in the 3 classes will be triggered.\n\nPurpose ? \n\nThe purpose of using anObject as a reference variable is because at runtime, we dont know which instance will be created.. This is done to achieve loose coupling .","body":"This is done to achieve abstraction, a concept to hide the details of the actual implementation while giving the output.  Eg: There can  be multiple instances created but with only single reference of the interface-- anObject1 = new FirstClass(); anObject2 = new SecondClass(); anObject3 = new ThirdClass();  corresponding to the references, the corresponding methods in the 3 classes will be triggered.  Purpose ?   The purpose of using anObject as a reference variable is because at runtime, we dont know which instance will be created.. This is done to achieve loose coupling ."}],"tags":[],"owner":{"account_id":7665196,"reputation":65,"user_id":5809106,"display_name":"Bugsy"},"comment_count":1,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1522650724,"creation_date":1522649424,"answer_id":49606182,"question_id":17400664,"body_markdown":"Here&#39;s my understanding.\r\n\r\nAn interface \r\n\r\n    public Interface SomeInterface{\r\n    }\r\n\r\nYou can declare an Object for an interface. \r\n\r\n    SomeInterface anObject;\r\n\r\nYou cannot instantiate this object directly using this interface. \r\nHowever, let&#39;s say you have a class that implements this interface. \r\n\r\n    public class SomeClass implements SomeInterface {}\r\n\r\nThen you can do this,\r\n\r\n    anObject = new someClass();\r\n\r\n(This is conceptually of course (like pseudocode) actual code may vary depending on your classes and access modifiers etc.)\r\n\r\nI&#39;ll update as to why exactly we are doing this/what the point is as soon as I find out. \r\n\r\n\r\nNote: Some of this has been mentioned in above answers, just want the OP to know this whole thing too.\r\n","title":"Can I create an object for Interface?","body":"<p>Here's my understanding.</p>\n\n<p>An interface </p>\n\n<pre><code>public Interface SomeInterface{\n}\n</code></pre>\n\n<p>You can declare an Object for an interface. </p>\n\n<pre><code>SomeInterface anObject;\n</code></pre>\n\n<p>You cannot instantiate this object directly using this interface. \nHowever, let's say you have a class that implements this interface. </p>\n\n<pre><code>public class SomeClass implements SomeInterface {}\n</code></pre>\n\n<p>Then you can do this,</p>\n\n<pre><code>anObject = new someClass();\n</code></pre>\n\n<p>(This is conceptually of course (like pseudocode) actual code may vary depending on your classes and access modifiers etc.)</p>\n\n<p>I'll update as to why exactly we are doing this/what the point is as soon as I find out. </p>\n\n<p>Note: Some of this has been mentioned in above answers, just want the OP to know this whole thing too.</p>\n"},{"comments":[{"owner":{"account_id":22057425,"reputation":135,"user_id":16320675,"display_name":"user16320675"},"score":1,"creation_date":1692083918,"post_id":76903811,"comment_id":135573364,"body_markdown":"there is no need for the `Developer` class in posted code at all - an anonymous class does not need another non-anonymous class... BTW the question is 10 years old!","body":"there is no need for the <code>Developer</code> class in posted code at all - an anonymous class does not need another non-anonymous class... BTW the question is 10 years old!"}],"tags":[],"owner":{"account_id":13965071,"reputation":1,"user_id":10085104,"display_name":"Nur Mohammad Rayhan"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1692081198,"creation_date":1692081198,"answer_id":76903811,"question_id":17400664,"body_markdown":"You cannot create Object of interface, but you can create Object of class that is **extends** interface.\r\n\r\nLike if you like to create an Object of ```Interface Laptop``` and declare method ```void writeCode()``` and implement this method in class ```class Development``` you can use concept of anonymous inner class concept.\r\n\r\nnow you can create object of anonymous inner class object reference or type of ```Interface Laptop```\r\n```\r\npublic interface Laptop {\r\n    public abstract void writeCode();\r\n}\r\n```\r\n\r\n```\r\npublic class Developer implements Laptop{\r\n    public void writeCode() {\r\n        System.out.println(&quot;In developer Class&quot;);\r\n    }\r\n}\r\n```\r\n\r\n```\r\npublic class Main {\r\n    public static void main(String[] args) {\r\n        Laptop lap = new Laptop() {\r\n            @Override\r\n            public void writeCode() {\r\n                System.out.println(&quot;In new Method&quot;);\r\n            }\r\n        };\r\n\r\n        lap.writeCode();\r\n    }\r\n}\r\n```","title":"Can I create an object for Interface?","body":"<p>You cannot create Object of interface, but you can create Object of class that is <strong>extends</strong> interface.</p>\n<p>Like if you like to create an Object of <code>Interface Laptop</code> and declare method <code>void writeCode()</code> and implement this method in class <code>class Development</code> you can use concept of anonymous inner class concept.</p>\n<p>now you can create object of anonymous inner class object reference or type of <code>Interface Laptop</code></p>\n<pre><code>public interface Laptop {\n    public abstract void writeCode();\n}\n</code></pre>\n<pre><code>public class Developer implements Laptop{\n    public void writeCode() {\n        System.out.println(&quot;In developer Class&quot;);\n    }\n}\n</code></pre>\n<pre><code>public class Main {\n    public static void main(String[] args) {\n        Laptop lap = new Laptop() {\n            @Override\n            public void writeCode() {\n                System.out.println(&quot;In new Method&quot;);\n            }\n        };\n\n        lap.writeCode();\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":2990692,"reputation":139,"user_id":2538333,"display_name":"kalepu harish"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":66265,"favorite_count":0,"down_vote_count":1,"up_vote_count":14,"answer_count":8,"score":13,"last_activity_date":1692081198,"creation_date":1372669230,"question_id":17400664,"body_markdown":"Is it possible to create an object for an interface?  If yes, how is it done? \r\nAccording to my view the following code says that we can:\r\n```java\r\nRunnable r = new Runnable() {\r\n    // some implementation\r\n}\r\n```","title":"Can I create an object for Interface?","body":"<p>Is it possible to create an object for an interface?  If yes, how is it done?\nAccording to my view the following code says that we can:</p>\n<pre class=\"lang-java prettyprint-override\"><code>Runnable r = new Runnable() {\n    // some implementation\n}\n</code></pre>\n"},{"tags":["java","unit-testing","jdbc","tdd"],"answers":[{"tags":[],"owner":{"account_id":5360,"reputation":36887,"user_id":8590,"accept_rate":100,"display_name":"seth"},"comment_count":0,"down_vote_count":0,"up_vote_count":7,"is_accepted":true,"score":7,"last_activity_date":1248061028,"creation_date":1248059899,"answer_id":1151586,"question_id":1151550,"body_markdown":"I don&#39;t know if you have seen it or not but there&#39;s [MockRunner][1].  It provides many classes that implement the interfaces of JDBC (as well as other J2EEclasses).  Here&#39;s [the JDBC mock objects][2].  There are also quite a few [examples][3].\r\n\r\n\r\n  [1]: http://mockrunner.sourceforge.net/\r\n  [2]: http://mockrunner.sourceforge.net/doc/api/com/mockrunner/mock/jdbc/package-tree.html\r\n  [3]: http://mockrunner.sourceforge.net/examplesjdbc.html","title":"Is there a set of stubs/mocks for JDBC available anywhere?","body":"<p>I don't know if you have seen it or not but there's <a href=\"http://mockrunner.sourceforge.net/\" rel=\"noreferrer\">MockRunner</a>.  It provides many classes that implement the interfaces of JDBC (as well as other J2EEclasses).  Here's <a href=\"http://mockrunner.sourceforge.net/doc/api/com/mockrunner/mock/jdbc/package-tree.html\" rel=\"noreferrer\">the JDBC mock objects</a>.  There are also quite a few <a href=\"http://mockrunner.sourceforge.net/examplesjdbc.html\" rel=\"noreferrer\">examples</a>.</p>\n"},{"comments":[{"owner":{"account_id":27818,"reputation":39950,"user_id":73772,"accept_rate":80,"display_name":"Emil H"},"score":0,"creation_date":1248068843,"post_id":1151644,"comment_id":970502,"body_markdown":"As I said in the question: I already have mocks for the DAO layer that I use when testing the business layer. I&#39;ll consider your advice, though. Thanks for your time. :)","body":"As I said in the question: I already have mocks for the DAO layer that I use when testing the business layer. I&#39;ll consider your advice, though. Thanks for your time. :)"},{"owner":{"account_id":11089,"reputation":400050,"user_id":21234,"accept_rate":91,"display_name":"skaffman"},"score":1,"creation_date":1248080032,"post_id":1151644,"comment_id":970979,"body_markdown":"Sometimes, I unit test my DAOs using a throwaway, in-memory HypersonsonicDB datasource. The obvious flaw in that idea is that it&#39;s no use with database-proprietary SQL, but it&#39;s useful for testing Hibernate configurations.","body":"Sometimes, I unit test my DAOs using a throwaway, in-memory HypersonsonicDB datasource. The obvious flaw in that idea is that it&#39;s no use with database-proprietary SQL, but it&#39;s useful for testing Hibernate configurations."}],"tags":[],"owner":{"account_id":47591,"reputation":5499,"user_id":141042,"accept_rate":86,"display_name":"Geoffrey Wiseman"},"comment_count":2,"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1248062197,"creation_date":1248062197,"answer_id":1151644,"question_id":1151550,"body_markdown":"It sounds like you&#39;re having issues in the DAO code itself?  Otherwise, the DAO layer is the obvious place to do your mocking, but if you&#39;re trying to test the DAO, then you&#39;ll need to mock that which comes beneath.\r\n\r\nPersonally, I tend to stay away from mocking large, complex libraries; if you really need to test the DAO layer directly and the DAO works directly with JDBC, you&#39;ve got three obvious choices:\r\n\r\n 1. Run an integrated test that includes the DAO and JDBC along with a Database\r\n 2. Add a layer above JDBC with a thinner interface, better suited for mocking.\r\n 3. Use JDBC mocks either of your own writing, or some of the items listed above.\r\n\r\nI would almost always choose #1 or #2.  Because there&#39;s a host of possibilities of errors in malformed SQL syntax and the like I tend to lean towards #1.  I realize, however, that that&#39;s not what you&#39;re asking for.  ;)","title":"Is there a set of stubs/mocks for JDBC available anywhere?","body":"<p>It sounds like you're having issues in the DAO code itself?  Otherwise, the DAO layer is the obvious place to do your mocking, but if you're trying to test the DAO, then you'll need to mock that which comes beneath.</p>\n\n<p>Personally, I tend to stay away from mocking large, complex libraries; if you really need to test the DAO layer directly and the DAO works directly with JDBC, you've got three obvious choices:</p>\n\n<ol>\n<li>Run an integrated test that includes the DAO and JDBC along with a Database</li>\n<li>Add a layer above JDBC with a thinner interface, better suited for mocking.</li>\n<li>Use JDBC mocks either of your own writing, or some of the items listed above.</li>\n</ol>\n\n<p>I would almost always choose #1 or #2.  Because there's a host of possibilities of errors in malformed SQL syntax and the like I tend to lean towards #1.  I realize, however, that that's not what you're asking for.  ;)</p>\n"},{"tags":[],"owner":{"account_id":44552,"reputation":4670,"user_id":130832,"display_name":"Mercer Traieste"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1248062354,"creation_date":1248062354,"answer_id":1151649,"question_id":1151550,"body_markdown":"You could test the database directly with [dbunit][1].\r\n\r\n\r\n  [1]: http://www.dbunit.org/","title":"Is there a set of stubs/mocks for JDBC available anywhere?","body":"<p>You could test the database directly with <a href=\"http://www.dbunit.org/\" rel=\"nofollow noreferrer\">dbunit</a>.</p>\n"},{"tags":[],"owner":{"account_id":18182,"reputation":33673,"user_id":41423,"accept_rate":100,"display_name":"Nick Holt"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1248079685,"creation_date":1248079685,"answer_id":1152413,"question_id":1151550,"body_markdown":"While I&#39;m a huge fan of unit testing in general I&#39;ve found it to be of limited value with DAOs.  \r\n\r\nWhat I&#39;ve seen is while it is entirely possible to write the tests (using any of the mocking APIs - [JMock][1], [EasyMock][2], etc), they typically work straight-off (the logic is so basic how couldn&#39;t they) only breaking when you change the code (adding a value for example) and that just makes them a burden on the code base. \r\n\r\nI think this is because my DAOs typically follow the form:\r\n\r\n - get connection.\r\n - create statement.\r\n - set values.\r\n - read values (for load operations).\r\n - clean-up.\r\n\r\nYou then make assumptions about how the JDBC driver will/is work(ing) and you get a test that&#39;s really doing nothing more than testing some simple code gets called in the order it is declared.  \r\n\r\nErrors originating from DAOs typically occur within the database (key violations, bugs in stored procs, etc) and unless you are running the system as a whole you aren&#39;t going to see these errors.\r\n\r\nThese days I tend to let the higher levels of testing - integration and the like - exercise the DAO code hitting the actual database in doing so and hopefully catching the sort of errors I mentioned sooner rather than later.\r\n\r\n\r\n  [1]: http://www.jmock.org/\r\n  [2]: http://easymock.org/","title":"Is there a set of stubs/mocks for JDBC available anywhere?","body":"<p>While I'm a huge fan of unit testing in general I've found it to be of limited value with DAOs.  </p>\n\n<p>What I've seen is while it is entirely possible to write the tests (using any of the mocking APIs - <a href=\"http://www.jmock.org/\" rel=\"nofollow noreferrer\">JMock</a>, <a href=\"http://easymock.org/\" rel=\"nofollow noreferrer\">EasyMock</a>, etc), they typically work straight-off (the logic is so basic how couldn't they) only breaking when you change the code (adding a value for example) and that just makes them a burden on the code base. </p>\n\n<p>I think this is because my DAOs typically follow the form:</p>\n\n<ul>\n<li>get connection.</li>\n<li>create statement.</li>\n<li>set values.</li>\n<li>read values (for load operations).</li>\n<li>clean-up.</li>\n</ul>\n\n<p>You then make assumptions about how the JDBC driver will/is work(ing) and you get a test that's really doing nothing more than testing some simple code gets called in the order it is declared.  </p>\n\n<p>Errors originating from DAOs typically occur within the database (key violations, bugs in stored procs, etc) and unless you are running the system as a whole you aren't going to see these errors.</p>\n\n<p>These days I tend to let the higher levels of testing - integration and the like - exercise the DAO code hitting the actual database in doing so and hopefully catching the sort of errors I mentioned sooner rather than later.</p>\n"},{"tags":[],"owner":{"account_id":247217,"reputation":213465,"user_id":521799,"accept_rate":89,"display_name":"Lukas Eder"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1375391192,"creation_date":1375391192,"answer_id":18004556,"question_id":1151550,"body_markdown":"[jOOQ][1] ships with a [`MockConnection`][2] that can be provided with a [`MockDataProvider`][3], which is much easier to implement than the complete JDBC API. This blog post shows how to use the MockConnection:\r\nhttp://blog.jooq.org/2013/02/20/easy-mocking-of-your-database/\r\n\r\nAn example:\r\n\r\n    MockDataProvider provider = new MockDataProvider() {\r\n     \r\n        // Your contract is to return execution results, given a context\r\n        // object, which contains SQL statement(s), bind values, and some\r\n        // other context values\r\n        @Override\r\n        public MockResult[] execute(MockExecuteContext context) \r\n        throws SQLException {\r\n     \r\n            // Use ordinary jOOQ API to create an org.jooq.Result object.\r\n            // You can also use ordinary jOOQ API to load CSV files or\r\n            // other formats, here!\r\n            DSLContext create = DSL.using(...);\r\n            Result&lt;MyTableRecord&gt; result = create.newResult(MY_TABLE);\r\n            result.add(create.newRecord(MY_TABLE));\r\n     \r\n            // Now, return 1-many results, depending on whether this is\r\n            // a batch/multi-result context\r\n            return new MockResult[] {\r\n                new MockResult(1, result)\r\n            };\r\n        }\r\n    };\r\n     \r\n    // Put your provider into a MockConnection and use that connection\r\n    // in your application. In this case, with a jOOQ DSLContext:\r\n    Connection connection = new MockConnection(provider);\r\n    DSLContext create = DSL.using(connection, dialect);\r\n     \r\n    // Done! just use regular jOOQ API. It will return the values\r\n    // that you&#39;ve specified in your MockDataProvider\r\n    assertEquals(1, create.selectOne().fetch().size());\r\n\r\nThere is also the [`MockFileDatabase`][4], which helps you matching dummy results with SQL strings by writing a text file like this:\r\n\r\n&lt;!-- language: lang-none --&gt;\r\n\r\n    # This is a sample test database for MockFileDatabase\r\n    # Its syntax is inspired from H2&#39;s test script files\r\n     \r\n    # When this query is executed...\r\n    select &#39;A&#39; from dual;\r\n    # ... then, return the following result\r\n    &gt; A\r\n    &gt; -\r\n    &gt; A\r\n    @ rows: 1\r\n     \r\n    # Just list all possible query / result combinations\r\n    select &#39;A&#39;, &#39;B&#39; from dual;\r\n    &gt; A B\r\n    &gt; - -\r\n    &gt; A B\r\n    @ rows: 1\r\n     \r\n    select &quot;TABLE1&quot;.&quot;ID1&quot;, &quot;TABLE1&quot;.&quot;NAME1&quot; from &quot;TABLE1&quot;;\r\n    &gt; ID1 NAME1\r\n    &gt; --- -----\r\n    &gt; 1   X\r\n    &gt; 2   Y\r\n    @ rows: 2\r\n\r\n\r\n  [1]: http://www.jooq.org &quot;jOOQ is an internal domain-specific language modelling typesafe SQL in Java&quot;\r\n  [2]: http://www.jooq.org/javadoc/latest/org/jooq/tools/jdbc/MockConnection.html\r\n  [3]: http://www.jooq.org/javadoc/latest/org/jooq/tools/jdbc/MockDataProvider.html\r\n  [4]: http://www.jooq.org/javadoc/latest/org/jooq/tools/jdbc/MockFileDatabase.html","title":"Is there a set of stubs/mocks for JDBC available anywhere?","body":"<p><a href=\"http://www.jooq.org\" rel=\"nofollow\" title=\"jOOQ is an internal domain-specific language modelling typesafe SQL in Java\">jOOQ</a> ships with a <a href=\"http://www.jooq.org/javadoc/latest/org/jooq/tools/jdbc/MockConnection.html\" rel=\"nofollow\"><code>MockConnection</code></a> that can be provided with a <a href=\"http://www.jooq.org/javadoc/latest/org/jooq/tools/jdbc/MockDataProvider.html\" rel=\"nofollow\"><code>MockDataProvider</code></a>, which is much easier to implement than the complete JDBC API. This blog post shows how to use the MockConnection:\n<a href=\"http://blog.jooq.org/2013/02/20/easy-mocking-of-your-database/\" rel=\"nofollow\">http://blog.jooq.org/2013/02/20/easy-mocking-of-your-database/</a></p>\n\n<p>An example:</p>\n\n<pre><code>MockDataProvider provider = new MockDataProvider() {\n\n    // Your contract is to return execution results, given a context\n    // object, which contains SQL statement(s), bind values, and some\n    // other context values\n    @Override\n    public MockResult[] execute(MockExecuteContext context) \n    throws SQLException {\n\n        // Use ordinary jOOQ API to create an org.jooq.Result object.\n        // You can also use ordinary jOOQ API to load CSV files or\n        // other formats, here!\n        DSLContext create = DSL.using(...);\n        Result&lt;MyTableRecord&gt; result = create.newResult(MY_TABLE);\n        result.add(create.newRecord(MY_TABLE));\n\n        // Now, return 1-many results, depending on whether this is\n        // a batch/multi-result context\n        return new MockResult[] {\n            new MockResult(1, result)\n        };\n    }\n};\n\n// Put your provider into a MockConnection and use that connection\n// in your application. In this case, with a jOOQ DSLContext:\nConnection connection = new MockConnection(provider);\nDSLContext create = DSL.using(connection, dialect);\n\n// Done! just use regular jOOQ API. It will return the values\n// that you've specified in your MockDataProvider\nassertEquals(1, create.selectOne().fetch().size());\n</code></pre>\n\n<p>There is also the <a href=\"http://www.jooq.org/javadoc/latest/org/jooq/tools/jdbc/MockFileDatabase.html\" rel=\"nofollow\"><code>MockFileDatabase</code></a>, which helps you matching dummy results with SQL strings by writing a text file like this:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code># This is a sample test database for MockFileDatabase\n# Its syntax is inspired from H2's test script files\n\n# When this query is executed...\nselect 'A' from dual;\n# ... then, return the following result\n&gt; A\n&gt; -\n&gt; A\n@ rows: 1\n\n# Just list all possible query / result combinations\nselect 'A', 'B' from dual;\n&gt; A B\n&gt; - -\n&gt; A B\n@ rows: 1\n\nselect \"TABLE1\".\"ID1\", \"TABLE1\".\"NAME1\" from \"TABLE1\";\n&gt; ID1 NAME1\n&gt; --- -----\n&gt; 1   X\n&gt; 2   Y\n@ rows: 2\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3062553,"reputation":9128,"user_id":3347384,"accept_rate":36,"display_name":"cchantep"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1543438844,"creation_date":1388480020,"answer_id":20854532,"question_id":1151550,"body_markdown":"If you want to test persistence layer (ORM, DAO, ...) is acting as expected according various JDBC cases (e.g. when it gets such result set/update count, then it should do this and that), then Acolyte framework must be considered.\r\n\r\nIt allow to build JDBC connection you manage throught handler, so you choose what is returned for each query/update: https://github.com/cchantep/acolyte\r\n\r\nDisclosure: this is my framework.","title":"Is there a set of stubs/mocks for JDBC available anywhere?","body":"<p>If you want to test persistence layer (ORM, DAO, ...) is acting as expected according various JDBC cases (e.g. when it gets such result set/update count, then it should do this and that), then Acolyte framework must be considered.</p>\n\n<p>It allow to build JDBC connection you manage throught handler, so you choose what is returned for each query/update: <a href=\"https://github.com/cchantep/acolyte\" rel=\"nofollow noreferrer\">https://github.com/cchantep/acolyte</a></p>\n\n<p>Disclosure: this is my framework.</p>\n"},{"tags":[],"owner":{"account_id":199153,"reputation":462,"user_id":444252,"display_name":"HariKrishnan"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1692079912,"creation_date":1692079912,"answer_id":76903734,"question_id":1151550,"body_markdown":"[Specmatic][1] JDBC stub does exactly this. Here is a video showcasing the power of JDBC stubbing in Specmatic. https://www.youtube.com/watch?v=2-zqzBvFjnc \r\n\r\nSpecmatic allows you to define / record and replay expectations. Expectations are mappings of queries and results, I am guessing that is what you are looking for when you mentioned this.\r\n\r\n&gt; validate the generated SQL and possibly send back some preprogrammed results\r\n\r\nHere is an example.\r\n\r\n    {\r\n      &quot;query&quot;: &quot;select product0_.id as id1_0_0_, product0_.cost as cost2_0_0_, product0_.name as name3_0_0_ from product product0_ where product0_.id=1&quot;,\r\n      &quot;response&quot;: {\r\n        &quot;rows&quot;: [\r\n          {\r\n            &quot;id1_0_0_&quot;: 1,\r\n            &quot;cost2_0_0_&quot;: 100,\r\n            &quot;name3_0_0_&quot;: &quot;Artificial Lamp&quot;\r\n          }\r\n        ]\r\n      }\r\n    }\r\n\r\nThese expectations can be written by hand or recorded based on actual interactions between the API and a real database. This allows you to verify that your application is only interacting with the database as intended by you.\r\n\r\nHere is a [detailed writeup][2].\r\n\r\nHope this helps.\r\n\r\nDisclosure: I am co-founder and CTO at [Specmatic][1]\r\n\r\n\r\n  [1]: https://specmatic.in/\r\n  [2]: https://specmatic.in/updates/jdbc-stubbing-with-specmatic-contract-testing/","title":"Is there a set of stubs/mocks for JDBC available anywhere?","body":"<p><a href=\"https://specmatic.in/\" rel=\"nofollow noreferrer\">Specmatic</a> JDBC stub does exactly this. Here is a video showcasing the power of JDBC stubbing in Specmatic. <a href=\"https://www.youtube.com/watch?v=2-zqzBvFjnc\" rel=\"nofollow noreferrer\">https://www.youtube.com/watch?v=2-zqzBvFjnc</a></p>\n<p>Specmatic allows you to define / record and replay expectations. Expectations are mappings of queries and results, I am guessing that is what you are looking for when you mentioned this.</p>\n<blockquote>\n<p>validate the generated SQL and possibly send back some preprogrammed results</p>\n</blockquote>\n<p>Here is an example.</p>\n<pre><code>{\n  &quot;query&quot;: &quot;select product0_.id as id1_0_0_, product0_.cost as cost2_0_0_, product0_.name as name3_0_0_ from product product0_ where product0_.id=1&quot;,\n  &quot;response&quot;: {\n    &quot;rows&quot;: [\n      {\n        &quot;id1_0_0_&quot;: 1,\n        &quot;cost2_0_0_&quot;: 100,\n        &quot;name3_0_0_&quot;: &quot;Artificial Lamp&quot;\n      }\n    ]\n  }\n}\n</code></pre>\n<p>These expectations can be written by hand or recorded based on actual interactions between the API and a real database. This allows you to verify that your application is only interacting with the database as intended by you.</p>\n<p>Here is a <a href=\"https://specmatic.in/updates/jdbc-stubbing-with-specmatic-contract-testing/\" rel=\"nofollow noreferrer\">detailed writeup</a>.</p>\n<p>Hope this helps.</p>\n<p>Disclosure: I am co-founder and CTO at <a href=\"https://specmatic.in/\" rel=\"nofollow noreferrer\">Specmatic</a></p>\n"}],"owner":{"account_id":27818,"reputation":39950,"user_id":73772,"accept_rate":80,"display_name":"Emil H"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":5864,"favorite_count":0,"down_vote_count":1,"up_vote_count":7,"accepted_answer_id":1151586,"answer_count":7,"score":6,"last_activity_date":1692079912,"creation_date":1248058260,"question_id":1151550,"body_markdown":"For the past few years I&#39;ve continuously struggled with unit testing database code and all the pain that comes with it. I found this existing thread which I found very enlightening:\r\n\r\n* [What&#39;s the best strategy for unit testing databases?][1]\r\n\r\nThe author of the accepted answer suggests that it might be useful to mock the entire database layer in order to validate the generated SQL. I didn&#39;t think much of it when I first read the answer a few months ago, but recently I have observed several bugs caused by incorrectly generated SQL, wrongly assigned fields, and so on. I do realize that JDBC is rather bloated and error prone to use, but it isn&#39;t an option to switch to something different at this point.\r\n\r\nThe application in question is a batch processor of data feeds, and uses JDBC directly rather than an ORM. All JDBC code is separated into distinct DAO objects where each object has its own interface and stub, besides the actual implementations. This has allowed me to achieve good test coverage of the business layer, but the testing of the database layer is virtually non-existant.\r\n\r\n**Is there an existing stub implementation of the JDBC (java.sql) interfaces that can be injected into DAO classes and used to validate the generated SQL and possibly send back some preprogrammed results?**\r\n\r\n  [1]: https://stackoverflow.com/questions/145131/whats-the-best-strategy-for-unit-testing-database-driven-applications","title":"Is there a set of stubs/mocks for JDBC available anywhere?","body":"<p>For the past few years I've continuously struggled with unit testing database code and all the pain that comes with it. I found this existing thread which I found very enlightening:</p>\n\n<ul>\n<li><a href=\"https://stackoverflow.com/questions/145131/whats-the-best-strategy-for-unit-testing-database-driven-applications\">What's the best strategy for unit testing databases?</a></li>\n</ul>\n\n<p>The author of the accepted answer suggests that it might be useful to mock the entire database layer in order to validate the generated SQL. I didn't think much of it when I first read the answer a few months ago, but recently I have observed several bugs caused by incorrectly generated SQL, wrongly assigned fields, and so on. I do realize that JDBC is rather bloated and error prone to use, but it isn't an option to switch to something different at this point.</p>\n\n<p>The application in question is a batch processor of data feeds, and uses JDBC directly rather than an ORM. All JDBC code is separated into distinct DAO objects where each object has its own interface and stub, besides the actual implementations. This has allowed me to achieve good test coverage of the business layer, but the testing of the database layer is virtually non-existant.</p>\n\n<p><strong>Is there an existing stub implementation of the JDBC (java.sql) interfaces that can be injected into DAO classes and used to validate the generated SQL and possibly send back some preprogrammed results?</strong></p>\n"},{"tags":["java","jtable","netbeans-8"],"comments":[{"owner":{"account_id":44852,"reputation":322224,"user_id":131872,"accept_rate":100,"display_name":"camickr"},"score":0,"creation_date":1692067738,"post_id":76903098,"comment_id":135571988,"body_markdown":"*I have no idea how to do that.* - do what? There are multiple steps to your question.  1) you need to create a JFrame with a JTable 2) You need to be able to select an item for which you want to create the notice. 3) You need to create a pdf document based on the selected row in the table. Solve one step at a time. If you have a problem with a step then ask a specific question about that step.","body":"<i>I have no idea how to do that.</i> - do what? There are multiple steps to your question.  1) you need to create a JFrame with a JTable 2) You need to be able to select an item for which you want to create the notice. 3) You need to create a pdf document based on the selected row in the table. Solve one step at a time. If you have a problem with a step then ask a specific question about that step."},{"owner":{"account_id":969721,"reputation":344527,"user_id":992484,"accept_rate":60,"display_name":"MadProgrammer"},"score":0,"creation_date":1692067978,"post_id":76903098,"comment_id":135572002,"body_markdown":"I would suggest having a look at jasper reports","body":"I would suggest having a look at jasper reports"},{"owner":{"account_id":23146104,"reputation":1,"user_id":17248832,"display_name":"Silent Romance"},"score":0,"creation_date":1692078185,"post_id":76903098,"comment_id":135572659,"body_markdown":"@camickr\nIn the 3rd step you mentioned, that&#39;s where I have a problem.\nhow to do your third step, thanks.","body":"@camickr In the 3rd step you mentioned, that&#39;s where I have a problem. how to do your third step, thanks."},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1692086081,"post_id":76903098,"comment_id":135573708,"body_markdown":"Why pdf particularly?","body":"Why pdf particularly?"},{"owner":{"account_id":44852,"reputation":322224,"user_id":131872,"accept_rate":100,"display_name":"camickr"},"score":0,"creation_date":1692106296,"post_id":76903098,"comment_id":135577351,"body_markdown":"I have no idea. So your question has nothing to do with a JTable. The question is how to create a PDF document in Java. Keep your questions simple and straight to the point. You have been given a suggestion to use Jasper reports. I don&#39;t know what it is but that would be a place to start I guess.","body":"I have no idea. So your question has nothing to do with a JTable. The question is how to create a PDF document in Java. Keep your questions simple and straight to the point. You have been given a suggestion to use Jasper reports. I don&#39;t know what it is but that would be a place to start I guess."}],"owner":{"account_id":23146104,"reputation":1,"user_id":17248832,"display_name":"Silent Romance"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":25,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1692077726,"creation_date":1692065904,"question_id":76903098,"body_markdown":"I&#39;m new at programming and now I&#39;m trying a project in jTable where I will select a row and it will fetch the data and it will be open in pdf form or document . I have no idea how to do that.\r\n\r\n\r\nThis is what I want to happened.\r\n```\r\n|** Name    | Book Borrowed       |Date of Return |Date Today**\r\n:--------    :-----------          :---------      :---------\r\n| Billy     | Webster Dictionary  |July 28, 2023  |August 15, 2023\r\n| Cecille   | Encyclopedia A-Bh   |August 30, 2023|August 15, 2023\r\n```\r\nIf I select Billy, it will open in pdf or document.\r\nLike this.\r\n\r\nDocument sample:\r\n\r\n[![https://i.stack.imgur.com/PMhqV.png][1]][1]\r\n\r\nI&#39;d really appreciate your help, thanks.\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/PMhqV.png","title":"How to view jTable selected rows in PDF form","body":"<p>I'm new at programming and now I'm trying a project in jTable where I will select a row and it will fetch the data and it will be open in pdf form or document . I have no idea how to do that.</p>\n<p>This is what I want to happened.</p>\n<pre><code>|** Name    | Book Borrowed       |Date of Return |Date Today**\n:--------    :-----------          :---------      :---------\n| Billy     | Webster Dictionary  |July 28, 2023  |August 15, 2023\n| Cecille   | Encyclopedia A-Bh   |August 30, 2023|August 15, 2023\n</code></pre>\n<p>If I select Billy, it will open in pdf or document.\nLike this.</p>\n<p>Document sample:</p>\n<p><a href=\"https://i.stack.imgur.com/PMhqV.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/PMhqV.png\" alt=\"https://i.stack.imgur.com/PMhqV.png\" /></a></p>\n<p>I'd really appreciate your help, thanks.</p>\n"},{"tags":["java","spring"],"comments":[{"owner":{"account_id":1317825,"reputation":12193,"user_id":1264321,"accept_rate":92,"display_name":"Stefan"},"score":2,"creation_date":1405676824,"post_id":24821804,"comment_id":38533877,"body_markdown":"http://stackoverflow.com/questions/4945178/cannot-run-eclipse-jvm-terminated-exit-code-13","body":"<a href=\"http://stackoverflow.com/questions/4945178/cannot-run-eclipse-jvm-terminated-exit-code-13\" title=\"cannot run eclipse jvm terminated exit code 13\">stackoverflow.com/questions/4945178/&hellip;</a>"}],"answers":[{"comments":[{"owner":{"account_id":4345694,"reputation":31,"user_id":3547674,"display_name":"user3547674"},"score":0,"creation_date":1405681082,"post_id":24822033,"comment_id":38536497,"body_markdown":"I am using both with the 64 bit version only.Problem is previously i was having open-jdk which was crashing sts or I don&#39;t know what was happening.So I installed oracle jdk 1.7. From their that problem is coming.","body":"I am using both with the 64 bit version only.Problem is previously i was having open-jdk which was crashing sts or I don&#39;t know what was happening.So I installed oracle jdk 1.7. From their that problem is coming."},{"owner":{"account_id":2431730,"reputation":1425,"user_id":2122484,"accept_rate":75,"display_name":"Naveen Ramawat"},"score":0,"creation_date":1405681594,"post_id":24822033,"comment_id":38536848,"body_markdown":"Add this line in your sts.ini file and test again &lt;/br&gt;-vm &lt;/br&gt;/urjavahome/bin/javaw.exe","body":"Add this line in your sts.ini file and test again &lt;/br&gt;-vm &lt;/br&gt;/urjavahome/bin/javaw.exe"}],"tags":[],"owner":{"account_id":2431730,"reputation":1425,"user_id":2122484,"accept_rate":75,"display_name":"Naveen Ramawat"},"comment_count":2,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1405681773,"creation_date":1405676910,"answer_id":24822033,"question_id":24821804,"body_markdown":"Make sure that the JVM version (32/64 bit) you use matches the eclipse version (32/64 bit).&lt;br&gt;Add this line in your sts.ini file and test again &lt;br&gt;-vm &lt;br&gt;/ur_java_home/bin/javaw.exe","title":"STS(Spring Tool Suite) Not opening","body":"<p>Make sure that the JVM version (32/64 bit) you use matches the eclipse version (32/64 bit).<br>Add this line in your sts.ini file and test again <br>-vm <br>/ur_java_home/bin/javaw.exe</p>\n"},{"tags":[],"owner":{"account_id":898365,"reputation":504,"user_id":935148,"display_name":"Rao Pathangi"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1419457251,"creation_date":1419457251,"answer_id":27642393,"question_id":24821804,"body_markdown":"First location to check is whether your JDK is 32 bit or 64 bit. Next, sheck your sts.ini configuration values. Trial and error will see you through.","title":"STS(Spring Tool Suite) Not opening","body":"<p>First location to check is whether your JDK is 32 bit or 64 bit. Next, sheck your sts.ini configuration values. Trial and error will see you through.</p>\n"},{"tags":[],"owner":{"account_id":3160267,"reputation":633,"user_id":2671590,"display_name":"DoesEatOats"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1569598205,"creation_date":1569598205,"answer_id":58137495,"question_id":24821804,"body_markdown":"I finally got this to work\r\nNote that is on my system.\r\n\r\n\r\n`\r\n    -vm\r\n    C:/Program Files/Java/jre1.8.0_144/bin/javaw.exe\r\n    -startup\r\n    plugins/org.eclipse.equinox.launcher_1.4.0.v20161219-1356.jar\r\n    –launcher.library\r\n    plugins/org.eclipse.equinox.launcher.win32.win32.x86_1.1.551.v20171108-1834\r\n    -product\r\n    com.springsource.sts.ide\r\n    –launcher.defaultAction\r\n    openFile\r\n    –launcher.XXMaxPermSize\r\n    384M\r\n    -vmargs\r\n    -Dosgi.requiredJavaVersion=1.6\r\n    -Xmn128m\r\n    -Xms256m\r\n    -Xmx768m\r\n    -Xss4m\r\n    -XX:PermSize=128m\r\n    -XX:MaxPermSize=384m\r\n    -XX:CompileThreshold=1000\r\n    -XX:+CMSIncrementalPacing\r\n    -XX:+UnlockExperimentalVMOptions\r\n    -XX:+UseG1GC\r\n    -XX:+UseFastAccessorMethods`","title":"STS(Spring Tool Suite) Not opening","body":"<p>I finally got this to work\nNote that is on my system.</p>\n\n<p><code>\n    -vm\n    C:/Program Files/Java/jre1.8.0_144/bin/javaw.exe\n    -startup\n    plugins/org.eclipse.equinox.launcher_1.4.0.v20161219-1356.jar\n    –launcher.library\n    plugins/org.eclipse.equinox.launcher.win32.win32.x86_1.1.551.v20171108-1834\n    -product\n    com.springsource.sts.ide\n    –launcher.defaultAction\n    openFile\n    –launcher.XXMaxPermSize\n    384M\n    -vmargs\n    -Dosgi.requiredJavaVersion=1.6\n    -Xmn128m\n    -Xms256m\n    -Xmx768m\n    -Xss4m\n    -XX:PermSize=128m\n    -XX:MaxPermSize=384m\n    -XX:CompileThreshold=1000\n    -XX:+CMSIncrementalPacing\n    -XX:+UnlockExperimentalVMOptions\n    -XX:+UseG1GC\n    -XX:+UseFastAccessorMethods</code></p>\n"},{"tags":[],"owner":{"account_id":27777584,"reputation":1,"user_id":21206623,"display_name":"Naresh Manthrabuddi"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1678989880,"creation_date":1678515947,"answer_id":75703191,"question_id":24821804,"body_markdown":"I got the same issue on Mac. If it is Mac, below is the fix. \r\n\r\nGo to the terminal and run the below command &amp; enter your login password.\r\n```\r\nsudo codesign --force --sign - /Applications/SpringToolSuite4.app\r\n```","title":"STS(Spring Tool Suite) Not opening","body":"<p>I got the same issue on Mac. If it is Mac, below is the fix.</p>\n<p>Go to the terminal and run the below command &amp; enter your login password.</p>\n<pre><code>sudo codesign --force --sign - /Applications/SpringToolSuite4.app\n</code></pre>\n"}],"owner":{"account_id":4345694,"reputation":31,"user_id":3547674,"display_name":"user3547674"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":14205,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":4,"score":1,"last_activity_date":1692076055,"creation_date":1405676302,"question_id":24821804,"body_markdown":"I am not able to open the spring tool suite in the centos.\r\n\r\nFollowing is the exception which is causing this problem.:\r\n\r\n    JVM terminated. Exit code=13\r\n    /opt/jdk1.7.0_60/bin/java\r\n    -Dorg.eclipse.swt.browser.IEVersion=10001\r\n    -Dosgi.requiredJavaVersion=1.7\r\n    -Xms40m\r\n    -Xmx768m\r\n    -XX:MaxPermSize=256m  //plugins/org.eclipse.equinox.launcher_1.3.0.v20130327-1440.jar\r\n    -jar /home/kapil/Desktop/springsource/sts-3.4.0.RELEASE\r\n    -os linux\r\n    -ws gtk\r\n    -arch x86_64\r\n    -showsplash  \r\n    -launcher /home/kapil/Desktop/springsource/sts-3.4.0.RELEASE/STS\r\n    -name STS\r\n    --launcher.library /home/kapil/Desktop/springsource/sts-3.4.0.RELEASE//plugins/org.eclipse.equinox.launcher.gtk.linux.x86_64_1.1.200.v20130807-1835/eclipse_1506.so\r\n    -startup /home/kapil/Desktop/springsource/sts-3.4.0.RELEASE//plugins/org.eclipse.equinox.launcher_1.3.0.v20130327-1440.jar\r\n    --launcher.overrideVmargs\r\n    -exitdata 30000d\r\n    -product org.springsource.sts.ide\r\n    -vm /opt/jdk1.7.0_60/bin/java\r\n    -vmargs\r\n    -Dorg.eclipse.swt.browser.IEVersion=10001\r\n    -Dosgi.requiredJavaVersion=1.7\r\n    -Xms40m\r\n    -Xmx768m\r\n    -XX:MaxPermSize=256m\r\n    -jar /home/kapil/Desktop/springsource/sts-3.4.0.RELEASE//plugins /org.eclipse.equinox.launcher_1.3.0.v20130327-1440.jar\r\n\r\nHere is the output of the `java -version` command :-\r\n\r\n    java version &quot;1.7.0_60&quot;\r\n    Java(TM) SE Runtime Environment (build 1.7.0_60-b19)\r\n    Java HotSpot(TM) Server VM (build 24.60-b09, mixed mode)\r\n\r\nAnd here is the output of the `which java` command :-\r\n\r\n    /usr/bin/java\r\n    ","title":"STS(Spring Tool Suite) Not opening","body":"<p>I am not able to open the spring tool suite in the centos.</p>\n\n<p>Following is the exception which is causing this problem.:</p>\n\n<pre><code>JVM terminated. Exit code=13\n/opt/jdk1.7.0_60/bin/java\n-Dorg.eclipse.swt.browser.IEVersion=10001\n-Dosgi.requiredJavaVersion=1.7\n-Xms40m\n-Xmx768m\n-XX:MaxPermSize=256m  //plugins/org.eclipse.equinox.launcher_1.3.0.v20130327-1440.jar\n-jar /home/kapil/Desktop/springsource/sts-3.4.0.RELEASE\n-os linux\n-ws gtk\n-arch x86_64\n-showsplash  \n-launcher /home/kapil/Desktop/springsource/sts-3.4.0.RELEASE/STS\n-name STS\n--launcher.library /home/kapil/Desktop/springsource/sts-3.4.0.RELEASE//plugins/org.eclipse.equinox.launcher.gtk.linux.x86_64_1.1.200.v20130807-1835/eclipse_1506.so\n-startup /home/kapil/Desktop/springsource/sts-3.4.0.RELEASE//plugins/org.eclipse.equinox.launcher_1.3.0.v20130327-1440.jar\n--launcher.overrideVmargs\n-exitdata 30000d\n-product org.springsource.sts.ide\n-vm /opt/jdk1.7.0_60/bin/java\n-vmargs\n-Dorg.eclipse.swt.browser.IEVersion=10001\n-Dosgi.requiredJavaVersion=1.7\n-Xms40m\n-Xmx768m\n-XX:MaxPermSize=256m\n-jar /home/kapil/Desktop/springsource/sts-3.4.0.RELEASE//plugins /org.eclipse.equinox.launcher_1.3.0.v20130327-1440.jar\n</code></pre>\n\n<p>Here is the output of the <code>java -version</code> command :-</p>\n\n<pre><code>java version \"1.7.0_60\"\nJava(TM) SE Runtime Environment (build 1.7.0_60-b19)\nJava HotSpot(TM) Server VM (build 24.60-b09, mixed mode)\n</code></pre>\n\n<p>And here is the output of the <code>which java</code> command :-</p>\n\n<pre><code>/usr/bin/java\n</code></pre>\n"},{"tags":["java","jmc"],"comments":[{"owner":{"account_id":322981,"reputation":310755,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"score":1,"creation_date":1692042444,"post_id":75938716,"comment_id":135569585,"body_markdown":"Vague title. Rewrite to summarize your specific technical issue.","body":"Vague title. Rewrite to summarize your specific technical issue."}],"answers":[{"comments":[{"owner":{"account_id":16399104,"reputation":47,"user_id":11845679,"display_name":"Emrahall"},"score":0,"creation_date":1694433096,"post_id":76900871,"comment_id":135885926,"body_markdown":"Hi thanks for your detailed response however It didn&#39;t work even though I used settings=profile.jfc tab. My command is &quot;jcmd 7473 JFR.start duration=60s settings=profile.jfc filename=appuser_test.jfr&quot;.  Additionally My jdk version is 1.8.0_171.","body":"Hi thanks for your detailed response however It didn&#39;t work even though I used settings=profile.jfc tab. My command is &quot;jcmd 7473 JFR.start duration=60s settings=profile.jfc filename=appuser_test.jfr&quot;.  Additionally My jdk version is 1.8.0_171."}],"tags":[],"owner":{"account_id":2708748,"reputation":188,"user_id":2337743,"display_name":"Mario.Cadiz"},"comment_count":1,"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1692032730,"creation_date":1692032730,"answer_id":76900871,"question_id":75938716,"body_markdown":"The params of events gathered by the JFR are controlled the JFC files. The JDK is packed with 2 of them:\r\n\r\n    $JAVA_HOME/lib/jfr/default.jfc\r\n    $JAVA_HOME/lib/jfr/profile.jfc\r\n\r\nThe default.jfc will collect less events than the profile.jfc file. \r\n\r\nVerify which of them is used when your Java process is launched. That&#39;s regarding the JFC file. \r\n\r\nNow, there are 2 ways to start up a JFR file, continuous recording and profiling recording, that will depend on what you are using in the JVM options. \r\n\r\n**Continuous Recording**\r\n\r\nWhen to use it? The issue is intermittent, recording a JFR continuously is required until the issue is replicated. At that moment, dump the recording into a JFR file.\r\n\r\nA temporary repository can be configured where temporary JFR files will be created. By default, it&#39;s located at the /tmp folder or java.io.tmpdir system property. *Don&#39;t process the JFR files under the temporary repository, those are just temporary files, they are incomplete.*\r\n\r\nAbout disk=[true|false] Specifies whether to write temporary data to the disk repository. By default, this parameter is set to false. To enable it, set the parameter to true. (star)\r\n\r\nOnce the issue is replicated it, use the JFR.dump command to create the JFR file. At that point, when you already have the desired evidence, the JFR can be stopped with JFR.stop.\r\n\r\n    -XX:+UnlockCommercialFeatures -XX:+FlightRecorder -XX:FlightRecorderOptions=defaultrecording=true,disk=true,repository=&lt;PATH&gt;\r\n\r\nAn alternative to dump the file once the process exits:\r\n\r\n    -XX:FlightRecorderOptions=defaultrecording=true,dumponexit=true,dumponexitpath=&lt;PATH&gt;\r\n\r\nSet path to the location where the recording should be saved. If you specify a directory, a file with the date and time as the name is created in that directory. If you specify a file name, that name is used. If you do not specify a path, the recording will be saved in the current directory.\r\n\r\nExample of the sequence of command for continuous recording:\r\n\r\n    JFR.start name=myrecording maxage=30m settings=[TEMPLATE].jfc\r\n    \r\n    JFR.check (optional)\r\n    \r\n    JFR.dump\r\n    \r\n    JFR.stop\r\n\r\n\r\n**Profiling Recording**\r\n\r\nThe issue is consistent. How to replicate it or when it&#39;s going to occur is known, hence you need a period of time to collect a JFR when you are sure the issue will be replicated at least once.\r\n\r\n    -XX:+UnlockCommercialFeatures -XX:+FlightRecorder\r\n\r\nExample of a sequence of commands for profiling recording:\r\n\r\n    JFR.start name=myrecording filename=myrecording.jfr duration=10m settings=[TEMPLATE].jfc\r\n    \r\n    JFR.check (optional)\r\n    \r\n    JFR.stop (optional)\r\n\r\n\r\nAt this point, the questions are:\r\n\r\n 1. Which recording mode fits better with your issue? \r\n 2. Are you using the right JVM options for the recording mode?\r\n 3. Which JFC file are you using?\r\n 4. Are you executing the sequence of JFR commands corresponding with\r\n    the recording mode?","title":"JDK Mission Control","body":"<p>The params of events gathered by the JFR are controlled the JFC files. The JDK is packed with 2 of them:</p>\n<pre><code>$JAVA_HOME/lib/jfr/default.jfc\n$JAVA_HOME/lib/jfr/profile.jfc\n</code></pre>\n<p>The default.jfc will collect less events than the profile.jfc file.</p>\n<p>Verify which of them is used when your Java process is launched. That's regarding the JFC file.</p>\n<p>Now, there are 2 ways to start up a JFR file, continuous recording and profiling recording, that will depend on what you are using in the JVM options.</p>\n<p><strong>Continuous Recording</strong></p>\n<p>When to use it? The issue is intermittent, recording a JFR continuously is required until the issue is replicated. At that moment, dump the recording into a JFR file.</p>\n<p>A temporary repository can be configured where temporary JFR files will be created. By default, it's located at the /tmp folder or java.io.tmpdir system property. <em>Don't process the JFR files under the temporary repository, those are just temporary files, they are incomplete.</em></p>\n<p>About disk=[true|false] Specifies whether to write temporary data to the disk repository. By default, this parameter is set to false. To enable it, set the parameter to true. (star)</p>\n<p>Once the issue is replicated it, use the JFR.dump command to create the JFR file. At that point, when you already have the desired evidence, the JFR can be stopped with JFR.stop.</p>\n<pre><code>-XX:+UnlockCommercialFeatures -XX:+FlightRecorder -XX:FlightRecorderOptions=defaultrecording=true,disk=true,repository=&lt;PATH&gt;\n</code></pre>\n<p>An alternative to dump the file once the process exits:</p>\n<pre><code>-XX:FlightRecorderOptions=defaultrecording=true,dumponexit=true,dumponexitpath=&lt;PATH&gt;\n</code></pre>\n<p>Set path to the location where the recording should be saved. If you specify a directory, a file with the date and time as the name is created in that directory. If you specify a file name, that name is used. If you do not specify a path, the recording will be saved in the current directory.</p>\n<p>Example of the sequence of command for continuous recording:</p>\n<pre><code>JFR.start name=myrecording maxage=30m settings=[TEMPLATE].jfc\n\nJFR.check (optional)\n\nJFR.dump\n\nJFR.stop\n</code></pre>\n<p><strong>Profiling Recording</strong></p>\n<p>The issue is consistent. How to replicate it or when it's going to occur is known, hence you need a period of time to collect a JFR when you are sure the issue will be replicated at least once.</p>\n<pre><code>-XX:+UnlockCommercialFeatures -XX:+FlightRecorder\n</code></pre>\n<p>Example of a sequence of commands for profiling recording:</p>\n<pre><code>JFR.start name=myrecording filename=myrecording.jfr duration=10m settings=[TEMPLATE].jfc\n\nJFR.check (optional)\n\nJFR.stop (optional)\n</code></pre>\n<p>At this point, the questions are:</p>\n<ol>\n<li>Which recording mode fits better with your issue?</li>\n<li>Are you using the right JVM options for the recording mode?</li>\n<li>Which JFC file are you using?</li>\n<li>Are you executing the sequence of JFR commands corresponding with\nthe recording mode?</li>\n</ol>\n"},{"tags":[],"owner":{"account_id":9827,"reputation":6784,"user_id":2049208,"display_name":"Kire Haglin"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1692075399,"creation_date":1692067059,"answer_id":76903141,"question_id":75938716,"body_markdown":"The missing data could be because the TLAB events were disabled when **jdk.ObjectAllocationSample** event was introduced. See [JDK 16][1] release notes. The new event has less overhead and can always be enabled.\r\n\r\n\r\nYou need to upgrade JMC to a release where the new event is visualized, not sure if has been implemented yet, or you can enable the old events on command-line (works for JDK 17, or later)\r\n\r\n\r\n    $ java -XX:StartFlightRecording:\r\n        jdk.ObjectAllocationInNewTLAB#enabled=true,\r\n        jdk.ObjectAllocationOutsideTLAB#enabled=true\r\n        myapp\r\n\r\n\r\n  [1]: https://www.oracle.com/java/technologies/javase/16-relnote-issues.html#JDK-8257602","title":"JDK Mission Control","body":"<p>The missing data could be because the TLAB events were disabled when <strong>jdk.ObjectAllocationSample</strong> event was introduced. See <a href=\"https://www.oracle.com/java/technologies/javase/16-relnote-issues.html#JDK-8257602\" rel=\"nofollow noreferrer\">JDK 16</a> release notes. The new event has less overhead and can always be enabled.</p>\n<p>You need to upgrade JMC to a release where the new event is visualized, not sure if has been implemented yet, or you can enable the old events on command-line (works for JDK 17, or later)</p>\n<pre><code>$ java -XX:StartFlightRecording:\n    jdk.ObjectAllocationInNewTLAB#enabled=true,\n    jdk.ObjectAllocationOutsideTLAB#enabled=true\n    myapp\n</code></pre>\n"}],"owner":{"account_id":16399104,"reputation":47,"user_id":11845679,"display_name":"Emrahall"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":139,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":2,"score":1,"last_activity_date":1692075399,"creation_date":1680693135,"question_id":75938716,"body_markdown":"[![enter image description here][1]][1]When opening the tab of memory in jdk mission control with jfr file, it&#39;s getting nothing. İs there any parameters to setting the process which is I get jfr file. I&#39;ve just added that parameter to enable flight recorder.\r\n\r\n    java -XX:+UnlockCommercialFeatures -XX:+FlightRecorder ... myapp\r\n\r\n \r\n\r\n\r\n  [1]: https://i.stack.imgur.com/zvupW.png","title":"JDK Mission Control","body":"<p><a href=\"https://i.stack.imgur.com/zvupW.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/zvupW.png\" alt=\"enter image description here\" /></a>When opening the tab of memory in jdk mission control with jfr file, it's getting nothing. İs there any parameters to setting the process which is I get jfr file. I've just added that parameter to enable flight recorder.</p>\n<pre><code>java -XX:+UnlockCommercialFeatures -XX:+FlightRecorder ... myapp\n</code></pre>\n"},{"tags":["java","android","alarm","audio-player"],"owner":{"account_id":29117607,"reputation":1,"user_id":22305982,"display_name":"Hemanshu Sojitra"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":32,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1692073528,"creation_date":1692024383,"question_id":76899973,"body_markdown":"each time i enters seconds after alarm should start then click start button then when i want to stop it it won&#39;t happen .\r\n\r\n\r\nbelow is my Xml file\r\n\r\n\r\n```\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\r\n&lt;LinearLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\r\n    xmlns:app=&quot;http://schemas.android.com/apk/res-auto&quot;\r\n    xmlns:tools=&quot;http://schemas.android.com/tools&quot;\r\n    android:layout_width=&quot;match_parent&quot;\r\n    android:layout_height=&quot;match_parent&quot;\r\n    android:orientation=&quot;vertical&quot;\r\n    tools:context=&quot;.MainActivity7&quot;&gt;\r\n\r\n    &lt;EditText\r\n        android:layout_width=&quot;match_parent&quot;\r\n        android:layout_height=&quot;wrap_content&quot;\r\n        android:id=&quot;@+id/edit1&quot;\r\n        android:padding=&quot;5sp&quot;\r\n        android:inputType=&quot;number&quot;\r\n        android:layout_margin=&quot;5sp&quot;\r\n        /&gt;\r\n&lt;RelativeLayout\r\n    android:layout_width=&quot;match_parent&quot;\r\n    android:layout_height=&quot;wrap_content&quot;\r\n    &gt;\r\n    &lt;Button\r\n        android:id=&quot;@+id/button2&quot;\r\n        android:layout_width=&quot;wrap_content&quot;\r\n        android:layout_height=&quot;wrap_content&quot;\r\n        android:text=&quot;start&quot;\r\n        android:layout_alignParentLeft=&quot;true&quot;\r\n        android:layout_margin=&quot;5sp&quot;\r\n        /&gt;\r\n    &lt;Button\r\n        android:layout_width=&quot;wrap_content&quot;\r\n        android:layout_height=&quot;wrap_content&quot;\r\n        android:text=&quot;Stop&quot;\r\n        android:id=&quot;@+id/button3&quot;\r\n        android:layout_alignParentEnd=&quot;true&quot;\r\n        android:padding=&quot;5sp&quot;\r\n        android:layout_margin=&quot;5sp&quot;\r\n        /&gt;\r\n&lt;/RelativeLayout&gt;\r\n\r\n&lt;/LinearLayout&gt;\r\n\r\n```\r\n\r\nhere is my Activity file \r\n\r\n\r\n```\r\npackage com.example.implementation;\r\n\r\nimport android.app.AlarmManager;\r\nimport android.app.PendingIntent;\r\nimport android.content.Intent;\r\nimport android.os.Bundle;\r\nimport android.view.View;\r\nimport android.widget.Button;\r\nimport android.widget.EditText;\r\nimport android.widget.Toast;\r\n\r\nimport androidx.appcompat.app.AppCompatActivity;\r\n\r\npublic class MainActivity7 extends AppCompatActivity {\r\n\r\n    Button button1, button2;\r\n    EditText et1;\r\n    PendingIntent pendingIntent;\r\n\r\n    @Override\r\n    protected void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        setContentView(R.layout.activity_main7);\r\n\r\n        button1 = findViewById(R.id.button2);\r\n        button2 = findViewById(R.id.button3);\r\n        et1 = findViewById(R.id.edit1);\r\n        button1.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View view) {\r\n                startAlert();\r\n            }\r\n        });\r\n        button2.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View view) {\r\n                stopAlert();\r\n            }\r\n        });\r\n\r\n    }\r\n\r\n    private void startAlert() {\r\n        int i = Integer.parseInt(et1.getText().toString());\r\n        Intent intent = new Intent(this, MyBroadcastReceiver.class);\r\n        intent.putExtra(&quot;j&quot;, &quot;1&quot;);\r\n        pendingIntent = PendingIntent.getBroadcast(\r\n                this.getApplicationContext(), 1, intent, PendingIntent.FLAG_MUTABLE);\r\n        AlarmManager alarmManager = (AlarmManager) getSystemService(ALARM_SERVICE);\r\n        alarmManager.set(AlarmManager.RTC_WAKEUP, System.currentTimeMillis()\r\n                + (i * 1000), pendingIntent);\r\n        Toast.makeText(this, &quot;Alarm set in &quot; + i + &quot; seconds&quot;, Toast.LENGTH_LONG).show();\r\n    }\r\n\r\n    private void stopAlert() {\r\n        Intent stopIntent = new Intent();\r\n        stopIntent.setAction(&quot;com.example.implementation.STOP_ALARM&quot;);\r\n        sendBroadcast(stopIntent);\r\n        pendingIntent.cancel();\r\n    }\r\n\r\n}\r\n\r\n\r\n```\r\n\r\nhere is my brodcastreciver class file \r\n\r\n\r\n```\r\npackage com.example.implementation;\r\n\r\nimport android.content.BroadcastReceiver;\r\nimport android.content.Context;\r\nimport android.content.Intent;\r\nimport android.media.MediaPlayer;\r\nimport android.util.Log;\r\n\r\npublic class MyBroadcastReceiver extends BroadcastReceiver {\r\n    MediaPlayer mp;\r\n\r\n    @Override\r\n    public void onReceive(Context context, Intent intent) {\r\n\r\n        String action = intent.getAction();\r\n        if (action != null &amp;&amp; action.equals(&quot;com.example.implementation.STOP_ALARM&quot;)) {\r\n            stopAlarm();\r\n        } else {\r\n            String jValue = intent.getStringExtra(&quot;j&quot;);\r\n            if (jValue != null &amp;&amp; jValue.equals(&quot;1&quot;)) {\r\n                startAlarm(context);\r\n            }\r\n        }\r\n    }\r\n\r\n    private void startAlarm(Context context) {\r\n        // Start the alarm (play sound or perform other actions)\r\n        mp = MediaPlayer.create(context, R.raw.audio1);\r\n        mp.start();\r\n        Log.d(&quot;MyBroadcastReceiver&quot;, &quot;Alarm started&quot;);\r\n    }\r\n\r\n    private void stopAlarm() {\r\n        // Stop the alarm (if it&#39;s playing)\r\n        if (mp != null &amp;&amp; mp.isPlaying()) {\r\n            mp.stop();\r\n        }\r\n        if (mp != null) {\r\n            mp.release();\r\n            mp = null;\r\n        }\r\n        Log.d(&quot;MyBroadcastReceiver&quot;, &quot;Alarm stopped&quot;);\r\n    }\r\n}\r\n\r\n\r\n```\r\n\r\nthis is my mainfest file\r\n\r\n```\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\r\n&lt;manifest xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\r\n    xmlns:tools=&quot;http://schemas.android.com/tools&quot;&gt;\r\n\r\n    &lt;uses-permission android:name=&quot;android.permission.INTERNET&quot; /&gt;\r\n\r\n    &lt;application\r\n        android:allowBackup=&quot;true&quot;\r\n        android:dataExtractionRules=&quot;@xml/data_extraction_rules&quot;\r\n        android:fullBackupContent=&quot;@xml/backup_rules&quot;\r\n        android:icon=&quot;@mipmap/ic_launcher&quot;\r\n        android:label=&quot;@string/app_name&quot;\r\n        android:enabled=&quot;true&quot;\r\n        android:roundIcon=&quot;@mipmap/ic_launcher_round&quot;\r\n        android:supportsRtl=&quot;true&quot;\r\n        android:theme=&quot;@style/Theme.Implementation&quot;\r\n        tools:targetApi=&quot;31&quot;&gt;\r\n        &lt;activity\r\n            android:name=&quot;.MainActivity7&quot;\r\n            android:exported=&quot;false&quot; /&gt;\r\n        &lt;activity\r\n            android:name=&quot;.MainActivity6&quot;\r\n            android:exported=&quot;false&quot; /&gt;\r\n        &lt;activity\r\n            android:name=&quot;.MainActivity1&quot;\r\n            android:exported=&quot;false&quot; /&gt;\r\n        &lt;activity\r\n            android:name=&quot;.MainActivity5&quot;\r\n            android:exported=&quot;false&quot; /&gt;\r\n        &lt;activity\r\n            android:name=&quot;.MainActivity4&quot;\r\n            android:exported=&quot;false&quot; /&gt;\r\n        &lt;activity\r\n            android:name=&quot;.MainActivity3&quot;\r\n            android:exported=&quot;false&quot; /&gt;\r\n        &lt;activity\r\n            android:name=&quot;.MainActivity2&quot;\r\n            android:exported=&quot;false&quot; /&gt;\r\n        &lt;activity\r\n            android:name=&quot;.MainActivity&quot;\r\n            android:exported=&quot;true&quot;&gt;\r\n            &lt;intent-filter&gt;\r\n                &lt;action android:name=&quot;android.intent.action.MAIN&quot; /&gt;\r\n\r\n                &lt;category android:name=&quot;android.intent.category.LAUNCHER&quot; /&gt;\r\n            &lt;/intent-filter&gt;\r\n        &lt;/activity&gt;\r\n        &lt;receiver\r\n            android:name=&quot;.MyBroadcastReceiver&quot;\r\n            android:enabled=&quot;true&quot;\r\n            android:exported=&quot;false&quot;&gt;\r\n            &lt;intent-filter&gt;\r\n                &lt;action android:name=&quot;com.example.implementation.CUSTOM_ALARM_ACTION&quot; /&gt;\r\n            &lt;/intent-filter&gt;\r\n        &lt;/receiver&gt;\r\n    &lt;/application&gt;\r\n\r\n&lt;/manifest&gt;\r\n\r\n```\r\n\r\n\r\nI Have Pushed Both Chat gpt and Bard To Their limits But problem isn&#39;t solving. I I came to a conclusion that My receiver is not receiving broadcast .","title":"I Am Unable to stop my Alarm using stop button, I could only start it","body":"<p>each time i enters seconds after alarm should start then click start button then when i want to stop it it won't happen .</p>\n<p>below is my Xml file</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\n&lt;LinearLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\n    xmlns:app=&quot;http://schemas.android.com/apk/res-auto&quot;\n    xmlns:tools=&quot;http://schemas.android.com/tools&quot;\n    android:layout_width=&quot;match_parent&quot;\n    android:layout_height=&quot;match_parent&quot;\n    android:orientation=&quot;vertical&quot;\n    tools:context=&quot;.MainActivity7&quot;&gt;\n\n    &lt;EditText\n        android:layout_width=&quot;match_parent&quot;\n        android:layout_height=&quot;wrap_content&quot;\n        android:id=&quot;@+id/edit1&quot;\n        android:padding=&quot;5sp&quot;\n        android:inputType=&quot;number&quot;\n        android:layout_margin=&quot;5sp&quot;\n        /&gt;\n&lt;RelativeLayout\n    android:layout_width=&quot;match_parent&quot;\n    android:layout_height=&quot;wrap_content&quot;\n    &gt;\n    &lt;Button\n        android:id=&quot;@+id/button2&quot;\n        android:layout_width=&quot;wrap_content&quot;\n        android:layout_height=&quot;wrap_content&quot;\n        android:text=&quot;start&quot;\n        android:layout_alignParentLeft=&quot;true&quot;\n        android:layout_margin=&quot;5sp&quot;\n        /&gt;\n    &lt;Button\n        android:layout_width=&quot;wrap_content&quot;\n        android:layout_height=&quot;wrap_content&quot;\n        android:text=&quot;Stop&quot;\n        android:id=&quot;@+id/button3&quot;\n        android:layout_alignParentEnd=&quot;true&quot;\n        android:padding=&quot;5sp&quot;\n        android:layout_margin=&quot;5sp&quot;\n        /&gt;\n&lt;/RelativeLayout&gt;\n\n&lt;/LinearLayout&gt;\n\n</code></pre>\n<p>here is my Activity file</p>\n<pre><code>package com.example.implementation;\n\nimport android.app.AlarmManager;\nimport android.app.PendingIntent;\nimport android.content.Intent;\nimport android.os.Bundle;\nimport android.view.View;\nimport android.widget.Button;\nimport android.widget.EditText;\nimport android.widget.Toast;\n\nimport androidx.appcompat.app.AppCompatActivity;\n\npublic class MainActivity7 extends AppCompatActivity {\n\n    Button button1, button2;\n    EditText et1;\n    PendingIntent pendingIntent;\n\n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.activity_main7);\n\n        button1 = findViewById(R.id.button2);\n        button2 = findViewById(R.id.button3);\n        et1 = findViewById(R.id.edit1);\n        button1.setOnClickListener(new View.OnClickListener() {\n            @Override\n            public void onClick(View view) {\n                startAlert();\n            }\n        });\n        button2.setOnClickListener(new View.OnClickListener() {\n            @Override\n            public void onClick(View view) {\n                stopAlert();\n            }\n        });\n\n    }\n\n    private void startAlert() {\n        int i = Integer.parseInt(et1.getText().toString());\n        Intent intent = new Intent(this, MyBroadcastReceiver.class);\n        intent.putExtra(&quot;j&quot;, &quot;1&quot;);\n        pendingIntent = PendingIntent.getBroadcast(\n                this.getApplicationContext(), 1, intent, PendingIntent.FLAG_MUTABLE);\n        AlarmManager alarmManager = (AlarmManager) getSystemService(ALARM_SERVICE);\n        alarmManager.set(AlarmManager.RTC_WAKEUP, System.currentTimeMillis()\n                + (i * 1000), pendingIntent);\n        Toast.makeText(this, &quot;Alarm set in &quot; + i + &quot; seconds&quot;, Toast.LENGTH_LONG).show();\n    }\n\n    private void stopAlert() {\n        Intent stopIntent = new Intent();\n        stopIntent.setAction(&quot;com.example.implementation.STOP_ALARM&quot;);\n        sendBroadcast(stopIntent);\n        pendingIntent.cancel();\n    }\n\n}\n\n\n</code></pre>\n<p>here is my brodcastreciver class file</p>\n<pre><code>package com.example.implementation;\n\nimport android.content.BroadcastReceiver;\nimport android.content.Context;\nimport android.content.Intent;\nimport android.media.MediaPlayer;\nimport android.util.Log;\n\npublic class MyBroadcastReceiver extends BroadcastReceiver {\n    MediaPlayer mp;\n\n    @Override\n    public void onReceive(Context context, Intent intent) {\n\n        String action = intent.getAction();\n        if (action != null &amp;&amp; action.equals(&quot;com.example.implementation.STOP_ALARM&quot;)) {\n            stopAlarm();\n        } else {\n            String jValue = intent.getStringExtra(&quot;j&quot;);\n            if (jValue != null &amp;&amp; jValue.equals(&quot;1&quot;)) {\n                startAlarm(context);\n            }\n        }\n    }\n\n    private void startAlarm(Context context) {\n        // Start the alarm (play sound or perform other actions)\n        mp = MediaPlayer.create(context, R.raw.audio1);\n        mp.start();\n        Log.d(&quot;MyBroadcastReceiver&quot;, &quot;Alarm started&quot;);\n    }\n\n    private void stopAlarm() {\n        // Stop the alarm (if it's playing)\n        if (mp != null &amp;&amp; mp.isPlaying()) {\n            mp.stop();\n        }\n        if (mp != null) {\n            mp.release();\n            mp = null;\n        }\n        Log.d(&quot;MyBroadcastReceiver&quot;, &quot;Alarm stopped&quot;);\n    }\n}\n\n\n</code></pre>\n<p>this is my mainfest file</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\n&lt;manifest xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\n    xmlns:tools=&quot;http://schemas.android.com/tools&quot;&gt;\n\n    &lt;uses-permission android:name=&quot;android.permission.INTERNET&quot; /&gt;\n\n    &lt;application\n        android:allowBackup=&quot;true&quot;\n        android:dataExtractionRules=&quot;@xml/data_extraction_rules&quot;\n        android:fullBackupContent=&quot;@xml/backup_rules&quot;\n        android:icon=&quot;@mipmap/ic_launcher&quot;\n        android:label=&quot;@string/app_name&quot;\n        android:enabled=&quot;true&quot;\n        android:roundIcon=&quot;@mipmap/ic_launcher_round&quot;\n        android:supportsRtl=&quot;true&quot;\n        android:theme=&quot;@style/Theme.Implementation&quot;\n        tools:targetApi=&quot;31&quot;&gt;\n        &lt;activity\n            android:name=&quot;.MainActivity7&quot;\n            android:exported=&quot;false&quot; /&gt;\n        &lt;activity\n            android:name=&quot;.MainActivity6&quot;\n            android:exported=&quot;false&quot; /&gt;\n        &lt;activity\n            android:name=&quot;.MainActivity1&quot;\n            android:exported=&quot;false&quot; /&gt;\n        &lt;activity\n            android:name=&quot;.MainActivity5&quot;\n            android:exported=&quot;false&quot; /&gt;\n        &lt;activity\n            android:name=&quot;.MainActivity4&quot;\n            android:exported=&quot;false&quot; /&gt;\n        &lt;activity\n            android:name=&quot;.MainActivity3&quot;\n            android:exported=&quot;false&quot; /&gt;\n        &lt;activity\n            android:name=&quot;.MainActivity2&quot;\n            android:exported=&quot;false&quot; /&gt;\n        &lt;activity\n            android:name=&quot;.MainActivity&quot;\n            android:exported=&quot;true&quot;&gt;\n            &lt;intent-filter&gt;\n                &lt;action android:name=&quot;android.intent.action.MAIN&quot; /&gt;\n\n                &lt;category android:name=&quot;android.intent.category.LAUNCHER&quot; /&gt;\n            &lt;/intent-filter&gt;\n        &lt;/activity&gt;\n        &lt;receiver\n            android:name=&quot;.MyBroadcastReceiver&quot;\n            android:enabled=&quot;true&quot;\n            android:exported=&quot;false&quot;&gt;\n            &lt;intent-filter&gt;\n                &lt;action android:name=&quot;com.example.implementation.CUSTOM_ALARM_ACTION&quot; /&gt;\n            &lt;/intent-filter&gt;\n        &lt;/receiver&gt;\n    &lt;/application&gt;\n\n&lt;/manifest&gt;\n\n</code></pre>\n<p>I Have Pushed Both Chat gpt and Bard To Their limits But problem isn't solving. I I came to a conclusion that My receiver is not receiving broadcast .</p>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":21724606,"reputation":722,"user_id":16034206,"display_name":"experiment unit 1998X"},"score":0,"creation_date":1692068739,"post_id":76903211,"comment_id":135572045,"body_markdown":"the ternary operator is a condensed form of if-else that _returns a value_. Meaning, when you are using an int and a char together, it casts the char to an int value (ascii) since you cant return two different types. This should be an implicit cast. though I m not too sure why nothing happens when you use the primitive int literal 0","body":"the ternary operator is a condensed form of if-else that <i>returns a value</i>. Meaning, when you are using an int and a char together, it casts the char to an int value (ascii) since you cant return two different types. This should be an implicit cast. though I m not too sure why nothing happens when you use the primitive int literal 0"},{"owner":{"account_id":21724606,"reputation":722,"user_id":16034206,"display_name":"experiment unit 1998X"},"score":0,"creation_date":1692069396,"post_id":76903211,"comment_id":135572081,"body_markdown":"ok, i did some reading up and based on what i read: alpha is a char and 0 is a value that fits into a char (int literal is a compile time constant) so it is still a char, however, if you use a int variable,  because an int has a range of values that does not fit into a char, but a char can fit into the int, the char &#39;A&#39; gets promoted to an int and the overall returned value is an int","body":"ok, i did some reading up and based on what i read: alpha is a char and 0 is a value that fits into a char (int literal is a compile time constant) so it is still a char, however, if you use a int variable,  because an int has a range of values that does not fit into a char, but a char can fit into the int, the char &#39;A&#39; gets promoted to an int and the overall returned value is an int"},{"owner":{"account_id":21724606,"reputation":722,"user_id":16034206,"display_name":"experiment unit 1998X"},"score":0,"creation_date":1692069495,"post_id":76903211,"comment_id":135572091,"body_markdown":"You can try testing it out with the following `System.out.println(trueExp ? alpha : 65536); System.out.println(trueExp ? alpha : foo);` where 65536 is the max int value a char variable can store + 1","body":"You can try testing it out with the following <code>System.out.println(trueExp ? alpha : 65536); System.out.println(trueExp ? alpha : foo);</code> where 65536 is the max int value a char variable can store + 1"},{"owner":{"account_id":21724606,"reputation":722,"user_id":16034206,"display_name":"experiment unit 1998X"},"score":0,"creation_date":1692070010,"post_id":76903211,"comment_id":135572124,"body_markdown":"I m kinda waiting for a more experienced member of SO to give an in depth answer, because i m kinda having a hard time putting it into words and using correct terminology","body":"I m kinda waiting for a more experienced member of SO to give an in depth answer, because i m kinda having a hard time putting it into words and using correct terminology"},{"owner":{"account_id":22057425,"reputation":135,"user_id":16320675,"display_name":"user16320675"},"score":0,"creation_date":1692078319,"post_id":76903211,"comment_id":135572671,"body_markdown":"in short: since the literal `0` is a valid `char`, the expression can/will result in a `char` (if you used `-1` or a value greater than `65535`, which is not a valid `char`, the result will be an `int` - the first operand must be converted to `int`). For the second case, there is no option: the *smallest* type for `char` and `int` is `int`","body":"in short: since the literal <code>0</code> is a valid <code>char</code>, the expression can/will result in a <code>char</code> (if you used <code>-1</code> or a value greater than <code>65535</code>, which is not a valid <code>char</code>, the result will be an <code>int</code> - the first operand must be converted to <code>int</code>). For the second case, there is no option: the <i>smallest</i> type for <code>char</code> and <code>int</code> is <code>int</code>"},{"owner":{"account_id":22057425,"reputation":135,"user_id":16320675,"display_name":"user16320675"},"score":3,"creation_date":1692078578,"post_id":76903211,"comment_id":135572695,"body_markdown":"For details, see the [Java Language Specification](https://docs.oracle.com/javase/specs/jls/se20/html/jls-15.html#jls-15.25.2): &quot; If one of the operands is of type T where T is byte, short, or char, and the other operand is a constant expression (&#167;15.29) of type int whose value is representable in type T, then the type of the conditional expression is T. ... Otherwise, general numeric promotion (&#167;5.6) is applied to the second and third operands, and the type of the conditional expression is the promoted type of the second and third operands.&quot;","body":"For details, see the <a href=\"https://docs.oracle.com/javase/specs/jls/se20/html/jls-15.html#jls-15.25.2\" rel=\"nofollow noreferrer\">Java Language Specification</a>: &quot; If one of the operands is of type T where T is byte, short, or char, and the other operand is a constant expression (&#167;15.29) of type int whose value is representable in type T, then the type of the conditional expression is T. ... Otherwise, general numeric promotion (&#167;5.6) is applied to the second and third operands, and the type of the conditional expression is the promoted type of the second and third operands.&quot;"},{"owner":{"account_id":29226594,"reputation":1,"user_id":22391147,"display_name":"Alex.Ren"},"score":0,"creation_date":1692081677,"post_id":76903211,"comment_id":135573048,"body_markdown":"Thanks for all the answering, I think I figure it out. You guys are the best!","body":"Thanks for all the answering, I think I figure it out. You guys are the best!"}],"owner":{"account_id":29226594,"reputation":1,"user_id":22391147,"display_name":"Alex.Ren"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":71,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1692072794,"creation_date":1692068521,"question_id":76903211,"body_markdown":"```\r\nchar alpha = &#39;A&#39;;\r\nint foo = 65;\r\nboolean trueExp = true;\r\nSystem.out.println(trueExp ? alpha : 0);\r\nSystem.out.println(trueExp ? alpha : foo);\r\n```\r\nCan somebody explain why the first output is&#39;A&#39; but the second one is 65?\r\n\r\nI tried different values of foo and it tirns out it doesn&#39;t matter. 65 is exactly the Ascii code for letter &#39;A&#39;. What I don&#39;t understand is why in the first output the &#39;A&#39; is treated as Ascii code but in the second one it&#39;s not.","title":"data types in ternary operators in Java","body":"<pre><code>char alpha = 'A';\nint foo = 65;\nboolean trueExp = true;\nSystem.out.println(trueExp ? alpha : 0);\nSystem.out.println(trueExp ? alpha : foo);\n</code></pre>\n<p>Can somebody explain why the first output is'A' but the second one is 65?</p>\n<p>I tried different values of foo and it tirns out it doesn't matter. 65 is exactly the Ascii code for letter 'A'. What I don't understand is why in the first output the 'A' is treated as Ascii code but in the second one it's not.</p>\n"},{"tags":["java","pdf","itext","ondemand"],"comments":[{"owner":{"account_id":1779372,"reputation":76342,"user_id":1622493,"display_name":"Bruno Lowagie"},"score":1,"creation_date":1458574584,"post_id":36134854,"comment_id":59909054,"body_markdown":"Is it me, or is this question just non sense? Can you please rephrase it? Seems like you are making some assumptions about the PDF file format that are wrong.","body":"Is it me, or is this question just non sense? Can you please rephrase it? Seems like you are making some assumptions about the PDF file format that are wrong."}],"answers":[{"tags":[],"owner":{"account_id":1857684,"reputation":6670,"user_id":1682924,"display_name":"David van Driessche"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1458575453,"creation_date":1458575453,"answer_id":36135704,"question_id":36134854,"body_markdown":"You cannot do this in any way. Please read the PDF file format specification (here amongst other places http://www.adobe.com/devnet/pdf/pdf_reference.html).\r\n\r\nA PDF file contains &quot;objects&quot; and a page has both a page description recorded in a stream object and can (and mostly will) use various other objects that in all likelihood are scattered around the file.\r\n\r\nYou misunderstand how PDF files are built and you need to understand before you start stumbling around in trying to implement this or you&#39;re going to waste a lot of time.","title":"Split PDF using offset and length- IBM ONDEMAND (combined PDF)","body":"<p>You cannot do this in any way. Please read the PDF file format specification (here amongst other places <a href=\"http://www.adobe.com/devnet/pdf/pdf_reference.html\" rel=\"nofollow\">http://www.adobe.com/devnet/pdf/pdf_reference.html</a>).</p>\n\n<p>A PDF file contains \"objects\" and a page has both a page description recorded in a stream object and can (and mostly will) use various other objects that in all likelihood are scattered around the file.</p>\n\n<p>You misunderstand how PDF files are built and you need to understand before you start stumbling around in trying to implement this or you're going to waste a lot of time.</p>\n"},{"tags":[],"owner":{"account_id":2309566,"reputation":221,"user_id":2028011,"accept_rate":20,"display_name":"Magesh"},"comment_count":0,"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1458589957,"creation_date":1458589102,"answer_id":36140079,"question_id":36134854,"body_markdown":"This question need to be asked on IBM Ondemand forum. I thought i can make use of Itext to crack it down. As mentioned by  David we cannot deal with these kind of unstructured PDF by using Itext.  Below given the code snippet to solve the problem.\r\n\r\nBoth the PDF are merged using plain java. The merged file will have two EOF,header and trailer information. \r\n\r\nWhen you open in Acrobat it will read the last document information and display. When we pass the length and index to ondemand it will split the PDF and display as expected.\r\n\r\n    public static void main(String[] args) throws IOException {\r\n\t\tString sourceFile1Path = &quot;C:\\\\sample1.PDF&quot;;\r\n\t\tString sourceFile2Path = &quot;C:\\\\sample1.PDF&quot;;\r\n\r\n\t\tString mergedFilePath = &quot;C:\\\\merged.PDF&quot;;\r\n\r\n\t\tFile[] files = new File[2];\r\n\t\tfiles[0] = new File(sourceFile1Path);\r\n\t\tfiles[1] = new File(sourceFile2Path);\r\n\r\n\t\tFile mergedFile = new File(mergedFilePath);\r\n\t\tfor (File file : files) {\r\n\t\t\tFileWriter fstream = null;\r\n\t\t\tBufferedWriter out = null;\r\n\t\t\tfstream = new FileWriter(mergedFile, true);\r\n\t\t\tout = new BufferedWriter(fstream);\r\n\r\n\t\t\tFileInputStream fis = new FileInputStream(file);\r\n\t\t\tBufferedReader in = new BufferedReader(new InputStreamReader(fis));\r\n\r\n\t\t\tString aLine;\r\n\t\t\twhile ((aLine = in.readLine()) != null) {\r\n\t\t\t\tout.write(aLine);\r\n\t\t\t\tout.newLine();\r\n\t\t\t}\r\n            out.close();\r\n\t\t\tfstream.close();\r\n\t\t\tfis.close();\r\n\t\t\tin.close();\r\n\t\t\t\r\n\t\t\tSystem.out.println(&quot;File Length: &quot; + file.getName()\t+ &quot; : &quot; + new File(mergedFilePath).length());\r\n\t\t}\r\n\t}","title":"Split PDF using offset and length- IBM ONDEMAND (combined PDF)","body":"<p>This question need to be asked on IBM Ondemand forum. I thought i can make use of Itext to crack it down. As mentioned by  David we cannot deal with these kind of unstructured PDF by using Itext.  Below given the code snippet to solve the problem.</p>\n\n<p>Both the PDF are merged using plain java. The merged file will have two EOF,header and trailer information. </p>\n\n<p>When you open in Acrobat it will read the last document information and display. When we pass the length and index to ondemand it will split the PDF and display as expected.</p>\n\n<pre><code>public static void main(String[] args) throws IOException {\n    String sourceFile1Path = \"C:\\\\sample1.PDF\";\n    String sourceFile2Path = \"C:\\\\sample1.PDF\";\n\n    String mergedFilePath = \"C:\\\\merged.PDF\";\n\n    File[] files = new File[2];\n    files[0] = new File(sourceFile1Path);\n    files[1] = new File(sourceFile2Path);\n\n    File mergedFile = new File(mergedFilePath);\n    for (File file : files) {\n        FileWriter fstream = null;\n        BufferedWriter out = null;\n        fstream = new FileWriter(mergedFile, true);\n        out = new BufferedWriter(fstream);\n\n        FileInputStream fis = new FileInputStream(file);\n        BufferedReader in = new BufferedReader(new InputStreamReader(fis));\n\n        String aLine;\n        while ((aLine = in.readLine()) != null) {\n            out.write(aLine);\n            out.newLine();\n        }\n        out.close();\n        fstream.close();\n        fis.close();\n        in.close();\n\n        System.out.println(\"File Length: \" + file.getName() + \" : \" + new File(mergedFilePath).length());\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":2309566,"reputation":221,"user_id":2028011,"accept_rate":20,"display_name":"Magesh"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":313,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":2,"score":-1,"last_activity_date":1692071016,"creation_date":1458573255,"question_id":36134854,"body_markdown":"Need to get the offset and byte length of each page in a PDF.For Example first page offset value will be 0 and length will be the byte length of the page.\r\n\r\nI have a requirement to pass index file for a PDF to IBM Ondemand tool, it is a PDF repository. I need to merge individual PDF files calculate the offset and length of each PDF, create an index file with these two parameters and pass it to the tool. \r\n\r\nThe tool will make use of the index file to split the PDF(multiple PDF combined into single) based on the offset and length passed as properties (Index file).\r\n\r\nI used itext to get the beginning and end of the page using bookmark. Need to calculate the offset and length of the bytes for each page. \r\n\r\nSuggest is there is any way to get the index(start of the page) and end of the page in terms of bytes.\r\n\r\nAny help would be appreciated\r\n\r\n","title":"Split PDF using offset and length- IBM ONDEMAND (combined PDF)","body":"<p>Need to get the offset and byte length of each page in a PDF.For Example first page offset value will be 0 and length will be the byte length of the page.</p>\n\n<p>I have a requirement to pass index file for a PDF to IBM Ondemand tool, it is a PDF repository. I need to merge individual PDF files calculate the offset and length of each PDF, create an index file with these two parameters and pass it to the tool. </p>\n\n<p>The tool will make use of the index file to split the PDF(multiple PDF combined into single) based on the offset and length passed as properties (Index file).</p>\n\n<p>I used itext to get the beginning and end of the page using bookmark. Need to calculate the offset and length of the bytes for each page. </p>\n\n<p>Suggest is there is any way to get the index(start of the page) and end of the page in terms of bytes.</p>\n\n<p>Any help would be appreciated</p>\n"},{"tags":["java","serialization"],"comments":[{"owner":{"account_id":5397431,"reputation":5255,"user_id":4298200,"accept_rate":62,"display_name":"Neuron"},"score":2,"creation_date":1509003627,"post_id":7290777,"comment_id":80843977,"body_markdown":"please note that it is better to accept the best answer and not the first correct one. you stated yourself that the answer by peter lawrey might be better. for the sake of all people coming here in the future looking for the best answer: please consider accepting a different answer!","body":"please note that it is better to accept the best answer and not the first correct one. you stated yourself that the answer by peter lawrey might be better. for the sake of all people coming here in the future looking for the best answer: please consider accepting a different answer!"}],"answers":[{"comments":[{"owner":{"account_id":212518,"reputation":43399,"user_id":465378,"accept_rate":85,"display_name":"Alexis King"},"score":0,"creation_date":1315019205,"post_id":7290812,"comment_id":8781914,"body_markdown":"Okay, thanks, this is all well and good. But as far as I can tell the ArrayList is never added to the serialization in `writeObject`. What would I do to correctly add the List to the serialization?","body":"Okay, thanks, this is all well and good. But as far as I can tell the ArrayList is never added to the serialization in <code>writeObject</code>. What would I do to correctly add the List to the serialization?"},{"owner":{"account_id":280425,"reputation":21283,"user_id":576119,"display_name":"momo"},"score":1,"creation_date":1315019618,"post_id":7290812,"comment_id":8781940,"body_markdown":"I don&#39;t think that&#39;s true. ArrayList implements Serializable. The important thing is that the members of the ArrayList are also Serializable. And all your members are int that is Serializable in its Integer (object form). If by chance, what I said is not true, then you serialize to different form such as JSON or if you really need just four integers, you could even do a String in the form of int1,int2,int3,int4 and do split during read. With custom serialization, you have many options to write and retrieve back the data.","body":"I don&#39;t think that&#39;s true. ArrayList implements Serializable. The important thing is that the members of the ArrayList are also Serializable. And all your members are int that is Serializable in its Integer (object form). If by chance, what I said is not true, then you serialize to different form such as JSON or if you really need just four integers, you could even do a String in the form of int1,int2,int3,int4 and do split during read. With custom serialization, you have many options to write and retrieve back the data."},{"owner":{"account_id":212518,"reputation":43399,"user_id":465378,"accept_rate":85,"display_name":"Alexis King"},"score":0,"creation_date":1315021150,"post_id":7290812,"comment_id":8782047,"body_markdown":"No, I understand that, but it would appear that I need to also do `oos.writeObject(loc)` I can do `ois.readObject()`, which you seem to have omitted.","body":"No, I understand that, but it would appear that I need to also do <code>oos.writeObject(loc)</code> I can do <code>ois.readObject()</code>, which you seem to have omitted."},{"owner":{"account_id":280425,"reputation":21283,"user_id":576119,"display_name":"momo"},"score":0,"creation_date":1315021257,"post_id":7290812,"comment_id":8782061,"body_markdown":"Oh yes, you are right, I miss that :) Sorry, I was typing it in hurry","body":"Oh yes, you are right, I miss that :) Sorry, I was typing it in hurry"},{"owner":{"account_id":218120,"reputation":52212,"user_id":474283,"display_name":"Cameron Skinner"},"score":6,"creation_date":1315025375,"post_id":7290812,"comment_id":8782347,"body_markdown":"You don&#39;t *have* to go to all the trouble of wrapping things up in an `ArrayList` or JSON object or whatever. You could just do `oos.writeInt(x); oos.writeInt(y); ...` and the corresponding input methods in the same order.","body":"You don&#39;t <i>have</i> to go to all the trouble of wrapping things up in an <code>ArrayList</code> or JSON object or whatever. You could just do <code>oos.writeInt(x); oos.writeInt(y); ...</code> and the corresponding input methods in the same order."},{"owner":{"account_id":218120,"reputation":52212,"user_id":474283,"display_name":"Cameron Skinner"},"score":0,"creation_date":1315025464,"post_id":7290812,"comment_id":8782352,"body_markdown":"By the way, what&#39;s the `assumes &quot;static java.util.Date aDate;&quot; declared` bit for?","body":"By the way, what&#39;s the <code>assumes &quot;static java.util.Date aDate;&quot; declared</code> bit for?"},{"owner":{"account_id":280425,"reputation":21283,"user_id":576119,"display_name":"momo"},"score":0,"creation_date":1315028369,"post_id":7290812,"comment_id":8782578,"body_markdown":"@Cameron The code was to illustrate using the sample that he put up. All I want to say that there is a way in Java to do what he wanted to do and there is more than one way to do it (for example, you have just proposed another way to do so). And the static java.util.Date was a comment left out from my code where I template the snippet from. I just cleaned that up.","body":"@Cameron The code was to illustrate using the sample that he put up. All I want to say that there is a way in Java to do what he wanted to do and there is more than one way to do it (for example, you have just proposed another way to do so). And the static java.util.Date was a comment left out from my code where I template the snippet from. I just cleaned that up."},{"owner":{"account_id":2078676,"reputation":2468,"user_id":1851302,"accept_rate":62,"display_name":"KNU"},"score":0,"creation_date":1421412507,"post_id":7290812,"comment_id":44359709,"body_markdown":"@momo whats&#39;s the crafty part here? I didn&#39;t get it","body":"@momo whats&#39;s the crafty part here? I didn&#39;t get it"},{"owner":{"account_id":9640511,"reputation":4079,"user_id":7154924,"accept_rate":86,"display_name":"flow2k"},"score":0,"creation_date":1553644131,"post_id":7290812,"comment_id":97459133,"body_markdown":"@KNU There are several &quot;crafty&quot; or &quot;tricky&quot; aspects, but they&#39;re subjective of course. Notice `defaultWriteObject()` and `defaultReadObject()` is always called first - and the order is the same for reading and writing; there is no &quot;reversal&quot; needed as is done in a byte stream dealt in a network transport protocol. The other aspect is that these two methods are both private, and can only be called by the JVM (and yet the serialization API exposed to the calling method remain unchanged).","body":"@KNU There are several &quot;crafty&quot; or &quot;tricky&quot; aspects, but they&#39;re subjective of course. Notice <code>defaultWriteObject()</code> and <code>defaultReadObject()</code> is always called first - and the order is the same for reading and writing; there is no &quot;reversal&quot; needed as is done in a byte stream dealt in a network transport protocol. The other aspect is that these two methods are both private, and can only be called by the JVM (and yet the serialization API exposed to the calling method remain unchanged)."}],"tags":[],"owner":{"account_id":280425,"reputation":21283,"user_id":576119,"display_name":"momo"},"comment_count":9,"down_vote_count":0,"up_vote_count":69,"is_accepted":true,"score":69,"last_activity_date":1374183086,"creation_date":1315017392,"answer_id":7290812,"question_id":7290777,"body_markdown":"Java supports [Custom Serialization](http://www.oracle.com/technetwork/articles/java/javaserial-1536170.html). Read the section Customize the Default Protocol.\r\n\r\nTo quote:\r\n\r\n&gt; There is, however, a strange yet crafty solution. By using a built-in\r\n&gt; feature of the serialization mechanism, developers can enhance the\r\n&gt; normal process by providing two methods inside their class files.\r\n&gt; Those methods are: &lt;ul&gt;\r\n&gt;     &lt;li&gt;private void writeObject(ObjectOutputStream out) throws\r\n&gt; IOException;\r\n&gt;     &lt;li&gt;private void readObject(ObjectInputStream in) throws\r\n&gt; IOException, ClassNotFoundException; &lt;/ul&gt;\r\n\r\nIn this method, what you could do is serialize it into other forms if you need to such as the ArrayList for Location that you illustrated or JSON or other data format/method and reconstruct it back on readObject()\r\n\r\nWith your example, you add the following code:\r\n\r\n&lt;pre&gt;&lt;code&gt;\r\n\r\nprivate void writeObject(ObjectOutputStream oos)\r\nthrows IOException {\r\n    // default serialization \r\n    oos.defaultWriteObject();\r\n    // write the object\r\n    List&lt;Integer&gt; loc = new ArrayList&lt;Integer&gt;();\r\n    loc.add(location.x);\r\n    loc.add(location.y);\r\n    loc.add(location.z);\r\n    loc.add(location.uid);\r\n    oos.writeObject(loc);\r\n}\r\n\r\nprivate void readObject(ObjectInputStream ois)\r\nthrows ClassNotFoundException, IOException {\r\n    // default deserialization\r\n    ois.defaultReadObject();\r\n    List&lt;Integer&gt; loc = (List&lt;Integer&gt;)ois.readObject(); // Replace with real deserialization\r\n    location = new Location(loc.get(0), loc.get(1), loc.get(2), loc.get(3));\r\n    // ... more code\r\n\r\n}\r\n\r\n&lt;/code&gt;&lt;/pre&gt;","title":"Java Custom Serialization","body":"<p>Java supports <a href=\"http://www.oracle.com/technetwork/articles/java/javaserial-1536170.html\">Custom Serialization</a>. Read the section Customize the Default Protocol.</p>\n\n<p>To quote:</p>\n\n<blockquote>\n  <p>There is, however, a strange yet crafty solution. By using a built-in\n  feature of the serialization mechanism, developers can enhance the\n  normal process by providing two methods inside their class files.\n  Those methods are: <ul>\n      <li>private void writeObject(ObjectOutputStream out) throws\n  IOException;\n      <li>private void readObject(ObjectInputStream in) throws\n  IOException, ClassNotFoundException; </ul></p>\n</blockquote>\n\n<p>In this method, what you could do is serialize it into other forms if you need to such as the ArrayList for Location that you illustrated or JSON or other data format/method and reconstruct it back on readObject()</p>\n\n<p>With your example, you add the following code:</p>\n\n<pre><code>\n\nprivate void writeObject(ObjectOutputStream oos)\nthrows IOException {\n    // default serialization \n    oos.defaultWriteObject();\n    // write the object\n    List loc = new ArrayList();\n    loc.add(location.x);\n    loc.add(location.y);\n    loc.add(location.z);\n    loc.add(location.uid);\n    oos.writeObject(loc);\n}\n\nprivate void readObject(ObjectInputStream ois)\nthrows ClassNotFoundException, IOException {\n    // default deserialization\n    ois.defaultReadObject();\n    List loc = (List)ois.readObject(); // Replace with real deserialization\n    location = new Location(loc.get(0), loc.get(1), loc.get(2), loc.get(3));\n    // ... more code\n\n}\n\n</code></pre>\n"},{"tags":[],"owner":{"account_id":61566,"reputation":68934,"user_id":183406,"accept_rate":74,"display_name":"meriton"},"comment_count":0,"down_vote_count":2,"up_vote_count":3,"is_accepted":false,"score":1,"last_activity_date":1315036591,"creation_date":1315036591,"answer_id":7291889,"question_id":7290777,"body_markdown":"If it must be Java serialization, the only way I know of is to redefine the `readObject()` and `writeObject()` in all classes having a reference to an instance of `Location` as shown in Momo&#39;s answer. Note that this will not allow you to serialize a `Location[]`, and require you to subclass all `Collection&lt;Location&gt;` appearing in your code. Moreover, it requires the fields of type `Location` to be marked transient, which will exclude their definitions from being written to the serialization stream, possible foiling the detection of incompatible class changes. \r\n\r\nA better way would be to simply override `ObjectOutputStream.writeObject`. Alas, that method is `final`. You could override `ObjectOutputStream.writeObjectOverride()` instead, but that method can not delegate the default implementation, `ObjectOutputStream.writeObject0()` because that method is `private`. Of course, you could invoke the private method using reflection, but ...\r\n\r\nTherefore, I recommend verifying your constraints. Does it have to be Java serialization? Can you really not change the definition of class `Location`?\r\n\r\nIf you have the source code to class `Location`, it&#39;s quite trivial to add `implements Serializable` and add it to your classpath. Yes, you&#39;ll have to do this again whenever you upgrade the library, but it might be better than the alternative ...\r\n\r\n","title":"Java Custom Serialization","body":"<p>If it must be Java serialization, the only way I know of is to redefine the <code>readObject()</code> and <code>writeObject()</code> in all classes having a reference to an instance of <code>Location</code> as shown in Momo's answer. Note that this will not allow you to serialize a <code>Location[]</code>, and require you to subclass all <code>Collection&lt;Location&gt;</code> appearing in your code. Moreover, it requires the fields of type <code>Location</code> to be marked transient, which will exclude their definitions from being written to the serialization stream, possible foiling the detection of incompatible class changes. </p>\n\n<p>A better way would be to simply override <code>ObjectOutputStream.writeObject</code>. Alas, that method is <code>final</code>. You could override <code>ObjectOutputStream.writeObjectOverride()</code> instead, but that method can not delegate the default implementation, <code>ObjectOutputStream.writeObject0()</code> because that method is <code>private</code>. Of course, you could invoke the private method using reflection, but ...</p>\n\n<p>Therefore, I recommend verifying your constraints. Does it have to be Java serialization? Can you really not change the definition of class <code>Location</code>?</p>\n\n<p>If you have the source code to class <code>Location</code>, it's quite trivial to add <code>implements Serializable</code> and add it to your classpath. Yes, you'll have to do this again whenever you upgrade the library, but it might be better than the alternative ...</p>\n"},{"comments":[{"owner":{"account_id":212518,"reputation":43399,"user_id":465378,"accept_rate":85,"display_name":"Alexis King"},"score":4,"creation_date":1315059794,"post_id":7292035,"comment_id":8786030,"body_markdown":"Thanks, this is a good point. However, in my actual code, I&#39;m using more than just an array, so I used `writeObject` instead. I accepted momo&#39;s answer because it was first, but for the situation given, this may be a better answer.","body":"Thanks, this is a good point. However, in my actual code, I&#39;m using more than just an array, so I used <code>writeObject</code> instead. I accepted momo&#39;s answer because it was first, but for the situation given, this may be a better answer."}],"tags":[],"owner":{"account_id":23121,"reputation":527376,"user_id":57695,"accept_rate":75,"display_name":"Peter Lawrey"},"comment_count":1,"down_vote_count":0,"up_vote_count":36,"is_accepted":false,"score":36,"last_activity_date":1315038599,"creation_date":1315038599,"answer_id":7292035,"question_id":7290777,"body_markdown":"Similar to @momo&#39;s answer but without using a List and auto-boxed int values which will make it much more compact.\r\n\r\n\r\n    private void writeObject(ObjectOutputStream oos) throws IOException {\r\n        // default serialization \r\n        oos.defaultWriteObject();\r\n        // write the object\r\n        oos.writeInt(location.x);\r\n        oos.writeInt(location.y);\r\n        oos.writeInt(location.z);\r\n        oos.writeInt(location.uid);\r\n    }\r\n    \r\n    private void readObject(ObjectInputStream ois) throws ClassNotFoundException, IOException {\r\n        // default deserialization\r\n        ois.defaultReadObject();\r\n        location = new Location(ois.readInt(), ois.readInt(), ois.readInt(), ois.readInt());\r\n        // ... more code\r\n    \r\n    }\r\n\r\n","title":"Java Custom Serialization","body":"<p>Similar to @momo's answer but without using a List and auto-boxed int values which will make it much more compact.</p>\n\n<pre><code>private void writeObject(ObjectOutputStream oos) throws IOException {\n    // default serialization \n    oos.defaultWriteObject();\n    // write the object\n    oos.writeInt(location.x);\n    oos.writeInt(location.y);\n    oos.writeInt(location.z);\n    oos.writeInt(location.uid);\n}\n\nprivate void readObject(ObjectInputStream ois) throws ClassNotFoundException, IOException {\n    // default deserialization\n    ois.defaultReadObject();\n    location = new Location(ois.readInt(), ois.readInt(), ois.readInt(), ois.readInt());\n    // ... more code\n\n}\n</code></pre>\n"}],"owner":{"account_id":212518,"reputation":43399,"user_id":465378,"accept_rate":85,"display_name":"Alexis King"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":80492,"favorite_count":0,"down_vote_count":1,"up_vote_count":68,"accepted_answer_id":7290812,"answer_count":3,"score":67,"last_activity_date":1692070513,"creation_date":1315016950,"question_id":7290777,"body_markdown":"I have an object that contains a few unserializable fields that I want to serialize. They are from a separate API that I cannot change, so making them Serializable is not an option. The main problem is the Location class. It contains four things that can be serialized that I&#39;d need, all ints. How can I use read/writeObject to create a custom serialization method that can do something like this:\r\n\r\n    // writeObject:\r\n    List&lt;Integer&gt; loc = new ArrayList&lt;Integer&gt;();\r\n    loc.add(location.x);\r\n    loc.add(location.y);\r\n    loc.add(location.z);\r\n    loc.add(location.uid);\r\n    // ... serialization code\r\n\r\n    // readObject:\r\n    List&lt;Integer&gt; loc = deserialize(); // Replace with real deserialization\r\n    location = new Location(loc.get(0), loc.get(1), loc.get(2), loc.get(3));\r\n    // ... more code\r\n\r\nHow can I do this?","title":"Java Custom Serialization","body":"<p>I have an object that contains a few unserializable fields that I want to serialize. They are from a separate API that I cannot change, so making them Serializable is not an option. The main problem is the Location class. It contains four things that can be serialized that I'd need, all ints. How can I use read/writeObject to create a custom serialization method that can do something like this:</p>\n\n<pre><code>// writeObject:\nList&lt;Integer&gt; loc = new ArrayList&lt;Integer&gt;();\nloc.add(location.x);\nloc.add(location.y);\nloc.add(location.z);\nloc.add(location.uid);\n// ... serialization code\n\n// readObject:\nList&lt;Integer&gt; loc = deserialize(); // Replace with real deserialization\nlocation = new Location(loc.get(0), loc.get(1), loc.get(2), loc.get(3));\n// ... more code\n</code></pre>\n\n<p>How can I do this?</p>\n"},{"tags":["java","java-8","java-stream","bigdecimal"],"comments":[{"owner":{"account_id":71739,"reputation":307163,"user_id":207421,"accept_rate":82,"display_name":"user207421"},"score":0,"creation_date":1692055398,"post_id":76902648,"comment_id":135571148,"body_markdown":"The relevance of [tag:rest] and [tag:spring-data] escapes me.","body":"The relevance of <a href=\"https://stackoverflow.com/questions/tagged/rest\">rest</a> and <a href=\"https://stackoverflow.com/questions/tagged/spring-data\">spring-data</a> escapes me."}],"answers":[{"tags":[],"owner":{"account_id":18271532,"reputation":24,"user_id":13302222,"display_name":"Marzen"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1692067271,"creation_date":1692067271,"answer_id":76903152,"question_id":76902648,"body_markdown":"1)if you want to sum them to a single Bigdecimal.\r\n replace the method reference `EstadoCuentaVendedorDto::getSaldoPendiente` to a lambda should work `dto-&gt;dto.getSaldoPendienteNoMoroso().add(dto.getSaldoPendienteMoroso())`\r\n\r\n2)if you want to do two sum in one groupBy. to define a class holds the two begdecimals and change the reduce \r\n```\r\nclass Holder{\r\nBigdecimal valA;\r\nBigdecimal valB;\r\n//all args constructor\r\n}\r\n\r\nCollectors.reducing(\r\n//create a empty Holder\r\nnew Holder(Bigdecimal.ZERO,Bigdecimal.ZERO),\r\n//save data from dto to holder\r\ndto-&gt;new Holder(dto.getSaldoPendienteNoMoroso(),dto.getSaldoPendienteMoroso()),\r\n// sum and return \r\n(a,b)-&gt;new Holder(a.getValA().add(b.getValA(),a.getValB().add(b.getValB)\r\n);\r\n\r\n```","title":"How to add more than two BigDecimals fields to calculate the sum in a By Collector grouping","body":"<p>1)if you want to sum them to a single Bigdecimal.\nreplace the method reference <code>EstadoCuentaVendedorDto::getSaldoPendiente</code> to a lambda should work <code>dto-&gt;dto.getSaldoPendienteNoMoroso().add(dto.getSaldoPendienteMoroso())</code></p>\n<p>2)if you want to do two sum in one groupBy. to define a class holds the two begdecimals and change the reduce</p>\n<pre><code>class Holder{\nBigdecimal valA;\nBigdecimal valB;\n//all args constructor\n}\n\nCollectors.reducing(\n//create a empty Holder\nnew Holder(Bigdecimal.ZERO,Bigdecimal.ZERO),\n//save data from dto to holder\ndto-&gt;new Holder(dto.getSaldoPendienteNoMoroso(),dto.getSaldoPendienteMoroso()),\n// sum and return \n(a,b)-&gt;new Holder(a.getValA().add(b.getValA(),a.getValB().add(b.getValB)\n);\n\n</code></pre>\n"}],"owner":{"account_id":19730530,"reputation":325,"user_id":19876130,"display_name":"jorge jesus achulla palacios"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":50,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":1,"score":0,"last_activity_date":1692067271,"creation_date":1692054799,"question_id":76902648,"body_markdown":"This is my method where I group the values ​​and perform a sum of all the outstanding balances of the client.\r\n\r\nBut I have two more values, which I need to calculate the sum:\r\n    ``` BigDecimal saldoPendienteMoroso; \r\n    BigDecimal saldoPendienteNoMoroso;``` \r\n\r\nMy problem is that, not if it can be sent in the same `groupingBy`:\r\n\r\n```public List&lt;EstadoCuentaVendedorDto&gt; agruparCliente(List&lt;EstadoCuentaVendedorDto&gt; data){\r\n        return data.stream().collect(Collectors.groupingBy(p -&gt; new TupleCliente(p.getNumeroDocumentoIdentidadCliente(),\r\n                        p.getRazonSocialCliente(),\r\n                        p.getNombreComercialCliente()\r\n                ), Collectors.reducing(BigDecimal.ZERO,\r\n                        EstadoCuentaVendedorDto::getSaldoPendiente,\r\n                        BigDecimal::add) ))\r\n\r\n                .entrySet()\r\n                .stream()\r\n\r\n                .map(p -&gt; new EstadoCuentaVendedorDto(p.getKey().getNumeroDocumentoIdentidadCliente(),\r\n                                p.getKey().getRazonSocialCliente(),\r\n                                p.getKey().getNombreComercialCliente(),\r\n                                p.getValue().setScale(2, BigDecimal.ROUND_HALF_EVEN)\r\n                        )\r\n                )\r\n                .collect(Collectors.toList());\r\n    }```","title":"How to add more than two BigDecimals fields to calculate the sum in a By Collector grouping","body":"<p>This is my method where I group the values ​​and perform a sum of all the outstanding balances of the client.</p>\n<p>But I have two more values, which I need to calculate the sum:\n<code> BigDecimal saldoPendienteMoroso;  BigDecimal saldoPendienteNoMoroso;</code></p>\n<p>My problem is that, not if it can be sent in the same <code>groupingBy</code>:</p>\n<pre><code>        return data.stream().collect(Collectors.groupingBy(p -&gt; new TupleCliente(p.getNumeroDocumentoIdentidadCliente(),\n                        p.getRazonSocialCliente(),\n                        p.getNombreComercialCliente()\n                ), Collectors.reducing(BigDecimal.ZERO,\n                        EstadoCuentaVendedorDto::getSaldoPendiente,\n                        BigDecimal::add) ))\n\n                .entrySet()\n                .stream()\n\n                .map(p -&gt; new EstadoCuentaVendedorDto(p.getKey().getNumeroDocumentoIdentidadCliente(),\n                                p.getKey().getRazonSocialCliente(),\n                                p.getKey().getNombreComercialCliente(),\n                                p.getValue().setScale(2, BigDecimal.ROUND_HALF_EVEN)\n                        )\n                )\n                .collect(Collectors.toList());\n    }```\n</code></pre>\n"},{"tags":["java","visual-studio-code","terminal"],"comments":[{"owner":{"account_id":15396644,"reputation":25775,"user_id":11107541,"display_name":"starball"},"score":0,"creation_date":1692070129,"post_id":76902826,"comment_id":135572129,"body_markdown":"the code you have shown in your question post as text does not contain any such print statements. provide a [mre]. see also https://meta.stackoverflow.com/a/285557/11107541","body":"the code you have shown in your question post as text does not contain any such print statements. provide a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>. see also <a href=\"https://meta.stackoverflow.com/a/285557/11107541\">meta.stackoverflow.com/a/285557/11107541</a>"}],"answers":[{"comments":[{"owner":{"account_id":28151801,"reputation":1,"user_id":21513195,"display_name":"qtta"},"score":1,"creation_date":1692108950,"post_id":76903151,"comment_id":135577944,"body_markdown":"I used bash and for some reason it didnt, work, so I try with powershell and it did work, thanks tho","body":"I used bash and for some reason it didnt, work, so I try with powershell and it did work, thanks tho"}],"tags":[],"owner":{"account_id":25311208,"reputation":7305,"user_id":19133920,"display_name":"JialeDu"},"comment_count":1,"down_vote_count":1,"up_vote_count":0,"is_accepted":true,"score":-1,"last_activity_date":1692067256,"creation_date":1692067256,"answer_id":76903151,"question_id":76902826,"body_markdown":"If you want clean output, add the following settings\r\n\r\n```json\r\n    &quot;code-runner.runInTerminal&quot;: false,\r\n    &quot;code-runner.clearPreviousOutput&quot;: true,\r\n    &quot;code-runner.showExecutionMessage&quot;: false,\r\n```\r\n\r\n[![enter image description here][1]][1]\r\n\r\nBut the **OUTPUT** panel cannot receive user input, as you modified `&quot;code-runner.runInTerminal&quot;: true,`, you can let *Code Runner* run the script in the terminal. In this case your configuration is fine.\r\n\r\n```json\r\n    &quot;code-runner.executorMap&quot;: {\r\n        &quot;java&quot;: &quot;clear &amp;&amp; cd $dir &amp;&amp; javac $fileName &amp;&amp; java $fileNameWithoutExt&quot;,\r\n        &quot;python&quot;: &quot;clear &amp;&amp; python -u $fileName&quot;,\r\n    },\r\n```\r\n\r\n[![enter image description here][2]][2]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/x0LL5.png\r\n  [2]: https://i.stack.imgur.com/p6h5y.png","title":"How to set Code Runner on vscode to run Java Files correctly?","body":"<p>If you want clean output, add the following settings</p>\n<pre class=\"lang-json prettyprint-override\"><code>    &quot;code-runner.runInTerminal&quot;: false,\n    &quot;code-runner.clearPreviousOutput&quot;: true,\n    &quot;code-runner.showExecutionMessage&quot;: false,\n</code></pre>\n<p><a href=\"https://i.stack.imgur.com/x0LL5.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/x0LL5.png\" alt=\"enter image description here\" /></a></p>\n<p>But the <strong>OUTPUT</strong> panel cannot receive user input, as you modified <code>&quot;code-runner.runInTerminal&quot;: true,</code>, you can let <em>Code Runner</em> run the script in the terminal. In this case your configuration is fine.</p>\n<pre class=\"lang-json prettyprint-override\"><code>    &quot;code-runner.executorMap&quot;: {\n        &quot;java&quot;: &quot;clear &amp;&amp; cd $dir &amp;&amp; javac $fileName &amp;&amp; java $fileNameWithoutExt&quot;,\n        &quot;python&quot;: &quot;clear &amp;&amp; python -u $fileName&quot;,\n    },\n</code></pre>\n<p><a href=\"https://i.stack.imgur.com/p6h5y.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/p6h5y.png\" alt=\"enter image description here\" /></a></p>\n"}],"owner":{"account_id":28151801,"reputation":1,"user_id":21513195,"display_name":"qtta"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":134,"favorite_count":0,"down_vote_count":2,"up_vote_count":0,"accepted_answer_id":76903151,"answer_count":1,"score":-2,"last_activity_date":1692067256,"creation_date":1692058815,"question_id":76902826,"body_markdown":"so I install Code Runner on Vscode because the main reason was that I wanted to hide the file path from the terminal so It&#39;s more clear what my Output is, I have a hard time to read all the output.\r\n\r\nAnd code runner have a few settings that we can change, the settings that I change were the following:\r\n\r\n* I change the Executor Map settings for Java and Python as you see below.\r\n[Java Executor Map Settings](https://i.stack.imgur.com/Rr0N1.png)\r\nBtw, the &quot;clear &amp;&amp;&quot; part it&#39;s so it hide the file path, so It&#39;s more clear and everything\r\n* Also I enabled that Code Runner runs on the terminal instead of the Output path\r\n\r\nAnd with this 2 simple settings applied the output of this code (Remember is Java):\r\n\r\n\r\n```\r\npublic class Main {\r\n    public static void main(String[] args) {\r\n        System.out.println(&quot;Hello World!&quot;);\r\n    }\r\n}\r\n```\r\n\r\nThe output is not what I expect it\r\n[Code Runner Output](https://i.stack.imgur.com/Og4Qi.png)\r\n\r\nI did the same thing with Python that looks like this:\r\n[Executor Map Settings for Python](https://i.stack.imgur.com/YN5ON.png)\r\n\r\nCode that I run:\r\n\r\n```\r\nprint(&quot;Hello World&quot;)\r\nprint(input(&quot;Name &quot;))\r\n```\r\n\r\n\r\nAnd the output looks like this:\r\n[Output](https://i.stack.imgur.com/ct4Fx.png)\r\n\r\nAs you can see the file path at start doesn&#39;t show\r\n\r\nI want the same results but with Java\r\n\r\n**If you want furder explanation let me know, I&#39;m not a native english speaker and I hope you could help me and understand me**","title":"How to set Code Runner on vscode to run Java Files correctly?","body":"<p>so I install Code Runner on Vscode because the main reason was that I wanted to hide the file path from the terminal so It's more clear what my Output is, I have a hard time to read all the output.</p>\n<p>And code runner have a few settings that we can change, the settings that I change were the following:</p>\n<ul>\n<li>I change the Executor Map settings for Java and Python as you see below.\n<a href=\"https://i.stack.imgur.com/Rr0N1.png\" rel=\"nofollow noreferrer\">Java Executor Map Settings</a>\nBtw, the &quot;clear &amp;&amp;&quot; part it's so it hide the file path, so It's more clear and everything</li>\n<li>Also I enabled that Code Runner runs on the terminal instead of the Output path</li>\n</ul>\n<p>And with this 2 simple settings applied the output of this code (Remember is Java):</p>\n<pre><code>public class Main {\n    public static void main(String[] args) {\n        System.out.println(&quot;Hello World!&quot;);\n    }\n}\n</code></pre>\n<p>The output is not what I expect it\n<a href=\"https://i.stack.imgur.com/Og4Qi.png\" rel=\"nofollow noreferrer\">Code Runner Output</a></p>\n<p>I did the same thing with Python that looks like this:\n<a href=\"https://i.stack.imgur.com/YN5ON.png\" rel=\"nofollow noreferrer\">Executor Map Settings for Python</a></p>\n<p>Code that I run:</p>\n<pre><code>print(&quot;Hello World&quot;)\nprint(input(&quot;Name &quot;))\n</code></pre>\n<p>And the output looks like this:\n<a href=\"https://i.stack.imgur.com/ct4Fx.png\" rel=\"nofollow noreferrer\">Output</a></p>\n<p>As you can see the file path at start doesn't show</p>\n<p>I want the same results but with Java</p>\n<p><strong>If you want furder explanation let me know, I'm not a native english speaker and I hope you could help me and understand me</strong></p>\n"},{"tags":["java","spring","react-native"],"comments":[{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1692078618,"post_id":76903115,"comment_id":135572702,"body_markdown":"Please edit the question to limit it to a specific problem with enough detail to identify an adequate answer.","body":"Please edit the question to limit it to a specific problem with enough detail to identify an adequate answer."}],"owner":{"account_id":29226450,"reputation":58,"user_id":22391023,"display_name":"Yusuf Khan"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":52,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1692066402,"creation_date":1692066344,"question_id":76903115,"body_markdown":"I am developing a mobile phone app, and I am currently writing the backend for it with the Spring Framework in Java. I would like to support user sign-in with Google, Facebook, etc. via OAuth2.\r\n\r\nSpring supports OAuth2, and I got it to work with the Spring web app itself. However, the Spring app is going to be strictly a REST API that deals with user creation, sign in, and data. Therefore, I have run into the issue of figuring out what to do. I want this API to confirm OAuth2 logins and correlate that to registration/sign-in, accessing data, etc.\r\n\r\nI want the user to be able to sign-in through Google, Facebook, Apple, etc. on my mobile app frontend, but where my Spring backend is able to &quot;confirm&quot; the OAuth2 authentication &amp; sign-in after doing so. Then I can use the unique identifier tied to that to create an account for them in my own database.\r\n\r\nWhat would be an ideal approach for this?","title":"How use Spring OAuth2 authentication for user registration/sign-in for a mobile backend only?","body":"<p>I am developing a mobile phone app, and I am currently writing the backend for it with the Spring Framework in Java. I would like to support user sign-in with Google, Facebook, etc. via OAuth2.</p>\n<p>Spring supports OAuth2, and I got it to work with the Spring web app itself. However, the Spring app is going to be strictly a REST API that deals with user creation, sign in, and data. Therefore, I have run into the issue of figuring out what to do. I want this API to confirm OAuth2 logins and correlate that to registration/sign-in, accessing data, etc.</p>\n<p>I want the user to be able to sign-in through Google, Facebook, Apple, etc. on my mobile app frontend, but where my Spring backend is able to &quot;confirm&quot; the OAuth2 authentication &amp; sign-in after doing so. Then I can use the unique identifier tied to that to create an account for them in my own database.</p>\n<p>What would be an ideal approach for this?</p>\n"},{"tags":["java","php","android","mysql","localhost"],"comments":[{"owner":{"account_id":9714567,"reputation":798,"user_id":7641405,"display_name":"EraftYps"},"score":0,"creation_date":1592392249,"post_id":62427285,"comment_id":110407241,"body_markdown":"Instead of logging &quot;Catch 1&quot;, you should log the exception and include the error in the question.","body":"Instead of logging &quot;Catch 1&quot;, you should log the exception and include the error in the question."},{"owner":{"account_id":16145294,"reputation":61,"user_id":11655216,"display_name":"cesr"},"score":0,"creation_date":1592392488,"post_id":62427285,"comment_id":110407361,"body_markdown":"Thats what I tried but it didnt seem to work. But I figuerd it out and posted my solution. I hope it can help someone at least.","body":"Thats what I tried but it didnt seem to work. But I figuerd it out and posted my solution. I hope it can help someone at least."},{"owner":{"account_id":6023206,"reputation":7990,"user_id":4729721,"display_name":"a_local_nobody"},"score":0,"creation_date":1592395063,"post_id":62427285,"comment_id":110408637,"body_markdown":"`But in this code it always throws the &quot;Catch 1&quot; ` printing the exception and printing `Catch 1` isn&#39;t going to help you, you have to print the exception so that you can look at it and debug it","body":"<code>But in this code it always throws the &quot;Catch 1&quot; </code> printing the exception and printing <code>Catch 1</code> isn&#39;t going to help you, you have to print the exception so that you can look at it and debug it"},{"owner":{"account_id":16145294,"reputation":61,"user_id":11655216,"display_name":"cesr"},"score":0,"creation_date":1592404525,"post_id":62427285,"comment_id":110414187,"body_markdown":"As said above I tried to print the Error but I not managed to get the Error printed!","body":"As said above I tried to print the Error but I not managed to get the Error printed!"},{"owner":{"account_id":2063361,"reputation":31416,"user_id":1839439,"accept_rate":98,"display_name":"Dharman"},"score":0,"creation_date":1592510514,"post_id":62427285,"comment_id":110460045,"body_markdown":"**Never store passwords in clear text or using MD5/SHA1!** Only store password hashes created using PHP&#39;s [`password_hash()`](https://php.net/manual/en/function.password-hash.php), which you can then verify using [`password_verify()`](https://php.net/manual/en/function.password-verify.php). Take a look at this post: [How to use password_hash](https://stackoverflow.com/q/30279321/1839439) and learn more about [bcrypt &amp; password hashing in PHP](https://stackoverflow.com/a/6337021/1839439)","body":"<b>Never store passwords in clear text or using MD5/SHA1!</b> Only store password hashes created using PHP&#39;s <a href=\"https://php.net/manual/en/function.password-hash.php\" rel=\"nofollow noreferrer\"><code>password_hash()</code></a>, which you can then verify using <a href=\"https://php.net/manual/en/function.password-verify.php\" rel=\"nofollow noreferrer\"><code>password_verify()</code></a>. Take a look at this post: <a href=\"https://stackoverflow.com/q/30279321/1839439\">How to use password_hash</a> and learn more about <a href=\"https://stackoverflow.com/a/6337021/1839439\">bcrypt &amp; password hashing in PHP</a>"},{"owner":{"account_id":72095,"reputation":18817,"user_id":208273,"display_name":"Ryan M"},"score":0,"creation_date":1592513542,"post_id":62427285,"comment_id":110461343,"body_markdown":"What did you try to print the exception? You should do `ex.printStackTrace()` and then grab it out of the logcat - it will have a different tag, so make sure you don&#39;t have any tag filters.  We won&#39;t be able to know the problem without it.","body":"What did you try to print the exception? You should do <code>ex.printStackTrace()</code> and then grab it out of the logcat - it will have a different tag, so make sure you don&#39;t have any tag filters.  We won&#39;t be able to know the problem without it."},{"owner":{"account_id":16145294,"reputation":61,"user_id":11655216,"display_name":"cesr"},"score":0,"creation_date":1592557291,"post_id":62427285,"comment_id":110473847,"body_markdown":"Thanks for the comments I will edit my question and take your guys tipps to make my application secure! And sorry for not posting the error I just didnt know how to do it.","body":"Thanks for the comments I will edit my question and take your guys tipps to make my application secure! And sorry for not posting the error I just didnt know how to do it."},{"owner":{"account_id":72095,"reputation":18817,"user_id":208273,"display_name":"Ryan M"},"score":0,"creation_date":1592565872,"post_id":62427285,"comment_id":110477776,"body_markdown":"Thanks for improving it!  I&#39;d vote to reopen, except now it&#39;s covered by https://stackoverflow.com/q/5806220/208273 and there&#39;s not a straightforward way to switch the close reason to &quot;Already has answers elsewhere.&quot;  Glad you figured it out!","body":"Thanks for improving it!  I&#39;d vote to reopen, except now it&#39;s covered by <a href=\"https://stackoverflow.com/q/5806220/208273\">stackoverflow.com/q/5806220/208273</a> and there&#39;s not a straightforward way to switch the close reason to &quot;Already has answers elsewhere.&quot;  Glad you figured it out!"}],"answers":[{"tags":[],"owner":{"account_id":16145294,"reputation":61,"user_id":11655216,"display_name":"cesr"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1592392420,"creation_date":1592392420,"answer_id":62427650,"question_id":62427285,"body_markdown":"I finally figured it out.\r\n\r\nI had the API running on a custom virtualhost, so the emulator could not connect to my custom virtualhost. I moved my API to the &quot;original&quot; localhost folder and edited my url in code.\r\nMy url now looks like this:\r\n```\r\nString url = &quot;http://10.0.2.2/test.php?username=&quot;+ username +&quot;&amp;password=&quot;+ password;\r\n```\r\nThe ip `10.0.2.2` I found out is a shortcut to your machines localhost.\r\n\r\nIf any questions occur I try my best to help!\r\n","title":"Connect my Android app trough an api to my server on my localhost","body":"<p>I finally figured it out.</p>\n\n<p>I had the API running on a custom virtualhost, so the emulator could not connect to my custom virtualhost. I moved my API to the \"original\" localhost folder and edited my url in code.\nMy url now looks like this:</p>\n\n<pre><code>String url = \"http://10.0.2.2/test.php?username=\"+ username +\"&amp;password=\"+ password;\n</code></pre>\n\n<p>The ip <code>10.0.2.2</code> I found out is a shortcut to your machines localhost.</p>\n\n<p>If any questions occur I try my best to help!</p>\n"}],"owner":{"account_id":16145294,"reputation":61,"user_id":11655216,"display_name":"cesr"},"comment_count":8,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":118,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"accepted_answer_id":62427650,"answer_count":1,"score":0,"last_activity_date":1692065191,"creation_date":1592391153,"question_id":62427285,"body_markdown":"I have a problem. I want to connect my android app to a PHP API which runs on my localhost. But in this code it always throws the &quot;Catch 1&quot; and I even tried to print the exception but it didn&#39;t work. \r\nHere is the code of my MainActivity:\r\n\r\n```\r\n    package com.example.dbtest;\r\n\r\n    import androidx.appcompat.app.AppCompatActivity;\r\n\r\n    import android.os.AsyncTask;\r\n    import android.os.Bundle;\r\n    import android.util.Log;\r\n    import android.view.View;\r\n    import android.widget.Button;\r\n    import android.widget.EditText;\r\n    import android.widget.Toast;\r\n\r\n    import org.json.JSONObject;\r\n\r\n    import java.io.BufferedInputStream;\r\n    import java.io.BufferedReader;\r\n    import java.io.Console;\r\n    import java.io.InputStream;\r\n    import java.io.InputStreamReader;\r\n    import java.net.HttpURLConnection;\r\n    import java.net.URL;\r\n\r\n    public class MainActivity extends AppCompatActivity {\r\n    private EditText etUsername;\r\n    private EditText etPassword;\r\n\r\n    @Override\r\n    protected void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        setContentView(R.layout.activity_main);\r\n\r\n        etUsername = findViewById(R.id.editTextUsername);\r\n        etPassword = findViewById(R.id.editTextPassword);\r\n    }\r\n\r\n    public void register(View view) {\r\n        Log.d(&quot;MainActivity&quot;, &quot;Button clicked&quot;);\r\n        String username = etUsername.getText().toString();\r\n        String password = etPassword.getText().toString();\r\n        String url = &quot;http://app.test/test.php?username=&quot;+ username +&quot;&amp;password=&quot;+ password;\r\n        new MyAsyncTaskgetNews().execute(url);\r\n    }\r\n\r\n    public class MyAsyncTaskgetNews extends AsyncTask&lt;String, String, String&gt; {\r\n        @Override\r\n        protected void onPreExecute() {\r\n            //before works\r\n        }\r\n\r\n        @Override\r\n        protected String  doInBackground(String... params) {\r\n            Log.d(&quot;MainActivity&quot;,&quot;In Background&quot;);\r\n            // TODO Auto-generated method stub\r\n            try {\r\n                String NewsData;\r\n                //define the url we have to connect with\r\n                URL url = new URL(params[0]);\r\n                //make connect with url and send request\r\n                HttpURLConnection urlConnection = (HttpURLConnection) url.openConnection();\r\n                //waiting for 7000ms for response\r\n                urlConnection.setConnectTimeout(7000);//set timeout to 5 seconds\r\n\r\n                try {\r\n                    //getting the response data\r\n                    InputStream in = new BufferedInputStream(urlConnection.getInputStream());\r\n                    //convert the stream to string\r\n                    NewsData = ConvertInputToStringNoChange(in);\r\n                    //send to display data\r\n                    publishProgress(NewsData);\r\n                } finally {\r\n                    //end connection\r\n                    urlConnection.disconnect();\r\n                }\r\n\r\n            }catch (Exception ex)\r\n            {\r\n                Log.d(&quot;MainActivity&quot;, &quot;Catch 1&quot;);\r\n            }\r\n\r\n            return null;\r\n        }\r\n\r\n        protected void onProgressUpdate(String... progress) {\r\n            try {\r\n                Log.d(&quot;MainActivity&quot;,&quot;In Progress&quot;);\r\n                JSONObject json = new JSONObject(progress[0]);\r\n                //display response data\r\n                Toast.makeText(getApplicationContext(),json.getString(&quot;msg&quot;),Toast.LENGTH_LONG).show();\r\n\r\n            } catch (Exception ex) {\r\n                Log.d(&quot;MainActivity&quot;,&quot;Catch 2&quot;);\r\n            }\r\n        }\r\n\r\n        protected void onPostExecute(String  result2){\r\n        }\r\n    }\r\n\r\n    // this method convert any stream to string\r\n    public static String ConvertInputToStringNoChange(InputStream inputStream) {\r\n        BufferedReader bureader=new BufferedReader( new InputStreamReader(inputStream));\r\n        String line ;\r\n        String linereultcal=&quot;&quot;;\r\n\r\n        try{\r\n            while((line=bureader.readLine())!=null) {\r\n\r\n                linereultcal += line;\r\n\r\n            }\r\n            inputStream.close();\r\n\r\n\r\n        }catch (Exception ex){}\r\n\r\n        return linereultcal;\r\n    }\r\n}\r\n```\r\n\r\nMy PHP API is very simple so don&#39;t go too hard on me! But I checked multiple times that the API works I can successfully add data to my database! I think the problem is in my android code.\r\nHere is the code of my PHP API:\r\n\r\n```\r\n&lt;?php\r\n\r\n$host = &quot;localhost&quot;;\r\n$user = &quot;root&quot;;\r\n$DBpassword = &quot;admin123&quot;;\r\n$database = &quot;demo&quot;;\r\n$connect = mysqli_connect($host,$user,$DBpassword,$database);\r\n\r\nif(mysqli_connect_errno()) \r\n{\r\n    die(&quot;Error in connection: &quot; . mysqli_connect_errno());\r\n    return;\r\n}\r\n\r\n// get the data from html request\r\n$username = $_GET[&#39;username&#39;];\r\n$password = $_GET[&#39;password&#39;];\r\n\r\n// define the query\r\n$query = &quot;INSERT INTO user(username,password) values(&#39;$username&#39;,&#39;$password&#39;);&quot;;\r\n\r\n$result = mysqli_query($connect, $query);\r\n\r\nif(!$result) \r\n{\r\n    $output = &quot;{&#39;msg&#39;:&#39;Inserting failed&#39;}&quot;;\r\n}\r\nelse \r\n{\r\n    $output = &quot;{&#39;msg&#39;:&#39;Insterting succsessfull&#39;}&quot;;\r\n}\r\n\r\nprint($output);\r\n\r\nmysqli_close($connect);\r\n?&gt;\r\n```\r\n\r\nHere is my Stacktrace as requested!\r\n```\r\n2020-06-19 11:03:21.467 3017-3663/com.example.dbtest W/System.err: java.net.ConnectException: Connection refused\r\n2020-06-19 11:03:21.518 3017-3663/com.example.dbtest W/System.err:     at java.net.PlainSocketImpl.socketConnect(Native Method)\r\n2020-06-19 11:03:21.518 3017-3663/com.example.dbtest W/System.err:     at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:334)\r\n2020-06-19 11:03:21.518 3017-3663/com.example.dbtest W/System.err:     at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:196)\r\n2020-06-19 11:03:21.518 3017-3663/com.example.dbtest W/System.err:     at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:178)\r\n2020-06-19 11:03:21.518 3017-3663/com.example.dbtest W/System.err:     at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:356)\r\n2020-06-19 11:03:21.518 3017-3663/com.example.dbtest W/System.err:     at java.net.Socket.connect(Socket.java:605)\r\n2020-06-19 11:03:21.518 3017-3663/com.example.dbtest W/System.err:     at com.android.okhttp.internal.Platform.connectSocket(Platform.java:113)\r\n2020-06-19 11:03:21.518 3017-3663/com.example.dbtest W/System.err:     at com.android.okhttp.Connection.connectSocket(Connection.java:196)\r\n2020-06-19 11:03:21.518 3017-3663/com.example.dbtest W/System.err:     at com.android.okhttp.Connection.connect(Connection.java:172)\r\n2020-06-19 11:03:21.518 3017-3663/com.example.dbtest W/System.err:     at com.android.okhttp.Connection.connectAndSetOwner(Connection.java:367)\r\n2020-06-19 11:03:21.518 3017-3663/com.example.dbtest W/System.err:     at com.android.okhttp.OkHttpClient$1.connectAndSetOwner(OkHttpClient.java:130)\r\n2020-06-19 11:03:21.518 3017-3663/com.example.dbtest W/System.err:     at com.android.okhttp.internal.http.HttpEngine.connect(HttpEngine.java:329)\r\n2020-06-19 11:03:21.519 3017-3663/com.example.dbtest W/System.err:     at com.android.okhttp.internal.http.HttpEngine.sendRequest(HttpEngine.java:246)\r\n2020-06-19 11:03:21.519 3017-3663/com.example.dbtest W/System.err:     at com.android.okhttp.internal.huc.HttpURLConnectionImpl.execute(HttpURLConnectionImpl.java:457)\r\n2020-06-19 11:03:21.519 3017-3663/com.example.dbtest W/System.err:     at com.android.okhttp.internal.huc.HttpURLConnectionImpl.getResponse(HttpURLConnectionImpl.java:405)\r\n2020-06-19 11:03:21.519 3017-3663/com.example.dbtest W/System.err:     at com.android.okhttp.internal.huc.HttpURLConnectionImpl.getInputStream(HttpURLConnectionImpl.java:243)\r\n2020-06-19 11:03:21.521 3017-3663/com.example.dbtest W/System.err:     at com.example.dbtest.MainActivity$MyAsyncTaskgetNews.doInBackground(MainActivity.java:69)\r\n2020-06-19 11:03:21.521 3017-3663/com.example.dbtest W/System.err:     at com.example.dbtest.MainActivity$MyAsyncTaskgetNews.doInBackground(MainActivity.java:44)\r\n2020-06-19 11:03:21.522 3017-3663/com.example.dbtest W/System.err:     at android.os.AsyncTask$2.call(AsyncTask.java:305)\r\n2020-06-19 11:03:21.522 3017-3663/com.example.dbtest W/System.err:     at java.util.concurrent.FutureTask.run(FutureTask.java:237)\r\n2020-06-19 11:03:21.523 3017-3663/com.example.dbtest W/System.err:     at android.os.AsyncTask$SerialExecutor$1.run(AsyncTask.java:243)\r\n2020-06-19 11:03:21.523 3017-3663/com.example.dbtest W/System.err:     at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1133)\r\n2020-06-19 11:03:21.523 3017-3663/com.example.dbtest W/System.err:     at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:607)\r\n2020-06-19 11:03:21.523 3017-3663/com.example.dbtest W/System.err:     at java.lang.Thread.run(Thread.java:761)\r\n```\r\n\r\nDoes anyone have an idea what the problem could be? Any help is appreciated.\r\n\r\nPS: Sorry for my bad English, it&#39;s not my mother tongue.\r\n\r\n\r\n","title":"Connect my Android app trough an api to my server on my localhost","body":"<p>I have a problem. I want to connect my android app to a PHP API which runs on my localhost. But in this code it always throws the &quot;Catch 1&quot; and I even tried to print the exception but it didn't work.\nHere is the code of my MainActivity:</p>\n<pre><code>    package com.example.dbtest;\n\n    import androidx.appcompat.app.AppCompatActivity;\n\n    import android.os.AsyncTask;\n    import android.os.Bundle;\n    import android.util.Log;\n    import android.view.View;\n    import android.widget.Button;\n    import android.widget.EditText;\n    import android.widget.Toast;\n\n    import org.json.JSONObject;\n\n    import java.io.BufferedInputStream;\n    import java.io.BufferedReader;\n    import java.io.Console;\n    import java.io.InputStream;\n    import java.io.InputStreamReader;\n    import java.net.HttpURLConnection;\n    import java.net.URL;\n\n    public class MainActivity extends AppCompatActivity {\n    private EditText etUsername;\n    private EditText etPassword;\n\n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.activity_main);\n\n        etUsername = findViewById(R.id.editTextUsername);\n        etPassword = findViewById(R.id.editTextPassword);\n    }\n\n    public void register(View view) {\n        Log.d(&quot;MainActivity&quot;, &quot;Button clicked&quot;);\n        String username = etUsername.getText().toString();\n        String password = etPassword.getText().toString();\n        String url = &quot;http://app.test/test.php?username=&quot;+ username +&quot;&amp;password=&quot;+ password;\n        new MyAsyncTaskgetNews().execute(url);\n    }\n\n    public class MyAsyncTaskgetNews extends AsyncTask&lt;String, String, String&gt; {\n        @Override\n        protected void onPreExecute() {\n            //before works\n        }\n\n        @Override\n        protected String  doInBackground(String... params) {\n            Log.d(&quot;MainActivity&quot;,&quot;In Background&quot;);\n            // TODO Auto-generated method stub\n            try {\n                String NewsData;\n                //define the url we have to connect with\n                URL url = new URL(params[0]);\n                //make connect with url and send request\n                HttpURLConnection urlConnection = (HttpURLConnection) url.openConnection();\n                //waiting for 7000ms for response\n                urlConnection.setConnectTimeout(7000);//set timeout to 5 seconds\n\n                try {\n                    //getting the response data\n                    InputStream in = new BufferedInputStream(urlConnection.getInputStream());\n                    //convert the stream to string\n                    NewsData = ConvertInputToStringNoChange(in);\n                    //send to display data\n                    publishProgress(NewsData);\n                } finally {\n                    //end connection\n                    urlConnection.disconnect();\n                }\n\n            }catch (Exception ex)\n            {\n                Log.d(&quot;MainActivity&quot;, &quot;Catch 1&quot;);\n            }\n\n            return null;\n        }\n\n        protected void onProgressUpdate(String... progress) {\n            try {\n                Log.d(&quot;MainActivity&quot;,&quot;In Progress&quot;);\n                JSONObject json = new JSONObject(progress[0]);\n                //display response data\n                Toast.makeText(getApplicationContext(),json.getString(&quot;msg&quot;),Toast.LENGTH_LONG).show();\n\n            } catch (Exception ex) {\n                Log.d(&quot;MainActivity&quot;,&quot;Catch 2&quot;);\n            }\n        }\n\n        protected void onPostExecute(String  result2){\n        }\n    }\n\n    // this method convert any stream to string\n    public static String ConvertInputToStringNoChange(InputStream inputStream) {\n        BufferedReader bureader=new BufferedReader( new InputStreamReader(inputStream));\n        String line ;\n        String linereultcal=&quot;&quot;;\n\n        try{\n            while((line=bureader.readLine())!=null) {\n\n                linereultcal += line;\n\n            }\n            inputStream.close();\n\n\n        }catch (Exception ex){}\n\n        return linereultcal;\n    }\n}\n</code></pre>\n<p>My PHP API is very simple so don't go too hard on me! But I checked multiple times that the API works I can successfully add data to my database! I think the problem is in my android code.\nHere is the code of my PHP API:</p>\n<pre><code>&lt;?php\n\n$host = &quot;localhost&quot;;\n$user = &quot;root&quot;;\n$DBpassword = &quot;admin123&quot;;\n$database = &quot;demo&quot;;\n$connect = mysqli_connect($host,$user,$DBpassword,$database);\n\nif(mysqli_connect_errno()) \n{\n    die(&quot;Error in connection: &quot; . mysqli_connect_errno());\n    return;\n}\n\n// get the data from html request\n$username = $_GET['username'];\n$password = $_GET['password'];\n\n// define the query\n$query = &quot;INSERT INTO user(username,password) values('$username','$password');&quot;;\n\n$result = mysqli_query($connect, $query);\n\nif(!$result) \n{\n    $output = &quot;{'msg':'Inserting failed'}&quot;;\n}\nelse \n{\n    $output = &quot;{'msg':'Insterting succsessfull'}&quot;;\n}\n\nprint($output);\n\nmysqli_close($connect);\n?&gt;\n</code></pre>\n<p>Here is my Stacktrace as requested!</p>\n<pre><code>2020-06-19 11:03:21.467 3017-3663/com.example.dbtest W/System.err: java.net.ConnectException: Connection refused\n2020-06-19 11:03:21.518 3017-3663/com.example.dbtest W/System.err:     at java.net.PlainSocketImpl.socketConnect(Native Method)\n2020-06-19 11:03:21.518 3017-3663/com.example.dbtest W/System.err:     at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:334)\n2020-06-19 11:03:21.518 3017-3663/com.example.dbtest W/System.err:     at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:196)\n2020-06-19 11:03:21.518 3017-3663/com.example.dbtest W/System.err:     at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:178)\n2020-06-19 11:03:21.518 3017-3663/com.example.dbtest W/System.err:     at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:356)\n2020-06-19 11:03:21.518 3017-3663/com.example.dbtest W/System.err:     at java.net.Socket.connect(Socket.java:605)\n2020-06-19 11:03:21.518 3017-3663/com.example.dbtest W/System.err:     at com.android.okhttp.internal.Platform.connectSocket(Platform.java:113)\n2020-06-19 11:03:21.518 3017-3663/com.example.dbtest W/System.err:     at com.android.okhttp.Connection.connectSocket(Connection.java:196)\n2020-06-19 11:03:21.518 3017-3663/com.example.dbtest W/System.err:     at com.android.okhttp.Connection.connect(Connection.java:172)\n2020-06-19 11:03:21.518 3017-3663/com.example.dbtest W/System.err:     at com.android.okhttp.Connection.connectAndSetOwner(Connection.java:367)\n2020-06-19 11:03:21.518 3017-3663/com.example.dbtest W/System.err:     at com.android.okhttp.OkHttpClient$1.connectAndSetOwner(OkHttpClient.java:130)\n2020-06-19 11:03:21.518 3017-3663/com.example.dbtest W/System.err:     at com.android.okhttp.internal.http.HttpEngine.connect(HttpEngine.java:329)\n2020-06-19 11:03:21.519 3017-3663/com.example.dbtest W/System.err:     at com.android.okhttp.internal.http.HttpEngine.sendRequest(HttpEngine.java:246)\n2020-06-19 11:03:21.519 3017-3663/com.example.dbtest W/System.err:     at com.android.okhttp.internal.huc.HttpURLConnectionImpl.execute(HttpURLConnectionImpl.java:457)\n2020-06-19 11:03:21.519 3017-3663/com.example.dbtest W/System.err:     at com.android.okhttp.internal.huc.HttpURLConnectionImpl.getResponse(HttpURLConnectionImpl.java:405)\n2020-06-19 11:03:21.519 3017-3663/com.example.dbtest W/System.err:     at com.android.okhttp.internal.huc.HttpURLConnectionImpl.getInputStream(HttpURLConnectionImpl.java:243)\n2020-06-19 11:03:21.521 3017-3663/com.example.dbtest W/System.err:     at com.example.dbtest.MainActivity$MyAsyncTaskgetNews.doInBackground(MainActivity.java:69)\n2020-06-19 11:03:21.521 3017-3663/com.example.dbtest W/System.err:     at com.example.dbtest.MainActivity$MyAsyncTaskgetNews.doInBackground(MainActivity.java:44)\n2020-06-19 11:03:21.522 3017-3663/com.example.dbtest W/System.err:     at android.os.AsyncTask$2.call(AsyncTask.java:305)\n2020-06-19 11:03:21.522 3017-3663/com.example.dbtest W/System.err:     at java.util.concurrent.FutureTask.run(FutureTask.java:237)\n2020-06-19 11:03:21.523 3017-3663/com.example.dbtest W/System.err:     at android.os.AsyncTask$SerialExecutor$1.run(AsyncTask.java:243)\n2020-06-19 11:03:21.523 3017-3663/com.example.dbtest W/System.err:     at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1133)\n2020-06-19 11:03:21.523 3017-3663/com.example.dbtest W/System.err:     at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:607)\n2020-06-19 11:03:21.523 3017-3663/com.example.dbtest W/System.err:     at java.lang.Thread.run(Thread.java:761)\n</code></pre>\n<p>Does anyone have an idea what the problem could be? Any help is appreciated.</p>\n<p>PS: Sorry for my bad English, it's not my mother tongue.</p>\n"},{"tags":["java","maven","gradle"],"comments":[{"owner":{"account_id":888714,"reputation":34077,"user_id":927493,"accept_rate":61,"display_name":"J Fabian Meier"},"score":0,"creation_date":1616776052,"post_id":66819246,"comment_id":118117687,"body_markdown":"Are you sure there were not exclusions defined in in Maven for these &quot;additional&quot; dependencies? Could you show the whole POM?","body":"Are you sure there were not exclusions defined in in Maven for these &quot;additional&quot; dependencies? Could you show the whole POM?"},{"owner":{"account_id":6847010,"reputation":1486,"user_id":5265472,"accept_rate":88,"display_name":"LunaticJape"},"score":0,"creation_date":1616780412,"post_id":66819246,"comment_id":118119495,"body_markdown":"The gradle file is generated by the maven migration plugin provided by gradle. I did not change anything manually.","body":"The gradle file is generated by the maven migration plugin provided by gradle. I did not change anything manually."},{"owner":{"account_id":888714,"reputation":34077,"user_id":927493,"accept_rate":61,"display_name":"J Fabian Meier"},"score":1,"creation_date":1616782754,"post_id":66819246,"comment_id":118120402,"body_markdown":"But maybe this migration plugin is not working 100% correctly? Couldn&#39;t you just show us the POM?","body":"But maybe this migration plugin is not working 100% correctly? Couldn&#39;t you just show us the POM?"}],"answers":[{"tags":[],"owner":{"account_id":2577405,"reputation":1258,"user_id":2234770,"accept_rate":97,"display_name":"snerd"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1692045190,"creation_date":1692045190,"answer_id":76902004,"question_id":66819246,"body_markdown":"Gradle and Maven resolve dependency conflicts differently. The same raw dependency graph can therefore produce a different, final and resolved, dependency graph when both are used with default settings. \r\n\r\n[here is the section of the gradle docs that talk about the differences between how the two systems work.][1]\r\n\r\n\r\n  [1]: https://docs.gradle.org/current/userguide/dependency_resolution.html","title":"Why did new dependencies appear after migrating from maven to gradle","body":"<p>Gradle and Maven resolve dependency conflicts differently. The same raw dependency graph can therefore produce a different, final and resolved, dependency graph when both are used with default settings.</p>\n<p><a href=\"https://docs.gradle.org/current/userguide/dependency_resolution.html\" rel=\"nofollow noreferrer\">here is the section of the gradle docs that talk about the differences between how the two systems work.</a></p>\n"},{"tags":[],"owner":{"account_id":288740,"reputation":36435,"user_id":589329,"accept_rate":40,"display_name":"Vampire"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1692062577,"creation_date":1692062577,"answer_id":76902950,"question_id":66819246,"body_markdown":"This is a bug in Gradle: https://github.com/gradle/gradle/issues/26110\r\n\r\nOptional dependencies generally are treated correctly. But it seems Gradle does not ignore the surrounding spaces in the tag content while Maven ignores them.\r\n\r\nThe question is, where you have the POM from. I cannot find the mentioned dependency in any public Maven repository. It seems like this POM was somehow hand-crafted and not built by a tool, because any automatically generated POM should not have those spaces there and would thus be treated properly.\r\n\r\nSo if this is a POM you manually created, you could easily fix it by removing those spaces.","title":"Why did new dependencies appear after migrating from maven to gradle","body":"<p>This is a bug in Gradle: <a href=\"https://github.com/gradle/gradle/issues/26110\" rel=\"nofollow noreferrer\">https://github.com/gradle/gradle/issues/26110</a></p>\n<p>Optional dependencies generally are treated correctly. But it seems Gradle does not ignore the surrounding spaces in the tag content while Maven ignores them.</p>\n<p>The question is, where you have the POM from. I cannot find the mentioned dependency in any public Maven repository. It seems like this POM was somehow hand-crafted and not built by a tool, because any automatically generated POM should not have those spaces there and would thus be treated properly.</p>\n<p>So if this is a POM you manually created, you could easily fix it by removing those spaces.</p>\n"}],"owner":{"account_id":6847010,"reputation":1486,"user_id":5265472,"accept_rate":88,"display_name":"LunaticJape"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":37,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1692062577,"creation_date":1616770451,"question_id":66819246,"body_markdown":"The app in my work is a maven application with a pom file inherited from a parent pom file. I followed the migration doc and did a scan for both maven and gradle build. But I noticed some dependency has a few additional child dependencies included in the gradle build? These dependencies are not existing and failed my build. How to fix it?\r\n\r\nHere is a comparison between the maven build report and the gradle build report.\r\n\r\n![](https://i.stack.imgur.com/2N9O9.jpg)\r\n\r\nThe top one is from gradle, the bottom one is from maven.\r\n\r\nUpdate:\r\nhere is the transitive dependencies that failed my gradle build. It seems `&lt;Optional&gt;true` does not work in gradle. \r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/RoPad.png","title":"Why did new dependencies appear after migrating from maven to gradle","body":"<p>The app in my work is a maven application with a pom file inherited from a parent pom file. I followed the migration doc and did a scan for both maven and gradle build. But I noticed some dependency has a few additional child dependencies included in the gradle build? These dependencies are not existing and failed my build. How to fix it?</p>\n<p>Here is a comparison between the maven build report and the gradle build report.</p>\n<p><img src=\"https://i.stack.imgur.com/2N9O9.jpg\" alt=\"\" /></p>\n<p>The top one is from gradle, the bottom one is from maven.</p>\n<p>Update:\nhere is the transitive dependencies that failed my gradle build. It seems <code>&lt;Optional&gt;true</code> does not work in gradle.\n<a href=\"https://i.stack.imgur.com/RoPad.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/RoPad.png\" alt=\"enter image description here\" /></a></p>\n"},{"tags":["java","jpa"],"comments":[{"owner":{"account_id":2889245,"reputation":3533,"user_id":2478398,"display_name":"BeUndead"},"score":0,"creation_date":1559923921,"post_id":56497893,"comment_id":99584753,"body_markdown":"Have you tried changing the return type of the method in your `flowRepo` interface to `Character`?  `char` is a primitive, and consequently `null` is _not_ a valid value for it.  `Character` is the respective wrapper class which _is_ a non-primitive `Object`, so `null` is fine there.","body":"Have you tried changing the return type of the method in your <code>flowRepo</code> interface to <code>Character</code>?  <code>char</code> is a primitive, and consequently <code>null</code> is <i>not</i> a valid value for it.  <code>Character</code> is the respective wrapper class which <i>is</i> a non-primitive <code>Object</code>, so <code>null</code> is fine there."},{"owner":{"account_id":15991795,"reputation":71,"user_id":11540767,"display_name":"Daya"},"score":0,"creation_date":1559935476,"post_id":56497893,"comment_id":99589503,"body_markdown":"Hi, I tried it just now and getting the null pointer exception now if (Character.toStringFl.findLatestSts(xrefId)) == null)\n\t\t\t\t\t{\n\t\t\t\t\t\t stepSts = &#39;N&#39;;\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t{\n\t\t\t\t\t\tstepSts = Fl.findLatestSts(xrefId);\n\t\t\t\t\t}  2019-06-07 15:23:24.808 ERROR 205008 --- [nio-8080-exec-3] o.a.c.c.C.[.[.[/].[dispatcherServlet]    : Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception [Request processing failed; nested exception is java.lang.NullPointerException] with root cause\n\njava.lang.NullPointerException: null","body":"Hi, I tried it just now and getting the null pointer exception now if (Character.toStringFl.findLatestSts(xrefId)) == null) \t\t\t\t\t{ \t\t\t\t\t\t stepSts = &#39;N&#39;; \t\t\t\t\t} \t\t\t\t\telse \t\t\t\t\t{ \t\t\t\t\t\tstepSts = Fl.findLatestSts(xrefId); \t\t\t\t\t}  2019-06-07 15:23:24.808 ERROR 205008 --- [nio-8080-exec-3] o.a.c.c.C.[.[.[/].[dispatcherServlet]    : Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception [Request processing failed; nested exception is java.lang.NullPointerException] with root cause  java.lang.NullPointerException: null"}],"answers":[{"comments":[{"owner":{"account_id":8928886,"reputation":1066,"user_id":9719337,"display_name":"Dred"},"score":0,"creation_date":1601453646,"post_id":59388476,"comment_id":113409760,"body_markdown":"@Daya I think, that answer is a Answer of a question. Maybe should accept it?","body":"@Daya I think, that answer is a Answer of a question. Maybe should accept it?"}],"tags":[],"owner":{"account_id":8928886,"reputation":1066,"user_id":9719337,"display_name":"Dred"},"comment_count":1,"down_vote_count":0,"up_vote_count":20,"is_accepted":false,"score":20,"last_activity_date":1576659282,"creation_date":1576659282,"answer_id":59388476,"question_id":56497893,"body_markdown":"Try to use `Character` instead of `char`. There is situation when your query return NULL and as you know primitive types in Java can not save Null inside. So, use Object of that type like `int -&gt; Integer, float -&gt; Float, char -&gt; Character`.\r\n\r\nOr, If you really need to work with primitive, put your method inside try-catch block, to handle that issue.","title":"org.springframework.aop.AopInvocationException: Null return value from advice does not match primitive return type for: public abstract char","body":"<p>Try to use <code>Character</code> instead of <code>char</code>. There is situation when your query return NULL and as you know primitive types in Java can not save Null inside. So, use Object of that type like <code>int -&gt; Integer, float -&gt; Float, char -&gt; Character</code>.</p>\n\n<p>Or, If you really need to work with primitive, put your method inside try-catch block, to handle that issue.</p>\n"},{"tags":[],"owner":{"account_id":20797851,"reputation":59,"user_id":15274531,"display_name":"lf.melo"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1692062347,"creation_date":1692062347,"answer_id":76902943,"question_id":56497893,"body_markdown":"Make sure you used the correct name for the repository, in my case I needed to fetch a user by email:\r\n\r\nWrong:\r\n[![enter image description here][1]][1]\r\n\r\n\r\nCorret:\r\n[![enter image description here][2]][2]\r\n\r\n\r\n**JPA could not interpret the boolean query using &quot;find&quot; but using &quot;exists&quot;**\r\n\r\n  [1]: https://i.stack.imgur.com/lqqu8.png\r\n  [2]: https://i.stack.imgur.com/jRkdw.png","title":"org.springframework.aop.AopInvocationException: Null return value from advice does not match primitive return type for: public abstract char","body":"<p>Make sure you used the correct name for the repository, in my case I needed to fetch a user by email:</p>\n<p>Wrong:\n<a href=\"https://i.stack.imgur.com/lqqu8.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/lqqu8.png\" alt=\"enter image description here\" /></a></p>\n<p>Corret:\n<a href=\"https://i.stack.imgur.com/jRkdw.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/jRkdw.png\" alt=\"enter image description here\" /></a></p>\n<p><strong>JPA could not interpret the boolean query using &quot;find&quot; but using &quot;exists&quot;</strong></p>\n"}],"owner":{"account_id":15991795,"reputation":71,"user_id":11540767,"display_name":"Daya"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":27470,"favorite_count":0,"down_vote_count":0,"up_vote_count":7,"answer_count":2,"score":7,"last_activity_date":1692062347,"creation_date":1559923676,"question_id":56497893,"body_markdown":"I have a table defined with column char and the repo I have defined a \r\nquery to return that column. Now when the data in the db table is null \r\nfor the specific condition its giving me the error: \r\n\r\n    org.springframework.aop.AopInvocationException: Null return value from \r\n    advice does not match primitive return type for: public abstract char\r\n\r\nBelow is the code snippet:\r\n```    \r\n    import org.springframework.data.jpa.repository.JpaRepository;\r\n    import org.springframework.data.jpa.repository.Query;\r\n    import org.springframework.data.repository.query.Param;\r\n    \r\n    import com.marriott.sup.beans.StepWorkflow;\r\n    \r\n    public interface flowRepo extends JpaRepository&lt;StepWorkflow, Long&gt; {\r\n    \t\r\n    \t@Query(\r\n    \t\t\tvalue = &quot;SELECT s.status FROM flow s WHERE s.XREFID \r\n     = :xrefId order by &quot;\r\n    \t\t\t+ &quot;s.Datestarted desc limit 1&quot;,\r\n    \t\t\tnativeQuery = true)\r\n        public char findLatestSts(@Param(&quot;xrefId&quot;) Long xrefId);\r\n    \r\n    }\r\n    \r\n    public class flowService {\r\n    \t\r\n    \tpublic static char INPROGRESS = &#39;P&#39;;\r\n    \tpublic static char SUCCESS = &#39;S&#39;;\r\n    \tpublic static char ERROR = &#39;E&#39;;\r\n    \tpublic static char NOTSTARTED = &#39;N&#39;;\r\n    \r\n    \t@Autowired\r\n    \tprivate flowRepo Fl;\r\n    \r\n        /*some basic code in between and then i am trying to call the \r\n      function \r\n      defined in repo and assign it to a character variable\r\n    */\r\n    \r\n    Sts = Fl.findLatestSts(xrefId);\r\n    }\r\n```    \r\nI need this to not throw the error and instead assign some default value in case null.  Need help to fix the issue on how can I handle this.\r\n```\r\norg.springframework.aop.AopInvocationException: Null return value from advice does not match primitive return type for: public abstract char org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:226) at com.sun.proxy.$Proxy108.findLatestSts(Unknown Source) at com.marriott.sup.service.StepWorkflowService.getserverStepstatus(StepWorkflowService.java:79) at com.marriott.sup.web.SampleRestController.getServerStepStatus(SampleRestController.java:91) at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source) at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source) at java.lang.reflect.Method.invoke(Unknown Source) at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:189) at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:138) at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:102) at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:892) at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:797) at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1038) at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:942) at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1005) at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:897)\r\n```","title":"org.springframework.aop.AopInvocationException: Null return value from advice does not match primitive return type for: public abstract char","body":"<p>I have a table defined with column char and the repo I have defined a \nquery to return that column. Now when the data in the db table is null \nfor the specific condition its giving me the error: </p>\n\n<pre><code>org.springframework.aop.AopInvocationException: Null return value from \nadvice does not match primitive return type for: public abstract char\n</code></pre>\n\n<p>Below is the code snippet:</p>\n\n<pre><code>    import org.springframework.data.jpa.repository.JpaRepository;\n    import org.springframework.data.jpa.repository.Query;\n    import org.springframework.data.repository.query.Param;\n\n    import com.marriott.sup.beans.StepWorkflow;\n\n    public interface flowRepo extends JpaRepository&lt;StepWorkflow, Long&gt; {\n\n        @Query(\n                value = \"SELECT s.status FROM flow s WHERE s.XREFID \n     = :xrefId order by \"\n                + \"s.Datestarted desc limit 1\",\n                nativeQuery = true)\n        public char findLatestSts(@Param(\"xrefId\") Long xrefId);\n\n    }\n\n    public class flowService {\n\n        public static char INPROGRESS = 'P';\n        public static char SUCCESS = 'S';\n        public static char ERROR = 'E';\n        public static char NOTSTARTED = 'N';\n\n        @Autowired\n        private flowRepo Fl;\n\n        /*some basic code in between and then i am trying to call the \n      function \n      defined in repo and assign it to a character variable\n    */\n\n    Sts = Fl.findLatestSts(xrefId);\n    }\n</code></pre>\n\n<p>I need this to not throw the error and instead assign some default value in case null.  Need help to fix the issue on how can I handle this.</p>\n\n<pre><code>org.springframework.aop.AopInvocationException: Null return value from advice does not match primitive return type for: public abstract char org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:226) at com.sun.proxy.$Proxy108.findLatestSts(Unknown Source) at com.marriott.sup.service.StepWorkflowService.getserverStepstatus(StepWorkflowService.java:79) at com.marriott.sup.web.SampleRestController.getServerStepStatus(SampleRestController.java:91) at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source) at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source) at java.lang.reflect.Method.invoke(Unknown Source) at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:189) at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:138) at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:102) at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:892) at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:797) at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1038) at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:942) at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1005) at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:897)\n</code></pre>\n"},{"tags":["java","annotations","aspectj"],"comments":[{"owner":{"account_id":1087271,"reputation":64101,"user_id":1082681,"accept_rate":90,"display_name":"kriegaex"},"score":0,"creation_date":1691979075,"post_id":76881429,"comment_id":135559226,"body_markdown":"Welcome to SO. Interesting question. Next time, please provide an [MCVE](https://stackoverflow.com/help/mcve) like I did in my answer. It took me some time to recreate your situation with the information you provided. BTW, your aspect declares `OneToOne`, while your error message says that you are trying to declare `OneToMany`. That does not make things any easier either.","body":"Welcome to SO. Interesting question. Next time, please provide an <a href=\"https://stackoverflow.com/help/mcve\">MCVE</a> like I did in my answer. It took me some time to recreate your situation with the information you provided. BTW, your aspect declares <code>OneToOne</code>, while your error message says that you are trying to declare <code>OneToMany</code>. That does not make things any easier either."}],"answers":[{"tags":[],"owner":{"account_id":1087271,"reputation":64101,"user_id":1082681,"accept_rate":90,"display_name":"kriegaex"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1692062016,"creation_date":1691978679,"answer_id":76895913,"question_id":76881429,"body_markdown":"You got the syntax slightly wrong:\r\n\r\n```java\r\ndeclare @field :\r\n  (@javax.persistence.OneToOne *) foo.bar.MyEntity : \r\n  @org.hibernate.annotations.Cache(usage = org.hibernate.annotations.CacheConcurrencyStrategy.READ_ONLY);\r\n```\r\n\r\nhas a problem: The parenthesised `(@javax.persistence.OneToOne *)` means to target a return type that is annotated. You ought to omit the parentheses, then the annotation will apply to the field definition as such. Here is a reproducer in plain Java + AspectJ with faked annotations:\r\n\r\n```java\r\npackage de.scrum_master.app;\r\n\r\npublic enum CacheConcurrencyStrategy {\r\n  NONE, NONSTRICT_READ_WRITE, READ_ONLY, READ_WRITE, TRANSACTIONAL\r\n}\r\n```\r\n\r\n```java\r\npackage de.scrum_master.app;\r\n\r\nimport static java.lang.annotation.ElementType.FIELD;\r\nimport static java.lang.annotation.RetentionPolicy.RUNTIME;\r\n\r\nimport java.lang.annotation.Retention;\r\nimport java.lang.annotation.Target;\r\n\r\n@Retention(RUNTIME)\r\n@Target(FIELD)\r\npublic @interface Cache {\r\n  CacheConcurrencyStrategy usage();\r\n}\r\n```\r\n\r\n```java\r\npackage de.scrum_master.app;\r\n\r\nimport static java.lang.annotation.ElementType.FIELD;\r\nimport static java.lang.annotation.RetentionPolicy.RUNTIME;\r\n\r\nimport java.lang.annotation.Retention;\r\nimport java.lang.annotation.Target;\r\n\r\n@Retention(RUNTIME)\r\n@Target(FIELD)\r\npublic @interface OneToMany {}\r\n```\r\n\r\n```java\r\npackage de.scrum_master.app;\r\n\r\npublic class Application {\r\n  @OneToMany\r\n  int id;\r\n  String name;\r\n\r\n  public static void main(String[] args) throws NoSuchFieldException, SecurityException {\r\n    System.out.println(\r\n      Application.class\r\n        .getDeclaredField(&quot;id&quot;)\r\n        .getDeclaredAnnotation(Cache.class)\r\n    );\r\n  }\r\n}\r\n```\r\n\r\nRunning this without any aspects will print `null` on the console. Now add this aspect:\r\n\r\n```java\r\npackage de.scrum_master.aspect;\r\n\r\nimport de.scrum_master.app.Cache;\r\nimport de.scrum_master.app.OneToMany;\r\nimport de.scrum_master.app.CacheConcurrencyStrategy;\r\nimport de.scrum_master.app.Application;\r\n\r\npublic aspect FieldAnnotationAspect {\r\n  declare @field :\r\n    @OneToMany * Application.* : @Cache(usage = CacheConcurrencyStrategy.READ_ONLY);\r\n}\r\n```\r\n\r\nThe console log now says:\r\n\r\n```none\r\n@de.scrum_master.app.Cache(usage=READ_ONLY)\r\n```\r\n\r\nIt works, q.e.d. &#128521;","title":"Add a new annotation to a member annotated itself with a specific annotation","body":"<p>You got the syntax slightly wrong:</p>\n<pre class=\"lang-java prettyprint-override\"><code>declare @field :\n  (@javax.persistence.OneToOne *) foo.bar.MyEntity : \n  @org.hibernate.annotations.Cache(usage = org.hibernate.annotations.CacheConcurrencyStrategy.READ_ONLY);\n</code></pre>\n<p>has a problem: The parenthesised <code>(@javax.persistence.OneToOne *)</code> means to target a return type that is annotated. You ought to omit the parentheses, then the annotation will apply to the field definition as such. Here is a reproducer in plain Java + AspectJ with faked annotations:</p>\n<pre class=\"lang-java prettyprint-override\"><code>package de.scrum_master.app;\n\npublic enum CacheConcurrencyStrategy {\n  NONE, NONSTRICT_READ_WRITE, READ_ONLY, READ_WRITE, TRANSACTIONAL\n}\n</code></pre>\n<pre class=\"lang-java prettyprint-override\"><code>package de.scrum_master.app;\n\nimport static java.lang.annotation.ElementType.FIELD;\nimport static java.lang.annotation.RetentionPolicy.RUNTIME;\n\nimport java.lang.annotation.Retention;\nimport java.lang.annotation.Target;\n\n@Retention(RUNTIME)\n@Target(FIELD)\npublic @interface Cache {\n  CacheConcurrencyStrategy usage();\n}\n</code></pre>\n<pre class=\"lang-java prettyprint-override\"><code>package de.scrum_master.app;\n\nimport static java.lang.annotation.ElementType.FIELD;\nimport static java.lang.annotation.RetentionPolicy.RUNTIME;\n\nimport java.lang.annotation.Retention;\nimport java.lang.annotation.Target;\n\n@Retention(RUNTIME)\n@Target(FIELD)\npublic @interface OneToMany {}\n</code></pre>\n<pre class=\"lang-java prettyprint-override\"><code>package de.scrum_master.app;\n\npublic class Application {\n  @OneToMany\n  int id;\n  String name;\n\n  public static void main(String[] args) throws NoSuchFieldException, SecurityException {\n    System.out.println(\n      Application.class\n        .getDeclaredField(&quot;id&quot;)\n        .getDeclaredAnnotation(Cache.class)\n    );\n  }\n}\n</code></pre>\n<p>Running this without any aspects will print <code>null</code> on the console. Now add this aspect:</p>\n<pre class=\"lang-java prettyprint-override\"><code>package de.scrum_master.aspect;\n\nimport de.scrum_master.app.Cache;\nimport de.scrum_master.app.OneToMany;\nimport de.scrum_master.app.CacheConcurrencyStrategy;\nimport de.scrum_master.app.Application;\n\npublic aspect FieldAnnotationAspect {\n  declare @field :\n    @OneToMany * Application.* : @Cache(usage = CacheConcurrencyStrategy.READ_ONLY);\n}\n</code></pre>\n<p>The console log now says:</p>\n<pre class=\"lang-none prettyprint-override\"><code>@de.scrum_master.app.Cache(usage=READ_ONLY)\n</code></pre>\n<p>It works, q.e.d. 😉</p>\n"}],"owner":{"account_id":29204341,"reputation":1,"user_id":22373766,"display_name":"kartoffel"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":30,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1692062016,"creation_date":1691738249,"question_id":76881429,"body_markdown":"I&#39;d like to add an annotation to every member of a class, where the member itself is annotated with a specific annotation. I&#39;ll have to extend third-party code, to make it ready for Hibernate Second Level Cache - in this case, to add i.e. `@org.hibernate.annotations.Cache(usage = org.hibernate.annotations.CacheConcurrencyStrategy.READ_ONLY)` to the specific fields\r\n\r\nI&#39;m using https://mvnrepository.com/artifact/org.aspectj/aspectjrt/1.9.9.1 and https://mvnrepository.com/artifact/org.aspectj/aspectjtools/1.9.9.1\r\n\r\n```\r\npublic aspect EntityAspect {        \r\n    declare @field : (@javax.persistence.OneToOne *) foo.bar.MyEntity : @org.hibernate.annotations.Cache(usage = org.hibernate.annotations.CacheConcurrencyStrategy.READ_ONLY);\r\n}\r\n```\r\n\r\nThe goal: Annotate every member of `foo.bar.MyEntity`, which has the `@OneToOne` annotation, additionally with `@Cache`.\r\n\r\nThe pattern seems to work, but AspectJ tells me\r\n\r\n```none\r\n[java]      [iajc] warning at declare @field : (@javax.persistence.OneToMany *) foo.bar.MyEntity : @org.hibernate.annotations.Cache(usage = org.hibernate.annotations.CacheConcurrencyStrategy.READ_ONLY);\r\n  [java]      [iajc]                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\r\n  [java]      [iajc] [..]\\EntityAspect.aj:5:0::0 does not match because annotation @javax.persistence.OneToMany has @Target{ElementType.FIELD,ElementType.METHOD} [Xlint:unmatchedTargetKind]\r\n```\r\n\r\nYes, the `@OneToMany` annotation has the `@Target` annotation - do I also have to declare that? And how?","title":"Add a new annotation to a member annotated itself with a specific annotation","body":"<p>I'd like to add an annotation to every member of a class, where the member itself is annotated with a specific annotation. I'll have to extend third-party code, to make it ready for Hibernate Second Level Cache - in this case, to add i.e. <code>@org.hibernate.annotations.Cache(usage = org.hibernate.annotations.CacheConcurrencyStrategy.READ_ONLY)</code> to the specific fields</p>\n<p>I'm using <a href=\"https://mvnrepository.com/artifact/org.aspectj/aspectjrt/1.9.9.1\" rel=\"nofollow noreferrer\">https://mvnrepository.com/artifact/org.aspectj/aspectjrt/1.9.9.1</a> and <a href=\"https://mvnrepository.com/artifact/org.aspectj/aspectjtools/1.9.9.1\" rel=\"nofollow noreferrer\">https://mvnrepository.com/artifact/org.aspectj/aspectjtools/1.9.9.1</a></p>\n<pre><code>public aspect EntityAspect {        \n    declare @field : (@javax.persistence.OneToOne *) foo.bar.MyEntity : @org.hibernate.annotations.Cache(usage = org.hibernate.annotations.CacheConcurrencyStrategy.READ_ONLY);\n}\n</code></pre>\n<p>The goal: Annotate every member of <code>foo.bar.MyEntity</code>, which has the <code>@OneToOne</code> annotation, additionally with <code>@Cache</code>.</p>\n<p>The pattern seems to work, but AspectJ tells me</p>\n<pre class=\"lang-none prettyprint-override\"><code>[java]      [iajc] warning at declare @field : (@javax.persistence.OneToMany *) foo.bar.MyEntity : @org.hibernate.annotations.Cache(usage = org.hibernate.annotations.CacheConcurrencyStrategy.READ_ONLY);\n  [java]      [iajc]                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  [java]      [iajc] [..]\\EntityAspect.aj:5:0::0 does not match because annotation @javax.persistence.OneToMany has @Target{ElementType.FIELD,ElementType.METHOD} [Xlint:unmatchedTargetKind]\n</code></pre>\n<p>Yes, the <code>@OneToMany</code> annotation has the <code>@Target</code> annotation - do I also have to declare that? And how?</p>\n"},{"tags":["java","spring-webflux","project-reactor","spring-webclient","publisher"],"comments":[{"owner":{"account_id":78088,"reputation":35600,"user_id":222467,"accept_rate":67,"display_name":"Igor Artamonov"},"score":0,"creation_date":1692038388,"post_id":76901098,"comment_id":135568941,"body_markdown":"Reactor doesn&#39;t provide any caching layer, but you can use any existing library or a plain `Map` for caching, then check for an existing value before making the call. And put one on `doOnNext`.","body":"Reactor doesn&#39;t provide any caching layer, but you can use any existing library or a plain <code>Map</code> for caching, then check for an existing value before making the call. And put one on <code>doOnNext</code>."},{"owner":{"account_id":1253038,"reputation":1357,"user_id":1213050,"accept_rate":50,"display_name":"Jack Johnson"},"score":0,"creation_date":1692039140,"post_id":76901098,"comment_id":135569033,"body_markdown":"Thanks @IgorArtamonov! Yes my original plan was to use a hashmap... something like: `HashMap&lt;String, Mono&lt;String&gt;&gt; cache = new HashMap&lt;String, Mono&lt;String&gt;&gt;();` where the key would be the fileName and then the value would be the Mono&lt;String&gt; but i&#39;m having problems figuring out how to get the response from the webClient call... it seems like it just keeps making the requests to the extensionUrl until all files are iterated... then they all return &quot;finished retrieving&quot; back to back to back.  That defeats the purpose of my cache","body":"Thanks @IgorArtamonov! Yes my original plan was to use a hashmap... something like: <code>HashMap&lt;String, Mono&lt;String&gt;&gt; cache = new HashMap&lt;String, Mono&lt;String&gt;&gt;();</code> where the key would be the fileName and then the value would be the Mono&lt;String&gt; but i&#39;m having problems figuring out how to get the response from the webClient call... it seems like it just keeps making the requests to the extensionUrl until all files are iterated... then they all return &quot;finished retrieving&quot; back to back to back.  That defeats the purpose of my cache"},{"owner":{"account_id":3273937,"reputation":114870,"user_id":2756547,"accept_rate":75,"display_name":"Artem Bilan"},"score":0,"creation_date":1692043898,"post_id":76901098,"comment_id":135569803,"body_markdown":"I think this article answers your question: https://www.baeldung.com/spring-webflux-cacheable","body":"I think this article answers your question: <a href=\"https://www.baeldung.com/spring-webflux-cacheable\" rel=\"nofollow noreferrer\">baeldung.com/spring-webflux-cacheable</a>"},{"owner":{"account_id":12455565,"reputation":5317,"user_id":9068895,"display_name":"Alex"},"score":0,"creation_date":1692139009,"post_id":76901098,"comment_id":135583020,"body_markdown":"here are some hints https://stackoverflow.com/a/71533892/9068895","body":"here are some hints <a href=\"https://stackoverflow.com/a/71533892/9068895\">stackoverflow.com/a/71533892/9068895</a>"}],"answers":[{"comments":[{"owner":{"account_id":1253038,"reputation":1357,"user_id":1213050,"accept_rate":50,"display_name":"Jack Johnson"},"score":0,"creation_date":1692221422,"post_id":76902472,"comment_id":135595959,"body_markdown":"I think this works perfectly.  Thank you!","body":"I think this works perfectly.  Thank you!"}],"tags":[],"owner":{"account_id":78088,"reputation":35600,"user_id":222467,"accept_rate":67,"display_name":"Igor Artamonov"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1692061365,"creation_date":1692051894,"answer_id":76902472,"question_id":76901098,"body_markdown":"Reactor doesn&#39;t provide any caching layer, but you can use any existing library or a plain `Map` for caching, then check for an existing value before making the call. And put one on `doOnNext`.\r\n\r\nCaching an original `Mono` itself may not work because it depends on actual implementation and in many cases a new subscription to it will cause a new request (but see below).\r\n\r\nSo the simplest implementation would be:\r\n\r\n    private Map&lt;String, String&gt; cache = new ConcurrentHashMap();\r\n\r\n    public Mono&lt;String&gt; getExtension(String fileName) {\r\n       String existing = cache.get(fileName);\r\n       if (existing != null) {\r\n           return Mono.just(existing);\r\n       }\r\n   \r\n       return webClient.get().uri(extensionUrl + &quot;?file=&quot; + fileName).retrieve()\r\n           .bodyToMono(String[].class)\r\n           .map(....)\r\n           .doOnNext(value -&gt; cache.put(fileName, value));\r\n    }\r\n\r\nIf you want to avoid duplicate in-flight requests as well, then it makes sense to cache the `Mono`. But in this case I would suggest to ether use it with `.cache()`, or even use a `Sinks.One` as an intermediary.\r\n\r\nThe simplified code would look like:\r\n\r\n    private Map&lt;String, Mono&lt;String&gt;&gt; cache = new ConcurrentHashMap();\r\n\r\n    public Mono&lt;String&gt; getExtension(String fileName) {\r\n       Mono&lt;String&gt; existing = cache.get(fileName);\r\n       if (existing != null) {\r\n           return existing;\r\n       }\r\n   \r\n       Mono&lt;String&gt; requested = webClient.get().uri(extensionUrl + &quot;?file=&quot; + fileName).retrieve()\r\n           .bodyToMono(String[].class)\r\n           .map(....)\r\n           // you probably don&#39;t want to keep failed requests in cache\r\n           .doOnError(t -&gt; cache.remove(fileName))\r\n           .cache();\r\n       cache.put(fileName, requested);\r\n\r\n       return requested;\r\n    }","title":"Is there a way to cache responses using Mono from a WebClient call?","body":"<p>Reactor doesn't provide any caching layer, but you can use any existing library or a plain <code>Map</code> for caching, then check for an existing value before making the call. And put one on <code>doOnNext</code>.</p>\n<p>Caching an original <code>Mono</code> itself may not work because it depends on actual implementation and in many cases a new subscription to it will cause a new request (but see below).</p>\n<p>So the simplest implementation would be:</p>\n<pre><code>private Map&lt;String, String&gt; cache = new ConcurrentHashMap();\n\npublic Mono&lt;String&gt; getExtension(String fileName) {\n   String existing = cache.get(fileName);\n   if (existing != null) {\n       return Mono.just(existing);\n   }\n\n   return webClient.get().uri(extensionUrl + &quot;?file=&quot; + fileName).retrieve()\n       .bodyToMono(String[].class)\n       .map(....)\n       .doOnNext(value -&gt; cache.put(fileName, value));\n}\n</code></pre>\n<p>If you want to avoid duplicate in-flight requests as well, then it makes sense to cache the <code>Mono</code>. But in this case I would suggest to ether use it with <code>.cache()</code>, or even use a <code>Sinks.One</code> as an intermediary.</p>\n<p>The simplified code would look like:</p>\n<pre><code>private Map&lt;String, Mono&lt;String&gt;&gt; cache = new ConcurrentHashMap();\n\npublic Mono&lt;String&gt; getExtension(String fileName) {\n   Mono&lt;String&gt; existing = cache.get(fileName);\n   if (existing != null) {\n       return existing;\n   }\n\n   Mono&lt;String&gt; requested = webClient.get().uri(extensionUrl + &quot;?file=&quot; + fileName).retrieve()\n       .bodyToMono(String[].class)\n       .map(....)\n       // you probably don't want to keep failed requests in cache\n       .doOnError(t -&gt; cache.remove(fileName))\n       .cache();\n   cache.put(fileName, requested);\n\n   return requested;\n}\n</code></pre>\n"}],"owner":{"account_id":1253038,"reputation":1357,"user_id":1213050,"accept_rate":50,"display_name":"Jack Johnson"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":110,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"accepted_answer_id":76902472,"answer_count":1,"score":0,"last_activity_date":1692061365,"creation_date":1692034834,"question_id":76901098,"body_markdown":"Is there a way to cache the response from a call if the inputs are the same?  For example, if the fileName is the same, I don&#39;t want to make the request out with my webClient again since it takes a while for the response.\r\n    \r\n    Flux.fromIterable(files).flatMap(\r\n      file -&gt; {\r\n         Mono&lt;String&gt; extension = getExtension(file.getName());\r\n       });\r\n\r\n    public Mono&lt;String&gt; getExtension(String fileName) {\r\n      return webClient.get().uri(extensionUrl + &quot;?file=&quot; + fileName).retrieve()\r\n        .bodyToMono(String[].class)\r\n        .map(\r\n          extensions -&gt; {\r\n            System.out.println(&quot;finished retrieving&quot;);\r\n            return extensions[0];\r\n          });\r\n    }","title":"Is there a way to cache responses using Mono from a WebClient call?","body":"<p>Is there a way to cache the response from a call if the inputs are the same?  For example, if the fileName is the same, I don't want to make the request out with my webClient again since it takes a while for the response.</p>\n<pre><code>Flux.fromIterable(files).flatMap(\n  file -&gt; {\n     Mono&lt;String&gt; extension = getExtension(file.getName());\n   });\n\npublic Mono&lt;String&gt; getExtension(String fileName) {\n  return webClient.get().uri(extensionUrl + &quot;?file=&quot; + fileName).retrieve()\n    .bodyToMono(String[].class)\n    .map(\n      extensions -&gt; {\n        System.out.println(&quot;finished retrieving&quot;);\n        return extensions[0];\n      });\n}\n</code></pre>\n"},{"tags":["java","spring","eclipse","maven","intellij-idea"],"comments":[{"owner":{"account_id":36734,"reputation":392137,"user_id":104891,"display_name":"CrazyCoder"},"score":1,"creation_date":1692044955,"post_id":76901912,"comment_id":135569961,"body_markdown":"Change the working directory in the IntelliJ IDEA run configuration settings.","body":"Change the working directory in the IntelliJ IDEA run configuration settings."}],"answers":[{"tags":[],"owner":{"account_id":36734,"reputation":392137,"user_id":104891,"display_name":"CrazyCoder"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1692060833,"creation_date":1692060833,"answer_id":76902903,"question_id":76901912,"body_markdown":"File operations work relative to the current working directory, which you can set in IntelliJ IDEA Run configuration.\r\n\r\nExample for Spring Boot:\r\n\r\n[![Boot working directory][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/xWgKK.png","title":"Using maven multi module, spring boot - issue with Creating Directory in IntelliJ vs. Eclipse","body":"<p>File operations work relative to the current working directory, which you can set in IntelliJ IDEA Run configuration.</p>\n<p>Example for Spring Boot:</p>\n<p><a href=\"https://i.stack.imgur.com/xWgKK.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/xWgKK.png\" alt=\"Boot working directory\" /></a></p>\n"}],"owner":{"account_id":12493462,"reputation":175,"user_id":9254213,"display_name":"Ismail Bouaddi"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":32,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":76902903,"answer_count":1,"score":1,"last_activity_date":1692060833,"creation_date":1692044137,"question_id":76901912,"body_markdown":" I have a Spring boot maven mutliple module project where I&#39;m trying to create a directory in my code using the Files.createDirectories method. The project is structured as follows:\r\n\r\n```\r\n-GlobalProject :                                                                                                                                                                                                      \r\n    CommonProject:                                                                                                                                                                                       \r\n    WebParentPrject:\r\n         backendPorject:                                                                                                                                                   \r\n         frontendProoject: \r\n```\r\nI want to create a directory named user-images in the backendPorject directory. The following code(in backendproject) works fine in Eclipse, but it&#39;s not behaving as expected in IntelliJ:\r\n```\r\npublic class FileUploadUtil {\r\n\r\n    public static void saveFile(String uploadDir, String fileName, MultipartFile multipartFile) throws IOException {\r\n        Path uploadPath = Paths.get(uploadDir);\r\n        if(!Files.exists(uploadPath))\r\n        {\r\n            Path directories = Files.createDirectories(uploadPath);\r\n            System.out.println(directories);\r\n        }\r\n        try (InputStream inputStream = multipartFile.getInputStream()){\r\n            Path filePath = uploadPath.resolve(fileName);\r\n            Files.copy(inputStream,filePath, StandardCopyOption.REPLACE_EXISTING);\r\n        }catch (IOException exception){\r\n            throw new IOException(&quot;Could not save file : &quot;+fileName,exception);\r\n        }\r\n    }\r\n```\r\n\r\nIn Eclipse, the directory is created within the backendProject directory, but in IntelliJ, the directory is being created in the root directory of the entire project (MyProject). I want the directory to be created in the backendProject directory in both IDEs.\r\n\r\nCould someone help me understand why the behavior is different between Eclipse and IntelliJ, and how I can modify my code to ensure consistent behavior in both IDEs?","title":"Using maven multi module, spring boot - issue with Creating Directory in IntelliJ vs. Eclipse","body":"<p>I have a Spring boot maven mutliple module project where I'm trying to create a directory in my code using the Files.createDirectories method. The project is structured as follows:</p>\n<pre><code>-GlobalProject :                                                                                                                                                                                                      \n    CommonProject:                                                                                                                                                                                       \n    WebParentPrject:\n         backendPorject:                                                                                                                                                   \n         frontendProoject: \n</code></pre>\n<p>I want to create a directory named user-images in the backendPorject directory. The following code(in backendproject) works fine in Eclipse, but it's not behaving as expected in IntelliJ:</p>\n<pre><code>public class FileUploadUtil {\n\n    public static void saveFile(String uploadDir, String fileName, MultipartFile multipartFile) throws IOException {\n        Path uploadPath = Paths.get(uploadDir);\n        if(!Files.exists(uploadPath))\n        {\n            Path directories = Files.createDirectories(uploadPath);\n            System.out.println(directories);\n        }\n        try (InputStream inputStream = multipartFile.getInputStream()){\n            Path filePath = uploadPath.resolve(fileName);\n            Files.copy(inputStream,filePath, StandardCopyOption.REPLACE_EXISTING);\n        }catch (IOException exception){\n            throw new IOException(&quot;Could not save file : &quot;+fileName,exception);\n        }\n    }\n</code></pre>\n<p>In Eclipse, the directory is created within the backendProject directory, but in IntelliJ, the directory is being created in the root directory of the entire project (MyProject). I want the directory to be created in the backendProject directory in both IDEs.</p>\n<p>Could someone help me understand why the behavior is different between Eclipse and IntelliJ, and how I can modify my code to ensure consistent behavior in both IDEs?</p>\n"},{"tags":["java","android"],"comments":[{"owner":{"account_id":2673407,"reputation":44640,"user_id":2310289,"display_name":"Scary Wombat"},"score":0,"creation_date":1692059946,"post_id":76902837,"comment_id":135571484,"body_markdown":"I think that you need to debug it and see what is not being set correctly e.g. what is the value of `sirenStop = stop.load`","body":"I think that you need to debug it and see what is not being set correctly e.g. what is the value of <code>sirenStop = stop.load</code>"}],"answers":[{"comments":[{"owner":{"account_id":21661541,"reputation":5,"user_id":15980615,"display_name":"Gman97"},"score":0,"creation_date":1692121669,"post_id":76902890,"comment_id":135580532,"body_markdown":"Also, do you know why my SoundPools stops playing after a while when I press the buttons?","body":"Also, do you know why my SoundPools stops playing after a while when I press the buttons?"},{"owner":{"account_id":28978643,"reputation":100,"user_id":22197081,"display_name":"Rainy sidewalks"},"score":0,"creation_date":1692122615,"post_id":76902890,"comment_id":135580713,"body_markdown":"i will look into it , meanwhile try it and if it works let me know :)","body":"i will look into it , meanwhile try it and if it works let me know :)"},{"owner":{"account_id":21661541,"reputation":5,"user_id":15980615,"display_name":"Gman97"},"score":0,"creation_date":1692123874,"post_id":76902890,"comment_id":135580927,"body_markdown":"It worked, I changed my SoundPool button and it plays :)","body":"It worked, I changed my SoundPool button and it plays :)"},{"owner":{"account_id":28978643,"reputation":100,"user_id":22197081,"display_name":"Rainy sidewalks"},"score":0,"creation_date":1692131680,"post_id":76902890,"comment_id":135582079,"body_markdown":"good to know that ;)","body":"good to know that ;)"},{"owner":{"account_id":21661541,"reputation":5,"user_id":15980615,"display_name":"Gman97"},"score":0,"creation_date":1692202935,"post_id":76902890,"comment_id":135592695,"body_markdown":"Just checking if you found anything about my other problem","body":"Just checking if you found anything about my other problem"}],"tags":[],"owner":{"account_id":28978643,"reputation":100,"user_id":22197081,"display_name":"Rainy sidewalks"},"comment_count":5,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1692060807,"creation_date":1692060384,"answer_id":76902890,"question_id":76902837,"body_markdown":"i think the problem is that you are using &quot;stop&quot; for both the SoundPool object and the Button object.\r\ntry this one and let me know if it work or not .\r\n\r\n    public class MainActivity extends AppCompatActivity {\r\n    MediaPlayer gbTheme;\r\n    SoundPool stop;\r\n    SoundPool loop;\r\n    int sirenLoop;\r\n    int sirenStop;\r\n\r\n    @Override\r\n    protected void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        setContentView(R.layout.activity_main);\r\n        this.setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_PORTRAIT);\r\n        getSupportActionBar().hide();\r\n        stop = new SoundPool(10, AudioManager.STREAM_MUSIC, 0);\r\n        sirenStop = stop.load(getApplicationContext(), R.raw.ecto_siren_stop, 1);\r\n        gbTheme = MediaPlayer.create(this, R.raw.ghostbusters_theme);\r\n        loop = new SoundPool(10, AudioManager.STREAM_MUSIC, 0);\r\n        sirenLoop = loop.load(getApplicationContext(), R.raw.ecto_siren_time_loopable, 1);\r\n        Button on = (Button)findViewById(R.id.turnOnButton);\r\n        on.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View v) {\r\n                sirenLoop = loop.play(sirenLoop, 1, 1, 1, -1, 1);\r\n            }\r\n        });\r\n        Button off = (Button)findViewById(R.id.turnOffButton);\r\n        off.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View v) {\r\n                loop.stop(sirenLoop);\r\n                sirenStop = stop.play(sirenStop, 1, 1, 1, 0, 1);\r\n            }\r\n        });\r\n        Button play = (Button)findViewById(R.id.playButton);\r\n        play.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View v) {\r\n                gbTheme.start();\r\n                gbTheme.setLooping(true);\r\n            }\r\n        });\r\n        Button stopButton = (Button)findViewById(R.id.stopButton);\r\n        stopButton.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View v) {\r\n                gbTheme.pause();\r\n                gbTheme.seekTo(0);\r\n            }\r\n        });\r\n    }\r\n}\r\n\r\nand if that does not works try to use different audio stream for the SoundPools.\r\n\r\n    public class MainActivity extends AppCompatActivity {\r\n    MediaPlayer gbTheme;\r\n    SoundPool stop;\r\n    SoundPool loop;\r\n    int sirenLoop;\r\n    int sirenStop;\r\n\r\n    @Override\r\n    protected void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        setContentView(R.layout.activity_main);\r\n        this.setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_PORTRAIT);\r\n        getSupportActionBar().hide();\r\n        stop = new SoundPool(10, AudioManager.STREAM_MUSIC, 0);\r\n        sirenStop = stop.load(getApplicationContext(), R.raw.ecto_siren_stop, 1);\r\n        gbTheme = MediaPlayer.create(this, R.raw.ghostbusters_theme);\r\n        loop = new SoundPool(10, AudioManager.STREAM_ALARM, 0); // Use STREAM_ALARM for SoundPools\r\n        sirenLoop = loop.load(getApplicationContext(), R.raw.ecto_siren_time_loopable, 1);\r\n        Button on = (Button)findViewById(R.id.turnOnButton);\r\n        on.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View v) {\r\n                sirenLoop = loop.play(sirenLoop, 1, 1, 1, -1, 1);\r\n            }\r\n        });\r\n        Button off = (Button)findViewById(R.id.turnOffButton);\r\n        off.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View v) {\r\n                loop.stop(sirenLoop);\r\n                sirenStop = stop.play(sirenStop, 1, 1, 1, 0, 1);\r\n            }\r\n        });\r\n        Button play = (Button)findViewById(R.id.playButton);\r\n        play.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View v) {\r\n                gbTheme.start();\r\n                gbTheme.setLooping(true);\r\n            }\r\n        });\r\n        Button stopButton = (Button)findViewById(R.id.stopButton);\r\n        stopButton.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View v) {\r\n                gbTheme.pause();\r\n                gbTheme.seekTo(0);\r\n            }\r\n        });\r\n    }\r\n}\r\n\r\n","title":"How to play a SoundPool with a MediaPlayer at the same time?","body":"<p>i think the problem is that you are using &quot;stop&quot; for both the SoundPool object and the Button object.\ntry this one and let me know if it work or not .</p>\n<pre><code>public class MainActivity extends AppCompatActivity {\nMediaPlayer gbTheme;\nSoundPool stop;\nSoundPool loop;\nint sirenLoop;\nint sirenStop;\n\n@Override\nprotected void onCreate(Bundle savedInstanceState) {\n    super.onCreate(savedInstanceState);\n    setContentView(R.layout.activity_main);\n    this.setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_PORTRAIT);\n    getSupportActionBar().hide();\n    stop = new SoundPool(10, AudioManager.STREAM_MUSIC, 0);\n    sirenStop = stop.load(getApplicationContext(), R.raw.ecto_siren_stop, 1);\n    gbTheme = MediaPlayer.create(this, R.raw.ghostbusters_theme);\n    loop = new SoundPool(10, AudioManager.STREAM_MUSIC, 0);\n    sirenLoop = loop.load(getApplicationContext(), R.raw.ecto_siren_time_loopable, 1);\n    Button on = (Button)findViewById(R.id.turnOnButton);\n    on.setOnClickListener(new View.OnClickListener() {\n        @Override\n        public void onClick(View v) {\n            sirenLoop = loop.play(sirenLoop, 1, 1, 1, -1, 1);\n        }\n    });\n    Button off = (Button)findViewById(R.id.turnOffButton);\n    off.setOnClickListener(new View.OnClickListener() {\n        @Override\n        public void onClick(View v) {\n            loop.stop(sirenLoop);\n            sirenStop = stop.play(sirenStop, 1, 1, 1, 0, 1);\n        }\n    });\n    Button play = (Button)findViewById(R.id.playButton);\n    play.setOnClickListener(new View.OnClickListener() {\n        @Override\n        public void onClick(View v) {\n            gbTheme.start();\n            gbTheme.setLooping(true);\n        }\n    });\n    Button stopButton = (Button)findViewById(R.id.stopButton);\n    stopButton.setOnClickListener(new View.OnClickListener() {\n        @Override\n        public void onClick(View v) {\n            gbTheme.pause();\n            gbTheme.seekTo(0);\n        }\n    });\n}\n</code></pre>\n<p>}</p>\n<p>and if that does not works try to use different audio stream for the SoundPools.</p>\n<pre><code>public class MainActivity extends AppCompatActivity {\nMediaPlayer gbTheme;\nSoundPool stop;\nSoundPool loop;\nint sirenLoop;\nint sirenStop;\n\n@Override\nprotected void onCreate(Bundle savedInstanceState) {\n    super.onCreate(savedInstanceState);\n    setContentView(R.layout.activity_main);\n    this.setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_PORTRAIT);\n    getSupportActionBar().hide();\n    stop = new SoundPool(10, AudioManager.STREAM_MUSIC, 0);\n    sirenStop = stop.load(getApplicationContext(), R.raw.ecto_siren_stop, 1);\n    gbTheme = MediaPlayer.create(this, R.raw.ghostbusters_theme);\n    loop = new SoundPool(10, AudioManager.STREAM_ALARM, 0); // Use STREAM_ALARM for SoundPools\n    sirenLoop = loop.load(getApplicationContext(), R.raw.ecto_siren_time_loopable, 1);\n    Button on = (Button)findViewById(R.id.turnOnButton);\n    on.setOnClickListener(new View.OnClickListener() {\n        @Override\n        public void onClick(View v) {\n            sirenLoop = loop.play(sirenLoop, 1, 1, 1, -1, 1);\n        }\n    });\n    Button off = (Button)findViewById(R.id.turnOffButton);\n    off.setOnClickListener(new View.OnClickListener() {\n        @Override\n        public void onClick(View v) {\n            loop.stop(sirenLoop);\n            sirenStop = stop.play(sirenStop, 1, 1, 1, 0, 1);\n        }\n    });\n    Button play = (Button)findViewById(R.id.playButton);\n    play.setOnClickListener(new View.OnClickListener() {\n        @Override\n        public void onClick(View v) {\n            gbTheme.start();\n            gbTheme.setLooping(true);\n        }\n    });\n    Button stopButton = (Button)findViewById(R.id.stopButton);\n    stopButton.setOnClickListener(new View.OnClickListener() {\n        @Override\n        public void onClick(View v) {\n            gbTheme.pause();\n            gbTheme.seekTo(0);\n        }\n    });\n}\n</code></pre>\n<p>}</p>\n"}],"owner":{"account_id":21661541,"reputation":5,"user_id":15980615,"display_name":"Gman97"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":40,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76902890,"answer_count":1,"score":0,"last_activity_date":1692060807,"creation_date":1692059005,"question_id":76902837,"body_markdown":"I am trying to play the SoundPools with a MediaPlayer at the same time with a button press and every time I played the SoundPools when the MediaPlayer is playing, it doesn&#39;t play. Here is my code:\r\n\r\n```\r\npublic class MainActivity extends AppCompatActivity {\r\n    MediaPlayer gbTheme;\r\n    SoundPool stop;\r\n    SoundPool loop;\r\n    int sirenLoop;\r\n    int sirenStop;\r\n\r\n    @Override\r\n    protected void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        setContentView(R.layout.activity_main);\r\n        this.setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_PORTRAIT);\r\n        getSupportActionBar().hide();\r\n        stop = new SoundPool(10, AudioManager.STREAM_MUSIC, 0);\r\n        sirenStop = stop.load(getApplicationContext(), R.raw.ecto_siren_stop, 1);\r\n        gbTheme = MediaPlayer.create(this, R.raw.ghostbusters_theme);\r\n        loop = new SoundPool(10, AudioManager.STREAM_MUSIC, 0);\r\n        sirenLoop = loop.load(getApplicationContext(), R.raw.ecto_siren_time_loopable, 1);\r\n        Button on = (Button)findViewById(R.id.turnOnButton);\r\n        on.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View v) {\r\n                sirenLoop = loop.play(sirenLoop, 1, 1, 1, -1, 1);\r\n            }\r\n        });\r\n        Button off = (Button)findViewById(R.id.turnOffButton);\r\n        off.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View v) {\r\n                loop.stop(sirenLoop);\r\n                sirenStop = stop.play(sirenStop, 1, 1, 1, 0, 1);\r\n            }\r\n        });\r\n        Button play = (Button)findViewById(R.id.playButton);\r\n        play.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View v) {\r\n                gbTheme.start();\r\n                gbTheme.setLooping(true);\r\n            }\r\n        });\r\n        Button stop = (Button)findViewById(R.id.stopButton);\r\n        stop.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View v) {\r\n                gbTheme.pause();\r\n                gbTheme.seekTo(0);\r\n            }\r\n        });\r\n```\r\n\r\n\r\nWhat I am trying to do is play both sounds at the same time when the &#39;Turn On&#39; or &#39;Turn Off&#39; buttons are pressed when MediaPlayer is already playing.","title":"How to play a SoundPool with a MediaPlayer at the same time?","body":"<p>I am trying to play the SoundPools with a MediaPlayer at the same time with a button press and every time I played the SoundPools when the MediaPlayer is playing, it doesn't play. Here is my code:</p>\n<pre><code>public class MainActivity extends AppCompatActivity {\n    MediaPlayer gbTheme;\n    SoundPool stop;\n    SoundPool loop;\n    int sirenLoop;\n    int sirenStop;\n\n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.activity_main);\n        this.setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_PORTRAIT);\n        getSupportActionBar().hide();\n        stop = new SoundPool(10, AudioManager.STREAM_MUSIC, 0);\n        sirenStop = stop.load(getApplicationContext(), R.raw.ecto_siren_stop, 1);\n        gbTheme = MediaPlayer.create(this, R.raw.ghostbusters_theme);\n        loop = new SoundPool(10, AudioManager.STREAM_MUSIC, 0);\n        sirenLoop = loop.load(getApplicationContext(), R.raw.ecto_siren_time_loopable, 1);\n        Button on = (Button)findViewById(R.id.turnOnButton);\n        on.setOnClickListener(new View.OnClickListener() {\n            @Override\n            public void onClick(View v) {\n                sirenLoop = loop.play(sirenLoop, 1, 1, 1, -1, 1);\n            }\n        });\n        Button off = (Button)findViewById(R.id.turnOffButton);\n        off.setOnClickListener(new View.OnClickListener() {\n            @Override\n            public void onClick(View v) {\n                loop.stop(sirenLoop);\n                sirenStop = stop.play(sirenStop, 1, 1, 1, 0, 1);\n            }\n        });\n        Button play = (Button)findViewById(R.id.playButton);\n        play.setOnClickListener(new View.OnClickListener() {\n            @Override\n            public void onClick(View v) {\n                gbTheme.start();\n                gbTheme.setLooping(true);\n            }\n        });\n        Button stop = (Button)findViewById(R.id.stopButton);\n        stop.setOnClickListener(new View.OnClickListener() {\n            @Override\n            public void onClick(View v) {\n                gbTheme.pause();\n                gbTheme.seekTo(0);\n            }\n        });\n</code></pre>\n<p>What I am trying to do is play both sounds at the same time when the 'Turn On' or 'Turn Off' buttons are pressed when MediaPlayer is already playing.</p>\n"},{"tags":["java","spring","amazon-web-services","amazon-ses","tls1.3"],"comments":[{"owner":{"account_id":3509196,"reputation":16493,"user_id":2933977,"display_name":"stdunbar"},"score":0,"creation_date":1692059204,"post_id":76902834,"comment_id":135571425,"body_markdown":"&quot;Any reason this doesn&#39;t work?&quot; - uh, because it&#39;s not supported yet? Your requirements need to change as there is zero reason to require 1.3 at this point.","body":"&quot;Any reason this doesn&#39;t work?&quot; - uh, because it&#39;s not supported yet? Your requirements need to change as there is zero reason to require 1.3 at this point."},{"owner":{"account_id":2375911,"reputation":1262,"user_id":2079271,"display_name":"Gowthaman"},"score":0,"creation_date":1692059414,"post_id":76902834,"comment_id":135571451,"body_markdown":"@stdunbar This is from the documentation `For STARTTLS connections, Amazon SES supports TLS 1.2, TLS 1.3, and SSLv2Hello.` \n\nhttps://docs.aws.amazon.com/ses/latest/dg/security-protocols.html","body":"@stdunbar This is from the documentation <code>For STARTTLS connections, Amazon SES supports TLS 1.2, TLS 1.3, and SSLv2Hello.</code>   <a href=\"https://docs.aws.amazon.com/ses/latest/dg/security-protocols.html\" rel=\"nofollow noreferrer\">docs.aws.amazon.com/ses/latest/dg/security-protocols.html</a>"},{"owner":{"account_id":3509196,"reputation":16493,"user_id":2933977,"display_name":"stdunbar"},"score":1,"creation_date":1692060276,"post_id":76902834,"comment_id":135571499,"body_markdown":"But [this post](https://aws.amazon.com/blogs/security/tls-1-2-required-for-aws-endpoints/) and [this one](https://aws.amazon.com/blogs/security/tls-1-2-required-for-aws-endpoints/) - the last posted about 1.5 months ago - indicate that this is all very much still in progress.  TLS 1.2 is a fully supported protocol and no publicly facing service will have deprecated it yet.","body":"But <a href=\"https://aws.amazon.com/blogs/security/tls-1-2-required-for-aws-endpoints/\" rel=\"nofollow noreferrer\">this post</a> and <a href=\"https://aws.amazon.com/blogs/security/tls-1-2-required-for-aws-endpoints/\" rel=\"nofollow noreferrer\">this one</a> - the last posted about 1.5 months ago - indicate that this is all very much still in progress.  TLS 1.2 is a fully supported protocol and no publicly facing service will have deprecated it yet."}],"owner":{"account_id":2375911,"reputation":1262,"user_id":2079271,"display_name":"Gowthaman"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":539,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1692058970,"creation_date":1692058970,"question_id":76902834,"body_markdown":"I have a Java application that connects to the AWS SMTP server to send emails. We upgraded to Java 17 and wanted the default TLS version to be 1.3. The application is using JavaMail and we set the protocol value using the below command\r\n\r\n    javaMailProperties.setProperty(&quot;mail.smtp.ssl.protocols&quot;,&quot;TLSv1.3 TLSv1.2&quot;);\r\n\r\nEven though my application has TLSv1.3 enabled, the emails that are sent by AWS Simple Email Service (SES) are using TLSv1.2.\r\n\r\nI have verified the application supports TLSv1.3 by using the following code in the application\r\n\r\n   \r\n\r\n    try{\r\n\r\n         logger.info(&quot;List of supported SSL Protocols - &quot; + \r\n         Arrays.toString(SSLContext.getDefault().getSupportedSSLParameters().getProtocols()));\r\n    }\r\n    catch (Exception e){\r\n       logger.error(&quot;SSLContext Error&quot; + e);\r\n    }\r\n\r\nThe output for the above snippet is\r\n\r\n    [TLSv1.3, TLSv1.2, TLSv1.1, TLSv1, SSLv3, SSLv2Hello]\r\n\r\nI used openssl command to verify whether I can connect to AWS SMTP server using TLSv1.3 using the following command\r\n\r\n    openssl s_client -crlf -quiet -starttls smtp -connect email-smtp.us-east-1.amazonaws.com:587 -tls1_3\r\n\r\nI got the below error\r\n\r\n    4582575616:error:1409442E:SSL routines:ssl3_read_bytes:tlsv1 alert protocol version:ssl/record/rec_layer_s3.c:1544:SSL alert number 70\r\n\r\nBut tls1_2 works\r\n\r\n    openssl s_client -crlf -quiet -starttls smtp -connect email-smtp.us-east-1.amazonaws.com:587 -tls1_2\r\n\r\nOutput\r\n\r\n    depth=2 C = US, O = Amazon, CN = Amazon Root CA 1\r\n    verify return:1\r\n    depth=1 C = US, O = Amazon, CN = Amazon RSA 2048 M01\r\n    verify return:1\r\n    depth=0 CN = email-smtp.us-east-1.amazonaws.com\r\n    verify return:1\r\n    250 Ok\r\n    451 4.4.2 Timeout waiting for data from client.\r\n\r\nI do not see any configuration in AWS console in SES to accept TLSv1.3. Any reason this doesn&#39;t work? Is it possible to use TLSv1.3? Any help is appreciated.\r\n","title":"AWS SES SMTP not accepting TLSv1.3","body":"<p>I have a Java application that connects to the AWS SMTP server to send emails. We upgraded to Java 17 and wanted the default TLS version to be 1.3. The application is using JavaMail and we set the protocol value using the below command</p>\n<pre><code>javaMailProperties.setProperty(&quot;mail.smtp.ssl.protocols&quot;,&quot;TLSv1.3 TLSv1.2&quot;);\n</code></pre>\n<p>Even though my application has TLSv1.3 enabled, the emails that are sent by AWS Simple Email Service (SES) are using TLSv1.2.</p>\n<p>I have verified the application supports TLSv1.3 by using the following code in the application</p>\n<pre><code>try{\n\n     logger.info(&quot;List of supported SSL Protocols - &quot; + \n     Arrays.toString(SSLContext.getDefault().getSupportedSSLParameters().getProtocols()));\n}\ncatch (Exception e){\n   logger.error(&quot;SSLContext Error&quot; + e);\n}\n</code></pre>\n<p>The output for the above snippet is</p>\n<pre><code>[TLSv1.3, TLSv1.2, TLSv1.1, TLSv1, SSLv3, SSLv2Hello]\n</code></pre>\n<p>I used openssl command to verify whether I can connect to AWS SMTP server using TLSv1.3 using the following command</p>\n<pre><code>openssl s_client -crlf -quiet -starttls smtp -connect email-smtp.us-east-1.amazonaws.com:587 -tls1_3\n</code></pre>\n<p>I got the below error</p>\n<pre><code>4582575616:error:1409442E:SSL routines:ssl3_read_bytes:tlsv1 alert protocol version:ssl/record/rec_layer_s3.c:1544:SSL alert number 70\n</code></pre>\n<p>But tls1_2 works</p>\n<pre><code>openssl s_client -crlf -quiet -starttls smtp -connect email-smtp.us-east-1.amazonaws.com:587 -tls1_2\n</code></pre>\n<p>Output</p>\n<pre><code>depth=2 C = US, O = Amazon, CN = Amazon Root CA 1\nverify return:1\ndepth=1 C = US, O = Amazon, CN = Amazon RSA 2048 M01\nverify return:1\ndepth=0 CN = email-smtp.us-east-1.amazonaws.com\nverify return:1\n250 Ok\n451 4.4.2 Timeout waiting for data from client.\n</code></pre>\n<p>I do not see any configuration in AWS console in SES to accept TLSv1.3. Any reason this doesn't work? Is it possible to use TLSv1.3? Any help is appreciated.</p>\n"},{"tags":["java","spring-boot","unit-testing","junit"],"comments":[{"owner":{"account_id":2994830,"reputation":1,"user_id":2541560,"display_name":"Kayaman"},"score":0,"creation_date":1567662341,"post_id":57799040,"comment_id":102030658,"body_markdown":"So which one returns `Optional&lt;Ticket&gt;`, `TicketService.findById` or `TicketRepository.findById`?","body":"So which one returns <code>Optional&lt;Ticket&gt;</code>, <code>TicketService.findById</code> or <code>TicketRepository.findById</code>?"},{"owner":{"account_id":12543099,"reputation":1284,"user_id":9127397,"display_name":"Mateusz Gebroski"},"score":0,"creation_date":1567662518,"post_id":57799040,"comment_id":102030715,"body_markdown":"TicketRepository returns Optional of Ticket  where TicketService returns just Ticket","body":"TicketRepository returns Optional of Ticket  where TicketService returns just Ticket"},{"owner":{"account_id":2994830,"reputation":1,"user_id":2541560,"display_name":"Kayaman"},"score":0,"creation_date":1567664142,"post_id":57799040,"comment_id":102031231,"body_markdown":"&quot;I know that ticketService is not Mock but if I will remove this line it will throw..&quot;. Yes, but you have to remove the line. Because it&#39;s **not** a mock yet you&#39;re trying to mock a method call on it. Your root problem is the last stacktrace, i.e. why is `null` returned.","body":"&quot;I know that ticketService is not Mock but if I will remove this line it will throw..&quot;. Yes, but you have to remove the line. Because it&#39;s <b>not</b> a mock yet you&#39;re trying to mock a method call on it. Your root problem is the last stacktrace, i.e. why is <code>null</code> returned."},{"owner":{"account_id":12543099,"reputation":1284,"user_id":9127397,"display_name":"Mateusz Gebroski"},"score":0,"creation_date":1567665300,"post_id":57799040,"comment_id":102031645,"body_markdown":"I know but  other methods where this repository method is used passes.","body":"I know but  other methods where this repository method is used passes."},{"owner":{"account_id":2994830,"reputation":1,"user_id":2541560,"display_name":"Kayaman"},"score":0,"creation_date":1567665679,"post_id":57799040,"comment_id":102031786,"body_markdown":"Did you remove the `when(ticketService.findById(ticket.getId())).thenReturn(ticket);` line already? You&#39;re not going to get anywhere if you don&#39;t remove it.","body":"Did you remove the <code>when(ticketService.findById(ticket.getId())).thenReturn(tick&zwnj;&#8203;et);</code> line already? You&#39;re not going to get anywhere if you don&#39;t remove it."},{"owner":{"account_id":12543099,"reputation":1284,"user_id":9127397,"display_name":"Mateusz Gebroski"},"score":0,"creation_date":1567665729,"post_id":57799040,"comment_id":102031811,"body_markdown":"Yes, I have removed it and still null is thrown.","body":"Yes, I have removed it and still null is thrown."},{"owner":{"account_id":2994830,"reputation":1,"user_id":2541560,"display_name":"Kayaman"},"score":0,"creation_date":1567665790,"post_id":57799040,"comment_id":102031842,"body_markdown":"Good. At least now you&#39;ve found your real problem. Now it&#39;s time for you to debug why `null` is returned (not thrown).","body":"Good. At least now you&#39;ve found your real problem. Now it&#39;s time for you to debug why <code>null</code> is returned (not thrown)."},{"owner":{"account_id":12543099,"reputation":1284,"user_id":9127397,"display_name":"Mateusz Gebroski"},"score":0,"creation_date":1567665952,"post_id":57799040,"comment_id":102031911,"body_markdown":"I have attached screenshot from debugger also.","body":"I have attached screenshot from debugger also."},{"owner":{"account_id":12543099,"reputation":1284,"user_id":9127397,"display_name":"Mateusz Gebroski"},"score":0,"creation_date":1567666947,"post_id":57799040,"comment_id":102032345,"body_markdown":"Found the solution, this was Lombok issue. Thank you @Kayaman","body":"Found the solution, this was Lombok issue. Thank you @Kayaman"}],"answers":[{"comments":[{"owner":{"account_id":2994830,"reputation":1,"user_id":2541560,"display_name":"Kayaman"},"score":0,"creation_date":1567664227,"post_id":57799152,"comment_id":102031264,"body_markdown":"Not the root cause, since this involves a spy and calling the real method.","body":"Not the root cause, since this involves a spy and calling the real method."},{"owner":{"account_id":12543099,"reputation":1284,"user_id":9127397,"display_name":"Mateusz Gebroski"},"score":0,"creation_date":1567664834,"post_id":57799152,"comment_id":102031468,"body_markdown":"Thank you but now it is thrown: org.mockito.exceptions.misusing.NotAMockException: \nArgument passed to when() is not a mock!\nExample of correct stubbing:\n    doThrow(new RuntimeException()).when(mock).someMethod();","body":"Thank you but now it is thrown: org.mockito.exceptions.misusing.NotAMockException:  Argument passed to when() is not a mock! Example of correct stubbing:     doThrow(new RuntimeException()).when(mock).someMethod();"}],"tags":[],"owner":{"account_id":6401714,"reputation":5744,"user_id":4964136,"accept_rate":100,"display_name":"Vishwa Ratna"},"comment_count":2,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1567663510,"creation_date":1567662729,"answer_id":57799152,"question_id":57799040,"body_markdown":"**Changes to be made:**\r\n\r\n1.    `thenReturn(Optional.of(ticket));`\r\n\r\nThe argument inside `thenReturn` because of `Optional.of()` cannot be `null`. Instead use `Optional.ofNullable(T value)`. Returns an Optional describing the specified value, if non-null, otherwise returns an empty.\r\n\r\n2. Change `when(ticketService.findById(ticket.getId())).thenReturn(ticket);` to `doReturn(ticket).when(ticketService).findById(ticket.getId())`\r\n\r\n&gt; Read This:\r\n&gt; https://groups.google.com/forum/?fromgroups#!topic/mockito/9WUvkhZUy90","title":"org.mockito.exceptions.misusing.WrongTypeOfReturnValue:","body":"<p><strong>Changes to be made:</strong></p>\n\n<ol>\n<li><code>thenReturn(Optional.of(ticket));</code></li>\n</ol>\n\n<p>The argument inside <code>thenReturn</code> because of <code>Optional.of()</code> cannot be <code>null</code>. Instead use <code>Optional.ofNullable(T value)</code>. Returns an Optional describing the specified value, if non-null, otherwise returns an empty.</p>\n\n<ol start=\"2\">\n<li>Change <code>when(ticketService.findById(ticket.getId())).thenReturn(ticket);</code> to <code>doReturn(ticket).when(ticketService).findById(ticket.getId())</code></li>\n</ol>\n\n<blockquote>\n  <p>Read This:\n  <a href=\"https://groups.google.com/forum/?fromgroups#!topic/mockito/9WUvkhZUy90\" rel=\"nofollow noreferrer\">https://groups.google.com/forum/?fromgroups#!topic/mockito/9WUvkhZUy90</a></p>\n</blockquote>\n"}],"owner":{"account_id":12543099,"reputation":1284,"user_id":9127397,"display_name":"Mateusz Gebroski"},"comment_count":9,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":12604,"favorite_count":0,"down_vote_count":1,"up_vote_count":2,"answer_count":1,"score":1,"last_activity_date":1692057805,"creation_date":1567662037,"question_id":57799040,"body_markdown":"I am trying to perform simple unit test but still it throws null or some strange error like:\r\n\r\n    org.mockito.exceptions.misusing.WrongTypeOfReturnValue: \r\n    Ticket cannot be returned by findById()\r\n    findById() should return Optional\r\n\r\nWhy is that? Instead code will event not compile.\r\n\r\n\r\nTest looks like that:\r\n\r\n    @Test\r\n    void updateTicketByOrderAmount() {\r\n    \r\n        OrderedTicket orderedTicket = OrderedTicketDatasource.getOrderedTicket();\r\n    \r\n        Ticket ticket = TicketDatasource.getTicket();\r\n    \r\n        when(ticketRepository.findById(ticket.getId())).thenReturn(Optional.of(ticket));\r\n    \r\n        when(ticketService.findById(ticket.getId())).thenReturn(ticket);\r\n    \r\n        Ticket actual = ticketService.updateTicketByOrderAmount(orderedTicket);\r\n    \r\n        assertNotNull(actual);\r\n    \r\n    }\r\n\r\n\r\nand implementation: \r\n\r\n    @Override\r\n        @Transactional\r\n        public Ticket updateTicketByOrderAmount(OrderedTicket orderedTicket) {\r\n            Ticket found = findById(orderedTicket.getTicket().getId());\r\n    \r\n            decreaseInStockAmount(orderedTicket, found);\r\n    \r\n            return ticketMapper.ticketDTOtoTicket(\r\n                    saveOrUpdateTicket(\r\n                            ticketMapper.ticketToTicketDTO(found)\r\n                    )\r\n            );\r\n        }\r\n    \r\n     @Override\r\n        public Ticket findById(Long id) {\r\n            return ticketRepository.findById(id).orElseThrow(ResourceNotFoundException::new);\r\n        }\r\n    \r\n    \r\n     private void decreaseInStockAmount(OrderedTicket ticket, Ticket found) {\r\n            found.setInStock(\r\n                    found.getInStock() - ticket.getAmount()\r\n            );\r\n        }\r\n\r\n\r\nFull stacktrace:\r\n\r\n    org.mockito.exceptions.misusing.WrongTypeOfReturnValue: \r\n    Ticket cannot be returned by findById()\r\n    findById() should return Optional\r\n    ***\r\n    If you&#39;re unsure why you&#39;re getting above error read on.\r\n    Due to the nature of the syntax above problem might occur because:\r\n    1. This exception *might* occur in wrongly written multi-threaded tests.\r\n       Please refer to Mockito FAQ on limitations of concurrency testing.\r\n    2. A spy is stubbed using when(spy.foo()).then() syntax. It is safer to stub spies - \r\n       - with doReturn|Throw() family of methods. More in javadocs for Mockito.spy() method.\r\n    \r\n    \r\n    \tat server.eventooserver.api.v1.service.TicketServiceImplTest.updateTicketByOrderAmount(TicketServiceImplTest.java:90)\r\n    \tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n    \tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\r\n    \tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n    \tat java.lang.reflect.Method.invoke(Method.java:498)\r\n    \tat org.junit.platform.commons.util.ReflectionUtils.invokeMethod(ReflectionUtils.java:532)\r\n    \tat org.junit.jupiter.engine.execution.ExecutableInvoker.invoke(ExecutableInvoker.java:115)\r\n    \tat org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$invokeTestMethod$6(TestMethodTestDescriptor.java:170)\r\n    \tat org.junit.jupiter.engine.execution.ThrowableCollector.execute(ThrowableCollector.java:40)\r\n    \tat org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.invokeTestMethod(TestMethodTestDescriptor.java:166)\r\n    \tat org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:113)\r\n    \tat org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:58)\r\n    \tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$4(NodeTestTask.java:108)\r\n    \tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:72)\r\n    \tat org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:98)\r\n    \tat org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:74)\r\n    \tat java.util.ArrayList.forEach(ArrayList.java:1257)\r\n    \tat org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:38)\r\n    \tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$4(NodeTestTask.java:112)\r\n    \tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:72)\r\n    \tat org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:98)\r\n    \tat org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:74)\r\n    \tat java.util.ArrayList.forEach(ArrayList.java:1257)\r\n    \tat org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:38)\r\n    \tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$4(NodeTestTask.java:112)\r\n    \tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:72)\r\n    \tat org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:98)\r\n    \tat org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:74)\r\n    \tat org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:32)\r\n    \tat org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)\r\n    \tat org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:51)\r\n    \tat org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:220)\r\n    \tat org.junit.platform.launcher.core.DefaultLauncher.lambda$execute$6(DefaultLauncher.java:188)\r\n    \tat org.junit.platform.launcher.core.DefaultLauncher.withInterceptedStreams(DefaultLauncher.java:202)\r\n    \tat org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:181)\r\n    \tat org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:128)\r\n    \tat com.intellij.junit5.JUnit5IdeaTestRunner.startRunnerWithArgs(JUnit5IdeaTestRunner.java:74)\r\n    \tat com.intellij.rt.execution.junit.IdeaTestRunner$Repeater.startRunnerWithArgs(IdeaTestRunner.java:47)\r\n    \tat com.intellij.rt.execution.junit.JUnitStarter.prepareStreamsAndStart(JUnitStarter.java:242)\r\n    \tat com.intellij.rt.execution.junit.JUnitStarter.main(JUnitStarter.java:70)\r\n\r\n\r\n\r\nIt points directly to \r\n\r\n    when(ticketService.findById(ticket.getId())).thenReturn(ticket);\r\n\r\nBut why is that?\r\n\r\nWhat is more I am attaching how mock are initialized:\r\n\r\n       @Mock\r\n        TicketRepository ticketRepository;\r\n    \r\n        TicketService ticketService;\r\n    \r\n        public TicketServiceImplTest() {\r\n            MockitoAnnotations.initMocks(this);\r\n            ticketService = new TicketServiceImpl(ticketRepository);\r\n        }\r\n\r\n\r\n\r\nI know that ticketService is not Mock but if I will remove this line it will throw:\r\n\r\n    org.opentest4j.AssertionFailedError: expected: not &lt;null&gt;\r\n    \r\n    \tat org.junit.jupiter.api.AssertionUtils.fail(AssertionUtils.java:38)\r\n    \tat org.junit.jupiter.api.Assertions.fail(Assertions.java:84)\r\n    \tat org.junit.jupiter.api.AssertNotNull.failNull(AssertNotNull.java:47)\r\n    \tat org.junit.jupiter.api.AssertNotNull.assertNotNull(AssertNotNull.java:36)\r\n    \tat org.junit.jupiter.api.AssertNotNull.assertNotNull(AssertNotNull.java:31)\r\n    \tat org.junit.jupiter.api.Assertions.assertNotNull(Assertions.java:258)\r\n    \tat server.eventooserver.api.v1.service.TicketServiceImplTest.updateTicketByOrderAmount(TicketServiceImplTest.java:94)\r\n    \tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n    \tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\r\n    \tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n    \tat java.lang.reflect.Method.invoke(Method.java:498)\r\n    \tat org.junit.platform.commons.util.ReflectionUtils.invokeMethod(ReflectionUtils.java:532)\r\n    \tat org.junit.jupiter.engine.execution.ExecutableInvoker.invoke(ExecutableInvoker.java:115)\r\n    \tat org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$invokeTestMethod$6(TestMethodTestDescriptor.java:170)\r\n    \tat org.junit.jupiter.engine.execution.ThrowableCollector.execute(ThrowableCollector.java:40)\r\n    \tat org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.invokeTestMethod(TestMethodTestDescriptor.java:166)\r\n    \tat org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:113)\r\n    \tat org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:58)\r\n    \tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$4(NodeTestTask.java:108)\r\n    \tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:72)\r\n    \tat org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:98)\r\n    \tat org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:74)\r\n    \tat java.util.ArrayList.forEach(ArrayList.java:1257)\r\n    \tat org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:38)\r\n    \tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$4(NodeTestTask.java:112)\r\n    \tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:72)\r\n    \tat org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:98)\r\n    \tat org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:74)\r\n    \tat java.util.ArrayList.forEach(ArrayList.java:1257)\r\n    \tat org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:38)\r\n    \tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$4(NodeTestTask.java:112)\r\n    \tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:72)\r\n    \tat org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:98)\r\n    \tat org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:74)\r\n    \tat org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:32)\r\n    \tat org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)\r\n    \tat org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:51)\r\n    \tat org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:220)\r\n    \tat org.junit.platform.launcher.core.DefaultLauncher.lambda$execute$6(DefaultLauncher.java:188)\r\n    \tat org.junit.platform.launcher.core.DefaultLauncher.withInterceptedStreams(DefaultLauncher.java:202)\r\n    \tat org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:181)\r\n    \tat org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:128)\r\n    \tat com.intellij.junit5.JUnit5IdeaTestRunner.startRunnerWithArgs(JUnit5IdeaTestRunner.java:74)\r\n    \tat com.intellij.rt.execution.junit.IdeaTestRunner$Repeater.startRunnerWithArgs(IdeaTestRunner.java:47)\r\n    \tat com.intellij.rt.execution.junit.JUnitStarter.prepareStreamsAndStart(JUnitStarter.java:242)\r\n    \tat com.intellij.rt.execution.junit.JUnitStarter.main(JUnitStarter.java:70)\r\n\r\n\r\n\r\nAnd screenshot from debugger \r\n[![enter image description here][1]][1] \r\n\r\n\r\n  [1]: https://i.stack.imgur.com/5DLMW.png","title":"org.mockito.exceptions.misusing.WrongTypeOfReturnValue:","body":"<p>I am trying to perform simple unit test but still it throws null or some strange error like:</p>\n\n<pre><code>org.mockito.exceptions.misusing.WrongTypeOfReturnValue: \nTicket cannot be returned by findById()\nfindById() should return Optional\n</code></pre>\n\n<p>Why is that? Instead code will event not compile.</p>\n\n<p>Test looks like that:</p>\n\n<pre><code>@Test\nvoid updateTicketByOrderAmount() {\n\n    OrderedTicket orderedTicket = OrderedTicketDatasource.getOrderedTicket();\n\n    Ticket ticket = TicketDatasource.getTicket();\n\n    when(ticketRepository.findById(ticket.getId())).thenReturn(Optional.of(ticket));\n\n    when(ticketService.findById(ticket.getId())).thenReturn(ticket);\n\n    Ticket actual = ticketService.updateTicketByOrderAmount(orderedTicket);\n\n    assertNotNull(actual);\n\n}\n</code></pre>\n\n<p>and implementation: </p>\n\n<pre><code>@Override\n    @Transactional\n    public Ticket updateTicketByOrderAmount(OrderedTicket orderedTicket) {\n        Ticket found = findById(orderedTicket.getTicket().getId());\n\n        decreaseInStockAmount(orderedTicket, found);\n\n        return ticketMapper.ticketDTOtoTicket(\n                saveOrUpdateTicket(\n                        ticketMapper.ticketToTicketDTO(found)\n                )\n        );\n    }\n\n @Override\n    public Ticket findById(Long id) {\n        return ticketRepository.findById(id).orElseThrow(ResourceNotFoundException::new);\n    }\n\n\n private void decreaseInStockAmount(OrderedTicket ticket, Ticket found) {\n        found.setInStock(\n                found.getInStock() - ticket.getAmount()\n        );\n    }\n</code></pre>\n\n<p>Full stacktrace:</p>\n\n<pre><code>org.mockito.exceptions.misusing.WrongTypeOfReturnValue: \nTicket cannot be returned by findById()\nfindById() should return Optional\n***\nIf you're unsure why you're getting above error read on.\nDue to the nature of the syntax above problem might occur because:\n1. This exception *might* occur in wrongly written multi-threaded tests.\n   Please refer to Mockito FAQ on limitations of concurrency testing.\n2. A spy is stubbed using when(spy.foo()).then() syntax. It is safer to stub spies - \n   - with doReturn|Throw() family of methods. More in javadocs for Mockito.spy() method.\n\n\n    at server.eventooserver.api.v1.service.TicketServiceImplTest.updateTicketByOrderAmount(TicketServiceImplTest.java:90)\n    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\n    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n    at java.lang.reflect.Method.invoke(Method.java:498)\n    at org.junit.platform.commons.util.ReflectionUtils.invokeMethod(ReflectionUtils.java:532)\n    at org.junit.jupiter.engine.execution.ExecutableInvoker.invoke(ExecutableInvoker.java:115)\n    at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$invokeTestMethod$6(TestMethodTestDescriptor.java:170)\n    at org.junit.jupiter.engine.execution.ThrowableCollector.execute(ThrowableCollector.java:40)\n    at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.invokeTestMethod(TestMethodTestDescriptor.java:166)\n    at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:113)\n    at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:58)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$4(NodeTestTask.java:108)\n    at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:72)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:98)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:74)\n    at java.util.ArrayList.forEach(ArrayList.java:1257)\n    at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:38)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$4(NodeTestTask.java:112)\n    at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:72)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:98)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:74)\n    at java.util.ArrayList.forEach(ArrayList.java:1257)\n    at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:38)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$4(NodeTestTask.java:112)\n    at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:72)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:98)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:74)\n    at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:32)\n    at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)\n    at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:51)\n    at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:220)\n    at org.junit.platform.launcher.core.DefaultLauncher.lambda$execute$6(DefaultLauncher.java:188)\n    at org.junit.platform.launcher.core.DefaultLauncher.withInterceptedStreams(DefaultLauncher.java:202)\n    at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:181)\n    at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:128)\n    at com.intellij.junit5.JUnit5IdeaTestRunner.startRunnerWithArgs(JUnit5IdeaTestRunner.java:74)\n    at com.intellij.rt.execution.junit.IdeaTestRunner$Repeater.startRunnerWithArgs(IdeaTestRunner.java:47)\n    at com.intellij.rt.execution.junit.JUnitStarter.prepareStreamsAndStart(JUnitStarter.java:242)\n    at com.intellij.rt.execution.junit.JUnitStarter.main(JUnitStarter.java:70)\n</code></pre>\n\n<p>It points directly to </p>\n\n<pre><code>when(ticketService.findById(ticket.getId())).thenReturn(ticket);\n</code></pre>\n\n<p>But why is that?</p>\n\n<p>What is more I am attaching how mock are initialized:</p>\n\n<pre><code>   @Mock\n    TicketRepository ticketRepository;\n\n    TicketService ticketService;\n\n    public TicketServiceImplTest() {\n        MockitoAnnotations.initMocks(this);\n        ticketService = new TicketServiceImpl(ticketRepository);\n    }\n</code></pre>\n\n<p>I know that ticketService is not Mock but if I will remove this line it will throw:</p>\n\n<pre><code>org.opentest4j.AssertionFailedError: expected: not &lt;null&gt;\n\n    at org.junit.jupiter.api.AssertionUtils.fail(AssertionUtils.java:38)\n    at org.junit.jupiter.api.Assertions.fail(Assertions.java:84)\n    at org.junit.jupiter.api.AssertNotNull.failNull(AssertNotNull.java:47)\n    at org.junit.jupiter.api.AssertNotNull.assertNotNull(AssertNotNull.java:36)\n    at org.junit.jupiter.api.AssertNotNull.assertNotNull(AssertNotNull.java:31)\n    at org.junit.jupiter.api.Assertions.assertNotNull(Assertions.java:258)\n    at server.eventooserver.api.v1.service.TicketServiceImplTest.updateTicketByOrderAmount(TicketServiceImplTest.java:94)\n    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\n    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n    at java.lang.reflect.Method.invoke(Method.java:498)\n    at org.junit.platform.commons.util.ReflectionUtils.invokeMethod(ReflectionUtils.java:532)\n    at org.junit.jupiter.engine.execution.ExecutableInvoker.invoke(ExecutableInvoker.java:115)\n    at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$invokeTestMethod$6(TestMethodTestDescriptor.java:170)\n    at org.junit.jupiter.engine.execution.ThrowableCollector.execute(ThrowableCollector.java:40)\n    at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.invokeTestMethod(TestMethodTestDescriptor.java:166)\n    at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:113)\n    at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:58)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$4(NodeTestTask.java:108)\n    at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:72)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:98)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:74)\n    at java.util.ArrayList.forEach(ArrayList.java:1257)\n    at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:38)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$4(NodeTestTask.java:112)\n    at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:72)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:98)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:74)\n    at java.util.ArrayList.forEach(ArrayList.java:1257)\n    at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:38)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$4(NodeTestTask.java:112)\n    at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:72)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:98)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:74)\n    at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:32)\n    at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)\n    at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:51)\n    at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:220)\n    at org.junit.platform.launcher.core.DefaultLauncher.lambda$execute$6(DefaultLauncher.java:188)\n    at org.junit.platform.launcher.core.DefaultLauncher.withInterceptedStreams(DefaultLauncher.java:202)\n    at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:181)\n    at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:128)\n    at com.intellij.junit5.JUnit5IdeaTestRunner.startRunnerWithArgs(JUnit5IdeaTestRunner.java:74)\n    at com.intellij.rt.execution.junit.IdeaTestRunner$Repeater.startRunnerWithArgs(IdeaTestRunner.java:47)\n    at com.intellij.rt.execution.junit.JUnitStarter.prepareStreamsAndStart(JUnitStarter.java:242)\n    at com.intellij.rt.execution.junit.JUnitStarter.main(JUnitStarter.java:70)\n</code></pre>\n\n<p>And screenshot from debugger \n<a href=\"https://i.stack.imgur.com/5DLMW.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/5DLMW.png\" alt=\"enter image description here\"></a> </p>\n"},{"tags":["java","android","user-interface","android-recyclerview","selection"],"comments":[{"owner":{"account_id":3874601,"reputation":3286,"user_id":3208969,"accept_rate":43,"display_name":"SaravanaRaja"},"score":0,"creation_date":1412368911,"post_id":26076965,"comment_id":41060165,"body_markdown":"Take a look [LINK 1](http://antonioleiva.com/recyclerview/) [LINK 2](http://www.grokkingandroid.com/first-glance-androids-recyclerview/) it may help U","body":"Take a look <a href=\"http://antonioleiva.com/recyclerview/\" rel=\"nofollow noreferrer\">LINK 1</a> <a href=\"http://www.grokkingandroid.com/first-glance-androids-recyclerview/\" rel=\"nofollow noreferrer\">LINK 2</a> it may help U"},{"owner":{"account_id":5043336,"reputation":13459,"user_id":4407266,"accept_rate":95,"display_name":"Aditya Vyas-Lakhan"},"score":0,"creation_date":1467875746,"post_id":26076965,"comment_id":63900010,"body_markdown":"http://stackoverflow.com/questions/38222410/recyclerview-with-footer-not-able-to-delete-last-item","body":"<a href=\"http://stackoverflow.com/questions/38222410/recyclerview-with-footer-not-able-to-delete-last-item\" title=\"recyclerview with footer not able to delete last item\">stackoverflow.com/questions/38222410/&hellip;</a>"},{"owner":{"account_id":2401597,"reputation":9579,"user_id":3240381,"accept_rate":74,"display_name":"Cabezas"},"score":1,"creation_date":1485952115,"post_id":26076965,"comment_id":71137206,"body_markdown":"You can see [this example in Github](https://github.com/CabezasGonzalezJavier/FullRecycleView/tree/master/app/src/main/java/com/thedeveloperworldisyours/fullrecycleview/vertical) Happy code!!!!","body":"You can see <a href=\"https://github.com/CabezasGonzalezJavier/FullRecycleView/tree/master/app/src/main/java/com/thedeveloperworldisyours/fullrecycleview/vertical\" rel=\"nofollow noreferrer\">this example in Github</a> Happy code!!!!"}],"answers":[{"comments":[{"owner":{"account_id":5372400,"reputation":1,"user_id":4280522,"display_name":"Chris Angell"},"score":54,"creation_date":1416612483,"post_id":26310638,"comment_id":42659132,"body_markdown":"you will also want to add `notifyItemRangeChanged(getPosition, mDataSet.size());` to paradite&#39;s answer after you remove the item so that all the views below the item removed will adjust accordingly.","body":"you will also want to add <code>notifyItemRangeChanged(getPosition, mDataSet.size());</code> to paradite&#39;s answer after you remove the item so that all the views below the item removed will adjust accordingly."},{"owner":{"account_id":1157423,"reputation":37963,"user_id":1137669,"accept_rate":54,"display_name":"basickarl"},"score":0,"creation_date":1425430437,"post_id":26310638,"comment_id":45958559,"body_markdown":"I see you have also called notifyItemRemoved, is removeAt to be invoked via the UI thread for the UI to update, or can it be called by any thread and will automatically update the UI?","body":"I see you have also called notifyItemRemoved, is removeAt to be invoked via the UI thread for the UI to update, or can it be called by any thread and will automatically update the UI?"},{"owner":{"account_id":1079087,"reputation":1779,"user_id":1076574,"accept_rate":84,"display_name":"chip"},"score":3,"creation_date":1430704757,"post_id":26310638,"comment_id":48160448,"body_markdown":"i have the same problem but `getPosition()` is now deprecated","body":"i have the same problem but <code>getPosition()</code> is now deprecated"},{"owner":{"account_id":3606222,"reputation":999,"user_id":3008340,"accept_rate":60,"display_name":"Ektos974"},"score":4,"creation_date":1434024878,"post_id":26310638,"comment_id":49610870,"body_markdown":"Thanks, apparently just calling `notifyItemRemoved(position)` wasn&#39;t enough.","body":"Thanks, apparently just calling <code>notifyItemRemoved(position)</code> wasn&#39;t enough."},{"owner":{"account_id":314204,"reputation":4900,"user_id":629259,"accept_rate":88,"display_name":"Tyler Pfaff"},"score":3,"creation_date":1434498325,"post_id":26310638,"comment_id":49801081,"body_markdown":"@chip Use getAdapterPosition()","body":"@chip Use getAdapterPosition()"},{"owner":{"account_id":787148,"reputation":1765,"user_id":860311,"accept_rate":47,"display_name":"Vito Valov"},"score":2,"creation_date":1441106416,"post_id":26310638,"comment_id":52534650,"body_markdown":"this code doesn&#39;t fix a problem when you quickly remove items from both top and below.","body":"this code doesn&#39;t fix a problem when you quickly remove items from both top and below."},{"owner":{"account_id":6324551,"reputation":2049,"user_id":4911382,"accept_rate":47,"display_name":"Benjamin Scharbau"},"score":1,"creation_date":1444095256,"post_id":26310638,"comment_id":53745770,"body_markdown":"Thanks for the hint with the `notifyItemRangeChanged()`, that was giving me quite a headache","body":"Thanks for the hint with the <code>notifyItemRangeChanged()</code>, that was giving me quite a headache"},{"owner":{"account_id":4744455,"reputation":2719,"user_id":3836137,"accept_rate":40,"display_name":"Ameen Maheen"},"score":0,"creation_date":1452245028,"post_id":26310638,"comment_id":57091972,"body_markdown":"@chip use getAdapterPosition() instead","body":"@chip use getAdapterPosition() instead"},{"owner":{"account_id":4823909,"reputation":278,"user_id":3893853,"display_name":"fvasquezjatar"},"score":1,"creation_date":1453215096,"post_id":26310638,"comment_id":57497506,"body_markdown":"I Only need call this function after notifyItemRemoved(position); -&gt; notifyItemRangeChanged(position, mDataSet.size()); Thanks !","body":"I Only need call this function after notifyItemRemoved(position); -&gt; notifyItemRangeChanged(position, mDataSet.size()); Thanks !"},{"owner":{"account_id":1902705,"reputation":3125,"user_id":1718223,"accept_rate":71,"display_name":"abbasalim"},"score":0,"creation_date":1466081709,"post_id":26310638,"comment_id":63176850,"body_markdown":"very thanks for :notifyItemRangeChanged(position, mDataSet.size());","body":"very thanks for :notifyItemRangeChanged(position, mDataSet.size());"},{"owner":{"account_id":4162303,"reputation":1389,"user_id":3412127,"display_name":"Akah"},"score":1,"creation_date":1474506379,"post_id":26310638,"comment_id":66562672,"body_markdown":"NotityItemRangeChanged is not necessary when we are removing just a single item at a time. So i think just keeping it simple with notifyItemRemoved is enough to go with.","body":"NotityItemRangeChanged is not necessary when we are removing just a single item at a time. So i think just keeping it simple with notifyItemRemoved is enough to go with."},{"owner":{"account_id":5946625,"reputation":664,"user_id":4675947,"accept_rate":67,"display_name":"Arjun Issar"},"score":0,"creation_date":1479127055,"post_id":26310638,"comment_id":68413099,"body_markdown":"This does not help in case of removing the last element.","body":"This does not help in case of removing the last element."},{"owner":{"account_id":7618582,"reputation":389,"user_id":5777211,"accept_rate":33,"display_name":"Johannes Muenichsdorfer"},"score":0,"creation_date":1493226334,"post_id":26310638,"comment_id":74329135,"body_markdown":"@ChrisAngell Thanks for mentioning! Why is this not implemented in the &quot;notifyItemRemoved&quot; method? ... oh Google :(","body":"@ChrisAngell Thanks for mentioning! Why is this not implemented in the &quot;notifyItemRemoved&quot; method? ... oh Google :("},{"owner":{"account_id":2227186,"reputation":412,"user_id":1965643,"accept_rate":83,"display_name":"alice_silver_man"},"score":0,"creation_date":1499400937,"post_id":26310638,"comment_id":76899946,"body_markdown":"I also set the visibility of the view to View.GONE before calling remove function in the case where the user double taps the delete button.","body":"I also set the visibility of the view to View.GONE before calling remove function in the case where the user double taps the delete button."},{"owner":{"account_id":10273443,"reputation":1370,"user_id":7581159,"accept_rate":100,"display_name":"Moisoni Ioan"},"score":0,"creation_date":1544693206,"post_id":26310638,"comment_id":94369367,"body_markdown":"For double click problem (`index out of bounds exception`) you can use `  if (holder.getAdapterPosition() != RecyclerView.NO_POSITION) { //your code here }\nin `OnClickMethod`","body":"For double click problem (<code>index out of bounds exception</code>) you can use `  if (holder.getAdapterPosition() != RecyclerView.NO_POSITION) { //your code here } in <code>OnClickMethod</code>"},{"owner":{"account_id":7011083,"reputation":1926,"user_id":5373949,"display_name":"Thamer"},"score":0,"creation_date":1575757803,"post_id":26310638,"comment_id":104674742,"body_markdown":"@paradite can you update your answer as it&#39;s out of date please?","body":"@paradite can you update your answer as it&#39;s out of date please?"},{"owner":{"account_id":12605951,"reputation":2564,"user_id":9166855,"display_name":"Prajwal Waingankar"},"score":0,"creation_date":1634034655,"post_id":26310638,"comment_id":122912387,"body_markdown":"Cannot call this method while RecyclerView is computing a layout or scrolling getting this when called!","body":"Cannot call this method while RecyclerView is computing a layout or scrolling getting this when called!"},{"owner":{"account_id":236549,"reputation":2564,"user_id":504112,"accept_rate":55,"display_name":"gumuruh"},"score":0,"creation_date":1682716748,"post_id":26310638,"comment_id":134265111,"body_markdown":"what if the remote method without index given? I mean if we clear all items? @MoisoniIoan","body":"what if the remote method without index given? I mean if we clear all items? @MoisoniIoan"}],"tags":[],"owner":{"account_id":1588297,"reputation":6298,"user_id":1472186,"accept_rate":75,"display_name":"paradite"},"comment_count":18,"down_vote_count":2,"up_vote_count":315,"is_accepted":true,"score":313,"last_activity_date":1640218511,"creation_date":1412996777,"answer_id":26310638,"question_id":26076965,"body_markdown":"I have done something similar.\r\nIn your `MyAdapter`:\r\n\r\n    public class ViewHolder extends RecyclerView.ViewHolder implements View.OnClickListener{\r\n        public CardView mCardView;\r\n        public TextView mTextViewTitle;\r\n        public TextView mTextViewContent;\r\n        public ImageView mImageViewContentPic;\r\n        \r\n        public ImageView imgViewRemoveIcon;\r\n        public ViewHolder(View v) {\r\n            super(v);\r\n            mCardView = (CardView) v.findViewById(R.id.card_view);\r\n            mTextViewTitle = (TextView) v.findViewById(R.id.item_title);\r\n            mTextViewContent = (TextView) v.findViewById(R.id.item_content);\r\n            mImageViewContentPic = (ImageView) v.findViewById(R.id.item_content_pic);\r\n            //......\r\n            imgViewRemoveIcon = (ImageView) v.findViewById(R.id.remove_icon);\r\n\r\n            mTextViewContent.setOnClickListener(this);\r\n            imgViewRemoveIcon.setOnClickListener(this);\r\n            v.setOnClickListener(this);\r\n            mTextViewContent.setOnLongClickListener(new View.OnLongClickListener() {\r\n                @Override\r\n                public boolean onLongClick(View view) {\r\n                    if (mItemClickListener != null) {\r\n                        mItemClickListener.onItemClick(view, getPosition());\r\n                    }\r\n                    return false;\r\n                }\r\n            });\r\n        }\r\n\r\n\r\n        @Override\r\n        public void onClick(View v) {\r\n            //Log.d(&quot;View: &quot;, v.toString());\r\n            //Toast.makeText(v.getContext(), mTextViewTitle.getText() + &quot; position = &quot; + getPosition(), Toast.LENGTH_SHORT).show();\r\n            if(v.equals(imgViewRemoveIcon)){\r\n                removeAt(getPosition());\r\n            }else if (mItemClickListener != null) {\r\n                mItemClickListener.onItemClick(v, getPosition());\r\n            }\r\n        }\r\n    }\r\n\r\n    public void setOnItemClickListener(final OnItemClickListener mItemClickListener) {\r\n        this.mItemClickListener = mItemClickListener;\r\n    }\r\n    public void removeAt(int position) {\r\n        mDataset.remove(position);\r\n        notifyItemRemoved(position);\r\n        notifyItemRangeChanged(position, mDataSet.size());\r\n    }\r\n\r\n**Edit:**\r\n\r\n`getPosition()` is deprecated now, use `getAdapterPosition()` instead.\r\n","title":"Android RecyclerView addition &amp; removal of items","body":"<p>I have done something similar.\nIn your <code>MyAdapter</code>:</p>\n<pre><code>public class ViewHolder extends RecyclerView.ViewHolder implements View.OnClickListener{\n    public CardView mCardView;\n    public TextView mTextViewTitle;\n    public TextView mTextViewContent;\n    public ImageView mImageViewContentPic;\n    \n    public ImageView imgViewRemoveIcon;\n    public ViewHolder(View v) {\n        super(v);\n        mCardView = (CardView) v.findViewById(R.id.card_view);\n        mTextViewTitle = (TextView) v.findViewById(R.id.item_title);\n        mTextViewContent = (TextView) v.findViewById(R.id.item_content);\n        mImageViewContentPic = (ImageView) v.findViewById(R.id.item_content_pic);\n        //......\n        imgViewRemoveIcon = (ImageView) v.findViewById(R.id.remove_icon);\n\n        mTextViewContent.setOnClickListener(this);\n        imgViewRemoveIcon.setOnClickListener(this);\n        v.setOnClickListener(this);\n        mTextViewContent.setOnLongClickListener(new View.OnLongClickListener() {\n            @Override\n            public boolean onLongClick(View view) {\n                if (mItemClickListener != null) {\n                    mItemClickListener.onItemClick(view, getPosition());\n                }\n                return false;\n            }\n        });\n    }\n\n\n    @Override\n    public void onClick(View v) {\n        //Log.d(&quot;View: &quot;, v.toString());\n        //Toast.makeText(v.getContext(), mTextViewTitle.getText() + &quot; position = &quot; + getPosition(), Toast.LENGTH_SHORT).show();\n        if(v.equals(imgViewRemoveIcon)){\n            removeAt(getPosition());\n        }else if (mItemClickListener != null) {\n            mItemClickListener.onItemClick(v, getPosition());\n        }\n    }\n}\n\npublic void setOnItemClickListener(final OnItemClickListener mItemClickListener) {\n    this.mItemClickListener = mItemClickListener;\n}\npublic void removeAt(int position) {\n    mDataset.remove(position);\n    notifyItemRemoved(position);\n    notifyItemRangeChanged(position, mDataSet.size());\n}\n</code></pre>\n<p><strong>Edit:</strong></p>\n<p><code>getPosition()</code> is deprecated now, use <code>getAdapterPosition()</code> instead.</p>\n"},{"comments":[{"owner":{"account_id":2168664,"reputation":1978,"user_id":1921204,"accept_rate":77,"display_name":"MohanRaj S"},"score":2,"creation_date":1475824092,"post_id":38167883,"comment_id":67107292,"body_markdown":"thanks your overmuch, suppose i have to add more values means what can i do for that.","body":"thanks your overmuch, suppose i have to add more values means what can i do for that."},{"owner":{"account_id":7537434,"reputation":1684,"user_id":5723268,"accept_rate":67,"display_name":"Zahra.HY"},"score":0,"creation_date":1485582770,"post_id":38167883,"comment_id":70995653,"body_markdown":"it`s related to size of the list in your adapter.@Hammad Nasir","body":"it`s related to size of the list in your adapter.@Hammad Nasir"},{"owner":{"account_id":4691651,"reputation":2108,"user_id":3797630,"accept_rate":20,"display_name":"Hitesh Dhamshaniya"},"score":0,"creation_date":1510310813,"post_id":38167883,"comment_id":81391522,"body_markdown":"I did same, but recyclerview height not dynamicaly changed.\nmNotes.remove(position); notifyItemRemoved(position);\nnotifyItemRangeChanged(position, getItemCount());\n@Zahra.HY did I missed anything.","body":"I did same, but recyclerview height not dynamicaly changed. mNotes.remove(position); notifyItemRemoved(position); notifyItemRangeChanged(position, getItemCount()); @Zahra.HY did I missed anything."}],"tags":[],"owner":{"account_id":7537434,"reputation":1684,"user_id":5723268,"accept_rate":67,"display_name":"Zahra.HY"},"comment_count":3,"down_vote_count":1,"up_vote_count":78,"is_accepted":false,"score":77,"last_activity_date":1675872969,"creation_date":1467532526,"answer_id":38167883,"question_id":26076965,"body_markdown":"first of all, item should be removed from the list! \r\n\r\n      mDataSet.remove(getAdapterPosition());\r\n\r\nthen:\r\n\r\n      notifyItemRemoved(getAdapterPosition());\r\n      notifyItemRangeChanged(getAdapterPosition(), mDataSet.size()-getAdapterPosition());","title":"Android RecyclerView addition &amp; removal of items","body":"<p>first of all, item should be removed from the list!</p>\n<pre><code>  mDataSet.remove(getAdapterPosition());\n</code></pre>\n<p>then:</p>\n<pre><code>  notifyItemRemoved(getAdapterPosition());\n  notifyItemRangeChanged(getAdapterPosition(), mDataSet.size()-getAdapterPosition());\n</code></pre>\n"},{"comments":[{"owner":{"account_id":3428224,"reputation":154,"user_id":2873396,"accept_rate":75,"display_name":"Arun"},"score":1,"creation_date":1472645269,"post_id":38239509,"comment_id":65834132,"body_markdown":"Just set a listener and use getAdapterPosition() method inside view holder. It will return the position of the item.","body":"Just set a listener and use getAdapterPosition() method inside view holder. It will return the position of the item."}],"tags":[],"owner":{"account_id":3428224,"reputation":154,"user_id":2873396,"accept_rate":75,"display_name":"Arun"},"comment_count":1,"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1467875507,"creation_date":1467875507,"answer_id":38239509,"question_id":26076965,"body_markdown":"I tried all the above answers, but inserting or removing items to recyclerview causes problem with the position in the dataSet. Ended up using    `delete(getAdapterPosition());` inside the viewHolder which worked great at finding the position of items.","title":"Android RecyclerView addition &amp; removal of items","body":"<p>I tried all the above answers, but inserting or removing items to recyclerview causes problem with the position in the dataSet. Ended up using    <code>delete(getAdapterPosition());</code> inside the viewHolder which worked great at finding the position of items.</p>\n"},{"tags":[],"owner":{"account_id":6102174,"reputation":1735,"user_id":4760884,"accept_rate":80,"display_name":"Horatio"},"comment_count":0,"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1475170178,"creation_date":1475170178,"answer_id":39776555,"question_id":26076965,"body_markdown":"The problem I had was I was removing an item from the list that was no longer associated with the adapter to make sure you are modifying the correct adapter you can implement a method like this in your adapter:\r\n\r\n    public void removeItemAtPosition(int position) {\r\n        items.remove(position);\r\n    }\r\n\r\nAnd call it in your fragment or activity like this: \r\n\r\n    adapter.removeItemAtPosition(position);","title":"Android RecyclerView addition &amp; removal of items","body":"<p>The problem I had was I was removing an item from the list that was no longer associated with the adapter to make sure you are modifying the correct adapter you can implement a method like this in your adapter:</p>\n\n<pre><code>public void removeItemAtPosition(int position) {\n    items.remove(position);\n}\n</code></pre>\n\n<p>And call it in your fragment or activity like this: </p>\n\n<pre><code>adapter.removeItemAtPosition(position);\n</code></pre>\n"},{"comments":[{"owner":{"account_id":4691651,"reputation":2108,"user_id":3797630,"accept_rate":20,"display_name":"Hitesh Dhamshaniya"},"score":0,"creation_date":1510310732,"post_id":40710448,"comment_id":81391461,"body_markdown":"@Mostafa: Suppose I have 10 item and I remove the last one, in that scenario holder.itemView.setVisibility(View.GONE), Hide all data,","body":"@Mostafa: Suppose I have 10 item and I remove the last one, in that scenario holder.itemView.setVisibility(View.GONE), Hide all data,"},{"owner":{"account_id":3626293,"reputation":3515,"user_id":3023833,"display_name":"Mostafa Anter"},"score":0,"creation_date":1513570785,"post_id":40710448,"comment_id":82689124,"body_markdown":"@HiteshDhamshaniya no it just hide and gone the last view","body":"@HiteshDhamshaniya no it just hide and gone the last view"},{"owner":{"account_id":4023896,"reputation":957,"user_id":4471049,"accept_rate":89,"display_name":"Karue Benson Karue"},"score":0,"creation_date":1538465910,"post_id":40710448,"comment_id":92141849,"body_markdown":"No need to hide the view. dataSet.remove(position) works fine, but yoi need to call notifyDatasetChamged() or notifyItemRemoved(dataset.size() - 1)","body":"No need to hide the view. dataSet.remove(position) works fine, but yoi need to call notifyDatasetChamged() or notifyItemRemoved(dataset.size() - 1)"},{"owner":{"account_id":8296563,"reputation":404,"user_id":6236646,"display_name":"K.Hayoev"},"score":0,"creation_date":1578726350,"post_id":40710448,"comment_id":105540519,"body_markdown":"thanks for  holder.itemView.setVisibility(View.GONE);","body":"thanks for  holder.itemView.setVisibility(View.GONE);"},{"owner":{"account_id":72095,"reputation":18817,"user_id":208273,"display_name":"Ryan M"},"score":0,"creation_date":1681509412,"post_id":40710448,"comment_id":134073672,"body_markdown":"This is not correct; remember that `ViewHolder`s are recycled, so setting the visibility to `GONE` will leave it set to `GONE` on some other item; also, RecyclerView does not actually respect the `GONE` property when laying out views.","body":"This is not correct; remember that <code>ViewHolder</code>s are recycled, so setting the visibility to <code>GONE</code> will leave it set to <code>GONE</code> on some other item; also, RecyclerView does not actually respect the <code>GONE</code> property when laying out views."}],"tags":[],"owner":{"account_id":3626293,"reputation":3515,"user_id":3023833,"display_name":"Mostafa Anter"},"comment_count":5,"down_vote_count":2,"up_vote_count":34,"is_accepted":false,"score":32,"last_activity_date":1579907706,"creation_date":1479682770,"answer_id":40710448,"question_id":26076965,"body_markdown":"if still item not removed use this magic method :)\r\n\r\n    private void deleteItem(int position) {\r\n            mDataSet.remove(position);\r\n            notifyItemRemoved(position);\r\n            notifyItemRangeChanged(position, mDataSet.size());\r\n            holder.itemView.setVisibility(View.GONE);\r\n    }\r\n\r\nKotlin version\r\n\r\n    private fun deleteItem(position: Int) {\r\n        mDataSet.removeAt(position)\r\n        notifyItemRemoved(position)\r\n        notifyItemRangeChanged(position, mDataSet.size)\r\n        holder.itemView.visibility = View.GONE\r\n    }","title":"Android RecyclerView addition &amp; removal of items","body":"<p>if still item not removed use this magic method :)</p>\n\n<pre><code>private void deleteItem(int position) {\n        mDataSet.remove(position);\n        notifyItemRemoved(position);\n        notifyItemRangeChanged(position, mDataSet.size());\n        holder.itemView.setVisibility(View.GONE);\n}\n</code></pre>\n\n<p>Kotlin version</p>\n\n<pre><code>private fun deleteItem(position: Int) {\n    mDataSet.removeAt(position)\n    notifyItemRemoved(position)\n    notifyItemRangeChanged(position, mDataSet.size)\n    holder.itemView.visibility = View.GONE\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":4226546,"reputation":971,"user_id":3459944,"display_name":"Hassan Jamil"},"comment_count":0,"down_vote_count":0,"up_vote_count":7,"is_accepted":false,"score":7,"last_activity_date":1503781150,"creation_date":1503781150,"answer_id":45899633,"question_id":26076965,"body_markdown":"Possibly a duplicate answer but quite useful for me. You can implement the method given below in `RecyclerView.Adapter&lt;RecyclerView.ViewHolder&gt;` \r\nand can use this method as per your requirements, I hope it will work for you\r\n\r\n    public void removeItem(@NonNull Object object) {\r\n            mDataSetList.remove(object);\r\n            notifyDataSetChanged();\r\n        }","title":"Android RecyclerView addition &amp; removal of items","body":"<p>Possibly a duplicate answer but quite useful for me. You can implement the method given below in <code>RecyclerView.Adapter&lt;RecyclerView.ViewHolder&gt;</code> \nand can use this method as per your requirements, I hope it will work for you</p>\n\n<pre><code>public void removeItem(@NonNull Object object) {\n        mDataSetList.remove(object);\n        notifyDataSetChanged();\n    }\n</code></pre>\n"},{"comments":[{"owner":{"account_id":1879830,"reputation":2077,"user_id":1737624,"accept_rate":53,"display_name":"Minas Mina"},"score":0,"creation_date":1540238059,"post_id":46482582,"comment_id":92782802,"body_markdown":"This is a really bad idea, as you will force a full re-draw of the items, with probably noticeable lag if you have a lot of items. The correct thing to do is to call `notifyItemRemoved(position)`.","body":"This is a really bad idea, as you will force a full re-draw of the items, with probably noticeable lag if you have a lot of items. The correct thing to do is to call <code>notifyItemRemoved(position)</code>."},{"owner":{"account_id":9161047,"reputation":900,"user_id":6812333,"display_name":"Tarun Umath"},"score":0,"creation_date":1540299044,"post_id":46482582,"comment_id":92806914,"body_markdown":"ya your correct we also use notifyItemRemoved(position) instated of\nnotifyDataSetChanged()","body":"ya your correct we also use notifyItemRemoved(position) instated of notifyDataSetChanged()"}],"tags":[],"owner":{"account_id":9161047,"reputation":900,"user_id":6812333,"display_name":"Tarun Umath"},"comment_count":2,"down_vote_count":1,"up_vote_count":2,"is_accepted":false,"score":1,"last_activity_date":1534836271,"creation_date":1506664708,"answer_id":46482582,"question_id":26076965,"body_markdown":" \r\n\r\n      String str = arrayList.get(position);\r\n      arrayList.remove(str);\r\n      MyAdapter.this.notifyDataSetChanged();\r\n                   ","title":"Android RecyclerView addition &amp; removal of items","body":"<pre><code>  String str = arrayList.get(position);\n  arrayList.remove(str);\n  MyAdapter.this.notifyDataSetChanged();\n</code></pre>\n"},{"tags":[],"owner":{"account_id":9549572,"reputation":401,"user_id":7094167,"display_name":"Sayed Mohammad Amin Emrani"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1508929087,"creation_date":1508929087,"answer_id":46930618,"question_id":26076965,"body_markdown":"if you want to remove item you should do this:\r\nfirst remove item:\r\n\r\n    phones.remove(position);\r\nin next step you should notify your recycler adapter that you remove an item by this code:\r\n\r\n    notifyItemRemoved(position);\r\n    notifyItemRangeChanged(position, phones.size());\r\n\r\nbut if you change an item do this:\r\nfirst change a parameter of your object like this:\r\n\r\n    Service s = services.get(position);\r\n    s.done = &quot;Cancel service&quot;;\r\n    services.set(position,s);\r\nor new it like this :\r\n\r\n    Service s = new Service();\r\n    services.set(position,s);\r\nthen notify your recycler adapter that you modify an item by this code:\r\n\r\n    notifyItemChanged(position);\r\n    notifyItemRangeChanged(position, services.size());\r\n\r\nhope helps you.","title":"Android RecyclerView addition &amp; removal of items","body":"<p>if you want to remove item you should do this:\nfirst remove item:</p>\n\n<pre><code>phones.remove(position);\n</code></pre>\n\n<p>in next step you should notify your recycler adapter that you remove an item by this code:</p>\n\n<pre><code>notifyItemRemoved(position);\nnotifyItemRangeChanged(position, phones.size());\n</code></pre>\n\n<p>but if you change an item do this:\nfirst change a parameter of your object like this:</p>\n\n<pre><code>Service s = services.get(position);\ns.done = \"Cancel service\";\nservices.set(position,s);\n</code></pre>\n\n<p>or new it like this :</p>\n\n<pre><code>Service s = new Service();\nservices.set(position,s);\n</code></pre>\n\n<p>then notify your recycler adapter that you modify an item by this code:</p>\n\n<pre><code>notifyItemChanged(position);\nnotifyItemRangeChanged(position, services.size());\n</code></pre>\n\n<p>hope helps you.</p>\n"},{"tags":[],"owner":{"account_id":4531600,"reputation":491537,"user_id":3681880,"accept_rate":90,"display_name":"Suragch"},"comment_count":0,"down_vote_count":0,"up_vote_count":11,"is_accepted":false,"score":11,"last_activity_date":1519445701,"creation_date":1519445701,"answer_id":48959300,"question_id":26076965,"body_markdown":"Here are some visual supplemental examples. See [my fuller answer][1] for examples of adding and removing a range.\r\n\r\n\r\n##Add single item\r\n\r\nAdd &quot;Pig&quot; at index `2`.\r\n\r\n&lt;img src=&quot;https://i.stack.imgur.com/VGB85.gif&quot; width=&quot;200&quot; alt=&quot;Insert single item&quot;&gt;\r\n\r\n    String item = &quot;Pig&quot;;\r\n    int insertIndex = 2;\r\n    data.add(insertIndex, item);\r\n    adapter.notifyItemInserted(insertIndex);\r\n\r\n##Remove single item\r\n\r\nRemove &quot;Pig&quot; from the list.\r\n\r\n&lt;img src=&quot;https://i.stack.imgur.com/je91J.gif&quot; width=&quot;200&quot; alt=&quot;Remove single item&quot;&gt;\r\n\r\n    int removeIndex = 2;\r\n    data.remove(removeIndex);\r\n    adapter.notifyItemRemoved(removeIndex);\r\n\r\n\r\n\r\n  [1]: https://stackoverflow.com/a/48959184/3681880","title":"Android RecyclerView addition &amp; removal of items","body":"<p>Here are some visual supplemental examples. See <a href=\"https://stackoverflow.com/a/48959184/3681880\">my fuller answer</a> for examples of adding and removing a range.</p>\n\n<h2>Add single item</h2>\n\n<p>Add \"Pig\" at index <code>2</code>.</p>\n\n<p><img src=\"https://i.stack.imgur.com/VGB85.gif\" width=\"200\" alt=\"Insert single item\"></p>\n\n<pre><code>String item = \"Pig\";\nint insertIndex = 2;\ndata.add(insertIndex, item);\nadapter.notifyItemInserted(insertIndex);\n</code></pre>\n\n<h2>Remove single item</h2>\n\n<p>Remove \"Pig\" from the list.</p>\n\n<p><img src=\"https://i.stack.imgur.com/je91J.gif\" width=\"200\" alt=\"Remove single item\"></p>\n\n<pre><code>int removeIndex = 2;\ndata.remove(removeIndex);\nadapter.notifyItemRemoved(removeIndex);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":9550799,"reputation":825,"user_id":7095029,"accept_rate":67,"display_name":"ci0ccarellia"},"comment_count":0,"down_vote_count":0,"up_vote_count":27,"is_accepted":false,"score":27,"last_activity_date":1637849649,"creation_date":1529406954,"answer_id":50927082,"question_id":26076965,"body_markdown":"# The Problem\r\n`RecyclerView` was built to display data in an efficient and responsive manner.\r\nUsually you have a dataset which is passed to your adapter and is looped through to display your data.\r\nHere your dataset is:\r\n\r\n    private ArrayList&lt;String&gt; mDataset;\r\n\r\nThe point is that RecyclerView is not connected to your dataset, and therefore is unaware of your dataset changes.\r\n\r\nIt just reads data once and displays it through your ViewHolder, but a change to your dataset will not propagate to your UI.\r\n\r\nThis means that whenever you make a deletion/addition on your data list, those changes won&#39;t be reflected to your RecyclerView directly. (i.e. you remove the item at index 5, but the 6th element remains in your recycler view).\r\n\r\n# A (old school) solution\r\n`RecyclerView` exposes some methods for you to communicate your dataset changes, reflecting those changes directly on your list items.\r\n\r\nThe standard Android APIs allow you to bind the process of data *removal* (for the purpose of the question) with the process of View removal.\r\n\r\nThe methods we are talking about are:\r\n```kotlin\r\nnotifyItemChanged(index: Int)\r\nnotifyItemInserted(index: Int)\r\nnotifyItemRemoved(index: Int)\r\nnotifyItemRangeChanged(startPosition: Int, itemCount: Int)\r\nnotifyItemRangeInserted(startPosition: Int, itemCount: Int)\r\nnotifyItemRangeRemoved(startPosition: Int, itemCount: Int)\r\n```\r\n\r\n# A Complete (old school) Solution\r\nIf you don&#39;t *properly* specify what happens on each addition, change or removal of items, `RecyclerView` list items are animated unresponsively because of a lack of information about how to move the different views around the list.\r\n\r\nThe following code will allow RecyclerView to precisely play the animation with regards to the view that is being removed (And as a side note, it fixes any `IndexOutOfBoundException`s, marked by the stacktrace as &quot;data inconsistency&quot;).\r\n```kotlin\r\nvoid remove(position: Int) {\r\n    dataset.removeAt(position)\r\n    notifyItemChanged(position)\r\n    notifyItemRangeRemoved(position, 1)\r\n}\r\n```\r\n\r\nUnder the hood, if we look into `RecyclerView` we can find documentation explaining that the second parameter we pass to `notifyItemRangeRemoved ` is the number of items that **are removed** from the dataset, not the total number of items (As wrongly reported in some others information sources).\r\n\r\n        /**\r\n         * Notify any registered observers that the &lt;code&gt;itemCount&lt;/code&gt; items previously\r\n         * located at &lt;code&gt;positionStart&lt;/code&gt; have been removed from the data set. The items\r\n         * previously located at and after &lt;code&gt;positionStart + itemCount&lt;/code&gt; may now be found\r\n         * at &lt;code&gt;oldPosition - itemCount&lt;/code&gt;.\r\n         *\r\n         * &lt;p&gt;This is a structural change event. Representations of other existing items in the data\r\n         * set are still considered up to date and will not be rebound, though their positions\r\n         * may be altered.&lt;/p&gt;\r\n         *\r\n         * @param positionStart Previous position of the first item that was removed\r\n         * @param itemCount Number of items removed from the data set\r\n         */\r\n        public final void notifyItemRangeRemoved(int positionStart, int itemCount) {\r\n            mObservable.notifyItemRangeRemoved(positionStart, itemCount);\r\n        }\r\n\r\n \r\n# Open source solutions\r\nYou can let a library like [FastAdapter][1], [Epoxy][2] or [Groupie][3] take care of the business, and even use an [observable recycler view][4] with data binding.\r\n\r\n# New ListAdapter\r\nGoogle recently introduced a new way of writing the recycler view adapter, which works really well and supports reactive data.\r\n\r\nIt is a new approach and requires a bit of refactoring, but it is 100% worth switching to it, as it makes everything smoother.\r\n\r\n[here][5] is the documentation, and [here][6] a medium article explaining it\r\n\r\n  [1]: https://github.com/mikepenz/FastAdapter\r\n  [2]: https://github.com/airbnb/epoxy\r\n  [3]: https://github.com/lisawray/groupie\r\n  [4]: https://stackoverflow.com/questions/34019978/android-data-binding-observable-list-to-recyclerviews-adapter\r\n  [5]: https://developer.android.com/reference/androidx/recyclerview/widget/ListAdapter\r\n  [6]: https://medium.com/androiddevelopers/adapting-to-listadapter-341da4218f5b","title":"Android RecyclerView addition &amp; removal of items","body":"<h1>The Problem</h1>\n<p><code>RecyclerView</code> was built to display data in an efficient and responsive manner.\nUsually you have a dataset which is passed to your adapter and is looped through to display your data.\nHere your dataset is:</p>\n<pre><code>private ArrayList&lt;String&gt; mDataset;\n</code></pre>\n<p>The point is that RecyclerView is not connected to your dataset, and therefore is unaware of your dataset changes.</p>\n<p>It just reads data once and displays it through your ViewHolder, but a change to your dataset will not propagate to your UI.</p>\n<p>This means that whenever you make a deletion/addition on your data list, those changes won't be reflected to your RecyclerView directly. (i.e. you remove the item at index 5, but the 6th element remains in your recycler view).</p>\n<h1>A (old school) solution</h1>\n<p><code>RecyclerView</code> exposes some methods for you to communicate your dataset changes, reflecting those changes directly on your list items.</p>\n<p>The standard Android APIs allow you to bind the process of data <em>removal</em> (for the purpose of the question) with the process of View removal.</p>\n<p>The methods we are talking about are:</p>\n<pre class=\"lang-kotlin prettyprint-override\"><code>notifyItemChanged(index: Int)\nnotifyItemInserted(index: Int)\nnotifyItemRemoved(index: Int)\nnotifyItemRangeChanged(startPosition: Int, itemCount: Int)\nnotifyItemRangeInserted(startPosition: Int, itemCount: Int)\nnotifyItemRangeRemoved(startPosition: Int, itemCount: Int)\n</code></pre>\n<h1>A Complete (old school) Solution</h1>\n<p>If you don't <em>properly</em> specify what happens on each addition, change or removal of items, <code>RecyclerView</code> list items are animated unresponsively because of a lack of information about how to move the different views around the list.</p>\n<p>The following code will allow RecyclerView to precisely play the animation with regards to the view that is being removed (And as a side note, it fixes any <code>IndexOutOfBoundException</code>s, marked by the stacktrace as &quot;data inconsistency&quot;).</p>\n<pre class=\"lang-kotlin prettyprint-override\"><code>void remove(position: Int) {\n    dataset.removeAt(position)\n    notifyItemChanged(position)\n    notifyItemRangeRemoved(position, 1)\n}\n</code></pre>\n<p>Under the hood, if we look into <code>RecyclerView</code> we can find documentation explaining that the second parameter we pass to <code>notifyItemRangeRemoved </code> is the number of items that <strong>are removed</strong> from the dataset, not the total number of items (As wrongly reported in some others information sources).</p>\n<pre><code>    /**\n     * Notify any registered observers that the &lt;code&gt;itemCount&lt;/code&gt; items previously\n     * located at &lt;code&gt;positionStart&lt;/code&gt; have been removed from the data set. The items\n     * previously located at and after &lt;code&gt;positionStart + itemCount&lt;/code&gt; may now be found\n     * at &lt;code&gt;oldPosition - itemCount&lt;/code&gt;.\n     *\n     * &lt;p&gt;This is a structural change event. Representations of other existing items in the data\n     * set are still considered up to date and will not be rebound, though their positions\n     * may be altered.&lt;/p&gt;\n     *\n     * @param positionStart Previous position of the first item that was removed\n     * @param itemCount Number of items removed from the data set\n     */\n    public final void notifyItemRangeRemoved(int positionStart, int itemCount) {\n        mObservable.notifyItemRangeRemoved(positionStart, itemCount);\n    }\n</code></pre>\n<h1>Open source solutions</h1>\n<p>You can let a library like <a href=\"https://github.com/mikepenz/FastAdapter\" rel=\"nofollow noreferrer\">FastAdapter</a>, <a href=\"https://github.com/airbnb/epoxy\" rel=\"nofollow noreferrer\">Epoxy</a> or <a href=\"https://github.com/lisawray/groupie\" rel=\"nofollow noreferrer\">Groupie</a> take care of the business, and even use an <a href=\"https://stackoverflow.com/questions/34019978/android-data-binding-observable-list-to-recyclerviews-adapter\">observable recycler view</a> with data binding.</p>\n<h1>New ListAdapter</h1>\n<p>Google recently introduced a new way of writing the recycler view adapter, which works really well and supports reactive data.</p>\n<p>It is a new approach and requires a bit of refactoring, but it is 100% worth switching to it, as it makes everything smoother.</p>\n<p><a href=\"https://developer.android.com/reference/androidx/recyclerview/widget/ListAdapter\" rel=\"nofollow noreferrer\">here</a> is the documentation, and <a href=\"https://medium.com/androiddevelopers/adapting-to-listadapter-341da4218f5b\" rel=\"nofollow noreferrer\">here</a> a medium article explaining it</p>\n"},{"comments":[{"owner":{"account_id":72095,"reputation":18817,"user_id":208273,"display_name":"Ryan M"},"score":0,"creation_date":1681509610,"post_id":51257783,"comment_id":134073698,"body_markdown":"This is wildly inefficient.  You know the position being removed; there is no reason to do a `notifyDataSetChanged `.  Also, this is _very_ risky: the position will change as items are moved around, and it may not be rebound if you&#39;re using granular updates like you should be.  Use `getAdapterPosition()` instead of this hack with the tag; that&#39;s why it exists.","body":"This is wildly inefficient.  You know the position being removed; there is no reason to do a <code>notifyDataSetChanged </code>.  Also, this is <i>very</i> risky: the position will change as items are moved around, and it may not be rebound if you&#39;re using granular updates like you should be.  Use <code>getAdapterPosition()</code> instead of this hack with the tag; that&#39;s why it exists."}],"tags":[],"owner":{"account_id":6724779,"reputation":1030,"user_id":5922271,"display_name":"roshan posakya"},"comment_count":1,"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1531200424,"creation_date":1531200424,"answer_id":51257783,"question_id":26076965,"body_markdown":"     //////// set the position\r\n     holder.cancel.setTag(position);\r\n    \r\n    \r\n    ///// click to remove an item from recycler view and an array list\r\n    holder.cancel.setOnClickListener(new View.OnClickListener() {\r\n              @Override\r\n              public void onClick(View view) {\r\n    \r\n                int positionToRemove = (int)view.getTag(); //get the position of the view to delete stored in the tag\r\n                mDataset.remove(positionToRemove);\r\n                notifyDataSetChanged();\r\n                    }\r\n                });\r\n\r\n","title":"Android RecyclerView addition &amp; removal of items","body":"<pre><code> //////// set the position\n holder.cancel.setTag(position);\n\n\n///// click to remove an item from recycler view and an array list\nholder.cancel.setOnClickListener(new View.OnClickListener() {\n          @Override\n          public void onClick(View view) {\n\n            int positionToRemove = (int)view.getTag(); //get the position of the view to delete stored in the tag\n            mDataset.remove(positionToRemove);\n            notifyDataSetChanged();\n                }\n            });\n</code></pre>\n"},{"tags":[],"owner":{"display_name":"user4571931"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1534836849,"creation_date":1534836849,"answer_id":51943751,"question_id":26076965,"body_markdown":"make interface into custom adapter class and handling click event on recycler view..\r\n\r\n     onItemClickListner onItemClickListner;\r\n\r\n    public void setOnItemClickListner(CommentsAdapter.onItemClickListner onItemClickListner) {\r\n        this.onItemClickListner = onItemClickListner;\r\n    }\r\n\r\n    public interface onItemClickListner {\r\n        void onClick(Contact contact);//pass your object types.\r\n    }\r\n        @Override\r\n    public void onBindViewHolder(ItemViewHolder holder, int position) {\r\n        // below code handle click event on recycler view item.\r\n        holder.itemView.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View view) {\r\n                onItemClickListner.onClick(mContectList.get(position));\r\n            }\r\n        });\r\n    }\r\n\r\nafter define adapter and bind into recycler view called below code..\r\n\r\n            adapter.setOnItemClickListner(new CommentsAdapter.onItemClickListner() {\r\n            @Override\r\n            public void onClick(Contact contact) {\r\n                contectList.remove(contectList.get(contectList.indexOf(contact)));\r\n                adapter.notifyDataSetChanged();\r\n            }\r\n        });\r\n    }","title":"Android RecyclerView addition &amp; removal of items","body":"<p>make interface into custom adapter class and handling click event on recycler view..</p>\n\n<pre><code> onItemClickListner onItemClickListner;\n\npublic void setOnItemClickListner(CommentsAdapter.onItemClickListner onItemClickListner) {\n    this.onItemClickListner = onItemClickListner;\n}\n\npublic interface onItemClickListner {\n    void onClick(Contact contact);//pass your object types.\n}\n    @Override\npublic void onBindViewHolder(ItemViewHolder holder, int position) {\n    // below code handle click event on recycler view item.\n    holder.itemView.setOnClickListener(new View.OnClickListener() {\n        @Override\n        public void onClick(View view) {\n            onItemClickListner.onClick(mContectList.get(position));\n        }\n    });\n}\n</code></pre>\n\n<p>after define adapter and bind into recycler view called below code..</p>\n\n<pre><code>        adapter.setOnItemClickListner(new CommentsAdapter.onItemClickListner() {\n        @Override\n        public void onClick(Contact contact) {\n            contectList.remove(contectList.get(contectList.indexOf(contact)));\n            adapter.notifyDataSetChanged();\n        }\n    });\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":13733259,"reputation":1173,"user_id":9910265,"display_name":"Mohamed Ben Romdhane"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1596656520,"creation_date":1548338013,"answer_id":54348258,"question_id":26076965,"body_markdown":"\r\n\r\n\r\n\r\n      public class MyAdapter extends RecyclerView.Adapter&lt;MyAdapter.MyViewHolder&gt; {\r\n    private Context context;\r\n    private List&lt;cardview_widgets&gt; list;\r\n\r\n    public MyAdapter(Context context, List&lt;cardview_widgets&gt; list) {\r\n        this.context = context;\r\n        this.list = list;\r\n    }\r\n\r\n    @NonNull\r\n    @Override\r\n    public MyViewHolder onCreateViewHolder(@NonNull ViewGroup viewGroup, int i) {\r\n        View view = LayoutInflater.from(this.context).inflate(R.layout.fragment1_one_item,\r\n                viewGroup, false);\r\n        return new MyViewHolder(view);\r\n    }\r\n\r\n    public static class MyViewHolder extends RecyclerView.ViewHolder {\r\n        TextView txtValue;\r\n        TextView txtCategory;\r\n        ImageView imgInorEx;\r\n        ImageView imgCategory;\r\n        TextView txtDate;\r\n\r\n        public MyViewHolder(@NonNull View itemView) {\r\n            super(itemView);\r\n            txtValue= itemView.findViewById(R.id.id_values);\r\n            txtCategory= itemView.findViewById(R.id.id_category);\r\n            imgInorEx= itemView.findViewById(R.id.id_inorex);\r\n            imgCategory= itemView.findViewById(R.id.id_imgcategory);\r\n            txtDate= itemView.findViewById(R.id.id_date);\r\n        }\r\n    }\r\n\r\n    @NonNull\r\n    @Override\r\n    public void onBindViewHolder(@NonNull final MyViewHolder myViewHolder, int i) {\r\n\r\n        myViewHolder.txtValue.setText(String.valueOf(list.get(i).getValuee()));\r\n        myViewHolder.txtCategory.setText(list.get(i).getCategory());\r\n        myViewHolder.imgInorEx.setBackgroundColor(list.get(i).getImg_inorex());\r\n        myViewHolder.imgCategory.setImageResource(list.get(i).getImg_category());\r\n        myViewHolder.txtDate.setText(list.get(i).getDate());\r\n        myViewHolder.itemView.setOnLongClickListener(new View.OnLongClickListener() {\r\n            @Override\r\n            public boolean onLongClick(View v) {\r\n                list.remove(myViewHolder.getAdapterPosition());\r\n                notifyDataSetChanged();\r\n                return false;\r\n            }\r\n        });\r\n    }\r\n\r\n    @Override\r\n    public int getItemCount() {\r\n        return list.size();\r\n    }}      \r\n\r\ni hope this help you.","title":"Android RecyclerView addition &amp; removal of items","body":"<pre><code>  public class MyAdapter extends RecyclerView.Adapter&lt;MyAdapter.MyViewHolder&gt; {\nprivate Context context;\nprivate List&lt;cardview_widgets&gt; list;\n\npublic MyAdapter(Context context, List&lt;cardview_widgets&gt; list) {\n    this.context = context;\n    this.list = list;\n}\n\n@NonNull\n@Override\npublic MyViewHolder onCreateViewHolder(@NonNull ViewGroup viewGroup, int i) {\n    View view = LayoutInflater.from(this.context).inflate(R.layout.fragment1_one_item,\n            viewGroup, false);\n    return new MyViewHolder(view);\n}\n\npublic static class MyViewHolder extends RecyclerView.ViewHolder {\n    TextView txtValue;\n    TextView txtCategory;\n    ImageView imgInorEx;\n    ImageView imgCategory;\n    TextView txtDate;\n\n    public MyViewHolder(@NonNull View itemView) {\n        super(itemView);\n        txtValue= itemView.findViewById(R.id.id_values);\n        txtCategory= itemView.findViewById(R.id.id_category);\n        imgInorEx= itemView.findViewById(R.id.id_inorex);\n        imgCategory= itemView.findViewById(R.id.id_imgcategory);\n        txtDate= itemView.findViewById(R.id.id_date);\n    }\n}\n\n@NonNull\n@Override\npublic void onBindViewHolder(@NonNull final MyViewHolder myViewHolder, int i) {\n\n    myViewHolder.txtValue.setText(String.valueOf(list.get(i).getValuee()));\n    myViewHolder.txtCategory.setText(list.get(i).getCategory());\n    myViewHolder.imgInorEx.setBackgroundColor(list.get(i).getImg_inorex());\n    myViewHolder.imgCategory.setImageResource(list.get(i).getImg_category());\n    myViewHolder.txtDate.setText(list.get(i).getDate());\n    myViewHolder.itemView.setOnLongClickListener(new View.OnLongClickListener() {\n        @Override\n        public boolean onLongClick(View v) {\n            list.remove(myViewHolder.getAdapterPosition());\n            notifyDataSetChanged();\n            return false;\n        }\n    });\n}\n\n@Override\npublic int getItemCount() {\n    return list.size();\n}}      \n</code></pre>\n<p>i hope this help you.</p>\n"},{"tags":[],"owner":{"account_id":10229625,"reputation":187,"user_id":7550898,"display_name":"forestbaba"},"comment_count":0,"down_vote_count":1,"up_vote_count":2,"is_accepted":false,"score":1,"last_activity_date":1576609107,"creation_date":1549641144,"answer_id":54596007,"question_id":26076965,"body_markdown":"Incase Anyone wants to implement something like this  in Main class instead of Adapter class, you can use:\r\n\r\n    public void removeAt(int position) {\r\n        peopleListUser.remove(position);\r\n\r\n        friendsListRecycler.getAdapter().notifyItemRemoved(position);\r\n        friendsListRecycler.getAdapter().notifyItemRangeChanged(position, peopleListUser.size());\r\n    }\r\n\r\nwhere friendsListRecycler is the Adapter name\r\n","title":"Android RecyclerView addition &amp; removal of items","body":"<p>Incase Anyone wants to implement something like this  in Main class instead of Adapter class, you can use:</p>\n\n<pre><code>public void removeAt(int position) {\n    peopleListUser.remove(position);\n\n    friendsListRecycler.getAdapter().notifyItemRemoved(position);\n    friendsListRecycler.getAdapter().notifyItemRangeChanged(position, peopleListUser.size());\n}\n</code></pre>\n\n<p>where friendsListRecycler is the Adapter name</p>\n"},{"tags":[],"owner":{"account_id":15049793,"reputation":1414,"user_id":10861790,"display_name":"Diako Hasani"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1563025291,"creation_date":1563025291,"answer_id":57019704,"question_id":26076965,"body_markdown":"To Method `onBindViewHolder` Write This Code\r\n\r\n    holder.remove.setOnClickListener(new View.OnClickListener() {\r\n                @Override\r\n                public void onClick(View view) {\r\n                    Cursor del=dbAdapter.ExecuteQ(&quot;delete from TblItem where Id=&quot;+values.get(position).getId());\r\n                    values.remove(position);\r\n                    notifyDataSetChanged();\r\n                }\r\n            });\r\n\r\n","title":"Android RecyclerView addition &amp; removal of items","body":"<p>To Method <code>onBindViewHolder</code> Write This Code</p>\n\n<pre><code>holder.remove.setOnClickListener(new View.OnClickListener() {\n            @Override\n            public void onClick(View view) {\n                Cursor del=dbAdapter.ExecuteQ(\"delete from TblItem where Id=\"+values.get(position).getId());\n                values.remove(position);\n                notifyDataSetChanged();\n            }\n        });\n</code></pre>\n"},{"comments":[{"owner":{"account_id":72095,"reputation":18817,"user_id":208273,"display_name":"Ryan M"},"score":0,"creation_date":1681509658,"post_id":58631582,"comment_id":134073705,"body_markdown":"You also need to notify the adapter, otherwise it won&#39;t update.","body":"You also need to notify the adapter, otherwise it won&#39;t update."}],"tags":[],"owner":{"account_id":12638560,"reputation":956,"user_id":9186913,"display_name":"raj kavadia"},"comment_count":1,"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1572459749,"creation_date":1572459749,"answer_id":58631582,"question_id":26076965,"body_markdown":"In case you are wondering like I did where can we get the adapter position in the method getadapterposition(); its in viewholder object.so you have to put your code like this\r\n\r\n    mdataset.remove(holder.getadapterposition());\r\n\r\n","title":"Android RecyclerView addition &amp; removal of items","body":"<p>In case you are wondering like I did where can we get the adapter position in the method getadapterposition(); its in viewholder object.so you have to put your code like this</p>\n\n<pre><code>mdataset.remove(holder.getadapterposition());\n</code></pre>\n"},{"tags":[],"owner":{"account_id":7832532,"reputation":1060,"user_id":5921933,"accept_rate":38,"display_name":"Huy Nguyen"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1574829232,"creation_date":1574829232,"answer_id":59063060,"question_id":26076965,"body_markdown":"&gt; In the activity:\r\n\r\n    mAdapter.updateAt(pos, text, completed);\r\n    mAdapter.removeAt(pos);\r\n\r\n\r\n&gt; In the your adapter:\r\n\r\n    void removeAt(int position) {\r\n        list.remove(position);\r\n        notifyItemRemoved(position);\r\n        notifyItemRangeChanged(position, list.size());\r\n    }\r\n\r\n    void updateAt(int position, String text, Boolean completed) {\r\n        TodoEntity todoEntity = list.get(position);\r\n        todoEntity.setText(text);\r\n        todoEntity.setCompleted(completed);\r\n        notifyItemChanged(position);\r\n    }","title":"Android RecyclerView addition &amp; removal of items","body":"<blockquote>\n  <p>In the activity:</p>\n</blockquote>\n\n<pre><code>mAdapter.updateAt(pos, text, completed);\nmAdapter.removeAt(pos);\n</code></pre>\n\n<blockquote>\n  <p>In the your adapter:</p>\n</blockquote>\n\n<pre><code>void removeAt(int position) {\n    list.remove(position);\n    notifyItemRemoved(position);\n    notifyItemRangeChanged(position, list.size());\n}\n\nvoid updateAt(int position, String text, Boolean completed) {\n    TodoEntity todoEntity = list.get(position);\n    todoEntity.setText(text);\n    todoEntity.setCompleted(completed);\n    notifyItemChanged(position);\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":17660120,"reputation":67,"user_id":12818749,"display_name":"Mohammad Zolghadr"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1611268815,"creation_date":1611268815,"answer_id":65836833,"question_id":26076965,"body_markdown":"you must to remove this item from arrayList of data \r\n\r\n   \r\n\r\n    myDataset.remove(holder.getAdapterPosition());\r\n    notifyItemRemoved(holder.getAdapterPosition());\r\n    notifyItemRangeChanged(holder.getAdapterPosition(), getItemCount());","title":"Android RecyclerView addition &amp; removal of items","body":"<p>you must to remove this item from arrayList of data</p>\n<pre><code>myDataset.remove(holder.getAdapterPosition());\nnotifyItemRemoved(holder.getAdapterPosition());\nnotifyItemRangeChanged(holder.getAdapterPosition(), getItemCount());\n</code></pre>\n"},{"tags":[],"owner":{"account_id":23331518,"reputation":29,"user_id":17407846,"display_name":"Manu"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1656234365,"creation_date":1656234365,"answer_id":72760229,"question_id":26076965,"body_markdown":"in 2022, after trying everything the whole internet given below is the answer\r\n\r\n\r\nIn MyViewHolder class\r\n\r\n    private myAdapter adapter;\r\n\r\ninside MyViewHolder function initalise adapter\r\n\r\n    adapter = myAdapter.this\r\n\r\n\r\ninside onclick\r\n\r\n    int position = getAdapterPosition()\r\n    list.remove(position);\r\n                adapter.notifyItemRemoved(position);","title":"Android RecyclerView addition &amp; removal of items","body":"<p>in 2022, after trying everything the whole internet given below is the answer</p>\n<p>In MyViewHolder class</p>\n<pre><code>private myAdapter adapter;\n</code></pre>\n<p>inside MyViewHolder function initalise adapter</p>\n<pre><code>adapter = myAdapter.this\n</code></pre>\n<p>inside onclick</p>\n<pre><code>int position = getAdapterPosition()\nlist.remove(position);\n            adapter.notifyItemRemoved(position);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3524972,"reputation":828,"user_id":2946353,"display_name":"Prilaga"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1692057550,"creation_date":1692057550,"answer_id":76902768,"question_id":26076965,"body_markdown":"Part of methods are deprecated in RecyclerView. So relevant for use is `viewHolder.getAbsoluteAdapterPosition()` or `viewHolder.getBindingAdapterPosition()`\r\n\r\nsimplified code snippet inside any click listener or callback:\r\n\r\n    val adapterPosition = viewHolder.getBindingAdapterPosition()\r\n    items.removeAt(adapterPosition)\r\n    notifyItemRemoved(adapterPosition)","title":"Android RecyclerView addition &amp; removal of items","body":"<p>Part of methods are deprecated in RecyclerView. So relevant for use is <code>viewHolder.getAbsoluteAdapterPosition()</code> or <code>viewHolder.getBindingAdapterPosition()</code></p>\n<p>simplified code snippet inside any click listener or callback:</p>\n<pre><code>val adapterPosition = viewHolder.getBindingAdapterPosition()\nitems.removeAt(adapterPosition)\nnotifyItemRemoved(adapterPosition)\n</code></pre>\n"}],"owner":{"account_id":3912446,"reputation":2199,"user_id":3237355,"accept_rate":56,"display_name":"Twentyonehundred"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":335874,"favorite_count":0,"down_vote_count":1,"up_vote_count":171,"accepted_answer_id":26310638,"answer_count":20,"score":170,"last_activity_date":1692057550,"creation_date":1411836661,"question_id":26076965,"body_markdown":"I have a RecyclerView with an TextView text box and a cross button ImageView. I have a button outside of the recyclerview that makes the cross button ImageView visible / gone.\r\n\r\nI&#39;m looking to remove an item from the recylerview, when that items cross button ImageView is pressed.\r\n\r\nMy adapter:\r\n\r\n    \r\n    public class MyAdapter extends RecyclerView.Adapter&lt;MyAdapter.ViewHolder&gt; implements View.OnClickListener, View.OnLongClickListener {\r\n\r\n        private ArrayList&lt;String&gt; mDataset;\r\n        private static Context sContext;\r\n\r\n        public MyAdapter(Context context, ArrayList&lt;String&gt; myDataset) {\r\n            mDataset = myDataset;\r\n            sContext = context;\r\n        }\r\n\r\n        @Override\r\n        public MyAdapter.ViewHolder onCreateViewHolder(ViewGroup parent,int viewType) {\r\n            View v = LayoutInflater.from(parent.getContext()).inflate(R.layout.my_text_view, parent, false);\r\n\r\n            ViewHolder holder = new ViewHolder(v);\r\n            holder.mNameTextView.setOnClickListener(MyAdapter.this);\r\n            holder.mNameTextView.setOnLongClickListener(MyAdapter.this);\r\n\r\n            holder.mNameTextView.setTag(holder);\r\n\r\n            return holder;\r\n        }\r\n\r\n        @Override\r\n        public void onBindViewHolder(ViewHolder holder, int position) {\r\n\r\n            holder.mNameTextView.setText(mDataset.get(position));\r\n\r\n        }\r\n\r\n        @Override\r\n        public int getItemCount() {\r\n            return mDataset.size();\r\n        }\r\n\r\n\r\n        @Override\r\n        public void onClick(View view) {\r\n            ViewHolder holder = (ViewHolder) view.getTag();\r\n            if (view.getId() == holder.mNameTextView.getId()) {\r\n                Toast.makeText(sContext, holder.mNameTextView.getText(), Toast.LENGTH_SHORT).show();\r\n            }\r\n        }\r\n\r\n\r\n        @Override\r\n        public boolean onLongClick(View view) {\r\n            ViewHolder holder = (ViewHolder) view.getTag();\r\n            if (view.getId() == holder.mNameTextView.getId()) {\r\n                mDataset.remove(holder.getPosition());\r\n\r\n                notifyDataSetChanged();\r\n\r\n                Toast.makeText(sContext, &quot;Item &quot; + holder.mNameTextView.getText() + &quot; has been removed from list&quot;,\r\n                        Toast.LENGTH_SHORT).show();\r\n            }\r\n            return false;\r\n        }\r\n\r\n        public static class ViewHolder extends RecyclerView.ViewHolder {\r\n            public TextView mNumberRowTextView;\r\n            public TextView mNameTextView;\r\n\r\n\r\n            public ViewHolder(View v) {\r\n                super(v);\r\n\r\n                mNameTextView = (TextView) v.findViewById(R.id.nameTextView);\r\n            }\r\n        }\r\n    }\r\n\r\nMy layout is:\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\r\n    &lt;LinearLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\r\n        android:layout_width=&quot;match_parent&quot;\r\n        android:layout_height=&quot;wrap_content&quot;\r\n        android:orientation=&quot;horizontal&quot;\r\n        android:gravity=&quot;center_vertical&quot;\r\n        android:id=&quot;@+id/layout&quot;&gt;\r\n    \r\n        &lt;TextView\r\n            android:id=&quot;@+id/nameTextView&quot;\r\n            android:layout_width=&quot;wrap_content&quot;\r\n            android:layout_height=&quot;wrap_content&quot;\r\n            android:textSize=&quot;18sp&quot;\r\n            android:padding=&quot;5dp&quot;\r\n            android:background=&quot;@drawable/greyline&quot;/&gt;\r\n    \r\n        &lt;ImageView\r\n            android:id=&quot;@+id/crossButton&quot;\r\n            android:layout_width=&quot;16dp&quot;\r\n            android:layout_height=&quot;16dp&quot;\r\n            android:visibility=&quot;gone&quot;\r\n            android:layout_marginLeft=&quot;50dp&quot;\r\n            android:src=&quot;@drawable/cross&quot; /&gt;\r\n    &lt;/LinearLayout&gt;\r\n\r\nHow can I get something like an onClick working for my crossButton ImageView? Is there a better way? Maybe changing the whole item onclick into a remove the item? The recyclerview shows a list of locations that need to be edited. Any technical advice or comments / suggestions on best implementation would be hugely appreciated.","title":"Android RecyclerView addition &amp; removal of items","body":"<p>I have a RecyclerView with an TextView text box and a cross button ImageView. I have a button outside of the recyclerview that makes the cross button ImageView visible / gone.</p>\n\n<p>I'm looking to remove an item from the recylerview, when that items cross button ImageView is pressed.</p>\n\n<p>My adapter:</p>\n\n<pre><code>public class MyAdapter extends RecyclerView.Adapter&lt;MyAdapter.ViewHolder&gt; implements View.OnClickListener, View.OnLongClickListener {\n\n    private ArrayList&lt;String&gt; mDataset;\n    private static Context sContext;\n\n    public MyAdapter(Context context, ArrayList&lt;String&gt; myDataset) {\n        mDataset = myDataset;\n        sContext = context;\n    }\n\n    @Override\n    public MyAdapter.ViewHolder onCreateViewHolder(ViewGroup parent,int viewType) {\n        View v = LayoutInflater.from(parent.getContext()).inflate(R.layout.my_text_view, parent, false);\n\n        ViewHolder holder = new ViewHolder(v);\n        holder.mNameTextView.setOnClickListener(MyAdapter.this);\n        holder.mNameTextView.setOnLongClickListener(MyAdapter.this);\n\n        holder.mNameTextView.setTag(holder);\n\n        return holder;\n    }\n\n    @Override\n    public void onBindViewHolder(ViewHolder holder, int position) {\n\n        holder.mNameTextView.setText(mDataset.get(position));\n\n    }\n\n    @Override\n    public int getItemCount() {\n        return mDataset.size();\n    }\n\n\n    @Override\n    public void onClick(View view) {\n        ViewHolder holder = (ViewHolder) view.getTag();\n        if (view.getId() == holder.mNameTextView.getId()) {\n            Toast.makeText(sContext, holder.mNameTextView.getText(), Toast.LENGTH_SHORT).show();\n        }\n    }\n\n\n    @Override\n    public boolean onLongClick(View view) {\n        ViewHolder holder = (ViewHolder) view.getTag();\n        if (view.getId() == holder.mNameTextView.getId()) {\n            mDataset.remove(holder.getPosition());\n\n            notifyDataSetChanged();\n\n            Toast.makeText(sContext, \"Item \" + holder.mNameTextView.getText() + \" has been removed from list\",\n                    Toast.LENGTH_SHORT).show();\n        }\n        return false;\n    }\n\n    public static class ViewHolder extends RecyclerView.ViewHolder {\n        public TextView mNumberRowTextView;\n        public TextView mNameTextView;\n\n\n        public ViewHolder(View v) {\n            super(v);\n\n            mNameTextView = (TextView) v.findViewById(R.id.nameTextView);\n        }\n    }\n}\n</code></pre>\n\n<p>My layout is:</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"utf-8\"?&gt;\n&lt;LinearLayout xmlns:android=\"http://schemas.android.com/apk/res/android\"\n    android:layout_width=\"match_parent\"\n    android:layout_height=\"wrap_content\"\n    android:orientation=\"horizontal\"\n    android:gravity=\"center_vertical\"\n    android:id=\"@+id/layout\"&gt;\n\n    &lt;TextView\n        android:id=\"@+id/nameTextView\"\n        android:layout_width=\"wrap_content\"\n        android:layout_height=\"wrap_content\"\n        android:textSize=\"18sp\"\n        android:padding=\"5dp\"\n        android:background=\"@drawable/greyline\"/&gt;\n\n    &lt;ImageView\n        android:id=\"@+id/crossButton\"\n        android:layout_width=\"16dp\"\n        android:layout_height=\"16dp\"\n        android:visibility=\"gone\"\n        android:layout_marginLeft=\"50dp\"\n        android:src=\"@drawable/cross\" /&gt;\n&lt;/LinearLayout&gt;\n</code></pre>\n\n<p>How can I get something like an onClick working for my crossButton ImageView? Is there a better way? Maybe changing the whole item onclick into a remove the item? The recyclerview shows a list of locations that need to be edited. Any technical advice or comments / suggestions on best implementation would be hugely appreciated.</p>\n"},{"tags":["java","arrays","stringbuilder"],"comments":[{"owner":{"account_id":1547313,"reputation":82164,"user_id":1440565,"accept_rate":59,"display_name":"Code-Apprentice"},"score":1,"creation_date":1692055623,"post_id":76902678,"comment_id":135571171,"body_markdown":"Define &quot;works&quot;. What are you trying to accomplish? What is `sb`? Please show a complete code example that we can copy/paste, compile, and run ourselves without any additional errors than what you are asking about. This means you need to declare all variables that you use and include valid `System.out.println()` calls rather than just a comment.","body":"Define &quot;works&quot;. What are you trying to accomplish? What is <code>sb</code>? Please show a complete code example that we can copy/paste, compile, and run ourselves without any additional errors than what you are asking about. This means you need to declare all variables that you use and include valid <code>System.out.println()</code> calls rather than just a comment."},{"owner":{"account_id":1547313,"reputation":82164,"user_id":1440565,"accept_rate":59,"display_name":"Code-Apprentice"},"score":0,"creation_date":1692055674,"post_id":76902678,"comment_id":135571175,"body_markdown":"Also, if your question is about arrays, maybe you should do something simpler like an `int[]` to illustrate what you are doing rather than a `StringBuilder[]`.","body":"Also, if your question is about arrays, maybe you should do something simpler like an <code>int[]</code> to illustrate what you are doing rather than a <code>StringBuilder[]</code>."},{"owner":{"account_id":969721,"reputation":344527,"user_id":992484,"accept_rate":60,"display_name":"MadProgrammer"},"score":3,"creation_date":1692055935,"post_id":76902678,"comment_id":135571196,"body_markdown":"Your first loop pulls an element from the array, then assigns the variable a new reference, so element now points to somewhere else, not what&#39;s in the array.  The second assigns the reference to the array element directly","body":"Your first loop pulls an element from the array, then assigns the variable a new reference, so element now points to somewhere else, not what&#39;s in the array.  The second assigns the reference to the array element directly"},{"owner":{"account_id":248321,"reputation":62658,"user_id":523612,"accept_rate":100,"display_name":"Karl Knechtel"},"score":0,"creation_date":1694137625,"post_id":76902678,"comment_id":135855149,"body_markdown":"Does this answer your question? [Why doesn&#39;t assigning to the iteration variable in a foreach loop change the underlying data?](https://stackoverflow.com/questions/15844443/why-doesnt-assigning-to-the-iteration-variable-in-a-foreach-loop-change-the-und)","body":"Does this answer your question? <a href=\"https://stackoverflow.com/questions/15844443/why-doesnt-assigning-to-the-iteration-variable-in-a-foreach-loop-change-the-und\">Why doesn&#39;t assigning to the iteration variable in a foreach loop change the underlying data?</a>"}],"answers":[{"tags":[],"owner":{"account_id":3557625,"reputation":199021,"user_id":2970947,"display_name":"Elliott Frisch"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1692056829,"creation_date":1692056829,"answer_id":76902733,"question_id":76902678,"body_markdown":"The `for-each` loop hides the iterator, so your first approach will not work. Another solution would be generating a `Stream&lt;StringBuilder&gt;` and then converting that to an array. Assuming you want an array of `n` `StringBuilder`(s) that might look something like,\r\n\r\n\tStringBuilder[] sb = Stream.generate(() -&gt; new StringBuilder()).limit(n)\r\n\t\t\t.toArray(size -&gt; new StringBuilder[size]);\r\n\r\nNote that a `forEach` loop over the array indices would also work\r\n\r\n\tIntStream.range(0, sb.length).forEach(i -&gt; sb[i] = new StringBuilder());","title":"Questions about StringBuilder Array","body":"<p>The <code>for-each</code> loop hides the iterator, so your first approach will not work. Another solution would be generating a <code>Stream&lt;StringBuilder&gt;</code> and then converting that to an array. Assuming you want an array of <code>n</code> <code>StringBuilder</code>(s) that might look something like,</p>\n<pre><code>StringBuilder[] sb = Stream.generate(() -&gt; new StringBuilder()).limit(n)\n        .toArray(size -&gt; new StringBuilder[size]);\n</code></pre>\n<p>Note that a <code>forEach</code> loop over the array indices would also work</p>\n<pre><code>IntStream.range(0, sb.length).forEach(i -&gt; sb[i] = new StringBuilder());\n</code></pre>\n"},{"tags":[],"owner":{"display_name":"user22390653"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1692057174,"creation_date":1692057174,"answer_id":76902750,"question_id":76902678,"body_markdown":"This [answer][1] is super helpful and explains in detail about what `element` actually is in your first `for-each` loop. It&#39;s an instance of an [iterator][2], not the actual member of the `StringBuilder` array `sb`.\r\n\r\nYour second approach works because you are populating individual array elements `sb[i]` with value `&quot;&quot;`.   \r\n\r\n  \r\n\r\n \r\n\r\n\r\n  [1]: https://stackoverflow.com/a/85206/22390653\r\n  [2]: https://docs.oracle.com/javase/8/docs/api/java/util/Iterator.html","title":"Questions about StringBuilder Array","body":"<p>This <a href=\"https://stackoverflow.com/a/85206/22390653\">answer</a> is super helpful and explains in detail about what <code>element</code> actually is in your first <code>for-each</code> loop. It's an instance of an <a href=\"https://docs.oracle.com/javase/8/docs/api/java/util/Iterator.html\" rel=\"nofollow noreferrer\">iterator</a>, not the actual member of the <code>StringBuilder</code> array <code>sb</code>.</p>\n<p>Your second approach works because you are populating individual array elements <code>sb[i]</code> with value <code>&quot;&quot;</code>.</p>\n"}],"owner":{"account_id":29225936,"reputation":1,"user_id":22390627,"display_name":"hello xx"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":67,"favorite_count":0,"down_vote_count":2,"up_vote_count":0,"answer_count":2,"score":-2,"last_activity_date":1692057174,"creation_date":1692055451,"question_id":76902678,"body_markdown":"I&#39;m trying to initialize a StringBuilder with &quot;&quot;. These are 2 samples, the first one doesn&#39;t work while the second one works. Can anyone explain a bit more? Is this because StingBuilder is an object?\r\n\r\n        for (StringBuilder element : sb){\r\n            element = new StringBuilder(&quot;&quot;); \r\n        } // this solution doesn&#39;t work, print sb[0] = null\r\n\r\n        for(int i=0; i&lt;sb.length; i++){\r\n            sb[i] = new StringBuilder(&quot;&quot;);\r\n        }\r\n\r\nI&#39;m expecting both would work.","title":"Questions about StringBuilder Array","body":"<p>I'm trying to initialize a StringBuilder with &quot;&quot;. These are 2 samples, the first one doesn't work while the second one works. Can anyone explain a bit more? Is this because StingBuilder is an object?</p>\n<pre><code>    for (StringBuilder element : sb){\n        element = new StringBuilder(&quot;&quot;); \n    } // this solution doesn't work, print sb[0] = null\n\n    for(int i=0; i&lt;sb.length; i++){\n        sb[i] = new StringBuilder(&quot;&quot;);\n    }\n</code></pre>\n<p>I'm expecting both would work.</p>\n"},{"tags":["java","gradle","intellij-idea"],"comments":[{"owner":{"account_id":277416,"reputation":681878,"user_id":571407,"accept_rate":100,"display_name":"JB Nizet"},"score":1,"creation_date":1523127323,"post_id":49710330,"comment_id":86435271,"body_markdown":"Why do you add a &quot;module&quot;? Just add the directory.","body":"Why do you add a &quot;module&quot;? Just add the directory."},{"owner":{"account_id":4963389,"reputation":72161,"user_id":3993662,"accept_rate":93,"display_name":"baao"},"score":0,"creation_date":1523130157,"post_id":49710330,"comment_id":86436081,"body_markdown":"What do you see when clicking on the little arrow next to Project","body":"What do you see when clicking on the little arrow next to Project"},{"owner":{"account_id":1419645,"reputation":11379,"user_id":1344545,"accept_rate":59,"display_name":"mcfly soft"},"score":0,"creation_date":1523135562,"post_id":49710330,"comment_id":86437584,"body_markdown":"@baao: I see what you can see in the screenshot. Project is already opened in the Screenshot.","body":"@baao: I see what you can see in the screenshot. Project is already opened in the Screenshot."},{"owner":{"account_id":1419645,"reputation":11379,"user_id":1344545,"accept_rate":59,"display_name":"mcfly soft"},"score":0,"creation_date":1523135623,"post_id":49710330,"comment_id":86437598,"body_markdown":"@JB Nizet. No Creating directory is not the solution. Already tried. After creating directory the context is still not java, because I can&#39;t create a class in that folder.","body":"@JB Nizet. No Creating directory is not the solution. Already tried. After creating directory the context is still not java, because I can&#39;t create a class in that folder."},{"owner":{"account_id":277416,"reputation":681878,"user_id":571407,"accept_rate":100,"display_name":"JB Nizet"},"score":0,"creation_date":1523135677,"post_id":49710330,"comment_id":86437615,"body_markdown":"That&#39;s normal. Java classes go into src/main/java. Not in src.","body":"That&#39;s normal. Java classes go into src/main/java. Not in src."},{"owner":{"account_id":1419645,"reputation":11379,"user_id":1344545,"accept_rate":59,"display_name":"mcfly soft"},"score":1,"creation_date":1523138044,"post_id":49710330,"comment_id":86438198,"body_markdown":"src/main/java is also not there. That is not the point. It is not normal to manually add this folders. That is the point. See my answer. In my oppinion this should be a task for the IDE and not for the developer. I even was not able to add folders manually. I had to configure this hidden magical checkbox in my answer.","body":"src/main/java is also not there. That is not the point. It is not normal to manually add this folders. That is the point. See my answer. In my oppinion this should be a task for the IDE and not for the developer. I even was not able to add folders manually. I had to configure this hidden magical checkbox in my answer."},{"owner":{"account_id":2273465,"reputation":15439,"user_id":2000323,"display_name":"Andrey"},"score":1,"creation_date":1523186749,"post_id":49710330,"comment_id":86447617,"body_markdown":"Sorry, there is a bug in 2018.1 version when the project structure for a new Gradle project is not created automatically:  https://youtrack.jetbrains.com/issue/IDEA-189674 I hope it will be fixed soon.","body":"Sorry, there is a bug in 2018.1 version when the project structure for a new Gradle project is not created automatically:  <a href=\"https://youtrack.jetbrains.com/issue/IDEA-189674\" rel=\"nofollow noreferrer\">youtrack.jetbrains.com/issue/IDEA-189674</a> I hope it will be fixed soon."}],"answers":[{"comments":[{"owner":{"account_id":4956341,"reputation":751,"user_id":3988822,"display_name":"Flic"},"score":2,"creation_date":1524713852,"post_id":49712129,"comment_id":87084985,"body_markdown":"On Mac, go to IntelliJ IDEA -&gt; Preferences -&gt; Build, Execution, Deployment -&gt; Gradle.  Couldn&#39;t agree more - it&#39;s stupid.  If this is a bug as @Andrey suggests, hopefully it will be sorted soon.","body":"On Mac, go to IntelliJ IDEA -&gt; Preferences -&gt; Build, Execution, Deployment -&gt; Gradle.  Couldn&#39;t agree more - it&#39;s stupid.  If this is a bug as @Andrey suggests, hopefully it will be sorted soon."},{"owner":{"account_id":345487,"reputation":5160,"user_id":678448,"accept_rate":60,"display_name":"Thommy"},"score":4,"creation_date":1530167175,"post_id":49712129,"comment_id":89140938,"body_markdown":"In IntelliJ 2018.1.5 it is in _Build, Execution, Deployment -&gt; Build Tools -&gt; Gradle_. Also the setting is a _Project-level setting_, that means it must be set per prorject and is not available from the start-screen when no project is opened.","body":"In IntelliJ 2018.1.5 it is in <i>Build, Execution, Deployment -&gt; Build Tools -&gt; Gradle</i>. Also the setting is a <i>Project-level setting</i>, that means it must be set per prorject and is not available from the start-screen when no project is opened."},{"owner":{"account_id":8662315,"reputation":363,"user_id":6484173,"display_name":"jv110"},"score":0,"creation_date":1532318999,"post_id":49712129,"comment_id":89911186,"body_markdown":"What about Linux? Edit: It&#39;s the same as on Windows.","body":"What about Linux? Edit: It&#39;s the same as on Windows."},{"owner":{"account_id":2771323,"reputation":128,"user_id":2385868,"display_name":"npstr"},"score":10,"creation_date":1568555851,"post_id":49712129,"comment_id":102303287,"body_markdown":"Seems like this was removed in the recent 2019.2 update :(","body":"Seems like this was removed in the recent 2019.2 update :("},{"owner":{"account_id":86631,"reputation":1226,"user_id":9692178,"display_name":"ThrowableException"},"score":5,"creation_date":1578967423,"post_id":49712129,"comment_id":105603315,"body_markdown":"@npstr I also don&#39;t see this option. When I&#39;m creating a new Gradle-&gt;Java project only build.gradle &amp; settings.gradle file gets created in new empty project... How did you fix it...","body":"@npstr I also don&#39;t see this option. When I&#39;m creating a new Gradle-&gt;Java project only build.gradle &amp; settings.gradle file gets created in new empty project... How did you fix it..."}],"tags":[],"owner":{"account_id":1419645,"reputation":11379,"user_id":1344545,"accept_rate":59,"display_name":"mcfly soft"},"comment_count":5,"down_vote_count":0,"up_vote_count":65,"is_accepted":true,"score":65,"last_activity_date":1528792526,"creation_date":1523136261,"answer_id":49712129,"question_id":49710330,"body_markdown":"**For Windows** the solution is. To go manually into:\r\nFile -&gt; Settings -&gt; Build, Execution, Deployment -&gt; Gradle -&gt; check the &quot;Create directories for empty content roots automatically&quot;.\r\n\r\n**For Mac** the solution is. To go manually into:\r\nIntellij IDEA -&gt; Preferences -&gt; Build, Execution, Deployment -&gt; Build Tools -&gt; Gradle -&gt; check the &quot;Create directories for empty content roots automatically&quot;.\r\n","title":"src folder not created when creating simple Intellij java gradle Project","body":"<p><strong>For Windows</strong> the solution is. To go manually into:\nFile -> Settings -> Build, Execution, Deployment -> Gradle -> check the \"Create directories for empty content roots automatically\".</p>\n\n<p><strong>For Mac</strong> the solution is. To go manually into:\nIntellij IDEA -> Preferences -> Build, Execution, Deployment -> Build Tools -> Gradle -> check the \"Create directories for empty content roots automatically\".</p>\n"},{"comments":[{"owner":{"account_id":13255069,"reputation":586,"user_id":9571426,"display_name":"Serhii Zadorozhnyi"},"score":0,"creation_date":1576546703,"post_id":50489107,"comment_id":104926767,"body_markdown":"what to do If I don&#39;t have a check option &quot;create directories for empty contents roots automatically&quot;. Before it created the src folder without any problems;)","body":"what to do If I don&#39;t have a check option &quot;create directories for empty contents roots automatically&quot;. Before it created the src folder without any problems;)"},{"owner":{"account_id":1057595,"reputation":5076,"user_id":1059969,"display_name":"Agent_L"},"score":0,"creation_date":1626110027,"post_id":50489107,"comment_id":120800190,"body_markdown":"This is the same as the accepted answer. Only the method of opening the settings differs, but it&#39;s same dialog","body":"This is the same as the accepted answer. Only the method of opening the settings differs, but it&#39;s same dialog"}],"tags":[],"owner":{"account_id":3771669,"reputation":121,"user_id":3133668,"display_name":"Rehan"},"comment_count":2,"down_vote_count":0,"up_vote_count":12,"is_accepted":false,"score":12,"last_activity_date":1527080401,"creation_date":1527080401,"answer_id":50489107,"question_id":49710330,"body_markdown":"@here\r\nA quick fix that worked for me. Once you have created the gradle project as mentioned in the question\r\n\r\n- open the gradle sidebar on the right hand side.\r\n- click settings\r\n- a new dialog box will appear.\r\n- In this dialog box check the option &quot;create directories for empty contents roots automatically&quot;\r\n- then click apply and src folders will be created for you .. \r\n\r\nImages are attached for clarity.\r\n\r\n[Open the gradle sidebar on the right hand side.][1]\r\n\r\n[Check the option &quot;create directories for empty contents roots automatically&quot;][2]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/3pLtb.png\r\n  [2]: https://i.stack.imgur.com/bPUuN.png","title":"src folder not created when creating simple Intellij java gradle Project","body":"<p>@here\nA quick fix that worked for me. Once you have created the gradle project as mentioned in the question</p>\n\n<ul>\n<li>open the gradle sidebar on the right hand side.</li>\n<li>click settings</li>\n<li>a new dialog box will appear.</li>\n<li>In this dialog box check the option \"create directories for empty contents roots automatically\"</li>\n<li>then click apply and src folders will be created for you .. </li>\n</ul>\n\n<p>Images are attached for clarity.</p>\n\n<p><a href=\"https://i.stack.imgur.com/3pLtb.png\" rel=\"noreferrer\">Open the gradle sidebar on the right hand side.</a></p>\n\n<p><a href=\"https://i.stack.imgur.com/bPUuN.png\" rel=\"noreferrer\">Check the option \"create directories for empty contents roots automatically\"</a></p>\n"},{"tags":[],"owner":{"account_id":13656967,"reputation":31,"user_id":9853190,"display_name":"Richard Shin"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1531022547,"creation_date":1531022547,"answer_id":51228735,"question_id":49710330,"body_markdown":"If enabling the &quot;Create directories for empty content roots automatically&quot; setting does not show the src directory, check the project structure and try creating and deleting a dummy module.&lt;br&gt;&lt;br&gt;\r\n\r\n1. File -&gt; Project Structure -&gt; Modules -&gt; Project Name -&gt; Confirm that src is part of the hierarchy and exit out of the pop up&lt;br&gt;\r\n2. Right click on the root folder of the project -&gt; New -&gt; Module &lt;br&gt;\r\n3. The IDE may have refreshed, along with the visibility of the src folder","title":"src folder not created when creating simple Intellij java gradle Project","body":"<p>If enabling the \"Create directories for empty content roots automatically\" setting does not show the src directory, check the project structure and try creating and deleting a dummy module.<br><br></p>\n\n<ol>\n<li>File -> Project Structure -> Modules -> Project Name -> Confirm that src is part of the hierarchy and exit out of the pop up<br></li>\n<li>Right click on the root folder of the project -> New -> Module <br></li>\n<li>The IDE may have refreshed, along with the visibility of the src folder</li>\n</ol>\n"},{"comments":[{"owner":{"account_id":1538541,"reputation":548,"user_id":1433835,"accept_rate":100,"display_name":"wlfbck"},"score":0,"creation_date":1645519321,"post_id":52544273,"comment_id":125886145,"body_markdown":"This does not work unfortunately:\n&gt; Task :init SKIPPED\nThe build file &#39;build.gradle&#39; already exists. Skipping build initialization.","body":"This does not work unfortunately: &gt; Task :init SKIPPED The build file &#39;build.gradle&#39; already exists. Skipping build initialization."}],"tags":[],"owner":{"account_id":5043431,"reputation":387,"user_id":4050148,"accept_rate":40,"display_name":"justAnotherGuy"},"comment_count":1,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1538078243,"creation_date":1538078243,"answer_id":52544273,"question_id":49710330,"body_markdown":"None of the above worked for me. Finally, had to go raw.\r\n\r\n    gradle init --type java-library\r\n\r\nFollowed [Mkyong&#39;s page on gradle init][1]\r\n\r\nThen, simply &#39;Open&#39; project in Intellij. Then updated project settings related to JAVA_HOME and Gradle home (Chances are these were related to my specific installation). \r\n\r\n  [1]: https://www.mkyong.com/gradle/gradle-create-java-project-structure-automatically/\r\n\r\n","title":"src folder not created when creating simple Intellij java gradle Project","body":"<p>None of the above worked for me. Finally, had to go raw.</p>\n\n<pre><code>gradle init --type java-library\n</code></pre>\n\n<p>Followed <a href=\"https://www.mkyong.com/gradle/gradle-create-java-project-structure-automatically/\" rel=\"nofollow noreferrer\">Mkyong's page on gradle init</a></p>\n\n<p>Then, simply 'Open' project in Intellij. Then updated project settings related to JAVA_HOME and Gradle home (Chances are these were related to my specific installation). </p>\n"},{"tags":[],"owner":{"account_id":14900980,"reputation":29,"user_id":10759808,"display_name":"sososocke"},"comment_count":0,"down_vote_count":1,"up_vote_count":3,"is_accepted":false,"score":2,"last_activity_date":1544186599,"creation_date":1544186599,"answer_id":53669818,"question_id":49710330,"body_markdown":"Add a directory named &#39;src&#39;. Right click on it and then click Mark Directory as Sources Root.\r\n","title":"src folder not created when creating simple Intellij java gradle Project","body":"<p>Add a directory named 'src'. Right click on it and then click Mark Directory as Sources Root.</p>\n"},{"comments":[{"owner":{"account_id":9233131,"reputation":45,"user_id":14466061,"display_name":"BeatrizGomes"},"score":0,"creation_date":1694276071,"post_id":60687501,"comment_id":135871435,"body_markdown":"It worked for me.","body":"It worked for me."}],"tags":[],"owner":{"account_id":9816239,"reputation":444,"user_id":7272663,"display_name":"ASB"},"comment_count":1,"down_vote_count":0,"up_vote_count":33,"is_accepted":false,"score":33,"last_activity_date":1692055738,"creation_date":1584221589,"answer_id":60687501,"question_id":49710330,"body_markdown":"Just right-click on your project directory and choose `New -&gt; Directory`.&lt;br&gt; Select all four to be created.\r\n1. src/main/java\r\n2. src/main/resource\r\n3. src/test/java\r\n4. src/test/resource\r\n\r\n[![right click on project directory][1]][1]\r\n\r\n\r\n[![choose the four choices][2]][2]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/gUBFs.png\r\n  [2]: https://i.stack.imgur.com/qgS6w.png\r\n\r\nfound the answer here: https://intellij-support.jetbrains.com/hc/en-us/community/posts/206806425-Source-Directories-Not-Being-Created-In-New-Project","title":"src folder not created when creating simple Intellij java gradle Project","body":"<p>Just right-click on your project directory and choose <code>New -&gt; Directory</code>.<br> Select all four to be created.</p>\n<ol>\n<li>src/main/java</li>\n<li>src/main/resource</li>\n<li>src/test/java</li>\n<li>src/test/resource</li>\n</ol>\n<p><a href=\"https://i.stack.imgur.com/gUBFs.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/gUBFs.png\" alt=\"right click on project directory\" /></a></p>\n<p><a href=\"https://i.stack.imgur.com/qgS6w.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/qgS6w.png\" alt=\"choose the four choices\" /></a></p>\n<p>found the answer here: <a href=\"https://intellij-support.jetbrains.com/hc/en-us/community/posts/206806425-Source-Directories-Not-Being-Created-In-New-Project\" rel=\"nofollow noreferrer\">https://intellij-support.jetbrains.com/hc/en-us/community/posts/206806425-Source-Directories-Not-Being-Created-In-New-Project</a></p>\n"},{"comments":[{"owner":{"account_id":6241436,"reputation":2512,"user_id":4854931,"accept_rate":33,"display_name":"Alex78191"},"score":0,"creation_date":1698511002,"post_id":70549407,"comment_id":136416272,"body_markdown":"What&#39;s the difference with this answer? https://stackoverflow.com/a/60687501/4854931","body":"What&#39;s the difference with this answer? <a href=\"https://stackoverflow.com/a/60687501/4854931\">stackoverflow.com/a/60687501/4854931</a>"}],"tags":[],"owner":{"account_id":13410743,"reputation":570,"user_id":9677320,"display_name":"Tri Dawn"},"comment_count":1,"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1641046774,"creation_date":1641046323,"answer_id":70549407,"question_id":49710330,"body_markdown":"As of January 2022 with Intellij IDEA 2021.1.3 and Gradle 6.8\r\n-------------------------------------------------------------\r\n\r\n**First of all, right-click your project main folder ...**\r\n\r\n[![First Step][1]][1]\r\n\r\n\r\n**Go to &gt; New &gt; Directory...**\r\n\r\n[![Second Step][2]][2]\r\n\r\n**After clicking the &quot;Directory&quot; option, this will open a dialog containing available options of &quot;Gradle Source Sets&quot; to add.**\r\n\r\n[![Third Step][3]][3]\r\n\r\n**You can select what *&quot;Gradle Source Sets&quot;* you want to add. In my case, I have already added the *&quot;src/main/kotlin&quot;* (Notice it&#39;s not displayed in the options).**\r\n\r\n  [1]: https://i.stack.imgur.com/LIxzF.png\r\n  [2]: https://i.stack.imgur.com/9F57w.png\r\n  [3]: https://i.stack.imgur.com/pzV2P.png","title":"src folder not created when creating simple Intellij java gradle Project","body":"<h2>As of January 2022 with Intellij IDEA 2021.1.3 and Gradle 6.8</h2>\n<p><strong>First of all, right-click your project main folder ...</strong></p>\n<p><a href=\"https://i.stack.imgur.com/LIxzF.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/LIxzF.png\" alt=\"First Step\" /></a></p>\n<p><strong>Go to &gt; New &gt; Directory...</strong></p>\n<p><a href=\"https://i.stack.imgur.com/9F57w.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/9F57w.png\" alt=\"Second Step\" /></a></p>\n<p><strong>After clicking the &quot;Directory&quot; option, this will open a dialog containing available options of &quot;Gradle Source Sets&quot; to add.</strong></p>\n<p><a href=\"https://i.stack.imgur.com/pzV2P.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/pzV2P.png\" alt=\"Third Step\" /></a></p>\n<p><strong>You can select what <em>&quot;Gradle Source Sets&quot;</em> you want to add. In my case, I have already added the <em>&quot;src/main/kotlin&quot;</em> (Notice it's not displayed in the options).</strong></p>\n"}],"owner":{"account_id":1419645,"reputation":11379,"user_id":1344545,"accept_rate":59,"display_name":"mcfly soft"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":54536,"favorite_count":0,"down_vote_count":0,"up_vote_count":54,"accepted_answer_id":49712129,"answer_count":7,"score":54,"last_activity_date":1692055738,"creation_date":1523123960,"question_id":49710330,"body_markdown":"I am following the instructions to create a simple IntelliJ Project with Gradle support and the src folder is not created (I guess this is the base of any Java Project)\r\nhttps://www.jetbrains.com/help/idea/getting-started-with-gradle.html\r\n\r\n1. New Project: I check Gradle and Java - next\r\n2. Added Artefact ID -&gt; next\r\n3. &quot;Use auto-import&quot;, &quot;using explicit module groups&quot;, &quot;create separate Module per source set&quot;, &quot;Use default Gradle wrapper&quot; -&gt; next\r\n4. Give a project name -&gt; next\r\n\r\nI have no src folder. I am not able to add a new class.\r\n\r\n[![enter image description here][1]][1]\r\n\r\nWhen doing the same without gradle I have the src folder. \r\n\r\n\r\n  [1]: https://i.stack.imgur.com/FSHNp.png\r\n\r\n\r\n**UPDATE**\r\nAdding a module called &quot;src&quot; works, but then I have a module called src and a folder in it called src. But this is a hack. Just bought IntelliJ for 200 bucks and I hope this can be solved in a more professional way :-)\r\n\r\n","title":"src folder not created when creating simple Intellij java gradle Project","body":"<p>I am following the instructions to create a simple IntelliJ Project with Gradle support and the src folder is not created (I guess this is the base of any Java Project)\n<a href=\"https://www.jetbrains.com/help/idea/getting-started-with-gradle.html\" rel=\"noreferrer\">https://www.jetbrains.com/help/idea/getting-started-with-gradle.html</a></p>\n\n<ol>\n<li>New Project: I check Gradle and Java - next</li>\n<li>Added Artefact ID -> next</li>\n<li>\"Use auto-import\", \"using explicit module groups\", \"create separate Module per source set\", \"Use default Gradle wrapper\" -> next</li>\n<li>Give a project name -> next</li>\n</ol>\n\n<p>I have no src folder. I am not able to add a new class.</p>\n\n<p><a href=\"https://i.stack.imgur.com/FSHNp.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/FSHNp.png\" alt=\"enter image description here\"></a></p>\n\n<p>When doing the same without gradle I have the src folder. </p>\n\n<p><strong>UPDATE</strong>\nAdding a module called \"src\" works, but then I have a module called src and a folder in it called src. But this is a hack. Just bought IntelliJ for 200 bucks and I hope this can be solved in a more professional way :-)</p>\n"},{"tags":["java","jtextfield","swingx"],"answers":[{"comments":[{"owner":{"account_id":3716605,"reputation":108,"user_id":3092671,"display_name":"user3092671"},"score":0,"creation_date":1471887715,"post_id":39085423,"comment_id":65519074,"body_markdown":"OK, but if you simply do:\n\nnew JTextField(5);\n\nThen the width of the resulting object accomodates more than 5 characters.  For instance, I can fit about 8 underscore &#39;_&#39; characters in this text field that is noted as 5 columns.  So I&#39;m not clear on *what* column width is.  E.g. what is the pixel width of a column and how does that relate to text that will be placed in it?","body":"OK, but if you simply do:  new JTextField(5);  Then the width of the resulting object accomodates more than 5 characters.  For instance, I can fit about 8 underscore &#39;_&#39; characters in this text field that is noted as 5 columns.  So I&#39;m not clear on <i>what</i> column width is.  E.g. what is the pixel width of a column and how does that relate to text that will be placed in it?"},{"owner":{"account_id":8912177,"reputation":29,"user_id":6651974,"display_name":"g_haxor"},"score":0,"creation_date":1471888397,"post_id":39085423,"comment_id":65519415,"body_markdown":"The columns are autosized to fit the necessary information. I&#39;m not sure about Swing&#39;s methods, but in FX you can force column width in pixels, percentages of total space, or equal space for all the columns.","body":"The columns are autosized to fit the necessary information. I&#39;m not sure about Swing&#39;s methods, but in FX you can force column width in pixels, percentages of total space, or equal space for all the columns."},{"owner":{"account_id":1890462,"reputation":409,"user_id":1708701,"accept_rate":86,"display_name":"hariszhr"},"score":0,"creation_date":1483390093,"post_id":39085423,"comment_id":70072076,"body_markdown":"i dont understand what this column bs is. is there a use case where we can see how it affects the ui?","body":"i dont understand what this column bs is. is there a use case where we can see how it affects the ui?"},{"owner":{"account_id":1890462,"reputation":409,"user_id":1708701,"accept_rate":86,"display_name":"hariszhr"},"score":0,"creation_date":1483390535,"post_id":39085423,"comment_id":70072233,"body_markdown":"does it affect when we are using some specific layout?","body":"does it affect when we are using some specific layout?"},{"owner":{"account_id":1550314,"reputation":1563,"user_id":1442870,"accept_rate":100,"display_name":"Enwired"},"score":0,"creation_date":1513126509,"post_id":39085423,"comment_id":82529243,"body_markdown":"This statement is simply false &quot;the columns allow parallel stacking of text within the JTextField itself&quot;  A JTextField is a single line of text.  The &quot;columns&quot; setting influences the preferred width of that line.","body":"This statement is simply false &quot;the columns allow parallel stacking of text within the JTextField itself&quot;  A JTextField is a single line of text.  The &quot;columns&quot; setting influences the preferred width of that line."}],"tags":[],"owner":{"account_id":8912177,"reputation":29,"user_id":6651974,"display_name":"g_haxor"},"comment_count":5,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1471886912,"creation_date":1471886912,"answer_id":39085423,"question_id":39085261,"body_markdown":"The columns property of JTextField is used to determine the preferred width of the object. If an initial String is provided as in your example `new JTextField(&quot;abc&quot;, 3);` then the field is painted to match the text size. Otherwise, the columns allow parallel stacking of text within the `JTextField` itself. Therefore, the reason you get whitespace after the `&quot;abc&quot;` in your example is because it defaults to place the string in the first column, then two columns of whitespace. ","title":"What is the width of a &quot;column&quot; for a JTextField?","body":"<p>The columns property of JTextField is used to determine the preferred width of the object. If an initial String is provided as in your example <code>new JTextField(\"abc\", 3);</code> then the field is painted to match the text size. Otherwise, the columns allow parallel stacking of text within the <code>JTextField</code> itself. Therefore, the reason you get whitespace after the <code>\"abc\"</code> in your example is because it defaults to place the string in the first column, then two columns of whitespace. </p>\n"},{"tags":[],"owner":{"account_id":1550314,"reputation":1563,"user_id":1442870,"accept_rate":100,"display_name":"Enwired"},"comment_count":0,"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1513126407,"creation_date":1513126407,"answer_id":47783938,"question_id":39085261,"body_markdown":"If you are using a standard `JTextField`, the columns specifies the preferred width of the component as some multiple of `getColumnWidth()`.\r\n\r\nThe method `getColumnWidth()` defines the width in pixels of each column.  The documentation states: &quot;By default this is defined to be the width of the character &#39;m&#39; for the font used.&quot;\r\n\r\nThe text field may display at a different size if the layout manager modifies it.","title":"What is the width of a &quot;column&quot; for a JTextField?","body":"<p>If you are using a standard <code>JTextField</code>, the columns specifies the preferred width of the component as some multiple of <code>getColumnWidth()</code>.</p>\n\n<p>The method <code>getColumnWidth()</code> defines the width in pixels of each column.  The documentation states: \"By default this is defined to be the width of the character 'm' for the font used.\"</p>\n\n<p>The text field may display at a different size if the layout manager modifies it.</p>\n"},{"tags":[],"owner":{"account_id":2125071,"reputation":316,"user_id":1887468,"display_name":"BUDDHIKA"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1692054932,"creation_date":1692054932,"answer_id":76902658,"question_id":39085261,"body_markdown":"Thanks for the  Enwired&#39;s answer. This bugged me for some time. \r\nTo further elaborate Enwired&#39;s answer, it is the number of m&#39;s that the JTextField can display on the screen (panel or window).\r\n\r\nObservations\r\n\r\n    new JTextField(&quot;mmm&quot;, 3);   // this 3 is number of &#39;m&#39; that we allow to fit in, please note that &#39;mmm&#39; and &#39;abc&#39; widths are different even though they are same character count, that is 3\r\n\r\nFor the above code it will display a JTextField with 3 m&#39;s width. (we can type more m&#39;s on this JTextField, but on the TextField it shows only 3m&#39;s)\r\n\r\n[![enter image description here][1]][1]\r\n\r\nIf we type &quot;abc&quot; on this, there is still remaining space on the text field where we can accommodate another character like shown below,\r\n\r\n[![enter image description here][2]][2] \r\n\r\n    new JTextField(&quot;mmm&quot;, 3);\r\n\r\nso, the conclusion seems to be it (argument value 3) is not the number of characters that we can fit into JTextField, but the number of &#39;m&#39; that we can fit in.\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/4c4gW.png\r\n  [2]: https://i.stack.imgur.com/uUTqr.png","title":"What is the width of a &quot;column&quot; for a JTextField?","body":"<p>Thanks for the  Enwired's answer. This bugged me for some time.\nTo further elaborate Enwired's answer, it is the number of m's that the JTextField can display on the screen (panel or window).</p>\n<p>Observations</p>\n<pre><code>new JTextField(&quot;mmm&quot;, 3);   // this 3 is number of 'm' that we allow to fit in, please note that 'mmm' and 'abc' widths are different even though they are same character count, that is 3\n</code></pre>\n<p>For the above code it will display a JTextField with 3 m's width. (we can type more m's on this JTextField, but on the TextField it shows only 3m's)</p>\n<p><a href=\"https://i.stack.imgur.com/4c4gW.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/4c4gW.png\" alt=\"enter image description here\" /></a></p>\n<p>If we type &quot;abc&quot; on this, there is still remaining space on the text field where we can accommodate another character like shown below,</p>\n<p><a href=\"https://i.stack.imgur.com/uUTqr.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/uUTqr.png\" alt=\"enter image description here\" /></a></p>\n<pre><code>new JTextField(&quot;mmm&quot;, 3);\n</code></pre>\n<p>so, the conclusion seems to be it (argument value 3) is not the number of characters that we can fit into JTextField, but the number of 'm' that we can fit in.</p>\n"}],"owner":{"account_id":3716605,"reputation":108,"user_id":3092671,"display_name":"user3092671"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":7069,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"answer_count":3,"score":3,"last_activity_date":1692054932,"creation_date":1471886317,"question_id":39085261,"body_markdown":"Per the `JTextField` doc, you can set the width of the field delineated in “columns”, but cannot find a definition for “columns”.\r\n\r\nMoreover, doing something like this:\r\n\r\n    new JTextField(&quot;abc&quot;, 3);\r\n\r\nResults in a text field of width populated with the string `abc` and then extra whitespace afterwards.\r\n\r\nCan someone clarify the the definition of columns as used in the `JTextField` constructor?","title":"What is the width of a &quot;column&quot; for a JTextField?","body":"<p>Per the <code>JTextField</code> doc, you can set the width of the field delineated in “columns”, but cannot find a definition for “columns”.</p>\n\n<p>Moreover, doing something like this:</p>\n\n<pre><code>new JTextField(\"abc\", 3);\n</code></pre>\n\n<p>Results in a text field of width populated with the string <code>abc</code> and then extra whitespace afterwards.</p>\n\n<p>Can someone clarify the the definition of columns as used in the <code>JTextField</code> constructor?</p>\n"},{"tags":["java","mysql","hibernate"],"comments":[{"owner":{"account_id":322981,"reputation":310755,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"score":0,"creation_date":1691799179,"post_id":76887089,"comment_id":135545034,"body_markdown":"By definition, the `java.time.Instant` class *always* represents a moment as seen in UTC, an offset of zero hours-minutes-seconds from UTC.","body":"By definition, the <code>java.time.Instant</code> class <i>always</i> represents a moment as seen in UTC, an offset of zero hours-minutes-seconds from UTC."},{"owner":{"account_id":322981,"reputation":310755,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"score":0,"creation_date":1691822801,"post_id":76887089,"comment_id":135546279,"body_markdown":"You are using the **wrong data type** in MySQL. To track a moment, a specific point on the timeline, in MySQL, use the type `TIMESTAMP`. You are using `DATETIME` which tracks a date and time-of-day but lacks the context of a time zone or offset. Transferring a MySQL `DATETIME` value to/from a Java `Instant` value makes no sense. The equivalent of MySQL `DATETIME` in Java is `java.time.LocalDateTime`. See [doc](https://dev.mysql.com/doc/refman/8.0/en/datetime.html).","body":"You are using the <b>wrong data type</b> in MySQL. To track a moment, a specific point on the timeline, in MySQL, use the type <code>TIMESTAMP</code>. You are using <code>DATETIME</code> which tracks a date and time-of-day but lacks the context of a time zone or offset. Transferring a MySQL <code>DATETIME</code> value to/from a Java <code>Instant</code> value makes no sense. The equivalent of MySQL <code>DATETIME</code> in Java is <code>java.time.LocalDateTime</code>. See <a href=\"https://dev.mysql.com/doc/refman/8.0/en/datetime.html\" rel=\"nofollow noreferrer\">doc</a>."},{"owner":{"account_id":15907779,"reputation":211,"user_id":11478495,"display_name":"Anthony Alba"},"score":0,"creation_date":1691896717,"post_id":76887089,"comment_id":135552202,"body_markdown":"@BasilBourque - a Java java.time.* mapping to TIMESTAMP column has some undesirable MySQL automatic timezone conversions where we don&#39;t have control over the database timezone. Also we try to keep the existing JDBC URL - which doesn&#39;t set the timezone.","body":"@BasilBourque - a Java java.time.* mapping to TIMESTAMP column has some undesirable MySQL automatic timezone conversions where we don&#39;t have control over the database timezone. Also we try to keep the existing JDBC URL - which doesn&#39;t set the timezone."},{"owner":{"account_id":322981,"reputation":310755,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"score":0,"creation_date":1691959584,"post_id":76887089,"comment_id":135557809,"body_markdown":"No, in JDBC 4.2 and later, the MySQL type `TIMESTAMP` maps to `java.time.OffsetDateTime`. The default time zone of your database server, of your database session, and of your JVM are all irrelevant. If you cannot get that to work, you should post a Question on *that* topic. Your Question here is nonsensical, per my second Comment.","body":"No, in JDBC 4.2 and later, the MySQL type <code>TIMESTAMP</code> maps to <code>java.time.OffsetDateTime</code>. The default time zone of your database server, of your database session, and of your JVM are all irrelevant. If you cannot get that to work, you should post a Question on <i>that</i> topic. Your Question here is nonsensical, per my second Comment."}],"owner":{"account_id":15907779,"reputation":211,"user_id":11478495,"display_name":"Anthony Alba"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":175,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":0,"score":0,"last_activity_date":1692054916,"creation_date":1691795175,"question_id":76887089,"body_markdown":"I know about the `jdbc.time_zone = UTC` setting from [Vlad Mihalcea](https://stackoverflow.com/users/1025118/vlad-mihalcea)&#39;s article:\r\n\r\n https://vladmihalcea.com/how-to-store-date-time-and-timestamps-in-utc-time-zone-with-jdbc-and-hibernate/\r\n\r\nso that Hibernate will persist java.time.* objects in UTC. In practice Instant always seems to use UTC regardless of this setting (which I guess makes sense).\r\n\r\nI couldn&#39;t find this documented anywhere though. So I just wanted to get confirmation that Instant will be always be persisted/retrieved as UTC, regardless of the `jdbc.time_zone` setting. Has this always been the case since Hibernate 5.2 when `jdbc_time_zone` was introduced?\r\n\r\nIn case it matters: in this particular case the target column is a MySQL 8 DATETIME(3), the connector is mysql-connector-jar:8.0.33, and Hibernate is 6.2.x.\r\n\r\nWith logging turned on\r\n\r\n```\r\n... other stuff ...\r\n21:15:15.282 [main] TRACE org.hibernate.orm.jdbc.bind - binding parameter [4] as [TIMESTAMP_UTC] - [2023-08-11T13:15:15.244980506Z]\r\n21:15:15.282 [main] TRACE org.hibernate.orm.jdbc.bind - binding parameter [5] as [TIMESTAMP_UTC] - [2023-08-18T13:15:15.189442027Z]\r\n21:15:15.282 [main] TRACE org.hibernate.orm.jdbc.bind - binding parameter [6] as [TIMESTAMP_UTC] - [2023-08-11T13:15:15.244980506Z]\r\n... other stuff ...\r\n```","title":"Hibernate 6 Instant always uses UTC? - does not need jdbc.time_zone setting","body":"<p>I know about the <code>jdbc.time_zone = UTC</code> setting from <a href=\"https://stackoverflow.com/users/1025118/vlad-mihalcea\">Vlad Mihalcea</a>'s article:</p>\n<p><a href=\"https://vladmihalcea.com/how-to-store-date-time-and-timestamps-in-utc-time-zone-with-jdbc-and-hibernate/\" rel=\"nofollow noreferrer\">https://vladmihalcea.com/how-to-store-date-time-and-timestamps-in-utc-time-zone-with-jdbc-and-hibernate/</a></p>\n<p>so that Hibernate will persist java.time.* objects in UTC. In practice Instant always seems to use UTC regardless of this setting (which I guess makes sense).</p>\n<p>I couldn't find this documented anywhere though. So I just wanted to get confirmation that Instant will be always be persisted/retrieved as UTC, regardless of the <code>jdbc.time_zone</code> setting. Has this always been the case since Hibernate 5.2 when <code>jdbc_time_zone</code> was introduced?</p>\n<p>In case it matters: in this particular case the target column is a MySQL 8 DATETIME(3), the connector is mysql-connector-jar:8.0.33, and Hibernate is 6.2.x.</p>\n<p>With logging turned on</p>\n<pre><code>... other stuff ...\n21:15:15.282 [main] TRACE org.hibernate.orm.jdbc.bind - binding parameter [4] as [TIMESTAMP_UTC] - [2023-08-11T13:15:15.244980506Z]\n21:15:15.282 [main] TRACE org.hibernate.orm.jdbc.bind - binding parameter [5] as [TIMESTAMP_UTC] - [2023-08-18T13:15:15.189442027Z]\n21:15:15.282 [main] TRACE org.hibernate.orm.jdbc.bind - binding parameter [6] as [TIMESTAMP_UTC] - [2023-08-11T13:15:15.244980506Z]\n... other stuff ...\n</code></pre>\n"},{"tags":["java","sql","hibernate"],"comments":[{"owner":{"account_id":322981,"reputation":310755,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"score":0,"creation_date":1692002430,"post_id":884154,"comment_id":135561854,"body_markdown":"Similar: https://stackoverflow.com/q/24175307/642706 &amp; https://stackoverflow.com/q/4406935/642706","body":"Similar: <a href=\"https://stackoverflow.com/q/24175307/642706\">stackoverflow.com/q/24175307/642706</a> &amp; <a href=\"https://stackoverflow.com/q/4406935/642706\">stackoverflow.com/q/4406935/642706</a>"}],"answers":[{"tags":[],"owner":{"account_id":34878,"reputation":5531,"user_id":98632,"display_name":"mtpettyp"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1263665407,"creation_date":1242755698,"answer_id":884190,"question_id":884154,"body_markdown":"In your hibernate.cfg.xml:\r\n\r\n    &lt;?xml version=&#39;1.0&#39; encoding=&#39;UTF-8&#39;?&gt;\r\n    &lt;!DOCTYPE hibernate-configuration PUBLIC\r\n              &quot;-//Hibernate/Hibernate Configuration DTD 3.0//EN&quot;\r\n              &quot;http://hibernate.sourceforge.net/hibernate-configuration-3.0.dtd&quot;&gt;\r\n    \r\n    &lt;hibernate-configuration&gt;\r\n        &lt;session-factory&gt;\r\n            &lt;property name=&quot;dialect&quot;&gt;\r\n                org.hibernate.dialect.MySQLDialect\r\n            &lt;/property&gt;    \r\n            &lt;property name=&quot;connection.datasource&quot;&gt;SampleDS&lt;/property&gt;        \r\n        &lt;/session-factory&gt;\r\n    \r\n    &lt;/hibernate-configuration&gt;\r\n\r\n","title":"Hibernate using an instance of javax.sql.DataSource","body":"<p>In your hibernate.cfg.xml:</p>\n\n<pre><code>&lt;?xml version='1.0' encoding='UTF-8'?&gt;\n&lt;!DOCTYPE hibernate-configuration PUBLIC\n          \"-//Hibernate/Hibernate Configuration DTD 3.0//EN\"\n          \"http://hibernate.sourceforge.net/hibernate-configuration-3.0.dtd\"&gt;\n\n&lt;hibernate-configuration&gt;\n    &lt;session-factory&gt;\n        &lt;property name=\"dialect\"&gt;\n            org.hibernate.dialect.MySQLDialect\n        &lt;/property&gt;    \n        &lt;property name=\"connection.datasource\"&gt;SampleDS&lt;/property&gt;        \n    &lt;/session-factory&gt;\n\n&lt;/hibernate-configuration&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":31142,"reputation":28734,"user_id":85306,"accept_rate":94,"display_name":"Jherico"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1242756202,"creation_date":1242756202,"answer_id":884229,"question_id":884154,"body_markdown":"If you&#39;re using spring initialization and a spring session factory bean you can simply pass in the data source like this\r\n\r\n    \r\n    &lt;bean id=&quot;sessionFactory&quot; class=&quot;org.springframework.orm.hibernate3.annotation.AnnotationSessionFactoryBean&quot;&gt;\r\n        &lt;property name=&quot;dataSource&quot; ref=&quot;dataSource&quot; /&gt;\r\n        ...\r\n    &lt;/bean&gt;\r\nwhere the dataSource reference is defined elsewhere.","title":"Hibernate using an instance of javax.sql.DataSource","body":"<p>If you're using spring initialization and a spring session factory bean you can simply pass in the data source like this</p>\n\n<pre><code>&lt;bean id=\"sessionFactory\" class=\"org.springframework.orm.hibernate3.annotation.AnnotationSessionFactoryBean\"&gt;\n    &lt;property name=\"dataSource\" ref=\"dataSource\" /&gt;\n    ...\n&lt;/bean&gt;\n</code></pre>\n\n<p>where the dataSource reference is defined elsewhere.</p>\n"},{"tags":[],"owner":{"account_id":31084,"reputation":128404,"user_id":85134,"display_name":"araqnid"},"comment_count":0,"down_vote_count":0,"up_vote_count":4,"is_accepted":true,"score":4,"last_activity_date":1242756234,"creation_date":1242756234,"answer_id":884234,"question_id":884154,"body_markdown":"If the data source is available through JNDI, you just need to set the hibernate.connection.datasource property of the configuration - mtpettyp&#39;s answer demonstrates that.\r\n\r\nIf you&#39;re not in an environment where your data sources come from JNDI, provide your own ConnectionProvider implementation, and either pass it to the Settings object before building the session factory, or specify its class name in the hibernate.connection.provider_class property. If you provide an instance to Settings, you can probably instantiate the standard DatasourceConnectionProvider and give it your DataSource.\r\n","title":"Hibernate using an instance of javax.sql.DataSource","body":"<p>If the data source is available through JNDI, you just need to set the hibernate.connection.datasource property of the configuration - mtpettyp's answer demonstrates that.</p>\n\n<p>If you're not in an environment where your data sources come from JNDI, provide your own ConnectionProvider implementation, and either pass it to the Settings object before building the session factory, or specify its class name in the hibernate.connection.provider_class property. If you provide an instance to Settings, you can probably instantiate the standard DatasourceConnectionProvider and give it your DataSource.</p>\n"},{"tags":[],"owner":{"account_id":322981,"reputation":310755,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1692053653,"creation_date":1692044945,"answer_id":76901981,"question_id":884154,"body_markdown":"**Caveat:** I don’t really know what I am doing here. I am new to Hibernate and Jakarta Persistence. I cobbled together this code with various pieces from various sources, and monkeyed around until it worked. \r\n\r\nI could not find anything close to being a complete example of how to configure Hibernate/Jakarta Persistence in code-only (no XML files, no JNDI) using an existing `DataSource` instance. So I posted this here. Hopefully it can help others.\r\n\r\n\r\n----------\r\n\r\n\r\nHere is an example using [Java SE][1], without any [Jakarta EE][2] application server. \r\n\r\nI used:\r\n\r\n - Server: MySQL 8.1.0 on Linux in Docker Desktop 4.22.0 app for Apple Silicon (aarch64)\r\n - Client: Hibernate Core 6.2.7.Final which brought in Jakarta Persistence 3.1.0, with the JDBC driver MySQL Connector/J 8.1.0, in IntelliJ IDEA 2023.2.1 Preview, in Java 20.0.2, on macOS Ventura on a MacBook Pro with Apple M1 Pro chip.\r\n\r\n&#128073;&#127996; I configured Hibernate strictly with the code seen below. I did *not* write any configuration XML file.\r\n\r\n## `DataSource` code\r\n\r\n[`javax.sql.DataSource`][3] in the interface bundled with Java SE. We need an implementation of that interface. In this example, we use an implementation provided by the JDBC driver, *MySQL Connector/J*, in the class `com.mysql.cj.jdbc.MysqlDataSource`. \r\n\r\nWe set up an instance of that `DataSource` implementation in the following method.\r\n\r\n```java\r\nprivate DataSource configureDataSource ( )\r\n{\r\n    com.mysql.cj.jdbc.MysqlDataSource dataSource = new com.mysql.cj.jdbc.MysqlDataSource ( );\r\n    dataSource.setDatabaseName ( &quot;bogus_&quot; );\r\n    dataSource.setServerName ( &quot;localhost&quot; );\r\n    dataSource.setPort ( 8090 );\r\n    dataSource.setUser ( &quot;root&quot; );\r\n    dataSource.setPassword ( &quot;&quot; );  // WARNING: Risky business, leaving your server unprotected, without security. \r\n    return dataSource;\r\n}\r\n```\r\n\r\nFor more info, see the [*Configuration Properties*][4] of the *Connector/J* manual.\r\n\r\n## Hibernate code\r\n\r\nHaving that `DataSource` instance in hand, we can use Hibernate to connect to the database server, execute a query, and package the retrieved data as an object. \r\n\r\n\r\n```java\r\nConfiguration cfg = new Configuration ( );\r\ncfg.getProperties ( ).put ( Environment.DATASOURCE , this.dataSource );\r\ncfg.addAnnotatedClass ( Book.class );\r\nServiceRegistry serviceRegistry = new StandardServiceRegistryBuilder ( ).applySettings ( cfg.getProperties ( ) ).build ( );\r\n\r\ntry ( SessionFactory sessionFactory = cfg.buildSessionFactory ( serviceRegistry ) )\r\n{\r\n    Session session = sessionFactory.openSession ( );\r\n    Query jpqlQuery = session.createQuery ( &quot;SELECT b FROM Book b WHERE b.title=:title&quot; , Book.class );\r\n    jpqlQuery.setParameter ( &quot;title&quot; , &quot;Our First Book&quot; );\r\n    Book book = ( Book ) jpqlQuery.getSingleResult ( );\r\n    System.out.println ( &quot;Retrieved via Hibernate… book = &quot; + book );\r\n}\r\n```\r\n\r\n&gt;Retrieved via Hibernate… book = Book{id=1, title=&#39;Our First Book&#39;, createdOn=2023-08-14T20:26:20.708102Z}\r\n\r\n## Full example code\r\n\r\nFirst the `Book` class. We expect Hibernate to instantiate an object of this class.\r\n\r\n```java\r\npackage work.basil.example.hibernate;\r\n\r\nimport jakarta.persistence.* ;\r\n\r\nimport java.time.OffsetDateTime;\r\n\r\n@Entity\r\n@Table(name = &quot;book&quot;)\r\npublic class Book {\r\n    @Id\r\n    @GeneratedValue(strategy=GenerationType.AUTO)\r\n    private Long id;\r\n\r\n    private String title;\r\n\r\n    @Column(name = &quot;created_on&quot;)\r\n    private OffsetDateTime createdOn;\r\n\r\n    // Accessors\r\n\r\n    public Long getId ( )\r\n    {\r\n        return id;\r\n    }\r\n\r\n    public void setId ( Long id )\r\n    {\r\n        this.id = id;\r\n    }\r\n\r\n    public String getTitle ( )\r\n    {\r\n        return title;\r\n    }\r\n\r\n    public void setTitle ( String title )\r\n    {\r\n        this.title = title;\r\n    }\r\n\r\n    public OffsetDateTime getCreatedOn ( )\r\n    {\r\n        return createdOn;\r\n    }\r\n\r\n    public void setCreatedOn ( OffsetDateTime createdOn )\r\n    {\r\n        this.createdOn = createdOn;\r\n    }\r\n\r\n    // Object overrides\r\n\r\n    @Override\r\n    public String toString ( )\r\n    {\r\n        return &quot;Book{&quot; +\r\n               &quot;id=&quot; + id +\r\n               &quot;, title=&#39;&quot; + title + &#39;\\&#39;&#39; +\r\n               &quot;, createdOn=&quot; + createdOn +\r\n               &#39;}&#39;;\r\n    }\r\n}\r\n```\r\n\r\nAnd our complete example application code. This code:\r\n\r\n 1. Re-creates a single table, `book`. Then repopulates that table with a single row. Both steps use straight JDBC, no Hibernate.\r\n 2. Uses Hibernate to query for our single row, and instantiate a `Book` object with that retrieved data.\r\n\r\n```java\r\npackage work.basil.example.hibernate;\r\n\r\nimport jakarta.persistence.*;\r\nimport org.hibernate.SessionFactory;\r\nimport org.hibernate.boot.registry.StandardServiceRegistryBuilder;\r\nimport org.hibernate.cfg.Configuration;\r\nimport org.hibernate.Session;\r\nimport org.hibernate.cfg.Environment;\r\nimport org.hibernate.service.ServiceRegistry;\r\n\r\nimport javax.sql.DataSource;\r\nimport java.sql.*;\r\nimport java.time.Instant;\r\nimport java.time.OffsetDateTime;\r\nimport java.time.*;\r\nimport java.time.ZonedDateTime;\r\n\r\npublic class App\r\n{\r\n    final DataSource dataSource;\r\n\r\n    private void demo ( )\r\n    {\r\n        this.dropTable ( );\r\n        this.createTable ( );\r\n        this.insertRow ( );\r\n        this.dumpRows ( );\r\n        this.dumpHibernate ( );\r\n    }\r\n\r\n    private void dumpHibernate ( )\r\n    {\r\n        Configuration cfg = new Configuration ( );\r\n        cfg.getProperties ( ).put ( Environment.DATASOURCE , this.dataSource );\r\n        cfg.addAnnotatedClass ( Book.class );\r\n        ServiceRegistry serviceRegistry = new StandardServiceRegistryBuilder ( ).applySettings ( cfg.getProperties ( ) ).build ( );\r\n\r\n        try ( SessionFactory sessionFactory = cfg.buildSessionFactory ( serviceRegistry ) )\r\n        {\r\n            Session session = sessionFactory.openSession ( );\r\n            Query jpqlQuery = session.createQuery ( &quot;SELECT b FROM Book b WHERE b.title=:title&quot; , Book.class );\r\n            jpqlQuery.setParameter ( &quot;title&quot; , &quot;Our First Book&quot; );\r\n            Book book = ( Book ) jpqlQuery.getSingleResult ( );\r\n            System.out.println ( &quot;Retrieved via Hibernate… book = &quot; + book );\r\n        }\r\n    }\r\n\r\n    private void dumpRows ( )\r\n    {\r\n        String sql = &quot;&quot;&quot;\r\n                SELECT *\r\n                FROM book\r\n                 ;\r\n                 &quot;&quot;&quot;;\r\n        try (\r\n                Connection connection = this.dataSource.getConnection ( ) ;\r\n                Statement statement = connection.createStatement ( ) ;\r\n                ResultSet resultSet = statement.executeQuery ( sql ) ;\r\n        )\r\n        {\r\n            record BookRecord( Long id , String title , OffsetDateTime odt ) { }\r\n            while ( resultSet.next ( ) )\r\n            {\r\n                Long id = resultSet.getLong ( &quot;id&quot; );\r\n                String title = resultSet.getString ( &quot;title&quot; );\r\n                OffsetDateTime odt = resultSet.getObject ( &quot;created_on&quot; , OffsetDateTime.class );\r\n                System.out.println ( new BookRecord ( id , title , odt ).toString ( ) );\r\n            }\r\n        }\r\n        catch ( SQLException e )\r\n        {\r\n            throw new RuntimeException ( e );\r\n        }\r\n    }\r\n\r\n    private void insertRow ( )\r\n    {\r\n        String sql = &quot;&quot;&quot;\r\n                INSERT INTO book\r\n                ( title , created_on )\r\n                VALUES\r\n                ( ? , ? )\r\n                 ;\r\n                 &quot;&quot;&quot;;\r\n        try (\r\n                Connection connection = this.dataSource.getConnection ( ) ;\r\n                PreparedStatement preparedStatement = connection.prepareStatement ( sql ) ;\r\n        )\r\n        {\r\n            ZonedDateTime zdt = ZonedDateTime.now ( ZoneId.of ( &quot;America/Edmonton&quot; ) ); // Capture the current moment as seen in a particular time zone.\r\n            OffsetDateTime odt = zdt.toOffsetDateTime ( );  // Discard the time zone, keeping only a mere offset-from-UTC. Not an improvement, but standard SQL does not support only offsets, not time zones.\r\n            Instant instant = odt.toInstant ( );  // Adjust to an offset from UTC of zero hours-minutes-seeconds.\r\n            System.out.println ( &quot;zdt = &quot; + zdt );  // Be aware: All three of these date-time objects represent the very same moment, the same point on the timeline.\r\n            System.out.println ( &quot;odt = &quot; + odt );\r\n            System.out.println ( &quot;instant = &quot; + instant );\r\n            preparedStatement.setString ( 1 , &quot;Our First Book&quot; );\r\n            preparedStatement.setString ( 2 , odt.toString ( ) );\r\n            preparedStatement.executeUpdate ( );\r\n        }\r\n        catch ( SQLException e )\r\n        {\r\n            throw new RuntimeException ( e );\r\n        }\r\n    }\r\n\r\n    private void dropTable ( )\r\n    {\r\n        String sql = &quot;&quot;&quot;\r\n                DROP TABLE IF EXISTS book\r\n                ;\r\n                &quot;&quot;&quot;;\r\n        try (\r\n                Connection connection = this.dataSource.getConnection ( ) ;\r\n                Statement statement = connection.createStatement ( ) ;\r\n        )\r\n        {\r\n            statement.executeUpdate ( sql );\r\n        }\r\n        catch ( SQLException e )\r\n        {\r\n            throw new RuntimeException ( e );\r\n        }\r\n    }\r\n\r\n    private void createTable ( )\r\n    {\r\n        String sql = &quot;&quot;&quot;\r\n                CREATE TABLE book (\r\n                    id BIGINT AUTO_INCREMENT PRIMARY KEY ,\r\n                    title VARCHAR(255) NOT NULL ,\r\n                    created_on TIMESTAMP(6) NOT NULL\r\n                ) ;\r\n                &quot;&quot;&quot;;\r\n        try (\r\n                Connection connection = this.dataSource.getConnection ( ) ;\r\n                Statement statement = connection.createStatement ( ) ;\r\n        )\r\n        {\r\n            statement.executeUpdate ( sql );\r\n        }\r\n        catch ( SQLException e )\r\n        {\r\n            throw new RuntimeException ( e );\r\n        }\r\n    }\r\n\r\n\r\n    // Constructor\r\n    public App ( )\r\n    {\r\n        this.dataSource = this.configureDataSource ( );\r\n    }\r\n\r\n    private DataSource configureDataSource ( )\r\n    {\r\n        com.mysql.cj.jdbc.MysqlDataSource dataSource = new com.mysql.cj.jdbc.MysqlDataSource ( );\r\n        dataSource.setDatabaseName ( &quot;bogus_&quot; );\r\n        dataSource.setServerName ( &quot;localhost&quot; );\r\n        dataSource.setPort ( 8090 );\r\n        dataSource.setUser ( &quot;root&quot; );\r\n        dataSource.setPassword ( &quot;&quot; );  // WARNING: Risky business, leaving your server unprotected, without security.\r\n        return dataSource;\r\n    }\r\n\r\n    public static void main ( String[] args )\r\n    {\r\n        App app = new App ( );\r\n        app.demo ( );\r\n    }\r\n\r\n    private void dumpTime ( )\r\n    {\r\n        String sql = &quot;SELECT CURRENT_TIMESTAMP  ;&quot;;\r\n        try (\r\n                Connection connection = this.dataSource.getConnection ( ) ;\r\n                Statement statement = connection.createStatement ( ) ;\r\n                ResultSet resultSet = statement.executeQuery ( sql ) ;\r\n        )\r\n        {\r\n            while ( resultSet.next ( ) )\r\n            {\r\n                String now = resultSet.getString ( 1 );\r\n                System.out.println ( now + &quot;\\n&quot; );\r\n            }\r\n        }\r\n        catch ( SQLException e )\r\n        {\r\n            throw new RuntimeException ( e );\r\n        }\r\n    }\r\n}\r\n```\r\n\r\n\r\nWhen run:\r\n\r\n```none\r\nzdt = 2023-08-14T14:26:20.708102-06:00[America/Edmonton]\r\nodt = 2023-08-14T14:26:20.708102-06:00\r\ninstant = 2023-08-14T20:26:20.708102Z\r\nBookRecord[id=1, title=Our First Book, odt=2023-08-14T20:26:20.708102-07:00]\r\nAug 14, 2023 1:26:20 PM org.hibernate.Version logVersion\r\nINFO: HHH000412: Hibernate ORM core version 6.2.7.Final\r\nAug 14, 2023 1:26:20 PM org.hibernate.cfg.Environment &lt;clinit&gt;\r\nINFO: HHH000406: Using bytecode reflection optimizer\r\nAug 14, 2023 1:26:21 PM org.hibernate.bytecode.internal.BytecodeProviderInitiator buildBytecodeProvider\r\nINFO: HHH000021: Bytecode provider name : bytebuddy\r\nAug 14, 2023 1:26:21 PM org.hibernate.engine.transaction.jta.platform.internal.JtaPlatformInitiator initiateService\r\nINFO: HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]\r\nRetrieved via Hibernate… book = Book{id=1, title=&#39;Our First Book&#39;, createdOn=2023-08-14T20:26:20.708102Z}\r\n```\r\n\r\n\r\n  [1]: https://en.wikipedia.org/wiki/Java_Platform,_Standard_Edition\r\n  [2]: https://jakarta.ee/\r\n  [3]: https://docs.oracle.com/en/java/javase/20/docs/api/java.sql/javax/sql/DataSource.html\r\n  [4]: https://dev.mysql.com/doc/connector-j/8.1/en/connector-j-reference-configuration-properties.html","title":"Hibernate using an instance of javax.sql.DataSource","body":"<p><strong>Caveat:</strong> I don’t really know what I am doing here. I am new to Hibernate and Jakarta Persistence. I cobbled together this code with various pieces from various sources, and monkeyed around until it worked.</p>\n<p>I could not find anything close to being a complete example of how to configure Hibernate/Jakarta Persistence in code-only (no XML files, no JNDI) using an existing <code>DataSource</code> instance. So I posted this here. Hopefully it can help others.</p>\n<hr />\n<p>Here is an example using <a href=\"https://en.wikipedia.org/wiki/Java_Platform,_Standard_Edition\" rel=\"nofollow noreferrer\">Java SE</a>, without any <a href=\"https://jakarta.ee/\" rel=\"nofollow noreferrer\">Jakarta EE</a> application server.</p>\n<p>I used:</p>\n<ul>\n<li>Server: MySQL 8.1.0 on Linux in Docker Desktop 4.22.0 app for Apple Silicon (aarch64)</li>\n<li>Client: Hibernate Core 6.2.7.Final which brought in Jakarta Persistence 3.1.0, with the JDBC driver MySQL Connector/J 8.1.0, in IntelliJ IDEA 2023.2.1 Preview, in Java 20.0.2, on macOS Ventura on a MacBook Pro with Apple M1 Pro chip.</li>\n</ul>\n<p>👉🏼 I configured Hibernate strictly with the code seen below. I did <em>not</em> write any configuration XML file.</p>\n<h2><code>DataSource</code> code</h2>\n<p><a href=\"https://docs.oracle.com/en/java/javase/20/docs/api/java.sql/javax/sql/DataSource.html\" rel=\"nofollow noreferrer\"><code>javax.sql.DataSource</code></a> in the interface bundled with Java SE. We need an implementation of that interface. In this example, we use an implementation provided by the JDBC driver, <em>MySQL Connector/J</em>, in the class <code>com.mysql.cj.jdbc.MysqlDataSource</code>.</p>\n<p>We set up an instance of that <code>DataSource</code> implementation in the following method.</p>\n<pre class=\"lang-java prettyprint-override\"><code>private DataSource configureDataSource ( )\n{\n    com.mysql.cj.jdbc.MysqlDataSource dataSource = new com.mysql.cj.jdbc.MysqlDataSource ( );\n    dataSource.setDatabaseName ( &quot;bogus_&quot; );\n    dataSource.setServerName ( &quot;localhost&quot; );\n    dataSource.setPort ( 8090 );\n    dataSource.setUser ( &quot;root&quot; );\n    dataSource.setPassword ( &quot;&quot; );  // WARNING: Risky business, leaving your server unprotected, without security. \n    return dataSource;\n}\n</code></pre>\n<p>For more info, see the <a href=\"https://dev.mysql.com/doc/connector-j/8.1/en/connector-j-reference-configuration-properties.html\" rel=\"nofollow noreferrer\"><em>Configuration Properties</em></a> of the <em>Connector/J</em> manual.</p>\n<h2>Hibernate code</h2>\n<p>Having that <code>DataSource</code> instance in hand, we can use Hibernate to connect to the database server, execute a query, and package the retrieved data as an object.</p>\n<pre class=\"lang-java prettyprint-override\"><code>Configuration cfg = new Configuration ( );\ncfg.getProperties ( ).put ( Environment.DATASOURCE , this.dataSource );\ncfg.addAnnotatedClass ( Book.class );\nServiceRegistry serviceRegistry = new StandardServiceRegistryBuilder ( ).applySettings ( cfg.getProperties ( ) ).build ( );\n\ntry ( SessionFactory sessionFactory = cfg.buildSessionFactory ( serviceRegistry ) )\n{\n    Session session = sessionFactory.openSession ( );\n    Query jpqlQuery = session.createQuery ( &quot;SELECT b FROM Book b WHERE b.title=:title&quot; , Book.class );\n    jpqlQuery.setParameter ( &quot;title&quot; , &quot;Our First Book&quot; );\n    Book book = ( Book ) jpqlQuery.getSingleResult ( );\n    System.out.println ( &quot;Retrieved via Hibernate… book = &quot; + book );\n}\n</code></pre>\n<blockquote>\n<p>Retrieved via Hibernate… book = Book{id=1, title='Our First Book', createdOn=2023-08-14T20:26:20.708102Z}</p>\n</blockquote>\n<h2>Full example code</h2>\n<p>First the <code>Book</code> class. We expect Hibernate to instantiate an object of this class.</p>\n<pre class=\"lang-java prettyprint-override\"><code>package work.basil.example.hibernate;\n\nimport jakarta.persistence.* ;\n\nimport java.time.OffsetDateTime;\n\n@Entity\n@Table(name = &quot;book&quot;)\npublic class Book {\n    @Id\n    @GeneratedValue(strategy=GenerationType.AUTO)\n    private Long id;\n\n    private String title;\n\n    @Column(name = &quot;created_on&quot;)\n    private OffsetDateTime createdOn;\n\n    // Accessors\n\n    public Long getId ( )\n    {\n        return id;\n    }\n\n    public void setId ( Long id )\n    {\n        this.id = id;\n    }\n\n    public String getTitle ( )\n    {\n        return title;\n    }\n\n    public void setTitle ( String title )\n    {\n        this.title = title;\n    }\n\n    public OffsetDateTime getCreatedOn ( )\n    {\n        return createdOn;\n    }\n\n    public void setCreatedOn ( OffsetDateTime createdOn )\n    {\n        this.createdOn = createdOn;\n    }\n\n    // Object overrides\n\n    @Override\n    public String toString ( )\n    {\n        return &quot;Book{&quot; +\n               &quot;id=&quot; + id +\n               &quot;, title='&quot; + title + '\\'' +\n               &quot;, createdOn=&quot; + createdOn +\n               '}';\n    }\n}\n</code></pre>\n<p>And our complete example application code. This code:</p>\n<ol>\n<li>Re-creates a single table, <code>book</code>. Then repopulates that table with a single row. Both steps use straight JDBC, no Hibernate.</li>\n<li>Uses Hibernate to query for our single row, and instantiate a <code>Book</code> object with that retrieved data.</li>\n</ol>\n<pre class=\"lang-java prettyprint-override\"><code>package work.basil.example.hibernate;\n\nimport jakarta.persistence.*;\nimport org.hibernate.SessionFactory;\nimport org.hibernate.boot.registry.StandardServiceRegistryBuilder;\nimport org.hibernate.cfg.Configuration;\nimport org.hibernate.Session;\nimport org.hibernate.cfg.Environment;\nimport org.hibernate.service.ServiceRegistry;\n\nimport javax.sql.DataSource;\nimport java.sql.*;\nimport java.time.Instant;\nimport java.time.OffsetDateTime;\nimport java.time.*;\nimport java.time.ZonedDateTime;\n\npublic class App\n{\n    final DataSource dataSource;\n\n    private void demo ( )\n    {\n        this.dropTable ( );\n        this.createTable ( );\n        this.insertRow ( );\n        this.dumpRows ( );\n        this.dumpHibernate ( );\n    }\n\n    private void dumpHibernate ( )\n    {\n        Configuration cfg = new Configuration ( );\n        cfg.getProperties ( ).put ( Environment.DATASOURCE , this.dataSource );\n        cfg.addAnnotatedClass ( Book.class );\n        ServiceRegistry serviceRegistry = new StandardServiceRegistryBuilder ( ).applySettings ( cfg.getProperties ( ) ).build ( );\n\n        try ( SessionFactory sessionFactory = cfg.buildSessionFactory ( serviceRegistry ) )\n        {\n            Session session = sessionFactory.openSession ( );\n            Query jpqlQuery = session.createQuery ( &quot;SELECT b FROM Book b WHERE b.title=:title&quot; , Book.class );\n            jpqlQuery.setParameter ( &quot;title&quot; , &quot;Our First Book&quot; );\n            Book book = ( Book ) jpqlQuery.getSingleResult ( );\n            System.out.println ( &quot;Retrieved via Hibernate… book = &quot; + book );\n        }\n    }\n\n    private void dumpRows ( )\n    {\n        String sql = &quot;&quot;&quot;\n                SELECT *\n                FROM book\n                 ;\n                 &quot;&quot;&quot;;\n        try (\n                Connection connection = this.dataSource.getConnection ( ) ;\n                Statement statement = connection.createStatement ( ) ;\n                ResultSet resultSet = statement.executeQuery ( sql ) ;\n        )\n        {\n            record BookRecord( Long id , String title , OffsetDateTime odt ) { }\n            while ( resultSet.next ( ) )\n            {\n                Long id = resultSet.getLong ( &quot;id&quot; );\n                String title = resultSet.getString ( &quot;title&quot; );\n                OffsetDateTime odt = resultSet.getObject ( &quot;created_on&quot; , OffsetDateTime.class );\n                System.out.println ( new BookRecord ( id , title , odt ).toString ( ) );\n            }\n        }\n        catch ( SQLException e )\n        {\n            throw new RuntimeException ( e );\n        }\n    }\n\n    private void insertRow ( )\n    {\n        String sql = &quot;&quot;&quot;\n                INSERT INTO book\n                ( title , created_on )\n                VALUES\n                ( ? , ? )\n                 ;\n                 &quot;&quot;&quot;;\n        try (\n                Connection connection = this.dataSource.getConnection ( ) ;\n                PreparedStatement preparedStatement = connection.prepareStatement ( sql ) ;\n        )\n        {\n            ZonedDateTime zdt = ZonedDateTime.now ( ZoneId.of ( &quot;America/Edmonton&quot; ) ); // Capture the current moment as seen in a particular time zone.\n            OffsetDateTime odt = zdt.toOffsetDateTime ( );  // Discard the time zone, keeping only a mere offset-from-UTC. Not an improvement, but standard SQL does not support only offsets, not time zones.\n            Instant instant = odt.toInstant ( );  // Adjust to an offset from UTC of zero hours-minutes-seeconds.\n            System.out.println ( &quot;zdt = &quot; + zdt );  // Be aware: All three of these date-time objects represent the very same moment, the same point on the timeline.\n            System.out.println ( &quot;odt = &quot; + odt );\n            System.out.println ( &quot;instant = &quot; + instant );\n            preparedStatement.setString ( 1 , &quot;Our First Book&quot; );\n            preparedStatement.setString ( 2 , odt.toString ( ) );\n            preparedStatement.executeUpdate ( );\n        }\n        catch ( SQLException e )\n        {\n            throw new RuntimeException ( e );\n        }\n    }\n\n    private void dropTable ( )\n    {\n        String sql = &quot;&quot;&quot;\n                DROP TABLE IF EXISTS book\n                ;\n                &quot;&quot;&quot;;\n        try (\n                Connection connection = this.dataSource.getConnection ( ) ;\n                Statement statement = connection.createStatement ( ) ;\n        )\n        {\n            statement.executeUpdate ( sql );\n        }\n        catch ( SQLException e )\n        {\n            throw new RuntimeException ( e );\n        }\n    }\n\n    private void createTable ( )\n    {\n        String sql = &quot;&quot;&quot;\n                CREATE TABLE book (\n                    id BIGINT AUTO_INCREMENT PRIMARY KEY ,\n                    title VARCHAR(255) NOT NULL ,\n                    created_on TIMESTAMP(6) NOT NULL\n                ) ;\n                &quot;&quot;&quot;;\n        try (\n                Connection connection = this.dataSource.getConnection ( ) ;\n                Statement statement = connection.createStatement ( ) ;\n        )\n        {\n            statement.executeUpdate ( sql );\n        }\n        catch ( SQLException e )\n        {\n            throw new RuntimeException ( e );\n        }\n    }\n\n\n    // Constructor\n    public App ( )\n    {\n        this.dataSource = this.configureDataSource ( );\n    }\n\n    private DataSource configureDataSource ( )\n    {\n        com.mysql.cj.jdbc.MysqlDataSource dataSource = new com.mysql.cj.jdbc.MysqlDataSource ( );\n        dataSource.setDatabaseName ( &quot;bogus_&quot; );\n        dataSource.setServerName ( &quot;localhost&quot; );\n        dataSource.setPort ( 8090 );\n        dataSource.setUser ( &quot;root&quot; );\n        dataSource.setPassword ( &quot;&quot; );  // WARNING: Risky business, leaving your server unprotected, without security.\n        return dataSource;\n    }\n\n    public static void main ( String[] args )\n    {\n        App app = new App ( );\n        app.demo ( );\n    }\n\n    private void dumpTime ( )\n    {\n        String sql = &quot;SELECT CURRENT_TIMESTAMP  ;&quot;;\n        try (\n                Connection connection = this.dataSource.getConnection ( ) ;\n                Statement statement = connection.createStatement ( ) ;\n                ResultSet resultSet = statement.executeQuery ( sql ) ;\n        )\n        {\n            while ( resultSet.next ( ) )\n            {\n                String now = resultSet.getString ( 1 );\n                System.out.println ( now + &quot;\\n&quot; );\n            }\n        }\n        catch ( SQLException e )\n        {\n            throw new RuntimeException ( e );\n        }\n    }\n}\n</code></pre>\n<p>When run:</p>\n<pre class=\"lang-none prettyprint-override\"><code>zdt = 2023-08-14T14:26:20.708102-06:00[America/Edmonton]\nodt = 2023-08-14T14:26:20.708102-06:00\ninstant = 2023-08-14T20:26:20.708102Z\nBookRecord[id=1, title=Our First Book, odt=2023-08-14T20:26:20.708102-07:00]\nAug 14, 2023 1:26:20 PM org.hibernate.Version logVersion\nINFO: HHH000412: Hibernate ORM core version 6.2.7.Final\nAug 14, 2023 1:26:20 PM org.hibernate.cfg.Environment &lt;clinit&gt;\nINFO: HHH000406: Using bytecode reflection optimizer\nAug 14, 2023 1:26:21 PM org.hibernate.bytecode.internal.BytecodeProviderInitiator buildBytecodeProvider\nINFO: HHH000021: Bytecode provider name : bytebuddy\nAug 14, 2023 1:26:21 PM org.hibernate.engine.transaction.jta.platform.internal.JtaPlatformInitiator initiateService\nINFO: HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]\nRetrieved via Hibernate… book = Book{id=1, title='Our First Book', createdOn=2023-08-14T20:26:20.708102Z}\n</code></pre>\n"}],"owner":{"account_id":15533,"reputation":34400,"user_id":32899,"accept_rate":92,"display_name":"Ben Noland"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2912,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":884234,"answer_count":4,"score":1,"last_activity_date":1692053653,"creation_date":1242755314,"question_id":884154,"body_markdown":"Is it possible to configure Hibernate to use a javax.sql.DataSource instance?\r\n\r\nMy application already has an instance of javax.sql.DataSource and I&#39;d rather not re-configure the database url, user, password, driver etc just for hibernate.","title":"Hibernate using an instance of javax.sql.DataSource","body":"<p>Is it possible to configure Hibernate to use a javax.sql.DataSource instance?</p>\n\n<p>My application already has an instance of javax.sql.DataSource and I'd rather not re-configure the database url, user, password, driver etc just for hibernate.</p>\n"},{"tags":["java","encryption","sharedpreferences"],"comments":[{"owner":{"account_id":11125108,"reputation":5965,"user_id":8166854,"display_name":"Michael Fehr"},"score":2,"creation_date":1691968853,"post_id":76894745,"comment_id":135558498,"body_markdown":"In your &quot;decrypt&quot; and &quot;decryptData&quot; methods you are using &quot;generateIV()&quot;. Although you don&#39;t show the code I&#39;m assuming you are generating a **new** initializing vector, but you need to store the IV used on encryption and use the stored IV for decryption later. B.t.w.: why don&#39;t you use **Encrypted Shared Preferences** ?","body":"In your &quot;decrypt&quot; and &quot;decryptData&quot; methods you are using &quot;generateIV()&quot;. Although you don&#39;t show the code I&#39;m assuming you are generating a <b>new</b> initializing vector, but you need to store the IV used on encryption and use the stored IV for decryption later. B.t.w.: why don&#39;t you use <b>Encrypted Shared Preferences</b> ?"},{"owner":{"account_id":22675559,"reputation":11,"user_id":16846655,"display_name":"ArtinM00"},"score":0,"creation_date":1692001879,"post_id":76894745,"comment_id":135561762,"body_markdown":"Just noticed I missed to add that part, it is now added. I have not looked into encrypted shared preferences, how would they help me in my case? Does it remove the need to encrypt and remove passwords every time?","body":"Just noticed I missed to add that part, it is now added. I have not looked into encrypted shared preferences, how would they help me in my case? Does it remove the need to encrypt and remove passwords every time?"},{"owner":{"account_id":11125108,"reputation":5965,"user_id":8166854,"display_name":"Michael Fehr"},"score":0,"creation_date":1692003905,"post_id":76894745,"comment_id":135562142,"body_markdown":"**Encrypted Shared Preferences** storing credentials the same like Shared Preferences but secured by an AES-GCM based encryption scheme, so you don&#39;t need to have your own crypto scheme that can easily get insecure (e.g. if you are using an IV that was not generated securely and random). Second: your &quot;PasswordUtils.hashPassword&quot; method may be insecure [not shown here] e.g. because a key derivation like PBKDF2 is using a much to short number of iterations like 1..9999. So there are a lot of reasons to use the Encrypted Shared Preferences.","body":"<b>Encrypted Shared Preferences</b> storing credentials the same like Shared Preferences but secured by an AES-GCM based encryption scheme, so you don&#39;t need to have your own crypto scheme that can easily get insecure (e.g. if you are using an IV that was not generated securely and random). Second: your &quot;PasswordUtils.hashPassword&quot; method may be insecure [not shown here] e.g. because a key derivation like PBKDF2 is using a much to short number of iterations like 1..9999. So there are a lot of reasons to use the Encrypted Shared Preferences."},{"owner":{"account_id":11125108,"reputation":5965,"user_id":8166854,"display_name":"Michael Fehr"},"score":0,"creation_date":1692004042,"post_id":76894745,"comment_id":135562166,"body_markdown":"Just one hickup on Encrypted Shared Preferences: as the key that is used to generate the &quot;MasterKey&quot; is stored within your Android&#39;s keystore it is NOT part of any backup mechanism by Google, so if you change your device the app on the new device needs to setup all the keys again.","body":"Just one hickup on Encrypted Shared Preferences: as the key that is used to generate the &quot;MasterKey&quot; is stored within your Android&#39;s keystore it is NOT part of any backup mechanism by Google, so if you change your device the app on the new device needs to setup all the keys again."},{"owner":{"account_id":22675559,"reputation":11,"user_id":16846655,"display_name":"ArtinM00"},"score":0,"creation_date":1692018974,"post_id":76894745,"comment_id":135565023,"body_markdown":"Alright so what do you think is the best way to go at the moment? I know that my encryption works, the password gets encrypted its just during the comparison section where the password never gets passed through the sharedpreferences to the variable im storing the decrypted password.","body":"Alright so what do you think is the best way to go at the moment? I know that my encryption works, the password gets encrypted its just during the comparison section where the password never gets passed through the sharedpreferences to the variable im storing the decrypted password."},{"owner":{"account_id":11125108,"reputation":5965,"user_id":8166854,"display_name":"Michael Fehr"},"score":1,"creation_date":1692049295,"post_id":76894745,"comment_id":135570525,"body_markdown":"As you didn&#39;t show the crypto code parts it is impossible to give an advice, just the general advice &quot;don&#39;t run your own crypto&quot;.","body":"As you didn&#39;t show the crypto code parts it is impossible to give an advice, just the general advice &quot;don&#39;t run your own crypto&quot;."},{"owner":{"account_id":22675559,"reputation":11,"user_id":16846655,"display_name":"ArtinM00"},"score":0,"creation_date":1692053641,"post_id":76894745,"comment_id":135570985,"body_markdown":"Added the entire cryptoutils class that im using, hopefully it clears some of the question marks!","body":"Added the entire cryptoutils class that im using, hopefully it clears some of the question marks!"},{"owner":{"account_id":11125108,"reputation":5965,"user_id":8166854,"display_name":"Michael Fehr"},"score":0,"creation_date":1692081814,"post_id":76894745,"comment_id":135573079,"body_markdown":"Your issue persists because - as mentioned in my first comment - you are **generating a new IV when DECRYPTING**. As your algorithm is &quot;AES/CBC/PKCS7Padding&quot; the decrypt method will throw an exception and returns &quot;null&quot; - that is the result you are seeing - nothing. Store the IV generated when encrypt (e.g. in Shared Preferences) and use it for decryption.","body":"Your issue persists because - as mentioned in my first comment - you are <b>generating a new IV when DECRYPTING</b>. As your algorithm is &quot;AES/CBC/PKCS7Padding&quot; the decrypt method will throw an exception and returns &quot;null&quot; - that is the result you are seeing - nothing. Store the IV generated when encrypt (e.g. in Shared Preferences) and use it for decryption."},{"owner":{"account_id":22675559,"reputation":11,"user_id":16846655,"display_name":"ArtinM00"},"score":0,"creation_date":1692087838,"post_id":76894745,"comment_id":135574016,"body_markdown":"Ive tried several changes now, even asked chatGPT as a final precaution if I missed anything but it did not work. For instance in my encrypt method Im generating a secret key that is mapped to the iv generated by the method generateIV(). Then in decrypt I just use the secret key, is that what causes the problem? Otherwise I can&#39;t see what the problem is in the code.","body":"Ive tried several changes now, even asked chatGPT as a final precaution if I missed anything but it did not work. For instance in my encrypt method Im generating a secret key that is mapped to the iv generated by the method generateIV(). Then in decrypt I just use the secret key, is that what causes the problem? Otherwise I can&#39;t see what the problem is in the code."},{"owner":{"account_id":11125108,"reputation":5965,"user_id":8166854,"display_name":"Michael Fehr"},"score":0,"creation_date":1692092254,"post_id":76894745,"comment_id":135574747,"body_markdown":"You remember an early comment of mine - &quot;don&#39;t roll out your own crypto&quot; ? See my previous comment - save the generated IV on encryption and use THIS IV for decryption. What part of this statement seems to be unclear ?","body":"You remember an early comment of mine - &quot;don&#39;t roll out your own crypto&quot; ? See my previous comment - save the generated IV on encryption and use THIS IV for decryption. What part of this statement seems to be unclear ?"}],"owner":{"account_id":22675559,"reputation":11,"user_id":16846655,"display_name":"ArtinM00"},"comment_count":10,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":85,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1692053603,"creation_date":1691952335,"question_id":76894745,"body_markdown":"Im making an app in android studio using Java which is going to be like a password vault. So the user registers, logs in and can then add login details to various websites, the details get encrypted and the user has to re enter their main account password to decrypt the details. The problem im having is that during the decrypting process when im comparing the input password with the encrypted password, the encrypted password variable never gets updated. \r\n\r\nThis class is the registration activity, the page where the user first registers themselves. \r\n\r\n```\r\n// Create a new User instance (This will integrate with the Room database)\r\n            User newUser = new User(firstName, lastName, email, password);\r\n\r\n            // Use ExecutorService to insert the user on a background thread\r\n            executorService.submit(() -&gt; {\r\n                try {\r\n                    AppDatabase.getInstance(RegisterActivity.this).userDao().insertUser(newUser);\r\n\r\n                    // Log success\r\n                    Log.d(&quot;Registration&quot;, &quot;User registered successfully: &quot; + newUser.getEmail());\r\n\r\n                    // Store the password in SharedPreferences\r\n                    storeUserPassword(RegisterActivity.this, password);\r\n                    //storeUserPassword(RegisterActivity.this, password);\r\n\r\n                    // Show a toast message on the main thread\r\n                    mainHandler.post(() -&gt; {\r\n                        String message = &quot;Registration successful for &quot; + firstName + &quot; &quot; + lastName;\r\n                        Toast.makeText(RegisterActivity.this, message, Toast.LENGTH_SHORT).show();\r\n                    });\r\n\r\n                    // Navigate back to the login activity on the main thread\r\n                    mainHandler.post(() -&gt; onBackPressed());\r\n                } catch (Exception e) {\r\n                    // Log error\r\n                    Log.e(&quot;Registration&quot;, &quot;Error inserting user: &quot; + e.getMessage());\r\n\r\n                    // Show a toast message on the main thread\r\n                    mainHandler.post(() -&gt; Toast.makeText(RegisterActivity.this, &quot;Error during registration&quot;, Toast.LENGTH_LONG).show());\r\n                }\r\n            });\r\n        });\r\n```\r\n\r\n\r\n```\r\nprivate void storeUserPassword(Context context, String password) {\r\n        try {\r\n            // Generate a salt and hash the password\r\n            String hashedPassword = PasswordUtils.hashPassword(password);\r\n\r\n            // Store the hashed password in SharedPreferences\r\n            SharedPreferences sharedPreferences = context.getSharedPreferences(&quot;MyPrefs&quot;, MODE_PRIVATE);\r\n            sharedPreferences.edit()\r\n                    .putString(&quot;userPassword&quot;, hashedPassword)\r\n                    .apply();\r\n        } catch (Exception e) {\r\n            e.printStackTrace();\r\n            // Handle hashing and storage error\r\n        }\r\n    }\r\n```\r\n\r\nThis is the password entry adapter class\r\n\r\n```\r\nconfirmButton.setOnClickListener(v -&gt; {\r\n            String enteredPassword = passwordEditText.getText().toString();\r\n            // Check if the entered password is correct\r\n            if (verifyPassword(context, enteredPassword)) {\r\n                passwordDialog.dismiss();\r\n                // Decrypt and show the login details dialog\r\n                showDecryptedPasswordDetailsDialog(entry);\r\n            } else {\r\n                Toast.makeText(context, &quot;Incorrect password&quot;, Toast.LENGTH_SHORT).show();\r\n            }\r\n        });\r\n```\r\n\r\n```\r\nprivate boolean verifyPassword(Context context, String enteredPassword) {\r\n        SharedPreferences sharedPreferences = context.getSharedPreferences(&quot;MyPrefs&quot;, Context.MODE_PRIVATE);\r\n        String storedHashedPassword = sharedPreferences.getString(&quot;userPassword&quot;, &quot;&quot;);\r\n\r\n        String enteredHashedPassword = PasswordUtils.hashPassword(enteredPassword);\r\n\r\n        Log.d(&quot;PasswordDebug&quot;, &quot;Stored Hash: &quot; + storedHashedPassword);\r\n        Log.d(&quot;PasswordDebug&quot;, &quot;Entered Hash: &quot; + enteredHashedPassword);\r\n\r\n        return enteredHashedPassword.equals(storedHashedPassword);\r\n    }\r\n```\r\n\r\n```\r\nprivate String decryptData(String encryptedData, String userPassword) {\r\n        try {\r\n            KeyStore keyStore = KeyStore.getInstance(&quot;AndroidKeyStore&quot;);\r\n            keyStore.load(null);\r\n            KeyStore.SecretKeyEntry secretKeyEntry = (KeyStore.SecretKeyEntry) keyStore.getEntry(&quot;password_key&quot;, null);\r\n            SecretKey secretKey = secretKeyEntry.getSecretKey();\r\n\r\n            Cipher cipher = Cipher.getInstance(&quot;AES/CBC/PKCS7Padding&quot;);\r\n            cipher.init(Cipher.DECRYPT_MODE, secretKey, new IvParameterSpec(CryptoUtils.generateIV()));\r\n\r\n            byte[] decodedData = Base64.decode(encryptedData, Base64.DEFAULT);\r\n            byte[] decryptedData = cipher.doFinal(decodedData);\r\n\r\n            return CryptoUtils.decrypt(new String(decryptedData, StandardCharsets.UTF_8), secretKey);\r\n        } catch (Exception e) {\r\n            e.printStackTrace();\r\n            return &quot;&quot;;\r\n        }\r\n    }\r\n```\r\n\r\nThis is the code that is supposed to take the encrypted password and decrypt it and set its string value to the sharedpreferences object which im retrieving the string value from to then make the comparison\r\n```\r\npublic static String decrypt(String encryptedText, SecretKey secretKey) {\r\n        try {\r\n            Cipher cipher = Cipher.getInstance(&quot;AES/CBC/PKCS7Padding&quot;);\r\n            cipher.init(Cipher.DECRYPT_MODE, secretKey, new IvParameterSpec(generateIV()));\r\n\r\n            byte[] decodedData = Base64.decode(encryptedText, Base64.DEFAULT);\r\n            byte[] decryptedBytes = cipher.doFinal(decodedData);\r\n\r\n            return new String(decryptedBytes, StandardCharsets.UTF_8);\r\n        } catch (Exception e) {\r\n            e.printStackTrace();\r\n            return null;\r\n        }\r\n    }\r\n```\r\n```\r\n public static byte[] generateIV() {\r\n        SecureRandom secureRandom = new SecureRandom();\r\n        byte[] iv = new byte[16]; // 16 bytes for AES IV\r\n        secureRandom.nextBytes(iv);\r\n        return iv;\r\n    }\r\n```\r\n\r\nThis is the CryptoUtils class where the encryption and decryption happens\r\n\r\n```\r\npublic class CryptoUtils {\r\n\r\n    private static final String KEY_ALIAS = &quot;my_secret_key_alias&quot;;\r\n    private static final int GCM_IV_LENGTH = 12; // 96 bits\r\n\r\n    public static SecretKey generateSecretKey() throws Exception {\r\n        KeyGenerator keyGenerator = KeyGenerator.getInstance(KeyProperties.KEY_ALGORITHM_AES, &quot;AndroidKeyStore&quot;);\r\n        KeyGenParameterSpec keyGenParameterSpec = new KeyGenParameterSpec.Builder(KEY_ALIAS,\r\n                KeyProperties.PURPOSE_ENCRYPT | KeyProperties.PURPOSE_DECRYPT)\r\n                .setBlockModes(KeyProperties.BLOCK_MODE_GCM)\r\n                .setEncryptionPaddings(KeyProperties.ENCRYPTION_PADDING_NONE)\r\n                .build();\r\n        keyGenerator.init(keyGenParameterSpec);\r\n        return keyGenerator.generateKey();\r\n    }\r\n\r\n    public static byte[] generateIV() {\r\n        SecureRandom secureRandom = new SecureRandom();\r\n        byte[] iv = new byte[16]; // 16 bytes for AES IV\r\n        secureRandom.nextBytes(iv);\r\n        return iv;\r\n    }\r\n\r\n\r\n    public static String encrypt(String input, SecretKey secretKey, byte[] iv) throws Exception {\r\n        Cipher cipher = Cipher.getInstance(&quot;AES/CBC/PKCS7Padding&quot;);\r\n        cipher.init(Cipher.ENCRYPT_MODE, secretKey, new IvParameterSpec(iv));\r\n        byte[] encryptedBytes = cipher.doFinal(input.getBytes());\r\n        return Base64.encodeToString(encryptedBytes, Base64.DEFAULT);\r\n    }\r\n\r\n\r\n    public static String decrypt(String encryptedText, SecretKey secretKey) {\r\n        try {\r\n            Cipher cipher = Cipher.getInstance(&quot;AES/CBC/PKCS7Padding&quot;);\r\n            cipher.init(Cipher.DECRYPT_MODE, secretKey, new IvParameterSpec(generateIV()));\r\n\r\n            byte[] decodedData = Base64.decode(encryptedText, Base64.DEFAULT);\r\n            byte[] decryptedBytes = cipher.doFinal(decodedData);\r\n\r\n            return new String(decryptedBytes, StandardCharsets.UTF_8);\r\n        } catch (Exception e) {\r\n            e.printStackTrace();\r\n            return null;\r\n        }\r\n    }\r\n\r\n}\r\n```\r\n\r\nWhen im debugging it is just an empty string value. So I even hardcoded the encrypted password so they would definitely match but then since they are string objects they can be the &quot;same&quot; objects but their hashcodes differ, and that is where my problem got bigger. Im completely out of ideas on how to keep debugging. If you do not understand or have a hard time trying to follow the logic, please tell me so I can show you more of the code. ","title":"Cannot find solution to decryption problem using sharedpreferences","body":"<p>Im making an app in android studio using Java which is going to be like a password vault. So the user registers, logs in and can then add login details to various websites, the details get encrypted and the user has to re enter their main account password to decrypt the details. The problem im having is that during the decrypting process when im comparing the input password with the encrypted password, the encrypted password variable never gets updated.</p>\n<p>This class is the registration activity, the page where the user first registers themselves.</p>\n<pre><code>// Create a new User instance (This will integrate with the Room database)\n            User newUser = new User(firstName, lastName, email, password);\n\n            // Use ExecutorService to insert the user on a background thread\n            executorService.submit(() -&gt; {\n                try {\n                    AppDatabase.getInstance(RegisterActivity.this).userDao().insertUser(newUser);\n\n                    // Log success\n                    Log.d(&quot;Registration&quot;, &quot;User registered successfully: &quot; + newUser.getEmail());\n\n                    // Store the password in SharedPreferences\n                    storeUserPassword(RegisterActivity.this, password);\n                    //storeUserPassword(RegisterActivity.this, password);\n\n                    // Show a toast message on the main thread\n                    mainHandler.post(() -&gt; {\n                        String message = &quot;Registration successful for &quot; + firstName + &quot; &quot; + lastName;\n                        Toast.makeText(RegisterActivity.this, message, Toast.LENGTH_SHORT).show();\n                    });\n\n                    // Navigate back to the login activity on the main thread\n                    mainHandler.post(() -&gt; onBackPressed());\n                } catch (Exception e) {\n                    // Log error\n                    Log.e(&quot;Registration&quot;, &quot;Error inserting user: &quot; + e.getMessage());\n\n                    // Show a toast message on the main thread\n                    mainHandler.post(() -&gt; Toast.makeText(RegisterActivity.this, &quot;Error during registration&quot;, Toast.LENGTH_LONG).show());\n                }\n            });\n        });\n</code></pre>\n<pre><code>private void storeUserPassword(Context context, String password) {\n        try {\n            // Generate a salt and hash the password\n            String hashedPassword = PasswordUtils.hashPassword(password);\n\n            // Store the hashed password in SharedPreferences\n            SharedPreferences sharedPreferences = context.getSharedPreferences(&quot;MyPrefs&quot;, MODE_PRIVATE);\n            sharedPreferences.edit()\n                    .putString(&quot;userPassword&quot;, hashedPassword)\n                    .apply();\n        } catch (Exception e) {\n            e.printStackTrace();\n            // Handle hashing and storage error\n        }\n    }\n</code></pre>\n<p>This is the password entry adapter class</p>\n<pre><code>confirmButton.setOnClickListener(v -&gt; {\n            String enteredPassword = passwordEditText.getText().toString();\n            // Check if the entered password is correct\n            if (verifyPassword(context, enteredPassword)) {\n                passwordDialog.dismiss();\n                // Decrypt and show the login details dialog\n                showDecryptedPasswordDetailsDialog(entry);\n            } else {\n                Toast.makeText(context, &quot;Incorrect password&quot;, Toast.LENGTH_SHORT).show();\n            }\n        });\n</code></pre>\n<pre><code>private boolean verifyPassword(Context context, String enteredPassword) {\n        SharedPreferences sharedPreferences = context.getSharedPreferences(&quot;MyPrefs&quot;, Context.MODE_PRIVATE);\n        String storedHashedPassword = sharedPreferences.getString(&quot;userPassword&quot;, &quot;&quot;);\n\n        String enteredHashedPassword = PasswordUtils.hashPassword(enteredPassword);\n\n        Log.d(&quot;PasswordDebug&quot;, &quot;Stored Hash: &quot; + storedHashedPassword);\n        Log.d(&quot;PasswordDebug&quot;, &quot;Entered Hash: &quot; + enteredHashedPassword);\n\n        return enteredHashedPassword.equals(storedHashedPassword);\n    }\n</code></pre>\n<pre><code>private String decryptData(String encryptedData, String userPassword) {\n        try {\n            KeyStore keyStore = KeyStore.getInstance(&quot;AndroidKeyStore&quot;);\n            keyStore.load(null);\n            KeyStore.SecretKeyEntry secretKeyEntry = (KeyStore.SecretKeyEntry) keyStore.getEntry(&quot;password_key&quot;, null);\n            SecretKey secretKey = secretKeyEntry.getSecretKey();\n\n            Cipher cipher = Cipher.getInstance(&quot;AES/CBC/PKCS7Padding&quot;);\n            cipher.init(Cipher.DECRYPT_MODE, secretKey, new IvParameterSpec(CryptoUtils.generateIV()));\n\n            byte[] decodedData = Base64.decode(encryptedData, Base64.DEFAULT);\n            byte[] decryptedData = cipher.doFinal(decodedData);\n\n            return CryptoUtils.decrypt(new String(decryptedData, StandardCharsets.UTF_8), secretKey);\n        } catch (Exception e) {\n            e.printStackTrace();\n            return &quot;&quot;;\n        }\n    }\n</code></pre>\n<p>This is the code that is supposed to take the encrypted password and decrypt it and set its string value to the sharedpreferences object which im retrieving the string value from to then make the comparison</p>\n<pre><code>public static String decrypt(String encryptedText, SecretKey secretKey) {\n        try {\n            Cipher cipher = Cipher.getInstance(&quot;AES/CBC/PKCS7Padding&quot;);\n            cipher.init(Cipher.DECRYPT_MODE, secretKey, new IvParameterSpec(generateIV()));\n\n            byte[] decodedData = Base64.decode(encryptedText, Base64.DEFAULT);\n            byte[] decryptedBytes = cipher.doFinal(decodedData);\n\n            return new String(decryptedBytes, StandardCharsets.UTF_8);\n        } catch (Exception e) {\n            e.printStackTrace();\n            return null;\n        }\n    }\n</code></pre>\n<pre><code> public static byte[] generateIV() {\n        SecureRandom secureRandom = new SecureRandom();\n        byte[] iv = new byte[16]; // 16 bytes for AES IV\n        secureRandom.nextBytes(iv);\n        return iv;\n    }\n</code></pre>\n<p>This is the CryptoUtils class where the encryption and decryption happens</p>\n<pre><code>public class CryptoUtils {\n\n    private static final String KEY_ALIAS = &quot;my_secret_key_alias&quot;;\n    private static final int GCM_IV_LENGTH = 12; // 96 bits\n\n    public static SecretKey generateSecretKey() throws Exception {\n        KeyGenerator keyGenerator = KeyGenerator.getInstance(KeyProperties.KEY_ALGORITHM_AES, &quot;AndroidKeyStore&quot;);\n        KeyGenParameterSpec keyGenParameterSpec = new KeyGenParameterSpec.Builder(KEY_ALIAS,\n                KeyProperties.PURPOSE_ENCRYPT | KeyProperties.PURPOSE_DECRYPT)\n                .setBlockModes(KeyProperties.BLOCK_MODE_GCM)\n                .setEncryptionPaddings(KeyProperties.ENCRYPTION_PADDING_NONE)\n                .build();\n        keyGenerator.init(keyGenParameterSpec);\n        return keyGenerator.generateKey();\n    }\n\n    public static byte[] generateIV() {\n        SecureRandom secureRandom = new SecureRandom();\n        byte[] iv = new byte[16]; // 16 bytes for AES IV\n        secureRandom.nextBytes(iv);\n        return iv;\n    }\n\n\n    public static String encrypt(String input, SecretKey secretKey, byte[] iv) throws Exception {\n        Cipher cipher = Cipher.getInstance(&quot;AES/CBC/PKCS7Padding&quot;);\n        cipher.init(Cipher.ENCRYPT_MODE, secretKey, new IvParameterSpec(iv));\n        byte[] encryptedBytes = cipher.doFinal(input.getBytes());\n        return Base64.encodeToString(encryptedBytes, Base64.DEFAULT);\n    }\n\n\n    public static String decrypt(String encryptedText, SecretKey secretKey) {\n        try {\n            Cipher cipher = Cipher.getInstance(&quot;AES/CBC/PKCS7Padding&quot;);\n            cipher.init(Cipher.DECRYPT_MODE, secretKey, new IvParameterSpec(generateIV()));\n\n            byte[] decodedData = Base64.decode(encryptedText, Base64.DEFAULT);\n            byte[] decryptedBytes = cipher.doFinal(decodedData);\n\n            return new String(decryptedBytes, StandardCharsets.UTF_8);\n        } catch (Exception e) {\n            e.printStackTrace();\n            return null;\n        }\n    }\n\n}\n</code></pre>\n<p>When im debugging it is just an empty string value. So I even hardcoded the encrypted password so they would definitely match but then since they are string objects they can be the &quot;same&quot; objects but their hashcodes differ, and that is where my problem got bigger. Im completely out of ideas on how to keep debugging. If you do not understand or have a hard time trying to follow the logic, please tell me so I can show you more of the code.</p>\n"},{"tags":["java","spring-boot","cors"],"comments":[{"owner":{"account_id":2021661,"reputation":62048,"user_id":2541573,"accept_rate":100,"display_name":"jub0bs"},"score":0,"creation_date":1691784190,"post_id":76886033,"comment_id":135543589,"body_markdown":"Edit your question and show the client code.","body":"Edit your question and show the client code."},{"owner":{"account_id":22430289,"reputation":21,"user_id":16636236,"display_name":"Jess Y."},"score":0,"creation_date":1692053440,"post_id":76886033,"comment_id":135570969,"body_markdown":"@jub0bs Hi there, I added in my Axios and App.js code, thanks","body":"@jub0bs Hi there, I added in my Axios and App.js code, thanks"}],"owner":{"account_id":22430289,"reputation":21,"user_id":16636236,"display_name":"Jess Y."},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":53,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1692053369,"creation_date":1691779245,"question_id":76886033,"body_markdown":"**Just a note: I have looked over 2 pages of Stack Overflow posts by others having the same problem, and I tried the many different ways on how to handle CORS but I&#39;m still struggling with the issue. :/**\r\n\r\n\r\nHi all, I&#39;ve been having trouble tackling this for awhile but I&#39;ve been experiencing a CORS issue when I deployed my React project on Render. I also deployed the other part of the backend project(Java Springboot) as web service on Render. So the front-end is attempting to make http requests to the backend but it says:\r\nAccess to XMLHttpRequest at &#39;https://movie-gold-v2.onrender.com/api/v1/movies&#39; from origin &#39;https://movie-gold-v1.onrender.com&#39; has been blocked by CORS policy: No &#39;Access-Control-Allow-Origin&#39; header is present on the requested resource.\r\n\r\nI have attempted //@CrossOrigin(origins = {&quot;https://movie-gold-v1.onrender.com&quot;}) on my RestController\r\nI also attempted @CrossOrigins(&quot;*&quot;);\r\nAttempted @CrossOrigins(&quot;https://movie-gold-v1.onrender.com&quot;);\r\n\r\nand even created a WebConfig.java file after that didn&#39;t work:\r\n\r\n    @Configuration\r\n    @EnableWebMvc\r\n    public class WebConfig implements WebMvcConfigurer {\r\n    \r\n        @Override\r\n        public void addCorsMappings(CorsRegistry registry) {\r\n            registry.addMapping(&quot;/**&quot;)\r\n                    .allowedOrigins(&quot;https://movie-gold-v1.onrender.com&quot;)\r\n                    .allowedMethods(&quot;HEAD&quot;,&quot;GET&quot;, &quot;POST&quot;, &quot;PUT&quot;, &quot;DELETE&quot;)\r\n                    .allowedHeaders(&quot;*&quot;);\r\n        }\r\n    }\r\n    \r\nThen attempted other Configuration files such as:\r\n\r\n\r\n    \r\n    @Configuration\r\n    @Profile(&quot;development&quot;)\r\n    public class DevConfiguration implements WebMvcConfigurer {\r\n    \r\n        @Override\r\n        public void addCorsMappings(CorsRegistry registry) {\r\n            registry.addMapping(&quot;/**&quot;)\r\n                    .allowedMethods(&quot;GET&quot;, &quot;POST&quot;, &quot;PUT&quot;, &quot;PATCH&quot;, &quot;DELETE&quot;, &quot;OPTIONS&quot;).allowedOrigins(&quot;https://movie-gold-v1.onrender.com&quot;);\r\n        }\r\n    }\r\n\r\nEven attempted a CorsConfig file:\r\n\r\n        @Component\r\n    public class CorsConfig {\r\n    \r\n        @Bean\r\n        public WebMvcConfigurer corsConfigurer() {\r\n    \r\n            return new WebMvcConfigurer() {\r\n                @Override\r\n                public void addCorsMappings(CorsRegistry registry) {\r\n                    registry\r\n                            .addMapping(&quot;/**&quot;)\r\n                            .allowedMethods(CorsConfiguration.ALL)\r\n                            .allowedHeaders(CorsConfiguration.ALL)\r\n                            .allowedOriginPatterns(CorsConfiguration.ALL);\r\n                }\r\n            };\r\n        }\r\n    }\r\n\r\nAnd here is my MovieController file for reference:\r\n\r\n        @RestController\r\n    //@CrossOrigin(origins = &quot;https://movie-gold-v1.onrender.com&quot;, allowedHeaders = &quot;*&quot;)\r\n    //@CrossOrigin(origins = {&quot;https://movie-gold-v1.onrender.com&quot;})\r\n    //@CrossOrigin(origins = &quot;*&quot;)\r\n    @RequestMapping(&quot;/api/v1/movies&quot;)\r\n    \r\n    public class MovieController {\r\n    \r\n        @Autowired\r\n        private MovieService service;\r\n    \r\n        @GetMapping\r\n        public ResponseEntity&lt;List&lt;Movie&gt;&gt; getMovies() {\r\n            List&lt;Movie&gt; movies = service.findAllMovies();\r\n            return new ResponseEntity&lt;&gt;(movies, HttpStatus.OK);\r\n        }\r\n    \r\n        @GetMapping(&quot;/{imdbId}&quot;)\r\n        public ResponseEntity&lt;Movie&gt; getSingleMovie(@PathVariable String imdbId) {\r\n            Optional&lt;Movie&gt; movie = service.findMovieByImdbId(imdbId);\r\n            if (movie.isPresent()) {\r\n                Movie fetchedMovie = movie.get();\r\n                return new ResponseEntity&lt;&gt;(fetchedMovie, HttpStatus.OK);\r\n            } else {\r\n                return new ResponseEntity&lt;&gt;(HttpStatus.NOT_FOUND);\r\n            }\r\n        }\r\n    \r\n    \r\n    }\r\n\r\n**Front End**, \r\nAxiosConfig.js\r\n\r\n    import axios from &#39;axios&#39;;\r\n    \r\n    export default axios.create({\r\n        // baseURL:&#39;http://localhost:8080&#39;,\r\n        baseURL: &#39;https://movie-gold-v2.onrender.com&#39;,\r\n    });\r\n\r\nApp.js:\r\n\r\n    function App() {\r\n    \r\n      const [movies, setMovies] = useState();\r\n      const [movie, setMovie] = useState();\r\n      const [reviews, setReviews] = useState([]);\r\n    \r\n      const getMovies = async () =&gt;{\r\n        \r\n        try\r\n        {\r\n          // const response = await api.get(&quot;/api/v1/movies&quot;);\r\n          const response = await api.get(&quot;https://movie-gold-v2.onrender.com/api/v1/movies&quot;);\r\n    \r\n          setMovies(response.data);\r\n    \r\n        } \r\n        catch(err)\r\n        {\r\n          console.log(err);\r\n        }\r\n      }\r\n    \r\n      const getMovieData = async (movieId) =&gt; {\r\n         \r\n        try \r\n        {\r\n            //  const response = await api.get(`/api/v1/movies/${movieId}`);\r\n             const response = await api.get(`https://movie-gold-v2.onrender.com/api/v1/movies/${movieId}`);\r\n    \r\n            const singleMovie = response.data;\r\n    \r\n            setMovie(singleMovie);\r\n    \r\n            setReviews(singleMovie.reviews);\r\n            \r\n    \r\n        } \r\n        catch (error) \r\n        {\r\n          console.error(error);\r\n        }\r\n    \r\n      }\r\n    \r\n      useEffect(() =&gt; {\r\n        getMovies();\r\n      },[])\r\n    \r\n      return (\r\n        &lt;div className=&quot;App&quot;&gt;\r\n          &lt;Header/&gt;\r\n          &lt;Routes&gt;\r\n              &lt;Route path=&quot;/&quot; element={&lt;Layout/&gt;}&gt;\r\n                &lt;Route path=&quot;/&quot; element={&lt;Home movies={movies} /&gt;} &gt;&lt;/Route&gt;\r\n                &lt;Route path=&quot;/Trailer/:ytTrailerId&quot; element={&lt;Trailer/&gt;}&gt;&lt;/Route&gt;\r\n                &lt;Route path=&quot;/Reviews/:movieId&quot; element ={&lt;Reviews getMovieData = {getMovieData} movie={movie} reviews ={reviews} setReviews = {setReviews} /&gt;}&gt;&lt;/Route&gt;\r\n                &lt;Route path=&quot;*&quot; element = {&lt;NotFound/&gt;}&gt;&lt;/Route&gt;\r\n              &lt;/Route&gt;\r\n          &lt;/Routes&gt;\r\n    \r\n        &lt;/div&gt;\r\n      );\r\n    }\r\n\r\nHere is my pom.xml file in case:\r\n\r\n\r\n        &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n    &lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n    \txsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\r\n    \t&lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n    \t&lt;parent&gt;\r\n    \t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n    \t\t&lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\r\n    \t\t&lt;version&gt;3.1.0&lt;/version&gt;\r\n    \t\t&lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;\r\n    \t&lt;/parent&gt;\r\n    \t&lt;groupId&gt;unicorndev&lt;/groupId&gt;\r\n    \t&lt;artifactId&gt;movies&lt;/artifactId&gt;\r\n    \t&lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\r\n    \t&lt;name&gt;movies&lt;/name&gt;\r\n    \t&lt;description&gt;A simple API related to movies&lt;/description&gt;\r\n    \t&lt;properties&gt;\r\n    \t\t&lt;java.version&gt;20&lt;/java.version&gt;\r\n    \t&lt;/properties&gt;\r\n    \t&lt;dependencies&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;spring-boot-starter-data-mongodb&lt;/artifactId&gt;\r\n    \t\t\t&lt;version&gt;3.1.0&lt;/version&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;org.mongodb&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;mongodb-driver-sync&lt;/artifactId&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;spring-boot-devtools&lt;/artifactId&gt;\r\n    \t\t\t&lt;scope&gt;runtime&lt;/scope&gt;\r\n    \t\t\t&lt;optional&gt;true&lt;/optional&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;lombok&lt;/artifactId&gt;\r\n    \t\t\t&lt;optional&gt;true&lt;/optional&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\r\n    \t\t\t&lt;scope&gt;test&lt;/scope&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;me.paulschwarz&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;spring-dotenv&lt;/artifactId&gt;\r\n    \t\t\t&lt;version&gt;2.5.4&lt;/version&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t&lt;/dependencies&gt;\r\n    \r\n    \t&lt;build&gt;\r\n    \t\t&lt;plugins&gt;\r\n    \t\t\t&lt;plugin&gt;\r\n    \t\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n    \t\t\t\t&lt;version&gt;3.8.1&lt;/version&gt;\r\n    \t\t\t\t&lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\r\n    \t\t\t\t&lt;configuration&gt;\r\n    \t\t\t\t\t&lt;source&gt;17&lt;/source&gt;\r\n    \t\t\t\t\t&lt;target&gt;17&lt;/target&gt;\r\n    \t\t\t\t\t&lt;excludes&gt;\r\n    \t\t\t\t\t\t&lt;exclude&gt;\r\n    \t\t\t\t\t\t\t&lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\r\n    \t\t\t\t\t\t\t&lt;artifactId&gt;lombok&lt;/artifactId&gt;\r\n    \t\t\t\t\t\t&lt;/exclude&gt;\r\n    \t\t\t\t\t&lt;/excludes&gt;\r\n    \t\t\t\t&lt;/configuration&gt;\r\n    \t\t\t&lt;/plugin&gt;\r\n    \t\t&lt;/plugins&gt;\r\n    \t&lt;/build&gt;\r\n    \r\n    &lt;/project&gt;\r\n\r\n\r\n\r\n\r\n\r\nIt seems I&#39;ve attempted almost everything under the sun. I&#39;ve been at this for almost a week and it&#39;s making me pull my hair out. I don&#39;t know if I will get downvoted for this from asking a question that&#39;s so common, but I just don&#39;t know what I might have missed, even after reading over the documentation and other posts. If anyone can check it out, thank you so much!\r\n","title":"Java Springboot: Issue with CORS and error and Access-Control-Allow-Origin header","body":"<p><strong>Just a note: I have looked over 2 pages of Stack Overflow posts by others having the same problem, and I tried the many different ways on how to handle CORS but I'm still struggling with the issue. :/</strong></p>\n<p>Hi all, I've been having trouble tackling this for awhile but I've been experiencing a CORS issue when I deployed my React project on Render. I also deployed the other part of the backend project(Java Springboot) as web service on Render. So the front-end is attempting to make http requests to the backend but it says:\nAccess to XMLHttpRequest at 'https://movie-gold-v2.onrender.com/api/v1/movies' from origin 'https://movie-gold-v1.onrender.com' has been blocked by CORS policy: No 'Access-Control-Allow-Origin' header is present on the requested resource.</p>\n<p>I have attempted //@CrossOrigin(origins = {&quot;https://movie-gold-v1.onrender.com&quot;}) on my RestController\nI also attempted @CrossOrigins(&quot;*&quot;);\nAttempted @CrossOrigins(&quot;https://movie-gold-v1.onrender.com&quot;);</p>\n<p>and even created a WebConfig.java file after that didn't work:</p>\n<pre><code>@Configuration\n@EnableWebMvc\npublic class WebConfig implements WebMvcConfigurer {\n\n    @Override\n    public void addCorsMappings(CorsRegistry registry) {\n        registry.addMapping(&quot;/**&quot;)\n                .allowedOrigins(&quot;https://movie-gold-v1.onrender.com&quot;)\n                .allowedMethods(&quot;HEAD&quot;,&quot;GET&quot;, &quot;POST&quot;, &quot;PUT&quot;, &quot;DELETE&quot;)\n                .allowedHeaders(&quot;*&quot;);\n    }\n}\n</code></pre>\n<p>Then attempted other Configuration files such as:</p>\n<pre><code>@Configuration\n@Profile(&quot;development&quot;)\npublic class DevConfiguration implements WebMvcConfigurer {\n\n    @Override\n    public void addCorsMappings(CorsRegistry registry) {\n        registry.addMapping(&quot;/**&quot;)\n                .allowedMethods(&quot;GET&quot;, &quot;POST&quot;, &quot;PUT&quot;, &quot;PATCH&quot;, &quot;DELETE&quot;, &quot;OPTIONS&quot;).allowedOrigins(&quot;https://movie-gold-v1.onrender.com&quot;);\n    }\n}\n</code></pre>\n<p>Even attempted a CorsConfig file:</p>\n<pre><code>    @Component\npublic class CorsConfig {\n\n    @Bean\n    public WebMvcConfigurer corsConfigurer() {\n\n        return new WebMvcConfigurer() {\n            @Override\n            public void addCorsMappings(CorsRegistry registry) {\n                registry\n                        .addMapping(&quot;/**&quot;)\n                        .allowedMethods(CorsConfiguration.ALL)\n                        .allowedHeaders(CorsConfiguration.ALL)\n                        .allowedOriginPatterns(CorsConfiguration.ALL);\n            }\n        };\n    }\n}\n</code></pre>\n<p>And here is my MovieController file for reference:</p>\n<pre><code>    @RestController\n//@CrossOrigin(origins = &quot;https://movie-gold-v1.onrender.com&quot;, allowedHeaders = &quot;*&quot;)\n//@CrossOrigin(origins = {&quot;https://movie-gold-v1.onrender.com&quot;})\n//@CrossOrigin(origins = &quot;*&quot;)\n@RequestMapping(&quot;/api/v1/movies&quot;)\n\npublic class MovieController {\n\n    @Autowired\n    private MovieService service;\n\n    @GetMapping\n    public ResponseEntity&lt;List&lt;Movie&gt;&gt; getMovies() {\n        List&lt;Movie&gt; movies = service.findAllMovies();\n        return new ResponseEntity&lt;&gt;(movies, HttpStatus.OK);\n    }\n\n    @GetMapping(&quot;/{imdbId}&quot;)\n    public ResponseEntity&lt;Movie&gt; getSingleMovie(@PathVariable String imdbId) {\n        Optional&lt;Movie&gt; movie = service.findMovieByImdbId(imdbId);\n        if (movie.isPresent()) {\n            Movie fetchedMovie = movie.get();\n            return new ResponseEntity&lt;&gt;(fetchedMovie, HttpStatus.OK);\n        } else {\n            return new ResponseEntity&lt;&gt;(HttpStatus.NOT_FOUND);\n        }\n    }\n\n\n}\n</code></pre>\n<p><strong>Front End</strong>,\nAxiosConfig.js</p>\n<pre><code>import axios from 'axios';\n\nexport default axios.create({\n    // baseURL:'http://localhost:8080',\n    baseURL: 'https://movie-gold-v2.onrender.com',\n});\n</code></pre>\n<p>App.js:</p>\n<pre><code>function App() {\n\n  const [movies, setMovies] = useState();\n  const [movie, setMovie] = useState();\n  const [reviews, setReviews] = useState([]);\n\n  const getMovies = async () =&gt;{\n    \n    try\n    {\n      // const response = await api.get(&quot;/api/v1/movies&quot;);\n      const response = await api.get(&quot;https://movie-gold-v2.onrender.com/api/v1/movies&quot;);\n\n      setMovies(response.data);\n\n    } \n    catch(err)\n    {\n      console.log(err);\n    }\n  }\n\n  const getMovieData = async (movieId) =&gt; {\n     \n    try \n    {\n        //  const response = await api.get(`/api/v1/movies/${movieId}`);\n         const response = await api.get(`https://movie-gold-v2.onrender.com/api/v1/movies/${movieId}`);\n\n        const singleMovie = response.data;\n\n        setMovie(singleMovie);\n\n        setReviews(singleMovie.reviews);\n        \n\n    } \n    catch (error) \n    {\n      console.error(error);\n    }\n\n  }\n\n  useEffect(() =&gt; {\n    getMovies();\n  },[])\n\n  return (\n    &lt;div className=&quot;App&quot;&gt;\n      &lt;Header/&gt;\n      &lt;Routes&gt;\n          &lt;Route path=&quot;/&quot; element={&lt;Layout/&gt;}&gt;\n            &lt;Route path=&quot;/&quot; element={&lt;Home movies={movies} /&gt;} &gt;&lt;/Route&gt;\n            &lt;Route path=&quot;/Trailer/:ytTrailerId&quot; element={&lt;Trailer/&gt;}&gt;&lt;/Route&gt;\n            &lt;Route path=&quot;/Reviews/:movieId&quot; element ={&lt;Reviews getMovieData = {getMovieData} movie={movie} reviews ={reviews} setReviews = {setReviews} /&gt;}&gt;&lt;/Route&gt;\n            &lt;Route path=&quot;*&quot; element = {&lt;NotFound/&gt;}&gt;&lt;/Route&gt;\n          &lt;/Route&gt;\n      &lt;/Routes&gt;\n\n    &lt;/div&gt;\n  );\n}\n</code></pre>\n<p>Here is my pom.xml file in case:</p>\n<pre><code>    &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\n    xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n    &lt;parent&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\n        &lt;version&gt;3.1.0&lt;/version&gt;\n        &lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;\n    &lt;/parent&gt;\n    &lt;groupId&gt;unicorndev&lt;/groupId&gt;\n    &lt;artifactId&gt;movies&lt;/artifactId&gt;\n    &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\n    &lt;name&gt;movies&lt;/name&gt;\n    &lt;description&gt;A simple API related to movies&lt;/description&gt;\n    &lt;properties&gt;\n        &lt;java.version&gt;20&lt;/java.version&gt;\n    &lt;/properties&gt;\n    &lt;dependencies&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-data-mongodb&lt;/artifactId&gt;\n            &lt;version&gt;3.1.0&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.mongodb&lt;/groupId&gt;\n            &lt;artifactId&gt;mongodb-driver-sync&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-devtools&lt;/artifactId&gt;\n            &lt;scope&gt;runtime&lt;/scope&gt;\n            &lt;optional&gt;true&lt;/optional&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\n            &lt;artifactId&gt;lombok&lt;/artifactId&gt;\n            &lt;optional&gt;true&lt;/optional&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\n            &lt;scope&gt;test&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;me.paulschwarz&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-dotenv&lt;/artifactId&gt;\n            &lt;version&gt;2.5.4&lt;/version&gt;\n        &lt;/dependency&gt;\n    &lt;/dependencies&gt;\n\n    &lt;build&gt;\n        &lt;plugins&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n                &lt;version&gt;3.8.1&lt;/version&gt;\n                &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\n                &lt;configuration&gt;\n                    &lt;source&gt;17&lt;/source&gt;\n                    &lt;target&gt;17&lt;/target&gt;\n                    &lt;excludes&gt;\n                        &lt;exclude&gt;\n                            &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\n                            &lt;artifactId&gt;lombok&lt;/artifactId&gt;\n                        &lt;/exclude&gt;\n                    &lt;/excludes&gt;\n                &lt;/configuration&gt;\n            &lt;/plugin&gt;\n        &lt;/plugins&gt;\n    &lt;/build&gt;\n\n&lt;/project&gt;\n</code></pre>\n<p>It seems I've attempted almost everything under the sun. I've been at this for almost a week and it's making me pull my hair out. I don't know if I will get downvoted for this from asking a question that's so common, but I just don't know what I might have missed, even after reading over the documentation and other posts. If anyone can check it out, thank you so much!</p>\n"},{"tags":["java","zip","io"],"comments":[{"owner":{"account_id":39436,"reputation":4160,"user_id":113727,"accept_rate":90,"display_name":"dm76"},"score":0,"creation_date":1268147230,"post_id":1050560,"comment_id":2390674,"body_markdown":"I know this is an rather old post but have you solved that issue ?\nI&#39;m having the same problem right now ; It only seems to affect an executable file so far... when I unzip it &quot;by hand&quot; the permission is correct","body":"I know this is an rather old post but have you solved that issue ? I&#39;m having the same problem right now ; It only seems to affect an executable file so far... when I unzip it &quot;by hand&quot; the permission is correct"},{"owner":{"account_id":26792,"reputation":524,"user_id":70020,"accept_rate":60,"display_name":"Raymond Kroeker"},"score":0,"creation_date":1268236587,"post_id":1050560,"comment_id":2400085,"body_markdown":"I have not in fact solved it.  My last approach vector was going to be to pull apart apache&#39;s ant task for manipulating zip files and determine what they are doing.","body":"I have not in fact solved it.  My last approach vector was going to be to pull apart apache&#39;s ant task for manipulating zip files and determine what they are doing."},{"owner":{"account_id":39436,"reputation":4160,"user_id":113727,"accept_rate":90,"display_name":"dm76"},"score":0,"creation_date":1268411590,"post_id":1050560,"comment_id":2418607,"body_markdown":"Ant can do that only since 1.8, using the new feature of Java.io.File in java 6 (see my answer below)","body":"Ant can do that only since 1.8, using the new feature of Java.io.File in java 6 (see my answer below)"}],"answers":[{"comments":[{"owner":{"account_id":20213,"reputation":190030,"user_id":48082,"accept_rate":96,"display_name":"Cheeso"},"score":0,"creation_date":1246184819,"post_id":1050646,"comment_id":866345,"body_markdown":"does TarArchiveEntry work on zips as well as tar files?  they are not the same, right?","body":"does TarArchiveEntry work on zips as well as tar files?  they are not the same, right?"},{"owner":{"account_id":39436,"reputation":4160,"user_id":113727,"accept_rate":90,"display_name":"dm76"},"score":0,"creation_date":1268147064,"post_id":1050646,"comment_id":2390655,"body_markdown":"I agree with Cheeso - what does this have to do with zip files ?","body":"I agree with Cheeso - what does this have to do with zip files ?"},{"owner":{"account_id":351725,"reputation":1296,"user_id":688379,"accept_rate":94,"display_name":"Josejulio"},"score":1,"creation_date":1465411674,"post_id":1050646,"comment_id":62894989,"body_markdown":"There is also ZipArchiveEntry https://commons.apache.org/proper/commons-compress/zip.html","body":"There is also ZipArchiveEntry <a href=\"https://commons.apache.org/proper/commons-compress/zip.html\" rel=\"nofollow noreferrer\">commons.apache.org/proper/commons-compress/zip.html</a>"}],"tags":[],"owner":{"account_id":30387,"reputation":62490,"user_id":82865,"accept_rate":71,"display_name":"Jonathan Holloway"},"comment_count":3,"down_vote_count":3,"up_vote_count":4,"is_accepted":false,"score":1,"last_activity_date":1533045110,"creation_date":1246042433,"answer_id":1050646,"question_id":1050560,"body_markdown":"Look at [Apache Commons Compress][1] and look at TarArchiveEntry, that should preserve the file permissions like you want it to.\r\n\r\n    TarArchiveEntry entry = tarInput.getNextTarEntry();\r\n\r\nHere are the [javadocs][2].  I think I&#39;ve gone Commons mad...\r\n\r\n  [1]: http://commons.apache.org/compress/\r\n  [2]: http://commons.apache.org/compress/apidocs/index.html","title":"Maintain file permissions when extracting from a zip file using JDK 5 api","body":"<p>Look at <a href=\"http://commons.apache.org/compress/\" rel=\"nofollow noreferrer\">Apache Commons Compress</a> and look at TarArchiveEntry, that should preserve the file permissions like you want it to.</p>\n\n<pre><code>TarArchiveEntry entry = tarInput.getNextTarEntry();\n</code></pre>\n\n<p>Here are the <a href=\"http://commons.apache.org/compress/apidocs/index.html\" rel=\"nofollow noreferrer\">javadocs</a>.  I think I've gone Commons mad...</p>\n"},{"comments":[{"owner":{"account_id":31068,"reputation":2855,"user_id":85076,"accept_rate":64,"display_name":"Pierre-Adrien"},"score":1,"creation_date":1280154473,"post_id":2432466,"comment_id":3460371,"body_markdown":"I know this thread is getting quite old but your answer helped me. I was trying to extract a ***.app on Mac Os but the resulting application would launch, I changed permissions of the actual launcher file inside it using the setExecutable() method and it seems to be working perfectly ! Thanks for the help :)","body":"I know this thread is getting quite old but your answer helped me. I was trying to extract a ***.app on Mac Os but the resulting application would launch, I changed permissions of the actual launcher file inside it using the setExecutable() method and it seems to be working perfectly ! Thanks for the help :)"}],"tags":[],"owner":{"account_id":39436,"reputation":4160,"user_id":113727,"accept_rate":90,"display_name":"dm76"},"comment_count":1,"down_vote_count":0,"up_vote_count":10,"is_accepted":false,"score":10,"last_activity_date":1533045249,"creation_date":1268394899,"answer_id":2432466,"question_id":1050560,"body_markdown":"I think it is actually impossible to keep the permissions correctly.\r\n\r\nPermissions are very OS specific: while POSIX file permissions allow the user to set whether you can read, write or execute a file for the file owner, the group and others, the NTFS file system has a similar system but the concept for an execute permission is inexistant. And the early FAT/FAT32 file syste, do not have file permissions at all (a part from the read-only attribute).\r\n\r\nBeing cross-platform, it would be difficult for java to set the permission properly on the newly created (unzipped) files depending on the underlying OS....\r\n\r\nThat said, Java 6 has a new [java.io.File class][1] that allows you to set permissions (with methods like setExecutable(), setReadable(), etc...)\r\n\r\nThese helped me a lot, especially the setExecutable() which was my main concerned when having to unzip executables on a Linux file system. And you don&#39;t have to bother about figuring out what OS you are running on as the method will simply do nothing if running under Windows or other systems without the concept of executable files.\r\n\r\n\r\n  [1]: http://java.sun.com/javase/6/docs/api/java/io/File.html","title":"Maintain file permissions when extracting from a zip file using JDK 5 api","body":"<p>I think it is actually impossible to keep the permissions correctly.</p>\n\n<p>Permissions are very OS specific: while POSIX file permissions allow the user to set whether you can read, write or execute a file for the file owner, the group and others, the NTFS file system has a similar system but the concept for an execute permission is inexistant. And the early FAT/FAT32 file syste, do not have file permissions at all (a part from the read-only attribute).</p>\n\n<p>Being cross-platform, it would be difficult for java to set the permission properly on the newly created (unzipped) files depending on the underlying OS....</p>\n\n<p>That said, Java 6 has a new <a href=\"http://java.sun.com/javase/6/docs/api/java/io/File.html\" rel=\"nofollow noreferrer\">java.io.File class</a> that allows you to set permissions (with methods like setExecutable(), setReadable(), etc...)</p>\n\n<p>These helped me a lot, especially the setExecutable() which was my main concerned when having to unzip executables on a Linux file system. And you don't have to bother about figuring out what OS you are running on as the method will simply do nothing if running under Windows or other systems without the concept of executable files.</p>\n"},{"comments":[{"owner":{"account_id":178706,"reputation":21668,"user_id":410867,"accept_rate":80,"display_name":"Cameron Lowell Palmer"},"score":1,"creation_date":1568533020,"post_id":41170167,"comment_id":102298737,"body_markdown":"This is not entirely accurate. Extra fields are commonly used for the purposes of file permission preservation.","body":"This is not entirely accurate. Extra fields are commonly used for the purposes of file permission preservation."},{"owner":{"account_id":152312,"reputation":4229,"user_id":366749,"display_name":"Patrice M."},"score":0,"creation_date":1618591379,"post_id":41170167,"comment_id":118657033,"body_markdown":"Thank you @Cameron  I do realize that this answer is no longer the most accurate, and even may not have been when written years ago. Still it&#39;s not a bad answer that deserves the -1&#39;s since then (not implying you did :-) ). It would be more helpful to the community to provide a newer answer that reflects the best answer to this question, today, if you can expand on your comment ? I&#39;d happily upvote it and delete mine.","body":"Thank you @Cameron  I do realize that this answer is no longer the most accurate, and even may not have been when written years ago. Still it&#39;s not a bad answer that deserves the -1&#39;s since then (not implying you did :-) ). It would be more helpful to the community to provide a newer answer that reflects the best answer to this question, today, if you can expand on your comment ? I&#39;d happily upvote it and delete mine."}],"tags":[],"owner":{"account_id":152312,"reputation":4229,"user_id":366749,"display_name":"Patrice M."},"comment_count":2,"down_vote_count":2,"up_vote_count":2,"is_accepted":true,"score":0,"last_activity_date":1533836979,"creation_date":1481823401,"answer_id":41170167,"question_id":1050560,"body_markdown":"Essentially, you can&#39;t STORE (unix) file permissions in Zip/Jar files, so you can&#39;t preserve them when extracting your jar (they were lost when the jar was created to begin with). See this question: https://stackoverflow.com/questions/28178375/creating-a-jar-file-preserving-file-permissions\r\n\r\nIf you need the file permissions preserved in the archive and restored when extracting, you need to consider the alternative .tar or .tar.gz / .tar.bz2 format, which is also natively supported by most Java build tools (Ant, Gradle, Maven...)","title":"Maintain file permissions when extracting from a zip file using JDK 5 api","body":"<p>Essentially, you can't STORE (unix) file permissions in Zip/Jar files, so you can't preserve them when extracting your jar (they were lost when the jar was created to begin with). See this question: <a href=\"https://stackoverflow.com/questions/28178375/creating-a-jar-file-preserving-file-permissions\">creating a jar file - preserving file permissions</a></p>\n\n<p>If you need the file permissions preserved in the archive and restored when extracting, you need to consider the alternative .tar or .tar.gz / .tar.bz2 format, which is also natively supported by most Java build tools (Ant, Gradle, Maven...)</p>\n"},{"tags":[],"owner":{"account_id":2078462,"reputation":10342,"user_id":2986984,"accept_rate":80,"display_name":"tkruse"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1550806159,"creation_date":1550806159,"answer_id":54819653,"question_id":1050560,"body_markdown":"As tracked in this OpenJDK bug: https://bugs.openjdk.java.net/browse/JDK-6194856:\r\n\r\n&gt; The &quot;standard&quot; zip file format does not have any way to store\r\n&gt; &quot;executable file&quot; meta-information, since it was originally designed\r\n&gt; for MS-DOS filesystems.\r\n&gt; \r\n&gt; In order to preserve Unix information like file modes, the zip\r\n&gt; handling code would have to handle extensions to the zip file format.\r\n&gt; Other zip implementations have such extensions.\r\n&gt; \r\n&gt; There are some extensions to the file format that would allow maintaining\r\n&gt; this kind of information, but it can never be guaranteed (there is no\r\n&gt; requirement that zip files contain such &quot;extended&quot; metadata) and it\r\n&gt; would be a lot of work to implement and (especially!) test.\r\n\r\nAlso see this answer:\r\nhttps://stackoverflow.com/questions/13633488/can-i-store-unix-permissions-in-a-zip-file-built-with-apache-ant\r\n\r\nNon-standard Java libraries may implement this (such as apache-commons).","title":"Maintain file permissions when extracting from a zip file using JDK 5 api","body":"<p>As tracked in this OpenJDK bug: <a href=\"https://bugs.openjdk.java.net/browse/JDK-6194856\" rel=\"nofollow noreferrer\">https://bugs.openjdk.java.net/browse/JDK-6194856</a>:</p>\n\n<blockquote>\n  <p>The \"standard\" zip file format does not have any way to store\n  \"executable file\" meta-information, since it was originally designed\n  for MS-DOS filesystems.</p>\n  \n  <p>In order to preserve Unix information like file modes, the zip\n  handling code would have to handle extensions to the zip file format.\n  Other zip implementations have such extensions.</p>\n  \n  <p>There are some extensions to the file format that would allow maintaining\n  this kind of information, but it can never be guaranteed (there is no\n  requirement that zip files contain such \"extended\" metadata) and it\n  would be a lot of work to implement and (especially!) test.</p>\n</blockquote>\n\n<p>Also see this answer:\n<a href=\"https://stackoverflow.com/questions/13633488/can-i-store-unix-permissions-in-a-zip-file-built-with-apache-ant\">Can i store unix permissions in a zip file (built with apache ant)?</a></p>\n\n<p>Non-standard Java libraries may implement this (such as apache-commons).</p>\n"},{"tags":[],"owner":{"account_id":249565,"reputation":9766,"user_id":525725,"accept_rate":67,"display_name":"Emmanuel Bourg"},"comment_count":0,"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1619597156,"creation_date":1617357874,"answer_id":66917683,"question_id":1050560,"body_markdown":"The unix permissions are stored in the zip, either in the entry external attributes, or in the extra fields (using the &quot;Asi&quot; extra field, tagged with the 0x756E id). `java.util.zip.ZipEntry` exposes the extra fields and the Asi field could be read if there is one, but the external attributes are not accessible. So it&#39;s not possible to restore the files permissions in all cases using only the JDK zip implementation.\r\n\r\nFortunately the [Apache Commons Compress][1] project has its own [ZipFile][2] implementation which parses the external attributes, the permissions are exposed with the [ZipArchiveEntry.getUnixMode()][3] method. Then with Ant&#39;s [PermissionUtils][4] class and the Java NIO API, the permissions can be applied back to the file extracted with:\r\n\r\n    Files.setPosixFilePermissions(path, PermissionUtils.permissionsFromMode(entry.getUnixMode()));\r\n\r\n\r\n  [1]: https://commons.apache.org/commons\r\n  [2]: https://commons.apache.org/compress/apidocs/org/apache/commons/compress/archivers/zip/ZipFile.html\r\n  [3]: http://commons.apache.org/proper/commons-compress/apidocs/org/apache/commons/compress/archivers/zip/ZipArchiveEntry.html#getUnixMode--\r\n  [4]: https://github.com/apache/ant/blob/rel/1.10.9/src/main/org/apache/tools/ant/util/PermissionUtils.java","title":"Maintain file permissions when extracting from a zip file using JDK 5 api","body":"<p>The unix permissions are stored in the zip, either in the entry external attributes, or in the extra fields (using the &quot;Asi&quot; extra field, tagged with the 0x756E id). <code>java.util.zip.ZipEntry</code> exposes the extra fields and the Asi field could be read if there is one, but the external attributes are not accessible. So it's not possible to restore the files permissions in all cases using only the JDK zip implementation.</p>\n<p>Fortunately the <a href=\"https://commons.apache.org/commons\" rel=\"nofollow noreferrer\">Apache Commons Compress</a> project has its own <a href=\"https://commons.apache.org/compress/apidocs/org/apache/commons/compress/archivers/zip/ZipFile.html\" rel=\"nofollow noreferrer\">ZipFile</a> implementation which parses the external attributes, the permissions are exposed with the <a href=\"http://commons.apache.org/proper/commons-compress/apidocs/org/apache/commons/compress/archivers/zip/ZipArchiveEntry.html#getUnixMode--\" rel=\"nofollow noreferrer\">ZipArchiveEntry.getUnixMode()</a> method. Then with Ant's <a href=\"https://github.com/apache/ant/blob/rel/1.10.9/src/main/org/apache/tools/ant/util/PermissionUtils.java\" rel=\"nofollow noreferrer\">PermissionUtils</a> class and the Java NIO API, the permissions can be applied back to the file extracted with:</p>\n<pre><code>Files.setPosixFilePermissions(path, PermissionUtils.permissionsFromMode(entry.getUnixMode()));\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1203915,"reputation":10209,"user_id":1174024,"accept_rate":85,"display_name":"Nicholas DiPiazza"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1650330858,"creation_date":1650330858,"answer_id":71918635,"question_id":1050560,"body_markdown":"I actually sat there looking over these answers and was stuck with this issue but then I realized I was doing something rather silly. \r\n\r\nI was extracting to a temp folder, then using `FileUtils.copyDirectory` to copy the files from the temp folder to the new folder. \r\n\r\nInstead of doing a copy, I changed to a move operation. now it worked.\r\n\r\nI can confirm, on Ubuntu Linux 22.04, this maintains file permissions.\r\n\r\nUses:\r\n`implementation group: &#39;org.rauschig&#39;, name: &#39;jarchivelib&#39;, version: &#39;1.2.0&#39;`\r\n\r\n\r\n```\r\nimport org.rauschig.jarchivelib.ArchiveFormat;\r\nimport org.rauschig.jarchivelib.Archiver;\r\nimport org.rauschig.jarchivelib.ArchiverFactory;\r\nimport org.rauschig.jarchivelib.CompressionType;\r\n\r\n  public static void unzip(File zipFile, File targetDirectory) throws IOException, IllegalAccessException {\r\n    Archiver archiver = ArchiverFactory.createArchiver(ArchiveFormat.ZIP);\r\n    archiver.extract(zipFile, targetDirectory);\r\n  }\r\n\r\n  public static void unTarGz(File tarFile, File targetDirectory) throws IOException {\r\n    Archiver archiver = ArchiverFactory.createArchiver(ArchiveFormat.TAR, CompressionType.GZIP);\r\n    archiver.extract(tarFile, targetDirectory);\r\n  }\r\n```\r\n\r\n","title":"Maintain file permissions when extracting from a zip file using JDK 5 api","body":"<p>I actually sat there looking over these answers and was stuck with this issue but then I realized I was doing something rather silly.</p>\n<p>I was extracting to a temp folder, then using <code>FileUtils.copyDirectory</code> to copy the files from the temp folder to the new folder.</p>\n<p>Instead of doing a copy, I changed to a move operation. now it worked.</p>\n<p>I can confirm, on Ubuntu Linux 22.04, this maintains file permissions.</p>\n<p>Uses:\n<code>implementation group: 'org.rauschig', name: 'jarchivelib', version: '1.2.0'</code></p>\n<pre><code>import org.rauschig.jarchivelib.ArchiveFormat;\nimport org.rauschig.jarchivelib.Archiver;\nimport org.rauschig.jarchivelib.ArchiverFactory;\nimport org.rauschig.jarchivelib.CompressionType;\n\n  public static void unzip(File zipFile, File targetDirectory) throws IOException, IllegalAccessException {\n    Archiver archiver = ArchiverFactory.createArchiver(ArchiveFormat.ZIP);\n    archiver.extract(zipFile, targetDirectory);\n  }\n\n  public static void unTarGz(File tarFile, File targetDirectory) throws IOException {\n    Archiver archiver = ArchiverFactory.createArchiver(ArchiveFormat.TAR, CompressionType.GZIP);\n    archiver.extract(tarFile, targetDirectory);\n  }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":12613823,"reputation":156,"user_id":9171964,"display_name":"Amine Aouffen"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1692053194,"creation_date":1692053194,"answer_id":76902555,"question_id":1050560,"body_markdown":"If you use Apache Commons Compress , you can set the readonly flag using the external attributes. \r\n\r\nThe flag will be preserved after extraction in windows. \r\n``` java \r\nzipEntry.setVersionMadeBy(0x0000); // 00 is for MSDOS/Windows\r\nzipEntry.setExternalAttributes(zipEntry.getExternalAttributes() | 0x00000001L); // First bit = 1 -&gt; Readonly flag in windows\r\n```\r\nfor more information please refer to the ZIP format spec. https://pkware.cachefly.net/webdocs/APPNOTE/APPNOTE-6.3.9.TXT","title":"Maintain file permissions when extracting from a zip file using JDK 5 api","body":"<p>If you use Apache Commons Compress , you can set the readonly flag using the external attributes.</p>\n<p>The flag will be preserved after extraction in windows.</p>\n<pre class=\"lang-java prettyprint-override\"><code>zipEntry.setVersionMadeBy(0x0000); // 00 is for MSDOS/Windows\nzipEntry.setExternalAttributes(zipEntry.getExternalAttributes() | 0x00000001L); // First bit = 1 -&gt; Readonly flag in windows\n</code></pre>\n<p>for more information please refer to the ZIP format spec. <a href=\"https://pkware.cachefly.net/webdocs/APPNOTE/APPNOTE-6.3.9.TXT\" rel=\"nofollow noreferrer\">https://pkware.cachefly.net/webdocs/APPNOTE/APPNOTE-6.3.9.TXT</a></p>\n"}],"owner":{"account_id":26792,"reputation":524,"user_id":70020,"accept_rate":60,"display_name":"Raymond Kroeker"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":13750,"favorite_count":0,"down_vote_count":0,"up_vote_count":21,"accepted_answer_id":41170167,"answer_count":7,"score":21,"last_activity_date":1692053194,"creation_date":1246041144,"question_id":1050560,"body_markdown":"I am using java.util.Zip and java.util.ZipEntry to successfully extra a zip file&#39;s contents to disk.  I would like to maintain the file permissions set when extracting on a *nix file-system.\r\n\r\nCan anyone point me to the &quot;correct&quot; way to do this? ","title":"Maintain file permissions when extracting from a zip file using JDK 5 api","body":"<p>I am using java.util.Zip and java.util.ZipEntry to successfully extra a zip file's contents to disk.  I would like to maintain the file permissions set when extracting on a *nix file-system.</p>\n\n<p>Can anyone point me to the \"correct\" way to do this? </p>\n"},{"tags":["java","android"],"comments":[{"owner":{"account_id":3509196,"reputation":16493,"user_id":2933977,"display_name":"stdunbar"},"score":0,"creation_date":1692049339,"post_id":76902302,"comment_id":135570529,"body_markdown":"Do you need a leading `/` before the first `data` (i.e. `/data/data...`)?","body":"Do you need a leading <code>&#47;</code> before the first <code>data</code> (i.e. <code>&#47;data&#47;data...</code>)?"},{"owner":{"account_id":2755641,"reputation":8698,"user_id":2373819,"display_name":"Andrew"},"score":0,"creation_date":1692058152,"post_id":76902302,"comment_id":135571346,"body_markdown":"Don&#39;t make up a Uri to something that does not exist.","body":"Don&#39;t make up a Uri to something that does not exist."}],"answers":[{"tags":[],"owner":{"account_id":39846,"reputation":991173,"user_id":115145,"accept_rate":84,"display_name":"CommonsWare"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1692053118,"creation_date":1692053118,"answer_id":76902549,"question_id":76902302,"body_markdown":"There is no `ContentProvider` registered in your device (or probably any device) that has an authority of `data`. ","title":"Unknown URL content://","body":"<p>There is no <code>ContentProvider</code> registered in your device (or probably any device) that has an authority of <code>data</code>.</p>\n"}],"owner":{"account_id":2974483,"reputation":81,"user_id":2525840,"display_name":"ackfloverstow"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":38,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1692053118,"creation_date":1692049125,"question_id":76902302,"body_markdown":"Here is my code:\r\n\r\n```\r\npublic Uri getOutputMediaFileUri() {\r\n\r\n        //CODE - MDC\r\n        ContextWrapper myCW = new ContextWrapper(myContext);\r\n        ContentResolver resolver = myCW.getContentResolver();\r\n        ContentValues contentValues = new ContentValues();\r\n        contentValues.put(MediaStore.MediaColumns.DISPLAY_NAME, &quot;name&quot;);\r\n        contentValues.put(MediaStore.MediaColumns.MIME_TYPE, &quot;image/jpeg&quot;);\r\n        contentValues.put(MediaStore.MediaColumns.RELATIVE_PATH, Environment.DIRECTORY_DOWNLOADS);\r\n\r\n\r\n        Uri uri = null;\r\n\r\n        uri = Uri.parse(&quot;content://&quot; + &quot;data/data/com.555.number/shared_prefs/IMG.jpg&quot;);\r\n\r\n        try {\r\n            uri = resolver.insert(uri, contentValues);\r\n        }\r\n        catch(Exception ex) {\r\n            String msg = ex.getMessage();\r\n        }\r\n\r\n\r\n\r\n        return uri;\r\n    }\r\n```\r\n\r\n\r\nEvery time I run this code I get the error: java.lang.IllegalArgumentException: Unknown URL content://data/data/com.ebs.ecount/shared_prefs/IMG.jpg.  Please help to solve this issue.  ","title":"Unknown URL content://","body":"<p>Here is my code:</p>\n<pre><code>public Uri getOutputMediaFileUri() {\n\n        //CODE - MDC\n        ContextWrapper myCW = new ContextWrapper(myContext);\n        ContentResolver resolver = myCW.getContentResolver();\n        ContentValues contentValues = new ContentValues();\n        contentValues.put(MediaStore.MediaColumns.DISPLAY_NAME, &quot;name&quot;);\n        contentValues.put(MediaStore.MediaColumns.MIME_TYPE, &quot;image/jpeg&quot;);\n        contentValues.put(MediaStore.MediaColumns.RELATIVE_PATH, Environment.DIRECTORY_DOWNLOADS);\n\n\n        Uri uri = null;\n\n        uri = Uri.parse(&quot;content://&quot; + &quot;data/data/com.555.number/shared_prefs/IMG.jpg&quot;);\n\n        try {\n            uri = resolver.insert(uri, contentValues);\n        }\n        catch(Exception ex) {\n            String msg = ex.getMessage();\n        }\n\n\n\n        return uri;\n    }\n</code></pre>\n<p>Every time I run this code I get the error: java.lang.IllegalArgumentException: Unknown URL content://data/data/com.ebs.ecount/shared_prefs/IMG.jpg.  Please help to solve this issue.</p>\n"},{"tags":["java","osgi","apache-karaf"],"answers":[{"comments":[{"owner":{"account_id":22649518,"reputation":13,"user_id":16824403,"display_name":"Ubuntu Learner"},"score":0,"creation_date":1692061044,"post_id":76902540,"comment_id":135571550,"body_markdown":"Jgarnica thanks for your reply. It&#39;s hardly possible to provide an example you are talking about as Karaf is a part of our Linux distribution and depends on some other things, also I have about 30 features with about 400 bundles in total. Anyway, I think you idea to isolate failed bundles is a good option for me; however, it&#39;s still unclear why there is no any issues while I&#39;m starting Karaf for the first time and problems happen after restarting. I&#39;ll update the topic as soon as I find the problem.","body":"Jgarnica thanks for your reply. It&#39;s hardly possible to provide an example you are talking about as Karaf is a part of our Linux distribution and depends on some other things, also I have about 30 features with about 400 bundles in total. Anyway, I think you idea to isolate failed bundles is a good option for me; however, it&#39;s still unclear why there is no any issues while I&#39;m starting Karaf for the first time and problems happen after restarting. I&#39;ll update the topic as soon as I find the problem."}],"tags":[],"owner":{"account_id":29112503,"reputation":16,"user_id":22301988,"display_name":"Jgarnica"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1692053051,"creation_date":1692052957,"answer_id":76902540,"question_id":76879947,"body_markdown":"When a bundle is waiting for a dependency the status of the bundle is `grace period` and after a while if the dependency is not resolved and the bundle reach the timeout, the bundle will trigger a timeout exception.\r\n\r\nMy recommendation is isolate your application with minimal dependencies and start your `Karaf` instance in debug mode and put some break points to try figure out the root cause, there is no a silver bullet for this case.\r\n\r\nFor example in my project I have some bundles waiting for DB/datasource dependencies, so if my DB is down or the credentials or wrong then my some bundles never will be resolved properly and I will get the timeout exception in the `Karaf.log` \r\n\r\n\r\nif you can share a minimal reproducible example I can give a look.","title":"Unable to start container for blueprint bundle exception after Karaf restarting","body":"<p>When a bundle is waiting for a dependency the status of the bundle is <code>grace period</code> and after a while if the dependency is not resolved and the bundle reach the timeout, the bundle will trigger a timeout exception.</p>\n<p>My recommendation is isolate your application with minimal dependencies and start your <code>Karaf</code> instance in debug mode and put some break points to try figure out the root cause, there is no a silver bullet for this case.</p>\n<p>For example in my project I have some bundles waiting for DB/datasource dependencies, so if my DB is down or the credentials or wrong then my some bundles never will be resolved properly and I will get the timeout exception in the <code>Karaf.log</code></p>\n<p>if you can share a minimal reproducible example I can give a look.</p>\n"}],"owner":{"account_id":22649518,"reputation":13,"user_id":16824403,"display_name":"Ubuntu Learner"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":42,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1692053051,"creation_date":1691711119,"question_id":76879947,"body_markdown":"I&#39;m using Karaf 4.2.16. When I start Karaf for the first time, I have no issues and all works fine. If I restart Karaf and try to run for the second time, I got the following exception after Grace Period passed (10 mins):\r\n```\r\n2023-08-10T05:38:55,140 | ERROR | Blueprint Extender: 3 | BlueprintContainerImpl           | 212 - org.apache.aries.blueprint.core - 1.10.3 | Unable to start container for blueprint bundle com.my_app.access.auth.cdo/4.0.0.SNAPSHOT due to unresolved dependencies [(objectClass=com.my_app.common.util.ICdoSessionFactory)]\r\njava.util.concurrent.TimeoutException: null\r\n        at org.apache.aries.blueprint.container.BlueprintContainerImpl$1.run(BlueprintContainerImpl.java:393) [bundleFile:1.10.3]\r\n        at org.apache.aries.blueprint.utils.threading.impl.DiscardableRunnable.run(DiscardableRunnable.java:45) [bundleFile:1.10.3]\r\n        at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511) [?:1.8.0_382]\r\n        at java.util.concurrent.FutureTask.run(FutureTask.java:266) [?:1.8.0_382]\r\n        at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$201(ScheduledThreadPoolExecutor.java:180) [?:1.8.0_382]\r\n        at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:293) [?:1.8.0_382]\r\n        at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149) [?:1.8.0_382]\r\n        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624) [?:1.8.0_382]\r\n        at java.lang.Thread.run(Thread.java:750) [?:1.8.0_382]\r\n\r\n```\r\n\r\nTo fix that, I need to remove data directory; however, it doesn&#39;t look like the right solution.\r\n\r\nA weird thing here is that the failed bundles are still in Active state and the application seems to work fine.\r\n\r\n```\r\nkaraf@root()&gt; list -l | grep access.auth.cdo\r\n45 │ Active   │ 100 │ 4.0.0.SNAPSHOT            │ mvn:com.my_app.access/com.my_app.access.auth.cdo/4.0.0-SNAPSHOT\r\nkaraf@root()&gt; list -l | grep common.util\r\n61 │ Active   │  60 │ 4.0.0.SNAPSHOT            │ mvn:com.my_app.common/com.my_app.common.util/4.0.0-SNAPSHOT\r\n\r\n```\r\n\r\nAny ideas?","title":"Unable to start container for blueprint bundle exception after Karaf restarting","body":"<p>I'm using Karaf 4.2.16. When I start Karaf for the first time, I have no issues and all works fine. If I restart Karaf and try to run for the second time, I got the following exception after Grace Period passed (10 mins):</p>\n<pre><code>2023-08-10T05:38:55,140 | ERROR | Blueprint Extender: 3 | BlueprintContainerImpl           | 212 - org.apache.aries.blueprint.core - 1.10.3 | Unable to start container for blueprint bundle com.my_app.access.auth.cdo/4.0.0.SNAPSHOT due to unresolved dependencies [(objectClass=com.my_app.common.util.ICdoSessionFactory)]\njava.util.concurrent.TimeoutException: null\n        at org.apache.aries.blueprint.container.BlueprintContainerImpl$1.run(BlueprintContainerImpl.java:393) [bundleFile:1.10.3]\n        at org.apache.aries.blueprint.utils.threading.impl.DiscardableRunnable.run(DiscardableRunnable.java:45) [bundleFile:1.10.3]\n        at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511) [?:1.8.0_382]\n        at java.util.concurrent.FutureTask.run(FutureTask.java:266) [?:1.8.0_382]\n        at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$201(ScheduledThreadPoolExecutor.java:180) [?:1.8.0_382]\n        at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:293) [?:1.8.0_382]\n        at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149) [?:1.8.0_382]\n        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624) [?:1.8.0_382]\n        at java.lang.Thread.run(Thread.java:750) [?:1.8.0_382]\n\n</code></pre>\n<p>To fix that, I need to remove data directory; however, it doesn't look like the right solution.</p>\n<p>A weird thing here is that the failed bundles are still in Active state and the application seems to work fine.</p>\n<pre><code>karaf@root()&gt; list -l | grep access.auth.cdo\n45 │ Active   │ 100 │ 4.0.0.SNAPSHOT            │ mvn:com.my_app.access/com.my_app.access.auth.cdo/4.0.0-SNAPSHOT\nkaraf@root()&gt; list -l | grep common.util\n61 │ Active   │  60 │ 4.0.0.SNAPSHOT            │ mvn:com.my_app.common/com.my_app.common.util/4.0.0-SNAPSHOT\n\n</code></pre>\n<p>Any ideas?</p>\n"},{"tags":["java","optimization"],"comments":[{"owner":{"account_id":81822,"reputation":204250,"user_id":230513,"accept_rate":100,"display_name":"trashgod"},"score":1,"creation_date":1692054376,"post_id":76902518,"comment_id":135571046,"body_markdown":"See [_Longest palindromic substring_](https://en.wikipedia.org/wiki/Longest_palindromic_substring) for an _O(n)_ algorithm.","body":"See <a href=\"https://en.wikipedia.org/wiki/Longest_palindromic_substring\" rel=\"nofollow noreferrer\"><i>Longest palindromic substring</i></a> for an <i>O(n)</i> algorithm."},{"owner":{"account_id":2053598,"reputation":41316,"user_id":1831987,"display_name":"VGR"},"score":1,"creation_date":1692062779,"post_id":76902518,"comment_id":135571677,"body_markdown":"Creating and garbage-collecting many objects takes time.  For large strings, you will be creating a lot of StringBuffer objects, and a lot of additional String objects by calling `substring` and by calling StringBuffer’s `toString`.  Pass start and end indices to isPalindrome, and use String’s `charAt` method to do the check yourself instead of relying on StringBuffer.reverse.","body":"Creating and garbage-collecting many objects takes time.  For large strings, you will be creating a lot of StringBuffer objects, and a lot of additional String objects by calling <code>substring</code> and by calling StringBuffer’s <code>toString</code>.  Pass start and end indices to isPalindrome, and use String’s <code>charAt</code> method to do the check yourself instead of relying on StringBuffer.reverse."},{"owner":{"account_id":3211603,"reputation":289317,"user_id":2711488,"display_name":"Holger"},"score":2,"creation_date":1693906331,"post_id":76902518,"comment_id":135817853,"body_markdown":"@VGR seems widely unknown, [`append` with range](https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/lang/StringBuilder.html#append(java.lang.CharSequence,int,int)) eliminates the need for `substring` and [`contentEquals(java.lang.CharSequence)`](https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/lang/String.html#contentEquals(java.lang.CharSequence)) eliminates the need for `toString().equals(…)` when comparing a `String` with a `StringBuffer` or `StringBuilder`. So a lot of object creation/string copying can be avoided, still, the time complexity doesn’t change.","body":"@VGR seems widely unknown, <a href=\"https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/lang/StringBuilder.html#append(java.lang.CharSequence,int,int)\" rel=\"nofollow noreferrer\"><code>append</code> with range</a> eliminates the need for <code>substring</code> and <a href=\"https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/lang/String.html#contentEquals(java.lang.CharSequence)\" rel=\"nofollow noreferrer\"><code>contentEquals(java.lang.CharSequence)</code></a> eliminates the need for <code>toString().equals(…)</code> when comparing a <code>String</code> with a <code>StringBuffer</code> or <code>StringBuilder</code>. So a lot of object creation/string copying can be avoided, still, the time complexity doesn’t change."}],"owner":{"account_id":26025358,"reputation":1,"user_id":19732359,"display_name":"bpaul18"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":43,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1692053007,"creation_date":1692052519,"question_id":76902518,"body_markdown":"I am solving this problem (https://leetcode.com/problems/longest-palindromic-substring/) and my solution works (I am using sliding window technique) however it is just not efficient enough to pass longer input values. I was wondering if someone could explain why (at least this version) of sliding window is not efficient enough. \r\nI have seen the answers that solve it fast enough but this is more of a question as to why this doesn&#39;t work\r\n\r\nI have tried adding early exit cases, I have tried getting rid of unnecessary overhead of variables, however it is still not enough.\r\n\r\n    public String longestPalindrome(String s) {\r\n        /*Use sliding window technique*/\r\n\r\n        //Since we are finding the longest palindrome, start windowSize at the length of the string - 1\r\n        int windowSize = s.length() - 1;\r\n\r\n        //Loops through string\r\n        for (int i = 0; i &lt; s.length(); ++i) {\r\n            //Basically if i + windowSize goes over length, reset i to check slidingWindow at index 0 and decrement windowSize\r\n            if (i + windowSize &gt;= s.length()) {\r\n                i = 0;\r\n                windowSize -= 1;\r\n            }\r\n\r\n            //This is the window substring we are checking\r\n            String window = s.substring(i, windowSize + i + 1);\r\n\r\n            //This is an early exit statement\r\n            if (isPalindrome(window)) { return window; }\r\n\r\n            if (windowSize == 0) break;\r\n        }\r\n        return null;\r\n    }\r\n\r\n    private Boolean isPalindrome(String s) {\r\n        return new StringBuffer(s).reverse().toString().equals(s);\r\n    }","title":"Reasons why my solution is not efficient (Largest Palindrome Substring, Leet Code)","body":"<p>I am solving this problem (<a href=\"https://leetcode.com/problems/longest-palindromic-substring/\" rel=\"nofollow noreferrer\">https://leetcode.com/problems/longest-palindromic-substring/</a>) and my solution works (I am using sliding window technique) however it is just not efficient enough to pass longer input values. I was wondering if someone could explain why (at least this version) of sliding window is not efficient enough.\nI have seen the answers that solve it fast enough but this is more of a question as to why this doesn't work</p>\n<p>I have tried adding early exit cases, I have tried getting rid of unnecessary overhead of variables, however it is still not enough.</p>\n<pre><code>public String longestPalindrome(String s) {\n    /*Use sliding window technique*/\n\n    //Since we are finding the longest palindrome, start windowSize at the length of the string - 1\n    int windowSize = s.length() - 1;\n\n    //Loops through string\n    for (int i = 0; i &lt; s.length(); ++i) {\n        //Basically if i + windowSize goes over length, reset i to check slidingWindow at index 0 and decrement windowSize\n        if (i + windowSize &gt;= s.length()) {\n            i = 0;\n            windowSize -= 1;\n        }\n\n        //This is the window substring we are checking\n        String window = s.substring(i, windowSize + i + 1);\n\n        //This is an early exit statement\n        if (isPalindrome(window)) { return window; }\n\n        if (windowSize == 0) break;\n    }\n    return null;\n}\n\nprivate Boolean isPalindrome(String s) {\n    return new StringBuffer(s).reverse().toString().equals(s);\n}\n</code></pre>\n"},{"tags":["java","intellij-idea","intellij-14"],"comments":[{"owner":{"account_id":9023130,"reputation":339,"user_id":6723462,"display_name":"Anil"},"score":1,"creation_date":1636827938,"post_id":69956907,"comment_id":123663376,"body_markdown":"I partially suspect the iffy encoding in folder name `/&#208;•&#208;Ÿ/`","body":"I partially suspect the iffy encoding in folder name <code>&#47;&#208;•&#208;Ÿ&#47;</code>"},{"owner":{"account_id":9023130,"reputation":339,"user_id":6723462,"display_name":"Anil"},"score":0,"creation_date":1636828012,"post_id":69956907,"comment_id":123663391,"body_markdown":"Could you try renaming the folders without spaces or encoding","body":"Could you try renaming the folders without spaces or encoding"},{"owner":{"account_id":19187261,"reputation":17,"user_id":14017781,"display_name":"Alexandar Zhelev"},"score":0,"creation_date":1636920735,"post_id":69956907,"comment_id":123680745,"body_markdown":"That fixed it, thanks. I&#39;ve used Cyrillic letters and that was the problem.","body":"That fixed it, thanks. I&#39;ve used Cyrillic letters and that was the problem."}],"answers":[{"tags":[],"owner":{"account_id":6391567,"reputation":2362,"user_id":4957508,"display_name":"Jeff Schaller"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1678387309,"creation_date":1678387309,"answer_id":75688795,"question_id":69956907,"body_markdown":"Based on seeing the folder name `&#208;•&#208;Ÿ`, rename the folders without spaces or encoding.","title":"Cannot find IntelliJ IDEA project files","body":"<p>Based on seeing the folder name <code>Ð•ÐŸ</code>, rename the folders without spaces or encoding.</p>\n"},{"tags":[],"owner":{"account_id":6236403,"reputation":10241,"user_id":4851565,"accept_rate":84,"display_name":"entpnerd"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1692051972,"creation_date":1692051972,"answer_id":76902477,"question_id":69956907,"body_markdown":"I found this question from a Google search. Note that my project didn&#39;t have any encoding or space issues as per the accepted answer - just an old legacy project that I was opening in IntelliJ. For me, the issue appears to have been something to do with initialization. Simply rebuilding the project worked for me.","title":"Cannot find IntelliJ IDEA project files","body":"<p>I found this question from a Google search. Note that my project didn't have any encoding or space issues as per the accepted answer - just an old legacy project that I was opening in IntelliJ. For me, the issue appears to have been something to do with initialization. Simply rebuilding the project worked for me.</p>\n"},{"comments":[{"owner":{"account_id":2485939,"reputation":19426,"user_id":2164365,"accept_rate":40,"display_name":"Abra"},"score":1,"creation_date":1692180125,"post_id":76902513,"comment_id":135587764,"body_markdown":"Problem was resolved soon after the question was posted (over a year ago). Did you not see this [comment](https://stackoverflow.com/questions/69956907/cannot-find-intellij-idea-project-files#comment123680745_69956907) from the OP?","body":"Problem was resolved soon after the question was posted (over a year ago). Did you not see this <a href=\"https://stackoverflow.com/questions/69956907/cannot-find-intellij-idea-project-files#comment123680745_69956907\">comment</a> from the OP?"}],"tags":[],"owner":{"account_id":28982649,"reputation":1,"user_id":22200159,"display_name":"Ghada Ahmed"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1692052406,"creation_date":1692052406,"answer_id":76902513,"question_id":69956907,"body_markdown":"check if you renamed the location of java projects \r\n-open the pervious projects from your pc then take the location and enter it in the eclipse then open it   ","title":"Cannot find IntelliJ IDEA project files","body":"<p>check if you renamed the location of java projects\n-open the pervious projects from your pc then take the location and enter it in the eclipse then open it</p>\n"}],"owner":{"account_id":19187261,"reputation":17,"user_id":14017781,"display_name":"Alexandar Zhelev"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":4285,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":3,"score":1,"last_activity_date":1692052406,"creation_date":1636826412,"question_id":69956907,"body_markdown":"I&#39;m trying to build my project, but IntelliJ gives me this error:\r\n\r\n    Internal error (java.io.IOException): Cannot find IntelliJ IDEA project files at C:/Users/Alex/Documents/University/VII. Semestur/&#208;•&#208;Ÿ/Compiler_students_IntelliJ\r\n    \r\n    at org.jetbrains.jps.model.serialization.JpsProjectLoader.loadProject(JpsProjectLoader.java:101)\r\n    \tat org.jetbrains.jps.model.serialization.impl.JpsSerializationManagerImpl.loadModel(JpsSerializationManagerImpl.java:24)\r\n    \tat org.jetbrains.jps.cmdline.JpsModelLoaderImpl.loadModel(JpsModelLoaderImpl.java:34)\r\n    \tat org.jetbrains.jps.cmdline.BuildRunner.load(BuildRunner.java:64)\r\n    \tat org.jetbrains.jps.cmdline.BuildSession.runBuild(BuildSession.java:279)\r\n    \tat org.jetbrains.jps.cmdline.BuildSession.run(BuildSession.java:132)\r\n    \tat org.jetbrains.jps.cmdline.BuildMain$MyMessageHandler.lambda$channelRead0$0(BuildMain.java:219)\r\n\r\n\r\nI&#39;ve checked all folders and cannot understand why these files are being labeled as missing.","title":"Cannot find IntelliJ IDEA project files","body":"<p>I'm trying to build my project, but IntelliJ gives me this error:</p>\n<pre><code>Internal error (java.io.IOException): Cannot find IntelliJ IDEA project files at C:/Users/Alex/Documents/University/VII. Semestur/Ð•ÐŸ/Compiler_students_IntelliJ\n\nat org.jetbrains.jps.model.serialization.JpsProjectLoader.loadProject(JpsProjectLoader.java:101)\n    at org.jetbrains.jps.model.serialization.impl.JpsSerializationManagerImpl.loadModel(JpsSerializationManagerImpl.java:24)\n    at org.jetbrains.jps.cmdline.JpsModelLoaderImpl.loadModel(JpsModelLoaderImpl.java:34)\n    at org.jetbrains.jps.cmdline.BuildRunner.load(BuildRunner.java:64)\n    at org.jetbrains.jps.cmdline.BuildSession.runBuild(BuildSession.java:279)\n    at org.jetbrains.jps.cmdline.BuildSession.run(BuildSession.java:132)\n    at org.jetbrains.jps.cmdline.BuildMain$MyMessageHandler.lambda$channelRead0$0(BuildMain.java:219)\n</code></pre>\n<p>I've checked all folders and cannot understand why these files are being labeled as missing.</p>\n"},{"tags":["java","iso8583","jpos","openiso8583.net","iso8583-1993"],"comments":[{"owner":{"account_id":71739,"reputation":307163,"user_id":207421,"accept_rate":82,"display_name":"user207421"},"score":0,"creation_date":1687570968,"post_id":76511361,"comment_id":134960058,"body_markdown":"All TCP connections are full-duplex, and this does not mean &#39;asynchronous&#39;. Your question,or the error message, doesn&#39;t make sense.","body":"All TCP connections are full-duplex, and this does not mean &#39;asynchronous&#39;. Your question,or the error message, doesn&#39;t make sense."},{"owner":{"account_id":71739,"reputation":307163,"user_id":207421,"accept_rate":82,"display_name":"user207421"},"score":0,"creation_date":1692055597,"post_id":76511361,"comment_id":135571166,"body_markdown":"And furthermore all TCP/IP connections are &#39;dedicated&#39;.","body":"And furthermore all TCP/IP connections are &#39;dedicated&#39;."}],"answers":[{"comments":[{"owner":{"account_id":28799262,"reputation":21,"user_id":22056639,"display_name":"Raul Roa"},"score":0,"creation_date":1687452864,"post_id":76514385,"comment_id":134942320,"body_markdown":"Thank you very much for answering.","body":"Thank you very much for answering."}],"tags":[],"owner":{"account_id":4205035,"reputation":1690,"user_id":3444205,"display_name":"Andr&#233;s Alcarraz"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1692051736,"creation_date":1687261630,"answer_id":76514385,"question_id":76511361,"body_markdown":"You just need to follow the excellent first two [jPOS tutorials][1].\r\n\r\nThe first one, [implementing a jPOS Gateway](http://jpos.org/doc/tutorials/jpos-gateway.pdf), will guide you through the steps to write a simple jPOS gateway.\r\n\r\nThe second, [customizing your Gateway](http://jpos.org/doc/tutorials/jpos-custom-gateway.pdf), will tell you how to add your own code to the application.\r\n\r\nIf you need to provide an API to interact with another network, the third one will guide you on how to do that.\r\n\r\nIt&#39;s really easy, you don&#39;t have to do almost anything to write a Full duplex, asynchronous, single session TCP connection. Most jPOS (and ISO8583 in general) implementations are like that, so jPOS provides support for that out of the box. You just need to use a MUX, a Channel, and most probably a transaction manager, and those tutorials will show you how.\r\n\r\nGiven what the OP has added as additional information, and also context from [this question,](https://stackoverflow.com/q/76474958/3444205) I&#39;m assuming he is deveolping (*) his API with Spring.\r\n\r\nYou can add a component to start `Q2` with Spring like this:\r\n\r\n```java\r\n@Component\r\npublic class Q2Boot {\r\n    private Q2 q2;\r\n\r\n    @Autowired\r\n    private ApplicationArguments args;\r\n\r\n    @PostConstruct\r\n    public void init () {\r\n        q2 = new Q2(args.getSourceArgs());\r\n        q2.start();\r\n    }\r\n\r\n    @PreDestroy\r\n    public void destroy () {\r\n        if (q2 != null)\r\n            q2.shutdown(true);\r\n        q2 = null;\r\n    }\r\n}\r\n\r\n```\r\nSource: https://gist.github.com/ar/86a4a24384d029c35f784079007393b0\r\n\r\nIn the `deploy` directory, just put your channel and your multiplexer, following example taken from jPOS gateway tutorial, customized with values provided in your code:\r\n\r\n`10_channel.xml`:\r\n```xml\r\n&lt;channel-adaptor name=&#39;jpos-channel&#39; class=&quot;org.jpos.q2.iso.ChannelAdaptor&quot;\r\nlogger=&quot;Q2&quot;&gt;\r\n  &lt;channel class=&quot;org.jpos.iso.channel.NACChannel&quot;\r\n  packager=&quot;org.jpos.iso.packager.GenericPackager&quot;&gt;\r\n  &lt;property name=&quot;host&quot; value=&quot;161.107.88.248&quot; /&gt; \r\n  &lt;property name=&quot;port&quot; value=&quot;5000&quot; /&gt; \r\n  &lt;property name=&quot;packager-config&quot; value=&quot;PackISO.xml&quot;/&gt;\r\n  &lt;/channel&gt;\r\n  &lt;in&gt;jpos-send&lt;/in&gt; \r\n  &lt;out&gt;jpos-receive&lt;/out&gt; \r\n&lt;/channel-adaptor&gt;\r\n```\r\n\r\n`20_mux.xml`:\r\n```xml\r\n&lt;mux class=&quot;org.jpos.q2.iso.QMUX&quot; logger=&quot;Q2&quot; name=&quot;dest-mux&quot;&gt;\r\n  &lt;in&gt;jpos-receive&lt;/in&gt; \r\n  &lt;out&gt;jpos-send&lt;/out&gt; \r\n  &lt;ready&gt;jpos-channel.ready&lt;/ready&gt; \r\n&lt;/mux\r\n```\r\n\r\nThen in your code you just need to:\r\n```java\r\nISOMsg isoMsg = new ISOMsg();\r\nisoMsg.setHeader(&quot;ISO099002002&quot;.getBytes());\r\nisoMsg.setMTI(&quot;0200&quot;);\r\nisoMsg.set(7, parm1);\r\n// ... other sets\r\nISOMsg response = QMUX.getMUX(&quot;dest-mux&quot;).request(isoMsg);\r\n```\r\n\r\nOf course, you will need to add the logic to catch all potential errors.\r\n\r\n(*) Tag `primavera` is spanish for spring.\r\n\r\n  [1]: http://www.jpos.org/tutorials","title":"&#191;How to establish a Dedicated TCP/IP Connection and Full-Duplex (asynchronous) and with a single TCP session with jpos?","body":"<p>You just need to follow the excellent first two <a href=\"http://www.jpos.org/tutorials\" rel=\"nofollow noreferrer\">jPOS tutorials</a>.</p>\n<p>The first one, <a href=\"http://jpos.org/doc/tutorials/jpos-gateway.pdf\" rel=\"nofollow noreferrer\">implementing a jPOS Gateway</a>, will guide you through the steps to write a simple jPOS gateway.</p>\n<p>The second, <a href=\"http://jpos.org/doc/tutorials/jpos-custom-gateway.pdf\" rel=\"nofollow noreferrer\">customizing your Gateway</a>, will tell you how to add your own code to the application.</p>\n<p>If you need to provide an API to interact with another network, the third one will guide you on how to do that.</p>\n<p>It's really easy, you don't have to do almost anything to write a Full duplex, asynchronous, single session TCP connection. Most jPOS (and ISO8583 in general) implementations are like that, so jPOS provides support for that out of the box. You just need to use a MUX, a Channel, and most probably a transaction manager, and those tutorials will show you how.</p>\n<p>Given what the OP has added as additional information, and also context from <a href=\"https://stackoverflow.com/q/76474958/3444205\">this question,</a> I'm assuming he is deveolping (*) his API with Spring.</p>\n<p>You can add a component to start <code>Q2</code> with Spring like this:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Component\npublic class Q2Boot {\n    private Q2 q2;\n\n    @Autowired\n    private ApplicationArguments args;\n\n    @PostConstruct\n    public void init () {\n        q2 = new Q2(args.getSourceArgs());\n        q2.start();\n    }\n\n    @PreDestroy\n    public void destroy () {\n        if (q2 != null)\n            q2.shutdown(true);\n        q2 = null;\n    }\n}\n\n</code></pre>\n<p>Source: <a href=\"https://gist.github.com/ar/86a4a24384d029c35f784079007393b0\" rel=\"nofollow noreferrer\">https://gist.github.com/ar/86a4a24384d029c35f784079007393b0</a></p>\n<p>In the <code>deploy</code> directory, just put your channel and your multiplexer, following example taken from jPOS gateway tutorial, customized with values provided in your code:</p>\n<p><code>10_channel.xml</code>:</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;channel-adaptor name='jpos-channel' class=&quot;org.jpos.q2.iso.ChannelAdaptor&quot;\nlogger=&quot;Q2&quot;&gt;\n  &lt;channel class=&quot;org.jpos.iso.channel.NACChannel&quot;\n  packager=&quot;org.jpos.iso.packager.GenericPackager&quot;&gt;\n  &lt;property name=&quot;host&quot; value=&quot;161.107.88.248&quot; /&gt; \n  &lt;property name=&quot;port&quot; value=&quot;5000&quot; /&gt; \n  &lt;property name=&quot;packager-config&quot; value=&quot;PackISO.xml&quot;/&gt;\n  &lt;/channel&gt;\n  &lt;in&gt;jpos-send&lt;/in&gt; \n  &lt;out&gt;jpos-receive&lt;/out&gt; \n&lt;/channel-adaptor&gt;\n</code></pre>\n<p><code>20_mux.xml</code>:</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;mux class=&quot;org.jpos.q2.iso.QMUX&quot; logger=&quot;Q2&quot; name=&quot;dest-mux&quot;&gt;\n  &lt;in&gt;jpos-receive&lt;/in&gt; \n  &lt;out&gt;jpos-send&lt;/out&gt; \n  &lt;ready&gt;jpos-channel.ready&lt;/ready&gt; \n&lt;/mux\n</code></pre>\n<p>Then in your code you just need to:</p>\n<pre class=\"lang-java prettyprint-override\"><code>ISOMsg isoMsg = new ISOMsg();\nisoMsg.setHeader(&quot;ISO099002002&quot;.getBytes());\nisoMsg.setMTI(&quot;0200&quot;);\nisoMsg.set(7, parm1);\n// ... other sets\nISOMsg response = QMUX.getMUX(&quot;dest-mux&quot;).request(isoMsg);\n</code></pre>\n<p>Of course, you will need to add the logic to catch all potential errors.</p>\n<p>(*) Tag <code>primavera</code> is spanish for spring.</p>\n"}],"owner":{"account_id":28799262,"reputation":21,"user_id":22056639,"display_name":"Raul Roa"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":187,"favorite_count":0,"down_vote_count":2,"up_vote_count":2,"closed_date":1687560427,"accepted_answer_id":76514385,"answer_count":1,"score":0,"last_activity_date":1692051736,"creation_date":1687234182,"question_id":76511361,"body_markdown":"I am new to JPOS, I need to connect to a TCP/IP connection to send different iso messages like 0800, 0200, but to connect to the server it tells me that the TCP/IP connection type must be Dedicated and Full-Duplex (asynchronous) and will establish a single TCP session.\r\n\r\n\r\nto explain better, I have developed some java classes for iso messages, which send the message and receive the response. But since I have developed it to send the message, I always have to connect to the socket and after I receive the response, I disconnect. That class I have in java is called from a REST api that has the message data. From my java class I would instantiate it by jpos-2.1.8.jar. But the company where I connect tells me that a transactional connection scheme is not allowed where for each Transaction it connects, sends a request, receives a response and disconnects. It tells me that it must be a TCP/IP connection type, it must be Dedicated and Full-Duplex (asynchronous) and it will establish a single TCP Session.\r\n\r\n\r\nThis is one of the java classes that I have developed\r\n\r\n```\r\npublic Map&lt;String, Object&gt; msj0200(String parm1,String parm2, String parm3, String parm4,String parm5, String parm6,String parm7,String parm8) throws ISOException, Throwable {\r\n\t\r\n\tCreate Packager based on XML that contain DE type\r\n\t\tGenericPackager packager = new GenericPackager(&quot;PackISO.xml&quot;);\r\n\t       \r\n\t    NACChannel c = new NACChannel();\r\n\t    c.setHost(&quot;161.107.88.248&quot;);\r\n\t    c.setPort(5000);\r\n\t    c.setTimeout(10000);\r\n\t    c.setPackager(packager);\r\n\t       \r\n\t   // Create ISO Message\r\n\t\tISOMsg isoMsg = new ISOMsg();\r\n\t\tisoMsg.setHeader(&quot;ISO099002002&quot;.getBytes());\r\n\t\tisoMsg.setMTI(&quot;0200&quot;);\r\n\t\tisoMsg.set(7, parm1);\r\n\t\tisoMsg.set(11, parm2);\r\n\t\tisoMsg.set(48, parm3);\r\n\t\tisoMsg.set(70, parm4);\r\n\t\tisoMsg.set(22, parm5);\r\n\t\tisoMsg.set(33, parm6);\r\n\t\tisoMsg.set(45, parm7);\r\n\t\tisoMsg.set(49, parm8);\r\n\t\tisoMsg.setPackager(packager);\r\n\r\n        ///I connected\r\n\t\tc.connect();\r\n\t\t\r\n\t\t///I send the message\r\n\t\tc.send(isoMsg);\r\n\t\t\r\n\t\t///I get the answer del socket\r\n\t\tISOMsg response = c.receive();\r\n\t\t\r\n\t\t//Here I have the logic to return the response to the rest api\r\n\t\t\r\n\t\t///and then i disconnect\r\n\t\tc.disconnect();\r\n```\r\n\r\nTo make the explanation more graphic, I now have the development\r\n\r\n[![enter image description here][1]][1]\r\n \r\n\r\n\r\nWhat I understand you must create the jPOS Gateway to be able to send the messages with a permanent session and full duplex.\r\n\r\n[![enter image description here][2]][2]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/0RErD.jpg\r\n  [2]: https://i.stack.imgur.com/Sn3iP.jpg\r\n\r\nand excuse me how I tell you I&#39;m new to this tpc/ip and Jpos. I hope you can understand my problem. thanks in advance","title":"&#191;How to establish a Dedicated TCP/IP Connection and Full-Duplex (asynchronous) and with a single TCP session with jpos?","body":"<p>I am new to JPOS, I need to connect to a TCP/IP connection to send different iso messages like 0800, 0200, but to connect to the server it tells me that the TCP/IP connection type must be Dedicated and Full-Duplex (asynchronous) and will establish a single TCP session.</p>\n<p>to explain better, I have developed some java classes for iso messages, which send the message and receive the response. But since I have developed it to send the message, I always have to connect to the socket and after I receive the response, I disconnect. That class I have in java is called from a REST api that has the message data. From my java class I would instantiate it by jpos-2.1.8.jar. But the company where I connect tells me that a transactional connection scheme is not allowed where for each Transaction it connects, sends a request, receives a response and disconnects. It tells me that it must be a TCP/IP connection type, it must be Dedicated and Full-Duplex (asynchronous) and it will establish a single TCP Session.</p>\n<p>This is one of the java classes that I have developed</p>\n<pre><code>public Map&lt;String, Object&gt; msj0200(String parm1,String parm2, String parm3, String parm4,String parm5, String parm6,String parm7,String parm8) throws ISOException, Throwable {\n    \n    Create Packager based on XML that contain DE type\n        GenericPackager packager = new GenericPackager(&quot;PackISO.xml&quot;);\n           \n        NACChannel c = new NACChannel();\n        c.setHost(&quot;161.107.88.248&quot;);\n        c.setPort(5000);\n        c.setTimeout(10000);\n        c.setPackager(packager);\n           \n       // Create ISO Message\n        ISOMsg isoMsg = new ISOMsg();\n        isoMsg.setHeader(&quot;ISO099002002&quot;.getBytes());\n        isoMsg.setMTI(&quot;0200&quot;);\n        isoMsg.set(7, parm1);\n        isoMsg.set(11, parm2);\n        isoMsg.set(48, parm3);\n        isoMsg.set(70, parm4);\n        isoMsg.set(22, parm5);\n        isoMsg.set(33, parm6);\n        isoMsg.set(45, parm7);\n        isoMsg.set(49, parm8);\n        isoMsg.setPackager(packager);\n\n        ///I connected\n        c.connect();\n        \n        ///I send the message\n        c.send(isoMsg);\n        \n        ///I get the answer del socket\n        ISOMsg response = c.receive();\n        \n        //Here I have the logic to return the response to the rest api\n        \n        ///and then i disconnect\n        c.disconnect();\n</code></pre>\n<p>To make the explanation more graphic, I now have the development</p>\n<p><a href=\"https://i.stack.imgur.com/0RErD.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/0RErD.jpg\" alt=\"enter image description here\" /></a></p>\n<p>What I understand you must create the jPOS Gateway to be able to send the messages with a permanent session and full duplex.</p>\n<p><a href=\"https://i.stack.imgur.com/Sn3iP.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Sn3iP.jpg\" alt=\"enter image description here\" /></a></p>\n<p>and excuse me how I tell you I'm new to this tpc/ip and Jpos. I hope you can understand my problem. thanks in advance</p>\n"},{"tags":["java","css","javafx","controlsfx"],"answers":[{"comments":[{"owner":{"account_id":7717111,"reputation":8774,"user_id":5844477,"display_name":"Sai Dandem"},"score":1,"creation_date":1692057650,"post_id":76902446,"comment_id":135571316,"body_markdown":"+1 I just investigated the issue and came to the exact conclusion. Came here to post that and saw your answer :D","body":"+1 I just investigated the issue and came to the exact conclusion. Came here to post that and saw your answer :D"},{"owner":{"account_id":8022892,"reputation":165,"user_id":6050980,"accept_rate":67,"display_name":"droid"},"score":1,"creation_date":1699393344,"post_id":76902446,"comment_id":136525479,"body_markdown":"Issue is now fixed in the master branch.","body":"Issue is now fixed in the master branch."}],"tags":[],"owner":{"account_id":1180113,"reputation":152335,"user_id":1155209,"display_name":"jewelsea"},"comment_count":2,"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1692051386,"creation_date":1692051386,"answer_id":76902446,"question_id":76889910,"body_markdown":"It is a bug in ControlsFX 11.0.2. \r\n\r\nYou might want to file an issue on the project, or create a pull request for it. You can link back to this answer if you do.\r\n\r\nThe skin calculates the range-bar (the inner blue section of the track) length incorrectly for a vertically oriented range slider which has different height/width dimensions for the thumbs.\r\n\r\nThe error is in [this line of the skin code][1]:\r\n\r\n    if (orientation) rangeEnd = x; else rangeStart = y + thumbWidth;\r\n\r\nIt should use the `thumbHeight` for the `rangeStart` calculation when the orientation is vertical:\r\n\r\n    if (orientation) rangeEnd = x; else rangeStart = y + thumbHeight;\r\n\r\nYou can patch your local version to fix the bug until the bug in the underlying library is fixed.\r\n\r\n * Copy the ControlsFX `RangeSliderSkin` and `ImplUtils` code into your project, renaming the skin and package.  \r\n * Modify the skin code to fix the bug.\r\n * Configure your code to use your own implementation of the skin.\r\n\r\nExample usage code for a custom (fixed) skin named `MyRangeSliderSkin`.\r\n\r\n    RangeSlider rangeSliderTest = new RangeSlider();\r\n    rangeSliderTest.setSkin(new MyRangeSliderSkin(rangeSliderTest));\r\n    rangeSliderTest.setOrientation(Orientation.VERTICAL);\r\n\r\nOnce you do that, you get the desired result.\r\n\r\n[![working slider][2]][2]\r\n\r\n  [1]: https://github.com/controlsfx/controlsfx/blob/master/controlsfx/src/main/java/impl/org/controlsfx/skin/RangeSliderSkin.java#L405\r\n  [2]: https://i.stack.imgur.com/bGjyf.png\r\n","title":"Java ControlsFX RangeSlider CSS issue","body":"<p>It is a bug in ControlsFX 11.0.2.</p>\n<p>You might want to file an issue on the project, or create a pull request for it. You can link back to this answer if you do.</p>\n<p>The skin calculates the range-bar (the inner blue section of the track) length incorrectly for a vertically oriented range slider which has different height/width dimensions for the thumbs.</p>\n<p>The error is in <a href=\"https://github.com/controlsfx/controlsfx/blob/master/controlsfx/src/main/java/impl/org/controlsfx/skin/RangeSliderSkin.java#L405\" rel=\"nofollow noreferrer\">this line of the skin code</a>:</p>\n<pre><code>if (orientation) rangeEnd = x; else rangeStart = y + thumbWidth;\n</code></pre>\n<p>It should use the <code>thumbHeight</code> for the <code>rangeStart</code> calculation when the orientation is vertical:</p>\n<pre><code>if (orientation) rangeEnd = x; else rangeStart = y + thumbHeight;\n</code></pre>\n<p>You can patch your local version to fix the bug until the bug in the underlying library is fixed.</p>\n<ul>\n<li>Copy the ControlsFX <code>RangeSliderSkin</code> and <code>ImplUtils</code> code into your project, renaming the skin and package.</li>\n<li>Modify the skin code to fix the bug.</li>\n<li>Configure your code to use your own implementation of the skin.</li>\n</ul>\n<p>Example usage code for a custom (fixed) skin named <code>MyRangeSliderSkin</code>.</p>\n<pre><code>RangeSlider rangeSliderTest = new RangeSlider();\nrangeSliderTest.setSkin(new MyRangeSliderSkin(rangeSliderTest));\nrangeSliderTest.setOrientation(Orientation.VERTICAL);\n</code></pre>\n<p>Once you do that, you get the desired result.</p>\n<p><a href=\"https://i.stack.imgur.com/bGjyf.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/bGjyf.png\" alt=\"working slider\" /></a></p>\n"}],"owner":{"account_id":8022892,"reputation":165,"user_id":6050980,"accept_rate":67,"display_name":"droid"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":95,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":76902446,"answer_count":1,"score":1,"last_activity_date":1692051386,"creation_date":1691853227,"question_id":76889910,"body_markdown":"I have a issue styling the thumbs of the RangeSlider - the track gets a wrong color:\r\n\r\nConsider this example:\r\n\r\n    package org.example;\r\n    \r\n    import javafx.application.Application;\r\n    import javafx.geometry.Orientation;\r\n    import javafx.scene.Scene;\r\n    import javafx.scene.layout.HBox;\r\n    import javafx.scene.layout.StackPane;\r\n    import javafx.stage.Stage;\r\n    import org.controlsfx.control.RangeSlider;\r\n    \r\n    public class App extends Application {\r\n    \r\n        @Override\r\n        public void start(Stage stage) {\r\n    \r\n            RangeSlider rangeSliderTest = new RangeSlider();\r\n            rangeSliderTest.setOrientation(Orientation.VERTICAL);\r\n    \r\n            HBox hBoxWithRangeSlider = new HBox();\r\n            hBoxWithRangeSlider.setId(&quot;hBoxWithRangeSlider&quot;);\r\n            hBoxWithRangeSlider.getChildren().add(rangeSliderTest);\r\n    \r\n            var scene = new Scene(new StackPane(hBoxWithRangeSlider), 200, 400);\r\n            scene.getStylesheets().add(&quot;_1_styles.css&quot;);\r\n            stage.setScene(scene);\r\n            stage.show();\r\n        }\r\n    \r\n        public static void main(String[] args) {\r\n    \r\n            launch();\r\n    \r\n        }\r\n    \r\n    }\r\n\r\nAnd this CSS to style it:\r\n\r\n    .root{\r\n      -fx-focus-color:#00a8ff;\r\n    }\r\n    \r\n    .range-slider .low-thumb {\r\n      -fx-pref-height: 10;\r\n      -fx-pref-width: 20;\r\n    }\r\n    \r\n    .range-slider .high-thumb {\r\n      -fx-pref-height: 10;\r\n      -fx-pref-width: 20;\r\n    }\r\n    \r\n    #hBoxWithRangeSlider{\r\n      -fx-padding: 20 20 20 20;\r\n      -fx-alignment: center;\r\n    }\r\n\r\nIt will give this:\r\n\r\n[![RangeSlider CSS issue][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/vmdFA.png\r\n\r\nAs you can see there is a issue with the high-thumb, the track is white, it should be blue. It is strange, because if I remove all the high-thumb styling from the .css, then the high-thumb will still be styled.\r\n\r\nEDIT: Issue is only present when Orientation.VERTICALis used.\r\n\r\n\r\n\r\n","title":"Java ControlsFX RangeSlider CSS issue","body":"<p>I have a issue styling the thumbs of the RangeSlider - the track gets a wrong color:</p>\n<p>Consider this example:</p>\n<pre><code>package org.example;\n\nimport javafx.application.Application;\nimport javafx.geometry.Orientation;\nimport javafx.scene.Scene;\nimport javafx.scene.layout.HBox;\nimport javafx.scene.layout.StackPane;\nimport javafx.stage.Stage;\nimport org.controlsfx.control.RangeSlider;\n\npublic class App extends Application {\n\n    @Override\n    public void start(Stage stage) {\n\n        RangeSlider rangeSliderTest = new RangeSlider();\n        rangeSliderTest.setOrientation(Orientation.VERTICAL);\n\n        HBox hBoxWithRangeSlider = new HBox();\n        hBoxWithRangeSlider.setId(&quot;hBoxWithRangeSlider&quot;);\n        hBoxWithRangeSlider.getChildren().add(rangeSliderTest);\n\n        var scene = new Scene(new StackPane(hBoxWithRangeSlider), 200, 400);\n        scene.getStylesheets().add(&quot;_1_styles.css&quot;);\n        stage.setScene(scene);\n        stage.show();\n    }\n\n    public static void main(String[] args) {\n\n        launch();\n\n    }\n\n}\n</code></pre>\n<p>And this CSS to style it:</p>\n<pre><code>.root{\n  -fx-focus-color:#00a8ff;\n}\n\n.range-slider .low-thumb {\n  -fx-pref-height: 10;\n  -fx-pref-width: 20;\n}\n\n.range-slider .high-thumb {\n  -fx-pref-height: 10;\n  -fx-pref-width: 20;\n}\n\n#hBoxWithRangeSlider{\n  -fx-padding: 20 20 20 20;\n  -fx-alignment: center;\n}\n</code></pre>\n<p>It will give this:</p>\n<p><a href=\"https://i.stack.imgur.com/vmdFA.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/vmdFA.png\" alt=\"RangeSlider CSS issue\" /></a></p>\n<p>As you can see there is a issue with the high-thumb, the track is white, it should be blue. It is strange, because if I remove all the high-thumb styling from the .css, then the high-thumb will still be styled.</p>\n<p>EDIT: Issue is only present when Orientation.VERTICALis used.</p>\n"},{"tags":["java","android"],"answers":[{"tags":[],"owner":{"account_id":29225364,"reputation":21,"user_id":22390211,"display_name":"Tanishq"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1692051174,"creation_date":1692051174,"answer_id":76902435,"question_id":76523833,"body_markdown":"Refer to this answer: https://github.com/xamarin/Xamarin.Forms/issues/15341. With multiple files, you need to use `result.data.clipData`.\r\n\r\n```kotlin\r\nval returnedValue: Array&lt;Uri&gt;? =\r\n  if (result.resultCode != Activity.RESULT_OK) {\r\n    null\r\n  } else if (data?.clipData != null) {\r\n    // The files are in data.clipData if the user selected multiple files\r\n    // https://github.com/xamarin/Xamarin.Forms/issues/15341\r\n    val clipData = data.clipData!!\r\n\r\n    (0 until clipData.itemCount).map { clipData.getItemAt(it).uri }.toTypedArray()\r\n  } else {\r\n    WebChromeClient.FileChooserParams.parseResult(result.resultCode, data)\r\n  }\r\n```","title":"Issues with multi-file selection and camera image import in Android web app","body":"<p>Refer to this answer: <a href=\"https://github.com/xamarin/Xamarin.Forms/issues/15341\" rel=\"nofollow noreferrer\">https://github.com/xamarin/Xamarin.Forms/issues/15341</a>. With multiple files, you need to use <code>result.data.clipData</code>.</p>\n<pre class=\"lang-kotlin prettyprint-override\"><code>val returnedValue: Array&lt;Uri&gt;? =\n  if (result.resultCode != Activity.RESULT_OK) {\n    null\n  } else if (data?.clipData != null) {\n    // The files are in data.clipData if the user selected multiple files\n    // https://github.com/xamarin/Xamarin.Forms/issues/15341\n    val clipData = data.clipData!!\n\n    (0 until clipData.itemCount).map { clipData.getItemAt(it).uri }.toTypedArray()\n  } else {\n    WebChromeClient.FileChooserParams.parseResult(result.resultCode, data)\n  }\n</code></pre>\n"}],"owner":{"account_id":28866266,"reputation":1,"user_id":22108961,"display_name":"oneStar"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":47,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1692051174,"creation_date":1687354170,"question_id":76523833,"body_markdown":"There is an issue I am not solving.\r\n\r\nI&#39;m a web developer and I&#39;m tinkering with Android code.\r\n\r\nSince I lack basic knowledge, I ask the developers for help.\r\n\r\n1. The web app is shown through the web view, and you need to select and register multiple images among the parts that register the content.\r\n2. There was no multi-select function in the existing Android code, so I put it through Google search.\r\n3. So now multi-selection seems to work well.\r\n4. However, as soon as I click &#39;OK&#39; on the image file taken with the camera, the app is terminated.\r\n\r\n\r\n\r\nThis is the code I used and am modifying.\r\n\r\n\r\n```\r\n@RequiresApi(api = Build.VERSION_CODES.LOLLIPOP)\r\n        @Override\r\n        public boolean onShowFileChooser(WebView webView, ValueCallback&lt;Uri[]&gt; filePathCallback, FileChooserParams fileChooserParams) {\r\n            Log.d(TAG, &quot;***** onShowFileChooser()&quot;);\r\n            //return super.onShowFileChooser(webView, filePathCallback, fileChooserParams);\r\n\r\n            /* 파일 업로드 */\r\n//            if (mFilePathCallback != null) {\r\n//                //파일을 한번 오픈했으면 mFilePathCallback 를 초기화를 해줘야함\r\n//                // -- 그렇지 않으면 다시 파일 오픈 시 열리지 않는 경우 발생\r\n//                mFilePathCallback.onReceiveValue(null);\r\n//                mFilePathCallback = null;\r\n//            }\r\n//            mFilePathCallback = filePathCallback;\r\n\r\n            if (filePathCallbackLollipop != null) {\r\n                filePathCallbackLollipop.onReceiveValue(null);\r\n                filePathCallbackLollipop = null;\r\n            }\r\n            filePathCallbackLollipop = filePathCallback;\r\n\r\n            boolean isCapture = fileChooserParams.isCaptureEnabled();\r\n            runCamera(isCapture);\r\n\r\n            //권한 체크\r\n//            if(권한 여부) {\r\n\r\n//             //권한이 있으면 처리\r\n//             Intent intent = new Intent(Intent.ACTION_GET_CONTENT);\r\n//             intent.addCategory(Intent.CATEGORY_OPENABLE);\r\n//             intent.setType(&quot;*/*&quot;);  //모든 contentType 파일 표시\r\n// //            intent.setType(&quot;image/*&quot;);  //contentType 이 image 인 파일만 표시\r\n//             startActivityForResult(intent, 0);\r\n\r\n            return true;\r\n        }\r\n..............\r\n private void runCamera(boolean _isCapture) {\r\n            Intent intentCamera = new Intent(MediaStore.ACTION_IMAGE_CAPTURE);\r\n//        intentCamera.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);\r\n            File path = getFilesDir();\r\n            File file = new File(path, &quot;picture.png&quot;); // sample.png 는 카메라로 찍었을 때 저장될 파일명이므로 사용자 마음대로\r\n            // File 객체의 URI 를 얻는다.\r\n            if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.N) {\r\n                String strpa = getApplicationContext().getPackageName();\r\n                cameraImageUri = FileProvider.getUriForFile(getApplicationContext(), strpa + &quot;.provider&quot;, file);\r\n            } else {\r\n                cameraImageUri = Uri.fromFile(file);\r\n            }\r\n            intentCamera.putExtra(MediaStore.EXTRA_OUTPUT, cameraImageUri);\r\n\r\n            Intent fileIntent = new Intent(Intent.ACTION_GET_CONTENT);\r\n            fileIntent.addCategory(Intent.CATEGORY_OPENABLE);\r\n            fileIntent.setType(&quot;*/*&quot;);  //모든 contentType 파일 표시\r\n            fileIntent.setType(&quot;image/*&quot;);  //contentType 이 image 인 파일만 표시\r\n\r\n            if (!_isCapture) { // 선택팝업 카메라, 갤러리 둘다 띄우고 싶을 때\r\n                Intent pickIntent = new Intent(Intent.ACTION_PICK);\r\n                pickIntent.setType(MediaStore.Images.Media.CONTENT_TYPE);\r\n                pickIntent.setData(MediaStore.Images.Media.EXTERNAL_CONTENT_URI);\r\n                pickIntent.putExtra(Intent.EXTRA_ALLOW_MULTIPLE, true); // 멀티 다중 선택을 지원하기 위해 추가\r\n\r\n                String pickTitle = &quot;사진 가져올 방법을 선택하세요.&quot;;\r\n                Intent chooserIntent = Intent.createChooser(pickIntent, pickTitle);\r\n\r\n                // 카메라 intent 포함시키기..\r\n\r\n                if (ActivityCompat.checkSelfPermission(MainActivity.this, Manifest.permission.CAMERA) != PackageManager.PERMISSION_GRANTED ) {\r\n                    startActivityForResult(chooserIntent, FILECHOOSER_LOLLIPOP_REQ_CODE);\r\n                    chooserIntent.putExtra(Intent.EXTRA_INITIAL_INTENTS, new Parcelable[]{ fileIntent });\r\n                    return;\r\n                } else {\r\n                    chooserIntent.putExtra(Intent.EXTRA_INITIAL_INTENTS, new Parcelable[]{ intentCamera, fileIntent });\r\n                    startActivityForResult(chooserIntent, FILECHOOSER_LOLLIPOP_REQ_CODE);\r\n                }\r\n            } else {// 바로 카메라 실행..\r\n                int PERMISSION_ALL = 3;\r\n                String[] PERMISSIONS = {\r\n                        Manifest.permission.CAMERA,\r\n                };\r\n\r\n                ActivityCompat.requestPermissions(MainActivity.this, PERMISSIONS, PERMISSION_ALL);\r\n\r\n                if (ActivityCompat.checkSelfPermission(MainActivity.this, Manifest.permission.CAMERA) != PackageManager.PERMISSION_GRANTED ) {\r\n                    return;\r\n                }\r\n                startActivityForResult(intentCamera, FILECHOOSER_LOLLIPOP_REQ_CODE);\r\n            }\r\n        }\r\n....................................\r\n\r\n @Override\r\n    protected void onActivityResult(int requestCode, int resultCode, Intent data) {\r\n//        switch (requestCode) {\r\n//            case FILECHOOSER_NORMAL_REQ_CODE:\r\n//                if (resultCode == RESULT_OK) {\r\n//                    if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.LOLLIPOP) {\r\n//                        mFilePathCallback.onReceiveValue(WebChromeClient.FileChooserParams.parseResult(resultCode, data));\r\n//                    } else {\r\n//                        mFilePathCallback.onReceiveValue(new Uri[]{data.getData()});\r\n//                    }\r\n//                    mFilePathCallback = null;\r\n//                } else {\r\n//                    if (mFilePathCallback != null) {\r\n//                        mFilePathCallback.onReceiveValue(null);\r\n//                        mFilePathCallback = null;\r\n//                    }\r\n//                }\r\n//                break;\r\n//            default:\r\n//                break;\r\n//        }\r\n\r\n        Log.d(&quot;requestCode: &quot;, String.valueOf(requestCode));\r\n        Log.d(&quot;resultCode : &quot;, String.valueOf(resultCode));\r\n\r\n        switch (requestCode) {\r\n            case FILECHOOSER_NORMAL_REQ_CODE:\r\n                if (resultCode == RESULT_OK) {\r\n                    if (filePathCallbackNormal == null) return;\r\n                    Uri result = (data == null || resultCode != RESULT_OK) ? null : data.getData();\r\n                    //  onReceiveValue 로 파일을 전송한다.\r\n                    filePathCallbackNormal.onReceiveValue(result);\r\n                    filePathCallbackNormal = null;\r\n                }\r\n                break;\r\n            case FILECHOOSER_LOLLIPOP_REQ_CODE:\r\n                if (resultCode == RESULT_OK) {\r\n                    if (filePathCallbackLollipop == null) return;\r\n                    if (data == null)\r\n                        data = new Intent();\r\n                    if (data.getData() == null)\r\n                        data.setData(cameraImageUri);\r\n\r\n                    filePathCallbackLollipop.onReceiveValue(WebChromeClient.FileChooserParams.parseResult(resultCode, data));\r\n                    filePathCallbackLollipop = null;\r\n                } else {\r\n                    if (filePathCallbackLollipop != null) {   //  resultCode에 RESULT_OK가 들어오지 않으면 null 처리하지 한다.(이렇게 하지 않으면 다음부터 input 태그를 클릭해도 반응하지 않음)\r\n                        filePathCallbackLollipop.onReceiveValue(null);\r\n                        filePathCallbackLollipop = null;\r\n                    }\r\n\r\n                    if (filePathCallbackNormal != null) {\r\n                        filePathCallbackNormal.onReceiveValue(null);\r\n                        filePathCallbackNormal = null;\r\n                    }\r\n                }\r\n                break;\r\n            default:\r\n\r\n                break;\r\n        }\r\n        super.onActivityResult(requestCode, resultCode, data);\r\n}\r\n\r\n```\r\n","title":"Issues with multi-file selection and camera image import in Android web app","body":"<p>There is an issue I am not solving.</p>\n<p>I'm a web developer and I'm tinkering with Android code.</p>\n<p>Since I lack basic knowledge, I ask the developers for help.</p>\n<ol>\n<li>The web app is shown through the web view, and you need to select and register multiple images among the parts that register the content.</li>\n<li>There was no multi-select function in the existing Android code, so I put it through Google search.</li>\n<li>So now multi-selection seems to work well.</li>\n<li>However, as soon as I click 'OK' on the image file taken with the camera, the app is terminated.</li>\n</ol>\n<p>This is the code I used and am modifying.</p>\n<pre><code>@RequiresApi(api = Build.VERSION_CODES.LOLLIPOP)\n        @Override\n        public boolean onShowFileChooser(WebView webView, ValueCallback&lt;Uri[]&gt; filePathCallback, FileChooserParams fileChooserParams) {\n            Log.d(TAG, &quot;***** onShowFileChooser()&quot;);\n            //return super.onShowFileChooser(webView, filePathCallback, fileChooserParams);\n\n            /* 파일 업로드 */\n//            if (mFilePathCallback != null) {\n//                //파일을 한번 오픈했으면 mFilePathCallback 를 초기화를 해줘야함\n//                // -- 그렇지 않으면 다시 파일 오픈 시 열리지 않는 경우 발생\n//                mFilePathCallback.onReceiveValue(null);\n//                mFilePathCallback = null;\n//            }\n//            mFilePathCallback = filePathCallback;\n\n            if (filePathCallbackLollipop != null) {\n                filePathCallbackLollipop.onReceiveValue(null);\n                filePathCallbackLollipop = null;\n            }\n            filePathCallbackLollipop = filePathCallback;\n\n            boolean isCapture = fileChooserParams.isCaptureEnabled();\n            runCamera(isCapture);\n\n            //권한 체크\n//            if(권한 여부) {\n\n//             //권한이 있으면 처리\n//             Intent intent = new Intent(Intent.ACTION_GET_CONTENT);\n//             intent.addCategory(Intent.CATEGORY_OPENABLE);\n//             intent.setType(&quot;*/*&quot;);  //모든 contentType 파일 표시\n// //            intent.setType(&quot;image/*&quot;);  //contentType 이 image 인 파일만 표시\n//             startActivityForResult(intent, 0);\n\n            return true;\n        }\n..............\n private void runCamera(boolean _isCapture) {\n            Intent intentCamera = new Intent(MediaStore.ACTION_IMAGE_CAPTURE);\n//        intentCamera.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);\n            File path = getFilesDir();\n            File file = new File(path, &quot;picture.png&quot;); // sample.png 는 카메라로 찍었을 때 저장될 파일명이므로 사용자 마음대로\n            // File 객체의 URI 를 얻는다.\n            if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.N) {\n                String strpa = getApplicationContext().getPackageName();\n                cameraImageUri = FileProvider.getUriForFile(getApplicationContext(), strpa + &quot;.provider&quot;, file);\n            } else {\n                cameraImageUri = Uri.fromFile(file);\n            }\n            intentCamera.putExtra(MediaStore.EXTRA_OUTPUT, cameraImageUri);\n\n            Intent fileIntent = new Intent(Intent.ACTION_GET_CONTENT);\n            fileIntent.addCategory(Intent.CATEGORY_OPENABLE);\n            fileIntent.setType(&quot;*/*&quot;);  //모든 contentType 파일 표시\n            fileIntent.setType(&quot;image/*&quot;);  //contentType 이 image 인 파일만 표시\n\n            if (!_isCapture) { // 선택팝업 카메라, 갤러리 둘다 띄우고 싶을 때\n                Intent pickIntent = new Intent(Intent.ACTION_PICK);\n                pickIntent.setType(MediaStore.Images.Media.CONTENT_TYPE);\n                pickIntent.setData(MediaStore.Images.Media.EXTERNAL_CONTENT_URI);\n                pickIntent.putExtra(Intent.EXTRA_ALLOW_MULTIPLE, true); // 멀티 다중 선택을 지원하기 위해 추가\n\n                String pickTitle = &quot;사진 가져올 방법을 선택하세요.&quot;;\n                Intent chooserIntent = Intent.createChooser(pickIntent, pickTitle);\n\n                // 카메라 intent 포함시키기..\n\n                if (ActivityCompat.checkSelfPermission(MainActivity.this, Manifest.permission.CAMERA) != PackageManager.PERMISSION_GRANTED ) {\n                    startActivityForResult(chooserIntent, FILECHOOSER_LOLLIPOP_REQ_CODE);\n                    chooserIntent.putExtra(Intent.EXTRA_INITIAL_INTENTS, new Parcelable[]{ fileIntent });\n                    return;\n                } else {\n                    chooserIntent.putExtra(Intent.EXTRA_INITIAL_INTENTS, new Parcelable[]{ intentCamera, fileIntent });\n                    startActivityForResult(chooserIntent, FILECHOOSER_LOLLIPOP_REQ_CODE);\n                }\n            } else {// 바로 카메라 실행..\n                int PERMISSION_ALL = 3;\n                String[] PERMISSIONS = {\n                        Manifest.permission.CAMERA,\n                };\n\n                ActivityCompat.requestPermissions(MainActivity.this, PERMISSIONS, PERMISSION_ALL);\n\n                if (ActivityCompat.checkSelfPermission(MainActivity.this, Manifest.permission.CAMERA) != PackageManager.PERMISSION_GRANTED ) {\n                    return;\n                }\n                startActivityForResult(intentCamera, FILECHOOSER_LOLLIPOP_REQ_CODE);\n            }\n        }\n....................................\n\n @Override\n    protected void onActivityResult(int requestCode, int resultCode, Intent data) {\n//        switch (requestCode) {\n//            case FILECHOOSER_NORMAL_REQ_CODE:\n//                if (resultCode == RESULT_OK) {\n//                    if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.LOLLIPOP) {\n//                        mFilePathCallback.onReceiveValue(WebChromeClient.FileChooserParams.parseResult(resultCode, data));\n//                    } else {\n//                        mFilePathCallback.onReceiveValue(new Uri[]{data.getData()});\n//                    }\n//                    mFilePathCallback = null;\n//                } else {\n//                    if (mFilePathCallback != null) {\n//                        mFilePathCallback.onReceiveValue(null);\n//                        mFilePathCallback = null;\n//                    }\n//                }\n//                break;\n//            default:\n//                break;\n//        }\n\n        Log.d(&quot;requestCode: &quot;, String.valueOf(requestCode));\n        Log.d(&quot;resultCode : &quot;, String.valueOf(resultCode));\n\n        switch (requestCode) {\n            case FILECHOOSER_NORMAL_REQ_CODE:\n                if (resultCode == RESULT_OK) {\n                    if (filePathCallbackNormal == null) return;\n                    Uri result = (data == null || resultCode != RESULT_OK) ? null : data.getData();\n                    //  onReceiveValue 로 파일을 전송한다.\n                    filePathCallbackNormal.onReceiveValue(result);\n                    filePathCallbackNormal = null;\n                }\n                break;\n            case FILECHOOSER_LOLLIPOP_REQ_CODE:\n                if (resultCode == RESULT_OK) {\n                    if (filePathCallbackLollipop == null) return;\n                    if (data == null)\n                        data = new Intent();\n                    if (data.getData() == null)\n                        data.setData(cameraImageUri);\n\n                    filePathCallbackLollipop.onReceiveValue(WebChromeClient.FileChooserParams.parseResult(resultCode, data));\n                    filePathCallbackLollipop = null;\n                } else {\n                    if (filePathCallbackLollipop != null) {   //  resultCode에 RESULT_OK가 들어오지 않으면 null 처리하지 한다.(이렇게 하지 않으면 다음부터 input 태그를 클릭해도 반응하지 않음)\n                        filePathCallbackLollipop.onReceiveValue(null);\n                        filePathCallbackLollipop = null;\n                    }\n\n                    if (filePathCallbackNormal != null) {\n                        filePathCallbackNormal.onReceiveValue(null);\n                        filePathCallbackNormal = null;\n                    }\n                }\n                break;\n            default:\n\n                break;\n        }\n        super.onActivityResult(requestCode, resultCode, data);\n}\n\n</code></pre>\n"},{"tags":["java","eclipse","gradle","java-home"],"answers":[{"comments":[{"owner":{"account_id":8733951,"reputation":368,"user_id":6533159,"display_name":"Daniele Repici"},"score":2,"creation_date":1633599336,"post_id":64621806,"comment_id":122804835,"body_markdown":"In Eclipse, I found a stale cached java.home property in .settings/org.eclipse.buildship.core.prefs -- you can change it to your new JAVA_HOME or you can remove Gradle nature from the project and apply it again","body":"In Eclipse, I found a stale cached java.home property in .settings/org.eclipse.buildship.core.prefs -- you can change it to your new JAVA_HOME or you can remove Gradle nature from the project and apply it again"}],"tags":[],"owner":{"account_id":401843,"reputation":89863,"user_id":768644,"display_name":"rzwitserloot"},"comment_count":1,"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1692050649,"creation_date":1604148137,"answer_id":64621806,"question_id":64621647,"body_markdown":"Sounds like the right place to edit this is in the eclipse preferences, and/or that eclipse is picking this up from an erroneously set `JAVA_HOME` environment variable.\r\n\r\nWindow &gt; Preferences &gt; search the filterbox for &#39;installed&#39; to get to &#39;Installed JREs&#39;, remove any entries that don&#39;t seem right and add your coretto install here.\r\n\r\nNext check Window &gt; Preferences &gt; Gradle &gt; Arguments &gt; Java Home, and fix things here. Most likely you can just select &#39;workspace JRE&#39; and that should fix the problem.\r\n\r\nIf that doesn&#39;t work out, there&#39;s always the option of adding to your `~/.gradle` file a single line with:\r\n\r\n```\r\norg.gradle.java.home=/path/to/coretto\r\n```\r\n","title":"Supplied javaHome is not a valid folder in eclipse","body":"<p>Sounds like the right place to edit this is in the eclipse preferences, and/or that eclipse is picking this up from an erroneously set <code>JAVA_HOME</code> environment variable.</p>\n<p>Window &gt; Preferences &gt; search the filterbox for 'installed' to get to 'Installed JREs', remove any entries that don't seem right and add your coretto install here.</p>\n<p>Next check Window &gt; Preferences &gt; Gradle &gt; Arguments &gt; Java Home, and fix things here. Most likely you can just select 'workspace JRE' and that should fix the problem.</p>\n<p>If that doesn't work out, there's always the option of adding to your <code>~/.gradle</code> file a single line with:</p>\n<pre><code>org.gradle.java.home=/path/to/coretto\n</code></pre>\n"},{"tags":[],"owner":{"account_id":27796132,"reputation":1,"user_id":21221615,"display_name":"user21221615"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1676484625,"creation_date":1676484625,"answer_id":75463864,"question_id":64621647,"body_markdown":"I received an update to my VM and the previous Pref&gt;Gradle&gt;Arg&gt;Java Home no longer existed.  I cut and pasted in one that did... Unfortunately, this did not work. I had to come through Eclipse and use the file navigation to get to the new Java Home I wanted to use. (Then do a Gradle&gt;Refresh Gradle Project to get it to take). ","title":"Supplied javaHome is not a valid folder in eclipse","body":"<p>I received an update to my VM and the previous Pref&gt;Gradle&gt;Arg&gt;Java Home no longer existed.  I cut and pasted in one that did... Unfortunately, this did not work. I had to come through Eclipse and use the file navigation to get to the new Java Home I wanted to use. (Then do a Gradle&gt;Refresh Gradle Project to get it to take).</p>\n"}],"owner":{"account_id":2637951,"reputation":4283,"user_id":3014199,"accept_rate":79,"display_name":"peer"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":4043,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":64621806,"answer_count":2,"score":1,"last_activity_date":1692050649,"creation_date":1604146843,"question_id":64621647,"body_markdown":"I have migrated a workspace to a new machine with a different java distribution.\r\nThe old machine had java-11-openjdk-amd64.\r\nThe new one has only corretto.\r\n\r\nUpon opening the old workspace on the new machine I get some `problem`s, such as\r\n\r\n&gt; Supplied javaHome is not a valid folder. You supplied: /usr/lib/jvm/java-11-openjdk-amd64\t\r\n&gt; line 0 Gradle Error Marker\r\n\r\nSo in the workspace I deleted `.metadata` and I searched the workspace (and `~/.eclipse`, `~/.gradle` just in case) for references to the old version with\r\n\r\n`grep -r &quot;/usr/lib/jvm/java-11-o&quot;`\r\n\r\nThere are no results.\r\nI have made sure that no eclipse processes are running (`ps -aux | grep eclipse`) and restarted eclipse, but the errors remain. What else can I do before creating new project and manually copying the code?","title":"Supplied javaHome is not a valid folder in eclipse","body":"<p>I have migrated a workspace to a new machine with a different java distribution.\nThe old machine had java-11-openjdk-amd64.\nThe new one has only corretto.</p>\n<p>Upon opening the old workspace on the new machine I get some <code>problem</code>s, such as</p>\n<blockquote>\n<p>Supplied javaHome is not a valid folder. You supplied: /usr/lib/jvm/java-11-openjdk-amd64\nline 0 Gradle Error Marker</p>\n</blockquote>\n<p>So in the workspace I deleted <code>.metadata</code> and I searched the workspace (and <code>~/.eclipse</code>, <code>~/.gradle</code> just in case) for references to the old version with</p>\n<p><code>grep -r &quot;/usr/lib/jvm/java-11-o&quot;</code></p>\n<p>There are no results.\nI have made sure that no eclipse processes are running (<code>ps -aux | grep eclipse</code>) and restarted eclipse, but the errors remain. What else can I do before creating new project and manually copying the code?</p>\n"},{"tags":["java","spring","spring-boot"],"answers":[{"tags":[],"owner":{"account_id":5762184,"reputation":757,"user_id":4548231,"display_name":"sawprogramming"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1692050370,"creation_date":1692050370,"answer_id":76902381,"question_id":76901860,"body_markdown":"Well to answer my question: I&#39;ve found a solution that makes it *possible* to do this, but it requires reflection. I&#39;d certainly like to see a better solution!\r\n\r\n~~~java\r\npublic void registerBar(final BeanDefinitionRegistry registry) {\r\n    // Use reflection to get the writeMethod of property the class we want to autowire.\r\n    final Method writeMethod;\r\n    try {\r\n        writeMethod = Bar.class.getMethod(&quot;setFoos&quot;, List.class);\r\n    } catch (final NoSuchMethodException e) {\r\n        throw new Error(e);\r\n    }\r\n\r\n    // Create an overriden instance of the MethodParameter to add the desired @Qualifier annotation to it.\r\n    final MethodParameter writeMethodParameter = new MethodParameter(writeMethod, 0) {\r\n        @Override\r\n        public @NonNull Annotation[] getParameterAnnotations() {\r\n            // Call the super method to get the existing annotations on the function, then add the desired\r\n            // @Qualifier annotation to the list.\r\n            Annotation[] annotations = super.getParameterAnnotations();\r\n            annotations                         = Arrays.copyOf(annotations, annotations.length + 1);\r\n            annotations[annotations.length - 1] = new Qualifier() {\r\n                @Override\r\n                public @NonNull String value() {\r\n                    return &quot;A&quot;;\r\n                }\r\n\r\n                @Override\r\n                public Class&lt;? extends Annotation&gt; annotationType() {\r\n                    return Qualifier.class;\r\n                }\r\n\r\n                @Override\r\n                public String toString() {\r\n                    return &quot;@org.springframework.beans.factory.annotation.Qualifier(\\&quot;&quot; + value() + &quot;\\&quot;)&quot;;\r\n                }\r\n            };\r\n\r\n            // Use reflection to set the private parameterAnnotations field on the super class; this hack to \r\n            // funtionally declare a @Qualifier annotation does not work if the private field is not set.\r\n            try {\r\n                final Field field = getClass().getSuperclass().getDeclaredField(&quot;parameterAnnotations&quot;);\r\n                field.setAccessible (true);\r\n                field.set           (this, annotations);\r\n            } catch (final NoSuchFieldException | IllegalAccessException e) {\r\n                throw new Error(e);\r\n            }\r\n\r\n            return annotations;\r\n        }\r\n    };\r\n\r\n    final BeanDefinition beanDefinition = (\r\n        BeanDefinitionBuilder.genericBeanDefinition(Bar.class)\r\n            .addPropertyValue (&quot;id&quot;,  &quot;bar_0001&quot;),\r\n            .addPropertyValue (&quot;...&quot;, &quot;...&quot;)\r\n            .addPropertyValue (&quot;foos&quot;, new DependencyDescriptor(writeMethodParameter, true))\r\n        .getBeanDefinition()\r\n    );\r\n\r\n    beanDefinitionRegistry.registerBeanDefinition(&quot;bar&quot;, beanDefinition);\r\n}\r\n~~~","title":"Inject property value with qualifiers using functionally defined BeanDefinitions","body":"<p>Well to answer my question: I've found a solution that makes it <em>possible</em> to do this, but it requires reflection. I'd certainly like to see a better solution!</p>\n<pre class=\"lang-java prettyprint-override\"><code>public void registerBar(final BeanDefinitionRegistry registry) {\n    // Use reflection to get the writeMethod of property the class we want to autowire.\n    final Method writeMethod;\n    try {\n        writeMethod = Bar.class.getMethod(&quot;setFoos&quot;, List.class);\n    } catch (final NoSuchMethodException e) {\n        throw new Error(e);\n    }\n\n    // Create an overriden instance of the MethodParameter to add the desired @Qualifier annotation to it.\n    final MethodParameter writeMethodParameter = new MethodParameter(writeMethod, 0) {\n        @Override\n        public @NonNull Annotation[] getParameterAnnotations() {\n            // Call the super method to get the existing annotations on the function, then add the desired\n            // @Qualifier annotation to the list.\n            Annotation[] annotations = super.getParameterAnnotations();\n            annotations                         = Arrays.copyOf(annotations, annotations.length + 1);\n            annotations[annotations.length - 1] = new Qualifier() {\n                @Override\n                public @NonNull String value() {\n                    return &quot;A&quot;;\n                }\n\n                @Override\n                public Class&lt;? extends Annotation&gt; annotationType() {\n                    return Qualifier.class;\n                }\n\n                @Override\n                public String toString() {\n                    return &quot;@org.springframework.beans.factory.annotation.Qualifier(\\&quot;&quot; + value() + &quot;\\&quot;)&quot;;\n                }\n            };\n\n            // Use reflection to set the private parameterAnnotations field on the super class; this hack to \n            // funtionally declare a @Qualifier annotation does not work if the private field is not set.\n            try {\n                final Field field = getClass().getSuperclass().getDeclaredField(&quot;parameterAnnotations&quot;);\n                field.setAccessible (true);\n                field.set           (this, annotations);\n            } catch (final NoSuchFieldException | IllegalAccessException e) {\n                throw new Error(e);\n            }\n\n            return annotations;\n        }\n    };\n\n    final BeanDefinition beanDefinition = (\n        BeanDefinitionBuilder.genericBeanDefinition(Bar.class)\n            .addPropertyValue (&quot;id&quot;,  &quot;bar_0001&quot;),\n            .addPropertyValue (&quot;...&quot;, &quot;...&quot;)\n            .addPropertyValue (&quot;foos&quot;, new DependencyDescriptor(writeMethodParameter, true))\n        .getBeanDefinition()\n    );\n\n    beanDefinitionRegistry.registerBeanDefinition(&quot;bar&quot;, beanDefinition);\n}\n</code></pre>\n"}],"owner":{"account_id":5762184,"reputation":757,"user_id":4548231,"display_name":"sawprogramming"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":34,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1692050370,"creation_date":1692043473,"question_id":76901860,"body_markdown":"I&#39;m using Spring 6. Say I have the following beans defined somewhere in the application&#39;s classpath.\r\n\r\n~~~java\r\n// &quot;A&quot;-qualified Foo instances\r\n@Bean @Qualifier(&quot;A&quot;) adventure () { return new Foo(&quot;Adventure&quot;); }\r\n@Bean @Qualifier(&quot;A&quot;) afternoon () { return new Foo(&quot;Afternoon&quot;); }\r\n@Bean @Qualifier(&quot;A&quot;) air       () { return new Foo(&quot;Air&quot;);       }\r\n@Bean @Qualifier(&quot;A&quot;) animal    () { return new Foo(&quot;Animal&quot;);    }\r\n@Bean @Qualifier(&quot;A&quot;) apple     () { return new Foo(&quot;Apple&quot;);     }\r\n@Bean @Qualifier(&quot;A&quot;) award     () { return new Foo(&quot;Award&quot;);     }\r\n\r\n// &quot;B&quot;-qualified Foo instances\r\n@Bean @Qualifier(&quot;B&quot;) basket  () { return new Foo(&quot;Basket&quot;);  }\r\n@Bean @Qualifier(&quot;B&quot;) bee     () { return new Foo(&quot;Bee&quot;);     }\r\n@Bean @Qualifier(&quot;B&quot;) blanket () { return new Foo(&quot;Blanket&quot;); }\r\n@Bean @Qualifier(&quot;B&quot;) bicycle () { return new Foo(&quot;Bicycle&quot;); }\r\n@Bean @Qualifier(&quot;B&quot;) bucket  () { return new Foo(&quot;Bucket&quot;);  }\r\n@Bean @Qualifier(&quot;B&quot;) button  () { return new Foo(&quot;Button&quot;);  }\r\n~~~\r\n\r\nWith annotations hard-coded in a class file, I could normally autowire all &quot;A&quot;-qualified instances of `Foo` into a property like so:\r\n~~~java\r\n@Autowired\r\npublic void setFoos(@Qualifier(&quot;A&quot;) final List&lt;Foo&gt; foos) { \r\n   this.foos = foos;\r\n}\r\n~~~\r\n\r\nIs it also possible to inject property values using a `Qualifier` when functionally registering `BeanDefinitions`? I&#39;m thinking that if it was possible, it would look something like this:\r\n~~~java\r\npublic void registerBar(final BeanDefinitionRegistry registry) {\r\n    final BeanDefinition beanDefinition = (\r\n        BeanDefinitionBuilder.genericBeanDefinition(Bar.class)\r\n            .addPropertyValue (&quot;id&quot;,  &quot;bar_0001&quot;),\r\n            .addPropertyValue (&quot;...&quot;, &quot;...&quot;)\r\n            .addPropertyValue (&quot;foos&quot;, new QualifiedRuntimeBeanReference(Foo.class, &quot;A&quot;))\r\n        .getBeanDefinition()\r\n    );\r\n   beanDefinitionRegistry.registerBeanDefinition(&quot;bar&quot;, beanDefinition);\r\n}\r\n~~~\r\n\r\n\r\nIt doesn&#39;t seem like what I&#39;m asking about is supported in a straightforward way. I see a little bit of discussion that appears related in [the Spring Framework project on GitHub][1], but the solution there doesn&#39;t seem to consider qualifiers.\r\n\r\n  [1]: https://github.com/spring-projects/spring-framework/issues/23032","title":"Inject property value with qualifiers using functionally defined BeanDefinitions","body":"<p>I'm using Spring 6. Say I have the following beans defined somewhere in the application's classpath.</p>\n<pre class=\"lang-java prettyprint-override\"><code>// &quot;A&quot;-qualified Foo instances\n@Bean @Qualifier(&quot;A&quot;) adventure () { return new Foo(&quot;Adventure&quot;); }\n@Bean @Qualifier(&quot;A&quot;) afternoon () { return new Foo(&quot;Afternoon&quot;); }\n@Bean @Qualifier(&quot;A&quot;) air       () { return new Foo(&quot;Air&quot;);       }\n@Bean @Qualifier(&quot;A&quot;) animal    () { return new Foo(&quot;Animal&quot;);    }\n@Bean @Qualifier(&quot;A&quot;) apple     () { return new Foo(&quot;Apple&quot;);     }\n@Bean @Qualifier(&quot;A&quot;) award     () { return new Foo(&quot;Award&quot;);     }\n\n// &quot;B&quot;-qualified Foo instances\n@Bean @Qualifier(&quot;B&quot;) basket  () { return new Foo(&quot;Basket&quot;);  }\n@Bean @Qualifier(&quot;B&quot;) bee     () { return new Foo(&quot;Bee&quot;);     }\n@Bean @Qualifier(&quot;B&quot;) blanket () { return new Foo(&quot;Blanket&quot;); }\n@Bean @Qualifier(&quot;B&quot;) bicycle () { return new Foo(&quot;Bicycle&quot;); }\n@Bean @Qualifier(&quot;B&quot;) bucket  () { return new Foo(&quot;Bucket&quot;);  }\n@Bean @Qualifier(&quot;B&quot;) button  () { return new Foo(&quot;Button&quot;);  }\n</code></pre>\n<p>With annotations hard-coded in a class file, I could normally autowire all &quot;A&quot;-qualified instances of <code>Foo</code> into a property like so:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Autowired\npublic void setFoos(@Qualifier(&quot;A&quot;) final List&lt;Foo&gt; foos) { \n   this.foos = foos;\n}\n</code></pre>\n<p>Is it also possible to inject property values using a <code>Qualifier</code> when functionally registering <code>BeanDefinitions</code>? I'm thinking that if it was possible, it would look something like this:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public void registerBar(final BeanDefinitionRegistry registry) {\n    final BeanDefinition beanDefinition = (\n        BeanDefinitionBuilder.genericBeanDefinition(Bar.class)\n            .addPropertyValue (&quot;id&quot;,  &quot;bar_0001&quot;),\n            .addPropertyValue (&quot;...&quot;, &quot;...&quot;)\n            .addPropertyValue (&quot;foos&quot;, new QualifiedRuntimeBeanReference(Foo.class, &quot;A&quot;))\n        .getBeanDefinition()\n    );\n   beanDefinitionRegistry.registerBeanDefinition(&quot;bar&quot;, beanDefinition);\n}\n</code></pre>\n<p>It doesn't seem like what I'm asking about is supported in a straightforward way. I see a little bit of discussion that appears related in <a href=\"https://github.com/spring-projects/spring-framework/issues/23032\" rel=\"nofollow noreferrer\">the Spring Framework project on GitHub</a>, but the solution there doesn't seem to consider qualifiers.</p>\n"},{"tags":["java","if-statement","syntax-error","do-while","user-experience"],"comments":[{"owner":{"account_id":9685245,"reputation":9531,"user_id":7185318,"accept_rate":88,"display_name":"Luatic"},"score":3,"creation_date":1692043791,"post_id":76901865,"comment_id":135569786,"body_markdown":"You need to place `break` after each `case`, otherwise it will fall through and execute the other cases. This is a frequent mistake, esp. as some languages have other conventions where they will implicitly `break` (IMO the saner behavior).","body":"You need to place <code>break</code> after each <code>case</code>, otherwise it will fall through and execute the other cases. This is a frequent mistake, esp. as some languages have other conventions where they will implicitly <code>break</code> (IMO the saner behavior)."},{"owner":{"account_id":969721,"reputation":344527,"user_id":992484,"accept_rate":60,"display_name":"MadProgrammer"},"score":2,"creation_date":1692044535,"post_id":76901865,"comment_id":135569902,"body_markdown":"`} while (set = false);` is an assignment, not a comparison","body":"<code>} while (set = false);</code> is an assignment, not a comparison"},{"owner":{"account_id":27139155,"reputation":1,"user_id":20709971,"display_name":"Chance H"},"score":0,"creation_date":1692046747,"post_id":76901865,"comment_id":135570205,"body_markdown":"thanks you! You two were spot on and now it looks great. Thank you for the help!","body":"thanks you! You two were spot on and now it looks great. Thank you for the help!"},{"owner":{"account_id":5240687,"reputation":1727,"user_id":4187837,"accept_rate":86,"display_name":"Gavin"},"score":0,"creation_date":1692051415,"post_id":76901865,"comment_id":135570773,"body_markdown":"Not a solution as such, but there is a series on the “Marco Codes” YouTube channel where Marco builds a text editor in Java. It’s quite interesting","body":"Not a solution as such, but there is a series on the “Marco Codes” YouTube channel where Marco builds a text editor in Java. It’s quite interesting"}],"answers":[{"comments":[{"owner":{"account_id":5240687,"reputation":1727,"user_id":4187837,"accept_rate":86,"display_name":"Gavin"},"score":0,"creation_date":1692051079,"post_id":76902377,"comment_id":135570733,"body_markdown":"I always figured the fall through thing was in part to aid in keeping the compiler simpler/smaller. One less rule and a switch block behaves like any other block of code. Fall through can be useful but it can lead to errors so it’s use should be documented. For “crazy” use of a switch in C check out “Duff’s Device”","body":"I always figured the fall through thing was in part to aid in keeping the compiler simpler/smaller. One less rule and a switch block behaves like any other block of code. Fall through can be useful but it can lead to errors so it’s use should be documented. For “crazy” use of a switch in C check out “Duff’s Device”"}],"tags":[],"owner":{"account_id":401843,"reputation":89863,"user_id":768644,"display_name":"rzwitserloot"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1692050317,"creation_date":1692050317,"answer_id":76902377,"question_id":76901865,"body_markdown":"The way you wrote the switch, it &#39;falls through&#39;. Here&#39;s a simple snippet to show how fall-through works:\r\n\r\n```\r\nint x = 5;\r\nswitch (x) {\r\ncase 5: System.out.print(&quot;5&quot;);\r\ncase 4: System.out.print(&quot;4&quot;);\r\ncase 3: System.out.print(&quot;3&quot;);\r\ncase 2: System.out.print(&quot;2&quot;);\r\ncase 1: System.out.print(&quot;1&quot;);\r\n}\r\n```\r\n\r\nThe above would print `54321`. Not just `5`.\r\n\r\nYou need breaks at the end of _every_ case statement:\r\n\r\n```\r\nint x = 5;\r\nswitch (x) {\r\ncase 5: System.out.print(&quot;5&quot;); break;\r\ncase 4: System.out.print(&quot;4&quot;); break;\r\ncase 3: System.out.print(&quot;3&quot;); break;\r\ncase 2: System.out.print(&quot;2&quot;); break;\r\ncase 1: System.out.print(&quot;1&quot;); break;\r\n}\r\n```\r\n\r\nNow it would print just `5`. Many java linting tools, including IDEs, can be configured to require that `break` (they will mark your code as problematic if you fail to write one at the end of every case block but the last), or possibly a comment with the word &#39;fallthrough&#39; in it someplace, to indicate you _want_ the fallthrough behaviour.\r\n\r\nHowever, there are better options; other forms of switch that don&#39;t suffer from this conundrum. In fact, these days (JDK17+) switch is rather flexible. With arrow-notation, case blocks no longer fall through:\r\n\r\n```\r\nint x = 5;\r\nswitch (x) {\r\ncase 5 -&gt; System.out.print(&quot;5&quot;);\r\ncase 4 -&gt; System.out.print(&quot;4&quot;);\r\ncase 3 -&gt; System.out.print(&quot;3&quot;);\r\ncase 2 -&gt; System.out.print(&quot;2&quot;);\r\ncase 1 -&gt; System.out.print(&quot;1&quot;);\r\n}\r\n```\r\n\r\nNow it prints simply `5`.\r\n\r\nYou can also write switches as expressions:\r\n\r\n```\r\nint x = 5;\r\nString wordified = switch(x) {\r\n  case 5 -&gt; &quot;Five&quot;;\r\n  case 4 -&gt; &quot;Four&quot;;\r\n  case 3,2,1 -&gt; &quot;Low&quot;;\r\n  default -&gt; &quot;Who knows&quot;;\r\n};\r\n\r\nSystem.out.println(wordified);\r\n```\r\n\r\nprints `Five`. In this mode, your cases have to &#39;exhaustive&#39; (cover every value the input type could possibly have. Which, for `int`, would require about 4 billion entries, obviously not feasible. But with a `default` block it&#39;s now exhaustive. Non-exhaustive switches used as expressions give you a compiler error that tell you that your switch isn&#39;t exhaustive.\r\n\r\nNB: If you&#39;re thinking: Say, that fallthrough thing, that&#39;s pretty stupid! Yeah, probably. Java v1.0 bent over backwards to look, syntactically, as close to C as possible, given that C was absolutely dominant at the time in the kinds of environments java wanted to be popular in. This explains a ton of &#39;what were they thinking&#39; syntax choices (and C, itself, has similarly &#39;rooted in the mists of history&#39; explanations for _their_ choices, and so on, until you&#39;re Indiana Jones spelunking through the 1950s to figure out why things turned out the way they are. Fun hobby, though). Don&#39;t knock it - it worked. Java was more popular than C within about a decade of its release, and still is.","title":"If-statement boolean logic not working within my switch statement","body":"<p>The way you wrote the switch, it 'falls through'. Here's a simple snippet to show how fall-through works:</p>\n<pre><code>int x = 5;\nswitch (x) {\ncase 5: System.out.print(&quot;5&quot;);\ncase 4: System.out.print(&quot;4&quot;);\ncase 3: System.out.print(&quot;3&quot;);\ncase 2: System.out.print(&quot;2&quot;);\ncase 1: System.out.print(&quot;1&quot;);\n}\n</code></pre>\n<p>The above would print <code>54321</code>. Not just <code>5</code>.</p>\n<p>You need breaks at the end of <em>every</em> case statement:</p>\n<pre><code>int x = 5;\nswitch (x) {\ncase 5: System.out.print(&quot;5&quot;); break;\ncase 4: System.out.print(&quot;4&quot;); break;\ncase 3: System.out.print(&quot;3&quot;); break;\ncase 2: System.out.print(&quot;2&quot;); break;\ncase 1: System.out.print(&quot;1&quot;); break;\n}\n</code></pre>\n<p>Now it would print just <code>5</code>. Many java linting tools, including IDEs, can be configured to require that <code>break</code> (they will mark your code as problematic if you fail to write one at the end of every case block but the last), or possibly a comment with the word 'fallthrough' in it someplace, to indicate you <em>want</em> the fallthrough behaviour.</p>\n<p>However, there are better options; other forms of switch that don't suffer from this conundrum. In fact, these days (JDK17+) switch is rather flexible. With arrow-notation, case blocks no longer fall through:</p>\n<pre><code>int x = 5;\nswitch (x) {\ncase 5 -&gt; System.out.print(&quot;5&quot;);\ncase 4 -&gt; System.out.print(&quot;4&quot;);\ncase 3 -&gt; System.out.print(&quot;3&quot;);\ncase 2 -&gt; System.out.print(&quot;2&quot;);\ncase 1 -&gt; System.out.print(&quot;1&quot;);\n}\n</code></pre>\n<p>Now it prints simply <code>5</code>.</p>\n<p>You can also write switches as expressions:</p>\n<pre><code>int x = 5;\nString wordified = switch(x) {\n  case 5 -&gt; &quot;Five&quot;;\n  case 4 -&gt; &quot;Four&quot;;\n  case 3,2,1 -&gt; &quot;Low&quot;;\n  default -&gt; &quot;Who knows&quot;;\n};\n\nSystem.out.println(wordified);\n</code></pre>\n<p>prints <code>Five</code>. In this mode, your cases have to 'exhaustive' (cover every value the input type could possibly have. Which, for <code>int</code>, would require about 4 billion entries, obviously not feasible. But with a <code>default</code> block it's now exhaustive. Non-exhaustive switches used as expressions give you a compiler error that tell you that your switch isn't exhaustive.</p>\n<p>NB: If you're thinking: Say, that fallthrough thing, that's pretty stupid! Yeah, probably. Java v1.0 bent over backwards to look, syntactically, as close to C as possible, given that C was absolutely dominant at the time in the kinds of environments java wanted to be popular in. This explains a ton of 'what were they thinking' syntax choices (and C, itself, has similarly 'rooted in the mists of history' explanations for <em>their</em> choices, and so on, until you're Indiana Jones spelunking through the 1950s to figure out why things turned out the way they are. Fun hobby, though). Don't knock it - it worked. Java was more popular than C within about a decade of its release, and still is.</p>\n"}],"owner":{"account_id":27139155,"reputation":1,"user_id":20709971,"display_name":"Chance H"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":56,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1692050317,"creation_date":1692043498,"question_id":76901865,"body_markdown":"I am writing a function for a personal project and am trying to create a function that will center lines of text onto the console. I found a solution for Strings less than a line long, but am encountering difficulties with larger Strings. Code is behaving erratically and I think the logic is not working correctly due to some issue unknown to me. I don&#39;t have a ton of experience with switch statements but figured it was a good time to learn through doing. So if the answer is obvious don&#39;t be mad.\r\n\r\n\r\nTo explain the code I input a String words that I want to split into 2 smaller Strings that are centered on a 200 (fullscreen) character wide console(might upscale later to allow more lines). My idea is to have three preferences on where to split the line: periods, commas and finally spaces. I am trying to use a do-while loop to attempt each preference in order and find an acceptable splitting spot between 175 and 200 character. All of my issues on inside the splitWords(String words) function but I included the function that calls it for holisticness. \r\n\r\nThis is the written code:\r\n```\r\npublic static void printCenter(String words){ //assumes a 200 character wide console\r\n\r\n\t\tint x = words.length();\r\n\t\tint y = (200-x);\r\n\t\tint z= y/2;\r\n\r\n\t\tif(x&lt;175){ //no need for formatting second line\r\n\t\t\tfor(int i=z; i&gt;0; i--){\r\n\t\t\t\tSystem.out.print(&quot; &quot;);\r\n\t\t\t}\r\n\t\t\t\tSystem.out.print(words);\r\n\t\t\tfor(int i=z; i&gt;0; i--){\r\n\t\t\t\tSystem.out.print(&quot; &quot;);\r\n\t\t\t}\r\n\t\t\tSystem.out.println(&quot;&quot;);\r\n\t\t}\r\n\t\tif(x&gt;=175){\r\n\t\t\tString[] split = splitWords(words);\r\n\t\t\tString words1 = split[0];\r\n\t\t\tString words2 = split[1];\r\n\r\n\t\t\tint x1 = words1.length();\r\n\t\t\tint x2 = words2.length();\r\n\t\t\tint y1 = (200-x1);\r\n\t\t\tint y2 = (200-x2);\r\n\t\t\tint z1= y1/2;\r\n\t\t\tint z2= y2/2;\r\n\r\n\t\t\tSystem.out.println(&quot;Split at: &quot; + x1 + &quot;\\t Output below&quot;);\r\n\t\t\tSystem.out.println(&quot;&quot;);\r\n\r\n\t\t\tfor(int i=z1; i&gt;0; i--){\r\n\t\t\t\tSystem.out.print(&quot; &quot;);\r\n\t\t\t}\r\n\t\t\t\tSystem.out.print(words1);\r\n\t\t\tfor(int i=z1; i&gt;0; i--){\r\n\t\t\t\tSystem.out.print(&quot; &quot;);\r\n\t\t\t}\r\n\t\t\tfor(int i=z2; i&gt;0; i--){\r\n\t\t\t\tSystem.out.print(&quot; &quot;);\r\n\t\t\t}\r\n\t\t\t\tSystem.out.print(words2);\r\n\t\t\tfor(int i=z2; i&gt;0; i--){\r\n\t\t\t\tSystem.out.print(&quot; &quot;);\r\n\t\t\t}\r\n\t\t\tSystem.out.println(&quot;&quot;);\r\n\t\t}\r\n\r\n\t}\r\npublic static String[] splitWords(String words){\r\n\tString line1 = &quot;&quot;;\r\n\tString line2 = &quot;&quot;;\r\n\tint splithere = 0;\r\n\t//strings used to create new substrings\r\n\tString firstpref = &quot;. &quot;;\r\n\tString secondpref = &quot;, &quot;;\r\n\tString lastpref = &quot; &quot;;\r\n\tint tries = 0;\r\n\tboolean set = false;\r\n\tSystem.out.println(&quot;started&quot;);\r\n\tdo{\r\n\t\tswitch(tries){\r\n\t\t\tcase 0:\r\n\t\t\t\tint num = words.indexOf(firstpref,175);\r\n\t\t\t\tif(num&lt;200){\r\n\t\t\t\t\tSystem.out.print(&quot;this should be less than 200: &quot; + num);\r\n\t\t\t\t\tsplithere = words.indexOf(firstpref,175);\r\n\t\t\t\t\tset=true;\r\n\t\t\t\t\tSystem.out.println(&quot;found valid split during pass: &quot; + tries + &quot; at: &quot; + splithere);\r\n\t\t\t\t}\r\n\t\t\tcase 1:\r\n\t\t\t\tif(words.indexOf(secondpref,175)&lt;200){\r\n\t\t\t\t\tsplithere = words.indexOf(firstpref,175);\r\n\t\t\t\t\tset=true;\r\n\t\t\t\t\tSystem.out.println(&quot;found valid split during pass: &quot; + tries + &quot; at: &quot; + splithere);\r\n\t\t\t\t}\r\n\t\t\tcase 2:\r\n\t\t\t\tif(words.indexOf(lastpref,175)&lt;200){\r\n\t\t\t\t\tsplithere = words.indexOf(firstpref,175);\r\n\t\t\t\t\tset=true;\r\n\t\t\t\t\tSystem.out.println(&quot;found valid split during pass: &quot; + tries + &quot; at: &quot; + splithere);\r\n\t\t\t\t}\r\n\t\t}\r\n\t\ttries++;\r\n\t}while(set = false);\r\n\r\n\tline1 = words.substring(0,splithere);\r\n\tline2 = words.substring(splithere,words.length());\r\n\tString[] output = {line1,line2};\r\n\tSystem.out.println(&quot; ended with boolean = &quot; + set);\r\n\treturn output;\r\n\t}\r\n```\r\n\r\n\r\nHere is a sample output from a 347 character string:\r\n\r\n&gt; started\r\nfound valid split during pass: 0 at: 235\r\n ended with boolean = false\r\nSplit at: 235    Output below:\r\n\r\n&gt; You are at a junction in the middle of town. To the west, through a guard post, lies the heart of the village, protected and highly guarded this area is home to politicians, great scribes and hunters and most importantly, cheif&#39;s perch (String splits here). The older dirt road running North ends in a T with a decorated stone road running East.\r\n\r\nYou can see from my code that I have tried to insert messages to help me diagnose the problem. It seems to me like the If statement inside the switch is running some of it&#39;s code even when the If statement is off. How else can you explain the console printing out the &quot;found valid split during pass 0 at: 235&quot; when that String should never have a number greater than 200 as defined by the boolean logic in the If statement.\r\n\r\nAnother vexxing issue is that the do-while loop ends while set=false. You can see this in the output text on the console. I cannot see why it doesn&#39;t increment tries++ and run the loop again with a new switch statement.","title":"If-statement boolean logic not working within my switch statement","body":"<p>I am writing a function for a personal project and am trying to create a function that will center lines of text onto the console. I found a solution for Strings less than a line long, but am encountering difficulties with larger Strings. Code is behaving erratically and I think the logic is not working correctly due to some issue unknown to me. I don't have a ton of experience with switch statements but figured it was a good time to learn through doing. So if the answer is obvious don't be mad.</p>\n<p>To explain the code I input a String words that I want to split into 2 smaller Strings that are centered on a 200 (fullscreen) character wide console(might upscale later to allow more lines). My idea is to have three preferences on where to split the line: periods, commas and finally spaces. I am trying to use a do-while loop to attempt each preference in order and find an acceptable splitting spot between 175 and 200 character. All of my issues on inside the splitWords(String words) function but I included the function that calls it for holisticness.</p>\n<p>This is the written code:</p>\n<pre><code>public static void printCenter(String words){ //assumes a 200 character wide console\n\n        int x = words.length();\n        int y = (200-x);\n        int z= y/2;\n\n        if(x&lt;175){ //no need for formatting second line\n            for(int i=z; i&gt;0; i--){\n                System.out.print(&quot; &quot;);\n            }\n                System.out.print(words);\n            for(int i=z; i&gt;0; i--){\n                System.out.print(&quot; &quot;);\n            }\n            System.out.println(&quot;&quot;);\n        }\n        if(x&gt;=175){\n            String[] split = splitWords(words);\n            String words1 = split[0];\n            String words2 = split[1];\n\n            int x1 = words1.length();\n            int x2 = words2.length();\n            int y1 = (200-x1);\n            int y2 = (200-x2);\n            int z1= y1/2;\n            int z2= y2/2;\n\n            System.out.println(&quot;Split at: &quot; + x1 + &quot;\\t Output below&quot;);\n            System.out.println(&quot;&quot;);\n\n            for(int i=z1; i&gt;0; i--){\n                System.out.print(&quot; &quot;);\n            }\n                System.out.print(words1);\n            for(int i=z1; i&gt;0; i--){\n                System.out.print(&quot; &quot;);\n            }\n            for(int i=z2; i&gt;0; i--){\n                System.out.print(&quot; &quot;);\n            }\n                System.out.print(words2);\n            for(int i=z2; i&gt;0; i--){\n                System.out.print(&quot; &quot;);\n            }\n            System.out.println(&quot;&quot;);\n        }\n\n    }\npublic static String[] splitWords(String words){\n    String line1 = &quot;&quot;;\n    String line2 = &quot;&quot;;\n    int splithere = 0;\n    //strings used to create new substrings\n    String firstpref = &quot;. &quot;;\n    String secondpref = &quot;, &quot;;\n    String lastpref = &quot; &quot;;\n    int tries = 0;\n    boolean set = false;\n    System.out.println(&quot;started&quot;);\n    do{\n        switch(tries){\n            case 0:\n                int num = words.indexOf(firstpref,175);\n                if(num&lt;200){\n                    System.out.print(&quot;this should be less than 200: &quot; + num);\n                    splithere = words.indexOf(firstpref,175);\n                    set=true;\n                    System.out.println(&quot;found valid split during pass: &quot; + tries + &quot; at: &quot; + splithere);\n                }\n            case 1:\n                if(words.indexOf(secondpref,175)&lt;200){\n                    splithere = words.indexOf(firstpref,175);\n                    set=true;\n                    System.out.println(&quot;found valid split during pass: &quot; + tries + &quot; at: &quot; + splithere);\n                }\n            case 2:\n                if(words.indexOf(lastpref,175)&lt;200){\n                    splithere = words.indexOf(firstpref,175);\n                    set=true;\n                    System.out.println(&quot;found valid split during pass: &quot; + tries + &quot; at: &quot; + splithere);\n                }\n        }\n        tries++;\n    }while(set = false);\n\n    line1 = words.substring(0,splithere);\n    line2 = words.substring(splithere,words.length());\n    String[] output = {line1,line2};\n    System.out.println(&quot; ended with boolean = &quot; + set);\n    return output;\n    }\n</code></pre>\n<p>Here is a sample output from a 347 character string:</p>\n<blockquote>\n<p>started\nfound valid split during pass: 0 at: 235\nended with boolean = false\nSplit at: 235    Output below:</p>\n</blockquote>\n<blockquote>\n<p>You are at a junction in the middle of town. To the west, through a guard post, lies the heart of the village, protected and highly guarded this area is home to politicians, great scribes and hunters and most importantly, cheif's perch (String splits here). The older dirt road running North ends in a T with a decorated stone road running East.</p>\n</blockquote>\n<p>You can see from my code that I have tried to insert messages to help me diagnose the problem. It seems to me like the If statement inside the switch is running some of it's code even when the If statement is off. How else can you explain the console printing out the &quot;found valid split during pass 0 at: 235&quot; when that String should never have a number greater than 200 as defined by the boolean logic in the If statement.</p>\n<p>Another vexxing issue is that the do-while loop ends while set=false. You can see this in the output text on the console. I cannot see why it doesn't increment tries++ and run the loop again with a new switch statement.</p>\n"}],"has_more":true,"quota_max":10000,"quota_remaining":9886,"page":248,"page_size":100}
