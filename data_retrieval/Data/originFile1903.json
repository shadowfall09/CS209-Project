{"items":[{"tags":["java","tomcat","java-8"],"comments":[{"owner":{"account_id":195854,"reputation":159194,"user_id":438992,"accept_rate":90,"display_name":"Dave Newton"},"score":0,"creation_date":1635443135,"post_id":69755751,"comment_id":123306569,"body_markdown":"I&#39;m not aware of any default behavior that randomly adds GET parameters to the response header.","body":"I&#39;m not aware of any default behavior that randomly adds GET parameters to the response header."},{"owner":{"account_id":4224410,"reputation":638,"user_id":3458271,"display_name":"user3458271"},"score":0,"creation_date":1635483260,"post_id":69755751,"comment_id":123315622,"body_markdown":"I am also not I am using apache camel for rest request and it is doing","body":"I am also not I am using apache camel for rest request and it is doing"}],"owner":{"account_id":4224410,"reputation":638,"user_id":3458271,"display_name":"user3458271"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":114,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1635431127,"creation_date":1635430613,"question_id":69755751,"body_markdown":"Today while working I came to know a weird issue which I never faced what happened one my client added query params in one of my post request and it gets added in response header and in my filter I am not adding that to header it automatically getting added\r\n:\r\n\r\n    http://localhost:9898/app/rest/data/fetch \r\n\r\nthis is my Post request but when user added query params to it:\r\n\r\n    http://localhost:9898/app/rest/data/fetch?Location=https://www.google.com/\r\n\r\nthis gets added in response header:\r\n\r\n    accept →*/*\r\n    accept-encoding →gzip, deflate, br\r\n    accept-language →en-US,en;q=0.9\r\n    auth-token →eyJhbGciOiJSU0EtT0FFUCIsImVuYyI6IkExMjhDQkMtSFMyNTYiLCJjdHkiOiJqd3QifQ.dFChYC8aWe7E0Dvsvy7cRRKlQnNqH3Yzdgkoaa3Eq3tuc-w4fGryP_H01dgx_PbNnXcGGZoiuZ73hB60RYTWC8A2zKB-hULWY09uVkaQcNrXlFIHg0Rf5nfa91uK-peABNe5Tsp7oEjZcrgGVYAZx5B3DzU9SKxLwai6QTf9zNHapIP043hBgxJWl5Pn-851K1I37SNp7pW5WolGDGH2xN6jUpc4L0QM759RbfIBw2uGVuZbR6v5OQ7ePbD3pj06mSL6XZkN0Dyiahfat0tse3SrAs73j_l6yXuQeyy0goypbtAANSg2O4R-1m_-0Hwq4Ew2zbwkSOJXnpWOc9HFSg.p4k4CsxQN2G_I_pCMbQiWg.BvbSir5Z2bY2T8Pgu1EOFN1Cbq4TEBRmotVzW9LsEhDCnZIgvI0elUu8gC2p0n2rldJ_01jKM4s2jcQwTW43enRqXJjilMBXctErB3Mv2uqwe4bRM92IlPpLNqJOHwna0lNOPzQeXA9lqTWgEpo8lGA2sPqRrl3oIS68OjmsDSc5T6PdXmcKq1n-j2214h8GogMVutNKSeZ7S3NmSD59ygeWZwAKqsSf8HDzJS7UqaXUDuDk1YW3EEco4OdKDlm4UBVys0JSRotSvbFl-FowvuCurNIJZoOuJY9DE7-cZdNMrKKZ8zAhp64V8CeSAJmIXetxyEoVCw9-K745XTPm9pzf3Jt1v3Cic0h92E3zFNzh9_Co8dQEw2CAhifKcnx1QXcG30X306iixK0lSJblKrQzRTTmSjtADu9C_KDqrO4y04edxcI6ARCDsHCF3GiiAxlkuueIqeXiLzonwBZrvSxcRrv2c4xiVkJQ7wimNJ58biuiWJ4p-59oCt3a-h8EsfMrlnJk7M_J0xIKNZdXE4QjuN-iR8rTr-IffF2XcSycTtALJB1AFOU7ZCNRYSenjHaE02_Hxu4xYfJ2HKoyTy30eQj8EhnlkZgYPPJ4MHKACTZboJBwdRV6uaxyrMc2uA7CNP3wSDCGnEBeVL2qXpebqF3uplTj_y0ZtQsH6eBTx4Pbh8-b7MfkQxlwtlpfICACf7C4qkYyF9dNUwHs6Q.Y7ZgeEyxZz86xAddlgH1mQ\r\n    breadcrumbid →ID-LAPTOP-3KEFOF60-60042-1635422818548-0-50\r\n    **Location →https://www.google.com/**\r\n\r\nHow can we avoid this as if user add something else it&#39;s get added to the headers:\r\n\r\n   http://localhost:9898/app/rest/data/fetch?SET-COOKIE=fdgfdgfdgdg\r\n\r\netc.\r\nI am simply allowing request:\r\n\r\n    public void doFilter(ServletRequest request, ServletResponse response, FilterChain chain)\r\n\t\t\tthrows IOException, ServletException {\r\n\r\n\t\tHttpServletRequest req = (HttpServletRequest) request;\r\n\t\tHttpServletResponse res = (HttpServletResponse) response;\r\n        chain.doFilter(request, response);\r\n\t\treturn;\r\n\r\n     }\r\n\r\nPlease help how can we prevent this kind of injections?\r\n\r\n ","title":"java prevent header, cookie injection?","body":"<p>Today while working I came to know a weird issue which I never faced what happened one my client added query params in one of my post request and it gets added in response header and in my filter I am not adding that to header it automatically getting added\n:</p>\n<pre><code>http://localhost:9898/app/rest/data/fetch \n</code></pre>\n<p>this is my Post request but when user added query params to it:</p>\n<pre><code>http://localhost:9898/app/rest/data/fetch?Location=https://www.google.com/\n</code></pre>\n<p>this gets added in response header:</p>\n<pre><code>accept →*/*\naccept-encoding →gzip, deflate, br\naccept-language →en-US,en;q=0.9\nauth-token →eyJhbGciOiJSU0EtT0FFUCIsImVuYyI6IkExMjhDQkMtSFMyNTYiLCJjdHkiOiJqd3QifQ.dFChYC8aWe7E0Dvsvy7cRRKlQnNqH3Yzdgkoaa3Eq3tuc-w4fGryP_H01dgx_PbNnXcGGZoiuZ73hB60RYTWC8A2zKB-hULWY09uVkaQcNrXlFIHg0Rf5nfa91uK-peABNe5Tsp7oEjZcrgGVYAZx5B3DzU9SKxLwai6QTf9zNHapIP043hBgxJWl5Pn-851K1I37SNp7pW5WolGDGH2xN6jUpc4L0QM759RbfIBw2uGVuZbR6v5OQ7ePbD3pj06mSL6XZkN0Dyiahfat0tse3SrAs73j_l6yXuQeyy0goypbtAANSg2O4R-1m_-0Hwq4Ew2zbwkSOJXnpWOc9HFSg.p4k4CsxQN2G_I_pCMbQiWg.BvbSir5Z2bY2T8Pgu1EOFN1Cbq4TEBRmotVzW9LsEhDCnZIgvI0elUu8gC2p0n2rldJ_01jKM4s2jcQwTW43enRqXJjilMBXctErB3Mv2uqwe4bRM92IlPpLNqJOHwna0lNOPzQeXA9lqTWgEpo8lGA2sPqRrl3oIS68OjmsDSc5T6PdXmcKq1n-j2214h8GogMVutNKSeZ7S3NmSD59ygeWZwAKqsSf8HDzJS7UqaXUDuDk1YW3EEco4OdKDlm4UBVys0JSRotSvbFl-FowvuCurNIJZoOuJY9DE7-cZdNMrKKZ8zAhp64V8CeSAJmIXetxyEoVCw9-K745XTPm9pzf3Jt1v3Cic0h92E3zFNzh9_Co8dQEw2CAhifKcnx1QXcG30X306iixK0lSJblKrQzRTTmSjtADu9C_KDqrO4y04edxcI6ARCDsHCF3GiiAxlkuueIqeXiLzonwBZrvSxcRrv2c4xiVkJQ7wimNJ58biuiWJ4p-59oCt3a-h8EsfMrlnJk7M_J0xIKNZdXE4QjuN-iR8rTr-IffF2XcSycTtALJB1AFOU7ZCNRYSenjHaE02_Hxu4xYfJ2HKoyTy30eQj8EhnlkZgYPPJ4MHKACTZboJBwdRV6uaxyrMc2uA7CNP3wSDCGnEBeVL2qXpebqF3uplTj_y0ZtQsH6eBTx4Pbh8-b7MfkQxlwtlpfICACf7C4qkYyF9dNUwHs6Q.Y7ZgeEyxZz86xAddlgH1mQ\nbreadcrumbid →ID-LAPTOP-3KEFOF60-60042-1635422818548-0-50\n**Location →https://www.google.com/**\n</code></pre>\n<p>How can we avoid this as if user add something else it's get added to the headers:</p>\n<p>http://localhost:9898/app/rest/data/fetch?SET-COOKIE=fdgfdgfdgdg</p>\n<p>etc.\nI am simply allowing request:</p>\n<pre><code>public void doFilter(ServletRequest request, ServletResponse response, FilterChain chain)\n        throws IOException, ServletException {\n\n    HttpServletRequest req = (HttpServletRequest) request;\n    HttpServletResponse res = (HttpServletResponse) response;\n    chain.doFilter(request, response);\n    return;\n\n }\n</code></pre>\n<p>Please help how can we prevent this kind of injections?</p>\n"},{"tags":["java","c#","android","visual-studio","xamarin.forms"],"comments":[{"owner":{"account_id":2826136,"reputation":594,"user_id":2637074,"accept_rate":88,"display_name":"CodingLumis"},"score":0,"creation_date":1635416439,"post_id":69751523,"comment_id":123294722,"body_markdown":"This might be being stripped out by the linker? What are your linker settings under Android Project properties -&gt; Android Options? Are you using any code shrinker etc.?","body":"This might be being stripped out by the linker? What are your linker settings under Android Project properties -&gt; Android Options? Are you using any code shrinker etc.?"},{"owner":{"account_id":22613678,"reputation":13,"user_id":16793460,"display_name":"Croatoan"},"score":0,"creation_date":1635417622,"post_id":69751523,"comment_id":123295233,"body_markdown":"All properties and options are default, shrinker is not used","body":"All properties and options are default, shrinker is not used"},{"owner":{"account_id":2826136,"reputation":594,"user_id":2637074,"accept_rate":88,"display_name":"CodingLumis"},"score":0,"creation_date":1635430260,"post_id":69751523,"comment_id":123300924,"body_markdown":"I just noticed your screenshots -- it looks like you have added Android-specific code in your MainPage.cs code behind which presumably is in your shared project? If you want to use Android-specific stuff it should be in your Android project. To call it from your MainPage code behind use the Xamarin Forms Dependency Service (https://learn.microsoft.com/en-us/xamarin/xamarin-forms/app-fundamentals/dependency-service/introduction)","body":"I just noticed your screenshots -- it looks like you have added Android-specific code in your MainPage.cs code behind which presumably is in your shared project? If you want to use Android-specific stuff it should be in your Android project. To call it from your MainPage code behind use the Xamarin Forms Dependency Service (<a href=\"https://learn.microsoft.com/en-us/xamarin/xamarin-forms/app-fundamentals/dependency-service/introduction\" rel=\"nofollow noreferrer\">learn.microsoft.com/en-us/xamarin/xamarin-forms/&hellip;</a>)"}],"answers":[{"tags":[],"owner":{"account_id":2826136,"reputation":594,"user_id":2637074,"accept_rate":88,"display_name":"CodingLumis"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1635431095,"creation_date":1635431095,"answer_id":69755885,"question_id":69751523,"body_markdown":"From the screen shots it looks like this code is part of the .NET standard assembly (shared project) which won&#39;t reference Mono Android. Instead, try using the [Xamarin Forms Dependency Service][1] to invoke the platform-specific things you want from shared code. See [my recreation of your code here][2].\r\n\r\n\r\n  [1]: https://learn.microsoft.com/en-us/xamarin/xamarin-forms/app-fundamentals/dependency-service/introduction\r\n  [2]: https://github.com/aharwood2/DependencyServiceExample","title":"Xamarin throws Java.Lang.ClassNotFoundException using CallRedirectionService","body":"<p>From the screen shots it looks like this code is part of the .NET standard assembly (shared project) which won't reference Mono Android. Instead, try using the <a href=\"https://learn.microsoft.com/en-us/xamarin/xamarin-forms/app-fundamentals/dependency-service/introduction\" rel=\"nofollow noreferrer\">Xamarin Forms Dependency Service</a> to invoke the platform-specific things you want from shared code. See <a href=\"https://github.com/aharwood2/DependencyServiceExample\" rel=\"nofollow noreferrer\">my recreation of your code here</a>.</p>\n"}],"owner":{"account_id":22613678,"reputation":13,"user_id":16793460,"display_name":"Croatoan"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":337,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":69755885,"answer_count":1,"score":0,"last_activity_date":1635431095,"creation_date":1635413230,"question_id":69751523,"body_markdown":"I created a new Mobile App Xamarin.Forms project using the blank template for this example. I am trying to use CallRedirectionService in my app, but the following exception is thrown. \r\n\r\n&gt; Java.Lang.ClassNotFoundException: crc64bf934172c93e128d.MyCallService ---&gt; Java.Lang.NoClassDefFoundError: Failed resolution of: Landroid/telecom/CallRedirectionService; ---&gt; Java.Lang.ClassNotFoundException: Didn&#39;t find class &quot;android.telecom.CallRedirectionService&quot; on path: DexPathList[[zip file &quot;/data/app/com.companyname.xam-8bL_MB0IWItrj3Z69Zwvtw==/base.apk&quot;],nativeLibraryDirectories=[/data/app/com.companyname.xam-8bL_MB0IWItrj3Z69Zwvtw==/lib/x86, /data/app/com.companyname.xam-8bL_MB0IWItrj3Z69Zwvtw==/base.apk!/lib/x86, /system/lib]]\r\n\r\n\r\n\r\n    using Android.Telecom;\r\n    using Xamarin.Forms;    \r\n    namespace xam\r\n        {\r\n            public class MyCallService : CallRedirectionService\r\n            {\r\n                public override void OnPlaceCall(Android.Net.Uri handle, PhoneAccountHandle initialPhoneAccount, bool allowInteractiveResponse)\r\n                {\r\n                    //throw new NotImplementedException();\r\n                }\r\n            }\r\n            public partial class MainPage : ContentPage\r\n            {\r\n                public MainPage()\r\n                {\r\n                    var callCervice = new MyCallService();\r\n                    InitializeComponent();\r\n                }\r\n            }\r\n        }\r\n\r\nHow can i solve it, since other service doesnt throw any exceptions \r\n\r\ne.g. \r\n\r\n    public class CallPreventer : InCallService\r\n    {\r\n        public override void OnCallAdded(Call call)\r\n        {\r\n            call.Disconnect();\r\n            base.OnCallAdded(call);\r\n        }\r\n    }\r\n\r\n   \r\n[Android options][1]\r\n\r\n[Exception][2]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/zSvKh.png\r\n  [2]: https://i.stack.imgur.com/pU39v.png","title":"Xamarin throws Java.Lang.ClassNotFoundException using CallRedirectionService","body":"<p>I created a new Mobile App Xamarin.Forms project using the blank template for this example. I am trying to use CallRedirectionService in my app, but the following exception is thrown.</p>\n<blockquote>\n<p>Java.Lang.ClassNotFoundException: crc64bf934172c93e128d.MyCallService ---&gt; Java.Lang.NoClassDefFoundError: Failed resolution of: Landroid/telecom/CallRedirectionService; ---&gt; Java.Lang.ClassNotFoundException: Didn't find class &quot;android.telecom.CallRedirectionService&quot; on path: DexPathList[[zip file &quot;/data/app/com.companyname.xam-8bL_MB0IWItrj3Z69Zwvtw==/base.apk&quot;],nativeLibraryDirectories=[/data/app/com.companyname.xam-8bL_MB0IWItrj3Z69Zwvtw==/lib/x86, /data/app/com.companyname.xam-8bL_MB0IWItrj3Z69Zwvtw==/base.apk!/lib/x86, /system/lib]]</p>\n</blockquote>\n<pre><code>using Android.Telecom;\nusing Xamarin.Forms;    \nnamespace xam\n    {\n        public class MyCallService : CallRedirectionService\n        {\n            public override void OnPlaceCall(Android.Net.Uri handle, PhoneAccountHandle initialPhoneAccount, bool allowInteractiveResponse)\n            {\n                //throw new NotImplementedException();\n            }\n        }\n        public partial class MainPage : ContentPage\n        {\n            public MainPage()\n            {\n                var callCervice = new MyCallService();\n                InitializeComponent();\n            }\n        }\n    }\n</code></pre>\n<p>How can i solve it, since other service doesnt throw any exceptions</p>\n<p>e.g.</p>\n<pre><code>public class CallPreventer : InCallService\n{\n    public override void OnCallAdded(Call call)\n    {\n        call.Disconnect();\n        base.OnCallAdded(call);\n    }\n}\n</code></pre>\n<p><a href=\"https://i.stack.imgur.com/zSvKh.png\" rel=\"nofollow noreferrer\">Android options</a></p>\n<p><a href=\"https://i.stack.imgur.com/pU39v.png\" rel=\"nofollow noreferrer\">Exception</a></p>\n"},{"tags":["java","android","firebase","firebase-cloud-messaging"],"answers":[{"tags":[],"owner":{"account_id":72426,"reputation":573714,"user_id":209103,"accept_rate":73,"display_name":"Frank van Puffelen"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1635430858,"creation_date":1635430858,"answer_id":69755825,"question_id":69752344,"body_markdown":"If you ran the app on the device before adding the `MyFirebaseMessagingService` code, it probably already generated a token then. Adding the `MyFirebaseMessagingService` does not generate a new token, so your  `onNewToken` will not be called.\r\n\r\nThe two options to get the token in that case are:\r\n\r\n1. Call `FirebaseMessaging.getInstance().getToken()` from (for example) you main activity and call the same `sendRegistrationToServer` there.\r\n2. Delete the app and its data after you added the `FirebaseMessaging.getInstance().getToken()` code, and reinstall the app. Deleting the data deletes the token, so then when you run the app it will generate a new token and call your `onNewToken`.","title":"Firebase registration token is not showing in Android Studio logcat","body":"<p>If you ran the app on the device before adding the <code>MyFirebaseMessagingService</code> code, it probably already generated a token then. Adding the <code>MyFirebaseMessagingService</code> does not generate a new token, so your  <code>onNewToken</code> will not be called.</p>\n<p>The two options to get the token in that case are:</p>\n<ol>\n<li>Call <code>FirebaseMessaging.getInstance().getToken()</code> from (for example) you main activity and call the same <code>sendRegistrationToServer</code> there.</li>\n<li>Delete the app and its data after you added the <code>FirebaseMessaging.getInstance().getToken()</code> code, and reinstall the app. Deleting the data deletes the token, so then when you run the app it will generate a new token and call your <code>onNewToken</code>.</li>\n</ol>\n"}],"owner":{"account_id":23169905,"reputation":3,"user_id":17269295,"display_name":"Virgil"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":798,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":69755825,"answer_count":1,"score":0,"last_activity_date":1635430858,"creation_date":1635416513,"question_id":69752344,"body_markdown":"I am using the Android studio Arctic Fox version. I need to implement an automated notification app that is going to send notifications by date. I am running my apps on an actual device with the 6.0.1 android version. I have connected fcm and set up the dependencies as well. But token is not showing on logcat. Also registered the app in firebase. Any ideas why this is happening?\r\n\r\nbuild:gradle(:app)\r\n\r\n```\r\nplugins {\r\n    id &#39;com.android.application&#39;\r\n    id &#39;com.google.gms.google-services&#39;\r\n}\r\n\r\nandroid {\r\n    compileSdk 31\r\n\r\n    defaultConfig {\r\n        applicationId &quot;com.example.f1&quot;\r\n        minSdk 21\r\n        targetSdk 31\r\n        versionCode 1\r\n        versionName &quot;1.0&quot;\r\n\r\n        testInstrumentationRunner &quot;androidx.test.runner.AndroidJUnitRunner&quot;\r\n    }\r\n\r\n    buildTypes {\r\n        release {\r\n            minifyEnabled false\r\n            proguardFiles getDefaultProguardFile(&#39;proguard-android-optimize.txt&#39;), &#39;proguard-rules.pro&#39;\r\n        }\r\n    }\r\n    compileOptions {\r\n        sourceCompatibility JavaVersion.VERSION_1_8\r\n        targetCompatibility JavaVersion.VERSION_1_8\r\n    }\r\n}\r\n\r\ndependencies {\r\n\r\n    implementation &#39;androidx.appcompat:appcompat:1.3.1&#39;\r\n    implementation &#39;com.google.android.material:material:1.4.0&#39;\r\n    implementation &#39;androidx.constraintlayout:constraintlayout:2.1.1&#39;\r\n    implementation &#39;com.google.firebase:firebase-messaging:22.0.0&#39;\r\n    testImplementation &#39;junit:junit:4.+&#39;\r\n    androidTestImplementation &#39;androidx.test.ext:junit:1.1.3&#39;\r\n    androidTestImplementation &#39;androidx.test.espresso:espresso-core:3.4.0&#39;\r\n}\r\n```\r\nbuild:gradle(module)\r\n```\r\n  dependencies {\r\n        classpath &quot;com.android.tools.build:gradle:7.0.2&quot;\r\n        classpath &#39;com.google.gms:google-services:4.3.10&#39;\r\n\r\n        // NOTE: Do not place your application dependencies here; they belong\r\n        // in the individual module build.gradle files\r\n    }\r\n}\r\n\r\n\r\n```\r\n    \r\nmanifest.xml\r\n    \r\n```\r\n&lt;service android:name=&quot;.MyFirebaseMessagingService&quot;\r\n            android:exported=&quot;false&quot;&gt;\r\n            &lt;intent-filter&gt;\r\n                &lt;action android:name=&quot;com.google.firebase.INSTANCE_ID_EVENT&quot;/&gt;\r\n            &lt;/intent-filter&gt;\r\n        &lt;/service&gt;\r\n\r\n```\r\n\r\nMyFirebaseMessagingService\r\n\r\n```\r\npublic class MyFirebaseMessagingService extends FirebaseMessagingService {\r\n\r\n    @Override\r\n    public void onNewToken(@NonNull String s)\r\n    {\r\n        super.onNewToken(s);\r\n        Log.d(&quot;My token&quot;, &quot;Refreshed Token&quot;+s);\r\n        sendRegistrationToServer(s);\r\n    }\r\n\r\n    private void sendRegistrationToServer(String s) {\r\n    }\r\n    \r\n}\r\n\r\n```\r\n","title":"Firebase registration token is not showing in Android Studio logcat","body":"<p>I am using the Android studio Arctic Fox version. I need to implement an automated notification app that is going to send notifications by date. I am running my apps on an actual device with the 6.0.1 android version. I have connected fcm and set up the dependencies as well. But token is not showing on logcat. Also registered the app in firebase. Any ideas why this is happening?</p>\n<p>build:gradle(:app)</p>\n<pre><code>plugins {\n    id 'com.android.application'\n    id 'com.google.gms.google-services'\n}\n\nandroid {\n    compileSdk 31\n\n    defaultConfig {\n        applicationId &quot;com.example.f1&quot;\n        minSdk 21\n        targetSdk 31\n        versionCode 1\n        versionName &quot;1.0&quot;\n\n        testInstrumentationRunner &quot;androidx.test.runner.AndroidJUnitRunner&quot;\n    }\n\n    buildTypes {\n        release {\n            minifyEnabled false\n            proguardFiles getDefaultProguardFile('proguard-android-optimize.txt'), 'proguard-rules.pro'\n        }\n    }\n    compileOptions {\n        sourceCompatibility JavaVersion.VERSION_1_8\n        targetCompatibility JavaVersion.VERSION_1_8\n    }\n}\n\ndependencies {\n\n    implementation 'androidx.appcompat:appcompat:1.3.1'\n    implementation 'com.google.android.material:material:1.4.0'\n    implementation 'androidx.constraintlayout:constraintlayout:2.1.1'\n    implementation 'com.google.firebase:firebase-messaging:22.0.0'\n    testImplementation 'junit:junit:4.+'\n    androidTestImplementation 'androidx.test.ext:junit:1.1.3'\n    androidTestImplementation 'androidx.test.espresso:espresso-core:3.4.0'\n}\n</code></pre>\n<p>build:gradle(module)</p>\n<pre><code>  dependencies {\n        classpath &quot;com.android.tools.build:gradle:7.0.2&quot;\n        classpath 'com.google.gms:google-services:4.3.10'\n\n        // NOTE: Do not place your application dependencies here; they belong\n        // in the individual module build.gradle files\n    }\n}\n\n\n</code></pre>\n<p>manifest.xml</p>\n<pre><code>&lt;service android:name=&quot;.MyFirebaseMessagingService&quot;\n            android:exported=&quot;false&quot;&gt;\n            &lt;intent-filter&gt;\n                &lt;action android:name=&quot;com.google.firebase.INSTANCE_ID_EVENT&quot;/&gt;\n            &lt;/intent-filter&gt;\n        &lt;/service&gt;\n\n</code></pre>\n<p>MyFirebaseMessagingService</p>\n<pre><code>public class MyFirebaseMessagingService extends FirebaseMessagingService {\n\n    @Override\n    public void onNewToken(@NonNull String s)\n    {\n        super.onNewToken(s);\n        Log.d(&quot;My token&quot;, &quot;Refreshed Token&quot;+s);\n        sendRegistrationToServer(s);\n    }\n\n    private void sendRegistrationToServer(String s) {\n    }\n    \n}\n\n</code></pre>\n"},{"tags":["java","out-of-memory","heap-memory","pentaho"],"comments":[{"owner":{"account_id":3304005,"reputation":12085,"user_id":2779389,"accept_rate":77,"display_name":"Marlon Abeykoon"},"score":0,"creation_date":1442591891,"post_id":32653579,"comment_id":53159148,"body_markdown":"Hope you restarted spoon after changing the value. Try changing it to higher value. Cos I have encountered such a thing which fixed after increasing to 2048M.","body":"Hope you restarted spoon after changing the value. Try changing it to higher value. Cos I have encountered such a thing which fixed after increasing to 2048M."},{"owner":{"account_id":3606080,"reputation":708,"user_id":3008216,"accept_rate":63,"display_name":"Karthi"},"score":0,"creation_date":1442594809,"post_id":32653579,"comment_id":53160676,"body_markdown":"I did this and even increased to 4096M..still getting the same error","body":"I did this and even increased to 4096M..still getting the same error"},{"owner":{"account_id":5194995,"reputation":11184,"user_id":4845799,"accept_rate":75,"display_name":"Naga"},"score":0,"creation_date":1442655176,"post_id":32653579,"comment_id":53178874,"body_markdown":"Did you try to change the commit rows value ?","body":"Did you try to change the commit rows value ?"},{"owner":{"account_id":1986559,"reputation":9239,"user_id":1781611,"accept_rate":55,"display_name":"Jay"},"score":1,"creation_date":1442763125,"post_id":32653579,"comment_id":53206672,"body_markdown":"Try to increase the memory as much as possible according to available RAM. Could be the app is heavy or there are memory leaks... Or check the logs to see if actualy applied the -Xmx that you gave ...and any other errors in logs..","body":"Try to increase the memory as much as possible according to available RAM. Could be the app is heavy or there are memory leaks... Or check the logs to see if actualy applied the -Xmx that you gave ...and any other errors in logs.."}],"answers":[{"tags":[],"owner":{"account_id":153878,"reputation":2055,"user_id":369446,"accept_rate":100,"display_name":"Michael Shopsin"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1635430772,"creation_date":1635430772,"answer_id":69755808,"question_id":32653579,"body_markdown":"The following Java options might help diagnose your problem:\r\n\r\n    -XX:+UnlockDiagnosticVMOptions\r\n   \r\nThe `UnlockDiagnosticVMOptions` options logs the garbage collection actions so that you can see what happens before your out of memory error. I use the following options to help make garbage collection run better for my Java server:\r\n\r\n    -XX:MaxPermSize=512m -XX:NewSize=512m -XX:MaxNewSize=512m -XX:MaxPermSize=512m -XX:+UseConcMarkSweepGC -XX:+UseParNewGC -XX:+CMSParallelRemarkEnabled -XX:ParGCCardsPerStrideChunk=4096","title":"Java Heap Space error In Pentaho","body":"<p>The following Java options might help diagnose your problem:</p>\n<pre><code>-XX:+UnlockDiagnosticVMOptions\n</code></pre>\n<p>The <code>UnlockDiagnosticVMOptions</code> options logs the garbage collection actions so that you can see what happens before your out of memory error. I use the following options to help make garbage collection run better for my Java server:</p>\n<pre><code>-XX:MaxPermSize=512m -XX:NewSize=512m -XX:MaxNewSize=512m -XX:MaxPermSize=512m -XX:+UseConcMarkSweepGC -XX:+UseParNewGC -XX:+CMSParallelRemarkEnabled -XX:ParGCCardsPerStrideChunk=4096\n</code></pre>\n"}],"owner":{"account_id":3606080,"reputation":708,"user_id":3008216,"accept_rate":63,"display_name":"Karthi"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":8603,"favorite_count":0,"down_vote_count":0,"up_vote_count":4,"accepted_answer_id":69755808,"answer_count":1,"score":4,"last_activity_date":1635430772,"creation_date":1442583761,"question_id":32653579,"body_markdown":"I am using pentaho pdi version 4.1. I am getting `java.lang.OutOfMemoryError: Java heap space` error. My input is salesforce step and it would have more than 40000 rows. I tried setting `-Xmx` JVM option [in both spoon and kitchen] from `512M` to `1048M`. I got the same failure again.","title":"Java Heap Space error In Pentaho","body":"<p>I am using pentaho pdi version 4.1. I am getting <code>java.lang.OutOfMemoryError: Java heap space</code> error. My input is salesforce step and it would have more than 40000 rows. I tried setting <code>-Xmx</code> JVM option [in both spoon and kitchen] from <code>512M</code> to <code>1048M</code>. I got the same failure again.</p>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":11939869,"reputation":814,"user_id":8737029,"display_name":"Vincent Passau"},"score":1,"creation_date":1635403148,"post_id":69749283,"comment_id":123289284,"body_markdown":"Hello and welcome to stackoverflow, can you mark by a comment the line where the error happened ?","body":"Hello and welcome to stackoverflow, can you mark by a comment the line where the error happened ?"},{"owner":{"account_id":47283,"reputation":703817,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"score":3,"creation_date":1635403281,"post_id":69749283,"comment_id":123289329,"body_markdown":"The code in your question compiles for me (javac 1.8.0_292).","body":"The code in your question compiles for me (javac 1.8.0_292)."},{"owner":{"account_id":4362282,"reputation":92954,"user_id":3558960,"accept_rate":60,"display_name":"Robby Cornelissen"},"score":2,"creation_date":1635403288,"post_id":69749283,"comment_id":123289332,"body_markdown":"Code compiles fine. Logic is incorrect, but compiles fine.","body":"Code compiles fine. Logic is incorrect, but compiles fine."},{"owner":{"account_id":23019255,"reputation":320,"user_id":17140506,"display_name":"Digsb"},"score":1,"creation_date":1635403376,"post_id":69749283,"comment_id":123289359,"body_markdown":"Hello,\n\nCode compiles fine for me, Did you make sure the file is saved correctly?","body":"Hello,  Code compiles fine for me, Did you make sure the file is saved correctly?"}],"answers":[{"tags":[],"owner":{"account_id":16812688,"reputation":142,"user_id":12155325,"display_name":"dilbert2219"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1635430598,"creation_date":1635404137,"answer_id":69749510,"question_id":69749283,"body_markdown":"I made some changes to it.\r\n\r\nnice game :)\r\n\r\n```\r\npublic class NGG {\r\n    public static void main(String[] args) {\r\n        NGG ngg = new NGG();\r\n        ngg.game();\r\n    }\r\n\r\n   private void game(){\r\n       Scanner scan = new Scanner(System.in);\r\n\r\n       int enteredNumber, guessedNumber;\r\n       System.out.println(&quot;\\n  Guess number between 0 - 10: &quot;);\r\n       enteredNumber = scan.nextInt();\r\n\r\n       guessedNumber = ((int)(Math.random()*10));\r\n       System.out.println(guessedNumber);\r\n\r\n       if (guessedNumber == enteredNumber) {\r\n           System.out.println(&quot;Victory&quot;);\r\n       } else {\r\n           System.out.println(&quot;Lost: number was &quot; + guessedNumber);\r\n       }\r\n    }\r\n\r\n}\r\n\r\n```\r\n\r\n\r\ndid some minor refactoring and updated the logic to check if the guessed number/random number is same as the entered number then you get &quot;victory&quot; otherwise you Lose and shows you what the guessed/random number was.","title":"Cant find the issue here, help please","body":"<p>I made some changes to it.</p>\n<p>nice game :)</p>\n<pre><code>public class NGG {\n    public static void main(String[] args) {\n        NGG ngg = new NGG();\n        ngg.game();\n    }\n\n   private void game(){\n       Scanner scan = new Scanner(System.in);\n\n       int enteredNumber, guessedNumber;\n       System.out.println(&quot;\\n  Guess number between 0 - 10: &quot;);\n       enteredNumber = scan.nextInt();\n\n       guessedNumber = ((int)(Math.random()*10));\n       System.out.println(guessedNumber);\n\n       if (guessedNumber == enteredNumber) {\n           System.out.println(&quot;Victory&quot;);\n       } else {\n           System.out.println(&quot;Lost: number was &quot; + guessedNumber);\n       }\n    }\n\n}\n\n</code></pre>\n<p>did some minor refactoring and updated the logic to check if the guessed number/random number is same as the entered number then you get &quot;victory&quot; otherwise you Lose and shows you what the guessed/random number was.</p>\n"}],"owner":{"account_id":23168256,"reputation":3,"user_id":17267855,"display_name":"Legend7454_"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":69,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"closed_date":1635414684,"accepted_answer_id":69749510,"answer_count":1,"score":0,"last_activity_date":1635430598,"creation_date":1635402907,"question_id":69749283,"body_markdown":"Multiple markers at this line \t- Syntax error, insert &quot;;&quot; to complete Statement \t- The left-hand side of an assignment must be a variable \t- Syntax error, insert &quot;AssignmentOperator Expression&quot; to complete  \t Assignment \t- Syntax error on token &quot;else&quot;, invalid (\r\n\r\n```java\r\nimport java.util.Scanner;\r\n\r\npublic class NGG {\r\n\r\n\tpublic static void main(String[] args) {\r\n\t\tScanner scan = new Scanner(System.in);\r\n\t\t\r\n\t\tint x1, x2;\r\n\t\tSystem.out.println(&quot;&quot;);\r\n\t\tSystem.out.println(&quot;\\n  Guess X from 10 - 0: &quot;);\r\n\t\tx1 = scan.nextInt();\r\n\t\t\r\n\t\tSystem.out.println(&quot;&quot;);\r\n\t\tx2 = ((int)(Math.random()*10));\r\n\t\tSystem.out.println(x2);\r\n\t\t\r\n\t\tif (x2 == x1) {\r\n\t\tSystem.out.println(&quot;Victory&quot;);\r\n\t\t} else if(x2 &gt; x1 &amp;&amp; x2 &lt; x1) {\r\n\t\tSystem.out.println(&quot;Lose&quot;);\r\n\t\t}\r\n\r\n\t}\r\n\r\n}\r\n```","title":"Cant find the issue here, help please","body":"<p>Multiple markers at this line   - Syntax error, insert &quot;;&quot; to complete Statement    - The left-hand side of an assignment must be a variable    - Syntax error, insert &quot;AssignmentOperator Expression&quot; to complete       Assignment     - Syntax error on token &quot;else&quot;, invalid (</p>\n<pre class=\"lang-java prettyprint-override\"><code>import java.util.Scanner;\n\npublic class NGG {\n\n    public static void main(String[] args) {\n        Scanner scan = new Scanner(System.in);\n        \n        int x1, x2;\n        System.out.println(&quot;&quot;);\n        System.out.println(&quot;\\n  Guess X from 10 - 0: &quot;);\n        x1 = scan.nextInt();\n        \n        System.out.println(&quot;&quot;);\n        x2 = ((int)(Math.random()*10));\n        System.out.println(x2);\n        \n        if (x2 == x1) {\n        System.out.println(&quot;Victory&quot;);\n        } else if(x2 &gt; x1 &amp;&amp; x2 &lt; x1) {\n        System.out.println(&quot;Lose&quot;);\n        }\n\n    }\n\n}\n</code></pre>\n"},{"tags":["java","kotlin","swagger","openapi"],"answers":[{"tags":[],"owner":{"account_id":8954819,"reputation":1401,"user_id":8005819,"display_name":"Вячеслав Чернышов"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1635430425,"creation_date":1635430425,"answer_id":69755706,"question_id":69754290,"body_markdown":"Solution:\r\n\r\n    @Bean\r\n        fun openApi(): OpenAPI = OpenAPI().info(Info().title(&quot;Test title&quot;))\r\n\r\n    @Bean\r\n    fun adminApi(): GroupedOpenApi =\r\n        GroupedOpenApi\r\n            .builder()\r\n            .group(&quot;admin&quot;)\r\n            .pathsToMatch(&quot;/admin/**&quot;)\r\n            .build()\r\n\r\n    @Bean\r\n    fun internalApi(): GroupedOpenApi =\r\n        GroupedOpenApi\r\n            .builder()\r\n            .group(&quot;internal&quot;)\r\n            .pathsToMatch(&quot;/internal/**&quot;)\r\n            .build()\r\n\r\n    @Bean\r\n    fun apiApi(): GroupedOpenApi =\r\n        GroupedOpenApi\r\n            .builder()\r\n            .group(&quot;api&quot;)\r\n            .pathsToMatch(&quot;/api/**&quot;)\r\n            .build()\r\n\r\nthan, you can choose group this way:\r\n\r\n[![enter image description here][1]][1]\r\n\r\nand only endpoints from group path shall appear.\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/bPsy9.png","title":"Swagger OpenAPI: How to implement separate UI for each package?","body":"<p>Solution:</p>\n<pre><code>@Bean\n    fun openApi(): OpenAPI = OpenAPI().info(Info().title(&quot;Test title&quot;))\n\n@Bean\nfun adminApi(): GroupedOpenApi =\n    GroupedOpenApi\n        .builder()\n        .group(&quot;admin&quot;)\n        .pathsToMatch(&quot;/admin/**&quot;)\n        .build()\n\n@Bean\nfun internalApi(): GroupedOpenApi =\n    GroupedOpenApi\n        .builder()\n        .group(&quot;internal&quot;)\n        .pathsToMatch(&quot;/internal/**&quot;)\n        .build()\n\n@Bean\nfun apiApi(): GroupedOpenApi =\n    GroupedOpenApi\n        .builder()\n        .group(&quot;api&quot;)\n        .pathsToMatch(&quot;/api/**&quot;)\n        .build()\n</code></pre>\n<p>than, you can choose group this way:</p>\n<p><a href=\"https://i.stack.imgur.com/bPsy9.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/bPsy9.png\" alt=\"enter image description here\" /></a></p>\n<p>and only endpoints from group path shall appear.</p>\n"}],"owner":{"account_id":8954819,"reputation":1401,"user_id":8005819,"display_name":"Вячеслав Чернышов"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":735,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":69755706,"answer_count":1,"score":2,"last_activity_date":1635430425,"creation_date":1635424871,"question_id":69754290,"body_markdown":"I have 3 APIs, e.g. `/api`, `/internal` (for internal services) and `/admin` (for administration), every of them in separate package:\r\n\r\n    controller\r\n       |\r\n        --api\r\n       |\r\n        --internal\r\n       |\r\n        --admin\r\n\r\nThan, I need implement separate Swagger UI for each package with separate path, e.g.:\r\n\r\n    http://localhost:8080/api/swagger-ui.html\r\n    http://localhost:8080/admin/swagger-ui.html\r\n    http://localhost:8080/internal/swagger-ui.html\r\n\r\nwith only controllers, located in specific path.\r\nFor now, I have simple bean, like this:\r\n\r\n    @Bean\r\n    fun openApi(): OpenAPI = OpenAPI().info(Info().title(&quot;Test title&quot;))","title":"Swagger OpenAPI: How to implement separate UI for each package?","body":"<p>I have 3 APIs, e.g. <code>/api</code>, <code>/internal</code> (for internal services) and <code>/admin</code> (for administration), every of them in separate package:</p>\n<pre><code>controller\n   |\n    --api\n   |\n    --internal\n   |\n    --admin\n</code></pre>\n<p>Than, I need implement separate Swagger UI for each package with separate path, e.g.:</p>\n<pre><code>http://localhost:8080/api/swagger-ui.html\nhttp://localhost:8080/admin/swagger-ui.html\nhttp://localhost:8080/internal/swagger-ui.html\n</code></pre>\n<p>with only controllers, located in specific path.\nFor now, I have simple bean, like this:</p>\n<pre><code>@Bean\nfun openApi(): OpenAPI = OpenAPI().info(Info().title(&quot;Test title&quot;))\n</code></pre>\n"},{"tags":["java","swing","model-view-controller","cardlayout"],"comments":[{"owner":{"account_id":114128,"reputation":50422,"user_id":300257,"accept_rate":89,"display_name":"Gilbert Le Blanc"},"score":1,"creation_date":1635418819,"post_id":69749806,"comment_id":123295775,"body_markdown":"Your controllers should be `JButton` `ActionListeners` or other action classes.  Other than that, you have one application model that consists of one or more plain Java getter/setter classes, and as many view classes as you wish.  One class for each `JPanel` and one for the `JFrame` is fine.  See my [Simple Drawing readme](https://github.com/ggleblanc2/simple-drawing) for a more detailed explanation of Swing MVC.","body":"Your controllers should be <code>JButton</code> <code>ActionListeners</code> or other action classes.  Other than that, you have one application model that consists of one or more plain Java getter/setter classes, and as many view classes as you wish.  One class for each <code>JPanel</code> and one for the <code>JFrame</code> is fine.  See my <a href=\"https://github.com/ggleblanc2/simple-drawing\" rel=\"nofollow noreferrer\">Simple Drawing readme</a> for a more detailed explanation of Swing MVC."},{"owner":{"account_id":22905292,"reputation":78,"user_id":17043451,"display_name":"user192837"},"score":0,"creation_date":1635425424,"post_id":69749806,"comment_id":123298525,"body_markdown":"Could you give me an example, based on mine, with corrections? I couldn&#39;t find an example anywhere.","body":"Could you give me an example, based on mine, with corrections? I couldn&#39;t find an example anywhere."},{"owner":{"account_id":114128,"reputation":50422,"user_id":300257,"accept_rate":89,"display_name":"Gilbert Le Blanc"},"score":0,"creation_date":1635425938,"post_id":69749806,"comment_id":123298795,"body_markdown":"There is literally a link to a Java Swing MVC example in my first comment.  You didn&#39;t provide a [mre] in your question, just bits of code, so no, I can&#39;t take your code and correct it.","body":"There is literally a link to a Java Swing MVC example in my first comment.  You didn&#39;t provide a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> in your question, just bits of code, so no, I can&#39;t take your code and correct it."},{"owner":{"account_id":22905292,"reputation":78,"user_id":17043451,"display_name":"user192837"},"score":0,"creation_date":1635430530,"post_id":69749806,"comment_id":123301062,"body_markdown":"I changed my question by entering more information.","body":"I changed my question by entering more information."},{"owner":{"account_id":114128,"reputation":50422,"user_id":300257,"accept_rate":89,"display_name":"Gilbert Le Blanc"},"score":1,"creation_date":1635432286,"post_id":69749806,"comment_id":123301899,"body_markdown":"Now you&#39;re asking for someone to do your work for you.  If you have a specific question about the MVC pattern, ask that specific question.  There are entire books that teach you how to use Swing and use the MVC pattern.","body":"Now you&#39;re asking for someone to do your work for you.  If you have a specific question about the MVC pattern, ask that specific question.  There are entire books that teach you how to use Swing and use the MVC pattern."},{"owner":{"account_id":22905292,"reputation":78,"user_id":17043451,"display_name":"user192837"},"score":0,"creation_date":1635436179,"post_id":69749806,"comment_id":123303753,"body_markdown":"I thought that like me who could not find a concrete example of how to use the MVC pattern, there could be other people who looking at this page could find the answer.\nAlso because I have not seen examples of MVC through Swing that would allow you to navigate between the various pages. Thanks anyway for the time taken.","body":"I thought that like me who could not find a concrete example of how to use the MVC pattern, there could be other people who looking at this page could find the answer. Also because I have not seen examples of MVC through Swing that would allow you to navigate between the various pages. Thanks anyway for the time taken."}],"owner":{"account_id":22905292,"reputation":78,"user_id":17043451,"display_name":"user192837"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":133,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1635430410,"creation_date":1635405806,"question_id":69749806,"body_markdown":"I have a Java Swing application with a single large class that via CardLayout replaces the various JPanels based on the various buttons. Each JPanel is built in its own class. I would like to divide the various JPanels into different Model-View-Controllers. My application has for example a welcome page with a button that goes to the login page, the login page can go to three different pages: forgotten password, registration and access to the personal page. All pages can go back. How could I do?\r\n\r\nFor the moment I&#39;ve done something like this:\r\n\r\nModel:\r\n```\r\npublic record Model(String name,String surname) {}\r\n```\r\nMainView:\r\n```\r\nimport javax.swing.*;\r\nimport java.awt.*;\r\n\r\npublic class MainView {\r\n    JFrame frame;\r\n    JPanel cardLayoutPanel;\r\n    JPanel masterPanel;\r\n    CardLayout cl;\r\n    MainView(){\r\n        frame = new JFrame(&quot;Frame&quot;);\r\n        cardLayoutPanel = new JPanel();\r\n        cardLayoutPanel.setLayout(new CardLayout());\r\n        cl=(CardLayout) cardLayoutPanel.getLayout();\r\n\r\n        masterPanel = new JPanel();\r\n        masterPanel.setLayout(new BorderLayout());\r\n        masterPanel.add(cardLayoutPanel);\r\n\r\n        frame.getContentPane().add(masterPanel);\r\n        frame.setResizable(true);\r\n        frame.setSize(300, 150);\r\n        frame.setDefaultCloseOperation(WindowConstants.EXIT_ON_CLOSE);\r\n        frame.setLocationRelativeTo(null);\r\n        frame.setVisible(true);\r\n    }\r\n    public static void main(String[] args) {\r\n        MainView viewM= new MainView();\r\n        MainController controllerM=new MainController(viewM);\r\n        SignUpView viewS = new SignUpView();\r\n        SignUpController controllerR=new SignUpController(controllerM,viewS);\r\n        controllerM.addPanel(viewS.panel,&quot;SIGNUP&quot;);\r\n        controllerM.showPanel(&quot;SIGNUP&quot;);\r\n    }\r\n}\r\n```\r\nMainController:\r\n```\r\nimport javax.swing.*;\r\n\r\npublic class MainController {\r\n    MainView view;\r\n    MainController(MainView view){\r\n        this.view=view;\r\n    }\r\n    void addPanel(JPanel panel, String name){\r\n        view.cardLayoutPanel.add(panel,name);\r\n    }\r\n    void showPanel(String panel){\r\n        view.cl.show(view.cardLayoutPanel,panel);\r\n    }\r\n}\r\n```\r\nSignUpView:\r\n```\r\nimport javax.swing.*;\r\n\r\npublic class SignUpView {\r\n    JPanel panel;\r\n    JTextField name,surname;\r\n    JButton submit;\r\n    SignUpView(){\r\n        panel=new JPanel();\r\n        name=new JTextField(20);\r\n        surname=new JTextField(20);\r\n        submit=new JButton(&quot;submit&quot;);\r\n        panel.add(name);\r\n        panel.add(surname);\r\n        panel.add(submit);\r\n    }\r\n}\r\n```\r\nSignUpController:\r\n```\r\npublic class SignUpController{\r\n    SignUpController(MainController main,SignUpView view){\r\n            PersonalAreaView viewPA=new \r\nPersonalAreaView();\r\n            PersonalAreaController controllerPA = new PersonalAreaController(main,viewPA);\r\n            main.addPanel(viewPA.panel,&quot;PERSONALAREA&quot;);\r\n        view.submit.addActionListener(e -&gt; {\r\n            Model model=new Model(view.name.getText(),view.surname.getText());\r\n            controllerPA.setValue(model);\r\n            main.showPanel(&quot;PERSONALAREA&quot;);\r\n        });\r\n    }\r\n}\r\n```\r\nPersonalAreaView:\r\n```\r\nimport javax.swing.*;\r\n\r\npublic class PersonalAreaView{\r\n    JPanel panel;\r\n    JLabel name,surname;\r\n    JButton back;\r\n    PersonalAreaView(){\r\n        panel=new JPanel();\r\n        name=new JLabel();\r\n        surname=new JLabel();\r\n        back=new JButton(&quot;Back&quot;);\r\n        panel.add(name);\r\n        panel.add(surname);\r\n        panel.add(back);\r\n    }\r\n}\r\n```\r\nPersonalAreaController:\r\n```\r\npublic class PersonalAreaController{\r\n    PersonalAreaView view;\r\n    PersonalAreaController(MainController main,PersonalAreaView view){\r\n       this.view=view;\r\n       view.back.addActionListener(e -&gt; main.showPanel(&quot;SIGNUP&quot;));\r\n    }\r\n   public void setValue(Model model){\r\n   view.name.setText(model.name());\r\n   view.surname.setText(model.surname());\r\n   }\r\n}\r\n```\r\n[![][1]][1]\r\n\r\nThe code can be found on GitHub: [GitHub code][2]\r\n\r\nIs something correct or am I wrong?\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/IvtSA.gif\r\n  [2]: https://github.com/user192837/Example1","title":"MVC pattern with CardLayout","body":"<p>I have a Java Swing application with a single large class that via CardLayout replaces the various JPanels based on the various buttons. Each JPanel is built in its own class. I would like to divide the various JPanels into different Model-View-Controllers. My application has for example a welcome page with a button that goes to the login page, the login page can go to three different pages: forgotten password, registration and access to the personal page. All pages can go back. How could I do?</p>\n<p>For the moment I've done something like this:</p>\n<p>Model:</p>\n<pre><code>public record Model(String name,String surname) {}\n</code></pre>\n<p>MainView:</p>\n<pre><code>import javax.swing.*;\nimport java.awt.*;\n\npublic class MainView {\n    JFrame frame;\n    JPanel cardLayoutPanel;\n    JPanel masterPanel;\n    CardLayout cl;\n    MainView(){\n        frame = new JFrame(&quot;Frame&quot;);\n        cardLayoutPanel = new JPanel();\n        cardLayoutPanel.setLayout(new CardLayout());\n        cl=(CardLayout) cardLayoutPanel.getLayout();\n\n        masterPanel = new JPanel();\n        masterPanel.setLayout(new BorderLayout());\n        masterPanel.add(cardLayoutPanel);\n\n        frame.getContentPane().add(masterPanel);\n        frame.setResizable(true);\n        frame.setSize(300, 150);\n        frame.setDefaultCloseOperation(WindowConstants.EXIT_ON_CLOSE);\n        frame.setLocationRelativeTo(null);\n        frame.setVisible(true);\n    }\n    public static void main(String[] args) {\n        MainView viewM= new MainView();\n        MainController controllerM=new MainController(viewM);\n        SignUpView viewS = new SignUpView();\n        SignUpController controllerR=new SignUpController(controllerM,viewS);\n        controllerM.addPanel(viewS.panel,&quot;SIGNUP&quot;);\n        controllerM.showPanel(&quot;SIGNUP&quot;);\n    }\n}\n</code></pre>\n<p>MainController:</p>\n<pre><code>import javax.swing.*;\n\npublic class MainController {\n    MainView view;\n    MainController(MainView view){\n        this.view=view;\n    }\n    void addPanel(JPanel panel, String name){\n        view.cardLayoutPanel.add(panel,name);\n    }\n    void showPanel(String panel){\n        view.cl.show(view.cardLayoutPanel,panel);\n    }\n}\n</code></pre>\n<p>SignUpView:</p>\n<pre><code>import javax.swing.*;\n\npublic class SignUpView {\n    JPanel panel;\n    JTextField name,surname;\n    JButton submit;\n    SignUpView(){\n        panel=new JPanel();\n        name=new JTextField(20);\n        surname=new JTextField(20);\n        submit=new JButton(&quot;submit&quot;);\n        panel.add(name);\n        panel.add(surname);\n        panel.add(submit);\n    }\n}\n</code></pre>\n<p>SignUpController:</p>\n<pre><code>public class SignUpController{\n    SignUpController(MainController main,SignUpView view){\n            PersonalAreaView viewPA=new \nPersonalAreaView();\n            PersonalAreaController controllerPA = new PersonalAreaController(main,viewPA);\n            main.addPanel(viewPA.panel,&quot;PERSONALAREA&quot;);\n        view.submit.addActionListener(e -&gt; {\n            Model model=new Model(view.name.getText(),view.surname.getText());\n            controllerPA.setValue(model);\n            main.showPanel(&quot;PERSONALAREA&quot;);\n        });\n    }\n}\n</code></pre>\n<p>PersonalAreaView:</p>\n<pre><code>import javax.swing.*;\n\npublic class PersonalAreaView{\n    JPanel panel;\n    JLabel name,surname;\n    JButton back;\n    PersonalAreaView(){\n        panel=new JPanel();\n        name=new JLabel();\n        surname=new JLabel();\n        back=new JButton(&quot;Back&quot;);\n        panel.add(name);\n        panel.add(surname);\n        panel.add(back);\n    }\n}\n</code></pre>\n<p>PersonalAreaController:</p>\n<pre><code>public class PersonalAreaController{\n    PersonalAreaView view;\n    PersonalAreaController(MainController main,PersonalAreaView view){\n       this.view=view;\n       view.back.addActionListener(e -&gt; main.showPanel(&quot;SIGNUP&quot;));\n    }\n   public void setValue(Model model){\n   view.name.setText(model.name());\n   view.surname.setText(model.surname());\n   }\n}\n</code></pre>\n<p><a href=\"https://i.stack.imgur.com/IvtSA.gif\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/IvtSA.gif\" alt=\"\" /></a></p>\n<p>The code can be found on GitHub: <a href=\"https://github.com/user192837/Example1\" rel=\"nofollow noreferrer\">GitHub code</a></p>\n<p>Is something correct or am I wrong?</p>\n"},{"tags":["java","hibernate","annotations"],"comments":[{"owner":{"account_id":5077780,"reputation":24103,"user_id":4074715,"display_name":"Predrag Maric"},"score":0,"creation_date":1433250101,"post_id":30596864,"comment_id":49262059,"body_markdown":"What do you mean by `when I delete the grandchildren in the application`? Post service code which does this.","body":"What do you mean by <code>when I delete the grandchildren in the application</code>? Post service code which does this."},{"owner":{"account_id":991148,"reputation":85,"user_id":1008425,"accept_rate":42,"display_name":"Mahsa"},"score":0,"creation_date":1433250408,"post_id":30596864,"comment_id":49262319,"body_markdown":"I show the list of the grandchildren in the app. The user can select and delete them from the list. There is a SAVE button, by clicking, the updated parent object will be saved. In Debug mode, I checked the parent object, there is no item in the list, but they are remained in the DB.","body":"I show the list of the grandchildren in the app. The user can select and delete them from the list. There is a SAVE button, by clicking, the updated parent object will be saved. In Debug mode, I checked the parent object, there is no item in the list, but they are remained in the DB."},{"owner":{"account_id":5077780,"reputation":24103,"user_id":4074715,"display_name":"Predrag Maric"},"score":0,"creation_date":1433250643,"post_id":30596864,"comment_id":49262516,"body_markdown":"Do you set `child` to `null` in every removed grandchild?","body":"Do you set <code>child</code> to <code>null</code> in every removed grandchild?"},{"owner":{"account_id":991148,"reputation":85,"user_id":1008425,"accept_rate":42,"display_name":"Mahsa"},"score":0,"creation_date":1433250928,"post_id":30596864,"comment_id":49262746,"body_markdown":"yes, I checked with null and an empty HashSet.","body":"yes, I checked with null and an empty HashSet."},{"owner":{"account_id":6093107,"reputation":23152,"user_id":4754790,"accept_rate":94,"display_name":"Dragan Bozanovic"},"score":0,"creation_date":1433254640,"post_id":30596864,"comment_id":49265845,"body_markdown":"Are you actually invoking `delete`/`remove` anywhere? Because I don&#39;t see `orphanRemoval` in your mapping, and without it nothing is going to be deleted unless you explicitly tell Hibernate to do it.","body":"Are you actually invoking <code>delete</code>/<code>remove</code> anywhere? Because I don&#39;t see <code>orphanRemoval</code> in your mapping, and without it nothing is going to be deleted unless you explicitly tell Hibernate to do it."}],"answers":[{"tags":[],"owner":{"account_id":1841280,"reputation":2686,"user_id":1670616,"display_name":"sgpalit"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1433254235,"creation_date":1433254235,"answer_id":30598512,"question_id":30596864,"body_markdown":"try adding orphanRemoval to your collections.\r\n\r\n    @OneToMany(fetch = FetchType.EAGER, mappedBy = &quot;parent&quot;, orphanRemoval=true)\r\n    @OneToMany(fetch = FetchType.EAGER, mappedBy = &quot;child&quot;, orphanRemoval=true)","title":"grandchild object does not updated","body":"<p>try adding orphanRemoval to your collections.</p>\n\n<pre><code>@OneToMany(fetch = FetchType.EAGER, mappedBy = \"parent\", orphanRemoval=true)\n@OneToMany(fetch = FetchType.EAGER, mappedBy = \"child\", orphanRemoval=true)\n</code></pre>\n"}],"owner":{"account_id":991148,"reputation":85,"user_id":1008425,"accept_rate":42,"display_name":"Mahsa"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":419,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":30598512,"answer_count":1,"score":0,"last_activity_date":1635430271,"creation_date":1433249999,"question_id":30596864,"body_markdown":"I have a parent, a child and a grandchild object.\r\nThe problem is, when I delete the grandchildren in the application and save\r\nthe parent object, grandchildren changes don&#39;t be updated. \r\n\r\nIn Parent Class\r\n\r\n      @OneToMany(fetch = FetchType.EAGER, mappedBy = &quot;parent&quot;)\r\n      @ForeignKey(name = &quot;FK_1&quot;)\r\n      @Cascade({CascadeType.ALL})\r\n      private Set&lt;Child&gt; children;\r\n\r\n  \r\nIn Child Class  \r\n\r\n      @ManyToOne(fetch = FetchType.EAGER)\r\n      @JoinColumn(name = &quot;parent&quot;)\r\n      @XmlTransient\r\n      private parent parent;\r\n      \r\n      @OneToMany(fetch = FetchType.EAGER, mappedBy = &quot;child&quot;)\r\n      @ForeignKey(name = &quot;FK_2&quot;)\r\n      @Cascade({CascadeType.ALL})\r\n      private Set&lt;GrandChild&gt; grandchildren;\r\n\r\nIn GrandChild Class\r\n\r\n      @ManyToOne(fetch = FetchType.EAGER)\r\n      @JoinColumn(name = &quot;child&quot;, nullable = false)\r\n      @XmlTransient\r\n      private Child child;\r\n\r\nI use hibernate 4.2.2.Final.\r\n\r\nany idea? \r\n\r\n\r\n\r\n\r\n","title":"grandchild object does not updated","body":"<p>I have a parent, a child and a grandchild object.\nThe problem is, when I delete the grandchildren in the application and save\nthe parent object, grandchildren changes don't be updated. </p>\n\n<p>In Parent Class</p>\n\n<pre><code>  @OneToMany(fetch = FetchType.EAGER, mappedBy = \"parent\")\n  @ForeignKey(name = \"FK_1\")\n  @Cascade({CascadeType.ALL})\n  private Set&lt;Child&gt; children;\n</code></pre>\n\n<p>In Child Class  </p>\n\n<pre><code>  @ManyToOne(fetch = FetchType.EAGER)\n  @JoinColumn(name = \"parent\")\n  @XmlTransient\n  private parent parent;\n\n  @OneToMany(fetch = FetchType.EAGER, mappedBy = \"child\")\n  @ForeignKey(name = \"FK_2\")\n  @Cascade({CascadeType.ALL})\n  private Set&lt;GrandChild&gt; grandchildren;\n</code></pre>\n\n<p>In GrandChild Class</p>\n\n<pre><code>  @ManyToOne(fetch = FetchType.EAGER)\n  @JoinColumn(name = \"child\", nullable = false)\n  @XmlTransient\n  private Child child;\n</code></pre>\n\n<p>I use hibernate 4.2.2.Final.</p>\n\n<p>any idea? </p>\n"},{"tags":["java","string","loops"],"comments":[{"owner":{"account_id":45213,"reputation":26348,"user_id":133203,"accept_rate":97,"display_name":"Federico klez Culloca"},"score":0,"creation_date":1635429485,"post_id":69755443,"comment_id":123300577,"body_markdown":"Naive solution: only print it if `i != something.length - 1`.","body":"Naive solution: only print it if <code>i != something.length - 1</code>."}],"answers":[{"tags":[],"owner":{"account_id":1658807,"reputation":31819,"user_id":1527544,"accept_rate":54,"display_name":"Antoniossss"},"down_vote_count":1,"up_vote_count":0,"is_accepted":true,"score":-1,"last_activity_date":1635429702,"creation_date":1635429702,"answer_id":69755530,"question_id":69755443,"body_markdown":"For example\r\n\r\n    for(int i=0; i &lt; something.length; i++){\r\n        System.out.print(i + i==something.length-1 ? &quot;&quot;:&quot; ,&quot;);\r\n    }","title":"How to remove extra comma after the last number in loop","body":"<p>For example</p>\n<pre><code>for(int i=0; i &lt; something.length; i++){\n    System.out.print(i + i==something.length-1 ? &quot;&quot;:&quot; ,&quot;);\n}\n</code></pre>\n"}],"owner":{"account_id":19484231,"reputation":13,"user_id":14253921,"display_name":"Glen"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":121,"favorite_count":0,"down_vote_count":2,"up_vote_count":1,"closed_date":1635429947,"accepted_answer_id":69755530,"answer_count":1,"score":-1,"last_activity_date":1635429702,"creation_date":1635429380,"question_id":69755443,"body_markdown":"Hi I&#39;m just new at programming java. So I was just stuck in this example code:\r\n\r\n    for(int i=0; i &lt; something.length; i++){\r\n        System.out.print(i + &quot; ,&quot;);\r\n    }\r\n\r\nSo, basically it will print like this for example 0,1,2,3,.But as you can see there is \r\nan extra comma after the number. Is there a way to code this? thanks in advance.","title":"How to remove extra comma after the last number in loop","body":"<p>Hi I'm just new at programming java. So I was just stuck in this example code:</p>\n<pre><code>for(int i=0; i &lt; something.length; i++){\n    System.out.print(i + &quot; ,&quot;);\n}\n</code></pre>\n<p>So, basically it will print like this for example 0,1,2,3,.But as you can see there is\nan extra comma after the number. Is there a way to code this? thanks in advance.</p>\n"},{"tags":["java","spring-boot","mapstruct"],"answers":[{"tags":[],"owner":{"account_id":1128956,"reputation":19765,"user_id":1115491,"display_name":"Filip"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1526317096,"creation_date":1526317096,"answer_id":50335454,"question_id":50332969,"body_markdown":"You can&#39;t autowire a bean into an interface. However, you can use the `@Context` from MapStruct 1.2.0.\r\n\r\nFor example:\r\n\r\n    @Mapper\r\n    public interface MyMapper {\r\n    \r\n    \r\n        Target map(Source source, @Context MyCustomService service);\r\n    \r\n        @AfterMapper\r\n        void after(Source source, @MappingTarget Target target, @Context MyCustomService service) {\r\n            // Do what you need here\r\n        }\r\n    }\r\n\r\nAnother option would be to use an abstract class instead of an interface.\r\n\r\n    @Mapper\r\n    public abstract class MyMapper {\r\n    \r\n        private MyCustomService service;\r\n    \r\n    \r\n        public abstract Target map(Source source);\r\n    \r\n    \r\n        @AfterMapping\r\n        protected after(Source source, @MappingTarget Target target) {\r\n            // Use the service here\r\n        }\r\n    \r\n        @Autowired\r\n        public void setService(MyCustomService service) {\r\n            this.service = service.\r\n        }    \r\n    }\r\n\r\n","title":"Can I autowire a Spring bean into a MapStruct interface?","body":"<p>You can't autowire a bean into an interface. However, you can use the <code>@Context</code> from MapStruct 1.2.0.</p>\n\n<p>For example:</p>\n\n<pre><code>@Mapper\npublic interface MyMapper {\n\n\n    Target map(Source source, @Context MyCustomService service);\n\n    @AfterMapper\n    void after(Source source, @MappingTarget Target target, @Context MyCustomService service) {\n        // Do what you need here\n    }\n}\n</code></pre>\n\n<p>Another option would be to use an abstract class instead of an interface.</p>\n\n<pre><code>@Mapper\npublic abstract class MyMapper {\n\n    private MyCustomService service;\n\n\n    public abstract Target map(Source source);\n\n\n    @AfterMapping\n    protected after(Source source, @MappingTarget Target target) {\n        // Use the service here\n    }\n\n    @Autowired\n    public void setService(MyCustomService service) {\n        this.service = service.\n    }    \n}\n</code></pre>\n"}],"owner":{"account_id":3274061,"reputation":2691,"user_id":2756760,"accept_rate":51,"display_name":"du-it"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":8049,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"answer_count":1,"score":3,"last_activity_date":1635429413,"creation_date":1526308618,"question_id":50332969,"body_markdown":"I am using `MapStruct` and to do that I have to define an interface with an according mapping function. It is possible to implement some logic by using a `default` method annotated with **`@BeforeMapping`**` `and **@AfterMapping**. In such an annotated default method I want to use a configuration class of my SpringBoot application. How can I do this? Can I autowire such a configuration (bean) into an interface? How should such a code look like?\r\n\r\n&lt;hr&gt;\r\n\r\nFrom the documentation and your hint I found out that I can use either a @Context variable or an abstract class instead of using an interface.\r\n\r\nI tried both then. Using an abstract class it worked well as demanded but using a @Context variable the default method gets not invoked.\r\n\r\nHere&#39;s the main mapping method:\r\n\r\n```java\r\n@Mapping(target = &quot;myTarget.partNumber&quot;, ignore = true)\r\npublic MyTarget mapSource2Target(final MySource mySource, final PartNumberMapConfiguration partNumberMapConfiguration);\r\n```\r\n\r\nand the *afterMapping* method:\r\n\r\n```java\r\n@AfterMapping\r\ndefault void afterMapping(final @MappingTarget MyTarget target, final MySource source, final @Context PartNumberMapConfiguration partNumberMapConfiguration) {. . . }\r\n```\r\n\r\nWhen I reach the breakpoint where the mapper is invoked, I cannot step into the mapping method. It just steps over...and the code of the afterMapping method is not executed.\r\n\r\nHere&#39;s the class I intend to use as with @Context:\r\n\r\n```java\r\n@Component(&quot;PartNumberMap&quot;)\r\n@PropertySource(&quot;classpath:abc.properties&quot;)\r\n@ConfigurationProperties(prefix = &quot;abc&quot;)\r\npublic class PartNumberMapConfiguration {\r\n    \r\n \tprivate Map&lt;String, String&gt; partNumberMap = new HashMap&lt;String, String&gt;();\r\n    \r\n   \tpublic Map&lt;String, String&gt; getPartNumberMap() {\r\n   \t\treturn partNumberMap;\r\n   \t}\r\n    \r\n   \tpublic void setPartNumberMap(final Map&lt;String, String&gt; partNumberMap) {\r\n   \t\tthis.partNumberMap = partNumberMap;\r\n   \t}\r\n}\r\n```","title":"Can I autowire a Spring bean into a MapStruct interface?","body":"<p>I am using <code>MapStruct</code> and to do that I have to define an interface with an according mapping function. It is possible to implement some logic by using a <code>default</code> method annotated with <strong><code>@BeforeMapping</code></strong><code> </code>and <strong>@AfterMapping</strong>. In such an annotated default method I want to use a configuration class of my SpringBoot application. How can I do this? Can I autowire such a configuration (bean) into an interface? How should such a code look like?</p>\n<hr>\n<p>From the documentation and your hint I found out that I can use either a @Context variable or an abstract class instead of using an interface.</p>\n<p>I tried both then. Using an abstract class it worked well as demanded but using a @Context variable the default method gets not invoked.</p>\n<p>Here's the main mapping method:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Mapping(target = &quot;myTarget.partNumber&quot;, ignore = true)\npublic MyTarget mapSource2Target(final MySource mySource, final PartNumberMapConfiguration partNumberMapConfiguration);\n</code></pre>\n<p>and the <em>afterMapping</em> method:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@AfterMapping\ndefault void afterMapping(final @MappingTarget MyTarget target, final MySource source, final @Context PartNumberMapConfiguration partNumberMapConfiguration) {. . . }\n</code></pre>\n<p>When I reach the breakpoint where the mapper is invoked, I cannot step into the mapping method. It just steps over...and the code of the afterMapping method is not executed.</p>\n<p>Here's the class I intend to use as with @Context:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Component(&quot;PartNumberMap&quot;)\n@PropertySource(&quot;classpath:abc.properties&quot;)\n@ConfigurationProperties(prefix = &quot;abc&quot;)\npublic class PartNumberMapConfiguration {\n    \n    private Map&lt;String, String&gt; partNumberMap = new HashMap&lt;String, String&gt;();\n    \n    public Map&lt;String, String&gt; getPartNumberMap() {\n        return partNumberMap;\n    }\n    \n    public void setPartNumberMap(final Map&lt;String, String&gt; partNumberMap) {\n        this.partNumberMap = partNumberMap;\n    }\n}\n</code></pre>\n"},{"tags":["java","concurrency","static"],"comments":[{"owner":{"account_id":12060587,"reputation":3933,"user_id":8819761,"display_name":"Jeroen Steenbeeke"},"score":2,"creation_date":1635412323,"post_id":69751263,"comment_id":123292897,"body_markdown":"You don&#39;t want a hacky workaround. Just make it non-static. A bit more work now (not that much if you have a good IDE) but it&#39;ll save you a lot of headaches in the long term","body":"You don&#39;t want a hacky workaround. Just make it non-static. A bit more work now (not that much if you have a good IDE) but it&#39;ll save you a lot of headaches in the long term"},{"owner":{"account_id":1674243,"reputation":10043,"user_id":1553537,"accept_rate":29,"display_name":"Giorgi Tsiklauri"},"score":0,"creation_date":1635412476,"post_id":69751263,"comment_id":123292950,"body_markdown":"To be honest, your question is kind of excessive in its text. I, personally, find it a bit difficult to understand what you exactly are trying to do, and what&#39;s the problem. Could you narrow down it to the specific point you&#39;re struggling with?","body":"To be honest, your question is kind of excessive in its text. I, personally, find it a bit difficult to understand what you exactly are trying to do, and what&#39;s the problem. Could you narrow down it to the specific point you&#39;re struggling with?"},{"owner":{"account_id":7035662,"reputation":31,"user_id":5389882,"accept_rate":100,"display_name":"W.Hunt"},"score":0,"creation_date":1635412598,"post_id":69751263,"comment_id":123293004,"body_markdown":"Basically I was hoping for a quick short-term solution to the problem of the static not being different for different instances. I was hoping that I could emulate that way that running multiple main methods at the same time allows each instance to be containerised I guess.","body":"Basically I was hoping for a quick short-term solution to the problem of the static not being different for different instances. I was hoping that I could emulate that way that running multiple main methods at the same time allows each instance to be containerised I guess."},{"owner":{"account_id":1674243,"reputation":10043,"user_id":1553537,"accept_rate":29,"display_name":"Giorgi Tsiklauri"},"score":0,"creation_date":1635414067,"post_id":69751263,"comment_id":123293700,"body_markdown":"@W.Hunt static member will NOT be different for different instances, unless you explicitly reassign it.","body":"@W.Hunt static member will NOT be different for different instances, unless you explicitly reassign it."},{"owner":{"account_id":213468,"reputation":103486,"user_id":466862,"display_name":"Mark Rotteveel"},"score":1,"creation_date":1635422101,"post_id":69751263,"comment_id":123297058,"body_markdown":"You might be able to do it by loading the class through multiple classloaders, though I&#39;m not 100% sure that would be a viable route. Fixing the actual problem might be easier than attempting to do that.","body":"You might be able to do it by loading the class through multiple classloaders, though I&#39;m not 100% sure that would be a viable route. Fixing the actual problem might be easier than attempting to do that."}],"answers":[{"tags":[],"owner":{"account_id":22481248,"reputation":153,"user_id":16680296,"display_name":"crjacinro"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1635412596,"creation_date":1635412596,"answer_id":69751363,"question_id":69751263,"body_markdown":"The quickest and hacky way that I could think of is to override that constructor with a dummy variable \r\n\r\n```\r\n    public Simulator(Boolean isDummy){\r\n\r\n    }\r\n\r\n```\r\n\r\nNow you have the option to create a multiple instance of that class without affecting others. Not sure if the parameter overhead is acceptable in your case.","title":"Is there a workaround for running multiple instances of a class with static variables in Java?","body":"<p>The quickest and hacky way that I could think of is to override that constructor with a dummy variable</p>\n<pre><code>    public Simulator(Boolean isDummy){\n\n    }\n\n</code></pre>\n<p>Now you have the option to create a multiple instance of that class without affecting others. Not sure if the parameter overhead is acceptable in your case.</p>\n"},{"tags":[],"owner":{"account_id":3466983,"reputation":8589,"user_id":3800782,"accept_rate":77,"display_name":"rghome"},"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1635429293,"creation_date":1635429293,"answer_id":69755424,"question_id":69751263,"body_markdown":"I think this is possible using Java class loaders ([ClassLoader][1]), but this will lead you into a world of pain. You would have to create sub-applications each using different class loaders. I have never done this, but I believe this is how application servers work.\r\n\r\nIt will be far easier to refactor your application.\r\n\r\nInstead of accessing `instance` you would have to create multiple instance variables or some dynamic registry like a map where you store the references.\r\n\r\nBy-the-way, the way that `instance` is stored in the constructor is very bad practice as it will get overwritten each time `new` is called and the previous version will be lost. Usually, you would want to just initialise `instance` with an object.\r\n\r\n  [1]: https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/ClassLoader.html","title":"Is there a workaround for running multiple instances of a class with static variables in Java?","body":"<p>I think this is possible using Java class loaders (<a href=\"https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/ClassLoader.html\" rel=\"nofollow noreferrer\">ClassLoader</a>), but this will lead you into a world of pain. You would have to create sub-applications each using different class loaders. I have never done this, but I believe this is how application servers work.</p>\n<p>It will be far easier to refactor your application.</p>\n<p>Instead of accessing <code>instance</code> you would have to create multiple instance variables or some dynamic registry like a map where you store the references.</p>\n<p>By-the-way, the way that <code>instance</code> is stored in the constructor is very bad practice as it will get overwritten each time <code>new</code> is called and the previous version will be lost. Usually, you would want to just initialise <code>instance</code> with an object.</p>\n"}],"owner":{"account_id":7035662,"reputation":31,"user_id":5389882,"accept_rate":100,"display_name":"W.Hunt"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":161,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":69755424,"answer_count":2,"score":0,"last_activity_date":1635429401,"creation_date":1635412186,"question_id":69751263,"body_markdown":"I&#39;m working on an existing piece of simulator software, and the structure is basically like this (it has a static member variable containing itself):\r\n\r\n    public class Simulator {\r\n    \tprivate Static Simulator instance;\r\n    \r\n    \tpublic Simulator(){\r\n    \t\tinstance = this;\r\n    \t\t//blah\r\n    \t\t//blah\r\n            //other things\r\n    \t}\r\n    \r\n    }\r\n\r\n\r\nAnd then a lot of methods access the static instance of the Simulator like this:\r\n\r\n    for(Foo f : Simulator.instance.getFoo() ){\r\n    \t//blah\r\n    }\r\n\r\nYou get this idea. Basically, the programmers who came before me assumed that there would only ever be one single instance of the Simualtor, so they made it accessible statically.\r\n\r\nThe problem is that I now want to run multiple instances of it, so this static part is becoming annoying.\r\n\r\nMaking this work without it being static is probably the best option, I know, but as you can imagine it will take a lot of refactoring and time.\r\n\r\nThe one thing that does work is to run multiple main methods (so run it several times in my IDE, or run it as a .jar in separate windows). I assume this is because each main method or JVM instance or whatever is acting as a sort of container, so the statics don&#39;t interfere?\r\n\r\nWhat I was wondering was, is there a hacky workaround that I can use (at least short-term) to create multiple instances of the simulator, but within some kind of container that makes the static instances not interfere.","title":"Is there a workaround for running multiple instances of a class with static variables in Java?","body":"<p>I'm working on an existing piece of simulator software, and the structure is basically like this (it has a static member variable containing itself):</p>\n<pre><code>public class Simulator {\n    private Static Simulator instance;\n\n    public Simulator(){\n        instance = this;\n        //blah\n        //blah\n        //other things\n    }\n\n}\n</code></pre>\n<p>And then a lot of methods access the static instance of the Simulator like this:</p>\n<pre><code>for(Foo f : Simulator.instance.getFoo() ){\n    //blah\n}\n</code></pre>\n<p>You get this idea. Basically, the programmers who came before me assumed that there would only ever be one single instance of the Simualtor, so they made it accessible statically.</p>\n<p>The problem is that I now want to run multiple instances of it, so this static part is becoming annoying.</p>\n<p>Making this work without it being static is probably the best option, I know, but as you can imagine it will take a lot of refactoring and time.</p>\n<p>The one thing that does work is to run multiple main methods (so run it several times in my IDE, or run it as a .jar in separate windows). I assume this is because each main method or JVM instance or whatever is acting as a sort of container, so the statics don't interfere?</p>\n<p>What I was wondering was, is there a hacky workaround that I can use (at least short-term) to create multiple instances of the simulator, but within some kind of container that makes the static instances not interfere.</p>\n"},{"tags":["java","maven","jar","pom.xml","maven-shade-plugin"],"comments":[{"owner":{"account_id":1937747,"reputation":14200,"user_id":1744774,"accept_rate":100,"display_name":"Gerold Broser"},"score":0,"creation_date":1635372900,"post_id":69745933,"comment_id":123283945,"body_markdown":"I&#39;d try using [`&lt;pluginManagement&gt;`](https://svn.apache.org/repos/infra/websites/production/maven/content/pom.html#Plugin_Management) in your parent POM.","body":"I&#39;d try using <a href=\"https://svn.apache.org/repos/infra/websites/production/maven/content/pom.html#Plugin_Management\" rel=\"nofollow noreferrer\"><code>&lt;pluginManagement&gt;</code></a> in your parent POM."},{"owner":{"account_id":112317,"reputation":93939,"user_id":296328,"accept_rate":60,"display_name":"khmarbaise"},"score":0,"creation_date":1635404365,"post_id":69745933,"comment_id":123289685,"body_markdown":"Remove `&lt;sourceDirectory&gt;../../webapp/src/main/java&lt;/sourceDirectory&gt;` because you are doing something wrong... please make a full working example on GitHub or alike...","body":"Remove <code>&lt;sourceDirectory&gt;..&#47;..&#47;webapp&#47;src&#47;main&#47;java&lt;&#47;sourceDirectory&zwnj;&#8203;&gt;</code> because you are doing something wrong... please make a full working example on GitHub or alike..."},{"owner":{"account_id":22131948,"reputation":25,"user_id":16383352,"display_name":"lulu3131"},"score":0,"creation_date":1635409479,"post_id":69745933,"comment_id":123291662,"body_markdown":"hi @GeroldBroser in my package parent i have   &lt;artifactId&gt;atori-batch&lt;/artifactId&gt;\n  &lt;packaging&gt;pom&lt;/packaging&gt;\n  &lt;name&gt;${project.artifactId}&lt;/name&gt;. I want to change packaging pom to jar packaging and add shade plugin with &lt;manifestEntries&gt; tag to have a specific version for each child","body":"hi @GeroldBroser in my package parent i have   &lt;artifactId&gt;atori-batch&lt;/artifactId&gt;   &lt;packaging&gt;pom&lt;/packaging&gt;   &lt;name&gt;${project.artifactId}&lt;/name&gt;. I want to change packaging pom to jar packaging and add shade plugin with &lt;manifestEntries&gt; tag to have a specific version for each child"},{"owner":{"account_id":22131948,"reputation":25,"user_id":16383352,"display_name":"lulu3131"},"score":0,"creation_date":1635409602,"post_id":69745933,"comment_id":123291704,"body_markdown":"hi @khmarbaise in my package parent i have   &lt;artifactId&gt;atori-batch&lt;/artifactId&gt;\n  &lt;packaging&gt;pom&lt;/packaging&gt;\n  &lt;name&gt;${project.artifactId}&lt;/name&gt;. I want to change packaging pom to jar packaging and add shade plugin with &lt;manifestEntries&gt; tag to have a specific version for each child","body":"hi @khmarbaise in my package parent i have   &lt;artifactId&gt;atori-batch&lt;/artifactId&gt;   &lt;packaging&gt;pom&lt;/packaging&gt;   &lt;name&gt;${project.artifactId}&lt;/name&gt;. I want to change packaging pom to jar packaging and add shade plugin with &lt;manifestEntries&gt; tag to have a specific version for each child"},{"owner":{"account_id":112317,"reputation":93939,"user_id":296328,"accept_rate":60,"display_name":"khmarbaise"},"score":0,"creation_date":1635416369,"post_id":69745933,"comment_id":123294693,"body_markdown":"Make a separate child only with the configuration for maven-shade-plugin add the needed childs as dependencies. You can not change the parent packaging from `pom` to `jar` because that will not work for a multi module build...","body":"Make a separate child only with the configuration for maven-shade-plugin add the needed childs as dependencies. You can not change the parent packaging from <code>pom</code> to <code>jar</code> because that will not work for a multi module build..."},{"owner":{"account_id":1937747,"reputation":14200,"user_id":1744774,"accept_rate":100,"display_name":"Gerold Broser"},"score":0,"creation_date":1635417326,"post_id":69745933,"comment_id":123295114,"body_markdown":"@khmarbaise There&#39;s no `&lt;modules&gt;` in the question&#39;s POM. Apparently there&#39;s just a parent ← child relationship,not an aggregator → modules relationship.","body":"@khmarbaise There&#39;s no <code>&lt;modules&gt;</code> in the question&#39;s POM. Apparently there&#39;s just a parent ← child relationship,not an aggregator → modules relationship."},{"owner":{"account_id":22131948,"reputation":25,"user_id":16383352,"display_name":"lulu3131"},"score":0,"creation_date":1635422345,"post_id":69745933,"comment_id":123297161,"body_markdown":"Hi @khmarbaise , how can i make separate child with configuration of maven-shade-plugin and add child as dependency. Can you give me an example.  I change packaging from pom to jar and i delete multi module for children","body":"Hi @khmarbaise , how can i make separate child with configuration of maven-shade-plugin and add child as dependency. Can you give me an example.  I change packaging from pom to jar and i delete multi module for children"}],"answers":[{"tags":[],"owner":{"account_id":1937747,"reputation":14200,"user_id":1744774,"accept_rate":100,"display_name":"Gerold Broser"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1635429311,"creation_date":1635428896,"answer_id":69755318,"question_id":69745933,"body_markdown":"Project structure:\r\n```\r\n+- parent\r\n   + pom.xml ... &lt;packaging&gt;pom, &lt;module&gt;child1/&lt;module&gt;child1/&lt;module&gt;childN\r\n   |\r\n   +- child1\r\n   |  +- pom.xml ... &lt;parent&gt;parent\r\n   |  +- ... src/main, src/test, etc.\r\n   |\r\n   +- child2\r\n   |  +- pom.xml ... &lt;parent&gt;parent\r\n   |  +- ... src/main, src/test, etc. \r\n   |\r\n   +- childN\r\n      +- pom.xml ... &lt;parent&gt;parent\r\n      +- ... src/main, src/test, etc.\r\n```\r\n### Parent POM\r\n```lang-xml\r\n    ...\r\n    &lt;build&gt;\r\n      &lt;pluginManagement&gt;\r\n        &lt;plugins&gt;\r\n          &lt;plugin&gt;\r\n            &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n            &lt;artifactId&gt;maven-shade-plugin&lt;/artifactId&gt;\r\n            &lt;version&gt;...&lt;/version&gt;\r\n            &lt;executions&gt;\r\n              &lt;execution&gt;\r\n                &lt;phase&gt;package&lt;/phase&gt;\r\n                &lt;goals&gt;\r\n                  &lt;goal&gt;shade&lt;/goal&gt;\r\n                &lt;/goals&gt;\r\n                &lt;configuration&gt;\r\n                  &lt;finalName&gt;${project.artifactId}&lt;/finalName&gt;\r\n                  &lt;transformers&gt;\r\n                    &lt;transformer implementation=&quot;org.apache.maven.plugins.shade.resource.ManifestResourceTransformer&quot;&gt;\r\n                      &lt;manifestEntries&gt;\r\n                        &lt;ChildVersion&gt;${project.version}&lt;/childVersion&gt;\r\n                      &lt;/manifestEntries&gt;\r\n                    &lt;/transformer&gt;\r\n                    &lt;transformer implementation=&quot;org.apache.maven.plugins.shade.resource.AppendingTransformer&quot;&gt;\r\n                      &lt;resource&gt;META-INF/spring.handlers&lt;/resource&gt;\r\n                    &lt;/transformer&gt;\r\n                    &lt;transformer implementation=&quot;org.apache.maven.plugins.shade.resource.AppendingTransformer&quot;&gt;\r\n                      &lt;resource&gt;META-INF/spring.schemas&lt;/resource&gt;\r\n                    &lt;/transformer&gt;\r\n                  &lt;/transformers&gt;\r\n                &lt;/configuration&gt;\r\n              &lt;/execution&gt;\r\n            &lt;/executions&gt;\r\n          &lt;/plugin&gt;\r\n        &lt;/plugins&gt;\r\n      &lt;/pluginManagement&gt;\r\n    &lt;/build&gt;\r\n    ...\r\n```\r\n\r\n### Child POMs\r\n```lang-xml\r\n    ...\r\n    &lt;build&gt;\r\n        &lt;plugins&gt;\r\n          &lt;plugin&gt;\r\n            &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n            &lt;artifactId&gt;maven-shade-plugin&lt;/artifactId&gt;\r\n            &lt;executions&gt;\r\n              &lt;execution&gt;\r\n                &lt;phase&gt;package&lt;/phase&gt;\r\n                &lt;goals&gt;\r\n                  &lt;goal&gt;shade&lt;/goal&gt;\r\n                &lt;/goals&gt;\r\n                &lt;configuration&gt;\r\n                  &lt;transformers&gt;\r\n                    &lt;transformer implementation=&quot;org.apache.maven.plugins.shade.resource.ManifestResourceTransformer&quot;&gt;\r\n                      &lt;manifestEntries&gt;\r\n                        &lt;Main-Class&gt;Child[N]LauncherCLass&lt;/Main-Class&gt;\r\n                      &lt;/manifestEntries&gt;\r\n                    &lt;/transformer&gt;\r\n                &lt;/configuration&gt;\r\n              &lt;/execution&gt;\r\n            &lt;/executions&gt;\r\n          &lt;/plugin&gt;\r\n        &lt;/plugins&gt;\r\n    &lt;/build&gt;\r\n    ...\r\n```","title":"Parent and child pom with maven shade plugin","body":"<p>Project structure:</p>\n<pre><code>+- parent\n   + pom.xml ... &lt;packaging&gt;pom, &lt;module&gt;child1/&lt;module&gt;child1/&lt;module&gt;childN\n   |\n   +- child1\n   |  +- pom.xml ... &lt;parent&gt;parent\n   |  +- ... src/main, src/test, etc.\n   |\n   +- child2\n   |  +- pom.xml ... &lt;parent&gt;parent\n   |  +- ... src/main, src/test, etc. \n   |\n   +- childN\n      +- pom.xml ... &lt;parent&gt;parent\n      +- ... src/main, src/test, etc.\n</code></pre>\n<h3>Parent POM</h3>\n<pre class=\"lang-xml prettyprint-override\"><code>    ...\n    &lt;build&gt;\n      &lt;pluginManagement&gt;\n        &lt;plugins&gt;\n          &lt;plugin&gt;\n            &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n            &lt;artifactId&gt;maven-shade-plugin&lt;/artifactId&gt;\n            &lt;version&gt;...&lt;/version&gt;\n            &lt;executions&gt;\n              &lt;execution&gt;\n                &lt;phase&gt;package&lt;/phase&gt;\n                &lt;goals&gt;\n                  &lt;goal&gt;shade&lt;/goal&gt;\n                &lt;/goals&gt;\n                &lt;configuration&gt;\n                  &lt;finalName&gt;${project.artifactId}&lt;/finalName&gt;\n                  &lt;transformers&gt;\n                    &lt;transformer implementation=&quot;org.apache.maven.plugins.shade.resource.ManifestResourceTransformer&quot;&gt;\n                      &lt;manifestEntries&gt;\n                        &lt;ChildVersion&gt;${project.version}&lt;/childVersion&gt;\n                      &lt;/manifestEntries&gt;\n                    &lt;/transformer&gt;\n                    &lt;transformer implementation=&quot;org.apache.maven.plugins.shade.resource.AppendingTransformer&quot;&gt;\n                      &lt;resource&gt;META-INF/spring.handlers&lt;/resource&gt;\n                    &lt;/transformer&gt;\n                    &lt;transformer implementation=&quot;org.apache.maven.plugins.shade.resource.AppendingTransformer&quot;&gt;\n                      &lt;resource&gt;META-INF/spring.schemas&lt;/resource&gt;\n                    &lt;/transformer&gt;\n                  &lt;/transformers&gt;\n                &lt;/configuration&gt;\n              &lt;/execution&gt;\n            &lt;/executions&gt;\n          &lt;/plugin&gt;\n        &lt;/plugins&gt;\n      &lt;/pluginManagement&gt;\n    &lt;/build&gt;\n    ...\n</code></pre>\n<h3>Child POMs</h3>\n<pre class=\"lang-xml prettyprint-override\"><code>    ...\n    &lt;build&gt;\n        &lt;plugins&gt;\n          &lt;plugin&gt;\n            &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n            &lt;artifactId&gt;maven-shade-plugin&lt;/artifactId&gt;\n            &lt;executions&gt;\n              &lt;execution&gt;\n                &lt;phase&gt;package&lt;/phase&gt;\n                &lt;goals&gt;\n                  &lt;goal&gt;shade&lt;/goal&gt;\n                &lt;/goals&gt;\n                &lt;configuration&gt;\n                  &lt;transformers&gt;\n                    &lt;transformer implementation=&quot;org.apache.maven.plugins.shade.resource.ManifestResourceTransformer&quot;&gt;\n                      &lt;manifestEntries&gt;\n                        &lt;Main-Class&gt;Child[N]LauncherCLass&lt;/Main-Class&gt;\n                      &lt;/manifestEntries&gt;\n                    &lt;/transformer&gt;\n                &lt;/configuration&gt;\n              &lt;/execution&gt;\n            &lt;/executions&gt;\n          &lt;/plugin&gt;\n        &lt;/plugins&gt;\n    &lt;/build&gt;\n    ...\n</code></pre>\n"}],"owner":{"account_id":22131948,"reputation":25,"user_id":16383352,"display_name":"lulu3131"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":596,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1635429311,"creation_date":1635371868,"question_id":69745933,"body_markdown":"I have a parent maven project with its pom and two child projects with their pom having a packaging in jar mode. These two child pom have a class of launch.\r\nThe problem is that each time I create a new child project, I need a new pom with a jar packaging.\r\nThe research goal is to create a parent pom in jar packaging mode that removes the &lt;Main-Class&gt;MyChildLauncherCLass&lt;/Main-Class&gt; declaration and standardize the version of each child pom.\r\n\r\nchild 1 pom \r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n    &lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot;\r\n    \txmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n    \txsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd&quot;&gt;\r\n    \t&lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n    \r\n    \t&lt;parent&gt;\r\n    \t\t&lt;groupId&gt;myChildGroupId&lt;/groupId&gt;\r\n    \t\t&lt;artifactId&gt;myChildartifactId&lt;/artifactId&gt;\r\n    \t\t&lt;version&gt;myChildVersion&lt;/version&gt;\r\n    \t&lt;/parent&gt;\r\n    \r\n    \t&lt;artifactId&gt;myChildArtifactId&lt;/artifactId&gt;\r\n    \t&lt;packaging&gt;jar&lt;/packaging&gt;\r\n    \t&lt;name&gt;${project.artifactId}&lt;/name&gt;\r\n    \r\n    \t&lt;build&gt;\r\n    \t\t&lt;sourceDirectory&gt;../../webapp/src/main/java&lt;/sourceDirectory&gt;\r\n    \t\t&lt;resources&gt;\r\n    \t\t\t&lt;resource&gt;\r\n    \t\t\t\t&lt;directory&gt;../../webapp/src/main/resources&lt;/directory&gt;\r\n    \t\t\t&lt;/resource&gt;\r\n    \t\t&lt;/resources&gt;\r\n    \r\n    \t\t&lt;plugins&gt;\r\n    \t\t\t&lt;plugin&gt;\r\n    \t\t\t\t&lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n    \t\t\t\t&lt;artifactId&gt;maven-shade-plugin&lt;/artifactId&gt;\r\n    \t\t\t\t&lt;executions&gt;\r\n    \t\t\t\t\t&lt;execution&gt;\r\n    \t\t\t\t\t\t&lt;phase&gt;package&lt;/phase&gt;\r\n    \t\t\t\t\t\t&lt;goals&gt;\r\n    \t\t\t\t\t\t\t&lt;goal&gt;shade&lt;/goal&gt;\r\n    \t\t\t\t\t\t&lt;/goals&gt;\r\n    \t\t\t\t\t\t&lt;configuration&gt;\r\n    \t\t\t\t\t\t\t&lt;transformers&gt;\r\n    \t\t\t\t\t\t\t\t&lt;transformer\r\n    \t\t\t\t\t\t\t\t\timplementation=&quot;org.apache.maven.plugins.shade.resource.ManifestResourceTransformer&quot;&gt;\r\n    \t\t\t\t\t\t\t\t\t&lt;manifestEntries&gt;\r\n    \t\t\t\t\t\t\t\t\t\t&lt;Main-Class&gt;MyChildLauncherCLass&lt;/Main-Class&gt;\r\n    \t\t\t\t\t\t\t\t\t\t&lt;Child1Version&gt;${project.version}&lt;/Child1Version&gt;\r\n    \t\t\t\t\t\t\t\t\t&lt;/manifestEntries&gt;\r\n    \t\t\t\t\t\t\t\t&lt;/transformer&gt;\r\n    \t\t\t\t\t\t\t\t&lt;transformer\r\n    \t\t\t\t\t\t\t\t\timplementation=&quot;org.apache.maven.plugins.shade.resource.AppendingTransformer&quot;&gt;\r\n    \t\t\t\t\t\t\t\t\t&lt;resource&gt;META-INF/spring.handlers&lt;/resource&gt;\r\n    \t\t\t\t\t\t\t\t&lt;/transformer&gt;\r\n    \t\t\t\t\t\t\t\t&lt;transformer\r\n    \t\t\t\t\t\t\t\t\timplementation=&quot;org.apache.maven.plugins.shade.resource.AppendingTransformer&quot;&gt;\r\n    \t\t\t\t\t\t\t\t\t&lt;resource&gt;META-INF/spring.schemas&lt;/resource&gt;\r\n    \t\t\t\t\t\t\t\t&lt;/transformer&gt;\r\n    \t\t\t\t\t\t\t&lt;/transformers&gt;\r\n    \t\t\t\t\t\t&lt;/configuration&gt;\r\n    \t\t\t\t\t&lt;/execution&gt;\r\n    \t\t\t\t&lt;/executions&gt;\r\n    \t\t\t&lt;/plugin&gt;\r\n    \t\t&lt;/plugins&gt;\r\n    \r\n    \t&lt;/build&gt;\r\n    \r\n    &lt;/project&gt; \r\n\r\nparent pom\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n    &lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd&quot;&gt;\r\n    \r\n    \t&lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n    \r\n    \t&lt;parent&gt;\r\n    \t\t&lt;groupId&gt;myParentgroupId&lt;/groupId&gt;\r\n    \t\t&lt;artifactId&gt;myParentArtifactId1&lt;/artifactId&gt;\r\n    \t\t&lt;version&gt;myParentVersion&lt;/version&gt;\r\n    \t&lt;/parent&gt;\r\n    \r\n    \t&lt;artifactId&gt;myParentArtifactId2&lt;/artifactId&gt;\r\n    \t&lt;packaging&gt;jar&lt;/packaging&gt;\r\n    \t&lt;name&gt;${project.artifactId}&lt;/name&gt;\r\n    \r\n    \t&lt;dependencies&gt;\r\n    \t\t... dependencies...\r\n    \t&lt;/dependencies&gt;\r\n    \r\n    \r\n    \t&lt;build&gt;\r\n    \t\t&lt;plugins&gt;\r\n    \t      &lt;plugin&gt;\r\n    \t        &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n    \t        &lt;artifactId&gt;maven-shade-plugin&lt;/artifactId&gt;\r\n    \t        &lt;executions&gt;\r\n    \t          &lt;execution&gt;\r\n    \t            &lt;phase&gt;package&lt;/phase&gt;\r\n    \t            &lt;goals&gt;\r\n    \t              &lt;goal&gt;shade&lt;/goal&gt;\r\n    \t            &lt;/goals&gt;\r\n    \t            &lt;configuration&gt;\r\n    \t              &lt;finalName&gt;${project.artifactId}&lt;/finalName&gt;\r\n    \t              &lt;transformers&gt;\r\n    \t                &lt;transformer implementation=&quot;org.apache.maven.plugins.shade.resource.ManifestResourceTransformer&quot;&gt;\r\n    \t                  &lt;manifestEntries&gt;\r\n    \t                    &lt;Child1Version&gt;${project.version}&lt;/Child1Version&gt; &lt;!-- How to do this generic for any child pom ???? --&gt;\r\n    \t                  &lt;/manifestEntries&gt;\r\n    \t                &lt;/transformer&gt;\r\n    \t                &lt;transformer implementation=&quot;org.apache.maven.plugins.shade.resource.AppendingTransformer&quot;&gt;\r\n    \t\t\t\t\t\t&lt;resource&gt;META-INF/spring.handlers&lt;/resource&gt;\r\n    \t\t\t\t\t&lt;/transformer&gt;\r\n    \t\t\t\t\t&lt;transformer implementation=&quot;org.apache.maven.plugins.shade.resource.AppendingTransformer&quot;&gt;\r\n    \t\t\t\t\t\t&lt;resource&gt;META-INF/spring.schemas&lt;/resource&gt;\r\n    \t\t\t\t\t&lt;/transformer&gt;\r\n    \t              &lt;/transformers&gt;\r\n    \t            &lt;/configuration&gt;\r\n    \t          &lt;/execution&gt;\r\n    \t        &lt;/executions&gt;\r\n    \t      &lt;/plugin&gt;\r\n    \t\t&lt;/plugins&gt;\r\n    \t&lt;/build&gt;\r\n    \t\t\r\n    &lt;/project&gt;\r\n\r\n\r\nHow could I do it on my parent pom above\r\n\r\n","title":"Parent and child pom with maven shade plugin","body":"<p>I have a parent maven project with its pom and two child projects with their pom having a packaging in jar mode. These two child pom have a class of launch.\nThe problem is that each time I create a new child project, I need a new pom with a jar packaging.\nThe research goal is to create a parent pom in jar packaging mode that removes the MyChildLauncherCLass declaration and standardize the version of each child pom.</p>\n<p>child 1 pom</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot;\n    xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\n    xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd&quot;&gt;\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n\n    &lt;parent&gt;\n        &lt;groupId&gt;myChildGroupId&lt;/groupId&gt;\n        &lt;artifactId&gt;myChildartifactId&lt;/artifactId&gt;\n        &lt;version&gt;myChildVersion&lt;/version&gt;\n    &lt;/parent&gt;\n\n    &lt;artifactId&gt;myChildArtifactId&lt;/artifactId&gt;\n    &lt;packaging&gt;jar&lt;/packaging&gt;\n    &lt;name&gt;${project.artifactId}&lt;/name&gt;\n\n    &lt;build&gt;\n        &lt;sourceDirectory&gt;../../webapp/src/main/java&lt;/sourceDirectory&gt;\n        &lt;resources&gt;\n            &lt;resource&gt;\n                &lt;directory&gt;../../webapp/src/main/resources&lt;/directory&gt;\n            &lt;/resource&gt;\n        &lt;/resources&gt;\n\n        &lt;plugins&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n                &lt;artifactId&gt;maven-shade-plugin&lt;/artifactId&gt;\n                &lt;executions&gt;\n                    &lt;execution&gt;\n                        &lt;phase&gt;package&lt;/phase&gt;\n                        &lt;goals&gt;\n                            &lt;goal&gt;shade&lt;/goal&gt;\n                        &lt;/goals&gt;\n                        &lt;configuration&gt;\n                            &lt;transformers&gt;\n                                &lt;transformer\n                                    implementation=&quot;org.apache.maven.plugins.shade.resource.ManifestResourceTransformer&quot;&gt;\n                                    &lt;manifestEntries&gt;\n                                        &lt;Main-Class&gt;MyChildLauncherCLass&lt;/Main-Class&gt;\n                                        &lt;Child1Version&gt;${project.version}&lt;/Child1Version&gt;\n                                    &lt;/manifestEntries&gt;\n                                &lt;/transformer&gt;\n                                &lt;transformer\n                                    implementation=&quot;org.apache.maven.plugins.shade.resource.AppendingTransformer&quot;&gt;\n                                    &lt;resource&gt;META-INF/spring.handlers&lt;/resource&gt;\n                                &lt;/transformer&gt;\n                                &lt;transformer\n                                    implementation=&quot;org.apache.maven.plugins.shade.resource.AppendingTransformer&quot;&gt;\n                                    &lt;resource&gt;META-INF/spring.schemas&lt;/resource&gt;\n                                &lt;/transformer&gt;\n                            &lt;/transformers&gt;\n                        &lt;/configuration&gt;\n                    &lt;/execution&gt;\n                &lt;/executions&gt;\n            &lt;/plugin&gt;\n        &lt;/plugins&gt;\n\n    &lt;/build&gt;\n\n&lt;/project&gt; \n</code></pre>\n<p>parent pom</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd&quot;&gt;\n\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n\n    &lt;parent&gt;\n        &lt;groupId&gt;myParentgroupId&lt;/groupId&gt;\n        &lt;artifactId&gt;myParentArtifactId1&lt;/artifactId&gt;\n        &lt;version&gt;myParentVersion&lt;/version&gt;\n    &lt;/parent&gt;\n\n    &lt;artifactId&gt;myParentArtifactId2&lt;/artifactId&gt;\n    &lt;packaging&gt;jar&lt;/packaging&gt;\n    &lt;name&gt;${project.artifactId}&lt;/name&gt;\n\n    &lt;dependencies&gt;\n        ... dependencies...\n    &lt;/dependencies&gt;\n\n\n    &lt;build&gt;\n        &lt;plugins&gt;\n          &lt;plugin&gt;\n            &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n            &lt;artifactId&gt;maven-shade-plugin&lt;/artifactId&gt;\n            &lt;executions&gt;\n              &lt;execution&gt;\n                &lt;phase&gt;package&lt;/phase&gt;\n                &lt;goals&gt;\n                  &lt;goal&gt;shade&lt;/goal&gt;\n                &lt;/goals&gt;\n                &lt;configuration&gt;\n                  &lt;finalName&gt;${project.artifactId}&lt;/finalName&gt;\n                  &lt;transformers&gt;\n                    &lt;transformer implementation=&quot;org.apache.maven.plugins.shade.resource.ManifestResourceTransformer&quot;&gt;\n                      &lt;manifestEntries&gt;\n                        &lt;Child1Version&gt;${project.version}&lt;/Child1Version&gt; &lt;!-- How to do this generic for any child pom ???? --&gt;\n                      &lt;/manifestEntries&gt;\n                    &lt;/transformer&gt;\n                    &lt;transformer implementation=&quot;org.apache.maven.plugins.shade.resource.AppendingTransformer&quot;&gt;\n                        &lt;resource&gt;META-INF/spring.handlers&lt;/resource&gt;\n                    &lt;/transformer&gt;\n                    &lt;transformer implementation=&quot;org.apache.maven.plugins.shade.resource.AppendingTransformer&quot;&gt;\n                        &lt;resource&gt;META-INF/spring.schemas&lt;/resource&gt;\n                    &lt;/transformer&gt;\n                  &lt;/transformers&gt;\n                &lt;/configuration&gt;\n              &lt;/execution&gt;\n            &lt;/executions&gt;\n          &lt;/plugin&gt;\n        &lt;/plugins&gt;\n    &lt;/build&gt;\n        \n&lt;/project&gt;\n</code></pre>\n<p>How could I do it on my parent pom above</p>\n"},{"tags":["java","intellij-idea","bytecode"],"comments":[{"owner":{"account_id":14656252,"reputation":672,"user_id":10869284,"display_name":"sigur"},"score":2,"creation_date":1627981399,"post_id":68633146,"comment_id":121293705,"body_markdown":"Hello man, could you copy and past the error here instead of showing that as image on an external site? Thanks","body":"Hello man, could you copy and past the error here instead of showing that as image on an external site? Thanks"},{"owner":{"account_id":2803497,"reputation":25202,"user_id":2411243,"display_name":"Zabuzard"},"score":0,"creation_date":1627981411,"post_id":68633146,"comment_id":121293710,"body_markdown":"Dont compile it manually. Let your IDE do the job. Just create your code and hit the run button. The IDE will put the compiled output into the `bin` folder.","body":"Dont compile it manually. Let your IDE do the job. Just create your code and hit the run button. The IDE will put the compiled output into the <code>bin</code> folder."},{"owner":{"account_id":8344609,"reputation":340,"user_id":6268812,"display_name":"AlgorithmFromHell"},"score":1,"creation_date":1627981436,"post_id":68633146,"comment_id":121293719,"body_markdown":"You don&#39;t need to see the bytecode, certainly not at this stage","body":"You don&#39;t need to see the bytecode, certainly not at this stage"},{"owner":{"account_id":128739,"reputation":3915,"user_id":326807,"accept_rate":100,"display_name":"Reporter"},"score":0,"creation_date":1627981750,"post_id":68633146,"comment_id":121293847,"body_markdown":"@sigur Can you edit your improvement to add an exclaimation mark at the begin of image link text to show the image directly?","body":"@sigur Can you edit your improvement to add an exclaimation mark at the begin of image link text to show the image directly?"},{"owner":{"account_id":22368480,"reputation":11,"user_id":16583893,"display_name":"aa1337"},"score":0,"creation_date":1627981898,"post_id":68633146,"comment_id":121293898,"body_markdown":"@sigur , That was a screenshot that I clipped myself using gyazo however the error is &quot;Bytecode not Found - Unable to parse class file for &#39;Main&#39;.\n\nFor everyone else,\nI was compiling it manually as part of a tutorial. The tutorial is\nhttps://youtu.be/Qgl81fPcLc8?t=1683 \n(I clipped it at the specific time he mentions it)","body":"@sigur , That was a screenshot that I clipped myself using gyazo however the error is &quot;Bytecode not Found - Unable to parse class file for &#39;Main&#39;.  For everyone else, I was compiling it manually as part of a tutorial. The tutorial is <a href=\"https://youtu.be/Qgl81fPcLc8?t=1683\" rel=\"nofollow noreferrer\">youtu.be/Qgl81fPcLc8?t=1683</a>  (I clipped it at the specific time he mentions it)"},{"owner":{"account_id":22368480,"reputation":11,"user_id":16583893,"display_name":"aa1337"},"score":0,"creation_date":1627982035,"post_id":68633146,"comment_id":121293959,"body_markdown":"@AlgorithmFromHell Thanks for the heads up! I was just following along for the tutorial but it&#39;s good to know that I shouldn&#39;t worry too much about it currently however it is an anomaly that I&#39;m worried if I don&#39;t decipher now, it could come back to bite me so that&#39;s why I&#39;m curious as to why Im receiving the error message. Google searches were a bit too saturated so that&#39;s why I came here","body":"@AlgorithmFromHell Thanks for the heads up! I was just following along for the tutorial but it&#39;s good to know that I shouldn&#39;t worry too much about it currently however it is an anomaly that I&#39;m worried if I don&#39;t decipher now, it could come back to bite me so that&#39;s why I&#39;m curious as to why Im receiving the error message. Google searches were a bit too saturated so that&#39;s why I came here"},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1627983814,"post_id":68633146,"comment_id":121294730,"body_markdown":"When you really need to see the bytecode, since you&#39;re an &quot;aspiring developer&quot; you will want to become *au fait* with the generic tools so do `javap -c x.y.z.SomeClass` at the command line","body":"When you really need to see the bytecode, since you&#39;re an &quot;aspiring developer&quot; you will want to become <i>au fait</i> with the generic tools so do <code>javap -c x.y.z.SomeClass</code> at the command line"},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1627985736,"post_id":68633146,"comment_id":121295571,"body_markdown":"The latter. Always use the source ;)","body":"The latter. Always use the source ;)"},{"owner":{"account_id":1995799,"reputation":28352,"user_id":1788806,"accept_rate":94,"display_name":"Willi Mentzel"},"score":0,"creation_date":1635429281,"post_id":68633146,"comment_id":123300489,"body_markdown":"@AlgorithmFromHell That&#39;s not true. If something doesn&#39;t work as expected, it is always nice to go one layer below.","body":"@AlgorithmFromHell That&#39;s not true. If something doesn&#39;t work as expected, it is always nice to go one layer below."}],"owner":{"account_id":22368480,"reputation":11,"user_id":16583893,"display_name":"aa1337"},"comment_count":9,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":1339,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1635429298,"creation_date":1627981247,"question_id":68633146,"body_markdown":"I&#39;ve just started programming and I have a quick question regarding IntelliJ. \r\n\r\nI&#39;ve used different IDEs to practice the simple &quot;HelloWorld&quot; application, just to get a feel for the IDE. \r\n\r\nI have one issue, I created my application for the code \r\n\r\n![See here][1] \r\nbut I get this error when I try to view the bytecode for the compiler: \r\n\r\n![See here again][2]. \r\n\r\nI have already compiled using the command &quot;javac Main.java&quot; and it clearly displays a Main.class and Main.java but I&#39;m unsure why it won&#39;t display the bytecode. \r\n\r\nI&#39;m not 100% sure if I even really need to be able to see the bytecode as an aspiring developer however I am trying to get as much exposure as I can.\r\n\r\n(Now that I think about it, could this have anything to do with JVM itself? Should I reDL and install?)\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/a9JwM.png\r\n  [2]: https://i.stack.imgur.com/YscLJ.png","title":"IntelliJ view compiled bytecode","body":"<p>I've just started programming and I have a quick question regarding IntelliJ.</p>\n<p>I've used different IDEs to practice the simple &quot;HelloWorld&quot; application, just to get a feel for the IDE.</p>\n<p>I have one issue, I created my application for the code</p>\n<p><img src=\"https://i.stack.imgur.com/a9JwM.png\" alt=\"See here\" />\nbut I get this error when I try to view the bytecode for the compiler:</p>\n<p><img src=\"https://i.stack.imgur.com/YscLJ.png\" alt=\"See here again\" />.</p>\n<p>I have already compiled using the command &quot;javac Main.java&quot; and it clearly displays a Main.class and Main.java but I'm unsure why it won't display the bytecode.</p>\n<p>I'm not 100% sure if I even really need to be able to see the bytecode as an aspiring developer however I am trying to get as much exposure as I can.</p>\n<p>(Now that I think about it, could this have anything to do with JVM itself? Should I reDL and install?)</p>\n"},{"tags":["java","database","mongodb","mapreduce"],"comments":[{"owner":{"account_id":5951494,"reputation":12969,"user_id":4679320,"accept_rate":67,"display_name":"prasad_"},"score":0,"creation_date":1635422995,"post_id":69753051,"comment_id":123297408,"body_markdown":"If you are just looking for top level keys (looks like it as per your code), you can do an aggregation query to get all the keys as an array list of strings.","body":"If you are just looking for top level keys (looks like it as per your code), you can do an aggregation query to get all the keys as an array list of strings."}],"owner":{"account_id":23170732,"reputation":19,"user_id":17270036,"display_name":"alexic0n_"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":197,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1635429275,"creation_date":1635419601,"question_id":69753051,"body_markdown":"This is a follow-up to the question here https://stackoverflow.com/questions/2997004/using-map-reduce-for-mapping-the-properties-in-a-collection.\r\n \r\nI currently have a collection containing documents where each document is a form submission. There are multiple forms submissions held within a single mongoDB collection and can be differentiated from one another by the value held within a (key, value) pair with `key=formID`.\r\nI currently have a very lazy method (below) for finding all the keys for documents with a specific `formID`, however hoped that it would be possible to optimize this by using MongoDBs MapReduce functionality.\r\n \r\n```java\r\nBson bsonFilter = Filters.eq(&quot;formid&quot;, formId);\r\nFindIterable&lt;Document&gt; submissionsById = collection.find(bsonFilter);\r\nSet&lt;String&gt; keys = new HashSet&lt;&gt;();\r\nfor (Document submission : submissionsById){\r\n    keys.addAll(submission.keySet());\r\n}\r\n\r\nJSONArray keysArray = new JSONArray();\r\nkeys.forEach(keysArray::put);\r\n```\r\n\r\nIs this possible, or is the rudimentary solution I&#39;ve come up with going to be as good as I can manage? Thanks.","title":"MongoDB : Collecting all keys within a collection from documents with specific key value pair (in java)","body":"<p>This is a follow-up to the question here <a href=\"https://stackoverflow.com/questions/2997004/using-map-reduce-for-mapping-the-properties-in-a-collection\">Using map/reduce for mapping the properties in a collection</a>.</p>\n<p>I currently have a collection containing documents where each document is a form submission. There are multiple forms submissions held within a single mongoDB collection and can be differentiated from one another by the value held within a (key, value) pair with <code>key=formID</code>.\nI currently have a very lazy method (below) for finding all the keys for documents with a specific <code>formID</code>, however hoped that it would be possible to optimize this by using MongoDBs MapReduce functionality.</p>\n<pre class=\"lang-java prettyprint-override\"><code>Bson bsonFilter = Filters.eq(&quot;formid&quot;, formId);\nFindIterable&lt;Document&gt; submissionsById = collection.find(bsonFilter);\nSet&lt;String&gt; keys = new HashSet&lt;&gt;();\nfor (Document submission : submissionsById){\n    keys.addAll(submission.keySet());\n}\n\nJSONArray keysArray = new JSONArray();\nkeys.forEach(keysArray::put);\n</code></pre>\n<p>Is this possible, or is the rudimentary solution I've come up with going to be as good as I can manage? Thanks.</p>\n"},{"tags":["java","android-studio","google-cloud-firestore"],"comments":[{"owner":{"account_id":6386919,"reputation":8069,"user_id":5737950,"display_name":"nima"},"score":0,"creation_date":1635456413,"post_id":69755377,"comment_id":123310965,"body_markdown":"add the related code snippet.","body":"add the related code snippet."},{"owner":{"account_id":6819231,"reputation":132841,"user_id":5246885,"accept_rate":78,"display_name":"Alex Mamo"},"score":0,"creation_date":1635490897,"post_id":69755377,"comment_id":123317372,"body_markdown":"You cannot simply do that. Firebase API is asynchronous. So please check the duplicate to see how can you solve this using a callback. You might also be interested in reading this article, [How to read data from Cloud Firestore using get()?](https://medium.com/firebase-tips-tricks/how-to-read-data-from-cloud-firestore-using-get-bf03b6ee4953).","body":"You cannot simply do that. Firebase API is asynchronous. So please check the duplicate to see how can you solve this using a callback. You might also be interested in reading this article, <a href=\"https://medium.com/firebase-tips-tricks/how-to-read-data-from-cloud-firestore-using-get-bf03b6ee4953\" rel=\"nofollow noreferrer\">How to read data from Cloud Firestore using get()?</a>."},{"owner":{"account_id":22931287,"reputation":9,"user_id":17065527,"display_name":"chanaka_ayesh"},"score":0,"creation_date":1635495127,"post_id":69755377,"comment_id":123318741,"body_markdown":"thank you for reply. but this deocumenttation is not for java","body":"thank you for reply. but this deocumenttation is not for java"}],"owner":{"account_id":22931287,"reputation":9,"user_id":17065527,"display_name":"chanaka_ayesh"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":14,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"closed_date":1635490818,"answer_count":0,"score":0,"last_activity_date":1635429116,"creation_date":1635429116,"question_id":69755377,"body_markdown":"I want to access a firestore value into a global variable .\r\nwhen I excute it the out will be &quot;&quot;\r\n","title":"How to make the data from Firestore in to a global variable in android studio","body":"<p>I want to access a firestore value into a global variable .\nwhen I excute it the out will be &quot;&quot;</p>\n"},{"tags":["java","spring","spring-boot","servlets","tomcat8"],"comments":[{"owner":{"account_id":14915510,"reputation":396,"user_id":14674015,"display_name":"seism0saurus"},"score":0,"creation_date":1635428707,"post_id":69755161,"comment_id":123300208,"body_markdown":"Does the long reaction time occur after the start of the service or is it random? Have you watched the garbage collector of your application? I often use Spring Actuators to monitor the behavior of my service.","body":"Does the long reaction time occur after the start of the service or is it random? Have you watched the garbage collector of your application? I often use Spring Actuators to monitor the behavior of my service."},{"owner":{"account_id":9927275,"reputation":147,"user_id":7348388,"display_name":"Johnson"},"score":0,"creation_date":1635488926,"post_id":69755161,"comment_id":123316793,"body_markdown":"@seism0saurus \nI know it&#39;s slow when I first turn on the app, but sometimes it is random.","body":"@seism0saurus  I know it&#39;s slow when I first turn on the app, but sometimes it is random."},{"owner":{"account_id":9927275,"reputation":147,"user_id":7348388,"display_name":"Johnson"},"score":0,"creation_date":1635489472,"post_id":69755161,"comment_id":123316941,"body_markdown":"S0     S1     E      O      M     CCS    YGC                          YGCT    FGC    FGCT    CGC    CGCT     GCT         \n                                             -    `0.00 100.00  47.02  30.06  96.86  91.30     18    0.286     0    0.000     6    0.012    0.298`","body":"S0     S1     E      O      M     CCS    YGC                          YGCT    FGC    FGCT    CGC    CGCT     GCT                                                       -    <code>0.00 100.00  47.02  30.06  96.86  91.30     18    0.286     0    0.000     6    0.012    0.298</code>"}],"answers":[{"tags":[],"owner":{"account_id":23134322,"reputation":107,"user_id":17238746,"display_name":"Ankit Srivastava"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1635428980,"creation_date":1635428980,"answer_id":69755344,"question_id":69755161,"body_markdown":"Concerning the difference of performance between Tomcat/Jetty. May I suggest you to try an integration test with a MockMvc [See the get started][1]\r\n\r\nI know how much is hard to split test between OPS infrastructures and DEV framework, but with SpringBoot you can test and display the execution performance with a unit test.\r\n\r\nIterate a call to one on your API any time you want and add a StopWatch around the execution.\r\n\r\n    @RunWith(SpringRunner.class)\r\n    @SpringBootTest\r\n    @AutoConfigureMockMvc\r\n    public class ApplicationTest {\r\n          private final static Logger LOGGER = LoggerFactory.getLogger(ApplicationTest .class);\r\n      @Autowired\r\n      private MockMvc mockMvc;\r\n    \r\n      @Test\r\n      public void shouldReturnDefaultMessage() throws Exception {\r\n        StopWatch stopWatch = new StopWatch(&quot;Testing REST API performances&quot;);\r\n    \r\n        for(int i=1; i&lt;=5; i&lt;++) {\r\n          stopWatch.start(&quot;Test iteration &quot; + i);\r\n          this.mockMvc.perform(get(&quot;/&quot;)).andDo(print()).andExpect(status().isOk())\r\n                .andExpect(content().string(containsString(&quot;Hello World&quot;)));\r\n          stopWatch.stop();\r\n        }\r\n        // Print the result\r\n        LOGGER.info(stopWatch.prettyPrint());\r\n      }\r\n    }\r\nThis test should bring to light the performance issue should be the init of the rest controller.\r\n\r\nLocally I have also a latency at the first call.\r\n\r\nStopWatch &#39;Testing REST API performances&#39;: running time (millis) = 806\r\n\r\n00510ms 063 % Test iteration 1\r\n00072ms 009 % Test iteration 2\r\n00080ms 010 % Test iteration 3\r\n00071ms 009 % Test iteration 4\r\n00073ms 009 % Test iteration 5\r\nAs you can see the first call take a long time.\r\n\r\nHope I my answer will help you to have reach you performance expected and help you in your choice.\r\n\r\n  [1]: https://spring.io/guides/gs/testing-web/","title":"Spring Restful API - Sometimes, response time is too long","body":"<p>Concerning the difference of performance between Tomcat/Jetty. May I suggest you to try an integration test with a MockMvc <a href=\"https://spring.io/guides/gs/testing-web/\" rel=\"nofollow noreferrer\">See the get started</a></p>\n<p>I know how much is hard to split test between OPS infrastructures and DEV framework, but with SpringBoot you can test and display the execution performance with a unit test.</p>\n<p>Iterate a call to one on your API any time you want and add a StopWatch around the execution.</p>\n<pre><code>@RunWith(SpringRunner.class)\n@SpringBootTest\n@AutoConfigureMockMvc\npublic class ApplicationTest {\n      private final static Logger LOGGER = LoggerFactory.getLogger(ApplicationTest .class);\n  @Autowired\n  private MockMvc mockMvc;\n\n  @Test\n  public void shouldReturnDefaultMessage() throws Exception {\n    StopWatch stopWatch = new StopWatch(&quot;Testing REST API performances&quot;);\n\n    for(int i=1; i&lt;=5; i&lt;++) {\n      stopWatch.start(&quot;Test iteration &quot; + i);\n      this.mockMvc.perform(get(&quot;/&quot;)).andDo(print()).andExpect(status().isOk())\n            .andExpect(content().string(containsString(&quot;Hello World&quot;)));\n      stopWatch.stop();\n    }\n    // Print the result\n    LOGGER.info(stopWatch.prettyPrint());\n  }\n}\n</code></pre>\n<p>This test should bring to light the performance issue should be the init of the rest controller.</p>\n<p>Locally I have also a latency at the first call.</p>\n<p>StopWatch 'Testing REST API performances': running time (millis) = 806</p>\n<p>00510ms 063 % Test iteration 1\n00072ms 009 % Test iteration 2\n00080ms 010 % Test iteration 3\n00071ms 009 % Test iteration 4\n00073ms 009 % Test iteration 5\nAs you can see the first call take a long time.</p>\n<p>Hope I my answer will help you to have reach you performance expected and help you in your choice.</p>\n"},{"tags":[],"owner":{"account_id":22051200,"reputation":290,"user_id":17269314,"display_name":"Florian S."},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1635429083,"creation_date":1635429083,"answer_id":69755371,"question_id":69755161,"body_markdown":"&gt; Transfert time is the time required to get the first byte of the response.\r\n\r\nAccording to this definition, I would tend to say that it&#39;s the time your API doing its processing --&gt; At the API level, some requests could explain a longer processing time? Complexity of algorithm, not the same number of data processed ... ?\r\n\r\nBy the way, at first call, don&#39;t forget that the servlet is created so the first response can take more time.\r\n\r\n","title":"Spring Restful API - Sometimes, response time is too long","body":"<blockquote>\n<p>Transfert time is the time required to get the first byte of the response.</p>\n</blockquote>\n<p>According to this definition, I would tend to say that it's the time your API doing its processing --&gt; At the API level, some requests could explain a longer processing time? Complexity of algorithm, not the same number of data processed ... ?</p>\n<p>By the way, at first call, don't forget that the servlet is created so the first response can take more time.</p>\n"}],"owner":{"account_id":9927275,"reputation":147,"user_id":7348388,"display_name":"Johnson"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":3386,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1635429083,"creation_date":1635428337,"question_id":69755161,"body_markdown":"There is a server that I operate.\r\nI built a Restful API server with Spring Boot, and when I test my API with Postman, it usually takes about 20ms to 50ms to respond. But sometimes it takes up to 5.2 seconds to respond.\r\n\r\nI wanted to find out the cause, so I tried to check where the bottleneck occurred.\r\nWhen I calculate the actual execution time by implementing PreHandle and PostHandle in the InterceptorHandler class, it ends in 5 ms.\r\nIn the java log, I can check the 200OK log with the Servelet log 5 seconds after the business logic is already over.\r\n\r\nWhat&#39;s a way to check what&#39;s happening in the meantime?\r\nBoth network and memory CPU utilization have no singularity. There are no users yet because it is a test server.\r\nHowever, there are about three spring boot apps running on this server.\r\n\r\n\r\nI checked these things.\r\n\r\n        1004  pidstat 1\r\n     1005  uptime\r\n     1006   dmesg | tail\r\n     1008  vmstat 1\r\n     1011  mpstat -P ALL 1\r\n     1012  iostat -xz 1\r\n     1013   free -m\r\n     1014  sar -n DEV 1\r\n    1019  sar -n TCP,ETCP 1\r\n\r\n[![Normal CASE][1]][1]\r\n\r\n[![Too Long CASE][2]][2]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/UGart.png\r\n  [2]: https://i.stack.imgur.com/5yWQ4.png","title":"Spring Restful API - Sometimes, response time is too long","body":"<p>There is a server that I operate.\nI built a Restful API server with Spring Boot, and when I test my API with Postman, it usually takes about 20ms to 50ms to respond. But sometimes it takes up to 5.2 seconds to respond.</p>\n<p>I wanted to find out the cause, so I tried to check where the bottleneck occurred.\nWhen I calculate the actual execution time by implementing PreHandle and PostHandle in the InterceptorHandler class, it ends in 5 ms.\nIn the java log, I can check the 200OK log with the Servelet log 5 seconds after the business logic is already over.</p>\n<p>What's a way to check what's happening in the meantime?\nBoth network and memory CPU utilization have no singularity. There are no users yet because it is a test server.\nHowever, there are about three spring boot apps running on this server.</p>\n<p>I checked these things.</p>\n<pre><code>    1004  pidstat 1\n 1005  uptime\n 1006   dmesg | tail\n 1008  vmstat 1\n 1011  mpstat -P ALL 1\n 1012  iostat -xz 1\n 1013   free -m\n 1014  sar -n DEV 1\n1019  sar -n TCP,ETCP 1\n</code></pre>\n<p><a href=\"https://i.stack.imgur.com/UGart.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/UGart.png\" alt=\"Normal CASE\" /></a></p>\n<p><a href=\"https://i.stack.imgur.com/5yWQ4.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/5yWQ4.png\" alt=\"Too Long CASE\" /></a></p>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":15856821,"reputation":2451,"user_id":11441011,"display_name":"maloomeister"},"score":2,"creation_date":1635410490,"post_id":69750835,"comment_id":123292073,"body_markdown":"You are missing a `break` when checking for the digit(s).","body":"You are missing a <code>break</code> when checking for the digit(s)."},{"owner":{"account_id":23051949,"reputation":15,"user_id":17168623,"display_name":"Duke"},"score":0,"creation_date":1635411140,"post_id":69750835,"comment_id":123292380,"body_markdown":"But when I add &quot;break&quot; when checking for the digit, the outcome is still equal to 7 instead of 5","body":"But when I add &quot;break&quot; when checking for the digit, the outcome is still equal to 7 instead of 5"},{"owner":{"account_id":17835,"reputation":303895,"user_id":40342,"accept_rate":62,"display_name":"Joachim Sauer"},"score":2,"creation_date":1635411279,"post_id":69750835,"comment_id":123292446,"body_markdown":"Your breaks only break out of the *inner* loop. To break out of the outer loop you need to add a label to the outer loop (like `digitCheck:`) and then use the labelled break `break digitCheck`). Labelled breaks are a rarely-used feature in Java. Mostly because more often than not you can make the code better structured and more readable by extracting stuff into methods instead.","body":"Your breaks only break out of the <i>inner</i> loop. To break out of the outer loop you need to add a label to the outer loop (like <code>digitCheck:</code>) and then use the labelled break <code>break digitCheck</code>). Labelled breaks are a rarely-used feature in Java. Mostly because more often than not you can make the code better structured and more readable by extracting stuff into methods instead."},{"owner":{"account_id":2421447,"reputation":3223,"user_id":2114313,"accept_rate":67,"display_name":"frIT"},"score":0,"creation_date":1635412010,"post_id":69750835,"comment_id":123292751,"body_markdown":"I also don&#39;t see your check for &quot;length greater than 12&quot; that adds another point. The code looks like you are still learning, in which case loops and breaks are good to learn, but you *could* make it much simpler (for the programmer :-) ) by [matching against a regular expression](https://docs.oracle.com/javase/8/docs/api/java/util/regex/Pattern.html#matches-java.lang.String-java.lang.CharSequence-) for each of your &quot;contains&quot; conditions. Amongst other simplifications.","body":"I also don&#39;t see your check for &quot;length greater than 12&quot; that adds another point. The code looks like you are still learning, in which case loops and breaks are good to learn, but you <i>could</i> make it much simpler (for the programmer :-) ) by <a href=\"https://docs.oracle.com/javase/8/docs/api/java/util/regex/Pattern.html#matches-java.lang.String-java.lang.CharSequence-\" rel=\"nofollow noreferrer\">matching against a regular expression</a> for each of your &quot;contains&quot; conditions. Amongst other simplifications."},{"owner":{"account_id":2408158,"reputation":661,"user_id":4617428,"display_name":"rdlopes"},"score":0,"creation_date":1635412186,"post_id":69750835,"comment_id":123292831,"body_markdown":"maloomeister &amp; JoachimSauer have it right: you only break once on digits check, meaning you keep looping in the wrapping for loop.\nOn top of that, you might need to check style, as Java classes would usually be named with first letter uppercase.\nTo wrap up on frIT comment, you might prefer checking against regex, as done here: https://www.javacodeexamples.com/check-password-strength-in-java-example/668","body":"maloomeister &amp; JoachimSauer have it right: you only break once on digits check, meaning you keep looping in the wrapping for loop. On top of that, you might need to check style, as Java classes would usually be named with first letter uppercase. To wrap up on frIT comment, you might prefer checking against regex, as done here: <a href=\"https://www.javacodeexamples.com/check-password-strength-in-java-example/668\" rel=\"nofollow noreferrer\">javacodeexamples.com/check-password-strength-in-java-example&zwnj;&#8203;/&hellip;</a>"},{"owner":{"account_id":322981,"reputation":310745,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"score":0,"creation_date":1635439887,"post_id":69750835,"comment_id":123305313,"body_markdown":"Poor title. Rewrite to summarize your specific technical issue.","body":"Poor title. Rewrite to summarize your specific technical issue."}],"answers":[{"tags":[],"owner":{"account_id":2485939,"reputation":19426,"user_id":2164365,"accept_rate":40,"display_name":"Abra"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1635420585,"creation_date":1635420585,"answer_id":69753289,"question_id":69750835,"body_markdown":"First the code. Explanations appear after the code.\r\n```java\r\nimport java.util.Scanner;\r\n\r\npublic class PasswordDemo {\r\n    String password;\r\n    int point;\r\n\r\n    // getter and setter\r\n    public int getPoint() {\r\n        return point;\r\n    }\r\n\r\n    public void setPoint(int point) {\r\n        this.point = point;\r\n    }\r\n\r\n    public String getPassword() {\r\n        return password;\r\n    }\r\n\r\n    public void setPassword(String password) {\r\n        if (password != null  &amp;&amp;  !password.isEmpty()) {\r\n            this.password = password;\r\n        }\r\n        else {\r\n            throw new IllegalArgumentException(&quot;Null or empty password.&quot;);\r\n        }\r\n    }\r\n\r\n    public PasswordDemo(String password) {\r\n        setPassword(password);\r\n    }\r\n\r\n    // main method\r\n    public int point() {\r\n        point = 0;\r\n        // length\r\n        int len = password.length();\r\n        if (len &gt;= 8  &amp;&amp;  len &lt;= 12) {\r\n            point++;\r\n        }\r\n        else if (len &gt; 12) {\r\n            point += 2;\r\n        }\r\n        // uppercase\r\n        if (password.matches(&quot;^.*[A-Z].*$&quot;)) {\r\n            point++;\r\n        }\r\n        // lowercase\r\n        if (password.matches(&quot;^.*[a-z].*$&quot;)) {\r\n            point++;\r\n        }\r\n        // digit\r\n        if (password.matches(&quot;^.*[0-9].*$&quot;)) {\r\n            point++;\r\n        }\r\n        // non-alphabetic\r\n        char[] non_alphabetic = {&#39;!&#39;, &#39;@&#39;, &#39;#&#39;, &#39;$&#39;, &#39;%&#39;, &#39;^&#39;, &#39;&amp;&#39;, &#39;*&#39;, &#39;(&#39;, &#39;)&#39;, &#39;-&#39;, &#39;+&#39;};\r\n        for (int i = 0; i &lt; password.length(); i++) {\r\n            boolean found = false;\r\n            for (int k = 0; k &lt; non_alphabetic.length; k++) {\r\n                if (password.charAt(i) == non_alphabetic[k]) {\r\n                    point++;\r\n                    found = true;\r\n                    break;\r\n                }\r\n            }\r\n            if (found) {\r\n                break;\r\n            }\r\n        }\r\n        return point;\r\n    }\r\n\r\n    public static void main(String[] args) {\r\n        Scanner sc = new Scanner(System.in);\r\n        System.out.println(&quot;Type your password&quot;);\r\n        PasswordDemo password = new PasswordDemo(sc.nextLine());\r\n        System.out.println(password.point());\r\n    }\r\n}\r\n```\r\n* I changed the class name so as to adhere to [java naming conventions][1].\r\n* I don&#39;t think you need a no-argument constructor because member `password`, of class `PasswordDemo`, should not be null or empty since it doesn&#39;t make sense to have a null or empty password. Remember, you should always write code that handles unexpected data. Hence method `setPassword` throws an [unchecked exception][2] if the method argument is either null or an empty string.\r\n* Method `point`\r\n    - Note that `point++` is the same as `point = point + 1`. Similarly, `point += 2` is the same as `point = point + 2`.\r\n    - If the password length is between 8 and 12, then one is added to `point`. If the password length is **not** between 8 and 12 but the length is greater than 12, then 2 is added to `point`.\r\n    - I use [regular expressions][3] to check whether the password contains at least one uppercase letter. I also use regular expressions to check whether the password contains a lowercase letter and whether it contains a digit. The regular expression for the uppercase letter check is as follows.\r\n        1. `^` means the start of the password\r\n        2. `.` means any character and `*` means zero or more times, so `.*` means zero or more characters.\r\n        3. `[A-Z]` means a single, uppercase letter of the English alphabet.\r\n        4. `$` means the end of the password.\r\n\r\nHence the regular expression searches for an uppercase letter in the password. I assume you can now understand the other two regular expressions. `^.*[a-z].*$` searches for a lowercase letter and `^.*[0-9].*$` searches for a digit.\r\n\r\nFinally, the test for a non-alphanumeric character uses your code that iterates through the characters of the password and for each character, it iterates through the list of non-alphanumeric characters. As mentioned in the comments to your question, a `break` only exits the loop it is in. Since the `break` is in a nested loop, it only exits the inner loop. I use a boolean variable to test whether I need to `break` in the outer loop. This is not the only way but it is the way I prefer. Another way (as mentioned in the comments to your question) is to use a label. Note that there is no &quot;best&quot; way. Decide which way you prefer and use it. Just remember that, as a professional programmer, other programmers may need to make changes to your code. Hence it is important that the code is written in a way that other programmers can easily read and understand.\r\n\r\nAccording to the rules (as I understand them and as I have implemented them in the above code), if the password is\r\n```none\r\nHellllllo@123\r\n```\r\nthen its point value is 6.\r\n\r\n* The length is greater than 12 so two points.\r\n* It contains an uppercase letter so another one point.\r\n* It contains a lowercase letter so another one point.\r\n* It contains a digit so another one point.\r\n* It contains a non-alphanumeric character so another one point.\r\n\r\nThe value is therefore\r\n```none\r\n2 + 1 + 1 + 1 + 1\r\n```\r\nSo unless I did not understand the rules, you are mistaken if you think that the point value of *Hellllllo@123* is 5.\r\n\r\n\r\n  [1]: https://www.oracle.com/java/technologies/javase/codeconventions-namingconventions.html\r\n  [2]: https://docs.oracle.com/javase/tutorial/essential/exceptions/runtime.html\r\n  [3]: https://docs.oracle.com/javase/tutorial/essential/regex/index.html","title":"Why are my results different from what I want?","body":"<p>First the code. Explanations appear after the code.</p>\n<pre class=\"lang-java prettyprint-override\"><code>import java.util.Scanner;\n\npublic class PasswordDemo {\n    String password;\n    int point;\n\n    // getter and setter\n    public int getPoint() {\n        return point;\n    }\n\n    public void setPoint(int point) {\n        this.point = point;\n    }\n\n    public String getPassword() {\n        return password;\n    }\n\n    public void setPassword(String password) {\n        if (password != null  &amp;&amp;  !password.isEmpty()) {\n            this.password = password;\n        }\n        else {\n            throw new IllegalArgumentException(&quot;Null or empty password.&quot;);\n        }\n    }\n\n    public PasswordDemo(String password) {\n        setPassword(password);\n    }\n\n    // main method\n    public int point() {\n        point = 0;\n        // length\n        int len = password.length();\n        if (len &gt;= 8  &amp;&amp;  len &lt;= 12) {\n            point++;\n        }\n        else if (len &gt; 12) {\n            point += 2;\n        }\n        // uppercase\n        if (password.matches(&quot;^.*[A-Z].*$&quot;)) {\n            point++;\n        }\n        // lowercase\n        if (password.matches(&quot;^.*[a-z].*$&quot;)) {\n            point++;\n        }\n        // digit\n        if (password.matches(&quot;^.*[0-9].*$&quot;)) {\n            point++;\n        }\n        // non-alphabetic\n        char[] non_alphabetic = {'!', '@', '#', '$', '%', '^', '&amp;', '*', '(', ')', '-', '+'};\n        for (int i = 0; i &lt; password.length(); i++) {\n            boolean found = false;\n            for (int k = 0; k &lt; non_alphabetic.length; k++) {\n                if (password.charAt(i) == non_alphabetic[k]) {\n                    point++;\n                    found = true;\n                    break;\n                }\n            }\n            if (found) {\n                break;\n            }\n        }\n        return point;\n    }\n\n    public static void main(String[] args) {\n        Scanner sc = new Scanner(System.in);\n        System.out.println(&quot;Type your password&quot;);\n        PasswordDemo password = new PasswordDemo(sc.nextLine());\n        System.out.println(password.point());\n    }\n}\n</code></pre>\n<ul>\n<li>I changed the class name so as to adhere to <a href=\"https://www.oracle.com/java/technologies/javase/codeconventions-namingconventions.html\" rel=\"nofollow noreferrer\">java naming conventions</a>.</li>\n<li>I don't think you need a no-argument constructor because member <code>password</code>, of class <code>PasswordDemo</code>, should not be null or empty since it doesn't make sense to have a null or empty password. Remember, you should always write code that handles unexpected data. Hence method <code>setPassword</code> throws an <a href=\"https://docs.oracle.com/javase/tutorial/essential/exceptions/runtime.html\" rel=\"nofollow noreferrer\">unchecked exception</a> if the method argument is either null or an empty string.</li>\n<li>Method <code>point</code>\n<ul>\n<li>Note that <code>point++</code> is the same as <code>point = point + 1</code>. Similarly, <code>point += 2</code> is the same as <code>point = point + 2</code>.</li>\n<li>If the password length is between 8 and 12, then one is added to <code>point</code>. If the password length is <strong>not</strong> between 8 and 12 but the length is greater than 12, then 2 is added to <code>point</code>.</li>\n<li>I use <a href=\"https://docs.oracle.com/javase/tutorial/essential/regex/index.html\" rel=\"nofollow noreferrer\">regular expressions</a> to check whether the password contains at least one uppercase letter. I also use regular expressions to check whether the password contains a lowercase letter and whether it contains a digit. The regular expression for the uppercase letter check is as follows.\n<ol>\n<li><code>^</code> means the start of the password</li>\n<li><code>.</code> means any character and <code>*</code> means zero or more times, so <code>.*</code> means zero or more characters.</li>\n<li><code>[A-Z]</code> means a single, uppercase letter of the English alphabet.</li>\n<li><code>$</code> means the end of the password.</li>\n</ol>\n</li>\n</ul>\n</li>\n</ul>\n<p>Hence the regular expression searches for an uppercase letter in the password. I assume you can now understand the other two regular expressions. <code>^.*[a-z].*$</code> searches for a lowercase letter and <code>^.*[0-9].*$</code> searches for a digit.</p>\n<p>Finally, the test for a non-alphanumeric character uses your code that iterates through the characters of the password and for each character, it iterates through the list of non-alphanumeric characters. As mentioned in the comments to your question, a <code>break</code> only exits the loop it is in. Since the <code>break</code> is in a nested loop, it only exits the inner loop. I use a boolean variable to test whether I need to <code>break</code> in the outer loop. This is not the only way but it is the way I prefer. Another way (as mentioned in the comments to your question) is to use a label. Note that there is no &quot;best&quot; way. Decide which way you prefer and use it. Just remember that, as a professional programmer, other programmers may need to make changes to your code. Hence it is important that the code is written in a way that other programmers can easily read and understand.</p>\n<p>According to the rules (as I understand them and as I have implemented them in the above code), if the password is</p>\n<pre class=\"lang-none prettyprint-override\"><code>Hellllllo@123\n</code></pre>\n<p>then its point value is 6.</p>\n<ul>\n<li>The length is greater than 12 so two points.</li>\n<li>It contains an uppercase letter so another one point.</li>\n<li>It contains a lowercase letter so another one point.</li>\n<li>It contains a digit so another one point.</li>\n<li>It contains a non-alphanumeric character so another one point.</li>\n</ul>\n<p>The value is therefore</p>\n<pre class=\"lang-none prettyprint-override\"><code>2 + 1 + 1 + 1 + 1\n</code></pre>\n<p>So unless I did not understand the rules, you are mistaken if you think that the point value of <em>Hellllllo@123</em> is 5.</p>\n"}],"owner":{"account_id":23051949,"reputation":15,"user_id":17168623,"display_name":"Duke"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":99,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1635428957,"creation_date":1635410347,"question_id":69750835,"body_markdown":"First, I will ask the user to type the password, then my code will measure the strength of this password as the following rules:\r\n* Length:\r\n  * From 8 to 12, 1 point.\r\n  * \\&gt; 12, 2 points.\r\n*\tContains at least one uppercase letter: 1 point\r\n*\tContains at least one lowercase letter: 1 point\r\n*\tContains at least one digit: 1 point\r\n*\tContains non-alphanumeric characters (symbols): 1 point\r\n\r\nI have already finished the code but when I type the password is &quot;Hellllllo@123&quot;, the result will equal 7 instead of 5. I know my mistake will happen when the password contains the digit and non_aplhanumeric characters but I don&#39;t know how to fix it.\r\n\r\n``` lang-java\r\n    public class passwordDemo\r\n    {\r\n        String password;\r\n        int point;\r\n\r\n        //getter and setter\r\n        public int getPoint()\r\n        {\r\n            return point;\r\n        }\r\n\r\n        public void setPoint(int point)\r\n        {\r\n            this.point = point;\r\n        }\r\n\r\n        public String getPassword()\r\n        {\r\n            return password;\r\n        }\r\n\r\n        public void setPassword(String password)\r\n        {\r\n            this.password = password;\r\n        }\r\n\r\n        public passwordDemo(String password)\r\n        {\r\n            this.password = password;\r\n        }\r\n\r\n        public passwordDemo()\r\n        {\r\n        }\r\n\r\n        //main method\r\n\r\n        public int point()\r\n        {\r\n            point = 0;\r\n            //length\r\n            if (password.length() &gt;= 8)\r\n            {\r\n                point += 1;\r\n            }\r\n        //upper and lower\r\n            String pass_upper = password.toUpperCase();\r\n            String pass_lower = password.toLowerCase();\r\n\r\n            for (int i = 0; i &lt; password.length(); i++) {\r\n                if (password.charAt(i) == pass_upper.charAt(i))\r\n                {\r\n                    point += 1;\r\n                    break;\r\n                }\r\n            }\r\n            for (int k = 0; k &lt; password.length(); k++) {\r\n                if (password.charAt(k) == pass_lower.charAt(k))\r\n                {\r\n                    point += 1;\r\n                    break;\r\n                }\r\n            }\r\n        //digit\r\n            String digit = &quot;0123456789&quot;;\r\n            for (int i = 0; i &lt; password.length(); i++) {\r\n                for (int k = 0; k &lt; digit.length(); k++) {\r\n                    if (password.charAt(i) == digit.charAt(k))\r\n                    {\r\n                        point += 1;\r\n                        break;\r\n                    }\r\n                }\r\n            }\r\n\r\n            //non-alphabetic\r\n            char[]non_alphabetic = {\r\n                &#39;!&#39;, &#39;@&#39;, &#39;#&#39;, &#39;$&#39;, &#39;%&#39;, &#39;^&#39;, &#39;&amp;&#39;, &#39;*&#39;, &#39;(&#39;, &#39;)&#39;, &#39;-&#39;,\r\n                &#39;+&#39;};\r\n            for (int i = 0; i &lt; password.length(); i++) {\r\n                for (int k = 0; k &lt; non_alphabetic.length; k++) {\r\n                    if (password.charAt(i) == non_alphabetic[k])\r\n                    {\r\n                        point += 1;\r\n                        break;\r\n                    }\r\n                }\r\n            }\r\n\r\n            return point;\r\n        }\r\n    }\r\n```\r\n\r\n```java\r\nimport java.util.Scanner;\r\n\r\npublic class Strength_password\r\n{\r\n    public static void main(String[]args)\r\n    {\r\n        Scanner sc = new Scanner(System.in);\r\n        passwordDemo password = new passwordDemo();\r\n        System.out.println(&quot;Type your password&quot;);\r\n        password.setPassword(sc.nextLine());\r\n        System.out.println(password.point());\r\n    }\r\n}\r\n```\r\n","title":"Why are my results different from what I want?","body":"<p>First, I will ask the user to type the password, then my code will measure the strength of this password as the following rules:</p>\n<ul>\n<li>Length:\n<ul>\n<li>From 8 to 12, 1 point.</li>\n<li>&gt; 12, 2 points.</li>\n</ul>\n</li>\n<li>Contains at least one uppercase letter: 1 point</li>\n<li>Contains at least one lowercase letter: 1 point</li>\n<li>Contains at least one digit: 1 point</li>\n<li>Contains non-alphanumeric characters (symbols): 1 point</li>\n</ul>\n<p>I have already finished the code but when I type the password is &quot;Hellllllo@123&quot;, the result will equal 7 instead of 5. I know my mistake will happen when the password contains the digit and non_aplhanumeric characters but I don't know how to fix it.</p>\n<pre class=\"lang-java prettyprint-override\"><code>    public class passwordDemo\n    {\n        String password;\n        int point;\n\n        //getter and setter\n        public int getPoint()\n        {\n            return point;\n        }\n\n        public void setPoint(int point)\n        {\n            this.point = point;\n        }\n\n        public String getPassword()\n        {\n            return password;\n        }\n\n        public void setPassword(String password)\n        {\n            this.password = password;\n        }\n\n        public passwordDemo(String password)\n        {\n            this.password = password;\n        }\n\n        public passwordDemo()\n        {\n        }\n\n        //main method\n\n        public int point()\n        {\n            point = 0;\n            //length\n            if (password.length() &gt;= 8)\n            {\n                point += 1;\n            }\n        //upper and lower\n            String pass_upper = password.toUpperCase();\n            String pass_lower = password.toLowerCase();\n\n            for (int i = 0; i &lt; password.length(); i++) {\n                if (password.charAt(i) == pass_upper.charAt(i))\n                {\n                    point += 1;\n                    break;\n                }\n            }\n            for (int k = 0; k &lt; password.length(); k++) {\n                if (password.charAt(k) == pass_lower.charAt(k))\n                {\n                    point += 1;\n                    break;\n                }\n            }\n        //digit\n            String digit = &quot;0123456789&quot;;\n            for (int i = 0; i &lt; password.length(); i++) {\n                for (int k = 0; k &lt; digit.length(); k++) {\n                    if (password.charAt(i) == digit.charAt(k))\n                    {\n                        point += 1;\n                        break;\n                    }\n                }\n            }\n\n            //non-alphabetic\n            char[]non_alphabetic = {\n                '!', '@', '#', '$', '%', '^', '&amp;', '*', '(', ')', '-',\n                '+'};\n            for (int i = 0; i &lt; password.length(); i++) {\n                for (int k = 0; k &lt; non_alphabetic.length; k++) {\n                    if (password.charAt(i) == non_alphabetic[k])\n                    {\n                        point += 1;\n                        break;\n                    }\n                }\n            }\n\n            return point;\n        }\n    }\n</code></pre>\n<pre class=\"lang-java prettyprint-override\"><code>import java.util.Scanner;\n\npublic class Strength_password\n{\n    public static void main(String[]args)\n    {\n        Scanner sc = new Scanner(System.in);\n        passwordDemo password = new passwordDemo();\n        System.out.println(&quot;Type your password&quot;);\n        password.setPassword(sc.nextLine());\n        System.out.println(password.point());\n    }\n}\n</code></pre>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":4362282,"reputation":92954,"user_id":3558960,"accept_rate":60,"display_name":"Robby Cornelissen"},"score":1,"creation_date":1635414234,"post_id":69751745,"comment_id":123293790,"body_markdown":"Subtract the whole number from the decimal number. What remains is the fractional part.","body":"Subtract the whole number from the decimal number. What remains is the fractional part."}],"answers":[{"tags":[],"owner":{"account_id":4039390,"reputation":458,"user_id":3322695,"display_name":"Leo G."},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1635415584,"creation_date":1635414994,"answer_id":69751964,"question_id":69751745,"body_markdown":"You can do:\r\n\r\n```java\r\npublic static double extractDecimals(double value) {\r\n    return value - Math.floor(value);\r\n}\r\n```","title":"How to eliminate the whole number and return only the decimal digits?","body":"<p>You can do:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public static double extractDecimals(double value) {\n    return value - Math.floor(value);\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":9463219,"reputation":9357,"user_id":7036419,"display_name":"Maurice Perry"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1635428853,"creation_date":1635428853,"answer_id":69755302,"question_id":69751745,"body_markdown":"Try something like this:\r\n\r\n        double x = 1.60714;\r\n        int y = (int)x;\r\n        x = (x-y)*12;\r\n        int m = (int)x;\r\n        x = (x-m)*30;\r\n        int d = (int)x;\r\n        System.out.println(y + &quot;/&quot; + m + &quot;/&quot; + d);\r\n","title":"How to eliminate the whole number and return only the decimal digits?","body":"<p>Try something like this:</p>\n<pre><code>    double x = 1.60714;\n    int y = (int)x;\n    x = (x-y)*12;\n    int m = (int)x;\n    x = (x-m)*30;\n    int d = (int)x;\n    System.out.println(y + &quot;/&quot; + m + &quot;/&quot; + d);\n</code></pre>\n"}],"owner":{"account_id":22959906,"reputation":11,"user_id":17089950,"display_name":"Angelo Valencia"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":52,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":2,"score":1,"last_activity_date":1635428853,"creation_date":1635414103,"question_id":69751745,"body_markdown":"Sample output:\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\nI&#39;m doing a little project on my own practicing my skills in Java and I ran into a dead end, I don&#39;t know how should I code this.\r\n\r\nIs there a way that I could only grab the decimal digits only without the whole number from the sum of the given input by the user?\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/opGXR.png","title":"How to eliminate the whole number and return only the decimal digits?","body":"<p>Sample output:</p>\n<p><a href=\"https://i.stack.imgur.com/opGXR.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/opGXR.png\" alt=\"enter image description here\" /></a></p>\n<p>I'm doing a little project on my own practicing my skills in Java and I ran into a dead end, I don't know how should I code this.</p>\n<p>Is there a way that I could only grab the decimal digits only without the whole number from the sum of the given input by the user?</p>\n"},{"tags":["java","android","android-studio"],"comments":[{"owner":{"account_id":39846,"reputation":991143,"user_id":115145,"accept_rate":84,"display_name":"CommonsWare"},"score":0,"creation_date":1635427946,"post_id":69754962,"comment_id":123299833,"body_markdown":"&quot;How to relaunch an app killing all past activities ,just like closing app and opening app manually&quot; -- that is an anti-pattern in Android app development. You should revisit why you are seeking to do this and find some other solution for whatever problem you are experiencing.","body":"&quot;How to relaunch an app killing all past activities ,just like closing app and opening app manually&quot; -- that is an anti-pattern in Android app development. You should revisit why you are seeking to do this and find some other solution for whatever problem you are experiencing."}],"answers":[{"tags":[],"owner":{"account_id":16457009,"reputation":57,"user_id":11888965,"display_name":"Girocired"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1635428675,"creation_date":1635428675,"answer_id":69755246,"question_id":69754962,"body_markdown":"The closest I know of that you can get to closing and reopening the app again is:\r\n\r\n    Intent intent = new Intent(getBaseContext(), MainActivityClass.class);\r\n    \r\n    intent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK | Intent.FLAG_ACTIVITY_CLEAR_TASK);\r\n    startActivity(intent);\r\n\r\nThis will clear the activity stack and launch the specified new one (clearing it basicaly means that you can&#39;t go back to previous activity and its saved state).","title":"What is equivalent programming code for closing and opening android app manually?","body":"<p>The closest I know of that you can get to closing and reopening the app again is:</p>\n<pre><code>Intent intent = new Intent(getBaseContext(), MainActivityClass.class);\n\nintent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK | Intent.FLAG_ACTIVITY_CLEAR_TASK);\nstartActivity(intent);\n</code></pre>\n<p>This will clear the activity stack and launch the specified new one (clearing it basicaly means that you can't go back to previous activity and its saved state).</p>\n"}],"owner":{"account_id":12022692,"reputation":355,"user_id":8795652,"accept_rate":45,"display_name":"tomtom"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":22,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1635428675,"creation_date":1635427586,"question_id":69754962,"body_markdown":"I have tried following list of code that are available ,but none of them kills all activity after relaunching the app. How to relaunch an app killing all past activities ,just like closing app and opening app manually\r\n \r\n\r\n \r\n\r\n    AlarmManager alm = (AlarmManager) this.getSystemService(Context.ALARM_SERVICE);\r\n    alm.set(AlarmManager.RTC, System.currentTimeMillis() + 3000,     \r\n    PendingIntent.getActivity(this, 0, new Intent(this, this.getClass()), 0));\r\n    \r\n            Intent intent = new Intent(this, MainActivity2.class);\r\n            startActivity(intent);\r\n            intent.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP)\r\n\r\n\r\n\r\n\r\n\r\nif I use below code it just crashes entire app as well\r\n\r\n    android.os.Process.killProcess(android.os.Process.myPid());\r\n\r\n\r\n","title":"What is equivalent programming code for closing and opening android app manually?","body":"<p>I have tried following list of code that are available ,but none of them kills all activity after relaunching the app. How to relaunch an app killing all past activities ,just like closing app and opening app manually</p>\n<pre><code>AlarmManager alm = (AlarmManager) this.getSystemService(Context.ALARM_SERVICE);\nalm.set(AlarmManager.RTC, System.currentTimeMillis() + 3000,     \nPendingIntent.getActivity(this, 0, new Intent(this, this.getClass()), 0));\n\n        Intent intent = new Intent(this, MainActivity2.class);\n        startActivity(intent);\n        intent.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP)\n</code></pre>\n<p>if I use below code it just crashes entire app as well</p>\n<pre><code>android.os.Process.killProcess(android.os.Process.myPid());\n</code></pre>\n"},{"tags":["java","spring","maven","spring-mvc","apache-tiles"],"comments":[{"owner":{"account_id":1052502,"reputation":3122,"user_id":1056042,"accept_rate":61,"display_name":"Arshad Ali"},"score":1,"creation_date":1436265162,"post_id":31266099,"comment_id":50527006,"body_markdown":"Please post all the required configuration code here so we can debug.","body":"Please post all the required configuration code here so we can debug."}],"answers":[{"tags":[],"owner":{"account_id":2855061,"reputation":3154,"user_id":2451486,"accept_rate":94,"display_name":"smoggers"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1482415988,"creation_date":1436266158,"answer_id":31266483,"question_id":31266099,"body_markdown":"You are using Apache-Tiles version ***3.0.3*** but the `org.springframework.web.servlet.view.tiles3.TilesConfigurer` is available from Spring ***3.2***.\r\n\r\nSee the Spring documentation [here][1].\r\n\r\nTo get around this issue you could either use: \r\n\r\n    org.springframework.web.servlet.view.tiles2.TilesConfigurer\r\n\r\nor upgrade your Spring version to 3.2 or above.\r\n\r\n  [1]: http://docs.spring.io/spring/docs/current/javadoc-api/org/springframework/web/servlet/view/tiles3/TilesConfigurer.html","title":"The fully qualified name of the bean&#39;s class, except if it serves only as a parent definition for child bean definitions","body":"<p>You are using Apache-Tiles version <strong><em>3.0.3</em></strong> but the <code>org.springframework.web.servlet.view.tiles3.TilesConfigurer</code> is available from Spring <strong><em>3.2</em></strong>.</p>\n\n<p>See the Spring documentation <a href=\"http://docs.spring.io/spring/docs/current/javadoc-api/org/springframework/web/servlet/view/tiles3/TilesConfigurer.html\" rel=\"nofollow noreferrer\">here</a>.</p>\n\n<p>To get around this issue you could either use: </p>\n\n<pre><code>org.springframework.web.servlet.view.tiles2.TilesConfigurer\n</code></pre>\n\n<p>or upgrade your Spring version to 3.2 or above.</p>\n"},{"tags":[],"owner":{"account_id":1052502,"reputation":3122,"user_id":1056042,"accept_rate":61,"display_name":"Arshad Ali"},"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1635428536,"creation_date":1436266290,"answer_id":31266530,"question_id":31266099,"body_markdown":"OK there is one big mistake in your pom.xml, change :\r\n\r\n    &lt;org.springframework-version&gt;3.1.1.RELEASE&lt;/org.springframework-version&gt;\r\nto\r\n\r\n    &lt;org.springframework-version&gt;4.1.6.RELEASE&lt;/org.springframework-version&gt;\r\n\r\nI have noticed this important thing here [Configuring Apache Tiles 3 and Spring 4 MVC](http://frameworkonly.com/configuring-apache-tiles-3-and-spring-4-mvc/) you can download sample project and get in touch with it.&lt;br/&gt;\r\nHope It would work for you!","title":"The fully qualified name of the bean&#39;s class, except if it serves only as a parent definition for child bean definitions","body":"<p>OK there is one big mistake in your pom.xml, change :</p>\n<pre><code>&lt;org.springframework-version&gt;3.1.1.RELEASE&lt;/org.springframework-version&gt;\n</code></pre>\n<p>to</p>\n<pre><code>&lt;org.springframework-version&gt;4.1.6.RELEASE&lt;/org.springframework-version&gt;\n</code></pre>\n<p>I have noticed this important thing here <a href=\"http://frameworkonly.com/configuring-apache-tiles-3-and-spring-4-mvc/\" rel=\"nofollow noreferrer\">Configuring Apache Tiles 3 and Spring 4 MVC</a> you can download sample project and get in touch with it.<br/>\nHope It would work for you!</p>\n"}],"owner":{"account_id":6524803,"reputation":784,"user_id":5047841,"accept_rate":35,"display_name":"Crazy Coder"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":16769,"favorite_count":0,"down_vote_count":0,"up_vote_count":4,"accepted_answer_id":31266530,"answer_count":2,"score":4,"last_activity_date":1635428536,"creation_date":1436265055,"question_id":31266099,"body_markdown":"I want to integrate Apache Tiles in my Spring Project I have followed steps on [spring-tiles integration](http://docs.spring.io/spring/docs/3.2.x/spring-framework-reference/html/view.html#view-tiles) but I get error at: \r\n![enter image description here][1]&lt;br&gt;\r\n__providing only related code__\r\n&lt;br&gt;project structure is&lt;br&gt;\r\n![enter image description here][2]\r\n&lt;br/&gt;\r\nservlet-context.xml \r\n\r\n    &lt;!-- Tiles Configuration --&gt;\r\n\t\r\n\t&lt;beans:bean id=&quot;tilesConfigurer&quot;\r\n\t    class=&quot;org.springframework.web.servlet.view.tiles3.TilesConfigurer&quot;&gt;\r\n\t    &lt;beans:property name=&quot;definitions&quot;&gt;\r\n\t        &lt;beans:list&gt;\r\n\t            &lt;beans:value&gt;/WEB-INF/tiles.xml&lt;/beans:value&gt;\r\n\t           &lt;!--  &lt;beans:value&gt;/WEB-INF/views/**/views.xml&lt;/beans:value&gt; --&gt;\r\n\t        &lt;/beans:list&gt;\r\n\t    &lt;/beans:property&gt;\r\n\t&lt;/beans:bean&gt;\r\n\t&lt;beans:bean id=&quot;tilesViewResolver&quot;\r\n\t    class=&quot;org.springframework.web.servlet.view.UrlBasedViewResolver&quot;&gt;\r\n\t    &lt;beans:property name=&quot;viewClass&quot;&gt;\r\n\t        &lt;beans:value&gt;\r\n\t            org.springframework.web.servlet.view.tiles3.TilesView\r\n\t        &lt;/beans:value&gt;\r\n\t    &lt;/beans:property&gt;\r\n\t    &lt;beans:property name=&quot;order&quot; value=&quot;0&quot;/&gt;\r\n\t&lt;/beans:bean&gt;\t\r\n\r\ntiles.xml\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; ?&gt;\r\n    &lt;!DOCTYPE tiles-definitions PUBLIC\r\n       &quot;-//Apache Software Foundation//DTD Tiles Configuration 3.0//EN&quot;\r\n       &quot;http://tiles.apache.org/dtds/tiles-config_3_0.dtd&quot;&gt;\r\n    &lt;tiles-definitions&gt;\r\n    &lt;definition name=&quot;base.definition&quot; template=&quot;/WEB-INF/layout/classic.jsp&quot;&gt;       \r\n        &lt;put-attribute name=&quot;footer&quot; value=&quot;/WEB-INF/layout/footer.jsp&quot;/&gt;\r\n    &lt;/definition&gt;\r\n    \r\n    &lt;definition name=&quot;home&quot; extends=&quot;base.definition&quot;&gt;\r\n        &lt;put-attribute name=&quot;title&quot; value=&quot;Blog of Blogs&quot;/&gt;\r\n        &lt;put-attribute name=&quot;body&quot; value=&quot;/WEB-INF/views/home.jsp&quot;/&gt;\r\n    &lt;/definition&gt;\r\n    &lt;/tiles-definitions&gt;\r\n\r\n&lt;br/&gt;pom.xml is &lt;br/&gt;\r\n\r\n    &lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n\txsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd&quot;&gt;\r\n\t&lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n\t&lt;groupId&gt;blog&lt;/groupId&gt;\r\n\t&lt;artifactId&gt;app-example&lt;/artifactId&gt;\r\n\t&lt;packaging&gt;war&lt;/packaging&gt;\r\n\t&lt;version&gt;1.0&lt;/version&gt;\r\n\t&lt;name&gt;blog&lt;/name&gt;\r\n\t\r\n\t&lt;properties&gt;\r\n\t\t&lt;java-version&gt;1.7&lt;/java-version&gt;\r\n\t\t&lt;org.springframework-version&gt;3.1.1.RELEASE&lt;/org.springframework-version&gt;\r\n\t\t&lt;org.aspectj-version&gt;1.6.10&lt;/org.aspectj-version&gt;\r\n\t\t&lt;org.slf4j-version&gt;1.6.6&lt;/org.slf4j-version&gt;\r\n\t\t&lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\r\n\t\t&lt;maven.compiler.source&gt;1.6&lt;/maven.compiler.source&gt;\r\n\t\t&lt;maven.compiler.target&gt;1.6&lt;/maven.compiler.target&gt;\r\n\t\t&lt;apache.tiles&gt;3.0.3&lt;/apache.tiles&gt;\r\n\t&lt;/properties&gt;\r\n\t&lt;dependencies&gt;\r\n\t\t&lt;!-- Spring --&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-context&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;${org.springframework-version}&lt;/version&gt;\r\n\t\t\t&lt;exclusions&gt;\r\n\t\t\t\t&lt;!-- Exclude Commons Logging in favor of SLF4j --&gt;\r\n\t\t\t\t&lt;exclusion&gt;\r\n\t\t\t\t\t&lt;groupId&gt;commons-logging&lt;/groupId&gt;\r\n\t\t\t\t\t&lt;artifactId&gt;commons-logging&lt;/artifactId&gt;\r\n\t\t\t\t &lt;/exclusion&gt;\r\n\t\t\t&lt;/exclusions&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t &lt;dependency&gt;\r\n            &lt;groupId&gt;org.springframework&lt;/groupId&gt;\r\n            &lt;artifactId&gt;spring-context-support&lt;/artifactId&gt;\r\n            &lt;version&gt;${org.springframework-version}&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-webmvc&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;${org.springframework-version}&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n            &lt;groupId&gt;org.springframework&lt;/groupId&gt;\r\n            &lt;artifactId&gt;spring-web&lt;/artifactId&gt;\r\n            &lt;version&gt;${org.springframework-version}&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.springframework&lt;/groupId&gt;\r\n            &lt;artifactId&gt;spring-beans&lt;/artifactId&gt;\r\n            &lt;version&gt;${org.springframework-version}&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n\t\t\r\n\t\t&lt;!-- Tiles --&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.apache.tiles&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;tiles-jsp&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;3.0.3&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.apache.tiles&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;tiles-core&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;3.0.3&lt;/version&gt;\r\n\t\t\t&lt;scope&gt;compile&lt;/scope&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.apache.tiles&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;tiles-api&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;3.0.3&lt;/version&gt;\r\n\t\t\t&lt;scope&gt;compile&lt;/scope&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.apache.tiles&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;tiles-servlet&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;3.0.3&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.apache.tiles&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;tiles-template&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;3.0.3&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t\r\n\t\t\t\t\r\n\t\t&lt;!-- AspectJ --&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.aspectj&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;aspectjrt&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;${org.aspectj-version}&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\t\r\n\t\t\r\n\t\t&lt;!-- Logging --&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.slf4j&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;slf4j-api&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;${org.slf4j-version}&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.slf4j&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;jcl-over-slf4j&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;${org.slf4j-version}&lt;/version&gt;\r\n\t\t\t&lt;scope&gt;runtime&lt;/scope&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.slf4j&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;slf4j-log4j12&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;${org.slf4j-version}&lt;/version&gt;\r\n\t\t\t&lt;scope&gt;runtime&lt;/scope&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;log4j&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;log4j&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;1.2.15&lt;/version&gt;\r\n\t\t\t&lt;exclusions&gt;\r\n\t\t\t\t&lt;exclusion&gt;\r\n\t\t\t\t\t&lt;groupId&gt;javax.mail&lt;/groupId&gt;\r\n\t\t\t\t\t&lt;artifactId&gt;mail&lt;/artifactId&gt;\r\n\t\t\t\t&lt;/exclusion&gt;\r\n\t\t\t\t&lt;exclusion&gt;\r\n\t\t\t\t\t&lt;groupId&gt;javax.jms&lt;/groupId&gt;\r\n\t\t\t\t\t&lt;artifactId&gt;jms&lt;/artifactId&gt;\r\n\t\t\t\t&lt;/exclusion&gt;\r\n\t\t\t\t&lt;exclusion&gt;\r\n\t\t\t\t\t&lt;groupId&gt;com.sun.jdmk&lt;/groupId&gt;\r\n\t\t\t\t\t&lt;artifactId&gt;jmxtools&lt;/artifactId&gt;\r\n\t\t\t\t&lt;/exclusion&gt;\r\n\t\t\t\t&lt;exclusion&gt;\r\n\t\t\t\t\t&lt;groupId&gt;com.sun.jmx&lt;/groupId&gt;\r\n\t\t\t\t\t&lt;artifactId&gt;jmxri&lt;/artifactId&gt;\r\n\t\t\t\t&lt;/exclusion&gt;\r\n\t\t\t&lt;/exclusions&gt;\r\n\t\t\t&lt;scope&gt;runtime&lt;/scope&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\n\t\t&lt;!-- @Inject --&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;javax.inject&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;javax.inject&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;1&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.postgresql&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;postgresql&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;9.2-1003-jdbc4&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;mysql&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;mysql-connector-java&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;5.1.25&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;     \r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;javax.servlet&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;javax.servlet-api&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;3.0.1&lt;/version&gt;\r\n\t\t\t&lt;scope&gt;provided&lt;/scope&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;javax.servlet.jsp&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;jsp-api&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;2.1&lt;/version&gt;\r\n\t\t\t&lt;scope&gt;provided&lt;/scope&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;javax.servlet&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;jstl&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;1.2&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\r\n\t\t&lt;!-- Test --&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;junit&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;junit&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;4.7&lt;/version&gt;\r\n\t\t\t&lt;scope&gt;test&lt;/scope&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t&lt;/dependencies&gt;\r\n\t &lt;build&gt;\r\n        &lt;plugins&gt;\r\n            &lt;plugin&gt;\r\n                &lt;artifactId&gt;maven-eclipse-plugin&lt;/artifactId&gt;\r\n                &lt;version&gt;2.9&lt;/version&gt;\r\n                &lt;configuration&gt;\r\n                    &lt;additionalProjectnatures&gt;\r\n                        &lt;projectnature&gt;org.springframework.ide.eclipse.core.springnature&lt;/projectnature&gt;\r\n                    &lt;/additionalProjectnatures&gt;\r\n                    &lt;additionalBuildcommands&gt;\r\n                        &lt;buildcommand&gt;org.springframework.ide.eclipse.core.springbuilder&lt;/buildcommand&gt;\r\n                    &lt;/additionalBuildcommands&gt;\r\n                    &lt;downloadSources&gt;true&lt;/downloadSources&gt;\r\n                    &lt;downloadJavadocs&gt;true&lt;/downloadJavadocs&gt;\r\n                &lt;/configuration&gt;\r\n            &lt;/plugin&gt;\r\n            &lt;plugin&gt;\r\n                &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n                &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\r\n                &lt;version&gt;2.5.1&lt;/version&gt;\r\n                &lt;configuration&gt;\r\n                    &lt;source&gt;1.6&lt;/source&gt;\r\n                    &lt;target&gt;1.6&lt;/target&gt;\r\n                    &lt;compilerArgument&gt;-Xlint:all&lt;/compilerArgument&gt;\r\n                    &lt;showWarnings&gt;true&lt;/showWarnings&gt;\r\n                    &lt;showDeprecation&gt;true&lt;/showDeprecation&gt;\r\n                &lt;/configuration&gt;\r\n            &lt;/plugin&gt;\r\n            &lt;plugin&gt;\r\n                &lt;groupId&gt;org.codehaus.mojo&lt;/groupId&gt;\r\n                &lt;artifactId&gt;exec-maven-plugin&lt;/artifactId&gt;\r\n                &lt;version&gt;1.2.1&lt;/version&gt;\r\n                &lt;configuration&gt;\r\n                    &lt;mainClass&gt;org.test.int1.Main&lt;/mainClass&gt;\r\n                &lt;/configuration&gt;\r\n            &lt;/plugin&gt;\r\n        &lt;/plugins&gt;\r\n    &lt;/build&gt;\r\n\t\r\n&lt;/project&gt;\r\n&lt;br/&gt;\r\nI have tried a lot but could not found any solution to this error, can any one see what is wrong with this?\r\n\r\n\r\n  [1]: http://i.stack.imgur.com/6Umku.png\r\n  [2]: http://i.stack.imgur.com/OrbTp.png","title":"The fully qualified name of the bean&#39;s class, except if it serves only as a parent definition for child bean definitions","body":"<p>I want to integrate Apache Tiles in my Spring Project I have followed steps on <a href=\"http://docs.spring.io/spring/docs/3.2.x/spring-framework-reference/html/view.html#view-tiles\" rel=\"nofollow noreferrer\">spring-tiles integration</a> but I get error at: \n<img src=\"https://i.stack.imgur.com/6Umku.png\" alt=\"enter image description here\"><br>\n<strong>providing only related code</strong>\n<br>project structure is<br>\n<img src=\"https://i.stack.imgur.com/OrbTp.png\" alt=\"enter image description here\">\n<br/>\nservlet-context.xml </p>\n\n<pre><code>&lt;!-- Tiles Configuration --&gt;\n\n&lt;beans:bean id=\"tilesConfigurer\"\n    class=\"org.springframework.web.servlet.view.tiles3.TilesConfigurer\"&gt;\n    &lt;beans:property name=\"definitions\"&gt;\n        &lt;beans:list&gt;\n            &lt;beans:value&gt;/WEB-INF/tiles.xml&lt;/beans:value&gt;\n           &lt;!--  &lt;beans:value&gt;/WEB-INF/views/**/views.xml&lt;/beans:value&gt; --&gt;\n        &lt;/beans:list&gt;\n    &lt;/beans:property&gt;\n&lt;/beans:bean&gt;\n&lt;beans:bean id=\"tilesViewResolver\"\n    class=\"org.springframework.web.servlet.view.UrlBasedViewResolver\"&gt;\n    &lt;beans:property name=\"viewClass\"&gt;\n        &lt;beans:value&gt;\n            org.springframework.web.servlet.view.tiles3.TilesView\n        &lt;/beans:value&gt;\n    &lt;/beans:property&gt;\n    &lt;beans:property name=\"order\" value=\"0\"/&gt;\n&lt;/beans:bean&gt;   \n</code></pre>\n\n<p>tiles.xml</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\" ?&gt;\n&lt;!DOCTYPE tiles-definitions PUBLIC\n   \"-//Apache Software Foundation//DTD Tiles Configuration 3.0//EN\"\n   \"http://tiles.apache.org/dtds/tiles-config_3_0.dtd\"&gt;\n&lt;tiles-definitions&gt;\n&lt;definition name=\"base.definition\" template=\"/WEB-INF/layout/classic.jsp\"&gt;       \n    &lt;put-attribute name=\"footer\" value=\"/WEB-INF/layout/footer.jsp\"/&gt;\n&lt;/definition&gt;\n\n&lt;definition name=\"home\" extends=\"base.definition\"&gt;\n    &lt;put-attribute name=\"title\" value=\"Blog of Blogs\"/&gt;\n    &lt;put-attribute name=\"body\" value=\"/WEB-INF/views/home.jsp\"/&gt;\n&lt;/definition&gt;\n&lt;/tiles-definitions&gt;\n</code></pre>\n\n<p><br/>pom.xml is <br/></p>\n\n<pre><code>&lt;project xmlns=\"http://maven.apache.org/POM/4.0.0\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\nxsi:schemaLocation=\"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd\"&gt;\n&lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n&lt;groupId&gt;blog&lt;/groupId&gt;\n&lt;artifactId&gt;app-example&lt;/artifactId&gt;\n&lt;packaging&gt;war&lt;/packaging&gt;\n&lt;version&gt;1.0&lt;/version&gt;\n&lt;name&gt;blog&lt;/name&gt;\n\n&lt;properties&gt;\n    &lt;java-version&gt;1.7&lt;/java-version&gt;\n    &lt;org.springframework-version&gt;3.1.1.RELEASE&lt;/org.springframework-version&gt;\n    &lt;org.aspectj-version&gt;1.6.10&lt;/org.aspectj-version&gt;\n    &lt;org.slf4j-version&gt;1.6.6&lt;/org.slf4j-version&gt;\n    &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\n    &lt;maven.compiler.source&gt;1.6&lt;/maven.compiler.source&gt;\n    &lt;maven.compiler.target&gt;1.6&lt;/maven.compiler.target&gt;\n    &lt;apache.tiles&gt;3.0.3&lt;/apache.tiles&gt;\n&lt;/properties&gt;\n&lt;dependencies&gt;\n    &lt;!-- Spring --&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-context&lt;/artifactId&gt;\n        &lt;version&gt;${org.springframework-version}&lt;/version&gt;\n        &lt;exclusions&gt;\n            &lt;!-- Exclude Commons Logging in favor of SLF4j --&gt;\n            &lt;exclusion&gt;\n                &lt;groupId&gt;commons-logging&lt;/groupId&gt;\n                &lt;artifactId&gt;commons-logging&lt;/artifactId&gt;\n             &lt;/exclusion&gt;\n        &lt;/exclusions&gt;\n    &lt;/dependency&gt;\n     &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-context-support&lt;/artifactId&gt;\n        &lt;version&gt;${org.springframework-version}&lt;/version&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-webmvc&lt;/artifactId&gt;\n        &lt;version&gt;${org.springframework-version}&lt;/version&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-web&lt;/artifactId&gt;\n        &lt;version&gt;${org.springframework-version}&lt;/version&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-beans&lt;/artifactId&gt;\n        &lt;version&gt;${org.springframework-version}&lt;/version&gt;\n    &lt;/dependency&gt;\n\n    &lt;!-- Tiles --&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.apache.tiles&lt;/groupId&gt;\n        &lt;artifactId&gt;tiles-jsp&lt;/artifactId&gt;\n        &lt;version&gt;3.0.3&lt;/version&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.apache.tiles&lt;/groupId&gt;\n        &lt;artifactId&gt;tiles-core&lt;/artifactId&gt;\n        &lt;version&gt;3.0.3&lt;/version&gt;\n        &lt;scope&gt;compile&lt;/scope&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.apache.tiles&lt;/groupId&gt;\n        &lt;artifactId&gt;tiles-api&lt;/artifactId&gt;\n        &lt;version&gt;3.0.3&lt;/version&gt;\n        &lt;scope&gt;compile&lt;/scope&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.apache.tiles&lt;/groupId&gt;\n        &lt;artifactId&gt;tiles-servlet&lt;/artifactId&gt;\n        &lt;version&gt;3.0.3&lt;/version&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.apache.tiles&lt;/groupId&gt;\n        &lt;artifactId&gt;tiles-template&lt;/artifactId&gt;\n        &lt;version&gt;3.0.3&lt;/version&gt;\n    &lt;/dependency&gt;\n\n\n    &lt;!-- AspectJ --&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.aspectj&lt;/groupId&gt;\n        &lt;artifactId&gt;aspectjrt&lt;/artifactId&gt;\n        &lt;version&gt;${org.aspectj-version}&lt;/version&gt;\n    &lt;/dependency&gt;   \n\n    &lt;!-- Logging --&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.slf4j&lt;/groupId&gt;\n        &lt;artifactId&gt;slf4j-api&lt;/artifactId&gt;\n        &lt;version&gt;${org.slf4j-version}&lt;/version&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.slf4j&lt;/groupId&gt;\n        &lt;artifactId&gt;jcl-over-slf4j&lt;/artifactId&gt;\n        &lt;version&gt;${org.slf4j-version}&lt;/version&gt;\n        &lt;scope&gt;runtime&lt;/scope&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.slf4j&lt;/groupId&gt;\n        &lt;artifactId&gt;slf4j-log4j12&lt;/artifactId&gt;\n        &lt;version&gt;${org.slf4j-version}&lt;/version&gt;\n        &lt;scope&gt;runtime&lt;/scope&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;log4j&lt;/groupId&gt;\n        &lt;artifactId&gt;log4j&lt;/artifactId&gt;\n        &lt;version&gt;1.2.15&lt;/version&gt;\n        &lt;exclusions&gt;\n            &lt;exclusion&gt;\n                &lt;groupId&gt;javax.mail&lt;/groupId&gt;\n                &lt;artifactId&gt;mail&lt;/artifactId&gt;\n            &lt;/exclusion&gt;\n            &lt;exclusion&gt;\n                &lt;groupId&gt;javax.jms&lt;/groupId&gt;\n                &lt;artifactId&gt;jms&lt;/artifactId&gt;\n            &lt;/exclusion&gt;\n            &lt;exclusion&gt;\n                &lt;groupId&gt;com.sun.jdmk&lt;/groupId&gt;\n                &lt;artifactId&gt;jmxtools&lt;/artifactId&gt;\n            &lt;/exclusion&gt;\n            &lt;exclusion&gt;\n                &lt;groupId&gt;com.sun.jmx&lt;/groupId&gt;\n                &lt;artifactId&gt;jmxri&lt;/artifactId&gt;\n            &lt;/exclusion&gt;\n        &lt;/exclusions&gt;\n        &lt;scope&gt;runtime&lt;/scope&gt;\n    &lt;/dependency&gt;\n\n    &lt;!-- @Inject --&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;javax.inject&lt;/groupId&gt;\n        &lt;artifactId&gt;javax.inject&lt;/artifactId&gt;\n        &lt;version&gt;1&lt;/version&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.postgresql&lt;/groupId&gt;\n        &lt;artifactId&gt;postgresql&lt;/artifactId&gt;\n        &lt;version&gt;9.2-1003-jdbc4&lt;/version&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;mysql&lt;/groupId&gt;\n        &lt;artifactId&gt;mysql-connector-java&lt;/artifactId&gt;\n        &lt;version&gt;5.1.25&lt;/version&gt;\n    &lt;/dependency&gt;     \n    &lt;dependency&gt;\n        &lt;groupId&gt;javax.servlet&lt;/groupId&gt;\n        &lt;artifactId&gt;javax.servlet-api&lt;/artifactId&gt;\n        &lt;version&gt;3.0.1&lt;/version&gt;\n        &lt;scope&gt;provided&lt;/scope&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;javax.servlet.jsp&lt;/groupId&gt;\n        &lt;artifactId&gt;jsp-api&lt;/artifactId&gt;\n        &lt;version&gt;2.1&lt;/version&gt;\n        &lt;scope&gt;provided&lt;/scope&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;javax.servlet&lt;/groupId&gt;\n        &lt;artifactId&gt;jstl&lt;/artifactId&gt;\n        &lt;version&gt;1.2&lt;/version&gt;\n    &lt;/dependency&gt;\n\n    &lt;!-- Test --&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;junit&lt;/groupId&gt;\n        &lt;artifactId&gt;junit&lt;/artifactId&gt;\n        &lt;version&gt;4.7&lt;/version&gt;\n        &lt;scope&gt;test&lt;/scope&gt;\n    &lt;/dependency&gt;\n&lt;/dependencies&gt;\n &lt;build&gt;\n    &lt;plugins&gt;\n        &lt;plugin&gt;\n            &lt;artifactId&gt;maven-eclipse-plugin&lt;/artifactId&gt;\n            &lt;version&gt;2.9&lt;/version&gt;\n            &lt;configuration&gt;\n                &lt;additionalProjectnatures&gt;\n                    &lt;projectnature&gt;org.springframework.ide.eclipse.core.springnature&lt;/projectnature&gt;\n                &lt;/additionalProjectnatures&gt;\n                &lt;additionalBuildcommands&gt;\n                    &lt;buildcommand&gt;org.springframework.ide.eclipse.core.springbuilder&lt;/buildcommand&gt;\n                &lt;/additionalBuildcommands&gt;\n                &lt;downloadSources&gt;true&lt;/downloadSources&gt;\n                &lt;downloadJavadocs&gt;true&lt;/downloadJavadocs&gt;\n            &lt;/configuration&gt;\n        &lt;/plugin&gt;\n        &lt;plugin&gt;\n            &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n            &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\n            &lt;version&gt;2.5.1&lt;/version&gt;\n            &lt;configuration&gt;\n                &lt;source&gt;1.6&lt;/source&gt;\n                &lt;target&gt;1.6&lt;/target&gt;\n                &lt;compilerArgument&gt;-Xlint:all&lt;/compilerArgument&gt;\n                &lt;showWarnings&gt;true&lt;/showWarnings&gt;\n                &lt;showDeprecation&gt;true&lt;/showDeprecation&gt;\n            &lt;/configuration&gt;\n        &lt;/plugin&gt;\n        &lt;plugin&gt;\n            &lt;groupId&gt;org.codehaus.mojo&lt;/groupId&gt;\n            &lt;artifactId&gt;exec-maven-plugin&lt;/artifactId&gt;\n            &lt;version&gt;1.2.1&lt;/version&gt;\n            &lt;configuration&gt;\n                &lt;mainClass&gt;org.test.int1.Main&lt;/mainClass&gt;\n            &lt;/configuration&gt;\n        &lt;/plugin&gt;\n    &lt;/plugins&gt;\n&lt;/build&gt;\n</code></pre>\n\n<p>\n<br/>\nI have tried a lot but could not found any solution to this error, can any one see what is wrong with this?</p>\n"},{"tags":["java","hibernate","jpa","crud","soft-delete"],"answers":[{"tags":[],"owner":{"account_id":698222,"reputation":50202,"user_id":573032,"accept_rate":77,"display_name":"Roman C"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1629449082,"creation_date":1629308667,"answer_id":68837108,"question_id":68836185,"body_markdown":"You can&#39;t have both decrease a sequence number and not have the same sequence number for some items. The sequence should increase only while getting the new value. \r\n\r\nThe soft-deleted items shouldn&#39;t apper in the results because they are deleted. But if you want to use someware or undelete them, then the number might be inconsistent with the current sequence number which you decrease for some reasons. \r\n\r\nTo remove inconsistency you should update the sequence number for the items that undeleted. If you update items that deleted then remove the old sequence number. \r\n\r\nIt&#39;s similar like you want to create orphans that doesn&#39;t have a parent reference because a parent was deleted. Note, that you can&#39;t delete a parent if it violates a foreign key constraint.","title":"How to use @OrderColumn with soft delete","body":"<p>You can't have both decrease a sequence number and not have the same sequence number for some items. The sequence should increase only while getting the new value.</p>\n<p>The soft-deleted items shouldn't apper in the results because they are deleted. But if you want to use someware or undelete them, then the number might be inconsistent with the current sequence number which you decrease for some reasons.</p>\n<p>To remove inconsistency you should update the sequence number for the items that undeleted. If you update items that deleted then remove the old sequence number.</p>\n<p>It's similar like you want to create orphans that doesn't have a parent reference because a parent was deleted. Note, that you can't delete a parent if it violates a foreign key constraint.</p>\n"}],"owner":{"account_id":17204995,"reputation":61,"user_id":12455768,"display_name":"terrinizer"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":120,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":68837108,"answer_count":1,"score":1,"last_activity_date":1635428294,"creation_date":1629304512,"question_id":68836185,"body_markdown":"I have a class `PostItem` and `PostItemSigner`. They have an onetomany-relation. Also class `PostItemSigner` is soft-deleted, which means the record is never deleted in the database, only a flag is set to true or false.\r\n\r\n```java\r\npublic class PostItem {\r\n\r\n    // ...\r\n\r\n    @OneToMany(mappedBy = &quot;postItem&quot;, fetch = FetchType.EAGER)\r\n    @OrderColumn(name = &quot;sequence&quot;)\r\n    private List&lt;PostItemSigner&gt; signers;\r\n\r\n    // ...\r\n}\r\n\r\npublic class PostItemSigner {\r\n\r\n    // ... \r\n\r\n    @ManyToOne\r\n    @JoinColumn(name = &quot;post_item_id&quot;)\r\n    private PostItem postItem;\r\n\r\n    private boolean deleted;\r\n    \r\n    // ...\r\n}\r\n```\r\n\r\nCreate is working fine and all of my records get a sequence number. Now I have some problems with my update.\r\n\r\nI created f.e. 4 postitemsigners for 1 postitem, and in my update I remove 2 of them `(setDeleted(true))`.\r\n\r\nHow do I get my 2 postitemsigners, who are not deleted, have sequence number 0 and 1, and my deleted postitemsigners sequence number 2 and 3 when saving to the database. And if I add a new postitemsigner I want this one to get sequence number 2 and the deleted ones 3 and 4 f.e..\r\n\r\nI tried saving the non-deleted first and then the deleted after, but then some of them got the same sequence number for some reason.\r\n\r\n**EDIT:**\r\n\r\nWith the update I used a map `Map&lt;Long, PostItemSigner&gt;` instead of a list `List&lt;PostItemSigner&gt;`. A map puts them in a different order, while the list keeps the order. So problem solved!","title":"How to use @OrderColumn with soft delete","body":"<p>I have a class <code>PostItem</code> and <code>PostItemSigner</code>. They have an onetomany-relation. Also class <code>PostItemSigner</code> is soft-deleted, which means the record is never deleted in the database, only a flag is set to true or false.</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class PostItem {\n\n    // ...\n\n    @OneToMany(mappedBy = &quot;postItem&quot;, fetch = FetchType.EAGER)\n    @OrderColumn(name = &quot;sequence&quot;)\n    private List&lt;PostItemSigner&gt; signers;\n\n    // ...\n}\n\npublic class PostItemSigner {\n\n    // ... \n\n    @ManyToOne\n    @JoinColumn(name = &quot;post_item_id&quot;)\n    private PostItem postItem;\n\n    private boolean deleted;\n    \n    // ...\n}\n</code></pre>\n<p>Create is working fine and all of my records get a sequence number. Now I have some problems with my update.</p>\n<p>I created f.e. 4 postitemsigners for 1 postitem, and in my update I remove 2 of them <code>(setDeleted(true))</code>.</p>\n<p>How do I get my 2 postitemsigners, who are not deleted, have sequence number 0 and 1, and my deleted postitemsigners sequence number 2 and 3 when saving to the database. And if I add a new postitemsigner I want this one to get sequence number 2 and the deleted ones 3 and 4 f.e..</p>\n<p>I tried saving the non-deleted first and then the deleted after, but then some of them got the same sequence number for some reason.</p>\n<p><strong>EDIT:</strong></p>\n<p>With the update I used a map <code>Map&lt;Long, PostItemSigner&gt;</code> instead of a list <code>List&lt;PostItemSigner&gt;</code>. A map puts them in a different order, while the list keeps the order. So problem solved!</p>\n"},{"tags":["java","simulation","anylogic"],"comments":[{"owner":{"account_id":12938186,"reputation":379,"user_id":9354862,"display_name":"Aidan Donnelly"},"score":0,"creation_date":1635406420,"post_id":69741376,"comment_id":123290434,"body_markdown":"Please provide enough code so others can better understand or reproduce the problem.","body":"Please provide enough code so others can better understand or reproduce the problem."}],"answers":[{"tags":[],"owner":{"account_id":2486375,"reputation":11083,"user_id":2164728,"accept_rate":62,"display_name":"Benjamin"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1635400383,"creation_date":1635400383,"answer_id":69748917,"question_id":69741376,"body_markdown":"True, there is no build-in way for this. You need to code your schedule. This allows adding exceptions programmatically, see https://anylogic.help/anylogic/data/schedule.html#creating-and-initializing-schedule-from-code-on-model-startup \r\n\r\nSpecifically:\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/pzg4s.png","title":"Read Anylogic schedule exceptions from database table","body":"<p>True, there is no build-in way for this. You need to code your schedule. This allows adding exceptions programmatically, see <a href=\"https://anylogic.help/anylogic/data/schedule.html#creating-and-initializing-schedule-from-code-on-model-startup\" rel=\"nofollow noreferrer\">https://anylogic.help/anylogic/data/schedule.html#creating-and-initializing-schedule-from-code-on-model-startup</a></p>\n<p>Specifically:\n<a href=\"https://i.stack.imgur.com/pzg4s.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/pzg4s.png\" alt=\"enter image description here\" /></a></p>\n"},{"tags":[],"owner":{"account_id":4999683,"reputation":3818,"user_id":4019094,"display_name":"Jaco-Ben Vosloo"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1635427727,"creation_date":1635427727,"answer_id":69755004,"question_id":69741376,"body_markdown":"Suppose you have a scheduled object of type integer and a database table full of exception dates that you want the integer value of the schedule to be 0 for the entire day.\r\n\r\nYou can then programmatically add exceptions to your scheduling with the following code\r\n\r\n```\r\nList&lt;Tuple&gt; rows = selectFrom(db_table).list();\r\n\r\nfor (Tuple row : rows) {\r\n\tDate exceptionDate = row.get( db_table.db_column );\r\n\tschedule.addException(exceptionDate.getYear(), exceptionDate.getMonth(), exceptionDate.getDay(), exceptionDate.getHours(), exceptionDate.getMinutes(), exceptionDate.getSeconds(), \r\n\t\t\t\t\t\texceptionDate.getYear(), exceptionDate.getMonth(), exceptionDate.getDay()+1, exceptionDate.getHours(), exceptionDate.getMinutes(), exceptionDate.getSeconds(),\r\n0, false);\r\n}\r\n\r\n```\r\n\r\nThe format for adding exceptions is a bit cumbersome but it is:\r\n```\r\nschedule.addException(startYear, startMonth, startDay, startHour, startMinute, startSecond, endYear, endMonth, endDay, endHour, endMinute, endSecond, value, annually);\r\n```\r\n\r\nThe `value` object is the value of your schedule type\r\n","title":"Read Anylogic schedule exceptions from database table","body":"<p>Suppose you have a scheduled object of type integer and a database table full of exception dates that you want the integer value of the schedule to be 0 for the entire day.</p>\n<p>You can then programmatically add exceptions to your scheduling with the following code</p>\n<pre><code>List&lt;Tuple&gt; rows = selectFrom(db_table).list();\n\nfor (Tuple row : rows) {\n    Date exceptionDate = row.get( db_table.db_column );\n    schedule.addException(exceptionDate.getYear(), exceptionDate.getMonth(), exceptionDate.getDay(), exceptionDate.getHours(), exceptionDate.getMinutes(), exceptionDate.getSeconds(), \n                        exceptionDate.getYear(), exceptionDate.getMonth(), exceptionDate.getDay()+1, exceptionDate.getHours(), exceptionDate.getMinutes(), exceptionDate.getSeconds(),\n0, false);\n}\n\n</code></pre>\n<p>The format for adding exceptions is a bit cumbersome but it is:</p>\n<pre><code>schedule.addException(startYear, startMonth, startDay, startHour, startMinute, startSecond, endYear, endMonth, endDay, endHour, endMinute, endSecond, value, annually);\n</code></pre>\n<p>The <code>value</code> object is the value of your schedule type</p>\n"}],"owner":{"account_id":23162109,"reputation":5,"user_id":17262604,"display_name":"w-."},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":125,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":69755004,"answer_count":2,"score":0,"last_activity_date":1635427727,"creation_date":1635348231,"question_id":69741376,"body_markdown":"How can I read a list of exception dates for a schedule from an Excel file without having to adopt each date from the file separately? I am trying to set up a shift-plan which takes into account holidays, etc. over the next 5 years. For this I have created an Excel table containing a list of holiday dates, which I would now like to use in my AnyLogic simulation. I tried the exceptions section of my schedule object, but didn&#39;t find a way to connect this section to my excel file. The only option I am getting here is to manually enter each date... Since this would be extremely tedious, I am looking for a workaround (Java Code?). Can someone help?","title":"Read Anylogic schedule exceptions from database table","body":"<p>How can I read a list of exception dates for a schedule from an Excel file without having to adopt each date from the file separately? I am trying to set up a shift-plan which takes into account holidays, etc. over the next 5 years. For this I have created an Excel table containing a list of holiday dates, which I would now like to use in my AnyLogic simulation. I tried the exceptions section of my schedule object, but didn't find a way to connect this section to my excel file. The only option I am getting here is to manually enter each date... Since this would be extremely tedious, I am looking for a workaround (Java Code?). Can someone help?</p>\n"},{"tags":["java","jetty","embedded-jetty"],"comments":[{"owner":{"account_id":406289,"reputation":47511,"user_id":775715,"accept_rate":100,"display_name":"Joakim Erdfelt"},"score":0,"creation_date":1631845570,"post_id":69215674,"comment_id":122338381,"body_markdown":"What are you using to upload the video? and what do the request headers look like? (we need more details).   The last log shows that the output is OPEN and the input is IDLE (meaning it&#39;s not finished, and waiting on more content).","body":"What are you using to upload the video? and what do the request headers look like? (we need more details).   The last log shows that the output is OPEN and the input is IDLE (meaning it&#39;s not finished, and waiting on more content)."},{"owner":{"account_id":8603521,"reputation":117,"user_id":6444293,"display_name":"Alessandro Valentino"},"score":0,"creation_date":1631900841,"post_id":69215674,"comment_id":122357828,"body_markdown":"Hi, i just edited the question with more details on the problem, as you suggested","body":"Hi, i just edited the question with more details on the problem, as you suggested"},{"owner":{"account_id":406289,"reputation":47511,"user_id":775715,"accept_rate":100,"display_name":"Joakim Erdfelt"},"score":0,"creation_date":1631906090,"post_id":69215674,"comment_id":122359362,"body_markdown":"What version of postman are you using? as the one you are using seems to have the old bug with the `Connection: keep-alive` header still (that header should not be sent when using HTTP/1.1, only when using HTTP/1.0).","body":"What version of postman are you using? as the one you are using seems to have the old bug with the <code>Connection: keep-alive</code> header still (that header should not be sent when using HTTP/1.1, only when using HTTP/1.0)."},{"owner":{"account_id":8603521,"reputation":117,"user_id":6444293,"display_name":"Alessandro Valentino"},"score":0,"creation_date":1631906375,"post_id":69215674,"comment_id":122359446,"body_markdown":"I could try to update it and see. But still, does not explain how i can reproduce the bug in my angular app. Will try to update postman though","body":"I could try to update it and see. But still, does not explain how i can reproduce the bug in my angular app. Will try to update postman though"}],"answers":[{"tags":[],"owner":{"account_id":406289,"reputation":47511,"user_id":775715,"accept_rate":100,"display_name":"Joakim Erdfelt"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1631908528,"creation_date":1631908528,"answer_id":69228831,"question_id":69215674,"body_markdown":"13MB is a minuscule size to upload, the Jetty project uploads 1GB, 4GB, and 10GB files during it&#39;s unit testing both as a straight `POST` and again as a `multipart/form-data`.  \r\n\r\nSee: https://github.com/eclipse/jetty.project/blob/jetty-11.0.6/jetty-webapp/src/test/java/org/eclipse/jetty/webapp/HugeResourceTest.java\r\n\r\nI also ran a quick test using a more reliable http client than PostMan.\r\n\r\nThe server, running Jetty 11.0.6, with the demo modules enable.\r\n\r\n``` shell\r\n$ java -jar ~/code/jetty/distros/jetty-home-11.0.6/start.jar \r\n2021-09-17 14:24:28.360:WARN :oe.jetty:main: demo-realm is deployed. DO NOT USE IN PRODUCTION!\r\n2021-09-17 14:24:28.401:INFO :oejs.Server:main: jetty-11.0.6; built: 2021-06-29T16:16:33.537Z; git: 69469432898becda3aed32a32d4b0adbb7b6daee; jvm 11.0.12+7\r\n2021-09-17 14:24:28.437:INFO :oejdp.ScanningAppProvider:main: Deployment monitor [file:///home/joakim/code/jetty/distros/bases/base11-demos/webapps/]\r\n2021-09-17 14:24:28.813:WARN :oejshC.ROOT:main: The test-jetty webapp is deployed. DO NOT USE IN PRODUCTION!\r\n2021-09-17 14:24:28.957:INFO :oejss.DefaultSessionIdManager:main: Session workerName=node0\r\n2021-09-17 14:24:29.022:INFO :oejsh.ContextHandler:main: Started o.e.j.w.WebAppContext@2609b277{Test WebApp,/,file:///home/joakim/code/jetty/distros/bases/base11-demos/work/jetty-0_0_0_0-8080-ROOT_war-_-any-/webapp/,AVAILABLE}{/home/joakim/code/jetty/distros/bases/base11-demos/webapps/ROOT.war}\r\n2021-09-17 14:24:29.182:WARN :oejshC.test:main: The test-jetty webapp is deployed. DO NOT USE IN PRODUCTION!\r\n2021-09-17 14:24:29.246:INFO :oejsh.ContextHandler:main: Started o.e.j.w.WebAppContext@e6516e{Test WebApp,/test,file:///home/joakim/code/jetty/distros/bases/base11-demos/work/jetty-0_0_0_0-8080-demo-jetty_war-_test-any-/webapp/,AVAILABLE}{/home/joakim/code/jetty/distros/bases/base11-demos/webapps/demo-jetty.war}\r\n2021-09-17 14:24:29.255:INFO :oejs.AbstractConnector:main: Started ServerConnector@4e9658b5{HTTP/1.1, (http/1.1)}{0.0.0.0:8080}\r\n2021-09-17 14:24:29.267:INFO :oejs.Server:main: Started Server@51891008{STARTING}[11.0.6,sto=5000] @1561ms\r\n```\r\n\r\nNext, the file I&#39;m going to test the upload with ...\r\n\r\n``` shell\r\n$ ls -la security-cam.mp4 \r\n-rw-rw-r-- 1 joakim joakim 2394313303 Sep 17 14:23 security-cam.mp4\r\n$ file security-cam.mp4 \r\nsecurity-cam.mp4: ISO Media, MP4 v2 [ISO 14496-14]\r\n```\r\n\r\nThat&#39;s 2.4GB\r\n\r\nLets upload using curl, with multipart, and without the `Expect: 100-Continue` (like your headers show)\r\n\r\n``` shell\r\n$ curl --verbose \\\r\n  --output multipart-response.html \\\r\n  --form file=@security-cam.mp4 \\\r\n  --header &quot;Expect: &quot; \\\r\n  http://localhost:8080/dump/info\r\n  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current\r\n                                 Dload  Upload   Total   Spent    Left  Speed\r\n  0     0    0     0    0     0      0      0 --:--:-- --:--:-- --:--:--     0*   Trying 127.0.0.1:8080...\r\n* TCP_NODELAY set\r\n* Connected to localhost (127.0.0.1) port 8080 (#0)\r\n&gt; POST /dump/info HTTP/1.1\r\n&gt; Host: localhost:8080\r\n&gt; User-Agent: curl/7.68.0\r\n&gt; Accept: */*\r\n&gt; Content-Length: 2394313511\r\n&gt; Content-Type: multipart/form-data; boundary=------------------------b3d2869d036926f9\r\n&gt; \r\n} [65536 bytes data]\r\n 88 2283M    0     0   88 2016M      0  1006M  0:00:02  0:00:02 --:--:-- 1005M* We are completely uploaded and fine\r\n* Mark bundle as not supporting multiuse\r\n&lt; HTTP/1.1 200 OK\r\n&lt; Set-Cookie: JSESSIONID=node03eutgygnhty4ltv47atz8yfb12.node0; Path=/\r\n&lt; Expires: Thu, 01 Jan 1970 00:00:00 GMT\r\n&lt; Content-Type: text/html;charset=utf-8\r\n&lt; Content-Length: 10721\r\n&lt; Server: Jetty(11.0.6)\r\n&lt; \r\n{ [10721 bytes data]\r\n100 2283M  100 10721  100 2283M   4704  1001M  0:00:02  0:00:02 --:--:-- 1001M\r\n* Connection #0 to host localhost left intact\r\n```\r\n\r\nSo it sent 2.4GB and received and html response with some details about the request, parsed the entire request body content with `HttpServletRequest.getParts()` and the results from the individual `javax.servlet.http.Part` is as shown as ...\r\n\r\n``` shell\r\n$ html2text multipart-response.html | grep -A5 &quot;Parts&quot;\r\nParts:\r\n        Part{n=file,fn=security-cam.mp4,ct=application/octet-\r\n    file:&#160;stream,s=2394313303,tmp=true,file=/home/joakim/code/jetty/distros/bases/\r\n        base11-demos/work/jetty-0_0_0_0-8080-ROOT_war-_-any-/upload/\r\n        MultiPart7325738426025573814}\r\n```\r\n\r\nYup, all 2.4GB were seen by the Servlet as an upload.\r\n\r\nAre they the same?  did it all upload without issue?\r\n\r\n``` shell\r\n[client]$ sha1sum security-cam.mp4 \r\n85454d56bc8315fa0484d4d5a9cb9ad54933fbab  security-cam.mp4\r\n[client]$ sha1sum /home/joakim/code/jetty/distros/bases/base11-demos/work/jetty-0_0_0_0-8080-ROOT_war-_-any-/upload/MultiPart7325738426025573814\r\n85454d56bc8315fa0484d4d5a9cb9ad54933fbab  /home/joakim/code/jetty/distros/bases/base11-demos/work/jetty-0_0_0_0-8080-ROOT_war-_-any-/upload/MultiPart7325738426025573814\r\n```\r\n\r\nYup, the same file, size, and contents.\r\n\r\nAt this point the issue doesn&#39;t seem to be in Jetty.\r\nPerhaps Jersey? or more likely PostMan?\r\n\r\nIf you can replicate this issue in a small testcase, you can try contacting the Jetty developers with that reproduction case at https://github.com/eclipse/jetty.project/issues  we might be able to narrow down where the problem in your 3rd party libraries exists.","title":"Jetty 11 - Uploading fails only when file is a video","body":"<p>13MB is a minuscule size to upload, the Jetty project uploads 1GB, 4GB, and 10GB files during it's unit testing both as a straight <code>POST</code> and again as a <code>multipart/form-data</code>.</p>\n<p>See: <a href=\"https://github.com/eclipse/jetty.project/blob/jetty-11.0.6/jetty-webapp/src/test/java/org/eclipse/jetty/webapp/HugeResourceTest.java\" rel=\"nofollow noreferrer\">https://github.com/eclipse/jetty.project/blob/jetty-11.0.6/jetty-webapp/src/test/java/org/eclipse/jetty/webapp/HugeResourceTest.java</a></p>\n<p>I also ran a quick test using a more reliable http client than PostMan.</p>\n<p>The server, running Jetty 11.0.6, with the demo modules enable.</p>\n<pre class=\"lang-sh prettyprint-override\"><code>$ java -jar ~/code/jetty/distros/jetty-home-11.0.6/start.jar \n2021-09-17 14:24:28.360:WARN :oe.jetty:main: demo-realm is deployed. DO NOT USE IN PRODUCTION!\n2021-09-17 14:24:28.401:INFO :oejs.Server:main: jetty-11.0.6; built: 2021-06-29T16:16:33.537Z; git: 69469432898becda3aed32a32d4b0adbb7b6daee; jvm 11.0.12+7\n2021-09-17 14:24:28.437:INFO :oejdp.ScanningAppProvider:main: Deployment monitor [file:///home/joakim/code/jetty/distros/bases/base11-demos/webapps/]\n2021-09-17 14:24:28.813:WARN :oejshC.ROOT:main: The test-jetty webapp is deployed. DO NOT USE IN PRODUCTION!\n2021-09-17 14:24:28.957:INFO :oejss.DefaultSessionIdManager:main: Session workerName=node0\n2021-09-17 14:24:29.022:INFO :oejsh.ContextHandler:main: Started o.e.j.w.WebAppContext@2609b277{Test WebApp,/,file:///home/joakim/code/jetty/distros/bases/base11-demos/work/jetty-0_0_0_0-8080-ROOT_war-_-any-/webapp/,AVAILABLE}{/home/joakim/code/jetty/distros/bases/base11-demos/webapps/ROOT.war}\n2021-09-17 14:24:29.182:WARN :oejshC.test:main: The test-jetty webapp is deployed. DO NOT USE IN PRODUCTION!\n2021-09-17 14:24:29.246:INFO :oejsh.ContextHandler:main: Started o.e.j.w.WebAppContext@e6516e{Test WebApp,/test,file:///home/joakim/code/jetty/distros/bases/base11-demos/work/jetty-0_0_0_0-8080-demo-jetty_war-_test-any-/webapp/,AVAILABLE}{/home/joakim/code/jetty/distros/bases/base11-demos/webapps/demo-jetty.war}\n2021-09-17 14:24:29.255:INFO :oejs.AbstractConnector:main: Started ServerConnector@4e9658b5{HTTP/1.1, (http/1.1)}{0.0.0.0:8080}\n2021-09-17 14:24:29.267:INFO :oejs.Server:main: Started Server@51891008{STARTING}[11.0.6,sto=5000] @1561ms\n</code></pre>\n<p>Next, the file I'm going to test the upload with ...</p>\n<pre class=\"lang-sh prettyprint-override\"><code>$ ls -la security-cam.mp4 \n-rw-rw-r-- 1 joakim joakim 2394313303 Sep 17 14:23 security-cam.mp4\n$ file security-cam.mp4 \nsecurity-cam.mp4: ISO Media, MP4 v2 [ISO 14496-14]\n</code></pre>\n<p>That's 2.4GB</p>\n<p>Lets upload using curl, with multipart, and without the <code>Expect: 100-Continue</code> (like your headers show)</p>\n<pre class=\"lang-sh prettyprint-override\"><code>$ curl --verbose \\\n  --output multipart-response.html \\\n  --form file=@security-cam.mp4 \\\n  --header &quot;Expect: &quot; \\\n  http://localhost:8080/dump/info\n  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current\n                                 Dload  Upload   Total   Spent    Left  Speed\n  0     0    0     0    0     0      0      0 --:--:-- --:--:-- --:--:--     0*   Trying 127.0.0.1:8080...\n* TCP_NODELAY set\n* Connected to localhost (127.0.0.1) port 8080 (#0)\n&gt; POST /dump/info HTTP/1.1\n&gt; Host: localhost:8080\n&gt; User-Agent: curl/7.68.0\n&gt; Accept: */*\n&gt; Content-Length: 2394313511\n&gt; Content-Type: multipart/form-data; boundary=------------------------b3d2869d036926f9\n&gt; \n} [65536 bytes data]\n 88 2283M    0     0   88 2016M      0  1006M  0:00:02  0:00:02 --:--:-- 1005M* We are completely uploaded and fine\n* Mark bundle as not supporting multiuse\n&lt; HTTP/1.1 200 OK\n&lt; Set-Cookie: JSESSIONID=node03eutgygnhty4ltv47atz8yfb12.node0; Path=/\n&lt; Expires: Thu, 01 Jan 1970 00:00:00 GMT\n&lt; Content-Type: text/html;charset=utf-8\n&lt; Content-Length: 10721\n&lt; Server: Jetty(11.0.6)\n&lt; \n{ [10721 bytes data]\n100 2283M  100 10721  100 2283M   4704  1001M  0:00:02  0:00:02 --:--:-- 1001M\n* Connection #0 to host localhost left intact\n</code></pre>\n<p>So it sent 2.4GB and received and html response with some details about the request, parsed the entire request body content with <code>HttpServletRequest.getParts()</code> and the results from the individual <code>javax.servlet.http.Part</code> is as shown as ...</p>\n<pre class=\"lang-sh prettyprint-override\"><code>$ html2text multipart-response.html | grep -A5 &quot;Parts&quot;\nParts:\n        Part{n=file,fn=security-cam.mp4,ct=application/octet-\n    file: stream,s=2394313303,tmp=true,file=/home/joakim/code/jetty/distros/bases/\n        base11-demos/work/jetty-0_0_0_0-8080-ROOT_war-_-any-/upload/\n        MultiPart7325738426025573814}\n</code></pre>\n<p>Yup, all 2.4GB were seen by the Servlet as an upload.</p>\n<p>Are they the same?  did it all upload without issue?</p>\n<pre class=\"lang-sh prettyprint-override\"><code>[client]$ sha1sum security-cam.mp4 \n85454d56bc8315fa0484d4d5a9cb9ad54933fbab  security-cam.mp4\n[client]$ sha1sum /home/joakim/code/jetty/distros/bases/base11-demos/work/jetty-0_0_0_0-8080-ROOT_war-_-any-/upload/MultiPart7325738426025573814\n85454d56bc8315fa0484d4d5a9cb9ad54933fbab  /home/joakim/code/jetty/distros/bases/base11-demos/work/jetty-0_0_0_0-8080-ROOT_war-_-any-/upload/MultiPart7325738426025573814\n</code></pre>\n<p>Yup, the same file, size, and contents.</p>\n<p>At this point the issue doesn't seem to be in Jetty.\nPerhaps Jersey? or more likely PostMan?</p>\n<p>If you can replicate this issue in a small testcase, you can try contacting the Jetty developers with that reproduction case at <a href=\"https://github.com/eclipse/jetty.project/issues\" rel=\"nofollow noreferrer\">https://github.com/eclipse/jetty.project/issues</a>  we might be able to narrow down where the problem in your 3rd party libraries exists.</p>\n"}],"owner":{"account_id":8603521,"reputation":117,"user_id":6444293,"display_name":"Alessandro Valentino"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":345,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1635427531,"creation_date":1631829691,"question_id":69215674,"body_markdown":"I have an embedded jetty server that handles file uploads. &lt;br&gt;\r\nWhen uploading **any file** of **any size** the file gets uploaded correctly and the request ends. For some reason though, when the uploaded file is a video file, jetty starts the `request.getParts()` as usual but then it never ends, and remains idle indefinetly end eventually ends in a timeout. &lt;br&gt;\r\nI have tried many other file formats, images, zips, pdfs and they all work great.&lt;br&gt;\r\nThe problem appears uploading specific formats, i dont know if it is actually because they are videos or something else, but i downloaded many video samples from the internet and tried uploading them to jetty and the problem appears for example with .mp4, .3gp and.mov, but it does not for an .mkv file.\r\n\r\nHere is the last lines of jetty log before it stops:\r\n\r\n```\r\n21:38:08:628 [qtp915349526-16] DEBUG: produceRawContent updated rawContentArrived to 12834785 and firstByteTimeStamp to 109772550050391 AsyncContentProducer@67554002[r=null,t=null,i=null,error=false,c=HttpChannelOverHttp@6f3547cb{s=HttpChannelState@18720e7a{s=HANDLING rs=BLOCKING os=OPEN is=IDLE awp=false se=false i=true al=0},r=1,c=false/false,a=HANDLING,uri=http://192.168.1.100/api/v1/files/upload,age=8640}]\r\n21:38:08:628 [qtp915349526-16] DEBUG: produceRawContent produced Content@714714d8{DirectByteBufferR@48200ff0[p=0,l=8192,c=8192,r=8192]={&lt;&lt;&lt;\\x1de.C\\x1f\\\\\\x1f]&amp;M+\\x95%\\x7f\\xDf\\x03\\x8aI\\xE4&#39;$\\x0e!\\xA6\\x13...\\xBd\\xFd\\xD9\\x9a\\xEa&lt;\\x93\\xC2\\xE5ux&quot;vIf&quot;LF\\xA2t\\x03=:&gt;&gt;&gt;},spc=false,eof=false,err=null} AsyncContentProducer@67554002[r=null,t=null,i=null,error=false,c=HttpChannelOverHttp@6f3547cb{s=HttpChannelState@18720e7a{s=HANDLING rs=BLOCKING os=OPEN is=IDLE awp=false se=false i=true al=0},r=1,c=false/false,a=HANDLING,uri=http://192.168.1.100/api/v1/files/upload,age=8640}]\r\n21:38:08:628 [qtp915349526-16] DEBUG: null interceptor, transformed content = raw content AsyncContentProducer@67554002[r=Content@714714d8{DirectByteBufferR@48200ff0[p=0,l=8192,c=8192,r=8192]={&lt;&lt;&lt;\\x1de.C\\x1f\\\\\\x1f]&amp;M+\\x95%\\x7f\\xDf\\x03\\x8aI\\xE4&#39;$\\x0e!\\xA6\\x13...\\xBd\\xFd\\xD9\\x9a\\xEa&lt;\\x93\\xC2\\xE5ux&quot;vIf&quot;LF\\xA2t\\x03=:&gt;&gt;&gt;},spc=false,eof=false,err=null},t=null,i=null,error=false,c=HttpChannelOverHttp@6f3547cb{s=HttpChannelState@18720e7a{s=HANDLING rs=BLOCKING os=OPEN is=IDLE awp=false se=false i=true al=0},r=1,c=false/false,a=HANDLING,uri=http://192.168.1.100/api/v1/files/upload,age=8640}]\r\n21:38:08:629 [qtp915349526-16] DEBUG: transformed content is not empty AsyncContentProducer@67554002[r=Content@714714d8{DirectByteBufferR@48200ff0[p=0,l=8192,c=8192,r=8192]={&lt;&lt;&lt;\\x1de.C\\x1f\\\\\\x1f]&amp;M+\\x95%\\x7f\\xDf\\x03\\x8aI\\xE4&#39;$\\x0e!\\xA6\\x13...\\xBd\\xFd\\xD9\\x9a\\xEa&lt;\\x93\\xC2\\xE5ux&quot;vIf&quot;LF\\xA2t\\x03=:&gt;&gt;&gt;},spc=false,eof=false,err=null},t=Content@714714d8{DirectByteBufferR@48200ff0[p=0,l=8192,c=8192,r=8192]={&lt;&lt;&lt;\\x1de.C\\x1f\\\\\\x1f]&amp;M+\\x95%\\x7f\\xDf\\x03\\x8aI\\xE4&#39;$\\x0e!\\xA6\\x13...\\xBd\\xFd\\xD9\\x9a\\xEa&lt;\\x93\\xC2\\xE5ux&quot;vIf&quot;LF\\xA2t\\x03=:&gt;&gt;&gt;},spc=false,eof=false,err=null},i=null,error=false,c=HttpChannelOverHttp@6f3547cb{s=HttpChannelState@18720e7a{s=HANDLING rs=BLOCKING os=OPEN is=IDLE awp=false se=false i=true al=0},r=1,c=false/false,a=HANDLING,uri=http://192.168.1.100/api/v1/files/upload,age=8641}]\r\n21:38:08:629 [qtp915349526-16] DEBUG: returning transformed content AsyncContentProducer@67554002[r=Content@714714d8{DirectByteBufferR@48200ff0[p=0,l=8192,c=8192,r=8192]={&lt;&lt;&lt;\\x1de.C\\x1f\\\\\\x1f]&amp;M+\\x95%\\x7f\\xDf\\x03\\x8aI\\xE4&#39;$\\x0e!\\xA6\\x13...\\xBd\\xFd\\xD9\\x9a\\xEa&lt;\\x93\\xC2\\xE5ux&quot;vIf&quot;LF\\xA2t\\x03=:&gt;&gt;&gt;},spc=false,eof=false,err=null},t=Content@714714d8{DirectByteBufferR@48200ff0[p=0,l=8192,c=8192,r=8192]={&lt;&lt;&lt;\\x1de.C\\x1f\\\\\\x1f]&amp;M+\\x95%\\x7f\\xDf\\x03\\x8aI\\xE4&#39;$\\x0e!\\xA6\\x13...\\xBd\\xFd\\xD9\\x9a\\xEa&lt;\\x93\\xC2\\xE5ux&quot;vIf&quot;LF\\xA2t\\x03=:&gt;&gt;&gt;},spc=false,eof=false,err=null},i=null,error=false,c=HttpChannelOverHttp@6f3547cb{s=HttpChannelState@18720e7a{s=HANDLING rs=BLOCKING os=OPEN is=IDLE awp=false se=false i=true al=0},r=1,c=false/false,a=HANDLING,uri=http://192.168.1.100/api/v1/files/upload,age=8641}]\r\n21:38:08:629 [qtp915349526-16] DEBUG: available = 8192 AsyncContentProducer@67554002[r=Content@714714d8{DirectByteBufferR@48200ff0[p=0,l=8192,c=8192,r=8192]={&lt;&lt;&lt;\\x1de.C\\x1f\\\\\\x1f]&amp;M+\\x95%\\x7f\\xDf\\x03\\x8aI\\xE4&#39;$\\x0e!\\xA6\\x13...\\xBd\\xFd\\xD9\\x9a\\xEa&lt;\\x93\\xC2\\xE5ux&quot;vIf&quot;LF\\xA2t\\x03=:&gt;&gt;&gt;},spc=false,eof=false,err=null},t=Content@714714d8{DirectByteBufferR@48200ff0[p=0,l=8192,c=8192,r=8192]={&lt;&lt;&lt;\\x1de.C\\x1f\\\\\\x1f]&amp;M+\\x95%\\x7f\\xDf\\x03\\x8aI\\xE4&#39;$\\x0e!\\xA6\\x13...\\xBd\\xFd\\xD9\\x9a\\xEa&lt;\\x93\\xC2\\xE5ux&quot;vIf&quot;LF\\xA2t\\x03=:&gt;&gt;&gt;},spc=false,eof=false,err=null},i=null,error=false,c=HttpChannelOverHttp@6f3547cb{s=HttpChannelState@18720e7a{s=HANDLING rs=BLOCKING os=OPEN is=IDLE awp=false se=false i=true al=0},r=1,c=false/false,a=HANDLING,uri=http://192.168.1.100/api/v1/files/upload,age=8641}]\r\n21:38:08:629 [qtp915349526-16] DEBUG: available=8192 HttpInput@1246248597 cs=HttpChannelState@18720e7a{s=HANDLING rs=BLOCKING os=OPEN is=IDLE awp=false se=false i=true al=0} cp=org.eclipse.jetty.server.BlockingContentProducer@6a92fa25 eof=false\r\n21:38:08:630 [qtp915349526-16] DEBUG: checkMinDataRate [m=0,t=109772550050391] AsyncContentProducer@67554002[r=Content@714714d8{DirectByteBufferR@48200ff0[p=0,l=8192,c=8192,r=8192]={&lt;&lt;&lt;\\x1de.C\\x1f\\\\\\x1f]&amp;M+\\x95%\\x7f\\xDf\\x03\\x8aI\\xE4&#39;$\\x0e!\\xA6\\x13...\\xBd\\xFd\\xD9\\x9a\\xEa&lt;\\x93\\xC2\\xE5ux&quot;vIf&quot;LF\\xA2t\\x03=:&gt;&gt;&gt;},spc=false,eof=false,err=null},t=Content@714714d8{DirectByteBufferR@48200ff0[p=0,l=8192,c=8192,r=8192]={&lt;&lt;&lt;\\x1de.C\\x1f\\\\\\x1f]&amp;M+\\x95%\\x7f\\xDf\\x03\\x8aI\\xE4&#39;$\\x0e!\\xA6\\x13...\\xBd\\xFd\\xD9\\x9a\\xEa&lt;\\x93\\xC2\\xE5ux&quot;vIf&quot;LF\\xA2t\\x03=:&gt;&gt;&gt;},spc=false,eof=false,err=null},i=null,error=false,c=HttpChannelOverHttp@6f3547cb{s=HttpChannelState@18720e7a{s=HANDLING rs=BLOCKING os=OPEN is=IDLE awp=false se=false i=true al=0},r=1,c=false/false,a=HANDLING,uri=http://192.168.1.100/api/v1/files/upload,age=8642}]\r\n21:38:08:630 [qtp915349526-16] DEBUG: nextTransformedContent AsyncContentProducer@67554002[r=Content@714714d8{DirectByteBufferR@48200ff0[p=0,l=8192,c=8192,r=8192]={&lt;&lt;&lt;\\x1de.C\\x1f\\\\\\x1f]&amp;M+\\x95%\\x7f\\xDf\\x03\\x8aI\\xE4&#39;$\\x0e!\\xA6\\x13...\\xBd\\xFd\\xD9\\x9a\\xEa&lt;\\x93\\xC2\\xE5ux&quot;vIf&quot;LF\\xA2t\\x03=:&gt;&gt;&gt;},spc=false,eof=false,err=null},t=Content@714714d8{DirectByteBufferR@48200ff0[p=0,l=8192,c=8192,r=8192]={&lt;&lt;&lt;\\x1de.C\\x1f\\\\\\x1f]&amp;M+\\x95%\\x7f\\xDf\\x03\\x8aI\\xE4&#39;$\\x0e!\\xA6\\x13...\\xBd\\xFd\\xD9\\x9a\\xEa&lt;\\x93\\xC2\\xE5ux&quot;vIf&quot;LF\\xA2t\\x03=:&gt;&gt;&gt;},spc=false,eof=false,err=null},i=null,error=false,c=HttpChannelOverHttp@6f3547cb{s=HttpChannelState@18720e7a{s=HANDLING rs=BLOCKING os=OPEN is=IDLE awp=false se=false i=true al=0},r=1,c=false/false,a=HANDLING,uri=http://192.168.1.100/api/v1/files/upload,age=8642}]\r\n21:38:08:630 [qtp915349526-16] DEBUG: returning transformed content AsyncContentProducer@67554002[r=Content@714714d8{DirectByteBufferR@48200ff0[p=0,l=8192,c=8192,r=8192]={&lt;&lt;&lt;\\x1de.C\\x1f\\\\\\x1f]&amp;M+\\x95%\\x7f\\xDf\\x03\\x8aI\\xE4&#39;$\\x0e!\\xA6\\x13...\\xBd\\xFd\\xD9\\x9a\\xEa&lt;\\x93\\xC2\\xE5ux&quot;vIf&quot;LF\\xA2t\\x03=:&gt;&gt;&gt;},spc=false,eof=false,err=null},t=Content@714714d8{DirectByteBufferR@48200ff0[p=0,l=8192,c=8192,r=8192]={&lt;&lt;&lt;\\x1de.C\\x1f\\\\\\x1f]&amp;M+\\x95%\\x7f\\xDf\\x03\\x8aI\\xE4&#39;$\\x0e!\\xA6\\x13...\\xBd\\xFd\\xD9\\x9a\\xEa&lt;\\x93\\xC2\\xE5ux&quot;vIf&quot;LF\\xA2t\\x03=:&gt;&gt;&gt;},spc=false,eof=false,err=null},i=null,error=false,c=HttpChannelOverHttp@6f3547cb{s=HttpChannelState@18720e7a{s=HANDLING rs=BLOCKING os=OPEN is=IDLE awp=false se=false i=true al=0},r=1,c=false/false,a=HANDLING,uri=http://192.168.1.100/api/v1/files/upload,age=8642}]\r\n21:38:08:631 [qtp915349526-16] DEBUG: nextContent = Content@714714d8{DirectByteBufferR@48200ff0[p=0,l=8192,c=8192,r=8192]={&lt;&lt;&lt;\\x1de.C\\x1f\\\\\\x1f]&amp;M+\\x95%\\x7f\\xDf\\x03\\x8aI\\xE4&#39;$\\x0e!\\xA6\\x13...\\xBd\\xFd\\xD9\\x9a\\xEa&lt;\\x93\\xC2\\xE5ux&quot;vIf&quot;LF\\xA2t\\x03=:&gt;&gt;&gt;},spc=false,eof=false,err=null} AsyncContentProducer@67554002[r=Content@714714d8{DirectByteBufferR@48200ff0[p=0,l=8192,c=8192,r=8192]={&lt;&lt;&lt;\\x1de.C\\x1f\\\\\\x1f]&amp;M+\\x95%\\x7f\\xDf\\x03\\x8aI\\xE4&#39;$\\x0e!\\xA6\\x13...\\xBd\\xFd\\xD9\\x9a\\xEa&lt;\\x93\\xC2\\xE5ux&quot;vIf&quot;LF\\xA2t\\x03=:&gt;&gt;&gt;},spc=false,eof=false,err=null},t=Content@714714d8{DirectByteBufferR@48200ff0[p=0,l=8192,c=8192,r=8192]={&lt;&lt;&lt;\\x1de.C\\x1f\\\\\\x1f]&amp;M+\\x95%\\x7f\\xDf\\x03\\x8aI\\xE4&#39;$\\x0e!\\xA6\\x13...\\xBd\\xFd\\xD9\\x9a\\xEa&lt;\\x93\\xC2\\xE5ux&quot;vIf&quot;LF\\xA2t\\x03=:&gt;&gt;&gt;},spc=false,eof=false,err=null},i=null,error=false,c=HttpChannelOverHttp@6f3547cb{s=HttpChannelState@18720e7a{s=HANDLING rs=BLOCKING os=OPEN is=IDLE awp=false se=false i=true al=0},r=1,c=false/false,a=HANDLING,uri=http://192.168.1.100/api/v1/files/upload,age=8643}]\r\n21:38:08:631 [qtp915349526-16] DEBUG: onReadIdle HttpChannelState@18720e7a{s=HANDLING rs=BLOCKING os=OPEN is=IDLE awp=false se=false i=true al=0}\r\n21:38:08:631 [qtp915349526-16] DEBUG: nextContent async producer returned Content@714714d8{DirectByteBufferR@48200ff0[p=0,l=8192,c=8192,r=8192]={&lt;&lt;&lt;\\x1de.C\\x1f\\\\\\x1f]&amp;M+\\x95%\\x7f\\xDf\\x03\\x8aI\\xE4&#39;$\\x0e!\\xA6\\x13...\\xBd\\xFd\\xD9\\x9a\\xEa&lt;\\x93\\xC2\\xE5ux&quot;vIf&quot;LF\\xA2t\\x03=:&gt;&gt;&gt;},spc=false,eof=false,err=null}\r\n21:38:08:631 [qtp915349526-16] DEBUG: read produced 8192 byte(s) HttpInput@1246248597 cs=HttpChannelState@18720e7a{s=HANDLING rs=BLOCKING os=OPEN is=IDLE awp=false se=false i=true al=0} cp=org.eclipse.jetty.server.BlockingContentProducer@6a92fa25 eof=false\r\n21:38:08:632 [qtp915349526-16] DEBUG: reclaim Content@714714d8{DirectByteBufferR@48200ff0[p=8192,l=8192,c=8192,r=0]={\\x1de.C\\x1f\\\\\\x1f]&amp;...LF\\xA2t\\x03=:&lt;&lt;&lt;&gt;&gt;&gt;},spc=false,eof=false,err=null} AsyncContentProducer@67554002[r=Content@714714d8{DirectByteBufferR@48200ff0[p=8192,l=8192,c=8192,r=0]={\\x1de.C\\x1f\\\\\\x1f]&amp;...LF\\xA2t\\x03=:&lt;&lt;&lt;&gt;&gt;&gt;},spc=false,eof=false,err=null},t=Content@714714d8{DirectByteBufferR@48200ff0[p=8192,l=8192,c=8192,r=0]={\\x1de.C\\x1f\\\\\\x1f]&amp;...LF\\xA2t\\x03=:&lt;&lt;&lt;&gt;&gt;&gt;},spc=false,eof=false,err=null},i=null,error=false,c=HttpChannelOverHttp@6f3547cb{s=HttpChannelState@18720e7a{s=HANDLING rs=BLOCKING os=OPEN is=IDLE awp=false se=false i=true al=0},r=1,c=false/false,a=HANDLING,uri=http://192.168.1.100/api/v1/files/upload,age=8644}]\r\n21:38:08:632 [qtp915349526-16] DEBUG: releaseRequestBuffer HttpConnection@373d0634::SocketChannelEndPoint@ffd712a{l=/127.0.0.1:42069,r=/127.0.0.1:41214,OPEN,fill=-,flush=-,to=5/30000}{io=0/0,kio=0,kro=1}-&gt;HttpConnection@373d0634[p=HttpParser{s=CONTENT,12834785 of 13785725},g=HttpGenerator@16634b69{s=START}]=&gt;HttpChannelOverHttp@6f3547cb{s=HttpChannelState@18720e7a{s=HANDLING rs=BLOCKING os=OPEN is=IDLE awp=false se=false i=true al=0},r=1,c=false/false,a=HANDLING,uri=http://192.168.1.100/api/v1/files/upload,age=8644}\r\n21:38:08:632 [qtp915349526-16] DEBUG: parseOctetContent(HeapByteBuffer@72ad9ab9[p=0,l=16384,c=16384,r=16384]={&lt;&lt;&lt;N\\x15#\\xA2\\xCa0\\x01)\\xD9a\\x9f\\xE8-\\x99\\x9c\\xC5\\xF4u\\xEf\\xE7\\xC0\\xBfS\\xA9\\x98...\\xBd\\xC7\\xCc\\x9a\\x85\\x02\\x1c\\xE5\\x13\\xBf\\xC8qj\\xFb}\\x06O[\\xF1\\xE8\\xE4)\\xDd&gt;&gt;&gt;})\r\n21:38:08:632 [qtp915349526-16] DEBUG: Content=HeapByteBuffer@4aec8a46[p=0,l=16384,c=16384,r=16384]={&lt;&lt;&lt;N\\x15#\\xA2\\xCa0\\x01)\\xD9a\\x9f\\xE8-\\x99\\x9c\\xC5\\xF4u\\xEf\\xE7\\xC0\\xBfS\\xA9\\x98...\\xBd\\xC7\\xCc\\x9a\\x85\\x02\\x1c\\xE5\\x13\\xBf\\xC8qj\\xFb}\\x06O[\\xF1\\xE8\\xE4)\\xDd&gt;&gt;&gt;}, Last=false MultiPartParser{s=OCTETS}\r\n21:38:08:633 [qtp915349526-16] DEBUG: nextTransformedContent AsyncContentProducer@67554002[r=null,t=null,i=null,error=false,c=HttpChannelOverHttp@6f3547cb{s=HttpChannelState@18720e7a{s=HANDLING rs=BLOCKING os=OPEN is=IDLE awp=false se=false i=true al=0},r=1,c=false/false,a=HANDLING,uri=http://192.168.1.100/api/v1/files/upload,age=8645}]\r\n\r\n```\r\n\r\nAnd this is how i set the multipart config ( it&#39;s in the server initialization ):\r\n```\r\nHttpConfiguration httpConfig = new HttpConfiguration();\r\nhttpConfig.setOutputBufferSize(1024);\r\n\r\nServerConnector connector = new ServerConnector(server, new HttpConnectionFactory(httpConfig));\r\nconnector.setPort(port);\r\n\r\nserver.addConnector(connector);\r\n\r\nServletHolder jerseyServlet = contextHandler.addServlet(org.glassfish.jersey.servlet.ServletContainer.class, &quot;/api/v1/*&quot;);\r\njerseyServlet.getRegistration().setMultipartConfig(new MultipartConfigElement(&quot;/storage/tmp&quot;, -1L, -1L, 1));\r\n\r\n```\r\nLet me remind you that as everything is right now the file upload works perfectly for any file except those video files.&lt;br&gt;\r\nThanks for the help\r\n\r\n\r\nEDIT: \r\n\r\nTo upload the video i am using PostMan with the following headers:\r\n```\r\nContent-Type:multipart/form-data\r\nX-Auth-Token:{{token}}\r\nX-UserId:{{userid}}\r\n... plus the default postman headers\r\n```\r\nI also have an angular application that performs these requests with the following headers ( copy pasted from chrome console ):\r\n```\r\nAccept: application/json, text/plain, */*\r\nAccept-Encoding: gzip, deflate\r\nAccept-Language: en,it-IT;q=0.9,it;q=0.8,en-US;q=0.7\r\nConnection: keep-alive\r\nContent-Length: 13785725\r\nContent-Type: multipart/form-data; boundary=----WebKitFormBoundarymajD2TkV6jdqloTj\r\nHost: 192.168.1.100\r\nOrigin: http://localhost:4200\r\nReferer: http://localhost:4200/\r\nUser-Agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/93.0.4577.82 Safari/537.36\r\nX-Auth-Token: mytoken\r\nX-UserId: myuserid\r\n```\r\nI get the same result in both cases.\r\nJust for context, even though i don&#39;t think it matters, i have a virtual machine ( Ubuntu 20.04 ) hosting the jetty server app that receives the requests, and the angular application is running locally on my windows 10 PC, in the developement server that vscode provides","title":"Jetty 11 - Uploading fails only when file is a video","body":"<p>I have an embedded jetty server that handles file uploads. <br>\nWhen uploading <strong>any file</strong> of <strong>any size</strong> the file gets uploaded correctly and the request ends. For some reason though, when the uploaded file is a video file, jetty starts the <code>request.getParts()</code> as usual but then it never ends, and remains idle indefinetly end eventually ends in a timeout. <br>\nI have tried many other file formats, images, zips, pdfs and they all work great.<br>\nThe problem appears uploading specific formats, i dont know if it is actually because they are videos or something else, but i downloaded many video samples from the internet and tried uploading them to jetty and the problem appears for example with .mp4, .3gp and.mov, but it does not for an .mkv file.</p>\n<p>Here is the last lines of jetty log before it stops:</p>\n<pre><code>21:38:08:628 [qtp915349526-16] DEBUG: produceRawContent updated rawContentArrived to 12834785 and firstByteTimeStamp to 109772550050391 AsyncContentProducer@67554002[r=null,t=null,i=null,error=false,c=HttpChannelOverHttp@6f3547cb{s=HttpChannelState@18720e7a{s=HANDLING rs=BLOCKING os=OPEN is=IDLE awp=false se=false i=true al=0},r=1,c=false/false,a=HANDLING,uri=http://192.168.1.100/api/v1/files/upload,age=8640}]\n21:38:08:628 [qtp915349526-16] DEBUG: produceRawContent produced Content@714714d8{DirectByteBufferR@48200ff0[p=0,l=8192,c=8192,r=8192]={&lt;&lt;&lt;\\x1de.C\\x1f\\\\\\x1f]&amp;M+\\x95%\\x7f\\xDf\\x03\\x8aI\\xE4'$\\x0e!\\xA6\\x13...\\xBd\\xFd\\xD9\\x9a\\xEa&lt;\\x93\\xC2\\xE5ux&quot;vIf&quot;LF\\xA2t\\x03=:&gt;&gt;&gt;},spc=false,eof=false,err=null} AsyncContentProducer@67554002[r=null,t=null,i=null,error=false,c=HttpChannelOverHttp@6f3547cb{s=HttpChannelState@18720e7a{s=HANDLING rs=BLOCKING os=OPEN is=IDLE awp=false se=false i=true al=0},r=1,c=false/false,a=HANDLING,uri=http://192.168.1.100/api/v1/files/upload,age=8640}]\n21:38:08:628 [qtp915349526-16] DEBUG: null interceptor, transformed content = raw content AsyncContentProducer@67554002[r=Content@714714d8{DirectByteBufferR@48200ff0[p=0,l=8192,c=8192,r=8192]={&lt;&lt;&lt;\\x1de.C\\x1f\\\\\\x1f]&amp;M+\\x95%\\x7f\\xDf\\x03\\x8aI\\xE4'$\\x0e!\\xA6\\x13...\\xBd\\xFd\\xD9\\x9a\\xEa&lt;\\x93\\xC2\\xE5ux&quot;vIf&quot;LF\\xA2t\\x03=:&gt;&gt;&gt;},spc=false,eof=false,err=null},t=null,i=null,error=false,c=HttpChannelOverHttp@6f3547cb{s=HttpChannelState@18720e7a{s=HANDLING rs=BLOCKING os=OPEN is=IDLE awp=false se=false i=true al=0},r=1,c=false/false,a=HANDLING,uri=http://192.168.1.100/api/v1/files/upload,age=8640}]\n21:38:08:629 [qtp915349526-16] DEBUG: transformed content is not empty AsyncContentProducer@67554002[r=Content@714714d8{DirectByteBufferR@48200ff0[p=0,l=8192,c=8192,r=8192]={&lt;&lt;&lt;\\x1de.C\\x1f\\\\\\x1f]&amp;M+\\x95%\\x7f\\xDf\\x03\\x8aI\\xE4'$\\x0e!\\xA6\\x13...\\xBd\\xFd\\xD9\\x9a\\xEa&lt;\\x93\\xC2\\xE5ux&quot;vIf&quot;LF\\xA2t\\x03=:&gt;&gt;&gt;},spc=false,eof=false,err=null},t=Content@714714d8{DirectByteBufferR@48200ff0[p=0,l=8192,c=8192,r=8192]={&lt;&lt;&lt;\\x1de.C\\x1f\\\\\\x1f]&amp;M+\\x95%\\x7f\\xDf\\x03\\x8aI\\xE4'$\\x0e!\\xA6\\x13...\\xBd\\xFd\\xD9\\x9a\\xEa&lt;\\x93\\xC2\\xE5ux&quot;vIf&quot;LF\\xA2t\\x03=:&gt;&gt;&gt;},spc=false,eof=false,err=null},i=null,error=false,c=HttpChannelOverHttp@6f3547cb{s=HttpChannelState@18720e7a{s=HANDLING rs=BLOCKING os=OPEN is=IDLE awp=false se=false i=true al=0},r=1,c=false/false,a=HANDLING,uri=http://192.168.1.100/api/v1/files/upload,age=8641}]\n21:38:08:629 [qtp915349526-16] DEBUG: returning transformed content AsyncContentProducer@67554002[r=Content@714714d8{DirectByteBufferR@48200ff0[p=0,l=8192,c=8192,r=8192]={&lt;&lt;&lt;\\x1de.C\\x1f\\\\\\x1f]&amp;M+\\x95%\\x7f\\xDf\\x03\\x8aI\\xE4'$\\x0e!\\xA6\\x13...\\xBd\\xFd\\xD9\\x9a\\xEa&lt;\\x93\\xC2\\xE5ux&quot;vIf&quot;LF\\xA2t\\x03=:&gt;&gt;&gt;},spc=false,eof=false,err=null},t=Content@714714d8{DirectByteBufferR@48200ff0[p=0,l=8192,c=8192,r=8192]={&lt;&lt;&lt;\\x1de.C\\x1f\\\\\\x1f]&amp;M+\\x95%\\x7f\\xDf\\x03\\x8aI\\xE4'$\\x0e!\\xA6\\x13...\\xBd\\xFd\\xD9\\x9a\\xEa&lt;\\x93\\xC2\\xE5ux&quot;vIf&quot;LF\\xA2t\\x03=:&gt;&gt;&gt;},spc=false,eof=false,err=null},i=null,error=false,c=HttpChannelOverHttp@6f3547cb{s=HttpChannelState@18720e7a{s=HANDLING rs=BLOCKING os=OPEN is=IDLE awp=false se=false i=true al=0},r=1,c=false/false,a=HANDLING,uri=http://192.168.1.100/api/v1/files/upload,age=8641}]\n21:38:08:629 [qtp915349526-16] DEBUG: available = 8192 AsyncContentProducer@67554002[r=Content@714714d8{DirectByteBufferR@48200ff0[p=0,l=8192,c=8192,r=8192]={&lt;&lt;&lt;\\x1de.C\\x1f\\\\\\x1f]&amp;M+\\x95%\\x7f\\xDf\\x03\\x8aI\\xE4'$\\x0e!\\xA6\\x13...\\xBd\\xFd\\xD9\\x9a\\xEa&lt;\\x93\\xC2\\xE5ux&quot;vIf&quot;LF\\xA2t\\x03=:&gt;&gt;&gt;},spc=false,eof=false,err=null},t=Content@714714d8{DirectByteBufferR@48200ff0[p=0,l=8192,c=8192,r=8192]={&lt;&lt;&lt;\\x1de.C\\x1f\\\\\\x1f]&amp;M+\\x95%\\x7f\\xDf\\x03\\x8aI\\xE4'$\\x0e!\\xA6\\x13...\\xBd\\xFd\\xD9\\x9a\\xEa&lt;\\x93\\xC2\\xE5ux&quot;vIf&quot;LF\\xA2t\\x03=:&gt;&gt;&gt;},spc=false,eof=false,err=null},i=null,error=false,c=HttpChannelOverHttp@6f3547cb{s=HttpChannelState@18720e7a{s=HANDLING rs=BLOCKING os=OPEN is=IDLE awp=false se=false i=true al=0},r=1,c=false/false,a=HANDLING,uri=http://192.168.1.100/api/v1/files/upload,age=8641}]\n21:38:08:629 [qtp915349526-16] DEBUG: available=8192 HttpInput@1246248597 cs=HttpChannelState@18720e7a{s=HANDLING rs=BLOCKING os=OPEN is=IDLE awp=false se=false i=true al=0} cp=org.eclipse.jetty.server.BlockingContentProducer@6a92fa25 eof=false\n21:38:08:630 [qtp915349526-16] DEBUG: checkMinDataRate [m=0,t=109772550050391] AsyncContentProducer@67554002[r=Content@714714d8{DirectByteBufferR@48200ff0[p=0,l=8192,c=8192,r=8192]={&lt;&lt;&lt;\\x1de.C\\x1f\\\\\\x1f]&amp;M+\\x95%\\x7f\\xDf\\x03\\x8aI\\xE4'$\\x0e!\\xA6\\x13...\\xBd\\xFd\\xD9\\x9a\\xEa&lt;\\x93\\xC2\\xE5ux&quot;vIf&quot;LF\\xA2t\\x03=:&gt;&gt;&gt;},spc=false,eof=false,err=null},t=Content@714714d8{DirectByteBufferR@48200ff0[p=0,l=8192,c=8192,r=8192]={&lt;&lt;&lt;\\x1de.C\\x1f\\\\\\x1f]&amp;M+\\x95%\\x7f\\xDf\\x03\\x8aI\\xE4'$\\x0e!\\xA6\\x13...\\xBd\\xFd\\xD9\\x9a\\xEa&lt;\\x93\\xC2\\xE5ux&quot;vIf&quot;LF\\xA2t\\x03=:&gt;&gt;&gt;},spc=false,eof=false,err=null},i=null,error=false,c=HttpChannelOverHttp@6f3547cb{s=HttpChannelState@18720e7a{s=HANDLING rs=BLOCKING os=OPEN is=IDLE awp=false se=false i=true al=0},r=1,c=false/false,a=HANDLING,uri=http://192.168.1.100/api/v1/files/upload,age=8642}]\n21:38:08:630 [qtp915349526-16] DEBUG: nextTransformedContent AsyncContentProducer@67554002[r=Content@714714d8{DirectByteBufferR@48200ff0[p=0,l=8192,c=8192,r=8192]={&lt;&lt;&lt;\\x1de.C\\x1f\\\\\\x1f]&amp;M+\\x95%\\x7f\\xDf\\x03\\x8aI\\xE4'$\\x0e!\\xA6\\x13...\\xBd\\xFd\\xD9\\x9a\\xEa&lt;\\x93\\xC2\\xE5ux&quot;vIf&quot;LF\\xA2t\\x03=:&gt;&gt;&gt;},spc=false,eof=false,err=null},t=Content@714714d8{DirectByteBufferR@48200ff0[p=0,l=8192,c=8192,r=8192]={&lt;&lt;&lt;\\x1de.C\\x1f\\\\\\x1f]&amp;M+\\x95%\\x7f\\xDf\\x03\\x8aI\\xE4'$\\x0e!\\xA6\\x13...\\xBd\\xFd\\xD9\\x9a\\xEa&lt;\\x93\\xC2\\xE5ux&quot;vIf&quot;LF\\xA2t\\x03=:&gt;&gt;&gt;},spc=false,eof=false,err=null},i=null,error=false,c=HttpChannelOverHttp@6f3547cb{s=HttpChannelState@18720e7a{s=HANDLING rs=BLOCKING os=OPEN is=IDLE awp=false se=false i=true al=0},r=1,c=false/false,a=HANDLING,uri=http://192.168.1.100/api/v1/files/upload,age=8642}]\n21:38:08:630 [qtp915349526-16] DEBUG: returning transformed content AsyncContentProducer@67554002[r=Content@714714d8{DirectByteBufferR@48200ff0[p=0,l=8192,c=8192,r=8192]={&lt;&lt;&lt;\\x1de.C\\x1f\\\\\\x1f]&amp;M+\\x95%\\x7f\\xDf\\x03\\x8aI\\xE4'$\\x0e!\\xA6\\x13...\\xBd\\xFd\\xD9\\x9a\\xEa&lt;\\x93\\xC2\\xE5ux&quot;vIf&quot;LF\\xA2t\\x03=:&gt;&gt;&gt;},spc=false,eof=false,err=null},t=Content@714714d8{DirectByteBufferR@48200ff0[p=0,l=8192,c=8192,r=8192]={&lt;&lt;&lt;\\x1de.C\\x1f\\\\\\x1f]&amp;M+\\x95%\\x7f\\xDf\\x03\\x8aI\\xE4'$\\x0e!\\xA6\\x13...\\xBd\\xFd\\xD9\\x9a\\xEa&lt;\\x93\\xC2\\xE5ux&quot;vIf&quot;LF\\xA2t\\x03=:&gt;&gt;&gt;},spc=false,eof=false,err=null},i=null,error=false,c=HttpChannelOverHttp@6f3547cb{s=HttpChannelState@18720e7a{s=HANDLING rs=BLOCKING os=OPEN is=IDLE awp=false se=false i=true al=0},r=1,c=false/false,a=HANDLING,uri=http://192.168.1.100/api/v1/files/upload,age=8642}]\n21:38:08:631 [qtp915349526-16] DEBUG: nextContent = Content@714714d8{DirectByteBufferR@48200ff0[p=0,l=8192,c=8192,r=8192]={&lt;&lt;&lt;\\x1de.C\\x1f\\\\\\x1f]&amp;M+\\x95%\\x7f\\xDf\\x03\\x8aI\\xE4'$\\x0e!\\xA6\\x13...\\xBd\\xFd\\xD9\\x9a\\xEa&lt;\\x93\\xC2\\xE5ux&quot;vIf&quot;LF\\xA2t\\x03=:&gt;&gt;&gt;},spc=false,eof=false,err=null} AsyncContentProducer@67554002[r=Content@714714d8{DirectByteBufferR@48200ff0[p=0,l=8192,c=8192,r=8192]={&lt;&lt;&lt;\\x1de.C\\x1f\\\\\\x1f]&amp;M+\\x95%\\x7f\\xDf\\x03\\x8aI\\xE4'$\\x0e!\\xA6\\x13...\\xBd\\xFd\\xD9\\x9a\\xEa&lt;\\x93\\xC2\\xE5ux&quot;vIf&quot;LF\\xA2t\\x03=:&gt;&gt;&gt;},spc=false,eof=false,err=null},t=Content@714714d8{DirectByteBufferR@48200ff0[p=0,l=8192,c=8192,r=8192]={&lt;&lt;&lt;\\x1de.C\\x1f\\\\\\x1f]&amp;M+\\x95%\\x7f\\xDf\\x03\\x8aI\\xE4'$\\x0e!\\xA6\\x13...\\xBd\\xFd\\xD9\\x9a\\xEa&lt;\\x93\\xC2\\xE5ux&quot;vIf&quot;LF\\xA2t\\x03=:&gt;&gt;&gt;},spc=false,eof=false,err=null},i=null,error=false,c=HttpChannelOverHttp@6f3547cb{s=HttpChannelState@18720e7a{s=HANDLING rs=BLOCKING os=OPEN is=IDLE awp=false se=false i=true al=0},r=1,c=false/false,a=HANDLING,uri=http://192.168.1.100/api/v1/files/upload,age=8643}]\n21:38:08:631 [qtp915349526-16] DEBUG: onReadIdle HttpChannelState@18720e7a{s=HANDLING rs=BLOCKING os=OPEN is=IDLE awp=false se=false i=true al=0}\n21:38:08:631 [qtp915349526-16] DEBUG: nextContent async producer returned Content@714714d8{DirectByteBufferR@48200ff0[p=0,l=8192,c=8192,r=8192]={&lt;&lt;&lt;\\x1de.C\\x1f\\\\\\x1f]&amp;M+\\x95%\\x7f\\xDf\\x03\\x8aI\\xE4'$\\x0e!\\xA6\\x13...\\xBd\\xFd\\xD9\\x9a\\xEa&lt;\\x93\\xC2\\xE5ux&quot;vIf&quot;LF\\xA2t\\x03=:&gt;&gt;&gt;},spc=false,eof=false,err=null}\n21:38:08:631 [qtp915349526-16] DEBUG: read produced 8192 byte(s) HttpInput@1246248597 cs=HttpChannelState@18720e7a{s=HANDLING rs=BLOCKING os=OPEN is=IDLE awp=false se=false i=true al=0} cp=org.eclipse.jetty.server.BlockingContentProducer@6a92fa25 eof=false\n21:38:08:632 [qtp915349526-16] DEBUG: reclaim Content@714714d8{DirectByteBufferR@48200ff0[p=8192,l=8192,c=8192,r=0]={\\x1de.C\\x1f\\\\\\x1f]&amp;...LF\\xA2t\\x03=:&lt;&lt;&lt;&gt;&gt;&gt;},spc=false,eof=false,err=null} AsyncContentProducer@67554002[r=Content@714714d8{DirectByteBufferR@48200ff0[p=8192,l=8192,c=8192,r=0]={\\x1de.C\\x1f\\\\\\x1f]&amp;...LF\\xA2t\\x03=:&lt;&lt;&lt;&gt;&gt;&gt;},spc=false,eof=false,err=null},t=Content@714714d8{DirectByteBufferR@48200ff0[p=8192,l=8192,c=8192,r=0]={\\x1de.C\\x1f\\\\\\x1f]&amp;...LF\\xA2t\\x03=:&lt;&lt;&lt;&gt;&gt;&gt;},spc=false,eof=false,err=null},i=null,error=false,c=HttpChannelOverHttp@6f3547cb{s=HttpChannelState@18720e7a{s=HANDLING rs=BLOCKING os=OPEN is=IDLE awp=false se=false i=true al=0},r=1,c=false/false,a=HANDLING,uri=http://192.168.1.100/api/v1/files/upload,age=8644}]\n21:38:08:632 [qtp915349526-16] DEBUG: releaseRequestBuffer HttpConnection@373d0634::SocketChannelEndPoint@ffd712a{l=/127.0.0.1:42069,r=/127.0.0.1:41214,OPEN,fill=-,flush=-,to=5/30000}{io=0/0,kio=0,kro=1}-&gt;HttpConnection@373d0634[p=HttpParser{s=CONTENT,12834785 of 13785725},g=HttpGenerator@16634b69{s=START}]=&gt;HttpChannelOverHttp@6f3547cb{s=HttpChannelState@18720e7a{s=HANDLING rs=BLOCKING os=OPEN is=IDLE awp=false se=false i=true al=0},r=1,c=false/false,a=HANDLING,uri=http://192.168.1.100/api/v1/files/upload,age=8644}\n21:38:08:632 [qtp915349526-16] DEBUG: parseOctetContent(HeapByteBuffer@72ad9ab9[p=0,l=16384,c=16384,r=16384]={&lt;&lt;&lt;N\\x15#\\xA2\\xCa0\\x01)\\xD9a\\x9f\\xE8-\\x99\\x9c\\xC5\\xF4u\\xEf\\xE7\\xC0\\xBfS\\xA9\\x98...\\xBd\\xC7\\xCc\\x9a\\x85\\x02\\x1c\\xE5\\x13\\xBf\\xC8qj\\xFb}\\x06O[\\xF1\\xE8\\xE4)\\xDd&gt;&gt;&gt;})\n21:38:08:632 [qtp915349526-16] DEBUG: Content=HeapByteBuffer@4aec8a46[p=0,l=16384,c=16384,r=16384]={&lt;&lt;&lt;N\\x15#\\xA2\\xCa0\\x01)\\xD9a\\x9f\\xE8-\\x99\\x9c\\xC5\\xF4u\\xEf\\xE7\\xC0\\xBfS\\xA9\\x98...\\xBd\\xC7\\xCc\\x9a\\x85\\x02\\x1c\\xE5\\x13\\xBf\\xC8qj\\xFb}\\x06O[\\xF1\\xE8\\xE4)\\xDd&gt;&gt;&gt;}, Last=false MultiPartParser{s=OCTETS}\n21:38:08:633 [qtp915349526-16] DEBUG: nextTransformedContent AsyncContentProducer@67554002[r=null,t=null,i=null,error=false,c=HttpChannelOverHttp@6f3547cb{s=HttpChannelState@18720e7a{s=HANDLING rs=BLOCKING os=OPEN is=IDLE awp=false se=false i=true al=0},r=1,c=false/false,a=HANDLING,uri=http://192.168.1.100/api/v1/files/upload,age=8645}]\n\n</code></pre>\n<p>And this is how i set the multipart config ( it's in the server initialization ):</p>\n<pre><code>HttpConfiguration httpConfig = new HttpConfiguration();\nhttpConfig.setOutputBufferSize(1024);\n\nServerConnector connector = new ServerConnector(server, new HttpConnectionFactory(httpConfig));\nconnector.setPort(port);\n\nserver.addConnector(connector);\n\nServletHolder jerseyServlet = contextHandler.addServlet(org.glassfish.jersey.servlet.ServletContainer.class, &quot;/api/v1/*&quot;);\njerseyServlet.getRegistration().setMultipartConfig(new MultipartConfigElement(&quot;/storage/tmp&quot;, -1L, -1L, 1));\n\n</code></pre>\n<p>Let me remind you that as everything is right now the file upload works perfectly for any file except those video files.<br>\nThanks for the help</p>\n<p>EDIT:</p>\n<p>To upload the video i am using PostMan with the following headers:</p>\n<pre><code>Content-Type:multipart/form-data\nX-Auth-Token:{{token}}\nX-UserId:{{userid}}\n... plus the default postman headers\n</code></pre>\n<p>I also have an angular application that performs these requests with the following headers ( copy pasted from chrome console ):</p>\n<pre><code>Accept: application/json, text/plain, */*\nAccept-Encoding: gzip, deflate\nAccept-Language: en,it-IT;q=0.9,it;q=0.8,en-US;q=0.7\nConnection: keep-alive\nContent-Length: 13785725\nContent-Type: multipart/form-data; boundary=----WebKitFormBoundarymajD2TkV6jdqloTj\nHost: 192.168.1.100\nOrigin: http://localhost:4200\nReferer: http://localhost:4200/\nUser-Agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/93.0.4577.82 Safari/537.36\nX-Auth-Token: mytoken\nX-UserId: myuserid\n</code></pre>\n<p>I get the same result in both cases.\nJust for context, even though i don't think it matters, i have a virtual machine ( Ubuntu 20.04 ) hosting the jetty server app that receives the requests, and the angular application is running locally on my windows 10 PC, in the developement server that vscode provides</p>\n"},{"tags":["java","json","gson","deserialization"],"comments":[{"owner":{"account_id":17630574,"reputation":272,"user_id":12794752,"display_name":"darkmnemic"},"score":0,"creation_date":1635426098,"post_id":69754474,"comment_id":123298875,"body_markdown":"I believe the issue is that you are specifying the type as a single Movies.class, which is not the same type as your movies array (which is an array). I&#39;m not familiar with the GSON libraries so I&#39;m not much help, but if you can specify the type as Movies[].class or something similar, that might work.","body":"I believe the issue is that you are specifying the type as a single Movies.class, which is not the same type as your movies array (which is an array). I&#39;m not familiar with the GSON libraries so I&#39;m not much help, but if you can specify the type as Movies[].class or something similar, that might work."},{"owner":{"account_id":23171593,"reputation":3,"user_id":17270765,"display_name":"Matt Demo"},"score":0,"creation_date":1635426584,"post_id":69754474,"comment_id":123299121,"body_markdown":"If I try changing Movies.class to Movies[].class, I get the following error:  &quot;java.lang.IllegalStateException: Expected BEGIN_ARRAY but was BEGIN_OBJECT at line 1 column 2 path $&quot;","body":"If I try changing Movies.class to Movies[].class, I get the following error:  &quot;java.lang.IllegalStateException: Expected BEGIN_ARRAY but was BEGIN_OBJECT at line 1 column 2 path $&quot;"},{"owner":{"account_id":17630574,"reputation":272,"user_id":12794752,"display_name":"darkmnemic"},"score":0,"creation_date":1635426680,"post_id":69754474,"comment_id":123299176,"body_markdown":"Ah. Make a MovieList class, that has just a list of Movie objects on it. Then use MovieList.class as the type. The JSON you are parsing is an object that contains an array of movies, so your Java object needs to reflect that.","body":"Ah. Make a MovieList class, that has just a list of Movie objects on it. Then use MovieList.class as the type. The JSON you are parsing is an object that contains an array of movies, so your Java object needs to reflect that."}],"answers":[{"tags":[],"owner":{"account_id":7426337,"reputation":549,"user_id":5648688,"display_name":"Shubham"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1635426694,"creation_date":1635426694,"answer_id":69754710,"question_id":69754474,"body_markdown":"Try using this\r\n\r\n\r\n    Gson gson = new Gson();\r\n    Movies[] movies = gson.fromJson(new JsonReader(new FileReader(&quot;src/main/input.json&quot;))),Movies[].class);\r\n\r\nor something like\r\n\r\n    Type listType = new TypeToken&lt;List&lt;Movies&gt;&gt;() {}.getType();\r\n    List&lt;Movies&gt; movies = new Gson().fromJson(new JsonReader(new FileReader(&quot;src/main/input.json&quot;))), listType);","title":"Trouble deserializing JSON into Java objects with GSON","body":"<p>Try using this</p>\n<pre><code>Gson gson = new Gson();\nMovies[] movies = gson.fromJson(new JsonReader(new FileReader(&quot;src/main/input.json&quot;))),Movies[].class);\n</code></pre>\n<p>or something like</p>\n<pre><code>Type listType = new TypeToken&lt;List&lt;Movies&gt;&gt;() {}.getType();\nList&lt;Movies&gt; movies = new Gson().fromJson(new JsonReader(new FileReader(&quot;src/main/input.json&quot;))), listType);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":17630574,"reputation":272,"user_id":12794752,"display_name":"darkmnemic"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1635427281,"creation_date":1635427281,"answer_id":69754885,"question_id":69754474,"body_markdown":"The JSON you are deserializing represents an object with a list of objects on it. The Java object you are trying to deserialize to needs to match that.\r\n\r\nFirst, create a new class `MovieList`.\r\n```java\r\nclass MovieList {\r\n     List&lt;Movie&gt; movies;\r\n}\r\n```\r\n\r\nUpdate your `Movies` class to be called `Movie`, since it represents a single movie.\r\n\r\n```java\r\nclass Movie {\r\n     String name;\r\n     String url;\r\n     String IMAX;\r\n     String rating;\r\n     List&lt;Cast&gt; cast;\r\n}\r\n```\r\n\r\nNow try calling `gson.fromJson(...)` with the following\r\n```java\r\nMovieList movieList = gson.fromJson(new FileReader(&quot;src/main/input.json&quot;), MovieList.class);\r\nSystem.out.println(movieList.getMovies().get(0));\r\n```","title":"Trouble deserializing JSON into Java objects with GSON","body":"<p>The JSON you are deserializing represents an object with a list of objects on it. The Java object you are trying to deserialize to needs to match that.</p>\n<p>First, create a new class <code>MovieList</code>.</p>\n<pre class=\"lang-java prettyprint-override\"><code>class MovieList {\n     List&lt;Movie&gt; movies;\n}\n</code></pre>\n<p>Update your <code>Movies</code> class to be called <code>Movie</code>, since it represents a single movie.</p>\n<pre class=\"lang-java prettyprint-override\"><code>class Movie {\n     String name;\n     String url;\n     String IMAX;\n     String rating;\n     List&lt;Cast&gt; cast;\n}\n</code></pre>\n<p>Now try calling <code>gson.fromJson(...)</code> with the following</p>\n<pre class=\"lang-java prettyprint-override\"><code>MovieList movieList = gson.fromJson(new FileReader(&quot;src/main/input.json&quot;), MovieList.class);\nSystem.out.println(movieList.getMovies().get(0));\n</code></pre>\n"}],"owner":{"account_id":23171593,"reputation":3,"user_id":17270765,"display_name":"Matt Demo"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":352,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":69754885,"answer_count":2,"score":0,"last_activity_date":1635427281,"creation_date":1635425629,"question_id":69754474,"body_markdown":"I have been trying to learn GSON, but I am struggling with it. I am trying to deserialize a JSON file into Java objects, using GSON. I have read a million other questions on here, and for the life of me, I can&#39;t understand what I&#39;m doing wrong.\r\n\r\nHere is my JSON text:\r\n```\r\n{\r\n &quot;movies&quot;: [\r\n  {\r\n   &quot;name&quot;: &quot;The Shawshank Redemption&quot;,\r\n   &quot;url&quot;: &quot;https://parsehub.com/sandbox/moviedetails?movie=The%20Shawshank%20Redemption&quot;,\r\n   &quot;IMAX&quot;: &quot;06:00 PM&quot;,\r\n   &quot;rating&quot;: &quot;9 . 2&quot;,\r\n   &quot;cast&quot;: [\r\n    {\r\n     &quot;character&quot;: &quot;Andy Dufresne&quot;,\r\n     &quot;actor&quot;: &quot;Tim Robbins&quot;\r\n    },\r\n    {\r\n     &quot;character&quot;: &quot;Ellis Boyd &#39;Red&#39; Redding&quot;,\r\n     &quot;actor&quot;: &quot;Morgan Freeman&quot;\r\n    },\r\n    {\r\n     &quot;character&quot;: &quot;Warden Norton&quot;,\r\n     &quot;actor&quot;: &quot;Bob Gunton&quot;\r\n    },\r\n    {\r\n     &quot;character&quot;: &quot;Heywood&quot;,\r\n     &quot;actor&quot;: &quot;William Sadler&quot;\r\n    }\r\n   ]\r\n  },\r\n  {\r\n   &quot;name&quot;: &quot;Schindler&#39;s List&quot;,\r\n   &quot;url&quot;: &quot;https://parsehub.com/sandbox/moviedetails?movie=Schindler%27s%20List&quot;,\r\n   &quot;IMAX&quot;: &quot;06:15 PM&quot;,\r\n   &quot;rating&quot;: &quot;8 . 9&quot;,\r\n   &quot;cast&quot;: [\r\n    {\r\n     &quot;character&quot;: &quot;Oskar Schindler&quot;,\r\n     &quot;actor&quot;: &quot;Liam Neeson&quot;\r\n    },\r\n    {\r\n     &quot;character&quot;: &quot;Itzhak Stern&quot;,\r\n     &quot;actor&quot;: &quot;Ben Kingsley&quot;\r\n    },\r\n    {\r\n     &quot;character&quot;: &quot;Amon Goeth&quot;,\r\n     &quot;actor&quot;: &quot;Ralph Fiennes&quot;\r\n    }\r\n   ]\r\n  }\r\n ]\r\n}\r\n```\r\n\r\nAnd here is my Java code:\r\n```\r\nimport com.google.gson.Gson;\r\nimport java.io.*;\r\nimport java.lang.reflect.Type;\r\nimport java.util.ArrayList;\r\n\r\npublic class Main {\r\n\r\n    public static void main(String[] args) throws FileNotFoundException {\r\n        Gson gson = new Gson();\r\n        Movies[] movies = gson.fromJson(new FileReader(&quot;src/main/input.json&quot;), (Type) Movies.class);\r\n        System.out.println(movies[0]);\r\n    }\r\n\r\n    class Movies {\r\n        String name;\r\n        String url;\r\n        String IMAX;\r\n        String rating;\r\n        ArrayList&lt;Cast&gt; cast;\r\n    }\r\n\r\n    class Cast {\r\n        ArrayList&lt;CastMember&gt; castMembers;\r\n    }\r\n\r\n    class CastMember{\r\n        String character;\r\n        String actor;\r\n    }\r\n}\r\n```\r\n\r\nWhen I run this, I get the following error:\r\n```\r\nException in thread &quot;main&quot; java.lang.ClassCastException: class com.Main$Movies cannot be cast to class [Lcom.Main$Movies; (com.Main$Movies and [Lcom.Main$Movies; are in unnamed module of loader &#39;app&#39;)\r\n\tat com.Main.main(Main.java:13)\r\n```\r\n\r\n","title":"Trouble deserializing JSON into Java objects with GSON","body":"<p>I have been trying to learn GSON, but I am struggling with it. I am trying to deserialize a JSON file into Java objects, using GSON. I have read a million other questions on here, and for the life of me, I can't understand what I'm doing wrong.</p>\n<p>Here is my JSON text:</p>\n<pre><code>{\n &quot;movies&quot;: [\n  {\n   &quot;name&quot;: &quot;The Shawshank Redemption&quot;,\n   &quot;url&quot;: &quot;https://parsehub.com/sandbox/moviedetails?movie=The%20Shawshank%20Redemption&quot;,\n   &quot;IMAX&quot;: &quot;06:00 PM&quot;,\n   &quot;rating&quot;: &quot;9 . 2&quot;,\n   &quot;cast&quot;: [\n    {\n     &quot;character&quot;: &quot;Andy Dufresne&quot;,\n     &quot;actor&quot;: &quot;Tim Robbins&quot;\n    },\n    {\n     &quot;character&quot;: &quot;Ellis Boyd 'Red' Redding&quot;,\n     &quot;actor&quot;: &quot;Morgan Freeman&quot;\n    },\n    {\n     &quot;character&quot;: &quot;Warden Norton&quot;,\n     &quot;actor&quot;: &quot;Bob Gunton&quot;\n    },\n    {\n     &quot;character&quot;: &quot;Heywood&quot;,\n     &quot;actor&quot;: &quot;William Sadler&quot;\n    }\n   ]\n  },\n  {\n   &quot;name&quot;: &quot;Schindler's List&quot;,\n   &quot;url&quot;: &quot;https://parsehub.com/sandbox/moviedetails?movie=Schindler%27s%20List&quot;,\n   &quot;IMAX&quot;: &quot;06:15 PM&quot;,\n   &quot;rating&quot;: &quot;8 . 9&quot;,\n   &quot;cast&quot;: [\n    {\n     &quot;character&quot;: &quot;Oskar Schindler&quot;,\n     &quot;actor&quot;: &quot;Liam Neeson&quot;\n    },\n    {\n     &quot;character&quot;: &quot;Itzhak Stern&quot;,\n     &quot;actor&quot;: &quot;Ben Kingsley&quot;\n    },\n    {\n     &quot;character&quot;: &quot;Amon Goeth&quot;,\n     &quot;actor&quot;: &quot;Ralph Fiennes&quot;\n    }\n   ]\n  }\n ]\n}\n</code></pre>\n<p>And here is my Java code:</p>\n<pre><code>import com.google.gson.Gson;\nimport java.io.*;\nimport java.lang.reflect.Type;\nimport java.util.ArrayList;\n\npublic class Main {\n\n    public static void main(String[] args) throws FileNotFoundException {\n        Gson gson = new Gson();\n        Movies[] movies = gson.fromJson(new FileReader(&quot;src/main/input.json&quot;), (Type) Movies.class);\n        System.out.println(movies[0]);\n    }\n\n    class Movies {\n        String name;\n        String url;\n        String IMAX;\n        String rating;\n        ArrayList&lt;Cast&gt; cast;\n    }\n\n    class Cast {\n        ArrayList&lt;CastMember&gt; castMembers;\n    }\n\n    class CastMember{\n        String character;\n        String actor;\n    }\n}\n</code></pre>\n<p>When I run this, I get the following error:</p>\n<pre><code>Exception in thread &quot;main&quot; java.lang.ClassCastException: class com.Main$Movies cannot be cast to class [Lcom.Main$Movies; (com.Main$Movies and [Lcom.Main$Movies; are in unnamed module of loader 'app')\n    at com.Main.main(Main.java:13)\n</code></pre>\n"},{"tags":["java","spring","csv","character-encoding","opencsv"],"comments":[{"owner":{"account_id":2819940,"reputation":12538,"user_id":2423906,"accept_rate":100,"display_name":"SedJ601"},"score":1,"creation_date":1630681993,"post_id":69047104,"comment_id":122031499,"body_markdown":"My guess is that this is the `UTF-8` `BOM` issue. I think there is a setting that you can set to tell `OpenCSV` that a  `UTF-8` `BOM` exists.  I have not worked with `OpenCSV` in a while, so I could be wrong.  If this is the case, one thing you can do is use `NotePad++`  to remove the `BOM`.","body":"My guess is that this is the <code>UTF-8</code> <code>BOM</code> issue. I think there is a setting that you can set to tell <code>OpenCSV</code> that a  <code>UTF-8</code> <code>BOM</code> exists.  I have not worked with <code>OpenCSV</code> in a while, so I could be wrong.  If this is the case, one thing you can do is use <code>NotePad++</code>  to remove the <code>BOM</code>."},{"owner":{"account_id":14751077,"reputation":556,"user_id":10653163,"display_name":"Bal&#225;zs B&#246;rcs&#246;k"},"score":1,"creation_date":1631899749,"post_id":69047104,"comment_id":122357465,"body_markdown":"@Sedrick thank you very much. This was the problem. I have resolved it by using Apache&#39;s implementation for reading in files with BOM. I will answer the question as well.","body":"@Sedrick thank you very much. This was the problem. I have resolved it by using Apache&#39;s implementation for reading in files with BOM. I will answer the question as well."}],"answers":[{"tags":[],"owner":{"account_id":14751077,"reputation":556,"user_id":10653163,"display_name":"Bal&#225;zs B&#246;rcs&#246;k"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1635427178,"creation_date":1635427178,"answer_id":69754861,"question_id":69047104,"body_markdown":"This is not an OpenCSV specific problem, but rather that `FileReader` reads in the BOM in the UTF encoded file. This is kind of unexpected, but it makes sense, as there is no context for `FileReader` that it should excludes those bytes.\r\n\r\nThe solution would be to either manually remove it, or - in my case - use a library to make sure it is excluded. I wrote the following utility class:\r\n\r\n    public class CSVUtils {\r\n\r\n    private static CSVParser createCSVParser(final String CSVDelimiter) {\r\n        return new CSVParserBuilder().withSeparator(CSVDelimiter.charAt(0)).build();\r\n    }\r\n\r\n    private static  BOMInputStream versatileBOMInputStreamGenerator(final InputStream inputStream) {\r\n\r\n        return new BOMInputStream(inputStream, ByteOrderMark.UTF_8, ByteOrderMark.UTF_16BE, ByteOrderMark.UTF_16LE,\r\n                ByteOrderMark.UTF_16BE, ByteOrderMark.UTF_32LE, ByteOrderMark.UTF_32BE);\r\n    }\r\n\r\n\r\n    public static  CSVReader createCSVReaderFromFile(final String CSVPath, final String CSVDelimiter) throws FileNotFoundException {\r\n        return new CSVReaderBuilder(new InputStreamReader(\r\n                versatileBOMInputStreamGenerator(new FileInputStream(CSVPath)), StandardCharsets.UTF_8))\r\n                .withCSVParser(createCSVParser(CSVDelimiter)).build();\r\n    }\r\n\r\n    public static  CSVReader createCSVReaderFromString(final String content, final String CSVDelimiter) {\r\n        byte[] contentBytes = content.getBytes(StandardCharsets.UTF_8);\r\n        return new CSVReaderBuilder(new InputStreamReader(\r\n                versatileBOMInputStreamGenerator(new ByteArrayInputStream(contentBytes)), StandardCharsets.UTF_8))\r\n                .withCSVParser(createCSVParser(CSVDelimiter)).build();\r\n    }\r\n\r\n}\r\n\r\nAll I have to do is use these created `CSVReader` objects later where needed. As you can see, it uses some dependencies, which can be imported with\r\n\r\n    import org.apache.commons.io.ByteOrderMark;\r\n    import org.apache.commons.io.input.BOMInputStream;\r\nThese dependencies can be added to the project via the POM as follows:\r\n\r\n            &lt;!-- https://mvnrepository.com/artifact/commons-io/commons-io --&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;commons-io&lt;/groupId&gt;\r\n            &lt;artifactId&gt;commons-io&lt;/artifactId&gt;\r\n            &lt;version&gt;2.11.0&lt;/version&gt;","title":"OpenCSV reads in additional byte value together with first line&#39;s first value together in Java","body":"<p>This is not an OpenCSV specific problem, but rather that <code>FileReader</code> reads in the BOM in the UTF encoded file. This is kind of unexpected, but it makes sense, as there is no context for <code>FileReader</code> that it should excludes those bytes.</p>\n<p>The solution would be to either manually remove it, or - in my case - use a library to make sure it is excluded. I wrote the following utility class:</p>\n<pre><code>public class CSVUtils {\n\nprivate static CSVParser createCSVParser(final String CSVDelimiter) {\n    return new CSVParserBuilder().withSeparator(CSVDelimiter.charAt(0)).build();\n}\n\nprivate static  BOMInputStream versatileBOMInputStreamGenerator(final InputStream inputStream) {\n\n    return new BOMInputStream(inputStream, ByteOrderMark.UTF_8, ByteOrderMark.UTF_16BE, ByteOrderMark.UTF_16LE,\n            ByteOrderMark.UTF_16BE, ByteOrderMark.UTF_32LE, ByteOrderMark.UTF_32BE);\n}\n\n\npublic static  CSVReader createCSVReaderFromFile(final String CSVPath, final String CSVDelimiter) throws FileNotFoundException {\n    return new CSVReaderBuilder(new InputStreamReader(\n            versatileBOMInputStreamGenerator(new FileInputStream(CSVPath)), StandardCharsets.UTF_8))\n            .withCSVParser(createCSVParser(CSVDelimiter)).build();\n}\n\npublic static  CSVReader createCSVReaderFromString(final String content, final String CSVDelimiter) {\n    byte[] contentBytes = content.getBytes(StandardCharsets.UTF_8);\n    return new CSVReaderBuilder(new InputStreamReader(\n            versatileBOMInputStreamGenerator(new ByteArrayInputStream(contentBytes)), StandardCharsets.UTF_8))\n            .withCSVParser(createCSVParser(CSVDelimiter)).build();\n}\n</code></pre>\n<p>}</p>\n<p>All I have to do is use these created <code>CSVReader</code> objects later where needed. As you can see, it uses some dependencies, which can be imported with</p>\n<pre><code>import org.apache.commons.io.ByteOrderMark;\nimport org.apache.commons.io.input.BOMInputStream;\n</code></pre>\n<p>These dependencies can be added to the project via the POM as follows:</p>\n<pre><code>        &lt;!-- https://mvnrepository.com/artifact/commons-io/commons-io --&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;commons-io&lt;/groupId&gt;\n        &lt;artifactId&gt;commons-io&lt;/artifactId&gt;\n        &lt;version&gt;2.11.0&lt;/version&gt;\n</code></pre>\n"}],"owner":{"account_id":14751077,"reputation":556,"user_id":10653163,"display_name":"Bal&#225;zs B&#246;rcs&#246;k"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":414,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":69754861,"answer_count":1,"score":0,"last_activity_date":1635427178,"creation_date":1630681700,"question_id":69047104,"body_markdown":"I was working on a project where we use OpenCSV to read in CSV files and fill up a database with them at start. I noticed that there is a strange thing, that in certain cases a given identifier value can not be queried. During debugging I found that OpenCSV does not read up the CSV correctly.\r\n\r\nLet&#39;s say that I have the following CSV file:\r\n```csv\r\n01;foo\r\n02;bar\r\n...\r\n```\r\nThe first line in the example is the first line in the real CSV file as well. The file is encoded in UTF-8. The following code is used to read in the value:\r\n```java\r\n try (CSVReader csvReader = CSVUtils.createCSVReader(masterDataCSVPath, csvDelimiter)) {\r\n            List&lt;String[]&gt; masterData = csvReader.readAll();\r\n        }\r\n```\r\nThe code creating the `csvReader`:\r\n```java\r\n    static private CSVParser createCSVParser(String CSVDelimiter) {\r\n        return new CSVParserBuilder().withSeparator(CSVDelimiter.charAt(0)).build();\r\n    }\r\n\r\n    static public CSVReader createCSVReader(String CSVPath, String CSVDelimiter) throws FileNotFoundException {\r\n        return new CSVReaderBuilder(new FileReader(CSVPath)).withCSVParser(createCSVParser(CSVDelimiter)).build();\r\n    }\r\n```\r\n\r\nWhen I read in the CSV file with the following code, during debug I get the following byte values for `01`:\r\n\r\n[![Wrong CSV data][1]][1]\r\n\r\n\r\nHowever if I change my CSV file to (notice the newline at the top):\r\n```csv\r\n\r\n01;foo\r\n02;bar\r\n...\r\n```\r\nThe read-in data becomes:\r\n\r\n[![CSV data with newline at the beggining][2]][2]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/J68gk.png\r\n  [2]: https://i.stack.imgur.com/gZRck.png\r\n\r\nIn this case &quot;all is good&quot;, if I remove the first item in my `masterData` list, I can read in the values &quot;properly&quot;. However, this is not a clean solution:\r\n\r\n - It begs the question: *Why does this happen?*\r\n - Also, I do not think that we should work around the problem rather than solving it. This is only provided to work if there a newline at the beginning of my source CSV.\r\n\r\nSo I kindly ask for help, that how can this be mitigated?","title":"OpenCSV reads in additional byte value together with first line&#39;s first value together in Java","body":"<p>I was working on a project where we use OpenCSV to read in CSV files and fill up a database with them at start. I noticed that there is a strange thing, that in certain cases a given identifier value can not be queried. During debugging I found that OpenCSV does not read up the CSV correctly.</p>\n<p>Let's say that I have the following CSV file:</p>\n<pre><code>01;foo\n02;bar\n...\n</code></pre>\n<p>The first line in the example is the first line in the real CSV file as well. The file is encoded in UTF-8. The following code is used to read in the value:</p>\n<pre class=\"lang-java prettyprint-override\"><code> try (CSVReader csvReader = CSVUtils.createCSVReader(masterDataCSVPath, csvDelimiter)) {\n            List&lt;String[]&gt; masterData = csvReader.readAll();\n        }\n</code></pre>\n<p>The code creating the <code>csvReader</code>:</p>\n<pre class=\"lang-java prettyprint-override\"><code>    static private CSVParser createCSVParser(String CSVDelimiter) {\n        return new CSVParserBuilder().withSeparator(CSVDelimiter.charAt(0)).build();\n    }\n\n    static public CSVReader createCSVReader(String CSVPath, String CSVDelimiter) throws FileNotFoundException {\n        return new CSVReaderBuilder(new FileReader(CSVPath)).withCSVParser(createCSVParser(CSVDelimiter)).build();\n    }\n</code></pre>\n<p>When I read in the CSV file with the following code, during debug I get the following byte values for <code>01</code>:</p>\n<p><a href=\"https://i.stack.imgur.com/J68gk.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/J68gk.png\" alt=\"Wrong CSV data\" /></a></p>\n<p>However if I change my CSV file to (notice the newline at the top):</p>\n<pre><code>\n01;foo\n02;bar\n...\n</code></pre>\n<p>The read-in data becomes:</p>\n<p><a href=\"https://i.stack.imgur.com/gZRck.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/gZRck.png\" alt=\"CSV data with newline at the beggining\" /></a></p>\n<p>In this case &quot;all is good&quot;, if I remove the first item in my <code>masterData</code> list, I can read in the values &quot;properly&quot;. However, this is not a clean solution:</p>\n<ul>\n<li>It begs the question: <em>Why does this happen?</em></li>\n<li>Also, I do not think that we should work around the problem rather than solving it. This is only provided to work if there a newline at the beginning of my source CSV.</li>\n</ul>\n<p>So I kindly ask for help, that how can this be mitigated?</p>\n"},{"tags":["java","mysql","out-of-memory","heap-memory","visualvm"],"answers":[{"tags":[],"owner":{"account_id":23121,"reputation":527346,"user_id":57695,"accept_rate":75,"display_name":"Peter Lawrey"},"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1421750196,"creation_date":1421750002,"answer_id":28043107,"question_id":28043044,"body_markdown":"You need to do a memory trace by using the memory profiler in VisualVM.\r\n\r\nA simple way to do a memory profile is to run\r\n\r\n    jmap -histo:live {pid} | head\r\n\r\nIf you are using SQL, the most likely cause of a memory leak is failing to clean up your JDBC resources.  I suggest you make sure you close off your Statements and ResultSets.","title":"Java Memory usage continuously growing till OutOfMemory Exception","body":"<p>You need to do a memory trace by using the memory profiler in VisualVM.</p>\n\n<p>A simple way to do a memory profile is to run</p>\n\n<pre><code>jmap -histo:live {pid} | head\n</code></pre>\n\n<p>If you are using SQL, the most likely cause of a memory leak is failing to clean up your JDBC resources.  I suggest you make sure you close off your Statements and ResultSets.</p>\n"}],"owner":{"account_id":2366322,"reputation":2105,"user_id":2071938,"accept_rate":52,"display_name":"user2071938"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":411,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"accepted_answer_id":28043107,"answer_count":1,"score":0,"last_activity_date":1635426892,"creation_date":1421749814,"question_id":28043044,"body_markdown":"I have a program which parses files and stores the data in a mysql-Database.\r\nMy Problem is that the Heap space(I use VisualVM to follow them) is growing.\r\nAnd the Memory usage(ps aux --sort -rss) is also growing.\r\n\r\nWhen the HeapSize reaches the MaxHeapsize of ~128 MB I get an OutOfMemory-Exception.\r\n\r\nHow can I determine which data this is? Or what is not dealocated?\r\n\r\n![heap size][1]\r\n\r\n\r\n  [1]: http://i.stack.imgur.com/Hphn5.png","title":"Java Memory usage continuously growing till OutOfMemory Exception","body":"<p>I have a program which parses files and stores the data in a mysql-Database.\nMy Problem is that the Heap space(I use VisualVM to follow them) is growing.\nAnd the Memory usage(ps aux --sort -rss) is also growing.</p>\n\n<p>When the HeapSize reaches the MaxHeapsize of ~128 MB I get an OutOfMemory-Exception.</p>\n\n<p>How can I determine which data this is? Or what is not dealocated?</p>\n\n<p><img src=\"https://i.stack.imgur.com/Hphn5.png\" alt=\"heap size\"></p>\n"},{"tags":["java","out-of-memory","websphere","heap-memory"],"comments":[{"owner":{"account_id":428023,"reputation":15099,"user_id":810077,"accept_rate":83,"display_name":"Chetan Kinger"},"score":0,"creation_date":1433173032,"post_id":30577426,"comment_id":49225231,"body_markdown":"Can you show relevant sections of your heap-dump?","body":"Can you show relevant sections of your heap-dump?"},{"owner":{"account_id":200488,"reputation":2393,"user_id":446368,"accept_rate":49,"display_name":"Mejmo"},"score":0,"creation_date":1433173201,"post_id":30577426,"comment_id":49225346,"body_markdown":"Can you specify which sections? I attached screenshot from HA.","body":"Can you specify which sections? I attached screenshot from HA."},{"owner":{"account_id":438978,"reputation":7398,"user_id":827593,"accept_rate":50,"display_name":"JP Moresmau"},"score":0,"creation_date":1433173216,"post_id":30577426,"comment_id":49225355,"body_markdown":"Usually in these tools (I use Eclipse Memory Analyser, not yours) you can go &quot;up&quot; the references to see what objects reference these string. Go up till your reach objects in your classes.","body":"Usually in these tools (I use Eclipse Memory Analyser, not yours) you can go &quot;up&quot; the references to see what objects reference these string. Go up till your reach objects in your classes."},{"owner":{"account_id":200488,"reputation":2393,"user_id":446368,"accept_rate":49,"display_name":"Mejmo"},"score":0,"creation_date":1433173456,"post_id":30577426,"comment_id":49225535,"body_markdown":"Yeah that would be perfect, but I have java/lang/Object as one of the root nodes. Could it be caused by the JVM itself?","body":"Yeah that would be perfect, but I have java/lang/Object as one of the root nodes. Could it be caused by the JVM itself?"}],"owner":{"account_id":200488,"reputation":2393,"user_id":446368,"accept_rate":49,"display_name":"Mejmo"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":653,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"answer_count":0,"score":3,"last_activity_date":1635426866,"creation_date":1433172640,"question_id":30577426,"body_markdown":"I have heap dump from production server which was facing OutOfMemory exception. I have core dumps of multiple threads. I can load heap dump to IBM HeapAnalyzer, I see that there is 2.5GB of Strings. Ok I have addresses of those Strings. However, how can I find out which class/thread caused the memory leak? This was very rare error, so please, no VisualVM available, nor connecting to the app. I have just heap dump (.PHD), javacore dumps (.TXT) and application logs. \r\n\r\n![enter image description here][1]\r\n\r\n\r\n  [1]: http://i.stack.imgur.com/o5Geh.png","title":"How to get the thread/class name that caused memory leak?","body":"<p>I have heap dump from production server which was facing OutOfMemory exception. I have core dumps of multiple threads. I can load heap dump to IBM HeapAnalyzer, I see that there is 2.5GB of Strings. Ok I have addresses of those Strings. However, how can I find out which class/thread caused the memory leak? This was very rare error, so please, no VisualVM available, nor connecting to the app. I have just heap dump (.PHD), javacore dumps (.TXT) and application logs. </p>\n\n<p><img src=\"https://i.stack.imgur.com/o5Geh.png\" alt=\"enter image description here\"></p>\n"},{"tags":["java","excel","apache-poi","out-of-memory","heap-memory"],"comments":[{"owner":{"account_id":740820,"reputation":47963,"user_id":2353911,"accept_rate":100,"display_name":"Mena"},"score":3,"creation_date":1435843448,"post_id":31185815,"comment_id":50377011,"body_markdown":"Well... have you tried raising the maximum heap allocated?","body":"Well... have you tried raising the maximum heap allocated?"},{"owner":{"account_id":1420179,"reputation":149,"user_id":1344969,"accept_rate":62,"display_name":"Allee Clark"},"score":0,"creation_date":1435844009,"post_id":31185815,"comment_id":50377428,"body_markdown":"Yes, I am on Java 32-bit. I raised it to 512M and still got an the same exception.","body":"Yes, I am on Java 32-bit. I raised it to 512M and still got an the same exception."},{"owner":{"account_id":740820,"reputation":47963,"user_id":2353911,"accept_rate":100,"display_name":"Mena"},"score":0,"creation_date":1435844223,"post_id":31185815,"comment_id":50377588,"body_markdown":"You can set the max up to 4GB on 32 bit. Tweak a little more?","body":"You can set the max up to 4GB on 32 bit. Tweak a little more?"},{"owner":{"account_id":2577522,"reputation":3155,"user_id":2234865,"accept_rate":100,"display_name":"Viraj Nalawade"},"score":0,"creation_date":1435844422,"post_id":31185815,"comment_id":50377732,"body_markdown":"@Mena I think this issue is because of memory leakage if its not working with 1GB of heap size so I dont think it will help much to just increase the heap size because of.. http://www.azulsystems.com/technology/java-heap-size and http://javarevisited.blogspot.in/2011/05/java-heap-space-memory-size-jvm.html","body":"@Mena I think this issue is because of memory leakage if its not working with 1GB of heap size so I dont think it will help much to just increase the heap size because of.. <a href=\"http://www.azulsystems.com/technology/java-heap-size\" rel=\"nofollow noreferrer\">azulsystems.com/technology/java-heap-size</a> and <a href=\"http://javarevisited.blogspot.in/2011/05/java-heap-space-memory-size-jvm.html\" rel=\"nofollow noreferrer\">javarevisited.blogspot.in/2011/05/&hellip;</a>"},{"owner":{"account_id":740820,"reputation":47963,"user_id":2353911,"accept_rate":100,"display_name":"Mena"},"score":0,"creation_date":1435844754,"post_id":31185815,"comment_id":50377983,"body_markdown":"@VirajNalawade there could be memory leaks, but it&#39;d be very hard to help the OP with that, since they&#39;d need to scan the entire application. I would be skeptical to hear there are memory leaks in apache XmlBeans but you never know - a look at the versions and bug fixes might help. The easiest way to play with this, to **start** with, is still raising the heap to a higher level - we&#39;re talking large documents here after all.","body":"@VirajNalawade there could be memory leaks, but it&#39;d be very hard to help the OP with that, since they&#39;d need to scan the entire application. I would be skeptical to hear there are memory leaks in apache XmlBeans but you never know - a look at the versions and bug fixes might help. The easiest way to play with this, to <b>start</b> with, is still raising the heap to a higher level - we&#39;re talking large documents here after all."},{"owner":{"account_id":2577522,"reputation":3155,"user_id":2234865,"accept_rate":100,"display_name":"Viraj Nalawade"},"score":1,"creation_date":1435844952,"post_id":31185815,"comment_id":50378118,"body_markdown":"@Mena That was very hepful.. thanks for the _detailed_ explanation","body":"@Mena That was very hepful.. thanks for the <i>detailed</i> explanation"}],"answers":[{"tags":[],"owner":{"account_id":3696024,"reputation":1695,"user_id":3077349,"accept_rate":91,"display_name":"chris"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1435847367,"creation_date":1435843587,"answer_id":31185923,"question_id":31185815,"body_markdown":"try `java.exe -Xmx512m -jar yourjar.jar`\r\n\r\nIt will set maximum heap size to 512 MB. Or try bigger values if 512 is not enough.","title":"Java Apache POI","body":"<p>try <code>java.exe -Xmx512m -jar yourjar.jar</code></p>\n\n<p>It will set maximum heap size to 512 MB. Or try bigger values if 512 is not enough.</p>\n"},{"tags":[],"owner":{"account_id":2577522,"reputation":3155,"user_id":2234865,"accept_rate":100,"display_name":"Viraj Nalawade"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1435843803,"creation_date":1435843803,"answer_id":31185994,"question_id":31185815,"body_markdown":"1 .Easy way to solve OutOfMemoryError in java is to increase the maximum heap size by using JVM options `&quot;-Xmx512M&quot;`, this will immediately solve your OutOfMemoryError. &lt;br/&gt;&lt;br/&gt;\r\nThe Java virtual machine (JVM) runs with a fixed upper memory limit, which you can modify thus:\r\n\r\n    -Xms&lt;size&gt; - Set initial Java heap size\r\n    -Xmx&lt;size&gt; - Set maximum Java heap size\r\n     \r\n    $ java -Xms512m -Xmx1024m JavaApp\r\n\r\n2.Second way to resolve OutOfMemoryError in Java is rather hard and  comes when you don&#39;t have much memory and even after increase maximum heap size you are still getting java.lang.OutOfMemoryError, in this case you probably want to profile your application and look for any memory leak.&lt;br/&gt;\r\n&lt;br/&gt;\r\nSo to check memory leask you can use some tools.Its very difficult without it. Some of popular one are:\r\n\r\n&lt;a href=&quot;https://stackoverflow.com/questions/15130956/how-to-analyse-the-heap-dump-using-jmap-in-java&quot;&gt;Jmap&lt;/a&gt; is a command line utility comes with JDK6 and allows you to take a memory dump of heap in a file. It’s easy to use as shwon below:&lt;br/&gt;\r\n\r\njmap -dump:format=b,file=heapdump 6054&lt;br/&gt;&lt;br/&gt;\r\n&lt;a href=&quot;http://help.eclipse.org/luna/topic/org.eclipse.mat.ui.help/gettingstarted/basictutorial.html&quot;&gt;Eclipse memory analyzer (MAT)&lt;/a&gt; &lt;br/&gt;is a tool from eclipse foundation to analyze java heap dump. It helps to find classloader leaks and memory leaks and helps to minimize memory consumption.you can use MAT to analyze heap dump carrying millions of object and it also helps you to extract suspect of memory leak. \r\n","title":"Java Apache POI","body":"<p>1 .Easy way to solve OutOfMemoryError in java is to increase the maximum heap size by using JVM options <code>\"-Xmx512M\"</code>, this will immediately solve your OutOfMemoryError. <br/><br/>\nThe Java virtual machine (JVM) runs with a fixed upper memory limit, which you can modify thus:</p>\n\n<pre><code>-Xms&lt;size&gt; - Set initial Java heap size\n-Xmx&lt;size&gt; - Set maximum Java heap size\n\n$ java -Xms512m -Xmx1024m JavaApp\n</code></pre>\n\n<p>2.Second way to resolve OutOfMemoryError in Java is rather hard and  comes when you don't have much memory and even after increase maximum heap size you are still getting java.lang.OutOfMemoryError, in this case you probably want to profile your application and look for any memory leak.<br/>\n<br/>\nSo to check memory leask you can use some tools.Its very difficult without it. Some of popular one are:</p>\n\n<p><a href=\"https://stackoverflow.com/questions/15130956/how-to-analyse-the-heap-dump-using-jmap-in-java\">Jmap</a> is a command line utility comes with JDK6 and allows you to take a memory dump of heap in a file. It’s easy to use as shwon below:<br/></p>\n\n<p>jmap -dump:format=b,file=heapdump 6054<br/><br/>\n<a href=\"http://help.eclipse.org/luna/topic/org.eclipse.mat.ui.help/gettingstarted/basictutorial.html\" rel=\"nofollow noreferrer\">Eclipse memory analyzer (MAT)</a> <br/>is a tool from eclipse foundation to analyze java heap dump. It helps to find classloader leaks and memory leaks and helps to minimize memory consumption.you can use MAT to analyze heap dump carrying millions of object and it also helps you to extract suspect of memory leak. </p>\n"},{"tags":[],"owner":{"account_id":1420179,"reputation":149,"user_id":1344969,"accept_rate":62,"display_name":"Allee Clark"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1435858584,"creation_date":1435855988,"answer_id":31190435,"question_id":31185815,"body_markdown":"It does have to do with heap size. I set it to 2g and still getting out of memory erroy. The excel document I am working with is in a pivot table, which Apache POI has limitations for. Which causes the first exception","title":"Java Apache POI","body":"<p>It does have to do with heap size. I set it to 2g and still getting out of memory erroy. The excel document I am working with is in a pivot table, which Apache POI has limitations for. Which causes the first exception</p>\n"}],"owner":{"account_id":1420179,"reputation":149,"user_id":1344969,"accept_rate":62,"display_name":"Allee Clark"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1701,"favorite_count":0,"down_vote_count":0,"up_vote_count":4,"accepted_answer_id":31190435,"answer_count":3,"score":4,"last_activity_date":1635426853,"creation_date":1435843318,"question_id":31185815,"body_markdown":"I&#39;m working on reading data from an excel document that gets updated on a bi-weekly basis with around 50,000 rows of data, and will probably reach about 120,000 before beginning a new sheet. I am using Apache POI to get the data. I get this exception below, but I believe the most important one exception is\r\nCaused by: java.lang.OutOfMemoryError: Java heap space. I&#39;ve tested my code on a different excel sheet with less data and was able to read the data.\r\n\r\nIf you have any methods or suggestions on how to read a large excel document please share.\r\n\r\n    org.apache.poi.POIXMLException: java.lang.reflect.InvocationTargetException\r\n    \tat org.apache.poi.xssf.usermodel.XSSFFactory.createDocumentPart(XSSFFactory.java:62)\r\n    \tat org.apache.poi.POIXMLDocumentPart.read(POIXMLDocumentPart.java:456)\r\n    \tat org.apache.poi.POIXMLDocumentPart.read(POIXMLDocumentPart.java:461)\r\n    \tat org.apache.poi.POIXMLDocumentPart.read(POIXMLDocumentPart.java:461)\r\n    \tat org.apache.poi.POIXMLDocumentPart.read(POIXMLDocumentPart.java:461)\r\n    \tat org.apache.poi.POIXMLDocument.load(POIXMLDocument.java:162)\r\n    \tat org.apache.poi.xssf.usermodel.XSSFWorkbook.&lt;init&gt;(XSSFWorkbook.java:271)\r\n    \tat excelreader.readExcelFile(excelreader.java:28)\r\n    \tat excelreader.main(excelreader.java:18)\r\n    \tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n    \tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\r\n    \tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n    \tat java.lang.reflect.Method.invoke(Method.java:497)\r\n    \tat com.intellij.rt.execution.application.AppMain.main(AppMain.java:140)\r\n    Caused by: java.lang.reflect.InvocationTargetException\r\n    \tat sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)\r\n    \tat sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:62)\r\n    \tat sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45)\r\n    \tat java.lang.reflect.Constructor.newInstance(Constructor.java:422)\r\n    \tat org.apache.poi.xssf.usermodel.XSSFFactory.createDocumentPart(XSSFFactory.java:60)\r\n    \t... 13 more\r\n    Caused by: java.lang.OutOfMemoryError: Java heap space\r\n    \tat org.apache.xmlbeans.impl.store.Cur.createElementXobj(Cur.java:260)\r\n    \tat org.apache.xmlbeans.impl.store.Cur$CurLoadContext.startElement(Cur.java:2995)\r\n    \tat org.apache.xmlbeans.impl.store.Locale$SaxHandler.startElement(Locale.java:3207)\r\n    \tat org.apache.xmlbeans.impl.piccolo.xml.Piccolo.reportStartTag(Piccolo.java:1082)\r\n    \tat org.apache.xmlbeans.impl.piccolo.xml.PiccoloLexer.parseAttributesNS(PiccoloLexer.java:1822)\r\n    \tat org.apache.xmlbeans.impl.piccolo.xml.PiccoloLexer.parseOpenTagNS(PiccoloLexer.java:1521)\r\n    \tat org.apache.xmlbeans.impl.piccolo.xml.PiccoloLexer.parseTagNS(PiccoloLexer.java:1362)\r\n    \tat org.apache.xmlbeans.impl.piccolo.xml.PiccoloLexer.yylex(PiccoloLexer.java:4678)\r\n    \tat org.apache.xmlbeans.impl.piccolo.xml.Piccolo.yylex(Piccolo.java:1290)\r\n    \tat org.apache.xmlbeans.impl.piccolo.xml.Piccolo.yyparse(Piccolo.java:1400)\r\n    \tat org.apache.xmlbeans.impl.piccolo.xml.Piccolo.parse(Piccolo.java:714)\r\n    \tat org.apache.xmlbeans.impl.store.Locale$SaxLoader.load(Locale.java:3454)\r\n    \tat org.apache.xmlbeans.impl.store.Locale.parseToXmlObject(Locale.java:1276)\r\n    \tat org.apache.xmlbeans.impl.store.Locale.parseToXmlObject(Locale.java:1263)\r\n    \tat org.apache.xmlbeans.impl.schema.SchemaTypeLoaderBase.parse(SchemaTypeLoaderBase.java:345)\r\n    \tat org.openxmlformats.schemas.spreadsheetml.x2006.main.CTPivotCacheRecords$Factory.parse(Unknown Source)\r\n    \tat org.apache.poi.xssf.usermodel.XSSFPivotCacheRecords.readFrom(XSSFPivotCacheRecords.java:62)\r\n    \tat org.apache.poi.xssf.usermodel.XSSFPivotCacheRecords.&lt;init&gt;(XSSFPivotCacheRecords.java:53)\r\n    \tat sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)\r\n    \tat sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:62)\r\n    \tat sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45)\r\n    \tat java.lang.reflect.Constructor.newInstance(Constructor.java:422)\r\n    \tat org.apache.poi.xssf.usermodel.XSSFFactory.createDocumentPart(XSSFFactory.java:60)\r\n    \tat org.apache.poi.POIXMLDocumentPart.read(POIXMLDocumentPart.java:456)\r\n    \tat org.apache.poi.POIXMLDocumentPart.read(POIXMLDocumentPart.java:461)\r\n    \tat org.apache.poi.POIXMLDocumentPart.read(POIXMLDocumentPart.java:461)\r\n    \tat org.apache.poi.POIXMLDocumentPart.read(POIXMLDocumentPart.java:461)\r\n    \tat org.apache.poi.POIXMLDocument.load(POIXMLDocument.java:162)\r\n    \tat org.apache.poi.xssf.usermodel.XSSFWorkbook.&lt;init&gt;(XSSFWorkbook.java:271)\r\n    \tat excelreader.readExcelFile(excelreader.java:28)\r\n    \tat excelreader.main(excelreader.java:18)\r\n    \tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)","title":"Java Apache POI","body":"<p>I'm working on reading data from an excel document that gets updated on a bi-weekly basis with around 50,000 rows of data, and will probably reach about 120,000 before beginning a new sheet. I am using Apache POI to get the data. I get this exception below, but I believe the most important one exception is\nCaused by: java.lang.OutOfMemoryError: Java heap space. I've tested my code on a different excel sheet with less data and was able to read the data.</p>\n\n<p>If you have any methods or suggestions on how to read a large excel document please share.</p>\n\n<pre><code>org.apache.poi.POIXMLException: java.lang.reflect.InvocationTargetException\n    at org.apache.poi.xssf.usermodel.XSSFFactory.createDocumentPart(XSSFFactory.java:62)\n    at org.apache.poi.POIXMLDocumentPart.read(POIXMLDocumentPart.java:456)\n    at org.apache.poi.POIXMLDocumentPart.read(POIXMLDocumentPart.java:461)\n    at org.apache.poi.POIXMLDocumentPart.read(POIXMLDocumentPart.java:461)\n    at org.apache.poi.POIXMLDocumentPart.read(POIXMLDocumentPart.java:461)\n    at org.apache.poi.POIXMLDocument.load(POIXMLDocument.java:162)\n    at org.apache.poi.xssf.usermodel.XSSFWorkbook.&lt;init&gt;(XSSFWorkbook.java:271)\n    at excelreader.readExcelFile(excelreader.java:28)\n    at excelreader.main(excelreader.java:18)\n    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\n    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n    at java.lang.reflect.Method.invoke(Method.java:497)\n    at com.intellij.rt.execution.application.AppMain.main(AppMain.java:140)\nCaused by: java.lang.reflect.InvocationTargetException\n    at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)\n    at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:62)\n    at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45)\n    at java.lang.reflect.Constructor.newInstance(Constructor.java:422)\n    at org.apache.poi.xssf.usermodel.XSSFFactory.createDocumentPart(XSSFFactory.java:60)\n    ... 13 more\nCaused by: java.lang.OutOfMemoryError: Java heap space\n    at org.apache.xmlbeans.impl.store.Cur.createElementXobj(Cur.java:260)\n    at org.apache.xmlbeans.impl.store.Cur$CurLoadContext.startElement(Cur.java:2995)\n    at org.apache.xmlbeans.impl.store.Locale$SaxHandler.startElement(Locale.java:3207)\n    at org.apache.xmlbeans.impl.piccolo.xml.Piccolo.reportStartTag(Piccolo.java:1082)\n    at org.apache.xmlbeans.impl.piccolo.xml.PiccoloLexer.parseAttributesNS(PiccoloLexer.java:1822)\n    at org.apache.xmlbeans.impl.piccolo.xml.PiccoloLexer.parseOpenTagNS(PiccoloLexer.java:1521)\n    at org.apache.xmlbeans.impl.piccolo.xml.PiccoloLexer.parseTagNS(PiccoloLexer.java:1362)\n    at org.apache.xmlbeans.impl.piccolo.xml.PiccoloLexer.yylex(PiccoloLexer.java:4678)\n    at org.apache.xmlbeans.impl.piccolo.xml.Piccolo.yylex(Piccolo.java:1290)\n    at org.apache.xmlbeans.impl.piccolo.xml.Piccolo.yyparse(Piccolo.java:1400)\n    at org.apache.xmlbeans.impl.piccolo.xml.Piccolo.parse(Piccolo.java:714)\n    at org.apache.xmlbeans.impl.store.Locale$SaxLoader.load(Locale.java:3454)\n    at org.apache.xmlbeans.impl.store.Locale.parseToXmlObject(Locale.java:1276)\n    at org.apache.xmlbeans.impl.store.Locale.parseToXmlObject(Locale.java:1263)\n    at org.apache.xmlbeans.impl.schema.SchemaTypeLoaderBase.parse(SchemaTypeLoaderBase.java:345)\n    at org.openxmlformats.schemas.spreadsheetml.x2006.main.CTPivotCacheRecords$Factory.parse(Unknown Source)\n    at org.apache.poi.xssf.usermodel.XSSFPivotCacheRecords.readFrom(XSSFPivotCacheRecords.java:62)\n    at org.apache.poi.xssf.usermodel.XSSFPivotCacheRecords.&lt;init&gt;(XSSFPivotCacheRecords.java:53)\n    at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)\n    at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:62)\n    at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45)\n    at java.lang.reflect.Constructor.newInstance(Constructor.java:422)\n    at org.apache.poi.xssf.usermodel.XSSFFactory.createDocumentPart(XSSFFactory.java:60)\n    at org.apache.poi.POIXMLDocumentPart.read(POIXMLDocumentPart.java:456)\n    at org.apache.poi.POIXMLDocumentPart.read(POIXMLDocumentPart.java:461)\n    at org.apache.poi.POIXMLDocumentPart.read(POIXMLDocumentPart.java:461)\n    at org.apache.poi.POIXMLDocumentPart.read(POIXMLDocumentPart.java:461)\n    at org.apache.poi.POIXMLDocument.load(POIXMLDocument.java:162)\n    at org.apache.poi.xssf.usermodel.XSSFWorkbook.&lt;init&gt;(XSSFWorkbook.java:271)\n    at excelreader.readExcelFile(excelreader.java:28)\n    at excelreader.main(excelreader.java:18)\n    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n</code></pre>\n"},{"tags":["java","out-of-memory","heap-memory","hprof"],"answers":[{"tags":[],"owner":{"account_id":215223,"reputation":2949,"user_id":469718,"accept_rate":12,"display_name":"kisna"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1457570610,"creation_date":1457570610,"answer_id":35905533,"question_id":32618853,"body_markdown":"That sounds way too small, are you sure your out of memory is not due to PermGen Space OOM? Generated dump files can be small when you manually generate them much later after the OOM happened but that is not the case with you.","title":"hprof (heap dump size) considerably smaller than heap allocated","body":"<p>That sounds way too small, are you sure your out of memory is not due to PermGen Space OOM? Generated dump files can be small when you manually generate them much later after the OOM happened but that is not the case with you.</p>\n"},{"tags":[],"owner":{"account_id":52873,"reputation":2689,"user_id":158037,"display_name":"user158037"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1606473383,"creation_date":1543917957,"answer_id":53610386,"question_id":32618853,"body_markdown":"Just in case someone ends up here looking for:\r\n\r\n&gt; java.lang.OutOfMemoryError: Java heap space\r\n\r\nLike I did: using `XX:+HeapDumpOnOutOfMemoryError` is important. I had code that accidentally created infinite loop and using `jmap -heap` *after* error showed nothing wrong, no leaks and actually low heap usage. On the other hand heapdump automatically done on OOM was large and clearly showed (in MAT) what went wrong.","title":"hprof (heap dump size) considerably smaller than heap allocated","body":"<p>Just in case someone ends up here looking for:</p>\n<blockquote>\n<p>java.lang.OutOfMemoryError: Java heap space</p>\n</blockquote>\n<p>Like I did: using <code>XX:+HeapDumpOnOutOfMemoryError</code> is important. I had code that accidentally created infinite loop and using <code>jmap -heap</code> <em>after</em> error showed nothing wrong, no leaks and actually low heap usage. On the other hand heapdump automatically done on OOM was large and clearly showed (in MAT) what went wrong.</p>\n"}],"owner":{"account_id":399526,"reputation":1542,"user_id":764934,"accept_rate":27,"display_name":"hareendra reddy"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":1951,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":2,"score":2,"last_activity_date":1635426837,"creation_date":1442438084,"question_id":32618853,"body_markdown":"I have been analyzing java.lang.OutOfMemoryError: Java heap space for our service and trying to dig the heap dumps via Eclipse MAT tool.\r\n\r\nOur service is running with 8G heap and the generated heap dump is of size only 500 MB.\r\n\r\nHere are the JVM CommandLine flags: -XX:-DoEscapeAnalysis -XX:+HeapDumpOnOutOfMemoryError -XX:HeapDumpPath=/var/tmp -XX:InitialHeapSize=8589934592 -XX:MaxGCPauseMillis=10 -XX:MaxHeapSize=8589934592 -XX:NewSize=4294967296 -XX:OnOutOfMemoryError=/bin/kill -9 %p -XX:+PrintClassHistogram -XX:-PrintCommandLineFlags -XX:+PrintGC -XX:+PrintGCDetails -XX:+PrintGCTimeStamps -XX:+PrintTenuringDistribution -XX:SurvivorRatio=8 -XX:+UseCompressedClassPointers -XX:+UseCompressedOops -XX:+UseG1GC\r\n\r\nHeap dump size: -rw------- 1 taxadm amazon 557201181 Sep 16 15:10 java_pid4026.hprof\r\n\r\nIs this correct heap dump ? Because it is highly unlikely that our service is trying to allocate 7.5 GB array ?\r\n\r\n\r\nThanks for your help","title":"hprof (heap dump size) considerably smaller than heap allocated","body":"<p>I have been analyzing java.lang.OutOfMemoryError: Java heap space for our service and trying to dig the heap dumps via Eclipse MAT tool.</p>\n\n<p>Our service is running with 8G heap and the generated heap dump is of size only 500 MB.</p>\n\n<p>Here are the JVM CommandLine flags: -XX:-DoEscapeAnalysis -XX:+HeapDumpOnOutOfMemoryError -XX:HeapDumpPath=/var/tmp -XX:InitialHeapSize=8589934592 -XX:MaxGCPauseMillis=10 -XX:MaxHeapSize=8589934592 -XX:NewSize=4294967296 -XX:OnOutOfMemoryError=/bin/kill -9 %p -XX:+PrintClassHistogram -XX:-PrintCommandLineFlags -XX:+PrintGC -XX:+PrintGCDetails -XX:+PrintGCTimeStamps -XX:+PrintTenuringDistribution -XX:SurvivorRatio=8 -XX:+UseCompressedClassPointers -XX:+UseCompressedOops -XX:+UseG1GC</p>\n\n<p>Heap dump size: -rw------- 1 taxadm amazon 557201181 Sep 16 15:10 java_pid4026.hprof</p>\n\n<p>Is this correct heap dump ? Because it is highly unlikely that our service is trying to allocate 7.5 GB array ?</p>\n\n<p>Thanks for your help</p>\n"},{"tags":["java","string","char","out-of-memory","heap-memory"],"comments":[{"owner":{"account_id":2163634,"reputation":1349,"user_id":1917215,"accept_rate":75,"display_name":"user1231232141214124"},"score":0,"creation_date":1445356400,"post_id":33241112,"comment_id":54285061,"body_markdown":"what are the size (in KB) of the flat files?","body":"what are the size (in KB) of the flat files?"},{"owner":{"account_id":1000314,"reputation":12261,"user_id":1015327,"display_name":"JimmyB"},"score":1,"creation_date":1445356533,"post_id":33241112,"comment_id":54285146,"body_markdown":"Are you talking about 400k *lines* of csv? If you do, and each line becomes about 10 strings inside a &quot;pedido&quot;, then 5 million string instances seems pretty reasonable.","body":"Are you talking about 400k <i>lines</i> of csv? If you do, and each line becomes about 10 strings inside a &quot;pedido&quot;, then 5 million string instances seems pretty reasonable."},{"owner":{"account_id":1000314,"reputation":12261,"user_id":1015327,"display_name":"JimmyB"},"score":0,"creation_date":1445356544,"post_id":33241112,"comment_id":54285153,"body_markdown":"By the way, which Java version are you using? [pre 7u6 appears to have an issue with substring](http://stackoverflow.com/questions/14161050/java-string-substring-method-potential-memory-leak).","body":"By the way, which Java version are you using? <a href=\"http://stackoverflow.com/questions/14161050/java-string-substring-method-potential-memory-leak\">pre 7u6 appears to have an issue with substring</a>."},{"owner":{"account_id":482279,"reputation":7803,"user_id":896588,"accept_rate":85,"display_name":"Andr&#233; Stannek"},"score":0,"creation_date":1445356579,"post_id":33241112,"comment_id":54285175,"body_markdown":"You create an object that contains 14 strings for each line and keep it in a list. The list and every object in it isn&#39;t garbage collected. Your needed heap size will be roughly the size of the csv plus some overhead.","body":"You create an object that contains 14 strings for each line and keep it in a list. The list and every object in it isn&#39;t garbage collected. Your needed heap size will be roughly the size of the csv plus some overhead."},{"owner":{"account_id":5583733,"reputation":189,"user_id":4424848,"accept_rate":8,"display_name":"Vinicius Martin"},"score":0,"creation_date":1445356604,"post_id":33241112,"comment_id":54285192,"body_markdown":"42000kbs to each file","body":"42000kbs to each file"},{"owner":{"account_id":1000314,"reputation":12261,"user_id":1015327,"display_name":"JimmyB"},"score":0,"creation_date":1445356820,"post_id":33241112,"comment_id":54285325,"body_markdown":"`// I create this global because I didnt want to create a new String everytime` -- Doesn&#39;t work this way. `Linha = Lendo.readLine();` creates a new string and *assigns* it to the global variable. Nothing can be gained here. Same for `Campo = newLinha.split(&quot;,&quot;);`: `split` creates a new array each time. No way to avoid that.","body":"<code>&#47;&#47; I create this global because I didnt want to create a new String everytime</code> -- Doesn&#39;t work this way. <code>Linha = Lendo.readLine();</code> creates a new string and <i>assigns</i> it to the global variable. Nothing can be gained here. Same for <code>Campo = newLinha.split(&quot;,&quot;);</code>: <code>split</code> creates a new array each time. No way to avoid that."},{"owner":{"account_id":5583733,"reputation":189,"user_id":4424848,"accept_rate":8,"display_name":"Vinicius Martin"},"score":0,"creation_date":1445356855,"post_id":33241112,"comment_id":54285352,"body_markdown":"java version 1.8.0_40","body":"java version 1.8.0_40"},{"owner":{"account_id":5583733,"reputation":189,"user_id":4424848,"accept_rate":8,"display_name":"Vinicius Martin"},"score":0,"creation_date":1445357156,"post_id":33241112,"comment_id":54285545,"body_markdown":"@HannoBinder In my head, set as null the Campo everytime, will not erase the old split ?","body":"@HannoBinder In my head, set as null the Campo everytime, will not erase the old split ?"},{"owner":{"account_id":5583733,"reputation":189,"user_id":4424848,"accept_rate":8,"display_name":"Vinicius Martin"},"score":0,"creation_date":1445357306,"post_id":33241112,"comment_id":54285625,"body_markdown":"@HannoBinder , in the image I have the object size ( the old splits and strings ), after the moment I put everything on the object and set as null all the variables, shouldnt the char[] and String memory clear ?","body":"@HannoBinder , in the image I have the object size ( the old splits and strings ), after the moment I put everything on the object and set as null all the variables, shouldnt the char[] and String memory clear ?"},{"owner":{"account_id":1000314,"reputation":12261,"user_id":1015327,"display_name":"JimmyB"},"score":0,"creation_date":1445357338,"post_id":33241112,"comment_id":54285647,"body_markdown":"`Campo = newLinha.split(&quot;,&quot;);` will just aswell release the reference to the old `Campo`. If you don&#39;t need big amounts of memory between `Campo = null` and `Campo = xyz;` then there&#39;s no difference.","body":"<code>Campo = newLinha.split(&quot;,&quot;);</code> will just aswell release the reference to the old <code>Campo</code>. If you don&#39;t need big amounts of memory between <code>Campo = null</code> and <code>Campo = xyz;</code> then there&#39;s no difference."},{"owner":{"account_id":482279,"reputation":7803,"user_id":896588,"accept_rate":85,"display_name":"Andr&#233; Stannek"},"score":1,"creation_date":1445357393,"post_id":33241112,"comment_id":54285680,"body_markdown":"@ViniciusMartin you set `Campo = null` but before you add strings from that array to `pedido`. Those references are kept.","body":"@ViniciusMartin you set <code>Campo = null</code> but before you add strings from that array to <code>pedido</code>. Those references are kept."},{"owner":{"account_id":5583733,"reputation":189,"user_id":4424848,"accept_rate":8,"display_name":"Vinicius Martin"},"score":0,"creation_date":1445357633,"post_id":33241112,"comment_id":54285836,"body_markdown":"@Andr&#233;Stannek   So in the image, when I see that the char[] has 5 million instances and the object Pedido has 345k . This 345k * 20  ( Campo[x] can go until 20 ) memory, is inside both Pedido and Char[] ?","body":"@Andr&#233;Stannek   So in the image, when I see that the char[] has 5 million instances and the object Pedido has 345k . This 345k * 20  ( Campo[x] can go until 20 ) memory, is inside both Pedido and Char[] ?"},{"owner":{"account_id":1000314,"reputation":12261,"user_id":1015327,"display_name":"JimmyB"},"score":0,"creation_date":1445357795,"post_id":33241112,"comment_id":54285939,"body_markdown":"@ViniciusMartin Every string holds a `char[]` internally, so you&#39;d expect at least as many `char[]` instances as you have strings.","body":"@ViniciusMartin Every string holds a <code>char[]</code> internally, so you&#39;d expect at least as many <code>char[]</code> instances as you have strings."},{"owner":{"account_id":2163634,"reputation":1349,"user_id":1917215,"accept_rate":75,"display_name":"user1231232141214124"},"score":0,"creation_date":1445357834,"post_id":33241112,"comment_id":54285959,"body_markdown":"don&#39;t capitalize variable names, it makes things confusing and goes against best practices","body":"don&#39;t capitalize variable names, it makes things confusing and goes against best practices"},{"owner":{"account_id":482279,"reputation":7803,"user_id":896588,"accept_rate":85,"display_name":"Andr&#233; Stannek"},"score":0,"creation_date":1445357914,"post_id":33241112,"comment_id":54286002,"body_markdown":"I see you setting 14 to 15 strings to each pedido object. `15*345770=5186550` so this sounds plausible.","body":"I see you setting 14 to 15 strings to each pedido object. <code>15*345770=5186550</code> so this sounds plausible."},{"owner":{"account_id":5583733,"reputation":189,"user_id":4424848,"accept_rate":8,"display_name":"Vinicius Martin"},"score":0,"creation_date":1445358020,"post_id":33241112,"comment_id":54286055,"body_markdown":"@HannoBinder so no way to clear this memory used just to send the String from the csv to the objects ? :(","body":"@HannoBinder so no way to clear this memory used just to send the String from the csv to the objects ? :("},{"owner":{"account_id":1000314,"reputation":12261,"user_id":1015327,"display_name":"JimmyB"},"score":1,"creation_date":1445358068,"post_id":33241112,"comment_id":54286086,"body_markdown":"@Andr&#233;Stannek Two of those strings become floats, so it&#39;s rather 12-13 strings, but still very plausible.","body":"@Andr&#233;Stannek Two of those strings become floats, so it&#39;s rather 12-13 strings, but still very plausible."},{"owner":{"account_id":482279,"reputation":7803,"user_id":896588,"accept_rate":85,"display_name":"Andr&#233; Stannek"},"score":0,"creation_date":1445358195,"post_id":33241112,"comment_id":54286172,"body_markdown":"@HannoBinder oh, did miss that. Even more plausible since that number is lower than the total number of strings.","body":"@HannoBinder oh, did miss that. Even more plausible since that number is lower than the total number of strings."},{"owner":{"account_id":1000314,"reputation":12261,"user_id":1015327,"display_name":"JimmyB"},"score":0,"creation_date":1445358238,"post_id":33241112,"comment_id":54286199,"body_markdown":"@ViniciusMartin No, probably not. But that&#39;s actually good news: You don&#39;t have to care about releasing any memory or object references. We verified that memory management and GC do what they&#39;re supposed to do and you can focus more on your algorithm.","body":"@ViniciusMartin No, probably not. But that&#39;s actually good news: You don&#39;t have to care about releasing any memory or object references. We verified that memory management and GC do what they&#39;re supposed to do and you can focus more on your algorithm."},{"owner":{"account_id":1000314,"reputation":12261,"user_id":1015327,"display_name":"JimmyB"},"score":2,"creation_date":1445358521,"post_id":33241112,"comment_id":54286368,"body_markdown":"If you cannot/don&#39;t want to spend that much memory, you should think about how many &quot;pedidos&quot; you need at the same time. Maybe you can read+process one after the other instead of reading 400k objects and then processing all of them in one go.","body":"If you cannot/don&#39;t want to spend that much memory, you should think about how many &quot;pedidos&quot; you need at the same time. Maybe you can read+process one after the other instead of reading 400k objects and then processing all of them in one go."},{"owner":{"account_id":5583733,"reputation":189,"user_id":4424848,"accept_rate":8,"display_name":"Vinicius Martin"},"score":0,"creation_date":1445358531,"post_id":33241112,"comment_id":54286372,"body_markdown":"@HannoBinder got it. Thank you so much all this help, I will increase the memory to run the project.  :)","body":"@HannoBinder got it. Thank you so much all this help, I will increase the memory to run the project.  :)"},{"owner":{"account_id":5583733,"reputation":189,"user_id":4424848,"accept_rate":8,"display_name":"Vinicius Martin"},"score":0,"creation_date":1445358586,"post_id":33241112,"comment_id":54286411,"body_markdown":"@HannoBinder Yes, I will find a way to use each pedido object just the time I really need each one.","body":"@HannoBinder Yes, I will find a way to use each pedido object just the time I really need each one."}],"answers":[{"tags":[],"owner":{"account_id":1202323,"reputation":12075,"user_id":1172714,"display_name":"dsh"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1445359459,"creation_date":1445359459,"answer_id":33242228,"question_id":33241112,"body_markdown":"As is being discussed in the comments already, the main factor is your program places everything in memory at the same time.  That design will inherently limit the size of the files you can process.\r\n\r\nThe way garbage collection works is that only garbage is collected.  Any object that is referenced by another is not garbage.  So, starting with the &quot;root&quot; objects (anything declared as static or local variables currently on the stack), follow the references.  Your `GerenciadorPedido` instance is surely referenced from `main()`.  It references a list `listaPedidos`.  That list references (many) instances of `Pedido` each of which references many String instances.  Those objects will all remain in memory while they are reachable through the list.\r\n\r\nThe way to design your program so it doesn&#39;t have a limit on the size of the file it can process is to eliminate the list entirely.  Don&#39;t read the entire file and return a list (or other collection).  Instead implement an `Iterator`.  Read one line from the CSV file, create the `Pedido`, return it.  When the program is finished with that one, then read the next line and create the next `Pedido`.  Then you will have only one of these objects in memory at any given time.\r\n\r\nSome additional notes regarding your current algorithm:\r\n\r\n  * every `String` object references a `char[]` internally that contains the characters\r\n\r\n  * `ArrayList` has very poor memory usage characteristics when adding to a large list.  Since it is backed by an array, in order to grow to add the new element, it must create an entirely new array larger than the current one then copy all of the references.  During the process it will use double the memory that it needs.  This also becomes increasingly slower the larger the list is.\r\n\r\n      * One solution is to tell the ArrayList how large you will need it to be so you can avoid resizing.  This is only applicable if you actually know how large you will need it to be.  If you need 100 elements:  `new ArrayList&lt;&gt;(100)`.\r\n\r\n      * Another solution is to use a different data structure.  A `LinkedList` is better for adding elements one at a time because it does not need to allocate and copy an entire array.\r\n\r\n  * Each call to `.replaceAll()` will create a new `char[]` for the new `String` object.  Since you then orphan the previous `String` object, it will get garbage collected.  Just be aware of this need for allocation.\r\n\r\n  * Each string concatenation (eg `newLinha + &quot; &quot;` or `Campo[9] + Campo[10]`) will create a new `StringBuilder` object, append the two strings, then create a new `String` object.  This, again, can have an impact when repeated for large amounts of data.\r\n\r\n  * You should, in general, never need to call `System.gc()`.  It is okay to call it, but the system will perform garbage collection whenever memory is needed.\r\n\r\nOne addtional note: your approach to parsing the CSV will fail when the data contains characters you aren&#39;t expecting.  In particular if any of the fields were to contain a comma.  I recommend using an existing CSV parsing library for a simple solution to correctly handling the entire definition of CSV.  (I have successful experience using [opencsv](http://opencsv.sourceforge.net/))\r\n","title":"Error : java.lang.OutOfMemoryError: Java heap space","body":"<p>As is being discussed in the comments already, the main factor is your program places everything in memory at the same time.  That design will inherently limit the size of the files you can process.</p>\n\n<p>The way garbage collection works is that only garbage is collected.  Any object that is referenced by another is not garbage.  So, starting with the \"root\" objects (anything declared as static or local variables currently on the stack), follow the references.  Your <code>GerenciadorPedido</code> instance is surely referenced from <code>main()</code>.  It references a list <code>listaPedidos</code>.  That list references (many) instances of <code>Pedido</code> each of which references many String instances.  Those objects will all remain in memory while they are reachable through the list.</p>\n\n<p>The way to design your program so it doesn't have a limit on the size of the file it can process is to eliminate the list entirely.  Don't read the entire file and return a list (or other collection).  Instead implement an <code>Iterator</code>.  Read one line from the CSV file, create the <code>Pedido</code>, return it.  When the program is finished with that one, then read the next line and create the next <code>Pedido</code>.  Then you will have only one of these objects in memory at any given time.</p>\n\n<p>Some additional notes regarding your current algorithm:</p>\n\n<ul>\n<li><p>every <code>String</code> object references a <code>char[]</code> internally that contains the characters</p></li>\n<li><p><code>ArrayList</code> has very poor memory usage characteristics when adding to a large list.  Since it is backed by an array, in order to grow to add the new element, it must create an entirely new array larger than the current one then copy all of the references.  During the process it will use double the memory that it needs.  This also becomes increasingly slower the larger the list is.</p>\n\n<ul>\n<li><p>One solution is to tell the ArrayList how large you will need it to be so you can avoid resizing.  This is only applicable if you actually know how large you will need it to be.  If you need 100 elements:  <code>new ArrayList&lt;&gt;(100)</code>.</p></li>\n<li><p>Another solution is to use a different data structure.  A <code>LinkedList</code> is better for adding elements one at a time because it does not need to allocate and copy an entire array.</p></li>\n</ul></li>\n<li><p>Each call to <code>.replaceAll()</code> will create a new <code>char[]</code> for the new <code>String</code> object.  Since you then orphan the previous <code>String</code> object, it will get garbage collected.  Just be aware of this need for allocation.</p></li>\n<li><p>Each string concatenation (eg <code>newLinha + \" \"</code> or <code>Campo[9] + Campo[10]</code>) will create a new <code>StringBuilder</code> object, append the two strings, then create a new <code>String</code> object.  This, again, can have an impact when repeated for large amounts of data.</p></li>\n<li><p>You should, in general, never need to call <code>System.gc()</code>.  It is okay to call it, but the system will perform garbage collection whenever memory is needed.</p></li>\n</ul>\n\n<p>One addtional note: your approach to parsing the CSV will fail when the data contains characters you aren't expecting.  In particular if any of the fields were to contain a comma.  I recommend using an existing CSV parsing library for a simple solution to correctly handling the entire definition of CSV.  (I have successful experience using <a href=\"http://opencsv.sourceforge.net/\" rel=\"nofollow\">opencsv</a>)</p>\n"}],"owner":{"account_id":5583733,"reputation":189,"user_id":4424848,"accept_rate":8,"display_name":"Vinicius Martin"},"comment_count":22,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2624,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1635426810,"creation_date":1445355999,"question_id":33241112,"body_markdown":"I had this &quot;java.lang.OutOfMemoryError: Java heap space &quot; and I read and understand that I can increase my memory using -Xmx1024m. But I think in my code I can change something to this error does not happen anymore. \r\n\r\nFirst, this is the image from VisualVM about my memory : \r\n\r\n![enter image description here][1]\r\n\r\nIn the image you can see that the object &quot;Pedidos&quot; is not so big and I have the another object &quot;Enderecos&quot; that have more and less the same size but is not complete because I have the error before the object is completed. \r\n\r\nThe point is : \r\n\r\n- I have 2 classes that search for a big csv file ( 400.000 values each ), I will show the code. I tried to use Garbage Collector, set variables as null, but is not working, can anyone help me please? Here is the Code from the class &quot;Pedidos&quot;, the class &quot;Enderecos&quot; is the same and my project is just calling this 2 classes. \r\n\r\n&lt;br/&gt;\r\n\r\n    // all Imports\r\n    import java.io.BufferedReader;\r\n    import java.io.File;\r\n    import java.io.FileNotFoundException;\r\n    import java.io.FileReader;\r\n    import java.io.IOException;\r\n    import java.io.Reader;\r\n    import java.util.ArrayList;\r\n    import javax.swing.JOptionPane;\r\n    import Objetos.Pedido;\r\n    \r\n    // CLASS\r\n    public class GerenciadorPedido{\r\n        // ArrayList I will add all the &quot;Pedidos&quot; Objects\r\n        ArrayList&lt;Pedido&gt; listaPedidos = new ArrayList&lt;Pedido&gt;();\r\n    \r\n        // Int that I need to use the values correctly\r\n        int helper;\r\n    \r\n        // I create this global because I didnt want to create a new String everytime the for is running (trying to use less memory)\r\n        String Campo[];\r\n        String Linha;\r\n        String newLinha;\r\n    \r\n        public ArrayList&lt;Pedido&gt; getListaPedidos() throws IOException {\r\n    \r\n    \r\n            // Here I change the &quot;\\&quot; and &quot;/&quot; to be accepted be the FILE (the csv address) \r\n            String Enderecotemp = System.getProperty(&quot;user.dir&quot;), Endereco = &quot;&quot;;\r\n            char a;\r\n            for (int i = 0; i &lt; Enderecotemp.length(); i++) {\r\n                a = Enderecotemp.charAt(i);\r\n                if (a == &#39;\\\\&#39;) a = &#39;/&#39;;\r\n                Endereco = Endereco + String.valueOf(a);\r\n            }\r\n            Endereco = Endereco + &quot;/Pedido.csv&quot;;\r\n    \r\n    \r\n            // Open the CSV File and the reader to read it\r\n            File NovoArquivo = new File(Endereco);\r\n            Reader FileLer = null;\r\n    \r\n            // Try to read the File\r\n            try\r\n            {\r\n                FileLer = new FileReader(NovoArquivo);\r\n            }\r\n    \r\n            catch(FileNotFoundException e) {\r\n                JOptionPane.showMessageDialog(null, &quot;Erro, fale com o Vini &lt;Arquivo de Pedido N&#227;o Encontrado&gt;&quot;);\r\n            }\r\n    \r\n            // Read the File\r\n            BufferedReader Lendo = new BufferedReader(FileLer);\r\n            try\r\n            {\r\n                // Do for each line of the csv\r\n                while (Lendo.ready()) {\r\n    \r\n                    // Read the line and replace the caracteres ( needed to funcionality works )\r\n                    Linha = Lendo.readLine();\r\n                    newLinha = Linha.replaceAll(&quot;\\&quot;&quot;, &quot;&quot;);\r\n                    newLinha = newLinha.replaceAll(&quot;,,&quot;, &quot;, , &quot;);\r\n                    newLinha = newLinha.replaceAll(&quot;,,&quot;, &quot;, , &quot;);\r\n                    newLinha = newLinha + &quot; &quot;;\r\n    \r\n                    // Create Campo[x] for each value between &quot;,&quot;\r\n                    Campo = newLinha.split(&quot;,&quot;);\r\n    \r\n                    // Object \r\n                    Pedido pedido = new Pedido();\r\n    \r\n                    helper = 0;\r\n    \r\n                    // Just to complete the object with the right values if the Campo.length have 15, 16, 17, 18 or 19 of size. \r\n                    switch (Campo.length) {\r\n                        case 15: pedido.setAddress1(Campo[9]);\r\n                            break;\r\n                        case 16: pedido.setAddress1(Campo[9] + Campo[10]);\r\n                            helper = 1;\r\n                            break;\r\n                        case 17: pedido.setAddress1(Campo[9] + Campo[10] + Campo[11]);\r\n                            helper = 2;\r\n                            break;\r\n                        case 18: pedido.setAddress1(Campo[9] + Campo[10] + Campo[11] + Campo[12]);\r\n                            helper = 3;\r\n                            break;\r\n                        case 19: pedido.setAddress1(Campo[9] + Campo[10] + Campo[11] + Campo[12] + Campo[13]);\r\n                            helper = 4;\r\n                            break;\r\n                    }\r\n    \r\n                    // Complete the Object\r\n                    pedido.setOrder(Campo[0]);\r\n                    pedido.setOrderValue(Float.parseFloat(Campo[1]));\r\n                    pedido.setOrderPv(Float.parseFloat(Campo[2]));\r\n                    pedido.setCombinedOrderFlag(Campo[3]);\r\n                    pedido.setCombineOrder(Campo[4]);\r\n                    pedido.setOrderType(Campo[5]);\r\n                    pedido.setOrderShipped(Campo[6]);\r\n                    pedido.setOrderCancelled(Campo[7]);\r\n                    pedido.setTransactionType(Campo[8]);\r\n                    pedido.setAddress2(Campo[10 + helper]);\r\n                    pedido.setAddress3(Campo[11 + helper]);\r\n                    pedido.setPost(Campo[12 + helper]);\r\n                    pedido.setCity(Campo[13 + helper]);\r\n                    pedido.setState(Campo[14 + helper]);\r\n    \r\n                    // Add the object in the ArrayList\r\n                    listaPedidos.add(pedido);\r\n    \r\n                    // Set everything to null to start again\r\n                    Campo = null;\r\n                    Linha = null;\r\n                    newLinha = null;\r\n                }\r\n            }\r\n    \r\n            catch(IOException e) {\r\n                // TODO Auto-generated catch block\r\n                e.printStackTrace();\r\n            }\r\n            finally\r\n            {\r\n                // Close the file and run garbage collector to try to clear the trash\r\n                Lendo.close();\r\n                FileLer.close();\r\n                System.gc();\r\n            }\r\n            // return the ArrayList.\r\n            return listaPedidos;\r\n        }\r\n    }\r\n\r\nThe project runs this class, but when the project try to run the another ( the same as this one, changing just names and the csv ), I have the memory Error. I don&#39;t know how can I clear this char[] and String that is to big as can you see on the image. Any new Ideas ? Is really impossible without increase the memory ?\r\n\r\n\r\n  [1]: http://i.stack.imgur.com/ofV2b.png\r\n","title":"Error : java.lang.OutOfMemoryError: Java heap space","body":"<p>I had this \"java.lang.OutOfMemoryError: Java heap space \" and I read and understand that I can increase my memory using -Xmx1024m. But I think in my code I can change something to this error does not happen anymore. </p>\n\n<p>First, this is the image from VisualVM about my memory : </p>\n\n<p><img src=\"https://i.stack.imgur.com/ofV2b.png\" alt=\"enter image description here\"></p>\n\n<p>In the image you can see that the object \"Pedidos\" is not so big and I have the another object \"Enderecos\" that have more and less the same size but is not complete because I have the error before the object is completed. </p>\n\n<p>The point is : </p>\n\n<ul>\n<li>I have 2 classes that search for a big csv file ( 400.000 values each ), I will show the code. I tried to use Garbage Collector, set variables as null, but is not working, can anyone help me please? Here is the Code from the class \"Pedidos\", the class \"Enderecos\" is the same and my project is just calling this 2 classes. </li>\n</ul>\n\n<p><br/></p>\n\n<pre><code>// all Imports\nimport java.io.BufferedReader;\nimport java.io.File;\nimport java.io.FileNotFoundException;\nimport java.io.FileReader;\nimport java.io.IOException;\nimport java.io.Reader;\nimport java.util.ArrayList;\nimport javax.swing.JOptionPane;\nimport Objetos.Pedido;\n\n// CLASS\npublic class GerenciadorPedido{\n    // ArrayList I will add all the \"Pedidos\" Objects\n    ArrayList&lt;Pedido&gt; listaPedidos = new ArrayList&lt;Pedido&gt;();\n\n    // Int that I need to use the values correctly\n    int helper;\n\n    // I create this global because I didnt want to create a new String everytime the for is running (trying to use less memory)\n    String Campo[];\n    String Linha;\n    String newLinha;\n\n    public ArrayList&lt;Pedido&gt; getListaPedidos() throws IOException {\n\n\n        // Here I change the \"\\\" and \"/\" to be accepted be the FILE (the csv address) \n        String Enderecotemp = System.getProperty(\"user.dir\"), Endereco = \"\";\n        char a;\n        for (int i = 0; i &lt; Enderecotemp.length(); i++) {\n            a = Enderecotemp.charAt(i);\n            if (a == '\\\\') a = '/';\n            Endereco = Endereco + String.valueOf(a);\n        }\n        Endereco = Endereco + \"/Pedido.csv\";\n\n\n        // Open the CSV File and the reader to read it\n        File NovoArquivo = new File(Endereco);\n        Reader FileLer = null;\n\n        // Try to read the File\n        try\n        {\n            FileLer = new FileReader(NovoArquivo);\n        }\n\n        catch(FileNotFoundException e) {\n            JOptionPane.showMessageDialog(null, \"Erro, fale com o Vini &lt;Arquivo de Pedido Não Encontrado&gt;\");\n        }\n\n        // Read the File\n        BufferedReader Lendo = new BufferedReader(FileLer);\n        try\n        {\n            // Do for each line of the csv\n            while (Lendo.ready()) {\n\n                // Read the line and replace the caracteres ( needed to funcionality works )\n                Linha = Lendo.readLine();\n                newLinha = Linha.replaceAll(\"\\\"\", \"\");\n                newLinha = newLinha.replaceAll(\",,\", \", , \");\n                newLinha = newLinha.replaceAll(\",,\", \", , \");\n                newLinha = newLinha + \" \";\n\n                // Create Campo[x] for each value between \",\"\n                Campo = newLinha.split(\",\");\n\n                // Object \n                Pedido pedido = new Pedido();\n\n                helper = 0;\n\n                // Just to complete the object with the right values if the Campo.length have 15, 16, 17, 18 or 19 of size. \n                switch (Campo.length) {\n                    case 15: pedido.setAddress1(Campo[9]);\n                        break;\n                    case 16: pedido.setAddress1(Campo[9] + Campo[10]);\n                        helper = 1;\n                        break;\n                    case 17: pedido.setAddress1(Campo[9] + Campo[10] + Campo[11]);\n                        helper = 2;\n                        break;\n                    case 18: pedido.setAddress1(Campo[9] + Campo[10] + Campo[11] + Campo[12]);\n                        helper = 3;\n                        break;\n                    case 19: pedido.setAddress1(Campo[9] + Campo[10] + Campo[11] + Campo[12] + Campo[13]);\n                        helper = 4;\n                        break;\n                }\n\n                // Complete the Object\n                pedido.setOrder(Campo[0]);\n                pedido.setOrderValue(Float.parseFloat(Campo[1]));\n                pedido.setOrderPv(Float.parseFloat(Campo[2]));\n                pedido.setCombinedOrderFlag(Campo[3]);\n                pedido.setCombineOrder(Campo[4]);\n                pedido.setOrderType(Campo[5]);\n                pedido.setOrderShipped(Campo[6]);\n                pedido.setOrderCancelled(Campo[7]);\n                pedido.setTransactionType(Campo[8]);\n                pedido.setAddress2(Campo[10 + helper]);\n                pedido.setAddress3(Campo[11 + helper]);\n                pedido.setPost(Campo[12 + helper]);\n                pedido.setCity(Campo[13 + helper]);\n                pedido.setState(Campo[14 + helper]);\n\n                // Add the object in the ArrayList\n                listaPedidos.add(pedido);\n\n                // Set everything to null to start again\n                Campo = null;\n                Linha = null;\n                newLinha = null;\n            }\n        }\n\n        catch(IOException e) {\n            // TODO Auto-generated catch block\n            e.printStackTrace();\n        }\n        finally\n        {\n            // Close the file and run garbage collector to try to clear the trash\n            Lendo.close();\n            FileLer.close();\n            System.gc();\n        }\n        // return the ArrayList.\n        return listaPedidos;\n    }\n}\n</code></pre>\n\n<p>The project runs this class, but when the project try to run the another ( the same as this one, changing just names and the csv ), I have the memory Error. I don't know how can I clear this char[] and String that is to big as can you see on the image. Any new Ideas ? Is really impossible without increase the memory ?</p>\n"},{"tags":["java","memory-management","out-of-memory","heap-memory"],"comments":[{"owner":{"account_id":4993107,"reputation":874,"user_id":4014665,"display_name":"Riaz"},"score":0,"creation_date":1454555725,"post_id":35191493,"comment_id":58100732,"body_markdown":"What JVM are you using, what&#39;s your command line for running the application, and what is taking up your memory? Notice it tried garbage collecting earlier when it reached that 30MB point, so possible you have 30MB configured for your Young Generation space, and you&#39;re eating up memory with existing objects (in the Old Generation space).","body":"What JVM are you using, what&#39;s your command line for running the application, and what is taking up your memory? Notice it tried garbage collecting earlier when it reached that 30MB point, so possible you have 30MB configured for your Young Generation space, and you&#39;re eating up memory with existing objects (in the Old Generation space)."},{"owner":{"account_id":6002011,"reputation":2225,"user_id":4714970,"accept_rate":53,"display_name":"Aequitas"},"score":0,"creation_date":1454556010,"post_id":35191493,"comment_id":58100785,"body_markdown":"how would I configure my &quot;young generation&quot; space?","body":"how would I configure my &quot;young generation&quot; space?"},{"owner":{"account_id":4993107,"reputation":874,"user_id":4014665,"display_name":"Riaz"},"score":0,"creation_date":1454556653,"post_id":35191493,"comment_id":58100954,"body_markdown":"If you&#39;re using the Oracle JVM, see [this page](http://docs.oracle.com/javase/8/docs/technotes/guides/vm/gctuning/index.html) for tuning parameters. Look under &quot;Sizing the Generations&quot;.","body":"If you&#39;re using the Oracle JVM, see <a href=\"http://docs.oracle.com/javase/8/docs/technotes/guides/vm/gctuning/index.html\" rel=\"nofollow noreferrer\">this page</a> for tuning parameters. Look under &quot;Sizing the Generations&quot;."},{"owner":{"account_id":2803497,"reputation":25202,"user_id":2411243,"display_name":"Zabuzard"},"score":0,"creation_date":1635426988,"post_id":35191493,"comment_id":123299348,"body_markdown":"What if the last element it tries to allocate would actually need more than 30 MB. I doubt you would see it actually claim memory then, it would probably see that it doesnt have enough memory to claim and then crash before actually claiming the rest. I am not expert on this topic though.","body":"What if the last element it tries to allocate would actually need more than 30 MB. I doubt you would see it actually claim memory then, it would probably see that it doesnt have enough memory to claim and then crash before actually claiming the rest. I am not expert on this topic though."}],"owner":{"account_id":6002011,"reputation":2225,"user_id":4714970,"accept_rate":53,"display_name":"Aequitas"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":56,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":0,"score":2,"last_activity_date":1635426780,"creation_date":1454553408,"question_id":35191493,"body_markdown":"[![heap track][1]][1]\r\n\r\nHere&#39;s JVisualVM&#39;s heap monitor for my application. (yes I know I have a memory leak). \r\n\r\nI&#39;m wondering why it doesn&#39;t use that last 30mb before I get an out of memory exception.\r\n\r\n  [1]: http://i.stack.imgur.com/A8oGm.png","title":"Why does my application not use 100% of the available heap before crashing?","body":"<p><a href=\"https://i.stack.imgur.com/A8oGm.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/A8oGm.png\" alt=\"heap track\"></a></p>\n\n<p>Here's JVisualVM's heap monitor for my application. (yes I know I have a memory leak). </p>\n\n<p>I'm wondering why it doesn't use that last 30mb before I get an out of memory exception.</p>\n"},{"tags":["java","android","ios","xamarin","xamarin.forms"],"comments":[{"owner":{"account_id":1008,"reputation":87078,"user_id":1338,"accept_rate":74,"display_name":"Jason"},"score":0,"creation_date":1633555561,"post_id":69472842,"comment_id":122794272,"body_markdown":"https://learn.microsoft.com/en-us/xamarin/android/platform/binding-java-library/","body":"<a href=\"https://learn.microsoft.com/en-us/xamarin/android/platform/binding-java-library/\" rel=\"nofollow noreferrer\">learn.microsoft.com/en-us/xamarin/android/platform/&hellip;</a>"},{"owner":{"account_id":9551095,"reputation":839,"user_id":7095217,"accept_rate":56,"display_name":"ivbtar"},"score":0,"creation_date":1633556025,"post_id":69472842,"comment_id":122794414,"body_markdown":"Thanks Jason. Is it also use it for IOS ?","body":"Thanks Jason. Is it also use it for IOS ?"},{"owner":{"account_id":1008,"reputation":87078,"user_id":1338,"accept_rate":74,"display_name":"Jason"},"score":0,"creation_date":1633556200,"post_id":69472842,"comment_id":122794461,"body_markdown":"No, you cannot run Java code in iOS","body":"No, you cannot run Java code in iOS"},{"owner":{"account_id":22014173,"reputation":875,"user_id":16283948,"display_name":"Andrew H"},"score":0,"creation_date":1633556577,"post_id":69472842,"comment_id":122794550,"body_markdown":"If you meant to ask if you could also use Swift/Obj-C code for iOS, the answer is [also yes](https://learn.microsoft.com/en-us/xamarin/ios/platform/binding-swift/).","body":"If you meant to ask if you could also use Swift/Obj-C code for iOS, the answer is <a href=\"https://learn.microsoft.com/en-us/xamarin/ios/platform/binding-swift/\" rel=\"nofollow noreferrer\">also yes</a>."}],"answers":[{"tags":[],"owner":{"account_id":21649083,"reputation":7694,"user_id":15969981,"display_name":"SwethaKandikonda"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1635426698,"creation_date":1635426698,"answer_id":69754713,"question_id":69472842,"body_markdown":"Thank you @Jason and @Andrew H for your suggestions, Based on the discussion in comment section we understood issue got resolved so we are converting the above comments to Answer for this thread to help other community members.\r\n\r\nA Bindings Library is a Java type wrapper assembly that contains Managed Callable Wrappers. Consider the following Java type, MyClass, which we&#39;d want to encapsulate in a Bindings Library:\r\n```\r\npackage com.xamarin.mycode;\r\n\r\npublic class MyClass\r\n{\r\n    public String myMethod (int i) { ... }\r\n}\r\n```\r\n\r\nwhile for IOS, this isn&#39;t possible. Instead, we can use swift libraries for binding.\r\n\r\n**REFERENCES:**\r\n1. [Binding a Java Library - Xamarin | Microsoft Docs](https://learn.microsoft.com/en-us/xamarin/android/platform/binding-java-library/)\r\n2. [Bind iOS Swift libraries - Xamarin | Microsoft Docs](https://learn.microsoft.com/en-us/xamarin/ios/platform/binding-swift/)","title":"How to use java code in Xamarin Forms to do specific job","body":"<p>Thank you @Jason and @Andrew H for your suggestions, Based on the discussion in comment section we understood issue got resolved so we are converting the above comments to Answer for this thread to help other community members.</p>\n<p>A Bindings Library is a Java type wrapper assembly that contains Managed Callable Wrappers. Consider the following Java type, MyClass, which we'd want to encapsulate in a Bindings Library:</p>\n<pre><code>package com.xamarin.mycode;\n\npublic class MyClass\n{\n    public String myMethod (int i) { ... }\n}\n</code></pre>\n<p>while for IOS, this isn't possible. Instead, we can use swift libraries for binding.</p>\n<p><strong>REFERENCES:</strong></p>\n<ol>\n<li><a href=\"https://learn.microsoft.com/en-us/xamarin/android/platform/binding-java-library/\" rel=\"nofollow noreferrer\">Binding a Java Library - Xamarin | Microsoft Docs</a></li>\n<li><a href=\"https://learn.microsoft.com/en-us/xamarin/ios/platform/binding-swift/\" rel=\"nofollow noreferrer\">Bind iOS Swift libraries - Xamarin | Microsoft Docs</a></li>\n</ol>\n"}],"owner":{"account_id":9551095,"reputation":839,"user_id":7095217,"accept_rate":56,"display_name":"ivbtar"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":244,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":1,"score":-1,"last_activity_date":1635426698,"creation_date":1633555472,"question_id":69472842,"body_markdown":"I have a problem in Xamarin Forms. I have to make ldap(s) connection to ldaps server. It will be secure ldap connection. I am able to make normal text based ldap connection in Xamarin Form. But i couldn&#39;t find a way to make secure ldap connection with using a CA certificate. It is also possible to make this connection in java easily. Is it possible to use a java executable that will get ldap user pass as argument, make ldaps connection and return authentication result to Xamarin Forms code in C#. It will run both in IOS and Android. I guess it should be possible from Java side as its slogan is write once and use everywhere.","title":"How to use java code in Xamarin Forms to do specific job","body":"<p>I have a problem in Xamarin Forms. I have to make ldap(s) connection to ldaps server. It will be secure ldap connection. I am able to make normal text based ldap connection in Xamarin Form. But i couldn't find a way to make secure ldap connection with using a CA certificate. It is also possible to make this connection in java easily. Is it possible to use a java executable that will get ldap user pass as argument, make ldaps connection and return authentication result to Xamarin Forms code in C#. It will run both in IOS and Android. I guess it should be possible from Java side as its slogan is write once and use everywhere.</p>\n"},{"tags":["java","regex"],"comments":[{"owner":{"account_id":4420608,"reputation":22121,"user_id":3600709,"accept_rate":73,"display_name":"ctwheels"},"score":2,"creation_date":1522939302,"post_id":49675123,"comment_id":86361179,"body_markdown":"Is this a JSON file?","body":"Is this a JSON file?"},{"owner":{"account_id":1428006,"reputation":762,"user_id":1514499,"accept_rate":93,"display_name":"user1514499"},"score":0,"creation_date":1522939329,"post_id":49675123,"comment_id":86361202,"body_markdown":"no. It is just a string.","body":"no. It is just a string."},{"owner":{"account_id":4420608,"reputation":22121,"user_id":3600709,"accept_rate":73,"display_name":"ctwheels"},"score":1,"creation_date":1522939375,"post_id":49675123,"comment_id":86361241,"body_markdown":"Ok then what about `\\bIsEmployee:&#39;([^&#39;]+)&#39;`?","body":"Ok then what about <code>\\bIsEmployee:&#39;([^&#39;]+)&#39;</code>?"},{"owner":{"account_id":60527,"reputation":20811,"user_id":180740,"display_name":"Philipp Reichart"},"score":1,"creation_date":1522940679,"post_id":49675123,"comment_id":86362297,"body_markdown":"What have you tried? Post some code/regex and explain what you it returns vs what you expect it to return.","body":"What have you tried? Post some code/regex and explain what you it returns vs what you expect it to return."}],"answers":[{"tags":[],"owner":{"account_id":8742208,"reputation":57,"user_id":6538910,"display_name":"Adi"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1522941617,"creation_date":1522941617,"answer_id":49676022,"question_id":49675123,"body_markdown":"It seems JSON format, although as a string. Please use JSON parser for more flexibility to get any value by keys, or print all","title":"Java - Regex to get the value after a particular string","body":"<p>It seems JSON format, although as a string. Please use JSON parser for more flexibility to get any value by keys, or print all</p>\n"},{"tags":[],"owner":{"account_id":4246842,"reputation":1327,"user_id":3475249,"display_name":"drkunibar"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1522942814,"creation_date":1522942814,"answer_id":49676385,"question_id":49675123,"body_markdown":"Try this\r\n\r\n    import java.util.regex.Matcher;\r\n    import java.util.regex.Pattern;\r\n    \r\n    \r\n    public class RegexpApp {\r\n    \r\n        public static void main(String[] args){\r\n            String val = &quot;id:&#39;1234&#39;,Salary:&#39;200000&#39;,Year:&#39;2018&#39;,IsEmployee:&#39;Yes&#39;&quot;;\r\n            System.out.println(getValue(val, &quot;id&quot;));\r\n            System.out.println(getValue(val, &quot;Year&quot;));\r\n            System.out.println(getValue(val, &quot;IsEmployee&quot;));\r\n    \r\n        }\r\n    \r\n        public static String getValue(String testStr, String key){\r\n            Pattern p = Pattern.compile(&quot;\\\\b&quot;+key+&quot;[ ]*:[ ]*&#39;(.+?)&#39;&quot;);\r\n            Matcher m = p.matcher(testStr);\r\n            return  m.find() ? m.group(1): null;\r\n        }\r\n    }\r\n\r\n","title":"Java - Regex to get the value after a particular string","body":"<p>Try this</p>\n\n<pre><code>import java.util.regex.Matcher;\nimport java.util.regex.Pattern;\n\n\npublic class RegexpApp {\n\n    public static void main(String[] args){\n        String val = \"id:'1234',Salary:'200000',Year:'2018',IsEmployee:'Yes'\";\n        System.out.println(getValue(val, \"id\"));\n        System.out.println(getValue(val, \"Year\"));\n        System.out.println(getValue(val, \"IsEmployee\"));\n\n    }\n\n    public static String getValue(String testStr, String key){\n        Pattern p = Pattern.compile(\"\\\\b\"+key+\"[ ]*:[ ]*'(.+?)'\");\n        Matcher m = p.matcher(testStr);\n        return  m.find() ? m.group(1): null;\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":6946971,"reputation":10284,"user_id":5331061,"accept_rate":75,"display_name":"Gurmanjot Singh"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1522983858,"creation_date":1522983858,"answer_id":49684624,"question_id":49675123,"body_markdown":"You can use the following regex:\r\n\r\n    (?i)(?&lt;=isemployee:&#39;)[^&#39;]*\r\n\r\n[**Click for Demo**][1]\r\n\r\n**Explanation:**\r\n\r\n - `(?i)` - makes the regex case-insensitive\r\n - `(?&lt;=isemployee:&#39;)` - positive lookbehind to find the **position** which is just preceded by `isemployee:&#39;`\r\n - `[^&#39;]*` - matches 0+ occurrences of any character that is not a `&#39;`. In short, it matches everything until the next `&#39;` is found in the string\r\n\r\n**Code: [OUTPUT](http://rextester.com/VMZAI24136)**\r\n\r\n    import java.util.*;\r\n    import java.lang.*;\r\n    import java.util.regex.Matcher;\r\n    import java.util.regex.Pattern;\r\n    \r\n    class Rextester\r\n    {  \r\n        public static void main(String args[])\r\n        {\r\n            final String regex = &quot;(?i)(?&lt;=isemployee:&#39;)[^&#39;]*&quot;;\r\n            final String string = &quot;id:&#39;1234&#39;,Salary:&#39;200000&#39;,Year:&#39;2018&#39;,IsEmployee:&#39;Yes&#39;&quot;;\r\n    \r\n            final Pattern pattern = Pattern.compile(regex);\r\n            final Matcher matcher = pattern.matcher(string);\r\n    \r\n            while (matcher.find()) {\r\n                System.out.println(&quot;Full match: &quot; + matcher.group(0));\r\n                for (int i = 1; i &lt;= matcher.groupCount(); i++) {\r\n                    System.out.println(&quot;Group &quot; + i + &quot;: &quot; + matcher.group(i));\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n\r\n  [1]: https://regex101.com/r/Nk4NlB/1/","title":"Java - Regex to get the value after a particular string","body":"<p>You can use the following regex:</p>\n\n<pre><code>(?i)(?&lt;=isemployee:')[^']*\n</code></pre>\n\n<p><a href=\"https://regex101.com/r/Nk4NlB/1/\" rel=\"nofollow noreferrer\"><strong>Click for Demo</strong></a></p>\n\n<p><strong>Explanation:</strong></p>\n\n<ul>\n<li><code>(?i)</code> - makes the regex case-insensitive</li>\n<li><code>(?&lt;=isemployee:')</code> - positive lookbehind to find the <strong>position</strong> which is just preceded by <code>isemployee:'</code></li>\n<li><code>[^']*</code> - matches 0+ occurrences of any character that is not a <code>'</code>. In short, it matches everything until the next <code>'</code> is found in the string</li>\n</ul>\n\n<p><strong>Code: <a href=\"http://rextester.com/VMZAI24136\" rel=\"nofollow noreferrer\">OUTPUT</a></strong></p>\n\n<pre><code>import java.util.*;\nimport java.lang.*;\nimport java.util.regex.Matcher;\nimport java.util.regex.Pattern;\n\nclass Rextester\n{  \n    public static void main(String args[])\n    {\n        final String regex = \"(?i)(?&lt;=isemployee:')[^']*\";\n        final String string = \"id:'1234',Salary:'200000',Year:'2018',IsEmployee:'Yes'\";\n\n        final Pattern pattern = Pattern.compile(regex);\n        final Matcher matcher = pattern.matcher(string);\n\n        while (matcher.find()) {\n            System.out.println(\"Full match: \" + matcher.group(0));\n            for (int i = 1; i &lt;= matcher.groupCount(); i++) {\n                System.out.println(\"Group \" + i + \": \" + matcher.group(i));\n            }\n        }\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":1428006,"reputation":762,"user_id":1514499,"accept_rate":93,"display_name":"user1514499"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1399,"favorite_count":0,"down_vote_count":3,"up_vote_count":1,"answer_count":3,"score":-2,"last_activity_date":1635426567,"creation_date":1522939224,"question_id":49675123,"body_markdown":"I am trying to get the value between quotes for a particular string  \r\nFor example, for the &#39;IsEmployee&#39; key, I need to get the value &#39;Yes&#39; \r\n\r\nid:&#39;1234&#39;,Salary:&#39;200000&#39;,Year:&#39;2018&#39;,IsEmployee:&#39;Yes&#39;  \r\ncan anyone please share any sample regex for this","title":"Java - Regex to get the value after a particular string","body":"<p>I am trying to get the value between quotes for a particular string<br />\nFor example, for the 'IsEmployee' key, I need to get the value 'Yes'</p>\n<p>id:'1234',Salary:'200000',Year:'2018',IsEmployee:'Yes'<br />\ncan anyone please share any sample regex for this</p>\n"},{"tags":["java","android","xml"],"comments":[{"owner":{"account_id":11834347,"reputation":12390,"user_id":9636037,"display_name":"Abhimanyu"},"score":0,"creation_date":1635426695,"post_id":69754657,"comment_id":123299189,"body_markdown":"Is this what you are looking for? [Picture-in-picture](https://developer.android.com/guide/topics/ui/picture-in-picture)","body":"Is this what you are looking for? <a href=\"https://developer.android.com/guide/topics/ui/picture-in-picture\" rel=\"nofollow noreferrer\">Picture-in-picture</a>"},{"owner":{"account_id":1642711,"reputation":19842,"user_id":1514861,"accept_rate":86,"display_name":"Ivo"},"score":0,"creation_date":1635426829,"post_id":69754657,"comment_id":123299265,"body_markdown":"I suggest you to simply google for something like &quot;android draw over other apps tutorial&quot;. There&#39;s dozens of websites that could help you out.","body":"I suggest you to simply google for something like &quot;android draw over other apps tutorial&quot;. There&#39;s dozens of websites that could help you out."},{"owner":{"account_id":12523296,"reputation":91,"user_id":9113976,"display_name":"Dimitris gs"},"score":0,"creation_date":1635436642,"post_id":69754657,"comment_id":123303971,"body_markdown":"I tried it but i dont think this is what i want.I want the user to be able to press buttons from my app(interact with the app) this got me thinking if its even possible.I basically want the user to be able to multitask something like having it on one half of the screen.","body":"I tried it but i dont think this is what i want.I want the user to be able to press buttons from my app(interact with the app) this got me thinking if its even possible.I basically want the user to be able to multitask something like having it on one half of the screen."}],"owner":{"account_id":12523296,"reputation":91,"user_id":9113976,"display_name":"Dimitris gs"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":56,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1635426422,"creation_date":1635426422,"question_id":69754657,"body_markdown":"As the title says I want to make my app to be shown in a small window(smaller version of it) and to be able to draw over other apps. I have no idea how and where to search about it.\r\nI would really appreciate it if someone could guide me on where to search about it.","title":"How can i make my app to draw over others and be shown in a small window?","body":"<p>As the title says I want to make my app to be shown in a small window(smaller version of it) and to be able to draw over other apps. I have no idea how and where to search about it.\nI would really appreciate it if someone could guide me on where to search about it.</p>\n"},{"tags":["java","maven","maven-surefire-plugin","java-13"],"comments":[{"owner":{"account_id":4555218,"reputation":32585,"user_id":3699139,"display_name":"Jorn Vernee"},"score":1,"creation_date":1586097364,"post_id":61044079,"comment_id":107994768,"body_markdown":"Seems similar to: https://stackoverflow.com/a/55311987","body":"Seems similar to: <a href=\"https://stackoverflow.com/a/55311987\">stackoverflow.com/a/55311987</a>"},{"owner":{"account_id":2453753,"reputation":2564,"user_id":2139422,"display_name":"Arthur Noseda"},"score":0,"creation_date":1679396337,"post_id":61044079,"comment_id":133710465,"body_markdown":"Isn&#39;t it strange that the version of surefire in pom.xml is 2.22.2 whereas the one in the log is 3.0.0-M4?","body":"Isn&#39;t it strange that the version of surefire in pom.xml is 2.22.2 whereas the one in the log is 3.0.0-M4?"}],"answers":[{"tags":[],"owner":{"account_id":15059438,"reputation":11,"user_id":10868726,"display_name":"Franco Sabino"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1635426100,"creation_date":1635426100,"answer_id":69754577,"question_id":61044079,"body_markdown":"I had a similar problem.\r\n\r\n - Maven Version: 3.8.1 \r\n - Surefire Version: 2.22.2\r\n - JK: 13\r\n\r\nI used `&lt;reuseForks&gt;true&lt;/reuseForks&gt;` and it worked fine.\r\n\r\n           &lt;plugin&gt;\r\n                &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n                &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\r\n                &lt;version&gt;${maven.compiler.plugin.version}&lt;/version&gt;\r\n                &lt;configuration&gt;\r\n                    &lt;release&gt;${java.version}&lt;/release&gt;\r\n                    &lt;showWarnings&gt;true&lt;/showWarnings&gt;\r\n                    &lt;compilerArgs&gt;\r\n                        &lt;compilerArg&gt;-Xlint:unchecked,deprecation&lt;/compilerArg&gt;\r\n                        &lt;compilerArg&gt;--enable-preview&lt;/compilerArg&gt;\r\n                    &lt;/compilerArgs&gt;\r\n                &lt;/configuration&gt;\r\n            &lt;/plugin&gt;\r\n            &lt;plugin&gt;\r\n                &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n                &lt;artifactId&gt;maven-surefire-plugin&lt;/artifactId&gt;\r\n                &lt;version&gt;${surefire.plugin.version}&lt;/version&gt;\r\n                &lt;configuration&gt;\r\n                    &lt;includes&gt;\r\n                        &lt;include&gt;**/*Test.java&lt;/include&gt;\r\n                    &lt;/includes&gt;\r\n                    &lt;reuseForks&gt;true&lt;/reuseForks&gt;\r\n                    &lt;argLine&gt;--enable-preview&lt;/argLine&gt;\r\n                &lt;/configuration&gt;\r\n            &lt;/plugin&gt;","title":"maven surefire plugin not using --enable-preview mode","body":"<p>I had a similar problem.</p>\n<ul>\n<li>Maven Version: 3.8.1</li>\n<li>Surefire Version: 2.22.2</li>\n<li>JK: 13</li>\n</ul>\n<p>I used <code>&lt;reuseForks&gt;true&lt;/reuseForks&gt;</code> and it worked fine.</p>\n<pre><code>       &lt;plugin&gt;\n            &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n            &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\n            &lt;version&gt;${maven.compiler.plugin.version}&lt;/version&gt;\n            &lt;configuration&gt;\n                &lt;release&gt;${java.version}&lt;/release&gt;\n                &lt;showWarnings&gt;true&lt;/showWarnings&gt;\n                &lt;compilerArgs&gt;\n                    &lt;compilerArg&gt;-Xlint:unchecked,deprecation&lt;/compilerArg&gt;\n                    &lt;compilerArg&gt;--enable-preview&lt;/compilerArg&gt;\n                &lt;/compilerArgs&gt;\n            &lt;/configuration&gt;\n        &lt;/plugin&gt;\n        &lt;plugin&gt;\n            &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n            &lt;artifactId&gt;maven-surefire-plugin&lt;/artifactId&gt;\n            &lt;version&gt;${surefire.plugin.version}&lt;/version&gt;\n            &lt;configuration&gt;\n                &lt;includes&gt;\n                    &lt;include&gt;**/*Test.java&lt;/include&gt;\n                &lt;/includes&gt;\n                &lt;reuseForks&gt;true&lt;/reuseForks&gt;\n                &lt;argLine&gt;--enable-preview&lt;/argLine&gt;\n            &lt;/configuration&gt;\n        &lt;/plugin&gt;\n</code></pre>\n"}],"owner":{"account_id":205124,"reputation":26418,"user_id":453712,"accept_rate":74,"display_name":"michele"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1580,"favorite_count":0,"down_vote_count":0,"up_vote_count":5,"answer_count":1,"score":5,"last_activity_date":1635426100,"creation_date":1586096475,"question_id":61044079,"body_markdown":"Here it&#39;s my pom.xml:\r\n\r\n\r\n    ...\r\n            &lt;plugin&gt;\r\n                &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n                &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\r\n                &lt;version&gt;3.8.1&lt;/version&gt;\r\n                &lt;configuration&gt;\r\n                    &lt;source&gt;13&lt;/source&gt;\r\n                    &lt;target&gt;13&lt;/target&gt;\r\n                    &lt;release&gt;13&lt;/release&gt;\r\n                    &lt;compilerArgs&gt;\r\n                        --enable-preview\r\n                    &lt;/compilerArgs&gt;\r\n                &lt;/configuration&gt;\r\n            &lt;/plugin&gt;\r\n    ...\r\n            &lt;plugin&gt;\r\n                &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n                &lt;artifactId&gt;maven-surefire-plugin&lt;/artifactId&gt;\r\n                &lt;version&gt;2.22.2&lt;/version&gt;\r\n                &lt;configuration&gt;\r\n                    &lt;reuseForks&gt;false&lt;/reuseForks&gt;\r\n                    &lt;argLine&gt;--enable-preview&lt;/argLine&gt;\r\n                &lt;/configuration&gt;\r\n            &lt;/plugin&gt;\r\n\r\n\r\n\r\nThe problem is that the build goes ok, but when tests are launched I get:\r\n\r\n&gt; [ERROR] Failed to execute goal\r\n&gt; org.apache.maven.plugins:maven-surefire-plugin:3.0.0-M4:test\r\n&gt; (default-test) on project foo-project: Execution default-test of goal\r\n&gt; org.apache.maven.plugins:maven-surefire-plugin:3.0.0-M4:test failed:\r\n&gt; java.lang.UnsupportedClassVersionError: Preview features are not\r\n&gt; enabled for it/project/MyTest (class file version 57.65535). Try\r\n&gt; running with &#39;--enable-preview&#39; -&gt; [Help 1]\r\n\r\n\r\n\r\nWhat I have to insert in pom.xml for executing tests with enabled preview mode?\r\n\r\nThanks.","title":"maven surefire plugin not using --enable-preview mode","body":"<p>Here it's my pom.xml:</p>\n\n<pre><code>...\n        &lt;plugin&gt;\n            &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n            &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\n            &lt;version&gt;3.8.1&lt;/version&gt;\n            &lt;configuration&gt;\n                &lt;source&gt;13&lt;/source&gt;\n                &lt;target&gt;13&lt;/target&gt;\n                &lt;release&gt;13&lt;/release&gt;\n                &lt;compilerArgs&gt;\n                    --enable-preview\n                &lt;/compilerArgs&gt;\n            &lt;/configuration&gt;\n        &lt;/plugin&gt;\n...\n        &lt;plugin&gt;\n            &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n            &lt;artifactId&gt;maven-surefire-plugin&lt;/artifactId&gt;\n            &lt;version&gt;2.22.2&lt;/version&gt;\n            &lt;configuration&gt;\n                &lt;reuseForks&gt;false&lt;/reuseForks&gt;\n                &lt;argLine&gt;--enable-preview&lt;/argLine&gt;\n            &lt;/configuration&gt;\n        &lt;/plugin&gt;\n</code></pre>\n\n<p>The problem is that the build goes ok, but when tests are launched I get:</p>\n\n<blockquote>\n  <p>[ERROR] Failed to execute goal\n  org.apache.maven.plugins:maven-surefire-plugin:3.0.0-M4:test\n  (default-test) on project foo-project: Execution default-test of goal\n  org.apache.maven.plugins:maven-surefire-plugin:3.0.0-M4:test failed:\n  java.lang.UnsupportedClassVersionError: Preview features are not\n  enabled for it/project/MyTest (class file version 57.65535). Try\n  running with '--enable-preview' -> [Help 1]</p>\n</blockquote>\n\n<p>What I have to insert in pom.xml for executing tests with enabled preview mode?</p>\n\n<p>Thanks.</p>\n"},{"tags":["java","android","android-intent"],"answers":[{"tags":[],"owner":{"account_id":39846,"reputation":991143,"user_id":115145,"accept_rate":84,"display_name":"CommonsWare"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1635425804,"creation_date":1635425804,"answer_id":69754513,"question_id":69754490,"body_markdown":"That `Intent` action [is not documented to return anything](https://developer.android.com/reference/android/provider/Settings#ACTION_MANAGE_OVERLAY_PERMISSION). So, you will never get `Activity.RESULT_OK`.","title":"Get result from an Intent","body":"<p>That <code>Intent</code> action <a href=\"https://developer.android.com/reference/android/provider/Settings#ACTION_MANAGE_OVERLAY_PERMISSION\" rel=\"nofollow noreferrer\">is not documented to return anything</a>. So, you will never get <code>Activity.RESULT_OK</code>.</p>\n"}],"owner":{"account_id":22556160,"reputation":5,"user_id":16744517,"display_name":"dani"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":170,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":69754513,"answer_count":1,"score":0,"last_activity_date":1635425804,"creation_date":1635425687,"question_id":69754490,"body_markdown":"I want to check ACTION_MANAGE_OVERLAY_PERMISSION with registerForActivityResult And this code does&#39;t work, when i check the permission the Toast &quot;Ok&quot; does&#39;t appear\r\n\r\n```mStartForResult.launch(new Intent(Settings.ACTION_MANAGE_OVERLAY_PERMISSION));```\r\n```\r\nActivityResultLauncher&lt;Intent&gt; mStartForResult = registerForActivityResult(new ActivityResultContracts.StartActivityForResult(),\r\n            new ActivityResultCallback&lt;ActivityResult&gt;() {\r\n                @Override\r\n                public void onActivityResult(ActivityResult result) {\r\n                    if (result.getResultCode() == Activity.RESULT_OK) {\r\n                        Toast.makeText(MainActivity.this,&quot;Ok&quot;,Toast.LENGTH_SHORT).show();\r\n                    }\r\n                }\r\n            });```","title":"Get result from an Intent","body":"<p>I want to check ACTION_MANAGE_OVERLAY_PERMISSION with registerForActivityResult And this code does't work, when i check the permission the Toast &quot;Ok&quot; does't appear</p>\n<p><code>mStartForResult.launch(new Intent(Settings.ACTION_MANAGE_OVERLAY_PERMISSION));</code></p>\n<pre><code>ActivityResultLauncher&lt;Intent&gt; mStartForResult = registerForActivityResult(new ActivityResultContracts.StartActivityForResult(),\n            new ActivityResultCallback&lt;ActivityResult&gt;() {\n                @Override\n                public void onActivityResult(ActivityResult result) {\n                    if (result.getResultCode() == Activity.RESULT_OK) {\n                        Toast.makeText(MainActivity.this,&quot;Ok&quot;,Toast.LENGTH_SHORT).show();\n                    }\n                }\n            });```\n</code></pre>\n"},{"tags":["java","pattern-matching","instanceof"],"answers":[{"tags":[],"owner":{"account_id":203704,"reputation":13105,"user_id":451518,"display_name":"default locale"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1635425521,"creation_date":1635425125,"answer_id":69754355,"question_id":69751245,"body_markdown":"You can&#39;t declare the same variable in two different places using pattern matching. Those are still two different variables, with two different scopes.\r\n\r\nPerhaps, we can clear the confusion by giving them different names:\r\n\r\n```\r\nif (!(x instanceof Comment comment)) {\r\n    if (!(x instanceof Document doc &amp;&amp; doc.getFirstChild() instanceof Comment comment2)) {\r\n        return null;\r\n    }\r\n    //comment2 and doc are in scope here,\r\n    //but their scope ends with an enclosing block\r\n    System.out.println(comment2.toString());\r\n}\r\n//FAIL! You can&#39;t access comment2 outside its scope\r\nSystem.out.println(comment2.toString()); \r\n//FAIL! You can&#39;t access comment here because \r\n//the compiler can&#39;t guarantee that the block above exited.\r\nSystem.out.prinltn(comment.toString()\r\n```\r\n\r\nYou can verify that pattern-matched variables still remain in their enclosing scope using a simple example like this:\r\n\r\n```\r\n{\r\n    Object o = null;\r\n    if(!(o instanceof String s)) {\r\n          return;\r\n    }\r\n    System.out.println(s); //OK\r\n}\r\nSystem.out.println(s); //Doesn&#39;t work\r\n```\r\n\r\nSorry, I don&#39;t really have an elegant alternative for you to use. You can achieve what you want with a somewhat ugly workaround:\r\n\r\n```\r\nComment comment;\r\nif (!(x instanceof Comment c)) {\r\n    if (!(x instanceof Document doc &amp;&amp; doc.getFirstChild() instanceof Comment c)) {\r\n        return null;\r\n    }\r\n    comment = c;\r\n} else {\r\n    comment = c;\r\n}\r\nSystem.out.println(comment.toString());\r\n```\r\n\r\nThis workaround gets better if you can move this snippet into a separate method:\r\n\r\n```\r\nprivate static Comment extractComment(Node x) {\r\n    if (!(x instanceof Comment comment)) {\r\n        if (!(x instanceof Document doc &amp;&amp; doc.getFirstChild() instanceof Comment comment)) {\r\n            return null;\r\n        }\r\n        return comment;\r\n    } \r\n    return comment;\r\n}\r\n```\r\n\r\nOr even:\r\n\r\n```\r\nprivate static Comment extractComment(Node x) {\r\n    if (x instanceof Comment comment) {\r\n        return comment;\r\n    }     \r\n    if (x instanceof Document doc &amp;&amp; doc.getFirstChild() instanceof Comment comment) {\r\n        return comment;\r\n    }\r\n    return null;\r\n}\r\n```","title":"Pattern matching in instanceof sometimes cannot resolve theoretically resolvable scope","body":"<p>You can't declare the same variable in two different places using pattern matching. Those are still two different variables, with two different scopes.</p>\n<p>Perhaps, we can clear the confusion by giving them different names:</p>\n<pre><code>if (!(x instanceof Comment comment)) {\n    if (!(x instanceof Document doc &amp;&amp; doc.getFirstChild() instanceof Comment comment2)) {\n        return null;\n    }\n    //comment2 and doc are in scope here,\n    //but their scope ends with an enclosing block\n    System.out.println(comment2.toString());\n}\n//FAIL! You can't access comment2 outside its scope\nSystem.out.println(comment2.toString()); \n//FAIL! You can't access comment here because \n//the compiler can't guarantee that the block above exited.\nSystem.out.prinltn(comment.toString()\n</code></pre>\n<p>You can verify that pattern-matched variables still remain in their enclosing scope using a simple example like this:</p>\n<pre><code>{\n    Object o = null;\n    if(!(o instanceof String s)) {\n          return;\n    }\n    System.out.println(s); //OK\n}\nSystem.out.println(s); //Doesn't work\n</code></pre>\n<p>Sorry, I don't really have an elegant alternative for you to use. You can achieve what you want with a somewhat ugly workaround:</p>\n<pre><code>Comment comment;\nif (!(x instanceof Comment c)) {\n    if (!(x instanceof Document doc &amp;&amp; doc.getFirstChild() instanceof Comment c)) {\n        return null;\n    }\n    comment = c;\n} else {\n    comment = c;\n}\nSystem.out.println(comment.toString());\n</code></pre>\n<p>This workaround gets better if you can move this snippet into a separate method:</p>\n<pre><code>private static Comment extractComment(Node x) {\n    if (!(x instanceof Comment comment)) {\n        if (!(x instanceof Document doc &amp;&amp; doc.getFirstChild() instanceof Comment comment)) {\n            return null;\n        }\n        return comment;\n    } \n    return comment;\n}\n</code></pre>\n<p>Or even:</p>\n<pre><code>private static Comment extractComment(Node x) {\n    if (x instanceof Comment comment) {\n        return comment;\n    }     \n    if (x instanceof Document doc &amp;&amp; doc.getFirstChild() instanceof Comment comment) {\n        return comment;\n    }\n    return null;\n}\n</code></pre>\n"}],"owner":{"display_name":"user2104560"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":509,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":69754355,"answer_count":1,"score":2,"last_activity_date":1635425521,"creation_date":1635412096,"question_id":69751245,"body_markdown":"    import org.w3c.dom.Comment;\r\n    import org.w3c.dom.Document;\r\n    import org.w3c.dom.Node;\r\n\r\n    List&lt;Node&gt; list = new ArrayList&lt;&gt;();\r\n    Node x = list.get(0);\r\n    if (!(x instanceof Comment comment)) {\r\n        if (!(x instanceof Document doc &amp;&amp; doc.getFirstChild() instanceof Comment comment)) {\r\n            return null;\r\n        }\r\n    }\r\n    System.out.println(comment.ToString()); // cannot resolve comment\r\n\r\nVariable `comment` cannot be resolved but it should be - we covered 2 mutually exclusive happy paths and each of them assigns `Comment comment` - and system out should be able to see `comment`, otherwise `return null` would have been triggered.","title":"Pattern matching in instanceof sometimes cannot resolve theoretically resolvable scope","body":"<pre><code>import org.w3c.dom.Comment;\nimport org.w3c.dom.Document;\nimport org.w3c.dom.Node;\n\nList&lt;Node&gt; list = new ArrayList&lt;&gt;();\nNode x = list.get(0);\nif (!(x instanceof Comment comment)) {\n    if (!(x instanceof Document doc &amp;&amp; doc.getFirstChild() instanceof Comment comment)) {\n        return null;\n    }\n}\nSystem.out.println(comment.ToString()); // cannot resolve comment\n</code></pre>\n<p>Variable <code>comment</code> cannot be resolved but it should be - we covered 2 mutually exclusive happy paths and each of them assigns <code>Comment comment</code> - and system out should be able to see <code>comment</code>, otherwise <code>return null</code> would have been triggered.</p>\n"},{"tags":["java","docker","ubuntu"],"comments":[{"owner":{"account_id":13863020,"reputation":137033,"user_id":10008173,"display_name":"David Maze"},"score":1,"creation_date":1635426920,"post_id":69754342,"comment_id":123299309,"body_markdown":"How does the file get into the container?  If the application&#39;s main purpose is to read and write local files, is Docker&#39;s filesystem isolation a major barrier, and would it make more sense to use a host JVM without Docker involved?  Can you edit the question to include a [mcve]?","body":"How does the file get into the container?  If the application&#39;s main purpose is to read and write local files, is Docker&#39;s filesystem isolation a major barrier, and would it make more sense to use a host JVM without Docker involved?  Can you edit the question to include a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>?"},{"owner":{"account_id":10205589,"reputation":169,"user_id":7534428,"display_name":"Mateus Terra"},"score":0,"creation_date":1635428685,"post_id":69754342,"comment_id":123300199,"body_markdown":"As @DavidMaze said, probably you shouldn&#39;t use docker if the application should process local files. You may copy the files into the container, but the container is much like a virtual machine and doesn&#39;t have access to the files in the host machine.","body":"As @DavidMaze said, probably you shouldn&#39;t use docker if the application should process local files. You may copy the files into the container, but the container is much like a virtual machine and doesn&#39;t have access to the files in the host machine."}],"owner":{"account_id":14020278,"reputation":56,"user_id":12267765,"display_name":"Max"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":275,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":0,"score":0,"last_activity_date":1635425502,"creation_date":1635425067,"question_id":69754342,"body_markdown":"A text document is being processed in my jar.\r\n\r\nThe file location specified in the code is `/home/ubuntu/R.txt`. \r\n\r\nIf I run the jar through the ubuntu console `java -jar 1.jar`, then everything starts without problems: the jar file recognizes the document at `/home/ubuntu/R.txt`.\r\n\r\nHowever, if I run the same jar via `docker build -t fb:1.1-SNAPSHOT .` and `docker run -p 8080:8080 fb:1.1-SNAPSHOT`, then the jar file gives an error about the absence of the file `R.txt`. \r\n\r\nI run it from the same directory. \r\n\r\nIt contains a Dockerfile, a jar file, and a text document.\r\n\r\nTell me how to correctly specify the location of the file for Docker or where is it better to transfer the file?\r\n\r\n\r\n","title":"Application running in Docker does not see the file","body":"<p>A text document is being processed in my jar.</p>\n<p>The file location specified in the code is <code>/home/ubuntu/R.txt</code>.</p>\n<p>If I run the jar through the ubuntu console <code>java -jar 1.jar</code>, then everything starts without problems: the jar file recognizes the document at <code>/home/ubuntu/R.txt</code>.</p>\n<p>However, if I run the same jar via <code>docker build -t fb:1.1-SNAPSHOT .</code> and <code>docker run -p 8080:8080 fb:1.1-SNAPSHOT</code>, then the jar file gives an error about the absence of the file <code>R.txt</code>.</p>\n<p>I run it from the same directory.</p>\n<p>It contains a Dockerfile, a jar file, and a text document.</p>\n<p>Tell me how to correctly specify the location of the file for Docker or where is it better to transfer the file?</p>\n"},{"tags":["java","logging","logback","slf4j","mdc"],"owner":{"account_id":49084,"reputation":13279,"user_id":145999,"accept_rate":45,"display_name":"HugoRune"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":748,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":0,"score":2,"last_activity_date":1635425426,"creation_date":1635425426,"question_id":69754421,"body_markdown":"How can I log the value of multiple MDC keys with logback, depending on wheter these MDC keys have a value?\r\n\r\n\r\nCertain threads have MDC information added like this:\r\n\r\n    MDC.put(&quot;action&quot;, &quot;MyActionName&quot;);\r\n    log.debug (&quot;something happened during an action&quot;)\r\n\r\nother threads have MDC information like this:\r\n\r\n    MDC.put(&quot;section&quot;, &quot;abc&quot;);\r\n    MDC.put(&quot;subsection&quot;, &quot;def&quot;);\r\n    MDC.put(&quot;subsubsection&quot;, &quot;ghi&quot;);\r\n    log.debug (&quot;something happened in a subsubsection&quot;)\r\n\r\nI want a log where the first log message is prefixed with &quot;MyActionName&quot; and the second log message is prefixed with &quot;abc def ghi&quot;. The MDC values should be printed with fixed width.\r\n\r\n    00:00 [Thread1] MyActionName - something happened during an action\r\n    00:01 [Thread2] abc def ghi  - something happened in a subsubsection\r\n\r\nThese log lines correspond to the patterns\r\n```lang-xml\r\n&lt;pattern&gt;%d{HH:mm} [%thread] %12.-12mdc{action} - %msg%n&lt;/pattern&gt;\r\n&lt;pattern&gt;%d{HH:mm} [%thread] %3.-3mdc{section} %3.-3mdc{subsection} %3.-3mdc{subsubsection} - %msg%n&lt;/pattern&gt;\r\n```\r\n\r\nHow can I combine these two log format patterns into a single pattern that works in both cases?\r\n\r\nI know that I can define a [default value][1] when a MDC key is not available with `:-`, and that this default value can in turn contain other variables. So something like this should work:\r\n```lang-xml\r\n&lt;pattern&gt;%d{HH:mm} [%thread] %12.-12mdc{action:-(%3.-3mdc{section} %3.-3mdc{subsection} %3.-3mdc{subsubsection})} - %msg%n&lt;/pattern&gt;\r\n```\r\n\r\nBut this does not work, it just prints the string `%3.-3mdc{section...&quot; in the log, if the mdc key &quot;action&quot; is not defined.\r\n\r\nThe fallback MDC expressions are not evaluated, no matter what combination of `:-`, `()` and `${}` I try.\r\n\r\n  [1]: http://logback.qos.ch/manual/configuration.html#defaultValuesForVariables","title":"Log MDC keys using logback, with fixed width, only if they have a value","body":"<p>How can I log the value of multiple MDC keys with logback, depending on wheter these MDC keys have a value?</p>\n<p>Certain threads have MDC information added like this:</p>\n<pre><code>MDC.put(&quot;action&quot;, &quot;MyActionName&quot;);\nlog.debug (&quot;something happened during an action&quot;)\n</code></pre>\n<p>other threads have MDC information like this:</p>\n<pre><code>MDC.put(&quot;section&quot;, &quot;abc&quot;);\nMDC.put(&quot;subsection&quot;, &quot;def&quot;);\nMDC.put(&quot;subsubsection&quot;, &quot;ghi&quot;);\nlog.debug (&quot;something happened in a subsubsection&quot;)\n</code></pre>\n<p>I want a log where the first log message is prefixed with &quot;MyActionName&quot; and the second log message is prefixed with &quot;abc def ghi&quot;. The MDC values should be printed with fixed width.</p>\n<pre><code>00:00 [Thread1] MyActionName - something happened during an action\n00:01 [Thread2] abc def ghi  - something happened in a subsubsection\n</code></pre>\n<p>These log lines correspond to the patterns</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;pattern&gt;%d{HH:mm} [%thread] %12.-12mdc{action} - %msg%n&lt;/pattern&gt;\n&lt;pattern&gt;%d{HH:mm} [%thread] %3.-3mdc{section} %3.-3mdc{subsection} %3.-3mdc{subsubsection} - %msg%n&lt;/pattern&gt;\n</code></pre>\n<p>How can I combine these two log format patterns into a single pattern that works in both cases?</p>\n<p>I know that I can define a <a href=\"http://logback.qos.ch/manual/configuration.html#defaultValuesForVariables\" rel=\"nofollow noreferrer\">default value</a> when a MDC key is not available with <code>:-</code>, and that this default value can in turn contain other variables. So something like this should work:</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;pattern&gt;%d{HH:mm} [%thread] %12.-12mdc{action:-(%3.-3mdc{section} %3.-3mdc{subsection} %3.-3mdc{subsubsection})} - %msg%n&lt;/pattern&gt;\n</code></pre>\n<p>But this does not work, it just prints the string `%3.-3mdc{section...&quot; in the log, if the mdc key &quot;action&quot; is not defined.</p>\n<p>The fallback MDC expressions are not evaluated, no matter what combination of <code>:-</code>, <code>()</code> and <code>${}</code> I try.</p>\n"},{"tags":["java","spring-boot","jpa","spring-data-jpa","spring-data"],"owner":{"account_id":12037792,"reputation":1783,"user_id":8805742,"display_name":"mahfuj asif"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":416,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1635425389,"creation_date":1635421602,"question_id":69753527,"body_markdown":"Here is my redis entity\r\n```\r\n@RedisHash(&quot;imei&quot;)\r\npublic class NeirResponse {\r\n\r\n    @Id\r\n    @Indexed\r\n    private String id;\r\n\r\n    private List&lt;ImeiResponse&gt; imeiList;\r\n}\r\n```\r\n\r\nAnd here is `ImeiResponse`\r\n```\r\n@Data\r\npublic class ImeiResponse {\r\n\r\n    private String imei;\r\n\r\n    private String type;\r\n}\r\n```\r\n\r\nIn my repository i am trying to find by nested `imei`. Here is my repository\r\n```\r\n@Repository\r\npublic interface NeirRepository extends JpaRepository&lt;NeirResponse, String&gt; {\r\n\r\n    Optional&lt;NeirResponse&gt; findByImeiListImei(String imei);\r\n}\r\n```\r\nBut it is returning null, although data exists.\r\n\r\nSo far i have tried the following\r\n1. findByImeiList_Imei\r\n2. findInImeiListByImei\r\n3. findByImeiListImei\r\n4. findByImeiList_imei\r\n\r\nHow do i write proper method name?\r\n\r\n***N.B I have tried several SO questions, but could not solve, so please dont mark as duplicate.***","title":"Redis Jpa repository can not find by nested object id","body":"<p>Here is my redis entity</p>\n<pre><code>@RedisHash(&quot;imei&quot;)\npublic class NeirResponse {\n\n    @Id\n    @Indexed\n    private String id;\n\n    private List&lt;ImeiResponse&gt; imeiList;\n}\n</code></pre>\n<p>And here is <code>ImeiResponse</code></p>\n<pre><code>@Data\npublic class ImeiResponse {\n\n    private String imei;\n\n    private String type;\n}\n</code></pre>\n<p>In my repository i am trying to find by nested <code>imei</code>. Here is my repository</p>\n<pre><code>@Repository\npublic interface NeirRepository extends JpaRepository&lt;NeirResponse, String&gt; {\n\n    Optional&lt;NeirResponse&gt; findByImeiListImei(String imei);\n}\n</code></pre>\n<p>But it is returning null, although data exists.</p>\n<p>So far i have tried the following</p>\n<ol>\n<li>findByImeiList_Imei</li>\n<li>findInImeiListByImei</li>\n<li>findByImeiListImei</li>\n<li>findByImeiList_imei</li>\n</ol>\n<p>How do i write proper method name?</p>\n<p><em><strong>N.B I have tried several SO questions, but could not solve, so please dont mark as duplicate.</strong></em></p>\n"},{"tags":["java","hadoop","copy","out-of-memory","heap-memory"],"answers":[{"tags":[],"owner":{"account_id":3800392,"reputation":2568,"user_id":3154217,"accept_rate":70,"display_name":"Havnar"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1455537492,"creation_date":1455537492,"answer_id":35408799,"question_id":35405690,"body_markdown":"Try giving your put (or copy from local) command more heap space.\r\nAlternatively, do a less aggressive put operation.\r\n\r\nI.e. copy in batches of half or 1/4th or 1/5 .... of the total data.\r\nAll this copying is done from the local machine with a default java command, you are simply overloading it.","title":"Out of memory issue for Hadoop copyFromLocal","body":"<p>Try giving your put (or copy from local) command more heap space.\nAlternatively, do a less aggressive put operation.</p>\n\n<p>I.e. copy in batches of half or 1/4th or 1/5 .... of the total data.\nAll this copying is done from the local machine with a default java command, you are simply overloading it.</p>\n"},{"tags":[],"owner":{"account_id":3009581,"reputation":891,"user_id":2553382,"accept_rate":61,"display_name":"Nagaraj Vittal"},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1455598526,"creation_date":1455598526,"answer_id":35424074,"question_id":35405690,"body_markdown":"Issue was basically with Hadoop client. This is fixed by increasing &quot;GCOverheadLimit&quot; to 4GB. Following command solved my problem.\r\n\r\nexport HADOOP_CLIENT_OPTS=&quot;-XX:-UseGCOverheadLimit -Xmx4096m&quot; ","title":"Out of memory issue for Hadoop copyFromLocal","body":"<p>Issue was basically with Hadoop client. This is fixed by increasing \"GCOverheadLimit\" to 4GB. Following command solved my problem.</p>\n\n<p>export HADOOP_CLIENT_OPTS=\"-XX:-UseGCOverheadLimit -Xmx4096m\" </p>\n"}],"owner":{"account_id":3009581,"reputation":891,"user_id":2553382,"accept_rate":61,"display_name":"Nagaraj Vittal"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2334,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":2,"score":1,"last_activity_date":1635425332,"creation_date":1455528715,"question_id":35405690,"body_markdown":"I&#39;m trying to copy a directory that contains 1,048,578 files into `hdfs` file system but, got below error:\r\n\r\n    Exception in thread &quot;main&quot; java.lang.OutOfMemoryError: Java heap space\r\n        at java.util.Arrays.copyOf(Arrays.java:2367)\r\n        at java.lang.AbstractStringBuilder.expandCapacity(AbstractStringBuilder.java:130)\r\n        at java.lang.AbstractStringBuilder.ensureCapacityInternal(AbstractStringBuilder.java:114)\r\n        at java.lang.AbstractStringBuilder.append(AbstractStringBuilder.java:415)\r\n        at java.lang.StringBuffer.append(StringBuffer.java:237)\r\n        at java.net.URI.appendSchemeSpecificPart(URI.java:1892)\r\n        at java.net.URI.toString(URI.java:1922)\r\n        at java.net.URI.&lt;init&gt;(URI.java:749)\r\n        at org.apache.hadoop.fs.shell.PathData.stringToUri(PathData.java:565)\r\n        at org.apache.hadoop.fs.shell.PathData.&lt;init&gt;(PathData.java:151)\r\n        at org.apache.hadoop.fs.shell.PathData.getDirectoryContents(PathData.java:273)\r\n        at org.apache.hadoop.fs.shell.Command.recursePath(Command.java:347)\r\n        at org.apache.hadoop.fs.shell.CommandWithDestination.recursePath(CommandWithDestination.java:291)\r\n        at org.apache.hadoop.fs.shell.Command.processPaths(Command.java:308)\r\n        at org.apache.hadoop.fs.shell.Command.processPathArgument(Command.java:278)\r\n        at org.apache.hadoop.fs.shell.CommandWithDestination.processPathArgument(CommandWithDestination.java:243)\r\n        at org.apache.hadoop.fs.shell.Command.processArgument(Command.java:260)\r\n        at org.apache.hadoop.fs.shell.Command.processArguments(Command.java:244)\r\n        at org.apache.hadoop.fs.shell.CommandWithDestination.processArguments(CommandWithDestination.java:220)\r\n        at org.apache.hadoop.fs.shell.CopyCommands$Put.processArguments(CopyCommands.java:267)\r\n        at org.apache.hadoop.fs.shell.Command.processRawArguments(Command.java:190)\r\n        at org.apache.hadoop.fs.shell.Command.run(Command.java:154)\r\n        at org.apache.hadoop.fs.FsShell.run(FsShell.java:287)\r\n        at org.apache.hadoop.util.ToolRunner.run(ToolRunner.java:70)\r\n        at org.apache.hadoop.util.ToolRunner.run(ToolRunner.java:84)\r\n        at org.apache.hadoop.fs.FsShell.main(FsShell.java:340)\r\n","title":"Out of memory issue for Hadoop copyFromLocal","body":"<p>I'm trying to copy a directory that contains 1,048,578 files into <code>hdfs</code> file system but, got below error:</p>\n\n<pre><code>Exception in thread \"main\" java.lang.OutOfMemoryError: Java heap space\n    at java.util.Arrays.copyOf(Arrays.java:2367)\n    at java.lang.AbstractStringBuilder.expandCapacity(AbstractStringBuilder.java:130)\n    at java.lang.AbstractStringBuilder.ensureCapacityInternal(AbstractStringBuilder.java:114)\n    at java.lang.AbstractStringBuilder.append(AbstractStringBuilder.java:415)\n    at java.lang.StringBuffer.append(StringBuffer.java:237)\n    at java.net.URI.appendSchemeSpecificPart(URI.java:1892)\n    at java.net.URI.toString(URI.java:1922)\n    at java.net.URI.&lt;init&gt;(URI.java:749)\n    at org.apache.hadoop.fs.shell.PathData.stringToUri(PathData.java:565)\n    at org.apache.hadoop.fs.shell.PathData.&lt;init&gt;(PathData.java:151)\n    at org.apache.hadoop.fs.shell.PathData.getDirectoryContents(PathData.java:273)\n    at org.apache.hadoop.fs.shell.Command.recursePath(Command.java:347)\n    at org.apache.hadoop.fs.shell.CommandWithDestination.recursePath(CommandWithDestination.java:291)\n    at org.apache.hadoop.fs.shell.Command.processPaths(Command.java:308)\n    at org.apache.hadoop.fs.shell.Command.processPathArgument(Command.java:278)\n    at org.apache.hadoop.fs.shell.CommandWithDestination.processPathArgument(CommandWithDestination.java:243)\n    at org.apache.hadoop.fs.shell.Command.processArgument(Command.java:260)\n    at org.apache.hadoop.fs.shell.Command.processArguments(Command.java:244)\n    at org.apache.hadoop.fs.shell.CommandWithDestination.processArguments(CommandWithDestination.java:220)\n    at org.apache.hadoop.fs.shell.CopyCommands$Put.processArguments(CopyCommands.java:267)\n    at org.apache.hadoop.fs.shell.Command.processRawArguments(Command.java:190)\n    at org.apache.hadoop.fs.shell.Command.run(Command.java:154)\n    at org.apache.hadoop.fs.FsShell.run(FsShell.java:287)\n    at org.apache.hadoop.util.ToolRunner.run(ToolRunner.java:70)\n    at org.apache.hadoop.util.ToolRunner.run(ToolRunner.java:84)\n    at org.apache.hadoop.fs.FsShell.main(FsShell.java:340)\n</code></pre>\n"},{"tags":["java","out-of-memory","heap-memory","stringbuilder"],"comments":[{"owner":{"account_id":5390835,"reputation":4928,"user_id":4293417,"accept_rate":92,"display_name":"Zizouz212"},"score":1,"creation_date":1456196512,"post_id":35567974,"comment_id":58823790,"body_markdown":"If that&#39;s throwing an `OutOfMemoryException`, then you should probably reconsider your design. Remember, you will be returning that string afterwards, and that string will be huge. You should consider using a stream or something.","body":"If that&#39;s throwing an <code>OutOfMemoryException</code>, then you should probably reconsider your design. Remember, you will be returning that string afterwards, and that string will be huge. You should consider using a stream or something."},{"owner":{"account_id":2709823,"reputation":10716,"user_id":2338547,"display_name":"markspace"},"score":0,"creation_date":1456196811,"post_id":35567974,"comment_id":58823877,"body_markdown":"100k results does not sound like a lot to me.  How much heap memory do you allocate for Java?  32 bit or 64 bit JVM?  And how much memory on the system? (EDIT: the command line parameter is -Xmx for max memory, what are you using?)","body":"100k results does not sound like a lot to me.  How much heap memory do you allocate for Java?  32 bit or 64 bit JVM?  And how much memory on the system? (EDIT: the command line parameter is -Xmx for max memory, what are you using?)"},{"owner":{"account_id":6959361,"reputation":441,"user_id":5339368,"accept_rate":53,"display_name":"john.p.doe"},"score":0,"creation_date":1456197157,"post_id":35567974,"comment_id":58823982,"body_markdown":"@markspace intx CompilerThreadStackSize = 0                                 \nuintx ErgoHeapSizeLimit  = 0                             \nuintx HeapSizePerGCThread = 87241520                      \nuintx InitialHeapSize = 268435456                     \nuintx LargePageHeapSizeThreshold = 134217728                     \nuintx MaxHeapSize = 4294967296                    \nintx ThreadStackSize = 1024                          \nintx VMThreadStackSize = 1024                          \njava version &quot;1.8.0_65&quot;\nJava(TM) SE Runtime Environment \nJava HotSpot(TM) 64-Bit Server VM (mixed mode)","body":"@markspace intx CompilerThreadStackSize = 0                                  uintx ErgoHeapSizeLimit  = 0                              uintx HeapSizePerGCThread = 87241520                       uintx InitialHeapSize = 268435456                      uintx LargePageHeapSizeThreshold = 134217728                      uintx MaxHeapSize = 4294967296                     intx ThreadStackSize = 1024                           intx VMThreadStackSize = 1024                           java version &quot;1.8.0_65&quot; Java(TM) SE Runtime Environment  Java HotSpot(TM) 64-Bit Server VM (mixed mode)"},{"owner":{"account_id":114128,"reputation":50422,"user_id":300257,"accept_rate":89,"display_name":"Gilbert Le Blanc"},"score":1,"creation_date":1456197197,"post_id":35567974,"comment_id":58823988,"body_markdown":"Instead of building a huge string, write the contents of the database to an output file.  Later, you can read the file and not worry about the intermediate strings.","body":"Instead of building a huge string, write the contents of the database to an output file.  Later, you can read the file and not worry about the intermediate strings."},{"owner":{"account_id":6959361,"reputation":441,"user_id":5339368,"accept_rate":53,"display_name":"john.p.doe"},"score":0,"creation_date":1456197237,"post_id":35567974,"comment_id":58823998,"body_markdown":"@Zizouz212 Well I dont know how I would use stream before I can even get to the whole string, Can I? Can you point me to an example where I can avoid using Builder?","body":"@Zizouz212 Well I dont know how I would use stream before I can even get to the whole string, Can I? Can you point me to an example where I can avoid using Builder?"},{"owner":{"account_id":6959361,"reputation":441,"user_id":5339368,"accept_rate":53,"display_name":"john.p.doe"},"score":0,"creation_date":1456197348,"post_id":35567974,"comment_id":58824027,"body_markdown":"@GilbertLeBlanc But there are a few operations that I need to perform on this string before I can write them to a file.","body":"@GilbertLeBlanc But there are a few operations that I need to perform on this string before I can write them to a file."},{"owner":{"account_id":7505413,"reputation":5686,"user_id":5702105,"display_name":"Ian Mc"},"score":0,"creation_date":1456198102,"post_id":35567974,"comment_id":58824265,"body_markdown":"Can the operations you perform be done within the for loop (i.e. on a particular dBO.getResults) or must they be performed on the entire String?  And what do you do with this huge (altered) string if you were to create it?","body":"Can the operations you perform be done within the for loop (i.e. on a particular dBO.getResults) or must they be performed on the entire String?  And what do you do with this huge (altered) string if you were to create it?"},{"owner":{"account_id":6959361,"reputation":441,"user_id":5339368,"accept_rate":53,"display_name":"john.p.doe"},"score":0,"creation_date":1456198261,"post_id":35567974,"comment_id":58824313,"body_markdown":"@IanMc Well I need to do a bit of a formatting to the end string. And also I am stuck with iterating because I have to insert &quot;endResult.append(&quot;Starting to write&quot; + dBO.getOutPut() + &quot;content&quot;);&quot; after every object. As you can see in the Question","body":"@IanMc Well I need to do a bit of a formatting to the end string. And also I am stuck with iterating because I have to insert &quot;endResult.append(&quot;Starting to write&quot; + dBO.getOutPut() + &quot;content&quot;);&quot; after every object. As you can see in the Question"},{"owner":{"account_id":7505413,"reputation":5686,"user_id":5702105,"display_name":"Ian Mc"},"score":1,"creation_date":1456198526,"post_id":35567974,"comment_id":58824393,"body_markdown":"Trying to establish if you can &#39;flush&#39; each iteration, and not build a massive string.  By that I mean create a String combining &quot;Starting to write ...&quot;. and append (dBO.getResults) -&gt; Then perform string alteratiion, then flush it somewhere (to disk, etc).  So you don&#39;t need a StringBuilder.","body":"Trying to establish if you can &#39;flush&#39; each iteration, and not build a massive string.  By that I mean create a String combining &quot;Starting to write ...&quot;. and append (dBO.getResults) -&gt; Then perform string alteratiion, then flush it somewhere (to disk, etc).  So you don&#39;t need a StringBuilder."},{"owner":{"account_id":6959361,"reputation":441,"user_id":5339368,"accept_rate":53,"display_name":"john.p.doe"},"score":0,"creation_date":1456199987,"post_id":35567974,"comment_id":58824840,"body_markdown":"@IanMc Well it is not a bad idea, but unfortunately its adding more twist to my purpose and current design. Basically the constructed string goes back to database as a byte[] So I dont know how I could leave it mid-way and then append to it later on.","body":"@IanMc Well it is not a bad idea, but unfortunately its adding more twist to my purpose and current design. Basically the constructed string goes back to database as a byte[] So I dont know how I could leave it mid-way and then append to it later on."},{"owner":{"account_id":1464652,"reputation":12323,"user_id":1377895,"accept_rate":100,"display_name":"Roman Vottner"},"score":0,"creation_date":1456200161,"post_id":35567974,"comment_id":58824898,"body_markdown":"As the for-each loop keeps all the already processed elements in memory, you could replace the for-each loop with `Iterator&lt;DBObject&gt; iter = dbObjects.iterator(); while(iter.hasNext()) { DBObject dBO = iter.next(); ... iter.remove(); }` This will remove the object from the actual list while the loop is still iterating through the elements and therefore make the removed element eligible for garbage collection, which might lower the memory footprint of your application. Also, instead of loading all 100.000 elements, try to page through the dataset.","body":"As the for-each loop keeps all the already processed elements in memory, you could replace the for-each loop with <code>Iterator&lt;DBObject&gt; iter = dbObjects.iterator(); while(iter.hasNext()) { DBObject dBO = iter.next(); ... iter.remove(); }</code> This will remove the object from the actual list while the loop is still iterating through the elements and therefore make the removed element eligible for garbage collection, which might lower the memory footprint of your application. Also, instead of loading all 100.000 elements, try to page through the dataset."},{"owner":{"account_id":6959361,"reputation":441,"user_id":5339368,"accept_rate":53,"display_name":"john.p.doe"},"score":0,"creation_date":1456200442,"post_id":35567974,"comment_id":58824990,"body_markdown":"@RomanVottner Paging through the DataSet was the next option that I was going to try. Dunno exactly how well it is going to help but because I have a huge dataset it should release quite a lot of memory for me. Lets see how it turns out.","body":"@RomanVottner Paging through the DataSet was the next option that I was going to try. Dunno exactly how well it is going to help but because I have a huge dataset it should release quite a lot of memory for me. Lets see how it turns out."},{"owner":{"account_id":7505413,"reputation":5686,"user_id":5702105,"display_name":"Ian Mc"},"score":0,"creation_date":1456206336,"post_id":35567974,"comment_id":58827180,"body_markdown":"Normally byte arrays can be added to by startPos.  In your loop, you keep track of totalBytesWritten, and each new write you write at that position.  I don&#39;t know BLOB, but suspect it has a similar feature.","body":"Normally byte arrays can be added to by startPos.  In your loop, you keep track of totalBytesWritten, and each new write you write at that position.  I don&#39;t know BLOB, but suspect it has a similar feature."},{"owner":{"account_id":238684,"reputation":22543,"user_id":507738,"accept_rate":71,"display_name":"MC Emperor"},"score":0,"creation_date":1635426227,"post_id":35567974,"comment_id":123298938,"body_markdown":"Well, it depends on what you want to do with the resulting `StringBuilder`? With large amounts of data, it is common to process this data in chunks instead of collecting the whole thing into one big string.","body":"Well, it depends on what you want to do with the resulting <code>StringBuilder</code>? With large amounts of data, it is common to process this data in chunks instead of collecting the whole thing into one big string."},{"owner":{"account_id":2293921,"reputation":9958,"user_id":2015912,"accept_rate":70,"display_name":"scottb"},"score":0,"creation_date":1635426943,"post_id":35567974,"comment_id":123299321,"body_markdown":"The irony is that `StringBuilder` exists as the &quot;high performance&quot; alternative to multiple string concatenations (it&#39;s a mutable companion class; many compilers internally replace multiple concatenation with a `StringBuilder`).  It would seem to me that if you can&#39;t get what you want using `StringBuilder`, then your design issues require a very different approach.","body":"The irony is that <code>StringBuilder</code> exists as the &quot;high performance&quot; alternative to multiple string concatenations (it&#39;s a mutable companion class; many compilers internally replace multiple concatenation with a <code>StringBuilder</code>).  It would seem to me that if you can&#39;t get what you want using <code>StringBuilder</code>, then your design issues require a very different approach."}],"answers":[{"tags":[],"owner":{"account_id":7052626,"reputation":516,"user_id":5401167,"display_name":"W-S"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1456197569,"creation_date":1456197475,"answer_id":35568162,"question_id":35567974,"body_markdown":"You shouldn&#39;t do something like this when using `StringBuilder`:\r\n\r\n    endResult.append(&quot;Starting to write&quot; + dBO.getOutPut() + &quot;content&quot;);\r\n\r\nThe above statement will do string concatenation. Use the `append()` method like:\r\n\r\n    endResult.append(&quot;Starting to write&quot;).append(dBO.getOutPut()).append(&quot;content&quot;);","title":"Looking for a high performance alternative to StringBuilder","body":"<p>You shouldn't do something like this when using <code>StringBuilder</code>:</p>\n\n<pre><code>endResult.append(\"Starting to write\" + dBO.getOutPut() + \"content\");\n</code></pre>\n\n<p>The above statement will do string concatenation. Use the <code>append()</code> method like:</p>\n\n<pre><code>endResult.append(\"Starting to write\").append(dBO.getOutPut()).append(\"content\");\n</code></pre>\n"}],"owner":{"account_id":6959361,"reputation":441,"user_id":5339368,"accept_rate":53,"display_name":"john.p.doe"},"comment_count":15,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":4966,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":1,"score":2,"last_activity_date":1635425317,"creation_date":1456196376,"question_id":35567974,"body_markdown":"I have a very simple piece of code which iterates over a list of Database objects and appends certain property to the StringBuilder. Now the results are sometimes going over 100K so the append operations go over 100K \r\n\r\nMy problem is there is no way I can shorten the number of iterations as I need the data. But Stringbuilder keeps on taking over heap space. And throws OutOfMemoryException. \r\n\r\nHas anyone encountered any such situation and is there a solution to this problem or an alternative to StringBuilder. \r\n\r\nIt is quite possible that what I am doing might as well be wrong so even though code is quite simple I will post it. \r\n\r\n    StringBuilder endResult = new StringBuilder();\r\n            if (dbObjects != null &amp;&amp; !dbObjects.isEmpty()) {\r\n                for (DBObject dBO : dbObjects) {\r\n                    endResult.append(&quot;Starting to write&quot; + dBO.getOutPut() + &quot;content&quot;);\r\n                    endResult.append(dBO.getResults);\r\n                }\r\n                output.append(&quot;END&quot;);\r\n            }\r\n\r\nLike I said it&#39;s quite possible that I will have 100000 results from the DB","title":"Looking for a high performance alternative to StringBuilder","body":"<p>I have a very simple piece of code which iterates over a list of Database objects and appends certain property to the StringBuilder. Now the results are sometimes going over 100K so the append operations go over 100K </p>\n\n<p>My problem is there is no way I can shorten the number of iterations as I need the data. But Stringbuilder keeps on taking over heap space. And throws OutOfMemoryException. </p>\n\n<p>Has anyone encountered any such situation and is there a solution to this problem or an alternative to StringBuilder. </p>\n\n<p>It is quite possible that what I am doing might as well be wrong so even though code is quite simple I will post it. </p>\n\n<pre><code>StringBuilder endResult = new StringBuilder();\n        if (dbObjects != null &amp;&amp; !dbObjects.isEmpty()) {\n            for (DBObject dBO : dbObjects) {\n                endResult.append(\"Starting to write\" + dBO.getOutPut() + \"content\");\n                endResult.append(dBO.getResults);\n            }\n            output.append(\"END\");\n        }\n</code></pre>\n\n<p>Like I said it's quite possible that I will have 100000 results from the DB</p>\n"},{"tags":["java","jvm","out-of-memory","heap-memory"],"comments":[{"owner":{"account_id":16878,"reputation":306143,"user_id":37213,"accept_rate":81,"display_name":"duffymo"},"score":1,"creation_date":1456221700,"post_id":35574184,"comment_id":58835407,"body_markdown":"https://docs.oracle.com/javase/8/docs/technotes/guides/troubleshoot/memleaks002.html.  Of course you&#39;re running on a 64-bit operating system with a 64-bit JVM.  How much physical RAM is installed and available?  What else runs on this server?","body":"<a href=\"https://docs.oracle.com/javase/8/docs/technotes/guides/troubleshoot/memleaks002.html\" rel=\"nofollow noreferrer\">docs.oracle.com/javase/8/docs/technotes/guides/troubleshoot/&zwnj;&#8203;&hellip;</a>.  Of course you&#39;re running on a 64-bit operating system with a 64-bit JVM.  How much physical RAM is installed and available?  What else runs on this server?"},{"owner":{"account_id":60737,"reputation":15904,"user_id":181336,"display_name":"Adriaan Koster"},"score":0,"creation_date":1456221702,"post_id":35574184,"comment_id":58835409,"body_markdown":"You have aptly described the problem. I think you should show more of what you have tried or solution directions you are considering, and formulate a clear question.","body":"You have aptly described the problem. I think you should show more of what you have tried or solution directions you are considering, and formulate a clear question."},{"owner":{"account_id":15271,"reputation":63428,"user_id":32090,"accept_rate":91,"display_name":"Boris Pavlović"},"score":0,"creation_date":1456221729,"post_id":35574184,"comment_id":58835428,"body_markdown":"There&#39;s a pretty good explanation here: https://plumbr.eu/outofmemoryerror/gc-overhead-limit-exceeded","body":"There&#39;s a pretty good explanation here: <a href=\"https://plumbr.eu/outofmemoryerror/gc-overhead-limit-exceeded\" rel=\"nofollow noreferrer\">plumbr.eu/outofmemoryerror/gc-overhead-limit-exceeded</a>"},{"owner":{"account_id":7354026,"reputation":131,"user_id":5599305,"display_name":"Shalev Manor"},"score":0,"creation_date":1456223744,"post_id":35574184,"comment_id":58836889,"body_markdown":"@duffymo added more context","body":"@duffymo added more context"},{"owner":{"account_id":16878,"reputation":306143,"user_id":37213,"accept_rate":81,"display_name":"duffymo"},"score":0,"creation_date":1456224152,"post_id":35574184,"comment_id":58837175,"body_markdown":"You are assuming this data structure is the issue.  Get a profiler and measure it to be sure.  I&#39;d wonder why you have to have all that data in memory.  Isn&#39;t this what databases are for?  A solution like this can&#39;t scale horizontally.","body":"You are assuming this data structure is the issue.  Get a profiler and measure it to be sure.  I&#39;d wonder why you have to have all that data in memory.  Isn&#39;t this what databases are for?  A solution like this can&#39;t scale horizontally."},{"owner":{"account_id":7354026,"reputation":131,"user_id":5599305,"display_name":"Shalev Manor"},"score":0,"creation_date":1456224871,"post_id":35574184,"comment_id":58837701,"body_markdown":"It works when I revert to the old 2M list, so it&#39;s pretty clear that is the issue.\n\nThat&#39;s a valid point. When this solution was designed it was not foreseen the list would grow to that size. I&#39;m looking for a temporary solution if that&#39;s possible until we have a more scalable one.","body":"It works when I revert to the old 2M list, so it&#39;s pretty clear that is the issue.  That&#39;s a valid point. When this solution was designed it was not foreseen the list would grow to that size. I&#39;m looking for a temporary solution if that&#39;s possible until we have a more scalable one."},{"owner":{"account_id":6453072,"reputation":37996,"user_id":4999394,"accept_rate":98,"display_name":"Ravindra babu"},"score":0,"creation_date":1456228763,"post_id":35574184,"comment_id":58840390,"body_markdown":"Have a look at this SE question: http://stackoverflow.com/questions/5839359/java-lang-outofmemoryerror-gc-overhead-limit-exceeded/34296665#34296665. Can you post complete VM parameter list?","body":"Have a look at this SE question: <a href=\"http://stackoverflow.com/questions/5839359/java-lang-outofmemoryerror-gc-overhead-limit-exceeded/34296665#34296665\" title=\"java lang outofmemoryerror gc overhead limit exceeded\">stackoverflow.com/questions/5839359/&hellip;</a>. Can you post complete VM parameter list?"},{"owner":{"account_id":6453072,"reputation":37996,"user_id":4999394,"accept_rate":98,"display_name":"Ravindra babu"},"score":0,"creation_date":1456229237,"post_id":35574184,"comment_id":58840716,"body_markdown":"and one more question: http://stackoverflow.com/questions/1393486/error-java-lang-outofmemoryerror-gc-overhead-limit-exceeded/35244518#35244518","body":"and one more question: <a href=\"http://stackoverflow.com/questions/1393486/error-java-lang-outofmemoryerror-gc-overhead-limit-exceeded/35244518#35244518\" title=\"error java lang outofmemoryerror gc overhead limit exceeded\">stackoverflow.com/questions/1393486/&hellip;</a>"},{"owner":{"account_id":1443334,"reputation":41522,"user_id":1362755,"display_name":"the8472"},"score":0,"creation_date":1456230705,"post_id":35574184,"comment_id":58841692,"body_markdown":"you should enable GC logging and then post them here or run them through GCViewer. It&#39;s possible that the heap is still too small or the young-old boundary is suboptimally placed due to the large initial heap size.","body":"you should enable GC logging and then post them here or run them through GCViewer. It&#39;s possible that the heap is still too small or the young-old boundary is suboptimally placed due to the large initial heap size."},{"owner":{"account_id":7354026,"reputation":131,"user_id":5599305,"display_name":"Shalev Manor"},"score":0,"creation_date":1456231462,"post_id":35574184,"comment_id":58842230,"body_markdown":"@ravindra There are no more args. I read through those, main advice there is to increase heap size, which doesn&#39;t seem to help.","body":"@ravindra There are no more args. I read through those, main advice there is to increase heap size, which doesn&#39;t seem to help."},{"owner":{"account_id":6453072,"reputation":37996,"user_id":4999394,"accept_rate":98,"display_name":"Ravindra babu"},"score":0,"creation_date":1456232269,"post_id":35574184,"comment_id":58842801,"body_markdown":"Then you have to analyse with profiling tools like MAT or visualvm. Do you need huge live object data in oldgen or is it a memory leak?","body":"Then you have to analyse with profiling tools like MAT or visualvm. Do you need huge live object data in oldgen or is it a memory leak?"},{"owner":{"account_id":1443334,"reputation":41522,"user_id":1362755,"display_name":"the8472"},"score":0,"creation_date":1456234509,"post_id":35574184,"comment_id":58844380,"body_markdown":"you should quantify the data better. _20M * x_ tells us nothing if we do not know the _x_. If the data increases 10-fold then in the worst case you need at least 10 times as large a heap if there was little safety margin before.","body":"you should quantify the data better. <i>20M * x</i> tells us nothing if we do not know the <i>x</i>. If the data increases 10-fold then in the worst case you need at least 10 times as large a heap if there was little safety margin before."}],"answers":[{"tags":[],"owner":{"account_id":47283,"reputation":703817,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1456227418,"creation_date":1456226536,"answer_id":35576212,"question_id":35574184,"body_markdown":"&gt; I&#39;m looking for a temporary solution if that&#39;s possible until we have a more scalable one.\r\n\r\nFirst, you need to figure out if the &quot;OOME: GC overhead limit exceeded&quot; is due to the heap being:\r\n\r\n  - too small ... causing the JVM to do repeated Full GCs, or\r\n\r\n  - too large ... causing the JVM to thrash the virtual memory when a Full GC is run.\r\n\r\nYou should be able to distinguish these two cases by turning on and examining the GC logs, and using OS-level monitoring tools to check for excessive paging loads.  (When checking the paging levels, also check that the problem isn&#39;t due to competition for RAM between your JVM and another memory-hungry application.)\r\n\r\nIf the heap is too small, try making it bigger.  If it is too big, make it smaller.  If you system is showing both symptoms ... then you have a big problem.\r\n\r\nYou should also check that &quot;compressed oops&quot; is enabled for your JVM, as that will reduce your JVM&#39;s memory footprint.  The `-XshowSettings` option lists the settings in effect when the JVM starts.  Use `-XX:+UseCompressedOops` to enable compressed oops if they are disabled.\r\n\r\n(You will probably find that compressed oops are enabled by default, but it is worth checking.  This would be an easy fix ... )\r\n\r\nIf none of the above work, then your only quick fix is to get more RAM.\r\n\r\n---------------------\r\n\r\nBut obviously, the real solution is to reengineer the code so that you don&#39;t need a huge (and increasing over time) in-memory data structure.","title":"JVM issues with a large in-memory object","body":"<blockquote>\n  <p>I'm looking for a temporary solution if that's possible until we have a more scalable one.</p>\n</blockquote>\n\n<p>First, you need to figure out if the \"OOME: GC overhead limit exceeded\" is due to the heap being:</p>\n\n<ul>\n<li><p>too small ... causing the JVM to do repeated Full GCs, or</p></li>\n<li><p>too large ... causing the JVM to thrash the virtual memory when a Full GC is run.</p></li>\n</ul>\n\n<p>You should be able to distinguish these two cases by turning on and examining the GC logs, and using OS-level monitoring tools to check for excessive paging loads.  (When checking the paging levels, also check that the problem isn't due to competition for RAM between your JVM and another memory-hungry application.)</p>\n\n<p>If the heap is too small, try making it bigger.  If it is too big, make it smaller.  If you system is showing both symptoms ... then you have a big problem.</p>\n\n<p>You should also check that \"compressed oops\" is enabled for your JVM, as that will reduce your JVM's memory footprint.  The <code>-XshowSettings</code> option lists the settings in effect when the JVM starts.  Use <code>-XX:+UseCompressedOops</code> to enable compressed oops if they are disabled.</p>\n\n<p>(You will probably find that compressed oops are enabled by default, but it is worth checking.  This would be an easy fix ... )</p>\n\n<p>If none of the above work, then your only quick fix is to get more RAM.</p>\n\n<hr>\n\n<p>But obviously, the real solution is to reengineer the code so that you don't need a huge (and increasing over time) in-memory data structure.</p>\n"}],"owner":{"account_id":7354026,"reputation":131,"user_id":5599305,"display_name":"Shalev Manor"},"comment_count":12,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1118,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"answer_count":1,"score":3,"last_activity_date":1635425300,"creation_date":1456221299,"question_id":35574184,"body_markdown":"I have a binary that contains a list of short strings which is loaded on startup and stored in memory as a map from string to protobuf (that contains the string..). (Not ideal, but hard to change that design due to legacy issues)\r\nRecently that list has grown from ~2M to ~20M entries causing it to fail when constructing the map.\r\n\r\nFirst I got `OutOfMemoryError: Java heap space`.\r\n\r\nWhen I increased the heap size using the xms and xmx we ran into `GC overhead limit exceeded`.\r\n\r\nRuns on a Linux 64-bit machine with 15GB available memory and the following JVM args (I increased the RAM 10G-&gt;15G and the heap flags 6000M -&gt; 9000M): \r\n\r\n`-Xms9000M -Xmx9000M -XX:PermSize=512m -XX:MaxPermSize=2018m`\r\n\r\nThis binary does a whole lot of things and is serving live traffic so I can&#39;t afford it being occasionally stuck.\r\n\r\nEdit: I eventually went and did the obvious thing, which is fixing the code (change from HashMap to ImmutableSet) and adding more RAM (-Xmx11000M).","title":"JVM issues with a large in-memory object","body":"<p>I have a binary that contains a list of short strings which is loaded on startup and stored in memory as a map from string to protobuf (that contains the string..). (Not ideal, but hard to change that design due to legacy issues)\nRecently that list has grown from ~2M to ~20M entries causing it to fail when constructing the map.</p>\n\n<p>First I got <code>OutOfMemoryError: Java heap space</code>.</p>\n\n<p>When I increased the heap size using the xms and xmx we ran into <code>GC overhead limit exceeded</code>.</p>\n\n<p>Runs on a Linux 64-bit machine with 15GB available memory and the following JVM args (I increased the RAM 10G->15G and the heap flags 6000M -> 9000M): </p>\n\n<p><code>-Xms9000M -Xmx9000M -XX:PermSize=512m -XX:MaxPermSize=2018m</code></p>\n\n<p>This binary does a whole lot of things and is serving live traffic so I can't afford it being occasionally stuck.</p>\n\n<p>Edit: I eventually went and did the obvious thing, which is fixing the code (change from HashMap to ImmutableSet) and adding more RAM (-Xmx11000M).</p>\n"},{"tags":["java","text","binary","out-of-memory","heap-memory"],"comments":[{"owner":{"account_id":1663234,"reputation":138406,"user_id":1531124,"accept_rate":96,"display_name":"GhostCat"},"score":0,"creation_date":1470040171,"post_id":38694077,"comment_id":64767046,"body_markdown":"That is kinda weird. And you are sure that there is no other code sitting around that you are not showing to us trying to open the whole file at once? Worst case: try using a profiler to understand where your memory is going to ...","body":"That is kinda weird. And you are sure that there is no other code sitting around that you are not showing to us trying to open the whole file at once? Worst case: try using a profiler to understand where your memory is going to ..."},{"owner":{"account_id":2269593,"reputation":43907,"user_id":1997376,"accept_rate":100,"display_name":"Nicolas Filotto"},"score":3,"creation_date":1470040883,"post_id":38694077,"comment_id":64767467,"body_markdown":"What do you want to achieve exactly? Here you get an OOME because you obviously load the entire file into memory which doesn&#39;t fit in the memory allocated to your JVM","body":"What do you want to achieve exactly? Here you get an OOME because you obviously load the entire file into memory which doesn&#39;t fit in the memory allocated to your JVM"},{"owner":{"account_id":1135767,"reputation":1478,"user_id":1120854,"display_name":"charlie"},"score":2,"creation_date":1470042265,"post_id":38694077,"comment_id":64768381,"body_markdown":"Are you by any chance reading a binary file? The lazily streamed `Files.lines ()` can be used only with text files, since the end of a line is determined by the platform-specific line separator. If you try to load a binary file this way, it might read all bytes up to the first end-of-line sequence, if it&#39;s present at all (provided a charset conversion error doesn&#39;t occur). Thus it might throw OoME on the very first line.","body":"Are you by any chance reading a binary file? The lazily streamed <code>Files.lines ()</code> can be used only with text files, since the end of a line is determined by the platform-specific line separator. If you try to load a binary file this way, it might read all bytes up to the first end-of-line sequence, if it&#39;s present at all (provided a charset conversion error doesn&#39;t occur). Thus it might throw OoME on the very first line."},{"owner":{"account_id":1664089,"reputation":1217,"user_id":1531855,"display_name":"borowis"},"score":0,"creation_date":1470046941,"post_id":38694077,"comment_id":64771136,"body_markdown":"Your second example is not working because you save the file to ByteArrayOutputStream and you don&#39;t have enough memory for that. If you use file output stream your 2nd example will most definitely work","body":"Your second example is not working because you save the file to ByteArrayOutputStream and you don&#39;t have enough memory for that. If you use file output stream your 2nd example will most definitely work"},{"owner":{"account_id":6357991,"reputation":197,"user_id":4934548,"accept_rate":0,"display_name":"giovandrea"},"score":0,"creation_date":1470053982,"post_id":38694077,"comment_id":64775287,"body_markdown":"I edited the question. Yes is a binary file","body":"I edited the question. Yes is a binary file"}],"answers":[{"tags":[],"owner":{"account_id":2621807,"reputation":302,"user_id":2269677,"accept_rate":62,"display_name":"MrElephant"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1470041084,"creation_date":1470040386,"answer_id":38694269,"question_id":38694077,"body_markdown":"Using JVM in 32-bit mode, the maximum heap size that can be allocated is 1280 MB. So, if you want to go beyond that, you need to invoke JVM in 64-mode.\r\n\r\nTry to use options for java execution:\r\n\r\nxms = min memory allocated\r\n        \r\nxmx = max memory allocated\r\n\r\n    JVM_ARGS=&quot;-d64 -Xms1024m -Xmx15360m &quot;\r\n    jdk1.X/bin/java $JVM_ARGS -jar myprogram.jar","title":"Trying to read some bytes from a big text file java","body":"<p>Using JVM in 32-bit mode, the maximum heap size that can be allocated is 1280 MB. So, if you want to go beyond that, you need to invoke JVM in 64-mode.</p>\n\n<p>Try to use options for java execution:</p>\n\n<p>xms = min memory allocated</p>\n\n<p>xmx = max memory allocated</p>\n\n<pre><code>JVM_ARGS=\"-d64 -Xms1024m -Xmx15360m \"\njdk1.X/bin/java $JVM_ARGS -jar myprogram.jar\n</code></pre>\n"}],"owner":{"account_id":6357991,"reputation":197,"user_id":4934548,"accept_rate":0,"display_name":"giovandrea"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":124,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1635425287,"creation_date":1470039782,"question_id":38694077,"body_markdown":"I need to read several bytes (say 1 MB, 2 MB...) from a 700MB file.\r\n\r\nI tried several approaches but in everyone of them I get:\r\n\r\n    Exception in thread &quot;main&quot; java.lang.OutOfMemoryError: Java heap space\r\n\r\nI tried using JDK 8 streams:\r\n\r\n    try (Stream&lt;String&gt; lines = Files.lines(Paths.get(&quot;myfilename&quot;),\r\n                                            Charset.defaultCharset())) {\r\n\t\tlines.forEachOrdered(line -&gt; doSomething(line));\r\n\t}\r\n\r\nand also using `InputStream` / `OutputStream`:\r\n\r\n    \tInputStream is = new FileInputStream(&quot;myfilename&quot;);\r\n\t\tByteArrayOutputStream result = new ByteArrayOutputStream();\r\n\t\tbyte[] buffer = new byte[1024];\r\n\t\tint length;\r\n\t\twhile ((length = is.read(buffer)) != -1) {\r\n\t\t    result.write(buffer, 0, length);\r\n\t\t}\r\n\t\tis.close();\r\n\t\treturn result.toString(&quot;UTF-8&quot;);\r\n\r\nIs there anything I am missing?\r\nThanks!\r\n\r\nYes, it is binary file. So this is the problem... how can I read a portion of it?","title":"Trying to read some bytes from a big text file java","body":"<p>I need to read several bytes (say 1 MB, 2 MB...) from a 700MB file.</p>\n\n<p>I tried several approaches but in everyone of them I get:</p>\n\n<pre><code>Exception in thread \"main\" java.lang.OutOfMemoryError: Java heap space\n</code></pre>\n\n<p>I tried using JDK 8 streams:</p>\n\n<pre><code>try (Stream&lt;String&gt; lines = Files.lines(Paths.get(\"myfilename\"),\n                                        Charset.defaultCharset())) {\n    lines.forEachOrdered(line -&gt; doSomething(line));\n}\n</code></pre>\n\n<p>and also using <code>InputStream</code> / <code>OutputStream</code>:</p>\n\n<pre><code>    InputStream is = new FileInputStream(\"myfilename\");\n    ByteArrayOutputStream result = new ByteArrayOutputStream();\n    byte[] buffer = new byte[1024];\n    int length;\n    while ((length = is.read(buffer)) != -1) {\n        result.write(buffer, 0, length);\n    }\n    is.close();\n    return result.toString(\"UTF-8\");\n</code></pre>\n\n<p>Is there anything I am missing?\nThanks!</p>\n\n<p>Yes, it is binary file. So this is the problem... how can I read a portion of it?</p>\n"},{"tags":["java","maven","out-of-memory","heap-memory"],"comments":[{"owner":{"account_id":6937666,"reputation":949,"user_id":5325086,"accept_rate":75,"display_name":"lenach87"},"score":1,"creation_date":1471121981,"post_id":38936801,"comment_id":65229870,"body_markdown":"Check the answer to this question - maybe it can help you http://stackoverflow.com/questions/4066424/java-lang-outofmemoryerror-java-heap-space-in-maven","body":"Check the answer to this question - maybe it can help you <a href=\"http://stackoverflow.com/questions/4066424/java-lang-outofmemoryerror-java-heap-space-in-maven\" title=\"java lang outofmemoryerror java heap space in maven\">stackoverflow.com/questions/4066424/&hellip;</a>"},{"owner":{"display_name":"user180100"},"score":1,"creation_date":1471122804,"post_id":38936801,"comment_id":65230025,"body_markdown":"can we see the maven output, my guess is that it&#39;s not a maven OOM but some plugin OOM (wild guess: surefire)","body":"can we see the maven output, my guess is that it&#39;s not a maven OOM but some plugin OOM (wild guess: surefire)"},{"owner":{"account_id":8490813,"reputation":3810,"user_id":6367213,"display_name":"Janez Kuhar"},"score":2,"creation_date":1471123969,"post_id":38936801,"comment_id":65230268,"body_markdown":"You&#39;ve ran your jvm with 4096 bytes = 4kB heap size - that&#39;s way too low. Try `-Xms4096M -Xmx4096M`","body":"You&#39;ve ran your jvm with 4096 bytes = 4kB heap size - that&#39;s way too low. Try <code>-Xms4096M -Xmx4096M</code>"},{"owner":{"account_id":6588868,"reputation":41,"user_id":5090804,"display_name":"jumboqwomqwom"},"score":0,"creation_date":1471155227,"post_id":38936801,"comment_id":65234637,"body_markdown":"@JanezKuhar Sorry that was a typo. I actually did have it as -Xmx4096m","body":"@JanezKuhar Sorry that was a typo. I actually did have it as -Xmx4096m"},{"owner":{"account_id":6588868,"reputation":41,"user_id":5090804,"display_name":"jumboqwomqwom"},"score":0,"creation_date":1471194705,"post_id":38936801,"comment_id":65244081,"body_markdown":"@RC I added the error message. Thanks in advance.","body":"@RC I added the error message. Thanks in advance."},{"owner":{"display_name":"user180100"},"score":0,"creation_date":1471197503,"post_id":38936801,"comment_id":65244990,"body_markdown":"Can we see `runClassifierOnTweets.java`, maybe you have some kind of infinite loop, AFAIK exec:java doesn&#39;t fork a process, so it&#39;s maven memory settings that are used.","body":"Can we see <code>runClassifierOnTweets.java</code>, maybe you have some kind of infinite loop, AFAIK exec:java doesn&#39;t fork a process, so it&#39;s maven memory settings that are used."},{"owner":{"account_id":6588868,"reputation":41,"user_id":5090804,"display_name":"jumboqwomqwom"},"score":0,"creation_date":1471204964,"post_id":38936801,"comment_id":65247117,"body_markdown":"@RC there&#39;s no infinite loop; the program works just fine on a smaller input file. The program does create a very, very large array, but if the program is actually running out of memory, why does it tell me that the final memory used is only 198M?","body":"@RC there&#39;s no infinite loop; the program works just fine on a smaller input file. The program does create a very, very large array, but if the program is actually running out of memory, why does it tell me that the final memory used is only 198M?"},{"owner":{"account_id":2606744,"reputation":733,"user_id":2257772,"display_name":"benbenw"},"score":0,"creation_date":1472988666,"post_id":38936801,"comment_id":65964910,"body_markdown":"When Maven reports the final memory, a gc might have collected the memory allocated by your code (with exec-maven-plugin:java). Try to execute your code outside of Maven and provide a heap dump.","body":"When Maven reports the final memory, a gc might have collected the memory allocated by your code (with exec-maven-plugin:java). Try to execute your code outside of Maven and provide a heap dump."},{"owner":{"account_id":6588868,"reputation":41,"user_id":5090804,"display_name":"jumboqwomqwom"},"score":0,"creation_date":1473098735,"post_id":38936801,"comment_id":66002700,"body_markdown":"@benbenw So that&#39;s why it only reported using 200MB? Thanks. Yeah, as it turned out, my program needed a lot more than 4 gigs to run.","body":"@benbenw So that&#39;s why it only reported using 200MB? Thanks. Yeah, as it turned out, my program needed a lot more than 4 gigs to run."}],"owner":{"account_id":6588868,"reputation":41,"user_id":5090804,"display_name":"jumboqwomqwom"},"comment_count":9,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":1137,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1635425273,"creation_date":1471120749,"question_id":38936801,"body_markdown":"I set MAVEN_OPTS -Xms4096m and -Xmx4096m to prevent my rather large program from running out of memory, but it still runs into &quot;OutOfMemoryError: Java heap space&quot;! I&#39;m trying to run it with more memory, but the weird thing is that the build failure message also shows &quot;Final Memory: 198M/3925M&quot;, implying that the program only used 198M even though I set the maximum much higher than that!\r\n\r\nDoes anybody know what is going on here?\r\n\r\nEDIT: Here is the error message.\r\n\r\n\r\n\r\n    [WARNING] \r\n    java.lang.reflect.InvocationTargetException\r\n\t    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n\t    at    sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\r\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n\tat java.lang.reflect.Method.invoke(Method.java:497)\r\n\tat org.codehaus.mojo.exec.ExecJavaMojo$1.run(ExecJavaMojo.java:293)\r\n\tat java.lang.Thread.run(Thread.java:745)\r\n    Caused by: java.lang.OutOfMemoryError: Java heap space\r\n\tat cc.mallet.types.SparseVector.&lt;init&gt;(SparseVector.java:84)\r\n\tat cc.mallet.types.SparseVector.&lt;init&gt;(SparseVector.java:101)\r\n\tat cc.mallet.types.SparseVector.&lt;init&gt;(SparseVector.java:104)\r\n\tat cc.mallet.types.FeatureVector.&lt;init&gt;(FeatureVector.java:75)\r\n\tat MaxEntClassification.addToInstanceList(MaxEntClassification.java:127)\r\n\tat MaxEntClassification.addToInstanceList(MaxEntClassification.java:100)\r\n\tat runClassifierOnTweets.main(runClassifierOnTweets.java:101)\r\n\t... 6 more\r\n    [INFO]     ------------------------------------------------------------------------  \r\n    [INFO] BUILD FAILURE  \r\n    [INFO] ------------------------------------------------------------------------  \r\n    [INFO] Total time: 01:38 h  \r\n    [INFO] Finished at: 2016-08-14T03:29:07-04:00  \r\n    [INFO] Final Memory: 199M/7173M  \r\n    [INFO]     ------------------------------------------------------------------------  \r\n    [ERROR] Failed to execute goal org.codehaus.mojo:exec-maven-plugin:1.4.0:java (default-cli) on project FluTweetsFeatureExtraction: An exception occured while executing the Java class. null: InvocationTargetException: Java heap space -&gt; [Help 1]  \r\n    org.apache.maven.lifecycle.LifecycleExecutionException: Failed to execute goal org.codehaus.mojo:exec-maven-plugin:1.4.0:java (default-cli) on project FluTweetsFeatureExtraction: An exception occured while executing the Java class. null  \r\n\tat org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:212)\r\n\tat org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:153)\r\n\tat org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:145)\r\n\tat org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject(LifecycleModuleBuilder.java:116)\r\n\tat org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject(LifecycleModuleBuilder.java:80)\r\n\tat org.apache.maven.lifecycle.internal.builder.singlethreaded.SingleThreadedBuilder.build(SingleThreadedBuilder.java:51)\r\n\tat org.apache.maven.lifecycle.internal.LifecycleStarter.execute(LifecycleStarter.java:128)\r\n\tat org.apache.maven.DefaultMaven.doExecute(DefaultMaven.java:307)\r\n\tat org.apache.maven.DefaultMaven.doExecute(DefaultMaven.java:193)\r\n\tat org.apache.maven.DefaultMaven.execute(DefaultMaven.java:106)\r\n\tat org.apache.maven.cli.MavenCli.execute(MavenCli.java:863)\r\n\tat org.apache.maven.cli.MavenCli.doMain(MavenCli.java:288)\r\n\tat org.apache.maven.cli.MavenCli.main(MavenCli.java:199)\r\n\tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n\tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\r\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n\tat java.lang.reflect.Method.invoke(Method.java:497)\r\n\tat org.codehaus.plexus.classworlds.launcher.Launcher.launchEnhanced(Launcher.java:289)\r\n\tat org.codehaus.plexus.classworlds.launcher.Launcher.launch(Launcher.java:229)\r\n\tat org.codehaus.plexus.classworlds.launcher.Launcher.mainWithExitCode(Launcher.java:415)\r\n\tat org.codehaus.plexus.classworlds.launcher.Launcher.main(Launcher.java:356)\r\n    Caused by: org.apache.maven.plugin.MojoExecutionException: An exception occured while executing the Java class. null\r\n\tat org.codehaus.mojo.exec.ExecJavaMojo.execute(ExecJavaMojo.java:345)\r\n\tat org.apache.maven.plugin.DefaultBuildPluginManager.executeMojo(DefaultBuildPluginManager.java:134)\r\n","title":"Getting Maven OutOfMemoryError, but Final Memory is only 198M/3925M?","body":"<p>I set MAVEN_OPTS -Xms4096m and -Xmx4096m to prevent my rather large program from running out of memory, but it still runs into \"OutOfMemoryError: Java heap space\"! I'm trying to run it with more memory, but the weird thing is that the build failure message also shows \"Final Memory: 198M/3925M\", implying that the program only used 198M even though I set the maximum much higher than that!</p>\n\n<p>Does anybody know what is going on here?</p>\n\n<p>EDIT: Here is the error message.</p>\n\n<pre><code>[WARNING] \njava.lang.reflect.InvocationTargetException\n    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n    at    sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\nat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\nat java.lang.reflect.Method.invoke(Method.java:497)\nat org.codehaus.mojo.exec.ExecJavaMojo$1.run(ExecJavaMojo.java:293)\nat java.lang.Thread.run(Thread.java:745)\nCaused by: java.lang.OutOfMemoryError: Java heap space\nat cc.mallet.types.SparseVector.&lt;init&gt;(SparseVector.java:84)\nat cc.mallet.types.SparseVector.&lt;init&gt;(SparseVector.java:101)\nat cc.mallet.types.SparseVector.&lt;init&gt;(SparseVector.java:104)\nat cc.mallet.types.FeatureVector.&lt;init&gt;(FeatureVector.java:75)\nat MaxEntClassification.addToInstanceList(MaxEntClassification.java:127)\nat MaxEntClassification.addToInstanceList(MaxEntClassification.java:100)\nat runClassifierOnTweets.main(runClassifierOnTweets.java:101)\n... 6 more\n[INFO]     ------------------------------------------------------------------------  \n[INFO] BUILD FAILURE  \n[INFO] ------------------------------------------------------------------------  \n[INFO] Total time: 01:38 h  \n[INFO] Finished at: 2016-08-14T03:29:07-04:00  \n[INFO] Final Memory: 199M/7173M  \n[INFO]     ------------------------------------------------------------------------  \n[ERROR] Failed to execute goal org.codehaus.mojo:exec-maven-plugin:1.4.0:java (default-cli) on project FluTweetsFeatureExtraction: An exception occured while executing the Java class. null: InvocationTargetException: Java heap space -&gt; [Help 1]  \norg.apache.maven.lifecycle.LifecycleExecutionException: Failed to execute goal org.codehaus.mojo:exec-maven-plugin:1.4.0:java (default-cli) on project FluTweetsFeatureExtraction: An exception occured while executing the Java class. null  \nat org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:212)\nat org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:153)\nat org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:145)\nat org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject(LifecycleModuleBuilder.java:116)\nat org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject(LifecycleModuleBuilder.java:80)\nat org.apache.maven.lifecycle.internal.builder.singlethreaded.SingleThreadedBuilder.build(SingleThreadedBuilder.java:51)\nat org.apache.maven.lifecycle.internal.LifecycleStarter.execute(LifecycleStarter.java:128)\nat org.apache.maven.DefaultMaven.doExecute(DefaultMaven.java:307)\nat org.apache.maven.DefaultMaven.doExecute(DefaultMaven.java:193)\nat org.apache.maven.DefaultMaven.execute(DefaultMaven.java:106)\nat org.apache.maven.cli.MavenCli.execute(MavenCli.java:863)\nat org.apache.maven.cli.MavenCli.doMain(MavenCli.java:288)\nat org.apache.maven.cli.MavenCli.main(MavenCli.java:199)\nat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\nat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\nat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\nat java.lang.reflect.Method.invoke(Method.java:497)\nat org.codehaus.plexus.classworlds.launcher.Launcher.launchEnhanced(Launcher.java:289)\nat org.codehaus.plexus.classworlds.launcher.Launcher.launch(Launcher.java:229)\nat org.codehaus.plexus.classworlds.launcher.Launcher.mainWithExitCode(Launcher.java:415)\nat org.codehaus.plexus.classworlds.launcher.Launcher.main(Launcher.java:356)\nCaused by: org.apache.maven.plugin.MojoExecutionException: An exception occured while executing the Java class. null\nat org.codehaus.mojo.exec.ExecJavaMojo.execute(ExecJavaMojo.java:345)\nat org.apache.maven.plugin.DefaultBuildPluginManager.executeMojo(DefaultBuildPluginManager.java:134)\n</code></pre>\n"},{"tags":["java","regex","replace","out-of-memory","heap-memory"],"comments":[{"owner":{"account_id":4739783,"reputation":612585,"user_id":3832970,"display_name":"Wiktor Stribiżew"},"score":4,"creation_date":1484218428,"post_id":41611218,"comment_id":70423909,"body_markdown":"A usual issue in Java when you use inefficient regex patterns with alternations. Use the regex from [Regex to match a C-style multiline comment](http://stackoverflow.com/a/36328890/3832970). BTW, there is no point to duplicate patterns inside one pattern: `/\\*([\\S\\s]+?)\\*/` matches the same text as `(?s)/\\*.*?\\*/`","body":"A usual issue in Java when you use inefficient regex patterns with alternations. Use the regex from <a href=\"http://stackoverflow.com/a/36328890/3832970\">Regex to match a C-style multiline comment</a>. BTW, there is no point to duplicate patterns inside one pattern: <code>&#47;\\*([\\S\\s]+?)\\*&#47;</code> matches the same text as <code>(?s)&#47;\\*.*?\\*&#47;</code>"}],"answers":[{"tags":[],"owner":{"account_id":4150940,"reputation":241,"user_id":3403420,"display_name":"radoslaw.jarzynka"},"down_vote_count":1,"up_vote_count":2,"is_accepted":false,"score":1,"last_activity_date":1572104393,"creation_date":1484218881,"answer_id":41611459,"question_id":41611218,"body_markdown":"Probably Java does not allocate enough memory for your app. You can try to increase initial and maximum memory allocated by using `-Xmx` and `-Xms` flags, for example:\r\n\r\n    java -Xmx2048m -Xms512m yourApp\r\n\r\nAdjust these parameters so application does not crush.\r\n\r\nYou can see all possible parameters by running `java -X`\r\n\r\nIf changing allocated memory does not help, try creating a heap dump using `jmap -heap:format=b &lt;process-id&gt;` while your application is running. Then open it in some kind of memory analyzer (for example http://www.eclipse.org/mat/). Maybe there are some memory leaks in other parts of the code. This will detect them.","title":"Java OutOfMemoryError caused by ReplaceAll regex","body":"<p>Probably Java does not allocate enough memory for your app. You can try to increase initial and maximum memory allocated by using <code>-Xmx</code> and <code>-Xms</code> flags, for example:</p>\n\n<pre><code>java -Xmx2048m -Xms512m yourApp\n</code></pre>\n\n<p>Adjust these parameters so application does not crush.</p>\n\n<p>You can see all possible parameters by running <code>java -X</code></p>\n\n<p>If changing allocated memory does not help, try creating a heap dump using <code>jmap -heap:format=b &lt;process-id&gt;</code> while your application is running. Then open it in some kind of memory analyzer (for example <a href=\"http://www.eclipse.org/mat/\" rel=\"nofollow noreferrer\">http://www.eclipse.org/mat/</a>). Maybe there are some memory leaks in other parts of the code. This will detect them.</p>\n"},{"tags":[],"owner":{"account_id":365271,"reputation":30295,"user_id":710099,"accept_rate":79,"display_name":"Federico Piazza"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1484223480,"creation_date":1484222324,"answer_id":41612691,"question_id":41611218,"body_markdown":"I think this is more like a big comment than a answer, but posting as answer since it&#39;s richer for formatting.\r\n\r\nYour regex has not a good performance which might be causing such a big memory error. For instance, this is the diagram your regex has:\r\n\r\n[![enter image description here][1]][1]\r\n\r\nWhat I understand from this is that you just want to get rid of block comments. So, there are different problems in your regex, the most important is that you have different patterns to do exactly the same, therefore you should just use one of them, by doing that you can get rid of capturing groups and alternations and just use of them like:\r\n\r\n    \\/\\*[\\S\\s]+?\\*\\/&quot;.   &lt;--- I removed the capturing group to make it more efficient, since you didn&#39;t need it\r\n    or \r\n    (?s)/\\*.*?\\*/&quot;.\r\n\r\n[![enter image description here][2]][2]\r\n\r\nAs you can see, the regex pattern is much more efficient, it doesn&#39;t have 2 patterns, nor 2 capturing groups nor the alternation that are very expensive.\r\n\r\nAnyway, if you don&#39;t need java, then I think there are much better tools to perform these replaces like `sed` with `-i` flag (replace in place) \r\n\r\nHowever, if you still want to use your regex, then you can improve by removing the un-needed capturing group and transforming the capturing one into non-capturing group like this:\r\n\r\n    (?:\\/\\*[\\S\\s]+?\\*\\/|(?s)/\\*.*?\\*/)&quot;. \r\n\r\n\r\n  [1]: https://i.stack.imgur.com/a6zkJ.png\r\n  [2]: https://i.stack.imgur.com/PUfR9.png","title":"Java OutOfMemoryError caused by ReplaceAll regex","body":"<p>I think this is more like a big comment than a answer, but posting as answer since it's richer for formatting.</p>\n\n<p>Your regex has not a good performance which might be causing such a big memory error. For instance, this is the diagram your regex has:</p>\n\n<p><a href=\"https://i.stack.imgur.com/a6zkJ.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/a6zkJ.png\" alt=\"enter image description here\"></a></p>\n\n<p>What I understand from this is that you just want to get rid of block comments. So, there are different problems in your regex, the most important is that you have different patterns to do exactly the same, therefore you should just use one of them, by doing that you can get rid of capturing groups and alternations and just use of them like:</p>\n\n<pre><code>\\/\\*[\\S\\s]+?\\*\\/\".   &lt;--- I removed the capturing group to make it more efficient, since you didn't need it\nor \n(?s)/\\*.*?\\*/\".\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/PUfR9.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/PUfR9.png\" alt=\"enter image description here\"></a></p>\n\n<p>As you can see, the regex pattern is much more efficient, it doesn't have 2 patterns, nor 2 capturing groups nor the alternation that are very expensive.</p>\n\n<p>Anyway, if you don't need java, then I think there are much better tools to perform these replaces like <code>sed</code> with <code>-i</code> flag (replace in place) </p>\n\n<p>However, if you still want to use your regex, then you can improve by removing the un-needed capturing group and transforming the capturing one into non-capturing group like this:</p>\n\n<pre><code>(?:\\/\\*[\\S\\s]+?\\*\\/|(?s)/\\*.*?\\*/)\". \n</code></pre>\n"}],"owner":{"account_id":1481132,"reputation":183,"user_id":1390504,"accept_rate":82,"display_name":"user1390504"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2452,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":41612691,"answer_count":2,"score":1,"last_activity_date":1635425260,"creation_date":1484218205,"question_id":41611218,"body_markdown":"I am doing an analysis on a rather large scale (1000&#39;s of projects) for which I am extracting test framework usage from source code (e.g. detecting assertEquals to measure assert density). For this, I do not want to take into account any statements that have been commented out. In order to do this, I have the following method:\r\n\r\n    public static CharSequence replaceAllRegexInFile(CharSequence input, String regex) {\r\n        if (regex == null || input == null) {\r\n            return input;\r\n        }\r\n        Pattern pattern = Pattern.compile(regex);\r\n        return pattern.matcher(input).replaceAll(&quot;&quot;);\r\n    }\r\n\r\nI am running this method with the following regex to replace Java comments : \r\n\r\n\t(\\/\\*([\\S\\s]+?)\\*\\/|(?s)/\\*.*?\\*/)&quot;. \r\n\r\nI am well aware that replaceAll is allocating a lot of intermediate results while aggregating and returning the final result. Surely, I could resort to using replace, but this will not allow me to use a regex for replacing the comments. \r\n\r\nI get why the heapspace error is thrown, especially since I am streaming all files and all projects concurrently over my entire machine. Surely this is using a lot of resources, but I am unable to find an alternative solution for my problem since the regex replacement is definitelly a requirement.\r\n\r\nAny suggestions would be greatly appreciated.\r\n\r\nYou can find the stacktrace below:\r\n\r\n    Exception in thread &quot;main&quot; java.lang.OutOfMemoryError\r\n\t  at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)\r\n\t  at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:62)\r\n\t  at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45)\r\n\t  at java.lang.reflect.Constructor.newInstance(Constructor.java:423)\r\n\t  at java.util.concurrent.ForkJoinTask.getThrowableException(ForkJoinTask.java:598)\r\n\t  at java.util.concurrent.ForkJoinTask.reportException(ForkJoinTask.java:677)\r\n\t  at java.util.concurrent.ForkJoinTask.invoke(ForkJoinTask.java:735)\r\n\t  at java.util.stream.ReduceOps$ReduceOp.evaluateParallel(ReduceOps.java:714)\r\n\t  at java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:233)\r\n\t  at java.util.stream.ReferencePipeline.collect(ReferencePipeline.java:499)\r\n\t  at AnalysisRunner.startAnalysis(AnalysisRunner.java:33)\r\n\t  at AnalysisRunner.main(AnalysisRunner.java:26) \r\n\tCaused by: java.lang.OutOfMemoryError: Java heap space\r\n\t  at java.util.Arrays.copyOf(Arrays.java:3332)\r\n\t  at java.lang.AbstractStringBuilder.ensureCapacityInternal(AbstractStringBuilder.java:124)\r\n\t  at java.lang.AbstractStringBuilder.append(AbstractStringBuilder.java:541)\r\n\t  at java.lang.StringBuffer.append(StringBuffer.java:350)\r\n\t  at java.util.regex.Matcher.appendReplacement(Matcher.java:888)\r\n\t  at java.util.regex.Matcher.replaceAll(Matcher.java:955)\r\n\t  at Business.RegexService.replaceAllRegexInFile(RegexService.java:64)\r\n\t  at Business.FrameWorkDetectionService.extractAllResultsForFile(FrameWorkDetectionService.java:58)\r\n\t  at Business.FrameWorkDetectionService.lambda$extractFrameworkDependencies$0(FrameWorkDetectionService.java:39)\r\n\t  at Business.FrameWorkDetectionService$$Lambda$19/1175339539.apply(Unknown Source)\r\n\t  at java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:193)\r\n\t  at java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1374)\r\n\t  at java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:481)\r\n\t  at java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:471)\r\n\t  at java.util.stream.ReduceOps$ReduceTask.doLeaf(ReduceOps.java:747)\r\n\t  at java.util.stream.ReduceOps$ReduceTask.doLeaf(ReduceOps.java:721)\r\n\t  at java.util.stream.AbstractTask.compute(AbstractTask.java:316)\r\n\t  at java.util.concurrent.CountedCompleter.exec(CountedCompleter.java:731)\r\n\t  at java.util.concurrent.ForkJoinTask.doExec(ForkJoinTask.java:289)\r\n\t  at java.util.concurrent.ForkJoinPool.helpComplete(ForkJoinPool.java:1870)\r\n\t  at java.util.concurrent.ForkJoinPool.awaitJoin(ForkJoinPool.java:2045)\r\n\t  at java.util.concurrent.ForkJoinTask.doInvoke(ForkJoinTask.java:404)\r\n\t  at java.util.concurrent.ForkJoinTask.invoke(ForkJoinTask.java:734)\r\n\t  at java.util.stream.ReduceOps$ReduceOp.evaluateParallel(ReduceOps.java:714)\r\n\t  at java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:233)\r\n\t  at java.util.stream.ReferencePipeline.collect(ReferencePipeline.java:499)\r\n\t  at Business.FrameWorkDetectionService.extractFrameworkDependencies(FrameWorkDetectionService.java:39)\r\n\t  at Business.FrameWorkDetectionService.detectFrameworks(FrameWorkDetectionService.java:26)\r\n\t  at Business.FrameworkService.projectResults(FrameworkService.java:59)\r\n\t  at AnalysisRunner$$Lambda$13/1712669532.apply(Unknown Source)\r\n\t  at java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:193)\r\n\t  at java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:175)\r\n\r\n\r\nIs there an alternative solution that will not allocate this much heap space that will still allow me to replace all comments in a lot of files concurrently?\r\n\r\nAny help is greatly appreciated!","title":"Java OutOfMemoryError caused by ReplaceAll regex","body":"<p>I am doing an analysis on a rather large scale (1000's of projects) for which I am extracting test framework usage from source code (e.g. detecting assertEquals to measure assert density). For this, I do not want to take into account any statements that have been commented out. In order to do this, I have the following method:</p>\n\n<pre><code>public static CharSequence replaceAllRegexInFile(CharSequence input, String regex) {\n    if (regex == null || input == null) {\n        return input;\n    }\n    Pattern pattern = Pattern.compile(regex);\n    return pattern.matcher(input).replaceAll(\"\");\n}\n</code></pre>\n\n<p>I am running this method with the following regex to replace Java comments : </p>\n\n<pre><code>(\\/\\*([\\S\\s]+?)\\*\\/|(?s)/\\*.*?\\*/)\". \n</code></pre>\n\n<p>I am well aware that replaceAll is allocating a lot of intermediate results while aggregating and returning the final result. Surely, I could resort to using replace, but this will not allow me to use a regex for replacing the comments. </p>\n\n<p>I get why the heapspace error is thrown, especially since I am streaming all files and all projects concurrently over my entire machine. Surely this is using a lot of resources, but I am unable to find an alternative solution for my problem since the regex replacement is definitelly a requirement.</p>\n\n<p>Any suggestions would be greatly appreciated.</p>\n\n<p>You can find the stacktrace below:</p>\n\n<pre><code>Exception in thread \"main\" java.lang.OutOfMemoryError\n  at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)\n  at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:62)\n  at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45)\n  at java.lang.reflect.Constructor.newInstance(Constructor.java:423)\n  at java.util.concurrent.ForkJoinTask.getThrowableException(ForkJoinTask.java:598)\n  at java.util.concurrent.ForkJoinTask.reportException(ForkJoinTask.java:677)\n  at java.util.concurrent.ForkJoinTask.invoke(ForkJoinTask.java:735)\n  at java.util.stream.ReduceOps$ReduceOp.evaluateParallel(ReduceOps.java:714)\n  at java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:233)\n  at java.util.stream.ReferencePipeline.collect(ReferencePipeline.java:499)\n  at AnalysisRunner.startAnalysis(AnalysisRunner.java:33)\n  at AnalysisRunner.main(AnalysisRunner.java:26) \nCaused by: java.lang.OutOfMemoryError: Java heap space\n  at java.util.Arrays.copyOf(Arrays.java:3332)\n  at java.lang.AbstractStringBuilder.ensureCapacityInternal(AbstractStringBuilder.java:124)\n  at java.lang.AbstractStringBuilder.append(AbstractStringBuilder.java:541)\n  at java.lang.StringBuffer.append(StringBuffer.java:350)\n  at java.util.regex.Matcher.appendReplacement(Matcher.java:888)\n  at java.util.regex.Matcher.replaceAll(Matcher.java:955)\n  at Business.RegexService.replaceAllRegexInFile(RegexService.java:64)\n  at Business.FrameWorkDetectionService.extractAllResultsForFile(FrameWorkDetectionService.java:58)\n  at Business.FrameWorkDetectionService.lambda$extractFrameworkDependencies$0(FrameWorkDetectionService.java:39)\n  at Business.FrameWorkDetectionService$$Lambda$19/1175339539.apply(Unknown Source)\n  at java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:193)\n  at java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1374)\n  at java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:481)\n  at java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:471)\n  at java.util.stream.ReduceOps$ReduceTask.doLeaf(ReduceOps.java:747)\n  at java.util.stream.ReduceOps$ReduceTask.doLeaf(ReduceOps.java:721)\n  at java.util.stream.AbstractTask.compute(AbstractTask.java:316)\n  at java.util.concurrent.CountedCompleter.exec(CountedCompleter.java:731)\n  at java.util.concurrent.ForkJoinTask.doExec(ForkJoinTask.java:289)\n  at java.util.concurrent.ForkJoinPool.helpComplete(ForkJoinPool.java:1870)\n  at java.util.concurrent.ForkJoinPool.awaitJoin(ForkJoinPool.java:2045)\n  at java.util.concurrent.ForkJoinTask.doInvoke(ForkJoinTask.java:404)\n  at java.util.concurrent.ForkJoinTask.invoke(ForkJoinTask.java:734)\n  at java.util.stream.ReduceOps$ReduceOp.evaluateParallel(ReduceOps.java:714)\n  at java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:233)\n  at java.util.stream.ReferencePipeline.collect(ReferencePipeline.java:499)\n  at Business.FrameWorkDetectionService.extractFrameworkDependencies(FrameWorkDetectionService.java:39)\n  at Business.FrameWorkDetectionService.detectFrameworks(FrameWorkDetectionService.java:26)\n  at Business.FrameworkService.projectResults(FrameworkService.java:59)\n  at AnalysisRunner$$Lambda$13/1712669532.apply(Unknown Source)\n  at java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:193)\n  at java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:175)\n</code></pre>\n\n<p>Is there an alternative solution that will not allocate this much heap space that will still allow me to replace all comments in a lot of files concurrently?</p>\n\n<p>Any help is greatly appreciated!</p>\n"},{"tags":["java","file","out-of-memory","heap-memory"],"comments":[{"owner":{"account_id":1597725,"reputation":34231,"user_id":1479414,"accept_rate":71,"display_name":"Andremoniy"},"score":5,"creation_date":1485779568,"post_id":41936002,"comment_id":71052238,"body_markdown":"I&#39;m quite surprised to see such bad-formulated question from such respectable and high-scored user as you","body":"I&#39;m quite surprised to see such bad-formulated question from such respectable and high-scored user as you"},{"owner":{"account_id":5531638,"reputation":14395,"user_id":4391450,"display_name":"AxelH"},"score":0,"creation_date":1485779634,"post_id":41936002,"comment_id":71052300,"body_markdown":"What is the size of this file (in MB)? Are you storing anything on each iteration ?","body":"What is the size of this file (in MB)? Are you storing anything on each iteration ?"},{"owner":{"account_id":1597725,"reputation":34231,"user_id":1479414,"accept_rate":71,"display_name":"Andremoniy"},"score":1,"creation_date":1485779634,"post_id":41936002,"comment_id":71052301,"body_markdown":"Ok, what is absent - is those lines of code where you are executing DB queries, it is essential","body":"Ok, what is absent - is those lines of code where you are executing DB queries, it is essential"},{"owner":{"account_id":902001,"reputation":39942,"user_id":937892,"accept_rate":63,"display_name":"PSR"},"score":0,"creation_date":1485779640,"post_id":41936002,"comment_id":71052303,"body_markdown":"I was trying with so many solutions.So I posted in SO","body":"I was trying with so many solutions.So I posted in SO"},{"owner":{"account_id":113908,"reputation":3110,"user_id":299787,"display_name":"Redlab"},"score":0,"creation_date":1485779723,"post_id":41936002,"comment_id":71052342,"body_markdown":"Seems to me you are keeping al your read data in memory. But without more code it&#39;s hard for us define exactly where. Could be your prepared statement code or in TINDetailsVO or ...","body":"Seems to me you are keeping al your read data in memory. But without more code it&#39;s hard for us define exactly where. Could be your prepared statement code or in TINDetailsVO or ..."},{"owner":{"account_id":2836054,"reputation":11480,"user_id":2436655,"display_name":"pzaenger"},"score":0,"creation_date":1485779775,"post_id":41936002,"comment_id":71052381,"body_markdown":"`var4 = var4 != var4 ? var4.trim() : var4;` should be `var4 = var4 != null ? var4.trim() : var4;`, shouldn&#39;t it?","body":"<code>var4 = var4 != var4 ? var4.trim() : var4;</code> should be <code>var4 = var4 != null ? var4.trim() : var4;</code>, shouldn&#39;t it?"},{"owner":{"account_id":5531638,"reputation":14395,"user_id":4391450,"display_name":"AxelH"},"score":0,"creation_date":1485779869,"post_id":41936002,"comment_id":71052437,"body_markdown":"Could you correct the indentation of you code, removing what is not necessary and show what is? This would be helpful (You should use try-with resource too)","body":"Could you correct the indentation of you code, removing what is not necessary and show what is? This would be helpful (You should use try-with resource too)"},{"owner":{"account_id":16878,"reputation":306143,"user_id":37213,"accept_rate":81,"display_name":"duffymo"},"score":0,"creation_date":1485780041,"post_id":41936002,"comment_id":71052551,"body_markdown":"The problem won&#39;t just be in your memory - Oracle itself will be creating a large rollback segment.  If you must do it this way you should be breaking it up into smaller chunks and committing each one.  A better solution would be to not use Java at all.  Use database tools to move data.","body":"The problem won&#39;t just be in your memory - Oracle itself will be creating a large rollback segment.  If you must do it this way you should be breaking it up into smaller chunks and committing each one.  A better solution would be to not use Java at all.  Use database tools to move data."},{"owner":{"account_id":536567,"reputation":7838,"user_id":905488,"display_name":"Mick Mnemonic"},"score":0,"creation_date":1485780210,"post_id":41936002,"comment_id":71052663,"body_markdown":"Consider using [Oracle&#39;s SQL*Loader](https://docs.oracle.com/cd/B19306_01/server.102/b14215/ldr_concepts.htm) utility for importing the data.","body":"Consider using <a href=\"https://docs.oracle.com/cd/B19306_01/server.102/b14215/ldr_concepts.htm\" rel=\"nofollow noreferrer\">Oracle&#39;s SQL*Loader</a> utility for importing the data."},{"owner":{"account_id":902001,"reputation":39942,"user_id":937892,"accept_rate":63,"display_name":"PSR"},"score":0,"creation_date":1485789733,"post_id":41936002,"comment_id":71059082,"body_markdown":"@duffymo while using JDBC by default autocommit is true.Even then also am I need to take in chunks","body":"@duffymo while using JDBC by default autocommit is true.Even then also am I need to take in chunks"},{"owner":{"account_id":16878,"reputation":306143,"user_id":37213,"accept_rate":81,"display_name":"duffymo"},"score":0,"creation_date":1485789809,"post_id":41936002,"comment_id":71059134,"body_markdown":"Right, it&#39;s up to you to implement transactional behavior.","body":"Right, it&#39;s up to you to implement transactional behavior."},{"owner":{"account_id":902001,"reputation":39942,"user_id":937892,"accept_rate":63,"display_name":"PSR"},"score":0,"creation_date":1485789972,"post_id":41936002,"comment_id":71059249,"body_markdown":"@duffymo Actually I have to get record from DB which matched to Id, then need to update .Can you pls tell me what exactly you are saying ?.Committing for each N no of records will solve my problem ?","body":"@duffymo Actually I have to get record from DB which matched to Id, then need to update .Can you pls tell me what exactly you are saying ?.Committing for each N no of records will solve my problem ?"},{"owner":{"account_id":16878,"reputation":306143,"user_id":37213,"accept_rate":81,"display_name":"duffymo"},"score":0,"creation_date":1485790170,"post_id":41936002,"comment_id":71059379,"body_markdown":"A better solution would be to leave Java out of it altogether and to use database tools.  If you must persist with Java, you need to break the problem into smaller chunks.  Try 1000 records at a time.","body":"A better solution would be to leave Java out of it altogether and to use database tools.  If you must persist with Java, you need to break the problem into smaller chunks.  Try 1000 records at a time."},{"owner":{"account_id":902001,"reputation":39942,"user_id":937892,"accept_rate":63,"display_name":"PSR"},"score":0,"creation_date":1485790246,"post_id":41936002,"comment_id":71059431,"body_markdown":"Actually in our current project we have to do it in java only","body":"Actually in our current project we have to do it in java only"}],"answers":[{"tags":[],"owner":{"account_id":1597725,"reputation":34231,"user_id":1479414,"accept_rate":71,"display_name":"Andremoniy"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1485779695,"creation_date":1485779695,"answer_id":41936088,"question_id":41936002,"body_markdown":"Generally you have to flush your DB session each N rows, because instead all data for DB execution will be stored in your memory until you will flush or commit it. \r\n\r\nBut because of very bad-formulated question (most essential part of codes omitted) I can not advice you more.\r\n","title":"Exception in thread &quot;main&quot; java.lang.OutOfMemoryError: Java heap space at oracle.jdbc.driver.OracleSql.&lt;init&gt;","body":"<p>Generally you have to flush your DB session each N rows, because instead all data for DB execution will be stored in your memory until you will flush or commit it. </p>\n\n<p>But because of very bad-formulated question (most essential part of codes omitted) I can not advice you more.</p>\n"}],"owner":{"account_id":902001,"reputation":39942,"user_id":937892,"accept_rate":63,"display_name":"PSR"},"comment_count":14,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":663,"favorite_count":0,"down_vote_count":3,"up_vote_count":0,"answer_count":1,"score":-3,"last_activity_date":1635425240,"creation_date":1485779415,"question_id":41936002,"body_markdown":"I am loading a file from disk , it contains 9,00,000 records.I am reading file line by line and processing it then setting to a java object.For each record the below code is executing(It will execute one insert,one update and one select query)\r\n    \r\n              try\r\n\t\t\t  {\r\n\t\t\t\t\r\n\t\t\t\tif(conn != null)\r\n\t\t\t\t{\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t selectPrepareStatement.setString(1, someValue);\r\n\t\t\t\t\t selectPrepareStatement.setMaxRows(1); \r\n\t\t\t\t\t\r\n\t\t\t\t\t rs = selectPrepareStatement.executeQuery();\r\n\t\t\t\t\t String secondaryCIF = null;\r\n\t\t\t\t\t insertPreparedStatement.setInt(1, vo.getRecordType());\r\n\t\t\t\t\t insertPreparedStatement.setString(2, vo.getRefType());\r\n\t\t\t\t\t insertPreparedStatement.setString(3, vo.getCustOwnershipType());\r\n\t\t\t\t\t insertPreparedStatement.setString(4, vo.getTin());\r\n\t\t\t\t\t insertPreparedStatement.setString(5, vo.getCifId());\r\n\t\t\t\t\t insertPreparedStatement.setString(6, vo.getPrimaryOrSecondary());\r\n\t\t\t\t\t \r\n\t\t\t\t\tStatement statement =  conn.createStatement();\r\n\t\t\t\t\r\n\t\t\t\t\t\t if(vo.getPrimaryOrSecondary().equals(&quot;P&quot;))\r\n\t\t\t\t\t\t {\r\n\t\t\t\t\t\t\t updatedCount = statement.executeUpdate(&quot;update table_name set col1=&#39;&quot;+value1+&quot;&#39; where col2= &#39;&quot;+value2)+&quot;&#39;&quot;);\t\t\t\t\t\t \r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t updatedCount = statement.executeUpdate();\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t }else if(vo.getPrimaryOrSecondary().equals(&quot;S&quot;))\r\n\t\t\t\t\t\t {\r\n\t\t\t\t\t\t\t    updatedCount = statement.executeUpdate(&quot;update table_name set col3=&#39;&quot;+value3+&quot;&#39; where CUST_CIN = &#39;&quot;+value1+&quot;&#39;&quot;);\r\n\t\t\t\t\t\t\t\tupdatedCount = statement.executeUpdate();\r\n\t\t\t\t\t\t}\t\t\t\t \r\n\t\t\t\t\t \r\n\t\t\t\t\t \r\n\t\t\t\t\t insertPreparedStatement.setInt(8, updatedCount);\r\n\t\t\t\t\t insertPreparedStatement.setString(9, null);\r\n\t\t\t\t\t\r\n\t\t\t\t\tinsertPreparedStatement.executeUpdate();\r\n\t\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\t if(rs != null)\r\n\t\t\t\t {\r\n\t\t\t\t\t rs.close();\r\n\t\t\t\t }\t\t\t\t\r\n\t\t\t\t\r\n\t\t\t}catch(Exception e)\r\n\t\t\t{\r\n\t\t\t\t\r\n\t\t\t}\r\n\r\nIf I increase heap space to 1GB , then getting error after 3,00,000 records.Can some one please help me on this ?\r\n\r\nAll preparedstatements and variable are declared as global and static.","title":"Exception in thread &quot;main&quot; java.lang.OutOfMemoryError: Java heap space at oracle.jdbc.driver.OracleSql.&lt;init&gt;","body":"<p>I am loading a file from disk , it contains 9,00,000 records.I am reading file line by line and processing it then setting to a java object.For each record the below code is executing(It will execute one insert,one update and one select query)</p>\n\n<pre><code>          try\n          {\n\n            if(conn != null)\n            {\n\n                 selectPrepareStatement.setString(1, someValue);\n                 selectPrepareStatement.setMaxRows(1); \n\n                 rs = selectPrepareStatement.executeQuery();\n                 String secondaryCIF = null;\n                 insertPreparedStatement.setInt(1, vo.getRecordType());\n                 insertPreparedStatement.setString(2, vo.getRefType());\n                 insertPreparedStatement.setString(3, vo.getCustOwnershipType());\n                 insertPreparedStatement.setString(4, vo.getTin());\n                 insertPreparedStatement.setString(5, vo.getCifId());\n                 insertPreparedStatement.setString(6, vo.getPrimaryOrSecondary());\n\n                Statement statement =  conn.createStatement();\n\n                     if(vo.getPrimaryOrSecondary().equals(\"P\"))\n                     {\n                         updatedCount = statement.executeUpdate(\"update table_name set col1='\"+value1+\"' where col2= '\"+value2)+\"'\");                        \n\n                         updatedCount = statement.executeUpdate();\n\n                     }else if(vo.getPrimaryOrSecondary().equals(\"S\"))\n                     {\n                            updatedCount = statement.executeUpdate(\"update table_name set col3='\"+value3+\"' where CUST_CIN = '\"+value1+\"'\");\n                            updatedCount = statement.executeUpdate();\n                    }                \n\n\n                 insertPreparedStatement.setInt(8, updatedCount);\n                 insertPreparedStatement.setString(9, null);\n\n                insertPreparedStatement.executeUpdate();\n                }\n\n             if(rs != null)\n             {\n                 rs.close();\n             }              \n\n        }catch(Exception e)\n        {\n\n        }\n</code></pre>\n\n<p>If I increase heap space to 1GB , then getting error after 3,00,000 records.Can some one please help me on this ?</p>\n\n<p>All preparedstatements and variable are declared as global and static.</p>\n"},{"tags":["java","mysql","hibernate","out-of-memory","heap-memory"],"comments":[{"owner":{"account_id":1938802,"reputation":12091,"user_id":1745544,"accept_rate":23,"display_name":"OldProgrammer"},"score":0,"creation_date":1492018662,"post_id":43376102,"comment_id":73814520,"body_markdown":"You are running a 64-bit jvm?","body":"You are running a 64-bit jvm?"},{"owner":{"account_id":60171,"reputation":115485,"user_id":179850,"accept_rate":100,"display_name":"Gray"},"score":0,"creation_date":1492021703,"post_id":43376102,"comment_id":73816147,"body_markdown":"The same command in phymyadmin loads 150+mb in a second from a database?  Maybe that&#39;s just the count of them?","body":"The same command in phymyadmin loads 150+mb in a second from a database?  Maybe that&#39;s just the count of them?"},{"owner":{"account_id":1056871,"reputation":117729,"user_id":1059372,"accept_rate":97,"display_name":"Eugene"},"score":0,"creation_date":1492021862,"post_id":43376102,"comment_id":73816236,"body_markdown":"@Gray unless you `need` userId to sometimes be null. I was in these shoes. But otherwise yes, totally agree","body":"@Gray unless you <code>need</code> userId to sometimes be null. I was in these shoes. But otherwise yes, totally agree"},{"owner":{"account_id":60171,"reputation":115485,"user_id":179850,"accept_rate":100,"display_name":"Gray"},"score":0,"creation_date":1492022080,"post_id":43376102,"comment_id":73816350,"body_markdown":"It&#39;s `nullable = false` @Eugene.","body":"It&#39;s <code>nullable = false</code> @Eugene."},{"owner":{"account_id":1056871,"reputation":117729,"user_id":1059372,"accept_rate":97,"display_name":"Eugene"},"score":0,"creation_date":1492022854,"post_id":43376102,"comment_id":73816823,"body_markdown":"@Gray silly me. thx","body":"@Gray silly me. thx"}],"answers":[{"tags":[],"owner":{"account_id":4942701,"reputation":665,"user_id":3978990,"display_name":"Vladimir Parfenov"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1492019238,"creation_date":1492019238,"answer_id":43376324,"question_id":43376102,"body_markdown":"You can increase heap size like this: https://stackoverflow.com/a/6452812/3978990\r\n\r\nOr paginate data from database and process data by parts. ","title":"Hibernate out of memory for Query 128MB","body":"<p>You can increase heap size like this: <a href=\"https://stackoverflow.com/a/6452812/3978990\">https://stackoverflow.com/a/6452812/3978990</a></p>\n\n<p>Or paginate data from database and process data by parts. </p>\n"},{"tags":[],"owner":{"account_id":1056871,"reputation":117729,"user_id":1059372,"accept_rate":97,"display_name":"Eugene"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1492021542,"creation_date":1492019722,"answer_id":43376459,"question_id":43376102,"body_markdown":"Well for roughly `3_300_000`  `Register` objects you are going to get around `160MB` **just for the 2 headers** of those Objects(Register itself, Long, Date and RegisterType); not even talking about their internals - that is already more then postgres reports; so yes you will use quite a lot of heap space. \r\n\r\nLooks like Hibernate puts those entries in a `Map` for whatever reason, that means it wraps some instances in a `LinkedNode` or `TreeNode`, those have a `Key` and a `Value`, that is *at least* more `160MB` just for the headers and so on... \r\n\r\nYou could measure how much *exactly* each Object would take via `jol` for example; but that will not give you anything - you are still going to fail with an `OutOfMemory`. I would first think about *why do I need* close to 3.5 million entries in memory first; if there is a compelling reason for that I would try to go with something lower the Hibernate.\r\n\r\n ","title":"Hibernate out of memory for Query 128MB","body":"<p>Well for roughly <code>3_300_000</code>  <code>Register</code> objects you are going to get around <code>160MB</code> <strong>just for the 2 headers</strong> of those Objects(Register itself, Long, Date and RegisterType); not even talking about their internals - that is already more then postgres reports; so yes you will use quite a lot of heap space. </p>\n\n<p>Looks like Hibernate puts those entries in a <code>Map</code> for whatever reason, that means it wraps some instances in a <code>LinkedNode</code> or <code>TreeNode</code>, those have a <code>Key</code> and a <code>Value</code>, that is <em>at least</em> more <code>160MB</code> just for the headers and so on... </p>\n\n<p>You could measure how much <em>exactly</em> each Object would take via <code>jol</code> for example; but that will not give you anything - you are still going to fail with an <code>OutOfMemory</code>. I would first think about <em>why do I need</em> close to 3.5 million entries in memory first; if there is a compelling reason for that I would try to go with something lower the Hibernate.</p>\n"},{"tags":[],"owner":{"account_id":60171,"reputation":115485,"user_id":179850,"accept_rate":100,"display_name":"Gray"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1492027605,"creation_date":1492022050,"answer_id":43377126,"question_id":43376102,"body_markdown":"&gt; I&#39;m running a standalone java application and trying to load all this data through hibernate... But i&#39;m getting java.lang.OutOfMemoryError: Java heap space\r\n\r\nWhether or not this is expected depends on the details of your `Register` class.  You are loading 3 million of your `Register` objects using hibernate.  For each of those you are loading `userId` which is `Long` (it should be `long` primitive because it&#39;s `nullable = false`) and the `RegisterType` field so that&#39;s another 6 million objects.  I&#39;m not sure about `checked` if it is in the database as well – you might need to say `@Transient` or something to not have it loaded as well.  If it is loaded then there&#39;s another object per `Register`.  I&#39;m also not sure if the `RegisterType` field is loaded eagerly which would then be even more objects.\r\n\r\nSo depending on the fields, you can be talking about 6 to 15+ million objects in memory and there is a lot of overhead in hibernate.  It is trying to add objects to the internal identity maps which are part of its caching.  You&#39;ll need certainly more than 128mb of memory to do this.\r\n\r\nThe big question is whether or not you actually need all of this data in memory to do your processing.  Can you page over the database instead so only load in 1000 (let&#39;s say) objects at one time?\r\n","title":"Hibernate out of memory for Query 128MB","body":"<blockquote>\n  <p>I'm running a standalone java application and trying to load all this data through hibernate... But i'm getting java.lang.OutOfMemoryError: Java heap space</p>\n</blockquote>\n\n<p>Whether or not this is expected depends on the details of your <code>Register</code> class.  You are loading 3 million of your <code>Register</code> objects using hibernate.  For each of those you are loading <code>userId</code> which is <code>Long</code> (it should be <code>long</code> primitive because it's <code>nullable = false</code>) and the <code>RegisterType</code> field so that's another 6 million objects.  I'm not sure about <code>checked</code> if it is in the database as well – you might need to say <code>@Transient</code> or something to not have it loaded as well.  If it is loaded then there's another object per <code>Register</code>.  I'm also not sure if the <code>RegisterType</code> field is loaded eagerly which would then be even more objects.</p>\n\n<p>So depending on the fields, you can be talking about 6 to 15+ million objects in memory and there is a lot of overhead in hibernate.  It is trying to add objects to the internal identity maps which are part of its caching.  You'll need certainly more than 128mb of memory to do this.</p>\n\n<p>The big question is whether or not you actually need all of this data in memory to do your processing.  Can you page over the database instead so only load in 1000 (let's say) objects at one time?</p>\n"}],"owner":{"account_id":7471816,"reputation":3218,"user_id":5679560,"accept_rate":36,"display_name":"Rafael Lima"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1267,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":3,"score":1,"last_activity_date":1635425227,"creation_date":1492018471,"question_id":43376102,"body_markdown":"I have one table with 3,244,977\tRegisters and 154.70 MB sized (data from phpmyadmin)\r\n\r\nI&#39;m running a standalone java application and trying to load all this data through hibernate. My domain class is:\r\n\r\n    @Entity\r\n    public class Register {\r\n    \r\n    \t@Id\r\n    \t@Column(nullable = false, unique = true, updatable = false)\r\n    \tprivate Long userId;\r\n    \r\n    \tprivate Date checked;\r\n    \r\n    \t@Column(nullable = false)\r\n    \tprivate RegisterType tipo;\r\n    \r\n    \tprivate boolean preLiked = false;\r\n    \tprivate boolean preCommented = false;\r\n    \r\n    }\r\n\r\n\r\nWhere RegisterType is an Enum which hibernate translates in an int.\r\n\r\nSo as you can see my domain class is not that complex, considering that java will add some overhead to the data size stored in the database I setted my heap space to 4GB and I run my application with:\r\n\r\n    java -Xmx4G -cp &#39;....classpath.....&#39; com.tomatechines.bot.Starter\r\n\r\nSo even if the objects got 10 times bigger it should fit in the heap.\r\n\r\nBut i&#39;m getting  java.lang.OutOfMemoryError: Java heap space\r\n\r\n\r\nI was afraid that was other load together with this big amount of data and then i made a test... created a standalone jar that just try to load all data in that table without any other variable... but i&#39;m still getting the exception.\r\n\r\n    Exception in thread &quot;main&quot; java.lang.OutOfMemoryError: Java heap space\r\n            at java.util.HashMap.resize(HashMap.java:703)\r\n            at java.util.HashMap.putVal(HashMap.java:662)\r\n            at java.util.HashMap.put(HashMap.java:611)\r\n            at org.hibernate.internal.util.collections.IdentityMap.put(IdentityMap.java:94)\r\n            at org.hibernate.engine.internal.StatefulPersistenceContext.addCollection(StatefulPersistenceContext.java:846)\r\n            at org.hibernate.engine.internal.StatefulPersistenceContext.addUninitializedCollection(StatefulPersistenceContext.java:817)\r\n            at org.hibernate.type.CollectionType.getCollection(CollectionType.java:739)\r\n            at org.hibernate.type.CollectionType.resolveKey(CollectionType.java:436)\r\n            at org.hibernate.type.CollectionType.resolve(CollectionType.java:429)\r\n            at org.hibernate.engine.internal.TwoPhaseLoad.doInitializeEntity(TwoPhaseLoad.java:151)\r\n            at org.hibernate.engine.internal.TwoPhaseLoad.initializeEntity(TwoPhaseLoad.java:125)\r\n            at org.hibernate.loader.Loader.initializeEntitiesAndCollections(Loader.java:1132)\r\n            at org.hibernate.loader.Loader.processResultSet(Loader.java:992)\r\n            at org.hibernate.loader.Loader.doQuery(Loader.java:930)\r\n            at org.hibernate.loader.Loader.doQueryAndInitializeNonLazyCollections(Loader.java:336)\r\n            at org.hibernate.loader.Loader.doList(Loader.java:2610)\r\n            at org.hibernate.loader.Loader.doList(Loader.java:2593)\r\n            at org.hibernate.loader.Loader.listIgnoreQueryCache(Loader.java:2422)\r\n            at org.hibernate.loader.Loader.list(Loader.java:2417)\r\n            at org.hibernate.loader.criteria.CriteriaLoader.list(CriteriaLoader.java:109)\r\n            at org.hibernate.internal.SessionImpl.list(SessionImpl.java:1787)\r\n            at org.hibernate.internal.CriteriaImpl.list(CriteriaImpl.java:363)\r\n            at com.tomatechines.utils.hibernate.GenericDAO.find(GenericDAO.java:183)\r\n\r\n\r\nthis same query runs on phpmyadmin in less than one second.\r\n\r\nIs it supposed to get that bigger when ran in java? hibernate makes the things grow 30 times the normal size in a database? how can i handle this without make the heap space bigger?","title":"Hibernate out of memory for Query 128MB","body":"<p>I have one table with 3,244,977 Registers and 154.70 MB sized (data from phpmyadmin)</p>\n\n<p>I'm running a standalone java application and trying to load all this data through hibernate. My domain class is:</p>\n\n<pre><code>@Entity\npublic class Register {\n\n    @Id\n    @Column(nullable = false, unique = true, updatable = false)\n    private Long userId;\n\n    private Date checked;\n\n    @Column(nullable = false)\n    private RegisterType tipo;\n\n    private boolean preLiked = false;\n    private boolean preCommented = false;\n\n}\n</code></pre>\n\n<p>Where RegisterType is an Enum which hibernate translates in an int.</p>\n\n<p>So as you can see my domain class is not that complex, considering that java will add some overhead to the data size stored in the database I setted my heap space to 4GB and I run my application with:</p>\n\n<pre><code>java -Xmx4G -cp '....classpath.....' com.tomatechines.bot.Starter\n</code></pre>\n\n<p>So even if the objects got 10 times bigger it should fit in the heap.</p>\n\n<p>But i'm getting  java.lang.OutOfMemoryError: Java heap space</p>\n\n<p>I was afraid that was other load together with this big amount of data and then i made a test... created a standalone jar that just try to load all data in that table without any other variable... but i'm still getting the exception.</p>\n\n<pre><code>Exception in thread \"main\" java.lang.OutOfMemoryError: Java heap space\n        at java.util.HashMap.resize(HashMap.java:703)\n        at java.util.HashMap.putVal(HashMap.java:662)\n        at java.util.HashMap.put(HashMap.java:611)\n        at org.hibernate.internal.util.collections.IdentityMap.put(IdentityMap.java:94)\n        at org.hibernate.engine.internal.StatefulPersistenceContext.addCollection(StatefulPersistenceContext.java:846)\n        at org.hibernate.engine.internal.StatefulPersistenceContext.addUninitializedCollection(StatefulPersistenceContext.java:817)\n        at org.hibernate.type.CollectionType.getCollection(CollectionType.java:739)\n        at org.hibernate.type.CollectionType.resolveKey(CollectionType.java:436)\n        at org.hibernate.type.CollectionType.resolve(CollectionType.java:429)\n        at org.hibernate.engine.internal.TwoPhaseLoad.doInitializeEntity(TwoPhaseLoad.java:151)\n        at org.hibernate.engine.internal.TwoPhaseLoad.initializeEntity(TwoPhaseLoad.java:125)\n        at org.hibernate.loader.Loader.initializeEntitiesAndCollections(Loader.java:1132)\n        at org.hibernate.loader.Loader.processResultSet(Loader.java:992)\n        at org.hibernate.loader.Loader.doQuery(Loader.java:930)\n        at org.hibernate.loader.Loader.doQueryAndInitializeNonLazyCollections(Loader.java:336)\n        at org.hibernate.loader.Loader.doList(Loader.java:2610)\n        at org.hibernate.loader.Loader.doList(Loader.java:2593)\n        at org.hibernate.loader.Loader.listIgnoreQueryCache(Loader.java:2422)\n        at org.hibernate.loader.Loader.list(Loader.java:2417)\n        at org.hibernate.loader.criteria.CriteriaLoader.list(CriteriaLoader.java:109)\n        at org.hibernate.internal.SessionImpl.list(SessionImpl.java:1787)\n        at org.hibernate.internal.CriteriaImpl.list(CriteriaImpl.java:363)\n        at com.tomatechines.utils.hibernate.GenericDAO.find(GenericDAO.java:183)\n</code></pre>\n\n<p>this same query runs on phpmyadmin in less than one second.</p>\n\n<p>Is it supposed to get that bigger when ran in java? hibernate makes the things grow 30 times the normal size in a database? how can i handle this without make the heap space bigger?</p>\n"},{"tags":["java","intellij-idea","out-of-memory","heap-memory","srl"],"comments":[{"owner":{"account_id":36734,"reputation":392127,"user_id":104891,"display_name":"CrazyCoder"},"score":0,"creation_date":1501436722,"post_id":45402473,"comment_id":77765951,"body_markdown":"IDE heap size doesn&#39;t affect the heap size of your application, you need to specify it in the Run/Debug configuration VM options field instead.","body":"IDE heap size doesn&#39;t affect the heap size of your application, you need to specify it in the Run/Debug configuration VM options field instead."},{"owner":{"account_id":11445981,"reputation":21,"user_id":8389863,"display_name":"user8389863"},"score":0,"creation_date":1501438304,"post_id":45402473,"comment_id":77766396,"body_markdown":"@CrazyCoder, Yep. I tried it out. Gives me the same error again, buddy. How much d&#39;ya reckon I should make it?","body":"@CrazyCoder, Yep. I tried it out. Gives me the same error again, buddy. How much d&#39;ya reckon I should make it?"}],"answers":[{"tags":[],"owner":{"account_id":11175092,"reputation":45706,"user_id":8200937,"display_name":"glytching"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1501487330,"creation_date":1501487330,"answer_id":45410138,"question_id":45402473,"body_markdown":"There are two different JVM instances at play here:\r\n\r\n- The JVM which is running IDEA\r\n- The JVM which is running PathLSTM\r\n\r\nI suspect the issue here is with the JVM which is running PathLSTM. To grant this non default values for `-Xms`, `-Xmx` you need to go to `Run &gt; Edit Configurations ...` and then choose the run configuration for your PathLSTM calls and then add `-XmsNNNm -XmxYYYm` to the `VM options` input. \r\n\r\nYou can use [JVisualVM](https://docs.oracle.com/javase/8/docs/technotes/tools/windows/jvisualvm.html) (you&#39;ll find this in the bin directory of your JDK) to see how much memory is being used when running PathLSTM. Start IDEA then start JVisualVM and you&#39;ll see something (likely named &quot;Idea&quot;) under the Local node in the Applications tree view then start whatever runs PathLSTM and you&#39;ll see another entry appear under the Local node, click on that and then choose the Monitor tab. By default, the top right hand graph displayed there shows memory usage of the selected application. You&#39;ll likely see heap used grow until that process gets an OOM, then change the `-Xmx` in `Run &gt; Edit Configurations ...` and retry until you find the required value. Or alternatively, choose a very large value and then let JVisualVM show you the actual maximum value used and then edit your `-Xmx` to match that maximum. \r\n\r\nThe key points here are:\r\n\r\n- Any changes you make to heap size configuration must be made to the JVM instance which is actually running PathLSTM, you configure that JVM through `Run &gt; Edit Configurations ...`\r\n- You can use JVisualVM to monitor the running of **that** JVM\r\n- For &gt; 2GB of heap you&#39;ll need to be running a 64bit JVM\r\n","title":"Java - Strange Heap Space Error keeps getting thrown","body":"<p>There are two different JVM instances at play here:</p>\n\n<ul>\n<li>The JVM which is running IDEA</li>\n<li>The JVM which is running PathLSTM</li>\n</ul>\n\n<p>I suspect the issue here is with the JVM which is running PathLSTM. To grant this non default values for <code>-Xms</code>, <code>-Xmx</code> you need to go to <code>Run &gt; Edit Configurations ...</code> and then choose the run configuration for your PathLSTM calls and then add <code>-XmsNNNm -XmxYYYm</code> to the <code>VM options</code> input. </p>\n\n<p>You can use <a href=\"https://docs.oracle.com/javase/8/docs/technotes/tools/windows/jvisualvm.html\" rel=\"nofollow noreferrer\">JVisualVM</a> (you'll find this in the bin directory of your JDK) to see how much memory is being used when running PathLSTM. Start IDEA then start JVisualVM and you'll see something (likely named \"Idea\") under the Local node in the Applications tree view then start whatever runs PathLSTM and you'll see another entry appear under the Local node, click on that and then choose the Monitor tab. By default, the top right hand graph displayed there shows memory usage of the selected application. You'll likely see heap used grow until that process gets an OOM, then change the <code>-Xmx</code> in <code>Run &gt; Edit Configurations ...</code> and retry until you find the required value. Or alternatively, choose a very large value and then let JVisualVM show you the actual maximum value used and then edit your <code>-Xmx</code> to match that maximum. </p>\n\n<p>The key points here are:</p>\n\n<ul>\n<li>Any changes you make to heap size configuration must be made to the JVM instance which is actually running PathLSTM, you configure that JVM through <code>Run &gt; Edit Configurations ...</code></li>\n<li>You can use JVisualVM to monitor the running of <strong>that</strong> JVM</li>\n<li>For > 2GB of heap you'll need to be running a 64bit JVM</li>\n</ul>\n"}],"owner":{"account_id":11445981,"reputation":21,"user_id":8389863,"display_name":"user8389863"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":494,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":1,"score":2,"last_activity_date":1635425213,"creation_date":1501434335,"question_id":45402473,"body_markdown":"people. This is a very common error, but no matter what I do, I just can&#39;t seem to find a way around it.\r\nI use IDEA IntelliJ, and for quite a while now, I&#39;ve been trying to implement a working Semantic Role Labeling (SRL) System, and finally, I decided to use the PathLSTM model (https://github.com/microth/PathLSTM), to do the same.\r\n\r\nProblem is, this algorithm depends on model files which are as big as 2.7G, for it&#39;s parsing operations.(https://drive.google.com/uc?id=0B5aLxfs6OvZBYUk2b0hLZjNqY3c&amp;export=download)\r\n\r\nThis throws me an insufficient heap space - Out of memory error\r\n\r\n*************************************************************************\r\n\r\n    Loading pipeline from \r\n    C:\\Users\\Vyso\\Downloads\\NLP\\SRL\\SEMAFOR\\absSemafor\\LTH\\wttv\\PathLSTM-pre-\r\n    illinois-built\\srl-ACL2016-eng.model\r\n    Exception in thread &quot;main&quot; java.lang.OutOfMemoryError: Java heap space\r\n\tat java.lang.reflect.Array.newInstance(Array.java:75)\r\n\tat java.io.ObjectInputStream.readArray(ObjectInputStream.java:1883)\r\n\tat java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1529)\r\n\tat java.io.ObjectInputStream.readArray(ObjectInputStream.java:1919)\r\n\tat java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1529)\r\n\tat java.io.ObjectInputStream.defaultReadFields(ObjectInputStream.java:2231)\r\n\tat java.io.ObjectInputStream.readSerialData(ObjectInputStream.java:2155)\r\n\tat java.io.ObjectInputStream.readOrdinaryObject(ObjectInputStream.java:2013)\r\n\tat java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1535)\r\n\tat java.io.ObjectInputStream.defaultReadFields(ObjectInputStream.java:2231)\r\n\tat java.io.ObjectInputStream.readSerialData(ObjectInputStream.java:2155)\r\n\tat java.io.ObjectInputStream.readOrdinaryObject(ObjectInputStream.java:2013)\r\n\tat java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1535)\r\n\tat java.io.ObjectInputStream.defaultReadFields(ObjectInputStream.java:2231)\r\n\tat java.io.ObjectInputStream.readSerialData(ObjectInputStream.java:2155)\r\n\tat java.io.ObjectInputStream.readOrdinaryObject(ObjectInputStream.java:2013)\r\n\tat java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1535)\r\n\tat java.io.ObjectInputStream.defaultReadFields(ObjectInputStream.java:2231)\r\n\tat java.io.ObjectInputStream.readSerialData(ObjectInputStream.java:2155)\r\n\tat java.io.ObjectInputStream.readOrdinaryObject(ObjectInputStream.java:2013)\r\n\tat java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1535)\r\n\tat java.io.ObjectInputStream.readArray(ObjectInputStream.java:1919)\r\n\tat java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1529)\r\n\tat java.io.ObjectInputStream.defaultReadFields(ObjectInputStream.java:2231)\r\n\tat java.io.ObjectInputStream.readSerialData(ObjectInputStream.java:2155)\r\n\tat java.io.ObjectInputStream.readOrdinaryObject(ObjectInputStream.java:2013)\r\n\tat java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1535)\r\n\tat java.io.ObjectInputStream.defaultReadFields(ObjectInputStream.java:2231)\r\n\tat java.io.ObjectInputStream.readSerialData(ObjectInputStream.java:2155)\r\n\tat java.io.ObjectInputStream.readOrdinaryObject(ObjectInputStream.java:2013)\r\n\tat java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1535)\r\n\tat java.io.ObjectInputStream.readObject(ObjectInputStream.java:422)\r\n\r\n    Process finished with exit code 1\r\n\r\n***********************************************************************\r\n\r\nSo naturally, I changed the heap space of both the JVM on my system, and my IDE, where I could change the vmoptions, as follows. (It was -Xms128m and -Xmx512m, by default).\r\n\r\n***********************************************************************\r\n\r\n    # custom IntelliJ IDEA VM options\r\n\r\n    -Xms2048m\r\n    -Xmx4000m\r\n    -XX:ReservedCodeCacheSize=240m\r\n    -XX:+UseConcMarkSweepGC\r\n    -XX:SoftRefLRUPolicyMSPerMB=50\r\n    -ea\r\n    -Dsun.io.useCanonCaches=false\r\n    -Djava.net.preferIPv4Stack=true\r\n    -XX:+HeapDumpOnOutOfMemoryError\r\n    -XX:-OmitStackTraceInFastThrow\r\n\r\n***********************************************************************\r\n\r\nBut even after assigning around 4G as Max Heap space, I get the error.\r\nFunny thing is, in the memory management toolbar of my IDE, I can see that the code uses a max of just 500m, during runtime, so I really don&#39;t know how this heap space error is still getting thrown.\r\n\r\nMaybe it&#39;s just a beginner level mistake from my side, but I&#39;ve been trying to get out out of this problem for quite a few days now, and I&#39;d really appreciate it if someone could instruct me on how I could get rid of this error.\r\n\r\nThank You.\r\n","title":"Java - Strange Heap Space Error keeps getting thrown","body":"<p>people. This is a very common error, but no matter what I do, I just can't seem to find a way around it.\nI use IDEA IntelliJ, and for quite a while now, I've been trying to implement a working Semantic Role Labeling (SRL) System, and finally, I decided to use the PathLSTM model (<a href=\"https://github.com/microth/PathLSTM\" rel=\"nofollow noreferrer\">https://github.com/microth/PathLSTM</a>), to do the same.</p>\n\n<p>Problem is, this algorithm depends on model files which are as big as 2.7G, for it's parsing operations.(<a href=\"https://drive.google.com/uc?id=0B5aLxfs6OvZBYUk2b0hLZjNqY3c&amp;export=download\" rel=\"nofollow noreferrer\">https://drive.google.com/uc?id=0B5aLxfs6OvZBYUk2b0hLZjNqY3c&amp;export=download</a>)</p>\n\n<p>This throws me an insufficient heap space - Out of memory error</p>\n\n<hr>\n\n<pre><code>Loading pipeline from \nC:\\Users\\Vyso\\Downloads\\NLP\\SRL\\SEMAFOR\\absSemafor\\LTH\\wttv\\PathLSTM-pre-\nillinois-built\\srl-ACL2016-eng.model\nException in thread \"main\" java.lang.OutOfMemoryError: Java heap space\nat java.lang.reflect.Array.newInstance(Array.java:75)\nat java.io.ObjectInputStream.readArray(ObjectInputStream.java:1883)\nat java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1529)\nat java.io.ObjectInputStream.readArray(ObjectInputStream.java:1919)\nat java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1529)\nat java.io.ObjectInputStream.defaultReadFields(ObjectInputStream.java:2231)\nat java.io.ObjectInputStream.readSerialData(ObjectInputStream.java:2155)\nat java.io.ObjectInputStream.readOrdinaryObject(ObjectInputStream.java:2013)\nat java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1535)\nat java.io.ObjectInputStream.defaultReadFields(ObjectInputStream.java:2231)\nat java.io.ObjectInputStream.readSerialData(ObjectInputStream.java:2155)\nat java.io.ObjectInputStream.readOrdinaryObject(ObjectInputStream.java:2013)\nat java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1535)\nat java.io.ObjectInputStream.defaultReadFields(ObjectInputStream.java:2231)\nat java.io.ObjectInputStream.readSerialData(ObjectInputStream.java:2155)\nat java.io.ObjectInputStream.readOrdinaryObject(ObjectInputStream.java:2013)\nat java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1535)\nat java.io.ObjectInputStream.defaultReadFields(ObjectInputStream.java:2231)\nat java.io.ObjectInputStream.readSerialData(ObjectInputStream.java:2155)\nat java.io.ObjectInputStream.readOrdinaryObject(ObjectInputStream.java:2013)\nat java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1535)\nat java.io.ObjectInputStream.readArray(ObjectInputStream.java:1919)\nat java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1529)\nat java.io.ObjectInputStream.defaultReadFields(ObjectInputStream.java:2231)\nat java.io.ObjectInputStream.readSerialData(ObjectInputStream.java:2155)\nat java.io.ObjectInputStream.readOrdinaryObject(ObjectInputStream.java:2013)\nat java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1535)\nat java.io.ObjectInputStream.defaultReadFields(ObjectInputStream.java:2231)\nat java.io.ObjectInputStream.readSerialData(ObjectInputStream.java:2155)\nat java.io.ObjectInputStream.readOrdinaryObject(ObjectInputStream.java:2013)\nat java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1535)\nat java.io.ObjectInputStream.readObject(ObjectInputStream.java:422)\n\nProcess finished with exit code 1\n</code></pre>\n\n<hr>\n\n<p>So naturally, I changed the heap space of both the JVM on my system, and my IDE, where I could change the vmoptions, as follows. (It was -Xms128m and -Xmx512m, by default).</p>\n\n<hr>\n\n<pre><code># custom IntelliJ IDEA VM options\n\n-Xms2048m\n-Xmx4000m\n-XX:ReservedCodeCacheSize=240m\n-XX:+UseConcMarkSweepGC\n-XX:SoftRefLRUPolicyMSPerMB=50\n-ea\n-Dsun.io.useCanonCaches=false\n-Djava.net.preferIPv4Stack=true\n-XX:+HeapDumpOnOutOfMemoryError\n-XX:-OmitStackTraceInFastThrow\n</code></pre>\n\n<hr>\n\n<p>But even after assigning around 4G as Max Heap space, I get the error.\nFunny thing is, in the memory management toolbar of my IDE, I can see that the code uses a max of just 500m, during runtime, so I really don't know how this heap space error is still getting thrown.</p>\n\n<p>Maybe it's just a beginner level mistake from my side, but I've been trying to get out out of this problem for quite a few days now, and I'd really appreciate it if someone could instruct me on how I could get rid of this error.</p>\n\n<p>Thank You.</p>\n"},{"tags":["java","json","string","out-of-memory","heap-memory"],"comments":[{"owner":{"account_id":6780825,"reputation":155680,"user_id":5221149,"display_name":"Andreas"},"score":2,"creation_date":1501794064,"post_id":45494356,"comment_id":77950512,"body_markdown":"Google [`java json stream parser`](https://www.google.com/search?q=java+json+stream+parser), and you will find that Jackson has a [streaming parser](https://github.com/FasterXML/jackson-core#overview).","body":"Google <a href=\"https://www.google.com/search?q=java+json+stream+parser\" rel=\"nofollow noreferrer\"><code>java json stream parser</code></a>, and you will find that Jackson has a <a href=\"https://github.com/FasterXML/jackson-core#overview\" rel=\"nofollow noreferrer\">streaming parser</a>."}],"answers":[{"tags":[],"owner":{"account_id":5030450,"reputation":8573,"user_id":4040817,"accept_rate":75,"display_name":"Little Santi"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1501866042,"creation_date":1501796605,"answer_id":45494967,"question_id":45494356,"body_markdown":"_Of corse_ you should prefere streaming over contiguous memory allocation (String, StringBuilder, arrays and so) to process large amounts of data. So your best chance is to use a streaming JSON parser/serializer.\r\n\r\nHowever, you should first try to optimize your code through several easy-gain fixes:\r\n\r\n**One**: If you really need to store the result before wrinting it to a file, pre-size the StringBuilder to the estimated maximum final size it will have, so it won&#39;t need to be resized on every execution of `append`. For example, like this:\r\n\r\n    StringBuilder json = new StringBuilder(result.length());\r\n\r\nYou&#39;d better even take in account an extra size for the newline characters. For example, oversizing 5%:\r\n\r\n    StringBuilder json = new StringBuilder((int)(1.05d*result.length()));\r\n\r\n**Two**: If you just need to write the result out to a file, do not even store it into a StringBuilder:\r\n\r\n    String result = getLargeJSONString(...);\r\n    JSONArray results = new JSONArray(result);\r\n    try(Writer output=new OutputStreamWriter(new FileOutputStream(outputFile), &quot;UTF8&quot;)) {\r\n\t\tfor (int i = 0; i &lt; results.length(); i++) {\r\n\t\t\tJSONObject cleanedResult = JSONSanitizer.sanitize((JSONObject) results.get(i));\r\n\t\t\toutput.write(cleanedResult.toString());\r\n\t\t\toutput.write(&#39;\\n&#39;);\r\n\t\t}\r\n\t}\r\n","title":"Avoiding OutOfMemoryError","body":"<p><em>Of corse</em> you should prefere streaming over contiguous memory allocation (String, StringBuilder, arrays and so) to process large amounts of data. So your best chance is to use a streaming JSON parser/serializer.</p>\n\n<p>However, you should first try to optimize your code through several easy-gain fixes:</p>\n\n<p><strong>One</strong>: If you really need to store the result before wrinting it to a file, pre-size the StringBuilder to the estimated maximum final size it will have, so it won't need to be resized on every execution of <code>append</code>. For example, like this:</p>\n\n<pre><code>StringBuilder json = new StringBuilder(result.length());\n</code></pre>\n\n<p>You'd better even take in account an extra size for the newline characters. For example, oversizing 5%:</p>\n\n<pre><code>StringBuilder json = new StringBuilder((int)(1.05d*result.length()));\n</code></pre>\n\n<p><strong>Two</strong>: If you just need to write the result out to a file, do not even store it into a StringBuilder:</p>\n\n<pre><code>String result = getLargeJSONString(...);\nJSONArray results = new JSONArray(result);\ntry(Writer output=new OutputStreamWriter(new FileOutputStream(outputFile), \"UTF8\")) {\n    for (int i = 0; i &lt; results.length(); i++) {\n        JSONObject cleanedResult = JSONSanitizer.sanitize((JSONObject) results.get(i));\n        output.write(cleanedResult.toString());\n        output.write('\\n');\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":4625486,"reputation":903,"user_id":3749427,"accept_rate":64,"display_name":"isaac9A"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":137,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"accepted_answer_id":45494967,"answer_count":1,"score":0,"last_activity_date":1635425199,"creation_date":1501793775,"question_id":45494356,"body_markdown":"I have code in which I am given a large JSON string (could be anywhere from 50MB to 250MB) that is an array of JSON objects to be parsed and sanitized then serialized to a file. Everything was going fine with 50MB JSON strings but when the string gets over a hundred or so MB my app crashes with OutOfMemoryError. I know I can increase the size of the heap but would like to avoid doing so if possible. I have included some thoughts I have been having recently. I tried moving try blocks around a little bit to no avail. \r\n\r\n1) I suspect there is some way to do this with streams but I have no idea how to stream the result String (which is a json array string of json objects) one JSON object at a time.\r\n\r\n2) Since result is a Java string, it is immutable. How can we consume this string and get it out of memory ASAP?\r\n\r\n3) Would cleanedResult be better to instantiate a new object each time rather than just assign the same object something different each time?\r\n\r\n4) At the end of the for loop shouldn&#39;t there only be roughly 2x memory used as before the loop as now json stringbuilder variable contains the same memory as the result string which should be the two largest variables in memory?\r\n\r\nI have included the code below.\r\n\r\n\r\n    String result = getLargeJSONString(...); // function that gives me a large JSON string which is an array of JSON objects\r\n    StringBuilder json = new StringBuilder(); // to hold final JSON values to write to file\r\n    \r\n    // try to parse said large JSON String\r\n    JSONArray results = new JSONArray();\r\n    try {\r\n      results = new JSONArray(result);\r\n    } catch (JSONException j) {\r\n      j.printStackTrace();\r\n    }\r\n    \r\n    // do json sanitation on each object and then append to stringbuilder\r\n    // note the final result should be a string with a JSON object on each newline\r\n    JSONObject cleanedResult = new JSONObject();\r\n    for (int i = 0; i &lt; results.length(); i++) {\r\n      try {\r\n        cleanedResult = JSONSanitizer.sanitize((JSONObject) results.get(i));\r\n      } catch (JSONException j) {\r\n        cleanedResult = new JSONObject();\r\n      }\r\n      json.append(cleanedResult.toString());\r\n      json.append(&#39;\\n&#39;);\r\n    }\r\n    \r\n    // write built string to file\r\n    try {\r\n      Files.write(Paths.get(&quot;../file.json&quot;), json.toString().getBytes());\r\n    } catch (IOException i) {\r\n      System.out.println(i);\r\n    }","title":"Avoiding OutOfMemoryError","body":"<p>I have code in which I am given a large JSON string (could be anywhere from 50MB to 250MB) that is an array of JSON objects to be parsed and sanitized then serialized to a file. Everything was going fine with 50MB JSON strings but when the string gets over a hundred or so MB my app crashes with OutOfMemoryError. I know I can increase the size of the heap but would like to avoid doing so if possible. I have included some thoughts I have been having recently. I tried moving try blocks around a little bit to no avail. </p>\n\n<p>1) I suspect there is some way to do this with streams but I have no idea how to stream the result String (which is a json array string of json objects) one JSON object at a time.</p>\n\n<p>2) Since result is a Java string, it is immutable. How can we consume this string and get it out of memory ASAP?</p>\n\n<p>3) Would cleanedResult be better to instantiate a new object each time rather than just assign the same object something different each time?</p>\n\n<p>4) At the end of the for loop shouldn't there only be roughly 2x memory used as before the loop as now json stringbuilder variable contains the same memory as the result string which should be the two largest variables in memory?</p>\n\n<p>I have included the code below.</p>\n\n<pre><code>String result = getLargeJSONString(...); // function that gives me a large JSON string which is an array of JSON objects\nStringBuilder json = new StringBuilder(); // to hold final JSON values to write to file\n\n// try to parse said large JSON String\nJSONArray results = new JSONArray();\ntry {\n  results = new JSONArray(result);\n} catch (JSONException j) {\n  j.printStackTrace();\n}\n\n// do json sanitation on each object and then append to stringbuilder\n// note the final result should be a string with a JSON object on each newline\nJSONObject cleanedResult = new JSONObject();\nfor (int i = 0; i &lt; results.length(); i++) {\n  try {\n    cleanedResult = JSONSanitizer.sanitize((JSONObject) results.get(i));\n  } catch (JSONException j) {\n    cleanedResult = new JSONObject();\n  }\n  json.append(cleanedResult.toString());\n  json.append('\\n');\n}\n\n// write built string to file\ntry {\n  Files.write(Paths.get(\"../file.json\"), json.toString().getBytes());\n} catch (IOException i) {\n  System.out.println(i);\n}\n</code></pre>\n"},{"tags":["java","eclipse","image-processing","out-of-memory","heap-memory"],"comments":[{"owner":{"account_id":1663234,"reputation":138406,"user_id":1531124,"accept_rate":96,"display_name":"GhostCat"},"score":2,"creation_date":1503046812,"post_id":45752514,"comment_id":78462236,"body_markdown":"What matters in this case: how you invoke the JVM that runs this code. You have to pay close attention to such details.","body":"What matters in this case: how you invoke the JVM that runs this code. You have to pay close attention to such details."},{"owner":{"account_id":10302290,"reputation":1445,"user_id":7600634,"display_name":"John Tribe"},"score":0,"creation_date":1503047789,"post_id":45752514,"comment_id":78462864,"body_markdown":"&#39;Try doing all logic one by one. Then you shouldn&#39;t hit memory limit. (First do the counting and then transform one by one.)","body":"&#39;Try doing all logic one by one. Then you shouldn&#39;t hit memory limit. (First do the counting and then transform one by one.)"},{"owner":{"account_id":8692823,"reputation":31810,"user_id":6505250,"display_name":"howlger"},"score":0,"creation_date":1503051122,"post_id":45752514,"comment_id":78465167,"body_markdown":"Did you set `-Xmx` in your launch/run configuration: in the _Run &gt; Run Configurations...: Arguments_ tab: _VM arguments_ field?","body":"Did you set <code>-Xmx</code> in your launch/run configuration: in the <i>Run &gt; Run Configurations...: Arguments</i> tab: <i>VM arguments</i> field?"},{"owner":{"account_id":11206195,"reputation":103,"user_id":8221760,"display_name":"Ray"},"score":0,"creation_date":1503069671,"post_id":45752514,"comment_id":78478002,"body_markdown":"@GhostCat I&#39;m just running it directly from eclipse","body":"@GhostCat I&#39;m just running it directly from eclipse"},{"owner":{"account_id":11206195,"reputation":103,"user_id":8221760,"display_name":"Ray"},"score":0,"creation_date":1503069788,"post_id":45752514,"comment_id":78478073,"body_markdown":"@JohnTribe Not quite sure how to do that. I could try saving each matrix to a .csv file instead of storing to a Set. Not sure if that will help me though.","body":"@JohnTribe Not quite sure how to do that. I could try saving each matrix to a .csv file instead of storing to a Set. Not sure if that will help me though."},{"owner":{"account_id":11206195,"reputation":103,"user_id":8221760,"display_name":"Ray"},"score":0,"creation_date":1503069859,"post_id":45752514,"comment_id":78478120,"body_markdown":"@howlger I haven&#39;t, what will that change? thanks","body":"@howlger I haven&#39;t, what will that change? thanks"},{"owner":{"account_id":8692823,"reputation":31810,"user_id":6505250,"display_name":"howlger"},"score":1,"creation_date":1503070430,"post_id":45752514,"comment_id":78478494,"body_markdown":"@Ray It depends on the `-Xmx` default (see: https://stackoverflow.com/q/28272923/6505250). A Java application that is launched from inside of Eclipse has its own JRE.","body":"@Ray It depends on the <code>-Xmx</code> default (see: <a href=\"https://stackoverflow.com/q/28272923/6505250\">stackoverflow.com/q/28272923/6505250</a>). A Java application that is launched from inside of Eclipse has its own JRE."},{"owner":{"account_id":1663234,"reputation":138406,"user_id":1531124,"accept_rate":96,"display_name":"GhostCat"},"score":0,"creation_date":1503072850,"post_id":45752514,"comment_id":78479926,"body_markdown":"Hint: when you do not understand something then try to do some research. A person trying to pull up such features should really know a bit about such important details :-)","body":"Hint: when you do not understand something then try to do some research. A person trying to pull up such features should really know a bit about such important details :-)"},{"owner":{"account_id":10302290,"reputation":1445,"user_id":7600634,"display_name":"John Tribe"},"score":0,"creation_date":1503130137,"post_id":45752514,"comment_id":78496643,"body_markdown":"Try working not on files[] but string[] representing path to file  and in foreach do new File(path)","body":"Try working not on files[] but string[] representing path to file  and in foreach do new File(path)"}],"answers":[{"tags":[],"owner":{"account_id":8692823,"reputation":31810,"user_id":6505250,"display_name":"howlger"},"down_vote_count":1,"up_vote_count":0,"is_accepted":true,"score":-1,"last_activity_date":1503091928,"creation_date":1503091928,"answer_id":45765304,"question_id":45752514,"body_markdown":"An application that is started within Eclipse has its own JRE (otherwise a `System.exit(0)` would kill also the Eclipse IDE) with its own VM settings (other than that of the Eclipse IDE). So **make sure you set `-Xmx` in your launch/run configuration: *Run &gt; Run Configurations...: Arguments* tab: *VM arguments*** field.\r\n\r\n100 images of 3000x2000 with one `int` (4 bytes) per pixel = 100 x 3,000 x 2,000 x 4 bytes = 2,400,000,000 bytes ≈ 2.2 GB. 2 GB are probably not enough memory, but with 3 GB it should work: **`-Xms3g -Xmx3g`**","title":"JAVA For Loop running out of memory when running though image files","body":"<p>An application that is started within Eclipse has its own JRE (otherwise a <code>System.exit(0)</code> would kill also the Eclipse IDE) with its own VM settings (other than that of the Eclipse IDE). So <strong>make sure you set <code>-Xmx</code> in your launch/run configuration: <em>Run > Run Configurations...: Arguments</em> tab: <em>VM arguments</em></strong> field.</p>\n\n<p>100 images of 3000x2000 with one <code>int</code> (4 bytes) per pixel = 100 x 3,000 x 2,000 x 4 bytes = 2,400,000,000 bytes ≈ 2.2 GB. 2 GB are probably not enough memory, but with 3 GB it should work: <strong><code>-Xms3g -Xmx3g</code></strong></p>\n"}],"owner":{"account_id":11206195,"reputation":103,"user_id":8221760,"display_name":"Ray"},"comment_count":9,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":253,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"accepted_answer_id":45765304,"answer_count":1,"score":0,"last_activity_date":1635425181,"creation_date":1503046425,"question_id":45752514,"body_markdown":"I am loading about 100 FITS images of 3000x2000 pixels and then converting the pixel values for each image into a matrix and rescaling the matrix and adding each one to a SET.\r\n\r\nBut I am quickly running out of memory in my heap.\r\nThe Set of int matrices shouldn&#39;t take too much memory should it?\r\n(The heap is about 2GB I believe, at least eclipse uses 2GB before giving error.)\r\n\r\nSo my thinking is that each new Fits object is being stored in memory after each loop. but it isn&#39;t needed again after the loop finishes so I don&#39;t know why that would be the case.\r\n\r\nIs there a way to do it without running out of memory? There would be a different number of Fits files each time the program is run.\r\n\r\n    Public Set&lt;int[][]&gt; rescaleFitsList(File[] fitsFileList){\r\n\r\n        Set&lt;int[][]&gt; rescaledFitsSet = new HashSet();\r\n    \r\n         for(File fits: fitsFileList){\r\n             Fits f = new Fits(fits);\r\n             double bScale = f.getHDU(0).getBScale;\r\n             double bLinear = f.getHDU(0).getBLinear;\r\n             short[][] counts = (short[][])f.getHDU(0).getKernel();\r\n             int[][] rescaledFits = new int[counts.length][counts[0].length];\r\n    \r\n                for(int i =0, i&lt;counts.length, i++){\r\n                    for(int j =0, j&lt;counts[0].length, j++){\r\n                        rescaledFits[i][j] = (int)(bScale * counts[i][j] + bLinear); \r\n                     }\r\n                 }\r\n            rescaledFitsSet.add(rescaledFits);\r\n          }\r\n\r\n    }","title":"JAVA For Loop running out of memory when running though image files","body":"<p>I am loading about 100 FITS images of 3000x2000 pixels and then converting the pixel values for each image into a matrix and rescaling the matrix and adding each one to a SET.</p>\n\n<p>But I am quickly running out of memory in my heap.\nThe Set of int matrices shouldn't take too much memory should it?\n(The heap is about 2GB I believe, at least eclipse uses 2GB before giving error.)</p>\n\n<p>So my thinking is that each new Fits object is being stored in memory after each loop. but it isn't needed again after the loop finishes so I don't know why that would be the case.</p>\n\n<p>Is there a way to do it without running out of memory? There would be a different number of Fits files each time the program is run.</p>\n\n<pre><code>Public Set&lt;int[][]&gt; rescaleFitsList(File[] fitsFileList){\n\n    Set&lt;int[][]&gt; rescaledFitsSet = new HashSet();\n\n     for(File fits: fitsFileList){\n         Fits f = new Fits(fits);\n         double bScale = f.getHDU(0).getBScale;\n         double bLinear = f.getHDU(0).getBLinear;\n         short[][] counts = (short[][])f.getHDU(0).getKernel();\n         int[][] rescaledFits = new int[counts.length][counts[0].length];\n\n            for(int i =0, i&lt;counts.length, i++){\n                for(int j =0, j&lt;counts[0].length, j++){\n                    rescaledFits[i][j] = (int)(bScale * counts[i][j] + bLinear); \n                 }\n             }\n        rescaledFitsSet.add(rescaledFits);\n      }\n\n}\n</code></pre>\n"},{"tags":["java","spring-jms","activemq-artemis"],"comments":[{"owner":{"account_id":9398418,"reputation":1845,"user_id":6982270,"display_name":"Domenico Francesco Bruscino"},"score":0,"creation_date":1635339735,"post_id":69734583,"comment_id":123270753,"body_markdown":"I have tried with a similar url encoding the trustStorePassword and it worked. What error are you getting?","body":"I have tried with a similar url encoding the trustStorePassword and it worked. What error are you getting?"},{"owner":{"account_id":10473591,"reputation":858,"user_id":7720801,"display_name":"LDropl"},"score":0,"creation_date":1635340336,"post_id":69734583,"comment_id":123271057,"body_markdown":"I updated my post with the error log","body":"I updated my post with the error log"},{"owner":{"account_id":9398418,"reputation":1845,"user_id":6982270,"display_name":"Domenico Francesco Bruscino"},"score":0,"creation_date":1635340826,"post_id":69734583,"comment_id":123271334,"body_markdown":"Is the plaintext password `0etjq234NCTgBxP8dc4` working? What artemis client version are you using?","body":"Is the plaintext password <code>0etjq234NCTgBxP8dc4</code> working? What artemis client version are you using?"},{"owner":{"account_id":10473591,"reputation":858,"user_id":7720801,"display_name":"LDropl"},"score":0,"creation_date":1635340887,"post_id":69734583,"comment_id":123271370,"body_markdown":"yes, the plain text password is working. I&#39;m using Artemis-2.19.0","body":"yes, the plain text password is working. I&#39;m using Artemis-2.19.0"},{"owner":{"account_id":11434008,"reputation":30690,"user_id":8381946,"display_name":"Justin Bertram"},"score":0,"creation_date":1635341785,"post_id":69734583,"comment_id":123271896,"body_markdown":"I just tried this myself as well by making a quick modification to the `ssl-enabled` example shipped with the broker and everything worked. The masked password was unmasked and used as expected. What command exactly are you using to mask the password?","body":"I just tried this myself as well by making a quick modification to the <code>ssl-enabled</code> example shipped with the broker and everything worked. The masked password was unmasked and used as expected. What command exactly are you using to mask the password?"},{"owner":{"account_id":10473591,"reputation":858,"user_id":7720801,"display_name":"LDropl"},"score":0,"creation_date":1635343023,"post_id":69734583,"comment_id":123272547,"body_markdown":"I&#39;m using this command ```./artemis mask &lt;plaintextPassword&gt;``` and as I said in broker.xml I&#39;m using mask passwords and it works  but in spring boot application I&#39;m getting error","body":"I&#39;m using this command <code>.&#47;artemis mask &lt;plaintextPassword&gt;</code> and as I said in broker.xml I&#39;m using mask passwords and it works  but in spring boot application I&#39;m getting error"},{"owner":{"account_id":11434008,"reputation":30690,"user_id":8381946,"display_name":"Justin Bertram"},"score":0,"creation_date":1635344676,"post_id":69734583,"comment_id":123273409,"body_markdown":"Can you work up a [minimal reproducible example](https://stackoverflow.com/help/minimal-reproducible-example) and push it to a Git repo somewhere so that we can reproduce exactly what you&#39;re observing?","body":"Can you work up a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> and push it to a Git repo somewhere so that we can reproduce exactly what you&#39;re observing?"},{"owner":{"account_id":10473591,"reputation":858,"user_id":7720801,"display_name":"LDropl"},"score":0,"creation_date":1635423762,"post_id":69734583,"comment_id":123297747,"body_markdown":"@DomenicoFrancescoBruscino btw how did you find out the actual plaintext password from my encrypted sequence ? It looks not really secure somehow.","body":"@DomenicoFrancescoBruscino btw how did you find out the actual plaintext password from my encrypted sequence ? It looks not really secure somehow."},{"owner":{"account_id":9398418,"reputation":1845,"user_id":6982270,"display_name":"Domenico Francesco Bruscino"},"score":0,"creation_date":1635437638,"post_id":69734583,"comment_id":123304371,"body_markdown":"@LDropl I supposed you were using the default codec based on blowfish that is a symmetric encryption algorithm. The the default codec is just to obfuscate not to secure passwords.","body":"@LDropl I supposed you were using the default codec based on blowfish that is a symmetric encryption algorithm. The the default codec is just to obfuscate not to secure passwords."},{"owner":{"account_id":10473591,"reputation":858,"user_id":7720801,"display_name":"LDropl"},"score":0,"creation_date":1635486955,"post_id":69734583,"comment_id":123316297,"body_markdown":"Is there any built in codec to secure passwords ? asymmetric encryption ?","body":"Is there any built in codec to secure passwords ? asymmetric encryption ?"},{"owner":{"account_id":9398418,"reputation":1845,"user_id":6982270,"display_name":"Domenico Francesco Bruscino"},"score":0,"creation_date":1635495387,"post_id":69734583,"comment_id":123318834,"body_markdown":"I would ask this in another question to be sure to get the best answers from the entire community.","body":"I would ask this in another question to be sure to get the best answers from the entire community."}],"answers":[{"tags":[],"owner":{"account_id":9398418,"reputation":1845,"user_id":6982270,"display_name":"Domenico Francesco Bruscino"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1635365977,"creation_date":1635364792,"answer_id":69744764,"question_id":69734583,"body_markdown":"The ActiveMQ Artemis Client doesn&#39;t support encrypted passwords in composite urls as `(tcp://amq:61616)?`, see [ARTEMIS-3543][1]. The workaround is to avoid fragments, i.e.\r\n```java\r\nActiveMQConnectionFactory factory = new ActiveMQConnectionFactory(\r\n    &quot;tcp://amq:61616?&quot; +\r\n            &quot;sslEnabled=true&quot; +\r\n            &quot;&amp;trustStorePath=&quot; + trustStorePath + &quot;&amp;trustStorePassword=ENC(397e3aeeddf27c9783a3ab920d83e24da5b7d710df3b405f)&quot;\r\n);\r\n```\r\n\r\n  [1]: https://issues.apache.org/jira/browse/ARTEMIS-3543","title":"Mask Password in ActiveMQ connection URL","body":"<p>The ActiveMQ Artemis Client doesn't support encrypted passwords in composite urls as <code>(tcp://amq:61616)?</code>, see <a href=\"https://issues.apache.org/jira/browse/ARTEMIS-3543\" rel=\"nofollow noreferrer\">ARTEMIS-3543</a>. The workaround is to avoid fragments, i.e.</p>\n<pre class=\"lang-java prettyprint-override\"><code>ActiveMQConnectionFactory factory = new ActiveMQConnectionFactory(\n    &quot;tcp://amq:61616?&quot; +\n            &quot;sslEnabled=true&quot; +\n            &quot;&amp;trustStorePath=&quot; + trustStorePath + &quot;&amp;trustStorePassword=ENC(397e3aeeddf27c9783a3ab920d83e24da5b7d710df3b405f)&quot;\n);\n</code></pre>\n"}],"owner":{"account_id":10473591,"reputation":858,"user_id":7720801,"display_name":"LDropl"},"comment_count":11,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":445,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":69744764,"answer_count":1,"score":0,"last_activity_date":1635425151,"creation_date":1635320297,"question_id":69734583,"body_markdown":"I&#39;m using JMS on a Spring boot client to connect to an ActiveMQ Artemis 2.19.0 broker over SSL. \r\n\r\nIn `broker.xml` I&#39;m using mask passwords like `ENC(32c6f67da12342b0a7ad1702033aa81e6b2a760123f4360)` instead of plain text, and it works fine.\r\n\r\nI tried to use the same mask password instead of plain text in my ActiveMQ connection URL like in code below, but it didn&#39;t work. I&#39;m using this command to mask the password:\r\n```\r\n./artemis mask &lt;plaintextPassword&gt;\r\n```\r\nThe plain text password is working.\r\n\r\nHere&#39;s my code to configure the connection factory:\r\n```java\r\nActiveMQConnectionFactory factory = new ActiveMQConnectionFactory(\r\n        &quot;(tcp://amq:61616)?&quot; +\r\n                &quot;sslEnabled=true&quot; +\r\n                &quot;&amp;trustStorePath=&quot; + trustStorePath + &quot;&amp;trustStorePassword=ENC(397e3aeeddf27c9783a3ab920d83e24da5b7d710df3b405f)&quot;\r\n);\r\n```\r\n\r\nThe error which I get:\r\n```\r\n\r\n2021-10-27 13:10:15.243  WARN 17748 --- [-netty-threads)] io.netty.channel.ChannelInitializer      : Failed to initialize a channel. Closing: [id: 0x07b0d96b]\r\n\r\njava.io.IOException: keystore password was incorrect\r\n        at java.base/sun.security.pkcs12.PKCS12KeyStore.engineLoad(PKCS12KeyStore.java:2116) ~[na:na]\r\n        at java.base/sun.security.util.KeyStoreDelegator.engineLoad(KeyStoreDelegator.java:243) ~[na:na]\r\n        at java.base/java.security.KeyStore.load(KeyStore.java:1479) ~[na:na]\r\n        at org.apache.activemq.artemis.core.remoting.impl.ssl.SSLSupport.loadKeystore(SSLSupport.java:224) ~[artemis-core-client-2.6.4.jar!/:2.6.4]\r\n        at org.apache.activemq.artemis.core.remoting.impl.ssl.SSLSupport.loadTrustManagerFactory(SSLSupport.java:166) ~[artemis-core-client-2.6.4.jar!/:2.6.4]\r\n        at org.apache.activemq.artemis.core.remoting.impl.ssl.SSLSupport.loadTrustManager(SSLSupport.java:195) ~[artemis-core-client-2.6.4.jar!/:2.6.4]\r\n        at org.apache.activemq.artemis.core.remoting.impl.ssl.SSLSupport.createContext(SSLSupport.java:99) ~[artemis-core-client-2.6.4.jar!/:2.6.4]\r\n        at org.apache.activemq.artemis.core.remoting.impl.netty.NettyConnector.loadJdkSslEngine(NettyConnector.java:624) ~[artemis-core-client-2.6.4.jar!/:2.6.4]\r\n        at org.apache.activemq.artemis.core.remoting.impl.netty.NettyConnector.access$500(NettyConnector.java:124) ~[artemis-core-client-2.6.4.jar!/:2.6.4]\r\n        at org.apache.activemq.artemis.core.remoting.impl.netty.NettyConnector$1.initChannel(NettyConnector.java:532) ~[artemis-core-client-2.6.4.jar!/:2.6.4]\r\n        at io.netty.channel.ChannelInitializer.initChannel(ChannelInitializer.java:129) ~[netty-transport-4.1.39.Final.jar!/:4.1.39.Final]\r\n        at io.netty.channel.ChannelInitializer.handlerAdded(ChannelInitializer.java:112) ~[netty-transport-4.1.39.Final.jar!/:4.1.39.Final]\r\n        at io.netty.channel.AbstractChannelHandlerContext.callHandlerAdded(AbstractChannelHandlerContext.java:964) ~[netty-transport-4.1.39.Final.jar!/:4.1.39.Final]\r\n        at io.netty.channel.DefaultChannelPipeline.callHandlerAdded0(DefaultChannelPipeline.java:610) ~[netty-transport-4.1.39.Final.jar!/:4.1.39.Final]\r\n        at io.netty.channel.DefaultChannelPipeline.access$100(DefaultChannelPipeline.java:46) ~[netty-transport-4.1.39.Final.jar!/:4.1.39.Final]\r\n        at io.netty.channel.DefaultChannelPipeline$PendingHandlerAddedTask.execute(DefaultChannelPipeline.java:1474) ~[netty-transport-4.1.39.Final.jar!/:4.1.39.Final]\r\n        at io.netty.channel.DefaultChannelPipeline.callHandlerAddedForAllHandlers(DefaultChannelPipeline.java:1126) ~[netty-transport-4.1.39.Final.jar!/:4.1.39.Final]\r\n        at io.netty.channel.DefaultChannelPipeline.invokeHandlerAddedIfNeeded(DefaultChannelPipeline.java:651) ~[netty-transport-4.1.39.Final.jar!/:4.1.39.Final]\r\n        at io.netty.channel.AbstractChannel$AbstractUnsafe.register0(AbstractChannel.java:503) ~[netty-transport-4.1.39.Final.jar!/:4.1.39.Final]\r\n        at io.netty.channel.AbstractChannel$AbstractUnsafe.access$200(AbstractChannel.java:416) ~[netty-transport-4.1.39.Final.jar!/:4.1.39.Final]\r\n        at io.netty.channel.AbstractChannel$AbstractUnsafe$1.run(AbstractChannel.java:475) ~[netty-transport-4.1.39.Final.jar!/:4.1.39.Final]\r\n        at io.netty.util.concurrent.AbstractEventExecutor.safeExecute(AbstractEventExecutor.java:163) ~[netty-common-4.1.39.Final.jar!/:4.1.39.Final]\r\n        at io.netty.util.concurrent.SingleThreadEventExecutor.runAllTasks(SingleThreadEventExecutor.java:416) ~[netty-common-4.1.39.Final.jar!/:4.1.39.Final]\r\n        at io.netty.channel.epoll.EpollEventLoop.run(EpollEventLoop.java:331) ~[netty-transport-native-epoll-4.1.39.Final-linux-x86_64.jar!/:4.1.39.Final]\r\n        at io.netty.util.concurrent.SingleThreadEventExecutor$5.run(SingleThreadEventExecutor.java:918) ~[netty-common-4.1.39.Final.jar!/:4.1.39.Final]\r\n        at io.netty.util.internal.ThreadExecutorMap$2.run(ThreadExecutorMap.java:74) ~[netty-common-4.1.39.Final.jar!/:4.1.39.Final]\r\n        at org.apache.activemq.artemis.utils.ActiveMQThreadFactory$1.run(ActiveMQThreadFactory.java:118) ~[artemis-commons-2.6.4.jar!/:2.6.4]\r\nCaused by: java.security.UnrecoverableKeyException: failed to decrypt safe contents entry: javax.crypto.BadPaddingException: Given final block not properly padded. Such issues can arise if a bad key is used during decryption.\r\n        ... 27 common frames omitted\r\n```\r\nIs there may be other way to use mask password instead of plain text in the connection URL?","title":"Mask Password in ActiveMQ connection URL","body":"<p>I'm using JMS on a Spring boot client to connect to an ActiveMQ Artemis 2.19.0 broker over SSL.</p>\n<p>In <code>broker.xml</code> I'm using mask passwords like <code>ENC(32c6f67da12342b0a7ad1702033aa81e6b2a760123f4360)</code> instead of plain text, and it works fine.</p>\n<p>I tried to use the same mask password instead of plain text in my ActiveMQ connection URL like in code below, but it didn't work. I'm using this command to mask the password:</p>\n<pre><code>./artemis mask &lt;plaintextPassword&gt;\n</code></pre>\n<p>The plain text password is working.</p>\n<p>Here's my code to configure the connection factory:</p>\n<pre class=\"lang-java prettyprint-override\"><code>ActiveMQConnectionFactory factory = new ActiveMQConnectionFactory(\n        &quot;(tcp://amq:61616)?&quot; +\n                &quot;sslEnabled=true&quot; +\n                &quot;&amp;trustStorePath=&quot; + trustStorePath + &quot;&amp;trustStorePassword=ENC(397e3aeeddf27c9783a3ab920d83e24da5b7d710df3b405f)&quot;\n);\n</code></pre>\n<p>The error which I get:</p>\n<pre><code>\n2021-10-27 13:10:15.243  WARN 17748 --- [-netty-threads)] io.netty.channel.ChannelInitializer      : Failed to initialize a channel. Closing: [id: 0x07b0d96b]\n\njava.io.IOException: keystore password was incorrect\n        at java.base/sun.security.pkcs12.PKCS12KeyStore.engineLoad(PKCS12KeyStore.java:2116) ~[na:na]\n        at java.base/sun.security.util.KeyStoreDelegator.engineLoad(KeyStoreDelegator.java:243) ~[na:na]\n        at java.base/java.security.KeyStore.load(KeyStore.java:1479) ~[na:na]\n        at org.apache.activemq.artemis.core.remoting.impl.ssl.SSLSupport.loadKeystore(SSLSupport.java:224) ~[artemis-core-client-2.6.4.jar!/:2.6.4]\n        at org.apache.activemq.artemis.core.remoting.impl.ssl.SSLSupport.loadTrustManagerFactory(SSLSupport.java:166) ~[artemis-core-client-2.6.4.jar!/:2.6.4]\n        at org.apache.activemq.artemis.core.remoting.impl.ssl.SSLSupport.loadTrustManager(SSLSupport.java:195) ~[artemis-core-client-2.6.4.jar!/:2.6.4]\n        at org.apache.activemq.artemis.core.remoting.impl.ssl.SSLSupport.createContext(SSLSupport.java:99) ~[artemis-core-client-2.6.4.jar!/:2.6.4]\n        at org.apache.activemq.artemis.core.remoting.impl.netty.NettyConnector.loadJdkSslEngine(NettyConnector.java:624) ~[artemis-core-client-2.6.4.jar!/:2.6.4]\n        at org.apache.activemq.artemis.core.remoting.impl.netty.NettyConnector.access$500(NettyConnector.java:124) ~[artemis-core-client-2.6.4.jar!/:2.6.4]\n        at org.apache.activemq.artemis.core.remoting.impl.netty.NettyConnector$1.initChannel(NettyConnector.java:532) ~[artemis-core-client-2.6.4.jar!/:2.6.4]\n        at io.netty.channel.ChannelInitializer.initChannel(ChannelInitializer.java:129) ~[netty-transport-4.1.39.Final.jar!/:4.1.39.Final]\n        at io.netty.channel.ChannelInitializer.handlerAdded(ChannelInitializer.java:112) ~[netty-transport-4.1.39.Final.jar!/:4.1.39.Final]\n        at io.netty.channel.AbstractChannelHandlerContext.callHandlerAdded(AbstractChannelHandlerContext.java:964) ~[netty-transport-4.1.39.Final.jar!/:4.1.39.Final]\n        at io.netty.channel.DefaultChannelPipeline.callHandlerAdded0(DefaultChannelPipeline.java:610) ~[netty-transport-4.1.39.Final.jar!/:4.1.39.Final]\n        at io.netty.channel.DefaultChannelPipeline.access$100(DefaultChannelPipeline.java:46) ~[netty-transport-4.1.39.Final.jar!/:4.1.39.Final]\n        at io.netty.channel.DefaultChannelPipeline$PendingHandlerAddedTask.execute(DefaultChannelPipeline.java:1474) ~[netty-transport-4.1.39.Final.jar!/:4.1.39.Final]\n        at io.netty.channel.DefaultChannelPipeline.callHandlerAddedForAllHandlers(DefaultChannelPipeline.java:1126) ~[netty-transport-4.1.39.Final.jar!/:4.1.39.Final]\n        at io.netty.channel.DefaultChannelPipeline.invokeHandlerAddedIfNeeded(DefaultChannelPipeline.java:651) ~[netty-transport-4.1.39.Final.jar!/:4.1.39.Final]\n        at io.netty.channel.AbstractChannel$AbstractUnsafe.register0(AbstractChannel.java:503) ~[netty-transport-4.1.39.Final.jar!/:4.1.39.Final]\n        at io.netty.channel.AbstractChannel$AbstractUnsafe.access$200(AbstractChannel.java:416) ~[netty-transport-4.1.39.Final.jar!/:4.1.39.Final]\n        at io.netty.channel.AbstractChannel$AbstractUnsafe$1.run(AbstractChannel.java:475) ~[netty-transport-4.1.39.Final.jar!/:4.1.39.Final]\n        at io.netty.util.concurrent.AbstractEventExecutor.safeExecute(AbstractEventExecutor.java:163) ~[netty-common-4.1.39.Final.jar!/:4.1.39.Final]\n        at io.netty.util.concurrent.SingleThreadEventExecutor.runAllTasks(SingleThreadEventExecutor.java:416) ~[netty-common-4.1.39.Final.jar!/:4.1.39.Final]\n        at io.netty.channel.epoll.EpollEventLoop.run(EpollEventLoop.java:331) ~[netty-transport-native-epoll-4.1.39.Final-linux-x86_64.jar!/:4.1.39.Final]\n        at io.netty.util.concurrent.SingleThreadEventExecutor$5.run(SingleThreadEventExecutor.java:918) ~[netty-common-4.1.39.Final.jar!/:4.1.39.Final]\n        at io.netty.util.internal.ThreadExecutorMap$2.run(ThreadExecutorMap.java:74) ~[netty-common-4.1.39.Final.jar!/:4.1.39.Final]\n        at org.apache.activemq.artemis.utils.ActiveMQThreadFactory$1.run(ActiveMQThreadFactory.java:118) ~[artemis-commons-2.6.4.jar!/:2.6.4]\nCaused by: java.security.UnrecoverableKeyException: failed to decrypt safe contents entry: javax.crypto.BadPaddingException: Given final block not properly padded. Such issues can arise if a bad key is used during decryption.\n        ... 27 common frames omitted\n</code></pre>\n<p>Is there may be other way to use mask password instead of plain text in the connection URL?</p>\n"},{"tags":["java","arrays","arraylist","out-of-memory","heap-memory"],"comments":[{"owner":{"account_id":2994830,"reputation":1,"user_id":2541560,"display_name":"Kayaman"},"score":0,"creation_date":1523360219,"post_id":49752515,"comment_id":86519715,"body_markdown":"Profile your software and see what&#39;s using memory etc.","body":"Profile your software and see what&#39;s using memory etc."},{"owner":{"account_id":1058078,"reputation":728,"user_id":4446563,"display_name":"Link64"},"score":0,"creation_date":1523360567,"post_id":49752515,"comment_id":86519950,"body_markdown":"also `-Xmx2G` is the parameter to increasing maximum heap size, not `-Xms2G`","body":"also <code>-Xmx2G</code> is the parameter to increasing maximum heap size, not <code>-Xms2G</code>"},{"owner":{"account_id":13155890,"reputation":11,"user_id":9503075,"display_name":"Collin Barker"},"score":0,"creation_date":1523360909,"post_id":49752515,"comment_id":86520173,"body_markdown":"@Kayaman memory in Windows 7 never goes above 211 megabytes, in xfce, it goes to the max I set, which was just now 1 gigabyte.","body":"@Kayaman memory in Windows 7 never goes above 211 megabytes, in xfce, it goes to the max I set, which was just now 1 gigabyte."},{"owner":{"account_id":13155890,"reputation":11,"user_id":9503075,"display_name":"Collin Barker"},"score":0,"creation_date":1523360946,"post_id":49752515,"comment_id":86520199,"body_markdown":"@Link64 I tried both of those and both of them just delay the same error","body":"@Link64 I tried both of those and both of them just delay the same error"},{"owner":{"account_id":2994830,"reputation":1,"user_id":2541560,"display_name":"Kayaman"},"score":1,"creation_date":1523361008,"post_id":49752515,"comment_id":86520232,"body_markdown":"Who cares what the memory goes to, I told you to find out **why** it goes that high. Profile your application and you can stop guessing.","body":"Who cares what the memory goes to, I told you to find out <b>why</b> it goes that high. Profile your application and you can stop guessing."},{"owner":{"account_id":13155890,"reputation":11,"user_id":9503075,"display_name":"Collin Barker"},"score":0,"creation_date":1523361988,"post_id":49752515,"comment_id":86520920,"body_markdown":"@Kayaman How do I profile it in xfce? This is my first time working with linux and it is a fresh copy.","body":"@Kayaman How do I profile it in xfce? This is my first time working with linux and it is a fresh copy."},{"owner":{"account_id":2994830,"reputation":1,"user_id":2541560,"display_name":"Kayaman"},"score":0,"creation_date":1523362317,"post_id":49752515,"comment_id":86521149,"body_markdown":"Just like you&#39;d do on any platform. I&#39;m guessing you&#39;ve never actually profiled an application. Start with [VisualVM](https://visualvm.github.io/): If you have OpenJDK installed you can run it by typing `visualvm` on the terminal. For further instructions use Google.","body":"Just like you&#39;d do on any platform. I&#39;m guessing you&#39;ve never actually profiled an application. Start with <a href=\"https://visualvm.github.io/\" rel=\"nofollow noreferrer\">VisualVM</a>: If you have OpenJDK installed you can run it by typing <code>visualvm</code> on the terminal. For further instructions use Google."},{"owner":{"account_id":13155890,"reputation":11,"user_id":9503075,"display_name":"Collin Barker"},"score":0,"creation_date":1523365380,"post_id":49752515,"comment_id":86523451,"body_markdown":"Finally was able to run visual vm. see image at end of main question","body":"Finally was able to run visual vm. see image at end of main question"},{"owner":{"account_id":2994830,"reputation":1,"user_id":2541560,"display_name":"Kayaman"},"score":0,"creation_date":1523366242,"post_id":49752515,"comment_id":86524141,"body_markdown":"Nice image, although completely useless to me. Unless you want me to tell you &quot;half of the memory used is going to `char[]`, and half is divided between `String` and `StringBuilder` objects&quot;.","body":"Nice image, although completely useless to me. Unless you want me to tell you &quot;half of the memory used is going to <code>char[]</code>, and half is divided between <code>String</code> and <code>StringBuilder</code> objects&quot;."},{"owner":{"account_id":13155890,"reputation":11,"user_id":9503075,"display_name":"Collin Barker"},"score":0,"creation_date":1523367744,"post_id":49752515,"comment_id":86525338,"body_markdown":"I do not know what image you are looking for, this is the only screen it produces. None of them have variable names on them. this one was from the linux one. I ran the same test on windows 7, both have char array large, but do not give what they are from","body":"I do not know what image you are looking for, this is the only screen it produces. None of them have variable names on them. this one was from the linux one. I ran the same test on windows 7, both have char array large, but do not give what they are from"},{"owner":{"account_id":2053598,"reputation":41316,"user_id":1831987,"display_name":"VGR"},"score":1,"creation_date":1523370415,"post_id":49752515,"comment_id":86527303,"body_markdown":"I don’t know if this is the cause of your problem, but you are using a great deal of memory by using `+=` with String variables.  That is a highly wasteful way to append to a String, because you aren’t actually changing the String, but rather you are creating a handful of new Strings with each append.  Never use `+=` with a String in a loop;  use a StringBuilder instead.","body":"I don’t know if this is the cause of your problem, but you are using a great deal of memory by using <code>+=</code> with String variables.  That is a highly wasteful way to append to a String, because you aren’t actually changing the String, but rather you are creating a handful of new Strings with each append.  Never use <code>+=</code> with a String in a loop;  use a StringBuilder instead."}],"owner":{"account_id":13155890,"reputation":11,"user_id":9503075,"display_name":"Collin Barker"},"comment_count":11,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":75,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1635425148,"creation_date":1523359819,"question_id":49752515,"body_markdown":"I have been writing a program to create a dashboard for work and it works correctly on Windows 7 in eclipse and even as a jar file. When I zip it and send it to the xfce linux (new to using it, not sure if that is the proper name, installed on Chromebit), it is started when I type into the terminal the following command:\r\n\r\n    java -jar projectTimeline.jar\r\nBut after a few seconds, it throws an error and loops until the terminal is closed\r\n\r\n        (xenial)gvsprojectstatus@localhost:~/Downloads/projectTimeline/ProjectTimeline$ \r\n    java -jar projectTimeline.jar\r\n    \r\n    REBUILDING\r\n    \r\n    cnzr6890mrtsyznrr1z86duenm\r\n    SLF4J: Failed to load class &quot;org.slf4j.impl.StaticLoggerBinder&quot;.\r\n    SLF4J: Defaulting to no-operation (NOP) logger implementation\r\n    SLF4J: See http://www.slf4j.org/codes.html#StaticLoggerBinder for further details.\r\n    Smartsheet successful\r\n    Workspace Connected\r\n    30 Timeline Sheets found\r\n    Fetching Sheet 1 of 30\r\n    Creating project row from 172023\r\n    Fetching Sheet 2 of 30\r\n    Creating project row from 172027\r\n    Fetching Sheet 3 of 30\r\n    Creating project row from 172022\r\n    Fetching Sheet 4 of 30\r\n    Creating project row from 172040-002\r\n    Fetching Sheet 5 of 30\r\n    Creating project row from 172041-002\r\n    Fetching Sheet 6 of 30\r\n    Creating project row from 172042-002\r\n    Fetching Sheet 7 of 30\r\n    Creating project row from 172052\r\n    Fetching Sheet 8 of 30\r\n    Creating project row from 172048\r\n    Fetching Sheet 9 of 30\r\n    Creating project row from 172053\r\n    Fetching Sheet 10 of 30\r\n    Creating project row from 172056\r\n    Fetching Sheet 11 of 30\r\n    Creating project row from 162023-002\r\n    Fetching Sheet 12 of 30\r\n    Creating project row from 172058\r\n    Fetching Sheet 13 of 30\r\n    Creating project row from 172059\r\n    Fetching Sheet 14 of 30\r\n    Creating project row from 182001\r\n    Fetching Sheet 15 of 30\r\n    Creating project row from 132101-003\r\n    Fetching Sheet 16 of 30\r\n    Creating project row from 182002\r\n    Fetching Sheet 17 of 30\r\n    Creating project row from 182003\r\n    Fetching Sheet 18 of 30\r\n    Creating project row from 162020-003\r\n    Fetching Sheet 19 of 30\r\n    Creating project row from 182005\r\n    Fetching Sheet 20 of 30\r\n    Creating project row from 182006\r\n    Fetching Sheet 21 of 30\r\n    Creating project row from 182007\r\n    Fetching Sheet 22 of 30\r\n    Creating project row from 142091-008\r\n    Fetching Sheet 23 of 30\r\n    Creating project row from 162003-002\r\n    Fetching Sheet 24 of 30\r\n    Creating project row from 182013\r\n    Fetching Sheet 25 of 30\r\n    Creating project row from 172033-002\r\n    Fetching Sheet 26 of 30\r\n    Creating project row from 172054-002\r\n    Fetching Sheet 27 of 30\r\n    Creating project row from 182015\r\n    Fetching Sheet 28 of 30\r\n    Creating project row from 162023-002-001\r\n    Fetching Sheet 29 of 30\r\n    Creating project row from 172005-004\r\n    Fetching Sheet 30 of 30\r\n    Creating project row from 182016\r\n    \r\n    \r\n    Data Retrieved from Smartsheet\r\n    Data Received\r\n    ERROR #INVALID,DATA TYPE \r\n    Exception in thread &quot;AWT-EventQueue-0&quot; java.lang.OutOfMemoryError: Java heap space\r\n    \tat java.util.Arrays.copyOf(Arrays.java:3210)\r\n    \tat java.util.Arrays.copyOf(Arrays.java:3181)\r\n    \tat java.util.ArrayList.grow(ArrayList.java:265)\r\n    \tat java.util.ArrayList.ensureExplicitCapacity(ArrayList.java:239)\r\n    \tat java.util.ArrayList.ensureCapacityInternal(ArrayList.java:231)\r\n    \tat java.util.ArrayList.add(ArrayList.java:462)\r\n    \tat appScreen.centreString(appScreen.java:565)\r\n    \tat appScreen.paintComponent(appScreen.java:643)\r\n    \tat javax.swing.JComponent.paint(JComponent.java:1056)\r\n    \tat javax.swing.JComponent.paintToOffscreen(JComponent.java:5210)\r\n    \tat javax.swing.BufferStrategyPaintManager.paint(BufferStrategyPaintManager.java:290)\r\n    \tat javax.swing.RepaintManager.paint(RepaintManager.java:1272)\r\n    \tat javax.swing.JComponent._paintImmediately(JComponent.java:5158)\r\n    \tat javax.swing.JComponent.paintImmediately(JComponent.java:4969)\r\n    \tat javax.swing.RepaintManager$4.run(RepaintManager.java:831)\r\n    \tat javax.swing.RepaintManager$4.run(RepaintManager.java:814)\r\n    \tat java.security.AccessController.doPrivileged(Native Method)\r\n    \tat java.security.ProtectionDomain$JavaSecurityAccessImpl.doIntersectionPrivilege(ProtectionDomain.java:80)\r\n    \tat javax.swing.RepaintManager.paintDirtyRegions(RepaintManager.java:814)\r\n    \tat javax.swing.RepaintManager.paintDirtyRegions(RepaintManager.java:789)\r\n    \tat javax.swing.RepaintManager.prePaintDirtyRegions(RepaintManager.java:738)\r\n    \tat javax.swing.RepaintManager.access$1200(RepaintManager.java:64)\r\n    \tat javax.swing.RepaintManager$ProcessingRunnable.run(RepaintManager.java:1732)\r\n    \tat java.awt.event.InvocationEvent.dispatch(InvocationEvent.java:311)\r\n    \tat java.awt.EventQueue.dispatchEventImpl(EventQueue.java:758)\r\n    \tat java.awt.EventQueue.access$500(EventQueue.java:97)\r\n    \tat java.awt.EventQueue$3.run(EventQueue.java:709)\r\n    \tat java.awt.EventQueue$3.run(EventQueue.java:703)\r\n    \tat java.security.AccessController.doPrivileged(Native Method)\r\n    \tat java.security.ProtectionDomain$JavaSecurityAccessImpl.doIntersectionPrivilege(ProtectionDomain.java:80)\r\n    \tat java.awt.EventQueue.dispatchEvent(EventQueue.java:728)\r\n    \tat java.awt.EventDispatchThread.pumpOneEventForFilters(EventDispatchThread.java:205)\r\n    Exception in thread &quot;AWT-EventQueue-0&quot; java.lang.OutOfMemoryError: Java heap space\r\n    \tat java.util.Arrays.copyOf(Arrays.java:3210)\r\n    \tat java.util.Arrays.copyOf(Arrays.java:3181)\r\n    \tat java.util.ArrayList.grow(ArrayList.java:265)\r\n    \tat java.util.ArrayList.ensureExplicitCapacity(ArrayList.java:239)\r\n    \tat java.util.ArrayList.ensureCapacityInternal(ArrayList.java:231)\r\n    \tat java.util.ArrayList.add(ArrayList.java:462)\r\n    \tat appScreen.centreString(appScreen.java:565)\r\n    \tat appScreen.paintComponent(appScreen.java:643)\r\n    \tat javax.swing.JComponent.paint(JComponent.java:1056)\r\n    \tat javax.swing.JComponent.paintToOffscreen(JComponent.java:5210)\r\n    \tat javax.swing.BufferStrategyPaintManager.paint(BufferStrategyPaintManager.java:290)\r\n    \tat javax.swing.RepaintManager.paint(RepaintManager.java:1272)\r\n    \tat javax.swing.JComponent._paintImmediately(JComponent.java:5158)\r\n    \tat javax.swing.JComponent.paintImmediately(JComponent.java:4969)\r\n    \tat javax.swing.RepaintManager$4.run(RepaintManager.java:831)\r\n    \tat javax.swing.RepaintManager$4.run(RepaintManager.java:814)\r\n    \tat java.security.AccessController.doPrivileged(Native Method)\r\n    \tat java.security.ProtectionDomain$JavaSecurityAccessImpl.doIntersectionPrivilege(ProtectionDomain.java:80)\r\n    \tat javax.swing.RepaintManager.paintDirtyRegions(RepaintManager.java:814)\r\n    \tat javax.swing.RepaintManager.paintDirtyRegions(RepaintManager.java:789)\r\n    \tat javax.swing.RepaintManager.prePaintDirtyRegions(RepaintManager.java:738)\r\n    \tat javax.swing.RepaintManager.access$1200(RepaintManager.java:64)\r\n    \tat javax.swing.RepaintManager$ProcessingRunnable.run(RepaintManager.java:1732)\r\n    \tat java.awt.event.InvocationEvent.dispatch(InvocationEvent.java:311)\r\n    \tat java.awt.EventQueue.dispatchEventImpl(EventQueue.java:758)\r\n    \tat java.awt.EventQueue.access$500(EventQueue.java:97)\r\n    \tat java.awt.EventQueue$3.run(EventQueue.java:709)\r\n    \tat java.awt.EventQueue$3.run(EventQueue.java:703)\r\n    \tat java.security.AccessController.doPrivileged(Native Method)\r\n    \tat java.security.ProtectionDomain$JavaSecurityAccessImpl.doIntersectionPrivilege(ProtectionDomain.java:80)\r\n    \tat java.awt.EventQueue.dispatchEvent(EventQueue.java:728)\r\n    \tat java.awt.EventDispatchThread.pumpOneEventForFilters(EventDispatchThread.java:205)\r\n    Exception in thread &quot;AWT-EventQueue-0&quot; java.lang.OutOfMemoryError: Java heap space\r\n    \tat java.util.Arrays.copyOf(Arrays.java:3210)\r\n    \tat java.util.Arrays.copyOf(Arrays.java:3181)\r\n    \tat java.util.ArrayList.grow(ArrayList.java:265)\r\n    \tat java.util.ArrayList.ensureExplicitCapacity(ArrayList.java:239)\r\n    \tat java.util.ArrayList.ensureCapacityInternal(ArrayList.java:231)\r\n    \tat java.util.ArrayList.add(ArrayList.java:462)\r\n    \tat appScreen.centreString(appScreen.java:565)\r\n    \tat appScreen.paintComponent(appScreen.java:643)\r\n    \tat javax.swing.JComponent.paint(JComponent.java:1056)\r\n    \tat javax.swing.JComponent.paintToOffscreen(JComponent.java:5210)\r\n    \tat javax.swing.BufferStrategyPaintManager.paint(BufferStrategyPaintManager.java:290)\r\n    \tat javax.swing.RepaintManager.paint(RepaintManager.java:1272)\r\n    \tat javax.swing.JComponent._paintImmediately(JComponent.java:5158)\r\n    \tat javax.swing.JComponent.paintImmediately(JComponent.java:4969)\r\n    \tat javax.swing.RepaintManager$4.run(RepaintManager.java:831)\r\n    \tat javax.swing.RepaintManager$4.run(RepaintManager.java:814)\r\n    \tat java.security.AccessController.doPrivileged(Native Method)\r\n    \tat java.security.ProtectionDomain$JavaSecurityAccessImpl.doIntersectionPrivilege(ProtectionDomain.java:80)\r\n    \tat javax.swing.RepaintManager.paintDirtyRegions(RepaintManager.java:814)\r\n    \tat javax.swing.RepaintManager.paintDirtyRegions(RepaintManager.java:789)\r\n    \tat javax.swing.RepaintManager.prePaintDirtyRegions(RepaintManager.java:738)\r\n    \tat javax.swing.RepaintManager.access$1200(RepaintManager.java:64)\r\n    \tat javax.swing.RepaintManager$ProcessingRunnable.run(RepaintManager.java:1732)\r\n    \tat java.awt.event.InvocationEvent.dispatch(InvocationEvent.java:311)\r\n    \tat java.awt.EventQueue.dispatchEventImpl(EventQueue.java:758)\r\n    \tat java.awt.EventQueue.access$500(EventQueue.java:97)\r\n    \tat java.awt.EventQueue$3.run(EventQueue.java:709)\r\n    \tat java.awt.EventQueue$3.run(EventQueue.java:703)\r\n    \tat java.security.AccessController.doPrivileged(Native Method)\r\n    \tat java.security.ProtectionDomain$JavaSecurityAccessImpl.doIntersectionPrivilege(ProtectionDomain.java:80)\r\n    \tat java.awt.EventQueue.dispatchEvent(EventQueue.java:728)\r\n    \tat java.awt.EventDispatchThread.pumpOneEventForFilters(EventDispatchThread.java:205)\r\n    Exception in thread &quot;AWT-EventQueue-0&quot; java.lang.OutOfMemoryError: Java heap space\r\n    \tat java.util.Arrays.copyOf(Arrays.java:3210)\r\n    \tat java.util.Arrays.copyOf(Arrays.java:3181)\r\n    \tat java.util.ArrayList.grow(ArrayList.java:265)\r\n    \tat java.util.ArrayList.ensureExplicitCapacity(ArrayList.java:239)\r\n    \tat java.util.ArrayList.ensureCapacityInternal(ArrayList.java:231)\r\n    \tat java.util.ArrayList.add(ArrayList.java:462)\r\n    \tat appScreen.centreString(appScreen.java:565)\r\n    \tat appScreen.paintComponent(appScreen.java:643)\r\n    \tat javax.swing.JComponent.paint(JComponent.java:1056)\r\n    \tat javax.swing.JComponent.paintToOffscreen(JComponent.java:5210)\r\n    \tat javax.swing.BufferStrategyPaintManager.paint(BufferStrategyPaintManager.java:290)\r\n    \tat javax.swing.RepaintManager.paint(RepaintManager.java:1272)\r\n    \tat javax.swing.JComponent._paintImmediately(JComponent.java:5158)\r\n    \tat javax.swing.JComponent.paintImmediately(JComponent.java:4969)\r\n    \tat javax.swing.RepaintManager$4.run(RepaintManager.java:831)\r\n    \tat javax.swing.RepaintManager$4.run(RepaintManager.java:814)\r\n    \tat java.security.AccessController.doPrivileged(Native Method)\r\n    \tat java.security.ProtectionDomain$JavaSecurityAccessImpl.doIntersectionPrivilege(ProtectionDomain.java:80)\r\n    \tat javax.swing.RepaintManager.paintDirtyRegions(RepaintManager.java:814)\r\n    \tat javax.swing.RepaintManager.paintDirtyRegions(RepaintManager.java:789)\r\n    \tat javax.swing.RepaintManager.prePaintDirtyRegions(RepaintManager.java:738)\r\n    \tat javax.swing.RepaintManager.access$1200(RepaintManager.java:64)\r\n    \tat javax.swing.RepaintManager$ProcessingRunnable.run(RepaintManager.java:1732)\r\n    \tat java.awt.event.InvocationEvent.dispatch(InvocationEvent.java:311)\r\n    \tat java.awt.EventQueue.dispatchEventImpl(EventQueue.java:758)\r\n    \tat java.awt.EventQueue.access$500(EventQueue.java:97)\r\n    \tat java.awt.EventQueue$3.run(EventQueue.java:709)\r\n    \tat java.awt.EventQueue$3.run(EventQueue.java:703)\r\n    \tat java.security.AccessController.doPrivileged(Native Method)\r\n    \tat java.security.ProtectionDomain$JavaSecurityAccessImpl.doIntersectionPrivilege(ProtectionDomain.java:80)\r\n    \tat java.awt.EventQueue.dispatchEvent(EventQueue.java:728)\r\n    \tat java.awt.EventDispatchThread.pumpOneEventForFilters(EventDispatchThread.java:205)\r\n    Exception in thread &quot;AWT-EventQueue-0&quot; java.lang.OutOfMemoryError: Java heap space\r\n    ^C(xenial)gvsprojectstatus@localhost:~/Downloads/projectTimeline/ProjectTimeline$ \r\n\r\n\r\n\r\nFrom this, it seems to back up in the centreString method I created. This is below\r\n\r\n    private void centreString(Graphics g,Rectangle r,String s,Font font,Color c) {\r\n\t\tif(s!=null) {\r\n\t\t\tArrayList&lt;String&gt; toPrint =new ArrayList&lt;String&gt;();//what will be shown on screen\r\n\t\t\tString secondLine=&quot;&quot;;\r\n\t\t\tString oldTempLine,newTempLine;\r\n\t\t\toldTempLine=newTempLine=&quot;&quot;;\r\n\t\t\t\r\n\t\t\t//get first line out. this was predefined to be alone\r\n\t\t\tString[] firstLineSplitting=s.split(&quot;\\n&quot;);\r\n\t\t\t\r\n\t\t\tif(firstLineSplitting.length&gt;1) {//if first line is supposed to be alone, insert it and prepare the rest for more processing\r\n\t\t\t\ttoPrint.add(firstLineSplitting[0]);\r\n\t\t\t\t\r\n\t\t\t\t//all other parts of the string, merge into 1 string again\r\n\t\t\t\tfor(int i=1;i&lt;firstLineSplitting.length;i++) {\r\n\t\t\t\t\tsecondLine+=firstLineSplitting[i]+&quot; &quot;;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\telse {//not supposed to be alone, put back together\r\n\t\t\t\tfor(int i=0;i&lt;firstLineSplitting.length;i++) {\r\n\t\t\t\t\tsecondLine+=firstLineSplitting[i]+&quot; &quot;;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\t//split into words\r\n\t\t\tString[] theRest=secondLine.trim().split(&quot; &quot;);\r\n\t\t\t\r\n\t\t\tFontMetrics metrics = g.getFontMetrics(font);\r\n\t\t\t\r\n\t\t\tfor(int i=0;i&lt;theRest.length;i++) {\r\n\t\t\t\tString word = theRest[i];\r\n\t\t\t\tnewTempLine+=&quot; &quot;+word;//add each new word to a test line,\r\n\t\t\t\tif(metrics.stringWidth(newTempLine)&gt;r.width) {//and check if it does not fit\r\n\t\t\t\t\ttoPrint.add(oldTempLine);//if it does not fit, use the line without that word and start again with that word\r\n\t\t\t\t\tnewTempLine=&quot;&quot;;\r\n\t\t\t\t\toldTempLine=&quot;&quot;;\r\n\t\t\t\t\ti--;\r\n\t\t\t\t}\r\n\t\t\t\telse if(i==theRest.length-1) {//if at the end of the words and do not have a full line, \r\n\t\t\t\t\ttoPrint.add(newTempLine);//use it anyway\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\telse {//otherwise, the word fits, the older sentence is updated, and this starts again\r\n\t\t\t\t\toldTempLine=newTempLine.trim();\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\t\r\n\t\t\tint x,y; \r\n\t\t\tfor(int i=0;i&lt;toPrint.size();i++) {//for each line to be printed,\r\n\t\t\t\tx=r.x+ (r.width-metrics.stringWidth(toPrint.get(i)))/2;//vertically centre it \r\n\t\t\t\tif(toPrint.size()&gt;2) {//if there are more than 2 lines to go into this cell\r\n\t\t\t\t\ty=r.y+ r.height/2-metrics.getHeight()/2 + metrics.getAscent()*(i);//raise up the first line 1 line\r\n\t\t\t\t}\r\n\t\t\t\telse {\r\n\t\t\t\t\ty=r.y+ r.height/2-metrics.getHeight()/2 + metrics.getAscent()*(i+1);//place the first line in the centre\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\t//draw it on screen\r\n\t\t\t\tg.setFont(font);\r\n\t\t\t\tg.setColor(c);\r\n\t\t\t\tg.drawString(toPrint.get(i), x, y);\r\n\t\t\t}\r\n\t\t\ttoPrint.clear();\r\n\t\t\ttheRest=null;\r\n\t\t\t\r\n\t\t}\r\n\t\t\r\n\t}\r\n\r\nI have tried using -Xms1g, -Xms120m and -XX:MaxPermSize=1g. The first 2 just delay it, while the last one seems to have been removed in Java 8.\r\n\r\nIf you have an idea on how to fix this, let me know. I have been searching for a day and a half now and they all say make the space bigger with the above commands.\r\n\r\nIf you need any more material, let me know\r\nThank you for all of the help\r\n\r\n\r\n\r\n[Image from Visual VM on linux][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/OnCKv.png","title":"Java error outofmemory when in xfce but not in windows 7","body":"<p>I have been writing a program to create a dashboard for work and it works correctly on Windows 7 in eclipse and even as a jar file. When I zip it and send it to the xfce linux (new to using it, not sure if that is the proper name, installed on Chromebit), it is started when I type into the terminal the following command:</p>\n\n<pre><code>java -jar projectTimeline.jar\n</code></pre>\n\n<p>But after a few seconds, it throws an error and loops until the terminal is closed</p>\n\n<pre><code>    (xenial)gvsprojectstatus@localhost:~/Downloads/projectTimeline/ProjectTimeline$ \njava -jar projectTimeline.jar\n\nREBUILDING\n\ncnzr6890mrtsyznrr1z86duenm\nSLF4J: Failed to load class \"org.slf4j.impl.StaticLoggerBinder\".\nSLF4J: Defaulting to no-operation (NOP) logger implementation\nSLF4J: See http://www.slf4j.org/codes.html#StaticLoggerBinder for further details.\nSmartsheet successful\nWorkspace Connected\n30 Timeline Sheets found\nFetching Sheet 1 of 30\nCreating project row from 172023\nFetching Sheet 2 of 30\nCreating project row from 172027\nFetching Sheet 3 of 30\nCreating project row from 172022\nFetching Sheet 4 of 30\nCreating project row from 172040-002\nFetching Sheet 5 of 30\nCreating project row from 172041-002\nFetching Sheet 6 of 30\nCreating project row from 172042-002\nFetching Sheet 7 of 30\nCreating project row from 172052\nFetching Sheet 8 of 30\nCreating project row from 172048\nFetching Sheet 9 of 30\nCreating project row from 172053\nFetching Sheet 10 of 30\nCreating project row from 172056\nFetching Sheet 11 of 30\nCreating project row from 162023-002\nFetching Sheet 12 of 30\nCreating project row from 172058\nFetching Sheet 13 of 30\nCreating project row from 172059\nFetching Sheet 14 of 30\nCreating project row from 182001\nFetching Sheet 15 of 30\nCreating project row from 132101-003\nFetching Sheet 16 of 30\nCreating project row from 182002\nFetching Sheet 17 of 30\nCreating project row from 182003\nFetching Sheet 18 of 30\nCreating project row from 162020-003\nFetching Sheet 19 of 30\nCreating project row from 182005\nFetching Sheet 20 of 30\nCreating project row from 182006\nFetching Sheet 21 of 30\nCreating project row from 182007\nFetching Sheet 22 of 30\nCreating project row from 142091-008\nFetching Sheet 23 of 30\nCreating project row from 162003-002\nFetching Sheet 24 of 30\nCreating project row from 182013\nFetching Sheet 25 of 30\nCreating project row from 172033-002\nFetching Sheet 26 of 30\nCreating project row from 172054-002\nFetching Sheet 27 of 30\nCreating project row from 182015\nFetching Sheet 28 of 30\nCreating project row from 162023-002-001\nFetching Sheet 29 of 30\nCreating project row from 172005-004\nFetching Sheet 30 of 30\nCreating project row from 182016\n\n\nData Retrieved from Smartsheet\nData Received\nERROR #INVALID,DATA TYPE \nException in thread \"AWT-EventQueue-0\" java.lang.OutOfMemoryError: Java heap space\n    at java.util.Arrays.copyOf(Arrays.java:3210)\n    at java.util.Arrays.copyOf(Arrays.java:3181)\n    at java.util.ArrayList.grow(ArrayList.java:265)\n    at java.util.ArrayList.ensureExplicitCapacity(ArrayList.java:239)\n    at java.util.ArrayList.ensureCapacityInternal(ArrayList.java:231)\n    at java.util.ArrayList.add(ArrayList.java:462)\n    at appScreen.centreString(appScreen.java:565)\n    at appScreen.paintComponent(appScreen.java:643)\n    at javax.swing.JComponent.paint(JComponent.java:1056)\n    at javax.swing.JComponent.paintToOffscreen(JComponent.java:5210)\n    at javax.swing.BufferStrategyPaintManager.paint(BufferStrategyPaintManager.java:290)\n    at javax.swing.RepaintManager.paint(RepaintManager.java:1272)\n    at javax.swing.JComponent._paintImmediately(JComponent.java:5158)\n    at javax.swing.JComponent.paintImmediately(JComponent.java:4969)\n    at javax.swing.RepaintManager$4.run(RepaintManager.java:831)\n    at javax.swing.RepaintManager$4.run(RepaintManager.java:814)\n    at java.security.AccessController.doPrivileged(Native Method)\n    at java.security.ProtectionDomain$JavaSecurityAccessImpl.doIntersectionPrivilege(ProtectionDomain.java:80)\n    at javax.swing.RepaintManager.paintDirtyRegions(RepaintManager.java:814)\n    at javax.swing.RepaintManager.paintDirtyRegions(RepaintManager.java:789)\n    at javax.swing.RepaintManager.prePaintDirtyRegions(RepaintManager.java:738)\n    at javax.swing.RepaintManager.access$1200(RepaintManager.java:64)\n    at javax.swing.RepaintManager$ProcessingRunnable.run(RepaintManager.java:1732)\n    at java.awt.event.InvocationEvent.dispatch(InvocationEvent.java:311)\n    at java.awt.EventQueue.dispatchEventImpl(EventQueue.java:758)\n    at java.awt.EventQueue.access$500(EventQueue.java:97)\n    at java.awt.EventQueue$3.run(EventQueue.java:709)\n    at java.awt.EventQueue$3.run(EventQueue.java:703)\n    at java.security.AccessController.doPrivileged(Native Method)\n    at java.security.ProtectionDomain$JavaSecurityAccessImpl.doIntersectionPrivilege(ProtectionDomain.java:80)\n    at java.awt.EventQueue.dispatchEvent(EventQueue.java:728)\n    at java.awt.EventDispatchThread.pumpOneEventForFilters(EventDispatchThread.java:205)\nException in thread \"AWT-EventQueue-0\" java.lang.OutOfMemoryError: Java heap space\n    at java.util.Arrays.copyOf(Arrays.java:3210)\n    at java.util.Arrays.copyOf(Arrays.java:3181)\n    at java.util.ArrayList.grow(ArrayList.java:265)\n    at java.util.ArrayList.ensureExplicitCapacity(ArrayList.java:239)\n    at java.util.ArrayList.ensureCapacityInternal(ArrayList.java:231)\n    at java.util.ArrayList.add(ArrayList.java:462)\n    at appScreen.centreString(appScreen.java:565)\n    at appScreen.paintComponent(appScreen.java:643)\n    at javax.swing.JComponent.paint(JComponent.java:1056)\n    at javax.swing.JComponent.paintToOffscreen(JComponent.java:5210)\n    at javax.swing.BufferStrategyPaintManager.paint(BufferStrategyPaintManager.java:290)\n    at javax.swing.RepaintManager.paint(RepaintManager.java:1272)\n    at javax.swing.JComponent._paintImmediately(JComponent.java:5158)\n    at javax.swing.JComponent.paintImmediately(JComponent.java:4969)\n    at javax.swing.RepaintManager$4.run(RepaintManager.java:831)\n    at javax.swing.RepaintManager$4.run(RepaintManager.java:814)\n    at java.security.AccessController.doPrivileged(Native Method)\n    at java.security.ProtectionDomain$JavaSecurityAccessImpl.doIntersectionPrivilege(ProtectionDomain.java:80)\n    at javax.swing.RepaintManager.paintDirtyRegions(RepaintManager.java:814)\n    at javax.swing.RepaintManager.paintDirtyRegions(RepaintManager.java:789)\n    at javax.swing.RepaintManager.prePaintDirtyRegions(RepaintManager.java:738)\n    at javax.swing.RepaintManager.access$1200(RepaintManager.java:64)\n    at javax.swing.RepaintManager$ProcessingRunnable.run(RepaintManager.java:1732)\n    at java.awt.event.InvocationEvent.dispatch(InvocationEvent.java:311)\n    at java.awt.EventQueue.dispatchEventImpl(EventQueue.java:758)\n    at java.awt.EventQueue.access$500(EventQueue.java:97)\n    at java.awt.EventQueue$3.run(EventQueue.java:709)\n    at java.awt.EventQueue$3.run(EventQueue.java:703)\n    at java.security.AccessController.doPrivileged(Native Method)\n    at java.security.ProtectionDomain$JavaSecurityAccessImpl.doIntersectionPrivilege(ProtectionDomain.java:80)\n    at java.awt.EventQueue.dispatchEvent(EventQueue.java:728)\n    at java.awt.EventDispatchThread.pumpOneEventForFilters(EventDispatchThread.java:205)\nException in thread \"AWT-EventQueue-0\" java.lang.OutOfMemoryError: Java heap space\n    at java.util.Arrays.copyOf(Arrays.java:3210)\n    at java.util.Arrays.copyOf(Arrays.java:3181)\n    at java.util.ArrayList.grow(ArrayList.java:265)\n    at java.util.ArrayList.ensureExplicitCapacity(ArrayList.java:239)\n    at java.util.ArrayList.ensureCapacityInternal(ArrayList.java:231)\n    at java.util.ArrayList.add(ArrayList.java:462)\n    at appScreen.centreString(appScreen.java:565)\n    at appScreen.paintComponent(appScreen.java:643)\n    at javax.swing.JComponent.paint(JComponent.java:1056)\n    at javax.swing.JComponent.paintToOffscreen(JComponent.java:5210)\n    at javax.swing.BufferStrategyPaintManager.paint(BufferStrategyPaintManager.java:290)\n    at javax.swing.RepaintManager.paint(RepaintManager.java:1272)\n    at javax.swing.JComponent._paintImmediately(JComponent.java:5158)\n    at javax.swing.JComponent.paintImmediately(JComponent.java:4969)\n    at javax.swing.RepaintManager$4.run(RepaintManager.java:831)\n    at javax.swing.RepaintManager$4.run(RepaintManager.java:814)\n    at java.security.AccessController.doPrivileged(Native Method)\n    at java.security.ProtectionDomain$JavaSecurityAccessImpl.doIntersectionPrivilege(ProtectionDomain.java:80)\n    at javax.swing.RepaintManager.paintDirtyRegions(RepaintManager.java:814)\n    at javax.swing.RepaintManager.paintDirtyRegions(RepaintManager.java:789)\n    at javax.swing.RepaintManager.prePaintDirtyRegions(RepaintManager.java:738)\n    at javax.swing.RepaintManager.access$1200(RepaintManager.java:64)\n    at javax.swing.RepaintManager$ProcessingRunnable.run(RepaintManager.java:1732)\n    at java.awt.event.InvocationEvent.dispatch(InvocationEvent.java:311)\n    at java.awt.EventQueue.dispatchEventImpl(EventQueue.java:758)\n    at java.awt.EventQueue.access$500(EventQueue.java:97)\n    at java.awt.EventQueue$3.run(EventQueue.java:709)\n    at java.awt.EventQueue$3.run(EventQueue.java:703)\n    at java.security.AccessController.doPrivileged(Native Method)\n    at java.security.ProtectionDomain$JavaSecurityAccessImpl.doIntersectionPrivilege(ProtectionDomain.java:80)\n    at java.awt.EventQueue.dispatchEvent(EventQueue.java:728)\n    at java.awt.EventDispatchThread.pumpOneEventForFilters(EventDispatchThread.java:205)\nException in thread \"AWT-EventQueue-0\" java.lang.OutOfMemoryError: Java heap space\n    at java.util.Arrays.copyOf(Arrays.java:3210)\n    at java.util.Arrays.copyOf(Arrays.java:3181)\n    at java.util.ArrayList.grow(ArrayList.java:265)\n    at java.util.ArrayList.ensureExplicitCapacity(ArrayList.java:239)\n    at java.util.ArrayList.ensureCapacityInternal(ArrayList.java:231)\n    at java.util.ArrayList.add(ArrayList.java:462)\n    at appScreen.centreString(appScreen.java:565)\n    at appScreen.paintComponent(appScreen.java:643)\n    at javax.swing.JComponent.paint(JComponent.java:1056)\n    at javax.swing.JComponent.paintToOffscreen(JComponent.java:5210)\n    at javax.swing.BufferStrategyPaintManager.paint(BufferStrategyPaintManager.java:290)\n    at javax.swing.RepaintManager.paint(RepaintManager.java:1272)\n    at javax.swing.JComponent._paintImmediately(JComponent.java:5158)\n    at javax.swing.JComponent.paintImmediately(JComponent.java:4969)\n    at javax.swing.RepaintManager$4.run(RepaintManager.java:831)\n    at javax.swing.RepaintManager$4.run(RepaintManager.java:814)\n    at java.security.AccessController.doPrivileged(Native Method)\n    at java.security.ProtectionDomain$JavaSecurityAccessImpl.doIntersectionPrivilege(ProtectionDomain.java:80)\n    at javax.swing.RepaintManager.paintDirtyRegions(RepaintManager.java:814)\n    at javax.swing.RepaintManager.paintDirtyRegions(RepaintManager.java:789)\n    at javax.swing.RepaintManager.prePaintDirtyRegions(RepaintManager.java:738)\n    at javax.swing.RepaintManager.access$1200(RepaintManager.java:64)\n    at javax.swing.RepaintManager$ProcessingRunnable.run(RepaintManager.java:1732)\n    at java.awt.event.InvocationEvent.dispatch(InvocationEvent.java:311)\n    at java.awt.EventQueue.dispatchEventImpl(EventQueue.java:758)\n    at java.awt.EventQueue.access$500(EventQueue.java:97)\n    at java.awt.EventQueue$3.run(EventQueue.java:709)\n    at java.awt.EventQueue$3.run(EventQueue.java:703)\n    at java.security.AccessController.doPrivileged(Native Method)\n    at java.security.ProtectionDomain$JavaSecurityAccessImpl.doIntersectionPrivilege(ProtectionDomain.java:80)\n    at java.awt.EventQueue.dispatchEvent(EventQueue.java:728)\n    at java.awt.EventDispatchThread.pumpOneEventForFilters(EventDispatchThread.java:205)\nException in thread \"AWT-EventQueue-0\" java.lang.OutOfMemoryError: Java heap space\n^C(xenial)gvsprojectstatus@localhost:~/Downloads/projectTimeline/ProjectTimeline$ \n</code></pre>\n\n<p>From this, it seems to back up in the centreString method I created. This is below</p>\n\n<pre><code>private void centreString(Graphics g,Rectangle r,String s,Font font,Color c) {\n    if(s!=null) {\n        ArrayList&lt;String&gt; toPrint =new ArrayList&lt;String&gt;();//what will be shown on screen\n        String secondLine=\"\";\n        String oldTempLine,newTempLine;\n        oldTempLine=newTempLine=\"\";\n\n        //get first line out. this was predefined to be alone\n        String[] firstLineSplitting=s.split(\"\\n\");\n\n        if(firstLineSplitting.length&gt;1) {//if first line is supposed to be alone, insert it and prepare the rest for more processing\n            toPrint.add(firstLineSplitting[0]);\n\n            //all other parts of the string, merge into 1 string again\n            for(int i=1;i&lt;firstLineSplitting.length;i++) {\n                secondLine+=firstLineSplitting[i]+\" \";\n            }\n        }\n        else {//not supposed to be alone, put back together\n            for(int i=0;i&lt;firstLineSplitting.length;i++) {\n                secondLine+=firstLineSplitting[i]+\" \";\n            }\n        }\n\n        //split into words\n        String[] theRest=secondLine.trim().split(\" \");\n\n        FontMetrics metrics = g.getFontMetrics(font);\n\n        for(int i=0;i&lt;theRest.length;i++) {\n            String word = theRest[i];\n            newTempLine+=\" \"+word;//add each new word to a test line,\n            if(metrics.stringWidth(newTempLine)&gt;r.width) {//and check if it does not fit\n                toPrint.add(oldTempLine);//if it does not fit, use the line without that word and start again with that word\n                newTempLine=\"\";\n                oldTempLine=\"\";\n                i--;\n            }\n            else if(i==theRest.length-1) {//if at the end of the words and do not have a full line, \n                toPrint.add(newTempLine);//use it anyway\n            }\n\n            else {//otherwise, the word fits, the older sentence is updated, and this starts again\n                oldTempLine=newTempLine.trim();\n            }\n\n        }\n\n\n        int x,y; \n        for(int i=0;i&lt;toPrint.size();i++) {//for each line to be printed,\n            x=r.x+ (r.width-metrics.stringWidth(toPrint.get(i)))/2;//vertically centre it \n            if(toPrint.size()&gt;2) {//if there are more than 2 lines to go into this cell\n                y=r.y+ r.height/2-metrics.getHeight()/2 + metrics.getAscent()*(i);//raise up the first line 1 line\n            }\n            else {\n                y=r.y+ r.height/2-metrics.getHeight()/2 + metrics.getAscent()*(i+1);//place the first line in the centre\n            }\n\n            //draw it on screen\n            g.setFont(font);\n            g.setColor(c);\n            g.drawString(toPrint.get(i), x, y);\n        }\n        toPrint.clear();\n        theRest=null;\n\n    }\n\n}\n</code></pre>\n\n<p>I have tried using -Xms1g, -Xms120m and -XX:MaxPermSize=1g. The first 2 just delay it, while the last one seems to have been removed in Java 8.</p>\n\n<p>If you have an idea on how to fix this, let me know. I have been searching for a day and a half now and they all say make the space bigger with the above commands.</p>\n\n<p>If you need any more material, let me know\nThank you for all of the help</p>\n\n<p><a href=\"https://i.stack.imgur.com/OnCKv.png\" rel=\"nofollow noreferrer\">Image from Visual VM on linux</a></p>\n"},{"tags":["java","spring","spring-boot","jpa"],"comments":[{"owner":{"account_id":290683,"reputation":12512,"user_id":592355,"display_name":"xerx593"},"score":0,"creation_date":1635419757,"post_id":69752465,"comment_id":123296144,"body_markdown":"about 1. i would &quot;stick to spec&quot; (in any env): &quot;**If** an entity instance is to be **passed by value as a detached object (e.g., through a remote interface)**, the entity class **must** implement the Serializable interface.&quot; https://www.baeldung.com/jpa-entities-serializable -&gt; https://download.oracle.com/otn-pub/jcp/persistence-2_1-fr-eval-spec/JavaPersistence.pdf","body":"about 1. i would &quot;stick to spec&quot; (in any env): &quot;<b>If</b> an entity instance is to be <b>passed by value as a detached object (e.g., through a remote interface)</b>, the entity class <b>must</b> implement the Serializable interface.&quot; <a href=\"https://www.baeldung.com/jpa-entities-serializable\" rel=\"nofollow noreferrer\">baeldung.com/jpa-entities-serializable</a> -&gt; <a href=\"https://download.oracle.com/otn-pub/jcp/persistence-2_1-fr-eval-spec/JavaPersistence.pdf\" rel=\"nofollow noreferrer\">download.oracle.com/otn-pub/jcp/persistence-2_1-fr-eval-spec&zwnj;&#8203;/&hellip;</a>"}],"answers":[{"tags":[],"owner":{"account_id":9073858,"reputation":2807,"user_id":6756090,"display_name":"slauth"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1635418872,"creation_date":1635418872,"answer_id":69752883,"question_id":69752465,"body_markdown":"I think your `RedisTemplate` isn&#39;t actually used anywhere. You&#39;d have to supply a `RedisCacheConfiguration` instead (taken from [&quot;Spring Boot Cache with Redis&quot;](https://www.baeldung.com/spring-boot-redis-cache)):\r\n\r\n```lang-java\r\n@Bean\r\npublic RedisCacheConfiguration cacheConfiguration() {\r\n    return RedisCacheConfiguration.defaultCacheConfig()\r\n            .entryTtl(Duration.ofMinutes(60))\r\n            .disableCachingNullValues()\r\n            .serializeValuesWith(SerializationPair.fromSerializer(new GenericJackson2JsonRedisSerializer()));\r\n}\r\n```","title":"Spring boot Cacheable annotation with JPA entity","body":"<p>I think your <code>RedisTemplate</code> isn't actually used anywhere. You'd have to supply a <code>RedisCacheConfiguration</code> instead (taken from <a href=\"https://www.baeldung.com/spring-boot-redis-cache\" rel=\"nofollow noreferrer\">&quot;Spring Boot Cache with Redis&quot;</a>):</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Bean\npublic RedisCacheConfiguration cacheConfiguration() {\n    return RedisCacheConfiguration.defaultCacheConfig()\n            .entryTtl(Duration.ofMinutes(60))\n            .disableCachingNullValues()\n            .serializeValuesWith(SerializationPair.fromSerializer(new GenericJackson2JsonRedisSerializer()));\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":17689981,"reputation":31,"user_id":12841996,"display_name":"Aditya"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1635424635,"creation_date":1635424635,"answer_id":69754254,"question_id":69752465,"body_markdown":"Add annotation @EnableCaching and see the effect.\r\n\r\n    @Service\r\n    @RequiredArgsConstructor\r\n    @Transactional(readOnly = true)\r\n    @EnableCaching\r\n    public class RoomQueryService {\r\n    private final RoomRepository roomRepository;\r\n\r\n    @Cacheable(value = &quot;search&quot;, key = &quot;#code&quot;)\r\n    public Room searchRoomByCode(String code) {\r\n        return \r\n      roomRepository.findByCode(code).orElseThrow(RoomNotFoundException::new);\r\n      }\r\n     }","title":"Spring boot Cacheable annotation with JPA entity","body":"<p>Add annotation @EnableCaching and see the effect.</p>\n<pre><code>@Service\n@RequiredArgsConstructor\n@Transactional(readOnly = true)\n@EnableCaching\npublic class RoomQueryService {\nprivate final RoomRepository roomRepository;\n\n@Cacheable(value = &quot;search&quot;, key = &quot;#code&quot;)\npublic Room searchRoomByCode(String code) {\n    return \n  roomRepository.findByCode(code).orElseThrow(RoomNotFoundException::new);\n  }\n }\n</code></pre>\n"}],"owner":{"account_id":12899027,"reputation":3239,"user_id":9328497,"accept_rate":31,"display_name":"Hide"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1111,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":2,"score":1,"last_activity_date":1635424635,"creation_date":1635417044,"question_id":69752465,"body_markdown":"I&#39;m trying to caching jpa entity to redis through `@Cacheable` annotation.\r\n\r\n[RedisConfig.class]\r\n```java\r\n@Configuration\r\npublic class RedisConfig {\r\n    @Value(&quot;${spring.redis.host}&quot;)\r\n    private String host;\r\n\r\n    @Value(&quot;${spring.redis.port}&quot;)\r\n    private int port;\r\n\r\n    @Bean\r\n    public RedisConnectionFactory redisConnectionFactory() {\r\n        return new LettuceConnectionFactory(host, port);\r\n    }\r\n\r\n    @Bean\r\n    public RedisTemplate&lt;?, ?&gt; redisTemplate() {\r\n        RedisTemplate&lt;String, Object&gt; redisTemplate = new RedisTemplate&lt;&gt;();\r\n        redisTemplate.setConnectionFactory(redisConnectionFactory());\r\n        return redisTemplate;\r\n    }\r\n}\r\n```\r\n\r\n[Service layer]\r\n```java\r\n@Service\r\n@RequiredArgsConstructor\r\n@Transactional(readOnly = true)\r\npublic class RoomQueryService {\r\n    private final RoomRepository roomRepository;\r\n\r\n    @Cacheable(value = &quot;search&quot;, key = &quot;#code&quot;)\r\n    public Room searchRoomByCode(String code) {\r\n        return roomRepository.findByCode(code).orElseThrow(RoomNotFoundException::new);\r\n    }\r\n}\r\n```\r\n\r\nWhen executed above code, it throw below error.\r\n\r\n```\r\nServlet.service() for servlet [dispatcherServlet] in context with path [] threw exception [Request processing failed; nested exception is org.springframework.data.redis.serializer.SerializationException: Cannot serialize; nested exception is org.springframework.core.serializer.support.SerializationFailedException: Failed to serialize object using DefaultSerializer; nested exception is java.lang.IllegalArgumentException: DefaultSerializer requires a Serializable payload but received an object of type [slido.slidoclone.room.domain.Room]] with root cause\r\n```\r\n\r\nMaybe it caused because DefaultSerializer can&#39;t serialize jpa entity class.\r\n\r\nSo I added below 2 lines to RedisConfig.\r\n\r\n```java\r\n        redisTemplate.setKeySerializer(new StringRedisSerializer());\r\n        redisTemplate.setValueSerializer(new GenericJackson2JsonRedisSerializer());\r\n```\r\n\r\nBut it throw same error.\r\n\r\nAfter searching about it, I found 2 solutions.\r\n\r\n1. Add `implements Serializable` to JPA entity\r\n2. Use cacheManager in `@Cacheable` annotation\r\n\r\nI&#39;m curious as to which method is used in production.\r\n\r\nThanks.","title":"Spring boot Cacheable annotation with JPA entity","body":"<p>I'm trying to caching jpa entity to redis through <code>@Cacheable</code> annotation.</p>\n<p>[RedisConfig.class]</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Configuration\npublic class RedisConfig {\n    @Value(&quot;${spring.redis.host}&quot;)\n    private String host;\n\n    @Value(&quot;${spring.redis.port}&quot;)\n    private int port;\n\n    @Bean\n    public RedisConnectionFactory redisConnectionFactory() {\n        return new LettuceConnectionFactory(host, port);\n    }\n\n    @Bean\n    public RedisTemplate&lt;?, ?&gt; redisTemplate() {\n        RedisTemplate&lt;String, Object&gt; redisTemplate = new RedisTemplate&lt;&gt;();\n        redisTemplate.setConnectionFactory(redisConnectionFactory());\n        return redisTemplate;\n    }\n}\n</code></pre>\n<p>[Service layer]</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Service\n@RequiredArgsConstructor\n@Transactional(readOnly = true)\npublic class RoomQueryService {\n    private final RoomRepository roomRepository;\n\n    @Cacheable(value = &quot;search&quot;, key = &quot;#code&quot;)\n    public Room searchRoomByCode(String code) {\n        return roomRepository.findByCode(code).orElseThrow(RoomNotFoundException::new);\n    }\n}\n</code></pre>\n<p>When executed above code, it throw below error.</p>\n<pre><code>Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception [Request processing failed; nested exception is org.springframework.data.redis.serializer.SerializationException: Cannot serialize; nested exception is org.springframework.core.serializer.support.SerializationFailedException: Failed to serialize object using DefaultSerializer; nested exception is java.lang.IllegalArgumentException: DefaultSerializer requires a Serializable payload but received an object of type [slido.slidoclone.room.domain.Room]] with root cause\n</code></pre>\n<p>Maybe it caused because DefaultSerializer can't serialize jpa entity class.</p>\n<p>So I added below 2 lines to RedisConfig.</p>\n<pre class=\"lang-java prettyprint-override\"><code>        redisTemplate.setKeySerializer(new StringRedisSerializer());\n        redisTemplate.setValueSerializer(new GenericJackson2JsonRedisSerializer());\n</code></pre>\n<p>But it throw same error.</p>\n<p>After searching about it, I found 2 solutions.</p>\n<ol>\n<li>Add <code>implements Serializable</code> to JPA entity</li>\n<li>Use cacheManager in <code>@Cacheable</code> annotation</li>\n</ol>\n<p>I'm curious as to which method is used in production.</p>\n<p>Thanks.</p>\n"},{"tags":["java","android-studio","textview","onclicklistener"],"comments":[{"owner":{"account_id":16232336,"reputation":107,"user_id":11720739,"display_name":"Robin Joseph"},"score":0,"creation_date":1613479992,"post_id":66152630,"comment_id":117082478,"body_markdown":"@KishanMaurya can you help me please ?","body":"@KishanMaurya can you help me please ?"},{"owner":{"account_id":20231096,"reputation":344,"user_id":14837619,"display_name":"Yechiel babani"},"score":0,"creation_date":1635423517,"post_id":66152630,"comment_id":123297638,"body_markdown":"Can you show the erroe that you get?","body":"Can you show the erroe that you get?"}],"answers":[{"tags":[],"owner":{"account_id":20231096,"reputation":344,"user_id":14837619,"display_name":"Yechiel babani"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1635424300,"creation_date":1635424300,"answer_id":69754163,"question_id":66152630,"body_markdown":"1. You need to know that every initialize of View better to do in the `onCreate` function \r\n\r\n2. Make sure you are implementing `View.OnClickListener` \r\n\r\n3. You are using `View.GONE` that removing the textview from the screen and not only stop from displaying the textview\r\nTo do that you need to use `View.INVISIVLE` \r\n\r\n4. Your code is ok (the code that check the visibility of the view) but you forgot to do the most important part and it&#39;s to initializing and calling the buttons like this for example\r\n\r\n```\r\nButton button1example = findViewById(R.id.button1);\r\nbutton1example.setOnClickListener(this);\r\n```\r\n\r\n  \r\n ","title":"How to set the Textview visibility in an onClick listener?","body":"<ol>\n<li><p>You need to know that every initialize of View better to do in the <code>onCreate</code> function</p>\n</li>\n<li><p>Make sure you are implementing <code>View.OnClickListener</code></p>\n</li>\n<li><p>You are using <code>View.GONE</code> that removing the textview from the screen and not only stop from displaying the textview\nTo do that you need to use <code>View.INVISIVLE</code></p>\n</li>\n<li><p>Your code is ok (the code that check the visibility of the view) but you forgot to do the most important part and it's to initializing and calling the buttons like this for example</p>\n</li>\n</ol>\n<pre><code>Button button1example = findViewById(R.id.button1);\nbutton1example.setOnClickListener(this);\n</code></pre>\n"}],"owner":{"account_id":16232336,"reputation":107,"user_id":11720739,"display_name":"Robin Joseph"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":92,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1635424300,"creation_date":1613038270,"question_id":66152630,"body_markdown":"first sorry for my english and my knowledge, I&#39;m a french beginner.\r\n\r\nI would like to set the visibility of each of my four Textview according to four buttons (one button for one Textview). So I&#39;ve the next code, but when I click on the button, the apps is closing. I&#39;m watching the debug, but I don&#39;t understand what&#39;s not working.\r\n\r\nThank you for all your helps !\r\n\r\n```@Override\r\n    public void onClick(View v) {\r\n        TextView mWhoAreWeTextView1 = (TextView) v.findViewById(R.id.who_are_we_text_1);\r\n        TextView mOurSchoolTextView1 = v.findViewById(R.id.our_school_text_1);\r\n        TextView mWhatDoWeDoTextView1 = v.findViewById(R.id.what_do_we_do_text_1);\r\n        TextView mComeInTextView1 = v.findViewById(R.id.come_in_text_1);\r\n\r\n        switch (v.getId()){\r\n            case R.id.about_part_1:\r\n                if (mWhoAreWeTextView1.getVisibility() == View.VISIBLE){\r\n                    mWhoAreWeTextView1.setVisibility(View.GONE);\r\n                }\r\n                else {\r\n                    mWhoAreWeTextView1.setVisibility(View.VISIBLE);\r\n                }\r\n\r\n            case R.id.about_part_2:\r\n                break;\r\n\r\n            case R.id.about_part_3:\r\n                break;\r\n\r\n            case R.id.about_part_4:\r\n                break;\r\n        }```","title":"How to set the Textview visibility in an onClick listener?","body":"<p>first sorry for my english and my knowledge, I'm a french beginner.</p>\n<p>I would like to set the visibility of each of my four Textview according to four buttons (one button for one Textview). So I've the next code, but when I click on the button, the apps is closing. I'm watching the debug, but I don't understand what's not working.</p>\n<p>Thank you for all your helps !</p>\n<pre><code>    public void onClick(View v) {\n        TextView mWhoAreWeTextView1 = (TextView) v.findViewById(R.id.who_are_we_text_1);\n        TextView mOurSchoolTextView1 = v.findViewById(R.id.our_school_text_1);\n        TextView mWhatDoWeDoTextView1 = v.findViewById(R.id.what_do_we_do_text_1);\n        TextView mComeInTextView1 = v.findViewById(R.id.come_in_text_1);\n\n        switch (v.getId()){\n            case R.id.about_part_1:\n                if (mWhoAreWeTextView1.getVisibility() == View.VISIBLE){\n                    mWhoAreWeTextView1.setVisibility(View.GONE);\n                }\n                else {\n                    mWhoAreWeTextView1.setVisibility(View.VISIBLE);\n                }\n\n            case R.id.about_part_2:\n                break;\n\n            case R.id.about_part_3:\n                break;\n\n            case R.id.about_part_4:\n                break;\n        }```\n</code></pre>\n"},{"tags":["java","junit","mockito","junit5","completable-future"],"comments":[{"owner":{"account_id":6520,"reputation":10523,"user_id":11002,"accept_rate":75,"display_name":"tgdavies"},"score":1,"creation_date":1635419339,"post_id":69752927,"comment_id":123295993,"body_markdown":"Hard to say without seeing the code of `invokeMethod`.","body":"Hard to say without seeing the code of <code>invokeMethod</code>."},{"owner":{"account_id":2219863,"reputation":191,"user_id":1959534,"accept_rate":95,"display_name":"David S"},"score":0,"creation_date":1635419596,"post_id":69752927,"comment_id":123296089,"body_markdown":"Shoot, sadly I can&#39;t show that code in any meaningful way without sharing things I&#39;m not allowed to share.","body":"Shoot, sadly I can&#39;t show that code in any meaningful way without sharing things I&#39;m not allowed to share."},{"owner":{"account_id":6520,"reputation":10523,"user_id":11002,"accept_rate":75,"display_name":"tgdavies"},"score":1,"creation_date":1635419901,"post_id":69752927,"comment_id":123296197,"body_markdown":"The obvious possibility is that you are calling `runAsync` and the exception hasn&#39;t happened at the time you assert.","body":"The obvious possibility is that you are calling <code>runAsync</code> and the exception hasn&#39;t happened at the time you assert."},{"owner":{"account_id":2219863,"reputation":191,"user_id":1959534,"accept_rate":95,"display_name":"David S"},"score":0,"creation_date":1635420595,"post_id":69752927,"comment_id":123296483,"body_markdown":"Hmm, we do actually have something like for one of the integrations that is mocked with supplyAsync. But how can I get a return from unitUnderTest.invokeMethod without the involved futures in our return statement having completed as they are chained together?","body":"Hmm, we do actually have something like for one of the integrations that is mocked with supplyAsync. But how can I get a return from unitUnderTest.invokeMethod without the involved futures in our return statement having completed as they are chained together?"}],"answers":[{"tags":[],"owner":{"account_id":2219863,"reputation":191,"user_id":1959534,"accept_rate":95,"display_name":"David S"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1635423975,"creation_date":1635423975,"answer_id":69754083,"question_id":69752927,"body_markdown":"I can&#39;t ack comment as answer but @tgdavies comment about runAsync was correct. I changed it to a completedFuture and now I&#39;m not able to trigger this behavior. Thanks a lot for the help! Spent hours on trying to solve it","title":"Java - Mockito - CompletableFutures - Unexpected Result of Tested Method","body":"<p>I can't ack comment as answer but @tgdavies comment about runAsync was correct. I changed it to a completedFuture and now I'm not able to trigger this behavior. Thanks a lot for the help! Spent hours on trying to solve it</p>\n"}],"owner":{"account_id":2219863,"reputation":191,"user_id":1959534,"accept_rate":95,"display_name":"David S"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":375,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":69754083,"answer_count":1,"score":0,"last_activity_date":1635423975,"creation_date":1635419073,"question_id":69752927,"body_markdown":"I have a very strange corner case where a future doesn&#39;t complete as expected once every couple of thousands of runs. Only way I&#39;m able to consistently trigger the fault is to have the test run on repeat until it fails.\r\n\r\nSaid test:\r\n\r\n    public class TestFunctionality(){\r\n        @Mock private MockIntegrationA mockIntegrationA;\r\n        @InjectMocks private MyHandler unitUnderTest;\r\n\r\n        @BeforeEach\r\n        public void init(){\r\n            MockitoAnnotations.openMocks(this);\r\n        }\r\n\r\n        @Test\r\n        public void testManagerFailThenSucceed(){\r\n            when(mockIntegrationA.callRestMethod(any())\r\n                .thenThrow(new RuntimeException(&quot;&quot;))\r\n                .thenReturn(CompletableFuture.completedFuture(null));\r\n    \r\n            CompletableFuture&lt;Void&gt; result = unitUnderTest.invokeMethod();\r\n            assertTrue(result.isCompletedExceptionally());\r\n            result = unitUnderTest.callFunction();\r\n            assertFalse(result.isCompletedExceptionally());\r\n        }\r\n    }\r\n\r\nThe first assert in above test is what trips up when the test does go bad. Is there something that isn&#39;t cleaned properly or what is causing this edge case where first result **isn&#39;t** completed exceptionally?","title":"Java - Mockito - CompletableFutures - Unexpected Result of Tested Method","body":"<p>I have a very strange corner case where a future doesn't complete as expected once every couple of thousands of runs. Only way I'm able to consistently trigger the fault is to have the test run on repeat until it fails.</p>\n<p>Said test:</p>\n<pre><code>public class TestFunctionality(){\n    @Mock private MockIntegrationA mockIntegrationA;\n    @InjectMocks private MyHandler unitUnderTest;\n\n    @BeforeEach\n    public void init(){\n        MockitoAnnotations.openMocks(this);\n    }\n\n    @Test\n    public void testManagerFailThenSucceed(){\n        when(mockIntegrationA.callRestMethod(any())\n            .thenThrow(new RuntimeException(&quot;&quot;))\n            .thenReturn(CompletableFuture.completedFuture(null));\n\n        CompletableFuture&lt;Void&gt; result = unitUnderTest.invokeMethod();\n        assertTrue(result.isCompletedExceptionally());\n        result = unitUnderTest.callFunction();\n        assertFalse(result.isCompletedExceptionally());\n    }\n}\n</code></pre>\n<p>The first assert in above test is what trips up when the test does go bad. Is there something that isn't cleaned properly or what is causing this edge case where first result <strong>isn't</strong> completed exceptionally?</p>\n"},{"tags":["java","resources","inputstream"],"comments":[{"owner":{"account_id":1980276,"reputation":8081,"user_id":1777072,"accept_rate":60,"display_name":"David Lavender"},"score":0,"creation_date":1635423928,"post_id":69753990,"comment_id":123297816,"body_markdown":"I think it will get closed. See https://stackoverflow.com/questions/11263926/closing-inputstreams-in-java. &quot;By convention, wrapper streams (which wrap existing streams) close the underlying stream when they are closed&quot;","body":"I think it will get closed. See <a href=\"https://stackoverflow.com/questions/11263926/closing-inputstreams-in-java\" title=\"closing inputstreams in java\">stackoverflow.com/questions/11263926/&hellip;</a>. &quot;By convention, wrapper streams (which wrap existing streams) close the underlying stream when they are closed&quot;"}],"answers":[{"tags":[],"owner":{"account_id":17181007,"reputation":2283,"user_id":12436427,"display_name":"b.GHILAS"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1635423927,"creation_date":1635423927,"answer_id":69754068,"question_id":69753990,"body_markdown":"In this cases you should read the code source of the `BufferedInputStream`, this is the close definition\r\n```\r\npublic void close() throws IOException {\r\n    while(true) {\r\n        byte[] buffer;\r\n        if ((buffer = this.buf) != null) {\r\n            if (!U.compareAndSetObject(this, BUF_OFFSET, buffer, (Object)null)) {\r\n                continue;\r\n            }\r\n\r\n            InputStream input = this.in;\r\n            this.in = null;\r\n            if (input != null) {\r\n                input.close();\r\n            }\r\n\r\n            return;\r\n        }\r\n\r\n        return;\r\n    }\r\n}\r\n```\r\n\r\nAs you can see when closing the BufferedInputStream, the underlying input stream is closed as well.\r\n\r\nAnd this is the documentation of close:\r\n\r\n&gt; public void close() throws IOException \r\n&gt; Closes this input stream and releases any system resources associated with the stream. Once the\r\n&gt; stream has been closed, further read(), available(), reset(), or\r\n&gt; skip() invocations will throw an IOException. Closing a previously\r\n&gt; closed stream has no effect.","title":"Java: Close after returning BufferedInputStream","body":"<p>In this cases you should read the code source of the <code>BufferedInputStream</code>, this is the close definition</p>\n<pre><code>public void close() throws IOException {\n    while(true) {\n        byte[] buffer;\n        if ((buffer = this.buf) != null) {\n            if (!U.compareAndSetObject(this, BUF_OFFSET, buffer, (Object)null)) {\n                continue;\n            }\n\n            InputStream input = this.in;\n            this.in = null;\n            if (input != null) {\n                input.close();\n            }\n\n            return;\n        }\n\n        return;\n    }\n}\n</code></pre>\n<p>As you can see when closing the BufferedInputStream, the underlying input stream is closed as well.</p>\n<p>And this is the documentation of close:</p>\n<blockquote>\n<p>public void close() throws IOException\nCloses this input stream and releases any system resources associated with the stream. Once the\nstream has been closed, further read(), available(), reset(), or\nskip() invocations will throw an IOException. Closing a previously\nclosed stream has no effect.</p>\n</blockquote>\n"}],"owner":{"account_id":3581132,"reputation":1802,"user_id":2989330,"accept_rate":69,"display_name":"Green绿色"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":376,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":69754068,"answer_count":1,"score":0,"last_activity_date":1635423927,"creation_date":1635423559,"question_id":69753990,"body_markdown":"I am planning a function that creates and returns an `InputStream` that in turn reads from another `InputStream` because the initialization of that `InputStream` is not trivial and I would like to use it in multiple places. Consider this simple example:\r\n\r\n```\r\nprivate static InputStream openStream() throws IOException {\r\n    Path path = Paths.get(&quot;/etc/passwd&quot;);\r\n    InputStream inputStream = Files.newInputStream(path);\r\n    return new BufferedInputStream(inputStream);\r\n}\r\n```\r\n\r\nI will use this function as follows:\r\n\r\n```\r\npublic static void main(String[] args) {\r\n    try (InputStream stream = openStream()) {\r\n        byte[] buffer = new byte[1024];\r\n        int numBytes;\r\n        while ((numBytes = stream.read(buffer, 0, buffer.length)) &gt; 0) {\r\n            System.out.printf(&quot;Just read %d bytes from stream!%n&quot;, numBytes);\r\n        }\r\n    } catch (IOException e) {\r\n        e.printStackTrace();\r\n    }\r\n}\r\n```\r\n\r\nHowever, I am concerned that closing the `BufferedInputStream` in this example will not close the `InputStream` inside it. Will this lead to orphaned file handles and memory leaks if called multiple times? What is a better solution for this?\r\n\r\nA simple solution I could think of is to define a closable container class and put both input streams into that class. When calling `close()`, this class would simply close all its open handles. \r\n\r\n```\r\nclass StreamContainer implements Closeable {\r\n\r\n    private final InputStream[] inputStreams;\r\n\r\n    public StreamContainer(InputStream... inputStreams) {\r\n        this.inputStreams = inputStreams;\r\n    }\r\n\r\n    @Override\r\n    public void close() throws IOException {\r\n        for (InputStream inputStream : this.inputStreams) {\r\n            inputStream.close();\r\n        }\r\n    }\r\n}\r\n```\r\n\r\nBut I suppose, there might be a better solution, built-in mechanic or development pattern. Or maybe these constructs should be avoided?","title":"Java: Close after returning BufferedInputStream","body":"<p>I am planning a function that creates and returns an <code>InputStream</code> that in turn reads from another <code>InputStream</code> because the initialization of that <code>InputStream</code> is not trivial and I would like to use it in multiple places. Consider this simple example:</p>\n<pre><code>private static InputStream openStream() throws IOException {\n    Path path = Paths.get(&quot;/etc/passwd&quot;);\n    InputStream inputStream = Files.newInputStream(path);\n    return new BufferedInputStream(inputStream);\n}\n</code></pre>\n<p>I will use this function as follows:</p>\n<pre><code>public static void main(String[] args) {\n    try (InputStream stream = openStream()) {\n        byte[] buffer = new byte[1024];\n        int numBytes;\n        while ((numBytes = stream.read(buffer, 0, buffer.length)) &gt; 0) {\n            System.out.printf(&quot;Just read %d bytes from stream!%n&quot;, numBytes);\n        }\n    } catch (IOException e) {\n        e.printStackTrace();\n    }\n}\n</code></pre>\n<p>However, I am concerned that closing the <code>BufferedInputStream</code> in this example will not close the <code>InputStream</code> inside it. Will this lead to orphaned file handles and memory leaks if called multiple times? What is a better solution for this?</p>\n<p>A simple solution I could think of is to define a closable container class and put both input streams into that class. When calling <code>close()</code>, this class would simply close all its open handles.</p>\n<pre><code>class StreamContainer implements Closeable {\n\n    private final InputStream[] inputStreams;\n\n    public StreamContainer(InputStream... inputStreams) {\n        this.inputStreams = inputStreams;\n    }\n\n    @Override\n    public void close() throws IOException {\n        for (InputStream inputStream : this.inputStreams) {\n            inputStream.close();\n        }\n    }\n}\n</code></pre>\n<p>But I suppose, there might be a better solution, built-in mechanic or development pattern. Or maybe these constructs should be avoided?</p>\n"},{"tags":["java","ms-word","apache-poi"],"comments":[{"owner":{"account_id":19332777,"reputation":921,"user_id":14133995,"display_name":"Charles Kenyon"},"score":1,"creation_date":1635193580,"post_id":69714314,"comment_id":123226396,"body_markdown":"How are you going to identify the specific position? You need a bookmark, a paragraph number, or something else.","body":"How are you going to identify the specific position? You need a bookmark, a paragraph number, or something else."},{"owner":{"account_id":19458717,"reputation":13,"user_id":14233434,"display_name":"Fredrik Axelsson"},"score":0,"creation_date":1635328225,"post_id":69714314,"comment_id":123265911,"body_markdown":"It&#180;s not a problem for me to get the position of a bookmark, paragrap or a Run. My problem is that I don&#180;t know/see how I do an insert of HTML to that position (or if it&#180;s possible). All of the examples I find only shows how to put HTML last in a Word-document with for example this code https://stackoverflow.com/a/53577271/14233434","body":"It&#180;s not a problem for me to get the position of a bookmark, paragrap or a Run. My problem is that I don&#180;t know/see how I do an insert of HTML to that position (or if it&#180;s possible). All of the examples I find only shows how to put HTML last in a Word-document with for example this code <a href=\"https://stackoverflow.com/a/53577271/14233434\">stackoverflow.com/a/53577271/14233434</a>"}],"answers":[{"tags":[],"owner":{"account_id":4853829,"reputation":57305,"user_id":3915431,"display_name":"Axel Richter"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1635423791,"creation_date":1635337006,"answer_id":69738524,"question_id":69714314,"body_markdown":"To insert something into a `XWPFDocument`&#39; s body, one would need a `XmlCursor` which points to the inserting position. Same is done already in methods `XWPFDocument. insertNewParagraph(org.apache.xmlbeans.XmlCursor cursor)` and `XWPFDocument.insertNewTbl(org.apache.xmlbeans.XmlCursor cursor)`.\r\n\r\nSo we would need a method `insertAltChunk(XWPFDocument document, MyXWPFHtmlDocument myXWPFHtmlDocument, XmlCursor cursor)` to insert `altChunk` at position `cursor` of `document` pointing to `myXWPFHtmlDocument`&#39;s `Id`.\r\n\r\n    ...\r\n     boolean isCursorInBody(XWPFDocument document, XmlCursor cursor) {\r\n      XmlCursor verify = cursor.newCursor();\r\n      verify.toParent();\r\n      boolean result = (verify.getObject() == document.getDocument().getBody());\r\n      verify.dispose();\r\n      return result;\r\n     }\r\n     \r\n     void insertAltChunk(XWPFDocument document, MyXWPFHtmlDocument myXWPFHtmlDocument, XmlCursor cursor) {\r\n      if (isCursorInBody(document, cursor)) {\r\n       QName ALTCHUNK = new QName(&quot;http://schemas.openxmlformats.org/wordprocessingml/2006/main&quot;, &quot;altChunk&quot;);\r\n       QName ID = new QName(&quot;http://schemas.openxmlformats.org/officeDocument/2006/relationships&quot;, &quot;id&quot;);\r\n       cursor.beginElement(ALTCHUNK);\r\n       cursor.insertAttributeWithValue(ID, myXWPFHtmlDocument.getId());\r\n       cursor.dispose();   \r\n      }  \r\n     }\r\n    ...\r\n\r\n\r\nComplete example, basing on my code in https://stackoverflow.com/questions/53564028/how-to-add-an-altchunk-element-to-a-xwpfdocument-using-apache-poi, which inserts `altChunk`s before second and fifth paragraph in existing `Word` document.\r\n\r\n\r\n    import java.io.*;\r\n    \r\n    import org.apache.poi.*;\r\n    import org.apache.poi.ooxml.*;\r\n    import org.apache.poi.openxml4j.opc.*;\r\n    \r\n    import org.apache.poi.xwpf.usermodel.*;\r\n    \r\n    import org.apache.xmlbeans.XmlCursor;\r\n    import javax.xml.namespace.QName;\r\n    \r\n    public class InsertHTMLaltChunkInWordAtCursor {\r\n    \r\n     //a method for creating the htmlDoc /word/htmlDoc#.html in the *.docx ZIP archive  \r\n     //String id will be htmlDoc#.\r\n     private static MyXWPFHtmlDocument createHtmlDoc(XWPFDocument document, String id) throws Exception {\r\n      OPCPackage oPCPackage = document.getPackage();\r\n      PackagePartName partName = PackagingURIHelper.createPartName(&quot;/word/&quot; + id + &quot;.html&quot;);\r\n      PackagePart part = oPCPackage.createPart(partName, &quot;text/html&quot;);\r\n      MyXWPFHtmlDocument myXWPFHtmlDocument = new MyXWPFHtmlDocument(part, id);\r\n      document.addRelation(myXWPFHtmlDocument.getId(), new XWPFHtmlRelation(), myXWPFHtmlDocument);\r\n      return myXWPFHtmlDocument;\r\n     }\r\n     \r\n     private static boolean isCursorInBody(XWPFDocument document, XmlCursor cursor) {\r\n      XmlCursor verify = cursor.newCursor();\r\n      verify.toParent();\r\n      boolean result = (verify.getObject() == document.getDocument().getBody());\r\n      verify.dispose();\r\n      return result;\r\n     }\r\n     \r\n     private static void insertAltChunk(XWPFDocument document, MyXWPFHtmlDocument myXWPFHtmlDocument, XmlCursor cursor) {\r\n      if (isCursorInBody(document, cursor)) {\r\n       QName ALTCHUNK = new QName(&quot;http://schemas.openxmlformats.org/wordprocessingml/2006/main&quot;, &quot;altChunk&quot;);\r\n       QName ID = new QName(&quot;http://schemas.openxmlformats.org/officeDocument/2006/relationships&quot;, &quot;id&quot;);\r\n       cursor.beginElement(ALTCHUNK);\r\n       cursor.insertAttributeWithValue(ID, myXWPFHtmlDocument.getId());\r\n       cursor.dispose();   \r\n      }  \r\n     }\r\n    \r\n     public static void main(String[] args) throws Exception {\r\n    \r\n      XWPFDocument document = new XWPFDocument(new FileInputStream(&quot;./WordDocument.docx&quot;));\r\n      \r\n      XWPFParagraph paragraph;\r\n    \r\n      MyXWPFHtmlDocument myXWPFHtmlDocument;\r\n    \r\n      myXWPFHtmlDocument = createHtmlDoc(document, &quot;htmlDoc1&quot;);\r\n      myXWPFHtmlDocument.setHtml(myXWPFHtmlDocument.getHtml().replace(&quot;&lt;body&gt;&lt;/body&gt;&quot;,\r\n       &quot;&lt;body&gt;&lt;p&gt;Simple &lt;b&gt;HTML&lt;/b&gt; &lt;i&gt;formatted&lt;/i&gt; &lt;u&gt;text&lt;/u&gt;&lt;/p&gt;&lt;/body&gt;&quot;));\r\n      paragraph = document.getParagraphArray(1);\r\n      XmlCursor cursor = paragraph.getCTP().newCursor();\r\n      insertAltChunk(document, myXWPFHtmlDocument, cursor);\r\n      \r\n      myXWPFHtmlDocument = createHtmlDoc(document, &quot;htmlDoc2&quot;);\r\n      myXWPFHtmlDocument.setHtml(myXWPFHtmlDocument.getHtml().replace(&quot;&lt;body&gt;&lt;/body&gt;&quot;,\r\n       &quot;&lt;body&gt;&quot; +\r\n       &quot;&lt;table border=\\&quot;1\\&quot;&gt;&quot;+\r\n       &quot;&lt;caption&gt;A table&lt;/caption&gt;&quot; +\r\n       &quot;&lt;tr&gt;&lt;th&gt;Name&lt;/th&gt;&lt;th&gt;Date&lt;/th&gt;&lt;th&gt;Amount&lt;/th&gt;&lt;/tr&gt;&quot; +\r\n       &quot;&lt;tr&gt;&lt;td&gt;John Doe&lt;/td&gt;&lt;td&gt;2018-12-01&lt;/td&gt;&lt;td&gt;1,234.56&lt;/td&gt;&lt;/tr&gt;&quot; +\r\n       &quot;&lt;/table&gt;&quot; +\r\n       &quot;&lt;/body&gt;&quot;\r\n       ));\r\n      paragraph = document.getParagraphArray(4);\r\n      cursor = paragraph.getCTP().newCursor();\r\n      insertAltChunk(document, myXWPFHtmlDocument, cursor);\r\n    \r\n      FileOutputStream out = new FileOutputStream(&quot;InsertHTMLaltChunkInWordAtCursor.docx&quot;);\r\n      document.write(out);\r\n      out.close();\r\n      document.close();\r\n    \r\n     }\r\n    \r\n     //a wrapper class for the  htmlDoc /word/htmlDoc#.html in the *.docx ZIP archive\r\n     //provides methods for manipulating the HTML\r\n     //TODO: We should *not* using String methods for manipulating HTML!\r\n     private static class MyXWPFHtmlDocument extends POIXMLDocumentPart {\r\n    \r\n      private String html;\r\n      private String id;\r\n    \r\n      private MyXWPFHtmlDocument(PackagePart part, String id) throws Exception {\r\n       super(part);\r\n       this.html = &quot;&lt;!DOCTYPE html&gt;&lt;html&gt;&lt;head&gt;&lt;meta http-equiv=\\&quot;content-type\\&quot; content=\\&quot;text/html; charset=utf-8\\&quot;&gt;&lt;style&gt;&lt;/style&gt;&lt;title&gt;HTML import&lt;/title&gt;&lt;/head&gt;&lt;body&gt;&lt;/body&gt;&quot;;\r\n       this.id = id;\r\n      }\r\n    \r\n      private String getId() {\r\n       return id;\r\n      }\r\n    \r\n      private String getHtml() {\r\n       return html;\r\n      }\r\n    \r\n      private void setHtml(String html) {\r\n       this.html = html;\r\n      }\r\n    \r\n      @Override\r\n      protected void commit() throws IOException {\r\n       PackagePart part = getPackagePart();\r\n       OutputStream out = part.getOutputStream();\r\n       Writer writer = new OutputStreamWriter(out, &quot;UTF-8&quot;);\r\n       writer.write(html);\r\n       writer.close();\r\n       out.close();\r\n      }\r\n    \r\n     }\r\n    \r\n     //the XWPFRelation for /word/htmlDoc#.html\r\n     private final static class XWPFHtmlRelation extends POIXMLRelation {\r\n      private XWPFHtmlRelation() {\r\n       super(\r\n        &quot;text/html&quot;, \r\n        &quot;http://schemas.openxmlformats.org/officeDocument/2006/relationships/aFChunk&quot;, \r\n        &quot;/word/htmlDoc#.html&quot;);\r\n      }\r\n     }\r\n    }\r\n\r\n\r\nSee also https://stackoverflow.com/questions/53863126/how-to-replace-texttag-with-html-in-docx-using-apache-poi/53872268#53872268.","title":"Is it possible to insert HTML at a specific position in a Word dokument using Apache POI","body":"<p>To insert something into a <code>XWPFDocument</code>' s body, one would need a <code>XmlCursor</code> which points to the inserting position. Same is done already in methods <code>XWPFDocument. insertNewParagraph(org.apache.xmlbeans.XmlCursor cursor)</code> and <code>XWPFDocument.insertNewTbl(org.apache.xmlbeans.XmlCursor cursor)</code>.</p>\n<p>So we would need a method <code>insertAltChunk(XWPFDocument document, MyXWPFHtmlDocument myXWPFHtmlDocument, XmlCursor cursor)</code> to insert <code>altChunk</code> at position <code>cursor</code> of <code>document</code> pointing to <code>myXWPFHtmlDocument</code>'s <code>Id</code>.</p>\n<pre><code>...\n boolean isCursorInBody(XWPFDocument document, XmlCursor cursor) {\n  XmlCursor verify = cursor.newCursor();\n  verify.toParent();\n  boolean result = (verify.getObject() == document.getDocument().getBody());\n  verify.dispose();\n  return result;\n }\n \n void insertAltChunk(XWPFDocument document, MyXWPFHtmlDocument myXWPFHtmlDocument, XmlCursor cursor) {\n  if (isCursorInBody(document, cursor)) {\n   QName ALTCHUNK = new QName(&quot;http://schemas.openxmlformats.org/wordprocessingml/2006/main&quot;, &quot;altChunk&quot;);\n   QName ID = new QName(&quot;http://schemas.openxmlformats.org/officeDocument/2006/relationships&quot;, &quot;id&quot;);\n   cursor.beginElement(ALTCHUNK);\n   cursor.insertAttributeWithValue(ID, myXWPFHtmlDocument.getId());\n   cursor.dispose();   \n  }  \n }\n...\n</code></pre>\n<p>Complete example, basing on my code in <a href=\"https://stackoverflow.com/questions/53564028/how-to-add-an-altchunk-element-to-a-xwpfdocument-using-apache-poi\">How to add an altChunk element to a XWPFDocument using Apache POI</a>, which inserts <code>altChunk</code>s before second and fifth paragraph in existing <code>Word</code> document.</p>\n<pre><code>import java.io.*;\n\nimport org.apache.poi.*;\nimport org.apache.poi.ooxml.*;\nimport org.apache.poi.openxml4j.opc.*;\n\nimport org.apache.poi.xwpf.usermodel.*;\n\nimport org.apache.xmlbeans.XmlCursor;\nimport javax.xml.namespace.QName;\n\npublic class InsertHTMLaltChunkInWordAtCursor {\n\n //a method for creating the htmlDoc /word/htmlDoc#.html in the *.docx ZIP archive  \n //String id will be htmlDoc#.\n private static MyXWPFHtmlDocument createHtmlDoc(XWPFDocument document, String id) throws Exception {\n  OPCPackage oPCPackage = document.getPackage();\n  PackagePartName partName = PackagingURIHelper.createPartName(&quot;/word/&quot; + id + &quot;.html&quot;);\n  PackagePart part = oPCPackage.createPart(partName, &quot;text/html&quot;);\n  MyXWPFHtmlDocument myXWPFHtmlDocument = new MyXWPFHtmlDocument(part, id);\n  document.addRelation(myXWPFHtmlDocument.getId(), new XWPFHtmlRelation(), myXWPFHtmlDocument);\n  return myXWPFHtmlDocument;\n }\n \n private static boolean isCursorInBody(XWPFDocument document, XmlCursor cursor) {\n  XmlCursor verify = cursor.newCursor();\n  verify.toParent();\n  boolean result = (verify.getObject() == document.getDocument().getBody());\n  verify.dispose();\n  return result;\n }\n \n private static void insertAltChunk(XWPFDocument document, MyXWPFHtmlDocument myXWPFHtmlDocument, XmlCursor cursor) {\n  if (isCursorInBody(document, cursor)) {\n   QName ALTCHUNK = new QName(&quot;http://schemas.openxmlformats.org/wordprocessingml/2006/main&quot;, &quot;altChunk&quot;);\n   QName ID = new QName(&quot;http://schemas.openxmlformats.org/officeDocument/2006/relationships&quot;, &quot;id&quot;);\n   cursor.beginElement(ALTCHUNK);\n   cursor.insertAttributeWithValue(ID, myXWPFHtmlDocument.getId());\n   cursor.dispose();   \n  }  \n }\n\n public static void main(String[] args) throws Exception {\n\n  XWPFDocument document = new XWPFDocument(new FileInputStream(&quot;./WordDocument.docx&quot;));\n  \n  XWPFParagraph paragraph;\n\n  MyXWPFHtmlDocument myXWPFHtmlDocument;\n\n  myXWPFHtmlDocument = createHtmlDoc(document, &quot;htmlDoc1&quot;);\n  myXWPFHtmlDocument.setHtml(myXWPFHtmlDocument.getHtml().replace(&quot;&lt;body&gt;&lt;/body&gt;&quot;,\n   &quot;&lt;body&gt;&lt;p&gt;Simple &lt;b&gt;HTML&lt;/b&gt; &lt;i&gt;formatted&lt;/i&gt; &lt;u&gt;text&lt;/u&gt;&lt;/p&gt;&lt;/body&gt;&quot;));\n  paragraph = document.getParagraphArray(1);\n  XmlCursor cursor = paragraph.getCTP().newCursor();\n  insertAltChunk(document, myXWPFHtmlDocument, cursor);\n  \n  myXWPFHtmlDocument = createHtmlDoc(document, &quot;htmlDoc2&quot;);\n  myXWPFHtmlDocument.setHtml(myXWPFHtmlDocument.getHtml().replace(&quot;&lt;body&gt;&lt;/body&gt;&quot;,\n   &quot;&lt;body&gt;&quot; +\n   &quot;&lt;table border=\\&quot;1\\&quot;&gt;&quot;+\n   &quot;&lt;caption&gt;A table&lt;/caption&gt;&quot; +\n   &quot;&lt;tr&gt;&lt;th&gt;Name&lt;/th&gt;&lt;th&gt;Date&lt;/th&gt;&lt;th&gt;Amount&lt;/th&gt;&lt;/tr&gt;&quot; +\n   &quot;&lt;tr&gt;&lt;td&gt;John Doe&lt;/td&gt;&lt;td&gt;2018-12-01&lt;/td&gt;&lt;td&gt;1,234.56&lt;/td&gt;&lt;/tr&gt;&quot; +\n   &quot;&lt;/table&gt;&quot; +\n   &quot;&lt;/body&gt;&quot;\n   ));\n  paragraph = document.getParagraphArray(4);\n  cursor = paragraph.getCTP().newCursor();\n  insertAltChunk(document, myXWPFHtmlDocument, cursor);\n\n  FileOutputStream out = new FileOutputStream(&quot;InsertHTMLaltChunkInWordAtCursor.docx&quot;);\n  document.write(out);\n  out.close();\n  document.close();\n\n }\n\n //a wrapper class for the  htmlDoc /word/htmlDoc#.html in the *.docx ZIP archive\n //provides methods for manipulating the HTML\n //TODO: We should *not* using String methods for manipulating HTML!\n private static class MyXWPFHtmlDocument extends POIXMLDocumentPart {\n\n  private String html;\n  private String id;\n\n  private MyXWPFHtmlDocument(PackagePart part, String id) throws Exception {\n   super(part);\n   this.html = &quot;&lt;!DOCTYPE html&gt;&lt;html&gt;&lt;head&gt;&lt;meta http-equiv=\\&quot;content-type\\&quot; content=\\&quot;text/html; charset=utf-8\\&quot;&gt;&lt;style&gt;&lt;/style&gt;&lt;title&gt;HTML import&lt;/title&gt;&lt;/head&gt;&lt;body&gt;&lt;/body&gt;&quot;;\n   this.id = id;\n  }\n\n  private String getId() {\n   return id;\n  }\n\n  private String getHtml() {\n   return html;\n  }\n\n  private void setHtml(String html) {\n   this.html = html;\n  }\n\n  @Override\n  protected void commit() throws IOException {\n   PackagePart part = getPackagePart();\n   OutputStream out = part.getOutputStream();\n   Writer writer = new OutputStreamWriter(out, &quot;UTF-8&quot;);\n   writer.write(html);\n   writer.close();\n   out.close();\n  }\n\n }\n\n //the XWPFRelation for /word/htmlDoc#.html\n private final static class XWPFHtmlRelation extends POIXMLRelation {\n  private XWPFHtmlRelation() {\n   super(\n    &quot;text/html&quot;, \n    &quot;http://schemas.openxmlformats.org/officeDocument/2006/relationships/aFChunk&quot;, \n    &quot;/word/htmlDoc#.html&quot;);\n  }\n }\n}\n</code></pre>\n<p>See also <a href=\"https://stackoverflow.com/questions/53863126/how-to-replace-texttag-with-html-in-docx-using-apache-poi/53872268#53872268\">How to replace text(tag) with HTML in docx using Apache POI?</a>.</p>\n"}],"owner":{"account_id":19458717,"reputation":13,"user_id":14233434,"display_name":"Fredrik Axelsson"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1601,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"accepted_answer_id":69738524,"answer_count":1,"score":0,"last_activity_date":1635423791,"creation_date":1635193322,"question_id":69714314,"body_markdown":"I am trying to insert HTML text at a specific position in a ms Word-document using Apache POI. \r\n\r\nI have been following the instruction that i found [here][1] by [Yaun][2]. It is a very good example, but only show how to add HTML last in the document. Is it because it&#180;s not possible to insert it somewhere else or do someone know how to, and have the time to explain to me or point me in the right direction?\r\n\r\nThanks in advance!\r\n\r\nFredrik \r\n\r\n\r\n  [1]: https://stackoverflow.com/questions/53564028/how-to-add-an-altchunk-element-to-a-xwpfdocument-using-apache-poi\r\n  [2]: https://stackoverflow.com/users/10371946/yaun","title":"Is it possible to insert HTML at a specific position in a Word dokument using Apache POI","body":"<p>I am trying to insert HTML text at a specific position in a ms Word-document using Apache POI.</p>\n<p>I have been following the instruction that i found <a href=\"https://stackoverflow.com/questions/53564028/how-to-add-an-altchunk-element-to-a-xwpfdocument-using-apache-poi\">here</a> by <a href=\"https://stackoverflow.com/users/10371946/yaun\">Yaun</a>. It is a very good example, but only show how to add HTML last in the document. Is it because it´s not possible to insert it somewhere else or do someone know how to, and have the time to explain to me or point me in the right direction?</p>\n<p>Thanks in advance!</p>\n<p>Fredrik</p>\n"},{"tags":["java","methods"],"answers":[{"tags":[],"owner":{"account_id":22051200,"reputation":290,"user_id":17269314,"display_name":"Florian S."},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1635423616,"creation_date":1635423616,"answer_id":69754007,"question_id":69752097,"body_markdown":"What about the following implementation:\r\n\r\n```java\r\npublic static void main(String[] args) {\r\n\t\topenMenu();\r\n}\r\n```\r\n\r\nWith the while loop in the menu function :\r\n\r\n\r\n```java\r\nprivate static void openMenu() {\r\n        Scanner scan = new Scanner(System.in);\r\n\r\n\t\tdo {\r\n\r\n\t\t\tSystem.out.println(&quot;1) Meals&quot;);\r\n\t\t\tSystem.out.println(&quot;2) Snacks&quot;);\r\n\t\t\tSystem.out.println(&quot;3) Drinks&quot;);\r\n\t\t\tSystem.out.println(&quot;4) Exit&quot;);\r\n\t\t\tSystem.out.print(&quot;Your choice ? &quot;);\r\n\r\n\t\t\tswitch (scan.nextInt()) {\r\n\t\t\t\tcase 1:\r\n\t\t\t\t\topenMealsMenu();\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 2:\r\n\t\t\t\t\topenSnacksMenu();\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 3:\r\n\t\t\t\t\topenDrinksMenu();\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 4:\r\n                    scan.close();\r\n\t\t\t\t\treturn;\r\n\t\t\t\tdefault:\r\n\t\t\t\t\tSystem.out.println(&quot;This is not a valid choice&quot;);\r\n\t\t\t}\r\n\t\t} while (true);\r\n\r\n\t}\r\n```\r\n\r\nNote that you should only use one scanner in your application. If you need your scanner in the openMealsMenu() for example, pass it as a parameter of the method, or just declare a static scanner in your MP3 class since your methods are in the same class.\r\n\r\nBy the way, by convention, variables should start with a lowercase letter and do not take a `_` (ie. `Options_Drinks3` becomes `optionsDrinks3`).","title":"how to connect the methods to each other like in my code when the user press 2 it will have to go to snack but instead it runs the code to meals java","body":"<p>What about the following implementation:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public static void main(String[] args) {\n        openMenu();\n}\n</code></pre>\n<p>With the while loop in the menu function :</p>\n<pre class=\"lang-java prettyprint-override\"><code>private static void openMenu() {\n        Scanner scan = new Scanner(System.in);\n\n        do {\n\n            System.out.println(&quot;1) Meals&quot;);\n            System.out.println(&quot;2) Snacks&quot;);\n            System.out.println(&quot;3) Drinks&quot;);\n            System.out.println(&quot;4) Exit&quot;);\n            System.out.print(&quot;Your choice ? &quot;);\n\n            switch (scan.nextInt()) {\n                case 1:\n                    openMealsMenu();\n                    break;\n                case 2:\n                    openSnacksMenu();\n                    break;\n                case 3:\n                    openDrinksMenu();\n                    break;\n                case 4:\n                    scan.close();\n                    return;\n                default:\n                    System.out.println(&quot;This is not a valid choice&quot;);\n            }\n        } while (true);\n\n    }\n</code></pre>\n<p>Note that you should only use one scanner in your application. If you need your scanner in the openMealsMenu() for example, pass it as a parameter of the method, or just declare a static scanner in your MP3 class since your methods are in the same class.</p>\n<p>By the way, by convention, variables should start with a lowercase letter and do not take a <code>_</code> (ie. <code>Options_Drinks3</code> becomes <code>optionsDrinks3</code>).</p>\n"}],"owner":{"account_id":23156210,"reputation":1,"user_id":17257419,"display_name":"newbie"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":69,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":69754007,"answer_count":1,"score":0,"last_activity_date":1635423616,"creation_date":1635415540,"question_id":69752097,"body_markdown":"   \r\n\r\n     import java.util.Scanner;\r\n    public class MP3\r\n    {\r\n\r\n//this is the main code that I need to connect each method to each method.\r\n//so that if the user press 2 it will go to snacks but even if you press two now it just continues the code and go-to meals.\r\n//how can I make it so that the user can choose which menu he/she likes to go through?\r\n      \r\n    public static void main(String[] args)\r\n          {\r\n            int Options_Snacks;\r\n            int Options_Snacks2;\r\n            int Options_Snacks3;\r\n            int Options_Drinks;\r\n            int Options_Drinks2;\r\n            int Options_Drinks3;\r\n            int diff,prod ;\r\n            int yes = 1;\r\n            int no = 2;\r\n            int End;\r\n            \r\n            \r\n            do {\r\n            mainmenu();\r\n            mainmeals(); \r\n            mainsnacks();\r\n           \r\n            Scanner myInput = new Scanner(System.in);\r\n            System.out.println(&quot;Would you like to order more: press &quot; + yes +&quot; for yes and &quot; + no +&quot; for no&quot;);\r\n            End = myInput.nextInt();\r\n            \r\n            } while(End == 1);\r\n          } \r\n    \r\n// this code runs smoothly but the other menus don&#39;t run when the user press the number instead it runs all the code within the while loop.\r\n\r\n   \r\n\r\n     public static void mainmenu()\r\n            {\r\n        \r\n            int Orders;\r\n            int Meals = 1;\r\n            int Snacks = 2;\r\n            int Drinks = 3;\r\n            int EXIT = 4;\r\n        \r\n            Scanner myInput = new Scanner(System.in);\r\n            System.out.println(&quot;=======[STRESSFOOD]=====&quot;);\r\n            System.out.println(&quot;---------[ Menu ]-------&quot;);\r\n            System.out.println(&quot;1----------Meals--------&quot;);\r\n            System.out.println(&quot;2---------Snacks--------&quot;);\r\n            System.out.println(&quot;3---------Drinks--------&quot;);\r\n            System.out.println(&quot;4--------[ EXIT ]-------&quot;);\r\n            Orders = myInput.nextInt();\r\n        \r\n           \r\n           }\r\n        [here&#39;s the code I didn&#39;t get all in the picture][1]\r\n        }\r\n\r\n[1]: https://i.stack.imgur.com/PosS5.png\r\n","title":"how to connect the methods to each other like in my code when the user press 2 it will have to go to snack but instead it runs the code to meals java","body":"<pre><code> import java.util.Scanner;\npublic class MP3\n{\n</code></pre>\n<p>//this is the main code that I need to connect each method to each method.\n//so that if the user press 2 it will go to snacks but even if you press two now it just continues the code and go-to meals.\n//how can I make it so that the user can choose which menu he/she likes to go through?</p>\n<pre><code>public static void main(String[] args)\n      {\n        int Options_Snacks;\n        int Options_Snacks2;\n        int Options_Snacks3;\n        int Options_Drinks;\n        int Options_Drinks2;\n        int Options_Drinks3;\n        int diff,prod ;\n        int yes = 1;\n        int no = 2;\n        int End;\n        \n        \n        do {\n        mainmenu();\n        mainmeals(); \n        mainsnacks();\n       \n        Scanner myInput = new Scanner(System.in);\n        System.out.println(&quot;Would you like to order more: press &quot; + yes +&quot; for yes and &quot; + no +&quot; for no&quot;);\n        End = myInput.nextInt();\n        \n        } while(End == 1);\n      } \n</code></pre>\n<p>// this code runs smoothly but the other menus don't run when the user press the number instead it runs all the code within the while loop.</p>\n<pre><code> public static void mainmenu()\n        {\n    \n        int Orders;\n        int Meals = 1;\n        int Snacks = 2;\n        int Drinks = 3;\n        int EXIT = 4;\n    \n        Scanner myInput = new Scanner(System.in);\n        System.out.println(&quot;=======[STRESSFOOD]=====&quot;);\n        System.out.println(&quot;---------[ Menu ]-------&quot;);\n        System.out.println(&quot;1----------Meals--------&quot;);\n        System.out.println(&quot;2---------Snacks--------&quot;);\n        System.out.println(&quot;3---------Drinks--------&quot;);\n        System.out.println(&quot;4--------[ EXIT ]-------&quot;);\n        Orders = myInput.nextInt();\n    \n       \n       }\n    [here's the code I didn't get all in the picture][1]\n    }\n</code></pre>\n"},{"tags":["java","java-9","java-module"],"comments":[{"owner":{"account_id":362885,"reputation":37256,"user_id":706317,"accept_rate":70,"display_name":"ZhekaKozlov"},"score":4,"creation_date":1518426447,"post_id":48742354,"comment_id":84485207,"body_markdown":"There is no **best way**. All approaches have their pros and cons. `URLClassLoader` is the oldest approach and the most well-known. There is also a new method `Lookup.defineClass` in Java 9 but it can only load a class in the same package. You should also probably look at OSGi but it can be pretty cumbersome.","body":"There is no <b>best way</b>. All approaches have their pros and cons. <code>URLClassLoader</code> is the oldest approach and the most well-known. There is also a new method <code>Lookup.defineClass</code> in Java 9 but it can only load a class in the same package. You should also probably look at OSGi but it can be pretty cumbersome."},{"owner":{"account_id":1195114,"reputation":848,"user_id":1167021,"display_name":"leftbit"},"score":0,"creation_date":1518427565,"post_id":48742354,"comment_id":84485849,"body_markdown":"You could use a dependency injection framework to manage the wiring for you. Or you could use your build system to create and manage device specific solutions (for example Maven assemblies).","body":"You could use a dependency injection framework to manage the wiring for you. Or you could use your build system to create and manage device specific solutions (for example Maven assemblies)."},{"owner":{"account_id":2264130,"reputation":38897,"user_id":1993366,"accept_rate":86,"display_name":"vikingsteve"},"score":1,"creation_date":1518427661,"post_id":48742354,"comment_id":84485903,"body_markdown":"https://stackoverflow.com/questions/16102010/dynamically-loading-plugin-jars-using-serviceloader","body":"<a href=\"https://stackoverflow.com/questions/16102010/dynamically-loading-plugin-jars-using-serviceloader\" title=\"dynamically loading plugin jars using serviceloader\">stackoverflow.com/questions/16102010/&hellip;</a>"},{"owner":{"account_id":10098519,"reputation":5323,"user_id":7463126,"display_name":"Alan Bateman"},"score":3,"creation_date":1518428895,"post_id":48742354,"comment_id":84486726,"body_markdown":"Make sure to explore services and ServiceLoader. It may be that you can create service providers for each device type, each implements a service interface the core application uses.","body":"Make sure to explore services and ServiceLoader. It may be that you can create service providers for each device type, each implements a service interface the core application uses."},{"owner":{"account_id":8281147,"reputation":420,"user_id":6225803,"display_name":"krishna T"},"score":0,"creation_date":1635424580,"post_id":48742354,"comment_id":123298158,"body_markdown":"Better answer at https://stackoverflow.com/a/62749934/6225803","body":"Better answer at <a href=\"https://stackoverflow.com/a/62749934/6225803\">stackoverflow.com/a/62749934/6225803</a>"}],"answers":[{"tags":[],"owner":{"account_id":12040719,"reputation":2526,"user_id":8807741,"display_name":"SeverityOne"},"down_vote_count":0,"up_vote_count":5,"is_accepted":true,"score":5,"last_activity_date":1518429337,"creation_date":1518429337,"answer_id":48743627,"question_id":48742354,"body_markdown":"It sounds like you might want to use the [ServicerLoader][1] interface, which has been available since Java 6. However, bear in mind that, if you want to use Spring dependency injection, this is probably not what you want.\r\n\r\n  [1]: https://docs.oracle.com/javase/9/docs/api/index.html?overview-summary.html","title":"Best approach to dynamically load modules (classes) in Java","body":"<p>It sounds like you might want to use the <a href=\"https://docs.oracle.com/javase/9/docs/api/index.html?overview-summary.html\" rel=\"noreferrer\">ServicerLoader</a> interface, which has been available since Java 6. However, bear in mind that, if you want to use Spring dependency injection, this is probably not what you want.</p>\n"},{"tags":[],"owner":{"account_id":2497295,"reputation":3931,"user_id":2173392,"display_name":"pdem"},"down_vote_count":0,"up_vote_count":7,"is_accepted":false,"score":7,"last_activity_date":1518528815,"creation_date":1518528345,"answer_id":48767891,"question_id":48742354,"body_markdown":"Additionnaly to the  ServicerLoader usage given by @SeverityOne, you can use the module-info.java to declare the different instanciation of the interface, using  &quot;uses&quot;/&quot;provides&quot; keywords.\r\n\r\nThen you use a module path instead of a classpath, it loads all the directory containing your modules, don&#39;t need to create a specific classLoader\r\n\r\nThe serviceLoader usage:\r\n\r\n    public static void main(String[] args) {\r\n        ServiceLoader&lt;IGreeting&gt; sl = ServiceLoader.load(IGreeting.class);\r\n        IGreeting greeting = sl.findFirst().orElseThrow(NullPointerException::new);\r\n        System.out.println( greeting.regular(&quot;world&quot;));\r\n    }\r\n\r\n\r\nIn the users project:\r\n\r\n    module pl.tfij.java9modules.app {\r\n        exports pl.tfij.java9modules.app;\r\n        uses pl.tfij.java9modules.app.IGreeting;\r\n    }\r\n\r\nIn the provider project:\r\n\r\n    module pl.tfij.java9modules.greetings {\r\n        requires pl.tfij.java9modules.app;\r\n        provides pl.tfij.java9modules.app.IGreeting\r\n                with pl.tfij.java9modules.greetings.Greeting;\r\n    }\r\n\r\n\r\nAnd finally the CLI usage\r\n\r\n    java --module-path mods --module pl.tfij.java9modules.app\r\n\r\n\r\nHere is an example; [Github example][1] (Thanks for &quot;tfij/&quot; repository initial exemple)\r\n\r\n  [1]: https://github.com/pdemanget/Java-9-modules---the-simplest-example\r\n\r\nEdit, I realized the repository already provides decoupling examples:\r\nhttps://github.com/tfij/Java-9-modules---reducing-coupling-of-modules","title":"Best approach to dynamically load modules (classes) in Java","body":"<p>Additionnaly to the  ServicerLoader usage given by @SeverityOne, you can use the module-info.java to declare the different instanciation of the interface, using  \"uses\"/\"provides\" keywords.</p>\n\n<p>Then you use a module path instead of a classpath, it loads all the directory containing your modules, don't need to create a specific classLoader</p>\n\n<p>The serviceLoader usage:</p>\n\n<pre><code>public static void main(String[] args) {\n    ServiceLoader&lt;IGreeting&gt; sl = ServiceLoader.load(IGreeting.class);\n    IGreeting greeting = sl.findFirst().orElseThrow(NullPointerException::new);\n    System.out.println( greeting.regular(\"world\"));\n}\n</code></pre>\n\n<p>In the users project:</p>\n\n<pre><code>module pl.tfij.java9modules.app {\n    exports pl.tfij.java9modules.app;\n    uses pl.tfij.java9modules.app.IGreeting;\n}\n</code></pre>\n\n<p>In the provider project:</p>\n\n<pre><code>module pl.tfij.java9modules.greetings {\n    requires pl.tfij.java9modules.app;\n    provides pl.tfij.java9modules.app.IGreeting\n            with pl.tfij.java9modules.greetings.Greeting;\n}\n</code></pre>\n\n<p>And finally the CLI usage</p>\n\n<pre><code>java --module-path mods --module pl.tfij.java9modules.app\n</code></pre>\n\n<p>Here is an example; <a href=\"https://github.com/pdemanget/Java-9-modules---the-simplest-example\" rel=\"noreferrer\">Github example</a> (Thanks for \"tfij/\" repository initial exemple)</p>\n\n<p>Edit, I realized the repository already provides decoupling examples:\n<a href=\"https://github.com/tfij/Java-9-modules---reducing-coupling-of-modules\" rel=\"noreferrer\">https://github.com/tfij/Java-9-modules---reducing-coupling-of-modules</a></p>\n"},{"tags":[],"owner":{"account_id":8281147,"reputation":420,"user_id":6225803,"display_name":"krishna T"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1635423475,"creation_date":1565518682,"answer_id":57449123,"question_id":48742354,"body_markdown":"There are two scenarios.\r\n\r\n1.\tImplementation jar&#39;s are on classpath    \r\n\t\tIn this scenario you can simply use ServiceLoader API (refer to @pdem answer)  \r\n2.\tImplementation jar&#39;s not on classpath\r\n\t\tLets Assume BankController is your interface and CoreController is your implementation.\r\n&lt;br&gt; If you want to load its implementation dynamically from dynamic path,c create a new module layer and load class.\r\n\r\nRefer to the following piece of code:\r\n\t\t\r\n    \t\tprivate final BankController loadController(final BankConfig config) {\r\n    \t\t\tSystem.out.println(&quot;Loading bank with config : &quot; + JSON.toJson(config));\r\n    \t\t\ttry {\r\n    \t\t\t\t//Curent ModuleLayer is usually boot layer. but it can be different if you are using multiple layers\r\n    \t\t\t\tModuleLayer currentModuleLayer \t\t = this.getClass().getModule().getLayer(); //ModuleLayer.boot();\r\n    \t\t\t\tfinal Set&lt;Path&gt; modulePathSet\t\t = Set.of(new File(&quot;path of implementation&quot;).toPath());\r\n    \t\t\t\t//ModuleFinder to find modules \r\n    \t\t\t\tfinal ModuleFinder moduleFinder  \t = ModuleFinder.of(modulePathSet.toArray(new Path[0]));\r\n    \t\t\t\t//I really dont know why does it requires empty finder.\r\n    \t\t\t\tfinal ModuleFinder emptyFinder   \t = ModuleFinder.of(new Path[0]);\r\n    \t\t\t\t//ModuleNames to be loaded\r\n    \t\t\t\tfinal Set&lt;String&gt;  moduleNames   \t = moduleFinder.findAll().stream().map(moduleRef -&gt; moduleRef.descriptor().name()).collect(Collectors.toSet());\r\n    \t\t\t\t// Unless you want to use URLClassloader for tomcat like situation, use Current Class Loader \r\n    \t\t\t\tfinal ClassLoader loader          \t = this.getClass().getClassLoader();\r\n    \t\t\t\t//Derive new configuration from current module layer configuration\r\n    \t\t\t\tfinal Configuration  configuration   = currentModuleLayer.configuration().resolveAndBind(moduleFinder, emptyFinder,\tmoduleNames);\r\n    \t\t\t\t//New Module layer derived from current modulee layer \r\n    \t\t\t\tfinal ModuleLayer    moduleLayer     = currentModuleLayer.defineModulesWithOneLoader(configuration, loader);\r\n    \t\t\t\t//find module and load class Load class \r\n    \t\t\t\tfinal Class&lt;?&gt;       controllerClass = moduleLayer.findModule(&quot;org.util.npci.coreconnect&quot;).get().getClassLoader().loadClass(&quot;org.util.npci.coreconnect.CoreController&quot;);\r\n    \t\t\t\t//create new instance of Implementation, in this case org.util.npci.coreconnect.CoreController implements org.util.npci.api.BankController\r\n    \t\t\t\tfinal BankController bankController  = (BankController) controllerClass.getConstructors()[0].newInstance(config);\r\n    \t\t\t\treturn bankController;\r\n    \t\t\t} catch (Exception e) {BootLogger.info(e);}\r\n    \t\t\treturn null;\r\n    \t\t}\r\n\r\n\r\n\r\nReference : https://docs.oracle.com/javase/9/docs/api/java/lang/module/Configuration.html\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/ZP5wn.png","title":"Best approach to dynamically load modules (classes) in Java","body":"<p>There are two scenarios.</p>\n<ol>\n<li>Implementation jar's are on classpath<br />\nIn this scenario you can simply use ServiceLoader API (refer to @pdem answer)</li>\n<li>Implementation jar's not on classpath\nLets Assume BankController is your interface and CoreController is your implementation.\n<br> If you want to load its implementation dynamically from dynamic path,c create a new module layer and load class.</li>\n</ol>\n<p>Refer to the following piece of code:</p>\n<pre><code>        private final BankController loadController(final BankConfig config) {\n            System.out.println(&quot;Loading bank with config : &quot; + JSON.toJson(config));\n            try {\n                //Curent ModuleLayer is usually boot layer. but it can be different if you are using multiple layers\n                ModuleLayer currentModuleLayer       = this.getClass().getModule().getLayer(); //ModuleLayer.boot();\n                final Set&lt;Path&gt; modulePathSet        = Set.of(new File(&quot;path of implementation&quot;).toPath());\n                //ModuleFinder to find modules \n                final ModuleFinder moduleFinder      = ModuleFinder.of(modulePathSet.toArray(new Path[0]));\n                //I really dont know why does it requires empty finder.\n                final ModuleFinder emptyFinder       = ModuleFinder.of(new Path[0]);\n                //ModuleNames to be loaded\n                final Set&lt;String&gt;  moduleNames       = moduleFinder.findAll().stream().map(moduleRef -&gt; moduleRef.descriptor().name()).collect(Collectors.toSet());\n                // Unless you want to use URLClassloader for tomcat like situation, use Current Class Loader \n                final ClassLoader loader             = this.getClass().getClassLoader();\n                //Derive new configuration from current module layer configuration\n                final Configuration  configuration   = currentModuleLayer.configuration().resolveAndBind(moduleFinder, emptyFinder, moduleNames);\n                //New Module layer derived from current modulee layer \n                final ModuleLayer    moduleLayer     = currentModuleLayer.defineModulesWithOneLoader(configuration, loader);\n                //find module and load class Load class \n                final Class&lt;?&gt;       controllerClass = moduleLayer.findModule(&quot;org.util.npci.coreconnect&quot;).get().getClassLoader().loadClass(&quot;org.util.npci.coreconnect.CoreController&quot;);\n                //create new instance of Implementation, in this case org.util.npci.coreconnect.CoreController implements org.util.npci.api.BankController\n                final BankController bankController  = (BankController) controllerClass.getConstructors()[0].newInstance(config);\n                return bankController;\n            } catch (Exception e) {BootLogger.info(e);}\n            return null;\n        }\n</code></pre>\n<p>Reference : <a href=\"https://docs.oracle.com/javase/9/docs/api/java/lang/module/Configuration.html\" rel=\"nofollow noreferrer\">https://docs.oracle.com/javase/9/docs/api/java/lang/module/Configuration.html</a></p>\n<p><a href=\"https://i.stack.imgur.com/ZP5wn.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/ZP5wn.png\" alt=\"enter image description here\" /></a></p>\n"}],"owner":{"account_id":6582932,"reputation":315,"user_id":5086669,"accept_rate":100,"display_name":"Mastarius"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":7423,"favorite_count":0,"down_vote_count":0,"up_vote_count":9,"accepted_answer_id":48743627,"answer_count":3,"score":9,"last_activity_date":1635423475,"creation_date":1518424742,"question_id":48742354,"body_markdown":"I&#39;m currently writing an application that requires to operate on different type of devices. My approach would be to make a &quot;modular&quot; application that can dynamically load different classes according to the device they need to operate on.\r\n\r\nTo make the application easily extensible, my goal is to assign a specific path to the additional modules (either .jar or .class files) leaving the core program as it is. This would be crucial when having different customers requiring different modules (without having to compile a different application for each of them).\r\n\r\nThese modules would implement a common interface, while the &quot;core&quot; application can use these methods defined on the interface and let the single implementations do the work. **What&#39;s the best way to load them on demand?** I was considering the use of URLClassLoader but i don&#39;t know if this approach is up-to-date according to new patterns and Java trends, as I would like to avoid a poorly designed application and deprecated techniques. **What&#39;s an alternative best approach to make a modular and easily extensible application with JDK 9** (that can be extended just by adding module files to a folder) ?","title":"Best approach to dynamically load modules (classes) in Java","body":"<p>I'm currently writing an application that requires to operate on different type of devices. My approach would be to make a \"modular\" application that can dynamically load different classes according to the device they need to operate on.</p>\n\n<p>To make the application easily extensible, my goal is to assign a specific path to the additional modules (either .jar or .class files) leaving the core program as it is. This would be crucial when having different customers requiring different modules (without having to compile a different application for each of them).</p>\n\n<p>These modules would implement a common interface, while the \"core\" application can use these methods defined on the interface and let the single implementations do the work. <strong>What's the best way to load them on demand?</strong> I was considering the use of URLClassLoader but i don't know if this approach is up-to-date according to new patterns and Java trends, as I would like to avoid a poorly designed application and deprecated techniques. <strong>What's an alternative best approach to make a modular and easily extensible application with JDK 9</strong> (that can be extended just by adding module files to a folder) ?</p>\n"},{"tags":["java","spring-boot","apache-kafka","spring-kafka"],"comments":[{"owner":{"account_id":87845,"reputation":15821,"user_id":243373,"accept_rate":100,"display_name":"TT."},"score":0,"creation_date":1635423217,"post_id":69752930,"comment_id":123297507,"body_markdown":"Hi Conor. To mark your question as solved, do not edit it and add &quot;solved&quot; to the title. Instead, check the checkmark next to an answer (once the timer has elapsed when self-answering).","body":"Hi Conor. To mark your question as solved, do not edit it and add &quot;solved&quot; to the title. Instead, check the checkmark next to an answer (once the timer has elapsed when self-answering)."},{"owner":{"account_id":6700203,"reputation":1,"user_id":9540172,"display_name":"Conor"},"score":0,"creation_date":1635522759,"post_id":69752930,"comment_id":123329678,"body_markdown":"no problem, thanks for the tip. I had tried, and din&#39;t want people wasting their time looking at it.","body":"no problem, thanks for the tip. I had tried, and din&#39;t want people wasting their time looking at it."}],"answers":[{"tags":[],"owner":{"account_id":6700203,"reputation":1,"user_id":9540172,"display_name":"Conor"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1635422462,"creation_date":1635422462,"answer_id":69753725,"question_id":69752930,"body_markdown":"Found the problem. \r\n\r\nIt was a stupid one that I didn&#39;t notice. \r\n\r\n**@Bean** obviously caused the class to be loaded twice throwing the error. ","title":"Two functions in one Kafka stage. Same State Directory Error","body":"<p>Found the problem.</p>\n<p>It was a stupid one that I didn't notice.</p>\n<p><strong>@Bean</strong> obviously caused the class to be loaded twice throwing the error.</p>\n"}],"owner":{"account_id":6700203,"reputation":1,"user_id":9540172,"display_name":"Conor"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":489,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1635423140,"creation_date":1635419082,"question_id":69752930,"body_markdown":"I have an application that consumes objects (Type A) from Kafka streams.\r\nIt then normalises the object (Type B), and finally combines the objects using a generated Key (taken from object). The output produces a final object (Type C) which has some data, as well as a list of the objects identified as similar.\r\n\r\nMy problem is that when starting the application I get the following error\r\n\r\n    Failed to start bean &#39;streamsBuilderFactoryManager&#39;; nested exception is org.springframework.kafka.KafkaException: Could not start stream: ; nested exception is org.springframework.kafka.KafkaException: Could not start stream: ; nested exception is org.apache.kafka.streams.errors.StreamsException: Unable to initialize state, this can happen if multiple instances of Kafka Streams are running in the same state directory\r\n    \tat org.springframework.context.support.DefaultLifecycleProcessor.doStart(DefaultLifecycleProcessor.java:181) ~[spring-context-5.3.8.jar:5.3.8]\r\n    \tat org.springframework.context.support.DefaultLifecycleProcessor.access$200(DefaultLifecycleProcessor.java:54) ~[spring-context-5.3.8.jar:5.3.8]\r\n    \tat org.springframework.context.support.DefaultLifecycleProcessor$LifecycleGroup.start(DefaultLifecycleProcessor.java:356) ~[spring-context-5.3.8.jar:5.3.8]\r\n    \tat org.springframework.context.support.DefaultLifecycleProcessor$$Lambda$914/000000000000000000.accept(Unknown Source) ~[na:na]\r\n    \tat java.base/java.lang.Iterable.forEach(Iterable.java:75) ~[na:na]\r\n    \tat org.springframework.context.support.DefaultLifecycleProcessor.startBeans(DefaultLifecycleProcessor.java:155) ~[spring-context-5.3.8.jar:5.3.8]\r\n    \tat org.springframework.context.support.DefaultLifecycleProcessor.onRefresh(DefaultLifecycleProcessor.java:123) ~[spring-context-5.3.8.jar:5.3.8]\r\n    \tat org.springframework.context.support.AbstractApplicationContext.finishRefresh(AbstractApplicationContext.java:935) ~[spring-context-5.3.8.jar:5.3.8]\r\n    \tat org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:586) ~[spring-context-5.3.8.jar:5.3.8]\r\n    \tat org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:145) ~[spring-boot-2.5.1.jar:2.5.1]\r\n    \tat org.springframework.boot.SpringApplication.refresh(SpringApplication.java:754) ~[spring-boot-2.5.1.jar:2.5.1]\r\n    \tat org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:434) ~[spring-boot-2.5.1.jar:2.5.1]\r\n    \tat org.springframework.boot.SpringApplication.run(SpringApplication.java:338) ~[spring-boot-2.5.1.jar:2.5.1]\r\n    \tat org.springframework.boot.SpringApplication.run(SpringApplication.java:1343) ~[spring-boot-2.5.1.jar:2.5.1]\r\n    \tat org.springframework.boot.SpringApplication.run(SpringApplication.java:1332) ~[spring-boot-2.5.1.jar:2.5.1]\r\n    \tat com.voxcarrier.sip.transformation.Application.main(Application.java:16) ~[main/:na]\r\n    \tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]\r\n    \tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62) ~[na:na]\r\n    \tat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]\r\n    \tat java.base/java.lang.reflect.Method.invoke(Method.java:566) ~[na:na]\r\n    \tat org.springframework.boot.devtools.restart.RestartLauncher.run(RestartLauncher.java:49) ~[spring-boot-devtools-2.5.1.jar:2.5.1]\r\n    Caused by: org.springframework.kafka.KafkaException: Could not start stream: ; nested exception is org.springframework.kafka.KafkaException: Could not start stream: ; nested exception is org.apache.kafka.streams.errors.StreamsException: Unable to initialize state, this can happen if multiple instances of Kafka Streams are running in the same state directory\r\n    \tat org.springframework.cloud.stream.binder.kafka.streams.StreamsBuilderFactoryManager.start(StreamsBuilderFactoryManager.java:93) ~[spring-cloud-stream-binder-kafka-streams-3.0.11.RELEASE.jar:3.0.11.RELEASE]\r\n    \tat org.springframework.context.support.DefaultLifecycleProcessor.doStart(DefaultLifecycleProcessor.java:178) ~[spring-context-5.3.8.jar:5.3.8]\r\n    \t... 20 common frames omitted\r\n    Caused by: org.springframework.kafka.KafkaException: Could not start stream: ; nested exception is org.apache.kafka.streams.errors.StreamsException: Unable to initialize state, this can happen if multiple instances of Kafka Streams are running in the same state directory\r\n    \tat org.springframework.kafka.config.StreamsBuilderFactoryBean.start(StreamsBuilderFactoryBean.java:333) ~[spring-kafka-2.7.2.jar:2.7.2]\r\n    \tat org.springframework.cloud.stream.binder.kafka.streams.StreamsBuilderFactoryManager.start(StreamsBuilderFactoryManager.java:81) ~[spring-cloud-stream-binder-kafka-streams-3.0.11.RELEASE.jar:3.0.11.RELEASE]\r\n    \t... 21 common frames omitted\r\n    Caused by: org.apache.kafka.streams.errors.StreamsException: Unable to initialize state, this can happen if multiple instances of Kafka Streams are running in the same state directory\r\n    \tat org.apache.kafka.streams.processor.internals.StateDirectory.initializeProcessId(StateDirectory.java:185) ~[kafka-streams-2.7.1.jar:na]\r\n    \tat org.apache.kafka.streams.KafkaStreams.&lt;init&gt;(KafkaStreams.java:677) ~[kafka-streams-2.7.1.jar:na]\r\n    \tat org.apache.kafka.streams.KafkaStreams.&lt;init&gt;(KafkaStreams.java:581) ~[kafka-streams-2.7.1.jar:na]\r\n    \tat org.springframework.kafka.config.StreamsBuilderFactoryBean.start(StreamsBuilderFactoryBean.java:316) ~[spring-kafka-2.7.2.jar:2.7.2]\r\n    \t... 22 common frames omitted\r\n\r\n\r\nI have 2 functions \r\n\r\nFirst Function:\r\n\r\n    @Bean\r\n    public Function&lt;KStream&lt;?, TypeA&gt;, KStream&lt;?,TypeB&gt;&gt; normaliseTypeaObject() {\r\n        log.info(&quot;Starting Normalize&quot;);\r\n        return l -&gt;\r\n            l\r\n                .peek((k,v)-&gt; log.info(v))\r\n                .mapValues(this::normalise);\r\n    }\r\n\r\nSecond function:\r\n\r\n    @Bean\r\n    public Function&lt;KStream&lt;?, TypeB&gt;, KStream&lt;String, TypeC&gt;&gt; correlation() {\r\n        log.info(&quot;Starting Correlate&quot;);\r\n        return keyGenerator()\r\n            .andThen(correlate());\r\n    }\r\n\r\nThey are used but the following Stage Function:\r\n\r\n    @Bean\r\n    public Function&lt;KStream&lt;?, TypeA&gt;, KStream&lt;String, TypeC&gt;&gt; correlationStageFunction(){\r\n        log.info(&quot;Correlate Stage&quot;);\r\n        return normaliseTypeaObject()\r\n            .andThen(correlate.correlation());\r\n    }\r\n\r\n\r\nEvery time I start the application I receive the error, even if I cleared the state directory. \r\n\r\nI&#39;m at a loss, as the only things I find are related to 2 separate applications using the same state directory. I feel that this is the same, but as I call them under 1 function as far as the Kafka configuration is compared, it not as simple as separating them in the config. \r\n\r\nAny help would be great. ","title":"Two functions in one Kafka stage. Same State Directory Error","body":"<p>I have an application that consumes objects (Type A) from Kafka streams.\nIt then normalises the object (Type B), and finally combines the objects using a generated Key (taken from object). The output produces a final object (Type C) which has some data, as well as a list of the objects identified as similar.</p>\n<p>My problem is that when starting the application I get the following error</p>\n<pre><code>Failed to start bean 'streamsBuilderFactoryManager'; nested exception is org.springframework.kafka.KafkaException: Could not start stream: ; nested exception is org.springframework.kafka.KafkaException: Could not start stream: ; nested exception is org.apache.kafka.streams.errors.StreamsException: Unable to initialize state, this can happen if multiple instances of Kafka Streams are running in the same state directory\n    at org.springframework.context.support.DefaultLifecycleProcessor.doStart(DefaultLifecycleProcessor.java:181) ~[spring-context-5.3.8.jar:5.3.8]\n    at org.springframework.context.support.DefaultLifecycleProcessor.access$200(DefaultLifecycleProcessor.java:54) ~[spring-context-5.3.8.jar:5.3.8]\n    at org.springframework.context.support.DefaultLifecycleProcessor$LifecycleGroup.start(DefaultLifecycleProcessor.java:356) ~[spring-context-5.3.8.jar:5.3.8]\n    at org.springframework.context.support.DefaultLifecycleProcessor$$Lambda$914/000000000000000000.accept(Unknown Source) ~[na:na]\n    at java.base/java.lang.Iterable.forEach(Iterable.java:75) ~[na:na]\n    at org.springframework.context.support.DefaultLifecycleProcessor.startBeans(DefaultLifecycleProcessor.java:155) ~[spring-context-5.3.8.jar:5.3.8]\n    at org.springframework.context.support.DefaultLifecycleProcessor.onRefresh(DefaultLifecycleProcessor.java:123) ~[spring-context-5.3.8.jar:5.3.8]\n    at org.springframework.context.support.AbstractApplicationContext.finishRefresh(AbstractApplicationContext.java:935) ~[spring-context-5.3.8.jar:5.3.8]\n    at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:586) ~[spring-context-5.3.8.jar:5.3.8]\n    at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:145) ~[spring-boot-2.5.1.jar:2.5.1]\n    at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:754) ~[spring-boot-2.5.1.jar:2.5.1]\n    at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:434) ~[spring-boot-2.5.1.jar:2.5.1]\n    at org.springframework.boot.SpringApplication.run(SpringApplication.java:338) ~[spring-boot-2.5.1.jar:2.5.1]\n    at org.springframework.boot.SpringApplication.run(SpringApplication.java:1343) ~[spring-boot-2.5.1.jar:2.5.1]\n    at org.springframework.boot.SpringApplication.run(SpringApplication.java:1332) ~[spring-boot-2.5.1.jar:2.5.1]\n    at com.voxcarrier.sip.transformation.Application.main(Application.java:16) ~[main/:na]\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62) ~[na:na]\n    at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]\n    at java.base/java.lang.reflect.Method.invoke(Method.java:566) ~[na:na]\n    at org.springframework.boot.devtools.restart.RestartLauncher.run(RestartLauncher.java:49) ~[spring-boot-devtools-2.5.1.jar:2.5.1]\nCaused by: org.springframework.kafka.KafkaException: Could not start stream: ; nested exception is org.springframework.kafka.KafkaException: Could not start stream: ; nested exception is org.apache.kafka.streams.errors.StreamsException: Unable to initialize state, this can happen if multiple instances of Kafka Streams are running in the same state directory\n    at org.springframework.cloud.stream.binder.kafka.streams.StreamsBuilderFactoryManager.start(StreamsBuilderFactoryManager.java:93) ~[spring-cloud-stream-binder-kafka-streams-3.0.11.RELEASE.jar:3.0.11.RELEASE]\n    at org.springframework.context.support.DefaultLifecycleProcessor.doStart(DefaultLifecycleProcessor.java:178) ~[spring-context-5.3.8.jar:5.3.8]\n    ... 20 common frames omitted\nCaused by: org.springframework.kafka.KafkaException: Could not start stream: ; nested exception is org.apache.kafka.streams.errors.StreamsException: Unable to initialize state, this can happen if multiple instances of Kafka Streams are running in the same state directory\n    at org.springframework.kafka.config.StreamsBuilderFactoryBean.start(StreamsBuilderFactoryBean.java:333) ~[spring-kafka-2.7.2.jar:2.7.2]\n    at org.springframework.cloud.stream.binder.kafka.streams.StreamsBuilderFactoryManager.start(StreamsBuilderFactoryManager.java:81) ~[spring-cloud-stream-binder-kafka-streams-3.0.11.RELEASE.jar:3.0.11.RELEASE]\n    ... 21 common frames omitted\nCaused by: org.apache.kafka.streams.errors.StreamsException: Unable to initialize state, this can happen if multiple instances of Kafka Streams are running in the same state directory\n    at org.apache.kafka.streams.processor.internals.StateDirectory.initializeProcessId(StateDirectory.java:185) ~[kafka-streams-2.7.1.jar:na]\n    at org.apache.kafka.streams.KafkaStreams.&lt;init&gt;(KafkaStreams.java:677) ~[kafka-streams-2.7.1.jar:na]\n    at org.apache.kafka.streams.KafkaStreams.&lt;init&gt;(KafkaStreams.java:581) ~[kafka-streams-2.7.1.jar:na]\n    at org.springframework.kafka.config.StreamsBuilderFactoryBean.start(StreamsBuilderFactoryBean.java:316) ~[spring-kafka-2.7.2.jar:2.7.2]\n    ... 22 common frames omitted\n</code></pre>\n<p>I have 2 functions</p>\n<p>First Function:</p>\n<pre><code>@Bean\npublic Function&lt;KStream&lt;?, TypeA&gt;, KStream&lt;?,TypeB&gt;&gt; normaliseTypeaObject() {\n    log.info(&quot;Starting Normalize&quot;);\n    return l -&gt;\n        l\n            .peek((k,v)-&gt; log.info(v))\n            .mapValues(this::normalise);\n}\n</code></pre>\n<p>Second function:</p>\n<pre><code>@Bean\npublic Function&lt;KStream&lt;?, TypeB&gt;, KStream&lt;String, TypeC&gt;&gt; correlation() {\n    log.info(&quot;Starting Correlate&quot;);\n    return keyGenerator()\n        .andThen(correlate());\n}\n</code></pre>\n<p>They are used but the following Stage Function:</p>\n<pre><code>@Bean\npublic Function&lt;KStream&lt;?, TypeA&gt;, KStream&lt;String, TypeC&gt;&gt; correlationStageFunction(){\n    log.info(&quot;Correlate Stage&quot;);\n    return normaliseTypeaObject()\n        .andThen(correlate.correlation());\n}\n</code></pre>\n<p>Every time I start the application I receive the error, even if I cleared the state directory.</p>\n<p>I'm at a loss, as the only things I find are related to 2 separate applications using the same state directory. I feel that this is the same, but as I call them under 1 function as far as the Kafka configuration is compared, it not as simple as separating them in the config.</p>\n<p>Any help would be great.</p>\n"},{"tags":["java","json","jackson","deserialization"],"comments":[{"owner":{"account_id":319873,"reputation":87612,"user_id":637853,"accept_rate":50,"display_name":"Thomas"},"score":0,"creation_date":1635421772,"post_id":69753432,"comment_id":123296936,"body_markdown":"`List&lt;Product&gt;; // Either List of OnlineProduct or PrintProduct`- no, `List&lt;Product&gt;` states it can contain any product. Your logic might prevent that but the definition would allow it. `List&lt;?  extends Product&gt;` would &quot;allow&quot; for a `List&lt;OnlineProduct&gt;` etc. to be assigned.","body":"<code>List&lt;Product&gt;; &#47;&#47; Either List of OnlineProduct or PrintProduct</code>- no, <code>List&lt;Product&gt;</code> states it can contain any product. Your logic might prevent that but the definition would allow it. <code>List&lt;?  extends Product&gt;</code> would &quot;allow&quot; for a <code>List&lt;OnlineProduct&gt;</code> etc. to be assigned."},{"owner":{"account_id":319873,"reputation":87612,"user_id":637853,"accept_rate":50,"display_name":"Thomas"},"score":0,"creation_date":1635421942,"post_id":69753432,"comment_id":123296999,"body_markdown":"You could try to serialize type info on the elements aswell, i.e. each product would contain an identifier for its type (by default the FQCN).","body":"You could try to serialize type info on the elements aswell, i.e. each product would contain an identifier for its type (by default the FQCN)."},{"owner":{"account_id":1093313,"reputation":989,"user_id":1087447,"accept_rate":67,"display_name":"Jazzschmidt"},"score":0,"creation_date":1635422330,"post_id":69753432,"comment_id":123297153,"body_markdown":"@Thomas It actually is `List&lt;? extends Product&gt;`. Gonna update the question.","body":"@Thomas It actually is <code>List&lt;? extends Product&gt;</code>. Gonna update the question."},{"owner":{"account_id":1093313,"reputation":989,"user_id":1087447,"accept_rate":67,"display_name":"Jazzschmidt"},"score":0,"creation_date":1635422380,"post_id":69753432,"comment_id":123297177,"body_markdown":"Also, we cannot extend the JSON of the `Product` classes, so the handling must somehow be done in the Deserializer of Cart","body":"Also, we cannot extend the JSON of the <code>Product</code> classes, so the handling must somehow be done in the Deserializer of Cart"},{"owner":{"account_id":319873,"reputation":87612,"user_id":637853,"accept_rate":50,"display_name":"Thomas"},"score":0,"creation_date":1635422937,"post_id":69753432,"comment_id":123297387,"body_markdown":"In that case you might have to use a custom deserializer. I&#39;m not sure you can define one for a specific property but I&#39;d see 2 alternatives: 1) extend the standard deserializer used for objects (check which one is used) and only do special handling for the list. 2) Introduce a custom class that only contains the list and add a custom serializer and deserializer for that class (thus the presence of the class can be hidden from the json).","body":"In that case you might have to use a custom deserializer. I&#39;m not sure you can define one for a specific property but I&#39;d see 2 alternatives: 1) extend the standard deserializer used for objects (check which one is used) and only do special handling for the list. 2) Introduce a custom class that only contains the list and add a custom serializer and deserializer for that class (thus the presence of the class can be hidden from the json)."},{"owner":{"account_id":219684,"reputation":37257,"user_id":476716,"accept_rate":77,"display_name":"OrangeDog"},"score":0,"creation_date":1635423787,"post_id":69753432,"comment_id":123297757,"body_markdown":"`@JsonTypeInfo` needs to go on the `Product` class, either directly or via mixin.","body":"<code>@JsonTypeInfo</code> needs to go on the <code>Product</code> class, either directly or via mixin."},{"owner":{"account_id":219684,"reputation":37257,"user_id":476716,"accept_rate":77,"display_name":"OrangeDog"},"score":0,"creation_date":1635424084,"post_id":69753432,"comment_id":123297907,"body_markdown":"A simpller approach may be to make `Cart&lt;T extends Product&gt;` abstract with `@JsonTypeInfo` and have `OnlineCart` and `PrintCart` subclasses.","body":"A simpller approach may be to make <code>Cart&lt;T extends Product&gt;</code> abstract with <code>@JsonTypeInfo</code> and have <code>OnlineCart</code> and <code>PrintCart</code> subclasses."}],"owner":{"account_id":1093313,"reputation":989,"user_id":1087447,"accept_rate":67,"display_name":"Jazzschmidt"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":295,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":0,"score":2,"last_activity_date":1635422393,"creation_date":1635421165,"question_id":69753432,"body_markdown":"I have a `Cart` object that contains a `List&lt;Product&gt;`, where `Product` is abstract and should be determined when deserializing the object, based upon the value of `Cart.channel`.\r\n\r\nCart:\r\n```java\r\npublic class Cart {\r\n    Channel channel; // Either Channel.ONLINE or Channel.PRINT\r\n    List&lt;? extends Product&gt;; // Either List of OnlineProduct or PrintProduct\r\n}\r\n```\r\n\r\nI tried to write a custom Deserializer that simply uses a plain `ObjectMapper` to deserialize the nested property based upon the channel, but the Cart object has many more properties in reality and I don&#39;t want to extend the Deserializer every time I extend the Cart object.\r\n\r\nWorking with `@JsonSubTypes` as supposed in [Deserializing json subtype based on parent property][1] also didn&#39;t do the trick, since the property is a List instance:\r\n```java\r\npublic class Cart {\r\n    Channel channel; // Either Channel.ONLINE or Channel.PRINT\r\n\r\n    @JsonTypeInfo(use = JsonTypeInfo.Id.NAME, include = JsonTypeInfo.As.EXTERNAL_PROPERTY, property = &quot;channel&quot;)\r\n    @JsonSubTypes(value = {\r\n            @JsonSubTypes.Type(value = SalesProductOnsite.class, name = &quot;onsite&quot;),\r\n            @JsonSubTypes.Type(value = SalesProductPrint.class, name = &quot;print&quot;)\r\n    })\r\n    List&lt;Product&gt;; // Either List of OnlineProduct or PrintProduct\r\n}\r\n```\r\n\r\nI also tried to ignore the field at runtime and then use the correct mapping, but to no avail:\r\n\r\n```java\r\npublic class CartDeserializer extends JsonDeserializer&lt;Cart&gt; {\r\n\r\n    private final ObjectMapper objectMapper = new ObjectMapper();\r\n\r\n    @Override\r\n    public Cart deserialize(JsonParser jsonParser, DeserializationContext ctxt) throws IOException {\r\n        Cart c = objectMapper.reader().withoutAttribute(&quot;products&quot;).readValue(jsonParser, Cart.class);\r\n        if(cart.channel == Channel.ONLINE) {\r\n            // cart.products = objectMapper.readValue(...)\r\n        } else {\r\n            // cart.products = objectMapper.readValue(...)\r\n        }\r\n\r\n        return cart;\r\n    }\r\n}\r\n```\r\n\r\n  [1]: https://stackoverflow.com/questions/63455860/deserializing-json-subtype-based-on-parent-property","title":"How to deserialize abstract subtyped list based on a property","body":"<p>I have a <code>Cart</code> object that contains a <code>List&lt;Product&gt;</code>, where <code>Product</code> is abstract and should be determined when deserializing the object, based upon the value of <code>Cart.channel</code>.</p>\n<p>Cart:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class Cart {\n    Channel channel; // Either Channel.ONLINE or Channel.PRINT\n    List&lt;? extends Product&gt;; // Either List of OnlineProduct or PrintProduct\n}\n</code></pre>\n<p>I tried to write a custom Deserializer that simply uses a plain <code>ObjectMapper</code> to deserialize the nested property based upon the channel, but the Cart object has many more properties in reality and I don't want to extend the Deserializer every time I extend the Cart object.</p>\n<p>Working with <code>@JsonSubTypes</code> as supposed in <a href=\"https://stackoverflow.com/questions/63455860/deserializing-json-subtype-based-on-parent-property\">Deserializing json subtype based on parent property</a> also didn't do the trick, since the property is a List instance:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class Cart {\n    Channel channel; // Either Channel.ONLINE or Channel.PRINT\n\n    @JsonTypeInfo(use = JsonTypeInfo.Id.NAME, include = JsonTypeInfo.As.EXTERNAL_PROPERTY, property = &quot;channel&quot;)\n    @JsonSubTypes(value = {\n            @JsonSubTypes.Type(value = SalesProductOnsite.class, name = &quot;onsite&quot;),\n            @JsonSubTypes.Type(value = SalesProductPrint.class, name = &quot;print&quot;)\n    })\n    List&lt;Product&gt;; // Either List of OnlineProduct or PrintProduct\n}\n</code></pre>\n<p>I also tried to ignore the field at runtime and then use the correct mapping, but to no avail:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class CartDeserializer extends JsonDeserializer&lt;Cart&gt; {\n\n    private final ObjectMapper objectMapper = new ObjectMapper();\n\n    @Override\n    public Cart deserialize(JsonParser jsonParser, DeserializationContext ctxt) throws IOException {\n        Cart c = objectMapper.reader().withoutAttribute(&quot;products&quot;).readValue(jsonParser, Cart.class);\n        if(cart.channel == Channel.ONLINE) {\n            // cart.products = objectMapper.readValue(...)\n        } else {\n            // cart.products = objectMapper.readValue(...)\n        }\n\n        return cart;\n    }\n}\n</code></pre>\n"},{"tags":["java","resize","jfreechart","aspect-ratio"],"comments":[{"owner":{"account_id":81822,"reputation":204250,"user_id":230513,"accept_rate":100,"display_name":"trashgod"},"score":0,"creation_date":1635274275,"post_id":69720552,"comment_id":123252060,"body_markdown":"Am I correct that you want the chart to resize smoothly as the frame is resized? Why [tag:aspect-ratio]? Why not [tag:swing]?","body":"Am I correct that you want the chart to resize smoothly as the frame is resized? Why <a href=\"https://stackoverflow.com/questions/tagged/aspect-ratio\">aspect-ratio</a>? Why not <a href=\"https://stackoverflow.com/questions/tagged/swing\">swing</a>?"},{"owner":{"account_id":1107482,"reputation":2870,"user_id":1098603,"accept_rate":94,"display_name":"Matthieu"},"score":0,"creation_date":1635276498,"post_id":69720552,"comment_id":123252798,"body_markdown":"@trashgod yes. Specifically the text appears too wide when the frame is bigger, and too narrow when the frame is smaller, when I&#39;d like to have its size independent of the frame size. Hence the `aspect-ratio` tag because it doesn&#39;t feel like a Swing (layout manager) problem. I&#39;ll try your solution when I get to my computer, thanks for your time.","body":"@trashgod yes. Specifically the text appears too wide when the frame is bigger, and too narrow when the frame is smaller, when I&#39;d like to have its size independent of the frame size. Hence the <code>aspect-ratio</code> tag because it doesn&#39;t feel like a Swing (layout manager) problem. I&#39;ll try your solution when I get to my computer, thanks for your time."}],"answers":[{"tags":[],"owner":{"account_id":81822,"reputation":204250,"user_id":230513,"accept_rate":100,"display_name":"trashgod"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1635422379,"creation_date":1635273811,"answer_id":69728406,"question_id":69720552,"body_markdown":"[_Solving Common Layout Problems_][1] suggests, &quot;be sure that your component&#39;s container uses a layout manager that respects the requested size of the component.&quot; Your fragment uses `BorderLayout.CENTER`, which is a good choice: it allows the the `ChartPanel` to resize smoothly as the frame is resized, but it ignores the panel&#39;s minimum size. Eventually, resampling artifact and distortion appear. As you want to retain the resize behavior, one approach is to set the chart panel&#39;s minimum draw width and heigh to zero and (optionally) limit the frame&#39;s minimum size accordingly:\r\n\r\n    cp.setMinimumDrawWidth(0);\r\n    cp.setMinimumDrawHeight(0);\r\n    // optionally\r\n    f.setMinimumSize(new Dimension(\r\n        cp.getMinimumDrawWidth(),\r\n        cp.getMinimumDrawHeight()));\r\n\r\nThe draw width and heigh may also be specified in the constructor, as shown [here][2]. In the example below, note:\r\n\r\n- Override [`getPreferredSize()`][3] to establish the initial preferred size, also discussed [here][4].\r\n\r\n- Construct and manipulate Swing GUI objects _only_ on the [_event dispatch thread_][5].\r\n\r\nPreferred size:\r\n[![initial][6]][6]\r\n\r\nSmaller size:\r\n[![smaller][7]][7]\r\n\r\n```\r\nimport java.awt.BorderLayout;\r\nimport java.awt.Dimension;\r\nimport java.awt.EventQueue;\r\nimport javax.swing.JFrame;\r\nimport javax.swing.JLabel;\r\nimport org.jfree.chart.ChartFactory;\r\nimport org.jfree.chart.ChartPanel;\r\nimport org.jfree.chart.JFreeChart;\r\nimport org.jfree.data.category.CategoryDataset;\r\nimport org.jfree.data.category.DefaultCategoryDataset;\r\n\r\n/**\r\n * @see https://stackoverflow.com/q/69720552/230513\r\n */\r\npublic class ChartTest {\r\n\r\n    private static final int W = 320;\r\n    private static final int H = 240;\r\n\r\n    private void display() {\r\n        JFrame f = new JFrame(&quot;JFreeChart Resizing&quot;);\r\n        f.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);\r\n\r\n        CategoryDataset ds = new DefaultCategoryDataset();\r\n        JFreeChart chart = ChartFactory.createLineChart(\r\n            &quot;Chart Title&quot;, &quot;X axis&quot;, &quot;Y axis&quot;, ds);\r\n        ChartPanel cp = new ChartPanel(chart) {\r\n            @Override\r\n            public Dimension getPreferredSize() {\r\n                return new Dimension(W, H);\r\n            }\r\n        };\r\n        f.add(cp, BorderLayout.CENTER);\r\n        f.add(new JLabel(&quot;Java v&quot; + System.getProperty(&quot;java.version&quot;)\r\n            + &quot;; JFreeChart 1.5.3&quot;, JLabel.CENTER), BorderLayout.PAGE_END);\r\n        cp.setMinimumDrawWidth(0);\r\n        cp.setMinimumDrawHeight(0);\r\n        f.setMinimumSize(new Dimension(cp.getMinimumDrawWidth(), cp.getMinimumDrawHeight()));\r\n        f.pack();\r\n        f.setLocationRelativeTo(null);\r\n        f.setVisible(true);\r\n    }\r\n\r\n    public static void main(String[] args) {\r\n        EventQueue.invokeLater(new ChartTest()::display);\r\n    }\r\n}\r\n```\r\n\r\n  [1]: https://docs.oracle.com/javase/tutorial/uiswing/layout/problems.html\r\n  [2]: https://stackoverflow.com/a/7602126/230513\r\n  [3]: http://stackoverflow.com/q/7229226/230513\r\n  [4]: https://stackoverflow.com/a/10277372/230513\r\n  [5]: http://docs.oracle.com/javase/tutorial/uiswing/concurrency/initial.html\r\n  [6]: https://i.stack.imgur.com/WH3hr.png\r\n  [7]: https://i.stack.imgur.com/1xG6p.png","title":"Recompute JFreeChart display on ChartPanel resize","body":"<p><a href=\"https://docs.oracle.com/javase/tutorial/uiswing/layout/problems.html\" rel=\"nofollow noreferrer\"><em>Solving Common Layout Problems</em></a> suggests, &quot;be sure that your component's container uses a layout manager that respects the requested size of the component.&quot; Your fragment uses <code>BorderLayout.CENTER</code>, which is a good choice: it allows the the <code>ChartPanel</code> to resize smoothly as the frame is resized, but it ignores the panel's minimum size. Eventually, resampling artifact and distortion appear. As you want to retain the resize behavior, one approach is to set the chart panel's minimum draw width and heigh to zero and (optionally) limit the frame's minimum size accordingly:</p>\n<pre><code>cp.setMinimumDrawWidth(0);\ncp.setMinimumDrawHeight(0);\n// optionally\nf.setMinimumSize(new Dimension(\n    cp.getMinimumDrawWidth(),\n    cp.getMinimumDrawHeight()));\n</code></pre>\n<p>The draw width and heigh may also be specified in the constructor, as shown <a href=\"https://stackoverflow.com/a/7602126/230513\">here</a>. In the example below, note:</p>\n<ul>\n<li><p>Override <a href=\"http://stackoverflow.com/q/7229226/230513\"><code>getPreferredSize()</code></a> to establish the initial preferred size, also discussed <a href=\"https://stackoverflow.com/a/10277372/230513\">here</a>.</p>\n</li>\n<li><p>Construct and manipulate Swing GUI objects <em>only</em> on the <a href=\"http://docs.oracle.com/javase/tutorial/uiswing/concurrency/initial.html\" rel=\"nofollow noreferrer\"><em>event dispatch thread</em></a>.</p>\n</li>\n</ul>\n<p>Preferred size:\n<a href=\"https://i.stack.imgur.com/WH3hr.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/WH3hr.png\" alt=\"initial\" /></a></p>\n<p>Smaller size:\n<a href=\"https://i.stack.imgur.com/1xG6p.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/1xG6p.png\" alt=\"smaller\" /></a></p>\n<pre><code>import java.awt.BorderLayout;\nimport java.awt.Dimension;\nimport java.awt.EventQueue;\nimport javax.swing.JFrame;\nimport javax.swing.JLabel;\nimport org.jfree.chart.ChartFactory;\nimport org.jfree.chart.ChartPanel;\nimport org.jfree.chart.JFreeChart;\nimport org.jfree.data.category.CategoryDataset;\nimport org.jfree.data.category.DefaultCategoryDataset;\n\n/**\n * @see https://stackoverflow.com/q/69720552/230513\n */\npublic class ChartTest {\n\n    private static final int W = 320;\n    private static final int H = 240;\n\n    private void display() {\n        JFrame f = new JFrame(&quot;JFreeChart Resizing&quot;);\n        f.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);\n\n        CategoryDataset ds = new DefaultCategoryDataset();\n        JFreeChart chart = ChartFactory.createLineChart(\n            &quot;Chart Title&quot;, &quot;X axis&quot;, &quot;Y axis&quot;, ds);\n        ChartPanel cp = new ChartPanel(chart) {\n            @Override\n            public Dimension getPreferredSize() {\n                return new Dimension(W, H);\n            }\n        };\n        f.add(cp, BorderLayout.CENTER);\n        f.add(new JLabel(&quot;Java v&quot; + System.getProperty(&quot;java.version&quot;)\n            + &quot;; JFreeChart 1.5.3&quot;, JLabel.CENTER), BorderLayout.PAGE_END);\n        cp.setMinimumDrawWidth(0);\n        cp.setMinimumDrawHeight(0);\n        f.setMinimumSize(new Dimension(cp.getMinimumDrawWidth(), cp.getMinimumDrawHeight()));\n        f.pack();\n        f.setLocationRelativeTo(null);\n        f.setVisible(true);\n    }\n\n    public static void main(String[] args) {\n        EventQueue.invokeLater(new ChartTest()::display);\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":1107482,"reputation":2870,"user_id":1098603,"accept_rate":94,"display_name":"Matthieu"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":330,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":69728406,"answer_count":1,"score":1,"last_activity_date":1635422379,"creation_date":1635240313,"question_id":69720552,"body_markdown":"I have a chart embedded in a `ChartPanel`. When the panel is first rendered, everything looks good:\r\n\r\n[![Initial ratio][1]][1]\r\n\r\nBut when the size changes, the panel content is stretched, making the text harder to read:\r\n\r\n[![Bigger size][3]][3]\r\n[![Smaller size][2]][2]\r\n\r\nIt&#39;s like JFreeChart is pre-rendering the display so it can quickly draw it on screen, which is nice for e.g. PNG export (and I know it&#39;s a feature David Gilbert, JFreeChart author, wants to keep), but when the cart size changes too much, the display doesn&#39;t look good.\r\n\r\nIs there a way to tell JFreeChart to somehow re-render the chart on container resize?\r\n\r\nHere is the SSCCE:\r\n\r\n```\r\npublic static void main(String[] args) {\r\n\tJFrame frm = new JFrame(&quot;JFreeChart resizing&quot;);\r\n\tfrm.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);\r\n\t\r\n\tCategoryDataset ds = new DefaultCategoryDataset();\r\n\tJFreeChart chart = ChartFactory.createLineChart(&quot;Title&quot;, &quot;X axis&quot;, &quot;Y axis&quot;, ds);\r\n\tChartPanel cp = new ChartPanel(chart);\r\n\tfrm.getContentPane().add(cp, BorderLayout.CENTER);\r\n\t\r\n\tfrm.pack();\r\n\tfrm.setVisible(true);\r\n}\r\n```\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/bHbQa.png\r\n  [2]: https://i.stack.imgur.com/estNC.png\r\n  [3]: https://i.stack.imgur.com/MRJsf.png","title":"Recompute JFreeChart display on ChartPanel resize","body":"<p>I have a chart embedded in a <code>ChartPanel</code>. When the panel is first rendered, everything looks good:</p>\n<p><a href=\"https://i.stack.imgur.com/bHbQa.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/bHbQa.png\" alt=\"Initial ratio\" /></a></p>\n<p>But when the size changes, the panel content is stretched, making the text harder to read:</p>\n<p><a href=\"https://i.stack.imgur.com/MRJsf.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/MRJsf.png\" alt=\"Bigger size\" /></a>\n<a href=\"https://i.stack.imgur.com/estNC.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/estNC.png\" alt=\"Smaller size\" /></a></p>\n<p>It's like JFreeChart is pre-rendering the display so it can quickly draw it on screen, which is nice for e.g. PNG export (and I know it's a feature David Gilbert, JFreeChart author, wants to keep), but when the cart size changes too much, the display doesn't look good.</p>\n<p>Is there a way to tell JFreeChart to somehow re-render the chart on container resize?</p>\n<p>Here is the SSCCE:</p>\n<pre><code>public static void main(String[] args) {\n    JFrame frm = new JFrame(&quot;JFreeChart resizing&quot;);\n    frm.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);\n    \n    CategoryDataset ds = new DefaultCategoryDataset();\n    JFreeChart chart = ChartFactory.createLineChart(&quot;Title&quot;, &quot;X axis&quot;, &quot;Y axis&quot;, ds);\n    ChartPanel cp = new ChartPanel(chart);\n    frm.getContentPane().add(cp, BorderLayout.CENTER);\n    \n    frm.pack();\n    frm.setVisible(true);\n}\n</code></pre>\n"},{"tags":["java","annotations","lombok"],"comments":[{"owner":{"account_id":1416429,"reputation":4267,"user_id":1342006,"accept_rate":79,"display_name":"JDC"},"score":0,"creation_date":1482239148,"post_id":41243018,"comment_id":69685527,"body_markdown":"When should this be verified? During compile time?","body":"When should this be verified? During compile time?"},{"owner":{"account_id":7665619,"reputation":518,"user_id":5809422,"accept_rate":50,"display_name":"Mesbah Gueffaf"},"score":0,"creation_date":1482313353,"post_id":41243018,"comment_id":69719387,"body_markdown":"yes During compile time","body":"yes During compile time"},{"owner":{"account_id":148887,"reputation":4330,"user_id":1700467,"display_name":"skadya"},"score":6,"creation_date":1482870959,"post_id":41243018,"comment_id":69905489,"body_markdown":"how verification of a key can be done in the list during compile time?","body":"how verification of a key can be done in the list during compile time?"}],"answers":[{"tags":[],"owner":{"account_id":4453461,"reputation":3254,"user_id":3624545,"display_name":"Fedor Losev"},"down_vote_count":0,"up_vote_count":77,"is_accepted":true,"score":77,"last_activity_date":1482944151,"creation_date":1482634328,"answer_id":41318338,"question_id":41243018,"body_markdown":"## General Considerations\n\nIf you are already using Lombok, you can add custom Lombok transformation annotation and handler.\n\n 1. Define Exists annotation with `@Target(FIELD)` and `@Retention(SOURCE)`\n 2. Create a [handler][1] \n\n        @ProviderFor(JavacAnnotationHandler.class)\n        public class HandleExists extends JavacAnnotationHandler&lt;Exists&gt;{ ...` \n    \n    to process your annotation. Handler class package must start with the `lombok.` prefix. If you need to support Eclipse, etc. in addition to javac, you&#39;ll need to write more handlers extending appropriate framework classes. \n\n 3. In the handler override/implement the `handle()` method to generate the required code through AST manipulation.\n\n----------\n\nYou can take as a sample the [@Getter][2] implementation:  \n\nAnnotation:\n[Getter.java][3]\n\nHandler:\n[HandleGetter.java][4]\n\nYou can also look into [sources][5] of other annotations and [handlers][6] to see how to generate particular code.\n\nYou&#39;ll need to add dependencies on lombok, JDK tools.jar.\n\n----------\nSome resources: \n\n - The [lombok-pg][7] project with a source for a bunch of custom lombok annotations, in particular [FluentSetter.java][8], [HandleFluentSetter.java][9] / [FluentSetterHandler.java][10]\n\n - An overview of a [custom transformation][11]\n\n - Simple [annotation example][12] with explanations.\n\n----------\nNote, there are some points to consider here \n\n - This is a bunch of non-trivial code to write and maintain. If you plan to use annotation 5-6 times it is just not worth it. \n - You may need to change your annotation processor implementation with lombok upgrades. \n - The hole in compiler that lombok relies on also may be closed (then the whole Lombok project will change dramatically or cease to exist; in this case you&#39;ll have a more serious problem anyway if you use Lombok extensively, even if just for @Getter).\n\nA more complex alternative without Lombok is to use standard [annotation processing][13] for [code generation][14] but, AFAIK, you can&#39;t change original classes and must generate/use classes that extend them (unless you&#39;ll [exploit the same back-door][15] as Lombok or resort to a code manipulation like CGLib or ASM). \n\n----------\n\n## Lombok Example\n\nBelow is some working code to create custom Lombok annotation that I&#39;ve called **@Contains**. \n\nIt is javac implementation only, no Eclipse, etc. I guess it will be not hard to create a similar handler for Eclipse or other IDE. \n\nIt will generate *fieldName*Contains() member method which is delegated to the *fieldName*.contains(). \n\nNote, the code is just quick and dirty (but working) sample. For production grade annotation, you will need to handle many boundary conditions, check correct types, handle Lombok configuration and so on, as it can be observed in lombok or lombok-pg library sources. \n\n----------\n### Sample usage\n\n----------\n\n**SomeEnity.java**\n\n    @Getter\n    @Setter\n    public class SomeEntity {\n\n        @NonNull\n        @Contains\n        private Collection&lt;String&gt; fieldOne = new ArrayList&lt;&gt;();\n\n        @NonNull\n        @Contains\n        private Collection&lt;String&gt; fieldTwo = new ArrayList&lt;&gt;();\n\n    }\n\n**SomeEntityTest.java**\n\n    public class SomeEntityTest {\n\n        @Test\n        public void test() {\n            SomeEntity entity = new SomeEntity();\n\n            Collection&lt;String&gt; test1 = Arrays.asList(new String[] { &quot;1&quot;, &quot;2&quot; });\n            entity.setFieldOne(test1);\n            assertSame(test1, entity.getFieldOne());\n\n            Collection&lt;String&gt; test2 = new HashSet&lt;String&gt;(Arrays.asList(new String[] { &quot;3&quot;, &quot;4&quot; }));\n            entity.setFieldTwo(test2);\n            assertSame(test2, entity.getFieldTwo());\n\n            assertTrue(entity.fieldOneContains(&quot;1&quot;));\n            assertTrue(entity.fieldOneContains(&quot;2&quot;));\n            assertFalse(entity.fieldOneContains(&quot;3&quot;));\n            assertFalse(entity.fieldOneContains(&quot;4&quot;));\n\n            assertFalse(entity.fieldTwoContains(&quot;1&quot;));\n            assertFalse(entity.fieldTwoContains(&quot;2&quot;));\n            assertTrue(entity.fieldTwoContains(&quot;3&quot;));\n            assertTrue(entity.fieldTwoContains(&quot;4&quot;));\n\n            try {\n                entity.setFieldOne(null);\n                fail(&quot;exception expected&quot;);\n            } catch (Exception ex) {\n            }\n\n            try {\n                entity.setFieldTwo(null);\n                fail(&quot;exception expected&quot;);\n            } catch (Exception ex) {\n            }\n\n        }\n    }\n\n    \n----------\n### Annotation Implementaiton\n\n----------\n\n**Contains.java**\n\n    @Target({ElementType.FIELD})\n    @Retention(RetentionPolicy.SOURCE)\n    public @interface Contains {\n        Class&lt;?&gt;[] types() default {};\n        Class&lt;?&gt;[] excludes() default {};\n    }\n\n\n**HandleContains.java**\n\n    @ProviderFor(JavacAnnotationHandler.class) \n    @HandlerPriority(65536) \n    @ResolutionResetNeeded \n    public class HandleContains extends JavacAnnotationHandler&lt;Contains&gt; {\n        \n        @Override \n        public void handle(AnnotationValues&lt;Contains&gt; annotation, JCAnnotation ast, JavacNode annotationNode) {\n            \n            try {\n                JavacNode node = annotationNode.up();\n                if (node.getKind() != Kind.FIELD) {\n                    annotationNode.addError(&quot;@Contains is allowed only on fields&quot;);\n                    return;\n                }\n                Name delegateName = annotationNode.toName(node.getName());\n                JavacResolution reso = new JavacResolution(annotationNode.getContext());\n                JCTree member = node.get();\n                if (member.type == null) {\n                    reso.resolveClassMember(node);\n                }\n                Type delegateType = member.type;\n                if (delegateType instanceof ClassType) {\n                    ClassType ct = (ClassType) delegateType;\n                    //TODO validate that this field is a collection type\n                    // if(!Collection)\n                    //   annotationNode.addError(&quot;@Contains can only be used on collections&quot;);\n                    final String methodName = &quot;contains&quot;;\n                    MethodSig methodSig = getMethodBinding(methodName, ct, annotationNode.getTypesUtil());\n                    if (methodSig == null) throw new Exception(&quot;no method &quot; + methodName + &quot; in &quot; + ct.tsym.name);\n                    JCMethodDecl methodDecl = createDelegateMethod(methodSig, annotationNode, delegateName);\n                    injectMethod(node.up(), methodDecl);\n                } else {\n                    annotationNode.addError(&quot;@Contains can only use concrete class types&quot;);\n                    return;\n                }\n            } catch (Exception ex) {\n                //ex.printStackTrace();\n                annotationNode.addError(&quot;@Contains unexpected error: &quot; + ex.getMessage());\n            }\n            \n        }\n        \n        public JCMethodDecl createDelegateMethod(MethodSig sig, JavacNode annotation, Name delegateName) throws TypeNotConvertibleException {\n            \n            JavacTreeMaker maker = annotation.getTreeMaker();\n            \n            com.sun.tools.javac.util.List&lt;JCAnnotation&gt; annotations;\n            if (sig.isDeprecated) {\n                annotations = com.sun.tools.javac.util.List.of(maker.Annotation(genJavaLangTypeRef(annotation, &quot;Deprecated&quot;), com.sun.tools.javac.util.List.&lt;JCExpression&gt;nil()));\n            } else {\n                annotations = com.sun.tools.javac.util.List.nil();\n            }\n            \n            JCModifiers mods = maker.Modifiers(PUBLIC, annotations);\n            JCExpression returnType = JavacResolution.typeToJCTree((Type) sig.type.getReturnType(), annotation.getAst(), true);\n            boolean useReturn = sig.type.getReturnType().getKind() != TypeKind.VOID;\n            ListBuffer&lt;JCVariableDecl&gt; params = sig.type.getParameterTypes().isEmpty() ? null : new ListBuffer&lt;JCVariableDecl&gt;();\n            ListBuffer&lt;JCExpression&gt; args = sig.type.getParameterTypes().isEmpty() ? null : new ListBuffer&lt;JCExpression&gt;();\n            ListBuffer&lt;JCExpression&gt; thrown = sig.type.getThrownTypes().isEmpty() ? null : new ListBuffer&lt;JCExpression&gt;();\n            ListBuffer&lt;JCTypeParameter&gt; typeParams = sig.type.getTypeVariables().isEmpty() ? null : new ListBuffer&lt;JCTypeParameter&gt;();\n            ListBuffer&lt;JCExpression&gt; typeArgs = sig.type.getTypeVariables().isEmpty() ? null : new ListBuffer&lt;JCExpression&gt;();\n            Types types = Types.instance(annotation.getContext());\n            \n            for (TypeMirror param : sig.type.getTypeVariables()) {\n                Name name = ((TypeVar) param).tsym.name;\n                \n                ListBuffer&lt;JCExpression&gt; bounds = new ListBuffer&lt;JCExpression&gt;();\n                for (Type type : types.getBounds((TypeVar) param)) {\n                    bounds.append(JavacResolution.typeToJCTree(type, annotation.getAst(), true));\n                }\n                \n                typeParams.append(maker.TypeParameter(name, bounds.toList()));\n                typeArgs.append(maker.Ident(name));\n            }\n            \n            for (TypeMirror ex : sig.type.getThrownTypes()) {\n                thrown.append(JavacResolution.typeToJCTree((Type) ex, annotation.getAst(), true));\n            }\n            \n            int idx = 0;\n            String[] paramNames = sig.getParameterNames();\n            boolean varargs = sig.elem.isVarArgs();\n            for (TypeMirror param : sig.type.getParameterTypes()) {\n                long flags = JavacHandlerUtil.addFinalIfNeeded(Flags.PARAMETER, annotation.getContext());\n                JCModifiers paramMods = maker.Modifiers(flags);\n                Name name = annotation.toName(paramNames[idx++]);\n                if (varargs &amp;&amp; idx == paramNames.length) {\n                    paramMods.flags |= VARARGS;\n                }\n                params.append(maker.VarDef(paramMods, name, JavacResolution.typeToJCTree((Type) param, annotation.getAst(), true), null));\n                args.append(maker.Ident(name));\n            }\n            \n            JCExpression accessor = maker.Select(maker.Ident(annotation.toName(&quot;this&quot;)), delegateName);\n            \n            JCExpression delegateCall = maker.Apply(toList(typeArgs), maker.Select(accessor, sig.name), toList(args));\n            JCStatement body = useReturn ? maker.Return(delegateCall) : maker.Exec(delegateCall);\n            JCBlock bodyBlock = maker.Block(0, com.sun.tools.javac.util.List.of(body));\n            StringBuilder generatedMethodName = new StringBuilder(delegateName);\n            generatedMethodName.append(sig.name.toString());\n            generatedMethodName.setCharAt(delegateName.length(), Character.toUpperCase(generatedMethodName.charAt(delegateName.length())));\n            return recursiveSetGeneratedBy(maker.MethodDef(mods, annotation.toName(generatedMethodName.toString()), returnType, toList(typeParams), toList(params), toList(thrown), bodyBlock, null), annotation.get(), annotation.getContext());\n        }\n        \n        public static &lt;T&gt; com.sun.tools.javac.util.List&lt;T&gt; toList(ListBuffer&lt;T&gt; collection) {\n            return collection == null ? com.sun.tools.javac.util.List.&lt;T&gt;nil() : collection.toList();\n        }\n        \n        public static class MethodSig {\n            final Name name;\n            final ExecutableType type;\n            final boolean isDeprecated;\n            final ExecutableElement elem;\n            \n            MethodSig(Name name, ExecutableType type, boolean isDeprecated, ExecutableElement elem) {\n                this.name = name;\n                this.type = type;\n                this.isDeprecated = isDeprecated;\n                this.elem = elem;\n            }\n            \n            String[] getParameterNames() {\n                List&lt;? extends VariableElement&gt; paramList = elem.getParameters();\n                String[] paramNames = new String[paramList.size()];\n                for (int i = 0; i &lt; paramNames.length; i++) {\n                    paramNames[i] = paramList.get(i).getSimpleName().toString();\n                }\n                return paramNames;\n            }\n            \n            @Override public String toString() {\n                return (isDeprecated ? &quot;@Deprecated &quot; : &quot;&quot;) + name + &quot; &quot; + type;\n            }\n        }\n        \n        public MethodSig getMethodBinding(String name, ClassType ct, JavacTypes types) {\n            MethodSig result = null;\n            TypeSymbol tsym = ct.asElement();\n            if (tsym == null) throw new IllegalArgumentException(&quot;no class&quot;);\n            \n            for (Symbol member : tsym.getEnclosedElements()) {\n                if (member.getKind() != ElementKind.METHOD || !name.equals(member.name.toString())) {\n                    continue;\n                }\n                if (member.isStatic()) continue;\n                if (member.isConstructor()) continue;\n                ExecutableElement exElem = (ExecutableElement) member;\n                if (!exElem.getModifiers().contains(Modifier.PUBLIC)) continue;\n                ExecutableType methodType = (ExecutableType) types.asMemberOf(ct, member);\n                boolean isDeprecated = (member.flags() &amp; DEPRECATED) != 0;\n                result = new MethodSig(member.name, methodType, isDeprecated, exElem);\n            }\n            if (result == null) {\n                if (ct.supertype_field instanceof ClassType) {\n                    result = getMethodBinding(name, (ClassType) ct.supertype_field, types);\n                }\n                if (result == null) {\n                    if (ct.interfaces_field != null) {\n                        for (Type iface : ct.interfaces_field) {\n                            if (iface instanceof ClassType) {\n                                result = getMethodBinding(name, (ClassType) iface, types);\n                                if (result != null) {\n                                    break;\n                                }\n                            }\n                        }\n                    }\n                }\n            }\n            return result;\n        }\n    }\n\n\n  [1]: https://projectlombok.org/api/lombok/javac/JavacAnnotationHandler.html\n  [2]: https://projectlombok.org/features/GetterSetter.html\n  [3]: https://github.com/rzwitserloot/lombok/blob/master/src/core/lombok/Getter.java\n  [4]: https://github.com/rzwitserloot/lombok/blob/master/src/core/lombok/javac/handlers/HandleGetter.java\n  [5]: https://github.com/rzwitserloot/lombok/tree/master/src/core/lombok\n  [6]: https://github.com/rzwitserloot/lombok/tree/master/src/core/lombok/javac\n  [7]: https://github.com/peichhorn/lombok-pg\n  [8]: https://github.com/peichhorn/lombok-pg/blob/master/src/core/lombok/FluentSetter.java\n  [9]: https://github.com/peichhorn/lombok-pg/blob/master/src/javac/lombok/javac/handlers/HandleFluentSetter.java\n  [10]: https://github.com/peichhorn/lombok-pg/blob/master/src/core/lombok/core/handlers/FluentSetterHandler.java\n  [11]: http://notatube.blogspot.co.il/2010/12/project-lombok-creating-custom.html\n  [12]: https://binkley.blogspot.co.il/2014/12/writing-your-own-lombok-annotation.html\n  [13]: https://www.javacodegeeks.com/2015/01/how-to-process-java-annotations.html\n  [14]: https://deors.wordpress.com/2011/10/08/annotation-processors/\n  [15]: http://notatube.blogspot.co.il/2010/11/project-lombok-trick-explained.html","title":"Create custom annotation for Lombok","body":"<h2>General Considerations</h2>\n<p>If you are already using Lombok, you can add custom Lombok transformation annotation and handler.</p>\n<ol>\n<li><p>Define Exists annotation with <code>@Target(FIELD)</code> and <code>@Retention(SOURCE)</code></p>\n</li>\n<li><p>Create a <a href=\"https://projectlombok.org/api/lombok/javac/JavacAnnotationHandler.html\" rel=\"noreferrer\">handler</a></p>\n<pre><code>@ProviderFor(JavacAnnotationHandler.class)\npublic class HandleExists extends JavacAnnotationHandler&lt;Exists&gt;{ ...` \n</code></pre>\n<p>to process your annotation. Handler class package must start with the <code>lombok.</code> prefix. If you need to support Eclipse, etc. in addition to javac, you'll need to write more handlers extending appropriate framework classes.</p>\n</li>\n<li><p>In the handler override/implement the <code>handle()</code> method to generate the required code through AST manipulation.</p>\n</li>\n</ol>\n<hr />\n<p>You can take as a sample the <a href=\"https://projectlombok.org/features/GetterSetter.html\" rel=\"noreferrer\">@Getter</a> implementation:</p>\n<p>Annotation:\n<a href=\"https://github.com/rzwitserloot/lombok/blob/master/src/core/lombok/Getter.java\" rel=\"noreferrer\">Getter.java</a></p>\n<p>Handler:\n<a href=\"https://github.com/rzwitserloot/lombok/blob/master/src/core/lombok/javac/handlers/HandleGetter.java\" rel=\"noreferrer\">HandleGetter.java</a></p>\n<p>You can also look into <a href=\"https://github.com/rzwitserloot/lombok/tree/master/src/core/lombok\" rel=\"noreferrer\">sources</a> of other annotations and <a href=\"https://github.com/rzwitserloot/lombok/tree/master/src/core/lombok/javac\" rel=\"noreferrer\">handlers</a> to see how to generate particular code.</p>\n<p>You'll need to add dependencies on lombok, JDK tools.jar.</p>\n<hr />\n<p>Some resources:</p>\n<ul>\n<li><p>The <a href=\"https://github.com/peichhorn/lombok-pg\" rel=\"noreferrer\">lombok-pg</a> project with a source for a bunch of custom lombok annotations, in particular <a href=\"https://github.com/peichhorn/lombok-pg/blob/master/src/core/lombok/FluentSetter.java\" rel=\"noreferrer\">FluentSetter.java</a>, <a href=\"https://github.com/peichhorn/lombok-pg/blob/master/src/javac/lombok/javac/handlers/HandleFluentSetter.java\" rel=\"noreferrer\">HandleFluentSetter.java</a> / <a href=\"https://github.com/peichhorn/lombok-pg/blob/master/src/core/lombok/core/handlers/FluentSetterHandler.java\" rel=\"noreferrer\">FluentSetterHandler.java</a></p>\n</li>\n<li><p>An overview of a <a href=\"http://notatube.blogspot.co.il/2010/12/project-lombok-creating-custom.html\" rel=\"noreferrer\">custom transformation</a></p>\n</li>\n<li><p>Simple <a href=\"https://binkley.blogspot.co.il/2014/12/writing-your-own-lombok-annotation.html\" rel=\"noreferrer\">annotation example</a> with explanations.</p>\n</li>\n</ul>\n<hr />\n<p>Note, there are some points to consider here</p>\n<ul>\n<li>This is a bunch of non-trivial code to write and maintain. If you plan to use annotation 5-6 times it is just not worth it.</li>\n<li>You may need to change your annotation processor implementation with lombok upgrades.</li>\n<li>The hole in compiler that lombok relies on also may be closed (then the whole Lombok project will change dramatically or cease to exist; in this case you'll have a more serious problem anyway if you use Lombok extensively, even if just for @Getter).</li>\n</ul>\n<p>A more complex alternative without Lombok is to use standard <a href=\"https://www.javacodegeeks.com/2015/01/how-to-process-java-annotations.html\" rel=\"noreferrer\">annotation processing</a> for <a href=\"https://deors.wordpress.com/2011/10/08/annotation-processors/\" rel=\"noreferrer\">code generation</a> but, AFAIK, you can't change original classes and must generate/use classes that extend them (unless you'll <a href=\"http://notatube.blogspot.co.il/2010/11/project-lombok-trick-explained.html\" rel=\"noreferrer\">exploit the same back-door</a> as Lombok or resort to a code manipulation like CGLib or ASM).</p>\n<hr />\n<h2>Lombok Example</h2>\n<p>Below is some working code to create custom Lombok annotation that I've called <strong>@Contains</strong>.</p>\n<p>It is javac implementation only, no Eclipse, etc. I guess it will be not hard to create a similar handler for Eclipse or other IDE.</p>\n<p>It will generate <em>fieldName</em>Contains() member method which is delegated to the <em>fieldName</em>.contains().</p>\n<p>Note, the code is just quick and dirty (but working) sample. For production grade annotation, you will need to handle many boundary conditions, check correct types, handle Lombok configuration and so on, as it can be observed in lombok or lombok-pg library sources.</p>\n<hr />\n<h3>Sample usage</h3>\n<hr />\n<p><strong>SomeEnity.java</strong></p>\n<pre><code>@Getter\n@Setter\npublic class SomeEntity {\n\n    @NonNull\n    @Contains\n    private Collection&lt;String&gt; fieldOne = new ArrayList&lt;&gt;();\n\n    @NonNull\n    @Contains\n    private Collection&lt;String&gt; fieldTwo = new ArrayList&lt;&gt;();\n\n}\n</code></pre>\n<p><strong>SomeEntityTest.java</strong></p>\n<pre><code>public class SomeEntityTest {\n\n    @Test\n    public void test() {\n        SomeEntity entity = new SomeEntity();\n\n        Collection&lt;String&gt; test1 = Arrays.asList(new String[] { &quot;1&quot;, &quot;2&quot; });\n        entity.setFieldOne(test1);\n        assertSame(test1, entity.getFieldOne());\n\n        Collection&lt;String&gt; test2 = new HashSet&lt;String&gt;(Arrays.asList(new String[] { &quot;3&quot;, &quot;4&quot; }));\n        entity.setFieldTwo(test2);\n        assertSame(test2, entity.getFieldTwo());\n\n        assertTrue(entity.fieldOneContains(&quot;1&quot;));\n        assertTrue(entity.fieldOneContains(&quot;2&quot;));\n        assertFalse(entity.fieldOneContains(&quot;3&quot;));\n        assertFalse(entity.fieldOneContains(&quot;4&quot;));\n\n        assertFalse(entity.fieldTwoContains(&quot;1&quot;));\n        assertFalse(entity.fieldTwoContains(&quot;2&quot;));\n        assertTrue(entity.fieldTwoContains(&quot;3&quot;));\n        assertTrue(entity.fieldTwoContains(&quot;4&quot;));\n\n        try {\n            entity.setFieldOne(null);\n            fail(&quot;exception expected&quot;);\n        } catch (Exception ex) {\n        }\n\n        try {\n            entity.setFieldTwo(null);\n            fail(&quot;exception expected&quot;);\n        } catch (Exception ex) {\n        }\n\n    }\n}\n</code></pre>\n<hr />\n<h3>Annotation Implementaiton</h3>\n<hr />\n<p><strong>Contains.java</strong></p>\n<pre><code>@Target({ElementType.FIELD})\n@Retention(RetentionPolicy.SOURCE)\npublic @interface Contains {\n    Class&lt;?&gt;[] types() default {};\n    Class&lt;?&gt;[] excludes() default {};\n}\n</code></pre>\n<p><strong>HandleContains.java</strong></p>\n<pre><code>@ProviderFor(JavacAnnotationHandler.class) \n@HandlerPriority(65536) \n@ResolutionResetNeeded \npublic class HandleContains extends JavacAnnotationHandler&lt;Contains&gt; {\n    \n    @Override \n    public void handle(AnnotationValues&lt;Contains&gt; annotation, JCAnnotation ast, JavacNode annotationNode) {\n        \n        try {\n            JavacNode node = annotationNode.up();\n            if (node.getKind() != Kind.FIELD) {\n                annotationNode.addError(&quot;@Contains is allowed only on fields&quot;);\n                return;\n            }\n            Name delegateName = annotationNode.toName(node.getName());\n            JavacResolution reso = new JavacResolution(annotationNode.getContext());\n            JCTree member = node.get();\n            if (member.type == null) {\n                reso.resolveClassMember(node);\n            }\n            Type delegateType = member.type;\n            if (delegateType instanceof ClassType) {\n                ClassType ct = (ClassType) delegateType;\n                //TODO validate that this field is a collection type\n                // if(!Collection)\n                //   annotationNode.addError(&quot;@Contains can only be used on collections&quot;);\n                final String methodName = &quot;contains&quot;;\n                MethodSig methodSig = getMethodBinding(methodName, ct, annotationNode.getTypesUtil());\n                if (methodSig == null) throw new Exception(&quot;no method &quot; + methodName + &quot; in &quot; + ct.tsym.name);\n                JCMethodDecl methodDecl = createDelegateMethod(methodSig, annotationNode, delegateName);\n                injectMethod(node.up(), methodDecl);\n            } else {\n                annotationNode.addError(&quot;@Contains can only use concrete class types&quot;);\n                return;\n            }\n        } catch (Exception ex) {\n            //ex.printStackTrace();\n            annotationNode.addError(&quot;@Contains unexpected error: &quot; + ex.getMessage());\n        }\n        \n    }\n    \n    public JCMethodDecl createDelegateMethod(MethodSig sig, JavacNode annotation, Name delegateName) throws TypeNotConvertibleException {\n        \n        JavacTreeMaker maker = annotation.getTreeMaker();\n        \n        com.sun.tools.javac.util.List&lt;JCAnnotation&gt; annotations;\n        if (sig.isDeprecated) {\n            annotations = com.sun.tools.javac.util.List.of(maker.Annotation(genJavaLangTypeRef(annotation, &quot;Deprecated&quot;), com.sun.tools.javac.util.List.&lt;JCExpression&gt;nil()));\n        } else {\n            annotations = com.sun.tools.javac.util.List.nil();\n        }\n        \n        JCModifiers mods = maker.Modifiers(PUBLIC, annotations);\n        JCExpression returnType = JavacResolution.typeToJCTree((Type) sig.type.getReturnType(), annotation.getAst(), true);\n        boolean useReturn = sig.type.getReturnType().getKind() != TypeKind.VOID;\n        ListBuffer&lt;JCVariableDecl&gt; params = sig.type.getParameterTypes().isEmpty() ? null : new ListBuffer&lt;JCVariableDecl&gt;();\n        ListBuffer&lt;JCExpression&gt; args = sig.type.getParameterTypes().isEmpty() ? null : new ListBuffer&lt;JCExpression&gt;();\n        ListBuffer&lt;JCExpression&gt; thrown = sig.type.getThrownTypes().isEmpty() ? null : new ListBuffer&lt;JCExpression&gt;();\n        ListBuffer&lt;JCTypeParameter&gt; typeParams = sig.type.getTypeVariables().isEmpty() ? null : new ListBuffer&lt;JCTypeParameter&gt;();\n        ListBuffer&lt;JCExpression&gt; typeArgs = sig.type.getTypeVariables().isEmpty() ? null : new ListBuffer&lt;JCExpression&gt;();\n        Types types = Types.instance(annotation.getContext());\n        \n        for (TypeMirror param : sig.type.getTypeVariables()) {\n            Name name = ((TypeVar) param).tsym.name;\n            \n            ListBuffer&lt;JCExpression&gt; bounds = new ListBuffer&lt;JCExpression&gt;();\n            for (Type type : types.getBounds((TypeVar) param)) {\n                bounds.append(JavacResolution.typeToJCTree(type, annotation.getAst(), true));\n            }\n            \n            typeParams.append(maker.TypeParameter(name, bounds.toList()));\n            typeArgs.append(maker.Ident(name));\n        }\n        \n        for (TypeMirror ex : sig.type.getThrownTypes()) {\n            thrown.append(JavacResolution.typeToJCTree((Type) ex, annotation.getAst(), true));\n        }\n        \n        int idx = 0;\n        String[] paramNames = sig.getParameterNames();\n        boolean varargs = sig.elem.isVarArgs();\n        for (TypeMirror param : sig.type.getParameterTypes()) {\n            long flags = JavacHandlerUtil.addFinalIfNeeded(Flags.PARAMETER, annotation.getContext());\n            JCModifiers paramMods = maker.Modifiers(flags);\n            Name name = annotation.toName(paramNames[idx++]);\n            if (varargs &amp;&amp; idx == paramNames.length) {\n                paramMods.flags |= VARARGS;\n            }\n            params.append(maker.VarDef(paramMods, name, JavacResolution.typeToJCTree((Type) param, annotation.getAst(), true), null));\n            args.append(maker.Ident(name));\n        }\n        \n        JCExpression accessor = maker.Select(maker.Ident(annotation.toName(&quot;this&quot;)), delegateName);\n        \n        JCExpression delegateCall = maker.Apply(toList(typeArgs), maker.Select(accessor, sig.name), toList(args));\n        JCStatement body = useReturn ? maker.Return(delegateCall) : maker.Exec(delegateCall);\n        JCBlock bodyBlock = maker.Block(0, com.sun.tools.javac.util.List.of(body));\n        StringBuilder generatedMethodName = new StringBuilder(delegateName);\n        generatedMethodName.append(sig.name.toString());\n        generatedMethodName.setCharAt(delegateName.length(), Character.toUpperCase(generatedMethodName.charAt(delegateName.length())));\n        return recursiveSetGeneratedBy(maker.MethodDef(mods, annotation.toName(generatedMethodName.toString()), returnType, toList(typeParams), toList(params), toList(thrown), bodyBlock, null), annotation.get(), annotation.getContext());\n    }\n    \n    public static &lt;T&gt; com.sun.tools.javac.util.List&lt;T&gt; toList(ListBuffer&lt;T&gt; collection) {\n        return collection == null ? com.sun.tools.javac.util.List.&lt;T&gt;nil() : collection.toList();\n    }\n    \n    public static class MethodSig {\n        final Name name;\n        final ExecutableType type;\n        final boolean isDeprecated;\n        final ExecutableElement elem;\n        \n        MethodSig(Name name, ExecutableType type, boolean isDeprecated, ExecutableElement elem) {\n            this.name = name;\n            this.type = type;\n            this.isDeprecated = isDeprecated;\n            this.elem = elem;\n        }\n        \n        String[] getParameterNames() {\n            List&lt;? extends VariableElement&gt; paramList = elem.getParameters();\n            String[] paramNames = new String[paramList.size()];\n            for (int i = 0; i &lt; paramNames.length; i++) {\n                paramNames[i] = paramList.get(i).getSimpleName().toString();\n            }\n            return paramNames;\n        }\n        \n        @Override public String toString() {\n            return (isDeprecated ? &quot;@Deprecated &quot; : &quot;&quot;) + name + &quot; &quot; + type;\n        }\n    }\n    \n    public MethodSig getMethodBinding(String name, ClassType ct, JavacTypes types) {\n        MethodSig result = null;\n        TypeSymbol tsym = ct.asElement();\n        if (tsym == null) throw new IllegalArgumentException(&quot;no class&quot;);\n        \n        for (Symbol member : tsym.getEnclosedElements()) {\n            if (member.getKind() != ElementKind.METHOD || !name.equals(member.name.toString())) {\n                continue;\n            }\n            if (member.isStatic()) continue;\n            if (member.isConstructor()) continue;\n            ExecutableElement exElem = (ExecutableElement) member;\n            if (!exElem.getModifiers().contains(Modifier.PUBLIC)) continue;\n            ExecutableType methodType = (ExecutableType) types.asMemberOf(ct, member);\n            boolean isDeprecated = (member.flags() &amp; DEPRECATED) != 0;\n            result = new MethodSig(member.name, methodType, isDeprecated, exElem);\n        }\n        if (result == null) {\n            if (ct.supertype_field instanceof ClassType) {\n                result = getMethodBinding(name, (ClassType) ct.supertype_field, types);\n            }\n            if (result == null) {\n                if (ct.interfaces_field != null) {\n                    for (Type iface : ct.interfaces_field) {\n                        if (iface instanceof ClassType) {\n                            result = getMethodBinding(name, (ClassType) iface, types);\n                            if (result != null) {\n                                break;\n                            }\n                        }\n                    }\n                }\n            }\n        }\n        return result;\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":7665619,"reputation":518,"user_id":5809422,"accept_rate":50,"display_name":"Mesbah Gueffaf"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":21698,"favorite_count":0,"down_vote_count":0,"up_vote_count":27,"accepted_answer_id":41318338,"answer_count":1,"score":27,"last_activity_date":1635421778,"creation_date":1482238918,"question_id":41243018,"body_markdown":"I have used Lombok in my code to automatically generate getter and setter code. I want to add other personal annotations and use it.\r\n\r\nFor example, I want to add an `@Exist` method which verifies the existence of a key in a list:\r\n\r\n    @Getter    @Setter\r\n    public class User {\r\n    \r\n        private String name;\r\n        private List&lt;Integer&gt; keys;\r\n    \r\n        public boolean existKeys(Integer key) {\r\n            boolean exist = keys.contains(key);\r\n            return exist;\r\n        }\r\n    }\r\n\r\nAfter creating the annotation, I would do something like:\r\n\r\n    @Getter    @Setter\r\n    public class User {\r\n    \r\n        private String name;\r\n        @Exist\r\n        private List&lt;Integer&gt; keys;\r\n    } ","title":"Create custom annotation for Lombok","body":"<p>I have used Lombok in my code to automatically generate getter and setter code. I want to add other personal annotations and use it.</p>\n<p>For example, I want to add an <code>@Exist</code> method which verifies the existence of a key in a list:</p>\n<pre><code>@Getter    @Setter\npublic class User {\n\n    private String name;\n    private List&lt;Integer&gt; keys;\n\n    public boolean existKeys(Integer key) {\n        boolean exist = keys.contains(key);\n        return exist;\n    }\n}\n</code></pre>\n<p>After creating the annotation, I would do something like:</p>\n<pre><code>@Getter    @Setter\npublic class User {\n\n    private String name;\n    @Exist\n    private List&lt;Integer&gt; keys;\n} \n</code></pre>\n"},{"tags":["java","sonarqube"],"answers":[{"tags":[],"owner":{"account_id":2038913,"reputation":4421,"user_id":1820583,"accept_rate":84,"display_name":"Eduardo Briguenti Vieira"},"down_vote_count":0,"up_vote_count":10,"is_accepted":false,"score":10,"last_activity_date":1403107795,"creation_date":1403107341,"answer_id":24290218,"question_id":24289704,"body_markdown":"The default value is 1.5.\r\n\r\nTo set the appropriate version, you need to set `sonar.java.source` property to tell `PMD` which version of Java your source code complies to. \r\n\r\nPossible values: 1.4, 1.5 or 5, 1.6 or 6, 1.7 or 7. Since version 2.2 of the plugin, this property can also be set to 1.8 or 8.\r\n\r\nIf you&#39;re using the **ant task**, just add:\r\n\r\n     &lt;property name=&quot;sonar.java.source&quot; value=&quot;${javaversion}&quot;/&gt; \r\n\r\nIf you&#39;re using the **SonarRunner**, just add the line below to the file `&lt;install_directory&gt;/conf/sonar-runner.properties`:\r\n\r\n    sonar.java.source=1.5","title":"SonarQube Java version used to verify code","body":"<p>The default value is 1.5.</p>\n\n<p>To set the appropriate version, you need to set <code>sonar.java.source</code> property to tell <code>PMD</code> which version of Java your source code complies to. </p>\n\n<p>Possible values: 1.4, 1.5 or 5, 1.6 or 6, 1.7 or 7. Since version 2.2 of the plugin, this property can also be set to 1.8 or 8.</p>\n\n<p>If you're using the <strong>ant task</strong>, just add:</p>\n\n<pre><code> &lt;property name=\"sonar.java.source\" value=\"${javaversion}\"/&gt; \n</code></pre>\n\n<p>If you're using the <strong>SonarRunner</strong>, just add the line below to the file <code>&lt;install_directory&gt;/conf/sonar-runner.properties</code>:</p>\n\n<pre><code>sonar.java.source=1.5\n</code></pre>\n"},{"tags":[],"owner":{"account_id":182394,"reputation":2850,"user_id":417065,"display_name":"Freddy - SonarSource Team"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1403356339,"creation_date":1403356339,"answer_id":24341948,"question_id":24289704,"body_markdown":"I do confirm that this property sonar.java.source is used only by the PMD tool. The SonarSource&#39;s Java analyser uses a superset grammar and so can analyse source files regardless of the Java version they comply to. ","title":"SonarQube Java version used to verify code","body":"<p>I do confirm that this property sonar.java.source is used only by the PMD tool. The SonarSource's Java analyser uses a superset grammar and so can analyse source files regardless of the Java version they comply to. </p>\n"},{"tags":[],"owner":{"account_id":52375,"reputation":6473,"user_id":156522,"accept_rate":83,"display_name":"vsingh"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1589226547,"creation_date":1589226547,"answer_id":61738075,"question_id":24289704,"body_markdown":"From SonarCube 8.3 docs\r\n\r\n&gt; When using SonarScanner to perform analyses of project, the property\r\n&gt; sonar.java.source can to be set manually in sonar-project.properties.\r\n&gt; Accepted formats are:\r\n&gt; \r\n&gt; &quot;1.X&quot; (for instance 1.6 for java 6, 1.7 for java 7, 1.8 for java 8,\r\n&gt; etc.) &quot;X&quot; (for instance 7 for java 7, 8 for java 8, etc. )\r\n\r\nhttps://docs.sonarqube.org/latest/analysis/languages/java/\r\n\r\nIn our project, we use jdk 11. We have not set anything explicitly and it reads from pom.xml.\r\n\r\nWhen running on the jenkins, I can see the output \r\n\r\n    [INFO] Configured Java source version (sonar.java.source): 11\r\n\r\n\r\n","title":"SonarQube Java version used to verify code","body":"<p>From SonarCube 8.3 docs</p>\n\n<blockquote>\n  <p>When using SonarScanner to perform analyses of project, the property\n  sonar.java.source can to be set manually in sonar-project.properties.\n  Accepted formats are:</p>\n  \n  <p>\"1.X\" (for instance 1.6 for java 6, 1.7 for java 7, 1.8 for java 8,\n  etc.) \"X\" (for instance 7 for java 7, 8 for java 8, etc. )</p>\n</blockquote>\n\n<p><a href=\"https://docs.sonarqube.org/latest/analysis/languages/java/\" rel=\"nofollow noreferrer\">https://docs.sonarqube.org/latest/analysis/languages/java/</a></p>\n\n<p>In our project, we use jdk 11. We have not set anything explicitly and it reads from pom.xml.</p>\n\n<p>When running on the jenkins, I can see the output </p>\n\n<pre><code>[INFO] Configured Java source version (sonar.java.source): 11\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3658649,"reputation":1521,"user_id":3049036,"accept_rate":57,"display_name":"Suresh"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1635421734,"creation_date":1635421734,"answer_id":69753549,"question_id":24289704,"body_markdown":"From Sonarqube documentation, this is what I found the version of sonarqube that supports java 1.8\r\n\r\n[![enter image description here][1]][1]\r\n\r\nSonarqube 7.7 is the latest version that supports Java 1.8.\r\n\r\nPlease tick my answer if this is the information you are looking for..\r\n\r\n[![enter image description here][2]][2]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/YHqtp.png\r\n  [2]: https://i.stack.imgur.com/i6dhI.png","title":"SonarQube Java version used to verify code","body":"<p>From Sonarqube documentation, this is what I found the version of sonarqube that supports java 1.8</p>\n<p><a href=\"https://i.stack.imgur.com/YHqtp.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/YHqtp.png\" alt=\"enter image description here\" /></a></p>\n<p>Sonarqube 7.7 is the latest version that supports Java 1.8.</p>\n<p>Please tick my answer if this is the information you are looking for..</p>\n<p><a href=\"https://i.stack.imgur.com/i6dhI.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/i6dhI.png\" alt=\"enter image description here\" /></a></p>\n"}],"owner":{"account_id":2844102,"reputation":946,"user_id":2442991,"accept_rate":49,"display_name":"algiogia"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":28787,"favorite_count":0,"down_vote_count":0,"up_vote_count":8,"accepted_answer_id":24341948,"answer_count":4,"score":8,"last_activity_date":1635421734,"creation_date":1403105838,"question_id":24289704,"body_markdown":"How can I know against which version of Java SonarQube validates the code?\r\nIs it the version of the JVM? What then if my project is based on a different version?","title":"SonarQube Java version used to verify code","body":"<p>How can I know against which version of Java SonarQube validates the code?\nIs it the version of the JVM? What then if my project is based on a different version?</p>\n"},{"tags":["java","eclipse"],"comments":[{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1635432261,"post_id":69753196,"comment_id":123301888,"body_markdown":"Please provide enough code so others can better understand or reproduce the problem.","body":"Please provide enough code so others can better understand or reproduce the problem."}],"answers":[{"tags":[],"owner":{"account_id":4819600,"reputation":56500,"user_id":3890632,"display_name":"khelwood"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1635420983,"creation_date":1635420983,"answer_id":69753388,"question_id":69753196,"body_markdown":"It sounds like a bug in the action that is refactoring your code. In terms of &quot;any solution&quot;, presumably you could rewrite it like this:\r\n\r\n    .map(classname::ensureClosedPeriods)\r\n\r\nwhere `classname` is the name of the class that defines the static method.","title":"Eclipse/Java - deactivate temporarily save action &quot;functional interface instances&quot;","body":"<p>It sounds like a bug in the action that is refactoring your code. In terms of &quot;any solution&quot;, presumably you could rewrite it like this:</p>\n<pre><code>.map(classname::ensureClosedPeriods)\n</code></pre>\n<p>where <code>classname</code> is the name of the class that defines the static method.</p>\n"}],"owner":{"account_id":23170813,"reputation":13,"user_id":17270107,"display_name":"Flanby"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":45,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":69753388,"answer_count":1,"score":1,"last_activity_date":1635420983,"creation_date":1635420087,"question_id":69753196,"body_markdown":"\r\nI&#39;m using Eclipse IDE programming in Java and usually I don&#39;t have any problems with the save action &quot;Functional interface instances: simplify lambda expression and method reference syntax&quot;.\r\n\r\nHowever, in this case it changes `.map(t -&gt; ensureClosedPeriods(t))` to \r\n`.map(this::ensureClosedPeriods)`.\r\n\r\nThis causes a problem, as the method is static:\r\n**Cannot use this in a static context**.\r\n\r\nI really like this save action, but I don&#39;t want this to apply to this part of the code.\r\n\r\n`@formatter:off` does not work in this case.\r\n\r\nDoes anyone know any solution?","title":"Eclipse/Java - deactivate temporarily save action &quot;functional interface instances&quot;","body":"<p>I'm using Eclipse IDE programming in Java and usually I don't have any problems with the save action &quot;Functional interface instances: simplify lambda expression and method reference syntax&quot;.</p>\n<p>However, in this case it changes <code>.map(t -&gt; ensureClosedPeriods(t))</code> to\n<code>.map(this::ensureClosedPeriods)</code>.</p>\n<p>This causes a problem, as the method is static:\n<strong>Cannot use this in a static context</strong>.</p>\n<p>I really like this save action, but I don't want this to apply to this part of the code.</p>\n<p><code>@formatter:off</code> does not work in this case.</p>\n<p>Does anyone know any solution?</p>\n"},{"tags":["java","soap","jboss","cxf"],"comments":[{"owner":{"account_id":3369345,"reputation":117,"user_id":2829017,"accept_rate":50,"display_name":"noob&#39;88"},"score":0,"creation_date":1480538488,"post_id":40896365,"comment_id":69009292,"body_markdown":"Well turns out cxf is layered pretty deep in our jboss modules, so I guess that answers how it&#39;s finding classes to use.","body":"Well turns out cxf is layered pretty deep in our jboss modules, so I guess that answers how it&#39;s finding classes to use."}],"answers":[{"tags":[],"owner":{"account_id":14725095,"reputation":234,"user_id":10634590,"display_name":"Демьян Бельский"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1635420967,"creation_date":1635420967,"answer_id":69753385,"question_id":40896365,"body_markdown":"I&#39;ve found article about this issue\r\nhttp://mariemjabloun.blogspot.com/2013/10/javalangunsupportedoperationexception.html\r\n\r\nActually this interceptor tries to add new header to your request and if you have code like that\r\n\r\n    bp.getRequestContext().put(\r\n        MessageContext.HTTP_REQUEST_HEADERS,\r\n        Collections.singletonMap(&quot;Cookie&quot;, Collections.singletonList(yourCookieString)\r\n    );\r\n\r\nyou should change immutable singleton map to the mutable one (e.g. HashMap)","title":"SOAP Client/Proxy Warning and Errors inside JBOSS Server not outside","body":"<p>I've found article about this issue\n<a href=\"http://mariemjabloun.blogspot.com/2013/10/javalangunsupportedoperationexception.html\" rel=\"nofollow noreferrer\">http://mariemjabloun.blogspot.com/2013/10/javalangunsupportedoperationexception.html</a></p>\n<p>Actually this interceptor tries to add new header to your request and if you have code like that</p>\n<pre><code>bp.getRequestContext().put(\n    MessageContext.HTTP_REQUEST_HEADERS,\n    Collections.singletonMap(&quot;Cookie&quot;, Collections.singletonList(yourCookieString)\n);\n</code></pre>\n<p>you should change immutable singleton map to the mutable one (e.g. HashMap)</p>\n"}],"owner":{"account_id":3369345,"reputation":117,"user_id":2829017,"accept_rate":50,"display_name":"noob&#39;88"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":552,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":1,"score":2,"last_activity_date":1635420967,"creation_date":1480533193,"question_id":40896365,"body_markdown":"I&#39;m working on implementing a SOAP service client from a specific vendor. There have been about 7 of these or so that I&#39;ve come across each with their own challenges. However, with this specific instance, I&#39;ve encountered a new problem.\r\n\r\nOutside of my jboss server I can get the client implementation to run just fine, there are no problems at all. Insdie jboss/wildfly 8 though, I get a warning followed directly by and error when making the SOAP calls (see below). \r\n\r\nI have a few questions that I am having trouble tracking down, listed most importance first. \r\n\r\n1. How can I find out what operation is causing this error inside of the PhaseInterceptorChain, and is it the reason I am getting my Error?\r\n2. The fault string, I can easily just add the content-type and so forth, but why would I have to do this? Shouldn&#39;t client already be doing this? \r\n3. We specifically try to avoid apache cxf whenever possible. I don&#39;t explicitly see it being called anywhere in my source code or the source code generated with ws-import. We also don&#39;t even have it in our build path. Why is apache cxf popping up all over the place with these errors? \r\n\r\nStart Warning:\r\n\r\n    2016-11-30 12:46:21,213 WARNING [org.apache.cxf.phase.PhaseInterceptorChain] Interceptor for {http:&lt;removed url&gt;/}&lt;removed class&gt;/&lt;removed class&gt;#{http://&lt;removed url&gt;/}&lt;removed method&gt; has thrown exception, unwinding now: java.lang.UnsupportedOperationException\r\n        at java.util.AbstractMap.put(AbstractMap.java:209) [rt.jar:1.8.0_65]\r\n        at org.apache.cxf.binding.soap.interceptor.SoapPreProtocolOutInterceptor.setSoapAction(SoapPreProtocolOutInterceptor.java:122)\r\n        at org.apache.cxf.binding.soap.interceptor.SoapPreProtocolOutInterceptor.handleMessage(SoapPreProtocolOutInterceptor.java:63)\r\n        at org.apache.cxf.binding.soap.interceptor.SoapPreProtocolOutInterceptor.handleMessage(SoapPreProtocolOutInterceptor.java:47)\r\n        at org.apache.cxf.phase.PhaseInterceptorChain.doIntercept(PhaseInterceptorChain.java:272)\r\n        at org.apache.cxf.endpoint.ClientImpl.doInvoke(ClientImpl.java:570)\r\n        at org.apache.cxf.endpoint.ClientImpl.invoke(ClientImpl.java:479)\r\n        at org.apache.cxf.endpoint.ClientImpl.invoke(ClientImpl.java:382)\r\n        at org.apache.cxf.endpoint.ClientImpl.invoke(ClientImpl.java:335)\r\n        at org.apache.cxf.frontend.ClientProxy.invokeSync(ClientProxy.java:96)\r\n        at org.apache.cxf.jaxws.JaxWsClientProxy.invoke(JaxWsClientProxy.java:135)\r\n        at com.sun.proxy.$Proxy154.&lt;removed metho&gt;(Unknown Source)\r\n\r\nStart Error:\r\n\r\n\r\n    2016-11-30 12:46:21,257 ERROR [com.&lt;removed class&gt;] Fault string, and possibly fault code, not set: javax.xml.ws.soap.SOAPFaultException: Fault string, and possibly fault code, not set\r\n        at org.apache.cxf.jaxws.JaxWsClientProxy.invoke(JaxWsClientProxy.java:157)\r\n        at com.sun.proxy.$Proxy154.&lt;removed metho&gt;(Unknown Source)\r\n        removed misc lines\r\n    Caused by: java.lang.UnsupportedOperationException\r\n            at java.util.AbstractMap.put(AbstractMap.java:209) [rt.jar:1.8.0_65]\r\n            at org.apache.cxf.binding.soap.interceptor.SoapPreProtocolOutInterceptor.setSoapAction(SoapPreProtocolOutInterceptor.java:122)\r\n            at org.apache.cxf.binding.soap.interceptor.SoapPreProtocolOutInterceptor.handleMessage(SoapPreProtocolOutInterceptor.java:63)\r\n            at org.apache.cxf.binding.soap.interceptor.SoapPreProtocolOutInterceptor.handleMessage(SoapPreProtocolOutInterceptor.java:47)\r\n            at org.apache.cxf.phase.PhaseInterceptorChain.doIntercept(PhaseInterceptorChain.java:272)\r\n            at org.apache.cxf.endpoint.ClientImpl.doInvoke(ClientImpl.java:570)\r\n            at org.apache.cxf.endpoint.ClientImpl.invoke(ClientImpl.java:479)\r\n            at org.apache.cxf.endpoint.ClientImpl.invoke(ClientImpl.java:382)\r\n            at org.apache.cxf.endpoint.ClientImpl.invoke(ClientImpl.java:335)\r\n            at org.apache.cxf.frontend.ClientProxy.invokeSync(ClientProxy.java:96)\r\n            at org.apache.cxf.jaxws.JaxWsClientProxy.invoke(JaxWsClientProxy.java:135)\r\n            ... 10 more\r\n        \r\n\r\nAny help is greatly appreciated. I did try to scour the internet (stackoverflow, jboss developer, etc.) before posting. ","title":"SOAP Client/Proxy Warning and Errors inside JBOSS Server not outside","body":"<p>I'm working on implementing a SOAP service client from a specific vendor. There have been about 7 of these or so that I've come across each with their own challenges. However, with this specific instance, I've encountered a new problem.</p>\n\n<p>Outside of my jboss server I can get the client implementation to run just fine, there are no problems at all. Insdie jboss/wildfly 8 though, I get a warning followed directly by and error when making the SOAP calls (see below). </p>\n\n<p>I have a few questions that I am having trouble tracking down, listed most importance first. </p>\n\n<ol>\n<li>How can I find out what operation is causing this error inside of the PhaseInterceptorChain, and is it the reason I am getting my Error?</li>\n<li>The fault string, I can easily just add the content-type and so forth, but why would I have to do this? Shouldn't client already be doing this? </li>\n<li>We specifically try to avoid apache cxf whenever possible. I don't explicitly see it being called anywhere in my source code or the source code generated with ws-import. We also don't even have it in our build path. Why is apache cxf popping up all over the place with these errors? </li>\n</ol>\n\n<p>Start Warning:</p>\n\n<pre><code>2016-11-30 12:46:21,213 WARNING [org.apache.cxf.phase.PhaseInterceptorChain] Interceptor for {http:&lt;removed url&gt;/}&lt;removed class&gt;/&lt;removed class&gt;#{http://&lt;removed url&gt;/}&lt;removed method&gt; has thrown exception, unwinding now: java.lang.UnsupportedOperationException\n    at java.util.AbstractMap.put(AbstractMap.java:209) [rt.jar:1.8.0_65]\n    at org.apache.cxf.binding.soap.interceptor.SoapPreProtocolOutInterceptor.setSoapAction(SoapPreProtocolOutInterceptor.java:122)\n    at org.apache.cxf.binding.soap.interceptor.SoapPreProtocolOutInterceptor.handleMessage(SoapPreProtocolOutInterceptor.java:63)\n    at org.apache.cxf.binding.soap.interceptor.SoapPreProtocolOutInterceptor.handleMessage(SoapPreProtocolOutInterceptor.java:47)\n    at org.apache.cxf.phase.PhaseInterceptorChain.doIntercept(PhaseInterceptorChain.java:272)\n    at org.apache.cxf.endpoint.ClientImpl.doInvoke(ClientImpl.java:570)\n    at org.apache.cxf.endpoint.ClientImpl.invoke(ClientImpl.java:479)\n    at org.apache.cxf.endpoint.ClientImpl.invoke(ClientImpl.java:382)\n    at org.apache.cxf.endpoint.ClientImpl.invoke(ClientImpl.java:335)\n    at org.apache.cxf.frontend.ClientProxy.invokeSync(ClientProxy.java:96)\n    at org.apache.cxf.jaxws.JaxWsClientProxy.invoke(JaxWsClientProxy.java:135)\n    at com.sun.proxy.$Proxy154.&lt;removed metho&gt;(Unknown Source)\n</code></pre>\n\n<p>Start Error:</p>\n\n<pre><code>2016-11-30 12:46:21,257 ERROR [com.&lt;removed class&gt;] Fault string, and possibly fault code, not set: javax.xml.ws.soap.SOAPFaultException: Fault string, and possibly fault code, not set\n    at org.apache.cxf.jaxws.JaxWsClientProxy.invoke(JaxWsClientProxy.java:157)\n    at com.sun.proxy.$Proxy154.&lt;removed metho&gt;(Unknown Source)\n    removed misc lines\nCaused by: java.lang.UnsupportedOperationException\n        at java.util.AbstractMap.put(AbstractMap.java:209) [rt.jar:1.8.0_65]\n        at org.apache.cxf.binding.soap.interceptor.SoapPreProtocolOutInterceptor.setSoapAction(SoapPreProtocolOutInterceptor.java:122)\n        at org.apache.cxf.binding.soap.interceptor.SoapPreProtocolOutInterceptor.handleMessage(SoapPreProtocolOutInterceptor.java:63)\n        at org.apache.cxf.binding.soap.interceptor.SoapPreProtocolOutInterceptor.handleMessage(SoapPreProtocolOutInterceptor.java:47)\n        at org.apache.cxf.phase.PhaseInterceptorChain.doIntercept(PhaseInterceptorChain.java:272)\n        at org.apache.cxf.endpoint.ClientImpl.doInvoke(ClientImpl.java:570)\n        at org.apache.cxf.endpoint.ClientImpl.invoke(ClientImpl.java:479)\n        at org.apache.cxf.endpoint.ClientImpl.invoke(ClientImpl.java:382)\n        at org.apache.cxf.endpoint.ClientImpl.invoke(ClientImpl.java:335)\n        at org.apache.cxf.frontend.ClientProxy.invokeSync(ClientProxy.java:96)\n        at org.apache.cxf.jaxws.JaxWsClientProxy.invoke(JaxWsClientProxy.java:135)\n        ... 10 more\n</code></pre>\n\n<p>Any help is greatly appreciated. I did try to scour the internet (stackoverflow, jboss developer, etc.) before posting. </p>\n"},{"tags":["java","spring","aop","aspectj"],"comments":[{"owner":{"account_id":1087271,"reputation":64101,"user_id":1082681,"accept_rate":90,"display_name":"kriegaex"},"score":0,"creation_date":1635420735,"post_id":69745630,"comment_id":123296536,"body_markdown":"Welcome to SO. I fixed your inline image link, modified the subject to better explain what you actually want to know and made the XML a bit more readable. Please learn how to format your own posts better, studying the syntax help. with regard to your question, I do agree with R.G that you ought to provide an [MCVE](https://stackoverflow.com/help/mcve). The pointcut as such looks correct, so the problem must be elsewhere in your project configuration or code.","body":"Welcome to SO. I fixed your inline image link, modified the subject to better explain what you actually want to know and made the XML a bit more readable. Please learn how to format your own posts better, studying the syntax help. with regard to your question, I do agree with R.G that you ought to provide an <a href=\"https://stackoverflow.com/help/mcve\">MCVE</a>. The pointcut as such looks correct, so the problem must be elsewhere in your project configuration or code."}],"answers":[{"tags":[],"owner":{"account_id":5278004,"reputation":6696,"user_id":4214241,"display_name":"R.G"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1635387154,"creation_date":1635386530,"answer_id":69747422,"question_id":69745630,"body_markdown":"    execution(* com.teste1.teste2.web.controller..*())\r\n\r\nwould mean - the execution of any method defined in the `com.teste1.teste2.web.controller` package or one of its sub-packages\r\n\r\n`..` is a special wild card which means any number of arguments will match. In the context of an execution pointcut it would be the current package or any sub-package of it.\r\n\r\nSpring documentation reference : [Examples][1]\r\n\r\n*whereas (..) matches any number (zero or more) of parameters.*\r\n\r\nThe expression with `..` would work. You could verify if the controller methods gets advised when the `and @annotation(com.teste1.ae.client.security.Permission)` part is removed from the expression. If still the request results in 404 , please share the an [MCVE][2] or Aspect code to understand the logic further.\r\n\r\n\r\n  [1]: https://docs.spring.io/spring-framework/docs/current/reference/html/core.html#aop-pointcuts-examples\r\n  [2]: https://stackoverflow.com/help/minimal-reproducible-example","title":"How does the double-dot &quot;..&quot; syntax work in AspectJ?","body":"<pre><code>execution(* com.teste1.teste2.web.controller..*())\n</code></pre>\n<p>would mean - the execution of any method defined in the <code>com.teste1.teste2.web.controller</code> package or one of its sub-packages</p>\n<p><code>..</code> is a special wild card which means any number of arguments will match. In the context of an execution pointcut it would be the current package or any sub-package of it.</p>\n<p>Spring documentation reference : <a href=\"https://docs.spring.io/spring-framework/docs/current/reference/html/core.html#aop-pointcuts-examples\" rel=\"nofollow noreferrer\">Examples</a></p>\n<p><em>whereas (..) matches any number (zero or more) of parameters.</em></p>\n<p>The expression with <code>..</code> would work. You could verify if the controller methods gets advised when the <code>and @annotation(com.teste1.ae.client.security.Permission)</code> part is removed from the expression. If still the request results in 404 , please share the an <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">MCVE</a> or Aspect code to understand the logic further.</p>\n"}],"owner":{"account_id":20117620,"reputation":29,"user_id":14752674,"display_name":"johny campos"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":536,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"accepted_answer_id":69747422,"answer_count":1,"score":0,"last_activity_date":1635420863,"creation_date":1635369663,"question_id":69745630,"body_markdown":"i need to put this aop aspect to work, but i always get error 404, i need to know if this dots, after controller is right.\r\nidk how these dots works, to acess the controller.\r\n\r\nif can explain how the dots works.\r\n   \r\n```xml\r\n&lt;aop:aspect ref=&quot;permissionInterceptor&quot;&gt;\r\n  &lt;aop:around\r\n    method=&quot;invoke&quot;\r\n    pointcut=&quot;execution(* com.teste1.teste2.web.controller..*())\r\n      and @annotation(com.teste1.ae.client.security.Permission)&quot;\r\n  /&gt;\r\n&lt;/aop:aspect&gt;\r\n```\r\n\r\n[![Is this correct?][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/TZuvZ.png","title":"How does the double-dot &quot;..&quot; syntax work in AspectJ?","body":"<p>i need to put this aop aspect to work, but i always get error 404, i need to know if this dots, after controller is right.\nidk how these dots works, to acess the controller.</p>\n<p>if can explain how the dots works.</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;aop:aspect ref=&quot;permissionInterceptor&quot;&gt;\n  &lt;aop:around\n    method=&quot;invoke&quot;\n    pointcut=&quot;execution(* com.teste1.teste2.web.controller..*())\n      and @annotation(com.teste1.ae.client.security.Permission)&quot;\n  /&gt;\n&lt;/aop:aspect&gt;\n</code></pre>\n<p><a href=\"https://i.stack.imgur.com/TZuvZ.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/TZuvZ.png\" alt=\"Is this correct?\" /></a></p>\n"},{"tags":["java","json","jolt"],"answers":[{"tags":[],"owner":{"account_id":7712415,"reputation":60542,"user_id":5841306,"display_name":"Barbaros &#214;zhan"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1635420237,"creation_date":1635420237,"answer_id":69753226,"question_id":69752588,"body_markdown":"You can transfer `&quot;id&quot;: &quot;[&amp;4].[&amp;2].typeId&quot;` key-value pair into the object tagged `&quot;offerings&quot;` key name as `&quot;@(2,type.id)&quot;: &quot;[&amp;3].[&amp;1].typeid&quot;` in order to combine them as desired such like the below one\r\n```json\r\n[\r\n  {\r\n    &quot;operation&quot;: &quot;shift&quot;,\r\n    &quot;spec&quot;: {\r\n      &quot;*&quot;: {\r\n        &quot;*&quot;: {\r\n          &quot;*&quot;: {\r\n            &quot;offerings&quot;: {\r\n              &quot;*&quot;: {\r\n                &quot;@(2,type.id)&quot;: &quot;[&amp;3].[&amp;1].typeid&quot;,\r\n                &quot;*&quot;: &quot;[&amp;3].[&amp;1].offer&amp;&quot;\r\n              }\r\n            }\r\n          }\r\n        }\r\n      }\r\n    }\r\n  },\r\n  {\r\n    &quot;operation&quot;: &quot;shift&quot;,\r\n    &quot;spec&quot;: {\r\n      &quot;*&quot;: {\r\n        &quot;*&quot;: &quot;[]&quot;\r\n      }\r\n    }\r\n   }\r\n ]\r\n```\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/xLtiY.png","title":"Jolt how to include object outside list and add it to each object of list","body":"<p>You can transfer <code>&quot;id&quot;: &quot;[&amp;4].[&amp;2].typeId&quot;</code> key-value pair into the object tagged <code>&quot;offerings&quot;</code> key name as <code>&quot;@(2,type.id)&quot;: &quot;[&amp;3].[&amp;1].typeid&quot;</code> in order to combine them as desired such like the below one</p>\n<pre class=\"lang-json prettyprint-override\"><code>[\n  {\n    &quot;operation&quot;: &quot;shift&quot;,\n    &quot;spec&quot;: {\n      &quot;*&quot;: {\n        &quot;*&quot;: {\n          &quot;*&quot;: {\n            &quot;offerings&quot;: {\n              &quot;*&quot;: {\n                &quot;@(2,type.id)&quot;: &quot;[&amp;3].[&amp;1].typeid&quot;,\n                &quot;*&quot;: &quot;[&amp;3].[&amp;1].offer&amp;&quot;\n              }\n            }\n          }\n        }\n      }\n    }\n  },\n  {\n    &quot;operation&quot;: &quot;shift&quot;,\n    &quot;spec&quot;: {\n      &quot;*&quot;: {\n        &quot;*&quot;: &quot;[]&quot;\n      }\n    }\n   }\n ]\n</code></pre>\n<p><a href=\"https://i.stack.imgur.com/xLtiY.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/xLtiY.png\" alt=\"enter image description here\" /></a></p>\n"}],"owner":{"account_id":12598214,"reputation":73,"user_id":9161927,"display_name":"Chethan "},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":295,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":69753226,"answer_count":1,"score":2,"last_activity_date":1635420693,"creation_date":1635417568,"question_id":69752588,"body_markdown":"I have an array which I have to iterate and append object that is outside the list to each of the object inside list. It is not happening properly. Since offerings is an array if it has multiple objects to each object I need to have typeId of that object.\r\n\r\n**Request**:\r\n```json\r\n[\r\n  {\r\n    &quot;offers&quot;: [\r\n      {\r\n        &quot;type&quot;: {\r\n          &quot;id&quot;: &quot;5&quot;\r\n        },\r\n        &quot;offerings&quot;: [\r\n          {\r\n            &quot;id&quot;: &quot;10&quot;\r\n          },\r\n          {\r\n            &quot;id&quot;: &quot;9&quot;\r\n          }\r\n        ]\r\n      },\r\n      {\r\n        &quot;type&quot;: {\r\n          &quot;id&quot;: &quot;3&quot;\r\n        },\r\n        &quot;offerings&quot;: [\r\n          {\r\n            &quot;id&quot;: &quot;11&quot;\r\n          }\r\n        ]\r\n      },\r\n      {\r\n        &quot;type&quot;: {\r\n          &quot;id&quot;: &quot;2&quot;\r\n        },\r\n        &quot;offerings&quot;: [\r\n          {\r\n            &quot;id&quot;: &quot;14&quot;\r\n          },\r\n          {\r\n            &quot;id&quot;: &quot;16&quot;\r\n          }\r\n        ]\r\n      }\r\n    ]\r\n  }\r\n]\r\n```\r\n**My spec**:\r\n```json\r\n[\r\n  {\r\n    &quot;operation&quot;: &quot;shift&quot;,\r\n    &quot;spec&quot;: {\r\n      &quot;*&quot;: {\r\n        &quot;offers&quot;: {\r\n          &quot;*&quot;: {\r\n            &quot;type&quot;: {\r\n              &quot;id&quot;: &quot;[&amp;4].[&amp;2].typeId&quot;\r\n            },\r\n            &quot;offerings&quot;: {\r\n              &quot;*&quot;: {\r\n                &quot;id&quot;: &quot;[&amp;3].[&amp;1].offerId&quot;\r\n              }\r\n            }\r\n          }\r\n        }\r\n      }\r\n    }\r\n  },\r\n  {\r\n    &quot;operation&quot;: &quot;shift&quot;,\r\n    &quot;spec&quot;: {\r\n      &quot;*&quot;: {\r\n        &quot;*&quot;: &quot;[]&quot;\r\n      }\r\n    }\r\n  }\r\n]\r\n```\r\n**Response now**:\r\n```json\r\n[\r\n  {\r\n    &quot;typeId&quot;: &quot;5&quot;,\r\n    &quot;offerId&quot;: &quot;10&quot;\r\n  },\r\n  {\r\n    &quot;offerId&quot;: &quot;9&quot;,\r\n    &quot;typeId&quot;: &quot;3&quot;\r\n  },\r\n  {\r\n    &quot;typeId&quot;: &quot;2&quot;\r\n  },\r\n  {\r\n    &quot;offerId&quot;: &quot;11&quot;\r\n  },\r\n  {\r\n    &quot;offerId&quot;: &quot;14&quot;\r\n  },\r\n  {\r\n    &quot;offerId&quot;: &quot;16&quot;\r\n  }\r\n]\r\n```\r\n\r\n**Expected**:\r\n```json\r\n[\r\n  {\r\n    &quot;typeId&quot;: &quot;5&quot;,\r\n    &quot;offerId&quot;: &quot;10&quot;\r\n  },\r\n  {\r\n    &quot;typeId&quot;: &quot;5&quot;,\r\n    &quot;offerId&quot;: &quot;9&quot;\r\n  },\r\n  {\r\n    &quot;typeId&quot;: &quot;3&quot;,\r\n    &quot;offerId&quot;: &quot;11&quot;\r\n  },\r\n  {\r\n    &quot;typeId&quot;: &quot;2&quot;,\r\n    &quot;offerId&quot;: &quot;14&quot;\r\n  },\r\n  {\r\n    &quot;typeId&quot;: &quot;2&quot;,\r\n    &quot;offerId&quot;: &quot;16&quot;\r\n  }\r\n]\r\n```\r\n\r\nPlease help to achieve as expected.\r\n","title":"Jolt how to include object outside list and add it to each object of list","body":"<p>I have an array which I have to iterate and append object that is outside the list to each of the object inside list. It is not happening properly. Since offerings is an array if it has multiple objects to each object I need to have typeId of that object.</p>\n<p><strong>Request</strong>:</p>\n<pre class=\"lang-json prettyprint-override\"><code>[\n  {\n    &quot;offers&quot;: [\n      {\n        &quot;type&quot;: {\n          &quot;id&quot;: &quot;5&quot;\n        },\n        &quot;offerings&quot;: [\n          {\n            &quot;id&quot;: &quot;10&quot;\n          },\n          {\n            &quot;id&quot;: &quot;9&quot;\n          }\n        ]\n      },\n      {\n        &quot;type&quot;: {\n          &quot;id&quot;: &quot;3&quot;\n        },\n        &quot;offerings&quot;: [\n          {\n            &quot;id&quot;: &quot;11&quot;\n          }\n        ]\n      },\n      {\n        &quot;type&quot;: {\n          &quot;id&quot;: &quot;2&quot;\n        },\n        &quot;offerings&quot;: [\n          {\n            &quot;id&quot;: &quot;14&quot;\n          },\n          {\n            &quot;id&quot;: &quot;16&quot;\n          }\n        ]\n      }\n    ]\n  }\n]\n</code></pre>\n<p><strong>My spec</strong>:</p>\n<pre class=\"lang-json prettyprint-override\"><code>[\n  {\n    &quot;operation&quot;: &quot;shift&quot;,\n    &quot;spec&quot;: {\n      &quot;*&quot;: {\n        &quot;offers&quot;: {\n          &quot;*&quot;: {\n            &quot;type&quot;: {\n              &quot;id&quot;: &quot;[&amp;4].[&amp;2].typeId&quot;\n            },\n            &quot;offerings&quot;: {\n              &quot;*&quot;: {\n                &quot;id&quot;: &quot;[&amp;3].[&amp;1].offerId&quot;\n              }\n            }\n          }\n        }\n      }\n    }\n  },\n  {\n    &quot;operation&quot;: &quot;shift&quot;,\n    &quot;spec&quot;: {\n      &quot;*&quot;: {\n        &quot;*&quot;: &quot;[]&quot;\n      }\n    }\n  }\n]\n</code></pre>\n<p><strong>Response now</strong>:</p>\n<pre class=\"lang-json prettyprint-override\"><code>[\n  {\n    &quot;typeId&quot;: &quot;5&quot;,\n    &quot;offerId&quot;: &quot;10&quot;\n  },\n  {\n    &quot;offerId&quot;: &quot;9&quot;,\n    &quot;typeId&quot;: &quot;3&quot;\n  },\n  {\n    &quot;typeId&quot;: &quot;2&quot;\n  },\n  {\n    &quot;offerId&quot;: &quot;11&quot;\n  },\n  {\n    &quot;offerId&quot;: &quot;14&quot;\n  },\n  {\n    &quot;offerId&quot;: &quot;16&quot;\n  }\n]\n</code></pre>\n<p><strong>Expected</strong>:</p>\n<pre class=\"lang-json prettyprint-override\"><code>[\n  {\n    &quot;typeId&quot;: &quot;5&quot;,\n    &quot;offerId&quot;: &quot;10&quot;\n  },\n  {\n    &quot;typeId&quot;: &quot;5&quot;,\n    &quot;offerId&quot;: &quot;9&quot;\n  },\n  {\n    &quot;typeId&quot;: &quot;3&quot;,\n    &quot;offerId&quot;: &quot;11&quot;\n  },\n  {\n    &quot;typeId&quot;: &quot;2&quot;,\n    &quot;offerId&quot;: &quot;14&quot;\n  },\n  {\n    &quot;typeId&quot;: &quot;2&quot;,\n    &quot;offerId&quot;: &quot;16&quot;\n  }\n]\n</code></pre>\n<p>Please help to achieve as expected.</p>\n"},{"tags":["java","android"],"owner":{"account_id":3390414,"reputation":1651,"user_id":2845346,"accept_rate":57,"display_name":"Vijayadhas Chandrasekaran"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":60,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":0,"score":2,"last_activity_date":1635420452,"creation_date":1635419976,"question_id":69753168,"body_markdown":"I am getting waring `getDefaultDisplay()` is deprecated. Need to use `Context.getDisplay()`. But below **R** version what we need to use? Please help me on this.\r\n\r\n    if (android.os.Build.VERSION.SDK_INT &gt;= android.os.Build.VERSION_CODES.R) {\r\n        display = mContext.getDisplay();\r\n    } else {\r\n        ((Activity) mContext).getWindowManager().getDefaultDisplay(); //Deprecated\r\n    }","title":"What is the Alternate for getDefaultDisplay()","body":"<p>I am getting waring <code>getDefaultDisplay()</code> is deprecated. Need to use <code>Context.getDisplay()</code>. But below <strong>R</strong> version what we need to use? Please help me on this.</p>\n<pre><code>if (android.os.Build.VERSION.SDK_INT &gt;= android.os.Build.VERSION_CODES.R) {\n    display = mContext.getDisplay();\n} else {\n    ((Activity) mContext).getWindowManager().getDefaultDisplay(); //Deprecated\n}\n</code></pre>\n"},{"tags":["java","aspectj","clover","aspectj-maven-plugin"],"comments":[{"owner":{"account_id":1087271,"reputation":64101,"user_id":1082681,"accept_rate":90,"display_name":"kriegaex"},"score":0,"creation_date":1528605724,"post_id":50744732,"comment_id":88567925,"body_markdown":"This is pretty complex. I am an experienced AspectJ user, but never tried combining it with a code coverage tool. In order to see what you are doing and reproduce the problem I will need your [MCVE](http://stackoverflow.com/help/mcve) on GitHub so I can see for myself and play around with it.","body":"This is pretty complex. I am an experienced AspectJ user, but never tried combining it with a code coverage tool. In order to see what you are doing and reproduce the problem I will need your <a href=\"http://stackoverflow.com/help/mcve\">MCVE</a> on GitHub so I can see for myself and play around with it."},{"owner":{"account_id":4155996,"reputation":124,"user_id":3407281,"accept_rate":17,"display_name":"amportugal"},"score":0,"creation_date":1529484754,"post_id":50744732,"comment_id":88885528,"body_markdown":"@kriegaex here is the sample code (MCVE) -&gt; https://github.com/amportugal/aspectj-with-clover-instr The `clover-maven-plugin` and `clover-aspectj-compiler` plugins are commented, so feel free to remove the comment and test as you please. Note: as in the `pom.xml` the instrumentation goal of Clover is executed on the veify phase. Thank you.","body":"@kriegaex here is the sample code (MCVE) -&gt; <a href=\"https://github.com/amportugal/aspectj-with-clover-instr\" rel=\"nofollow noreferrer\">github.com/amportugal/aspectj-with-clover-instr</a> The <code>clover-maven-plugin</code> and <code>clover-aspectj-compiler</code> plugins are commented, so feel free to remove the comment and test as you please. Note: as in the <code>pom.xml</code> the instrumentation goal of Clover is executed on the veify phase. Thank you."},{"owner":{"account_id":1087271,"reputation":64101,"user_id":1082681,"accept_rate":90,"display_name":"kriegaex"},"score":0,"creation_date":1529579948,"post_id":50744732,"comment_id":88930718,"body_markdown":"In your project I see AspectJ Maven plugin, not Clover AspectJ plugin. What the former does I already know because I use it all the time. What is the latter supposed to do and why is it found here in your question but not in your GitHub project?","body":"In your project I see AspectJ Maven plugin, not Clover AspectJ plugin. What the former does I already know because I use it all the time. What is the latter supposed to do and why is it found here in your question but not in your GitHub project?"},{"owner":{"account_id":4155996,"reputation":124,"user_id":3407281,"accept_rate":17,"display_name":"amportugal"},"score":0,"creation_date":1529580286,"post_id":50744732,"comment_id":88930950,"body_markdown":"It is a wrapper for AspectJ compiler which allows code instrumentation using OpenClover, as I stated. I seem to have forgotten to include it in that project. I&#39;m going to push. Anyway, I think it&#39;s necessary, but I&#39;m not sure if it should replace AspectJ Maven plugin or work along with it. There&#39;s just not enough documentation about it.","body":"It is a wrapper for AspectJ compiler which allows code instrumentation using OpenClover, as I stated. I seem to have forgotten to include it in that project. I&#39;m going to push. Anyway, I think it&#39;s necessary, but I&#39;m not sure if it should replace AspectJ Maven plugin or work along with it. There&#39;s just not enough documentation about it."},{"owner":{"account_id":1087271,"reputation":64101,"user_id":1082681,"accept_rate":90,"display_name":"kriegaex"},"score":0,"creation_date":1529581325,"post_id":50744732,"comment_id":88931652,"body_markdown":"It is not meant to be run from Maven, it is not really a plugin, just contains an AspectJ compiler wrapper. What is your goal? Just to compile your application classes correctly and measure their test coverage? Or also somehow measure aspect code coverage? Because if you just want to get it running, I already got that in cloned project with AspectJ Maven. You only have to configure exclusions for aspect classes in the Clover plugin because it tries to instrument `@Pointcut` methods which should have an empty method body, which the AspectJ compiler does not like. You can also inline pointcuts.","body":"It is not meant to be run from Maven, it is not really a plugin, just contains an AspectJ compiler wrapper. What is your goal? Just to compile your application classes correctly and measure their test coverage? Or also somehow measure aspect code coverage? Because if you just want to get it running, I already got that in cloned project with AspectJ Maven. You only have to configure exclusions for aspect classes in the Clover plugin because it tries to instrument <code>@Pointcut</code> methods which should have an empty method body, which the AspectJ compiler does not like. You can also inline pointcuts."},{"owner":{"account_id":4155996,"reputation":124,"user_id":3407281,"accept_rate":17,"display_name":"amportugal"},"score":0,"creation_date":1529583712,"post_id":50744732,"comment_id":88933220,"body_markdown":"I want to compile application classes, and then measure their test coverage. Clover first instruments classes (in a fork fashion; notice the tests are run twice) and then generates a report. Also, just for the sake of getting it to run, I tried to exclude the aspect classes on the Clover plugin and it didn&#39;t work anyway.","body":"I want to compile application classes, and then measure their test coverage. Clover first instruments classes (in a fork fashion; notice the tests are run twice) and then generates a report. Also, just for the sake of getting it to run, I tried to exclude the aspect classes on the Clover plugin and it didn&#39;t work anyway."},{"owner":{"account_id":1087271,"reputation":64101,"user_id":1082681,"accept_rate":90,"display_name":"kriegaex"},"score":1,"creation_date":1529587655,"post_id":50744732,"comment_id":88935764,"body_markdown":"Have you seen my pull request on GitHub? After your latest change it does not merge cleanly anymore, you can just remove the Clover AspectJ thing you inserted before you merge, or you resolve the merge conflict manually.","body":"Have you seen my pull request on GitHub? After your latest change it does not merge cleanly anymore, you can just remove the Clover AspectJ thing you inserted before you merge, or you resolve the merge conflict manually."},{"owner":{"account_id":4155996,"reputation":124,"user_id":3407281,"accept_rate":17,"display_name":"amportugal"},"score":0,"creation_date":1529591733,"post_id":50744732,"comment_id":88938810,"body_markdown":"Two things: why `useIncrementalCompilation` flag?And why the `compile`, `test-compile` goals on `process-sources`?","body":"Two things: why <code>useIncrementalCompilation</code> flag?And why the <code>compile</code>, <code>test-compile</code> goals on <code>process-sources</code>?"},{"owner":{"account_id":1087271,"reputation":64101,"user_id":1082681,"accept_rate":90,"display_name":"kriegaex"},"score":0,"creation_date":1529628583,"post_id":50744732,"comment_id":88954245,"body_markdown":"I will explain in answer here after you confirm that it solves your problem. First I would like to know if that solution is what you needed and it was worth while answering the question.","body":"I will explain in answer here after you confirm that it solves your problem. First I would like to know if that solution is what you needed and it was worth while answering the question."},{"owner":{"account_id":4155996,"reputation":124,"user_id":3407281,"accept_rate":17,"display_name":"amportugal"},"score":0,"creation_date":1529654237,"post_id":50744732,"comment_id":88961450,"body_markdown":"Yes, it solved my problem! Thank you very much!","body":"Yes, it solved my problem! Thank you very much!"},{"owner":{"account_id":1087271,"reputation":64101,"user_id":1082681,"accept_rate":90,"display_name":"kriegaex"},"score":0,"creation_date":1529717817,"post_id":50744732,"comment_id":88988696,"body_markdown":"Okay, I explained everything in my answer. Please read until the end, I found another solution which I like even better than the one with excluding aspects manually.","body":"Okay, I explained everything in my answer. Please read until the end, I found another solution which I like even better than the one with excluding aspects manually."}],"answers":[{"tags":[],"owner":{"account_id":1087271,"reputation":64101,"user_id":1082681,"accept_rate":90,"display_name":"kriegaex"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1635420221,"creation_date":1529717742,"answer_id":50997238,"question_id":50744732,"body_markdown":"As discussed in our comments, you can just use [AspectJ Maven](https://www.mojohaus.org/aspectj-maven-plugin/) instead of [Clover AspectJ](https://confluence.atlassian.com/clover/clover-aspectj-compiler-816682148.html). You just need to take a few precautions in order to get it to work:\r\n\r\n* I like to put AspectJ Maven executions into the `process-sources` phase in order to make sure the AspectJ compiler kicks in before the normal Java compiler kicked off by Maven Compiler plugin. You could also deactivate Maven Compiler instead as Ajc is a full replacement for Javac. Actually that phase used to be the default in older plugin versions, but it has been [changed long ago](https://github.com/mojohaus/aspectj-maven-plugin/commit/4e35d12c8766a14dd6eca18e06bff469ba6a9529?diff=unified), which is also mentioned in an [answer on SO](https://stackoverflow.com/a/5038039/1082681). See also [MASPECTJ-13](https://web.archive.org/web/20150508025455/https://jira.codehaus.org/browse/MASPECTJ-13) for why it was changed and [MASPECTJ-92](https://web.archive.org/web/20150507002003/https://jira.codehaus.org/browse/MASPECTJ-92) for why the change was a bad idea.\r\n\r\n* There is a problem in Maven Compiler, namely the switch `useIncrementalCompilation` seems to have reversed logic. This is why you need to set it to `false` in order to make it work. Otherwise it tries to recompile stuff already compiled by AspectJ, breaking aspect weaving. See [MCOMPILER-209](https://issues.apache.org/jira/browse/MCOMPILER-209) and [MCOMPILER-194](https://issues.apache.org/jira/browse/MCOMPILER-194), I explained the problem and its solution there in my posts.\r\n\r\n* Now the only issue actually related to OpenClover (OC): AspectJ (AJ) does not know anything about OC adding source code to each method in order to enable code coverage. Unfortunately OC also does not know about AJ and also adds code to annotation-style pointcuts defined as empty methods with a `@Pointcut` annotation. As OC needs to do its magic before AJ compiles, the AJ compiler complains about unexpected code found in the pointcut and stops compilation with an error. There are at least two ways to avoid that:\r\n\r\n  * You can either inline all pointcuts into the respective `@Before`, `@After`, `@Around` etc. advices using them, which usually works, but is not always an option in cases where you need argument binding in pointcuts in order to implement a wormhole pattern like `execution(pointcutA()) &amp;&amp; cflow(execution(pointcutB(myArgument)))`.\r\n\r\n  * Or you can exclude all aspects from OC instrumentation, which is easiest if they reside in one package where there are no other Java classes which need to be instrumented. Then you can use a simple exclusion like in your case `&lt;exclude&gt;codeaspects/**&lt;/exclude&gt;`. This is what I was doing in my [pull request](https://github.com/amportugal/aspectj-with-clover-instr/pull/1) when fixing your project.\r\n\r\n  * The easiest way is to just rename all aspects from `*.java` to `*.aj`, which is the canonical way of naming them anyway. I just tried in your project, and it works beautifully. AspectJ Maven looks for those files anyway, but OC will ignore them, not even calculating their lines of code for missing coverage. You can also get rid of the `&lt;exclude&gt;` mentioned above, see [this commit](https://github.com/kriegaex/aspectj-with-clover-instr/commit/7744b0058f421bdfe8c0f530c49b29c6c30caac3).\r\n\r\nMaybe all of this is automatically taken care of by Clover AspectJ, I never tried. Maybe the author of that compiler wrapper should actually explain what it does and how it works in the documentation, especially how to use it with Maven. Otherwise it does not make much sense to use it.","title":"OpenClover - Getting to work with AspectJ","body":"<p>As discussed in our comments, you can just use <a href=\"https://www.mojohaus.org/aspectj-maven-plugin/\" rel=\"nofollow noreferrer\">AspectJ Maven</a> instead of <a href=\"https://confluence.atlassian.com/clover/clover-aspectj-compiler-816682148.html\" rel=\"nofollow noreferrer\">Clover AspectJ</a>. You just need to take a few precautions in order to get it to work:</p>\n<ul>\n<li><p>I like to put AspectJ Maven executions into the <code>process-sources</code> phase in order to make sure the AspectJ compiler kicks in before the normal Java compiler kicked off by Maven Compiler plugin. You could also deactivate Maven Compiler instead as Ajc is a full replacement for Javac. Actually that phase used to be the default in older plugin versions, but it has been <a href=\"https://github.com/mojohaus/aspectj-maven-plugin/commit/4e35d12c8766a14dd6eca18e06bff469ba6a9529?diff=unified\" rel=\"nofollow noreferrer\">changed long ago</a>, which is also mentioned in an <a href=\"https://stackoverflow.com/a/5038039/1082681\">answer on SO</a>. See also <a href=\"https://web.archive.org/web/20150508025455/https://jira.codehaus.org/browse/MASPECTJ-13\" rel=\"nofollow noreferrer\">MASPECTJ-13</a> for why it was changed and <a href=\"https://web.archive.org/web/20150507002003/https://jira.codehaus.org/browse/MASPECTJ-92\" rel=\"nofollow noreferrer\">MASPECTJ-92</a> for why the change was a bad idea.</p>\n</li>\n<li><p>There is a problem in Maven Compiler, namely the switch <code>useIncrementalCompilation</code> seems to have reversed logic. This is why you need to set it to <code>false</code> in order to make it work. Otherwise it tries to recompile stuff already compiled by AspectJ, breaking aspect weaving. See <a href=\"https://issues.apache.org/jira/browse/MCOMPILER-209\" rel=\"nofollow noreferrer\">MCOMPILER-209</a> and <a href=\"https://issues.apache.org/jira/browse/MCOMPILER-194\" rel=\"nofollow noreferrer\">MCOMPILER-194</a>, I explained the problem and its solution there in my posts.</p>\n</li>\n<li><p>Now the only issue actually related to OpenClover (OC): AspectJ (AJ) does not know anything about OC adding source code to each method in order to enable code coverage. Unfortunately OC also does not know about AJ and also adds code to annotation-style pointcuts defined as empty methods with a <code>@Pointcut</code> annotation. As OC needs to do its magic before AJ compiles, the AJ compiler complains about unexpected code found in the pointcut and stops compilation with an error. There are at least two ways to avoid that:</p>\n<ul>\n<li><p>You can either inline all pointcuts into the respective <code>@Before</code>, <code>@After</code>, <code>@Around</code> etc. advices using them, which usually works, but is not always an option in cases where you need argument binding in pointcuts in order to implement a wormhole pattern like <code>execution(pointcutA()) &amp;&amp; cflow(execution(pointcutB(myArgument)))</code>.</p>\n</li>\n<li><p>Or you can exclude all aspects from OC instrumentation, which is easiest if they reside in one package where there are no other Java classes which need to be instrumented. Then you can use a simple exclusion like in your case <code>&lt;exclude&gt;codeaspects/**&lt;/exclude&gt;</code>. This is what I was doing in my <a href=\"https://github.com/amportugal/aspectj-with-clover-instr/pull/1\" rel=\"nofollow noreferrer\">pull request</a> when fixing your project.</p>\n</li>\n<li><p>The easiest way is to just rename all aspects from <code>*.java</code> to <code>*.aj</code>, which is the canonical way of naming them anyway. I just tried in your project, and it works beautifully. AspectJ Maven looks for those files anyway, but OC will ignore them, not even calculating their lines of code for missing coverage. You can also get rid of the <code>&lt;exclude&gt;</code> mentioned above, see <a href=\"https://github.com/kriegaex/aspectj-with-clover-instr/commit/7744b0058f421bdfe8c0f530c49b29c6c30caac3\" rel=\"nofollow noreferrer\">this commit</a>.</p>\n</li>\n</ul>\n</li>\n</ul>\n<p>Maybe all of this is automatically taken care of by Clover AspectJ, I never tried. Maybe the author of that compiler wrapper should actually explain what it does and how it works in the documentation, especially how to use it with Maven. Otherwise it does not make much sense to use it.</p>\n"}],"owner":{"account_id":4155996,"reputation":124,"user_id":3407281,"accept_rate":17,"display_name":"amportugal"},"comment_count":11,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1065,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":50997238,"answer_count":1,"score":0,"last_activity_date":1635420221,"creation_date":1528384377,"question_id":50744732,"body_markdown":"I&#39;m trying to use Openclover with a project that uses AspectJ and that instruments aspects into its code.\r\n\r\nThe `pom.xml` has these dependencies with relation to AspectJ:\r\n \r\n&lt;!-- language: xml --&gt;\r\n  \r\n    ...\r\n\t&lt;dependencies&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.aspectj&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;aspectjweaver&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;1.8.9&lt;/version&gt;\r\n\t\t\t&lt;scope&gt;provided&lt;/scope&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.aspectj&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;aspectjrt&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;1.8.9&lt;/version&gt;\r\n\t\t\t&lt;scope&gt;provided&lt;/scope&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t&lt;/dependencies&gt;\r\n    ...\r\n\r\nAnd these plugins: \r\n\r\n&lt;!-- language: xml --&gt;\r\n\r\n\t\t&lt;plugins&gt;\r\n\t\t\t&lt;plugin&gt;\r\n\t\t\t\t&lt;groupId&gt;org.codehaus.mojo&lt;/groupId&gt;\r\n\t\t\t\t&lt;artifactId&gt;aspectj-maven-plugin&lt;/artifactId&gt;\r\n\t\t\t&lt;/plugin&gt;\r\n\r\n\t\t\t&lt;plugin&gt;\r\n\t\t\t\t&lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n\t\t\t\t&lt;artifactId&gt;maven-surefire-plugin&lt;/artifactId&gt;\r\n\t\t\t&lt;/plugin&gt;\r\n\t\t\t&lt;plugin&gt;\r\n\t\t\t\t&lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n\t\t\t\t&lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\r\n\t\t\t&lt;/plugin&gt;\r\n\r\n            &lt;plugin&gt;\r\n                &lt;groupId&gt;org.openclover&lt;/groupId&gt;\r\n                &lt;artifactId&gt;clover-aspectj-compiler&lt;/artifactId&gt;\r\n                &lt;version&gt;1.0.0&lt;/version&gt;\r\n            &lt;/plugin&gt;\r\n\r\n\t\t\t&lt;plugin&gt;\r\n\t\t\t\t&lt;groupId&gt;org.openclover&lt;/groupId&gt;\r\n\t\t\t\t&lt;artifactId&gt;clover-maven-plugin&lt;/artifactId&gt;\r\n\t\t\t\t&lt;version&gt;4.2.0&lt;/version&gt;\r\n\t\t\t\t&lt;executions&gt;\r\n\t\t\t\t\t&lt;execution&gt;\r\n\t\t\t\t\t\t&lt;id&gt;clover&lt;/id&gt;\r\n\t\t\t\t\t\t&lt;phase&gt;verify&lt;/phase&gt;\r\n\t\t\t\t\t\t&lt;goals&gt;\r\n\t\t\t\t\t\t\t&lt;goal&gt;instrument&lt;/goal&gt;\r\n\t\t\t\t\t\t\t&lt;goal&gt;clover&lt;/goal&gt;\r\n\t\t\t\t\t\t&lt;/goals&gt;\r\n\t\t\t\t\t&lt;/execution&gt;\r\n\t\t\t\t&lt;/executions&gt;\r\n\t\t\t&lt;/plugin&gt;\r\n\t\t&lt;/plugins&gt;\r\n\r\nI&#39;m using two plugins to do this: `clover-maven-plugin` which is a code coverage tool and `clover-aspectj-compiler`, a wrapper for AspectJ compiler which allows code instrumentation using OpenClover.\r\n\r\nThe errors I get are the following:\r\n\r\n    [ERROR] QueryAspect.java:48:0::0 The type QueryAspect is already defined\r\n    [ERROR] LogAspect.java:35:0::0 The type LogAspect is already defined\r\n\r\n\r\nThe documentation about this is just too little (or better, none) and I can&#39;t seem to make AspectJ work with OpenClover, and there isn&#39;t much help on the web.\r\n\r\nThank you\r\n\r\n","title":"OpenClover - Getting to work with AspectJ","body":"<p>I'm trying to use Openclover with a project that uses AspectJ and that instruments aspects into its code.</p>\n\n<p>The <code>pom.xml</code> has these dependencies with relation to AspectJ:</p>\n\n<pre class=\"lang-xml prettyprint-override\"><code>...\n&lt;dependencies&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.aspectj&lt;/groupId&gt;\n        &lt;artifactId&gt;aspectjweaver&lt;/artifactId&gt;\n        &lt;version&gt;1.8.9&lt;/version&gt;\n        &lt;scope&gt;provided&lt;/scope&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.aspectj&lt;/groupId&gt;\n        &lt;artifactId&gt;aspectjrt&lt;/artifactId&gt;\n        &lt;version&gt;1.8.9&lt;/version&gt;\n        &lt;scope&gt;provided&lt;/scope&gt;\n    &lt;/dependency&gt;\n&lt;/dependencies&gt;\n...\n</code></pre>\n\n<p>And these plugins: </p>\n\n<pre class=\"lang-xml prettyprint-override\"><code>    &lt;plugins&gt;\n        &lt;plugin&gt;\n            &lt;groupId&gt;org.codehaus.mojo&lt;/groupId&gt;\n            &lt;artifactId&gt;aspectj-maven-plugin&lt;/artifactId&gt;\n        &lt;/plugin&gt;\n\n        &lt;plugin&gt;\n            &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n            &lt;artifactId&gt;maven-surefire-plugin&lt;/artifactId&gt;\n        &lt;/plugin&gt;\n        &lt;plugin&gt;\n            &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n            &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\n        &lt;/plugin&gt;\n\n        &lt;plugin&gt;\n            &lt;groupId&gt;org.openclover&lt;/groupId&gt;\n            &lt;artifactId&gt;clover-aspectj-compiler&lt;/artifactId&gt;\n            &lt;version&gt;1.0.0&lt;/version&gt;\n        &lt;/plugin&gt;\n\n        &lt;plugin&gt;\n            &lt;groupId&gt;org.openclover&lt;/groupId&gt;\n            &lt;artifactId&gt;clover-maven-plugin&lt;/artifactId&gt;\n            &lt;version&gt;4.2.0&lt;/version&gt;\n            &lt;executions&gt;\n                &lt;execution&gt;\n                    &lt;id&gt;clover&lt;/id&gt;\n                    &lt;phase&gt;verify&lt;/phase&gt;\n                    &lt;goals&gt;\n                        &lt;goal&gt;instrument&lt;/goal&gt;\n                        &lt;goal&gt;clover&lt;/goal&gt;\n                    &lt;/goals&gt;\n                &lt;/execution&gt;\n            &lt;/executions&gt;\n        &lt;/plugin&gt;\n    &lt;/plugins&gt;\n</code></pre>\n\n<p>I'm using two plugins to do this: <code>clover-maven-plugin</code> which is a code coverage tool and <code>clover-aspectj-compiler</code>, a wrapper for AspectJ compiler which allows code instrumentation using OpenClover.</p>\n\n<p>The errors I get are the following:</p>\n\n<pre><code>[ERROR] QueryAspect.java:48:0::0 The type QueryAspect is already defined\n[ERROR] LogAspect.java:35:0::0 The type LogAspect is already defined\n</code></pre>\n\n<p>The documentation about this is just too little (or better, none) and I can't seem to make AspectJ work with OpenClover, and there isn't much help on the web.</p>\n\n<p>Thank you</p>\n"},{"tags":["java","database","h2"],"owner":{"account_id":10059873,"reputation":21,"user_id":17269281,"display_name":"Andrew Snejovski"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":61,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":0,"score":2,"last_activity_date":1635420157,"creation_date":1635415214,"question_id":69752018,"body_markdown":"I am using Java 1.8 and H2 1.4.199.\r\n\r\nI have a method insertRecord(DATA_OBJECT) which inserts single row into table, and then returns the generated ID for this row. It instantiates a Task object and submit it onto  SingleThreadExecutorService one-by-one, and the generated ID is retrieved from Future object. Most of the time it works just fine. However, sometimes a situation like this happens:\r\n\r\n - Row 10 insert is submitted to ExecutorService\r\n - Row 11 insert is meant to be waiting in front of &quot;synchronized&quot; block to be submitted to ExecutorService\r\n - Row 10 is being inserted by code, and Future returns generated ID = 11\r\n - Row 11 is being inserted by code, and Future returns generated ID = 11\r\n\r\nI have no working and reproducible example, because it is a very rare situation, but it happens.\r\n\r\nNo exceptions thrown and I have no idea how this could happen.\r\n\r\nBelow is the example of code:\r\n\r\n    private static final ExecutorService singleExecutor = Executors.newSingleThreadExecutor();\r\n    \r\n    private static String insertRecord(DATA_OBJECT dataObject) {\r\n        Future&lt;String&gt; future;\r\n        synchronized (singleExecutor) {\r\n            future = singleExecutor.submit(new Task(dataObject));\r\n        }\r\n        try {\r\n            return future.get();\r\n        } catch (InterruptedException ex) {\r\n            Logger.getLogger(CLASS_NAME.class.getName()).log(Level.SEVERE, null, ex);\r\n        } catch (ExecutionException ex) {\r\n            Logger.getLogger(CLASS_NAME.class.getName()).log(Level.SEVERE, null, ex);\r\n        }\r\n    }\r\n    \r\n    private class Task implements Callable&lt;String&gt; {\r\n\r\n        private DATA_OBJECT dataObject;\r\n\r\n        public Task(DATA_OBJECT dataObject) {\r\n            this.dataObject = dataObject;\r\n        }\r\n\r\n        @Override\r\n        public String call() {\r\n            try {\r\n                return execute(dataObject);\r\n            } catch (SQLException ex) {\r\n                Logger.getLogger(CLASS_NAME.class.getName()).log(Level.SEVERE, null, ex);\r\n            }\r\n            return null;\r\n        }\r\n\r\n    }\r\n    \r\n    private static String execute(DATA_OBJECT dataObject) {\r\n        Connection conn = Database.getTransactedConnection();\r\n        String lastId = null;\r\n        boolean success = false;\r\n        try (\r\n                PreparedStatement statement = \r\n                        conn.prepareStatement(\r\n                                &quot;insert into TABLE (COLUMN_NAMES) values (VALUES)&quot;, \r\n                                Statement.RETURN_GENERATED_KEYS\r\n                        )\r\n        ) {\r\n                statement.setString(1, dataObject.STRING_1);\r\n                statement.setString(N, dataObject.STRING_N);\r\n                success = statement.executeUpdate() == 1;\r\n                if (success) {\r\n                    try (ResultSet generatedKeys = statement.getGeneratedKeys()) {\r\n                        if (generatedKeys.next()) {\r\n                            lastID = generatedKeys.getString(1);\r\n                        }\r\n                    }\r\n                }\r\n        } finally {\r\n            if (success)\r\n                conn.commit();\r\n            else \r\n                conn.rollback();\r\n            Database.releaseConnection(conn);\r\n        }\r\n        return lastId;\r\n    }\r\n\r\n\r\nI am trying to find a way to avoid 100% of these events because the consequences are devastating. How can I do this?\r\n\r\nWhat could be the problem leading to the return of the identifier from the future?","title":"H2 1.4.199 database getGeneratedKeys() returns key generated by another insert transaction OR Future objects are mixed up","body":"<p>I am using Java 1.8 and H2 1.4.199.</p>\n<p>I have a method insertRecord(DATA_OBJECT) which inserts single row into table, and then returns the generated ID for this row. It instantiates a Task object and submit it onto  SingleThreadExecutorService one-by-one, and the generated ID is retrieved from Future object. Most of the time it works just fine. However, sometimes a situation like this happens:</p>\n<ul>\n<li>Row 10 insert is submitted to ExecutorService</li>\n<li>Row 11 insert is meant to be waiting in front of &quot;synchronized&quot; block to be submitted to ExecutorService</li>\n<li>Row 10 is being inserted by code, and Future returns generated ID = 11</li>\n<li>Row 11 is being inserted by code, and Future returns generated ID = 11</li>\n</ul>\n<p>I have no working and reproducible example, because it is a very rare situation, but it happens.</p>\n<p>No exceptions thrown and I have no idea how this could happen.</p>\n<p>Below is the example of code:</p>\n<pre><code>private static final ExecutorService singleExecutor = Executors.newSingleThreadExecutor();\n\nprivate static String insertRecord(DATA_OBJECT dataObject) {\n    Future&lt;String&gt; future;\n    synchronized (singleExecutor) {\n        future = singleExecutor.submit(new Task(dataObject));\n    }\n    try {\n        return future.get();\n    } catch (InterruptedException ex) {\n        Logger.getLogger(CLASS_NAME.class.getName()).log(Level.SEVERE, null, ex);\n    } catch (ExecutionException ex) {\n        Logger.getLogger(CLASS_NAME.class.getName()).log(Level.SEVERE, null, ex);\n    }\n}\n\nprivate class Task implements Callable&lt;String&gt; {\n\n    private DATA_OBJECT dataObject;\n\n    public Task(DATA_OBJECT dataObject) {\n        this.dataObject = dataObject;\n    }\n\n    @Override\n    public String call() {\n        try {\n            return execute(dataObject);\n        } catch (SQLException ex) {\n            Logger.getLogger(CLASS_NAME.class.getName()).log(Level.SEVERE, null, ex);\n        }\n        return null;\n    }\n\n}\n\nprivate static String execute(DATA_OBJECT dataObject) {\n    Connection conn = Database.getTransactedConnection();\n    String lastId = null;\n    boolean success = false;\n    try (\n            PreparedStatement statement = \n                    conn.prepareStatement(\n                            &quot;insert into TABLE (COLUMN_NAMES) values (VALUES)&quot;, \n                            Statement.RETURN_GENERATED_KEYS\n                    )\n    ) {\n            statement.setString(1, dataObject.STRING_1);\n            statement.setString(N, dataObject.STRING_N);\n            success = statement.executeUpdate() == 1;\n            if (success) {\n                try (ResultSet generatedKeys = statement.getGeneratedKeys()) {\n                    if (generatedKeys.next()) {\n                        lastID = generatedKeys.getString(1);\n                    }\n                }\n            }\n    } finally {\n        if (success)\n            conn.commit();\n        else \n            conn.rollback();\n        Database.releaseConnection(conn);\n    }\n    return lastId;\n}\n</code></pre>\n<p>I am trying to find a way to avoid 100% of these events because the consequences are devastating. How can I do this?</p>\n<p>What could be the problem leading to the return of the identifier from the future?</p>\n"},{"tags":["java","intellij-idea","intellij-inspections"],"answers":[{"tags":[],"owner":{"account_id":14879298,"reputation":1234,"user_id":10744483,"display_name":"Olga Klisho"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1635420095,"creation_date":1635420095,"answer_id":69753198,"question_id":69752828,"body_markdown":"You may create a feature request for the inpsection at YouTrack:\r\nhttps://youtrack.jetbrains.com/issues/IDEA\r\nor you may also implement such an inspection as plugin using the available sources:\r\nhttps://github.com/JetBrains/intellij-community\r\n","title":"How to write custom inspection for duplicate annotations in Intellij Idea?","body":"<p>You may create a feature request for the inpsection at YouTrack:\n<a href=\"https://youtrack.jetbrains.com/issues/IDEA\" rel=\"nofollow noreferrer\">https://youtrack.jetbrains.com/issues/IDEA</a>\nor you may also implement such an inspection as plugin using the available sources:\n<a href=\"https://github.com/JetBrains/intellij-community\" rel=\"nofollow noreferrer\">https://github.com/JetBrains/intellij-community</a></p>\n"}],"owner":{"account_id":23170538,"reputation":21,"user_id":17269864,"display_name":"pro100filimon"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":122,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":1,"score":2,"last_activity_date":1635420095,"creation_date":1635418679,"question_id":69752828,"body_markdown":"Test methods is annotated with values, this values must be uniq.\r\nI want an inspection in IDEA that highlights duplicate annotation. Duplicates may be in different java files\r\n\r\nExample\r\n\r\n    @Link(type = &quot;manual&quot;, value = &quot;123456&quot;)&lt;-this must be highlighte\r\n    void someTest1(){\r\n    }\r\n\r\n    @Link(type = &quot;manual&quot;, value = &quot;654321&quot;)\r\n    void someTest2{\r\n    }\r\n\r\n    @Link(type = &quot;manual&quot;, value = &quot;123456&quot;)&lt;-and this must be highlighted, because of the same value\r\n    void someTest3(){\r\n    }\r\n\r\n","title":"How to write custom inspection for duplicate annotations in Intellij Idea?","body":"<p>Test methods is annotated with values, this values must be uniq.\nI want an inspection in IDEA that highlights duplicate annotation. Duplicates may be in different java files</p>\n<p>Example</p>\n<pre><code>@Link(type = &quot;manual&quot;, value = &quot;123456&quot;)&lt;-this must be highlighte\nvoid someTest1(){\n}\n\n@Link(type = &quot;manual&quot;, value = &quot;654321&quot;)\nvoid someTest2{\n}\n\n@Link(type = &quot;manual&quot;, value = &quot;123456&quot;)&lt;-and this must be highlighted, because of the same value\nvoid someTest3(){\n}\n</code></pre>\n"},{"tags":["java","maven-2","aop","aspectj"],"comments":[{"owner":{"account_id":23551,"reputation":30672,"user_id":59087,"accept_rate":99,"display_name":"Dave Jarvis"},"score":0,"creation_date":1535131647,"post_id":2610633,"comment_id":90969034,"body_markdown":"See also: https://stackoverflow.com/a/16248351/59087","body":"See also: <a href=\"https://stackoverflow.com/a/16248351/59087\">stackoverflow.com/a/16248351/59087</a>"}],"answers":[{"tags":[],"owner":{"account_id":26957,"reputation":564361,"user_id":70604,"display_name":"Pascal Thivent"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1502363749,"creation_date":1270847287,"answer_id":2610932,"question_id":2610633,"body_markdown":"&gt; How do you specify a custom compilerId that points to your own ajc compiler (that is make compile:compile use an aspectj compiler other than the plexus one)?\r\n\r\nI don&#39;t know how to specify another `compilerId` than the [&quot;official&quot;][1] ones. Not sure it&#39;s possible. \r\n\r\nMy understanding is that http://jira.codehaus.org/browse/MCOMPILER-107 would solve your problem (AspectJ 1.6+ does support Java 1. 6 right?). Sadly, it&#39;s still open.\r\n\r\n&gt; How do you ignore the failure of compile:compile?\r\n\r\nThe [**`compiler:compile`**][3] goal of the [Maven Compiler plugin][4] has a [**`failOnError`**][5] optional parameter allowing to *Indicate whether the build will continue even if there are compilation errors*.\r\n\r\n&lt;!-- language: lang-xml --&gt;\r\n\r\n    &lt;project&gt;\r\n      ...\r\n      &lt;build&gt;\r\n        ...\r\n        &lt;plugins&gt;\r\n          ...\r\n          &lt;plugin&gt;\r\n            &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\r\n            &lt;version&gt;2.2&lt;/version&gt;\r\n            &lt;configuration&gt;\r\n              &lt;failOnError&gt;false&lt;/failOnError&gt;\r\n              ...\r\n            &lt;/configuration&gt;\r\n          &lt;/plugin&gt;\r\n        &lt;/plugins&gt;\r\n      &lt;/build&gt;\r\n    &lt;/project&gt;\r\n\r\nThis could be a ugly workaround to the above problem.\r\n\r\n&gt;  How do you get maven to run the aspectj:compile goal directly, without ever running compile:compile?\r\n\r\nThe problem is that **`compiler:compile`** is bound to the **`compile`** phase and that you can&#39;t remove a [default lifecyle binding][2]. So there is maybe another option but the only one I can think of would be to turn everything *off* by using a `&lt;packaging&gt;pom&lt;packaging&gt;` and to rebind all the goals manually (at least for these phases: `process-resources`, `compile`, `process-test-resources`, `test-compile`, `test`, `package`). Schematically, something like this:\r\n\r\n&lt;pre&gt;\r\nprocess-resources       resources:resources\r\ncompile                 aspectj:compile\r\nprocess-test-resources  resources:testResources\r\ntest-compile            compiler:testCompile\r\ntest                    surefire:test\r\npackage                 ejb:ejb or ejb3:ejb3 or jar:jar or par:par or rar:rar or war:war\r\ninstall                 install:install\r\ndeploy                  deploy:deploy\r\n&lt;/pre&gt;\r\n\r\nThat could be another ugly workaround. Disclaimer: not tested but should work.\r\n\r\n\r\n  [1]: http://maven.apache.org/plugins/maven-compiler-plugin/non-javac-compilers.html\r\n  [2]: http://maven.apache.org/guides/introduction/introduction-to-the-lifecycle.html#Built-in_Lifecycle_Bindings\r\n  [3]: http://maven.apache.org/plugins/maven-compiler-plugin/compile-mojo.html\r\n  [4]: http://maven.apache.org/plugins/maven-compiler-plugin/\r\n  [5]: http://maven.apache.org/plugins/maven-compiler-plugin/compile-mojo.html#failOnError","title":"Maven: compile aspectj project containing Java 1.6 source","body":"<blockquote>\n  <p>How do you specify a custom compilerId that points to your own ajc compiler (that is make compile:compile use an aspectj compiler other than the plexus one)?</p>\n</blockquote>\n\n<p>I don't know how to specify another <code>compilerId</code> than the <a href=\"http://maven.apache.org/plugins/maven-compiler-plugin/non-javac-compilers.html\" rel=\"nofollow noreferrer\">\"official\"</a> ones. Not sure it's possible. </p>\n\n<p>My understanding is that <a href=\"http://jira.codehaus.org/browse/MCOMPILER-107\" rel=\"nofollow noreferrer\">http://jira.codehaus.org/browse/MCOMPILER-107</a> would solve your problem (AspectJ 1.6+ does support Java 1. 6 right?). Sadly, it's still open.</p>\n\n<blockquote>\n  <p>How do you ignore the failure of compile:compile?</p>\n</blockquote>\n\n<p>The <a href=\"http://maven.apache.org/plugins/maven-compiler-plugin/compile-mojo.html\" rel=\"nofollow noreferrer\"><strong><code>compiler:compile</code></strong></a> goal of the <a href=\"http://maven.apache.org/plugins/maven-compiler-plugin/\" rel=\"nofollow noreferrer\">Maven Compiler plugin</a> has a <a href=\"http://maven.apache.org/plugins/maven-compiler-plugin/compile-mojo.html#failOnError\" rel=\"nofollow noreferrer\"><strong><code>failOnError</code></strong></a> optional parameter allowing to <em>Indicate whether the build will continue even if there are compilation errors</em>.</p>\n\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;project&gt;\n  ...\n  &lt;build&gt;\n    ...\n    &lt;plugins&gt;\n      ...\n      &lt;plugin&gt;\n        &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\n        &lt;version&gt;2.2&lt;/version&gt;\n        &lt;configuration&gt;\n          &lt;failOnError&gt;false&lt;/failOnError&gt;\n          ...\n        &lt;/configuration&gt;\n      &lt;/plugin&gt;\n    &lt;/plugins&gt;\n  &lt;/build&gt;\n&lt;/project&gt;\n</code></pre>\n\n<p>This could be a ugly workaround to the above problem.</p>\n\n<blockquote>\n  <p>How do you get maven to run the aspectj:compile goal directly, without ever running compile:compile?</p>\n</blockquote>\n\n<p>The problem is that <strong><code>compiler:compile</code></strong> is bound to the <strong><code>compile</code></strong> phase and that you can't remove a <a href=\"http://maven.apache.org/guides/introduction/introduction-to-the-lifecycle.html#Built-in_Lifecycle_Bindings\" rel=\"nofollow noreferrer\">default lifecyle binding</a>. So there is maybe another option but the only one I can think of would be to turn everything <em>off</em> by using a <code>&lt;packaging&gt;pom&lt;packaging&gt;</code> and to rebind all the goals manually (at least for these phases: <code>process-resources</code>, <code>compile</code>, <code>process-test-resources</code>, <code>test-compile</code>, <code>test</code>, <code>package</code>). Schematically, something like this:</p>\n\n<pre>\nprocess-resources       resources:resources\ncompile                 aspectj:compile\nprocess-test-resources  resources:testResources\ntest-compile            compiler:testCompile\ntest                    surefire:test\npackage                 ejb:ejb or ejb3:ejb3 or jar:jar or par:par or rar:rar or war:war\ninstall                 install:install\ndeploy                  deploy:deploy\n</pre>\n\n<p>That could be another ugly workaround. Disclaimer: not tested but should work.</p>\n"},{"tags":[],"owner":{"account_id":115659,"reputation":32567,"user_id":303598,"accept_rate":84,"display_name":"matsev"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1502363728,"creation_date":1270849194,"answer_id":2611126,"question_id":2610633,"body_markdown":"I used this configuration in a project to compile AspectJ and Java 6 using Maven:\r\n\r\n&lt;!-- language: lang-xml --&gt;\r\n\r\n    &lt;dependencies&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.aspectj&lt;/groupId&gt;\r\n            &lt;artifactId&gt;aspectjrt&lt;/artifactId&gt;\r\n            &lt;version&gt;1.6.8&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n    &lt;/dependencies&gt;\r\n\r\n    &lt;build&gt;\r\n        &lt;plugins&gt;\r\n            &lt;plugin&gt;\r\n                &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n                &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\r\n                &lt;version&gt;2.0.2&lt;/version&gt;\r\n                &lt;configuration&gt;\r\n                    &lt;source&gt;1.6&lt;/source&gt;\r\n                    &lt;target&gt;1.6&lt;/target&gt;\r\n                &lt;/configuration&gt;\r\n            &lt;/plugin&gt;\r\n            &lt;plugin&gt;\r\n                &lt;groupId&gt;org.codehaus.mojo&lt;/groupId&gt;\r\n                &lt;artifactId&gt;aspectj-maven-plugin&lt;/artifactId&gt;\r\n                &lt;version&gt;1.3&lt;/version&gt;\r\n                &lt;configuration&gt;\r\n                    &lt;complianceLevel&gt;1.6&lt;/complianceLevel&gt;\r\n                &lt;/configuration&gt;\r\n                &lt;executions&gt;\r\n                    &lt;execution&gt;\r\n                        &lt;goals&gt;\r\n                            &lt;goal&gt;compile&lt;/goal&gt;\r\n                            &lt;goal&gt;test-compile&lt;/goal&gt;  \r\n                        &lt;/goals&gt;\r\n                    &lt;/execution&gt;\r\n                &lt;/executions&gt;\r\n            &lt;/plugin&gt;\r\n        &lt;/plugins&gt;\r\n    &lt;/build&gt;\r\n\r\nRef: [aspectj-maven-plugin][1]\r\n\r\n\r\n  [1]: http://mojo.codehaus.org/aspectj-maven-plugin/usage.html","title":"Maven: compile aspectj project containing Java 1.6 source","body":"<p>I used this configuration in a project to compile AspectJ and Java 6 using Maven:</p>\n\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;dependencies&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.aspectj&lt;/groupId&gt;\n        &lt;artifactId&gt;aspectjrt&lt;/artifactId&gt;\n        &lt;version&gt;1.6.8&lt;/version&gt;\n    &lt;/dependency&gt;\n&lt;/dependencies&gt;\n\n&lt;build&gt;\n    &lt;plugins&gt;\n        &lt;plugin&gt;\n            &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n            &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\n            &lt;version&gt;2.0.2&lt;/version&gt;\n            &lt;configuration&gt;\n                &lt;source&gt;1.6&lt;/source&gt;\n                &lt;target&gt;1.6&lt;/target&gt;\n            &lt;/configuration&gt;\n        &lt;/plugin&gt;\n        &lt;plugin&gt;\n            &lt;groupId&gt;org.codehaus.mojo&lt;/groupId&gt;\n            &lt;artifactId&gt;aspectj-maven-plugin&lt;/artifactId&gt;\n            &lt;version&gt;1.3&lt;/version&gt;\n            &lt;configuration&gt;\n                &lt;complianceLevel&gt;1.6&lt;/complianceLevel&gt;\n            &lt;/configuration&gt;\n            &lt;executions&gt;\n                &lt;execution&gt;\n                    &lt;goals&gt;\n                        &lt;goal&gt;compile&lt;/goal&gt;\n                        &lt;goal&gt;test-compile&lt;/goal&gt;  \n                    &lt;/goals&gt;\n                &lt;/execution&gt;\n            &lt;/executions&gt;\n        &lt;/plugin&gt;\n    &lt;/plugins&gt;\n&lt;/build&gt;\n</code></pre>\n\n<p>Ref: <a href=\"http://mojo.codehaus.org/aspectj-maven-plugin/usage.html\" rel=\"nofollow noreferrer\">aspectj-maven-plugin</a></p>\n"},{"tags":[],"owner":{"account_id":159660,"reputation":116,"user_id":379214,"display_name":"Tomasz Domzal"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1502363688,"creation_date":1277828814,"answer_id":3142692,"question_id":2610633,"body_markdown":"How about telling maven-compiler-plugin to skip all *.java files and let aspectj-maven-plugin do the job ?\r\n\r\n&lt;!-- language: lang-xml --&gt;\r\n\r\n    ...\r\n    &lt;build&gt;\r\n      &lt;plugins&gt;\r\n        &lt;plugin&gt;\r\n          &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\r\n          &lt;version&gt;2.0.2&lt;/version&gt;\r\n          &lt;configuration&gt;\r\n            &lt;excludes&gt;\r\n              &lt;exclude&gt;**/*.java&lt;/exclude&gt;\r\n            &lt;/excludes&gt;\r\n          &lt;/configuration&gt;\r\n        &lt;/plugin&gt;\r\n        &lt;plugin&gt;\r\n          &lt;groupId&gt;org.codehaus.mojo&lt;/groupId&gt;\r\n          &lt;artifactId&gt;aspectj-maven-plugin&lt;/artifactId&gt;\r\n          &lt;version&gt;1.3&lt;/version&gt;\r\n          &lt;configuration&gt;\r\n            &lt;source&gt;1.6&lt;/source&gt;\r\n            &lt;target&gt;1.6&lt;/target&gt;\r\n            &lt;encoding&gt;utf-8&lt;/encoding&gt;\r\n            &lt;complianceLevel&gt;1.6&lt;/complianceLevel&gt;\r\n          &lt;/configuration&gt;\r\n          &lt;executions&gt;\r\n            &lt;execution&gt;\r\n              &lt;goals&gt;\r\n                &lt;goal&gt;compile&lt;/goal&gt;       &lt;!-- weave main classes --&gt;\r\n                &lt;goal&gt;test-compile&lt;/goal&gt;  &lt;!-- weave test classes --&gt;\r\n              &lt;/goals&gt;\r\n            &lt;/execution&gt;\r\n           &lt;/executions&gt;\r\n        &lt;/plugin&gt;\r\n      &lt;/plugins&gt;\r\n    &lt;/build&gt;\r\n\r\n","title":"Maven: compile aspectj project containing Java 1.6 source","body":"<p>How about telling maven-compiler-plugin to skip all *.java files and let aspectj-maven-plugin do the job ?</p>\n\n<pre class=\"lang-xml prettyprint-override\"><code>...\n&lt;build&gt;\n  &lt;plugins&gt;\n    &lt;plugin&gt;\n      &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\n      &lt;version&gt;2.0.2&lt;/version&gt;\n      &lt;configuration&gt;\n        &lt;excludes&gt;\n          &lt;exclude&gt;**/*.java&lt;/exclude&gt;\n        &lt;/excludes&gt;\n      &lt;/configuration&gt;\n    &lt;/plugin&gt;\n    &lt;plugin&gt;\n      &lt;groupId&gt;org.codehaus.mojo&lt;/groupId&gt;\n      &lt;artifactId&gt;aspectj-maven-plugin&lt;/artifactId&gt;\n      &lt;version&gt;1.3&lt;/version&gt;\n      &lt;configuration&gt;\n        &lt;source&gt;1.6&lt;/source&gt;\n        &lt;target&gt;1.6&lt;/target&gt;\n        &lt;encoding&gt;utf-8&lt;/encoding&gt;\n        &lt;complianceLevel&gt;1.6&lt;/complianceLevel&gt;\n      &lt;/configuration&gt;\n      &lt;executions&gt;\n        &lt;execution&gt;\n          &lt;goals&gt;\n            &lt;goal&gt;compile&lt;/goal&gt;       &lt;!-- weave main classes --&gt;\n            &lt;goal&gt;test-compile&lt;/goal&gt;  &lt;!-- weave test classes --&gt;\n          &lt;/goals&gt;\n        &lt;/execution&gt;\n       &lt;/executions&gt;\n    &lt;/plugin&gt;\n  &lt;/plugins&gt;\n&lt;/build&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":6248,"reputation":13507,"user_id":10433,"accept_rate":74,"display_name":"Andrew Swan"},"down_vote_count":0,"up_vote_count":16,"is_accepted":true,"score":16,"last_activity_date":1635420058,"creation_date":1298007806,"answer_id":5038039,"question_id":2610633,"body_markdown":"Version 1.3 of the AspectJ plugin deliberately changed the default phase of its compile goal from `process-sources` to `compile`, see [MASPECTJ-13][1]. This causes follow-up problems like yours or [MASPECTJ-92][2]. To restore the previous behaviour of running ajc before javac, you just need to add a &quot;phase&quot; tag to the relevant &quot;execution&quot; tag, like this:\r\n\r\n&lt;!-- language: xml --&gt;\r\n\r\n    &lt;execution&gt;\r\n        &lt;phase&gt;process-sources&lt;/phase&gt; &lt;!-- or any phase before compile --&gt;\r\n        &lt;goals&gt;\r\n            &lt;goal&gt;compile&lt;/goal&gt;\r\n            &lt;goal&gt;test-compile&lt;/goal&gt;\r\n        &lt;/goals&gt;\r\n    &lt;/execution&gt;\r\n\r\n  [1]: https://web.archive.org/web/20150508025455/https://jira.codehaus.org/browse/MASPECTJ-13\r\n  [2]: https://web.archive.org/web/20150507002003/https://jira.codehaus.org/browse/MASPECTJ-92","title":"Maven: compile aspectj project containing Java 1.6 source","body":"<p>Version 1.3 of the AspectJ plugin deliberately changed the default phase of its compile goal from <code>process-sources</code> to <code>compile</code>, see <a href=\"https://web.archive.org/web/20150508025455/https://jira.codehaus.org/browse/MASPECTJ-13\" rel=\"nofollow noreferrer\">MASPECTJ-13</a>. This causes follow-up problems like yours or <a href=\"https://web.archive.org/web/20150507002003/https://jira.codehaus.org/browse/MASPECTJ-92\" rel=\"nofollow noreferrer\">MASPECTJ-92</a>. To restore the previous behaviour of running ajc before javac, you just need to add a &quot;phase&quot; tag to the relevant &quot;execution&quot; tag, like this:</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;execution&gt;\n    &lt;phase&gt;process-sources&lt;/phase&gt; &lt;!-- or any phase before compile --&gt;\n    &lt;goals&gt;\n        &lt;goal&gt;compile&lt;/goal&gt;\n        &lt;goal&gt;test-compile&lt;/goal&gt;\n    &lt;/goals&gt;\n&lt;/execution&gt;\n</code></pre>\n"}],"owner":{"account_id":59653,"reputation":17337,"user_id":178433,"accept_rate":90,"display_name":"gMale"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":23307,"favorite_count":0,"down_vote_count":0,"up_vote_count":22,"accepted_answer_id":5038039,"answer_count":4,"score":22,"last_activity_date":1635420058,"creation_date":1270844368,"question_id":2610633,"body_markdown":"Primary Question\r\n----------------\r\n\r\nWhat I want to do is fairly easy.  Or so you would think.  However, nothing is working properly.\r\n\r\n**Requirement:**\r\nUsing maven, compile Java 1.6 project using AspectJ compiler.\r\n\r\n**Note:**\r\nOur code cannot compile with javac.  That is, it fails compilation if aspects are not woven in (because we have aspects that soften exceptions).\r\n&lt;hr /&gt;\r\n***Update 2/21/2011:***\r\nThere are two equally viable solutions to this (both cases use the *aspectj-maven-plugin* in conjuction with the *maven-compiler-plugin*):&lt;br /&gt;&lt;br /&gt;\r\n\r\n 1. Add\r\n        `&lt;failOnError&gt;false&lt;/failOnError&gt;`\r\n        to the compiler plugin (thanks\r\n        [Pascal Thivent][1])\r\n 2. Add `&lt;phase&gt;process-sources&lt;/phase&gt;`\r\n        to the aspectj compiler plugin\r\n        (thanks [Andrew Swan][2])\r\n\r\nMore info on these solutions is in the answer section. I believe solution #2 is the better approach.\r\n\r\n\r\n&lt;hr /&gt;\r\n&lt;br /&gt;&lt;br /&gt;&lt;br /&gt;&lt;br /&gt;&lt;br /&gt;\r\n\r\n\r\nRelated Questions\r\n-----------------\r\n\r\n**Questions (based on failed attempts below):**  \r\n\r\n  &lt;ol&gt;\r\n  &lt;li&gt;How do you get maven to run the aspectj:compile goal directly, without ever running compile:compile?&lt;/li&gt;\r\n  &lt;li&gt;How do you ignore the failure of compile:compile?&lt;/li&gt;\r\n  &lt;li&gt;How do you specify a custom compilerId that points to your own ajc compiler (that is make compile:compile use an aspectj compiler other than the plexus one)?*&lt;/li&gt;\r\n&lt;/ol&gt;\r\nThanks for any and all suggestions.  These are the things I&#39;ve tried that have led to my problem/questions:\r\n&lt;br&gt;&lt;br&gt;\r\n&lt;hr&gt; \r\n**Attempt 1 (fail):**\r\nSpecify aspectJ as the compiler for the maven-compiler-plugin:\r\n\r\n&lt;!-- language-all: lang-xml --&gt;\r\n\r\n    &lt;plugin&gt;\r\n    &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n    &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\r\n    &lt;version&gt;2.2&lt;/version&gt;\r\n    &lt;configuration&gt;\r\n     &lt;source&gt;1.6&lt;/source&gt;\r\n     &lt;target&gt;1.6&lt;/target&gt;\r\n     &lt;compilerId&gt;aspectj&lt;/compilerId&gt;\r\n    &lt;/configuration&gt;\r\n    &lt;dependencies&gt;\r\n     &lt;dependency&gt;\r\n      &lt;groupId&gt;org.codehaus.plexus&lt;/groupId&gt;\r\n      &lt;artifactId&gt;plexus-compiler-aspectj&lt;/artifactId&gt;\r\n      &lt;version&gt;1.8&lt;/version&gt;\r\n     &lt;/dependency&gt;\r\n    &lt;/dependencies&gt;\r\n    &lt;/plugin&gt;\r\n\r\nThis fails with the error:\r\n\r\n&lt;code&gt;org.codehaus.plexus.compiler.CompilerException: The source version was not recognized: 1.6&lt;/code&gt;\r\n\r\nNo matter what version of the plexus compiler I use (1.8, 1.6, 1.3, etc), this doesn&#39;t work.  I actually read through the source code and found that this compiler does not like source code above Java 1.5.\r\n\r\n**Attempt 2 (fail):**\r\nUse the aspectJ-maven-plugin attached to the compile and test-compile goals:\r\n\r\n    &lt;plugin&gt;\r\n    &lt;groupId&gt;org.codehaus.mojo&lt;/groupId&gt;\r\n    &lt;artifactId&gt;aspectj-maven-plugin&lt;/artifactId&gt;\r\n    &lt;version&gt;1.3&lt;/version&gt;\r\n    &lt;configuration&gt;\r\n     &lt;source&gt;1.6&lt;/source&gt;\r\n     &lt;target&gt;1.6&lt;/target&gt;\r\n    &lt;/configuration&gt;\r\n    &lt;executions&gt;\r\n     &lt;execution&gt;\r\n      &lt;goals&gt;\r\n       &lt;goal&gt;compile&lt;/goal&gt;      \r\n       &lt;goal&gt;test-compile&lt;/goal&gt; \r\n      &lt;/goals&gt;\r\n     &lt;/execution&gt;\r\n    &lt;/executions&gt;\r\n    &lt;/plugin&gt;\r\n\r\nThis fails when running either:\r\n\r\n&lt;code&gt;mvn clean test-compile&lt;br/&gt;\r\nmvn clean compile&lt;/code&gt;\r\n\r\nbecause it attempts to execute compile:compile before running aspectj:compile.  As noted above, our code doesn&#39;t compile with javac--the aspects are required.  So mvn would need to skip the compile:compile goal altogether and run only aspectj:compile.\r\n\r\n**Attempt 3 (works but unnacceptable):**\r\n\r\nUse the same configuration above but instead run:\r\n\r\n&lt;code&gt;mvn clean aspectj:compile&lt;/code&gt;\r\n\r\nThis works, in that it builds successfully but it&#39;s unacceptable in that we need to be able to run the compile goal and the test-compile goal directly (m2eclipse auto-build depends on those goals).  Moreover, running it this way would require that we spell out every goal we want along the way (for instance, we need resources distributed and tests to be run and test resources deployed, etc)\r\n\r\n\r\n  [1]: https://stackoverflow.com/users/70604/pascal-thivent\r\n  [2]: https://stackoverflow.com/users/10433/andrew-swan","title":"Maven: compile aspectj project containing Java 1.6 source","body":"<h2>Primary Question</h2>\n\n<p>What I want to do is fairly easy.  Or so you would think.  However, nothing is working properly.</p>\n\n<p><strong>Requirement:</strong>\nUsing maven, compile Java 1.6 project using AspectJ compiler.</p>\n\n<p><strong>Note:</strong>\nOur code cannot compile with javac.  That is, it fails compilation if aspects are not woven in (because we have aspects that soften exceptions).\n<hr />\n<strong><em>Update 2/21/2011:</em></strong>\nThere are two equally viable solutions to this (both cases use the <em>aspectj-maven-plugin</em> in conjuction with the <em>maven-compiler-plugin</em>):<br /><br /></p>\n\n<ol>\n<li>Add\n    <code>&lt;failOnError&gt;false&lt;/failOnError&gt;</code>\n    to the compiler plugin (thanks\n    <a href=\"https://stackoverflow.com/users/70604/pascal-thivent\">Pascal Thivent</a>)</li>\n<li>Add <code>&lt;phase&gt;process-sources&lt;/phase&gt;</code>\n    to the aspectj compiler plugin\n    (thanks <a href=\"https://stackoverflow.com/users/10433/andrew-swan\">Andrew Swan</a>)</li>\n</ol>\n\n<p>More info on these solutions is in the answer section. I believe solution #2 is the better approach.</p>\n\n<p><hr />\n<br /><br /><br /><br /><br /></p>\n\n<h2>Related Questions</h2>\n\n<p><strong>Questions (based on failed attempts below):</strong>  </p>\n\n<p><ol>\n  <li>How do you get maven to run the aspectj:compile goal directly, without ever running compile:compile?</li>\n  <li>How do you ignore the failure of compile:compile?</li>\n  <li>How do you specify a custom compilerId that points to your own ajc compiler (that is make compile:compile use an aspectj compiler other than the plexus one)?*</li>\n</ol>\nThanks for any and all suggestions.  These are the things I've tried that have led to my problem/questions:\n<br><br>\n<hr> \n<strong>Attempt 1 (fail):</strong>\nSpecify aspectJ as the compiler for the maven-compiler-plugin:</p>\n\n\n\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;plugin&gt;\n&lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n&lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\n&lt;version&gt;2.2&lt;/version&gt;\n&lt;configuration&gt;\n &lt;source&gt;1.6&lt;/source&gt;\n &lt;target&gt;1.6&lt;/target&gt;\n &lt;compilerId&gt;aspectj&lt;/compilerId&gt;\n&lt;/configuration&gt;\n&lt;dependencies&gt;\n &lt;dependency&gt;\n  &lt;groupId&gt;org.codehaus.plexus&lt;/groupId&gt;\n  &lt;artifactId&gt;plexus-compiler-aspectj&lt;/artifactId&gt;\n  &lt;version&gt;1.8&lt;/version&gt;\n &lt;/dependency&gt;\n&lt;/dependencies&gt;\n&lt;/plugin&gt;\n</code></pre>\n\n<p>This fails with the error:</p>\n\n<p><code>org.codehaus.plexus.compiler.CompilerException: The source version was not recognized: 1.6</code></p>\n\n<p>No matter what version of the plexus compiler I use (1.8, 1.6, 1.3, etc), this doesn't work.  I actually read through the source code and found that this compiler does not like source code above Java 1.5.</p>\n\n<p><strong>Attempt 2 (fail):</strong>\nUse the aspectJ-maven-plugin attached to the compile and test-compile goals:</p>\n\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;plugin&gt;\n&lt;groupId&gt;org.codehaus.mojo&lt;/groupId&gt;\n&lt;artifactId&gt;aspectj-maven-plugin&lt;/artifactId&gt;\n&lt;version&gt;1.3&lt;/version&gt;\n&lt;configuration&gt;\n &lt;source&gt;1.6&lt;/source&gt;\n &lt;target&gt;1.6&lt;/target&gt;\n&lt;/configuration&gt;\n&lt;executions&gt;\n &lt;execution&gt;\n  &lt;goals&gt;\n   &lt;goal&gt;compile&lt;/goal&gt;      \n   &lt;goal&gt;test-compile&lt;/goal&gt; \n  &lt;/goals&gt;\n &lt;/execution&gt;\n&lt;/executions&gt;\n&lt;/plugin&gt;\n</code></pre>\n\n<p>This fails when running either:</p>\n\n<p><code>mvn clean test-compile<br/>\nmvn clean compile</code></p>\n\n<p>because it attempts to execute compile:compile before running aspectj:compile.  As noted above, our code doesn't compile with javac--the aspects are required.  So mvn would need to skip the compile:compile goal altogether and run only aspectj:compile.</p>\n\n<p><strong>Attempt 3 (works but unnacceptable):</strong></p>\n\n<p>Use the same configuration above but instead run:</p>\n\n<p><code>mvn clean aspectj:compile</code></p>\n\n<p>This works, in that it builds successfully but it's unacceptable in that we need to be able to run the compile goal and the test-compile goal directly (m2eclipse auto-build depends on those goals).  Moreover, running it this way would require that we spell out every goal we want along the way (for instance, we need resources distributed and tests to be run and test resources deployed, etc)</p>\n"},{"tags":["java","android","drawing","android-canvas"],"answers":[{"tags":[],"owner":{"account_id":80502,"reputation":8888,"user_id":227619,"accept_rate":100,"display_name":"Cory Charlton"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1459566757,"creation_date":1459550304,"answer_id":36366890,"question_id":36366730,"body_markdown":"Since you know how to solve the problem I would investigate using [`Paint.setShadowLayer(float radius, float dx, float dy, int shadowColor)`][1] and not drawing the text twice.\r\n\r\n&gt;  `public void setShadowLayer (float radius, float dx, float dy, int shadowColor)`\r\n&gt;\r\n&gt;This draws a shadow layer below the main layer, with the specified offset and color, and blur radius. If radius is 0, then the shadow layer is removed.\r\n&gt;\r\n&gt;Can be used to create a blurred shadow underneath text. Support for use with other drawing operations is constrained to the software rendering pipeline.\r\n&gt;\r\n&gt;The alpha of the shadow will be the paint&#39;s alpha if the shadow color is opaque, or the alpha from the shadow color if not. \r\n\r\n\tpublic void draw(Canvas c, int x, int y) {\r\n\r\n\t\tRect re = new Rect();\r\n\t\tPaint p = new Paint();\r\n\t\tp.setColor(this.color);\r\n\t\tp.setTextSize(this.GetSize());\r\n\t\tp.getTextBounds(text, 0, text.length(), re);\r\n\t\tp.setAntiAlias(true);\r\n\t\tp. setShadowLayer (2.0f, 2.0f, -2.0f, this.color);\r\n\t\t\r\n\t\tc.save();\r\n\t\tc.rotate(rotation_deg, x, y);\r\n\r\n\t\tp.setStyle(Paint.Style.FILL_AND_STROKE);\r\n\t\t//p.setStyle(Paint.Style.FILL);\r\n\t\t\r\n\t\tp.setColor(color2);\r\n\t\tc.drawText(text, x - re.width() / 2, y + ((re.height() - re.bottom) - re.height() / 2), p);\r\n\r\n\t\tc.restore();\r\n\t}\r\n\r\n  [1]: http://developer.android.com/reference/android/graphics/Paint.html#setShadowLayer%28float,%20float,%20float,%20int%29","title":"emojis not rotating with canvas","body":"<p>Since you know how to solve the problem I would investigate using <a href=\"http://developer.android.com/reference/android/graphics/Paint.html#setShadowLayer%28float,%20float,%20float,%20int%29\" rel=\"nofollow\"><code>Paint.setShadowLayer(float radius, float dx, float dy, int shadowColor)</code></a> and not drawing the text twice.</p>\n\n<blockquote>\n  <p><code>public void setShadowLayer (float radius, float dx, float dy, int shadowColor)</code></p>\n  \n  <p>This draws a shadow layer below the main layer, with the specified offset and color, and blur radius. If radius is 0, then the shadow layer is removed.</p>\n  \n  <p>Can be used to create a blurred shadow underneath text. Support for use with other drawing operations is constrained to the software rendering pipeline.</p>\n  \n  <p>The alpha of the shadow will be the paint's alpha if the shadow color is opaque, or the alpha from the shadow color if not. </p>\n</blockquote>\n\n<pre><code>public void draw(Canvas c, int x, int y) {\n\n    Rect re = new Rect();\n    Paint p = new Paint();\n    p.setColor(this.color);\n    p.setTextSize(this.GetSize());\n    p.getTextBounds(text, 0, text.length(), re);\n    p.setAntiAlias(true);\n    p. setShadowLayer (2.0f, 2.0f, -2.0f, this.color);\n\n    c.save();\n    c.rotate(rotation_deg, x, y);\n\n    p.setStyle(Paint.Style.FILL_AND_STROKE);\n    //p.setStyle(Paint.Style.FILL);\n\n    p.setColor(color2);\n    c.drawText(text, x - re.width() / 2, y + ((re.height() - re.bottom) - re.height() / 2), p);\n\n    c.restore();\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":21711865,"reputation":21,"user_id":16023380,"display_name":"REMIL K R"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1635419849,"creation_date":1634807182,"answer_id":69659034,"question_id":36366730,"body_markdown":"Set the layer type to software.\r\nThe problem will be fixed\r\n\r\n     textView.setLayerType(View.LAYER_TYPE_SOFTWARE, null)\r\n\r\n\r\n","title":"emojis not rotating with canvas","body":"<p>Set the layer type to software.\nThe problem will be fixed</p>\n<pre><code> textView.setLayerType(View.LAYER_TYPE_SOFTWARE, null)\n</code></pre>\n"}],"owner":{"account_id":4026555,"reputation":163,"user_id":3314552,"accept_rate":80,"display_name":"Fence_rider"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":957,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"answer_count":2,"score":3,"last_activity_date":1635419849,"creation_date":1459549498,"question_id":36366730,"body_markdown":"I have created an applications that allows users to paint with text, including emojis. The user can rotate and resize the text to their liking. The problem occurs when the user rotates text that includes emojis. \r\n [![enter image description here][1]][1]   \r\n\r\n\r\n  [1]: http://i.stack.imgur.com/B4Hj3.png\r\n\r\nAs you can see, there is unwanted overlap. I have deduced that this is because i draw the text twice to achieve a border affect. Whats interesting, is that the problem solves itself if the text size exceeds a certain amount. this can be seen in the bottom most test.\r\n\r\nHere is the code that drew the above image: \r\n        \r\n\r\n        public void draw(Canvas c, int x, int y) {\r\n\r\n        Rect re = new Rect();\r\n        Paint p = new Paint();\r\n        p.setColor(this.color);\r\n        p.setTextSize(this.GetSize());\r\n        p.getTextBounds(text, 0, text.length(), re);\r\n        p.setAntiAlias(true);\r\n\r\n        c.save();\r\n        c.rotate(rotation_deg, x, y);\r\n\r\n        c.drawText(text, x - re.width() / 2, y + ((re.height() - re.bottom) - re.height() / 2), p);\r\n\r\n        p.setStyle(Paint.Style.STROKE);\r\n        p.setColor(color2);\r\n        c.drawText(text, x - re.width() / 2, y + ((re.height() - re.bottom) - re.height() / 2), p);\r\n\r\n        c.restore();\r\n    }\r\n\r\n\r\n\r\nremoving the first draw command fixes the emoji problem, but then i just get the text stroke.\r\n\r\nHow can i rotate text that includes emojis?\r\n\r\nOne possible solution is to draw to a bitmap first, and then rotate the bitmap, but this process would waste both ram and time.   \r\n\r\n   ","title":"emojis not rotating with canvas","body":"<p>I have created an applications that allows users to paint with text, including emojis. The user can rotate and resize the text to their liking. The problem occurs when the user rotates text that includes emojis. \n <a href=\"https://i.stack.imgur.com/B4Hj3.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/B4Hj3.png\" alt=\"enter image description here\"></a>   </p>\n\n<p>As you can see, there is unwanted overlap. I have deduced that this is because i draw the text twice to achieve a border affect. Whats interesting, is that the problem solves itself if the text size exceeds a certain amount. this can be seen in the bottom most test.</p>\n\n<p>Here is the code that drew the above image: </p>\n\n<pre><code>    public void draw(Canvas c, int x, int y) {\n\n    Rect re = new Rect();\n    Paint p = new Paint();\n    p.setColor(this.color);\n    p.setTextSize(this.GetSize());\n    p.getTextBounds(text, 0, text.length(), re);\n    p.setAntiAlias(true);\n\n    c.save();\n    c.rotate(rotation_deg, x, y);\n\n    c.drawText(text, x - re.width() / 2, y + ((re.height() - re.bottom) - re.height() / 2), p);\n\n    p.setStyle(Paint.Style.STROKE);\n    p.setColor(color2);\n    c.drawText(text, x - re.width() / 2, y + ((re.height() - re.bottom) - re.height() / 2), p);\n\n    c.restore();\n}\n</code></pre>\n\n<p>removing the first draw command fixes the emoji problem, but then i just get the text stroke.</p>\n\n<p>How can i rotate text that includes emojis?</p>\n\n<p>One possible solution is to draw to a bitmap first, and then rotate the bitmap, but this process would waste both ram and time.   </p>\n"},{"tags":["java","command-line","jar","classpath"],"comments":[{"owner":{"account_id":277416,"reputation":681848,"user_id":571407,"accept_rate":100,"display_name":"JB Nizet"},"score":0,"creation_date":1488841733,"post_id":42637209,"comment_id":72402230,"body_markdown":"`java -cp ./javax.mail.jar:. Main` otherwise, the directory where Main is is not in the classpath, hence the error. Storing class files in the same directory as jar files is a bad idea. Using the default package is also a bad idea.","body":"<code>java -cp .&#47;javax.mail.jar:. Main</code> otherwise, the directory where Main is is not in the classpath, hence the error. Storing class files in the same directory as jar files is a bad idea. Using the default package is also a bad idea."}],"answers":[{"tags":[],"owner":{"account_id":3963224,"reputation":9906,"user_id":3269852,"display_name":"Sanjeev"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1635419786,"creation_date":1488841790,"answer_id":42637306,"question_id":42637209,"body_markdown":"You shall compile it from parent folder of com, by:\r\n\r\n    javac -cp &quot;./javax.mail.jar:.&quot; com/company/Main.java\r\n\r\nAnd then run by\r\n\r\n    java -cp &quot;./javax.mail.jar:.&quot; com.company.Main\r\n\r\n","title":"Can&#39;t run java application with .jar dependancy - &#39;Error: Could not find or load main class&#39;","body":"<p>You shall compile it from parent folder of com, by:</p>\n<pre><code>javac -cp &quot;./javax.mail.jar:.&quot; com/company/Main.java\n</code></pre>\n<p>And then run by</p>\n<pre><code>java -cp &quot;./javax.mail.jar:.&quot; com.company.Main\n</code></pre>\n"},{"tags":[],"owner":{"account_id":698222,"reputation":50202,"user_id":573032,"accept_rate":77,"display_name":"Roman C"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1488842037,"creation_date":1488842037,"answer_id":42637348,"question_id":42637209,"body_markdown":"    java -cp &quot;.;./javax.mail.jar&quot; com.company.Main","title":"Can&#39;t run java application with .jar dependancy - &#39;Error: Could not find or load main class&#39;","body":"<pre><code>java -cp \".;./javax.mail.jar\" com.company.Main\n</code></pre>\n"},{"tags":[],"owner":{"account_id":10339334,"reputation":372,"user_id":7626283,"display_name":"Rajesh Dwivedi"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1488842448,"creation_date":1488842448,"answer_id":42637421,"question_id":42637209,"body_markdown":"You can use [java.util.Scanner][1] \r\n\r\n\r\n  [1]: https://docs.oracle.com/javase/8/docs/api/java/util/Scanner.html class to accept the input from console instead of Console which is not useful in IDEs.\r\n\r\nOther post have already answered how to compile the file from command line so not adding the duplicate detail. \r\n\r\n","title":"Can&#39;t run java application with .jar dependancy - &#39;Error: Could not find or load main class&#39;","body":"<p>You can use [java.util.Scanner][1] </p>\n\n<p>[1]: <a href=\"https://docs.oracle.com/javase/8/docs/api/java/util/Scanner.html\" rel=\"nofollow noreferrer\">https://docs.oracle.com/javase/8/docs/api/java/util/Scanner.html</a> class to accept the input from console instead of Console which is not useful in IDEs.</p>\n\n<p>Other post have already answered how to compile the file from command line so not adding the duplicate detail. </p>\n"}],"owner":{"account_id":10353301,"reputation":303,"user_id":7636109,"accept_rate":100,"display_name":"Jack"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":762,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":42637306,"answer_count":3,"score":2,"last_activity_date":1635419786,"creation_date":1488841343,"question_id":42637209,"body_markdown":"So my code runs fine in my IDE and I have the `javax.mail.jar` set as a dependency and my code runs fine.\r\n\r\nExcept I need to use `Console console = System.console();`\r\nand this does not work within IDE&#39;s \r\n\r\nSo I am trying to compile my code and run it via the terminal, I can compile although when running my code it returns the error:\r\n\r\n&gt; Error: Could not find or load main class Main\r\n\r\nThis is what I do to compile:\r\n\r\n&gt; javac -cp &quot;./javax.mail.jar&quot; Main.java\r\n\r\nThen to run it:\r\n\r\n&gt; java -cp &quot;./javax.mail.jar&quot; Main\r\n\r\nbut I get the Error: Could not find or load main class Main\r\n\r\nThis is my full code:\r\n\r\n    package com.company;\r\n\r\n    import java.io.IOException;\r\n    import java.util.Properties;\r\n    import javax.mail.Message;\r\n    import javax.mail.MessagingException;\r\n    import javax.mail.PasswordAuthentication;\r\n    import javax.mail.Session;\r\n    import javax.mail.Transport;\r\n    import javax.mail.internet.InternetAddress;\r\n    import javax.mail.internet.MimeMessage;\r\n    \r\n    public class Main {\r\n    public static void main(String[] args) throws IOException {\r\n\r\n\r\n        Properties props = new Properties();\r\n        props.put(&quot;mail.smtp.host&quot;, &quot;smtp.gmail.com&quot;);\r\n        props.put(&quot;mail.smtp.socketFactory.port&quot;, &quot;465&quot;);\r\n        props.put(&quot;mail.smtp.socketFactory.class&quot;, &quot;javax.net.ssl.SSLSocketFactory&quot;);\r\n        props.put(&quot;mail.smtp.auth&quot;, &quot;true&quot;);\r\n        props.put(&quot;mail.smtp.port&quot;, &quot;465&quot;);\r\n\r\n        Session session = Session.getDefaultInstance(props,\r\n                new javax.mail.Authenticator() {\r\n                    protected PasswordAuthentication getPasswordAuthentication() {\r\n                        return new PasswordAuthentication(&quot;TestEmail@gmail.com&quot;,&quot;pass&quot;);\r\n                    }\r\n                });\r\n\r\n        try {\r\n\r\n            Message message = new MimeMessage(session);\r\n            message.setFrom(new InternetAddress(&quot;TestEmail@gmail.com&quot;));\r\n            message.setRecipients(Message.RecipientType.TO, InternetAddress.parse(&quot;TestEmail@gmail.com&quot;));\r\n            message.setSubject(&quot;JavaMail&quot;);\r\n            message.setText(&quot;Hi,&quot; + &quot;\\n\\n This is a test&quot;);\r\n\r\n            Transport.send(message);\r\n\r\n            System.out.println(&quot;Sent!&quot;);\r\n\r\n\r\n        } catch (MessagingException e) {\r\n            throw new RuntimeException(e);\r\n        }\r\n    }\r\n\r\n\r\n    }\r\n\r\n\r\nEdit:\r\nAlso tried running from parent directory(This has my com folder in and the `java.mail.jar`):\r\n\r\n&gt; java -cp &quot;./javax.mail.jar;.&quot; com.company.Main\r\n\r\nBut I get this:\r\n\r\n&gt; Error: Could not find or load main class com.company.Main\r\n","title":"Can&#39;t run java application with .jar dependancy - &#39;Error: Could not find or load main class&#39;","body":"<p>So my code runs fine in my IDE and I have the <code>javax.mail.jar</code> set as a dependency and my code runs fine.</p>\n\n<p>Except I need to use <code>Console console = System.console();</code>\nand this does not work within IDE's </p>\n\n<p>So I am trying to compile my code and run it via the terminal, I can compile although when running my code it returns the error:</p>\n\n<blockquote>\n  <p>Error: Could not find or load main class Main</p>\n</blockquote>\n\n<p>This is what I do to compile:</p>\n\n<blockquote>\n  <p>javac -cp \"./javax.mail.jar\" Main.java</p>\n</blockquote>\n\n<p>Then to run it:</p>\n\n<blockquote>\n  <p>java -cp \"./javax.mail.jar\" Main</p>\n</blockquote>\n\n<p>but I get the Error: Could not find or load main class Main</p>\n\n<p>This is my full code:</p>\n\n<pre><code>package com.company;\n\nimport java.io.IOException;\nimport java.util.Properties;\nimport javax.mail.Message;\nimport javax.mail.MessagingException;\nimport javax.mail.PasswordAuthentication;\nimport javax.mail.Session;\nimport javax.mail.Transport;\nimport javax.mail.internet.InternetAddress;\nimport javax.mail.internet.MimeMessage;\n\npublic class Main {\npublic static void main(String[] args) throws IOException {\n\n\n    Properties props = new Properties();\n    props.put(\"mail.smtp.host\", \"smtp.gmail.com\");\n    props.put(\"mail.smtp.socketFactory.port\", \"465\");\n    props.put(\"mail.smtp.socketFactory.class\", \"javax.net.ssl.SSLSocketFactory\");\n    props.put(\"mail.smtp.auth\", \"true\");\n    props.put(\"mail.smtp.port\", \"465\");\n\n    Session session = Session.getDefaultInstance(props,\n            new javax.mail.Authenticator() {\n                protected PasswordAuthentication getPasswordAuthentication() {\n                    return new PasswordAuthentication(\"TestEmail@gmail.com\",\"pass\");\n                }\n            });\n\n    try {\n\n        Message message = new MimeMessage(session);\n        message.setFrom(new InternetAddress(\"TestEmail@gmail.com\"));\n        message.setRecipients(Message.RecipientType.TO, InternetAddress.parse(\"TestEmail@gmail.com\"));\n        message.setSubject(\"JavaMail\");\n        message.setText(\"Hi,\" + \"\\n\\n This is a test\");\n\n        Transport.send(message);\n\n        System.out.println(\"Sent!\");\n\n\n    } catch (MessagingException e) {\n        throw new RuntimeException(e);\n    }\n}\n\n\n}\n</code></pre>\n\n<p>Edit:\nAlso tried running from parent directory(This has my com folder in and the <code>java.mail.jar</code>):</p>\n\n<blockquote>\n  <p>java -cp \"./javax.mail.jar;.\" com.company.Main</p>\n</blockquote>\n\n<p>But I get this:</p>\n\n<blockquote>\n  <p>Error: Could not find or load main class com.company.Main</p>\n</blockquote>\n"},{"tags":["java","database","postgresql","spring-boot","jpa"],"comments":[{"owner":{"account_id":10969163,"reputation":6667,"user_id":8060017,"display_name":"Edouard"},"score":0,"creation_date":1635408069,"post_id":69750118,"comment_id":123291069,"body_markdown":"Can you please bring more precision about the criteria to select the locationIds : is it the list of locationIds whose node_ids (a) corresponds exactly to the list [&#39;uuid100&#39;, &#39;uuid200&#39;, &#39;uuid300&#39;] :: jsonb (b) contains the list [&#39;uuid100&#39;, &#39;uuid200&#39;, &#39;uuid300&#39;] :: jsonb (c) contains one or more elements of the list [&#39;uuid100&#39;, &#39;uuid200&#39;, &#39;uuid300&#39;] :: jsonb (d) ...","body":"Can you please bring more precision about the criteria to select the locationIds : is it the list of locationIds whose node_ids (a) corresponds exactly to the list [&#39;uuid100&#39;, &#39;uuid200&#39;, &#39;uuid300&#39;] :: jsonb (b) contains the list [&#39;uuid100&#39;, &#39;uuid200&#39;, &#39;uuid300&#39;] :: jsonb (c) contains one or more elements of the list [&#39;uuid100&#39;, &#39;uuid200&#39;, &#39;uuid300&#39;] :: jsonb (d) ..."},{"owner":{"account_id":21573087,"reputation":29,"user_id":15905693,"display_name":"Akash Beura"},"score":0,"creation_date":1635409836,"post_id":69750118,"comment_id":123291793,"body_markdown":"Basically, [&#39;uuid100&#39;, &#39;uuid200&#39;, &#39;uuid300&#39;] it is the list of node ids, the content of this list can belong to various location_id(s). eg., location1UUID - [&#39;uuid100&#39;], location2UUID-[&#39;uuid200&#39;, &#39;uuid300&#39;] ..\n\nNow, my objective is, that I get a list of randomised nodeIds as given in example above, my output should be [&#39;Location1UUID&#39;, &#39;Location2UUID&#39;]","body":"Basically, [&#39;uuid100&#39;, &#39;uuid200&#39;, &#39;uuid300&#39;] it is the list of node ids, the content of this list can belong to various location_id(s). eg., location1UUID - [&#39;uuid100&#39;], location2UUID-[&#39;uuid200&#39;, &#39;uuid300&#39;] ..  Now, my objective is, that I get a list of randomised nodeIds as given in example above, my output should be [&#39;Location1UUID&#39;, &#39;Location2UUID&#39;]"},{"owner":{"account_id":21573087,"reputation":29,"user_id":15905693,"display_name":"Akash Beura"},"score":0,"creation_date":1635411344,"post_id":69750118,"comment_id":123292471,"body_markdown":"And answer to your question will be, (c).","body":"And answer to your question will be, (c)."}],"answers":[{"tags":[],"owner":{"account_id":10969163,"reputation":6667,"user_id":8060017,"display_name":"Edouard"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1635419773,"creation_date":1635419773,"answer_id":69753105,"question_id":69750118,"body_markdown":"The query to retrieve the node_ids which contain one or more elements of the list _seller_id :: text[] is :\r\n\r\n    CREATE OR REPLACE FUNCTION find_location_ids_for_seller(_seller_id text[])\r\n       RETURNS TABLE(location_id text)\r\n       LANGUAGE sql AS\r\n     $func$\r\n        SELECT n.location_id::text\r\n        FROM   node_mapping n\r\n        WHERE  n.node_ids :: jsonb ?| _seller_id ;\r\n     $func$;","title":"How to query this JSONB?","body":"<p>The query to retrieve the node_ids which contain one or more elements of the list _seller_id :: text[] is :</p>\n<pre><code>CREATE OR REPLACE FUNCTION find_location_ids_for_seller(_seller_id text[])\n   RETURNS TABLE(location_id text)\n   LANGUAGE sql AS\n $func$\n    SELECT n.location_id::text\n    FROM   node_mapping n\n    WHERE  n.node_ids :: jsonb ?| _seller_id ;\n $func$;\n</code></pre>\n"}],"owner":{"account_id":21573087,"reputation":29,"user_id":15905693,"display_name":"Akash Beura"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":56,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1635419773,"creation_date":1635407186,"question_id":69750118,"body_markdown":"So I have a table\r\n```\r\nNode_Mapping(location_id:UUID, node_ids: jsonb)\r\n```\r\n\r\nThe corresponding POJO for this is\r\n\r\n```\r\nclass NodeMapping{\r\n    UUID locationId;\r\n    Set&lt;String&gt; nodeIds;\r\n}\r\n```\r\nExample data in table is\r\n```\r\nUUID1 : [&#39;uuid100&#39;, &#39;uuid101&#39;]\r\nUUID2 : [&#39;uuid103&#39;, &#39;uuid101&#39;]\r\n```\r\nSo I want to make a query like, find out all the `locationIds` which contains this `List&lt;String&gt; : [&#39;uuid100&#39;, &#39;uuid200&#39;, &#39;uuid300&#39;]`\r\n\r\nPlease help me to form the &quot;IN&quot; query with JSONB.\r\n\r\nAlso please help me to create a function/SP to take input this list of string and return the list of locationIds as an List/Set..\r\n\r\nI tried the function but that fails.\r\n\r\n```\r\n CREATE OR REPLACE FUNCTION find_location_ids_for_seller(_seller_id text[])\r\n   RETURNS TABLE(location_id text)\r\n   LANGUAGE plpgsql AS\r\n $func$\r\n BEGIN\r\n    RETURN QUERY\r\n    SELECT n.location_id::text\r\n    FROM   node_mapping n\r\n    WHERE  n.node_ids IN _seller_id;\r\n END\r\n $func$;\r\n```","title":"How to query this JSONB?","body":"<p>So I have a table</p>\n<pre><code>Node_Mapping(location_id:UUID, node_ids: jsonb)\n</code></pre>\n<p>The corresponding POJO for this is</p>\n<pre><code>class NodeMapping{\n    UUID locationId;\n    Set&lt;String&gt; nodeIds;\n}\n</code></pre>\n<p>Example data in table is</p>\n<pre><code>UUID1 : ['uuid100', 'uuid101']\nUUID2 : ['uuid103', 'uuid101']\n</code></pre>\n<p>So I want to make a query like, find out all the <code>locationIds</code> which contains this <code>List&lt;String&gt; : ['uuid100', 'uuid200', 'uuid300']</code></p>\n<p>Please help me to form the &quot;IN&quot; query with JSONB.</p>\n<p>Also please help me to create a function/SP to take input this list of string and return the list of locationIds as an List/Set..</p>\n<p>I tried the function but that fails.</p>\n<pre><code> CREATE OR REPLACE FUNCTION find_location_ids_for_seller(_seller_id text[])\n   RETURNS TABLE(location_id text)\n   LANGUAGE plpgsql AS\n $func$\n BEGIN\n    RETURN QUERY\n    SELECT n.location_id::text\n    FROM   node_mapping n\n    WHERE  n.node_ids IN _seller_id;\n END\n $func$;\n</code></pre>\n"},{"tags":["java","android","reactjs","react-native","setup-project"],"comments":[{"owner":{"account_id":11374433,"reputation":1846,"user_id":8339172,"display_name":"Jabal Logian"},"score":0,"creation_date":1625750299,"post_id":68302374,"comment_id":120714105,"body_markdown":"have you tried implementing this one https://reactnative.dev/docs/environment-setup or this https://www.tutorialspoint.com/react_native/react_native_environment_setup.htm one?","body":"have you tried implementing this one <a href=\"https://reactnative.dev/docs/environment-setup\" rel=\"nofollow noreferrer\">reactnative.dev/docs/environment-setup</a> or this <a href=\"https://www.tutorialspoint.com/react_native/react_native_environment_setup.htm\" rel=\"nofollow noreferrer\">tutorialspoint.com/react_native/&hellip;</a> one?"},{"owner":{"account_id":21115032,"reputation":3,"user_id":15522279,"display_name":"Loookii"},"score":0,"creation_date":1625767643,"post_id":68302374,"comment_id":120722001,"body_markdown":"thank you so much :3","body":"thank you so much :3"},{"owner":{"account_id":11374433,"reputation":1846,"user_id":8339172,"display_name":"Jabal Logian"},"score":0,"creation_date":1625808281,"post_id":68302374,"comment_id":120730901,"body_markdown":"I will write it down in the answer section. Please give the checkmark if the solution helps.","body":"I will write it down in the answer section. Please give the checkmark if the solution helps."}],"answers":[{"tags":[],"owner":{"account_id":11374433,"reputation":1846,"user_id":8339172,"display_name":"Jabal Logian"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1625808405,"creation_date":1625808405,"answer_id":68311692,"question_id":68302374,"body_markdown":"You could try this one [react native environment setup from react native official documentation][1] or this [react native environment setup from tutorialspoint][2] one\r\n\r\n\r\n  [1]: https://reactnative.dev/docs/environment-setup\r\n  [2]: https://www.tutorialspoint.com/react_native/react_native_environment_setup.htm","title":"react-native run-android does not work :/","body":"<p>You could try this one <a href=\"https://reactnative.dev/docs/environment-setup\" rel=\"nofollow noreferrer\">react native environment setup from react native official documentation</a> or this <a href=\"https://www.tutorialspoint.com/react_native/react_native_environment_setup.htm\" rel=\"nofollow noreferrer\">react native environment setup from tutorialspoint</a> one</p>\n"},{"tags":[],"owner":{"account_id":12891499,"reputation":344,"user_id":9323337,"display_name":"Suman Deol"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1635419644,"creation_date":1635419644,"answer_id":69753058,"question_id":68302374,"body_markdown":"For android try this code:\r\n \r\n\r\n     # Reset metro bundler cache : \r\n    `npx react-native start --reset-cache`\r\n        \r\n    # Remove Android assets cache : \r\n    `cd android &amp;&amp; ./gradlew clean`\r\n        \r\n    # Relaunch metro server : \r\n    `npx react-native run-android`\r\n\r\nAnd to remove the &quot;Jetifier&quot;, use:\r\n\r\n    react-native run-android --no-jetifier","title":"react-native run-android does not work :/","body":"<p>For android try this code:</p>\n<pre><code> # Reset metro bundler cache : \n`npx react-native start --reset-cache`\n    \n# Remove Android assets cache : \n`cd android &amp;&amp; ./gradlew clean`\n    \n# Relaunch metro server : \n`npx react-native run-android`\n</code></pre>\n<p>And to remove the &quot;Jetifier&quot;, use:</p>\n<pre><code>react-native run-android --no-jetifier\n</code></pre>\n"}],"owner":{"account_id":21115032,"reputation":3,"user_id":15522279,"display_name":"Loookii"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1435,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":68311692,"answer_count":2,"score":0,"last_activity_date":1635419644,"creation_date":1625750129,"question_id":68302374,"body_markdown":"&lt;br&gt;\r\nRunning react-native run-android in windows but get this error:\r\n\r\n \r\n\r\n    info Running jetifier to migrate libraries to AndroidX. You can disable it using &quot;--no-jetifier&quot; flag.   \r\n      (node:8484) Warning: Accessing non-existent property &#39;padLevels&#39; of module exports inside circular dependency\r\n    (Use node --trace-warnings ... to show where the warning was created)\r\n    Jetifier found 896 file(s) to forward-jetify. Using 4 workers...\r\n    info JS server already running.\r\n    info Installing the app...\r\n    &#39;gradlew.bat&#39; n&#39;est pas reconnu en tant que commande interne\r\n    ou externe, un programme ex�cutable ou un fichier de commandes.\r\n    error Failed to install the app. Make sure you have the Android development environment set up: https://reactnative.dev/docs/environment-setup.\r\n    Error: spawn gradlew.bat ENOENT\r\n        at notFoundError (C:\\cygwin64\\home\\Abderrahmane\\app\\node_modules\\cross-spawn\\lib\\enoent.js:6:26)      \r\n        at verifyENOENT (C:\\cygwin64\\home\\Abderrahmane\\app\\node_modules\\cross-spawn\\lib\\enoent.js:40:16)      \r\n        at ChildProcess.cp.emit (C:\\cygwin64\\home\\Abderrahmane\\app\\node_modules\\cross-spawn\\lib\\enoent.js:27:25)\r\n        at Process.ChildProcess._handle.onexit (internal/child_process.js:277:12)\r\n    info Run CLI with --verbose flag for more details.`\r\n\r\nI have installed android studio and created a project\r\nand I also run the emulator and i did&lt;br&gt;\r\n\r\n    create-react-native-app project\r\n    react-native init project\r\n    react-native start\r\n    react-native run-android\r\n\r\n\r\n\r\n","title":"react-native run-android does not work :/","body":"<br>\nRunning react-native run-android in windows but get this error:\n<pre><code>info Running jetifier to migrate libraries to AndroidX. You can disable it using &quot;--no-jetifier&quot; flag.   \n  (node:8484) Warning: Accessing non-existent property 'padLevels' of module exports inside circular dependency\n(Use node --trace-warnings ... to show where the warning was created)\nJetifier found 896 file(s) to forward-jetify. Using 4 workers...\ninfo JS server already running.\ninfo Installing the app...\n'gradlew.bat' n'est pas reconnu en tant que commande interne\nou externe, un programme ex�cutable ou un fichier de commandes.\nerror Failed to install the app. Make sure you have the Android development environment set up: https://reactnative.dev/docs/environment-setup.\nError: spawn gradlew.bat ENOENT\n    at notFoundError (C:\\cygwin64\\home\\Abderrahmane\\app\\node_modules\\cross-spawn\\lib\\enoent.js:6:26)      \n    at verifyENOENT (C:\\cygwin64\\home\\Abderrahmane\\app\\node_modules\\cross-spawn\\lib\\enoent.js:40:16)      \n    at ChildProcess.cp.emit (C:\\cygwin64\\home\\Abderrahmane\\app\\node_modules\\cross-spawn\\lib\\enoent.js:27:25)\n    at Process.ChildProcess._handle.onexit (internal/child_process.js:277:12)\ninfo Run CLI with --verbose flag for more details.`\n</code></pre>\n<p>I have installed android studio and created a project\nand I also run the emulator and i did<br></p>\n<pre><code>create-react-native-app project\nreact-native init project\nreact-native start\nreact-native run-android\n</code></pre>\n"},{"tags":["java","oop"],"comments":[{"owner":{"account_id":322981,"reputation":310745,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"score":1,"creation_date":1592598910,"post_id":62477888,"comment_id":110493486,"body_markdown":"Report your error in the Question. And use proper indenting when posting code.","body":"Report your error in the Question. And use proper indenting when posting code."},{"owner":{"account_id":322981,"reputation":310745,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"score":2,"creation_date":1592599278,"post_id":62477888,"comment_id":110493617,"body_markdown":"The [Answer by AminM](https://stackoverflow.com/a/62478162/642706) seems correct. But you have other issues too. You are using the terrible class `Calendar` which was supplanted years ago by the modern *java.time* classes defined in JSR 310. Specifically, its subclass `GregorianCalendar` was replaced by `ZonedDateTime`. Even so, this would be the wrong class. Booking appointments should be done with the time zone kept separate, a `LocalDateTime` and a `ZoneId`. Politicians frequently change the offset used by their zone(s). Make a calendar using the two objects to get a `ZonedDateTime` object.","body":"The <a href=\"https://stackoverflow.com/a/62478162/642706\">Answer by AminM</a> seems correct. But you have other issues too. You are using the terrible class <code>Calendar</code> which was supplanted years ago by the modern <i>java.time</i> classes defined in JSR 310. Specifically, its subclass <code>GregorianCalendar</code> was replaced by <code>ZonedDateTime</code>. Even so, this would be the wrong class. Booking appointments should be done with the time zone kept separate, a <code>LocalDateTime</code> and a <code>ZoneId</code>. Politicians frequently change the offset used by their zone(s). Make a calendar using the two objects to get a <code>ZonedDateTime</code> object."},{"owner":{"account_id":322981,"reputation":310745,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"score":1,"creation_date":1592599450,"post_id":62477888,"comment_id":110493667,"body_markdown":"Another tip on booking appointments: Record the start time only (a `LocalDateTime` and a `ZoneId` as discussed in prior Comment), without the end time. Instead of the end, record the length of the appointment as a `Duration` object. From that you can always calculate the ending dynamically. We cannot know now what the ending time will be in the future, because of politicians changing zone offsets. Politicians around the world have shown a proclivity for changing their zone offsets with surprising frequency, and with little or no forewarning. Always expect your zone offset to change.","body":"Another tip on booking appointments: Record the start time only (a <code>LocalDateTime</code> and a <code>ZoneId</code> as discussed in prior Comment), without the end time. Instead of the end, record the length of the appointment as a <code>Duration</code> object. From that you can always calculate the ending dynamically. We cannot know now what the ending time will be in the future, because of politicians changing zone offsets. Politicians around the world have shown a proclivity for changing their zone offsets with surprising frequency, and with little or no forewarning. Always expect your zone offset to change."}],"answers":[{"tags":[],"owner":{"account_id":8197608,"reputation":822,"user_id":6169894,"display_name":"AminM"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1592598721,"creation_date":1592598721,"answer_id":62478162,"question_id":62477888,"body_markdown":"Your problem is that **public class Compara** needs to be a static class for you to be able to instantiate it in **main()** because otherwise the nested class expects to have an associated instance. \r\n\r\nYou can read more about nested classes and inner classes here: https://docs.oracle.com/javase/tutorial/java/javaOO/nested.html\r\n\r\nAlso its much cleaner to write this simply as:\r\n\r\n```\r\n// inverted order or whatever you want\r\nCollection.sort(meetings, (o1, o2) -&gt; o2.getEnding().compareTo(o1.getEnding());\r\n```\r\n\r\nLambdas make this sort of code much cleaner\r\n","title":"How can I use the Collections.sort method with 2 parameters in order to sort in ascending order a given list in Java?","body":"<p>Your problem is that <strong>public class Compara</strong> needs to be a static class for you to be able to instantiate it in <strong>main()</strong> because otherwise the nested class expects to have an associated instance. </p>\n\n<p>You can read more about nested classes and inner classes here: <a href=\"https://docs.oracle.com/javase/tutorial/java/javaOO/nested.html\" rel=\"nofollow noreferrer\">https://docs.oracle.com/javase/tutorial/java/javaOO/nested.html</a></p>\n\n<p>Also its much cleaner to write this simply as:</p>\n\n<pre><code>// inverted order or whatever you want\nCollection.sort(meetings, (o1, o2) -&gt; o2.getEnding().compareTo(o1.getEnding());\n</code></pre>\n\n<p>Lambdas make this sort of code much cleaner</p>\n"},{"tags":[],"owner":{"account_id":23147068,"reputation":1,"user_id":17249676,"display_name":"Myrh"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1635419318,"creation_date":1635419318,"answer_id":69752982,"question_id":62477888,"body_markdown":" Collections.sort(meetings, new Compara()), \r\n-- in this way you can optimize your sort Algorithm, I manage to get 67 points&#128526;...but there are some cases that I don&#39;t cover them\r\n-Also you may want to make Abstract the Compara class\r\n","title":"How can I use the Collections.sort method with 2 parameters in order to sort in ascending order a given list in Java?","body":"<p>Collections.sort(meetings, new Compara()),\n-- in this way you can optimize your sort Algorithm, I manage to get 67 points😎...but there are some cases that I don't cover them\n-Also you may want to make Abstract the Compara class</p>\n"}],"owner":{"account_id":18575375,"reputation":33,"user_id":13536203,"display_name":"George Chetan"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":393,"favorite_count":0,"down_vote_count":2,"up_vote_count":0,"accepted_answer_id":62478162,"answer_count":2,"score":-2,"last_activity_date":1635419318,"creation_date":1592597402,"question_id":62477888,"body_markdown":"I&#39;ve created a class &quot;Planificator&quot; that will allow me to sort the elements of the list by the end date.\r\n\r\nThen I would like to delete the overlapping elements.\r\n\r\nBasically my code will help me implement a meeting system.\r\n\r\nTwo meetings with starting dates in ascending order overlap if the start date of the second meeting is less than or equal to the start date of the first meeting.\r\n\r\nI&#39;ve put in my code what would be my example of an expected output to make the things look clear.\r\n\r\nThe code works on that example but  I think the way I used Collections.sort is not good because it will not work in every case. I&#39;m getting errors if I&#39;m trying something like this Collections.sort(meetings ,new Compara());.\r\n\r\n\r\n\r\n   \r\n\r\n    class Meeting implements Comparable&lt;Meeting&gt; {\r\n        private Calendar start, end;\r\n\r\n        public Meeting(Calendar start, Calendar end) {\r\n           if (start.compareTo(end) &gt; 0)\r\n              throw new IllegalArgumentException(&quot;Invalid date&quot;);\r\n           this.start = start;\r\n           this.end = end;\r\n        }\r\n    \r\n        public Calendar getStarted() {\r\n           return start;\r\n        }\r\n    \r\n        public Calendar getEnding() {\r\n           return end;\r\n        }\r\n    \r\n        public int compareTo(Meeting m) {\r\n           return this.start.compareTo(m.getStarted());\r\n        }\r\n    \r\n        public String toString() {\r\n           SimpleDateFormat sdf = new SimpleDateFormat(&quot;dd/MM/yyyy hh:mm:ss&quot;);\r\n           return sdf.format(start.getTime()) + &quot; -&gt; &quot; + sdf.format(end.getTime());\r\n        }\r\n    }\r\n\r\n    class Planificator {\r\n        public class Compara implements Comparator&lt;Meeting&gt; {\r\n           @Override\r\n           public int compare(Meeting o1, Meeting o2) {\r\n              return o1.getEnding().compareTo(o2.getEnding());\r\n           }\r\n        }\r\n        public static void planifica(List&lt;Meeting&gt; meetings) {\r\n           Collections.sort(meetings);\r\n            for (int i = 0; i &lt; meetings.size() - 1; i++) {\r\n                if (meetings.get(i).getEnding().compareTo(meetings.get(i + 1).getStarted()) &gt; 0) {\r\n                    meetings.remove(i + 1);\r\n                    --i;\r\n                 }\r\n            }\r\n        }\r\n    }\r\n \r\n    public class Main {\r\n        public static void main(String[] args) throws Exception {\r\n           try {\r\n                List&lt;Meeting&gt; l = new ArrayList&lt;&gt;();\r\n                l.add(new Meeting(new GregorianCalendar(1,2,3), new GregorianCalendar(2,2,3)));\r\n                l.add(new Meeting(new GregorianCalendar(1, 2, 3), new GregorianCalendar(5, 2, 3)));\r\n                l.add(new Meeting(new GregorianCalendar(3, 2, 3), new GregorianCalendar(5, 2, 3)));\r\n                Planificator.plan(l);\r\n                System.out.println(l);  // [03/03/0001 12:00:00 -&gt; 03/03/0002 12:00:00, 03/03/0003 12:00:00 -&gt; 03/03/0005 12:00:00]\r\n           } catch (IllegalArgumentException e) {\r\n                 System.out.print(e.getMessage());\r\n           }\r\n        }\r\n    }\r\n\r\n","title":"How can I use the Collections.sort method with 2 parameters in order to sort in ascending order a given list in Java?","body":"<p>I've created a class \"Planificator\" that will allow me to sort the elements of the list by the end date.</p>\n\n<p>Then I would like to delete the overlapping elements.</p>\n\n<p>Basically my code will help me implement a meeting system.</p>\n\n<p>Two meetings with starting dates in ascending order overlap if the start date of the second meeting is less than or equal to the start date of the first meeting.</p>\n\n<p>I've put in my code what would be my example of an expected output to make the things look clear.</p>\n\n<p>The code works on that example but  I think the way I used Collections.sort is not good because it will not work in every case. I'm getting errors if I'm trying something like this Collections.sort(meetings ,new Compara());.</p>\n\n<pre><code>class Meeting implements Comparable&lt;Meeting&gt; {\n    private Calendar start, end;\n\n    public Meeting(Calendar start, Calendar end) {\n       if (start.compareTo(end) &gt; 0)\n          throw new IllegalArgumentException(\"Invalid date\");\n       this.start = start;\n       this.end = end;\n    }\n\n    public Calendar getStarted() {\n       return start;\n    }\n\n    public Calendar getEnding() {\n       return end;\n    }\n\n    public int compareTo(Meeting m) {\n       return this.start.compareTo(m.getStarted());\n    }\n\n    public String toString() {\n       SimpleDateFormat sdf = new SimpleDateFormat(\"dd/MM/yyyy hh:mm:ss\");\n       return sdf.format(start.getTime()) + \" -&gt; \" + sdf.format(end.getTime());\n    }\n}\n\nclass Planificator {\n    public class Compara implements Comparator&lt;Meeting&gt; {\n       @Override\n       public int compare(Meeting o1, Meeting o2) {\n          return o1.getEnding().compareTo(o2.getEnding());\n       }\n    }\n    public static void planifica(List&lt;Meeting&gt; meetings) {\n       Collections.sort(meetings);\n        for (int i = 0; i &lt; meetings.size() - 1; i++) {\n            if (meetings.get(i).getEnding().compareTo(meetings.get(i + 1).getStarted()) &gt; 0) {\n                meetings.remove(i + 1);\n                --i;\n             }\n        }\n    }\n}\n\npublic class Main {\n    public static void main(String[] args) throws Exception {\n       try {\n            List&lt;Meeting&gt; l = new ArrayList&lt;&gt;();\n            l.add(new Meeting(new GregorianCalendar(1,2,3), new GregorianCalendar(2,2,3)));\n            l.add(new Meeting(new GregorianCalendar(1, 2, 3), new GregorianCalendar(5, 2, 3)));\n            l.add(new Meeting(new GregorianCalendar(3, 2, 3), new GregorianCalendar(5, 2, 3)));\n            Planificator.plan(l);\n            System.out.println(l);  // [03/03/0001 12:00:00 -&gt; 03/03/0002 12:00:00, 03/03/0003 12:00:00 -&gt; 03/03/0005 12:00:00]\n       } catch (IllegalArgumentException e) {\n             System.out.print(e.getMessage());\n       }\n    }\n}\n</code></pre>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":45213,"reputation":26348,"user_id":133203,"accept_rate":97,"display_name":"Federico klez Culloca"},"score":0,"creation_date":1635415031,"post_id":69751940,"comment_id":123294119,"body_markdown":"You&#39;ll need to print a newline somewhere in those loops. Also, why use `while` when there&#39;s a pretty serviceable `for`?","body":"You&#39;ll need to print a newline somewhere in those loops. Also, why use <code>while</code> when there&#39;s a pretty serviceable <code>for</code>?"},{"owner":{"account_id":23170083,"reputation":17,"user_id":17269451,"display_name":"vishal jha"},"score":0,"creation_date":1635415130,"post_id":69751940,"comment_id":123294165,"body_markdown":"i was practicing while loops and trying to have some confidence in all types of loops","body":"i was practicing while loops and trying to have some confidence in all types of loops"},{"owner":{"account_id":23170083,"reputation":17,"user_id":17269451,"display_name":"vishal jha"},"score":0,"creation_date":1635415294,"post_id":69751940,"comment_id":123294248,"body_markdown":"where should i put newline.......","body":"where should i put newline......."},{"owner":{"account_id":45213,"reputation":26348,"user_id":133203,"accept_rate":97,"display_name":"Federico klez Culloca"},"score":0,"creation_date":1635415389,"post_id":69751940,"comment_id":123294293,"body_markdown":"After the innermost loop has ended. But that won&#39;t be sufficient. I suggest you use a different variable in the innermost loop and initialize it to `a`. Then, since I basically gave you the solution, you should try and do it backwards (one `*` in the first line, two in the second etc) to check whether you understood.","body":"After the innermost loop has ended. But that won&#39;t be sufficient. I suggest you use a different variable in the innermost loop and initialize it to <code>a</code>. Then, since I basically gave you the solution, you should try and do it backwards (one <code>*</code> in the first line, two in the second etc) to check whether you understood."}],"answers":[{"tags":[],"owner":{"account_id":16429226,"reputation":1519,"user_id":11868502,"display_name":"Saurabh Dhage"},"down_vote_count":1,"up_vote_count":1,"is_accepted":true,"score":0,"last_activity_date":1635415357,"creation_date":1635415357,"answer_id":69752054,"question_id":69751940,"body_markdown":"Try this \r\n    \r\n \r\n\r\n     class HelloWorld {\r\n          public static void main(String[] args) {\r\n              int i=0,j=0,a=5;\r\n              while (a &gt; i) {\r\n              j=i;\r\n              while (a&gt;j) {\r\n                System.out.print(&quot;*&quot;);\r\n                j++;\r\n              }\r\n              System.out.println();\r\n              i++;\r\n              }\r\n            }\r\n        }\r\n\r\noutput:\r\n\r\n    *****\r\n    ****\r\n    ***\r\n    **\r\n    *","title":"please help me with this while loop","body":"<p>Try this</p>\n<pre><code> class HelloWorld {\n      public static void main(String[] args) {\n          int i=0,j=0,a=5;\n          while (a &gt; i) {\n          j=i;\n          while (a&gt;j) {\n            System.out.print(&quot;*&quot;);\n            j++;\n          }\n          System.out.println();\n          i++;\n          }\n        }\n    }\n</code></pre>\n<p>output:</p>\n<pre><code>*****\n****\n***\n**\n*\n</code></pre>\n"},{"tags":[],"owner":{"account_id":18100221,"reputation":2779,"user_id":13158151,"display_name":"Saadi Toumi Fouad"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1635416143,"creation_date":1635415432,"answer_id":69752066,"question_id":69751940,"body_markdown":"You could use only one loop to do so, and using the `.repeat()` method for repeating the stars\r\n\r\n**Edited:** calling a method to do that work is better :)\r\n\r\n```java\r\npublic class MyClass {\r\n    public static void main(String args[]) {\r\n        printStarsTriangle(5);\r\n    }\r\n    static void printStarsTriangle(int n) {\r\n        for(int i = n;i &gt; 0; i--) {\r\n            System.out.print(&quot;*&quot;.repeat(i) + (i != 1 ? &quot;\\n&quot; : &quot;&quot;));\r\n        }\r\n    }\r\n}\r\n```\r\nOutput:\r\n```txt\r\n*****\r\n****\r\n***\r\n**\r\n*\r\n```","title":"please help me with this while loop","body":"<p>You could use only one loop to do so, and using the <code>.repeat()</code> method for repeating the stars</p>\n<p><strong>Edited:</strong> calling a method to do that work is better :)</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class MyClass {\n    public static void main(String args[]) {\n        printStarsTriangle(5);\n    }\n    static void printStarsTriangle(int n) {\n        for(int i = n;i &gt; 0; i--) {\n            System.out.print(&quot;*&quot;.repeat(i) + (i != 1 ? &quot;\\n&quot; : &quot;&quot;));\n        }\n    }\n}\n</code></pre>\n<p>Output:</p>\n<pre><code>*****\n****\n***\n**\n*\n</code></pre>\n"},{"tags":[],"owner":{"account_id":21319058,"reputation":25,"user_id":15692511,"display_name":"FadedCoder"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1635416704,"creation_date":1635415826,"answer_id":69752161,"question_id":69751940,"body_markdown":"Your code will now print this:\r\n```\r\n*\r\n*\r\n*\r\n*\r\n*\r\n```\r\n\r\nBecause you haven&#39;t specified how much times you need to print the stars in each line. \r\n\r\nTo fix this, just change the `System.out.print(&quot;*&quot;);` to `System.out.print(&quot;*&quot; * a);`\r\n\r\nThis means that you need to print the character `*` &quot;a&quot; times in each loop. Since the value of a in decreasing, your problem is solved.\r\n\r\nYou can also try to use for loop instead of while loop. This [website][1] will help you with it\r\n\r\n\r\n  [1]: https://www.codevscolor.com/java-print-triangle-reverse-triangle","title":"please help me with this while loop","body":"<p>Your code will now print this:</p>\n<pre><code>*\n*\n*\n*\n*\n</code></pre>\n<p>Because you haven't specified how much times you need to print the stars in each line.</p>\n<p>To fix this, just change the <code>System.out.print(&quot;*&quot;);</code> to <code>System.out.print(&quot;*&quot; * a);</code></p>\n<p>This means that you need to print the character <code>*</code> &quot;a&quot; times in each loop. Since the value of a in decreasing, your problem is solved.</p>\n<p>You can also try to use for loop instead of while loop. This <a href=\"https://www.codevscolor.com/java-print-triangle-reverse-triangle\" rel=\"nofollow noreferrer\">website</a> will help you with it</p>\n"}],"owner":{"account_id":23170083,"reputation":17,"user_id":17269451,"display_name":"vishal jha"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":143,"favorite_count":0,"down_vote_count":4,"up_vote_count":2,"closed_date":1635416195,"accepted_answer_id":69752054,"answer_count":3,"score":-2,"last_activity_date":1635419117,"creation_date":1635414906,"question_id":69751940,"body_markdown":"please rectify my mistake.\r\n\r\n```java\r\n    package com.company;\r\n    \r\n    public class practice2 {\r\n        public static void main(String[] args) {\r\n    \r\n            int a = 5;\r\n    \r\n            while (a &gt; 0) {\r\n                while (a&gt;0) {\r\n                    System.out.print(&quot;*&quot;);\r\n                    a--;\r\n                }\r\n                a--;\r\n            }\r\n        }\r\n    }\r\n```\r\n\r\nabove code will work one but below.........why do i need to assign it to a new variable to use it in a new loop.\r\n\r\n```java\r\n    package com.company;\r\n    \r\n    public class practice2 {\r\n        public static void main(String[] args) {\r\n    \r\n            int a = 5;\r\n    \r\n            while (a &gt; 0) {\r\n                a=b;\r\n                while (b&gt;0) {\r\n                    System.out.print(&quot;*&quot;);\r\n                    b--;\r\n                }\r\n                a--;\r\n            }\r\n        }\r\n    }\r\n\r\n```\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\nto print:\r\n\r\n    *****\r\n    ****\r\n    ***\r\n    **\r\n    *\r\n\r\nThis is not a homework question i am just not able to grab the concept.","title":"please help me with this while loop","body":"<p>please rectify my mistake.</p>\n<pre class=\"lang-java prettyprint-override\"><code>    package com.company;\n    \n    public class practice2 {\n        public static void main(String[] args) {\n    \n            int a = 5;\n    \n            while (a &gt; 0) {\n                while (a&gt;0) {\n                    System.out.print(&quot;*&quot;);\n                    a--;\n                }\n                a--;\n            }\n        }\n    }\n</code></pre>\n<p>above code will work one but below.........why do i need to assign it to a new variable to use it in a new loop.</p>\n<pre class=\"lang-java prettyprint-override\"><code>    package com.company;\n    \n    public class practice2 {\n        public static void main(String[] args) {\n    \n            int a = 5;\n    \n            while (a &gt; 0) {\n                a=b;\n                while (b&gt;0) {\n                    System.out.print(&quot;*&quot;);\n                    b--;\n                }\n                a--;\n            }\n        }\n    }\n\n</code></pre>\n<p>to print:</p>\n<pre><code>*****\n****\n***\n**\n*\n</code></pre>\n<p>This is not a homework question i am just not able to grab the concept.</p>\n"},{"tags":["java","jmeter"],"answers":[{"tags":[],"owner":{"account_id":3460456,"reputation":162728,"user_id":2897748,"display_name":"Dmitri T"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1635418913,"creation_date":1635418913,"answer_id":69752895,"question_id":69752784,"body_markdown":"&gt;Note that Language is set as java.\r\n\r\nit is not Java, it&#39;s [Beanshell][1] which doesn&#39;t support [diamond operators][2] so the options are in:\r\n\r\n - either remove them, i.e.  `Hashtable mqProps = new Hashtable();`\r\n - or (better) switch to `groovy` as [it&#39;s recommended scripting option since JMeter 3.1][3] mainly because [it provides better performance than any other language][4] \r\n\r\n\r\n  [1]: http://www.beanshell.org/\r\n  [2]: https://www.baeldung.com/java-diamond-operator\r\n  [3]: https://jmeter.apache.org/usermanual/best-practices.html#bsh_scripting\r\n  [4]: https://www.blazemeter.com/blog/groovy-new-black","title":"Creation of Hashtable table in JMeter generating syntax error","body":"<blockquote>\n<p>Note that Language is set as java.</p>\n</blockquote>\n<p>it is not Java, it's <a href=\"http://www.beanshell.org/\" rel=\"nofollow noreferrer\">Beanshell</a> which doesn't support <a href=\"https://www.baeldung.com/java-diamond-operator\" rel=\"nofollow noreferrer\">diamond operators</a> so the options are in:</p>\n<ul>\n<li>either remove them, i.e.  <code>Hashtable mqProps = new Hashtable();</code></li>\n<li>or (better) switch to <code>groovy</code> as <a href=\"https://jmeter.apache.org/usermanual/best-practices.html#bsh_scripting\" rel=\"nofollow noreferrer\">it's recommended scripting option since JMeter 3.1</a> mainly because <a href=\"https://www.blazemeter.com/blog/groovy-new-black\" rel=\"nofollow noreferrer\">it provides better performance than any other language</a></li>\n</ul>\n"}],"owner":{"account_id":23170460,"reputation":13,"user_id":17269790,"display_name":"jordan"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":57,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":69752895,"answer_count":1,"score":1,"last_activity_date":1635418913,"creation_date":1635418460,"question_id":69752784,"body_markdown":"I need soome help to understand why I can&#39;t create a Hashtable object in JMeter.\r\n\r\nThis is my code:\r\n\r\n    import java.util.Hashtable;\r\n    import com.ibm.mq.MQQueueManager;\r\n    import com.ibm.mq.MQMessage;\r\n    import com.ibm.mq.MQQueue;\r\n    import com.ibm.mq.constants.MQConstants;\r\n    \r\n    Hashtable mqProps = new Hashtable&lt;String, Object&gt;();\r\n    mqProps.put(MQConstants.CHANNEL_PROPERTY, &quot;my_channel&quot;);\r\n    mqProps.put(MQConstants.PORT_PROPERTY, my_port);\r\n    mqProps.put(MQConstants.HOST_NAME_PROPERTY, &quot;my_host&quot;);\r\n    mqProps.put(MQConstants.USER_ID_PROPERTY, &quot;my_user_id&quot;);\r\n    mqProps.put(MQConstants.PASSWORD_PROPERTY, &quot;my_password&quot;);\r\n\r\n    MQQueueManager qMgr = new MQQueueManager(&quot;my_QM&quot;, mqProps);\r\n    \r\n    vars.putObject(&quot;QMGR&quot;, qMgr);\r\n\r\nPlease find below error messages I&#39;m facing: \r\n\r\n    ERROR o.a.j.p.j.s.JSR223Sampler: Problem in JSR223 script Create QueueManager, message: javax.script.ScriptException: In file: inline evaluation of: ``import java.util.Hashtable; import com.ibm.mq.MQQueueManager; import com.ibm.mq. . . . &#39;&#39; Encountered &quot;&lt;&quot; at line 7, column 34.\r\n     in inline evaluation of: ``import java.util.Hashtable; import com.ibm.mq.MQQueueManager; import com.ibm.mq. . . . &#39;&#39; at line number 7\r\n    javax.script.ScriptException: In file: inline evaluation of: ``import java.util.Hashtable; import com.ibm.mq.MQQueueManager; import com.ibm.mq. . . . &#39;&#39; Encountered &quot;&lt;&quot; at line 7, column 34.\r\n     in inline evaluation of: ``import java.util.Hashtable; import com.ibm.mq.MQQueueManager; import com.ibm.mq. . . . &#39;&#39; at line number 7\r\n\r\nDo you have any idea why JMeter is not supporting `&lt;` char ?\r\n\r\nNote that Language is set as `java`.\r\n\r\nMany thanks in advance,\r\n","title":"Creation of Hashtable table in JMeter generating syntax error","body":"<p>I need soome help to understand why I can't create a Hashtable object in JMeter.</p>\n<p>This is my code:</p>\n<pre><code>import java.util.Hashtable;\nimport com.ibm.mq.MQQueueManager;\nimport com.ibm.mq.MQMessage;\nimport com.ibm.mq.MQQueue;\nimport com.ibm.mq.constants.MQConstants;\n\nHashtable mqProps = new Hashtable&lt;String, Object&gt;();\nmqProps.put(MQConstants.CHANNEL_PROPERTY, &quot;my_channel&quot;);\nmqProps.put(MQConstants.PORT_PROPERTY, my_port);\nmqProps.put(MQConstants.HOST_NAME_PROPERTY, &quot;my_host&quot;);\nmqProps.put(MQConstants.USER_ID_PROPERTY, &quot;my_user_id&quot;);\nmqProps.put(MQConstants.PASSWORD_PROPERTY, &quot;my_password&quot;);\n\nMQQueueManager qMgr = new MQQueueManager(&quot;my_QM&quot;, mqProps);\n\nvars.putObject(&quot;QMGR&quot;, qMgr);\n</code></pre>\n<p>Please find below error messages I'm facing:</p>\n<pre><code>ERROR o.a.j.p.j.s.JSR223Sampler: Problem in JSR223 script Create QueueManager, message: javax.script.ScriptException: In file: inline evaluation of: ``import java.util.Hashtable; import com.ibm.mq.MQQueueManager; import com.ibm.mq. . . . '' Encountered &quot;&lt;&quot; at line 7, column 34.\n in inline evaluation of: ``import java.util.Hashtable; import com.ibm.mq.MQQueueManager; import com.ibm.mq. . . . '' at line number 7\njavax.script.ScriptException: In file: inline evaluation of: ``import java.util.Hashtable; import com.ibm.mq.MQQueueManager; import com.ibm.mq. . . . '' Encountered &quot;&lt;&quot; at line 7, column 34.\n in inline evaluation of: ``import java.util.Hashtable; import com.ibm.mq.MQQueueManager; import com.ibm.mq. . . . '' at line number 7\n</code></pre>\n<p>Do you have any idea why JMeter is not supporting <code>&lt;</code> char ?</p>\n<p>Note that Language is set as <code>java</code>.</p>\n<p>Many thanks in advance,</p>\n"},{"tags":["java","eclipse","jar","executable-jar"],"answers":[{"tags":[],"owner":{"account_id":698222,"reputation":50202,"user_id":573032,"accept_rate":77,"display_name":"Roman C"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1489347178,"creation_date":1489346989,"answer_id":42752065,"question_id":42752042,"body_markdown":"`bin.main` is not a package name. You can&#39;t add this to `manifest.mf`.\r\n\r\nYou should add the package name only if you have the main class in the package. If your package is default then put only the main class.\r\n\r\n    Main-Class: MainClass ","title":"Cannot create executable jar from Java Swing app successfully","body":"<p><code>bin.main</code> is not a package name. You can't add this to <code>manifest.mf</code>.</p>\n\n<p>You should add the package name only if you have the main class in the package. If your package is default then put only the main class.</p>\n\n<pre><code>Main-Class: MainClass \n</code></pre>\n"},{"tags":[],"owner":{"account_id":4421048,"reputation":1360,"user_id":4064372,"display_name":"Edd"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1489347333,"creation_date":1489347333,"answer_id":42752121,"question_id":42752042,"body_markdown":"The Manifest Main-Class attribute needs to receive the package path to your Main class. It doesn&#39;t matter what the structure of the project looks like, what matters is the fully qualified package name that you have inside the src/ folder. So in this case, main.MainClass is what you should write there.\r\n\r\nAlso, if you receive other errors when trying to read the connectionprops.properties in your program, try to open the file using\r\n    \r\n\r\n    someObject.getClass().getResourceAsStream(&quot;connectionprops.properties&quot;)","title":"Cannot create executable jar from Java Swing app successfully","body":"<p>The Manifest Main-Class attribute needs to receive the package path to your Main class. It doesn't matter what the structure of the project looks like, what matters is the fully qualified package name that you have inside the src/ folder. So in this case, main.MainClass is what you should write there.</p>\n\n<p>Also, if you receive other errors when trying to read the connectionprops.properties in your program, try to open the file using</p>\n\n<pre><code>someObject.getClass().getResourceAsStream(\"connectionprops.properties\")\n</code></pre>\n"}],"owner":{"account_id":7427202,"reputation":4981,"user_id":5649326,"accept_rate":90,"display_name":"Marievi"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":86,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":42752121,"answer_count":2,"score":0,"last_activity_date":1635418680,"creation_date":1489346852,"question_id":42752042,"body_markdown":"I have made a Java Swing application and now I want to export it as an executable `jar` file. I have created the app in `Eclipse`, and it has the following structure :\r\n\r\n[![enter image description here][1]][1]\r\n\r\nwhere folder `mysqlconnector` contains also a `jar` file. So first I tried following the instructions in [this link][2] and created `seo.jar`, but when I try to execute it from the terminal by `java -jar seo.jar` I get an error :\r\n\r\n&gt;Error: Could not find file connectionprops.properties\r\n\r\nAs the screenshot shows, I tried putting `connectionprops.properties` in `main` package, but the same problem remains.\r\n\r\nThen I tried making a `manifest` file named `manifest.mf` with contents :\r\n\r\n    Main-Class: bin.main.MainClass   //also tried Main-Class: MainClass\r\n\r\nas the structure of my project is :\r\n\r\n    seo --&gt; bin --&gt; main --&gt; MainClass.class\r\n\r\nI placed the `manifest.mf` in folder `seo` and I gave the following command in the terminal :\r\n\r\n    jar -cvfm seo.jar manifest.mf *\r\n\r\nbut again when executing it from the terminal by `java -jar seo.jar` I get an error :\r\n\r\n&gt;Error: Could not find or load main class bin.main.MainClass\r\n\r\nWhat am I doing wrong? Should I change something in my project structure? Is there a problem that I have other `jar` files inside my project? How can I create the executable `jar` and execute it successfully?\r\n\r\n  [1]: https://i.stack.imgur.com/V14MM.png\r\n  [2]: http://www.wikihow.com/Create-an-Executable-File-from-Eclipse","title":"Cannot create executable jar from Java Swing app successfully","body":"<p>I have made a Java Swing application and now I want to export it as an executable <code>jar</code> file. I have created the app in <code>Eclipse</code>, and it has the following structure :</p>\n\n<p><a href=\"https://i.stack.imgur.com/V14MM.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/V14MM.png\" alt=\"enter image description here\"></a></p>\n\n<p>where folder <code>mysqlconnector</code> contains also a <code>jar</code> file. So first I tried following the instructions in <a href=\"http://www.wikihow.com/Create-an-Executable-File-from-Eclipse\" rel=\"nofollow noreferrer\">this link</a> and created <code>seo.jar</code>, but when I try to execute it from the terminal by <code>java -jar seo.jar</code> I get an error :</p>\n\n<blockquote>\n  <p>Error: Could not find file connectionprops.properties</p>\n</blockquote>\n\n<p>As the screenshot shows, I tried putting <code>connectionprops.properties</code> in <code>main</code> package, but the same problem remains.</p>\n\n<p>Then I tried making a <code>manifest</code> file named <code>manifest.mf</code> with contents :</p>\n\n<pre><code>Main-Class: bin.main.MainClass   //also tried Main-Class: MainClass\n</code></pre>\n\n<p>as the structure of my project is :</p>\n\n<pre><code>seo --&gt; bin --&gt; main --&gt; MainClass.class\n</code></pre>\n\n<p>I placed the <code>manifest.mf</code> in folder <code>seo</code> and I gave the following command in the terminal :</p>\n\n<pre><code>jar -cvfm seo.jar manifest.mf *\n</code></pre>\n\n<p>but again when executing it from the terminal by <code>java -jar seo.jar</code> I get an error :</p>\n\n<blockquote>\n  <p>Error: Could not find or load main class bin.main.MainClass</p>\n</blockquote>\n\n<p>What am I doing wrong? Should I change something in my project structure? Is there a problem that I have other <code>jar</code> files inside my project? How can I create the executable <code>jar</code> and execute it successfully?</p>\n"},{"tags":["java","command-prompt","javacompiler"],"comments":[{"owner":{"account_id":17835,"reputation":303895,"user_id":40342,"accept_rate":62,"display_name":"Joachim Sauer"},"score":1,"creation_date":1635415870,"post_id":69752141,"comment_id":123294498,"body_markdown":"You *could* set the `CLASSPATH` variable, but I suggest you specify the `-cp` parameter to your `javac` invocation instead. If they are all in the same directory it can be as simple as `javac -cp D:\\Path\\To\\The\\Directory\\* TheFilesYouWantToCompile.java`.","body":"You <i>could</i> set the <code>CLASSPATH</code> variable, but I suggest you specify the <code>-cp</code> parameter to your <code>javac</code> invocation instead. If they are all in the same directory it can be as simple as <code>javac -cp D:\\Path\\To\\The\\Directory\\* TheFilesYouWantToCompile.java</code>."},{"owner":{"account_id":23170176,"reputation":11,"user_id":17269538,"display_name":"nitesh"},"score":0,"creation_date":1635435330,"post_id":69752141,"comment_id":123303377,"body_markdown":"D:\\JavaRates_eclipse&gt;javac -cp D:\\JavaRates_eclipse\\* fileaname.java\njavac: file not found: OOConnnection.java\nUsage: javac &lt;options&gt; &lt;source files&gt;\nuse -help for a list of possible options, I get above error saying file not found","body":"D:\\JavaRates_eclipse&gt;javac -cp D:\\JavaRates_eclipse* fileaname.java javac: file not found: OOConnnection.java Usage: javac &lt;options&gt; &lt;source files&gt; use -help for a list of possible options, I get above error saying file not found"}],"answers":[{"tags":[],"owner":{"account_id":3846000,"reputation":570,"user_id":3187539,"accept_rate":80,"display_name":"clockw0rk"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1635418516,"creation_date":1635418516,"answer_id":69752792,"question_id":69752141,"body_markdown":"You should only need to javac the input files and pass the -cp flag\r\n\r\nCommand should look something like\r\n\r\n`C:\\Path\\To\\JDK\\javac.exe -cp &quot;D:\\pathtojar1.jar; D: [... ]&quot; *.java`\r\n\r\nEDIT: Use CP Flag, didn&#39;t see you had external .jar dependencies","title":"Compiling Java file with Jar dependencies using command prompt in windows","body":"<p>You should only need to javac the input files and pass the -cp flag</p>\n<p>Command should look something like</p>\n<p><code>C:\\Path\\To\\JDK\\javac.exe -cp &quot;D:\\pathtojar1.jar; D: [... ]&quot; *.java</code></p>\n<p>EDIT: Use CP Flag, didn't see you had external .jar dependencies</p>\n"}],"owner":{"account_id":23170176,"reputation":11,"user_id":17269538,"display_name":"nitesh"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":543,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1635418516,"creation_date":1635415700,"question_id":69752141,"body_markdown":"I have a java file with jar dependencies an I would like to compile them using command in command prompt from windows PC.\r\nI have placed all 3 jar files and java file in same folder of D drive.\r\nDo i need to set class path in environmental variables?\r\nmy jar file names are juh-4.1.2.jar, ridl-4.1.3.jar and unoil-4.1.2.jar?\r\n\r\nAny help will be greatly appreciated. Thanks in advance ","title":"Compiling Java file with Jar dependencies using command prompt in windows","body":"<p>I have a java file with jar dependencies an I would like to compile them using command in command prompt from windows PC.\nI have placed all 3 jar files and java file in same folder of D drive.\nDo i need to set class path in environmental variables?\nmy jar file names are juh-4.1.2.jar, ridl-4.1.3.jar and unoil-4.1.2.jar?</p>\n<p>Any help will be greatly appreciated. Thanks in advance</p>\n"},{"tags":["java","algorithm","data-structures"],"comments":[{"owner":{"account_id":2460360,"reputation":64577,"user_id":2144669,"display_name":"David Eisenstat"},"score":0,"creation_date":1635432369,"post_id":69752786,"comment_id":123301941,"body_markdown":"Not super familiar with `PriorityQueue`, but I would imagine it doesn&#39;t appreciate you changing the priorities out from under it. A quick fix would be to have a separate priority queue element for each discovered arc, prioritized by the proposed distance to the head of the arc.","body":"Not super familiar with <code>PriorityQueue</code>, but I would imagine it doesn&#39;t appreciate you changing the priorities out from under it. A quick fix would be to have a separate priority queue element for each discovered arc, prioritized by the proposed distance to the head of the arc."}],"owner":{"account_id":4902890,"reputation":2518,"user_id":3950533,"accept_rate":98,"display_name":"Henry Zhu"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":75,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":0,"score":2,"last_activity_date":1635418481,"creation_date":1635418481,"question_id":69752786,"body_markdown":"I am using Dijkstra&#39;s algorithm to solve the Leetcode Problem **Network Delay Time** (https://leetcode.com/problems/network-delay-time), where I try to find the minimum cost to propagate a signal from a starting vertex to every other vertex in a weighted graph. My code below passes 31/52 of the test cases, but fails the following test case.\r\n\r\nI am very confused as to why my code fails, as I believe I am implementing all components of Dijkstra&#39;s algorithm correctly. If someone could point me to a possible error point, that would be greatly appreciated:\r\n\r\n    [[15,8,1],[7,10,41],[7,9,34],[9,4,31],[12,13,50],[14,3,52],[4,11,99],[4,7,86],[10,13,57],[9,6,10],[1,7,51],[7,15,38],[1,9,11],[12,7,94],[9,13,34],[11,7,79],[7,6,28],[5,3,34],[2,6,97],[14,1,97],[6,10,90],[12,10,37],[13,3,73],[11,14,7],[15,1,39],[6,5,90],[13,6,43],[6,9,32],[4,6,45],[11,10,2],[2,13,4],[14,15,29],[1,14,88],[14,6,19],[6,2,29],[3,14,72],[1,15,4],[11,5,2],[6,7,56],[8,7,88],[13,14,70],[14,12,58],[14,2,86],[11,3,57],[5,2,56],[3,10,26],[2,11,21],[14,5,54],[5,12,40],[14,4,81],[15,2,99],[5,7,57],[13,12,5],[4,9,60],[12,15,48],[6,14,1],[9,7,44],[13,7,69],[5,13,42],[4,1,7],[11,9,76],[8,1,76],[5,14,29],[2,3,69],[7,3,23],[12,14,28],[11,4,85],[10,1,10],[15,12,36],[1,11,69],[15,10,96],[11,13,69],[7,12,49],[1,2,95],[6,4,46],[8,12,94],[12,4,93],[13,5,31],[12,2,60],[6,1,87],[4,14,20],[5,11,89],[4,15,88],[4,10,21],[1,6,5],[10,8,26],[8,2,51],[3,15,23],[7,2,12],[11,1,47],[2,1,75],[3,8,63],[8,10,19],[6,8,18],[4,2,55],[14,11,80],[10,3,73],[3,5,22],[12,3,61],[1,13,33],[9,3,98],[9,12,69],[15,9,6],[7,13,76],[11,12,22],[11,15,51],[13,15,46],[5,10,58],[1,10,26],[13,4,85],[7,14,58],[5,8,46],[11,6,32],[10,9,41],[9,14,35],[14,13,60],[3,9,97],[2,5,39],[7,11,19],[1,12,27],[7,5,13],[8,4,34],[9,15,25],[5,1,93],[15,13,97],[14,9,35],[8,6,67],[9,5,39],[13,11,35],[7,4,21],[12,9,64],[14,8,8],[10,12,94],[8,9,76],[8,5,71],[2,9,64],[10,14,59],[1,4,74],[7,1,69],[15,5,55],[6,15,80],[13,8,84],[8,13,63],[8,3,91],[10,4,87],[1,5,39],[8,11,0],[1,3,79],[4,5,82],[4,12,87],[3,11,29],[7,8,92],[10,7,77],[6,12,42],[13,2,40],[9,10,13],[4,13,65],[2,4,34],[3,13,44],[2,14,69],[3,4,42],[5,15,98],[14,7,6],[15,3,94],[10,2,37],[15,11,7],[9,2,15],[13,9,66],[4,8,83],[8,15,23],[13,1,50],[6,13,57],[2,10,37],[10,6,38],[2,7,45],[9,8,8],[3,12,28],[3,2,83],[2,12,75],[1,8,91],[4,3,70],[12,6,48],[3,1,13],[5,6,42],[6,11,96],[3,6,22],[15,6,34],[11,8,43],[15,7,40],[9,11,57],[11,2,11],[2,8,22],[9,1,73],[2,15,40],[12,11,10],[15,4,78],[12,8,75],[10,15,37],[13,10,44],[8,14,33],[3,7,82],[5,4,46],[12,5,79],[15,14,43],[10,5,65],[5,9,34],[12,1,54],[6,3,16],[14,10,83],[10,11,67]]\r\n    15\r\n    8\r\n\r\nBelow is my Java code:\r\n\r\n    class Solution {\r\n        // Dijkstra&#39;s Algorithm: \r\n        // Time: O(|V| + |E| log(|V|)), since I used a min-heap.\r\n        // Space: O(|V| + |E|)\r\n        public int networkDelayTime(int[][] times, int n, int k) {\r\n            // Represent the graph as an adjacency list.\r\n            // Source Node -&gt; set of destination Pairs (Target Node, Travel Time).\r\n            HashMap&lt;Integer, HashSet&lt;Pair&lt;Integer, Integer&gt;&gt;&gt; adjacencyList = new HashMap&lt;Integer, HashSet&lt;Pair&lt;Integer, Integer&gt;&gt;&gt;();\r\n            for (int[] time : times) {\r\n                int source = time[0];\r\n                int target = time[1];\r\n                int travelTime = time[2];\r\n                \r\n                // Retrieve the existing set of destination.\r\n                HashSet&lt;Pair&lt;Integer, Integer&gt;&gt; destinationSet = adjacencyList.getOrDefault(source, new HashSet&lt;Pair&lt;Integer, Integer&gt;&gt;());\r\n                destinationSet.add(new Pair&lt;Integer, Integer&gt;(target, travelTime));\r\n                \r\n                // Update the set of destinations that can be reached from the current source.\r\n                adjacencyList.put(source, destinationSet);\r\n            }\r\n            \r\n            // Map the distance from source to vertex v.\r\n            HashMap&lt;Integer, Integer&gt; distFromSource = new HashMap&lt;Integer, Integer&gt;();\r\n            \r\n            // Backtracking purposes: map each vertex to the previous vertex along the shortest path.\r\n            HashMap&lt;Integer, Integer&gt; prevVertex = new HashMap&lt;Integer, Integer&gt;();\r\n            \r\n            // Min-heap which stores the vertexes, based on their distance\r\n            // from the source.\r\n            PriorityQueue&lt;Integer&gt; minHeap = new PriorityQueue&lt;Integer&gt;((v1, v2) -&gt; distFromSource.get(v1) - distFromSource.get(v2));\r\n            \r\n            // Edge Case: distance from source to source is 0.\r\n            distFromSource.put(k, 0);\r\n            \r\n            // Initially, the distance from the source to each vertex is infinite (except for source itself).\r\n            // We also haven&#39;t figured out any of the previous vertexes.\r\n            for (int i = 1; i &lt;= n; i++) {\r\n                if (i != k) {\r\n                    distFromSource.put(i, Integer.MAX_VALUE);\r\n                    prevVertex.put(i, -1);\r\n                }\r\n                minHeap.add(i);\r\n            }\r\n            \r\n            // Store the visited vertices so we don&#39;t visit them again.\r\n            HashSet&lt;Integer&gt; visited = new HashSet&lt;Integer&gt;();\r\n            \r\n            // While are min heap still isn&#39;t empty.\r\n            while (!minHeap.isEmpty()) {\r\n                // Retrieve the closest vertex to the source.\r\n                Integer closestVertex = minHeap.poll();\r\n                \r\n                // Check that the closest vertex hasn&#39;t already been visited.\r\n                if (!visited.contains(closestVertex)) {\r\n                    // Mark the vertex as visited.\r\n                    visited.add(closestVertex);\r\n                    \r\n                    // Retrieve the distance to the closest vertex.\r\n                    int distToClosestVertex = distFromSource.get(closestVertex);\r\n    \r\n                    // Go through the edges to the closest vertex&#39;s neighbors.\r\n                    for (Pair&lt;Integer, Integer&gt; edge : adjacencyList.getOrDefault(closestVertex, new HashSet&lt;Pair&lt;Integer, Integer&gt;&gt;())) {\r\n                        int destination = edge.getKey();\r\n                        int travelTime = edge.getValue();\r\n                        int alternativeDist = distToClosestVertex + travelTime;\r\n    \r\n                        // If we have found a new shortest path to the destination.\r\n                        if (alternativeDist &lt; distFromSource.get(destination)) {\r\n                            distFromSource.put(destination, alternativeDist);\r\n                            prevVertex.put(destination, closestVertex);\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n            \r\n            // Find the maximum distance to any one of the nodes.\r\n            int maxDistance = Integer.MIN_VALUE;\r\n            for (Integer dist : distFromSource.values()) {\r\n                // We are unable to send the singal to every vertex.\r\n                if (dist == Integer.MAX_VALUE) {\r\n                    return -1;\r\n                }\r\n                \r\n                maxDistance = Math.max(maxDistance, dist);\r\n            }\r\n            \r\n            return maxDistance;\r\n        }\r\n    }","title":"Having difficulty figuring out why my implementation of the Dijkstra&#39;s algorithm is not working?","body":"<p>I am using Dijkstra's algorithm to solve the Leetcode Problem <strong>Network Delay Time</strong> (<a href=\"https://leetcode.com/problems/network-delay-time\" rel=\"nofollow noreferrer\">https://leetcode.com/problems/network-delay-time</a>), where I try to find the minimum cost to propagate a signal from a starting vertex to every other vertex in a weighted graph. My code below passes 31/52 of the test cases, but fails the following test case.</p>\n<p>I am very confused as to why my code fails, as I believe I am implementing all components of Dijkstra's algorithm correctly. If someone could point me to a possible error point, that would be greatly appreciated:</p>\n<pre><code>[[15,8,1],[7,10,41],[7,9,34],[9,4,31],[12,13,50],[14,3,52],[4,11,99],[4,7,86],[10,13,57],[9,6,10],[1,7,51],[7,15,38],[1,9,11],[12,7,94],[9,13,34],[11,7,79],[7,6,28],[5,3,34],[2,6,97],[14,1,97],[6,10,90],[12,10,37],[13,3,73],[11,14,7],[15,1,39],[6,5,90],[13,6,43],[6,9,32],[4,6,45],[11,10,2],[2,13,4],[14,15,29],[1,14,88],[14,6,19],[6,2,29],[3,14,72],[1,15,4],[11,5,2],[6,7,56],[8,7,88],[13,14,70],[14,12,58],[14,2,86],[11,3,57],[5,2,56],[3,10,26],[2,11,21],[14,5,54],[5,12,40],[14,4,81],[15,2,99],[5,7,57],[13,12,5],[4,9,60],[12,15,48],[6,14,1],[9,7,44],[13,7,69],[5,13,42],[4,1,7],[11,9,76],[8,1,76],[5,14,29],[2,3,69],[7,3,23],[12,14,28],[11,4,85],[10,1,10],[15,12,36],[1,11,69],[15,10,96],[11,13,69],[7,12,49],[1,2,95],[6,4,46],[8,12,94],[12,4,93],[13,5,31],[12,2,60],[6,1,87],[4,14,20],[5,11,89],[4,15,88],[4,10,21],[1,6,5],[10,8,26],[8,2,51],[3,15,23],[7,2,12],[11,1,47],[2,1,75],[3,8,63],[8,10,19],[6,8,18],[4,2,55],[14,11,80],[10,3,73],[3,5,22],[12,3,61],[1,13,33],[9,3,98],[9,12,69],[15,9,6],[7,13,76],[11,12,22],[11,15,51],[13,15,46],[5,10,58],[1,10,26],[13,4,85],[7,14,58],[5,8,46],[11,6,32],[10,9,41],[9,14,35],[14,13,60],[3,9,97],[2,5,39],[7,11,19],[1,12,27],[7,5,13],[8,4,34],[9,15,25],[5,1,93],[15,13,97],[14,9,35],[8,6,67],[9,5,39],[13,11,35],[7,4,21],[12,9,64],[14,8,8],[10,12,94],[8,9,76],[8,5,71],[2,9,64],[10,14,59],[1,4,74],[7,1,69],[15,5,55],[6,15,80],[13,8,84],[8,13,63],[8,3,91],[10,4,87],[1,5,39],[8,11,0],[1,3,79],[4,5,82],[4,12,87],[3,11,29],[7,8,92],[10,7,77],[6,12,42],[13,2,40],[9,10,13],[4,13,65],[2,4,34],[3,13,44],[2,14,69],[3,4,42],[5,15,98],[14,7,6],[15,3,94],[10,2,37],[15,11,7],[9,2,15],[13,9,66],[4,8,83],[8,15,23],[13,1,50],[6,13,57],[2,10,37],[10,6,38],[2,7,45],[9,8,8],[3,12,28],[3,2,83],[2,12,75],[1,8,91],[4,3,70],[12,6,48],[3,1,13],[5,6,42],[6,11,96],[3,6,22],[15,6,34],[11,8,43],[15,7,40],[9,11,57],[11,2,11],[2,8,22],[9,1,73],[2,15,40],[12,11,10],[15,4,78],[12,8,75],[10,15,37],[13,10,44],[8,14,33],[3,7,82],[5,4,46],[12,5,79],[15,14,43],[10,5,65],[5,9,34],[12,1,54],[6,3,16],[14,10,83],[10,11,67]]\n15\n8\n</code></pre>\n<p>Below is my Java code:</p>\n<pre><code>class Solution {\n    // Dijkstra's Algorithm: \n    // Time: O(|V| + |E| log(|V|)), since I used a min-heap.\n    // Space: O(|V| + |E|)\n    public int networkDelayTime(int[][] times, int n, int k) {\n        // Represent the graph as an adjacency list.\n        // Source Node -&gt; set of destination Pairs (Target Node, Travel Time).\n        HashMap&lt;Integer, HashSet&lt;Pair&lt;Integer, Integer&gt;&gt;&gt; adjacencyList = new HashMap&lt;Integer, HashSet&lt;Pair&lt;Integer, Integer&gt;&gt;&gt;();\n        for (int[] time : times) {\n            int source = time[0];\n            int target = time[1];\n            int travelTime = time[2];\n            \n            // Retrieve the existing set of destination.\n            HashSet&lt;Pair&lt;Integer, Integer&gt;&gt; destinationSet = adjacencyList.getOrDefault(source, new HashSet&lt;Pair&lt;Integer, Integer&gt;&gt;());\n            destinationSet.add(new Pair&lt;Integer, Integer&gt;(target, travelTime));\n            \n            // Update the set of destinations that can be reached from the current source.\n            adjacencyList.put(source, destinationSet);\n        }\n        \n        // Map the distance from source to vertex v.\n        HashMap&lt;Integer, Integer&gt; distFromSource = new HashMap&lt;Integer, Integer&gt;();\n        \n        // Backtracking purposes: map each vertex to the previous vertex along the shortest path.\n        HashMap&lt;Integer, Integer&gt; prevVertex = new HashMap&lt;Integer, Integer&gt;();\n        \n        // Min-heap which stores the vertexes, based on their distance\n        // from the source.\n        PriorityQueue&lt;Integer&gt; minHeap = new PriorityQueue&lt;Integer&gt;((v1, v2) -&gt; distFromSource.get(v1) - distFromSource.get(v2));\n        \n        // Edge Case: distance from source to source is 0.\n        distFromSource.put(k, 0);\n        \n        // Initially, the distance from the source to each vertex is infinite (except for source itself).\n        // We also haven't figured out any of the previous vertexes.\n        for (int i = 1; i &lt;= n; i++) {\n            if (i != k) {\n                distFromSource.put(i, Integer.MAX_VALUE);\n                prevVertex.put(i, -1);\n            }\n            minHeap.add(i);\n        }\n        \n        // Store the visited vertices so we don't visit them again.\n        HashSet&lt;Integer&gt; visited = new HashSet&lt;Integer&gt;();\n        \n        // While are min heap still isn't empty.\n        while (!minHeap.isEmpty()) {\n            // Retrieve the closest vertex to the source.\n            Integer closestVertex = minHeap.poll();\n            \n            // Check that the closest vertex hasn't already been visited.\n            if (!visited.contains(closestVertex)) {\n                // Mark the vertex as visited.\n                visited.add(closestVertex);\n                \n                // Retrieve the distance to the closest vertex.\n                int distToClosestVertex = distFromSource.get(closestVertex);\n\n                // Go through the edges to the closest vertex's neighbors.\n                for (Pair&lt;Integer, Integer&gt; edge : adjacencyList.getOrDefault(closestVertex, new HashSet&lt;Pair&lt;Integer, Integer&gt;&gt;())) {\n                    int destination = edge.getKey();\n                    int travelTime = edge.getValue();\n                    int alternativeDist = distToClosestVertex + travelTime;\n\n                    // If we have found a new shortest path to the destination.\n                    if (alternativeDist &lt; distFromSource.get(destination)) {\n                        distFromSource.put(destination, alternativeDist);\n                        prevVertex.put(destination, closestVertex);\n                    }\n                }\n            }\n        }\n        \n        // Find the maximum distance to any one of the nodes.\n        int maxDistance = Integer.MIN_VALUE;\n        for (Integer dist : distFromSource.values()) {\n            // We are unable to send the singal to every vertex.\n            if (dist == Integer.MAX_VALUE) {\n                return -1;\n            }\n            \n            maxDistance = Math.max(maxDistance, dist);\n        }\n        \n        return maxDistance;\n    }\n}\n</code></pre>\n"},{"tags":["java","image","networking","graphics","render"],"comments":[{"owner":{"account_id":698222,"reputation":50202,"user_id":573032,"accept_rate":77,"display_name":"Roman C"},"score":1,"creation_date":1489348339,"post_id":42752299,"comment_id":72620817,"body_markdown":"How do you use this API? What is Java version?","body":"How do you use this API? What is Java version?"},{"owner":{"account_id":1333564,"reputation":1235,"user_id":1276856,"accept_rate":78,"display_name":"Shaun Wild"},"score":0,"creation_date":1489349577,"post_id":42752299,"comment_id":72621314,"body_markdown":"@RomanC I updated the question.","body":"@RomanC I updated the question."},{"owner":{"account_id":2053598,"reputation":41316,"user_id":1831987,"display_name":"VGR"},"score":1,"creation_date":1489351663,"post_id":42752299,"comment_id":72622126,"body_markdown":"I am not an expert in the PNG format, but from what I know (and [the Wikipedia page](https://en.wikipedia.org/wiki/Portable_Network_Graphics) seems to confirm this), there is no way for an image reader to know when the final “chunk” of a PNG image is encountered.  You will need to tell the client side how much to read;  one way is to write your image to a byte array, then write an int to the socket indicating the byte count, then write the bytes themselves to the socket.","body":"I am not an expert in the PNG format, but from what I know (and <a href=\"https://en.wikipedia.org/wiki/Portable_Network_Graphics\" rel=\"nofollow noreferrer\">the Wikipedia page</a> seems to confirm this), there is no way for an image reader to know when the final “chunk” of a PNG image is encountered.  You will need to tell the client side how much to read;  one way is to write your image to a byte array, then write an int to the socket indicating the byte count, then write the bytes themselves to the socket."}],"answers":[{"tags":[],"owner":{"account_id":698222,"reputation":50202,"user_id":573032,"accept_rate":77,"display_name":"Roman C"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1635418175,"creation_date":1489351750,"answer_id":42752967,"question_id":42752299,"body_markdown":"Try this code:\r\n\r\n    public byte[] getCustomImageInBytes(BufferedImage originalImage) {\r\n        byte[] imageInByte = null;\r\n\t\ttry {\r\n\t\t\t// convert BufferedImage to byte array\r\n\t\t\tByteArrayOutputStream baos = new ByteArrayOutputStream();\r\n\t\t\tImageIO.write(originalImage, &quot;png&quot;, baos);\r\n\t\t\tbaos.flush();\r\n\t\t\timageInByte = baos.toByteArray();\r\n\t\t\tbaos.close();\r\n\t\t} catch (IOException e) {\r\n\t\t\t// TODO Auto-generated catch block\r\n\t\t\te.printStackTrace();\r\n\t\t}\r\n\r\n\t\treturn imageInByte;\r\n\t}\r\n\r\n    socket.getOutputStream().write(getCustomImageInBytes(difference));\r\n    socket.getOutputStream().flush();","title":"Java sending image through network with ImageIO","body":"<p>Try this code:</p>\n<pre><code>public byte[] getCustomImageInBytes(BufferedImage originalImage) {\n    byte[] imageInByte = null;\n    try {\n        // convert BufferedImage to byte array\n        ByteArrayOutputStream baos = new ByteArrayOutputStream();\n        ImageIO.write(originalImage, &quot;png&quot;, baos);\n        baos.flush();\n        imageInByte = baos.toByteArray();\n        baos.close();\n    } catch (IOException e) {\n        // TODO Auto-generated catch block\n        e.printStackTrace();\n    }\n\n    return imageInByte;\n}\n\nsocket.getOutputStream().write(getCustomImageInBytes(difference));\nsocket.getOutputStream().flush();\n</code></pre>\n"}],"owner":{"account_id":1333564,"reputation":1235,"user_id":1276856,"accept_rate":78,"display_name":"Shaun Wild"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":443,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1635418294,"creation_date":1489348214,"question_id":42752299,"body_markdown":"I have a network program that sends a stream of `BufferedImage`s through a network using `ImageIO.write(..)`, this is working as intended apart from sometimes the Image received on the other end will just be a series of small black and white squares for a long time, then it will eventually switch back to sending the actual images.\r\n\r\nI can&#39;t find any help with this anywhere.\r\n\r\nI&#39;m using Java version 1.8.0_65, I send the image like so:\r\n```\r\nBufferedImage capture = robot.createScreenCapture(new Rectangle(Toolkit.getDefaultToolkit().getScreenSize()));\r\nBufferedImage newImage = new BufferedImage(capture.getWidth(), capture.getHeight(), BufferedImage.TYPE_4BYTE_ABGR_PRE);\r\nnewImage.createGraphics().drawImage(capture, 0, 0, newImage.getWidth(), newImage.getHeight(), null);\r\ncapture = newImage;\r\nBufferedImage difference = null;\r\nif (lastImage != null) {\r\n    difference = getDifferenceImage(capture, lastImage);\r\n} else {\r\n    difference = capture;\r\n}\r\nlong generated = System.currentTimeMillis() - start;\r\nImageIO.write(difference, &quot;png&quot;, socket.getOutputStream());\r\nsocket.getOutputStream().flush();\r\n```","title":"Java sending image through network with ImageIO","body":"<p>I have a network program that sends a stream of <code>BufferedImage</code>s through a network using <code>ImageIO.write(..)</code>, this is working as intended apart from sometimes the Image received on the other end will just be a series of small black and white squares for a long time, then it will eventually switch back to sending the actual images.</p>\n<p>I can't find any help with this anywhere.</p>\n<p>I'm using Java version 1.8.0_65, I send the image like so:</p>\n<pre><code>BufferedImage capture = robot.createScreenCapture(new Rectangle(Toolkit.getDefaultToolkit().getScreenSize()));\nBufferedImage newImage = new BufferedImage(capture.getWidth(), capture.getHeight(), BufferedImage.TYPE_4BYTE_ABGR_PRE);\nnewImage.createGraphics().drawImage(capture, 0, 0, newImage.getWidth(), newImage.getHeight(), null);\ncapture = newImage;\nBufferedImage difference = null;\nif (lastImage != null) {\n    difference = getDifferenceImage(capture, lastImage);\n} else {\n    difference = capture;\n}\nlong generated = System.currentTimeMillis() - start;\nImageIO.write(difference, &quot;png&quot;, socket.getOutputStream());\nsocket.getOutputStream().flush();\n</code></pre>\n"},{"tags":["java","spring","spring-data-rest"],"comments":[{"owner":{"account_id":391375,"reputation":1507,"user_id":751992,"display_name":"Sampisa"},"score":0,"creation_date":1478012721,"post_id":40358423,"comment_id":67978563,"body_markdown":"It is unclear how you produce your links. Anyway, keep in mind that proxypass(reverse) works on HTTP protocol headers, so it doesn&#39;t have anything to do with the protocol you use in your webapp. So probably there is nothing to setup, other than check Apache proxypass configuration, or check your webapp or - hugh - your Tomcat config.","body":"It is unclear how you produce your links. Anyway, keep in mind that proxypass(reverse) works on HTTP protocol headers, so it doesn&#39;t have anything to do with the protocol you use in your webapp. So probably there is nothing to setup, other than check Apache proxypass configuration, or check your webapp or - hugh - your Tomcat config."}],"answers":[{"tags":[],"owner":{"account_id":6753077,"reputation":1639,"user_id":5202500,"accept_rate":83,"display_name":"eparvan"},"down_vote_count":0,"up_vote_count":6,"is_accepted":true,"score":6,"last_activity_date":1478012268,"creation_date":1478012268,"answer_id":40362675,"question_id":40358423,"body_markdown":"After digging in the source code, I found out that all link creations originates from this [point](https://github.com/spring-projects/spring-framework/blob/master/spring-webmvc/src/main/java/org/springframework/web/servlet/support/ServletUriComponentsBuilder.java#L188) and it seems to be impossible to configure forced use of https scheme in a &#39;standard&#39; way. \r\n\r\nSo I created a filter that replaces `http://` to `https://` in request URL and the problem has gone. Here is the snippet:\r\n\r\n        @Override\r\n        public void doFilter(ServletRequest servletRequest, ServletResponse servletResponse, FilterChain filterChain) throws IOException, ServletException {\r\n    \r\n            HttpServletRequest request = (HttpServletRequest) servletRequest;\r\n            final HttpServletRequestWrapper wrapped = new HttpServletRequestWrapper(request) {\r\n                @Override\r\n                public StringBuffer getRequestURL() {\r\n                    final StringBuffer originalUrl = ((HttpServletRequest) getRequest()).getRequestURL();\r\n                    final String updatedUrl = originalUrl.toString().replace(&quot;http://&quot;, &quot;https://&quot;);\r\n                    return new StringBuffer(updatedUrl);\r\n                }\r\n            };\r\n            filterChain.doFilter(wrapped, servletResponse);\r\n        }","title":"Force spring data rest to use https scheme","body":"<p>After digging in the source code, I found out that all link creations originates from this <a href=\"https://github.com/spring-projects/spring-framework/blob/master/spring-webmvc/src/main/java/org/springframework/web/servlet/support/ServletUriComponentsBuilder.java#L188\" rel=\"noreferrer\">point</a> and it seems to be impossible to configure forced use of https scheme in a 'standard' way. </p>\n\n<p>So I created a filter that replaces <code>http://</code> to <code>https://</code> in request URL and the problem has gone. Here is the snippet:</p>\n\n<pre><code>    @Override\n    public void doFilter(ServletRequest servletRequest, ServletResponse servletResponse, FilterChain filterChain) throws IOException, ServletException {\n\n        HttpServletRequest request = (HttpServletRequest) servletRequest;\n        final HttpServletRequestWrapper wrapped = new HttpServletRequestWrapper(request) {\n            @Override\n            public StringBuffer getRequestURL() {\n                final StringBuffer originalUrl = ((HttpServletRequest) getRequest()).getRequestURL();\n                final String updatedUrl = originalUrl.toString().replace(\"http://\", \"https://\");\n                return new StringBuffer(updatedUrl);\n            }\n        };\n        filterChain.doFilter(wrapped, servletResponse);\n    }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2296488,"reputation":669,"user_id":2017801,"display_name":"Guram Savinov"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1545206590,"creation_date":1545206590,"answer_id":53846883,"question_id":40358423,"body_markdown":"Actually, Spring Data Rest uses HATEOAS which support special headers from proxy requests, check this out:\r\n\r\n - https://github.com/spring-projects/spring-hateoas/issues/107\r\n - https://stackoverflow.com/questions/30020188/how-to-configure-spring-hateoas-behind-proxy\r\n\r\nThe header you are looking for is: `X-Forwarded-Proto`","title":"Force spring data rest to use https scheme","body":"<p>Actually, Spring Data Rest uses HATEOAS which support special headers from proxy requests, check this out:</p>\n\n<ul>\n<li><a href=\"https://github.com/spring-projects/spring-hateoas/issues/107\" rel=\"nofollow noreferrer\">https://github.com/spring-projects/spring-hateoas/issues/107</a></li>\n<li><a href=\"https://stackoverflow.com/questions/30020188/how-to-configure-spring-hateoas-behind-proxy\">How to configure Spring HATEOAS behind proxy?</a></li>\n</ul>\n\n<p>The header you are looking for is: <code>X-Forwarded-Proto</code></p>\n"},{"tags":[],"owner":{"account_id":130873,"reputation":20683,"user_id":330457,"accept_rate":82,"display_name":"Jin Kwon"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1622541976,"creation_date":1622541976,"answer_id":67786821,"question_id":40358423,"body_markdown":"I&#39;m a little bit not sure but. I did following and it seems links work.\r\n\r\n```\r\nserver:\r\n  forward-headers-strategy: NATIVE\r\n```","title":"Force spring data rest to use https scheme","body":"<p>I'm a little bit not sure but. I did following and it seems links work.</p>\n<pre><code>server:\n  forward-headers-strategy: NATIVE\n</code></pre>\n"},{"tags":[],"owner":{"account_id":12104879,"reputation":71,"user_id":8844015,"display_name":"Michel Herv&#233; NGOUNOU"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1635417553,"creation_date":1635417553,"answer_id":69752583,"question_id":40358423,"body_markdown":"I was having the same problem and it is all the answers those helped me to find a simple solution in 2 steps :\r\n\r\n 1. I added configuration in my `spring-data-rest v2.5.4` application to use `X-Forwarded-*` headers\r\n    ```java\r\n    import org.springframework.context.annotation.Configuration;\r\n    import org.springframework.web.filter.ForwardedHeaderFilter;\r\n\r\n\r\n    @Configuration()\r\n    public class ApiConfiguration {\r\n\r\n      @Bean()\r\n      ForwardedHeaderFilter forwardedHeaderFilter() {\r\n        return new ForwardedHeaderFilter();\r\n      }\r\n    }\r\n    ```\r\n\r\n 2. I added comfiguration to my proxy (`nginx v1.20.0`) to forward `scheme`, `host` and `port`\r\n    ```sh\r\n    location /api {\r\n      proxy_pass       http://localhost:8080;\r\n      proxy_set_header X-Forwarded-Proto $scheme;\r\n      proxy_set_header X-Forwarded-Host  $host;\r\n      proxy_set_header X-Forwarded-Port  $server_port;\r\n    }\r\n    ```\r\n\r\nHope that it will help next ones","title":"Force spring data rest to use https scheme","body":"<p>I was having the same problem and it is all the answers those helped me to find a simple solution in 2 steps :</p>\n<ol>\n<li><p>I added configuration in my <code>spring-data-rest v2.5.4</code> application to use <code>X-Forwarded-*</code> headers</p>\n<pre class=\"lang-java prettyprint-override\"><code>import org.springframework.context.annotation.Configuration;\nimport org.springframework.web.filter.ForwardedHeaderFilter;\n\n\n@Configuration()\npublic class ApiConfiguration {\n\n  @Bean()\n  ForwardedHeaderFilter forwardedHeaderFilter() {\n    return new ForwardedHeaderFilter();\n  }\n}\n</code></pre>\n</li>\n<li><p>I added comfiguration to my proxy (<code>nginx v1.20.0</code>) to forward <code>scheme</code>, <code>host</code> and <code>port</code></p>\n<pre class=\"lang-sh prettyprint-override\"><code>location /api {\n  proxy_pass       http://localhost:8080;\n  proxy_set_header X-Forwarded-Proto $scheme;\n  proxy_set_header X-Forwarded-Host  $host;\n  proxy_set_header X-Forwarded-Port  $server_port;\n}\n</code></pre>\n</li>\n</ol>\n<p>Hope that it will help next ones</p>\n"}],"owner":{"account_id":6753077,"reputation":1639,"user_id":5202500,"accept_rate":83,"display_name":"eparvan"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1958,"favorite_count":0,"down_vote_count":0,"up_vote_count":7,"accepted_answer_id":40362675,"answer_count":4,"score":7,"last_activity_date":1635417553,"creation_date":1477996783,"question_id":40358423,"body_markdown":"I’m using [spring-data-rest](http://projects.spring.io/spring-data-rest/) in my application which is behind apache reverse proxy that redirects from HTTP to HTTPS\r\n\r\nThis in turn leads to wrong hrefs: `http` instead `https` scheme.\r\n\r\n**Example:**\r\n\r\n    {\r\n      &quot;_links&quot; : {\r\n        &quot;profile&quot; : {\r\n          &quot;href&quot; : &quot;http://my.host/api/profile&quot;\r\n        }\r\n      }\r\n    }\r\n\r\nIs there any way I can configure `spring.data.rest` to force use https scheme?","title":"Force spring data rest to use https scheme","body":"<p>I’m using <a href=\"http://projects.spring.io/spring-data-rest/\" rel=\"noreferrer\">spring-data-rest</a> in my application which is behind apache reverse proxy that redirects from HTTP to HTTPS</p>\n\n<p>This in turn leads to wrong hrefs: <code>http</code> instead <code>https</code> scheme.</p>\n\n<p><strong>Example:</strong></p>\n\n<pre><code>{\n  \"_links\" : {\n    \"profile\" : {\n      \"href\" : \"http://my.host/api/profile\"\n    }\n  }\n}\n</code></pre>\n\n<p>Is there any way I can configure <code>spring.data.rest</code> to force use https scheme?</p>\n"},{"tags":["java","spring","amazon-web-services","spring-boot","amazon-sqs"],"answers":[{"tags":[],"owner":{"account_id":9504657,"reputation":7440,"user_id":7064617,"display_name":"JCompetence"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1634025910,"creation_date":1634022883,"answer_id":69536465,"question_id":69536394,"body_markdown":"Looking at the official documentation, you will need to use SqsMessageDeletionPolicy.ALWAYS.  \r\n\r\nUsing ON_SUCCESS will only delete the message if everything was successful in receiving and processing a message. \r\n\r\n\r\n&gt; Defines the policy that must be used for the deletion of SQS messages\r\n&gt; once they were processed. The deletion policy can be set individually\r\n&gt; on every listener method using the @SqsListener annotation. The\r\n&gt; default policy is NO_REDRIVE because it is the safest way to avoid\r\n&gt; poison messages and have a safe way to avoid the loss of messages\r\n&gt; (i.e. using a dead letter queue).\r\n\r\nThe following deletion policies are available:\r\n\r\n    ALWAYS: Always deletes message in case of success (no exception thrown) or failure (exception thrown) during message processing by the listener method.\r\n    NEVER: Never deletes message automatically. The receiving listener method must acknowledge each message manually by using the acknowledgment parameter.\r\n    NO_REDRIVE: Deletes message if no redrive policy is defined.\r\n    ON_SUCCESS: Deletes message when successfully executed by the listener method. If an exception is thrown by the listener method, the message will not be deleted.\r\n\r\n\r\nIf you want to manuall acknowedge that the message must be deleted, then your other option is `NEVER`\r\n\r\nhttps://javadoc.io/doc/org.springframework.cloud/spring-cloud-aws-messaging/2.1.3.RELEASE/org/springframework/cloud/aws/messaging/listener/SqsMessageDeletionPolicy.html\r\n\r\n\r\n--- If you wanted to manually acknowledge the deletion ----\r\n\r\n    @SqsListener(value = Queue.PORTAL_TEST, deletionPolicy = SqsMessageDeletionPolicy.NEVER)\r\n    @SendTo(value = Queue.PORTAL_TEST_B)\r\n    public UserDto receive(@Payload UserDto userDto\r\n            , @Headers Map&lt;String, String&gt; headers\r\n            , @Header(name = &quot;ReceiptHandle&quot;) String receiptHandle\r\n            , Acknowledgment acknowledgment) throws Exception {\r\n    \r\n        log.info(&quot;threadId : {}, currentTime : {}&quot;, Thread.currentThread().getId(), System.currentTimeMillis());\r\n        log.info(&quot;message : {}&quot;, userDto.toString());\r\n    \r\n  \r\n       //do something with user\r\n    \r\n        acknowledgment.acknowledge();\r\n    \r\n        return userDto;\r\n    }\r\n\r\n\r\n--- Edited ---- \r\n\r\nPlease separate your exception method from the listener:\r\n\r\n    @SqsListener(value = Queue.PORTAL_TEST, deletionPolicy = SqsMessageDeletionPolicy.NEVER)\r\n    public UserDto receive(@Payload UserDto userDto\r\n            , @Headers Map&lt;String, String&gt; headers\r\n            , @Header(name = &quot;ReceiptHandle&quot;) String receiptHandle\r\n            , Acknowledgment acknowledgment) throws Exception {\r\n\r\n\r\n    }\r\n\r\n      @MessageExceptionHandler(MessageConversionException.class)\r\n      public void exceptionHandler(MessageConversionException e) {\r\n        LOG.info(&quot;Failed to deserialize that pojo&quot;, e);\r\n      }","title":"How to delete a message from SQS in case the wrong object is received?","body":"<p>Looking at the official documentation, you will need to use SqsMessageDeletionPolicy.ALWAYS.</p>\n<p>Using ON_SUCCESS will only delete the message if everything was successful in receiving and processing a message.</p>\n<blockquote>\n<p>Defines the policy that must be used for the deletion of SQS messages\nonce they were processed. The deletion policy can be set individually\non every listener method using the @SqsListener annotation. The\ndefault policy is NO_REDRIVE because it is the safest way to avoid\npoison messages and have a safe way to avoid the loss of messages\n(i.e. using a dead letter queue).</p>\n</blockquote>\n<p>The following deletion policies are available:</p>\n<pre><code>ALWAYS: Always deletes message in case of success (no exception thrown) or failure (exception thrown) during message processing by the listener method.\nNEVER: Never deletes message automatically. The receiving listener method must acknowledge each message manually by using the acknowledgment parameter.\nNO_REDRIVE: Deletes message if no redrive policy is defined.\nON_SUCCESS: Deletes message when successfully executed by the listener method. If an exception is thrown by the listener method, the message will not be deleted.\n</code></pre>\n<p>If you want to manuall acknowedge that the message must be deleted, then your other option is <code>NEVER</code></p>\n<p><a href=\"https://javadoc.io/doc/org.springframework.cloud/spring-cloud-aws-messaging/2.1.3.RELEASE/org/springframework/cloud/aws/messaging/listener/SqsMessageDeletionPolicy.html\" rel=\"nofollow noreferrer\">https://javadoc.io/doc/org.springframework.cloud/spring-cloud-aws-messaging/2.1.3.RELEASE/org/springframework/cloud/aws/messaging/listener/SqsMessageDeletionPolicy.html</a></p>\n<p>--- If you wanted to manually acknowledge the deletion ----</p>\n<pre><code>@SqsListener(value = Queue.PORTAL_TEST, deletionPolicy = SqsMessageDeletionPolicy.NEVER)\n@SendTo(value = Queue.PORTAL_TEST_B)\npublic UserDto receive(@Payload UserDto userDto\n        , @Headers Map&lt;String, String&gt; headers\n        , @Header(name = &quot;ReceiptHandle&quot;) String receiptHandle\n        , Acknowledgment acknowledgment) throws Exception {\n\n    log.info(&quot;threadId : {}, currentTime : {}&quot;, Thread.currentThread().getId(), System.currentTimeMillis());\n    log.info(&quot;message : {}&quot;, userDto.toString());\n\n\n   //do something with user\n\n    acknowledgment.acknowledge();\n\n    return userDto;\n}\n</code></pre>\n<p>--- Edited ----</p>\n<p>Please separate your exception method from the listener:</p>\n<pre><code>@SqsListener(value = Queue.PORTAL_TEST, deletionPolicy = SqsMessageDeletionPolicy.NEVER)\npublic UserDto receive(@Payload UserDto userDto\n        , @Headers Map&lt;String, String&gt; headers\n        , @Header(name = &quot;ReceiptHandle&quot;) String receiptHandle\n        , Acknowledgment acknowledgment) throws Exception {\n\n\n}\n\n  @MessageExceptionHandler(MessageConversionException.class)\n  public void exceptionHandler(MessageConversionException e) {\n    LOG.info(&quot;Failed to deserialize that pojo&quot;, e);\n  }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":16164192,"reputation":251,"user_id":11669559,"display_name":"curious"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1635417470,"creation_date":1635417470,"answer_id":69752567,"question_id":69536394,"body_markdown":"you can use NO_REDRIVE policy - always deletes the message on normal completion, but when an exception is thrown it is only deleted if there is no DLQ and redrive policy set up for the queue. If the DLQ and redrive policy are set up, the message is not deleted.","title":"How to delete a message from SQS in case the wrong object is received?","body":"<p>you can use NO_REDRIVE policy - always deletes the message on normal completion, but when an exception is thrown it is only deleted if there is no DLQ and redrive policy set up for the queue. If the DLQ and redrive policy are set up, the message is not deleted.</p>\n"}],"owner":{"account_id":11039474,"reputation":1576,"user_id":8107977,"display_name":"imsaiful"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":3057,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":2,"score":1,"last_activity_date":1635417470,"creation_date":1634022503,"question_id":69536394,"body_markdown":"This is my listener code:\r\n```\r\n@MessageExceptionHandler(MessageConversionException.class)\r\n@SqsListener(value = &quot;${cloud.aws.sqs.url}&quot;,deletionPolicy = SqsMessageDeletionPolicy.ON_SUCCESS)\r\npublic void receiveEvent(User user){       \r\n  handleRequest(user);\r\n}\r\n\r\n```\r\nI want to delete a message if a `MessageConversionException` occurs but the message is being read again and again.\r\n\r\nIs there any way to delete the message from the SQS queue in case we are unable to deserialize from the object received?\r\n\r\n","title":"How to delete a message from SQS in case the wrong object is received?","body":"<p>This is my listener code:</p>\n<pre><code>@MessageExceptionHandler(MessageConversionException.class)\n@SqsListener(value = &quot;${cloud.aws.sqs.url}&quot;,deletionPolicy = SqsMessageDeletionPolicy.ON_SUCCESS)\npublic void receiveEvent(User user){       \n  handleRequest(user);\n}\n\n</code></pre>\n<p>I want to delete a message if a <code>MessageConversionException</code> occurs but the message is being read again and again.</p>\n<p>Is there any way to delete the message from the SQS queue in case we are unable to deserialize from the object received?</p>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":1691630,"reputation":49583,"user_id":1553851,"accept_rate":73,"display_name":"shmosel"},"score":0,"creation_date":1635360436,"post_id":69743963,"comment_id":123280066,"body_markdown":"I&#39;d pick the one that&#39;s fixed-length.","body":"I&#39;d pick the one that&#39;s fixed-length."},{"owner":{"account_id":322981,"reputation":310745,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"score":0,"creation_date":1635362932,"post_id":69743963,"comment_id":123280931,"body_markdown":"You’ll need to provide more details.","body":"You’ll need to provide more details."}],"answers":[{"tags":[],"owner":{"account_id":15777655,"reputation":1762,"user_id":11385052,"display_name":"Ryan"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1635371175,"creation_date":1635371175,"answer_id":69745829,"question_id":69743963,"body_markdown":"I&#39;d go with a map that contains a List, the implementation is irrelevant.\r\n\r\n    Map&lt;Category, Collection&lt;Item&gt;&gt; categoryMap\r\n\r\nIf the categories are ordered, use a TreeMap\r\nIf they&#39;re not ordered, use a Hashmap\r\n\r\nIf the items are known to be unique I&#39;d have the Collection be a Hashset;\r\nIf the items are unique and ordered, I&#39;d use a Treeset;\r\nIf they&#39;re non-unique, I&#39;d use an ArrayList.\r\n\r\nI see no reason to use a LinkedList of any variety if the number of entries are known. The reason to use LinkedLists is if there&#39;s to be many insertion/removal operations.\r\n\r\nIn almost all use cases an ArrayList is the superior implementation to use.  The only real downside to an ArrayList is if it&#39;s gets modified often, especially added to as it uses a &quot;double up&quot; method for resizing the internal array.  Basically, if it needs more room, it doubles the size of the existing array and then copy the items from the old array into the new array.  That can cause memory issue for large lists, but you&#39;d need to be dealing with thousands of entries.\r\n","title":"Choosing the right list for unknown numbers","body":"<p>I'd go with a map that contains a List, the implementation is irrelevant.</p>\n<pre><code>Map&lt;Category, Collection&lt;Item&gt;&gt; categoryMap\n</code></pre>\n<p>If the categories are ordered, use a TreeMap\nIf they're not ordered, use a Hashmap</p>\n<p>If the items are known to be unique I'd have the Collection be a Hashset;\nIf the items are unique and ordered, I'd use a Treeset;\nIf they're non-unique, I'd use an ArrayList.</p>\n<p>I see no reason to use a LinkedList of any variety if the number of entries are known. The reason to use LinkedLists is if there's to be many insertion/removal operations.</p>\n<p>In almost all use cases an ArrayList is the superior implementation to use.  The only real downside to an ArrayList is if it's gets modified often, especially added to as it uses a &quot;double up&quot; method for resizing the internal array.  Basically, if it needs more room, it doubles the size of the existing array and then copy the items from the old array into the new array.  That can cause memory issue for large lists, but you'd need to be dealing with thousands of entries.</p>\n"}],"owner":{"account_id":20799486,"reputation":1,"user_id":15275839,"display_name":"Kareem"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":51,"favorite_count":0,"down_vote_count":2,"up_vote_count":0,"closed_date":1635408469,"answer_count":1,"score":-2,"last_activity_date":1635417431,"creation_date":1635360336,"question_id":69743963,"body_markdown":"I need to program an application in Java language that has a pre-defined number of categories,\r\nbut the exact items in each category are unknown. Which one of the following data\r\nstructures I would use and why? Array, singly linked list, or doubly linked list","title":"Choosing the right list for unknown numbers","body":"<p>I need to program an application in Java language that has a pre-defined number of categories,\nbut the exact items in each category are unknown. Which one of the following data\nstructures I would use and why? Array, singly linked list, or doubly linked list</p>\n"},{"tags":["java","json","kotlin","jackson","objectmapper"],"comments":[{"owner":{"account_id":22354823,"reputation":16499,"user_id":16572295,"display_name":"Jo&#227;o Dias"},"score":1,"creation_date":1635413735,"post_id":69751327,"comment_id":123293540,"body_markdown":"Can you please add the classes of your model to which you are mapping the JSON? It really depends on how `hashCode()` was implemented.","body":"Can you please add the classes of your model to which you are mapping the JSON? It really depends on how <code>hashCode()</code> was implemented."},{"owner":{"account_id":8913158,"reputation":429,"user_id":6652579,"accept_rate":0,"display_name":"Kancha"},"score":0,"creation_date":1635415999,"post_id":69751327,"comment_id":123294554,"body_markdown":"Hey. Added the classes. Should I declare something differently?","body":"Hey. Added the classes. Should I declare something differently?"},{"owner":{"account_id":202054,"reputation":23899,"user_id":448875,"display_name":"broot"},"score":2,"creation_date":1635416146,"post_id":69751327,"comment_id":123294606,"body_markdown":"Did you implement `hashCode()` for `Element`? If not, then each instance generates a different hash code, even if it has the same contents. Also, if you mean to identify objects using `hashCode()` then remember this value is not unique. Collisions are rare, but it is possible that objects with different contents have the same hash code.","body":"Did you implement <code>hashCode()</code> for <code>Element</code>? If not, then each instance generates a different hash code, even if it has the same contents. Also, if you mean to identify objects using <code>hashCode()</code> then remember this value is not unique. Collisions are rare, but it is possible that objects with different contents have the same hash code."},{"owner":{"account_id":202054,"reputation":23899,"user_id":448875,"display_name":"broot"},"score":0,"creation_date":1635416604,"post_id":69751327,"comment_id":123294788,"body_markdown":"And if you store many objects like this in the database, probability of collisions greatly increases due to [birthday paradox](https://en.wikipedia.org/wiki/Birthday_problem).","body":"And if you store many objects like this in the database, probability of collisions greatly increases due to <a href=\"https://en.wikipedia.org/wiki/Birthday_problem\" rel=\"nofollow noreferrer\">birthday paradox</a>."},{"owner":{"account_id":8913158,"reputation":429,"user_id":6652579,"accept_rate":0,"display_name":"Kancha"},"score":1,"creation_date":1635416751,"post_id":69751327,"comment_id":123294852,"body_markdown":"Right. I am not implementing my own `hashCode()` method. I think will have to write a custom `hashCode()` function. Thanks!","body":"Right. I am not implementing my own <code>hashCode()</code> method. I think will have to write a custom <code>hashCode()</code> function. Thanks!"},{"owner":{"account_id":202054,"reputation":23899,"user_id":448875,"display_name":"broot"},"score":0,"creation_date":1635416841,"post_id":69751327,"comment_id":123294897,"body_markdown":"IntelliJ can generate `hashCode()` and `equals()` for you automatically. Or, if you can turn `Element` into data class, it will get it for free.","body":"IntelliJ can generate <code>hashCode()</code> and <code>equals()</code> for you automatically. Or, if you can turn <code>Element</code> into data class, it will get it for free."}],"answers":[{"tags":[],"owner":{"account_id":22354823,"reputation":16499,"user_id":16572295,"display_name":"Jo&#227;o Dias"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1635417365,"creation_date":1635417365,"answer_id":69752546,"question_id":69751327,"body_markdown":"Given that your `Element` class is not a data class (in this case you would get a `hashCode()` method implementation based on all class properties) you will need to write the `hashCode()` method yourself so that the default one (based on object memory reference) is not used and you get rid of the behaviour you are currently facing.","title":"Jackson objectMapper gives different object for same json","body":"<p>Given that your <code>Element</code> class is not a data class (in this case you would get a <code>hashCode()</code> method implementation based on all class properties) you will need to write the <code>hashCode()</code> method yourself so that the default one (based on object memory reference) is not used and you get rid of the behaviour you are currently facing.</p>\n"}],"owner":{"account_id":8913158,"reputation":429,"user_id":6652579,"accept_rate":0,"display_name":"Kancha"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":658,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":69752546,"answer_count":1,"score":2,"last_activity_date":1635417365,"creation_date":1635412484,"question_id":69751327,"body_markdown":"I&#39;m passing a json to objectmapper. The JSON string looks like this: \r\n```json\r\n{          \r\n  &quot;id&quot;: &quot;ID1&quot;,\r\n  &quot;identifier&quot; : &quot;XYZ&quot;,\r\n  &quot;data&quot;: [\r\n  {\r\n    &quot;id&quot;: &quot;sampleParentID&quot;,\r\n    &quot;childrenElements&quot;: [\r\n    {\r\n      &quot;id&quot; : &quot;sampleChildID&quot;,\r\n      &quot;content&quot; : &quot;sample child content&quot;,  \r\n    }\r\n    ]\r\n  }\r\n  ]\r\n}\r\n```\r\n\r\n```kotlin\r\n val objectMapper = ObjectMapper().registerModule(KotlinModule())\r\n val obj: Object1 = objectMapper.readValue(jsonString)\r\n```\r\n\r\nMy class looks something like this :\r\n\r\n```\r\ndata class Object 1 (\r\n var id : String? = null,\r\n var identifier : String? = null,\r\n var data: MutableList&lt;Element&gt;? = null,\r\n\r\n){\r\n // some functions\r\n}\r\n```\r\n\r\n```\r\nclass Element (\r\n var id : String?= null\r\n var content : String? = null\r\n var children: List&lt;Element&gt;? = listOf(),\r\n\r\n) {\r\n // som functions\r\n}\r\n```\r\n\r\nFrom obj, data field is nested which is an object itself.\r\nI want to get hashCode of **data** so I do `obj.data.hashCode()`. Let&#39;s say 12345 gets generated.\r\n\r\nI store this in the database. Now, let&#39;s say the user sends another request with exactly the same JSON, again the JSON gets converted into an object from which I extract the data field and now when I do `obj.data.hashCode()`, 12345 is not generated, rather some other number gets generated.\r\n\r\nIs this behavior expected? If yes, what is the workaround?\r\n\r\n\r\n**Update** : Added classes description.","title":"Jackson objectMapper gives different object for same json","body":"<p>I'm passing a json to objectmapper. The JSON string looks like this:</p>\n<pre class=\"lang-json prettyprint-override\"><code>{          \n  &quot;id&quot;: &quot;ID1&quot;,\n  &quot;identifier&quot; : &quot;XYZ&quot;,\n  &quot;data&quot;: [\n  {\n    &quot;id&quot;: &quot;sampleParentID&quot;,\n    &quot;childrenElements&quot;: [\n    {\n      &quot;id&quot; : &quot;sampleChildID&quot;,\n      &quot;content&quot; : &quot;sample child content&quot;,  \n    }\n    ]\n  }\n  ]\n}\n</code></pre>\n<pre class=\"lang-kotlin prettyprint-override\"><code> val objectMapper = ObjectMapper().registerModule(KotlinModule())\n val obj: Object1 = objectMapper.readValue(jsonString)\n</code></pre>\n<p>My class looks something like this :</p>\n<pre><code>data class Object 1 (\n var id : String? = null,\n var identifier : String? = null,\n var data: MutableList&lt;Element&gt;? = null,\n\n){\n // some functions\n}\n</code></pre>\n<pre><code>class Element (\n var id : String?= null\n var content : String? = null\n var children: List&lt;Element&gt;? = listOf(),\n\n) {\n // som functions\n}\n</code></pre>\n<p>From obj, data field is nested which is an object itself.\nI want to get hashCode of <strong>data</strong> so I do <code>obj.data.hashCode()</code>. Let's say 12345 gets generated.</p>\n<p>I store this in the database. Now, let's say the user sends another request with exactly the same JSON, again the JSON gets converted into an object from which I extract the data field and now when I do <code>obj.data.hashCode()</code>, 12345 is not generated, rather some other number gets generated.</p>\n<p>Is this behavior expected? If yes, what is the workaround?</p>\n<p><strong>Update</strong> : Added classes description.</p>\n"},{"tags":["java","nullpointerexception","java-http-client"],"comments":[{"owner":{"account_id":7595189,"reputation":44576,"user_id":5761558,"display_name":"ernest_k"},"score":0,"creation_date":1635416495,"post_id":69752240,"comment_id":123294746,"body_markdown":"Have you checked the status code? I&#39;d suppose a null body is expected for something like an Http 204,as as an example. That&#39;s a &quot;successful&quot; response code","body":"Have you checked the status code? I&#39;d suppose a null body is expected for something like an Http 204,as as an example. That&#39;s a &quot;successful&quot; response code"},{"owner":{"account_id":3736112,"reputation":988,"user_id":3107019,"display_name":"JackPGreen"},"score":0,"creation_date":1635416918,"post_id":69752240,"comment_id":123294916,"body_markdown":"@ernest_k unfortunately as I can&#39;t reproduce it, the info above is all I have for now. I&#39;ve added validating status codes to the application for the future.","body":"@ernest_k unfortunately as I can&#39;t reproduce it, the info above is all I have for now. I&#39;ve added validating status codes to the application for the future."}],"answers":[{"tags":[],"owner":{"account_id":4254083,"reputation":1340,"user_id":12263844,"display_name":"pepevalbe"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1635417275,"creation_date":1635417275,"answer_id":69752520,"question_id":69752240,"body_markdown":"There are other scenarios where connection is ok but you can&#39;t get what you expect from the server. You should check the http response status codes and act accordingly.\r\n\r\nAs you see response.body() can be null so you should check agains that.\r\n","title":"java.net.http.HttpClient - Why would HttpResponse.body be null?","body":"<p>There are other scenarios where connection is ok but you can't get what you expect from the server. You should check the http response status codes and act accordingly.</p>\n<p>As you see response.body() can be null so you should check agains that.</p>\n"}],"owner":{"account_id":3736112,"reputation":988,"user_id":3107019,"display_name":"JackPGreen"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1238,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1635417275,"creation_date":1635416091,"question_id":69752240,"body_markdown":"My application connects to an internet resource using `java.net.http.HttpClient`.\r\n\r\nI would expect it to either connect and work, or to throw an exception - and this is how it always seems to work.\r\n\r\nHowever, looking through logs I can see for another user, it did neither and instead returned a `HttpResponse` with a `null` `body`. For reference, this was running on Amazon Corretto 11.0.13.\r\n\r\nI&#39;m not able to reproduce this, and from looking at the documentation and the code it&#39;s not clear how or why this can happen.\r\n\r\nAn example of what the application is doing:\r\n```\r\ntry {\r\n    final HttpResponse&lt;InputStream&gt; response = HttpClient.newHttpClient().send(HttpRequest.newBuilder(new URI(\r\n\t    &quot;https://api.cognitive.microsofttranslator.com/languages?api-version=3.0&amp;scope=translation&quot;)).GET()\r\n\t    .build(), BodyHandlers.ofInputStream());\r\n\r\n    try (BufferedReader reader = new BufferedReader(new InputStreamReader(response.body()))) {\r\n\t\treader.lines().forEach(System.out::println);\r\n    }\r\n} catch (IOException | InterruptedException | URISyntaxException e) {\r\n    e.printStackTrace();\r\n}\r\n```\r\n\r\nAnd the following error was logged:\r\n```\r\njava.lang.NullPointerException\r\n    at java.base/java.io.Reader.&lt;init&gt;(Reader.java:167)\r\n    at java.base/java.io.InputStreamReader.&lt;init&gt;(InputStreamReader.java:109)\r\n```\r\n\r\nThe error in the `InputStreamReader` constructor suggests `response.body()` returns `null`.\r\n\r\nObviously I could just catch the `NullPointerException`, but there&#39;s no context as to what problem occurred, which causes a problem when trying to resolve the connectivity issue.","title":"java.net.http.HttpClient - Why would HttpResponse.body be null?","body":"<p>My application connects to an internet resource using <code>java.net.http.HttpClient</code>.</p>\n<p>I would expect it to either connect and work, or to throw an exception - and this is how it always seems to work.</p>\n<p>However, looking through logs I can see for another user, it did neither and instead returned a <code>HttpResponse</code> with a <code>null</code> <code>body</code>. For reference, this was running on Amazon Corretto 11.0.13.</p>\n<p>I'm not able to reproduce this, and from looking at the documentation and the code it's not clear how or why this can happen.</p>\n<p>An example of what the application is doing:</p>\n<pre><code>try {\n    final HttpResponse&lt;InputStream&gt; response = HttpClient.newHttpClient().send(HttpRequest.newBuilder(new URI(\n        &quot;https://api.cognitive.microsofttranslator.com/languages?api-version=3.0&amp;scope=translation&quot;)).GET()\n        .build(), BodyHandlers.ofInputStream());\n\n    try (BufferedReader reader = new BufferedReader(new InputStreamReader(response.body()))) {\n        reader.lines().forEach(System.out::println);\n    }\n} catch (IOException | InterruptedException | URISyntaxException e) {\n    e.printStackTrace();\n}\n</code></pre>\n<p>And the following error was logged:</p>\n<pre><code>java.lang.NullPointerException\n    at java.base/java.io.Reader.&lt;init&gt;(Reader.java:167)\n    at java.base/java.io.InputStreamReader.&lt;init&gt;(InputStreamReader.java:109)\n</code></pre>\n<p>The error in the <code>InputStreamReader</code> constructor suggests <code>response.body()</code> returns <code>null</code>.</p>\n<p>Obviously I could just catch the <code>NullPointerException</code>, but there's no context as to what problem occurred, which causes a problem when trying to resolve the connectivity issue.</p>\n"},{"tags":["java","spring","rabbitmq","spring-rabbit"],"comments":[{"owner":{"account_id":2765078,"reputation":4245,"user_id":2381006,"accept_rate":42,"display_name":"dev2d"},"score":0,"creation_date":1436398469,"post_id":31305572,"comment_id":50600834,"body_markdown":"see if this can help http://stackoverflow.com/questions/24373588/deleted-queue-is-not-redefined-consumers-stop-to-handle-messages","body":"see if this can help <a href=\"http://stackoverflow.com/questions/24373588/deleted-queue-is-not-redefined-consumers-stop-to-handle-messages\" title=\"deleted queue is not redefined consumers stop to handle messages\">stackoverflow.com/questions/24373588/&hellip;</a>"},{"owner":{"account_id":127349,"reputation":1892,"user_id":324444,"accept_rate":62,"display_name":"Tim Boland"},"score":1,"creation_date":1495045871,"post_id":31305572,"comment_id":75091210,"body_markdown":"did you ever get this resolved?  what was the solution.","body":"did you ever get this resolved?  what was the solution."}],"answers":[{"tags":[],"owner":{"account_id":1288095,"reputation":169326,"user_id":1240763,"display_name":"Gary Russell"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1436446622,"creation_date":1436446622,"answer_id":31318208,"question_id":31305572,"body_markdown":"It has nothing to do with auto-delete queues (except the fact that you have some means the container is initializing the connection at this particular point in its lifecycle).\r\n\r\nYou seem to have some network issues...\r\n\r\n    java.util.concurrent.TimeoutException\r\n    ....\r\n        at com.rabbitmq.client.impl.AMQConnection.start(AMQConnection.java:293)\r\n\r\nThe rabbitmq client library has a hard-coded 5 second timeout when waiting for the response for the connection start command and the server is not replying in time.","title":"Exceptions in rabbitmq with spring boot","body":"<p>It has nothing to do with auto-delete queues (except the fact that you have some means the container is initializing the connection at this particular point in its lifecycle).</p>\n\n<p>You seem to have some network issues...</p>\n\n<pre><code>java.util.concurrent.TimeoutException\n....\n    at com.rabbitmq.client.impl.AMQConnection.start(AMQConnection.java:293)\n</code></pre>\n\n<p>The rabbitmq client library has a hard-coded 5 second timeout when waiting for the response for the connection start command and the server is not replying in time.</p>\n"},{"tags":[],"owner":{"account_id":77782,"reputation":4807,"user_id":221781,"accept_rate":100,"display_name":"izilotti"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1447702842,"creation_date":1447702842,"answer_id":33743285,"question_id":31305572,"body_markdown":"Restarting RabbitMQ resolved this for me (Mac).\r\n\r\n    cd /usr/local/sbin \r\n    ./rabbitmqctl stop_app\r\n    ./rabbitmqctl start_app\r\n\r\n","title":"Exceptions in rabbitmq with spring boot","body":"<p>Restarting RabbitMQ resolved this for me (Mac).</p>\n\n<pre><code>cd /usr/local/sbin \n./rabbitmqctl stop_app\n./rabbitmqctl start_app\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1455949,"reputation":61,"user_id":1371509,"display_name":"Changel"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1481006256,"creation_date":1481006256,"answer_id":40989251,"question_id":31305572,"body_markdown":"I think it is about your spring-rabbit version.\r\nI encountered the same problem as you. but I have no idea to fix it.\r\nBut in my another project, it works well. Then I compared two projects.\r\nI discovered the spring-rabbit version is different from each other.\r\n\r\n    &lt;dependency&gt;\r\n      &lt;groupId&gt;org.springframework.amqp&lt;/groupId&gt;\r\n      &lt;artifactId&gt;spring-rabbit&lt;/artifactId&gt;\r\n      &lt;version&gt;1.6.5.RELEASE&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\nthis new version throw TimeoutException.\r\nbut\r\n\r\n    &lt;dependency&gt;\r\n      &lt;groupId&gt;org.springframework.amqp&lt;/groupId&gt;\r\n      &lt;artifactId&gt;spring-rabbit&lt;/artifactId&gt;\r\n      &lt;version&gt;1.4.5.RELEASE&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\nthis version it works well.\r\nmy spring-boot version is &quot;Camden.SR2&quot;.default spring-rabbit 1.6.5.RELEASE.\r\n\r\nHope it helps you\r\n","title":"Exceptions in rabbitmq with spring boot","body":"<p>I think it is about your spring-rabbit version.\nI encountered the same problem as you. but I have no idea to fix it.\nBut in my another project, it works well. Then I compared two projects.\nI discovered the spring-rabbit version is different from each other.</p>\n\n<pre><code>&lt;dependency&gt;\n  &lt;groupId&gt;org.springframework.amqp&lt;/groupId&gt;\n  &lt;artifactId&gt;spring-rabbit&lt;/artifactId&gt;\n  &lt;version&gt;1.6.5.RELEASE&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n\n<p>this new version throw TimeoutException.\nbut</p>\n\n<pre><code>&lt;dependency&gt;\n  &lt;groupId&gt;org.springframework.amqp&lt;/groupId&gt;\n  &lt;artifactId&gt;spring-rabbit&lt;/artifactId&gt;\n  &lt;version&gt;1.4.5.RELEASE&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n\n<p>this version it works well.\nmy spring-boot version is \"Camden.SR2\".default spring-rabbit 1.6.5.RELEASE.</p>\n\n<p>Hope it helps you</p>\n"},{"tags":[],"owner":{"account_id":6929396,"reputation":81,"user_id":5319352,"display_name":"Jun Shi Yan"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1625626592,"creation_date":1625626592,"answer_id":68279446,"question_id":31305572,"body_markdown":"I think you can try to change the port to 5672, it works for me","title":"Exceptions in rabbitmq with spring boot","body":"<p>I think you can try to change the port to 5672, it works for me</p>\n"},{"tags":[],"owner":{"account_id":14739596,"reputation":1972,"user_id":10644550,"display_name":"Shiva"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1635417257,"creation_date":1635417257,"answer_id":69752512,"question_id":31305572,"body_markdown":"Perhaps you can try overriding the default handshakeTimeout by defining bean\r\n\r\n    com.rabbitmq.client.ConnectionFactory#setHandshakeTimeout \r\n\r\nSomething like below:\r\n\r\n    &lt;bean id=&quot;myConnectionFactory&quot; class=&quot;com.rabbitmq.client.ConnectionFactory&quot;\r\n          p:automaticRecoveryEnabled=&quot;false&quot; p:handshakeTimeout=&quot;${rabbit.handshakeTimeout:10000}&quot;&gt;\r\n     ....\r\n    &lt;/bean&gt;","title":"Exceptions in rabbitmq with spring boot","body":"<p>Perhaps you can try overriding the default handshakeTimeout by defining bean</p>\n<pre><code>com.rabbitmq.client.ConnectionFactory#setHandshakeTimeout \n</code></pre>\n<p>Something like below:</p>\n<pre><code>&lt;bean id=&quot;myConnectionFactory&quot; class=&quot;com.rabbitmq.client.ConnectionFactory&quot;\n      p:automaticRecoveryEnabled=&quot;false&quot; p:handshakeTimeout=&quot;${rabbit.handshakeTimeout:10000}&quot;&gt;\n ....\n&lt;/bean&gt;\n</code></pre>\n"}],"owner":{"account_id":1867196,"reputation":850,"user_id":1690436,"accept_rate":17,"display_name":"Pradeep"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":25489,"favorite_count":0,"down_vote_count":0,"up_vote_count":11,"answer_count":5,"score":11,"last_activity_date":1635417257,"creation_date":1436398078,"question_id":31305572,"body_markdown":"I am getting the following exception repeatedly when I start my spring boot application with rabbitmq. The entire flow is working fine even with the below exceptions. is it to do with the auto-delete in by means ?\r\n\r\n        08 Jul 2015 16:20:17,652 [ERROR] [SimpleAsyncTaskExecutor-2] SimpleMessageListenerContainer| Failed to check/redeclare auto-delete queue(s).\r\n        java.util.concurrent.TimeoutException\r\n        \tat com.rabbitmq.utility.BlockingCell.get(BlockingCell.java:77)\r\n        \tat com.rabbitmq.utility.BlockingCell.uninterruptibleGet(BlockingCell.java:111)\r\n        \tat com.rabbitmq.utility.BlockingValueOrException.uninterruptibleGetValue(BlockingValueOrException.java:37)\r\n        \tat com.rabbitmq.client.impl.AMQChannel$BlockingRpcContinuation.getReply(AMQChannel.java:367)\r\n        \tat com.rabbitmq.client.impl.AMQConnection.start(AMQConnection.java:293)\r\n        \tat com.rabbitmq.client.ConnectionFactory.newConnection(ConnectionFactory.java:621)\r\n        \tat com.rabbitmq.client.ConnectionFactory.newConnection(ConnectionFactory.java:665)\r\n        \tat org.springframework.amqp.rabbit.connection.AbstractConnectionFactory.createBareConnection(AbstractConnectionFactory.java:208)\r\n        \tat org.springframework.amqp.rabbit.connection.CachingConnectionFactory.createConnection(CachingConnectionFactory.java:444)\r\n        \tat org.springframework.amqp.rabbit.connection.ConnectionFactoryUtils$1.createConnection(ConnectionFactoryUtils.java:80)\r\n        \tat org.springframework.amqp.rabbit.connection.ConnectionFactoryUtils.doGetTransactionalResourceHolder(ConnectionFactoryUtils.java:130)\r\n        \tat org.springframework.amqp.rabbit.connection.ConnectionFactoryUtils.getTransactionalResourceHolder(ConnectionFactoryUtils.java:67)\r\n        \tat org.springframework.amqp.rabbit.core.RabbitTemplate.doExecute(RabbitTemplate.java:1035)\r\n        \tat org.springframework.amqp.rabbit.core.RabbitTemplate.execute(RabbitTemplate.java:1028)\r\n        \tat org.springframework.amqp.rabbit.core.RabbitTemplate.execute(RabbitTemplate.java:1004)\r\n        \tat org.springframework.amqp.rabbit.core.RabbitAdmin.getQueueProperties(RabbitAdmin.java:254)\r\n        \tat org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer.redeclareElementsIfNecessary(SimpleMessageListenerContainer.java:963)\r\n        \tat org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer.access$300(SimpleMessageListenerContainer.java:83)\r\n        \tat org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer$AsyncMessageProcessingConsumer.run(SimpleMessageListenerContainer.java:1081)\r\n        \tat java.lang.Thread.run(Thread.java:745)\r\n    \r\n    08 Jul 2015 16:52:47,148 [WARN ] [SimpleAsyncTaskExecutor-1] SimpleMessageListenerContainer| Consumer raised exception, processing can restart if the connection factory supports it\r\n    java.util.concurrent.TimeoutException\r\n    \tat com.rabbitmq.utility.BlockingCell.get(BlockingCell.java:77)\r\n    \tat com.rabbitmq.utility.BlockingCell.uninterruptibleGet(BlockingCell.java:111)\r\n    \tat com.rabbitmq.utility.BlockingValueOrException.uninterruptibleGetValue(BlockingValueOrException.java:37)\r\n    \tat com.rabbitmq.client.impl.AMQChannel$BlockingRpcContinuation.getReply(AMQChannel.java:367)\r\n    \tat com.rabbitmq.client.impl.AMQConnection.start(AMQConnection.java:293)\r\n    \tat com.rabbitmq.client.ConnectionFactory.newConnection(ConnectionFactory.java:621)\r\n    \tat com.rabbitmq.client.ConnectionFactory.newConnection(ConnectionFactory.java:665)\r\n    \tat org.springframework.amqp.rabbit.connection.AbstractConnectionFactory.createBareConnection(AbstractConnectionFactory.java:208)\r\n    \tat org.springframework.amqp.rabbit.connection.CachingConnectionFactory.createConnection(CachingConnectionFactory.java:444)\r\n    \tat org.springframework.amqp.rabbit.connection.ConnectionFactoryUtils$1.createConnection(ConnectionFactoryUtils.java:80)\r\n    \tat org.springframework.amqp.rabbit.connection.ConnectionFactoryUtils.doGetTransactionalResourceHolder(ConnectionFactoryUtils.java:130)\r\n    \tat org.springframework.amqp.rabbit.connection.ConnectionFactoryUtils.getTransactionalResourceHolder(ConnectionFactoryUtils.java:67)\r\n    \tat org.springframework.amqp.rabbit.listener.BlockingQueueConsumer.start(BlockingQueueConsumer.java:434)\r\n    \tat org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer$AsyncMessageProcessingConsumer.run(SimpleMessageListenerContainer.java:1083)\r\n    \tat java.lang.Thread.run(Thread.java:745)\r\n\r\nthe following are my beans\r\n\r\n\r\n     &lt;rabbit:queue id=&quot;reportQueue&quot; name=&quot;reportQueue&quot; durable=&quot;true&quot; auto-delete=&quot;false&quot; exclusive=&quot;false&quot;/&gt;\r\n     \r\n     \r\n     &lt;rabbit:direct-exchange id=&quot;reportExchange&quot; durable=&quot;true&quot; name=&quot;reportExchange&quot;&gt;\r\n         &lt;rabbit:bindings&gt;\r\n            &lt;rabbit:binding queue=&quot;reportQueue&quot; key=&quot;reportBind&quot;&gt;&lt;/rabbit:binding&gt;\r\n         &lt;/rabbit:bindings&gt;\r\n     &lt;/rabbit:direct-exchange&gt;\r\n    \r\n    \r\n      &lt;bean id=&quot;aListener&quot; class=&quot;com.sample.ReportMessageListener&quot; autowire=&quot;byName&quot;/&gt;\r\n      &lt;bean id=&quot;reportMessageConverter&quot; class=&quot;com.sample.ReportMessageConverter&quot;/&gt;\r\n     &lt;rabbit:listener-container id=&quot;myListenerContainer&quot; connection-factory=&quot;connectionFactory&quot; acknowledge=&quot;auto&quot; prefetch=&quot;5&quot; concurrency=&quot;1&quot; message-converter=&quot;reportMessageConverter&quot; &gt;\r\n        &lt;rabbit:listener ref=&quot;aListener&quot; queues=&quot;reportQueue&quot;/&gt;\r\n    &lt;/rabbit:listener-container&gt;\r\n\r\n\r\n**Update:**\r\n\r\nwith debug enabled the messages are \r\n\r\n    09 Jul 2015 14:46:35,284 [DEBUG] [main] SimpleMessageListenerContainer| Starting Rabbit listener container.\r\n    09 Jul 2015 14:46:38,601 [DEBUG] [elasticsearch[local_jvm_node][clusterService#updateTask][T#1]] service                  | [local_jvm_node] processing [routing-table-updater]: execute\r\n    09 Jul 2015 14:46:38,602 [DEBUG] [elasticsearch[local_jvm_node][clusterService#updateTask][T#1]] service                  | [local_jvm_node] processing [routing-table-updater]: no change in cluster_state\r\n    09 Jul 2015 14:46:40,324 [ERROR] [SimpleAsyncTaskExecutor-1] SimpleMessageListenerContainer| Failed to check/redeclare auto-delete queue(s).\r\n    java.util.concurrent.TimeoutException\r\n    \tat com.rabbitmq.utility.BlockingCell.get(BlockingCell.java:77)\r\n    \tat com.rabbitmq.utility.BlockingCell.uninterruptibleGet(BlockingCell.java:111)\r\n    \tat com.rabbitmq.utility.BlockingValueOrException.uninterruptibleGetValue(BlockingValueOrException.java:37)\r\n    \tat com.rabbitmq.client.impl.AMQChannel$BlockingRpcContinuation.getReply(AMQChannel.java:367)\r\n    \tat com.rabbitmq.client.impl.AMQConnection.start(AMQConnection.java:293)\r\n    \tat com.rabbitmq.client.ConnectionFactory.newConnection(ConnectionFactory.java:621)\r\n    \tat com.rabbitmq.client.ConnectionFactory.newConnection(ConnectionFactory.java:665)\r\n    \tat org.springframework.amqp.rabbit.connection.AbstractConnectionFactory.createBareConnection(AbstractConnectionFactory.java:208)\r\n    \tat org.springframework.amqp.rabbit.connection.CachingConnectionFactory.createConnection(CachingConnectionFactory.java:444)\r\n    \tat org.springframework.amqp.rabbit.connection.ConnectionFactoryUtils$1.createConnection(ConnectionFactoryUtils.java:80)\r\n    \tat org.springframework.amqp.rabbit.connection.ConnectionFactoryUtils.doGetTransactionalResourceHolder(ConnectionFactoryUtils.java:130)\r\n    \tat org.springframework.amqp.rabbit.connection.ConnectionFactoryUtils.getTransactionalResourceHolder(ConnectionFactoryUtils.java:67)\r\n    \tat org.springframework.amqp.rabbit.core.RabbitTemplate.doExecute(RabbitTemplate.java:1035)\r\n    \tat org.springframework.amqp.rabbit.core.RabbitTemplate.execute(RabbitTemplate.java:1028)\r\n    \tat org.springframework.amqp.rabbit.core.RabbitTemplate.execute(RabbitTemplate.java:1004)\r\n    \tat org.springframework.amqp.rabbit.core.RabbitAdmin.getQueueProperties(RabbitAdmin.java:254)\r\n    \tat org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer.redeclareElementsIfNecessary(SimpleMessageListenerContainer.java:963)\r\n    \tat org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer.access$300(SimpleMessageListenerContainer.java:83)\r\n    \tat org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer$AsyncMessageProcessingConsumer.run(SimpleMessageListenerContainer.java:1081)\r\n    \tat java.lang.Thread.run(Thread.java:745)\r\n    09 Jul 2015 14:46:40,328 [DEBUG] [SimpleAsyncTaskExecutor-1] BlockingQueueConsumer    | Starting consumer Consumer: tags=[{}], channel=null, acknowledgeMode=MANUAL local queue size=0\r\n    09 Jul 2015 14:46:45,333 [DEBUG] [SimpleAsyncTaskExecutor-1] SimpleMessageListenerContainer| Recovering consumer in 5000 ms.\r\n\r\n    09 Jul 2015 14:46:50,402 [WARN ] [SimpleAsyncTaskExecutor-1] SimpleMessageListenerContainer| Consumer raised exception, processing can restart if the connection factory supports it\r\n    java.util.concurrent.TimeoutException\r\n    \tat com.rabbitmq.utility.BlockingCell.get(BlockingCell.java:77)\r\n    \tat com.rabbitmq.utility.BlockingCell.uninterruptibleGet(BlockingCell.java:111)\r\n    \tat com.rabbitmq.utility.BlockingValueOrException.uninterruptibleGetValue(BlockingValueOrException.java:37)\r\n    \tat com.rabbitmq.client.impl.AMQChannel$BlockingRpcContinuation.getReply(AMQChannel.java:367)\r\n    \tat com.rabbitmq.client.impl.AMQConnection.start(AMQConnection.java:293)\r\n    \tat com.rabbitmq.client.ConnectionFactory.newConnection(ConnectionFactory.java:621)\r\n    \tat com.rabbitmq.client.ConnectionFactory.newConnection(ConnectionFactory.java:665)\r\n    \tat org.springframework.amqp.rabbit.connection.AbstractConnectionFactory.createBareConnection(AbstractConnectionFactory.java:208)\r\n    \tat org.springframework.amqp.rabbit.connection.CachingConnectionFactory.createConnection(CachingConnectionFactory.java:444)\r\n    \tat org.springframework.amqp.rabbit.connection.ConnectionFactoryUtils$1.createConnection(ConnectionFactoryUtils.java:80)\r\n    \tat org.springframework.amqp.rabbit.connection.ConnectionFactoryUtils.doGetTransactionalResourceHolder(ConnectionFactoryUtils.java:130)\r\n    \tat org.springframework.amqp.rabbit.connection.ConnectionFactoryUtils.getTransactionalResourceHolder(ConnectionFactoryUtils.java:67)\r\n    \tat org.springframework.amqp.rabbit.listener.BlockingQueueConsumer.start(BlockingQueueConsumer.java:434)\r\n    \tat org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer$AsyncMessageProcessingConsumer.run(SimpleMessageListenerContainer.java:1083)\r\n    \tat java.lang.Thread.run(Thread.java:745)\r\n    09 Jul 2015 14:46:50,403 [INFO ] [SimpleAsyncTaskExecutor-1] SimpleMessageListenerContainer| Restarting Consumer: tags=[{}], channel=null, acknowledgeMode=MANUAL local queue size=0\r\n    09 Jul 2015 14:46:50,403 [DEBUG] [SimpleAsyncTaskExecutor-1] BlockingQueueConsumer    | Closing Rabbit Channel: null","title":"Exceptions in rabbitmq with spring boot","body":"<p>I am getting the following exception repeatedly when I start my spring boot application with rabbitmq. The entire flow is working fine even with the below exceptions. is it to do with the auto-delete in by means ?</p>\n\n<pre><code>    08 Jul 2015 16:20:17,652 [ERROR] [SimpleAsyncTaskExecutor-2] SimpleMessageListenerContainer| Failed to check/redeclare auto-delete queue(s).\n    java.util.concurrent.TimeoutException\n        at com.rabbitmq.utility.BlockingCell.get(BlockingCell.java:77)\n        at com.rabbitmq.utility.BlockingCell.uninterruptibleGet(BlockingCell.java:111)\n        at com.rabbitmq.utility.BlockingValueOrException.uninterruptibleGetValue(BlockingValueOrException.java:37)\n        at com.rabbitmq.client.impl.AMQChannel$BlockingRpcContinuation.getReply(AMQChannel.java:367)\n        at com.rabbitmq.client.impl.AMQConnection.start(AMQConnection.java:293)\n        at com.rabbitmq.client.ConnectionFactory.newConnection(ConnectionFactory.java:621)\n        at com.rabbitmq.client.ConnectionFactory.newConnection(ConnectionFactory.java:665)\n        at org.springframework.amqp.rabbit.connection.AbstractConnectionFactory.createBareConnection(AbstractConnectionFactory.java:208)\n        at org.springframework.amqp.rabbit.connection.CachingConnectionFactory.createConnection(CachingConnectionFactory.java:444)\n        at org.springframework.amqp.rabbit.connection.ConnectionFactoryUtils$1.createConnection(ConnectionFactoryUtils.java:80)\n        at org.springframework.amqp.rabbit.connection.ConnectionFactoryUtils.doGetTransactionalResourceHolder(ConnectionFactoryUtils.java:130)\n        at org.springframework.amqp.rabbit.connection.ConnectionFactoryUtils.getTransactionalResourceHolder(ConnectionFactoryUtils.java:67)\n        at org.springframework.amqp.rabbit.core.RabbitTemplate.doExecute(RabbitTemplate.java:1035)\n        at org.springframework.amqp.rabbit.core.RabbitTemplate.execute(RabbitTemplate.java:1028)\n        at org.springframework.amqp.rabbit.core.RabbitTemplate.execute(RabbitTemplate.java:1004)\n        at org.springframework.amqp.rabbit.core.RabbitAdmin.getQueueProperties(RabbitAdmin.java:254)\n        at org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer.redeclareElementsIfNecessary(SimpleMessageListenerContainer.java:963)\n        at org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer.access$300(SimpleMessageListenerContainer.java:83)\n        at org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer$AsyncMessageProcessingConsumer.run(SimpleMessageListenerContainer.java:1081)\n        at java.lang.Thread.run(Thread.java:745)\n\n08 Jul 2015 16:52:47,148 [WARN ] [SimpleAsyncTaskExecutor-1] SimpleMessageListenerContainer| Consumer raised exception, processing can restart if the connection factory supports it\njava.util.concurrent.TimeoutException\n    at com.rabbitmq.utility.BlockingCell.get(BlockingCell.java:77)\n    at com.rabbitmq.utility.BlockingCell.uninterruptibleGet(BlockingCell.java:111)\n    at com.rabbitmq.utility.BlockingValueOrException.uninterruptibleGetValue(BlockingValueOrException.java:37)\n    at com.rabbitmq.client.impl.AMQChannel$BlockingRpcContinuation.getReply(AMQChannel.java:367)\n    at com.rabbitmq.client.impl.AMQConnection.start(AMQConnection.java:293)\n    at com.rabbitmq.client.ConnectionFactory.newConnection(ConnectionFactory.java:621)\n    at com.rabbitmq.client.ConnectionFactory.newConnection(ConnectionFactory.java:665)\n    at org.springframework.amqp.rabbit.connection.AbstractConnectionFactory.createBareConnection(AbstractConnectionFactory.java:208)\n    at org.springframework.amqp.rabbit.connection.CachingConnectionFactory.createConnection(CachingConnectionFactory.java:444)\n    at org.springframework.amqp.rabbit.connection.ConnectionFactoryUtils$1.createConnection(ConnectionFactoryUtils.java:80)\n    at org.springframework.amqp.rabbit.connection.ConnectionFactoryUtils.doGetTransactionalResourceHolder(ConnectionFactoryUtils.java:130)\n    at org.springframework.amqp.rabbit.connection.ConnectionFactoryUtils.getTransactionalResourceHolder(ConnectionFactoryUtils.java:67)\n    at org.springframework.amqp.rabbit.listener.BlockingQueueConsumer.start(BlockingQueueConsumer.java:434)\n    at org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer$AsyncMessageProcessingConsumer.run(SimpleMessageListenerContainer.java:1083)\n    at java.lang.Thread.run(Thread.java:745)\n</code></pre>\n\n<p>the following are my beans</p>\n\n<pre><code> &lt;rabbit:queue id=\"reportQueue\" name=\"reportQueue\" durable=\"true\" auto-delete=\"false\" exclusive=\"false\"/&gt;\n\n\n &lt;rabbit:direct-exchange id=\"reportExchange\" durable=\"true\" name=\"reportExchange\"&gt;\n     &lt;rabbit:bindings&gt;\n        &lt;rabbit:binding queue=\"reportQueue\" key=\"reportBind\"&gt;&lt;/rabbit:binding&gt;\n     &lt;/rabbit:bindings&gt;\n &lt;/rabbit:direct-exchange&gt;\n\n\n  &lt;bean id=\"aListener\" class=\"com.sample.ReportMessageListener\" autowire=\"byName\"/&gt;\n  &lt;bean id=\"reportMessageConverter\" class=\"com.sample.ReportMessageConverter\"/&gt;\n &lt;rabbit:listener-container id=\"myListenerContainer\" connection-factory=\"connectionFactory\" acknowledge=\"auto\" prefetch=\"5\" concurrency=\"1\" message-converter=\"reportMessageConverter\" &gt;\n    &lt;rabbit:listener ref=\"aListener\" queues=\"reportQueue\"/&gt;\n&lt;/rabbit:listener-container&gt;\n</code></pre>\n\n<p><strong>Update:</strong></p>\n\n<p>with debug enabled the messages are </p>\n\n<pre><code>09 Jul 2015 14:46:35,284 [DEBUG] [main] SimpleMessageListenerContainer| Starting Rabbit listener container.\n09 Jul 2015 14:46:38,601 [DEBUG] [elasticsearch[local_jvm_node][clusterService#updateTask][T#1]] service                  | [local_jvm_node] processing [routing-table-updater]: execute\n09 Jul 2015 14:46:38,602 [DEBUG] [elasticsearch[local_jvm_node][clusterService#updateTask][T#1]] service                  | [local_jvm_node] processing [routing-table-updater]: no change in cluster_state\n09 Jul 2015 14:46:40,324 [ERROR] [SimpleAsyncTaskExecutor-1] SimpleMessageListenerContainer| Failed to check/redeclare auto-delete queue(s).\njava.util.concurrent.TimeoutException\n    at com.rabbitmq.utility.BlockingCell.get(BlockingCell.java:77)\n    at com.rabbitmq.utility.BlockingCell.uninterruptibleGet(BlockingCell.java:111)\n    at com.rabbitmq.utility.BlockingValueOrException.uninterruptibleGetValue(BlockingValueOrException.java:37)\n    at com.rabbitmq.client.impl.AMQChannel$BlockingRpcContinuation.getReply(AMQChannel.java:367)\n    at com.rabbitmq.client.impl.AMQConnection.start(AMQConnection.java:293)\n    at com.rabbitmq.client.ConnectionFactory.newConnection(ConnectionFactory.java:621)\n    at com.rabbitmq.client.ConnectionFactory.newConnection(ConnectionFactory.java:665)\n    at org.springframework.amqp.rabbit.connection.AbstractConnectionFactory.createBareConnection(AbstractConnectionFactory.java:208)\n    at org.springframework.amqp.rabbit.connection.CachingConnectionFactory.createConnection(CachingConnectionFactory.java:444)\n    at org.springframework.amqp.rabbit.connection.ConnectionFactoryUtils$1.createConnection(ConnectionFactoryUtils.java:80)\n    at org.springframework.amqp.rabbit.connection.ConnectionFactoryUtils.doGetTransactionalResourceHolder(ConnectionFactoryUtils.java:130)\n    at org.springframework.amqp.rabbit.connection.ConnectionFactoryUtils.getTransactionalResourceHolder(ConnectionFactoryUtils.java:67)\n    at org.springframework.amqp.rabbit.core.RabbitTemplate.doExecute(RabbitTemplate.java:1035)\n    at org.springframework.amqp.rabbit.core.RabbitTemplate.execute(RabbitTemplate.java:1028)\n    at org.springframework.amqp.rabbit.core.RabbitTemplate.execute(RabbitTemplate.java:1004)\n    at org.springframework.amqp.rabbit.core.RabbitAdmin.getQueueProperties(RabbitAdmin.java:254)\n    at org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer.redeclareElementsIfNecessary(SimpleMessageListenerContainer.java:963)\n    at org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer.access$300(SimpleMessageListenerContainer.java:83)\n    at org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer$AsyncMessageProcessingConsumer.run(SimpleMessageListenerContainer.java:1081)\n    at java.lang.Thread.run(Thread.java:745)\n09 Jul 2015 14:46:40,328 [DEBUG] [SimpleAsyncTaskExecutor-1] BlockingQueueConsumer    | Starting consumer Consumer: tags=[{}], channel=null, acknowledgeMode=MANUAL local queue size=0\n09 Jul 2015 14:46:45,333 [DEBUG] [SimpleAsyncTaskExecutor-1] SimpleMessageListenerContainer| Recovering consumer in 5000 ms.\n\n09 Jul 2015 14:46:50,402 [WARN ] [SimpleAsyncTaskExecutor-1] SimpleMessageListenerContainer| Consumer raised exception, processing can restart if the connection factory supports it\njava.util.concurrent.TimeoutException\n    at com.rabbitmq.utility.BlockingCell.get(BlockingCell.java:77)\n    at com.rabbitmq.utility.BlockingCell.uninterruptibleGet(BlockingCell.java:111)\n    at com.rabbitmq.utility.BlockingValueOrException.uninterruptibleGetValue(BlockingValueOrException.java:37)\n    at com.rabbitmq.client.impl.AMQChannel$BlockingRpcContinuation.getReply(AMQChannel.java:367)\n    at com.rabbitmq.client.impl.AMQConnection.start(AMQConnection.java:293)\n    at com.rabbitmq.client.ConnectionFactory.newConnection(ConnectionFactory.java:621)\n    at com.rabbitmq.client.ConnectionFactory.newConnection(ConnectionFactory.java:665)\n    at org.springframework.amqp.rabbit.connection.AbstractConnectionFactory.createBareConnection(AbstractConnectionFactory.java:208)\n    at org.springframework.amqp.rabbit.connection.CachingConnectionFactory.createConnection(CachingConnectionFactory.java:444)\n    at org.springframework.amqp.rabbit.connection.ConnectionFactoryUtils$1.createConnection(ConnectionFactoryUtils.java:80)\n    at org.springframework.amqp.rabbit.connection.ConnectionFactoryUtils.doGetTransactionalResourceHolder(ConnectionFactoryUtils.java:130)\n    at org.springframework.amqp.rabbit.connection.ConnectionFactoryUtils.getTransactionalResourceHolder(ConnectionFactoryUtils.java:67)\n    at org.springframework.amqp.rabbit.listener.BlockingQueueConsumer.start(BlockingQueueConsumer.java:434)\n    at org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer$AsyncMessageProcessingConsumer.run(SimpleMessageListenerContainer.java:1083)\n    at java.lang.Thread.run(Thread.java:745)\n09 Jul 2015 14:46:50,403 [INFO ] [SimpleAsyncTaskExecutor-1] SimpleMessageListenerContainer| Restarting Consumer: tags=[{}], channel=null, acknowledgeMode=MANUAL local queue size=0\n09 Jul 2015 14:46:50,403 [DEBUG] [SimpleAsyncTaskExecutor-1] BlockingQueueConsumer    | Closing Rabbit Channel: null\n</code></pre>\n"},{"tags":["java","maven","jar","pom.xml","maven-shade-plugin"],"answers":[{"tags":[],"owner":{"account_id":888714,"reputation":34077,"user_id":927493,"accept_rate":61,"display_name":"J Fabian Meier"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1635417203,"creation_date":1635417203,"answer_id":69752504,"question_id":69752009,"body_markdown":"Parents POM need to have the packaging `pom`. You cannot have a parent POM with packaging `jar`.","title":"Get the version from child in the parent POM in Maven","body":"<p>Parents POM need to have the packaging <code>pom</code>. You cannot have a parent POM with packaging <code>jar</code>.</p>\n"}],"owner":{"account_id":22131948,"reputation":25,"user_id":16383352,"display_name":"lulu3131"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":175,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1635417203,"creation_date":1635415195,"question_id":69752009,"body_markdown":"I have a parent pom A with children pom B, C and D. In the B, C and D, I have dependencies with the same type.\r\n\r\nie Parent Pom\r\n\r\n    &lt;artifactID&gt;blah&lt;/artifactID&gt;\r\n    &lt;packaging&gt;pom&lt;/packaging&gt;\r\n        &lt;modules&gt;\r\n            &lt;module&gt;B&lt;/module&gt;\r\n            &lt;module&gt;C&lt;/module&gt;\r\n            &lt;module&gt;D&lt;/module&gt;\r\n        &lt;/modules&gt;\r\n\r\nI have a parent pom A with children pom B, C and D. In the B, C and D, I have dependencies with the same type.\r\n\r\nie Parent Pom\r\n\r\n    &lt;artifactID&gt;blah&lt;/artifactID&gt;\r\n    &lt;modules&gt;\r\n        &lt;module&gt;B&lt;/module&gt;\r\n        &lt;module&gt;C&lt;/module&gt;\r\n        &lt;module&gt;D&lt;/module&gt;\r\n    &lt;/modules&gt;\r\nchild Pom\r\n\r\n    &lt;build&gt;\r\n    \t\t&lt;plugins&gt;\r\n    \t      &lt;plugin&gt;\r\n    \t        &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n    \t        &lt;artifactId&gt;maven-shade-plugin&lt;/artifactId&gt;\r\n    \t        &lt;executions&gt;\r\n    \t          &lt;execution&gt;\r\n    \t            &lt;phase&gt;package&lt;/phase&gt;\r\n    \t            &lt;goals&gt;\r\n    \t              &lt;goal&gt;shade&lt;/goal&gt;\r\n    \t            &lt;/goals&gt;\r\n    \t            &lt;configuration&gt;\r\n    \t              &lt;finalName&gt;${project.artifactId}&lt;/finalName&gt;\r\n    \t              &lt;transformers&gt;\r\n    \t                &lt;transformer implementation=&quot;org.apache.maven.plugins.shade.resource.ManifestResourceTransformer&quot;&gt;\r\n    \t                  &lt;manifestEntries&gt;\r\n    \t                    &lt;Child1Version&gt;${project.version}&lt;/Child1Version&gt; &lt;!-- How to do this generic for any child pom ???? --&gt;\r\n    \t                  &lt;/manifestEntries&gt;\r\n    \t                &lt;/transformer&gt;\r\n    \t                &lt;transformer implementation=&quot;org.apache.maven.plugins.shade.resource.AppendingTransformer&quot;&gt;\r\n    \t\t\t\t\t\t&lt;resource&gt;META-INF/spring.handlers&lt;/resource&gt;\r\n    \t\t\t\t\t&lt;/transformer&gt;\r\n    \t\t\t\t\t&lt;transformer implementation=&quot;org.apache.maven.plugins.shade.resource.AppendingTransformer&quot;&gt;\r\n    \t\t\t\t\t\t&lt;resource&gt;META-INF/spring.schemas&lt;/resource&gt;\r\n    \t\t\t\t\t&lt;/transformer&gt;\r\n    \t              &lt;/transformers&gt;\r\n    \t            &lt;/configuration&gt;\r\n    \t          &lt;/execution&gt;\r\n    \t        &lt;/executions&gt;\r\n    \t      &lt;/plugin&gt;\r\n    \t\t&lt;/plugins&gt;\r\n    \t&lt;/build&gt;\r\n\r\nMy question I want to change parent pom package pom to jar and get all build child and put it in parent pom and get child version to parent pom. for each child. How can i do this ?","title":"Get the version from child in the parent POM in Maven","body":"<p>I have a parent pom A with children pom B, C and D. In the B, C and D, I have dependencies with the same type.</p>\n<p>ie Parent Pom</p>\n<pre><code>&lt;artifactID&gt;blah&lt;/artifactID&gt;\n&lt;packaging&gt;pom&lt;/packaging&gt;\n    &lt;modules&gt;\n        &lt;module&gt;B&lt;/module&gt;\n        &lt;module&gt;C&lt;/module&gt;\n        &lt;module&gt;D&lt;/module&gt;\n    &lt;/modules&gt;\n</code></pre>\n<p>I have a parent pom A with children pom B, C and D. In the B, C and D, I have dependencies with the same type.</p>\n<p>ie Parent Pom</p>\n<pre><code>&lt;artifactID&gt;blah&lt;/artifactID&gt;\n&lt;modules&gt;\n    &lt;module&gt;B&lt;/module&gt;\n    &lt;module&gt;C&lt;/module&gt;\n    &lt;module&gt;D&lt;/module&gt;\n&lt;/modules&gt;\n</code></pre>\n<p>child Pom</p>\n<pre><code>&lt;build&gt;\n        &lt;plugins&gt;\n          &lt;plugin&gt;\n            &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n            &lt;artifactId&gt;maven-shade-plugin&lt;/artifactId&gt;\n            &lt;executions&gt;\n              &lt;execution&gt;\n                &lt;phase&gt;package&lt;/phase&gt;\n                &lt;goals&gt;\n                  &lt;goal&gt;shade&lt;/goal&gt;\n                &lt;/goals&gt;\n                &lt;configuration&gt;\n                  &lt;finalName&gt;${project.artifactId}&lt;/finalName&gt;\n                  &lt;transformers&gt;\n                    &lt;transformer implementation=&quot;org.apache.maven.plugins.shade.resource.ManifestResourceTransformer&quot;&gt;\n                      &lt;manifestEntries&gt;\n                        &lt;Child1Version&gt;${project.version}&lt;/Child1Version&gt; &lt;!-- How to do this generic for any child pom ???? --&gt;\n                      &lt;/manifestEntries&gt;\n                    &lt;/transformer&gt;\n                    &lt;transformer implementation=&quot;org.apache.maven.plugins.shade.resource.AppendingTransformer&quot;&gt;\n                        &lt;resource&gt;META-INF/spring.handlers&lt;/resource&gt;\n                    &lt;/transformer&gt;\n                    &lt;transformer implementation=&quot;org.apache.maven.plugins.shade.resource.AppendingTransformer&quot;&gt;\n                        &lt;resource&gt;META-INF/spring.schemas&lt;/resource&gt;\n                    &lt;/transformer&gt;\n                  &lt;/transformers&gt;\n                &lt;/configuration&gt;\n              &lt;/execution&gt;\n            &lt;/executions&gt;\n          &lt;/plugin&gt;\n        &lt;/plugins&gt;\n    &lt;/build&gt;\n</code></pre>\n<p>My question I want to change parent pom package pom to jar and get all build child and put it in parent pom and get child version to parent pom. for each child. How can i do this ?</p>\n"},{"tags":["java","apache-spark"],"comments":[{"owner":{"account_id":3859079,"reputation":2069,"user_id":3197244,"accept_rate":50,"display_name":"jgp"},"score":1,"creation_date":1635330867,"post_id":69733066,"comment_id":123267012,"body_markdown":"Would be better if you put the text of your error in your post rather than an external link. If you’d do that as a more seasoned SO users, you would probably be sacked.","body":"Would be better if you put the text of your error in your post rather than an external link. If you’d do that as a more seasoned SO users, you would probably be sacked."},{"owner":{"account_id":3859079,"reputation":2069,"user_id":3197244,"accept_rate":50,"display_name":"jgp"},"score":1,"creation_date":1635330879,"post_id":69733066,"comment_id":123267017,"body_markdown":"Add to your post: version of Java, version of Scala, version of Spark, version of windows, what have you done/tried so far…","body":"Add to your post: version of Java, version of Scala, version of Spark, version of windows, what have you done/tried so far…"},{"owner":{"account_id":23156046,"reputation":23,"user_id":17257284,"display_name":"hooch"},"score":0,"creation_date":1635375359,"post_id":69733066,"comment_id":123284471,"body_markdown":"Hi jgp  thank you for your advice. java version &quot;17.0.1&quot; 2021-10-19 LTS\nJava(TM) SE Runtime Environment (build 17.0.1+12-LTS-39)\nJava HotSpot(TM) 64-Bit Server VM (build 17.0.1+12-LTS-39, mixed mode, sharing)  Windows 11/ spark-3.2.0-bin-hadoop3.2","body":"Hi jgp  thank you for your advice. java version &quot;17.0.1&quot; 2021-10-19 LTS Java(TM) SE Runtime Environment (build 17.0.1+12-LTS-39) Java HotSpot(TM) 64-Bit Server VM (build 17.0.1+12-LTS-39, mixed mode, sharing)  Windows 11/ spark-3.2.0-bin-hadoop3.2"},{"owner":{"account_id":23156046,"reputation":23,"user_id":17257284,"display_name":"hooch"},"score":0,"creation_date":1635375571,"post_id":69733066,"comment_id":123284520,"body_markdown":"java.lang.IllegalAccessError: class org.apache.spark.storage.StorageUtils$ (in unnamed module @0x6f27a732) cannot access class sun.nio.ch.DirectBuffer (in module java.base) because module java.base does not export sun.nio.ch to unnamed module @0x6f27a732","body":"java.lang.IllegalAccessError: class org.apache.spark.storage.StorageUtils$ (in unnamed module @0x6f27a732) cannot access class sun.nio.ch.DirectBuffer (in module java.base) because module java.base does not export sun.nio.ch to unnamed module @0x6f27a732"},{"owner":{"account_id":23156046,"reputation":23,"user_id":17257284,"display_name":"hooch"},"score":0,"creation_date":1635375591,"post_id":69733066,"comment_id":123284525,"body_markdown":"&lt;console&gt;:14: error: not found: value spark\n       import spark.implicits._\n              ^\n&lt;console&gt;:14: error: not found: value spark\n       import spark.sql\n              ^","body":"&lt;console&gt;:14: error: not found: value spark        import spark.implicits._               ^ &lt;console&gt;:14: error: not found: value spark        import spark.sql               ^"},{"owner":{"account_id":3859079,"reputation":2069,"user_id":3197244,"accept_rate":50,"display_name":"jgp"},"score":1,"creation_date":1635416444,"post_id":69733066,"comment_id":123294727,"body_markdown":"Do not add comments, modify your questions so there is a synthetic view of your isssues. Basically, don’t answer my questions, create a better question…","body":"Do not add comments, modify your questions so there is a synthetic view of your isssues. Basically, don’t answer my questions, create a better question…"},{"owner":{"account_id":23156046,"reputation":23,"user_id":17257284,"display_name":"hooch"},"score":0,"creation_date":1635556454,"post_id":69733066,"comment_id":123338021,"body_markdown":"Hi jgp  I have tried out with Java 8 and spark-3.1.2-bin-hadoop2.7 and it worked !!","body":"Hi jgp  I have tried out with Java 8 and spark-3.1.2-bin-hadoop2.7 and it worked !!"},{"owner":{"account_id":3859079,"reputation":2069,"user_id":3197244,"accept_rate":50,"display_name":"jgp"},"score":0,"creation_date":1635567495,"post_id":69733066,"comment_id":123339169,"body_markdown":"Thanks for confirming! Now, you have to upvote my answer and say it’s the right answer ;)","body":"Thanks for confirming! Now, you have to upvote my answer and say it’s the right answer ;)"}],"answers":[{"tags":[],"owner":{"account_id":3859079,"reputation":2069,"user_id":3197244,"accept_rate":50,"display_name":"jgp"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1635417132,"creation_date":1635416787,"answer_id":69752409,"question_id":69733066,"body_markdown":"(See my comments above, but here is my answer)\r\n\r\nAs Spark relies on Scala (but you don’t have to use Scala yourself) you are dependent on the **version** of the JVM used by Scala, which in your situation is Java 8 or 11, not 17.\r\n\r\nCheck out https://spark.apache.org/docs/latest/ for more details. \r\n\r\nInstall Java 8 or 11, point your JAVA_HOME to the right directory, and run Spark again.","title":"Apache Spark installation with Java Error","body":"<p>(See my comments above, but here is my answer)</p>\n<p>As Spark relies on Scala (but you don’t have to use Scala yourself) you are dependent on the <strong>version</strong> of the JVM used by Scala, which in your situation is Java 8 or 11, not 17.</p>\n<p>Check out <a href=\"https://spark.apache.org/docs/latest/\" rel=\"nofollow noreferrer\">https://spark.apache.org/docs/latest/</a> for more details.</p>\n<p>Install Java 8 or 11, point your JAVA_HOME to the right directory, and run Spark again.</p>\n"}],"owner":{"account_id":23156046,"reputation":23,"user_id":17257284,"display_name":"hooch"},"comment_count":8,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":969,"favorite_count":0,"down_vote_count":1,"up_vote_count":2,"accepted_answer_id":69752409,"answer_count":1,"score":1,"last_activity_date":1635417132,"creation_date":1635311518,"question_id":69733066,"body_markdown":"Hi I am having a problem to install spark on my PC having the Java error below.\r\nWould you help me and give me tips how to fix it?\r\n\r\n\r\nThanks millions in advance\r\n\r\n[enter image description here][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/KuTnD.png","title":"Apache Spark installation with Java Error","body":"<p>Hi I am having a problem to install spark on my PC having the Java error below.\nWould you help me and give me tips how to fix it?</p>\n<p>Thanks millions in advance</p>\n<p><a href=\"https://i.stack.imgur.com/KuTnD.png\" rel=\"nofollow noreferrer\">enter image description here</a></p>\n"},{"tags":["java","soap"],"comments":[{"owner":{"account_id":1075172,"reputation":5519,"user_id":1073487,"display_name":"Red Boy"},"score":0,"creation_date":1553235793,"post_id":55293068,"comment_id":97316418,"body_markdown":"Seems like its an URL path issue, by the way add your URL and connection information if possible.","body":"Seems like its an URL path issue, by the way add your URL and connection information if possible."},{"owner":{"account_id":10011830,"reputation":87,"user_id":7404455,"display_name":"Touqeer"},"score":0,"creation_date":1553237475,"post_id":55293068,"comment_id":97316950,"body_markdown":"If it is a path issue then why it is working fine with JDK 1.7?","body":"If it is a path issue then why it is working fine with JDK 1.7?"},{"owner":{"account_id":10011830,"reputation":87,"user_id":7404455,"display_name":"Touqeer"},"score":0,"creation_date":1553256902,"post_id":55293068,"comment_id":97327108,"body_markdown":"Added my code @RedBoy","body":"Added my code @RedBoy"}],"answers":[{"tags":[],"owner":{"account_id":9048335,"reputation":524,"user_id":6739589,"display_name":"Harshana"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1553298335,"creation_date":1553236662,"answer_id":55294134,"question_id":55293068,"body_markdown":"In SSLContext you can setup your own SSlContext TSLv1 or SSLv2 then call sslContext.init with trusted certificates. And, add it to your HttpsURLConnection as the DefaultSSLSocketFactory.\r\n\r\n    System.setProperty (&quot;jsse.enableSNIExtension&quot;, &quot;false&quot;);\r\n\r\n    SSLContext sslContext = SSLContext.getInstance(&quot;SSL&quot;);\r\n    TrustManager[] trustManager = getTrustManager();\r\n    sslContext.init(null, trustManager, new SecureRandom());\r\n    HttpsURLConnection.setDefaultSSLSocketFactory(sslContext.getSocketFactory());\r\n\r\n    HostnameVerifier hostNameVerifier = new HostnameVerifier() {\r\n\t\tpublic boolean verify(String hostname, SSLSession session) {\r\n\t\t\treturn true;\r\n\t\t}\r\n\t};\r\n\r\n\tHttpsURLConnection.setDefaultHostnameVerifier(hostNameVerifier);","title":"com.sun.xml.internal.ws.client.ClientTransportException: HTTP transport error: java.net.SocketException: Connection reset","body":"<p>In SSLContext you can setup your own SSlContext TSLv1 or SSLv2 then call sslContext.init with trusted certificates. And, add it to your HttpsURLConnection as the DefaultSSLSocketFactory.</p>\n\n<pre><code>System.setProperty (\"jsse.enableSNIExtension\", \"false\");\n\nSSLContext sslContext = SSLContext.getInstance(\"SSL\");\nTrustManager[] trustManager = getTrustManager();\nsslContext.init(null, trustManager, new SecureRandom());\nHttpsURLConnection.setDefaultSSLSocketFactory(sslContext.getSocketFactory());\n\nHostnameVerifier hostNameVerifier = new HostnameVerifier() {\n    public boolean verify(String hostname, SSLSession session) {\n        return true;\n    }\n};\n\nHttpsURLConnection.setDefaultHostnameVerifier(hostNameVerifier);\n</code></pre>\n"}],"owner":{"account_id":10011830,"reputation":87,"user_id":7404455,"display_name":"Touqeer"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":1904,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1635416968,"creation_date":1553229997,"question_id":55293068,"body_markdown":"A client developed in Java using JDK 1.6. I am consuming API in the java code. Whenever I hit this API from soapui or from JDK 1.7 it is working perfectly fine but when I tried to hit this API using JDK 1.6, it is returning the error. \r\n`com.sun.xml.internal.ws.client.ClientTransportException: HTTP transport error: java.net.SocketException: Connection reset`\r\n\r\nI have tried by developing client using WSDL and using HTTPSURLConnection, with both mechanism, I am getting the same error. It seems there is nothing wrong with the code. I am unable to find out the way for the resolution. \r\n\r\nWireshark Result:\r\nWhen I ran the jar from JDK 1.7, I can see the result in Wireshark, the protocol is TSLv1 but when I tried to run the jar from 1.6, the protocol has been changed to SSLv2. \r\nIs it possible to change protocol in the code or on the system where we are calling jar?\r\n\r\nHere is my code:\r\n\r\n```` java\r\npublic String myFun(String sender) throws IOException, \r\nNoSuchAlgorithmException, KeyManagementException{\r\n   \r\n    \r\n    SSLContext sslContext = SSLContext.getInstance(&quot;SSL&quot;);\r\n    TrustManager[] trustManager = getTrustManager();\r\n    sslContext.init(null, trustManager, new SecureRandom());\r\n    HttpsURLConnection.setDefaultSSLSocketFactory(sslContext.getSocketFactory());\r\n\r\n    try{\r\n            String inquiryRequest = inquiryRequest = &quot;&lt;soapenv:Envelope xmlns:soapenv=\\&quot;http://schemas.xmlsoap.org/soap/envelope/\\&quot; xmlns:v5=\\&quot;http://xxxxxxx\\&quot;&gt;\\n&quot; \r\n                    +&quot;&lt;soapenv:Header&gt;\\n&quot; \r\n                    +&quot;&lt;/soapenv:Header&gt;\\n&quot; \r\n                    +&quot;&lt;soapenv:Body&gt;\\n&quot; \r\n                    +&quot;&lt;v5:single.smsReq&gt;\\n&quot; \r\n                    +&quot;&lt;sender&gt;&quot;+sender+&quot;&lt;/sender&gt;\\n&quot; \r\n                    +&quot;&lt;/v5:single.smsReq&gt;\\n&quot; \r\n                    +&quot;&lt;/soapenv:Body&gt;\\n&quot; \r\n                    +&quot;&lt;/soapenv:Envelope&gt;&quot;;\r\n            \r\n            URL url =new URL (&quot;https://xxxx:xx/xx&quot;);\r\n            HttpsURLConnection conn = (HttpsURLConnection) url.openConnection();\r\n\r\n            conn.setRequestMethod(&quot;POST&quot;);\r\n            conn.setRequestProperty(&quot;content-type&quot;,&quot;application/xml&quot;);\r\n            conn.setRequestProperty(&quot;Authorization&quot;,&quot;Basic xxx&quot;);\r\n            conn.setDoOutput(true);\r\n            DataOutputStream wr = new DataOutputStream(conn.getOutputStream());\r\n                wr.writeBytes(inquiryRequest);\r\n                wr.flush();\r\n                wr.close();\r\n\r\n            BufferedReader in = new BufferedReader( new InputStreamReader(conn.getInputStream()));\r\n            String inputLine;\r\n            StringBuilder response = new StringBuilder();\r\n                while ((inputLine = in.readLine()) != null) {\r\n                        response.append(inputLine);\r\n                }\r\n                in.close();\r\n                conn.disconnect();\r\n        \r\n            return response.toString();\r\n                 \r\n    }catch(Exception e){\r\n        return null;\r\n    } \r\n    \r\n}\r\nprivate TrustManager[] getTrustManager() {\r\n    TrustManager[] certs = new TrustManager[] { new X509TrustManager() {\r\n        public X509Certificate[] getAcceptedIssuers() {\r\n            return null;\r\n        }\r\n        public void checkClientTrusted(X509Certificate[] certs, String t) {\r\n        }\r\n        public void checkServerTrusted(X509Certificate[] certs, String t) {\r\n        }\r\n    }\r\n    };\r\n    return certs;\r\n}\r\n````","title":"com.sun.xml.internal.ws.client.ClientTransportException: HTTP transport error: java.net.SocketException: Connection reset","body":"<p>A client developed in Java using JDK 1.6. I am consuming API in the java code. Whenever I hit this API from soapui or from JDK 1.7 it is working perfectly fine but when I tried to hit this API using JDK 1.6, it is returning the error.\n<code>com.sun.xml.internal.ws.client.ClientTransportException: HTTP transport error: java.net.SocketException: Connection reset</code></p>\n<p>I have tried by developing client using WSDL and using HTTPSURLConnection, with both mechanism, I am getting the same error. It seems there is nothing wrong with the code. I am unable to find out the way for the resolution.</p>\n<p>Wireshark Result:\nWhen I ran the jar from JDK 1.7, I can see the result in Wireshark, the protocol is TSLv1 but when I tried to run the jar from 1.6, the protocol has been changed to SSLv2.\nIs it possible to change protocol in the code or on the system where we are calling jar?</p>\n<p>Here is my code:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public String myFun(String sender) throws IOException, \nNoSuchAlgorithmException, KeyManagementException{\n   \n    \n    SSLContext sslContext = SSLContext.getInstance(&quot;SSL&quot;);\n    TrustManager[] trustManager = getTrustManager();\n    sslContext.init(null, trustManager, new SecureRandom());\n    HttpsURLConnection.setDefaultSSLSocketFactory(sslContext.getSocketFactory());\n\n    try{\n            String inquiryRequest = inquiryRequest = &quot;&lt;soapenv:Envelope xmlns:soapenv=\\&quot;http://schemas.xmlsoap.org/soap/envelope/\\&quot; xmlns:v5=\\&quot;http://xxxxxxx\\&quot;&gt;\\n&quot; \n                    +&quot;&lt;soapenv:Header&gt;\\n&quot; \n                    +&quot;&lt;/soapenv:Header&gt;\\n&quot; \n                    +&quot;&lt;soapenv:Body&gt;\\n&quot; \n                    +&quot;&lt;v5:single.smsReq&gt;\\n&quot; \n                    +&quot;&lt;sender&gt;&quot;+sender+&quot;&lt;/sender&gt;\\n&quot; \n                    +&quot;&lt;/v5:single.smsReq&gt;\\n&quot; \n                    +&quot;&lt;/soapenv:Body&gt;\\n&quot; \n                    +&quot;&lt;/soapenv:Envelope&gt;&quot;;\n            \n            URL url =new URL (&quot;https://xxxx:xx/xx&quot;);\n            HttpsURLConnection conn = (HttpsURLConnection) url.openConnection();\n\n            conn.setRequestMethod(&quot;POST&quot;);\n            conn.setRequestProperty(&quot;content-type&quot;,&quot;application/xml&quot;);\n            conn.setRequestProperty(&quot;Authorization&quot;,&quot;Basic xxx&quot;);\n            conn.setDoOutput(true);\n            DataOutputStream wr = new DataOutputStream(conn.getOutputStream());\n                wr.writeBytes(inquiryRequest);\n                wr.flush();\n                wr.close();\n\n            BufferedReader in = new BufferedReader( new InputStreamReader(conn.getInputStream()));\n            String inputLine;\n            StringBuilder response = new StringBuilder();\n                while ((inputLine = in.readLine()) != null) {\n                        response.append(inputLine);\n                }\n                in.close();\n                conn.disconnect();\n        \n            return response.toString();\n                 \n    }catch(Exception e){\n        return null;\n    } \n    \n}\nprivate TrustManager[] getTrustManager() {\n    TrustManager[] certs = new TrustManager[] { new X509TrustManager() {\n        public X509Certificate[] getAcceptedIssuers() {\n            return null;\n        }\n        public void checkClientTrusted(X509Certificate[] certs, String t) {\n        }\n        public void checkServerTrusted(X509Certificate[] certs, String t) {\n        }\n    }\n    };\n    return certs;\n}\n</code></pre>\n"},{"tags":["java","spring-boot","spring-data-jpa"],"comments":[{"owner":{"account_id":17181007,"reputation":2283,"user_id":12436427,"display_name":"b.GHILAS"},"score":0,"creation_date":1635413557,"post_id":69751580,"comment_id":123293453,"body_markdown":"Post your code here instead of attachments and images, it&#39;ll be more efficient and simple for us to test your code and help you","body":"Post your code here instead of attachments and images, it&#39;ll be more efficient and simple for us to test your code and help you"}],"answers":[{"tags":[],"owner":{"account_id":17181007,"reputation":2283,"user_id":12436427,"display_name":"b.GHILAS"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1635416822,"creation_date":1635416205,"answer_id":69752266,"question_id":69751580,"body_markdown":"You have two options here, you can use get the students from the database.\r\n```\r\nList&lt;Student&gt; students = studentRepository.findAll();\r\n```\r\nThis will load the other entities (room, gender and branch) by issuing other queries and this will lead to the famous problem `N+1 queries`\r\n\r\nSo to load all the entities in one go, use `entity graphs` or `fetch join`\r\n\r\n```\r\n@Query(value = &quot;SELECT st FROM Student st INNER JOIN FETCH st.branch b INNER JOIN FETCH st.gender g INNER JOIN FETCH st.room r&quot;)\r\nList&lt;Student&gt; fetchStudentDataJoinTable();\r\n```\r\n\r\n**Note**: If the properties (`room`, `gender` and `branch`) can be `null` in student then use `left join` instead of `inner join`. ","title":"How to get data when query select inner join many table in Spring Data JPA","body":"<p>You have two options here, you can use get the students from the database.</p>\n<pre><code>List&lt;Student&gt; students = studentRepository.findAll();\n</code></pre>\n<p>This will load the other entities (room, gender and branch) by issuing other queries and this will lead to the famous problem <code>N+1 queries</code></p>\n<p>So to load all the entities in one go, use <code>entity graphs</code> or <code>fetch join</code></p>\n<pre><code>@Query(value = &quot;SELECT st FROM Student st INNER JOIN FETCH st.branch b INNER JOIN FETCH st.gender g INNER JOIN FETCH st.room r&quot;)\nList&lt;Student&gt; fetchStudentDataJoinTable();\n</code></pre>\n<p><strong>Note</strong>: If the properties (<code>room</code>, <code>gender</code> and <code>branch</code>) can be <code>null</code> in student then use <code>left join</code> instead of <code>inner join</code>.</p>\n"}],"owner":{"account_id":23169536,"reputation":23,"user_id":17268973,"display_name":"TamDV"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1594,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":69752266,"answer_count":1,"score":1,"last_activity_date":1635416822,"creation_date":1635413474,"question_id":69751580,"body_markdown":"This is my project. I having problem, I want to get data from table Student join many table branch, room, and gender use annotation @Query as site query in the image MySql\r\n\r\n[This is query with statement MySql][1]\r\n\r\n\r\n[This is code I want to use @Query in Spring Data JPA with purpose get data when join many table][2]\r\n\r\n\r\nAfter I call API, It notify error\r\n[This is error][3] \r\n\r\n\r\n  [1]: https://i.stack.imgur.com/9UMEd.png\r\n  [2]: https://i.stack.imgur.com/w6gJS.png\r\n  [3]: https://i.stack.imgur.com/6K0bX.png\r\n\r\nI need to support, this is my project:\r\nhttps://github.com/daovantam0410/quan-ly-dao-tao","title":"How to get data when query select inner join many table in Spring Data JPA","body":"<p>This is my project. I having problem, I want to get data from table Student join many table branch, room, and gender use annotation @Query as site query in the image MySql</p>\n<p><a href=\"https://i.stack.imgur.com/9UMEd.png\" rel=\"nofollow noreferrer\">This is query with statement MySql</a></p>\n<p><a href=\"https://i.stack.imgur.com/w6gJS.png\" rel=\"nofollow noreferrer\">This is code I want to use @Query in Spring Data JPA with purpose get data when join many table</a></p>\n<p>After I call API, It notify error\n<a href=\"https://i.stack.imgur.com/6K0bX.png\" rel=\"nofollow noreferrer\">This is error</a></p>\n<p>I need to support, this is my project:\n<a href=\"https://github.com/daovantam0410/quan-ly-dao-tao\" rel=\"nofollow noreferrer\">https://github.com/daovantam0410/quan-ly-dao-tao</a></p>\n"},{"tags":["java","postgresql","hibernate","spring-boot","spring-data-jpa"],"comments":[{"owner":{"account_id":10212015,"reputation":1812,"user_id":7538821,"accept_rate":100,"display_name":"sam"},"score":0,"creation_date":1525853742,"post_id":50247894,"comment_id":87514434,"body_markdown":"Post your entire logtrace.","body":"Post your entire logtrace."},{"owner":{"account_id":10212015,"reputation":1812,"user_id":7538821,"accept_rate":100,"display_name":"sam"},"score":0,"creation_date":1525937601,"post_id":50247894,"comment_id":87553319,"body_markdown":"did your problem got solved?","body":"did your problem got solved?"},{"owner":{"account_id":10212015,"reputation":1812,"user_id":7538821,"accept_rate":100,"display_name":"sam"},"score":0,"creation_date":1525937758,"post_id":50247894,"comment_id":87553399,"body_markdown":"post you DAO classes and service classes in the question.","body":"post you DAO classes and service classes in the question."},{"owner":{"account_id":10212015,"reputation":1812,"user_id":7538821,"accept_rate":100,"display_name":"sam"},"score":0,"creation_date":1532712283,"post_id":50247894,"comment_id":90092402,"body_markdown":"You have an answer to accept.","body":"You have an answer to accept."}],"answers":[{"tags":[],"owner":{"account_id":10212015,"reputation":1812,"user_id":7538821,"accept_rate":100,"display_name":"sam"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1525937693,"creation_date":1525852512,"answer_id":50248267,"question_id":50247894,"body_markdown":"You missed `@JoinColumn`. You will get another error due to field based access. Use Property based access instead:\r\n\r\n    import javax.persistence.*;\r\n\r\n    @Entity\r\n    @Table(name = &quot;subcomment&quot;)\r\n    public class SubComment implements Serializable {\r\n        \r\n        private static final long serialVersionUID = -3009157732242241606L;\r\n\r\n        private long id;\r\n        private String text;\r\n        private Comment comment;\r\n    \r\n        @Id\r\n        @Column(name = &quot;sub_id&quot;)\r\n        @GeneratedValue(strategy = GenerationType.AUTO)\r\n        public long getId() {\r\n            return id;\r\n        }\r\n    \r\n        public void setId(long id) {\r\n            this.id = id;\r\n        }\r\n    \r\n        @Basic\r\n        @Column(name = &quot;sub_text&quot;)\r\n        public String getText() {\r\n            return text;\r\n        }\r\n    \r\n        public void setText(String text) {\r\n            this.text = text;\r\n        }\r\n    \r\n        @ManyToOne\r\n        @JoinColumn(name = &quot;sub_fk_c_id&quot;, referencedColumnName = &quot;c_id&quot;) // here the exact field name of your comment id in your DB\r\n        public Comment getComment() {\r\n            return comment;\r\n        }\r\n    \r\n        public void setComment(Comment comment) {\r\n            this.comment = comment;\r\n        }\r\n    }\r\n\r\nAlso make changes here too:\r\n\r\n    import javax.persistence.*;\r\n\r\n    @Entity\r\n    @Table(name = &quot;comment&quot;)\r\n    public class Comment implements Serializable {\r\n\r\n        private static final long serialVersionUID = -3009157732242241606L;    \r\n\r\n        private long id;\r\n        private String text;\r\n        private Set&lt;SubComment&gt; subComment = new HashSet&lt;&gt;();\r\n    \r\n        @OneToMany(mappedBy = &quot;comment&quot;, targetEntity = SubComment.class)\r\n        public Set&lt;SubComment&gt; getSubComment() {\r\n            return subComment;\r\n        }\r\n    \r\n        public void setSubComment(Set&lt;SubComment&gt; subComment) {\r\n            this.subComment = subComment;\r\n        }\r\n    \r\n        @Id\r\n        @Column(name = &quot;c_id&quot;)\r\n        @GeneratedValue(strategy = GenerationType.AUTO)\r\n        public long getId() {\r\n            return id;\r\n        }\r\n    \r\n        public void setId(long id) {\r\n            this.id = id;\r\n        }\r\n    \r\n        @Basic\r\n        @Column(name = &quot;c_text&quot;)\r\n        public String getText() {\r\n            return text;\r\n        }\r\n    \r\n        public void setText(String text) {\r\n            this.text = text;\r\n        }\r\n    }\r\n\r\nPaste the following in your `application.properties` file:\r\n\r\n    spring.jpa.properties.hibernate.id.new_generator_mappings = false\r\n    spring.jpa.properties.hibernate.format_sql = true\r\n    logging.level.org.hibernate.SQL=DEBUG\r\n    logging.level.org.hibernate.type.descriptor.sql.BasicBinder=TRACE\r\n    spring.jpa.hibernate.ddl-auto=create\r\n\r\nIn your pom.xml file paste these:\r\n\r\n        &lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.postgresql&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;postgresql&lt;/artifactId&gt;\r\n\t\t\t&lt;scope&gt;runtime&lt;/scope&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\n\r\nFor further reference see [this stackoverflow post][1].\r\n\r\n\r\n  [1]: https://stackoverflow.com/a/44055520/7538821\r\n","title":"Spring Boot &amp; Postgres: relation &quot;sub_comment&quot; does not exist","body":"<p>You missed <code>@JoinColumn</code>. You will get another error due to field based access. Use Property based access instead:</p>\n\n<pre><code>import javax.persistence.*;\n\n@Entity\n@Table(name = \"subcomment\")\npublic class SubComment implements Serializable {\n\n    private static final long serialVersionUID = -3009157732242241606L;\n\n    private long id;\n    private String text;\n    private Comment comment;\n\n    @Id\n    @Column(name = \"sub_id\")\n    @GeneratedValue(strategy = GenerationType.AUTO)\n    public long getId() {\n        return id;\n    }\n\n    public void setId(long id) {\n        this.id = id;\n    }\n\n    @Basic\n    @Column(name = \"sub_text\")\n    public String getText() {\n        return text;\n    }\n\n    public void setText(String text) {\n        this.text = text;\n    }\n\n    @ManyToOne\n    @JoinColumn(name = \"sub_fk_c_id\", referencedColumnName = \"c_id\") // here the exact field name of your comment id in your DB\n    public Comment getComment() {\n        return comment;\n    }\n\n    public void setComment(Comment comment) {\n        this.comment = comment;\n    }\n}\n</code></pre>\n\n<p>Also make changes here too:</p>\n\n<pre><code>import javax.persistence.*;\n\n@Entity\n@Table(name = \"comment\")\npublic class Comment implements Serializable {\n\n    private static final long serialVersionUID = -3009157732242241606L;    \n\n    private long id;\n    private String text;\n    private Set&lt;SubComment&gt; subComment = new HashSet&lt;&gt;();\n\n    @OneToMany(mappedBy = \"comment\", targetEntity = SubComment.class)\n    public Set&lt;SubComment&gt; getSubComment() {\n        return subComment;\n    }\n\n    public void setSubComment(Set&lt;SubComment&gt; subComment) {\n        this.subComment = subComment;\n    }\n\n    @Id\n    @Column(name = \"c_id\")\n    @GeneratedValue(strategy = GenerationType.AUTO)\n    public long getId() {\n        return id;\n    }\n\n    public void setId(long id) {\n        this.id = id;\n    }\n\n    @Basic\n    @Column(name = \"c_text\")\n    public String getText() {\n        return text;\n    }\n\n    public void setText(String text) {\n        this.text = text;\n    }\n}\n</code></pre>\n\n<p>Paste the following in your <code>application.properties</code> file:</p>\n\n<pre><code>spring.jpa.properties.hibernate.id.new_generator_mappings = false\nspring.jpa.properties.hibernate.format_sql = true\nlogging.level.org.hibernate.SQL=DEBUG\nlogging.level.org.hibernate.type.descriptor.sql.BasicBinder=TRACE\nspring.jpa.hibernate.ddl-auto=create\n</code></pre>\n\n<p>In your pom.xml file paste these:</p>\n\n<pre><code>    &lt;dependency&gt;\n        &lt;groupId&gt;org.postgresql&lt;/groupId&gt;\n        &lt;artifactId&gt;postgresql&lt;/artifactId&gt;\n        &lt;scope&gt;runtime&lt;/scope&gt;\n    &lt;/dependency&gt;\n</code></pre>\n\n<p>For further reference see <a href=\"https://stackoverflow.com/a/44055520/7538821\">this stackoverflow post</a>.</p>\n"},{"tags":[],"owner":{"account_id":6142005,"reputation":180,"user_id":4789134,"display_name":"Dawid Kubicki"},"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1525856153,"creation_date":1525855659,"answer_id":50249116,"question_id":50247894,"body_markdown":"Many sub comments have belonged to one comment and model should look like that (comment_id you can generate e.g UUID.randomUUID().toString() )\r\n\r\n    @Entity\r\n    @Table(name = &quot;comment&quot;)\r\n    public class Comment{\r\n\r\n    @Id\r\n\t@GeneratedValue(strategy = GenerationType.IDENTITY)\r\n\tprivate Long id;\r\n\r\n    @Column(name = &quot;comment_id&quot;)\r\n    String commentId;\r\n    \r\n    }\r\n\r\n    @Entity\r\n    @Table(name = &quot;sub_comment&quot;)\r\n    public class SubComment{\r\n    \r\n    ...\r\n    @ManyToOne(fetch = FetchType.LAZY)\r\n    @JoinColumn(name = &quot;comment_id&quot;, referencedColumnName = &quot;comment_id&quot;)\r\n    Comment comment;\r\n    ...\r\n    }\r\n\r\n\r\n\r\nIf You use e.g liquidbase to control your data source :\r\n\r\n      - changeSet:\r\n          id: 1\r\n          author: author.name\r\n          changes:\r\n          - addForeignKeyConstraint:\r\n              baseColumnNames: comment_id\r\n              baseTableName: sub_comment\r\n              constraintName: fk_comment_subcomment\r\n              referencedColumnNames: comment_id\r\n              referencedTableName: comment","title":"Spring Boot &amp; Postgres: relation &quot;sub_comment&quot; does not exist","body":"<p>Many sub comments have belonged to one comment and model should look like that (comment_id you can generate e.g UUID.randomUUID().toString() )</p>\n\n<pre><code>@Entity\n@Table(name = \"comment\")\npublic class Comment{\n\n@Id\n@GeneratedValue(strategy = GenerationType.IDENTITY)\nprivate Long id;\n\n@Column(name = \"comment_id\")\nString commentId;\n\n}\n\n@Entity\n@Table(name = \"sub_comment\")\npublic class SubComment{\n\n...\n@ManyToOne(fetch = FetchType.LAZY)\n@JoinColumn(name = \"comment_id\", referencedColumnName = \"comment_id\")\nComment comment;\n...\n}\n</code></pre>\n\n<p>If You use e.g liquidbase to control your data source :</p>\n\n<pre><code>  - changeSet:\n      id: 1\n      author: author.name\n      changes:\n      - addForeignKeyConstraint:\n          baseColumnNames: comment_id\n          baseTableName: sub_comment\n          constraintName: fk_comment_subcomment\n          referencedColumnNames: comment_id\n          referencedTableName: comment\n</code></pre>\n"},{"tags":[],"owner":{"account_id":11536593,"reputation":47,"user_id":8592289,"display_name":"John Vanegas"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1586394008,"creation_date":1586387876,"answer_id":61111534,"question_id":50247894,"body_markdown":"\r\nI know that this answer is late but maybe it will help someone, their problem is that they have not configured the schema, which is why they are throwing that error.\r\n\r\nHere is how to configure the schema in postgresql:\r\n```\r\nspring.jpa.properties.hibernate.default_schema = &quot;his schema&quot;\r\n```","title":"Spring Boot &amp; Postgres: relation &quot;sub_comment&quot; does not exist","body":"<p>I know that this answer is late but maybe it will help someone, their problem is that they have not configured the schema, which is why they are throwing that error.</p>\n\n<p>Here is how to configure the schema in postgresql:</p>\n\n<pre><code>spring.jpa.properties.hibernate.default_schema = \"his schema\"\n</code></pre>\n"},{"tags":[],"owner":{"account_id":8915876,"reputation":3560,"user_id":6654475,"accept_rate":100,"display_name":"Francislainy Campos"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1635416783,"creation_date":1635416783,"answer_id":69752408,"question_id":50247894,"body_markdown":"Had a similar problem and my issue was that I was missing referencedColumnName under my SubCategory class.\r\n\r\nHad this\r\n\r\n      @ManyToOne(fetch = FetchType.LAZY, cascade = CascadeType.MERGE)\r\n        @JoinColumn(name = &quot;category_id, nullable = false)\r\n        private Category category;\r\n\r\nInstead of\r\n\r\n\r\n    @ManyToOne(fetch = FetchType.LAZY, cascade = CascadeType.MERGE)\r\n        @JoinColumn(name = &quot;category_id&quot;, referencedColumnName = &quot;id&quot;, nullable = false)\r\n        private Category category;\r\n\r\nso my subcategory table was not being created.\r\n\r\n","title":"Spring Boot &amp; Postgres: relation &quot;sub_comment&quot; does not exist","body":"<p>Had a similar problem and my issue was that I was missing referencedColumnName under my SubCategory class.</p>\n<p>Had this</p>\n<pre><code>  @ManyToOne(fetch = FetchType.LAZY, cascade = CascadeType.MERGE)\n    @JoinColumn(name = &quot;category_id, nullable = false)\n    private Category category;\n</code></pre>\n<p>Instead of</p>\n<pre><code>@ManyToOne(fetch = FetchType.LAZY, cascade = CascadeType.MERGE)\n    @JoinColumn(name = &quot;category_id&quot;, referencedColumnName = &quot;id&quot;, nullable = false)\n    private Category category;\n</code></pre>\n<p>so my subcategory table was not being created.</p>\n"}],"owner":{"account_id":7109429,"reputation":429,"user_id":5437929,"accept_rate":20,"display_name":"Jasmine Rain"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":12438,"favorite_count":0,"down_vote_count":0,"up_vote_count":7,"answer_count":4,"score":7,"last_activity_date":1635416783,"creation_date":1525851199,"question_id":50247894,"body_markdown":"I have two entities: ``Comment``, and ``SubComment``. A ``Comment`` can have multiple ``SubComment``s. I&#39;m trying to establish a one to many/many to one bidirectional relationship with Hibernate.\r\n\r\nI do not know what is wrong. Both of the tables seem to have been created correctly in PSQL.\r\n\r\nComment.java\r\n    \r\n    import javax.persistence.*;\r\n    import java.util.Set;\r\n    \r\n    @Entity\r\n    public class Comment {\r\n    \r\n        @Id\r\n        @GeneratedValue(strategy = GenerationType.IDENTITY)\r\n        private long id;\r\n    \r\n        @Column\r\n        private String text;\r\n    \r\n        @OneToMany(cascade = CascadeType.ALL, mappedBy = &quot;comment&quot;)\r\n        private Set&lt;SubComment&gt; subComment;\r\n        \r\n        public long getId() {\r\n            return id;\r\n        }\r\n    \r\n        public void setId(long id) {\r\n            this.id = id;\r\n        }\r\n    \r\n        public String getText() {\r\n            return text;\r\n        }\r\n    \r\n        public void setText(String text) {\r\n            this.text = text;\r\n        }\r\n    }\r\n\r\nSubComment.java\r\n\r\n    import javax.persistence.*;\r\n    \r\n    @Entity\r\n    public class SubComment {\r\n        @Id\r\n        @GeneratedValue(strategy = GenerationType.IDENTITY)\r\n        private long id;\r\n    \r\n        private String text;\r\n    \r\n        @ManyToOne\r\n        private Comment comment;\r\n    \r\n        public long getId() {\r\n            return id;\r\n        }\r\n    \r\n        public void setId(long id) {\r\n            this.id = id;\r\n        }\r\n    \r\n        public String getText() {\r\n            return text;\r\n        }\r\n    \r\n        public void setText(String text) {\r\n            this.text = text;\r\n        }\r\n    \r\n        public Comment getComment() {\r\n            return comment;\r\n        }\r\n    \r\n        public void setComment(Comment comment) {\r\n            this.comment = comment;\r\n        }\r\n    }\r\n\r\nI&#39;m getting this error:\r\n\r\n&gt; Error executing DDL via JDBC StatementCaused by:\r\n&gt; org.postgresql.util.PSQLException: ERROR: relation &quot;sub_comment&quot; does\r\n&gt; not exist\r\n\r\n\r\n    \r\n    Hibernate: create table &quot;user&quot; (id  bigserial not null, email varchar(255), name varchar(255), username varchar(255), primary key (id))\r\n    Hibernate: create table comment (comment_id  bigserial not null, text varchar(255), primary key (comment_id))\r\n    Hibernate: create table sub_comment (sub_comment_id  bigserial not null, text varchar(255), comment_comment_id int8, primary key (sub_comment_id))\r\n    Hibernate: alter table sub_comment add constraint FK87789n34vmns9eeyw6jgc5ghp foreign key (comment_comment_id) references comment\r\n\r\n\r\napplication.properties\r\n\r\n    spring.jpa.hibernate.ddl-auto=create-drop\r\n    spring.datasource.url=jdbc:postgresql://localhost:5432/dbname\r\n    spring.datasource.data-username=username\r\n    spring.datasource.driver-class-name=org.postgresql.Driver\r\n    \r\n    spring.jpa.show-sql=true\r\n    spring.jpa.properties.hibernate.dialect=org.hibernate.dialect.PostgreSQLDialect\r\n    spring.jpa.database-platform=org.hibernate.dialect.PostgreSQL9Dialect\r\n    spring.jpa.properties.hibernate.temp.use_jdbc_metadata_defaults = false","title":"Spring Boot &amp; Postgres: relation &quot;sub_comment&quot; does not exist","body":"<p>I have two entities: <code>Comment</code>, and <code>SubComment</code>. A <code>Comment</code> can have multiple <code>SubComment</code>s. I'm trying to establish a one to many/many to one bidirectional relationship with Hibernate.</p>\n\n<p>I do not know what is wrong. Both of the tables seem to have been created correctly in PSQL.</p>\n\n<p>Comment.java</p>\n\n<pre><code>import javax.persistence.*;\nimport java.util.Set;\n\n@Entity\npublic class Comment {\n\n    @Id\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\n    private long id;\n\n    @Column\n    private String text;\n\n    @OneToMany(cascade = CascadeType.ALL, mappedBy = \"comment\")\n    private Set&lt;SubComment&gt; subComment;\n\n    public long getId() {\n        return id;\n    }\n\n    public void setId(long id) {\n        this.id = id;\n    }\n\n    public String getText() {\n        return text;\n    }\n\n    public void setText(String text) {\n        this.text = text;\n    }\n}\n</code></pre>\n\n<p>SubComment.java</p>\n\n<pre><code>import javax.persistence.*;\n\n@Entity\npublic class SubComment {\n    @Id\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\n    private long id;\n\n    private String text;\n\n    @ManyToOne\n    private Comment comment;\n\n    public long getId() {\n        return id;\n    }\n\n    public void setId(long id) {\n        this.id = id;\n    }\n\n    public String getText() {\n        return text;\n    }\n\n    public void setText(String text) {\n        this.text = text;\n    }\n\n    public Comment getComment() {\n        return comment;\n    }\n\n    public void setComment(Comment comment) {\n        this.comment = comment;\n    }\n}\n</code></pre>\n\n<p>I'm getting this error:</p>\n\n<blockquote>\n  <p>Error executing DDL via JDBC StatementCaused by:\n  org.postgresql.util.PSQLException: ERROR: relation \"sub_comment\" does\n  not exist</p>\n</blockquote>\n\n<pre><code>Hibernate: create table \"user\" (id  bigserial not null, email varchar(255), name varchar(255), username varchar(255), primary key (id))\nHibernate: create table comment (comment_id  bigserial not null, text varchar(255), primary key (comment_id))\nHibernate: create table sub_comment (sub_comment_id  bigserial not null, text varchar(255), comment_comment_id int8, primary key (sub_comment_id))\nHibernate: alter table sub_comment add constraint FK87789n34vmns9eeyw6jgc5ghp foreign key (comment_comment_id) references comment\n</code></pre>\n\n<p>application.properties</p>\n\n<pre><code>spring.jpa.hibernate.ddl-auto=create-drop\nspring.datasource.url=jdbc:postgresql://localhost:5432/dbname\nspring.datasource.data-username=username\nspring.datasource.driver-class-name=org.postgresql.Driver\n\nspring.jpa.show-sql=true\nspring.jpa.properties.hibernate.dialect=org.hibernate.dialect.PostgreSQLDialect\nspring.jpa.database-platform=org.hibernate.dialect.PostgreSQL9Dialect\nspring.jpa.properties.hibernate.temp.use_jdbc_metadata_defaults = false\n</code></pre>\n"},{"tags":["java","methods","groovy"],"answers":[{"tags":[],"owner":{"account_id":1663234,"reputation":138406,"user_id":1531124,"accept_rate":96,"display_name":"GhostCat"},"down_vote_count":1,"up_vote_count":2,"is_accepted":false,"score":1,"last_activity_date":1464957032,"creation_date":1464957032,"answer_id":37614457,"question_id":37614276,"body_markdown":"What you are asking for doesn&#39;t really make (too much) sense.\r\n\r\nYou see, the Java language knows **nothing** about the Groovy language.\r\n\r\nThe point is that Groovy source code will be compiled into JVM bytecode at some point. \r\n\r\nThis means: all the things that Groovy &quot;adds&quot; compared to the Java language ... are in the end, expressed as JVM bytecode.\r\n\r\nIn other words: the groovy compiler does its &quot;magic&quot; (for example by adding various methods); and all of that goes into the .class file. And when you then look &quot;into&quot; that .class ... you get all the things in there. As &quot;java reflection&quot; has no notion of &quot;this method was really written by the groovy programmer&quot; versus &quot;this method was added by some groovy transformation process).\r\n\r\nLong story short: if at all, you would need to look into mechanisms on the Groovy side of things; because only there you can know that &quot;sample&quot; has those two methods.","title":"List out declared methods of a Groovy class from Java","body":"<p>What you are asking for doesn't really make (too much) sense.</p>\n\n<p>You see, the Java language knows <strong>nothing</strong> about the Groovy language.</p>\n\n<p>The point is that Groovy source code will be compiled into JVM bytecode at some point. </p>\n\n<p>This means: all the things that Groovy \"adds\" compared to the Java language ... are in the end, expressed as JVM bytecode.</p>\n\n<p>In other words: the groovy compiler does its \"magic\" (for example by adding various methods); and all of that goes into the .class file. And when you then look \"into\" that .class ... you get all the things in there. As \"java reflection\" has no notion of \"this method was really written by the groovy programmer\" versus \"this method was added by some groovy transformation process).</p>\n\n<p>Long story short: if at all, you would need to look into mechanisms on the Groovy side of things; because only there you can know that \"sample\" has those two methods.</p>\n"},{"tags":[],"owner":{"account_id":2848514,"reputation":10932,"user_id":2446208,"accept_rate":69,"display_name":"blacktide"},"down_vote_count":1,"up_vote_count":3,"is_accepted":true,"score":2,"last_activity_date":1464958604,"creation_date":1464957618,"answer_id":37614656,"question_id":37614276,"body_markdown":"According to [JLS 13.1.7](http://docs.oracle.com/javase/specs/jls/se7/html/jls-13.html#jls-13.1), the &quot;Groovy&quot; methods that are generated should be marked as synthetic:\r\n\r\n&gt; Any constructs introduced by a Java compiler that do not have a corresponding construct in the source code must be marked as synthetic, except for default constructors, the class initialization method, and the values and valueOf methods of the Enum class.\r\n\r\nWith this in mind, you can filter out the synthetic methods on the class to give you only methods in the source code:\r\n\r\n    def methods = sample.declaredMethods.findAll { !it.synthetic }\r\n\r\nIf you&#39;re looking for a pure Java solution, you can do the following:\r\n\r\n    List&lt;Method&gt; methods = new ArrayList&lt;&gt;();\r\n    for (Method m : sample.class.getDeclaredMethods()) {\r\n        if (!m.isSynthetic()) {\r\n            methods.add(m);\r\n        }\r\n    }\r\n\r\nOr using the Java 8 streams API:\r\n\r\n    List&lt;Method&gt; methods = Arrays.stream(sample.class.getDeclaredMethods())\r\n            .filter(m -&gt; !m.isSynthetic())\r\n            .collect(Collectors.toList());","title":"List out declared methods of a Groovy class from Java","body":"<p>According to <a href=\"http://docs.oracle.com/javase/specs/jls/se7/html/jls-13.html#jls-13.1\" rel=\"nofollow\">JLS 13.1.7</a>, the \"Groovy\" methods that are generated should be marked as synthetic:</p>\n\n<blockquote>\n  <p>Any constructs introduced by a Java compiler that do not have a corresponding construct in the source code must be marked as synthetic, except for default constructors, the class initialization method, and the values and valueOf methods of the Enum class.</p>\n</blockquote>\n\n<p>With this in mind, you can filter out the synthetic methods on the class to give you only methods in the source code:</p>\n\n<pre><code>def methods = sample.declaredMethods.findAll { !it.synthetic }\n</code></pre>\n\n<p>If you're looking for a pure Java solution, you can do the following:</p>\n\n<pre><code>List&lt;Method&gt; methods = new ArrayList&lt;&gt;();\nfor (Method m : sample.class.getDeclaredMethods()) {\n    if (!m.isSynthetic()) {\n        methods.add(m);\n    }\n}\n</code></pre>\n\n<p>Or using the Java 8 streams API:</p>\n\n<pre><code>List&lt;Method&gt; methods = Arrays.stream(sample.class.getDeclaredMethods())\n        .filter(m -&gt; !m.isSynthetic())\n        .collect(Collectors.toList());\n</code></pre>\n"},{"tags":[],"owner":{"account_id":4690797,"reputation":813,"user_id":3796962,"display_name":"Om Prakash"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1635416667,"creation_date":1464957658,"answer_id":37614669,"question_id":37614276,"body_markdown":"You should try below to get only your methods instead of inherited methods :-\r\n\r\n    def myMethods = MyClass.declaredMethods.findAll { !it.synthetic }\r\n\r\nHope it will help you...:)","title":"List out declared methods of a Groovy class from Java","body":"<p>You should try below to get only your methods instead of inherited methods :-</p>\n<pre><code>def myMethods = MyClass.declaredMethods.findAll { !it.synthetic }\n</code></pre>\n<p>Hope it will help you...:)</p>\n"}],"owner":{"account_id":1837644,"reputation":484,"user_id":1667663,"accept_rate":59,"display_name":"Haseena"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2836,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"accepted_answer_id":37614656,"answer_count":3,"score":3,"last_activity_date":1635416667,"creation_date":1464956472,"question_id":37614276,"body_markdown":"I have a groovy file named `sample.groovy`, which contains different methods:\r\n\r\n    class sample {\r\n      \r\n        def doOperation()\r\n        {\r\n            println(&quot;Inside doOperation()&quot;)\r\n        }\r\n    \r\n        def setData(String str)\r\n        {  \r\n            println(&quot;Incoming data : &quot; + str)\r\n        }   \r\n    }\r\n\r\nI have defined only 2 methods: `doOperation()` and `setData()`, and I want to list out these 2 methods only.\r\n\r\nI have used reflection and try to list out methods using `getDeclaredMethods()`. But it list out above methods and methods like: `setProperty`, `getProperty`, `setMetaClass`, etc.\r\n\r\nI want to list out the methods defined in this particular file only.","title":"List out declared methods of a Groovy class from Java","body":"<p>I have a groovy file named <code>sample.groovy</code>, which contains different methods:</p>\n\n<pre><code>class sample {\n\n    def doOperation()\n    {\n        println(\"Inside doOperation()\")\n    }\n\n    def setData(String str)\n    {  \n        println(\"Incoming data : \" + str)\n    }   \n}\n</code></pre>\n\n<p>I have defined only 2 methods: <code>doOperation()</code> and <code>setData()</code>, and I want to list out these 2 methods only.</p>\n\n<p>I have used reflection and try to list out methods using <code>getDeclaredMethods()</code>. But it list out above methods and methods like: <code>setProperty</code>, <code>getProperty</code>, <code>setMetaClass</code>, etc.</p>\n\n<p>I want to list out the methods defined in this particular file only.</p>\n"},{"tags":["java","spring-boot","mapper"],"comments":[{"owner":{"account_id":7646725,"reputation":95,"user_id":5797121,"display_name":"amir elhajjam"},"score":0,"creation_date":1644504006,"post_id":69752214,"comment_id":125628622,"body_markdown":"did you found the solution for this, i&#39;m in the same situation and I need to ignore the mapping to destination object","body":"did you found the solution for this, i&#39;m in the same situation and I need to ignore the mapping to destination object"},{"owner":{"account_id":11511943,"reputation":359,"user_id":8436465,"display_name":"Rub&#233;n Morales"},"score":0,"creation_date":1659538791,"post_id":69752214,"comment_id":129319280,"body_markdown":"Please, be more specific with your question. What is the expected generated code for your scenario? From &quot;he doesn&#39;t ignore the null value of fields Type date&quot; I understand that, if `inDto.getStartDate()` is null, it should be ignored. From my point of view, the generated code is correct.","body":"Please, be more specific with your question. What is the expected generated code for your scenario? From &quot;he doesn&#39;t ignore the null value of fields Type date&quot; I understand that, if <code>inDto.getStartDate()</code> is null, it should be ignored. From my point of view, the generated code is correct."}],"owner":{"account_id":14402550,"reputation":11,"user_id":10403695,"display_name":"Lambouti "},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":302,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1635415983,"creation_date":1635415983,"question_id":69752214,"body_markdown":"I am using Selma for mapping my Object from Dto to entity include update entity from Dto, when i add (withIgnoreNullValue = true) to my mapper, I don&#39;t why he doesn&#39;t ignore the null value of fields Type date. when I check my generate class mapper I found this \r\n \r\n\r\n    if (inDto.getStartDate() != null) {\r\n            out.setStartDate(new java.util.Date(inDto.getStartDate().getTime()));\r\n          }\r\n          else {\r\n            out.setStartDate(null);\r\n          } ","title":"Issue with Selma updating entity from Dto withIgnoreNullValue field type Date","body":"<p>I am using Selma for mapping my Object from Dto to entity include update entity from Dto, when i add (withIgnoreNullValue = true) to my mapper, I don't why he doesn't ignore the null value of fields Type date. when I check my generate class mapper I found this</p>\n<pre><code>if (inDto.getStartDate() != null) {\n        out.setStartDate(new java.util.Date(inDto.getStartDate().getTime()));\n      }\n      else {\n        out.setStartDate(null);\n      } \n</code></pre>\n"},{"tags":["java","sockets","udp","p2p"],"comments":[{"owner":{"account_id":8173083,"reputation":343,"user_id":6152831,"display_name":"Omar"},"score":0,"creation_date":1459753067,"post_id":36389235,"comment_id":60409180,"body_markdown":"I&#39;ve tried using a list and passing it to every new client.Somehow it didn&#39;t work.","body":"I&#39;ve tried using a list and passing it to every new client.Somehow it didn&#39;t work."}],"answers":[{"tags":[],"owner":{"account_id":1573687,"reputation":7830,"user_id":4945535,"accept_rate":62,"display_name":"user140547"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1459707661,"creation_date":1459707661,"answer_id":36389306,"question_id":36389235,"body_markdown":"One simple possibility would be that every client stores the other peers it knows of and passes the list to any new clients connecting.","title":"Java peer to peer udp chatting room","body":"<p>One simple possibility would be that every client stores the other peers it knows of and passes the list to any new clients connecting.</p>\n"},{"tags":[],"owner":{"account_id":6559964,"reputation":315,"user_id":5071443,"display_name":"jython234"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1459720122,"creation_date":1459720122,"answer_id":36391629,"question_id":36389235,"body_markdown":"You can use a unique feature of UDP which is [broadcasting][1]\r\n\r\nOn IPv4 (which you are probably using) the address for broadcasting is 255.255.255.255. Any datagram sent to that address will be sent to all UDP clients on the network for that port.\r\n\r\nWhat you can do for your chat application is to have each client send a packet to the UDP broadcast identifying itself, such as maybe the nickname of the user. All the other clients will see that packet, and you will be able to parse the packet and display a list of all the chat clients on the network.\r\n\r\nHere is an example of sending a Datagram to broadcast:\r\n\r\n        DatagramSocket s = new DatagramSocket();\r\n        s.setBroadcast(true);\r\n        DatagramPacket dp = new DatagramPacket(&quot;insert data here&quot;.getBytes(), &quot;insert data here&quot;.length(), new InetSocketAddress(&quot;255.255.255.255&quot;, 5000));\r\n        s.send(dp);\r\n\r\nAnother client can receive it like this:\r\n\r\n    DatagramSocket s = new DatagramSocket();\r\n    s.setBroadcast(true);\r\n    DatagramPacket dp = new DatagramPacket(new byte[1024], 1024);\r\n    s.receive(dp);\r\n\r\nThe received DatagramPacket will contain the IP and port of the client who had broadcasted it. \r\n\r\n\r\n  [1]: https://en.wikipedia.org/wiki/Broadcast_address","title":"Java peer to peer udp chatting room","body":"<p>You can use a unique feature of UDP which is <a href=\"https://en.wikipedia.org/wiki/Broadcast_address\" rel=\"nofollow\">broadcasting</a></p>\n\n<p>On IPv4 (which you are probably using) the address for broadcasting is 255.255.255.255. Any datagram sent to that address will be sent to all UDP clients on the network for that port.</p>\n\n<p>What you can do for your chat application is to have each client send a packet to the UDP broadcast identifying itself, such as maybe the nickname of the user. All the other clients will see that packet, and you will be able to parse the packet and display a list of all the chat clients on the network.</p>\n\n<p>Here is an example of sending a Datagram to broadcast:</p>\n\n<pre><code>    DatagramSocket s = new DatagramSocket();\n    s.setBroadcast(true);\n    DatagramPacket dp = new DatagramPacket(\"insert data here\".getBytes(), \"insert data here\".length(), new InetSocketAddress(\"255.255.255.255\", 5000));\n    s.send(dp);\n</code></pre>\n\n<p>Another client can receive it like this:</p>\n\n<pre><code>DatagramSocket s = new DatagramSocket();\ns.setBroadcast(true);\nDatagramPacket dp = new DatagramPacket(new byte[1024], 1024);\ns.receive(dp);\n</code></pre>\n\n<p>The received DatagramPacket will contain the IP and port of the client who had broadcasted it. </p>\n"},{"tags":[],"owner":{"account_id":15389930,"reputation":21,"user_id":13555987,"display_name":"Joao Pedro Lourenco Affonso"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1635415813,"creation_date":1635372477,"answer_id":69746017,"question_id":36389235,"body_markdown":"Don&#39;t forget of authenticating your peers. You can try to use the OpenSSL (very easy) to generate some certificates and use it in association to ssl.\r\n\r\nEdit: a bot told me to be more specific so here it is:\r\n\r\nLocal Networks (LANs) are not always safe, so, to be sure, I would recommend you use OpenSSL to generate certificates for authentication and private keys for encryption, in this way, you can communicate safely.\r\nPython ssl module is a good example.","title":"Java peer to peer udp chatting room","body":"<p>Don't forget of authenticating your peers. You can try to use the OpenSSL (very easy) to generate some certificates and use it in association to ssl.</p>\n<p>Edit: a bot told me to be more specific so here it is:</p>\n<p>Local Networks (LANs) are not always safe, so, to be sure, I would recommend you use OpenSSL to generate certificates for authentication and private keys for encryption, in this way, you can communicate safely.\nPython ssl module is a good example.</p>\n"}],"owner":{"account_id":8173083,"reputation":343,"user_id":6152831,"display_name":"Omar"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2483,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":36391629,"answer_count":3,"score":0,"last_activity_date":1635415813,"creation_date":1459707316,"question_id":36389235,"body_markdown":"I&#39;m new to Java socket programming and I&#39;m currently developing a small peer to peer UDP chatting room application which allow multiple clients to chat with each other.\r\n\r\nMy question is how do I make a client discover all other connected clients once he hit the connect button providing only one of the connected clients ip and port? The program only runs on local network.","title":"Java peer to peer udp chatting room","body":"<p>I'm new to Java socket programming and I'm currently developing a small peer to peer UDP chatting room application which allow multiple clients to chat with each other.</p>\n\n<p>My question is how do I make a client discover all other connected clients once he hit the connect button providing only one of the connected clients ip and port? The program only runs on local network.</p>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":1142966,"reputation":3482,"user_id":1126380,"accept_rate":75,"display_name":"Arturo Volpe"},"score":0,"creation_date":1669989840,"post_id":69749408,"comment_id":131774745,"body_markdown":"There are some snippets on code golf: https://codegolf.stackexchange.com/questions/119126/shorten-the-java-package#119137","body":"There are some snippets on code golf: <a href=\"https://codegolf.stackexchange.com/questions/119126/shorten-the-java-package#119137\" title=\"shorten the java package%23119137\">codegolf.stackexchange.com/questions/119126/&hellip;</a>"}],"answers":[{"tags":[],"owner":{"account_id":1008655,"reputation":8966,"user_id":1021720,"accept_rate":60,"display_name":"obourgain"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1635415682,"creation_date":1635405248,"answer_id":69749703,"question_id":69749408,"body_markdown":"You can use [NameAbbreviator][1] from log4j-core.\r\n\r\n```java\r\nNameAbbreviator n = NameAbbreviator.getAbbreviator(&quot;1.&quot;);\r\nStringBuilder sb = new StringBuilder();\r\nn.abbreviate(&quot;com.test.Student&quot;, sb);\r\nSystem.out.println(sb); /* Result: c.t.Student */\r\n```\r\n\r\n\r\n  [1]: https://logging.apache.org/log4j/2.x/log4j-core/apidocs/org/apache/logging/log4j/core/pattern/NameAbbreviator.html","title":"Java code snippet to shorten package name from fully qualified class name","body":"<p>You can use <a href=\"https://logging.apache.org/log4j/2.x/log4j-core/apidocs/org/apache/logging/log4j/core/pattern/NameAbbreviator.html\" rel=\"nofollow noreferrer\">NameAbbreviator</a> from log4j-core.</p>\n<pre class=\"lang-java prettyprint-override\"><code>NameAbbreviator n = NameAbbreviator.getAbbreviator(&quot;1.&quot;);\nStringBuilder sb = new StringBuilder();\nn.abbreviate(&quot;com.test.Student&quot;, sb);\nSystem.out.println(sb); /* Result: c.t.Student */\n</code></pre>\n"}],"owner":{"account_id":8231410,"reputation":133,"user_id":6191944,"display_name":"Naresh Muthyala"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":469,"favorite_count":0,"down_vote_count":1,"up_vote_count":2,"accepted_answer_id":69749703,"answer_count":1,"score":1,"last_activity_date":1635415682,"creation_date":1635403650,"question_id":69749408,"body_markdown":"How to get short fully qualified class name efficiently. For example if we pass &quot;com.test.Student&quot; we need to get &quot;c.t.Student&quot;.","title":"Java code snippet to shorten package name from fully qualified class name","body":"<p>How to get short fully qualified class name efficiently. For example if we pass &quot;com.test.Student&quot; we need to get &quot;c.t.Student&quot;.</p>\n"}],"has_more":true,"quota_max":10000,"quota_remaining":8089,"page":1903,"page_size":100}
