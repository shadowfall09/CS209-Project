{"items":[{"tags":["javascript","java","des"],"comments":[{"owner":{"account_id":12359353,"reputation":42442,"user_id":9014097,"display_name":"Topaco"},"score":0,"creation_date":1695122899,"post_id":77133029,"comment_id":135979179,"body_markdown":"Have you had a look at the CryptoJS documentation? CryptoJS uses a key derivation when the key is passed as string. In the Java code this key derivation is missing.","body":"Have you had a look at the CryptoJS documentation? CryptoJS uses a key derivation when the key is passed as string. In the Java code this key derivation is missing."},{"owner":{"account_id":25576483,"reputation":1,"user_id":19355837,"display_name":"Fate"},"score":0,"creation_date":1695176412,"post_id":77133029,"comment_id":135987875,"body_markdown":"I&#39;m a pure back-end development engineer, not too good with front-end source code. Can you help point out the source code for the secret key derivation part? And the source code for why the encryption result is different each time.","body":"I&#39;m a pure back-end development engineer, not too good with front-end source code. Can you help point out the source code for the secret key derivation part? And the source code for why the encryption result is different each time."}],"answers":[{"tags":[],"owner":{"account_id":27650244,"reputation":207,"user_id":21105343,"display_name":"NotARobot"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1695199364,"creation_date":1695199364,"answer_id":77140730,"question_id":77133029,"body_markdown":"CryptoJS uses the key derivation function `EVP_BytesToKey()` when key is passed as a string. You need an implementation of this function for the Java side, e.g. BouncyCastle (but you can find others on the web). \r\n\r\n-----------\r\n\r\nFor encryption CryptoJS generates a random salt during key derivation from which together with the password key and IV are derived. The encryption is done with DES in CBC mode and PKCS#7 padding. Salt and ciphertext are concatenated and prefixed with `Salted__`. \r\n\r\nExample - Encryption with Java:\r\n\r\n```java\r\nimport java.nio.ByteBuffer;\r\nimport java.nio.charset.StandardCharsets;\r\nimport java.security.SecureRandom;\r\nimport java.util.Base64;\r\nimport javax.crypto.Cipher;\r\nimport javax.crypto.spec.IvParameterSpec;\r\nimport javax.crypto.spec.SecretKeySpec;\r\nimport org.bouncycastle.crypto.digests.MD5Digest;\r\nimport org.bouncycastle.crypto.generators.OpenSSLPBEParametersGenerator;\r\nimport org.bouncycastle.crypto.params.KeyParameter;\r\nimport org.bouncycastle.crypto.params.ParametersWithIV;\r\n\r\n...\r\n\r\n// create random salt\r\nSecureRandom secureRandom = new SecureRandom();\r\nbyte[] salt = new byte[8];\r\nsecureRandom.nextBytes(salt);\r\n\r\n// key/IV derivation\r\nOpenSSLPBEParametersGenerator pbeGenerator = new OpenSSLPBEParametersGenerator(new MD5Digest());\r\npbeGenerator.init(&quot;my passphrase&quot;.getBytes(StandardCharsets.UTF_8), salt);\r\nParametersWithIV parameters = (ParametersWithIV)pbeGenerator.generateDerivedParameters(64, 64);\r\nbyte[] key = ((KeyParameter)parameters.getParameters()).getKey();\r\nbyte[] iv = parameters.getIV();\r\n\r\n// encryption\r\nCipher cipher = Cipher.getInstance(&quot;DES/CBC/PKCS5Padding&quot;);\r\ncipher.init(Cipher.ENCRYPT_MODE, new SecretKeySpec(key, &quot;DES&quot;), new IvParameterSpec(iv));\r\nbyte[] ciphertext = cipher.doFinal(&quot;The quick brown fox jumps over the lazy dog&quot;.getBytes(StandardCharsets.UTF_8));\r\n\r\n// concatenation\r\nByteBuffer saltCiphertextBuf = ByteBuffer.allocate(16 + ciphertext.length);\r\nbyte[] saltCiphertext = saltCiphertextBuf.put(&quot;Salted__&quot;.getBytes(StandardCharsets.UTF_8)).put(salt).put(ciphertext).array();\r\nSystem.out.println(Base64.getEncoder().encodeToString(saltCiphertext)); // e.g. U2FsdGVkX19HEoeGxD/2PAQYTCQM6sTD/vs4QcihRE38g9kr/JCFil3fnmq9wo3bvFdZosDyPCzEbttrZMlC1A==\r\n```\r\n\r\nTest - Decryption with CryptoJS:\r\n\r\n&lt;!-- begin snippet: js hide: false console: true babel: false --&gt;\r\n\r\n&lt;!-- language: lang-js --&gt;\r\n\r\n    var desstr = CryptoJS.DES.decrypt(&quot;U2FsdGVkX19HEoeGxD/2PAQYTCQM6sTD/vs4QcihRE38g9kr/JCFil3fnmq9wo3bvFdZosDyPCzEbttrZMlC1A==&quot;, &quot;my passphrase&quot;).toString(CryptoJS.enc.Utf8);\r\n    console.log(&quot;result：&quot; + desstr);\r\n\r\n&lt;!-- language: lang-html --&gt;\r\n\r\n    &lt;script src=&quot;https://cdnjs.cloudflare.com/ajax/libs/crypto-js/4.1.1/crypto-js.min.js&quot;&gt;&lt;/script&gt;\r\n\r\n\r\n\r\n&lt;!-- end snippet --&gt;\r\n\r\n---------\r\n\r\nFor decryption, separate salt and ciphertext, then derive key and IV, and decrypt the ciphertext.  \r\nThe implementation is pretty much analog apart from separating, and I&#39;ll leave it up to you.\r\n\r\n---------\r\n\r\nNote that DES is insecure (retired for decades) and `EVP_BytesToKey()` is also considered insecure. More secure alternatives are AES and PBKDF2.","title":"How to pan the default encryption methods in CryptoJS DES to java code","body":"<p>CryptoJS uses the key derivation function <code>EVP_BytesToKey()</code> when key is passed as a string. You need an implementation of this function for the Java side, e.g. BouncyCastle (but you can find others on the web).</p>\n<hr />\n<p>For encryption CryptoJS generates a random salt during key derivation from which together with the password key and IV are derived. The encryption is done with DES in CBC mode and PKCS#7 padding. Salt and ciphertext are concatenated and prefixed with <code>Salted__</code>.</p>\n<p>Example - Encryption with Java:</p>\n<pre class=\"lang-java prettyprint-override\"><code>import java.nio.ByteBuffer;\nimport java.nio.charset.StandardCharsets;\nimport java.security.SecureRandom;\nimport java.util.Base64;\nimport javax.crypto.Cipher;\nimport javax.crypto.spec.IvParameterSpec;\nimport javax.crypto.spec.SecretKeySpec;\nimport org.bouncycastle.crypto.digests.MD5Digest;\nimport org.bouncycastle.crypto.generators.OpenSSLPBEParametersGenerator;\nimport org.bouncycastle.crypto.params.KeyParameter;\nimport org.bouncycastle.crypto.params.ParametersWithIV;\n\n...\n\n// create random salt\nSecureRandom secureRandom = new SecureRandom();\nbyte[] salt = new byte[8];\nsecureRandom.nextBytes(salt);\n\n// key/IV derivation\nOpenSSLPBEParametersGenerator pbeGenerator = new OpenSSLPBEParametersGenerator(new MD5Digest());\npbeGenerator.init(&quot;my passphrase&quot;.getBytes(StandardCharsets.UTF_8), salt);\nParametersWithIV parameters = (ParametersWithIV)pbeGenerator.generateDerivedParameters(64, 64);\nbyte[] key = ((KeyParameter)parameters.getParameters()).getKey();\nbyte[] iv = parameters.getIV();\n\n// encryption\nCipher cipher = Cipher.getInstance(&quot;DES/CBC/PKCS5Padding&quot;);\ncipher.init(Cipher.ENCRYPT_MODE, new SecretKeySpec(key, &quot;DES&quot;), new IvParameterSpec(iv));\nbyte[] ciphertext = cipher.doFinal(&quot;The quick brown fox jumps over the lazy dog&quot;.getBytes(StandardCharsets.UTF_8));\n\n// concatenation\nByteBuffer saltCiphertextBuf = ByteBuffer.allocate(16 + ciphertext.length);\nbyte[] saltCiphertext = saltCiphertextBuf.put(&quot;Salted__&quot;.getBytes(StandardCharsets.UTF_8)).put(salt).put(ciphertext).array();\nSystem.out.println(Base64.getEncoder().encodeToString(saltCiphertext)); // e.g. U2FsdGVkX19HEoeGxD/2PAQYTCQM6sTD/vs4QcihRE38g9kr/JCFil3fnmq9wo3bvFdZosDyPCzEbttrZMlC1A==\n</code></pre>\n<p>Test - Decryption with CryptoJS:</p>\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-js lang-js prettyprint-override\"><code>var desstr = CryptoJS.DES.decrypt(\"U2FsdGVkX19HEoeGxD/2PAQYTCQM6sTD/vs4QcihRE38g9kr/JCFil3fnmq9wo3bvFdZosDyPCzEbttrZMlC1A==\", \"my passphrase\").toString(CryptoJS.enc.Utf8);\nconsole.log(\"result：\" + desstr);</code></pre>\r\n<pre class=\"snippet-code-html lang-html prettyprint-override\"><code>&lt;script src=\"https://cdnjs.cloudflare.com/ajax/libs/crypto-js/4.1.1/crypto-js.min.js\"&gt;&lt;/script&gt;</code></pre>\r\n</div>\r\n</div>\r\n</p>\n<hr />\n<p>For decryption, separate salt and ciphertext, then derive key and IV, and decrypt the ciphertext.<br />\nThe implementation is pretty much analog apart from separating, and I'll leave it up to you.</p>\n<hr />\n<p>Note that DES is insecure (retired for decades) and <code>EVP_BytesToKey()</code> is also considered insecure. More secure alternatives are AES and PBKDF2.</p>\n"}],"owner":{"account_id":25576483,"reputation":1,"user_id":19355837,"display_name":"Fate"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":87,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1695199364,"creation_date":1695113361,"question_id":77133029,"body_markdown":"How do I go about implementing `CryptoJS.DES.encrypt(&quot;123456&quot;, &quot;12345678&quot;)` in js in java. Because the result is still different every time I run it, and the decrypted value is still the same for different results.  \r\nthis is my test code:\r\n```\r\n&lt;script src=&quot;https://cdnjs.cloudflare.com/ajax/libs/crypto-js/4.1.1/crypto-js.min.js&quot; integrity=&quot;sha512-E8QSvWZ0eCLGk4km3hxSsNmGWbLtSCSUcewDQPQWZF6pEU8GlT8a5fF32wOl1i8ftdMhssTrF/OhyGWwonTcXA==&quot; crossorigin=&quot;anonymous&quot; referrerpolicy=&quot;no-referrer&quot;&gt;&lt;/script&gt;\r\n&lt;script type=&quot;text/javascript&quot; src=&quot;http://www.osctools.net/js/CryptoJS/components/core-min.js&quot;&gt;&lt;/script&gt;\r\n&lt;script type=&quot;text/javascript&quot;&gt;\r\n\r\n\r\n  // var desstr = CryptoJS.DES.decrypt(&quot;U2FsdGVkX19Z3jzZ3NvmJey7mrbU2qhT&quot;, &quot;12345678&quot;).toString(CryptoJS.enc.Utf8);\r\n  // alert(&quot;result：&quot;+desstr);\r\n\t\r\n  var encryptResult =CryptoJS.DES.encrypt(&quot;123456&quot;, &quot;12345678&quot;);\r\n  alert(&quot;result：&quot;+encryptResult);\r\n  \r\n&lt;/script&gt;\r\n```\r\n\r\nI need the equivalent Java implementation of the encryption and decryption code\r\n\r\nMy util class \r\n\r\n```java\r\nimport javax.crypto.Cipher;\r\nimport javax.crypto.SecretKey;\r\nimport javax.crypto.SecretKeyFactory;\r\nimport javax.crypto.spec.DESKeySpec;\r\nimport javax.crypto.spec.SecretKeySpec;\r\nimport java.util.Arrays;\r\nimport java.util.Base64;\r\n\r\npublic class DESUtil {\r\n\r\n    private static final String ALGORITHM = &quot;DES&quot;;\r\n    private static final int DES_KEY_SIZE = 8;\r\n    private static final String DES_MODE  = &quot; DES/ECB/PKCS5Padding&quot;;\r\n\r\n    public static byte[] encrypt(byte[] data, byte[] key) throws Exception {\r\n        DESKeySpec desKeySpec = new DESKeySpec(key);\r\n        SecretKeyFactory keyFactory = SecretKeyFactory.getInstance(ALGORITHM);\r\n        SecretKey secretKey = keyFactory.generateSecret(desKeySpec);\r\n        Cipher cipher = Cipher.getInstance(ALGORITHM);\r\n        cipher.init(Cipher.ENCRYPT_MODE, secretKey);\r\n        return cipher.doFinal(data);\r\n    }\r\n\r\n    public static byte[] decrypt(byte[] data, byte[] key) throws Exception {\r\n        DESKeySpec desKeySpec = new DESKeySpec(key);\r\n        SecretKeyFactory keyFactory = SecretKeyFactory.getInstance(ALGORITHM);\r\n        SecretKey secretKey = keyFactory.generateSecret(desKeySpec);\r\n        Cipher cipher = Cipher.getInstance(ALGORITHM);\r\n        cipher.init(Cipher.DECRYPT_MODE, secretKey);\r\n        return cipher.doFinal(data);\r\n    }\r\n\r\n    public static String encryptJs(String plainText, String secretKey) throws Exception {\r\n        byte[] keyBytes = Arrays.copyOf(secretKey.getBytes(), DES_KEY_SIZE);\r\n        byte[] plainTextBytes = plainText.getBytes();\r\n        SecretKeySpec desKeySpec = new SecretKeySpec(keyBytes, &quot;DES&quot;);\r\n        Cipher desCipher = Cipher.getInstance(DES_MODE);\r\n        desCipher.init(Cipher.ENCRYPT_MODE, desKeySpec);\r\n        byte[] encryptedText = desCipher.doFinal(plainTextBytes);\r\n        String data = Base64.getEncoder().encodeToString(encryptedText);\r\n        return data;\r\n    }\r\n\r\n    public static String decryptJs(String cipherText, String secretKey) throws Exception {\r\n        byte[] keyBytes = Arrays.copyOf(secretKey.getBytes(), DES_KEY_SIZE);\r\n        byte[] encryptedTextBytes = Base64.getDecoder().decode(cipherText);\r\n        SecretKeySpec desKeySpec = new SecretKeySpec(keyBytes, &quot;DES&quot;);\r\n        Cipher desCipher = Cipher.getInstance(DES_MODE);\r\n        desCipher.init(Cipher.DECRYPT_MODE, desKeySpec);\r\n        String data = new String(desCipher.doFinal(encryptedTextBytes));\r\n        return data;\r\n    }\r\n\r\n}\r\n```","title":"How to pan the default encryption methods in CryptoJS DES to java code","body":"<p>How do I go about implementing <code>CryptoJS.DES.encrypt(&quot;123456&quot;, &quot;12345678&quot;)</code> in js in java. Because the result is still different every time I run it, and the decrypted value is still the same for different results.<br />\nthis is my test code:</p>\n<pre><code>&lt;script src=&quot;https://cdnjs.cloudflare.com/ajax/libs/crypto-js/4.1.1/crypto-js.min.js&quot; integrity=&quot;sha512-E8QSvWZ0eCLGk4km3hxSsNmGWbLtSCSUcewDQPQWZF6pEU8GlT8a5fF32wOl1i8ftdMhssTrF/OhyGWwonTcXA==&quot; crossorigin=&quot;anonymous&quot; referrerpolicy=&quot;no-referrer&quot;&gt;&lt;/script&gt;\n&lt;script type=&quot;text/javascript&quot; src=&quot;http://www.osctools.net/js/CryptoJS/components/core-min.js&quot;&gt;&lt;/script&gt;\n&lt;script type=&quot;text/javascript&quot;&gt;\n\n\n  // var desstr = CryptoJS.DES.decrypt(&quot;U2FsdGVkX19Z3jzZ3NvmJey7mrbU2qhT&quot;, &quot;12345678&quot;).toString(CryptoJS.enc.Utf8);\n  // alert(&quot;result：&quot;+desstr);\n    \n  var encryptResult =CryptoJS.DES.encrypt(&quot;123456&quot;, &quot;12345678&quot;);\n  alert(&quot;result：&quot;+encryptResult);\n  \n&lt;/script&gt;\n</code></pre>\n<p>I need the equivalent Java implementation of the encryption and decryption code</p>\n<p>My util class</p>\n<pre class=\"lang-java prettyprint-override\"><code>import javax.crypto.Cipher;\nimport javax.crypto.SecretKey;\nimport javax.crypto.SecretKeyFactory;\nimport javax.crypto.spec.DESKeySpec;\nimport javax.crypto.spec.SecretKeySpec;\nimport java.util.Arrays;\nimport java.util.Base64;\n\npublic class DESUtil {\n\n    private static final String ALGORITHM = &quot;DES&quot;;\n    private static final int DES_KEY_SIZE = 8;\n    private static final String DES_MODE  = &quot; DES/ECB/PKCS5Padding&quot;;\n\n    public static byte[] encrypt(byte[] data, byte[] key) throws Exception {\n        DESKeySpec desKeySpec = new DESKeySpec(key);\n        SecretKeyFactory keyFactory = SecretKeyFactory.getInstance(ALGORITHM);\n        SecretKey secretKey = keyFactory.generateSecret(desKeySpec);\n        Cipher cipher = Cipher.getInstance(ALGORITHM);\n        cipher.init(Cipher.ENCRYPT_MODE, secretKey);\n        return cipher.doFinal(data);\n    }\n\n    public static byte[] decrypt(byte[] data, byte[] key) throws Exception {\n        DESKeySpec desKeySpec = new DESKeySpec(key);\n        SecretKeyFactory keyFactory = SecretKeyFactory.getInstance(ALGORITHM);\n        SecretKey secretKey = keyFactory.generateSecret(desKeySpec);\n        Cipher cipher = Cipher.getInstance(ALGORITHM);\n        cipher.init(Cipher.DECRYPT_MODE, secretKey);\n        return cipher.doFinal(data);\n    }\n\n    public static String encryptJs(String plainText, String secretKey) throws Exception {\n        byte[] keyBytes = Arrays.copyOf(secretKey.getBytes(), DES_KEY_SIZE);\n        byte[] plainTextBytes = plainText.getBytes();\n        SecretKeySpec desKeySpec = new SecretKeySpec(keyBytes, &quot;DES&quot;);\n        Cipher desCipher = Cipher.getInstance(DES_MODE);\n        desCipher.init(Cipher.ENCRYPT_MODE, desKeySpec);\n        byte[] encryptedText = desCipher.doFinal(plainTextBytes);\n        String data = Base64.getEncoder().encodeToString(encryptedText);\n        return data;\n    }\n\n    public static String decryptJs(String cipherText, String secretKey) throws Exception {\n        byte[] keyBytes = Arrays.copyOf(secretKey.getBytes(), DES_KEY_SIZE);\n        byte[] encryptedTextBytes = Base64.getDecoder().decode(cipherText);\n        SecretKeySpec desKeySpec = new SecretKeySpec(keyBytes, &quot;DES&quot;);\n        Cipher desCipher = Cipher.getInstance(DES_MODE);\n        desCipher.init(Cipher.DECRYPT_MODE, desKeySpec);\n        String data = new String(desCipher.doFinal(encryptedTextBytes));\n        return data;\n    }\n\n}\n</code></pre>\n"},{"tags":["java","memory","memory-leaks"],"comments":[{"owner":{"account_id":3795627,"reputation":15279,"user_id":3150802,"accept_rate":55,"display_name":"Peter - Reinstate Monica"},"score":48,"creation_date":1620831600,"post_id":6470651,"comment_id":119318671,"body_markdown":"Ironically, the harder question for every non-trivial Java program is how *not* to create a memory leak!","body":"Ironically, the harder question for every non-trivial Java program is how <i>not</i> to create a memory leak!"},{"owner":{"account_id":4705420,"reputation":47683,"user_id":3807729,"display_name":"Galik"},"score":3,"creation_date":1627016314,"post_id":6470651,"comment_id":121049995,"body_markdown":"Keep adding new objects to a container, but forget to add the code that removes them or implement partially working code that doesn&#39;t clean up all of them as the program progresses.","body":"Keep adding new objects to a container, but forget to add the code that removes them or implement partially working code that doesn&#39;t clean up all of them as the program progresses."},{"owner":{"account_id":401940,"reputation":13996,"user_id":768795,"display_name":"Thomas W"},"score":5,"creation_date":1643855878,"post_id":6470651,"comment_id":125452832,"body_markdown":"The most common memory leaks in Java server systems are in _shared state_ -- caches and services which are shared between requests. Many of the answers here seem to be over-complex, ignoring this obvious and common area. One rather common leak pattern is probably an application-scoped Map with request-scoped keys (eg, some kind of hand-rolled cache).","body":"The most common memory leaks in Java server systems are in <i>shared state</i> -- caches and services which are shared between requests. Many of the answers here seem to be over-complex, ignoring this obvious and common area. One rather common leak pattern is probably an application-scoped Map with request-scoped keys (eg, some kind of hand-rolled cache)."}],"answers":[{"comments":[{"owner":{"account_id":17835,"reputation":303905,"user_id":40342,"accept_rate":62,"display_name":"Joachim Sauer"},"score":28,"creation_date":1308932111,"post_id":6470679,"comment_id":7602763,"body_markdown":"That depends on the definition of &quot;memory leak&quot;. If &quot;memory that&#39;s held on to, but no longer needed&quot;, then it&#39;s easy to do in Java. If it&#39;s &quot;memory that&#39;s allocated but not accessible by the code at all&quot;, then it gets slightly harder.","body":"That depends on the definition of &quot;memory leak&quot;. If &quot;memory that&#39;s held on to, but no longer needed&quot;, then it&#39;s easy to do in Java. If it&#39;s &quot;memory that&#39;s allocated but not accessible by the code at all&quot;, then it gets slightly harder."}],"tags":[],"owner":{"account_id":225531,"reputation":26310,"user_id":486057,"accept_rate":94,"display_name":"Rogach"},"comment_count":1,"down_vote_count":5,"up_vote_count":43,"is_accepted":false,"score":38,"last_activity_date":1308952128,"creation_date":1308932069,"answer_id":6470679,"question_id":6470651,"body_markdown":"Maybe by using external native code through JNI?\r\n\r\nWith pure Java, it is almost impossible.\r\n\r\nBut that is about a &quot;standard&quot; type of memory leak, when you cannot access the memory anymore, but it is still owned by the application. You can instead keep references to unused objects, or open streams without closing them afterwards.\r\n","title":"How can I create a memory leak in Java?","body":"<p>Maybe by using external native code through JNI?</p>\n\n<p>With pure Java, it is almost impossible.</p>\n\n<p>But that is about a \"standard\" type of memory leak, when you cannot access the memory anymore, but it is still owned by the application. You can instead keep references to unused objects, or open streams without closing them afterwards.</p>\n"},{"comments":[{"owner":{"account_id":114848,"reputation":134189,"user_id":301832,"accept_rate":60,"display_name":"Donal Fellows"},"score":89,"creation_date":1309022627,"post_id":6470695,"comment_id":7615613,"body_markdown":"Actually, you can remove the elements from a HashSet even if the element class gets hashCode and equals wrong; just get an iterator for the set and use its remove method, as the iterator actually operates on the underlying entries themselves and not the elements. (Note that an unimplemented hashCode/equals is _not_ enough to trigger a leak; the defaults implement simple object identity and so you can get the elements and remove them normally.)","body":"Actually, you can remove the elements from a HashSet even if the element class gets hashCode and equals wrong; just get an iterator for the set and use its remove method, as the iterator actually operates on the underlying entries themselves and not the elements. (Note that an unimplemented hashCode/equals is <i>not</i> enough to trigger a leak; the defaults implement simple object identity and so you can get the elements and remove them normally.)"},{"owner":{"account_id":130645,"reputation":81705,"user_id":330057,"accept_rate":77,"display_name":"corsiKa"},"score":2,"creation_date":1309047223,"post_id":6470695,"comment_id":7618504,"body_markdown":"@Donal your last statement is incorrect. You can&#39;t get the element because you have no reference to it. The only reference to the key put in the map is the one that the map itself holds. Only if you went `BadKey myKey = new BadKey(&quot;key&quot;); map.put(key,&quot;value&quot;);` would you ever be able to get it out. You are correct you could use the iterator to remove it, but you cannot always do that with all data structures. For example, if you don&#39;t null out the reference in @meriton&#39;s answer, that will be lost forever. You have no access to the backing array, and iterator will stop short of it.","body":"@Donal your last statement is incorrect. You can&#39;t get the element because you have no reference to it. The only reference to the key put in the map is the one that the map itself holds. Only if you went <code>BadKey myKey = new BadKey(&quot;key&quot;); map.put(key,&quot;value&quot;);</code> would you ever be able to get it out. You are correct you could use the iterator to remove it, but you cannot always do that with all data structures. For example, if you don&#39;t null out the reference in @meriton&#39;s answer, that will be lost forever. You have no access to the backing array, and iterator will stop short of it."},{"owner":{"account_id":23121,"reputation":527376,"user_id":57695,"accept_rate":75,"display_name":"Peter Lawrey"},"score":1,"creation_date":1309072492,"post_id":6470695,"comment_id":7620375,"body_markdown":"The only way to remove elements when equals/hashCode is incorrect is to use Iterator.remove() when you find a match using a different method of comparison.","body":"The only way to remove elements when equals/hashCode is incorrect is to use Iterator.remove() when you find a match using a different method of comparison."},{"owner":{"account_id":130645,"reputation":81705,"user_id":330057,"accept_rate":77,"display_name":"corsiKa"},"score":14,"creation_date":1309119899,"post_id":6470695,"comment_id":7626133,"body_markdown":"@Donal what I&#39;m trying to say, I guess, is I disagree with your definition of a memory leak. I would consider (to continue the analogy) your iterator-removal technique to be a drip-pan under a leak; the leak still exists regardless of the drip pan.","body":"@Donal what I&#39;m trying to say, I guess, is I disagree with your definition of a memory leak. I would consider (to continue the analogy) your iterator-removal technique to be a drip-pan under a leak; the leak still exists regardless of the drip pan."},{"owner":{"account_id":259071,"reputation":206364,"user_id":541686,"accept_rate":81,"display_name":"user541686"},"score":110,"creation_date":1309581030,"post_id":6470695,"comment_id":7724618,"body_markdown":"I agree, this is **not** a memory &quot;leak&quot;, because you can just remove references to the hashset and wait for the GC to kick in, and presto! the memory goes back.","body":"I agree, this is <b>not</b> a memory &quot;leak&quot;, because you can just remove references to the hashset and wait for the GC to kick in, and presto! the memory goes back."}],"tags":[],"owner":{"account_id":23121,"reputation":527376,"user_id":57695,"accept_rate":75,"display_name":"Peter Lawrey"},"comment_count":5,"down_vote_count":22,"up_vote_count":526,"is_accepted":false,"score":504,"last_activity_date":1308952256,"creation_date":1308932189,"answer_id":6470695,"question_id":6470651,"body_markdown":"A simple thing to do is to use a HashSet with an incorrect (or non-existent) `hashCode()` or `equals()`, and then keep adding &quot;duplicates&quot;.  Instead of ignoring duplicates as it should, the set will only ever grow and you won&#39;t be able to remove them.\r\n\r\nIf you want these bad keys/elements to hang around you can use a static field like \r\n\r\n    class BadKey {\r\n       // no hashCode or equals();\r\n       public final String key;\r\n       public BadKey(String key) { this.key = key; }\r\n    }\r\n\r\n    Map map = System.getProperties();\r\n    map.put(new BadKey(&quot;key&quot;), &quot;value&quot;); // Memory leak even if your threads die.\r\n","title":"How can I create a memory leak in Java?","body":"<p>A simple thing to do is to use a HashSet with an incorrect (or non-existent) <code>hashCode()</code> or <code>equals()</code>, and then keep adding \"duplicates\".  Instead of ignoring duplicates as it should, the set will only ever grow and you won't be able to remove them.</p>\n\n<p>If you want these bad keys/elements to hang around you can use a static field like </p>\n\n<pre><code>class BadKey {\n   // no hashCode or equals();\n   public final String key;\n   public BadKey(String key) { this.key = key; }\n}\n\nMap map = System.getProperties();\nmap.put(new BadKey(\"key\"), \"value\"); // Memory leak even if your threads die.\n</code></pre>\n"},{"comments":[{"owner":{"account_id":157715,"reputation":47893,"user_id":375874,"accept_rate":88,"display_name":"Falmarri"},"score":93,"creation_date":1311275453,"post_id":6470712,"comment_id":8045654,"body_markdown":"How is that a leak? It&#39;s doing exactly what you&#39;re asking it to do. If that&#39;s a leak, creating and storing objects anywhere is a leak.","body":"How is that a leak? It&#39;s doing exactly what you&#39;re asking it to do. If that&#39;s a leak, creating and storing objects anywhere is a leak."},{"owner":{"account_id":2399,"reputation":3795,"user_id":3335,"accept_rate":80,"display_name":"Kyle"},"score":3,"creation_date":1342552134,"post_id":6470712,"comment_id":15240573,"body_markdown":"I agree with @Falmarri. I don&#39;t see a leak there, you are just creating objects. You could certainly &#39;reclaim&#39; the memory that you just allocated with another method called &#39;removeFromCache&#39;. A leak is when you can&#39;t reclaim the memory.","body":"I agree with @Falmarri. I don&#39;t see a leak there, you are just creating objects. You could certainly &#39;reclaim&#39; the memory that you just allocated with another method called &#39;removeFromCache&#39;. A leak is when you can&#39;t reclaim the memory."},{"owner":{"account_id":16878,"reputation":306143,"user_id":37213,"accept_rate":81,"display_name":"duffymo"},"score":5,"creation_date":1342555632,"post_id":6470712,"comment_id":15242135,"body_markdown":"My point is that somebody who keeps creating objects, perhaps putting them into a cache, could end up with an OOM error if they aren&#39;t careful.","body":"My point is that somebody who keeps creating objects, perhaps putting them into a cache, could end up with an OOM error if they aren&#39;t careful."},{"owner":{"account_id":157715,"reputation":47893,"user_id":375874,"accept_rate":88,"display_name":"Falmarri"},"score":8,"creation_date":1342649425,"post_id":6470712,"comment_id":15276297,"body_markdown":"@duffymo: But that&#39;s not really what the question was asking. It has nothing to do with simply using up all your memory.","body":"@duffymo: But that&#39;s not really what the question was asking. It has nothing to do with simply using up all your memory."},{"owner":{"account_id":945625,"reputation":2558,"user_id":972932,"accept_rate":66,"display_name":"gyorgyabraham"},"score":3,"creation_date":1385721374,"post_id":6470712,"comment_id":30260700,"body_markdown":"Absolutely invalid. You are just collecting a bunch of objects in a Map collection. Their references will be kept because the Map holds them.","body":"Absolutely invalid. You are just collecting a bunch of objects in a Map collection. Their references will be kept because the Map holds them."},{"owner":{"account_id":315785,"reputation":1593,"user_id":631627,"accept_rate":75,"display_name":"sceaj"},"score":3,"creation_date":1511909998,"post_id":6470712,"comment_id":82041849,"body_markdown":"This is the classic memory leak in Java.  It is not a leak in the sense of the JVM has lost track of the memory, but it is a leak in the sense that the JVM will never garbage collect it.  If you monitor the heap of an application that uses this construct it will have a generally increasing trend and will eventually terminate with OutOfMemoryError.  That is the definition of a memory leak.","body":"This is the classic memory leak in Java.  It is not a leak in the sense of the JVM has lost track of the memory, but it is a leak in the sense that the JVM will never garbage collect it.  If you monitor the heap of an application that uses this construct it will have a generally increasing trend and will eventually terminate with OutOfMemoryError.  That is the definition of a memory leak."},{"owner":{"account_id":333768,"reputation":80790,"user_id":659804,"accept_rate":100,"display_name":"Ernest Friedman-Hill"},"score":5,"creation_date":1546524570,"post_id":6470712,"comment_id":94884004,"body_markdown":"The comments dissing this answer are pretty funny, given that the accepted answer with over 2000 votes is saying the exact same thing, albeit in a highly obfuscated way. ThreadLocals aren&#39;t magic -- they are just entries in a Map, pointed to by a member variable in Thread.","body":"The comments dissing this answer are pretty funny, given that the accepted answer with over 2000 votes is saying the exact same thing, albeit in a highly obfuscated way. ThreadLocals aren&#39;t magic -- they are just entries in a Map, pointed to by a member variable in Thread."},{"owner":{"account_id":178539,"reputation":677,"user_id":410579,"display_name":"kocka"},"score":0,"creation_date":1630051819,"post_id":6470712,"comment_id":121855067,"body_markdown":"This is what causes 99% of the real life memory leaks. Someone who does not know what is the difference between a Map and a Cache.","body":"This is what causes 99% of the real life memory leaks. Someone who does not know what is the difference between a Map and a Cache."}],"tags":[],"owner":{"account_id":16878,"reputation":306143,"user_id":37213,"accept_rate":81,"display_name":"duffymo"},"comment_count":8,"down_vote_count":33,"up_vote_count":54,"is_accepted":false,"score":21,"last_activity_date":1605938991,"creation_date":1308932263,"answer_id":6470712,"question_id":6470651,"body_markdown":"Create a static Map and keep adding hard references to it.  Those will never be garbage collected.\r\n\r\n    public class Leaker {\r\n        private static final Map&lt;String, Object&gt; CACHE = new HashMap&lt;String, Object&gt;();\r\n\r\n        // Keep adding until failure.\r\n        public static void addToCache(String key, Object value) { Leaker.CACHE.put(key, value); }\r\n    }\r\n","title":"How can I create a memory leak in Java?","body":"<p>Create a static Map and keep adding hard references to it.  Those will never be garbage collected.</p>\n<pre><code>public class Leaker {\n    private static final Map&lt;String, Object&gt; CACHE = new HashMap&lt;String, Object&gt;();\n\n    // Keep adding until failure.\n    public static void addToCache(String key, Object value) { Leaker.CACHE.put(key, value); }\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":23980,"reputation":411,"user_id":60624,"display_name":"ehabkost"},"score":0,"creation_date":1311349547,"post_id":6470716,"comment_id":8061734,"body_markdown":"@31eee384 let us [continue this discussion in chat](http://chat.stackoverflow.com/rooms/1738/discussion-between-ehabkost-and-31eee384)","body":"@31eee384 let us <a href=\"http://chat.stackoverflow.com/rooms/1738/discussion-between-ehabkost-and-31eee384\">continue this discussion in chat</a>"}],"tags":[],"owner":{"account_id":970,"reputation":399857,"user_id":1288,"accept_rate":93,"display_name":"Bill the Lizard"},"comment_count":1,"down_vote_count":2,"up_vote_count":78,"is_accepted":false,"score":76,"last_activity_date":1695199331,"creation_date":1308932287,"answer_id":6470716,"question_id":6470651,"body_markdown":"Any time you keep references around to objects that you no longer need you have a memory leak.  See [Handling memory leaks in Java programs][1] for examples of how memory leaks manifest themselves in Java and what you can do about it.\r\n\r\n\r\n  [1]: https://developer.ibm.com/articles/j-leaks/","title":"How can I create a memory leak in Java?","body":"<p>Any time you keep references around to objects that you no longer need you have a memory leak.  See <a href=\"https://developer.ibm.com/articles/j-leaks/\" rel=\"nofollow noreferrer\">Handling memory leaks in Java programs</a> for examples of how memory leaks manifest themselves in Java and what you can do about it.</p>\n"},{"comments":[{"owner":{"account_id":40289,"reputation":2951,"user_id":116757,"display_name":"Hardwareguy"},"score":120,"creation_date":1311265416,"post_id":6470756,"comment_id":8042894,"body_markdown":"You will reach maximum open connection limit before you hit memory limits usually.  Don&#39;t ask me why I know...","body":"You will reach maximum open connection limit before you hit memory limits usually.  Don&#39;t ask me why I know..."}],"tags":[],"owner":{"account_id":2785,"reputation":76174,"user_id":3916,"accept_rate":100,"display_name":"Vineet Reynolds"},"comment_count":1,"down_vote_count":0,"up_vote_count":149,"is_accepted":false,"score":149,"last_activity_date":1665396132,"creation_date":1308932518,"answer_id":6470756,"question_id":6470651,"body_markdown":"The following is a pretty pointless example if you do not understand [JDBC][1]. Or at least how JDBC expects a developer to close `Connection,` `Statement`, and `ResultSet` instances before discarding them or losing references to them, instead of relying on implementing the `finalize` method.\r\n```\r\nvoid doWork() {\r\n    try {\r\n        Connection conn = ConnectionFactory.getConnection();\r\n        PreparedStatement stmt = conn.preparedStatement(&quot;some query&quot;);\r\n        // executes a valid query\r\n        ResultSet rs = stmt.executeQuery();\r\n        while(rs.hasNext()) {\r\n            // ... process the result set\r\n        }\r\n    } catch(SQLException sqlEx) {\r\n        log(sqlEx);\r\n    }\r\n}\r\n```\r\nThe problem with the above is that the `Connection` object is not closed, and hence the physical `Connection` will remain open until the garbage collector comes around and sees that it is unreachable. GC will invoke the `finalize` method, but there are JDBC drivers that do not implement the `finalize,` at least not in the same way that `Connection.close` is implemented. The resulting behavior is that while the JVM will reclaim memory due to unreachable objects being collected, resources (including memory) associated with the `Connection` object might not be reclaimed.\r\n\r\nAs such, Connection&#39;s final method does not clean up everything. One might find that the physical `Connection` to the database server will last several garbage collection cycles until the database server eventually figures out that the `Connection` is not alive (if it does) and should be closed.\r\n\r\nEven if the JDBC driver implemented `finalize`, the compiler can throw exceptions during finalization. The resulting behavior is that any memory associated with the now &quot;dormant&quot; object will not be reclaimed by the compiler, as `finalize` is guaranteed to be invoked only once.\r\n\r\nThe above scenario of encountering exceptions during object finalization is related to another scenario that could lead to a memory leak - object resurrection. Object resurrection is often done intentionally by creating a strong reference to the object from being finalized, from another object. When object resurrection is misused it will lead to a memory leak in combination with other sources of memory leaks.\r\n\r\nThere are plenty more examples that you can conjure up - like\r\n\r\n* Managing a `List` instance where you are only adding to the list and not deleting from it (although you should be getting rid of elements you no longer need), or\r\n* Opening `Sockets` or `Files,` but not closing them when they are no longer needed (similar to the above example involving the `Connection` class).\r\n* Not unloading Singletons when bringing down a Java EE application. The Classloader that loaded the singleton class will retain a reference to the class, and hence the singleton instance will never be collected by the JVM. When a new instance of the application is deployed, a new class loader is usually created, and the former class loader will continue to exist due to the singleton.\r\n\r\n  [1]: http://en.wikipedia.org/wiki/Java_Database_Connectivity","title":"How can I create a memory leak in Java?","body":"<p>The following is a pretty pointless example if you do not understand <a href=\"http://en.wikipedia.org/wiki/Java_Database_Connectivity\" rel=\"nofollow noreferrer\">JDBC</a>. Or at least how JDBC expects a developer to close <code>Connection,</code> <code>Statement</code>, and <code>ResultSet</code> instances before discarding them or losing references to them, instead of relying on implementing the <code>finalize</code> method.</p>\n<pre><code>void doWork() {\n    try {\n        Connection conn = ConnectionFactory.getConnection();\n        PreparedStatement stmt = conn.preparedStatement(&quot;some query&quot;);\n        // executes a valid query\n        ResultSet rs = stmt.executeQuery();\n        while(rs.hasNext()) {\n            // ... process the result set\n        }\n    } catch(SQLException sqlEx) {\n        log(sqlEx);\n    }\n}\n</code></pre>\n<p>The problem with the above is that the <code>Connection</code> object is not closed, and hence the physical <code>Connection</code> will remain open until the garbage collector comes around and sees that it is unreachable. GC will invoke the <code>finalize</code> method, but there are JDBC drivers that do not implement the <code>finalize,</code> at least not in the same way that <code>Connection.close</code> is implemented. The resulting behavior is that while the JVM will reclaim memory due to unreachable objects being collected, resources (including memory) associated with the <code>Connection</code> object might not be reclaimed.</p>\n<p>As such, Connection's final method does not clean up everything. One might find that the physical <code>Connection</code> to the database server will last several garbage collection cycles until the database server eventually figures out that the <code>Connection</code> is not alive (if it does) and should be closed.</p>\n<p>Even if the JDBC driver implemented <code>finalize</code>, the compiler can throw exceptions during finalization. The resulting behavior is that any memory associated with the now &quot;dormant&quot; object will not be reclaimed by the compiler, as <code>finalize</code> is guaranteed to be invoked only once.</p>\n<p>The above scenario of encountering exceptions during object finalization is related to another scenario that could lead to a memory leak - object resurrection. Object resurrection is often done intentionally by creating a strong reference to the object from being finalized, from another object. When object resurrection is misused it will lead to a memory leak in combination with other sources of memory leaks.</p>\n<p>There are plenty more examples that you can conjure up - like</p>\n<ul>\n<li>Managing a <code>List</code> instance where you are only adding to the list and not deleting from it (although you should be getting rid of elements you no longer need), or</li>\n<li>Opening <code>Sockets</code> or <code>Files,</code> but not closing them when they are no longer needed (similar to the above example involving the <code>Connection</code> class).</li>\n<li>Not unloading Singletons when bringing down a Java EE application. The Classloader that loaded the singleton class will retain a reference to the class, and hence the singleton instance will never be collected by the JVM. When a new instance of the application is deployed, a new class loader is usually created, and the former class loader will continue to exist due to the singleton.</li>\n</ul>\n"},{"comments":[{"owner":{"account_id":278464,"reputation":6672,"user_id":573057,"accept_rate":89,"display_name":"earcam"},"score":227,"creation_date":1309193716,"post_id":6471947,"comment_id":7639896,"body_markdown":"+1 ClassLoader leaks are some of the most commonly painful memory leaks in the JEE world, often caused by 3rd party libs that transform data (BeanUtils, XML/JSON codecs).  This can happen when the lib is loaded outside your application&#39;s root classloader but holds references to your classes (eg. by caching).  When you undeploy/redeploy your app the JVM is unable to garbage collect the app&#39;s classloader (and therefore all classes loaded by it), so with repeat deploys the app server eventually borks.  If lucky you get a clue with ClassCastException z.x.y.Abc cannot be cast to z.x.y.Abc","body":"+1 ClassLoader leaks are some of the most commonly painful memory leaks in the JEE world, often caused by 3rd party libs that transform data (BeanUtils, XML/JSON codecs).  This can happen when the lib is loaded outside your application&#39;s root classloader but holds references to your classes (eg. by caching).  When you undeploy/redeploy your app the JVM is unable to garbage collect the app&#39;s classloader (and therefore all classes loaded by it), so with repeat deploys the app server eventually borks.  If lucky you get a clue with ClassCastException z.x.y.Abc cannot be cast to z.x.y.Abc"},{"owner":{"account_id":210669,"reputation":7147,"user_id":462408,"accept_rate":88,"display_name":"Adrian M"},"score":68,"creation_date":1310116082,"post_id":6471947,"comment_id":7818746,"body_markdown":"+1: Classloader leaks are a nightmare. I spent weeks trying to figure them out. The sad thing is, as what @earcam has said, they are mostly caused by 3rd party libs and also most profilers can&#39;t detect these leaks. There&#39;s a good and clear explanation on this blog about Classloader leaks. http://blogs.oracle.com/fkieviet/entry/classloader_leaks_the_dreaded_java","body":"+1: Classloader leaks are a nightmare. I spent weeks trying to figure them out. The sad thing is, as what @earcam has said, they are mostly caused by 3rd party libs and also most profilers can&#39;t detect these leaks. There&#39;s a good and clear explanation on this blog about Classloader leaks. <a href=\"http://blogs.oracle.com/fkieviet/entry/classloader_leaks_the_dreaded_java\" rel=\"nofollow noreferrer\">blogs.oracle.com/fkieviet/entry/&hellip;</a>"}],"tags":[],"owner":{"account_id":43861,"reputation":59786,"user_id":128397,"accept_rate":82,"display_name":"Daniel Pryden"},"comment_count":2,"down_vote_count":5,"up_vote_count":2592,"is_accepted":true,"score":2587,"last_activity_date":1574782304,"creation_date":1308938710,"answer_id":6471947,"question_id":6470651,"body_markdown":"Here&#39;s a good way to create a true memory leak (objects inaccessible by running code but still stored in memory) in pure Java:\r\n\r\n1. The application creates a long-running thread (or use a thread pool to leak even faster).\r\n2. The thread loads a class via an (optionally custom) `ClassLoader`.\r\n3. The class allocates a large chunk of memory (e.g. `new byte[1000000]`), stores a strong reference to it in a static field, and then stores a reference to itself in a `ThreadLocal`.  Allocating the extra memory is optional (leaking the class instance is enough), but it will make the leak work that much faster.\r\n4. The application clears all references to the custom class or the `ClassLoader` it was loaded from.\r\n5. Repeat.\r\n\r\nDue to the way `ThreadLocal` is implemented in Oracle&#39;s JDK, this creates a memory leak:\r\n\r\n - Each `Thread` has a private field `threadLocals`, which actually stores the thread-local values.\r\n - Each _key_ in this map is a weak reference to a `ThreadLocal` object, so after that `ThreadLocal` object is garbage-collected, its entry is removed from the map.\r\n - But each _value_ is a strong reference, so when a value (directly or indirectly) points to the `ThreadLocal` object that is its _key_, that object will neither be garbage-collected nor removed from the map as long as the thread lives.\r\n\r\nIn this example, the chain of strong references looks like this:\r\n\r\n`Thread` object → `threadLocals` map → instance of example class → example class → static `ThreadLocal` field → `ThreadLocal` object.\r\n\r\n(The `ClassLoader` doesn&#39;t really play a role in creating the leak, it just makes the leak worse because of this additional reference chain: example class → `ClassLoader` → all the classes it has loaded. It was even worse in many JVM implementations, especially prior to Java 7, because classes and `ClassLoader`s were allocated straight into permgen and were never garbage-collected at all.)\r\n\r\nA variation on this pattern is why application containers (like Tomcat) can leak memory like a sieve if you frequently redeploy applications which happen to use `ThreadLocal`s that in some way point back to themselves. This can happen for a number of subtle reasons and is often hard to debug and/or fix.\r\n\r\n**Update**: Since lots of people keep asking for it, [here&#39;s some example code that shows this behavior in action](https://gist.github.com/dpryden/b2bb29ee2d146901b4ae).\r\n\r\n&lt;!-- Note to future editors: do NOT add the code from the above Gist into this answer. See this discussion on Meta: https://meta.stackoverflow.com/questions/289814 --&gt;\r\n","title":"How can I create a memory leak in Java?","body":"<p>Here's a good way to create a true memory leak (objects inaccessible by running code but still stored in memory) in pure Java:</p>\n\n<ol>\n<li>The application creates a long-running thread (or use a thread pool to leak even faster).</li>\n<li>The thread loads a class via an (optionally custom) <code>ClassLoader</code>.</li>\n<li>The class allocates a large chunk of memory (e.g. <code>new byte[1000000]</code>), stores a strong reference to it in a static field, and then stores a reference to itself in a <code>ThreadLocal</code>.  Allocating the extra memory is optional (leaking the class instance is enough), but it will make the leak work that much faster.</li>\n<li>The application clears all references to the custom class or the <code>ClassLoader</code> it was loaded from.</li>\n<li>Repeat.</li>\n</ol>\n\n<p>Due to the way <code>ThreadLocal</code> is implemented in Oracle's JDK, this creates a memory leak:</p>\n\n<ul>\n<li>Each <code>Thread</code> has a private field <code>threadLocals</code>, which actually stores the thread-local values.</li>\n<li>Each <em>key</em> in this map is a weak reference to a <code>ThreadLocal</code> object, so after that <code>ThreadLocal</code> object is garbage-collected, its entry is removed from the map.</li>\n<li>But each <em>value</em> is a strong reference, so when a value (directly or indirectly) points to the <code>ThreadLocal</code> object that is its <em>key</em>, that object will neither be garbage-collected nor removed from the map as long as the thread lives.</li>\n</ul>\n\n<p>In this example, the chain of strong references looks like this:</p>\n\n<p><code>Thread</code> object → <code>threadLocals</code> map → instance of example class → example class → static <code>ThreadLocal</code> field → <code>ThreadLocal</code> object.</p>\n\n<p>(The <code>ClassLoader</code> doesn't really play a role in creating the leak, it just makes the leak worse because of this additional reference chain: example class → <code>ClassLoader</code> → all the classes it has loaded. It was even worse in many JVM implementations, especially prior to Java 7, because classes and <code>ClassLoader</code>s were allocated straight into permgen and were never garbage-collected at all.)</p>\n\n<p>A variation on this pattern is why application containers (like Tomcat) can leak memory like a sieve if you frequently redeploy applications which happen to use <code>ThreadLocal</code>s that in some way point back to themselves. This can happen for a number of subtle reasons and is often hard to debug and/or fix.</p>\n\n<p><strong>Update</strong>: Since lots of people keep asking for it, <a href=\"https://gist.github.com/dpryden/b2bb29ee2d146901b4ae\" rel=\"noreferrer\">here's some example code that shows this behavior in action</a>.</p>\n\n\n"},{"comments":[{"owner":{"account_id":33655,"reputation":26403,"user_id":94363,"accept_rate":74,"display_name":"rds"},"score":5,"creation_date":1311352000,"post_id":6473952,"comment_id":8062580,"body_markdown":"And where is the memory leak here?","body":"And where is the memory leak here?"},{"owner":{"account_id":61566,"reputation":68934,"user_id":183406,"accept_rate":74,"display_name":"meriton"},"score":34,"creation_date":1311427592,"post_id":6473952,"comment_id":8073424,"body_markdown":"@maniek: I did not mean to imply that this code exhibits a memory leak. I quoted to it to show that sometimes non-obvious code is required to avoid accidental object retention.","body":"@maniek: I did not mean to imply that this code exhibits a memory leak. I quoted to it to show that sometimes non-obvious code is required to avoid accidental object retention."}],"tags":[],"owner":{"account_id":61566,"reputation":68934,"user_id":183406,"accept_rate":74,"display_name":"meriton"},"comment_count":2,"down_vote_count":1,"up_vote_count":131,"is_accepted":false,"score":130,"last_activity_date":1605938830,"creation_date":1308950917,"answer_id":6473952,"question_id":6470651,"body_markdown":"Probably one of the simplest examples of a potential memory leak, and how to avoid it, is the implementation of ArrayList.remove(int):\r\n\r\n\r\n\tpublic E remove(int index) {\r\n\t\tRangeCheck(index);\r\n\r\n\t\tmodCount++;\r\n\t\tE oldValue = (E) elementData[index];\r\n\r\n\t\tint numMoved = size - index - 1;\r\n\t\tif (numMoved &gt; 0)\r\n\t\t\tSystem.arraycopy(elementData, index + 1, elementData, index,\r\n\t\t\t\t\tnumMoved);\r\n\t\telementData[--size] = null; // (!) Let gc do its work\r\n\r\n\t\treturn oldValue;\r\n\t}\r\n\r\nIf you were implementing it yourself, would you have thought to clear the array element that is no longer used (`elementData[--size] = null`)? That reference might keep a huge object alive ...\r\n\r\n\r\n\r\n","title":"How can I create a memory leak in Java?","body":"<p>Probably one of the simplest examples of a potential memory leak, and how to avoid it, is the implementation of ArrayList.remove(int):</p>\n<pre><code>public E remove(int index) {\n    RangeCheck(index);\n\n    modCount++;\n    E oldValue = (E) elementData[index];\n\n    int numMoved = size - index - 1;\n    if (numMoved &gt; 0)\n        System.arraycopy(elementData, index + 1, elementData, index,\n                numMoved);\n    elementData[--size] = null; // (!) Let gc do its work\n\n    return oldValue;\n}\n</code></pre>\n<p>If you were implementing it yourself, would you have thought to clear the array element that is no longer used (<code>elementData[--size] = null</code>)? That reference might keep a huge object alive ...</p>\n"},{"tags":[],"owner":{"account_id":72987,"reputation":3238,"user_id":210445,"accept_rate":70,"display_name":"pillingworth"},"comment_count":0,"down_vote_count":0,"up_vote_count":41,"is_accepted":false,"score":41,"last_activity_date":1455637224,"creation_date":1309268843,"answer_id":6507454,"question_id":6470651,"body_markdown":"A common example of this in GUI code is when creating a widget/component and adding a listener to some static/application scoped object and then not removing the listener when the widget is destroyed. Not only do you get a memory leak, but also a performance hit as when whatever you are listening to fires events, all your old listeners are called too.\r\n","title":"How can I create a memory leak in Java?","body":"<p>A common example of this in GUI code is when creating a widget/component and adding a listener to some static/application scoped object and then not removing the listener when the widget is destroyed. Not only do you get a memory leak, but also a performance hit as when whatever you are listening to fires events, all your old listeners are called too.</p>\n"},{"comments":[{"owner":{"account_id":295869,"reputation":73614,"user_id":600500,"accept_rate":54,"display_name":"Paŭlo Ebermann"},"score":4,"creation_date":1309652314,"post_id":6532172,"comment_id":7732066,"body_markdown":"Just to nitpick your example code: I think numbers (or strings starting with numbers) are not allowed as element names in XML.","body":"Just to nitpick your example code: I think numbers (or strings starting with numbers) are not allowed as element names in XML."},{"owner":{"account_id":69636,"reputation":3071,"user_id":202504,"display_name":"jmiserez"},"score":0,"creation_date":1492544828,"post_id":6532172,"comment_id":74017644,"body_markdown":"Note that this is no longer true for JDK 7+, where String interning happens on the heap. See this article for a detailed writeup: http://java-performance.info/string-intern-in-java-6-7-8/","body":"Note that this is no longer true for JDK 7+, where String interning happens on the heap. See this article for a detailed writeup: <a href=\"http://java-performance.info/string-intern-in-java-6-7-8/\" rel=\"nofollow noreferrer\">java-performance.info/string-intern-in-java-6-7-8</a>"},{"owner":{"account_id":4237678,"reputation":566,"user_id":3913051,"accept_rate":29,"display_name":"anubhs"},"score":0,"creation_date":1591117423,"post_id":6532172,"comment_id":109931866,"body_markdown":"So, i think using StringBuffer in place of String would resolve this problem? wont it?","body":"So, i think using StringBuffer in place of String would resolve this problem? wont it?"}],"tags":[],"owner":{"account_id":136008,"reputation":682,"user_id":339243,"display_name":"Ron"},"comment_count":3,"down_vote_count":0,"up_vote_count":36,"is_accepted":false,"score":36,"last_activity_date":1455637464,"creation_date":1309423159,"answer_id":6532172,"question_id":6470651,"body_markdown":"I have had a nice &quot;memory leak&quot; in relation to PermGen and XML parsing once.\r\nThe XML parser we used (I can&#39;t remember which one it was) did a String.intern() on tag names, to make comparison faster.\r\nOne of our customers had the great idea to store data values not in XML attributes or text, but as tagnames, so we had a document like:\r\n\r\n    &lt;data&gt;\r\n       &lt;1&gt;bla&lt;/1&gt;\r\n       &lt;2&gt;foo&lt;/&gt;\r\n       ...\r\n    &lt;/data&gt;\r\n\r\nIn fact, they did not use numbers but longer textual IDs (around 20 characters), which were unique and came in at a rate of 10-15 million a day. That makes 200&amp;nbsp;MB of rubbish a day, which is never needed again, and never GCed (since it is in PermGen). We had permgen set to 512&amp;nbsp;MB, so it took around two days for the out-of-memory exception (OOME) to arrive...\r\n","title":"How can I create a memory leak in Java?","body":"<p>I have had a nice \"memory leak\" in relation to PermGen and XML parsing once.\nThe XML parser we used (I can't remember which one it was) did a String.intern() on tag names, to make comparison faster.\nOne of our customers had the great idea to store data values not in XML attributes or text, but as tagnames, so we had a document like:</p>\n\n<pre><code>&lt;data&gt;\n   &lt;1&gt;bla&lt;/1&gt;\n   &lt;2&gt;foo&lt;/&gt;\n   ...\n&lt;/data&gt;\n</code></pre>\n\n<p>In fact, they did not use numbers but longer textual IDs (around 20 characters), which were unique and came in at a rate of 10-15 million a day. That makes 200&nbsp;MB of rubbish a day, which is never needed again, and never GCed (since it is in PermGen). We had permgen set to 512&nbsp;MB, so it took around two days for the out-of-memory exception (OOME) to arrive...</p>\n"},{"comments":[{"owner":{"account_id":103559,"reputation":73828,"user_id":277304,"accept_rate":66,"display_name":"leonbloy"},"score":28,"creation_date":1310176480,"post_id":6540248,"comment_id":7833433,"body_markdown":"`Creating but not starting a Thread...` Yikes, I was badly bitten by this one some centuries ago! (Java 1.3)","body":"<code>Creating but not starting a Thread...</code> Yikes, I was badly bitten by this one some centuries ago! (Java 1.3)"},{"owner":{"account_id":266709,"reputation":11856,"user_id":554431,"display_name":"bestsss"},"score":0,"creation_date":1310194328,"post_id":6540248,"comment_id":7834914,"body_markdown":"@leonbloy, before it was even worse as the thread was added straight to the threadgroup, not starting meant very hard leak. Not it just increases the `unstarted` count but that prevents the thread group from destroying (lesser evil but still a leak)","body":"@leonbloy, before it was even worse as the thread was added straight to the threadgroup, not starting meant very hard leak. Not it just increases the <code>unstarted</code> count but that prevents the thread group from destroying (lesser evil but still a leak)"},{"owner":{"account_id":5530,"reputation":63236,"user_id":8946,"accept_rate":84,"display_name":"Lawrence Dol"},"score":0,"creation_date":1510109223,"post_id":6540248,"comment_id":81291088,"body_markdown":"Thank you! **&quot;Calling `ThreadGroup.destroy()` when the ThreadGroup has no threads itself...&quot;** is an incredibly subtle bug; I&#39;ve been chasing this for hours, led astray because enumerating the thread in my control GUI showed nothing, but the thread group and, presumably, at least one child group would not go away.","body":"Thank you! <b>&quot;Calling <code>ThreadGroup.destroy()</code> when the ThreadGroup has no threads itself...&quot;</b> is an incredibly subtle bug; I&#39;ve been chasing this for hours, led astray because enumerating the thread in my control GUI showed nothing, but the thread group and, presumably, at least one child group would not go away."},{"owner":{"account_id":5530,"reputation":63236,"user_id":8946,"accept_rate":84,"display_name":"Lawrence Dol"},"score":2,"creation_date":1510261774,"post_id":6540248,"comment_id":81372536,"body_markdown":"@bestsss : I&#39;m curious, why would you want to remove a shutdown hook, given that it runs at, well, JVM shutdown?","body":"@bestsss : I&#39;m curious, why would you want to remove a shutdown hook, given that it runs at, well, JVM shutdown?"},{"owner":{"account_id":5530,"reputation":63236,"user_id":8946,"accept_rate":84,"display_name":"Lawrence Dol"},"score":0,"creation_date":1599840538,"post_id":6540248,"comment_id":112909393,"body_markdown":"@user253751 : This is in the context of memory leaks. In that context failing to remove a shutdown hook after it&#39;s used is not a leak because the JVM is shutting down. Granted, though, if you only temporarily need to do something on shutdown, then not removing it and continually adding new handlers would leak.","body":"@user253751 : This is in the context of memory leaks. In that context failing to remove a shutdown hook after it&#39;s used is not a leak because the JVM is shutting down. Granted, though, if you only temporarily need to do something on shutdown, then not removing it and continually adding new handlers would leak."},{"owner":{"account_id":1175385,"reputation":22626,"user_id":1151521,"accept_rate":77,"display_name":"Aleksandr Dubinsky"},"score":0,"creation_date":1642433382,"post_id":6540248,"comment_id":125063527,"body_markdown":"&quot;if the thread keeps going more than expected the life the context ClassLoader, it is a pure nice little leak&quot; Can this be reworded? I don&#39;t understand.","body":"&quot;if the thread keeps going more than expected the life the context ClassLoader, it is a pure nice little leak&quot; Can this be reworded? I don&#39;t understand."}],"tags":[],"owner":{"account_id":266709,"reputation":11856,"user_id":554431,"display_name":"bestsss"},"comment_count":6,"down_vote_count":0,"up_vote_count":298,"is_accepted":false,"score":298,"last_activity_date":1455637946,"creation_date":1309463113,"answer_id":6540248,"question_id":6470651,"body_markdown":"Below there will be a non-obvious case where Java leaks, besides the standard case of forgotten listeners, static references, bogus/modifiable keys in hashmaps, or just threads stuck without any chance to end their life-cycle.\r\n\r\n- `File.deleteOnExit()` - always leaks the string, &lt;del&gt;if the string is a substring, the leak is even worse (the underlying char[] is also leaked)&lt;/del&gt; - *in Java&amp;nbsp;7 substring also copies the `char[]`, so the later doesn&#39;t apply*; @Daniel, no needs for votes, though.\r\n\r\nI&#39;ll concentrate on threads to show the danger of unmanaged threads mostly, don&#39;t wish to even touch swing.\r\n\r\n- `Runtime.addShutdownHook` and not remove... and then even with removeShutdownHook due to a bug in ThreadGroup class regarding unstarted threads it may not get collected, effectively leak the ThreadGroup. JGroup has the leak in GossipRouter.\r\n\r\n- Creating, but not starting, a `Thread` goes into the same category as above.\r\n\r\n- Creating a thread inherits the `ContextClassLoader` and `AccessControlContext`, plus the `ThreadGroup` and any `InheritedThreadLocal`, all those references are potential leaks, along with the entire classes loaded by the classloader and all static references, and ja-ja. The effect is especially visible with the entire j.u.c.Executor framework that features a super simple `ThreadFactory` interface, yet most developers have no clue of the lurking danger. Also a lot of libraries do start threads upon request (way too many industry popular libraries).\r\n\r\n- `ThreadLocal` caches; those are evil in many cases. I am sure everyone has seen quite a bit of simple caches based on ThreadLocal, well the bad news: if the thread keeps going more than expected the life the context ClassLoader, it is a pure nice little leak. Do not use ThreadLocal caches unless really needed.\r\n\r\n- Calling `ThreadGroup.destroy()` when the ThreadGroup has no threads itself, but it still keeps child ThreadGroups. A bad leak that will prevent the ThreadGroup to remove from its parent, but all the children become un-enumerateable.\r\n\r\n- Using WeakHashMap and the value (in)directly references the key. This is a hard one to find without a heap dump. That applies to all extended `Weak/SoftReference` that might keep a hard reference back to the guarded object.\r\n\r\n- Using `java.net.URL` with the HTTP(S) protocol and loading the resource from(!). This one is special, the `KeepAliveCache` creates a new thread in the system ThreadGroup which leaks the current thread&#39;s context classloader. The thread is created upon the first request when no alive thread exists, so either you may get lucky or just leak. *The leak is already fixed in Java&amp;nbsp;7 and the code that creates thread properly removes the context classloader.* There are few more cases (&lt;del&gt;like ImageFetcher&lt;/del&gt;, *also fixed*) of creating similar threads.\r\n\r\n- Using `InflaterInputStream` passing `new java.util.zip.Inflater()` in the constructor (`PNGImageDecoder` for instance) and not calling `end()` of the inflater. Well, if you pass in the constructor with just `new`, no chance... And yes, calling `close()` on the stream does not close the inflater if it&#39;s manually passed as constructor parameter. This is not a true leak since it&#39;d be released by the finalizer... when it deems it necessary. Till that moment it eats native memory so badly it can cause Linux oom_killer to kill the process with impunity. The main issue is that finalization in Java is very unreliable and G1 made it worse till 7.0.2. Moral of the story: release native resources as soon as you can; the finalizer is just too poor.\r\n\r\n- The same case with `java.util.zip.Deflater`. This one is far worse since Deflater is memory hungry in Java, i.e. always uses 15&amp;nbsp;bits (max) and 8&amp;nbsp;memory levels (9 is max) allocating several hundreds KB of native memory. Fortunately, `Deflater` is not widely used and to my knowledge JDK contains no misuses. Always call `end()` if you manually create a `Deflater` or `Inflater`. The best part of the last two: *you can&#39;t find them via normal profiling tools available.*\r\n\r\n*(I can add some more time wasters I have encountered upon request.)*\r\n\r\nGood luck and stay safe; leaks are evil!\r\n","title":"How can I create a memory leak in Java?","body":"<p>Below there will be a non-obvious case where Java leaks, besides the standard case of forgotten listeners, static references, bogus/modifiable keys in hashmaps, or just threads stuck without any chance to end their life-cycle.</p>\n\n<ul>\n<li><code>File.deleteOnExit()</code> - always leaks the string, <del>if the string is a substring, the leak is even worse (the underlying char[] is also leaked)</del> - <em>in Java&nbsp;7 substring also copies the <code>char[]</code>, so the later doesn't apply</em>; @Daniel, no needs for votes, though.</li>\n</ul>\n\n<p>I'll concentrate on threads to show the danger of unmanaged threads mostly, don't wish to even touch swing.</p>\n\n<ul>\n<li><p><code>Runtime.addShutdownHook</code> and not remove... and then even with removeShutdownHook due to a bug in ThreadGroup class regarding unstarted threads it may not get collected, effectively leak the ThreadGroup. JGroup has the leak in GossipRouter.</p></li>\n<li><p>Creating, but not starting, a <code>Thread</code> goes into the same category as above.</p></li>\n<li><p>Creating a thread inherits the <code>ContextClassLoader</code> and <code>AccessControlContext</code>, plus the <code>ThreadGroup</code> and any <code>InheritedThreadLocal</code>, all those references are potential leaks, along with the entire classes loaded by the classloader and all static references, and ja-ja. The effect is especially visible with the entire j.u.c.Executor framework that features a super simple <code>ThreadFactory</code> interface, yet most developers have no clue of the lurking danger. Also a lot of libraries do start threads upon request (way too many industry popular libraries).</p></li>\n<li><p><code>ThreadLocal</code> caches; those are evil in many cases. I am sure everyone has seen quite a bit of simple caches based on ThreadLocal, well the bad news: if the thread keeps going more than expected the life the context ClassLoader, it is a pure nice little leak. Do not use ThreadLocal caches unless really needed.</p></li>\n<li><p>Calling <code>ThreadGroup.destroy()</code> when the ThreadGroup has no threads itself, but it still keeps child ThreadGroups. A bad leak that will prevent the ThreadGroup to remove from its parent, but all the children become un-enumerateable.</p></li>\n<li><p>Using WeakHashMap and the value (in)directly references the key. This is a hard one to find without a heap dump. That applies to all extended <code>Weak/SoftReference</code> that might keep a hard reference back to the guarded object.</p></li>\n<li><p>Using <code>java.net.URL</code> with the HTTP(S) protocol and loading the resource from(!). This one is special, the <code>KeepAliveCache</code> creates a new thread in the system ThreadGroup which leaks the current thread's context classloader. The thread is created upon the first request when no alive thread exists, so either you may get lucky or just leak. <em>The leak is already fixed in Java&nbsp;7 and the code that creates thread properly removes the context classloader.</em> There are few more cases (<del>like ImageFetcher</del>, <em>also fixed</em>) of creating similar threads.</p></li>\n<li><p>Using <code>InflaterInputStream</code> passing <code>new java.util.zip.Inflater()</code> in the constructor (<code>PNGImageDecoder</code> for instance) and not calling <code>end()</code> of the inflater. Well, if you pass in the constructor with just <code>new</code>, no chance... And yes, calling <code>close()</code> on the stream does not close the inflater if it's manually passed as constructor parameter. This is not a true leak since it'd be released by the finalizer... when it deems it necessary. Till that moment it eats native memory so badly it can cause Linux oom_killer to kill the process with impunity. The main issue is that finalization in Java is very unreliable and G1 made it worse till 7.0.2. Moral of the story: release native resources as soon as you can; the finalizer is just too poor.</p></li>\n<li><p>The same case with <code>java.util.zip.Deflater</code>. This one is far worse since Deflater is memory hungry in Java, i.e. always uses 15&nbsp;bits (max) and 8&nbsp;memory levels (9 is max) allocating several hundreds KB of native memory. Fortunately, <code>Deflater</code> is not widely used and to my knowledge JDK contains no misuses. Always call <code>end()</code> if you manually create a <code>Deflater</code> or <code>Inflater</code>. The best part of the last two: <em>you can't find them via normal profiling tools available.</em></p></li>\n</ul>\n\n<p><em>(I can add some more time wasters I have encountered upon request.)</em></p>\n\n<p>Good luck and stay safe; leaks are evil!</p>\n"},{"comments":[{"owner":{"account_id":23980,"reputation":411,"user_id":60624,"display_name":"ehabkost"},"score":48,"creation_date":1311315156,"post_id":6545142,"comment_id":8052701,"body_markdown":"I find it funny that on other answers people are looking for those edge cases and tricks and seem to be completely missing the point. They could just show code that keep useless references to objects that will never use again, and never remove those references; one may say those cases are not &quot;true&quot; memory leaks because there are still references to those objects around, but if the program never use those references again and also never drop them, it is completely equivalent to (and as bad as) a &quot;true memory leak&quot;.","body":"I find it funny that on other answers people are looking for those edge cases and tricks and seem to be completely missing the point. They could just show code that keep useless references to objects that will never use again, and never remove those references; one may say those cases are not &quot;true&quot; memory leaks because there are still references to those objects around, but if the program never use those references again and also never drop them, it is completely equivalent to (and as bad as) a &quot;true memory leak&quot;."}],"tags":[],"owner":{"account_id":272843,"reputation":4000,"user_id":564145,"display_name":"Nicolas Bousquet"},"comment_count":1,"down_vote_count":1,"up_vote_count":250,"is_accepted":false,"score":249,"last_activity_date":1518506867,"creation_date":1309506841,"answer_id":6545142,"question_id":6470651,"body_markdown":"Most examples here are &quot;too complex&quot;. They are edge cases. With these examples, the programmer made a mistake (like don&#39;t redefining equals/hashcode), or has been bitten by a corner case of the JVM/JAVA (load of class with static...). I think that&#39;s not the type of example an interviewer want or even the most common case.\r\n\r\nBut there are really simpler cases for memory leaks. The garbage collector only frees what is no longer referenced. We as Java developers don&#39;t care about memory. We allocate it when needed and let it be freed automatically. Fine.\r\n\r\nBut any long-lived application tend to have shared state. It can be anything, statics, singletons... Often non-trivial applications tend to make complex objects graphs. Just forgetting to set a reference to null or more often forgetting to remove one object from a collection is enough to make a memory leak.\r\n\r\nOf course all sort of listeners (like UI listeners), caches, or any long-lived shared state tend to produce memory leak if not properly handled. What shall be understood is that this is not a Java corner case, or a problem with the garbage collector. It is a design problem. We design that we add a listener to a long-lived object, but we don&#39;t remove the listener when no longer needed. We cache objects, but we have no strategy to remove them from the cache.\r\n\r\nWe maybe have a complex graph that store the previous state that is needed by a computation. But the previous state is itself linked to the state before and so on.\r\n\r\nLike we have to close SQL connections or files. We need to set proper references to null and remove elements from the collection. We shall have proper caching strategies (maximum memory size, number of elements, or timers). All objects that allow a listener to be notified must provide both a addListener and removeListener method. And when these notifiers are no longer used, they must clear their listener list.\r\n\r\nA memory leak is indeed truly possible and is perfectly predictable. No need for special language features or corner cases. Memory leaks are either an indicator that something is maybe missing or even of design problems.\r\n","title":"How can I create a memory leak in Java?","body":"<p>Most examples here are \"too complex\". They are edge cases. With these examples, the programmer made a mistake (like don't redefining equals/hashcode), or has been bitten by a corner case of the JVM/JAVA (load of class with static...). I think that's not the type of example an interviewer want or even the most common case.</p>\n\n<p>But there are really simpler cases for memory leaks. The garbage collector only frees what is no longer referenced. We as Java developers don't care about memory. We allocate it when needed and let it be freed automatically. Fine.</p>\n\n<p>But any long-lived application tend to have shared state. It can be anything, statics, singletons... Often non-trivial applications tend to make complex objects graphs. Just forgetting to set a reference to null or more often forgetting to remove one object from a collection is enough to make a memory leak.</p>\n\n<p>Of course all sort of listeners (like UI listeners), caches, or any long-lived shared state tend to produce memory leak if not properly handled. What shall be understood is that this is not a Java corner case, or a problem with the garbage collector. It is a design problem. We design that we add a listener to a long-lived object, but we don't remove the listener when no longer needed. We cache objects, but we have no strategy to remove them from the cache.</p>\n\n<p>We maybe have a complex graph that store the previous state that is needed by a computation. But the previous state is itself linked to the state before and so on.</p>\n\n<p>Like we have to close SQL connections or files. We need to set proper references to null and remove elements from the collection. We shall have proper caching strategies (maximum memory size, number of elements, or timers). All objects that allow a listener to be notified must provide both a addListener and removeListener method. And when these notifiers are no longer used, they must clear their listener list.</p>\n\n<p>A memory leak is indeed truly possible and is perfectly predictable. No need for special language features or corner cases. Memory leaks are either an indicator that something is maybe missing or even of design problems.</p>\n"},{"comments":[{"owner":{"account_id":10045,"reputation":5505,"user_id":18796,"display_name":"Ian McLaird"},"score":217,"creation_date":1310530131,"post_id":6548647,"comment_id":7892919,"body_markdown":"I&#39;d disagree that context and session attributes are &quot;leaks.&quot;  They&#39;re just long-lived variables.  And the static final field is more or less just a constant.  Maybe large constants should be avoided, but I don&#39;t think it&#39;s fair to call it a memory leak.","body":"I&#39;d disagree that context and session attributes are &quot;leaks.&quot;  They&#39;re just long-lived variables.  And the static final field is more or less just a constant.  Maybe large constants should be avoided, but I don&#39;t think it&#39;s fair to call it a memory leak."},{"owner":{"account_id":266709,"reputation":11856,"user_id":554431,"display_name":"bestsss"},"score":100,"creation_date":1310927905,"post_id":6548647,"comment_id":7966870,"body_markdown":"*(Unclosed) open streams ( file , network etc... )*, doesn&#39;t leak for real, during finalization (which will be after the next GC cycle) close() is going to be scheduled (`close()` is usually not invoked in the finalizer thread since might be a blocking operation). It&#39;s a bad practice not to close, but it doesn&#39;t cause a leak. Unclosed java.sql.Connection is the same.","body":"<i>(Unclosed) open streams ( file , network etc... )</i>, doesn&#39;t leak for real, during finalization (which will be after the next GC cycle) close() is going to be scheduled (<code>close()</code> is usually not invoked in the finalizer thread since might be a blocking operation). It&#39;s a bad practice not to close, but it doesn&#39;t cause a leak. Unclosed java.sql.Connection is the same."},{"owner":{"account_id":58822,"reputation":31113,"user_id":176071,"accept_rate":100,"display_name":"mbauman"},"score":41,"creation_date":1311298344,"post_id":6548647,"comment_id":8050748,"body_markdown":"In most sane JVMs, it appears as though the String class only has a weak reference on its `intern` hashtable contents.  As such, it *is* garbage collected properly and not a leak. (but IANAJP) http://mindprod.com/jgloss/interned.html#GC","body":"In most sane JVMs, it appears as though the String class only has a weak reference on its <code>intern</code> hashtable contents.  As such, it <i>is</i> garbage collected properly and not a leak. (but IANAJP) <a href=\"http://mindprod.com/jgloss/interned.html#GC\" rel=\"nofollow noreferrer\">mindprod.com/jgloss/interned.html#GC</a>"}],"tags":[],"owner":{"account_id":350533,"reputation":10937,"user_id":686478,"accept_rate":59,"display_name":"Prashant Bhate"},"comment_count":3,"down_vote_count":26,"up_vote_count":1374,"is_accepted":false,"score":1348,"last_activity_date":1672295805,"creation_date":1309527235,"answer_id":6548647,"question_id":6470651,"body_markdown":"**Static field holding an object reference [especially a** *final* **field]**\r\n```\r\nclass MemorableClass {\r\n    static final ArrayList list = new ArrayList(100);\r\n}\r\n```\r\n**(Unclosed) open streams (file , network, etc.)**\r\n```\r\ntry {\r\n    BufferedReader br = new BufferedReader(new FileReader(inputFile));\r\n    ...\r\n    ...\r\n} catch (Exception e) {\r\n    e.printStackTrace();\r\n}\r\n```\r\n**Unclosed connections**\r\n```\r\ntry {\r\n    Connection conn = ConnectionFactory.getConnection();\r\n    ...\r\n    ...\r\n} catch (Exception e) {\r\n    e.printStackTrace();\r\n}\r\n```\r\n**Areas that are unreachable from JVM&#39;s garbage collector**, such as memory allocated through native methods.\r\n\r\nIn web applications, some objects are stored in application scope until the application is explicitly stopped or removed.\r\n```\r\ngetServletContext().setAttribute(&quot;SOME_MAP&quot;, map);\r\n```\r\n**Incorrect or inappropriate JVM options**, such as the `noclassgc` option on IBM JDK that prevents unused class garbage collection\r\n\r\nSee [IBM JDK settings][2].\r\n\r\n  [1]: http://download.oracle.com/javase/6/docs/api/java/lang/String.html#intern%28%29\r\n  [2]: http://publib.boulder.ibm.com/infocenter/wasinfo/v6r0/index.jsp?topic=/com.ibm.websphere.express.doc/info/exp/ae/tprf_tunejvm.html","title":"How can I create a memory leak in Java?","body":"<p><strong>Static field holding an object reference [especially a</strong> <em>final</em> <strong>field]</strong></p>\n<pre><code>class MemorableClass {\n    static final ArrayList list = new ArrayList(100);\n}\n</code></pre>\n<p><strong>(Unclosed) open streams (file , network, etc.)</strong></p>\n<pre><code>try {\n    BufferedReader br = new BufferedReader(new FileReader(inputFile));\n    ...\n    ...\n} catch (Exception e) {\n    e.printStackTrace();\n}\n</code></pre>\n<p><strong>Unclosed connections</strong></p>\n<pre><code>try {\n    Connection conn = ConnectionFactory.getConnection();\n    ...\n    ...\n} catch (Exception e) {\n    e.printStackTrace();\n}\n</code></pre>\n<p><strong>Areas that are unreachable from JVM's garbage collector</strong>, such as memory allocated through native methods.</p>\n<p>In web applications, some objects are stored in application scope until the application is explicitly stopped or removed.</p>\n<pre><code>getServletContext().setAttribute(&quot;SOME_MAP&quot;, map);\n</code></pre>\n<p><strong>Incorrect or inappropriate JVM options</strong>, such as the <code>noclassgc</code> option on IBM JDK that prevents unused class garbage collection</p>\n<p>See <a href=\"http://publib.boulder.ibm.com/infocenter/wasinfo/v6r0/index.jsp?topic=/com.ibm.websphere.express.doc/info/exp/ae/tprf_tunejvm.html\" rel=\"noreferrer\">IBM JDK settings</a>.</p>\n"},{"comments":[{"owner":{"account_id":86546,"reputation":2020,"user_id":240581,"display_name":"DaveC"},"score":28,"creation_date":1309715957,"post_id":6552732,"comment_id":7737960,"body_markdown":"Whenever I have asked that question, I am looking for a pretty simple answer - keep growing a queue, no finally close db etc, not odd classloader/thread details, implies they understand what the gc can and cannot do for you.  Depends on the job you are interviewing for I guess.","body":"Whenever I have asked that question, I am looking for a pretty simple answer - keep growing a queue, no finally close db etc, not odd classloader/thread details, implies they understand what the gc can and cannot do for you.  Depends on the job you are interviewing for I guess."}],"tags":[],"owner":{"account_id":403802,"reputation":228,"user_id":771769,"display_name":"PlayTank"},"comment_count":1,"down_vote_count":4,"up_vote_count":181,"is_accepted":false,"score":177,"last_activity_date":1564782378,"creation_date":1309550770,"answer_id":6552732,"question_id":6470651,"body_markdown":"The answer depends entirely on what the interviewer thought they were asking. \r\n\r\nIs it possible in practice to make Java leak? Of course it is, and there are plenty of examples in the other answers.\r\n\r\nBut there are multiple meta-questions that may have been being asked?\r\n\r\n- Is a theoretically &quot;perfect&quot; Java implementation vulnerable to leaks?\r\n- Does the candidate understand the difference between theory and reality?\r\n- Does the candidate understand how garbage collection works?\r\n- Or how garbage collection is supposed to work in an ideal case?\r\n- Do they know they can call other languages through native interfaces?\r\n- Do they know to leak memory in those other languages?\r\n- Does the candidate even know what memory management is, and what is going on behind the scene in Java?\r\n\r\nI&#39;m reading your meta-question as &quot;What&#39;s an answer I could have used in this interview situation&quot;. And hence, I&#39;m going to focus on interview skills instead of Java. I believe you&#39;re more likely to repeat the situation of not knowing the answer to a question in an interview than you are to be in a place of needing to know how to make Java leak. So, hopefully, this will help.\r\n\r\nOne of the most important skills you can develop for interviewing is learning to actively listen to the questions and working with the interviewer to extract their intent. Not only does this let you answer their question the way they want, but also shows that you have some vital communication skills. And when it comes down to a choice between many equally talented developers, I&#39;ll hire the one who listens, thinks, and understands before they respond every time.","title":"How can I create a memory leak in Java?","body":"<p>The answer depends entirely on what the interviewer thought they were asking. </p>\n\n<p>Is it possible in practice to make Java leak? Of course it is, and there are plenty of examples in the other answers.</p>\n\n<p>But there are multiple meta-questions that may have been being asked?</p>\n\n<ul>\n<li>Is a theoretically \"perfect\" Java implementation vulnerable to leaks?</li>\n<li>Does the candidate understand the difference between theory and reality?</li>\n<li>Does the candidate understand how garbage collection works?</li>\n<li>Or how garbage collection is supposed to work in an ideal case?</li>\n<li>Do they know they can call other languages through native interfaces?</li>\n<li>Do they know to leak memory in those other languages?</li>\n<li>Does the candidate even know what memory management is, and what is going on behind the scene in Java?</li>\n</ul>\n\n<p>I'm reading your meta-question as \"What's an answer I could have used in this interview situation\". And hence, I'm going to focus on interview skills instead of Java. I believe you're more likely to repeat the situation of not knowing the answer to a question in an interview than you are to be in a place of needing to know how to make Java leak. So, hopefully, this will help.</p>\n\n<p>One of the most important skills you can develop for interviewing is learning to actively listen to the questions and working with the interviewer to extract their intent. Not only does this let you answer their question the way they want, but also shows that you have some vital communication skills. And when it comes down to a choice between many equally talented developers, I'll hire the one who listens, thinks, and understands before they respond every time.</p>\n"},{"comments":[{"owner":{"account_id":15535,"reputation":82940,"user_id":32914,"accept_rate":65,"display_name":"Mason Wheeler"},"score":17,"creation_date":1390506870,"post_id":6556426,"comment_id":32132527,"body_markdown":"That&#39;s an extremely limited (and not very useful) definition of memory leaks.  The only definition that makes sense for practical purposes is &quot;a memory leak is any condition in which the program continues to hold memory allocated after the data it holds it is no longer needed.&quot;","body":"That&#39;s an extremely limited (and not very useful) definition of memory leaks.  The only definition that makes sense for practical purposes is &quot;a memory leak is any condition in which the program continues to hold memory allocated after the data it holds it is no longer needed.&quot;"},{"owner":{"account_id":204515,"reputation":11679,"user_id":452775,"accept_rate":63,"display_name":"Lii"},"score":0,"creation_date":1669016372,"post_id":6556426,"comment_id":131537886,"body_markdown":"The definition of the term on Wikipedia has changed. It is now this: *&quot;In computer science, a memory leak is a type of resource leak that occurs when a computer program incorrectly manages memory allocations in a way that memory which is no longer needed is not released.&quot;* This is the definition used by almost all posters, but not this one.","body":"The definition of the term on Wikipedia has changed. It is now this: <i>&quot;In computer science, a memory leak is a type of resource leak that occurs when a computer program incorrectly manages memory allocations in a way that memory which is no longer needed is not released.&quot;</i> This is the definition used by almost all posters, but not this one."}],"tags":[],"owner":{"account_id":129028,"reputation":39302,"user_id":327301,"accept_rate":66,"display_name":"yankee"},"comment_count":2,"down_vote_count":14,"up_vote_count":62,"is_accepted":false,"score":48,"last_activity_date":1620853601,"creation_date":1309602216,"answer_id":6556426,"question_id":6470651,"body_markdown":"I can copy my answer from here:\r\nhttps://stackoverflow.com/questions/4948529/easiest-way-to-cause-memory-leak-in-java/4948763\r\n\r\n&quot;A memory leak, in computer science (or leakage, in this context), occurs when a computer program consumes memory but is unable to release it back to the operating system.&quot; (Wikipedia)\r\n\r\nThe easy answer is: You can&#39;t. Java does automatic memory management and will free resources that are not needed for you. You can&#39;t stop this from happening. It will *always* be able to release the resources. In programs with manual memory management, this is different. You can get some memory in C using malloc(). To free the memory, you need the pointer that malloc returned and call free() on it. But if you don&#39;t have the pointer any more (overwritten, or lifetime exceeded), then you are unfortunately incapable of freeing this memory and thus you have a memory leak.\r\n\r\nAll the other answers so far are in my definition not really memory leaks. They all aim at filling the memory with pointless stuff real fast. But at any time you could still dereference the objects you created and thus freeing the memory --&gt; *no leak*. [acconrad&#39;s answer][1] comes pretty close though as I have to admit since his solution is effectively to just &quot;crash&quot; the garbage collector by forcing it in an endless loop).\r\n\r\nThe long answer is: You can get a memory leak by writing a library for Java using the JNI, which can have manual memory management and thus have memory leaks. If you call this library, your Java process will leak memory. Or, you can have bugs in the JVM, so that the JVM looses memory. There are probably bugs in the JVM, there may even be some known ones since garbage collection is not that trivial, but then it&#39;s still a bug. By design this is not possible. You may be asking for some Java code that is effected by such a bug. Sorry I don&#39;t know one and it might well not be a bug any more in the next Java version anyway.\r\n\r\n  [1]: https://stackoverflow.com/questions/4948529/easiest-way-to-cause-memory-leak-in-java/4948560#4948560\r\n\r\n\r\n","title":"How can I create a memory leak in Java?","body":"<p>I can copy my answer from here:\n<a href=\"https://stackoverflow.com/questions/4948529/easiest-way-to-cause-memory-leak-in-java/4948763\">Easiest way to cause memory leak in Java</a></p>\n<p>&quot;A memory leak, in computer science (or leakage, in this context), occurs when a computer program consumes memory but is unable to release it back to the operating system.&quot; (Wikipedia)</p>\n<p>The easy answer is: You can't. Java does automatic memory management and will free resources that are not needed for you. You can't stop this from happening. It will <em>always</em> be able to release the resources. In programs with manual memory management, this is different. You can get some memory in C using malloc(). To free the memory, you need the pointer that malloc returned and call free() on it. But if you don't have the pointer any more (overwritten, or lifetime exceeded), then you are unfortunately incapable of freeing this memory and thus you have a memory leak.</p>\n<p>All the other answers so far are in my definition not really memory leaks. They all aim at filling the memory with pointless stuff real fast. But at any time you could still dereference the objects you created and thus freeing the memory --&gt; <em>no leak</em>. <a href=\"https://stackoverflow.com/questions/4948529/easiest-way-to-cause-memory-leak-in-java/4948560#4948560\">acconrad's answer</a> comes pretty close though as I have to admit since his solution is effectively to just &quot;crash&quot; the garbage collector by forcing it in an endless loop).</p>\n<p>The long answer is: You can get a memory leak by writing a library for Java using the JNI, which can have manual memory management and thus have memory leaks. If you call this library, your Java process will leak memory. Or, you can have bugs in the JVM, so that the JVM looses memory. There are probably bugs in the JVM, there may even be some known ones since garbage collection is not that trivial, but then it's still a bug. By design this is not possible. You may be asking for some Java code that is effected by such a bug. Sorry I don't know one and it might well not be a bug any more in the next Java version anyway.</p>\n"},{"tags":[],"owner":{"account_id":153349,"reputation":7272,"user_id":368544,"accept_rate":80,"display_name":"Mart&#237;n Schonaker"},"comment_count":0,"down_vote_count":0,"up_vote_count":10,"is_accepted":false,"score":10,"last_activity_date":1309675791,"creation_date":1309675791,"answer_id":6561539,"question_id":6470651,"body_markdown":"I think that a valid example could be using ThreadLocal variables in an environment where threads are pooled. \r\n\r\nFor instance, using ThreadLocal variables in Servlets to communicate with other web components, having the threads being created by the container and maintaining the idle ones in a pool. ThreadLocal variables, if not correctly cleaned up, will live there until, possibly, the same web component overwrites their values.\r\n\r\nOf course, once identified, the problem can be solved easily.","title":"How can I create a memory leak in Java?","body":"<p>I think that a valid example could be using ThreadLocal variables in an environment where threads are pooled. </p>\n\n<p>For instance, using ThreadLocal variables in Servlets to communicate with other web components, having the threads being created by the container and maintaining the idle ones in a pool. ThreadLocal variables, if not correctly cleaned up, will live there until, possibly, the same web component overwrites their values.</p>\n\n<p>Of course, once identified, the problem can be solved easily.</p>\n"},{"comments":[{"owner":{"account_id":266709,"reputation":11856,"user_id":554431,"display_name":"bestsss"},"score":10,"creation_date":1309894691,"post_id":6564426,"comment_id":7770748,"body_markdown":"This is untrue. `finalize()` will not be called but the object will be collected once there won&#39;t be more references. Garbage collector is not &#39;called&#39; either.","body":"This is untrue. <code>finalize()</code> will not be called but the object will be collected once there won&#39;t be more references. Garbage collector is not &#39;called&#39; either."},{"owner":{"account_id":1834770,"reputation":15878,"user_id":1665365,"accept_rate":78,"display_name":"Tom"},"score":1,"creation_date":1355916998,"post_id":6564426,"comment_id":19240963,"body_markdown":"This answer is misleading, the `finalize()` method can only be called once by the JVM, but this does not mean that it cannot be re-garbage collected if the object is resurrected and then dereferenced again. If there is resource closing code in the `finalize()` method then this code will not get run again, this may cause a memory leak.","body":"This answer is misleading, the <code>finalize()</code> method can only be called once by the JVM, but this does not mean that it cannot be re-garbage collected if the object is resurrected and then dereferenced again. If there is resource closing code in the <code>finalize()</code> method then this code will not get run again, this may cause a memory leak."}],"tags":[],"owner":{"account_id":391221,"reputation":2460,"user_id":751751,"accept_rate":88,"display_name":"Ben"},"comment_count":2,"down_vote_count":0,"up_vote_count":16,"is_accepted":false,"score":16,"last_activity_date":1309714618,"creation_date":1309714618,"answer_id":6564426,"question_id":6470651,"body_markdown":"I don&#39;t think anyone has said this yet: you can resurrect an object by overriding the finalize() method such that finalize() stores a reference of this somewhere. The garbage collector will only be called once on the object so after that the object will never destroyed. ","title":"How can I create a memory leak in Java?","body":"<p>I don't think anyone has said this yet: you can resurrect an object by overriding the finalize() method such that finalize() stores a reference of this somewhere. The garbage collector will only be called once on the object so after that the object will never destroyed. </p>\n"},{"comments":[{"owner":{"account_id":5773992,"reputation":2383,"user_id":7341563,"display_name":"Sven"},"score":2,"creation_date":1526966632,"post_id":6565985,"comment_id":87933722,"body_markdown":"This is not because of a memory leak, but because the class loader does not unload the previous set of classes. Therefor it is not recommended to redeploy an application server without restarting the server (not the physical machine, but the app server). I have seen the same issue with WebSphere.","body":"This is not because of a memory leak, but because the class loader does not unload the previous set of classes. Therefor it is not recommended to redeploy an application server without restarting the server (not the physical machine, but the app server). I have seen the same issue with WebSphere."},{"owner":{"account_id":204515,"reputation":11679,"user_id":452775,"accept_rate":63,"display_name":"Lii"},"score":0,"creation_date":1669016134,"post_id":6565985,"comment_id":131537834,"body_markdown":"@Sven: This is what a memory leak is. The class loader not unloading the previous set of classes leads to a memory leak in this case.","body":"@Sven: This is what a memory leak is. The class loader not unloading the previous set of classes leads to a memory leak in this case."}],"tags":[],"owner":{"account_id":135620,"reputation":12665,"user_id":338614,"accept_rate":22,"display_name":"Harald Wellmann"},"comment_count":2,"down_vote_count":1,"up_vote_count":42,"is_accepted":false,"score":41,"last_activity_date":1620853771,"creation_date":1309732877,"answer_id":6565985,"question_id":6470651,"body_markdown":"Take any web application running in any servlet container ([Tomcat][1], [Jetty][2], [GlassFish][3], whatever...). Redeploy the application 10 or 20 times in a row (it may be enough to simply touch the [WAR][4] in the server&#39;s autodeploy directory.\r\n\r\nUnless anybody has actually tested this, chances are high that you&#39;ll get an OutOfMemoryError after a couple of redeployments, because the application did not take care to clean up after itself. You may even find a bug in your server with this test.\r\n\r\nThe problem is, the lifetime of the container is longer than the lifetime of your application. You have to make sure that all references the container might have to objects or classes of your application can be garbage collected.\r\n\r\nIf there is just one reference surviving the undeployment of your web application, the corresponding classloader and by consequence all classes of your web application cannot be garbage collected.\r\n\r\nThreads started by your application, ThreadLocal variables, logging appenders are some of the usual suspects to cause classloader leaks.\r\n\r\n  [1]: https://en.wikipedia.org/wiki/Apache_Tomcat\r\n  [2]: https://en.wikipedia.org/wiki/Jetty_%28web_server%29\r\n  [3]: https://en.wikipedia.org/wiki/GlassFish\r\n  [4]: https://en.wikipedia.org/wiki/WAR_%28Sun_file_format%29\r\n\r\n\r\n\r\n","title":"How can I create a memory leak in Java?","body":"<p>Take any web application running in any servlet container (<a href=\"https://en.wikipedia.org/wiki/Apache_Tomcat\" rel=\"noreferrer\">Tomcat</a>, <a href=\"https://en.wikipedia.org/wiki/Jetty_%28web_server%29\" rel=\"noreferrer\">Jetty</a>, <a href=\"https://en.wikipedia.org/wiki/GlassFish\" rel=\"noreferrer\">GlassFish</a>, whatever...). Redeploy the application 10 or 20 times in a row (it may be enough to simply touch the <a href=\"https://en.wikipedia.org/wiki/WAR_%28Sun_file_format%29\" rel=\"noreferrer\">WAR</a> in the server's autodeploy directory.</p>\n<p>Unless anybody has actually tested this, chances are high that you'll get an OutOfMemoryError after a couple of redeployments, because the application did not take care to clean up after itself. You may even find a bug in your server with this test.</p>\n<p>The problem is, the lifetime of the container is longer than the lifetime of your application. You have to make sure that all references the container might have to objects or classes of your application can be garbage collected.</p>\n<p>If there is just one reference surviving the undeployment of your web application, the corresponding classloader and by consequence all classes of your web application cannot be garbage collected.</p>\n<p>Threads started by your application, ThreadLocal variables, logging appenders are some of the usual suspects to cause classloader leaks.</p>\n"},{"comments":[{"owner":{"account_id":266709,"reputation":11856,"user_id":554431,"display_name":"bestsss"},"score":13,"creation_date":1309894595,"post_id":6573191,"comment_id":7770716,"body_markdown":"*This is a classic problem with reference counting garbage collectors.* Even 15 years ago Java didn&#39;t use ref counting. Ref. counting is also slower than GC.","body":"<i>This is a classic problem with reference counting garbage collectors.</i> Even 15 years ago Java didn&#39;t use ref counting. Ref. counting is also slower than GC."},{"owner":{"account_id":56819,"reputation":4437,"user_id":170196,"accept_rate":77,"display_name":"Esben Skov Pedersen"},"score":5,"creation_date":1311261315,"post_id":6573191,"comment_id":8041457,"body_markdown":"Not a memory leak. Just an infinite loop.","body":"Not a memory leak. Just an infinite loop."},{"owner":{"account_id":33655,"reputation":26403,"user_id":94363,"accept_rate":74,"display_name":"rds"},"score":2,"creation_date":1311352677,"post_id":6573191,"comment_id":8062791,"body_markdown":"@Esben At each iteration, the previous `first` is not useful and should be garbage collected. In _reference counting_ garbage collectors, the object wouldn&#39;t be freeed because there is an active reference on it (by itself). The infinite loop is here to desmonstrate the leak: when you run the program, the memory will raise indefinitely.","body":"@Esben At each iteration, the previous <code>first</code> is not useful and should be garbage collected. In <i>reference counting</i> garbage collectors, the object wouldn&#39;t be freeed because there is an active reference on it (by itself). The infinite loop is here to desmonstrate the leak: when you run the program, the memory will raise indefinitely."},{"owner":{"account_id":9614647,"reputation":6468,"user_id":7212809,"display_name":"nz_21"},"score":0,"creation_date":1541519735,"post_id":6573191,"comment_id":93240749,"body_markdown":"@rds @ Wesley Tarle suppose the loop was *not* infinite. Would there still be a memory leak?","body":"@rds @ Wesley Tarle suppose the loop was <i>not</i> infinite. Would there still be a memory leak?"}],"tags":[],"owner":{"account_id":9277,"reputation":658,"user_id":17057,"display_name":"Wesley Tarle"},"comment_count":4,"down_vote_count":2,"up_vote_count":14,"is_accepted":false,"score":12,"last_activity_date":1620853818,"creation_date":1309792018,"answer_id":6573191,"question_id":6470651,"body_markdown":"The interviewer might have been looking for a circular reference solution:\r\n\r\n        public static void main(String[] args) {\r\n            while (true) {\r\n                Element first = new Element();\r\n                first.next = new Element();\r\n                first.next.next = first;\r\n            }\r\n        }\r\n\r\nThis is a classic problem with reference counting garbage collectors.  You would then politely explain that JVMs use a much more sophisticated algorithm that doesn&#39;t have this limitation.\r\n","title":"How can I create a memory leak in Java?","body":"<p>The interviewer might have been looking for a circular reference solution:</p>\n<pre><code>    public static void main(String[] args) {\n        while (true) {\n            Element first = new Element();\n            first.next = new Element();\n            first.next.next = first;\n        }\n    }\n</code></pre>\n<p>This is a classic problem with reference counting garbage collectors.  You would then politely explain that JVMs use a much more sophisticated algorithm that doesn't have this limitation.</p>\n"},{"comments":[{"owner":{"account_id":266709,"reputation":11856,"user_id":554431,"display_name":"bestsss"},"score":2,"creation_date":1310194444,"post_id":6632102,"comment_id":7834922,"body_markdown":"inner classes are rarely an issue. They are a straightforward case and very easy to detect. The rumor is just a rumor too.","body":"inner classes are rarely an issue. They are a straightforward case and very easy to detect. The rumor is just a rumor too."},{"owner":{"account_id":124364,"reputation":85329,"user_id":319403,"accept_rate":75,"display_name":"cHao"},"score":2,"creation_date":1376685206,"post_id":6632102,"comment_id":26818558,"body_markdown":"The &quot;rumor&quot; sounds like someone half-read about how generational GC works.  Long-lived-but-now-unreachable objects can indeed stick around and take up space for a while, because the JVM promoted them out of the younger generations so it could stop checking them every pass.  They will evade the piddly &quot;clean up my 5000 temp strings&quot; passes, by design.  But they&#39;re not immortal.  They&#39;re still eligible for collection, and if the VM is strapped for RAM, it will eventually run a full GC sweep and repossess that memory.","body":"The &quot;rumor&quot; sounds like someone half-read about how generational GC works.  Long-lived-but-now-unreachable objects can indeed stick around and take up space for a while, because the JVM promoted them out of the younger generations so it could stop checking them every pass.  They will evade the piddly &quot;clean up my 5000 temp strings&quot; passes, by design.  But they&#39;re not immortal.  They&#39;re still eligible for collection, and if the VM is strapped for RAM, it will eventually run a full GC sweep and repossess that memory."}],"tags":[],"owner":{"account_id":25199,"reputation":4345,"user_id":64626,"accept_rate":60,"display_name":"Suroot"},"comment_count":2,"down_vote_count":0,"up_vote_count":23,"is_accepted":false,"score":23,"last_activity_date":1310174635,"creation_date":1310174635,"answer_id":6632102,"question_id":6470651,"body_markdown":"I thought it was interesting that no one used the internal class examples.  If you have an internal class; it inherently maintains a reference to the containing class.  Of course it is not technically a memory leak because Java WILL eventually clean it up; but this can cause classes to hang around longer than anticipated.\r\n\r\n    public class Example1 {\r\n      public Example2 getNewExample2() {\r\n        return this.new Example2();\r\n      }\r\n      public class Example2 {\r\n        public Example2() {}\r\n      }\r\n    }\r\n\r\nNow if you call Example1 and get an Example2 discarding Example1, you will inherently still have a link to an Example1 object.\r\n\r\n    public class Referencer {\r\n      public static Example2 GetAnExample2() {\r\n        Example1 ex = new Example1();\r\n        return ex.getNewExample2();\r\n      }\r\n    \r\n      public static void main(String[] args) {\r\n        Example2 ex = Referencer.GetAnExample2();\r\n        // As long as ex is reachable; Example1 will always remain in memory.\r\n      }\r\n    }\r\n\r\nI&#39;ve also heard a rumor that if you have a variable that exists for longer than a specific amount of time; Java assumes that it will always exist and will actually never try to clean it up if cannot be reached in code anymore.  But that is completely unverified.","title":"How can I create a memory leak in Java?","body":"<p>I thought it was interesting that no one used the internal class examples.  If you have an internal class; it inherently maintains a reference to the containing class.  Of course it is not technically a memory leak because Java WILL eventually clean it up; but this can cause classes to hang around longer than anticipated.</p>\n\n<pre><code>public class Example1 {\n  public Example2 getNewExample2() {\n    return this.new Example2();\n  }\n  public class Example2 {\n    public Example2() {}\n  }\n}\n</code></pre>\n\n<p>Now if you call Example1 and get an Example2 discarding Example1, you will inherently still have a link to an Example1 object.</p>\n\n<pre><code>public class Referencer {\n  public static Example2 GetAnExample2() {\n    Example1 ex = new Example1();\n    return ex.getNewExample2();\n  }\n\n  public static void main(String[] args) {\n    Example2 ex = Referencer.GetAnExample2();\n    // As long as ex is reachable; Example1 will always remain in memory.\n  }\n}\n</code></pre>\n\n<p>I've also heard a rumor that if you have a variable that exists for longer than a specific amount of time; Java assumes that it will always exist and will actually never try to clean it up if cannot be reached in code anymore.  But that is completely unverified.</p>\n"},{"tags":[],"owner":{"account_id":408170,"reputation":1289,"user_id":778659,"accept_rate":82,"display_name":"Ben Xu"},"comment_count":0,"down_vote_count":2,"up_vote_count":12,"is_accepted":false,"score":10,"last_activity_date":1620854020,"creation_date":1310283963,"answer_id":6639894,"question_id":6470651,"body_markdown":"There are many different situations memory will leak. One I encountered, which expose a map that should not be exposed and used in other place.\r\n\r\n    public class ServiceFactory {\r\n\r\n        private Map&lt;String, Service&gt; services;\r\n\r\n        private static ServiceFactory singleton;\r\n\r\n        private ServiceFactory() {\r\n            services = new HashMap&lt;String, Service&gt;();\r\n        }\r\n\r\n        public static synchronized ServiceFactory getDefault() {\r\n\r\n            if (singleton == null) {\r\n                singleton = new ServiceFactory();\r\n            }\r\n            return singleton;\r\n        }\r\n\r\n        public void addService(String name, Service serv) {\r\n            services.put(name, serv);\r\n        }\r\n\r\n        public void removeService(String name) {\r\n            services.remove(name);\r\n        }\r\n\r\n        public Service getService(String name, Service serv) {\r\n            return services.get(name);\r\n        }\r\n\r\n        // The problematic API, which exposes the map.\r\n        // and user can do quite a lot of thing from this API.\r\n        // for example, create service reference and forget to dispose or set it null\r\n        // in all this is a dangerous API, and should not expose\r\n        public Map&lt;String, Service&gt; getAllServices() {\r\n            return services;\r\n        }\r\n\r\n    }\r\n\r\n    // Resource class is a heavy class\r\n    class Service {\r\n\r\n    }\r\n\r\n\r\n\r\n\r\n\r\n","title":"How can I create a memory leak in Java?","body":"<p>There are many different situations memory will leak. One I encountered, which expose a map that should not be exposed and used in other place.</p>\n<pre><code>public class ServiceFactory {\n\n    private Map&lt;String, Service&gt; services;\n\n    private static ServiceFactory singleton;\n\n    private ServiceFactory() {\n        services = new HashMap&lt;String, Service&gt;();\n    }\n\n    public static synchronized ServiceFactory getDefault() {\n\n        if (singleton == null) {\n            singleton = new ServiceFactory();\n        }\n        return singleton;\n    }\n\n    public void addService(String name, Service serv) {\n        services.put(name, serv);\n    }\n\n    public void removeService(String name) {\n        services.remove(name);\n    }\n\n    public Service getService(String name, Service serv) {\n        return services.get(name);\n    }\n\n    // The problematic API, which exposes the map.\n    // and user can do quite a lot of thing from this API.\n    // for example, create service reference and forget to dispose or set it null\n    // in all this is a dangerous API, and should not expose\n    public Map&lt;String, Service&gt; getAllServices() {\n        return services;\n    }\n\n}\n\n// Resource class is a heavy class\nclass Service {\n\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":329794,"reputation":5980,"user_id":653511,"accept_rate":86,"display_name":"stemm"},"comment_count":0,"down_vote_count":1,"up_vote_count":60,"is_accepted":false,"score":59,"last_activity_date":1672295853,"creation_date":1310388959,"answer_id":6650413,"question_id":6470651,"body_markdown":"You are able to make memory leak with **sun.misc.Unsafe** class. In fact this service class is used in different standard classes (for example in **java.nio** classes). **You can&#39;t create instances of this class directly**, but you may **use reflection to get an instance**.\r\n\r\nCode doesn&#39;t compile in the [Eclipse][1] IDE - compile it using command `javac` (during compilation you&#39;ll get warnings)\r\n```\r\nimport java.lang.reflect.Constructor;\r\nimport java.lang.reflect.Field;\r\nimport sun.misc.Unsafe;\r\n\r\npublic class TestUnsafe {\r\n\r\n    public static void main(String[] args) throws Exception{\r\n        Class unsafeClass = Class.forName(&quot;sun.misc.Unsafe&quot;);\r\n        Field f = unsafeClass.getDeclaredField(&quot;theUnsafe&quot;);\r\n        f.setAccessible(true);\r\n        Unsafe unsafe = (Unsafe) f.get(null);\r\n        System.out.print(&quot;4..3..2..1...&quot;);\r\n        try\r\n        {\r\n            for(;;)\r\n                unsafe.allocateMemory(1024*1024);\r\n        } catch(Error e) {\r\n            System.out.println(&quot;Boom :)&quot;);\r\n            e.printStackTrace();\r\n        }\r\n    }\r\n}\r\n```\r\n  [1]: https://en.wikipedia.org/wiki/Eclipse_%28software%29\r\n","title":"How can I create a memory leak in Java?","body":"<p>You are able to make memory leak with <strong>sun.misc.Unsafe</strong> class. In fact this service class is used in different standard classes (for example in <strong>java.nio</strong> classes). <strong>You can't create instances of this class directly</strong>, but you may <strong>use reflection to get an instance</strong>.</p>\n<p>Code doesn't compile in the <a href=\"https://en.wikipedia.org/wiki/Eclipse_%28software%29\" rel=\"nofollow noreferrer\">Eclipse</a> IDE - compile it using command <code>javac</code> (during compilation you'll get warnings)</p>\n<pre><code>import java.lang.reflect.Constructor;\nimport java.lang.reflect.Field;\nimport sun.misc.Unsafe;\n\npublic class TestUnsafe {\n\n    public static void main(String[] args) throws Exception{\n        Class unsafeClass = Class.forName(&quot;sun.misc.Unsafe&quot;);\n        Field f = unsafeClass.getDeclaredField(&quot;theUnsafe&quot;);\n        f.setAccessible(true);\n        Unsafe unsafe = (Unsafe) f.get(null);\n        System.out.print(&quot;4..3..2..1...&quot;);\n        try\n        {\n            for(;;)\n                unsafe.allocateMemory(1024*1024);\n        } catch(Error e) {\n            System.out.println(&quot;Boom :)&quot;);\n            e.printStackTrace();\n        }\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":451433,"reputation":2706,"user_id":847333,"accept_rate":73,"display_name":"Gravity"},"comment_count":0,"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1310776157,"creation_date":1310776157,"answer_id":6714461,"question_id":6470651,"body_markdown":"One possibility is to create a wrapper for an ArrayList that only provides one method: one that adds things to the ArrayList.  Make the ArrayList itself private.  Now, construct one of these wrapper objects in global scope (as a static object in a class) and qualify it with the **final** keyword (e.g. `public static final ArrayListWrapper wrapperClass = new ArrayListWrapper()`).  So now the reference cannot be altered.  That is, `wrapperClass = null` won&#39;t work and can&#39;t be used to free the memory.  But there&#39;s also no way to do anything with `wrapperClass` other than add objects to it.  Therefore, any objects you do add to `wrapperClass` are impossible to recycle.","title":"How can I create a memory leak in Java?","body":"<p>One possibility is to create a wrapper for an ArrayList that only provides one method: one that adds things to the ArrayList.  Make the ArrayList itself private.  Now, construct one of these wrapper objects in global scope (as a static object in a class) and qualify it with the <strong>final</strong> keyword (e.g. <code>public static final ArrayListWrapper wrapperClass = new ArrayListWrapper()</code>).  So now the reference cannot be altered.  That is, <code>wrapperClass = null</code> won't work and can't be used to free the memory.  But there's also no way to do anything with <code>wrapperClass</code> other than add objects to it.  Therefore, any objects you do add to <code>wrapperClass</code> are impossible to recycle.</p>\n"},{"tags":[],"owner":{"account_id":788604,"reputation":1,"user_id":856547,"display_name":"Scott"},"comment_count":0,"down_vote_count":0,"up_vote_count":9,"is_accepted":false,"score":9,"last_activity_date":1311270098,"creation_date":1311270098,"answer_id":6780310,"question_id":6470651,"body_markdown":"An example I recently fixed is creating new GC and Image objects, but forgetting to call dispose() method.\r\n\r\nGC javadoc snippet:\r\n\r\n&gt; Application code must explicitly invoke the GC.dispose() method to\r\n&gt; release the operating system resources managed by each instance when\r\n&gt; those instances are no longer required. This is particularly important\r\n&gt; on Windows95 and Windows98 where the operating system has a limited\r\n&gt; number of device contexts available.\r\n\r\nImage javadoc snippet:\r\n\r\n&gt; Application code must explicitly invoke the Image.dispose() method to\r\n&gt; release the operating system resources managed by each instance when\r\n&gt; those instances are no longer required.\r\n\r\n","title":"How can I create a memory leak in Java?","body":"<p>An example I recently fixed is creating new GC and Image objects, but forgetting to call dispose() method.</p>\n\n<p>GC javadoc snippet:</p>\n\n<blockquote>\n  <p>Application code must explicitly invoke the GC.dispose() method to\n  release the operating system resources managed by each instance when\n  those instances are no longer required. This is particularly important\n  on Windows95 and Windows98 where the operating system has a limited\n  number of device contexts available.</p>\n</blockquote>\n\n<p>Image javadoc snippet:</p>\n\n<blockquote>\n  <p>Application code must explicitly invoke the Image.dispose() method to\n  release the operating system resources managed by each instance when\n  those instances are no longer required.</p>\n</blockquote>\n"},{"comments":[{"owner":{"account_id":1054135,"reputation":7996,"user_id":1057218,"display_name":"anstarovoyt"},"score":21,"creation_date":1363956226,"post_id":6780439,"comment_id":22070421,"body_markdown":"The method substring() creates a new String in java7 (it is a new behavior)","body":"The method substring() creates a new String in java7 (it is a new behavior)"}],"tags":[],"owner":{"account_id":198731,"reputation":644,"user_id":443572,"accept_rate":83,"display_name":"Jon Chambers"},"comment_count":1,"down_vote_count":0,"up_vote_count":44,"is_accepted":false,"score":44,"last_activity_date":1311274835,"creation_date":1311270700,"answer_id":6780439,"question_id":6470651,"body_markdown":"Here&#39;s a simple/sinister one via http://wiki.eclipse.org/Performance_Bloopers#String.substring.28.29.\r\n\r\n    public class StringLeaker\r\n    {\r\n        private final String muchSmallerString;\r\n    \r\n        public StringLeaker()\r\n        {\r\n            // Imagine the whole Declaration of Independence here\r\n            String veryLongString = &quot;We hold these truths to be self-evident...&quot;;\r\n        \r\n            // The substring here maintains a reference to the internal char[]\r\n            // representation of the original string.\r\n            this.muchSmallerString = veryLongString.substring(0, 1);\r\n        }\r\n    }\r\n\r\nBecause the substring refers to the internal representation of the original, much longer string, the original stays in memory. Thus, as long as you have a StringLeaker in play, you have the whole original string in memory, too, even though you might think you&#39;re just holding on to a single-character string.\r\n\r\nThe way to avoid storing an unwanted reference to the original string is to do something like this:\r\n\r\n    ...\r\n    this.muchSmallerString = new String(veryLongString.substring(0, 1));\r\n    ...\r\n\r\nFor added badness, you might also `.intern()` the substring:\r\n\r\n    ...\r\n    this.muchSmallerString = veryLongString.substring(0, 1).intern();\r\n    ...\r\n\r\nDoing so will keep both the original long string and the derived substring in memory even after the StringLeaker instance has been discarded.","title":"How can I create a memory leak in Java?","body":"<p>Here's a simple/sinister one via <a href=\"http://wiki.eclipse.org/Performance_Bloopers#String.substring.28.29\" rel=\"noreferrer\">http://wiki.eclipse.org/Performance_Bloopers#String.substring.28.29</a>.</p>\n\n<pre><code>public class StringLeaker\n{\n    private final String muchSmallerString;\n\n    public StringLeaker()\n    {\n        // Imagine the whole Declaration of Independence here\n        String veryLongString = \"We hold these truths to be self-evident...\";\n\n        // The substring here maintains a reference to the internal char[]\n        // representation of the original string.\n        this.muchSmallerString = veryLongString.substring(0, 1);\n    }\n}\n</code></pre>\n\n<p>Because the substring refers to the internal representation of the original, much longer string, the original stays in memory. Thus, as long as you have a StringLeaker in play, you have the whole original string in memory, too, even though you might think you're just holding on to a single-character string.</p>\n\n<p>The way to avoid storing an unwanted reference to the original string is to do something like this:</p>\n\n<pre><code>...\nthis.muchSmallerString = new String(veryLongString.substring(0, 1));\n...\n</code></pre>\n\n<p>For added badness, you might also <code>.intern()</code> the substring:</p>\n\n<pre><code>...\nthis.muchSmallerString = veryLongString.substring(0, 1).intern();\n...\n</code></pre>\n\n<p>Doing so will keep both the original long string and the derived substring in memory even after the StringLeaker instance has been discarded.</p>\n"},{"comments":[{"owner":{"account_id":440158,"reputation":323231,"user_id":829571,"accept_rate":94,"display_name":"assylias"},"score":7,"creation_date":1371769288,"post_id":6780483,"comment_id":24955868,"body_markdown":"Hasn&#39;t been the case for some time now. Modern GCs know how to handle circular references.","body":"Hasn&#39;t been the case for some time now. Modern GCs know how to handle circular references."}],"tags":[],"owner":{"account_id":23739,"reputation":4125,"user_id":59724,"accept_rate":33,"display_name":"Graham"},"comment_count":1,"down_vote_count":0,"up_vote_count":15,"is_accepted":false,"score":15,"last_activity_date":1620854195,"creation_date":1311270951,"answer_id":6780483,"question_id":6470651,"body_markdown":"As a lot of people have suggested, *resource leaks* are fairly easy to cause - like the [JDBC][1] examples. Actual *memory* leaks are a bit harder - especially if you aren&#39;t relying on broken bits of the JVM to do it for you...\r\n\r\nThe ideas of creating objects that have a very large footprint and then not being able to access them aren&#39;t real memory leaks either. If nothing can access it then it will be garbage collected, and if something can access it then it&#39;s not a leak...\r\n\r\nOne way that *used* to work though - and I don&#39;t know if it still does - is to have a three-deep circular chain. As in Object A has a reference to Object B, Object B has a reference to Object C and Object C has a reference to Object A. The GC was clever enough to know that a two deep chain - as in A &lt;--&gt; B - can safely be collected if A and B aren&#39;t accessible by anything else, but couldn&#39;t handle the three-way chain...\r\n\r\n  [1]: https://en.wikipedia.org/wiki/Java_Database_Connectivity\r\n","title":"How can I create a memory leak in Java?","body":"<p>As a lot of people have suggested, <em>resource leaks</em> are fairly easy to cause - like the <a href=\"https://en.wikipedia.org/wiki/Java_Database_Connectivity\" rel=\"nofollow noreferrer\">JDBC</a> examples. Actual <em>memory</em> leaks are a bit harder - especially if you aren't relying on broken bits of the JVM to do it for you...</p>\n<p>The ideas of creating objects that have a very large footprint and then not being able to access them aren't real memory leaks either. If nothing can access it then it will be garbage collected, and if something can access it then it's not a leak...</p>\n<p>One way that <em>used</em> to work though - and I don't know if it still does - is to have a three-deep circular chain. As in Object A has a reference to Object B, Object B has a reference to Object C and Object C has a reference to Object A. The GC was clever enough to know that a two deep chain - as in A &lt;--&gt; B - can safely be collected if A and B aren't accessible by anything else, but couldn't handle the three-way chain...</p>\n"},{"comments":[{"owner":{"account_id":42768,"reputation":6215,"user_id":124708,"accept_rate":79,"display_name":"TraderJoeChicago"},"score":0,"creation_date":1316560242,"post_id":6781750,"comment_id":9070895,"body_markdown":"That sucks. You should check this logging library that allocates ZERO memory while logging to a file: http://mentalog.soliveirajr.com","body":"That sucks. You should check this logging library that allocates ZERO memory while logging to a file: <a href=\"http://mentalog.soliveirajr.com\" rel=\"nofollow noreferrer\">mentalog.soliveirajr.com</a>"},{"owner":{"account_id":369868,"reputation":10723,"user_id":717481,"accept_rate":100,"display_name":"sparc_spread"},"score":0,"creation_date":1404337249,"post_id":6781750,"comment_id":38005269,"body_markdown":"+1 Do you know offhand whether there is a similar issue with the MDC in slf4j/logback (successor products by the same author)?  I&#39;m about to do a deep dive on the source but wanted to check first.  Either way, thanks for posting this.","body":"+1 Do you know offhand whether there is a similar issue with the MDC in slf4j/logback (successor products by the same author)?  I&#39;m about to do a deep dive on the source but wanted to check first.  Either way, thanks for posting this."}],"tags":[],"owner":{"account_id":49866,"reputation":736,"user_id":148631,"display_name":"Puneet"},"comment_count":2,"down_vote_count":0,"up_vote_count":23,"is_accepted":false,"score":23,"last_activity_date":1394227779,"creation_date":1311277172,"answer_id":6781750,"question_id":6470651,"body_markdown":"I recently encountered a memory leak situation caused in a way by log4j.\r\n\r\nLog4j has this mechanism called [Nested Diagnostic Context(NDC)](http://logging.apache.org/log4j/1.2/apidocs/org/apache/log4j/NDC.html)  which is an instrument to distinguish interleaved log output from different sources. The granularity at which NDC works is threads, so it distinguishes log outputs from different threads separately.\r\n\r\nIn order to store thread specific tags, log4j&#39;s NDC class uses a Hashtable which is keyed by the Thread object itself (as opposed to say the thread id), and thus till the NDC tag stays in memory all the objects that hang off of the thread object also stay in memory. In our web application we use NDC to tag logoutputs with a request id to distinguish logs from a single request separately. The container that associates the NDC tag with a thread, also removes it while returning the response from a request. The problem occurred when during the course of processing a request, a child thread was spawned, something like the following code:\r\n\r\n    pubclic class RequestProcessor {\r\n        private static final Logger logger = Logger.getLogger(RequestProcessor.class);\r\n        public void doSomething()  {\r\n            ....\r\n            final List&lt;String&gt; hugeList = new ArrayList&lt;String&gt;(10000);\r\n            new Thread() {\r\n               public void run() {\r\n                   logger.info(&quot;Child thread spawned&quot;)\r\n                   for(String s:hugeList) {\r\n                       ....\r\n                   }\r\n               }\r\n            }.start();\r\n        }\r\n    }    \r\n\r\nSo an NDC context was associated with inline thread that was spawned. The thread object that was the key for this NDC context, is the inline thread which has the hugeList object hanging off of it. Hence even after the thread finished doing what it was doing, the reference to the hugeList was kept alive by the NDC context Hastable, thus causing a memory leak.","title":"How can I create a memory leak in Java?","body":"<p>I recently encountered a memory leak situation caused in a way by log4j.</p>\n\n<p>Log4j has this mechanism called <a href=\"http://logging.apache.org/log4j/1.2/apidocs/org/apache/log4j/NDC.html\">Nested Diagnostic Context(NDC)</a>  which is an instrument to distinguish interleaved log output from different sources. The granularity at which NDC works is threads, so it distinguishes log outputs from different threads separately.</p>\n\n<p>In order to store thread specific tags, log4j's NDC class uses a Hashtable which is keyed by the Thread object itself (as opposed to say the thread id), and thus till the NDC tag stays in memory all the objects that hang off of the thread object also stay in memory. In our web application we use NDC to tag logoutputs with a request id to distinguish logs from a single request separately. The container that associates the NDC tag with a thread, also removes it while returning the response from a request. The problem occurred when during the course of processing a request, a child thread was spawned, something like the following code:</p>\n\n<pre><code>pubclic class RequestProcessor {\n    private static final Logger logger = Logger.getLogger(RequestProcessor.class);\n    public void doSomething()  {\n        ....\n        final List&lt;String&gt; hugeList = new ArrayList&lt;String&gt;(10000);\n        new Thread() {\n           public void run() {\n               logger.info(\"Child thread spawned\")\n               for(String s:hugeList) {\n                   ....\n               }\n           }\n        }.start();\n    }\n}    \n</code></pre>\n\n<p>So an NDC context was associated with inline thread that was spawned. The thread object that was the key for this NDC context, is the inline thread which has the hugeList object hanging off of it. Hence even after the thread finished doing what it was doing, the reference to the hugeList was kept alive by the NDC context Hastable, thus causing a memory leak.</p>\n"},{"tags":[],"owner":{"account_id":27671,"reputation":15568,"user_id":73274,"accept_rate":100,"display_name":"Paul Morie"},"comment_count":0,"down_vote_count":0,"up_vote_count":20,"is_accepted":false,"score":20,"last_activity_date":1620854242,"creation_date":1311281560,"answer_id":6782636,"question_id":6470651,"body_markdown":"Everyone always forgets the native code route.  Here&#39;s a simple formula for a leak:\r\n\r\n1. Declare a native method.\r\n2. In the native method, call `malloc`. Don&#39;t call `free`.\r\n3. Call the native method.\r\n\r\nRemember, memory allocations in native code come from the JVM heap.\r\n\r\n\r\n","title":"How can I create a memory leak in Java?","body":"<p>Everyone always forgets the native code route.  Here's a simple formula for a leak:</p>\n<ol>\n<li>Declare a native method.</li>\n<li>In the native method, call <code>malloc</code>. Don't call <code>free</code>.</li>\n<li>Call the native method.</li>\n</ol>\n<p>Remember, memory allocations in native code come from the JVM heap.</p>\n"},{"comments":[{"owner":{"account_id":935202,"reputation":49046,"user_id":964243,"accept_rate":66,"display_name":"Boann"},"score":3,"creation_date":1377925448,"post_id":6783910,"comment_id":27278089,"body_markdown":"The native memory allocated by a DirectByteBuffer is freed in a finalizer when the DirectByteBuffer is garbage collected. It certainly doesn&#39;t leak.","body":"The native memory allocated by a DirectByteBuffer is freed in a finalizer when the DirectByteBuffer is garbage collected. It certainly doesn&#39;t leak."}],"tags":[],"owner":{"account_id":220237,"reputation":21,"user_id":477534,"display_name":"Artur Ventura"},"comment_count":1,"down_vote_count":1,"up_vote_count":9,"is_accepted":false,"score":8,"last_activity_date":1620854379,"creation_date":1311289629,"answer_id":6783910,"question_id":6470651,"body_markdown":"Theoretically you can&#39;t. The Java memory model prevents it. However, because Java has to be implemented, there are some caveats you can use. It depends on what you can use:\r\n\r\n- If you can use native, you can allocate memory that you do not relinquish later.\r\n\r\n- If that is not available, there is a dirty little secret about Java that not much people know. You can ask for a direct access array that is not managed by GC, and therefore can be easily used to make a memory leak. This is provided by DirectByteBuffer (http://download.oracle.com/javase/1.5.0/docs/api/java/nio/ByteBuffer.html#allocateDirect(int)).\r\n\r\n- If you can&#39;t use any of those, you still can make a memory leak by tricking the GC. The JVM is implemented using a *generational* garbage collection. What this means is that the heap is divided into areas: young, adults and elders. An object when its created starts at the young area. As it is used more and more, it progresses into adults up to elders. An object that reaches the eldery area most likely will not be garbage collected. You cannot be sure that an object is leaked and if you ask for a stop and clean GC it may clean it, but for a long period of time it will be leaked. More information is at (http://java.sun.com/docs/hotspot/gc1.4.2/faq.html)\r\n\r\n- Also, class objects are not required to be GC&#39;ed. There might be a way to do it.\r\n\r\n","title":"How can I create a memory leak in Java?","body":"<p>Theoretically you can't. The Java memory model prevents it. However, because Java has to be implemented, there are some caveats you can use. It depends on what you can use:</p>\n<ul>\n<li><p>If you can use native, you can allocate memory that you do not relinquish later.</p>\n</li>\n<li><p>If that is not available, there is a dirty little secret about Java that not much people know. You can ask for a direct access array that is not managed by GC, and therefore can be easily used to make a memory leak. This is provided by DirectByteBuffer (<a href=\"http://download.oracle.com/javase/1.5.0/docs/api/java/nio/ByteBuffer.html#allocateDirect(int)\" rel=\"nofollow noreferrer\">http://download.oracle.com/javase/1.5.0/docs/api/java/nio/ByteBuffer.html#allocateDirect(int)</a>).</p>\n</li>\n<li><p>If you can't use any of those, you still can make a memory leak by tricking the GC. The JVM is implemented using a <em>generational</em> garbage collection. What this means is that the heap is divided into areas: young, adults and elders. An object when its created starts at the young area. As it is used more and more, it progresses into adults up to elders. An object that reaches the eldery area most likely will not be garbage collected. You cannot be sure that an object is leaked and if you ask for a stop and clean GC it may clean it, but for a long period of time it will be leaked. More information is at (<a href=\"http://java.sun.com/docs/hotspot/gc1.4.2/faq.html\" rel=\"nofollow noreferrer\">http://java.sun.com/docs/hotspot/gc1.4.2/faq.html</a>)</p>\n</li>\n<li><p>Also, class objects are not required to be GC'ed. There might be a way to do it.</p>\n</li>\n</ul>\n"},{"tags":[],"owner":{"account_id":446377,"reputation":999,"user_id":839379,"display_name":"sethobrien"},"comment_count":0,"down_vote_count":0,"up_vote_count":17,"is_accepted":false,"score":17,"last_activity_date":1311321907,"creation_date":1311321907,"answer_id":6787206,"question_id":6470651,"body_markdown":"You can create a moving memory leak by creating a new instance of a class in that class&#39;s finalize method. Bonus points if the finalizer creates multiple instances. Here&#39;s a simple program that leaks the entire heap in sometime between a few seconds and a few minutes depending on your heap size:\r\n\r\n\tclass Leakee {\r\n\t\tpublic void check() {\r\n\t\t\tif (depth &gt; 2) {\r\n\t\t\t\tLeaker.done();\r\n\t\t\t}\r\n\t\t}\r\n\t\tprivate int depth;\r\n\t\tpublic Leakee(int d) {\r\n\t\t\tdepth = d;\r\n\t\t}\r\n\t\tprotected void finalize() {\r\n\t\t\tnew Leakee(depth + 1).check();\r\n\t\t\tnew Leakee(depth + 1).check();\r\n\t\t}\r\n\t}\r\n\t\r\n\tpublic class Leaker {\r\n\t\tprivate static boolean makeMore = true;\r\n\t\tpublic static void done() {\r\n\t\t\tmakeMore = false;\r\n\t\t}\r\n\t\tpublic static void main(String[] args) throws InterruptedException {\r\n\t\t\t// make a bunch of them until the garbage collector gets active\r\n\t\t\twhile (makeMore) {\r\n\t\t\t\tnew Leakee(0).check();\r\n\t\t\t}\r\n\t\t\t// sit back and watch the finalizers chew through memory\r\n\t\t\twhile (true) {\r\n\t\t\t\tThread.sleep(1000);\r\n\t\t\t\tSystem.out.println(&quot;memory=&quot; +\r\n\t\t\t\t\t\tRuntime.getRuntime().freeMemory() + &quot; / &quot; +\r\n\t\t\t\t\t\tRuntime.getRuntime().totalMemory());\r\n\t\t\t}\r\n\t\t}\r\n\t}","title":"How can I create a memory leak in Java?","body":"<p>You can create a moving memory leak by creating a new instance of a class in that class's finalize method. Bonus points if the finalizer creates multiple instances. Here's a simple program that leaks the entire heap in sometime between a few seconds and a few minutes depending on your heap size:</p>\n\n<pre><code>class Leakee {\n    public void check() {\n        if (depth &gt; 2) {\n            Leaker.done();\n        }\n    }\n    private int depth;\n    public Leakee(int d) {\n        depth = d;\n    }\n    protected void finalize() {\n        new Leakee(depth + 1).check();\n        new Leakee(depth + 1).check();\n    }\n}\n\npublic class Leaker {\n    private static boolean makeMore = true;\n    public static void done() {\n        makeMore = false;\n    }\n    public static void main(String[] args) throws InterruptedException {\n        // make a bunch of them until the garbage collector gets active\n        while (makeMore) {\n            new Leakee(0).check();\n        }\n        // sit back and watch the finalizers chew through memory\n        while (true) {\n            Thread.sleep(1000);\n            System.out.println(\"memory=\" +\n                    Runtime.getRuntime().freeMemory() + \" / \" +\n                    Runtime.getRuntime().totalMemory());\n        }\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":458052,"reputation":9149,"user_id":857727,"display_name":"arnt"},"comment_count":0,"down_vote_count":0,"up_vote_count":8,"is_accepted":false,"score":8,"last_activity_date":1620854623,"creation_date":1311330284,"answer_id":6788650,"question_id":6470651,"body_markdown":"Most of the memory leaks I&#39;ve seen in Java concern processes getting out of sync.\r\n\r\nProcess A talks to B via [TCP][1], and tells process B to create something. B issues the resource an ID, say 432423, which A stores in an object and uses while talking to B. At some point the object in A is reclaimed by garbage collection (maybe due to a bug), but A never tells B that (maybe another bug).\r\n\r\nNow A doesn&#39;t have the ID of the object it&#39;s created in B&#39;s RAM any more, and B doesn&#39;t know that A has no more reference to the object. In effect, the object is leaked.\r\n\r\n  [1]: https://en.wikipedia.org/wiki/Transmission_Control_Protocol\r\n\r\n","title":"How can I create a memory leak in Java?","body":"<p>Most of the memory leaks I've seen in Java concern processes getting out of sync.</p>\n<p>Process A talks to B via <a href=\"https://en.wikipedia.org/wiki/Transmission_Control_Protocol\" rel=\"nofollow noreferrer\">TCP</a>, and tells process B to create something. B issues the resource an ID, say 432423, which A stores in an object and uses while talking to B. At some point the object in A is reclaimed by garbage collection (maybe due to a bug), but A never tells B that (maybe another bug).</p>\n<p>Now A doesn't have the ID of the object it's created in B's RAM any more, and B doesn't know that A has no more reference to the object. In effect, the object is leaked.</p>\n"},{"comments":[{"owner":{"account_id":357752,"reputation":1302,"user_id":698121,"display_name":"Peter"},"score":0,"creation_date":1311347150,"post_id":6791637,"comment_id":8060907,"body_markdown":"To add to the discussion about what a memory leak is in my opinion the idea of &quot;intentional&quot; is important. Of course a field (static or not) pointing to a huge data structure is not yet a memory leak. But if the datastructure pointed to is of no use for your logic, just lingering around, polluting your heap, perhaps ever growing until GC gives up with an OOME, then i call it a &quot;memory leak&quot;. The memory leaked is just no longer available to me. Just like in former times where i called malloc without ever returning this to os - purify to the rescue.","body":"To add to the discussion about what a memory leak is in my opinion the idea of &quot;intentional&quot; is important. Of course a field (static or not) pointing to a huge data structure is not yet a memory leak. But if the datastructure pointed to is of no use for your logic, just lingering around, polluting your heap, perhaps ever growing until GC gives up with an OOME, then i call it a &quot;memory leak&quot;. The memory leaked is just no longer available to me. Just like in former times where i called malloc without ever returning this to os - purify to the rescue."},{"owner":{"account_id":266709,"reputation":11856,"user_id":554431,"display_name":"bestsss"},"score":0,"creation_date":1324948620,"post_id":6791637,"comment_id":10731665,"body_markdown":"The inflater is a good one, while not true leak (if will be finalized) it eats up native memory very well and it&#39;s hard to diagnose. You deserve a vote (but I do not vote myself). I added some more info in my answer (didn&#39;t spot yours earlier)","body":"The inflater is a good one, while not true leak (if will be finalized) it eats up native memory very well and it&#39;s hard to diagnose. You deserve a vote (but I do not vote myself). I added some more info in my answer (didn&#39;t spot yours earlier)"},{"owner":{"account_id":357752,"reputation":1302,"user_id":698121,"display_name":"Peter"},"score":0,"creation_date":1328182780,"post_id":6791637,"comment_id":11446728,"body_markdown":"Finlizers were a bad idea, and there is no guarantee that they will ever be called. Google for Cliff Click and his comments about this...","body":"Finlizers were a bad idea, and there is no guarantee that they will ever be called. Google for Cliff Click and his comments about this..."},{"owner":{"account_id":266709,"reputation":11856,"user_id":554431,"display_name":"bestsss"},"score":0,"creation_date":1328195080,"post_id":6791637,"comment_id":11451260,"body_markdown":"All JVMs (minus JDK7 before 7.0.2) invoke finalizer(s) more or less in good fashion. Finalizer are absolutely necessary for Direct buffers to work (even more mapped files, esp. on Windows). They are just unreliable (baring that I know what Cliff Click says about)","body":"All JVMs (minus JDK7 before 7.0.2) invoke finalizer(s) more or less in good fashion. Finalizer are absolutely necessary for Direct buffers to work (even more mapped files, esp. on Windows). They are just unreliable (baring that I know what Cliff Click says about)"}],"tags":[],"owner":{"account_id":357752,"reputation":1302,"user_id":698121,"display_name":"Peter"},"comment_count":4,"down_vote_count":0,"up_vote_count":7,"is_accepted":false,"score":7,"last_activity_date":1620855025,"creation_date":1311345525,"answer_id":6791637,"question_id":6470651,"body_markdown":"A few suggestions:\r\n\r\n - use commons-logging in a servlet container (a bit provocative perhaps)\r\n - start a thread in a servlet container and don&#39;t return from its run method\r\n - load animated GIF images in a servlet container (this will start an animation thread)\r\n\r\nThe above effects could be &#39;improved&#39; by redeploying the application ;)\r\n\r\nI recently stumbled upon this:\r\n\r\n - Calling &quot;new java.util.zip.Inflater();&quot; without calling &quot;Inflater.end()&quot; ever\r\n\r\nRead [https://bugs.java.com/bugdatabase/view_bug?bug_id=5072161][1] and linked issues for an in-depth-discussion.\r\n\r\n  [1]: https://bugs.java.com/bugdatabase/view_bug?bug_id=5072161\r\n\r\n\r\n","title":"How can I create a memory leak in Java?","body":"<p>A few suggestions:</p>\n<ul>\n<li>use commons-logging in a servlet container (a bit provocative perhaps)</li>\n<li>start a thread in a servlet container and don't return from its run method</li>\n<li>load animated GIF images in a servlet container (this will start an animation thread)</li>\n</ul>\n<p>The above effects could be 'improved' by redeploying the application ;)</p>\n<p>I recently stumbled upon this:</p>\n<ul>\n<li>Calling &quot;new java.util.zip.Inflater();&quot; without calling &quot;Inflater.end()&quot; ever</li>\n</ul>\n<p>Read <a href=\"https://bugs.java.com/bugdatabase/view_bug?bug_id=5072161\" rel=\"nofollow noreferrer\">https://bugs.java.com/bugdatabase/view_bug?bug_id=5072161</a> and linked issues for an in-depth-discussion.</p>\n"},{"tags":[],"owner":{"account_id":45053,"reputation":3163,"user_id":132565,"accept_rate":67,"display_name":"Chase"},"comment_count":0,"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1620855242,"creation_date":1338504647,"answer_id":10842325,"question_id":6470651,"body_markdown":"In Java a &quot;memory leak&quot; is primarily just you using too much memory which is different than in C where you are no longer using the memory but forget to return (free) it. When an interviewer asks about Java memory leaks they are asking about JVM memory usage just appearing to keep going up and they determined that restarting the JVM on a regular basis is the best fix (unless the interviewer is *extremely* technically savvy).\r\n\r\nSo answer this question as if they asked what makes JVM memory usage grow over time. Good answers would be storing too much data in a HttpSessions with overly long timeout or a poorly implemented in-memory cache (singleton) that never flushes old entries. Another potential answer is having lots of JSPs or dynamically generated classes. Classes are loaded into an area of memory called PermGen that is usually small and most JVMs don&#39;t implement class unloading.\r\n\r\n\r\n\r\n","title":"How can I create a memory leak in Java?","body":"<p>In Java a &quot;memory leak&quot; is primarily just you using too much memory which is different than in C where you are no longer using the memory but forget to return (free) it. When an interviewer asks about Java memory leaks they are asking about JVM memory usage just appearing to keep going up and they determined that restarting the JVM on a regular basis is the best fix (unless the interviewer is <em>extremely</em> technically savvy).</p>\n<p>So answer this question as if they asked what makes JVM memory usage grow over time. Good answers would be storing too much data in a HttpSessions with overly long timeout or a poorly implemented in-memory cache (singleton) that never flushes old entries. Another potential answer is having lots of JSPs or dynamically generated classes. Classes are loaded into an area of memory called PermGen that is usually small and most JVMs don't implement class unloading.</p>\n"},{"tags":[],"owner":{"account_id":657002,"reputation":33,"user_id":469070,"display_name":"Jay"},"comment_count":0,"down_vote_count":0,"up_vote_count":15,"is_accepted":false,"score":15,"last_activity_date":1347480457,"creation_date":1347480457,"answer_id":12395504,"question_id":6470651,"body_markdown":"I came across a more subtle kind of resource leak recently.\r\nWe open resources via class loader&#39;s getResourceAsStream and it happened that the input stream handles were not closed.\r\n\r\nUhm, you might say, what an idiot. \r\n\r\nWell, what makes this interesting is: this way, you can leak heap memory of the underlying process, rather than from JVM&#39;s heap.\r\n\r\nAll you need is a jar file with a file inside which will be referenced from Java code. The bigger the jar file, the quicker memory gets allocated.\r\n\r\nYou can easily create such a jar with the following class:\r\n\r\n    import java.io.File;\r\n    import java.io.FileOutputStream;\r\n    import java.io.IOException;\r\n    import java.util.zip.ZipEntry;\r\n    import java.util.zip.ZipOutputStream;\r\n\r\n    public class BigJarCreator {\r\n        public static void main(String[] args) throws IOException {\r\n            ZipOutputStream zos = new ZipOutputStream(new FileOutputStream(new File(&quot;big.jar&quot;)));\r\n            zos.putNextEntry(new ZipEntry(&quot;resource.txt&quot;));\r\n            zos.write(&quot;not too much in here&quot;.getBytes());\r\n            zos.closeEntry();\r\n            zos.putNextEntry(new ZipEntry(&quot;largeFile.out&quot;));\r\n            for (int i=0 ; i&lt;10000000 ; i++) {\r\n                zos.write((int) (Math.round(Math.random()*100)+20));\r\n            }\r\n            zos.closeEntry();\r\n            zos.close();\r\n        }\r\n    }\r\n\r\nJust paste into a file named BigJarCreator.java, compile and run it from command line: \r\n\r\n    javac BigJarCreator.java\r\n    java -cp . BigJarCreator\r\n\r\nEt voil&#224;: you find a jar archive in your current working directory with two files inside.\r\n\r\nLet&#39;s create a second class:\r\n\r\n    public class MemLeak {\r\n        public static void main(String[] args) throws InterruptedException {\r\n            int ITERATIONS=100000;\r\n            for (int i=0 ; i&lt;ITERATIONS ; i++) {\r\n                MemLeak.class.getClassLoader().getResourceAsStream(&quot;resource.txt&quot;);\r\n            }\r\n            System.out.println(&quot;finished creation of streams, now waiting to be killed&quot;);\r\n    \r\n            Thread.sleep(Long.MAX_VALUE);\r\n        }\r\n    \r\n    }\r\n\r\nThis class basically does nothing, but create unreferenced InputStream objects. Those objects will be garbage collected immediately and thus, do not contribute to heap size.\r\nIt is important for our example to load an existing resource from a jar file, and size does matter here!\r\n\r\nIf you&#39;re doubtful, try to compile and start the class above, but make sure to chose a decent heap size (2 MB):\r\n\r\n    javac MemLeak.java\r\n    java -Xmx2m -classpath .:big.jar MemLeak\r\n\r\nYou will not encounter an OOM error here, as no references are kept, the application will keep running no matter how large you chose ITERATIONS in the above example.\r\nThe memory consumption of your process (visible in top (RES/RSS) or process explorer) grows unless the application gets to the wait command. In the setup above, it will allocate around 150 MB in memory.\r\n\r\nIf you want the application to play safe, close the input stream right where it&#39;s created:\r\n\r\n    MemLeak.class.getClassLoader().getResourceAsStream(&quot;resource.txt&quot;).close();\r\n\r\nand your process will not exceed 35 MB, independent of the iteration count.\r\n\r\nQuite simple and surprising.","title":"How can I create a memory leak in Java?","body":"<p>I came across a more subtle kind of resource leak recently.\nWe open resources via class loader's getResourceAsStream and it happened that the input stream handles were not closed.</p>\n\n<p>Uhm, you might say, what an idiot. </p>\n\n<p>Well, what makes this interesting is: this way, you can leak heap memory of the underlying process, rather than from JVM's heap.</p>\n\n<p>All you need is a jar file with a file inside which will be referenced from Java code. The bigger the jar file, the quicker memory gets allocated.</p>\n\n<p>You can easily create such a jar with the following class:</p>\n\n<pre><code>import java.io.File;\nimport java.io.FileOutputStream;\nimport java.io.IOException;\nimport java.util.zip.ZipEntry;\nimport java.util.zip.ZipOutputStream;\n\npublic class BigJarCreator {\n    public static void main(String[] args) throws IOException {\n        ZipOutputStream zos = new ZipOutputStream(new FileOutputStream(new File(\"big.jar\")));\n        zos.putNextEntry(new ZipEntry(\"resource.txt\"));\n        zos.write(\"not too much in here\".getBytes());\n        zos.closeEntry();\n        zos.putNextEntry(new ZipEntry(\"largeFile.out\"));\n        for (int i=0 ; i&lt;10000000 ; i++) {\n            zos.write((int) (Math.round(Math.random()*100)+20));\n        }\n        zos.closeEntry();\n        zos.close();\n    }\n}\n</code></pre>\n\n<p>Just paste into a file named BigJarCreator.java, compile and run it from command line: </p>\n\n<pre><code>javac BigJarCreator.java\njava -cp . BigJarCreator\n</code></pre>\n\n<p>Et voilà: you find a jar archive in your current working directory with two files inside.</p>\n\n<p>Let's create a second class:</p>\n\n<pre><code>public class MemLeak {\n    public static void main(String[] args) throws InterruptedException {\n        int ITERATIONS=100000;\n        for (int i=0 ; i&lt;ITERATIONS ; i++) {\n            MemLeak.class.getClassLoader().getResourceAsStream(\"resource.txt\");\n        }\n        System.out.println(\"finished creation of streams, now waiting to be killed\");\n\n        Thread.sleep(Long.MAX_VALUE);\n    }\n\n}\n</code></pre>\n\n<p>This class basically does nothing, but create unreferenced InputStream objects. Those objects will be garbage collected immediately and thus, do not contribute to heap size.\nIt is important for our example to load an existing resource from a jar file, and size does matter here!</p>\n\n<p>If you're doubtful, try to compile and start the class above, but make sure to chose a decent heap size (2 MB):</p>\n\n<pre><code>javac MemLeak.java\njava -Xmx2m -classpath .:big.jar MemLeak\n</code></pre>\n\n<p>You will not encounter an OOM error here, as no references are kept, the application will keep running no matter how large you chose ITERATIONS in the above example.\nThe memory consumption of your process (visible in top (RES/RSS) or process explorer) grows unless the application gets to the wait command. In the setup above, it will allocate around 150 MB in memory.</p>\n\n<p>If you want the application to play safe, close the input stream right where it's created:</p>\n\n<pre><code>MemLeak.class.getClassLoader().getResourceAsStream(\"resource.txt\").close();\n</code></pre>\n\n<p>and your process will not exceed 35 MB, independent of the iteration count.</p>\n\n<p>Quite simple and surprising.</p>\n"},{"tags":[],"owner":{"account_id":213056,"reputation":689,"user_id":466250,"accept_rate":57,"display_name":"jorgeu"},"comment_count":0,"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1620855588,"creation_date":1348778734,"answer_id":12629746,"question_id":6470651,"body_markdown":"[Swing][1] has it very easy with dialogs. Create a JDialog, show it, the user closes it, and leak!\r\n\r\nYou have to call `dispose()` or configure `setDefaultCloseOperation(DISPOSE_ON_CLOSE)`.\r\n\r\n  [1]: https://en.wikipedia.org/wiki/Swing_%28Java%29\r\n","title":"How can I create a memory leak in Java?","body":"<p><a href=\"https://en.wikipedia.org/wiki/Swing_%28Java%29\" rel=\"nofollow noreferrer\">Swing</a> has it very easy with dialogs. Create a JDialog, show it, the user closes it, and leak!</p>\n<p>You have to call <code>dispose()</code> or configure <code>setDefaultCloseOperation(DISPOSE_ON_CLOSE)</code>.</p>\n"},{"tags":[],"owner":{"account_id":1705684,"reputation":7431,"user_id":1564766,"accept_rate":15,"display_name":"abishkar bhattarai"},"comment_count":0,"down_vote_count":0,"up_vote_count":7,"is_accepted":false,"score":7,"last_activity_date":1620855736,"creation_date":1354519089,"answer_id":13678802,"question_id":6470651,"body_markdown":"If the maximum heap size is X.  Y1....Yn  no of instances\r\n\r\nSo, total memory = number of instances X bytes per instance. If X1......Xn is bytes per instances, then total memory(M)=Y1 * X1+.....+Yn *Xn. So, if M&gt;X, it exceeds the heap space.\r\n\r\nThe following can be the problems in code\r\n\r\n1. Use of more instances variable then local one.\r\n2. Creating instances every time instead of pooling object.\r\n3. Not creating the object on demand.\r\n4. Making the object reference null after the completion of operation. Again, recreating when it is demanded in program.\r\n\r\n\r\n\r\n\r\n\r\n\r\n","title":"How can I create a memory leak in Java?","body":"<p>If the maximum heap size is X.  Y1....Yn  no of instances</p>\n<p>So, total memory = number of instances X bytes per instance. If X1......Xn is bytes per instances, then total memory(M)=Y1 * X1+.....+Yn *Xn. So, if M&gt;X, it exceeds the heap space.</p>\n<p>The following can be the problems in code</p>\n<ol>\n<li>Use of more instances variable then local one.</li>\n<li>Creating instances every time instead of pooling object.</li>\n<li>Not creating the object on demand.</li>\n<li>Making the object reference null after the completion of operation. Again, recreating when it is demanded in program.</li>\n</ol>\n"},{"comments":[{"owner":{"account_id":33655,"reputation":26403,"user_id":94363,"accept_rate":74,"display_name":"rds"},"score":37,"creation_date":1358420359,"post_id":14151509,"comment_id":19995707,"body_markdown":"-1 this runs out of memory for sure, because the requirement is to have an infinite amount of memory. I don&#39;t call this a memory leak. It is just a stupid program.","body":"-1 this runs out of memory for sure, because the requirement is to have an infinite amount of memory. I don&#39;t call this a memory leak. It is just a stupid program."},{"owner":{"account_id":140884,"reputation":19781,"user_id":347508,"display_name":"kritzikratzi"},"score":3,"creation_date":1364846685,"post_id":14151509,"comment_id":22383465,"body_markdown":"also -1, not a mem leak, thats just allocating too much","body":"also -1, not a mem leak, thats just allocating too much"}],"tags":[],"owner":{"account_id":966511,"reputation":8668,"user_id":989857,"accept_rate":0,"display_name":"stones333"},"comment_count":2,"down_vote_count":14,"up_vote_count":7,"is_accepted":false,"score":-7,"last_activity_date":1358420303,"creation_date":1357276935,"answer_id":14151509,"question_id":6470651,"body_markdown":"Here is a very simple Java program that will run out of space\r\n\r\n    public class OutOfMemory {\r\n    \t\r\n    \tpublic static void main(String[] arg) {\r\n    \t\t\r\n    \t    List&lt;Long&gt; mem = new LinkedList&lt;Long&gt;();\r\n    \t    while (true) {\r\n    \t        mem.add(new Long(Long.MAX_VALUE));\r\n    \t    }\r\n    \t}\r\n    }\r\n\r\n","title":"How can I create a memory leak in Java?","body":"<p>Here is a very simple Java program that will run out of space</p>\n\n<pre><code>public class OutOfMemory {\n\n    public static void main(String[] arg) {\n\n        List&lt;Long&gt; mem = new LinkedList&lt;Long&gt;();\n        while (true) {\n            mem.add(new Long(Long.MAX_VALUE));\n        }\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1045732,"reputation":11348,"user_id":1050755,"accept_rate":51,"display_name":"user1050755"},"comment_count":0,"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1362622503,"creation_date":1362622503,"answer_id":15261858,"question_id":6470651,"body_markdown":"If you don&#39;t use a compacting garbage collector, you can have some sort of a memory leak due to heap fragmentation.","title":"How can I create a memory leak in Java?","body":"<p>If you don't use a compacting garbage collector, you can have some sort of a memory leak due to heap fragmentation.</p>\n"},{"tags":[],"owner":{"account_id":967624,"reputation":10828,"user_id":990750,"accept_rate":50,"display_name":"Tarik"},"comment_count":0,"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1373352321,"creation_date":1373352321,"answer_id":17541704,"question_id":6470651,"body_markdown":"Lapsed Listerners is a good example of memory leaks: Object is added as a Listener. All references to the object are nulled when the object is not needed anymore. However, forgetting to remove the object from the Listener list keeps the object alive and even responding to events, thereby wasting both memory and CPU. See http://www.drdobbs.com/jvm/java-qa/184404011","title":"How can I create a memory leak in Java?","body":"<p>Lapsed Listerners is a good example of memory leaks: Object is added as a Listener. All references to the object are nulled when the object is not needed anymore. However, forgetting to remove the object from the Listener list keeps the object alive and even responding to events, thereby wasting both memory and CPU. See <a href=\"http://www.drdobbs.com/jvm/java-qa/184404011\" rel=\"nofollow\">http://www.drdobbs.com/jvm/java-qa/184404011</a></p>\n"},{"tags":[],"owner":{"account_id":388401,"reputation":6292,"user_id":747320,"accept_rate":100,"display_name":"Basanth Roy"},"comment_count":0,"down_vote_count":1,"up_vote_count":8,"is_accepted":false,"score":7,"last_activity_date":1377778239,"creation_date":1377778239,"answer_id":18510634,"question_id":6470651,"body_markdown":"Throw an unhandled exception from the finalize method.","title":"How can I create a memory leak in Java?","body":"<p>Throw an unhandled exception from the finalize method.</p>\n"},{"comments":[{"owner":{"account_id":935202,"reputation":49046,"user_id":964243,"accept_rate":66,"display_name":"Boann"},"score":1,"creation_date":1380238779,"post_id":18544736,"comment_id":28137964,"body_markdown":"@Spidey Nothing is &quot;stuck&quot;. The calling method returns promptly, and the passed object will never be reclaimed. That&#39;s precisely a leak.","body":"@Spidey Nothing is &quot;stuck&quot;. The calling method returns promptly, and the passed object will never be reclaimed. That&#39;s precisely a leak."},{"owner":{"account_id":44702,"reputation":2518,"user_id":131326,"accept_rate":95,"display_name":"Spidey"},"score":1,"creation_date":1380245082,"post_id":18544736,"comment_id":28139318,"body_markdown":"You&#39;ll have a thread &quot;running&quot; (or sleeping, whatever) for the lifetime of your program. That doesn&#39;t count as a leak to me. As well as a pool doesn&#39;t count as a leak, even if you don&#39;t use it entirely.","body":"You&#39;ll have a thread &quot;running&quot; (or sleeping, whatever) for the lifetime of your program. That doesn&#39;t count as a leak to me. As well as a pool doesn&#39;t count as a leak, even if you don&#39;t use it entirely."},{"owner":{"account_id":935202,"reputation":49046,"user_id":964243,"accept_rate":66,"display_name":"Boann"},"score":1,"creation_date":1380245998,"post_id":18544736,"comment_id":28139458,"body_markdown":"@Spidey &quot;You&#39;ll have a [thing] for the lifetime of your program. That doesn&#39;t count as a leak to me.&quot; Do you hear yourself?","body":"@Spidey &quot;You&#39;ll have a [thing] for the lifetime of your program. That doesn&#39;t count as a leak to me.&quot; Do you hear yourself?"},{"owner":{"account_id":44702,"reputation":2518,"user_id":131326,"accept_rate":95,"display_name":"Spidey"},"score":0,"creation_date":1380297070,"post_id":18544736,"comment_id":28161810,"body_markdown":"Yes I do. The process still references the thread, and the thread still references the `o` object. You may have misunderstood what a memory leak is.","body":"Yes I do. The process still references the thread, and the thread still references the <code>o</code> object. You may have misunderstood what a memory leak is."},{"owner":{"account_id":935202,"reputation":49046,"user_id":964243,"accept_rate":66,"display_name":"Boann"},"score":3,"creation_date":1380304838,"post_id":18544736,"comment_id":28165696,"body_markdown":"@Spidey If you would count memory that the process knows about as not being leaked, then all the answers here are wrong, since the process always tracks which pages in its virtual address space are mapped. When the process terminates, the OS cleans up all the leaks by putting the pages back on the free page stack. To take that to the next extreme, one could beat to death any argued leak by pointing out that none of the physical bits in the RAM chips or in the swap space on disk have been physically misplaced or destroyed, so you can switch the computer off and on again to clean up any leak.","body":"@Spidey If you would count memory that the process knows about as not being leaked, then all the answers here are wrong, since the process always tracks which pages in its virtual address space are mapped. When the process terminates, the OS cleans up all the leaks by putting the pages back on the free page stack. To take that to the next extreme, one could beat to death any argued leak by pointing out that none of the physical bits in the RAM chips or in the swap space on disk have been physically misplaced or destroyed, so you can switch the computer off and on again to clean up any leak."},{"owner":{"account_id":935202,"reputation":49046,"user_id":964243,"accept_rate":66,"display_name":"Boann"},"score":1,"creation_date":1380304858,"post_id":18544736,"comment_id":28165705,"body_markdown":"The practical definition of a leak is that it&#39;s memory which has been lost track of such that we don&#39;t know and thus can&#39;t perform the procedure necessary to reclaim only it; we would have to tear down and rebuild the entire memory space. A rogue thread like this could arise naturally through a deadlock or dodgy threadpool implementation. Objects referenced by such threads, even indirectly, are now prevented from ever being collected, so we have memory which will not be naturally reclaimed or reusable during the lifetime of the program. I&#39;d call that a problem; specifically it&#39;s a memory leak.","body":"The practical definition of a leak is that it&#39;s memory which has been lost track of such that we don&#39;t know and thus can&#39;t perform the procedure necessary to reclaim only it; we would have to tear down and rebuild the entire memory space. A rogue thread like this could arise naturally through a deadlock or dodgy threadpool implementation. Objects referenced by such threads, even indirectly, are now prevented from ever being collected, so we have memory which will not be naturally reclaimed or reusable during the lifetime of the program. I&#39;d call that a problem; specifically it&#39;s a memory leak."},{"owner":{"account_id":935202,"reputation":49046,"user_id":964243,"accept_rate":66,"display_name":"Boann"},"score":0,"creation_date":1380651464,"post_id":18544736,"comment_id":28278615,"body_markdown":"@Spidey What is your answer? What do you consider a leak?","body":"@Spidey What is your answer? What do you consider a leak?"},{"owner":{"account_id":44702,"reputation":2518,"user_id":131326,"accept_rate":95,"display_name":"Spidey"},"score":0,"creation_date":1380722818,"post_id":18544736,"comment_id":28305579,"body_markdown":"Since Java has a garbage collector, I don&#39;t think it can even leak.","body":"Since Java has a garbage collector, I don&#39;t think it can even leak."},{"owner":{"account_id":935202,"reputation":49046,"user_id":964243,"accept_rate":66,"display_name":"Boann"},"score":0,"creation_date":1380723765,"post_id":18544736,"comment_id":28306231,"body_markdown":"@Spidey Then try it for yourself and you&#39;ll see that it does leak. The garbage collector isn&#39;t (and cannot be) infallible because it can&#39;t tell the difference between live references and obsolete ones, which is why explicit nulling of obsolete references is necessary when the object or scope holding the obsolete reference is still in use.","body":"@Spidey Then try it for yourself and you&#39;ll see that it does leak. The garbage collector isn&#39;t (and cannot be) infallible because it can&#39;t tell the difference between live references and obsolete ones, which is why explicit nulling of obsolete references is necessary when the object or scope holding the obsolete reference is still in use."},{"owner":{"account_id":44702,"reputation":2518,"user_id":131326,"accept_rate":95,"display_name":"Spidey"},"score":0,"creation_date":1380737235,"post_id":18544736,"comment_id":28314394,"body_markdown":"There is no difference between &quot;live references and obsolete ones&quot; in the context of the question. They are still referenced somewhere. In a C program, a leak isn&#39;t referenced anywhere, even the OS can&#39;t touch it. It can release all memory pages used by a given process, but it can&#39;t reference each and every memory block allocated.","body":"There is no difference between &quot;live references and obsolete ones&quot; in the context of the question. They are still referenced somewhere. In a C program, a leak isn&#39;t referenced anywhere, even the OS can&#39;t touch it. It can release all memory pages used by a given process, but it can&#39;t reference each and every memory block allocated."},{"owner":{"account_id":935202,"reputation":49046,"user_id":964243,"accept_rate":66,"display_name":"Boann"},"score":0,"creation_date":1380742604,"post_id":18544736,"comment_id":28317271,"body_markdown":"@Spidey It&#39;s the most important difference. At a lower level (program -&gt; JVM -&gt; OS -&gt; RAM chips -&gt; Universe) any memory leak from the higher level becomes unreal. The practical definition for a memory leak is that during execution, your memory space (at whatever level you define it) is accumulating things which are not wanted, reducing available space for things which are wanted. &quot;In a C program, a leak isn&#39;t referenced anywhere&quot; -- also wrong -- leaked memory could still be referenced. What matters is whether the memory can be re-used, which in C does not depend on whether it&#39;s referenced.","body":"@Spidey It&#39;s the most important difference. At a lower level (program -&gt; JVM -&gt; OS -&gt; RAM chips -&gt; Universe) any memory leak from the higher level becomes unreal. The practical definition for a memory leak is that during execution, your memory space (at whatever level you define it) is accumulating things which are not wanted, reducing available space for things which are wanted. &quot;In a C program, a leak isn&#39;t referenced anywhere&quot; -- also wrong -- leaked memory could still be referenced. What matters is whether the memory can be re-used, which in C does not depend on whether it&#39;s referenced."},{"owner":{"account_id":44702,"reputation":2518,"user_id":131326,"accept_rate":95,"display_name":"Spidey"},"score":0,"creation_date":1380755998,"post_id":18544736,"comment_id":28322872,"body_markdown":"obviously not much people think you are right. See this: http://www.ibm.com/developerworks/rational/library/05/0816_GuptaPalanki/\nMemory leaks in Java are not real leaks, they are bad design choices or bugs in code.","body":"obviously not much people think you are right. See this: <a href=\"http://www.ibm.com/developerworks/rational/library/05/0816_GuptaPalanki/\" rel=\"nofollow noreferrer\">ibm.com/developerworks/rational/library/05/0816_GuptaPalanki</a> Memory leaks in Java are not real leaks, they are bad design choices or bugs in code."},{"owner":{"account_id":935202,"reputation":49046,"user_id":964243,"accept_rate":66,"display_name":"Boann"},"score":0,"creation_date":1380816890,"post_id":18544736,"comment_id":28349423,"body_markdown":"@Spidey &quot;not much people think you are right&quot;.. Uh, about which? Which people? Where? Check the previous page of answers for the many older, popular answers that I&#39;m defending here and which you are calling wrong. &quot;Memory leaks in Java are not real leaks&quot; Nowhere does the article say that. It gives examples of memory leaks and shows how they are a real loss of usable memory due to objects not being reclaimed. Those objects accumulate over time and become a real problem. That&#39;s what a memory leak is. &quot;they are bad design choices or bugs in code&quot; ... which result in **memory leaks**, yes.","body":"@Spidey &quot;not much people think you are right&quot;.. Uh, about which? Which people? Where? Check the previous page of answers for the many older, popular answers that I&#39;m defending here and which you are calling wrong. &quot;Memory leaks in Java are not real leaks&quot; Nowhere does the article say that. It gives examples of memory leaks and shows how they are a real loss of usable memory due to objects not being reclaimed. Those objects accumulate over time and become a real problem. That&#39;s what a memory leak is. &quot;they are bad design choices or bugs in code&quot; ... which result in <b>memory leaks</b>, yes."},{"owner":{"account_id":44702,"reputation":2518,"user_id":131326,"accept_rate":95,"display_name":"Spidey"},"score":0,"creation_date":1380821037,"post_id":18544736,"comment_id":28351698,"body_markdown":"I mean all the people who read your answer and our discussion, and still didn&#39;t care to up or down your post. But that&#39;s not a real argument anyway.\nSee slowlyLeakingVector in Listing 2. I could accept that as a memory leak, but that&#39;s different from what you are doing. As I see, your answer suggests that any unused allocated object implies in a leak. I don&#39;t agree with that.","body":"I mean all the people who read your answer and our discussion, and still didn&#39;t care to up or down your post. But that&#39;s not a real argument anyway. See slowlyLeakingVector in Listing 2. I could accept that as a memory leak, but that&#39;s different from what you are doing. As I see, your answer suggests that any unused allocated object implies in a leak. I don&#39;t agree with that."},{"owner":{"account_id":7445,"reputation":62274,"user_id":12943,"accept_rate":84,"display_name":"Bill K"},"score":0,"creation_date":1380837724,"post_id":18544736,"comment_id":28359981,"body_markdown":"This is totally valid code, it&#39;s what it means to use threads.  They are designed to keep their references.  Also it&#39;s not only threads that do this, also GUI frames keep everything referenced by them even though there is no thread.  There are a few other &quot;tops&quot; to the GC tree as well.  If you have a thread that runs forever then, by design, it will keep everything it references forever, otherwise nothing will work.  If this is not what you intended however, then you DO have a programming bug!","body":"This is totally valid code, it&#39;s what it means to use threads.  They are designed to keep their references.  Also it&#39;s not only threads that do this, also GUI frames keep everything referenced by them even though there is no thread.  There are a few other &quot;tops&quot; to the GC tree as well.  If you have a thread that runs forever then, by design, it will keep everything it references forever, otherwise nothing will work.  If this is not what you intended however, then you DO have a programming bug!"},{"owner":{"account_id":935202,"reputation":49046,"user_id":964243,"accept_rate":66,"display_name":"Boann"},"score":1,"creation_date":1380861014,"post_id":18544736,"comment_id":28365335,"body_markdown":"@Spidey &quot;I could accept that as a memory leak&quot; Thank you. Earlier, you&#39;d said something couldn&#39;t be a leak if it&#39;s still referenced and that you couldn&#39;t have a leak in Java because it has a garbage collector. &gt;_&lt; &quot;Your answer suggests that any unused allocated object implies a leak&quot;. Well, the example is a scenario of an object that the garbage collector can&#39;t/won&#39;t collect. If it emerges in a program and happens repeatedly it becomes a leak. I&#39;ll try to improve my answer with that info.","body":"@Spidey &quot;I could accept that as a memory leak&quot; Thank you. Earlier, you&#39;d said something couldn&#39;t be a leak if it&#39;s still referenced and that you couldn&#39;t have a leak in Java because it has a garbage collector. &gt;_&lt; &quot;Your answer suggests that any unused allocated object implies a leak&quot;. Well, the example is a scenario of an object that the garbage collector can&#39;t/won&#39;t collect. If it emerges in a program and happens repeatedly it becomes a leak. I&#39;ll try to improve my answer with that info."},{"owner":{"account_id":109614,"reputation":13954,"user_id":290340,"accept_rate":89,"display_name":"Evan Plaice"},"score":0,"creation_date":1393236521,"post_id":18544736,"comment_id":33315463,"body_markdown":"Can&#39;t you just allocate a bunch of memory on background threads and intentionally deadlock them by using a very poorly structured system of nested thread locks? It fits the profile of running for the life of the program and not being accessible by the application or recoverable by the GC.","body":"Can&#39;t you just allocate a bunch of memory on background threads and intentionally deadlock them by using a very poorly structured system of nested thread locks? It fits the profile of running for the life of the program and not being accessible by the application or recoverable by the GC."}],"tags":[],"owner":{"account_id":935202,"reputation":49046,"user_id":964243,"accept_rate":66,"display_name":"Boann"},"comment_count":17,"down_vote_count":3,"up_vote_count":16,"is_accepted":false,"score":13,"last_activity_date":1620855953,"creation_date":1377925827,"answer_id":18544736,"question_id":6470651,"body_markdown":"Threads are not collected until they terminate. They serve as [roots](https://stackoverflow.com/questions/6366211/what-are-the-roots) of garbage collection. They are one of the few objects that won&#39;t be reclaimed simply by forgetting about them or clearing references to them.\r\n\r\nConsider: the basic pattern to terminate a worker thread is to set some condition variable seen by the thread. The thread can check the variable periodically and use that as a signal to terminate. If the variable is not declared `volatile`, then the change to the variable might not be seen by the thread, so it won&#39;t know to terminate. Or imagine if some threads want to update a shared object, but deadlock while trying to lock on it.\r\n\r\nIf you only have a handful of threads these bugs will probably be obvious because your program will stop working properly. If you have a thread pool that creates more threads as needed, then the obsolete/stuck threads might not be noticed, and will accumulate indefinitely, causing a memory leak. Threads are likely to use other data in your application, so will also prevent anything they directly reference from ever being collected.\r\n\r\nAs a toy example:\r\n\r\n    static void leakMe(final Object object) {\r\n        new Thread() {\r\n            public void run() {\r\n                Object o = object;\r\n                for (;;) {\r\n                    try {\r\n                        sleep(Long.MAX_VALUE);\r\n                    } catch (InterruptedException e) {}\r\n                }\r\n            }\r\n        }.start();\r\n    }\r\n\r\nCall `System.gc()` all you like, but the object passed to `leakMe` will never die.\r\n\r\n\r\n","title":"How can I create a memory leak in Java?","body":"<p>Threads are not collected until they terminate. They serve as <a href=\"https://stackoverflow.com/questions/6366211/what-are-the-roots\">roots</a> of garbage collection. They are one of the few objects that won't be reclaimed simply by forgetting about them or clearing references to them.</p>\n<p>Consider: the basic pattern to terminate a worker thread is to set some condition variable seen by the thread. The thread can check the variable periodically and use that as a signal to terminate. If the variable is not declared <code>volatile</code>, then the change to the variable might not be seen by the thread, so it won't know to terminate. Or imagine if some threads want to update a shared object, but deadlock while trying to lock on it.</p>\n<p>If you only have a handful of threads these bugs will probably be obvious because your program will stop working properly. If you have a thread pool that creates more threads as needed, then the obsolete/stuck threads might not be noticed, and will accumulate indefinitely, causing a memory leak. Threads are likely to use other data in your application, so will also prevent anything they directly reference from ever being collected.</p>\n<p>As a toy example:</p>\n<pre><code>static void leakMe(final Object object) {\n    new Thread() {\n        public void run() {\n            Object o = object;\n            for (;;) {\n                try {\n                    sleep(Long.MAX_VALUE);\n                } catch (InterruptedException e) {}\n            }\n        }\n    }.start();\n}\n</code></pre>\n<p>Call <code>System.gc()</code> all you like, but the object passed to <code>leakMe</code> will never die.</p>\n"},{"tags":[],"owner":{"account_id":167824,"reputation":21098,"user_id":1439305,"accept_rate":81,"display_name":"Audrius Meškauskas"},"comment_count":0,"down_vote_count":0,"up_vote_count":9,"is_accepted":false,"score":9,"last_activity_date":1620856051,"creation_date":1389099397,"answer_id":20972237,"question_id":6470651,"body_markdown":"A thread that does not terminate (say sleeps indefinitely in its run method). It will not be garbage collected even if we lose a reference to it. You can add fields to make the thread object is a big as you want.\r\n\r\nThe currently top answer lists more tricks around this, but these seem redundant.\r\n","title":"How can I create a memory leak in Java?","body":"<p>A thread that does not terminate (say sleeps indefinitely in its run method). It will not be garbage collected even if we lose a reference to it. You can add fields to make the thread object is a big as you want.</p>\n<p>The currently top answer lists more tricks around this, but these seem redundant.</p>\n"},{"comments":[{"owner":{"account_id":1399354,"reputation":32465,"user_id":2344584,"accept_rate":83,"display_name":"Stefano Sanfilippo"},"score":0,"creation_date":1434904848,"post_id":24070827,"comment_id":49965250,"body_markdown":"Regarding the last sentence, the best way to win over the evil is knowing it well.  If you want to write a secure web application, you should make yourself familiar with the most common exploit techniques and vulnerabilities, like SQL injections or buffer overflows. Similarly, if you want to write leak-free code, you should at least be able to describe the most common ways of leaking memory, like lost pointers in C/C++. Definitely less straightforward in Java, though.","body":"Regarding the last sentence, the best way to win over the evil is knowing it well.  If you want to write a secure web application, you should make yourself familiar with the most common exploit techniques and vulnerabilities, like SQL injections or buffer overflows. Similarly, if you want to write leak-free code, you should at least be able to describe the most common ways of leaking memory, like lost pointers in C/C++. Definitely less straightforward in Java, though."}],"tags":[],"owner":{"account_id":557322,"reputation":8250,"user_id":919710,"accept_rate":80,"display_name":"Alexandre Santos"},"comment_count":1,"down_vote_count":0,"up_vote_count":7,"is_accepted":false,"score":7,"last_activity_date":1402005281,"creation_date":1402005281,"answer_id":24070827,"question_id":6470651,"body_markdown":"There are many answers on how to create a memory leak in Java, but please note the point asked during the interview.\r\n\r\n&quot;how to create a memory leak with Java?&quot; is an open-ended question, whose purpose is to evaluate the degree of experience a developer has.\r\n\r\nIf I ask you &quot;Do you have experience troubleshooting memory leaks in Java?&quot;, your answer would be a simple &quot;Yes&quot;.\r\nI would have then to follow up with &quot;Could you give me examples where you hat to troubleshoot memory leaks?&quot;, to which you would give me one or two examples.\r\n\r\nHowever, when the interviewer asks &quot;how to create a memory leak with Java?&quot; the expected answer should follow alongs these lines:\r\n\r\n- I&#39;ve encountered a memory leak ... (say when) [that shows me experience]\r\n- The code that was causing it was... (explain code) [you fixed it yourself]\r\n- The fix I applied was based on ... (explain fix) [this gives me a chance to ask specifics about the fix]\r\n- The test I did was ... [gives me the chance of asking other testing methodologies]\r\n- I documented it this way ... [extra points. Good if you documented it]\r\n- So, it is reasonable to think that, if we follow this in reverse order, which is, get the code I fixed, and remove my fix, that we would have a memory leak.\r\n\r\n\r\n\r\nWhen the developer fails to follow this line of thought I try to guide him/her asking &quot;Could you give me an example of how could Java leak memory?&quot;, followed by &quot;Did you ever have to fix any memory leak in Java?&quot;\r\n\r\nNote that I am **not** asking for an example on how to leak memory in Java. That would be silly. Who would be interested in a developer who can effectively write code that leaks memory?\r\n\r\n","title":"How can I create a memory leak in Java?","body":"<p>There are many answers on how to create a memory leak in Java, but please note the point asked during the interview.</p>\n\n<p>\"how to create a memory leak with Java?\" is an open-ended question, whose purpose is to evaluate the degree of experience a developer has.</p>\n\n<p>If I ask you \"Do you have experience troubleshooting memory leaks in Java?\", your answer would be a simple \"Yes\".\nI would have then to follow up with \"Could you give me examples where you hat to troubleshoot memory leaks?\", to which you would give me one or two examples.</p>\n\n<p>However, when the interviewer asks \"how to create a memory leak with Java?\" the expected answer should follow alongs these lines:</p>\n\n<ul>\n<li>I've encountered a memory leak ... (say when) [that shows me experience]</li>\n<li>The code that was causing it was... (explain code) [you fixed it yourself]</li>\n<li>The fix I applied was based on ... (explain fix) [this gives me a chance to ask specifics about the fix]</li>\n<li>The test I did was ... [gives me the chance of asking other testing methodologies]</li>\n<li>I documented it this way ... [extra points. Good if you documented it]</li>\n<li>So, it is reasonable to think that, if we follow this in reverse order, which is, get the code I fixed, and remove my fix, that we would have a memory leak.</li>\n</ul>\n\n<p>When the developer fails to follow this line of thought I try to guide him/her asking \"Could you give me an example of how could Java leak memory?\", followed by \"Did you ever have to fix any memory leak in Java?\"</p>\n\n<p>Note that I am <strong>not</strong> asking for an example on how to leak memory in Java. That would be silly. Who would be interested in a developer who can effectively write code that leaks memory?</p>\n"},{"tags":[],"owner":{"account_id":1979243,"reputation":5103,"user_id":1817435,"accept_rate":67,"display_name":"Viraj"},"comment_count":0,"down_vote_count":0,"up_vote_count":7,"is_accepted":false,"score":7,"last_activity_date":1620856147,"creation_date":1403092394,"answer_id":24284882,"question_id":6470651,"body_markdown":"The *String.substring* method in Java 1.6 create a memory leak. This blog post explains it:\r\n\r\n*[How SubString method works in Java - Memory Leak Fixed in JDK 1.7][1]*\r\n\r\n  [1]: http://javarevisited.blogspot.com/2011/10/how-substring-in-java-works.html\r\n\r\n\r\n","title":"How can I create a memory leak in Java?","body":"<p>The <em>String.substring</em> method in Java 1.6 create a memory leak. This blog post explains it:</p>\n<p><em><a href=\"http://javarevisited.blogspot.com/2011/10/how-substring-in-java-works.html\" rel=\"nofollow noreferrer\">How SubString method works in Java - Memory Leak Fixed in JDK 1.7</a></em></p>\n"},{"comments":[{"owner":{"account_id":2056278,"reputation":23340,"user_id":1833961,"accept_rate":54,"display_name":"bvdb"},"score":0,"creation_date":1620054156,"post_id":24832345,"comment_id":119081286,"body_markdown":"On a slightly unrelated note: There&#39;s a popular saying: There are only 2 things difficult in programming: naming things and cache invalidation.","body":"On a slightly unrelated note: There&#39;s a popular saying: There are only 2 things difficult in programming: naming things and cache invalidation."}],"tags":[],"owner":{"account_id":2056278,"reputation":23340,"user_id":1833961,"accept_rate":54,"display_name":"bvdb"},"comment_count":1,"down_vote_count":0,"up_vote_count":27,"is_accepted":false,"score":27,"last_activity_date":1414502330,"creation_date":1405711476,"answer_id":24832345,"question_id":6470651,"body_markdown":"What&#39;s a memory leak:\r\n\r\n - It&#39;s caused by a **bug** or **bad design.**\r\n - It&#39;s a waste of memory.\r\n - **It gets worse over time.**\r\n - **The garbage collector cannot clean it.**\r\n\r\n*Typical example:*\r\n\r\nA cache of objects is a good starting point to mess things up.\r\n\r\n    private static final Map&lt;String, Info&gt; myCache = new HashMap&lt;&gt;();\r\n    \r\n    public void getInfo(String key)\r\n    {\r\n        // uses cache\r\n        Info info = myCache.get(key);\r\n        if (info != null) return info;\r\n        \r\n        // if it&#39;s not in cache, then fetch it from the database\r\n        info = Database.fetch(key);\r\n        if (info == null) return null;\r\n\r\n        // and store it in the cache\r\n        myCache.put(key, info);\r\n        return info;\r\n    }\r\n\r\nYour cache grows and grows. And pretty soon the entire database gets sucked into memory. A better design uses an LRUMap (Only keeps recently used objects in cache).\r\n\r\nSure, you can make things a lot more complicated: \r\n\r\n - using **ThreadLocal** constructions.\r\n - adding more **complex reference trees**. \r\n - or leaks caused by **3rd party libraries**.\r\n\r\n*What often happens:* \r\n\r\nIf this Info object has references to other objects, which again have references to other objects. In a way you could also consider this to be some kind of memory leak, (caused by bad design).","title":"How can I create a memory leak in Java?","body":"<p>What's a memory leak:</p>\n\n<ul>\n<li>It's caused by a <strong>bug</strong> or <strong>bad design.</strong></li>\n<li>It's a waste of memory.</li>\n<li><strong>It gets worse over time.</strong></li>\n<li><strong>The garbage collector cannot clean it.</strong></li>\n</ul>\n\n<p><em>Typical example:</em></p>\n\n<p>A cache of objects is a good starting point to mess things up.</p>\n\n<pre><code>private static final Map&lt;String, Info&gt; myCache = new HashMap&lt;&gt;();\n\npublic void getInfo(String key)\n{\n    // uses cache\n    Info info = myCache.get(key);\n    if (info != null) return info;\n\n    // if it's not in cache, then fetch it from the database\n    info = Database.fetch(key);\n    if (info == null) return null;\n\n    // and store it in the cache\n    myCache.put(key, info);\n    return info;\n}\n</code></pre>\n\n<p>Your cache grows and grows. And pretty soon the entire database gets sucked into memory. A better design uses an LRUMap (Only keeps recently used objects in cache).</p>\n\n<p>Sure, you can make things a lot more complicated: </p>\n\n<ul>\n<li>using <strong>ThreadLocal</strong> constructions.</li>\n<li>adding more <strong>complex reference trees</strong>. </li>\n<li>or leaks caused by <strong>3rd party libraries</strong>.</li>\n</ul>\n\n<p><em>What often happens:</em> </p>\n\n<p>If this Info object has references to other objects, which again have references to other objects. In a way you could also consider this to be some kind of memory leak, (caused by bad design).</p>\n"},{"comments":[{"owner":{"account_id":1773418,"reputation":18513,"user_id":1617737,"accept_rate":53,"display_name":"ban-geoengineering"},"score":0,"creation_date":1435151311,"post_id":25375224,"comment_id":50079440,"body_markdown":"Would making `mLeakyHandler` static prevent it from leaking memory? And are there any (other) ways to prevent `mLeakyHandler` from leaking the activity?\nAlso, how would you go about solving the same problem for the anonymous `Runnable` inner class?","body":"Would making <code>mLeakyHandler</code> static prevent it from leaking memory? And are there any (other) ways to prevent <code>mLeakyHandler</code> from leaking the activity? Also, how would you go about solving the same problem for the anonymous <code>Runnable</code> inner class?"},{"owner":{"account_id":2386817,"reputation":15505,"user_id":2087628,"accept_rate":42,"display_name":"JaskeyLam"},"score":1,"creation_date":1435198816,"post_id":25375224,"comment_id":50103787,"body_markdown":"@ban-geoengineering Yes, make it static and if you need to involve the  outter activity, make the handler to hold a WeakReference to the activity, please check http://www.androiddesignpatterns.com/2013/01/inner-class-handler-memory-leak.html","body":"@ban-geoengineering Yes, make it static and if you need to involve the  outter activity, make the handler to hold a WeakReference to the activity, please check <a href=\"http://www.androiddesignpatterns.com/2013/01/inner-class-handler-memory-leak.html\" rel=\"nofollow noreferrer\">androiddesignpatterns.com/2013/01/&hellip;</a>"}],"tags":[],"owner":{"account_id":2386817,"reputation":15505,"user_id":2087628,"accept_rate":42,"display_name":"JaskeyLam"},"comment_count":2,"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1620856357,"creation_date":1408418421,"answer_id":25375224,"question_id":6470651,"body_markdown":"**Carelessly using a non-static inner class inside a class which has its own life cycle.**\r\n\r\nIn Java, **non-static inner and anonymous classes** hold an **implicit reference** to their outer class. Static inner classes, on the other hand, **do not**.\r\n\r\nHere is a common example to have memory leak in Android, which is not obvious though:\r\n\r\n    public class SampleActivity extends Activity {\r\n\r\n      private final Handler mLeakyHandler = new Handler() { // Non-static inner class, holds the reference to the SampleActivity outer class\r\n        @Override\r\n        public void handleMessage(Message msg) {\r\n          // ...\r\n        }\r\n      }\r\n\r\n      @Override\r\n      protected void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n\r\n        // Post a message and delay its execution for a long time.\r\n        mLeakyHandler.postDelayed(new Runnable() {//here, the anonymous inner class holds the reference to the SampleActivity class too\r\n          @Override\r\n          public void run() {\r\n         //....\r\n          }\r\n        }, SOME_TOME_TIME);\r\n\r\n        // Go back to the previous Activity.\r\n        finish();\r\n      }}\r\n\r\nThis will prevent the activity context from being garbage collected.\r\n\r\n\r\n\r\n","title":"How can I create a memory leak in Java?","body":"<p><strong>Carelessly using a non-static inner class inside a class which has its own life cycle.</strong></p>\n<p>In Java, <strong>non-static inner and anonymous classes</strong> hold an <strong>implicit reference</strong> to their outer class. Static inner classes, on the other hand, <strong>do not</strong>.</p>\n<p>Here is a common example to have memory leak in Android, which is not obvious though:</p>\n<pre><code>public class SampleActivity extends Activity {\n\n  private final Handler mLeakyHandler = new Handler() { // Non-static inner class, holds the reference to the SampleActivity outer class\n    @Override\n    public void handleMessage(Message msg) {\n      // ...\n    }\n  }\n\n  @Override\n  protected void onCreate(Bundle savedInstanceState) {\n    super.onCreate(savedInstanceState);\n\n    // Post a message and delay its execution for a long time.\n    mLeakyHandler.postDelayed(new Runnable() {//here, the anonymous inner class holds the reference to the SampleActivity class too\n      @Override\n      public void run() {\n     //....\n      }\n    }, SOME_TOME_TIME);\n\n    // Go back to the previous Activity.\n    finish();\n  }}\n</code></pre>\n<p>This will prevent the activity context from being garbage collected.</p>\n"},{"tags":[],"owner":{"account_id":5920664,"reputation":25,"user_id":4658182,"display_name":"TV Trailers"},"comment_count":0,"down_vote_count":9,"up_vote_count":2,"is_accepted":false,"score":-7,"last_activity_date":1426084687,"creation_date":1426084687,"answer_id":28989529,"question_id":6470651,"body_markdown":"There&#39;s no such thing as a memory leak in Java. Memory leak is a phrase borrowed from C et al. Java deals with memory allocation internally with the help of the GC. There&#39;s *memory wastefulness* (ie. leaving stranded objects), but not *memory leak*.","title":"How can I create a memory leak in Java?","body":"<p>There's no such thing as a memory leak in Java. Memory leak is a phrase borrowed from C et al. Java deals with memory allocation internally with the help of the GC. There's <em>memory wastefulness</em> (ie. leaving stranded objects), but not <em>memory leak</em>.</p>\n"},{"tags":[],"owner":{"display_name":"user1529891"},"comment_count":0,"down_vote_count":0,"up_vote_count":7,"is_accepted":false,"score":7,"last_activity_date":1620856887,"creation_date":1492531917,"answer_id":43477232,"question_id":6470651,"body_markdown":"A memory leak in Java is not your typical C/C++ memory leak.\r\n\r\nTo understand how the JVM works, read the [Understanding Memory Management][1].\r\n\r\nBasically, the important part is:\r\n\r\n&gt; The Mark and Sweep Model\r\n&gt;\r\n&gt; The JRockit JVM uses the mark and sweep garbage collection model for\r\n&gt; performing garbage collections of the whole heap. A mark and sweep\r\n&gt; garbage collection consists of two phases, the mark phase and the\r\n&gt; sweep phase.\r\n&gt;\r\n&gt; During the mark phase **all objects that are reachable from Java\r\n&gt; threads, native handles and other root sources are marked as alive**, as\r\n&gt; well as the objects that are reachable from these objects and so\r\n&gt; forth. **This process identifies and marks all objects that are still\r\n&gt; used, and the rest can be considered garbage.**\r\n&gt;\r\n&gt; During the sweep phase the heap is traversed to find the gaps between\r\n&gt; the live objects. These gaps are recorded in a free list and are made\r\n&gt; available for new object allocation.\r\n&gt;\r\n&gt; The JRockit JVM uses two improved versions of the mark and sweep\r\n&gt; model. One is mostly concurrent mark and sweep and the other is\r\n&gt; parallel mark and sweep. You can also mix the two strategies, running\r\n&gt; for example mostly concurrent mark and parallel sweep.\r\n\r\nSo, to create a memory leak in Java; the easiest way to do that is to create a database connection, do some work, and simply not `Close()` it; then generate a new database connection while staying in scope. This isn&#39;t hard to do in a loop for example. If you have a worker that pulls from a queue and pushes to a database you can easily create a memory leak by forgetting to `Close()` connections or opening them when not necessary, and so forth.\r\n\r\nEventually, you&#39;ll consume the heap that has been allocated to the JVM by forgetting to `Close()` the connection. This will result in the JVM garbage collecting like crazy; eventually resulting in `java.lang.OutOfMemoryError: Java heap space` errors. It should be noted that the error may not mean there is a memory leak; it could just mean you don&#39;t have enough memory; databases like [Cassandra][2] and [Elasticsearch][3] for example can throw that error because they don&#39;t have enough heap space.\r\n\r\nIt&#39;s worth noting that this is true for all GC languages. Below, are some examples I&#39;ve seen working as an SRE:\r\n\r\n - [Node.js][4] using [Redis][5] as a queue; the development team created new connections every 12 hours and forgot to close the old ones. Eventually node was OOMd because it consumed all the memory.\r\n - [Go][6] (I&#39;m guilty of this one); parsing large JSON files with `json.Unmarshal` and then passing the results by reference and keeping them open. Eventually, this resulted in the entire heap being consumed by accidental references I kept open to decode JSON.\r\n\r\n  [1]: https://docs.oracle.com/cd/E13150_01/jrockit_jvm/jrockit/geninfo/diagnos/garbage_collect.html\r\n  [2]: https://en.wikipedia.org/wiki/Apache_Cassandra\r\n  [3]: https://en.wikipedia.org/wiki/Elasticsearch\r\n  [4]: https://en.wikipedia.org/wiki/Node.js\r\n  [5]: https://en.wikipedia.org/wiki/Redis_%28data_store%29\r\n  [6]: https://en.wikipedia.org/wiki/Go_%28programming_language%29\r\n\r\n\r\n\r\n","title":"How can I create a memory leak in Java?","body":"<p>A memory leak in Java is not your typical C/C++ memory leak.</p>\n<p>To understand how the JVM works, read the <a href=\"https://docs.oracle.com/cd/E13150_01/jrockit_jvm/jrockit/geninfo/diagnos/garbage_collect.html\" rel=\"nofollow noreferrer\">Understanding Memory Management</a>.</p>\n<p>Basically, the important part is:</p>\n<blockquote>\n<p>The Mark and Sweep Model</p>\n<p>The JRockit JVM uses the mark and sweep garbage collection model for\nperforming garbage collections of the whole heap. A mark and sweep\ngarbage collection consists of two phases, the mark phase and the\nsweep phase.</p>\n<p>During the mark phase <strong>all objects that are reachable from Java\nthreads, native handles and other root sources are marked as alive</strong>, as\nwell as the objects that are reachable from these objects and so\nforth. <strong>This process identifies and marks all objects that are still\nused, and the rest can be considered garbage.</strong></p>\n<p>During the sweep phase the heap is traversed to find the gaps between\nthe live objects. These gaps are recorded in a free list and are made\navailable for new object allocation.</p>\n<p>The JRockit JVM uses two improved versions of the mark and sweep\nmodel. One is mostly concurrent mark and sweep and the other is\nparallel mark and sweep. You can also mix the two strategies, running\nfor example mostly concurrent mark and parallel sweep.</p>\n</blockquote>\n<p>So, to create a memory leak in Java; the easiest way to do that is to create a database connection, do some work, and simply not <code>Close()</code> it; then generate a new database connection while staying in scope. This isn't hard to do in a loop for example. If you have a worker that pulls from a queue and pushes to a database you can easily create a memory leak by forgetting to <code>Close()</code> connections or opening them when not necessary, and so forth.</p>\n<p>Eventually, you'll consume the heap that has been allocated to the JVM by forgetting to <code>Close()</code> the connection. This will result in the JVM garbage collecting like crazy; eventually resulting in <code>java.lang.OutOfMemoryError: Java heap space</code> errors. It should be noted that the error may not mean there is a memory leak; it could just mean you don't have enough memory; databases like <a href=\"https://en.wikipedia.org/wiki/Apache_Cassandra\" rel=\"nofollow noreferrer\">Cassandra</a> and <a href=\"https://en.wikipedia.org/wiki/Elasticsearch\" rel=\"nofollow noreferrer\">Elasticsearch</a> for example can throw that error because they don't have enough heap space.</p>\n<p>It's worth noting that this is true for all GC languages. Below, are some examples I've seen working as an SRE:</p>\n<ul>\n<li><a href=\"https://en.wikipedia.org/wiki/Node.js\" rel=\"nofollow noreferrer\">Node.js</a> using <a href=\"https://en.wikipedia.org/wiki/Redis_%28data_store%29\" rel=\"nofollow noreferrer\">Redis</a> as a queue; the development team created new connections every 12 hours and forgot to close the old ones. Eventually node was OOMd because it consumed all the memory.</li>\n<li><a href=\"https://en.wikipedia.org/wiki/Go_%28programming_language%29\" rel=\"nofollow noreferrer\">Go</a> (I'm guilty of this one); parsing large JSON files with <code>json.Unmarshal</code> and then passing the results by reference and keeping them open. Eventually, this resulted in the entire heap being consumed by accidental references I kept open to decode JSON.</li>\n</ul>\n"},{"comments":[{"owner":{"account_id":956558,"reputation":30924,"user_id":981744,"display_name":"Erwin Bolwidt"},"score":2,"creation_date":1645673331,"post_id":46736578,"comment_id":125936959,"body_markdown":"No JVM ever used reference counting. You may be confusing things with an early implementation of Java**script** by Microsoft.","body":"No JVM ever used reference counting. You may be confusing things with an early implementation of Java<b>script</b> by Microsoft."}],"tags":[],"owner":{"account_id":2650729,"reputation":640,"user_id":2292492,"accept_rate":50,"display_name":"deltamind106"},"comment_count":1,"down_vote_count":2,"up_vote_count":31,"is_accepted":false,"score":29,"last_activity_date":1665395934,"creation_date":1507921764,"answer_id":46736578,"question_id":6470651,"body_markdown":"The interviewer was probably looking for a circular reference like the code below (which incidentally only leak memory in very old JVMs that used reference counting, which isn&#39;t the case anymore).  But it&#39;s a pretty vague question, so it&#39;s a prime opportunity to show off your understanding of JVM memory management.\r\n```\r\nclass A {\r\n    B bRef;\r\n}\r\n\r\nclass B {\r\n    A aRef;\r\n}\r\n\r\npublic class Main {\r\n    public static void main(String args[]) {\r\n        A myA = new A();\r\n        B myB = new B();\r\n        myA.bRef = myB;\r\n        myB.aRef = myA;\r\n        myA=null;\r\n        myB=null;\r\n        /* at this point, there is no access to the myA and myB objects, */\r\n        /* even though both objects still have active references. */\r\n    } /* main */\r\n}\r\n```\r\nThen you can explain that with reference counting, the above code would leak memory.  But most modern JVMs don&#39;t use reference counting any longer. Most use a sweep garbage collector, which will in fact collect this memory.\r\n\r\nNext, you might explain creating an Object that has an underlying native resource, like this:\r\n```\r\npublic class Main {\r\n    public static void main(String args[]) {\r\n        Socket s = new Socket(InetAddress.getByName(&quot;google.com&quot;),80);\r\n        s=null;\r\n        /* at this point, because you didn&#39;t close the socket properly, */\r\n        /* you have a leak of a native descriptor, which uses memory. */\r\n    }\r\n}\r\n```\r\nThen you can explain this is technically a memory leak, but really the leak is caused by native code in the JVM allocating underlying native resources, which weren&#39;t freed by your Java code.\r\n\r\nAt the end of the day, with a modern JVM, you need to write some Java code that allocates a native resource outside the normal scope of the JVM&#39;s awareness.\r\n","title":"How can I create a memory leak in Java?","body":"<p>The interviewer was probably looking for a circular reference like the code below (which incidentally only leak memory in very old JVMs that used reference counting, which isn't the case anymore).  But it's a pretty vague question, so it's a prime opportunity to show off your understanding of JVM memory management.</p>\n<pre><code>class A {\n    B bRef;\n}\n\nclass B {\n    A aRef;\n}\n\npublic class Main {\n    public static void main(String args[]) {\n        A myA = new A();\n        B myB = new B();\n        myA.bRef = myB;\n        myB.aRef = myA;\n        myA=null;\n        myB=null;\n        /* at this point, there is no access to the myA and myB objects, */\n        /* even though both objects still have active references. */\n    } /* main */\n}\n</code></pre>\n<p>Then you can explain that with reference counting, the above code would leak memory.  But most modern JVMs don't use reference counting any longer. Most use a sweep garbage collector, which will in fact collect this memory.</p>\n<p>Next, you might explain creating an Object that has an underlying native resource, like this:</p>\n<pre><code>public class Main {\n    public static void main(String args[]) {\n        Socket s = new Socket(InetAddress.getByName(&quot;google.com&quot;),80);\n        s=null;\n        /* at this point, because you didn't close the socket properly, */\n        /* you have a leak of a native descriptor, which uses memory. */\n    }\n}\n</code></pre>\n<p>Then you can explain this is technically a memory leak, but really the leak is caused by native code in the JVM allocating underlying native resources, which weren't freed by your Java code.</p>\n<p>At the end of the day, with a modern JVM, you need to write some Java code that allocates a native resource outside the normal scope of the JVM's awareness.</p>\n"},{"comments":[{"owner":{"account_id":6392843,"reputation":1977,"user_id":4958332,"accept_rate":38,"display_name":"Karan Khanna"},"score":12,"creation_date":1524128139,"post_id":47513757,"comment_id":86848885,"body_markdown":"This is not an example of memory leak. You are just trying to consume the whole memory here with your list. Memory leak is when obsolete references cannot be garbage collected.","body":"This is not an example of memory leak. You are just trying to consume the whole memory here with your list. Memory leak is when obsolete references cannot be garbage collected."}],"tags":[],"owner":{"account_id":6023634,"reputation":65,"user_id":4738608,"display_name":"akhambir"},"comment_count":1,"down_vote_count":11,"up_vote_count":4,"is_accepted":false,"score":-7,"last_activity_date":1511794285,"creation_date":1511794285,"answer_id":47513757,"question_id":6470651,"body_markdown":"Just like this!\r\n\r\n    public static void main(String[] args) {\r\n        List&lt;Object&gt; objects = new ArrayList&lt;&gt;();\r\n        while(true) {\r\n            objects.add(new Object());\r\n        }\r\n    }","title":"How can I create a memory leak in Java?","body":"<p>Just like this!</p>\n\n<pre><code>public static void main(String[] args) {\n    List&lt;Object&gt; objects = new ArrayList&lt;&gt;();\n    while(true) {\n        objects.add(new Object());\n    }\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":6392843,"reputation":1977,"user_id":4958332,"accept_rate":38,"display_name":"Karan Khanna"},"score":0,"creation_date":1524129147,"post_id":48641078,"comment_id":86849520,"body_markdown":"I don,t think so. A new String is created and returned. Here is a code snippet from open-jdk 6 for subString function return ((beginIndex == 0) &amp;&amp; (endIndex == count)) ? this : new String(offset + beginIndex, endIndex - beginIndex, value);","body":"I don,t think so. A new String is created and returned. Here is a code snippet from open-jdk 6 for subString function return ((beginIndex == 0) &amp;&amp; (endIndex == count)) ? this : new String(offset + beginIndex, endIndex - beginIndex, value);"},{"owner":{"account_id":5355951,"reputation":15,"user_id":4268603,"display_name":"Praveen Kumar"},"score":1,"creation_date":1524130056,"post_id":48641078,"comment_id":86850189,"body_markdown":"correct new string object is getting created but if you see it is passing value which is char array of original string and newly created string keeps the reference of complete char array. you can just compare the implementation from java 6 to 8, java 7 and 8 uses Arrays.copyOfRange(value, offset, offset+count) to return actual substring","body":"correct new string object is getting created but if you see it is passing value which is char array of original string and newly created string keeps the reference of complete char array. you can just compare the implementation from java 6 to 8, java 7 and 8 uses Arrays.copyOfRange(value, offset, offset+count) to return actual substring"},{"owner":{"account_id":6392843,"reputation":1977,"user_id":4958332,"accept_rate":38,"display_name":"Karan Khanna"},"score":0,"creation_date":1524130704,"post_id":48641078,"comment_id":86850693,"body_markdown":"Got it. Thanks.","body":"Got it. Thanks."},{"owner":{"account_id":24885,"reputation":30828,"user_id":63550,"accept_rate":78,"display_name":"Peter Mortensen"},"score":0,"creation_date":1620857197,"post_id":48641078,"comment_id":119328868,"body_markdown":"What do you mean by &quot;real-time&quot;?","body":"What do you mean by &quot;real-time&quot;?"}],"tags":[],"owner":{"account_id":5355951,"reputation":15,"user_id":4268603,"display_name":"Praveen Kumar"},"comment_count":4,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1665395850,"creation_date":1517913829,"answer_id":48641078,"question_id":6470651,"body_markdown":"A real-time example of a memory leak before JDK 1.7:\r\n\r\nSuppose you read a file of 1000 lines of text and keep them in String objects:\r\n```\r\nString fileText = 1000 characters from file\r\nfileText = fileText.subString(900, fileText.length());\r\n```\r\nIn the above code, I initially read 1000 characters and then did substring to get only the 100 last characters. Now `fileText` should only refer to 100 characters and all other characters should get garbage collected as I lost the reference, but before JDK 1.7 the substring function indirectly referred to the original string of the last 100 characters and prevents the whole string from garbage collection and the whole 1000 characters will be there in memory until you lose reference of the substring.\r\n\r\nYou can create a memory leak example like the above.","title":"How can I create a memory leak in Java?","body":"<p>A real-time example of a memory leak before JDK 1.7:</p>\n<p>Suppose you read a file of 1000 lines of text and keep them in String objects:</p>\n<pre><code>String fileText = 1000 characters from file\nfileText = fileText.subString(900, fileText.length());\n</code></pre>\n<p>In the above code, I initially read 1000 characters and then did substring to get only the 100 last characters. Now <code>fileText</code> should only refer to 100 characters and all other characters should get garbage collected as I lost the reference, but before JDK 1.7 the substring function indirectly referred to the original string of the last 100 characters and prevents the whole string from garbage collection and the whole 1000 characters will be there in memory until you lose reference of the substring.</p>\n<p>You can create a memory leak example like the above.</p>\n"},{"tags":[],"owner":{"account_id":3883061,"reputation":3764,"user_id":8524301,"accept_rate":89,"display_name":"payloc91"},"comment_count":0,"down_vote_count":0,"up_vote_count":14,"is_accepted":false,"score":14,"last_activity_date":1529306910,"creation_date":1524745313,"answer_id":50042877,"question_id":6470651,"body_markdown":"Another way to create potentially huge memory leaks is to hold references to `Map.Entry&lt;K,V&gt;` of a `TreeMap`.\r\n\r\nIt is hard to asses why this applies only to `TreeMap`s, but by looking at the implementation the reason might be that: a `TreeMap.Entry` stores references to its siblings, therefore if a `TreeMap` is ready to be collected, but some other class holds a reference to any of its `Map.Entry`, then the **entire** Map will be retained into memory.\r\n\r\n\r\n----------\r\n\r\n\r\n**Real-life scenario:**\r\n\r\nImagine having a db query that returns a big `TreeMap` data structure. People usually use `TreeMap`s as the element insertion order is retained.\r\n\r\n    public static Map&lt;String, Integer&gt; pseudoQueryDatabase();\r\n\r\nIf the query was called lots of times and, for each query (so, for each `Map` returned) you save an `Entry` somewhere, the memory would constantly keep growing.\r\n\r\nConsider the following wrapper class:\r\n\r\n    class EntryHolder {\r\n        Map.Entry&lt;String, Integer&gt; entry;\r\n\r\n        EntryHolder(Map.Entry&lt;String, Integer&gt; entry) {\r\n            this.entry = entry;\r\n        }\r\n    }\r\n\r\n\r\nApplication:\r\n\r\n    public class LeakTest {\r\n\r\n        private final List&lt;EntryHolder&gt; holdersCache = new ArrayList&lt;&gt;();\r\n        private static final int MAP_SIZE = 100_000;\r\n\r\n        public void run() {\r\n            // create 500 entries each holding a reference to an Entry of a TreeMap\r\n            IntStream.range(0, 500).forEach(value -&gt; {\r\n                // create map\r\n                final Map&lt;String, Integer&gt; map = pseudoQueryDatabase();\r\n\r\n                final int index = new Random().nextInt(MAP_SIZE);\r\n\r\n                // get random entry from map\r\n                for (Map.Entry&lt;String, Integer&gt; entry : map.entrySet()) {\r\n                    if (entry.getValue().equals(index)) {\r\n                        holdersCache.add(new EntryHolder(entry));\r\n                        break;\r\n                    }\r\n                }\r\n                // to observe behavior in visualvm\r\n                try {\r\n                    Thread.sleep(500);\r\n                } catch (InterruptedException e) {\r\n                    e.printStackTrace();\r\n                }\r\n            });\r\n\r\n        }\r\n\r\n        public static Map&lt;String, Integer&gt; pseudoQueryDatabase() {\r\n            final Map&lt;String, Integer&gt; map = new TreeMap&lt;&gt;();\r\n            IntStream.range(0, MAP_SIZE).forEach(i -&gt; map.put(String.valueOf(i), i));\r\n            return map;\r\n        }\r\n\r\n        public static void main(String[] args) throws Exception {\r\n            new LeakTest().run();\r\n        }\r\n    }\r\n\r\n\r\nAfter each `pseudoQueryDatabase()` call, the `map` instances should be ready for collection, but it won&#39;t happen, as at least one `Entry` is stored somewhere else.\r\n\r\nDepending on your `jvm` settings, the application may crash in the early stage due to a `OutOfMemoryError`.\r\n\r\nYou can see from this `visualvm` graph how the memory keeps growing.\r\n\r\n[![Memory dump - TreeMap][1]][1]\r\n\r\n\r\n\r\nThe same does not happen with a hashed data-structure (`HashMap`).\r\n\r\nThis is the graph when using a `HashMap`.\r\n\r\n[![Memory dump - HashMap][2]][2]\r\n\r\n\r\n\r\n**The solution?** Just directly save the key / value (as you probably already do) rather than saving the `Map.Entry`.\r\n\r\n----------\r\n\r\n\r\nI have written a more extensive benchmark [here][3].\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/Byiwn.png\r\n  [2]: https://i.stack.imgur.com/Yr3eC.png\r\n  [3]: https://stackoverflow.com/a/49430255/8524301","title":"How can I create a memory leak in Java?","body":"<p>Another way to create potentially huge memory leaks is to hold references to <code>Map.Entry&lt;K,V&gt;</code> of a <code>TreeMap</code>.</p>\n\n<p>It is hard to asses why this applies only to <code>TreeMap</code>s, but by looking at the implementation the reason might be that: a <code>TreeMap.Entry</code> stores references to its siblings, therefore if a <code>TreeMap</code> is ready to be collected, but some other class holds a reference to any of its <code>Map.Entry</code>, then the <strong>entire</strong> Map will be retained into memory.</p>\n\n<hr>\n\n<p><strong>Real-life scenario:</strong></p>\n\n<p>Imagine having a db query that returns a big <code>TreeMap</code> data structure. People usually use <code>TreeMap</code>s as the element insertion order is retained.</p>\n\n<pre><code>public static Map&lt;String, Integer&gt; pseudoQueryDatabase();\n</code></pre>\n\n<p>If the query was called lots of times and, for each query (so, for each <code>Map</code> returned) you save an <code>Entry</code> somewhere, the memory would constantly keep growing.</p>\n\n<p>Consider the following wrapper class:</p>\n\n<pre><code>class EntryHolder {\n    Map.Entry&lt;String, Integer&gt; entry;\n\n    EntryHolder(Map.Entry&lt;String, Integer&gt; entry) {\n        this.entry = entry;\n    }\n}\n</code></pre>\n\n<p>Application:</p>\n\n<pre><code>public class LeakTest {\n\n    private final List&lt;EntryHolder&gt; holdersCache = new ArrayList&lt;&gt;();\n    private static final int MAP_SIZE = 100_000;\n\n    public void run() {\n        // create 500 entries each holding a reference to an Entry of a TreeMap\n        IntStream.range(0, 500).forEach(value -&gt; {\n            // create map\n            final Map&lt;String, Integer&gt; map = pseudoQueryDatabase();\n\n            final int index = new Random().nextInt(MAP_SIZE);\n\n            // get random entry from map\n            for (Map.Entry&lt;String, Integer&gt; entry : map.entrySet()) {\n                if (entry.getValue().equals(index)) {\n                    holdersCache.add(new EntryHolder(entry));\n                    break;\n                }\n            }\n            // to observe behavior in visualvm\n            try {\n                Thread.sleep(500);\n            } catch (InterruptedException e) {\n                e.printStackTrace();\n            }\n        });\n\n    }\n\n    public static Map&lt;String, Integer&gt; pseudoQueryDatabase() {\n        final Map&lt;String, Integer&gt; map = new TreeMap&lt;&gt;();\n        IntStream.range(0, MAP_SIZE).forEach(i -&gt; map.put(String.valueOf(i), i));\n        return map;\n    }\n\n    public static void main(String[] args) throws Exception {\n        new LeakTest().run();\n    }\n}\n</code></pre>\n\n<p>After each <code>pseudoQueryDatabase()</code> call, the <code>map</code> instances should be ready for collection, but it won't happen, as at least one <code>Entry</code> is stored somewhere else.</p>\n\n<p>Depending on your <code>jvm</code> settings, the application may crash in the early stage due to a <code>OutOfMemoryError</code>.</p>\n\n<p>You can see from this <code>visualvm</code> graph how the memory keeps growing.</p>\n\n<p><a href=\"https://i.stack.imgur.com/Byiwn.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/Byiwn.png\" alt=\"Memory dump - TreeMap\"></a></p>\n\n<p>The same does not happen with a hashed data-structure (<code>HashMap</code>).</p>\n\n<p>This is the graph when using a <code>HashMap</code>.</p>\n\n<p><a href=\"https://i.stack.imgur.com/Yr3eC.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/Yr3eC.png\" alt=\"Memory dump - HashMap\"></a></p>\n\n<p><strong>The solution?</strong> Just directly save the key / value (as you probably already do) rather than saving the <code>Map.Entry</code>.</p>\n\n<hr>\n\n<p>I have written a more extensive benchmark <a href=\"https://stackoverflow.com/a/49430255/8524301\">here</a>.</p>\n"},{"tags":[],"owner":{"account_id":261278,"reputation":2329,"user_id":545353,"display_name":"Pavel Molchanov"},"comment_count":0,"down_vote_count":0,"up_vote_count":10,"is_accepted":false,"score":10,"last_activity_date":1620857441,"creation_date":1529614032,"answer_id":50977188,"question_id":6470651,"body_markdown":"I want to give advice on how to monitor an application for the memory leaks with the tools that are available in the JVM. It doesn&#39;t show how to generate the memory leak, but explains how to detect it with the minimum tools available.\r\n\r\nYou need to monitor Java memory consumption first.\r\n\r\nThe simplest way to do this is to use the *jstat* utility that comes with JVM:\r\n\r\n    jstat -gcutil &lt;process_id&gt; &lt;timeout&gt;\r\n\r\nIt will report memory consumption for each generation (*young*, *eldery* and *old*) and garbage collection times (*young* and *full*).\r\n\r\nAs soon as you spot that a *full garbage collection* is executed too often and takes too much time, you can assume that application is leaking memory.\r\n\r\nThen you need to create a memory dump using the *jmap* utility:\r\n\r\n    jmap -dump:live,format=b,file=heap.bin &lt;process_id&gt;\r\n\r\nThen you need to analyse the heap.bin file with a *memory analyser*, *Eclipse Memory Analyzer* (MAT) for example.\r\n\r\nMAT will analyze the memory and provide you suspect information about memory leaks.\r\n\r\n\r\n\r\n","title":"How can I create a memory leak in Java?","body":"<p>I want to give advice on how to monitor an application for the memory leaks with the tools that are available in the JVM. It doesn't show how to generate the memory leak, but explains how to detect it with the minimum tools available.</p>\n<p>You need to monitor Java memory consumption first.</p>\n<p>The simplest way to do this is to use the <em>jstat</em> utility that comes with JVM:</p>\n<pre><code>jstat -gcutil &lt;process_id&gt; &lt;timeout&gt;\n</code></pre>\n<p>It will report memory consumption for each generation (<em>young</em>, <em>eldery</em> and <em>old</em>) and garbage collection times (<em>young</em> and <em>full</em>).</p>\n<p>As soon as you spot that a <em>full garbage collection</em> is executed too often and takes too much time, you can assume that application is leaking memory.</p>\n<p>Then you need to create a memory dump using the <em>jmap</em> utility:</p>\n<pre><code>jmap -dump:live,format=b,file=heap.bin &lt;process_id&gt;\n</code></pre>\n<p>Then you need to analyse the heap.bin file with a <em>memory analyser</em>, <em>Eclipse Memory Analyzer</em> (MAT) for example.</p>\n<p>MAT will analyze the memory and provide you suspect information about memory leaks.</p>\n"},{"tags":[],"owner":{"account_id":2739457,"reputation":7470,"user_id":2361308,"accept_rate":71,"display_name":"Hearen"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1620863989,"creation_date":1553757930,"answer_id":55392154,"question_id":6470651,"body_markdown":"&gt; a memory leak is a type of resource leak that occurs when a computer program incorrectly manages memory allocations in such a way that memory which is **no longer needed is not released** =&gt; [Wikipedia definition](https://en.wikipedia.org/wiki/Memory_leak)\r\n\r\n&lt;sub&gt; It&#39;s kind of relatively context-based topic, you can just create one based on your taste as long as the unused references will never be used by clients, but still stay alive.&lt;/sub&gt;\r\n\r\nThe first example should be a custom stack without *nulling* the obsolete references in [Effective Java, item 6][1].\r\n\r\nOf course there are many more as long as you want, but if we just take look at the Java built-in classes, it could be some as\r\n\r\n[`subList()`][2]\r\n\r\nLet&#39;s check some *super silly* code to produce the leak.\r\n\r\n    public class MemoryLeak {\r\n        private static final int HUGE_SIZE = 10_000;\r\n\r\n        public static void main(String... args) {\r\n            letsLeakNow();\r\n        }\r\n\r\n        private static void letsLeakNow() {\r\n            Map&lt;Integer, Object&gt; leakMap = new HashMap&lt;&gt;();\r\n            for (int i = 0; i &lt; HUGE_SIZE; ++i) {\r\n                leakMap.put(i * 2, getListWithRandomNumber());\r\n            }\r\n        }\r\n\r\n\r\n\r\n        private static List&lt;Integer&gt; getListWithRandomNumber() {\r\n            List&lt;Integer&gt; originalHugeIntList = new ArrayList&lt;&gt;();\r\n            for (int i = 0; i &lt; HUGE_SIZE; ++i) {\r\n                originalHugeIntList.add(new Random().nextInt());\r\n            }\r\n            return originalHugeIntList.subList(0, 1);\r\n        }\r\n    }\r\n\r\nActually there is another trick we can cause memory leak using [HashMap][3] by taking advantage of its looking process. There are actually two types:\r\n\r\n- `hashCode()` is always the same but `equals()` are different;\r\n- use *random* `hashCode()` and `equals()` always true;\r\n\r\nWhy?\r\n\r\n[**`hashCode()` -&gt; bucket =&gt; `equals()` to locate the pair**][4]\r\n\r\n----\r\n\r\nI was about to mention [`substring()`][5] first and then `subList()` but it seems this issue is already fixed as its source presents in JDK 8.\r\n\r\n    public String substring(int beginIndex, int endIndex) {\r\n        if (beginIndex &lt; 0) {\r\n            throw new StringIndexOutOfBoundsException(beginIndex);\r\n        }\r\n        if (endIndex &gt; value.length) {\r\n            throw new StringIndexOutOfBoundsException(endIndex);\r\n        }\r\n        int subLen = endIndex - beginIndex;\r\n        if (subLen &lt; 0) {\r\n            throw new StringIndexOutOfBoundsException(subLen);\r\n        }\r\n        return ((beginIndex == 0) &amp;&amp; (endIndex == value.length)) ? this\r\n                : new String(value, beginIndex, subLen);\r\n    }\r\n\r\n  [1]: https://www.codeproject.com/Articles/30593/Effective-Java#pre30076\r\n  [2]: https://docs.oracle.com/javase/8/docs/api/java/util/List.html#subList-int-int-\r\n  [3]: https://docs.oracle.com/javase/8/docs/api/java/util/HashMap.html\r\n  [4]: https://stackoverflow.com/a/6493946/2361308\r\n  [5]: https://docs.oracle.com/javase/8/docs/api/java/lang/String.html#substring-int-int-\r\n\r\n\r\n\r\n","title":"How can I create a memory leak in Java?","body":"<blockquote>\n<p>a memory leak is a type of resource leak that occurs when a computer program incorrectly manages memory allocations in such a way that memory which is <strong>no longer needed is not released</strong> =&gt; <a href=\"https://en.wikipedia.org/wiki/Memory_leak\" rel=\"nofollow noreferrer\">Wikipedia definition</a></p>\n</blockquote>\n<p><sub> It's kind of relatively context-based topic, you can just create one based on your taste as long as the unused references will never be used by clients, but still stay alive.</sub></p>\n<p>The first example should be a custom stack without <em>nulling</em> the obsolete references in <a href=\"https://www.codeproject.com/Articles/30593/Effective-Java#pre30076\" rel=\"nofollow noreferrer\">Effective Java, item 6</a>.</p>\n<p>Of course there are many more as long as you want, but if we just take look at the Java built-in classes, it could be some as</p>\n<p><a href=\"https://docs.oracle.com/javase/8/docs/api/java/util/List.html#subList-int-int-\" rel=\"nofollow noreferrer\"><code>subList()</code></a></p>\n<p>Let's check some <em>super silly</em> code to produce the leak.</p>\n<pre><code>public class MemoryLeak {\n    private static final int HUGE_SIZE = 10_000;\n\n    public static void main(String... args) {\n        letsLeakNow();\n    }\n\n    private static void letsLeakNow() {\n        Map&lt;Integer, Object&gt; leakMap = new HashMap&lt;&gt;();\n        for (int i = 0; i &lt; HUGE_SIZE; ++i) {\n            leakMap.put(i * 2, getListWithRandomNumber());\n        }\n    }\n\n\n\n    private static List&lt;Integer&gt; getListWithRandomNumber() {\n        List&lt;Integer&gt; originalHugeIntList = new ArrayList&lt;&gt;();\n        for (int i = 0; i &lt; HUGE_SIZE; ++i) {\n            originalHugeIntList.add(new Random().nextInt());\n        }\n        return originalHugeIntList.subList(0, 1);\n    }\n}\n</code></pre>\n<p>Actually there is another trick we can cause memory leak using <a href=\"https://docs.oracle.com/javase/8/docs/api/java/util/HashMap.html\" rel=\"nofollow noreferrer\">HashMap</a> by taking advantage of its looking process. There are actually two types:</p>\n<ul>\n<li><code>hashCode()</code> is always the same but <code>equals()</code> are different;</li>\n<li>use <em>random</em> <code>hashCode()</code> and <code>equals()</code> always true;</li>\n</ul>\n<p>Why?</p>\n<p><a href=\"https://stackoverflow.com/a/6493946/2361308\"><strong><code>hashCode()</code> -&gt; bucket =&gt; <code>equals()</code> to locate the pair</strong></a></p>\n<hr />\n<p>I was about to mention <a href=\"https://docs.oracle.com/javase/8/docs/api/java/lang/String.html#substring-int-int-\" rel=\"nofollow noreferrer\"><code>substring()</code></a> first and then <code>subList()</code> but it seems this issue is already fixed as its source presents in JDK 8.</p>\n<pre><code>public String substring(int beginIndex, int endIndex) {\n    if (beginIndex &lt; 0) {\n        throw new StringIndexOutOfBoundsException(beginIndex);\n    }\n    if (endIndex &gt; value.length) {\n        throw new StringIndexOutOfBoundsException(endIndex);\n    }\n    int subLen = endIndex - beginIndex;\n    if (subLen &lt; 0) {\n        throw new StringIndexOutOfBoundsException(subLen);\n    }\n    return ((beginIndex == 0) &amp;&amp; (endIndex == value.length)) ? this\n            : new String(value, beginIndex, subLen);\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":10273010,"reputation":5363,"user_id":7580839,"accept_rate":75,"display_name":"Amir Fo"},"comment_count":0,"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1620864060,"creation_date":1568820272,"answer_id":57996188,"question_id":6470651,"body_markdown":"One of the Java memory leakings examples is [MySQLs memory leaking bug][1] resulting when ResultSets close method is forgotten to be called. For example:\r\n\r\n    while(true) {\r\n        ResultSet rs = database.select(query);\r\n        ...\r\n        // going to next step of loop and leaving resultset without calling rs.close();\r\n    }\r\n\r\n\r\n  [1]: https://bugs.mysql.com/bug.php?id=5022\r\n\r\n\r\n","title":"How can I create a memory leak in Java?","body":"<p>One of the Java memory leakings examples is <a href=\"https://bugs.mysql.com/bug.php?id=5022\" rel=\"nofollow noreferrer\">MySQLs memory leaking bug</a> resulting when ResultSets close method is forgotten to be called. For example:</p>\n<pre><code>while(true) {\n    ResultSet rs = database.select(query);\n    ...\n    // going to next step of loop and leaving resultset without calling rs.close();\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":24885,"reputation":30828,"user_id":63550,"accept_rate":78,"display_name":"Peter Mortensen"},"score":0,"creation_date":1620864096,"post_id":61583798,"comment_id":119330353,"body_markdown":"An explanation would be in order. E.g., what is the gist/idea? How is it different from previous answers?","body":"An explanation would be in order. E.g., what is the gist/idea? How is it different from previous answers?"}],"tags":[],"owner":{"account_id":16224013,"reputation":1568,"user_id":11714860,"display_name":"Sapphire_Brick"},"comment_count":1,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1614293568,"creation_date":1588555342,"answer_id":61583798,"question_id":6470651,"body_markdown":"```Java\r\n\r\nimport sun.misc.Unsafe;\r\nimport java.lang.reflect.Field;\r\n\r\npublic class Main {\r\n    public static void main(String args[]) {\r\n        try {\r\n            Field f = Unsafe.class.getDeclaredField(&quot;theUnsafe&quot;);\r\n            f.setAccessible(true);\r\n            ((Unsafe) f.get(null)).allocateMemory(2000000000);\r\n        } catch (Exception e) {\r\n            e.printStackTrace();\r\n        }\r\n    }\r\n}\r\n```","title":"How can I create a memory leak in Java?","body":"<pre><code>\nimport sun.misc.Unsafe;\nimport java.lang.reflect.Field;\n\npublic class Main {\n    public static void main(String args[]) {\n        try {\n            Field f = Unsafe.class.getDeclaredField(&quot;theUnsafe&quot;);\n            f.setAccessible(true);\n            ((Unsafe) f.get(null)).allocateMemory(2000000000);\n        } catch (Exception e) {\n            e.printStackTrace();\n        }\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":15004766,"reputation":1323,"user_id":10831193,"display_name":"Jessie Lesbian"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1589621250,"creation_date":1589621250,"answer_id":61834624,"question_id":6470651,"body_markdown":"Create a JNI function containing just a while-true loop and call it with a large object from another thread. The GC doesn&#39;t like JNI very much and is going to keep the object in memory forever.","title":"How can I create a memory leak in Java?","body":"<p>Create a JNI function containing just a while-true loop and call it with a large object from another thread. The GC doesn't like JNI very much and is going to keep the object in memory forever.</p>\n"},{"tags":[],"owner":{"account_id":17722379,"reputation":2112,"user_id":12867091,"display_name":"Tashkhisi"},"comment_count":0,"down_vote_count":0,"up_vote_count":15,"is_accepted":false,"score":15,"last_activity_date":1663164356,"creation_date":1598637860,"answer_id":63638868,"question_id":6470651,"body_markdown":"There are many good examples of memory leaks in Java, and I will mention two of them in this answer.\r\n\r\n**Example 1:**\r\n\r\nHere is a good example of a memory leak from the book *Effective Java, Third Edition* (item 7: Eliminate obsolete object references):\r\n```\r\n// Can you spot the &quot;memory leak&quot;?\r\npublic class Stack {\r\n    private static final int DEFAULT_INITIAL_CAPACITY = 16;\r\n    private Object[] elements;\r\n    private int size = 0;\r\n\r\n    public Stack() {\r\n        elements = new Object[DEFAULT_INITIAL_CAPACITY];\r\n    }\r\n\r\n    public void push(Object e) {\r\n        ensureCapacity();\r\n        elements[size++] = e;\r\n    }\r\n\r\n    public Object pop() {\r\n        if (size == 0) throw new EmptyStackException();\r\n        return elements[--size];\r\n    }\r\n\r\n    /*** Ensure space for at least one more element, roughly* doubling the capacity each time the array needs to grow.*/\r\n    private void ensureCapacity() {\r\n        if (elements.length == size) elements = Arrays.copyOf(elements, 2 * size + 1);\r\n    }\r\n}\r\n```\r\nThis is the paragraph of the book that describes why this implementation will cause a memory leak:\r\n\r\n&gt; If a stack grows and then shrinks, the objects that were popped off the\r\n&gt; stack will not be garbage collected, even if the program using  the\r\n&gt; stack  has  no  more  references  to  them.  This  is  because  the\r\n&gt; stack  maintains obsolete references to these objects. An obsolete\r\n&gt; reference is simply a reference that will never be dereferenced\r\n&gt; again. In this case, any references outside of the “active portion” of\r\n&gt; the element array are obsolete. The active portion consists of the\r\n&gt; elements whose index is less than size\r\n\r\nHere is the solution of the book to tackle this memory leak:\r\n\r\n&gt; The  fix  for  this  sort  of  problem  is  simple:  null  out\r\n&gt; references  once  they become obsolete. In the case of our Stack class,\r\n&gt; the reference to an item becomes obsolete  as  soon  as  it’s  popped\r\n&gt; off  the  stack. The  corrected  version  of  the  pop method looks like this:\r\n```\r\npublic Object pop() {\r\n    if (size == 0) throw new EmptyStackException();\r\n    Object result = elements[--size];\r\n    elements[size] = null; // Eliminate obsolete reference\r\n    return result;\r\n}\r\n```\r\nBut how can we prevent a memory leak from happening? This is a good caveat from the book:\r\n\r\n&gt; Generally  speaking,  whenever  a  class  manages  its  own  memory,\r\n&gt; the  programmer should be alert for memory leaks. Whenever an element\r\n&gt; is freed, any object references contained in the element should be\r\n&gt; nulled out.\r\n\r\n**Example 2:**\r\n\r\nThe [observer pattern][1] also can cause a memory leak. You can read about this pattern in the following link: [Observer pattern][1].\r\n\r\nThis is one implementation of the Observer pattern:\r\n```\r\nclass EventSource {\r\n    public interface Observer {\r\n        void update(String event);\r\n    }\r\n\r\n    private final List&lt;Observer&gt; observers = new ArrayList&lt;&gt;();\r\n\r\n    private void notifyObservers(String event) {\r\n        observers.forEach(observer -&gt; observer.update(event)); //alternative lambda expression: observers.forEach(Observer::update);\r\n    }\r\n\r\n    public void addObserver(Observer observer) {\r\n        observers.add(observer);\r\n    }\r\n\r\n    public void scanSystemIn() {\r\n        Scanner scanner = new Scanner(System.in);\r\n        while (scanner.hasNextLine()) {\r\n            String line = scanner.nextLine();\r\n            notifyObservers(line);\r\n        }\r\n    }\r\n}\r\n```\r\nIn this implementation, `EventSource`, which is Observable in the Observer design pattern, can hold links to `Observer` objects, but this link is never removed from the `observers` field in `EventSource`. So they will never be collected by the garbage collector. One solution to tackle this problem is providing another method to the client for removing the aforementioned observers from the `observers` field when they don&#39;t need those observers anymore:\r\n```\r\npublic void removeObserver(Observer observer) {\r\n    observers.remove(observer);\r\n}\r\n```\r\n  [1]: https://en.wikipedia.org/wiki/Observer_pattern","title":"How can I create a memory leak in Java?","body":"<p>There are many good examples of memory leaks in Java, and I will mention two of them in this answer.</p>\n<p><strong>Example 1:</strong></p>\n<p>Here is a good example of a memory leak from the book <em>Effective Java, Third Edition</em> (item 7: Eliminate obsolete object references):</p>\n<pre><code>// Can you spot the &quot;memory leak&quot;?\npublic class Stack {\n    private static final int DEFAULT_INITIAL_CAPACITY = 16;\n    private Object[] elements;\n    private int size = 0;\n\n    public Stack() {\n        elements = new Object[DEFAULT_INITIAL_CAPACITY];\n    }\n\n    public void push(Object e) {\n        ensureCapacity();\n        elements[size++] = e;\n    }\n\n    public Object pop() {\n        if (size == 0) throw new EmptyStackException();\n        return elements[--size];\n    }\n\n    /*** Ensure space for at least one more element, roughly* doubling the capacity each time the array needs to grow.*/\n    private void ensureCapacity() {\n        if (elements.length == size) elements = Arrays.copyOf(elements, 2 * size + 1);\n    }\n}\n</code></pre>\n<p>This is the paragraph of the book that describes why this implementation will cause a memory leak:</p>\n<blockquote>\n<p>If a stack grows and then shrinks, the objects that were popped off the\nstack will not be garbage collected, even if the program using  the\nstack  has  no  more  references  to  them.  This  is  because  the\nstack  maintains obsolete references to these objects. An obsolete\nreference is simply a reference that will never be dereferenced\nagain. In this case, any references outside of the “active portion” of\nthe element array are obsolete. The active portion consists of the\nelements whose index is less than size</p>\n</blockquote>\n<p>Here is the solution of the book to tackle this memory leak:</p>\n<blockquote>\n<p>The  fix  for  this  sort  of  problem  is  simple:  null  out\nreferences  once  they become obsolete. In the case of our Stack class,\nthe reference to an item becomes obsolete  as  soon  as  it’s  popped\noff  the  stack. The  corrected  version  of  the  pop method looks like this:</p>\n</blockquote>\n<pre><code>public Object pop() {\n    if (size == 0) throw new EmptyStackException();\n    Object result = elements[--size];\n    elements[size] = null; // Eliminate obsolete reference\n    return result;\n}\n</code></pre>\n<p>But how can we prevent a memory leak from happening? This is a good caveat from the book:</p>\n<blockquote>\n<p>Generally  speaking,  whenever  a  class  manages  its  own  memory,\nthe  programmer should be alert for memory leaks. Whenever an element\nis freed, any object references contained in the element should be\nnulled out.</p>\n</blockquote>\n<p><strong>Example 2:</strong></p>\n<p>The <a href=\"https://en.wikipedia.org/wiki/Observer_pattern\" rel=\"nofollow noreferrer\">observer pattern</a> also can cause a memory leak. You can read about this pattern in the following link: <a href=\"https://en.wikipedia.org/wiki/Observer_pattern\" rel=\"nofollow noreferrer\">Observer pattern</a>.</p>\n<p>This is one implementation of the Observer pattern:</p>\n<pre><code>class EventSource {\n    public interface Observer {\n        void update(String event);\n    }\n\n    private final List&lt;Observer&gt; observers = new ArrayList&lt;&gt;();\n\n    private void notifyObservers(String event) {\n        observers.forEach(observer -&gt; observer.update(event)); //alternative lambda expression: observers.forEach(Observer::update);\n    }\n\n    public void addObserver(Observer observer) {\n        observers.add(observer);\n    }\n\n    public void scanSystemIn() {\n        Scanner scanner = new Scanner(System.in);\n        while (scanner.hasNextLine()) {\n            String line = scanner.nextLine();\n            notifyObservers(line);\n        }\n    }\n}\n</code></pre>\n<p>In this implementation, <code>EventSource</code>, which is Observable in the Observer design pattern, can hold links to <code>Observer</code> objects, but this link is never removed from the <code>observers</code> field in <code>EventSource</code>. So they will never be collected by the garbage collector. One solution to tackle this problem is providing another method to the client for removing the aforementioned observers from the <code>observers</code> field when they don't need those observers anymore:</p>\n<pre><code>public void removeObserver(Observer observer) {\n    observers.remove(observer);\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":406368,"reputation":61,"user_id":775838,"display_name":"Hoang TO"},"comment_count":0,"down_vote_count":2,"up_vote_count":0,"is_accepted":false,"score":-2,"last_activity_date":1625553886,"creation_date":1625553886,"answer_id":68265741,"question_id":6470651,"body_markdown":"A little improvement to previous answers (to generate memory leak faster) is to use instances of DOM Document loaded from big XML files.","title":"How can I create a memory leak in Java?","body":"<p>A little improvement to previous answers (to generate memory leak faster) is to use instances of DOM Document loaded from big XML files.</p>\n"},{"comments":[{"owner":{"account_id":935202,"reputation":49046,"user_id":964243,"accept_rate":66,"display_name":"Boann"},"score":0,"creation_date":1671874067,"post_id":70532541,"comment_id":132190794,"body_markdown":"Not a memory leak. The entire stack of objects is still collectible.","body":"Not a memory leak. The entire stack of objects is still collectible."}],"tags":[],"owner":{"account_id":3014209,"reputation":1479,"user_id":2556867,"accept_rate":44,"display_name":"degr"},"comment_count":1,"down_vote_count":2,"up_vote_count":2,"is_accepted":false,"score":0,"last_activity_date":1663163918,"creation_date":1640872159,"answer_id":70532541,"question_id":6470651,"body_markdown":"It&#39;s pretty easy:\r\n```\r\nObject[] o = new Object[]{};\r\nwhile(true) {\r\n    o = new Object[]{o};\r\n}\r\n```\r\n","title":"How can I create a memory leak in Java?","body":"<p>It's pretty easy:</p>\n<pre><code>Object[] o = new Object[]{};\nwhile(true) {\n    o = new Object[]{o};\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":23649881,"reputation":141,"user_id":17678908,"display_name":"TheWaterWave222"},"comment_count":0,"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1651019876,"creation_date":1651019876,"answer_id":72022022,"question_id":6470651,"body_markdown":"You can try making many buffered readers try to open the same file at once with a ```while``` loop with a condition that is never false. And the cherry on top is these are never closed.","title":"How can I create a memory leak in Java?","body":"<p>You can try making many buffered readers try to open the same file at once with a <code>while</code> loop with a condition that is never false. And the cherry on top is these are never closed.</p>\n"},{"tags":[],"owner":{"account_id":935202,"reputation":49046,"user_id":964243,"accept_rate":66,"display_name":"Boann"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1671875989,"creation_date":1671873939,"answer_id":74906695,"question_id":6470651,"body_markdown":"I experienced a very real memory leak with [`javax.swing.JPopupMenu`](https://docs.oracle.com/javase/8/docs/api/javax/swing/JPopupMenu.html).\r\n\r\nI have a GUI application which displays multiple tabbed documents. After closing a document, it lingered in memory if a right-click context menu had been used on any component on the tab. The menus were shared among tabs, and it turns out that after you call [`popupMenu.show(Component invoker, int x, int y)`](https://docs.oracle.com/javase/8/docs/api/javax/swing/JPopupMenu.html#show-java.awt.Component-int-int-), the component quietly persists as the menu&#39;s &quot;invoker&quot; until it is next changed, or cleared by `setInvoker(null)`. Indirectly, the invoker reference was persisting the entire document and everything associated with it.\r\n\r\nIt&#39;s worth noting that a menu can only hold one reference to an old component this way, so this memory leak cannot grow without bound.","title":"How can I create a memory leak in Java?","body":"<p>I experienced a very real memory leak with <a href=\"https://docs.oracle.com/javase/8/docs/api/javax/swing/JPopupMenu.html\" rel=\"nofollow noreferrer\"><code>javax.swing.JPopupMenu</code></a>.</p>\n<p>I have a GUI application which displays multiple tabbed documents. After closing a document, it lingered in memory if a right-click context menu had been used on any component on the tab. The menus were shared among tabs, and it turns out that after you call <a href=\"https://docs.oracle.com/javase/8/docs/api/javax/swing/JPopupMenu.html#show-java.awt.Component-int-int-\" rel=\"nofollow noreferrer\"><code>popupMenu.show(Component invoker, int x, int y)</code></a>, the component quietly persists as the menu's &quot;invoker&quot; until it is next changed, or cleared by <code>setInvoker(null)</code>. Indirectly, the invoker reference was persisting the entire document and everything associated with it.</p>\n<p>It's worth noting that a menu can only hold one reference to an old component this way, so this memory leak cannot grow without bound.</p>\n"}],"owner":{"account_id":212390,"reputation":26536,"user_id":465179,"accept_rate":99,"display_name":"MatBanik"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":746185,"favorite_count":0,"down_vote_count":12,"up_vote_count":3733,"accepted_answer_id":6471947,"answer_count":61,"score":3721,"last_activity_date":1695199331,"creation_date":1308931912,"question_id":6470651,"body_markdown":"I just had an interview where I was asked to create a ***memory leak*** with Java. \r\n\r\nNeedless to say, I felt pretty dumb, having no idea how to start creating one.\r\n\r\nWhat would an example be?","title":"How can I create a memory leak in Java?","body":"<p>I just had an interview where I was asked to create a <em><strong>memory leak</strong></em> with Java.</p>\n<p>Needless to say, I felt pretty dumb, having no idea how to start creating one.</p>\n<p>What would an example be?</p>\n"},{"tags":["java","elasticsearch","kibana","elastic-stack","elk"],"answers":[{"comments":[{"owner":{"account_id":26466408,"reputation":31,"user_id":20107530,"display_name":"Inderjeet Chawla"},"score":0,"creation_date":1695203768,"post_id":77140700,"comment_id":135991735,"body_markdown":"I am afriad my boss , will like to use this query while searching , for its shear size. and complexity, only if there was another way , in settings etc ? or somewhere , where it returned the date in a format , other than its indexed format . a format which we could set somewhere?","body":"I am afriad my boss , will like to use this query while searching , for its shear size. and complexity, only if there was another way , in settings etc ? or somewhere , where it returned the date in a format , other than its indexed format . a format which we could set somewhere?"},{"owner":{"account_id":5742767,"reputation":9245,"user_id":4534923,"display_name":"Paulo"},"score":0,"creation_date":1695215687,"post_id":77140700,"comment_id":135994450,"body_markdown":"I am not understanding you perfectly. But I understand you are afraid of the overhead the runtime fields have ? I am afraid I can&#39;t think of another way, reindex or runtime fields.","body":"I am not understanding you perfectly. But I understand you are afraid of the overhead the runtime fields have ? I am afraid I can&#39;t think of another way, reindex or runtime fields."},{"owner":{"account_id":26466408,"reputation":31,"user_id":20107530,"display_name":"Inderjeet Chawla"},"score":0,"creation_date":1695222915,"post_id":77140700,"comment_id":135996355,"body_markdown":"So i have come across another thing here , scripted fields. i have created a scripted field which is working fine. and converting the epoch to readable format using pain , and is working fine in discover section of kibaana. but it is not coming in response when i hit get request in kibaana , dev-tools . Any idea here? something i could be missing?","body":"So i have come across another thing here , scripted fields. i have created a scripted field which is working fine. and converting the epoch to readable format using pain , and is working fine in discover section of kibaana. but it is not coming in response when i hit get request in kibaana , dev-tools . Any idea here? something i could be missing?"},{"owner":{"account_id":26466408,"reputation":31,"user_id":20107530,"display_name":"Inderjeet Chawla"},"score":0,"creation_date":1695223004,"post_id":77140700,"comment_id":135996381,"body_markdown":"also i dont mind overhead of run time fields , as i dont believe it to behuge . but downtime in case of reindexing is something i am not sure about . also is it possible to declare run time fields , without having to insert it in search query always ? like you have done above . it would be uncomfortable to always type a script while running search query.","body":"also i dont mind overhead of run time fields , as i dont believe it to behuge . but downtime in case of reindexing is something i am not sure about . also is it possible to declare run time fields , without having to insert it in search query always ? like you have done above . it would be uncomfortable to always type a script while running search query."},{"owner":{"account_id":5742767,"reputation":9245,"user_id":4534923,"display_name":"Paulo"},"score":0,"creation_date":1695282488,"post_id":77140700,"comment_id":136004247,"body_markdown":"I&#39;ll let you dig on runtime fields but you can declare a runtime field at the index level, inside the index settings/mapping. Scripted fields are deprecated so you should move away from those.","body":"I&#39;ll let you dig on runtime fields but you can declare a runtime field at the index level, inside the index settings/mapping. Scripted fields are deprecated so you should move away from those."},{"owner":{"account_id":5742767,"reputation":9245,"user_id":4534923,"display_name":"Paulo"},"score":0,"creation_date":1695282543,"post_id":77140700,"comment_id":136004258,"body_markdown":"https://www.elastic.co/guide/en/elasticsearch/reference/current/runtime-mapping-fields.html","body":"<a href=\"https://www.elastic.co/guide/en/elasticsearch/reference/current/runtime-mapping-fields.html\" rel=\"nofollow noreferrer\">elastic.co/guide/en/elasticsearch/reference/current/&hellip;</a>"}],"tags":[],"owner":{"account_id":5742767,"reputation":9245,"user_id":4534923,"display_name":"Paulo"},"comment_count":6,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695199146,"creation_date":1695199146,"answer_id":77140700,"question_id":77140157,"body_markdown":"# Tldr;\r\n\r\nYou can not change the values in a field without:\r\n\r\n - Update by query\r\n - Re indexing\r\n\r\nBut you could leverage the runtime fields.\r\n\r\n# Solution\r\n## Runtime fields\r\n\r\nWhat are they:\r\n\r\nCreated on-the-fly fields during queries without altering index mapping. They are great for dynamic data transformations and calculations. \r\n\r\nBUT: They&#39;re temporary, and can impact query performance.\r\n\r\nPlease find below an example on how to use it for you use case.\r\n\r\n```json\r\nPUT 77140157\r\n{\r\n  &quot;mappings&quot;: {\r\n    &quot;properties&quot;: {\r\n      &quot;@timestamp&quot;:{\r\n        &quot;type&quot;: &quot;date&quot;\r\n      }\r\n    }\r\n  }\r\n}\r\n\r\nPUT /77140157/_doc/1\r\n{\r\n  &quot;@timestamp&quot;: 1695197861930\r\n}\r\n\r\nGET 77140157/_search\r\n{\r\n  &quot;fields&quot;: [\r\n    &quot;formated_date&quot;\r\n  ], \r\n  &quot;runtime_mappings&quot;: {\r\n    &quot;formated_date&quot;: {\r\n      &quot;type&quot;: &quot;keyword&quot;,\r\n      &quot;script&quot;: {\r\n        &quot;source&quot;: &quot;&quot;&quot;\r\n        ZonedDateTime zonedDateTime = doc[&#39;@timestamp&#39;].value;\r\n          def formatter = DateTimeFormatter.ofPattern(&#39;yyyy-MM-dd HH:mm:ss&#39;).withZone(ZoneOffset.UTC);\r\n        emit(zonedDateTime.format(formatter));\r\n          &quot;&quot;&quot;\r\n      }\r\n    }\r\n  }\r\n}\r\n```\r\n\r\nGiving you\r\n\r\n```json\r\n{\r\n  &quot;took&quot;: 22,\r\n  &quot;timed_out&quot;: false,\r\n  &quot;_shards&quot;: {\r\n    &quot;total&quot;: 1,\r\n    &quot;successful&quot;: 1,\r\n    &quot;skipped&quot;: 0,\r\n    &quot;failed&quot;: 0\r\n  },\r\n  &quot;hits&quot;: {\r\n    &quot;total&quot;: {\r\n      &quot;value&quot;: 1,\r\n      &quot;relation&quot;: &quot;eq&quot;\r\n    },\r\n    &quot;max_score&quot;: 1,\r\n    &quot;hits&quot;: [\r\n      {\r\n        &quot;_index&quot;: &quot;77140157&quot;,\r\n        &quot;_id&quot;: &quot;1&quot;,\r\n        &quot;_score&quot;: 1,\r\n        &quot;_source&quot;: {\r\n          &quot;@timestamp&quot;: 1695197861930\r\n        },\r\n        &quot;fields&quot;: {\r\n          &quot;formated_date&quot;: [\r\n            &quot;2023-09-20 08:17:41&quot;\r\n          ]\r\n        }\r\n      }\r\n    ]\r\n  }\r\n}\r\n```","title":"How to change date field format in elasticsearch in existing indexes as well","body":"<h1>Tldr;</h1>\n<p>You can not change the values in a field without:</p>\n<ul>\n<li>Update by query</li>\n<li>Re indexing</li>\n</ul>\n<p>But you could leverage the runtime fields.</p>\n<h1>Solution</h1>\n<h2>Runtime fields</h2>\n<p>What are they:</p>\n<p>Created on-the-fly fields during queries without altering index mapping. They are great for dynamic data transformations and calculations.</p>\n<p>BUT: They're temporary, and can impact query performance.</p>\n<p>Please find below an example on how to use it for you use case.</p>\n<pre class=\"lang-json prettyprint-override\"><code>PUT 77140157\n{\n  &quot;mappings&quot;: {\n    &quot;properties&quot;: {\n      &quot;@timestamp&quot;:{\n        &quot;type&quot;: &quot;date&quot;\n      }\n    }\n  }\n}\n\nPUT /77140157/_doc/1\n{\n  &quot;@timestamp&quot;: 1695197861930\n}\n\nGET 77140157/_search\n{\n  &quot;fields&quot;: [\n    &quot;formated_date&quot;\n  ], \n  &quot;runtime_mappings&quot;: {\n    &quot;formated_date&quot;: {\n      &quot;type&quot;: &quot;keyword&quot;,\n      &quot;script&quot;: {\n        &quot;source&quot;: &quot;&quot;&quot;\n        ZonedDateTime zonedDateTime = doc['@timestamp'].value;\n          def formatter = DateTimeFormatter.ofPattern('yyyy-MM-dd HH:mm:ss').withZone(ZoneOffset.UTC);\n        emit(zonedDateTime.format(formatter));\n          &quot;&quot;&quot;\n      }\n    }\n  }\n}\n</code></pre>\n<p>Giving you</p>\n<pre class=\"lang-json prettyprint-override\"><code>{\n  &quot;took&quot;: 22,\n  &quot;timed_out&quot;: false,\n  &quot;_shards&quot;: {\n    &quot;total&quot;: 1,\n    &quot;successful&quot;: 1,\n    &quot;skipped&quot;: 0,\n    &quot;failed&quot;: 0\n  },\n  &quot;hits&quot;: {\n    &quot;total&quot;: {\n      &quot;value&quot;: 1,\n      &quot;relation&quot;: &quot;eq&quot;\n    },\n    &quot;max_score&quot;: 1,\n    &quot;hits&quot;: [\n      {\n        &quot;_index&quot;: &quot;77140157&quot;,\n        &quot;_id&quot;: &quot;1&quot;,\n        &quot;_score&quot;: 1,\n        &quot;_source&quot;: {\n          &quot;@timestamp&quot;: 1695197861930\n        },\n        &quot;fields&quot;: {\n          &quot;formated_date&quot;: [\n            &quot;2023-09-20 08:17:41&quot;\n          ]\n        }\n      }\n    ]\n  }\n}\n</code></pre>\n"}],"owner":{"account_id":26466408,"reputation":31,"user_id":20107530,"display_name":"Inderjeet Chawla"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":91,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1695199146,"creation_date":1695194472,"question_id":77140157,"body_markdown":"So I have quite lots of documents/indexes , in elastic search .\r\n\r\n They have a mapping for a date field , and its format is &quot;epoch_millis&quot; . \r\nI have been asked to change its format to some readable format , because when debugging and querying directly on kibaana es. \r\n\r\nThis epoch millis is not readable . so have been asked to use a readable format . \r\nI get it that i can use format &quot;yyyy-MM-dd&quot; something like this , but how to change in existing documents. \r\nFrom what i see i have few options :\r\nI can create new field with readable date format , (but again how to add it to existing indexes )\r\nI can Reindex the document , but again It may involve downtime . \r\n\r\nCan anyone sugggest me the best option to go around here? \r\nAnd for FYI , i dont have just one field , here , i have about 8 date type fields , whose format needs to be changed.\r\n\r\nCan I do something where , while querying on es , i simply get to see the readable format on date fields , so we don&#39;t have to change stuff in mapping at all. ??","title":"How to change date field format in elasticsearch in existing indexes as well","body":"<p>So I have quite lots of documents/indexes , in elastic search .</p>\n<p>They have a mapping for a date field , and its format is &quot;epoch_millis&quot; .\nI have been asked to change its format to some readable format , because when debugging and querying directly on kibaana es.</p>\n<p>This epoch millis is not readable . so have been asked to use a readable format .\nI get it that i can use format &quot;yyyy-MM-dd&quot; something like this , but how to change in existing documents.\nFrom what i see i have few options :\nI can create new field with readable date format , (but again how to add it to existing indexes )\nI can Reindex the document , but again It may involve downtime .</p>\n<p>Can anyone sugggest me the best option to go around here?\nAnd for FYI , i dont have just one field , here , i have about 8 date type fields , whose format needs to be changed.</p>\n<p>Can I do something where , while querying on es , i simply get to see the readable format on date fields , so we don't have to change stuff in mapping at all. ??</p>\n"},{"tags":["java","eclipse","eclipse-marketplace"],"comments":[{"owner":{"account_id":45213,"reputation":26348,"user_id":133203,"accept_rate":97,"display_name":"Federico klez Culloca"},"score":0,"creation_date":1695198734,"post_id":77140613,"comment_id":135990698,"body_markdown":"Are you behind a proxy that intercepts https calls and injects its own certificate?","body":"Are you behind a proxy that intercepts https calls and injects its own certificate?"},{"owner":{"account_id":16419854,"reputation":13,"user_id":11861330,"display_name":"Runtime21"},"score":0,"creation_date":1695200362,"post_id":77140613,"comment_id":135991019,"body_markdown":"No i dont think so.","body":"No i dont think so."},{"owner":{"account_id":8692823,"reputation":31810,"user_id":6505250,"display_name":"howlger"},"score":0,"creation_date":1695204462,"post_id":77140613,"comment_id":135991900,"body_markdown":"Please upgrade, since Eclipse 2022-12 is three releases behind. Your problem might caused by a too old Java with which you run your outdated Eclipse. Better use the current version of Eclipse which is currently 2023-09 with included Java.","body":"Please upgrade, since Eclipse 2022-12 is three releases behind. Your problem might caused by a too old Java with which you run your outdated Eclipse. Better use the current version of Eclipse which is currently 2023-09 with included Java."},{"owner":{"account_id":16419854,"reputation":13,"user_id":11861330,"display_name":"Runtime21"},"score":0,"creation_date":1695289863,"post_id":77140613,"comment_id":136005825,"body_markdown":"I installed the 2023 - 09 version and initially it was working good for me. But it started giving me the same error. I have installed the necessary software from the marketplace but now i get the same error if i open the marketplace again. So i am facing the same problem again. @howlger","body":"I installed the 2023 - 09 version and initially it was working good for me. But it started giving me the same error. I have installed the necessary software from the marketplace but now i get the same error if i open the marketplace again. So i am facing the same problem again. @howlger"},{"owner":{"account_id":8692823,"reputation":31810,"user_id":6505250,"display_name":"howlger"},"score":0,"creation_date":1695290067,"post_id":77140613,"comment_id":136005868,"body_markdown":"Please go to the _Error Log_ view, select the error (do not open it, just select it), hit Ctrl+C and paste it into your question formatted as _Sample Code_.","body":"Please go to the <i>Error Log</i> view, select the error (do not open it, just select it), hit Ctrl+C and paste it into your question formatted as <i>Sample Code</i>."}],"owner":{"account_id":16419854,"reputation":13,"user_id":11861330,"display_name":"Runtime21"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":44,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1695199040,"creation_date":1695198240,"question_id":77140613,"body_markdown":"Eclipse version that i have installed is: \r\nhttps://www.eclipse.org/downloads/packages/release/2022-12/r\r\n\r\nI want to access to the eclipse market place and I am getting the following error: \r\n\r\n[enter image description here](https://i.stack.imgur.com/N09yr.png)\r\n\r\n\r\n\r\n\r\n\r\nI have tried different solutions from the internet. \r\na. Have tried to change the network connections to Manual and selected the following options: \r\n\r\n[enter image description here](https://i.stack.imgur.com/rub1a.png)\r\nas suggested by other users. \r\n\r\nb. I have tried to add this in environment variables: \r\n_JAVA_OPTIONS -Djava.net.preferIPv4Stack=true\r\n\r\nc. I have tried to add the following in the eclipse.ini file:\r\n-Djava.net.preferIPv4Stack=true\r\n\r\nbut still my error is not getting resolved. \r\nPlease help me with the solution to this problem. ","title":"Eclipse Market Place Not Opening","body":"<p>Eclipse version that i have installed is:\n<a href=\"https://www.eclipse.org/downloads/packages/release/2022-12/r\" rel=\"nofollow noreferrer\">https://www.eclipse.org/downloads/packages/release/2022-12/r</a></p>\n<p>I want to access to the eclipse market place and I am getting the following error:</p>\n<p><a href=\"https://i.stack.imgur.com/N09yr.png\" rel=\"nofollow noreferrer\">enter image description here</a></p>\n<p>I have tried different solutions from the internet.\na. Have tried to change the network connections to Manual and selected the following options:</p>\n<p><a href=\"https://i.stack.imgur.com/rub1a.png\" rel=\"nofollow noreferrer\">enter image description here</a>\nas suggested by other users.</p>\n<p>b. I have tried to add this in environment variables:\n_JAVA_OPTIONS -Djava.net.preferIPv4Stack=true</p>\n<p>c. I have tried to add the following in the eclipse.ini file:\n-Djava.net.preferIPv4Stack=true</p>\n<p>but still my error is not getting resolved.\nPlease help me with the solution to this problem.</p>\n"},{"tags":["java","spring","spring-boot","elasticsearch","spring-data-jpa"],"owner":{"account_id":20929807,"reputation":161,"user_id":15376457,"display_name":"gcbox999"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":23,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1695198692,"creation_date":1695198692,"question_id":77140655,"body_markdown":"I have a problem with my Spring-Boot 3.1.1 application + spring-boot-starter-data-elasticsearch version 3.1.1.\r\n\r\nThe index of my cluster is configured as follows:\r\n\r\n    {\r\n        &quot;mappings&quot;: {\r\n            &quot;properties&quot;: {\r\n                &quot;id&quot;: {\r\n                    &quot;type&quot;: &quot;long&quot;\r\n                },\r\n                &quot;brand&quot;: {\r\n                    &quot;type&quot;: &quot;keyword&quot;\r\n                },\r\n                &quot;tradename&quot;: {\r\n                    &quot;type&quot;: &quot;text&quot;\r\n                },\r\n                &quot;date&quot;: {\r\n                    &quot;type&quot;: &quot;date&quot;,\r\n                    &quot;format&quot;: &quot;strict_date_optional_time&quot;\r\n                },\r\n                &quot;color&quot;: {\r\n                    &quot;type&quot;: &quot;text&quot;\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\nMy service:\r\n\r\n    @Service\r\n    public class VehicleService {\r\n    \r\n        @Autowired\r\n        private VehicleRepository vehicleRepository;\r\n    \r\n        public List&lt;BrandDTO&gt; getBrands() {\r\n            List&lt;Vehicle&gt; vehicleList = vehicleRepository.findDistinctBrandsOrdered();\r\n            System.out.println(vehicleList);\r\n    \r\n            List&lt;BrandDTO&gt; brandDTOList = vehicleList.stream()\r\n                    .map(Vehicle::getBrand)\r\n                    .distinct()\r\n                    .sorted()\r\n                    .map(brand -&gt; {\r\n                        BrandDTO brandDTO = new BrandDTO();\r\n                        brandDTO.setBrand(brand);\r\n                        return brandDTO;\r\n                    })\r\n                    .collect(Collectors.toList());\r\n    \r\n            return brandDTOList;\r\n        }\r\n    }\r\n\r\nAnd my repository:\r\n\r\n    import org.springframework.data.elasticsearch.annotations.Query;\r\n    import org.springframework.data.elasticsearch.repository.ElasticsearchRepository;\r\n    ...\r\n    \r\n    @Repository\r\n    public interface VehicleRepository extends ElasticsearchRepository&lt;Vehicle, Long&gt; {\r\n    \r\n        Vehicle findByCountryAndPlate(String country, String plate);\r\n    \r\n        @Query(&quot;{\\&quot;match_all\\&quot;: {}},\\&quot;size\\&quot;: 0,\\&quot;aggs\\&quot;: &quot; +\r\n                &quot;{\\&quot;distinct_brand\\&quot;: {\\&quot;terms\\&quot;: {\\&quot;field\\&quot;: &quot; +\r\n                &quot;\\&quot;brand\\&quot;,\\&quot;size\\&quot;: 10000,\\&quot;order\\&quot;: {\\&quot;_key\\&quot;: &quot; +\r\n                &quot;\\&quot;asc\\&quot;}}}}&quot;)\r\n        List&lt;Vehicle&gt; findDistinctBrandsOrdered();\r\n    \r\n    }\r\n\r\nIf my index has 50 documents, the results are returned perfectly. But if my index has several hundred documents, I get the following message:\r\n\r\nServlet.service() for servlet [dispatcherServlet] in context with path [] threw exception \r\n[Request processing failed: org.springframework.data.elasticsearch.UncategorizedElasticsearchException: [es/search] failed: [search_phase_execution_exception] all shards failed] with root cause\r\nco.elastic.clients.elasticsearch._types.ElasticsearchException: [es/search] failed: [search_phase_execution_exception] all shards failed\r\n\r\nIf I test my query on the same index with several hundred documents by sending:\r\n\r\n    {\r\n      &quot;query&quot;: {\r\n        &quot;match_all&quot;: {}\r\n      },\r\n      &quot;size&quot;: 0,\r\n      &quot;aggs&quot;: {\r\n        &quot;distinct_brand&quot;: {\r\n          &quot;terms&quot;: {\r\n            &quot;field&quot;: &quot;brand&quot;,\r\n            &quot;size&quot;: 10000,\r\n            &quot;order&quot;: {\r\n              &quot;_key&quot;: &quot;asc&quot;\r\n            }\r\n          }\r\n        }\r\n      }\r\n    }\r\n\r\nI still get the results.\r\n\r\nWhy doesn&#39;t this work with Spring Boot and the same query? \r\n\r\nAnd more importantly, why does it work on Spring Boot just by reducing the number of documents in my index?\r\n\r\nI corrected the yellow to green status by modifying the index with:\r\nPUT /_all/_settings\r\n\r\n    {\r\n       &quot;index&quot;: {\r\n         &quot;number_of_replicas&quot;: 0\r\n       }\r\n    }\r\n\r\nBut that didn&#39;t change anything.","title":"How to return an aggregate on many elasticsearch documents with Spring Boot Data Elasicsearch?","body":"<p>I have a problem with my Spring-Boot 3.1.1 application + spring-boot-starter-data-elasticsearch version 3.1.1.</p>\n<p>The index of my cluster is configured as follows:</p>\n<pre><code>{\n    &quot;mappings&quot;: {\n        &quot;properties&quot;: {\n            &quot;id&quot;: {\n                &quot;type&quot;: &quot;long&quot;\n            },\n            &quot;brand&quot;: {\n                &quot;type&quot;: &quot;keyword&quot;\n            },\n            &quot;tradename&quot;: {\n                &quot;type&quot;: &quot;text&quot;\n            },\n            &quot;date&quot;: {\n                &quot;type&quot;: &quot;date&quot;,\n                &quot;format&quot;: &quot;strict_date_optional_time&quot;\n            },\n            &quot;color&quot;: {\n                &quot;type&quot;: &quot;text&quot;\n            }\n        }\n    }\n}\n</code></pre>\n<p>My service:</p>\n<pre><code>@Service\npublic class VehicleService {\n\n    @Autowired\n    private VehicleRepository vehicleRepository;\n\n    public List&lt;BrandDTO&gt; getBrands() {\n        List&lt;Vehicle&gt; vehicleList = vehicleRepository.findDistinctBrandsOrdered();\n        System.out.println(vehicleList);\n\n        List&lt;BrandDTO&gt; brandDTOList = vehicleList.stream()\n                .map(Vehicle::getBrand)\n                .distinct()\n                .sorted()\n                .map(brand -&gt; {\n                    BrandDTO brandDTO = new BrandDTO();\n                    brandDTO.setBrand(brand);\n                    return brandDTO;\n                })\n                .collect(Collectors.toList());\n\n        return brandDTOList;\n    }\n}\n</code></pre>\n<p>And my repository:</p>\n<pre><code>import org.springframework.data.elasticsearch.annotations.Query;\nimport org.springframework.data.elasticsearch.repository.ElasticsearchRepository;\n...\n\n@Repository\npublic interface VehicleRepository extends ElasticsearchRepository&lt;Vehicle, Long&gt; {\n\n    Vehicle findByCountryAndPlate(String country, String plate);\n\n    @Query(&quot;{\\&quot;match_all\\&quot;: {}},\\&quot;size\\&quot;: 0,\\&quot;aggs\\&quot;: &quot; +\n            &quot;{\\&quot;distinct_brand\\&quot;: {\\&quot;terms\\&quot;: {\\&quot;field\\&quot;: &quot; +\n            &quot;\\&quot;brand\\&quot;,\\&quot;size\\&quot;: 10000,\\&quot;order\\&quot;: {\\&quot;_key\\&quot;: &quot; +\n            &quot;\\&quot;asc\\&quot;}}}}&quot;)\n    List&lt;Vehicle&gt; findDistinctBrandsOrdered();\n\n}\n</code></pre>\n<p>If my index has 50 documents, the results are returned perfectly. But if my index has several hundred documents, I get the following message:</p>\n<p>Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception\n[Request processing failed: org.springframework.data.elasticsearch.UncategorizedElasticsearchException: [es/search] failed: [search_phase_execution_exception] all shards failed] with root cause\nco.elastic.clients.elasticsearch._types.ElasticsearchException: [es/search] failed: [search_phase_execution_exception] all shards failed</p>\n<p>If I test my query on the same index with several hundred documents by sending:</p>\n<pre><code>{\n  &quot;query&quot;: {\n    &quot;match_all&quot;: {}\n  },\n  &quot;size&quot;: 0,\n  &quot;aggs&quot;: {\n    &quot;distinct_brand&quot;: {\n      &quot;terms&quot;: {\n        &quot;field&quot;: &quot;brand&quot;,\n        &quot;size&quot;: 10000,\n        &quot;order&quot;: {\n          &quot;_key&quot;: &quot;asc&quot;\n        }\n      }\n    }\n  }\n}\n</code></pre>\n<p>I still get the results.</p>\n<p>Why doesn't this work with Spring Boot and the same query?</p>\n<p>And more importantly, why does it work on Spring Boot just by reducing the number of documents in my index?</p>\n<p>I corrected the yellow to green status by modifying the index with:\nPUT /_all/_settings</p>\n<pre><code>{\n   &quot;index&quot;: {\n     &quot;number_of_replicas&quot;: 0\n   }\n}\n</code></pre>\n<p>But that didn't change anything.</p>\n"},{"tags":["java","spring","hibernate","spring-boot","logging"],"comments":[{"owner":{"account_id":145555,"reputation":21469,"user_id":355438,"display_name":"Ilya Serbis"},"score":3,"creation_date":1612467088,"post_id":30118683,"comment_id":116783396,"body_markdown":"Follow instructions on https://www.baeldung.com/sql-logging-spring-boot","body":"Follow instructions on <a href=\"https://www.baeldung.com/sql-logging-spring-boot\" rel=\"nofollow noreferrer\">baeldung.com/sql-logging-spring-boot</a>"}],"answers":[{"comments":[{"owner":{"account_id":3327113,"reputation":1896,"user_id":2796922,"accept_rate":76,"display_name":"elysch"},"score":125,"creation_date":1465606117,"post_id":31249985,"comment_id":62987136,"body_markdown":"If you want to log values too: `logging.level.org.hibernate.type=TRACE`","body":"If you want to log values too: <code>logging.level.org.hibernate.type=TRACE</code>"},{"owner":{"account_id":1551843,"reputation":879,"user_id":1444061,"display_name":"Josh"},"score":5,"creation_date":1470808137,"post_id":31249985,"comment_id":65093283,"body_markdown":"But this logs only few bind values. How can I log values from the criteria-API? If I use Specifications, I get no output for bound parameters created with the CriteriaBuilder.","body":"But this logs only few bind values. How can I log values from the criteria-API? If I use Specifications, I get no output for bound parameters created with the CriteriaBuilder."},{"owner":{"account_id":13540458,"reputation":4811,"user_id":9768291,"display_name":"payne"},"score":1,"creation_date":1635282762,"post_id":31249985,"comment_id":123254863,"body_markdown":"What about people that use `EclipseLink` instead of `Hibernate` ?","body":"What about people that use <code>EclipseLink</code> instead of <code>Hibernate</code> ?"},{"owner":{"account_id":1921,"reputation":185682,"user_id":2648,"accept_rate":52,"display_name":"D&#243;nal"},"score":1,"creation_date":1671533581,"post_id":31249985,"comment_id":132114925,"body_markdown":"@payne post a separate question","body":"@payne post a separate question"},{"owner":{"account_id":2372654,"reputation":301,"user_id":2076909,"display_name":"user2076909"},"score":2,"creation_date":1701201599,"post_id":31249985,"comment_id":136745443,"body_markdown":"In my project using spring-boot-starter-data-jpa:3.1.4 and hibernate 6.2.9, the &quot;logging.level.org.hibernate.type.descriptor.sql.BasicBinder=TRACE&quot; did not work to show the values. I had to change it to &quot;logging.level.org.hibernate.orm.jdbc.bind=TRACE&quot;","body":"In my project using spring-boot-starter-data-jpa:3.1.4 and hibernate 6.2.9, the &quot;logging.level.org.hibernate.type.descriptor.sql.BasicBinder&zwnj;&#8203;=TRACE&quot; did not work to show the values. I had to change it to &quot;logging.level.org.hibernate.orm.jdbc.bind=TRACE&quot;"}],"tags":[],"owner":{"account_id":1223736,"reputation":6849,"user_id":1189806,"display_name":"Paul Woods"},"comment_count":5,"down_vote_count":1,"up_vote_count":656,"is_accepted":true,"score":655,"last_activity_date":1654006862,"creation_date":1436197170,"answer_id":31249985,"question_id":30118683,"body_markdown":"Try using this in your properties file:\r\n\r\n    logging.level.org.hibernate.SQL=DEBUG\r\n    logging.level.org.hibernate.type.descriptor.sql.BasicBinder=TRACE\r\n\r\n\r\n","title":"How can I log SQL statements in Spring Boot?","body":"<p>Try using this in your properties file:</p>\n<pre><code>logging.level.org.hibernate.SQL=DEBUG\nlogging.level.org.hibernate.type.descriptor.sql.BasicBinder=TRACE\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2445369,"reputation":794,"user_id":2132895,"display_name":"Javier Z."},"comment_count":0,"down_vote_count":0,"up_vote_count":15,"is_accepted":false,"score":15,"last_activity_date":1654007041,"creation_date":1458588561,"answer_id":36139921,"question_id":30118683,"body_markdown":"For the [SQL Server][1] driver (Microsoft SQL Server [JDBC][2] Driver), try using:\r\n\r\n    logging.level.com.microsoft.sqlserver.jdbc=debug\r\n\r\nin your application.properties file.\r\n\r\nMy personal preference is to set:\r\n\r\n    logging.level.com.microsoft.sqlserver.jdbc=info\r\n    logging.level.com.microsoft.sqlserver.jdbc.internals=debug\r\n\r\nYou can look at these links for reference:\r\n\r\n - *[Tracing driver operation][3]*\r\n - *[“How-to” Guides, 7. Logging][4]*\r\n\r\n  [1]: https://en.wikipedia.org/wiki/Microsoft_SQL_Server\r\n  [2]: https://en.wikipedia.org/wiki/Java_Database_Connectivity\r\n  [3]: https://learn.microsoft.com/en-us/sql/connect/jdbc/tracing-driver-operation?redirectedfrom=MSDN&amp;view=sql-server-ver16\r\n  [4]: https://docs.spring.io/spring-boot/docs/current/reference/html/howto.html#howto.logging\r\n\r\n\r\n","title":"How can I log SQL statements in Spring Boot?","body":"<p>For the <a href=\"https://en.wikipedia.org/wiki/Microsoft_SQL_Server\" rel=\"nofollow noreferrer\">SQL Server</a> driver (Microsoft SQL Server <a href=\"https://en.wikipedia.org/wiki/Java_Database_Connectivity\" rel=\"nofollow noreferrer\">JDBC</a> Driver), try using:</p>\n<pre><code>logging.level.com.microsoft.sqlserver.jdbc=debug\n</code></pre>\n<p>in your application.properties file.</p>\n<p>My personal preference is to set:</p>\n<pre><code>logging.level.com.microsoft.sqlserver.jdbc=info\nlogging.level.com.microsoft.sqlserver.jdbc.internals=debug\n</code></pre>\n<p>You can look at these links for reference:</p>\n<ul>\n<li><em><a href=\"https://learn.microsoft.com/en-us/sql/connect/jdbc/tracing-driver-operation?redirectedfrom=MSDN&amp;view=sql-server-ver16\" rel=\"nofollow noreferrer\">Tracing driver operation</a></em></li>\n<li><em><a href=\"https://docs.spring.io/spring-boot/docs/current/reference/html/howto.html#howto.logging\" rel=\"nofollow noreferrer\">“How-to” Guides, 7. Logging</a></em></li>\n</ul>\n"},{"comments":[{"owner":{"account_id":3327113,"reputation":1896,"user_id":2796922,"accept_rate":76,"display_name":"elysch"},"score":22,"creation_date":1465606134,"post_id":37464963,"comment_id":62987141,"body_markdown":"If you want to log values too: `spring.jpa.properties.hibernate.type=trace`","body":"If you want to log values too: <code>spring.jpa.properties.hibernate.type=trace</code>"},{"owner":{"account_id":57402,"reputation":29252,"user_id":171950,"accept_rate":55,"display_name":"Muhammad Hewedy"},"score":2,"creation_date":1467189273,"post_id":37464963,"comment_id":63623670,"body_markdown":"This doesn&#39;t write to log file, this writes to STDOUT","body":"This doesn&#39;t write to log file, this writes to STDOUT"},{"owner":{"account_id":1540270,"reputation":1200,"user_id":1435116,"accept_rate":50,"display_name":"Adeynack"},"score":8,"creation_date":1517561641,"post_id":37464963,"comment_id":84154106,"body_markdown":"I still see only `?` instead of the parameters. Was that solution supposed to show them to me?","body":"I still see only <code>?</code> instead of the parameters. Was that solution supposed to show them to me?"},{"owner":{"account_id":4153318,"reputation":19445,"user_id":3405171,"display_name":"v.ladynev"},"score":0,"creation_date":1517565583,"post_id":37464963,"comment_id":84156498,"body_markdown":"@Adeynack Sorry I can&#39;t help you. I just added it according _elysch&#39;s_ words.","body":"@Adeynack Sorry I can&#39;t help you. I just added it according <i>elysch&#39;s</i> words."},{"owner":{"account_id":1540270,"reputation":1200,"user_id":1435116,"accept_rate":50,"display_name":"Adeynack"},"score":0,"creation_date":1517866892,"post_id":37464963,"comment_id":84260996,"body_markdown":"@v.ladynev: But does it shows the parameters&#39; value to you or does it shows question marks?","body":"@v.ladynev: But does it shows the parameters&#39; value to you or does it shows question marks?"},{"owner":{"account_id":3163862,"reputation":36940,"user_id":2674303,"accept_rate":62,"display_name":"gstackoverflow"},"score":1,"creation_date":1536080052,"post_id":37464963,"comment_id":91292331,"body_markdown":"spring.jpa.properties.hibernate.type=trace doesn&#39;t affect my log file ;(","body":"spring.jpa.properties.hibernate.type=trace doesn&#39;t affect my log file ;("},{"owner":{"account_id":6613027,"reputation":788,"user_id":5107365,"display_name":"Raj"},"score":1,"creation_date":1580950818,"post_id":37464963,"comment_id":106270317,"body_markdown":"The &quot;type=trace&quot; is not a spring property, so it does not work. The solution given out below https://stackoverflow.com/a/41594913/5107365 is the right one for that.","body":"The &quot;type=trace&quot; is not a spring property, so it does not work. The solution given out below <a href=\"https://stackoverflow.com/a/41594913/5107365\">stackoverflow.com/a/41594913/5107365</a> is the right one for that."},{"owner":{"account_id":4153318,"reputation":19445,"user_id":3405171,"display_name":"v.ladynev"},"score":0,"creation_date":1581004827,"post_id":37464963,"comment_id":106292881,"body_markdown":"@Raj Thank you very much. I have updated the answer.","body":"@Raj Thank you very much. I have updated the answer."},{"owner":{"account_id":13540458,"reputation":4811,"user_id":9768291,"display_name":"payne"},"score":0,"creation_date":1635282768,"post_id":37464963,"comment_id":123254868,"body_markdown":"What about people that use `EclipseLink` instead of `Hibernate` ?","body":"What about people that use <code>EclipseLink</code> instead of <code>Hibernate</code> ?"},{"owner":{"account_id":2473795,"reputation":367,"user_id":2154913,"display_name":"ErisoHV"},"score":1,"creation_date":1671482227,"post_id":37464963,"comment_id":132104753,"body_markdown":"This works for me, I&#39;m using spring boot 2.5.9","body":"This works for me, I&#39;m using spring boot 2.5.9"}],"tags":[],"owner":{"account_id":4153318,"reputation":19445,"user_id":3405171,"display_name":"v.ladynev"},"comment_count":10,"down_vote_count":1,"up_vote_count":309,"is_accepted":false,"score":308,"last_activity_date":1654007876,"creation_date":1464276032,"answer_id":37464963,"question_id":30118683,"body_markdown":"This works for standard output too:\r\n\r\n```lang-none\r\nspring.jpa.properties.hibernate.show_sql=true\r\nspring.jpa.properties.hibernate.use_sql_comments=true\r\nspring.jpa.properties.hibernate.format_sql=true\r\n```\r\n\r\nTo log values:\r\n\r\n```lang-none\r\nlogging.level.org.hibernate.type=trace\r\n```\r\n\r\nJust add this to `application.properties`.\r\n\r\n","title":"How can I log SQL statements in Spring Boot?","body":"<p>This works for standard output too:</p>\n<pre class=\"lang-none prettyprint-override\"><code>spring.jpa.properties.hibernate.show_sql=true\nspring.jpa.properties.hibernate.use_sql_comments=true\nspring.jpa.properties.hibernate.format_sql=true\n</code></pre>\n<p>To log values:</p>\n<pre class=\"lang-none prettyprint-override\"><code>logging.level.org.hibernate.type=trace\n</code></pre>\n<p>Just add this to <code>application.properties</code>.</p>\n"},{"comments":[{"owner":{"account_id":943688,"reputation":2561,"user_id":971355,"accept_rate":79,"display_name":"ka3ak"},"score":2,"creation_date":1642065167,"post_id":41594913,"comment_id":124974308,"body_markdown":"I always thought that `show_sql: true` belongs to `jpa`","body":"I always thought that <code>show_sql: true</code> belongs to <code>jpa</code>"},{"owner":{"account_id":7483446,"reputation":325,"user_id":5687537,"display_name":"Damian Szewc"},"score":0,"creation_date":1700563288,"post_id":41594913,"comment_id":136667358,"body_markdown":"You are right, it should be in jpa section","body":"You are right, it should be in jpa section"}],"tags":[],"owner":{"account_id":65983,"reputation":9310,"user_id":193850,"accept_rate":85,"display_name":"Michel"},"comment_count":2,"down_vote_count":0,"up_vote_count":159,"is_accepted":false,"score":159,"last_activity_date":1654007148,"creation_date":1484149077,"answer_id":41594913,"question_id":30118683,"body_markdown":"This works for me ([YAML][1]):\r\n\r\n```lang-none\r\nspring:\r\n  jpa:\r\n    properties:\r\n      hibernate:\r\n        show_sql: true\r\n        format_sql: true\r\nlogging:\r\n  level:\r\n    org:\r\n      hibernate:\r\n        type: trace\r\n```\r\n\r\n  [1]: https://en.wikipedia.org/wiki/YAML\r\n\r\n\r\n\r\n","title":"How can I log SQL statements in Spring Boot?","body":"<p>This works for me (<a href=\"https://en.wikipedia.org/wiki/YAML\" rel=\"noreferrer\">YAML</a>):</p>\n<pre class=\"lang-none prettyprint-override\"><code>spring:\n  jpa:\n    properties:\n      hibernate:\n        show_sql: true\n        format_sql: true\nlogging:\n  level:\n    org:\n      hibernate:\n        type: trace\n</code></pre>\n"},{"comments":[{"owner":{"account_id":2021629,"reputation":57953,"user_id":1807667,"accept_rate":60,"display_name":"Ortomala Lokni"},"score":1,"creation_date":1525361285,"post_id":45137516,"comment_id":87335232,"body_markdown":"With Spring Boot you have to use `&lt;appender-ref ref=&quot;FILE&quot; /&gt;`","body":"With Spring Boot you have to use <code>&lt;appender-ref ref=&quot;FILE&quot; &#47;&gt;</code>"},{"owner":{"account_id":3015538,"reputation":4229,"user_id":2557818,"accept_rate":82,"display_name":"Raja Anbazhagan"},"score":0,"creation_date":1532003100,"post_id":45137516,"comment_id":89816110,"body_markdown":"appender ref is the name of the appender that you have defined in the logback xml. It is only a variable","body":"appender ref is the name of the appender that you have defined in the logback xml. It is only a variable"}],"tags":[],"owner":{"account_id":9916748,"reputation":404,"user_id":7341286,"display_name":"Edye Chan"},"comment_count":2,"down_vote_count":0,"up_vote_count":26,"is_accepted":false,"score":26,"last_activity_date":1654007234,"creation_date":1500273706,"answer_id":45137516,"question_id":30118683,"body_markdown":"If you have a `logback-spring.xml` file or something like that, add the following code to it:\r\n\r\n```lang-xml\r\n&lt;logger name=&quot;org.hibernate.SQL&quot; level=&quot;trace&quot; additivity=&quot;false&quot;&gt;\r\n    &lt;appender-ref ref=&quot;file&quot; /&gt;\r\n&lt;/logger&gt;\r\n```\r\n\r\nThat works for me.\r\n\r\nTo get bind variables as well:\r\n\r\n```lang-xml\r\n&lt;logger name=&quot;org.hibernate.type.descriptor.sql&quot; level=&quot;trace&quot;&gt;\r\n    &lt;appender-ref ref=&quot;file&quot; /&gt;\r\n&lt;/logger&gt;\r\n```\r\n\r\n","title":"How can I log SQL statements in Spring Boot?","body":"<p>If you have a <code>logback-spring.xml</code> file or something like that, add the following code to it:</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;logger name=&quot;org.hibernate.SQL&quot; level=&quot;trace&quot; additivity=&quot;false&quot;&gt;\n    &lt;appender-ref ref=&quot;file&quot; /&gt;\n&lt;/logger&gt;\n</code></pre>\n<p>That works for me.</p>\n<p>To get bind variables as well:</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;logger name=&quot;org.hibernate.type.descriptor.sql&quot; level=&quot;trace&quot;&gt;\n    &lt;appender-ref ref=&quot;file&quot; /&gt;\n&lt;/logger&gt;\n</code></pre>\n"},{"comments":[{"owner":{"account_id":93208,"reputation":6939,"user_id":255139,"accept_rate":44,"display_name":"Kalpesh Soni"},"score":0,"creation_date":1541110452,"post_id":47422537,"comment_id":93115409,"body_markdown":"I have reverse problem, setting this to false, and org.hibernate to level ERROR and its still printing drop/create/insert/select","body":"I have reverse problem, setting this to false, and org.hibernate to level ERROR and its still printing drop/create/insert/select"}],"tags":[],"owner":{"account_id":6883244,"reputation":2541,"user_id":5289288,"display_name":"Max Farsikov"},"comment_count":1,"down_vote_count":0,"up_vote_count":11,"is_accepted":false,"score":11,"last_activity_date":1654007264,"creation_date":1511297666,"answer_id":47422537,"question_id":30118683,"body_markdown":"According to [documentation][1] it is:\r\n\r\n```lang-none\r\nspring.jpa.show-sql=true # Enable logging of SQL statements.\r\n```\r\n\r\n\r\n  [1]: https://docs.spring.io/spring-boot/docs/current/reference/html/common-application-properties.html","title":"How can I log SQL statements in Spring Boot?","body":"<p>According to <a href=\"https://docs.spring.io/spring-boot/docs/current/reference/html/common-application-properties.html\" rel=\"nofollow noreferrer\">documentation</a> it is:</p>\n<pre class=\"lang-none prettyprint-override\"><code>spring.jpa.show-sql=true # Enable logging of SQL statements.\n</code></pre>\n"},{"tags":[],"owner":{"account_id":4060161,"reputation":1380,"user_id":3336921,"display_name":"rahulnikhare"},"comment_count":0,"down_vote_count":0,"up_vote_count":29,"is_accepted":false,"score":29,"last_activity_date":1654007297,"creation_date":1513846214,"answer_id":47921228,"question_id":30118683,"body_markdown":"Please use:\r\n    \r\n```lang-none\r\nlogging.level.org.hibernate.SQL=DEBUG\r\nlogging.level.org.hibernate.type=TRACE\r\nspring.jpa.show-sql=true\r\n```\r\n\r\n","title":"How can I log SQL statements in Spring Boot?","body":"<p>Please use:</p>\n<pre class=\"lang-none prettyprint-override\"><code>logging.level.org.hibernate.SQL=DEBUG\nlogging.level.org.hibernate.type=TRACE\nspring.jpa.show-sql=true\n</code></pre>\n"},{"tags":[],"owner":{"account_id":145672,"reputation":6289,"user_id":355634,"accept_rate":50,"display_name":"Udara S.S Liyanage"},"comment_count":0,"down_vote_count":0,"up_vote_count":8,"is_accepted":false,"score":8,"last_activity_date":1654007449,"creation_date":1533622624,"answer_id":51720009,"question_id":30118683,"body_markdown":"If you want to view the actual parameters used to query you can use\r\n\r\n```lang-none\r\nlogging.level.org.hibernate.SQL=DEBUG\r\nlogging.level.org.hibernate.type.descriptor.sql=TRACE\r\n```\r\n\r\nThen notice that actual parameter value is shown as `binding parameter`...:\r\n \r\n   ```lang-none\r\n   2018-08-07 14:14:36.079 DEBUG 44804 --- [           main] org.hibernate.SQL                        : select employee0_.id as id1_0_, employee0_.department as departme2_0_, employee0_.joining_date as joining_3_0_, employee0_.name as name4_0_ from employee employee0_ where employee0_.joining_date=?\r\n    2018-08-07 14:14:36.079 TRACE 44804 --- [           main] o.h.type.descriptor.sql.BasicBinder      : binding parameter [1] as [TIMESTAMP] - [Tue Aug 07 00:00:00 SGT 2018]\r\n   ```\r\n\r\n\r\n","title":"How can I log SQL statements in Spring Boot?","body":"<p>If you want to view the actual parameters used to query you can use</p>\n<pre class=\"lang-none prettyprint-override\"><code>logging.level.org.hibernate.SQL=DEBUG\nlogging.level.org.hibernate.type.descriptor.sql=TRACE\n</code></pre>\n<p>Then notice that actual parameter value is shown as <code>binding parameter</code>...:</p>\n<pre class=\"lang-none prettyprint-override\"><code>    2018-08-07 14:14:36.079 DEBUG 44804 --- [           main] org.hibernate.SQL                        : select employee0_.id as id1_0_, employee0_.department as departme2_0_, employee0_.joining_date as joining_3_0_, employee0_.name as name4_0_ from employee employee0_ where employee0_.joining_date=?\n     2018-08-07 14:14:36.079 TRACE 44804 --- [           main] o.h.type.descriptor.sql.BasicBinder      : binding parameter [1] as [TIMESTAMP] - [Tue Aug 07 00:00:00 SGT 2018]\n</code></pre>\n"},{"tags":[],"owner":{"account_id":6833305,"reputation":3084,"user_id":5256337,"display_name":"Lova Chittumuri"},"comment_count":0,"down_vote_count":0,"up_vote_count":7,"is_accepted":false,"score":7,"last_activity_date":1654008423,"creation_date":1542956325,"answer_id":53441972,"question_id":30118683,"body_markdown":"We can use any one of these in the *application.properties* file:\r\n\r\n```lang-none\r\nspring.jpa.show-sql=true\r\n```\r\n\r\nExample:\r\n\r\n```lang-none\r\n//Hibernate: select country0_.id as id1_0_, country0_.name as name2_0_ from country country0_\r\n```\r\n\r\nor\r\n\r\n```lang-none\r\nlogging.level.org.hibernate.SQL=debug\r\n```\r\n\r\nExample:\r\n\r\n```lang-none\r\n2018-11-23 12:28:02.990 DEBUG 12972 --- [nio-8086-exec-2] org.hibernate.SQL   : select country0_.id as id1_0_, country0_.name as name2_0_ from country country0_\r\n```\r\n\r\n\r\n\r\n\r\n","title":"How can I log SQL statements in Spring Boot?","body":"<p>We can use any one of these in the <em>application.properties</em> file:</p>\n<pre class=\"lang-none prettyprint-override\"><code>spring.jpa.show-sql=true\n</code></pre>\n<p>Example:</p>\n<pre class=\"lang-none prettyprint-override\"><code>//Hibernate: select country0_.id as id1_0_, country0_.name as name2_0_ from country country0_\n</code></pre>\n<p>or</p>\n<pre class=\"lang-none prettyprint-override\"><code>logging.level.org.hibernate.SQL=debug\n</code></pre>\n<p>Example:</p>\n<pre class=\"lang-none prettyprint-override\"><code>2018-11-23 12:28:02.990 DEBUG 12972 --- [nio-8086-exec-2] org.hibernate.SQL   : select country0_.id as id1_0_, country0_.name as name2_0_ from country country0_\n</code></pre>\n"},{"comments":[{"owner":{"account_id":3756720,"reputation":3547,"user_id":3122921,"display_name":"MarcinJ"},"score":6,"creation_date":1579794829,"post_id":55131043,"comment_id":105893830,"body_markdown":"You can also use flat properties in YAML if you don&#39;t want to nest for single use props, like:\n\n`logging.level.org.hibernate.SQL: TRACE`\n`logging.level.org.hibernate.type.descriptor.sql.BasicBinder: TRACE`","body":"You can also use flat properties in YAML if you don&#39;t want to nest for single use props, like:  <code>logging.level.org.hibernate.SQL: TRACE</code> <code>logging.level.org.hibernate.type.descriptor.sql.BasicBinder: TRACE</code>"}],"tags":[],"owner":{"account_id":3334749,"reputation":169,"user_id":2802664,"display_name":"Robert.Li"},"comment_count":1,"down_vote_count":0,"up_vote_count":13,"is_accepted":false,"score":13,"last_activity_date":1552426794,"creation_date":1552426794,"answer_id":55131043,"question_id":30118683,"body_markdown":"Translated accepted answer to YAML works for me\r\n\r\n    logging:\r\n      level:\r\n        org:\r\n          hibernate:\r\n            SQL:\r\n              TRACE\r\n            type:\r\n              descriptor:\r\n                sql:\r\n                  BasicBinder:\r\n                    TRACE","title":"How can I log SQL statements in Spring Boot?","body":"<p>Translated accepted answer to YAML works for me</p>\n\n<pre><code>logging:\n  level:\n    org:\n      hibernate:\n        SQL:\n          TRACE\n        type:\n          descriptor:\n            sql:\n              BasicBinder:\n                TRACE\n</code></pre>\n"},{"tags":[],"owner":{"account_id":874712,"reputation":19505,"user_id":924597,"accept_rate":79,"display_name":"Shorn"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1567996755,"creation_date":1567996755,"answer_id":57847245,"question_id":30118683,"body_markdown":"If you&#39;re having trouble with this setting and it seems to work sometimes and not other times - consider if the times where it doesn&#39;t work are during unit tests.\r\n\r\nMany people declare custom test-time properties via the `@TestPropertySources` annotation declared somewhere in your test inheritance hierarchy.  This will override whatever you put in your `application.properties` or other production properties settings so those values you&#39;re setting are effectively being ignored at test-time.","title":"How can I log SQL statements in Spring Boot?","body":"<p>If you're having trouble with this setting and it seems to work sometimes and not other times - consider if the times where it doesn't work are during unit tests.</p>\n\n<p>Many people declare custom test-time properties via the <code>@TestPropertySources</code> annotation declared somewhere in your test inheritance hierarchy.  This will override whatever you put in your <code>application.properties</code> or other production properties settings so those values you're setting are effectively being ignored at test-time.</p>\n"},{"tags":[],"owner":{"account_id":2635164,"reputation":1119,"user_id":2280067,"display_name":"SJX"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1568642449,"creation_date":1568642449,"answer_id":57958501,"question_id":30118683,"body_markdown":"Putting `spring.jpa.properties.hibernate.show_sql=true` in application.properties didn&#39;t help always.\r\n\r\nYou can try to add `properties.put(&quot;hibernate.show_sql&quot;, &quot;true&quot;);` to the properties of the database configuration.\r\n\r\n    public class DbConfig {\r\n    \r\n        @Primary\r\n        @Bean(name = &quot;entityManagerFactory&quot;)\r\n        public LocalContainerEntityManagerFactoryBean\r\n        entityManagerFactory(\r\n                EntityManagerFactoryBuilder builder,\r\n                @Qualifier(&quot;dataSource&quot;) DataSource dataSource\r\n        ) {\r\n            Map&lt;String, Object&gt; properties = new HashMap();\r\n            properties.put(&quot;hibernate.hbm2ddl.auto&quot;, &quot;validate&quot;);\r\n            properties.put(&quot;hibernate.show_sql&quot;, &quot;true&quot;);\r\n    \r\n            return builder\r\n                    .dataSource(dataSource)\r\n                    .packages(&quot;com.test.dbsource.domain&quot;)\r\n                    .persistenceUnit(&quot;dbsource&quot;).properties(properties)\r\n                    .build();\r\n        }\r\n\r\n","title":"How can I log SQL statements in Spring Boot?","body":"<p>Putting <code>spring.jpa.properties.hibernate.show_sql=true</code> in application.properties didn't help always.</p>\n\n<p>You can try to add <code>properties.put(\"hibernate.show_sql\", \"true\");</code> to the properties of the database configuration.</p>\n\n<pre><code>public class DbConfig {\n\n    @Primary\n    @Bean(name = \"entityManagerFactory\")\n    public LocalContainerEntityManagerFactoryBean\n    entityManagerFactory(\n            EntityManagerFactoryBuilder builder,\n            @Qualifier(\"dataSource\") DataSource dataSource\n    ) {\n        Map&lt;String, Object&gt; properties = new HashMap();\n        properties.put(\"hibernate.hbm2ddl.auto\", \"validate\");\n        properties.put(\"hibernate.show_sql\", \"true\");\n\n        return builder\n                .dataSource(dataSource)\n                .packages(\"com.test.dbsource.domain\")\n                .persistenceUnit(\"dbsource\").properties(properties)\n                .build();\n    }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3731659,"reputation":3183,"user_id":3103802,"accept_rate":73,"display_name":"Saveendra Ekanayake"},"comment_count":0,"down_vote_count":0,"up_vote_count":11,"is_accepted":false,"score":11,"last_activity_date":1655588435,"creation_date":1571812106,"answer_id":58516696,"question_id":30118683,"body_markdown":"# **Log in to standard output**\r\n\r\nAdd to `application.properties`\r\n\r\n    ### To enable\r\n    spring.jpa.show-sql=true\r\n\r\n    ### To make the printing SQL beautify\r\n    spring.jpa.properties.hibernate.format_sql=true\r\n\r\nThis is the simplest way to print the SQL queries, though it doesn&#39;t log the parameters of prepared statements.\r\n\r\nAnd it’s not recommended since it’s not such as optimized logging framework.\r\n\r\n### Using a logging framework\r\n\r\nAdd to `application.properties`\r\n\r\n    ### Logs the SQL queries\r\n    logging.level.org.hibernate.SQL=DEBUG\r\n    ### Logs the prepared statement parameters\r\n    logging.level.org.hibernate.type.descriptor.sql.BasicBinder=TRACE\r\n\r\n    ### To make the printing SQL beautify\r\n    spring.jpa.properties.hibernate.format_sql=true\r\n\r\nBy specifying the above properties, log entries will be sent to the configured log appender, such as log-back or [Log4j][1].\r\n\r\n  [1]: https://en.wikipedia.org/wiki/Log4j\r\n\r\n\r\n\r\n","title":"How can I log SQL statements in Spring Boot?","body":"<h1><strong>Log in to standard output</strong></h1>\n<p>Add to <code>application.properties</code></p>\n<pre><code>### To enable\nspring.jpa.show-sql=true\n\n### To make the printing SQL beautify\nspring.jpa.properties.hibernate.format_sql=true\n</code></pre>\n<p>This is the simplest way to print the SQL queries, though it doesn't log the parameters of prepared statements.</p>\n<p>And it’s not recommended since it’s not such as optimized logging framework.</p>\n<h3>Using a logging framework</h3>\n<p>Add to <code>application.properties</code></p>\n<pre><code>### Logs the SQL queries\nlogging.level.org.hibernate.SQL=DEBUG\n### Logs the prepared statement parameters\nlogging.level.org.hibernate.type.descriptor.sql.BasicBinder=TRACE\n\n### To make the printing SQL beautify\nspring.jpa.properties.hibernate.format_sql=true\n</code></pre>\n<p>By specifying the above properties, log entries will be sent to the configured log appender, such as log-back or <a href=\"https://en.wikipedia.org/wiki/Log4j\" rel=\"nofollow noreferrer\">Log4j</a>.</p>\n"},{"comments":[{"owner":{"account_id":445162,"reputation":1058,"user_id":837438,"accept_rate":75,"display_name":"Christos Karapapas"},"score":1,"creation_date":1601663016,"post_id":60289026,"comment_id":113485871,"body_markdown":"What exactly does to enable the `datasource-proxy` means here? Is it another configuration? Is there something extra that needs configuration apart from creating the bean with the proper datasource? Do we also need to configure something in the log4j.properties at this point?","body":"What exactly does to enable the <code>datasource-proxy</code> means here? Is it another configuration? Is there something extra that needs configuration apart from creating the bean with the proper datasource? Do we also need to configure something in the log4j.properties at this point?"},{"owner":{"account_id":1012936,"reputation":145178,"user_id":1025118,"accept_rate":100,"display_name":"Vlad Mihalcea"},"score":1,"creation_date":1608480192,"post_id":60289026,"comment_id":115591194,"body_markdown":"I updated the answer to answer your questions.","body":"I updated the answer to answer your questions."},{"owner":{"account_id":14932927,"reputation":117,"user_id":14923814,"display_name":"Алексеев станислав"},"score":0,"creation_date":1626944474,"post_id":60289026,"comment_id":121028302,"body_markdown":"It do not work,how does Hibernate know to use this bean?","body":"It do not work,how does Hibernate know to use this bean?"}],"tags":[],"owner":{"account_id":1012936,"reputation":145178,"user_id":1025118,"accept_rate":100,"display_name":"Vlad Mihalcea"},"comment_count":3,"down_vote_count":0,"up_vote_count":149,"is_accepted":false,"score":149,"last_activity_date":1655592029,"creation_date":1582057998,"answer_id":60289026,"question_id":30118683,"body_markdown":"Settings to avoid\r\n-----------------\r\n\r\nYou should not use this setting:\r\n\r\n```lang-none\r\nspring.jpa.show-sql=true\r\n```\r\n\r\nThe problem with `show-sql` is that the SQL statements are printed in the console, so there is no way to filter them, as you&#39;d normally do with a Logging framework.\r\n\r\nUsing Hibernate logging\r\n-----------------------\r\n\r\nIn your log configuration file, if you add the following logger:\r\n\r\n```lang-xml\r\n&lt;logger name=&quot;org.hibernate.SQL&quot; level=&quot;debug&quot;/&gt;\r\n```\r\n\r\nThen, Hibernate will print the SQL statements when the JDBC `PreparedStatement` is created. That&#39;s why the statement will be logged using parameter placeholders:\r\n\r\n```lang-sql\r\nINSERT INTO post (title, version, id) VALUES (?, ?, ?)\r\n```\r\n\r\nIf you want to log the bind parameter values, just add the following logger as well:\r\n\r\n```lang-xml\r\n&lt;logger name=&quot;org.hibernate.type.descriptor.sql.BasicBinder&quot; level=&quot;trace&quot;/&gt;\r\n```\r\n\r\nOnce you set the `BasicBinder` logger, you will see that the bind parameter values are logged as well:\r\n\r\n```lang-none\r\nDEBUG [main]: o.h.SQL - insert into post (title, version, id) values (?, ?, ?)\r\nTRACE [main]: o.h.t.d.s.BasicBinder - binding parameter [1] as [VARCHAR] - [High-Performance Java Persistence, part 1]\r\nTRACE [main]: o.h.t.d.s.BasicBinder - binding parameter [2] as [INTEGER] - [0]\r\nTRACE [main]: o.h.t.d.s.BasicBinder - binding parameter [3] as [BIGINT] - [1]\r\n```\r\n\r\nUsing datasource-proxy\r\n----------------------\r\n\r\nThe [datasource-proxy][1] OSS framework allows you to proxy the actual JDBC `DataSource`, as illustrated by the following diagram:\r\n\r\n[![DataSource-Proxy][2]](https://vladmihalcea.com/the-best-way-to-log-jdbc-statements/)\r\n\r\nYou can define the `dataSource` bean that will be used by Hibernate as follows:\r\n\r\n    @Bean\r\n    public DataSource dataSource(DataSource actualDataSource) {\r\n        SLF4JQueryLoggingListener loggingListener = new SLF4JQueryLoggingListener();\r\n        loggingListener.setQueryLogEntryCreator(new InlineQueryLogEntryCreator());\r\n        return ProxyDataSourceBuilder\r\n            .create(actualDataSource)\r\n            .name(DATA_SOURCE_PROXY_NAME)\r\n            .listener(loggingListener)\r\n            .build();\r\n    }\r\n\r\nNotice that the `actualDataSource` must be the `DataSource` defined by the [connection pool][2] you are using in your application.\r\n\r\nNext, you need to set the `net.ttddyy.dsproxy.listener` log level to `debug` in your logging framework configuration file. For instance, if you&#39;re using Logback, you can add the following logger:\r\n\r\n```lang-xml\r\n&lt;logger name=&quot;net.ttddyy.dsproxy.listener&quot; level=&quot;debug&quot;/&gt;\r\n```\r\n\r\nOnce you enable `datasource-proxy`, the SQL statement are going to be logged as follows:\r\n\r\n```lang-none\r\nName:DATA_SOURCE_PROXY, Time:6, Success:True,\r\nType:Prepared, Batch:True, QuerySize:1, BatchSize:3,\r\nQuery:[&quot;insert into post (title, version, id) values (?, ?, ?)&quot;],\r\nParams:[(Post no. 0, 0, 0), (Post no. 1, 0, 1), (Post no. 2, 0, 2)]\r\n```\r\n\r\n  [1]: https://github.com/ttddyy/datasource-proxy\r\n  [2]: https://i.stack.imgur.com/c67Gb.png\r\n\r\n","title":"How can I log SQL statements in Spring Boot?","body":"<h2>Settings to avoid</h2>\n<p>You should not use this setting:</p>\n<pre class=\"lang-none prettyprint-override\"><code>spring.jpa.show-sql=true\n</code></pre>\n<p>The problem with <code>show-sql</code> is that the SQL statements are printed in the console, so there is no way to filter them, as you'd normally do with a Logging framework.</p>\n<h2>Using Hibernate logging</h2>\n<p>In your log configuration file, if you add the following logger:</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;logger name=&quot;org.hibernate.SQL&quot; level=&quot;debug&quot;/&gt;\n</code></pre>\n<p>Then, Hibernate will print the SQL statements when the JDBC <code>PreparedStatement</code> is created. That's why the statement will be logged using parameter placeholders:</p>\n<pre class=\"lang-sql prettyprint-override\"><code>INSERT INTO post (title, version, id) VALUES (?, ?, ?)\n</code></pre>\n<p>If you want to log the bind parameter values, just add the following logger as well:</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;logger name=&quot;org.hibernate.type.descriptor.sql.BasicBinder&quot; level=&quot;trace&quot;/&gt;\n</code></pre>\n<p>Once you set the <code>BasicBinder</code> logger, you will see that the bind parameter values are logged as well:</p>\n<pre class=\"lang-none prettyprint-override\"><code>DEBUG [main]: o.h.SQL - insert into post (title, version, id) values (?, ?, ?)\nTRACE [main]: o.h.t.d.s.BasicBinder - binding parameter [1] as [VARCHAR] - [High-Performance Java Persistence, part 1]\nTRACE [main]: o.h.t.d.s.BasicBinder - binding parameter [2] as [INTEGER] - [0]\nTRACE [main]: o.h.t.d.s.BasicBinder - binding parameter [3] as [BIGINT] - [1]\n</code></pre>\n<h2>Using datasource-proxy</h2>\n<p>The <a href=\"https://github.com/ttddyy/datasource-proxy\" rel=\"noreferrer\">datasource-proxy</a> OSS framework allows you to proxy the actual JDBC <code>DataSource</code>, as illustrated by the following diagram:</p>\n<p><a href=\"https://vladmihalcea.com/the-best-way-to-log-jdbc-statements/\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/c67Gb.png\" alt=\"DataSource-Proxy\" /></a></p>\n<p>You can define the <code>dataSource</code> bean that will be used by Hibernate as follows:</p>\n<pre><code>@Bean\npublic DataSource dataSource(DataSource actualDataSource) {\n    SLF4JQueryLoggingListener loggingListener = new SLF4JQueryLoggingListener();\n    loggingListener.setQueryLogEntryCreator(new InlineQueryLogEntryCreator());\n    return ProxyDataSourceBuilder\n        .create(actualDataSource)\n        .name(DATA_SOURCE_PROXY_NAME)\n        .listener(loggingListener)\n        .build();\n}\n</code></pre>\n<p>Notice that the <code>actualDataSource</code> must be the <code>DataSource</code> defined by the <a href=\"https://i.stack.imgur.com/c67Gb.png\" rel=\"noreferrer\">connection pool</a> you are using in your application.</p>\n<p>Next, you need to set the <code>net.ttddyy.dsproxy.listener</code> log level to <code>debug</code> in your logging framework configuration file. For instance, if you're using Logback, you can add the following logger:</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;logger name=&quot;net.ttddyy.dsproxy.listener&quot; level=&quot;debug&quot;/&gt;\n</code></pre>\n<p>Once you enable <code>datasource-proxy</code>, the SQL statement are going to be logged as follows:</p>\n<pre class=\"lang-none prettyprint-override\"><code>Name:DATA_SOURCE_PROXY, Time:6, Success:True,\nType:Prepared, Batch:True, QuerySize:1, BatchSize:3,\nQuery:[&quot;insert into post (title, version, id) values (?, ?, ?)&quot;],\nParams:[(Post no. 0, 0, 0), (Post no. 1, 0, 1), (Post no. 2, 0, 2)]\n</code></pre>\n"},{"tags":[],"owner":{"account_id":17789506,"reputation":369,"user_id":12918869,"display_name":"noob"},"comment_count":0,"down_vote_count":1,"up_vote_count":4,"is_accepted":false,"score":3,"last_activity_date":1655592286,"creation_date":1592223470,"answer_id":62388082,"question_id":30118683,"body_markdown":"You just need to set `spring.jpa.show-sql=true` in *application.properties*.\r\n\r\nFor example, you may refer to *[ConfigServerRepo/application.yaml][1]*.\r\n\r\n  [1]: https://github.com/007anwar/ConfigServerRepo/blob/master/application.yaml\r\n\r\n\r\n","title":"How can I log SQL statements in Spring Boot?","body":"<p>You just need to set <code>spring.jpa.show-sql=true</code> in <em>application.properties</em>.</p>\n<p>For example, you may refer to <em><a href=\"https://github.com/007anwar/ConfigServerRepo/blob/master/application.yaml\" rel=\"nofollow noreferrer\">ConfigServerRepo/application.yaml</a></em>.</p>\n"},{"tags":[],"owner":{"account_id":9608243,"reputation":87,"user_id":7133567,"display_name":"BRAIEK AYEMN"},"comment_count":0,"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1655592838,"creation_date":1596459476,"answer_id":63229899,"question_id":30118683,"body_markdown":"Use this code in the file *application.properties*:\r\n\r\n```lang-none\r\n# Enable logging for configuration troubleshooting\r\nlogging.level.org.hibernate.SQL=DEBUG\r\nlogging.level.com.zaxxer.hikari.HikariConfig=DEBUG\r\nlogging.level.org.hibernate.type.descriptor.sql.BasicBinder=TRACE\r\n```\r\n","title":"How can I log SQL statements in Spring Boot?","body":"<p>Use this code in the file <em>application.properties</em>:</p>\n<pre class=\"lang-none prettyprint-override\"><code># Enable logging for configuration troubleshooting\nlogging.level.org.hibernate.SQL=DEBUG\nlogging.level.com.zaxxer.hikari.HikariConfig=DEBUG\nlogging.level.org.hibernate.type.descriptor.sql.BasicBinder=TRACE\n</code></pre>\n"},{"tags":[],"owner":{"account_id":10749177,"reputation":602,"user_id":7909340,"display_name":"shenyu1997"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1655592511,"creation_date":1630388423,"answer_id":68993405,"question_id":30118683,"body_markdown":"In my YAML file:\r\n\r\n    logging:\r\n      level:\r\n        org.hibernate.SQL: DEBUG\r\n        org.hibernate.type.descriptor.sql: TRACE\r\n\r\nSpring Boot version: 2.3.5.RELEASE\r\n\r\n\r\n","title":"How can I log SQL statements in Spring Boot?","body":"<p>In my YAML file:</p>\n<pre><code>logging:\n  level:\n    org.hibernate.SQL: DEBUG\n    org.hibernate.type.descriptor.sql: TRACE\n</code></pre>\n<p>Spring Boot version: 2.3.5.RELEASE</p>\n"},{"tags":[],"owner":{"account_id":17623291,"reputation":19,"user_id":12788765,"display_name":"Souradeep Banerjee"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1655592999,"creation_date":1633678016,"answer_id":69492066,"question_id":30118683,"body_markdown":"The basic way is to add the following lines in your `application.properties`. This will enable Spring Boot to log all your SQL queries that get executed:\r\n\r\n```lang-none\r\nspring.jpa.show-sql=true\r\nspring.jpa.properties.hibernate.format_sql=true\r\n```\r\n\r\nThe second line is used to beautify the SQL statements.\r\n\r\nIf you want to use loggers, you can use the following lines:\r\n\r\n    logging.level.org.hibernate.SQL=DEBUG\r\n    logging.level.org.hibernate.type.descriptor.sql.BasicBinder=TRACE\r\n\r\nThe second line is used to print all the parameters that get bound with your queries.\r\n\r\n\r\n\r\n\r\n","title":"How can I log SQL statements in Spring Boot?","body":"<p>The basic way is to add the following lines in your <code>application.properties</code>. This will enable Spring Boot to log all your SQL queries that get executed:</p>\n<pre class=\"lang-none prettyprint-override\"><code>spring.jpa.show-sql=true\nspring.jpa.properties.hibernate.format_sql=true\n</code></pre>\n<p>The second line is used to beautify the SQL statements.</p>\n<p>If you want to use loggers, you can use the following lines:</p>\n<pre><code>logging.level.org.hibernate.SQL=DEBUG\nlogging.level.org.hibernate.type.descriptor.sql.BasicBinder=TRACE\n</code></pre>\n<p>The second line is used to print all the parameters that get bound with your queries.</p>\n"},{"tags":[],"owner":{"account_id":3281258,"reputation":1,"user_id":2942841,"display_name":"AnkitSingh2099"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1655592666,"creation_date":1637259182,"answer_id":70024761,"question_id":30118683,"body_markdown":"Add these in the properties. Quoting [Hibernate Show SQL](https://springframework.guru/hibernate-show-sql/):\r\n\r\n```\r\n# Show SQL statement\r\nlogging.level.org.hibernate.SQL=debug\r\n\r\n# Show SQL values\r\nlogging.level.org.hibernate.type.descriptor.sql=trace\r\n```\r\n","title":"How can I log SQL statements in Spring Boot?","body":"<p>Add these in the properties. Quoting <a href=\"https://springframework.guru/hibernate-show-sql/\" rel=\"nofollow noreferrer\">Hibernate Show SQL</a>:</p>\n<pre><code># Show SQL statement\nlogging.level.org.hibernate.SQL=debug\n\n# Show SQL values\nlogging.level.org.hibernate.type.descriptor.sql=trace\n</code></pre>\n"},{"comments":[{"owner":{"account_id":24885,"reputation":30828,"user_id":63550,"accept_rate":78,"display_name":"Peter Mortensen"},"score":0,"creation_date":1655592763,"post_id":70285117,"comment_id":128369265,"body_markdown":"What are *&quot;stdout SQL queries&quot;*? *&quot;standard out SQL queries&quot;*? Can you elaborate? Or do you mean *&quot;standard SQL queries&quot;*?","body":"What are <i>&quot;stdout SQL queries&quot;</i>? <i>&quot;standard out SQL queries&quot;</i>? Can you elaborate? Or do you mean <i>&quot;standard SQL queries&quot;</i>?"},{"owner":{"account_id":23595282,"reputation":151,"user_id":17632474,"display_name":"Mohit Kaushal"},"score":0,"creation_date":1657170696,"post_id":70285117,"comment_id":128747708,"body_markdown":"By stdout queries, I mean to say that the queries which are further generated by JPA that are going to run over our DB can be logged over console or log files.","body":"By stdout queries, I mean to say that the queries which are further generated by JPA that are going to run over our DB can be logged over console or log files."}],"tags":[],"owner":{"account_id":23595282,"reputation":151,"user_id":17632474,"display_name":"Mohit Kaushal"},"comment_count":2,"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1639030569,"creation_date":1639027771,"answer_id":70285117,"question_id":30118683,"body_markdown":"You can simply add the below lines in application.properties for stdout SQL queries:\r\n```\r\nspring.jpa.properties.hibernate.show_sql=true\r\n```","title":"How can I log SQL statements in Spring Boot?","body":"<p>You can simply add the below lines in application.properties for stdout SQL queries:</p>\n<pre><code>spring.jpa.properties.hibernate.show_sql=true\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2714004,"reputation":1472,"user_id":2341765,"accept_rate":20,"display_name":"Shafiul"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1655592813,"creation_date":1643393716,"answer_id":70898399,"question_id":30118683,"body_markdown":"If you are using JdbcTemplate, add the below in `application.properties` file to log SQL and parameter values.\r\n\r\n    logging.level.org.springframework.jdbc.core.JdbcTemplate=DEBUG\r\n    logging.level.org.springframework.jdbc.core.StatementCreatorUtils=TRACE\r\n\r\n\r\n\r\n","title":"How can I log SQL statements in Spring Boot?","body":"<p>If you are using JdbcTemplate, add the below in <code>application.properties</code> file to log SQL and parameter values.</p>\n<pre><code>logging.level.org.springframework.jdbc.core.JdbcTemplate=DEBUG\nlogging.level.org.springframework.jdbc.core.StatementCreatorUtils=TRACE\n</code></pre>\n"},{"comments":[{"owner":{"account_id":1482404,"reputation":952,"user_id":1391454,"accept_rate":43,"display_name":"Mubasher"},"score":0,"creation_date":1680514363,"post_id":72797383,"comment_id":133905518,"body_markdown":"This standard approach only works for console log.","body":"This standard approach only works for console log."}],"tags":[],"owner":{"account_id":23595282,"reputation":151,"user_id":17632474,"display_name":"Mohit Kaushal"},"comment_count":1,"down_vote_count":0,"up_vote_count":9,"is_accepted":false,"score":9,"last_activity_date":1656487636,"creation_date":1656487636,"answer_id":72797383,"question_id":30118683,"body_markdown":"We can log SQL statements using two approaches in Spring boot:\r\n1: using logger\r\n2: standard approach\r\n\r\n----------\r\n**For logger**\r\nYou should add this line to application.properties file:\r\n```\r\nlogging.level.org.hibernate.SQL=DEBUG\r\n```\r\n----------\r\n**Standard Approach**\r\nYou should add these lines in application.properties file:\r\n```\r\nspring.jpa.show-sql=true\r\nspring.jpa.properties.hibernate.format_sql=true\r\n```","title":"How can I log SQL statements in Spring Boot?","body":"<p>We can log SQL statements using two approaches in Spring boot:\n1: using logger\n2: standard approach</p>\n<hr />\n<p><strong>For logger</strong>\nYou should add this line to application.properties file:</p>\n<pre><code>logging.level.org.hibernate.SQL=DEBUG\n</code></pre>\n<hr />\n<p><strong>Standard Approach</strong>\nYou should add these lines in application.properties file:</p>\n<pre><code>spring.jpa.show-sql=true\nspring.jpa.properties.hibernate.format_sql=true\n</code></pre>\n"},{"comments":[{"owner":{"account_id":14388491,"reputation":318,"user_id":10393763,"display_name":"Nathan Karasch"},"score":1,"creation_date":1674749015,"post_id":74403667,"comment_id":132784245,"body_markdown":"I verified this for Spring Boot 3.0.0, which uses hibernate 6.1.5. Though, for me, I used `logging.level.org.hibernate.SQL=DEBUG` and `logging.level.org.hibernate.orm.jdbc.bind=TRACE`.","body":"I verified this for Spring Boot 3.0.0, which uses hibernate 6.1.5. Though, for me, I used <code>logging.level.org.hibernate.SQL=DEBUG</code> and <code>logging.level.org.hibernate.orm.jdbc.bind=TRACE</code>."}],"tags":[],"owner":{"account_id":208183,"reputation":7392,"user_id":458509,"accept_rate":71,"display_name":"storm_buster"},"comment_count":1,"down_vote_count":0,"up_vote_count":12,"is_accepted":false,"score":12,"last_activity_date":1668175530,"creation_date":1668175530,"answer_id":74403667,"question_id":30118683,"body_markdown":"For hibernate 6:\r\nit is:\r\n\r\n    spring.jpa.properties.hibernate.show_sql=true\r\n    logging.level.org.hibernate.orm.jdbc.bind = trace","title":"How can I log SQL statements in Spring Boot?","body":"<p>For hibernate 6:\nit is:</p>\n<pre><code>spring.jpa.properties.hibernate.show_sql=true\nlogging.level.org.hibernate.orm.jdbc.bind = trace\n</code></pre>\n"},{"comments":[{"owner":{"account_id":2043023,"reputation":6193,"user_id":3971911,"display_name":"dashtinejad"},"score":1,"creation_date":1695426586,"post_id":75824296,"comment_id":136027674,"body_markdown":"I can confirm it works with SpringBoot 3!","body":"I can confirm it works with SpringBoot 3!"}],"tags":[],"owner":{"account_id":15153969,"reputation":394,"user_id":10935450,"display_name":"Muhammed_G"},"comment_count":1,"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1679581670,"creation_date":1679581670,"answer_id":75824296,"question_id":30118683,"body_markdown":"I was able to solve that problem by adding these variables lines in **application.properties** file:\r\n\r\n    logging.level.org.hibernate.SQL=DEBUG\r\n    logging.level.org.hibernate.orm.jdbc.bind=TRACE\r\n    spring.jpa.properties.hibernate.format_sql=true\r\n\r\nThat made me able to see debugging SQL queries (in formatted shape) and the passed variables (parameters) values.\r\n\r\nAnd my log output was like this: \r\n\r\n    17:21:45.965 [http-nio-7001-exec-5] DEBUG org.hibernate.SQL - \r\n        select\r\n            a1_0.action_id,\r\n            a1_0.action_nr,\r\n            a1_0.app_version\r\n        from\r\n            action a1_0 \r\n        where\r\n            a1_0.guid=? limit ?\r\n    17:21:45.965 [http-nio-7001-exec-5] TRACE org.hibernate.orm.jdbc.bind - binding parameter [1] as [VARCHAR] - [60154cd5-3f51-4c45-9c65-2af724c5c693]\r\n    17:21:45.965 [http-nio-7001-exec-5] TRACE org.hibernate.orm.jdbc.bind - binding parameter [2] as [INTEGER] - [1]","title":"How can I log SQL statements in Spring Boot?","body":"<p>I was able to solve that problem by adding these variables lines in <strong>application.properties</strong> file:</p>\n<pre><code>logging.level.org.hibernate.SQL=DEBUG\nlogging.level.org.hibernate.orm.jdbc.bind=TRACE\nspring.jpa.properties.hibernate.format_sql=true\n</code></pre>\n<p>That made me able to see debugging SQL queries (in formatted shape) and the passed variables (parameters) values.</p>\n<p>And my log output was like this:</p>\n<pre><code>17:21:45.965 [http-nio-7001-exec-5] DEBUG org.hibernate.SQL - \n    select\n        a1_0.action_id,\n        a1_0.action_nr,\n        a1_0.app_version\n    from\n        action a1_0 \n    where\n        a1_0.guid=? limit ?\n17:21:45.965 [http-nio-7001-exec-5] TRACE org.hibernate.orm.jdbc.bind - binding parameter [1] as [VARCHAR] - [60154cd5-3f51-4c45-9c65-2af724c5c693]\n17:21:45.965 [http-nio-7001-exec-5] TRACE org.hibernate.orm.jdbc.bind - binding parameter [2] as [INTEGER] - [1]\n</code></pre>\n"}],"owner":{"account_id":23734,"reputation":20692,"user_id":59704,"accept_rate":92,"display_name":"Oleg Pavliv"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":645403,"favorite_count":0,"down_vote_count":2,"up_vote_count":527,"accepted_answer_id":31249985,"answer_count":24,"score":525,"last_activity_date":1695197996,"creation_date":1431071748,"question_id":30118683,"body_markdown":"I want to log SQL statements to a file.\r\n\r\nI have the following properties in `application.properties`:\r\n\r\n```lang-none\r\nspring.datasource.url=...\r\nspring.datasource.username=user\r\nspring.datasource.password=1234\r\nspring.datasource.driver-class-name=net.sourceforge.jtds.jdbc.Driver\r\n\r\nspring.jpa.show-sql=true\r\nspring.jpa.properties.hibernate.format_sql=true\r\n\r\nsecurity.ignored=true\r\nsecurity.basic.enabled=false\r\n\r\nlogging.level.org.springframework.web=INFO\r\nlogging.level.org.hibernate=INFO\r\nlogging.file=c:/temp/my-log/app.log\r\n```\r\n\r\nWhen I run my application,\r\n\r\n```lang-none\r\ncmd&gt; mvn spring-boot:run\r\n```\r\n\r\nI can see SQL statements in the console, but they don&#39;t appear in *app.log*. The file contains only basic logs from Spring.\r\n\r\nWhat should I do to see SQL statements in the log file?\r\n","title":"How can I log SQL statements in Spring Boot?","body":"<p>I want to log SQL statements to a file.</p>\n<p>I have the following properties in <code>application.properties</code>:</p>\n<pre class=\"lang-none prettyprint-override\"><code>spring.datasource.url=...\nspring.datasource.username=user\nspring.datasource.password=1234\nspring.datasource.driver-class-name=net.sourceforge.jtds.jdbc.Driver\n\nspring.jpa.show-sql=true\nspring.jpa.properties.hibernate.format_sql=true\n\nsecurity.ignored=true\nsecurity.basic.enabled=false\n\nlogging.level.org.springframework.web=INFO\nlogging.level.org.hibernate=INFO\nlogging.file=c:/temp/my-log/app.log\n</code></pre>\n<p>When I run my application,</p>\n<pre class=\"lang-none prettyprint-override\"><code>cmd&gt; mvn spring-boot:run\n</code></pre>\n<p>I can see SQL statements in the console, but they don't appear in <em>app.log</em>. The file contains only basic logs from Spring.</p>\n<p>What should I do to see SQL statements in the log file?</p>\n"},{"tags":["java","cassandra","ttl","astyanax"],"comments":[{"owner":{"account_id":5357170,"reputation":14233,"user_id":4269535,"display_name":"Erick Ramirez"},"score":0,"creation_date":1695196112,"post_id":77140283,"comment_id":135990138,"body_markdown":"We need additional info to be able to answer. Please update your original question with (1) the table schema, and (2) the Cassandra version. Cheers!","body":"We need additional info to be able to answer. Please update your original question with (1) the table schema, and (2) the Cassandra version. Cheers!"},{"owner":{"account_id":3999781,"reputation":55,"user_id":3296104,"display_name":"Lucifer893"},"score":0,"creation_date":1695198004,"post_id":77140283,"comment_id":135990531,"body_markdown":"Updated, thank you.","body":"Updated, thank you."}],"owner":{"account_id":3999781,"reputation":55,"user_id":3296104,"display_name":"Lucifer893"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":25,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1695197965,"creation_date":1695195526,"question_id":77140283,"body_markdown":"I am writing data into a Cassandra cluster using Astyanax like so:\r\n\r\n    private void writeToBatch(Collection&lt;Program&gt; programBatch, MutationBatch batch) {\r\n    \tColumnFamily&lt;UUID, String&gt; programsCF = keyspaceProvider.getColumnFamily(PROGRAMS_COLUMN_FAMILY);\r\n    \tprogramBatch.forEach(program -&gt; {\r\n    \t\tbatch.withRow(programsCF, program.getProgramId())\r\n    \t\t\t\t.putColumn(COLUMN_NAME_TITLE, program.getTitle())\r\n    \t\t\t\t.putColumn(COLUMN_NAME_LANGUAGE, program.getLanguage().getShortCode())\r\n    \t\t\t\t.putColumn(COLUMN_NAME_COUNTRY, program.getCountry().getCode())\r\n    \t\t\t\t.putColumn(COLUMN_NAME_START, program.getStart())\r\n    \t\t\t\t.putColumn(COLUMN_NAME_STOP, program.getStop())\r\n    \t\t\t\t.putColumn(COLUMN_NAME_STREAM, program.getStream());\r\n    \t});\r\n    }\r\n    ...\r\n    batch.execute();\r\n\r\nTable schema:\r\n\r\n    CREATE TABLE &quot;RS&quot;.&quot;Programs&quot; (\r\n        key uuid,\r\n        column1 text,\r\n        value blob,\r\n        PRIMARY KEY (key, column1)\r\n    ) WITH COMPACT STORAGE\r\n        AND CLUSTERING ORDER BY (column1 ASC)\r\n        AND bloom_filter_fp_chance = 0.01\r\n        AND caching = {&#39;keys&#39;: &#39;ALL&#39;, &#39;rows_per_partition&#39;: &#39;NONE&#39;}\r\n        AND comment = &#39;&#39;\r\n        AND compaction = {&#39;class&#39;: &#39;org.apache.cassandra.db.compaction.SizeTieredCompactionStrategy&#39;, &#39;max_threshold&#39;: &#39;32&#39;, &#39;min_threshold&#39;: &#39;4&#39;}\r\n        AND compression = {&#39;chunk_length_in_kb&#39;: &#39;64&#39;, &#39;class&#39;: &#39;org.apache.cassandra.io.compress.LZ4Compressor&#39;}\r\n        AND crc_check_chance = 1.0\r\n        AND dclocal_read_repair_chance = 0.1\r\n        AND default_time_to_live = 2592000\r\n        AND gc_grace_seconds = 864000\r\n        AND max_index_interval = 2048\r\n        AND memtable_flush_period_in_ms = 0\r\n        AND min_index_interval = 128\r\n        AND read_repair_chance = 0.0\r\n        AND speculative_retry = &#39;NONE&#39;;\r\n\r\nVersion: [cqlsh 5.0.1 | Cassandra 3.0.9 | CQL spec 3.4.0 | Native protocol v4]\r\n\r\nThe table that I write into has a `default_time_to_live` of 30 days, but the data that is being written in there seems to have TTL `null` and is never deleted. I was under the assumption that if I don&#39;t specify a TTL in the write, the default one of the table will be used?","title":"Does Astyanax write use &quot;default_time_to_live&quot;?","body":"<p>I am writing data into a Cassandra cluster using Astyanax like so:</p>\n<pre><code>private void writeToBatch(Collection&lt;Program&gt; programBatch, MutationBatch batch) {\n    ColumnFamily&lt;UUID, String&gt; programsCF = keyspaceProvider.getColumnFamily(PROGRAMS_COLUMN_FAMILY);\n    programBatch.forEach(program -&gt; {\n        batch.withRow(programsCF, program.getProgramId())\n                .putColumn(COLUMN_NAME_TITLE, program.getTitle())\n                .putColumn(COLUMN_NAME_LANGUAGE, program.getLanguage().getShortCode())\n                .putColumn(COLUMN_NAME_COUNTRY, program.getCountry().getCode())\n                .putColumn(COLUMN_NAME_START, program.getStart())\n                .putColumn(COLUMN_NAME_STOP, program.getStop())\n                .putColumn(COLUMN_NAME_STREAM, program.getStream());\n    });\n}\n...\nbatch.execute();\n</code></pre>\n<p>Table schema:</p>\n<pre><code>CREATE TABLE &quot;RS&quot;.&quot;Programs&quot; (\n    key uuid,\n    column1 text,\n    value blob,\n    PRIMARY KEY (key, column1)\n) WITH COMPACT STORAGE\n    AND CLUSTERING ORDER BY (column1 ASC)\n    AND bloom_filter_fp_chance = 0.01\n    AND caching = {'keys': 'ALL', 'rows_per_partition': 'NONE'}\n    AND comment = ''\n    AND compaction = {'class': 'org.apache.cassandra.db.compaction.SizeTieredCompactionStrategy', 'max_threshold': '32', 'min_threshold': '4'}\n    AND compression = {'chunk_length_in_kb': '64', 'class': 'org.apache.cassandra.io.compress.LZ4Compressor'}\n    AND crc_check_chance = 1.0\n    AND dclocal_read_repair_chance = 0.1\n    AND default_time_to_live = 2592000\n    AND gc_grace_seconds = 864000\n    AND max_index_interval = 2048\n    AND memtable_flush_period_in_ms = 0\n    AND min_index_interval = 128\n    AND read_repair_chance = 0.0\n    AND speculative_retry = 'NONE';\n</code></pre>\n<p>Version: [cqlsh 5.0.1 | Cassandra 3.0.9 | CQL spec 3.4.0 | Native protocol v4]</p>\n<p>The table that I write into has a <code>default_time_to_live</code> of 30 days, but the data that is being written in there seems to have TTL <code>null</code> and is never deleted. I was under the assumption that if I don't specify a TTL in the write, the default one of the table will be used?</p>\n"},{"tags":["java","spring","spring-boot","annotations","lombok"],"comments":[{"owner":{"account_id":960307,"reputation":107861,"user_id":984823,"display_name":"Joop Eggen"},"score":2,"creation_date":1578070154,"post_id":59582135,"comment_id":105330843,"body_markdown":"It is more the order of _annotation scanners_ that might effect things; every scanner looking for its own annotations. The bizar: 5 annotations and then `{}`.","body":"It is more the order of <i>annotation scanners</i> that might effect things; every scanner looking for its own annotations. The bizar: 5 annotations and then <code>{}</code>."},{"owner":{"account_id":6794864,"reputation":1053,"user_id":5230585,"display_name":"Katy"},"score":0,"creation_date":1578070414,"post_id":59582135,"comment_id":105330964,"body_markdown":"@JoopEggen, thank you for comment. \nThe class contains several lines which I have removed from the question. (Since we are focusing on annotation)","body":"@JoopEggen, thank you for comment.  The class contains several lines which I have removed from the question. (Since we are focusing on annotation)"},{"owner":{"account_id":6780825,"reputation":155680,"user_id":5221149,"display_name":"Andreas"},"score":0,"creation_date":1578070804,"post_id":59582135,"comment_id":105331177,"body_markdown":"Since the Java Reflection API used to get annotations of a class doesn&#39;t guarantee any particular order for the returned annotations, the **question is moot**.","body":"Since the Java Reflection API used to get annotations of a class doesn&#39;t guarantee any particular order for the returned annotations, the <b>question is moot</b>."},{"owner":{"account_id":13887193,"reputation":7307,"user_id":10026074,"display_name":"Jan Rieke"},"score":2,"creation_date":1578079347,"post_id":59582135,"comment_id":105334648,"body_markdown":"That is incorrect, Andreas. https://docs.oracle.com/en/java/javase/12/docs/api/java.base/java/lang/reflect/AnnotatedElement.html explains how the order is computed.","body":"That is incorrect, Andreas. <a href=\"https://docs.oracle.com/en/java/javase/12/docs/api/java.base/java/lang/reflect/AnnotatedElement.html\" rel=\"nofollow noreferrer\">docs.oracle.com/en/java/javase/12/docs/api/java.base/java/la&zwnj;&#8203;ng/&hellip;</a> explains how the order is computed."}],"answers":[{"comments":[{"owner":{"account_id":6794864,"reputation":1053,"user_id":5230585,"display_name":"Katy"},"score":0,"creation_date":1578070695,"post_id":59582312,"comment_id":105331124,"body_markdown":"I appreciate your suggestion for regrouping annotations. it will enhance code readablility.","body":"I appreciate your suggestion for regrouping annotations. it will enhance code readablility."}],"tags":[],"owner":{"account_id":5281408,"reputation":18797,"user_id":4216641,"display_name":"Turing85"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1578071686,"creation_date":1578070238,"answer_id":59582312,"question_id":59582135,"body_markdown":"&quot;*Is there any impacts or benefits from a specific order ?*&quot; - Not as far as I know of, no. As was pointed out by Joop Eggen, the order of annotation processors or annotation scanners it the important part.\r\n \r\n--- \r\n&quot;*What&#39;s the recommended order of annotations ?*&quot; - If one is able to identify a pattern of annotations commonly used together, I would recommend to group them in a new annotation and use the new annotation instead. One can achieve this by creating a new `publice @interface MyAnnotation` and annotate this new annotation with the annotations one wants to group. See [this answer][Answer] for an example.\r\n\r\n[Answer]: https://stackoverflow.com/a/18585833/4216641","title":"Does annotations order matter?","body":"<p>\"<em>Is there any impacts or benefits from a specific order ?</em>\" - Not as far as I know of, no. As was pointed out by Joop Eggen, the order of annotation processors or annotation scanners it the important part.</p>\n\n<hr>\n\n<p>\"<em>What's the recommended order of annotations ?</em>\" - If one is able to identify a pattern of annotations commonly used together, I would recommend to group them in a new annotation and use the new annotation instead. One can achieve this by creating a new <code>publice @interface MyAnnotation</code> and annotate this new annotation with the annotations one wants to group. See <a href=\"https://stackoverflow.com/a/18585833/4216641\">this answer</a> for an example.</p>\n"},{"comments":[{"owner":{"account_id":6794864,"reputation":1053,"user_id":5230585,"display_name":"Katy"},"score":0,"creation_date":1578082481,"post_id":59582349,"comment_id":105335994,"body_markdown":"Thank you for your complete answer.","body":"Thank you for your complete answer."}],"tags":[],"owner":{"account_id":1663234,"reputation":138406,"user_id":1531124,"accept_rate":96,"display_name":"GhostCat"},"comment_count":1,"down_vote_count":0,"up_vote_count":4,"is_accepted":true,"score":4,"last_activity_date":1578080466,"creation_date":1578070385,"answer_id":59582349,"question_id":59582135,"body_markdown":"&gt; Is there any impact or benefit from a specific order ?\r\n\r\nNot that I am aware of. Remember how annotations work: some piece of code &quot;looks&quot; at your code, and checks for the presence of an annotation. Meaning: it &quot;gets&quot; an array of annotations, and checks whether the one it cares about is in that array. So order *should* be irrelevant. \r\n\r\nOf course, when we talk about annotations that have compile-time effects, the story might be different. Such annotations have effects on the compilation process itself, so worst case, order of annotations changes the compilation process. \r\n\r\n&gt; What&#39;s the recommended order of annotations?\r\n\r\nThe one that works for you. Meaning: sit down with your team, and ask yourself &quot;do we prefer a specific order&quot;. If so, write that down, and have people follow that rule.\r\n\r\nReal world example: we use annotations to &quot;describe&quot; the &quot;properties&quot; of our &quot;objects&quot;. At some point, we saw that we often forgot annotation X when adding new properties. Because properties were written down in random order, thus hard to process manually (and we have plenty of different annotations, sometimes 5 to 10 on a single property). \r\n\r\nOur &quot;solution&quot;: annotations must be sorted alphabetically (when used for such &quot;property&quot; definitions). And we even have a unit test that checks for that sorting order. Since then: all &quot;property&quot; definitions follow the same rule. And that works nicely for us, because everybody comes with the same expectation and mindset.\r\n","title":"Does annotations order matter?","body":"<blockquote>\n  <p>Is there any impact or benefit from a specific order ?</p>\n</blockquote>\n\n<p>Not that I am aware of. Remember how annotations work: some piece of code \"looks\" at your code, and checks for the presence of an annotation. Meaning: it \"gets\" an array of annotations, and checks whether the one it cares about is in that array. So order <em>should</em> be irrelevant. </p>\n\n<p>Of course, when we talk about annotations that have compile-time effects, the story might be different. Such annotations have effects on the compilation process itself, so worst case, order of annotations changes the compilation process. </p>\n\n<blockquote>\n  <p>What's the recommended order of annotations?</p>\n</blockquote>\n\n<p>The one that works for you. Meaning: sit down with your team, and ask yourself \"do we prefer a specific order\". If so, write that down, and have people follow that rule.</p>\n\n<p>Real world example: we use annotations to \"describe\" the \"properties\" of our \"objects\". At some point, we saw that we often forgot annotation X when adding new properties. Because properties were written down in random order, thus hard to process manually (and we have plenty of different annotations, sometimes 5 to 10 on a single property). </p>\n\n<p>Our \"solution\": annotations must be sorted alphabetically (when used for such \"property\" definitions). And we even have a unit test that checks for that sorting order. Since then: all \"property\" definitions follow the same rule. And that works nicely for us, because everybody comes with the same expectation and mindset.</p>\n"},{"comments":[{"owner":{"account_id":6794864,"reputation":1053,"user_id":5230585,"display_name":"Katy"},"score":0,"creation_date":1578085367,"post_id":59584382,"comment_id":105337068,"body_markdown":"Thank you for answer. I was looking for a documentation explaining how Java manages annotations but are you sure that all frameworks reuse the oracle implementation? Because from my understanding, this handles Java specific annotations  (e.g. Inject, Documented etc..)","body":"Thank you for answer. I was looking for a documentation explaining how Java manages annotations but are you sure that all frameworks reuse the oracle implementation? Because from my understanding, this handles Java specific annotations  (e.g. Inject, Documented etc..)"},{"owner":{"account_id":13887193,"reputation":7307,"user_id":10026074,"display_name":"Jan Rieke"},"score":1,"creation_date":1578100660,"post_id":59584382,"comment_id":105340517,"body_markdown":"According to the JLS, there is no difference between predefined and user-defined annotations. If you use the Oracle compiler and JVM, you can be sure it will yield to the spec. Of course other JVMs/compilers may behave differently, but that would violate the JLS.","body":"According to the JLS, there is no difference between predefined and user-defined annotations. If you use the Oracle compiler and JVM, you can be sure it will yield to the spec. Of course other JVMs/compilers may behave differently, but that would violate the JLS."}],"tags":[],"owner":{"account_id":13887193,"reputation":7307,"user_id":10026074,"display_name":"Jan Rieke"},"comment_count":2,"down_vote_count":0,"up_vote_count":8,"is_accepted":false,"score":8,"last_activity_date":1578080294,"creation_date":1578080294,"answer_id":59584382,"question_id":59582135,"body_markdown":"In almost all cases the answer is *No, the order has no effect.*\r\n\r\nBut in fact it is a bit more complicated.\r\n\r\n 1. Considering annotations that are processed by annotation processors, it was already stated in the other answers that it more depends on the order in which the processors run. However, the processors have access to the AST, which allows them to determine the order of annotations in the source code. So theoretically annotation processors can make the generated code dependent on the order, but I don&#39;t know any example for this and would call this bad practice.\r\n\r\n 2. When getting the annotation of an element during runtime, you also have access to the order. [The docs][1] have more info on how the order is determined. So again, an implementation could make its behaviour dependent on the order.\r\nAgain I would consider this bad practice. The only exception may be repeatable annotations, where I can think of use cases where this could be reasonable.\r\n\r\nIf there is any dependence on the order of annotations, which is very unlikely, this should be made very clear in the JavaDoc of the annotation.\r\n\r\nSo typically you are free to order them as you like. I don&#39;t know of any style guide on the order of annotations, so just make it reasonable for you.\r\n\r\n  [1]: https://docs.oracle.com/en/java/javase/12/docs/api/java.base/java/lang/reflect/AnnotatedElement.html","title":"Does annotations order matter?","body":"<p>In almost all cases the answer is <em>No, the order has no effect.</em></p>\n\n<p>But in fact it is a bit more complicated.</p>\n\n<ol>\n<li><p>Considering annotations that are processed by annotation processors, it was already stated in the other answers that it more depends on the order in which the processors run. However, the processors have access to the AST, which allows them to determine the order of annotations in the source code. So theoretically annotation processors can make the generated code dependent on the order, but I don't know any example for this and would call this bad practice.</p></li>\n<li><p>When getting the annotation of an element during runtime, you also have access to the order. <a href=\"https://docs.oracle.com/en/java/javase/12/docs/api/java.base/java/lang/reflect/AnnotatedElement.html\" rel=\"noreferrer\">The docs</a> have more info on how the order is determined. So again, an implementation could make its behaviour dependent on the order.\nAgain I would consider this bad practice. The only exception may be repeatable annotations, where I can think of use cases where this could be reasonable.</p></li>\n</ol>\n\n<p>If there is any dependence on the order of annotations, which is very unlikely, this should be made very clear in the JavaDoc of the annotation.</p>\n\n<p>So typically you are free to order them as you like. I don't know of any style guide on the order of annotations, so just make it reasonable for you.</p>\n"},{"tags":[],"owner":{"account_id":21739251,"reputation":179,"user_id":16046846,"display_name":"Konstantinos K."},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695197451,"creation_date":1695197451,"answer_id":77140505,"question_id":59582135,"body_markdown":"Always it depends.\r\n\r\nImagine you have an annotation that initializes a class with specific configurations labeled as &#39;a,&#39; &#39;b,&#39; and &#39;c.&#39; If your goal is to create another annotation that injects the previously configured class with additional settings, such as &#39;d,&#39; the sequence in which you apply these annotations becomes significant.\r\n","title":"Does annotations order matter?","body":"<p>Always it depends.</p>\n<p>Imagine you have an annotation that initializes a class with specific configurations labeled as 'a,' 'b,' and 'c.' If your goal is to create another annotation that injects the previously configured class with additional settings, such as 'd,' the sequence in which you apply these annotations becomes significant.</p>\n"}],"owner":{"account_id":6794864,"reputation":1053,"user_id":5230585,"display_name":"Katy"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":6850,"favorite_count":0,"down_vote_count":0,"up_vote_count":13,"accepted_answer_id":59582349,"answer_count":4,"score":13,"last_activity_date":1695197451,"creation_date":1578069457,"question_id":59582135,"body_markdown":"As you know, the annotation driven programming is more and more incorporated in the majority of frameworks that we are using nowadays (i.e. Spring, Lombok etc).\r\n\r\nBesides, we need sometimes to create our custom annotation. (i.g. Logging enter/exit traces for all public methods of a given class using an aspect - `@LogAroundMethods`)\r\n\r\nHence, a given class can hold plenty of annotations.\r\n\r\n    @LogAroundMethod // My custom annotation\r\n    @Slf4j // Lombok annotation\r\n    @Component // Spring annotation\r\n    public class ClientNotificationProxy {\r\n    //Code\r\n    }\r\n\r\n    @LogAroundMethod // My custom annotation\r\n    @Configuration // Spring annotation\r\n    @ConditionalOnClass(NotificationSender.class) // Spring annotation\r\n    @EnableConfigurationProperties(MessagingProperties.class) // Spring annotation\r\n    @Import({ MongoConfiguration.class, SpringRetryConfiguration.class }) // Spring annotation\r\n    public class StarterClientAutoConfiguration {\r\n    // Code \r\n    }\r\n\r\n - What&#39;s the recommended order of annotations ?  \r\n - Is there any impact or benefit from a specific order ?\r\n\r\n\r\n\r\n\r\n","title":"Does annotations order matter?","body":"<p>As you know, the annotation driven programming is more and more incorporated in the majority of frameworks that we are using nowadays (i.e. Spring, Lombok etc).</p>\n\n<p>Besides, we need sometimes to create our custom annotation. (i.g. Logging enter/exit traces for all public methods of a given class using an aspect - <code>@LogAroundMethods</code>)</p>\n\n<p>Hence, a given class can hold plenty of annotations.</p>\n\n<pre><code>@LogAroundMethod // My custom annotation\n@Slf4j // Lombok annotation\n@Component // Spring annotation\npublic class ClientNotificationProxy {\n//Code\n}\n\n@LogAroundMethod // My custom annotation\n@Configuration // Spring annotation\n@ConditionalOnClass(NotificationSender.class) // Spring annotation\n@EnableConfigurationProperties(MessagingProperties.class) // Spring annotation\n@Import({ MongoConfiguration.class, SpringRetryConfiguration.class }) // Spring annotation\npublic class StarterClientAutoConfiguration {\n// Code \n}\n</code></pre>\n\n<ul>\n<li>What's the recommended order of annotations ?  </li>\n<li>Is there any impact or benefit from a specific order ?</li>\n</ul>\n"},{"tags":["java","unit-testing","docker","gradle","plugins"],"comments":[{"owner":{"account_id":5281408,"reputation":18797,"user_id":4216641,"display_name":"Turing85"},"score":0,"creation_date":1527540601,"post_id":50573242,"comment_id":88156097,"body_markdown":"The [Java Plugin User Guide](https://docs.gradle.org/current/userguide/java_plugin.html) has it covered.","body":"The <a href=\"https://docs.gradle.org/current/userguide/java_plugin.html\" rel=\"nofollow noreferrer\">Java Plugin User Guide</a> has it covered."},{"owner":{"account_id":49789,"reputation":1549,"user_id":148397,"accept_rate":36,"display_name":"Gadi"},"score":0,"creation_date":1527541404,"post_id":50573242,"comment_id":88156339,"body_markdown":"Thanks @Turing85 but I already have a gradle script that can do this, I would like to have this in java plugin code so I don&#39;t have to configre this on each project.","body":"Thanks @Turing85 but I already have a gradle script that can do this, I would like to have this in java plugin code so I don&#39;t have to configre this on each project."},{"owner":{"account_id":5281408,"reputation":18797,"user_id":4216641,"display_name":"Turing85"},"score":0,"creation_date":1527541695,"post_id":50573242,"comment_id":88156416,"body_markdown":"Something like [this](https://github.com/pedjak/gradle-dockerized-test-plugin)?","body":"Something like <a href=\"https://github.com/pedjak/gradle-dockerized-test-plugin\" rel=\"nofollow noreferrer\">this</a>?"},{"owner":{"account_id":49789,"reputation":1549,"user_id":148397,"accept_rate":36,"display_name":"Gadi"},"score":1,"creation_date":1527542139,"post_id":50573242,"comment_id":88156537,"body_markdown":"not sure, I just need to set the sourcesets correctly and add some dependencies. the rest of the docker stuff is done in the test class code not in the plugin. make sense?","body":"not sure, I just need to set the sourcesets correctly and add some dependencies. the rest of the docker stuff is done in the test class code not in the plugin. make sense?"},{"owner":{"account_id":5281408,"reputation":18797,"user_id":4216641,"display_name":"Turing85"},"score":0,"creation_date":1527542330,"post_id":50573242,"comment_id":88156588,"body_markdown":"In this  case, please re-check the link I posted. There is an explicit example for creating an integration test source set (under &quot;Defining new source sets&quot;).","body":"In this  case, please re-check the link I posted. There is an explicit example for creating an integration test source set (under &quot;Defining new source sets&quot;)."},{"owner":{"account_id":49789,"reputation":1549,"user_id":148397,"accept_rate":36,"display_name":"Gadi"},"score":0,"creation_date":1527575640,"post_id":50573242,"comment_id":88164507,"body_markdown":"that is exactly what I do, see above. doesn&#39;t work :(","body":"that is exactly what I do, see above. doesn&#39;t work :("},{"owner":{"account_id":9291622,"reputation":11361,"user_id":6899896,"display_name":"M.Ricciuti"},"score":1,"creation_date":1597595930,"post_id":50573242,"comment_id":112178336,"body_markdown":"I used the following post to build my own integrationTest plugin for my custom projects: https://www.petrikainulainen.net/programming/gradle/getting-started-with-gradle-integration-testing/","body":"I used the following post to build my own integrationTest plugin for my custom projects: <a href=\"https://www.petrikainulainen.net/programming/gradle/getting-started-with-gradle-integration-testing/\" rel=\"nofollow noreferrer\">petrikainulainen.net/programming/gradle/&hellip;</a>"}],"answers":[{"tags":[],"owner":{"account_id":312160,"reputation":12370,"user_id":626084,"accept_rate":71,"display_name":"Zasz"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1598118695,"creation_date":1598118380,"answer_id":63539288,"question_id":50573242,"body_markdown":"I had added a new sourceSet with groovy - I hope it can act as reference for the java equivalent you are trying. Consider writing the plugin itself in groovy.\r\n\r\n    class CustomPlugin implements Plugin&lt;Project&gt; {\r\n      @Override\r\n      void apply(final Project project) {   \r\n            // add a source set\r\n            File sourcesDir = project.file(&quot;/some/path&quot;)    \r\n            project.sourceSets {\r\n              myNewEndToEndTest {\r\n                java.srcDirs += [sourcesDir]\r\n              }\r\n            }\r\n    \r\n            project.configurations.create(&#39;yourNewConfig&#39;)\r\n            project.dependencies {\r\n                // Add some dependencies here that your e2e test run needs\r\n                // Example: yourNewConfig &quot;org.junit:junit-core:5.0&quot;\r\n            }              \r\n            // you can also use the project object to create tasks, taskDependencies, configurations etc\r\n      }\r\n    \r\n    }\r\n\r\n","title":"how to add sourceset in gradle java custom plugin","body":"<p>I had added a new sourceSet with groovy - I hope it can act as reference for the java equivalent you are trying. Consider writing the plugin itself in groovy.</p>\n<pre><code>class CustomPlugin implements Plugin&lt;Project&gt; {\n  @Override\n  void apply(final Project project) {   \n        // add a source set\n        File sourcesDir = project.file(&quot;/some/path&quot;)    \n        project.sourceSets {\n          myNewEndToEndTest {\n            java.srcDirs += [sourcesDir]\n          }\n        }\n\n        project.configurations.create('yourNewConfig')\n        project.dependencies {\n            // Add some dependencies here that your e2e test run needs\n            // Example: yourNewConfig &quot;org.junit:junit-core:5.0&quot;\n        }              \n        // you can also use the project object to create tasks, taskDependencies, configurations etc\n  }\n\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":300068,"reputation":2069,"user_id":1211920,"accept_rate":56,"display_name":"Igor"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695197383,"creation_date":1695197383,"answer_id":77140496,"question_id":50573242,"body_markdown":"Use [The JVM Test Suite](https://docs.gradle.org/current/userguide/jvm_test_suite_plugin.html) official Gradle plugin:\r\n\r\n```\r\nplugins {\r\n    java\r\n    `jvm-test-suite`\r\n}\r\n\r\ntesting {\r\n    suites {\r\n        dependencies {\r\n            // add deps for all test source sets\r\n        }\r\n\r\n        register(&quot;integrationTest&quot;, JvmTestSuite::class) {\r\n            dependencies {\r\n                // add for new test source set\r\n            }\r\n        }\r\n    }\r\n}\r\n```","title":"how to add sourceset in gradle java custom plugin","body":"<p>Use <a href=\"https://docs.gradle.org/current/userguide/jvm_test_suite_plugin.html\" rel=\"nofollow noreferrer\">The JVM Test Suite</a> official Gradle plugin:</p>\n<pre><code>plugins {\n    java\n    `jvm-test-suite`\n}\n\ntesting {\n    suites {\n        dependencies {\n            // add deps for all test source sets\n        }\n\n        register(&quot;integrationTest&quot;, JvmTestSuite::class) {\n            dependencies {\n                // add for new test source set\n            }\n        }\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":49789,"reputation":1549,"user_id":148397,"accept_rate":36,"display_name":"Gadi"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":4411,"favorite_count":0,"down_vote_count":0,"up_vote_count":6,"answer_count":2,"score":6,"last_activity_date":1695197383,"creation_date":1527540299,"question_id":50573242,"body_markdown":"using gradle 4.7\r\n\r\nI would like to add new sourceset for test integration classes. Seperated from the main test sourceset it will have some other dependencies and would have seperate task to run the tests.\r\n\r\nCan it be done using a custom java gradle plugin?\r\n\r\nHere is the code and the project using it.\r\n\r\nhttps://github.com/gadieichhorn/gradle-java-multimodule/tree/master/buildSrc\r\n\r\nbeacuse these tests use the docker image produced from the build it should only run after the build, not like the normal tests would.\r\n\r\nany sample or contribution will be appreciated.\r\n \r\n\r\n            project.getPlugins().withType(JavaPlugin.class, javaPlugin -&gt; {\r\n    \r\n                JavaPluginConvention javaConvention = project.getConvention().getPlugin(JavaPluginConvention.class);\r\n    \r\n                SourceSet main = javaConvention.getSourceSets().getByName(SourceSet.MAIN_SOURCE_SET_NAME);\r\n                SourceSet test = javaConvention.getSourceSets().getByName(SourceSet.TEST_SOURCE_SET_NAME);\r\n    \r\n                final Configuration integrationImplementation = project.getConfigurations().create(&quot;integrationImplementation&quot;)\r\n                        .setExtendsFrom(Arrays.asList(project.getConfigurations().getByName(&quot;testImplementation&quot;)))\r\n                        .setVisible(false)\r\n                        .setDescription(&quot;Integration Implementation&quot;);\r\n    \r\n                project.getDependencies().add(integrationImplementation.getName(), &quot;org.testcontainers:testcontainers:1.7.1&quot;);\r\n    \r\n                final Configuration integrationRuntimeOnly = project.getConfigurations().create(&quot;integrationRuntimeOnly&quot;)\r\n                        .setExtendsFrom(Arrays.asList(project.getConfigurations().getByName(&quot;testRuntimeOnly&quot;)))\r\n                        .setVisible(false)\r\n                        .setDescription(&quot;Integration Runtime Only &quot;);\r\n    \r\n    //            project.getDependencies().add(integrationRuntimeOnly.getName(), &quot;org.testcontainers:testcontainers:1.7.1&quot;);\r\n    \r\n                final SourceSet integration = javaConvention.getSourceSets().create(&quot;integration&quot;, sourceSet -&gt; {\r\n                    sourceSet.getJava().srcDir(Arrays.asList(&quot;src/integration/java&quot;));\r\n                    sourceSet.getResources().srcDir(&quot;src/integration/resources&quot;);\r\n                    sourceSet.setCompileClasspath(project.files(main.getOutput(), test.getOutput()));\r\n                    sourceSet.setRuntimeClasspath(project.files(main.getOutput(), test.getOutput()));\r\n                    sourceSet.setRuntimeClasspath(sourceSet.getOutput());\r\n                });\r\n    \r\n                project.getTasks().create(&quot;e2e&quot;, Test.class, e2e -&gt; {\r\n                    e2e.setTestClassesDirs(integration.getOutput().getClassesDirs());\r\n                    e2e.setClasspath(integration.getRuntimeClasspath());\r\n                });\r\n    \r\n            });\r\n\r\n","title":"how to add sourceset in gradle java custom plugin","body":"<p>using gradle 4.7</p>\n\n<p>I would like to add new sourceset for test integration classes. Seperated from the main test sourceset it will have some other dependencies and would have seperate task to run the tests.</p>\n\n<p>Can it be done using a custom java gradle plugin?</p>\n\n<p>Here is the code and the project using it.</p>\n\n<p><a href=\"https://github.com/gadieichhorn/gradle-java-multimodule/tree/master/buildSrc\" rel=\"noreferrer\">https://github.com/gadieichhorn/gradle-java-multimodule/tree/master/buildSrc</a></p>\n\n<p>beacuse these tests use the docker image produced from the build it should only run after the build, not like the normal tests would.</p>\n\n<p>any sample or contribution will be appreciated.</p>\n\n<pre><code>        project.getPlugins().withType(JavaPlugin.class, javaPlugin -&gt; {\n\n            JavaPluginConvention javaConvention = project.getConvention().getPlugin(JavaPluginConvention.class);\n\n            SourceSet main = javaConvention.getSourceSets().getByName(SourceSet.MAIN_SOURCE_SET_NAME);\n            SourceSet test = javaConvention.getSourceSets().getByName(SourceSet.TEST_SOURCE_SET_NAME);\n\n            final Configuration integrationImplementation = project.getConfigurations().create(\"integrationImplementation\")\n                    .setExtendsFrom(Arrays.asList(project.getConfigurations().getByName(\"testImplementation\")))\n                    .setVisible(false)\n                    .setDescription(\"Integration Implementation\");\n\n            project.getDependencies().add(integrationImplementation.getName(), \"org.testcontainers:testcontainers:1.7.1\");\n\n            final Configuration integrationRuntimeOnly = project.getConfigurations().create(\"integrationRuntimeOnly\")\n                    .setExtendsFrom(Arrays.asList(project.getConfigurations().getByName(\"testRuntimeOnly\")))\n                    .setVisible(false)\n                    .setDescription(\"Integration Runtime Only \");\n\n//            project.getDependencies().add(integrationRuntimeOnly.getName(), \"org.testcontainers:testcontainers:1.7.1\");\n\n            final SourceSet integration = javaConvention.getSourceSets().create(\"integration\", sourceSet -&gt; {\n                sourceSet.getJava().srcDir(Arrays.asList(\"src/integration/java\"));\n                sourceSet.getResources().srcDir(\"src/integration/resources\");\n                sourceSet.setCompileClasspath(project.files(main.getOutput(), test.getOutput()));\n                sourceSet.setRuntimeClasspath(project.files(main.getOutput(), test.getOutput()));\n                sourceSet.setRuntimeClasspath(sourceSet.getOutput());\n            });\n\n            project.getTasks().create(\"e2e\", Test.class, e2e -&gt; {\n                e2e.setTestClassesDirs(integration.getOutput().getClassesDirs());\n                e2e.setClasspath(integration.getRuntimeClasspath());\n            });\n\n        });\n</code></pre>\n"},{"tags":["java","android","firebase","google-cloud-platform","firebase-storage"],"answers":[{"comments":[{"owner":{"account_id":6819231,"reputation":132861,"user_id":5246885,"accept_rate":78,"display_name":"Alex Mamo"},"score":0,"creation_date":1695276386,"post_id":77140274,"comment_id":136003240,"body_markdown":"Did my answer help? Can I help you with other information?","body":"Did my answer help? Can I help you with other information?"}],"tags":[],"owner":{"account_id":6819231,"reputation":132861,"user_id":5246885,"accept_rate":78,"display_name":"Alex Mamo"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695195441,"creation_date":1695195441,"answer_id":77140274,"question_id":77137665,"body_markdown":"&gt; I can&#39;t get access to the file or &#39;READ_EXTERNAL_STORAGE&#39; by Karumi Dexter. It is working till Sdk-32 but it&#39;s not working on the 33.\r\n\r\nAs it is mentioned on the official page, the [Dexter library][1]:\r\n\r\n&gt; Is no longer under active development.\r\n\r\nAnd this has been happening for 2 years now. So it can work with Sdk-32 but not with Sdk-33 because it isn&#39;t maintained anymore. My recommendation in such cases would be to use your own logic regarding permission as it is mentioned in the [official Android documentation][2]. Please also see that there is a note there regarding the `READ_EXTERNAL_STORAGE` that says:\r\n\r\n&gt; **Starting in API level 33, this permission has no effect.** If your app accesses other apps&#39; media files, request one or more of these permissions instead: [READ_MEDIA_IMAGES][3], [READ_MEDIA_VIDEO][4], [READ_MEDIA_AUDIO][5]. Learn more about the [storage permissions][6] that are associated with media files.\r\n\r\nSo most likely that&#39;s the reason why you get that behavior.\r\n\r\n  [1]: https://github.com/Karumi/Dexter\r\n  [2]: https://developer.android.com/reference/android/Manifest.permission#READ_EXTERNAL_STORAGE\r\n  [3]: https://developer.android.com/reference/android/Manifest.permission#READ_MEDIA_IMAGES\r\n  [4]: https://developer.android.com/reference/android/Manifest.permission#READ_MEDIA_VIDEO\r\n  [5]: https://developer.android.com/reference/android/Manifest.permission#READ_MEDIA_AUDIO\r\n  [6]: https://developer.android.com/training/data-storage/shared/media#storage-permission","title":"I can&#39;t get access to the file or &#39;READ_EXTERNAL_STORAGE&#39; by Karumi Dexter. It is working till Sdk-32 properly but it&#39;s not working on 33","body":"<blockquote>\n<p>I can't get access to the file or 'READ_EXTERNAL_STORAGE' by Karumi Dexter. It is working till Sdk-32 but it's not working on the 33.</p>\n</blockquote>\n<p>As it is mentioned on the official page, the <a href=\"https://github.com/Karumi/Dexter\" rel=\"nofollow noreferrer\">Dexter library</a>:</p>\n<blockquote>\n<p>Is no longer under active development.</p>\n</blockquote>\n<p>And this has been happening for 2 years now. So it can work with Sdk-32 but not with Sdk-33 because it isn't maintained anymore. My recommendation in such cases would be to use your own logic regarding permission as it is mentioned in the <a href=\"https://developer.android.com/reference/android/Manifest.permission#READ_EXTERNAL_STORAGE\" rel=\"nofollow noreferrer\">official Android documentation</a>. Please also see that there is a note there regarding the <code>READ_EXTERNAL_STORAGE</code> that says:</p>\n<blockquote>\n<p><strong>Starting in API level 33, this permission has no effect.</strong> If your app accesses other apps' media files, request one or more of these permissions instead: <a href=\"https://developer.android.com/reference/android/Manifest.permission#READ_MEDIA_IMAGES\" rel=\"nofollow noreferrer\">READ_MEDIA_IMAGES</a>, <a href=\"https://developer.android.com/reference/android/Manifest.permission#READ_MEDIA_VIDEO\" rel=\"nofollow noreferrer\">READ_MEDIA_VIDEO</a>, <a href=\"https://developer.android.com/reference/android/Manifest.permission#READ_MEDIA_AUDIO\" rel=\"nofollow noreferrer\">READ_MEDIA_AUDIO</a>. Learn more about the <a href=\"https://developer.android.com/training/data-storage/shared/media#storage-permission\" rel=\"nofollow noreferrer\">storage permissions</a> that are associated with media files.</p>\n</blockquote>\n<p>So most likely that's the reason why you get that behavior.</p>\n"},{"tags":[],"owner":{"account_id":16768304,"reputation":8503,"user_id":12121419,"display_name":"blackapps"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695197354,"creation_date":1695197354,"answer_id":77140492,"question_id":77137665,"body_markdown":"For using `Intent.ACTION_GET_CONTENT` you have never needed permission `READ_EXTERNAL_STORAGE`.\r\n\r\nFor no Android version.\r\n\r\nSo remove the check and just launch the intent.","title":"I can&#39;t get access to the file or &#39;READ_EXTERNAL_STORAGE&#39; by Karumi Dexter. It is working till Sdk-32 properly but it&#39;s not working on 33","body":"<p>For using <code>Intent.ACTION_GET_CONTENT</code> you have never needed permission <code>READ_EXTERNAL_STORAGE</code>.</p>\n<p>For no Android version.</p>\n<p>So remove the check and just launch the intent.</p>\n"}],"owner":{"account_id":26487773,"reputation":1,"user_id":20126083,"display_name":"MD MEHEDI FAKIR"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":27,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1695197354,"creation_date":1695153959,"question_id":77137665,"body_markdown":"Function for choosing video .   \r\n\r\nprivate void ChooseVideo(){\r\n\r\n        Dexter.withContext(this)\r\n                .withPermission(Manifest.permission.READ_EXTERNAL_STORAGE)\r\n                .withListener(new PermissionListener() {\r\n\r\n                    @Override public void onPermissionGranted(PermissionGrantedResponse response) {\r\n                        Intent intent = new Intent(  );\r\n                        //new line added\r\n                        intent.addCategory(Intent.CATEGORY_OPENABLE);\r\n                        intent.setType( &quot;video/*&quot; );\r\n\r\n                        intent.setAction( Intent.ACTION_GET_CONTENT );\r\n                        startActivityForResult( intent,102 );\r\n                    }\r\n                    @Override public void onPermissionDenied(PermissionDeniedResponse response) {\r\n\r\n                    }\r\n                    @Override public void onPermissionRationaleShouldBeShown(PermissionRequest permission, PermissionToken token) {\r\n                       token.continuePermissionRequest();\r\n                    }\r\n                }).check();\r\n\r\n    }\r\n\r\n\r\n\r\n//on activity result\r\n\r\n    @Override\r\n    protected void onActivityResult(int requestCode, int resultCode, @Nullable Intent data) {\r\n        super.onActivityResult( requestCode, resultCode, data );\r\n        if (requestCode==102 &amp;resultCode==RESULT_OK);\r\n        videoUri=data.getData();\r\n        binding.VideoViewAVA.setVisibility(View.VISIBLE);\r\n        binding.VideoViewAVA.setVideoURI(videoUri);\r\n\r\n        Cursor mCursor =  getApplicationContext().getContentResolver().query( videoUri,null,null,null,null );\r\n        int indexedName =mCursor.getColumnIndex( OpenableColumns.DISPLAY_NAME );\r\n        mCursor.moveToFirst();\r\n        songName = mCursor.getString(indexedName);\r\n        finalSongTitle = songName.replace(&quot;.mp4&quot;,&quot;&quot;)\r\n                                .replace(&quot;.wmv&quot;,&quot;&quot;)\r\n                                .replace(&quot;.webm&quot;,&quot;&quot;)\r\n                                .replace(&quot;.mkv&quot;,&quot; &quot;);\r\n        mCursor.close();\r\n\r\n        binding.btnUploadVideo.setEnabled(true);\r\n        binding.vTitle.setText(finalSongTitle);\r\n\r\n    }\r\n\r\n\r\n\r\n[Output should be look Like This]\r\n**But it&#39;s not working properly.**\r\n(https://i.stack.imgur.com/bAsZu.png)","title":"I can&#39;t get access to the file or &#39;READ_EXTERNAL_STORAGE&#39; by Karumi Dexter. It is working till Sdk-32 properly but it&#39;s not working on 33","body":"<p>Function for choosing video .</p>\n<p>private void ChooseVideo(){</p>\n<pre><code>    Dexter.withContext(this)\n            .withPermission(Manifest.permission.READ_EXTERNAL_STORAGE)\n            .withListener(new PermissionListener() {\n\n                @Override public void onPermissionGranted(PermissionGrantedResponse response) {\n                    Intent intent = new Intent(  );\n                    //new line added\n                    intent.addCategory(Intent.CATEGORY_OPENABLE);\n                    intent.setType( &quot;video/*&quot; );\n\n                    intent.setAction( Intent.ACTION_GET_CONTENT );\n                    startActivityForResult( intent,102 );\n                }\n                @Override public void onPermissionDenied(PermissionDeniedResponse response) {\n\n                }\n                @Override public void onPermissionRationaleShouldBeShown(PermissionRequest permission, PermissionToken token) {\n                   token.continuePermissionRequest();\n                }\n            }).check();\n\n}\n</code></pre>\n<p>//on activity result</p>\n<pre><code>@Override\nprotected void onActivityResult(int requestCode, int resultCode, @Nullable Intent data) {\n    super.onActivityResult( requestCode, resultCode, data );\n    if (requestCode==102 &amp;resultCode==RESULT_OK);\n    videoUri=data.getData();\n    binding.VideoViewAVA.setVisibility(View.VISIBLE);\n    binding.VideoViewAVA.setVideoURI(videoUri);\n\n    Cursor mCursor =  getApplicationContext().getContentResolver().query( videoUri,null,null,null,null );\n    int indexedName =mCursor.getColumnIndex( OpenableColumns.DISPLAY_NAME );\n    mCursor.moveToFirst();\n    songName = mCursor.getString(indexedName);\n    finalSongTitle = songName.replace(&quot;.mp4&quot;,&quot;&quot;)\n                            .replace(&quot;.wmv&quot;,&quot;&quot;)\n                            .replace(&quot;.webm&quot;,&quot;&quot;)\n                            .replace(&quot;.mkv&quot;,&quot; &quot;);\n    mCursor.close();\n\n    binding.btnUploadVideo.setEnabled(true);\n    binding.vTitle.setText(finalSongTitle);\n\n}\n</code></pre>\n<p>[Output should be look Like This]\n<strong>But it's not working properly.</strong>\n(<a href=\"https://i.stack.imgur.com/bAsZu.png\" rel=\"nofollow noreferrer\">https://i.stack.imgur.com/bAsZu.png</a>)</p>\n"},{"tags":["java","aes"],"comments":[{"owner":{"account_id":2006972,"reputation":43182,"user_id":1796579,"display_name":"Henry"},"score":0,"creation_date":1515141115,"post_id":48109791,"comment_id":83194823,"body_markdown":"Don&#39;t read the whole file into memory, instead do the encryption block by block.","body":"Don&#39;t read the whole file into memory, instead do the encryption block by block."},{"owner":{"account_id":3421244,"reputation":35883,"user_id":2868801,"display_name":"dave_thompson_085"},"score":0,"creation_date":1515145245,"post_id":48109791,"comment_id":83197084,"body_markdown":"(1) Your links are not correctly formatted to be URLs (2) Java `Cipher` API handles both stream or stream-mode and block-mode ciphers with the same methods, and necessarily handles block buffering internally, so byte-at-a-time does work -- although chunk-at-a-time like Maurice&#39;s 4k is better. (3) Using any human-readable or even printable string as a (symmetric) key is weak (in any language) and fragile (in Java using defaulted charset, which varies) but that&#39;s offtopic for SO and belongs on security.SX or crypto.SX","body":"(1) Your links are not correctly formatted to be URLs (2) Java <code>Cipher</code> API handles both stream or stream-mode and block-mode ciphers with the same methods, and necessarily handles block buffering internally, so byte-at-a-time does work -- although chunk-at-a-time like Maurice&#39;s 4k is better. (3) Using any human-readable or even printable string as a (symmetric) key is weak (in any language) and fragile (in Java using defaulted charset, which varies) but that&#39;s offtopic for SO and belongs on security.SX or crypto.SX"}],"answers":[{"tags":[],"owner":{"account_id":12060587,"reputation":3933,"user_id":8819761,"display_name":"Jeroen Steenbeeke"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1515140950,"creation_date":1515140950,"answer_id":48109827,"question_id":48109791,"body_markdown":"I think you should look into using CipherOutputStream. This way you won&#39;t need to load the file into memory:\r\n\r\nhttps://docs.oracle.com/javase/9/docs/api/javax/crypto/CipherOutputStream.html","title":"java encrypting large file cause java.lang.OutOfMemoryError: Java heap space,possible solutions","body":"<p>I think you should look into using CipherOutputStream. This way you won't need to load the file into memory:</p>\n\n<p><a href=\"https://docs.oracle.com/javase/9/docs/api/javax/crypto/CipherOutputStream.html\" rel=\"nofollow noreferrer\">https://docs.oracle.com/javase/9/docs/api/javax/crypto/CipherOutputStream.html</a></p>\n"},{"tags":[],"owner":{"account_id":9463219,"reputation":9357,"user_id":7036419,"display_name":"Maurice Perry"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1515141688,"creation_date":1515141311,"answer_id":48109914,"question_id":48109791,"body_markdown":"Don&#39;t process the whole file at once: use a buffer:\r\n\r\n    try (FileInputStream inputStream = new FileInputStream(inputFile);\r\n            FileOutputStream outputStream = new FileOutputStream(outputFile)) {\r\n        byte[] inputBytes = new byte[4096];\r\n        for (int n = inputStream.read(inputBytes); n &gt; 0; n = inputStream.read(inputBytes)) {\r\n            byte[] outputBytes = cipher.update(inputBytes, 0, n);\r\n            outputStream.write(outputBytes);\r\n        }\r\n\r\n        byte[] outputBytes = cipher.doFinal();\r\n        outputStream.write(outputBytes);\r\n    }","title":"java encrypting large file cause java.lang.OutOfMemoryError: Java heap space,possible solutions","body":"<p>Don't process the whole file at once: use a buffer:</p>\n\n<pre><code>try (FileInputStream inputStream = new FileInputStream(inputFile);\n        FileOutputStream outputStream = new FileOutputStream(outputFile)) {\n    byte[] inputBytes = new byte[4096];\n    for (int n = inputStream.read(inputBytes); n &gt; 0; n = inputStream.read(inputBytes)) {\n        byte[] outputBytes = cipher.update(inputBytes, 0, n);\n        outputStream.write(outputBytes);\n    }\n\n    byte[] outputBytes = cipher.doFinal();\n    outputStream.write(outputBytes);\n}\n</code></pre>\n"}],"owner":{"account_id":11119200,"reputation":1394,"user_id":8380779,"display_name":"kenn"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":836,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":2,"score":0,"last_activity_date":1695196901,"creation_date":1515140798,"question_id":48109791,"body_markdown":"I am writing java program to encrypt video files,with small video files it performs as expected however when i try on a huge file approximately 800 Megabyte,it throws an exception \r\n`java.lang.OutOfMemoryError: Java heap space`.\r\nI have researched on the topic getting more information about the garbage collector from [here][1] and reviewing similar problems [here][2]. According to the best chosen answer how can you &quot;Encrypt a byte at a time&quot;: With block ciphers encryption is by the block (AES: 16-bytes)`.\r\nThe contents of my source code\r\n\r\n&gt; main.java\r\n\r\n    public static void main(String[] args) {\r\n        String key = &quot;Mary has one cat&quot;;\r\n        File inputFile = new File(&quot;C:\\\\Users\\\\xyz\\\\Music\\\\test\\\\-.mp4&quot;);\r\n        File encryptedFile = new File(&quot;C:\\\\Users\\\\xyz\\\\Music\\\\test\\\\-.mp4.encrypted&quot;);\r\n        File decryptedFile = new File(&quot;C:\\\\Users\\\\xyz\\\\Music\\\\test\\\\decrypted.mp4&quot;);\r\n\r\n        try {\r\n            CryptoUtils.encrypt(key, inputFile, encryptedFile);\r\n            CryptoUtils.decrypt(key, encryptedFile, decryptedFile);\r\n        } catch (CryptoException ex) {\r\n            System.out.println(ex.getMessage());\r\n            ex.printStackTrace();\r\n        }\r\n    }\r\n\r\n&gt; CryptoUtils.java\r\n\r\n     private static final String ALGORITHM = &quot;AES&quot;;\r\n    private static final String TRANSFORMATION = &quot;AES&quot;;\r\n \r\n    public static void encrypt(String key, File inputFile, File outputFile)\r\n            throws CryptoException {\r\n        doCrypto(Cipher.ENCRYPT_MODE, key, inputFile, outputFile);\r\n    }\r\n \r\n    public static void decrypt(String key, File inputFile, File outputFile)\r\n            throws CryptoException {\r\n        doCrypto(Cipher.DECRYPT_MODE, key, inputFile, outputFile);\r\n    }\r\n \r\n    private static void doCrypto(int cipherMode, String key, File inputFile,\r\n            File outputFile) throws CryptoException {\r\n        try {\r\n            Key secretKey = new SecretKeySpec(key.getBytes(), ALGORITHM);\r\n            Cipher cipher = Cipher.getInstance(TRANSFORMATION);\r\n            cipher.init(cipherMode, secretKey);\r\n             \r\n            FileInputStream inputStream = new FileInputStream(inputFile);\r\n            byte[] inputBytes = new byte[(int) inputFile.length()];\r\n            inputStream.read(inputBytes);\r\n             \r\n            byte[] outputBytes = cipher.doFinal(inputBytes);\r\n             \r\n            FileOutputStream outputStream = new FileOutputStream(outputFile);\r\n            outputStream.write(outputBytes);\r\n             \r\n            inputStream.close();\r\n            outputStream.close();\r\n             \r\n        } catch (NoSuchPaddingException | NoSuchAlgorithmException\r\n                | InvalidKeyException | BadPaddingException\r\n                | IllegalBlockSizeException | IOException ex) {\r\n            throw new CryptoException(&quot;Error encrypting/decrypting file&quot;, ex);\r\n        }\r\n    }\r\n\r\n&gt; CryptoException.java\r\n\r\n    public class CryptoException extends Exception {\r\n \r\n    public CryptoException() {\r\n    }\r\n \r\n    public CryptoException(String message, Throwable throwable) {\r\n        super(message, throwable);\r\n    }}\r\n\r\n  [1]: https://web.archive.org/web/20220119143107/https://haritibcoblog.com/2016/11/22/java-lang-outofmemoryerror-types-and-causes/\r\n  [2]: https://stackoverflow.com/questions/34447037/encrypting-a-large-file-with-aes-using-java/39336692","title":"java encrypting large file cause java.lang.OutOfMemoryError: Java heap space,possible solutions","body":"<p>I am writing java program to encrypt video files,with small video files it performs as expected however when i try on a huge file approximately 800 Megabyte,it throws an exception\n<code>java.lang.OutOfMemoryError: Java heap space</code>.\nI have researched on the topic getting more information about the garbage collector from <a href=\"https://web.archive.org/web/20220119143107/https://haritibcoblog.com/2016/11/22/java-lang-outofmemoryerror-types-and-causes/\" rel=\"nofollow noreferrer\">here</a> and reviewing similar problems <a href=\"https://stackoverflow.com/questions/34447037/encrypting-a-large-file-with-aes-using-java/39336692\">here</a>. According to the best chosen answer how can you &quot;Encrypt a byte at a time&quot;: With block ciphers encryption is by the block (AES: 16-bytes)`.\nThe contents of my source code</p>\n<blockquote>\n<p>main.java</p>\n</blockquote>\n<pre><code>public static void main(String[] args) {\n    String key = &quot;Mary has one cat&quot;;\n    File inputFile = new File(&quot;C:\\\\Users\\\\xyz\\\\Music\\\\test\\\\-.mp4&quot;);\n    File encryptedFile = new File(&quot;C:\\\\Users\\\\xyz\\\\Music\\\\test\\\\-.mp4.encrypted&quot;);\n    File decryptedFile = new File(&quot;C:\\\\Users\\\\xyz\\\\Music\\\\test\\\\decrypted.mp4&quot;);\n\n    try {\n        CryptoUtils.encrypt(key, inputFile, encryptedFile);\n        CryptoUtils.decrypt(key, encryptedFile, decryptedFile);\n    } catch (CryptoException ex) {\n        System.out.println(ex.getMessage());\n        ex.printStackTrace();\n    }\n}\n</code></pre>\n<blockquote>\n<p>CryptoUtils.java</p>\n</blockquote>\n<pre><code> private static final String ALGORITHM = &quot;AES&quot;;\nprivate static final String TRANSFORMATION = &quot;AES&quot;;\n\npublic static void encrypt(String key, File inputFile, File outputFile)\n        throws CryptoException {\n    doCrypto(Cipher.ENCRYPT_MODE, key, inputFile, outputFile);\n}\n\npublic static void decrypt(String key, File inputFile, File outputFile)\n        throws CryptoException {\n    doCrypto(Cipher.DECRYPT_MODE, key, inputFile, outputFile);\n}\n\nprivate static void doCrypto(int cipherMode, String key, File inputFile,\n        File outputFile) throws CryptoException {\n    try {\n        Key secretKey = new SecretKeySpec(key.getBytes(), ALGORITHM);\n        Cipher cipher = Cipher.getInstance(TRANSFORMATION);\n        cipher.init(cipherMode, secretKey);\n         \n        FileInputStream inputStream = new FileInputStream(inputFile);\n        byte[] inputBytes = new byte[(int) inputFile.length()];\n        inputStream.read(inputBytes);\n         \n        byte[] outputBytes = cipher.doFinal(inputBytes);\n         \n        FileOutputStream outputStream = new FileOutputStream(outputFile);\n        outputStream.write(outputBytes);\n         \n        inputStream.close();\n        outputStream.close();\n         \n    } catch (NoSuchPaddingException | NoSuchAlgorithmException\n            | InvalidKeyException | BadPaddingException\n            | IllegalBlockSizeException | IOException ex) {\n        throw new CryptoException(&quot;Error encrypting/decrypting file&quot;, ex);\n    }\n}\n</code></pre>\n<blockquote>\n<p>CryptoException.java</p>\n</blockquote>\n<pre><code>public class CryptoException extends Exception {\n\npublic CryptoException() {\n}\n\npublic CryptoException(String message, Throwable throwable) {\n    super(message, throwable);\n}}\n</code></pre>\n"},{"tags":["java","jackson","yaml","snakeyaml"],"comments":[{"owner":{"account_id":305757,"reputation":1584,"user_id":5851520,"accept_rate":100,"display_name":"SusanW"},"score":0,"creation_date":1695206604,"post_id":77138735,"comment_id":135992317,"body_markdown":"@hc_dev although that&#39;s a good answer, there&#39;s little in the other question or its text about anchor extensions or overrides - it&#39;s all about anchors in arrays, which isn&#39;t the problem here. I spent most of last night looking for an answer and didn&#39;t find that - annoyingly, its mention of `&lt;&lt;` is buried in the code example, and you have to scroll right in an example to see the exception detail. If we close this, shall I go over there and edit the question to be more findable?","body":"@hc_dev although that&#39;s a good answer, there&#39;s little in the other question or its text about anchor extensions or overrides - it&#39;s all about anchors in arrays, which isn&#39;t the problem here. I spent most of last night looking for an answer and didn&#39;t find that - annoyingly, its mention of <code>&lt;&lt;</code> is buried in the code example, and you have to scroll right in an example to see the exception detail. If we close this, shall I go over there and edit the question to be more findable?"},{"owner":{"account_id":141151,"reputation":36461,"user_id":347964,"accept_rate":79,"display_name":"flyx"},"score":1,"creation_date":1695208933,"post_id":77138735,"comment_id":135992802,"body_markdown":"Closed questions stay findable so yours can still serve as pointer to the other question, I&#39;d say that&#39;s good enough","body":"Closed questions stay findable so yours can still serve as pointer to the other question, I&#39;d say that&#39;s good enough"},{"owner":{"account_id":305757,"reputation":1584,"user_id":5851520,"accept_rate":100,"display_name":"SusanW"},"score":0,"creation_date":1695209808,"post_id":77138735,"comment_id":135992994,"body_markdown":"@flyx Yes, of course - ok, cool thanks :-)","body":"@flyx Yes, of course - ok, cool thanks :-)"}],"answers":[{"comments":[{"owner":{"account_id":305757,"reputation":1584,"user_id":5851520,"accept_rate":100,"display_name":"SusanW"},"score":0,"creation_date":1695199924,"post_id":77140429,"comment_id":135990934,"body_markdown":"Ok, thanks for the confirmation - I feared it might be so! But one excellent reason to stick to Jackson is that our whole schema is defined using Jackson MrBean interface definitions, with `@JsonBackReference` resolution and `@JsonTypeInfo` subtypes - which all works beautifully. I don&#39;t think SnakeYAML has any equivalent support, unless I&#39;m wrong? Googling isn&#39;t showing anything...","body":"Ok, thanks for the confirmation - I feared it might be so! But one excellent reason to stick to Jackson is that our whole schema is defined using Jackson MrBean interface definitions, with <code>@JsonBackReference</code> resolution and <code>@JsonTypeInfo</code> subtypes - which all works beautifully. I don&#39;t think SnakeYAML has any equivalent support, unless I&#39;m wrong? Googling isn&#39;t showing anything..."},{"owner":{"account_id":7547772,"reputation":8593,"user_id":5730279,"display_name":"hc_dev"},"score":0,"creation_date":1695205484,"post_id":77140429,"comment_id":135992103,"body_markdown":"You have [already answered that](https://stackoverflow.com/a/46691196/5730279) to a similar question, so I voted to close as duplicate. Agree?","body":"You have <a href=\"https://stackoverflow.com/a/46691196/5730279\">already answered that</a> to a similar question, so I voted to close as duplicate. Agree?"},{"owner":{"account_id":141151,"reputation":36461,"user_id":347964,"accept_rate":79,"display_name":"flyx"},"score":0,"creation_date":1695209033,"post_id":77140429,"comment_id":135992821,"body_markdown":"@hc_dev Right, I added the link to the issue to my answer there (the issue didn&#39;t exist when I originally answered that). Good find, I didn&#39;t remember it.","body":"@hc_dev Right, I added the link to the issue to my answer there (the issue didn&#39;t exist when I originally answered that). Good find, I didn&#39;t remember it."},{"owner":{"account_id":141151,"reputation":36461,"user_id":347964,"accept_rate":79,"display_name":"flyx"},"score":1,"creation_date":1695209300,"post_id":77140429,"comment_id":135992877,"body_markdown":"@SusanW Unfortunately SnakeYAML isn&#39;t controlled with annotations. Depending on your pipeline, you could preprocess the YAML to drop anchors and aliases before you load it, in your case loading to and dumping via `Object` with SnakeYAML should be enough to remove those, then you can load the result with Jackson. I don&#39;t think there&#39;s an easier solution.","body":"@SusanW Unfortunately SnakeYAML isn&#39;t controlled with annotations. Depending on your pipeline, you could preprocess the YAML to drop anchors and aliases before you load it, in your case loading to and dumping via <code>Object</code> with SnakeYAML should be enough to remove those, then you can load the result with Jackson. I don&#39;t think there&#39;s an easier solution."},{"owner":{"account_id":305757,"reputation":1584,"user_id":5851520,"accept_rate":100,"display_name":"SusanW"},"score":0,"creation_date":1695210111,"post_id":77140429,"comment_id":135993064,"body_markdown":"@flyx Yeah, we&#39;ve bought into all the bells and whistles with Jackson! Ok, I&#39;ve restructured my new YAML schema a bit so the field I need to vary is outside of the structure I want to reuse a lot, which is a reasonably defensible change anyway. So now I&#39;m just using normal anchoring. Thanks for your help!","body":"@flyx Yeah, we&#39;ve bought into all the bells and whistles with Jackson! Ok, I&#39;ve restructured my new YAML schema a bit so the field I need to vary is outside of the structure I want to reuse a lot, which is a reasonably defensible change anyway. So now I&#39;m just using normal anchoring. Thanks for your help!"}],"tags":[],"owner":{"account_id":141151,"reputation":36461,"user_id":347964,"accept_rate":79,"display_name":"flyx"},"comment_count":5,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1695196827,"creation_date":1695196827,"answer_id":77140429,"question_id":77138735,"body_markdown":"Jackson is known to [not handle references correctly](https://github.com/FasterXML/jackson-dataformats-text/issues/98).\r\n\r\nYou can use SnakeYAML directly which does support references and the merge key `&lt;&lt;`. Jackson uses SnakeYAML under the hood anyway but somehow screws this up.\r\n\r\nSnakeYAML has pretty much the same capabilities as Jackson so there isn&#39;t much of a reason why you&#39;d need to stick to Jackson.","title":"Jackson YAML: support for anchor extensions/overrides","body":"<p>Jackson is known to <a href=\"https://github.com/FasterXML/jackson-dataformats-text/issues/98\" rel=\"nofollow noreferrer\">not handle references correctly</a>.</p>\n<p>You can use SnakeYAML directly which does support references and the merge key <code>&lt;&lt;</code>. Jackson uses SnakeYAML under the hood anyway but somehow screws this up.</p>\n<p>SnakeYAML has pretty much the same capabilities as Jackson so there isn't much of a reason why you'd need to stick to Jackson.</p>\n"}],"owner":{"account_id":305757,"reputation":1584,"user_id":5851520,"accept_rate":100,"display_name":"SusanW"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":77,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"closed_date":1695208851,"accepted_answer_id":77140429,"answer_count":1,"score":1,"last_activity_date":1695196827,"creation_date":1695172533,"question_id":77138735,"body_markdown":"I&#39;m trying to use Jackson 2.15.2 `YAMLFactory` to parse the anchor extension syntax:\r\n\r\n    sections:\r\n    - &amp;packetInfo\r\n        name: packetInfo\r\n        description: information on a received UDP packet\r\n\r\nand then later:\r\n\r\n    sections:\r\n    -   &lt;&lt;: *packetInfo\r\n        description: something else\r\n\r\nBut I&#39;m getting:\r\n    `com.fasterxml.jackson.databind.exc.UnrecognizedPropertyException: Unrecognized field &quot;&lt;&lt;&quot; `, and it&#39;s giving all the signs of treating the `&lt;&lt;` as any other field name.\r\n\r\nIf I remove the `&lt;&lt;:` like this, it loads ok (without the option to override, of course), so the anchor/reference system is working:\r\n\r\n    sections:\r\n    -   *packetInfo\r\n\r\nDoes Jackson not support `&lt;&lt;:` extension/overrides? Or is there a Feature switch I need to turn on that I haven&#39;t found yet? I&#39;ve read that handling these is done by a schema, rather than the parser itself.\r\n\r\n\r\n","title":"Jackson YAML: support for anchor extensions/overrides","body":"<p>I'm trying to use Jackson 2.15.2 <code>YAMLFactory</code> to parse the anchor extension syntax:</p>\n<pre><code>sections:\n- &amp;packetInfo\n    name: packetInfo\n    description: information on a received UDP packet\n</code></pre>\n<p>and then later:</p>\n<pre><code>sections:\n-   &lt;&lt;: *packetInfo\n    description: something else\n</code></pre>\n<p>But I'm getting:\n<code>com.fasterxml.jackson.databind.exc.UnrecognizedPropertyException: Unrecognized field &quot;&lt;&lt;&quot; </code>, and it's giving all the signs of treating the <code>&lt;&lt;</code> as any other field name.</p>\n<p>If I remove the <code>&lt;&lt;:</code> like this, it loads ok (without the option to override, of course), so the anchor/reference system is working:</p>\n<pre><code>sections:\n-   *packetInfo\n</code></pre>\n<p>Does Jackson not support <code>&lt;&lt;:</code> extension/overrides? Or is there a Feature switch I need to turn on that I haven't found yet? I've read that handling these is done by a schema, rather than the parser itself.</p>\n"},{"tags":["java","serial-port","modbus"],"comments":[{"owner":{"account_id":7247195,"reputation":742,"user_id":5528725,"accept_rate":60,"display_name":"Thomas W."},"score":0,"creation_date":1694511847,"post_id":77082035,"comment_id":135897130,"body_markdown":"What exactly goes wrong? Is an exception thrown or are just the registers not written?","body":"What exactly goes wrong? Is an exception thrown or are just the registers not written?"},{"owner":{"account_id":29414824,"reputation":13,"user_id":22537897,"display_name":"Capitan Latinamerica"},"score":0,"creation_date":1694517234,"post_id":77082035,"comment_id":135898270,"body_markdown":"New variable of type Wreq = new WriteMultipleRegistersRequest(); doesn&#39;t accept the data I want to send. I don&#39;t understand where to write the value I want to pass","body":"New variable of type Wreq = new WriteMultipleRegistersRequest(); doesn&#39;t accept the data I want to send. I don&#39;t understand where to write the value I want to pass"}],"answers":[{"tags":[],"owner":{"account_id":7247195,"reputation":742,"user_id":5528725,"accept_rate":60,"display_name":"Thomas W."},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1694527084,"creation_date":1694518969,"answer_id":77088770,"question_id":77082035,"body_markdown":"Please give the following a try. I cannot reproduce it, because of the lack of a Modbus Serial setup.\r\n\r\nAccording to the API, the WriteMultipleRegistersRequest can be constructed with an array of Registers: https://jamod.sourceforge.net/api/net/wimpi/modbus/msg/WriteMultipleRegistersRequest.html#WriteMultipleRegistersRequest(int,%20net.wimpi.modbus.procimg.Register[])\r\n\r\nTherefore create an array of SimpleRegisteres and call the constructor\r\nhttps://jamod.sourceforge.net/api/net/wimpi/modbus/procimg/SimpleRegister.html\r\n\r\n...something like:\r\n\r\n    ...\r\n    final Register[] registers = {new SimpleRegister(42)};\r\n    Wreq = new  WriteMultipleRegistersRequest(ref, registers);\r\n    ...\r\n","title":"Java ModbusRTU writing registers","body":"<p>Please give the following a try. I cannot reproduce it, because of the lack of a Modbus Serial setup.</p>\n<p>According to the API, the WriteMultipleRegistersRequest can be constructed with an array of Registers: <a href=\"https://jamod.sourceforge.net/api/net/wimpi/modbus/msg/WriteMultipleRegistersRequest.html#WriteMultipleRegistersRequest(int,%20net.wimpi.modbus.procimg.Register%5B%5D)\" rel=\"nofollow noreferrer\">https://jamod.sourceforge.net/api/net/wimpi/modbus/msg/WriteMultipleRegistersRequest.html#WriteMultipleRegistersRequest(int,%20net.wimpi.modbus.procimg.Register[])</a></p>\n<p>Therefore create an array of SimpleRegisteres and call the constructor\n<a href=\"https://jamod.sourceforge.net/api/net/wimpi/modbus/procimg/SimpleRegister.html\" rel=\"nofollow noreferrer\">https://jamod.sourceforge.net/api/net/wimpi/modbus/procimg/SimpleRegister.html</a></p>\n<p>...something like:</p>\n<pre><code>...\nfinal Register[] registers = {new SimpleRegister(42)};\nWreq = new  WriteMultipleRegistersRequest(ref, registers);\n...\n</code></pre>\n"},{"tags":[],"owner":{"account_id":29414824,"reputation":13,"user_id":22537897,"display_name":"Capitan Latinamerica"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695196648,"creation_date":1695196648,"answer_id":77140409,"question_id":77082035,"body_markdown":"For those who need the function of recording data via Modbus-RTU. Here is the working code with comments in Russian.\r\n**Thanks for the help Thomas W.**\r\nI have shown an example of writing two registers in the int format; we send the system time to the device\r\n\r\n    public static void WriteTime(int Low, int High) throws IOException {\r\n\t\tSerialConnection con = null;\t\t\t\t//Создаём пока пустое соединение\r\n\t    ModbusSerialTransaction trans = null;\t\t//Создаём пустую транзакцию\r\n\t    WriteMultipleRegistersRequest Wreq = null; \t//Создаём пустой запрос\r\n   \r\n\t    int unitid = 1; //идентификатор юнита, с которым мы будем разговаривать\r\n\t    int ref = 55; //ссылка, с чего начать читать\r\n\t    int repeat = 2; //цикл для повторения транзакции\r\n\t    \r\n\t /* Настройка параметров порта */   \r\n\t    SerialParameters params = new SerialParameters();\t\t\t\t\t\t//Создаём объект с параметрами\r\n\t    params.setPortName(SelectCOM.ComPortBox.getSelectedItem().toString());\t//Задать порт\r\n\t    params.setBaudRate(SelectCOM.BaudRateBox.getSelectedItem().toString());\t//Задать скорость\r\n\t    params.setDatabits(SelectCOM.DataBitBox.getSelectedItem().toString());\t//Задать количество бит данных\r\n\t    params.setParity(SelectCOM.ParityBox.getSelectedItem().toString());\t\t//Задать паритет\r\n\t    params.setStopbits(SelectCOM.StopBitBox.getSelectedItem().toString());\t//Задать стопбит\r\n\t    params.setEncoding(&quot;rtu&quot;);\t\t\t\t\t\t\t\t\t\t\t\t//Задать кодировку\r\n\t    params.setEcho(false);\t\t\t\t\t\t\t\t\t\t\t\t\t//Выключить эхо\r\n\r\n\t    // Открываем соединение\r\n\t    con = new SerialConnection(params);\t\t\t\t\t\t\t\t\t\t//Открыть соединение с заданными параметрами порта\r\n\t    try {\r\n\t        con.open();\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t//Открыть порт\r\n\t    } catch (Exception e) {\r\n\t        e.printStackTrace();\r\n\t    }\r\n\t // подготавливаем запрос\r\n\t    final Register[] registers = {new SimpleRegister(Low), new SimpleRegister(High)};\t\t\t// Создаём регистр со значением, которое нужно передать в устройство\r\n\t    Wreq = new  WriteMultipleRegistersRequest(ref, registers);\t\t\t// Создаём запрос с параметрами: (ссылка на регистр; значение, которое туда надо передать)\r\n\t    Wreq.setUnitID(unitid);\t\t\t\t\t\t\t\t\t\t\t\t// Задать идентификатор устройства\r\n\t    Wreq.setHeadless();\t\t\t\t\t\t\t\t\t\t\t\t\t// Сделать его без головы\r\n\t    \r\n\t    trans = new ModbusSerialTransaction(con);\t\t\t\t\t\t\t// Создать Транзакцию с параметрами открытого соединения\r\n\t    trans.setRequest(Wreq);\t\t\t\t\t\t\t\t\t\t\t\t// Положить запрос в транзакцию\r\n\r\n\t    // Выполнить транзакцию нужное количество раз (см. repeat)\r\n\t    int k = 0;\t\t// Счётчик циклов\r\n\t    do {\r\n\t        try {\r\n\t            trans.execute();\t\t\t// Выполнить транзакцию\r\n\t        } catch (ModbusException e) {\r\n\t            e.printStackTrace();\r\n\t        }\r\n\t        k++;\t\t\t\t\t\t\t//Увеличить счётчик попыток\r\n\t    } while (k &lt; repeat);\r\n\t    con.close();\t\t\t\t\t\t//Закрыть соединение\r\n\t}","title":"Java ModbusRTU writing registers","body":"<p>For those who need the function of recording data via Modbus-RTU. Here is the working code with comments in Russian.\n<strong>Thanks for the help Thomas W.</strong>\nI have shown an example of writing two registers in the int format; we send the system time to the device</p>\n<pre><code>public static void WriteTime(int Low, int High) throws IOException {\n    SerialConnection con = null;                //Создаём пока пустое соединение\n    ModbusSerialTransaction trans = null;       //Создаём пустую транзакцию\n    WriteMultipleRegistersRequest Wreq = null;  //Создаём пустой запрос\n\n    int unitid = 1; //идентификатор юнита, с которым мы будем разговаривать\n    int ref = 55; //ссылка, с чего начать читать\n    int repeat = 2; //цикл для повторения транзакции\n    \n /* Настройка параметров порта */   \n    SerialParameters params = new SerialParameters();                       //Создаём объект с параметрами\n    params.setPortName(SelectCOM.ComPortBox.getSelectedItem().toString());  //Задать порт\n    params.setBaudRate(SelectCOM.BaudRateBox.getSelectedItem().toString()); //Задать скорость\n    params.setDatabits(SelectCOM.DataBitBox.getSelectedItem().toString());  //Задать количество бит данных\n    params.setParity(SelectCOM.ParityBox.getSelectedItem().toString());     //Задать паритет\n    params.setStopbits(SelectCOM.StopBitBox.getSelectedItem().toString());  //Задать стопбит\n    params.setEncoding(&quot;rtu&quot;);                                              //Задать кодировку\n    params.setEcho(false);                                                  //Выключить эхо\n\n    // Открываем соединение\n    con = new SerialConnection(params);                                     //Открыть соединение с заданными параметрами порта\n    try {\n        con.open();                                                         //Открыть порт\n    } catch (Exception e) {\n        e.printStackTrace();\n    }\n // подготавливаем запрос\n    final Register[] registers = {new SimpleRegister(Low), new SimpleRegister(High)};           // Создаём регистр со значением, которое нужно передать в устройство\n    Wreq = new  WriteMultipleRegistersRequest(ref, registers);          // Создаём запрос с параметрами: (ссылка на регистр; значение, которое туда надо передать)\n    Wreq.setUnitID(unitid);                                             // Задать идентификатор устройства\n    Wreq.setHeadless();                                                 // Сделать его без головы\n    \n    trans = new ModbusSerialTransaction(con);                           // Создать Транзакцию с параметрами открытого соединения\n    trans.setRequest(Wreq);                                             // Положить запрос в транзакцию\n\n    // Выполнить транзакцию нужное количество раз (см. repeat)\n    int k = 0;      // Счётчик циклов\n    do {\n        try {\n            trans.execute();            // Выполнить транзакцию\n        } catch (ModbusException e) {\n            e.printStackTrace();\n        }\n        k++;                            //Увеличить счётчик попыток\n    } while (k &lt; repeat);\n    con.close();                        //Закрыть соединение\n}\n</code></pre>\n"}],"owner":{"account_id":29414824,"reputation":13,"user_id":22537897,"display_name":"Capitan Latinamerica"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":70,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":77088770,"answer_count":2,"score":1,"last_activity_date":1695196648,"creation_date":1694438780,"question_id":77082035,"body_markdown":"I need to write 2 registers of slave device using serialport, protocol ModbusRTU. I can read all registers using libs net.wimpi.modbus. I need to write the current time value into the holding register, which is located at address 55 in the device. I am reading the values using the following method\r\n\r\n```\r\npublic static void MGo() {\r\n\t\tSerialConnection con = null;\r\n\t    ModbusSerialTransaction trans = null;\r\n\t    ReadInputRegistersRequest req = null; //the request\r\n\t    ReadInputRegistersResponse res = null; //the response\r\n\t    \r\n\t    ReadMultipleRegistersRequest Mreq = null;\r\n\t    ReadMultipleRegistersResponse Mres = null;\r\n\r\n\t    int unitid = 1; //идентификатор юнита, с которым мы будем разговаривать\r\n\t    int ref = 0; //ссылка, с чего начать читать\r\n\t    int count = 57; //количество IR для чтения\r\n\t    int repeat = 1; //цикл для повторения транзакции\r\n\r\n\t    //ModbusCoupler.createModbusCoupler(null);\r\n\t    ModbusCoupler.getReference().setUnitID(1);\r\n\r\n\t    SerialParameters params = new SerialParameters();\r\n\t    params.setPortName(SelectCOM.ComPortBox.getSelectedItem().toString());\r\n\t    params.setBaudRate(SelectCOM.BaudRateBox.getSelectedItem().toString());\r\n\t    params.setDatabits(SelectCOM.DataBitBox.getSelectedItem().toString());\r\n\t    params.setParity(SelectCOM.ParityBox.getSelectedItem().toString());\r\n\t    params.setStopbits(SelectCOM.StopBitBox.getSelectedItem().toString());\r\n\t    params.setEncoding(&quot;rtu&quot;);\r\n\t    params.setEcho(false);\r\n\r\n\t    // Открываем соединение\r\n\t    con = new SerialConnection(params);\r\n\t    try {\r\n\t        con.open();\r\n//\t        System.out.println(con.getSerialPort());\r\n\t    } catch (Exception e) {\r\n\t        e.printStackTrace();\r\n\t    }\r\n\t // подготавливаем запрос\r\n\t    Mreq = new ReadMultipleRegistersRequest(ref, count);\r\n\t    Mreq.setUnitID(unitid);\r\n\t    Mreq.setHeadless();\r\n\r\n\t    trans = new ModbusSerialTransaction(con);\r\n\t    trans.setRequest(Mreq);\r\n\r\n\t    //7. Execute the transaction repeat times\r\n\t    int k = 0;\r\n\t    do {\r\n\t        try {\r\n\t            trans.execute();\r\n\t        } catch (ModbusException e) {\r\n\t            e.printStackTrace();\r\n\t        }\r\n/*\t        res = (ReadInputRegistersResponse) trans.getResponse();*/\r\n\t        Mres = (ReadMultipleRegistersResponse) trans.getResponse();\r\n\t        for (int n = 0; n &lt; Mres.getWordCount(); n++) {\r\n\t        \tHoldingRegs[n] = Mres.getRegisterValue(n);\r\n\t        }\r\n\t        k++;\r\n\t    } while (k &lt; repeat);\r\n\t\r\n\r\n\t    con.close();\r\n\t\r\n\t}\r\n```\r\n\r\n\r\nI tried to write a similar method for WriteMultipleRegistersRequest\r\n\r\n```\r\npublic static void WriteRTU(int RegAdr) throws IOException {\r\n\t\tSerialConnection con = null;\r\n\t    ModbusSerialTransaction trans = null;\r\n\t    WriteMultipleRegistersRequest Wreq = null; //the request\r\n   \r\n\r\n\t    int unitid = 1; //идентификатор юнита, с которым мы будем разговаривать\r\n\t    int ref = RegAdr; //ссылка, с чего начать читать\r\n\t    int count = 57; //количество IR для чтения\r\n\t    int repeat = 1; //цикл для повторения транзакции\r\n\r\n\t    ModbusCoupler.getReference().setUnitID(1);\r\n\r\n\t    SerialParameters params = new SerialParameters();\r\n\t    params.setPortName(SelectCOM.ComPortBox.getSelectedItem().toString());\r\n\t    params.setBaudRate(SelectCOM.BaudRateBox.getSelectedItem().toString());\r\n\t    params.setDatabits(SelectCOM.DataBitBox.getSelectedItem().toString());\r\n\t    params.setParity(SelectCOM.ParityBox.getSelectedItem().toString());\r\n\t    params.setStopbits(SelectCOM.StopBitBox.getSelectedItem().toString());\r\n\t    params.setEncoding(&quot;rtu&quot;);\r\n\t    params.setEcho(false);\r\n\r\n\t    // Открываем соединение\r\n\t    con = new SerialConnection(params);\r\n\t    try {\r\n\t        con.open();\r\n//\t        System.out.println(con.getSerialPort());\r\n\t    } catch (Exception e) {\r\n\t        e.printStackTrace();\r\n\t    }\r\n\t // подготавливаем запрос\r\n\t    Wreq = new  WriteMultipleRegistersRequest();\r\n\t    Wreq.setUnitID(unitid);\r\n\t    Wreq.setHeadless();\r\n\t    ModbusRequest.createModbusRequest(0x05);\r\n\r\n\t    trans = new ModbusSerialTransaction(con);\r\n\t    trans.setRequest(Wreq);\r\n\r\n\t    //7. Execute the transaction repeat times\r\n\t    int k = 0;\r\n\t    do {\r\n\t        try {\r\n\t            trans.execute();\r\n\t        } catch (ModbusException e) {\r\n\t            e.printStackTrace();\r\n\t        }\r\n\r\n\t        k++;\r\n\t    } while (k &lt; repeat);\r\n\t    con.close();\r\n\t\r\n\t}\r\n```\r\nIt does&#39;nt working","title":"Java ModbusRTU writing registers","body":"<p>I need to write 2 registers of slave device using serialport, protocol ModbusRTU. I can read all registers using libs net.wimpi.modbus. I need to write the current time value into the holding register, which is located at address 55 in the device. I am reading the values using the following method</p>\n<pre><code>public static void MGo() {\n        SerialConnection con = null;\n        ModbusSerialTransaction trans = null;\n        ReadInputRegistersRequest req = null; //the request\n        ReadInputRegistersResponse res = null; //the response\n        \n        ReadMultipleRegistersRequest Mreq = null;\n        ReadMultipleRegistersResponse Mres = null;\n\n        int unitid = 1; //идентификатор юнита, с которым мы будем разговаривать\n        int ref = 0; //ссылка, с чего начать читать\n        int count = 57; //количество IR для чтения\n        int repeat = 1; //цикл для повторения транзакции\n\n        //ModbusCoupler.createModbusCoupler(null);\n        ModbusCoupler.getReference().setUnitID(1);\n\n        SerialParameters params = new SerialParameters();\n        params.setPortName(SelectCOM.ComPortBox.getSelectedItem().toString());\n        params.setBaudRate(SelectCOM.BaudRateBox.getSelectedItem().toString());\n        params.setDatabits(SelectCOM.DataBitBox.getSelectedItem().toString());\n        params.setParity(SelectCOM.ParityBox.getSelectedItem().toString());\n        params.setStopbits(SelectCOM.StopBitBox.getSelectedItem().toString());\n        params.setEncoding(&quot;rtu&quot;);\n        params.setEcho(false);\n\n        // Открываем соединение\n        con = new SerialConnection(params);\n        try {\n            con.open();\n//          System.out.println(con.getSerialPort());\n        } catch (Exception e) {\n            e.printStackTrace();\n        }\n     // подготавливаем запрос\n        Mreq = new ReadMultipleRegistersRequest(ref, count);\n        Mreq.setUnitID(unitid);\n        Mreq.setHeadless();\n\n        trans = new ModbusSerialTransaction(con);\n        trans.setRequest(Mreq);\n\n        //7. Execute the transaction repeat times\n        int k = 0;\n        do {\n            try {\n                trans.execute();\n            } catch (ModbusException e) {\n                e.printStackTrace();\n            }\n/*          res = (ReadInputRegistersResponse) trans.getResponse();*/\n            Mres = (ReadMultipleRegistersResponse) trans.getResponse();\n            for (int n = 0; n &lt; Mres.getWordCount(); n++) {\n                HoldingRegs[n] = Mres.getRegisterValue(n);\n            }\n            k++;\n        } while (k &lt; repeat);\n    \n\n        con.close();\n    \n    }\n</code></pre>\n<p>I tried to write a similar method for WriteMultipleRegistersRequest</p>\n<pre><code>public static void WriteRTU(int RegAdr) throws IOException {\n        SerialConnection con = null;\n        ModbusSerialTransaction trans = null;\n        WriteMultipleRegistersRequest Wreq = null; //the request\n   \n\n        int unitid = 1; //идентификатор юнита, с которым мы будем разговаривать\n        int ref = RegAdr; //ссылка, с чего начать читать\n        int count = 57; //количество IR для чтения\n        int repeat = 1; //цикл для повторения транзакции\n\n        ModbusCoupler.getReference().setUnitID(1);\n\n        SerialParameters params = new SerialParameters();\n        params.setPortName(SelectCOM.ComPortBox.getSelectedItem().toString());\n        params.setBaudRate(SelectCOM.BaudRateBox.getSelectedItem().toString());\n        params.setDatabits(SelectCOM.DataBitBox.getSelectedItem().toString());\n        params.setParity(SelectCOM.ParityBox.getSelectedItem().toString());\n        params.setStopbits(SelectCOM.StopBitBox.getSelectedItem().toString());\n        params.setEncoding(&quot;rtu&quot;);\n        params.setEcho(false);\n\n        // Открываем соединение\n        con = new SerialConnection(params);\n        try {\n            con.open();\n//          System.out.println(con.getSerialPort());\n        } catch (Exception e) {\n            e.printStackTrace();\n        }\n     // подготавливаем запрос\n        Wreq = new  WriteMultipleRegistersRequest();\n        Wreq.setUnitID(unitid);\n        Wreq.setHeadless();\n        ModbusRequest.createModbusRequest(0x05);\n\n        trans = new ModbusSerialTransaction(con);\n        trans.setRequest(Wreq);\n\n        //7. Execute the transaction repeat times\n        int k = 0;\n        do {\n            try {\n                trans.execute();\n            } catch (ModbusException e) {\n                e.printStackTrace();\n            }\n\n            k++;\n        } while (k &lt; repeat);\n        con.close();\n    \n    }\n</code></pre>\n<p>It does'nt working</p>\n"},{"tags":["java","spring","spring-boot","spring-boot-starter"],"answers":[{"comments":[{"owner":{"account_id":7844116,"reputation":912,"user_id":5929690,"accept_rate":50,"display_name":"Rahul Sharma"},"score":0,"creation_date":1695217965,"post_id":77140408,"comment_id":135995057,"body_markdown":"I guess that is one way to do it. But I&#39;d rather have different properties files for different profiles/envs than sections in the same file.","body":"I guess that is one way to do it. But I&#39;d rather have different properties files for different profiles/envs than sections in the same file."},{"owner":{"account_id":11512222,"reputation":87,"user_id":8436642,"display_name":"Nico S."},"score":0,"creation_date":1695315426,"post_id":77140408,"comment_id":136011322,"body_markdown":"I see mhh might work with this approach and profile groups then maby @RahulSharma","body":"I see mhh might work with this approach and profile groups then maby @RahulSharma"},{"owner":{"account_id":11512222,"reputation":87,"user_id":8436642,"display_name":"Nico S."},"score":0,"creation_date":1695316860,"post_id":77140408,"comment_id":136011617,"body_markdown":"That does not work for me i checked it. What could work is spring.config.import in the application-custom.yml and spring.config.activate-on-profile.\n\nSo for dev:\nspring:\n    config:\n         activate-on-profile: dev\n         import: application-custom-dev.yml","body":"That does not work for me i checked it. What could work is spring.config.import in the application-custom.yml and spring.config.activate-on-profile.  So for dev: spring:     config:          activate-on-profile: dev          import: application-custom-dev.yml"}],"tags":[],"owner":{"account_id":11512222,"reputation":87,"user_id":8436642,"display_name":"Nico S."},"comment_count":3,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695196644,"creation_date":1695196644,"answer_id":77140408,"question_id":77097758,"body_markdown":"We do the same currently by using a application-custom.yml in our lib and in the yml-file we seperate in default dev and so on...\r\n\r\nWhen you then activate the custom profile with spring.profiles.include in your main app spring picks up the applicaiton-custom.yml in your dependency","title":"Load custom starter properties files based on profile","body":"<p>We do the same currently by using a application-custom.yml in our lib and in the yml-file we seperate in default dev and so on...</p>\n<p>When you then activate the custom profile with spring.profiles.include in your main app spring picks up the applicaiton-custom.yml in your dependency</p>\n"}],"owner":{"account_id":7844116,"reputation":912,"user_id":5929690,"accept_rate":50,"display_name":"Rahul Sharma"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":63,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1695196644,"creation_date":1694613338,"question_id":77097758,"body_markdown":"With spring boot v2.3.4 I could use `ConfigFileApplicationListener` to load properties files from my custom starters by writing a environment post processor like\r\n```\r\npublic class StarterEnvironmentPostProcessor implements EnvironmentPostProcessor {\r\n    private final ConfigFileApplicationListener environmentPostProcessor = new ConfigFileApplicationListener();\r\n\r\n    public StarterEnvironmentPostProcessor(String name) {\r\n        environmentPostProcessor.setSearchNames(name);\r\n    }\r\n\r\n    @Override\r\n    public void postProcessEnvironment(ConfigurableEnvironment environment, SpringApplication application) {\r\n        environmentPostProcessor.postProcessEnvironment(environment, application);\r\n    }\r\n}\r\n```\r\n\r\nAnd then from each starter I could subclass this environment post processor like\r\n```\r\npublic class MyStarterEnvironmentPostProcessor extends StarterEnvironmentPostProcessor {\r\n\r\n    public MyStarterEnvironmentPostProcessor() {\r\n        super(&quot;my-starter&quot;);\r\n    }\r\n}\r\n```\r\nThis would result in properties being loaded appropriately i.e. if I ran the application that consumes this starter, with profile `dev`, then properties would be loaded from `my-starter.properties`, `my-starter-dev.properties`, `application.properties` and `application-dev.properties`, where the first two come from the starter and the last 2 come from the consuming project.\r\n\r\n`ConfigFileApplicationListener` has been removed in spring boot v3.0.\r\nThe deprecation warning on the class suggests to use `ConfigDataEnvironmentPostProcessor` instead.\r\n\r\nAfter debugging I found that `StandardConfigDataLocationResolver` is used to resolve the properties files to be loaded.\r\nIt constructs config file names like\r\n```\r\nString[] configNames = binder.bind(CONFIG_NAME_PROPERTY, String[].class).orElse(DEFAULT_CONFIG_NAMES);\r\n```\r\nmeaning there isn&#39;t a way for me to inject `my-starter` config name here.\r\nI do not want the project that consumes the custom starters (there are multiple custom starters) to be aware of the config locations.\r\nRather I want the auto configured custom starters to be responsible for loading the appropriate properties.\r\n\r\nHow can I achieve this in spring boot v3.0?","title":"Load custom starter properties files based on profile","body":"<p>With spring boot v2.3.4 I could use <code>ConfigFileApplicationListener</code> to load properties files from my custom starters by writing a environment post processor like</p>\n<pre><code>public class StarterEnvironmentPostProcessor implements EnvironmentPostProcessor {\n    private final ConfigFileApplicationListener environmentPostProcessor = new ConfigFileApplicationListener();\n\n    public StarterEnvironmentPostProcessor(String name) {\n        environmentPostProcessor.setSearchNames(name);\n    }\n\n    @Override\n    public void postProcessEnvironment(ConfigurableEnvironment environment, SpringApplication application) {\n        environmentPostProcessor.postProcessEnvironment(environment, application);\n    }\n}\n</code></pre>\n<p>And then from each starter I could subclass this environment post processor like</p>\n<pre><code>public class MyStarterEnvironmentPostProcessor extends StarterEnvironmentPostProcessor {\n\n    public MyStarterEnvironmentPostProcessor() {\n        super(&quot;my-starter&quot;);\n    }\n}\n</code></pre>\n<p>This would result in properties being loaded appropriately i.e. if I ran the application that consumes this starter, with profile <code>dev</code>, then properties would be loaded from <code>my-starter.properties</code>, <code>my-starter-dev.properties</code>, <code>application.properties</code> and <code>application-dev.properties</code>, where the first two come from the starter and the last 2 come from the consuming project.</p>\n<p><code>ConfigFileApplicationListener</code> has been removed in spring boot v3.0.\nThe deprecation warning on the class suggests to use <code>ConfigDataEnvironmentPostProcessor</code> instead.</p>\n<p>After debugging I found that <code>StandardConfigDataLocationResolver</code> is used to resolve the properties files to be loaded.\nIt constructs config file names like</p>\n<pre><code>String[] configNames = binder.bind(CONFIG_NAME_PROPERTY, String[].class).orElse(DEFAULT_CONFIG_NAMES);\n</code></pre>\n<p>meaning there isn't a way for me to inject <code>my-starter</code> config name here.\nI do not want the project that consumes the custom starters (there are multiple custom starters) to be aware of the config locations.\nRather I want the auto configured custom starters to be responsible for loading the appropriate properties.</p>\n<p>How can I achieve this in spring boot v3.0?</p>\n"},{"tags":["java","spring","rest"],"comments":[{"owner":{"account_id":2390644,"reputation":4058,"user_id":2090555,"accept_rate":83,"display_name":"Himanshu Bhardwaj"},"score":0,"creation_date":1545111495,"post_id":53826462,"comment_id":94502450,"body_markdown":"This question will get closed, if you don&#39;t put in clear details what you are asking.","body":"This question will get closed, if you don&#39;t put in clear details what you are asking."}],"answers":[{"comments":[{"owner":{"account_id":10643013,"reputation":300,"user_id":7837411,"accept_rate":0,"display_name":"Bhawna Joshi"},"score":0,"creation_date":1545111525,"post_id":53826921,"comment_id":94502459,"body_markdown":"I don&#39;t want status code. I want a class where http and hhtps constants are defined. As of now I am defining custom constant class","body":"I don&#39;t want status code. I want a class where http and hhtps constants are defined. As of now I am defining custom constant class"},{"owner":{"account_id":7084651,"reputation":447,"user_id":5421812,"display_name":"isudarsan"},"score":0,"creation_date":1545111797,"post_id":53826921,"comment_id":94502547,"body_markdown":"I am not aware any such class from Spring but you can refer HttpStatus interface from org.apache.http, here all constants enumeration is defined.","body":"I am not aware any such class from Spring but you can refer HttpStatus interface from org.apache.http, here all constants enumeration is defined."}],"tags":[],"owner":{"account_id":7084651,"reputation":447,"user_id":5421812,"display_name":"isudarsan"},"comment_count":2,"down_vote_count":4,"up_vote_count":0,"is_accepted":false,"score":-4,"last_activity_date":1545111204,"creation_date":1545111204,"answer_id":53826921,"question_id":53826462,"body_markdown":"    HttpStatus.OK.value() will return the integer value of the status code.\r\nProbably this will help your query, this is from `org.springframework.http` package","title":"Any method to get constant for HTTP and HTTPS values","body":"<pre><code>HttpStatus.OK.value() will return the integer value of the status code.\n</code></pre>\n\n<p>Probably this will help your query, this is from <code>org.springframework.http</code> package</p>\n"},{"tags":[],"owner":{"account_id":239878,"reputation":300,"user_id":509756,"display_name":"luskwater"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1629400739,"creation_date":1629400739,"answer_id":68853500,"question_id":53826462,"body_markdown":"As far as I can tell (as of JDK 8 which I have handy), the best you can do _within_ the Java JDK is \r\n\r\n`javax.print.attribute.standard.ReferenceUriSchemesSupported`\r\n\r\nwhich provides a number of URI-Schemes:\r\n\r\n    import javax.print.attribute.standard.ReferenceUriSchemesSupported;\r\n    // ...\r\n    System.out.println(ReferenceUriSchemesSupported.HTTPS); // =&gt; &quot;https&quot;\r\n\r\nOf course, it also has `GOPHER`, `NNTP`, `NEWS`, and a few other out-of-date schemes, but it _does_ provide what you want.\r\n\r\nOther answers on the web suggest other frameworks, many of which _do_ define the two protocols.\r\n\r\nOtherwise, you just need something like this:\r\n\r\n    package demo;\r\n\r\n    public enum Scheme {\r\n        HTTP(&quot;http&quot;),\r\n        HTTPS(&quot;https&quot;);\r\n        private final String scheme;\r\n\r\n        private Scheme(String scheme) {\r\n            this.scheme = scheme;\r\n        }\r\n\r\n        @Override\r\n        public String toString() {\r\n            return scheme;\r\n        }\r\n    }\r\n","title":"Any method to get constant for HTTP and HTTPS values","body":"<p>As far as I can tell (as of JDK 8 which I have handy), the best you can do <em>within</em> the Java JDK is</p>\n<p><code>javax.print.attribute.standard.ReferenceUriSchemesSupported</code></p>\n<p>which provides a number of URI-Schemes:</p>\n<pre><code>import javax.print.attribute.standard.ReferenceUriSchemesSupported;\n// ...\nSystem.out.println(ReferenceUriSchemesSupported.HTTPS); // =&gt; &quot;https&quot;\n</code></pre>\n<p>Of course, it also has <code>GOPHER</code>, <code>NNTP</code>, <code>NEWS</code>, and a few other out-of-date schemes, but it <em>does</em> provide what you want.</p>\n<p>Other answers on the web suggest other frameworks, many of which <em>do</em> define the two protocols.</p>\n<p>Otherwise, you just need something like this:</p>\n<pre><code>package demo;\n\npublic enum Scheme {\n    HTTP(&quot;http&quot;),\n    HTTPS(&quot;https&quot;);\n    private final String scheme;\n\n    private Scheme(String scheme) {\n        this.scheme = scheme;\n    }\n\n    @Override\n    public String toString() {\n        return scheme;\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":9267,"reputation":13505,"user_id":17035,"accept_rate":100,"display_name":"An̲̳̳drew"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1645644430,"creation_date":1645644430,"answer_id":71242968,"question_id":53826462,"body_markdown":"A little clunky, but these work.\r\n\r\n`String.valueOf(org.apache.commons.httpclient.HttpURL.DEFAULT_SCHEME)`\r\n`String.valueOf(org.apache.commons.httpclient.HttpsURL.DEFAULT_SCHEME)`\r\n\r\nThere&#39;s also `org.mortbay.jetty.HttpSchemes.HTTP` and `org.mortbay.jetty.HttpSchemes.HTTPS`.","title":"Any method to get constant for HTTP and HTTPS values","body":"<p>A little clunky, but these work.</p>\n<p><code>String.valueOf(org.apache.commons.httpclient.HttpURL.DEFAULT_SCHEME)</code>\n<code>String.valueOf(org.apache.commons.httpclient.HttpsURL.DEFAULT_SCHEME)</code></p>\n<p>There's also <code>org.mortbay.jetty.HttpSchemes.HTTP</code> and <code>org.mortbay.jetty.HttpSchemes.HTTPS</code>.</p>\n"},{"tags":[],"owner":{"account_id":13705513,"reputation":11,"user_id":9889270,"display_name":"Sachin Sharma"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695195847,"creation_date":1695195847,"answer_id":77140321,"question_id":53826462,"body_markdown":"In Apache HttpClient, we have the ENUM UriScheme (org.apache.hc.core5.http.UriScheme)","title":"Any method to get constant for HTTP and HTTPS values","body":"<p>In Apache HttpClient, we have the ENUM UriScheme (org.apache.hc.core5.http.UriScheme)</p>\n"}],"owner":{"account_id":10643013,"reputation":300,"user_id":7837411,"accept_rate":0,"display_name":"Bhawna Joshi"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2117,"favorite_count":0,"down_vote_count":1,"up_vote_count":4,"answer_count":4,"score":3,"last_activity_date":1695195847,"creation_date":1545107836,"question_id":53826462,"body_markdown":"Is there a class whene HTTP and HTTPs constant value is defined. As of now I have created a custom class.\r\n\r\n       public static class UrlConstants {\r\n\r\n        private UrlConstants() {\r\n            super();\r\n        }\r\n\r\n        /** The Constant HTTP. */\r\n        public static final String HTTP = &quot;http&quot;;\r\n    }","title":"Any method to get constant for HTTP and HTTPS values","body":"<p>Is there a class whene HTTP and HTTPs constant value is defined. As of now I have created a custom class.</p>\n\n<pre><code>   public static class UrlConstants {\n\n    private UrlConstants() {\n        super();\n    }\n\n    /** The Constant HTTP. */\n    public static final String HTTP = \"http\";\n}\n</code></pre>\n"},{"tags":["java","eclipse","maven","java-10"],"comments":[{"owner":{"account_id":10098519,"reputation":5323,"user_id":7463126,"display_name":"Alan Bateman"},"score":1,"creation_date":1530254132,"post_id":51094274,"comment_id":89178991,"body_markdown":"I don&#39;t know anything about Eclipse but the classes you list are in the java.xml module. If you were previously deploying xml-apis-1.4.01 on the class path then I assume the classes were never actually loaded from that JAR file, they were loaded (and continue to be loaded) from the JDK. Does your project build/run outside of Eclipse?","body":"I don&#39;t know anything about Eclipse but the classes you list are in the java.xml module. If you were previously deploying xml-apis-1.4.01 on the class path then I assume the classes were never actually loaded from that JAR file, they were loaded (and continue to be loaded) from the JDK. Does your project build/run outside of Eclipse?"},{"owner":{"account_id":61330,"reputation":4234,"user_id":182837,"accept_rate":62,"display_name":"Carsten"},"score":0,"creation_date":1530256577,"post_id":51094274,"comment_id":89180125,"body_markdown":"Yes, a maven command line build, or even a explicit maven build within Eclipse both work. It&#39;s just the Eclipse built-in build that fails.","body":"Yes, a maven command line build, or even a explicit maven build within Eclipse both work. It&#39;s just the Eclipse built-in build that fails."},{"owner":{"account_id":13796,"reputation":19353,"user_id":27905,"display_name":"nitind"},"score":0,"creation_date":1530257862,"post_id":51094274,"comment_id":89180855,"body_markdown":"You have to use Oxygen.1a or newer, the original Oxygen release simply doesn&#39;t support Jigsaw. Your best bet is to stay on Photon while you try to figure this out. As a Maven project, shouldn&#39;t you be setting compiler versions in the `pom.xml`?","body":"You have to use Oxygen.1a or newer, the original Oxygen release simply doesn&#39;t support Jigsaw. Your best bet is to stay on Photon while you try to figure this out. As a Maven project, shouldn&#39;t you be setting compiler versions in the <code>pom.xml</code>?"},{"owner":{"account_id":61330,"reputation":4234,"user_id":182837,"accept_rate":62,"display_name":"Carsten"},"score":0,"creation_date":1530410119,"post_id":51094274,"comment_id":89225296,"body_markdown":"@nitind pom.xml sets the compiier to 10, but you can overwrite this in the Eclipse build preferences.","body":"@nitind pom.xml sets the compiier to 10, but you can overwrite this in the Eclipse build preferences."},{"owner":{"account_id":5853491,"reputation":8043,"user_id":4611488,"display_name":"Stephan Herrmann"},"score":0,"creation_date":1545091465,"post_id":51094274,"comment_id":94498382,"body_markdown":"@AlanBateman are you aware of any excuse why `javac` would be allowed to accept a package that is not uniquely visible? (see also my answer).  I could not find anything that would define named vs. unnamed module conflicts as being exempted from the rule. Am I missing s.t.?","body":"@AlanBateman are you aware of any excuse why <code>javac</code> would be allowed to accept a package that is not uniquely visible? (see also my answer).  I could not find anything that would define named vs. unnamed module conflicts as being exempted from the rule. Am I missing s.t.?"},{"owner":{"account_id":10098519,"reputation":5323,"user_id":7463126,"display_name":"Alan Bateman"},"score":1,"creation_date":1545118942,"post_id":51094274,"comment_id":94505150,"body_markdown":"Stephan - can you bring your question to to jigsaw-dev?","body":"Stephan - can you bring your question to to jigsaw-dev?"},{"owner":{"account_id":5853491,"reputation":8043,"user_id":4611488,"display_name":"Stephan Herrmann"},"score":0,"creation_date":1545160228,"post_id":51094274,"comment_id":94527415,"body_markdown":"@AlanBateman, done, see http://mail.openjdk.java.net/pipermail/jigsaw-dev/2018-December/014076.html (I didn&#39;t see your reply earlier since you didn&#39;t &quot;mention&quot; me).","body":"@AlanBateman, done, see <a href=\"http://mail.openjdk.java.net/pipermail/jigsaw-dev/2018-December/014076.html\" rel=\"nofollow noreferrer\">mail.openjdk.java.net/pipermail/jigsaw-dev/2018-December/&hellip;</a> (I didn&#39;t see your reply earlier since you didn&#39;t &quot;mention&quot; me)."},{"owner":{"account_id":4218123,"reputation":9909,"user_id":3453898,"accept_rate":75,"display_name":"pixel"},"score":0,"creation_date":1635279152,"post_id":51094274,"comment_id":123253763,"body_markdown":"I am having same issue in 2021, Eclipse 2021-03, OpenJDK 11 and Oracle JDK11.  I read below answer and it is great answer but I dont know how to fix it, specifically refering to Solution #3 provided by @StephanHerrmann.  The answer is great but I wish there were more details, I was not able to follow with my version of Eclipse.","body":"I am having same issue in 2021, Eclipse 2021-03, OpenJDK 11 and Oracle JDK11.  I read below answer and it is great answer but I dont know how to fix it, specifically refering to Solution #3 provided by @StephanHerrmann.  The answer is great but I wish there were more details, I was not able to follow with my version of Eclipse."}],"answers":[{"comments":[{"owner":{"account_id":61330,"reputation":4234,"user_id":182837,"accept_rate":62,"display_name":"Carsten"},"score":1,"creation_date":1530248818,"post_id":51094559,"comment_id":89177104,"body_markdown":"Thanks for your answer. I don&#39;t think the classes in question are part of the ones that are referred to in the other SO question. \nMy problem classes all come from the maven dependency xml-apis-1.4.01.  The dependency (as all other maven dependencies) is part of the build path.","body":"Thanks for your answer. I don&#39;t think the classes in question are part of the ones that are referred to in the other SO question.  My problem classes all come from the maven dependency xml-apis-1.4.01.  The dependency (as all other maven dependencies) is part of the build path."},{"owner":{"account_id":112317,"reputation":93949,"user_id":296328,"accept_rate":60,"display_name":"khmarbaise"},"score":0,"creation_date":1530255002,"post_id":51094559,"comment_id":89179390,"body_markdown":"Which in the end does not change a thing you have to define a `module-info.java` definition file see https://www.oracle.com/corporate/features/understanding-java-9-modules.html otherwise it will not work.","body":"Which in the end does not change a thing you have to define a <code>module-info.java</code> definition file see <a href=\"https://www.oracle.com/corporate/features/understanding-java-9-modules.html\" rel=\"nofollow noreferrer\">oracle.com/corporate/features/understanding-java-9-modules.h&zwnj;&#8203;tml</a> otherwise it will not work."},{"owner":{"account_id":61330,"reputation":4234,"user_id":182837,"accept_rate":62,"display_name":"Carsten"},"score":0,"creation_date":1530410041,"post_id":51094559,"comment_id":89225286,"body_markdown":"Thanks for your comment. I&#39;m not sure this is right though. \nIn the Eclipse path the maven dependency is in the CLASSPATH not in the MODULEPATH, so shouldn&#39;t it be treated like a non-module jar? Also why does it only affect this one jar out of many, many similar maven dependencies. Lastly why would only the Eclipse internal build report an error, while both command line maven and explicit maven build in Eclipse succeed?","body":"Thanks for your comment. I&#39;m not sure this is right though.  In the Eclipse path the maven dependency is in the CLASSPATH not in the MODULEPATH, so shouldn&#39;t it be treated like a non-module jar? Also why does it only affect this one jar out of many, many similar maven dependencies. Lastly why would only the Eclipse internal build report an error, while both command line maven and explicit maven build in Eclipse succeed?"},{"owner":{"account_id":1215431,"reputation":1424,"user_id":1183126,"accept_rate":38,"display_name":"Tom"},"score":0,"creation_date":1531254409,"post_id":51094559,"comment_id":89524952,"body_markdown":"I&#39;m having the same problem. I can successfully compile my project with javac, but Eclipse can&#39;t find these classes. Did you find a solution to this problem?","body":"I&#39;m having the same problem. I can successfully compile my project with javac, but Eclipse can&#39;t find these classes. Did you find a solution to this problem?"},{"owner":{"account_id":184786,"reputation":18896,"user_id":421049,"accept_rate":50,"display_name":"Garret Wilson"},"score":2,"creation_date":1544475021,"post_id":51094559,"comment_id":94281425,"body_markdown":"I marked this answer down because I don&#39;t see how it relates at all. This is a classpath issue, not a module issue. Moreover it works with Maven+JDK on the command line. If it works with Maven+JDK but not in Eclipse, the problem is in Eclipse, and all the prose about how JDK was broken down into modules is ancillary and, while interesting and not necessarily incorrect, is nevertheless irrelevant.","body":"I marked this answer down because I don&#39;t see how it relates at all. This is a classpath issue, not a module issue. Moreover it works with Maven+JDK on the command line. If it works with Maven+JDK but not in Eclipse, the problem is in Eclipse, and all the prose about how JDK was broken down into modules is ancillary and, while interesting and not necessarily incorrect, is nevertheless irrelevant."}],"tags":[],"owner":{"account_id":11382286,"reputation":1591,"user_id":8344882,"display_name":"gagan singh"},"comment_count":5,"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1530248217,"creation_date":1530248217,"answer_id":51094559,"question_id":51094274,"body_markdown":"jdk 9+ brought in changes related to project jigsaw. JDK was broken down into various modules and some modules, javaee, jaxb and xml related, are no more loaded by default. You should add these to your maven build directly, instead of expecting them to be in jre classpath. see this [SO question](https://stackoverflow.com/questions/43574426/how-to-resolve-java-lang-noclassdeffounderror-javax-xml-bind-jaxbexception-in-j/46455026)","title":"Eclipse can&#39;t find XML related classes after switching build path to JDK 10","body":"<p>jdk 9+ brought in changes related to project jigsaw. JDK was broken down into various modules and some modules, javaee, jaxb and xml related, are no more loaded by default. You should add these to your maven build directly, instead of expecting them to be in jre classpath. see this <a href=\"https://stackoverflow.com/questions/43574426/how-to-resolve-java-lang-noclassdeffounderror-javax-xml-bind-jaxbexception-in-j/46455026\">SO question</a></p>\n"},{"comments":[{"owner":{"account_id":4396854,"reputation":1866,"user_id":3583589,"display_name":"benez"},"score":0,"creation_date":1562676030,"post_id":53711657,"comment_id":100444025,"body_markdown":"unfortunately with the new eclipse version 2019-06, it is not possible anymore to change the order to resolve the issue","body":"unfortunately with the new eclipse version 2019-06, it is not possible anymore to change the order to resolve the issue"},{"owner":{"account_id":201558,"reputation":20199,"user_id":448078,"accept_rate":61,"display_name":"Mike"},"score":0,"creation_date":1677176319,"post_id":53711657,"comment_id":133291125,"body_markdown":"[fixed](https://github.com/eclipse-jdt/eclipse.jdt.core/pull/424)","body":"<a href=\"https://github.com/eclipse-jdt/eclipse.jdt.core/pull/424\" rel=\"nofollow noreferrer\">fixed</a>"}],"tags":[],"owner":{"account_id":184786,"reputation":18896,"user_id":421049,"accept_rate":50,"display_name":"Garret Wilson"},"comment_count":2,"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1544466914,"creation_date":1544466914,"answer_id":53711657,"question_id":51094274,"body_markdown":"This seems to have been reported as [Eclipse Bug 536928][1]. Maybe if everyone were to go vote on it it would get them to raise the priority.\r\n\r\n\r\n  [1]: https://bugs.eclipse.org/bugs/show_bug.cgi?id=536928","title":"Eclipse can&#39;t find XML related classes after switching build path to JDK 10","body":"<p>This seems to have been reported as <a href=\"https://bugs.eclipse.org/bugs/show_bug.cgi?id=536928\" rel=\"noreferrer\">Eclipse Bug 536928</a>. Maybe if everyone were to go vote on it it would get them to raise the priority.</p>\n"},{"comments":[{"owner":{"account_id":184786,"reputation":18896,"user_id":421049,"accept_rate":50,"display_name":"Garret Wilson"},"score":0,"creation_date":1544550190,"post_id":53712306,"comment_id":94312840,"body_markdown":"Thanks, I&#39;ll try that, but that&#39;s not really a workable solution for constant development, as we keep adding submodules and refreshing the Maven configuration, etc.","body":"Thanks, I&#39;ll try that, but that&#39;s not really a workable solution for constant development, as we keep adding submodules and refreshing the Maven configuration, etc."},{"owner":{"account_id":184786,"reputation":18896,"user_id":421049,"accept_rate":50,"display_name":"Garret Wilson"},"score":1,"creation_date":1544552660,"post_id":53712306,"comment_id":94314024,"body_markdown":"Unfortunately even this workaround didn&#39;t work for me.","body":"Unfortunately even this workaround didn&#39;t work for me."}],"tags":[],"owner":{"account_id":12566014,"reputation":134,"user_id":9141985,"display_name":"Yossi"},"comment_count":2,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1544469915,"creation_date":1544469915,"answer_id":53712306,"question_id":51094274,"body_markdown":"This is more of a work-around, but from my experience it can be resolved by going to the &quot;Java Build Path&quot;, the &quot;Order and Export&quot; tab, and sending the &quot;Maven Dependencies&quot; to the bottom (so it&#39;s below the &quot;JRE System Library&quot;).","title":"Eclipse can&#39;t find XML related classes after switching build path to JDK 10","body":"<p>This is more of a work-around, but from my experience it can be resolved by going to the \"Java Build Path\", the \"Order and Export\" tab, and sending the \"Maven Dependencies\" to the bottom (so it's below the \"JRE System Library\").</p>\n"},{"comments":[{"owner":{"account_id":184786,"reputation":18896,"user_id":421049,"accept_rate":50,"display_name":"Garret Wilson"},"score":0,"creation_date":1544567321,"post_id":53732518,"comment_id":94320461,"body_markdown":"Try cloning and building https://bitbucket.org/globalmentor/guise/commits/4dc75d8038b17d8fc9b3deeffb434aa36419871e . Note that I&#39;m using Eclipse Enterprise 2018-12 M3 with the latest updates.","body":"Try cloning and building <a href=\"https://bitbucket.org/globalmentor/guise/commits/4dc75d8038b17d8fc9b3deeffb434aa36419871e\" rel=\"nofollow noreferrer\">bitbucket.org/globalmentor/guise/commits/&hellip;</a> . Note that I&#39;m using Eclipse Enterprise 2018-12 M3 with the latest updates."},{"owner":{"account_id":2004139,"reputation":10783,"user_id":1794485,"display_name":"df778899"},"score":0,"creation_date":1544647938,"post_id":53732518,"comment_id":94355022,"body_markdown":"Managed to get that to build under Eclipse 4.9.0 + JDK 10.  Clearly the problem there wasn&#39;t the `xml-apis` dependency, but found such as `import org.w3c.dom.*;` was still failing.  Don&#39;t know if it&#39;s an option, but breaking these down to type level imports worked around the problem.  Example updated version [here](https://github.com/df789/jdk10-eclipse) .  The imports were fixed up using Eclipse&#39;s Organize Imports, so it looks like quite a lot of change.  Happy to make that a proper answer if it works out for you.","body":"Managed to get that to build under Eclipse 4.9.0 + JDK 10.  Clearly the problem there wasn&#39;t the <code>xml-apis</code> dependency, but found such as <code>import org.w3c.dom.*;</code> was still failing.  Don&#39;t know if it&#39;s an option, but breaking these down to type level imports worked around the problem.  Example updated version <a href=\"https://github.com/df789/jdk10-eclipse\" rel=\"nofollow noreferrer\">here</a> .  The imports were fixed up using Eclipse&#39;s Organize Imports, so it looks like quite a lot of change.  Happy to make that a proper answer if it works out for you."},{"owner":{"account_id":2004139,"reputation":10783,"user_id":1794485,"display_name":"df778899"},"score":0,"creation_date":1544648960,"post_id":53732518,"comment_id":94355416,"body_markdown":"... meant to say, the initial import of the projects wasn&#39;t good - NullPointerExceptions in the compiler.  But after a Maven/Update Project on the projects, it compiled cleanly.","body":"... meant to say, the initial import of the projects wasn&#39;t good - NullPointerExceptions in the compiler.  But after a Maven/Update Project on the projects, it compiled cleanly."},{"owner":{"account_id":184786,"reputation":18896,"user_id":421049,"accept_rate":50,"display_name":"Garret Wilson"},"score":0,"creation_date":1544666588,"post_id":53732518,"comment_id":94360743,"body_markdown":"But what about 2018-12 M3? I&#39;m not going back to 4.9.0. I&#39;m going forward with Java 11. I can&#39;t downgrade Eclipse!","body":"But what about 2018-12 M3? I&#39;m not going back to 4.9.0. I&#39;m going forward with Java 11. I can&#39;t downgrade Eclipse!"},{"owner":{"account_id":2004139,"reputation":10783,"user_id":1794485,"display_name":"df778899"},"score":0,"creation_date":1544728681,"post_id":53732518,"comment_id":94389160,"body_markdown":"Fine under 2018-12 RC1 + JDK 11 - the NullPointerExceptions were gone too","body":"Fine under 2018-12 RC1 + JDK 11 - the NullPointerExceptions were gone too"},{"owner":{"account_id":184786,"reputation":18896,"user_id":421049,"accept_rate":50,"display_name":"Garret Wilson"},"score":0,"creation_date":1544797483,"post_id":53732518,"comment_id":94414428,"body_markdown":"So you&#39;re saying that removing wildcard imports will work around the problem? And is that only for the XML-related imports, or do I have to do it for all imports? And do I have to do it for all files, or just the files that have XML-related imports?","body":"So you&#39;re saying that removing wildcard imports will work around the problem? And is that only for the XML-related imports, or do I have to do it for all imports? And do I have to do it for all files, or just the files that have XML-related imports?"},{"owner":{"account_id":2004139,"reputation":10783,"user_id":1794485,"display_name":"df778899"},"score":1,"creation_date":1544811974,"post_id":53732518,"comment_id":94421579,"body_markdown":"That&#39;s right.  I think it may be any JDK level wildcard imports - e.g. `import java.net.*` was also a problem.  Or maybe Eclipse has a problem with wildcard imports against modules in general.  It affected 6 files in the source you referenced - changeset [here](https://github.com/df789/jdk10-eclipse/commit/3a989132a4abdab5073827628079df5db93b1be3)","body":"That&#39;s right.  I think it may be any JDK level wildcard imports - e.g. <code>import java.net.*</code> was also a problem.  Or maybe Eclipse has a problem with wildcard imports against modules in general.  It affected 6 files in the source you referenced - changeset <a href=\"https://github.com/df789/jdk10-eclipse/commit/3a989132a4abdab5073827628079df5db93b1be3\" rel=\"nofollow noreferrer\">here</a>"},{"owner":{"account_id":1044095,"reputation":779,"user_id":1049447,"display_name":"Thorsten Wendelmuth"},"score":1,"creation_date":1554538850,"post_id":53732518,"comment_id":97796447,"body_markdown":"Just want to mention for anybody that encounters this issue that xercesImpl:2.12.0 also includes the org.w3c.dom.html package and could also very well be causing similar issues.","body":"Just want to mention for anybody that encounters this issue that xercesImpl:2.12.0 also includes the org.w3c.dom.html package and could also very well be causing similar issues."}],"tags":[],"owner":{"account_id":2004139,"reputation":10783,"user_id":1794485,"display_name":"df778899"},"comment_count":8,"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1544564687,"creation_date":1544563248,"answer_id":53732518,"question_id":51094274,"body_markdown":"Have seen something very similar under Eclipse 4.8.0 and JDK 10.  E.g.\r\n\r\n    import org.w3c.dom.Element;\r\n\r\nwas failing to compile in Eclipse with: `The import org.w3c.dom.Element cannot be resolved`\r\n\r\nEven so, pressing &lt;kbd&gt;F3&lt;/kbd&gt; (Open Declaration) on that import, Eclipse was able to open the interface definition - in this case under `xml-apis-1.4.01.jar`.\r\n\r\nMeanwhile, builds from Maven direct were working fine.\r\n\r\nIn this case the fix was to remove this dependency from the `pom.xml`:\r\n\r\n\t\t&lt;dependency&gt;\r\n\t\t    &lt;groupId&gt;xml-apis&lt;/groupId&gt;\r\n\t\t    &lt;artifactId&gt;xml-apis&lt;/artifactId&gt;\r\n\t\t    &lt;version&gt;1.4.01&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\nThen the compile errors in Eclipse melted away.  Following &lt;kbd&gt;F3&lt;/kbd&gt; again showed the `Element` interface - now under the `java.xml` module, under the JRE System Library under the project.  Also the Maven build remained fine.\r\n\r\nThis feels like a problem with Eclipse resolving a class that it finds in both a JDK module and dependent .jar file.\r\n\r\nInterestingly, in a separate environment, this time under Eclipse 4.9.0 and JDK 11, all is fine, with or without the `xml-apis:1.4.01` dependency.","title":"Eclipse can&#39;t find XML related classes after switching build path to JDK 10","body":"<p>Have seen something very similar under Eclipse 4.8.0 and JDK 10.  E.g.</p>\n\n<pre><code>import org.w3c.dom.Element;\n</code></pre>\n\n<p>was failing to compile in Eclipse with: <code>The import org.w3c.dom.Element cannot be resolved</code></p>\n\n<p>Even so, pressing <kbd>F3</kbd> (Open Declaration) on that import, Eclipse was able to open the interface definition - in this case under <code>xml-apis-1.4.01.jar</code>.</p>\n\n<p>Meanwhile, builds from Maven direct were working fine.</p>\n\n<p>In this case the fix was to remove this dependency from the <code>pom.xml</code>:</p>\n\n<pre><code>    &lt;dependency&gt;\n        &lt;groupId&gt;xml-apis&lt;/groupId&gt;\n        &lt;artifactId&gt;xml-apis&lt;/artifactId&gt;\n        &lt;version&gt;1.4.01&lt;/version&gt;\n    &lt;/dependency&gt;\n</code></pre>\n\n<p>Then the compile errors in Eclipse melted away.  Following <kbd>F3</kbd> again showed the <code>Element</code> interface - now under the <code>java.xml</code> module, under the JRE System Library under the project.  Also the Maven build remained fine.</p>\n\n<p>This feels like a problem with Eclipse resolving a class that it finds in both a JDK module and dependent .jar file.</p>\n\n<p>Interestingly, in a separate environment, this time under Eclipse 4.9.0 and JDK 11, all is fine, with or without the <code>xml-apis:1.4.01</code> dependency.</p>\n"},{"comments":[{"owner":{"account_id":184786,"reputation":18896,"user_id":421049,"accept_rate":50,"display_name":"Garret Wilson"},"score":0,"creation_date":1545095941,"post_id":53824670,"comment_id":94499334,"body_markdown":"Maybe I&#39;m missing something, but 1) the test project I mentioned in [Bug 536928](https://bugs.eclipse.org/bugs/show_bug.cgi?id=536928) is using the classpath, not modules, so I had understood (perhaps incorrectly) that `module-info.java` would have no relevance in a case like this; and 2) to my knowledge the test case I provided does not have `xml-apis` anywhere in the classpath, nor in transitive dependencies—unless I missed them somewhere.","body":"Maybe I&#39;m missing something, but 1) the test project I mentioned in <a href=\"https://bugs.eclipse.org/bugs/show_bug.cgi?id=536928\" rel=\"nofollow noreferrer\">Bug 536928</a> is using the classpath, not modules, so I had understood (perhaps incorrectly) that <code>module-info.java</code> would have no relevance in a case like this; and 2) to my knowledge the test case I provided does not have <code>xml-apis</code> anywhere in the classpath, nor in transitive dependencies—unless I missed them somewhere."},{"owner":{"account_id":5853491,"reputation":8043,"user_id":4611488,"display_name":"Stephan Herrmann"},"score":0,"creation_date":1545097010,"post_id":53824670,"comment_id":94499536,"body_markdown":"@GarretWilson ad (1): since Java 9, the JRE is always modular, so the &quot;old world&quot; is only approximately emulated by putting all non-modular code into one or more unnamed modules. Even for unnamed modules, new rules are in effecte starting with Java 9. Adding `module-info.java` is not part of the problem, but part of the solution (thereby moving your code from classpath to modulepath).","body":"@GarretWilson ad (1): since Java 9, the JRE is always modular, so the &quot;old world&quot; is only approximately emulated by putting all non-modular code into one or more unnamed modules. Even for unnamed modules, new rules are in effecte starting with Java 9. Adding <code>module-info.java</code> is not part of the problem, but part of the solution (thereby moving your code from classpath to modulepath)."},{"owner":{"account_id":5853491,"reputation":8043,"user_id":4611488,"display_name":"Stephan Herrmann"},"score":0,"creation_date":1545097319,"post_id":53824670,"comment_id":94499594,"body_markdown":"@GarretWilson ad (2): different people have dropped different examples into the Eclipse bug report. The initial report had xml-apis.jar in its transitive dependencies, so that&#39;s the case being handled in that bug, and it&#39;s also the case discussed in this SO thread. If you are certain that xml-apis.jar is nowhere in the picture in your case, then you are facing a different problem - which matches to the observation that only in your case explicit vs. on-demand imports seemed to make a difference, not here, though.","body":"@GarretWilson ad (2): different people have dropped different examples into the Eclipse bug report. The initial report had xml-apis.jar in its transitive dependencies, so that&#39;s the case being handled in that bug, and it&#39;s also the case discussed in this SO thread. If you are certain that xml-apis.jar is nowhere in the picture in your case, then you are facing a different problem - which matches to the observation that only in your case explicit vs. on-demand imports seemed to make a difference, not here, though."},{"owner":{"account_id":184786,"reputation":18896,"user_id":421049,"accept_rate":50,"display_name":"Garret Wilson"},"score":0,"creation_date":1545097685,"post_id":53824670,"comment_id":94499665,"body_markdown":"OK; that&#39;s why I put up a bounty, to get to the bottom of it. ;) Thanks for all your hard work. I&#39;m just looking for an answer that applies to my case as well.","body":"OK; that&#39;s why I put up a bounty, to get to the bottom of it. ;) Thanks for all your hard work. I&#39;m just looking for an answer that applies to my case as well."},{"owner":{"account_id":184786,"reputation":18896,"user_id":421049,"accept_rate":50,"display_name":"Garret Wilson"},"score":0,"creation_date":1545178029,"post_id":53824670,"comment_id":94533830,"body_markdown":"this bounty is expiring so I need to assign it. You gave a really good, comprehensive answer _directly related to the original question_, so I think it&#39;s only right that I assign you the bounty. Unfortunately it looks like my question, which initially appeared to be the same problem, won&#39;t be solved by your answer _even though solving my problem was my motivation for putting up the bounty_. So please don&#39;t lower the priority of the [Bug 542896](https://bugs.eclipse.org/bugs/show_bug.cgi?id=542896) you opened. Thank you!","body":"this bounty is expiring so I need to assign it. You gave a really good, comprehensive answer <i>directly related to the original question</i>, so I think it&#39;s only right that I assign you the bounty. Unfortunately it looks like my question, which initially appeared to be the same problem, won&#39;t be solved by your answer <i>even though solving my problem was my motivation for putting up the bounty</i>. So please don&#39;t lower the priority of the <a href=\"https://bugs.eclipse.org/bugs/show_bug.cgi?id=542896\" rel=\"nofollow noreferrer\">Bug 542896</a> you opened. Thank you!"},{"owner":{"account_id":188605,"reputation":5059,"user_id":427413,"accept_rate":71,"display_name":"marcus"},"score":0,"creation_date":1552071400,"post_id":53824670,"comment_id":96886209,"body_markdown":"This problem affects VS Code with Java 11 too. It shows the new message (The package javax.xml is accessible from more than one module: &lt;unnamed&gt;, java.xml), but I still don&#39;t know how to solve it in VS Code. The project builds fine in Maven.","body":"This problem affects VS Code with Java 11 too. It shows the new message (The package javax.xml is accessible from more than one module: &lt;unnamed&gt;, java.xml), but I still don&#39;t know how to solve it in VS Code. The project builds fine in Maven."},{"owner":{"account_id":5853491,"reputation":8043,"user_id":4611488,"display_name":"Stephan Herrmann"},"score":0,"creation_date":1552245513,"post_id":53824670,"comment_id":96927455,"body_markdown":"@marcus if it&#39;s indeed the same issue, then your module dependencies are illegal and need to be fixed. Maven building fine would then simply reflect that you are using a compiler (javac) that still doesn&#39;t report this mandatory error (_or perhaps maven invokes the compiler with different options than what you have configured in Eclipse_).","body":"@marcus if it&#39;s indeed the same issue, then your module dependencies are illegal and need to be fixed. Maven building fine would then simply reflect that you are using a compiler (javac) that still doesn&#39;t report this mandatory error (<i>or perhaps maven invokes the compiler with different options than what you have configured in Eclipse</i>)."},{"owner":{"account_id":188605,"reputation":5059,"user_id":427413,"accept_rate":71,"display_name":"marcus"},"score":1,"creation_date":1552314262,"post_id":53824670,"comment_id":96950787,"body_markdown":"Thanks, I guess I will need to exclude some transitive dependencies then (or update more libraries).","body":"Thanks, I guess I will need to exclude some transitive dependencies then (or update more libraries)."},{"owner":{"account_id":188605,"reputation":5059,"user_id":427413,"accept_rate":71,"display_name":"marcus"},"score":0,"creation_date":1552318515,"post_id":53824670,"comment_id":96953577,"body_markdown":"@StephanHerrmann OK, I excluded xml-apis, but some errors persist. What if the dependencies come from something like javax:javaee-api:8.0 or javax.xml.bind:jaxb-api:2.3.0? I thought they were the right and most up to date dependencies to add when you need this Java EE features in Java 11 (if a new question would be better, feel free to tell me so).","body":"@StephanHerrmann OK, I excluded xml-apis, but some errors persist. What if the dependencies come from something like javax:javaee-api:8.0 or javax.xml.bind:jaxb-api:2.3.0? I thought they were the right and most up to date dependencies to add when you need this Java EE features in Java 11 (if a new question would be better, feel free to tell me so)."},{"owner":{"account_id":5853491,"reputation":8043,"user_id":4611488,"display_name":"Stephan Herrmann"},"score":0,"creation_date":1552386800,"post_id":53824670,"comment_id":96980172,"body_markdown":"@marcus Sorry, I&#39;m not really in the position to give recommendations for your project structure. The current thread here only deals with the question, whether or not it is correct to flag that situation as illegal, and we conclude, yes it is correct. From here, Eclipse is only the messenger. Some options that I know of, are: (consistently!) exclude &quot;normal&quot; dependencies or use `--limit-modules`. If this doesn&#39;t suffice and if there isn&#39;t yet a thread on strategies regarding xml-apis then, yes, a new question seeking recommendations could be a good idea.","body":"@marcus Sorry, I&#39;m not really in the position to give recommendations for your project structure. The current thread here only deals with the question, whether or not it is correct to flag that situation as illegal, and we conclude, yes it is correct. From here, Eclipse is only the messenger. Some options that I know of, are: (consistently!) exclude &quot;normal&quot; dependencies or use <code>--limit-modules</code>. If this doesn&#39;t suffice and if there isn&#39;t yet a thread on strategies regarding xml-apis then, yes, a new question seeking recommendations could be a good idea."},{"owner":{"account_id":459254,"reputation":986,"user_id":859604,"display_name":"Olivier Cailloux"},"score":3,"creation_date":1564045462,"post_id":53824670,"comment_id":100904739,"body_markdown":"Great answer. Would you consider writing a follow-up explaining the specific procedure to be followed, using the new UI, for someone that does not understand the precise rules of modular compilation? (I am thinking of students of mine learning Java, I can’t teach them all the complexity of Java in one go but still would like to expose them to interesting projects as soon as possible, where they might face this difficulty.)","body":"Great answer. Would you consider writing a follow-up explaining the specific procedure to be followed, using the new UI, for someone that does not understand the precise rules of modular compilation? (I am thinking of students of mine learning Java, I can’t teach them all the complexity of Java in one go but still would like to expose them to interesting projects as soon as possible, where they might face this difficulty.)"},{"owner":{"account_id":5853491,"reputation":8043,"user_id":4611488,"display_name":"Stephan Herrmann"},"score":0,"creation_date":1564137349,"post_id":53824670,"comment_id":100940816,"body_markdown":"@OlivierCailloux I proposed a conference presentation on the general topic as https://www.eclipsecon.org/europe2019/sessions/tweak-your-modules When the proposal is accepted and slides are prepared I will put them online (unless I forget ;X).","body":"@OlivierCailloux I proposed a conference presentation on the general topic as <a href=\"https://www.eclipsecon.org/europe2019/sessions/tweak-your-modules\" rel=\"nofollow noreferrer\">eclipsecon.org/europe2019/sessions/tweak-your-modules</a> When the proposal is accepted and slides are prepared I will put them online (unless I forget ;X)."},{"owner":{"account_id":1386556,"reputation":7199,"user_id":1318479,"accept_rate":88,"display_name":"cb4"},"score":7,"creation_date":1564625062,"post_id":53824670,"comment_id":101095394,"body_markdown":"@OlivierCailloux Buried in the [Eclipse bug report thread at comment 51](https://bugs.eclipse.org/bugs/show_bug.cgi?id=536928) are these short instructions that worked for me: &quot;To exclude xml-apis.jar, open your POM in eclipse, go to the Dependency Hierarchy tab, filter by xml-api, right-click on any instance of xml-apis that appears, and choose Exclude Maven Artifact.&quot;","body":"@OlivierCailloux Buried in the <a href=\"https://bugs.eclipse.org/bugs/show_bug.cgi?id=536928\" rel=\"nofollow noreferrer\">Eclipse bug report thread at comment 51</a> are these short instructions that worked for me: &quot;To exclude xml-apis.jar, open your POM in eclipse, go to the Dependency Hierarchy tab, filter by xml-api, right-click on any instance of xml-apis that appears, and choose Exclude Maven Artifact.&quot;"},{"owner":{"account_id":459254,"reputation":986,"user_id":859604,"display_name":"Olivier Cailloux"},"score":3,"creation_date":1564750394,"post_id":53824670,"comment_id":101143614,"body_markdown":"Third solution: exclude `xml.apis` from the project dependencies. Drawbacks compared to excluding `java.xml` from the set of observable modules: 1) the dependency that introduced `xml.apis` as a transitive dependency (`xerces`, in my case) might work well with that specific version and misbehave with the one provided with the JRE (which might be older); 2) `xml.apis` might provide classes not included in the version provided with the JRE. But, similar risks exist with excluding the `java.xml` module (on which other components might depend). @StephanHerrmann: any thoughts?","body":"Third solution: exclude <code>xml.apis</code> from the project dependencies. Drawbacks compared to excluding <code>java.xml</code> from the set of observable modules: 1) the dependency that introduced <code>xml.apis</code> as a transitive dependency (<code>xerces</code>, in my case) might work well with that specific version and misbehave with the one provided with the JRE (which might be older); 2) <code>xml.apis</code> might provide classes not included in the version provided with the JRE. But, similar risks exist with excluding the <code>java.xml</code> module (on which other components might depend). @StephanHerrmann: any thoughts?"},{"owner":{"account_id":459254,"reputation":986,"user_id":859604,"display_name":"Olivier Cailloux"},"score":2,"creation_date":1564750640,"post_id":53824670,"comment_id":101143765,"body_markdown":"Plus, `xml.apis:xml.apis:1.4.01` seems to be a subset of `java.xml` (as provided in OpenJDK 11): I found no class included in the former missing in the latter, except for `org.apache.xmlcommons.Version`, but conversely, many classes from `java.xml` are not in `xml.apis`. Thus I’d rather recommend to exclude `xml.apis` and keep the JRE module.","body":"Plus, <code>xml.apis:xml.apis:1.4.01</code> seems to be a subset of <code>java.xml</code> (as provided in OpenJDK 11): I found no class included in the former missing in the latter, except for <code>org.apache.xmlcommons.Version</code>, but conversely, many classes from <code>java.xml</code> are not in <code>xml.apis</code>. Thus I’d rather recommend to exclude <code>xml.apis</code> and keep the JRE module."},{"owner":{"account_id":5405894,"reputation":1357,"user_id":4304439,"accept_rate":100,"display_name":"Alex Byrth"},"score":0,"creation_date":1564942093,"post_id":53824670,"comment_id":101185889,"body_markdown":"My DUMB workaround: Set project compiler as Java 1.8 and rebuild. We don&#39;t need any feature later than Java 8 so it&#39;s ok for now.","body":"My DUMB workaround: Set project compiler as Java 1.8 and rebuild. We don&#39;t need any feature later than Java 8 so it&#39;s ok for now."},{"owner":{"account_id":2660877,"reputation":38543,"user_id":2300597,"accept_rate":55,"display_name":"peter.petrov"},"score":0,"creation_date":1642449521,"post_id":53824670,"comment_id":125068910,"body_markdown":"Is the answer still valid? I don&#39;t find this contents tab or details dialog in the latest version of Eclipse. Am I just missing it?","body":"Is the answer still valid? I don&#39;t find this contents tab or details dialog in the latest version of Eclipse. Am I just missing it?"},{"owner":{"account_id":5853491,"reputation":8043,"user_id":4611488,"display_name":"Stephan Herrmann"},"score":0,"creation_date":1642536345,"post_id":53824670,"comment_id":125095749,"body_markdown":"@peter.petrov if you&#39;re looking for &quot;Modularity Details&quot; mentioned in Solution (3), just read down in the answer, upto the last bullet under &quot;Edits&quot;.","body":"@peter.petrov if you&#39;re looking for &quot;Modularity Details&quot; mentioned in Solution (3), just read down in the answer, upto the last bullet under &quot;Edits&quot;."},{"owner":{"account_id":2660877,"reputation":38543,"user_id":2300597,"accept_rate":55,"display_name":"peter.petrov"},"score":0,"creation_date":1642537666,"post_id":53824670,"comment_id":125096173,"body_markdown":"@StephanHerrmann Thanks a lot!","body":"@StephanHerrmann Thanks a lot!"}],"tags":[],"owner":{"account_id":5853491,"reputation":8043,"user_id":4611488,"display_name":"Stephan Herrmann"},"comment_count":19,"down_vote_count":0,"up_vote_count":117,"is_accepted":true,"score":117,"last_activity_date":1671723221,"creation_date":1545091317,"answer_id":53824670,"question_id":51094274,"body_markdown":"I assume that the project being migrated from Java 1.8 still has no `module-info.java`. This implies you are compiling code in the &quot;unnamed module&quot;.\r\n\r\nCode in the unnamed module &quot;reads&quot; all observable named and unnamed modules, in particular it reads module &quot;java.xml&quot; from the JRE System Library. This module exports package like `java.xml.xpath`.\r\n\r\nAdditionally, you have `xml-apis.java` on the classpath, which contributes another set of packages of the same names (`java.xml.xpath` and friends). These are said to be associated to the unnamed module, like your own code.\r\n\r\nThis situation violates the **requirement of &quot;unique visibility&quot;** as defined in [JLS &#167;7.4.3][1] (last paragraph). In particular every qualified type name Q.Id ([JSL &#167;6.5.5.2][2]) requires that its prefix Q is a uniquely visible package (I&#39;m disregarding the case of nested types for simplicity). Ergo: the program is illegal and must be rejected by compilers.\r\n\r\nThis leaves us with one question and two solutions:\r\n\r\n(1) Question: Why is javac accepting the program?\r\n\r\n(2) Solution: If you add `module-info.java` to your project, you can control via **requires** which module your project reads, either ` requires java.xml;`  or `requires xml.apis;` (where &quot;xml.apis&quot; is the automatic module name of &quot;xml-apis-1.4.01.jar).\r\n\r\n(3) Solution: Short of turning your project into a module, you can still avoid the conflict by excluding `java.xml` from the set of observable modules. On the command line this would be done using `--limit-modules`. The equivalent in Eclipse is the [&quot;Modularity Details&quot; dialog][3], see also the [JDT 4.8 New&amp;Noteworthy][4] (look for **Contents** tab). Since `java.xml` is implicitly required via a lot of other default-observable modules, it may be a good idea to push everything except for `java.base` from right (&quot;Explicitly included modules&quot;) to left (&quot;Available modules&quot;) (and selectively re-add those modules that your project needs).\r\n\r\nPS: Eclipse still doesn&#39;t provide an ideal error message, instead of &quot;cannot be resolved&quot; it should actually say: &quot;The package javax.xml.xpath is accessible from more than one module: javax.xml, &amp;lt;unnamed&gt;.\r\n\r\nPPS: Also weird: how come that changing the order between JRE and a jar on the classpath (such ordering is not a concept supported by javac nor JEP 261) changes the behavior of the compiler.\r\n\r\n**EDITs:**\r\n\r\n - Alex Buckley [confirmed][5] that the given situation is illegal, despite what javac says. Bug against javac has been raised as [JDK-8215739][6]. This bug has been acknowledged months before the release of Java 12. As of 2019-06 it has been decided that also Java 13 will ship without a fix. Similarly for Java 14. The bug was temporarily scheduled for Java 15, but this plan has been dropped on 2020-04-20.\r\n - Eclipse error message [has been improved][7] to mention the real problem.\r\n - In Eclipse 2019-06 the UI used for Solution (3) has been [revamped][8]. Up-to-date documentation can be found in the [online help][9].\r\n - As of 2022-12 there&#39;s yet another perspective on this issue as described in [my other answer][10]. It doesn&#39;t invalidate what&#39;s said here, but let&#39;s things appear in a different light.\r\n\r\n\r\n  [1]: https://docs.oracle.com/javase/specs/jls/se11/html/jls-7.html#jls-7.4.3\r\n  [2]: https://docs.oracle.com/javase/specs/jls/se11/html/jls-6.html#jls-6.5.5.2\r\n  [3]: https://help.eclipse.org/2018-09/topic/org.eclipse.jdt.doc.user/reference/propertypages/ref-properties-buildpath-modularity.htm?cp=1_4_3_1_0\r\n  [4]: https://www.eclipse.org/eclipse/news/4.8/jdt.php#Java9\r\n  [5]: http://mail.openjdk.java.net/pipermail/jigsaw-dev/2018-December/014077.html\r\n  [6]: https://bugs.openjdk.java.net/browse/JDK-8215739\r\n  [7]: https://bugs.eclipse.org/bugs/show_bug.cgi?id=536928#c32\r\n  [8]: https://www.eclipse.org/eclipse/news/4.12/jdt.php#buildpath-module-dependencies\r\n  [9]: https://help.eclipse.org/2019-06/topic/org.eclipse.jdt.doc.user/reference/ref-properties-build-path.htm#module-dependencies\r\n  [10]: https://stackoverflow.com/a/74890645/4611488","title":"Eclipse can&#39;t find XML related classes after switching build path to JDK 10","body":"<p>I assume that the project being migrated from Java 1.8 still has no <code>module-info.java</code>. This implies you are compiling code in the &quot;unnamed module&quot;.</p>\n<p>Code in the unnamed module &quot;reads&quot; all observable named and unnamed modules, in particular it reads module &quot;java.xml&quot; from the JRE System Library. This module exports package like <code>java.xml.xpath</code>.</p>\n<p>Additionally, you have <code>xml-apis.java</code> on the classpath, which contributes another set of packages of the same names (<code>java.xml.xpath</code> and friends). These are said to be associated to the unnamed module, like your own code.</p>\n<p>This situation violates the <strong>requirement of &quot;unique visibility&quot;</strong> as defined in <a href=\"https://docs.oracle.com/javase/specs/jls/se11/html/jls-7.html#jls-7.4.3\" rel=\"noreferrer\">JLS §7.4.3</a> (last paragraph). In particular every qualified type name Q.Id (<a href=\"https://docs.oracle.com/javase/specs/jls/se11/html/jls-6.html#jls-6.5.5.2\" rel=\"noreferrer\">JSL §6.5.5.2</a>) requires that its prefix Q is a uniquely visible package (I'm disregarding the case of nested types for simplicity). Ergo: the program is illegal and must be rejected by compilers.</p>\n<p>This leaves us with one question and two solutions:</p>\n<p>(1) Question: Why is javac accepting the program?</p>\n<p>(2) Solution: If you add <code>module-info.java</code> to your project, you can control via <strong>requires</strong> which module your project reads, either <code> requires java.xml;</code>  or <code>requires xml.apis;</code> (where &quot;xml.apis&quot; is the automatic module name of &quot;xml-apis-1.4.01.jar).</p>\n<p>(3) Solution: Short of turning your project into a module, you can still avoid the conflict by excluding <code>java.xml</code> from the set of observable modules. On the command line this would be done using <code>--limit-modules</code>. The equivalent in Eclipse is the <a href=\"https://help.eclipse.org/2018-09/topic/org.eclipse.jdt.doc.user/reference/propertypages/ref-properties-buildpath-modularity.htm?cp=1_4_3_1_0\" rel=\"noreferrer\">&quot;Modularity Details&quot; dialog</a>, see also the <a href=\"https://www.eclipse.org/eclipse/news/4.8/jdt.php#Java9\" rel=\"noreferrer\">JDT 4.8 New&amp;Noteworthy</a> (look for <strong>Contents</strong> tab). Since <code>java.xml</code> is implicitly required via a lot of other default-observable modules, it may be a good idea to push everything except for <code>java.base</code> from right (&quot;Explicitly included modules&quot;) to left (&quot;Available modules&quot;) (and selectively re-add those modules that your project needs).</p>\n<p>PS: Eclipse still doesn't provide an ideal error message, instead of &quot;cannot be resolved&quot; it should actually say: &quot;The package javax.xml.xpath is accessible from more than one module: javax.xml, &lt;unnamed&gt;.</p>\n<p>PPS: Also weird: how come that changing the order between JRE and a jar on the classpath (such ordering is not a concept supported by javac nor JEP 261) changes the behavior of the compiler.</p>\n<p><strong>EDITs:</strong></p>\n<ul>\n<li>Alex Buckley <a href=\"http://mail.openjdk.java.net/pipermail/jigsaw-dev/2018-December/014077.html\" rel=\"noreferrer\">confirmed</a> that the given situation is illegal, despite what javac says. Bug against javac has been raised as <a href=\"https://bugs.openjdk.java.net/browse/JDK-8215739\" rel=\"noreferrer\">JDK-8215739</a>. This bug has been acknowledged months before the release of Java 12. As of 2019-06 it has been decided that also Java 13 will ship without a fix. Similarly for Java 14. The bug was temporarily scheduled for Java 15, but this plan has been dropped on 2020-04-20.</li>\n<li>Eclipse error message <a href=\"https://bugs.eclipse.org/bugs/show_bug.cgi?id=536928#c32\" rel=\"noreferrer\">has been improved</a> to mention the real problem.</li>\n<li>In Eclipse 2019-06 the UI used for Solution (3) has been <a href=\"https://www.eclipse.org/eclipse/news/4.12/jdt.php#buildpath-module-dependencies\" rel=\"noreferrer\">revamped</a>. Up-to-date documentation can be found in the <a href=\"https://help.eclipse.org/2019-06/topic/org.eclipse.jdt.doc.user/reference/ref-properties-build-path.htm#module-dependencies\" rel=\"noreferrer\">online help</a>.</li>\n<li>As of 2022-12 there's yet another perspective on this issue as described in <a href=\"https://stackoverflow.com/a/74890645/4611488\">my other answer</a>. It doesn't invalidate what's said here, but let's things appear in a different light.</li>\n</ul>\n"},{"comments":[{"owner":{"account_id":948242,"reputation":389,"user_id":975019,"accept_rate":60,"display_name":"Skystrider"},"score":1,"creation_date":1587479687,"post_id":58919790,"comment_id":108524315,"body_markdown":"This worked for me. Moving to Java11 and a dependency from another dependency created the conflict. Once excluded in the POM then it just uses the dependency provided by Java. Mine was javax.xml.namespace.QName\n\t\t\t&lt;exclusions&gt;\n\t\t\t\t&lt;exclusion&gt;\n\t\t\t\t\t&lt;groupId&gt;weblogic&lt;/groupId&gt;\n\t\t\t\t\t&lt;artifactId&gt;wlfullclient&lt;/artifactId&gt;\n\t\t\t\t&lt;/exclusion&gt;\n\t\t\t&lt;/exclusions&gt;","body":"This worked for me. Moving to Java11 and a dependency from another dependency created the conflict. Once excluded in the POM then it just uses the dependency provided by Java. Mine was javax.xml.namespace.QName \t\t\t&lt;exclusions&gt; \t\t\t\t&lt;exclusion&gt; \t\t\t\t\t&lt;groupId&gt;weblogic&lt;/groupId&gt; \t\t\t\t\t&lt;artifactId&gt;wlfullclient&lt;/artifactId&gt; \t\t\t\t&lt;/exclusion&gt; \t\t\t&lt;/exclusions&gt;"},{"owner":{"account_id":19981008,"reputation":913,"user_id":14644191,"display_name":"Enchantres"},"score":1,"creation_date":1645372905,"post_id":58919790,"comment_id":125848696,"body_markdown":"I have tried many solutions, only this one worked for me.","body":"I have tried many solutions, only this one worked for me."}],"tags":[],"owner":{"account_id":785462,"reputation":16343,"user_id":845034,"accept_rate":57,"display_name":"steffen"},"comment_count":2,"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1574097210,"creation_date":1574097210,"answer_id":58919790,"question_id":51094274,"body_markdown":"**What happens here** is you have a wildcard import like `import org.w3c.dom.*`, stating you want to import all classes from package `org.w3c.dom`. Now, if there&#39;s at least one class in `org.w3c.dom` provided by a second source, Java must not start (as pointed out [here][1]).\r\n\r\n(By the way, the message &quot;*... cannot be resolved*&quot; is replaced by a more accurate error message &quot;*The package org.w3c.dom is accessible from more than one module: &amp;lt;unnamed&amp;gt;, java.xml*&quot; in more recent Eclipse versions, see this merged [change request][2] by Stephan Herrmann.)\r\n\r\n**To resolve this problem**\r\n\r\n 1. Open the &quot;Open Type&quot; dialog (&lt;kbd&gt;Ctrl&lt;/kbd&gt;+&lt;kbd&gt;Shift&lt;/kbd&gt;+&lt;kbd&gt;T&lt;/kbd&gt;).\r\n 2. Enter the *complete* import, so `org.w3c.dom.*` or `org.w3c.dom.`.\r\n 3. Check the entire list for multiple sources. All entries here should contain only something like &quot;jdk-11-...&quot;.\r\n 4. Gather all JARs that contain classes you have multiple sources for.\r\n 5. Open the &quot;Dependency Hirarchy&quot; tab from `pom.xml`.\r\n 6. Search for the JAR file.\r\n 7. Add an exlusion (right click or edit the `pom.xml` manually).\r\n\r\n**Example**\r\n\r\nI had this findbugs dependency in my `pom.xml`:\r\n\r\n    &lt;dependency&gt;\r\n        &lt;groupId&gt;com.google.code.findbugs&lt;/groupId&gt;\r\n        &lt;artifactId&gt;findbugs&lt;/artifactId&gt;\r\n        &lt;version&gt;${findbugs.version}&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n\r\nFindbugs has two dependencies that need to be excluded:\r\n\r\n    &lt;dependency&gt;\r\n\t\t&lt;groupId&gt;com.google.code.findbugs&lt;/groupId&gt;\r\n\t\t&lt;artifactId&gt;findbugs&lt;/artifactId&gt;\r\n\t\t&lt;version&gt;${findbugs.version}&lt;/version&gt;\r\n\t\t&lt;exclusion&gt;\r\n\t\t\t&lt;groupId&gt;xml-apis&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;xml-apis&lt;/artifactId&gt;\r\n\t\t&lt;/exclusion&gt;\r\n\t\t&lt;exclusion&gt;\r\n\t\t\t&lt;groupId&gt;jaxen&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;jaxen&lt;/artifactId&gt;\r\n\t\t&lt;/exclusion&gt;\r\n\t&lt;/dependency&gt;\r\n\r\n\r\n  [1]: https://stackoverflow.com/a/53824670/845034\r\n  [2]: https://git.eclipse.org/r/#/c/134161/","title":"Eclipse can&#39;t find XML related classes after switching build path to JDK 10","body":"<p><strong>What happens here</strong> is you have a wildcard import like <code>import org.w3c.dom.*</code>, stating you want to import all classes from package <code>org.w3c.dom</code>. Now, if there's at least one class in <code>org.w3c.dom</code> provided by a second source, Java must not start (as pointed out <a href=\"https://stackoverflow.com/a/53824670/845034\">here</a>).</p>\n\n<p>(By the way, the message \"<em>... cannot be resolved</em>\" is replaced by a more accurate error message \"<em>The package org.w3c.dom is accessible from more than one module: &lt;unnamed&gt;, java.xml</em>\" in more recent Eclipse versions, see this merged <a href=\"https://git.eclipse.org/r/#/c/134161/\" rel=\"noreferrer\">change request</a> by Stephan Herrmann.)</p>\n\n<p><strong>To resolve this problem</strong></p>\n\n<ol>\n<li>Open the \"Open Type\" dialog (<kbd>Ctrl</kbd>+<kbd>Shift</kbd>+<kbd>T</kbd>).</li>\n<li>Enter the <em>complete</em> import, so <code>org.w3c.dom.*</code> or <code>org.w3c.dom.</code>.</li>\n<li>Check the entire list for multiple sources. All entries here should contain only something like \"jdk-11-...\".</li>\n<li>Gather all JARs that contain classes you have multiple sources for.</li>\n<li>Open the \"Dependency Hirarchy\" tab from <code>pom.xml</code>.</li>\n<li>Search for the JAR file.</li>\n<li>Add an exlusion (right click or edit the <code>pom.xml</code> manually).</li>\n</ol>\n\n<p><strong>Example</strong></p>\n\n<p>I had this findbugs dependency in my <code>pom.xml</code>:</p>\n\n<pre><code>&lt;dependency&gt;\n    &lt;groupId&gt;com.google.code.findbugs&lt;/groupId&gt;\n    &lt;artifactId&gt;findbugs&lt;/artifactId&gt;\n    &lt;version&gt;${findbugs.version}&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n\n<p>Findbugs has two dependencies that need to be excluded:</p>\n\n<pre><code>&lt;dependency&gt;\n    &lt;groupId&gt;com.google.code.findbugs&lt;/groupId&gt;\n    &lt;artifactId&gt;findbugs&lt;/artifactId&gt;\n    &lt;version&gt;${findbugs.version}&lt;/version&gt;\n    &lt;exclusion&gt;\n        &lt;groupId&gt;xml-apis&lt;/groupId&gt;\n        &lt;artifactId&gt;xml-apis&lt;/artifactId&gt;\n    &lt;/exclusion&gt;\n    &lt;exclusion&gt;\n        &lt;groupId&gt;jaxen&lt;/groupId&gt;\n        &lt;artifactId&gt;jaxen&lt;/artifactId&gt;\n    &lt;/exclusion&gt;\n&lt;/dependency&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":120777,"reputation":14376,"user_id":313400,"display_name":"Guillaume"},"comment_count":0,"down_vote_count":0,"up_vote_count":13,"is_accepted":false,"score":13,"last_activity_date":1594228599,"creation_date":1579102049,"answer_id":59754594,"question_id":51094274,"body_markdown":"In my case the problem was that `xercesImpl : 2.10.0` was a (transient) dependency. This jar bundles `org.w3c.dom.html.HTMLDOMImplementation`.\r\n\r\nAs far as I understand the `org.w3c.dom` package then becomes available from two modules, causing the build to fail.\r\nIn case one of the dependencies (direct or transient) has classes in one of the 25 packages exported by the [java.xml module][1] your build will fail.\r\n\r\nExcluding xercesImpl (and also the offenders listed below) in Maven solved the issue for me:\r\n\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;xyz&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;xyz&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;1.0&lt;/version&gt;\r\n\t\t\t&lt;exclusions&gt;\r\n\t\t\t\t&lt;exclusion&gt;\r\n\t\t\t\t\t&lt;groupId&gt;xerces&lt;/groupId&gt;\r\n\t\t\t\t\t&lt;artifactId&gt;xercesImpl&lt;/artifactId&gt;\r\n\t\t\t\t&lt;/exclusion&gt;\r\n\t\t\t\t&lt;exclusion&gt;\r\n\t\t\t\t\t&lt;groupId&gt;xml-apis&lt;/groupId&gt;\r\n\t\t\t\t\t&lt;artifactId&gt;xml-apis&lt;/artifactId&gt;\r\n\t\t\t\t&lt;/exclusion&gt;\r\n\t\t\t\t&lt;exclusion&gt;\r\n\t\t\t\t\t...\r\n\t\t\t\t&lt;/exclusion&gt;\r\n\t\t\t&lt;/exclusions&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\nThanks to Rune Flobakk for giving the hint here: https://bugs.eclipse.org/bugs/show_bug.cgi?id=536928#c73\r\n\r\nOther offenders:\r\n    \r\n\r\n - `batik-ext : 1.9` (bundles org.w3c.dom.Window)\r\n - `xom : 1.2.5` (bundles org.w3c.dom.UserDataHandler)\r\n - `stax-api : 1.0.2` (bundles javax.xml.stream.EventFilter)\r\n - `xml-apis : 1.4.01` (bundles org.w3c.dom.Document)\r\n - `xml-beans : 2.3.0` (bundles org.w3c.dom.TypeInfo)\r\n\r\n\r\n  [1]: https://docs.oracle.com/javase/9/docs/api/java.xml-summary.html","title":"Eclipse can&#39;t find XML related classes after switching build path to JDK 10","body":"<p>In my case the problem was that <code>xercesImpl : 2.10.0</code> was a (transient) dependency. This jar bundles <code>org.w3c.dom.html.HTMLDOMImplementation</code>.</p>\n<p>As far as I understand the <code>org.w3c.dom</code> package then becomes available from two modules, causing the build to fail.\nIn case one of the dependencies (direct or transient) has classes in one of the 25 packages exported by the <a href=\"https://docs.oracle.com/javase/9/docs/api/java.xml-summary.html\" rel=\"noreferrer\">java.xml module</a> your build will fail.</p>\n<p>Excluding xercesImpl (and also the offenders listed below) in Maven solved the issue for me:</p>\n<pre><code>    &lt;dependency&gt;\n        &lt;groupId&gt;xyz&lt;/groupId&gt;\n        &lt;artifactId&gt;xyz&lt;/artifactId&gt;\n        &lt;version&gt;1.0&lt;/version&gt;\n        &lt;exclusions&gt;\n            &lt;exclusion&gt;\n                &lt;groupId&gt;xerces&lt;/groupId&gt;\n                &lt;artifactId&gt;xercesImpl&lt;/artifactId&gt;\n            &lt;/exclusion&gt;\n            &lt;exclusion&gt;\n                &lt;groupId&gt;xml-apis&lt;/groupId&gt;\n                &lt;artifactId&gt;xml-apis&lt;/artifactId&gt;\n            &lt;/exclusion&gt;\n            &lt;exclusion&gt;\n                ...\n            &lt;/exclusion&gt;\n        &lt;/exclusions&gt;\n    &lt;/dependency&gt;\n</code></pre>\n<p>Thanks to Rune Flobakk for giving the hint here: <a href=\"https://bugs.eclipse.org/bugs/show_bug.cgi?id=536928#c73\" rel=\"noreferrer\">https://bugs.eclipse.org/bugs/show_bug.cgi?id=536928#c73</a></p>\n<p>Other offenders:</p>\n<ul>\n<li><code>batik-ext : 1.9</code> (bundles org.w3c.dom.Window)</li>\n<li><code>xom : 1.2.5</code> (bundles org.w3c.dom.UserDataHandler)</li>\n<li><code>stax-api : 1.0.2</code> (bundles javax.xml.stream.EventFilter)</li>\n<li><code>xml-apis : 1.4.01</code> (bundles org.w3c.dom.Document)</li>\n<li><code>xml-beans : 2.3.0</code> (bundles org.w3c.dom.TypeInfo)</li>\n</ul>\n"},{"comments":[{"owner":{"account_id":1507058,"reputation":2933,"user_id":1410212,"accept_rate":88,"display_name":"lilalinux"},"score":0,"creation_date":1595586515,"post_id":62344651,"comment_id":111533164,"body_markdown":"&quot;Open Type&quot; was the key to fixing my problem. Thank you!","body":"&quot;Open Type&quot; was the key to fixing my problem. Thank you!"},{"owner":{"account_id":1507058,"reputation":2933,"user_id":1410212,"accept_rate":88,"display_name":"lilalinux"},"score":0,"creation_date":1595586913,"post_id":62344651,"comment_id":111533317,"body_markdown":"In my case it was xpp3 which came in via axon-messaging. Excluding xpp3 fixed it.","body":"In my case it was xpp3 which came in via axon-messaging. Excluding xpp3 fixed it."},{"owner":{"account_id":456091,"reputation":1024,"user_id":854680,"display_name":"MikeOnline"},"score":1,"creation_date":1614227127,"post_id":62344651,"comment_id":117322977,"body_markdown":"Thanks for this clue. I was having trouble identifying where the conflicting reference was coming from for org.w3c.dom.Document. Found it easily in Eclipse 2020-12 this way: Selected org.w3c.dom.Document within the import statement that Eclipse flagged, right-click and choose Open Type Hierarchy, in the Type Hierarchy dialog right click Document at the top and choose Implementors &gt; Workspace to reveal all the JARs in all projects in the workspace which are bringing in org.w3c.dom.Document (or whatever type you have selected that is accessible from more than one module","body":"Thanks for this clue. I was having trouble identifying where the conflicting reference was coming from for org.w3c.dom.Document. Found it easily in Eclipse 2020-12 this way: Selected org.w3c.dom.Document within the import statement that Eclipse flagged, right-click and choose Open Type Hierarchy, in the Type Hierarchy dialog right click Document at the top and choose Implementors &gt; Workspace to reveal all the JARs in all projects in the workspace which are bringing in org.w3c.dom.Document (or whatever type you have selected that is accessible from more than one module"}],"tags":[],"owner":{"account_id":1367462,"reputation":1563,"user_id":1303612,"display_name":"jebeaudet"},"comment_count":3,"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1591966254,"creation_date":1591966254,"answer_id":62344651,"question_id":51094274,"body_markdown":"While Stephan Herrmann&#39;s answer is the correct one, I&#39;ll post my error and how I got it solved if it can help others. I had the error `The package javax.xml.namespace is accessible from more than one module: &lt;unnamed&gt;, java.xml` and after inspecting the class with the error, it was the `javax.xml.namespace.QName` import that was complaining. With the &quot;Open Type&quot; dialog, I found out that it was pulled from `stax-api` through eureka client. This solved it for me : \r\n```xml\r\n&lt;exclusion&gt;\r\n   &lt;groupId&gt;stax&lt;/groupId&gt;\r\n   &lt;artifactId&gt;stax-api&lt;/artifactId&gt;\r\n&lt;/exclusion&gt;\r\n```","title":"Eclipse can&#39;t find XML related classes after switching build path to JDK 10","body":"<p>While Stephan Herrmann's answer is the correct one, I'll post my error and how I got it solved if it can help others. I had the error <code>The package javax.xml.namespace is accessible from more than one module: &lt;unnamed&gt;, java.xml</code> and after inspecting the class with the error, it was the <code>javax.xml.namespace.QName</code> import that was complaining. With the \"Open Type\" dialog, I found out that it was pulled from <code>stax-api</code> through eureka client. This solved it for me : </p>\n\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;exclusion&gt;\n   &lt;groupId&gt;stax&lt;/groupId&gt;\n   &lt;artifactId&gt;stax-api&lt;/artifactId&gt;\n&lt;/exclusion&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2481957,"reputation":43,"user_id":2161258,"display_name":"user2161258"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1614376106,"creation_date":1614376106,"answer_id":66393209,"question_id":51094274,"body_markdown":"Thanks for this clue. I was having trouble identifying where the conflicting reference was coming from for org.w3c.dom.Document. Found it easily in Eclipse 2020-12 this way: Selected org.w3c.dom.Document within the import statement that Eclipse flagged, right-click and choose Open Type Hierarchy, in the Type Hierarchy dialog right click Document at the top and choose Implementors &gt; Workspace to reveal all the JARs in all projects in the workspace which are bringing in org.w3c.dom.Document (or whatever type you have selected that is accessible from more than one module – MikeOnline yesterday\r\n\r\nfollowing the directions above from one of the earlier posts helped us solve our issue. \r\nwhat we did was replace Document with GenericDocument and Element with GenericElement from batik - and compile errors are gone - now we just have to test to make sure the implementation matches what we had under java 8.   Thanks MikeOnline","title":"Eclipse can&#39;t find XML related classes after switching build path to JDK 10","body":"<p>Thanks for this clue. I was having trouble identifying where the conflicting reference was coming from for org.w3c.dom.Document. Found it easily in Eclipse 2020-12 this way: Selected org.w3c.dom.Document within the import statement that Eclipse flagged, right-click and choose Open Type Hierarchy, in the Type Hierarchy dialog right click Document at the top and choose Implementors &gt; Workspace to reveal all the JARs in all projects in the workspace which are bringing in org.w3c.dom.Document (or whatever type you have selected that is accessible from more than one module – MikeOnline yesterday</p>\n<p>following the directions above from one of the earlier posts helped us solve our issue.\nwhat we did was replace Document with GenericDocument and Element with GenericElement from batik - and compile errors are gone - now we just have to test to make sure the implementation matches what we had under java 8.   Thanks MikeOnline</p>\n"},{"comments":[{"owner":{"account_id":201558,"reputation":20199,"user_id":448078,"accept_rate":61,"display_name":"Mike"},"score":1,"creation_date":1677175874,"post_id":74890645,"comment_id":133290994,"body_markdown":"worked for me with lowercase &#39;enabled&#39;","body":"worked for me with lowercase &#39;enabled&#39;"},{"owner":{"account_id":5853491,"reputation":8043,"user_id":4611488,"display_name":"Stephan Herrmann"},"score":0,"creation_date":1678121129,"post_id":74890645,"comment_id":133467831,"body_markdown":"Thanks, @Mike, I had taken the spelling of an internal constant instead of its value :) - corrected.","body":"Thanks, @Mike, I had taken the spelling of an internal constant instead of its value :) - corrected."},{"owner":{"account_id":1087271,"reputation":64101,"user_id":1082681,"accept_rate":90,"display_name":"kriegaex"},"score":0,"creation_date":1681201685,"post_id":74890645,"comment_id":134014140,"body_markdown":"@StephanHerrmann, can this option be set any other way than in an Eclipse project preferences file? Think batch compiler (ECJ, AspectJ compiler). I need to configure this for IntelliJ IDEA and AJC, not for Eclipse IDE and ECJ (JDT Core).","body":"@StephanHerrmann, can this option be set any other way than in an Eclipse project preferences file? Think batch compiler (ECJ, AspectJ compiler). I need to configure this for IntelliJ IDEA and AJC, not for Eclipse IDE and ECJ (JDT Core)."},{"owner":{"account_id":5853491,"reputation":8043,"user_id":4611488,"display_name":"Stephan Herrmann"},"score":0,"creation_date":1681302507,"post_id":74890645,"comment_id":134034028,"body_markdown":"@kriegaex can you directly pass this option into the compiler: https://github.com/eclipse-jdt/eclipse.jdt.core/commit/9b329b07f6ecc238fef4913cdbd8d2830eafd6ef#diff-564d1ddd6c5878b94b202b92b3f1831a8831a90fc06c320ccdf816b9b74cb9e5 ?","body":"@kriegaex can you directly pass this option into the compiler: <a href=\"https://github.com/eclipse-jdt/eclipse.jdt.core/commit/9b329b07f6ecc238fef4913cdbd8d2830eafd6ef#diff-564d1ddd6c5878b94b202b92b3f1831a8831a90fc06c320ccdf816b9b74cb9e5\" rel=\"nofollow noreferrer\">github.com/eclipse-jdt/eclipse.jdt.core/commit/&hellip;</a> ?"},{"owner":{"account_id":1087271,"reputation":64101,"user_id":1082681,"accept_rate":90,"display_name":"kriegaex"},"score":0,"creation_date":1681313676,"post_id":74890645,"comment_id":134037169,"body_markdown":"@StephanHerrmann: I had found that piece of code already. But it seems that my question is more basic: How do I pass the option into the compiler directly? What is the CLI syntax for it? Something like passing system properties to the JVM via `-DmyProperty=abc`? So far, I only managed to pass it in via config file. It does not seem to do what I want, but at least the option is recognised that way.","body":"@StephanHerrmann: I had found that piece of code already. But it seems that my question is more basic: How do I pass the option into the compiler directly? What is the CLI syntax for it? Something like passing system properties to the JVM via <code>-DmyProperty=abc</code>? So far, I only managed to pass it in via config file. It does not seem to do what I want, but at least the option is recognised that way."},{"owner":{"account_id":5853491,"reputation":8043,"user_id":4611488,"display_name":"Stephan Herrmann"},"score":0,"creation_date":1681396826,"post_id":74890645,"comment_id":134052546,"body_markdown":"@kriegaex I gave that hint under the assumption that you are invoking the compiler from within Java, with no need for a detour via CLI. Using a property file might be the next best strategy. In that case it would be interesting to know in which way that fails. Feel free to open a GH issue and mention me on it.","body":"@kriegaex I gave that hint under the assumption that you are invoking the compiler from within Java, with no need for a detour via CLI. Using a property file might be the next best strategy. In that case it would be interesting to know in which way that fails. Feel free to open a GH issue and mention me on it."},{"owner":{"account_id":1087271,"reputation":64101,"user_id":1082681,"accept_rate":90,"display_name":"kriegaex"},"score":0,"creation_date":1681400983,"post_id":74890645,"comment_id":134053802,"body_markdown":"No, I am not calling it from Java but from an IDE (IntelliJ) or from Maven. The funny thing is that the Maven build worked while the IntelliJ build did not, hence I started searching for the compilation errors I saw and found this setting. At this point, I admit that I am stupid and ugly, because the reason the setting did not work at first was sitting in front of the computer. AJC relocates the prefix `JavaCore.PLUGIN_ID` from `&quot;org.eclipse.jdt.core&quot;` to `&quot;org.aspectj.org.eclipse.jdt.core&quot;`, which I forgot, because I looked up the setting in the upstream source code, not in the AspectJ fork.","body":"No, I am not calling it from Java but from an IDE (IntelliJ) or from Maven. The funny thing is that the Maven build worked while the IntelliJ build did not, hence I started searching for the compilation errors I saw and found this setting. At this point, I admit that I am stupid and ugly, because the reason the setting did not work at first was sitting in front of the computer. AJC relocates the prefix <code>JavaCore.PLUGIN_ID</code> from <code>&quot;org.eclipse.jdt.core&quot;</code> to <code>&quot;org.aspectj.org.eclipse.jdt.core&quot;</code>, which I forgot, because I looked up the setting in the upstream source code, not in the AspectJ fork."}],"tags":[],"owner":{"account_id":5853491,"reputation":8043,"user_id":4611488,"display_name":"Stephan Herrmann"},"comment_count":7,"down_vote_count":0,"up_vote_count":13,"is_accepted":false,"score":13,"last_activity_date":1678121081,"creation_date":1671723010,"answer_id":74890645,"question_id":51094274,"body_markdown":"While the accepted answer (by myself) is still _correct_, a further twist of the story was recently [brought to my attention][1]:\r\n\r\nThe original _intention_ may have been to actually support the situation at hand. \r\n\r\nSee this quote in the original design document &quot;[The State of the Module System][2]&quot; (SotMS):\r\n\r\n&gt; If a package is defined in both a named module and the unnamed module then the package in the unnamed module is ignored.\r\n\r\nThat document is dated 2016/3/8 08:18, and already at that time was marked &quot;*This document is slightly out of date*&quot;. Moreover, it is not legally binding for any implementation. Still that document has some relevance since what&#39;s quoted above is precisely what `javac` appears to implement (and still implements many years after [JDK-8215739][3] was filed).\r\n\r\nIOW, the conflict is not so much a conflict between 1st and 2nd implementation, but a conflict even within Oracle, so it seems. 2 Votes for supporting the situation (SotMS and javac) and only one vote for disallowing (JLS).\r\n\r\nSince Eclipse committers are not inclined to resolve this conflict within Oracle, the recent 2022-12 release of Eclipse has a new compiler option: by adding the following line to a project&#39;s `.settings/org.eclipse.jdt.core.prefs`, a user may opt to ignore JLS in this regard:\r\n\r\n    org.eclipse.jdt.core.compiler.ignoreUnnamedModuleForSplitPackage=enabled\r\n\r\n\r\nThis option puts the decision into the user&#39;s hands: do they want JLS-semantics or SotMS/javac semantics (in this particular issue)? Still we were not quite ready to provide a UI option for it, to avoid that users made this choice thoughtlessly, without the background information as provided here.\r\n\r\n*Personally, I&#39;m not particularly happy about this situation, as it aggravates the fact that Java is not one, but [several languages][4].*\r\n\r\n\r\n  [1]: https://github.com/eclipse-jdt/eclipse.jdt.core/issues/415#issuecomment-1256956523\r\n  [2]: https://openjdk.org/projects/jigsaw/spec/sotms/#the-unnamed-module\r\n  [3]: https://bugs.openjdk.org/browse/JDK-8215739\r\n  [4]: https://objectteams.wordpress.com/2017/04/02/several-languages-java-8/","title":"Eclipse can&#39;t find XML related classes after switching build path to JDK 10","body":"<p>While the accepted answer (by myself) is still <em>correct</em>, a further twist of the story was recently <a href=\"https://github.com/eclipse-jdt/eclipse.jdt.core/issues/415#issuecomment-1256956523\" rel=\"noreferrer\">brought to my attention</a>:</p>\n<p>The original <em>intention</em> may have been to actually support the situation at hand.</p>\n<p>See this quote in the original design document &quot;<a href=\"https://openjdk.org/projects/jigsaw/spec/sotms/#the-unnamed-module\" rel=\"noreferrer\">The State of the Module System</a>&quot; (SotMS):</p>\n<blockquote>\n<p>If a package is defined in both a named module and the unnamed module then the package in the unnamed module is ignored.</p>\n</blockquote>\n<p>That document is dated 2016/3/8 08:18, and already at that time was marked &quot;<em>This document is slightly out of date</em>&quot;. Moreover, it is not legally binding for any implementation. Still that document has some relevance since what's quoted above is precisely what <code>javac</code> appears to implement (and still implements many years after <a href=\"https://bugs.openjdk.org/browse/JDK-8215739\" rel=\"noreferrer\">JDK-8215739</a> was filed).</p>\n<p>IOW, the conflict is not so much a conflict between 1st and 2nd implementation, but a conflict even within Oracle, so it seems. 2 Votes for supporting the situation (SotMS and javac) and only one vote for disallowing (JLS).</p>\n<p>Since Eclipse committers are not inclined to resolve this conflict within Oracle, the recent 2022-12 release of Eclipse has a new compiler option: by adding the following line to a project's <code>.settings/org.eclipse.jdt.core.prefs</code>, a user may opt to ignore JLS in this regard:</p>\n<pre><code>org.eclipse.jdt.core.compiler.ignoreUnnamedModuleForSplitPackage=enabled\n</code></pre>\n<p>This option puts the decision into the user's hands: do they want JLS-semantics or SotMS/javac semantics (in this particular issue)? Still we were not quite ready to provide a UI option for it, to avoid that users made this choice thoughtlessly, without the background information as provided here.</p>\n<p><em>Personally, I'm not particularly happy about this situation, as it aggravates the fact that Java is not one, but <a href=\"https://objectteams.wordpress.com/2017/04/02/several-languages-java-8/\" rel=\"noreferrer\">several languages</a>.</em></p>\n"}],"owner":{"account_id":61330,"reputation":4234,"user_id":182837,"accept_rate":62,"display_name":"Carsten"},"comment_count":8,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":72625,"favorite_count":0,"down_vote_count":0,"up_vote_count":81,"accepted_answer_id":53824670,"answer_count":10,"score":81,"last_activity_date":1695195384,"creation_date":1530246257,"question_id":51094274,"body_markdown":"I&#39;m developing on a [Maven project][1] (branch  platform-bom_brussels-sr7) in Eclipse. When I recently tried switching the Java Build Path for the project to JDK 10, Eclipse build can no longer find classes such as `javax.xml.xpath.XPath`, `org.w3c.dom.Document`, or `org.xml.sax.SAXException`. It seems only XML related classes are impacted, mostly from the Maven dependency `xml-apis-1.4.01`.\r\n\r\nTrying a Maven build from Eclipse works without errors. Ctrl-LeftClick on one of the supposedly missing classes finds the class and opens it in the Eclipse editor. It seems only the Eclipse build is impacted.\r\n\r\nI tried several things, but none helped. I tried:\r\n\r\n* Project Clean\r\n* Different Eclipse Versions: Oxygen and Photon.\r\n* Running Eclipse itself with JDK 8 and JDK 10.\r\n* Changing Compiler Compliance level for the project. It builds with compliance level 8 and 10 under JDK 8 build path and fails for both with JDK 10 in build path.\r\n\r\n  [1]: https://github.com/fcarsten/portal-core.git","title":"Eclipse can&#39;t find XML related classes after switching build path to JDK 10","body":"<p>I'm developing on a <a href=\"https://github.com/fcarsten/portal-core.git\" rel=\"noreferrer\">Maven project</a> (branch  platform-bom_brussels-sr7) in Eclipse. When I recently tried switching the Java Build Path for the project to JDK 10, Eclipse build can no longer find classes such as <code>javax.xml.xpath.XPath</code>, <code>org.w3c.dom.Document</code>, or <code>org.xml.sax.SAXException</code>. It seems only XML related classes are impacted, mostly from the Maven dependency <code>xml-apis-1.4.01</code>.</p>\n\n<p>Trying a Maven build from Eclipse works without errors. Ctrl-LeftClick on one of the supposedly missing classes finds the class and opens it in the Eclipse editor. It seems only the Eclipse build is impacted.</p>\n\n<p>I tried several things, but none helped. I tried:</p>\n\n<ul>\n<li>Project Clean</li>\n<li>Different Eclipse Versions: Oxygen and Photon.</li>\n<li>Running Eclipse itself with JDK 8 and JDK 10.</li>\n<li>Changing Compiler Compliance level for the project. It builds with compliance level 8 and 10 under JDK 8 build path and fails for both with JDK 10 in build path.</li>\n</ul>\n"},{"tags":["java","json","gradle","cucumber","testng"],"comments":[{"owner":{"account_id":10489136,"reputation":2762,"user_id":7731623,"display_name":"Nandan A"},"score":0,"creation_date":1695192637,"post_id":77135116,"comment_id":135989453,"body_markdown":"You said &quot;for each feature, we have a separate runner class.&quot; Why? why can&#39;t you use tags to run the cases?","body":"You said &quot;for each feature, we have a separate runner class.&quot; Why? why can&#39;t you use tags to run the cases?"}],"answers":[{"tags":[],"owner":{"account_id":7460660,"reputation":2741,"user_id":5672261,"accept_rate":72,"display_name":"Nitin"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695195318,"creation_date":1695195318,"answer_id":77140262,"question_id":77135116,"body_markdown":"I resolved this by writing a custom gradle task.\r\n\r\nHere is my solution:\r\n\r\nGradle task:\r\n```\r\ntask aggregatReport(type: JavaExec) {\r\n    println(&quot;Running aggregatReport task&quot;)\r\n    description &#39;Combine multiple cucumber report json file into one json file&#39;\r\n    classpath sourceSets.main.runtimeClasspath\r\n    mainClass = &quot;com.ReportAggregator&quot;\r\n    def reportFolderPath = &quot;./build/cucumber-reports/&quot;;\r\n    File file = file(reportFolderPath);\r\n    args file.toPath().toAbsolutePath().toString()\r\n}\r\n```\r\n\r\nThe code:\r\n\r\n```\r\npublic class ReportAggregator {\r\n    public static void main(String[] args) throws IOException {\r\n        System.out.println(&quot;ReportAggregator with argument -&gt; &quot; + Arrays.toString(args));\r\n        ObjectMapper objectMapper = new ObjectMapper();\r\n        File reportFolder = new File(args[0]);\r\n        System.out.println(&quot;Report folder  -&gt; &quot; + reportFolder.isDirectory() + &quot; &quot; + reportFolder.exists());\r\n        List&lt;Path&gt; reportFiles = Files.walk(reportFolder.toPath()).filter(file -&gt; file.toFile().getName().endsWith(&quot;.json&quot;)).toList();\r\n        List&lt;Map&lt;String, Object&gt;&gt; finalReportList = new ArrayList&lt;&gt;();\r\n        if (CollectionUtil.isNotEmpty(reportFiles)) {\r\n            System.out.println(&quot;Total report file -&gt;&quot; + reportFiles.size());\r\n            reportFiles.forEach(path -&gt; {\r\n                try {\r\n                    String jsonString = FileUtils.readFileToString(path.toFile(), Charset.defaultCharset());\r\n                    TypeReference&lt;List&lt;Map&lt;String, Object&gt;&gt;&gt; typeRef = new TypeReference&lt;&gt;() {\r\n                    };\r\n                    List&lt;Map&lt;String, Object&gt;&gt; hashMaps = objectMapper.readValue(jsonString, typeRef);\r\n                    finalReportList.addAll(hashMaps);\r\n                } catch (IOException e) {\r\n                    System.err.println(&quot;Can not read file -&gt; &quot; + path.toFile().getAbsolutePath());\r\n                }\r\n            });\r\n\r\n            if (CollectionUtil.isNotEmpty(finalReportList)) {\r\n                String finalReportFileName = reportFolder.getAbsolutePath() + &quot;/final.json&quot;;\r\n                File finalReportFile = new File(finalReportFileName);\r\n                if (finalReportFile.exists()) {\r\n                    boolean delete = finalReportFile.delete();\r\n                    System.out.println(&quot;File is deleted -&gt; &quot; + delete);\r\n                }\r\n                FileUtils.writeStringToFile(finalReportFile, objectMapper.writeValueAsString(finalReportList), Charset.defaultCharset());\r\n                System.out.println(&quot;Report file created&quot;);\r\n            } else {\r\n                System.err.println(&quot;Empty report is created&quot;);\r\n                throw new ReportException(&quot;Empty report created&quot;);\r\n            }\r\n        } else {\r\n            throw new ReportException(&quot;No report file found under folder -&gt;&quot; + reportFolder.getAbsolutePath());\r\n        }\r\n    }\r\n}\r\n\r\n```\r\n\r\nand gralde task dependency settings:\r\n\r\n```\r\ntest {\r\n    println(&quot;Running test task&quot;)\r\n    useTestNG() {\r\n        suites &#39;src/test/testng.xml&#39;\r\n    }\r\n    finalizedBy aggregatReport\r\n}\r\n\r\n\r\ntask importJunitResultsToXrayCloud() {\r\n    dependsOn &#39;test&#39;\r\n    description &#39;Imports Cucumber test results to Xray Test Management for Jira Cloud.&#39;\r\n\r\n    doLast {\r\n       //code to upload report\r\n    }\r\n}\r\n```\r\n\r\nand to upload report just run  `./gradlew importJunitResultsToXrayCloud`\r\n","title":"Combine cucumber json reports","body":"<p>I resolved this by writing a custom gradle task.</p>\n<p>Here is my solution:</p>\n<p>Gradle task:</p>\n<pre><code>task aggregatReport(type: JavaExec) {\n    println(&quot;Running aggregatReport task&quot;)\n    description 'Combine multiple cucumber report json file into one json file'\n    classpath sourceSets.main.runtimeClasspath\n    mainClass = &quot;com.ReportAggregator&quot;\n    def reportFolderPath = &quot;./build/cucumber-reports/&quot;;\n    File file = file(reportFolderPath);\n    args file.toPath().toAbsolutePath().toString()\n}\n</code></pre>\n<p>The code:</p>\n<pre><code>public class ReportAggregator {\n    public static void main(String[] args) throws IOException {\n        System.out.println(&quot;ReportAggregator with argument -&gt; &quot; + Arrays.toString(args));\n        ObjectMapper objectMapper = new ObjectMapper();\n        File reportFolder = new File(args[0]);\n        System.out.println(&quot;Report folder  -&gt; &quot; + reportFolder.isDirectory() + &quot; &quot; + reportFolder.exists());\n        List&lt;Path&gt; reportFiles = Files.walk(reportFolder.toPath()).filter(file -&gt; file.toFile().getName().endsWith(&quot;.json&quot;)).toList();\n        List&lt;Map&lt;String, Object&gt;&gt; finalReportList = new ArrayList&lt;&gt;();\n        if (CollectionUtil.isNotEmpty(reportFiles)) {\n            System.out.println(&quot;Total report file -&gt;&quot; + reportFiles.size());\n            reportFiles.forEach(path -&gt; {\n                try {\n                    String jsonString = FileUtils.readFileToString(path.toFile(), Charset.defaultCharset());\n                    TypeReference&lt;List&lt;Map&lt;String, Object&gt;&gt;&gt; typeRef = new TypeReference&lt;&gt;() {\n                    };\n                    List&lt;Map&lt;String, Object&gt;&gt; hashMaps = objectMapper.readValue(jsonString, typeRef);\n                    finalReportList.addAll(hashMaps);\n                } catch (IOException e) {\n                    System.err.println(&quot;Can not read file -&gt; &quot; + path.toFile().getAbsolutePath());\n                }\n            });\n\n            if (CollectionUtil.isNotEmpty(finalReportList)) {\n                String finalReportFileName = reportFolder.getAbsolutePath() + &quot;/final.json&quot;;\n                File finalReportFile = new File(finalReportFileName);\n                if (finalReportFile.exists()) {\n                    boolean delete = finalReportFile.delete();\n                    System.out.println(&quot;File is deleted -&gt; &quot; + delete);\n                }\n                FileUtils.writeStringToFile(finalReportFile, objectMapper.writeValueAsString(finalReportList), Charset.defaultCharset());\n                System.out.println(&quot;Report file created&quot;);\n            } else {\n                System.err.println(&quot;Empty report is created&quot;);\n                throw new ReportException(&quot;Empty report created&quot;);\n            }\n        } else {\n            throw new ReportException(&quot;No report file found under folder -&gt;&quot; + reportFolder.getAbsolutePath());\n        }\n    }\n}\n\n</code></pre>\n<p>and gralde task dependency settings:</p>\n<pre><code>test {\n    println(&quot;Running test task&quot;)\n    useTestNG() {\n        suites 'src/test/testng.xml'\n    }\n    finalizedBy aggregatReport\n}\n\n\ntask importJunitResultsToXrayCloud() {\n    dependsOn 'test'\n    description 'Imports Cucumber test results to Xray Test Management for Jira Cloud.'\n\n    doLast {\n       //code to upload report\n    }\n}\n</code></pre>\n<p>and to upload report just run  <code>./gradlew importJunitResultsToXrayCloud</code></p>\n"}],"owner":{"account_id":7460660,"reputation":2741,"user_id":5672261,"accept_rate":72,"display_name":"Nitin"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":172,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1695195318,"creation_date":1695131024,"question_id":77135116,"body_markdown":"I am writing test cases using cucumber, and testNG using Java 17.\r\n\r\nWe created multiple feature files and for each feature, we have a separate runner class. \r\n\r\nConfucurtion of the runner class looks as below:\r\n\r\n```\r\n@CucumberOptions(features = {&quot;src/test/resources/features/wallet/A.feature&quot;},\r\n        glue = {&quot;com.test.a&quot;},\r\n        plugin = {&quot;pretty&quot;, &quot;json:build/cucumber-reports/a.json&quot;})\r\n@Test(groups = {&quot;A&quot;, &quot;regression&quot;}, alwaysRun = true)\r\npublic class RunnerA extends AbstractTestNGCucumberTests {\r\n\r\n}\r\n\r\n@CucumberOptions(features = {&quot;src/test/resources/features/wallet/B.feature&quot;},\r\n        glue = {&quot;com.test.b&quot;},\r\n        plugin = {&quot;pretty&quot;, &quot;json:build/cucumber-reports/b.json&quot;})\r\n@Test(groups = {&quot;B&quot;, &quot;regression&quot;}, alwaysRun = true)\r\npublic class RunnerB extends AbstractTestNGCucumberTests {\r\n\r\n}\r\n```\r\n\r\nWhen I run the test case it generates 2 JSON files in `cucumber-reports` folder as `a.json` and `b.json`.\r\n\r\nHow can I merge these two json files in one single json file ie. `report.json`\r\n\r\nI am using `gradle 7` as a build tool with `cucumber 7.11.0`\r\n\r\nEnd goal: I want to upload json file in [Xray][1] using [API][2]\r\n\r\n\r\n  [1]: https://www.getxray.app/\r\n  [2]: https://docs.getxray.app/display/XRAYCLOUD/Import+Execution+Results+-+REST+v2#ImportExecutionResultsRESTv2-CucumberJSONresults","title":"Combine cucumber json reports","body":"<p>I am writing test cases using cucumber, and testNG using Java 17.</p>\n<p>We created multiple feature files and for each feature, we have a separate runner class.</p>\n<p>Confucurtion of the runner class looks as below:</p>\n<pre><code>@CucumberOptions(features = {&quot;src/test/resources/features/wallet/A.feature&quot;},\n        glue = {&quot;com.test.a&quot;},\n        plugin = {&quot;pretty&quot;, &quot;json:build/cucumber-reports/a.json&quot;})\n@Test(groups = {&quot;A&quot;, &quot;regression&quot;}, alwaysRun = true)\npublic class RunnerA extends AbstractTestNGCucumberTests {\n\n}\n\n@CucumberOptions(features = {&quot;src/test/resources/features/wallet/B.feature&quot;},\n        glue = {&quot;com.test.b&quot;},\n        plugin = {&quot;pretty&quot;, &quot;json:build/cucumber-reports/b.json&quot;})\n@Test(groups = {&quot;B&quot;, &quot;regression&quot;}, alwaysRun = true)\npublic class RunnerB extends AbstractTestNGCucumberTests {\n\n}\n</code></pre>\n<p>When I run the test case it generates 2 JSON files in <code>cucumber-reports</code> folder as <code>a.json</code> and <code>b.json</code>.</p>\n<p>How can I merge these two json files in one single json file ie. <code>report.json</code></p>\n<p>I am using <code>gradle 7</code> as a build tool with <code>cucumber 7.11.0</code></p>\n<p>End goal: I want to upload json file in <a href=\"https://www.getxray.app/\" rel=\"nofollow noreferrer\">Xray</a> using <a href=\"https://docs.getxray.app/display/XRAYCLOUD/Import+Execution+Results+-+REST+v2#ImportExecutionResultsRESTv2-CucumberJSONresults\" rel=\"nofollow noreferrer\">API</a></p>\n"},{"tags":["java","algorithm","list","unique"],"comments":[{"owner":{"account_id":392404,"reputation":5663,"user_id":753642,"display_name":"grodzi"},"score":1,"creation_date":1571742656,"post_id":58502853,"comment_id":103334350,"body_markdown":"has your resulting list to keep its order?","body":"has your resulting list to keep its order?"},{"owner":{"account_id":14709639,"reputation":966,"user_id":10623338,"display_name":"John Allison"},"score":1,"creation_date":1571742752,"post_id":58502853,"comment_id":103334399,"body_markdown":"@user753642, nope.","body":"@user753642, nope."},{"owner":{"account_id":16430474,"reputation":153,"user_id":11869461,"display_name":"ialam"},"score":2,"creation_date":1571742965,"post_id":58502853,"comment_id":103334518,"body_markdown":"If you are not constrained to use O(n) extra space then this is elegant solution.\nIf you can&#39;t use extra O(n) space then you can sort the list and then traverse and delete the nodes which have duplicate neighbor node along with the current node. This will be O(nlogn) solution because of sorting but yeah there will always a trade off between space and time and you need to choose one or the other.","body":"If you are not constrained to use O(n) extra space then this is elegant solution. If you can&#39;t use extra O(n) space then you can sort the list and then traverse and delete the nodes which have duplicate neighbor node along with the current node. This will be O(nlogn) solution because of sorting but yeah there will always a trade off between space and time and you need to choose one or the other."},{"owner":{"account_id":4728704,"reputation":17032,"user_id":3824919,"display_name":"Tom"},"score":0,"creation_date":1571745511,"post_id":58502853,"comment_id":103335921,"body_markdown":"Possible duplicate of [Want non duplicate elements from list](https://stackoverflow.com/questions/14225302/want-non-duplicate-elements-from-list)","body":"Possible duplicate of <a href=\"https://stackoverflow.com/questions/14225302/want-non-duplicate-elements-from-list\">Want non duplicate elements from list</a>"}],"answers":[{"comments":[{"owner":{"account_id":14709639,"reputation":966,"user_id":10623338,"display_name":"John Allison"},"score":0,"creation_date":1571743426,"post_id":58502941,"comment_id":103334783,"body_markdown":"Does `Bag` have a method to fetch all elements within the `Bag` that appear X times? I don&#39;t need just the count - I need a collection of the elements.","body":"Does <code>Bag</code> have a method to fetch all elements within the <code>Bag</code> that appear X times? I don&#39;t need just the count - I need a collection of the elements."},{"owner":{"account_id":9847991,"reputation":56906,"user_id":7294900,"accept_rate":94,"display_name":"Ori Marko"},"score":0,"creation_date":1571743552,"post_id":58502941,"comment_id":103334849,"body_markdown":"@JohnAllison you can use Stream and filter elements with count 1","body":"@JohnAllison you can use Stream and filter elements with count 1"},{"owner":{"account_id":2803497,"reputation":25202,"user_id":2411243,"display_name":"Zabuzard"},"score":0,"creation_date":1571743621,"post_id":58502941,"comment_id":103334890,"body_markdown":"While a `Bag` solves this in a few lines, it is essentially what OP described (a `Map` that counts occurrences and then filters for the elements with only one occurrence). Just as a note for OP.","body":"While a <code>Bag</code> solves this in a few lines, it is essentially what OP described (a <code>Map</code> that counts occurrences and then filters for the elements with only one occurrence). Just as a note for OP."},{"owner":{"account_id":9847991,"reputation":56906,"user_id":7294900,"accept_rate":94,"display_name":"Ori Marko"},"score":0,"creation_date":1571743658,"post_id":58502941,"comment_id":103334908,"body_markdown":"@or use `uniqueSet` see https://commons.apache.org/proper/commons-collections/apidocs/org/apache/commons/collections4/Bag.html#uniqueSet--","body":"@or use <code>uniqueSet</code> see <a href=\"https://commons.apache.org/proper/commons-collections/apidocs/org/apache/commons/collections4/Bag.html#uniqueSet--\" rel=\"nofollow noreferrer\">commons.apache.org/proper/commons-collections/apidocs/org/&hellip;</a>"},{"owner":{"account_id":9847991,"reputation":56906,"user_id":7294900,"accept_rate":94,"display_name":"Ori Marko"},"score":0,"creation_date":1571743877,"post_id":58502941,"comment_id":103335013,"body_markdown":"@Zabuza `Bag` is Apache collection interface which defers from Java&#39;s `Map`","body":"@Zabuza <code>Bag</code> is Apache collection interface which defers from Java&#39;s <code>Map</code>"},{"owner":{"account_id":2803497,"reputation":25202,"user_id":2411243,"display_name":"Zabuzard"},"score":0,"creation_date":1571744031,"post_id":58502941,"comment_id":103335093,"body_markdown":"A `Bag` is a standard data-structure that groups elements by their occurrence. It is much similar to a `Map&lt;Key, List&lt;E&gt;&gt;` or a `Map&lt;E, Long&gt;`. Just saying that it more or less is the same approach under the hood. I do not know OPs exact requirements, maybe this disqualifies it then. Maybe not. Just a note.","body":"A <code>Bag</code> is a standard data-structure that groups elements by their occurrence. It is much similar to a <code>Map&lt;Key, List&lt;E&gt;&gt;</code> or a <code>Map&lt;E, Long&gt;</code>. Just saying that it more or less is the same approach under the hood. I do not know OPs exact requirements, maybe this disqualifies it then. Maybe not. Just a note."},{"owner":{"account_id":2803497,"reputation":25202,"user_id":2411243,"display_name":"Zabuzard"},"score":0,"creation_date":1571744304,"post_id":58502941,"comment_id":103335245,"body_markdown":"For clarification, I like your answer since a `Bag` is exactly the correct tool for grouping by occurrences. Especially the `uniqueSet()` is really elegant. Most likely the most compact and still readable solution to OPs problem.","body":"For clarification, I like your answer since a <code>Bag</code> is exactly the correct tool for grouping by occurrences. Especially the <code>uniqueSet()</code> is really elegant. Most likely the most compact and still readable solution to OPs problem."}],"tags":[],"owner":{"account_id":9847991,"reputation":56906,"user_id":7294900,"accept_rate":94,"display_name":"Ori Marko"},"comment_count":7,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1571743992,"creation_date":1571742631,"answer_id":58502941,"question_id":58502853,"body_markdown":"You can use [Bag][1] to count occurrences (`getCount(1)` for unique)\r\n\r\n&gt;Bag is a collection that allows storing multiple items along with their repetition count:\r\n\r\n&gt;     public void whenAdded_thenCountIsKept() {\r\n       Bag&lt;Integer&gt; bag = new HashBag&lt;&gt;(\r\n       Arrays.asList(1, 2, 3, 3, 3, 1, 4));         \r\n       assertThat(2, equalTo(bag.getCount(1)));\r\n    }\r\n\r\nOr `CollectionBag`\r\n&gt; Apache Collections&#39; library provides a decorator called the CollectionBag. We can use this to make our bag collections compliant with the Java Collection contract:\r\n\r\nAnd get [unique set][2]:\r\n\r\n    bag.uniqueSet();\r\n\r\n&gt;Returns a Set of unique elements in the Bag.\r\n[1]:https://www.baeldung.com/apache-commons-bag\r\n[2]:https://commons.apache.org/proper/commons-collections/apidocs/org/apache/commons/collections4/Bag.html#uniqueSet--","title":"Filter List for unique elements","body":"<p>You can use <a href=\"https://www.baeldung.com/apache-commons-bag\" rel=\"nofollow noreferrer\">Bag</a> to count occurrences (<code>getCount(1)</code> for unique)</p>\n\n<blockquote>\n  <p>Bag is a collection that allows storing multiple items along with their repetition count:</p>\n\n<pre><code>public void whenAdded_thenCountIsKept() {\n   Bag&lt;Integer&gt; bag = new HashBag&lt;&gt;(\n   Arrays.asList(1, 2, 3, 3, 3, 1, 4));         \n   assertThat(2, equalTo(bag.getCount(1)));\n}\n</code></pre>\n</blockquote>\n\n<p>Or <code>CollectionBag</code></p>\n\n<blockquote>\n  <p>Apache Collections' library provides a decorator called the CollectionBag. We can use this to make our bag collections compliant with the Java Collection contract:</p>\n</blockquote>\n\n<p>And get <a href=\"https://commons.apache.org/proper/commons-collections/apidocs/org/apache/commons/collections4/Bag.html#uniqueSet--\" rel=\"nofollow noreferrer\">unique set</a>:</p>\n\n<pre><code>bag.uniqueSet();\n</code></pre>\n\n<blockquote>\n  <p>Returns a Set of unique elements in the Bag.</p>\n</blockquote>\n"},{"comments":[{"owner":{"account_id":7151624,"reputation":2308,"user_id":5465447,"display_name":"Roaim"},"score":1,"creation_date":1571743788,"post_id":58503201,"comment_id":103334970,"body_markdown":"Your second solution is what I was supposed to post","body":"Your second solution is what I was supposed to post"}],"tags":[],"owner":{"account_id":2803497,"reputation":25202,"user_id":2411243,"display_name":"Zabuzard"},"comment_count":1,"down_vote_count":0,"up_vote_count":4,"is_accepted":true,"score":4,"last_activity_date":1571744155,"creation_date":1571743506,"answer_id":58503201,"question_id":58502853,"body_markdown":"I doubt there is a better approach than actually counting and filtering for the ones that only appeared once. At least, all approaches I can think of will use _something similar_ to that under the hood.\r\n\r\nAlso, it is not clear what you mean by elegant, readability or performance? So I will just dump some approaches.\r\n\r\n----------\r\n## `Stream` counting ##\r\n\r\nHere is a stream-variant that computes number of occurrences (`Map`) and then filters for elements that appear only once. It is essentially the same as what you described already, or what `Bag`s do under the hood:\r\n\r\n    List&lt;E&gt; result = elements.stream() // Stream&lt;E&gt;\r\n        .collect(Collectors.groupingBy(Function.identity(), Collectors.counting())) // Map&lt;E, Long&gt;\r\n        .entries() // Set&lt;Entry&lt;E, Long&gt;&gt;\r\n        .stream()  // Stream&lt;Entry&lt;E, Long&gt;&gt;\r\n        .filter(entry -&gt; entry.getValue() == 1)\r\n        .map(Entry::getKey)\r\n        .collect(Collectors.toList());\r\n\r\nIt requires two full iterations over the data-set. Since it uses the Stream-API, the operations support multi-threading right from the get-go though. So if you have lots of elements, this might be pretty fast due to that.\r\n\r\n----------\r\n## Manual `Set` ##\r\n\r\nHere is another approach that reduces iteration and lookup time by manually collecting into a `Set` to identify duplicates as fast as possible:\r\n\r\n    Set&lt;E&gt; result = new HashSet&lt;&gt;();\r\n    Set&lt;E&gt; appeared = new HashSet&lt;&gt;();\r\n\r\n    for (E element : elements) {\r\n        if (result.contains(element)) { // 2nd occurrence\r\n            result.remove(element);\r\n            appeared.add(element);\r\n            continue;\r\n        }\r\n        if (appeared.contains(element)) { // &gt;2nd occurrence\r\n            continue;\r\n        }\r\n\r\n        result.add(element); // 1st occurrence\r\n    }\r\n\r\nAs you see, this only requires one iteration over the `elements` instead of multiple.\r\n\r\nThis approach is elegant in a sense that it does not compute unnecessary information. For what you want, it is completely irrelevant to compute how often exactly elements appear. We only care for *&quot;does it appear once or more often?&quot;* and not if it appears 5 times or 11 times.","title":"Filter List for unique elements","body":"<p>I doubt there is a better approach than actually counting and filtering for the ones that only appeared once. At least, all approaches I can think of will use <em>something similar</em> to that under the hood.</p>\n\n<p>Also, it is not clear what you mean by elegant, readability or performance? So I will just dump some approaches.</p>\n\n<hr>\n\n<h2><code>Stream</code> counting</h2>\n\n<p>Here is a stream-variant that computes number of occurrences (<code>Map</code>) and then filters for elements that appear only once. It is essentially the same as what you described already, or what <code>Bag</code>s do under the hood:</p>\n\n<pre><code>List&lt;E&gt; result = elements.stream() // Stream&lt;E&gt;\n    .collect(Collectors.groupingBy(Function.identity(), Collectors.counting())) // Map&lt;E, Long&gt;\n    .entries() // Set&lt;Entry&lt;E, Long&gt;&gt;\n    .stream()  // Stream&lt;Entry&lt;E, Long&gt;&gt;\n    .filter(entry -&gt; entry.getValue() == 1)\n    .map(Entry::getKey)\n    .collect(Collectors.toList());\n</code></pre>\n\n<p>It requires two full iterations over the data-set. Since it uses the Stream-API, the operations support multi-threading right from the get-go though. So if you have lots of elements, this might be pretty fast due to that.</p>\n\n<hr>\n\n<h2>Manual <code>Set</code></h2>\n\n<p>Here is another approach that reduces iteration and lookup time by manually collecting into a <code>Set</code> to identify duplicates as fast as possible:</p>\n\n<pre><code>Set&lt;E&gt; result = new HashSet&lt;&gt;();\nSet&lt;E&gt; appeared = new HashSet&lt;&gt;();\n\nfor (E element : elements) {\n    if (result.contains(element)) { // 2nd occurrence\n        result.remove(element);\n        appeared.add(element);\n        continue;\n    }\n    if (appeared.contains(element)) { // &gt;2nd occurrence\n        continue;\n    }\n\n    result.add(element); // 1st occurrence\n}\n</code></pre>\n\n<p>As you see, this only requires one iteration over the <code>elements</code> instead of multiple.</p>\n\n<p>This approach is elegant in a sense that it does not compute unnecessary information. For what you want, it is completely irrelevant to compute how often exactly elements appear. We only care for <em>\"does it appear once or more often?\"</em> and not if it appears 5 times or 11 times.</p>\n"},{"tags":[],"owner":{"account_id":960307,"reputation":107861,"user_id":984823,"display_name":"Joop Eggen"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1571743734,"creation_date":1571743734,"answer_id":58503257,"question_id":58502853,"body_markdown":"One need first to collect all, reached the end for deleting groups of more than 1 element.\r\n\r\n    Map&lt;String, Long&gt; map = Stream.of(&quot;a&quot;, &quot;b&quot;, &quot;a&quot;, &quot;a&quot;, &quot;c&quot;, &quot;d&quot;, &quot;c&quot;)\r\n                .collect(Collectors.groupingBy(Function.identity(), \r\n                         Collectors.counting()));\r\n    map.entrySet()\r\n        .stream()\r\n        .filter(e -&gt; e.getValue() == 1L)\r\n        .map(e -&gt; e.getKey())\r\n        .forEach(System.out::println);\r\n    \r\n\r\nOr in one go:\r\n\r\n            Stream.of(&quot;a&quot;, &quot;b&quot;, &quot;a&quot;, &quot;a&quot;, &quot;c&quot;, &quot;d&quot;, &quot;c&quot;)\r\n                    .collect(Collectors.groupingBy(Function.identity(), Collectors.counting()))\r\n                    .entrySet()\r\n                    .stream()\r\n                    .filter(e -&gt; e.getValue() == 1L)\r\n                    .map(e -&gt; e.getKey())\r\n                    .forEach(System.out::println);\r\n\r\n","title":"Filter List for unique elements","body":"<p>One need first to collect all, reached the end for deleting groups of more than 1 element.</p>\n\n<pre><code>Map&lt;String, Long&gt; map = Stream.of(\"a\", \"b\", \"a\", \"a\", \"c\", \"d\", \"c\")\n            .collect(Collectors.groupingBy(Function.identity(), \n                     Collectors.counting()));\nmap.entrySet()\n    .stream()\n    .filter(e -&gt; e.getValue() == 1L)\n    .map(e -&gt; e.getKey())\n    .forEach(System.out::println);\n</code></pre>\n\n<p>Or in one go:</p>\n\n<pre><code>        Stream.of(\"a\", \"b\", \"a\", \"a\", \"c\", \"d\", \"c\")\n                .collect(Collectors.groupingBy(Function.identity(), Collectors.counting()))\n                .entrySet()\n                .stream()\n                .filter(e -&gt; e.getValue() == 1L)\n                .map(e -&gt; e.getKey())\n                .forEach(System.out::println);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":8397558,"reputation":4568,"user_id":6304094,"display_name":"Kevin Anderson"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1571746739,"creation_date":1571746739,"answer_id":58504149,"question_id":58502853,"body_markdown":"The idea of using a map to accumulate frequency counts sounds like a good one: it runs in roughly linear (O(_n_)) time and only requires O(_n_) extra space.  \r\n\r\nHere&#39;s an algorithm that requires _**zero** extra space_, at the expense of running in O(_n^2_) time:\r\n\r\n\r\n    public static &lt;T&gt; void retainSingletons(List&lt;T&gt; list)\r\n    {\r\n        int i = 0;\r\n        while (i &lt; list.size()) {\r\n            boolean foundDup = false;\r\n            int j = i + 1;\r\n            while (j &lt; list.size()) {\r\n                if (list.get(i).equals(list.get(j))) {\r\n                    list.remove(j);\r\n                    foundDup = true;\r\n                } else {\r\n                    ++j;\r\n                }\r\n            }\r\n            if (foundDup) {\r\n                list.remove(i);\r\n            } else {\r\n                ++i;\r\n            }\r\n        }\r\n    }\r\n\r\nThe idea is straightforward: step a slow pointer, `i`, over the list until it runs off the end; for each value of `i`, run a fast pointer `j` from `i+1` until the end of the list,  removing any `list[j]` that&#39;s a duplicate of `list[i]`; after `j` runs out, if any duplicates of `list[i]` were found and removed, also remove `list[i]`.","title":"Filter List for unique elements","body":"<p>The idea of using a map to accumulate frequency counts sounds like a good one: it runs in roughly linear (O(<em>n</em>)) time and only requires O(<em>n</em>) extra space.  </p>\n\n<p>Here's an algorithm that requires <em><strong>zero</strong> extra space</em>, at the expense of running in O(<em>n^2</em>) time:</p>\n\n<pre><code>public static &lt;T&gt; void retainSingletons(List&lt;T&gt; list)\n{\n    int i = 0;\n    while (i &lt; list.size()) {\n        boolean foundDup = false;\n        int j = i + 1;\n        while (j &lt; list.size()) {\n            if (list.get(i).equals(list.get(j))) {\n                list.remove(j);\n                foundDup = true;\n            } else {\n                ++j;\n            }\n        }\n        if (foundDup) {\n            list.remove(i);\n        } else {\n            ++i;\n        }\n    }\n}\n</code></pre>\n\n<p>The idea is straightforward: step a slow pointer, <code>i</code>, over the list until it runs off the end; for each value of <code>i</code>, run a fast pointer <code>j</code> from <code>i+1</code> until the end of the list,  removing any <code>list[j]</code> that's a duplicate of <code>list[i]</code>; after <code>j</code> runs out, if any duplicates of <code>list[i]</code> were found and removed, also remove <code>list[i]</code>.</p>\n"},{"tags":[],"owner":{"account_id":1712726,"reputation":6528,"user_id":1570415,"display_name":"Donald Raab"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1572059569,"creation_date":1572059569,"answer_id":58567758,"question_id":58502853,"body_markdown":"The following will work using [Eclipse Collections][1]:\r\n\r\n    IntList list = IntLists.mutable.with(1, 2, 2, 3, 1, 4);\r\n    IntSet unique = list.toBag().selectUnique();\r\n    System.out.println(unique);\r\n\r\nUsing an `IntList` removes the need to box the `int` values and `Integer` objects.\r\n\r\nNote: I am a committer for Eclipse Collections.\r\n\r\n\r\n  [1]: https://github.com/eclipse/eclipse-collections","title":"Filter List for unique elements","body":"<p>The following will work using <a href=\"https://github.com/eclipse/eclipse-collections\" rel=\"nofollow noreferrer\">Eclipse Collections</a>:</p>\n\n<pre><code>IntList list = IntLists.mutable.with(1, 2, 2, 3, 1, 4);\nIntSet unique = list.toBag().selectUnique();\nSystem.out.println(unique);\n</code></pre>\n\n<p>Using an <code>IntList</code> removes the need to box the <code>int</code> values and <code>Integer</code> objects.</p>\n\n<p>Note: I am a committer for Eclipse Collections.</p>\n"},{"comments":[{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":1,"creation_date":1695314492,"post_id":77140212,"comment_id":136011130,"body_markdown":"Your answer could be improved with additional supporting information. Please [edit] to add further details, such as citations or documentation, so that others can confirm that your answer is correct. You can find more information on how to write good answers [in the help center](/help/how-to-answer).","body":"Your answer could be improved with additional supporting information. Please <a href=\"https://stackoverflow.com/posts/77140212/edit\">edit</a> to add further details, such as citations or documentation, so that others can confirm that your answer is correct. You can find more information on how to write good answers <a href=\"/help/how-to-answer\">in the help center</a>."}],"tags":[],"owner":{"account_id":29488850,"reputation":1,"user_id":22598189,"display_name":"Developer007"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695194946,"creation_date":1695194946,"answer_id":77140212,"question_id":58502853,"body_markdown":"Please find the correct code below. Implemented in Java by using Stream API and Functional Interfaces.\r\n\r\n```\r\n// Code to Print Only Non Duplicate Elements\r\nimport java.util.*;\r\nimport java.util.function.Predicate;\r\nimport java.util.stream.Collectors;\r\n\r\npublic class NonDuplicateElements {\r\n    public static void main(String[] args) {\r\n        List&lt;Integer&gt; numbers = Arrays.asList(1, 2, 2, 3, 4, 4, 5, 6, 6, 7);\r\n\r\n        // Use a Predicate to check for duplicates\r\n        Predicate&lt;Integer&gt; isDuplicate = new Predicate&lt;Integer&gt;() {\r\n            Set&lt;Integer&gt; seen = new HashSet&lt;&gt;();\r\n\r\n            @Override\r\n            public boolean test(Integer number) {\r\n                return !seen.add(number); // Returns true if number is already seen (duplicate)\r\n            }\r\n        };\r\n\r\n        // Filter the list to get duplicate elements\r\n        List&lt;Integer&gt; duplicateNumbers = numbers.stream()\r\n                .filter(isDuplicate)\r\n                .collect(Collectors.toList());\r\n\r\n        // Print the non-duplicate elements\r\n        List&lt;Integer&gt; finalResult = new ArrayList&lt;Integer&gt;();\r\n\t\tfor (int number : numbers) {\r\n\t\t\tif (!duplicateNumbers.contains(number)) {\r\n\t\t\t\tfinalResult.add(number);\r\n\t\t\t}\r\n\t\t}\r\n\t\tSystem.out.println(finalResult);\r\n    }\r\n}\r\n```","title":"Filter List for unique elements","body":"<p>Please find the correct code below. Implemented in Java by using Stream API and Functional Interfaces.</p>\n<pre><code>// Code to Print Only Non Duplicate Elements\nimport java.util.*;\nimport java.util.function.Predicate;\nimport java.util.stream.Collectors;\n\npublic class NonDuplicateElements {\n    public static void main(String[] args) {\n        List&lt;Integer&gt; numbers = Arrays.asList(1, 2, 2, 3, 4, 4, 5, 6, 6, 7);\n\n        // Use a Predicate to check for duplicates\n        Predicate&lt;Integer&gt; isDuplicate = new Predicate&lt;Integer&gt;() {\n            Set&lt;Integer&gt; seen = new HashSet&lt;&gt;();\n\n            @Override\n            public boolean test(Integer number) {\n                return !seen.add(number); // Returns true if number is already seen (duplicate)\n            }\n        };\n\n        // Filter the list to get duplicate elements\n        List&lt;Integer&gt; duplicateNumbers = numbers.stream()\n                .filter(isDuplicate)\n                .collect(Collectors.toList());\n\n        // Print the non-duplicate elements\n        List&lt;Integer&gt; finalResult = new ArrayList&lt;Integer&gt;();\n        for (int number : numbers) {\n            if (!duplicateNumbers.contains(number)) {\n                finalResult.add(number);\n            }\n        }\n        System.out.println(finalResult);\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":14709639,"reputation":966,"user_id":10623338,"display_name":"John Allison"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1758,"favorite_count":0,"down_vote_count":1,"up_vote_count":3,"accepted_answer_id":58503201,"answer_count":6,"score":2,"last_activity_date":1695194946,"creation_date":1571742362,"question_id":58502853,"body_markdown":"I am searching for an elegant way to filter a list for only the elements that are unique. An example:\r\n\r\n       [1, 2, 2, 3, 1, 4]\r\n    -&gt; [3, 4] // 1 and 2 occur more than once\r\n\r\nMost solutions I found manually compute the occurrences of all elements and then filter by the elements that have exactly one occurrence.\r\n\r\nThat does not sound too elegant to me, maybe there is a better solution, a best practice or a name for a data-structure that solves this already? I was also thinking about maybe utilizing streams, but I do not know how.\r\n\r\n----------\r\n\r\nNote that I am not asking for duplicate removal, i.e. `[1, 2, 3, 4]` but for keeping only the unique elements, so `[3, 4]`.\r\n\r\nThe order of the resulting list or what type of `Collection` exactly does not matter to me.","title":"Filter List for unique elements","body":"<p>I am searching for an elegant way to filter a list for only the elements that are unique. An example:</p>\n\n<pre><code>   [1, 2, 2, 3, 1, 4]\n-&gt; [3, 4] // 1 and 2 occur more than once\n</code></pre>\n\n<p>Most solutions I found manually compute the occurrences of all elements and then filter by the elements that have exactly one occurrence.</p>\n\n<p>That does not sound too elegant to me, maybe there is a better solution, a best practice or a name for a data-structure that solves this already? I was also thinking about maybe utilizing streams, but I do not know how.</p>\n\n<hr>\n\n<p>Note that I am not asking for duplicate removal, i.e. <code>[1, 2, 3, 4]</code> but for keeping only the unique elements, so <code>[3, 4]</code>.</p>\n\n<p>The order of the resulting list or what type of <code>Collection</code> exactly does not matter to me.</p>\n"},{"tags":["java","for-loop","java-8","java-stream"],"comments":[{"owner":{"account_id":9735171,"reputation":2264,"user_id":7218656,"accept_rate":75,"display_name":"Arun Sudhakaran"},"score":1,"creation_date":1695189181,"post_id":77139292,"comment_id":135988931,"body_markdown":"Does this answer your question? [Local variable log defined in an enclosing scope must be final or effectively final](https://stackoverflow.com/questions/38402493/local-variable-log-defined-in-an-enclosing-scope-must-be-final-or-effectively-fi)","body":"Does this answer your question? <a href=\"https://stackoverflow.com/questions/38402493/local-variable-log-defined-in-an-enclosing-scope-must-be-final-or-effectively-fi\">Local variable log defined in an enclosing scope must be final or effectively final</a>"},{"owner":{"account_id":3211603,"reputation":289317,"user_id":2711488,"display_name":"Holger"},"score":2,"creation_date":1695218212,"post_id":77139292,"comment_id":135995126,"body_markdown":"If you “practice algorithms” you should note that this is a very inefficient approach. Hiding the second loop in a Stream operation does not change the fact that you have two nested loops here. Compare with `for(Character c: list) { switch(c) { case &#39;n&#39; -&gt; counts[0]++; case &#39;s&#39; -&gt; counts[1]++; case &#39;e&#39; -&gt; counts[2]++; case &#39;w&#39; -&gt; counts[3]++; } }` which does just a single loop. But your question looks like an [xy problem](https://meta.stackexchange.com/questions/66377/what-is-the-xy-problem/66378#66378) anyway, as your `return true;` hides the actual goal (which might have a better solution)","body":"If you “practice algorithms” you should note that this is a very inefficient approach. Hiding the second loop in a Stream operation does not change the fact that you have two nested loops here. Compare with <code>for(Character c: list) { switch(c) { case &#39;n&#39; -&gt; counts[0]++; case &#39;s&#39; -&gt; counts[1]++; case &#39;e&#39; -&gt; counts[2]++; case &#39;w&#39; -&gt; counts[3]++; } }</code> which does just a single loop. But your question looks like an <a href=\"https://meta.stackexchange.com/questions/66377/what-is-the-xy-problem/66378#66378\">xy problem</a> anyway, as your <code>return true;</code> hides the actual goal (which might have a better solution)"}],"answers":[{"comments":[{"owner":{"account_id":1691630,"reputation":49583,"user_id":1553851,"accept_rate":73,"display_name":"shmosel"},"score":0,"creation_date":1695189173,"post_id":77139400,"comment_id":135988929,"body_markdown":"Or `final char cpx = cp[x];`","body":"Or <code>final char cpx = cp[x];</code>"}],"tags":[],"owner":{"account_id":16346339,"reputation":1,"user_id":11805977,"display_name":"An Nguyễn"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695186140,"creation_date":1695186116,"answer_id":77139400,"question_id":77139292,"body_markdown":"just like the error message said, you are trying to pass a local variable into a lambda expression, which not allow if the variable in case that variable was not a final or effectively final. \r\n\r\nyou can try to fix it which this one \r\n\r\n    for(int x = 0; x&lt;counts.length; x++) {\r\n        final int finalValue = x;\r\n        counts[x] = (int) list.stream().\r\n                filter(i -&gt; i==cp[finalValue])\r\n                .count();\r\n    }","title":"How I add a stream into a loop, using filter to compare a global variable?","body":"<p>just like the error message said, you are trying to pass a local variable into a lambda expression, which not allow if the variable in case that variable was not a final or effectively final.</p>\n<p>you can try to fix it which this one</p>\n<pre><code>for(int x = 0; x&lt;counts.length; x++) {\n    final int finalValue = x;\n    counts[x] = (int) list.stream().\n            filter(i -&gt; i==cp[finalValue])\n            .count();\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":23740623,"reputation":1,"user_id":17758716,"display_name":"Reilas"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695191165,"creation_date":1695189354,"answer_id":77139625,"question_id":77139292,"body_markdown":"&gt; _&quot;... I get an error in cp[x], with the message &quot;local variable x defined in an enclosing scope must be final or effectively final&quot; ...&quot;_\r\n\r\nThe following is from the _[Java Language Specification](https://docs.oracle.com/javase/specs/jls/se20/html/index.html)_.\r\n\r\n_[8.1.3. Inner Classes and Enclosing Instances](https://docs.oracle.com/javase/specs/jls/se20/html/jls-8.html#jls-8.1.3)_,\r\n\r\n&gt; _&quot;... Any local variable, formal parameter, or exception parameter used but not declared in an inner class must either be final or effectively final ([&#167;4.12.4](https://docs.oracle.com/javase/specs/jls/se20/html/jls-4.html#jls-4.12.4)), as specified in [&#167;6.5.6.1](https://docs.oracle.com/javase/specs/jls/se20/html/jls-6.html#jls-6.5.6.1). ...&quot;_\r\n\r\n&gt; _&quot;... Anyone can help me to how can I resolve this?&quot;_\r\n\r\nThe advanced _[for-loop](https://docs.oracle.com/javase/tutorial/java/nutsandbolts/for.html)_ will produce _effectively-final_ values, so iterate on _cp_.\r\n\r\n```java\r\nCharacter[] list = { &#39;n&#39;, &#39;s&#39;, &#39;s&#39;, &#39;w&#39;, &#39;e&#39;, &#39;n&#39;, &#39;n&#39;, &#39;w&#39;, &#39;w&#39;, &#39;w&#39; };\r\nint[] counts = {0,0,0,0};\r\nchar [] cp = {&#39;n&#39;, &#39;s&#39;, &#39;e&#39;, &#39;w&#39;};\r\nint i = 0;\r\nfor (char c : cp)\r\n    counts[i++] = (int) Stream.of(list).filter(x -&gt; x == c).count();\r\n```\r\n\r\nOutput\r\n\r\n```none\r\n[3, 2, 1, 4]\r\n```","title":"How I add a stream into a loop, using filter to compare a global variable?","body":"<blockquote>\n<p><em>&quot;... I get an error in cp[x], with the message &quot;local variable x defined in an enclosing scope must be final or effectively final&quot; ...&quot;</em></p>\n</blockquote>\n<p>The following is from the <em><a href=\"https://docs.oracle.com/javase/specs/jls/se20/html/index.html\" rel=\"nofollow noreferrer\">Java Language Specification</a></em>.</p>\n<p><em><a href=\"https://docs.oracle.com/javase/specs/jls/se20/html/jls-8.html#jls-8.1.3\" rel=\"nofollow noreferrer\">8.1.3. Inner Classes and Enclosing Instances</a></em>,</p>\n<blockquote>\n<p><em>&quot;... Any local variable, formal parameter, or exception parameter used but not declared in an inner class must either be final or effectively final (<a href=\"https://docs.oracle.com/javase/specs/jls/se20/html/jls-4.html#jls-4.12.4\" rel=\"nofollow noreferrer\">§4.12.4</a>), as specified in <a href=\"https://docs.oracle.com/javase/specs/jls/se20/html/jls-6.html#jls-6.5.6.1\" rel=\"nofollow noreferrer\">§6.5.6.1</a>. ...&quot;</em></p>\n</blockquote>\n<blockquote>\n<p><em>&quot;... Anyone can help me to how can I resolve this?&quot;</em></p>\n</blockquote>\n<p>The advanced <em><a href=\"https://docs.oracle.com/javase/tutorial/java/nutsandbolts/for.html\" rel=\"nofollow noreferrer\">for-loop</a></em> will produce <em>effectively-final</em> values, so iterate on <em>cp</em>.</p>\n<pre class=\"lang-java prettyprint-override\"><code>Character[] list = { 'n', 's', 's', 'w', 'e', 'n', 'n', 'w', 'w', 'w' };\nint[] counts = {0,0,0,0};\nchar [] cp = {'n', 's', 'e', 'w'};\nint i = 0;\nfor (char c : cp)\n    counts[i++] = (int) Stream.of(list).filter(x -&gt; x == c).count();\n</code></pre>\n<p>Output</p>\n<pre class=\"lang-none prettyprint-override\"><code>[3, 2, 1, 4]\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3449265,"reputation":389,"user_id":2889269,"accept_rate":83,"display_name":"kusama"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695190612,"creation_date":1695190612,"answer_id":77139737,"question_id":77139292,"body_markdown":"Maybe the below code is helpful\r\n\r\n                import java.util.Arrays;\r\n                import java.util.List;\r\n\r\n                public class Main {\r\n                    public static void main(String[] args) {\r\n                        List&lt;Character&gt; charList = Arrays.asList(&#39;n&#39;, &#39;s&#39;, &#39;s&#39;, &#39;w&#39;, &#39;e&#39;, &#39;n&#39;, &#39;n&#39;, &#39;w&#39;, &#39;w&#39;, &#39;w&#39;);\r\n                        \r\n                        boolean result = getReturnOrigin(charList);\r\n                        \r\n                        System.out.println(&quot;Result: &quot; + result);\r\n                    }\r\n\r\n                    public static boolean getReturnOrigin(List&lt;Character&gt; list) {\r\n\r\n                        // list:[&#39;n&#39;, &#39;s&#39;, &#39;s&#39;, &#39;w&#39;, &#39;e&#39;, &#39;n&#39;, &#39;n&#39;, &#39;w&#39;, &#39;w&#39;, &#39;w&#39;]\r\n\r\n                        // counts: {n, s, e, w}\r\n                        int[] counts = {0, 0, 0, 0};\r\n                        char[] cp = {&#39;n&#39;, &#39;s&#39;, &#39;e&#39;, &#39;w&#39;};\r\n\r\n                        for (int x = 0; x &lt; counts.length; x++) {\r\n                            int finalX = x; // Create an effectively final copy of x\r\n                            counts[x] = (int) list.stream()\r\n                                    .filter(i -&gt; i == cp[finalX]) // Use the finalX copy here\r\n                                    .count();\r\n                        }\r\n\r\n                        return true;\r\n                    }\r\n                }\r\n\r\nThe error you are facing, \r\n**&quot;local variable x defined in an enclosing scope must be final or effectively final&quot;** \r\n\r\nis because you&#39;re trying to access the variable x inside the lambda expression of the filter method, but x is not effectively final within the loop. In Java, lambda expressions can only access local variables that are effectively final, which means they should not be modified after their initial assignment.\r\n\r\nTo work around this, you can create a copy of x that is effectively final and can be used within the lambda expression. ","title":"How I add a stream into a loop, using filter to compare a global variable?","body":"<p>Maybe the below code is helpful</p>\n<pre><code>            import java.util.Arrays;\n            import java.util.List;\n\n            public class Main {\n                public static void main(String[] args) {\n                    List&lt;Character&gt; charList = Arrays.asList('n', 's', 's', 'w', 'e', 'n', 'n', 'w', 'w', 'w');\n                    \n                    boolean result = getReturnOrigin(charList);\n                    \n                    System.out.println(&quot;Result: &quot; + result);\n                }\n\n                public static boolean getReturnOrigin(List&lt;Character&gt; list) {\n\n                    // list:['n', 's', 's', 'w', 'e', 'n', 'n', 'w', 'w', 'w']\n\n                    // counts: {n, s, e, w}\n                    int[] counts = {0, 0, 0, 0};\n                    char[] cp = {'n', 's', 'e', 'w'};\n\n                    for (int x = 0; x &lt; counts.length; x++) {\n                        int finalX = x; // Create an effectively final copy of x\n                        counts[x] = (int) list.stream()\n                                .filter(i -&gt; i == cp[finalX]) // Use the finalX copy here\n                                .count();\n                    }\n\n                    return true;\n                }\n            }\n</code></pre>\n<p>The error you are facing,\n<strong>&quot;local variable x defined in an enclosing scope must be final or effectively final&quot;</strong></p>\n<p>is because you're trying to access the variable x inside the lambda expression of the filter method, but x is not effectively final within the loop. In Java, lambda expressions can only access local variables that are effectively final, which means they should not be modified after their initial assignment.</p>\n<p>To work around this, you can create a copy of x that is effectively final and can be used within the lambda expression.</p>\n"},{"tags":[],"owner":{"account_id":216120,"reputation":49213,"user_id":471160,"accept_rate":90,"display_name":"marcinj"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695194578,"creation_date":1695194140,"answer_id":77140101,"question_id":77139292,"body_markdown":"&gt; error: local variables referenced from a lambda expression must be final or effectively final\r\n\r\nthis error is because you&#39;re trying to access the non-final variable `x` inside the lambda expression. In Java, only final or effectively final variables can be accessed in a lambda expression. Final variables are those declared with final modifier:\r\n\r\n    final int x2 = 0;\r\n\r\nand effectively-final are those which dont have final modifier, but are assigned only once:\r\n\r\n    int x2 = 0; // not modified later on\r\n\r\nYou can fix this error by creating a final copy of `x` inside the loop, and use that in your lambda expression:\r\n\r\n    for(int x = 0; x&lt;counts.length; x++) {\r\n        final int finalX = x; //actually, final is not required \r\n                              //here, but makes it clear why the copy is made.\r\n                              //also, final here prevents accidental modify of this variable if the code grows.\r\n        counts[x] = (int) list.stream().\r\n                filter(i -&gt; i==cp[finalX])\r\n                .count();\r\n    }\r\n\r\nAnother solution would be to use `IntStream.range` instead of for loop:\r\n\r\n        IntStream.range(0, counts.length).forEach(x -&gt;\r\n                counts[x] = (int) list.stream().filter(i -&gt; i == cp[x]).count()\r\n        );","title":"How I add a stream into a loop, using filter to compare a global variable?","body":"<blockquote>\n<p>error: local variables referenced from a lambda expression must be final or effectively final</p>\n</blockquote>\n<p>this error is because you're trying to access the non-final variable <code>x</code> inside the lambda expression. In Java, only final or effectively final variables can be accessed in a lambda expression. Final variables are those declared with final modifier:</p>\n<pre><code>final int x2 = 0;\n</code></pre>\n<p>and effectively-final are those which dont have final modifier, but are assigned only once:</p>\n<pre><code>int x2 = 0; // not modified later on\n</code></pre>\n<p>You can fix this error by creating a final copy of <code>x</code> inside the loop, and use that in your lambda expression:</p>\n<pre><code>for(int x = 0; x&lt;counts.length; x++) {\n    final int finalX = x; //actually, final is not required \n                          //here, but makes it clear why the copy is made.\n                          //also, final here prevents accidental modify of this variable if the code grows.\n    counts[x] = (int) list.stream().\n            filter(i -&gt; i==cp[finalX])\n            .count();\n}\n</code></pre>\n<p>Another solution would be to use <code>IntStream.range</code> instead of for loop:</p>\n<pre><code>    IntStream.range(0, counts.length).forEach(x -&gt;\n            counts[x] = (int) list.stream().filter(i -&gt; i == cp[x]).count()\n    );\n</code></pre>\n"},{"tags":[],"owner":{"account_id":9463219,"reputation":9357,"user_id":7036419,"display_name":"Maurice Perry"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695194847,"creation_date":1695194847,"answer_id":77140200,"question_id":77139292,"body_markdown":"Consider using a `Map`:\r\n\r\n        Map&lt;Character,Integer&gt; map = list.stream().collect(\r\n                Collectors.toMap(\r\n                        Function.identity(), e -&gt; 1, (a,b) -&gt; a + b));\r\n","title":"How I add a stream into a loop, using filter to compare a global variable?","body":"<p>Consider using a <code>Map</code>:</p>\n<pre><code>    Map&lt;Character,Integer&gt; map = list.stream().collect(\n            Collectors.toMap(\n                    Function.identity(), e -&gt; 1, (a,b) -&gt; a + b));\n</code></pre>\n"}],"owner":{"account_id":29487517,"reputation":1,"user_id":22597099,"display_name":"Luis Fernando Ch&#225;vez Morales"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":82,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":5,"score":0,"last_activity_date":1695194847,"creation_date":1695184230,"question_id":77139292,"body_markdown":"I&#39;m practice algorithms and I&#39;m trying to make a stream inside a loop where the length is equals to the size of another array. There I made 2 arrays: counts[] and cp[]\r\n\r\n    public static boolean getReturnOrigin(List&lt;Character&gt; list) {\r\n    \t\t\r\n    \t//list:[&#39;n&#39;, &#39;s&#39;, &#39;s&#39;, &#39;w&#39;, &#39;e&#39;, &#39;n&#39;, &#39;n&#39;, &#39;w&#39;, &#39;w&#39;, &#39;w&#39;]\r\n    \t\t\t\r\n    \t// counts: {n, s, e, w}\r\n    \tint[] counts = {0,0,0,0};\r\n    \tchar [] cp = {&#39;n&#39;, &#39;s&#39;, &#39;e&#39;, &#39;w&#39;};\r\n    \t\t\r\n    \tfor(int x = 0; x&lt;counts.length; x++) {\r\n    \t\tcounts[x] = (int) list.stream().\r\n    \t\t\t\tfilter(i -&gt; i==cp[x])\r\n    \t\t\t\t.count();\r\n    \t}\r\n    \t\t\r\n    \treturn true;\r\n    }\r\n\r\nI&#39;m trying to store intengers in counts[] using a loop, adding a stream inside. In the stream I want to use filter to compare with each cp[x].\r\n\r\nBut I get an error in cp[x], with the message &quot;local variable x defined in an enclosing scope must be final or effectively final&quot;\r\n\r\nAnyone can help me to how can I resolve this?","title":"How I add a stream into a loop, using filter to compare a global variable?","body":"<p>I'm practice algorithms and I'm trying to make a stream inside a loop where the length is equals to the size of another array. There I made 2 arrays: counts[] and cp[]</p>\n<pre><code>public static boolean getReturnOrigin(List&lt;Character&gt; list) {\n        \n    //list:['n', 's', 's', 'w', 'e', 'n', 'n', 'w', 'w', 'w']\n            \n    // counts: {n, s, e, w}\n    int[] counts = {0,0,0,0};\n    char [] cp = {'n', 's', 'e', 'w'};\n        \n    for(int x = 0; x&lt;counts.length; x++) {\n        counts[x] = (int) list.stream().\n                filter(i -&gt; i==cp[x])\n                .count();\n    }\n        \n    return true;\n}\n</code></pre>\n<p>I'm trying to store intengers in counts[] using a loop, adding a stream inside. In the stream I want to use filter to compare with each cp[x].</p>\n<p>But I get an error in cp[x], with the message &quot;local variable x defined in an enclosing scope must be final or effectively final&quot;</p>\n<p>Anyone can help me to how can I resolve this?</p>\n"},{"tags":["java","hashset","deque","sub-array"],"answers":[{"comments":[{"owner":{"account_id":19942423,"reputation":43,"user_id":14613880,"display_name":"Code Hard"},"score":0,"creation_date":1606212864,"post_id":64983830,"comment_id":114888134,"body_markdown":"Thanks for the suggestion!! \nThe logic I used was to create a Deque(of size M), and with every Iteration remove the first element(at the same time adding new element at end). And add elemnts to Set, so that it only stores unique numbers","body":"Thanks for the suggestion!!  The logic I used was to create a Deque(of size M), and with every Iteration remove the first element(at the same time adding new element at end). And add elemnts to Set, so that it only stores unique numbers"}],"tags":[],"owner":{"account_id":19955535,"reputation":1594,"user_id":14624235,"display_name":"Vlad L"},"comment_count":1,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1606210836,"creation_date":1606210836,"answer_id":64983830,"question_id":64983328,"body_markdown":"What is the point of this line?\r\n```\r\n                   set.add((Integer)deque.peek());\r\n```\r\n\r\nI don&#39;t see anything in your code that is slow. I just wonder how you can keep track of unique numbers by using a set, given that a set only tells you if there is such a number (but not how many occurrences of the same number there are). And you don&#39;t want to keep scanning the deque to see if the number being removed is the last one.\r\n\r\nI don&#39;t think this is great/fast code, but it seems to pass the test-cases. I keep a count of how many of each integer there is in the window by using a map (and use some of your code).\r\n```\r\nimport java.util.*;\r\n\r\npublic class Main {\r\n\r\n    public static void main(String[] args) {\r\n        Scanner in = new Scanner(System.in);\r\n        Deque&lt;Integer&gt; deque = new ArrayDeque&lt;&gt;();\r\n        HashMap&lt;Integer, Integer&gt; counts = new HashMap&lt;&gt;();\r\n        int n = in.nextInt();\r\n        int m = in.nextInt();\r\n        int max = 0;\r\n        for (int i = 0; i &lt; n; i++) {\r\n            int num = in.nextInt();\r\n            deque.add(num);\r\n            int count = counts.getOrDefault(num, 0);\r\n            counts.put(num, ++count);\r\n            if (i &gt;= m - 1) {\r\n                if (counts.size() &gt; max) max = counts.size();\r\n                Integer removed = deque.removeFirst();\r\n                int removing = counts.get(removed);\r\n                removing--;\r\n                if (removing == 0) {\r\n                    counts.remove(removed);\r\n                } else {\r\n                    counts.put(removed, removing);\r\n                }\r\n            }\r\n        }\r\n        System.out.println(max);\r\n    }\r\n\r\n}\r\n\r\n```","title":"Java Deque (Finding the max number of unique integers from subarrays.)","body":"<p>What is the point of this line?</p>\n<pre><code>                   set.add((Integer)deque.peek());\n</code></pre>\n<p>I don't see anything in your code that is slow. I just wonder how you can keep track of unique numbers by using a set, given that a set only tells you if there is such a number (but not how many occurrences of the same number there are). And you don't want to keep scanning the deque to see if the number being removed is the last one.</p>\n<p>I don't think this is great/fast code, but it seems to pass the test-cases. I keep a count of how many of each integer there is in the window by using a map (and use some of your code).</p>\n<pre><code>import java.util.*;\n\npublic class Main {\n\n    public static void main(String[] args) {\n        Scanner in = new Scanner(System.in);\n        Deque&lt;Integer&gt; deque = new ArrayDeque&lt;&gt;();\n        HashMap&lt;Integer, Integer&gt; counts = new HashMap&lt;&gt;();\n        int n = in.nextInt();\n        int m = in.nextInt();\n        int max = 0;\n        for (int i = 0; i &lt; n; i++) {\n            int num = in.nextInt();\n            deque.add(num);\n            int count = counts.getOrDefault(num, 0);\n            counts.put(num, ++count);\n            if (i &gt;= m - 1) {\n                if (counts.size() &gt; max) max = counts.size();\n                Integer removed = deque.removeFirst();\n                int removing = counts.get(removed);\n                removing--;\n                if (removing == 0) {\n                    counts.remove(removed);\n                } else {\n                    counts.put(removed, removing);\n                }\n            }\n        }\n        System.out.println(max);\n    }\n\n}\n\n</code></pre>\n"},{"tags":[],"owner":{"account_id":4732700,"reputation":2877,"user_id":3827850,"accept_rate":58,"display_name":"Ezio"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1622135960,"creation_date":1622135587,"answer_id":67726958,"question_id":64983328,"body_markdown":"We can optimize the space a little bit by avoiding the hashmap all together, but it seems like Hackerrank does not care about that. Any how I am putting my solution here which can solve this problem by using using a map.\r\n\r\n\r\n```\r\nprivate int countUniqueNumsInSubarrays(int[] nums, int m) {\r\n        Deque&lt;Integer&gt; deque = new LinkedList&lt;&gt;();\r\n\r\n        int maxUniqueCount = 0;\r\n\r\n        for (int i = 0; i &lt; nums.length; i++) {\r\n            // if deque&#39;s left entry is outside the window then pop it out\r\n            while (!deque.isEmpty() &amp;&amp; i - deque.peekFirst() &gt;= m) {\r\n                deque.removeFirst();\r\n            }\r\n\r\n            // this will make sure that the deque only contains unique numbers,\r\n            // this is essentially helps us avoid that extra hash map  \r\n            while (!deque.isEmpty() &amp;&amp; nums[deque.peekLast()] == nums[i]) {\r\n                deque.removeLast();\r\n            }\r\n\r\n            deque.addLast(i);\r\n\r\n            if (i &gt;= m - 1) {\r\n                maxUniqueCount = Math.max(maxUniqueCount, deque.size());\r\n            }\r\n        }\r\n\r\n        return maxUniqueCount;\r\n    }\r\n```","title":"Java Deque (Finding the max number of unique integers from subarrays.)","body":"<p>We can optimize the space a little bit by avoiding the hashmap all together, but it seems like Hackerrank does not care about that. Any how I am putting my solution here which can solve this problem by using using a map.</p>\n<pre><code>private int countUniqueNumsInSubarrays(int[] nums, int m) {\n        Deque&lt;Integer&gt; deque = new LinkedList&lt;&gt;();\n\n        int maxUniqueCount = 0;\n\n        for (int i = 0; i &lt; nums.length; i++) {\n            // if deque's left entry is outside the window then pop it out\n            while (!deque.isEmpty() &amp;&amp; i - deque.peekFirst() &gt;= m) {\n                deque.removeFirst();\n            }\n\n            // this will make sure that the deque only contains unique numbers,\n            // this is essentially helps us avoid that extra hash map  \n            while (!deque.isEmpty() &amp;&amp; nums[deque.peekLast()] == nums[i]) {\n                deque.removeLast();\n            }\n\n            deque.addLast(i);\n\n            if (i &gt;= m - 1) {\n                maxUniqueCount = Math.max(maxUniqueCount, deque.size());\n            }\n        }\n\n        return maxUniqueCount;\n    }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":4040732,"reputation":93,"user_id":3323675,"accept_rate":67,"display_name":"aexposito"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1639785698,"creation_date":1639785698,"answer_id":70399986,"question_id":64983328,"body_markdown":"Just wanted to share how I solved it in case it helps.\r\n\r\n    public static void main(String[] args) {\r\n        Scanner in = new Scanner(System.in);\r\n        Deque deque = new ArrayDeque();\r\n        Set&lt;Integer&gt; integers = new HashSet&lt;&gt;();\r\n        int n = in.nextInt();\r\n        int m = in.nextInt();\r\n        long result = 0;\r\n        for (int i = 0; i &lt; n; i++) {\r\n            int num = in.nextInt();\r\n            deque.add(num);\r\n            integers.add(num);\r\n            if (deque.size() == m) {\r\n                long currentSize = integers.size();\r\n                if (currentSize &gt; result) {\r\n                    result = currentSize;\r\n                }\r\n                Integer removed = (Integer) deque.pollFirst();\r\n                if (!deque.contains(removed)) {\r\n                    integers.remove(removed);\r\n                }\r\n            }\r\n        }\r\n        System.out.println(result);\r\n    }","title":"Java Deque (Finding the max number of unique integers from subarrays.)","body":"<p>Just wanted to share how I solved it in case it helps.</p>\n<pre><code>public static void main(String[] args) {\n    Scanner in = new Scanner(System.in);\n    Deque deque = new ArrayDeque();\n    Set&lt;Integer&gt; integers = new HashSet&lt;&gt;();\n    int n = in.nextInt();\n    int m = in.nextInt();\n    long result = 0;\n    for (int i = 0; i &lt; n; i++) {\n        int num = in.nextInt();\n        deque.add(num);\n        integers.add(num);\n        if (deque.size() == m) {\n            long currentSize = integers.size();\n            if (currentSize &gt; result) {\n                result = currentSize;\n            }\n            Integer removed = (Integer) deque.pollFirst();\n            if (!deque.contains(removed)) {\n                integers.remove(removed);\n            }\n        }\n    }\n    System.out.println(result);\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":26415303,"reputation":1,"user_id":20063805,"display_name":"Rafaelbf84"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1663867497,"creation_date":1663867497,"answer_id":73818585,"question_id":64983328,"body_markdown":"    import java.io.*;\r\nimport java.util.*;\r\nimport java.util.stream.Stream;\r\n\r\npublic class Solution {\r\n\r\n    public static void main(String[] args) {\r\n        var sc = new Scanner(System.in);\r\n        \r\n        var split = sc.nextLine().split(&quot; &quot;);\r\n        int n = Integer.parseInt(split[0]);\r\n        int m = Integer.parseInt(split[1]);\r\n        \r\n        if (!(1 &lt;= n &amp;&amp; n &lt;= 100_000)) {\r\n            System.exit(0);\r\n        }\r\n        if (!(1 &lt;= m &amp;&amp; m &lt;= 100_000)) {\r\n            System.exit(0);\r\n        }\r\n        if (!(m &lt;= n)) {\r\n            System.exit(0);\r\n        }\r\n        \r\n        split = sc.nextLine().split(&quot; &quot;);\r\n        \r\n        sc.close();\r\n        int maxNumUniqueInt = 0;\r\n        HashSet&lt;Integer&gt; dist = new HashSet&lt;&gt;();\r\n        Deque&lt;Integer&gt; deque = new ArrayDeque&lt;&gt;();\r\n        int[] arr = Stream.of(split).mapToInt(Integer::parseInt).toArray();\r\n        \r\n        for (int i = 0; i &lt; m; i++) {\r\n            deque.addLast(arr[i]);\r\n            dist.add(arr[i]);\r\n        }\r\n        int num = dist.size();\r\n        if (maxNumUniqueInt &lt; num) {\r\n            maxNumUniqueInt = num;\r\n        }\r\n        for (int i = m; i &lt; n; i++) {\r\n            deque.addLast(arr[i]);\r\n            dist.add(arr[i]);\r\n            int remove = deque.removeFirst();\r\n            if (!deque.contains(remove)) {\r\n                dist.remove(remove);\r\n            }\r\n            num = dist.size();\r\n            if (maxNumUniqueInt &lt; num) {\r\n                maxNumUniqueInt = num;\r\n            }\r\n           // System.out.println(i + &quot;  |  &quot; + deque + &quot;  |  &quot; + dist + &quot;  |  &quot; + maxNumUniqueInt);\r\n        }\r\n        \r\n        System.out.println(maxNumUniqueInt);\r\n    }\r\n \r\n}","title":"Java Deque (Finding the max number of unique integers from subarrays.)","body":"<pre><code>import java.io.*;\n</code></pre>\n<p>import java.util.*;\nimport java.util.stream.Stream;</p>\n<p>public class Solution {</p>\n<pre><code>public static void main(String[] args) {\n    var sc = new Scanner(System.in);\n    \n    var split = sc.nextLine().split(&quot; &quot;);\n    int n = Integer.parseInt(split[0]);\n    int m = Integer.parseInt(split[1]);\n    \n    if (!(1 &lt;= n &amp;&amp; n &lt;= 100_000)) {\n        System.exit(0);\n    }\n    if (!(1 &lt;= m &amp;&amp; m &lt;= 100_000)) {\n        System.exit(0);\n    }\n    if (!(m &lt;= n)) {\n        System.exit(0);\n    }\n    \n    split = sc.nextLine().split(&quot; &quot;);\n    \n    sc.close();\n    int maxNumUniqueInt = 0;\n    HashSet&lt;Integer&gt; dist = new HashSet&lt;&gt;();\n    Deque&lt;Integer&gt; deque = new ArrayDeque&lt;&gt;();\n    int[] arr = Stream.of(split).mapToInt(Integer::parseInt).toArray();\n    \n    for (int i = 0; i &lt; m; i++) {\n        deque.addLast(arr[i]);\n        dist.add(arr[i]);\n    }\n    int num = dist.size();\n    if (maxNumUniqueInt &lt; num) {\n        maxNumUniqueInt = num;\n    }\n    for (int i = m; i &lt; n; i++) {\n        deque.addLast(arr[i]);\n        dist.add(arr[i]);\n        int remove = deque.removeFirst();\n        if (!deque.contains(remove)) {\n            dist.remove(remove);\n        }\n        num = dist.size();\n        if (maxNumUniqueInt &lt; num) {\n            maxNumUniqueInt = num;\n        }\n       // System.out.println(i + &quot;  |  &quot; + deque + &quot;  |  &quot; + dist + &quot;  |  &quot; + maxNumUniqueInt);\n    }\n    \n    System.out.println(maxNumUniqueInt);\n}\n</code></pre>\n<p>}</p>\n"},{"tags":[],"owner":{"account_id":15382846,"reputation":1,"user_id":11097785,"display_name":"Suresh Nayak"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1675471951,"creation_date":1675471174,"answer_id":75342262,"question_id":64983328,"body_markdown":"    import java.util.*;\r\n    public class test {\r\n        public static void main(String[] args) {\r\n            Scanner in = new Scanner(System.in);\r\n            Deque&lt;Integer&gt; deque = new ArrayDeque&lt;&gt;();\r\n            int n = in.nextInt();\r\n            int m = in.nextInt();\r\n            int maxUnique = 0;\r\n            Map&lt;Integer, Boolean&gt; uniqSet = new HashMap&lt;&gt;();\r\n            for (int i = 0; i &lt; n; i++) {\r\n              int num = in.nextInt();\r\n               deque.addLast(num);\r\n               uniqSet.put(num, true);\r\n               if(deque.size() == m){\r\n                //  int uniqueSize = new HashSet&lt;&gt;(deque).size();\r\n                int uniqueSize = uniqSet.size();\r\n                 maxUnique = Math.max(maxUnique, uniqueSize);\r\n      \r\n                 int x = deque.removeFirst();\r\n                 if(!deque.contains(x)){\r\n                   uniqSet.remove(x);\r\n                 }\r\n               }\r\n            }\r\n            in.close();\r\n            System.out.println(maxUnique);\r\n        }\r\n    }\r\n","title":"Java Deque (Finding the max number of unique integers from subarrays.)","body":"<pre><code>import java.util.*;\npublic class test {\n    public static void main(String[] args) {\n        Scanner in = new Scanner(System.in);\n        Deque&lt;Integer&gt; deque = new ArrayDeque&lt;&gt;();\n        int n = in.nextInt();\n        int m = in.nextInt();\n        int maxUnique = 0;\n        Map&lt;Integer, Boolean&gt; uniqSet = new HashMap&lt;&gt;();\n        for (int i = 0; i &lt; n; i++) {\n          int num = in.nextInt();\n           deque.addLast(num);\n           uniqSet.put(num, true);\n           if(deque.size() == m){\n            //  int uniqueSize = new HashSet&lt;&gt;(deque).size();\n            int uniqueSize = uniqSet.size();\n             maxUnique = Math.max(maxUnique, uniqueSize);\n  \n             int x = deque.removeFirst();\n             if(!deque.contains(x)){\n               uniqSet.remove(x);\n             }\n           }\n        }\n        in.close();\n        System.out.println(maxUnique);\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":29488796,"reputation":1,"user_id":22598142,"display_name":"Vijay Kumar"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695194778,"creation_date":1695194778,"answer_id":77140194,"question_id":64983328,"body_markdown":"Instead of trying to remove elements from hashSet, we only remove elements from deque that are no longer in the window. If an element is not present in the deque, it means it is no longer within the window, so we remove it from hashSet.\r\n\r\nWe check if hashSet.size() is greater than max to update the maximum count of unique elements.\r\n\r\n    public class test {\r\n        public static void main(String[] args) {\r\n            Scanner in = new Scanner(System.in);\r\n            Deque deque = new ArrayDeque&lt;Integer&gt;();\r\n            HashSet hashSet = new HashSet&lt;Integer&gt;();\r\n            int n = in.nextInt();\r\n            int m = in.nextInt();\r\n            int max = 1; \r\n            for (int i = 0; i &lt; n; i++) {\r\n                int num = in.nextInt();\r\n                deque.add(num);\r\n                hashSet.add(num);\r\n                if (i &gt;= m-1) {\r\n                    if (hashSet.size() &gt; max) max = hashSet.size();\r\n                    int removeElement = (Integer)deque.remove();\r\n                    if (!deque.contains(removeElement)) {\r\n                        hashSet.remove(removeElement);\r\n                    }\r\n                }\r\n            }\r\n            System.out.println(max);\r\n        }\r\n    }","title":"Java Deque (Finding the max number of unique integers from subarrays.)","body":"<p>Instead of trying to remove elements from hashSet, we only remove elements from deque that are no longer in the window. If an element is not present in the deque, it means it is no longer within the window, so we remove it from hashSet.</p>\n<p>We check if hashSet.size() is greater than max to update the maximum count of unique elements.</p>\n<pre><code>public class test {\n    public static void main(String[] args) {\n        Scanner in = new Scanner(System.in);\n        Deque deque = new ArrayDeque&lt;Integer&gt;();\n        HashSet hashSet = new HashSet&lt;Integer&gt;();\n        int n = in.nextInt();\n        int m = in.nextInt();\n        int max = 1; \n        for (int i = 0; i &lt; n; i++) {\n            int num = in.nextInt();\n            deque.add(num);\n            hashSet.add(num);\n            if (i &gt;= m-1) {\n                if (hashSet.size() &gt; max) max = hashSet.size();\n                int removeElement = (Integer)deque.remove();\n                if (!deque.contains(removeElement)) {\n                    hashSet.remove(removeElement);\n                }\n            }\n        }\n        System.out.println(max);\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":19942423,"reputation":43,"user_id":14613880,"display_name":"Code Hard"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2143,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"answer_count":6,"score":3,"last_activity_date":1695194778,"creation_date":1606208911,"question_id":64983328,"body_markdown":"I was trying to solve a HackerRank problem on Java Deque. My code passed all the cases apart from the ones which have 100,000 inputs.\r\n\r\nProblem: In this problem, you are given N integers. You need to find the maximum number of unique integers among all the possible contiguous subarrays of size M.\r\n---&gt;So we wre given N integers, and need to find the number of &quot;unique integers&quot; in each contagious subarray(of size M). And then print the maximum number of those &quot;unique Integers&quot;.\r\n\r\n```\r\nlink: https://www.hackerrank.com/challenges/java-dequeue/problem\r\n```\r\n\r\nMy Code:\r\n```\r\npublic static void main(String[] args) {\r\n            Scanner in = new Scanner(System.in);\r\n            Deque deque = new ArrayDeque&lt;&gt;();\r\n            HashSet&lt;Integer&gt; set = new HashSet&lt;&gt;();\r\n            int n = in.nextInt();\r\n            int m = in.nextInt();\r\n            int max=0;\r\n            for (int i = 0; i &lt; n; i++) {\r\n                int num = in.nextInt();\r\n                deque.add(num);\r\n                set.add(num);\r\n                if(i&gt;=m-1){\r\n                    if(set.size()&gt;max)max=set.size();\r\n                    Integer removed=(Integer)deque.removeFirst();\r\n                    set.remove(removed);\r\n                   set.add((Integer)deque.peek());\r\n                }\r\n                \r\n            }\r\n            System.out.println(max);\r\n        }\r\n\r\n```\r\nPlease tell me where my code went wrong.","title":"Java Deque (Finding the max number of unique integers from subarrays.)","body":"<p>I was trying to solve a HackerRank problem on Java Deque. My code passed all the cases apart from the ones which have 100,000 inputs.</p>\n<p>Problem: In this problem, you are given N integers. You need to find the maximum number of unique integers among all the possible contiguous subarrays of size M.\n---&gt;So we wre given N integers, and need to find the number of &quot;unique integers&quot; in each contagious subarray(of size M). And then print the maximum number of those &quot;unique Integers&quot;.</p>\n<pre><code>link: https://www.hackerrank.com/challenges/java-dequeue/problem\n</code></pre>\n<p>My Code:</p>\n<pre><code>public static void main(String[] args) {\n            Scanner in = new Scanner(System.in);\n            Deque deque = new ArrayDeque&lt;&gt;();\n            HashSet&lt;Integer&gt; set = new HashSet&lt;&gt;();\n            int n = in.nextInt();\n            int m = in.nextInt();\n            int max=0;\n            for (int i = 0; i &lt; n; i++) {\n                int num = in.nextInt();\n                deque.add(num);\n                set.add(num);\n                if(i&gt;=m-1){\n                    if(set.size()&gt;max)max=set.size();\n                    Integer removed=(Integer)deque.removeFirst();\n                    set.remove(removed);\n                   set.add((Integer)deque.peek());\n                }\n                \n            }\n            System.out.println(max);\n        }\n\n</code></pre>\n<p>Please tell me where my code went wrong.</p>\n"},{"tags":["java","reflection","final"],"comments":[{"owner":{"account_id":214894,"reputation":9047,"user_id":469153,"accept_rate":71,"display_name":"iirekm"},"score":0,"creation_date":1436273365,"post_id":4516381,"comment_id":50532501,"body_markdown":"See this: http://stackoverflow.com/questions/3301635/change-private-static-final-field-using-java-reflection/31268945#31268945","body":"See this: <a href=\"http://stackoverflow.com/questions/3301635/change-private-static-final-field-using-java-reflection/31268945#31268945\" title=\"change private static final field using java reflection\">stackoverflow.com/questions/3301635/&hellip;</a>"},{"owner":{"account_id":214894,"reputation":9047,"user_id":469153,"accept_rate":71,"display_name":"iirekm"},"score":0,"creation_date":1436273428,"post_id":4516381,"comment_id":50532561,"body_markdown":"http://stackoverflow.com/questions/3301635/change-private-static-final-field-using-java-reflection/31268945#31268945","body":"<a href=\"http://stackoverflow.com/questions/3301635/change-private-static-final-field-using-java-reflection/31268945#31268945\" title=\"change private static final field using java reflection\">stackoverflow.com/questions/3301635/&hellip;</a>"}],"answers":[{"comments":[{"owner":{"account_id":47283,"reputation":703927,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"score":1,"creation_date":1293088696,"post_id":4516608,"comment_id":4945731,"body_markdown":"+1 - this is the real answer.  The OP&#39;s program is causing the JIT compiler&#39;s assumption that `s` doesn&#39;t change to be invalid.  This is not a compiler bug, since the JLS explicitly warns that &quot;bad things&quot; like this can happen if you modify `final` variables after they have been set.","body":"+1 - this is the real answer.  The OP&#39;s program is causing the JIT compiler&#39;s assumption that <code>s</code> doesn&#39;t change to be invalid.  This is not a compiler bug, since the JLS explicitly warns that &quot;bad things&quot; like this can happen if you modify <code>final</code> variables after they have been set."},{"owner":{"account_id":23611,"reputation":36322,"user_id":59279,"accept_rate":85,"display_name":"Joonas Pulakka"},"score":5,"creation_date":1293095440,"post_id":4516608,"comment_id":4946397,"body_markdown":"@Stephen C: Actually the behavior has nothing to do with *JIT* compiling. It&#39;s already the bytecode compiler that replaces the `s` in `return &quot;s = &quot; + s;` with the compile-time constant. This can be demonstrated by making two classes, `A` and `B` so that `A` refers to a constant defined in `B`. Now, changing the constant in `B` and recompiling only `B` will keep the old constant in `A`! Sneaky, but true.","body":"@Stephen C: Actually the behavior has nothing to do with <i>JIT</i> compiling. It&#39;s already the bytecode compiler that replaces the <code>s</code> in <code>return &quot;s = &quot; + s;</code> with the compile-time constant. This can be demonstrated by making two classes, <code>A</code> and <code>B</code> so that <code>A</code> refers to a constant defined in <code>B</code>. Now, changing the constant in <code>B</code> and recompiling only <code>B</code> will keep the old constant in <code>A</code>! Sneaky, but true."},{"owner":{"account_id":47283,"reputation":703927,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"score":0,"creation_date":1293109968,"post_id":4516608,"comment_id":4948674,"body_markdown":"@Joonas - ok ... but it would also be legitimate for the JIT compiler to do this kind of optimization.","body":"@Joonas - ok ... but it would also be legitimate for the JIT compiler to do this kind of optimization."},{"owner":{"account_id":23611,"reputation":36322,"user_id":59279,"accept_rate":85,"display_name":"Joonas Pulakka"},"score":1,"creation_date":1293110975,"post_id":4516608,"comment_id":4948834,"body_markdown":"@Stephen C: Indeed. IMO it would be way *better* if the JIT compiler would do that instead of the bytecode compiler. With the current behavior, you can break someone else&#39;s class just by modifying the *value* of a, say, flag constant in your class.","body":"@Stephen C: Indeed. IMO it would be way <i>better</i> if the JIT compiler would do that instead of the bytecode compiler. With the current behavior, you can break someone else&#39;s class just by modifying the <i>value</i> of a, say, flag constant in your class."},{"owner":{"account_id":381969,"reputation":616,"user_id":736922,"accept_rate":90,"display_name":"Lutosław"},"score":0,"creation_date":1488276959,"post_id":4516608,"comment_id":72149498,"body_markdown":"Should I call `f.setAccessible(true);` after that to restore field modifiers?","body":"Should I call <code>f.setAccessible(true);</code> after that to restore field modifiers?"},{"owner":{"account_id":115173,"reputation":3150,"user_id":302517,"display_name":"JiP"},"score":2,"creation_date":1490014559,"post_id":4516608,"comment_id":72907908,"body_markdown":"I think you don&#39;t have to restore the field accessibility as it is in fact a copy of some Java internal `Field` instance. Such a copy is just for you to use. So if you don&#39;t need to read the original `accessible` flag state later on in your code, you don&#39;t have to keep and then restore its state.","body":"I think you don&#39;t have to restore the field accessibility as it is in fact a copy of some Java internal <code>Field</code> instance. Such a copy is just for you to use. So if you don&#39;t need to read the original <code>accessible</code> flag state later on in your code, you don&#39;t have to keep and then restore its state."},{"owner":{"account_id":5215471,"reputation":4961,"user_id":4170582,"accept_rate":91,"display_name":"Tarik"},"score":0,"creation_date":1678218238,"post_id":4516608,"comment_id":133489803,"body_markdown":"not working with java 17","body":"not working with java 17"},{"owner":{"account_id":115173,"reputation":3150,"user_id":302517,"display_name":"JiP"},"score":0,"creation_date":1695194773,"post_id":4516608,"comment_id":135989867,"body_markdown":"@Tarik: Can you be more specific? If that was due to the compile time error &quot;non-static variable this cannot be referenced from a static context&quot;, I fixed the code to compile even with JDK17.","body":"@Tarik: Can you be more specific? If that was due to the compile time error &quot;non-static variable this cannot be referenced from a static context&quot;, I fixed the code to compile even with JDK17."}],"tags":[],"owner":{"account_id":115173,"reputation":3150,"user_id":302517,"display_name":"JiP"},"comment_count":8,"down_vote_count":1,"up_vote_count":73,"is_accepted":true,"score":72,"last_activity_date":1695194563,"creation_date":1293088440,"answer_id":4516608,"question_id":4516381,"body_markdown":"[This answer][1] is more than exhaustive on the topic.\r\n\r\n\r\nJLS 17.5.3 Subsequent Modification of Final Fields\r\n\r\n&gt; Even then, there are a number of complications. If a final field is\r\n&gt; initialized to a compile-time constant in the field declaration,\r\n&gt; changes to the final field may not be observed, since uses of that\r\n&gt; final field are replaced at compile time with the compile-time\r\n&gt; constant.\r\n\r\nBut, if you read the paragraph above very carefully, you may find a way around here (set the `private final` field in the constructor instead of in the field definition):\r\n\r\n\r\n    import java.lang.reflect.Field;\r\n    \r\n    \r\n    public class Test {\r\n    \r\n      public static void main(String[] args) throws Exception {\r\n        WithPrivateFinalField pf = new WithPrivateFinalField();\r\n        System.out.println(pf);\r\n        Field f = pf.getClass().getDeclaredField(&quot;s&quot;);\r\n        f.setAccessible(true);\r\n        System.out.println(&quot;f.get(pf): &quot; + f.get(pf));\r\n        f.set(pf, &quot;No, you’re not!&quot;);\r\n        System.out.println(pf);\r\n        System.out.println(&quot;f.get(pf): &quot; + f.get(pf));\r\n      }\r\n    \r\n      private static class WithPrivateFinalField {\r\n        private final String s;\r\n    \r\n        public WithPrivateFinalField() {\r\n          this.s = &quot;I’m totally safe&quot;;\r\n        }\r\n        public String toString() {\r\n          return &quot;s = &quot; + s;\r\n        }\r\n      }\r\n    \r\n    }\r\n\r\nThe output is then as follows:\r\n\r\n    s = I’m totally safe\r\n    f.get(pf): I’m totally safe\r\n    s = No, you’re not!\r\n    f.get(pf): No, you’re not!\r\n\r\nHope this helps a bit.\r\n\r\n[1]: https://stackoverflow.com/questions/3301635/change-private-static-final-field-using-java-reflection\r\n","title":"Changing private final fields via reflection","body":"<p><a href=\"https://stackoverflow.com/questions/3301635/change-private-static-final-field-using-java-reflection\">This answer</a> is more than exhaustive on the topic.</p>\n<p>JLS 17.5.3 Subsequent Modification of Final Fields</p>\n<blockquote>\n<p>Even then, there are a number of complications. If a final field is\ninitialized to a compile-time constant in the field declaration,\nchanges to the final field may not be observed, since uses of that\nfinal field are replaced at compile time with the compile-time\nconstant.</p>\n</blockquote>\n<p>But, if you read the paragraph above very carefully, you may find a way around here (set the <code>private final</code> field in the constructor instead of in the field definition):</p>\n<pre><code>import java.lang.reflect.Field;\n\n\npublic class Test {\n\n  public static void main(String[] args) throws Exception {\n    WithPrivateFinalField pf = new WithPrivateFinalField();\n    System.out.println(pf);\n    Field f = pf.getClass().getDeclaredField(&quot;s&quot;);\n    f.setAccessible(true);\n    System.out.println(&quot;f.get(pf): &quot; + f.get(pf));\n    f.set(pf, &quot;No, you’re not!&quot;);\n    System.out.println(pf);\n    System.out.println(&quot;f.get(pf): &quot; + f.get(pf));\n  }\n\n  private static class WithPrivateFinalField {\n    private final String s;\n\n    public WithPrivateFinalField() {\n      this.s = &quot;I’m totally safe&quot;;\n    }\n    public String toString() {\n      return &quot;s = &quot; + s;\n    }\n  }\n\n}\n</code></pre>\n<p>The output is then as follows:</p>\n<pre><code>s = I’m totally safe\nf.get(pf): I’m totally safe\ns = No, you’re not!\nf.get(pf): No, you’re not!\n</code></pre>\n<p>Hope this helps a bit.</p>\n"},{"tags":[],"owner":{"account_id":119097,"reputation":85328,"user_id":310574,"accept_rate":80,"display_name":"Gabe"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1293088536,"creation_date":1293088536,"answer_id":4516617,"question_id":4516381,"body_markdown":"Being `final`, the compiler expected the value not to change, so it probably hardcoded the string directly into your `toString` method.","title":"Changing private final fields via reflection","body":"<p>Being <code>final</code>, the compiler expected the value not to change, so it probably hardcoded the string directly into your <code>toString</code> method.</p>\n"},{"comments":[{"owner":{"account_id":115173,"reputation":3150,"user_id":302517,"display_name":"JiP"},"score":1,"creation_date":1293116743,"post_id":4516654,"comment_id":4949865,"body_markdown":"I really like this clear explanation and `intern()` approach, did not know about that before... Thanks.","body":"I really like this clear explanation and <code>intern()</code> approach, did not know about that before... Thanks."},{"owner":{"account_id":1284143,"reputation":43090,"user_id":1237575,"accept_rate":96,"display_name":"Rafael Winterhalter"},"score":3,"creation_date":1388351477,"post_id":4516654,"comment_id":31239267,"body_markdown":"Actually, rather use `toString` since it avoids a lookup in the string pool.","body":"Actually, rather use <code>toString</code> since it avoids a lookup in the string pool."}],"tags":[],"owner":{"account_id":23611,"reputation":36322,"user_id":59279,"accept_rate":85,"display_name":"Joonas Pulakka"},"comment_count":2,"down_vote_count":0,"up_vote_count":18,"is_accepted":false,"score":18,"last_activity_date":1293088935,"creation_date":1293088935,"answer_id":4516654,"question_id":4516381,"body_markdown":"This\r\n\r\n    class WithPrivateFinalField {\r\n        private final String s = &quot;I’m totally safe&quot;;\r\n        public String toString() {\r\n            return &quot;s = &quot; + s;\r\n        }  \r\n    } \r\n\r\nactually compiles like this:\r\n\r\n    class WithPrivateFinalField {\r\n        private final String s = &quot;I’m totally safe&quot;;\r\n        public String toString() {\r\n            return &quot;s = I’m totally safe&quot;;\r\n        }  \r\n    }\r\n\r\nThat is, **compile-time constants get inlined.** See [this](https://stackoverflow.com/questions/377819/are-all-compile-time-constants-inlined) question. The easiest way to avoid inlining is to declare the `String` like this:\r\n\r\n    private final String s = &quot;I’m totally safe&quot;.intern();\r\n\r\nFor other types, a trivial method call does the trick:\r\n\r\n    private final int integerConstant = identity(42);\r\n    private static int identity(int number) {\r\n        return number;\r\n    }","title":"Changing private final fields via reflection","body":"<p>This</p>\n\n<pre><code>class WithPrivateFinalField {\n    private final String s = \"I’m totally safe\";\n    public String toString() {\n        return \"s = \" + s;\n    }  \n} \n</code></pre>\n\n<p>actually compiles like this:</p>\n\n<pre><code>class WithPrivateFinalField {\n    private final String s = \"I’m totally safe\";\n    public String toString() {\n        return \"s = I’m totally safe\";\n    }  \n}\n</code></pre>\n\n<p>That is, <strong>compile-time constants get inlined.</strong> See <a href=\"https://stackoverflow.com/questions/377819/are-all-compile-time-constants-inlined\">this</a> question. The easiest way to avoid inlining is to declare the <code>String</code> like this:</p>\n\n<pre><code>private final String s = \"I’m totally safe\".intern();\n</code></pre>\n\n<p>For other types, a trivial method call does the trick:</p>\n\n<pre><code>private final int integerConstant = identity(42);\nprivate static int identity(int number) {\n    return number;\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":6664,"reputation":85927,"user_id":11296,"display_name":"Bert F"},"comment_count":0,"down_vote_count":0,"up_vote_count":7,"is_accepted":false,"score":7,"last_activity_date":1293089726,"creation_date":1293089726,"answer_id":4516724,"question_id":4516381,"body_markdown":"Here&#39;s a decompile of `WithPrivateFinalField` class file (I put it in a separate class for simplicity):\r\n\r\n      WithPrivateFinalField();\r\n         0  aload_0 [this]\r\n         1  invokespecial java.lang.Object() [13]\r\n         4  aload_0 [this]\r\n         5  ldc &lt;String &quot;I’m totally safe&quot;&gt; [8]\r\n         7  putfield WithPrivateFinalField.s : java.lang.String [15]\r\n        10  return\r\n          Line numbers:\r\n            [pc: 0, line: 2]\r\n            [pc: 4, line: 3]\r\n            [pc: 10, line: 2]\r\n          Local variable table:\r\n            [pc: 0, pc: 11] local: this index: 0 type: WithPrivateFinalField\r\n      \r\n      // Method descriptor #22 ()Ljava/lang/String;\r\n      // Stack: 1, Locals: 1\r\n      public java.lang.String toString();\r\n        0  ldc &lt;String &quot;s = I’m totally safe&quot;&gt; [23]\r\n        2  areturn\r\n          Line numbers:\r\n            [pc: 0, line: 6]\r\n          Local variable table:\r\n            [pc: 0, pc: 3] local: this index: 0 type: WithPrivateFinalField\r\n\r\nNote in the `toString()` method, the constant used at address 0 [`0  ldc &lt;String &quot;s = I’m totally safe&quot;&gt; [23]`] shows the compiler already concatenated the string literal `&quot;s = &quot;` and the private final field `&quot; I’m totally safe&quot;` together in advance and stored it.  The toString() method will always return `&quot;s = I’m totally safe&quot;` regardless of how the instance variable `s` changes.","title":"Changing private final fields via reflection","body":"<p>Here's a decompile of <code>WithPrivateFinalField</code> class file (I put it in a separate class for simplicity):</p>\n\n<pre><code>  WithPrivateFinalField();\n     0  aload_0 [this]\n     1  invokespecial java.lang.Object() [13]\n     4  aload_0 [this]\n     5  ldc &lt;String \"I’m totally safe\"&gt; [8]\n     7  putfield WithPrivateFinalField.s : java.lang.String [15]\n    10  return\n      Line numbers:\n        [pc: 0, line: 2]\n        [pc: 4, line: 3]\n        [pc: 10, line: 2]\n      Local variable table:\n        [pc: 0, pc: 11] local: this index: 0 type: WithPrivateFinalField\n\n  // Method descriptor #22 ()Ljava/lang/String;\n  // Stack: 1, Locals: 1\n  public java.lang.String toString();\n    0  ldc &lt;String \"s = I’m totally safe\"&gt; [23]\n    2  areturn\n      Line numbers:\n        [pc: 0, line: 6]\n      Local variable table:\n        [pc: 0, pc: 3] local: this index: 0 type: WithPrivateFinalField\n</code></pre>\n\n<p>Note in the <code>toString()</code> method, the constant used at address 0 [<code>0  ldc &lt;String \"s = I’m totally safe\"&gt; [23]</code>] shows the compiler already concatenated the string literal <code>\"s = \"</code> and the private final field <code>\" I’m totally safe\"</code> together in advance and stored it.  The toString() method will always return <code>\"s = I’m totally safe\"</code> regardless of how the instance variable <code>s</code> changes.</p>\n"}],"owner":{"account_id":241158,"reputation":9333,"user_id":511804,"accept_rate":56,"display_name":"Alexandr"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":58570,"favorite_count":0,"down_vote_count":0,"up_vote_count":55,"accepted_answer_id":4516608,"answer_count":4,"score":55,"last_activity_date":1695194563,"creation_date":1293085534,"question_id":4516381,"body_markdown":"class WithPrivateFinalField {\r\n        private final String s = &quot;I’m totally safe&quot;;\r\n        public String toString() {\r\n            return &quot;s = &quot; + s;\r\n        }\r\n    }\r\n    WithPrivateFinalField pf = new WithPrivateFinalField();\r\n    System.out.println(pf);\r\n    Field f = pf.getClass().getDeclaredField(&quot;s&quot;);\r\n    f.setAccessible(true);\r\n    System.out.println(&quot;f.get(pf): &quot; + f.get(pf));\r\n    f.set(pf, &quot;No, you’re not!&quot;);\r\n    System.out.println(pf);\r\n    System.out.println(f.get(pf));\r\n\r\nOutput:\r\n\r\n    s = I’m totally safe\r\n    f.get(pf): I’m totally safe\r\n    s = I’m totally safe\r\n    No, you’re not!\r\n\r\nWhy does it work by this way, can you please explain? The first print tells us that the private &quot;s&quot; field has not been changed, as I expect. But if we get the field via reflection, the second print shows, it is updated.","title":"Changing private final fields via reflection","body":"<pre><code>class WithPrivateFinalField {\n    private final String s = \"I’m totally safe\";\n    public String toString() {\n        return \"s = \" + s;\n    }\n}\nWithPrivateFinalField pf = new WithPrivateFinalField();\nSystem.out.println(pf);\nField f = pf.getClass().getDeclaredField(\"s\");\nf.setAccessible(true);\nSystem.out.println(\"f.get(pf): \" + f.get(pf));\nf.set(pf, \"No, you’re not!\");\nSystem.out.println(pf);\nSystem.out.println(f.get(pf));\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>s = I’m totally safe\nf.get(pf): I’m totally safe\ns = I’m totally safe\nNo, you’re not!\n</code></pre>\n\n<p>Why does it work by this way, can you please explain? The first print tells us that the private \"s\" field has not been changed, as I expect. But if we get the field via reflection, the second print shows, it is updated.</p>\n"},{"tags":["java","assembly","linker","virtual-machine","loader"],"owner":{"account_id":19030219,"reputation":957,"user_id":13892487,"display_name":"Midhun Raj"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":18,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1695194256,"creation_date":1695194256,"question_id":77140117,"body_markdown":"\r\n\r\nI was able to successfully make an object file of a sic assembly program\r\n\r\n\r\nThe command i did for that was\r\n\r\n     java -cp sictools-java.jar sic.Asm a.asm\r\n\r\n\r\n**But i am having trouble in linking it\r\n**To run linker****\r\n\r\n    java -cp out/make/sictools.jar sic.Link -o out.obj in1.obj in2.obj ...\r\n\r\nI was trying with this set of codes\r\n\r\nI cant figure out what is sic.Link\r\n\r\n\r\nhttps://github.com/jurem/SicTools\r\n\r\n\r\n\r\nTo be frank i am very very new to assembly set of coding \r\n\r\n\r\nI am fiddle with sets of tools to get familar and to have some hands on experience with low level programming\r\n\r\n[![enter image description here][1]][1]\r\n\r\nCan you please guide me on how to set these up and make it running and find what all vallues are there in  each registers of this virtual machine\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/rsHAm.png\r\n\r\nI would be very thankful for a guidence on how to make this system work and figure out what all values are left in the registers after the porgram execition in the graphics mode .. which according to documentaion can be obtained from\r\n\r\n    java -cp out/make/sictools.jar sic.Link -g","title":"Trouble in linking code to an object file of an assembly language","body":"<p>I was able to successfully make an object file of a sic assembly program</p>\n<p>The command i did for that was</p>\n<pre><code> java -cp sictools-java.jar sic.Asm a.asm\n</code></pre>\n<p><strong>But i am having trouble in linking it\n<strong>To run linker</strong></strong></p>\n<pre><code>java -cp out/make/sictools.jar sic.Link -o out.obj in1.obj in2.obj ...\n</code></pre>\n<p>I was trying with this set of codes</p>\n<p>I cant figure out what is sic.Link</p>\n<p><a href=\"https://github.com/jurem/SicTools\" rel=\"nofollow noreferrer\">https://github.com/jurem/SicTools</a></p>\n<p>To be frank i am very very new to assembly set of coding</p>\n<p>I am fiddle with sets of tools to get familar and to have some hands on experience with low level programming</p>\n<p><a href=\"https://i.stack.imgur.com/rsHAm.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/rsHAm.png\" alt=\"enter image description here\" /></a></p>\n<p>Can you please guide me on how to set these up and make it running and find what all vallues are there in  each registers of this virtual machine</p>\n<p>I would be very thankful for a guidence on how to make this system work and figure out what all values are left in the registers after the porgram execition in the graphics mode .. which according to documentaion can be obtained from</p>\n<pre><code>java -cp out/make/sictools.jar sic.Link -g\n</code></pre>\n"},{"tags":["java","eclipse","maven","plugins","tycho"],"comments":[{"owner":{"account_id":4846374,"reputation":2570,"user_id":3909896,"accept_rate":100,"display_name":"Cribber"},"score":0,"creation_date":1439882601,"post_id":32066048,"comment_id":52029473,"body_markdown":"I should probably mention, that I don&#39;t call maven install on this part of the project, but on the &quot;super&quot; project which then in turn tries to clean/install this one.","body":"I should probably mention, that I don&#39;t call maven install on this part of the project, but on the &quot;super&quot; project which then in turn tries to clean/install this one."},{"owner":{"account_id":1483039,"reputation":8759,"user_id":1391924,"accept_rate":41,"display_name":"Chandrayya G K"},"score":0,"creation_date":1439887549,"post_id":32066048,"comment_id":52032426,"body_markdown":"I think its due to the version mismatch of plugin/feature inside MANIFEST.MF and in updatesite/repository","body":"I think its due to the version mismatch of plugin/feature inside MANIFEST.MF and in updatesite/repository"},{"owner":{"account_id":4846374,"reputation":2570,"user_id":3909896,"accept_rate":100,"display_name":"Cribber"},"score":0,"creation_date":1439898104,"post_id":32066048,"comment_id":52039427,"body_markdown":"could you explain it to me further? The version of my own plugin or the version of tycho/used tools?  Also the myproject.repository has no MANIFEST.MF,  it basically is just used so two other parts (feature and featurepatch) are put together into one","body":"could you explain it to me further? The version of my own plugin or the version of tycho/used tools?  Also the myproject.repository has no MANIFEST.MF,  it basically is just used so two other parts (feature and featurepatch) are put together into one"},{"owner":{"account_id":1483039,"reputation":8759,"user_id":1391924,"accept_rate":41,"display_name":"Chandrayya G K"},"score":0,"creation_date":1439904317,"post_id":32066048,"comment_id":52043858,"body_markdown":"attach the whole maven build log. I think its not full log.","body":"attach the whole maven build log. I think its not full log."},{"owner":{"account_id":4846374,"reputation":2570,"user_id":3909896,"accept_rate":100,"display_name":"Cribber"},"score":0,"creation_date":1440054354,"post_id":32066048,"comment_id":52116558,"body_markdown":"the entire log in the console of eclipse after a maven install is about 6 DIn4 pages... or what are you looking for?","body":"the entire log in the console of eclipse after a maven install is about 6 DIn4 pages... or what are you looking for?"}],"answers":[{"comments":[{"owner":{"account_id":4846374,"reputation":2570,"user_id":3909896,"accept_rate":100,"display_name":"Cribber"},"score":0,"creation_date":1440052214,"post_id":32081749,"comment_id":52115508,"body_markdown":"featurepatch has no manifest.mf but a feature.xml which indeed has an import:  &lt;import feature=&quot;de.uka.ipd.sdq.simucom.feature&quot; version=&quot;3.4.1.201309282203&quot; patch=&quot;true&quot;/&gt; but the version isnt set to 0.0.0 but to the version of Palladio (where the simucom.feature comes from) I use","body":"featurepatch has no manifest.mf but a feature.xml which indeed has an import:  &lt;import feature=&quot;de.uka.ipd.sdq.simucom.feature&quot; version=&quot;3.4.1.201309282203&quot; patch=&quot;true&quot;/&gt; but the version isnt set to 0.0.0 but to the version of Palladio (where the simucom.feature comes from) I use"},{"owner":{"account_id":6235501,"reputation":3140,"user_id":4850949,"accept_rate":57,"display_name":"not2savvy"},"score":0,"creation_date":1440067095,"post_id":32081749,"comment_id":52124597,"body_markdown":"Yes, features have feature.xml - my fault. Please post the feature.xml of org.myproject.featurepatch, also the one in de.uka.ipd.sdq.simucom.","body":"Yes, features have feature.xml - my fault. Please post the feature.xml of org.myproject.featurepatch, also the one in de.uka.ipd.sdq.simucom."},{"owner":{"account_id":4846374,"reputation":2570,"user_id":3909896,"accept_rate":100,"display_name":"Cribber"},"score":0,"creation_date":1440488457,"post_id":32081749,"comment_id":52281014,"body_markdown":"I added the xmls to my main post. I should probably mention that the simucom package (xml etc) is just grabbed via eclipse during the maven process - i dont have it in my workspace as I didnt use / change it.","body":"I added the xmls to my main post. I should probably mention that the simucom package (xml etc) is just grabbed via eclipse during the maven process - i dont have it in my workspace as I didnt use / change it."}],"tags":[],"owner":{"account_id":6235501,"reputation":3140,"user_id":4850949,"accept_rate":57,"display_name":"not2savvy"},"comment_count":3,"down_vote_count":1,"up_vote_count":2,"is_accepted":true,"score":1,"last_activity_date":1695193971,"creation_date":1439928631,"answer_id":32081749,"question_id":32066048,"body_markdown":"`org.myproject.featurepatch.feature.group` seems to have a requirement for `de.uka.ipd.sdq.simucom.feature.feature.group` which is probably found in its manifest.mf of the former (Require-Bundle). I guess the version info of the requirement is not correct, since the log says it requires exactly version 0.0.0. ","title":"Maven + Tycho: unresolved dependencies","body":"<p><code>org.myproject.featurepatch.feature.group</code> seems to have a requirement for <code>de.uka.ipd.sdq.simucom.feature.feature.group</code> which is probably found in its manifest.mf of the former (Require-Bundle). I guess the version info of the requirement is not correct, since the log says it requires exactly version 0.0.0.</p>\n"}],"owner":{"account_id":4846374,"reputation":2570,"user_id":3909896,"accept_rate":100,"display_name":"Cribber"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2604,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"accepted_answer_id":32081749,"answer_count":1,"score":3,"last_activity_date":1695193971,"creation_date":1439882500,"question_id":32066048,"body_markdown":"I&#39;m working on a project lately which goal it is to build an eclipse plugin for palladio. My Project is built out of several seperate parts and i managed to eliminate all errors but the last package still doesn&#39;t want to go through. \r\n\r\nI&#39;m using maven (&quot;clean&quot; works perfectly, the error appears when i try maven install) with tycho and some parts of Palladio. \r\nI&#39;ve tried to call mvn clean via the console as well as in eclipse - the error stays the same. \r\n\r\nI suspect there is something missing/wrong in the pom.xml of the last part of the plugin, as all the other parts work and maven can clean/Install them without an error message. \r\n\r\nI&#39;ve been working on this for the past week but cant seem to solve it. Any help is appreciated. \r\n\r\nThe following is the pom: (i changed user name + project name so don&#39;t mind that)\r\n\r\n\r\n    &lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n\txsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\r\n\t&lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n\r\n\t&lt;parent&gt;\r\n\t\t&lt;groupId&gt;org.myproject&lt;/groupId&gt;\r\n\t\t&lt;artifactId&gt;org.myproject.build&lt;/artifactId&gt;\r\n\t\t&lt;version&gt;1.0.0-SNAPSHOT&lt;/version&gt;\r\n\t\t&lt;relativePath&gt;../org.myproject.build/pom.xml&lt;/relativePath&gt;\r\n\t&lt;/parent&gt;\r\n\r\n\t&lt;artifactId&gt;org.myproject.repository&lt;/artifactId&gt;\r\n\t&lt;packaging&gt;eclipse-repository&lt;/packaging&gt;\r\n\r\n\r\n\t&lt;build&gt;\r\n\t\t&lt;plugins&gt;\r\n\t\t\t&lt;plugin&gt;\r\n\t\t\t\t&lt;groupId&gt;org.eclipse.tycho.extras&lt;/groupId&gt;\r\n\t\t\t\t&lt;artifactId&gt;tycho-p2-extras-plugin&lt;/artifactId&gt;\r\n\t\t\t\t&lt;version&gt;${tycho-version}&lt;/version&gt;\r\n\t\t\t\t&lt;executions&gt;\r\n\t\t\t\t\t&lt;execution&gt;\r\n\t\t\t\t\t\t&lt;phase&gt;prepare-package&lt;/phase&gt;\r\n\t\t\t\t\t\t&lt;goals&gt;\r\n\t\t\t\t\t\t\t&lt;goal&gt;mirror&lt;/goal&gt;\r\n\t\t\t\t\t\t&lt;/goals&gt;\r\n\t\t\t\t\t&lt;/execution&gt;\r\n\t\t\t\t&lt;/executions&gt;\r\n\t\t\t\t&lt;configuration&gt;\r\n\t\t\t\t\t&lt;source&gt;\r\n\t\t\t\t\t\t&lt;repository&gt;\r\n\t\t\t\t\t\t\t&lt;url&gt;https://sdqweb.ipd.kit.edu/eclipse/palladio/core/pcm/releases/3.4.1/&lt;/url&gt;\r\n\t\t\t\t\t\t\t&lt;layout&gt;p2&lt;/layout&gt;\r\n\t\t\t\t\t\t&lt;/repository&gt;\r\n\t\t\t\t\t&lt;/source&gt;\r\n\t\t\t\t\t&lt;ius&gt;\r\n\t\t\t\t\t\t&lt;iu&gt;\r\n\t\t\t\t\t\t\t&lt;id&gt;de.uka.ipd.sdq.simucom.feature.feature.group&lt;/id&gt;\r\n\r\n\t\t\t\t\t\t&lt;/iu&gt;\r\n\t\t\t\t\t&lt;/ius&gt;\r\n\t\t\t\t\t&lt;destination&gt;${project.build.directory}/repository&lt;/destination&gt;\r\n\t\t\t\t\t&lt;followStrictOnly&gt;true&lt;/followStrictOnly&gt;\r\n\t\t\t\t\t&lt;includeOptional&gt;false&lt;/includeOptional&gt;\r\n\t\t\t\t\t&lt;includeNonGreedy&gt;false&lt;/includeNonGreedy&gt;\r\n\t\t\t\t\t&lt;latestVersionOnly&gt;false&lt;/latestVersionOnly&gt;\r\n\t\t\t\t\t&lt;mirrorMetadataOnly&gt;false&lt;/mirrorMetadataOnly&gt;\r\n\t\t\t\t\t&lt;compress&gt;true&lt;/compress&gt;\r\n\t\t\t\t\t&lt;append&gt;true&lt;/append&gt;\r\n\t\t\t\t&lt;/configuration&gt;\r\n\t\t\t&lt;/plugin&gt;\r\n\t\t&lt;/plugins&gt;\r\n\t&lt;/build&gt;\r\n&lt;/project&gt;\r\n\r\n----------\r\n\r\nand here is the error I&#39;m getting: \r\n\r\n----------\r\n\r\n    [INFO] Building org.myprojectrepository 1.0.0-SNAPSHOT\r\n    [INFO] ------------------------------------------------------------------------\r\n    [INFO] \r\n    [INFO] --- tycho-packaging-plugin:0.21.0:build-qualifier-aggregator (default-build-qualifier-aggregator) @ org.myproject.repository ---\r\n    [INFO] The project&#39;s OSGi version is 1.0.0.201508180656\r\n    [INFO] \r\n    [INFO] --- maven-clean-plugin:2.4.1:clean (default-clean-1) @ org.myproject.repository ---\r\n    [INFO] \r\n    [INFO] --- tycho-p2-extras-plugin:0.21.0:mirror (default) @ org.myproject.repository ---\r\n    [INFO] Mirroring to /home/user/lib/eclipse EE/eclipse-ee-workspace/org.myproject.repository/target/repository...\r\n    –- Mirroring –--\r\n    \r\n     (Descriptor: canonical: osgi.bundle,de.uka.ipd.sdq.simucomframework.variables,1.0.0.201309282203)\r\n    [INFO] \r\n    [INFO] --- target-platform-configuration:0.21.0:target-platform (default-target-platform) @ org.myproject.repository ---\r\n    [INFO] \r\n    [INFO] --- tycho-p2-publisher-plugin:0.21.0:publish-products (default-publish-products) @ org.myproject.repository ---\r\n    [INFO] Cannot complete the request.  Generating details.\r\n    [INFO] Cannot complete the request.  Generating details.\r\n    [INFO] {osgi.ws=gtk, osgi.os=linux, osgi.arch=x86_64, org.eclipse.update.install.features=true}\r\n    [ERROR] Cannot resolve project dependencies:\r\n    [ERROR]   Software being installed: org.X.repository raw:1.0.0.&#39;SNAPSHOT&#39;/format(n[.n=0;[.n=0;[-S]]]):1.0.0-SNAPSHOT\r\n    [ERROR]   Missing requirement: org.myproject.featurepatch.feature.group 1.0.0.201508180656 requires &#39;de.uka.ipd.sdq.simucom.feature.feature.group 0.0.0&#39; but it could not be found\r\n    [ERROR]   Cannot satisfy dependency: org.myproject.repository raw:1.0.0.&#39;SNAPSHOT&#39;/format(n[.n=0;[.n=0;[-S]]]):1.0.0-SNAPSHOT depends on: org.myproject.featurepatch.feature.group 0.0.0\r\n    [ERROR] \r\n    [INFO] ------------------------------------------------------------------------\r\n    [INFO] Reactor Summary:\r\n    [INFO] ....\r\n    [INFO] ....\r\n    [INFO] ....\r\n    [INFO] [six other project parts]  ................. SUCCESS [0.218s]\r\n    [INFO] org.myproject.repository ................... FAILURE [7.073s]\r\n    [INFO] ------------------------------------------------------------------------\r\n    [INFO] BUILD FAILURE\r\n    [INFO] ------------------------------------------------------------------------\r\n    [INFO] Total time: 1:34.649s\r\n    [INFO] Finished at: Tue Aug 18 08:56:40 CEST 2015\r\n    [INFO] Final Memory: 170M/2870M\r\n    [INFO] ------------------------------------------------------------------------\r\n    [ERROR] Failed to execute goal org.eclipse.tycho:tycho-p2-publisher-plugin:0.21.0:publish-products (default-publish-products) on project org.myproject.repository: Execution default-publish-products of goal org.eclipse.tycho:tycho-p2-publisher-plugin:0.21.0:publish-products failed: No solution found because the problem is unsatisfiable.: [Unable to satisfy dependency from org.eclipse.jdt.core 3.8.1.v_OTDT_r210_201206090452 to org.eclipse.objectteams.otdt.core.patch.feature.group [2.0.0,3.0.0).; Unable to satisfy dependency from org.eclipse.jdt.core 3.8.2.v_OTDT_r211_201209011847 to org.eclipse.objectteams.otdt.core.patch.feature.group [2.0.0,3.0.0).; Unable to satisfy dependency from org.eclipse.jdt.core 3.8.3.v_OTDT_r212_201301271217 to org.eclipse.objectteams.otdt.core.patch.feature.group [2.0.0,3.0.0).; Unable to satisfy dependency from org.myproject.featurepatch.feature.group 1.0.0.201508180656 to de.uka.ipd.sdq.simucom.feature.feature.group 0.0.0.; No solution found because the problem is unsatisfiable.] -&gt; [Help 1]\r\n    [ERROR] \r\n\r\n\r\n\r\n\r\n\r\nfeature.xml of myproject.featurepatch\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n    &lt;feature\r\n          id=&quot;org.myproject.featurepatch&quot;\r\n          label=&quot;SDC Patch for SimuCom CBSE Simulation&quot;\r\n          version=&quot;1.0.0.qualifier&quot;\r\n          provider-name=&quot;myproject.org&quot;&gt;\r\n    \r\n       &lt;description url=&quot;http://myproject.org&quot;&gt;\r\n          Patches the SimuCom CBSE Simulation feature.\r\n    Adds configuration options required for the SDS plugin.\r\n       &lt;/description&gt;\r\n    \r\n       &lt;license url=&quot;https://www.eclipse.org/legal/epl-v10.html&quot;&gt;\r\n          Eclipse Public License - v 1.0\r\n    \r\n       &lt;/license&gt;\r\n    \r\n       &lt;requires&gt;\r\n          &lt;import feature=&quot;de.uka.ipd.sdq.simucom.feature&quot; version=&quot;3.4.1.201309282203&quot; patch=&quot;true&quot;/&gt;\r\n       &lt;/requires&gt;\r\n    \r\n       &lt;plugin\r\n             id=&quot;de.uka.ipd.sdq.codegen.simucontroller&quot;\r\n             download-size=&quot;0&quot;\r\n             install-size=&quot;0&quot;\r\n             version=&quot;0.0.0&quot;\r\n             unpack=&quot;false&quot;/&gt;\r\n    \r\n       &lt;plugin\r\n             id=&quot;de.uka.ipd.sdq.simulation&quot;\r\n             download-size=&quot;0&quot;\r\n             install-size=&quot;0&quot;\r\n             version=&quot;0.0.0&quot;\r\n             unpack=&quot;false&quot;/&gt;\r\n    \r\n    &lt;/feature&gt;\r\n\r\n\r\nfeature xml of simucom:\r\n\r\n        &lt;feature id=&quot;de.uka.ipd.sdq.simucom.feature&quot; label=&quot;SimuCom CBSE Simulation&quot; version=&quot;3.4.1.201309282203&quot; provider-name=&quot;sdq.ipd.kit.edu&quot; plugin=&quot;de.uka.ipd.sdq.branding&quot;&gt;&lt;description url=&quot;http://sdq.ipd.kit.edu&quot;&gt;\r\n              Simulation framework for PCM instances. Uses Model-2-Text transformation\r\n        to generate a plugin which is executed directly using OSGi dynamic\r\n        loader.\r\n           &lt;/description&gt;&lt;copyright&gt;\r\n              This plugin is protected by copyright held by the members of\r\n        the Palladio Research Group, University of Karlsruhe.\r\n           &lt;/copyright&gt;&lt;license url=&quot;http://www.eclipse.org/legal/epl-v10.html&quot;&gt;\r\n        &lt;/license&gt;&lt;url&gt;&lt;update label=&quot;Palladio Update Site&quot; url=&quot;http://sdqweb.ipd.uka.de/eclipse/PCM/&quot;/&gt;&lt;/url&gt;&lt;requires&gt;&lt;import plugin=&quot;de.uka.ipd.sdq.identifier&quot;/&gt;&lt;import plugin=&quot;de.uka.ipd.sdq.probfunction&quot;/&gt;&lt;import plugin=&quot;de.uka.ipd.sdq.stoex&quot;/&gt;&lt;import plugin=&quot;de.uka.ipd.sdq.pcm&quot; version=&quot;3.1.0&quot; match=&quot;greaterOrEqual&quot;/&gt;&lt;import plugin=&quot;de.uka.ipd.sdq.completions&quot; version=&quot;1.0.0&quot; match=&quot;greaterOrEqual&quot;/&gt;&lt;import plugin=&quot;de.uka.ipd.sdq.featureconfig&quot; version=&quot;1.0.0&quot; match=&quot;greaterOrEqual&quot;/&gt;&lt;import plugin=&quot;de.uka.ipd.sdq.featuremodel&quot;/&gt;&lt;import plugin=&quot;de.uka.ipd.sdq.pcm.resources&quot;/&gt;&lt;import plugin=&quot;de.uka.ipd.sdq.pcm.stochasticexpressions&quot;/&gt;&lt;import plugin=&quot;org.eclipse.ocl&quot;/&gt;&lt;import plugin=&quot;org.eclipse.ocl.ecore&quot; version=&quot;1.2.1&quot; match=&quot;greaterOrEqual&quot;/&gt;&lt;import plugin=&quot;org.eclipse.xtend.typesystem.emf&quot;/&gt;&lt;import plugin=&quot;org.eclipse.xpand&quot;/&gt;&lt;import plugin=&quot;org.eclipse.xtend&quot;/&gt;&lt;import plugin=&quot;org.eclipse.uml2.uml.ecore.importer&quot;/&gt;&lt;import plugin=&quot;de.uka.ipd.sdq.scheduler&quot; version=&quot;1.0.0&quot; match=&quot;greaterOrEqual&quot;/&gt;&lt;import plugin=&quot;de.fzi.se.quality&quot; version=&quot;1.0.0&quot; match=&quot;greaterOrEqual&quot;/&gt;&lt;import plugin=&quot;org.eclipse.xtend.util.stdlib&quot; version=&quot;1.0.1&quot; match=&quot;greaterOrEqual&quot;/&gt;&lt;import plugin=&quot;de.uka.ipd.sdq.sensorframework&quot;/&gt;&lt;import plugin=&quot;org.apache.log4j&quot; version=&quot;1.2.13&quot; match=&quot;greaterOrEqual&quot;/&gt;&lt;import plugin=&quot;org.eclipse.core.runtime&quot;/&gt;&lt;import plugin=&quot;org.eclipse.emf.ecore.change&quot;/&gt;&lt;import plugin=&quot;de.uka.ipd.sdq.statistics&quot; version=&quot;1.0.0&quot; match=&quot;greaterOrEqual&quot;/&gt;&lt;import plugin=&quot;de.uka.ipd.sdq.probfunction.math&quot; version=&quot;2.0.0&quot; match=&quot;greaterOrEqual&quot;/&gt;&lt;import plugin=&quot;de.uka.ipd.sdq.workflow.pcm&quot; version=&quot;1.0.0&quot; match=&quot;greaterOrEqual&quot;/&gt;&lt;import plugin=&quot;de.uka.ipd.sdq.probespec.framework&quot; version=&quot;1.0.0&quot; match=&quot;greaterOrEqual&quot;/&gt;&lt;import plugin=&quot;de.uka.ipd.sdq.pipesandfilters&quot; version=&quot;1.0.0&quot; match=&quot;greaterOrEqual&quot;/&gt;&lt;import plugin=&quot;de.uka.ipd.sdq.pipesandfilters.framework&quot; version=&quot;1.0.0&quot; match=&quot;greaterOrEqual&quot;/&gt;&lt;import plugin=&quot;org.jscience&quot; version=&quot;4.1.3&quot; match=&quot;greaterOrEqual&quot;/&gt;&lt;import plugin=&quot;de.uka.ipd.sdq.pipesandfilters.framework.recorder.sensorframework&quot; version=&quot;1.0.0&quot; match=&quot;greaterOrEqual&quot;/&gt;&lt;import plugin=&quot;de.uka.ipd.sdq.simulation.abstractsimengine&quot; version=&quot;1.0.0&quot; match=&quot;greaterOrEqual&quot;/&gt;&lt;import plugin=&quot;de.uka.ipd.sdq.errorhandling&quot; version=&quot;1.0.0&quot; match=&quot;greaterOrEqual&quot;/&gt;&lt;import plugin=&quot;de.fzi.se.accuracy&quot; version=&quot;1.0.0&quot; match=&quot;greaterOrEqual&quot;/&gt;&lt;import plugin=&quot;de.uka.ipd.sdq.reliability.core&quot; version=&quot;3.1.0&quot; match=&quot;greaterOrEqual&quot;/&gt;&lt;import plugin=&quot;de.uka.ipd.sdq.featuremodel&quot; version=&quot;2.0.0&quot; match=&quot;greaterOrEqual&quot;/&gt;&lt;import plugin=&quot;de.uka.ipd.sdq.simulation&quot; version=&quot;1.0.0&quot; match=&quot;greaterOrEqual&quot;/&gt;&lt;import plugin=&quot;de.uka.ipd.sdq.stoex.analyser&quot;/&gt;&lt;import plugin=&quot;org.eclipse.debug.ui&quot;/&gt;&lt;import plugin=&quot;org.eclipse.jdt.core&quot;/&gt;\r\n    &lt;import plugin=&quot;org.eclipse.jdt.launching&quot;/&gt;\r\n    &lt;import plugin=&quot;org.eclipse.pde.ui&quot;/&gt;&lt;import plugin=&quot;org.eclipse.emf.common.ui&quot;/&gt;\r\n    &lt;import plugin=&quot;de.uka.ipd.sdq.workflow.launchconfig&quot; version=&quot;1.1.0&quot; match=&quot;greaterOrEqual&quot;/&gt;\r\n    &lt;import plugin=&quot;de.uka.ipd.sdq.sensorframework.dialogs&quot;/&gt;\r\n    &lt;import plugin=&quot;de.uka.ipd.sdq.pcm.dialogs&quot;/&gt;\r\n    &lt;import plugin=&quot;org.eclipse.osgi.services&quot;/&gt;\r\n    &lt;import plugin=&quot;ch.ethz.iks.r_osgi.remote&quot; version=&quot;1.0.0&quot; match=&quot;greaterOrEqual&quot;/&gt;\r\n    &lt;import plugin=&quot;org.junit4&quot; version=&quot;4.3.1&quot; match=&quot;greaterOrEqual&quot;/&gt;\r\n    &lt;import plugin=&quot;org.eclipse.emf.query.ocl&quot; version=&quot;1.2.0&quot; match=&quot;greaterOrEqual&quot;/&gt;\r\n    &lt;import plugin=&quot;de.uka.ipd.sdq.workflow.mdsd&quot; version=&quot;1.0.0&quot; match=&quot;greaterOrEqual&quot;/&gt;\r\n    &lt;import plugin=&quot;org.eclipse.emf.mwe.core&quot; version=&quot;0.7.0&quot; match=&quot;greaterOrEqual&quot;/&gt;\r\n    &lt;import plugin=&quot;org.eclipse.xpand&quot; version=&quot;0.7.0&quot; match=&quot;greaterOrEqual&quot;/&gt;&lt;import plugin=&quot;org.eclipse.xtend&quot; version=&quot;0.7.0&quot; match=&quot;greaterOrEqual&quot;/&gt;&lt;import plugin=&quot;de.uka.ipd.sdq.dialogs&quot; version=&quot;2.0.1&quot; match=&quot;greaterOrEqual&quot;/&gt;\r\n    &lt;import plugin=&quot;org.eclipse.ui.ide&quot; version=&quot;3.5.0&quot; match=&quot;greaterOrEqual&quot;/&gt;&lt;import plugin=&quot;de.uka.ipd.sdq.featureinstance.editor&quot; version=&quot;1.0.0&quot; match=&quot;greaterOrEqual&quot;/&gt;\r\n    &lt;import plugin=&quot;de.uka.ipd.sdq.pcm.edit&quot;/&gt;\r\n    &lt;import plugin=&quot;org.eclipse.emf.edit.ui&quot; version=&quot;2.5.0&quot; match=&quot;greaterOrEqual&quot;/&gt;\r\n    &lt;import plugin=&quot;de.uka.ipd.sdq.pcmbench.ui&quot; version=&quot;2.0.0&quot; match=&quot;greaterOrEqual&quot;/&gt;\r\n    &lt;import plugin=&quot;org.apache.commons.lang&quot; version=&quot;2.3.0&quot; match=&quot;greaterOrEqual&quot;/&gt;\r\n    &lt;import plugin=&quot;de.uka.ipd.sdq.sensorframework.storage&quot;/&gt;\r\n    &lt;import plugin=&quot;org.eclipse.core.runtime&quot; version=&quot;3.5.0&quot; match=&quot;greaterOrEqual&quot;/&gt;\r\n    &lt;import plugin=&quot;org.eclipse.emf.ecore&quot;/&gt;&lt;import plugin=&quot;org.eclipse.equinox.event&quot; version=&quot;1.1.0&quot; match=&quot;greaterOrEqual&quot;/&gt;\r\n    &lt;import plugin=&quot;org.eclipse.osgi&quot;/&gt;\r\n    &lt;import plugin=&quot;org.eclipse.emf.ecore.xmi&quot;/&gt;\r\n    &lt;import plugin=&quot;org.eclipse.emf.query&quot;/&gt;\r\n    &lt;import plugin=&quot;de.uka.ipd.sdq.units&quot;/&gt;\r\n    &lt;import plugin=&quot;org.eclipse.emf.edit&quot;/&gt;\r\n    &lt;import plugin=&quot;de.uka.ipd.sdq.identifier.edit&quot;/&gt;\r\n    &lt;import plugin=&quot;de.uka.ipd.sdq.probfunction.edit&quot;/&gt;\r\n    &lt;import plugin=&quot;de.uka.ipd.sdq.stoex.edit&quot;/&gt;\r\n    &lt;import plugin=&quot;de.uka.ipd.sdq.units.edit&quot;/&gt;\r\n    &lt;import plugin=&quot;org.eclipse.uml2.common.edit&quot;/&gt;\r\n    &lt;import plugin=&quot;org.eclipse.core.resources&quot;/&gt;\r\n    &lt;import plugin=&quot;org.eclipse.ui&quot;/&gt;&lt;import plugin=&quot;de.uka.ipd.sdq.simucomframework.simucomstatus&quot; version=&quot;1.0.0&quot; match=&quot;greaterOrEqual&quot;/&gt;\r\n    &lt;import feature=&quot;de.uka.ipd.sdq.simulation.abstractsimengine.feature&quot; version=&quot;3.3.0&quot; match=&quot;greaterOrEqual&quot;/&gt;\r\n    &lt;import plugin=&quot;org.eclipse.core.runtime&quot; version=&quot;3.7.0&quot; match=&quot;compatible&quot;/&gt;&lt;/requires&gt;&lt;plugin id=&quot;de.uka.ipd.sdq.pcm.codegen.m2m&quot; download-size=&quot;0&quot; install-size=&quot;0&quot; version=&quot;3.1.0.201309282203&quot;/&gt;\r\n    &lt;plugin id=&quot;de.uka.ipd.sdq.simucomframework&quot; download-size=&quot;0&quot; install-size=&quot;0&quot; version=&quot;1.0.0.201309282203&quot; unpack=&quot;false&quot;/&gt;\r\n    &lt;plugin id=&quot;de.uka.ipd.sdq.simucomframework.variables&quot; download-size=&quot;0&quot; install-size=&quot;0&quot; version=&quot;1.0.0.201309282203&quot; unpack=&quot;false&quot;/&gt;\r\n    &lt;plugin id=&quot;de.uka.ipd.sdq.codegen.simucontroller&quot; download-size=&quot;0&quot; install-size=&quot;0&quot; version=&quot;1.0.0.201309282203&quot; unpack=&quot;false&quot;/&gt;\r\n    &lt;plugin id=&quot;de.uka.ipd.sdq.scheduler&quot; download-size=&quot;0&quot; install-size=&quot;0&quot; version=&quot;1.0.0.201309282203&quot; unpack=&quot;false&quot;/&gt;\r\n    &lt;plugin id=&quot;de.uka.ipd.sdq.branding&quot; download-size=&quot;0&quot; install-size=&quot;0&quot; version=&quot;1.0.0.201309282203&quot; unpack=&quot;false&quot;/&gt;\r\n    &lt;plugin id=&quot;ch.ethz.iks.r_osgi.remote&quot; download-size=&quot;0&quot; install-size=&quot;0&quot; version=&quot;1.0.0.201309282203&quot; unpack=&quot;false&quot;/&gt;\r\n    &lt;plugin id=&quot;de.uka.ipd.sdq.simucomframework.simulationdock&quot; download-size=&quot;0&quot; install-size=&quot;0&quot; version=&quot;1.0.0.201309282203&quot; unpack=&quot;false&quot;/&gt;\r\n    &lt;plugin id=&quot;de.uka.ipd.sdq.simucomframework.simucomstatus&quot; download-size=&quot;0&quot; install-size=&quot;0&quot; version=&quot;1.0.0.201309282203&quot; unpack=&quot;false&quot;/&gt;\r\n    &lt;plugin id=&quot;de.uka.ipd.sdq.reliability.core&quot; download-size=&quot;0&quot; install-size=&quot;0&quot; version=&quot;3.1.0.201309282203&quot; unpack=&quot;false&quot;/&gt;\r\n    &lt;plugin id=&quot;de.fzi.se.quality&quot; download-size=&quot;0&quot; install-size=&quot;0&quot; version=&quot;1.0.0.201309282203&quot; unpack=&quot;false&quot;/&gt;\r\n    &lt;plugin id=&quot;de.fzi.se.quality.edit&quot; download-size=&quot;0&quot; install-size=&quot;0&quot; version=&quot;1.0.0.201309282203&quot; unpack=&quot;false&quot;/&gt;\r\n    &lt;plugin id=&quot;de.fzi.se.quality.editor&quot; download-size=&quot;0&quot; install-size=&quot;0&quot; version=&quot;1.0.0.201309282203&quot; unpack=&quot;false&quot;/&gt;\r\n    &lt;plugin id=&quot;de.fzi.se.accuracy&quot; download-size=&quot;0&quot; install-size=&quot;0&quot; version=&quot;1.0.0.201309282203&quot; unpack=&quot;false&quot;/&gt;\r\n    &lt;plugin id=&quot;de.uka.ipd.sdq.statistics&quot; download-size=&quot;0&quot; install-size=&quot;0&quot; version=&quot;1.0.0.201309191158&quot; unpack=&quot;false&quot;/&gt;\r\n    &lt;plugin id=&quot;de.uka.ipd.sdq.simulation&quot; download-size=&quot;0&quot; install-size=&quot;0&quot; version=&quot;1.0.0.201309282203&quot; unpack=&quot;false&quot;/&gt;\r\n    &lt;/feature&gt;\r\n\r\n","title":"Maven + Tycho: unresolved dependencies","body":"<p>I'm working on a project lately which goal it is to build an eclipse plugin for palladio. My Project is built out of several seperate parts and i managed to eliminate all errors but the last package still doesn't want to go through. </p>\n\n<p>I'm using maven (\"clean\" works perfectly, the error appears when i try maven install) with tycho and some parts of Palladio. \nI've tried to call mvn clean via the console as well as in eclipse - the error stays the same. </p>\n\n<p>I suspect there is something missing/wrong in the pom.xml of the last part of the plugin, as all the other parts work and maven can clean/Install them without an error message. </p>\n\n<p>I've been working on this for the past week but cant seem to solve it. Any help is appreciated. </p>\n\n<p>The following is the pom: (i changed user name + project name so don't mind that)</p>\n\n<pre><code>&lt;project xmlns=\"http://maven.apache.org/POM/4.0.0\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\nxsi:schemaLocation=\"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd\"&gt;\n&lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n\n&lt;parent&gt;\n    &lt;groupId&gt;org.myproject&lt;/groupId&gt;\n    &lt;artifactId&gt;org.myproject.build&lt;/artifactId&gt;\n    &lt;version&gt;1.0.0-SNAPSHOT&lt;/version&gt;\n    &lt;relativePath&gt;../org.myproject.build/pom.xml&lt;/relativePath&gt;\n&lt;/parent&gt;\n\n&lt;artifactId&gt;org.myproject.repository&lt;/artifactId&gt;\n&lt;packaging&gt;eclipse-repository&lt;/packaging&gt;\n\n\n&lt;build&gt;\n    &lt;plugins&gt;\n        &lt;plugin&gt;\n            &lt;groupId&gt;org.eclipse.tycho.extras&lt;/groupId&gt;\n            &lt;artifactId&gt;tycho-p2-extras-plugin&lt;/artifactId&gt;\n            &lt;version&gt;${tycho-version}&lt;/version&gt;\n            &lt;executions&gt;\n                &lt;execution&gt;\n                    &lt;phase&gt;prepare-package&lt;/phase&gt;\n                    &lt;goals&gt;\n                        &lt;goal&gt;mirror&lt;/goal&gt;\n                    &lt;/goals&gt;\n                &lt;/execution&gt;\n            &lt;/executions&gt;\n            &lt;configuration&gt;\n                &lt;source&gt;\n                    &lt;repository&gt;\n                        &lt;url&gt;https://sdqweb.ipd.kit.edu/eclipse/palladio/core/pcm/releases/3.4.1/&lt;/url&gt;\n                        &lt;layout&gt;p2&lt;/layout&gt;\n                    &lt;/repository&gt;\n                &lt;/source&gt;\n                &lt;ius&gt;\n                    &lt;iu&gt;\n                        &lt;id&gt;de.uka.ipd.sdq.simucom.feature.feature.group&lt;/id&gt;\n\n                    &lt;/iu&gt;\n                &lt;/ius&gt;\n                &lt;destination&gt;${project.build.directory}/repository&lt;/destination&gt;\n                &lt;followStrictOnly&gt;true&lt;/followStrictOnly&gt;\n                &lt;includeOptional&gt;false&lt;/includeOptional&gt;\n                &lt;includeNonGreedy&gt;false&lt;/includeNonGreedy&gt;\n                &lt;latestVersionOnly&gt;false&lt;/latestVersionOnly&gt;\n                &lt;mirrorMetadataOnly&gt;false&lt;/mirrorMetadataOnly&gt;\n                &lt;compress&gt;true&lt;/compress&gt;\n                &lt;append&gt;true&lt;/append&gt;\n            &lt;/configuration&gt;\n        &lt;/plugin&gt;\n    &lt;/plugins&gt;\n&lt;/build&gt;\n</code></pre>\n\n<p></p>\n\n<hr>\n\n<p>and here is the error I'm getting: </p>\n\n<hr>\n\n<pre><code>[INFO] Building org.myprojectrepository 1.0.0-SNAPSHOT\n[INFO] ------------------------------------------------------------------------\n[INFO] \n[INFO] --- tycho-packaging-plugin:0.21.0:build-qualifier-aggregator (default-build-qualifier-aggregator) @ org.myproject.repository ---\n[INFO] The project's OSGi version is 1.0.0.201508180656\n[INFO] \n[INFO] --- maven-clean-plugin:2.4.1:clean (default-clean-1) @ org.myproject.repository ---\n[INFO] \n[INFO] --- tycho-p2-extras-plugin:0.21.0:mirror (default) @ org.myproject.repository ---\n[INFO] Mirroring to /home/user/lib/eclipse EE/eclipse-ee-workspace/org.myproject.repository/target/repository...\n–- Mirroring –--\n\n (Descriptor: canonical: osgi.bundle,de.uka.ipd.sdq.simucomframework.variables,1.0.0.201309282203)\n[INFO] \n[INFO] --- target-platform-configuration:0.21.0:target-platform (default-target-platform) @ org.myproject.repository ---\n[INFO] \n[INFO] --- tycho-p2-publisher-plugin:0.21.0:publish-products (default-publish-products) @ org.myproject.repository ---\n[INFO] Cannot complete the request.  Generating details.\n[INFO] Cannot complete the request.  Generating details.\n[INFO] {osgi.ws=gtk, osgi.os=linux, osgi.arch=x86_64, org.eclipse.update.install.features=true}\n[ERROR] Cannot resolve project dependencies:\n[ERROR]   Software being installed: org.X.repository raw:1.0.0.'SNAPSHOT'/format(n[.n=0;[.n=0;[-S]]]):1.0.0-SNAPSHOT\n[ERROR]   Missing requirement: org.myproject.featurepatch.feature.group 1.0.0.201508180656 requires 'de.uka.ipd.sdq.simucom.feature.feature.group 0.0.0' but it could not be found\n[ERROR]   Cannot satisfy dependency: org.myproject.repository raw:1.0.0.'SNAPSHOT'/format(n[.n=0;[.n=0;[-S]]]):1.0.0-SNAPSHOT depends on: org.myproject.featurepatch.feature.group 0.0.0\n[ERROR] \n[INFO] ------------------------------------------------------------------------\n[INFO] Reactor Summary:\n[INFO] ....\n[INFO] ....\n[INFO] ....\n[INFO] [six other project parts]  ................. SUCCESS [0.218s]\n[INFO] org.myproject.repository ................... FAILURE [7.073s]\n[INFO] ------------------------------------------------------------------------\n[INFO] BUILD FAILURE\n[INFO] ------------------------------------------------------------------------\n[INFO] Total time: 1:34.649s\n[INFO] Finished at: Tue Aug 18 08:56:40 CEST 2015\n[INFO] Final Memory: 170M/2870M\n[INFO] ------------------------------------------------------------------------\n[ERROR] Failed to execute goal org.eclipse.tycho:tycho-p2-publisher-plugin:0.21.0:publish-products (default-publish-products) on project org.myproject.repository: Execution default-publish-products of goal org.eclipse.tycho:tycho-p2-publisher-plugin:0.21.0:publish-products failed: No solution found because the problem is unsatisfiable.: [Unable to satisfy dependency from org.eclipse.jdt.core 3.8.1.v_OTDT_r210_201206090452 to org.eclipse.objectteams.otdt.core.patch.feature.group [2.0.0,3.0.0).; Unable to satisfy dependency from org.eclipse.jdt.core 3.8.2.v_OTDT_r211_201209011847 to org.eclipse.objectteams.otdt.core.patch.feature.group [2.0.0,3.0.0).; Unable to satisfy dependency from org.eclipse.jdt.core 3.8.3.v_OTDT_r212_201301271217 to org.eclipse.objectteams.otdt.core.patch.feature.group [2.0.0,3.0.0).; Unable to satisfy dependency from org.myproject.featurepatch.feature.group 1.0.0.201508180656 to de.uka.ipd.sdq.simucom.feature.feature.group 0.0.0.; No solution found because the problem is unsatisfiable.] -&gt; [Help 1]\n[ERROR] \n</code></pre>\n\n<p>feature.xml of myproject.featurepatch</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;feature\n      id=\"org.myproject.featurepatch\"\n      label=\"SDC Patch for SimuCom CBSE Simulation\"\n      version=\"1.0.0.qualifier\"\n      provider-name=\"myproject.org\"&gt;\n\n   &lt;description url=\"http://myproject.org\"&gt;\n      Patches the SimuCom CBSE Simulation feature.\nAdds configuration options required for the SDS plugin.\n   &lt;/description&gt;\n\n   &lt;license url=\"https://www.eclipse.org/legal/epl-v10.html\"&gt;\n      Eclipse Public License - v 1.0\n\n   &lt;/license&gt;\n\n   &lt;requires&gt;\n      &lt;import feature=\"de.uka.ipd.sdq.simucom.feature\" version=\"3.4.1.201309282203\" patch=\"true\"/&gt;\n   &lt;/requires&gt;\n\n   &lt;plugin\n         id=\"de.uka.ipd.sdq.codegen.simucontroller\"\n         download-size=\"0\"\n         install-size=\"0\"\n         version=\"0.0.0\"\n         unpack=\"false\"/&gt;\n\n   &lt;plugin\n         id=\"de.uka.ipd.sdq.simulation\"\n         download-size=\"0\"\n         install-size=\"0\"\n         version=\"0.0.0\"\n         unpack=\"false\"/&gt;\n\n&lt;/feature&gt;\n</code></pre>\n\n<p>feature xml of simucom:</p>\n\n<pre><code>    &lt;feature id=\"de.uka.ipd.sdq.simucom.feature\" label=\"SimuCom CBSE Simulation\" version=\"3.4.1.201309282203\" provider-name=\"sdq.ipd.kit.edu\" plugin=\"de.uka.ipd.sdq.branding\"&gt;&lt;description url=\"http://sdq.ipd.kit.edu\"&gt;\n          Simulation framework for PCM instances. Uses Model-2-Text transformation\n    to generate a plugin which is executed directly using OSGi dynamic\n    loader.\n       &lt;/description&gt;&lt;copyright&gt;\n          This plugin is protected by copyright held by the members of\n    the Palladio Research Group, University of Karlsruhe.\n       &lt;/copyright&gt;&lt;license url=\"http://www.eclipse.org/legal/epl-v10.html\"&gt;\n    &lt;/license&gt;&lt;url&gt;&lt;update label=\"Palladio Update Site\" url=\"http://sdqweb.ipd.uka.de/eclipse/PCM/\"/&gt;&lt;/url&gt;&lt;requires&gt;&lt;import plugin=\"de.uka.ipd.sdq.identifier\"/&gt;&lt;import plugin=\"de.uka.ipd.sdq.probfunction\"/&gt;&lt;import plugin=\"de.uka.ipd.sdq.stoex\"/&gt;&lt;import plugin=\"de.uka.ipd.sdq.pcm\" version=\"3.1.0\" match=\"greaterOrEqual\"/&gt;&lt;import plugin=\"de.uka.ipd.sdq.completions\" version=\"1.0.0\" match=\"greaterOrEqual\"/&gt;&lt;import plugin=\"de.uka.ipd.sdq.featureconfig\" version=\"1.0.0\" match=\"greaterOrEqual\"/&gt;&lt;import plugin=\"de.uka.ipd.sdq.featuremodel\"/&gt;&lt;import plugin=\"de.uka.ipd.sdq.pcm.resources\"/&gt;&lt;import plugin=\"de.uka.ipd.sdq.pcm.stochasticexpressions\"/&gt;&lt;import plugin=\"org.eclipse.ocl\"/&gt;&lt;import plugin=\"org.eclipse.ocl.ecore\" version=\"1.2.1\" match=\"greaterOrEqual\"/&gt;&lt;import plugin=\"org.eclipse.xtend.typesystem.emf\"/&gt;&lt;import plugin=\"org.eclipse.xpand\"/&gt;&lt;import plugin=\"org.eclipse.xtend\"/&gt;&lt;import plugin=\"org.eclipse.uml2.uml.ecore.importer\"/&gt;&lt;import plugin=\"de.uka.ipd.sdq.scheduler\" version=\"1.0.0\" match=\"greaterOrEqual\"/&gt;&lt;import plugin=\"de.fzi.se.quality\" version=\"1.0.0\" match=\"greaterOrEqual\"/&gt;&lt;import plugin=\"org.eclipse.xtend.util.stdlib\" version=\"1.0.1\" match=\"greaterOrEqual\"/&gt;&lt;import plugin=\"de.uka.ipd.sdq.sensorframework\"/&gt;&lt;import plugin=\"org.apache.log4j\" version=\"1.2.13\" match=\"greaterOrEqual\"/&gt;&lt;import plugin=\"org.eclipse.core.runtime\"/&gt;&lt;import plugin=\"org.eclipse.emf.ecore.change\"/&gt;&lt;import plugin=\"de.uka.ipd.sdq.statistics\" version=\"1.0.0\" match=\"greaterOrEqual\"/&gt;&lt;import plugin=\"de.uka.ipd.sdq.probfunction.math\" version=\"2.0.0\" match=\"greaterOrEqual\"/&gt;&lt;import plugin=\"de.uka.ipd.sdq.workflow.pcm\" version=\"1.0.0\" match=\"greaterOrEqual\"/&gt;&lt;import plugin=\"de.uka.ipd.sdq.probespec.framework\" version=\"1.0.0\" match=\"greaterOrEqual\"/&gt;&lt;import plugin=\"de.uka.ipd.sdq.pipesandfilters\" version=\"1.0.0\" match=\"greaterOrEqual\"/&gt;&lt;import plugin=\"de.uka.ipd.sdq.pipesandfilters.framework\" version=\"1.0.0\" match=\"greaterOrEqual\"/&gt;&lt;import plugin=\"org.jscience\" version=\"4.1.3\" match=\"greaterOrEqual\"/&gt;&lt;import plugin=\"de.uka.ipd.sdq.pipesandfilters.framework.recorder.sensorframework\" version=\"1.0.0\" match=\"greaterOrEqual\"/&gt;&lt;import plugin=\"de.uka.ipd.sdq.simulation.abstractsimengine\" version=\"1.0.0\" match=\"greaterOrEqual\"/&gt;&lt;import plugin=\"de.uka.ipd.sdq.errorhandling\" version=\"1.0.0\" match=\"greaterOrEqual\"/&gt;&lt;import plugin=\"de.fzi.se.accuracy\" version=\"1.0.0\" match=\"greaterOrEqual\"/&gt;&lt;import plugin=\"de.uka.ipd.sdq.reliability.core\" version=\"3.1.0\" match=\"greaterOrEqual\"/&gt;&lt;import plugin=\"de.uka.ipd.sdq.featuremodel\" version=\"2.0.0\" match=\"greaterOrEqual\"/&gt;&lt;import plugin=\"de.uka.ipd.sdq.simulation\" version=\"1.0.0\" match=\"greaterOrEqual\"/&gt;&lt;import plugin=\"de.uka.ipd.sdq.stoex.analyser\"/&gt;&lt;import plugin=\"org.eclipse.debug.ui\"/&gt;&lt;import plugin=\"org.eclipse.jdt.core\"/&gt;\n&lt;import plugin=\"org.eclipse.jdt.launching\"/&gt;\n&lt;import plugin=\"org.eclipse.pde.ui\"/&gt;&lt;import plugin=\"org.eclipse.emf.common.ui\"/&gt;\n&lt;import plugin=\"de.uka.ipd.sdq.workflow.launchconfig\" version=\"1.1.0\" match=\"greaterOrEqual\"/&gt;\n&lt;import plugin=\"de.uka.ipd.sdq.sensorframework.dialogs\"/&gt;\n&lt;import plugin=\"de.uka.ipd.sdq.pcm.dialogs\"/&gt;\n&lt;import plugin=\"org.eclipse.osgi.services\"/&gt;\n&lt;import plugin=\"ch.ethz.iks.r_osgi.remote\" version=\"1.0.0\" match=\"greaterOrEqual\"/&gt;\n&lt;import plugin=\"org.junit4\" version=\"4.3.1\" match=\"greaterOrEqual\"/&gt;\n&lt;import plugin=\"org.eclipse.emf.query.ocl\" version=\"1.2.0\" match=\"greaterOrEqual\"/&gt;\n&lt;import plugin=\"de.uka.ipd.sdq.workflow.mdsd\" version=\"1.0.0\" match=\"greaterOrEqual\"/&gt;\n&lt;import plugin=\"org.eclipse.emf.mwe.core\" version=\"0.7.0\" match=\"greaterOrEqual\"/&gt;\n&lt;import plugin=\"org.eclipse.xpand\" version=\"0.7.0\" match=\"greaterOrEqual\"/&gt;&lt;import plugin=\"org.eclipse.xtend\" version=\"0.7.0\" match=\"greaterOrEqual\"/&gt;&lt;import plugin=\"de.uka.ipd.sdq.dialogs\" version=\"2.0.1\" match=\"greaterOrEqual\"/&gt;\n&lt;import plugin=\"org.eclipse.ui.ide\" version=\"3.5.0\" match=\"greaterOrEqual\"/&gt;&lt;import plugin=\"de.uka.ipd.sdq.featureinstance.editor\" version=\"1.0.0\" match=\"greaterOrEqual\"/&gt;\n&lt;import plugin=\"de.uka.ipd.sdq.pcm.edit\"/&gt;\n&lt;import plugin=\"org.eclipse.emf.edit.ui\" version=\"2.5.0\" match=\"greaterOrEqual\"/&gt;\n&lt;import plugin=\"de.uka.ipd.sdq.pcmbench.ui\" version=\"2.0.0\" match=\"greaterOrEqual\"/&gt;\n&lt;import plugin=\"org.apache.commons.lang\" version=\"2.3.0\" match=\"greaterOrEqual\"/&gt;\n&lt;import plugin=\"de.uka.ipd.sdq.sensorframework.storage\"/&gt;\n&lt;import plugin=\"org.eclipse.core.runtime\" version=\"3.5.0\" match=\"greaterOrEqual\"/&gt;\n&lt;import plugin=\"org.eclipse.emf.ecore\"/&gt;&lt;import plugin=\"org.eclipse.equinox.event\" version=\"1.1.0\" match=\"greaterOrEqual\"/&gt;\n&lt;import plugin=\"org.eclipse.osgi\"/&gt;\n&lt;import plugin=\"org.eclipse.emf.ecore.xmi\"/&gt;\n&lt;import plugin=\"org.eclipse.emf.query\"/&gt;\n&lt;import plugin=\"de.uka.ipd.sdq.units\"/&gt;\n&lt;import plugin=\"org.eclipse.emf.edit\"/&gt;\n&lt;import plugin=\"de.uka.ipd.sdq.identifier.edit\"/&gt;\n&lt;import plugin=\"de.uka.ipd.sdq.probfunction.edit\"/&gt;\n&lt;import plugin=\"de.uka.ipd.sdq.stoex.edit\"/&gt;\n&lt;import plugin=\"de.uka.ipd.sdq.units.edit\"/&gt;\n&lt;import plugin=\"org.eclipse.uml2.common.edit\"/&gt;\n&lt;import plugin=\"org.eclipse.core.resources\"/&gt;\n&lt;import plugin=\"org.eclipse.ui\"/&gt;&lt;import plugin=\"de.uka.ipd.sdq.simucomframework.simucomstatus\" version=\"1.0.0\" match=\"greaterOrEqual\"/&gt;\n&lt;import feature=\"de.uka.ipd.sdq.simulation.abstractsimengine.feature\" version=\"3.3.0\" match=\"greaterOrEqual\"/&gt;\n&lt;import plugin=\"org.eclipse.core.runtime\" version=\"3.7.0\" match=\"compatible\"/&gt;&lt;/requires&gt;&lt;plugin id=\"de.uka.ipd.sdq.pcm.codegen.m2m\" download-size=\"0\" install-size=\"0\" version=\"3.1.0.201309282203\"/&gt;\n&lt;plugin id=\"de.uka.ipd.sdq.simucomframework\" download-size=\"0\" install-size=\"0\" version=\"1.0.0.201309282203\" unpack=\"false\"/&gt;\n&lt;plugin id=\"de.uka.ipd.sdq.simucomframework.variables\" download-size=\"0\" install-size=\"0\" version=\"1.0.0.201309282203\" unpack=\"false\"/&gt;\n&lt;plugin id=\"de.uka.ipd.sdq.codegen.simucontroller\" download-size=\"0\" install-size=\"0\" version=\"1.0.0.201309282203\" unpack=\"false\"/&gt;\n&lt;plugin id=\"de.uka.ipd.sdq.scheduler\" download-size=\"0\" install-size=\"0\" version=\"1.0.0.201309282203\" unpack=\"false\"/&gt;\n&lt;plugin id=\"de.uka.ipd.sdq.branding\" download-size=\"0\" install-size=\"0\" version=\"1.0.0.201309282203\" unpack=\"false\"/&gt;\n&lt;plugin id=\"ch.ethz.iks.r_osgi.remote\" download-size=\"0\" install-size=\"0\" version=\"1.0.0.201309282203\" unpack=\"false\"/&gt;\n&lt;plugin id=\"de.uka.ipd.sdq.simucomframework.simulationdock\" download-size=\"0\" install-size=\"0\" version=\"1.0.0.201309282203\" unpack=\"false\"/&gt;\n&lt;plugin id=\"de.uka.ipd.sdq.simucomframework.simucomstatus\" download-size=\"0\" install-size=\"0\" version=\"1.0.0.201309282203\" unpack=\"false\"/&gt;\n&lt;plugin id=\"de.uka.ipd.sdq.reliability.core\" download-size=\"0\" install-size=\"0\" version=\"3.1.0.201309282203\" unpack=\"false\"/&gt;\n&lt;plugin id=\"de.fzi.se.quality\" download-size=\"0\" install-size=\"0\" version=\"1.0.0.201309282203\" unpack=\"false\"/&gt;\n&lt;plugin id=\"de.fzi.se.quality.edit\" download-size=\"0\" install-size=\"0\" version=\"1.0.0.201309282203\" unpack=\"false\"/&gt;\n&lt;plugin id=\"de.fzi.se.quality.editor\" download-size=\"0\" install-size=\"0\" version=\"1.0.0.201309282203\" unpack=\"false\"/&gt;\n&lt;plugin id=\"de.fzi.se.accuracy\" download-size=\"0\" install-size=\"0\" version=\"1.0.0.201309282203\" unpack=\"false\"/&gt;\n&lt;plugin id=\"de.uka.ipd.sdq.statistics\" download-size=\"0\" install-size=\"0\" version=\"1.0.0.201309191158\" unpack=\"false\"/&gt;\n&lt;plugin id=\"de.uka.ipd.sdq.simulation\" download-size=\"0\" install-size=\"0\" version=\"1.0.0.201309282203\" unpack=\"false\"/&gt;\n&lt;/feature&gt;\n</code></pre>\n"},{"tags":["java","multithreading","buffer","buffer-overflow","java-threads"],"comments":[{"owner":{"account_id":5399448,"reputation":1859,"user_id":4847311,"display_name":"Sven Nilsson"},"score":0,"creation_date":1695228745,"post_id":77139307,"comment_id":135997599,"body_markdown":"I&#39;m just guessing the queue is filled up by the producer before the consumer has even started, so the producers notify() will never reach the consumer.","body":"I&#39;m just guessing the queue is filled up by the producer before the consumer has even started, so the producers notify() will never reach the consumer."}],"answers":[{"tags":[],"owner":{"account_id":216120,"reputation":49213,"user_id":471160,"accept_rate":90,"display_name":"marcinj"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695193520,"creation_date":1695193520,"answer_id":77140043,"question_id":77139307,"body_markdown":"Both - Producer and Consumer classes are extending the SharedBuffer class, and this way they each have their own separate instance of the queue - so when you add new tasks in Producer, Consumer dont see them. \r\n\r\nQueue should be shared between instances of Producer and Consumer. To do it pass the same instance of SharedBuffer to both the Producer and Consumer classes. Below is example of how you can modify your main method:\r\n\r\n    public class driver {\r\n    \r\n        public static void main(String[] args) throws InterruptedException {\r\n            \r\n            SharedBuffer sharedBuffer = new SharedBuffer();\r\n            \r\n            Producer producer = new Producer(sharedBuffer);\r\n            Consumer consumer = new Consumer(sharedBuffer);\r\n            \r\n            Thread producerThread = new Thread(producer);\r\n            Thread consumerThread = new Thread(consumer);\r\n            \r\n            consumerThread.start();\r\n            producerThread.start();\r\n            \r\n            \r\n            producerThread.join();\r\n            consumerThread.join();\r\n    \r\n        }\r\n    \r\n    }\r\n\r\n... and of course, modify the constructors of your Producer and Consumer classes to accept a SharedBuffer instance and use it instead of creating a new one.\r\n\r\nI also suggest you to change `synchronized(this) {` to `synchronized(queue) {`, to make code thread safe.\r\n","title":"Bounded buffer problem - Producer producing the data but consumer not consuming it","body":"<p>Both - Producer and Consumer classes are extending the SharedBuffer class, and this way they each have their own separate instance of the queue - so when you add new tasks in Producer, Consumer dont see them.</p>\n<p>Queue should be shared between instances of Producer and Consumer. To do it pass the same instance of SharedBuffer to both the Producer and Consumer classes. Below is example of how you can modify your main method:</p>\n<pre><code>public class driver {\n\n    public static void main(String[] args) throws InterruptedException {\n        \n        SharedBuffer sharedBuffer = new SharedBuffer();\n        \n        Producer producer = new Producer(sharedBuffer);\n        Consumer consumer = new Consumer(sharedBuffer);\n        \n        Thread producerThread = new Thread(producer);\n        Thread consumerThread = new Thread(consumer);\n        \n        consumerThread.start();\n        producerThread.start();\n        \n        \n        producerThread.join();\n        consumerThread.join();\n\n    }\n\n}\n</code></pre>\n<p>... and of course, modify the constructors of your Producer and Consumer classes to accept a SharedBuffer instance and use it instead of creating a new one.</p>\n<p>I also suggest you to change <code>synchronized(this) {</code> to <code>synchronized(queue) {</code>, to make code thread safe.</p>\n"}],"owner":{"account_id":21969644,"reputation":1,"user_id":21945937,"display_name":"Harkirat Saran"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":58,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1695193520,"creation_date":1695184404,"question_id":77139307,"body_markdown":"I am writing a bound buffer program, the producer produces the data based on the size of the buffer, but the consumer is not consuming it, thus not solving the problem. What am I missing?\r\n\r\nBuffer class:\r\n\r\n\r\n```\r\nimport java.util.Queue;\r\nimport java.util.LinkedList;\r\n\r\npublic class SharedBuffer {\r\n\t\r\n\tQueue&lt;Integer&gt; queue = new LinkedList&lt;&gt;();\r\n\t\r\n\tint bufferCapacity = 5;\r\n\r\n}\r\n\r\n```\r\n\r\nProducer class:\r\n\r\n\r\n```\r\npublic class Producer extends SharedBuffer implements Runnable {\r\n\t\r\n\t@Override\r\n\tpublic void run() {\r\n\t\tint currentValue = 0;\r\n\t\twhile(true) {\r\n\t\t\tsynchronized(this){\r\n\t\t\t\t\r\n\t\t\t\twhile(queue.size() == bufferCapacity) {\r\n\t\t\t\t\ttry {\r\n\t\t\t\t\t\twait();\r\n\t\t\t\t\t} catch (InterruptedException e) {\r\n\t\t\t\t\t\t// TODO Auto-generated catch block\r\n\t\t\t\t\t\te.printStackTrace();\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tSystem.out.println(&quot;Producer produced: &quot; + currentValue);\r\n\t\t\t\t\r\n\t\t\t\tqueue.add(currentValue++);\r\n\t\t\t\t\r\n\t\t\t\tnotify();\r\n\t\t\t\t\r\n\t\t\t\ttry {\r\n\t\t\t\t\tThread.sleep(1000);\r\n\t\t\t\t} catch (InterruptedException e) {\r\n\t\t\t\t\t// TODO Auto-generated catch block\r\n\t\t\t\t\te.printStackTrace();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t}\r\n\r\n}\r\n\r\n```\r\n\r\nConsumer class:\r\n\r\n\r\n```\r\npublic class Consumer extends SharedBuffer implements Runnable{\r\n\r\n\t@Override\r\n\tpublic void run() {\r\n\t\t// TODO Auto-generated method stub\r\n\t\tint currentItem;\r\n\t\t\r\n\t\twhile(true) {\r\n\t\t\tsynchronized(this) {\r\n\t\t\t\t\r\n\t\t\t\twhile(queue.size() == 0) {\r\n\t\t\t\t\ttry {\r\n\t\t\t\t\t\twait();\r\n\t\t\t\t\t} catch (InterruptedException e) {\r\n\t\t\t\t\t\t// TODO Auto-generated catch block\r\n\t\t\t\t\t\te.printStackTrace();\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tcurrentItem = queue.remove();\r\n\t\t\t\t\r\n\t\t\t\tSystem.out.println(&quot;Consumer consumed: &quot; + currentItem);\r\n\t\t\t\t\r\n\t\t\t\tnotify();\r\n\t\t\t\t\r\n\t\t\t\ttry {\r\n\t\t\t\t\tThread.sleep(1000);\r\n\t\t\t\t} catch (InterruptedException e) {\r\n\t\t\t\t\t// TODO Auto-generated catch block\r\n\t\t\t\t\te.printStackTrace();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t}\r\n\r\n\t\r\n}\r\n\r\n```\r\n\r\nMain/Driver class:\r\n\r\n\r\n```\r\npublic class driver {\r\n\r\n\tpublic static void main(String[] args) throws InterruptedException {\r\n\t\t// TODO Auto-generated method stub\r\n\t\t\r\n\t\tProducer producer = new Producer();\r\n\t\tConsumer consumer = new Consumer();\r\n\t\t\r\n\t\tThread producerThread = new Thread(producer);\r\n\t\tThread consumerThread = new Thread(consumer);\r\n\t\t\r\n\t\tconsumerThread.start();\r\n\t\tproducerThread.start();\r\n\t\t\r\n\t\t\r\n\t\tproducerThread.join();\r\n\t\tconsumerThread.join();\r\n\r\n\t}\r\n\r\n}\r\n```\r\n\r\nOutput (The loop continues without exiting):\r\n\r\n\r\n```\r\nProducer produced: 0\r\nProducer produced: 1\r\nProducer produced: 2\r\nProducer produced: 3\r\nProducer produced: 4\r\n\r\n```\r\n\r\n\r\n\r\nThe threads should be synchronized so that the buffer doesn&#39;t overflow with producer producing overflow data or goes underflow with the consumer trying to consume more data than it is present.","title":"Bounded buffer problem - Producer producing the data but consumer not consuming it","body":"<p>I am writing a bound buffer program, the producer produces the data based on the size of the buffer, but the consumer is not consuming it, thus not solving the problem. What am I missing?</p>\n<p>Buffer class:</p>\n<pre><code>import java.util.Queue;\nimport java.util.LinkedList;\n\npublic class SharedBuffer {\n    \n    Queue&lt;Integer&gt; queue = new LinkedList&lt;&gt;();\n    \n    int bufferCapacity = 5;\n\n}\n\n</code></pre>\n<p>Producer class:</p>\n<pre><code>public class Producer extends SharedBuffer implements Runnable {\n    \n    @Override\n    public void run() {\n        int currentValue = 0;\n        while(true) {\n            synchronized(this){\n                \n                while(queue.size() == bufferCapacity) {\n                    try {\n                        wait();\n                    } catch (InterruptedException e) {\n                        // TODO Auto-generated catch block\n                        e.printStackTrace();\n                    }\n                }\n                \n                System.out.println(&quot;Producer produced: &quot; + currentValue);\n                \n                queue.add(currentValue++);\n                \n                notify();\n                \n                try {\n                    Thread.sleep(1000);\n                } catch (InterruptedException e) {\n                    // TODO Auto-generated catch block\n                    e.printStackTrace();\n                }\n            }\n        }\n        \n    }\n\n}\n\n</code></pre>\n<p>Consumer class:</p>\n<pre><code>public class Consumer extends SharedBuffer implements Runnable{\n\n    @Override\n    public void run() {\n        // TODO Auto-generated method stub\n        int currentItem;\n        \n        while(true) {\n            synchronized(this) {\n                \n                while(queue.size() == 0) {\n                    try {\n                        wait();\n                    } catch (InterruptedException e) {\n                        // TODO Auto-generated catch block\n                        e.printStackTrace();\n                    }\n                }\n                \n                currentItem = queue.remove();\n                \n                System.out.println(&quot;Consumer consumed: &quot; + currentItem);\n                \n                notify();\n                \n                try {\n                    Thread.sleep(1000);\n                } catch (InterruptedException e) {\n                    // TODO Auto-generated catch block\n                    e.printStackTrace();\n                }\n            }\n        }\n        \n    }\n\n    \n}\n\n</code></pre>\n<p>Main/Driver class:</p>\n<pre><code>public class driver {\n\n    public static void main(String[] args) throws InterruptedException {\n        // TODO Auto-generated method stub\n        \n        Producer producer = new Producer();\n        Consumer consumer = new Consumer();\n        \n        Thread producerThread = new Thread(producer);\n        Thread consumerThread = new Thread(consumer);\n        \n        consumerThread.start();\n        producerThread.start();\n        \n        \n        producerThread.join();\n        consumerThread.join();\n\n    }\n\n}\n</code></pre>\n<p>Output (The loop continues without exiting):</p>\n<pre><code>Producer produced: 0\nProducer produced: 1\nProducer produced: 2\nProducer produced: 3\nProducer produced: 4\n\n</code></pre>\n<p>The threads should be synchronized so that the buffer doesn't overflow with producer producing overflow data or goes underflow with the consumer trying to consume more data than it is present.</p>\n"},{"tags":["java","sql","spring","oracle","spring-data-jpa"],"answers":[{"comments":[{"owner":{"account_id":6076754,"reputation":6738,"user_id":4743869,"accept_rate":68,"display_name":"ByeBye"},"score":0,"creation_date":1489586178,"post_id":42811819,"comment_id":72735736,"body_markdown":"1. As I said, I can change it to one join, but query is good, as you described.","body":"1. As I said, I can change it to one join, but query is good, as you described."},{"owner":{"account_id":6076754,"reputation":6738,"user_id":4743869,"accept_rate":68,"display_name":"ByeBye"},"score":0,"creation_date":1489586220,"post_id":42811819,"comment_id":72735780,"body_markdown":"2,3. As you see I fetch only ids, no LazyLoading anywhere","body":"2,3. As you see I fetch only ids, no LazyLoading anywhere"},{"owner":{"account_id":6076754,"reputation":6738,"user_id":4743869,"accept_rate":68,"display_name":"ByeBye"},"score":0,"creation_date":1489586480,"post_id":42811819,"comment_id":72736024,"body_markdown":"4. nope, I remotely execute it from external machine","body":"4. nope, I remotely execute it from external machine"},{"owner":{"account_id":6076754,"reputation":6738,"user_id":4743869,"accept_rate":68,"display_name":"ByeBye"},"score":0,"creation_date":1489586562,"post_id":42811819,"comment_id":72736080,"body_markdown":"5. Unfortunately I have no freedom to chose DB, only Oracle :D","body":"5. Unfortunately I have no freedom to chose DB, only Oracle :D"},{"owner":{"account_id":1390639,"reputation":23879,"user_id":1321564,"accept_rate":71,"display_name":"Benjamin M"},"score":0,"creation_date":1489586658,"post_id":42811819,"comment_id":72736158,"body_markdown":"Hmm. Then I guess, you should start your Debugger and figure out where the code hangs. Maybe Hibernate still loads the whole object tree, even if the displayed query doesn&#39;t looks like this happens. Who knows. I already had lot&#39;s of cases where I ended up crying *Why, Hibernate, Why you do this to me? Whyyyy?*","body":"Hmm. Then I guess, you should start your Debugger and figure out where the code hangs. Maybe Hibernate still loads the whole object tree, even if the displayed query doesn&#39;t looks like this happens. Who knows. I already had lot&#39;s of cases where I ended up crying <i>Why, Hibernate, Why you do this to me? Whyyyy?</i>"},{"owner":{"account_id":6076754,"reputation":6738,"user_id":4743869,"accept_rate":68,"display_name":"ByeBye"},"score":0,"creation_date":1489586732,"post_id":42811819,"comment_id":72736226,"body_markdown":"Do you mean debugging into hibernate stuff?","body":"Do you mean debugging into hibernate stuff?"},{"owner":{"account_id":1390639,"reputation":23879,"user_id":1321564,"accept_rate":71,"display_name":"Benjamin M"},"score":1,"creation_date":1489587064,"post_id":42811819,"comment_id":72736503,"body_markdown":"Place a breakpoint inside your JPA Repository, and then step forward, forward, forward. Then you should be able to find the piece of code that takes a lot longer than the blink of an eye. Hope you find the error soon.","body":"Place a breakpoint inside your JPA Repository, and then step forward, forward, forward. Then you should be able to find the piece of code that takes a lot longer than the blink of an eye. Hope you find the error soon."},{"owner":{"account_id":177686,"reputation":35366,"user_id":409172,"accept_rate":50,"display_name":"Jon Heller"},"score":0,"creation_date":1489629168,"post_id":42811819,"comment_id":72759127,"body_markdown":"#4 could still be an issue depending on exactly how the application and database tool select records.  Maybe the application has an unusually low prefetch size; if it&#39;s gathering data one-row-at-a-time there will be a lot of extra network overhead.","body":"#4 could still be an issue depending on exactly how the application and database tool select records.  Maybe the application has an unusually low prefetch size; if it&#39;s gathering data one-row-at-a-time there will be a lot of extra network overhead."},{"owner":{"account_id":6076754,"reputation":6738,"user_id":4743869,"accept_rate":68,"display_name":"ByeBye"},"score":0,"creation_date":1489699025,"post_id":42811819,"comment_id":72798558,"body_markdown":"@JonHeller prefetch size was set to 10. After I changed it to 100 for this particular query it speed up by 15%. Still not as fast as on DB, but far better. Thanks","body":"@JonHeller prefetch size was set to 10. After I changed it to 100 for this particular query it speed up by 15%. Still not as fast as on DB, but far better. Thanks"}],"tags":[],"owner":{"account_id":1390639,"reputation":23879,"user_id":1321564,"accept_rate":71,"display_name":"Benjamin M"},"comment_count":9,"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1489586283,"creation_date":1489586063,"answer_id":42811819,"question_id":42810067,"body_markdown":"Multiple Possibilities:\r\n\r\n**1. The generated Query**\r\n\r\nThe generated query looks pretty fine to me. It&#39;s exactly the same as the query within your `@Query` annotation.\r\n\r\n**2. SQL Result to Java Object conversion**\r\n\r\nI don&#39;t know how big your tables are, but: Converting SQL Results to Java Objects takes some time. For small tables this could increase query time by 0-5%.\r\n\r\n**3. Lazy loading**\r\n\r\nYou didn&#39;t show the code for your entities. If you have `@OneToMany` or `@ManyToMany` relations, JPA will by default use Lazy Loading. This can really slow down everything by magnitudes.\r\n\r\n**4. Latency**\r\n\r\nIf you execute the SQL Query on the same machine where the SQL DB is, but your Java Application communicates over network with the SQL DB, it can result in much slower queries, too.\r\n\r\n(5. Wrong kind of DB. Seems like you build an object graph. Maybe have a look at Neo4j **`;-)`**)","title":"Query on DB is fast, but fetching by JPARepository is slow","body":"<p>Multiple Possibilities:</p>\n\n<p><strong>1. The generated Query</strong></p>\n\n<p>The generated query looks pretty fine to me. It's exactly the same as the query within your <code>@Query</code> annotation.</p>\n\n<p><strong>2. SQL Result to Java Object conversion</strong></p>\n\n<p>I don't know how big your tables are, but: Converting SQL Results to Java Objects takes some time. For small tables this could increase query time by 0-5%.</p>\n\n<p><strong>3. Lazy loading</strong></p>\n\n<p>You didn't show the code for your entities. If you have <code>@OneToMany</code> or <code>@ManyToMany</code> relations, JPA will by default use Lazy Loading. This can really slow down everything by magnitudes.</p>\n\n<p><strong>4. Latency</strong></p>\n\n<p>If you execute the SQL Query on the same machine where the SQL DB is, but your Java Application communicates over network with the SQL DB, it can result in much slower queries, too.</p>\n\n<p>(5. Wrong kind of DB. Seems like you build an object graph. Maybe have a look at Neo4j <strong><code>;-)</code></strong>)</p>\n"},{"tags":[],"owner":{"account_id":11087231,"reputation":1019,"user_id":8140473,"display_name":"Rohim Chou"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695192539,"creation_date":1695192539,"answer_id":77139929,"question_id":42810067,"body_markdown":"Had the same problem, expanding the jdbc `fetchSize` property resolved the issue for me:\r\n\r\n```java\r\n// adding the fetchSize QueryHint for the query\r\n@QueryHints(@QueryHint(name=&quot;org.hibernate.fetchSize&quot;, value=&quot;200&quot;))\r\n@Query(&quot;SELECT person.uuid FROM ....&quot;)\r\nSet&lt;String&gt; findByGrandParentId(final String parentId);\r\n\r\n// or set it globally, e.g., through application.properties\r\nspring.jpa.properties.hibernate.jdbc.fetch_size=200\r\n```\r\n\r\nThrough profiling, found that the bottleneck occurred while matching each ResultSet row to Entity object. Seems that each round trip to the DB slow down the overall performance in my case.\r\n\r\nFrom [Oracle JDBC Developer&#39;s Guide](https://docs.oracle.com/cd/E11882_01/java.112/e16548/resltset.htm#JJDBC28611) (emphasis mine):\r\n\r\n&gt; **By default, when Oracle JDBC runs a query, it retrieves a result set**\r\n&gt; **of 10 rows at a time** from the database cursor. This is the default\r\n&gt; Oracle row fetch size value. You can change the number of rows\r\n&gt; retrieved with each trip to the database cursor by changing the row\r\n&gt; fetch size value.\r\n&gt; \r\n&gt; Standard **JDBC also enables you to specify the number of rows fetched**\r\n&gt; **with each database round-trip for a query**, and this number is referred\r\n&gt; to as the fetch size. In Oracle JDBC, the row-prefetch value is used\r\n&gt; as the default fetch size in a statement object. Setting the fetch\r\n&gt; size overrides the row-prefetch setting and affects subsequent queries\r\n&gt; run through that statement object.\r\n\r\n\r\n","title":"Query on DB is fast, but fetching by JPARepository is slow","body":"<p>Had the same problem, expanding the jdbc <code>fetchSize</code> property resolved the issue for me:</p>\n<pre class=\"lang-java prettyprint-override\"><code>// adding the fetchSize QueryHint for the query\n@QueryHints(@QueryHint(name=&quot;org.hibernate.fetchSize&quot;, value=&quot;200&quot;))\n@Query(&quot;SELECT person.uuid FROM ....&quot;)\nSet&lt;String&gt; findByGrandParentId(final String parentId);\n\n// or set it globally, e.g., through application.properties\nspring.jpa.properties.hibernate.jdbc.fetch_size=200\n</code></pre>\n<p>Through profiling, found that the bottleneck occurred while matching each ResultSet row to Entity object. Seems that each round trip to the DB slow down the overall performance in my case.</p>\n<p>From <a href=\"https://docs.oracle.com/cd/E11882_01/java.112/e16548/resltset.htm#JJDBC28611\" rel=\"nofollow noreferrer\">Oracle JDBC Developer's Guide</a> (emphasis mine):</p>\n<blockquote>\n<p><strong>By default, when Oracle JDBC runs a query, it retrieves a result set</strong>\n<strong>of 10 rows at a time</strong> from the database cursor. This is the default\nOracle row fetch size value. You can change the number of rows\nretrieved with each trip to the database cursor by changing the row\nfetch size value.</p>\n<p>Standard <strong>JDBC also enables you to specify the number of rows fetched</strong>\n<strong>with each database round-trip for a query</strong>, and this number is referred\nto as the fetch size. In Oracle JDBC, the row-prefetch value is used\nas the default fetch size in a statement object. Setting the fetch\nsize overrides the row-prefetch setting and affects subsequent queries\nrun through that statement object.</p>\n</blockquote>\n"}],"owner":{"account_id":6076754,"reputation":6738,"user_id":4743869,"accept_rate":68,"display_name":"ByeBye"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":10361,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"accepted_answer_id":42811819,"answer_count":2,"score":3,"last_activity_date":1695192539,"creation_date":1489581659,"question_id":42810067,"body_markdown":"I have following tables in DB:\r\n\r\n`Person`, \r\n`Parent`, \r\n`GrandParent`\r\n`Parent - Person` is `OneToMany` relation (`Person` has `parentId`)\r\n`GrandParent - Parent` is `ManyToMany` relation (`grandparent_parent` table)\r\n\r\nI created in `PersonRepository` which extends `JPARepository` :\r\n\r\n\t@Query(&quot;SELECT person.uuid FROM Person person JOIN person.parent parent JOIN parent.grandparents grandparent WHERE grandparent.uuid = ?1&quot;)\r\n\tSet&lt;String&gt; findByGrandParentId(final String parentId);\r\n\r\nFor fetching all ids of `Person` which are under given `GrandParent`.\r\nThis SQL is created:\r\n\r\n\tSELECT\r\n\t   person0_.uuid as col_0_0_ \r\n\tFROM\r\n\t\tperson person0_ \r\n\tINNER JOIN\r\n\t\tparent parent1_ \r\n\t\t\ton person0_.parentid=parent1_.uuid \r\n\tINNER JOIN\r\n\t\tgrandparent_parent grandaparent_parent2_ \r\n\t\t\ton parent1_.uuid=grandaparent_parent2_.parentid \r\n\tINNER JOIN\r\n\t\tgrandparent parent3_ \r\n\t\t\ton grandaparent_parent2_.grandparentid=parent3_.uuid \r\n\tWHERE\r\n\t\tparent3_.uuid=&#39;13906f55-441c-45bd-bef6-8beefa4119c4&#39;\r\n\t\t\r\n\t\t\r\nI logged how much time repository needs fetch data, and it took (average) *~400ms* to fetch *~400* records.\r\nThen I execute the same SQL query on DB and each time query took no more than *50ms*.\r\n\r\nI know that this generated query is not optimized because we can only join two tables `GRANDPARENT_PARENT` and `PERSON`, but this is not the problem here, because such query is executed also below *50ms*.\r\n\r\nWhy I have such differences between fetching by repository and fetching in db? Is it possible to fix that?\r\n","title":"Query on DB is fast, but fetching by JPARepository is slow","body":"<p>I have following tables in DB:</p>\n\n<p><code>Person</code>, \n<code>Parent</code>, \n<code>GrandParent</code>\n<code>Parent - Person</code> is <code>OneToMany</code> relation (<code>Person</code> has <code>parentId</code>)\n<code>GrandParent - Parent</code> is <code>ManyToMany</code> relation (<code>grandparent_parent</code> table)</p>\n\n<p>I created in <code>PersonRepository</code> which extends <code>JPARepository</code> :</p>\n\n<pre><code>@Query(\"SELECT person.uuid FROM Person person JOIN person.parent parent JOIN parent.grandparents grandparent WHERE grandparent.uuid = ?1\")\nSet&lt;String&gt; findByGrandParentId(final String parentId);\n</code></pre>\n\n<p>For fetching all ids of <code>Person</code> which are under given <code>GrandParent</code>.\nThis SQL is created:</p>\n\n<pre><code>SELECT\n   person0_.uuid as col_0_0_ \nFROM\n    person person0_ \nINNER JOIN\n    parent parent1_ \n        on person0_.parentid=parent1_.uuid \nINNER JOIN\n    grandparent_parent grandaparent_parent2_ \n        on parent1_.uuid=grandaparent_parent2_.parentid \nINNER JOIN\n    grandparent parent3_ \n        on grandaparent_parent2_.grandparentid=parent3_.uuid \nWHERE\n    parent3_.uuid='13906f55-441c-45bd-bef6-8beefa4119c4'\n</code></pre>\n\n<p>I logged how much time repository needs fetch data, and it took (average) <em>~400ms</em> to fetch <em>~400</em> records.\nThen I execute the same SQL query on DB and each time query took no more than <em>50ms</em>.</p>\n\n<p>I know that this generated query is not optimized because we can only join two tables <code>GRANDPARENT_PARENT</code> and <code>PERSON</code>, but this is not the problem here, because such query is executed also below <em>50ms</em>.</p>\n\n<p>Why I have such differences between fetching by repository and fetching in db? Is it possible to fix that?</p>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":115344,"reputation":76329,"user_id":302916,"display_name":"Brian Roach"},"score":0,"creation_date":1391324159,"post_id":21507858,"comment_id":32470468,"body_markdown":"http://docs.oracle.com/javase/tutorial/essential/concurrency/sync.html","body":"<a href=\"http://docs.oracle.com/javase/tutorial/essential/concurrency/sync.html\" rel=\"nofollow noreferrer\">docs.oracle.com/javase/tutorial/essential/concurrency/sync.h&zwnj;&#8203;tml</a>"},{"owner":{"account_id":71739,"reputation":307163,"user_id":207421,"accept_rate":82,"display_name":"user207421"},"score":0,"creation_date":1391325408,"post_id":21507858,"comment_id":32470647,"body_markdown":"The synchronized ones are, err, synchronized. There is no such thing as &#39;ASynchronized&#39;.","body":"The synchronized ones are, err, synchronized. There is no such thing as &#39;ASynchronized&#39;."},{"owner":{"account_id":4802848,"reputation":2464,"user_id":3878948,"accept_rate":86,"display_name":"Rishabh Agarwal"},"score":0,"creation_date":1513016257,"post_id":21507858,"comment_id":82479082,"body_markdown":"Solution: https://stackoverflow.com/questions/1085709/what-does-synchronized-mean","body":"Solution: <a href=\"https://stackoverflow.com/questions/1085709/what-does-synchronized-mean\" title=\"what does synchronized mean\">stackoverflow.com/questions/1085709/what-does-synchronized-m&zwnj;&#8203;ean</a>"},{"owner":{"account_id":10896024,"reputation":299,"user_id":8009979,"display_name":"ADev"},"score":0,"creation_date":1628587305,"post_id":21507858,"comment_id":121454554,"body_markdown":"I was reading about HashSet in Java and I found out that HashSet is also a non synchronized class in Java.","body":"I was reading about HashSet in Java and I found out that HashSet is also a non synchronized class in Java."}],"answers":[{"tags":[],"owner":{"account_id":1252466,"reputation":79549,"user_id":1212596,"accept_rate":52,"display_name":"Paul Draper"},"comment_count":0,"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1516109945,"creation_date":1391323521,"answer_id":21507875,"question_id":21507858,"body_markdown":"A synchronized collection implies that the class is thread safe. (You can have non-synchronized collections that are also thread safe, but that is a topic for about thousand theses another day.)\r\n\r\nThe collections synchronize mutations by obtaining locks to make sure that other threads don&#39;t corrupt the state.\r\n\r\nBasically, use the non-synchronized versions, unless you have multiple threads.\r\n\r\n(And if you don&#39;t know, a thread is essentially a line of execution within a program. Some programs have multiple threads, all sharing the same code and memory.)","title":"What is the difference between synchronized and non-synchronized collection classes in Java?","body":"<p>A synchronized collection implies that the class is thread safe. (You can have non-synchronized collections that are also thread safe, but that is a topic for about thousand theses another day.)</p>\n\n<p>The collections synchronize mutations by obtaining locks to make sure that other threads don't corrupt the state.</p>\n\n<p>Basically, use the non-synchronized versions, unless you have multiple threads.</p>\n\n<p>(And if you don't know, a thread is essentially a line of execution within a program. Some programs have multiple threads, all sharing the same code and memory.)</p>\n"},{"tags":[],"owner":{"account_id":2265631,"reputation":984,"user_id":1994394,"display_name":"spgodara"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1391323949,"creation_date":1391323949,"answer_id":21507925,"question_id":21507858,"body_markdown":"Collection classes are not synchronized by default. But if you want a synchronized collection, you can use static method  `java.util.Collections.synchronizedCollection(Collection&lt;T&gt; c)`. It will create wrapper over your collection object. So, actually, your collection object will not be synchronized, but you will access your object&#39;s method via synchronized methods in wrapper object.","title":"What is the difference between synchronized and non-synchronized collection classes in Java?","body":"<p>Collection classes are not synchronized by default. But if you want a synchronized collection, you can use static method  <code>java.util.Collections.synchronizedCollection(Collection&lt;T&gt; c)</code>. It will create wrapper over your collection object. So, actually, your collection object will not be synchronized, but you will access your object's method via synchronized methods in wrapper object.</p>\n"},{"tags":[],"owner":{"account_id":13598455,"reputation":1,"user_id":9809742,"display_name":"shubham gaikwad"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1527586345,"creation_date":1527586345,"answer_id":50580971,"question_id":21507858,"body_markdown":"**Non synchronized** -It is not-thread safe and can&#39;t be shared between many threads without proper synchronization code.\r\nWhile,\r\n **Synchronized**- It is thread-safe and can be shared with many threads.","title":"What is the difference between synchronized and non-synchronized collection classes in Java?","body":"<p><strong>Non synchronized</strong> -It is not-thread safe and can't be shared between many threads without proper synchronization code.\nWhile,\n <strong>Synchronized</strong>- It is thread-safe and can be shared with many threads.</p>\n"},{"tags":[],"owner":{"account_id":9607057,"reputation":331,"user_id":7132764,"accept_rate":33,"display_name":"A.N.Gupta"},"comment_count":0,"down_vote_count":0,"up_vote_count":7,"is_accepted":false,"score":7,"last_activity_date":1552475606,"creation_date":1552475606,"answer_id":55140561,"question_id":21507858,"body_markdown":"In Synchronization, If we are executing something then we need to wait for it to finish before moving to the another task. \r\n   \r\nCollection classes are not synchronized by default. The collection object is mutable that means once creating the object and that object is calling two threads at a time but one thread is changing the value of the object then it can be effected by another object.  So, it is not thread safe.\r\n\r\nWe can explicitly synchronized collection using static method    **_java.util.Collections.synchronizedCollection(Collection&lt;&lt;T&gt;T&gt; c)_**\r\n\r\n","title":"What is the difference between synchronized and non-synchronized collection classes in Java?","body":"<p>In Synchronization, If we are executing something then we need to wait for it to finish before moving to the another task. </p>\n\n<p>Collection classes are not synchronized by default. The collection object is mutable that means once creating the object and that object is calling two threads at a time but one thread is changing the value of the object then it can be effected by another object.  So, it is not thread safe.</p>\n\n<p>We can explicitly synchronized collection using static method    <strong><em>java.util.Collections.synchronizedCollection(Collection&lt;T> c)</em></strong></p>\n"},{"comments":[{"owner":{"account_id":6236403,"reputation":10241,"user_id":4851565,"accept_rate":84,"display_name":"entpnerd"},"score":0,"creation_date":1580630996,"post_id":60024101,"comment_id":106155483,"body_markdown":"I&#39;m not convinced that just because a class is synchronized means that it&#39;s thread-safe. See: https://stackoverflow.com/q/21792030/4851565 Same thing for classes that are not synchronized.","body":"I&#39;m not convinced that just because a class is synchronized means that it&#39;s thread-safe. See: <a href=\"https://stackoverflow.com/q/21792030/4851565\">stackoverflow.com/q/21792030/4851565</a> Same thing for classes that are not synchronized."},{"owner":{"account_id":14640428,"reputation":2276,"user_id":10573167,"display_name":"Sahan Amarsha"},"score":0,"creation_date":1580647439,"post_id":60024101,"comment_id":106158506,"body_markdown":"Synchronized is just an one basic method of achieving thread-safe. [https://stackoverflow.com/questions/1085709/what-does-synchronized-mean/34261294#34261294]","body":"Synchronized is just an one basic method of achieving thread-safe. [<a href=\"https://stackoverflow.com/questions/1085709/what-does-synchronized-mean/34261294#34261294]\" title=\"what does synchronized mean\">stackoverflow.com/questions/1085709/what-does-synchronized-&zwnj;&#8203;mean/&hellip;</a>"}],"tags":[],"owner":{"account_id":14640428,"reputation":2276,"user_id":10573167,"display_name":"Sahan Amarsha"},"comment_count":2,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1580647268,"creation_date":1580628938,"answer_id":60024101,"question_id":21507858,"body_markdown":"Synchronized basically means that **only one thread** can access methods of that particular class at any given time. StringBuffer is an example of a synchronized class. A Synchronized class is a thread-safe class.\r\n\r\nNon-Synchronized means that **two or more threads** can access the methods of that particular class at any given time. StringBuilder is an example of a non-synchronized class. Generally, a non-synchronized class is not thread-safe. (but some non-synchronized classes are thread-safe)","title":"What is the difference between synchronized and non-synchronized collection classes in Java?","body":"<p>Synchronized basically means that <strong>only one thread</strong> can access methods of that particular class at any given time. StringBuffer is an example of a synchronized class. A Synchronized class is a thread-safe class.</p>\n\n<p>Non-Synchronized means that <strong>two or more threads</strong> can access the methods of that particular class at any given time. StringBuilder is an example of a non-synchronized class. Generally, a non-synchronized class is not thread-safe. (but some non-synchronized classes are thread-safe)</p>\n"}],"owner":{"account_id":2096654,"reputation":351,"user_id":3036311,"accept_rate":33,"display_name":"Incredible"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":50810,"favorite_count":0,"down_vote_count":2,"up_vote_count":11,"answer_count":5,"score":9,"last_activity_date":1695192521,"creation_date":1391323390,"question_id":21507858,"body_markdown":"I was reading about Java&#39;s collections and then I read this line:\r\n\r\n&gt; &quot;None of the collection classes are synchronized, but as you will see\r\n&gt; later in this chapter, it is possible to obtain synchronized\r\n&gt; versions.&quot;\r\n\r\nCan anyone tell me what is the difference between synchronized and non-synchronized collections in Java?","title":"What is the difference between synchronized and non-synchronized collection classes in Java?","body":"<p>I was reading about Java's collections and then I read this line:</p>\n\n<blockquote>\n  <p>\"None of the collection classes are synchronized, but as you will see\n  later in this chapter, it is possible to obtain synchronized\n  versions.\"</p>\n</blockquote>\n\n<p>Can anyone tell me what is the difference between synchronized and non-synchronized collections in Java?</p>\n"},{"tags":["java","xpath","jaxb"],"owner":{"account_id":2185983,"reputation":2728,"user_id":1934402,"accept_rate":92,"display_name":"yaserso"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":17,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1695192425,"creation_date":1695192425,"question_id":77139917,"body_markdown":"I have a JAXB annotated class:\r\n```java\r\npackage com.stackexchange.question;\r\n\r\nimport jakarta.xml.bind.annotation.*;\r\n\r\nimport lombok.experimental.FieldNameConstants;\r\nimport lombok.Data;\r\n\r\nimport org.eclipse.persistance.oxm.annotations.XmlCDATA;\r\n\r\n@Data\r\n@FieldNameConstants\r\n@XmlRootElement(name = &quot;root&quot;)\r\n@XmlAccessorType(XmlAccessType.FIELD)\r\npublic class Sample {\r\n    @XmlCDATA\r\n    @XmlElement(name = &quot;fall&quot;, nillable = true)\r\n    private String fall;\r\n\r\n    @XmlElement(name = &quot;number&quot;)\r\n    private Number number;\r\n}\r\n\r\n@Data\r\n@FieldNameConstants\r\n@XmlAccessorType(XmlAccessType.FIELD)\r\npublic class Number {\r\n    @XmlCDATA\r\n    @XmlElement(name = &quot;classroom&quot;, nillable = true)\r\n    private String classroom;\r\n}\r\n```\r\n\r\nI need a way to generate the XPath at compile-time. For example, I want a way to go about it in a type-safe manner. Currently, I&#39;m encapsulating all of the field classes within the parent class so I can do `Sample.Number.class` + `Sample.Fields.number` and then looping through using `getEnclosingClass` before using the annotations to get the names, and finally generate the XPath through that.\r\n\r\nIs there a better way to do it? I already have all the JAXB annotated classes, so I essentially have a skeleton of the XML through the class, but I can&#39;t generate the XPath without a hacky way of doing it.\r\n\r\nI don&#39;t mind using a library if it provides this feature.","title":"How to get XPath from a JAXB annotated class at compile time without an instance of the class?","body":"<p>I have a JAXB annotated class:</p>\n<pre class=\"lang-java prettyprint-override\"><code>package com.stackexchange.question;\n\nimport jakarta.xml.bind.annotation.*;\n\nimport lombok.experimental.FieldNameConstants;\nimport lombok.Data;\n\nimport org.eclipse.persistance.oxm.annotations.XmlCDATA;\n\n@Data\n@FieldNameConstants\n@XmlRootElement(name = &quot;root&quot;)\n@XmlAccessorType(XmlAccessType.FIELD)\npublic class Sample {\n    @XmlCDATA\n    @XmlElement(name = &quot;fall&quot;, nillable = true)\n    private String fall;\n\n    @XmlElement(name = &quot;number&quot;)\n    private Number number;\n}\n\n@Data\n@FieldNameConstants\n@XmlAccessorType(XmlAccessType.FIELD)\npublic class Number {\n    @XmlCDATA\n    @XmlElement(name = &quot;classroom&quot;, nillable = true)\n    private String classroom;\n}\n</code></pre>\n<p>I need a way to generate the XPath at compile-time. For example, I want a way to go about it in a type-safe manner. Currently, I'm encapsulating all of the field classes within the parent class so I can do <code>Sample.Number.class</code> + <code>Sample.Fields.number</code> and then looping through using <code>getEnclosingClass</code> before using the annotations to get the names, and finally generate the XPath through that.</p>\n<p>Is there a better way to do it? I already have all the JAXB annotated classes, so I essentially have a skeleton of the XML through the class, but I can't generate the XPath without a hacky way of doing it.</p>\n<p>I don't mind using a library if it provides this feature.</p>\n"},{"tags":["java","maven","exception","gemfire","geode"],"answers":[{"tags":[],"owner":{"account_id":24204646,"reputation":3,"user_id":18162025,"display_name":"ash22"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1695192272,"creation_date":1695192272,"answer_id":77139897,"question_id":77116919,"body_markdown":"For anyone who might face this issue in future, it was because of the geode-log4j jar. I had another folder where I add slf4j jars in the project. Due to technical reasons, I am not allowed to remove those.Once I removed the jar this exception disappeared. ","title":"ClassCastException when creating geode ClientCacheFactory object","body":"<p>For anyone who might face this issue in future, it was because of the geode-log4j jar. I had another folder where I add slf4j jars in the project. Due to technical reasons, I am not allowed to remove those.Once I removed the jar this exception disappeared.</p>\n"}],"owner":{"account_id":24204646,"reputation":3,"user_id":18162025,"display_name":"ash22"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":34,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":77139897,"answer_count":1,"score":0,"last_activity_date":1695192272,"creation_date":1694851765,"question_id":77116919,"body_markdown":"I am using gemfire and trying to load client cache using apache geode in my maven project. When ClientCacheFactory is created, I am getting a ClassCastException\r\n\r\n```\r\njava.lang.ClassCastException: org.apache.logging.slf4j.SLF4JLogger cannot be cast to org.apache.logging.log4j.core.Logger\r\n  at org.apache.geode.logging.log4j.internal.impl.Log4jLoggingProvider.getRootLoggerContext(Log4jLoggingProvider.java:105) ~[geode-log4j-9.10.5.jar:na] \r\n\r\n  at org.apache.geode.logging.log4j.internal.impl.Log4jloggingProvider.getConfiguration (Log4jloggingProvider. java:109) ~[geode-log4j-9.10.5.jar:na]\r\n\r\nat org.apache.geode.logging.log4j.internāl.impl.log4jloggingProvider.isUsingGemFireDefaultConfig (Log4jloggingProvider.java:94) ~[geode-log4j-9.10.5.jar:na]\r\n\r\nat org.apache.geode.logging.log4j.internal.impl.Log4jloggingProvider.shouldUpdateLoglevels (Log4jloggingProvider.java:143) ~[geode-logj-9.10.5.jar:na]\r\n\r\nat org.apache.geode.logging.log4j.internal.impl.log4jloggingProvider.configure (Log4jLoggingProvider.Java:121) &quot;[geode-log4j-9.10.5.jar:na]\r\n\r\nat org.apache.geode.logging.internal.Configuration.configChanged (Configuration. Java:143) &quot; [geode-core-9.10.5.jar:na]\r\n\r\nat org.apache.geode.logging.internal.Configuration. initialize (Configuration.java:132) &quot; [geode-core-9.10.5.jar:na]\r\n\r\nat org.apache.geode.logging.internal.LoggingSession.createSession (LoggingSession.java:69) &quot;[geode-core-9.10.5.jar:na]\r\n\r\nat org.apache.geode.distributed.internal.InternalDistributedSystem.initialize (InternalDistributedSystem. java:704) ~[geode-core-9.10.5.jar:na]\r\n\r\nat org.apache.geode.distributed.internal. InternalDistributedSystem.access$200 (InternalDistributedSystem. java:135) ~[geode-core-9.10.5.]ar:na\r\n\r\nat org.apache.geode.distributed.internal. InternalDistributedSystemșBuilder.build (InternalDistributedSystem. java:3036) ~[geode-core-9.10.5.jar:na]\r\n\r\nat org.apache.geode.distributed. internal.InternalDistributedSystem.connectInternal (InternalDistributedSystem.java:290) ~[geode-core-9.10.5.jar:na]\r\n\r\nat org.apache.geode.distributed.&#238;nternal.InternalDistributedSystem.connectInternal (InternalDistributedsystem. java:216) ~[geode-core-9.10.5.jar:na]\r\n\r\nat org.apache.geode.cache.client.ClientCacheFactory.connectInternalDistributedSystem (ClientCacheFactory. java:280) ~ [geode-core-9.10.5.jar:na]\r\n\r\nat org.apache.geode.cache.client.ClientCacheFactory.basicCreate (ClientCacheFactory.java:250) - [geode-core-9.10.5.jar:na]\r\n\r\nat org.apache.geode.cache.client.ClientCacheFactory.create (ClientCacheFactory. java:216) &quot;[geode-core-9.10.5.jar:na]\r\n.....\r\n\r\n```\r\n\r\n\r\n\r\n\r\n\r\n\r\nI have tried removing log4j-over-slf4j,log4j-api and log4j-core and tried adding slf4j-log4j12 but still I get this exception. Now I know geode-core internally includes log4j, so I have excluded log4j and log4j-to-slf4j dependencies as well. But issue still persists. It would be really helpful if I could get some pointers regrading the exception.\r\n\r\nCurrently I have the following dependencies :\r\n1.log4j-slf4j-impl\r\n2.log4j-api\r\n3.log4j-core\r\n4.log4j-over-slf4j\r\n5.slf4j-api\r\n6.slf4j-log4j12 \r\n\r\nI am using geode-core-9.10.5 with both geode-log4j and geode-logging included as well.","title":"ClassCastException when creating geode ClientCacheFactory object","body":"<p>I am using gemfire and trying to load client cache using apache geode in my maven project. When ClientCacheFactory is created, I am getting a ClassCastException</p>\n<pre><code>java.lang.ClassCastException: org.apache.logging.slf4j.SLF4JLogger cannot be cast to org.apache.logging.log4j.core.Logger\n  at org.apache.geode.logging.log4j.internal.impl.Log4jLoggingProvider.getRootLoggerContext(Log4jLoggingProvider.java:105) ~[geode-log4j-9.10.5.jar:na] \n\n  at org.apache.geode.logging.log4j.internal.impl.Log4jloggingProvider.getConfiguration (Log4jloggingProvider. java:109) ~[geode-log4j-9.10.5.jar:na]\n\nat org.apache.geode.logging.log4j.internāl.impl.log4jloggingProvider.isUsingGemFireDefaultConfig (Log4jloggingProvider.java:94) ~[geode-log4j-9.10.5.jar:na]\n\nat org.apache.geode.logging.log4j.internal.impl.Log4jloggingProvider.shouldUpdateLoglevels (Log4jloggingProvider.java:143) ~[geode-logj-9.10.5.jar:na]\n\nat org.apache.geode.logging.log4j.internal.impl.log4jloggingProvider.configure (Log4jLoggingProvider.Java:121) &quot;[geode-log4j-9.10.5.jar:na]\n\nat org.apache.geode.logging.internal.Configuration.configChanged (Configuration. Java:143) &quot; [geode-core-9.10.5.jar:na]\n\nat org.apache.geode.logging.internal.Configuration. initialize (Configuration.java:132) &quot; [geode-core-9.10.5.jar:na]\n\nat org.apache.geode.logging.internal.LoggingSession.createSession (LoggingSession.java:69) &quot;[geode-core-9.10.5.jar:na]\n\nat org.apache.geode.distributed.internal.InternalDistributedSystem.initialize (InternalDistributedSystem. java:704) ~[geode-core-9.10.5.jar:na]\n\nat org.apache.geode.distributed.internal. InternalDistributedSystem.access$200 (InternalDistributedSystem. java:135) ~[geode-core-9.10.5.]ar:na\n\nat org.apache.geode.distributed.internal. InternalDistributedSystemșBuilder.build (InternalDistributedSystem. java:3036) ~[geode-core-9.10.5.jar:na]\n\nat org.apache.geode.distributed. internal.InternalDistributedSystem.connectInternal (InternalDistributedSystem.java:290) ~[geode-core-9.10.5.jar:na]\n\nat org.apache.geode.distributed.înternal.InternalDistributedSystem.connectInternal (InternalDistributedsystem. java:216) ~[geode-core-9.10.5.jar:na]\n\nat org.apache.geode.cache.client.ClientCacheFactory.connectInternalDistributedSystem (ClientCacheFactory. java:280) ~ [geode-core-9.10.5.jar:na]\n\nat org.apache.geode.cache.client.ClientCacheFactory.basicCreate (ClientCacheFactory.java:250) - [geode-core-9.10.5.jar:na]\n\nat org.apache.geode.cache.client.ClientCacheFactory.create (ClientCacheFactory. java:216) &quot;[geode-core-9.10.5.jar:na]\n.....\n\n</code></pre>\n<p>I have tried removing log4j-over-slf4j,log4j-api and log4j-core and tried adding slf4j-log4j12 but still I get this exception. Now I know geode-core internally includes log4j, so I have excluded log4j and log4j-to-slf4j dependencies as well. But issue still persists. It would be really helpful if I could get some pointers regrading the exception.</p>\n<p>Currently I have the following dependencies :\n1.log4j-slf4j-impl\n2.log4j-api\n3.log4j-core\n4.log4j-over-slf4j\n5.slf4j-api\n6.slf4j-log4j12</p>\n<p>I am using geode-core-9.10.5 with both geode-log4j and geode-logging included as well.</p>\n"},{"tags":["java","mapping","warnings","mapstruct","ignore"],"comments":[{"owner":{"account_id":29073167,"reputation":1013,"user_id":22270964,"display_name":"Maksim Eliseev"},"score":0,"creation_date":1693832796,"post_id":77037058,"comment_id":135808306,"body_markdown":"`I am mapping with mapstruct from B to A class` - No, you are mapping A to B","body":"<code>I am mapping with mapstruct from B to A class</code> - No, you are mapping A to B"},{"owner":{"account_id":3052937,"reputation":17914,"user_id":2587166,"accept_rate":83,"display_name":"Luca Basso Ricci"},"score":0,"creation_date":1693833824,"post_id":77037058,"comment_id":135808528,"body_markdown":"ignore t3 is way to solve this problem","body":"ignore t3 is way to solve this problem"}],"answers":[{"comments":[{"owner":{"account_id":29362670,"reputation":11,"user_id":22497094,"display_name":"JohnN"},"score":0,"creation_date":1693827652,"post_id":77037123,"comment_id":135807288,"body_markdown":"I tried it and get &quot;Unknown property &quot;t3&quot; in result type&quot;","body":"I tried it and get &quot;Unknown property &quot;t3&quot; in result type&quot;"},{"owner":{"account_id":22581348,"reputation":113,"user_id":16765942,"display_name":"Gabriela83"},"score":0,"creation_date":1693829418,"post_id":77037123,"comment_id":135807641,"body_markdown":"Are you by any chance using Lombok?","body":"Are you by any chance using Lombok?"},{"owner":{"account_id":29073167,"reputation":1013,"user_id":22270964,"display_name":"Maksim Eliseev"},"score":0,"creation_date":1693832924,"post_id":77037123,"comment_id":135808331,"body_markdown":"@JohnN please provide the code of mapping (put it to your question), because this solution works 100 percent","body":"@JohnN please provide the code of mapping (put it to your question), because this solution works 100 percent"},{"owner":{"account_id":1128956,"reputation":19765,"user_id":1115491,"display_name":"Filip"},"score":0,"creation_date":1694007152,"post_id":77037123,"comment_id":135834570,"body_markdown":"This is the right answer when mapping from A to B as asked in the question","body":"This is the right answer when mapping from A to B as asked in the question"}],"tags":[],"owner":{"account_id":22581348,"reputation":113,"user_id":16765942,"display_name":"Gabriela83"},"comment_count":4,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1693824741,"creation_date":1693824741,"answer_id":77037123,"question_id":77037058,"body_markdown":"You can use `@Mapping(target = &quot;t3&quot;, ignore = true)` even if it belongs to the &quot;source&quot; not the &quot;target&quot; of the mapping. ","title":"Mapstruct ignore field, warning unmapped target properties","body":"<p>You can use <code>@Mapping(target = &quot;t3&quot;, ignore = true)</code> even if it belongs to the &quot;source&quot; not the &quot;target&quot; of the mapping.</p>\n"},{"tags":[],"owner":{"account_id":7673258,"reputation":1688,"user_id":6200354,"display_name":"atish.s"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1694050907,"creation_date":1694050907,"answer_id":77056112,"question_id":77037058,"body_markdown":"I made unmapped policies (for source and target) to throw errors and ignore the field `t3` for both mappings.\r\n\r\nIt worked fine with my testing.\r\n\r\n    import org.mapstruct.BeanMapping;\r\n    import org.mapstruct.Mapper;\r\n    import org.mapstruct.Mapping;\r\n    import org.mapstruct.ReportingPolicy;\r\n    import org.mapstruct.factory.Mappers;\r\n    \r\n    \r\n    @Mapper(unmappedTargetPolicy = ReportingPolicy.ERROR, unmappedSourcePolicy = ReportingPolicy.ERROR)\r\n    public interface ABMapper {\r\n    \r\n        ABMapper mapper = Mappers.getMapper(ABMapper.class);\r\n    \r\n        @Mapping(source = &quot;t1&quot;, target = &quot;t1&quot;)\r\n        @Mapping(source = &quot;t2&quot;, target = &quot;t2&quot;)\r\n        @Mapping(target = &quot;t3&quot;, ignore = true)\r\n        B toB(A a);\r\n    \r\n        @Mapping(source = &quot;t1&quot;, target = &quot;t1&quot;)\r\n        @Mapping(source = &quot;t2&quot;, target = &quot;t2&quot;)\r\n        @BeanMapping(ignoreUnmappedSourceProperties = { &quot;t3&quot; })\r\n        A toA(B b);\r\n    }\r\n\r\nSource: https://github.com/mapstruct/mapstruct/issues/1718","title":"Mapstruct ignore field, warning unmapped target properties","body":"<p>I made unmapped policies (for source and target) to throw errors and ignore the field <code>t3</code> for both mappings.</p>\n<p>It worked fine with my testing.</p>\n<pre><code>import org.mapstruct.BeanMapping;\nimport org.mapstruct.Mapper;\nimport org.mapstruct.Mapping;\nimport org.mapstruct.ReportingPolicy;\nimport org.mapstruct.factory.Mappers;\n\n\n@Mapper(unmappedTargetPolicy = ReportingPolicy.ERROR, unmappedSourcePolicy = ReportingPolicy.ERROR)\npublic interface ABMapper {\n\n    ABMapper mapper = Mappers.getMapper(ABMapper.class);\n\n    @Mapping(source = &quot;t1&quot;, target = &quot;t1&quot;)\n    @Mapping(source = &quot;t2&quot;, target = &quot;t2&quot;)\n    @Mapping(target = &quot;t3&quot;, ignore = true)\n    B toB(A a);\n\n    @Mapping(source = &quot;t1&quot;, target = &quot;t1&quot;)\n    @Mapping(source = &quot;t2&quot;, target = &quot;t2&quot;)\n    @BeanMapping(ignoreUnmappedSourceProperties = { &quot;t3&quot; })\n    A toA(B b);\n}\n</code></pre>\n<p>Source: <a href=\"https://github.com/mapstruct/mapstruct/issues/1718\" rel=\"nofollow noreferrer\">https://github.com/mapstruct/mapstruct/issues/1718</a></p>\n"}],"owner":{"account_id":29362670,"reputation":11,"user_id":22497094,"display_name":"JohnN"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":206,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":2,"score":1,"last_activity_date":1695192246,"creation_date":1693824131,"question_id":77037058,"body_markdown":"I am using mapstruct in Java and I need to get rid of warning: Warning: Unmapped target properties: &quot;t3&quot;. I have the following structure:\r\n```java\r\nclass A {\r\n\tString t1;\r\n\tString t2;\r\n}\r\n\r\nclass B {\r\n\tString t1;\r\n\tString t2;\r\n\tString t3;\r\n}\r\n```\r\n\r\nI am mapping with mapstruct from B to A class.\r\n```\r\nB toB(A a);\r\n```\r\n\r\nI would like to ignore just one field (t3), but `@Mapping` required target property, so I cannot use `@Mapping(source = &quot;t3&quot;, ignore = true)`. Is there any solution for that?\r\n\r\n\r\nTRYING: I was trying to use `@Mapping` and use `unmappedTargetPolicy = ReportingPolicy.IGNORE`, but I want to ignore only specific field.\r\n\r\nEXPECT: I would like to ignore just one field (t3), but `@Mapping` required target property, so I cannot use `@Mapping(source = &quot;t3&quot;, ignore = true)`. Is there any solution for that?","title":"Mapstruct ignore field, warning unmapped target properties","body":"<p>I am using mapstruct in Java and I need to get rid of warning: Warning: Unmapped target properties: &quot;t3&quot;. I have the following structure:</p>\n<pre class=\"lang-java prettyprint-override\"><code>class A {\n    String t1;\n    String t2;\n}\n\nclass B {\n    String t1;\n    String t2;\n    String t3;\n}\n</code></pre>\n<p>I am mapping with mapstruct from B to A class.</p>\n<pre><code>B toB(A a);\n</code></pre>\n<p>I would like to ignore just one field (t3), but <code>@Mapping</code> required target property, so I cannot use <code>@Mapping(source = &quot;t3&quot;, ignore = true)</code>. Is there any solution for that?</p>\n<p>TRYING: I was trying to use <code>@Mapping</code> and use <code>unmappedTargetPolicy = ReportingPolicy.IGNORE</code>, but I want to ignore only specific field.</p>\n<p>EXPECT: I would like to ignore just one field (t3), but <code>@Mapping</code> required target property, so I cannot use <code>@Mapping(source = &quot;t3&quot;, ignore = true)</code>. Is there any solution for that?</p>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":2485939,"reputation":19426,"user_id":2164365,"accept_rate":40,"display_name":"Abra"},"score":1,"creation_date":1660732075,"post_id":73385913,"comment_id":129600283,"body_markdown":"I believe this will help you: [How to get a list of current open windows/process with Java?](https://stackoverflow.com/questions/54686/how-to-get-a-list-of-current-open-windows-process-with-java) Alternatively, try [jps](https://docs.oracle.com/en/java/javase/17/docs/specs/man/jps.html).","body":"I believe this will help you: <a href=\"https://stackoverflow.com/questions/54686/how-to-get-a-list-of-current-open-windows-process-with-java\">How to get a list of current open windows/process with Java?</a> Alternatively, try <a href=\"https://docs.oracle.com/en/java/javase/17/docs/specs/man/jps.html\" rel=\"nofollow noreferrer\">jps</a>."}],"answers":[{"comments":[{"owner":{"account_id":7693984,"reputation":6097,"user_id":5829191,"accept_rate":63,"display_name":"rozerro"},"score":0,"creation_date":1660744151,"post_id":73386190,"comment_id":129604980,"body_markdown":"How did you get command line string from tasklist output? I could get process nane, pid, session name, memory and session number. But to detect the pid which is related to `forum.jar` there should be a way to obtain the command line string from there.","body":"How did you get command line string from tasklist output? I could get process nane, pid, session name, memory and session number. But to detect the pid which is related to <code>forum.jar</code> there should be a way to obtain the command line string from there."},{"owner":{"account_id":440158,"reputation":323231,"user_id":829571,"accept_rate":94,"display_name":"assylias"},"score":0,"creation_date":1660745395,"post_id":73386190,"comment_id":129605490,"body_markdown":"My bad it does not work, see my edit.","body":"My bad it does not work, see my edit."}],"tags":[],"owner":{"account_id":440158,"reputation":323231,"user_id":829571,"accept_rate":94,"display_name":"assylias"},"comment_count":2,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1660745417,"creation_date":1660729197,"answer_id":73386190,"question_id":73385913,"body_markdown":"You could run\r\n\r\n    wmic process where caption=&quot;java.exe&quot; get commandline,description,processid\r\n\r\nto get the list of processes and their associated command line like in your screenshot. Then you get the ID of the command you want to kill and kill it with `taskkill /pid xxx`.","title":"How to find and close running Win-Process which is Java app from within other Java app?","body":"<p>You could run</p>\n<pre><code>wmic process where caption=&quot;java.exe&quot; get commandline,description,processid\n</code></pre>\n<p>to get the list of processes and their associated command line like in your screenshot. Then you get the ID of the command you want to kill and kill it with <code>taskkill /pid xxx</code>.</p>\n"}],"owner":{"account_id":7693984,"reputation":6097,"user_id":5829191,"accept_rate":63,"display_name":"rozerro"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":108,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"accepted_answer_id":73386190,"answer_count":1,"score":3,"last_activity_date":1695191948,"creation_date":1660727994,"question_id":73385913,"body_markdown":"There is windows process which is actually a java application (java.exe). I need to close it from within other java application (other running .jar) which is probably will also be named as `java.exe` in windows taskbar. \r\n\r\nTo do the task we would normally do it this way\r\n\r\n    Runtime.getRuntime().exec(KILL + `java.exe`);\r\n\r\nBut there would be some `java.exe` processes in windows taskbar. So how to find the one I need? In this case it is `forum.jar`.\r\n\r\nActually this jar was started from .bat file (if it makes any difference) - it is `process.bat` as it seen in the screenshot. \r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/lZhH7.png","title":"How to find and close running Win-Process which is Java app from within other Java app?","body":"<p>There is windows process which is actually a java application (java.exe). I need to close it from within other java application (other running .jar) which is probably will also be named as <code>java.exe</code> in windows taskbar.</p>\n<p>To do the task we would normally do it this way</p>\n<pre><code>Runtime.getRuntime().exec(KILL + `java.exe`);\n</code></pre>\n<p>But there would be some <code>java.exe</code> processes in windows taskbar. So how to find the one I need? In this case it is <code>forum.jar</code>.</p>\n<p>Actually this jar was started from .bat file (if it makes any difference) - it is <code>process.bat</code> as it seen in the screenshot.</p>\n<p><a href=\"https://i.stack.imgur.com/lZhH7.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/lZhH7.png\" alt=\"enter image description here\" /></a></p>\n"},{"tags":["java","lombok"],"answers":[{"comments":[{"owner":{"account_id":8909757,"reputation":599,"user_id":6650434,"accept_rate":75,"display_name":"H.abidi"},"score":5,"creation_date":1516269678,"post_id":48318222,"comment_id":83622384,"body_markdown":"I was trying to use a new builder directly. Thanks for your answer.","body":"I was trying to use a new builder directly. Thanks for your answer."}],"tags":[],"owner":{"account_id":2139538,"reputation":42521,"user_id":1898563,"accept_rate":78,"display_name":"Michael"},"comment_count":1,"down_vote_count":2,"up_vote_count":56,"is_accepted":false,"score":54,"last_activity_date":1644364629,"creation_date":1516268917,"answer_id":48318222,"question_id":48318097,"body_markdown":"`@Builder` already produces public methods, it&#39;s just the constructor that&#39;s package-private. The reason is that they intend for you to use the static `builder()` method, which is public, instead of using the constructor directly:\r\n\r\n    Foo foo = Foo.builder()\r\n        .property(&quot;hello, world&quot;)\r\n        .build();\r\n\r\nIf you really, really, *really* want the constructor to be public (there seems to be some suggestion that other reflection-based libraries might require it), then Lombok will never override anything that you&#39;ve already declared explicitly, so you can declare a skeleton like this with a public constructor and Lombok will fill in the rest, without changing the constructor to package-private or anything.\r\n\r\n    @Builder\r\n    public class Foo\r\n    {\r\n        private final String property;\r\n    \r\n        public static class FooBuilder\r\n        {\r\n            public FooBuilder() { }\r\n    \r\n            // Lombok will fill in the fields and methods\r\n        }\r\n    }\r\n\r\nThis general strategy of allowing partial implementations to override default behaviour applies to most (maybe all) other Lombok annotations too. If your class is annotated with `@ToString` but you already declared a `toString` method, it will leave yours alone.\r\n\r\nJust to show you everything that gets generated, I wrote the following class:\r\n\r\n    @Builder\r\n    public class Foo\r\n    {\r\n        private final String property;\r\n    }\r\n\r\nI then ran it through [delombok](https://projectlombok.org/features/delombok) to see everything that was generated. As you can see, everything is public:\r\n\r\n    public class Foo\r\n    {\r\n        private final String property;\r\n    \r\n        @java.beans.ConstructorProperties({&quot;property&quot;})\r\n        Foo(final String property) {\r\n            this.property = property;\r\n        }\r\n    \r\n        public static FooBuilder builder() {\r\n            return new FooBuilder();\r\n        }\r\n    \r\n        public static class FooBuilder\r\n        {\r\n            private String property;\r\n    \r\n            FooBuilder() { }\r\n    \r\n            public FooBuilder property(final String property) {\r\n                this.property = property;\r\n                return this;\r\n            }\r\n    \r\n            public Foo build() {\r\n                return new Foo(property);\r\n            }\r\n    \r\n            public String toString() {\r\n                return &quot;Foo.FooBuilder(property=&quot; + this.property + &quot;)&quot;;\r\n            }\r\n        }\r\n    }\r\n\r\n","title":"Is it possible to make Lombok&#39;s builder public?","body":"<p><code>@Builder</code> already produces public methods, it's just the constructor that's package-private. The reason is that they intend for you to use the static <code>builder()</code> method, which is public, instead of using the constructor directly:</p>\n<pre><code>Foo foo = Foo.builder()\n    .property(&quot;hello, world&quot;)\n    .build();\n</code></pre>\n<p>If you really, really, <em>really</em> want the constructor to be public (there seems to be some suggestion that other reflection-based libraries might require it), then Lombok will never override anything that you've already declared explicitly, so you can declare a skeleton like this with a public constructor and Lombok will fill in the rest, without changing the constructor to package-private or anything.</p>\n<pre><code>@Builder\npublic class Foo\n{\n    private final String property;\n\n    public static class FooBuilder\n    {\n        public FooBuilder() { }\n\n        // Lombok will fill in the fields and methods\n    }\n}\n</code></pre>\n<p>This general strategy of allowing partial implementations to override default behaviour applies to most (maybe all) other Lombok annotations too. If your class is annotated with <code>@ToString</code> but you already declared a <code>toString</code> method, it will leave yours alone.</p>\n<p>Just to show you everything that gets generated, I wrote the following class:</p>\n<pre><code>@Builder\npublic class Foo\n{\n    private final String property;\n}\n</code></pre>\n<p>I then ran it through <a href=\"https://projectlombok.org/features/delombok\" rel=\"noreferrer\">delombok</a> to see everything that was generated. As you can see, everything is public:</p>\n<pre><code>public class Foo\n{\n    private final String property;\n\n    @java.beans.ConstructorProperties({&quot;property&quot;})\n    Foo(final String property) {\n        this.property = property;\n    }\n\n    public static FooBuilder builder() {\n        return new FooBuilder();\n    }\n\n    public static class FooBuilder\n    {\n        private String property;\n\n        FooBuilder() { }\n\n        public FooBuilder property(final String property) {\n            this.property = property;\n            return this;\n        }\n\n        public Foo build() {\n            return new Foo(property);\n        }\n\n        public String toString() {\n            return &quot;Foo.FooBuilder(property=&quot; + this.property + &quot;)&quot;;\n        }\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2599898,"reputation":103,"user_id":2507373,"display_name":"S&#233;rgio Andaluz Ramos"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1536833101,"creation_date":1536833101,"answer_id":52311386,"question_id":48318097,"body_markdown":"The problem with this builder annotation is that, if you delombok you&#39;ll see, the generated constructor for the builder has no access indicator (public, private, protected) therefore is only visible within the same package.\r\nThis would work if the extended classes were in the same package.\r\n\r\nI&#39;m having the same problem and I think that lombok does not support this, for now.\r\nI was able to find the feature request in here https://github.com/rzwitserloot/lombok/issues/1489\r\n\r\nMy suggestion is to hard implement builder pattern in this class.","title":"Is it possible to make Lombok&#39;s builder public?","body":"<p>The problem with this builder annotation is that, if you delombok you'll see, the generated constructor for the builder has no access indicator (public, private, protected) therefore is only visible within the same package.\nThis would work if the extended classes were in the same package.</p>\n\n<p>I'm having the same problem and I think that lombok does not support this, for now.\nI was able to find the feature request in here <a href=\"https://github.com/rzwitserloot/lombok/issues/1489\" rel=\"nofollow noreferrer\">https://github.com/rzwitserloot/lombok/issues/1489</a></p>\n\n<p>My suggestion is to hard implement builder pattern in this class.</p>\n"},{"tags":[],"owner":{"account_id":9818803,"reputation":958,"user_id":7274408,"display_name":"Brad"},"comment_count":0,"down_vote_count":1,"up_vote_count":3,"is_accepted":false,"score":2,"last_activity_date":1542376296,"creation_date":1542376296,"answer_id":53339189,"question_id":48318097,"body_markdown":"I have found this neat workaround:\r\n\r\n    import lombok.Builder;\r\n    import lombok.Getter;\r\n    import lombok.Setter;\r\n    \r\n    @Getter\r\n    @Setter\r\n    @Builder\r\n    public class Customer {\r\n        private String id;\r\n        private String name;\r\n    \r\n        public static MessageBuilder builder() {return new CustomerBuilder();}\r\n    }","title":"Is it possible to make Lombok&#39;s builder public?","body":"<p>I have found this neat workaround:</p>\n\n<pre><code>import lombok.Builder;\nimport lombok.Getter;\nimport lombok.Setter;\n\n@Getter\n@Setter\n@Builder\npublic class Customer {\n    private String id;\n    private String name;\n\n    public static MessageBuilder builder() {return new CustomerBuilder();}\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":73589,"reputation":5327,"user_id":211794,"accept_rate":58,"display_name":"Ashok Koyi"},"score":1,"creation_date":1557158741,"post_id":54814876,"comment_id":98662895,"body_markdown":"Thats not the question. If we need to use Builder class explicitly within masptruct, this is a huge pain. The generated constructor is package private","body":"Thats not the question. If we need to use Builder class explicitly within masptruct, this is a huge pain. The generated constructor is package private"},{"owner":{"account_id":73589,"reputation":5327,"user_id":211794,"accept_rate":58,"display_name":"Ashok Koyi"},"score":0,"creation_date":1557159269,"post_id":54814876,"comment_id":98663101,"body_markdown":"As of now, I&#39;m getting around this problem for mapstruct by using ```@ObjectFactory\n  public UserResponse.UserResponseBuilder resolveBuilder() {\n    return UserResponse.builder();\n  }```","body":"As of now, I&#39;m getting around this problem for mapstruct by using <code>@ObjectFactory   public UserResponse.UserResponseBuilder resolveBuilder() {     return UserResponse.builder();   }</code>"}],"tags":[],"owner":{"account_id":14888517,"reputation":237,"user_id":10750980,"display_name":"J.Luan"},"comment_count":2,"down_vote_count":2,"up_vote_count":20,"is_accepted":false,"score":18,"last_activity_date":1550777656,"creation_date":1550777656,"answer_id":54814876,"question_id":48318097,"body_markdown":"The problem is you are using @Builder in the wrong way.\r\n\r\nWhen `Builder Pattern` is used, you only need to use the static method to invoke it and then build, for example:  \r\n \r\n`MyClass instance = MyClass.builder().build();` . \r\n\r\nPlease do not `new` the `MyClassBuilder` again, it breaks the encapsulation the pattern has since you are directly using the inner `MyClassBuilder` class. This constructor is been hided from outside, that&#39;s why you get the not accessible error. Instead it provides you the static method `builder()`. \r\n","title":"Is it possible to make Lombok&#39;s builder public?","body":"<p>The problem is you are using @Builder in the wrong way.</p>\n\n<p>When <code>Builder Pattern</code> is used, you only need to use the static method to invoke it and then build, for example:  </p>\n\n<p><code>MyClass instance = MyClass.builder().build();</code> . </p>\n\n<p>Please do not <code>new</code> the <code>MyClassBuilder</code> again, it breaks the encapsulation the pattern has since you are directly using the inner <code>MyClassBuilder</code> class. This constructor is been hided from outside, that's why you get the not accessible error. Instead it provides you the static method <code>builder()</code>. </p>\n"},{"tags":[],"owner":{"account_id":3795830,"reputation":6437,"user_id":3150948,"accept_rate":70,"display_name":"Amer Qarabsa"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1570808356,"creation_date":1570808356,"answer_id":58344545,"question_id":48318097,"body_markdown":"as mentioned you can use the builder, now instead of user property builder() will return the instance create so you can treat as normal builder ( no need to use property)\r\n\r\n    instance = MyClass.MyClassBuilder().property1(value1).property1(value2).build();\r\n\r\n","title":"Is it possible to make Lombok&#39;s builder public?","body":"<p>as mentioned you can use the builder, now instead of user property builder() will return the instance create so you can treat as normal builder ( no need to use property)</p>\n\n<pre><code>instance = MyClass.MyClassBuilder().property1(value1).property1(value2).build();\n</code></pre>\n"},{"tags":[],"owner":{"account_id":26503501,"reputation":51,"user_id":20140048,"display_name":"Chetan Patil"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1695191799,"creation_date":1694880091,"answer_id":77118548,"question_id":48318097,"body_markdown":"You can simply change access level using \r\n\r\n    @Builder(access = AccessLevel.PUBLIC)\r\n\r\n","title":"Is it possible to make Lombok&#39;s builder public?","body":"<p>You can simply change access level using</p>\n<pre><code>@Builder(access = AccessLevel.PUBLIC)\n</code></pre>\n"}],"owner":{"account_id":8909757,"reputation":599,"user_id":6650434,"accept_rate":75,"display_name":"H.abidi"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":22511,"favorite_count":0,"down_vote_count":0,"up_vote_count":32,"answer_count":6,"score":32,"last_activity_date":1695191799,"creation_date":1516268557,"question_id":48318097,"body_markdown":"I am using Lombok library in my project and I am not able to use a class annotated with `@Builder` in outer packages.\r\n\r\nIs there a way to make the builder public?\r\n\r\n    MyClass instance = new MyClass.MyClassBuilder().build();\r\n\r\nThe error is:\r\n\r\n&gt; &#39;MyClassBuilder()&#39; is not public in\r\n&gt; &#39;com.foo.MyClass.MyClassBuilder&#39;. Cannot be accessed\r\n&gt; from outside package","title":"Is it possible to make Lombok&#39;s builder public?","body":"<p>I am using Lombok library in my project and I am not able to use a class annotated with <code>@Builder</code> in outer packages.</p>\n\n<p>Is there a way to make the builder public?</p>\n\n<pre><code>MyClass instance = new MyClass.MyClassBuilder().build();\n</code></pre>\n\n<p>The error is:</p>\n\n<blockquote>\n  <p>'MyClassBuilder()' is not public in\n  'com.foo.MyClass.MyClassBuilder'. Cannot be accessed\n  from outside package</p>\n</blockquote>\n"},{"tags":["java","android","kotlin","unit-testing","jacoco"],"owner":{"account_id":21456851,"reputation":21,"user_id":15808334,"display_name":"Jay Patel"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":121,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1695191535,"creation_date":1695186910,"question_id":77139458,"body_markdown":"So here i want to exclude all files of `cc.mekanism.chatconcept.databinding` in my project and here is my file filter:\r\n\r\n```\r\ndef fileFilter = [\r\n        // data binding\r\n        &#39;android/databinding/**/*.class&#39;,\r\n        &#39;**/android/databinding/*Binding.class&#39;,\r\n        &#39;**/android/databinding/*&#39;,\r\n        &#39;**/androidx/databinding/*&#39;,\r\n        &#39;**/BR.*&#39;,\r\n        // android\r\n        &#39;**/R.class&#39;,\r\n        &#39;**/R$*.class&#39;,\r\n        &#39;**/BuildConfig.*&#39;,\r\n        &#39;**/Manifest*.*&#39;,\r\n        &#39;**/*Test*.*&#39;,\r\n        &#39;**/Binding/**&#39;,\r\n        &#39;android/**/*.*&#39;,\r\n        // kotlin\r\n        &#39;**/*MapperImpl*.*&#39;,\r\n        &#39;**/*$ViewInjector*.*&#39;,\r\n        &#39;**/*$ViewBinder*.*&#39;,\r\n        &#39;**/BuildConfig.*&#39;,\r\n        &#39;**/*Component*.*&#39;,\r\n        &#39;**/*BR*.*&#39;,\r\n        &#39;**/Manifest*.*&#39;,\r\n        &#39;**/*$Lambda$*.*&#39;,\r\n        &#39;**/*Companion*.*&#39;,\r\n        &#39;**/*Module*.*&#39;,\r\n        &#39;**/*Dagger*.*&#39;,\r\n        &#39;**/*Hilt*.*&#39;,\r\n        &#39;**/*MembersInjector*.*&#39;,\r\n        &#39;**/*_MembersInjector.class&#39;,\r\n        &#39;**/*_Factory*.*&#39;,\r\n        &#39;**/*_Provide*Factory*.*&#39;,\r\n        &#39;**/*Extensions*.*&#39;,\r\n        // sealed and data classes\r\n        &#39;**/*$Result.*&#39;,\r\n        &#39;**/*$Result$*.*&#39;,\r\n        // adapters generated by moshi\r\n        &#39;**/*JsonAdapter.*&#39;\r\n]\r\n```\r\n\r\nIs there any working way to exclude whole package from test or specific files like in compose we have files like ListScreen.kt, tried all ways but nothing seems working. My gradle version is ***8.0.2.***\r\n\r\ntried adding package like:\r\n\r\n```\r\n cc/mekanism/chatconcept/databinding/**\r\n```\r\n\r\nbut this also doesn&#39;t work.","title":"In jacoco test coverage report how to exclude whole packages?? or some specific files?","body":"<p>So here i want to exclude all files of <code>cc.mekanism.chatconcept.databinding</code> in my project and here is my file filter:</p>\n<pre><code>def fileFilter = [\n        // data binding\n        'android/databinding/**/*.class',\n        '**/android/databinding/*Binding.class',\n        '**/android/databinding/*',\n        '**/androidx/databinding/*',\n        '**/BR.*',\n        // android\n        '**/R.class',\n        '**/R$*.class',\n        '**/BuildConfig.*',\n        '**/Manifest*.*',\n        '**/*Test*.*',\n        '**/Binding/**',\n        'android/**/*.*',\n        // kotlin\n        '**/*MapperImpl*.*',\n        '**/*$ViewInjector*.*',\n        '**/*$ViewBinder*.*',\n        '**/BuildConfig.*',\n        '**/*Component*.*',\n        '**/*BR*.*',\n        '**/Manifest*.*',\n        '**/*$Lambda$*.*',\n        '**/*Companion*.*',\n        '**/*Module*.*',\n        '**/*Dagger*.*',\n        '**/*Hilt*.*',\n        '**/*MembersInjector*.*',\n        '**/*_MembersInjector.class',\n        '**/*_Factory*.*',\n        '**/*_Provide*Factory*.*',\n        '**/*Extensions*.*',\n        // sealed and data classes\n        '**/*$Result.*',\n        '**/*$Result$*.*',\n        // adapters generated by moshi\n        '**/*JsonAdapter.*'\n]\n</code></pre>\n<p>Is there any working way to exclude whole package from test or specific files like in compose we have files like ListScreen.kt, tried all ways but nothing seems working. My gradle version is <em><strong>8.0.2.</strong></em></p>\n<p>tried adding package like:</p>\n<pre><code> cc/mekanism/chatconcept/databinding/**\n</code></pre>\n<p>but this also doesn't work.</p>\n"},{"tags":["java","parallel-processing","testng","testng-dataprovider"],"owner":{"account_id":14014033,"reputation":699,"user_id":10121996,"display_name":"Sobhit Sharma"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":21,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1695191332,"creation_date":1695191332,"question_id":77139805,"body_markdown":"I am writing tests for my apis using testng in parallel. I have also used dataprovider to data insertion. But while running in parallel, my assertions failing due to mismatch where as api response is correct but its the data provider which is returning the value. Example\r\n\r\n&lt;!-- begin snippet: js hide: false console: true babel: false --&gt;\r\n\r\n&lt;!-- language: lang-html --&gt;\r\n\r\n    @Test(groups = {\r\n                &quot;QA-CRE&quot;, &quot;Regression&quot;, &quot;BuildVerification&quot;}, priority = 86,\r\n                dataProvider = &quot;listC&quot;,\r\n                dataProviderClass = country.class)\r\n        public void test1(String usecase) throws IOException {\r\n\r\n            this.responseData = coreRestapi(cspUid, readExcel(TEST_DATA_PATH, 3, 9, 1), usecase);\r\n\r\n            if (this.responseData.getStatusCode() == 200) {\r\n                this.responseData.then().\r\n                        assertThat()\r\n                        //fails here where as api response matches while coming from data provider to usecase but here it fails\r\n                        .body(&quot;usecase&quot;, equalTo(usecase));\r\n            } else {\r\n                Assert.fail(&quot;&quot;);\r\n            }\r\n       }\r\n       \r\n\r\n    @DataProvider(name = &quot;listC&quot;)\r\n        public static Object[][] listC() {\r\n            return new Object[][]{\r\n                    {\r\n                            &quot;USA&quot;\r\n                    },\r\n                    {\r\n                            INDIA.toString()\r\n                    },\r\n            };\r\n        }\r\n\r\n&lt;!-- end snippet --&gt;\r\n\r\n\r\nSo as per my debug, it works fine in sending right usecase and like wise response comes from the server but while assertion it fails. What could be the reason and also how to make my tests thread safe. \r\nI am testng.xml to run by providing parallel=&quot;methods&quot; thread-count=&quot;5&quot;","title":"Testng parallel execution fails due to variable value mismatch","body":"<p>I am writing tests for my apis using testng in parallel. I have also used dataprovider to data insertion. But while running in parallel, my assertions failing due to mismatch where as api response is correct but its the data provider which is returning the value. Example</p>\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-html lang-html prettyprint-override\"><code>@Test(groups = {\n            \"QA-CRE\", \"Regression\", \"BuildVerification\"}, priority = 86,\n            dataProvider = \"listC\",\n            dataProviderClass = country.class)\n    public void test1(String usecase) throws IOException {\n\n        this.responseData = coreRestapi(cspUid, readExcel(TEST_DATA_PATH, 3, 9, 1), usecase);\n\n        if (this.responseData.getStatusCode() == 200) {\n            this.responseData.then().\n                    assertThat()\n                    //fails here where as api response matches while coming from data provider to usecase but here it fails\n                    .body(\"usecase\", equalTo(usecase));\n        } else {\n            Assert.fail(\"\");\n        }\n   }\n   \n\n@DataProvider(name = \"listC\")\n    public static Object[][] listC() {\n        return new Object[][]{\n                {\n                        \"USA\"\n                },\n                {\n                        INDIA.toString()\n                },\n        };\n    }</code></pre>\r\n</div>\r\n</div>\r\n</p>\n<p>So as per my debug, it works fine in sending right usecase and like wise response comes from the server but while assertion it fails. What could be the reason and also how to make my tests thread safe.\nI am testng.xml to run by providing parallel=&quot;methods&quot; thread-count=&quot;5&quot;</p>\n"},{"tags":["java","eclipse","jar"],"comments":[{"owner":{"account_id":8692823,"reputation":31810,"user_id":6505250,"display_name":"howlger"},"score":5,"creation_date":1554721373,"post_id":55571046,"comment_id":97842536,"body_markdown":"That&#39;s a restriction by the [Java Platform Module System (JPMS)](https://en.wikipedia.org/wiki/Java_Platform_Module_System), not by Eclipse (so don&#39;t shut the messenger). If you delete the file `module-info.java` in your default package (which disables JPMS) it should work with Java 9 or higher.","body":"That&#39;s a restriction by the <a href=\"https://en.wikipedia.org/wiki/Java_Platform_Module_System\" rel=\"nofollow noreferrer\">Java Platform Module System (JPMS)</a>, not by Eclipse (so don&#39;t shut the messenger). If you delete the file <code>module-info.java</code> in your default package (which disables JPMS) it should work with Java 9 or higher."},{"owner":{"account_id":14316872,"reputation":963,"user_id":10341428,"display_name":"Krann Sock"},"score":6,"creation_date":1554722355,"post_id":55571046,"comment_id":97843059,"body_markdown":"This happens when not creating the module-info.java.","body":"This happens when not creating the module-info.java."},{"owner":{"account_id":14316872,"reputation":963,"user_id":10341428,"display_name":"Krann Sock"},"score":0,"creation_date":1554722940,"post_id":55571046,"comment_id":97843424,"body_markdown":"I uploaded a video showing my problem on a freshly installed 2019-03: https://youtu.be/6fQ8ZPprVyo","body":"I uploaded a video showing my problem on a freshly installed 2019-03: <a href=\"https://youtu.be/6fQ8ZPprVyo\" rel=\"nofollow noreferrer\">youtu.be/6fQ8ZPprVyo</a>"},{"owner":{"account_id":8692823,"reputation":31810,"user_id":6505250,"display_name":"howlger"},"score":1,"creation_date":1554723674,"post_id":55571046,"comment_id":97843873,"body_markdown":"I see. Solves moving the _JRE System Library_ from the _Modulepath_ to the _Classpath_ your issue?","body":"I see. Solves moving the <i>JRE System Library</i> from the <i>Modulepath</i> to the <i>Classpath</i> your issue?"},{"owner":{"account_id":14316872,"reputation":963,"user_id":10341428,"display_name":"Krann Sock"},"score":0,"creation_date":1554723918,"post_id":55571046,"comment_id":97844013,"body_markdown":"As you can see at roughly 34 seconds into the video, it&#39;s inside the classpath already (I never had it anywhere else). Funnily, after moving it to the module path, the errors disappear. This does not work on the real project, however, where I originally found the error.","body":"As you can see at roughly 34 seconds into the video, it&#39;s inside the classpath already (I never had it anywhere else). Funnily, after moving it to the module path, the errors disappear. This does not work on the real project, however, where I originally found the error."},{"owner":{"account_id":8692823,"reputation":31810,"user_id":6505250,"display_name":"howlger"},"score":3,"creation_date":1554724025,"post_id":55571046,"comment_id":97844073,"body_markdown":"Everything must be on the classpath, the JAR and the _JRE System Library_ (the video shows only the JAR being on the classpath).","body":"Everything must be on the classpath, the JAR and the <i>JRE System Library</i> (the video shows only the JAR being on the classpath)."}],"answers":[{"comments":[{"owner":{"account_id":14316872,"reputation":963,"user_id":10341428,"display_name":"Krann Sock"},"score":1,"creation_date":1554729897,"post_id":55572922,"comment_id":97847792,"body_markdown":"It&#39;s not possible to add the JRE to the Classpath.","body":"It&#39;s not possible to add the JRE to the Classpath."},{"owner":{"account_id":8692823,"reputation":31810,"user_id":6505250,"display_name":"howlger"},"score":0,"creation_date":1554731639,"post_id":55572922,"comment_id":97848977,"body_markdown":"@KrannSock I have extended my answer by how this is possible.","body":"@KrannSock I have extended my answer by how this is possible."},{"owner":{"account_id":14316872,"reputation":963,"user_id":10341428,"display_name":"Krann Sock"},"score":1,"creation_date":1554732435,"post_id":55572922,"comment_id":97849502,"body_markdown":"@howlher No matter what you do - it gets added back to the Modulepath.","body":"@howlher No matter what you do - it gets added back to the Modulepath."},{"owner":{"account_id":8692823,"reputation":31810,"user_id":6505250,"display_name":"howlger"},"score":0,"creation_date":1554736340,"post_id":55572922,"comment_id":97851954,"body_markdown":"@KrannSock Yes, you&#39;re right. As far as I know, this was possible in previous versions. Is repacking the JAR an option for you?","body":"@KrannSock Yes, you&#39;re right. As far as I know, this was possible in previous versions. Is repacking the JAR an option for you?"},{"owner":{"account_id":14316872,"reputation":963,"user_id":10341428,"display_name":"Krann Sock"},"score":0,"creation_date":1554749775,"post_id":55572922,"comment_id":97858546,"body_markdown":"I could repack them manually, there are like 5 of them. Any instructions on what do do with those? Or do you mean just changing the folder/package names inside the jar? They are all very old libraries from ~2004. Is it not possible to use (partial) package paths of the JRE System Library any more in a jar file? To be honest, I also don&#39;t see a reason for this to be necessary - but apparently those libraries do :-)","body":"I could repack them manually, there are like 5 of them. Any instructions on what do do with those? Or do you mean just changing the folder/package names inside the jar? They are all very old libraries from ~2004. Is it not possible to use (partial) package paths of the JRE System Library any more in a jar file? To be honest, I also don&#39;t see a reason for this to be necessary - but apparently those libraries do :-)"},{"owner":{"account_id":8692823,"reputation":31810,"user_id":6505250,"display_name":"howlger"},"score":0,"creation_date":1554750347,"post_id":55572922,"comment_id":97858790,"body_markdown":"@KrannSock Yes, change the folder/package names inside the JAR. `javax.swing.foo` would work, but I would not recommend it. You should not use package names that are used by others, especially not of the standard library. Previously this was only a recommendation. Since Java 9 (with JPMS) this can cause problems like yours.","body":"@KrannSock Yes, change the folder/package names inside the JAR. <code>javax.swing.foo</code> would work, but I would not recommend it. You should not use package names that are used by others, especially not of the standard library. Previously this was only a recommendation. Since Java 9 (with JPMS) this can cause problems like yours."},{"owner":{"account_id":14316872,"reputation":963,"user_id":10341428,"display_name":"Krann Sock"},"score":0,"creation_date":1554751298,"post_id":55572922,"comment_id":97859231,"body_markdown":"Even javax.swing.foo doesn&#39;t work (this is the case in one of those libraries where it&#39;s javax.swing.xyz with only .gifs in it - you better don&#39;t ask...). If you add the explanation to your answer I&#39;ll accept it. Thank you very much!","body":"Even javax.swing.foo doesn&#39;t work (this is the case in one of those libraries where it&#39;s javax.swing.xyz with only .gifs in it - you better don&#39;t ask...). If you add the explanation to your answer I&#39;ll accept it. Thank you very much!"},{"owner":{"account_id":8692823,"reputation":31810,"user_id":6505250,"display_name":"howlger"},"score":0,"creation_date":1554756074,"post_id":55572922,"comment_id":97861257,"body_markdown":"@KrannSock I&#39;ve edited my answer. Tell me if anything is missing.","body":"@KrannSock I&#39;ve edited my answer. Tell me if anything is missing."},{"owner":{"account_id":124062,"reputation":23813,"user_id":318921,"accept_rate":67,"display_name":"Neil Bartlett"},"score":0,"creation_date":1574456369,"post_id":55572922,"comment_id":104253733,"body_markdown":"I have this problem BUT both the JRE System Library and the referenced library JAR files are on the Classpath, nothing is on the modulepath. FML.","body":"I have this problem BUT both the JRE System Library and the referenced library JAR files are on the Classpath, nothing is on the modulepath. FML."},{"owner":{"account_id":8692823,"reputation":31810,"user_id":6505250,"display_name":"howlger"},"score":0,"creation_date":1574509246,"post_id":55572922,"comment_id":104263182,"body_markdown":"@NeilBartlett In Java 9+ the _JRE System Library_ is per se on the _Modulepath_, not on the _Classpath_ (I have corrected my answer accordingly): see [this answer by Stephan Herrmann for details](https://stackoverflow.com/a/53824670/6505250). What compiler compliance level have you set in your project? Which Java version and which Eclipse version do you use?","body":"@NeilBartlett In Java 9+ the <i>JRE System Library</i> is per se on the <i>Modulepath</i>, not on the <i>Classpath</i> (I have corrected my answer accordingly): see <a href=\"https://stackoverflow.com/a/53824670/6505250\">this answer by Stephan Herrmann for details</a>. What compiler compliance level have you set in your project? Which Java version and which Eclipse version do you use?"},{"owner":{"account_id":124062,"reputation":23813,"user_id":318921,"accept_rate":67,"display_name":"Neil Bartlett"},"score":2,"creation_date":1574672678,"post_id":55572922,"comment_id":104300601,"body_markdown":"@howlger Thanks for the link. Unfortunately adding module-info.java is not a practical solution because as soon as you do this, you require all dependencies of the project to be modules, or at least to have automatic module names. Many of my dependencies do not have the Automatic-Module-Name header so I have to use the filename. So `com.google.guava_21.0.0.jar` becomes `requires com.google.guava.21.0.0` but this is a syntax error in the module-info! Catch 22...","body":"@howlger Thanks for the link. Unfortunately adding module-info.java is not a practical solution because as soon as you do this, you require all dependencies of the project to be modules, or at least to have automatic module names. Many of my dependencies do not have the Automatic-Module-Name header so I have to use the filename. So <code>com.google.guava_21.0.0.jar</code> becomes <code>requires com.google.guava.21.0.0</code> but this is a syntax error in the module-info! Catch 22..."},{"owner":{"account_id":124062,"reputation":23813,"user_id":318921,"accept_rate":67,"display_name":"Neil Bartlett"},"score":0,"creation_date":1574673020,"post_id":55572922,"comment_id":104300780,"body_markdown":"@howlger You said that the JRE System Library is &quot;per se on the modulepath, not the on the classpath&quot;. Maybe there is a bug in Eclipse 2019-06 because the JRE System Library is clearly shown under classpath in the Java Build Path properties page, NOT under modulepath.","body":"@howlger You said that the JRE System Library is &quot;per se on the modulepath, not the on the classpath&quot;. Maybe there is a bug in Eclipse 2019-06 because the JRE System Library is clearly shown under classpath in the Java Build Path properties page, NOT under modulepath."},{"owner":{"account_id":8692823,"reputation":31810,"user_id":6505250,"display_name":"howlger"},"score":0,"creation_date":1574693639,"post_id":55572922,"comment_id":104312131,"body_markdown":"@NeilBartlett In Eclipse 2019-09 I was not able to reproduce this. The _JRE System Library_ is shown on the modulepath, cannot be moved to the classpath (like a JAR) and even after directly editing the `.classpath` file (removing the line `&lt;attribute name=&quot;module&quot; value=&quot;true&quot;/&gt;`) the _JRE System Library_ is still shown on the modulepath. [Please upgrade](https://wiki.eclipse.org/FAQ_How_do_I_upgrade_Eclipse_IDE%3F#Always_enable_major_upgrades) and try again.","body":"@NeilBartlett In Eclipse 2019-09 I was not able to reproduce this. The <i>JRE System Library</i> is shown on the modulepath, cannot be moved to the classpath (like a JAR) and even after directly editing the <code>.classpath</code> file (removing the line <code>&lt;attribute name=&quot;module&quot; value=&quot;true&quot;&#47;&gt;</code>) the <i>JRE System Library</i> is still shown on the modulepath. <a href=\"https://wiki.eclipse.org/FAQ_How_do_I_upgrade_Eclipse_IDE%3F#Always_enable_major_upgrades\" rel=\"nofollow noreferrer\">Please upgrade</a> and try again."},{"owner":{"account_id":1263338,"reputation":1300,"user_id":1221159,"accept_rate":67,"display_name":"Barad&#233;"},"score":0,"creation_date":1636990554,"post_id":55572922,"comment_id":123698774,"body_markdown":"Hi, is there any command (maybe for maven) which lists me the dependencies which add these packages? I would like to exclude them manually since they seem to be broken for Java11.","body":"Hi, is there any command (maybe for maven) which lists me the dependencies which add these packages? I would like to exclude them manually since they seem to be broken for Java11."}],"tags":[],"owner":{"account_id":8692823,"reputation":31810,"user_id":6505250,"display_name":"howlger"},"comment_count":14,"down_vote_count":0,"up_vote_count":57,"is_accepted":true,"score":57,"last_activity_date":1574509241,"creation_date":1554724559,"answer_id":55572922,"question_id":55571046,"body_markdown":"This is **caused by**\r\n\r\n - a **JAR on the *Classpath*** that contains the **package** `java.awt` **that also exists in the system library** but the\r\n - ***JRE System Library*** is **on the *Modulepath***\r\n\r\nIn the [Java Platform Module System (JPMS)][1] it is not allowed to use the same package in more than one module. If the *Modulepath* and the *Classpath* is used, everything on the *Classpath* is handled as the `&lt;unnamed&gt;` module (in your case the package `java.awt` exists in the system module `java.desktop` and also via the JAR on the *Classpath* in the module `&lt;unnamed&gt;`).\r\n\r\nSince the *JRE System Library* cannot be moved from the *Modulepath* to the *Classpath* (see [this answer by Stephan Herrmann for details][2]), you only have the following options:\r\n\r\n - Set the compiler compliance to 1.8 (as you already mentioned)\r\n - **Rebuilt the JAR** to **avoid Java system library package names inside the JAR** (if reflection is used, additional code changes may be necessary):\r\n  - If you have the source code, change the package names (e.g. change the package and subpackae `java` to `java_util` and `javax` to `javax_util`) and recreate the JAR\r\n  - If you have only the `.class` files you have to decompile the `.class` files first\r\n\r\n\r\n  [1]: https://en.wikipedia.org/wiki/Java_Platform_Module_System\r\n  [2]: https://stackoverflow.com/a/53824670/6505250","title":"Eclipse is confused by imports (&quot;accessible from more than one module&quot;)","body":"<p>This is <strong>caused by</strong></p>\n\n<ul>\n<li>a <strong>JAR on the <em>Classpath</em></strong> that contains the <strong>package</strong> <code>java.awt</code> <strong>that also exists in the system library</strong> but the</li>\n<li><strong><em>JRE System Library</em></strong> is <strong>on the <em>Modulepath</em></strong></li>\n</ul>\n\n<p>In the <a href=\"https://en.wikipedia.org/wiki/Java_Platform_Module_System\" rel=\"noreferrer\">Java Platform Module System (JPMS)</a> it is not allowed to use the same package in more than one module. If the <em>Modulepath</em> and the <em>Classpath</em> is used, everything on the <em>Classpath</em> is handled as the <code>&lt;unnamed&gt;</code> module (in your case the package <code>java.awt</code> exists in the system module <code>java.desktop</code> and also via the JAR on the <em>Classpath</em> in the module <code>&lt;unnamed&gt;</code>).</p>\n\n<p>Since the <em>JRE System Library</em> cannot be moved from the <em>Modulepath</em> to the <em>Classpath</em> (see <a href=\"https://stackoverflow.com/a/53824670/6505250\">this answer by Stephan Herrmann for details</a>), you only have the following options:</p>\n\n<ul>\n<li>Set the compiler compliance to 1.8 (as you already mentioned)</li>\n<li><strong>Rebuilt the JAR</strong> to <strong>avoid Java system library package names inside the JAR</strong> (if reflection is used, additional code changes may be necessary):\n\n<ul>\n<li>If you have the source code, change the package names (e.g. change the package and subpackae <code>java</code> to <code>java_util</code> and <code>javax</code> to <code>javax_util</code>) and recreate the JAR</li>\n<li>If you have only the <code>.class</code> files you have to decompile the <code>.class</code> files first</li>\n</ul></li>\n</ul>\n"},{"comments":[{"owner":{"account_id":2360785,"reputation":11123,"user_id":2067492,"display_name":"matt"},"score":0,"creation_date":1591598155,"post_id":59294690,"comment_id":110105196,"body_markdown":"&quot;Don&#39;t use packages that belong to the JDK in your own code.&quot; what does this statement mean? Are you saying I cannot have a `package javax.matt`, because javax belongs to the jdk?","body":"&quot;Don&#39;t use packages that belong to the JDK in your own code.&quot; what does this statement mean? Are you saying I cannot have a <code>package javax.matt</code>, because javax belongs to the jdk?"},{"owner":{"account_id":12214233,"reputation":451,"user_id":8915165,"display_name":"K. Taylor"},"score":6,"creation_date":1591710356,"post_id":59294690,"comment_id":110154663,"body_markdown":"That&#39;s right. For example Java &quot;owns&quot; the package &quot;java&quot; so &quot;java.anything&quot; would not be allowed. Same for &quot;sun.anything&quot;, &quot;javax.anything&quot;.","body":"That&#39;s right. For example Java &quot;owns&quot; the package &quot;java&quot; so &quot;java.anything&quot; would not be allowed. Same for &quot;sun.anything&quot;, &quot;javax.anything&quot;."},{"owner":{"account_id":18409900,"reputation":195,"user_id":13410503,"display_name":"Yatin Kanyal"},"score":1,"creation_date":1600923285,"post_id":59294690,"comment_id":113243324,"body_markdown":"import javax.xml.parsers.ParserConfigurationException;   This statement is causing me the error. When I expand the &quot;Projects and External Dependencies&quot; I found xmlParserAPIs-2.6.2.jar is using the package javax.xml.parsers. So in build.gradle I did configurations {\n    all*.exclude group: &#39;xmlParserAPIs&#39;\n} but all in vain","body":"import javax.xml.parsers.ParserConfigurationException;   This statement is causing me the error. When I expand the &quot;Projects and External Dependencies&quot; I found xmlParserAPIs-2.6.2.jar is using the package javax.xml.parsers. So in build.gradle I did configurations {     all*.exclude group: &#39;xmlParserAPIs&#39; } but all in vain"},{"owner":{"account_id":7281,"reputation":248677,"user_id":12597,"accept_rate":76,"display_name":"Ian Boyd"},"score":1,"creation_date":1656535527,"post_id":59294690,"comment_id":128599954,"body_markdown":"Can you....explain what the answer means? Like...what is the problem? &quot;This error happens when you have a dependency in your project that contains code using packages that are also in the modules being referenced by your project.&quot;  What is a dependancy? How do i know if i have a dependancy? How do i know if a dependancy is in my project? How do i know if the dependancy in my project contains code? What is a module in my project? What does it mean for a module to reference a module?  It sounds like if Java internally does `import java.io;` then my code is not allowed to call `import java.io;`.","body":"Can you....explain what the answer means? Like...what is the problem? &quot;This error happens when you have a dependency in your project that contains code using packages that are also in the modules being referenced by your project.&quot;  What is a dependancy? How do i know if i have a dependancy? How do i know if a dependancy is in my project? How do i know if the dependancy in my project contains code? What is a module in my project? What does it mean for a module to reference a module?  It sounds like if Java internally does <code>import java.io;</code> then my code is not allowed to call <code>import java.io;</code>."},{"owner":{"account_id":6180465,"reputation":101,"user_id":4816131,"display_name":"Wafa Saba"},"score":1,"creation_date":1672949026,"post_id":59294690,"comment_id":132394196,"body_markdown":"Of all the answers, excluding xml-apis worked for me!","body":"Of all the answers, excluding xml-apis worked for me!"}],"tags":[],"owner":{"account_id":12214233,"reputation":451,"user_id":8915165,"display_name":"K. Taylor"},"comment_count":5,"down_vote_count":1,"up_vote_count":35,"is_accepted":false,"score":34,"last_activity_date":1660820579,"creation_date":1576101281,"answer_id":59294690,"question_id":55571046,"body_markdown":"Since I&#39;ll bet lots of people will be running into this problem with modular Java, I&#39;ll help and give the real answer.  \r\n\r\nThis error happens when \r\n\r\n- you have a dependency in your project \r\n- that contains code \r\n- using packages \r\n- that are also in the modules \r\n- being referenced by your project\r\n\r\nIf your project has set the source compatibility to something like Java 12, it will start enforcing the rule, that has been there all along in Java:\r\n\r\n&gt; &quot;Don&#39;t use packages that belong to the JDK in your own code.&quot; \r\n\r\nUnfortunately, lots of developers and vendors have done that over the years. Can&#39;t do that anymore.  \r\n\r\nIf you set your project to Java 12 source compatibility, Eclipse adds the JDK modules which include everything &quot;java.\\*&quot; and &quot;javax.\\*&quot; and even &quot;jdk.\\*&quot;, &quot;org.w3c.\\*&quot;. These packages may be in use by your dependencies or their transitive dependencies. \r\n\r\nHow to fix\r\n-------------\r\n\r\nYou need to:\r\n\r\n- look at which package its complaining about\r\n- and expand the **&quot;Projects and External Dependencies&quot;** node in the **Package Explorer**. \r\n- Find out which dependency is using that package. \r\n- Then you can simply exclude that dependency from your project. \r\n\r\nOr you could get the source of that dependency, if available, and rebuild the jar with changed packages. Otherwise you have to remove that dependency and find a replacement for that technology. Pain huh?\r\n\r\nIf its a transitive dependency you can often just exclude it. Here is an example of that for Gradle based projects.\r\n\r\n\r\n**GradleConfig.xml**:\r\n\r\n```\r\nconfigurations {\r\n   all*.exclude group: &#39;xml-apis&#39;\r\n}\r\n```\r\n","title":"Eclipse is confused by imports (&quot;accessible from more than one module&quot;)","body":"<p>Since I'll bet lots of people will be running into this problem with modular Java, I'll help and give the real answer.</p>\n<p>This error happens when</p>\n<ul>\n<li>you have a dependency in your project</li>\n<li>that contains code</li>\n<li>using packages</li>\n<li>that are also in the modules</li>\n<li>being referenced by your project</li>\n</ul>\n<p>If your project has set the source compatibility to something like Java 12, it will start enforcing the rule, that has been there all along in Java:</p>\n<blockquote>\n<p>&quot;Don't use packages that belong to the JDK in your own code.&quot;</p>\n</blockquote>\n<p>Unfortunately, lots of developers and vendors have done that over the years. Can't do that anymore.</p>\n<p>If you set your project to Java 12 source compatibility, Eclipse adds the JDK modules which include everything &quot;java.*&quot; and &quot;javax.*&quot; and even &quot;jdk.*&quot;, &quot;org.w3c.*&quot;. These packages may be in use by your dependencies or their transitive dependencies.</p>\n<h2>How to fix</h2>\n<p>You need to:</p>\n<ul>\n<li>look at which package its complaining about</li>\n<li>and expand the <strong>&quot;Projects and External Dependencies&quot;</strong> node in the <strong>Package Explorer</strong>.</li>\n<li>Find out which dependency is using that package.</li>\n<li>Then you can simply exclude that dependency from your project.</li>\n</ul>\n<p>Or you could get the source of that dependency, if available, and rebuild the jar with changed packages. Otherwise you have to remove that dependency and find a replacement for that technology. Pain huh?</p>\n<p>If its a transitive dependency you can often just exclude it. Here is an example of that for Gradle based projects.</p>\n<p><strong>GradleConfig.xml</strong>:</p>\n<pre><code>configurations {\n   all*.exclude group: 'xml-apis'\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":3067050,"reputation":115,"user_id":2598503,"display_name":"abhilash"},"score":0,"creation_date":1596767829,"post_id":62809052,"comment_id":111923328,"body_markdown":"Will jdeps help here in seeing which two packages are conflicting ?","body":"Will jdeps help here in seeing which two packages are conflicting ?"},{"owner":{"account_id":1495318,"reputation":615,"user_id":1401409,"accept_rate":75,"display_name":"scharette"},"score":0,"creation_date":1641423711,"post_id":62809052,"comment_id":124804431,"body_markdown":"This is the answer that helped the most. This allowed me to identify the 2 jars that were causing the issue. Thanks for sharing!","body":"This is the answer that helped the most. This allowed me to identify the 2 jars that were causing the issue. Thanks for sharing!"}],"tags":[],"owner":{"account_id":910835,"reputation":561,"user_id":944746,"display_name":"MSillence"},"comment_count":2,"down_vote_count":0,"up_vote_count":12,"is_accepted":false,"score":12,"last_activity_date":1594277444,"creation_date":1594277444,"answer_id":62809052,"question_id":55571046,"body_markdown":"See also: https://stackoverflow.com/q/57286825/944746 where I answered:\r\n\r\nDisappointingly I don&#39;t see any compiler flags to show what jar the problem is with\r\nEven -Xlint:module doesn&#39;t seem to show up anything useful and eclipse doesn&#39;t shed any light on the issue\r\n\r\nInstead to find where java.awt comes from I&#39;ve been using this script:\r\n\r\n    mvn dependency:copy-dependencies -DincludeScope=test -DoutputDirectory=deps\r\n    for i in deps/*.jar; do if unzip -l $i| grep -q java.awt; then echo $i; fi ; done\r\n\r\nStrictly you don&#39;t have to specify the scope test as that&#39;s the default but I&#39;ve included it as you might want to use `compile` instead","title":"Eclipse is confused by imports (&quot;accessible from more than one module&quot;)","body":"<p>See also: <a href=\"https://stackoverflow.com/q/57286825/944746\">The package org.w3c.dom is accessible from more than one module: &lt;unnamed&gt;, java.xml</a> where I answered:</p>\n<p>Disappointingly I don't see any compiler flags to show what jar the problem is with\nEven -Xlint:module doesn't seem to show up anything useful and eclipse doesn't shed any light on the issue</p>\n<p>Instead to find where java.awt comes from I've been using this script:</p>\n<pre><code>mvn dependency:copy-dependencies -DincludeScope=test -DoutputDirectory=deps\nfor i in deps/*.jar; do if unzip -l $i| grep -q java.awt; then echo $i; fi ; done\n</code></pre>\n<p>Strictly you don't have to specify the scope test as that's the default but I've included it as you might want to use <code>compile</code> instead</p>\n"},{"comments":[{"owner":{"account_id":14284626,"reputation":695,"user_id":10318272,"display_name":"S. Doe"},"score":1,"creation_date":1600315093,"post_id":63456316,"comment_id":113050123,"body_markdown":"In my case the problem came with the dependencies for org.apache.xmlgraphics batik-transcoder 1.13 and batik-codec 1.13. The exclusion as you describe here (adapted to the batik dependencies) worked for me.","body":"In my case the problem came with the dependencies for org.apache.xmlgraphics batik-transcoder 1.13 and batik-codec 1.13. The exclusion as you describe here (adapted to the batik dependencies) worked for me."},{"owner":{"account_id":9886845,"reputation":126,"user_id":7321115,"display_name":"Jean-Paul"},"score":0,"creation_date":1685460731,"post_id":63456316,"comment_id":134661605,"body_markdown":"I had the same problem with Batik too. Thank you","body":"I had the same problem with Batik too. Thank you"}],"tags":[],"owner":{"account_id":1282997,"reputation":502,"user_id":1236668,"display_name":"JZarzuela"},"comment_count":2,"down_vote_count":0,"up_vote_count":26,"is_accepted":false,"score":26,"last_activity_date":1597687518,"creation_date":1597687518,"answer_id":63456316,"question_id":55571046,"body_markdown":"In my case, it was because I included a dependency (Apache Tika) in the POM.xml file.\r\n\r\nI had to force the exclusion of the module that contained the classes with errors while imported at that dependency:\r\n\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.apache.tika&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;tika-parsers&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;1.24.1&lt;/version&gt;\r\n\t\t\t&lt;exclusions&gt;\r\n\t\t\t\t&lt;exclusion&gt;\r\n\t\t\t\t\t&lt;groupId&gt;xml-apis&lt;/groupId&gt;\r\n\t\t\t\t\t&lt;artifactId&gt;xml-apis&lt;/artifactId&gt;\r\n\t\t\t\t&lt;/exclusion&gt;\r\n\t\t\t&lt;/exclusions&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\nIt worked for me that way.","title":"Eclipse is confused by imports (&quot;accessible from more than one module&quot;)","body":"<p>In my case, it was because I included a dependency (Apache Tika) in the POM.xml file.</p>\n<p>I had to force the exclusion of the module that contained the classes with errors while imported at that dependency:</p>\n<pre><code>    &lt;dependency&gt;\n        &lt;groupId&gt;org.apache.tika&lt;/groupId&gt;\n        &lt;artifactId&gt;tika-parsers&lt;/artifactId&gt;\n        &lt;version&gt;1.24.1&lt;/version&gt;\n        &lt;exclusions&gt;\n            &lt;exclusion&gt;\n                &lt;groupId&gt;xml-apis&lt;/groupId&gt;\n                &lt;artifactId&gt;xml-apis&lt;/artifactId&gt;\n            &lt;/exclusion&gt;\n        &lt;/exclusions&gt;\n    &lt;/dependency&gt;\n</code></pre>\n<p>It worked for me that way.</p>\n"},{"comments":[{"owner":{"account_id":1899115,"reputation":1781,"user_id":1715376,"accept_rate":67,"display_name":"Miguel Pereira"},"score":3,"creation_date":1611604414,"post_id":63632910,"comment_id":116500827,"body_markdown":"Very helpful on list of conflicting deps. Thank you.","body":"Very helpful on list of conflicting deps. Thank you."}],"tags":[],"owner":{"account_id":251709,"reputation":2827,"user_id":529286,"accept_rate":84,"display_name":"zakmck"},"comment_count":1,"down_vote_count":0,"up_vote_count":12,"is_accepted":false,"score":12,"last_activity_date":1664871249,"creation_date":1598614090,"answer_id":63632910,"question_id":55571046,"body_markdown":"I think my flavour of the problem might be useful.\r\n\r\nI got this error for classes under `javax.xml.stream`, by old Maven projects that depend on artifacts like `xml-apis`, `stax-api`, or `geronimo-stax-api`.\r\n\r\nTechnically, the problem is what others have already said: those artifacts expose the `javax.xml.*` package without any awareness of Java modules (they were invented later), so the package is automatically assigned to the unnamed module, which conflicts with **the same package** being included in the JDK&#39;s most recent versions, where the package has its own module name, and therefore the same package results in two different modules, which is forbidden.\r\n\r\nThat said, the practical solution is essentially to work with [Maven exclusions][10] to remove those dependencies from your project and let it use the JDK version instead (or, of course, remove them as direct dependencies, if that&#39;s your case). Use the equivalent if you&#39;re working with another build system.  \r\n\r\nIn theory, the more recent flavours of these packages offered by the JDK might be non backward-compatible, in practice, I doubt such JSR specifications changed much over the years and so far, I haven&#39;t seen any issue with their replacement.\r\n\r\n\r\n[10]: https://maven.apache.org/guides/introduction/introduction-to-optional-and-excludes-dependencies.html","title":"Eclipse is confused by imports (&quot;accessible from more than one module&quot;)","body":"<p>I think my flavour of the problem might be useful.</p>\n<p>I got this error for classes under <code>javax.xml.stream</code>, by old Maven projects that depend on artifacts like <code>xml-apis</code>, <code>stax-api</code>, or <code>geronimo-stax-api</code>.</p>\n<p>Technically, the problem is what others have already said: those artifacts expose the <code>javax.xml.*</code> package without any awareness of Java modules (they were invented later), so the package is automatically assigned to the unnamed module, which conflicts with <strong>the same package</strong> being included in the JDK's most recent versions, where the package has its own module name, and therefore the same package results in two different modules, which is forbidden.</p>\n<p>That said, the practical solution is essentially to work with <a href=\"https://maven.apache.org/guides/introduction/introduction-to-optional-and-excludes-dependencies.html\" rel=\"nofollow noreferrer\">Maven exclusions</a> to remove those dependencies from your project and let it use the JDK version instead (or, of course, remove them as direct dependencies, if that's your case). Use the equivalent if you're working with another build system.</p>\n<p>In theory, the more recent flavours of these packages offered by the JDK might be non backward-compatible, in practice, I doubt such JSR specifications changed much over the years and so far, I haven't seen any issue with their replacement.</p>\n"},{"tags":[],"owner":{"account_id":95581,"reputation":10145,"user_id":260229,"accept_rate":50,"display_name":"Mahmoud"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1601663291,"creation_date":1601663291,"answer_id":64176586,"question_id":55571046,"body_markdown":"You can do what other people suggest which is to exclude `xml-apis` which worked fine with me, but if your are using and an old `jaxb-api` replace them with `jakarta.xml.bind-api`:\r\n\r\n```xml\r\n&lt;dependency&gt;\r\n    &lt;groupId&gt;jakarta.xml.bind&lt;/groupId&gt;\r\n    &lt;artifactId&gt;jakarta.xml.bind-api&lt;/artifactId&gt;\r\n    &lt;version&gt;2.3.3&lt;/version&gt;\r\n&lt;/dependency&gt;\r\n```\r\n\r\nand of course upgrade your `jaxb-impl` to match the same api:\r\n\r\n```xml\r\n&lt;dependency&gt;\r\n    &lt;groupId&gt;com.sun.xml.bind&lt;/groupId&gt;\r\n    &lt;artifactId&gt;jaxb-impl&lt;/artifactId&gt;\r\n    &lt;version&gt;2.3.3&lt;/version&gt;\r\n&lt;/dependency&gt;\r\n```","title":"Eclipse is confused by imports (&quot;accessible from more than one module&quot;)","body":"<p>You can do what other people suggest which is to exclude <code>xml-apis</code> which worked fine with me, but if your are using and an old <code>jaxb-api</code> replace them with <code>jakarta.xml.bind-api</code>:</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;dependency&gt;\n    &lt;groupId&gt;jakarta.xml.bind&lt;/groupId&gt;\n    &lt;artifactId&gt;jakarta.xml.bind-api&lt;/artifactId&gt;\n    &lt;version&gt;2.3.3&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n<p>and of course upgrade your <code>jaxb-impl</code> to match the same api:</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;dependency&gt;\n    &lt;groupId&gt;com.sun.xml.bind&lt;/groupId&gt;\n    &lt;artifactId&gt;jaxb-impl&lt;/artifactId&gt;\n    &lt;version&gt;2.3.3&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n"},{"comments":[{"owner":{"account_id":1339126,"reputation":720,"user_id":1281193,"accept_rate":71,"display_name":"NeeL"},"score":4,"creation_date":1626101337,"post_id":66564871,"comment_id":120796617,"body_markdown":"Came here with exactly the same problem when updating to the 5.0.0 of Apache POI, adding `&lt;exclusions&gt;&lt;exclusion&gt;&lt;groupId&gt;xml-apis&lt;/groupId&gt;&lt;artifactId&gt;xml-&lt;/artifactId&gt;&lt;/exclusion&gt;&lt;/exclusions&gt;` to the poi-ooxml dependency did the trick","body":"Came here with exactly the same problem when updating to the 5.0.0 of Apache POI, adding <code>&lt;exclusions&gt;&lt;exclusion&gt;&lt;groupId&gt;xml-apis&lt;&#47;groupId&gt;&lt;artifactI&zwnj;&#8203;d&gt;xml-&lt;&#47;artifactId&gt;&lt;&zwnj;&#8203;&#47;exclusion&gt;&lt;&#47;exclusi&zwnj;&#8203;ons&gt;</code> to the poi-ooxml dependency did the trick"}],"tags":[],"owner":{"account_id":3737042,"reputation":423,"user_id":3107765,"accept_rate":88,"display_name":"lordscales91"},"comment_count":1,"down_vote_count":0,"up_vote_count":7,"is_accepted":false,"score":7,"last_activity_date":1693098877,"creation_date":1615379556,"answer_id":66564871,"question_id":55571046,"body_markdown":"\r\nI&#39;ve found some interesting behaviour with Java 11 and the xmlbeans library. The xmlbeans library is a transitive dependency of [Apache POI](https://poi.apache.org/), a very popular library for working with Microsoft Office documents, it is used to handle the internal XML structures of the newer Office formats. I&#39;ve tested it with **Apache POI 3.9 and it works perfectly fine**, despite the error shown by Eclipse. So, I guess in Java 11 this rule it&#39;s not fully enforced.","title":"Eclipse is confused by imports (&quot;accessible from more than one module&quot;)","body":"<p>I've found some interesting behaviour with Java 11 and the xmlbeans library. The xmlbeans library is a transitive dependency of <a href=\"https://poi.apache.org/\" rel=\"nofollow noreferrer\">Apache POI</a>, a very popular library for working with Microsoft Office documents, it is used to handle the internal XML structures of the newer Office formats. I've tested it with <strong>Apache POI 3.9 and it works perfectly fine</strong>, despite the error shown by Eclipse. So, I guess in Java 11 this rule it's not fully enforced.</p>\n"},{"tags":[],"owner":{"account_id":332245,"reputation":16487,"user_id":657427,"accept_rate":67,"display_name":"Christophe Roussy"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1637141597,"creation_date":1637140810,"answer_id":70001722,"question_id":55571046,"body_markdown":"For **Apache POI** version 5.0.0 using **Maven**, in the **pom.xml**:\r\n\r\n    &lt;dependency&gt;\r\n      &lt;groupId&gt;org.apache.poi&lt;/groupId&gt;\r\n      &lt;artifactId&gt;poi&lt;/artifactId&gt;\r\n      &lt;version&gt;5.0.0&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n    &lt;dependency&gt;\r\n      &lt;groupId&gt;org.apache.poi&lt;/groupId&gt;\r\n      &lt;artifactId&gt;poi-ooxml&lt;/artifactId&gt;\r\n      &lt;version&gt;5.0.0&lt;/version&gt;\r\n      &lt;exclusions&gt;\r\n        &lt;exclusion&gt;\r\n          &lt;groupId&gt;xml-apis&lt;/groupId&gt;\r\n          &lt;artifactId&gt;xml-apis&lt;/artifactId&gt;\r\n        &lt;/exclusion&gt;\r\n      &lt;/exclusions&gt;\r\n    &lt;/dependency&gt;\r\n\r\nFixed: &quot;The package javax.xml.parsers is accessible from more than one module&quot;","title":"Eclipse is confused by imports (&quot;accessible from more than one module&quot;)","body":"<p>For <strong>Apache POI</strong> version 5.0.0 using <strong>Maven</strong>, in the <strong>pom.xml</strong>:</p>\n<pre><code>&lt;dependency&gt;\n  &lt;groupId&gt;org.apache.poi&lt;/groupId&gt;\n  &lt;artifactId&gt;poi&lt;/artifactId&gt;\n  &lt;version&gt;5.0.0&lt;/version&gt;\n&lt;/dependency&gt;\n&lt;dependency&gt;\n  &lt;groupId&gt;org.apache.poi&lt;/groupId&gt;\n  &lt;artifactId&gt;poi-ooxml&lt;/artifactId&gt;\n  &lt;version&gt;5.0.0&lt;/version&gt;\n  &lt;exclusions&gt;\n    &lt;exclusion&gt;\n      &lt;groupId&gt;xml-apis&lt;/groupId&gt;\n      &lt;artifactId&gt;xml-apis&lt;/artifactId&gt;\n    &lt;/exclusion&gt;\n  &lt;/exclusions&gt;\n&lt;/dependency&gt;\n</code></pre>\n<p>Fixed: &quot;The package javax.xml.parsers is accessible from more than one module&quot;</p>\n"},{"comments":[{"owner":{"account_id":11989020,"reputation":3798,"user_id":8772744,"display_name":"MD. RAKIB HASAN"},"score":0,"creation_date":1638176638,"post_id":70150897,"comment_id":124008966,"body_markdown":"Your answer could be improved with additional supporting information. Please [edit] to add further details, such as citations or documentation, so that others can confirm that your answer is correct. You can find more information on how to write good answers [in the help center](/help/how-to-answer).","body":"Your answer could be improved with additional supporting information. Please <a href=\"https://stackoverflow.com/posts/70150897/edit\">edit</a> to add further details, such as citations or documentation, so that others can confirm that your answer is correct. You can find more information on how to write good answers <a href=\"/help/how-to-answer\">in the help center</a>."}],"tags":[],"owner":{"account_id":23486916,"reputation":21,"user_id":17538355,"display_name":"Jiang Bo Kang"},"comment_count":1,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1638170037,"creation_date":1638170037,"answer_id":70150897,"question_id":55571046,"body_markdown":"I met a similar issue with the eclipse IDE while upgrading JDK from 1.8 to 11, &quot;The package org.w3c.dom is accessible from more than one module: &lt;unnamed&gt;, java.xml&quot;.  upgrading eclipse from 2019 to 2021 and setting system JDK home to 11 does not solve it.  I don&#39;t think it&#39;s caused by &quot;org.w3c.dom&quot; existing in different jars of the classpath,dut to &quot;Order and Export&quot; should ordered the search sequence.\r\n\r\nAfter several hours of searching and investigating, this issue is fixed by setting the Java Compiler - Compiler compliance level to 1.8(default is 11). ","title":"Eclipse is confused by imports (&quot;accessible from more than one module&quot;)","body":"<p>I met a similar issue with the eclipse IDE while upgrading JDK from 1.8 to 11, &quot;The package org.w3c.dom is accessible from more than one module: , java.xml&quot;.  upgrading eclipse from 2019 to 2021 and setting system JDK home to 11 does not solve it.  I don't think it's caused by &quot;org.w3c.dom&quot; existing in different jars of the classpath,dut to &quot;Order and Export&quot; should ordered the search sequence.</p>\n<p>After several hours of searching and investigating, this issue is fixed by setting the Java Compiler - Compiler compliance level to 1.8(default is 11).</p>\n"},{"comments":[{"owner":{"account_id":25279,"reputation":35965,"user_id":64895,"accept_rate":60,"display_name":"Jack BeNimble"},"score":4,"creation_date":1648650474,"post_id":71673277,"comment_id":126679008,"body_markdown":"Ctrl + Shift + T - works great.  I was able to see that a jar was located in both the JRE and in an m2 repository.","body":"Ctrl + Shift + T - works great.  I was able to see that a jar was located in both the JRE and in an m2 repository."},{"owner":{"account_id":2356876,"reputation":323,"user_id":2064483,"display_name":"scho"},"score":4,"creation_date":1660031349,"post_id":71673277,"comment_id":129430122,"body_markdown":"Ctrl + Shift + T was a lifesaver! Everyone explains the problems, but nobody explains how to find the dependency in question.","body":"Ctrl + Shift + T was a lifesaver! Everyone explains the problems, but nobody explains how to find the dependency in question."},{"owner":{"account_id":2177238,"reputation":1349,"user_id":1927609,"accept_rate":50,"display_name":"fakedad"},"score":4,"creation_date":1678357709,"post_id":71673277,"comment_id":133518206,"body_markdown":"This is much more helpful than the higher rated answers.","body":"This is much more helpful than the higher rated answers."},{"owner":{"account_id":16479661,"reputation":101,"user_id":11906736,"display_name":"D.Raluca"},"score":1,"creation_date":1697532592,"post_id":71673277,"comment_id":136288407,"body_markdown":"Good answer. I had error on this import javax.xml.XMLConstants; and i was able to find that was use in a stax-api which I could exclude","body":"Good answer. I had error on this import javax.xml.XMLConstants; and i was able to find that was use in a stax-api which I could exclude"}],"tags":[],"owner":{"account_id":9324571,"reputation":837,"user_id":6922308,"accept_rate":55,"display_name":"Anu Shibin Joseph Raj"},"comment_count":4,"down_vote_count":0,"up_vote_count":31,"is_accepted":false,"score":31,"last_activity_date":1679033696,"creation_date":1648625772,"answer_id":71673277,"question_id":55571046,"body_markdown":"I found a simple solution to troubleshoot this in Eclipse.\r\n1. Hit `Ctrl + Shift + T` in Eclipse to open the `Open Type` prompt.\r\n2. Type the name of the package that is causing the issue. For me, it was `org.w3c.dom`\r\n3. The search results will show all the locations from where this package is being loaded.\r\n4. Remove every JAR from the classpath that comes in the result other than the JDK 11 library.\r\n\r\nMy project being a legacy one, I had to remove a lot of JARs from the build path. Also, my project does not use Maven. So removing the JARs was a fairly straightforward step. The steps might vary for other build tools like ANT, Maven, Gradle, etc. I have just explained the troubleshooting steps above.","title":"Eclipse is confused by imports (&quot;accessible from more than one module&quot;)","body":"<p>I found a simple solution to troubleshoot this in Eclipse.</p>\n<ol>\n<li>Hit <code>Ctrl + Shift + T</code> in Eclipse to open the <code>Open Type</code> prompt.</li>\n<li>Type the name of the package that is causing the issue. For me, it was <code>org.w3c.dom</code></li>\n<li>The search results will show all the locations from where this package is being loaded.</li>\n<li>Remove every JAR from the classpath that comes in the result other than the JDK 11 library.</li>\n</ol>\n<p>My project being a legacy one, I had to remove a lot of JARs from the build path. Also, my project does not use Maven. So removing the JARs was a fairly straightforward step. The steps might vary for other build tools like ANT, Maven, Gradle, etc. I have just explained the troubleshooting steps above.</p>\n"},{"tags":[],"owner":{"account_id":904735,"reputation":377,"user_id":939857,"accept_rate":0,"display_name":"user939857"},"comment_count":0,"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1693098523,"creation_date":1654056666,"answer_id":72456368,"question_id":55571046,"body_markdown":"First of all, make sure your pom is actually correct by running \r\n   mvn install\r\n\r\nif that works, and eclipse still complains look at build path and find the library it is holding onto that is not in your pom.\r\n\r\nSometimes I just \r\n\r\n    rm .classpath\r\n    rm -rf .settings\r\n    rm -rf project\r\n    mvn eclipse:clean eclipse:eclipse\r\n","title":"Eclipse is confused by imports (&quot;accessible from more than one module&quot;)","body":"<p>First of all, make sure your pom is actually correct by running\nmvn install</p>\n<p>if that works, and eclipse still complains look at build path and find the library it is holding onto that is not in your pom.</p>\n<p>Sometimes I just</p>\n<pre><code>rm .classpath\nrm -rf .settings\nrm -rf project\nmvn eclipse:clean eclipse:eclipse\n</code></pre>\n"},{"tags":[],"owner":{"account_id":25891263,"reputation":21,"user_id":19618625,"display_name":"Stav Farajun"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1693098832,"creation_date":1658761312,"answer_id":73111364,"question_id":55571046,"body_markdown":"Steps below helped me:\r\n\r\nRight click Eclipse project &gt; Properties &gt; Java Build Path\r\nIn Libraries tab, remove all the external jar files under Modulepath and add them under Classpath (you can just select all the jars and drag them under Classpath)\r\nClick Apply and Close\r\n\r\n","title":"Eclipse is confused by imports (&quot;accessible from more than one module&quot;)","body":"<p>Steps below helped me:</p>\n<p>Right click Eclipse project &gt; Properties &gt; Java Build Path\nIn Libraries tab, remove all the external jar files under Modulepath and add them under Classpath (you can just select all the jars and drag them under Classpath)\nClick Apply and Close</p>\n"},{"tags":[],"owner":{"account_id":3158846,"reputation":3608,"user_id":2670571,"accept_rate":52,"display_name":"John"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1663957533,"creation_date":1663957533,"answer_id":73831632,"question_id":55571046,"body_markdown":"Wow, this was a tough one!\r\n\r\n**Some helpful tips (a summary of my journey through this maze):**\r\n\r\n**This started when I migrated from Java 1.8 to 11.0.11**\r\n\r\nRight out of the gate this caused problems.  I needed to change the syntax for how to specify the Java version for the maven build plug in as shown below:\r\n\r\n*Before*\r\n\r\n\t\t\t&lt;plugin&gt;\r\n\t\t\t\t&lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\r\n\t\t\t\t&lt;version&gt;3.7.0&lt;/version&gt;\r\n\t\t\t\t&lt;configuration&gt;\r\n\t\t\t\t\t&lt;source&gt;1.8&lt;/source&gt;\r\n\t\t\t\t\t&lt;target&gt;1.8&lt;/target&gt;\r\n\t\t\t\t&lt;/configuration&gt;\r\n\t\t\t&lt;/plugin&gt;\r\n\r\n\r\n\r\n*After*\r\n\r\n\t\t\t&lt;plugin&gt;\r\n\t\t\t\t&lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n\t\t\t\t&lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\r\n\t\t\t\t&lt;version&gt;3.8.0&lt;/version&gt;\r\n\t\t\t\t&lt;configuration&gt;\r\n\t\t\t\t\t&lt;release&gt;11&lt;/release&gt;\r\n\t\t\t\t&lt;/configuration&gt;\r\n\t\t\t&lt;/plugin&gt;\t\t\r\n\r\n\r\nAfter that, everything compiled at a command prompt.  However, when opening the project in Eclipse, I got a bunch of errors as shown in the next section.  \r\n\r\n**Getting &quot;&amp;lt;class&amp;gt; cannot be resolved to a type&quot; errors**\r\n\r\nWhen I got errors in Eclipse and not at the command line I immediately started looking at configuration settings in Eclipse to no avail.  After some googling I came to this post.  The post at https://www.eclipse.org/forums/index.php/t/1110036/ was also very helpful.  \r\n\r\n**Finding what resources were the problem**\r\n\r\nThe answer to this post by @Anu suggesting using &amp;lt;shift&amp;gt;&amp;lt;ctrl&amp;gt;T to bring up the type search window was very helpful using this I was able to see what resources were causing the problem (i.e. any resource that is also included in the JDK, in my case it was the ErrorHandler in the xml-apis jar). Type the name of one of the resources giving a &quot;cannot be resolved to type&quot; to see the name of the jar file, in my case the jar is xml-apis-1.4.01.jar.  \r\n\r\nAll of this is shown in the screen shot below (click on the image to get a cleaner view).  \r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n\r\n\r\n**Finding the Dependency that contains the offending jar**\r\n\r\nWe can now use the information from https://www.eclipse.org/forums/index.php/t/1110036/ to find the dependency in our pom.xml file that contains the offending resource.  \r\n\r\nOpen the pom.xml file in Eclipse and select the &quot;Dependency Hierarchy&quot;.  In the filter type the name of the jar file we found in the previous step (in my case it was xml-apis).  \r\n\r\nThis will pull up the dependencies creating the problem.  A screen shot of the Dependencies Hierarchy filtered for &quot;xml-apis&quot;.  From this we can see the offending dependencies in our pom.xml file are xercesImpl and xlsx-streamer.  \r\n\r\n[![enter image description here][2]][2]\r\n\r\n\r\n**Solving the problem**\r\n\r\nWe can now add exclusions to these dependencies that will resolve the problem as shown below.  \r\n\r\n\t\t&lt;dependency&gt;\r\n\t\t    &lt;groupId&gt;com.monitorjbl&lt;/groupId&gt;\r\n\t\t    &lt;artifactId&gt;xlsx-streamer&lt;/artifactId&gt;\r\n\t\t    &lt;version&gt;2.1.0&lt;/version&gt;\r\n\t        &lt;exclusions&gt;\r\n\t            &lt;exclusion&gt;\r\n\t                &lt;groupId&gt;xml-apis&lt;/groupId&gt;\r\n\t                &lt;artifactId&gt;xml-apis&lt;/artifactId&gt;\r\n\t            &lt;/exclusion&gt;\r\n\t        &lt;/exclusions&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\n\r\n\r\n\t\t&lt;dependency&gt;\r\n\t\t    &lt;groupId&gt;xerces&lt;/groupId&gt;\r\n\t\t    &lt;artifactId&gt;xercesImpl&lt;/artifactId&gt;\r\n\t\t    &lt;version&gt;2.12.0&lt;/version&gt;\r\n\t        &lt;exclusions&gt;\r\n\t            &lt;exclusion&gt;\r\n\t                &lt;groupId&gt;xml-apis&lt;/groupId&gt;\r\n\t                &lt;artifactId&gt;xml-apis&lt;/artifactId&gt;\r\n\t            &lt;/exclusion&gt;\r\n\t        &lt;/exclusions&gt;\r\n        &lt;/dependency&gt;\r\n \r\nAnd this fixes the current problem.  \r\n\r\n[![enter image description here][3]][3]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/ltwl6.png\r\n  [2]: https://i.stack.imgur.com/63wBB.png\r\n  [3]: https://i.stack.imgur.com/j9Ph7.png","title":"Eclipse is confused by imports (&quot;accessible from more than one module&quot;)","body":"<p>Wow, this was a tough one!</p>\n<p><strong>Some helpful tips (a summary of my journey through this maze):</strong></p>\n<p><strong>This started when I migrated from Java 1.8 to 11.0.11</strong></p>\n<p>Right out of the gate this caused problems.  I needed to change the syntax for how to specify the Java version for the maven build plug in as shown below:</p>\n<p><em>Before</em></p>\n<pre><code>        &lt;plugin&gt;\n            &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\n            &lt;version&gt;3.7.0&lt;/version&gt;\n            &lt;configuration&gt;\n                &lt;source&gt;1.8&lt;/source&gt;\n                &lt;target&gt;1.8&lt;/target&gt;\n            &lt;/configuration&gt;\n        &lt;/plugin&gt;\n</code></pre>\n<p><em>After</em></p>\n<pre><code>        &lt;plugin&gt;\n            &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n            &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\n            &lt;version&gt;3.8.0&lt;/version&gt;\n            &lt;configuration&gt;\n                &lt;release&gt;11&lt;/release&gt;\n            &lt;/configuration&gt;\n        &lt;/plugin&gt;       \n</code></pre>\n<p>After that, everything compiled at a command prompt.  However, when opening the project in Eclipse, I got a bunch of errors as shown in the next section.</p>\n<p><strong>Getting &quot;&lt;class&gt; cannot be resolved to a type&quot; errors</strong></p>\n<p>When I got errors in Eclipse and not at the command line I immediately started looking at configuration settings in Eclipse to no avail.  After some googling I came to this post.  The post at <a href=\"https://www.eclipse.org/forums/index.php/t/1110036/\" rel=\"nofollow noreferrer\">https://www.eclipse.org/forums/index.php/t/1110036/</a> was also very helpful.</p>\n<p><strong>Finding what resources were the problem</strong></p>\n<p>The answer to this post by @Anu suggesting using &lt;shift&gt;&lt;ctrl&gt;T to bring up the type search window was very helpful using this I was able to see what resources were causing the problem (i.e. any resource that is also included in the JDK, in my case it was the ErrorHandler in the xml-apis jar). Type the name of one of the resources giving a &quot;cannot be resolved to type&quot; to see the name of the jar file, in my case the jar is xml-apis-1.4.01.jar.</p>\n<p>All of this is shown in the screen shot below (click on the image to get a cleaner view).</p>\n<p><a href=\"https://i.stack.imgur.com/ltwl6.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/ltwl6.png\" alt=\"enter image description here\" /></a></p>\n<p><strong>Finding the Dependency that contains the offending jar</strong></p>\n<p>We can now use the information from <a href=\"https://www.eclipse.org/forums/index.php/t/1110036/\" rel=\"nofollow noreferrer\">https://www.eclipse.org/forums/index.php/t/1110036/</a> to find the dependency in our pom.xml file that contains the offending resource.</p>\n<p>Open the pom.xml file in Eclipse and select the &quot;Dependency Hierarchy&quot;.  In the filter type the name of the jar file we found in the previous step (in my case it was xml-apis).</p>\n<p>This will pull up the dependencies creating the problem.  A screen shot of the Dependencies Hierarchy filtered for &quot;xml-apis&quot;.  From this we can see the offending dependencies in our pom.xml file are xercesImpl and xlsx-streamer.</p>\n<p><a href=\"https://i.stack.imgur.com/63wBB.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/63wBB.png\" alt=\"enter image description here\" /></a></p>\n<p><strong>Solving the problem</strong></p>\n<p>We can now add exclusions to these dependencies that will resolve the problem as shown below.</p>\n<pre><code>    &lt;dependency&gt;\n        &lt;groupId&gt;com.monitorjbl&lt;/groupId&gt;\n        &lt;artifactId&gt;xlsx-streamer&lt;/artifactId&gt;\n        &lt;version&gt;2.1.0&lt;/version&gt;\n        &lt;exclusions&gt;\n            &lt;exclusion&gt;\n                &lt;groupId&gt;xml-apis&lt;/groupId&gt;\n                &lt;artifactId&gt;xml-apis&lt;/artifactId&gt;\n            &lt;/exclusion&gt;\n        &lt;/exclusions&gt;\n    &lt;/dependency&gt;\n\n\n\n    &lt;dependency&gt;\n        &lt;groupId&gt;xerces&lt;/groupId&gt;\n        &lt;artifactId&gt;xercesImpl&lt;/artifactId&gt;\n        &lt;version&gt;2.12.0&lt;/version&gt;\n        &lt;exclusions&gt;\n            &lt;exclusion&gt;\n                &lt;groupId&gt;xml-apis&lt;/groupId&gt;\n                &lt;artifactId&gt;xml-apis&lt;/artifactId&gt;\n            &lt;/exclusion&gt;\n        &lt;/exclusions&gt;\n    &lt;/dependency&gt;\n</code></pre>\n<p>And this fixes the current problem.</p>\n<p><a href=\"https://i.stack.imgur.com/j9Ph7.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/j9Ph7.png\" alt=\"enter image description here\" /></a></p>\n"},{"tags":[],"owner":{"account_id":2593755,"reputation":1,"user_id":2247843,"display_name":"lejon"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1676819362,"creation_date":1676204406,"answer_id":75426939,"question_id":55571046,"body_markdown":"I had this problem with the Stanford Core NLP package. As mentioned above adding an exclusion in the pom.xml solved the problem:\r\n\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;edu.stanford.nlp&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;stanford-corenlp&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;4.5.2&lt;/version&gt;\r\n\t\t\t&lt;exclusions&gt;\r\n               &lt;exclusion&gt;\r\n                 &lt;groupId&gt;xml-apis&lt;/groupId&gt;\r\n                 &lt;artifactId&gt;xml-apis&lt;/artifactId&gt;\r\n               &lt;/exclusion&gt;\r\n            &lt;/exclusions&gt;\r\n         &lt;/dependency&gt;","title":"Eclipse is confused by imports (&quot;accessible from more than one module&quot;)","body":"<p>I had this problem with the Stanford Core NLP package. As mentioned above adding an exclusion in the pom.xml solved the problem:</p>\n<pre><code>    &lt;dependency&gt;\n        &lt;groupId&gt;edu.stanford.nlp&lt;/groupId&gt;\n        &lt;artifactId&gt;stanford-corenlp&lt;/artifactId&gt;\n        &lt;version&gt;4.5.2&lt;/version&gt;\n        &lt;exclusions&gt;\n           &lt;exclusion&gt;\n             &lt;groupId&gt;xml-apis&lt;/groupId&gt;\n             &lt;artifactId&gt;xml-apis&lt;/artifactId&gt;\n           &lt;/exclusion&gt;\n        &lt;/exclusions&gt;\n     &lt;/dependency&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":201558,"reputation":20199,"user_id":448078,"accept_rate":61,"display_name":"Mike"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1677238810,"creation_date":1677176197,"answer_id":75548788,"question_id":55571046,"body_markdown":"Configuration property [was added](https://github.com/eclipse-jdt/eclipse.jdt.core/pull/424) to Eclipse. Full discussion [here](https://github.com/eclipse-jdt/eclipse.jdt.core/issues/415).  \r\n\r\n**File:** \r\n `&lt;workspace&gt;\\.metadata\\.plugins\\org.eclipse.core.runtime\\.settings\\org.eclipse.jdt.core.prefs`   \r\n**Property:**  \r\n`org.eclipse.jdt.core.compiler.ignoreUnnamedModuleForSplitPackage=enabled`","title":"Eclipse is confused by imports (&quot;accessible from more than one module&quot;)","body":"<p>Configuration property <a href=\"https://github.com/eclipse-jdt/eclipse.jdt.core/pull/424\" rel=\"nofollow noreferrer\">was added</a> to Eclipse. Full discussion <a href=\"https://github.com/eclipse-jdt/eclipse.jdt.core/issues/415\" rel=\"nofollow noreferrer\">here</a>.</p>\n<p><strong>File:</strong>\n<code>&lt;workspace&gt;\\.metadata\\.plugins\\org.eclipse.core.runtime\\.settings\\org.eclipse.jdt.core.prefs</code><br />\n<strong>Property:</strong><br />\n<code>org.eclipse.jdt.core.compiler.ignoreUnnamedModuleForSplitPackage=enabled</code></p>\n"},{"tags":[],"owner":{"account_id":19231547,"reputation":385,"user_id":14053303,"display_name":"Abhishek Chauhan"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1687176046,"creation_date":1687176046,"answer_id":76506425,"question_id":55571046,"body_markdown":"For me adding JRE into classpath solved the problem.\r\n\r\nproject -&gt; build path -&gt; configure build path -&gt; then adding JRE into class path","title":"Eclipse is confused by imports (&quot;accessible from more than one module&quot;)","body":"<p>For me adding JRE into classpath solved the problem.</p>\n<p>project -&gt; build path -&gt; configure build path -&gt; then adding JRE into class path</p>\n"},{"tags":[],"owner":{"account_id":6387352,"reputation":159,"user_id":4954816,"display_name":"Eder Armando Anillo Lora"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1694623665,"creation_date":1694623665,"answer_id":77099043,"question_id":55571046,"body_markdown":"I know that the question is for Maven. However, I&#39;m going to post the solution  for my case in gradle. In the configuration section of build.gradle file(version 7.4), just we need to add:\r\n\r\n    configurations.all {\r\n         exclude group: &#39;xml-apis&#39;, module: &#39;xml-apis&#39;\r\n    }\r\n\r\nYou must add the line for the projects that have the error.","title":"Eclipse is confused by imports (&quot;accessible from more than one module&quot;)","body":"<p>I know that the question is for Maven. However, I'm going to post the solution  for my case in gradle. In the configuration section of build.gradle file(version 7.4), just we need to add:</p>\n<pre><code>configurations.all {\n     exclude group: 'xml-apis', module: 'xml-apis'\n}\n</code></pre>\n<p>You must add the line for the projects that have the error.</p>\n"},{"tags":[],"owner":{"account_id":9604605,"reputation":121,"user_id":7131009,"display_name":"Girija Panda"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695190818,"creation_date":1695190818,"answer_id":77139757,"question_id":55571046,"body_markdown":"**Eclipse Error:** **The package javax.xml.namespace is accessible from more than one module: unnamed,java.xml**\r\n\r\nAfter a huge search, I&#39;ve applied below workaround on my **Eclipse(2023) &amp; JDK-20** project and it worked very smoothly. Here is my experience:\r\n- My latest Eclipse version: eclipse-jee-2023-09-R-win32-x86_64 with inbuilt &quot;JustJ JRE for IDE Packages&quot; plugin was installed.\r\n- JDK Installed: java version &quot;20.0.2&quot;, Java(TM) SE Runtime Environment (build 20.0.2+9-78)\r\n\r\n**Root-cause:** Same &#39;javax.xml.namespace&#39; package is used on both JARs, which are available on both &#39;Maven Dependencies&#39;(i.e. axis.jaxrpc.jar) and &#39;JRE System Library&#39;(i.e. java.xml.jar)  \r\n\r\n**Debug/Troubleshoot:** We must have to find all the referenced jars used in your eclipse project which having same package/class &#39;javax.xml.namespace&#39;.\r\n\r\nFrom your Eclipse IDE:\r\n**1.** Press **Ctrl+Shift+T** to open the **Type**\r\n**2.** Type the package.class name: *javax.xml.namespace* and identify the jars\r\n[![enter image description here][1]][1]\r\n\r\n**3.** Search and identify the package/class from the jars available under **Maven Dependencies** &amp; **JRE System Library** tree of your Eclipse IDE\r\n[![enter image description here][2]][2]\r\n\r\n**How to fix:**\r\nHere is the work-around can be applied on your Eclipse Java project\r\n**1.** Right-click on your eclipse java project, Click **Properties**-&gt;**Java Build Path**-&gt;**Order and Export** tab, Select **Maven Dependencies**, Click **Down** or **Bottom**:\r\n[![enter image description here][3]][3]\r\n\r\n**2.** Sending the **Maven Dependencies** to the bottom, means below the **JRE System Library** then click **Apply** like below:\r\n[![enter image description here][4]][4]\r\n\r\n  [1]: https://i.stack.imgur.com/ssLoC.png\r\n  [2]: https://i.stack.imgur.com/fi5TT.png\r\n  [3]: https://i.stack.imgur.com/LZmPJ.png\r\n  [4]: https://i.stack.imgur.com/ZWTrv.png","title":"Eclipse is confused by imports (&quot;accessible from more than one module&quot;)","body":"<p><strong>Eclipse Error:</strong> <strong>The package javax.xml.namespace is accessible from more than one module: unnamed,java.xml</strong></p>\n<p>After a huge search, I've applied below workaround on my <strong>Eclipse(2023) &amp; JDK-20</strong> project and it worked very smoothly. Here is my experience:</p>\n<ul>\n<li>My latest Eclipse version: eclipse-jee-2023-09-R-win32-x86_64 with inbuilt &quot;JustJ JRE for IDE Packages&quot; plugin was installed.</li>\n<li>JDK Installed: java version &quot;20.0.2&quot;, Java(TM) SE Runtime Environment (build 20.0.2+9-78)</li>\n</ul>\n<p><strong>Root-cause:</strong> Same 'javax.xml.namespace' package is used on both JARs, which are available on both 'Maven Dependencies'(i.e. axis.jaxrpc.jar) and 'JRE System Library'(i.e. java.xml.jar)</p>\n<p><strong>Debug/Troubleshoot:</strong> We must have to find all the referenced jars used in your eclipse project which having same package/class 'javax.xml.namespace'.</p>\n<p>From your Eclipse IDE:\n<strong>1.</strong> Press <strong>Ctrl+Shift+T</strong> to open the <strong>Type</strong>\n<strong>2.</strong> Type the package.class name: <em>javax.xml.namespace</em> and identify the jars\n<a href=\"https://i.stack.imgur.com/ssLoC.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/ssLoC.png\" alt=\"enter image description here\" /></a></p>\n<p><strong>3.</strong> Search and identify the package/class from the jars available under <strong>Maven Dependencies</strong> &amp; <strong>JRE System Library</strong> tree of your Eclipse IDE\n<a href=\"https://i.stack.imgur.com/fi5TT.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/fi5TT.png\" alt=\"enter image description here\" /></a></p>\n<p><strong>How to fix:</strong>\nHere is the work-around can be applied on your Eclipse Java project\n<strong>1.</strong> Right-click on your eclipse java project, Click <strong>Properties</strong>-&gt;<strong>Java Build Path</strong>-&gt;<strong>Order and Export</strong> tab, Select <strong>Maven Dependencies</strong>, Click <strong>Down</strong> or <strong>Bottom</strong>:\n<a href=\"https://i.stack.imgur.com/LZmPJ.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/LZmPJ.png\" alt=\"enter image description here\" /></a></p>\n<p><strong>2.</strong> Sending the <strong>Maven Dependencies</strong> to the bottom, means below the <strong>JRE System Library</strong> then click <strong>Apply</strong> like below:\n<a href=\"https://i.stack.imgur.com/ZWTrv.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/ZWTrv.png\" alt=\"enter image description here\" /></a></p>\n"}],"owner":{"account_id":14316872,"reputation":963,"user_id":10341428,"display_name":"Krann Sock"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":183427,"favorite_count":0,"down_vote_count":0,"up_vote_count":72,"accepted_answer_id":55572922,"answer_count":18,"score":72,"last_activity_date":1695190818,"creation_date":1554718423,"question_id":55571046,"body_markdown":"When referencing simple .jar files, Eclipse shows an error stating:\r\n&gt; The package java.awt is accessible from more than one module: &amp;lt;unnamed&amp;gt;, java.desktop\r\n\r\nThis happens for instance when `javax.awt` or `javax.swing` is included in the .jar files.\r\n\r\nThe simplest example would be the following:\r\n\r\n    package test;\r\n    \r\n    import javax.swing.JDialog;\r\n\r\n    public class Test {\r\n        public static void main(String[] args) {\r\n            new JDialog();\r\n        }\r\n    }\r\n\r\nAdding a .jar file to the classpath with only the folder structure `javax/swing` (no files needed) will cause the error to appear. I&#39;m using JDK 10/12 (neither works). Setting the compiler compliance to `1.8` makes the whole thing work again.\r\nOn another machine with `Eclipse 2018-09` this works with compiler compliance set to `10`.\r\n\r\nI&#39;m on Eclipse `2019-03`, on a (for testing purposes) freshly installed `Eclipse 2018-09` it works fine. Why?\r\n\r\n\r\n**Edit June/2020 (Solution)**\r\n\r\nAs the answers correctly stated, this is a restriction built into Java ages ago and only recently was forced upon us. I came into contact with it while migrating a big project with dozens of dependencies to Maven. There were libraries from around the year 2000! There were &#39;meta libraries&#39; which consisted of several libraries packaged together.\r\nSo there was no other way than to identify what was still needed (into the trash with the rest!), update libraries which violate the rules or find replacements for them. This took me many, many hours.\r\n\r\nIn the end it worked out and we&#39;ve got a nice Maven project to work with.","title":"Eclipse is confused by imports (&quot;accessible from more than one module&quot;)","body":"<p>When referencing simple .jar files, Eclipse shows an error stating:</p>\n\n<blockquote>\n  <p>The package java.awt is accessible from more than one module: &lt;unnamed&gt;, java.desktop</p>\n</blockquote>\n\n<p>This happens for instance when <code>javax.awt</code> or <code>javax.swing</code> is included in the .jar files.</p>\n\n<p>The simplest example would be the following:</p>\n\n<pre><code>package test;\n\nimport javax.swing.JDialog;\n\npublic class Test {\n    public static void main(String[] args) {\n        new JDialog();\n    }\n}\n</code></pre>\n\n<p>Adding a .jar file to the classpath with only the folder structure <code>javax/swing</code> (no files needed) will cause the error to appear. I'm using JDK 10/12 (neither works). Setting the compiler compliance to <code>1.8</code> makes the whole thing work again.\nOn another machine with <code>Eclipse 2018-09</code> this works with compiler compliance set to <code>10</code>.</p>\n\n<p>I'm on Eclipse <code>2019-03</code>, on a (for testing purposes) freshly installed <code>Eclipse 2018-09</code> it works fine. Why?</p>\n\n<p><strong>Edit June/2020 (Solution)</strong></p>\n\n<p>As the answers correctly stated, this is a restriction built into Java ages ago and only recently was forced upon us. I came into contact with it while migrating a big project with dozens of dependencies to Maven. There were libraries from around the year 2000! There were 'meta libraries' which consisted of several libraries packaged together.\nSo there was no other way than to identify what was still needed (into the trash with the rest!), update libraries which violate the rules or find replacements for them. This took me many, many hours.</p>\n\n<p>In the end it worked out and we've got a nice Maven project to work with.</p>\n"},{"tags":["java","spring","oauth-2.0","azure-active-directory","microsoft-graph-mail"],"comments":[{"owner":{"account_id":1053202,"reputation":59956,"user_id":1056563,"accept_rate":90,"display_name":"WestCoastProjects"},"score":0,"creation_date":1695190723,"post_id":76002924,"comment_id":135989139,"body_markdown":"I am also getting this error - in a quite different scenario: trying to access `kusto` server from within `synapse`","body":"I am also getting this error - in a quite different scenario: trying to access <code>kusto</code> server from within <code>synapse</code>"}],"owner":{"account_id":15256071,"reputation":11,"user_id":11007756,"display_name":"Amit Jha"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":718,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1695190667,"creation_date":1681372238,"question_id":76002924,"body_markdown":"\r\n```\r\nimport com.microsoft.aad.msal4j.ClientCredentialFactory;\r\nimport com.microsoft.aad.msal4j.ClientCredentialParameters;\r\nimport com.microsoft.aad.msal4j.ConfidentialClientApplication;\r\nimport com.microsoft.aad.msal4j.IAuthenticationResult;\r\nimport com.microsoft.aad.msal4j.IClientCredential;\r\nimport org.apache.commons.lang.StringUtils;\r\nimport org.slf4j.Logger;\r\nimport org.slf4j.LoggerFactory;\r\n\r\n\r\npublic class DefaultEmailReaderGraph implements CreationService {\r\n    DefaultEmailReaderGraph () {\r\n    }\r\n    public static final String CLIENT_ID = &quot;800e0bd6-7848-4027-****-************&quot;;\r\n    private static final  String AUTHORITY = &quot;https://login.microsoftonline.com/1a6b5a68-46e7-****-****-************/&quot;;\r\n    private static final  String CLIENT_SECRET = &quot;******ZNodD*****ShmFB2yG46zi************&quot;;\r\n    private static final  String TENANT_GUID=&quot;7370fc8f-4ead-****-****-************&quot;;\r\n    private static final Set&lt;String&gt; SCOPES = Collections.singleton(&quot;https://graph.microsoft.com/.default&quot;);\r\n    private static final Logger LOG = LoggerFactory.getLogger(DefaultEmailReaderGraph.class);\r\n    private static IAuthenticationResult getAccessToken() throws Exception {\r\n    \r\n        IAuthenticationResult result = null;\r\n        try{\r\n            IClientCredential credential = ClientCredentialFactory.createFromSecret(CLIENT_SECRET);\r\n            ConfidentialClientApplication app = ConfidentialClientApplication\r\n                    .builder(CLIENT_ID, credential)\r\n                    .authority(AUTHORITY)\r\n                    .build();\r\n            ClientCredentialParameters clientCredentialParameter = ClientCredentialParameters\r\n                    .builder(SCOPES)\r\n                    .build();\r\n            CompletableFuture&lt;IAuthenticationResult&gt; future=app.acquireToken(clientCredentialParameter);\r\n            result=future.get();\r\n            final String  accessToken=result.accessToken();\r\n            if(StringUtils.isBlank(accessToken)){\r\n                LOG.error(&quot;Access Token :&quot;+accessToken);\r\n            }\r\n            LOG.info(&quot;Token is :  &quot;+app.acquireToken(clientCredentialParameter).join());\r\n        }catch (Exception e){\r\n            LOG.error(&quot;Exception in acquiring token: &quot;+e.getMessage(),e);\r\n        }\r\n        return result;\r\n    }\r\n\t\r\n    @Override\r\n    public void createTicketFromEmail(Date lastEmailReadTime) throws Exception {\r\n        IAuthenticationResult accessToke= getAccessToken();\r\n    }\r\n}\r\n\r\n```\r\n\r\n\r\n\r\n\r\nFor the above code I am getting the below error in the console,\r\n\r\n```\r\nCaught throwable com/nimbusds/oauth2/sdk/auth/ClientAuthentication\r\njava.lang.NoClassDefFoundError: com/nimbusds/oauth2/sdk/auth/ClientAuthentication\r\n&#160;&#160;&#160; at\r\n```\r\n\r\nEven thought I have added the jar for the `nimbusds` (`nimbus-jose-jwt-9.31.wso2v1`) to the lib folder.\r\n\r\nI am trying to generate the access token from the above code so I can further use it to read the email from the Azure AD Mailbox","title":"Getting the error java.lang.NoClassDefFoundError: com/nimbusds/oauth2/sdk/auth/ClientAuthentication while trying to read the mails from Graph API","body":"<pre><code>import com.microsoft.aad.msal4j.ClientCredentialFactory;\nimport com.microsoft.aad.msal4j.ClientCredentialParameters;\nimport com.microsoft.aad.msal4j.ConfidentialClientApplication;\nimport com.microsoft.aad.msal4j.IAuthenticationResult;\nimport com.microsoft.aad.msal4j.IClientCredential;\nimport org.apache.commons.lang.StringUtils;\nimport org.slf4j.Logger;\nimport org.slf4j.LoggerFactory;\n\n\npublic class DefaultEmailReaderGraph implements CreationService {\n    DefaultEmailReaderGraph () {\n    }\n    public static final String CLIENT_ID = &quot;800e0bd6-7848-4027-****-************&quot;;\n    private static final  String AUTHORITY = &quot;https://login.microsoftonline.com/1a6b5a68-46e7-****-****-************/&quot;;\n    private static final  String CLIENT_SECRET = &quot;******ZNodD*****ShmFB2yG46zi************&quot;;\n    private static final  String TENANT_GUID=&quot;7370fc8f-4ead-****-****-************&quot;;\n    private static final Set&lt;String&gt; SCOPES = Collections.singleton(&quot;https://graph.microsoft.com/.default&quot;);\n    private static final Logger LOG = LoggerFactory.getLogger(DefaultEmailReaderGraph.class);\n    private static IAuthenticationResult getAccessToken() throws Exception {\n    \n        IAuthenticationResult result = null;\n        try{\n            IClientCredential credential = ClientCredentialFactory.createFromSecret(CLIENT_SECRET);\n            ConfidentialClientApplication app = ConfidentialClientApplication\n                    .builder(CLIENT_ID, credential)\n                    .authority(AUTHORITY)\n                    .build();\n            ClientCredentialParameters clientCredentialParameter = ClientCredentialParameters\n                    .builder(SCOPES)\n                    .build();\n            CompletableFuture&lt;IAuthenticationResult&gt; future=app.acquireToken(clientCredentialParameter);\n            result=future.get();\n            final String  accessToken=result.accessToken();\n            if(StringUtils.isBlank(accessToken)){\n                LOG.error(&quot;Access Token :&quot;+accessToken);\n            }\n            LOG.info(&quot;Token is :  &quot;+app.acquireToken(clientCredentialParameter).join());\n        }catch (Exception e){\n            LOG.error(&quot;Exception in acquiring token: &quot;+e.getMessage(),e);\n        }\n        return result;\n    }\n    \n    @Override\n    public void createTicketFromEmail(Date lastEmailReadTime) throws Exception {\n        IAuthenticationResult accessToke= getAccessToken();\n    }\n}\n\n</code></pre>\n<p>For the above code I am getting the below error in the console,</p>\n<pre><code>Caught throwable com/nimbusds/oauth2/sdk/auth/ClientAuthentication\njava.lang.NoClassDefFoundError: com/nimbusds/oauth2/sdk/auth/ClientAuthentication\n    at\n</code></pre>\n<p>Even thought I have added the jar for the <code>nimbusds</code> (<code>nimbus-jose-jwt-9.31.wso2v1</code>) to the lib folder.</p>\n<p>I am trying to generate the access token from the above code so I can further use it to read the email from the Azure AD Mailbox</p>\n"},{"tags":["java","android","react-native","kotlin","bluetooth"],"comments":[{"owner":{"account_id":13445819,"reputation":1965,"user_id":9701793,"display_name":"rahat"},"score":0,"creation_date":1695210997,"post_id":77139512,"comment_id":135993263,"body_markdown":"Does this answer your question? [Programmatically connect to bluetooth headset from android app](https://stackoverflow.com/questions/24468010/programmatically-connect-to-bluetooth-headset-from-android-app)","body":"Does this answer your question? <a href=\"https://stackoverflow.com/questions/24468010/programmatically-connect-to-bluetooth-headset-from-android-app\">Programmatically connect to bluetooth headset from android app</a>"},{"owner":{"account_id":26158177,"reputation":21,"user_id":19845155,"display_name":"Atharva Solaskar"},"score":0,"creation_date":1695299961,"post_id":77139512,"comment_id":136007873,"body_markdown":"Nope, it Connects Headsets which are the BLE Devices. I Need a Solution to Connect Classic Bluetooth.","body":"Nope, it Connects Headsets which are the BLE Devices. I Need a Solution to Connect Classic Bluetooth."}],"answers":[{"comments":[{"owner":{"account_id":26158177,"reputation":21,"user_id":19845155,"display_name":"Atharva Solaskar"},"score":1,"creation_date":1695191459,"post_id":77139741,"comment_id":135989249,"body_markdown":"Thank You So much For Your Valuable Response.","body":"Thank You So much For Your Valuable Response."}],"tags":[],"owner":{"account_id":10114718,"reputation":2216,"user_id":7473793,"display_name":"Michael Kotzjan"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1695190665,"creation_date":1695190665,"answer_id":77139741,"question_id":77139512,"body_markdown":"Bluetooth Classic is often referred to by the name Bluetooth Serial. The package [react-native-bluetooth-serial](https://www.npmjs.com/package/react-native-bluetooth-serial) seems to be a choice for you.\r\n\r\nRegarding Bluetooth Classic using Kotlin you could start by following the [Android Developer Guide](https://developer.android.com/guide/topics/connectivity/bluetooth/setup).","title":"Is it possible to Scan and Connect to the Classic Bluetooth Devices In React native or Kotlin for Android? if yes then How?","body":"<p>Bluetooth Classic is often referred to by the name Bluetooth Serial. The package <a href=\"https://www.npmjs.com/package/react-native-bluetooth-serial\" rel=\"nofollow noreferrer\">react-native-bluetooth-serial</a> seems to be a choice for you.</p>\n<p>Regarding Bluetooth Classic using Kotlin you could start by following the <a href=\"https://developer.android.com/guide/topics/connectivity/bluetooth/setup\" rel=\"nofollow noreferrer\">Android Developer Guide</a>.</p>\n"}],"owner":{"account_id":26158177,"reputation":21,"user_id":19845155,"display_name":"Atharva Solaskar"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":77,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1695190665,"creation_date":1695187652,"question_id":77139512,"body_markdown":"Is it possible to Scan and Connect to the Classic Bluetooth Devices In React native or Kotlin for Android? if yes then How?\r\n\r\nI tried installing with React native Libraries but they are not providing Scanning Functionality to Scan for Classic Bluetooth. I am getting a lot information regarding the BLE Device but there isn&#39;t info regarding Classic Bluetooth.","title":"Is it possible to Scan and Connect to the Classic Bluetooth Devices In React native or Kotlin for Android? if yes then How?","body":"<p>Is it possible to Scan and Connect to the Classic Bluetooth Devices In React native or Kotlin for Android? if yes then How?</p>\n<p>I tried installing with React native Libraries but they are not providing Scanning Functionality to Scan for Classic Bluetooth. I am getting a lot information regarding the BLE Device but there isn't info regarding Classic Bluetooth.</p>\n"},{"tags":["java","android","storage"],"comments":[{"owner":{"account_id":18999437,"reputation":2461,"user_id":13867124,"display_name":"AztecCodes"},"score":0,"creation_date":1695163507,"post_id":77138320,"comment_id":135986680,"body_markdown":"The issue you&#39;re encountering is a consequence of Android&#39;s app sandboxing for external storage, especially on older Android versions. Apps have access to their own directory within the external storage, but they cannot write to another app&#39;s directory.","body":"The issue you&#39;re encountering is a consequence of Android&#39;s app sandboxing for external storage, especially on older Android versions. Apps have access to their own directory within the external storage, but they cannot write to another app&#39;s directory."},{"owner":{"account_id":29485927,"reputation":1,"user_id":22595845,"display_name":"shibashiba"},"score":0,"creation_date":1695167137,"post_id":77138320,"comment_id":135987085,"body_markdown":"That&#39;s right.\nHowever, file manager apps (ex. Cx File Manager) can manipulate directories of other apps even if they are not system apps. Do you know how this is done?","body":"That&#39;s right. However, file manager apps (ex. Cx File Manager) can manipulate directories of other apps even if they are not system apps. Do you know how this is done?"},{"owner":{"account_id":16768304,"reputation":8503,"user_id":12121419,"display_name":"blackapps"},"score":0,"creation_date":1695189082,"post_id":77138320,"comment_id":135988919,"body_markdown":"`to transfer data saved on the SD card from the old app to the new app` The files are on the removable micro sd card. They are there for both old and new app. So what is it what you wanna do as no data is lost.","body":"<code>to transfer data saved on the SD card from the old app to the new app</code> The files are on the removable micro sd card. They are there for both old and new app. So what is it what you wanna do as no data is lost."},{"owner":{"account_id":16768304,"reputation":8503,"user_id":12121419,"display_name":"blackapps"},"score":0,"creation_date":1695189331,"post_id":77138320,"comment_id":135988952,"body_markdown":"`the button will transfer data to the new app. ` Impossible. One cannot transfer files to apps. One can instead copy and move files from one storage location to another one.","body":"<code>the button will transfer data to the new app. </code> Impossible. One cannot transfer files to apps. One can instead copy and move files from one storage location to another one."},{"owner":{"account_id":16768304,"reputation":8503,"user_id":12121419,"display_name":"blackapps"},"score":0,"creation_date":1695189559,"post_id":77138320,"comment_id":135988978,"body_markdown":"The new app is not an update of the old app? It has a different getPackageName() value?","body":"The new app is not an update of the old app? It has a different getPackageName() value?"},{"owner":{"account_id":16768304,"reputation":8503,"user_id":12121419,"display_name":"blackapps"},"score":0,"creation_date":1695198570,"post_id":77138320,"comment_id":135990666,"body_markdown":"`We have confirmed that files can be moved using Storage Access Framework&#39;s DocumentsContract.moveDocument() on Android7 and above. ` Then you did not test on Android 13+ devices as there you have not access to Android folder on removable micro sd card.","body":"<code>We have confirmed that files can be moved using Storage Access Framework&#39;s DocumentsContract.moveDocument() on Android7 and above. </code> Then you did not test on Android 13+ devices as there you have not access to Android folder on removable micro sd card."},{"owner":{"account_id":16768304,"reputation":8503,"user_id":12121419,"display_name":"blackapps"},"score":0,"creation_date":1695198914,"post_id":77138320,"comment_id":135990731,"body_markdown":"`String appBExternalFileDirPath = appAExternalFileDirPath.replace(&quot;com.example.testAppA&quot;, &quot;testAppB&quot;);` ? That will never do.","body":"<code>String appBExternalFileDirPath = appAExternalFileDirPath.replace(&quot;com.example.testAppA&quot;, &quot;testAppB&quot;);</code> ? That will never do."},{"owner":{"account_id":16768304,"reputation":8503,"user_id":12121419,"display_name":"blackapps"},"score":0,"creation_date":1695199108,"post_id":77138320,"comment_id":135990777,"body_markdown":"`the above method cannot be used on my Android 5 device` Well with SAF on Android 5 devices you can read and write all files and directories in Android directory on a removable micro sd card. You do not need `DocumentsContract.moveDocument()` method to copy or move files but can do it in another way. Please elaborate.","body":"<code>the above method cannot be used on my Android 5 device</code> Well with SAF on Android 5 devices you can read and write all files and directories in Android directory on a removable micro sd card. You do not need <code>DocumentsContract.moveDocument()</code> method to copy or move files but can do it in another way. Please elaborate."}],"answers":[{"tags":[],"owner":{"account_id":16768304,"reputation":8503,"user_id":12121419,"display_name":"blackapps"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695190526,"creation_date":1695190526,"answer_id":77139729,"question_id":77138320,"body_markdown":"As since Android 4 KitKat removable micro sd cards are read only except for app specific directories on it you should let the new app copy files from old to new location.\r\n\r\nOn Android 5 apps can read all files in Android directory on card. But they can only write in their own specific files dir.","title":"How to move files in SDCard","body":"<p>As since Android 4 KitKat removable micro sd cards are read only except for app specific directories on it you should let the new app copy files from old to new location.</p>\n<p>On Android 5 apps can read all files in Android directory on card. But they can only write in their own specific files dir.</p>\n"}],"owner":{"account_id":29485927,"reputation":1,"user_id":22595845,"display_name":"shibashiba"},"comment_count":8,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":38,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1695190526,"creation_date":1695162959,"question_id":77138320,"body_markdown":"I&#39;m currently running an app. The app is not released on the store, but distributed as an apk for users to download.\r\nWe have decided to release the renewed app on the Google Play Store. At the time of release, we are trying to implement a function to transfer data saved on the SD card from the old app to the new app, but I didn&#39;t know how to do it so I asked a question.\r\n\r\nThe functionality I am trying to implement is as follows.\r\n\r\n- Added a data transfer button to the old app, and clicking the button will transfer data to the new app.\r\n  ・Do not perform any migration operations using the new app.\r\n\r\nWe have confirmed that files can be moved using Storage Access Framework&#39;s DocumentsContract.moveDocument() on Android7 and above. However, the above method cannot be used on my Android 5 device, so I implemented it in a different way. However, I was told permission denied and could not migrate the data.\r\n\r\nBelow is part of the code I implemented.\r\n\r\nThe method that is performing the processing\r\n\r\n```\r\nvoid forTEST() {\r\n        File fileDir = getExternalFilesDir(null);\r\n        File[] fileDirs = getExternalFilesDirs(null);\r\n\r\n        File appAExternalFileDir = null;\r\n        for (File dir : fileDirs) {\r\n            if ( dir != null &amp;&amp; !fileDir.equals(dir) &amp;&amp; Environment.isExternalStorageRemovable(dir)) {\r\n                appAExternalFileDir = dir;\r\n            }\r\n        }\r\n\r\n        if (appAExternalFileDir == null) return;\r\n\r\n        String appAExternalFileDirPath = appAExternalFileDir.getAbsolutePath();\r\n        Log.d(&quot;testlog&quot;, &quot;externalFileDirPath:&quot; + appAExternalFileDir.getAbsolutePath()); // externalFileDirPath:/storage/MicroSD/Android/data/com.example.testAppA/files\r\n        Log.d(&quot;testlog&quot;, appAExternalFileDir.canRead() ? &quot;true&quot; : &quot;false&quot;); // true\r\n        Log.d(&quot;testlog&quot;, appAExternalFileDir.canWrite() ? &quot;true&quot; : &quot;false&quot;); // true\r\n\r\n        String appBExternalFileDirPath = \r\n        String appBExternalFileDirPath = appAExternalFileDirPath.replace(&quot;com.example.testAppA&quot;, &quot;testAppB&quot;);\r\n        File appBExternalFileDir = new File(appBExternalFileDirPath);\r\n        Log.d(&quot;testlog&quot;, &quot;externalFileDirPath:&quot; + appBExternalFileDir.getAbsolutePath());// externalFileDirPath:/storage/MicroSD/Android/data/com.example.testAppB/files\r\n        Log.d(&quot;testlog&quot;, appBExternalFileDir.canRead() ? &quot;true&quot; : &quot;false&quot;); // true\r\n        Log.d(&quot;testlog&quot;, appBExternalFileDir.canWrite() ? &quot;true&quot; : &quot;false&quot;); // true\r\n\r\n        File[] appAFiles = appAExternalFileDir.listFiles();\r\n        for(int i=0; i&lt;appAFiles.length; i++) {\r\n            String fileName = appAFiles[i].getName();\r\n            File destFile = new File(appBExternalFileDir, appAFiles[i].getName());\r\n\r\n            moveFileToDest(appAFiles[i], destFile);\r\n\r\n// I tried renameTo() but only found true/false, so I created moveFileToDest() and executed it.\r\n// renameTo() returned false.\r\n//            if (appAFiles[i].renameTo(destFile)) {\r\n//                Log.d(&quot;testLog&quot;, &quot;success to renameTo()&quot;);\r\n//            } else {\r\n//                Log.d(&quot;testlog&quot;, &quot;failure to renameTo()&quot;);\r\n//            }\r\n        }\r\n    }\r\n\r\n    void moveFileToDest(File sourceFile, File destinationFile) {\r\n        try {\r\n            // When I performed the move process described below without creating a new file first, a FileNotFoundException occurred, so I added createNewFile().\r\n            if (destinationFile.createNewFile()) { // throw java.io.IOException: open failed: EACCES (Permission denied)\r\n                Log.d(&quot;testlog&quot;, &quot;create success!!&quot;);\r\n            } else {\r\n                Log.d(&quot;testlog&quot;, &quot;create failed&quot;);\r\n            }\r\n\r\n            FileInputStream fis = new FileInputStream(sourceFile);\r\n            FileOutputStream fos = new FileOutputStream(destinationFile);\r\n\r\n            FileChannel sourceChannel = fis.getChannel();\r\n            FileChannel destinationChannel = fos.getChannel();\r\n\r\n            sourceChannel.transferTo(0, sourceChannel.size(), destinationChannel);\r\n\r\n            sourceChannel.close();\r\n            fis.close();\r\n            destinationChannel.close();\r\n            fos.close();\r\n\r\n            sourceFile.delete();\r\n        } catch (IOException e) {\r\n            e.printStackTrace();\r\n        }\r\n    }\r\n```\r\n\r\nAndroidManifest.xml(Excerpt)\r\n\r\n```\r\n    &lt;uses-permission android:name=&quot;android.permission.READ_EXTERNAL_STORAGE&quot;/&gt;\r\n    &lt;uses-permission android:name=&quot;android.permission.WRITE_EXTERNAL_STORAGE&quot;/&gt;\r\n```\r\n\r\ncanRead() and canWrite() of appAExternalFileDir and appBExternalFileDir are both true.\r\nBut when I try to create a file inside appBExternalFileDir I get an IOException and it says Permission Denied.\r\n\r\nwhat should i do.\r\nI am glad if you could tell me.\r\n(If there is any missing information, please let me know so I can add it)","title":"How to move files in SDCard","body":"<p>I'm currently running an app. The app is not released on the store, but distributed as an apk for users to download.\nWe have decided to release the renewed app on the Google Play Store. At the time of release, we are trying to implement a function to transfer data saved on the SD card from the old app to the new app, but I didn't know how to do it so I asked a question.</p>\n<p>The functionality I am trying to implement is as follows.</p>\n<ul>\n<li>Added a data transfer button to the old app, and clicking the button will transfer data to the new app.\n・Do not perform any migration operations using the new app.</li>\n</ul>\n<p>We have confirmed that files can be moved using Storage Access Framework's DocumentsContract.moveDocument() on Android7 and above. However, the above method cannot be used on my Android 5 device, so I implemented it in a different way. However, I was told permission denied and could not migrate the data.</p>\n<p>Below is part of the code I implemented.</p>\n<p>The method that is performing the processing</p>\n<pre><code>void forTEST() {\n        File fileDir = getExternalFilesDir(null);\n        File[] fileDirs = getExternalFilesDirs(null);\n\n        File appAExternalFileDir = null;\n        for (File dir : fileDirs) {\n            if ( dir != null &amp;&amp; !fileDir.equals(dir) &amp;&amp; Environment.isExternalStorageRemovable(dir)) {\n                appAExternalFileDir = dir;\n            }\n        }\n\n        if (appAExternalFileDir == null) return;\n\n        String appAExternalFileDirPath = appAExternalFileDir.getAbsolutePath();\n        Log.d(&quot;testlog&quot;, &quot;externalFileDirPath:&quot; + appAExternalFileDir.getAbsolutePath()); // externalFileDirPath:/storage/MicroSD/Android/data/com.example.testAppA/files\n        Log.d(&quot;testlog&quot;, appAExternalFileDir.canRead() ? &quot;true&quot; : &quot;false&quot;); // true\n        Log.d(&quot;testlog&quot;, appAExternalFileDir.canWrite() ? &quot;true&quot; : &quot;false&quot;); // true\n\n        String appBExternalFileDirPath = \n        String appBExternalFileDirPath = appAExternalFileDirPath.replace(&quot;com.example.testAppA&quot;, &quot;testAppB&quot;);\n        File appBExternalFileDir = new File(appBExternalFileDirPath);\n        Log.d(&quot;testlog&quot;, &quot;externalFileDirPath:&quot; + appBExternalFileDir.getAbsolutePath());// externalFileDirPath:/storage/MicroSD/Android/data/com.example.testAppB/files\n        Log.d(&quot;testlog&quot;, appBExternalFileDir.canRead() ? &quot;true&quot; : &quot;false&quot;); // true\n        Log.d(&quot;testlog&quot;, appBExternalFileDir.canWrite() ? &quot;true&quot; : &quot;false&quot;); // true\n\n        File[] appAFiles = appAExternalFileDir.listFiles();\n        for(int i=0; i&lt;appAFiles.length; i++) {\n            String fileName = appAFiles[i].getName();\n            File destFile = new File(appBExternalFileDir, appAFiles[i].getName());\n\n            moveFileToDest(appAFiles[i], destFile);\n\n// I tried renameTo() but only found true/false, so I created moveFileToDest() and executed it.\n// renameTo() returned false.\n//            if (appAFiles[i].renameTo(destFile)) {\n//                Log.d(&quot;testLog&quot;, &quot;success to renameTo()&quot;);\n//            } else {\n//                Log.d(&quot;testlog&quot;, &quot;failure to renameTo()&quot;);\n//            }\n        }\n    }\n\n    void moveFileToDest(File sourceFile, File destinationFile) {\n        try {\n            // When I performed the move process described below without creating a new file first, a FileNotFoundException occurred, so I added createNewFile().\n            if (destinationFile.createNewFile()) { // throw java.io.IOException: open failed: EACCES (Permission denied)\n                Log.d(&quot;testlog&quot;, &quot;create success!!&quot;);\n            } else {\n                Log.d(&quot;testlog&quot;, &quot;create failed&quot;);\n            }\n\n            FileInputStream fis = new FileInputStream(sourceFile);\n            FileOutputStream fos = new FileOutputStream(destinationFile);\n\n            FileChannel sourceChannel = fis.getChannel();\n            FileChannel destinationChannel = fos.getChannel();\n\n            sourceChannel.transferTo(0, sourceChannel.size(), destinationChannel);\n\n            sourceChannel.close();\n            fis.close();\n            destinationChannel.close();\n            fos.close();\n\n            sourceFile.delete();\n        } catch (IOException e) {\n            e.printStackTrace();\n        }\n    }\n</code></pre>\n<p>AndroidManifest.xml(Excerpt)</p>\n<pre><code>    &lt;uses-permission android:name=&quot;android.permission.READ_EXTERNAL_STORAGE&quot;/&gt;\n    &lt;uses-permission android:name=&quot;android.permission.WRITE_EXTERNAL_STORAGE&quot;/&gt;\n</code></pre>\n<p>canRead() and canWrite() of appAExternalFileDir and appBExternalFileDir are both true.\nBut when I try to create a file inside appBExternalFileDir I get an IOException and it says Permission Denied.</p>\n<p>what should i do.\nI am glad if you could tell me.\n(If there is any missing information, please let me know so I can add it)</p>\n"},{"tags":["java","android","animation"],"comments":[{"owner":{"account_id":6024742,"reputation":19213,"user_id":4730812,"accept_rate":100,"display_name":"piotrek1543"},"score":0,"creation_date":1451604131,"post_id":34552122,"comment_id":56847309,"body_markdown":"Check this https://android-arsenal.com/tag/173","body":"Check this <a href=\"https://android-arsenal.com/tag/173\" rel=\"nofollow noreferrer\">android-arsenal.com/tag/173</a>"},{"owner":{"account_id":6515001,"reputation":2582,"user_id":5041124,"accept_rate":68,"display_name":"Nick Mowen"},"score":1,"creation_date":1451608260,"post_id":34552122,"comment_id":56848040,"body_markdown":"Holy Crap, that is amazing. Welp I just found something that I like, thanks!","body":"Holy Crap, that is amazing. Welp I just found something that I like, thanks!"},{"owner":{"account_id":6024742,"reputation":19213,"user_id":4730812,"accept_rate":100,"display_name":"piotrek1543"},"score":0,"creation_date":1451608473,"post_id":34552122,"comment_id":56848076,"body_markdown":"nice to hear. I&#39;ve already added this as answer","body":"nice to hear. I&#39;ve already added this as answer"}],"answers":[{"comments":[{"owner":{"account_id":6515001,"reputation":2582,"user_id":5041124,"accept_rate":68,"display_name":"Nick Mowen"},"score":0,"creation_date":1451612270,"post_id":34552703,"comment_id":56848633,"body_markdown":"ok, maybe you can help me. I am using [this] (https://github.com/bowyer-app/FabTransitionLayout) library with the bottom sheet version. I keep getting a crash about RevealLinearLayout but that isn&#39;t in the main tutorial so I am not sure what is going on. Any Idea?","body":"ok, maybe you can help me. I am using [this] (<a href=\"https://github.com/bowyer-app/FabTransitionLayout\" rel=\"nofollow noreferrer\">github.com/bowyer-app/FabTransitionLayout</a>) library with the bottom sheet version. I keep getting a crash about RevealLinearLayout but that isn&#39;t in the main tutorial so I am not sure what is going on. Any Idea?"},{"owner":{"account_id":6024742,"reputation":19213,"user_id":4730812,"accept_rate":100,"display_name":"piotrek1543"},"score":0,"creation_date":1451641234,"post_id":34552703,"comment_id":56852808,"body_markdown":"propably you need to add some more extra libs to build.gradle","body":"propably you need to add some more extra libs to build.gradle"}],"tags":[],"owner":{"account_id":6024742,"reputation":19213,"user_id":4730812,"accept_rate":100,"display_name":"piotrek1543"},"comment_count":2,"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1451608772,"creation_date":1451608453,"answer_id":34552703,"question_id":34552122,"body_markdown":"If you don&#39;t want to spend much time to create a custom `xml` animation to your Floating Action Button, please check this additional FAB collections:\r\n\r\nhttps://android-arsenal.com/tag/173\r\n\r\nI think one of these looks pretty similar to your desired one.\r\n\r\nYou may also visit this tutorial: http://www.learn2crack.com/2015/10/android-floating-action-button-animations.html\r\n\r\nAlso check on StackOverflow:\r\n\r\n - https://stackoverflow.com/questions/27922191/floating-action-button-animation\r\n - https://stackoverflow.com/questions/29951833/grow-animation-for-floating-action-button\r\n\r\nHope it help ","title":"Animation xml for FAB to AlertDialog?","body":"<p>If you don't want to spend much time to create a custom <code>xml</code> animation to your Floating Action Button, please check this additional FAB collections:</p>\n\n<p><a href=\"https://android-arsenal.com/tag/173\" rel=\"nofollow noreferrer\">https://android-arsenal.com/tag/173</a></p>\n\n<p>I think one of these looks pretty similar to your desired one.</p>\n\n<p>You may also visit this tutorial: <a href=\"http://www.learn2crack.com/2015/10/android-floating-action-button-animations.html\" rel=\"nofollow noreferrer\">http://www.learn2crack.com/2015/10/android-floating-action-button-animations.html</a></p>\n\n<p>Also check on StackOverflow:</p>\n\n<ul>\n<li><a href=\"https://stackoverflow.com/questions/27922191/floating-action-button-animation\">Floating Action Button Animation</a></li>\n<li><a href=\"https://stackoverflow.com/questions/29951833/grow-animation-for-floating-action-button\">Grow Animation for Floating Action Button</a></li>\n</ul>\n\n<p>Hope it help </p>\n"}],"owner":{"account_id":6515001,"reputation":2582,"user_id":5041124,"accept_rate":68,"display_name":"Nick Mowen"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2540,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"accepted_answer_id":34552703,"answer_count":1,"score":3,"last_activity_date":1695190482,"creation_date":1451601120,"question_id":34552122,"body_markdown":"I am trying to create an animation [like this one][1] to go from an fab to alert dialog. I am not sure how to define this animation whether it is via xml or an Animation Class. I am a big noob when it comes to defining animations so any and all help is greatly appreciated!\r\n\r\n\r\n\r\n  [1]: http://gfycat.com/AnyEverlastingHairstreakbutterfly","title":"Animation xml for FAB to AlertDialog?","body":"<p>I am trying to create an animation <a href=\"http://gfycat.com/AnyEverlastingHairstreakbutterfly\" rel=\"nofollow\">like this one</a> to go from an fab to alert dialog. I am not sure how to define this animation whether it is via xml or an Animation Class. I am a big noob when it comes to defining animations so any and all help is greatly appreciated!</p>\n"},{"tags":["java","email","jaxb"],"owner":{"account_id":29488040,"reputation":1,"user_id":22597517,"display_name":"hanbom"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":20,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1695190344,"creation_date":1695190344,"question_id":77139713,"body_markdown":"I&#39;m writing an MVC Java program, using JAXB to generate XML and send to a display jsp. The code runs and the XML is displayed correctly in the browser, but I&#39;m still getting a JAXBException in the IDE console.\r\n\r\nMy java version is 11 therefore i add jaxb-api-2.3.1.jar to dependencies\r\n\r\nCan anyone help?\r\n\r\n**Web Send**\r\n```\r\npublic class MailService{\r\n\t\r\n\t@Autowired\r\n\tprivate ModuleConfig config;\r\n\t\r\n\t@Override\r\n\tpublic void mailSend() throws Exception {\r\n\t\tSendMail mail = new SendMail();\r\n\t\tmail.setSenderID(&quot;Email&quot;);\r\n\t\tmail.setMsgTo(&quot;Email&quot;);\r\n\t\tmail.setSubject(&quot;subject.&quot;);\r\n\t\tmail.setContents(&quot;test conents&quot;);\r\n\r\n\t\t\r\n\t\tSaajSoapMessageFactory messageFactory = new SaajSoapMessageFactory(\r\n                MessageFactory.newInstance());\r\n        messageFactory.afterPropertiesSet();\r\n\r\n        WebServiceTemplate webServiceTemplate = new WebServiceGatewaySupport() {}.getWebServiceTemplate();\r\n        Jaxb2Marshaller marshaller = new Jaxb2Marshaller();\r\n\r\n        marshaller.setPackagesToScan(&quot;package.SendMail&quot;);\r\n        marshaller.afterPropertiesSet();\r\n        webServiceTemplate.setDefaultUri(URL);\r\n        webServiceTemplate.setMarshaller(marshaller);\r\n        webServiceTemplate.setUnmarshaller(marshaller);\r\n        webServiceTemplate.afterPropertiesSet();\r\n\r\n       webServiceTemplate\r\n                .marshalSendAndReceive(\r\n                \t\tSendURL\r\n                \t\t, mail\r\n                \t\t,new SoapActionCallback(CallbackURL));\r\n\t}\r\n}\r\n```\r\n\r\n**SendMail Class**\r\n```\r\n@XmlAccessorType(XmlAccessType.FIELD)\r\n@XmlType(name = &quot;&quot;, propOrder = {\r\n    &quot;senderID&quot;,\r\n    &quot;msgTo&quot;,\r\n    &quot;msgCC&quot;,\r\n    &quot;msgBcc&quot;,\r\n    &quot;subject&quot;,\r\n    &quot;contents&quot;,\r\n    &quot;attachments&quot;,\r\n    &quot;attachmentUrl&quot;\r\n})\r\n@XmlRootElement(name = &quot;SendMail&quot;)\r\npublic class SendMail {\r\n\r\n    protected String senderID;\r\n    protected String msgTo;\r\n    protected String msgCC;\r\n    protected String msgBcc;\r\n    protected String subject;\r\n    protected String contents;\r\n    protected String attachments;\r\n    protected String attachmentUrl;\r\n}\r\n```\r\n\r\n**Xml Data Format**\r\n```\r\n&lt;SendMail&gt;\r\n  &lt;senderID&gt;string&lt;/senderID&gt;\r\n  &lt;msgTo&gt;string&lt;/msgTo&gt;\r\n  &lt;msgCC&gt;string&lt;/msgCC&gt;\r\n  &lt;msgBcc&gt;string&lt;/msgBcc&gt;\r\n  &lt;subject&gt;string&lt;/subject&gt;\r\n  &lt;contents&gt;string&lt;/contents&gt;\r\n  &lt;attachments&gt;string&lt;/attachments&gt;\r\n  &lt;attachmentUrl&gt;string&lt;/attachmentUrl&gt;\r\n&lt;/SendMail&gt;\r\n```\r\n\r\n**Stack Trace**\r\n```\r\njavax.xml.bind.JAXBException: javax.xml.bind.JAXBException: class SendMail nor any of its super class is known to this context.\r\n\tat com.sun.xml.bind.v2.runtime.JAXBContextImpl.getBeanInfo(JAXBContextImpl.java:593)\r\n\tat com.sun.xml.bind.v2.runtime.XMLSerializer.childAsRoot(XMLSerializer.java:482)\r\n\tat com.sun.xml.bind.v2.runtime.MarshallerImpl.write(MarshallerImpl.java:328)\r\n\tat com.sun.xml.bind.v2.runtime.MarshallerImpl.marshal(MarshallerImpl.java:256)\r\n\tat org.springframework.oxm.jaxb.Jaxb2Marshaller.marshal(Jaxb2Marshaller.java:709)\r\n\tat org.springframework.ws.support.MarshallingUtils.marshal(MarshallingUtils.java:81)\r\n\tat org.springframework.ws.client.core.WebServiceTemplate$2.doWithMessage(WebServiceTemplate.java:399)\r\n\tat org.springframework.ws.client.core.WebServiceTemplate.doSendAndReceive(WebServiceTemplate.java:590)\r\n\tat org.springframework.ws.client.core.WebServiceTemplate.sendAndReceive(WebServiceTemplate.java:555)\r\n\tat org.springframework.ws.client.core.WebServiceTemplate.marshalSendAndReceive(WebServiceTemplate.java:390)\r\n# \tat com.edu.test.scheduler.domain.mailPoller.launcher.MailService.mailSend(MailService.java:52)\r\n\tat com.edu.test.scheduler.domain.mailPoller.launcher.MailLancher.MailStart(MailLancher.java:27)\r\n\tat com.edu.test.scheduler.core.controller.BatchJobController.sync(BatchJobController.java:181)\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)\r\n\tat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:568)\r\n\tat org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:190)\r\n\tat org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:138)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:105)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:878)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:792)\r\n\tat org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)\r\n\tat org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1040)\r\n\tat org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:943)\r\n\tat org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006)\r\n\tat org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:909)\r\n\tat javax.servlet.http.HttpServlet.service(HttpServlet.java:652)\r\n\tat org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883)\r\n\tat javax.servlet.http.HttpServlet.service(HttpServlet.java:733)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:231)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)\r\n\tat org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)\r\n\tat org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:209)\r\n\tat org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:178)\r\n\tat org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:358)\r\n\tat org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:271)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)\r\n\tat org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)\r\n\tat org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)\r\n\tat org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)\r\n\tat org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:202)\r\n\tat org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97)\r\n\tat org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:542)\r\n\tat org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:143)\r\n\tat org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92)\r\n\tat org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78)\r\n\tat org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:343)\r\n\tat org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:374)\r\n\tat org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65)\r\n\tat org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:868)\r\n\tat org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1590)\r\n\tat org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49)\r\n\tat java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136)\r\n\tat java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635)\r\n\tat org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)\r\n\tat java.base/java.lang.Thread.run(Thread.java:833)\r\n```\r\n\r\nI tried to send mail,\r\nI expected the mail to go normally.","title":"javax.xml.bind.JAXBException : SendMail of its super class is known to this context (gradle)","body":"<p>I'm writing an MVC Java program, using JAXB to generate XML and send to a display jsp. The code runs and the XML is displayed correctly in the browser, but I'm still getting a JAXBException in the IDE console.</p>\n<p>My java version is 11 therefore i add jaxb-api-2.3.1.jar to dependencies</p>\n<p>Can anyone help?</p>\n<p><strong>Web Send</strong></p>\n<pre><code>public class MailService{\n    \n    @Autowired\n    private ModuleConfig config;\n    \n    @Override\n    public void mailSend() throws Exception {\n        SendMail mail = new SendMail();\n        mail.setSenderID(&quot;Email&quot;);\n        mail.setMsgTo(&quot;Email&quot;);\n        mail.setSubject(&quot;subject.&quot;);\n        mail.setContents(&quot;test conents&quot;);\n\n        \n        SaajSoapMessageFactory messageFactory = new SaajSoapMessageFactory(\n                MessageFactory.newInstance());\n        messageFactory.afterPropertiesSet();\n\n        WebServiceTemplate webServiceTemplate = new WebServiceGatewaySupport() {}.getWebServiceTemplate();\n        Jaxb2Marshaller marshaller = new Jaxb2Marshaller();\n\n        marshaller.setPackagesToScan(&quot;package.SendMail&quot;);\n        marshaller.afterPropertiesSet();\n        webServiceTemplate.setDefaultUri(URL);\n        webServiceTemplate.setMarshaller(marshaller);\n        webServiceTemplate.setUnmarshaller(marshaller);\n        webServiceTemplate.afterPropertiesSet();\n\n       webServiceTemplate\n                .marshalSendAndReceive(\n                        SendURL\n                        , mail\n                        ,new SoapActionCallback(CallbackURL));\n    }\n}\n</code></pre>\n<p><strong>SendMail Class</strong></p>\n<pre><code>@XmlAccessorType(XmlAccessType.FIELD)\n@XmlType(name = &quot;&quot;, propOrder = {\n    &quot;senderID&quot;,\n    &quot;msgTo&quot;,\n    &quot;msgCC&quot;,\n    &quot;msgBcc&quot;,\n    &quot;subject&quot;,\n    &quot;contents&quot;,\n    &quot;attachments&quot;,\n    &quot;attachmentUrl&quot;\n})\n@XmlRootElement(name = &quot;SendMail&quot;)\npublic class SendMail {\n\n    protected String senderID;\n    protected String msgTo;\n    protected String msgCC;\n    protected String msgBcc;\n    protected String subject;\n    protected String contents;\n    protected String attachments;\n    protected String attachmentUrl;\n}\n</code></pre>\n<p><strong>Xml Data Format</strong></p>\n<pre><code>&lt;SendMail&gt;\n  &lt;senderID&gt;string&lt;/senderID&gt;\n  &lt;msgTo&gt;string&lt;/msgTo&gt;\n  &lt;msgCC&gt;string&lt;/msgCC&gt;\n  &lt;msgBcc&gt;string&lt;/msgBcc&gt;\n  &lt;subject&gt;string&lt;/subject&gt;\n  &lt;contents&gt;string&lt;/contents&gt;\n  &lt;attachments&gt;string&lt;/attachments&gt;\n  &lt;attachmentUrl&gt;string&lt;/attachmentUrl&gt;\n&lt;/SendMail&gt;\n</code></pre>\n<p><strong>Stack Trace</strong></p>\n<pre><code>javax.xml.bind.JAXBException: javax.xml.bind.JAXBException: class SendMail nor any of its super class is known to this context.\n    at com.sun.xml.bind.v2.runtime.JAXBContextImpl.getBeanInfo(JAXBContextImpl.java:593)\n    at com.sun.xml.bind.v2.runtime.XMLSerializer.childAsRoot(XMLSerializer.java:482)\n    at com.sun.xml.bind.v2.runtime.MarshallerImpl.write(MarshallerImpl.java:328)\n    at com.sun.xml.bind.v2.runtime.MarshallerImpl.marshal(MarshallerImpl.java:256)\n    at org.springframework.oxm.jaxb.Jaxb2Marshaller.marshal(Jaxb2Marshaller.java:709)\n    at org.springframework.ws.support.MarshallingUtils.marshal(MarshallingUtils.java:81)\n    at org.springframework.ws.client.core.WebServiceTemplate$2.doWithMessage(WebServiceTemplate.java:399)\n    at org.springframework.ws.client.core.WebServiceTemplate.doSendAndReceive(WebServiceTemplate.java:590)\n    at org.springframework.ws.client.core.WebServiceTemplate.sendAndReceive(WebServiceTemplate.java:555)\n    at org.springframework.ws.client.core.WebServiceTemplate.marshalSendAndReceive(WebServiceTemplate.java:390)\n#   at com.edu.test.scheduler.domain.mailPoller.launcher.MailService.mailSend(MailService.java:52)\n    at com.edu.test.scheduler.domain.mailPoller.launcher.MailLancher.MailStart(MailLancher.java:27)\n    at com.edu.test.scheduler.core.controller.BatchJobController.sync(BatchJobController.java:181)\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)\n    at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n    at java.base/java.lang.reflect.Method.invoke(Method.java:568)\n    at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:190)\n    at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:138)\n    at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:105)\n    at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:878)\n    at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:792)\n    at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)\n    at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1040)\n    at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:943)\n    at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006)\n    at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:909)\n    at javax.servlet.http.HttpServlet.service(HttpServlet.java:652)\n    at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883)\n    at javax.servlet.http.HttpServlet.service(HttpServlet.java:733)\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:231)\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)\n    at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53)\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)\n    at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:209)\n    at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:178)\n    at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:358)\n    at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:271)\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)\n    at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)\n    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)\n    at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)\n    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)\n    at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)\n    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)\n    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:202)\n    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97)\n    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:542)\n    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:143)\n    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92)\n    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78)\n    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:343)\n    at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:374)\n    at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65)\n    at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:868)\n    at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1590)\n    at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49)\n    at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136)\n    at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635)\n    at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)\n    at java.base/java.lang.Thread.run(Thread.java:833)\n</code></pre>\n<p>I tried to send mail,\nI expected the mail to go normally.</p>\n"},{"tags":["java","mongodb","codec","bson","quarkus-panache"],"answers":[{"tags":[],"owner":{"account_id":4843120,"reputation":731,"user_id":3907616,"display_name":"Yuna Braska"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1622897191,"creation_date":1622897191,"answer_id":67849755,"question_id":67849754,"body_markdown":"So I created the following hack, since my debug time and patience is really limited and I want to continue working instead of endless debugging others code\r\n\r\n**CODEC:**\r\n```java\r\nimport org.bson.BsonDocument;\r\nimport org.bson.BsonDocumentWriter;\r\nimport org.bson.BsonReader;\r\nimport org.bson.BsonType;\r\nimport org.bson.BsonWriter;\r\nimport org.bson.codecs.Codec;\r\nimport org.bson.codecs.DecoderContext;\r\nimport org.bson.codecs.EncoderContext;\r\nimport org.bson.codecs.configuration.CodecConfigurationException;\r\nimport org.bson.json.JsonReader;\r\n\r\nimport java.util.HashMap;\r\nimport java.util.Map;\r\nimport java.util.UUID;\r\n\r\npublic class MapCodec&lt;K, T&gt; implements Codec&lt;Map&lt;K, T&gt;&gt; {\r\n    private final Class&lt;Map&lt;K, T&gt;&gt; encoderClass;\r\n    private final Codec&lt;K&gt; keyCodec;\r\n    private final Codec&lt;T&gt; valueCodec;\r\n\r\n    MapCodec(final Class&lt;Map&lt;K, T&gt;&gt; encoderClass, final Codec&lt;K&gt; keyCodec, final Codec&lt;T&gt; valueCodec) {\r\n        this.encoderClass = encoderClass;\r\n        this.keyCodec = keyCodec;\r\n        this.valueCodec = valueCodec;\r\n    }\r\n\r\n    @Override\r\n    public void encode(final BsonWriter writer, final Map&lt;K, T&gt; map, final EncoderContext encoderContext) {\r\n        try (var dummyWriter = new BsonDocumentWriter(new BsonDocument())) {\r\n            dummyWriter.writeStartDocument();\r\n            writer.writeStartDocument();\r\n            for (final Map.Entry&lt;K, T&gt; entry : map.entrySet()) {\r\n                var dummyId = UUID.randomUUID().toString();\r\n                dummyWriter.writeName(dummyId);\r\n                keyCodec.encode(dummyWriter, entry.getKey(), encoderContext);\r\n                //TODO: could it be simpler by something like JsonWriter?\r\n                writer.writeName(dummyWriter.getDocument().asDocument().get(dummyId).asString().getValue());\r\n                valueCodec.encode(writer, entry.getValue(), encoderContext);\r\n            }\r\n            dummyWriter.writeEndDocument();\r\n        }\r\n        writer.writeEndDocument();\r\n    }\r\n\r\n    @Override\r\n    public Map&lt;K, T&gt; decode(final BsonReader reader, final DecoderContext context) {\r\n        reader.readStartDocument();\r\n        Map&lt;K, T&gt; map = getInstance();\r\n        while (reader.readBsonType() != BsonType.END_OF_DOCUMENT) {\r\n            //TODO: what if the key is not a String aka not wrapped in double quotes?\r\n            var nameReader = new JsonReader(&quot;{\\&quot;key:\\&quot;:\\&quot;&quot; + reader.readName() + &quot;\\&quot;}&quot;);\r\n            nameReader.readStartDocument();\r\n            nameReader.readBsonType();\r\n            if (reader.getCurrentBsonType() == BsonType.NULL) {\r\n                map.put(keyCodec.decode(nameReader, context), null);\r\n                reader.readNull();\r\n            } else {\r\n                map.put(keyCodec.decode(nameReader, context), valueCodec.decode(reader, context));\r\n            }\r\n            nameReader.readEndDocument();\r\n        }\r\n        reader.readEndDocument();\r\n        return map;\r\n    }\r\n\r\n    @Override\r\n    public Class&lt;Map&lt;K, T&gt;&gt; getEncoderClass() {\r\n        return encoderClass;\r\n    }\r\n\r\n    private Map&lt;K, T&gt; getInstance() {\r\n        if (encoderClass.isInterface()) {\r\n            return new HashMap&lt;&gt;();\r\n        }\r\n        try {\r\n            return encoderClass.getDeclaredConstructor().newInstance();\r\n        } catch (final Exception e) {\r\n            throw new CodecConfigurationException(e.getMessage(), e);\r\n        }\r\n    }\r\n}\r\n```\r\n\r\n**PROVIDER:**\r\n```java\r\nimport org.bson.BsonReader;\r\nimport org.bson.BsonType;\r\nimport org.bson.BsonWriter;\r\nimport org.bson.codecs.Codec;\r\nimport org.bson.codecs.DecoderContext;\r\nimport org.bson.codecs.EncoderContext;\r\nimport org.bson.codecs.configuration.CodecConfigurationException;\r\nimport org.bson.codecs.pojo.PropertyCodecProvider;\r\nimport org.bson.codecs.pojo.PropertyCodecRegistry;\r\nimport org.bson.codecs.pojo.TypeWithTypeParameters;\r\n\r\nimport java.util.HashMap;\r\nimport java.util.Map;\r\n\r\npublic class MapCodecProvider implements PropertyCodecProvider {\r\n\r\n    @Override\r\n    @SuppressWarnings({&quot;rawtypes&quot;, &quot;unchecked&quot;})\r\n    public &lt;T&gt; Codec&lt;T&gt; get(final TypeWithTypeParameters&lt;T&gt; type, final PropertyCodecRegistry registry) {\r\n        if (Map.class.isAssignableFrom(type.getType()) &amp;&amp; type.getTypeParameters().size() == 2) {\r\n            return new berlin.yuna.royaltanks.config.db.MapCodec(type.getType(), registry.get(type.getTypeParameters().get(0)), registry.get(type.getTypeParameters().get(1)));\r\n        } else {\r\n            return null;\r\n        }\r\n    }\r\n\r\n    private static class MapCodec&lt;T&gt; implements Codec&lt;Map&lt;String, T&gt;&gt; {\r\n        private final Class&lt;Map&lt;String, T&gt;&gt; encoderClass;\r\n        private final Codec&lt;T&gt; codec;\r\n\r\n        MapCodec(final Class&lt;Map&lt;String, T&gt;&gt; encoderClass, final Codec&lt;T&gt; codec) {\r\n            this.encoderClass = encoderClass;\r\n            this.codec = codec;\r\n        }\r\n\r\n        @Override\r\n        public void encode(final BsonWriter writer, final Map&lt;String, T&gt; map, final EncoderContext encoderContext) {\r\n            writer.writeStartDocument();\r\n            for (final Map.Entry&lt;String, T&gt; entry : map.entrySet()) {\r\n                writer.writeName(entry.getKey());\r\n                if (entry.getValue() == null) {\r\n                    writer.writeNull();\r\n                } else {\r\n                    codec.encode(writer, entry.getValue(), encoderContext);\r\n                }\r\n            }\r\n            writer.writeEndDocument();\r\n        }\r\n\r\n        @Override\r\n        public Map&lt;String, T&gt; decode(final BsonReader reader, final DecoderContext context) {\r\n            reader.readStartDocument();\r\n            Map&lt;String, T&gt; map = getInstance();\r\n            while (reader.readBsonType() != BsonType.END_OF_DOCUMENT) {\r\n                if (reader.getCurrentBsonType() == BsonType.NULL) {\r\n                    map.put(reader.readName(), null);\r\n                    reader.readNull();\r\n                } else {\r\n                    map.put(reader.readName(), codec.decode(reader, context));\r\n                }\r\n            }\r\n            reader.readEndDocument();\r\n            return map;\r\n        }\r\n\r\n        @Override\r\n        public Class&lt;Map&lt;String, T&gt;&gt; getEncoderClass() {\r\n            return encoderClass;\r\n        }\r\n\r\n        private Map&lt;String, T&gt; getInstance() {\r\n            if (encoderClass.isInterface()) {\r\n                return new HashMap&lt;&gt;();\r\n            }\r\n            try {\r\n                return encoderClass.getDeclaredConstructor().newInstance();\r\n            } catch (final Exception e) {\r\n                throw new CodecConfigurationException(e.getMessage(), e);\r\n            }\r\n        }\r\n    }\r\n}\r\n```","title":"MongoDb Map&lt;K, V&gt; codec - Maps MUST have string keys FIX","body":"<p>So I created the following hack, since my debug time and patience is really limited and I want to continue working instead of endless debugging others code</p>\n<p><strong>CODEC:</strong></p>\n<pre class=\"lang-java prettyprint-override\"><code>import org.bson.BsonDocument;\nimport org.bson.BsonDocumentWriter;\nimport org.bson.BsonReader;\nimport org.bson.BsonType;\nimport org.bson.BsonWriter;\nimport org.bson.codecs.Codec;\nimport org.bson.codecs.DecoderContext;\nimport org.bson.codecs.EncoderContext;\nimport org.bson.codecs.configuration.CodecConfigurationException;\nimport org.bson.json.JsonReader;\n\nimport java.util.HashMap;\nimport java.util.Map;\nimport java.util.UUID;\n\npublic class MapCodec&lt;K, T&gt; implements Codec&lt;Map&lt;K, T&gt;&gt; {\n    private final Class&lt;Map&lt;K, T&gt;&gt; encoderClass;\n    private final Codec&lt;K&gt; keyCodec;\n    private final Codec&lt;T&gt; valueCodec;\n\n    MapCodec(final Class&lt;Map&lt;K, T&gt;&gt; encoderClass, final Codec&lt;K&gt; keyCodec, final Codec&lt;T&gt; valueCodec) {\n        this.encoderClass = encoderClass;\n        this.keyCodec = keyCodec;\n        this.valueCodec = valueCodec;\n    }\n\n    @Override\n    public void encode(final BsonWriter writer, final Map&lt;K, T&gt; map, final EncoderContext encoderContext) {\n        try (var dummyWriter = new BsonDocumentWriter(new BsonDocument())) {\n            dummyWriter.writeStartDocument();\n            writer.writeStartDocument();\n            for (final Map.Entry&lt;K, T&gt; entry : map.entrySet()) {\n                var dummyId = UUID.randomUUID().toString();\n                dummyWriter.writeName(dummyId);\n                keyCodec.encode(dummyWriter, entry.getKey(), encoderContext);\n                //TODO: could it be simpler by something like JsonWriter?\n                writer.writeName(dummyWriter.getDocument().asDocument().get(dummyId).asString().getValue());\n                valueCodec.encode(writer, entry.getValue(), encoderContext);\n            }\n            dummyWriter.writeEndDocument();\n        }\n        writer.writeEndDocument();\n    }\n\n    @Override\n    public Map&lt;K, T&gt; decode(final BsonReader reader, final DecoderContext context) {\n        reader.readStartDocument();\n        Map&lt;K, T&gt; map = getInstance();\n        while (reader.readBsonType() != BsonType.END_OF_DOCUMENT) {\n            //TODO: what if the key is not a String aka not wrapped in double quotes?\n            var nameReader = new JsonReader(&quot;{\\&quot;key:\\&quot;:\\&quot;&quot; + reader.readName() + &quot;\\&quot;}&quot;);\n            nameReader.readStartDocument();\n            nameReader.readBsonType();\n            if (reader.getCurrentBsonType() == BsonType.NULL) {\n                map.put(keyCodec.decode(nameReader, context), null);\n                reader.readNull();\n            } else {\n                map.put(keyCodec.decode(nameReader, context), valueCodec.decode(reader, context));\n            }\n            nameReader.readEndDocument();\n        }\n        reader.readEndDocument();\n        return map;\n    }\n\n    @Override\n    public Class&lt;Map&lt;K, T&gt;&gt; getEncoderClass() {\n        return encoderClass;\n    }\n\n    private Map&lt;K, T&gt; getInstance() {\n        if (encoderClass.isInterface()) {\n            return new HashMap&lt;&gt;();\n        }\n        try {\n            return encoderClass.getDeclaredConstructor().newInstance();\n        } catch (final Exception e) {\n            throw new CodecConfigurationException(e.getMessage(), e);\n        }\n    }\n}\n</code></pre>\n<p><strong>PROVIDER:</strong></p>\n<pre class=\"lang-java prettyprint-override\"><code>import org.bson.BsonReader;\nimport org.bson.BsonType;\nimport org.bson.BsonWriter;\nimport org.bson.codecs.Codec;\nimport org.bson.codecs.DecoderContext;\nimport org.bson.codecs.EncoderContext;\nimport org.bson.codecs.configuration.CodecConfigurationException;\nimport org.bson.codecs.pojo.PropertyCodecProvider;\nimport org.bson.codecs.pojo.PropertyCodecRegistry;\nimport org.bson.codecs.pojo.TypeWithTypeParameters;\n\nimport java.util.HashMap;\nimport java.util.Map;\n\npublic class MapCodecProvider implements PropertyCodecProvider {\n\n    @Override\n    @SuppressWarnings({&quot;rawtypes&quot;, &quot;unchecked&quot;})\n    public &lt;T&gt; Codec&lt;T&gt; get(final TypeWithTypeParameters&lt;T&gt; type, final PropertyCodecRegistry registry) {\n        if (Map.class.isAssignableFrom(type.getType()) &amp;&amp; type.getTypeParameters().size() == 2) {\n            return new berlin.yuna.royaltanks.config.db.MapCodec(type.getType(), registry.get(type.getTypeParameters().get(0)), registry.get(type.getTypeParameters().get(1)));\n        } else {\n            return null;\n        }\n    }\n\n    private static class MapCodec&lt;T&gt; implements Codec&lt;Map&lt;String, T&gt;&gt; {\n        private final Class&lt;Map&lt;String, T&gt;&gt; encoderClass;\n        private final Codec&lt;T&gt; codec;\n\n        MapCodec(final Class&lt;Map&lt;String, T&gt;&gt; encoderClass, final Codec&lt;T&gt; codec) {\n            this.encoderClass = encoderClass;\n            this.codec = codec;\n        }\n\n        @Override\n        public void encode(final BsonWriter writer, final Map&lt;String, T&gt; map, final EncoderContext encoderContext) {\n            writer.writeStartDocument();\n            for (final Map.Entry&lt;String, T&gt; entry : map.entrySet()) {\n                writer.writeName(entry.getKey());\n                if (entry.getValue() == null) {\n                    writer.writeNull();\n                } else {\n                    codec.encode(writer, entry.getValue(), encoderContext);\n                }\n            }\n            writer.writeEndDocument();\n        }\n\n        @Override\n        public Map&lt;String, T&gt; decode(final BsonReader reader, final DecoderContext context) {\n            reader.readStartDocument();\n            Map&lt;String, T&gt; map = getInstance();\n            while (reader.readBsonType() != BsonType.END_OF_DOCUMENT) {\n                if (reader.getCurrentBsonType() == BsonType.NULL) {\n                    map.put(reader.readName(), null);\n                    reader.readNull();\n                } else {\n                    map.put(reader.readName(), codec.decode(reader, context));\n                }\n            }\n            reader.readEndDocument();\n            return map;\n        }\n\n        @Override\n        public Class&lt;Map&lt;String, T&gt;&gt; getEncoderClass() {\n            return encoderClass;\n        }\n\n        private Map&lt;String, T&gt; getInstance() {\n            if (encoderClass.isInterface()) {\n                return new HashMap&lt;&gt;();\n            }\n            try {\n                return encoderClass.getDeclaredConstructor().newInstance();\n            } catch (final Exception e) {\n                throw new CodecConfigurationException(e.getMessage(), e);\n            }\n        }\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":21074717,"reputation":1,"user_id":15490217,"display_name":"benjamon"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1663303446,"creation_date":1663303446,"answer_id":73739948,"question_id":67849754,"body_markdown":"For others running into this problem, I&#39;ve made a public repository based on your solution with added handling of codecs that don&#39;t accept BsonString using PropertyEditors: https://github.com/benjamonnguyen/mongodb-bson-codec\r\n\r\nGrain of salt, this is my first public &quot;contribution&quot; to the community... all criticisms welcome!","title":"MongoDb Map&lt;K, V&gt; codec - Maps MUST have string keys FIX","body":"<p>For others running into this problem, I've made a public repository based on your solution with added handling of codecs that don't accept BsonString using PropertyEditors: <a href=\"https://github.com/benjamonnguyen/mongodb-bson-codec\" rel=\"nofollow noreferrer\">https://github.com/benjamonnguyen/mongodb-bson-codec</a></p>\n<p>Grain of salt, this is my first public &quot;contribution&quot; to the community... all criticisms welcome!</p>\n"}],"owner":{"account_id":4843120,"reputation":731,"user_id":3907616,"display_name":"Yuna Braska"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1638,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":2,"score":1,"last_activity_date":1695190221,"creation_date":1622897191,"question_id":67849754,"body_markdown":"While using the mongo DB driver, got a really silly exception `Maps MUST have string keys, found class Enum instead`. \r\nI have found many issues like [this][1] where others failed like me.\r\n\r\n\r\nI can&#39;t really understand why the mondoDb driver does not encode the known key types like the values.\r\nMy wish would be that the mongoDB driver fixes this issue and also that the Frameworks like Quarkus could just provide a fix for that like me.\r\nFor all others, feel free to contribute and cleanup my hack as I am sure It can be done better.\r\n\r\n\r\n  [1]: https://jira.mongodb.org/browse/JAVA-2620","title":"MongoDb Map&lt;K, V&gt; codec - Maps MUST have string keys FIX","body":"<p>While using the mongo DB driver, got a really silly exception <code>Maps MUST have string keys, found class Enum instead</code>.\nI have found many issues like <a href=\"https://jira.mongodb.org/browse/JAVA-2620\" rel=\"nofollow noreferrer\">this</a> where others failed like me.</p>\n<p>I can't really understand why the mondoDb driver does not encode the known key types like the values.\nMy wish would be that the mongoDB driver fixes this issue and also that the Frameworks like Quarkus could just provide a fix for that like me.\nFor all others, feel free to contribute and cleanup my hack as I am sure It can be done better.</p>\n"},{"tags":["java","spring-boot"],"comments":[{"owner":{"account_id":2161358,"reputation":42669,"user_id":1915448,"accept_rate":96,"display_name":"g00glen00b"},"score":0,"creation_date":1695191511,"post_id":77139676,"comment_id":135989256,"body_markdown":"Can you show us how you use the `MyDTO` class? I created a new Spring Boot project and copied your code and it works fine for me. So I guess something is different about the way you construct or use `MyDTO`.","body":"Can you show us how you use the <code>MyDTO</code> class? I created a new Spring Boot project and copied your code and it works fine for me. So I guess something is different about the way you construct or use <code>MyDTO</code>."},{"owner":{"account_id":2161358,"reputation":42669,"user_id":1915448,"accept_rate":96,"display_name":"g00glen00b"},"score":1,"creation_date":1695191544,"post_id":77139676,"comment_id":135989262,"body_markdown":"@时间只会一直走 You do realize that Hexy is using the top voted answer on that question right?","body":"@时间只会一直走 You do realize that Hexy is using the top voted answer on that question right?"},{"owner":{"account_id":2597640,"reputation":836,"user_id":2250934,"accept_rate":64,"display_name":"Hexy"},"score":0,"creation_date":1695223446,"post_id":77139676,"comment_id":135996517,"body_markdown":"Do you mind sharing your repo where this is working?","body":"Do you mind sharing your repo where this is working?"}],"owner":{"account_id":2597640,"reputation":836,"user_id":2250934,"accept_rate":64,"display_name":"Hexy"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":103,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":0,"score":0,"last_activity_date":1695189871,"creation_date":1695189871,"question_id":77139676,"body_markdown":"I have a Springboot application.\r\n\r\nI am trying to convert a string in application.properties file to a Map in a DTO.\r\n\r\nMy application.properties looks like this:\r\n```\r\n...\r\ncom.myapp.someMap={&#39;key1&#39;:&#39;value1&#39;,&#39;key2&#39;:&#39;value2&#39;}\r\n```\r\n\r\nDTO.java\r\n```\r\nclass MyDTO {\r\n\r\n...\r\n@Value(&quot;#{${com.myapp.someMap}}&quot;)\r\nMap&lt;String, String&gt; someMap = new HashMap&lt;&gt;();\r\n\r\n}\r\n```\r\n\r\nI get this error when the Application tries to start\r\n\r\n```\r\nFailed to bind properties under &#39;com.myapp.someMap&#39; to java.util.Map&lt;java.lang.String, java.lang.String&gt;:\r\n\r\n\r\n    Reason: org.springframework.core.convert.ConverterNotFoundException: No converter found capable of converting from type [java.lang.String] to type [java.util.Map&lt;java.lang.String, java.lang.String&gt;]\r\n\r\n```","title":"No converter found capable of converting from type [java.lang.String] to type [java.util.Map&lt;java.lang.String, java.lang.String&gt;]","body":"<p>I have a Springboot application.</p>\n<p>I am trying to convert a string in application.properties file to a Map in a DTO.</p>\n<p>My application.properties looks like this:</p>\n<pre><code>...\ncom.myapp.someMap={'key1':'value1','key2':'value2'}\n</code></pre>\n<p>DTO.java</p>\n<pre><code>class MyDTO {\n\n...\n@Value(&quot;#{${com.myapp.someMap}}&quot;)\nMap&lt;String, String&gt; someMap = new HashMap&lt;&gt;();\n\n}\n</code></pre>\n<p>I get this error when the Application tries to start</p>\n<pre><code>Failed to bind properties under 'com.myapp.someMap' to java.util.Map&lt;java.lang.String, java.lang.String&gt;:\n\n\n    Reason: org.springframework.core.convert.ConverterNotFoundException: No converter found capable of converting from type [java.lang.String] to type [java.util.Map&lt;java.lang.String, java.lang.String&gt;]\n\n</code></pre>\n"},{"tags":["java","apache-poi","footer","poi-hssf","hssfworkbook"],"comments":[{"owner":{"account_id":4853829,"reputation":57305,"user_id":3915431,"display_name":"Axel Richter"},"score":0,"creation_date":1695119997,"post_id":77133458,"comment_id":135978693,"body_markdown":"Each Excel header and/or footer has three columns (left, center and right). Have you tried [HeaderFooter.setLeft](https://poi.apache.org/apidocs/dev/org/apache/poi/hssf/usermodel/HeaderFooter.html#setLeft-java.lang.String-), `.setCenter` and `.setRight`? If you tried, please show the used code and please tell us what problems you got.","body":"Each Excel header and/or footer has three columns (left, center and right). Have you tried <a href=\"https://poi.apache.org/apidocs/dev/org/apache/poi/hssf/usermodel/HeaderFooter.html#setLeft-java.lang.String-\" rel=\"nofollow noreferrer\">HeaderFooter.setLeft</a>, <code>.setCenter</code> and <code>.setRight</code>? If you tried, please show the used code and please tell us what problems you got."},{"owner":{"account_id":10082595,"reputation":49,"user_id":7452363,"display_name":"Shabrina Nurdiani S"},"score":0,"creation_date":1695177005,"post_id":77133458,"comment_id":135987929,"body_markdown":"hello @AxelRichter , I think the Excel footer just have one line, so I can&#39;t make a signature column in footer","body":"hello @AxelRichter , I think the Excel footer just have one line, so I can&#39;t make a signature column in footer"},{"owner":{"account_id":4853829,"reputation":57305,"user_id":3915431,"display_name":"Axel Richter"},"score":0,"creation_date":1695180276,"post_id":77133458,"comment_id":135988151,"body_markdown":"Seems you are not clear with the terms column and line in your question. And you seems not to know what Excel sheet footers are. Excel sheet footers consist of **one** line having **three** columns. Texts in columns may have line breaks but not really single table rows. How would you create your needed sheet footer using Excel GUI? Looks as if your screen shot shows Excel sheet cells but not a sheet footer.","body":"Seems you are not clear with the terms column and line in your question. And you seems not to know what Excel sheet footers are. Excel sheet footers consist of <b>one</b> line having <b>three</b> columns. Texts in columns may have line breaks but not really single table rows. How would you create your needed sheet footer using Excel GUI? Looks as if your screen shot shows Excel sheet cells but not a sheet footer."},{"owner":{"account_id":10082595,"reputation":49,"user_id":7452363,"display_name":"Shabrina Nurdiani S"},"score":0,"creation_date":1695184954,"post_id":77133458,"comment_id":135988508,"body_markdown":"hi @AxelRichter the first picture is column in the body, but I want move it into the footer, but I dont know how. If it possible when I try to create multiple lines in footer?","body":"hi @AxelRichter the first picture is column in the body, but I want move it into the footer, but I dont know how. If it possible when I try to create multiple lines in footer?"}],"answers":[{"comments":[{"owner":{"account_id":10082595,"reputation":49,"user_id":7452363,"display_name":"Shabrina Nurdiani S"},"score":0,"creation_date":1695177362,"post_id":77133748,"comment_id":135987956,"body_markdown":"hello, maybe I will considered to using JXLS but i dont know ho to using it. The JXLS is very new thing for me.","body":"hello, maybe I will considered to using JXLS but i dont know ho to using it. The JXLS is very new thing for me."},{"owner":{"account_id":1096470,"reputation":26066,"user_id":1089967,"accept_rate":59,"display_name":"lance-java"},"score":0,"creation_date":1695196202,"post_id":77133748,"comment_id":135990160,"body_markdown":"It&#39;s much easier to create a nicely styled spreadsheet by pointing and clicking in excel than it is in java code. For simple/ugly data only spreadsheets I&#39;ll use POI directly. But when I want to create a nicely styled spreadsheet I&#39;ll use JXLS. POI code will often be a few hundred lines of data and style logic mixed together. With JXLS the java code is only for the data, all the style logic is in the template and very simple to comprehend since it&#39;s [WYSIWYG](https://en.wikipedia.org/wiki/WYSIWYG)","body":"It&#39;s much easier to create a nicely styled spreadsheet by pointing and clicking in excel than it is in java code. For simple/ugly data only spreadsheets I&#39;ll use POI directly. But when I want to create a nicely styled spreadsheet I&#39;ll use JXLS. POI code will often be a few hundred lines of data and style logic mixed together. With JXLS the java code is only for the data, all the style logic is in the template and very simple to comprehend since it&#39;s <a href=\"https://en.wikipedia.org/wiki/WYSIWYG\" rel=\"nofollow noreferrer\">WYSIWYG</a>"},{"owner":{"account_id":10082595,"reputation":49,"user_id":7452363,"display_name":"Shabrina Nurdiani S"},"score":0,"creation_date":1695283442,"post_id":77133748,"comment_id":136004443,"body_markdown":"hi, dont you give me a tutorial how to create image/footer header using JXLS","body":"hi, dont you give me a tutorial how to create image/footer header using JXLS"},{"owner":{"account_id":1096470,"reputation":26066,"user_id":1089967,"accept_rate":59,"display_name":"lance-java"},"score":0,"creation_date":1695286259,"post_id":77133748,"comment_id":136005000,"body_markdown":"With JXLS you would do all the styling (images, bold etc) in Excel and put markup (for loops, placeholders) using excel too. In java you&#39;d merge your data with the template to create the final spreadsheet with a few lines of java code","body":"With JXLS you would do all the styling (images, bold etc) in Excel and put markup (for loops, placeholders) using excel too. In java you&#39;d merge your data with the template to create the final spreadsheet with a few lines of java code"}],"tags":[],"owner":{"account_id":1096470,"reputation":26066,"user_id":1089967,"accept_rate":59,"display_name":"lance-java"},"comment_count":4,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695119230,"creation_date":1695119230,"answer_id":77133748,"question_id":77133458,"body_markdown":"Have you considered using [JXLS](https://jxls.sourceforge.net/getting_started.html)?\r\n\r\nJXLS is a small wrapper around [Apache POI](https://poi.apache.org/) that allows you to define a template using Microsoft Excel instead of doing everything in java code. You have small fragments of markup (for loops, value placeholders etc) in your template but the majority of the presentation logic (eg colours, bold, headers, footers, images etc) can be done in excel.","title":"How to create column in footer of Excel using HSSFFooter in Java","body":"<p>Have you considered using <a href=\"https://jxls.sourceforge.net/getting_started.html\" rel=\"nofollow noreferrer\">JXLS</a>?</p>\n<p>JXLS is a small wrapper around <a href=\"https://poi.apache.org/\" rel=\"nofollow noreferrer\">Apache POI</a> that allows you to define a template using Microsoft Excel instead of doing everything in java code. You have small fragments of markup (for loops, value placeholders etc) in your template but the majority of the presentation logic (eg colours, bold, headers, footers, images etc) can be done in excel.</p>\n"},{"tags":[],"owner":{"account_id":4853829,"reputation":57305,"user_id":3915431,"display_name":"Axel Richter"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1695189516,"creation_date":1695189516,"answer_id":77139638,"question_id":77133458,"body_markdown":"Excel sheet footers consist of one line having three columns - left, center and right. Texts in columns may have line breaks but not really single table rows. That is how Excel provides sheet footers and even using Excel GUI one cannot really put table rows into a sheet footer.\r\n\r\nSo what one can create using Excel and comes closest to your requirement is the following:\r\n\r\n[![enter image description here][1]][1]\r\n\r\nCode:\r\n\r\n    import java.io.FileOutputStream ;\r\n    \r\n    import org.apache.poi.ss.usermodel.*;\r\n    import org.apache.poi.xssf.usermodel.*;\r\n    import org.apache.poi.hssf.usermodel.*;\r\n    import org.apache.poi.hssf.usermodel.HeaderFooter;\r\n    \r\n    public class CreateExcelFooterText {\r\n    \r\n     public static void main(String[] args) throws Exception {\r\n    \r\n      StringBuilder strFooterLeftText = new StringBuilder();\r\n      strFooterLeftText.append(&quot;\\n&quot;);\r\n      strFooterLeftText.append(HeaderFooter.date());\r\n      strFooterLeftText.append(&quot;\\n&quot;);\r\n      strFooterLeftText.append(&quot;Dibuat oleh&quot;);\r\n      \r\n      StringBuilder strFooterCenterText = new StringBuilder();\r\n      strFooterCenterText.append(HeaderFooter.startBold());\r\n      strFooterCenterText.append(&quot;KOLOM PROSES PENIJURNALAN&quot;);\r\n      strFooterCenterText.append(HeaderFooter.endBold());\r\n      strFooterCenterText.append(&quot;\\n&quot;);\r\n      strFooterCenterText.append(HeaderFooter.date());\r\n      strFooterCenterText.append(&quot;\\n&quot;);\r\n      strFooterCenterText.append(&quot;Diperiksa oleh&quot;);\r\n      \r\n      StringBuilder strFooterRightText = new StringBuilder();\r\n      strFooterRightText.append(&quot;\\n&quot;);\r\n      strFooterRightText.append(HeaderFooter.date());\r\n      strFooterRightText.append(&quot;\\n&quot;);\r\n      strFooterRightText.append(&quot;Diahkan oleh&quot;);\r\n    \r\n      //Workbook workbook = new XSSFWorkbook(); String filePath = &quot;./CreateExcelFooterText.xlsx&quot;;\r\n      Workbook workbook = new HSSFWorkbook(); String filePath = &quot;./CreateExcelFooterText.xls&quot;;\r\n    \r\n      Sheet sheet = workbook.createSheet();\r\n      sheet.createRow(0).createCell(0).setCellValue(&quot;A1&quot;);\r\n    \r\n      //we need more margin for the footer than the default\r\n      sheet.setMargin(Sheet.BottomMargin, 1.5); //bottom page margin 1.5 inch\r\n      sheet.setMargin(Sheet.FooterMargin, .75); //footer marginb 0.75 inch\r\n      //from version 5.2.3\r\n      // sheet.setMargin(PageMargin.BOTTOM, 1.5); //bottom page margin 1.5 inch\r\n      // sheet.setMargin(PageMargin.FOOTER, .75); //footer marginb 0.75 inch\r\n      Footer footer = sheet.getFooter();\r\n      footer.setLeft(strFooterLeftText.toString());  \r\n      footer.setCenter(strFooterCenterText.toString());\r\n      footer.setRight(strFooterRightText.toString());\r\n    \r\n      FileOutputStream out = new FileOutputStream(filePath);\r\n      workbook.write(out);\r\n      out.close();\r\n      workbook.close();\r\n    \r\n     }\r\n    }\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/52q0r.png","title":"How to create column in footer of Excel using HSSFFooter in Java","body":"<p>Excel sheet footers consist of one line having three columns - left, center and right. Texts in columns may have line breaks but not really single table rows. That is how Excel provides sheet footers and even using Excel GUI one cannot really put table rows into a sheet footer.</p>\n<p>So what one can create using Excel and comes closest to your requirement is the following:</p>\n<p><a href=\"https://i.stack.imgur.com/52q0r.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/52q0r.png\" alt=\"enter image description here\" /></a></p>\n<p>Code:</p>\n<pre><code>import java.io.FileOutputStream ;\n\nimport org.apache.poi.ss.usermodel.*;\nimport org.apache.poi.xssf.usermodel.*;\nimport org.apache.poi.hssf.usermodel.*;\nimport org.apache.poi.hssf.usermodel.HeaderFooter;\n\npublic class CreateExcelFooterText {\n\n public static void main(String[] args) throws Exception {\n\n  StringBuilder strFooterLeftText = new StringBuilder();\n  strFooterLeftText.append(&quot;\\n&quot;);\n  strFooterLeftText.append(HeaderFooter.date());\n  strFooterLeftText.append(&quot;\\n&quot;);\n  strFooterLeftText.append(&quot;Dibuat oleh&quot;);\n  \n  StringBuilder strFooterCenterText = new StringBuilder();\n  strFooterCenterText.append(HeaderFooter.startBold());\n  strFooterCenterText.append(&quot;KOLOM PROSES PENIJURNALAN&quot;);\n  strFooterCenterText.append(HeaderFooter.endBold());\n  strFooterCenterText.append(&quot;\\n&quot;);\n  strFooterCenterText.append(HeaderFooter.date());\n  strFooterCenterText.append(&quot;\\n&quot;);\n  strFooterCenterText.append(&quot;Diperiksa oleh&quot;);\n  \n  StringBuilder strFooterRightText = new StringBuilder();\n  strFooterRightText.append(&quot;\\n&quot;);\n  strFooterRightText.append(HeaderFooter.date());\n  strFooterRightText.append(&quot;\\n&quot;);\n  strFooterRightText.append(&quot;Diahkan oleh&quot;);\n\n  //Workbook workbook = new XSSFWorkbook(); String filePath = &quot;./CreateExcelFooterText.xlsx&quot;;\n  Workbook workbook = new HSSFWorkbook(); String filePath = &quot;./CreateExcelFooterText.xls&quot;;\n\n  Sheet sheet = workbook.createSheet();\n  sheet.createRow(0).createCell(0).setCellValue(&quot;A1&quot;);\n\n  //we need more margin for the footer than the default\n  sheet.setMargin(Sheet.BottomMargin, 1.5); //bottom page margin 1.5 inch\n  sheet.setMargin(Sheet.FooterMargin, .75); //footer marginb 0.75 inch\n  //from version 5.2.3\n  // sheet.setMargin(PageMargin.BOTTOM, 1.5); //bottom page margin 1.5 inch\n  // sheet.setMargin(PageMargin.FOOTER, .75); //footer marginb 0.75 inch\n  Footer footer = sheet.getFooter();\n  footer.setLeft(strFooterLeftText.toString());  \n  footer.setCenter(strFooterCenterText.toString());\n  footer.setRight(strFooterRightText.toString());\n\n  FileOutputStream out = new FileOutputStream(filePath);\n  workbook.write(out);\n  out.close();\n  workbook.close();\n\n }\n}\n</code></pre>\n"}],"owner":{"account_id":10082595,"reputation":49,"user_id":7452363,"display_name":"Shabrina Nurdiani S"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":74,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":77139638,"answer_count":2,"score":1,"last_activity_date":1695189516,"creation_date":1695116827,"question_id":77133458,"body_markdown":"I will create an Excel file using footer. In this case, the contents of the footer are three columns for signature. Is it possible to create a column in footer using .apache.poi.hssf.usermodel.HSSFFooter?\r\n\r\nThe footer I will create is like this picture [![enter image description here][1]][1]\r\n\r\n\r\nBut when I try to using the HSSFFooter, I only contain one line. Like this pict \r\n[![enter image description here][2]][2]\r\n\r\nthe first line is replace by the second line that I declare, \r\n\r\nHere&#39;s my code :\r\n\r\n \r\n\r\n    HSSFFooter rowSignature0 = sheet0.getFooter();\r\n    rowSignature0.setCenter(&quot;KOLOM PROSES PENJURNALAN&quot;);\r\n\r\n    // tanggal\r\n    String now = new SimpleDateFormat(&quot;dd/MM/yyyy&quot;).format(new Date());\r\n    counter+=1;\r\n    rowSignature0.setLeft(now);\r\n    rowSignature0.setCenter(now);\r\n    rowSignature0.setRight(now);\r\n\r\n  [1]: https://i.stack.imgur.com/6KFLS.png\r\n  [2]: https://i.stack.imgur.com/NG2on.png\r\n\r\nSo, do you have any idea to create this footer?","title":"How to create column in footer of Excel using HSSFFooter in Java","body":"<p>I will create an Excel file using footer. In this case, the contents of the footer are three columns for signature. Is it possible to create a column in footer using .apache.poi.hssf.usermodel.HSSFFooter?</p>\n<p>The footer I will create is like this picture <a href=\"https://i.stack.imgur.com/6KFLS.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/6KFLS.png\" alt=\"enter image description here\" /></a></p>\n<p>But when I try to using the HSSFFooter, I only contain one line. Like this pict\n<a href=\"https://i.stack.imgur.com/NG2on.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/NG2on.png\" alt=\"enter image description here\" /></a></p>\n<p>the first line is replace by the second line that I declare,</p>\n<p>Here's my code :</p>\n<pre><code>HSSFFooter rowSignature0 = sheet0.getFooter();\nrowSignature0.setCenter(&quot;KOLOM PROSES PENJURNALAN&quot;);\n\n// tanggal\nString now = new SimpleDateFormat(&quot;dd/MM/yyyy&quot;).format(new Date());\ncounter+=1;\nrowSignature0.setLeft(now);\nrowSignature0.setCenter(now);\nrowSignature0.setRight(now);\n</code></pre>\n<p>So, do you have any idea to create this footer?</p>\n"},{"tags":["java","netbeans","text-files","filewriter"],"comments":[{"owner":{"account_id":23740623,"reputation":1,"user_id":17758716,"display_name":"Reilas"},"score":0,"creation_date":1695189701,"post_id":77139613,"comment_id":135989002,"body_markdown":"It is only writing the file _if (!file.exists())_.","body":"It is only writing the file <i>if (!file.exists())</i>."},{"owner":{"account_id":31180,"reputation":29173,"user_id":85421,"display_name":"user85421"},"score":0,"creation_date":1695190224,"post_id":77139613,"comment_id":135989070,"body_markdown":"BTW there is no need to call `createNewFile` - the file will be created by `FileWriter` if needed (and possible/allowed)  **And** you must work on correct indentation of code - this would eventually even make the error easier to find/see (most IDEs have a format function to do that for you...)","body":"BTW there is no need to call <code>createNewFile</code> - the file will be created by <code>FileWriter</code> if needed (and possible/allowed)  <b>And</b> you must work on correct indentation of code - this would eventually even make the error easier to find/see (most IDEs have a format function to do that for you...)"},{"owner":{"account_id":29488069,"reputation":1,"user_id":22597538,"display_name":"rudy5699"},"score":0,"creation_date":1695191753,"post_id":77139613,"comment_id":135989298,"body_markdown":"Yeah I thought so too, I don&#39;t know why bard made me add that, and the indentation is bad cuz I did copy and paste some code snippets, sorry :3","body":"Yeah I thought so too, I don&#39;t know why bard made me add that, and the indentation is bad cuz I did copy and paste some code snippets, sorry :3"},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1695198282,"post_id":77139613,"comment_id":135990612,"body_markdown":"Huge amount of redundant boilerplate code there. Also, how are you going to use a file that will consist of *one continuous string*?","body":"Huge amount of redundant boilerplate code there. Also, how are you going to use a file that will consist of <i>one continuous string</i>?"},{"owner":{"account_id":29488069,"reputation":1,"user_id":22597538,"display_name":"rudy5699"},"score":0,"creation_date":1695244807,"post_id":77139613,"comment_id":136000388,"body_markdown":"The purpose of using the text file is as an alternative to MySQL, Oracle etc, because im not allowed to use them. It&#39;s a university project. So I want to use text files to store usernames and passwords of users who will register and then login using those credentials","body":"The purpose of using the text file is as an alternative to MySQL, Oracle etc, because im not allowed to use them. It&#39;s a university project. So I want to use text files to store usernames and passwords of users who will register and then login using those credentials"}],"owner":{"account_id":29488069,"reputation":1,"user_id":22597538,"display_name":"rudy5699"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":40,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1695189343,"creation_date":1695189181,"question_id":77139613,"body_markdown":"I am using netbeans windows 11, I just want to save input entered to a text file without it getting overwritten ideally. It works fine on the first run, text file gets created, input gets written to the file, but any entries after that don&#39;t get saved and neither does the file get overwritten with the new entry.\r\n\r\n```private void RegisterActionPerformed(java.awt.event.ActionEvent evt) {                                         \r\n        if (!newUsername.getText().equals(&quot;&quot;) &amp;&amp; (!newPass.getText().equals(&quot;&quot;))){\r\n            // Check to see if the Username.txt file already exists\r\n            File file = new File(&quot;Username.txt&quot;);\r\n            if (!file.exists()) {\r\n        try {\r\n            file.createNewFile();\r\n        } catch (IOException e) {\r\n            // Handle the exception\r\n            e.printStackTrace();\r\n        }\r\n         FileWriter fileWriter = null;\r\n    try {\r\n        fileWriter = new FileWriter(file, true);\r\n\r\n        // Write the newUsername variable information to the text file\r\n        fileWriter.write(newUsername.getText());\r\n    } catch (IOException e) {\r\n        // Handle the exception\r\n        e.printStackTrace();\r\n    } finally {\r\n        // Close the FileWriter object\r\n        if (fileWriter != null) {\r\n            try {\r\n                fileWriter.close();\r\n            } catch (IOException e) {\r\n                // Handle the exception\r\n                e.printStackTrace();\r\n            }\r\n        }\r\n    }\r\n    }\r\n            \r\n            \r\n            new Splash().setVisible(true);\r\n            System.out.println(System.getProperty(&quot;user.dir&quot;));\r\n            dispose();\r\n        }else {\r\n            feedback.setText(&quot;Fields can&#39;t be blank&quot;);\r\n        }\r\n        \r\n        \r\n    }\r\n```\r\n\r\nI didn&#39;t try anything else I mean I asked google Bard, it said it might be a file permissions issue but that doesnt make sense because like I said it does work fine on the first run, file gets created gets written as expected, so can&#39;t be a  file permissions issue i think.","title":"Input won&#39;t save to a text file after the first run, won&#39;t append or overwrite after the first run","body":"<p>I am using netbeans windows 11, I just want to save input entered to a text file without it getting overwritten ideally. It works fine on the first run, text file gets created, input gets written to the file, but any entries after that don't get saved and neither does the file get overwritten with the new entry.</p>\n<pre><code>        if (!newUsername.getText().equals(&quot;&quot;) &amp;&amp; (!newPass.getText().equals(&quot;&quot;))){\n            // Check to see if the Username.txt file already exists\n            File file = new File(&quot;Username.txt&quot;);\n            if (!file.exists()) {\n        try {\n            file.createNewFile();\n        } catch (IOException e) {\n            // Handle the exception\n            e.printStackTrace();\n        }\n         FileWriter fileWriter = null;\n    try {\n        fileWriter = new FileWriter(file, true);\n\n        // Write the newUsername variable information to the text file\n        fileWriter.write(newUsername.getText());\n    } catch (IOException e) {\n        // Handle the exception\n        e.printStackTrace();\n    } finally {\n        // Close the FileWriter object\n        if (fileWriter != null) {\n            try {\n                fileWriter.close();\n            } catch (IOException e) {\n                // Handle the exception\n                e.printStackTrace();\n            }\n        }\n    }\n    }\n            \n            \n            new Splash().setVisible(true);\n            System.out.println(System.getProperty(&quot;user.dir&quot;));\n            dispose();\n        }else {\n            feedback.setText(&quot;Fields can't be blank&quot;);\n        }\n        \n        \n    }\n</code></pre>\n<p>I didn't try anything else I mean I asked google Bard, it said it might be a file permissions issue but that doesnt make sense because like I said it does work fine on the first run, file gets created gets written as expected, so can't be a  file permissions issue i think.</p>\n"},{"tags":["java","react-native"],"owner":{"account_id":26158177,"reputation":21,"user_id":19845155,"display_name":"Atharva Solaskar"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":13,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1695188358,"creation_date":1695188358,"question_id":77139558,"body_markdown":"Is it Possible to Run Java Bluetooth Adapter Functionality on React native Application for Android? if yes then how?\r\n\r\nI am Not getting Any idea that how can i create an environment to Run JAVA Application on React I searched for multile solutions but nothing worked properly.","title":"Is it Possible to Run Java Bluetooth Adapter Functionality on React native Application for Android? if yes then how?","body":"<p>Is it Possible to Run Java Bluetooth Adapter Functionality on React native Application for Android? if yes then how?</p>\n<p>I am Not getting Any idea that how can i create an environment to Run JAVA Application on React I searched for multile solutions but nothing worked properly.</p>\n"},{"tags":["java","android","google-play","in-app-billing","android-billing"],"answers":[{"comments":[{"owner":{"account_id":247613,"reputation":284089,"user_id":522444,"accept_rate":100,"display_name":"Hovercraft Full Of Eels"},"score":0,"creation_date":1682860791,"post_id":76141220,"comment_id":134278345,"body_markdown":"You needed to make what change? Please expand on the answer so that it is helpful to future visitors.","body":"You needed to make what change? Please expand on the answer so that it is helpful to future visitors."}],"tags":[],"owner":{"account_id":9772337,"reputation":2264,"user_id":7243748,"accept_rate":45,"display_name":"stavros.3p"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1695187621,"creation_date":1682856973,"answer_id":76141220,"question_id":76141204,"body_markdown":"Ok so You have to make below change:\r\n\r\n\r\n    List&lt;BillingFlowParams.ProductDetailsParams&gt; productDetailsParamsList = ImmutableList.from(\r\n                BillingFlowParams.ProductDetailsParams.newBuilder()\r\n                        .setOfferToken(productDetails.getSubscriptionOfferDetails().get(0).getOfferToken())\r\n                        .setProductDetails(productDetails)\r\n                        .build()\r\n        );\r\n\r\nI added this line:\r\n\r\n     .setOfferToken(productDetails.getSubscriptionOfferDetails().get(0).getOfferToken())","title":"Android Play Store Subscription Billing doesn&#39;t trigger any action","body":"<p>Ok so You have to make below change:</p>\n<pre><code>List&lt;BillingFlowParams.ProductDetailsParams&gt; productDetailsParamsList = ImmutableList.from(\n            BillingFlowParams.ProductDetailsParams.newBuilder()\n                    .setOfferToken(productDetails.getSubscriptionOfferDetails().get(0).getOfferToken())\n                    .setProductDetails(productDetails)\n                    .build()\n    );\n</code></pre>\n<p>I added this line:</p>\n<pre><code> .setOfferToken(productDetails.getSubscriptionOfferDetails().get(0).getOfferToken())\n</code></pre>\n"},{"tags":[],"owner":{"account_id":91888,"reputation":6445,"user_id":252080,"accept_rate":60,"display_name":"Sterling"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1691009072,"creation_date":1691009072,"answer_id":76823394,"question_id":76141204,"body_markdown":"For anyone else who&#39;s running into this issue: The OP had the right idea, but didn&#39;t really explain it - and their solution doesn&#39;t help if you don&#39;t have an offer on your subscription.\r\n\r\nThe root issue seems to be that `BillingFlowParams.ProductDetailsParams.Builder` actually _hangs_ if you don&#39;t supply an `offerToken` for a subscription. This is pretty egregious, IMHO, but fortunately it&#39;s also pretty easy to get around:\r\n```\r\nval productBuilder = BillingFlowParams.ProductDetailsParams.newBuilder()\r\n    .setProductDetails(productDetails)\r\n    .setOfferToken(token)\r\n```\r\n...where `token` is a `String` that&#39;s set to a real offer token from `BillingClient` (using code like the OP&#39;s) if you have one, or **an empty string (`&quot;&quot;`) if you don&#39;t**.\r\n\r\nThe important bit being that you _must_ call `setOfferToken()` with a (non-null) value, or the `Builder` will hang.\r\n\r\n[The official docs][1] say &quot;Calling this method is not needed for One-time products&quot;, which _could_ be taken to mean that it **is** needed for subscription products - but that&#39;s not explicitly stated. Like I said, a pretty egregious fail in API design (and documentation).\r\n\r\n\r\n  [1]: https://developer.android.com/reference/com/android/billingclient/api/BillingFlowParams.ProductDetailsParams.Builder#setOfferToken(java.lang.String)","title":"Android Play Store Subscription Billing doesn&#39;t trigger any action","body":"<p>For anyone else who's running into this issue: The OP had the right idea, but didn't really explain it - and their solution doesn't help if you don't have an offer on your subscription.</p>\n<p>The root issue seems to be that <code>BillingFlowParams.ProductDetailsParams.Builder</code> actually <em>hangs</em> if you don't supply an <code>offerToken</code> for a subscription. This is pretty egregious, IMHO, but fortunately it's also pretty easy to get around:</p>\n<pre><code>val productBuilder = BillingFlowParams.ProductDetailsParams.newBuilder()\n    .setProductDetails(productDetails)\n    .setOfferToken(token)\n</code></pre>\n<p>...where <code>token</code> is a <code>String</code> that's set to a real offer token from <code>BillingClient</code> (using code like the OP's) if you have one, or <strong>an empty string (<code>&quot;&quot;</code>) if you don't</strong>.</p>\n<p>The important bit being that you <em>must</em> call <code>setOfferToken()</code> with a (non-null) value, or the <code>Builder</code> will hang.</p>\n<p><a href=\"https://developer.android.com/reference/com/android/billingclient/api/BillingFlowParams.ProductDetailsParams.Builder#setOfferToken(java.lang.String)\" rel=\"nofollow noreferrer\">The official docs</a> say &quot;Calling this method is not needed for One-time products&quot;, which <em>could</em> be taken to mean that it <strong>is</strong> needed for subscription products - but that's not explicitly stated. Like I said, a pretty egregious fail in API design (and documentation).</p>\n"}],"owner":{"account_id":9772337,"reputation":2264,"user_id":7243748,"accept_rate":45,"display_name":"stavros.3p"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":176,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":2,"score":2,"last_activity_date":1695187621,"creation_date":1682856637,"question_id":76141204,"body_markdown":"I have successfully implemented the in-app purchase flow, now I am trying to switch to the subscription model but something is wrong in the makePurchase() method, it doesn&#39;t open the window for the user to make the payment. \r\n\r\n    private void createPurchaseFlow(String productID, PostTaskListener&lt;String&gt; callback)\r\n    {\r\n        Print.e(&quot;createPurchaseFlow productID: &quot;+ productID);\r\n        PurchasesUpdatedListener purchasesUpdatedListener = new PurchasesUpdatedListener()\r\n        {\r\n            @Override\r\n            public void onPurchasesUpdated(@NonNull BillingResult billingResult,\r\n                                           List&lt;Purchase&gt; purchases)\r\n            {\r\n                if (billingResult.getResponseCode() == BillingClient.BillingResponseCode.OK\r\n                        &amp;&amp; purchases != null)\r\n                {\r\n                    for (Purchase purchase : purchases)\r\n                    {\r\n                        consumePurchase(purchase,productID,callback);\r\n                    }\r\n                }\r\n                else if (billingResult.getResponseCode() ==\r\n                        BillingClient.BillingResponseCode.USER_CANCELED)\r\n                {\r\n                    callback.onPostTask(&quot;User Canceled&quot;);\r\n                    Print.e(&quot;onPurchasesUpdated: Purchase Canceled&quot;);\r\n                }\r\n                else\r\n                {\r\n                    callback.onPostTask(&quot;Purchase Failed&quot;);\r\n                    Print.e(&quot;onPurchasesUpdated: Error&quot;);\r\n                }\r\n            }\r\n        };\r\n\r\n        billingClient = BillingClient.newBuilder(activity)\r\n                .setListener(purchasesUpdatedListener)\r\n                .enablePendingPurchases()\r\n                .build();\r\n\r\n        billingClient.startConnection(new BillingClientStateListener()\r\n        {\r\n            @Override\r\n            public void onBillingSetupFinished(@NonNull BillingResult billingResult)\r\n            {\r\n                if (billingResult.getResponseCode() ==\r\n                        BillingClient.BillingResponseCode.OK)\r\n                {\r\n                    Print.e(&quot;OnBillingSetupFinish connected&quot;);\r\n                    queryProduct(productID,callback);\r\n                }\r\n                else\r\n                {\r\n                    Print.e(&quot;OnBillingSetupFinish failed&quot;);\r\n                }\r\n            }\r\n\r\n            @Override\r\n            public void onBillingServiceDisconnected()\r\n            {\r\n                // Try to restart the connection on the next request to\r\n                // Google Play by calling the startConnection() method.\r\n                Print.e(&quot;onBillingServiceDisconnected&quot;);\r\n                callback.onPostTask(&quot;Billing Service Disconnected&quot;);\r\n            }\r\n        });\r\n    }\r\n\r\n    private void queryProduct(String subscriptionID, PostTaskListener&lt;String&gt; callback)\r\n    {\r\n        QueryProductDetailsParams queryProductDetailsParams =\r\n                QueryProductDetailsParams.newBuilder()\r\n                        .setProductList(\r\n                                ImmutableList.from(\r\n                                        QueryProductDetailsParams.Product.newBuilder()\r\n                                                .setProductId(subscriptionID)\r\n                                                .setProductType(\r\n                                                        BillingClient.ProductType.SUBS)\r\n                                                .build()))\r\n                        .build();\r\n\r\n        billingClient.queryProductDetailsAsync(\r\n                queryProductDetailsParams,\r\n                new ProductDetailsResponseListener()\r\n                {\r\n                    @Override\r\n                    public void onProductDetailsResponse(@NonNull BillingResult billingResult,\r\n                                                         @NonNull List&lt;ProductDetails&gt; productDetailsList)\r\n                    {\r\n                        if (!productDetailsList.isEmpty())\r\n                        {\r\n                            Print.e(&quot;onProductDetailsResponse&quot;);\r\n                            ProductDetails productDetails = productDetailsList.get(0);\r\n                            makePurchase(productDetails);\r\n                        }\r\n                        else\r\n                        {\r\n                            callback.onPostTask(null);\r\n                            Print.e(&quot;onProductDetailsResponse: No subscriptions&quot;);\r\n                        }\r\n                    }\r\n                }\r\n        );\r\n    }\r\n\r\n    private void makePurchase(ProductDetails productDetails)\r\n    {\r\n        Print.e(&quot;makePurchase: &quot; + productDetails.getName());\r\n\r\n        List&lt;BillingFlowParams.ProductDetailsParams&gt; productDetailsParamsList = ImmutableList.from(\r\n                BillingFlowParams.ProductDetailsParams.newBuilder()\r\n                        .setProductDetails(productDetails)\r\n                        .build()\r\n        );\r\n\r\n        BillingFlowParams billingFlowParams =\r\n                BillingFlowParams.newBuilder()\r\n                        .setProductDetailsParamsList(productDetailsParamsList)\r\n                        .build();\r\n\r\n        BillingResult billingResult = billingClient.launchBillingFlow(activity, billingFlowParams);\r\n\r\n\r\n        Print.e(&quot;billingResult: &quot; + billingResult.getResponseCode() +\r\n                &quot; getDebugMessage: &quot; +  billingResult.getDebugMessage() +\r\n                &quot; toString: &quot; +  billingResult.toString());\r\n    }\r\n\r\nIt doesn&#39;t print the messages after this line\r\n\r\n    BillingResult billingResult = billingClient.launchBillingFlow(activity, billingFlowParams);\r\n\r\nso I placed breakpoints and the code run until this code:\r\n\r\n            List&lt;BillingFlowParams.ProductDetailsParams&gt; productDetailsParamsList = ImmutableList.from(\r\n                BillingFlowParams.ProductDetailsParams.newBuilder()\r\n                        .setProductDetails(productDetails)\r\n                        .build()\r\n        );\r\n\r\nand then nothing happens, no errors, zero logs. What is going on?","title":"Android Play Store Subscription Billing doesn&#39;t trigger any action","body":"<p>I have successfully implemented the in-app purchase flow, now I am trying to switch to the subscription model but something is wrong in the makePurchase() method, it doesn't open the window for the user to make the payment.</p>\n<pre><code>private void createPurchaseFlow(String productID, PostTaskListener&lt;String&gt; callback)\n{\n    Print.e(&quot;createPurchaseFlow productID: &quot;+ productID);\n    PurchasesUpdatedListener purchasesUpdatedListener = new PurchasesUpdatedListener()\n    {\n        @Override\n        public void onPurchasesUpdated(@NonNull BillingResult billingResult,\n                                       List&lt;Purchase&gt; purchases)\n        {\n            if (billingResult.getResponseCode() == BillingClient.BillingResponseCode.OK\n                    &amp;&amp; purchases != null)\n            {\n                for (Purchase purchase : purchases)\n                {\n                    consumePurchase(purchase,productID,callback);\n                }\n            }\n            else if (billingResult.getResponseCode() ==\n                    BillingClient.BillingResponseCode.USER_CANCELED)\n            {\n                callback.onPostTask(&quot;User Canceled&quot;);\n                Print.e(&quot;onPurchasesUpdated: Purchase Canceled&quot;);\n            }\n            else\n            {\n                callback.onPostTask(&quot;Purchase Failed&quot;);\n                Print.e(&quot;onPurchasesUpdated: Error&quot;);\n            }\n        }\n    };\n\n    billingClient = BillingClient.newBuilder(activity)\n            .setListener(purchasesUpdatedListener)\n            .enablePendingPurchases()\n            .build();\n\n    billingClient.startConnection(new BillingClientStateListener()\n    {\n        @Override\n        public void onBillingSetupFinished(@NonNull BillingResult billingResult)\n        {\n            if (billingResult.getResponseCode() ==\n                    BillingClient.BillingResponseCode.OK)\n            {\n                Print.e(&quot;OnBillingSetupFinish connected&quot;);\n                queryProduct(productID,callback);\n            }\n            else\n            {\n                Print.e(&quot;OnBillingSetupFinish failed&quot;);\n            }\n        }\n\n        @Override\n        public void onBillingServiceDisconnected()\n        {\n            // Try to restart the connection on the next request to\n            // Google Play by calling the startConnection() method.\n            Print.e(&quot;onBillingServiceDisconnected&quot;);\n            callback.onPostTask(&quot;Billing Service Disconnected&quot;);\n        }\n    });\n}\n\nprivate void queryProduct(String subscriptionID, PostTaskListener&lt;String&gt; callback)\n{\n    QueryProductDetailsParams queryProductDetailsParams =\n            QueryProductDetailsParams.newBuilder()\n                    .setProductList(\n                            ImmutableList.from(\n                                    QueryProductDetailsParams.Product.newBuilder()\n                                            .setProductId(subscriptionID)\n                                            .setProductType(\n                                                    BillingClient.ProductType.SUBS)\n                                            .build()))\n                    .build();\n\n    billingClient.queryProductDetailsAsync(\n            queryProductDetailsParams,\n            new ProductDetailsResponseListener()\n            {\n                @Override\n                public void onProductDetailsResponse(@NonNull BillingResult billingResult,\n                                                     @NonNull List&lt;ProductDetails&gt; productDetailsList)\n                {\n                    if (!productDetailsList.isEmpty())\n                    {\n                        Print.e(&quot;onProductDetailsResponse&quot;);\n                        ProductDetails productDetails = productDetailsList.get(0);\n                        makePurchase(productDetails);\n                    }\n                    else\n                    {\n                        callback.onPostTask(null);\n                        Print.e(&quot;onProductDetailsResponse: No subscriptions&quot;);\n                    }\n                }\n            }\n    );\n}\n\nprivate void makePurchase(ProductDetails productDetails)\n{\n    Print.e(&quot;makePurchase: &quot; + productDetails.getName());\n\n    List&lt;BillingFlowParams.ProductDetailsParams&gt; productDetailsParamsList = ImmutableList.from(\n            BillingFlowParams.ProductDetailsParams.newBuilder()\n                    .setProductDetails(productDetails)\n                    .build()\n    );\n\n    BillingFlowParams billingFlowParams =\n            BillingFlowParams.newBuilder()\n                    .setProductDetailsParamsList(productDetailsParamsList)\n                    .build();\n\n    BillingResult billingResult = billingClient.launchBillingFlow(activity, billingFlowParams);\n\n\n    Print.e(&quot;billingResult: &quot; + billingResult.getResponseCode() +\n            &quot; getDebugMessage: &quot; +  billingResult.getDebugMessage() +\n            &quot; toString: &quot; +  billingResult.toString());\n}\n</code></pre>\n<p>It doesn't print the messages after this line</p>\n<pre><code>BillingResult billingResult = billingClient.launchBillingFlow(activity, billingFlowParams);\n</code></pre>\n<p>so I placed breakpoints and the code run until this code:</p>\n<pre><code>        List&lt;BillingFlowParams.ProductDetailsParams&gt; productDetailsParamsList = ImmutableList.from(\n            BillingFlowParams.ProductDetailsParams.newBuilder()\n                    .setProductDetails(productDetails)\n                    .build()\n    );\n</code></pre>\n<p>and then nothing happens, no errors, zero logs. What is going on?</p>\n"},{"tags":["java","sliding-tile-puzzle"],"comments":[{"owner":{"account_id":44195,"reputation":269053,"user_id":129570,"accept_rate":79,"display_name":"Oliver Charlesworth"},"score":2,"creation_date":1451766315,"post_id":34570344,"comment_id":56885235,"body_markdown":"What did you learn when you stepped through this with a debugger?","body":"What did you learn when you stepped through this with a debugger?"},{"owner":{"account_id":2671330,"reputation":183386,"user_id":2308683,"accept_rate":90,"display_name":"OneCricketeer"},"score":0,"creation_date":1451766852,"post_id":34570344,"comment_id":56885408,"body_markdown":"Define &quot;odd parity&quot;. There are 2 moves that are required to solve that puzzle. Is that not &quot;even parity&quot;?","body":"Define &quot;odd parity&quot;. There are 2 moves that are required to solve that puzzle. Is that not &quot;even parity&quot;?"},{"owner":{"account_id":180181,"reputation":76390,"user_id":413337,"accept_rate":64,"display_name":"Codo"},"score":2,"creation_date":1451767055,"post_id":34570344,"comment_id":56885460,"body_markdown":"If I&#39;m not mistaken, the position of the empty square is also relevant. It needs to go into the parity somehow.","body":"If I&#39;m not mistaken, the position of the empty square is also relevant. It needs to go into the parity somehow."},{"owner":{"account_id":2663825,"reputation":21876,"user_id":2302862,"accept_rate":100,"display_name":"Siguza"},"score":0,"creation_date":1451767075,"post_id":34570344,"comment_id":56885467,"body_markdown":"@cricket_007 OP is referring to &quot;amount of choosable pairs where the left value is greater than the right one, and neither are zero&quot;.","body":"@cricket_007 OP is referring to &quot;amount of choosable pairs where the left value is greater than the right one, and neither are zero&quot;."},{"owner":{"account_id":2663825,"reputation":21876,"user_id":2302862,"accept_rate":100,"display_name":"Siguza"},"score":0,"creation_date":1451767142,"post_id":34570344,"comment_id":56885482,"body_markdown":"@Codo Could it be the row the empty square is in...?","body":"@Codo Could it be the row the empty square is in...?"},{"owner":{"account_id":2413237,"reputation":31164,"user_id":2107876,"accept_rate":88,"display_name":"laune"},"score":0,"creation_date":1451767178,"post_id":34570344,"comment_id":56885493,"body_markdown":"Rearrange the squares so that the free position is in the lower right hand corner, and then compute even/odd for the permutation.","body":"Rearrange the squares so that the free position is in the lower right hand corner, and then compute even/odd for the permutation."},{"owner":{"display_name":"user4918296"},"score":0,"creation_date":1451767481,"post_id":34570344,"comment_id":56885582,"body_markdown":"@laune It does not matter where the blank square is located.","body":"@laune It does not matter where the blank square is located."},{"owner":{"account_id":2671330,"reputation":183386,"user_id":2308683,"accept_rate":90,"display_name":"OneCricketeer"},"score":0,"creation_date":1451767697,"post_id":34570344,"comment_id":56885648,"body_markdown":"Would making the parity be 1 if it is not in the bottom right help?","body":"Would making the parity be 1 if it is not in the bottom right help?"},{"owner":{"display_name":"user4918296"},"score":0,"creation_date":1451769559,"post_id":34570344,"comment_id":56886183,"body_markdown":"@cricket_007 It is not about manipulating the parity. The parity is calculated and its value is used to determine if the puzzle can be solved.","body":"@cricket_007 It is not about manipulating the parity. The parity is calculated and its value is used to determine if the puzzle can be solved."},{"owner":{"account_id":2413237,"reputation":31164,"user_id":2107876,"accept_rate":88,"display_name":"laune"},"score":0,"creation_date":1451807798,"post_id":34570344,"comment_id":56893572,"body_markdown":"@nautical You contradict yourself since &quot;these conditions&quot; you found and your code both take heed of the location of the blank square. Note that my &quot;rearrange&quot; merely eliminates the need to consider its position in the even/odd computation, which the rearrangement does not affect.","body":"@nautical You contradict yourself since &quot;these conditions&quot; you found and your code both take heed of the location of the blank square. Note that my &quot;rearrange&quot; merely eliminates the need to consider its position in the even/odd computation, which the rearrangement does not affect."},{"owner":{"display_name":"user4918296"},"score":0,"creation_date":1451827736,"post_id":34570344,"comment_id":56898715,"body_markdown":"@laune Poorly phrased on my part. What I mean is, that the algorithm is not about a possible way to solve it or making any rearrangements. The algorithm must only determine if it is solvable at all. In order to determine this the blank tile may be in any position that could be reached from its initial position; by legal moves only. The algorithm must yield the same result for any of those legal positions without the need of rearranging the tiles. So to render my previous statement more precisely: The applicability of the algorithm does not depend on the tile being in a particular position.","body":"@laune Poorly phrased on my part. What I mean is, that the algorithm is not about a possible way to solve it or making any rearrangements. The algorithm must only determine if it is solvable at all. In order to determine this the blank tile may be in any position that could be reached from its initial position; by legal moves only. The algorithm must yield the same result for any of those legal positions without the need of rearranging the tiles. So to render my previous statement more precisely: The applicability of the algorithm does not depend on the tile being in a particular position."}],"answers":[{"comments":[{"owner":{"account_id":402266,"reputation":4456,"user_id":769326,"accept_rate":76,"display_name":"dork"},"score":0,"creation_date":1530790407,"post_id":34570524,"comment_id":89362137,"body_markdown":"Would this still apply to an `N x M` puzzle?","body":"Would this still apply to an <code>N x M</code> puzzle?"},{"owner":{"account_id":59521,"reputation":18723,"user_id":178082,"accept_rate":87,"display_name":"Nick Larsen"},"score":0,"creation_date":1549483543,"post_id":34570524,"comment_id":95922361,"body_markdown":"The parity also depends on the goal state here.  There are 2 common goal states used, one has the 0 in the top left hand corner and the other has the 0 in the bottom right hand corner.  You have to swap the parity depending on which goal state you choose when the number of columns is even.  For odd number of columns it does not matter.","body":"The parity also depends on the goal state here.  There are 2 common goal states used, one has the 0 in the top left hand corner and the other has the 0 in the bottom right hand corner.  You have to swap the parity depending on which goal state you choose when the number of columns is even.  For odd number of columns it does not matter."},{"owner":{"account_id":1332485,"reputation":565,"user_id":1276063,"display_name":"Rishab777"},"score":0,"creation_date":1581578310,"post_id":34570524,"comment_id":106483732,"body_markdown":"@NickLarsen what do you mean by swap the parity? If the goal state has 0 in the top left corner does the above function change? If yes, what must be changed. Can you elaborate more on swap parity?","body":"@NickLarsen what do you mean by swap the parity? If the goal state has 0 in the top left corner does the above function change? If yes, what must be changed. Can you elaborate more on swap parity?"}],"tags":[],"owner":{"display_name":"user4918296"},"comment_count":3,"down_vote_count":0,"up_vote_count":14,"is_accepted":true,"score":14,"last_activity_date":1572921880,"creation_date":1451767283,"answer_id":34570524,"question_id":34570344,"body_markdown":"[I found these][1] conditions that need to be checked for any `N x N` puzzle in order to determine if it is solvable.\r\n\r\nApparently, since your blank tile is on an even row (counting from the bottom), parity is odd and your grid-width is even, this puzzle is solvable.\r\n\r\nThis is the algorithm that checks according to the rules in the link:\r\n\r\n    public boolean isSolvable(int[] puzzle)\r\n    {\r\n        int parity = 0;\r\n        int gridWidth = (int) Math.sqrt(puzzle.length);\r\n        int row = 0; // the current row we are on\r\n        int blankRow = 0; // the row with the blank tile\r\n    \r\n        for (int i = 0; i &lt; puzzle.length; i++)\r\n        {\r\n        \tif (i % gridWidth == 0) { // advance to next row\r\n        \t\trow++;\r\n        \t}\r\n        \tif (puzzle[i] == 0) { // the blank tile\r\n        \t\tblankRow = row; // save the row on which encountered\r\n                continue;\r\n        \t}\r\n            for (int j = i + 1; j &lt; puzzle.length; j++)\r\n            {\r\n                if (puzzle[i] &gt; puzzle[j] &amp;&amp; puzzle[j] != 0)\r\n                {\r\n                    parity++;\r\n                }\r\n            }\r\n        }\r\n    \r\n        if (gridWidth % 2 == 0) { // even grid\r\n        \tif (blankRow % 2 == 0) { // blank on odd row; counting from bottom\r\n        \t\treturn parity % 2 == 0;\r\n        \t} else { // blank on even row; counting from bottom\r\n        \t\treturn parity % 2 != 0;\r\n        \t}\r\n        } else { // odd grid\r\n            return parity % 2 == 0;\r\n        }\r\n    }\r\n\r\n\r\n  [1]: https://www.cs.bham.ac.uk/~mdr/teaching/modules04/java2/TilesSolvability.html\r\n","title":"Check if 15 puzzle is solvable","body":"<p><a href=\"https://www.cs.bham.ac.uk/~mdr/teaching/modules04/java2/TilesSolvability.html\" rel=\"nofollow noreferrer\">I found these</a> conditions that need to be checked for any <code>N x N</code> puzzle in order to determine if it is solvable.</p>\n\n<p>Apparently, since your blank tile is on an even row (counting from the bottom), parity is odd and your grid-width is even, this puzzle is solvable.</p>\n\n<p>This is the algorithm that checks according to the rules in the link:</p>\n\n<pre><code>public boolean isSolvable(int[] puzzle)\n{\n    int parity = 0;\n    int gridWidth = (int) Math.sqrt(puzzle.length);\n    int row = 0; // the current row we are on\n    int blankRow = 0; // the row with the blank tile\n\n    for (int i = 0; i &lt; puzzle.length; i++)\n    {\n        if (i % gridWidth == 0) { // advance to next row\n            row++;\n        }\n        if (puzzle[i] == 0) { // the blank tile\n            blankRow = row; // save the row on which encountered\n            continue;\n        }\n        for (int j = i + 1; j &lt; puzzle.length; j++)\n        {\n            if (puzzle[i] &gt; puzzle[j] &amp;&amp; puzzle[j] != 0)\n            {\n                parity++;\n            }\n        }\n    }\n\n    if (gridWidth % 2 == 0) { // even grid\n        if (blankRow % 2 == 0) { // blank on odd row; counting from bottom\n            return parity % 2 == 0;\n        } else { // blank on even row; counting from bottom\n            return parity % 2 != 0;\n        }\n    } else { // odd grid\n        return parity % 2 == 0;\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":8229005,"reputation":223,"user_id":6190320,"display_name":"Nnnes"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1691260071,"creation_date":1691260071,"answer_id":76843002,"question_id":34570344,"body_markdown":"The existing answer should work but does not address the question\r\n\r\n&gt; What am i doing wrong?\r\n\r\nYou have the right idea. The parity of the permutation of the 15 numbered tiles should indicate solubility (if even) or insolubility (if odd) regardless of the position of the &quot;blank&quot;/`0` tile - see [1].\r\n\r\nThe problem is that the solved state of the puzzle should be numbered such that you can trace a continuous path from low to high, e.g.\r\n```\r\n 4  3  2  1\r\n 5  6  7  8\r\n12 11 10  9\r\n13 14 15  0\r\n```\r\nThis makes it more obvious why the position of the blank tile is unimportant - it can be moved along the path from beginning to end without changing the order of the other tiles.\r\n\r\nAfter your two moves, the puzzle will look like this:\r\n```\r\n 4  3  2  1\r\n 5  6  7  8\r\n12 11  0 10\r\n13 14 15  9\r\n```\r\nwhich has 6 inversions (only the `9` is out of place) and so even parity.\r\n\r\nYou&#39;d have to either change how the puzzle is displayed in two dimensions or change the order in which you check tiles to count inversions. This solution should extend to any `M`x`N` rectangular grid where `M &gt;= 2` and `N &gt;= 2`, and any position of the blank tile.\r\n\r\n[1] Archer, Aaron F. (1999), &quot;A modern treatment of the 15 puzzle&quot;, The American Mathematical Monthly, 106 (9): 793–799","title":"Check if 15 puzzle is solvable","body":"<p>The existing answer should work but does not address the question</p>\n<blockquote>\n<p>What am i doing wrong?</p>\n</blockquote>\n<p>You have the right idea. The parity of the permutation of the 15 numbered tiles should indicate solubility (if even) or insolubility (if odd) regardless of the position of the &quot;blank&quot;/<code>0</code> tile - see [1].</p>\n<p>The problem is that the solved state of the puzzle should be numbered such that you can trace a continuous path from low to high, e.g.</p>\n<pre><code> 4  3  2  1\n 5  6  7  8\n12 11 10  9\n13 14 15  0\n</code></pre>\n<p>This makes it more obvious why the position of the blank tile is unimportant - it can be moved along the path from beginning to end without changing the order of the other tiles.</p>\n<p>After your two moves, the puzzle will look like this:</p>\n<pre><code> 4  3  2  1\n 5  6  7  8\n12 11  0 10\n13 14 15  9\n</code></pre>\n<p>which has 6 inversions (only the <code>9</code> is out of place) and so even parity.</p>\n<p>You'd have to either change how the puzzle is displayed in two dimensions or change the order in which you check tiles to count inversions. This solution should extend to any <code>M</code>x<code>N</code> rectangular grid where <code>M &gt;= 2</code> and <code>N &gt;= 2</code>, and any position of the blank tile.</p>\n<p>[1] Archer, Aaron F. (1999), &quot;A modern treatment of the 15 puzzle&quot;, The American Mathematical Monthly, 106 (9): 793–799</p>\n"},{"tags":[],"owner":{"account_id":1449978,"reputation":31,"user_id":1367205,"display_name":"rmarquez"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1695187196,"creation_date":1695187196,"answer_id":77139475,"question_id":34570344,"body_markdown":"&gt; What am I doing wrong?\r\n\r\nFor your regular 15-puzzle, you have to arrange the tiles such that the blank space is in the lower right corner. For example, in your case,\r\n\r\n     1   2    3   4   \r\n     5   6    7   8   \r\n    13   9   10  11  \r\n    14  15   12 \r\n\r\n(I removed the `0` tile.)\r\n\r\nIn this way, you can check the parity of this permutation:\r\n\r\n    1   2   3   4   5   6    7   8   13   9   10  11  14  15   12\r\n\r\nwhich is not the same one you are using. This permutation is even, thus solvable, as you may check. In this way, your intuition is right, it should be even parity. \r\n\r\nThis is true for square puzzles of any dimension. Consider, for example,  a game not solvable of only 3 tiles (2 by 2): \r\n\r\n    2 \r\n    3  1\r\n\r\nYou may say the permutation `2 3 1` is even (which is true). But it is not the right permutation for \r\n\r\n    2  1\r\n    3\r\n\r\nwhich is `2 1 3` and this, in fact, is odd, and so not solvable.","title":"Check if 15 puzzle is solvable","body":"<blockquote>\n<p>What am I doing wrong?</p>\n</blockquote>\n<p>For your regular 15-puzzle, you have to arrange the tiles such that the blank space is in the lower right corner. For example, in your case,</p>\n<pre><code> 1   2    3   4   \n 5   6    7   8   \n13   9   10  11  \n14  15   12 \n</code></pre>\n<p>(I removed the <code>0</code> tile.)</p>\n<p>In this way, you can check the parity of this permutation:</p>\n<pre><code>1   2   3   4   5   6    7   8   13   9   10  11  14  15   12\n</code></pre>\n<p>which is not the same one you are using. This permutation is even, thus solvable, as you may check. In this way, your intuition is right, it should be even parity.</p>\n<p>This is true for square puzzles of any dimension. Consider, for example,  a game not solvable of only 3 tiles (2 by 2):</p>\n<pre><code>2 \n3  1\n</code></pre>\n<p>You may say the permutation <code>2 3 1</code> is even (which is true). But it is not the right permutation for</p>\n<pre><code>2  1\n3\n</code></pre>\n<p>which is <code>2 1 3</code> and this, in fact, is odd, and so not solvable.</p>\n"}],"owner":{"account_id":2978728,"reputation":349,"user_id":2529214,"accept_rate":50,"display_name":"Eknoes"},"comment_count":11,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":12429,"favorite_count":0,"down_vote_count":0,"up_vote_count":5,"accepted_answer_id":34570524,"answer_count":3,"score":5,"last_activity_date":1695187196,"creation_date":1451766153,"question_id":34570344,"body_markdown":"I&#39;m trying to test whether a 15 puzzle is solvable. I wrote a method which is working for most puzzles, but for some not.\r\n\r\nFor example this puzzle can be solved with two moves (0, 11), (0, 12)\r\n\r\n    1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 0, 11, 13, 14, 15, 12\r\n\r\nHere is the puzzle better visualized:\r\n\r\n    1\t2\t3\t4\t\r\n    \r\n    5\t6\t7\t8\t\r\n    \r\n    9\t10\t0\t11\t\r\n    \r\n    13\t14\t15\t12\t\r\n\r\n\r\n\r\n   But the puzzle has a odd parity of 3 and so should not be solvable.\r\n\r\n    public boolean isSolvable(int[] puzzle)\r\n\t{\r\n\t\tint parity = 0;\r\n\r\n\t\tfor (int i = 0; i &lt; puzzle.length; i++)\r\n\t\t{\r\n\t\t\tfor (int j = i + 1; j &lt; puzzle.length; j++)\r\n\t\t\t{\r\n\t\t\t\tif (puzzle[i] &gt; puzzle[j] &amp;&amp; puzzle[i] != 0 &amp;&amp; puzzle[j] != 0)\r\n\t\t\t\t{\r\n\t\t\t\t\tparity++;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif (parity % 2 == 0)\r\n\t\t{\r\n\t\t\treturn true;\r\n\t\t}\r\n\t\treturn false;\r\n\t}\r\n\r\nWhat am i doing wrong?","title":"Check if 15 puzzle is solvable","body":"<p>I'm trying to test whether a 15 puzzle is solvable. I wrote a method which is working for most puzzles, but for some not.</p>\n\n<p>For example this puzzle can be solved with two moves (0, 11), (0, 12)</p>\n\n<pre><code>1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 0, 11, 13, 14, 15, 12\n</code></pre>\n\n<p>Here is the puzzle better visualized:</p>\n\n<pre><code>1   2   3   4   \n\n5   6   7   8   \n\n9   10  0   11  \n\n13  14  15  12  \n</code></pre>\n\n<p>But the puzzle has a odd parity of 3 and so should not be solvable.</p>\n\n<pre><code>public boolean isSolvable(int[] puzzle)\n{\n    int parity = 0;\n\n    for (int i = 0; i &lt; puzzle.length; i++)\n    {\n        for (int j = i + 1; j &lt; puzzle.length; j++)\n        {\n            if (puzzle[i] &gt; puzzle[j] &amp;&amp; puzzle[i] != 0 &amp;&amp; puzzle[j] != 0)\n            {\n                parity++;\n            }\n        }\n    }\n\n    if (parity % 2 == 0)\n    {\n        return true;\n    }\n    return false;\n}\n</code></pre>\n\n<p>What am i doing wrong?</p>\n"},{"tags":["java","spring","jpa","spring-el"],"comments":[{"owner":{"account_id":4470050,"reputation":68258,"user_id":3636601,"accept_rate":75,"display_name":"Jens"},"score":0,"creation_date":1695114637,"post_id":77133167,"comment_id":135977618,"body_markdown":"Please add the complete stacktrace","body":"Please add the complete stacktrace"}],"answers":[{"comments":[{"owner":{"account_id":12166101,"reputation":101,"user_id":8899648,"display_name":"Mitya"},"score":0,"creation_date":1695142498,"post_id":77133203,"comment_id":135983365,"body_markdown":"I did the same thing. Does it ever possible to do such trick? I mean, get collection from an object and put it into query?","body":"I did the same thing. Does it ever possible to do such trick? I mean, get collection from an object and put it into query?"},{"owner":{"account_id":24440940,"reputation":3132,"user_id":18364656,"display_name":"Andrei Lisa"},"score":0,"creation_date":1695144632,"post_id":77133203,"comment_id":135983747,"body_markdown":"I just made an update to  the answer about it, can you check ?","body":"I just made an update to  the answer about it, can you check ?"},{"owner":{"account_id":12166101,"reputation":101,"user_id":8899648,"display_name":"Mitya"},"score":1,"creation_date":1695186929,"post_id":77133203,"comment_id":135988689,"body_markdown":"Thanks, the first solution works, however It doesn&#39;t work if I put condition `:#{#filters.names} is null` into the query. And I fixed it with wrapping it into brackets: \n\n`(:#{#activeFilters.flowerSorts}) is null`","body":"Thanks, the first solution works, however It doesn&#39;t work if I put condition <code>:#{#filters.names} is null</code> into the query. And I fixed it with wrapping it into brackets:   <code>(:#{#activeFilters.flowerSorts}) is null</code>"}],"tags":[],"owner":{"account_id":24440940,"reputation":3132,"user_id":18364656,"display_name":"Andrei Lisa"},"comment_count":3,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1695147634,"creation_date":1695114723,"answer_id":77133203,"question_id":77133167,"body_markdown":"I think the problem is in query syntax:\r\n\r\nYou should have next one `@Query` body\r\n\r\n    @Query(&quot;select distinct product from Product product where product.name in (:#{#filters.names})&quot;)\r\n    Set&lt;Product&gt; findAllForFilter(Filters filters);\r\n\r\n**Update**\r\n\r\nIt should generated something like this:\r\n\r\n    from Product product where product.name in (?, ?…)\r\n\r\nBut I am not sure in it, I need to test it. As solution you also can write the query in this one way:\r\n\r\n    @Query(&quot;select distinct product from Product product where product.name in (:filters)&quot;)\r\n        Set&lt;Product&gt; findAllForFilter(@Param(“filters”) Set&lt;String&gt; filters);\r\n\r\n\r\nAnd when you are going to invoke the method you will pass a Set of strings aka filters, I think it is better than SPEL","title":"SPEL doesn&#39;t work with &#39;in&#39; operator for collections inside an object","body":"<p>I think the problem is in query syntax:</p>\n<p>You should have next one <code>@Query</code> body</p>\n<pre><code>@Query(&quot;select distinct product from Product product where product.name in (:#{#filters.names})&quot;)\nSet&lt;Product&gt; findAllForFilter(Filters filters);\n</code></pre>\n<p><strong>Update</strong></p>\n<p>It should generated something like this:</p>\n<pre><code>from Product product where product.name in (?, ?…)\n</code></pre>\n<p>But I am not sure in it, I need to test it. As solution you also can write the query in this one way:</p>\n<pre><code>@Query(&quot;select distinct product from Product product where product.name in (:filters)&quot;)\n    Set&lt;Product&gt; findAllForFilter(@Param(“filters”) Set&lt;String&gt; filters);\n</code></pre>\n<p>And when you are going to invoke the method you will pass a Set of strings aka filters, I think it is better than SPEL</p>\n"}],"owner":{"account_id":12166101,"reputation":101,"user_id":8899648,"display_name":"Mitya"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":47,"favorite_count":0,"down_vote_count":2,"up_vote_count":0,"accepted_answer_id":77133203,"answer_count":1,"score":-2,"last_activity_date":1695187175,"creation_date":1695114461,"question_id":77133167,"body_markdown":"```\r\n@Query(&quot;select distinct product from Product product where :#{#activeFilters.flowerSorts} is null or product.name in :#{#filters.names}&quot;)\r\nSet&lt;Product&gt; findAllForFilter(Filters filters);\r\n```\r\n\r\n```\r\npublic class Filters {\r\n    private Set&lt;String&gt; names;\r\n}\r\n```\r\n[![enter image description here](https://i.stack.imgur.com/aGT0o.png)](https://i.stack.imgur.com/aGT0o.png)\r\n\r\n[![enter image description here](https://i.stack.imgur.com/8DWPr.png)](https://i.stack.imgur.com/8DWPr.png)\r\n\r\n&gt; 2023-09-19 12:02:17.183  WARN 6316 --- [nio-8080-exec-6] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.dao.InvalidDataAccessApiUsageException: org.hibernate.hql.internal.ast.QuerySyntaxException: unexpected AST node: {vector} [select distinct product from ...\r\n\r\nHello, I&#39;m trying to execute query with several elements in my collections. However it doesn&#39;t work, but it does with single elements.","title":"SPEL doesn&#39;t work with &#39;in&#39; operator for collections inside an object","body":"<pre><code>@Query(&quot;select distinct product from Product product where :#{#activeFilters.flowerSorts} is null or product.name in :#{#filters.names}&quot;)\nSet&lt;Product&gt; findAllForFilter(Filters filters);\n</code></pre>\n<pre><code>public class Filters {\n    private Set&lt;String&gt; names;\n}\n</code></pre>\n<p><a href=\"https://i.stack.imgur.com/aGT0o.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/aGT0o.png\" alt=\"enter image description here\" /></a></p>\n<p><a href=\"https://i.stack.imgur.com/8DWPr.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/8DWPr.png\" alt=\"enter image description here\" /></a></p>\n<blockquote>\n<p>2023-09-19 12:02:17.183  WARN 6316 --- [nio-8080-exec-6] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.dao.InvalidDataAccessApiUsageException: org.hibernate.hql.internal.ast.QuerySyntaxException: unexpected AST node: {vector} [select distinct product from ...</p>\n</blockquote>\n<p>Hello, I'm trying to execute query with several elements in my collections. However it doesn't work, but it does with single elements.</p>\n"},{"tags":["java","intellij-idea"],"comments":[{"owner":{"account_id":4706948,"reputation":101,"user_id":3808734,"display_name":"Philip Schiff"},"score":7,"creation_date":1501288510,"post_id":44265670,"comment_id":77729438,"body_markdown":"I also googled it; google also links to SO...","body":"I also googled it; google also links to SO..."},{"owner":{"account_id":2468343,"reputation":1927,"user_id":2150879,"accept_rate":77,"display_name":"Fiddle Freak"},"score":0,"creation_date":1619052226,"post_id":44265670,"comment_id":118790937,"body_markdown":"@ayip I just did, and google pulled this up as the first search results to lead me here.","body":"@ayip I just did, and google pulled this up as the first search results to lead me here."},{"owner":{"account_id":4570718,"reputation":196,"user_id":3710484,"display_name":"Merijn Vogel"},"score":0,"creation_date":1631700643,"post_id":44265670,"comment_id":122291402,"body_markdown":"Just a cent: For one reason or another, when opening a project something bad happened inside of IntelliJ (with an error pop-up) and it marked the project as read-only. After removing the .idea-folder and reopening the project all was fine.","body":"Just a cent: For one reason or another, when opening a project something bad happened inside of IntelliJ (with an error pop-up) and it marked the project as read-only. After removing the .idea-folder and reopening the project all was fine."},{"owner":{"account_id":7639415,"reputation":2500,"user_id":5791997,"display_name":"Addis"},"score":0,"creation_date":1683759461,"post_id":44265670,"comment_id":134417726,"body_markdown":"https://stackoverflow.com/questions/72835869/how-to-make-file-writable-on-intellij#answer-72836019","body":"<a href=\"https://stackoverflow.com/questions/72835869/how-to-make-file-writable-on-intellij#answer-72836019\" title=\"how to make file writable on intellij%23answer 72836019\">stackoverflow.com/questions/72835869/&hellip;</a>"}],"answers":[{"comments":[{"owner":{"account_id":1461725,"reputation":581,"user_id":1375870,"accept_rate":91,"display_name":"Diego Sarmiento"},"score":0,"creation_date":1600287803,"post_id":44265763,"comment_id":113043851,"body_markdown":"A screenshot for this answer would be great","body":"A screenshot for this answer would be great"},{"owner":{"account_id":920347,"reputation":10311,"user_id":952135,"accept_rate":58,"display_name":"Oliv"},"score":0,"creation_date":1602234891,"post_id":44265763,"comment_id":113662101,"body_markdown":"I added a screenshot and updated the text for current release (2002.2.3)","body":"I added a screenshot and updated the text for current release (2002.2.3)"}],"tags":[],"owner":{"account_id":7257197,"reputation":493,"user_id":5535411,"accept_rate":33,"display_name":"Carlos Bernardes"},"comment_count":2,"down_vote_count":3,"up_vote_count":43,"is_accepted":false,"score":40,"last_activity_date":1602234853,"creation_date":1496156611,"answer_id":44265763,"question_id":44265670,"body_markdown":"To toggle read-only attribute of a file, open file in the editor, or select it in the Project tool window. Do one of the following:\r\n\r\n* On the main menu, choose `File | File Properties | Make File Read-Only`, or `Make File Writable`.\r\n\r\n[![enter image description here][1]][1]\r\n\r\n* Click the lock icon in the Status bar in the bottom right corner.\r\n\r\n[![enter image description here][2]][2]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/ROB8L.png\r\n  [2]: https://i.stack.imgur.com/nH9NW.png","title":"How to Change Read-Only Status of Files in intellij","body":"<p>To toggle read-only attribute of a file, open file in the editor, or select it in the Project tool window. Do one of the following:</p>\n<ul>\n<li>On the main menu, choose <code>File | File Properties | Make File Read-Only</code>, or <code>Make File Writable</code>.</li>\n</ul>\n<p><a href=\"https://i.stack.imgur.com/ROB8L.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/ROB8L.png\" alt=\"enter image description here\" /></a></p>\n<ul>\n<li>Click the lock icon in the Status bar in the bottom right corner.</li>\n</ul>\n<p><a href=\"https://i.stack.imgur.com/nH9NW.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/nH9NW.png\" alt=\"enter image description here\" /></a></p>\n"},{"comments":[{"owner":{"account_id":8210085,"reputation":679,"user_id":6178546,"display_name":"Raj Rajeshwar Singh Rathore"},"score":1,"creation_date":1589213214,"post_id":48624145,"comment_id":109197556,"body_markdown":"Worked for me by `chmod 0777 /path-to-file`. Thanks","body":"Worked for me by <code>chmod 0777 &#47;path-to-file</code>. Thanks"},{"owner":{"account_id":9006419,"reputation":2164,"user_id":8377123,"accept_rate":100,"display_name":"Slaknation"},"score":1,"creation_date":1651583030,"post_id":48624145,"comment_id":127393467,"body_markdown":"How to do this for Windows?","body":"How to do this for Windows?"}],"tags":[],"owner":{"account_id":445887,"reputation":5554,"user_id":838608,"accept_rate":71,"display_name":"H&#229;vard Geithus"},"comment_count":2,"down_vote_count":0,"up_vote_count":29,"is_accepted":false,"score":29,"last_activity_date":1650527585,"creation_date":1517838821,"answer_id":48624145,"question_id":44265670,"body_markdown":"If IntelliJ IDEA is unable to change the file permissions using **File | File Properties | Make File Writable**, then perhaps another user is owning that file, e.g. root (use this command to verify: `ls -hal /path/to/File.java`)\r\n\r\nIf someone else owns it, for whatever reason, you can change the permissions yourself using the [chown][1] command in the terminal:\r\n\r\n`sudo chown yourusername /path/to/File.java`,\r\n\r\nwhere `yourusername` is the same user that you used to launch Intellij IDEA.\r\n\r\n\r\n  [1]: https://en.wikipedia.org/wiki/Chown","title":"How to Change Read-Only Status of Files in intellij","body":"<p>If IntelliJ IDEA is unable to change the file permissions using <strong>File | File Properties | Make File Writable</strong>, then perhaps another user is owning that file, e.g. root (use this command to verify: <code>ls -hal /path/to/File.java</code>)</p>\n<p>If someone else owns it, for whatever reason, you can change the permissions yourself using the <a href=\"https://en.wikipedia.org/wiki/Chown\" rel=\"noreferrer\">chown</a> command in the terminal:</p>\n<p><code>sudo chown yourusername /path/to/File.java</code>,</p>\n<p>where <code>yourusername</code> is the same user that you used to launch Intellij IDEA.</p>\n"},{"tags":[],"owner":{"account_id":5897696,"reputation":10128,"user_id":4642316,"accept_rate":87,"display_name":"Long Nguyen"},"comment_count":0,"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1525684588,"creation_date":1525684588,"answer_id":50210752,"question_id":44265670,"body_markdown":"If you&#39;re using Mac. Follow bellow steps:\r\n\r\n 1. Open that file by Finder\r\n 2. Right click and select `Get Info`\r\n 3. In that File Info window, select `Sharing and Permissions`, change `Privilege` as you expected. Before changing, you would remember unlocking your change permission by click on a `Locker Icon` at bottom right.\r\n \r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/YUwmQ.jpg","title":"How to Change Read-Only Status of Files in intellij","body":"<p>If you're using Mac. Follow bellow steps:</p>\n\n<ol>\n<li>Open that file by Finder</li>\n<li>Right click and select <code>Get Info</code></li>\n<li>In that File Info window, select <code>Sharing and Permissions</code>, change <code>Privilege</code> as you expected. Before changing, you would remember unlocking your change permission by click on a <code>Locker Icon</code> at bottom right.</li>\n</ol>\n\n<p><a href=\"https://i.stack.imgur.com/YUwmQ.jpg\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/YUwmQ.jpg\" alt=\"enter image description here\"></a></p>\n"},{"tags":[],"owner":{"account_id":10612093,"reputation":163,"user_id":7815712,"display_name":"Carlos Murray"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1530165836,"creation_date":1530165836,"answer_id":51075702,"question_id":44265670,"body_markdown":"On your top-left corner in the drop-down where you have Tests,Production,Problems switch/choose from Project or any other directory you&#39;ve choosen  to Packages, you&#39;ll have your packages editable, files in the Project folder are not editable although they end with `.class` extension. ","title":"How to Change Read-Only Status of Files in intellij","body":"<p>On your top-left corner in the drop-down where you have Tests,Production,Problems switch/choose from Project or any other directory you've choosen  to Packages, you'll have your packages editable, files in the Project folder are not editable although they end with <code>.class</code> extension. </p>\n"},{"comments":[{"owner":{"account_id":6280200,"reputation":1144,"user_id":4881490,"display_name":"Joe B."},"score":0,"creation_date":1645052986,"post_id":52193720,"comment_id":125771684,"body_markdown":"Thank you for this! Sometimes it&#39;s the simplest of things","body":"Thank you for this! Sometimes it&#39;s the simplest of things"}],"tags":[],"owner":{"account_id":13402630,"reputation":143,"user_id":9671656,"display_name":"tryingsohard"},"comment_count":1,"down_vote_count":0,"up_vote_count":14,"is_accepted":false,"score":14,"last_activity_date":1536183563,"creation_date":1536183563,"answer_id":52193720,"question_id":44265670,"body_markdown":"I was just having this issue and I finally figured out where I was going wrong.\r\n\r\nOver an hour of suggestions from Google didn&#39;t help. It turns out I was on files selected in the -out &gt; production &gt; MyPath folder instead of the -src folder in my project sidebar. Selecting the -scr &gt; MyClass file allows me to do what I want to do. ","title":"How to Change Read-Only Status of Files in intellij","body":"<p>I was just having this issue and I finally figured out where I was going wrong.</p>\n\n<p>Over an hour of suggestions from Google didn't help. It turns out I was on files selected in the -out > production > MyPath folder instead of the -src folder in my project sidebar. Selecting the -scr > MyClass file allows me to do what I want to do. </p>\n"},{"comments":[{"owner":{"account_id":381332,"reputation":18533,"user_id":735926,"accept_rate":95,"display_name":"bfontaine"},"score":4,"creation_date":1629713410,"post_id":59251078,"comment_id":121750562,"body_markdown":"This reminds me of https://xkcd.com/1217/. OP has an issue with a single file, so while changing all rights of all files under the root directory work, it’s almost always a bad solution. It’s like removing all walls of your house just because you lost the key of one door.","body":"This reminds me of <a href=\"https://xkcd.com/1217/\" rel=\"nofollow noreferrer\">xkcd.com/1217</a>. OP has an issue with a single file, so while changing all rights of all files under the root directory work, it’s almost always a bad solution. It’s like removing all walls of your house just because you lost the key of one door."}],"tags":[],"owner":{"account_id":9212369,"reputation":686,"user_id":6845008,"accept_rate":100,"display_name":"Dato Gogshelidze"},"comment_count":1,"down_vote_count":2,"up_vote_count":27,"is_accepted":false,"score":25,"last_activity_date":1614021952,"creation_date":1575902117,"answer_id":59251078,"question_id":44265670,"body_markdown":"For Mac, this definitely works:\r\n\r\n`sudo chmod -R 777 /YourDirectory`\r\n\r\n\r\n","title":"How to Change Read-Only Status of Files in intellij","body":"<p>For Mac, this definitely works:</p>\n<p><code>sudo chmod -R 777 /YourDirectory</code></p>\n"},{"tags":[],"owner":{"account_id":12977465,"reputation":29,"user_id":9381059,"display_name":"Manish Chauhan"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1589455356,"creation_date":1589455356,"answer_id":61796140,"question_id":44265670,"body_markdown":"This error appears when the other user has created those files.&lt;br&gt;\r\n1. Right click on the file or folder to be deleted.&lt;br&gt;\r\n2. Choose reveal in folder option.&lt;br&gt;\r\n3. Delete the file and enter the password.&lt;br&gt;\r\n4. Files will be deleted.","title":"How to Change Read-Only Status of Files in intellij","body":"<p>This error appears when the other user has created those files.<br>\n1. Right click on the file or folder to be deleted.<br>\n2. Choose reveal in folder option.<br>\n3. Delete the file and enter the password.<br>\n4. Files will be deleted.</p>\n"},{"tags":[],"owner":{"account_id":18271816,"reputation":537,"user_id":13302453,"display_name":"Harisudha"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1615968638,"creation_date":1615968638,"answer_id":66669151,"question_id":44265670,"body_markdown":"In case of working with SAP Hybris in IntelliJ, the OOTB module files are read-only (file is not writable) when you import the project with Hybris plugins.\r\n\r\n - While you are importing the project (re-import the project If already\r\n   imported) , you will be prompted for Import Settings.\r\n   \r\n - Uncheck the **Import OOTB modules in read-only mode**.  \r\n   \r\n - After importing , you should be able to edit the OOTB files.\r\n\r\n[![Import Settings][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/PS6Wo.png","title":"How to Change Read-Only Status of Files in intellij","body":"<p>In case of working with SAP Hybris in IntelliJ, the OOTB module files are read-only (file is not writable) when you import the project with Hybris plugins.</p>\n<ul>\n<li><p>While you are importing the project (re-import the project If already\nimported) , you will be prompted for Import Settings.</p>\n</li>\n<li><p>Uncheck the <strong>Import OOTB modules in read-only mode</strong>.</p>\n</li>\n<li><p>After importing , you should be able to edit the OOTB files.</p>\n</li>\n</ul>\n<p><a href=\"https://i.stack.imgur.com/PS6Wo.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/PS6Wo.png\" alt=\"Import Settings\" /></a></p>\n"},{"tags":[],"owner":{"account_id":20062827,"reputation":37,"user_id":14710719,"display_name":"David"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1695186395,"creation_date":1695186395,"answer_id":77139416,"question_id":44265670,"body_markdown":"I was struggling with this situation as well. Here is the solution that worked for me.\r\n\r\nWhen you open a file from Intellij do not choose the main folder which contains the src file, but choose the src file itself and open it. This way it let me write my code again.","title":"How to Change Read-Only Status of Files in intellij","body":"<p>I was struggling with this situation as well. Here is the solution that worked for me.</p>\n<p>When you open a file from Intellij do not choose the main folder which contains the src file, but choose the src file itself and open it. This way it let me write my code again.</p>\n"}],"owner":{"account_id":11008877,"reputation":751,"user_id":8086975,"display_name":"Harry Prn Dz"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":243083,"favorite_count":0,"down_vote_count":0,"up_vote_count":75,"answer_count":9,"score":75,"last_activity_date":1695186395,"creation_date":1496156308,"question_id":44265670,"body_markdown":"I have a  Java project and I want to modify it in intellij but I can&#39;t do it because of this **&quot; read-only file &quot;** or **&quot;file is not writable&quot;** , so how I can modify and execute it?\r\n\r\n\r\n[![this is the problem][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/W6buk.png","title":"How to Change Read-Only Status of Files in intellij","body":"<p>I have a  Java project and I want to modify it in intellij but I can't do it because of this <strong>\" read-only file \"</strong> or <strong>\"file is not writable\"</strong> , so how I can modify and execute it?</p>\n\n<p><a href=\"https://i.stack.imgur.com/W6buk.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/W6buk.png\" alt=\"this is the problem\"></a></p>\n"},{"tags":["java","sql","json","resultset"],"comments":[{"owner":{"account_id":21466,"reputation":13649,"user_id":52176,"accept_rate":71,"display_name":"Leif Gruenwoldt"},"score":1,"creation_date":1319143219,"post_id":6514876,"comment_id":9561795,"body_markdown":"A different implementation http://code.google.com/p/bonex-homerunning/source/browse/trunk/+bonex-homerunning/WEB-INF/src/java/com/bonex/sys/util/JSONUtil.java?spec=svn18&amp;r=18","body":"A different implementation <a href=\"http://code.google.com/p/bonex-homerunning/source/browse/trunk/+bonex-homerunning/WEB-INF/src/java/com/bonex/sys/util/JSONUtil.java?spec=svn18&amp;r=18\" rel=\"nofollow noreferrer\">code.google.com/p/bonex-homerunning/source/browse/trunk/&hellip;</a>"},{"owner":{"account_id":906496,"reputation":558,"user_id":1627053,"display_name":"molecular"},"score":1,"creation_date":1367249026,"post_id":6514876,"comment_id":23304013,"body_markdown":"implementation for java.sql.Types.ARRAY didn&#39;t work for me using postgresql (array got put as a String using &quot;{...}&quot;. Ended up changing line\n  &quot;obj.put(column_name, rs.getArray(column_name));&quot;\nto\n  &quot;Array array = rs.getArray(column_name);\n  if ( array != null ) obj.put(column_name, new JSONArray(array.getArray()));&quot;","body":"implementation for java.sql.Types.ARRAY didn&#39;t work for me using postgresql (array got put as a String using &quot;{...}&quot;. Ended up changing line   &quot;obj.put(column_name, rs.getArray(column_name));&quot; to   &quot;Array array = rs.getArray(column_name);   if ( array != null ) obj.put(column_name, new JSONArray(array.getArray()));&quot;"},{"owner":{"account_id":48638,"reputation":5943,"user_id":144578,"accept_rate":79,"display_name":"Sebastiaan van den Broek"},"score":0,"creation_date":1380967010,"post_id":6514876,"comment_id":28404347,"body_markdown":"If performance is a major issue, you shouldn&#39;t use this JSON API but rather use a streaming library that just writes JSON without needing to create memory objects of all the data (where you can look back/find stuff in the tree). That said, I would make sure you actually have a performance issue before doing that.","body":"If performance is a major issue, you shouldn&#39;t use this JSON API but rather use a streaming library that just writes JSON without needing to create memory objects of all the data (where you can look back/find stuff in the tree). That said, I would make sure you actually have a performance issue before doing that."},{"owner":{"account_id":1072085,"reputation":95,"user_id":1071113,"display_name":"polarfish"},"score":3,"creation_date":1423211310,"post_id":6514876,"comment_id":45065209,"body_markdown":"There are an error in your snippet. `java.sql.Types.BIGINT` is 8 bytes size, so it must be read with `rs.getLong()` not `rs.getInt()`","body":"There are an error in your snippet. <code>java.sql.Types.BIGINT</code> is 8 bytes size, so it must be read with <code>rs.getLong()</code> not <code>rs.getInt()</code>"},{"owner":{"account_id":2327485,"reputation":3184,"user_id":4865117,"accept_rate":14,"display_name":"Leon"},"score":0,"creation_date":1524410545,"post_id":6514876,"comment_id":86950691,"body_markdown":"I think all the `if` `else if` are unnecessary.","body":"I think all the <code>if</code> <code>else if</code> are unnecessary."}],"answers":[{"comments":[{"owner":{"account_id":207148,"reputation":11741,"user_id":456850,"accept_rate":48,"display_name":"Devin Dixon"},"score":0,"creation_date":1309312515,"post_id":6514960,"comment_id":7667286,"body_markdown":"I&#39;m putting the source code in an open-source framework, so I do not know what it will be used for. Therefore I am trying to make it as efficient as possible.","body":"I&#39;m putting the source code in an open-source framework, so I do not know what it will be used for. Therefore I am trying to make it as efficient as possible."},{"owner":{"display_name":"user396070"},"score":1,"creation_date":1381989657,"post_id":6514960,"comment_id":28787785,"body_markdown":"@DevinDixon: is the framework available?  Is there anything like the code in your question already available in an open source repo somewhere?","body":"@DevinDixon: is the framework available?  Is there anything like the code in your question already available in an open source repo somewhere?"},{"owner":{"account_id":921959,"reputation":6312,"user_id":953496,"accept_rate":59,"display_name":"Demodave"},"score":0,"creation_date":1599160092,"post_id":6514960,"comment_id":112695810,"body_markdown":"Please provide example.","body":"Please provide example."}],"tags":[],"owner":{"account_id":104251,"reputation":52940,"user_id":278836,"accept_rate":88,"display_name":"Andrew White"},"comment_count":3,"down_vote_count":1,"up_vote_count":25,"is_accepted":true,"score":24,"last_activity_date":1309312211,"creation_date":1309312211,"answer_id":6514960,"question_id":6514876,"body_markdown":"The JIT Compiler is probably going to make this pretty fast since it&#39;s just branches and basic tests. You could probably make it more elegant with a HashMap lookup to a callback but I doubt it would be any faster. As to memory, this is pretty slim as is. \r\n\r\nSomehow I doubt this code is actually a critical bottle neck for memory or performance. Do you have any real reason to try to optimize it?","title":"Most efficient conversion of ResultSet to JSON?","body":"<p>The JIT Compiler is probably going to make this pretty fast since it's just branches and basic tests. You could probably make it more elegant with a HashMap lookup to a callback but I doubt it would be any faster. As to memory, this is pretty slim as is. </p>\n\n<p>Somehow I doubt this code is actually a critical bottle neck for memory or performance. Do you have any real reason to try to optimize it?</p>\n"},{"comments":[{"owner":{"account_id":1408086,"reputation":3786,"user_id":1335245,"accept_rate":80,"display_name":"Charney Kaye"},"score":0,"creation_date":1484506386,"post_id":7324263,"comment_id":70528191,"body_markdown":"Also define `String column_name;` out of the while loop.","body":"Also define <code>String column_name;</code> out of the while loop."}],"tags":[],"owner":{"account_id":127189,"reputation":1146,"user_id":324197,"display_name":"oravecz"},"comment_count":1,"down_vote_count":0,"up_vote_count":27,"is_accepted":false,"score":27,"last_activity_date":1330117109,"creation_date":1315332692,"answer_id":7324263,"question_id":6514876,"body_markdown":"Two things that will make this faster are:\r\n\r\nMove your call to `rsmd.getColumnCount()` out of the while loop. The column count should not vary across rows.\r\n\r\nFor each column type, you end up calling something like this:\r\n\r\n    obj.put(column_name, rs.getInt(column_name));\r\n\r\nIt will be slightly faster to use the column index to retrieve the column value:\r\n\r\n    obj.put(column_name, rs.getInt(i));\r\n","title":"Most efficient conversion of ResultSet to JSON?","body":"<p>Two things that will make this faster are:</p>\n\n<p>Move your call to <code>rsmd.getColumnCount()</code> out of the while loop. The column count should not vary across rows.</p>\n\n<p>For each column type, you end up calling something like this:</p>\n\n<pre><code>obj.put(column_name, rs.getInt(column_name));\n</code></pre>\n\n<p>It will be slightly faster to use the column index to retrieve the column value:</p>\n\n<pre><code>obj.put(column_name, rs.getInt(i));\n</code></pre>\n"},{"comments":[{"owner":{"account_id":5936918,"reputation":1319,"user_id":4669594,"display_name":"Felipe Rugai"},"score":1,"creation_date":1610394263,"post_id":8120442,"comment_id":116114166,"body_markdown":"Thanks. Just a quick note:\nIn ```Types.TIMESTAMP```, it should be \n ```provider.defaultSerializeDateValue(rs.getTimestamp(i + 1), jgen);```","body":"Thanks. Just a quick note: In <code>Types.TIMESTAMP</code>, it should be   <code>provider.defaultSerializeDateValue(rs.getTimestamp(i + 1), jgen);</code>"}],"tags":[],"owner":{"account_id":433442,"reputation":1046,"user_id":818764,"display_name":"Plap"},"comment_count":1,"down_vote_count":0,"up_vote_count":40,"is_accepted":false,"score":40,"last_activity_date":1689155593,"creation_date":1321267588,"answer_id":8120442,"question_id":6514876,"body_markdown":"I think there&#39;s a way to use less memory (a fixed and not linear amount depending on data cardinality) but this imply to change the method signature. In fact we may print the Json data directly on an output stream as soon as we fetch them from the ResultSet: the already written data will be garbage collected since we don&#39;t need an array that keeps them in memory. \r\n\r\nI use GSON that accepts type adapters. I wrote a type adapter to convert ResultSet to JsonArray and it looks very like to your code. I&#39;m waiting the &quot;Gson 2.1: Targeted Dec 31, 2011&quot; release which will have the &quot;Support for user-defined streaming type adapters&quot;. Then I&#39;ll modify my adapter to be a streaming adapter.\r\n\r\n----------\r\n\r\n\r\n## Update ##\r\n\r\nAs promised I&#39;m back but not with Gson, instead with Jackson 2. Sorry to be late (of 2 years).\r\n\r\n**Preface:** The key to use less memory of the result itsef is in the &quot;server side&quot; cursor. With this kind of cursors (a.k.a. resultset to Java devs) the DBMS sends data incrementally to client (a.k.a. driver) as the client goes forward with the reading. I think Oracle cursor are server side by default. For MySQL &gt; 5.0.2 look for useCursorFetch at [connection url paramenter][1]. Check about your favourite DBMS.\r\n\r\n**1:** So to use less memory we must:\r\n\r\n - use server side cursor behind the scene\r\n - use resultset open as [read only][2] and, of course, [forward only][3];\r\n - avoid to load all the cursor in a list (or a `JSONArray`) but write each row directly on an *output line*, where for output line I mean an output stream or a writer or also a json generator that wraps an output stream or a writer. \r\n\r\n**2:** As Jackson Documentation says: \r\n\r\n&gt; Streaming API is best performing (lowest overhead, fastest read/write;\r\n&gt; other 2 methods build on it)\r\n\r\n**3:** I see you in your code use getInt, getBoolean. getFloat... of ResultSet without [wasNull][4]. I expect this can yield problems. \r\n\r\n**4:** I used arrays to cache thinks and to avoid to call getters each iteration. Although not a fan of the switch/case construct, I used it for that `int` SQL `Types`.\r\n\r\n**The answer:** Not yet fully tested, it&#39;s based on [Jackson 2.2][5]:\r\n\r\n    &lt;dependency&gt;\r\n    \t&lt;groupId&gt;com.fasterxml.jackson.core&lt;/groupId&gt;\r\n    \t&lt;artifactId&gt;jackson-databind&lt;/artifactId&gt;\r\n    \t&lt;version&gt;2.2.2&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n\r\nThe `ResultSetSerializer` object instructs Jackson on how to serialize (tranform the object to JSON) a ResultSet. It uses the Jackson Streaming API inside. Here the code of a test:\r\n\r\n    SimpleModule module = new SimpleModule();\r\n    module.addSerializer(new ResultSetSerializer());\r\n    \r\n    ObjectMapper objectMapper = new ObjectMapper();\r\n    objectMapper.registerModule(module);\r\n    \r\n    [ . . . do the query . . . ]\r\n    ResultSet resultset = statement.executeQuery(query);\r\n\r\n    // Use the DataBind Api here\r\n    ObjectNode objectNode = objectMapper.createObjectNode();\r\n    \r\n    // put the resultset in a containing structure\r\n    objectNode.putPOJO(&quot;results&quot;, resultset);\r\n    \r\n    // generate all\r\n    objectMapper.writeValue(stringWriter, objectNode);\r\n\r\n\r\nAnd, of course, the code of the ResultSetSerializer class:\r\n\r\n    public class ResultSetSerializer extends JsonSerializer&lt;ResultSet&gt; {\r\n    \r\n        public static class ResultSetSerializerException extends JsonProcessingException{\r\n            private static final long serialVersionUID = -914957626413580734L;\r\n\r\n            public ResultSetSerializerException(Throwable cause){\r\n                super(cause);\r\n            }\r\n        }\r\n\r\n        @Override\r\n        public Class&lt;ResultSet&gt; handledType() {\r\n            return ResultSet.class;\r\n        }\r\n    \r\n        @Override\r\n        public void serialize(ResultSet rs, JsonGenerator jgen, SerializerProvider provider) throws IOException, JsonProcessingException {\r\n\r\n            try {\r\n                ResultSetMetaData rsmd = rs.getMetaData();\r\n                int numColumns = rsmd.getColumnCount();\r\n                String[] columnNames = new String[numColumns];\r\n                int[] columnTypes = new int[numColumns];\r\n\r\n                for (int i = 0; i &lt; columnNames.length; i++) {\r\n                    columnNames[i] = rsmd.getColumnLabel(i + 1);\r\n                    columnTypes[i] = rsmd.getColumnType(i + 1);\r\n                }\r\n\r\n                jgen.writeStartArray();\r\n\r\n                while (rs.next()) {\r\n                \r\n                    boolean b;\r\n                    long l;\r\n                    double d;\r\n                \r\n                    jgen.writeStartObject();\r\n        \r\n                    for (int i = 0; i &lt; columnNames.length; i++) {\r\n        \r\n                        jgen.writeFieldName(columnNames[i]);\r\n                        switch (columnTypes[i]) {\r\n        \r\n                        case Types.INTEGER:\r\n                            l = rs.getInt(i + 1);\r\n                            if (rs.wasNull()) {\r\n                                jgen.writeNull();\r\n                            } else {\r\n                                jgen.writeNumber(l);\r\n                            }\r\n                            break;\r\n        \r\n                        case Types.BIGINT:\r\n                            l = rs.getLong(i + 1);\r\n                            if (rs.wasNull()) {\r\n                                jgen.writeNull();\r\n                            } else {\r\n                                jgen.writeNumber(l);\r\n                            }\r\n                            break;\r\n        \r\n                        case Types.DECIMAL:\r\n                        case Types.NUMERIC:\r\n                            jgen.writeNumber(rs.getBigDecimal(i + 1));\r\n                            break;\r\n        \r\n                        case Types.FLOAT:\r\n                        case Types.REAL:\r\n                        case Types.DOUBLE:\r\n                            d = rs.getDouble(i + 1);\r\n                            if (rs.wasNull()) {\r\n                                jgen.writeNull();\r\n                            } else {\r\n                                jgen.writeNumber(d);\r\n                            }\r\n                            break;\r\n        \r\n                        case Types.NVARCHAR:\r\n                        case Types.VARCHAR:\r\n                        case Types.LONGNVARCHAR:\r\n                        case Types.LONGVARCHAR:\r\n                            jgen.writeString(rs.getString(i + 1));\r\n                            break;\r\n        \r\n                        case Types.BOOLEAN:\r\n                        case Types.BIT:\r\n                            b = rs.getBoolean(i + 1);\r\n                            if (rs.wasNull()) {\r\n                                jgen.writeNull();\r\n                            } else {\r\n                                jgen.writeBoolean(b);\r\n                            }\r\n                            break;\r\n        \r\n                        case Types.BINARY:\r\n                        case Types.VARBINARY:\r\n                        case Types.LONGVARBINARY:\r\n                            jgen.writeBinary(rs.getBytes(i + 1));\r\n                            break;\r\n        \r\n                        case Types.TINYINT:\r\n                        case Types.SMALLINT:\r\n                            l = rs.getShort(i + 1);\r\n                            if (rs.wasNull()) {\r\n                                jgen.writeNull();\r\n                            } else {\r\n                                jgen.writeNumber(l);\r\n                            }\r\n                            break;\r\n        \r\n                        case Types.DATE:\r\n                            provider.defaultSerializeDateValue(rs.getDate(i + 1), jgen);\r\n                            break;\r\n        \r\n                        case Types.TIMESTAMP:\r\n                            provider.defaultSerializeDateValue(rs.getTimestamp(i + 1), jgen);\r\n                            break;\r\n        \r\n                        case Types.BLOB:\r\n                            Blob blob = rs.getBlob(i);\r\n                            provider.defaultSerializeValue(blob.getBinaryStream(), jgen);\r\n                            blob.free();\r\n                            break;\r\n        \r\n                        case Types.CLOB:\r\n                            Clob clob = rs.getClob(i);\r\n                            provider.defaultSerializeValue(clob.getCharacterStream(), jgen);\r\n                            clob.free();\r\n                            break;\r\n        \r\n                        case Types.ARRAY:\r\n                            throw new RuntimeException(&quot;ResultSetSerializer not yet implemented for SQL type ARRAY&quot;);\r\n        \r\n                        case Types.STRUCT:\r\n                            throw new RuntimeException(&quot;ResultSetSerializer not yet implemented for SQL type STRUCT&quot;);\r\n        \r\n                        case Types.DISTINCT:\r\n                            throw new RuntimeException(&quot;ResultSetSerializer not yet implemented for SQL type DISTINCT&quot;);\r\n        \r\n                        case Types.REF:\r\n                            throw new RuntimeException(&quot;ResultSetSerializer not yet implemented for SQL type REF&quot;);\r\n\r\n                        case Types.JAVA_OBJECT:\r\n                        default:\r\n                            provider.defaultSerializeValue(rs.getObject(i + 1), jgen);\r\n                            break;\r\n                        }\r\n                    }\r\n        \r\n                    jgen.writeEndObject();\r\n                }\r\n\r\n                jgen.writeEndArray();\r\n\r\n            } catch (SQLException e) {\r\n                throw new ResultSetSerializerException(e);\r\n            }\r\n        }\r\n    }\r\n\r\n  [1]: http://dev.mysql.com/doc/refman/5.0/en/connector-j-reference-configuration-properties.html\r\n  [2]: http://docs.oracle.com/javase/6/docs/api/java/sql/ResultSet.html#CONCUR_READ_ONLY\r\n  [3]: http://docs.oracle.com/javase/6/docs/api/java/sql/ResultSet.html#TYPE_FORWARD_ONLY\r\n  [4]: http://docs.oracle.com/javase/6/docs/api/java/sql/ResultSet.html#wasNull%28%29\r\n  [5]: https://github.com/FasterXML/jackson-core","title":"Most efficient conversion of ResultSet to JSON?","body":"<p>I think there's a way to use less memory (a fixed and not linear amount depending on data cardinality) but this imply to change the method signature. In fact we may print the Json data directly on an output stream as soon as we fetch them from the ResultSet: the already written data will be garbage collected since we don't need an array that keeps them in memory.</p>\n<p>I use GSON that accepts type adapters. I wrote a type adapter to convert ResultSet to JsonArray and it looks very like to your code. I'm waiting the &quot;Gson 2.1: Targeted Dec 31, 2011&quot; release which will have the &quot;Support for user-defined streaming type adapters&quot;. Then I'll modify my adapter to be a streaming adapter.</p>\n<hr />\n<h2>Update</h2>\n<p>As promised I'm back but not with Gson, instead with Jackson 2. Sorry to be late (of 2 years).</p>\n<p><strong>Preface:</strong> The key to use less memory of the result itsef is in the &quot;server side&quot; cursor. With this kind of cursors (a.k.a. resultset to Java devs) the DBMS sends data incrementally to client (a.k.a. driver) as the client goes forward with the reading. I think Oracle cursor are server side by default. For MySQL &gt; 5.0.2 look for useCursorFetch at <a href=\"http://dev.mysql.com/doc/refman/5.0/en/connector-j-reference-configuration-properties.html\" rel=\"nofollow noreferrer\">connection url paramenter</a>. Check about your favourite DBMS.</p>\n<p><strong>1:</strong> So to use less memory we must:</p>\n<ul>\n<li>use server side cursor behind the scene</li>\n<li>use resultset open as <a href=\"http://docs.oracle.com/javase/6/docs/api/java/sql/ResultSet.html#CONCUR_READ_ONLY\" rel=\"nofollow noreferrer\">read only</a> and, of course, <a href=\"http://docs.oracle.com/javase/6/docs/api/java/sql/ResultSet.html#TYPE_FORWARD_ONLY\" rel=\"nofollow noreferrer\">forward only</a>;</li>\n<li>avoid to load all the cursor in a list (or a <code>JSONArray</code>) but write each row directly on an <em>output line</em>, where for output line I mean an output stream or a writer or also a json generator that wraps an output stream or a writer.</li>\n</ul>\n<p><strong>2:</strong> As Jackson Documentation says:</p>\n<blockquote>\n<p>Streaming API is best performing (lowest overhead, fastest read/write;\nother 2 methods build on it)</p>\n</blockquote>\n<p><strong>3:</strong> I see you in your code use getInt, getBoolean. getFloat... of ResultSet without <a href=\"http://docs.oracle.com/javase/6/docs/api/java/sql/ResultSet.html#wasNull%28%29\" rel=\"nofollow noreferrer\">wasNull</a>. I expect this can yield problems.</p>\n<p><strong>4:</strong> I used arrays to cache thinks and to avoid to call getters each iteration. Although not a fan of the switch/case construct, I used it for that <code>int</code> SQL <code>Types</code>.</p>\n<p><strong>The answer:</strong> Not yet fully tested, it's based on <a href=\"https://github.com/FasterXML/jackson-core\" rel=\"nofollow noreferrer\">Jackson 2.2</a>:</p>\n<pre><code>&lt;dependency&gt;\n    &lt;groupId&gt;com.fasterxml.jackson.core&lt;/groupId&gt;\n    &lt;artifactId&gt;jackson-databind&lt;/artifactId&gt;\n    &lt;version&gt;2.2.2&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n<p>The <code>ResultSetSerializer</code> object instructs Jackson on how to serialize (tranform the object to JSON) a ResultSet. It uses the Jackson Streaming API inside. Here the code of a test:</p>\n<pre><code>SimpleModule module = new SimpleModule();\nmodule.addSerializer(new ResultSetSerializer());\n\nObjectMapper objectMapper = new ObjectMapper();\nobjectMapper.registerModule(module);\n\n[ . . . do the query . . . ]\nResultSet resultset = statement.executeQuery(query);\n\n// Use the DataBind Api here\nObjectNode objectNode = objectMapper.createObjectNode();\n\n// put the resultset in a containing structure\nobjectNode.putPOJO(&quot;results&quot;, resultset);\n\n// generate all\nobjectMapper.writeValue(stringWriter, objectNode);\n</code></pre>\n<p>And, of course, the code of the ResultSetSerializer class:</p>\n<pre><code>public class ResultSetSerializer extends JsonSerializer&lt;ResultSet&gt; {\n\n    public static class ResultSetSerializerException extends JsonProcessingException{\n        private static final long serialVersionUID = -914957626413580734L;\n\n        public ResultSetSerializerException(Throwable cause){\n            super(cause);\n        }\n    }\n\n    @Override\n    public Class&lt;ResultSet&gt; handledType() {\n        return ResultSet.class;\n    }\n\n    @Override\n    public void serialize(ResultSet rs, JsonGenerator jgen, SerializerProvider provider) throws IOException, JsonProcessingException {\n\n        try {\n            ResultSetMetaData rsmd = rs.getMetaData();\n            int numColumns = rsmd.getColumnCount();\n            String[] columnNames = new String[numColumns];\n            int[] columnTypes = new int[numColumns];\n\n            for (int i = 0; i &lt; columnNames.length; i++) {\n                columnNames[i] = rsmd.getColumnLabel(i + 1);\n                columnTypes[i] = rsmd.getColumnType(i + 1);\n            }\n\n            jgen.writeStartArray();\n\n            while (rs.next()) {\n            \n                boolean b;\n                long l;\n                double d;\n            \n                jgen.writeStartObject();\n    \n                for (int i = 0; i &lt; columnNames.length; i++) {\n    \n                    jgen.writeFieldName(columnNames[i]);\n                    switch (columnTypes[i]) {\n    \n                    case Types.INTEGER:\n                        l = rs.getInt(i + 1);\n                        if (rs.wasNull()) {\n                            jgen.writeNull();\n                        } else {\n                            jgen.writeNumber(l);\n                        }\n                        break;\n    \n                    case Types.BIGINT:\n                        l = rs.getLong(i + 1);\n                        if (rs.wasNull()) {\n                            jgen.writeNull();\n                        } else {\n                            jgen.writeNumber(l);\n                        }\n                        break;\n    \n                    case Types.DECIMAL:\n                    case Types.NUMERIC:\n                        jgen.writeNumber(rs.getBigDecimal(i + 1));\n                        break;\n    \n                    case Types.FLOAT:\n                    case Types.REAL:\n                    case Types.DOUBLE:\n                        d = rs.getDouble(i + 1);\n                        if (rs.wasNull()) {\n                            jgen.writeNull();\n                        } else {\n                            jgen.writeNumber(d);\n                        }\n                        break;\n    \n                    case Types.NVARCHAR:\n                    case Types.VARCHAR:\n                    case Types.LONGNVARCHAR:\n                    case Types.LONGVARCHAR:\n                        jgen.writeString(rs.getString(i + 1));\n                        break;\n    \n                    case Types.BOOLEAN:\n                    case Types.BIT:\n                        b = rs.getBoolean(i + 1);\n                        if (rs.wasNull()) {\n                            jgen.writeNull();\n                        } else {\n                            jgen.writeBoolean(b);\n                        }\n                        break;\n    \n                    case Types.BINARY:\n                    case Types.VARBINARY:\n                    case Types.LONGVARBINARY:\n                        jgen.writeBinary(rs.getBytes(i + 1));\n                        break;\n    \n                    case Types.TINYINT:\n                    case Types.SMALLINT:\n                        l = rs.getShort(i + 1);\n                        if (rs.wasNull()) {\n                            jgen.writeNull();\n                        } else {\n                            jgen.writeNumber(l);\n                        }\n                        break;\n    \n                    case Types.DATE:\n                        provider.defaultSerializeDateValue(rs.getDate(i + 1), jgen);\n                        break;\n    \n                    case Types.TIMESTAMP:\n                        provider.defaultSerializeDateValue(rs.getTimestamp(i + 1), jgen);\n                        break;\n    \n                    case Types.BLOB:\n                        Blob blob = rs.getBlob(i);\n                        provider.defaultSerializeValue(blob.getBinaryStream(), jgen);\n                        blob.free();\n                        break;\n    \n                    case Types.CLOB:\n                        Clob clob = rs.getClob(i);\n                        provider.defaultSerializeValue(clob.getCharacterStream(), jgen);\n                        clob.free();\n                        break;\n    \n                    case Types.ARRAY:\n                        throw new RuntimeException(&quot;ResultSetSerializer not yet implemented for SQL type ARRAY&quot;);\n    \n                    case Types.STRUCT:\n                        throw new RuntimeException(&quot;ResultSetSerializer not yet implemented for SQL type STRUCT&quot;);\n    \n                    case Types.DISTINCT:\n                        throw new RuntimeException(&quot;ResultSetSerializer not yet implemented for SQL type DISTINCT&quot;);\n    \n                    case Types.REF:\n                        throw new RuntimeException(&quot;ResultSetSerializer not yet implemented for SQL type REF&quot;);\n\n                    case Types.JAVA_OBJECT:\n                    default:\n                        provider.defaultSerializeValue(rs.getObject(i + 1), jgen);\n                        break;\n                    }\n                }\n    \n                jgen.writeEndObject();\n            }\n\n            jgen.writeEndArray();\n\n        } catch (SQLException e) {\n            throw new ResultSetSerializerException(e);\n        }\n    }\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":23551,"reputation":30672,"user_id":59087,"accept_rate":99,"display_name":"Dave Jarvis"},"score":4,"creation_date":1343779586,"post_id":8899898,"comment_id":15599115,"body_markdown":"Looping backwards (comparing the index zero) is also faster (than comparing the index to an expression).","body":"Looping backwards (comparing the index zero) is also faster (than comparing the index to an expression)."}],"tags":[],"owner":{"account_id":1061472,"reputation":11336,"user_id":1062992,"accept_rate":94,"display_name":"egerardus"},"comment_count":1,"down_vote_count":0,"up_vote_count":7,"is_accepted":false,"score":7,"last_activity_date":1343781903,"creation_date":1326825741,"answer_id":8899898,"question_id":6514876,"body_markdown":"In addition to suggestions made by @Jim Cook. One other thought is to use a switch instead of if-elses:\r\n\r\n    while(rs.next()) {\r\n      int numColumns = rsmd.getColumnCount();\r\n      JSONObject obj = new JSONObject();\r\n\r\n      for( int i=1; i&lt;numColumns+1; i++) {\r\n        String column_name = rsmd.getColumnName(i);\r\n\t\t    \r\n        switch( rsmd.getColumnType( i ) ) {\r\n          case java.sql.Types.ARRAY:\r\n            obj.put(column_name, rs.getArray(column_name));     break;\r\n          case java.sql.Types.BIGINT:\r\n            obj.put(column_name, rs.getInt(column_name));       break;\r\n          case java.sql.Types.BOOLEAN:\r\n            obj.put(column_name, rs.getBoolean(column_name));   break;\r\n          case java.sql.Types.BLOB:\r\n            obj.put(column_name, rs.getBlob(column_name));      break;\r\n          case java.sql.Types.DOUBLE:\r\n            obj.put(column_name, rs.getDouble(column_name));    break;\r\n          case java.sql.Types.FLOAT:\r\n            obj.put(column_name, rs.getFloat(column_name));     break;\r\n          case java.sql.Types.INTEGER:\r\n            obj.put(column_name, rs.getInt(column_name));       break;\r\n          case java.sql.Types.NVARCHAR:\r\n            obj.put(column_name, rs.getNString(column_name));   break;\r\n          case java.sql.Types.VARCHAR:\r\n            obj.put(column_name, rs.getString(column_name));    break;\r\n          case java.sql.Types.TINYINT:\r\n            obj.put(column_name, rs.getInt(column_name));       break;\r\n          case java.sql.Types.SMALLINT:\r\n            obj.put(column_name, rs.getInt(column_name));       break;\r\n          case java.sql.Types.DATE:\r\n            obj.put(column_name, rs.getDate(column_name));      break;\r\n          case java.sql.Types.TIMESTAMP:\r\n            obj.put(column_name, rs.getTimestamp(column_name)); break;\r\n          default:\r\n            obj.put(column_name, rs.getObject(column_name));    break;\r\n        }\r\n      }\r\n     \r\n      json.put(obj);\r\n    }\r\n","title":"Most efficient conversion of ResultSet to JSON?","body":"<p>In addition to suggestions made by @Jim Cook. One other thought is to use a switch instead of if-elses:</p>\n\n<pre><code>while(rs.next()) {\n  int numColumns = rsmd.getColumnCount();\n  JSONObject obj = new JSONObject();\n\n  for( int i=1; i&lt;numColumns+1; i++) {\n    String column_name = rsmd.getColumnName(i);\n\n    switch( rsmd.getColumnType( i ) ) {\n      case java.sql.Types.ARRAY:\n        obj.put(column_name, rs.getArray(column_name));     break;\n      case java.sql.Types.BIGINT:\n        obj.put(column_name, rs.getInt(column_name));       break;\n      case java.sql.Types.BOOLEAN:\n        obj.put(column_name, rs.getBoolean(column_name));   break;\n      case java.sql.Types.BLOB:\n        obj.put(column_name, rs.getBlob(column_name));      break;\n      case java.sql.Types.DOUBLE:\n        obj.put(column_name, rs.getDouble(column_name));    break;\n      case java.sql.Types.FLOAT:\n        obj.put(column_name, rs.getFloat(column_name));     break;\n      case java.sql.Types.INTEGER:\n        obj.put(column_name, rs.getInt(column_name));       break;\n      case java.sql.Types.NVARCHAR:\n        obj.put(column_name, rs.getNString(column_name));   break;\n      case java.sql.Types.VARCHAR:\n        obj.put(column_name, rs.getString(column_name));    break;\n      case java.sql.Types.TINYINT:\n        obj.put(column_name, rs.getInt(column_name));       break;\n      case java.sql.Types.SMALLINT:\n        obj.put(column_name, rs.getInt(column_name));       break;\n      case java.sql.Types.DATE:\n        obj.put(column_name, rs.getDate(column_name));      break;\n      case java.sql.Types.TIMESTAMP:\n        obj.put(column_name, rs.getTimestamp(column_name)); break;\n      default:\n        obj.put(column_name, rs.getObject(column_name));    break;\n    }\n  }\n\n  json.put(obj);\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":2293921,"reputation":9958,"user_id":2015912,"accept_rate":70,"display_name":"scottb"},"score":0,"creation_date":1452724607,"post_id":12680722,"comment_id":57301757,"body_markdown":"Well, ok but .. the practical truth is that the difference between these coding alternatives for any real use case is so small that, in a real application, the performance differences among them would most likely be immeasurably small.  Make your code correct first and then (only then) make it fast (if it needs to be faster).","body":"Well, ok but .. the practical truth is that the difference between these coding alternatives for any real use case is so small that, in a real application, the performance differences among them would most likely be immeasurably small.  Make your code correct first and then (only then) make it fast (if it needs to be faster)."},{"owner":{"account_id":472489,"reputation":2168,"user_id":1442960,"accept_rate":80,"display_name":"Marcus"},"score":0,"creation_date":1452811592,"post_id":12680722,"comment_id":57345645,"body_markdown":"Agreed, but the main question was in regards to the fastest, most efficient way.  There are many styles that make code difficult to read or maintain, but are more efficient, although typically these are resolved by compiler optimizations at some point in the future.  One example of this is the use of `intern()` for strings which are largely no longer needed in most modern versions of Java.","body":"Agreed, but the main question was in regards to the fastest, most efficient way.  There are many styles that make code difficult to read or maintain, but are more efficient, although typically these are resolved by compiler optimizations at some point in the future.  One example of this is the use of <code>intern()</code> for strings which are largely no longer needed in most modern versions of Java."},{"owner":{"account_id":2293921,"reputation":9958,"user_id":2015912,"accept_rate":70,"display_name":"scottb"},"score":0,"creation_date":1452816598,"post_id":12680722,"comment_id":57347543,"body_markdown":"Agreed, but if-then-else and switch-case blocks themselves are poor solutions for problems of maintainability, robustness, and readability in any case.  For enums that you own (or whose code you can modify), the best practice is very often to use constant-specific methods in a rich enum type,  Most of the time, switching on an enum should be viewed with circumspection because there are better solutions out there.","body":"Agreed, but if-then-else and switch-case blocks themselves are poor solutions for problems of maintainability, robustness, and readability in any case.  For enums that you own (or whose code you can modify), the best practice is very often to use constant-specific methods in a rich enum type,  Most of the time, switching on an enum should be viewed with circumspection because there are better solutions out there."}],"tags":[],"owner":{"account_id":472489,"reputation":2168,"user_id":1442960,"accept_rate":80,"display_name":"Marcus"},"comment_count":3,"down_vote_count":1,"up_vote_count":3,"is_accepted":false,"score":2,"last_activity_date":1418427849,"creation_date":1349123959,"answer_id":12680722,"question_id":6514876,"body_markdown":"Just as a heads up, the if/then loop is more efficient than the switch for enums.  If you have the switch against the raw enum integer, then it&#39;s more efficient, but against the variable, if/then is more efficient, at least for Java 5, 6, and 7.\r\n\r\nI.e., for some reason (after some performance tests)\r\n\r\n    if (ordinalValue == 1) {\r\n       ...\r\n    } else (ordinalValue == 2 {\r\n       ... \r\n    }\r\n\r\nis faster than\r\n\r\n    switch( myEnum.ordinal() ) {\r\n        case 1:\r\n           ...\r\n           break;\r\n        case 2:\r\n           ...\r\n           break;\r\n    }\r\n\r\nI see that a few people are doubting me, so I&#39;ll post code here that you can run yourself to see the difference, along with output I have from Java 7.  The results of the following code with 10 enum values are as follows.  Note the key here is the if/then using an integer value comparing against ordinal constants of the enum, vs. the switch with an enum&#39;s ordinal value against the raw int ordinal values, vs. a switch with the enum against each enum name.  The if/then with an integer value beat out both other switches, although the last switch was a little faster than the first switch, it was not faster than the if/else.\r\n\r\nIf / else took 23 ms&lt;br&gt;\r\nSwitch took 45 ms&lt;br&gt;\r\nSwitch 2 took 30 ms&lt;br&gt;\r\nTotal matches: 3000000&lt;br&gt;\r\n\r\n\tpackage testing;\r\n\t\r\n\timport java.util.Random;\r\n\t\r\n\tenum TestEnum {\r\n\t\tFIRST,\r\n\t\tSECOND,\r\n\t\tTHIRD,\r\n\t\tFOURTH,\r\n\t\tFIFTH,\r\n\t\tSIXTH,\r\n\t\tSEVENTH,\r\n\t\tEIGHTH,\r\n\t\tNINTH,\r\n\t\tTENTH\r\n\t}\r\n\t\r\n\tpublic class SwitchTest {\r\n\t\tprivate static int LOOP = 1000000;\r\n\t\tprivate static Random r = new Random();\r\n\t\tprivate static int SIZE = TestEnum.values().length;\r\n\t\t\r\n\t\tpublic static void main(String[] args) {\r\n\t\t\tlong time = System.currentTimeMillis();\r\n\t\t\tint matches = 0;\r\n\t\t\tfor (int i = 0; i &lt; LOOP; i++) {\r\n\t\t\t\tint j = r.nextInt(SIZE);\r\n\t\t\t\tif (j == TestEnum.FIRST.ordinal()) {\r\n\t\t\t\t\tmatches++;\r\n\t\t\t\t} else if (j == TestEnum.SECOND.ordinal()) {\r\n\t\t\t\t\tmatches++;\r\n\t\t\t\t} else if (j == TestEnum.THIRD.ordinal()) {\r\n\t\t\t\t\tmatches++;\r\n\t\t\t\t} else if (j == TestEnum.FOURTH.ordinal()) {\r\n\t\t\t\t\tmatches++;\r\n\t\t\t\t} else if (j == TestEnum.FIFTH.ordinal()) {\r\n\t\t\t\t\tmatches++;\r\n\t\t\t\t} else if (j == TestEnum.SIXTH.ordinal()) {\r\n\t\t\t\t\tmatches++;\r\n\t\t\t\t} else if (j == TestEnum.SEVENTH.ordinal()) {\r\n\t\t\t\t\tmatches++;\r\n\t\t\t\t} else if (j == TestEnum.EIGHTH.ordinal()) {\r\n\t\t\t\t\tmatches++;\r\n\t\t\t\t} else if (j == TestEnum.NINTH.ordinal()) {\r\n\t\t\t\t\tmatches++;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tmatches++;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tSystem.out.println(&quot;If / else took &quot;+(System.currentTimeMillis() - time)+&quot; ms&quot;);\r\n\t\t\ttime = System.currentTimeMillis();\r\n\t\t\tfor (int i = 0; i &lt; LOOP; i++) {\r\n\t\t\t\tTestEnum te = TestEnum.values()[r.nextInt(SIZE)];\r\n\t\t\t\tswitch (te.ordinal()) {\r\n\t\t\t\t\tcase 0:\r\n\t\t\t\t\t\tmatches++;\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase 1:\r\n\t\t\t\t\t\tmatches++;\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase 2:\r\n\t\t\t\t\t\tmatches++;\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase 3:\r\n\t\t\t\t\t\tmatches++;\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase 4:\r\n\t\t\t\t\t\tmatches++;\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase 5:\r\n\t\t\t\t\t\tmatches++;\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase 6:\r\n\t\t\t\t\t\tmatches++;\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase 7:\r\n\t\t\t\t\t\tmatches++;\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase 8:\r\n\t\t\t\t\t\tmatches++;\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase 9:\r\n\t\t\t\t\t\tmatches++;\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tdefault:\r\n\t\t\t\t\t\tmatches++;\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tSystem.out.println(&quot;Switch took &quot;+(System.currentTimeMillis() - time)+&quot; ms&quot;);\r\n\t\t\ttime = System.currentTimeMillis();\r\n\t\t\tfor (int i = 0; i &lt; LOOP; i++) {\r\n\t\t\t\tTestEnum te = TestEnum.values()[r.nextInt(SIZE)];\r\n\t\t\t\tswitch (te) {\r\n\t\t\t\t\tcase FIRST:\r\n\t\t\t\t\t\tmatches++;\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase SECOND:\r\n\t\t\t\t\t\tmatches++;\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase THIRD:\r\n\t\t\t\t\t\tmatches++;\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase FOURTH:\r\n\t\t\t\t\t\tmatches++;\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase FIFTH:\r\n\t\t\t\t\t\tmatches++;\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase SIXTH:\r\n\t\t\t\t\t\tmatches++;\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase SEVENTH:\r\n\t\t\t\t\t\tmatches++;\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase EIGHTH:\r\n\t\t\t\t\t\tmatches++;\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase NINTH:\r\n\t\t\t\t\t\tmatches++;\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tdefault:\r\n\t\t\t\t\t\tmatches++;\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tSystem.out.println(&quot;Switch 2 took &quot;+(System.currentTimeMillis() - time)+&quot; ms&quot;);\t\t\r\n\t\t\tSystem.out.println(&quot;Total matches: &quot;+matches);\r\n\t\t}\r\n\t}\r\n","title":"Most efficient conversion of ResultSet to JSON?","body":"<p>Just as a heads up, the if/then loop is more efficient than the switch for enums.  If you have the switch against the raw enum integer, then it's more efficient, but against the variable, if/then is more efficient, at least for Java 5, 6, and 7.</p>\n\n<p>I.e., for some reason (after some performance tests)</p>\n\n<pre><code>if (ordinalValue == 1) {\n   ...\n} else (ordinalValue == 2 {\n   ... \n}\n</code></pre>\n\n<p>is faster than</p>\n\n<pre><code>switch( myEnum.ordinal() ) {\n    case 1:\n       ...\n       break;\n    case 2:\n       ...\n       break;\n}\n</code></pre>\n\n<p>I see that a few people are doubting me, so I'll post code here that you can run yourself to see the difference, along with output I have from Java 7.  The results of the following code with 10 enum values are as follows.  Note the key here is the if/then using an integer value comparing against ordinal constants of the enum, vs. the switch with an enum's ordinal value against the raw int ordinal values, vs. a switch with the enum against each enum name.  The if/then with an integer value beat out both other switches, although the last switch was a little faster than the first switch, it was not faster than the if/else.</p>\n\n<p>If / else took 23 ms<br>\nSwitch took 45 ms<br>\nSwitch 2 took 30 ms<br>\nTotal matches: 3000000<br></p>\n\n<pre><code>package testing;\n\nimport java.util.Random;\n\nenum TestEnum {\n    FIRST,\n    SECOND,\n    THIRD,\n    FOURTH,\n    FIFTH,\n    SIXTH,\n    SEVENTH,\n    EIGHTH,\n    NINTH,\n    TENTH\n}\n\npublic class SwitchTest {\n    private static int LOOP = 1000000;\n    private static Random r = new Random();\n    private static int SIZE = TestEnum.values().length;\n\n    public static void main(String[] args) {\n        long time = System.currentTimeMillis();\n        int matches = 0;\n        for (int i = 0; i &lt; LOOP; i++) {\n            int j = r.nextInt(SIZE);\n            if (j == TestEnum.FIRST.ordinal()) {\n                matches++;\n            } else if (j == TestEnum.SECOND.ordinal()) {\n                matches++;\n            } else if (j == TestEnum.THIRD.ordinal()) {\n                matches++;\n            } else if (j == TestEnum.FOURTH.ordinal()) {\n                matches++;\n            } else if (j == TestEnum.FIFTH.ordinal()) {\n                matches++;\n            } else if (j == TestEnum.SIXTH.ordinal()) {\n                matches++;\n            } else if (j == TestEnum.SEVENTH.ordinal()) {\n                matches++;\n            } else if (j == TestEnum.EIGHTH.ordinal()) {\n                matches++;\n            } else if (j == TestEnum.NINTH.ordinal()) {\n                matches++;\n            } else {\n                matches++;\n            }\n        }\n        System.out.println(\"If / else took \"+(System.currentTimeMillis() - time)+\" ms\");\n        time = System.currentTimeMillis();\n        for (int i = 0; i &lt; LOOP; i++) {\n            TestEnum te = TestEnum.values()[r.nextInt(SIZE)];\n            switch (te.ordinal()) {\n                case 0:\n                    matches++;\n                    break;\n                case 1:\n                    matches++;\n                    break;\n                case 2:\n                    matches++;\n                    break;\n                case 3:\n                    matches++;\n                    break;\n                case 4:\n                    matches++;\n                    break;\n                case 5:\n                    matches++;\n                    break;\n                case 6:\n                    matches++;\n                    break;\n                case 7:\n                    matches++;\n                    break;\n                case 8:\n                    matches++;\n                    break;\n                case 9:\n                    matches++;\n                    break;\n                default:\n                    matches++;\n                    break;\n            }\n        }\n        System.out.println(\"Switch took \"+(System.currentTimeMillis() - time)+\" ms\");\n        time = System.currentTimeMillis();\n        for (int i = 0; i &lt; LOOP; i++) {\n            TestEnum te = TestEnum.values()[r.nextInt(SIZE)];\n            switch (te) {\n                case FIRST:\n                    matches++;\n                    break;\n                case SECOND:\n                    matches++;\n                    break;\n                case THIRD:\n                    matches++;\n                    break;\n                case FOURTH:\n                    matches++;\n                    break;\n                case FIFTH:\n                    matches++;\n                    break;\n                case SIXTH:\n                    matches++;\n                    break;\n                case SEVENTH:\n                    matches++;\n                    break;\n                case EIGHTH:\n                    matches++;\n                    break;\n                case NINTH:\n                    matches++;\n                    break;\n                default:\n                    matches++;\n                    break;\n            }\n        }\n        System.out.println(\"Switch 2 took \"+(System.currentTimeMillis() - time)+\" ms\");     \n        System.out.println(\"Total matches: \"+matches);\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1260830,"reputation":1847,"user_id":1219163,"accept_rate":89,"display_name":"Li3ro"},"comment_count":0,"down_vote_count":1,"up_vote_count":3,"is_accepted":false,"score":2,"last_activity_date":1353313619,"creation_date":1353310955,"answer_id":13449529,"question_id":6514876,"body_markdown":"If anyone plan to use this implementation, You might wanna [check this out][1] [and this][2]\r\n\r\nThis is my version of that convertion code:\r\n\r\n    public class ResultSetConverter {\r\n\tpublic static JSONArray convert(ResultSet rs) throws SQLException,\r\n\t\t\tJSONException {\r\n\t\tJSONArray json = new JSONArray();\r\n\t\tResultSetMetaData rsmd = rs.getMetaData();\r\n\t\tint numColumns = rsmd.getColumnCount();\r\n\t\twhile (rs.next()) {\r\n\r\n\t\t\tJSONObject obj = new JSONObject();\r\n\r\n\t\t\tfor (int i = 1; i &lt; numColumns + 1; i++) {\r\n\t\t\t\tString column_name = rsmd.getColumnName(i);\r\n\r\n\t\t\t\tif (rsmd.getColumnType(i) == java.sql.Types.ARRAY) {\r\n\t\t\t\t\tobj.put(column_name, rs.getArray(column_name));\r\n\t\t\t\t} else if (rsmd.getColumnType(i) == java.sql.Types.BIGINT) {\r\n\t\t\t\t\tobj.put(column_name, rs.getLong(column_name));\r\n\t\t\t\t} else if (rsmd.getColumnType(i) == java.sql.Types.REAL) {\r\n\t\t\t\t\tobj.put(column_name, rs.getFloat(column_name));\r\n\t\t\t\t} else if (rsmd.getColumnType(i) == java.sql.Types.BOOLEAN) {\r\n\t\t\t\t\tobj.put(column_name, rs.getBoolean(column_name));\r\n\t\t\t\t} else if (rsmd.getColumnType(i) == java.sql.Types.BLOB) {\r\n\t\t\t\t\tobj.put(column_name, rs.getBlob(column_name));\r\n\t\t\t\t} else if (rsmd.getColumnType(i) == java.sql.Types.DOUBLE) {\r\n\t\t\t\t\tobj.put(column_name, rs.getDouble(column_name));\r\n\t\t\t\t} else if (rsmd.getColumnType(i) == java.sql.Types.FLOAT) {\r\n\t\t\t\t\tobj.put(column_name, rs.getDouble(column_name));\r\n\t\t\t\t} else if (rsmd.getColumnType(i) == java.sql.Types.INTEGER) {\r\n\t\t\t\t\tobj.put(column_name, rs.getInt(column_name));\r\n\t\t\t\t} else if (rsmd.getColumnType(i) == java.sql.Types.NVARCHAR) {\r\n\t\t\t\t\tobj.put(column_name, rs.getNString(column_name));\r\n\t\t\t\t} else if (rsmd.getColumnType(i) == java.sql.Types.VARCHAR) {\r\n\t\t\t\t\tobj.put(column_name, rs.getString(column_name));\r\n\t\t\t\t} else if (rsmd.getColumnType(i) == java.sql.Types.CHAR) {\r\n\t\t\t\t\tobj.put(column_name, rs.getString(column_name));\r\n\t\t\t\t} else if (rsmd.getColumnType(i) == java.sql.Types.NCHAR) {\r\n\t\t\t\t\tobj.put(column_name, rs.getNString(column_name));\r\n\t\t\t\t} else if (rsmd.getColumnType(i) == java.sql.Types.LONGNVARCHAR) {\r\n\t\t\t\t\tobj.put(column_name, rs.getNString(column_name));\r\n\t\t\t\t} else if (rsmd.getColumnType(i) == java.sql.Types.LONGVARCHAR) {\r\n\t\t\t\t\tobj.put(column_name, rs.getString(column_name));\r\n\t\t\t\t} else if (rsmd.getColumnType(i) == java.sql.Types.TINYINT) {\r\n\t\t\t\t\tobj.put(column_name, rs.getByte(column_name));\r\n\t\t\t\t} else if (rsmd.getColumnType(i) == java.sql.Types.SMALLINT) {\r\n\t\t\t\t\tobj.put(column_name, rs.getShort(column_name));\r\n\t\t\t\t} else if (rsmd.getColumnType(i) == java.sql.Types.DATE) {\r\n\t\t\t\t\tobj.put(column_name, rs.getDate(column_name));\r\n\t\t\t\t} else if (rsmd.getColumnType(i) == java.sql.Types.TIME) {\r\n\t\t\t\t\tobj.put(column_name, rs.getTime(column_name));\r\n\t\t\t\t} else if (rsmd.getColumnType(i) == java.sql.Types.TIMESTAMP) {\r\n\t\t\t\t\tobj.put(column_name, rs.getTimestamp(column_name));\r\n\t\t\t\t} else if (rsmd.getColumnType(i) == java.sql.Types.BINARY) {\r\n\t\t\t\t\tobj.put(column_name, rs.getBytes(column_name));\r\n\t\t\t\t} else if (rsmd.getColumnType(i) == java.sql.Types.VARBINARY) {\r\n\t\t\t\t\tobj.put(column_name, rs.getBytes(column_name));\r\n\t\t\t\t} else if (rsmd.getColumnType(i) == java.sql.Types.LONGVARBINARY) {\r\n\t\t\t\t\tobj.put(column_name, rs.getBinaryStream(column_name));\r\n\t\t\t\t} else if (rsmd.getColumnType(i) == java.sql.Types.BIT) {\r\n\t\t\t\t\tobj.put(column_name, rs.getBoolean(column_name));\r\n\t\t\t\t} else if (rsmd.getColumnType(i) == java.sql.Types.CLOB) {\r\n\t\t\t\t\tobj.put(column_name, rs.getClob(column_name));\r\n\t\t\t\t} else if (rsmd.getColumnType(i) == java.sql.Types.NUMERIC) {\r\n\t\t\t\t\tobj.put(column_name, rs.getBigDecimal(column_name));\r\n\t\t\t\t} else if (rsmd.getColumnType(i) == java.sql.Types.DECIMAL) {\r\n\t\t\t\t\tobj.put(column_name, rs.getBigDecimal(column_name));\r\n\t\t\t\t} else if (rsmd.getColumnType(i) == java.sql.Types.DATALINK) {\r\n\t\t\t\t\tobj.put(column_name, rs.getURL(column_name));\r\n\t\t\t\t} else if (rsmd.getColumnType(i) == java.sql.Types.REF) {\r\n\t\t\t\t\tobj.put(column_name, rs.getRef(column_name));\r\n\t\t\t\t} else if (rsmd.getColumnType(i) == java.sql.Types.STRUCT) {\r\n\t\t\t\t\tobj.put(column_name, rs.getObject(column_name)); // must be a custom mapping consists of a class that implements the interface SQLData and an entry in a java.util.Map object.\r\n\t\t\t\t} else if (rsmd.getColumnType(i) == java.sql.Types.DISTINCT) {\r\n\t\t\t\t\tobj.put(column_name, rs.getObject(column_name)); // must be a custom mapping consists of a class that implements the interface SQLData and an entry in a java.util.Map object.\r\n\t\t\t\t} else if (rsmd.getColumnType(i) == java.sql.Types.JAVA_OBJECT) {\r\n\t\t\t\t\tobj.put(column_name, rs.getObject(column_name));\r\n\t\t\t\t} else {\r\n\t\t\t\t\tobj.put(column_name, rs.getString(i));\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tjson.put(obj);\r\n\t\t}\r\n\r\n\t\treturn json;\r\n\t}\r\n    }\r\n\r\n\r\n  [1]: http://www.cs.mun.ca/~michael/java/jdk1.1-beta2-docs/guide/jdbc/mapping.doc.html\r\n  [2]: http://docs.oracle.com/javase/1.4.2/docs/guide/jdbc/getstart/mapping.html","title":"Most efficient conversion of ResultSet to JSON?","body":"<p>If anyone plan to use this implementation, You might wanna <a href=\"http://www.cs.mun.ca/~michael/java/jdk1.1-beta2-docs/guide/jdbc/mapping.doc.html\" rel=\"nofollow\">check this out</a> <a href=\"http://docs.oracle.com/javase/1.4.2/docs/guide/jdbc/getstart/mapping.html\" rel=\"nofollow\">and this</a></p>\n\n<p>This is my version of that convertion code:</p>\n\n<pre><code>public class ResultSetConverter {\npublic static JSONArray convert(ResultSet rs) throws SQLException,\n        JSONException {\n    JSONArray json = new JSONArray();\n    ResultSetMetaData rsmd = rs.getMetaData();\n    int numColumns = rsmd.getColumnCount();\n    while (rs.next()) {\n\n        JSONObject obj = new JSONObject();\n\n        for (int i = 1; i &lt; numColumns + 1; i++) {\n            String column_name = rsmd.getColumnName(i);\n\n            if (rsmd.getColumnType(i) == java.sql.Types.ARRAY) {\n                obj.put(column_name, rs.getArray(column_name));\n            } else if (rsmd.getColumnType(i) == java.sql.Types.BIGINT) {\n                obj.put(column_name, rs.getLong(column_name));\n            } else if (rsmd.getColumnType(i) == java.sql.Types.REAL) {\n                obj.put(column_name, rs.getFloat(column_name));\n            } else if (rsmd.getColumnType(i) == java.sql.Types.BOOLEAN) {\n                obj.put(column_name, rs.getBoolean(column_name));\n            } else if (rsmd.getColumnType(i) == java.sql.Types.BLOB) {\n                obj.put(column_name, rs.getBlob(column_name));\n            } else if (rsmd.getColumnType(i) == java.sql.Types.DOUBLE) {\n                obj.put(column_name, rs.getDouble(column_name));\n            } else if (rsmd.getColumnType(i) == java.sql.Types.FLOAT) {\n                obj.put(column_name, rs.getDouble(column_name));\n            } else if (rsmd.getColumnType(i) == java.sql.Types.INTEGER) {\n                obj.put(column_name, rs.getInt(column_name));\n            } else if (rsmd.getColumnType(i) == java.sql.Types.NVARCHAR) {\n                obj.put(column_name, rs.getNString(column_name));\n            } else if (rsmd.getColumnType(i) == java.sql.Types.VARCHAR) {\n                obj.put(column_name, rs.getString(column_name));\n            } else if (rsmd.getColumnType(i) == java.sql.Types.CHAR) {\n                obj.put(column_name, rs.getString(column_name));\n            } else if (rsmd.getColumnType(i) == java.sql.Types.NCHAR) {\n                obj.put(column_name, rs.getNString(column_name));\n            } else if (rsmd.getColumnType(i) == java.sql.Types.LONGNVARCHAR) {\n                obj.put(column_name, rs.getNString(column_name));\n            } else if (rsmd.getColumnType(i) == java.sql.Types.LONGVARCHAR) {\n                obj.put(column_name, rs.getString(column_name));\n            } else if (rsmd.getColumnType(i) == java.sql.Types.TINYINT) {\n                obj.put(column_name, rs.getByte(column_name));\n            } else if (rsmd.getColumnType(i) == java.sql.Types.SMALLINT) {\n                obj.put(column_name, rs.getShort(column_name));\n            } else if (rsmd.getColumnType(i) == java.sql.Types.DATE) {\n                obj.put(column_name, rs.getDate(column_name));\n            } else if (rsmd.getColumnType(i) == java.sql.Types.TIME) {\n                obj.put(column_name, rs.getTime(column_name));\n            } else if (rsmd.getColumnType(i) == java.sql.Types.TIMESTAMP) {\n                obj.put(column_name, rs.getTimestamp(column_name));\n            } else if (rsmd.getColumnType(i) == java.sql.Types.BINARY) {\n                obj.put(column_name, rs.getBytes(column_name));\n            } else if (rsmd.getColumnType(i) == java.sql.Types.VARBINARY) {\n                obj.put(column_name, rs.getBytes(column_name));\n            } else if (rsmd.getColumnType(i) == java.sql.Types.LONGVARBINARY) {\n                obj.put(column_name, rs.getBinaryStream(column_name));\n            } else if (rsmd.getColumnType(i) == java.sql.Types.BIT) {\n                obj.put(column_name, rs.getBoolean(column_name));\n            } else if (rsmd.getColumnType(i) == java.sql.Types.CLOB) {\n                obj.put(column_name, rs.getClob(column_name));\n            } else if (rsmd.getColumnType(i) == java.sql.Types.NUMERIC) {\n                obj.put(column_name, rs.getBigDecimal(column_name));\n            } else if (rsmd.getColumnType(i) == java.sql.Types.DECIMAL) {\n                obj.put(column_name, rs.getBigDecimal(column_name));\n            } else if (rsmd.getColumnType(i) == java.sql.Types.DATALINK) {\n                obj.put(column_name, rs.getURL(column_name));\n            } else if (rsmd.getColumnType(i) == java.sql.Types.REF) {\n                obj.put(column_name, rs.getRef(column_name));\n            } else if (rsmd.getColumnType(i) == java.sql.Types.STRUCT) {\n                obj.put(column_name, rs.getObject(column_name)); // must be a custom mapping consists of a class that implements the interface SQLData and an entry in a java.util.Map object.\n            } else if (rsmd.getColumnType(i) == java.sql.Types.DISTINCT) {\n                obj.put(column_name, rs.getObject(column_name)); // must be a custom mapping consists of a class that implements the interface SQLData and an entry in a java.util.Map object.\n            } else if (rsmd.getColumnType(i) == java.sql.Types.JAVA_OBJECT) {\n                obj.put(column_name, rs.getObject(column_name));\n            } else {\n                obj.put(column_name, rs.getString(i));\n            }\n        }\n\n        json.put(obj);\n    }\n\n    return json;\n}\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":267265,"reputation":4348,"user_id":555336,"accept_rate":82,"display_name":"Oneiros"},"score":0,"creation_date":1421859179,"post_id":19196092,"comment_id":44524632,"body_markdown":"This is awesome but I&#39;m having troubles in parsing the resulting string. When some of the values contain a quotation mark the parser can&#39;t correctly work: I think that quotation marks inside values should be escaped (`&quot;` to `\\&quot;`) in order to create a valid JSON string. Is this a bug of the `formatJSON()` function? Or am I missing something?","body":"This is awesome but I&#39;m having troubles in parsing the resulting string. When some of the values contain a quotation mark the parser can&#39;t correctly work: I think that quotation marks inside values should be escaped (<code>&quot;</code> to <code>\\&quot;</code>) in order to create a valid JSON string. Is this a bug of the <code>formatJSON()</code> function? Or am I missing something?"},{"owner":{"account_id":247217,"reputation":213465,"user_id":521799,"accept_rate":89,"display_name":"Lukas Eder"},"score":0,"creation_date":1421860674,"post_id":19196092,"comment_id":44525517,"body_markdown":"@Oneiros: jOOQ should correctly escape those quotation marks... Best ask a new question (with details) or report a bug: https://github.com/jOOQ/jOOQ/issues/new","body":"@Oneiros: jOOQ should correctly escape those quotation marks... Best ask a new question (with details) or report a bug: <a href=\"https://github.com/jOOQ/jOOQ/issues/new\" rel=\"nofollow noreferrer\">github.com/jOOQ/jOOQ/issues/new</a>"},{"owner":{"account_id":3089836,"reputation":479,"user_id":2616203,"accept_rate":100,"display_name":"Nikola Lošić"},"score":0,"creation_date":1468266376,"post_id":19196092,"comment_id":64046421,"body_markdown":"In your example, what is resultSet used in `fetch(resultSet)`? It&#39;s not defined anywhere. And if I get JDBC `ResultSet` before fetch what is the purpose of `DSL.using(connection)`? Why does it need connection? :)","body":"In your example, what is resultSet used in <code>fetch(resultSet)</code>? It&#39;s not defined anywhere. And if I get JDBC <code>ResultSet</code> before fetch what is the purpose of <code>DSL.using(connection)</code>? Why does it need connection? :)"},{"owner":{"account_id":247217,"reputation":213465,"user_id":521799,"accept_rate":89,"display_name":"Lukas Eder"},"score":1,"creation_date":1468302067,"post_id":19196092,"comment_id":64057028,"body_markdown":"@NikolaLošić: Well, the question asks about using a JDBC `ResultSet`, so I think there is no doubt about `ResultSet`. Indeed, it doesn&#39;t look obvious why the `connection` is needed here. If you&#39;re using jOOQ, you will have a `DSLContext` (the result of `DSL.using(connection)` or similar) sitting around available to you anyway, though.","body":"@NikolaLošić: Well, the question asks about using a JDBC <code>ResultSet</code>, so I think there is no doubt about <code>ResultSet</code>. Indeed, it doesn&#39;t look obvious why the <code>connection</code> is needed here. If you&#39;re using jOOQ, you will have a <code>DSLContext</code> (the result of <code>DSL.using(connection)</code> or similar) sitting around available to you anyway, though."},{"owner":{"account_id":1090615,"reputation":1241,"user_id":1085339,"accept_rate":58,"display_name":"Lorenzo Barbagli"},"score":0,"creation_date":1484319231,"post_id":19196092,"comment_id":70474296,"body_markdown":"what&#39;s the correct JOOQ library to include? I&#39;m trying many but every one gives me Class not found error with  DSL reference. Thnks","body":"what&#39;s the correct JOOQ library to include? I&#39;m trying many but every one gives me Class not found error with  DSL reference. Thnks"},{"owner":{"account_id":247217,"reputation":213465,"user_id":521799,"accept_rate":89,"display_name":"Lukas Eder"},"score":0,"creation_date":1484319289,"post_id":19196092,"comment_id":70474342,"body_markdown":"@LorenzoBarbagli: Would you mind asking a new question with some details? There are many (possibly not jOOQ related) things that can go wrong...","body":"@LorenzoBarbagli: Would you mind asking a new question with some details? There are many (possibly not jOOQ related) things that can go wrong..."}],"tags":[],"owner":{"account_id":247217,"reputation":213465,"user_id":521799,"accept_rate":89,"display_name":"Lukas Eder"},"comment_count":6,"down_vote_count":0,"up_vote_count":10,"is_accepted":false,"score":10,"last_activity_date":1606334240,"creation_date":1380964875,"answer_id":19196092,"question_id":6514876,"body_markdown":"### Use a third party library for the JSON export\r\n\r\nYou could use [jOOQ][1] for the job. You don&#39;t have to use all of jOOQ&#39;s features to take advantage of some useful JDBC extensions. In this case, simply write:\r\n\r\n    String json = DSL.using(connection).fetch(resultSet).formatJSON();\r\n\r\nRelevant API methods used are:\r\n\r\n- [`DSLContext.fetch(ResultSet)`][2] to convert a JDBC ResultSet into a jOOQ Result.\r\n- [`Result.formatJSON()`][3] to format the jOOQ Result into a JSON String.\r\n\r\nThe resulting formatting will look like this:\r\n\r\n&lt;!-- language: lang-javascript --&gt;\r\n\r\n    {&quot;fields&quot;:[{&quot;name&quot;:&quot;field-1&quot;,&quot;type&quot;:&quot;type-1&quot;},\r\n               {&quot;name&quot;:&quot;field-2&quot;,&quot;type&quot;:&quot;type-2&quot;},\r\n               ...,\r\n               {&quot;name&quot;:&quot;field-n&quot;,&quot;type&quot;:&quot;type-n&quot;}],\r\n     &quot;records&quot;:[[value-1-1,value-1-2,...,value-1-n],\r\n                [value-2-1,value-2-2,...,value-2-n]]}\r\n\r\nYou could also create your own formatting rather easily, through [`Result.map(RecordMapper)`][4]\r\n\r\nThis essentially does the same as your code, circumventing the generation of JSON objects, &quot;streaming&quot; directly into a `StringBuilder`. I&#39;d say that the performance overhead should be negligible in both cases, though.\r\n\r\n(Disclaimer: I work for the company behind jOOQ)\r\n\r\n### Use SQL/JSON features instead\r\n\r\nOf course, [you don&#39;t have to use your middleware to map JDBC ResultSets to JSON][5]. The question doesn&#39;t mention for which SQL dialect this needs to be done, but many support standard SQL/JSON syntax, or something similar, e.g.\r\n\r\n**Oracle**\r\n\r\n```sql\r\nSELECT json_arrayagg(json_object(*))\r\nFROM t\r\n```\r\n\r\n**SQL Server**\r\n\r\n```sql\r\nSELECT *\r\nFROM t\r\nFOR JSON AUTO\r\n```\r\n\r\n**PostgreSQL**\r\n\r\n```sql\r\nSELECT to_jsonb(array_agg(t))\r\nFROM t\r\n```\r\n\r\n\r\n  [1]: http://www.jooq.org\r\n  [2]: http://www.jooq.org/javadoc/latest/org/jooq/DSLContext.html#fetch%28java.sql.ResultSet%29\r\n  [3]: http://www.jooq.org/javadoc/latest/org/jooq/Result.html#formatJSON%28%29\r\n  [4]: http://www.jooq.org/javadoc/latest/org/jooq/Result.html#map%28org.jooq.RecordMapper%29\r\n  [5]: https://blog.jooq.org/2019/11/13/stop-mapping-stuff-in-your-middleware-use-sqls-xml-or-json-operators-instead/","title":"Most efficient conversion of ResultSet to JSON?","body":"<h3>Use a third party library for the JSON export</h3>\n<p>You could use <a href=\"http://www.jooq.org\" rel=\"nofollow noreferrer\">jOOQ</a> for the job. You don't have to use all of jOOQ's features to take advantage of some useful JDBC extensions. In this case, simply write:</p>\n<pre><code>String json = DSL.using(connection).fetch(resultSet).formatJSON();\n</code></pre>\n<p>Relevant API methods used are:</p>\n<ul>\n<li><a href=\"http://www.jooq.org/javadoc/latest/org/jooq/DSLContext.html#fetch%28java.sql.ResultSet%29\" rel=\"nofollow noreferrer\"><code>DSLContext.fetch(ResultSet)</code></a> to convert a JDBC ResultSet into a jOOQ Result.</li>\n<li><a href=\"http://www.jooq.org/javadoc/latest/org/jooq/Result.html#formatJSON%28%29\" rel=\"nofollow noreferrer\"><code>Result.formatJSON()</code></a> to format the jOOQ Result into a JSON String.</li>\n</ul>\n<p>The resulting formatting will look like this:</p>\n<pre class=\"lang-javascript prettyprint-override\"><code>{&quot;fields&quot;:[{&quot;name&quot;:&quot;field-1&quot;,&quot;type&quot;:&quot;type-1&quot;},\n           {&quot;name&quot;:&quot;field-2&quot;,&quot;type&quot;:&quot;type-2&quot;},\n           ...,\n           {&quot;name&quot;:&quot;field-n&quot;,&quot;type&quot;:&quot;type-n&quot;}],\n &quot;records&quot;:[[value-1-1,value-1-2,...,value-1-n],\n            [value-2-1,value-2-2,...,value-2-n]]}\n</code></pre>\n<p>You could also create your own formatting rather easily, through <a href=\"http://www.jooq.org/javadoc/latest/org/jooq/Result.html#map%28org.jooq.RecordMapper%29\" rel=\"nofollow noreferrer\"><code>Result.map(RecordMapper)</code></a></p>\n<p>This essentially does the same as your code, circumventing the generation of JSON objects, &quot;streaming&quot; directly into a <code>StringBuilder</code>. I'd say that the performance overhead should be negligible in both cases, though.</p>\n<p>(Disclaimer: I work for the company behind jOOQ)</p>\n<h3>Use SQL/JSON features instead</h3>\n<p>Of course, <a href=\"https://blog.jooq.org/2019/11/13/stop-mapping-stuff-in-your-middleware-use-sqls-xml-or-json-operators-instead/\" rel=\"nofollow noreferrer\">you don't have to use your middleware to map JDBC ResultSets to JSON</a>. The question doesn't mention for which SQL dialect this needs to be done, but many support standard SQL/JSON syntax, or something similar, e.g.</p>\n<p><strong>Oracle</strong></p>\n<pre class=\"lang-sql prettyprint-override\"><code>SELECT json_arrayagg(json_object(*))\nFROM t\n</code></pre>\n<p><strong>SQL Server</strong></p>\n<pre class=\"lang-sql prettyprint-override\"><code>SELECT *\nFROM t\nFOR JSON AUTO\n</code></pre>\n<p><strong>PostgreSQL</strong></p>\n<pre class=\"lang-sql prettyprint-override\"><code>SELECT to_jsonb(array_agg(t))\nFROM t\n</code></pre>\n"},{"tags":[],"owner":{"account_id":4393110,"reputation":11,"user_id":3580951,"display_name":"reil bhudaya"},"comment_count":0,"down_vote_count":2,"up_vote_count":1,"is_accepted":false,"score":-1,"last_activity_date":1411984335,"creation_date":1411982463,"answer_id":26096477,"question_id":6514876,"body_markdown":" the other way , here I have used ArrayList and Map, so its not  call json object row by row but after iteration of resultset finished :\r\n\r\n\r\n\r\n \r\n\r\n     List&lt;Map&lt;String, String&gt;&gt; list = new ArrayList&lt;Map&lt;String, String&gt;&gt;();\r\n    \t\t \r\n      ResultSetMetaData rsMetaData = rs.getMetaData();\t\r\n    \t\t\t\t   \t\t\t\t    \r\n    \t\t\t\t\t \r\n    \t  while(rs.next()){\r\n    \t\t\t\t\t\t\r\n    \t\t\t  Map map = new HashMap();\r\n    \t\t\t  for (int i = 1; i &lt;= rsMetaData.getColumnCount(); i++) {\r\n    \t\t\t\t String key = rsMetaData.getColumnName(i);\r\n                        \r\n                      String value = null;\r\n    \r\n                   if (rsmd.getColumnType(i) == java.sql.Types.VARCHAR) {\r\n                               value = rs.getString(key);\r\n                   } else if(rsmd.getColumnType(i)==java.sql.Types.BIGINT)                         \r\n                                 value = rs.getLong(key);\r\n                   }                  \r\n    \r\n    \t\t\t\t   \r\n    \t\t\t\t    map.put(key, value);\r\n    \t\t\t  }\r\n    \t\t\t  list.add(map);\r\n    \r\n    \t\t\t\t\t\t\t\r\n    \t}\r\n    \t\t\t\t\t\r\n    \r\n         json.put(list);\t\r\n\r\n\t\r\n\r\n\r\n","title":"Most efficient conversion of ResultSet to JSON?","body":"<p>the other way , here I have used ArrayList and Map, so its not  call json object row by row but after iteration of resultset finished :</p>\n\n<pre><code> List&lt;Map&lt;String, String&gt;&gt; list = new ArrayList&lt;Map&lt;String, String&gt;&gt;();\n\n  ResultSetMetaData rsMetaData = rs.getMetaData();  \n\n\n      while(rs.next()){\n\n              Map map = new HashMap();\n              for (int i = 1; i &lt;= rsMetaData.getColumnCount(); i++) {\n                 String key = rsMetaData.getColumnName(i);\n\n                  String value = null;\n\n               if (rsmd.getColumnType(i) == java.sql.Types.VARCHAR) {\n                           value = rs.getString(key);\n               } else if(rsmd.getColumnType(i)==java.sql.Types.BIGINT)                         \n                             value = rs.getLong(key);\n               }                  \n\n\n                    map.put(key, value);\n              }\n              list.add(map);\n\n\n    }\n\n\n     json.put(list);    \n</code></pre>\n"},{"comments":[{"owner":{"account_id":5300653,"reputation":493,"user_id":4230397,"accept_rate":55,"display_name":"Prathamesh dhanawade"},"score":0,"creation_date":1459230989,"post_id":30477906,"comment_id":60179441,"body_markdown":"how do i access and use the object ....say i want to print the whole Name column..and is the object easily available for CRUD operations??","body":"how do i access and use the object ....say i want to print the whole Name column..and is the object easily available for CRUD operations??"},{"owner":{"account_id":3970425,"reputation":4907,"user_id":3275167,"accept_rate":82,"display_name":"coderz"},"score":0,"creation_date":1459231486,"post_id":30477906,"comment_id":60179630,"body_markdown":"@Prathameshdhanawade This method is to covert JDBC ResultSet to a JSON array. Developers usually do not use raw JDBC ResultSet, they usually convert it to a list of Java objects, i.e. JSON object. You see the return value is an array of JSON objects. You are easily access one object through `JSONObject json = resList.get(i);` Then you are free to manipulate the JSON object `json`.","body":"@Prathameshdhanawade This method is to covert JDBC ResultSet to a JSON array. Developers usually do not use raw JDBC ResultSet, they usually convert it to a list of Java objects, i.e. JSON object. You see the return value is an array of JSON objects. You are easily access one object through <code>JSONObject json = resList.get(i);</code> Then you are free to manipulate the JSON object <code>json</code>."},{"owner":{"account_id":5300653,"reputation":493,"user_id":4230397,"accept_rate":55,"display_name":"Prathamesh dhanawade"},"score":0,"creation_date":1459232005,"post_id":30477906,"comment_id":60179879,"body_markdown":"Actually i will be needing the object to prepare a graphical view. So i ws just curious i could manipulate the object. Thnx.","body":"Actually i will be needing the object to prepare a graphical view. So i ws just curious i could manipulate the object. Thnx."},{"owner":{"account_id":3970425,"reputation":4907,"user_id":3275167,"accept_rate":82,"display_name":"coderz"},"score":0,"creation_date":1459232147,"post_id":30477906,"comment_id":60179954,"body_markdown":"Could you please describe &quot;graphical view&quot;? Or given an example?","body":"Could you please describe &quot;graphical view&quot;? Or given an example?"},{"owner":{"account_id":5300653,"reputation":493,"user_id":4230397,"accept_rate":55,"display_name":"Prathamesh dhanawade"},"score":0,"creation_date":1459234078,"post_id":30477906,"comment_id":60180962,"body_markdown":"I am trying to display column value as :\n\n\nJSONObject obj= jsonList.get(1);\n          \n          System.out.println(obj.getString(&quot;name&quot;)+&quot;\\t&quot;+obj.getString(&quot;company&quot;));\n\nbut getting an error as &quot; org.json.JSONException: JSONObject[&quot;name&quot;] not found.&quot;","body":"I am trying to display column value as :   JSONObject obj= jsonList.get(1);                      System.out.println(obj.getString(&quot;name&quot;)+&quot;\\t&quot;+obj.getString(&zwnj;&#8203;&quot;company&quot;));  but getting an error as &quot; org.json.JSONException: JSONObject[&quot;name&quot;] not found.&quot;"},{"owner":{"account_id":3970425,"reputation":4907,"user_id":3275167,"accept_rate":82,"display_name":"coderz"},"score":0,"creation_date":1459276026,"post_id":30477906,"comment_id":60209694,"body_markdown":"@Prathameshdhanawade That means key &quot;name&quot; does not exist. I suggest you `System.out.println(obj);` (or use debug mode) to see which keys the JSON object have.","body":"@Prathameshdhanawade That means key &quot;name&quot; does not exist. I suggest you <code>System.out.println(obj);</code> (or use debug mode) to see which keys the JSON object have."},{"owner":{"account_id":5300653,"reputation":493,"user_id":4230397,"accept_rate":55,"display_name":"Prathamesh dhanawade"},"score":0,"creation_date":1459331683,"post_id":30477906,"comment_id":60234392,"body_markdown":"I did. Nd found out to be casing issue. I m good now and can manipulate the object at my will.","body":"I did. Nd found out to be casing issue. I m good now and can manipulate the object at my will."},{"owner":{"account_id":3970425,"reputation":4907,"user_id":3275167,"accept_rate":82,"display_name":"coderz"},"score":0,"creation_date":1459398794,"post_id":30477906,"comment_id":60271221,"body_markdown":"@Prathameshdhanawade Glad to hear that:)","body":"@Prathameshdhanawade Glad to hear that:)"}],"tags":[],"owner":{"account_id":3970425,"reputation":4907,"user_id":3275167,"accept_rate":82,"display_name":"coderz"},"comment_count":8,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1432717682,"creation_date":1432717682,"answer_id":30477906,"question_id":6514876,"body_markdown":"First pre-generate column names, second use `rs.getString(i)` instead of `rs.getString(column_name)`.\r\n\r\nThe following is an implementation of this:\r\n\r\n        /*\r\n         * Convert ResultSet to a common JSON Object array\r\n         * Result is like: [{&quot;ID&quot;:&quot;1&quot;,&quot;NAME&quot;:&quot;Tom&quot;,&quot;AGE&quot;:&quot;24&quot;}, {&quot;ID&quot;:&quot;2&quot;,&quot;NAME&quot;:&quot;Bob&quot;,&quot;AGE&quot;:&quot;26&quot;}, ...]\r\n         */\r\n        public static List&lt;JSONObject&gt; getFormattedResult(ResultSet rs) {\r\n            List&lt;JSONObject&gt; resList = new ArrayList&lt;JSONObject&gt;();\r\n            try {\r\n                // get column names\r\n                ResultSetMetaData rsMeta = rs.getMetaData();\r\n                int columnCnt = rsMeta.getColumnCount();\r\n                List&lt;String&gt; columnNames = new ArrayList&lt;String&gt;();\r\n                for(int i=1;i&lt;=columnCnt;i++) {\r\n                    columnNames.add(rsMeta.getColumnName(i).toUpperCase());\r\n                }\r\n                \r\n                while(rs.next()) { // convert each object to an human readable JSON object\r\n                    JSONObject obj = new JSONObject();\r\n                    for(int i=1;i&lt;=columnCnt;i++) {\r\n                        String key = columnNames.get(i - 1);\r\n                        String value = rs.getString(i);\r\n                        obj.put(key, value);\r\n                    }\r\n                    resList.add(obj);\r\n                }\r\n            } catch(Exception e) {\r\n                e.printStackTrace();\r\n            } finally {\r\n                try {\r\n                    rs.close();\r\n                } catch (SQLException e) {\r\n                    e.printStackTrace();\r\n                }\r\n            }\r\n            return resList;\r\n        }\r\n","title":"Most efficient conversion of ResultSet to JSON?","body":"<p>First pre-generate column names, second use <code>rs.getString(i)</code> instead of <code>rs.getString(column_name)</code>.</p>\n\n<p>The following is an implementation of this:</p>\n\n<pre><code>    /*\n     * Convert ResultSet to a common JSON Object array\n     * Result is like: [{\"ID\":\"1\",\"NAME\":\"Tom\",\"AGE\":\"24\"}, {\"ID\":\"2\",\"NAME\":\"Bob\",\"AGE\":\"26\"}, ...]\n     */\n    public static List&lt;JSONObject&gt; getFormattedResult(ResultSet rs) {\n        List&lt;JSONObject&gt; resList = new ArrayList&lt;JSONObject&gt;();\n        try {\n            // get column names\n            ResultSetMetaData rsMeta = rs.getMetaData();\n            int columnCnt = rsMeta.getColumnCount();\n            List&lt;String&gt; columnNames = new ArrayList&lt;String&gt;();\n            for(int i=1;i&lt;=columnCnt;i++) {\n                columnNames.add(rsMeta.getColumnName(i).toUpperCase());\n            }\n\n            while(rs.next()) { // convert each object to an human readable JSON object\n                JSONObject obj = new JSONObject();\n                for(int i=1;i&lt;=columnCnt;i++) {\n                    String key = columnNames.get(i - 1);\n                    String value = rs.getString(i);\n                    obj.put(key, value);\n                }\n                resList.add(obj);\n            }\n        } catch(Exception e) {\n            e.printStackTrace();\n        } finally {\n            try {\n                rs.close();\n            } catch (SQLException e) {\n                e.printStackTrace();\n            }\n        }\n        return resList;\n    }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1960454,"reputation":44539,"user_id":1762224,"accept_rate":61,"display_name":"Mr. Polywhirl"},"comment_count":0,"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1452723030,"creation_date":1452705278,"answer_id":34772942,"question_id":6514876,"body_markdown":"This answer may not be the most efficient, but it sure is dynamic. Pairing native JDBC with Google&#39;s Gson library, I easily can convert from an SQL result to a JSON stream.\r\n\r\nI have included the converter, example DB properties file, SQL table generation, and a Gradle build file (with dependencies used).\r\n\r\n## QueryApp.java\r\n\r\n&lt;!-- language: lang-java --&gt;\r\n    \r\n    import java.io.PrintWriter;\r\n    \r\n    import com.oracle.jdbc.ResultSetConverter;\r\n\r\n    public class QueryApp {\r\n    \tpublic static void main(String[] args) {\r\n            PrintWriter writer = new PrintWriter(System.out);\r\n            String dbProps = &quot;/database.properties&quot;;\r\n            String indent = &quot;    &quot;;\r\n    \r\n            writer.println(&quot;Basic SELECT:&quot;);\r\n            ResultSetConverter.queryToJson(writer, dbProps, &quot;SELECT * FROM Beatles&quot;, indent, false);\r\n    \r\n            writer.println(&quot;\\n\\nIntermediate SELECT:&quot;);\r\n            ResultSetConverter.queryToJson(writer, dbProps, &quot;SELECT first_name, last_name, getAge(date_of_birth) as age FROM Beatles&quot;, indent, true);\r\n        }\r\n    }\r\n\r\n## ResultSetConverter.java\r\n\r\n&lt;!-- language: lang-java --&gt;\r\n\r\n    package com.oracle.jdbc;\r\n    \r\n    import java.io.*;\r\n    import java.lang.reflect.Type;\r\n    import java.sql.*;\r\n    import java.util.*;\r\n    \r\n    import com.google.common.reflect.TypeToken;\r\n    import com.google.gson.GsonBuilder;\r\n    import com.google.gson.stream.JsonWriter;\r\n    \r\n    public class ResultSetConverter {\r\n        public static final Type RESULT_TYPE = new TypeToken&lt;List&lt;Map&lt;String, Object&gt;&gt;&gt;() {\r\n            private static final long serialVersionUID = -3467016635635320150L;\r\n        }.getType();\r\n    \r\n        public static void queryToJson(Writer writer, String connectionProperties, String query, String indent, boolean closeWriter) {\r\n            Connection conn = null;\r\n            Statement stmt = null;\r\n            GsonBuilder gson = new GsonBuilder();\r\n            JsonWriter jsonWriter = new JsonWriter(writer);\r\n    \r\n            if (indent != null) jsonWriter.setIndent(indent);\r\n    \r\n            try {\r\n                Properties props = readConnectionInfo(connectionProperties);\r\n                Class.forName(props.getProperty(&quot;driver&quot;));\r\n    \r\n                conn = openConnection(props);\r\n                stmt = conn.createStatement();\r\n    \r\n                gson.create().toJson(QueryHelper.select(stmt, query), RESULT_TYPE, jsonWriter);\r\n    \r\n                if (closeWriter) jsonWriter.close();\r\n    \r\n                stmt.close();\r\n                conn.close();\r\n            } catch (SQLException se) {\r\n                se.printStackTrace();\r\n            } catch (Exception e) {\r\n                e.printStackTrace();\r\n                try {\r\n                    if (stmt != null) stmt.close();\r\n                } catch (SQLException se2) {\r\n                }\r\n                try {\r\n                    if (conn != null) conn.close();\r\n                } catch (SQLException se) {\r\n                    se.printStackTrace();\r\n                }\r\n                try {\r\n                    if (closeWriter &amp;&amp; jsonWriter != null) jsonWriter.close();\r\n                } catch (IOException ioe) {\r\n                    ioe.printStackTrace();\r\n                }\r\n            }\r\n        }\r\n    \r\n        private static Properties readConnectionInfo(String resource) throws IOException {\r\n            Properties properties = new Properties();\r\n            InputStream in = ResultSetConverter.class.getResourceAsStream(resource);\r\n            properties.load(in);\r\n            in.close();\r\n    \r\n            return properties;\r\n        }\r\n    \r\n        private static Connection openConnection(Properties connectionProperties) throws IOException, SQLException {\r\n            String database = connectionProperties.getProperty(&quot;database&quot;);\r\n            String username = connectionProperties.getProperty(&quot;username&quot;);\r\n            String password = connectionProperties.getProperty(&quot;password&quot;);\r\n    \r\n            return DriverManager.getConnection(database, username, password);\r\n        }\r\n    }\r\n\r\n## QueryHelper.java\r\n\r\n&lt;!-- language: lang-java --&gt;\r\n\r\n    package com.oracle.jdbc;\r\n    \r\n    import java.sql.*;\r\n    import java.text.*;\r\n    import java.util.*;\r\n    \r\n    import com.google.common.base.CaseFormat;\r\n    \r\n    public class QueryHelper {\r\n    \tstatic DateFormat DATE_FORMAT = new SimpleDateFormat(&quot;YYYY-MM-dd&quot;);\r\n    \r\n    \tpublic static List&lt;Map&lt;String, Object&gt;&gt; select(Statement stmt, String query) throws SQLException {\r\n    \t\tResultSet resultSet = stmt.executeQuery(query);\r\n    \t\tList&lt;Map&lt;String, Object&gt;&gt; records = mapRecords(resultSet);\r\n    \r\n    \t\tresultSet.close();\r\n    \r\n    \t\treturn records;\r\n    \t}\r\n    \r\n    \tpublic static List&lt;Map&lt;String, Object&gt;&gt; mapRecords(ResultSet resultSet) throws SQLException {\r\n    \t\tList&lt;Map&lt;String, Object&gt;&gt; records = new ArrayList&lt;Map&lt;String, Object&gt;&gt;();\r\n    \t\tResultSetMetaData metaData = resultSet.getMetaData();\r\n    \r\n    \t\twhile (resultSet.next()) {\r\n    \t\t\trecords.add(mapRecord(resultSet, metaData));\r\n    \t\t}\r\n    \r\n    \t\treturn records;\r\n    \t}\r\n    \r\n    \tpublic static Map&lt;String, Object&gt; mapRecord(ResultSet resultSet, ResultSetMetaData metaData) throws SQLException {\r\n    \t\tMap&lt;String, Object&gt; record = new HashMap&lt;String, Object&gt;();\r\n    \r\n    \t\tfor (int c = 1; c &lt;= metaData.getColumnCount(); c++) {\r\n    \t\t\tString columnType = metaData.getColumnTypeName(c);\r\n    \t\t\tString columnName = formatPropertyName(metaData.getColumnName(c));\r\n    \t\t\tObject value = resultSet.getObject(c);\r\n    \r\n    \t\t\tif (columnType.equals(&quot;DATE&quot;)) {\r\n    \t\t\t\tvalue = DATE_FORMAT.format(value);\r\n    \t\t\t}\r\n    \r\n    \t\t\trecord.put(columnName, value);\r\n    \t\t}\r\n    \r\n    \t\treturn record;\r\n    \t}\r\n    \r\n    \tprivate static String formatPropertyName(String property) {\r\n    \t\treturn CaseFormat.LOWER_UNDERSCORE.to(CaseFormat.LOWER_CAMEL, property);\r\n    \t}\r\n    }\r\n\r\n## database.properties\r\n\r\n&lt;!-- language: lang-sh --&gt;\r\n\r\n    driver=com.mysql.jdbc.Driver\r\n    database=jdbc:mysql://localhost/JDBC_Tutorial\r\n    username=root\r\n    password=\r\n\r\n## JDBC_Tutorial.sql\r\n\r\n&lt;!-- language: lang-sql --&gt;\r\n\r\n    -- phpMyAdmin SQL Dump\r\n    -- version 4.5.1\r\n    -- http://www.phpmyadmin.net\r\n    --\r\n    -- Host: 127.0.0.1\r\n    -- Generation Time: Jan 12, 2016 at 07:40 PM\r\n    -- Server version: 10.1.8-MariaDB\r\n    -- PHP Version: 5.6.14\r\n    \r\n    SET SQL_MODE = &quot;NO_AUTO_VALUE_ON_ZERO&quot;;\r\n    SET time_zone = &quot;+00:00&quot;;\r\n    \r\n    \r\n    /*!40101 SET @OLD_CHARACTER_SET_CLIENT=@@CHARACTER_SET_CLIENT */;\r\n    /*!40101 SET @OLD_CHARACTER_SET_RESULTS=@@CHARACTER_SET_RESULTS */;\r\n    /*!40101 SET @OLD_COLLATION_CONNECTION=@@COLLATION_CONNECTION */;\r\n    /*!40101 SET NAMES utf8mb4 */;\r\n    \r\n    --\r\n    -- Database: `jdbc_tutorial`\r\n    --\r\n    CREATE DATABASE IF NOT EXISTS `jdbc_tutorial` DEFAULT CHARACTER SET latin1 COLLATE latin1_swedish_ci;\r\n    USE `jdbc_tutorial`;\r\n    \r\n    DELIMITER $$\r\n    --\r\n    -- Functions\r\n    --\r\n    DROP FUNCTION IF EXISTS `getAge`$$\r\n    CREATE DEFINER=`root`@`localhost` FUNCTION `getAge` (`in_dob` DATE) RETURNS INT(11) NO SQL\r\n    BEGIN\r\n    DECLARE l_age INT;\r\n       IF DATE_FORMAT(NOW(),&#39;00-%m-%d&#39;) &gt;= DATE_FORMAT(in_dob,&#39;00-%m-%d&#39;) THEN\r\n          -- This person has had a birthday this year\r\n          SET l_age=DATE_FORMAT(NOW(),&#39;%Y&#39;)-DATE_FORMAT(in_dob,&#39;%Y&#39;);\r\n       ELSE\r\n          -- Yet to have a birthday this year\r\n          SET l_age=DATE_FORMAT(NOW(),&#39;%Y&#39;)-DATE_FORMAT(in_dob,&#39;%Y&#39;)-1;\r\n       END IF;\r\n          RETURN(l_age);\r\n    END$$\r\n    \r\n    DELIMITER ;\r\n    \r\n    -- --------------------------------------------------------\r\n    \r\n    --\r\n    -- Table structure for table `beatles`\r\n    --\r\n    \r\n    DROP TABLE IF EXISTS `beatles`;\r\n    CREATE TABLE IF NOT EXISTS `beatles` (\r\n      `id` int(11) NOT NULL,\r\n      `first_name` varchar(255) DEFAULT NULL,\r\n      `last_name` varchar(255) DEFAULT NULL,\r\n      `date_of_birth` date DEFAULT NULL,\r\n      PRIMARY KEY (`id`)\r\n    ) ENGINE=InnoDB DEFAULT CHARSET=latin1;\r\n    \r\n    --\r\n    -- Truncate table before insert `beatles`\r\n    --\r\n    \r\n    TRUNCATE TABLE `beatles`;\r\n    --\r\n    -- Dumping data for table `beatles`\r\n    --\r\n    \r\n    INSERT INTO `beatles` (`id`, `first_name`, `last_name`, `date_of_birth`) VALUES(100, &#39;John&#39;, &#39;Lennon&#39;, &#39;1940-10-09&#39;);\r\n    INSERT INTO `beatles` (`id`, `first_name`, `last_name`, `date_of_birth`) VALUES(101, &#39;Paul&#39;, &#39;McCartney&#39;, &#39;1942-06-18&#39;);\r\n    INSERT INTO `beatles` (`id`, `first_name`, `last_name`, `date_of_birth`) VALUES(102, &#39;George&#39;, &#39;Harrison&#39;, &#39;1943-02-25&#39;);\r\n    INSERT INTO `beatles` (`id`, `first_name`, `last_name`, `date_of_birth`) VALUES(103, &#39;Ringo&#39;, &#39;Starr&#39;, &#39;1940-07-07&#39;);\r\n    \r\n    /*!40101 SET CHARACTER_SET_CLIENT=@OLD_CHARACTER_SET_CLIENT */;\r\n    /*!40101 SET CHARACTER_SET_RESULTS=@OLD_CHARACTER_SET_RESULTS */;\r\n    /*!40101 SET COLLATION_CONNECTION=@OLD_COLLATION_CONNECTION */;\r\n\r\n## build.gradle\r\n\r\n&lt;!-- language: lang-groovy --&gt;\r\n\r\n    apply plugin: &#39;java&#39;\r\n    apply plugin: &#39;eclipse&#39;\r\n    apply plugin: &#39;application&#39;\r\n    \r\n    mainClassName = &#39;com.oracle.jdbc.QueryApp&#39;\r\n    \r\n    repositories {\r\n        maven  {\r\n            url &quot;http://repo1.maven.org/maven2&quot;\r\n        }\r\n    }\r\n    \r\n    jar {\r\n        baseName = &#39;jdbc-tutorial&#39;\r\n        version =  &#39;1.0.0&#39;\r\n    }\r\n    \r\n    sourceCompatibility = 1.7\r\n    targetCompatibility = 1.7\r\n    \r\n    dependencies {\r\n    \tcompile &#39;mysql:mysql-connector-java:5.1.16&#39;\r\n        compile &#39;com.google.guava:guava:18.0&#39;\r\n        compile &#39;com.google.code.gson:gson:1.7.2&#39;\r\n    }\r\n    \r\n    task wrapper(type: Wrapper) {\r\n        gradleVersion = &#39;2.9&#39;\r\n    }\r\n\r\n---\r\n\r\n# Results\r\n\r\n### Basic SELECT\r\n\r\n&lt;!-- language: lang-javascript --&gt;\r\n\r\n    [\r\n        {\r\n            &quot;firstName&quot;: &quot;John&quot;,\r\n            &quot;lastName&quot;: &quot;Lennon&quot;,\r\n            &quot;dateOfBirth&quot;: &quot;1940-10-09&quot;,\r\n            &quot;id&quot;: 100\r\n        },\r\n        {\r\n            &quot;firstName&quot;: &quot;Paul&quot;,\r\n            &quot;lastName&quot;: &quot;McCartney&quot;,\r\n            &quot;dateOfBirth&quot;: &quot;1942-06-18&quot;,\r\n            &quot;id&quot;: 101\r\n        },\r\n        {\r\n            &quot;firstName&quot;: &quot;George&quot;,\r\n            &quot;lastName&quot;: &quot;Harrison&quot;,\r\n            &quot;dateOfBirth&quot;: &quot;1943-02-25&quot;,\r\n            &quot;id&quot;: 102\r\n        },\r\n        {\r\n            &quot;firstName&quot;: &quot;Ringo&quot;,\r\n            &quot;lastName&quot;: &quot;Starr&quot;,\r\n            &quot;dateOfBirth&quot;: &quot;1940-07-07&quot;,\r\n            &quot;id&quot;: 103\r\n        }\r\n    ]\r\n    \r\n### Intermediate SELECT\r\n\r\n&lt;!-- language: lang-javascript --&gt;\r\n\r\n    [\r\n        {\r\n            &quot;firstName&quot;: &quot;John&quot;,\r\n            &quot;lastName&quot;: &quot;Lennon&quot;,\r\n            &quot;age&quot;: 75\r\n        },\r\n        {\r\n            &quot;firstName&quot;: &quot;Paul&quot;,\r\n            &quot;lastName&quot;: &quot;McCartney&quot;,\r\n            &quot;age&quot;: 73\r\n        },\r\n        {\r\n            &quot;firstName&quot;: &quot;George&quot;,\r\n            &quot;lastName&quot;: &quot;Harrison&quot;,\r\n            &quot;age&quot;: 72\r\n        },\r\n        {\r\n            &quot;firstName&quot;: &quot;Ringo&quot;,\r\n            &quot;lastName&quot;: &quot;Starr&quot;,\r\n            &quot;age&quot;: 75\r\n        }\r\n    ]","title":"Most efficient conversion of ResultSet to JSON?","body":"<p>This answer may not be the most efficient, but it sure is dynamic. Pairing native JDBC with Google's Gson library, I easily can convert from an SQL result to a JSON stream.</p>\n\n<p>I have included the converter, example DB properties file, SQL table generation, and a Gradle build file (with dependencies used).</p>\n\n<h2>QueryApp.java</h2>\n\n<pre class=\"lang-java prettyprint-override\"><code>import java.io.PrintWriter;\n\nimport com.oracle.jdbc.ResultSetConverter;\n\npublic class QueryApp {\n    public static void main(String[] args) {\n        PrintWriter writer = new PrintWriter(System.out);\n        String dbProps = \"/database.properties\";\n        String indent = \"    \";\n\n        writer.println(\"Basic SELECT:\");\n        ResultSetConverter.queryToJson(writer, dbProps, \"SELECT * FROM Beatles\", indent, false);\n\n        writer.println(\"\\n\\nIntermediate SELECT:\");\n        ResultSetConverter.queryToJson(writer, dbProps, \"SELECT first_name, last_name, getAge(date_of_birth) as age FROM Beatles\", indent, true);\n    }\n}\n</code></pre>\n\n<h2>ResultSetConverter.java</h2>\n\n<pre class=\"lang-java prettyprint-override\"><code>package com.oracle.jdbc;\n\nimport java.io.*;\nimport java.lang.reflect.Type;\nimport java.sql.*;\nimport java.util.*;\n\nimport com.google.common.reflect.TypeToken;\nimport com.google.gson.GsonBuilder;\nimport com.google.gson.stream.JsonWriter;\n\npublic class ResultSetConverter {\n    public static final Type RESULT_TYPE = new TypeToken&lt;List&lt;Map&lt;String, Object&gt;&gt;&gt;() {\n        private static final long serialVersionUID = -3467016635635320150L;\n    }.getType();\n\n    public static void queryToJson(Writer writer, String connectionProperties, String query, String indent, boolean closeWriter) {\n        Connection conn = null;\n        Statement stmt = null;\n        GsonBuilder gson = new GsonBuilder();\n        JsonWriter jsonWriter = new JsonWriter(writer);\n\n        if (indent != null) jsonWriter.setIndent(indent);\n\n        try {\n            Properties props = readConnectionInfo(connectionProperties);\n            Class.forName(props.getProperty(\"driver\"));\n\n            conn = openConnection(props);\n            stmt = conn.createStatement();\n\n            gson.create().toJson(QueryHelper.select(stmt, query), RESULT_TYPE, jsonWriter);\n\n            if (closeWriter) jsonWriter.close();\n\n            stmt.close();\n            conn.close();\n        } catch (SQLException se) {\n            se.printStackTrace();\n        } catch (Exception e) {\n            e.printStackTrace();\n            try {\n                if (stmt != null) stmt.close();\n            } catch (SQLException se2) {\n            }\n            try {\n                if (conn != null) conn.close();\n            } catch (SQLException se) {\n                se.printStackTrace();\n            }\n            try {\n                if (closeWriter &amp;&amp; jsonWriter != null) jsonWriter.close();\n            } catch (IOException ioe) {\n                ioe.printStackTrace();\n            }\n        }\n    }\n\n    private static Properties readConnectionInfo(String resource) throws IOException {\n        Properties properties = new Properties();\n        InputStream in = ResultSetConverter.class.getResourceAsStream(resource);\n        properties.load(in);\n        in.close();\n\n        return properties;\n    }\n\n    private static Connection openConnection(Properties connectionProperties) throws IOException, SQLException {\n        String database = connectionProperties.getProperty(\"database\");\n        String username = connectionProperties.getProperty(\"username\");\n        String password = connectionProperties.getProperty(\"password\");\n\n        return DriverManager.getConnection(database, username, password);\n    }\n}\n</code></pre>\n\n<h2>QueryHelper.java</h2>\n\n<pre class=\"lang-java prettyprint-override\"><code>package com.oracle.jdbc;\n\nimport java.sql.*;\nimport java.text.*;\nimport java.util.*;\n\nimport com.google.common.base.CaseFormat;\n\npublic class QueryHelper {\n    static DateFormat DATE_FORMAT = new SimpleDateFormat(\"YYYY-MM-dd\");\n\n    public static List&lt;Map&lt;String, Object&gt;&gt; select(Statement stmt, String query) throws SQLException {\n        ResultSet resultSet = stmt.executeQuery(query);\n        List&lt;Map&lt;String, Object&gt;&gt; records = mapRecords(resultSet);\n\n        resultSet.close();\n\n        return records;\n    }\n\n    public static List&lt;Map&lt;String, Object&gt;&gt; mapRecords(ResultSet resultSet) throws SQLException {\n        List&lt;Map&lt;String, Object&gt;&gt; records = new ArrayList&lt;Map&lt;String, Object&gt;&gt;();\n        ResultSetMetaData metaData = resultSet.getMetaData();\n\n        while (resultSet.next()) {\n            records.add(mapRecord(resultSet, metaData));\n        }\n\n        return records;\n    }\n\n    public static Map&lt;String, Object&gt; mapRecord(ResultSet resultSet, ResultSetMetaData metaData) throws SQLException {\n        Map&lt;String, Object&gt; record = new HashMap&lt;String, Object&gt;();\n\n        for (int c = 1; c &lt;= metaData.getColumnCount(); c++) {\n            String columnType = metaData.getColumnTypeName(c);\n            String columnName = formatPropertyName(metaData.getColumnName(c));\n            Object value = resultSet.getObject(c);\n\n            if (columnType.equals(\"DATE\")) {\n                value = DATE_FORMAT.format(value);\n            }\n\n            record.put(columnName, value);\n        }\n\n        return record;\n    }\n\n    private static String formatPropertyName(String property) {\n        return CaseFormat.LOWER_UNDERSCORE.to(CaseFormat.LOWER_CAMEL, property);\n    }\n}\n</code></pre>\n\n<h2>database.properties</h2>\n\n<pre class=\"lang-sh prettyprint-override\"><code>driver=com.mysql.jdbc.Driver\ndatabase=jdbc:mysql://localhost/JDBC_Tutorial\nusername=root\npassword=\n</code></pre>\n\n<h2>JDBC_Tutorial.sql</h2>\n\n<pre class=\"lang-sql prettyprint-override\"><code>-- phpMyAdmin SQL Dump\n-- version 4.5.1\n-- http://www.phpmyadmin.net\n--\n-- Host: 127.0.0.1\n-- Generation Time: Jan 12, 2016 at 07:40 PM\n-- Server version: 10.1.8-MariaDB\n-- PHP Version: 5.6.14\n\nSET SQL_MODE = \"NO_AUTO_VALUE_ON_ZERO\";\nSET time_zone = \"+00:00\";\n\n\n/*!40101 SET @OLD_CHARACTER_SET_CLIENT=@@CHARACTER_SET_CLIENT */;\n/*!40101 SET @OLD_CHARACTER_SET_RESULTS=@@CHARACTER_SET_RESULTS */;\n/*!40101 SET @OLD_COLLATION_CONNECTION=@@COLLATION_CONNECTION */;\n/*!40101 SET NAMES utf8mb4 */;\n\n--\n-- Database: `jdbc_tutorial`\n--\nCREATE DATABASE IF NOT EXISTS `jdbc_tutorial` DEFAULT CHARACTER SET latin1 COLLATE latin1_swedish_ci;\nUSE `jdbc_tutorial`;\n\nDELIMITER $$\n--\n-- Functions\n--\nDROP FUNCTION IF EXISTS `getAge`$$\nCREATE DEFINER=`root`@`localhost` FUNCTION `getAge` (`in_dob` DATE) RETURNS INT(11) NO SQL\nBEGIN\nDECLARE l_age INT;\n   IF DATE_FORMAT(NOW(),'00-%m-%d') &gt;= DATE_FORMAT(in_dob,'00-%m-%d') THEN\n      -- This person has had a birthday this year\n      SET l_age=DATE_FORMAT(NOW(),'%Y')-DATE_FORMAT(in_dob,'%Y');\n   ELSE\n      -- Yet to have a birthday this year\n      SET l_age=DATE_FORMAT(NOW(),'%Y')-DATE_FORMAT(in_dob,'%Y')-1;\n   END IF;\n      RETURN(l_age);\nEND$$\n\nDELIMITER ;\n\n-- --------------------------------------------------------\n\n--\n-- Table structure for table `beatles`\n--\n\nDROP TABLE IF EXISTS `beatles`;\nCREATE TABLE IF NOT EXISTS `beatles` (\n  `id` int(11) NOT NULL,\n  `first_name` varchar(255) DEFAULT NULL,\n  `last_name` varchar(255) DEFAULT NULL,\n  `date_of_birth` date DEFAULT NULL,\n  PRIMARY KEY (`id`)\n) ENGINE=InnoDB DEFAULT CHARSET=latin1;\n\n--\n-- Truncate table before insert `beatles`\n--\n\nTRUNCATE TABLE `beatles`;\n--\n-- Dumping data for table `beatles`\n--\n\nINSERT INTO `beatles` (`id`, `first_name`, `last_name`, `date_of_birth`) VALUES(100, 'John', 'Lennon', '1940-10-09');\nINSERT INTO `beatles` (`id`, `first_name`, `last_name`, `date_of_birth`) VALUES(101, 'Paul', 'McCartney', '1942-06-18');\nINSERT INTO `beatles` (`id`, `first_name`, `last_name`, `date_of_birth`) VALUES(102, 'George', 'Harrison', '1943-02-25');\nINSERT INTO `beatles` (`id`, `first_name`, `last_name`, `date_of_birth`) VALUES(103, 'Ringo', 'Starr', '1940-07-07');\n\n/*!40101 SET CHARACTER_SET_CLIENT=@OLD_CHARACTER_SET_CLIENT */;\n/*!40101 SET CHARACTER_SET_RESULTS=@OLD_CHARACTER_SET_RESULTS */;\n/*!40101 SET COLLATION_CONNECTION=@OLD_COLLATION_CONNECTION */;\n</code></pre>\n\n<h2>build.gradle</h2>\n\n<pre class=\"lang-groovy prettyprint-override\"><code>apply plugin: 'java'\napply plugin: 'eclipse'\napply plugin: 'application'\n\nmainClassName = 'com.oracle.jdbc.QueryApp'\n\nrepositories {\n    maven  {\n        url \"http://repo1.maven.org/maven2\"\n    }\n}\n\njar {\n    baseName = 'jdbc-tutorial'\n    version =  '1.0.0'\n}\n\nsourceCompatibility = 1.7\ntargetCompatibility = 1.7\n\ndependencies {\n    compile 'mysql:mysql-connector-java:5.1.16'\n    compile 'com.google.guava:guava:18.0'\n    compile 'com.google.code.gson:gson:1.7.2'\n}\n\ntask wrapper(type: Wrapper) {\n    gradleVersion = '2.9'\n}\n</code></pre>\n\n<hr>\n\n<h1>Results</h1>\n\n<h3>Basic SELECT</h3>\n\n<pre class=\"lang-javascript prettyprint-override\"><code>[\n    {\n        \"firstName\": \"John\",\n        \"lastName\": \"Lennon\",\n        \"dateOfBirth\": \"1940-10-09\",\n        \"id\": 100\n    },\n    {\n        \"firstName\": \"Paul\",\n        \"lastName\": \"McCartney\",\n        \"dateOfBirth\": \"1942-06-18\",\n        \"id\": 101\n    },\n    {\n        \"firstName\": \"George\",\n        \"lastName\": \"Harrison\",\n        \"dateOfBirth\": \"1943-02-25\",\n        \"id\": 102\n    },\n    {\n        \"firstName\": \"Ringo\",\n        \"lastName\": \"Starr\",\n        \"dateOfBirth\": \"1940-07-07\",\n        \"id\": 103\n    }\n]\n</code></pre>\n\n<h3>Intermediate SELECT</h3>\n\n<pre class=\"lang-javascript prettyprint-override\"><code>[\n    {\n        \"firstName\": \"John\",\n        \"lastName\": \"Lennon\",\n        \"age\": 75\n    },\n    {\n        \"firstName\": \"Paul\",\n        \"lastName\": \"McCartney\",\n        \"age\": 73\n    },\n    {\n        \"firstName\": \"George\",\n        \"lastName\": \"Harrison\",\n        \"age\": 72\n    },\n    {\n        \"firstName\": \"Ringo\",\n        \"lastName\": \"Starr\",\n        \"age\": 75\n    }\n]\n</code></pre>\n"},{"comments":[{"owner":{"account_id":185123,"reputation":8396,"user_id":421642,"accept_rate":77,"display_name":"OhadR"},"score":4,"creation_date":1485476490,"post_id":41453021,"comment_id":70952933,"body_markdown":"nice, but there is a bug with DATETIME and TIMESTAMP (it does not add Apostrophes","body":"nice, but there is a bug with DATETIME and TIMESTAMP (it does not add Apostrophes"},{"owner":{"account_id":6776330,"reputation":1548,"user_id":5217986,"accept_rate":29,"display_name":"Anoop LL"},"score":0,"creation_date":1498468632,"post_id":41453021,"comment_id":76493574,"body_markdown":"nice and simple","body":"nice and simple"}],"tags":[],"owner":{"account_id":3569748,"reputation":2756,"user_id":2980375,"display_name":"Elhanan Mishraky"},"comment_count":2,"down_vote_count":0,"up_vote_count":37,"is_accepted":false,"score":37,"last_activity_date":1485473619,"creation_date":1483480592,"answer_id":41453021,"question_id":6514876,"body_markdown":"A simpler solution (based on code in question):\r\n\r\n    JSONArray json = new JSONArray();\r\n    ResultSetMetaData rsmd = rs.getMetaData();\r\n    while(rs.next()) {\r\n      int numColumns = rsmd.getColumnCount();\r\n      JSONObject obj = new JSONObject();\r\n      for (int i=1; i&lt;=numColumns; i++) {\r\n        String column_name = rsmd.getColumnName(i);\r\n        obj.put(column_name, rs.getObject(column_name));\r\n      }\r\n      json.put(obj);\r\n    }\r\n    return json;\r\n","title":"Most efficient conversion of ResultSet to JSON?","body":"<p>A simpler solution (based on code in question):</p>\n\n<pre><code>JSONArray json = new JSONArray();\nResultSetMetaData rsmd = rs.getMetaData();\nwhile(rs.next()) {\n  int numColumns = rsmd.getColumnCount();\n  JSONObject obj = new JSONObject();\n  for (int i=1; i&lt;=numColumns; i++) {\n    String column_name = rsmd.getColumnName(i);\n    obj.put(column_name, rs.getObject(column_name));\n  }\n  json.put(obj);\n}\nreturn json;\n</code></pre>\n"},{"comments":[{"owner":{"account_id":1418585,"reputation":20727,"user_id":1343690,"accept_rate":56,"display_name":"Sahil Mittal"},"score":0,"creation_date":1499754510,"post_id":45026558,"comment_id":77027803,"body_markdown":"Pl add some explanation to your answer.","body":"Pl add some explanation to your answer."}],"tags":[],"owner":{"account_id":11032195,"reputation":1,"user_id":8103265,"display_name":"Prashant Chilwant"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1499752994,"creation_date":1499752994,"answer_id":45026558,"question_id":6514876,"body_markdown":"    package com.idal.cib;\r\n    \r\n    import java.io.FileWriter;\r\n    import java.io.IOException;\r\n    import java.sql.Connection;\r\n    import java.sql.PreparedStatement;\r\n    import java.sql.ResultSet;\r\n    import java.sql.ResultSetMetaData;\r\n    import java.sql.SQLException;\r\n    import java.util.ArrayList;\r\n    \r\n    import org.json.simple.JSONArray;\r\n    import org.json.simple.JSONObject;\r\n    \r\n    public class DBJsonConverter {\r\n    \r\n    \tstatic ArrayList&lt;String&gt; data = new ArrayList&lt;String&gt;();\r\n    \tstatic Connection conn = null;\r\n    \tstatic PreparedStatement ps = null;\r\n    \tstatic ResultSet rs = null;\r\n    \tstatic String path = &quot;&quot;;\r\n    \tstatic String driver=&quot;&quot;;\r\n    \tstatic String url=&quot;&quot;;\r\n    \tstatic String username=&quot;&quot;;\r\n    \tstatic String password=&quot;&quot;;\r\n    \tstatic String query=&quot;&quot;;\r\n    \t\r\n    \t@SuppressWarnings({ &quot;unchecked&quot; })\r\n    \tpublic static void dataLoad(String path) {\r\n    \t\tJSONObject obj1 = new JSONObject();\r\n    \t\tJSONArray jsonArray = new JSONArray();\r\n    \t\tconn = DatabaseConnector.getDbConnection(driver, url, username,\r\n    \t\t\t\tpassword);\r\n    \t\ttry {\r\n    \t\t\tps = conn.prepareStatement(query);\r\n    \t\t\trs = ps.executeQuery();\r\n    \t\t\tArrayList&lt;String&gt; columnNames = new ArrayList&lt;String&gt;();\r\n    \t\t\tif (rs != null) {\r\n    \t\t\t\tResultSetMetaData columns = rs.getMetaData();\r\n    \t\t\t\tint i = 0;\r\n    \t\t\t\twhile (i &lt; columns.getColumnCount()) {\r\n    \t\t\t\t\ti++;\r\n    \t\t\t\t\tcolumnNames.add(columns.getColumnName(i));\r\n    \t\t\t\t}\r\n    \t\t\t\twhile (rs.next()) {\r\n    \t\t\t\t\tJSONObject obj = new JSONObject();\r\n    \t\t\t\t\tfor (i = 0; i &lt; columnNames.size(); i++) {\r\n    \t\t\t\t\t\tdata.add(rs.getString(columnNames.get(i)));\r\n    \t\t\t\t\t\t{\r\n    \t\t\t\t\t\t\tfor (int j = 0; j &lt; data.size(); j++) {\r\n    \t\t\t\t\t\t\t\tif (data.get(j) != null) {\r\n    \t\t\t\t\t\t\t\t\tobj.put(columnNames.get(i), data.get(j));\r\n    \t\t\t\t\t\t\t\t}else {\r\n    \t\t\t\t\t\t\t\t\tobj.put(columnNames.get(i), &quot;&quot;);\r\n    \t\t\t\t\t\t\t\t}\r\n    \t\t\t\t\t\t\t}\r\n    \t\t\t\t\t\t}\r\n    \t\t\t\t\t}\r\n    \r\n    \t\t\t\t\tjsonArray.add(obj);\r\n    \t\t\t\t\tobj1.put(&quot;header&quot;, jsonArray);\r\n    \t\t\t\t\tFileWriter file = new FileWriter(path);\r\n    \t\t\t\t\tfile.write(obj1.toJSONString());\r\n    \t\t\t\t\tfile.flush();\r\n    \t\t\t\t\tfile.close();\r\n    \t\t\t\t}\r\n    \t\t\t\tps.close();\r\n    \t\t\t} else {\r\n    \t\t\t\tJSONObject obj2 = new JSONObject();\r\n    \t\t\t\tobj2.put(null, null);\r\n    \t\t\t\tjsonArray.add(obj2);\r\n    \t\t\t\tobj1.put(&quot;header&quot;, jsonArray);\r\n    \t\t\t}\r\n    \t\t} catch (SQLException e) {\r\n    \t\t\t// TODO Auto-generated catch block\r\n    \t\t\te.printStackTrace();\r\n    \t\t} catch (IOException e) {\r\n    \t\t\t// TODO Auto-generated catch block\r\n    \t\t\te.printStackTrace();\r\n    \t\t} finally {\r\n    \t\t\tif (conn != null) {\r\n    \t\t\t\ttry {\r\n    \t\t\t\t\tconn.close();\r\n    \t\t\t\t\trs.close();\r\n    \t\t\t\t\tps.close();\r\n    \t\t\t\t} catch (SQLException e) {\r\n    \t\t\t\t\t// TODO Auto-generated catch block\r\n    \t\t\t\t\te.printStackTrace();\r\n    \t\t\t\t}\r\n    \t\t\t}\r\n    \t\t}\r\n    \t}\r\n    \r\n    \t@SuppressWarnings(&quot;static-access&quot;)\r\n    \tpublic static void main(String[] args) {\r\n    \t\t// TODO Auto-generated method stub\r\n    \t\tdriver = &quot;oracle.jdbc.driver.OracleDriver&quot;;\r\n    \t\turl = &quot;jdbc:oracle:thin:@localhost:1521:database&quot;;\r\n    \t\tusername = &quot;user&quot;;\r\n    \t\tpassword = &quot;password&quot;;\r\n    \t\tpath = &quot;path of file&quot;;\r\n    \t\tquery = &quot;select * from temp_employee&quot;;\r\n    \t\t\r\n    \t\tDatabaseConnector dc = new DatabaseConnector();\r\n    \t\tdc.getDbConnection(driver,url,username,password);\r\n    \t\tDBJsonConverter formatter = new DBJsonConverter();\r\n    \t\tformatter.dataLoad(path);\r\n    \t\r\n    \t}\r\n    \r\n    }\r\n    \r\n    \r\n    \r\n    \r\n    package com.idal.cib;\r\n    \r\n    import java.sql.Connection;\r\n    import java.sql.DriverManager;\r\n    import java.sql.SQLException;\r\n    \r\n    public class DatabaseConnector {\r\n    \r\n    \tstatic Connection conn1 = null;\r\n    \r\n    \tpublic static Connection getDbConnection(String driver, String url,\r\n    \t\t\tString username, String password) {\r\n    \t\t// TODO Auto-generated constructor stub\r\n    \t\ttry {\r\n    \r\n    \t\t\tClass.forName(driver);\r\n    \r\n    \t\t\tconn1 = DriverManager.getConnection(url, username, password);\r\n    \t\t} catch (ClassNotFoundException e) {\r\n    \t\t\t// TODO Auto-generated catch block\r\n    \t\t\te.printStackTrace();\r\n    \t\t} catch (SQLException e) {\r\n    \t\t\t// TODO Auto-generated catch block\r\n    \t\t\te.printStackTrace();\r\n    \t\t}\r\n    \t\treturn conn1;\r\n    \t}\r\n    \r\n    }","title":"Most efficient conversion of ResultSet to JSON?","body":"<pre><code>package com.idal.cib;\n\nimport java.io.FileWriter;\nimport java.io.IOException;\nimport java.sql.Connection;\nimport java.sql.PreparedStatement;\nimport java.sql.ResultSet;\nimport java.sql.ResultSetMetaData;\nimport java.sql.SQLException;\nimport java.util.ArrayList;\n\nimport org.json.simple.JSONArray;\nimport org.json.simple.JSONObject;\n\npublic class DBJsonConverter {\n\n    static ArrayList&lt;String&gt; data = new ArrayList&lt;String&gt;();\n    static Connection conn = null;\n    static PreparedStatement ps = null;\n    static ResultSet rs = null;\n    static String path = \"\";\n    static String driver=\"\";\n    static String url=\"\";\n    static String username=\"\";\n    static String password=\"\";\n    static String query=\"\";\n\n    @SuppressWarnings({ \"unchecked\" })\n    public static void dataLoad(String path) {\n        JSONObject obj1 = new JSONObject();\n        JSONArray jsonArray = new JSONArray();\n        conn = DatabaseConnector.getDbConnection(driver, url, username,\n                password);\n        try {\n            ps = conn.prepareStatement(query);\n            rs = ps.executeQuery();\n            ArrayList&lt;String&gt; columnNames = new ArrayList&lt;String&gt;();\n            if (rs != null) {\n                ResultSetMetaData columns = rs.getMetaData();\n                int i = 0;\n                while (i &lt; columns.getColumnCount()) {\n                    i++;\n                    columnNames.add(columns.getColumnName(i));\n                }\n                while (rs.next()) {\n                    JSONObject obj = new JSONObject();\n                    for (i = 0; i &lt; columnNames.size(); i++) {\n                        data.add(rs.getString(columnNames.get(i)));\n                        {\n                            for (int j = 0; j &lt; data.size(); j++) {\n                                if (data.get(j) != null) {\n                                    obj.put(columnNames.get(i), data.get(j));\n                                }else {\n                                    obj.put(columnNames.get(i), \"\");\n                                }\n                            }\n                        }\n                    }\n\n                    jsonArray.add(obj);\n                    obj1.put(\"header\", jsonArray);\n                    FileWriter file = new FileWriter(path);\n                    file.write(obj1.toJSONString());\n                    file.flush();\n                    file.close();\n                }\n                ps.close();\n            } else {\n                JSONObject obj2 = new JSONObject();\n                obj2.put(null, null);\n                jsonArray.add(obj2);\n                obj1.put(\"header\", jsonArray);\n            }\n        } catch (SQLException e) {\n            // TODO Auto-generated catch block\n            e.printStackTrace();\n        } catch (IOException e) {\n            // TODO Auto-generated catch block\n            e.printStackTrace();\n        } finally {\n            if (conn != null) {\n                try {\n                    conn.close();\n                    rs.close();\n                    ps.close();\n                } catch (SQLException e) {\n                    // TODO Auto-generated catch block\n                    e.printStackTrace();\n                }\n            }\n        }\n    }\n\n    @SuppressWarnings(\"static-access\")\n    public static void main(String[] args) {\n        // TODO Auto-generated method stub\n        driver = \"oracle.jdbc.driver.OracleDriver\";\n        url = \"jdbc:oracle:thin:@localhost:1521:database\";\n        username = \"user\";\n        password = \"password\";\n        path = \"path of file\";\n        query = \"select * from temp_employee\";\n\n        DatabaseConnector dc = new DatabaseConnector();\n        dc.getDbConnection(driver,url,username,password);\n        DBJsonConverter formatter = new DBJsonConverter();\n        formatter.dataLoad(path);\n\n    }\n\n}\n\n\n\n\npackage com.idal.cib;\n\nimport java.sql.Connection;\nimport java.sql.DriverManager;\nimport java.sql.SQLException;\n\npublic class DatabaseConnector {\n\n    static Connection conn1 = null;\n\n    public static Connection getDbConnection(String driver, String url,\n            String username, String password) {\n        // TODO Auto-generated constructor stub\n        try {\n\n            Class.forName(driver);\n\n            conn1 = DriverManager.getConnection(url, username, password);\n        } catch (ClassNotFoundException e) {\n            // TODO Auto-generated catch block\n            e.printStackTrace();\n        } catch (SQLException e) {\n            // TODO Auto-generated catch block\n            e.printStackTrace();\n        }\n        return conn1;\n    }\n\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":16472382,"reputation":97,"user_id":11901122,"display_name":"hitesh bariya"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1575693024,"creation_date":1575693024,"answer_id":59223001,"question_id":6514876,"body_markdown":"\tpublic static JSONArray GetJSONDataFromResultSet(ResultSet rs) throws SQLException {\r\n\t\tResultSetMetaData metaData = rs.getMetaData();\r\n\t\tint count = metaData.getColumnCount();\r\n\t\tString[] columnName = new String[count];\r\n\t\tJSONArray jsonArray = new JSONArray();\r\n\t\twhile(rs.next()) {\r\n\t\t\tJSONObject jsonObject = new JSONObject();\r\n\t\t\tfor (int i = 1; i &lt;= count; i++){\r\n\t\t\t\t   columnName[i-1] = metaData.getColumnLabel(i);\r\n\t\t\t\t   jsonObject.put(columnName[i-1], rs.getObject(i));\r\n\t\t\t}\r\n\t\t\tjsonArray.put(jsonObject);\r\n\t\t}\r\n\t\treturn jsonArray;\r\n\t}","title":"Most efficient conversion of ResultSet to JSON?","body":"<pre><code>public static JSONArray GetJSONDataFromResultSet(ResultSet rs) throws SQLException {\n    ResultSetMetaData metaData = rs.getMetaData();\n    int count = metaData.getColumnCount();\n    String[] columnName = new String[count];\n    JSONArray jsonArray = new JSONArray();\n    while(rs.next()) {\n        JSONObject jsonObject = new JSONObject();\n        for (int i = 1; i &lt;= count; i++){\n               columnName[i-1] = metaData.getColumnLabel(i);\n               jsonObject.put(columnName[i-1], rs.getObject(i));\n        }\n        jsonArray.put(jsonObject);\n    }\n    return jsonArray;\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1557650,"reputation":162,"user_id":1448255,"accept_rate":36,"display_name":"seekme_94"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1576674827,"creation_date":1576674827,"answer_id":59392862,"question_id":6514876,"body_markdown":"For all who&#39;ve opted for the if-else mesh solution, please use:\r\n\r\n    String columnName = metadata.getColumnName(\r\n    String displayName = metadata.getColumnLabel(i);\r\n    switch (metadata.getColumnType(i)) {\r\n    case Types.ARRAY:\r\n        obj.put(displayName, resultSet.getArray(columnName));\r\n        break;\r\n    ...\r\n\r\nBecause in case of aliases in your query, the column name and column label are two different things. For example if you execute:\r\n\r\n    select col1, col2 as my_alias from table\r\n\r\nYou will get\r\n\r\n    [\r\n        { &quot;col1&quot;: 1, &quot;col2&quot;: 2 }, \r\n        { &quot;col1&quot;: 1, &quot;col2&quot;: 2 }\r\n    ]\r\nRather than:\r\n\r\n    [\r\n        { &quot;col1&quot;: 1, &quot;my_alias&quot;: 2 }, \r\n        { &quot;col1&quot;: 1, &quot;my_alias&quot;: 2 }\r\n    ]\r\n\r\n","title":"Most efficient conversion of ResultSet to JSON?","body":"<p>For all who've opted for the if-else mesh solution, please use:</p>\n\n<pre><code>String columnName = metadata.getColumnName(\nString displayName = metadata.getColumnLabel(i);\nswitch (metadata.getColumnType(i)) {\ncase Types.ARRAY:\n    obj.put(displayName, resultSet.getArray(columnName));\n    break;\n...\n</code></pre>\n\n<p>Because in case of aliases in your query, the column name and column label are two different things. For example if you execute:</p>\n\n<pre><code>select col1, col2 as my_alias from table\n</code></pre>\n\n<p>You will get</p>\n\n<pre><code>[\n    { \"col1\": 1, \"col2\": 2 }, \n    { \"col1\": 1, \"col2\": 2 }\n]\n</code></pre>\n\n<p>Rather than:</p>\n\n<pre><code>[\n    { \"col1\": 1, \"my_alias\": 2 }, \n    { \"col1\": 1, \"my_alias\": 2 }\n]\n</code></pre>\n"},{"tags":[],"owner":{"account_id":7862091,"reputation":279,"user_id":5942145,"display_name":"anuj saxena"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695186180,"creation_date":1695186180,"answer_id":77139407,"question_id":6514876,"body_markdown":"The following code should work without any explicit type check. Utilize Java types and ObjectMapper to infer the types and create JSON values internally.\r\n\r\n\r\n    import com.fasterxml.jackson.databind.JsonNode;\r\n    import com.fasterxml.jackson.databind.ObjectMapper;\r\n    import com.fasterxml.jackson.databind.node.ArrayNode;\r\n    import com.fasterxml.jackson.databind.node.JsonNodeFactory;\r\n    import com.fasterxml.jackson.databind.node.ObjectNode;\r\n    import java.sql.ResultSet;\r\n    import java.sql.ResultSetMetaData;\r\n    import java.sql.SQLException;\r\n    import java.util.stream.IntStream;\r\n\r\n    public JsonNode getData(ResultSet rs) throws SQLException {\r\n            ResultSetMetaData rsmd = rs.getMetaData();\r\n            ObjectMapper mapper = new ObjectMapper();\r\n            ArrayNode jsonArr = JsonNodeFactory.instance.arrayNode();\r\n            while(rs.next()) {\r\n                int columnCount = rsmd.getColumnCount();\r\n                ObjectNode rowNode = JsonNodeFactory.instance.objectNode();\r\n                IntStream.range(1, columnCount + 1).forEach(index -&gt; {\r\n                    try {\r\n                        String name = rsmd.getColumnName(index);\r\n                        String type = rsmd.getColumnTypeName(index);\r\n                        Class&lt;?&gt; javaType = Class.forName(type);\r\n                        JsonNode valueNode = mapper.valueToTree(rs.getObject(index, javaType));\r\n                        rowNode.set(name, valueNode);\r\n                    } catch (SQLException | ClassNotFoundException e) {\r\n                        throw new RuntimeException(e);\r\n                    }\r\n                });\r\n                jsonArr.add(rowNode);\r\n            }\r\n            return jsonArr;\r\n        }\r\n","title":"Most efficient conversion of ResultSet to JSON?","body":"<p>The following code should work without any explicit type check. Utilize Java types and ObjectMapper to infer the types and create JSON values internally.</p>\n<pre><code>import com.fasterxml.jackson.databind.JsonNode;\nimport com.fasterxml.jackson.databind.ObjectMapper;\nimport com.fasterxml.jackson.databind.node.ArrayNode;\nimport com.fasterxml.jackson.databind.node.JsonNodeFactory;\nimport com.fasterxml.jackson.databind.node.ObjectNode;\nimport java.sql.ResultSet;\nimport java.sql.ResultSetMetaData;\nimport java.sql.SQLException;\nimport java.util.stream.IntStream;\n\npublic JsonNode getData(ResultSet rs) throws SQLException {\n        ResultSetMetaData rsmd = rs.getMetaData();\n        ObjectMapper mapper = new ObjectMapper();\n        ArrayNode jsonArr = JsonNodeFactory.instance.arrayNode();\n        while(rs.next()) {\n            int columnCount = rsmd.getColumnCount();\n            ObjectNode rowNode = JsonNodeFactory.instance.objectNode();\n            IntStream.range(1, columnCount + 1).forEach(index -&gt; {\n                try {\n                    String name = rsmd.getColumnName(index);\n                    String type = rsmd.getColumnTypeName(index);\n                    Class&lt;?&gt; javaType = Class.forName(type);\n                    JsonNode valueNode = mapper.valueToTree(rs.getObject(index, javaType));\n                    rowNode.set(name, valueNode);\n                } catch (SQLException | ClassNotFoundException e) {\n                    throw new RuntimeException(e);\n                }\n            });\n            jsonArr.add(rowNode);\n        }\n        return jsonArr;\n    }\n</code></pre>\n"}],"owner":{"account_id":207148,"reputation":11741,"user_id":456850,"accept_rate":48,"display_name":"Devin Dixon"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":206666,"favorite_count":0,"down_vote_count":0,"up_vote_count":125,"accepted_answer_id":6514960,"answer_count":15,"score":125,"last_activity_date":1695186180,"creation_date":1309311131,"question_id":6514876,"body_markdown":"The following code converts a `ResultSet` to a JSON string using [`JSONArray`][1] and [`JSONObject`][2].\r\n\r\n    import org.json.JSONArray;\r\n    import org.json.JSONObject;\r\n    import org.json.JSONException;\r\n    \r\n    import java.sql.SQLException;\r\n    import java.sql.ResultSet;\r\n    import java.sql.ResultSetMetaData;\r\n    \r\n    public class ResultSetConverter {\r\n      public static JSONArray convert( ResultSet rs )\r\n        throws SQLException, JSONException\r\n      {\r\n        JSONArray json = new JSONArray();\r\n        ResultSetMetaData rsmd = rs.getMetaData();\r\n           \r\n        while(rs.next()) {\r\n          int numColumns = rsmd.getColumnCount();\r\n          JSONObject obj = new JSONObject();\r\n    \r\n          for (int i=1; i&lt;numColumns+1; i++) {\r\n            String column_name = rsmd.getColumnName(i);\r\n            \r\n            if(rsmd.getColumnType(i)==java.sql.Types.ARRAY){\r\n             obj.put(column_name, rs.getArray(column_name));\r\n            }\r\n            else if(rsmd.getColumnType(i)==java.sql.Types.BIGINT){\r\n             obj.put(column_name, rs.getInt(column_name));\r\n            }\r\n            else if(rsmd.getColumnType(i)==java.sql.Types.BOOLEAN){\r\n             obj.put(column_name, rs.getBoolean(column_name));\r\n            }\r\n            else if(rsmd.getColumnType(i)==java.sql.Types.BLOB){\r\n             obj.put(column_name, rs.getBlob(column_name));\r\n            }\r\n            else if(rsmd.getColumnType(i)==java.sql.Types.DOUBLE){\r\n             obj.put(column_name, rs.getDouble(column_name)); \r\n            }\r\n            else if(rsmd.getColumnType(i)==java.sql.Types.FLOAT){\r\n             obj.put(column_name, rs.getFloat(column_name));\r\n            }\r\n            else if(rsmd.getColumnType(i)==java.sql.Types.INTEGER){\r\n             obj.put(column_name, rs.getInt(column_name));\r\n            }\r\n            else if(rsmd.getColumnType(i)==java.sql.Types.NVARCHAR){\r\n             obj.put(column_name, rs.getNString(column_name));\r\n            }\r\n            else if(rsmd.getColumnType(i)==java.sql.Types.VARCHAR){\r\n             obj.put(column_name, rs.getString(column_name));\r\n            }\r\n            else if(rsmd.getColumnType(i)==java.sql.Types.TINYINT){\r\n             obj.put(column_name, rs.getInt(column_name));\r\n            }\r\n            else if(rsmd.getColumnType(i)==java.sql.Types.SMALLINT){\r\n             obj.put(column_name, rs.getInt(column_name));\r\n            }\r\n            else if(rsmd.getColumnType(i)==java.sql.Types.DATE){\r\n             obj.put(column_name, rs.getDate(column_name));\r\n            }\r\n            else if(rsmd.getColumnType(i)==java.sql.Types.TIMESTAMP){\r\n            obj.put(column_name, rs.getTimestamp(column_name));   \r\n            }\r\n            else{\r\n             obj.put(column_name, rs.getObject(column_name));\r\n            }\r\n          }\r\n         \r\n          json.put(obj);\r\n        }\r\n      \r\n        return json;\r\n      }\r\n    }\r\n\r\n- Is there a faster way?\r\n- Is there a way that uses less memory?\r\n\r\n\r\n  [1]: http://www.json.org/javadoc/org/json/JSONArray.html\r\n  [2]: http://www.json.org/javadoc/org/json/JSONObject.html\r\n","title":"Most efficient conversion of ResultSet to JSON?","body":"<p>The following code converts a <code>ResultSet</code> to a JSON string using <a href=\"http://www.json.org/javadoc/org/json/JSONArray.html\"><code>JSONArray</code></a> and <a href=\"http://www.json.org/javadoc/org/json/JSONObject.html\"><code>JSONObject</code></a>.</p>\n\n<pre><code>import org.json.JSONArray;\nimport org.json.JSONObject;\nimport org.json.JSONException;\n\nimport java.sql.SQLException;\nimport java.sql.ResultSet;\nimport java.sql.ResultSetMetaData;\n\npublic class ResultSetConverter {\n  public static JSONArray convert( ResultSet rs )\n    throws SQLException, JSONException\n  {\n    JSONArray json = new JSONArray();\n    ResultSetMetaData rsmd = rs.getMetaData();\n\n    while(rs.next()) {\n      int numColumns = rsmd.getColumnCount();\n      JSONObject obj = new JSONObject();\n\n      for (int i=1; i&lt;numColumns+1; i++) {\n        String column_name = rsmd.getColumnName(i);\n\n        if(rsmd.getColumnType(i)==java.sql.Types.ARRAY){\n         obj.put(column_name, rs.getArray(column_name));\n        }\n        else if(rsmd.getColumnType(i)==java.sql.Types.BIGINT){\n         obj.put(column_name, rs.getInt(column_name));\n        }\n        else if(rsmd.getColumnType(i)==java.sql.Types.BOOLEAN){\n         obj.put(column_name, rs.getBoolean(column_name));\n        }\n        else if(rsmd.getColumnType(i)==java.sql.Types.BLOB){\n         obj.put(column_name, rs.getBlob(column_name));\n        }\n        else if(rsmd.getColumnType(i)==java.sql.Types.DOUBLE){\n         obj.put(column_name, rs.getDouble(column_name)); \n        }\n        else if(rsmd.getColumnType(i)==java.sql.Types.FLOAT){\n         obj.put(column_name, rs.getFloat(column_name));\n        }\n        else if(rsmd.getColumnType(i)==java.sql.Types.INTEGER){\n         obj.put(column_name, rs.getInt(column_name));\n        }\n        else if(rsmd.getColumnType(i)==java.sql.Types.NVARCHAR){\n         obj.put(column_name, rs.getNString(column_name));\n        }\n        else if(rsmd.getColumnType(i)==java.sql.Types.VARCHAR){\n         obj.put(column_name, rs.getString(column_name));\n        }\n        else if(rsmd.getColumnType(i)==java.sql.Types.TINYINT){\n         obj.put(column_name, rs.getInt(column_name));\n        }\n        else if(rsmd.getColumnType(i)==java.sql.Types.SMALLINT){\n         obj.put(column_name, rs.getInt(column_name));\n        }\n        else if(rsmd.getColumnType(i)==java.sql.Types.DATE){\n         obj.put(column_name, rs.getDate(column_name));\n        }\n        else if(rsmd.getColumnType(i)==java.sql.Types.TIMESTAMP){\n        obj.put(column_name, rs.getTimestamp(column_name));   \n        }\n        else{\n         obj.put(column_name, rs.getObject(column_name));\n        }\n      }\n\n      json.put(obj);\n    }\n\n    return json;\n  }\n}\n</code></pre>\n\n<ul>\n<li>Is there a faster way?</li>\n<li>Is there a way that uses less memory?</li>\n</ul>\n"},{"tags":["java","android","reactjs","capacitor","dynamic-feature-module"],"comments":[{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1695223167,"post_id":77139392,"comment_id":135996436,"body_markdown":"Please provide enough code so others can better understand or reproduce the problem.","body":"Please provide enough code so others can better understand or reproduce the problem."}],"owner":{"account_id":29487712,"reputation":9,"user_id":22597258,"display_name":"Nikhil "},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":38,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":0,"score":0,"last_activity_date":1695185900,"creation_date":1695185900,"question_id":77139392,"body_markdown":"I have three React-based apps converted to Android. I want to merge them into a single app. One of these apps will serve as the base, while the other two will be feature modules with on-demand delivery. Is there a way to achieve this?\r\n\r\nI don&#39;t have any prior knowledge of React or Capacitor. but I tried everything in my way but it ended up with disappointment ","title":"Can dynamic feature delivery be implemented in a React-based app converted to Android using Capacitor?","body":"<p>I have three React-based apps converted to Android. I want to merge them into a single app. One of these apps will serve as the base, while the other two will be feature modules with on-demand delivery. Is there a way to achieve this?</p>\n<p>I don't have any prior knowledge of React or Capacitor. but I tried everything in my way but it ended up with disappointment</p>\n"},{"tags":["java","tree","swt","eclipse-rcp"],"comments":[{"owner":{"account_id":3159259,"reputation":109678,"user_id":2670892,"display_name":"greg-449"},"score":0,"creation_date":1695195610,"post_id":77139389,"comment_id":135990038,"body_markdown":"What do you mean by padding? I already mentioned changing the row height in your previous question. To do anything beyond standard you will have to draw the tree yourself with EraseItem/MeasureItem/PaintItem - or for the easier to use TreeViewer use OwnerDrawLabelProvider or one of its many subclasses.","body":"What do you mean by padding? I already mentioned changing the row height in your previous question. To do anything beyond standard you will have to draw the tree yourself with EraseItem/MeasureItem/PaintItem - or for the easier to use TreeViewer use OwnerDrawLabelProvider or one of its many subclasses."}],"owner":{"account_id":28805956,"reputation":9,"user_id":22061831,"display_name":"Satya"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":25,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":0,"score":0,"last_activity_date":1695185840,"creation_date":1695185840,"question_id":77139389,"body_markdown":"I am able to add padding to the left of treeitems, but i don&#39;t know how to add padding to the top and bottom of the treeitems.\r\n\r\nI want to increase/decrease the padding of tree items. This padding should be top and below not right and left","title":"Java swt tree padding","body":"<p>I am able to add padding to the left of treeitems, but i don't know how to add padding to the top and bottom of the treeitems.</p>\n<p>I want to increase/decrease the padding of tree items. This padding should be top and below not right and left</p>\n"},{"tags":["java","eclipse"],"comments":[{"owner":{"account_id":1960454,"reputation":44539,"user_id":1762224,"accept_rate":61,"display_name":"Mr. Polywhirl"},"score":0,"creation_date":1695149056,"post_id":77137174,"comment_id":135984412,"body_markdown":"How is the data collected? Here is the Java code?","body":"How is the data collected? Here is the Java code?"},{"owner":{"account_id":2709823,"reputation":10716,"user_id":2338547,"display_name":"markspace"},"score":3,"creation_date":1695149058,"post_id":77137174,"comment_id":135984413,"body_markdown":"The short answer is that you use `String.split()` to break this string up into separate elements, like the numbers and the plus sign, then you test each element to do something with it.  If the element is a number, you call `parseInt()` on it.  The longer answer is probably that you should talk with your instructor, you seem to be having a hard time, and I suspect that there&#39;s important requirements that you haven&#39;t told us.","body":"The short answer is that you use <code>String.split()</code> to break this string up into separate elements, like the numbers and the plus sign, then you test each element to do something with it.  If the element is a number, you call <code>parseInt()</code> on it.  The longer answer is probably that you should talk with your instructor, you seem to be having a hard time, and I suspect that there&#39;s important requirements that you haven&#39;t told us."},{"owner":{"account_id":2709823,"reputation":10716,"user_id":2338547,"display_name":"markspace"},"score":0,"creation_date":1695149254,"post_id":77137174,"comment_id":135984444,"body_markdown":"(To be fair, when I first encountered this problem, I was a doofus and didn&#39;t talk to the instructor.  It would have been acceptable to research the problem and avoid inventing my own solution.  So yeah, talk to your instructor and make sure you have the details.)","body":"(To be fair, when I first encountered this problem, I was a doofus and didn&#39;t talk to the instructor.  It would have been acceptable to research the problem and avoid inventing my own solution.  So yeah, talk to your instructor and make sure you have the details.)"},{"owner":{"account_id":29484727,"reputation":9,"user_id":22594913,"display_name":"Ima_pan_cake "},"score":0,"creation_date":1695149304,"post_id":77137174,"comment_id":135984456,"body_markdown":"That is my bad this is my first time on here asking questions.","body":"That is my bad this is my first time on here asking questions."},{"owner":{"account_id":29484727,"reputation":9,"user_id":22594913,"display_name":"Ima_pan_cake "},"score":0,"creation_date":1695149718,"post_id":77137174,"comment_id":135984516,"body_markdown":"The project is a multi class calculator. I have 2 classes my main class excepting inputs and my calculate class where the data is calculated. I was initially taking in inputs as three different variables. But my teacher wants to be able to insert an equation all as 1 string.  Explaining why I need to parseInt(). But doing that only except all data before reaching operator (+,-,*./) I need help getting the rest of the data in the string.","body":"The project is a multi class calculator. I have 2 classes my main class excepting inputs and my calculate class where the data is calculated. I was initially taking in inputs as three different variables. But my teacher wants to be able to insert an equation all as 1 string.  Explaining why I need to parseInt(). But doing that only except all data before reaching operator (+,-,*./) I need help getting the rest of the data in the string."},{"owner":{"account_id":2709823,"reputation":10716,"user_id":2338547,"display_name":"markspace"},"score":0,"creation_date":1695149845,"post_id":77137174,"comment_id":135984533,"body_markdown":"The answer below probably provides *too much* information, be careful you don&#39;t cheat/copy.  But first: does order of operations count? (What is &quot;2 + 3 * 4?&quot;)  Do you have to deal with parenthesis?  (&quot;(2 + 3) * 4?&quot;)","body":"The answer below probably provides <i>too much</i> information, be careful you don&#39;t cheat/copy.  But first: does order of operations count? (What is &quot;2 + 3 * 4?&quot;)  Do you have to deal with parenthesis?  (&quot;(2 + 3) * 4?&quot;)"},{"owner":{"account_id":29484727,"reputation":9,"user_id":22594913,"display_name":"Ima_pan_cake "},"score":0,"creation_date":1695150224,"post_id":77137174,"comment_id":135984604,"body_markdown":"No he does not care about BEDMAS","body":"No he does not care about BEDMAS"},{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1695158982,"post_id":77137174,"comment_id":135986043,"body_markdown":"Please provide enough code so others can better understand or reproduce the problem.","body":"Please provide enough code so others can better understand or reproduce the problem."}],"answers":[{"tags":[],"owner":{"account_id":1960454,"reputation":44539,"user_id":1762224,"accept_rate":61,"display_name":"Mr. Polywhirl"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695149639,"creation_date":1695149639,"answer_id":77137256,"question_id":77137174,"body_markdown":"If you are performing arithmetic, you should probably use `float` or `double` rather than `int`.\r\n\r\nHere is a basic example of parsing a simple arithmetic expression.\r\n\r\n```java\r\npublic class Calculate {\r\n    public static void main(String[] args) {\r\n        String expression = &quot;5 + 5&quot;;\r\n        System.out.printf(&quot;%s = %.2f%n&quot;, expression, calculate(expression));\r\n\r\n        try {\r\n            calculate(&quot;33 + 5 * 2&quot;);\r\n        } catch (IllegalArgumentException e) {\r\n            System.out.println(e.getMessage());\r\n        }\r\n\r\n        try {\r\n            calculate(&quot;33 % 2&quot;);\r\n        } catch (IllegalArgumentException e) {\r\n            System.out.println(e.getMessage());\r\n        }\r\n    }\r\n\r\n    public static double calculate(String input) {\r\n        String[] tokens = input.trim().split(&quot;\\\\s+&quot;);\r\n        if (tokens.length != 3) {\r\n            throw new IllegalArgumentException(&quot;Input must be in the form of: &lt;operand_1&gt; &lt;operator&gt; &lt;operand_2&gt;&quot;);\r\n        }\r\n        double operand1 = Double.parseDouble(tokens[0]);\r\n        double operand2 = Double.parseDouble(tokens[2]);\r\n        String operator = tokens[1];\r\n        switch (operator) {\r\n            case &quot;+&quot;:\r\n                return operand1 + operand2;\r\n            case &quot;-&quot;:\r\n                return operand1 - operand2;\r\n            case &quot;*&quot;:\r\n            case &quot;x&quot;:\r\n                return operand1 * operand2;\r\n            case &quot;/&quot;:\r\n            case &quot;&#247;&quot;:\r\n                return operand1 / operand2;\r\n            default:\r\n                throw new IllegalArgumentException(&quot;Operator must be one of: +, -, *, /&quot;);\r\n        }\r\n    }\r\n}\r\n```\r\n\r\nOutput:\r\n\r\n```\r\n5 + 5 = 10.00\r\nInput must be in the form of: &lt;operand_1&gt; &lt;operator&gt; &lt;operand_2&gt;\r\nOperator must be one of: +, -, *, /\r\n```","title":"How to correctly use parseInt in Java?","body":"<p>If you are performing arithmetic, you should probably use <code>float</code> or <code>double</code> rather than <code>int</code>.</p>\n<p>Here is a basic example of parsing a simple arithmetic expression.</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class Calculate {\n    public static void main(String[] args) {\n        String expression = &quot;5 + 5&quot;;\n        System.out.printf(&quot;%s = %.2f%n&quot;, expression, calculate(expression));\n\n        try {\n            calculate(&quot;33 + 5 * 2&quot;);\n        } catch (IllegalArgumentException e) {\n            System.out.println(e.getMessage());\n        }\n\n        try {\n            calculate(&quot;33 % 2&quot;);\n        } catch (IllegalArgumentException e) {\n            System.out.println(e.getMessage());\n        }\n    }\n\n    public static double calculate(String input) {\n        String[] tokens = input.trim().split(&quot;\\\\s+&quot;);\n        if (tokens.length != 3) {\n            throw new IllegalArgumentException(&quot;Input must be in the form of: &lt;operand_1&gt; &lt;operator&gt; &lt;operand_2&gt;&quot;);\n        }\n        double operand1 = Double.parseDouble(tokens[0]);\n        double operand2 = Double.parseDouble(tokens[2]);\n        String operator = tokens[1];\n        switch (operator) {\n            case &quot;+&quot;:\n                return operand1 + operand2;\n            case &quot;-&quot;:\n                return operand1 - operand2;\n            case &quot;*&quot;:\n            case &quot;x&quot;:\n                return operand1 * operand2;\n            case &quot;/&quot;:\n            case &quot;÷&quot;:\n                return operand1 / operand2;\n            default:\n                throw new IllegalArgumentException(&quot;Operator must be one of: +, -, *, /&quot;);\n        }\n    }\n}\n</code></pre>\n<p>Output:</p>\n<pre><code>5 + 5 = 10.00\nInput must be in the form of: &lt;operand_1&gt; &lt;operator&gt; &lt;operand_2&gt;\nOperator must be one of: +, -, *, /\n</code></pre>\n"},{"tags":[],"owner":{"account_id":23740623,"reputation":1,"user_id":17758716,"display_name":"Reilas"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695185307,"creation_date":1695162491,"answer_id":77138286,"question_id":77137174,"body_markdown":"&gt; _&quot;... My question is how do I parseInt correctly? It collects all the data (ints) before it reaches the operator. How to I tell it to collect the data past the operator? ...&quot;_\r\n\r\nUse the _[Pattern](https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/util/regex/Pattern.html)_ and _[Matcher](https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/util/regex/Matcher.html)_ classes to capture the values and operators.\r\n\r\nI&#39;m using the following pattern.\\\r\nThe _look-around_ asserts the `+` or  `-` are operators and not symbols.\r\n\r\n```none\r\n(?:(?&lt;![*/+-])[+-]|[*/])|[+-]?[^ */+-]+\r\n```\r\n\r\nHere is an example.\r\n\r\n```java\r\nimport static java.math.RoundingMode.HALF_UP;\r\n```\r\n\r\n```java\r\nString exp = &quot;22/7&quot;;\r\nPattern p = Pattern.compile(&quot;(?:(?&lt;![*/+-])[+-]|[*/])|[+-]?[^ */+-]+&quot;);\r\nMatcher m = p.matcher(exp);\r\nList&lt;String&gt; a = m.results().map(MatchResult::group).toList();\r\nIterator&lt;String&gt; it = a.iterator();\r\nBigDecimal x = new BigDecimal(it.next()).setScale(32, HALF_UP);\r\nwhile (it.hasNext()) {\r\n    x = switch (it.next()) {\r\n        case &quot;*&quot; -&gt; x.multiply(new BigDecimal(it.next()));\r\n        case &quot;/&quot; -&gt; x.divide(new BigDecimal(it.next()), 32, HALF_UP);\r\n        case &quot;+&quot; -&gt; x.add(new BigDecimal(it.next()));\r\n        case &quot;-&quot; -&gt; x.subtract(new BigDecimal(it.next()));\r\n        default -&gt; x;\r\n    };\r\n}\r\n```\r\n\r\nOutput\r\n\r\n```none\r\n3.14285714285714285714285714285714\r\n```\r\n\r\nAs a recommendation, research the topic of the _[Abstract Syntax Tree](https://en.wikipedia.org/wiki/Abstract_syntax_tree)_ _data-structure_.\\\r\nEssentially it is a parsing technique used to enumerate and classify values within text.\\\r\nIt&#39;s a common structure used with _[interpreters](https://en.wikipedia.org/wiki/Interpreter_(computing))_.\r\n\r\nIt&#39;s quite powerful, you&#39;d be able to evaluate complex equations.","title":"How to correctly use parseInt in Java?","body":"<blockquote>\n<p><em>&quot;... My question is how do I parseInt correctly? It collects all the data (ints) before it reaches the operator. How to I tell it to collect the data past the operator? ...&quot;</em></p>\n</blockquote>\n<p>Use the <em><a href=\"https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/util/regex/Pattern.html\" rel=\"nofollow noreferrer\">Pattern</a></em> and <em><a href=\"https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/util/regex/Matcher.html\" rel=\"nofollow noreferrer\">Matcher</a></em> classes to capture the values and operators.</p>\n<p>I'm using the following pattern.<br />\nThe <em>look-around</em> asserts the <code>+</code> or  <code>-</code> are operators and not symbols.</p>\n<pre class=\"lang-none prettyprint-override\"><code>(?:(?&lt;![*/+-])[+-]|[*/])|[+-]?[^ */+-]+\n</code></pre>\n<p>Here is an example.</p>\n<pre class=\"lang-java prettyprint-override\"><code>import static java.math.RoundingMode.HALF_UP;\n</code></pre>\n<pre class=\"lang-java prettyprint-override\"><code>String exp = &quot;22/7&quot;;\nPattern p = Pattern.compile(&quot;(?:(?&lt;![*/+-])[+-]|[*/])|[+-]?[^ */+-]+&quot;);\nMatcher m = p.matcher(exp);\nList&lt;String&gt; a = m.results().map(MatchResult::group).toList();\nIterator&lt;String&gt; it = a.iterator();\nBigDecimal x = new BigDecimal(it.next()).setScale(32, HALF_UP);\nwhile (it.hasNext()) {\n    x = switch (it.next()) {\n        case &quot;*&quot; -&gt; x.multiply(new BigDecimal(it.next()));\n        case &quot;/&quot; -&gt; x.divide(new BigDecimal(it.next()), 32, HALF_UP);\n        case &quot;+&quot; -&gt; x.add(new BigDecimal(it.next()));\n        case &quot;-&quot; -&gt; x.subtract(new BigDecimal(it.next()));\n        default -&gt; x;\n    };\n}\n</code></pre>\n<p>Output</p>\n<pre class=\"lang-none prettyprint-override\"><code>3.14285714285714285714285714285714\n</code></pre>\n<p>As a recommendation, research the topic of the <em><a href=\"https://en.wikipedia.org/wiki/Abstract_syntax_tree\" rel=\"nofollow noreferrer\">Abstract Syntax Tree</a></em> <em>data-structure</em>.<br />\nEssentially it is a parsing technique used to enumerate and classify values within text.<br />\nIt's a common structure used with <em><a href=\"https://en.wikipedia.org/wiki/Interpreter_(computing)\" rel=\"nofollow noreferrer\">interpreters</a></em>.</p>\n<p>It's quite powerful, you'd be able to evaluate complex equations.</p>\n"},{"tags":[],"owner":{"account_id":6017640,"reputation":8919,"user_id":4725875,"display_name":"DevilsHnd - 退した"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695180283,"creation_date":1695180283,"answer_id":77139113,"question_id":77137174,"body_markdown":"Splitting the provided equation into specific array elements I think is the way to go here as well. This is not necessarily an easy thing considering the different types of mathematical equations that can be supplied. An equation might have signed or unsigned numerical values, different type of brackets (like **( )**, **{ }**, **[ ]**), Unicode characters like PI (&#120645;) or even perhaps Unicode superscript exponent characters (like: ⁰, &#185;, &#178;, &#179;, ⁴, ⁵, ⁶, ⁷, ⁸, or ⁹). The mathematical equation might even be of an algebraic type and contain characters like &quot;x&quot; or &quot;y&quot;, etc. I&#39;m sure you&#39;re not needing to deal with such equations at this point but you may want to consider it in the future.\r\n\r\nTo evaluate a mathematical equation, it will need to be broken down into specific elements and then those elements are processed and, should be processed in **[BEDMAS](https://www.cemc.uwaterloo.ca/events/mathcircles/2013-14/Fall/Junior6_Oct8.pdf)** to be accurate even though it currently isn&#39;t a requirement for your current use-case.\r\n\r\nThe supplied method below will split a mathematical string equation into specific elements as discussed above and return it as a String[] array. It looks like a lot of code but, it really isn&#39;t since it is just a quick and simple parser. It&#39;s all the commenting that make it look large which you can later delete if you like. Please read the comments in code:\r\n\r\n    /**\r\n     * This method will parse a math equation string, even with various bracket\r\n     * types or nested brackets and Unicode math operators or numerical\r\n     * characters like PI (&#120645; - Unicode: \\ud835\\udf45)) into a String[] Array.\r\n     * &lt;p&gt;\r\n     * Signed and unsigned integer or floating point values can be within the\r\n     * supplied mathematical equation. Numerical values with exponents will \r\n     * keep their respective exponent in the parsing. \r\n     * &lt;p&gt;\r\n     * As an example, then following equation string: &quot;(-3.786 + 2&#179;) * (8&#178; / &#120645;)&quot; \r\n     * will be parsed as: [(, -3.786, +, 2&#179;, ), *, 8&#178;, /, &#120645;]. \r\n     * &lt;p&gt;\r\n     * In the above example, the superscript exponent characters (&quot;⁰&quot;, &quot;&#185;&quot;, &quot;&#178;&quot;, \r\n     * &quot;&#179;&quot;, &quot;⁴&quot;, &quot;⁵&quot;, &quot;⁶&quot;, &quot;⁷&quot;, &quot;⁸&quot;, &quot;⁹&quot;) are respective Unicode characters\r\n     * &quot;\\u2070&quot;, &quot;\\u00B9&quot;, &quot;\\u00B2&quot;, &quot;\\u00B3&quot;, &quot;\\u2074&quot;, &quot;\\u2075&quot;, &quot;\\u2076&quot;, \r\n     * &quot;\\u2077&quot;, &quot;\\u2078&quot;, &quot;\\u2079&quot;. \r\n     * &lt;p&gt;\r\n     * The character &#120645; is Unicode: \\ud835\\udf45.\r\n     * &lt;p&gt;\r\n     * Whitespaces are ignored during parsing and will not be contained within\r\n     * the returned String[] Array as any kind of array element.&lt;br&gt;\r\n     *\r\n     * @param equation (String) The mathematical equation to parse into a String[] Array.&lt;br&gt;\r\n     *\r\n     * @return (String[] Array)\r\n     */\r\n    public String[] splitSimpleEquation(String equation) {\r\n        /* Remove all white-spacing from the supplied equation.\r\n           We don&#39;t need them:              */\r\n        equation = equation.replaceAll(&quot;\\\\s+&quot;, &quot;&quot;);\r\n        \r\n        /* A List Interface of String to hold all the equation elements.\r\n           This List is later converted to a String[] array and returned. \r\n           We use a List because we literally have no idea how big the \r\n           equation might be and because of this there is no real way to \r\n           know how large to initialize a String[] array. A List (or an \r\n           ArrayList) can grow dynamically and therefore, this wouldn&#39;t \r\n           be a problem:     */\r\n        List&lt;String&gt; list = new ArrayList&lt;&gt;();\r\n        \r\n        // Will temporarily hold established numerical values within the equation:\r\n        String number = &quot;&quot;; \r\n        \r\n        /* Split the supplied equation into into a String[] array of individual\r\n           characters so to establish proper parsing. The `equation.split(&quot;&quot;)` \r\n           could be used to do this but, this method WILL NOT handle two byte \r\n           Unicode caracters (like &#120645;) as required.        */\r\n        String[] chr = equation.codePoints()\r\n                .mapToObj(cp -&gt; new String(Character.toChars(cp)))\r\n                .toArray(size -&gt; new String[size]);\r\n        \r\n        /* Iterate through the `chr` array and create the needed \r\n           elements to add to the List. `c` will hold the current\r\n           string character being processed:         */\r\n        for (String c : chr) {\r\n            /* If the current string character is a numerical digit (0-9) or\r\n               a decimal point (period) OR is the current string character \r\n               a minus character or any unicode minus character and is the \r\n               `number` variable empty (precursor to signed values) OR is the \r\n               current string character a Unicode superscript exponent character \r\n               and the `number` variable is NOT empty (precursor to (value to \r\n               the Power of) then, append the character to the contents contained \r\n               within the `number` variable:     */\r\n            if (c.matches(&quot;[0-9]&quot;) || c.matches(&quot;[\\\\.]&quot;) || \r\n                    (c.matches(&quot;[─➖\\\\-−−]&quot;) &amp;&amp; number.isEmpty()) || \r\n                        (c.matches(&quot;[⁰&#185;&#178;&#179;⁴⁵⁶⁷⁸⁹]&quot;) &amp;&amp; !number.isEmpty())) {\r\n                number += c;\r\n            }\r\n            \r\n            /* Otherwise, if the current string character is a numerical digit\r\n               and the `number` variable is NOT empty then, add the value \r\n               currently held in `number` to the List, then empty `number` in\r\n               preparation for a new value then, add the current string \r\n               numerical character value to the List:            */\r\n            else if (!c.matches(&quot;\\\\d&quot;) &amp;&amp; !number.isEmpty()) {\r\n                list.add(number);   // Add current value of `number` to the List.\r\n                number = &quot;&quot;;        // Empty `number` variable in prep for new value.\r\n                list.add(c);        // Add current string numerical value to List\r\n            }\r\n            \r\n            /* Otherwise, just add the current string character to the List.\r\n               This could be a open or close bracket, a unicode PI character, \r\n               etc.         */\r\n            else {\r\n                list.add(c);\r\n            }\r\n        }\r\n        \r\n        /* Once the `chr` array has finnished iterations and there\r\n           is still a value contained within the `number` variable \r\n           then, add that value to the List:        */\r\n        if (!number.isEmpty()) {\r\n            list.add(number);\r\n        }\r\n        \r\n        // Convert the List of String to a String[] array and return it;\r\n        return list.toArray(new String[0]);\r\n    }\r\n\r\n----------\r\n\r\n**Example Use #1:**\r\n\r\n    String[] equationElements = splitSimpleEquation(&quot;5 + 5 * 2&quot;);\r\n    System.out.println(Arrays.toString(equationElements));\r\n\r\n**Output Display:**\r\n\r\n    [5, +, 5, *, 2]\r\n\r\n----------\r\n\r\n**Example Use #2:**\r\n\r\n    String[] equationElements = splitSimpleEquation(&quot;(-3.786 + 2&#179;)*(8&#178;/&#120645;)*x&quot;);\r\n    System.out.println(Arrays.toString(equationElements));\r\n\r\n**Output Display:**\r\n\r\n    [(, -3.786, +, 2&#179;, ), *, (, 8&#178;, /, &#120645;, ), *, x]","title":"How to correctly use parseInt in Java?","body":"<p>Splitting the provided equation into specific array elements I think is the way to go here as well. This is not necessarily an easy thing considering the different types of mathematical equations that can be supplied. An equation might have signed or unsigned numerical values, different type of brackets (like <strong>( )</strong>, <strong>{ }</strong>, <strong>[ ]</strong>), Unicode characters like PI (𝝅) or even perhaps Unicode superscript exponent characters (like: ⁰, ¹, ², ³, ⁴, ⁵, ⁶, ⁷, ⁸, or ⁹). The mathematical equation might even be of an algebraic type and contain characters like &quot;x&quot; or &quot;y&quot;, etc. I'm sure you're not needing to deal with such equations at this point but you may want to consider it in the future.</p>\n<p>To evaluate a mathematical equation, it will need to be broken down into specific elements and then those elements are processed and, should be processed in <strong><a href=\"https://www.cemc.uwaterloo.ca/events/mathcircles/2013-14/Fall/Junior6_Oct8.pdf\" rel=\"nofollow noreferrer\">BEDMAS</a></strong> to be accurate even though it currently isn't a requirement for your current use-case.</p>\n<p>The supplied method below will split a mathematical string equation into specific elements as discussed above and return it as a String[] array. It looks like a lot of code but, it really isn't since it is just a quick and simple parser. It's all the commenting that make it look large which you can later delete if you like. Please read the comments in code:</p>\n<pre><code>/**\n * This method will parse a math equation string, even with various bracket\n * types or nested brackets and Unicode math operators or numerical\n * characters like PI (𝝅 - Unicode: \\ud835\\udf45)) into a String[] Array.\n * &lt;p&gt;\n * Signed and unsigned integer or floating point values can be within the\n * supplied mathematical equation. Numerical values with exponents will \n * keep their respective exponent in the parsing. \n * &lt;p&gt;\n * As an example, then following equation string: &quot;(-3.786 + 2³) * (8² / 𝝅)&quot; \n * will be parsed as: [(, -3.786, +, 2³, ), *, 8², /, 𝝅]. \n * &lt;p&gt;\n * In the above example, the superscript exponent characters (&quot;⁰&quot;, &quot;¹&quot;, &quot;²&quot;, \n * &quot;³&quot;, &quot;⁴&quot;, &quot;⁵&quot;, &quot;⁶&quot;, &quot;⁷&quot;, &quot;⁸&quot;, &quot;⁹&quot;) are respective Unicode characters\n * &quot;\\u2070&quot;, &quot;\\u00B9&quot;, &quot;\\u00B2&quot;, &quot;\\u00B3&quot;, &quot;\\u2074&quot;, &quot;\\u2075&quot;, &quot;\\u2076&quot;, \n * &quot;\\u2077&quot;, &quot;\\u2078&quot;, &quot;\\u2079&quot;. \n * &lt;p&gt;\n * The character 𝝅 is Unicode: \\ud835\\udf45.\n * &lt;p&gt;\n * Whitespaces are ignored during parsing and will not be contained within\n * the returned String[] Array as any kind of array element.&lt;br&gt;\n *\n * @param equation (String) The mathematical equation to parse into a String[] Array.&lt;br&gt;\n *\n * @return (String[] Array)\n */\npublic String[] splitSimpleEquation(String equation) {\n    /* Remove all white-spacing from the supplied equation.\n       We don't need them:              */\n    equation = equation.replaceAll(&quot;\\\\s+&quot;, &quot;&quot;);\n    \n    /* A List Interface of String to hold all the equation elements.\n       This List is later converted to a String[] array and returned. \n       We use a List because we literally have no idea how big the \n       equation might be and because of this there is no real way to \n       know how large to initialize a String[] array. A List (or an \n       ArrayList) can grow dynamically and therefore, this wouldn't \n       be a problem:     */\n    List&lt;String&gt; list = new ArrayList&lt;&gt;();\n    \n    // Will temporarily hold established numerical values within the equation:\n    String number = &quot;&quot;; \n    \n    /* Split the supplied equation into into a String[] array of individual\n       characters so to establish proper parsing. The `equation.split(&quot;&quot;)` \n       could be used to do this but, this method WILL NOT handle two byte \n       Unicode caracters (like 𝝅) as required.        */\n    String[] chr = equation.codePoints()\n            .mapToObj(cp -&gt; new String(Character.toChars(cp)))\n            .toArray(size -&gt; new String[size]);\n    \n    /* Iterate through the `chr` array and create the needed \n       elements to add to the List. `c` will hold the current\n       string character being processed:         */\n    for (String c : chr) {\n        /* If the current string character is a numerical digit (0-9) or\n           a decimal point (period) OR is the current string character \n           a minus character or any unicode minus character and is the \n           `number` variable empty (precursor to signed values) OR is the \n           current string character a Unicode superscript exponent character \n           and the `number` variable is NOT empty (precursor to (value to \n           the Power of) then, append the character to the contents contained \n           within the `number` variable:     */\n        if (c.matches(&quot;[0-9]&quot;) || c.matches(&quot;[\\\\.]&quot;) || \n                (c.matches(&quot;[─➖\\\\-−−]&quot;) &amp;&amp; number.isEmpty()) || \n                    (c.matches(&quot;[⁰¹²³⁴⁵⁶⁷⁸⁹]&quot;) &amp;&amp; !number.isEmpty())) {\n            number += c;\n        }\n        \n        /* Otherwise, if the current string character is a numerical digit\n           and the `number` variable is NOT empty then, add the value \n           currently held in `number` to the List, then empty `number` in\n           preparation for a new value then, add the current string \n           numerical character value to the List:            */\n        else if (!c.matches(&quot;\\\\d&quot;) &amp;&amp; !number.isEmpty()) {\n            list.add(number);   // Add current value of `number` to the List.\n            number = &quot;&quot;;        // Empty `number` variable in prep for new value.\n            list.add(c);        // Add current string numerical value to List\n        }\n        \n        /* Otherwise, just add the current string character to the List.\n           This could be a open or close bracket, a unicode PI character, \n           etc.         */\n        else {\n            list.add(c);\n        }\n    }\n    \n    /* Once the `chr` array has finnished iterations and there\n       is still a value contained within the `number` variable \n       then, add that value to the List:        */\n    if (!number.isEmpty()) {\n        list.add(number);\n    }\n    \n    // Convert the List of String to a String[] array and return it;\n    return list.toArray(new String[0]);\n}\n</code></pre>\n<hr />\n<p><strong>Example Use #1:</strong></p>\n<pre><code>String[] equationElements = splitSimpleEquation(&quot;5 + 5 * 2&quot;);\nSystem.out.println(Arrays.toString(equationElements));\n</code></pre>\n<p><strong>Output Display:</strong></p>\n<pre><code>[5, +, 5, *, 2]\n</code></pre>\n<hr />\n<p><strong>Example Use #2:</strong></p>\n<pre><code>String[] equationElements = splitSimpleEquation(&quot;(-3.786 + 2³)*(8²/𝝅)*x&quot;);\nSystem.out.println(Arrays.toString(equationElements));\n</code></pre>\n<p><strong>Output Display:</strong></p>\n<pre><code>[(, -3.786, +, 2³, ), *, (, 8², /, 𝝅, ), *, x]\n</code></pre>\n"}],"owner":{"account_id":29484727,"reputation":9,"user_id":22594913,"display_name":"Ima_pan_cake "},"comment_count":8,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":79,"favorite_count":0,"down_vote_count":4,"up_vote_count":1,"answer_count":3,"score":-3,"last_activity_date":1695185307,"creation_date":1695148958,"question_id":77137174,"body_markdown":"I&#39;m doing a project in my comp sci class and my teacher wants a calculator that accepts an equation as a single string, e.g.\r\n```none\r\n5 + 5\r\n```\r\n(instead of going through each variable).\r\n\r\nMy question is how do I `parseInt` correctly? It collects all the data (`int`s) before it reaches the operator. How do I tell it to collect the data past the operator?\r\n\r\nI have tried running through the string itself until it finds a operator. And based on which operator is used it goes through my second class to calculate accordingly. But it can only collect everything before the operator. I&#39;ve tried putting my string into an array and running a `for` loop backwards, but that never seemed to work.\r\n","title":"How to correctly use parseInt in Java?","body":"<p>I'm doing a project in my comp sci class and my teacher wants a calculator that accepts an equation as a single string, e.g.</p>\n<pre class=\"lang-none prettyprint-override\"><code>5 + 5\n</code></pre>\n<p>(instead of going through each variable).</p>\n<p>My question is how do I <code>parseInt</code> correctly? It collects all the data (<code>int</code>s) before it reaches the operator. How do I tell it to collect the data past the operator?</p>\n<p>I have tried running through the string itself until it finds a operator. And based on which operator is used it goes through my second class to calculate accordingly. But it can only collect everything before the operator. I've tried putting my string into an array and running a <code>for</code> loop backwards, but that never seemed to work.</p>\n"},{"tags":["java","spring","graalvm","graalvm-native-image"],"answers":[{"tags":[],"owner":{"account_id":5331661,"reputation":69,"user_id":4252086,"display_name":"Sergey Batsura"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1614697613,"creation_date":1614697613,"answer_id":66441917,"question_id":66441869,"body_markdown":"When you compile binary from fat jar by native-image it gets Main-Class: org.springframework.boot.loader.JarLauncher from manifest and trying to make executable binary whith entry point JarLauncher. Then you run compiled binary it try to open himself for reading as zip archive and throwing a ZipException. Try this https://spring.io/blog/2020/04/16/spring-tips-the-graalvm-native-image-builder-feature\r\n","title":"compile spring boot application by native-image","body":"<p>When you compile binary from fat jar by native-image it gets Main-Class: org.springframework.boot.loader.JarLauncher from manifest and trying to make executable binary whith entry point JarLauncher. Then you run compiled binary it try to open himself for reading as zip archive and throwing a ZipException. Try this <a href=\"https://spring.io/blog/2020/04/16/spring-tips-the-graalvm-native-image-builder-feature\" rel=\"nofollow noreferrer\">https://spring.io/blog/2020/04/16/spring-tips-the-graalvm-native-image-builder-feature</a></p>\n"}],"owner":{"account_id":20851171,"reputation":11,"user_id":15315668,"display_name":"Ilya Kr"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":1154,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1695184968,"creation_date":1614697476,"question_id":66441869,"body_markdown":"I&#39;m trying to compile spring boot application by native-image executing following command\r\nnative-image --no-fallback -jar rest.jar\r\nall compiling good, but at run time I see an exception\r\n\r\n    Exception in thread &quot;main&quot; java.lang.IllegalStateException: java.util.zip.ZipException: zip END header not found\r\n    \tat org.springframework.boot.loader.ExecutableArchiveLauncher.&lt;init&gt;(ExecutableArchiveLauncher.java:52)\r\n    \tat org.springframework.boot.loader.JarLauncher.&lt;init&gt;(JarLauncher.java:48)\r\n    \tat org.springframework.boot.loader.JarLauncher.main(JarLauncher.java:88)\r\n    Caused by: java.util.zip.ZipException: zip END header not found\r\n    \tat java.util.zip.ZipFile$Source.zerror(ZipFile.java:1581)\r\n    \tat java.util.zip.ZipFile$Source.findEND(ZipFile.java:1476)\r\n    \tat java.util.zip.ZipFile$Source.initCEN(ZipFile.java:1483)\r\n    \tat java.util.zip.ZipFile$Source.&lt;init&gt;(ZipFile.java:1288)\r\n    \tat java.util.zip.ZipFile$Source.get(ZipFile.java:1251)\r\n    \tat java.util.zip.ZipFile$CleanableResource.&lt;init&gt;(ZipFile.java:732)\r\n    \tat java.util.zip.ZipFile$CleanableResource.get(ZipFile.java:849)\r\n    \tat java.util.zip.ZipFile.&lt;init&gt;(ZipFile.java:247)\r\n    \tat java.util.zip.ZipFile.&lt;init&gt;(ZipFile.java:177)\r\n    \tat java.util.jar.JarFile.&lt;init&gt;(JarFile.java:348)\r\n    \tat java.util.jar.JarFile.&lt;init&gt;(JarFile.java:319)\r\n    \tat java.util.jar.JarFile.&lt;init&gt;(JarFile.java:285)\r\n    \tat org.springframework.boot.loader.jar.AbstractJarFile.&lt;init&gt;(AbstractJarFile.java:39)\r\n    \tat org.springframework.boot.loader.jar.JarFile.&lt;init&gt;(JarFile.java:128)\r\n    \tat org.springframework.boot.loader.jar.JarFile.&lt;init&gt;(JarFile.java:123)\r\n    \tat org.springframework.boot.loader.jar.JarFile.&lt;init&gt;(JarFile.java:109)\r\n    \tat org.springframework.boot.loader.jar.JarFile.&lt;init&gt;(JarFile.java:100)\r\n    \tat org.springframework.boot.loader.archive.JarFileArchive.&lt;init&gt;(JarFileArchive.java:57)\r\n    \tat org.springframework.boot.loader.archive.JarFileArchive.&lt;init&gt;(JarFileArchive.java:53)\r\n    \tat org.springframework.boot.loader.Launcher.createArchive(Launcher.java:162)\r\n    \tat org.springframework.boot.loader.ExecutableArchiveLauncher.&lt;init&gt;(ExecutableArchiveLauncher.java:48)\r\n\r\nWhat I&#39;m doing wrong?\r\n\r\n","title":"compile spring boot application by native-image","body":"<p>I'm trying to compile spring boot application by native-image executing following command\nnative-image --no-fallback -jar rest.jar\nall compiling good, but at run time I see an exception</p>\n<pre><code>Exception in thread &quot;main&quot; java.lang.IllegalStateException: java.util.zip.ZipException: zip END header not found\n    at org.springframework.boot.loader.ExecutableArchiveLauncher.&lt;init&gt;(ExecutableArchiveLauncher.java:52)\n    at org.springframework.boot.loader.JarLauncher.&lt;init&gt;(JarLauncher.java:48)\n    at org.springframework.boot.loader.JarLauncher.main(JarLauncher.java:88)\nCaused by: java.util.zip.ZipException: zip END header not found\n    at java.util.zip.ZipFile$Source.zerror(ZipFile.java:1581)\n    at java.util.zip.ZipFile$Source.findEND(ZipFile.java:1476)\n    at java.util.zip.ZipFile$Source.initCEN(ZipFile.java:1483)\n    at java.util.zip.ZipFile$Source.&lt;init&gt;(ZipFile.java:1288)\n    at java.util.zip.ZipFile$Source.get(ZipFile.java:1251)\n    at java.util.zip.ZipFile$CleanableResource.&lt;init&gt;(ZipFile.java:732)\n    at java.util.zip.ZipFile$CleanableResource.get(ZipFile.java:849)\n    at java.util.zip.ZipFile.&lt;init&gt;(ZipFile.java:247)\n    at java.util.zip.ZipFile.&lt;init&gt;(ZipFile.java:177)\n    at java.util.jar.JarFile.&lt;init&gt;(JarFile.java:348)\n    at java.util.jar.JarFile.&lt;init&gt;(JarFile.java:319)\n    at java.util.jar.JarFile.&lt;init&gt;(JarFile.java:285)\n    at org.springframework.boot.loader.jar.AbstractJarFile.&lt;init&gt;(AbstractJarFile.java:39)\n    at org.springframework.boot.loader.jar.JarFile.&lt;init&gt;(JarFile.java:128)\n    at org.springframework.boot.loader.jar.JarFile.&lt;init&gt;(JarFile.java:123)\n    at org.springframework.boot.loader.jar.JarFile.&lt;init&gt;(JarFile.java:109)\n    at org.springframework.boot.loader.jar.JarFile.&lt;init&gt;(JarFile.java:100)\n    at org.springframework.boot.loader.archive.JarFileArchive.&lt;init&gt;(JarFileArchive.java:57)\n    at org.springframework.boot.loader.archive.JarFileArchive.&lt;init&gt;(JarFileArchive.java:53)\n    at org.springframework.boot.loader.Launcher.createArchive(Launcher.java:162)\n    at org.springframework.boot.loader.ExecutableArchiveLauncher.&lt;init&gt;(ExecutableArchiveLauncher.java:48)\n</code></pre>\n<p>What I'm doing wrong?</p>\n"},{"tags":["java","mongodb"],"comments":[{"owner":{"account_id":6583624,"reputation":2702,"user_id":5087125,"display_name":"pvg"},"score":2,"creation_date":1466037098,"post_id":37847948,"comment_id":63155650,"body_markdown":"`toMap` returns a `Map` not a `HashMap`.","body":"<code>toMap</code> returns a <code>Map</code> not a <code>HashMap</code>."},{"owner":{"account_id":1083546,"reputation":523,"user_id":1079835,"display_name":"Mahesh Pujari"},"score":1,"creation_date":1466037154,"post_id":37847948,"comment_id":63155668,"body_markdown":"Can you look at this http://stackoverflow.com/questions/8477923/is-there-a-way-to-render-a-basicdbobject-into-mapstring-string-with-mongodb-ja/8478668","body":"Can you look at this <a href=\"http://stackoverflow.com/questions/8477923/is-there-a-way-to-render-a-basicdbobject-into-mapstring-string-with-mongodb-ja/8478668\" title=\"is there a way to render a basicdbobject into mapstring string with mongodb ja\">stackoverflow.com/questions/8477923/&hellip;</a>"}],"answers":[{"comments":[{"owner":{"account_id":179998,"reputation":5576,"user_id":413032,"accept_rate":59,"display_name":"Davut G&#252;rb&#252;z"},"score":0,"creation_date":1614503499,"post_id":37847980,"comment_id":117400849,"body_markdown":"api page you linked require authentication now :)","body":"api page you linked require authentication now :)"}],"tags":[],"owner":{"account_id":2673407,"reputation":44640,"user_id":2310289,"display_name":"Scary Wombat"},"comment_count":1,"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1695183703,"creation_date":1466037096,"answer_id":37847980,"question_id":37847948,"body_markdown":"It does not need to be cast\r\n\r\nsee https://mongodb.github.io/mongo-java-driver/4.10/apidocs/bson/org/bson/BsonDocument.html#putAll(java.util.Map)\r\n\r\n","title":"Java, java.util.HashMap cannot be cast to org.bson.BSONObject","body":"<p>It does not need to be cast</p>\n<p>see <a href=\"https://mongodb.github.io/mongo-java-driver/4.10/apidocs/bson/org/bson/BsonDocument.html#putAll(java.util.Map)\" rel=\"nofollow noreferrer\">https://mongodb.github.io/mongo-java-driver/4.10/apidocs/bson/org/bson/BsonDocument.html#putAll(java.util.Map)</a></p>\n"}],"owner":{"account_id":6523439,"reputation":16962,"user_id":5046896,"accept_rate":86,"display_name":"GoingMyWay"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":6328,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":37847980,"answer_count":1,"score":2,"last_activity_date":1695183703,"creation_date":1466036891,"question_id":37847948,"body_markdown":"I have been working wrote a MapReduce Program to implement word count with data store in MongoDB. I want to cast BSONObject to HashMap in Java, but it return the error\r\n\r\n    java.lang.Exception: java.lang.ClassCastException: java.util.HashMap cannot be cast to org.bson.BSONObject\r\n\r\nAnd my code\r\n\r\n    BasicBSONObject result = new BasicBSONObject();\r\n    HashMap&lt;String, Integer&gt; mymap = new HashMap&lt;String, Integer&gt;();\r\n    [snippt]\r\n    for (BSONWritable val : values) {\r\n    {\r\n        HashMap&lt;String, Integer&gt; temp = (HashMap&lt;String, Integer&gt;) val.getDoc().toMap();\r\n    \tfor (Map.Entry&lt;String, Integer&gt; entry :  temp.entrySet()) {\r\n    \t\tif (mymap.containsKey(entry.getKey())) {\r\n    \t\t\tmymap.put(entry.getKey(), entry.getValue()+1);\r\n    \t\t}\r\n    \t\telse {\r\n\t\t\t\tmymap.put(entry.getKey(), 1);\r\n\t\t\t}\r\n    \t}\r\n    \t\t\t\r\n    }\r\n    result.putAll((BSONObject)mymap);\r\n\r\nI want to my `ｍymap` into `result`. Since `mymap` is a `HashMap` instance, I think `putAll` method is a choice.\r\n\r\nHow can I fix it? Thanks!\r\n","title":"Java, java.util.HashMap cannot be cast to org.bson.BSONObject","body":"<p>I have been working wrote a MapReduce Program to implement word count with data store in MongoDB. I want to cast BSONObject to HashMap in Java, but it return the error</p>\n\n<pre><code>java.lang.Exception: java.lang.ClassCastException: java.util.HashMap cannot be cast to org.bson.BSONObject\n</code></pre>\n\n<p>And my code</p>\n\n<pre><code>BasicBSONObject result = new BasicBSONObject();\nHashMap&lt;String, Integer&gt; mymap = new HashMap&lt;String, Integer&gt;();\n[snippt]\nfor (BSONWritable val : values) {\n{\n    HashMap&lt;String, Integer&gt; temp = (HashMap&lt;String, Integer&gt;) val.getDoc().toMap();\n    for (Map.Entry&lt;String, Integer&gt; entry :  temp.entrySet()) {\n        if (mymap.containsKey(entry.getKey())) {\n            mymap.put(entry.getKey(), entry.getValue()+1);\n        }\n        else {\n            mymap.put(entry.getKey(), 1);\n        }\n    }\n\n}\nresult.putAll((BSONObject)mymap);\n</code></pre>\n\n<p>I want to my <code>ｍymap</code> into <code>result</code>. Since <code>mymap</code> is a <code>HashMap</code> instance, I think <code>putAll</code> method is a choice.</p>\n\n<p>How can I fix it? Thanks!</p>\n"},{"tags":["java","excel","apache-poi","xls"],"comments":[{"owner":{"account_id":4853829,"reputation":57305,"user_id":3915431,"display_name":"Axel Richter"},"score":1,"creation_date":1694582048,"post_id":77093684,"comment_id":135908370,"body_markdown":"Can you upload the `Template.xls` somewhere? Or at least show a screenshot of first sheet Range `A1:E5` of that workbook. And please tell what content is in `D2` before the code runs.","body":"Can you upload the <code>Template.xls</code> somewhere? Or at least show a screenshot of first sheet Range <code>A1:E5</code> of that workbook. And please tell what content is in <code>D2</code> before the code runs."},{"owner":{"account_id":26397399,"reputation":1,"user_id":20048342,"display_name":"Vyron"},"score":0,"creation_date":1694672621,"post_id":77093684,"comment_id":135922504,"body_markdown":"@AxelRichter thank you for replying. I have updated my question added the screenshot of the sheet from `A1:E5`, also what is the `D2` means? if it&#39;s the excel cell content, then its empty currently.","body":"@AxelRichter thank you for replying. I have updated my question added the screenshot of the sheet from <code>A1:E5</code>, also what is the <code>D2</code> means? if it&#39;s the excel cell content, then its empty currently."},{"owner":{"account_id":4853829,"reputation":57305,"user_id":3915431,"display_name":"Axel Richter"},"score":0,"creation_date":1694674228,"post_id":77093684,"comment_id":135922719,"body_markdown":"Can it be that range `B1:*` or `B2:*` is part of a query table which pulls data from external source? If so, then this is the reason for the problem. You cannot change cell values in query tables using Apache POI.","body":"Can it be that range <code>B1:*</code> or <code>B2:*</code> is part of a query table which pulls data from external source? If so, then this is the reason for the problem. You cannot change cell values in query tables using Apache POI."},{"owner":{"account_id":26397399,"reputation":1,"user_id":20048342,"display_name":"Vyron"},"score":0,"creation_date":1694675709,"post_id":77093684,"comment_id":135923005,"body_markdown":"I check the template again, there is no cell values that pulls data from external source. I try to find the reason behind the error so i tried removed two cells using list data validation and when it&#39;s removed the workbook created don&#39;t have the error, but the cell should supposedly not to be removed.","body":"I check the template again, there is no cell values that pulls data from external source. I try to find the reason behind the error so i tried removed two cells using list data validation and when it&#39;s removed the workbook created don&#39;t have the error, but the cell should supposedly not to be removed."},{"owner":{"account_id":26397399,"reputation":1,"user_id":20048342,"display_name":"Vyron"},"score":0,"creation_date":1695345330,"post_id":77093684,"comment_id":136015407,"body_markdown":"Yes, it answered my question! Thank you. Now I am looking for any workaround of the problem and ask another question related to this.","body":"Yes, it answered my question! Thank you. Now I am looking for any workaround of the problem and ask another question related to this."}],"answers":[{"tags":[],"owner":{"account_id":26397399,"reputation":1,"user_id":20048342,"display_name":"Vyron"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695183657,"creation_date":1695183657,"answer_id":77139265,"question_id":77093684,"body_markdown":"This is not an answer but just to say that my current problem is more or less because of two cells with data validation like this [Here][1]. The problem is the excel file cannot be changed as it won&#39;t be valid anymore to use.\r\n\r\n\r\n  [1]: https://stackoverflow.com/questions/51848887/finding-the-cause-of-excel-file-corruption","title":"Write data to existing excel (.xls) using apache POI, the workbook created give error excel lost some data","body":"<p>This is not an answer but just to say that my current problem is more or less because of two cells with data validation like this <a href=\"https://stackoverflow.com/questions/51848887/finding-the-cause-of-excel-file-corruption\">Here</a>. The problem is the excel file cannot be changed as it won't be valid anymore to use.</p>\n"}],"owner":{"account_id":26397399,"reputation":1,"user_id":20048342,"display_name":"Vyron"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":59,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"closed_date":1695345338,"answer_count":1,"score":0,"last_activity_date":1695183657,"creation_date":1694572157,"question_id":77093684,"body_markdown":"I&#39;m trying to work on writing data to the excel file using apache POI-3.15-beta1, but when the workbook is created, the workbook becomes corrupted with lost some content which is some of the formula not working and table style is lost. If the original excel file is open while opening the updated excel, all content is there and there is no error. Other excel I tested working properly. Any suggestions of why this the problem happened and any solution?\r\n\r\nThis error popup before opening the excel:\r\n[Lost content error][1]\r\n\r\nThis popup after opening the excel when yes is clicked:\r\n[Error][2]\r\n\r\n[Edit] Cell A1:E5: [Update][3]\r\nI just used this java code here\r\n\r\n    FileInputStream inputStream = new FileInputStream(&quot;D:/Template.xls&quot;);\r\n    Workbook workbook = null;\r\n    workbook = new HSSFWorkbook(inputStream);\r\n    inputStream.close();\r\n    \r\n    Sheet sheet = workbook.getSheetAt(0);\r\n\r\n    Cell cell= sheet.getRow(1).getCell(3);\r\n\r\n    cell.setCellValue(30);\r\n \r\n    FileOutputStream out = new FileOutputStream(new File(&quot;D:/Test.xls&quot;));\r\n    workbook.write(out);\r\n    out.close();\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/6L7D1.png\r\n  [2]: https://i.stack.imgur.com/6yZ2z.png\r\n  [3]: https://i.stack.imgur.com/LAr69.png","title":"Write data to existing excel (.xls) using apache POI, the workbook created give error excel lost some data","body":"<p>I'm trying to work on writing data to the excel file using apache POI-3.15-beta1, but when the workbook is created, the workbook becomes corrupted with lost some content which is some of the formula not working and table style is lost. If the original excel file is open while opening the updated excel, all content is there and there is no error. Other excel I tested working properly. Any suggestions of why this the problem happened and any solution?</p>\n<p>This error popup before opening the excel:\n<a href=\"https://i.stack.imgur.com/6L7D1.png\" rel=\"nofollow noreferrer\">Lost content error</a></p>\n<p>This popup after opening the excel when yes is clicked:\n<a href=\"https://i.stack.imgur.com/6yZ2z.png\" rel=\"nofollow noreferrer\">Error</a></p>\n<p>[Edit] Cell A1:E5: <a href=\"https://i.stack.imgur.com/LAr69.png\" rel=\"nofollow noreferrer\">Update</a>\nI just used this java code here</p>\n<pre><code>FileInputStream inputStream = new FileInputStream(&quot;D:/Template.xls&quot;);\nWorkbook workbook = null;\nworkbook = new HSSFWorkbook(inputStream);\ninputStream.close();\n\nSheet sheet = workbook.getSheetAt(0);\n\nCell cell= sheet.getRow(1).getCell(3);\n\ncell.setCellValue(30);\n\nFileOutputStream out = new FileOutputStream(new File(&quot;D:/Test.xls&quot;));\nworkbook.write(out);\nout.close();\n</code></pre>\n"},{"tags":["java","spring","spring-boot","spring-security"],"comments":[{"owner":{"account_id":3192259,"reputation":117619,"user_id":2696260,"display_name":"M. Deinum"},"score":1,"creation_date":1695190233,"post_id":77138430,"comment_id":135989073,"body_markdown":"The problem is your methods are `final` those cannot be proxied and as security is applied through AOP which utilizes proxies your methods cannot be `final`.","body":"The problem is your methods are <code>final</code> those cannot be proxied and as security is applied through AOP which utilizes proxies your methods cannot be <code>final</code>."},{"owner":{"account_id":29486111,"reputation":3,"user_id":22595985,"display_name":"Luca Ferretti"},"score":0,"creation_date":1695228147,"post_id":77138430,"comment_id":135997486,"body_markdown":"Thank you for the explanation, that worked!","body":"Thank you for the explanation, that worked!"}],"answers":[{"comments":[{"owner":{"account_id":29486111,"reputation":3,"user_id":22595985,"display_name":"Luca Ferretti"},"score":0,"creation_date":1695228121,"post_id":77139202,"comment_id":135997478,"body_markdown":"Can&#39;t believe it was that little thing. Thank you so much","body":"Can&#39;t believe it was that little thing. Thank you so much"}],"tags":[],"owner":{"account_id":25804254,"reputation":774,"user_id":19546048,"display_name":"DingHao"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1695182197,"creation_date":1695182197,"answer_id":77139202,"question_id":77138430,"body_markdown":"please remove final modifier on getBoolean and getNumber ","title":"@PreAuthorize not working in spring security 6.1.3 in spring 3.1.3","body":"<p>please remove final modifier on getBoolean and getNumber</p>\n"}],"owner":{"account_id":29486111,"reputation":3,"user_id":22595985,"display_name":"Luca Ferretti"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":269,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":77139202,"answer_count":1,"score":0,"last_activity_date":1695182197,"creation_date":1695164935,"question_id":77138430,"body_markdown":"I am facing a problem using Spring security @PreAuthorize annotation. I have followed many tutorials and theorically I am making everything right but for some reasons it doesn&#39;t work.\r\n\r\nAll I wanted to do in this test was to have a public request (/hello) and 2 private requests, one for the users only (/boolean) and another one for the admin only (/number).\r\nThe private ones are correctly redirected to login but both /boolean and /number work with both credentials.\r\nIf I call /boolean with the user I am getting User Authorities: [ROLE_USER], but if I use admin credentials it logs User Authorities: [ROLE_ADMIN] as if the @PreAuthorize didn&#39;t exists.\r\nSame behaviour for the /number.\r\n\r\nMy controller:\r\n\r\n\r\n```\r\n@RestController\r\n@RequestMapping(value = &quot;/rest/api/security&quot;)\r\npublic class BaseController extends HateosController{\r\n\t\r\n\t@GetMapping(&quot;/hello&quot;)\r\n\tpublic final String getHello() {\r\n\t\treturn &quot;Ciao!&quot;;\r\n\t}\r\n\t\r\n\t@GetMapping(&quot;/boolean&quot;)\r\n\t@PreAuthorize(&quot;hasRole(&#39;ROLE_USER&#39;)&quot;)\r\n\tpublic final boolean getBoolean(Authentication authentication) {\r\n\t    System.out.println(&quot;User Authorities: &quot; + authentication.getAuthorities());\r\n\t\treturn true;\r\n\t}\r\n\t\r\n\t@GetMapping(&quot;/number&quot;)\r\n\t@PreAuthorize(&quot;hasAuthority(&#39;ROLE_ADMIN&#39;)&quot;)\r\n\tpublic final Integer getNumber(Authentication authentication) {\r\n\t    System.out.println(&quot;User Authorities: &quot; + authentication.getAuthorities());\r\n\t\treturn 115683;\r\n\t}\r\n}\r\n```\r\n\r\nMy SecurityConfig:\r\n\r\n```\r\n@Configuration\r\n@EnableWebSecurity\r\n@EnableMethodSecurity\r\npublic class SecurityConfig {\r\n\t\r\n\t@Bean\r\n\tpublic UserDetailsService userDetailsService(PasswordEncoder encoder) {\r\n\t\tUserDetails admin = User.withUsername(&quot;admin&quot;).password(encoder.encode(&quot;admin&quot;)).roles(&quot;ADMIN&quot;).build();\r\n\t\tUserDetails user = User.withUsername(&quot;user&quot;).password(encoder.encode(&quot;user&quot;)).roles(&quot;USER&quot;).build();\r\n\t\treturn new InMemoryUserDetailsManager(admin, user);\r\n\t}\r\n\t\r\n\t@Bean\r\n\tpublic SecurityFilterChain securityFilterChain(HttpSecurity http) throws Exception {\r\n\t\treturn http.csrf().disable()\r\n\t\t\t\t.authorizeHttpRequests()\r\n\t\t\t\t.requestMatchers(&quot;/rest/api/security/hello&quot;).permitAll().anyRequest().authenticated().and().formLogin()\r\n\t\t\t\t.and().build();\r\n\t}\r\n\t\r\n\t@Bean\r\n\tpublic PasswordEncoder passwordEncoder() {\r\n\t\treturn new BCryptPasswordEncoder();\r\n\t}\r\n\r\n}\r\n\r\n```\r\n\r\nAny suggestions?\r\nP.S: I know something in securityFilterChain is deprecated but it should work the same and i have tried also with newer methods with no results.\r\n","title":"@PreAuthorize not working in spring security 6.1.3 in spring 3.1.3","body":"<p>I am facing a problem using Spring security @PreAuthorize annotation. I have followed many tutorials and theorically I am making everything right but for some reasons it doesn't work.</p>\n<p>All I wanted to do in this test was to have a public request (/hello) and 2 private requests, one for the users only (/boolean) and another one for the admin only (/number).\nThe private ones are correctly redirected to login but both /boolean and /number work with both credentials.\nIf I call /boolean with the user I am getting User Authorities: [ROLE_USER], but if I use admin credentials it logs User Authorities: [ROLE_ADMIN] as if the @PreAuthorize didn't exists.\nSame behaviour for the /number.</p>\n<p>My controller:</p>\n<pre><code>@RestController\n@RequestMapping(value = &quot;/rest/api/security&quot;)\npublic class BaseController extends HateosController{\n    \n    @GetMapping(&quot;/hello&quot;)\n    public final String getHello() {\n        return &quot;Ciao!&quot;;\n    }\n    \n    @GetMapping(&quot;/boolean&quot;)\n    @PreAuthorize(&quot;hasRole('ROLE_USER')&quot;)\n    public final boolean getBoolean(Authentication authentication) {\n        System.out.println(&quot;User Authorities: &quot; + authentication.getAuthorities());\n        return true;\n    }\n    \n    @GetMapping(&quot;/number&quot;)\n    @PreAuthorize(&quot;hasAuthority('ROLE_ADMIN')&quot;)\n    public final Integer getNumber(Authentication authentication) {\n        System.out.println(&quot;User Authorities: &quot; + authentication.getAuthorities());\n        return 115683;\n    }\n}\n</code></pre>\n<p>My SecurityConfig:</p>\n<pre><code>@Configuration\n@EnableWebSecurity\n@EnableMethodSecurity\npublic class SecurityConfig {\n    \n    @Bean\n    public UserDetailsService userDetailsService(PasswordEncoder encoder) {\n        UserDetails admin = User.withUsername(&quot;admin&quot;).password(encoder.encode(&quot;admin&quot;)).roles(&quot;ADMIN&quot;).build();\n        UserDetails user = User.withUsername(&quot;user&quot;).password(encoder.encode(&quot;user&quot;)).roles(&quot;USER&quot;).build();\n        return new InMemoryUserDetailsManager(admin, user);\n    }\n    \n    @Bean\n    public SecurityFilterChain securityFilterChain(HttpSecurity http) throws Exception {\n        return http.csrf().disable()\n                .authorizeHttpRequests()\n                .requestMatchers(&quot;/rest/api/security/hello&quot;).permitAll().anyRequest().authenticated().and().formLogin()\n                .and().build();\n    }\n    \n    @Bean\n    public PasswordEncoder passwordEncoder() {\n        return new BCryptPasswordEncoder();\n    }\n\n}\n\n</code></pre>\n<p>Any suggestions?\nP.S: I know something in securityFilterChain is deprecated but it should work the same and i have tried also with newer methods with no results.</p>\n"},{"tags":["java","maven-3","maven-shade-plugin"],"comments":[{"owner":{"account_id":5167086,"reputation":655,"user_id":4136745,"display_name":"sify"},"score":0,"creation_date":1666151558,"post_id":74119618,"comment_id":130865061,"body_markdown":"I found related issue: https://issues.apache.org/jira/browse/MSHADE-406","body":"I found related issue: <a href=\"https://issues.apache.org/jira/browse/MSHADE-406\" rel=\"nofollow noreferrer\">issues.apache.org/jira/browse/MSHADE-406</a>"},{"owner":{"account_id":5167086,"reputation":655,"user_id":4136745,"display_name":"sify"},"score":0,"creation_date":1699608132,"post_id":74119618,"comment_id":136556099,"body_markdown":"The team started to work on this: https://github.com/apache/maven-shade-plugin/pull/202","body":"The team started to work on this: <a href=\"https://github.com/apache/maven-shade-plugin/pull/202\" rel=\"nofollow noreferrer\">github.com/apache/maven-shade-plugin/pull/202</a>"}],"answers":[{"comments":[{"owner":{"account_id":6734,"reputation":3954,"user_id":11451,"accept_rate":82,"display_name":"Kristof Neirynck"},"score":0,"creation_date":1688741662,"post_id":74123163,"comment_id":135118877,"body_markdown":"I doubt this will change the package or the import statements of the classes you&#39;re moving.","body":"I doubt this will change the package or the import statements of the classes you&#39;re moving."},{"owner":{"account_id":5167086,"reputation":655,"user_id":4136745,"display_name":"sify"},"score":0,"creation_date":1688982891,"post_id":74123163,"comment_id":135143417,"body_markdown":"shade modifies all related class file entries, so the import statements are changed, it&#39;s just that the directory structure is not correct. But yours is definitely a better solution. Actually I think shade should handle this situation by itself without extra configuration.","body":"shade modifies all related class file entries, so the import statements are changed, it&#39;s just that the directory structure is not correct. But yours is definitely a better solution. Actually I think shade should handle this situation by itself without extra configuration."}],"tags":[],"owner":{"account_id":5167086,"reputation":655,"user_id":4136745,"display_name":"sify"},"comment_count":2,"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1666172493,"creation_date":1666172493,"answer_id":74123163,"question_id":74119618,"body_markdown":"I found a work-around for this: use `antrun` plugin to unzip final jar, move directories under `META-INF/versions` manually, then repack the jar.\r\n\r\n    \t    &lt;plugin&gt;\r\n\t\t\t\t&lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n\t\t\t\t&lt;artifactId&gt;maven-antrun-plugin&lt;/artifactId&gt;\r\n\t\t\t\t&lt;version&gt;3.1.0&lt;/version&gt;\r\n\t\t\t\t&lt;executions&gt;\r\n\t\t\t\t\t&lt;execution&gt;\r\n\t\t\t\t\t\t&lt;id&gt;repack&lt;/id&gt;\r\n\t\t\t\t\t\t&lt;phase&gt;package&lt;/phase&gt;\r\n\t\t\t\t\t\t&lt;goals&gt;\r\n\t\t\t\t\t\t\t&lt;goal&gt;run&lt;/goal&gt;\r\n\t\t\t\t\t\t&lt;/goals&gt;\r\n\t\t\t\t\t\t&lt;configuration&gt;\r\n\t\t\t\t\t\t\t&lt;target&gt;\r\n\t\t\t\t\t\t\t\t&lt;unzip src=&quot;${project.build.directory}/${project.build.finalName}.jar&quot; dest=&quot;${project.build.directory}/tmp&quot; /&gt;\r\n\t\t\t\t\t\t\t\t&lt;mkdir dir=&quot;${project.build.directory}/tmp/META-INF/versions/9/your/relocation/prefix&quot; /&gt;\r\n\t\t\t\t\t\t\t\t&lt;move file=&quot;${project.build.directory}/tmp/META-INF/versions/9/org&quot; todir=&quot;${project.build.directory}/tmp/META-INF/versions/9/your/relocation/prefix&quot; /&gt;\r\n\t\t\t\t\t\t\t\t&lt;zip basedir=&quot;${project.build.directory}/tmp&quot; destfile=&quot;${project.build.directory}/${project.build.finalName}.jar&quot; /&gt;\r\n                                &lt;delete dir=&quot;${project.build.directory}/tmp&quot; /&gt;\r\n\t\t\t\t\t\t\t&lt;/target&gt;\r\n\t\t\t\t\t\t&lt;/configuration&gt;\r\n\t\t\t\t\t&lt;/execution&gt;\r\n\t\t\t\t&lt;/executions&gt;\r\n\t\t\t&lt;/plugin&gt;","title":"maven-shade-plugin relocate classes under META-INF/versions in multi-release jar","body":"<p>I found a work-around for this: use <code>antrun</code> plugin to unzip final jar, move directories under <code>META-INF/versions</code> manually, then repack the jar.</p>\n<pre><code>        &lt;plugin&gt;\n            &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n            &lt;artifactId&gt;maven-antrun-plugin&lt;/artifactId&gt;\n            &lt;version&gt;3.1.0&lt;/version&gt;\n            &lt;executions&gt;\n                &lt;execution&gt;\n                    &lt;id&gt;repack&lt;/id&gt;\n                    &lt;phase&gt;package&lt;/phase&gt;\n                    &lt;goals&gt;\n                        &lt;goal&gt;run&lt;/goal&gt;\n                    &lt;/goals&gt;\n                    &lt;configuration&gt;\n                        &lt;target&gt;\n                            &lt;unzip src=&quot;${project.build.directory}/${project.build.finalName}.jar&quot; dest=&quot;${project.build.directory}/tmp&quot; /&gt;\n                            &lt;mkdir dir=&quot;${project.build.directory}/tmp/META-INF/versions/9/your/relocation/prefix&quot; /&gt;\n                            &lt;move file=&quot;${project.build.directory}/tmp/META-INF/versions/9/org&quot; todir=&quot;${project.build.directory}/tmp/META-INF/versions/9/your/relocation/prefix&quot; /&gt;\n                            &lt;zip basedir=&quot;${project.build.directory}/tmp&quot; destfile=&quot;${project.build.directory}/${project.build.finalName}.jar&quot; /&gt;\n                            &lt;delete dir=&quot;${project.build.directory}/tmp&quot; /&gt;\n                        &lt;/target&gt;\n                    &lt;/configuration&gt;\n                &lt;/execution&gt;\n            &lt;/executions&gt;\n        &lt;/plugin&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":6734,"reputation":3954,"user_id":11451,"accept_rate":82,"display_name":"Kristof Neirynck"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1688741949,"creation_date":1688741608,"answer_id":76638014,"question_id":74119618,"body_markdown":"I&#39;ve tried this and it seems to work.\r\n\r\n```xml\r\n&lt;plugin&gt;\r\n  &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n  &lt;artifactId&gt;maven-shade-plugin&lt;/artifactId&gt;\r\n  &lt;version&gt;3.5.0&lt;/version&gt;\r\n  &lt;executions&gt;\r\n    &lt;execution&gt;\r\n      &lt;id&gt;shade&lt;/id&gt;\r\n      &lt;phase&gt;package&lt;/phase&gt;\r\n      &lt;goals&gt;\r\n        &lt;goal&gt;shade&lt;/goal&gt;\r\n      &lt;/goals&gt;\r\n      &lt;configuration&gt;\r\n        ...\r\n        &lt;transformers&gt;\r\n          &lt;transformer implementation=&quot;org.apache.maven.plugins.shade.resource.ManifestResourceTransformer&quot;&gt;\r\n            &lt;manifestEntries&gt;\r\n              &lt;Multi-Release&gt;true&lt;/Multi-Release&gt;\r\n            &lt;/manifestEntries&gt;\r\n          &lt;/transformer&gt;\r\n        &lt;/transformers&gt;\r\n        &lt;filters&gt;\r\n          &lt;filter&gt;\r\n            &lt;artifact&gt;*:*&lt;/artifact&gt;\r\n            &lt;excludes&gt;\r\n              &lt;exclude&gt;META-INF/*.SF&lt;/exclude&gt;\r\n              &lt;exclude&gt;META-INF/*.DSA&lt;/exclude&gt;\r\n              &lt;exclude&gt;META-INF/*.RSA&lt;/exclude&gt;\r\n              &lt;exclude&gt;META-INF/MANIFEST.MF&lt;/exclude&gt;\r\n              &lt;exclude&gt;module-info.class&lt;/exclude&gt;\r\n            &lt;/excludes&gt;\r\n          &lt;/filter&gt;\r\n        &lt;/filters&gt;\r\n        &lt;relocations&gt;\r\n          ...\r\n          &lt;relocation&gt;\r\n            &lt;pattern&gt;META-INF/versions/9/javax.xml.bind&lt;/pattern&gt;\r\n            &lt;shadedPattern&gt;META-INF/versions/9/com.example.shaded.javax.xml.bind&lt;/shadedPattern&gt;\r\n          &lt;/relocation&gt;\r\n        &lt;/relocations&gt;\r\n      &lt;/configuration&gt;\r\n    &lt;/execution&gt;\r\n  &lt;/executions&gt;\r\n&lt;/plugin&gt;\r\n```","title":"maven-shade-plugin relocate classes under META-INF/versions in multi-release jar","body":"<p>I've tried this and it seems to work.</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;plugin&gt;\n  &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n  &lt;artifactId&gt;maven-shade-plugin&lt;/artifactId&gt;\n  &lt;version&gt;3.5.0&lt;/version&gt;\n  &lt;executions&gt;\n    &lt;execution&gt;\n      &lt;id&gt;shade&lt;/id&gt;\n      &lt;phase&gt;package&lt;/phase&gt;\n      &lt;goals&gt;\n        &lt;goal&gt;shade&lt;/goal&gt;\n      &lt;/goals&gt;\n      &lt;configuration&gt;\n        ...\n        &lt;transformers&gt;\n          &lt;transformer implementation=&quot;org.apache.maven.plugins.shade.resource.ManifestResourceTransformer&quot;&gt;\n            &lt;manifestEntries&gt;\n              &lt;Multi-Release&gt;true&lt;/Multi-Release&gt;\n            &lt;/manifestEntries&gt;\n          &lt;/transformer&gt;\n        &lt;/transformers&gt;\n        &lt;filters&gt;\n          &lt;filter&gt;\n            &lt;artifact&gt;*:*&lt;/artifact&gt;\n            &lt;excludes&gt;\n              &lt;exclude&gt;META-INF/*.SF&lt;/exclude&gt;\n              &lt;exclude&gt;META-INF/*.DSA&lt;/exclude&gt;\n              &lt;exclude&gt;META-INF/*.RSA&lt;/exclude&gt;\n              &lt;exclude&gt;META-INF/MANIFEST.MF&lt;/exclude&gt;\n              &lt;exclude&gt;module-info.class&lt;/exclude&gt;\n            &lt;/excludes&gt;\n          &lt;/filter&gt;\n        &lt;/filters&gt;\n        &lt;relocations&gt;\n          ...\n          &lt;relocation&gt;\n            &lt;pattern&gt;META-INF/versions/9/javax.xml.bind&lt;/pattern&gt;\n            &lt;shadedPattern&gt;META-INF/versions/9/com.example.shaded.javax.xml.bind&lt;/shadedPattern&gt;\n          &lt;/relocation&gt;\n        &lt;/relocations&gt;\n      &lt;/configuration&gt;\n    &lt;/execution&gt;\n  &lt;/executions&gt;\n&lt;/plugin&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":29487433,"reputation":1,"user_id":22597036,"display_name":"Zuokui Fu"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695182087,"creation_date":1695182087,"answer_id":77139194,"question_id":74119618,"body_markdown":"also met this issue, you can try the solution below:\r\n```\r\n&lt;relocations&gt;\r\n\t&lt;relocation&gt;\r\n\t\t&lt;pattern&gt;org/apache/lucene&lt;/pattern&gt;\r\n\t\t&lt;shadedPattern&gt;org/apache/relocation/lucene/v811&lt;/shadedPattern&gt;\r\n\t\t&lt;rawString&gt;true&lt;/rawString&gt;\r\n\t&lt;/relocation&gt;\r\n&lt;/relocations&gt;\r\n```\r\n\r\nset the rawString property to ture, and use&#39;/&#39;(not &#39;.&#39;)in the pattern/shadedPattern properties.","title":"maven-shade-plugin relocate classes under META-INF/versions in multi-release jar","body":"<p>also met this issue, you can try the solution below:</p>\n<pre><code>&lt;relocations&gt;\n    &lt;relocation&gt;\n        &lt;pattern&gt;org/apache/lucene&lt;/pattern&gt;\n        &lt;shadedPattern&gt;org/apache/relocation/lucene/v811&lt;/shadedPattern&gt;\n        &lt;rawString&gt;true&lt;/rawString&gt;\n    &lt;/relocation&gt;\n&lt;/relocations&gt;\n</code></pre>\n<p>set the rawString property to ture, and use'/'(not '.')in the pattern/shadedPattern properties.</p>\n"}],"owner":{"account_id":5167086,"reputation":655,"user_id":4136745,"display_name":"sify"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":283,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":3,"score":0,"last_activity_date":1695182087,"creation_date":1666151000,"question_id":74119618,"body_markdown":"I&#39;m using shade to create uber jar. I relocated dependency classes to avoid conflicts. However, I can&#39;t find online docs about how to relocate classes under META-INF/versions.","title":"maven-shade-plugin relocate classes under META-INF/versions in multi-release jar","body":"<p>I'm using shade to create uber jar. I relocated dependency classes to avoid conflicts. However, I can't find online docs about how to relocate classes under META-INF/versions.</p>\n"},{"tags":["java","apache-kafka","apache-flink","flink-cep"],"answers":[{"tags":[],"owner":{"account_id":5448964,"reputation":95,"user_id":4334448,"display_name":"Flaviu Cicio"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695130580,"creation_date":1695130580,"answer_id":77135060,"question_id":77116505,"body_markdown":"The output is fully redirected to the file.\r\nYou can use the `tee` command to copy the output to the file while printing to the console.\r\n\r\n```\r\n./bin/flink run /Users/spartacus/icu-alarm/target/flink-kafka-stroke-risk-1.0-SNAPSHOT-jar-with-dependencies.jar &gt;&amp;1 | tee out.txt\r\n```","title":"Flink job not printing expected output from Kafka Source","body":"<p>The output is fully redirected to the file.\nYou can use the <code>tee</code> command to copy the output to the file while printing to the console.</p>\n<pre><code>./bin/flink run /Users/spartacus/icu-alarm/target/flink-kafka-stroke-risk-1.0-SNAPSHOT-jar-with-dependencies.jar &gt;&amp;1 | tee out.txt\n</code></pre>\n"},{"tags":[],"owner":{"account_id":7486653,"reputation":290,"user_id":5689611,"accept_rate":80,"display_name":"Hasintha Samith Randika"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695180424,"creation_date":1695180424,"answer_id":77139121,"question_id":77116505,"body_markdown":"The output will not print to your console as the job is running inside the flink application.\r\nopen the flink UI and check on the job you run.\r\nThen check the STD out tab for the required information.\r\nBut what is the use case for printing the output to std out?\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/4gvL9.png","title":"Flink job not printing expected output from Kafka Source","body":"<p>The output will not print to your console as the job is running inside the flink application.\nopen the flink UI and check on the job you run.\nThen check the STD out tab for the required information.\nBut what is the use case for printing the output to std out?\n<a href=\"https://i.stack.imgur.com/4gvL9.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/4gvL9.png\" alt=\"enter image description here\" /></a></p>\n"}],"owner":{"account_id":24386325,"reputation":329,"user_id":18317047,"display_name":"Ishaan Adarsh"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":75,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":2,"score":2,"last_activity_date":1695180424,"creation_date":1694842947,"question_id":77116505,"body_markdown":"I am working on a Flink job that reads data from a Kafka source, processes it using CEP patterns, and prints alerts to the console. However, when I run the Flink job using the following command:\r\n\r\n```shell\r\n./bin/flink run /Users/spartacus/icu-alarm/target/flink-kafka-stroke-risk-1.0-SNAPSHOT-jar-with-dependencies.jar &gt; out.txt\r\n```\r\n\r\nI only see the following output in the `out.txt` file:\r\n\r\n```\r\nJob has been submitted with JobID 3811369c6f7f14d0eca0a66072550414\r\n```\r\n\r\nThe expected behavior is that the Flink job should print alerts to the console like \r\n\r\n`Stroke Risk Alert: Patient ID - XYZ, Risk Level - 5`\r\n\r\nHowever, it seems that the alerts are not being printed.\r\n\r\n### Code:\r\n```\r\npackage hes.cs63.CEPMonitor;\r\n\r\nimport org.apache.flink.api.common.eventtime.WatermarkStrategy;\r\nimport org.apache.flink.api.common.serialization.SimpleStringSchema;\r\nimport org.apache.flink.cep.CEP;\r\nimport org.apache.flink.cep.pattern.Pattern;\r\nimport org.apache.flink.cep.PatternStream;\r\nimport org.apache.flink.cep.PatternSelectFunction;\r\nimport org.apache.flink.cep.pattern.conditions.SimpleCondition;\r\nimport org.apache.flink.streaming.api.datastream.DataStream;\r\nimport org.apache.flink.streaming.api.datastream.DataStreamSource;\r\nimport org.apache.flink.streaming.api.environment.StreamExecutionEnvironment;\r\nimport org.apache.flink.connector.kafka.source.KafkaSource;\r\nimport org.apache.flink.connector.kafka.source.reader.deserializer.KafkaRecordDeserializationSchema;\r\nimport org.apache.kafka.common.serialization.StringDeserializer;\r\n\r\nimport java.util.Arrays;\r\nimport java.util.List;\r\nimport java.util.Map;\r\nimport java.util.Properties;\r\n\r\npublic class StrokeRiskAlarm {\r\n    public static void main(String[] args) throws Exception {\r\n        StreamExecutionEnvironment env = StreamExecutionEnvironment.getExecutionEnvironment();\r\n\r\n        Properties properties = new Properties();\r\n        properties.setProperty(&quot;bootstrap.servers&quot;, &quot;localhost:9092&quot;);\r\n        properties.setProperty(&quot;group.id&quot;, &quot;test-consumer-group&quot;);\r\n\r\n        KafkaSource&lt;String&gt; source = KafkaSource.&lt;String&gt;builder()\r\n                .setBootstrapServers(&quot;localhost:9092&quot;)\r\n                .setGroupId(&quot;test-consumer-group&quot;)\r\n                .setTopics(Arrays.asList(&quot;geCEP&quot;))\r\n                .setDeserializer(KafkaRecordDeserializationSchema.valueOnly(StringDeserializer.class))\r\n                //.setStartingOffsets(OffsetsInitializer.earliest())\r\n                .setValueOnlyDeserializer(new SimpleStringSchema())\r\n                .build();\r\n\r\n        DataStreamSource&lt;String&gt; patientData = env.fromSource(source, WatermarkStrategy.noWatermarks(), &quot;Kafka Source&quot;);\r\n\r\n        // Use KafkaSource\r\n        Pattern&lt;String, ?&gt; highRiskPattern = Pattern.&lt;String&gt;begin(&quot;first&quot;)\r\n                .where(new SimpleCondition&lt;String&gt;() {\r\n                    @Override\r\n                    public boolean filter(String value) {\r\n                        return getValue(value) &gt; 3;\r\n                    }\r\n                });\r\n\r\n        PatternStream&lt;String&gt; patternStream = CEP.pattern(\r\n                patientData,\r\n                highRiskPattern\r\n        );\r\n\r\n        DataStream&lt;String&gt; strokeRiskAlerts = patternStream.select(new PatternSelectFunction&lt;String, String&gt;() {\r\n            @Override\r\n            public String select(Map&lt;String, List&lt;String&gt;&gt; pattern) throws Exception {\r\n                String userId = pattern.get(&quot;first&quot;).get(0).split(&quot;,&quot;)[0].trim();\r\n                int risk = getTotalRisk(pattern.get(&quot;first&quot;).get(0), pattern.get(&quot;middle&quot;).get(0), pattern.get(&quot;last&quot;).get(0));\r\n                return &quot;Stroke Risk Alert: Patient ID - &quot; + userId + &quot;, Risk Level - &quot; + risk;\r\n            }\r\n        });\r\n\r\n        strokeRiskAlerts.print();\r\n\r\n        env.execute(&quot;Stroke Risk Alert Job&quot;);\r\n    }\r\n\r\n    private static int getValue(String value) {\r\n        // Parse the input value and extract the relevant data for risk calculation\r\n        String[] parts = value.split(&quot;,&quot;);\r\n        String type = parts[2].trim();\r\n        double measurementValue = Double.parseDouble(parts[3].trim());\r\n\r\n        // Implement your logic to check high stroke risk for different measurements\r\n        if (type.equals(&quot;HR&quot;)) {\r\n            // HeartMeasurement risk calculation logic\r\n            int risk = 0;\r\n            risk += measurementValue &lt;= 50 ? 1 : 0;\r\n            risk += measurementValue &lt;= 40 ? 1 : 0;\r\n            risk += measurementValue &gt;= 91 ? 1 : 0;\r\n            risk += measurementValue &gt;= 110 ? 1 : 0;\r\n            risk += measurementValue &gt;= 131 ? 1 : 0;\r\n            return risk;\r\n        } else if (type.equals(&quot;SBP&quot;)) {\r\n            // BloodPressureMeasurement risk calculation logic\r\n            int risk = 0;\r\n            risk += measurementValue &lt;= 110 ? 1 : 0;\r\n            risk += measurementValue &lt;= 100 ? 1 : 0;\r\n            risk += measurementValue &lt;= 90 ? 1 : 0;\r\n            risk += measurementValue &gt;= 220 ? 3 : 0;\r\n            return risk;\r\n        } else if (type.equals(&quot;TEMP&quot;)) {\r\n            // TempMeasurement risk calculation logic\r\n            int risk = 0;\r\n            risk += measurementValue &lt;= 36 ? 1 : 0;\r\n            risk += measurementValue &lt;= 35 ? 2 : 0;\r\n            risk += measurementValue &gt;= 38.1 ? 1 : 0;\r\n            risk += measurementValue &gt;= 39.1 ? 1 : 0;\r\n            return risk;\r\n        }\r\n        // Default risk calculation\r\n        return 0;\r\n    }\r\n\r\n    private static int getTotalRisk(String firstValue, String middleValue, String lastValue) {\r\n        // Calculate the total risk based on the values of the first, middle, and last measurements\r\n        int firstRisk = getValue(firstValue);\r\n        int middleRisk = getValue(middleValue);\r\n        int lastRisk = getValue(lastValue);\r\n        return firstRisk + middleRisk + lastRisk;\r\n    }\r\n}\r\n```\r\n\r\nProject code: https://github.com/IshaanAdarsh/icu-alarm/tree/main\r\n\r\nI have verified my code, and I believe the logic for generating alerts is correct. Additionally, I have set up the Kafka source properly. \r\n\r\nWhat could be the reason behind this issue, and how can I troubleshoot it to ensure that the expected alerts are printed to the console?","title":"Flink job not printing expected output from Kafka Source","body":"<p>I am working on a Flink job that reads data from a Kafka source, processes it using CEP patterns, and prints alerts to the console. However, when I run the Flink job using the following command:</p>\n<pre class=\"lang-bash prettyprint-override\"><code>./bin/flink run /Users/spartacus/icu-alarm/target/flink-kafka-stroke-risk-1.0-SNAPSHOT-jar-with-dependencies.jar &gt; out.txt\n</code></pre>\n<p>I only see the following output in the <code>out.txt</code> file:</p>\n<pre><code>Job has been submitted with JobID 3811369c6f7f14d0eca0a66072550414\n</code></pre>\n<p>The expected behavior is that the Flink job should print alerts to the console like</p>\n<p><code>Stroke Risk Alert: Patient ID - XYZ, Risk Level - 5</code></p>\n<p>However, it seems that the alerts are not being printed.</p>\n<h3>Code:</h3>\n<pre><code>package hes.cs63.CEPMonitor;\n\nimport org.apache.flink.api.common.eventtime.WatermarkStrategy;\nimport org.apache.flink.api.common.serialization.SimpleStringSchema;\nimport org.apache.flink.cep.CEP;\nimport org.apache.flink.cep.pattern.Pattern;\nimport org.apache.flink.cep.PatternStream;\nimport org.apache.flink.cep.PatternSelectFunction;\nimport org.apache.flink.cep.pattern.conditions.SimpleCondition;\nimport org.apache.flink.streaming.api.datastream.DataStream;\nimport org.apache.flink.streaming.api.datastream.DataStreamSource;\nimport org.apache.flink.streaming.api.environment.StreamExecutionEnvironment;\nimport org.apache.flink.connector.kafka.source.KafkaSource;\nimport org.apache.flink.connector.kafka.source.reader.deserializer.KafkaRecordDeserializationSchema;\nimport org.apache.kafka.common.serialization.StringDeserializer;\n\nimport java.util.Arrays;\nimport java.util.List;\nimport java.util.Map;\nimport java.util.Properties;\n\npublic class StrokeRiskAlarm {\n    public static void main(String[] args) throws Exception {\n        StreamExecutionEnvironment env = StreamExecutionEnvironment.getExecutionEnvironment();\n\n        Properties properties = new Properties();\n        properties.setProperty(&quot;bootstrap.servers&quot;, &quot;localhost:9092&quot;);\n        properties.setProperty(&quot;group.id&quot;, &quot;test-consumer-group&quot;);\n\n        KafkaSource&lt;String&gt; source = KafkaSource.&lt;String&gt;builder()\n                .setBootstrapServers(&quot;localhost:9092&quot;)\n                .setGroupId(&quot;test-consumer-group&quot;)\n                .setTopics(Arrays.asList(&quot;geCEP&quot;))\n                .setDeserializer(KafkaRecordDeserializationSchema.valueOnly(StringDeserializer.class))\n                //.setStartingOffsets(OffsetsInitializer.earliest())\n                .setValueOnlyDeserializer(new SimpleStringSchema())\n                .build();\n\n        DataStreamSource&lt;String&gt; patientData = env.fromSource(source, WatermarkStrategy.noWatermarks(), &quot;Kafka Source&quot;);\n\n        // Use KafkaSource\n        Pattern&lt;String, ?&gt; highRiskPattern = Pattern.&lt;String&gt;begin(&quot;first&quot;)\n                .where(new SimpleCondition&lt;String&gt;() {\n                    @Override\n                    public boolean filter(String value) {\n                        return getValue(value) &gt; 3;\n                    }\n                });\n\n        PatternStream&lt;String&gt; patternStream = CEP.pattern(\n                patientData,\n                highRiskPattern\n        );\n\n        DataStream&lt;String&gt; strokeRiskAlerts = patternStream.select(new PatternSelectFunction&lt;String, String&gt;() {\n            @Override\n            public String select(Map&lt;String, List&lt;String&gt;&gt; pattern) throws Exception {\n                String userId = pattern.get(&quot;first&quot;).get(0).split(&quot;,&quot;)[0].trim();\n                int risk = getTotalRisk(pattern.get(&quot;first&quot;).get(0), pattern.get(&quot;middle&quot;).get(0), pattern.get(&quot;last&quot;).get(0));\n                return &quot;Stroke Risk Alert: Patient ID - &quot; + userId + &quot;, Risk Level - &quot; + risk;\n            }\n        });\n\n        strokeRiskAlerts.print();\n\n        env.execute(&quot;Stroke Risk Alert Job&quot;);\n    }\n\n    private static int getValue(String value) {\n        // Parse the input value and extract the relevant data for risk calculation\n        String[] parts = value.split(&quot;,&quot;);\n        String type = parts[2].trim();\n        double measurementValue = Double.parseDouble(parts[3].trim());\n\n        // Implement your logic to check high stroke risk for different measurements\n        if (type.equals(&quot;HR&quot;)) {\n            // HeartMeasurement risk calculation logic\n            int risk = 0;\n            risk += measurementValue &lt;= 50 ? 1 : 0;\n            risk += measurementValue &lt;= 40 ? 1 : 0;\n            risk += measurementValue &gt;= 91 ? 1 : 0;\n            risk += measurementValue &gt;= 110 ? 1 : 0;\n            risk += measurementValue &gt;= 131 ? 1 : 0;\n            return risk;\n        } else if (type.equals(&quot;SBP&quot;)) {\n            // BloodPressureMeasurement risk calculation logic\n            int risk = 0;\n            risk += measurementValue &lt;= 110 ? 1 : 0;\n            risk += measurementValue &lt;= 100 ? 1 : 0;\n            risk += measurementValue &lt;= 90 ? 1 : 0;\n            risk += measurementValue &gt;= 220 ? 3 : 0;\n            return risk;\n        } else if (type.equals(&quot;TEMP&quot;)) {\n            // TempMeasurement risk calculation logic\n            int risk = 0;\n            risk += measurementValue &lt;= 36 ? 1 : 0;\n            risk += measurementValue &lt;= 35 ? 2 : 0;\n            risk += measurementValue &gt;= 38.1 ? 1 : 0;\n            risk += measurementValue &gt;= 39.1 ? 1 : 0;\n            return risk;\n        }\n        // Default risk calculation\n        return 0;\n    }\n\n    private static int getTotalRisk(String firstValue, String middleValue, String lastValue) {\n        // Calculate the total risk based on the values of the first, middle, and last measurements\n        int firstRisk = getValue(firstValue);\n        int middleRisk = getValue(middleValue);\n        int lastRisk = getValue(lastValue);\n        return firstRisk + middleRisk + lastRisk;\n    }\n}\n</code></pre>\n<p>Project code: <a href=\"https://github.com/IshaanAdarsh/icu-alarm/tree/main\" rel=\"nofollow noreferrer\">https://github.com/IshaanAdarsh/icu-alarm/tree/main</a></p>\n<p>I have verified my code, and I believe the logic for generating alerts is correct. Additionally, I have set up the Kafka source properly.</p>\n<p>What could be the reason behind this issue, and how can I troubleshoot it to ensure that the expected alerts are printed to the console?</p>\n"},{"tags":["java","versioning","appdata"],"comments":[{"owner":{"account_id":17835,"reputation":303905,"user_id":40342,"accept_rate":62,"display_name":"Joachim Sauer"},"score":0,"creation_date":1588692712,"post_id":61616736,"comment_id":108993519,"body_markdown":"Java 1.1? As in &quot;The Java version released 23 years ago&quot;? Unless that project is purely for software archaeological reasons, run away from it quickly. This can **not** be a healthy work environment, if that is still a requirement. And if circumstances force you into continuing this work, chances are you&#39;re *way* better off working in a VM with a 32 bit version of Windows installed. And last but not least: given how rare Java 1.1 (rightfully) is these days, there&#39;s a good chance that your colleagues on that project know more than average internet people about  it.","body":"Java 1.1? As in &quot;The Java version released 23 years ago&quot;? Unless that project is purely for software archaeological reasons, run away from it quickly. This can <b>not</b> be a healthy work environment, if that is still a requirement. And if circumstances force you into continuing this work, chances are you&#39;re <i>way</i> better off working in a VM with a 32 bit version of Windows installed. And last but not least: given how rare Java 1.1 (rightfully) is these days, there&#39;s a good chance that your colleagues on that project know more than average internet people about  it."},{"owner":{"account_id":14826909,"reputation":135,"user_id":10707595,"display_name":"Indra Neel"},"score":1,"creation_date":1588692998,"post_id":61616736,"comment_id":108993682,"body_markdown":"Thanks for the reponse. Actually the main issue is i have a simulation environment (in java) where there are some .class files generating some random numbers.. when i try to run it on my 64 bit pc with jdk 1.8.0 it is giving results unsimilar to the mentioned results by the author of simulator.. the simulator was designed in 2009 . So i was just trying to run simulator on all jde versions so that i can stop at a version where i can get accurate results as mentioned by author","body":"Thanks for the reponse. Actually the main issue is i have a simulation environment (in java) where there are some .class files generating some random numbers.. when i try to run it on my 64 bit pc with jdk 1.8.0 it is giving results unsimilar to the mentioned results by the author of simulator.. the simulator was designed in 2009 . So i was just trying to run simulator on all jde versions so that i can stop at a version where i can get accurate results as mentioned by author"},{"owner":{"account_id":17835,"reputation":303905,"user_id":40342,"accept_rate":62,"display_name":"Joachim Sauer"},"score":0,"creation_date":1588693171,"post_id":61616736,"comment_id":108993777,"body_markdown":"Then the Virtual Machine Approach seems even more feasible, I&#39;m pretty sure that&#39;s easier then getting that ancient piece of software to run on a modern OS. Maybe skip 1.1 and check if 1.2 or 1.3 run it as expected.","body":"Then the Virtual Machine Approach seems even more feasible, I&#39;m pretty sure that&#39;s easier then getting that ancient piece of software to run on a modern OS. Maybe skip 1.1 and check if 1.2 or 1.3 run it as expected."},{"owner":{"account_id":3421244,"reputation":35883,"user_id":2868801,"display_name":"dave_thompson_085"},"score":0,"creation_date":1606924853,"post_id":61616736,"comment_id":115111812,"body_markdown":"In 2009 Java 6 was current and IIRC everything below 5 obsolete. And for at least the last free update of 6 (6u45 in 2013) both 32bit and 64bit install okay on Win64. because my oldest Windows test machine (still) has them.","body":"In 2009 Java 6 was current and IIRC everything below 5 obsolete. And for at least the last free update of 6 (6u45 in 2013) both 32bit and 64bit install okay on Win64. because my oldest Windows test machine (still) has them."}],"answers":[{"comments":[{"owner":{"account_id":3421244,"reputation":35883,"user_id":2868801,"display_name":"dave_thompson_085"},"score":0,"creation_date":1606925561,"post_id":65110078,"comment_id":115112178,"body_markdown":"Although wikipedia says Java 1.1 was in 1997, which was before even 2k or ME -- and before _any_ amd64/x86-64","body":"Although wikipedia says Java 1.1 was in 1997, which was before even 2k or ME -- and before <i>any</i> amd64/x86-64"}],"tags":[],"owner":{"account_id":125861,"reputation":2074,"user_id":321935,"accept_rate":86,"display_name":"SilverbackNet"},"comment_count":1,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1606919387,"creation_date":1606919387,"answer_id":65110078,"question_id":61616736,"body_markdown":"FWIW, this isn&#39;t due to AppData not being there; if it wasn&#39;t, your system would break in all kinds of weird ways. It&#39;s hidden and system, because messing with it can break it, but it&#39;s still there; you can change Explorer&#39;s settings if you really want to see it.\r\n\r\nThis error is because 16-bit software can&#39;t run on 64-bit Windows, and out of sheer inertia, the use of 16-bit installers continued all the way into the early 2000s. Windows x64 has workarounds for a few common ones, like Installshield and NSIS, but anything other than that will instantly fail.\r\n\r\nThere&#39;s really nothing you can or ideally should do other than installing it on a VM of an older system that it was meant to run on.","title":"How to install java 1.1 on 64-bit Windows with no folder called AppData?","body":"<p>FWIW, this isn't due to AppData not being there; if it wasn't, your system would break in all kinds of weird ways. It's hidden and system, because messing with it can break it, but it's still there; you can change Explorer's settings if you really want to see it.</p>\n<p>This error is because 16-bit software can't run on 64-bit Windows, and out of sheer inertia, the use of 16-bit installers continued all the way into the early 2000s. Windows x64 has workarounds for a few common ones, like Installshield and NSIS, but anything other than that will instantly fail.</p>\n<p>There's really nothing you can or ideally should do other than installing it on a VM of an older system that it was meant to run on.</p>\n"},{"tags":[],"owner":{"account_id":2182945,"reputation":1298,"user_id":1932017,"display_name":"YujiSoftware"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695179754,"creation_date":1695179754,"answer_id":77139083,"question_id":61616736,"body_markdown":"`APPDATA` is hidden directory.  \r\nIn Windows Explorer, enable the ”Hidden items&quot; checkbox under &quot;Show/Hide&quot; under the ”View” menu item.  \r\n\r\nAlternatively, you can display it using the following method. \r\n\r\n1. Press `Win + R` (opens the Run dialog).\r\n2. Type `%appdata%` \r\n3. Press OK button.\r\n\r\n\r\n[Windows AppData folder: Show and manage application data - IONOS](https://www.ionos.com/digitalguide/server/configuration/show-windows-appdata-folder/)","title":"How to install java 1.1 on 64-bit Windows with no folder called AppData?","body":"<p><code>APPDATA</code> is hidden directory.<br />\nIn Windows Explorer, enable the ”Hidden items&quot; checkbox under &quot;Show/Hide&quot; under the ”View” menu item.</p>\n<p>Alternatively, you can display it using the following method.</p>\n<ol>\n<li>Press <code>Win + R</code> (opens the Run dialog).</li>\n<li>Type <code>%appdata%</code></li>\n<li>Press OK button.</li>\n</ol>\n<p><a href=\"https://www.ionos.com/digitalguide/server/configuration/show-windows-appdata-folder/\" rel=\"nofollow noreferrer\">Windows AppData folder: Show and manage application data - IONOS</a></p>\n"}],"owner":{"account_id":14826909,"reputation":135,"user_id":10707595,"display_name":"Indra Neel"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":348,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1695179754,"creation_date":1588692286,"question_id":61616736,"body_markdown":"Recently i have been working with a project that requires Java 1.1 version. But whenever i try to run the \r\njdk-1_1_8_006-win.exe file , I have been receiving a message as shown below. \r\n\r\nImage showing error:\r\n\r\n ![Image showing error ][1]\r\n\r\nAfter clicking ok on that:\r\n\r\n ![After clicking ok on that ][2]\r\n\r\nI have seen one answer in stack overflow like\r\n\r\n&gt; Get the Java installer files.\r\n&gt; \r\n&gt; Execute jdk-1_1_8_010-windows-i586.exe When the error dialog is\r\n&gt; displayed, open C:\\USERS\\(User Name)\\APPDATA\\LOCAL\\TEMP\\~EXB0000 (Do\r\n&gt; not click the OK button at this time) Copy all files to another folder\r\n&gt; Click the ok button Download the tool and execute it.\r\n&gt; \r\n&gt; Download Is3Engine.zip (ReactOS&#39;s InstallSheild Engine 3.0) Extract\r\n&gt; Is3Engine.zip (containssetup.exe) Move setup32.exe to the copied Java\r\n&gt; installers Execute setup32.exe\r\n\r\nBut the issue here is I am unable to find an Folder called APPDATA in my PC.\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/3bEst.png\r\n  [2]: https://i.stack.imgur.com/xvwKF.png","title":"How to install java 1.1 on 64-bit Windows with no folder called AppData?","body":"<p>Recently i have been working with a project that requires Java 1.1 version. But whenever i try to run the \njdk-1_1_8_006-win.exe file , I have been receiving a message as shown below. </p>\n\n<p>Image showing error:</p>\n\n<p><img src=\"https://i.stack.imgur.com/3bEst.png\" alt=\"Image showing error \"></p>\n\n<p>After clicking ok on that:</p>\n\n<p><img src=\"https://i.stack.imgur.com/xvwKF.png\" alt=\"After clicking ok on that \"></p>\n\n<p>I have seen one answer in stack overflow like</p>\n\n<blockquote>\n  <p>Get the Java installer files.</p>\n  \n  <p>Execute jdk-1_1_8_010-windows-i586.exe When the error dialog is\n  displayed, open C:\\USERS(User Name)\\APPDATA\\LOCAL\\TEMP\\~EXB0000 (Do\n  not click the OK button at this time) Copy all files to another folder\n  Click the ok button Download the tool and execute it.</p>\n  \n  <p>Download Is3Engine.zip (ReactOS's InstallSheild Engine 3.0) Extract\n  Is3Engine.zip (containssetup.exe) Move setup32.exe to the copied Java\n  installers Execute setup32.exe</p>\n</blockquote>\n\n<p>But the issue here is I am unable to find an Folder called APPDATA in my PC.</p>\n"},{"tags":["java","mockito","completable-future"],"comments":[{"owner":{"account_id":1150892,"reputation":307,"user_id":1132638,"accept_rate":89,"display_name":"Md Faraz"},"score":0,"creation_date":1648651822,"post_id":53021545,"comment_id":126679691,"body_markdown":"Any solution to this usecase?","body":"Any solution to this usecase?"}],"answers":[{"tags":[],"owner":{"account_id":1529248,"reputation":92157,"user_id":1426891,"display_name":"Jeff Bowman"},"comment_count":0,"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1540763432,"creation_date":1540763432,"answer_id":53036404,"question_id":53021545,"body_markdown":"My first inclination is _not to mock this_: It looks like `startAsync` is a part of MyClassImplementRunner&#39;s public API, and that you should be testing these pieces together. In a test class like MyClassImplementRunnerTest, it makes sense to treat the system under test as MyClassImplementRunner without trying to split it up. Otherwise, it&#39;s very easy to lose track of _what you&#39;re testing_, including _what is real_ versus _what is a mock_.\r\n\r\nIf there is any _external_ condition that MyClassImplementRunner is looking for, you can mock that dependency, which would likely cause your CompletableFuture to return immediately; however, you&#39;ve only shown us a single String parameter.\r\n\r\nThat said, it&#39;s possible that `startAsync` contains logic that you&#39;d like to test exhaustively without a real MyClassImplementRunner. In that case, you could create an overload for testing, possibly with limited visibility or [test-only annotations](https://google.github.io/guava/releases/23.0/api/docs/com/google/common/annotations/VisibleForTesting.html) to indicate that it shouldn&#39;t be called in production.\r\n\r\n    public static CompletableFuture&lt;Void&gt; startAsync(String param1) {\r\n      return startAsync(new MyClassImplementRunner(param1);\r\n    }\r\n\r\n    /** Package-private, for a test class in the same package. */\r\n    @VisibleForTesting static CompletableFuture&lt;Void&gt; startAsync(Runnable task) {\r\n\r\n      return CompletableFuture.runAsync(task).whenComplete(\r\n          (response, throwable) -&gt; {\r\n            //some code when complete\r\n        });\r\n    }\r\n\r\nBy splitting this up, you can now run `startAsync(new Runnable())` in tests to simulate an instantly-succeeding task, and run `startAsync(() -&gt; { throw new RuntimeException(); })` to simulate an instantly-failing task. This allows you to test `startAsync` independently from MyClassImplementRunner.\r\n\r\nIt may not seem wise to refactor for testing or to introduce test-only methods, and this is a fair assessment: Purely speaking, MyClassImplementRunner _should_ be tested exactly as consumers would run it, without mocking. However, if you&#39;re saying it is much more convenient in tests to run with a different Runnable than MyClassImplementRunner, you are in control of the code and you can prepare for this by including the appropriate flexiblity (&quot;testing seam&quot;) in the code you control. In fact, if `startAsync` is a separate-enough method that it can take an arbitrary Runnable, you may choose to separate it out to be a separate method with separate testing.","title":"How to mock completion of a CompletableFuture in Mockito","body":"<p>My first inclination is <em>not to mock this</em>: It looks like <code>startAsync</code> is a part of MyClassImplementRunner's public API, and that you should be testing these pieces together. In a test class like MyClassImplementRunnerTest, it makes sense to treat the system under test as MyClassImplementRunner without trying to split it up. Otherwise, it's very easy to lose track of <em>what you're testing</em>, including <em>what is real</em> versus <em>what is a mock</em>.</p>\n\n<p>If there is any <em>external</em> condition that MyClassImplementRunner is looking for, you can mock that dependency, which would likely cause your CompletableFuture to return immediately; however, you've only shown us a single String parameter.</p>\n\n<p>That said, it's possible that <code>startAsync</code> contains logic that you'd like to test exhaustively without a real MyClassImplementRunner. In that case, you could create an overload for testing, possibly with limited visibility or <a href=\"https://google.github.io/guava/releases/23.0/api/docs/com/google/common/annotations/VisibleForTesting.html\" rel=\"nofollow noreferrer\">test-only annotations</a> to indicate that it shouldn't be called in production.</p>\n\n<pre><code>public static CompletableFuture&lt;Void&gt; startAsync(String param1) {\n  return startAsync(new MyClassImplementRunner(param1);\n}\n\n/** Package-private, for a test class in the same package. */\n@VisibleForTesting static CompletableFuture&lt;Void&gt; startAsync(Runnable task) {\n\n  return CompletableFuture.runAsync(task).whenComplete(\n      (response, throwable) -&gt; {\n        //some code when complete\n    });\n}\n</code></pre>\n\n<p>By splitting this up, you can now run <code>startAsync(new Runnable())</code> in tests to simulate an instantly-succeeding task, and run <code>startAsync(() -&gt; { throw new RuntimeException(); })</code> to simulate an instantly-failing task. This allows you to test <code>startAsync</code> independently from MyClassImplementRunner.</p>\n\n<p>It may not seem wise to refactor for testing or to introduce test-only methods, and this is a fair assessment: Purely speaking, MyClassImplementRunner <em>should</em> be tested exactly as consumers would run it, without mocking. However, if you're saying it is much more convenient in tests to run with a different Runnable than MyClassImplementRunner, you are in control of the code and you can prepare for this by including the appropriate flexiblity (\"testing seam\") in the code you control. In fact, if <code>startAsync</code> is a separate-enough method that it can take an arbitrary Runnable, you may choose to separate it out to be a separate method with separate testing.</p>\n"},{"tags":[],"owner":{"account_id":5452973,"reputation":4172,"user_id":4337243,"accept_rate":89,"display_name":"Ilya Zinkovich"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1540986995,"creation_date":1540986995,"answer_id":53082798,"question_id":53021545,"body_markdown":"Extract the code you execute in `whenComplete` to a field and provide a constructor to replace it.\r\n\r\n    class Runner implement Runnable {\r\n      \r\n      private final String param;\r\n      private final BiConsumer&lt;Void, Throwable&gt; callback;\r\n      \r\n      public Runner(String param) {\r\n        this.param = param;\r\n        this.callback = this::callbackFunction;\r\n      }\r\n\r\n      Runner(String param, BiConsumer&lt;Void, Throwable&gt; callback) {\r\n        this.param = param;\r\n        this.callback = callback;\r\n      }\r\n\r\n      public void run() {\r\n        CompletableFuture.runAsync(task).whenComplete(callback);\r\n      }\r\n\r\n      private void callbackFunction(Void result, Throwable throwable) {\r\n        //some code when complete\r\n      }\r\n    }\r\n\r\nThe test will look as follows:\r\n\r\n    class RunnerTest {\r\n      \r\n      @Test\r\n      void test() {\r\n        new Runner(&quot;param&quot;, (response, throwable) -&gt; /* mocked behavior */).run();\r\n      }\r\n    }","title":"How to mock completion of a CompletableFuture in Mockito","body":"<p>Extract the code you execute in <code>whenComplete</code> to a field and provide a constructor to replace it.</p>\n\n<pre><code>class Runner implement Runnable {\n\n  private final String param;\n  private final BiConsumer&lt;Void, Throwable&gt; callback;\n\n  public Runner(String param) {\n    this.param = param;\n    this.callback = this::callbackFunction;\n  }\n\n  Runner(String param, BiConsumer&lt;Void, Throwable&gt; callback) {\n    this.param = param;\n    this.callback = callback;\n  }\n\n  public void run() {\n    CompletableFuture.runAsync(task).whenComplete(callback);\n  }\n\n  private void callbackFunction(Void result, Throwable throwable) {\n    //some code when complete\n  }\n}\n</code></pre>\n\n<p>The test will look as follows:</p>\n\n<pre><code>class RunnerTest {\n\n  @Test\n  void test() {\n    new Runner(\"param\", (response, throwable) -&gt; /* mocked behavior */).run();\n  }\n}\n</code></pre>\n"}],"owner":{"account_id":9893853,"reputation":139,"user_id":7326039,"display_name":"newUser"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":17578,"favorite_count":0,"down_vote_count":0,"up_vote_count":7,"answer_count":2,"score":7,"last_activity_date":1695179336,"creation_date":1540640487,"question_id":53021545,"body_markdown":"I want to mock that some code is being called when a `CompletableFuture` has completed successfully.\r\n\r\nI have this class:\r\n\r\n    public class MyClassImplementRunner implements Runnable {\r\n    \r\n        private final String param1;\r\n    \r\n        public MyClassImplementRunner(String param1) {\r\n            this.param1 = param1;\r\n        }\r\n    \r\n        public static CompletableFuture&lt;Void&gt; startAsync(String param1) {\r\n    \r\n            return CompletableFuture.runAsync(\r\n                new MyClassImplementRunner(param1)).whenComplete(\r\n                (response, throwable) -&gt; {\r\n                    //some code when complete\r\n                });\r\n    \r\n            @Override\r\n            public void run () {\r\n                //the runnable code\r\n            }\r\n        }\r\n    }\r\n\r\nIn my Junit (using Mockito and Java 8), I need to mock that&lt;br&gt;\r\n\r\n    //some code when complete \r\nis called when Future is completed successfully.\r\n\r\nCould you provide some indications on how to achieve this?","title":"How to mock completion of a CompletableFuture in Mockito","body":"<p>I want to mock that some code is being called when a <code>CompletableFuture</code> has completed successfully.</p>\n\n<p>I have this class:</p>\n\n<pre><code>public class MyClassImplementRunner implements Runnable {\n\n    private final String param1;\n\n    public MyClassImplementRunner(String param1) {\n        this.param1 = param1;\n    }\n\n    public static CompletableFuture&lt;Void&gt; startAsync(String param1) {\n\n        return CompletableFuture.runAsync(\n            new MyClassImplementRunner(param1)).whenComplete(\n            (response, throwable) -&gt; {\n                //some code when complete\n            });\n\n        @Override\n        public void run () {\n            //the runnable code\n        }\n    }\n}\n</code></pre>\n\n<p>In my Junit (using Mockito and Java 8), I need to mock that<br></p>\n\n<pre><code>//some code when complete \n</code></pre>\n\n<p>is called when Future is completed successfully.</p>\n\n<p>Could you provide some indications on how to achieve this?</p>\n"},{"tags":["java","arrays","matrix"],"comments":[{"owner":{"account_id":16878,"reputation":306143,"user_id":37213,"accept_rate":81,"display_name":"duffymo"},"score":0,"creation_date":1448814467,"post_id":33985028,"comment_id":55725558,"body_markdown":"Clueless isn&#39;t a good start.  Determinant and cofactor of a matrix ought to be known to you.  If you can calculate those for a matrix, then you can do it for the product of two matricies.","body":"Clueless isn&#39;t a good start.  Determinant and cofactor of a matrix ought to be known to you.  If you can calculate those for a matrix, then you can do it for the product of two matricies."}],"answers":[{"tags":[],"owner":{"account_id":7177695,"reputation":1709,"user_id":5482966,"accept_rate":93,"display_name":"Mathews Mathai"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1448815476,"creation_date":1448815476,"answer_id":33985242,"question_id":33985028,"body_markdown":"Well,a 3*3 matrix has 3 columns and 3 rows to begin with.\r\nEach starts with an index 0.\r\n\r\nDeterminant can be calculated as:\r\n\r\n    int d=determinant();\r\n    int determinant()\r\n    {\r\n      int x=a[0][0]*((a[1][1]*a[2][2])-(a[2][1]*a[1][2]));\r\n       int y=-a[0][1]*((a[0][1]*a[2][2])-(a[2][0]*a[1][2]));\r\n     int z=a[0][2]*((a[1][0]*a[2][1])-(a[1][1]*a[2][0]));\r\n    \r\n        int r=x+y+z;\r\n        return r;\r\n        }\r\n\r\nThis is only for finding the determinant of a 3*3 matrix.\r\n","title":"finding cofactor and determinant of a 3x3 matrix (java)","body":"<p>Well,a 3*3 matrix has 3 columns and 3 rows to begin with.\nEach starts with an index 0.</p>\n\n<p>Determinant can be calculated as:</p>\n\n<pre><code>int d=determinant();\nint determinant()\n{\n  int x=a[0][0]*((a[1][1]*a[2][2])-(a[2][1]*a[1][2]));\n   int y=-a[0][1]*((a[0][1]*a[2][2])-(a[2][0]*a[1][2]));\n int z=a[0][2]*((a[1][0]*a[2][1])-(a[1][1]*a[2][0]));\n\n    int r=x+y+z;\n    return r;\n    }\n</code></pre>\n\n<p>This is only for finding the determinant of a 3*3 matrix.</p>\n"},{"comments":[{"owner":{"account_id":27699053,"reputation":2348,"user_id":21144042,"display_name":"Diego Borba"},"score":1,"creation_date":1695297281,"post_id":77139059,"comment_id":136007307,"body_markdown":"Your answer could be improved with additional supporting information. Please [edit] to add further details, such as citations or documentation, so that others can confirm that your answer is correct. You can find more information on how to write good answers [in the help center](/help/how-to-answer).","body":"Your answer could be improved with additional supporting information. Please <a href=\"https://stackoverflow.com/posts/77139059/edit\">edit</a> to add further details, such as citations or documentation, so that others can confirm that your answer is correct. You can find more information on how to write good answers <a href=\"/help/how-to-answer\">in the help center</a>."}],"tags":[],"owner":{"account_id":29487215,"reputation":1,"user_id":22596858,"display_name":"Andrea Madureira"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695179247,"creation_date":1695179247,"answer_id":77139059,"question_id":33985028,"body_markdown":"public int getDeterminante() {\r\n\r\n\t\tint x = ((matriz[0][0] * matriz[1][1] * matriz[2][2]) + (matriz[0][1] * matriz[1][2] * matriz[2][0]) + (matriz[0][2] * matriz[1][0] * matriz[2][1]));\r\n\t\tint y = ((matriz[0][2] * matriz[1][1] * matriz[2][0]) + (matriz[0][0] * matriz[1][2] * matriz[2][1]) + (matriz[0][1] * matriz[1][0] * matriz[2][2]));\r\n\t\t\r\n\r\n\t\tint r = x - y ;\r\n\t\treturn r;\r\n\r\n\t}","title":"finding cofactor and determinant of a 3x3 matrix (java)","body":"<p>public int getDeterminante() {</p>\n<pre><code>    int x = ((matriz[0][0] * matriz[1][1] * matriz[2][2]) + (matriz[0][1] * matriz[1][2] * matriz[2][0]) + (matriz[0][2] * matriz[1][0] * matriz[2][1]));\n    int y = ((matriz[0][2] * matriz[1][1] * matriz[2][0]) + (matriz[0][0] * matriz[1][2] * matriz[2][1]) + (matriz[0][1] * matriz[1][0] * matriz[2][2]));\n    \n\n    int r = x - y ;\n    return r;\n\n}\n</code></pre>\n"}],"owner":{"account_id":7379266,"reputation":11,"user_id":5616602,"display_name":"aSad"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2758,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"accepted_answer_id":33985242,"answer_count":2,"score":0,"last_activity_date":1695179247,"creation_date":1448814248,"question_id":33985028,"body_markdown":"I computed the product, sum, and transpose(of product), but I have no clue where to start on the cofactor and determinent of the product matrix.\r\n\r\nIve seen a couple examples but none that resemble my particular code so if anyone could show me how i could incorporate these two methods into my program  I&#39;d high appreciate it.\r\n\r\nplease dont ask me what i&#39;ve tried because as I stated I am clueless at the moment\r\n\r\n    //here is the code I wrote for the product:\r\n    \r\n    package programEx;\r\n    import java.io.*;\r\n    import java.util.*;\r\n    import java.io.File.*;\r\n    import java.util.Scanner;\r\n    \r\n    public class progEx {\r\n    \r\n        public static void main(String[] args) {\r\n        //Establishing Input Stream\r\n           Scanner s = new Scanner(System.in);\r\n           System.out.print(&quot;Enter number of rows in A: &quot;);\r\n           int rowsInA = s.nextInt();\r\n           System.out.print(&quot;Enter number of columns in A / rows in B: &quot;);\r\n           int columnsInA = s.nextInt();\r\n           System.out.print(&quot;Enter number of columns in B: &quot;);\r\n           int columnsInB = s.nextInt();\r\n    \r\n           int[][] a = new int[rowsInA][columnsInA];\r\n           int[][] b = new int[columnsInA][columnsInB];\r\n    \r\n     //Taking user input for 1st matrix\r\n           System.out.println(&quot;Enter matrix A&quot;);\r\n           for (int i = 0; i &lt; a.length; i++) {\r\n               for (int j = 0; j &lt; a[0].length; j++) {\r\n                   a[i][j] = s.nextInt();\r\n               }\r\n           }\r\n     //Taking user input for 2nd matrix\r\n           System.out.println(&quot;Enter matrix B&quot;);\r\n           for (int i = 0; i &lt; b.length; i++) {\r\n               for (int j = 0; j &lt; b[0].length; j++) {\r\n                   b[i][j] = s.nextInt();\r\n               }\r\n           }\r\n    \r\n     //calling the multiplication method and passing it to both matrices\r\n           int[][] c = multiply(a, b);\r\n           System.out.println(&quot;Product of A and B is&quot;);\r\n           for (int i = 0; i &lt; c.length; i++) {\r\n               for (int j = 0; j &lt; c[0].length; j++) {\r\n                   System.out.print(c[i][j] + &quot; &quot;);\r\n    \r\n               } \r\n               System.out.println();\r\n           } \r\n    \r\n      }\r\n    \r\n    //Separate method for the multiplication of 1st and 2nd matrices\r\n       public static int[][] multiply(int[][] a, int[][] b) {\r\n           int rowsInA = a.length;\r\n           int columnsInA = a[0].length; \r\n           int columnsInB = b[0].length;\r\n           int[][] c = new int[rowsInA][columnsInB];\r\n           for (int i = 0; i &lt; rowsInA; i++) {\r\n               for (int j = 0; j &lt; columnsInB; j++) {\r\n                   for (int k = 0; k &lt; columnsInA; k++) {\r\n                       c[i][j] = c[i][j] + a[i][k] * b[k][j];\r\n                   }\r\n               }\r\n           }\r\n           return c;\r\n       }\r\n    }","title":"finding cofactor and determinant of a 3x3 matrix (java)","body":"<p>I computed the product, sum, and transpose(of product), but I have no clue where to start on the cofactor and determinent of the product matrix.</p>\n\n<p>Ive seen a couple examples but none that resemble my particular code so if anyone could show me how i could incorporate these two methods into my program  I'd high appreciate it.</p>\n\n<p>please dont ask me what i've tried because as I stated I am clueless at the moment</p>\n\n<pre><code>//here is the code I wrote for the product:\n\npackage programEx;\nimport java.io.*;\nimport java.util.*;\nimport java.io.File.*;\nimport java.util.Scanner;\n\npublic class progEx {\n\n    public static void main(String[] args) {\n    //Establishing Input Stream\n       Scanner s = new Scanner(System.in);\n       System.out.print(\"Enter number of rows in A: \");\n       int rowsInA = s.nextInt();\n       System.out.print(\"Enter number of columns in A / rows in B: \");\n       int columnsInA = s.nextInt();\n       System.out.print(\"Enter number of columns in B: \");\n       int columnsInB = s.nextInt();\n\n       int[][] a = new int[rowsInA][columnsInA];\n       int[][] b = new int[columnsInA][columnsInB];\n\n //Taking user input for 1st matrix\n       System.out.println(\"Enter matrix A\");\n       for (int i = 0; i &lt; a.length; i++) {\n           for (int j = 0; j &lt; a[0].length; j++) {\n               a[i][j] = s.nextInt();\n           }\n       }\n //Taking user input for 2nd matrix\n       System.out.println(\"Enter matrix B\");\n       for (int i = 0; i &lt; b.length; i++) {\n           for (int j = 0; j &lt; b[0].length; j++) {\n               b[i][j] = s.nextInt();\n           }\n       }\n\n //calling the multiplication method and passing it to both matrices\n       int[][] c = multiply(a, b);\n       System.out.println(\"Product of A and B is\");\n       for (int i = 0; i &lt; c.length; i++) {\n           for (int j = 0; j &lt; c[0].length; j++) {\n               System.out.print(c[i][j] + \" \");\n\n           } \n           System.out.println();\n       } \n\n  }\n\n//Separate method for the multiplication of 1st and 2nd matrices\n   public static int[][] multiply(int[][] a, int[][] b) {\n       int rowsInA = a.length;\n       int columnsInA = a[0].length; \n       int columnsInB = b[0].length;\n       int[][] c = new int[rowsInA][columnsInB];\n       for (int i = 0; i &lt; rowsInA; i++) {\n           for (int j = 0; j &lt; columnsInB; j++) {\n               for (int k = 0; k &lt; columnsInA; k++) {\n                   c[i][j] = c[i][j] + a[i][k] * b[k][j];\n               }\n           }\n       }\n       return c;\n   }\n}\n</code></pre>\n"},{"tags":["java","macos","java-17"],"comments":[{"owner":{"account_id":1939636,"reputation":28467,"user_id":1746118,"accept_rate":95,"display_name":"Naman"},"score":0,"creation_date":1542295226,"post_id":52524112,"comment_id":93525409,"body_markdown":"Just asking, can we keep the question tags restricted to a single version? Since there is no such version-specific installation script/steps anyway. This is a general(non-version specific) question and can suffice to be tagged with only [tag:Java-11], since I assume that is the place where people would start looking out for what the question and answer suggests.","body":"Just asking, can we keep the question tags restricted to a single version? Since there is no such version-specific installation script/steps anyway. This is a general(non-version specific) question and can suffice to be tagged with only <a href=\"https://stackoverflow.com/questions/tagged/java-11\">java-11</a>, since I assume that is the place where people would start looking out for what the question and answer suggests."},{"owner":{"account_id":4528511,"reputation":85092,"user_id":3679676,"accept_rate":100,"display_name":"Jayson Minard"},"score":0,"creation_date":1553087477,"post_id":52524112,"comment_id":97254440,"body_markdown":"Scripts in the answers do include specific versions even though it is easy to interpret them for other versions.  But, it is also part of what community members search for, so it is good to help them find the correct answers quickly by helping to bring attention to updated and modern answers and differentiate from old outdated version 6 and version 8 topics.  Having the latest stable version and latest new version I think are reasonable tags to keep.","body":"Scripts in the answers do include specific versions even though it is easy to interpret them for other versions.  But, it is also part of what community members search for, so it is good to help them find the correct answers quickly by helping to bring attention to updated and modern answers and differentiate from old outdated version 6 and version 8 topics.  Having the latest stable version and latest new version I think are reasonable tags to keep."},{"owner":{"account_id":170897,"reputation":1391,"user_id":397940,"accept_rate":66,"display_name":"panza"},"score":0,"creation_date":1587937239,"post_id":52524112,"comment_id":108700102,"body_markdown":"I would probably recommend to use [jenv](https://github.com/jenv/jenv) to manage multiple Java versions.","body":"I would probably recommend to use <a href=\"https://github.com/jenv/jenv\" rel=\"nofollow noreferrer\">jenv</a> to manage multiple Java versions."}],"answers":[{"comments":[{"owner":{"account_id":82504,"reputation":6723,"user_id":231929,"accept_rate":88,"display_name":"Peter Hull"},"score":3,"creation_date":1538036412,"post_id":52524114,"comment_id":92004256,"body_markdown":"For manual install I think you need to set `JAVA_HOME` in order to select a specific version, something like `export JAVA_HOME=$(/usr/libexec/java_home -v &lt;version&gt;)` in your `.bash_profile`","body":"For manual install I think you need to set <code>JAVA_HOME</code> in order to select a specific version, something like <code>export JAVA_HOME=$(&#47;usr&#47;libexec&#47;java_home -v &lt;version&gt;)</code> in your <code>.bash_profile</code>"},{"owner":{"account_id":4528511,"reputation":85092,"user_id":3679676,"accept_rate":100,"display_name":"Jayson Minard"},"score":0,"creation_date":1538203161,"post_id":52524114,"comment_id":92069204,"body_markdown":"@PeterHull some of the Java version managers do not like having `JAVA_HOME` set manually and they manage it themselves.  JEnv for sure will not adjust it if previously set, not sure about Jabba and SDKMAN but they normally will manage that setting.  Only a manual install with NO version switching should ever set this value directly.","body":"@PeterHull some of the Java version managers do not like having <code>JAVA_HOME</code> set manually and they manage it themselves.  JEnv for sure will not adjust it if previously set, not sure about Jabba and SDKMAN but they normally will manage that setting.  Only a manual install with NO version switching should ever set this value directly."},{"owner":{"account_id":82504,"reputation":6723,"user_id":231929,"accept_rate":88,"display_name":"Peter Hull"},"score":0,"creation_date":1538329938,"post_id":52524114,"comment_id":92096289,"body_markdown":"quite agree, it would be good if you could note that in your answer as the original question asked for version switching and setting JAVA_HOME is the (only?) way to do it for the manual install method.","body":"quite agree, it would be good if you could note that in your answer as the original question asked for version switching and setting JAVA_HOME is the (only?) way to do it for the manual install method."},{"owner":{"account_id":4528511,"reputation":85092,"user_id":3679676,"accept_rate":100,"display_name":"Jayson Minard"},"score":0,"creation_date":1538366344,"post_id":52524114,"comment_id":92103647,"body_markdown":"I&#39;m worried about adding it @PeterHull because if people set it then do the other methods, some fail to work once `JAVA_HOME` is manually set.  I added notes about it and your comment is right there, I&#39;ll think on it.","body":"I&#39;m worried about adding it @PeterHull because if people set it then do the other methods, some fail to work once <code>JAVA_HOME</code> is manually set.  I added notes about it and your comment is right there, I&#39;ll think on it."},{"owner":{"account_id":3469388,"reputation":1297,"user_id":2904188,"display_name":"Alpha Huang"},"score":2,"creation_date":1538674225,"post_id":52524114,"comment_id":92236515,"body_markdown":"Java in brew cask changed to OpenJDK 11 yesterday, Oct 3, 2018.","body":"Java in brew cask changed to OpenJDK 11 yesterday, Oct 3, 2018."},{"owner":{"account_id":175930,"reputation":2593,"user_id":406290,"accept_rate":43,"display_name":"Kevin Hooke"},"score":41,"creation_date":1540064687,"post_id":52524114,"comment_id":92729647,"body_markdown":"Possibly the most extensive and useful answer to running different JDKs on MacOS covering many different approaches, some I&#39;d never come across before.","body":"Possibly the most extensive and useful answer to running different JDKs on MacOS covering many different approaches, some I&#39;d never come across before."},{"owner":{"account_id":13958,"reputation":1672,"user_id":28312,"display_name":"Flash Sheridan"},"score":0,"creation_date":1559600512,"post_id":52524114,"comment_id":99464684,"body_markdown":"Your Homebrew instruction for Java11 now seems obsolete:  `brew cask install java11`\n“Error: Cask &#39;java11&#39; is unavailable: No Cask with this name exists.”","body":"Your Homebrew instruction for Java11 now seems obsolete:  <code>brew cask install java11</code> “Error: Cask &#39;java11&#39; is unavailable: No Cask with this name exists.”"},{"owner":{"account_id":4528511,"reputation":85092,"user_id":3679676,"accept_rate":100,"display_name":"Jayson Minard"},"score":0,"creation_date":1559662379,"post_id":52524114,"comment_id":99487591,"body_markdown":"@FlashSheridan repeat step #2 above if you haven&#39;t lately, then you should see the alternative Java versions again","body":"@FlashSheridan repeat step #2 above if you haven&#39;t lately, then you should see the alternative Java versions again"},{"owner":{"account_id":4528511,"reputation":85092,"user_id":3679676,"accept_rate":100,"display_name":"Jayson Minard"},"score":0,"creation_date":1559662657,"post_id":52524114,"comment_id":99487740,"body_markdown":"I updated the steps in the answer to note that you might need to run step #2 again if you are out of date, or use the fully qualified version in a later step (example provided).","body":"I updated the steps in the answer to note that you might need to run step #2 again if you are out of date, or use the fully qualified version in a later step (example provided)."},{"owner":{"account_id":8235,"reputation":87020,"user_id":14731,"accept_rate":89,"display_name":"Gili"},"score":0,"creation_date":1560978815,"post_id":52524114,"comment_id":99919056,"body_markdown":"The introduction sentence mentions the availability of early access builds but does not explain how to get them. Care to elaborte?","body":"The introduction sentence mentions the availability of early access builds but does not explain how to get them. Care to elaborte?"},{"owner":{"account_id":9438226,"reputation":759,"user_id":7019580,"display_name":"Vitalii Dmitriev"},"score":0,"creation_date":1561029153,"post_id":52524114,"comment_id":99935008,"body_markdown":"Can&#39;t install java8 using cask now, only java11 and java6 are available: Error: Cask &#39;java8&#39; is unavailable: No Cask with this name exists.","body":"Can&#39;t install java8 using cask now, only java11 and java6 are available: Error: Cask &#39;java8&#39; is unavailable: No Cask with this name exists."},{"owner":{"account_id":4528511,"reputation":85092,"user_id":3679676,"accept_rate":100,"display_name":"Jayson Minard"},"score":1,"creation_date":1561044402,"post_id":52524114,"comment_id":99943994,"body_markdown":"@VitaliiDmitriev the casks change over time.  You can install adoptopenjdk versions by tapping `brew tap adoptopenjdk/openjdk` and then `brew search jdk` to see the versions.  There are other taps out there maybe, but hombrew removed some Java versions from their default casks.","body":"@VitaliiDmitriev the casks change over time.  You can install adoptopenjdk versions by tapping <code>brew tap adoptopenjdk&#47;openjdk</code> and then <code>brew search jdk</code> to see the versions.  There are other taps out there maybe, but hombrew removed some Java versions from their default casks."},{"owner":{"account_id":4528511,"reputation":85092,"user_id":3679676,"accept_rate":100,"display_name":"Jayson Minard"},"score":0,"creation_date":1561044761,"post_id":52524114,"comment_id":99944214,"body_markdown":"I have added a bit more information for the homebrew install including adding the tap for AdoptOpenJDK","body":"I have added a bit more information for the homebrew install including adding the tap for AdoptOpenJDK"},{"owner":{"account_id":1281080,"reputation":1101,"user_id":1235165,"display_name":"hmijail"},"score":2,"creation_date":1573449836,"post_id":52524114,"comment_id":103872904,"body_markdown":"For those thinking about using `sdkman` to install JDKs + `jenv` to switch among them: you&#39;ll need to know that the JAVA_HOME equivalent for sdkman installations is ~/.sdkman/candidates/java/&lt;identifier&gt; . But anyway if you can stay with brew instead of sdkman, it&#39;s easier.","body":"For those thinking about using <code>sdkman</code> to install JDKs + <code>jenv</code> to switch among them: you&#39;ll need to know that the JAVA_HOME equivalent for sdkman installations is ~/.sdkman/candidates/java/&lt;identifier&gt; . But anyway if you can stay with brew instead of sdkman, it&#39;s easier."},{"owner":{"account_id":4528511,"reputation":85092,"user_id":3679676,"accept_rate":100,"display_name":"Jayson Minard"},"score":0,"creation_date":1573500237,"post_id":52524114,"comment_id":103894419,"body_markdown":"@hmijail if using sdkman why use jenv at all, sdkman can already switch the JDK.","body":"@hmijail if using sdkman why use jenv at all, sdkman can already switch the JDK."},{"owner":{"account_id":1281080,"reputation":1101,"user_id":1235165,"display_name":"hmijail"},"score":0,"creation_date":1573524784,"post_id":52524114,"comment_id":103901409,"body_markdown":"@JaysonMinard if you only need to switch the global JDK, then sdkman is enough. But jenv allows more flexibility, like setting a shell-specific or directory-specific JDK, which for me is necessary.","body":"@JaysonMinard if you only need to switch the global JDK, then sdkman is enough. But jenv allows more flexibility, like setting a shell-specific or directory-specific JDK, which for me is necessary."},{"owner":{"account_id":5268785,"reputation":590,"user_id":6908061,"display_name":"bomben"},"score":1,"creation_date":1577811034,"post_id":52524114,"comment_id":105262209,"body_markdown":"Is it possible to set a certain java version for certain programs on a mac a bit like in this discussion? https://community.ui.com/questions/Running-Unifi-Controller-on-Java-9-10-and-11/f1ac1330-40b8-4af6-83b6-8d55e48e4a32","body":"Is it possible to set a certain java version for certain programs on a mac a bit like in this discussion? <a href=\"https://community.ui.com/questions/Running-Unifi-Controller-on-Java-9-10-and-11/f1ac1330-40b8-4af6-83b6-8d55e48e4a32\" rel=\"nofollow noreferrer\">community.ui.com/questions/&hellip;</a>"},{"owner":{"account_id":18687,"reputation":1624,"user_id":43046,"accept_rate":65,"display_name":"andresp"},"score":1,"creation_date":1591292206,"post_id":52524114,"comment_id":110008094,"body_markdown":"The problem with the sdkman installation is that sdkman uses a different directory and no Info.plist for the JVM, so `/usr/libexec/java_home` isn&#39;t aware of them.","body":"The problem with the sdkman installation is that sdkman uses a different directory and no Info.plist for the JVM, so <code>&#47;usr&#47;libexec&#47;java_home</code> isn&#39;t aware of them."},{"owner":{"account_id":938093,"reputation":2857,"user_id":966656,"accept_rate":82,"display_name":"Andrew S"},"score":0,"creation_date":1618175586,"post_id":52524114,"comment_id":118516571,"body_markdown":"Please improve the &#39;Install manually from OpenJDK download page&#39; section and provide more detail including how to set up environment variables etc, so that MacOS does not point to the default Java installation that came with that OS version.","body":"Please improve the &#39;Install manually from OpenJDK download page&#39; section and provide more detail including how to set up environment variables etc, so that MacOS does not point to the default Java installation that came with that OS version."},{"owner":{"account_id":4528511,"reputation":85092,"user_id":3679676,"accept_rate":100,"display_name":"Jayson Minard"},"score":1,"creation_date":1618549878,"post_id":52524114,"comment_id":118639628,"body_markdown":"@AndrewS you are allowed to suggest edits directly.","body":"@AndrewS you are allowed to suggest edits directly."},{"owner":{"account_id":938093,"reputation":2857,"user_id":966656,"accept_rate":82,"display_name":"Andrew S"},"score":0,"creation_date":1618592197,"post_id":52524114,"comment_id":118657334,"body_markdown":"@Jason, I came here because I did not know and felt this was a weakness in the document you could improve.","body":"@Jason, I came here because I did not know and felt this was a weakness in the document you could improve."},{"owner":{"account_id":11146078,"reputation":511,"user_id":8180772,"display_name":"TimBigDev"},"score":0,"creation_date":1645397005,"post_id":52524114,"comment_id":125854444,"body_markdown":"I used SDKMAN and found it useful that it could install and manage already installed Java versions.","body":"I used SDKMAN and found it useful that it could install and manage already installed Java versions."},{"owner":{"account_id":2611379,"reputation":404,"user_id":2261423,"display_name":"tsr"},"score":0,"creation_date":1648454563,"post_id":52524114,"comment_id":126618743,"body_markdown":"I was using SDKMAN which worked fine most of the time but recently hit a problem with building Kotlin Multiplatform directly in XCode. While it was working from android studio the  build phase script in XCode recognised only java installed in the system listed under `/usr/libexec/java_home -V`. I followed JEnv installation and with this one it works.","body":"I was using SDKMAN which worked fine most of the time but recently hit a problem with building Kotlin Multiplatform directly in XCode. While it was working from android studio the  build phase script in XCode recognised only java installed in the system listed under <code>&#47;usr&#47;libexec&#47;java_home -V</code>. I followed JEnv installation and with this one it works."}],"tags":[],"owner":{"account_id":4528511,"reputation":85092,"user_id":3679676,"accept_rate":100,"display_name":"Jayson Minard"},"comment_count":23,"down_vote_count":2,"up_vote_count":1160,"is_accepted":true,"score":1158,"last_activity_date":1695178901,"creation_date":1537986750,"answer_id":52524114,"question_id":52524112,"body_markdown":"**Note:** *These solutions work for various versions of Java including Java 8 through Java 21 (the LTS version).  This includes alternative JDK&#39;s from OpenJDK, Oracle, IBM, Azul, Amazon Correto, Graal and more.*\r\n\r\nYou have a few options for how to do the installation as well as manage JDK switching.  Installation can be done by Homebrew, [SDKMAN](https://sdkman.io), [asdf](https://asdf-vm.com/), or a manual install.  Switching can be done by [SDKMAN](https://sdkman.io), [asdf](https://asdf-vm.com/), or manually by setting `JAVA_HOME`.  All of these are described below. \r\n\r\n&lt;!-- language-all: lang-none --&gt;\r\n\r\n&lt;hr/&gt;\r\n\r\n# TL;DR - Preferred Methods of Installation\r\n\r\nYou can install Java using whatever method you prefer including SDKMAN, *asdf*, Homebrew, or a manual install of the tar.gz file.  The advantage of a manual install is that the location of the JDK can be placed in a standardized location for Mac OSX.  \r\n\r\nHowever, there are easier options such as *SDKMAN* and *asdf* that also will install other important and common tools for the JVM.  These two primary options are described here.\r\n\r\n## Installing and Switching versions with SDKMAN \r\n\r\n[**SDKMAN**](https://sdkman.io) is a bit different and handles both the install and the switching.  SDKMAN also places the installed JDK&#39;s into its own directory tree, which is typically `~/.sdkman/candidates/java`.  SDKMAN allows setting a global default version, and a version specific to the current shell.\r\n\r\n 1. Install SDKMAN from https://sdkman.io/install\r\n\r\n 2. List the Java versions available to make sure you know the version ID\r\n\r\n        sdk list java\r\n\r\n 3. Install one of those versions, for example, Java 21 LTS:\r\n\r\n        sdk install java 21-open \r\n\r\n    Or java 19:\r\n   \r\n        sdk install java 19.0.2-open\r\n\r\n 4. Make Java 17 the default version:\r\n\r\n        sdk default java 17-open\r\n\r\n    Or switch to 17 for the current terminal session:\r\n\r\n        sdk use java 17-open\r\n\r\nWhen you list available versions for installation using the list command, you will see a wide variety of distributions of Java:\r\n\r\n    sdk list java\r\n\r\nAnd install additional versions, such as JDK 11 from Amazon:\r\n\r\n    sdk install java 11.0.14.10.1-amzn\r\n    \r\nSDKMAN can work with previously installed existing versions.  Just do a local install giving your own version label and the location of the JDK:\r\n\r\n    sdk install java my-local-13 /Library/Java/JavaVirtualMachines/jdk-13.jdk/Contents/Home\r\n\r\nAnd use it freely:\r\n\r\n    sdk use java my-local-13\r\n\r\nSDKMAN will automatically manage your `PATH` and `JAVA_HOME` for you as you change versions.  And as a note, it installs Java versions to `~/.sdkman/candidates/java/`.\r\n\r\nMore information is available in the [SDKMAN Usage Guide](https://sdkman.io/usage) along with [other SDK&#39;s](https://sdkman.io/sdks) it can install and manage such as Gradle, Maven, Kotlin, Quarkus, Spring Boot, and many others.\r\n\r\n&lt;hr /&gt;\r\n\r\n## Installing and Switching versions with &quot;*asdf*&quot; \r\n\r\n[asdf](https://asdf-vm.com/) is a version manager that supports installing and managing most languages, frameworks, and developer/devops tools. It has language specific plugins including one [for Java](https://github.com/halcyon/asdf-java).\r\n\r\n 1. First, install *asdf* via https://asdf-vm.com/guide/getting-started.html (read there to setup your shell correctly), or more simply:\r\n\r\n        brew reinstall asdf\r\n\r\n    and [read the doc](https://asdf-vm.com/guide/getting-started.html#_3-install-asdf) for setting up your shell correctly, but if you are using *asdf* from Homebrew with ZSH you can execute this command to finish setup:\r\n    \r\n        echo -e &quot;\\n. $(brew --prefix asdf)/libexec/asdf.sh&quot; &gt;&gt; ${ZDOTDIR:-~}/.zshrc\r\n\r\n 2. Then install the Java plugin via https://github.com/halcyon/asdf-java\r\n\r\n        asdf plugin add java\r\n\r\n    and [read the doc](https://github.com/halcyon/asdf-java) for setting up your shell correctly before continuing.  Basically it says to add the following to your `~/.zshrc` file (assuming you are not using another shell):\r\n\r\n        . ~/.asdf/plugins/java/set-java-home.zsh\r\n\r\n 3. Now list Java versions: \r\n\r\n        asdf list-all java\r\n\r\n 4. Install your favorite flavor and version:  \r\n \r\n        asdf install java openjdk-21\r\n\r\n    or install the latest:\r\n\r\n        asdf install java latest\r\n\r\nOther important commands are...\r\n\r\n* List your installed versions:\r\n\r\n      asdf list java\r\n\r\n* Set a global Java version:\r\n\r\n      asdf global java openjdk-21\r\n\r\n* Set a local Java version for a directory:\r\n\r\n      asdf local java openjdk-19\r\n\r\nIt&#39;s that easy!  *asdf* will automatically manage your PATH and JAVA_HOME for you as you change versions.  As a note, *asdf* installs Java versions to `~/.asdf/installs/java`.\r\n\r\nThere are other languages and plugins for *asdf* here from the repository page: https://github.com/asdf-vm/asdf-plugins\r\n\r\n&lt;hr/&gt;\r\n\r\n# Other Methods of Installation\r\n\r\n## Install with Homebrew\r\n\r\nThe version of Java available in Homebrew Cask previous to October 3, 2018 was indeed the Oracle JVM.  Now, however, it has now been updated to OpenJDK.  Be sure to update Homebrew and then you will see the lastest version available for install.\r\n\r\n\r\n1. [install Homebrew](https://brew.sh/) if you haven&#39;t already.  Make sure it is updated:\r\n\r\n        brew update\r\n\r\n2. Add the casks tap:\r\n\r\n        brew tap homebrew/cask-versions\r\n\r\n    These casks change their Java versions often, and there might be other taps out there with additional Java versions.   \r\n    \r\n3. Look for installable versions:\r\n\r\n        brew search java  \r\n\r\n    or for Eclipse Temurin versions:\r\n\r\n        brew search temurin     \r\n\r\n4. Check the details on the version that will be installed:\r\n\r\n        brew info java\r\n\r\n    or for the Temurin version:\r\n\r\n        brew info temurin\r\n\r\n4. Install a specific version of the JDK such as `java11`, `temurin8`, `temurin11`, `temurin17`, or just `java` or `temurin` for the most current of that distribution.  For example:\r\n\r\n        brew install java\r\n\r\n        brew install --cask temurin\r\n\r\n\r\nAnd these will be installed into `/Library/Java/JavaVirtualMachines/` which is the traditional location expected on Mac OSX.  There might be additional steps to make the JDK active reported at the end of the install process.\r\n\r\n## Install manually from OpenJDK download page:\r\n\r\nIf you need any and every version of Java, this is a good place to look.\r\n\r\n 1. Download OpenJDK for Mac OSX from http://jdk.java.net/ (for example [Java 17](https://jdk.java.net/17/) and [Java 21](https://jdk.java.net/21/))\r\n\r\n 2. Unarchive the OpenJDK tar, and place the resulting folder (i.e. `jdk-19.jdk`) into your `/Library/Java/JavaVirtualMachines/` folder since this is the standard and expected location of JDK installs.  You can also install anywhere you want in reality.\r\n\r\n 3. Set `JAVA_HOME` environment variable to point at direction where you unarchived the JDK.\r\n\r\nFor further information see the answer [specific to manual installation](https://stackoverflow.com/a/53273225/3679676).  Also see the section below &quot;Switching versions manually&quot; for more information on how to manage multiple manual installations.\r\n\r\n\r\n## Other installation options:\r\n\r\nSome other flavours of OpenJDK are:\r\n\r\n**[Azul Systems](https://www.azul.com/) Java Zulu** certified builds of OpenJDK can be installed by following the [instructions on their site](https://www.azul.com/downloads/zulu/).\r\n\r\n&gt; Zulu&#174; is a certified build of OpenJDK that is fully compliant with the Java SE standard. Zulu is 100% open source and freely downloadable. Now Java developers, system administrators, and end-users can enjoy the full benefits of open source Java with deployment flexibility and control over upgrade timing.\r\n\r\n[**Amazon Correto**](https://aws.amazon.com/corretto/) OpenJDK builds have an easy to use an installation package for Java 8, 11, 17, and Java 21.  It installs to the standard `/Library/Java/JavaVirtualMachines/` directory on Mac OSX.\r\n\r\n&gt; Amazon Corretto is a no-cost, multiplatform, production-ready distribution of the Open Java Development Kit (OpenJDK). Corretto comes with long-term support that will include performance enhancements and security fixes. Amazon runs Corretto internally on thousands of production services and Corretto is certified as compatible with the Java SE standard. With Corretto, you can develop and run Java applications on popular operating systems, including Linux, Windows, and macOS.\r\n\r\n[**Microsoft Java JDK**](https://www.microsoft.com/openjdk) - certified builds of OpenJDK from Microsoft.\r\n\r\n&lt;hr/&gt;\r\n\r\n# Where is my JDK?!?!\r\n\r\nTo find locations of previously installed Java JDK&#39;s installed at the default system locations, use:\r\n\r\n    /usr/libexec/java_home -V\r\n\r\n&gt; Matching Java Virtual Machines (4):&lt;br/&gt;\r\n&gt;    19 (x86_64) &quot;Homebrew&quot; - &quot;OpenJDK 19&quot; /usr/local/Cellar/openjdk/19/libexec/openjdk.jdk/Contents/Home&lt;br/&gt;\r\n&gt;    18.0.1.1 (x86_64) &quot;Homebrew&quot; - &quot;OpenJDK 18.0.1.1&quot; /usr/local/Cellar/openjdk/18.0.1.1/libexec/openjdk.jdk/Contents/Home&lt;br/&gt;\r\n&gt;    17 (x86_64) &quot;Homebrew&quot; - &quot;OpenJDK 17&quot; /usr/local/Cellar/openjdk/17/libexec/openjdk.jdk/Contents/Home&lt;br/&gt;\r\n&gt;    11, x86_64:\t&quot;Java SE 11&quot;\t/Library/Java/JavaVirtualMachines/jdk-11.jdk/Contents/Home&lt;br/&gt;\r\n&gt;    1.8.301.09 (x86_64) &quot;Oracle Corporation&quot; - &quot;Java&quot; /Library/Internet Plug-Ins/JavaAppletPlugin.plugin/Contents/Home /usr/local/Cellar/openjdk/17/libexec/openjdk.jdk/Contents/Home&lt;br/&gt;\r\n\r\nYou can also report just the location of a specific Java version using `-v`.  For example for Java 17:\r\n\r\n    /usr/libexec/java_home -v 17\r\n\r\n&gt; /usr/local/Cellar/openjdk/17/libexec/openjdk.jdk/Contents/Home\r\n\r\nKnowing the location of the installed JDK&#39;s is also useful when using tools like JEnv, or adding a local install manually to SDKMAN -- and you need to know where to find them.\r\n\r\nIf you need to find JDK&#39;s installed by other tools, check these locations:\r\n\r\n * SDKMAN installs to `~/.sdkman/candidates/java/`\r\n * *asdf* install to `~/.asdf/installs/java`\r\n\r\n&lt;hr/&gt;\r\n\r\n# Version Switching\r\n\r\nIf you are using *SDKMAN* or *asdf* you are already covered and can stop reading!  Otherwise, here are some options to switch existing VM installations.\r\n\r\n## Switching versions manually\r\n\r\nThe Java executable is a wrapper that will use whatever JDK is configured in `JAVA_HOME`, so you can change that to also change which JDK is in use.  \r\n\r\nFor example, if you installed or untar&#39;d JDK 16 to `/Library/Java/JavaVirtualMachines/jdk-16.jdk` if it is the highest version number it should already be the default, if not you could simply set:\r\n\r\n    export JAVA_HOME=/Library/Java/JavaVirtualMachines/jdk-16.jdk/Contents/Home\r\n\r\nAnd now whatever Java executable is in the path will see this and use the correct JDK.\r\n\r\nA [simple way to change JDKs](https://github.com/AdoptOpenJDK/homebrew-openjdk#switch-between-different-jdk-versions) is to create a function in your `~/.bashrc` or `~/.zshrc` file:\r\n\r\n    jdk() {\r\n        version=$1\r\n        export JAVA_HOME=$(/usr/libexec/java_home -v&quot;$version&quot;);\r\n        java -version\r\n    }\r\n\r\nAnd then change JDKs simply by:\r\n\r\n    jdk 1.8\r\n    jdk 9\r\n    jdk 11\r\n    jdk 13\r\n\r\n&lt;hr/&gt;\r\n\r\nEdits:\r\n* removed Jabba and JENV as both appear to have stagnated, issue count is climbing dramatically, and issues/PR&#39;s are not being addressed by the maintainers.","title":"How do I install Java on Mac OSX allowing version switching?","body":"<p><strong>Note:</strong> <em>These solutions work for various versions of Java including Java 8 through Java 21 (the LTS version).  This includes alternative JDK's from OpenJDK, Oracle, IBM, Azul, Amazon Correto, Graal and more.</em></p>\n<p>You have a few options for how to do the installation as well as manage JDK switching.  Installation can be done by Homebrew, <a href=\"https://sdkman.io\" rel=\"noreferrer\">SDKMAN</a>, <a href=\"https://asdf-vm.com/\" rel=\"noreferrer\">asdf</a>, or a manual install.  Switching can be done by <a href=\"https://sdkman.io\" rel=\"noreferrer\">SDKMAN</a>, <a href=\"https://asdf-vm.com/\" rel=\"noreferrer\">asdf</a>, or manually by setting <code>JAVA_HOME</code>.  All of these are described below.</p>\n\n<hr/>\n<h1>TL;DR - Preferred Methods of Installation</h1>\n<p>You can install Java using whatever method you prefer including SDKMAN, <em>asdf</em>, Homebrew, or a manual install of the tar.gz file.  The advantage of a manual install is that the location of the JDK can be placed in a standardized location for Mac OSX.</p>\n<p>However, there are easier options such as <em>SDKMAN</em> and <em>asdf</em> that also will install other important and common tools for the JVM.  These two primary options are described here.</p>\n<h2>Installing and Switching versions with SDKMAN</h2>\n<p><a href=\"https://sdkman.io\" rel=\"noreferrer\"><strong>SDKMAN</strong></a> is a bit different and handles both the install and the switching.  SDKMAN also places the installed JDK's into its own directory tree, which is typically <code>~/.sdkman/candidates/java</code>.  SDKMAN allows setting a global default version, and a version specific to the current shell.</p>\n<ol>\n<li><p>Install SDKMAN from <a href=\"https://sdkman.io/install\" rel=\"noreferrer\">https://sdkman.io/install</a></p>\n</li>\n<li><p>List the Java versions available to make sure you know the version ID</p>\n<pre class=\"lang-none prettyprint-override\"><code>sdk list java\n</code></pre>\n</li>\n<li><p>Install one of those versions, for example, Java 21 LTS:</p>\n<pre class=\"lang-none prettyprint-override\"><code>sdk install java 21-open \n</code></pre>\n<p>Or java 19:</p>\n<pre class=\"lang-none prettyprint-override\"><code>sdk install java 19.0.2-open\n</code></pre>\n</li>\n<li><p>Make Java 17 the default version:</p>\n<pre class=\"lang-none prettyprint-override\"><code>sdk default java 17-open\n</code></pre>\n<p>Or switch to 17 for the current terminal session:</p>\n<pre class=\"lang-none prettyprint-override\"><code>sdk use java 17-open\n</code></pre>\n</li>\n</ol>\n<p>When you list available versions for installation using the list command, you will see a wide variety of distributions of Java:</p>\n<pre class=\"lang-none prettyprint-override\"><code>sdk list java\n</code></pre>\n<p>And install additional versions, such as JDK 11 from Amazon:</p>\n<pre class=\"lang-none prettyprint-override\"><code>sdk install java 11.0.14.10.1-amzn\n</code></pre>\n<p>SDKMAN can work with previously installed existing versions.  Just do a local install giving your own version label and the location of the JDK:</p>\n<pre class=\"lang-none prettyprint-override\"><code>sdk install java my-local-13 /Library/Java/JavaVirtualMachines/jdk-13.jdk/Contents/Home\n</code></pre>\n<p>And use it freely:</p>\n<pre class=\"lang-none prettyprint-override\"><code>sdk use java my-local-13\n</code></pre>\n<p>SDKMAN will automatically manage your <code>PATH</code> and <code>JAVA_HOME</code> for you as you change versions.  And as a note, it installs Java versions to <code>~/.sdkman/candidates/java/</code>.</p>\n<p>More information is available in the <a href=\"https://sdkman.io/usage\" rel=\"noreferrer\">SDKMAN Usage Guide</a> along with <a href=\"https://sdkman.io/sdks\" rel=\"noreferrer\">other SDK's</a> it can install and manage such as Gradle, Maven, Kotlin, Quarkus, Spring Boot, and many others.</p>\n<hr />\n<h2>Installing and Switching versions with &quot;<em>asdf</em>&quot;</h2>\n<p><a href=\"https://asdf-vm.com/\" rel=\"noreferrer\">asdf</a> is a version manager that supports installing and managing most languages, frameworks, and developer/devops tools. It has language specific plugins including one <a href=\"https://github.com/halcyon/asdf-java\" rel=\"noreferrer\">for Java</a>.</p>\n<ol>\n<li><p>First, install <em>asdf</em> via <a href=\"https://asdf-vm.com/guide/getting-started.html\" rel=\"noreferrer\">https://asdf-vm.com/guide/getting-started.html</a> (read there to setup your shell correctly), or more simply:</p>\n<pre class=\"lang-none prettyprint-override\"><code>brew reinstall asdf\n</code></pre>\n<p>and <a href=\"https://asdf-vm.com/guide/getting-started.html#_3-install-asdf\" rel=\"noreferrer\">read the doc</a> for setting up your shell correctly, but if you are using <em>asdf</em> from Homebrew with ZSH you can execute this command to finish setup:</p>\n<pre class=\"lang-none prettyprint-override\"><code>echo -e &quot;\\n. $(brew --prefix asdf)/libexec/asdf.sh&quot; &gt;&gt; ${ZDOTDIR:-~}/.zshrc\n</code></pre>\n</li>\n<li><p>Then install the Java plugin via <a href=\"https://github.com/halcyon/asdf-java\" rel=\"noreferrer\">https://github.com/halcyon/asdf-java</a></p>\n<pre class=\"lang-none prettyprint-override\"><code>asdf plugin add java\n</code></pre>\n<p>and <a href=\"https://github.com/halcyon/asdf-java\" rel=\"noreferrer\">read the doc</a> for setting up your shell correctly before continuing.  Basically it says to add the following to your <code>~/.zshrc</code> file (assuming you are not using another shell):</p>\n<pre class=\"lang-none prettyprint-override\"><code>. ~/.asdf/plugins/java/set-java-home.zsh\n</code></pre>\n</li>\n<li><p>Now list Java versions:</p>\n<pre class=\"lang-none prettyprint-override\"><code>asdf list-all java\n</code></pre>\n</li>\n<li><p>Install your favorite flavor and version:</p>\n<pre class=\"lang-none prettyprint-override\"><code>asdf install java openjdk-21\n</code></pre>\n<p>or install the latest:</p>\n<pre class=\"lang-none prettyprint-override\"><code>asdf install java latest\n</code></pre>\n</li>\n</ol>\n<p>Other important commands are...</p>\n<ul>\n<li><p>List your installed versions:</p>\n<pre class=\"lang-none prettyprint-override\"><code>asdf list java\n</code></pre>\n</li>\n<li><p>Set a global Java version:</p>\n<pre class=\"lang-none prettyprint-override\"><code>asdf global java openjdk-21\n</code></pre>\n</li>\n<li><p>Set a local Java version for a directory:</p>\n<pre class=\"lang-none prettyprint-override\"><code>asdf local java openjdk-19\n</code></pre>\n</li>\n</ul>\n<p>It's that easy!  <em>asdf</em> will automatically manage your PATH and JAVA_HOME for you as you change versions.  As a note, <em>asdf</em> installs Java versions to <code>~/.asdf/installs/java</code>.</p>\n<p>There are other languages and plugins for <em>asdf</em> here from the repository page: <a href=\"https://github.com/asdf-vm/asdf-plugins\" rel=\"noreferrer\">https://github.com/asdf-vm/asdf-plugins</a></p>\n<hr/>\n<h1>Other Methods of Installation</h1>\n<h2>Install with Homebrew</h2>\n<p>The version of Java available in Homebrew Cask previous to October 3, 2018 was indeed the Oracle JVM.  Now, however, it has now been updated to OpenJDK.  Be sure to update Homebrew and then you will see the lastest version available for install.</p>\n<ol>\n<li><p><a href=\"https://brew.sh/\" rel=\"noreferrer\">install Homebrew</a> if you haven't already.  Make sure it is updated:</p>\n<pre class=\"lang-none prettyprint-override\"><code> brew update\n</code></pre>\n</li>\n<li><p>Add the casks tap:</p>\n<pre class=\"lang-none prettyprint-override\"><code> brew tap homebrew/cask-versions\n</code></pre>\n<p>These casks change their Java versions often, and there might be other taps out there with additional Java versions.</p>\n</li>\n<li><p>Look for installable versions:</p>\n<pre class=\"lang-none prettyprint-override\"><code> brew search java  \n</code></pre>\n<p>or for Eclipse Temurin versions:</p>\n<pre class=\"lang-none prettyprint-override\"><code> brew search temurin     \n</code></pre>\n</li>\n<li><p>Check the details on the version that will be installed:</p>\n<pre class=\"lang-none prettyprint-override\"><code> brew info java\n</code></pre>\n<p>or for the Temurin version:</p>\n<pre class=\"lang-none prettyprint-override\"><code> brew info temurin\n</code></pre>\n</li>\n<li><p>Install a specific version of the JDK such as <code>java11</code>, <code>temurin8</code>, <code>temurin11</code>, <code>temurin17</code>, or just <code>java</code> or <code>temurin</code> for the most current of that distribution.  For example:</p>\n<pre class=\"lang-none prettyprint-override\"><code> brew install java\n\n brew install --cask temurin\n</code></pre>\n</li>\n</ol>\n<p>And these will be installed into <code>/Library/Java/JavaVirtualMachines/</code> which is the traditional location expected on Mac OSX.  There might be additional steps to make the JDK active reported at the end of the install process.</p>\n<h2>Install manually from OpenJDK download page:</h2>\n<p>If you need any and every version of Java, this is a good place to look.</p>\n<ol>\n<li><p>Download OpenJDK for Mac OSX from <a href=\"http://jdk.java.net/\" rel=\"noreferrer\">http://jdk.java.net/</a> (for example <a href=\"https://jdk.java.net/17/\" rel=\"noreferrer\">Java 17</a> and <a href=\"https://jdk.java.net/21/\" rel=\"noreferrer\">Java 21</a>)</p>\n</li>\n<li><p>Unarchive the OpenJDK tar, and place the resulting folder (i.e. <code>jdk-19.jdk</code>) into your <code>/Library/Java/JavaVirtualMachines/</code> folder since this is the standard and expected location of JDK installs.  You can also install anywhere you want in reality.</p>\n</li>\n<li><p>Set <code>JAVA_HOME</code> environment variable to point at direction where you unarchived the JDK.</p>\n</li>\n</ol>\n<p>For further information see the answer <a href=\"https://stackoverflow.com/a/53273225/3679676\">specific to manual installation</a>.  Also see the section below &quot;Switching versions manually&quot; for more information on how to manage multiple manual installations.</p>\n<h2>Other installation options:</h2>\n<p>Some other flavours of OpenJDK are:</p>\n<p><strong><a href=\"https://www.azul.com/\" rel=\"noreferrer\">Azul Systems</a> Java Zulu</strong> certified builds of OpenJDK can be installed by following the <a href=\"https://www.azul.com/downloads/zulu/\" rel=\"noreferrer\">instructions on their site</a>.</p>\n<blockquote>\n<p>Zulu® is a certified build of OpenJDK that is fully compliant with the Java SE standard. Zulu is 100% open source and freely downloadable. Now Java developers, system administrators, and end-users can enjoy the full benefits of open source Java with deployment flexibility and control over upgrade timing.</p>\n</blockquote>\n<p><a href=\"https://aws.amazon.com/corretto/\" rel=\"noreferrer\"><strong>Amazon Correto</strong></a> OpenJDK builds have an easy to use an installation package for Java 8, 11, 17, and Java 21.  It installs to the standard <code>/Library/Java/JavaVirtualMachines/</code> directory on Mac OSX.</p>\n<blockquote>\n<p>Amazon Corretto is a no-cost, multiplatform, production-ready distribution of the Open Java Development Kit (OpenJDK). Corretto comes with long-term support that will include performance enhancements and security fixes. Amazon runs Corretto internally on thousands of production services and Corretto is certified as compatible with the Java SE standard. With Corretto, you can develop and run Java applications on popular operating systems, including Linux, Windows, and macOS.</p>\n</blockquote>\n<p><a href=\"https://www.microsoft.com/openjdk\" rel=\"noreferrer\"><strong>Microsoft Java JDK</strong></a> - certified builds of OpenJDK from Microsoft.</p>\n<hr/>\n<h1>Where is my JDK?!?!</h1>\n<p>To find locations of previously installed Java JDK's installed at the default system locations, use:</p>\n<pre class=\"lang-none prettyprint-override\"><code>/usr/libexec/java_home -V\n</code></pre>\n<blockquote>\n<p>Matching Java Virtual Machines (4):<br/>\n19 (x86_64) &quot;Homebrew&quot; - &quot;OpenJDK 19&quot; /usr/local/Cellar/openjdk/19/libexec/openjdk.jdk/Contents/Home<br/>\n18.0.1.1 (x86_64) &quot;Homebrew&quot; - &quot;OpenJDK 18.0.1.1&quot; /usr/local/Cellar/openjdk/18.0.1.1/libexec/openjdk.jdk/Contents/Home<br/>\n17 (x86_64) &quot;Homebrew&quot; - &quot;OpenJDK 17&quot; /usr/local/Cellar/openjdk/17/libexec/openjdk.jdk/Contents/Home<br/>\n11, x86_64:    &quot;Java SE 11&quot;    /Library/Java/JavaVirtualMachines/jdk-11.jdk/Contents/Home<br/>\n1.8.301.09 (x86_64) &quot;Oracle Corporation&quot; - &quot;Java&quot; /Library/Internet Plug-Ins/JavaAppletPlugin.plugin/Contents/Home /usr/local/Cellar/openjdk/17/libexec/openjdk.jdk/Contents/Home<br/></p>\n</blockquote>\n<p>You can also report just the location of a specific Java version using <code>-v</code>.  For example for Java 17:</p>\n<pre class=\"lang-none prettyprint-override\"><code>/usr/libexec/java_home -v 17\n</code></pre>\n<blockquote>\n<p>/usr/local/Cellar/openjdk/17/libexec/openjdk.jdk/Contents/Home</p>\n</blockquote>\n<p>Knowing the location of the installed JDK's is also useful when using tools like JEnv, or adding a local install manually to SDKMAN -- and you need to know where to find them.</p>\n<p>If you need to find JDK's installed by other tools, check these locations:</p>\n<ul>\n<li>SDKMAN installs to <code>~/.sdkman/candidates/java/</code></li>\n<li><em>asdf</em> install to <code>~/.asdf/installs/java</code></li>\n</ul>\n<hr/>\n<h1>Version Switching</h1>\n<p>If you are using <em>SDKMAN</em> or <em>asdf</em> you are already covered and can stop reading!  Otherwise, here are some options to switch existing VM installations.</p>\n<h2>Switching versions manually</h2>\n<p>The Java executable is a wrapper that will use whatever JDK is configured in <code>JAVA_HOME</code>, so you can change that to also change which JDK is in use.</p>\n<p>For example, if you installed or untar'd JDK 16 to <code>/Library/Java/JavaVirtualMachines/jdk-16.jdk</code> if it is the highest version number it should already be the default, if not you could simply set:</p>\n<pre class=\"lang-none prettyprint-override\"><code>export JAVA_HOME=/Library/Java/JavaVirtualMachines/jdk-16.jdk/Contents/Home\n</code></pre>\n<p>And now whatever Java executable is in the path will see this and use the correct JDK.</p>\n<p>A <a href=\"https://github.com/AdoptOpenJDK/homebrew-openjdk#switch-between-different-jdk-versions\" rel=\"noreferrer\">simple way to change JDKs</a> is to create a function in your <code>~/.bashrc</code> or <code>~/.zshrc</code> file:</p>\n<pre class=\"lang-none prettyprint-override\"><code>jdk() {\n    version=$1\n    export JAVA_HOME=$(/usr/libexec/java_home -v&quot;$version&quot;);\n    java -version\n}\n</code></pre>\n<p>And then change JDKs simply by:</p>\n<pre class=\"lang-none prettyprint-override\"><code>jdk 1.8\njdk 9\njdk 11\njdk 13\n</code></pre>\n<hr/>\n<p>Edits:</p>\n<ul>\n<li>removed Jabba and JENV as both appear to have stagnated, issue count is climbing dramatically, and issues/PR's are not being addressed by the maintainers.</li>\n</ul>\n"},{"tags":[],"owner":{"account_id":17750,"reputation":25470,"user_id":40064,"accept_rate":69,"display_name":"Wim Deblauwe"},"comment_count":0,"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1537990565,"creation_date":1537989428,"answer_id":52524706,"question_id":52524112,"body_markdown":"Another alternative is using [SDKMAN](https://sdkman.io/)! See https://wimdeblauwe.wordpress.com/2018/09/26/switching-between-jdk-8-and-11-using-sdkman/\r\n\r\nFirst install SDKMAN:  https://sdkman.io/install and then...\r\n\r\n1. Install Oracle JDK 8 with: `sdk install java 8.0.181-oracle`\r\n2. Install OpenJDK 11 with: `sdk install java 11.0.0-open`\r\n\r\nTo switch:\r\n\r\n* Switch to JDK 8 with `sdk use java 8.0.181-oracle`\r\n* Switch to JDK 11 with `sdk use java 11.0.0-open`\r\n\r\nTo set a default:\r\n\r\n* Default to JDK 8 with `sdk default java 8.0.181-oracle`\r\n* Default to JDK 11 with `sdk default java 11.0.0-open`\r\n","title":"How do I install Java on Mac OSX allowing version switching?","body":"<p>Another alternative is using <a href=\"https://sdkman.io/\" rel=\"nofollow noreferrer\">SDKMAN</a>! See <a href=\"https://wimdeblauwe.wordpress.com/2018/09/26/switching-between-jdk-8-and-11-using-sdkman/\" rel=\"nofollow noreferrer\">https://wimdeblauwe.wordpress.com/2018/09/26/switching-between-jdk-8-and-11-using-sdkman/</a></p>\n\n<p>First install SDKMAN:  <a href=\"https://sdkman.io/install\" rel=\"nofollow noreferrer\">https://sdkman.io/install</a> and then...</p>\n\n<ol>\n<li>Install Oracle JDK 8 with: <code>sdk install java 8.0.181-oracle</code></li>\n<li>Install OpenJDK 11 with: <code>sdk install java 11.0.0-open</code></li>\n</ol>\n\n<p>To switch:</p>\n\n<ul>\n<li>Switch to JDK 8 with <code>sdk use java 8.0.181-oracle</code></li>\n<li>Switch to JDK 11 with <code>sdk use java 11.0.0-open</code></li>\n</ul>\n\n<p>To set a default:</p>\n\n<ul>\n<li>Default to JDK 8 with <code>sdk default java 8.0.181-oracle</code></li>\n<li>Default to JDK 11 with <code>sdk default java 11.0.0-open</code></li>\n</ul>\n"},{"comments":[{"owner":{"account_id":4528511,"reputation":85092,"user_id":3679676,"accept_rate":100,"display_name":"Jayson Minard"},"score":0,"creation_date":1538912220,"post_id":52663406,"comment_id":92303277,"body_markdown":"Shouldn&#39;t the first example have a version string `1.8.0_181-zulu-8.31.0.1` ?  or is it partial matching?","body":"Shouldn&#39;t the first example have a version string <code>1.8.0_181-zulu-8.31.0.1</code> ?  or is it partial matching?"},{"owner":{"account_id":4528511,"reputation":85092,"user_id":3679676,"accept_rate":100,"display_name":"Jayson Minard"},"score":0,"creation_date":1538913713,"post_id":52663406,"comment_id":92303621,"body_markdown":"This doesn&#39;t actually change anything to use the version of Java, it just reports the location of the `JAVA_HOME`.  Manual switching using these commands is covered in my other answer.","body":"This doesn&#39;t actually change anything to use the version of Java, it just reports the location of the <code>JAVA_HOME</code>.  Manual switching using these commands is covered in my other answer."}],"tags":[],"owner":{"account_id":5031183,"reputation":81,"user_id":4041306,"accept_rate":25,"display_name":"Ranganath Samudrala"},"comment_count":2,"down_vote_count":1,"up_vote_count":2,"is_accepted":false,"score":1,"last_activity_date":1538740402,"creation_date":1538734732,"answer_id":52663406,"question_id":52524112,"body_markdown":"IMHO, There is no need to install all the additional applications/packages.\r\n\r\nCheck available versions using the command:\r\n\r\n\r\n    &gt; /usr/libexec/java_home -V\r\n    Matching Java Virtual Machines (8):\r\n        11, x86_64:\t&quot;Java SE 11-ea&quot;\t/Library/Java/JavaVirtualMachines/jdk-11.jdk/Contents/Home\r\n        10.0.2, x86_64:\t&quot;Java SE 10.0.2&quot;\t/Library/Java/JavaVirtualMachines/jdk-10.0.2.jdk/Contents/Home\r\n        9.0.1, x86_64:\t&quot;Java SE 9.0.1&quot;\t/Library/Java/JavaVirtualMachines/jdk-9.0.1.jdk/Contents/Home\r\n        1.8.0_181-zulu-8.31.0.1, x86_64:\t&quot;Zulu 8&quot;\t/Library/Java/JavaVirtualMachines/zulu-8.jdk/Contents/Home\r\n        1.8.0_151, x86_64:\t&quot;Java SE 8&quot;\t/Library/Java/JavaVirtualMachines/jdk1.8.0_151.jdk/Contents/Home\r\n        1.7.0_80, x86_64:\t&quot;Java SE 7&quot;\t/Library/Java/JavaVirtualMachines/jdk1.7.0_80.jdk/Contents/Home\r\n        1.6.0_65-b14-468, x86_64:\t&quot;Java SE 6&quot;\t/Library/Java/JavaVirtualMachines/1.6.0.jdk/Contents/Home\r\n        1.6.0_65-b14-468, i386:\t&quot;Java SE 6&quot;\t/Library/Java/JavaVirtualMachines/1.6.0.jdk/Contents/Home\r\n\r\n\r\nNow if you want to pick Azul JDK 8 in the above list, and NOT Oracle&#39;s Java SE 8, invoke the command as below:\r\n\r\n    &gt; /usr/libexec/java_home -v 1.8.0_181\r\n    /Library/Java/JavaVirtualMachines/zulu-8.jdk/Contents/Home\r\n\r\nTo pick Oracle&#39;s Java SE 8 you would invoke the command:\r\n\r\n    &gt; /usr/libexec/java_home -v 1.8.0_151\r\n    /Library/Java/JavaVirtualMachines/jdk1.8.0_151.jdk/Contents/Home\r\n\r\nAs you can see the version number provided shall be the unique set of strings: 1.8.0_181 vs 1.8.0_151\r\n","title":"How do I install Java on Mac OSX allowing version switching?","body":"<p>IMHO, There is no need to install all the additional applications/packages.</p>\n\n<p>Check available versions using the command:</p>\n\n<pre><code>&gt; /usr/libexec/java_home -V\nMatching Java Virtual Machines (8):\n    11, x86_64: \"Java SE 11-ea\" /Library/Java/JavaVirtualMachines/jdk-11.jdk/Contents/Home\n    10.0.2, x86_64: \"Java SE 10.0.2\"    /Library/Java/JavaVirtualMachines/jdk-10.0.2.jdk/Contents/Home\n    9.0.1, x86_64:  \"Java SE 9.0.1\" /Library/Java/JavaVirtualMachines/jdk-9.0.1.jdk/Contents/Home\n    1.8.0_181-zulu-8.31.0.1, x86_64:    \"Zulu 8\"    /Library/Java/JavaVirtualMachines/zulu-8.jdk/Contents/Home\n    1.8.0_151, x86_64:  \"Java SE 8\" /Library/Java/JavaVirtualMachines/jdk1.8.0_151.jdk/Contents/Home\n    1.7.0_80, x86_64:   \"Java SE 7\" /Library/Java/JavaVirtualMachines/jdk1.7.0_80.jdk/Contents/Home\n    1.6.0_65-b14-468, x86_64:   \"Java SE 6\" /Library/Java/JavaVirtualMachines/1.6.0.jdk/Contents/Home\n    1.6.0_65-b14-468, i386: \"Java SE 6\" /Library/Java/JavaVirtualMachines/1.6.0.jdk/Contents/Home\n</code></pre>\n\n<p>Now if you want to pick Azul JDK 8 in the above list, and NOT Oracle's Java SE 8, invoke the command as below:</p>\n\n<pre><code>&gt; /usr/libexec/java_home -v 1.8.0_181\n/Library/Java/JavaVirtualMachines/zulu-8.jdk/Contents/Home\n</code></pre>\n\n<p>To pick Oracle's Java SE 8 you would invoke the command:</p>\n\n<pre><code>&gt; /usr/libexec/java_home -v 1.8.0_151\n/Library/Java/JavaVirtualMachines/jdk1.8.0_151.jdk/Contents/Home\n</code></pre>\n\n<p>As you can see the version number provided shall be the unique set of strings: 1.8.0_181 vs 1.8.0_151</p>\n"},{"comments":[{"owner":{"account_id":1252022,"reputation":19996,"user_id":6730571,"display_name":"Hugues M."},"score":1,"creation_date":1540934948,"post_id":53031186,"comment_id":93044680,"body_markdown":"and it should also be true now with [AdoptOpenJDK builds](https://blog.adoptopenjdk.net/2018/10/macos-binary-changes)","body":"and it should also be true now with <a href=\"https://blog.adoptopenjdk.net/2018/10/macos-binary-changes\" rel=\"nofollow noreferrer\">AdoptOpenJDK builds</a>"}],"tags":[],"owner":{"account_id":1252022,"reputation":19996,"user_id":6730571,"display_name":"Hugues M."},"comment_count":1,"down_vote_count":0,"up_vote_count":13,"is_accepted":false,"score":13,"last_activity_date":1540727395,"creation_date":1540727395,"answer_id":53031186,"question_id":52524112,"body_markdown":"**Manually switching system-default version without 3rd party tools:**\r\n\r\nAs detailed in [this older answer][1], on macOS `/usr/bin/java` is a wrapper tool that will use Java version pointed by `JAVA_HOME` or if that variable is not set will look for Java installations under `/Library/Java/JavaVirtualMachines/` and will use the one with highest version. It determines versions by looking at `Contents/Info.plist` under each package.\r\n\r\nArmed with this knowledge you can:\r\n\r\n- control which version the system will use by renaming `Info.plist` in versions you don&#39;t want to use as default (that file is not used by the actual Java runtime itself).\r\n- control which version to use for specific tasks by setting `$JAVA_HOME`\r\n\r\nI&#39;ve just verified this is still true with OpenJDK &amp; Mojave.\r\n\r\nOn a brand new system, there is no Java version installed:\r\n&lt;!-- language-all: lang-none --&gt;\r\n\r\n    $ java -version\r\n    No Java runtime present, requesting install.\r\n\r\nCancel this, download OpenJDK 11 &amp; 12ea on https://jdk.java.net ;\r\ninstall OpenJDK11:\r\n\r\n    $ cd /Library/Java/JavaVirtualMachines/\r\n    $ sudo tar xzf ~/Downloads/openjdk-11.0.1_osx-x64_bin.tar.gz\r\n\r\nSystem java is now 11:\r\n\r\n    $ java -version\r\n    openjdk version &quot;11.0.1&quot; 2018-10-16\r\n    [...]\r\n\r\nInstall OpenJDK12 (early access at the moment):\r\n\r\n    $ sudo tar xzf ~/Downloads/openjdk-12-ea+17_osx-x64_bin.tar.gz \r\n\r\nSystem java is now 12:\r\n\r\n    $ java -version\r\n    openjdk version &quot;12-ea&quot; 2019-03-19\r\n    [...]\r\n\r\nNow let&#39;s &quot;hide&quot; OpenJDK 12 from system java wrapper:\r\n\r\n    $ cd jdk-12.jdk/Contents/\r\n    $ sudo mv Info.plist Info.plist.disabled\r\n\r\nSystem java is back to 11:\r\n\r\n    $ java -version\r\n    openjdk version &quot;11.0.1&quot; 2018-10-16\r\n    [...]\r\n\r\nAnd you can still use version 12 punctually by manually setting `JAVA_HOME`:\r\n\r\n    $ export JAVA_HOME=/Library/Java/JavaVirtualMachines/jdk-12.jdk/Contents/Home\r\n    $ java -version\r\n    openjdk version &quot;12-ea&quot; 2019-03-19\r\n    [...]\r\n\r\n  [1]: https://stackoverflow.com/a/44169445/6730571","title":"How do I install Java on Mac OSX allowing version switching?","body":"<p><strong>Manually switching system-default version without 3rd party tools:</strong></p>\n\n<p>As detailed in <a href=\"https://stackoverflow.com/a/44169445/6730571\">this older answer</a>, on macOS <code>/usr/bin/java</code> is a wrapper tool that will use Java version pointed by <code>JAVA_HOME</code> or if that variable is not set will look for Java installations under <code>/Library/Java/JavaVirtualMachines/</code> and will use the one with highest version. It determines versions by looking at <code>Contents/Info.plist</code> under each package.</p>\n\n<p>Armed with this knowledge you can:</p>\n\n<ul>\n<li>control which version the system will use by renaming <code>Info.plist</code> in versions you don't want to use as default (that file is not used by the actual Java runtime itself).</li>\n<li>control which version to use for specific tasks by setting <code>$JAVA_HOME</code></li>\n</ul>\n\n<p>I've just verified this is still true with OpenJDK &amp; Mojave.</p>\n\n<p>On a brand new system, there is no Java version installed:\n</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>$ java -version\nNo Java runtime present, requesting install.\n</code></pre>\n\n<p>Cancel this, download OpenJDK 11 &amp; 12ea on <a href=\"https://jdk.java.net\" rel=\"noreferrer\">https://jdk.java.net</a> ;\ninstall OpenJDK11:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>$ cd /Library/Java/JavaVirtualMachines/\n$ sudo tar xzf ~/Downloads/openjdk-11.0.1_osx-x64_bin.tar.gz\n</code></pre>\n\n<p>System java is now 11:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>$ java -version\nopenjdk version \"11.0.1\" 2018-10-16\n[...]\n</code></pre>\n\n<p>Install OpenJDK12 (early access at the moment):</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>$ sudo tar xzf ~/Downloads/openjdk-12-ea+17_osx-x64_bin.tar.gz \n</code></pre>\n\n<p>System java is now 12:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>$ java -version\nopenjdk version \"12-ea\" 2019-03-19\n[...]\n</code></pre>\n\n<p>Now let's \"hide\" OpenJDK 12 from system java wrapper:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>$ cd jdk-12.jdk/Contents/\n$ sudo mv Info.plist Info.plist.disabled\n</code></pre>\n\n<p>System java is back to 11:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>$ java -version\nopenjdk version \"11.0.1\" 2018-10-16\n[...]\n</code></pre>\n\n<p>And you can still use version 12 punctually by manually setting <code>JAVA_HOME</code>:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>$ export JAVA_HOME=/Library/Java/JavaVirtualMachines/jdk-12.jdk/Contents/Home\n$ java -version\nopenjdk version \"12-ea\" 2019-03-19\n[...]\n</code></pre>\n"},{"comments":[{"owner":{"account_id":1461129,"reputation":766,"user_id":1375442,"display_name":"AlexGera"},"score":0,"creation_date":1550668036,"post_id":53273225,"comment_id":96352492,"body_markdown":"Nice solution. But what if still have java -version pointed to 8 while I have exported JAVA_HOME 11?","body":"Nice solution. But what if still have java -version pointed to 8 while I have exported JAVA_HOME 11?"},{"owner":{"account_id":316773,"reputation":5626,"user_id":633107,"accept_rate":57,"display_name":"Splaktar"},"score":4,"creation_date":1551381920,"post_id":53273225,"comment_id":96630132,"body_markdown":"The question is asking about Open JDK, but you linked to the Oracle JDK instead. The Open JDK doesn&#39;t appear to have an installer or installation instructions.","body":"The question is asking about Open JDK, but you linked to the Oracle JDK instead. The Open JDK doesn&#39;t appear to have an installer or installation instructions."},{"owner":{"account_id":2016836,"reputation":155,"user_id":3521337,"display_name":"Fuad Efendi"},"score":1,"creation_date":1580871568,"post_id":53273225,"comment_id":106237038,"body_markdown":"In response to @AlexGera - add this line:\n    export $PATH=$JAVA_HOME/bin:$PATH","body":"In response to @AlexGera - add this line:     export $PATH=$JAVA_HOME/bin:$PATH"},{"owner":{"account_id":5449054,"reputation":1020,"user_id":4334502,"accept_rate":30,"display_name":"ever alian"},"score":0,"creation_date":1667996501,"post_id":53273225,"comment_id":131299901,"body_markdown":"I still had to execute this command after adding @FuadEfendi &#39;s line.\n% export JAVA_HOME=`/usr/libexec/java_home -v 17.0.1`. Make sure you add ` symbol at the end of the version number. It takes as the code formatter here.","body":"I still had to execute this command after adding @FuadEfendi &#39;s line. % export JAVA_HOME=<code>&#47;usr&#47;libexec&#47;java_home -v 17.0.1</code>. Make sure you add ` symbol at the end of the version number. It takes as the code formatter here."}],"tags":[],"owner":{"account_id":1769262,"reputation":5848,"user_id":1614428,"accept_rate":22,"display_name":"VK321"},"comment_count":4,"down_vote_count":2,"up_vote_count":40,"is_accepted":false,"score":38,"last_activity_date":1609148088,"creation_date":1542078670,"answer_id":53273225,"question_id":52524112,"body_markdown":"This is how I did it. \r\n\r\n**Step 1:**  Install Java 11\r\n\r\nYou can download Java 11 dmg for mac from here: [https://www.oracle.com/technetwork/java/javase/downloads/jdk11-downloads-5066655.html][1]\r\n\r\n**Step 2:** After installation of Java 11. Confirm installation of all versions. Type the following command in your terminal.\r\n\r\n    /usr/libexec/java_home -V\r\n\r\n**Step 3:** Edit .bash_profile\r\n\r\n    sudo nano ~/.bash_profile\r\n\r\n**Step 4:** Add 11.0.1 as default. (Add below line to bash_profile file).\r\n\r\n    export JAVA_HOME=$(/usr/libexec/java_home -v 11.0.1)\r\n\r\nto switch to any version\r\n\r\n    export JAVA_HOME=$(/usr/libexec/java_home -v X.X.X)\r\n\r\nNow Press CTRL+X to exit the bash. Press &#39;Y&#39; to save changes.\r\n\r\n**Step 5:** Reload bash_profile\r\n\r\n    source ~/.bash_profile\r\n\r\n**Step 6:** Confirm current version of Java\r\n\r\n\r\n    java -version\r\n\r\n\r\n  [1]: https://www.oracle.com/java/technologies/javase-jdk11-downloads.html","title":"How do I install Java on Mac OSX allowing version switching?","body":"<p>This is how I did it.</p>\n<p><strong>Step 1:</strong>  Install Java 11</p>\n<p>You can download Java 11 dmg for mac from here: <a href=\"https://www.oracle.com/java/technologies/javase-jdk11-downloads.html\" rel=\"noreferrer\">https://www.oracle.com/technetwork/java/javase/downloads/jdk11-downloads-5066655.html</a></p>\n<p><strong>Step 2:</strong> After installation of Java 11. Confirm installation of all versions. Type the following command in your terminal.</p>\n<pre><code>/usr/libexec/java_home -V\n</code></pre>\n<p><strong>Step 3:</strong> Edit .bash_profile</p>\n<pre><code>sudo nano ~/.bash_profile\n</code></pre>\n<p><strong>Step 4:</strong> Add 11.0.1 as default. (Add below line to bash_profile file).</p>\n<pre><code>export JAVA_HOME=$(/usr/libexec/java_home -v 11.0.1)\n</code></pre>\n<p>to switch to any version</p>\n<pre><code>export JAVA_HOME=$(/usr/libexec/java_home -v X.X.X)\n</code></pre>\n<p>Now Press CTRL+X to exit the bash. Press 'Y' to save changes.</p>\n<p><strong>Step 5:</strong> Reload bash_profile</p>\n<pre><code>source ~/.bash_profile\n</code></pre>\n<p><strong>Step 6:</strong> Confirm current version of Java</p>\n<pre><code>java -version\n</code></pre>\n"},{"comments":[{"owner":{"account_id":13690378,"reputation":902,"user_id":9878332,"display_name":"ChumiestBucket"},"score":1,"creation_date":1572018848,"post_id":58474536,"comment_id":103442690,"body_markdown":"`Error: caskroom/cask was moved. Tap homebrew/cask-cask instead`, then `fatal: repository &#39;https://github.com/Homebrew/homebrew-cask-cask/&#39; not found`","body":"<code>Error: caskroom&#47;cask was moved. Tap homebrew&#47;cask-cask instead</code>, then <code>fatal: repository &#39;https:&#47;&#47;github.com&#47;Homebrew&#47;homebrew-cask-cask&#47;&#39; not found</code>"},{"owner":{"account_id":1053202,"reputation":59956,"user_id":1056563,"accept_rate":90,"display_name":"WestCoastProjects"},"score":0,"creation_date":1577498404,"post_id":58474536,"comment_id":105187817,"body_markdown":"what @ChumiestBucket said -this solution has multiple problems","body":"what @ChumiestBucket said -this solution has multiple problems"},{"owner":{"account_id":10071285,"reputation":2543,"user_id":7444762,"display_name":"Lyncean Patel"},"score":3,"creation_date":1626353722,"post_id":58474536,"comment_id":120874134,"body_markdown":"@ChumiestBucket I have updated the solution, let me know if you face any problem in this one. Thanks !","body":"@ChumiestBucket I have updated the solution, let me know if you face any problem in this one. Thanks !"},{"owner":{"account_id":10071285,"reputation":2543,"user_id":7444762,"display_name":"Lyncean Patel"},"score":0,"creation_date":1626353734,"post_id":58474536,"comment_id":120874142,"body_markdown":"@WestCostProjects  FYI","body":"@WestCostProjects  FYI"}],"tags":[],"owner":{"account_id":10071285,"reputation":2543,"user_id":7444762,"display_name":"Lyncean Patel"},"comment_count":4,"down_vote_count":1,"up_vote_count":17,"is_accepted":false,"score":16,"last_activity_date":1626353631,"creation_date":1571585687,"answer_id":58474536,"question_id":52524112,"body_markdown":"With Homebrew and jenv:\r\n\r\nAssumption: Mac machine and you already have installed homebrew.\r\n\r\nInstall Java from official Oracle website. You can install multiple versions of JDK. It will install on the following path:\r\n\r\n     /Library/Java/JavaVirtualMachines/jdk1.8.0_202.jdk/\r\n     /Library/Java/JavaVirtualMachines/jdk1.11.0_2.jdk/\r\n     /Library/Java/JavaVirtualMachines/jdk-14.0.2.jdk/\r\n\r\nWithout `jenv`, system will use the java which installed last.\r\n\r\nIf you want to use/manage multiple version then you can use `jenv`:\r\n\r\nInstall and configure jenv:\r\n\r\n    $ brew install jenv\r\n    $ echo &#39;export PATH=&quot;$HOME/.jenv/bin:$PATH&quot;&#39; &gt;&gt; ~/.zshrc\r\n    $ echo &#39;eval &quot;$(jenv init -)&quot;&#39; &gt;&gt; ~/.zshrc\r\n    $ source ~/.zshrc\r\n\r\nAdd the installed java to jenv:\r\n\r\n    $ jenv add /Library/Java/JavaVirtualMachines/jdk1.8.0_202.jdk/Contents/Home\r\n    $ jenv add /Library/Java/JavaVirtualMachines/14.0.2.jdk/Contents/Home\r\n    \r\n\r\nTo see all the installed java:\r\n\r\n    $ jenv versions\r\n\r\nAbove command will give the list of installed java:\r\n\r\n      system\r\n      1.8\r\n    * 1.8.0.291 (set by /Users/lpatel/.jenv/version)\r\n      14\r\n      14.0\r\n      14.0.2\r\n      oracle64-1.8.0.291\r\n      oracle64-14.0.2\r\n\r\nConfigure the java version which you want to use:\r\n\r\n    $ jenv global 1.8.0.291\r\n    ","title":"How do I install Java on Mac OSX allowing version switching?","body":"<p>With Homebrew and jenv:</p>\n<p>Assumption: Mac machine and you already have installed homebrew.</p>\n<p>Install Java from official Oracle website. You can install multiple versions of JDK. It will install on the following path:</p>\n<pre><code> /Library/Java/JavaVirtualMachines/jdk1.8.0_202.jdk/\n /Library/Java/JavaVirtualMachines/jdk1.11.0_2.jdk/\n /Library/Java/JavaVirtualMachines/jdk-14.0.2.jdk/\n</code></pre>\n<p>Without <code>jenv</code>, system will use the java which installed last.</p>\n<p>If you want to use/manage multiple version then you can use <code>jenv</code>:</p>\n<p>Install and configure jenv:</p>\n<pre><code>$ brew install jenv\n$ echo 'export PATH=&quot;$HOME/.jenv/bin:$PATH&quot;' &gt;&gt; ~/.zshrc\n$ echo 'eval &quot;$(jenv init -)&quot;' &gt;&gt; ~/.zshrc\n$ source ~/.zshrc\n</code></pre>\n<p>Add the installed java to jenv:</p>\n<pre><code>$ jenv add /Library/Java/JavaVirtualMachines/jdk1.8.0_202.jdk/Contents/Home\n$ jenv add /Library/Java/JavaVirtualMachines/14.0.2.jdk/Contents/Home\n</code></pre>\n<p>To see all the installed java:</p>\n<pre><code>$ jenv versions\n</code></pre>\n<p>Above command will give the list of installed java:</p>\n<pre><code>  system\n  1.8\n* 1.8.0.291 (set by /Users/lpatel/.jenv/version)\n  14\n  14.0\n  14.0.2\n  oracle64-1.8.0.291\n  oracle64-14.0.2\n</code></pre>\n<p>Configure the java version which you want to use:</p>\n<pre><code>$ jenv global 1.8.0.291\n</code></pre>\n"},{"comments":[{"owner":{"account_id":4528511,"reputation":85092,"user_id":3679676,"accept_rate":100,"display_name":"Jayson Minard"},"score":1,"creation_date":1571673521,"post_id":58474665,"comment_id":103310256,"body_markdown":"yep, this was covered in another answer here.","body":"yep, this was covered in another answer here."}],"tags":[],"owner":{"account_id":10071285,"reputation":2543,"user_id":7444762,"display_name":"Lyncean Patel"},"comment_count":1,"down_vote_count":0,"up_vote_count":10,"is_accepted":false,"score":10,"last_activity_date":1571586517,"creation_date":1571586517,"answer_id":58474665,"question_id":52524112,"body_markdown":"\r\nIf you have multiple versions installed on your machine, add the following in bash profile:\r\n\r\n&gt; export JAVA_HOME_7=$(/usr/libexec/java_home -v1.7)\r\n\r\n&gt; export JAVA_HOME_8=$(/usr/libexec/java_home -v1.8)\r\n\r\n&gt; export JAVA_HOME_9=$(/usr/libexec/java_home -v9)\r\n\r\nAnd add the following aliases:\r\n\r\n&gt; alias java7=&#39;export JAVA_HOME=$JAVA_HOME_7&#39;\r\n \r\n&gt;alias java8=&#39;export JAVA_HOME=$JAVA_HOME_8&#39;\r\n \r\n&gt;alias java9=&#39;export JAVA_HOME=$JAVA_HOME_9&#39;\r\n\r\n\r\nAnd can switch to required version by using the alias:\r\n\r\nIn terminal:\r\n\r\n`~ &gt;&gt; java7\r\nexport JAVA_HOME=$JAVA_7_HOME`","title":"How do I install Java on Mac OSX allowing version switching?","body":"<p>If you have multiple versions installed on your machine, add the following in bash profile:</p>\n\n<blockquote>\n  <p>export JAVA_HOME_7=$(/usr/libexec/java_home -v1.7)</p>\n  \n  <p>export JAVA_HOME_8=$(/usr/libexec/java_home -v1.8)</p>\n  \n  <p>export JAVA_HOME_9=$(/usr/libexec/java_home -v9)</p>\n</blockquote>\n\n<p>And add the following aliases:</p>\n\n<blockquote>\n  <p>alias java7='export JAVA_HOME=$JAVA_HOME_7'</p>\n  \n  <p>alias java8='export JAVA_HOME=$JAVA_HOME_8'</p>\n  \n  <p>alias java9='export JAVA_HOME=$JAVA_HOME_9'</p>\n</blockquote>\n\n<p>And can switch to required version by using the alias:</p>\n\n<p>In terminal:</p>\n\n<p><code>~ &gt;&gt; java7\nexport JAVA_HOME=$JAVA_7_HOME</code></p>\n"},{"tags":[],"owner":{"account_id":2516691,"reputation":5379,"user_id":2187976,"accept_rate":70,"display_name":"Mohamed ALOUANE"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1602767139,"creation_date":1602767139,"answer_id":64372228,"question_id":52524112,"body_markdown":"To stay with a specific major release, activate the AdoptOpenJDK tap with brew tap and then install the desired version with brew cask install:\r\n\r\n    $ brew tap AdoptOpenJDK/openjdk\r\n    $ brew cask install &lt;version&gt;\r\n\r\nTo install AdoptOpenJDK 14 with HotSpot, run:\r\n\r\n    $ brew tap AdoptOpenJDK/openjdk\r\n    $ brew cask install adoptopenjdk14\r\n\r\n","title":"How do I install Java on Mac OSX allowing version switching?","body":"<p>To stay with a specific major release, activate the AdoptOpenJDK tap with brew tap and then install the desired version with brew cask install:</p>\n<pre><code>$ brew tap AdoptOpenJDK/openjdk\n$ brew cask install &lt;version&gt;\n</code></pre>\n<p>To install AdoptOpenJDK 14 with HotSpot, run:</p>\n<pre><code>$ brew tap AdoptOpenJDK/openjdk\n$ brew cask install adoptopenjdk14\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3612273,"reputation":2511,"user_id":3013009,"accept_rate":75,"display_name":"Tom"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1603749128,"creation_date":1603749128,"answer_id":64545486,"question_id":52524112,"body_markdown":"You can use [asdf][1] to install and switch between multiple java versions. It has plugins for other languages as well. You can install asdf with Homebrew \r\n\r\n    brew install asdf\r\n\r\nWhen asdf is configured, install java plugin\r\n\r\n    asdf plugin-add java\r\n\r\nPick a version to install\r\n\r\n    asdf list-all java\r\n\r\nFor example to install and configure adoptopenjdk8\r\n\r\n    asdf install java adoptopenjdk-8.0.272+10\r\n    asdf global java adoptopenjdk-8.0.272+10\r\n\r\nAnd finally if needed, configure JAVA_HOME for your shell. Just add to your shell init script such as ~/.zshrc in case of zsh:\r\n\r\n    . ~/.asdf/plugins/java/set-java-home.zsh\r\n\r\n  [1]: https://asdf-vm.com/#/","title":"How do I install Java on Mac OSX allowing version switching?","body":"<p>You can use <a href=\"https://asdf-vm.com/#/\" rel=\"nofollow noreferrer\">asdf</a> to install and switch between multiple java versions. It has plugins for other languages as well. You can install asdf with Homebrew</p>\n<pre><code>brew install asdf\n</code></pre>\n<p>When asdf is configured, install java plugin</p>\n<pre><code>asdf plugin-add java\n</code></pre>\n<p>Pick a version to install</p>\n<pre><code>asdf list-all java\n</code></pre>\n<p>For example to install and configure adoptopenjdk8</p>\n<pre><code>asdf install java adoptopenjdk-8.0.272+10\nasdf global java adoptopenjdk-8.0.272+10\n</code></pre>\n<p>And finally if needed, configure JAVA_HOME for your shell. Just add to your shell init script such as ~/.zshrc in case of zsh:</p>\n<pre><code>. ~/.asdf/plugins/java/set-java-home.zsh\n</code></pre>\n"},{"comments":[{"owner":{"account_id":4528511,"reputation":85092,"user_id":3679676,"accept_rate":100,"display_name":"Jayson Minard"},"score":0,"creation_date":1634901491,"post_id":64745420,"comment_id":123157471,"body_markdown":"thanks I made updates to the original answer for the simpler shell switching.","body":"thanks I made updates to the original answer for the simpler shell switching."}],"tags":[],"owner":{"account_id":1141351,"reputation":18550,"user_id":1125159,"accept_rate":78,"display_name":"Powers"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1604891634,"creation_date":1604891634,"answer_id":64745420,"question_id":52524112,"body_markdown":"This answer extends on Jayson&#39;s excellent answer with some more opinionated guidance on the best approach for your use case:\r\n\r\n* SDKMAN is the best solution for most users.  It&#39;s easy to use, doesn&#39;t have any weird configuration, and makes managing multiple versions for [lots of other Java ecosystem](https://sdkman.io/sdks) projects easy as well.\r\n* Downloading Java versions via Homebrew and switching versions via jenv is a good option, but requires more work.  For example, [the Homebrew commands in this highly upvoted answer](https://stackoverflow.com/a/29195815/1125159) don&#39;t work anymore.  jenv is slightly harder to setup, the [plugins](https://github.com/jenv/jenv/tree/master/available-plugins) aren&#39;t well documented, and the README says the project is looking for a new maintainer.  jenv is still a great project, solves the job, and the community should be thankful for the wonderful contribution.  SDKMAN is just the better option cause it&#39;s so great.\r\n* Jabba is written is a multi-platform solution that provides the same interface on Mac, Windows, and PC (it&#39;s written in Go and that&#39;s what allows it to be multiplatform).  If you care about a multiplatform solution, this is a huge selling point.  If you only care about running multiple versions on your Mac, then you don&#39;t need a multiplatform solution.  SDKMAN&#39;s support for tens of popular SDKs is what you&#39;re missing out on if you go with Jabba.\r\n\r\nManaging versions manually is probably the worst option.  If you decide to manually switch versions, you can use this Bash code instead of Jayson&#39;s verbose code (code snippet from the [homebrew-openjdk README](https://github.com/AdoptOpenJDK/homebrew-openjdk#switch-between-different-jdk-versions):\r\n\r\n```\r\njdk() {\r\n        version=$1\r\n        export JAVA_HOME=$(/usr/libexec/java_home -v&quot;$version&quot;);\r\n        java -version\r\n }\r\n```\r\n\r\nJayson&#39;s answer provides the basic commands for SDKMAN and jenv.  Here&#39;s more info on [SDKMAN](https://mungingdata.com/java/sdkman-multiple-versions-java-sbt-scala/) and more info on [jenv](https://mungingdata.com/java/jenv-multiple-versions-java/) if you&#39;d like more background on these tools.","title":"How do I install Java on Mac OSX allowing version switching?","body":"<p>This answer extends on Jayson's excellent answer with some more opinionated guidance on the best approach for your use case:</p>\n<ul>\n<li>SDKMAN is the best solution for most users.  It's easy to use, doesn't have any weird configuration, and makes managing multiple versions for <a href=\"https://sdkman.io/sdks\" rel=\"nofollow noreferrer\">lots of other Java ecosystem</a> projects easy as well.</li>\n<li>Downloading Java versions via Homebrew and switching versions via jenv is a good option, but requires more work.  For example, <a href=\"https://stackoverflow.com/a/29195815/1125159\">the Homebrew commands in this highly upvoted answer</a> don't work anymore.  jenv is slightly harder to setup, the <a href=\"https://github.com/jenv/jenv/tree/master/available-plugins\" rel=\"nofollow noreferrer\">plugins</a> aren't well documented, and the README says the project is looking for a new maintainer.  jenv is still a great project, solves the job, and the community should be thankful for the wonderful contribution.  SDKMAN is just the better option cause it's so great.</li>\n<li>Jabba is written is a multi-platform solution that provides the same interface on Mac, Windows, and PC (it's written in Go and that's what allows it to be multiplatform).  If you care about a multiplatform solution, this is a huge selling point.  If you only care about running multiple versions on your Mac, then you don't need a multiplatform solution.  SDKMAN's support for tens of popular SDKs is what you're missing out on if you go with Jabba.</li>\n</ul>\n<p>Managing versions manually is probably the worst option.  If you decide to manually switch versions, you can use this Bash code instead of Jayson's verbose code (code snippet from the <a href=\"https://github.com/AdoptOpenJDK/homebrew-openjdk#switch-between-different-jdk-versions\" rel=\"nofollow noreferrer\">homebrew-openjdk README</a>:</p>\n<pre><code>jdk() {\n        version=$1\n        export JAVA_HOME=$(/usr/libexec/java_home -v&quot;$version&quot;);\n        java -version\n }\n</code></pre>\n<p>Jayson's answer provides the basic commands for SDKMAN and jenv.  Here's more info on <a href=\"https://mungingdata.com/java/sdkman-multiple-versions-java-sbt-scala/\" rel=\"nofollow noreferrer\">SDKMAN</a> and more info on <a href=\"https://mungingdata.com/java/jenv-multiple-versions-java/\" rel=\"nofollow noreferrer\">jenv</a> if you'd like more background on these tools.</p>\n"},{"tags":[],"owner":{"account_id":1349120,"reputation":408,"user_id":1289265,"display_name":"Adam M. Gamboa G."},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1624376200,"creation_date":1624376200,"answer_id":68086625,"question_id":52524112,"body_markdown":"You can install the JDK version in any way you want. \r\n - Homebrew\r\n - SDK man\r\n - Manually\r\n\r\nThen, I recommend using JENV to switch between different versions and use the JDK you need globally or locally. \r\n\r\nYou can find more details about how to install and use JENV here -&gt; \r\nhttps://blog.adamgamboa.dev/2021/06/17/using-jenv-to-switch-jkd-versions/","title":"How do I install Java on Mac OSX allowing version switching?","body":"<p>You can install the JDK version in any way you want.</p>\n<ul>\n<li>Homebrew</li>\n<li>SDK man</li>\n<li>Manually</li>\n</ul>\n<p>Then, I recommend using JENV to switch between different versions and use the JDK you need globally or locally.</p>\n<p>You can find more details about how to install and use JENV here -&gt;\n<a href=\"https://blog.adamgamboa.dev/2021/06/17/using-jenv-to-switch-jkd-versions/\" rel=\"nofollow noreferrer\">https://blog.adamgamboa.dev/2021/06/17/using-jenv-to-switch-jkd-versions/</a></p>\n"}],"owner":{"account_id":4528511,"reputation":85092,"user_id":3679676,"accept_rate":100,"display_name":"Jayson Minard"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":411789,"favorite_count":0,"down_vote_count":0,"up_vote_count":484,"accepted_answer_id":52524114,"answer_count":11,"score":484,"last_activity_date":1695178901,"creation_date":1537986750,"question_id":52524112,"body_markdown":"I want to install OpenJDK Java on Mac OSX and have it work alongside other JDK&#39;s since it is a newer release.  Currently, I downloaded the tar.gz and placed it in my path but that is hard to maintain.  \r\n\r\nThe only other install I found that do more things automatically is the install via Homebrew cask.  It looks like only the current version too:\r\n\r\n    brew cask info java\r\n\r\nShows: \r\n\r\n&gt; java: 13,33:5b8a42f3905b406298b72d750b6919f6&lt;br/&gt;\r\n&gt; https://openjdk.java.net/\r\n\r\nSo I can install it from there, but then what?  Am I stuck only with the new version?\r\n\r\n\r\n","title":"How do I install Java on Mac OSX allowing version switching?","body":"<p>I want to install OpenJDK Java on Mac OSX and have it work alongside other JDK's since it is a newer release.  Currently, I downloaded the tar.gz and placed it in my path but that is hard to maintain.  </p>\n\n<p>The only other install I found that do more things automatically is the install via Homebrew cask.  It looks like only the current version too:</p>\n\n<pre><code>brew cask info java\n</code></pre>\n\n<p>Shows: </p>\n\n<blockquote>\n  <p>java: 13,33:5b8a42f3905b406298b72d750b6919f6<br/>\n  <a href=\"https://openjdk.java.net/\" rel=\"noreferrer\">https://openjdk.java.net/</a></p>\n</blockquote>\n\n<p>So I can install it from there, but then what?  Am I stuck only with the new version?</p>\n"},{"tags":["java","performance","boolean","memory-footprint"],"comments":[{"owner":{"account_id":8834,"reputation":297144,"user_id":16076,"display_name":"Mitch Wheat"},"score":4,"creation_date":1312285970,"post_id":6911563,"comment_id":8231161,"body_markdown":"probably a micro-optimization.  what context is it called in?","body":"probably a micro-optimization.  what context is it called in?"},{"owner":{"account_id":427538,"reputation":34575,"user_id":809357,"accept_rate":87,"display_name":"trailmax"},"score":0,"creation_date":1312286103,"post_id":6911563,"comment_id":8231196,"body_markdown":"Possibly can help this [thread](http://stackoverflow.com/questions/3728616/boolean-vs-boolean-in-java)","body":"Possibly can help this <a href=\"http://stackoverflow.com/questions/3728616/boolean-vs-boolean-in-java\">thread</a>"}],"answers":[{"tags":[],"owner":{"account_id":40190,"reputation":18652,"user_id":116388,"accept_rate":96,"display_name":"Manuel Selva"},"comment_count":0,"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1312285954,"creation_date":1312285954,"answer_id":6911601,"question_id":6911563,"body_markdown":"The last one \r\n\r\n    boolean isItTrue(arg){\r\n        return true;\r\n    }\r\n\r\nI use `Boolean` only if the method needs sometimes to return `null`","title":"Java performance: true vs. Boolean.TRUE","body":"<p>The last one </p>\n\n<pre><code>boolean isItTrue(arg){\n    return true;\n}\n</code></pre>\n\n<p>I use <code>Boolean</code> only if the method needs sometimes to return <code>null</code></p>\n"},{"tags":[],"owner":{"account_id":237499,"reputation":22454,"user_id":505722,"accept_rate":86,"display_name":"Jim"},"comment_count":0,"down_vote_count":0,"up_vote_count":13,"is_accepted":false,"score":13,"last_activity_date":1312285968,"creation_date":1312285968,"answer_id":6911604,"question_id":6911563,"body_markdown":"If there is any performance gain it is so minuscule as to be irrelevant.\r\nBoolean.TRUE and Boolean.FALSE don&#39;t return a new object in any case.","title":"Java performance: true vs. Boolean.TRUE","body":"<p>If there is any performance gain it is so minuscule as to be irrelevant.\nBoolean.TRUE and Boolean.FALSE don't return a new object in any case.</p>\n"},{"tags":[],"owner":{"account_id":152622,"reputation":490044,"user_id":367273,"accept_rate":96,"display_name":"NPE"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1312286291,"creation_date":1312285986,"answer_id":6911608,"question_id":6911563,"body_markdown":"My rules of thumb are as follows:\r\n\r\n1. The default choice is the primitive type (`boolean`).\r\n1. If I need nullability or need to store the values in a container, I use the class (`Boolean`).\r\n\r\nWith this in mind, my default choice would be:\r\n\r\n    boolean isItTrue(arg){\r\n        return true;\r\n    }\r\n\r\nAs far as performance is concerned, the only thing that seems certain is that it&#39;s hard to imagine a scenario where using `Boolean` would be *faster* than using `boolean`. Whether it would be slower or the same depends on a lot of things and it&#39;s impossible to answer in general.\r\n\r\nIf you really care about this, profile the code where it matters!\r\n","title":"Java performance: true vs. Boolean.TRUE","body":"<p>My rules of thumb are as follows:</p>\n\n<ol>\n<li>The default choice is the primitive type (<code>boolean</code>).</li>\n<li>If I need nullability or need to store the values in a container, I use the class (<code>Boolean</code>).</li>\n</ol>\n\n<p>With this in mind, my default choice would be:</p>\n\n<pre><code>boolean isItTrue(arg){\n    return true;\n}\n</code></pre>\n\n<p>As far as performance is concerned, the only thing that seems certain is that it's hard to imagine a scenario where using <code>Boolean</code> would be <em>faster</em> than using <code>boolean</code>. Whether it would be slower or the same depends on a lot of things and it's impossible to answer in general.</p>\n\n<p>If you really care about this, profile the code where it matters!</p>\n"},{"comments":[{"owner":{"account_id":47283,"reputation":703927,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"score":3,"creation_date":1312286183,"post_id":6911618,"comment_id":8231219,"body_markdown":"You won&#39;t save any space, because the `Boolean.TRUE` and `Boolean.FALSE` objects will be created anyway if your program causes the `Boolean` class to be initialized.","body":"You won&#39;t save any space, because the <code>Boolean.TRUE</code> and <code>Boolean.FALSE</code> objects will be created anyway if your program causes the <code>Boolean</code> class to be initialized."},{"owner":{"account_id":415656,"reputation":17856,"user_id":790582,"display_name":"Marcus Granstr&#246;m"},"score":0,"creation_date":1312286703,"post_id":6911618,"comment_id":8231350,"body_markdown":"Will it inititalize a Boolean in the background? I was under the impression that it didn&#39;t.","body":"Will it inititalize a Boolean in the background? I was under the impression that it didn&#39;t."},{"owner":{"account_id":47283,"reputation":703927,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"score":0,"creation_date":1312287928,"post_id":6911618,"comment_id":8231688,"body_markdown":"Not in the background.  But the JVM spec says that the initialization will occur if any static is used, any static method is called or any object instance is created (and other things).  If any of those occur, the `TRUE` and `FALSE` instances will be created and the space will be used ... whether or not your application uses the instances.","body":"Not in the background.  But the JVM spec says that the initialization will occur if any static is used, any static method is called or any object instance is created (and other things).  If any of those occur, the <code>TRUE</code> and <code>FALSE</code> instances will be created and the space will be used ... whether or not your application uses the instances."},{"owner":{"account_id":12404,"reputation":62016,"user_id":24396,"accept_rate":74,"display_name":"Steve Kuo"},"score":0,"creation_date":1371850243,"post_id":6911618,"comment_id":24989391,"body_markdown":"`Boolean.TRUE` is a static field and is reused across all `true`s autoboxed to a `Boolean`","body":"<code>Boolean.TRUE</code> is a static field and is reused across all <code>true</code>s autoboxed to a <code>Boolean</code>"}],"tags":[],"owner":{"account_id":415656,"reputation":17856,"user_id":790582,"display_name":"Marcus Granstr&#246;m"},"comment_count":4,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1312286018,"creation_date":1312286018,"answer_id":6911618,"question_id":6911563,"body_markdown":"java.lang.Boolean takes 16 bytes.\r\n\r\nthis is the way to go if you are only looking for performance and memory size issues:\r\n\r\n    boolean isItTrue(arg){\r\n        return true;\r\n    }","title":"Java performance: true vs. Boolean.TRUE","body":"<p>java.lang.Boolean takes 16 bytes.</p>\n\n<p>this is the way to go if you are only looking for performance and memory size issues:</p>\n\n<pre><code>boolean isItTrue(arg){\n    return true;\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":214990,"reputation":74717,"user_id":469300,"accept_rate":74,"display_name":"salezica"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1312286022,"creation_date":1312286022,"answer_id":6911619,"question_id":6911563,"body_markdown":"By that logic, the reference to the static object itself is as costly as the truth value, if not more.\r\n\r\nUsing objects may be somewhat slower than primitives, but I wouldn&#39;t worry: the difference is irrelevant.","title":"Java performance: true vs. Boolean.TRUE","body":"<p>By that logic, the reference to the static object itself is as costly as the truth value, if not more.</p>\n\n<p>Using objects may be somewhat slower than primitives, but I wouldn't worry: the difference is irrelevant.</p>\n"},{"comments":[{"owner":{"account_id":348869,"reputation":1910,"user_id":683825,"accept_rate":100,"display_name":"Paul Cager"},"score":1,"creation_date":1312294032,"post_id":6911627,"comment_id":8233707,"body_markdown":"I do not think your claim that &quot;They will be much faster&quot; is correct. Any performance difference would be minute.","body":"I do not think your claim that &quot;They will be much faster&quot; is correct. Any performance difference would be minute."},{"owner":{"account_id":147204,"reputation":15091,"user_id":358163,"accept_rate":88,"display_name":"Talha Ahmed Khan"},"score":1,"creation_date":1312359944,"post_id":6911627,"comment_id":8248232,"body_markdown":"Hay, I have added some facts after implementing it. Take a look.","body":"Hay, I have added some facts after implementing it. Take a look."},{"owner":{"account_id":348869,"reputation":1910,"user_id":683825,"accept_rate":100,"display_name":"Paul Cager"},"score":4,"creation_date":1312362709,"post_id":6911627,"comment_id":8249058,"body_markdown":"Micro-benchamarks are notoriously difficult to write properly (hence the usual advice is to profile your real application). Have a look at http://www.ibm.com/developerworks/java/library/j-jtp02225/index.html and http://wikis.sun.com/display/HotSpotInternals/MicroBenchmarks","body":"Micro-benchamarks are notoriously difficult to write properly (hence the usual advice is to profile your real application). Have a look at <a href=\"http://www.ibm.com/developerworks/java/library/j-jtp02225/index.html\" rel=\"nofollow noreferrer\">ibm.com/developerworks/java/library/j-jtp02225/index.html</a> and <a href=\"http://wikis.sun.com/display/HotSpotInternals/MicroBenchmarks\" rel=\"nofollow noreferrer\">wikis.sun.com/display/HotSpotInternals/MicroBenchmarks</a>"},{"owner":{"account_id":47283,"reputation":703927,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"score":3,"creation_date":1312442608,"post_id":6911627,"comment_id":8267944,"body_markdown":"This benchmark has flaws that could render the results invalid.  Even if the numbers were valid, they are not representative of how the method is likely to be used, and hence of the context in which the JIT compiler would optimize them.  Finally, the best-to-worst delta is 2.3 seconds for 2^31 calls == less than a nano-second == 2 or 3 CPU clock ticks on stock hardware.  If that is representative, it is clearly down at the level where it will have minimal impact on the performance of a typical application.","body":"This benchmark has flaws that could render the results invalid.  Even if the numbers were valid, they are not representative of how the method is likely to be used, and hence of the context in which the JIT compiler would optimize them.  Finally, the best-to-worst delta is 2.3 seconds for 2^31 calls == less than a nano-second == 2 or 3 CPU clock ticks on stock hardware.  If that is representative, it is clearly down at the level where it will have minimal impact on the performance of a typical application."}],"tags":[],"owner":{"account_id":147204,"reputation":15091,"user_id":358163,"accept_rate":88,"display_name":"Talha Ahmed Khan"},"comment_count":4,"down_vote_count":3,"up_vote_count":10,"is_accepted":false,"score":7,"last_activity_date":1548518526,"creation_date":1312286056,"answer_id":6911627,"question_id":6911563,"body_markdown":"They will be much faster. I don&#39;t think there will be any difference between these two.\r\n\r\n    Boolean isItTrue(arg){ \r\n        return Boolean.TRUE;\r\n    }\r\n    \r\n    boolean isItTrue(arg){\r\n        return true;\r\n    }\r\n\r\nBut other implementation will be slower because it will be boxing and unboxing on the back end with will take some time of processor.\r\n\r\n-------------\r\n\r\n**Edit**\r\n\r\nI have collected some facts by implementing the 4 different ways. Just want to share it with you, I don&#39;t if its the write way to do that.\r\n\r\n    Boolean isItTrue(){ \r\n        return Boolean.TRUE;\r\n    }\r\n    \r\n    Free Memory before start --&gt; 16030936\r\n    Time taken in Secs --&gt; 7.844\r\n    Free Memory After Process --&gt; 15940472\r\n    Memory Usage --&gt; 90464\r\n    \r\n---------\r\n    \r\n    boolean isItTrue(){\r\n        return Boolean.TRUE;\r\n    }\r\n    \r\n    Free Memory before start --&gt; 16030936\r\n    Time taken in Secs --&gt; 10.109\r\n    Free Memory After Process --&gt; 15940472\r\n    Memory Usage --&gt; 90464\r\n\r\n---------\r\n\r\n    Boolean isItTrue(){\r\n        return true;\r\n    }\r\n    \r\n    Free Memory before start --&gt; 16030936\r\n    Time taken in Secs --&gt; 7.906\r\n    Free Memory After Process --&gt; 15940472\r\n    Memory Usage --&gt; 90464\r\n\r\n---------    \r\n    \r\n    boolean isItTrue(){\r\n        return true;\r\n    }\r\n    \r\n    Free Memory before start --&gt; 16030936\r\n    Time taken in Secs --&gt; 7.828\r\n    Free Memory After Process --&gt; 15940472\r\n    Memory Usage --&gt; 90464\r\n\r\n---------\r\n\r\n*Main Class*\r\n\r\n\tpublic static void main(String[] args){\r\n\t\tNewClass n = new NewClass();\r\n\t\t\r\n\t\tlong sysTime = System.currentTimeMillis();\r\n\t\t\r\n\t\tRuntime rt = Runtime.getRuntime();\r\n\t\tlong freeMem = rt.freeMemory();\r\n\t\tSystem.out.println( &quot;Free Memory before start --&gt; &quot; + freeMem );\r\n\t\tfor( int i = 0; i &lt; Integer.MAX_VALUE; i++ ){\r\n\t\t\tn.isItTrue();\r\n\t\t}\r\n\t\tSystem.out.println( &quot;Time taken in Secs --&gt; &quot; + (System.currentTimeMillis() - sysTime)/1000D);\r\n\t\tSystem.out.println( &quot;Free Memory After Process --&gt; &quot; + rt.freeMemory() );\r\n\t\tSystem.out.println( &quot;Memory Usage --&gt; &quot; + ( freeMem - rt.freeMemory() ) );\r\n\t}","title":"Java performance: true vs. Boolean.TRUE","body":"<p>They will be much faster. I don't think there will be any difference between these two.</p>\n\n<pre><code>Boolean isItTrue(arg){ \n    return Boolean.TRUE;\n}\n\nboolean isItTrue(arg){\n    return true;\n}\n</code></pre>\n\n<p>But other implementation will be slower because it will be boxing and unboxing on the back end with will take some time of processor.</p>\n\n<hr>\n\n<p><strong>Edit</strong></p>\n\n<p>I have collected some facts by implementing the 4 different ways. Just want to share it with you, I don't if its the write way to do that.</p>\n\n<pre><code>Boolean isItTrue(){ \n    return Boolean.TRUE;\n}\n\nFree Memory before start --&gt; 16030936\nTime taken in Secs --&gt; 7.844\nFree Memory After Process --&gt; 15940472\nMemory Usage --&gt; 90464\n</code></pre>\n\n<hr>\n\n<pre><code>boolean isItTrue(){\n    return Boolean.TRUE;\n}\n\nFree Memory before start --&gt; 16030936\nTime taken in Secs --&gt; 10.109\nFree Memory After Process --&gt; 15940472\nMemory Usage --&gt; 90464\n</code></pre>\n\n<hr>\n\n<pre><code>Boolean isItTrue(){\n    return true;\n}\n\nFree Memory before start --&gt; 16030936\nTime taken in Secs --&gt; 7.906\nFree Memory After Process --&gt; 15940472\nMemory Usage --&gt; 90464\n</code></pre>\n\n<hr>\n\n<pre><code>boolean isItTrue(){\n    return true;\n}\n\nFree Memory before start --&gt; 16030936\nTime taken in Secs --&gt; 7.828\nFree Memory After Process --&gt; 15940472\nMemory Usage --&gt; 90464\n</code></pre>\n\n<hr>\n\n<p><em>Main Class</em></p>\n\n<pre><code>public static void main(String[] args){\n    NewClass n = new NewClass();\n\n    long sysTime = System.currentTimeMillis();\n\n    Runtime rt = Runtime.getRuntime();\n    long freeMem = rt.freeMemory();\n    System.out.println( \"Free Memory before start --&gt; \" + freeMem );\n    for( int i = 0; i &lt; Integer.MAX_VALUE; i++ ){\n        n.isItTrue();\n    }\n    System.out.println( \"Time taken in Secs --&gt; \" + (System.currentTimeMillis() - sysTime)/1000D);\n    System.out.println( \"Free Memory After Process --&gt; \" + rt.freeMemory() );\n    System.out.println( \"Memory Usage --&gt; \" + ( freeMem - rt.freeMemory() ) );\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":428580,"reputation":35982,"user_id":811001,"accept_rate":85,"display_name":"tskuzzy"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1312286164,"creation_date":1312286164,"answer_id":6911646,"question_id":6911563,"body_markdown":"Use the last one (just `boolean`). Even if the compiler optimizes them all to the same thing, at the very least you&#39;re making the compiler&#39;s job easier (it&#39;s not an easy job you know!).\r\n\r\nPlus it&#39;s fewer keystrokes (don&#39;t need to press shift). But really, the only reason you should use the wrapper class is when you need the ability to set it to `null`, and for use in generic data structures like `LinkedList&lt;E&gt;`.","title":"Java performance: true vs. Boolean.TRUE","body":"<p>Use the last one (just <code>boolean</code>). Even if the compiler optimizes them all to the same thing, at the very least you're making the compiler's job easier (it's not an easy job you know!).</p>\n\n<p>Plus it's fewer keystrokes (don't need to press shift). But really, the only reason you should use the wrapper class is when you need the ability to set it to <code>null</code>, and for use in generic data structures like <code>LinkedList&lt;E&gt;</code>.</p>\n"},{"tags":[],"owner":{"account_id":30285,"reputation":55210,"user_id":82511,"accept_rate":71,"display_name":"djna"},"comment_count":0,"down_vote_count":0,"up_vote_count":12,"is_accepted":false,"score":12,"last_activity_date":1312286699,"creation_date":1312286299,"answer_id":6911673,"question_id":6911563,"body_markdown":"Favour clarity for the code maintainer over such micro-optimisations. The question should not be &quot;which is smaller/faster&quot;, first which expresses what you mean.\r\n\r\nIf the method returns a Boolean object then whoever receives needs to decide whether there is a possibility that it might be null, and that if it **is** null that it might mean something different from true/false, like &quot;we don&#39;t know&quot;.\r\n\r\nSo return type of boolean, if that is what you mean, otherwise, if you want to allow Null, then Boolean.\r\n\r\nIf returning a boolean then\r\n\r\n    return true; // or false\r\n\r\nmust be better than relying on autoboxing, again for the sake of clarity as well as performance.\r\n\r\nIf returning Boolean then\r\n\r\n    return Boolean.TRUE\r\n\r\nmust be good, it just avoids creating extra garbage, much as I oppose micro-optimisation I see no value in being wilfully inefficient. I&#39;d argue that it&#39;s also clearer in that you are conspicuously matching the return type.\r\n\r\n\r\n","title":"Java performance: true vs. Boolean.TRUE","body":"<p>Favour clarity for the code maintainer over such micro-optimisations. The question should not be \"which is smaller/faster\", first which expresses what you mean.</p>\n\n<p>If the method returns a Boolean object then whoever receives needs to decide whether there is a possibility that it might be null, and that if it <strong>is</strong> null that it might mean something different from true/false, like \"we don't know\".</p>\n\n<p>So return type of boolean, if that is what you mean, otherwise, if you want to allow Null, then Boolean.</p>\n\n<p>If returning a boolean then</p>\n\n<pre><code>return true; // or false\n</code></pre>\n\n<p>must be better than relying on autoboxing, again for the sake of clarity as well as performance.</p>\n\n<p>If returning Boolean then</p>\n\n<pre><code>return Boolean.TRUE\n</code></pre>\n\n<p>must be good, it just avoids creating extra garbage, much as I oppose micro-optimisation I see no value in being wilfully inefficient. I'd argue that it's also clearer in that you are conspicuously matching the return type.</p>\n"},{"tags":[],"owner":{"account_id":47283,"reputation":703927,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"comment_count":0,"down_vote_count":0,"up_vote_count":33,"is_accepted":true,"score":33,"last_activity_date":1695178448,"creation_date":1312287077,"answer_id":6911856,"question_id":6911563,"body_markdown":"Firstly, the performance advantage of using any one over the others is *most likely* to be too small to be relevant&lt;sup&gt;1&lt;/sup&gt;.  Code simplicity / readability / maintainability is a far more important ... in the vast majority of cases.\r\n\r\n&gt; Or is it optimized on compiler level and all `true` and `false` are replaced by references to the static objects to save memory?\r\n\r\nThere&#39;s a fundamental misunderstanding here.  The `boolean` type is a primitive (not reference) type.  The `true` and `false` values cannot be replaced with references.  Furthermore, the space used to hold representations of `true` and `false` depends on the context.  It is often a single byte ... which is significantly less than the 8 bytes needed to store a reference on a 64-bit JVM (with oops compression disabled).  So that &quot;optimization&quot; would NOT save memory even if it was technically possible.\r\n\r\n-----------\r\n\r\nNone of your examples involve creation of `Boolean` instances&lt;sup&gt;2&lt;/sup&gt; so we can discount that from our performance analysis.\r\n\r\n\r\n-----------\r\n\r\n    # Example 1\r\n    boolean isItTrue(arg){\r\n        return true;\r\n    }\r\n\r\nThis one will be equal to or faster than all of the others because it simply entails setting a register to zero.\r\n\r\n-----------\r\n\r\n    # Example 2\r\n    Boolean isItTrue(arg){ \r\n        return Boolean.TRUE;\r\n    }\r\n\r\nTaken in isolation, this has to load a static reference from memory, rather than zero a register.  However, the JIT compiler may be able to optimize this away in some circumstances.\r\n\r\n------------\r\n\r\n    # Example 3\r\n    Boolean isItTrue(arg){\r\n        return true;\r\n    }\r\n\r\nOn the face of it, this involve a call to `Boolean.valueOf(true)` to &quot;box&quot; the `true`, but the JIT compiler should be able to optimize it to the same code as the previous one by inlining the call.\r\n\r\n------------\r\n\r\n    # Example 4\r\n    boolean isItTrue(arg){\r\n        return Boolean.TRUE\r\n    }\r\n\r\nOn the face of it, this involves a call to `Boolean.booleanValue(Boolean.TRUE)` to &quot;unbox&quot; the `Boolean`.  This call can be inlined.  It is also possible that the JIT compiler can avoid loading the reference to the `Boolean` object and fetching its value field.\r\n\r\n------------\r\n\r\nIn summary, the relative performance of your 4 examples depends on how successful the JIT compiler is in optimizing.  That will depend on the context, the specifics of the JIT compiler, the JVM settings, and so on.  In theory, the JIT compiler could produce the same (optimal) code for all of them.  In practice, the difference will be insignificant in nearly all cases.  (And this is not a practical example anyway.)\r\n\r\n---------------------\r\n\r\n&lt;sup&gt;1 - [This benchmark](https://stackoverflow.com/a/6911627/139985) unwittingly demonstrates this.  If the results it presents are to be believed, then the performance difference between the best and worst versions is less than 1 ns per call.&lt;br&gt;\r\n2 - It is theoretically possible that 3 of the 4 could trigger the initialization of the `Boolean` class AND that your application wouldn&#39;t otherwise have done that.  In that highly unlikely event, your entire application will allocate 2 objects that wouldn&#39;t otherwise have been allocated.  The initialization will probably take a few microseconds, and consume a few bytes of RAM (less than 50) in the long term.  This is irrelevant in practice.&lt;/sup&gt;","title":"Java performance: true vs. Boolean.TRUE","body":"<p>Firstly, the performance advantage of using any one over the others is <em>most likely</em> to be too small to be relevant<sup>1</sup>.  Code simplicity / readability / maintainability is a far more important ... in the vast majority of cases.</p>\n<blockquote>\n<p>Or is it optimized on compiler level and all <code>true</code> and <code>false</code> are replaced by references to the static objects to save memory?</p>\n</blockquote>\n<p>There's a fundamental misunderstanding here.  The <code>boolean</code> type is a primitive (not reference) type.  The <code>true</code> and <code>false</code> values cannot be replaced with references.  Furthermore, the space used to hold representations of <code>true</code> and <code>false</code> depends on the context.  It is often a single byte ... which is significantly less than the 8 bytes needed to store a reference on a 64-bit JVM (with oops compression disabled).  So that &quot;optimization&quot; would NOT save memory even if it was technically possible.</p>\n<hr />\n<p>None of your examples involve creation of <code>Boolean</code> instances<sup>2</sup> so we can discount that from our performance analysis.</p>\n<hr />\n<pre><code># Example 1\nboolean isItTrue(arg){\n    return true;\n}\n</code></pre>\n<p>This one will be equal to or faster than all of the others because it simply entails setting a register to zero.</p>\n<hr />\n<pre><code># Example 2\nBoolean isItTrue(arg){ \n    return Boolean.TRUE;\n}\n</code></pre>\n<p>Taken in isolation, this has to load a static reference from memory, rather than zero a register.  However, the JIT compiler may be able to optimize this away in some circumstances.</p>\n<hr />\n<pre><code># Example 3\nBoolean isItTrue(arg){\n    return true;\n}\n</code></pre>\n<p>On the face of it, this involve a call to <code>Boolean.valueOf(true)</code> to &quot;box&quot; the <code>true</code>, but the JIT compiler should be able to optimize it to the same code as the previous one by inlining the call.</p>\n<hr />\n<pre><code># Example 4\nboolean isItTrue(arg){\n    return Boolean.TRUE\n}\n</code></pre>\n<p>On the face of it, this involves a call to <code>Boolean.booleanValue(Boolean.TRUE)</code> to &quot;unbox&quot; the <code>Boolean</code>.  This call can be inlined.  It is also possible that the JIT compiler can avoid loading the reference to the <code>Boolean</code> object and fetching its value field.</p>\n<hr />\n<p>In summary, the relative performance of your 4 examples depends on how successful the JIT compiler is in optimizing.  That will depend on the context, the specifics of the JIT compiler, the JVM settings, and so on.  In theory, the JIT compiler could produce the same (optimal) code for all of them.  In practice, the difference will be insignificant in nearly all cases.  (And this is not a practical example anyway.)</p>\n<hr />\n<p><sup>1 - <a href=\"https://stackoverflow.com/a/6911627/139985\">This benchmark</a> unwittingly demonstrates this.  If the results it presents are to be believed, then the performance difference between the best and worst versions is less than 1 ns per call.<br>\n2 - It is theoretically possible that 3 of the 4 could trigger the initialization of the <code>Boolean</code> class AND that your application wouldn't otherwise have done that.  In that highly unlikely event, your entire application will allocate 2 objects that wouldn't otherwise have been allocated.  The initialization will probably take a few microseconds, and consume a few bytes of RAM (less than 50) in the long term.  This is irrelevant in practice.</sup></p>\n"}],"owner":{"account_id":262703,"reputation":1774,"user_id":547750,"accept_rate":72,"display_name":"Dima"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":28341,"favorite_count":0,"down_vote_count":0,"up_vote_count":36,"accepted_answer_id":6911856,"answer_count":9,"score":36,"last_activity_date":1695178448,"creation_date":1312285784,"question_id":6911563,"body_markdown":"Which of the following is better in terms of performance and efficient memory usage?\r\n\r\n    Boolean isItTrue(arg){ \r\n        return Boolean.TRUE;\r\n    }\r\n\r\n    boolean isItTrue(arg){\r\n        return Boolean.TRUE\r\n    }\r\n\r\n    Boolean isItTrue(arg){\r\n        return true;\r\n    }\r\n\r\n    boolean isItTrue(arg){\r\n        return true;\r\n    }\r\n\r\nIt should be faster and easier to work with primitive types, but on the other hand, when using a reference to a static object, no new value is created. Or is it optimized on compiler level and all &lt;code&gt;true&lt;/code&gt; and &lt;code&gt;false&lt;/code&gt; are replaced by references to the static objects to save memory?\r\n\r\n","title":"Java performance: true vs. Boolean.TRUE","body":"<p>Which of the following is better in terms of performance and efficient memory usage?</p>\n\n<pre><code>Boolean isItTrue(arg){ \n    return Boolean.TRUE;\n}\n\nboolean isItTrue(arg){\n    return Boolean.TRUE\n}\n\nBoolean isItTrue(arg){\n    return true;\n}\n\nboolean isItTrue(arg){\n    return true;\n}\n</code></pre>\n\n<p>It should be faster and easier to work with primitive types, but on the other hand, when using a reference to a static object, no new value is created. Or is it optimized on compiler level and all <code>true</code> and <code>false</code> are replaced by references to the static objects to save memory?</p>\n"},{"tags":["java","gradle","jar","dependencies"],"comments":[{"owner":{"account_id":1692034,"reputation":3196,"user_id":1554195,"display_name":"tquadrat"},"score":0,"creation_date":1695015773,"post_id":77124235,"comment_id":135962304,"body_markdown":"*Gradle* does know about the JARs **only** because of the `implementation` (or equivalent) lines, it does not scan the source location for what is available there. The *Java compiler* looks for libraries it needs during compilation, but that does not know about the Gradle repositories. Usually, you do not need to list all JARs in the `build.xml` as the libraries list their dependencies in POM files, but these may be missing in your setup.","body":"<i>Gradle</i> does know about the JARs <b>only</b> because of the <code>implementation</code> (or equivalent) lines, it does not scan the source location for what is available there. The <i>Java compiler</i> looks for libraries it needs during compilation, but that does not know about the Gradle repositories. Usually, you do not need to list all JARs in the <code>build.xml</code> as the libraries list their dependencies in POM files, but these may be missing in your setup."},{"owner":{"account_id":5404,"reputation":22100,"user_id":8681,"accept_rate":67,"display_name":"Jorn"},"score":1,"creation_date":1695022580,"post_id":77124235,"comment_id":135963294,"body_markdown":"Does [this](https://stackoverflow.com/a/23897638/8681) answer your question?","body":"Does <a href=\"https://stackoverflow.com/a/23897638/8681\">this</a> answer your question?"},{"owner":{"account_id":25597,"reputation":9442,"user_id":65889,"accept_rate":79,"display_name":"halloleo"},"score":1,"creation_date":1695024708,"post_id":77124235,"comment_id":135963675,"body_markdown":"@Jorn That got me on the right track: It needs the keyword `implementation` instead of `compile`, but it does _exactly_ what I want! Super Thanks. -- Please, please make this info into an answer _here_ (or let me do it). Please do _not_ vote for closing this question, because the other _question_ (where the helpful answer comes from) is quite different to this question here!","body":"@Jorn That got me on the right track: It needs the keyword <code>implementation</code> instead of <code>compile</code>, but it does <i>exactly</i> what I want! Super Thanks. -- Please, please make this info into an answer <i>here</i> (or let me do it). Please do <i>not</i> vote for closing this question, because the other <i>question</i> (where the helpful answer comes from) is quite different to this question here!"}],"answers":[{"tags":[],"owner":{"account_id":25597,"reputation":9442,"user_id":65889,"accept_rate":79,"display_name":"halloleo"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1695177221,"creation_date":1695177221,"answer_id":77138947,"question_id":77124235,"body_markdown":"Applying the [tip] from [Jorn]&#39;s comment, the problem can be solved for Gradle 8 with the following directive in `build.gradle`:\r\n\r\n```\r\ndependencies {\r\n    // Use all libraries provided as jars in the lib folder\r\n    implementation fileTree(dir: &#39;lib&#39;, include: [&#39;*.jar&#39;])\r\n}\r\n```\r\n\r\nWhen using this directive you do not need to provide the `repositories flatDir&quot; directive anymore. \r\n\r\nHowever, make sure in your `lib` folder is only _one_ JAR version per library. If the directory contains multiple versions of a library (e.g. `xmlbeans-2.6.0.jar` and `xmlbeans-5.1.1.jar`), then Gradle doesn&#39;t seem to be smart enough to use the newest one by default and you might get (unexpected) compile errors.\r\n\r\n  [Jorn]: https://stackoverflow.com/users/8681/jorn\r\n  [tip]: https://stackoverflow.com/a/23897638/65889","title":"How to tell Gradle to use for all Java imports the JAR files given in a lib folder and not to require the implementation line for these JARs?","body":"<p>Applying the <a href=\"https://stackoverflow.com/a/23897638/65889\">tip</a> from <a href=\"https://stackoverflow.com/users/8681/jorn\">Jorn</a>'s comment, the problem can be solved for Gradle 8 with the following directive in <code>build.gradle</code>:</p>\n<pre><code>dependencies {\n    // Use all libraries provided as jars in the lib folder\n    implementation fileTree(dir: 'lib', include: ['*.jar'])\n}\n</code></pre>\n<p>When using this directive you do not need to provide the `repositories flatDir&quot; directive anymore.</p>\n<p>However, make sure in your <code>lib</code> folder is only <em>one</em> JAR version per library. If the directory contains multiple versions of a library (e.g. <code>xmlbeans-2.6.0.jar</code> and <code>xmlbeans-5.1.1.jar</code>), then Gradle doesn't seem to be smart enough to use the newest one by default and you might get (unexpected) compile errors.</p>\n"}],"owner":{"account_id":25597,"reputation":9442,"user_id":65889,"accept_rate":79,"display_name":"halloleo"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":75,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":77138947,"answer_count":1,"score":0,"last_activity_date":1695177221,"creation_date":1695002721,"question_id":77124235,"body_markdown":"I am just starting out with Gradle and I am converting an unmanaged (Eclipse) Java project into a Gradle command line project.\r\n\r\nAll library JARs are in a local directory (the machine is air-gapped and has no access to a Maven repo or similar), so I tell Gradle about this in the `build.gradle` file with:\r\n\r\n```\r\nrepositories {\r\n    flatDir {\r\n        dirs(&quot;lib&quot;)\r\n    }\r\n}\r\n```\r\n\r\nIn this directory I have, e.g. the jar `json-simple-1.1.1.jar` which I use in my Java code with\r\n\r\n    import org.json.simple.JSONArray;\r\n\r\nHowever, this does not seem to be enough for Gradle: _Additionally_ I need to add to `build.gradle`:\r\n\r\n```\r\ndependencies {\r\n    implementation group: &#39;com.googlecode.json-simple&#39;, name: &#39;json-simple&#39;, version: &#39;1.1.1&#39;\r\n}\r\n```\r\n\r\nNow Gradle can build my sample project. So far so good. \r\n\r\nHowever in my real project I have many JAR in the lib folder and it seems tedious to look up the implementation spec for each jar file. \r\n\r\nFor each library used in the Java code is only _one_ JAR file in the lib directory available, so is there a way to tell Gradle to just use the JAR file it finds in the lib folder as the implementation? Then I do not need to write out all the (superfluous) `implementation ...` lines.\r\n\r\nThanks for any pointer!\r\n\r\n&lt;!--  LocalWords:  Gradle\r\n --&gt;\r\n","title":"How to tell Gradle to use for all Java imports the JAR files given in a lib folder and not to require the implementation line for these JARs?","body":"<p>I am just starting out with Gradle and I am converting an unmanaged (Eclipse) Java project into a Gradle command line project.</p>\n<p>All library JARs are in a local directory (the machine is air-gapped and has no access to a Maven repo or similar), so I tell Gradle about this in the <code>build.gradle</code> file with:</p>\n<pre><code>repositories {\n    flatDir {\n        dirs(&quot;lib&quot;)\n    }\n}\n</code></pre>\n<p>In this directory I have, e.g. the jar <code>json-simple-1.1.1.jar</code> which I use in my Java code with</p>\n<pre><code>import org.json.simple.JSONArray;\n</code></pre>\n<p>However, this does not seem to be enough for Gradle: <em>Additionally</em> I need to add to <code>build.gradle</code>:</p>\n<pre><code>dependencies {\n    implementation group: 'com.googlecode.json-simple', name: 'json-simple', version: '1.1.1'\n}\n</code></pre>\n<p>Now Gradle can build my sample project. So far so good.</p>\n<p>However in my real project I have many JAR in the lib folder and it seems tedious to look up the implementation spec for each jar file.</p>\n<p>For each library used in the Java code is only <em>one</em> JAR file in the lib directory available, so is there a way to tell Gradle to just use the JAR file it finds in the lib folder as the implementation? Then I do not need to write out all the (superfluous) <code>implementation ...</code> lines.</p>\n<p>Thanks for any pointer!</p>\n\n"},{"tags":["java","spring-boot","rest","jpa"],"comments":[{"owner":{"account_id":2673407,"reputation":44640,"user_id":2310289,"display_name":"Scary Wombat"},"score":0,"creation_date":1695172269,"post_id":77138595,"comment_id":135987564,"body_markdown":"Have a look at https://www.baeldung.com/spring-data-jpa-delete -","body":"Have a look at <a href=\"https://www.baeldung.com/spring-data-jpa-delete\" rel=\"nofollow noreferrer\">baeldung.com/spring-data-jpa-delete</a> -"},{"owner":{"account_id":231721,"reputation":20460,"user_id":496099,"display_name":"Chris"},"score":0,"creation_date":1695185089,"post_id":77138595,"comment_id":135988525,"body_markdown":"If you don&#39;t want the user deleted, CascadeType.ALL is not what you want to be using. All includes CascadeType.Delete - so you are cascading the delete call on contact to the referenced User. Remove that and you should be good.","body":"If you don&#39;t want the user deleted, CascadeType.ALL is not what you want to be using. All includes CascadeType.Delete - so you are cascading the delete call on contact to the referenced User. Remove that and you should be good."},{"owner":{"account_id":22178147,"reputation":23,"user_id":16422322,"display_name":"altini"},"score":0,"creation_date":1695202522,"post_id":77138595,"comment_id":135991461,"body_markdown":"@Chris, thank you this fixed the issue of removing the CascadeType.ALL.","body":"@Chris, thank you this fixed the issue of removing the CascadeType.ALL."}],"owner":{"account_id":22178147,"reputation":23,"user_id":16422322,"display_name":"altini"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":65,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1695176382,"creation_date":1695168591,"question_id":77138595,"body_markdown":"I have a table of users and contacts, A user has many contacts and a contact has only one user.\r\nWhen I try to delete a contact which references the user, the user is also being deleted.\r\n\r\nHere is the code for the user model:\r\n```\r\n @JsonIgnore\r\n    @OneToMany(cascade = CascadeType.ALL, mappedBy = &quot;user&quot;, fetch = FetchType.EAGER)\r\n    private List&lt;Contact&gt; contacts;\r\n\r\n    public void addContact(Contact contact){\r\n        contacts.add(contact);\r\n    }\r\n    public void removeContact(Contact contact){\r\n        contacts.remove(contact);\r\n    }\r\n```\r\nAnd the contact model:\r\n```\r\n@JsonIgnore\r\n    @ManyToOne(cascade = CascadeType.ALL,)\r\n    @JoinColumn(name=&quot;user_id&quot;, referencedColumnName = &quot;id&quot;)\r\n    private User user;\r\n```\r\n\r\nI have tried putting orphanRemoval = false after CascadeType.ALL to the contact table but it does not recognise it, I think that would solve the issue but its only being recognised on the User Side.\r\n","title":"How to delete record from a table without deleting the referenced user in Spring Boot JPA?&quot;","body":"<p>I have a table of users and contacts, A user has many contacts and a contact has only one user.\nWhen I try to delete a contact which references the user, the user is also being deleted.</p>\n<p>Here is the code for the user model:</p>\n<pre><code> @JsonIgnore\n    @OneToMany(cascade = CascadeType.ALL, mappedBy = &quot;user&quot;, fetch = FetchType.EAGER)\n    private List&lt;Contact&gt; contacts;\n\n    public void addContact(Contact contact){\n        contacts.add(contact);\n    }\n    public void removeContact(Contact contact){\n        contacts.remove(contact);\n    }\n</code></pre>\n<p>And the contact model:</p>\n<pre><code>@JsonIgnore\n    @ManyToOne(cascade = CascadeType.ALL,)\n    @JoinColumn(name=&quot;user_id&quot;, referencedColumnName = &quot;id&quot;)\n    private User user;\n</code></pre>\n<p>I have tried putting orphanRemoval = false after CascadeType.ALL to the contact table but it does not recognise it, I think that would solve the issue but its only being recognised on the User Side.</p>\n"},{"tags":["java","selenium-webdriver","testing","testng"],"owner":{"account_id":29486037,"reputation":1,"user_id":22595927,"display_name":"Umran Erdogan"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":32,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1695175758,"creation_date":1695164161,"question_id":77138392,"body_markdown":"I&#39;m getting &quot;org.openqa.selenium.NoSuchSessionException: Session ID is null. Using WebDriver after calling quit()?&quot; exception while I&#39;m running my test cases. \r\n\r\nMy test class is like this;\r\n```\r\nimport org.testng.annotations.Test;\r\n\r\npublic class LoginTests extends TestBase{\r\n\r\n    LoginAndSignUpPage loginAndSignUpPage=new LoginAndSignUpPage();\r\n\r\n    @Test (priority = 1)\r\n    public void loginWithValidCredentials(){\r\n\r\n        loginAndSignUpPage.navigateToModule(&quot;Log in&quot;);\r\n        loginAndSignUpPage.login_userName.sendKeys(ConfigurationReader.get(&quot;username&quot;));\r\n        loginAndSignUpPage.login_password.sendKeys(ConfigurationReader.get(&quot;password&quot;));\r\n        loginAndSignUpPage.login_button.click();\r\n        BrowserUtils.waitFor(3);\r\n\r\n        String expectedUser= &quot;Welcome &quot; + ConfigurationReader.get(&quot;username&quot;);\r\n        Assert.assertEquals(expectedUser, loginAndSignUpPage.nameOfUser.getText());\r\n       \r\n    }\r\n\r\n  \r\n    @Test (priority = 2)\r\n    public void loginWithInvalidPassword(){\r\n\r\n       loginAndSignUpPage.navigateToModule(&quot;Log in&quot;);\r\n       loginAndSignUpPage.login_userName.sendKeys(ConfigurationReader.get(&quot;username&quot;));\r\n       loginAndSignUpPage.login_password.sendKeys(&quot;wrongpassword)&quot;);\r\n       loginAndSignUpPage.login_button.click();\r\n\r\n        String actual =alert.getText();\r\n        String expected =&quot;Wrong password.&quot;;\r\n\r\n        BrowserUtils.waitFor(3);\r\n        Assert.assertEquals(expected, actual);*/\r\n\r\n    }\r\n\r\n    @Test (priority = 3)\r\n    public void loginWithInvalidUsername(){\r\n\r\n        loginAndSignUpPage.navigateToModule(&quot;Log in&quot;);\r\n        loginAndSignUpPage.login_userName.sendKeys(&quot;wrongUsername&quot;);\r\n        loginAndSignUpPage.login_password.sendKeys(ConfigurationReader.get(&quot;password&quot;));\r\n\r\n        loginAndSignUpPage.login_button.click();\r\n        Alert alert= Driver.get().switchTo().alert();;\r\n        String actual =alert.getText();\r\n        String expected =&quot;User does not exist.&quot;;\r\n        BrowserUtils.waitFor(3);\r\n       Assert.assertEquals(expected, actual);\r\n\r\n    }\r\n}\r\n\r\n```\r\nMy Driver class is shortly like this;\r\n\r\n```\r\npublic class Driver {\r\n\r\n    private Driver(){}\r\n\r\n    private static InheritableThreadLocal&lt;WebDriver&gt; driverPool = new InheritableThreadLocal&lt;&gt;();\r\n\r\n    public static WebDriver get(){\r\n\r\n        if (driverPool.get() == null){\r\n\r\n          \r\n            String browser = System.getProperty(&quot;browser&quot;) != null ? browser = System.getProperty(&quot;browser&quot;) : ConfigurationReader.get(&quot;browser&quot;);\r\n\r\n            switch (browser){\r\n                case &quot;chrome&quot;:\r\n                    WebDriverManager.chromedriver().setup();\r\n                    ChromeOptions options = new ChromeOptions();\r\n                    options.addArguments(&quot;--remote-allow-origins=*&quot;);\r\n                    driverPool.set(new ChromeDriver(options));\r\n                    driverPool.get().manage().window().maximize();\r\n                    driverPool.get().manage().timeouts().implicitlyWait(10, TimeUnit.SECONDS);\r\n                    break;\r\n}\r\n....\r\n```\r\nAnd my TestBase is like this;\r\n\r\n\r\n```\r\npublic class TestBase {\r\n\r\n    protected WebDriver driver;\r\n    protected Actions actions;\r\n    protected WebDriverWait wait;\r\n\r\n    @BeforeMethod\r\n    public void setUp(){\r\n        driver= Driver.get();\r\n        actions= new Actions(driver);\r\n        wait = new WebDriverWait(driver, Duration.ofSeconds(10));\r\n        driver.get(ConfigurationReader.get(&quot;url&quot;));\r\n    }\r\n    @AfterMethod\r\n    public void tearDown(ITestResult result) throws IOException, InterruptedException {\r\n       \r\n            Thread.sleep(2000);\r\n            Driver.closeDriver();\r\n        }\r\n\r\n    }\r\n\r\n```\r\nAnd my POM class;\r\n\r\n```\r\npublic class LoginAndSignUpPage extends BasePage{\r\n    public LoginAndSignUpPage() { PageFactory.initElements(Driver.get(), this); }\r\n\r\n    @FindBy(id = &quot;sign-username&quot;)\r\n    public WebElement signUp_userName;\r\n...\r\n\r\n```\r\nand BasePage\r\n\r\n```\r\npublic abstract class BasePage {\r\n\r\n\r\n    public BasePage() { PageFactory.initElements(Driver.get(), this); }\r\n\r\n...\r\n```\r\n\r\n\r\nI execute my test class which extends testbase. First test gets executed but others not. I tried to use @AfterTestSuite, @AfterClass etc. method, they didn&#39;t work in the TestBase.","title":"Why I&#39;m getting &quot;Session ID is null. Using WebDriver after calling quit()?&quot; exception in SeleniumWebdriver?","body":"<p>I'm getting &quot;org.openqa.selenium.NoSuchSessionException: Session ID is null. Using WebDriver after calling quit()?&quot; exception while I'm running my test cases.</p>\n<p>My test class is like this;</p>\n<pre><code>import org.testng.annotations.Test;\n\npublic class LoginTests extends TestBase{\n\n    LoginAndSignUpPage loginAndSignUpPage=new LoginAndSignUpPage();\n\n    @Test (priority = 1)\n    public void loginWithValidCredentials(){\n\n        loginAndSignUpPage.navigateToModule(&quot;Log in&quot;);\n        loginAndSignUpPage.login_userName.sendKeys(ConfigurationReader.get(&quot;username&quot;));\n        loginAndSignUpPage.login_password.sendKeys(ConfigurationReader.get(&quot;password&quot;));\n        loginAndSignUpPage.login_button.click();\n        BrowserUtils.waitFor(3);\n\n        String expectedUser= &quot;Welcome &quot; + ConfigurationReader.get(&quot;username&quot;);\n        Assert.assertEquals(expectedUser, loginAndSignUpPage.nameOfUser.getText());\n       \n    }\n\n  \n    @Test (priority = 2)\n    public void loginWithInvalidPassword(){\n\n       loginAndSignUpPage.navigateToModule(&quot;Log in&quot;);\n       loginAndSignUpPage.login_userName.sendKeys(ConfigurationReader.get(&quot;username&quot;));\n       loginAndSignUpPage.login_password.sendKeys(&quot;wrongpassword)&quot;);\n       loginAndSignUpPage.login_button.click();\n\n        String actual =alert.getText();\n        String expected =&quot;Wrong password.&quot;;\n\n        BrowserUtils.waitFor(3);\n        Assert.assertEquals(expected, actual);*/\n\n    }\n\n    @Test (priority = 3)\n    public void loginWithInvalidUsername(){\n\n        loginAndSignUpPage.navigateToModule(&quot;Log in&quot;);\n        loginAndSignUpPage.login_userName.sendKeys(&quot;wrongUsername&quot;);\n        loginAndSignUpPage.login_password.sendKeys(ConfigurationReader.get(&quot;password&quot;));\n\n        loginAndSignUpPage.login_button.click();\n        Alert alert= Driver.get().switchTo().alert();;\n        String actual =alert.getText();\n        String expected =&quot;User does not exist.&quot;;\n        BrowserUtils.waitFor(3);\n       Assert.assertEquals(expected, actual);\n\n    }\n}\n\n</code></pre>\n<p>My Driver class is shortly like this;</p>\n<pre><code>public class Driver {\n\n    private Driver(){}\n\n    private static InheritableThreadLocal&lt;WebDriver&gt; driverPool = new InheritableThreadLocal&lt;&gt;();\n\n    public static WebDriver get(){\n\n        if (driverPool.get() == null){\n\n          \n            String browser = System.getProperty(&quot;browser&quot;) != null ? browser = System.getProperty(&quot;browser&quot;) : ConfigurationReader.get(&quot;browser&quot;);\n\n            switch (browser){\n                case &quot;chrome&quot;:\n                    WebDriverManager.chromedriver().setup();\n                    ChromeOptions options = new ChromeOptions();\n                    options.addArguments(&quot;--remote-allow-origins=*&quot;);\n                    driverPool.set(new ChromeDriver(options));\n                    driverPool.get().manage().window().maximize();\n                    driverPool.get().manage().timeouts().implicitlyWait(10, TimeUnit.SECONDS);\n                    break;\n}\n....\n</code></pre>\n<p>And my TestBase is like this;</p>\n<pre><code>public class TestBase {\n\n    protected WebDriver driver;\n    protected Actions actions;\n    protected WebDriverWait wait;\n\n    @BeforeMethod\n    public void setUp(){\n        driver= Driver.get();\n        actions= new Actions(driver);\n        wait = new WebDriverWait(driver, Duration.ofSeconds(10));\n        driver.get(ConfigurationReader.get(&quot;url&quot;));\n    }\n    @AfterMethod\n    public void tearDown(ITestResult result) throws IOException, InterruptedException {\n       \n            Thread.sleep(2000);\n            Driver.closeDriver();\n        }\n\n    }\n\n</code></pre>\n<p>And my POM class;</p>\n<pre><code>public class LoginAndSignUpPage extends BasePage{\n    public LoginAndSignUpPage() { PageFactory.initElements(Driver.get(), this); }\n\n    @FindBy(id = &quot;sign-username&quot;)\n    public WebElement signUp_userName;\n...\n\n</code></pre>\n<p>and BasePage</p>\n<pre><code>public abstract class BasePage {\n\n\n    public BasePage() { PageFactory.initElements(Driver.get(), this); }\n\n...\n</code></pre>\n<p>I execute my test class which extends testbase. First test gets executed but others not. I tried to use @AfterTestSuite, @AfterClass etc. method, they didn't work in the TestBase.</p>\n"},{"tags":["java","amazon-web-services","spring-boot","netflix-eureka","graalvm"],"comments":[{"owner":{"account_id":6157899,"reputation":19810,"user_id":4800344,"display_name":"Ermiya Eskandary"},"score":0,"creation_date":1695500744,"post_id":77122752,"comment_id":136033688,"body_markdown":"`my-discovery-server` - is this an IP or a DNS name? can you try all of this locally to understand if this is an infra issue or a code issue?","body":"<code>my-discovery-server</code> - is this an IP or a DNS name? can you try all of this locally to understand if this is an infra issue or a code issue?"}],"owner":{"account_id":277550,"reputation":2448,"user_id":571616,"accept_rate":65,"display_name":"agarwal_achhnera"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":89,"favorite_count":0,"down_vote_count":0,"up_vote_count":4,"answer_count":0,"score":4,"last_activity_date":1695175135,"creation_date":1694968549,"question_id":77122752,"body_markdown":"I am doing setup at AWS for Eureka Discovery for my services running at EC2 instances inside graalVM . \r\nBut facing issue at client below\r\n\r\n    &gt; DiscoveryClient | fetchRegistry | Disable delta property : false\r\n    &gt; DiscoveryClient | fetchRegistry | Single vip registry refresh property\r\n    &gt; : nul\r\n    &gt; \r\n    &gt; DiscoveryClient | fetchRegistry | Force full registry fetch : false\r\n    &gt; DiscoveryClient | fetchRegistry | Application is null : false\r\n    &gt; DiscoveryClient | fetchRegistry | Registered Applications size is zero\r\n    &gt; : true DiscoveryClient | fetchRegistry | Application version is -1:\r\n    &gt; true DiscoveryClient | getAndStoreFullRegistry | Getting all instance\r\n    &gt; registry info from the eureka server DiscoveryClient |\r\n    &gt; getAndStoreFullRegistry | The response status is 200 DiscoveryClient |\r\n    &gt; initScheduledTasks | Starting heartbeat executor: renew interval is:\r\n    &gt; 30 DiscoveryClient | &lt;init&gt; | Discovery Client initialized at\r\n    &gt; timestamp 1694962592645 with initial instances count: 0\r\n    &gt; DiscoveryClient$3 | notify | Saw local status change event\r\n    &gt; StatusChangeEvent [timestamp=1694962592921, current=UP,\r\n    &gt; previous=STARTING] DiscoveryClient | register |\r\n    &gt; DiscoveryClient_&lt;MY_CLIENT_NAME&gt;/&lt;MYHOSTNAME&gt;: registering service...\r\n    &gt; RetryableEurekaHttpClient | execute | Request execution failure with\r\n    &gt; status code 400; retrying on another server if available\r\n    &gt; DiscoveryClient | register |\r\n    &gt; DiscoveryClient_&lt;MY_CLIENT_NAME&gt;/&lt;MYHOSTNAME&gt; - registration failed\r\n    &gt; Cannot execute request on any known server\r\n    &gt;         at com.netflix.discovery.shared.transport.decorator.RetryableEurekaHttpClient.execute(RetryableEurekaHttpClient.java:112)\r\n    &gt;         at com.netflix.discovery.shared.transport.decorator.EurekaHttpClientDecorator.register(EurekaHttpClientDecorator.java:56)\r\n    &gt;         at com.netflix.discovery.shared.transport.decorator.EurekaHttpClientDecorator$1.execute(EurekaHttpClientDecorator.java:59)\r\n    &gt;         at com.netflix.discovery.shared.transport.decorator.SessionedEurekaHttpClient.execute(SessionedEurekaHttpClient.java:77)\r\n    &gt;         at com.netflix.discovery.shared.transport.decorator.EurekaHttpClientDecorator.register(EurekaHttpClientDecorator.java:56)\r\n    &gt;         at com.netflix.discovery.DiscoveryClient.register(DiscoveryClient.java:820)\r\n    &gt;         at com.netflix.discovery.shared.transport.decorator.RetryableEurekaHttpClient.execute(RetryableEurekaHttpClient.java:112)\r\n    &gt;         at com.netflix.discovery.shared.transport.decorator.EurekaHttpClientDecorator.register(EurekaHttpClientDecorator.java:56)\r\n    &gt;         at com.netflix.discovery.shared.transport.decorator.EurekaHttpClientDecorator$1.execute(EurekaHttpClientDecorator.java:59)\r\n    &gt;         at com.netflix.discovery.shared.transport.decorator.SessionedEurekaHttpClient.execute(SessionedEurekaHttpClient.java:77)\r\n    &gt;         at com.netflix.discovery.shared.transport.decorator.EurekaHttpClientDecorator.register(EurekaHttpClientDecorator.java:56)\r\n    &gt;         at com.netflix.discovery.DiscoveryClient.register(DiscoveryClient.java:820)\r\n\r\n\r\nBelow are the messages at EurekaServer\r\n\r\n    c.n.e.registry.AbstractInstanceRegistry  : DS: Registry: lease doesn&#39;t exist, registering resource: &lt;MY_CLIENT_NAME&gt; - &lt;MYHOSTNAME&gt;\r\n    c.n.eureka.resources.InstanceResource    : Not Found (Renew): &lt;MY_CLIENT_NAME&gt; - &lt;MYHOSTNAME&gt;\r\n    c.n.e.registry.AbstractInstanceRegistry  : Running the evict task with compensationTime 0ms\r\n\r\nBelow are the details for my Eureka Server and Client\r\n\r\nEurekaServer: This is not using graalvm and running on EC2 instance. When call the status APi from same machine at which client is running, able to get the status using below command\r\n**curl http://&lt;MyEc2HostName&gt;:8761/eureka/apps**\r\n  Have made @EnableEurekaServer to My main class and below is my application.properties content\r\n\r\n        spring.application.name=my-discovery-server\r\n        server.port=8761\r\n        \r\n        eureka.client.register-with-eureka=false\r\n        eureka.client.fetch-registry=false\r\n\r\nBelow are the snippets from pom.xml\r\n    \r\n       &lt;parent&gt;\r\n    \t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n    \t\t&lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\r\n    \t\t&lt;version&gt;3.0.8&lt;/version&gt;\r\n    \t\t&lt;relativePath /&gt; &lt;!-- lookup parent from repository --&gt;\r\n    \t&lt;/parent&gt;\r\n        &lt;properties&gt;\r\n    \t\t&lt;java.version&gt;17&lt;/java.version&gt;\r\n    \t\t&lt;spring-cloud.version&gt;2022.0.4&lt;/spring-cloud.version&gt;\r\n    \t&lt;/properties&gt;\r\n    &lt;dependencies&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;spring-boot-starter-actuator&lt;/artifactId&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;spring-cloud-starter-netflix-eureka-server&lt;/artifactId&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\r\n    \t\t\t&lt;scope&gt;test&lt;/scope&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t\t&lt;dependency&gt;\r\n        &lt;groupId&gt;org.springframework.security&lt;/groupId&gt;\r\n        &lt;artifactId&gt;spring-security-config&lt;/artifactId&gt;\r\n        &lt;version&gt;3.2.0.RELEASE&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n    \r\n    \t&lt;/dependencies&gt;\r\n    \t&lt;dependencyManagement&gt;\r\n    \t\t&lt;dependencies&gt;\r\n    \t\t\t&lt;dependency&gt;\r\n    \t\t\t\t&lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;\r\n    \t\t\t\t&lt;artifactId&gt;spring-cloud-dependencies&lt;/artifactId&gt;\r\n    \t\t\t\t&lt;version&gt;${spring-cloud.version}&lt;/version&gt;\r\n    \t\t\t\t&lt;type&gt;pom&lt;/type&gt;\r\n    \t\t\t\t&lt;scope&gt;import&lt;/scope&gt;\r\n    \t\t\t&lt;/dependency&gt;\r\n    \t\t&lt;/dependencies&gt;\r\n    \t&lt;/dependencyManagement&gt;\r\n\r\nBelow are my Client Configurations:\r\nHave placed below dependency inside pom.xml. Needed to exclude the commons-logging as was creating issue for graalvm\r\n&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;spring-cloud-starter-netflix-eureka-client&lt;/artifactId&gt;\r\n    \t\t\t&lt;version&gt;4.0.3&lt;/version&gt;\r\n    \t\t\t&lt;exclusions&gt;\r\n            \t\t&lt;exclusion&gt;\r\n                \t\t&lt;groupId&gt;commons-logging&lt;/groupId&gt;\r\n                \t\t&lt;artifactId&gt;commons-logging&lt;/artifactId&gt;\r\n            \t\t&lt;/exclusion&gt;\r\n        \t\t&lt;/exclusions&gt;\r\n\t\t\t&lt;/dependency&gt;\r\n\r\nApart from this , client pom have below other entries which are for other purposes for the application\r\n   \r\n\r\n    &lt;parent&gt;\r\n                    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n                    &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\r\n                    &lt;version&gt;3.0.8&lt;/version&gt;\r\n                    &lt;relativePath /&gt;\r\n            &lt;/parent&gt;\r\n         &lt;properties&gt;\r\n                    &lt;java.version&gt;17&lt;/java.version&gt;\r\n            &lt;/properties&gt;\r\n    &lt;dependency&gt;\r\n                            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n                            &lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt;\r\n                            &lt;exclusions&gt;\r\n                            &lt;exclusion&gt;\r\n                                        &lt;groupId&gt;org.apache.tomcat&lt;/groupId&gt;\r\n                                        &lt;artifactId&gt;tomcat-jdbc&lt;/artifactId&gt;\r\n                            &lt;/exclusion&gt;\r\n                    &lt;/exclusions&gt;\r\n                    &lt;/dependency&gt;\r\n                    &lt;dependency&gt;\r\n                            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n                            &lt;artifactId&gt;spring-boot-starter-jdbc&lt;/artifactId&gt;\r\n                    &lt;/dependency&gt;\r\n    &lt;dependency&gt;\r\n                            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n                            &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\r\n                    &lt;/dependency&gt;\r\n                    &lt;dependency&gt;\r\n                            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n                            &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\r\n                            &lt;scope&gt;test&lt;/scope&gt;\r\n                    &lt;/dependency&gt;\r\n                    &lt;dependency&gt;\r\n                            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n                            &lt;artifactId&gt;spring-boot-starter-webflux&lt;/artifactId&gt;\r\n                    &lt;/dependency&gt;\r\n    &lt;dependency&gt;\r\n                            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n                            &lt;artifactId&gt;spring-boot-starter-validation&lt;/artifactId&gt;\r\n                    &lt;/dependency&gt;\r\n     &lt;dependency&gt;\r\n                            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n                            &lt;artifactId&gt;spring-boot-configuration-processor&lt;/artifactId&gt;\r\n                            &lt;optional&gt;true&lt;/optional&gt;\r\n                    &lt;/dependency&gt;\r\n     &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n                &lt;artifactId&gt;spring-boot-starter-actuator&lt;/artifactId&gt;\r\n            &lt;/dependency&gt;\r\n     &lt;dependency&gt;\r\n                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n                &lt;artifactId&gt;spring-boot-starter-aop&lt;/artifactId&gt;\r\n    \t    &lt;/dependency&gt;\r\n\r\nAdded following to the Configuration class\r\n \r\n\r\n    @Bean\r\n        @Profile(&quot;dev&quot;)\r\n        public EurekaInstanceConfigBean eurekaInstanceConfig(InetUtils inetUtils) {\r\n          EurekaInstanceConfigBean bean = new EurekaInstanceConfigBean(inetUtils);\r\n          AmazonInfo info = AmazonInfo.Builder.newBuilder().autoBuild(&quot;eureka&quot;);\r\n          bean.setDataCenterInfo(info);\r\n          return bean;\r\n        }\r\n\r\nBelow are the settings inside client application.properties\r\n\r\n    management.endpoints.web.exposure.include=info,health,prometheus\r\n    spring.cloud.refresh.enabled=false\r\n    eureka.client.enabled=true\r\n    eureka.client.serviceUrl.defaultZone=http://&lt;EurekaServerHost&gt;:8761/eureka/\r\n\r\n","title":"How to fix graalvm eureka client transport exception while registering with EurekaServer at AWS","body":"<p>I am doing setup at AWS for Eureka Discovery for my services running at EC2 instances inside graalVM .\nBut facing issue at client below</p>\n<pre><code>&gt; DiscoveryClient | fetchRegistry | Disable delta property : false\n&gt; DiscoveryClient | fetchRegistry | Single vip registry refresh property\n&gt; : nul\n&gt; \n&gt; DiscoveryClient | fetchRegistry | Force full registry fetch : false\n&gt; DiscoveryClient | fetchRegistry | Application is null : false\n&gt; DiscoveryClient | fetchRegistry | Registered Applications size is zero\n&gt; : true DiscoveryClient | fetchRegistry | Application version is -1:\n&gt; true DiscoveryClient | getAndStoreFullRegistry | Getting all instance\n&gt; registry info from the eureka server DiscoveryClient |\n&gt; getAndStoreFullRegistry | The response status is 200 DiscoveryClient |\n&gt; initScheduledTasks | Starting heartbeat executor: renew interval is:\n&gt; 30 DiscoveryClient | &lt;init&gt; | Discovery Client initialized at\n&gt; timestamp 1694962592645 with initial instances count: 0\n&gt; DiscoveryClient$3 | notify | Saw local status change event\n&gt; StatusChangeEvent [timestamp=1694962592921, current=UP,\n&gt; previous=STARTING] DiscoveryClient | register |\n&gt; DiscoveryClient_&lt;MY_CLIENT_NAME&gt;/&lt;MYHOSTNAME&gt;: registering service...\n&gt; RetryableEurekaHttpClient | execute | Request execution failure with\n&gt; status code 400; retrying on another server if available\n&gt; DiscoveryClient | register |\n&gt; DiscoveryClient_&lt;MY_CLIENT_NAME&gt;/&lt;MYHOSTNAME&gt; - registration failed\n&gt; Cannot execute request on any known server\n&gt;         at com.netflix.discovery.shared.transport.decorator.RetryableEurekaHttpClient.execute(RetryableEurekaHttpClient.java:112)\n&gt;         at com.netflix.discovery.shared.transport.decorator.EurekaHttpClientDecorator.register(EurekaHttpClientDecorator.java:56)\n&gt;         at com.netflix.discovery.shared.transport.decorator.EurekaHttpClientDecorator$1.execute(EurekaHttpClientDecorator.java:59)\n&gt;         at com.netflix.discovery.shared.transport.decorator.SessionedEurekaHttpClient.execute(SessionedEurekaHttpClient.java:77)\n&gt;         at com.netflix.discovery.shared.transport.decorator.EurekaHttpClientDecorator.register(EurekaHttpClientDecorator.java:56)\n&gt;         at com.netflix.discovery.DiscoveryClient.register(DiscoveryClient.java:820)\n&gt;         at com.netflix.discovery.shared.transport.decorator.RetryableEurekaHttpClient.execute(RetryableEurekaHttpClient.java:112)\n&gt;         at com.netflix.discovery.shared.transport.decorator.EurekaHttpClientDecorator.register(EurekaHttpClientDecorator.java:56)\n&gt;         at com.netflix.discovery.shared.transport.decorator.EurekaHttpClientDecorator$1.execute(EurekaHttpClientDecorator.java:59)\n&gt;         at com.netflix.discovery.shared.transport.decorator.SessionedEurekaHttpClient.execute(SessionedEurekaHttpClient.java:77)\n&gt;         at com.netflix.discovery.shared.transport.decorator.EurekaHttpClientDecorator.register(EurekaHttpClientDecorator.java:56)\n&gt;         at com.netflix.discovery.DiscoveryClient.register(DiscoveryClient.java:820)\n</code></pre>\n<p>Below are the messages at EurekaServer</p>\n<pre><code>c.n.e.registry.AbstractInstanceRegistry  : DS: Registry: lease doesn't exist, registering resource: &lt;MY_CLIENT_NAME&gt; - &lt;MYHOSTNAME&gt;\nc.n.eureka.resources.InstanceResource    : Not Found (Renew): &lt;MY_CLIENT_NAME&gt; - &lt;MYHOSTNAME&gt;\nc.n.e.registry.AbstractInstanceRegistry  : Running the evict task with compensationTime 0ms\n</code></pre>\n<p>Below are the details for my Eureka Server and Client</p>\n<p>EurekaServer: This is not using graalvm and running on EC2 instance. When call the status APi from same machine at which client is running, able to get the status using below command\n<strong>curl http://:8761/eureka/apps</strong>\nHave made @EnableEurekaServer to My main class and below is my application.properties content</p>\n<pre><code>    spring.application.name=my-discovery-server\n    server.port=8761\n    \n    eureka.client.register-with-eureka=false\n    eureka.client.fetch-registry=false\n</code></pre>\n<p>Below are the snippets from pom.xml</p>\n<pre><code>   &lt;parent&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\n        &lt;version&gt;3.0.8&lt;/version&gt;\n        &lt;relativePath /&gt; &lt;!-- lookup parent from repository --&gt;\n    &lt;/parent&gt;\n    &lt;properties&gt;\n        &lt;java.version&gt;17&lt;/java.version&gt;\n        &lt;spring-cloud.version&gt;2022.0.4&lt;/spring-cloud.version&gt;\n    &lt;/properties&gt;\n&lt;dependencies&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-actuator&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-cloud-starter-netflix-eureka-server&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\n            &lt;scope&gt;test&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n    &lt;groupId&gt;org.springframework.security&lt;/groupId&gt;\n    &lt;artifactId&gt;spring-security-config&lt;/artifactId&gt;\n    &lt;version&gt;3.2.0.RELEASE&lt;/version&gt;\n&lt;/dependency&gt;\n\n    &lt;/dependencies&gt;\n    &lt;dependencyManagement&gt;\n        &lt;dependencies&gt;\n            &lt;dependency&gt;\n                &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;\n                &lt;artifactId&gt;spring-cloud-dependencies&lt;/artifactId&gt;\n                &lt;version&gt;${spring-cloud.version}&lt;/version&gt;\n                &lt;type&gt;pom&lt;/type&gt;\n                &lt;scope&gt;import&lt;/scope&gt;\n            &lt;/dependency&gt;\n        &lt;/dependencies&gt;\n    &lt;/dependencyManagement&gt;\n</code></pre>\n<p>Below are my Client Configurations:\nHave placed below dependency inside pom.xml. Needed to exclude the commons-logging as was creating issue for graalvm\n\norg.springframework.cloud\nspring-cloud-starter-netflix-eureka-client\n4.0.3\n\n\ncommons-logging\ncommons-logging\n\n\n</p>\n<p>Apart from this , client pom have below other entries which are for other purposes for the application</p>\n<pre><code>&lt;parent&gt;\n                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n                &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\n                &lt;version&gt;3.0.8&lt;/version&gt;\n                &lt;relativePath /&gt;\n        &lt;/parent&gt;\n     &lt;properties&gt;\n                &lt;java.version&gt;17&lt;/java.version&gt;\n        &lt;/properties&gt;\n&lt;dependency&gt;\n                        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n                        &lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt;\n                        &lt;exclusions&gt;\n                        &lt;exclusion&gt;\n                                    &lt;groupId&gt;org.apache.tomcat&lt;/groupId&gt;\n                                    &lt;artifactId&gt;tomcat-jdbc&lt;/artifactId&gt;\n                        &lt;/exclusion&gt;\n                &lt;/exclusions&gt;\n                &lt;/dependency&gt;\n                &lt;dependency&gt;\n                        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n                        &lt;artifactId&gt;spring-boot-starter-jdbc&lt;/artifactId&gt;\n                &lt;/dependency&gt;\n&lt;dependency&gt;\n                        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n                        &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\n                &lt;/dependency&gt;\n                &lt;dependency&gt;\n                        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n                        &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\n                        &lt;scope&gt;test&lt;/scope&gt;\n                &lt;/dependency&gt;\n                &lt;dependency&gt;\n                        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n                        &lt;artifactId&gt;spring-boot-starter-webflux&lt;/artifactId&gt;\n                &lt;/dependency&gt;\n&lt;dependency&gt;\n                        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n                        &lt;artifactId&gt;spring-boot-starter-validation&lt;/artifactId&gt;\n                &lt;/dependency&gt;\n &lt;dependency&gt;\n                        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n                        &lt;artifactId&gt;spring-boot-configuration-processor&lt;/artifactId&gt;\n                        &lt;optional&gt;true&lt;/optional&gt;\n                &lt;/dependency&gt;\n &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-actuator&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-aop&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n</code></pre>\n<p>Added following to the Configuration class</p>\n<pre><code>@Bean\n    @Profile(&quot;dev&quot;)\n    public EurekaInstanceConfigBean eurekaInstanceConfig(InetUtils inetUtils) {\n      EurekaInstanceConfigBean bean = new EurekaInstanceConfigBean(inetUtils);\n      AmazonInfo info = AmazonInfo.Builder.newBuilder().autoBuild(&quot;eureka&quot;);\n      bean.setDataCenterInfo(info);\n      return bean;\n    }\n</code></pre>\n<p>Below are the settings inside client application.properties</p>\n<pre><code>management.endpoints.web.exposure.include=info,health,prometheus\nspring.cloud.refresh.enabled=false\neureka.client.enabled=true\neureka.client.serviceUrl.defaultZone=http://&lt;EurekaServerHost&gt;:8761/eureka/\n</code></pre>\n"},{"tags":["java","lambda"],"comments":[{"owner":{"account_id":1236799,"reputation":1452,"user_id":1200235,"accept_rate":76,"display_name":"LeTex"},"score":0,"creation_date":1616612667,"post_id":66787415,"comment_id":118060552,"body_markdown":"what do you mean by comparing same code? `equals` or `==` is the comparisons I know ... can you clarify?","body":"what do you mean by comparing same code? <code>equals</code> or <code>==</code> is the comparisons I know ... can you clarify?"},{"owner":{"account_id":17033694,"reputation":4572,"user_id":12323248,"display_name":"akuzminykh"},"score":1,"creation_date":1616614315,"post_id":66787415,"comment_id":118061321,"body_markdown":"The questions in the duplicate list [here](https://stackoverflow.com/q/33039002/12323248) state that this is not specified by JLS or JVMS, so implementations of Java have flexibility for lambdas.","body":"The questions in the duplicate list <a href=\"https://stackoverflow.com/q/33039002/12323248\">here</a> state that this is not specified by JLS or JVMS, so implementations of Java have flexibility for lambdas."},{"owner":{"account_id":4385428,"reputation":1304,"user_id":3575763,"display_name":"Flame239"},"score":2,"creation_date":1616614854,"post_id":66787415,"comment_id":118061578,"body_markdown":"Does this answer your question? [Is there a way to compare lambdas?](https://stackoverflow.com/questions/24095875/is-there-a-way-to-compare-lambdas)","body":"Does this answer your question? <a href=\"https://stackoverflow.com/questions/24095875/is-there-a-way-to-compare-lambdas\">Is there a way to compare lambdas?</a>"},{"owner":{"account_id":47283,"reputation":703927,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"score":0,"creation_date":1695175614,"post_id":66787415,"comment_id":135987811,"body_markdown":"As Christopher points out: *&quot;bytecode[s] being equal does not imply the lambda themselves are equal&quot;*.  Two lambdas with identical bytecodes can produce different results ... depending on the values of variables in scope that the point the lambdas were instantiated.   Comparing lambdas that are not `==` is semantically difficult.","body":"As Christopher points out: <i>&quot;bytecode[s] being equal does not imply the lambda themselves are equal&quot;</i>.  Two lambdas with identical bytecodes can produce different results ... depending on the values of variables in scope that the point the lambdas were instantiated.   Comparing lambdas that are not <code>==</code> is semantically difficult."}],"answers":[{"comments":[{"owner":{"account_id":47283,"reputation":703927,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"score":0,"creation_date":1695175342,"post_id":77138816,"comment_id":135987783,"body_markdown":"*&quot;That being said, bytecode being equal does not imply the lambda themselves are equal.&quot;*  - That should be in bold!!","body":"<i>&quot;That being said, bytecode being equal does not imply the lambda themselves are equal.&quot;</i>  - That should be in bold!!"}],"tags":[],"owner":{"account_id":13441459,"reputation":1433,"user_id":9698517,"display_name":"Christopher Chianelli"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1695174340,"creation_date":1695174340,"answer_id":77138816,"question_id":66787415,"body_markdown":"The answer depends on the functional interface the lambda implements.\r\n\r\nIf the functional interface the lambda implements **does not** extend Serializable, the answer is no, as there is no reliable way to read the lambda bytecode that will work across different compilers and JVM&#39;s.\r\n\r\nIf the functional interface the lambda implements **does** extend Serializable, the answer is yes. We can use the SerializedLambda approached described in [this stack overflow answer][1]. The gist of it is this: exploit the fact that any Serializable object that require an alternate form to be serialized MUST have a writeReplace method (as specified in [Serializable JavaDoc][2]), and we know for lambdas, the object returned by that method is [SerializedLambda][3]. From SerializedLambda, we know the lambda&#39;s implementer [class and method names][4]. From the class and method names, we can create a ClassVisitor to visit that class and read the bytecode corresponding to the lambda:\r\n\r\n```java\r\n    private static SerializedLambda getSerializedLambda(Serializable lambda) throws Exception {\r\n        final Method method = lambda.getClass().getDeclaredMethod(&quot;writeReplace&quot;);\r\n        method.setAccessible(true);\r\n        return (SerializedLambda) method.invoke(lambda);\r\n    }\r\n\r\n    private static List&lt;Object&gt; readBytecodeOf(Object lambdaObject) {\r\n        if (lambdaObject instanceof Serializable serializable) {\r\n            try {\r\n                SerializedLambda serializedLambda = getSerializedLambda(serializable);\r\n                ClassReader classReader = new ClassReader(serializedLambda.getImplClass());\r\n                LambdaClassVisitor lambdaClassVisitor =\r\n                        new LambdaClassVisitor(Opcodes.ASM9, serializedLambda.getImplMethodName());\r\n                classReader.accept(lambdaClassVisitor,\r\n                        ClassReader.SKIP_FRAMES | ClassReader.SKIP_DEBUG);\r\n                return lambdaClassVisitor.getBytecode();\r\n            } catch (Exception e) {\r\n                throw new RuntimeException(e);\r\n            }\r\n        } else {\r\n            return List.of(new LambdaClassVisitor.UniqueObject(Float.NaN));\r\n        }\r\n    }\r\n```\r\n\r\nWhere `LambdaClassVisitor` looks like:\r\n\r\n```java\r\npublic class LambdaClassVisitor extends ClassVisitor {\r\n    final String lambdaMethodName;\r\n    LambdaMethodVisitor methodVisitor;\r\n\r\n    protected LambdaClassVisitor(int api, String lambdaMethodName) {\r\n        super(api);\r\n        this.lambdaMethodName = lambdaMethodName;\r\n    }\r\n\r\n    public record UniqueObject(float number) {\r\n    }\r\n\r\n    public List&lt;Object&gt; getBytecode() {\r\n        if (methodVisitor.canBeCompared) {\r\n            return methodVisitor.getMethodBytecode();\r\n        } else {\r\n            return List.of(new UniqueObject(Float.NaN));\r\n        }\r\n    }\r\n\r\n    @Override\r\n    public MethodVisitor visitMethod(int modifiers, String name, String descriptor, String signature, String[] exceptions) {\r\n        if (lambdaMethodName.equals(name)) {\r\n            this.methodVisitor =\r\n                    new LambdaMethodVisitor(Modifier.isStatic(modifiers), api,\r\n                            super.visitMethod(modifiers, name, descriptor, signature, exceptions));\r\n            return this.methodVisitor;\r\n        }\r\n        return super.visitMethod(modifiers, name, descriptor, signature, exceptions);\r\n    }\r\n}\r\n```\r\n\r\nand `LambdaMethodVisitor` looks like\r\n\r\n```java\r\npublic class LambdaMethodVisitor extends MethodVisitor {\r\n    final IdentityHashMap&lt;Label, Integer&gt; labelToId = new IdentityHashMap&lt;&gt;();\r\n    final List&lt;Object&gt; methodBytecode = new ArrayList&lt;&gt;();\r\n    boolean canBeCompared = true;\r\n    boolean isStatic;\r\n\r\n    protected LambdaMethodVisitor(boolean isStatic, int api, MethodVisitor methodVisitor) {\r\n        super(api, methodVisitor);\r\n        this.isStatic = isStatic;\r\n    }\r\n\r\n    public List&lt;Object&gt; getMethodBytecode() {\r\n        return methodBytecode;\r\n    }\r\n\r\n    private record Instruction(int opcode) {\r\n    }\r\n\r\n    public void visitInsn(final int opcode) {\r\n        super.visitInsn(opcode);\r\n        methodBytecode.add(new Instruction(opcode));\r\n    }\r\n\r\n    record IntInstruction(int opcode, int operand) {\r\n    }\r\n\r\n    public void visitIntInsn(final int opcode, final int operand) {\r\n        super.visitIntInsn(opcode, operand);\r\n        methodBytecode.add(new IntInstruction(opcode, operand));\r\n    }\r\n\r\n    public void visitVarInsn(final int opcode, final int varIndex) {\r\n        super.visitVarInsn(opcode, varIndex);\r\n        if (!isStatic &amp;&amp; opcode == Opcodes.ALOAD &amp;&amp; varIndex == 0) {\r\n            canBeCompared = false;\r\n        }\r\n        methodBytecode.add(new IntInstruction(opcode, varIndex));\r\n    }\r\n    \r\n    // ... and so on for all visit... methods\r\n}\r\n```\r\n\r\nThat being said, bytecode being equal does not imply the lambda themselves are equal. For instance, consider the following lambdas:\r\n\r\n```java\r\npublic Supplier&lt;Object&gt; getObjectSupplier(final Object item) {\r\n    return () -&gt; item;\r\n}\r\n\r\nSupplier&lt;Object&gt; a = getObjectSupplier(1);\r\nSupplier&lt;Object&gt; b = getObjectSupplier(2);\r\n```\r\n\r\n`a` and `b` will have the same bytecode, but they represent different functions. We want `equalLambdaCode(a,b) == false`, since they return different things. I attempt to detect this by marking all lambda whose bytecode either does `INVOKEDYNAMIC` (opcode used to create lambdas and other compiler specific things) or loads `this` as incomparable. Incomparable lambda gets `List.of(UniqueObject(Float.NaN))` as their bytecode, which can never be equal to any other list since `Float.NaN != Float.NaN`.\r\n\r\nWith all those functions defined, we can now define equalLambdaCode as:\r\n\r\n```java\r\npublic static boolean equalLambdaCode(Object a, Object b)  {\r\n    List&lt;Object&gt; aBytecode = readBytecodeOf(a);\r\n    List&lt;Object&gt; bBytecode = readBytecodeOf(b);\r\n    return aBytecode.equals(bBytecode);\r\n}\r\n```\r\n\r\n\r\n  [1]: https://stackoverflow.com/a/35223119\r\n  [2]: https://docs.oracle.com/javase/8/docs/api/java/io/Serializable.html\r\n  [3]: https://docs.oracle.com/javase/8/docs/api/java/lang/invoke/SerializedLambda.html\r\n  [4]: https://docs.oracle.com/javase/8/docs/api/java/lang/invoke/SerializedLambda.html#getImplClass--","title":"Check if two lambda&#39;s in Java execute the same code?","body":"<p>The answer depends on the functional interface the lambda implements.</p>\n<p>If the functional interface the lambda implements <strong>does not</strong> extend Serializable, the answer is no, as there is no reliable way to read the lambda bytecode that will work across different compilers and JVM's.</p>\n<p>If the functional interface the lambda implements <strong>does</strong> extend Serializable, the answer is yes. We can use the SerializedLambda approached described in <a href=\"https://stackoverflow.com/a/35223119\">this stack overflow answer</a>. The gist of it is this: exploit the fact that any Serializable object that require an alternate form to be serialized MUST have a writeReplace method (as specified in <a href=\"https://docs.oracle.com/javase/8/docs/api/java/io/Serializable.html\" rel=\"nofollow noreferrer\">Serializable JavaDoc</a>), and we know for lambdas, the object returned by that method is <a href=\"https://docs.oracle.com/javase/8/docs/api/java/lang/invoke/SerializedLambda.html\" rel=\"nofollow noreferrer\">SerializedLambda</a>. From SerializedLambda, we know the lambda's implementer <a href=\"https://docs.oracle.com/javase/8/docs/api/java/lang/invoke/SerializedLambda.html#getImplClass--\" rel=\"nofollow noreferrer\">class and method names</a>. From the class and method names, we can create a ClassVisitor to visit that class and read the bytecode corresponding to the lambda:</p>\n<pre class=\"lang-java prettyprint-override\"><code>    private static SerializedLambda getSerializedLambda(Serializable lambda) throws Exception {\n        final Method method = lambda.getClass().getDeclaredMethod(&quot;writeReplace&quot;);\n        method.setAccessible(true);\n        return (SerializedLambda) method.invoke(lambda);\n    }\n\n    private static List&lt;Object&gt; readBytecodeOf(Object lambdaObject) {\n        if (lambdaObject instanceof Serializable serializable) {\n            try {\n                SerializedLambda serializedLambda = getSerializedLambda(serializable);\n                ClassReader classReader = new ClassReader(serializedLambda.getImplClass());\n                LambdaClassVisitor lambdaClassVisitor =\n                        new LambdaClassVisitor(Opcodes.ASM9, serializedLambda.getImplMethodName());\n                classReader.accept(lambdaClassVisitor,\n                        ClassReader.SKIP_FRAMES | ClassReader.SKIP_DEBUG);\n                return lambdaClassVisitor.getBytecode();\n            } catch (Exception e) {\n                throw new RuntimeException(e);\n            }\n        } else {\n            return List.of(new LambdaClassVisitor.UniqueObject(Float.NaN));\n        }\n    }\n</code></pre>\n<p>Where <code>LambdaClassVisitor</code> looks like:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class LambdaClassVisitor extends ClassVisitor {\n    final String lambdaMethodName;\n    LambdaMethodVisitor methodVisitor;\n\n    protected LambdaClassVisitor(int api, String lambdaMethodName) {\n        super(api);\n        this.lambdaMethodName = lambdaMethodName;\n    }\n\n    public record UniqueObject(float number) {\n    }\n\n    public List&lt;Object&gt; getBytecode() {\n        if (methodVisitor.canBeCompared) {\n            return methodVisitor.getMethodBytecode();\n        } else {\n            return List.of(new UniqueObject(Float.NaN));\n        }\n    }\n\n    @Override\n    public MethodVisitor visitMethod(int modifiers, String name, String descriptor, String signature, String[] exceptions) {\n        if (lambdaMethodName.equals(name)) {\n            this.methodVisitor =\n                    new LambdaMethodVisitor(Modifier.isStatic(modifiers), api,\n                            super.visitMethod(modifiers, name, descriptor, signature, exceptions));\n            return this.methodVisitor;\n        }\n        return super.visitMethod(modifiers, name, descriptor, signature, exceptions);\n    }\n}\n</code></pre>\n<p>and <code>LambdaMethodVisitor</code> looks like</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class LambdaMethodVisitor extends MethodVisitor {\n    final IdentityHashMap&lt;Label, Integer&gt; labelToId = new IdentityHashMap&lt;&gt;();\n    final List&lt;Object&gt; methodBytecode = new ArrayList&lt;&gt;();\n    boolean canBeCompared = true;\n    boolean isStatic;\n\n    protected LambdaMethodVisitor(boolean isStatic, int api, MethodVisitor methodVisitor) {\n        super(api, methodVisitor);\n        this.isStatic = isStatic;\n    }\n\n    public List&lt;Object&gt; getMethodBytecode() {\n        return methodBytecode;\n    }\n\n    private record Instruction(int opcode) {\n    }\n\n    public void visitInsn(final int opcode) {\n        super.visitInsn(opcode);\n        methodBytecode.add(new Instruction(opcode));\n    }\n\n    record IntInstruction(int opcode, int operand) {\n    }\n\n    public void visitIntInsn(final int opcode, final int operand) {\n        super.visitIntInsn(opcode, operand);\n        methodBytecode.add(new IntInstruction(opcode, operand));\n    }\n\n    public void visitVarInsn(final int opcode, final int varIndex) {\n        super.visitVarInsn(opcode, varIndex);\n        if (!isStatic &amp;&amp; opcode == Opcodes.ALOAD &amp;&amp; varIndex == 0) {\n            canBeCompared = false;\n        }\n        methodBytecode.add(new IntInstruction(opcode, varIndex));\n    }\n    \n    // ... and so on for all visit... methods\n}\n</code></pre>\n<p>That being said, bytecode being equal does not imply the lambda themselves are equal. For instance, consider the following lambdas:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public Supplier&lt;Object&gt; getObjectSupplier(final Object item) {\n    return () -&gt; item;\n}\n\nSupplier&lt;Object&gt; a = getObjectSupplier(1);\nSupplier&lt;Object&gt; b = getObjectSupplier(2);\n</code></pre>\n<p><code>a</code> and <code>b</code> will have the same bytecode, but they represent different functions. We want <code>equalLambdaCode(a,b) == false</code>, since they return different things. I attempt to detect this by marking all lambda whose bytecode either does <code>INVOKEDYNAMIC</code> (opcode used to create lambdas and other compiler specific things) or loads <code>this</code> as incomparable. Incomparable lambda gets <code>List.of(UniqueObject(Float.NaN))</code> as their bytecode, which can never be equal to any other list since <code>Float.NaN != Float.NaN</code>.</p>\n<p>With all those functions defined, we can now define equalLambdaCode as:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public static boolean equalLambdaCode(Object a, Object b)  {\n    List&lt;Object&gt; aBytecode = readBytecodeOf(a);\n    List&lt;Object&gt; bBytecode = readBytecodeOf(b);\n    return aBytecode.equals(bBytecode);\n}\n</code></pre>\n"}],"owner":{"account_id":216698,"reputation":26495,"user_id":472109,"accept_rate":85,"display_name":"Geoffrey De Smet"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":350,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":77138816,"answer_count":1,"score":2,"last_activity_date":1695174340,"creation_date":1616611541,"question_id":66787415,"body_markdown":"How can I check if 2 lambda&#39;s run the same code?\r\nSuppose I have the following code:\r\n\r\n    \r\n    main() {\r\n        Predicate&lt;Person&gt; a = (person -&gt; person.getAge() &gt; 18);\r\n        Predicate&lt;Person&gt; b = (person -&gt; person.getAge() &gt; 18);\r\n        boolean x = equalLamdbaCode(a, b)); // should return true\r\n    \r\n        Predicate&lt;Person&gt; c = (person -&gt; person.getAge() &gt; 40);\r\n        boolean y = equalLamdbaCode(a, c)); // should return false\r\n    }\r\n\r\nIs there a reliable way to implement that `equalLamdbaCode(a, b)` method?","title":"Check if two lambda&#39;s in Java execute the same code?","body":"<p>How can I check if 2 lambda's run the same code?\nSuppose I have the following code:</p>\n<pre><code>main() {\n    Predicate&lt;Person&gt; a = (person -&gt; person.getAge() &gt; 18);\n    Predicate&lt;Person&gt; b = (person -&gt; person.getAge() &gt; 18);\n    boolean x = equalLamdbaCode(a, b)); // should return true\n\n    Predicate&lt;Person&gt; c = (person -&gt; person.getAge() &gt; 40);\n    boolean y = equalLamdbaCode(a, c)); // should return false\n}\n</code></pre>\n<p>Is there a reliable way to implement that <code>equalLamdbaCode(a, b)</code> method?</p>\n"},{"tags":["java","signature","covariant-return-types"],"answers":[{"comments":[{"owner":{"account_id":2125630,"reputation":31,"user_id":1887889,"display_name":"Arevik"},"score":0,"creation_date":1695194171,"post_id":77138788,"comment_id":135989761,"body_markdown":"Thanks for the answer, but I already recompiled several times with mvn -U clean install for the entire project.","body":"Thanks for the answer, but I already recompiled several times with mvn -U clean install for the entire project."},{"owner":{"account_id":6651855,"reputation":224850,"user_id":5133585,"accept_rate":96,"display_name":"Sweeper"},"score":0,"creation_date":1695194561,"post_id":77138788,"comment_id":135989831,"body_markdown":"@Arevik Well I&#39;m afraid you need to give more debugging details.","body":"@Arevik Well I&#39;m afraid you need to give more debugging details."}],"tags":[],"owner":{"account_id":6651855,"reputation":224850,"user_id":5133585,"accept_rate":96,"display_name":"Sweeper"},"comment_count":2,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695173448,"creation_date":1695173448,"answer_id":77138788,"question_id":77138230,"body_markdown":"I think you might have forgotten to *recompile* `A1`, after you changed `A`.\r\n\r\nThere is no return type covariance in the JVM. The JVM doesn&#39;t consider `Element getA()` to implement `Object getA()`. The Java compiler achieves return type covariance by generating an additional bridge method, with the correct return type.\r\n\r\nSo after you changed `A.getA()` to return `Object`, `A2` is compiled to something like this:\r\n\r\n```\r\nclass A2 extends A {\r\n    public List&lt;Element&gt; getA() {\r\n        // Implementation in A2\r\n    }\r\n\r\n    // This is not valid Java code\r\n    // This is just to illustrate that the compiler generates this additional method in the bytecode\r\n    @Override\r\n    public Object getA() {\r\n        return getA() // this will call the getA that returns List&lt;Element&gt;\r\n    }\r\n}\r\n```\r\n\r\nAs far as the JVM is concerned, the `Object`-returning `getA` is what implements the abstract method. If you only have the `List&lt;Element&gt;`-returning `getA`, the JVM thinks that the abstract method is unimplemented.\r\n\r\nLet&#39;s see what happens if you forgot to recompile `A1`. The bytecode for `A1` would only contain an `Element`-returning `getA`, because when you first compiled `A1`, the return type matched the abstract method&#39;s return type - there was no need to generate a bridge method. But now you changed the abstract method&#39;s return type, so the existing `getA` method in `A1` doesn&#39;t implement the abstract method anymore!\r\n\r\nYou should recompile `A1` so that a bridge method is generated.\r\n\r\n","title":"Error &quot;Missing implementation of resolved method of abstract class &quot; when trying to use covariant returned type","body":"<p>I think you might have forgotten to <em>recompile</em> <code>A1</code>, after you changed <code>A</code>.</p>\n<p>There is no return type covariance in the JVM. The JVM doesn't consider <code>Element getA()</code> to implement <code>Object getA()</code>. The Java compiler achieves return type covariance by generating an additional bridge method, with the correct return type.</p>\n<p>So after you changed <code>A.getA()</code> to return <code>Object</code>, <code>A2</code> is compiled to something like this:</p>\n<pre><code>class A2 extends A {\n    public List&lt;Element&gt; getA() {\n        // Implementation in A2\n    }\n\n    // This is not valid Java code\n    // This is just to illustrate that the compiler generates this additional method in the bytecode\n    @Override\n    public Object getA() {\n        return getA() // this will call the getA that returns List&lt;Element&gt;\n    }\n}\n</code></pre>\n<p>As far as the JVM is concerned, the <code>Object</code>-returning <code>getA</code> is what implements the abstract method. If you only have the <code>List&lt;Element&gt;</code>-returning <code>getA</code>, the JVM thinks that the abstract method is unimplemented.</p>\n<p>Let's see what happens if you forgot to recompile <code>A1</code>. The bytecode for <code>A1</code> would only contain an <code>Element</code>-returning <code>getA</code>, because when you first compiled <code>A1</code>, the return type matched the abstract method's return type - there was no need to generate a bridge method. But now you changed the abstract method's return type, so the existing <code>getA</code> method in <code>A1</code> doesn't implement the abstract method anymore!</p>\n<p>You should recompile <code>A1</code> so that a bridge method is generated.</p>\n"}],"owner":{"account_id":2125630,"reputation":31,"user_id":1887889,"display_name":"Arevik"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":114,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1695173448,"creation_date":1695161622,"question_id":77138230,"body_markdown":"I have an abstract class with one abstract method:\r\n\r\n    class A {\r\n        public abstract Element getA();\r\n    }\r\n\r\nI have several classes that have already implemented this abstract class, and they work fine. For some reasons, I cannot change the method signature of these classes.\r\n\r\n    class A1 extends A {\r\n        @Override\r\n        public Element getA() {\r\n            // Implementation in A1\r\n        }\r\n    }\r\n\r\nNow, I&#39;m creating a new class, A2, which extends the abstract class A. However, instead of returning an Element object, I want it to return a list of Element objects.\r\n\r\n    class A2 extends A {\r\n        @Override\r\n        public List&lt;Element&gt; getA() {\r\n            // Implementation in A2\r\n        }\r\n    }\r\n\r\nTo change the return type of the subclass, I thought about using covariant return types. So, I changed the return type of the abstract class to Object:\r\n\r\n    class A {\r\n        public abstract Object getA();\r\n    }\r\n\r\nIt compiles without errors and I have no errors when calling A2.getA() but I encounter a runtime error when calling A1.getA(): &quot;&quot;Missing implementation of resolved method &#39;abstract java.lang.Object getA()&#39; of abstract class A.&quot;&quot;\r\n\r\nAny advice on how to resolve this issue? Thank you.\r\n","title":"Error &quot;Missing implementation of resolved method of abstract class &quot; when trying to use covariant returned type","body":"<p>I have an abstract class with one abstract method:</p>\n<pre><code>class A {\n    public abstract Element getA();\n}\n</code></pre>\n<p>I have several classes that have already implemented this abstract class, and they work fine. For some reasons, I cannot change the method signature of these classes.</p>\n<pre><code>class A1 extends A {\n    @Override\n    public Element getA() {\n        // Implementation in A1\n    }\n}\n</code></pre>\n<p>Now, I'm creating a new class, A2, which extends the abstract class A. However, instead of returning an Element object, I want it to return a list of Element objects.</p>\n<pre><code>class A2 extends A {\n    @Override\n    public List&lt;Element&gt; getA() {\n        // Implementation in A2\n    }\n}\n</code></pre>\n<p>To change the return type of the subclass, I thought about using covariant return types. So, I changed the return type of the abstract class to Object:</p>\n<pre><code>class A {\n    public abstract Object getA();\n}\n</code></pre>\n<p>It compiles without errors and I have no errors when calling A2.getA() but I encounter a runtime error when calling A1.getA(): &quot;&quot;Missing implementation of resolved method 'abstract java.lang.Object getA()' of abstract class A.&quot;&quot;</p>\n<p>Any advice on how to resolve this issue? Thank you.</p>\n"},{"tags":["java","html","pdf","itext","file-conversion"],"comments":[{"owner":{"account_id":22153461,"reputation":13,"user_id":16401647,"display_name":"hitesh"},"score":0,"creation_date":1695164891,"post_id":77137141,"comment_id":135986837,"body_markdown":"no able to share the image because of Privacy issue, but when using other html to pdf conversion tools like openpdf this issue is not solved. I&#39;m wondering how other tools are handling such images when converting html to pdf.","body":"no able to share the image because of Privacy issue, but when using other html to pdf conversion tools like openpdf this issue is not solved. I&#39;m wondering how other tools are handling such images when converting html to pdf."}],"answers":[{"comments":[{"owner":{"account_id":1916831,"reputation":91511,"user_id":1729265,"display_name":"mkl"},"score":0,"creation_date":1695204580,"post_id":77137215,"comment_id":135991924,"body_markdown":"The question was about issues with a specific bitmap image in the html. Your html fragment does not include any image at all. So is your proposal in your answer not to use images?","body":"The question was about issues with a specific bitmap image in the html. Your html fragment does not include any image at all. So is your proposal in your answer not to use images?"},{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1695295943,"post_id":77137215,"comment_id":136007008,"body_markdown":"Your answer could be improved with additional supporting information. Please [edit] to add further details, such as citations or documentation, so that others can confirm that your answer is correct. You can find more information on how to write good answers [in the help center](/help/how-to-answer).","body":"Your answer could be improved with additional supporting information. Please <a href=\"https://stackoverflow.com/posts/77137215/edit\">edit</a> to add further details, such as citations or documentation, so that others can confirm that your answer is correct. You can find more information on how to write good answers <a href=\"/help/how-to-answer\">in the help center</a>."}],"tags":[],"owner":{"account_id":29484846,"reputation":1,"user_id":22595011,"display_name":"Teketsel Beyene"},"comment_count":2,"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1695149328,"creation_date":1695149328,"answer_id":77137215,"question_id":77137141,"body_markdown":"    import com.itextpdf.html2pdf.ConverterProperties;\r\n    import com.itextpdf.html2pdf.HtmlConverter;\r\n    import com.itextpdf.kernel.pdf.PdfDocument;\r\n    import com.itextpdf.kernel.pdf.PdfMerger;\r\n    import com.itextpdf.kernel.pdf.PdfWriter;\r\n    \r\n        \r\n    \r\n    import java.io.ByteArrayInputStream;\r\n    import java.io.ByteArrayOutputStream;\r\n    import java.io.InputStream;\r\n    \r\n    public class HtmlToPdfConverter {\r\n    \r\n        public static void main(String[] args) {\r\n            // Replace &quot;test&quot; with your HTML content as a String\r\n            String htmlContent = &quot;&lt;html&gt;&lt;body&gt;&lt;p&gt;Your HTML content here&lt;/p&gt;&lt;/body&gt;&lt;/html&gt;&quot;;\r\n    \r\n            try {\r\n                ByteArrayOutputStream inMemoryStream = new ByteArrayOutputStream();\r\n                PdfWriter writer = new PdfWriter(inMemoryStream);\r\n                PdfDocument pdf = new PdfDocument(writer);\r\n                PdfMerger merger = new PdfMerger(pdf);\r\n                ConverterProperties converterProperties = new ConverterProperties();\r\n    \r\n                // Add your custom properties if needed\r\n                // converterProperties.set...\r\n    \r\n                // Convert HTML to PDF\r\n                InputStream htmlInputStream = new ByteArrayInputStream(htmlContent.getBytes());\r\n                HtmlConverter.convertToPdf(htmlInputStream, pdf, converterProperties);\r\n    \r\n                // Close the PDF and perform further operations\r\n                pdf.close();\r\n    \r\n                // Now you can work with the generated PDF in &#39;inMemoryStream&#39;\r\n                // ...\r\n    \r\n                inMemoryStream.close();\r\n            } catch (Exception e) {\r\n                e.printStackTrace();\r\n            }\r\n        }\r\n    }\r\n\r\n","title":"Issue with images when converting HTML to PDF using itextPDF","body":"<pre><code>import com.itextpdf.html2pdf.ConverterProperties;\nimport com.itextpdf.html2pdf.HtmlConverter;\nimport com.itextpdf.kernel.pdf.PdfDocument;\nimport com.itextpdf.kernel.pdf.PdfMerger;\nimport com.itextpdf.kernel.pdf.PdfWriter;\n\n    \n\nimport java.io.ByteArrayInputStream;\nimport java.io.ByteArrayOutputStream;\nimport java.io.InputStream;\n\npublic class HtmlToPdfConverter {\n\n    public static void main(String[] args) {\n        // Replace &quot;test&quot; with your HTML content as a String\n        String htmlContent = &quot;&lt;html&gt;&lt;body&gt;&lt;p&gt;Your HTML content here&lt;/p&gt;&lt;/body&gt;&lt;/html&gt;&quot;;\n\n        try {\n            ByteArrayOutputStream inMemoryStream = new ByteArrayOutputStream();\n            PdfWriter writer = new PdfWriter(inMemoryStream);\n            PdfDocument pdf = new PdfDocument(writer);\n            PdfMerger merger = new PdfMerger(pdf);\n            ConverterProperties converterProperties = new ConverterProperties();\n\n            // Add your custom properties if needed\n            // converterProperties.set...\n\n            // Convert HTML to PDF\n            InputStream htmlInputStream = new ByteArrayInputStream(htmlContent.getBytes());\n            HtmlConverter.convertToPdf(htmlInputStream, pdf, converterProperties);\n\n            // Close the PDF and perform further operations\n            pdf.close();\n\n            // Now you can work with the generated PDF in 'inMemoryStream'\n            // ...\n\n            inMemoryStream.close();\n        } catch (Exception e) {\n            e.printStackTrace();\n        }\n    }\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":22153461,"reputation":13,"user_id":16401647,"display_name":"hitesh"},"score":0,"creation_date":1695182485,"post_id":77138439,"comment_id":135988317,"body_markdown":"Thank you for explaining that it does make sense now. But is there a way  itextPdf has a work around for this as some of the libraries does for such images?","body":"Thank you for explaining that it does make sense now. But is there a way  itextPdf has a work around for this as some of the libraries does for such images?"}],"tags":[],"owner":{"account_id":14313923,"reputation":8868,"user_id":10802527,"display_name":"K J"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1695172519,"creation_date":1695165138,"answer_id":77138439,"question_id":77137141,"body_markdown":"This should not be a problem if you understand how PDF handles transparency.\r\n\r\n[![enter image description here][1]][1]\r\n\r\nIt does not matter if an Image is TIFF PNG or GIF with transparency they are all stored in a similar fashion as 2 images. One is the opaque DeviceRGB the other is the Alpha channel as a black &quot;SoftMask&quot; we can see one image in left column, and 2 images mentioned in right column, and the 2 images (RGB overlaid with SoftMask)  in the central PDF view.\r\n\r\nThe issue here is bad image generation as the SoftMask has not been drawn well [![enter image description here][2]][2] \r\n\r\nIt should look like this (masked) for imposition in HTML or PDF and the foot shadow dealt with accordingly.  \r\n[![enter image description here][3]][3]\r\n\r\nOne of the interesting Points about PDF is we are told you cannot import a &quot;Transparent&quot; JPG, but perhaps you can now see **how this PDF has a JPEG with transparency** so is smaller (21,674 bytes) than a GIF (41,679 bytes) or PNG variant. and not look any worse in resolution colours or gamut.\r\n[![enter image description here][4]][4]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/ZtVaH.png\r\n  [2]: https://i.stack.imgur.com/GY4sY.jpg\r\n  [3]: https://i.stack.imgur.com/I9KPM.png\r\n  [4]: https://i.stack.imgur.com/qu3GS.png","title":"Issue with images when converting HTML to PDF using itextPDF","body":"<p>This should not be a problem if you understand how PDF handles transparency.</p>\n<p><a href=\"https://i.stack.imgur.com/ZtVaH.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/ZtVaH.png\" alt=\"enter image description here\" /></a></p>\n<p>It does not matter if an Image is TIFF PNG or GIF with transparency they are all stored in a similar fashion as 2 images. One is the opaque DeviceRGB the other is the Alpha channel as a black &quot;SoftMask&quot; we can see one image in left column, and 2 images mentioned in right column, and the 2 images (RGB overlaid with SoftMask)  in the central PDF view.</p>\n<p>The issue here is bad image generation as the SoftMask has not been drawn well <a href=\"https://i.stack.imgur.com/GY4sY.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/GY4sY.jpg\" alt=\"enter image description here\" /></a></p>\n<p>It should look like this (masked) for imposition in HTML or PDF and the foot shadow dealt with accordingly.<br />\n<a href=\"https://i.stack.imgur.com/I9KPM.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/I9KPM.png\" alt=\"enter image description here\" /></a></p>\n<p>One of the interesting Points about PDF is we are told you cannot import a &quot;Transparent&quot; JPG, but perhaps you can now see <strong>how this PDF has a JPEG with transparency</strong> so is smaller (21,674 bytes) than a GIF (41,679 bytes) or PNG variant. and not look any worse in resolution colours or gamut.\n<a href=\"https://i.stack.imgur.com/qu3GS.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/qu3GS.png\" alt=\"enter image description here\" /></a></p>\n"}],"owner":{"account_id":22153461,"reputation":13,"user_id":16401647,"display_name":"hitesh"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":73,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":2,"score":1,"last_activity_date":1695172519,"creation_date":1695148616,"question_id":77137141,"body_markdown":"I&#39;m converting html to pdf using itextPDF, everything works as expected but for one of the GIF image after conversion to pdf only the skeleton  of the image appears. This is a static GIF image not animated just an image with transparent background and image in center. when I run the code through other GIF images with transparent background works as expected. I&#39;m using the below code to convert HTML to PDF. I have attached a sample image of the issue.[sample image][1]\r\n\r\n        PdfWriter writer = new PdfWriter(inMemoryStream);\r\n        PdfDocument pdf = new PdfDocument(writer);\r\n        PdfMerger merger = new PdfMerger(pdf);\r\n        ByteArrayOutputStream baos = new ByteArrayOutputStream();\r\n        PdfDocument temp = new PdfDocument(new PdfWriter(baos));\r\n        HtmlConverter.convertToPdf(test, temp, converterProperties);\r\n        temp = new PdfDocument(new PdfReader(new ByteArrayInputStream(baos.toByteArray())));\r\n        merger.merge(temp, 1, temp.getNumberOfPages());\r\n        temp.close();\r\n        pdf.close();\r\n        inMemoryStream.close();\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/GY4sY.jpg","title":"Issue with images when converting HTML to PDF using itextPDF","body":"<p>I'm converting html to pdf using itextPDF, everything works as expected but for one of the GIF image after conversion to pdf only the skeleton  of the image appears. This is a static GIF image not animated just an image with transparent background and image in center. when I run the code through other GIF images with transparent background works as expected. I'm using the below code to convert HTML to PDF. I have attached a sample image of the issue.<a href=\"https://i.stack.imgur.com/GY4sY.jpg\" rel=\"nofollow noreferrer\">sample image</a></p>\n<pre><code>    PdfWriter writer = new PdfWriter(inMemoryStream);\n    PdfDocument pdf = new PdfDocument(writer);\n    PdfMerger merger = new PdfMerger(pdf);\n    ByteArrayOutputStream baos = new ByteArrayOutputStream();\n    PdfDocument temp = new PdfDocument(new PdfWriter(baos));\n    HtmlConverter.convertToPdf(test, temp, converterProperties);\n    temp = new PdfDocument(new PdfReader(new ByteArrayInputStream(baos.toByteArray())));\n    merger.merge(temp, 1, temp.getNumberOfPages());\n    temp.close();\n    pdf.close();\n    inMemoryStream.close();\n</code></pre>\n"},{"tags":["java","android"],"comments":[{"owner":{"account_id":6606677,"reputation":1024,"user_id":5103317,"display_name":"Old Dog Programmer"},"score":0,"creation_date":1695176467,"post_id":77138676,"comment_id":135987881,"body_markdown":"Override `.equals (Object obj)` and `hashCode(0` in `class StateMachine`, and `class LED`. If equality of two `LED` objects is dependent on equality of `Drawable`, override both in that class, too.","body":"Override <code>.equals (Object obj)</code> and <code>hashCode(0</code> in <code>class StateMachine</code>, and <code>class LED</code>. If equality of two <code>LED</code> objects is dependent on equality of <code>Drawable</code>, override both in that class, too."}],"answers":[{"comments":[{"owner":{"account_id":2673407,"reputation":44640,"user_id":2310289,"display_name":"Scary Wombat"},"score":1,"creation_date":1695171786,"post_id":77138692,"comment_id":135987514,"body_markdown":"Importantly *Note that it is generally necessary to override the hashCode method whenever this method is overridden, so as to maintain the general contract for the hashCode method, which states that equal objects must have equal hash codes.*","body":"Importantly <i>Note that it is generally necessary to override the hashCode method whenever this method is overridden, so as to maintain the general contract for the hashCode method, which states that equal objects must have equal hash codes.</i>"}],"tags":[],"owner":{"account_id":22208649,"reputation":93,"user_id":16448212,"display_name":"Artak Kirakosyan"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1695172133,"creation_date":1695171425,"answer_id":77138692,"question_id":77138676,"body_markdown":"from the [documentation](https://docs.oracle.com/javase/10/docs/api/java/lang/Object.html#equals(java.lang.Object)):\r\n\r\n``\r\nThe equals method for class Object implements the most discriminating possible equivalence relation on objects; that is, for any non-null reference values x and y, this method returns true if and only if x and y refer to the same object (x == y has the value true).\r\n``\r\nIf you want your comparison of StateMachines to be customized, you should override the equals method and implement the comparison.\r\n\r\nIn your case specifically, even though your 2 objects of StateMachine can store the exact same Map reference, as they are 2 different objects, by default they are not equal to each other\r\n\r\n\r\n**UPDATE**: as noted in the comment, quote \r\n```\r\nit is generally necessary to override the hashCode method \r\nwhenever equals method is overridden,\r\nso as to maintain the general contract for the hashCode method,\r\nwhich states that equal objects must have equal hash codes.\r\n```","title":"Comparing objects to see if they have equal values","body":"<p>from the <a href=\"https://docs.oracle.com/javase/10/docs/api/java/lang/Object.html#equals(java.lang.Object)\" rel=\"nofollow noreferrer\">documentation</a>:</p>\n<p><code>The equals method for class Object implements the most discriminating possible equivalence relation on objects; that is, for any non-null reference values x and y, this method returns true if and only if x and y refer to the same object (x == y has the value true).</code>\nIf you want your comparison of StateMachines to be customized, you should override the equals method and implement the comparison.</p>\n<p>In your case specifically, even though your 2 objects of StateMachine can store the exact same Map reference, as they are 2 different objects, by default they are not equal to each other</p>\n<p><strong>UPDATE</strong>: as noted in the comment, quote</p>\n<pre><code>it is generally necessary to override the hashCode method \nwhenever equals method is overridden,\nso as to maintain the general contract for the hashCode method,\nwhich states that equal objects must have equal hash codes.\n</code></pre>\n"}],"owner":{"account_id":53770,"reputation":2255,"user_id":160808,"accept_rate":71,"display_name":"Ageis"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":31,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"closed_date":1695171738,"answer_count":1,"score":0,"last_activity_date":1695172133,"creation_date":1695171043,"question_id":77138676,"body_markdown":"    public class LED {\r\n        public boolean onState;\r\n        public boolean updateRequired;\r\n        public int Id;\r\n        public String Key;\r\n        public Drawable onStateDrawable;\r\n        public Drawable offStateDrawable;\r\n    }\r\n    \r\n    public class StateMachine{    \r\n        private Map&lt;Integer, LED&gt; lamps = new HashMap&lt;&gt;();\r\n    }\r\nI want to be able to detect that they have differences in state between two instances of StateMachine. I tried `instance1.equals(instance2)`but it says they&#39;re different even though they&#39;re the same.\r\n\r\n\r\n","title":"Comparing objects to see if they have equal values","body":"<pre><code>public class LED {\n    public boolean onState;\n    public boolean updateRequired;\n    public int Id;\n    public String Key;\n    public Drawable onStateDrawable;\n    public Drawable offStateDrawable;\n}\n\npublic class StateMachine{    \n    private Map&lt;Integer, LED&gt; lamps = new HashMap&lt;&gt;();\n}\n</code></pre>\n<p>I want to be able to detect that they have differences in state between two instances of StateMachine. I tried <code>instance1.equals(instance2)</code>but it says they're different even though they're the same.</p>\n"},{"tags":["java","validation","filter","groovy","spock"],"comments":[{"owner":{"account_id":4358,"reputation":168420,"user_id":6509,"display_name":"tim_yates"},"score":1,"creation_date":1695141461,"post_id":77136228,"comment_id":135983176,"body_markdown":"An example that can be reproduced without requiring your hidden classes and services would help.","body":"An example that can be reproduced without requiring your hidden classes and services would help."}],"answers":[{"comments":[{"owner":{"account_id":324230,"reputation":6336,"user_id":644686,"accept_rate":60,"display_name":"victorio"},"score":0,"creation_date":1695197549,"post_id":77138699,"comment_id":135990443,"body_markdown":"Ahh. I forgot to think about the &#39;if&#39; condition. Thanks for the example!","body":"Ahh. I forgot to think about the &#39;if&#39; condition. Thanks for the example!"}],"tags":[],"owner":{"account_id":1087271,"reputation":64101,"user_id":1082681,"accept_rate":90,"display_name":"kriegaex"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1695171695,"creation_date":1695171695,"answer_id":77138699,"question_id":77136228,"body_markdown":"I am not sure you should bake those two tests into a single one, because they represent different feature behaviours. I understand your motivation to reduce duplicate code, though.\r\n\r\nI guess your situation is roughly as follows:\r\n\r\n```java\r\nclass ValidationService {\r\n  ValidationLogic validationLogic\r\n\r\n  boolean isValidByCriteria(Data data) {\r\n    try {\r\n      validationLogic.validate(data)\r\n    }\r\n    catch (Exception e) {\r\n      println &quot;Validation error: $e.message&quot;\r\n      return false\r\n    }\r\n    return true\r\n  }\r\n}\r\n```\r\n\r\n```java\r\nclass ValidationLogic {\r\n  void validate(Data data) {\r\n    if (data.name.contains(&#39;x&#39;))\r\n      throw new Exception(&#39;invalid data&#39;)\r\n  }\r\n}\r\n```\r\n\r\n```java\r\nclass Data {\r\n  String name\r\n}\r\n```\r\n\r\nThen your original test runs as given. One way to unify those two methods looks like this:\r\n\r\n```java\r\nclass ValidationServiceTest extends Specification {\r\n  def validationLogic = Mock(ValidationLogic)\r\n  def validationService = new ValidationService(validationLogic: validationLogic)\r\n\r\n  @Unroll(&#39;#resultType result&#39;)\r\n  def &#39;validation service returns normally&#39;() {\r\n    given: &#39;data to validate&#39;\r\n    Data data = Mock()\r\n\r\n    when: &#39;trying to check if valid&#39;\r\n    def result = validationService.isValidByCriteria(data)\r\n\r\n    then: &#39;service does not throw any exceptions&#39;\r\n    noExceptionThrown()\r\n    and: &#39;validation is called&#39;\r\n    1 * validationLogic.validate(data) &gt;&gt; { if (!expectedResult) throw new Exception(&#39;oops&#39;) }\r\n    and: &#39;result is as expected&#39;\r\n    result == expectedResult\r\n\r\n    where:\r\n    resultType | expectedResult\r\n    &#39;valid&#39;    | true\r\n    &#39;invalid&#39;  | false\r\n  }\r\n}\r\n```\r\n\r\nIn IntelliJ IDEA the unrolled feature is represented like this:\r\n\r\n[![IDEA test results][1]][1]\r\n\r\nTry it in the [Groovy Web Console](https://gwc-experiment.appspot.com/?g=groovy_4_0&amp;codez=eNqFVE2P0zAQvedXDAuSEw6RdpFYFGlXiI8bXGjZKzLONLXq2MF200bb_nf8lWybFnFL5-O9N2_G7Sjb0AahxtIwvW1_tdRY1KWxLqF61CuhduWf-_vbd-_v7j5kGW87pS2YTrFNKahsykWHjK84o5YreSX_U2olRJYxQY2BJyp4HUoXqHvOcInGAu4tytrAGRY8Z-CEraCfer6phjN4gO8OPX86DxcX1YnB1UvcXTLnM9xqTlRkDvJj1J-T1xrNVtjl0CHETzJSkpdGMIlUo91qaUAq3VIhBpIXYSCAhvcoKyCugYJVIyuSkP3ioyGVxgwqAHbr0GT1wGXj29ga2QZ4Gjg2ezFRm-u-MKLkJpjwafisudsyp7knSgQ2Eoz6a4VevHVxrXZA5eC2xLDzeCaySfV1jCx9kcyLEKeyrs484QaY8wCTylt4O7e6HE2IiuDxEZ79bPkr3LubsFj_CGMVSY5f6ESeE6U6Qwo4ntAnGxw1NTCCRP7RoQc4B5-M1lidFIaNH-a1Ph9nJP7zAFZvMUa5HOMHWFFhfPiYHf_5BMJdzK55bpDX9lspgdTbOV_jdDTjjbkzSV_wH6tDUTTOPTu2hnzyFbCYQDrNpRUSbl50AmqtdAVvsGzRGPc3cpOK4-1Ps4_4KZyMuupInN2T9orX09O4HNDfhv9dStpiyZS0lEuTkz0piqTi6qWk3QSs8H5PZAQSD7-w2j8yD-2yfwGj_7Mk).\r\n\r\n  [1]: https://i.stack.imgur.com/NkNG2.png","title":"How to merge two test cases with Groovy Spock where a void type of method once succeeds and once throws exception","body":"<p>I am not sure you should bake those two tests into a single one, because they represent different feature behaviours. I understand your motivation to reduce duplicate code, though.</p>\n<p>I guess your situation is roughly as follows:</p>\n<pre class=\"lang-java prettyprint-override\"><code>class ValidationService {\n  ValidationLogic validationLogic\n\n  boolean isValidByCriteria(Data data) {\n    try {\n      validationLogic.validate(data)\n    }\n    catch (Exception e) {\n      println &quot;Validation error: $e.message&quot;\n      return false\n    }\n    return true\n  }\n}\n</code></pre>\n<pre class=\"lang-java prettyprint-override\"><code>class ValidationLogic {\n  void validate(Data data) {\n    if (data.name.contains('x'))\n      throw new Exception('invalid data')\n  }\n}\n</code></pre>\n<pre class=\"lang-java prettyprint-override\"><code>class Data {\n  String name\n}\n</code></pre>\n<p>Then your original test runs as given. One way to unify those two methods looks like this:</p>\n<pre class=\"lang-java prettyprint-override\"><code>class ValidationServiceTest extends Specification {\n  def validationLogic = Mock(ValidationLogic)\n  def validationService = new ValidationService(validationLogic: validationLogic)\n\n  @Unroll('#resultType result')\n  def 'validation service returns normally'() {\n    given: 'data to validate'\n    Data data = Mock()\n\n    when: 'trying to check if valid'\n    def result = validationService.isValidByCriteria(data)\n\n    then: 'service does not throw any exceptions'\n    noExceptionThrown()\n    and: 'validation is called'\n    1 * validationLogic.validate(data) &gt;&gt; { if (!expectedResult) throw new Exception('oops') }\n    and: 'result is as expected'\n    result == expectedResult\n\n    where:\n    resultType | expectedResult\n    'valid'    | true\n    'invalid'  | false\n  }\n}\n</code></pre>\n<p>In IntelliJ IDEA the unrolled feature is represented like this:</p>\n<p><a href=\"https://i.stack.imgur.com/NkNG2.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/NkNG2.png\" alt=\"IDEA test results\" /></a></p>\n<p>Try it in the <a href=\"https://gwc-experiment.appspot.com/?g=groovy_4_0&amp;codez=eNqFVE2P0zAQvedXDAuSEw6RdpFYFGlXiI8bXGjZKzLONLXq2MF200bb_nf8lWybFnFL5-O9N2_G7Sjb0AahxtIwvW1_tdRY1KWxLqF61CuhduWf-_vbd-_v7j5kGW87pS2YTrFNKahsykWHjK84o5YreSX_U2olRJYxQY2BJyp4HUoXqHvOcInGAu4tytrAGRY8Z-CEraCfer6phjN4gO8OPX86DxcX1YnB1UvcXTLnM9xqTlRkDvJj1J-T1xrNVtjl0CHETzJSkpdGMIlUo91qaUAq3VIhBpIXYSCAhvcoKyCugYJVIyuSkP3ioyGVxgwqAHbr0GT1wGXj29ga2QZ4Gjg2ezFRm-u-MKLkJpjwafisudsyp7knSgQ2Eoz6a4VevHVxrXZA5eC2xLDzeCaySfV1jCx9kcyLEKeyrs484QaY8wCTylt4O7e6HE2IiuDxEZ79bPkr3LubsFj_CGMVSY5f6ESeE6U6Qwo4ntAnGxw1NTCCRP7RoQc4B5-M1lidFIaNH-a1Ph9nJP7zAFZvMUa5HOMHWFFhfPiYHf_5BMJdzK55bpDX9lspgdTbOV_jdDTjjbkzSV_wH6tDUTTOPTu2hnzyFbCYQDrNpRUSbl50AmqtdAVvsGzRGPc3cpOK4-1Ps4_4KZyMuupInN2T9orX09O4HNDfhv9dStpiyZS0lEuTkz0piqTi6qWk3QSs8H5PZAQSD7-w2j8yD-2yfwGj_7Mk\" rel=\"nofollow noreferrer\">Groovy Web Console</a>.</p>\n"}],"owner":{"account_id":324230,"reputation":6336,"user_id":644686,"accept_rate":60,"display_name":"victorio"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":38,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":77138699,"answer_count":1,"score":0,"last_activity_date":1695171695,"creation_date":1695139620,"question_id":77136228,"body_markdown":"I have the following 2 test cases for the same method.\r\n\r\nThe first calls a service where there is no result (because the service method is a `void`).\r\n\r\nThe second calls the same service but then it results with an exception.\r\n\r\nHow can I merge these two test cases into one by using the @Unroll and `where` parts?\r\n\r\nTest 1:\r\n\r\n    def &quot;test is valid by case - valid&quot;() {\r\n    \tgiven: &quot;data to validate&quot;\r\n    \tData data = Mock()\r\n    \t\r\n    \twhen: &quot;trying to check if valid&quot;\r\n    \tdef result = validationService.isValidByCriteria(data)\r\n    \r\n    \tthen: &quot;no exception is thrown&quot;\r\n    \tnoExceptionThrown()\r\n    \tand: &quot;validation is called without exception&quot;\r\n    \t1 * validationLogic.validate(data)\r\n    \tand: &quot;no exception therefore true returns&quot;\r\n    \tresult\r\n    }\r\n\r\nTest 2:\r\n\r\n    def &quot;test is valid by case - invalid&quot;() {\r\n    \tgiven: &quot;data to validate&quot;\r\n    \tData data = Mock()\r\n    \t\r\n    \twhen: &quot;trying to check if valid&quot;\r\n    \tdef result = validationService.isValidByCriteria(data)\r\n    \r\n    \tthen: &quot;no exception is thrown&quot;\r\n    \tnoExceptionThrown()\r\n    \tand: &quot;validation is called with exception&quot;\r\n    \t1 * validationLogic.validate(data) &gt;&gt; {throw new Exception()}\r\n    \tand: &quot;exception therefore false returns&quot;\r\n    \t!result\r\n    }","title":"How to merge two test cases with Groovy Spock where a void type of method once succeeds and once throws exception","body":"<p>I have the following 2 test cases for the same method.</p>\n<p>The first calls a service where there is no result (because the service method is a <code>void</code>).</p>\n<p>The second calls the same service but then it results with an exception.</p>\n<p>How can I merge these two test cases into one by using the @Unroll and <code>where</code> parts?</p>\n<p>Test 1:</p>\n<pre><code>def &quot;test is valid by case - valid&quot;() {\n    given: &quot;data to validate&quot;\n    Data data = Mock()\n    \n    when: &quot;trying to check if valid&quot;\n    def result = validationService.isValidByCriteria(data)\n\n    then: &quot;no exception is thrown&quot;\n    noExceptionThrown()\n    and: &quot;validation is called without exception&quot;\n    1 * validationLogic.validate(data)\n    and: &quot;no exception therefore true returns&quot;\n    result\n}\n</code></pre>\n<p>Test 2:</p>\n<pre><code>def &quot;test is valid by case - invalid&quot;() {\n    given: &quot;data to validate&quot;\n    Data data = Mock()\n    \n    when: &quot;trying to check if valid&quot;\n    def result = validationService.isValidByCriteria(data)\n\n    then: &quot;no exception is thrown&quot;\n    noExceptionThrown()\n    and: &quot;validation is called with exception&quot;\n    1 * validationLogic.validate(data) &gt;&gt; {throw new Exception()}\n    and: &quot;exception therefore false returns&quot;\n    !result\n}\n</code></pre>\n"},{"tags":["java","database","hibernate","jpa","entity"],"comments":[{"owner":{"account_id":231721,"reputation":20460,"user_id":496099,"display_name":"Chris"},"score":0,"creation_date":1695185638,"post_id":77138693,"comment_id":135988572,"body_markdown":"Turn on SQL logging and if it is working, it should affect the SQL and when SQL is issued. The load graph though should have no effect - LoadGraph is used to mark &#39;name&#39; as eager, which it already is, and everything else left to their defaults. What do you mean you&#39;ve tried various Persistence Provider? Lazy loading basics in hibernate I believe requires bytecode enhancement.","body":"Turn on SQL logging and if it is working, it should affect the SQL and when SQL is issued. The load graph though should have no effect - LoadGraph is used to mark &#39;name&#39; as eager, which it already is, and everything else left to their defaults. What do you mean you&#39;ve tried various Persistence Provider? Lazy loading basics in hibernate I believe requires bytecode enhancement."}],"owner":{"account_id":27116540,"reputation":1,"user_id":20660794,"display_name":"Vsevolod Kasatchikov"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":20,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1695171430,"creation_date":1695171430,"question_id":77138693,"body_markdown":"I tried to check how EntityGraph works in java ee, but after trying many options and various Persistence Provider, I did not see the result of its work. I tried lazily loading related entities and regular entity fields, but everything worked as usual. If it really works, could you give an example where it really has an effect?\r\n\r\nfirst entity:\r\n```java\r\n@Entity\r\npublic class Students {\r\n    @Id\r\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\r\n    int id;\r\n    @Basic(fetch = FetchType.EAGER)\r\n    String name;\r\n    @Basic(fetch = FetchType.LAZY)\r\n    String surname;\r\n    @OneToMany\r\n    List&lt;StudInfos&gt; studInfos = new ArrayList&lt;&gt;();\r\n    public Students() {}\r\n    public Students(String name, String surname) {\r\n        this.name = name;\r\n        this.surname = surname;\r\n    }\r\n    public int getId() {\r\n        return id;\r\n    }\r\n    public void setId(int id) {\r\n        this.id = id;\r\n    }\r\n    public String getName() {\r\n        return name;\r\n    }\r\n    public void setName(String name) {\r\n        this.name = name;\r\n    }\r\n    public void setStudInfos(StudInfos studInfos) {\r\n        this.studInfos.add(studInfos);\r\n    }\r\n    public String getSurname() {\r\n        return surname;\r\n    }\r\n    public void setSurname(String surname) {\r\n        this.surname = surname;\r\n    }\r\n}\r\n```\r\n\r\nsecond entity:\r\n```java\r\n@Entity\r\npublic class StudInfos {\r\n    @Id\r\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\r\n    @Basic(fetch = FetchType.EAGER)\r\n    int id;\r\n    @Basic(fetch = FetchType.LAZY)\r\n    String address;\r\n    @OneToOne\r\n    Students students;\r\n    public StudInfos() {}\r\n    public StudInfos(String address) {\r\n        this.address = address;\r\n    }\r\n    public String getAddress() {\r\n        return address;\r\n    }\r\n    public void setAddress(String address) {\r\n        this.address = address;\r\n    }\r\n    public void setStudents(Students students) {\r\n        this.students = students;\r\n    }\r\n}\r\n```\r\n\r\nmain class:\r\nWhen trying to output fields (which were loaded lazily) after closing EntityManager, they are calmly output and an error is not thrown, as if they were already loaded.\r\n```java\r\npublic class Testing {\r\n    public static void main(String[] args) {\r\n        EntityManagerFactory emf = Persistence\r\n                .createEntityManagerFactory(&quot;studentUnit&quot;);\r\n\r\n        Students students = new Students(&quot;Andres&quot;, &quot;Kenzi&quot;);\r\n        StudInfos infos = new StudInfos(&quot;dfsiodfdsj&quot;);\r\n        StudInfos infos1 = new StudInfos(&quot;dfsiodddddd&quot;);\r\n        students.setStudInfos(infos);\r\n        students.setStudInfos(infos1);\r\n        EntityManager manager = emf.createEntityManager();\r\n        manager.getTransaction().begin();\r\n        manager.persist(students);\r\n        manager.persist(infos);\r\n        manager.persist(infos1);\r\n        manager.getTransaction().commit();\r\n\r\n        Query query = manager.createQuery(&quot;Select s from Students s where s.id = 1&quot;);\r\n        EntityGraph&lt;Students&gt; eg = manager.createEntityGraph(Students.class);\r\n        eg.addAttributeNodes(&quot;name&quot;);\r\n        query.setHint(&quot;javax.persistence.loadgraph&quot;, eg);\r\n        Students students1 = (Students) query.getSingleResult();\r\n\r\n        manager.close();\r\n        emf.close();\r\n        System.out.println(students1.studInfos.get(0).getAddress());\r\n        System.out.println(students1.getSurname());\r\n    }\r\n}\r\n```","title":"I can&#39;t see the result of EntityGraph. Is it still working?","body":"<p>I tried to check how EntityGraph works in java ee, but after trying many options and various Persistence Provider, I did not see the result of its work. I tried lazily loading related entities and regular entity fields, but everything worked as usual. If it really works, could you give an example where it really has an effect?</p>\n<p>first entity:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Entity\npublic class Students {\n    @Id\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\n    int id;\n    @Basic(fetch = FetchType.EAGER)\n    String name;\n    @Basic(fetch = FetchType.LAZY)\n    String surname;\n    @OneToMany\n    List&lt;StudInfos&gt; studInfos = new ArrayList&lt;&gt;();\n    public Students() {}\n    public Students(String name, String surname) {\n        this.name = name;\n        this.surname = surname;\n    }\n    public int getId() {\n        return id;\n    }\n    public void setId(int id) {\n        this.id = id;\n    }\n    public String getName() {\n        return name;\n    }\n    public void setName(String name) {\n        this.name = name;\n    }\n    public void setStudInfos(StudInfos studInfos) {\n        this.studInfos.add(studInfos);\n    }\n    public String getSurname() {\n        return surname;\n    }\n    public void setSurname(String surname) {\n        this.surname = surname;\n    }\n}\n</code></pre>\n<p>second entity:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Entity\npublic class StudInfos {\n    @Id\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\n    @Basic(fetch = FetchType.EAGER)\n    int id;\n    @Basic(fetch = FetchType.LAZY)\n    String address;\n    @OneToOne\n    Students students;\n    public StudInfos() {}\n    public StudInfos(String address) {\n        this.address = address;\n    }\n    public String getAddress() {\n        return address;\n    }\n    public void setAddress(String address) {\n        this.address = address;\n    }\n    public void setStudents(Students students) {\n        this.students = students;\n    }\n}\n</code></pre>\n<p>main class:\nWhen trying to output fields (which were loaded lazily) after closing EntityManager, they are calmly output and an error is not thrown, as if they were already loaded.</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class Testing {\n    public static void main(String[] args) {\n        EntityManagerFactory emf = Persistence\n                .createEntityManagerFactory(&quot;studentUnit&quot;);\n\n        Students students = new Students(&quot;Andres&quot;, &quot;Kenzi&quot;);\n        StudInfos infos = new StudInfos(&quot;dfsiodfdsj&quot;);\n        StudInfos infos1 = new StudInfos(&quot;dfsiodddddd&quot;);\n        students.setStudInfos(infos);\n        students.setStudInfos(infos1);\n        EntityManager manager = emf.createEntityManager();\n        manager.getTransaction().begin();\n        manager.persist(students);\n        manager.persist(infos);\n        manager.persist(infos1);\n        manager.getTransaction().commit();\n\n        Query query = manager.createQuery(&quot;Select s from Students s where s.id = 1&quot;);\n        EntityGraph&lt;Students&gt; eg = manager.createEntityGraph(Students.class);\n        eg.addAttributeNodes(&quot;name&quot;);\n        query.setHint(&quot;javax.persistence.loadgraph&quot;, eg);\n        Students students1 = (Students) query.getSingleResult();\n\n        manager.close();\n        emf.close();\n        System.out.println(students1.studInfos.get(0).getAddress());\n        System.out.println(students1.getSurname());\n    }\n}\n</code></pre>\n"},{"tags":["java","maven","intellij-idea","mapstruct"],"comments":[{"owner":{"account_id":1939636,"reputation":28467,"user_id":1746118,"accept_rate":95,"display_name":"Naman"},"score":0,"creation_date":1503658972,"post_id":45879815,"comment_id":78718133,"body_markdown":"does invalidating cache of intelliJ help there?","body":"does invalidating cache of intelliJ help there?"},{"owner":{"account_id":36734,"reputation":392137,"user_id":104891,"display_name":"CrazyCoder"},"score":0,"creation_date":1503659284,"post_id":45879815,"comment_id":78718338,"body_markdown":"Bug report with the reproducible test case would be appreciated at https://youtrack.jetbrains.com/issues/IDEA if the issue still occurs in the current release.","body":"Bug report with the reproducible test case would be appreciated at <a href=\"https://youtrack.jetbrains.com/issues/IDEA\" rel=\"nofollow noreferrer\">youtrack.jetbrains.com/issues/IDEA</a> if the issue still occurs in the current release."},{"owner":{"account_id":112317,"reputation":93949,"user_id":296328,"accept_rate":60,"display_name":"khmarbaise"},"score":0,"creation_date":1503661751,"post_id":45879815,"comment_id":78719687,"body_markdown":"First I would recommend to test the build on plain command line...to be sure at the first step the issue is not related to IDE...afterwards Test in IDE...","body":"First I would recommend to test the build on plain command line...to be sure at the first step the issue is not related to IDE...afterwards Test in IDE..."},{"owner":{"account_id":1864571,"reputation":23738,"user_id":1688441,"accept_rate":82,"display_name":"Menelaos"},"score":0,"creation_date":1503662870,"post_id":45879815,"comment_id":78720389,"body_markdown":"thanks for the comments, I will definitely try these suggestions asap in order to test them and also submit a issue to jetbrains.","body":"thanks for the comments, I will definitely try these suggestions asap in order to test them and also submit a issue to jetbrains."},{"owner":{"account_id":1128956,"reputation":19765,"user_id":1115491,"display_name":"Filip"},"score":0,"creation_date":1503689284,"post_id":45879815,"comment_id":78735868,"body_markdown":"Which version of MapStruct are you using? This looks similar as [#1180](https://github.com/mapstruct/mapstruct/issues/1180). It is strange though that it is happening only within the IntelliJ build. This can happen when you are extending Mappers or using `@MapperConfig` that is in a different jar.","body":"Which version of MapStruct are you using? This looks similar as <a href=\"https://github.com/mapstruct/mapstruct/issues/1180\" rel=\"nofollow noreferrer\">#1180</a>. It is strange though that it is happening only within the IntelliJ build. This can happen when you are extending Mappers or using <code>@MapperConfig</code> that is in a different jar."},{"owner":{"account_id":464411,"reputation":203,"user_id":867899,"accept_rate":100,"display_name":"freeeman"},"score":0,"creation_date":1607433638,"post_id":45879815,"comment_id":115266005,"body_markdown":"Can confirm that the workaround provided in the question itself DOES WORK. Thanks @OptimalPrime","body":"Can confirm that the workaround provided in the question itself DOES WORK. Thanks @OptimalPrime"}],"owner":{"account_id":1864571,"reputation":23738,"user_id":1688441,"accept_rate":82,"display_name":"Menelaos"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":4149,"favorite_count":0,"down_vote_count":0,"up_vote_count":4,"answer_count":0,"score":4,"last_activity_date":1695170278,"creation_date":1503658509,"question_id":45879815,"body_markdown":"Problem:\r\n-\r\n\r\nWe have a class that extends another class and inherits some fields.\r\n`clean install` in maven is working perfectly and the `impl` mapper classes are being generated.\r\n\r\nSometimes other people (students, etc) have changed the mappers, I notice that the `build/make project` in InteliJ is breaking.\r\n\r\nI am getting an error such as the following stacktrace:\r\n\r\n        Error:(12, 8) java: Internal error in the mapping processor: java.lang.NullPointerException            at\r\n     org.mapstruct.ap.internal.model.source.SourceReference.copyForInheritanceTo(SourceReference.java:333)  at\r\n     org.mapstruct.ap.internal.model.source.Mapping.copyForInheritanceTo(Mapping.java:462)      at\r\n     org.mapstruct.ap.internal.model.source.MappingOptions.applyInheritedOptions(MappingOptions.java:279)     at\r\n     org.mapstruct.ap.internal.processor.MapperCreat\r\n    ionProcessor.mergeInheritedOptions(MapperCreat\r\n    ionProcessor.java:457)                  at\r\n     org.mapstruct.ap.internal.processor.MapperCreat\r\n    ionProcessor.getMappingMethods(MapperCreat\r\n    ionProcessor.java:274)                  at\r\n     org.mapstruct.ap.internal.processor.MapperCreat\r\n    ionProcessor.getMapper(MapperCreat\r\n    ionProcessor.java:152)                  at\r\n     org.mapstruct.ap.internal.processor.MapperCreat\r\n    ionProcessor.process(MapperCreat\r\n    ionProcessor.java:123)                  at\r\n     org.mapstruct.ap.internal.processor.MapperCreat\r\n    ionProcessor.process(MapperCreat\r\n    ionProcessor.java:80)                  at\r\n     org.mapstruct.ap.MappingProcessor.process(MappingProcessor.java:280)    at\r\n     org.mapstruct.ap.MappingProcessor.processMapperTypeElement(MappingProcessor.java:260)              at\r\n     org.mapstruct.ap.MappingProcessor.processMapperElements(MappingProcessor.java:226)      at\r\n     org.mapstruct.ap.MappingProcessor.process(MappingProcessor.java:162)         at\r\n     com.sun.tools.javac.processing.JavacProcessingEnvironment.callProcessor(JavacProcessingEnvironment.java:794)         at\r\n     com.sun.tools.javac.processing.JavacProcessingEnvironment.discoverAndRunProcs(JavacProcessingEnvironment.java:705)                  at\r\n     com.sun.tools.javac.processing.JavacProcessingEnvironment.access$1800(JavacProcessingEnvironment.java:91)                  at\r\n     com.sun.tools.javac.processing.JavacProcessingEnvironment$Round.run(JavacProcessingEnvironment.java:1035)          at\r\n     com.sun.tools.javac.processing.JavacProcessingEnvironment.doProcessing(JavacProcessingEnvironment.java:1176)      at\r\n     com.sun.tools.javac.main.JavaCompiler.processAnnotat\r\n    ions(JavaCompiler.java:1170)  at\r\n     com.sun.tools.javac.main.JavaCompiler.compile(JavaCompiler.java:856)              at\r\n     com.sun.tools.javac.main.Main.compile(Main.java:523)                at\r\n     com.sun.tools.javac.api.JavacTaskImpl.doCall(JavacTaskImpl.java:129)  at\r\n     com.sun.tools.javac.api.JavacTaskImpl.call(JavacTaskImpl.java:138)         at\r\n\r\nAnd here is where jetbrains part is:\r\n\r\n     org.jetbrains.jps.javac.JavacMain.compile(JavacMain.java:190)                 at\r\n     org.jetbrains.jps.incremental.java.JavaBuilder.compileJava(JavaBuilder.java:483)             at\r\n     org.jetbrains.jps.incremental.java.JavaBuilder.compile(JavaBuilder.java:339)     at\r\n     org.jetbrains.jps.incremental.java.JavaBuilder.doBuild(JavaBuilder.java:256)      at\r\n     org.jetbrains.jps.incremental.java.JavaBuilder.build(JavaBuilder.java:214)           at\r\n     org.jetbrains.jps.incremental.IncProjectBuilder.runModuleLevelBuilders(IncProjectBuilder.java:1263)  at\r\n     org.jetbrains.jps.incremental.IncProjectBuilder.runBuildersForChunk(IncProjectBuilder.java:940)            at\r\n     org.jetbrains.jps.incremental.IncProjectBuilder.buildTargetsChunk(IncProjectBuilder.java:1012)               at\r\n     org.jetbrains.jps.incremental.IncProjectBuilder.buildChunkIfAffected(IncProjectBuilder.java:903)           at\r\n     org.jetbrains.jps.incremental.IncProjectBuilder.buildChunks(IncProjectBuilder.java:736)              at\r\n     org.jetbrains.jps.incremental.IncProjectBuilder.runBuild(IncProjectBuilder.java:384)      at\r\n     org.jetbrains.jps.incremental.IncProjectBuilder.build(IncProjectBuilder.java:192)             at\r\n     org.jetbrains.jps.cmdline.BuildRunner.runBuild(BuildRunner.java:138)                  at\r\n     org.jetbrains.jps.cmdline.BuildSession.runBuild(BuildSession.java:295)                  at\r\n     org.jetbrains.jps.cmdline.BuildSession.run(BuildSession.java:125)            at\r\n     org.jetbrains.jps.cmdline.BuildMain$MyMessageHandler.lambda$channelRead0$0(BuildMain.java:236)               at\r\n     org.jetbrains.jps.service.impl.SharedThreadPoolImpl.lambda$executeOnPooledThread$0(SharedThreadPoolImpl.java:42)                  at\r\n     java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)       at\r\n     java.util.concurrent.FutureTask.run(FutureTask.java:266)            at\r\n     java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)     at\r\n     java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)     at\r\n     java.lang.Thread.run(Thread.java:745)  \r\n\r\n\r\nQuestion:\r\n-\r\nSo, is there some type of configuration change I need to make to InteliJ???\r\n\r\nCurrent Workaround:\r\n-\r\n\r\nWhat is working for me now, is to go to the `Spring Boot Run Configuration` and in the section `Before Launch: Activate tool window` I have made a change.\r\n\r\nI have removed `Build Project `. So the `target directory` generated from maven is used. Inteli J make command is used only to rebuild and hotswap changed classes.","title":"Mapstruct and InteliJ - Exception sometimes with inherited fields during `build project`","body":"<h2>Problem:</h2>\n\n<p>We have a class that extends another class and inherits some fields.\n<code>clean install</code> in maven is working perfectly and the <code>impl</code> mapper classes are being generated.</p>\n\n<p>Sometimes other people (students, etc) have changed the mappers, I notice that the <code>build/make project</code> in InteliJ is breaking.</p>\n\n<p>I am getting an error such as the following stacktrace:</p>\n\n<pre><code>    Error:(12, 8) java: Internal error in the mapping processor: java.lang.NullPointerException            at\n org.mapstruct.ap.internal.model.source.SourceReference.copyForInheritanceTo(SourceReference.java:333)  at\n org.mapstruct.ap.internal.model.source.Mapping.copyForInheritanceTo(Mapping.java:462)      at\n org.mapstruct.ap.internal.model.source.MappingOptions.applyInheritedOptions(MappingOptions.java:279)     at\n org.mapstruct.ap.internal.processor.MapperCreat\nionProcessor.mergeInheritedOptions(MapperCreat\nionProcessor.java:457)                  at\n org.mapstruct.ap.internal.processor.MapperCreat\nionProcessor.getMappingMethods(MapperCreat\nionProcessor.java:274)                  at\n org.mapstruct.ap.internal.processor.MapperCreat\nionProcessor.getMapper(MapperCreat\nionProcessor.java:152)                  at\n org.mapstruct.ap.internal.processor.MapperCreat\nionProcessor.process(MapperCreat\nionProcessor.java:123)                  at\n org.mapstruct.ap.internal.processor.MapperCreat\nionProcessor.process(MapperCreat\nionProcessor.java:80)                  at\n org.mapstruct.ap.MappingProcessor.process(MappingProcessor.java:280)    at\n org.mapstruct.ap.MappingProcessor.processMapperTypeElement(MappingProcessor.java:260)              at\n org.mapstruct.ap.MappingProcessor.processMapperElements(MappingProcessor.java:226)      at\n org.mapstruct.ap.MappingProcessor.process(MappingProcessor.java:162)         at\n com.sun.tools.javac.processing.JavacProcessingEnvironment.callProcessor(JavacProcessingEnvironment.java:794)         at\n com.sun.tools.javac.processing.JavacProcessingEnvironment.discoverAndRunProcs(JavacProcessingEnvironment.java:705)                  at\n com.sun.tools.javac.processing.JavacProcessingEnvironment.access$1800(JavacProcessingEnvironment.java:91)                  at\n com.sun.tools.javac.processing.JavacProcessingEnvironment$Round.run(JavacProcessingEnvironment.java:1035)          at\n com.sun.tools.javac.processing.JavacProcessingEnvironment.doProcessing(JavacProcessingEnvironment.java:1176)      at\n com.sun.tools.javac.main.JavaCompiler.processAnnotat\nions(JavaCompiler.java:1170)  at\n com.sun.tools.javac.main.JavaCompiler.compile(JavaCompiler.java:856)              at\n com.sun.tools.javac.main.Main.compile(Main.java:523)                at\n com.sun.tools.javac.api.JavacTaskImpl.doCall(JavacTaskImpl.java:129)  at\n com.sun.tools.javac.api.JavacTaskImpl.call(JavacTaskImpl.java:138)         at\n</code></pre>\n\n<p>And here is where jetbrains part is:</p>\n\n<pre><code> org.jetbrains.jps.javac.JavacMain.compile(JavacMain.java:190)                 at\n org.jetbrains.jps.incremental.java.JavaBuilder.compileJava(JavaBuilder.java:483)             at\n org.jetbrains.jps.incremental.java.JavaBuilder.compile(JavaBuilder.java:339)     at\n org.jetbrains.jps.incremental.java.JavaBuilder.doBuild(JavaBuilder.java:256)      at\n org.jetbrains.jps.incremental.java.JavaBuilder.build(JavaBuilder.java:214)           at\n org.jetbrains.jps.incremental.IncProjectBuilder.runModuleLevelBuilders(IncProjectBuilder.java:1263)  at\n org.jetbrains.jps.incremental.IncProjectBuilder.runBuildersForChunk(IncProjectBuilder.java:940)            at\n org.jetbrains.jps.incremental.IncProjectBuilder.buildTargetsChunk(IncProjectBuilder.java:1012)               at\n org.jetbrains.jps.incremental.IncProjectBuilder.buildChunkIfAffected(IncProjectBuilder.java:903)           at\n org.jetbrains.jps.incremental.IncProjectBuilder.buildChunks(IncProjectBuilder.java:736)              at\n org.jetbrains.jps.incremental.IncProjectBuilder.runBuild(IncProjectBuilder.java:384)      at\n org.jetbrains.jps.incremental.IncProjectBuilder.build(IncProjectBuilder.java:192)             at\n org.jetbrains.jps.cmdline.BuildRunner.runBuild(BuildRunner.java:138)                  at\n org.jetbrains.jps.cmdline.BuildSession.runBuild(BuildSession.java:295)                  at\n org.jetbrains.jps.cmdline.BuildSession.run(BuildSession.java:125)            at\n org.jetbrains.jps.cmdline.BuildMain$MyMessageHandler.lambda$channelRead0$0(BuildMain.java:236)               at\n org.jetbrains.jps.service.impl.SharedThreadPoolImpl.lambda$executeOnPooledThread$0(SharedThreadPoolImpl.java:42)                  at\n java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)       at\n java.util.concurrent.FutureTask.run(FutureTask.java:266)            at\n java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)     at\n java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)     at\n java.lang.Thread.run(Thread.java:745)  \n</code></pre>\n\n<h2>Question:</h2>\n\n<p>So, is there some type of configuration change I need to make to InteliJ???</p>\n\n<h2>Current Workaround:</h2>\n\n<p>What is working for me now, is to go to the <code>Spring Boot Run Configuration</code> and in the section <code>Before Launch: Activate tool window</code> I have made a change.</p>\n\n<p>I have removed <code>Build Project</code>. So the <code>target directory</code> generated from maven is used. Inteli J make command is used only to rebuild and hotswap changed classes.</p>\n"},{"tags":["java","regex","regex-lookarounds"],"answers":[{"tags":[],"owner":{"account_id":1145600,"reputation":2708,"user_id":1128441,"display_name":"ChrisG"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1334345405,"creation_date":1334345405,"answer_id":10147145,"question_id":10147060,"body_markdown":"Why don&#39;t you just use \r\n\r\n`(\\\\d{3}: \\\\w+)`\r\n\r\nand then use find.next() until there isn&#39;t any next?","title":"Java regular expressions with negative lookahead","body":"<p>Why don't you just use </p>\n\n<p><code>(\\\\d{3}: \\\\w+)</code></p>\n\n<p>and then use find.next() until there isn't any next?</p>\n"},{"comments":[{"owner":{"account_id":24810,"reputation":44154,"user_id":63309,"accept_rate":70,"display_name":"Tom"},"score":0,"creation_date":1334345559,"post_id":10147150,"comment_id":13011909,"body_markdown":"No, for some reason I get the first occurrence of thredigits followed by &quot;:&quot;","body":"No, for some reason I get the first occurrence of thredigits followed by &quot;:&quot;"},{"owner":{"account_id":262968,"reputation":767160,"user_id":548225,"accept_rate":90,"display_name":"anubhava"},"score":0,"creation_date":1334346354,"post_id":10147150,"comment_id":13012197,"body_markdown":"`&quot;.*(\\\\d{3}):&quot;` should capture `987` not `819`.","body":"<code>&quot;.*(\\\\d{3}):&quot;</code> should capture <code>987</code> not <code>819</code>."}],"tags":[],"owner":{"account_id":123958,"reputation":109295,"user_id":318758,"accept_rate":100,"display_name":"Joni"},"comment_count":2,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1334345425,"creation_date":1334345425,"answer_id":10147150,"question_id":10147060,"body_markdown":"If you are only interested in the last occurrence of three digits followed by a colon, wouldn&#39;t `.*(\\d{3}:)` work?","title":"Java regular expressions with negative lookahead","body":"<p>If you are only interested in the last occurrence of three digits followed by a colon, wouldn't <code>.*(\\d{3}:)</code> work?</p>\n"},{"comments":[{"owner":{"account_id":24810,"reputation":44154,"user_id":63309,"accept_rate":70,"display_name":"Tom"},"score":0,"creation_date":1334346529,"post_id":10147295,"comment_id":13012276,"body_markdown":"That&#39;s it. I added .* at the begining and end of the lookahead.  Thank you very much.","body":"That&#39;s it. I added .* at the begining and end of the lookahead.  Thank you very much."}],"tags":[],"owner":{"account_id":46144,"reputation":7024,"user_id":136248,"accept_rate":100,"display_name":"Benoit Courtine"},"comment_count":1,"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1334347485,"creation_date":1334346114,"answer_id":10147295,"question_id":10147060,"body_markdown":"Your regex is very near to the one you need.\r\n\r\nIn your negative lookhead, you just forgot that different timestamps are separated by several characters. So you have to add `.+` or `.*` in your lookahead to specify that.\r\n\r\nHere is the regex you need:\r\n\r\n    &quot;(\\\\d{3}):(?!.+\\\\d{4}/\\\\d{2}/\\\\d{2}\\\\s\\\\d{2}:\\\\d{2}:\\\\d{2}:\\\\d{6})&quot;\r\n\r\nIn your example, it will give you the &quot;987&quot; you are looking for.","title":"Java regular expressions with negative lookahead","body":"<p>Your regex is very near to the one you need.</p>\n\n<p>In your negative lookhead, you just forgot that different timestamps are separated by several characters. So you have to add <code>.+</code> or <code>.*</code> in your lookahead to specify that.</p>\n\n<p>Here is the regex you need:</p>\n\n<pre><code>\"(\\\\d{3}):(?!.+\\\\d{4}/\\\\d{2}/\\\\d{2}\\\\s\\\\d{2}:\\\\d{2}:\\\\d{2}:\\\\d{6})\"\n</code></pre>\n\n<p>In your example, it will give you the \"987\" you are looking for.</p>\n"}],"owner":{"account_id":24810,"reputation":44154,"user_id":63309,"accept_rate":70,"display_name":"Tom"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":651,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":10147295,"answer_count":3,"score":0,"last_activity_date":1695168542,"creation_date":1334344964,"question_id":10147060,"body_markdown":"I&#39;m facing some trouble writing a regular expression in Java to parse information from a logfile.\r\n\r\nI have a String where the structure &quot;timeinstant: some strings with any character&quot; is repeated   from 1 to N times.\r\n\r\ntimeinstant has the format &quot;dd/mm/yyyy hh:MM:ss:MMMMMM&quot; (M being microseconds).\r\n\r\nWhat I&#39;m trying to do is to find the microseconds of last timeinstant contained in an incoming string.\r\n\r\nFor example, with the string\r\n\r\n\r\n    ] 2012/04/02 16:28:51:861819: abcdefg : lwersdgsdg remote=xx.xxx.xx.xxx:yyy3f] accepted and identified as: John 2012/04/02 16:28:51:862987: pump: Received data on connection {John} [\r\n\r\nI&#39;d like  `m.find()` to point to `&quot;987: pump...&quot;`. In order to get this, I&#39;m using a regex with lookahead:\r\n\r\n`&quot;(\\\\d{3}:)(?!\\\\d{4}/\\\\d{2}/\\\\d{2}\\\\s\\\\d{2}:\\\\d{2}:\\\\d{2}:\\\\d{6})&quot;`\r\n\r\nBut right now `m.find()` is pointing to `819` (contained in `2012/04/02 16:28:51:861819`).\r\n","title":"Java regular expressions with negative lookahead","body":"<p>I'm facing some trouble writing a regular expression in Java to parse information from a logfile.</p>\n<p>I have a String where the structure &quot;timeinstant: some strings with any character&quot; is repeated   from 1 to N times.</p>\n<p>timeinstant has the format &quot;dd/mm/yyyy hh:MM:ss:MMMMMM&quot; (M being microseconds).</p>\n<p>What I'm trying to do is to find the microseconds of last timeinstant contained in an incoming string.</p>\n<p>For example, with the string</p>\n<pre><code>] 2012/04/02 16:28:51:861819: abcdefg : lwersdgsdg remote=xx.xxx.xx.xxx:yyy3f] accepted and identified as: John 2012/04/02 16:28:51:862987: pump: Received data on connection {John} [\n</code></pre>\n<p>I'd like  <code>m.find()</code> to point to <code>&quot;987: pump...&quot;</code>. In order to get this, I'm using a regex with lookahead:</p>\n<p><code>&quot;(\\\\d{3}:)(?!\\\\d{4}/\\\\d{2}/\\\\d{2}\\\\s\\\\d{2}:\\\\d{2}:\\\\d{2}:\\\\d{6})&quot;</code></p>\n<p>But right now <code>m.find()</code> is pointing to <code>819</code> (contained in <code>2012/04/02 16:28:51:861819</code>).</p>\n"},{"tags":["java","java-11","lombok","java-19"],"answers":[{"comments":[{"owner":{"account_id":29279414,"reputation":77,"user_id":22432372,"display_name":"paratrooper"},"score":0,"creation_date":1692937962,"post_id":76974199,"comment_id":135695180,"body_markdown":"thanks for the reply. I agree that licensing wont be change anytime soon, at least not before I get promoted to managerial position. could you explain more on how writing maven plugin (we use maven) would solve closing of loopholes by openjdk? I&#39;m not very familiar with this part. Thanks","body":"thanks for the reply. I agree that licensing wont be change anytime soon, at least not before I get promoted to managerial position. could you explain more on how writing maven plugin (we use maven) would solve closing of loopholes by openjdk? I&#39;m not very familiar with this part. Thanks"},{"owner":{"account_id":401843,"reputation":89863,"user_id":768644,"display_name":"rzwitserloot"},"score":0,"creation_date":1692939162,"post_id":76974199,"comment_id":135695305,"body_markdown":"maven runs a plugin to actually compile your code ([this plugin](https://maven.apache.org/plugins/maven-compiler-plugin/)). This plugin is fairly lightweight: It is just some glue that lets you run `javac`, really. We can clone it and either just add the right `--Jadd-opens` options, or if OpenJDK closes that door (they currently have stated no intention of doing so), fork javac and ship it with the plugin.","body":"maven runs a plugin to actually compile your code (<a href=\"https://maven.apache.org/plugins/maven-compiler-plugin/\" rel=\"nofollow noreferrer\">this plugin</a>). This plugin is fairly lightweight: It is just some glue that lets you run <code>javac</code>, really. We can clone it and either just add the right <code>--Jadd-opens</code> options, or if OpenJDK closes that door (they currently have stated no intention of doing so), fork javac and ship it with the plugin."},{"owner":{"account_id":401843,"reputation":89863,"user_id":768644,"display_name":"rzwitserloot"},"score":0,"creation_date":1692939247,"post_id":76974199,"comment_id":135695311,"body_markdown":"(It&#39;s why, when you want to pick which java version your code is written for, the pom.xml content you add is `&lt;pluginManagement&gt;&lt;plugins&gt;&lt;plugin&gt;&lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;...` - because that compiler is simply a plugin).","body":"(It&#39;s why, when you want to pick which java version your code is written for, the pom.xml content you add is <code>&lt;pluginManagement&gt;&lt;plugins&gt;&lt;plugin&gt;&lt;artifactId&gt;maven-compile&zwnj;&#8203;r-plugin&lt;&#47;artifactId&zwnj;&#8203;&gt;...</code> - because that compiler is simply a plugin)."},{"owner":{"account_id":29279414,"reputation":77,"user_id":22432372,"display_name":"paratrooper"},"score":0,"creation_date":1692939521,"post_id":76974199,"comment_id":135695343,"body_markdown":"ok, so if I understand correctly, this plugin will use compiler that has no openjdk&#39;s restrictions? do I understand that correctly? and you&#39;re right regarding the word `illegal`. I&#39;ve striked it through in my original post.","body":"ok, so if I understand correctly, this plugin will use compiler that has no openjdk&#39;s restrictions? do I understand that correctly? and you&#39;re right regarding the word <code>illegal</code>. I&#39;ve striked it through in my original post."},{"owner":{"account_id":401843,"reputation":89863,"user_id":768644,"display_name":"rzwitserloot"},"score":0,"creation_date":1692940466,"post_id":76974199,"comment_id":135695441,"body_markdown":"Yup. Even if OpenJDK closes absolutely every door available, (even ones they have publicly said they have no interest in closing, such as `--add-opens`), we&#39;d just clone the javac project, patch, like, 5 lines in it, wrap it into a maven plugin, and ship it. All you&#39;d have to do in your pom is add that dependency and tell maven to use that plugin for compiling instead of the default maven-compiler-plugin. OpenJDK can&#39;t close that.","body":"Yup. Even if OpenJDK closes absolutely every door available, (even ones they have publicly said they have no interest in closing, such as <code>--add-opens</code>), we&#39;d just clone the javac project, patch, like, 5 lines in it, wrap it into a maven plugin, and ship it. All you&#39;d have to do in your pom is add that dependency and tell maven to use that plugin for compiling instead of the default maven-compiler-plugin. OpenJDK can&#39;t close that."},{"owner":{"account_id":401843,"reputation":89863,"user_id":768644,"display_name":"rzwitserloot"},"score":0,"creation_date":1692943179,"post_id":76974199,"comment_id":135695770,"body_markdown":"NB: One rather major note is that if we truly are forced to fork it, either lombok&#39;s licensing has to change (from a MIT style to a GPL style) because including the javac fork would require this, or, we use ecj. We&#39;d likely spring for the latter. In our experience ecj is faster and more correct anyway. This is unlikely to be relevant in any case (because the `--add-opens` route is [A] publicly stated by OpenJDK as not a door they have any interest in closing, and [B] wouldn&#39;t require including javac and thus, no licensing issue arises).","body":"NB: One rather major note is that if we truly are forced to fork it, either lombok&#39;s licensing has to change (from a MIT style to a GPL style) because including the javac fork would require this, or, we use ecj. We&#39;d likely spring for the latter. In our experience ecj is faster and more correct anyway. This is unlikely to be relevant in any case (because the <code>--add-opens</code> route is [A] publicly stated by OpenJDK as not a door they have any interest in closing, and [B] wouldn&#39;t require including javac and thus, no licensing issue arises)."}],"tags":[],"owner":{"account_id":401843,"reputation":89863,"user_id":768644,"display_name":"rzwitserloot"},"comment_count":6,"down_vote_count":1,"up_vote_count":18,"is_accepted":true,"score":17,"last_activity_date":1695168236,"creation_date":1692936515,"answer_id":76974199,"question_id":76974085,"body_markdown":"Lombok author here.\r\n\r\n## Would Lombok ever stop working?\r\n\r\nNot likely.\r\n\r\nWe are a plugin in [IntelliJ IDEA][1] and more or less a plugin in [Eclipse][2]; these routes cannot be closed down and aren&#39;t being targeted by Oracle/OpenJDK. Even if they wanted to, they don&#39;t run those projects at all. Separately, &#39;illegal&#39; refers to a country&#39;s criminal code. Whatever Oracle / team OpenJDK likes to say, &#39;illegal&#39; is not the appropriate term. It&#39;s an API access route that team OpenJDK does not officially support. There isn&#39;t any licensing violation here, so let&#39;s be careful with the choice of words. In the mean time, Lombok runs on Java&amp;nbsp;6 through 21; few libraries get to claim that kind of reach.\r\n\r\nWe can always just fork *javac*. It&#39;s open source. We know just how to do that and would do so if it comes down to that. However, the experience for you as a user would be annoyance. It would also play havoc with the idea that *javac* isn&#39;t _just_ a tool you invoke yourself; often other tools invoke it, and tend not to let you configure where *javac* lives easily, which makes a fork harder to use. However, in practice, we can enumerate the tools you are likely to run into, especially because *javac*, while open source, isn&#39;t very permissively licensed, and any attempt to use *javac* as part of a larger tool suffers from the same belligerent lockdown treatment that *javac* (as an API) exudes: Trying to deeply entwine with it isn&#39;t supported, so all you can really do is just call it like a command line tool, really.\r\n\r\nWhich makes writing plugins for those tools very simple. We just have to add some `--add-opens` lines and otherwise run with verbatim `javac`, or just mix Lombok into its modules and ship that.\r\n\r\nSpecifically, we can name 99% of all interactions with *javac*:\r\n\r\n* [Maven][3]\r\n* [Gradle][4]\r\n* Your IDE (but we already need, and have, plugins for those)\r\n* *javac* itself, but rarely.\r\n\r\nThat&#39;s, basically, it. The majority of linter tools and other [AST][5]-based analysers actually use *ecj* (Eclipse&#39;s compiler) under the hood, not *javac*. For example, Visual Studio Code uses Eclipse as a language server. Possibly because *ecj* is significantly faster. Probably because its more permissively licensed ([MIT-style][6] instead of [GPL][7] style).\r\n\r\nTherefore, all Lombok really needs to do if team OpenJDK closes every hole we use right now, is to write plugins for Gradle and Maven. Which isn&#39;t a problem: Both of those tools are fundamentally plugin based already, and writing these plugins would be a one-week job.\r\n\r\nUPDATE: As of September 12th, 2023, the maven plugin idea exists and works as designed. It took a day, not a week. We&#39;ll make it part of the official way to use lombok in maven in due time.\r\n\r\nOnce such plugins exists, OpenJDK hasn&#39;t expressed any interest in closing that route down. If they change their mind and try to, they&#39;d have to _change the licensing first_, which I don&#39;t think is likely to happen, but you&#39;ll have to decide that for yourself. Of course, if OpenJDK changes its licensing, then [A] its name would then be a joke, and [B] that would have a very significant impact on the ecosystem indeed, Lombok needing to sort out its licensing probably shouldn&#39;t rate as anywhere near the top concern if that drastic step ever happens, and [C] surely the community would __immediately__ fork the last open source version, find a new name (Oracle owns the &#39;Java&#39; and &#39;OpenJDK&#39; trademarks), and the community is somewhat likely to go with that project and leave Oracle/OpenJDK behind entirely at that point. You may rate it differently, but I&#39;d say it&#39;s fairly obvious that&#39;s not a contingency that&#39;s realistic at this point in time.\r\n\r\n## That article about delombok\r\n\r\nI feel attacked. Boy, it&#39;s a horribly written article. The first point they make, which comprises half of the article, is talking about an exotic bug (namely, that `@ToString` on an enum, which is weird because enums already have a workable *tostring*, does the wrong thing. Yes, that was a bug) and somehow translating that to some sort of &#39;see? It&#39;s weird and bad&#39;. I don&#39;t know about you, but if I approach programming on the basis of: If I run into __a single bug__ for a dependency I have, I shall __immediately__ ditch that dependency and write a nastygram blogpost about it. I would be soldering my own computer together at this point.\r\n\r\n&gt; However, the generated files were extremely ugly and not following any styling\r\n\r\nHogwash. We try to copy your tabbing and follow standard coding conventions (more or less, the Google style). We also take pains not to modify anything we don&#39;t have to.\r\n\r\n&gt; That were converted to many lines using if/throw blocks instead of one-line solutions like Guava Preconditions or Validate from Apache Commons.\r\n\r\nYou can tell Lombok to generate such things; the author didn&#39;t read the documentation of the tools they used before deciding to write that blogpost, I guess. We don&#39;t default to requiring still more dependencies for no good reason, of course. It&#39;s also not &#39;many lines&#39; at all, and it&#39;s extremely structured, so it is very easy to script away if you really don&#39;t want them for some reason (but, you added the `@NonNull` annotations, which do nothing except add those checks, so that&#39;s a weird thing to want to do).\r\n\r\n&gt; (right now Lombok is still facing problems with Java 9-11)\r\n\r\nLies. At least, I&#39;m not aware of any bugs, and the author doesn&#39;t say what they are talking about. Given that they prove they haven&#39;t bothered to read any documentation or try any settings, it&#39;s likely this is another pilot error situation. It was written a few years ago; Lombok runs fine on 9 and 11. (Lombok support for Java 9 took a few weeks after the official release of Java 9. This happens from time to time; however, not sure where &#39;Java 11&#39; is coming from here).\r\n\r\n_Generally_, delombok should be fine. There where Lombok generates __a lot__ of boilerplate for you (primarily, `@Builder`), the generated code probably isn&#39;t quite what you would have written (as in, it&#39;s a lot), and might be more to maintain than you signed up for. However, aside from `@Builder`, the rest is straightforward. Lombok intentionally doesn&#39;t like straying into errors that go beyond its mission to replace boilerplate, and that is defined as:\r\n\r\n1. It is common\r\n2. There is a universally agreed upon&amp;mdash;or at least fairly standard&amp;mdash;way to write it\r\n\r\nAnd, of course, by that very definition then, what delombok spits out is probably exactly how you would write it if Lombok wasn&#39;t around. Builder walks the line the most, but then, it takes care of a _ton_ of boilerplate so we&#39;re definitely keeping `@Builder` around.\r\n\r\nDelomboked code might not quite follow your exact style guidelines. It is quite configurable, but &#39;preferred style&#39; is a _very_ broad topic. You can (and probably should!) toss your delomboked code through an auto-formatter. That&#39;s not an option if you don&#39;t normally autoformat your source files and like the freedom of styling it the way you want, but, any additions to delombok&#39;s configurations to support more styles would be the kind of PR we would readily accept.\r\n\r\n## How would using another annotation processor cause Lombok to fail?\r\n\r\nThere can be a chicken and egg problem: Annotation processors A runs (not Lombok) and locks in certain decisions based on the source structure they see. _Then_ Lombok runs and adds some stuff, but A&#39;s already moved on. We use the rounds system of annotation processors (All APs, not just Lombok, suffer from this, it&#39;s why there&#39;s a rounds system), but Lombok modifies things that the base *Annotation Processor* specifications say don&#39;t normally change between rounds, so not all APs interact properly. It&#39;s hard to tell *javac* in which order to run them (generally, running Lombok first solves all problems). Whenever this occurs, we try to communicate with the relevant project to ensure we fix any problems, and few APs generate code based on code structure (most generate based on annotations!) One project where this comes up, is MapStruct. We try to work with them to make sure things work out regardless of which one of us &#39;runs first&#39;.\r\n\r\nIf you use another AP that uses source structure as an input, you might run into some trouble, yes. For what it&#39;s worth, writing plugins for your build system would likely just solve that entirely (we can force Lombok to run first if we do that).\r\n\r\n\r\n  [1]: https://en.wikipedia.org/wiki/IntelliJ_IDEA\r\n  [2]: https://en.wikipedia.org/wiki/Eclipse_%28software%29\r\n  [3]: https://en.wikipedia.org/wiki/Apache_Maven\r\n  [4]: https://en.wikipedia.org/wiki/Gradle\r\n  [5]: https://en.wikipedia.org/wiki/Abstract_syntax_tree\r\n  [6]: https://en.wikipedia.org/wiki/MIT_License\r\n  [7]: https://en.wikipedia.org/wiki/GNU_General_Public_License\r\n","title":"About project Lombok&#39;s future","body":"<p>Lombok author here.</p>\n<h2>Would Lombok ever stop working?</h2>\n<p>Not likely.</p>\n<p>We are a plugin in <a href=\"https://en.wikipedia.org/wiki/IntelliJ_IDEA\" rel=\"nofollow noreferrer\">IntelliJ IDEA</a> and more or less a plugin in <a href=\"https://en.wikipedia.org/wiki/Eclipse_%28software%29\" rel=\"nofollow noreferrer\">Eclipse</a>; these routes cannot be closed down and aren't being targeted by Oracle/OpenJDK. Even if they wanted to, they don't run those projects at all. Separately, 'illegal' refers to a country's criminal code. Whatever Oracle / team OpenJDK likes to say, 'illegal' is not the appropriate term. It's an API access route that team OpenJDK does not officially support. There isn't any licensing violation here, so let's be careful with the choice of words. In the mean time, Lombok runs on Java 6 through 21; few libraries get to claim that kind of reach.</p>\n<p>We can always just fork <em>javac</em>. It's open source. We know just how to do that and would do so if it comes down to that. However, the experience for you as a user would be annoyance. It would also play havoc with the idea that <em>javac</em> isn't <em>just</em> a tool you invoke yourself; often other tools invoke it, and tend not to let you configure where <em>javac</em> lives easily, which makes a fork harder to use. However, in practice, we can enumerate the tools you are likely to run into, especially because <em>javac</em>, while open source, isn't very permissively licensed, and any attempt to use <em>javac</em> as part of a larger tool suffers from the same belligerent lockdown treatment that <em>javac</em> (as an API) exudes: Trying to deeply entwine with it isn't supported, so all you can really do is just call it like a command line tool, really.</p>\n<p>Which makes writing plugins for those tools very simple. We just have to add some <code>--add-opens</code> lines and otherwise run with verbatim <code>javac</code>, or just mix Lombok into its modules and ship that.</p>\n<p>Specifically, we can name 99% of all interactions with <em>javac</em>:</p>\n<ul>\n<li><a href=\"https://en.wikipedia.org/wiki/Apache_Maven\" rel=\"nofollow noreferrer\">Maven</a></li>\n<li><a href=\"https://en.wikipedia.org/wiki/Gradle\" rel=\"nofollow noreferrer\">Gradle</a></li>\n<li>Your IDE (but we already need, and have, plugins for those)</li>\n<li><em>javac</em> itself, but rarely.</li>\n</ul>\n<p>That's, basically, it. The majority of linter tools and other <a href=\"https://en.wikipedia.org/wiki/Abstract_syntax_tree\" rel=\"nofollow noreferrer\">AST</a>-based analysers actually use <em>ecj</em> (Eclipse's compiler) under the hood, not <em>javac</em>. For example, Visual Studio Code uses Eclipse as a language server. Possibly because <em>ecj</em> is significantly faster. Probably because its more permissively licensed (<a href=\"https://en.wikipedia.org/wiki/MIT_License\" rel=\"nofollow noreferrer\">MIT-style</a> instead of <a href=\"https://en.wikipedia.org/wiki/GNU_General_Public_License\" rel=\"nofollow noreferrer\">GPL</a> style).</p>\n<p>Therefore, all Lombok really needs to do if team OpenJDK closes every hole we use right now, is to write plugins for Gradle and Maven. Which isn't a problem: Both of those tools are fundamentally plugin based already, and writing these plugins would be a one-week job.</p>\n<p>UPDATE: As of September 12th, 2023, the maven plugin idea exists and works as designed. It took a day, not a week. We'll make it part of the official way to use lombok in maven in due time.</p>\n<p>Once such plugins exists, OpenJDK hasn't expressed any interest in closing that route down. If they change their mind and try to, they'd have to <em>change the licensing first</em>, which I don't think is likely to happen, but you'll have to decide that for yourself. Of course, if OpenJDK changes its licensing, then [A] its name would then be a joke, and [B] that would have a very significant impact on the ecosystem indeed, Lombok needing to sort out its licensing probably shouldn't rate as anywhere near the top concern if that drastic step ever happens, and [C] surely the community would <strong>immediately</strong> fork the last open source version, find a new name (Oracle owns the 'Java' and 'OpenJDK' trademarks), and the community is somewhat likely to go with that project and leave Oracle/OpenJDK behind entirely at that point. You may rate it differently, but I'd say it's fairly obvious that's not a contingency that's realistic at this point in time.</p>\n<h2>That article about delombok</h2>\n<p>I feel attacked. Boy, it's a horribly written article. The first point they make, which comprises half of the article, is talking about an exotic bug (namely, that <code>@ToString</code> on an enum, which is weird because enums already have a workable <em>tostring</em>, does the wrong thing. Yes, that was a bug) and somehow translating that to some sort of 'see? It's weird and bad'. I don't know about you, but if I approach programming on the basis of: If I run into <strong>a single bug</strong> for a dependency I have, I shall <strong>immediately</strong> ditch that dependency and write a nastygram blogpost about it. I would be soldering my own computer together at this point.</p>\n<blockquote>\n<p>However, the generated files were extremely ugly and not following any styling</p>\n</blockquote>\n<p>Hogwash. We try to copy your tabbing and follow standard coding conventions (more or less, the Google style). We also take pains not to modify anything we don't have to.</p>\n<blockquote>\n<p>That were converted to many lines using if/throw blocks instead of one-line solutions like Guava Preconditions or Validate from Apache Commons.</p>\n</blockquote>\n<p>You can tell Lombok to generate such things; the author didn't read the documentation of the tools they used before deciding to write that blogpost, I guess. We don't default to requiring still more dependencies for no good reason, of course. It's also not 'many lines' at all, and it's extremely structured, so it is very easy to script away if you really don't want them for some reason (but, you added the <code>@NonNull</code> annotations, which do nothing except add those checks, so that's a weird thing to want to do).</p>\n<blockquote>\n<p>(right now Lombok is still facing problems with Java 9-11)</p>\n</blockquote>\n<p>Lies. At least, I'm not aware of any bugs, and the author doesn't say what they are talking about. Given that they prove they haven't bothered to read any documentation or try any settings, it's likely this is another pilot error situation. It was written a few years ago; Lombok runs fine on 9 and 11. (Lombok support for Java 9 took a few weeks after the official release of Java 9. This happens from time to time; however, not sure where 'Java 11' is coming from here).</p>\n<p><em>Generally</em>, delombok should be fine. There where Lombok generates <strong>a lot</strong> of boilerplate for you (primarily, <code>@Builder</code>), the generated code probably isn't quite what you would have written (as in, it's a lot), and might be more to maintain than you signed up for. However, aside from <code>@Builder</code>, the rest is straightforward. Lombok intentionally doesn't like straying into errors that go beyond its mission to replace boilerplate, and that is defined as:</p>\n<ol>\n<li>It is common</li>\n<li>There is a universally agreed upon—or at least fairly standard—way to write it</li>\n</ol>\n<p>And, of course, by that very definition then, what delombok spits out is probably exactly how you would write it if Lombok wasn't around. Builder walks the line the most, but then, it takes care of a <em>ton</em> of boilerplate so we're definitely keeping <code>@Builder</code> around.</p>\n<p>Delomboked code might not quite follow your exact style guidelines. It is quite configurable, but 'preferred style' is a <em>very</em> broad topic. You can (and probably should!) toss your delomboked code through an auto-formatter. That's not an option if you don't normally autoformat your source files and like the freedom of styling it the way you want, but, any additions to delombok's configurations to support more styles would be the kind of PR we would readily accept.</p>\n<h2>How would using another annotation processor cause Lombok to fail?</h2>\n<p>There can be a chicken and egg problem: Annotation processors A runs (not Lombok) and locks in certain decisions based on the source structure they see. <em>Then</em> Lombok runs and adds some stuff, but A's already moved on. We use the rounds system of annotation processors (All APs, not just Lombok, suffer from this, it's why there's a rounds system), but Lombok modifies things that the base <em>Annotation Processor</em> specifications say don't normally change between rounds, so not all APs interact properly. It's hard to tell <em>javac</em> in which order to run them (generally, running Lombok first solves all problems). Whenever this occurs, we try to communicate with the relevant project to ensure we fix any problems, and few APs generate code based on code structure (most generate based on annotations!) One project where this comes up, is MapStruct. We try to work with them to make sure things work out regardless of which one of us 'runs first'.</p>\n<p>If you use another AP that uses source structure as an input, you might run into some trouble, yes. For what it's worth, writing plugins for your build system would likely just solve that entirely (we can force Lombok to run first if we do that).</p>\n"}],"owner":{"account_id":29279414,"reputation":77,"user_id":22432372,"display_name":"paratrooper"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":583,"favorite_count":0,"down_vote_count":4,"up_vote_count":8,"closed_date":1692942785,"accepted_answer_id":76974199,"answer_count":1,"score":4,"last_activity_date":1695168236,"creation_date":1692933963,"question_id":76974085,"body_markdown":"I&#39;ve been using Lombok and am pretty happy with it, enabling my laziness to avoid writing boilerplate code. But there have been some concerning information about Lombok like:\r\n\r\n1. I read [here][1] that Lombok completely relies on a loophole, an &lt;s&gt;illegal&lt;/s&gt; non-public API in the JDK which at some point, if closed, would cause Lombok to stop working. The Lombok developers was even seen arguing with OpenJDK developers to keep the JDK non-public API open or leave an option to enable them to pry it open if it&#39;s closed (`--add-open` and `--illegal-access` flag). But so far, Lombok can even handle [Java&amp;nbsp;19][2] with [v1.18.26][3].\r\n\r\n2.  many said that if for any reason you decide to drop Lombok, then you can just easily use de-lombok. However, there&#39;s [an article][4] describing that de-lombok may not be very nice.\r\n\r\nSo, my question are:\r\n\r\n1. would Lombok ever stop working? Or has Java not closed those loophole non-public APIs?\r\n\r\n2. how would using another annotation processor cause Lombok to fail?\r\n\r\n  [1]: https://github.com/projectlombok/lombok/issues/2681\r\n  [2]: https://en.wikipedia.org/wiki/Java_version_history#Java_19\r\n  [3]: https://projectlombok.org/changelog\r\n  [4]: https://medium.com/@vgonzalo/dont-use-lombok-672418daa819\r\n\r\n\r\n","title":"About project Lombok&#39;s future","body":"<p>I've been using Lombok and am pretty happy with it, enabling my laziness to avoid writing boilerplate code. But there have been some concerning information about Lombok like:</p>\n<ol>\n<li><p>I read <a href=\"https://github.com/projectlombok/lombok/issues/2681\" rel=\"nofollow noreferrer\">here</a> that Lombok completely relies on a loophole, an <s>illegal</s> non-public API in the JDK which at some point, if closed, would cause Lombok to stop working. The Lombok developers was even seen arguing with OpenJDK developers to keep the JDK non-public API open or leave an option to enable them to pry it open if it's closed (<code>--add-open</code> and <code>--illegal-access</code> flag). But so far, Lombok can even handle <a href=\"https://en.wikipedia.org/wiki/Java_version_history#Java_19\" rel=\"nofollow noreferrer\">Java 19</a> with <a href=\"https://projectlombok.org/changelog\" rel=\"nofollow noreferrer\">v1.18.26</a>.</p>\n</li>\n<li><p>many said that if for any reason you decide to drop Lombok, then you can just easily use de-lombok. However, there's <a href=\"https://medium.com/@vgonzalo/dont-use-lombok-672418daa819\" rel=\"nofollow noreferrer\">an article</a> describing that de-lombok may not be very nice.</p>\n</li>\n</ol>\n<p>So, my question are:</p>\n<ol>\n<li><p>would Lombok ever stop working? Or has Java not closed those loophole non-public APIs?</p>\n</li>\n<li><p>how would using another annotation processor cause Lombok to fail?</p>\n</li>\n</ol>\n"},{"tags":["java","generics","wildcard"],"comments":[{"owner":{"account_id":3557625,"reputation":199021,"user_id":2970947,"display_name":"Elliott Frisch"},"score":0,"creation_date":1695167602,"post_id":77138544,"comment_id":135987126,"body_markdown":"Well `Handler` by itself is a raw type. What is the relationship you expect between `Class&lt;? extends BaseAction&gt;` and the raw `Handler`?","body":"Well <code>Handler</code> by itself is a raw type. What is the relationship you expect between <code>Class&lt;? extends BaseAction&gt;</code> and the raw <code>Handler</code>?"}],"owner":{"account_id":3597388,"reputation":1079,"user_id":3714326,"accept_rate":5,"display_name":"user109447"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":28,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"closed_date":1695167863,"answer_count":0,"score":0,"last_activity_date":1695167730,"creation_date":1695167380,"question_id":77138544,"body_markdown":"I am unable to fix following code:\r\n\r\n``` \r\nclass Foo {\r\n        private final Map&lt;Class&lt;? extends BaseAction&gt;, Handler&lt;? extends BaseAction&gt;&gt; map = new HashMap&lt;&gt;();\r\n        {\r\n            map.put(ActionA.class, new HandlerA());\r\n            map.put(ActionB.class, new HandlerB());\r\n        }\r\n\r\n        void executeHandler(BaseAction command) {\r\n            Handler&lt;? extends BaseAction&gt; handler = map.get(command.getClass());\r\n            handler.handle(command); // fails..\r\n        }\r\n\r\n        abstract class BaseAction {}\r\n        class ActionA extends BaseAction {};\r\n        class ActionB extends BaseAction {};\r\n\r\n        abstract class Handler&lt;T extends BaseAction&gt; {\r\n            abstract void handle(T action);\r\n        }\r\n\r\n        class HandlerA extends Handler&lt;ActionA&gt; {\r\n            @Override\r\n            void handle(ActionA action) {}\r\n        }\r\n\r\n        class HandlerB extends Handler&lt;ActionB&gt; {\r\n            @Override\r\n            void handle(ActionB action) {}\r\n        }\r\n    } \r\n```\r\n\r\nThe code does compile when handler map is in form:\r\n\r\n``` private final Map&lt;Class&lt;? extends BaseAction&gt;, Handler&gt; map = new HashMap&lt;&gt;(); ```\r\n\r\nHow to explain why more specific class type for map definition is not working?\r\n","title":"Java generics and wildcard - does not compile","body":"<p>I am unable to fix following code:</p>\n<pre><code>class Foo {\n        private final Map&lt;Class&lt;? extends BaseAction&gt;, Handler&lt;? extends BaseAction&gt;&gt; map = new HashMap&lt;&gt;();\n        {\n            map.put(ActionA.class, new HandlerA());\n            map.put(ActionB.class, new HandlerB());\n        }\n\n        void executeHandler(BaseAction command) {\n            Handler&lt;? extends BaseAction&gt; handler = map.get(command.getClass());\n            handler.handle(command); // fails..\n        }\n\n        abstract class BaseAction {}\n        class ActionA extends BaseAction {};\n        class ActionB extends BaseAction {};\n\n        abstract class Handler&lt;T extends BaseAction&gt; {\n            abstract void handle(T action);\n        }\n\n        class HandlerA extends Handler&lt;ActionA&gt; {\n            @Override\n            void handle(ActionA action) {}\n        }\n\n        class HandlerB extends Handler&lt;ActionB&gt; {\n            @Override\n            void handle(ActionB action) {}\n        }\n    } \n</code></pre>\n<p>The code does compile when handler map is in form:</p>\n<p><code>private final Map&lt;Class&lt;? extends BaseAction&gt;, Handler&gt; map = new HashMap&lt;&gt;();</code></p>\n<p>How to explain why more specific class type for map definition is not working?</p>\n"},{"tags":["java","email","salesforce","apex","salesforce-chatter"],"comments":[{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1695223162,"post_id":77138541,"comment_id":135996433,"body_markdown":"Please edit the question to limit it to a specific problem with enough detail to identify an adequate answer.","body":"Please edit the question to limit it to a specific problem with enough detail to identify an adequate answer."}],"owner":{"account_id":21476278,"reputation":13,"user_id":22571945,"display_name":"Michelle Soto"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":35,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1695167233,"creation_date":1695167233,"question_id":77138541,"body_markdown":"At de moment we are implement a Email Service in a custom object where we want to received and reply emails but, when we create a EmailMessage register in the Apex class, the register in the chatter component from custom object appear like a task. We want that the EmailMessage register appear like in the Case object.\r\n \r\nEmailMessage register in Case object:\r\n[![enter image description here](https://i.stack.imgur.com/NypAs.png)](https://i.stack.imgur.com/NypAs.png)\r\n\r\nEmailMessage register in the custom object:\r\n[![enter image description here](https://i.stack.imgur.com/r1zhk.png)](https://i.stack.imgur.com/r1zhk.png)\r\n\r\nWe want to in the custom object appear the EmailMessage register like in the Case object.\r\n \r\nHow can we solve it?\r\nWhat are the best prectices?","title":"Apex | How i can create EmailMessage register in Chatter component of a custom object?","body":"<p>At de moment we are implement a Email Service in a custom object where we want to received and reply emails but, when we create a EmailMessage register in the Apex class, the register in the chatter component from custom object appear like a task. We want that the EmailMessage register appear like in the Case object.</p>\n<p>EmailMessage register in Case object:\n<a href=\"https://i.stack.imgur.com/NypAs.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/NypAs.png\" alt=\"enter image description here\" /></a></p>\n<p>EmailMessage register in the custom object:\n<a href=\"https://i.stack.imgur.com/r1zhk.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/r1zhk.png\" alt=\"enter image description here\" /></a></p>\n<p>We want to in the custom object appear the EmailMessage register like in the Case object.</p>\n<p>How can we solve it?\nWhat are the best prectices?</p>\n"},{"tags":["java","spring-boot","log4j2"],"answers":[{"tags":[],"owner":{"account_id":1891192,"reputation":8826,"user_id":1709216,"display_name":"rgoers"},"comment_count":0,"down_vote_count":0,"up_vote_count":9,"is_accepted":true,"score":9,"last_activity_date":1592929135,"creation_date":1592929135,"answer_id":62539297,"question_id":62535497,"body_markdown":"This error happens when an application tries to log something, the event is routed to an appender, the appender tries to log something and that event is routed back to the same appender. This could end up in an endless loop that causes a stack overflow exception. Instead, Log4j detects this and prevents it.  The way to avoid this is to add a logger for the event(s) causing the problem and either disable them or route them to a different appender.","title":"Cause ERROR Recursive call to appender. Is there a way to solve it?","body":"<p>This error happens when an application tries to log something, the event is routed to an appender, the appender tries to log something and that event is routed back to the same appender. This could end up in an endless loop that causes a stack overflow exception. Instead, Log4j detects this and prevents it.  The way to avoid this is to add a logger for the event(s) causing the problem and either disable them or route them to a different appender.</p>\n"}],"owner":{"account_id":8317456,"reputation":1353,"user_id":6250244,"display_name":"0gam"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":20667,"favorite_count":0,"down_vote_count":0,"up_vote_count":6,"accepted_answer_id":62539297,"answer_count":1,"score":6,"last_activity_date":1695166678,"creation_date":1592917601,"question_id":62535497,"body_markdown":"    \r\nThe following error message has occurred.\r\n\r\n    ERROR Recursive call to appender file_appender\r\n\r\nLog4j2 - AppenderControl.isRecursiveCall()\r\n\r\n    @PerformanceSensitive\r\n    private boolean isRecursiveCall() {\r\n        if (recursive.get() != null) {\r\n            appenderErrorHandlerMessage(&quot;Recursive call to appender &quot;);\r\n            return true;\r\n        }\r\n        return false;\r\n    }\r\n\r\n\r\nI even found the code above. Is there any way to solve the error that occurs?\r\n\r\nAny help would be greatly appreciated.\r\n\r\n----\r\n**I found some issue.**\r\n\r\nMessage &quot;ERROR Recursive call to appender&quot; needs more diagnostic information. - https://issues.apache.org/jira/browse/LOG4J2-2738\r\n\r\n----\r\n**I solved the problem.**\r\n\r\nlog4j2.xml\r\n\r\n    &lt;Appenders&gt;\r\n        &lt;Routing&gt;    \r\n            &lt;Routes&gt;\r\n                &lt;Route&gt;  \r\n                    &lt;RolingFile ... &gt;\r\n                &lt;/Route&gt;  \r\n            &lt;/Routes&gt;\r\n        &lt;/Routing&gt;\r\n    &lt;/Appenders&gt;\r\n\r\nNormal logging within appenders could create infinite recursion which *Log4j will detect and cause the recursive events to be ignored.*\r\n\r\nhttps://logging.apache.org/log4j/log4j-2.2/manual/configuration.html\r\n\r\n\r\nIf the status attribute is set to error than only error messages will be written to the console. This makes troubleshooting configuration errors possible. As an example, if the configuration above is changed to have the status set to error and the logger declaration is:\r\n\r\n    &lt;logger name=&quot;EventLogger&quot; level=&quot;info&quot; additivity=&quot;false&quot;&gt;\r\n      &lt;AppenderRef ref=&quot;Routng&quot;/&gt;\r\n    &lt;/logger&gt;","title":"Cause ERROR Recursive call to appender. Is there a way to solve it?","body":"<p>The following error message has occurred.</p>\n<pre><code>ERROR Recursive call to appender file_appender\n</code></pre>\n<p>Log4j2 - AppenderControl.isRecursiveCall()</p>\n<pre><code>@PerformanceSensitive\nprivate boolean isRecursiveCall() {\n    if (recursive.get() != null) {\n        appenderErrorHandlerMessage(&quot;Recursive call to appender &quot;);\n        return true;\n    }\n    return false;\n}\n</code></pre>\n<p>I even found the code above. Is there any way to solve the error that occurs?</p>\n<p>Any help would be greatly appreciated.</p>\n<hr />\n<p><strong>I found some issue.</strong></p>\n<p>Message &quot;ERROR Recursive call to appender&quot; needs more diagnostic information. - <a href=\"https://issues.apache.org/jira/browse/LOG4J2-2738\" rel=\"nofollow noreferrer\">https://issues.apache.org/jira/browse/LOG4J2-2738</a></p>\n<hr />\n<p><strong>I solved the problem.</strong></p>\n<p>log4j2.xml</p>\n<pre><code>&lt;Appenders&gt;\n    &lt;Routing&gt;    \n        &lt;Routes&gt;\n            &lt;Route&gt;  \n                &lt;RolingFile ... &gt;\n            &lt;/Route&gt;  \n        &lt;/Routes&gt;\n    &lt;/Routing&gt;\n&lt;/Appenders&gt;\n</code></pre>\n<p>Normal logging within appenders could create infinite recursion which <em>Log4j will detect and cause the recursive events to be ignored.</em></p>\n<p><a href=\"https://logging.apache.org/log4j/log4j-2.2/manual/configuration.html\" rel=\"nofollow noreferrer\">https://logging.apache.org/log4j/log4j-2.2/manual/configuration.html</a></p>\n<p>If the status attribute is set to error than only error messages will be written to the console. This makes troubleshooting configuration errors possible. As an example, if the configuration above is changed to have the status set to error and the logger declaration is:</p>\n<pre><code>&lt;logger name=&quot;EventLogger&quot; level=&quot;info&quot; additivity=&quot;false&quot;&gt;\n  &lt;AppenderRef ref=&quot;Routng&quot;/&gt;\n&lt;/logger&gt;\n</code></pre>\n"},{"tags":["java","spring-boot","java-melody"],"comments":[{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1692949282,"post_id":76974590,"comment_id":135696825,"body_markdown":"Please provide enough code so others can better understand or reproduce the problem.","body":"Please provide enough code so others can better understand or reproduce the problem."}],"answers":[{"comments":[{"owner":{"account_id":41096,"reputation":1723,"user_id":119366,"display_name":"evernat"},"score":0,"creation_date":1695165758,"post_id":76978300,"comment_id":135986925,"body_markdown":"Yes centralized collect server is a possible way, but it is considered optional. To keep it simple it is recommended in general to use the monitoring from the webapp without a centralized collect server.","body":"Yes centralized collect server is a possible way, but it is considered optional. To keep it simple it is recommended in general to use the monitoring from the webapp without a centralized collect server."}],"tags":[],"owner":{"account_id":14686957,"reputation":205,"user_id":10606656,"display_name":"Miguel Suarez Peleteiro"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1692975064,"creation_date":1692975064,"answer_id":76978300,"question_id":76974590,"body_markdown":"Trying to save files within a container is not the way to go if you want to retain your javamelody logs. \r\n\r\nJavamelody has a detailed [guide][1] on how to setup a centralized server for log retention\r\n\r\n\r\n  [1]: https://github.com/javamelody/javamelody/wiki/UserGuideAdvanced#optional-centralization-server-setup","title":"Unable to save java melody logs","body":"<p>Trying to save files within a container is not the way to go if you want to retain your javamelody logs.</p>\n<p>Javamelody has a detailed <a href=\"https://github.com/javamelody/javamelody/wiki/UserGuideAdvanced#optional-centralization-server-setup\" rel=\"nofollow noreferrer\">guide</a> on how to setup a centralized server for log retention</p>\n"},{"tags":[],"owner":{"account_id":41096,"reputation":1723,"user_id":119366,"display_name":"evernat"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695166544,"creation_date":1695166544,"answer_id":77138509,"question_id":76974590,"body_markdown":"You may retain javamelody data between container restarts by persisting it.\r\n\r\nFor example, with a [volume][1] in Docker, I use myself in docker-compose.yml something like :\r\n\r\n```yml\r\nservices:\r\n  mywebapp:\r\n    image: &quot;mywebapp:latest&quot;\r\n    volumes:\r\n      - javamelody_mywebapp:/tmp/javamelody\r\nvolumes:\r\n  javamelody_mywebapp:\r\n```\r\n\r\n  [1]: https://docs.docker.com/storage/volumes/","title":"Unable to save java melody logs","body":"<p>You may retain javamelody data between container restarts by persisting it.</p>\n<p>For example, with a <a href=\"https://docs.docker.com/storage/volumes/\" rel=\"nofollow noreferrer\">volume</a> in Docker, I use myself in docker-compose.yml something like :</p>\n<pre class=\"lang-yaml prettyprint-override\"><code>services:\n  mywebapp:\n    image: &quot;mywebapp:latest&quot;\n    volumes:\n      - javamelody_mywebapp:/tmp/javamelody\nvolumes:\n  javamelody_mywebapp:\n</code></pre>\n"}],"owner":{"account_id":24830297,"reputation":1,"user_id":18709555,"display_name":"Yogesh Kumar Singh"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":45,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1695166544,"creation_date":1692943211,"question_id":76974590,"body_markdown":"Trying to retain(save) java melody logs as they the /temp gets cleared during container restart.  \r\n\r\n1. Have tried relocating the log file location to other location (works fine on local), but on server this doesn&#39;t work.\r\n2. Also  tried moving files to another remote location and try to replace them in temp after container restart, server does not pick them up.","title":"Unable to save java melody logs","body":"<p>Trying to retain(save) java melody logs as they the /temp gets cleared during container restart.</p>\n<ol>\n<li>Have tried relocating the log file location to other location (works fine on local), but on server this doesn't work.</li>\n<li>Also  tried moving files to another remote location and try to replace them in temp after container restart, server does not pick them up.</li>\n</ol>\n"},{"tags":["java","apache-spark","docker-compose","dockerfile","airflow"],"comments":[{"owner":{"account_id":6350395,"reputation":10580,"user_id":4929646,"accept_rate":93,"display_name":"Danila Ganchar"},"score":0,"creation_date":1696001035,"post_id":77138501,"comment_id":136102310,"body_markdown":"could you explain why to use `BashOperator` if you need to run `python` script?","body":"could you explain why to use <code>BashOperator</code> if you need to run <code>python</code> script?"},{"owner":{"account_id":28997998,"reputation":1,"user_id":22212208,"display_name":"Jonathan Feng"},"score":0,"creation_date":1696282782,"post_id":77138501,"comment_id":136130914,"body_markdown":"Because of separation of concern, it&#39;s not a function but rather a pyspark job. I have it stored somewhere else as a .py file.","body":"Because of separation of concern, it&#39;s not a function but rather a pyspark job. I have it stored somewhere else as a .py file."},{"owner":{"account_id":6350395,"reputation":10580,"user_id":4929646,"accept_rate":93,"display_name":"Danila Ganchar"},"score":0,"creation_date":1696282928,"post_id":77138501,"comment_id":136130934,"body_markdown":"don&#39;t understand. could you show `myfile.py`?","body":"don&#39;t understand. could you show <code>myfile.py</code>?"},{"owner":{"account_id":6350395,"reputation":10580,"user_id":4929646,"accept_rate":93,"display_name":"Danila Ganchar"},"score":0,"creation_date":1696282991,"post_id":77138501,"comment_id":136130939,"body_markdown":"by the way could you add `dag` file with `BashOperator`?","body":"by the way could you add <code>dag</code> file with <code>BashOperator</code>?"}],"owner":{"account_id":28997998,"reputation":1,"user_id":22212208,"display_name":"Jonathan Feng"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":39,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1695166342,"creation_date":1695166342,"question_id":77138501,"body_markdown":"I tried to run a Pyspark task through executing `python /myfile.py` via BashOperator on Airflow but received the following error:\r\n```\r\n[2023-09-19, 23:28:26 UTC] {subprocess.py:86} INFO - Output:\r\n[2023-09-19, 23:28:35 UTC] {subprocess.py:93} INFO - /home/***/.local/lib/python3.8/site-packages/pyspark/bin/load-spark-env.sh: line 68: ps: command not found\r\n[2023-09-19, 23:28:35 UTC] {subprocess.py:93} INFO - /home/***/.local/lib/python3.8/site-packages/pyspark/bin/spark-class: line 71: /usr/lib/jvm/java-11-openjdk-amd64/bin/java: No such file or directory\r\n[2023-09-19, 23:28:35 UTC] {subprocess.py:93} INFO - /home/***/.local/lib/python3.8/site-packages/pyspark/bin/spark-class: line 97: CMD: bad array subscript\r\n```\r\n\r\nI think it is because the java environment is not recognized.\r\nI&#39;m using the following Dockerfile extension in addition to the docker-compose.yaml provided by Airflow.\r\n\r\n```\r\nFROM apache/airflow:2.7.1\r\nUSER root\r\nRUN apt-get update \\\r\n  &amp;&amp; apt-get install -y --no-install-recommends \\\r\n         openjdk-11-jre-headless \\\r\n  &amp;&amp; apt-get autoremove -yqq --purge \\\r\n  &amp;&amp; apt-get clean \\\r\n  &amp;&amp; rm -rf /var/lib/apt/lists/*\r\nUSER airflow\r\nENV JAVA_HOME=/usr/lib/jvm/java-11-openjdk-amd64\r\nRUN pip install --no-cache-dir &quot;apache-airflow==${AIRFLOW_VERSION}&quot; apache-airflow-providers-apache-spark==2.1.3\r\nRUN pip install apache-airflow-providers-apache-spark\r\n```\r\n\r\n\r\nI don&#39;t know what the problem is.","title":"Dockerized Airflow couldn&#39;t run Spark jobs","body":"<p>I tried to run a Pyspark task through executing <code>python /myfile.py</code> via BashOperator on Airflow but received the following error:</p>\n<pre><code>[2023-09-19, 23:28:26 UTC] {subprocess.py:86} INFO - Output:\n[2023-09-19, 23:28:35 UTC] {subprocess.py:93} INFO - /home/***/.local/lib/python3.8/site-packages/pyspark/bin/load-spark-env.sh: line 68: ps: command not found\n[2023-09-19, 23:28:35 UTC] {subprocess.py:93} INFO - /home/***/.local/lib/python3.8/site-packages/pyspark/bin/spark-class: line 71: /usr/lib/jvm/java-11-openjdk-amd64/bin/java: No such file or directory\n[2023-09-19, 23:28:35 UTC] {subprocess.py:93} INFO - /home/***/.local/lib/python3.8/site-packages/pyspark/bin/spark-class: line 97: CMD: bad array subscript\n</code></pre>\n<p>I think it is because the java environment is not recognized.\nI'm using the following Dockerfile extension in addition to the docker-compose.yaml provided by Airflow.</p>\n<pre><code>FROM apache/airflow:2.7.1\nUSER root\nRUN apt-get update \\\n  &amp;&amp; apt-get install -y --no-install-recommends \\\n         openjdk-11-jre-headless \\\n  &amp;&amp; apt-get autoremove -yqq --purge \\\n  &amp;&amp; apt-get clean \\\n  &amp;&amp; rm -rf /var/lib/apt/lists/*\nUSER airflow\nENV JAVA_HOME=/usr/lib/jvm/java-11-openjdk-amd64\nRUN pip install --no-cache-dir &quot;apache-airflow==${AIRFLOW_VERSION}&quot; apache-airflow-providers-apache-spark==2.1.3\nRUN pip install apache-airflow-providers-apache-spark\n</code></pre>\n<p>I don't know what the problem is.</p>\n"},{"tags":["java","sorting","generics","optimization"],"comments":[{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1695233121,"post_id":77138464,"comment_id":135998470,"body_markdown":"Please trim your code to make it easier to find your problem. Follow these guidelines to create a [minimal reproducible example](https://stackoverflow.com/help/minimal-reproducible-example).","body":"Please trim your code to make it easier to find your problem. Follow these guidelines to create a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>."}],"owner":{"account_id":29485115,"reputation":1,"user_id":22596003,"display_name":"StellarStarmie"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":19,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1695165583,"creation_date":1695165583,"question_id":77138464,"body_markdown":"I am working on a homework assignment meant to help me understand generic programming. This class, an ordered list class, uses a sequence of generic nodes to have a list in ascending order. My issue is I want to implement a method that functions like the addFrom method, but makes it more efficient. This method takes another ordered list object as a parameter and uses this ordered list in the method too. The addFrom method will identify the correct position and place the node in the correct position. However, I want to have the method traverse through the nodes of both lists exactly once. (As a tangent, I want to say this uses a both while loop and compareTo but not sure how to implement it.) \r\n\r\nBefore I posted this, I went to my professor&#39;s office hours and understood the theory of how you are supposed to iterate through the two lists, where you use the node we&#39;ll call the &quot;head&quot;. The head goes through the elements of the two lists and compares the elements. If the one element is smaller, you add one to the counter associated with that list. This is how you are supposed to maintain order. But I cannot get the head to adapt to this adaptation.\r\n\r\nI have a &quot;working&quot; version of this method that casts an object from the other list that always has the head start at the beginning of the list. This has the head start at the beginning of the list. But this always happens, and I don&#39;t want to do this.\r\n\r\nI considered two approaches to this efficiency, one using a while loop to count how many elements are inserted; this goes on until we are hitting our size using two counters. I quickly threw this out because of because of an exception being thrown with the get method. (I hated doing things this way, but this felt like it made the most sense.) The other approach is just using two for loops (essentially disregarding the size issue) and then doing the comparisons, but both feel totally off the mark of actually making the method efficient. It almost looks like the &quot;working&quot; version. Both versions gave me a custom exception from another class. (Note, I am also considering making a size method that returns the attribute altogether.)\r\n\r\n\r\n```\r\n/**\r\n * Sorts a list of nodes with generic type.\r\n * @author John Doe\r\n * @param &lt;T&gt; user defined type\r\n */\r\n\r\npublic class OrderedList&lt;T extends Comparable&lt;T&gt;&gt; {\r\n  private Node&lt;T&gt; head;\r\n  private int size;\r\n\r\n  /**\r\n   * Initializes a new ordered list object.\r\n   */\r\n  public OrderedList() {\r\n    head = null;\r\n    size = 0;\r\n  }\r\n  \r\n  /**\r\n   * Creates a new node with a given item and inserts it into its correct\r\n   * position in the list so that the list is in ascending order.\r\n   * @param element newly inserted element\r\n   */\r\n  public void insert(T element) {\r\n    Node&lt;T&gt; newNode = new Node&lt;&gt;(element, null);\r\n    if (head == null) {\r\n      head = newNode;\r\n    } else {\r\n      Node&lt;T&gt; current = head;\r\n      Node&lt;T&gt; previous = null;\r\n      while (current != null &amp;&amp; current.data.compareTo(element) &lt; 0) {\r\n        previous = current;\r\n        current = current.next;\r\n      }\r\n      newNode.next = current;\r\n      if (previous == null) {\r\n        head = newNode;\r\n      } else {\r\n        previous.next = newNode;\r\n      }\r\n    }\r\n    size++;\r\n  }\r\n\r\n  /**\r\n   * Returns a copy of the k-th item in the list for a given integer k.\r\n   * @param index the position the user specifies\r\n   * @return The element the user wants to get\r\n   * @throws OutOfBoundException if the index is out of bounds\r\n   */\r\n  public T get(int index) throws OutOfBoundException \r\n  {\r\n    if (index &lt; 0 || index &gt;= size) \r\n    {\r\n      throw new OutOfBoundException(&quot;Index: &quot; + index + &quot; size: &quot; + size);\r\n    }\r\n    Node&lt;T&gt; current = head;\r\n    for (int i = 0; i &lt; index; i++) {\r\n      current = current.next;\r\n    }\r\n    return current.data;\r\n  }\r\n\r\n  /**\r\n   * Removes the first instance of a user-specified item.\r\n   * @param item user specified item\r\n   */\r\n  public void remove(T item) \r\n  {\r\n    Node&lt;T&gt; current = head;\r\n    Node&lt;T&gt; previous = null;\r\n    while (current != null) {\r\n      if (item.equals(current.data)) {\r\n        if (previous == null) {\r\n          head = current.next;\r\n        } else {\r\n          previous.next = current.next;\r\n        }\r\n        size--;\r\n      } else {\r\n        previous = current;\r\n      }\r\n      current = current.next;\r\n    }\r\n  }\r\n  \r\n  /**\r\n   * Returns the last k elements in this ordered list.\r\n   * @param k number of elements to return\r\n   * @return List of the k largest elements\r\n   * @throws OutOfBoundException if the index is out of bounds\r\n   */\r\n  public OrderedList kLargest(int k) throws OutOfBoundException\r\n  {\r\n      if (k &gt;= size || k &lt; 0)\r\n          k = Math.abs(size);\r\n      OrderedList ol = new OrderedList();\r\n      for (int i = size - k; i &lt; size; i++)\r\n      {\r\n          ol.insert(get(i));\r\n      }\r\n      return ol;\r\n  }\r\n  \r\n  /**\r\n   * Temporary, crappy method doing what add(OrderedList list2) should do;\r\n   * it should traverse through the nodes of this list and the other nodes\r\n   * exactly one without having to repeatedly search the location where the\r\n   * items should be added to on the new list.\r\n   * @param list2 another ordered list\r\n   * @return Elements from both ordered list\r\n   * @throws OutOfBoundException if the index is out of bounds\r\n   */\r\n  public OrderedList addFrom(OrderedList list2) throws OutOfBoundException\r\n  {\r\n      OrderedList list3 = new OrderedList();\r\n      for (int i = 0; i &lt; size; i++)\r\n      {\r\n          list3.insert(get(i));\r\n      }\r\n      for (int j = 0; j &lt; list2.size; j++)\r\n      {\r\n          T element = (T) list2.get(j);\r\n          list3.insert(element);\r\n      }\r\n      return list3;\r\n  }\r\n  \r\n  /**\r\n   * Method of implementing proper version of &quot;addFrom&quot; should do with proper\r\n   * efficiency.\r\n   * @param list2 another ordered list\r\n   * @return Elements from both ordered list\r\n   * @throws OutOfBoundException if the index is out of bounds\r\n   */\r\n  public OrderedList add(OrderedList list2) throws OutOfBoundException\r\n  {\r\n    int i = 0;\r\n    int j = 0;\r\n    OrderedList list3 = new OrderedList();\r\n    int k = i + j;\r\n    while (k &lt; this.size + list2.size)\r\n    {\r\n        if(list2.get(i).compareTo(this.get(j)) &lt; 0)\r\n        {\r\n            System.out.println(list2.get(i));\r\n            list3.insert(list2.get(i));\r\n            i++;\r\n        }\r\n        else\r\n        {\r\n            System.out.println(this.get(j));\r\n            list3.insert(this.get(j));\r\n            j++;\r\n        }\r\n    }\r\n      return list3;\r\n  }\r\n\r\n  /**\r\n   * Returns a neatly formatted list with every node.\r\n   * @return A representation of the nodes in the list \r\n   */\r\n  @Override\r\n  public String toString() \r\n  {\r\n    String st = &quot;[&quot;;\r\n    for (Node&lt;T&gt; n = head; n != null; n = n.next)\r\n        st += n.data + ((n.next == null ? &quot;]&quot; : &quot;, &quot;));\r\n    return st;\r\n  }\r\n}\r\n\r\n/**\r\n * Establishes that a node object has data and a next node object.\r\n * @author John Doe\r\n * @param &lt;T&gt; user defined type\r\n */\r\nclass Node&lt;T&gt; {\r\n  T data;       \r\n  Node&lt;T&gt; next;\r\n\r\n  /**\r\n   * Initializes a new node object.\r\n   * @param data specified user input\r\n   * @param next what is the node next to\r\n   */\r\n  public Node(T data, Node&lt;T&gt; next) {\r\n    this.data = data;\r\n    this.next = next;\r\n  }\r\n}\r\n```\r\n\r\n","title":"Generic Sorted List of Nodes Head Traversal Optimization Adding Elements from Two Lists","body":"<p>I am working on a homework assignment meant to help me understand generic programming. This class, an ordered list class, uses a sequence of generic nodes to have a list in ascending order. My issue is I want to implement a method that functions like the addFrom method, but makes it more efficient. This method takes another ordered list object as a parameter and uses this ordered list in the method too. The addFrom method will identify the correct position and place the node in the correct position. However, I want to have the method traverse through the nodes of both lists exactly once. (As a tangent, I want to say this uses a both while loop and compareTo but not sure how to implement it.)</p>\n<p>Before I posted this, I went to my professor's office hours and understood the theory of how you are supposed to iterate through the two lists, where you use the node we'll call the &quot;head&quot;. The head goes through the elements of the two lists and compares the elements. If the one element is smaller, you add one to the counter associated with that list. This is how you are supposed to maintain order. But I cannot get the head to adapt to this adaptation.</p>\n<p>I have a &quot;working&quot; version of this method that casts an object from the other list that always has the head start at the beginning of the list. This has the head start at the beginning of the list. But this always happens, and I don't want to do this.</p>\n<p>I considered two approaches to this efficiency, one using a while loop to count how many elements are inserted; this goes on until we are hitting our size using two counters. I quickly threw this out because of because of an exception being thrown with the get method. (I hated doing things this way, but this felt like it made the most sense.) The other approach is just using two for loops (essentially disregarding the size issue) and then doing the comparisons, but both feel totally off the mark of actually making the method efficient. It almost looks like the &quot;working&quot; version. Both versions gave me a custom exception from another class. (Note, I am also considering making a size method that returns the attribute altogether.)</p>\n<pre><code>/**\n * Sorts a list of nodes with generic type.\n * @author John Doe\n * @param &lt;T&gt; user defined type\n */\n\npublic class OrderedList&lt;T extends Comparable&lt;T&gt;&gt; {\n  private Node&lt;T&gt; head;\n  private int size;\n\n  /**\n   * Initializes a new ordered list object.\n   */\n  public OrderedList() {\n    head = null;\n    size = 0;\n  }\n  \n  /**\n   * Creates a new node with a given item and inserts it into its correct\n   * position in the list so that the list is in ascending order.\n   * @param element newly inserted element\n   */\n  public void insert(T element) {\n    Node&lt;T&gt; newNode = new Node&lt;&gt;(element, null);\n    if (head == null) {\n      head = newNode;\n    } else {\n      Node&lt;T&gt; current = head;\n      Node&lt;T&gt; previous = null;\n      while (current != null &amp;&amp; current.data.compareTo(element) &lt; 0) {\n        previous = current;\n        current = current.next;\n      }\n      newNode.next = current;\n      if (previous == null) {\n        head = newNode;\n      } else {\n        previous.next = newNode;\n      }\n    }\n    size++;\n  }\n\n  /**\n   * Returns a copy of the k-th item in the list for a given integer k.\n   * @param index the position the user specifies\n   * @return The element the user wants to get\n   * @throws OutOfBoundException if the index is out of bounds\n   */\n  public T get(int index) throws OutOfBoundException \n  {\n    if (index &lt; 0 || index &gt;= size) \n    {\n      throw new OutOfBoundException(&quot;Index: &quot; + index + &quot; size: &quot; + size);\n    }\n    Node&lt;T&gt; current = head;\n    for (int i = 0; i &lt; index; i++) {\n      current = current.next;\n    }\n    return current.data;\n  }\n\n  /**\n   * Removes the first instance of a user-specified item.\n   * @param item user specified item\n   */\n  public void remove(T item) \n  {\n    Node&lt;T&gt; current = head;\n    Node&lt;T&gt; previous = null;\n    while (current != null) {\n      if (item.equals(current.data)) {\n        if (previous == null) {\n          head = current.next;\n        } else {\n          previous.next = current.next;\n        }\n        size--;\n      } else {\n        previous = current;\n      }\n      current = current.next;\n    }\n  }\n  \n  /**\n   * Returns the last k elements in this ordered list.\n   * @param k number of elements to return\n   * @return List of the k largest elements\n   * @throws OutOfBoundException if the index is out of bounds\n   */\n  public OrderedList kLargest(int k) throws OutOfBoundException\n  {\n      if (k &gt;= size || k &lt; 0)\n          k = Math.abs(size);\n      OrderedList ol = new OrderedList();\n      for (int i = size - k; i &lt; size; i++)\n      {\n          ol.insert(get(i));\n      }\n      return ol;\n  }\n  \n  /**\n   * Temporary, crappy method doing what add(OrderedList list2) should do;\n   * it should traverse through the nodes of this list and the other nodes\n   * exactly one without having to repeatedly search the location where the\n   * items should be added to on the new list.\n   * @param list2 another ordered list\n   * @return Elements from both ordered list\n   * @throws OutOfBoundException if the index is out of bounds\n   */\n  public OrderedList addFrom(OrderedList list2) throws OutOfBoundException\n  {\n      OrderedList list3 = new OrderedList();\n      for (int i = 0; i &lt; size; i++)\n      {\n          list3.insert(get(i));\n      }\n      for (int j = 0; j &lt; list2.size; j++)\n      {\n          T element = (T) list2.get(j);\n          list3.insert(element);\n      }\n      return list3;\n  }\n  \n  /**\n   * Method of implementing proper version of &quot;addFrom&quot; should do with proper\n   * efficiency.\n   * @param list2 another ordered list\n   * @return Elements from both ordered list\n   * @throws OutOfBoundException if the index is out of bounds\n   */\n  public OrderedList add(OrderedList list2) throws OutOfBoundException\n  {\n    int i = 0;\n    int j = 0;\n    OrderedList list3 = new OrderedList();\n    int k = i + j;\n    while (k &lt; this.size + list2.size)\n    {\n        if(list2.get(i).compareTo(this.get(j)) &lt; 0)\n        {\n            System.out.println(list2.get(i));\n            list3.insert(list2.get(i));\n            i++;\n        }\n        else\n        {\n            System.out.println(this.get(j));\n            list3.insert(this.get(j));\n            j++;\n        }\n    }\n      return list3;\n  }\n\n  /**\n   * Returns a neatly formatted list with every node.\n   * @return A representation of the nodes in the list \n   */\n  @Override\n  public String toString() \n  {\n    String st = &quot;[&quot;;\n    for (Node&lt;T&gt; n = head; n != null; n = n.next)\n        st += n.data + ((n.next == null ? &quot;]&quot; : &quot;, &quot;));\n    return st;\n  }\n}\n\n/**\n * Establishes that a node object has data and a next node object.\n * @author John Doe\n * @param &lt;T&gt; user defined type\n */\nclass Node&lt;T&gt; {\n  T data;       \n  Node&lt;T&gt; next;\n\n  /**\n   * Initializes a new node object.\n   * @param data specified user input\n   * @param next what is the node next to\n   */\n  public Node(T data, Node&lt;T&gt; next) {\n    this.data = data;\n    this.next = next;\n  }\n}\n</code></pre>\n"},{"tags":["java","android","react-native"],"comments":[{"owner":{"account_id":5748147,"reputation":1645,"user_id":4538768,"accept_rate":55,"display_name":"JarochoEngineer"},"score":0,"creation_date":1695226015,"post_id":77138462,"comment_id":135997066,"body_markdown":"This error is thrown because it is expected one of the following types for the element in the list: Array, Bundle, List, String, Integer, Number, Boolean. Otherwise, an error is thrown indicating &quot;Unknown value type {class name}&quot;. The array defined is not any of those types: ArrayList&lt;Student&gt; studentList = new ArrayList&lt;&gt;();","body":"This error is thrown because it is expected one of the following types for the element in the list: Array, Bundle, List, String, Integer, Number, Boolean. Otherwise, an error is thrown indicating &quot;Unknown value type {class name}&quot;. The array defined is not any of those types: ArrayList&lt;Student&gt; studentList = new ArrayList&lt;&gt;();"}],"owner":{"account_id":5748147,"reputation":1645,"user_id":4538768,"accept_rate":55,"display_name":"JarochoEngineer"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":48,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1695165573,"creation_date":1695165573,"question_id":77138462,"body_markdown":"I am trying to pass an object from Android to React Native through using putParceableArrayList. However, I am getting the error:\r\n\r\n    ReactInstanceManager caught exception in setupReactContext\r\n    java.lang.IllegalArgumentException: Unknown value type class com.reactnative.helpers.Student\r\n\r\nMy React activity is the following:\r\n\r\n    public class MyReactActivity extends ReactActivity  implements DefaultHardwareBackBtnHandler {\r\n        private ReactInstanceManager mReactInstanceManager;\r\n        private ReactRootView mReactRootView;\r\n        \r\n        @Override\r\n        protected void onCreate(Bundle savedInstanceState) {\r\n            super.onCreate(savedInstanceState);\r\n    \r\n            mReactRootView = new ReactRootView(this);\r\n            \r\n    \t\tBundle initialProperties = new Bundle();\r\n            ArrayList&lt;Student&gt; studentList = new ArrayList&lt;&gt;();\r\n            \r\n    \t\tstudentList.add(new Student(&quot;John Doe&quot;, &quot;Javascript&quot;));\r\n            studentList.add(new Student(&quot;Jane Doe&quot;, &quot;Typescript&quot;));\r\n    \t\t//studentList.add(gson.toJson(new Student(&quot;John Doe&quot;, &quot;Javascript&quot;)));//Original attempt works but passes JSON string\r\n    \r\n            initialProperties.putSerializable(&quot;studentList&quot;, (Serializable) studentList);// Throws error as well. Below the error\r\n    \t\t//initialProperties.putStringArrayList(&quot;studentList&quot;, studentList);// Original attempt  works but passes JSON string\r\n    \t\t\r\n    \t\tmReactRootView.startReactApplication(mReactInstanceManager, &quot;RNProject&quot;, initialProperties);\r\n    \r\n            setContentView(mReactRootView);\r\n        }\r\n    }\r\n\r\nThe object to be passed from Android to React Native:\r\n\r\nStudent.java:\r\n\r\n    package com.reactnative.helpers;\r\n    import java.io.Serializable;\r\n    \r\n    public class Student implements Serializable {\r\n        private String name;\r\n        private String course;\r\n    \r\n        public Student(){}\r\n    \r\n        @Override\r\n        public String toString(){\r\n            return &quot;{name=&quot;+name+&quot;,course=&quot;+course+&quot;}&quot;;\r\n        }\r\n    \r\n        public Student(String name, String course){\r\n            this.name = name;\r\n            this.course = course;\r\n        }\r\n    }\t\r\n\r\nHowever, when running the application I got the following error when starting the React Native:\r\n\r\n    Unknown value type class com.reactnative.helpers.Student\r\n    java.lang.IllegalArgumentException: Unknown value type class com.reactnative.helpers.Student\r\n    \tat com.facebook.react.bridge.Arguments.fromList(Arguments.java:271)\r\n    \tat com.facebook.react.bridge.Arguments.fromBundle(Arguments.java:314)\r\n    \tat com.facebook.react.ReactInstanceManager.attachRootViewToInstance(ReactInstanceManager.java:1273)\r\n    \tat com.facebook.react.ReactInstanceManager.setupReactContext(ReactInstanceManager.java:1185)\r\n    \tat com.facebook.react.ReactInstanceManager.-$$Nest$msetupReactContext(Unknown Source:0)\r\n    \tat com.facebook.react.ReactInstanceManager$5$2.run(ReactInstanceManager.java:1139)\r\n    \tat android.os.Handler.handleCallback(Handler.java:942)\r\n    \tat android.os.Handler.dispatchMessage(Handler.java:99)\r\n    \tat com.facebook.react.bridge.queue.MessageQueueThreadHandler.dispatchMessage(MessageQueueThreadHandler.java:27)\r\n    \tat android.os.Looper.loopOnce(Looper.java:201)\r\n    \tat android.os.Looper.loop(Looper.java:288)\r\n    \tat com.facebook.react.bridge.queue.MessageQueueThreadImpl$4.run(MessageQueueThreadImpl.java:228)\r\n    \tat java.lang.Thread.run(Thread.java:1012)\r\n\r\n\r\nIf I use `Parceable` in Student Object:\r\n\r\n    package com.reactnative.helpers;\r\n    \r\n    import android.os.Parcel;\r\n    import android.os.Parcelable;\r\n    import androidx.annotation.NonNull;\r\n    \r\n    public class Student implements Parcelable {\r\n        private String name;\r\n        private String course;\r\n    \r\n        public Student(){}\r\n    \r\n        @Override\r\n        public String toString(){\r\n            return &quot;{name=&quot;+name+&quot;,course=&quot;+course+&quot;}&quot;;\r\n        }\r\n    \r\n        public Student(String name, String course){\r\n            this.name = name;\r\n            this.course = course;\r\n        }\r\n        \r\n        \r\n        public int describeContents() {\r\n            return 0;\r\n        }\r\n    \r\n        @Override\r\n        public void writeToParcel(@NonNull Parcel dest, int flags) {\r\n            dest.writeString(name);\r\n            dest.writeString(course);\r\n        }\r\n    \r\n        public static final Parcelable.Creator&lt;Student&gt; CREATOR = new Parcelable.Creator&lt;Student&gt;() {\r\n            public Student createFromParcel(Parcel source) {\r\n                return new Student(source);\r\n            }\r\n            @Override\r\n            public Student[] newArray(int size) {\r\n                return new Student[size];\r\n            }\r\n        };\r\n    \r\n        public Student(Parcel in){\r\n            name= in.readString();\r\n            course = in.readString();\r\n        }\r\n    }\r\n\r\nand replace `Serializable` in MyReactActivity:\r\n\r\n    initialProperties.putParcelableArrayList(&quot;studentList&quot;, studentList);\r\n\r\nI get the following error:\r\n\r\n    java.lang.IllegalArgumentException: Unknown value type class ca.bc.gov.id.servicescard.screens.reactnative.helpers.Student\r\n       \tat com.facebook.react.bridge.Arguments.fromList(Arguments.java:271)\r\n       \tat com.facebook.react.bridge.Arguments.fromBundle(Arguments.java:314)\r\n       \tat com.facebook.react.ReactInstanceManager.attachRootViewToInstance(ReactInstanceManager.java:1273)\r\n       \tat com.facebook.react.ReactInstanceManager.setupReactContext(ReactInstanceManager.java:1185)\r\n       \tat com.facebook.react.ReactInstanceManager.-$$Nest$msetupReactContext(Unknown Source:0)\r\n       \tat com.facebook.react.ReactInstanceManager$5$2.run(ReactInstanceManager.java:1139)\r\n       \tat android.os.Handler.handleCallback(Handler.java:942)\r\n       \tat android.os.Handler.dispatchMessage(Handler.java:99)\r\n       \tat com.facebook.react.bridge.queue.MessageQueueThreadHandler.dispatchMessage(MessageQueueThreadHandler.java:27)\r\n       \tat android.os.Looper.loopOnce(Looper.java:201)\r\n       \tat android.os.Looper.loop(Looper.java:288)\r\n       \tat com.facebook.react.bridge.queue.MessageQueueThreadImpl$4.run(MessageQueueThreadImpl.java:228)\r\n       \tat java.lang.Thread.run(Thread.java:1012)\r\n    E  FATAL EXCEPTION: mqt_native_modules\r\n       Process: ca.bc.gov.id.servicescard.dev, PID: 13543\r\n       java.lang.IllegalArgumentException: Unknown value type class ca.bc.gov.id.servicescard.screens.reactnative.helpers.Student\r\n       \tat com.facebook.react.bridge.Arguments.fromList(Arguments.java:271)\r\n       \tat com.facebook.react.bridge.Arguments.fromBundle(Arguments.java:314)\r\n       \tat com.facebook.react.ReactInstanceManager.attachRootViewToInstance(ReactInstanceManager.java:1273)\r\n       \tat com.facebook.react.ReactInstanceManager.setupReactContext(ReactInstanceManager.java:1185)\r\n       \tat com.facebook.react.ReactInstanceManager.-$$Nest$msetupReactContext(Unknown Source:0)\r\n       \tat com.facebook.react.ReactInstanceManager$5$2.run(ReactInstanceManager.java:1139)\r\n       \tat android.os.Handler.handleCallback(Handler.java:942)\r\n       \tat android.os.Handler.dispatchMessage(Handler.java:99)\r\n       \tat com.facebook.react.bridge.queue.MessageQueueThreadHandler.dispatchMessage(MessageQueueThreadHandler.java:27)\r\n       \tat android.os.Looper.loopOnce(Looper.java:201)\r\n       \tat android.os.Looper.loop(Looper.java:288)\r\n       \tat com.facebook.react.bridge.queue.MessageQueueThreadImpl$4.run(MessageQueueThreadImpl.java:228)\r\n       \tat java.lang.Thread.run(Thread.java:1012)\r\n\r\nDo you know why this error about unknown value type class? \r\n\r\n\r\nThanks a lot for your help :)","title":"ReactInstanceManager caught exception in setupReactContext","body":"<p>I am trying to pass an object from Android to React Native through using putParceableArrayList. However, I am getting the error:</p>\n<pre><code>ReactInstanceManager caught exception in setupReactContext\njava.lang.IllegalArgumentException: Unknown value type class com.reactnative.helpers.Student\n</code></pre>\n<p>My React activity is the following:</p>\n<pre><code>public class MyReactActivity extends ReactActivity  implements DefaultHardwareBackBtnHandler {\n    private ReactInstanceManager mReactInstanceManager;\n    private ReactRootView mReactRootView;\n    \n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n\n        mReactRootView = new ReactRootView(this);\n        \n        Bundle initialProperties = new Bundle();\n        ArrayList&lt;Student&gt; studentList = new ArrayList&lt;&gt;();\n        \n        studentList.add(new Student(&quot;John Doe&quot;, &quot;Javascript&quot;));\n        studentList.add(new Student(&quot;Jane Doe&quot;, &quot;Typescript&quot;));\n        //studentList.add(gson.toJson(new Student(&quot;John Doe&quot;, &quot;Javascript&quot;)));//Original attempt works but passes JSON string\n\n        initialProperties.putSerializable(&quot;studentList&quot;, (Serializable) studentList);// Throws error as well. Below the error\n        //initialProperties.putStringArrayList(&quot;studentList&quot;, studentList);// Original attempt  works but passes JSON string\n        \n        mReactRootView.startReactApplication(mReactInstanceManager, &quot;RNProject&quot;, initialProperties);\n\n        setContentView(mReactRootView);\n    }\n}\n</code></pre>\n<p>The object to be passed from Android to React Native:</p>\n<p>Student.java:</p>\n<pre><code>package com.reactnative.helpers;\nimport java.io.Serializable;\n\npublic class Student implements Serializable {\n    private String name;\n    private String course;\n\n    public Student(){}\n\n    @Override\n    public String toString(){\n        return &quot;{name=&quot;+name+&quot;,course=&quot;+course+&quot;}&quot;;\n    }\n\n    public Student(String name, String course){\n        this.name = name;\n        this.course = course;\n    }\n}   \n</code></pre>\n<p>However, when running the application I got the following error when starting the React Native:</p>\n<pre><code>Unknown value type class com.reactnative.helpers.Student\njava.lang.IllegalArgumentException: Unknown value type class com.reactnative.helpers.Student\n    at com.facebook.react.bridge.Arguments.fromList(Arguments.java:271)\n    at com.facebook.react.bridge.Arguments.fromBundle(Arguments.java:314)\n    at com.facebook.react.ReactInstanceManager.attachRootViewToInstance(ReactInstanceManager.java:1273)\n    at com.facebook.react.ReactInstanceManager.setupReactContext(ReactInstanceManager.java:1185)\n    at com.facebook.react.ReactInstanceManager.-$$Nest$msetupReactContext(Unknown Source:0)\n    at com.facebook.react.ReactInstanceManager$5$2.run(ReactInstanceManager.java:1139)\n    at android.os.Handler.handleCallback(Handler.java:942)\n    at android.os.Handler.dispatchMessage(Handler.java:99)\n    at com.facebook.react.bridge.queue.MessageQueueThreadHandler.dispatchMessage(MessageQueueThreadHandler.java:27)\n    at android.os.Looper.loopOnce(Looper.java:201)\n    at android.os.Looper.loop(Looper.java:288)\n    at com.facebook.react.bridge.queue.MessageQueueThreadImpl$4.run(MessageQueueThreadImpl.java:228)\n    at java.lang.Thread.run(Thread.java:1012)\n</code></pre>\n<p>If I use <code>Parceable</code> in Student Object:</p>\n<pre><code>package com.reactnative.helpers;\n\nimport android.os.Parcel;\nimport android.os.Parcelable;\nimport androidx.annotation.NonNull;\n\npublic class Student implements Parcelable {\n    private String name;\n    private String course;\n\n    public Student(){}\n\n    @Override\n    public String toString(){\n        return &quot;{name=&quot;+name+&quot;,course=&quot;+course+&quot;}&quot;;\n    }\n\n    public Student(String name, String course){\n        this.name = name;\n        this.course = course;\n    }\n    \n    \n    public int describeContents() {\n        return 0;\n    }\n\n    @Override\n    public void writeToParcel(@NonNull Parcel dest, int flags) {\n        dest.writeString(name);\n        dest.writeString(course);\n    }\n\n    public static final Parcelable.Creator&lt;Student&gt; CREATOR = new Parcelable.Creator&lt;Student&gt;() {\n        public Student createFromParcel(Parcel source) {\n            return new Student(source);\n        }\n        @Override\n        public Student[] newArray(int size) {\n            return new Student[size];\n        }\n    };\n\n    public Student(Parcel in){\n        name= in.readString();\n        course = in.readString();\n    }\n}\n</code></pre>\n<p>and replace <code>Serializable</code> in MyReactActivity:</p>\n<pre><code>initialProperties.putParcelableArrayList(&quot;studentList&quot;, studentList);\n</code></pre>\n<p>I get the following error:</p>\n<pre><code>java.lang.IllegalArgumentException: Unknown value type class ca.bc.gov.id.servicescard.screens.reactnative.helpers.Student\n    at com.facebook.react.bridge.Arguments.fromList(Arguments.java:271)\n    at com.facebook.react.bridge.Arguments.fromBundle(Arguments.java:314)\n    at com.facebook.react.ReactInstanceManager.attachRootViewToInstance(ReactInstanceManager.java:1273)\n    at com.facebook.react.ReactInstanceManager.setupReactContext(ReactInstanceManager.java:1185)\n    at com.facebook.react.ReactInstanceManager.-$$Nest$msetupReactContext(Unknown Source:0)\n    at com.facebook.react.ReactInstanceManager$5$2.run(ReactInstanceManager.java:1139)\n    at android.os.Handler.handleCallback(Handler.java:942)\n    at android.os.Handler.dispatchMessage(Handler.java:99)\n    at com.facebook.react.bridge.queue.MessageQueueThreadHandler.dispatchMessage(MessageQueueThreadHandler.java:27)\n    at android.os.Looper.loopOnce(Looper.java:201)\n    at android.os.Looper.loop(Looper.java:288)\n    at com.facebook.react.bridge.queue.MessageQueueThreadImpl$4.run(MessageQueueThreadImpl.java:228)\n    at java.lang.Thread.run(Thread.java:1012)\nE  FATAL EXCEPTION: mqt_native_modules\n   Process: ca.bc.gov.id.servicescard.dev, PID: 13543\n   java.lang.IllegalArgumentException: Unknown value type class ca.bc.gov.id.servicescard.screens.reactnative.helpers.Student\n    at com.facebook.react.bridge.Arguments.fromList(Arguments.java:271)\n    at com.facebook.react.bridge.Arguments.fromBundle(Arguments.java:314)\n    at com.facebook.react.ReactInstanceManager.attachRootViewToInstance(ReactInstanceManager.java:1273)\n    at com.facebook.react.ReactInstanceManager.setupReactContext(ReactInstanceManager.java:1185)\n    at com.facebook.react.ReactInstanceManager.-$$Nest$msetupReactContext(Unknown Source:0)\n    at com.facebook.react.ReactInstanceManager$5$2.run(ReactInstanceManager.java:1139)\n    at android.os.Handler.handleCallback(Handler.java:942)\n    at android.os.Handler.dispatchMessage(Handler.java:99)\n    at com.facebook.react.bridge.queue.MessageQueueThreadHandler.dispatchMessage(MessageQueueThreadHandler.java:27)\n    at android.os.Looper.loopOnce(Looper.java:201)\n    at android.os.Looper.loop(Looper.java:288)\n    at com.facebook.react.bridge.queue.MessageQueueThreadImpl$4.run(MessageQueueThreadImpl.java:228)\n    at java.lang.Thread.run(Thread.java:1012)\n</code></pre>\n<p>Do you know why this error about unknown value type class?</p>\n<p>Thanks a lot for your help :)</p>\n"},{"tags":["java","spring-boot","spring-mvc","spring-security","spring-data-jpa"],"answers":[{"tags":[],"owner":{"account_id":21477997,"reputation":51,"user_id":15825902,"display_name":"Djorkaeff"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1695165484,"creation_date":1695165484,"answer_id":77138458,"question_id":77137923,"body_markdown":"I found the solution, it was something simple I had to add `@Autowired` to **AuthenticationFailureHandler** and also to **AuthenticationSuccessHandler** and now it accomplishes the task.\r\n\r\n    @Component\r\n    public class AuthenticationFailureHandler extends SimpleUrlAuthenticationFailureHandler  {\r\n    \t\r\n    \t@Autowired\r\n    \tprivate SessionService service;\r\n    \t\r\n    \t@Override\r\n    \tpublic void onAuthenticationFailure(HttpServletRequest request, HttpServletResponse response,\r\n    \t\t\tAuthenticationException exception) throws IOException, ServletException {\r\n    \t\tSystem.out.println(&quot;A user has falied to login. Error: &quot; + exception.getMessage());\r\n    \t\t\r\n    \t\tString ipAddress = request.getRemoteAddr();\r\n    \t\t\r\n    \t\tservice.errorSession(ipAddress);\r\n    \t\t\r\n    \t\tsuper.setDefaultFailureUrl(&quot;/login?error&quot;);\r\n    \t\tsuper.onAuthenticationFailure(request, response, exception);\r\n    \t\t\r\n    \t}\r\n    \r\n    }","title":"Spring Boot - Security/JPA - Insert to the database when getting a response from the handler","body":"<p>I found the solution, it was something simple I had to add <code>@Autowired</code> to <strong>AuthenticationFailureHandler</strong> and also to <strong>AuthenticationSuccessHandler</strong> and now it accomplishes the task.</p>\n<pre><code>@Component\npublic class AuthenticationFailureHandler extends SimpleUrlAuthenticationFailureHandler  {\n    \n    @Autowired\n    private SessionService service;\n    \n    @Override\n    public void onAuthenticationFailure(HttpServletRequest request, HttpServletResponse response,\n            AuthenticationException exception) throws IOException, ServletException {\n        System.out.println(&quot;A user has falied to login. Error: &quot; + exception.getMessage());\n        \n        String ipAddress = request.getRemoteAddr();\n        \n        service.errorSession(ipAddress);\n        \n        super.setDefaultFailureUrl(&quot;/login?error&quot;);\n        super.onAuthenticationFailure(request, response, exception);\n        \n    }\n\n}\n</code></pre>\n"}],"owner":{"account_id":21477997,"reputation":51,"user_id":15825902,"display_name":"Djorkaeff"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":41,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":77138458,"answer_count":1,"score":0,"last_activity_date":1695165484,"creation_date":1695156763,"question_id":77137923,"body_markdown":"I want to insert a successful or failed login to the database depending on whether the user entered their credentials correctly or not.\r\n\r\nIf the user enters their credentials incorrectly, the **failureHandler** should call the service and insert the failed login record into the database with the IP Address of the user trying to log in, the session type, and the date, but when testing my code it shows me the following error:\r\n\r\n    java.lang.NullPointerException: Cannot invoke &quot;com.user.service.SessionService.errorSession(String)&quot; because &quot;this.service&quot; is null\r\n\tat cpggsp.sopp.config.AuthenticationFailureHandler.onAuthenticationFailure(AuthenticationFailureHandler.java:26) ~[classes/:na]\r\n\tat org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.unsuccessfulAuthentication(AbstractAuthenticationProcessingFilter.java:354) ~[spring-security-web-6.0.2.jar:6.0.2]\r\n\tat org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:249) ~[spring-security-web-6.0.2.jar:6.0.2]\r\n\tat org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:221) ~[spring-security-web-6.0.2.jar:6.0.2]\r\n\tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.0.2.jar:6.0.2]\r\n\tat org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107) ~[spring-security-web-6.0.2.jar:6.0.2]\r\n\tat org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93) ~[spring-security-web-6.0.2.jar:6.0.2]\r\n\tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.0.2.jar:6.0.2]\r\n\tat org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90) ~[spring-security-web-6.0.2.jar:6.0.2]\r\n\tat org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75) ~[spring-security-web-6.0.2.jar:6.0.2]\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.6.jar:6.0.6]\r\n\tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.0.2.jar:6.0.2]\r\n\tat org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82) ~[spring-security-web-6.0.2.jar:6.0.2]\r\n\tat org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69) ~[spring-security-web-6.0.2.jar:6.0.2]\r\n\tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.0.2.jar:6.0.2]\r\n\tat org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62) ~[spring-security-web-6.0.2.jar:6.0.2]\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.6.jar:6.0.6]\r\n\tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.0.2.jar:6.0.2]\r\n\tat org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42) ~[spring-security-web-6.0.2.jar:6.0.2]\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.6.jar:6.0.6]\r\n\tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.0.2.jar:6.0.2]\r\n\tat org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233) ~[spring-security-web-6.0.2.jar:6.0.2]\r\n\tat org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191) ~[spring-security-web-6.0.2.jar:6.0.2]\r\n\tat org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:352) ~[spring-web-6.0.6.jar:6.0.6]\r\n\tat org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:268) ~[spring-web-6.0.6.jar:6.0.6]\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185) ~[tomcat-embed-core-10.1.5.jar:10.1.5]\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158) ~[tomcat-embed-core-10.1.5.jar:10.1.5]\r\n\tat org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-6.0.6.jar:6.0.6]\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.6.jar:6.0.6]\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185) ~[tomcat-embed-core-10.1.5.jar:10.1.5]\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158) ~[tomcat-embed-core-10.1.5.jar:10.1.5]\r\n\tat org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-6.0.6.jar:6.0.6]\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.6.jar:6.0.6]\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185) ~[tomcat-embed-core-10.1.5.jar:10.1.5]\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158) ~[tomcat-embed-core-10.1.5.jar:10.1.5]\r\n\tat org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-6.0.6.jar:6.0.6]\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.6.jar:6.0.6]\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185) ~[tomcat-embed-core-10.1.5.jar:10.1.5]\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158) ~[tomcat-embed-core-10.1.5.jar:10.1.5]\r\n\tat org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:177) ~[tomcat-embed-core-10.1.5.jar:10.1.5]\r\n\tat org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97) ~[tomcat-embed-core-10.1.5.jar:10.1.5]\r\n\tat org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:542) ~[tomcat-embed-core-10.1.5.jar:10.1.5]\r\n\tat org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:119) ~[tomcat-embed-core-10.1.5.jar:10.1.5]\r\n\tat org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92) ~[tomcat-embed-core-10.1.5.jar:10.1.5]\r\n\tat org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78) ~[tomcat-embed-core-10.1.5.jar:10.1.5]\r\n\tat org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:357) ~[tomcat-embed-core-10.1.5.jar:10.1.5]\r\n\tat org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:400) ~[tomcat-embed-core-10.1.5.jar:10.1.5]\r\n\tat org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65) ~[tomcat-embed-core-10.1.5.jar:10.1.5]\r\n\tat org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:859) ~[tomcat-embed-core-10.1.5.jar:10.1.5]\r\n\tat org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1734) ~[tomcat-embed-core-10.1.5.jar:10.1.5]\r\n\tat org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52) ~[tomcat-embed-core-10.1.5.jar:10.1.5]\r\n\tat org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191) ~[tomcat-embed-core-10.1.5.jar:10.1.5]\r\n\tat org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659) ~[tomcat-embed-core-10.1.5.jar:10.1.5]\r\n\tat org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61) ~[tomcat-embed-core-10.1.5.jar:10.1.5]\r\n\tat java.base/java.lang.Thread.run(Thread.java:1589) ~[na:na]\r\n\r\nThe same process has to do with the **successHandler**, but I get the same error.\r\n\r\nHere my code\r\n\r\n**WebSecurityConfiguration:**\r\n\r\n    @Bean\r\n    SecurityFilterChain filterChain(HttpSecurity httpSecurity) throws Exception {\r\n        httpSecurity\r\n        \t\t.csrf().disable()\r\n                .authorizeHttpRequests().requestMatchers(\r\n                &quot;/login**&quot;).permitAll()\r\n                .anyRequest().authenticated()\r\n                .and()\r\n                .formLogin()\r\n                .loginPage(&quot;/login&quot;)\r\n                .successHandler(authenticationSuccessHandler)\r\n                .failureHandler(authenticationFailureHandler)\r\n                .permitAll()\r\n                .and()\r\n                .logout()\r\n                .invalidateHttpSession(true)\r\n                .clearAuthentication(true)\r\n                .logoutRequestMatcher(new AntPathRequestMatcher(&quot;/logout&quot;))\r\n                .permitAll();\r\n\r\n        return httpSecurity.build();\r\n    }\r\n    \r\n    @Autowired\r\n    private AuthenticationSuccessHandler authenticationSuccessHandler;\r\n    \r\n    @Autowired\r\n    private AuthenticationFailureHandler authenticationFailureHandler;\r\n\r\n**AuthenticationFailureHandler:**\r\n\r\n    @Component\r\n    public class AuthenticationFailureHandler extends SimpleUrlAuthenticationFailureHandler  {\r\n    \t\r\n    \tprivate SessionService service;\r\n    \t\r\n    \t@Override\r\n    \tpublic void onAuthenticationFailure(HttpServletRequest request, HttpServletResponse response,\r\n    \t\t\tAuthenticationException exception) throws IOException, ServletException {\r\n    \t\tSystem.out.println(&quot;A user has falied to login. Error: &quot; + exception.getMessage());\r\n    \t\t\r\n    \t\tString ipAddress = request.getRemoteAddr();\r\n    \r\n    \t\tservice.errorSession(ipAddress);\r\n    \t\t\r\n    \t\tsuper.setDefaultFailureUrl(&quot;/login?error&quot;);\r\n    \t\tsuper.onAuthenticationFailure(request, response, exception);\r\n    \t\t\r\n    \t}\r\n    \r\n    }\r\n\r\n**AuthenticationSuccessHandler:**\r\n\r\n    @Component\r\n    public class AuthenticationSuccessHandler extends SimpleUrlAuthenticationSuccessHandler {\r\n    \t\r\n    \tprivate SessionService service;\r\n    \t\r\n    \t@Override\r\n    \tpublic void onAuthenticationSuccess(HttpServletRequest request, HttpServletResponse response,\r\n    \t\t\tAuthentication authentication) throws IOException, ServletException {\r\n    \t\tSystem.out.println(&quot;The user &quot; + authentication.getName() + &quot; is logged in successfully&quot;);\r\n    \t\t\r\n    \t\tString ipAddress = request.getRemoteAddr();\r\n    \r\n    \t\tservice.loginSession(ipAddress);\r\n    \t\t\r\n    \t\tsuper.setDefaultTargetUrl(&quot;/home&quot;);\r\n    \t\tsuper.onAuthenticationSuccess(request, response, authentication);\r\n    \t\t\r\n    \t}\r\n    \r\n    }\r\n\r\n**Entity:**\r\n\r\n    @Entity\r\n    @Table(name = &quot;sessions&quot;)\r\n    public class Session {\r\n    \r\n    \t@Id\r\n    \t@GeneratedValue(strategy = GenerationType.IDENTITY)\r\n    \t@Column(name = &quot;id_session&quot;)\r\n    \tprivate Long idSession;\r\n    \t\r\n    \t@Column(name = &quot;ip_address&quot;, nullable = false)\r\n    \tprivate String ipAddress;\r\n    \t\r\n    \t@Column(name = &quot;session&quot;, nullable = false)\r\n    \tprivate String Session;\r\n    \t\r\n    \t@Column(name = &quot;date_session&quot;, nullable = false)\r\n    \tprivate String  dateSession;\r\n    \r\n    \tpublic Session() {\r\n    \t}\r\n    \r\n        //Getters and Setters\r\n    }\r\n\r\n**SessionRepository:**\r\n\r\n    public interface SessionRepositorio extends JpaRepository&lt;Session, Long&gt; {\r\n    \t\r\n    \t@Query(nativeQuery= true, value=&quot;INSERT INTO sessions(ip_address, session, date_session) &quot;\r\n    \t\t\t+ &quot;VALUES(:ipAddress, &#39;Log In Success&#39;, NOW())&quot;)\r\n    \tpublic void loginSession(String ipAddress);\r\n    \t\r\n    \t@Query(nativeQuery= true, value=&quot;INSERT INTO sessions(ip_address, session, date_session) &quot;\r\n    \t\t\t+ &quot;VALUES(:ipAddress, &#39;Log In Failed&#39;, NOW())&quot;)\r\n    \tpublic void errorSession(String ipAddress);\r\n    \t\r\n    }\r\n\r\n**SessionService:**\r\n\r\n    @Service\r\n    public class SessionService {\r\n    \r\n    \t@Autowired\r\n    \tprivate SessionRepositorio sessionRepository;\r\n    \t\r\n    \tpublic void loginSession(String ipAddress) {\r\n    \t\tsessionRepository.loginSession(ipAddress);\r\n    \t}\r\n    \t\r\n    \tpublic void errorSession(String ipAddress) {\r\n    \t\tsessionRepository.errorSession(ipAddress);\r\n    \t}\r\n    \r\n    }\r\n\r\nThe IDE does not show me an error in my code, it only shows me that error when I run the project and log in by entering the credentials incorrectly or successfully, in addition to not registering any new records in the database.\r\n\r\nAny suggestions or solutions?","title":"Spring Boot - Security/JPA - Insert to the database when getting a response from the handler","body":"<p>I want to insert a successful or failed login to the database depending on whether the user entered their credentials correctly or not.</p>\n<p>If the user enters their credentials incorrectly, the <strong>failureHandler</strong> should call the service and insert the failed login record into the database with the IP Address of the user trying to log in, the session type, and the date, but when testing my code it shows me the following error:</p>\n<pre><code>java.lang.NullPointerException: Cannot invoke &quot;com.user.service.SessionService.errorSession(String)&quot; because &quot;this.service&quot; is null\nat cpggsp.sopp.config.AuthenticationFailureHandler.onAuthenticationFailure(AuthenticationFailureHandler.java:26) ~[classes/:na]\nat org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.unsuccessfulAuthentication(AbstractAuthenticationProcessingFilter.java:354) ~[spring-security-web-6.0.2.jar:6.0.2]\nat org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:249) ~[spring-security-web-6.0.2.jar:6.0.2]\nat org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:221) ~[spring-security-web-6.0.2.jar:6.0.2]\nat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.0.2.jar:6.0.2]\nat org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107) ~[spring-security-web-6.0.2.jar:6.0.2]\nat org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93) ~[spring-security-web-6.0.2.jar:6.0.2]\nat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.0.2.jar:6.0.2]\nat org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90) ~[spring-security-web-6.0.2.jar:6.0.2]\nat org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75) ~[spring-security-web-6.0.2.jar:6.0.2]\nat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.6.jar:6.0.6]\nat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.0.2.jar:6.0.2]\nat org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82) ~[spring-security-web-6.0.2.jar:6.0.2]\nat org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69) ~[spring-security-web-6.0.2.jar:6.0.2]\nat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.0.2.jar:6.0.2]\nat org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62) ~[spring-security-web-6.0.2.jar:6.0.2]\nat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.6.jar:6.0.6]\nat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.0.2.jar:6.0.2]\nat org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42) ~[spring-security-web-6.0.2.jar:6.0.2]\nat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.6.jar:6.0.6]\nat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.0.2.jar:6.0.2]\nat org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233) ~[spring-security-web-6.0.2.jar:6.0.2]\nat org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191) ~[spring-security-web-6.0.2.jar:6.0.2]\nat org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:352) ~[spring-web-6.0.6.jar:6.0.6]\nat org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:268) ~[spring-web-6.0.6.jar:6.0.6]\nat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185) ~[tomcat-embed-core-10.1.5.jar:10.1.5]\nat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158) ~[tomcat-embed-core-10.1.5.jar:10.1.5]\nat org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-6.0.6.jar:6.0.6]\nat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.6.jar:6.0.6]\nat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185) ~[tomcat-embed-core-10.1.5.jar:10.1.5]\nat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158) ~[tomcat-embed-core-10.1.5.jar:10.1.5]\nat org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-6.0.6.jar:6.0.6]\nat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.6.jar:6.0.6]\nat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185) ~[tomcat-embed-core-10.1.5.jar:10.1.5]\nat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158) ~[tomcat-embed-core-10.1.5.jar:10.1.5]\nat org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-6.0.6.jar:6.0.6]\nat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.6.jar:6.0.6]\nat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185) ~[tomcat-embed-core-10.1.5.jar:10.1.5]\nat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158) ~[tomcat-embed-core-10.1.5.jar:10.1.5]\nat org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:177) ~[tomcat-embed-core-10.1.5.jar:10.1.5]\nat org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97) ~[tomcat-embed-core-10.1.5.jar:10.1.5]\nat org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:542) ~[tomcat-embed-core-10.1.5.jar:10.1.5]\nat org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:119) ~[tomcat-embed-core-10.1.5.jar:10.1.5]\nat org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92) ~[tomcat-embed-core-10.1.5.jar:10.1.5]\nat org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78) ~[tomcat-embed-core-10.1.5.jar:10.1.5]\nat org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:357) ~[tomcat-embed-core-10.1.5.jar:10.1.5]\nat org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:400) ~[tomcat-embed-core-10.1.5.jar:10.1.5]\nat org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65) ~[tomcat-embed-core-10.1.5.jar:10.1.5]\nat org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:859) ~[tomcat-embed-core-10.1.5.jar:10.1.5]\nat org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1734) ~[tomcat-embed-core-10.1.5.jar:10.1.5]\nat org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52) ~[tomcat-embed-core-10.1.5.jar:10.1.5]\nat org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191) ~[tomcat-embed-core-10.1.5.jar:10.1.5]\nat org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659) ~[tomcat-embed-core-10.1.5.jar:10.1.5]\nat org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61) ~[tomcat-embed-core-10.1.5.jar:10.1.5]\nat java.base/java.lang.Thread.run(Thread.java:1589) ~[na:na]\n</code></pre>\n<p>The same process has to do with the <strong>successHandler</strong>, but I get the same error.</p>\n<p>Here my code</p>\n<p><strong>WebSecurityConfiguration:</strong></p>\n<pre><code>@Bean\nSecurityFilterChain filterChain(HttpSecurity httpSecurity) throws Exception {\n    httpSecurity\n            .csrf().disable()\n            .authorizeHttpRequests().requestMatchers(\n            &quot;/login**&quot;).permitAll()\n            .anyRequest().authenticated()\n            .and()\n            .formLogin()\n            .loginPage(&quot;/login&quot;)\n            .successHandler(authenticationSuccessHandler)\n            .failureHandler(authenticationFailureHandler)\n            .permitAll()\n            .and()\n            .logout()\n            .invalidateHttpSession(true)\n            .clearAuthentication(true)\n            .logoutRequestMatcher(new AntPathRequestMatcher(&quot;/logout&quot;))\n            .permitAll();\n\n    return httpSecurity.build();\n}\n\n@Autowired\nprivate AuthenticationSuccessHandler authenticationSuccessHandler;\n\n@Autowired\nprivate AuthenticationFailureHandler authenticationFailureHandler;\n</code></pre>\n<p><strong>AuthenticationFailureHandler:</strong></p>\n<pre><code>@Component\npublic class AuthenticationFailureHandler extends SimpleUrlAuthenticationFailureHandler  {\n    \n    private SessionService service;\n    \n    @Override\n    public void onAuthenticationFailure(HttpServletRequest request, HttpServletResponse response,\n            AuthenticationException exception) throws IOException, ServletException {\n        System.out.println(&quot;A user has falied to login. Error: &quot; + exception.getMessage());\n        \n        String ipAddress = request.getRemoteAddr();\n\n        service.errorSession(ipAddress);\n        \n        super.setDefaultFailureUrl(&quot;/login?error&quot;);\n        super.onAuthenticationFailure(request, response, exception);\n        \n    }\n\n}\n</code></pre>\n<p><strong>AuthenticationSuccessHandler:</strong></p>\n<pre><code>@Component\npublic class AuthenticationSuccessHandler extends SimpleUrlAuthenticationSuccessHandler {\n    \n    private SessionService service;\n    \n    @Override\n    public void onAuthenticationSuccess(HttpServletRequest request, HttpServletResponse response,\n            Authentication authentication) throws IOException, ServletException {\n        System.out.println(&quot;The user &quot; + authentication.getName() + &quot; is logged in successfully&quot;);\n        \n        String ipAddress = request.getRemoteAddr();\n\n        service.loginSession(ipAddress);\n        \n        super.setDefaultTargetUrl(&quot;/home&quot;);\n        super.onAuthenticationSuccess(request, response, authentication);\n        \n    }\n\n}\n</code></pre>\n<p><strong>Entity:</strong></p>\n<pre><code>@Entity\n@Table(name = &quot;sessions&quot;)\npublic class Session {\n\n    @Id\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\n    @Column(name = &quot;id_session&quot;)\n    private Long idSession;\n    \n    @Column(name = &quot;ip_address&quot;, nullable = false)\n    private String ipAddress;\n    \n    @Column(name = &quot;session&quot;, nullable = false)\n    private String Session;\n    \n    @Column(name = &quot;date_session&quot;, nullable = false)\n    private String  dateSession;\n\n    public Session() {\n    }\n\n    //Getters and Setters\n}\n</code></pre>\n<p><strong>SessionRepository:</strong></p>\n<pre><code>public interface SessionRepositorio extends JpaRepository&lt;Session, Long&gt; {\n    \n    @Query(nativeQuery= true, value=&quot;INSERT INTO sessions(ip_address, session, date_session) &quot;\n            + &quot;VALUES(:ipAddress, 'Log In Success', NOW())&quot;)\n    public void loginSession(String ipAddress);\n    \n    @Query(nativeQuery= true, value=&quot;INSERT INTO sessions(ip_address, session, date_session) &quot;\n            + &quot;VALUES(:ipAddress, 'Log In Failed', NOW())&quot;)\n    public void errorSession(String ipAddress);\n    \n}\n</code></pre>\n<p><strong>SessionService:</strong></p>\n<pre><code>@Service\npublic class SessionService {\n\n    @Autowired\n    private SessionRepositorio sessionRepository;\n    \n    public void loginSession(String ipAddress) {\n        sessionRepository.loginSession(ipAddress);\n    }\n    \n    public void errorSession(String ipAddress) {\n        sessionRepository.errorSession(ipAddress);\n    }\n\n}\n</code></pre>\n<p>The IDE does not show me an error in my code, it only shows me that error when I run the project and log in by entering the credentials incorrectly or successfully, in addition to not registering any new records in the database.</p>\n<p>Any suggestions or solutions?</p>\n"},{"tags":["java","spring","scheduled-tasks"],"comments":[{"owner":{"account_id":1667596,"reputation":1052,"user_id":1534698,"accept_rate":86,"display_name":"Jan"},"score":0,"creation_date":1644915354,"post_id":25017691,"comment_id":125725018,"body_markdown":"It&#39;s now not `context.getBean(&quot;scheduler&quot;)` anymore, but `context.getBean(&quot;taskScheduler&quot;)`, at least in Spring Boot 2.6.3.","body":"It&#39;s now not <code>context.getBean(&quot;scheduler&quot;)</code> anymore, but <code>context.getBean(&quot;taskScheduler&quot;)</code>, at least in Spring Boot 2.6.3."},{"owner":{"account_id":2534457,"reputation":1847,"user_id":2201958,"accept_rate":77,"display_name":"achingfingers"},"score":0,"creation_date":1646835454,"post_id":25017691,"comment_id":126222079,"body_markdown":"@Jan That depends: If you are using spring-boot you already might have an autoconfigured bean that of course comes with its preconfigured bean name (id). The example above explicitly declares a scheduler bean with the &quot;scheduler&quot; id...","body":"@Jan That depends: If you are using spring-boot you already might have an autoconfigured bean that of course comes with its preconfigured bean name (id). The example above explicitly declares a scheduler bean with the &quot;scheduler&quot; id..."}],"answers":[{"tags":[],"owner":{"account_id":195331,"reputation":275428,"user_id":438154,"accept_rate":98,"display_name":"Sotirios Delimanolis"},"comment_count":0,"down_vote_count":0,"up_vote_count":5,"is_accepted":true,"score":5,"last_activity_date":1406644954,"creation_date":1406644954,"answer_id":25018161,"question_id":25017691,"body_markdown":"There is no public API in Spring to do this.\r\n\r\nRelated:\r\n\r\n- https://stackoverflow.com/questions/21791853/how-are-spring-taskscheduled-objects-represented-at-runtime","title":"Accessing scheduled tasks in Spring","body":"<p>There is no public API in Spring to do this.</p>\n\n<p>Related:</p>\n\n<ul>\n<li><a href=\"https://stackoverflow.com/questions/21791853/how-are-spring-taskscheduled-objects-represented-at-runtime\">How are Spring &lt;task:scheduled&gt; objects represented at runtime?</a></li>\n</ul>\n"},{"tags":[],"owner":{"account_id":7334553,"reputation":51,"user_id":5586398,"display_name":"Randy Poznan"},"comment_count":0,"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1448032696,"creation_date":1448032696,"answer_id":33830156,"question_id":25017691,"body_markdown":"I just figured this out \r\n\r\nstart with this to get whats scheduled.\r\n\r\n\t\tThreadPoolTaskScheduler xScheduler = (ThreadPoolTaskScheduler)this.taskScheduler;\r\n\r\n        ScheduledThreadPoolExecutor xService = (ScheduledThreadPoolExecutor)xScheduler.getScheduledExecutor();\r\n        \r\n        BlockingQueue&lt;Runnable&gt; queue = xService.getQueue();\r\n\t\tObject[] scheduledJobs = queue.toArray();\r\n\r\nIf this array look at instance in debugger to find what you need out. \r\n\r\nThen write reflection code like this to get at the hidden API&#39;s in Spring and Java. See the set Accessible this is only way to get at these private items. You might need to use different public classes to get at certain private fields, look at api docs and view source on these classes in eclipse. \r\n\r\n\t\t\t\tMethod delayM = obj.getClass().getDeclaredMethod(&quot;getDelay&quot;, TimeUnit.class);\r\n\t\t\t\tdelayM.setAccessible(true);\r\n\t\t\t\t// delayM = obj.getClass().getDeclaredMethod(&quot;getDelay&quot;, TimeUnit.class);\r\n\t\t\t    Long delay = (Long)delayM.invoke(obj, new Object[] { tu } );\r\n\r\nThe trigger and root runnable is in the callable field of this object , instance of ReschedulingRunnable which is not a public class, ask Spring why they did this. You can get the delegate out of DelegatingErrorHandlingRunnable with reflection. ","title":"Accessing scheduled tasks in Spring","body":"<p>I just figured this out </p>\n\n<p>start with this to get whats scheduled.</p>\n\n<pre><code>    ThreadPoolTaskScheduler xScheduler = (ThreadPoolTaskScheduler)this.taskScheduler;\n\n    ScheduledThreadPoolExecutor xService = (ScheduledThreadPoolExecutor)xScheduler.getScheduledExecutor();\n\n    BlockingQueue&lt;Runnable&gt; queue = xService.getQueue();\n    Object[] scheduledJobs = queue.toArray();\n</code></pre>\n\n<p>If this array look at instance in debugger to find what you need out. </p>\n\n<p>Then write reflection code like this to get at the hidden API's in Spring and Java. See the set Accessible this is only way to get at these private items. You might need to use different public classes to get at certain private fields, look at api docs and view source on these classes in eclipse. </p>\n\n<pre><code>            Method delayM = obj.getClass().getDeclaredMethod(\"getDelay\", TimeUnit.class);\n            delayM.setAccessible(true);\n            // delayM = obj.getClass().getDeclaredMethod(\"getDelay\", TimeUnit.class);\n            Long delay = (Long)delayM.invoke(obj, new Object[] { tu } );\n</code></pre>\n\n<p>The trigger and root runnable is in the callable field of this object , instance of ReschedulingRunnable which is not a public class, ask Spring why they did this. You can get the delegate out of DelegatingErrorHandlingRunnable with reflection. </p>\n"},{"tags":[],"owner":{"account_id":1667596,"reputation":1052,"user_id":1534698,"accept_rate":86,"display_name":"Jan"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1646822184,"creation_date":1646822184,"answer_id":71407966,"question_id":25017691,"body_markdown":"@Randy Poznan&#39;s answer is already pretty good, but it uses unecessary reflections and the `delayM.setAccessible(true)` may cause problems with Java 17 and it&#39;s stricter access rules (runtime exceptions!).\r\n\r\nA solution without reflections is this:\r\n\r\n    // Bean is named &quot;taskScheduler&quot; now\r\n    ThreadPoolTaskScheduler taskScheduler = (ThreadPoolTaskScheduler) context.getBean(&quot;taskScheduler&quot;);\r\n    ScheduledThreadPoolExecutor scheduledExecutor =\r\n        (ScheduledThreadPoolExecutor) taskScheduler.getScheduledExecutor();\r\n\r\n    BlockingQueue&lt;Runnable&gt; queue = scheduledExecutor.getQueue();\r\n    if (queue.isEmpty()) {\r\n        return null;\r\n    } else {\r\n        for (Runnable runnable : queue) {\r\n            // This is it: Casting to `ScheduledFuture`.\r\n            var scheduledFuture = (ScheduledFuture) runnable;\r\n            final long delay = scheduledFuture.getDelay(TimeUnit.MINUTES);\r\n\r\n            System.out.println(&quot;Delay: &quot; + delay + &quot; on runnable: &quot; + runnable);\r\n        }\r\n    }","title":"Accessing scheduled tasks in Spring","body":"<p>@Randy Poznan's answer is already pretty good, but it uses unecessary reflections and the <code>delayM.setAccessible(true)</code> may cause problems with Java 17 and it's stricter access rules (runtime exceptions!).</p>\n<p>A solution without reflections is this:</p>\n<pre><code>// Bean is named &quot;taskScheduler&quot; now\nThreadPoolTaskScheduler taskScheduler = (ThreadPoolTaskScheduler) context.getBean(&quot;taskScheduler&quot;);\nScheduledThreadPoolExecutor scheduledExecutor =\n    (ScheduledThreadPoolExecutor) taskScheduler.getScheduledExecutor();\n\nBlockingQueue&lt;Runnable&gt; queue = scheduledExecutor.getQueue();\nif (queue.isEmpty()) {\n    return null;\n} else {\n    for (Runnable runnable : queue) {\n        // This is it: Casting to `ScheduledFuture`.\n        var scheduledFuture = (ScheduledFuture) runnable;\n        final long delay = scheduledFuture.getDelay(TimeUnit.MINUTES);\n\n        System.out.println(&quot;Delay: &quot; + delay + &quot; on runnable: &quot; + runnable);\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":15064163,"reputation":13516,"user_id":10871900,"display_name":"dan1st is crying"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695165217,"creation_date":1695114675,"answer_id":77133196,"question_id":25017691,"body_markdown":"If you are using Spring Boot actuator in your project, there will be an endpoint ([`/actuator/scheduledtasks`](https://docs.spring.io/spring-boot/docs/current/actuator-api/htmlsingle/#scheduled-tasks)) doing this.\r\n\r\nYou can also use the code responsible for that endpoint in order to access it. If you take a look at the [source code](https://github.com/spring-projects/spring-boot/blob/main/spring-boot-project/spring-boot-actuator/src/main/java/org/springframework/boot/actuate/scheduling/ScheduledTasksEndpoint.java) and see that the classes are `public` so you can use them if you have a dependency on spring-boot-actuator (with the `compile`-scope):\r\n```java\r\nprivate final ScheduledTasksEndpoint endpoint;//TODO autowire\r\n```\r\n```java\r\nScheduledTasksDescriptor scheduledTasks = endpoint.scheduledTasks();\r\nfor(TaskDescriptor taskDescriptor : scheduledTasks.getCron()){//iterate through all cron tasks here\r\n\tRunnableDescriptor rDescriptor = taskDescriptor.getRunnable();\r\n\tString target = rDescriptor.getTarget();\r\n\tif(taskDescriptor instanceof CronTaskDescriptor desc) {\r\n\t\tString expression = desc.getExpression();\r\n\t}\r\n}\r\n```\r\n\r\nHowever, that won&#39;t allow you to actually run the tasks, just to get information about them. But since you are only interested in meta-information, this should be fine.","title":"Accessing scheduled tasks in Spring","body":"<p>If you are using Spring Boot actuator in your project, there will be an endpoint (<a href=\"https://docs.spring.io/spring-boot/docs/current/actuator-api/htmlsingle/#scheduled-tasks\" rel=\"nofollow noreferrer\"><code>/actuator/scheduledtasks</code></a>) doing this.</p>\n<p>You can also use the code responsible for that endpoint in order to access it. If you take a look at the <a href=\"https://github.com/spring-projects/spring-boot/blob/main/spring-boot-project/spring-boot-actuator/src/main/java/org/springframework/boot/actuate/scheduling/ScheduledTasksEndpoint.java\" rel=\"nofollow noreferrer\">source code</a> and see that the classes are <code>public</code> so you can use them if you have a dependency on spring-boot-actuator (with the <code>compile</code>-scope):</p>\n<pre class=\"lang-java prettyprint-override\"><code>private final ScheduledTasksEndpoint endpoint;//TODO autowire\n</code></pre>\n<pre class=\"lang-java prettyprint-override\"><code>ScheduledTasksDescriptor scheduledTasks = endpoint.scheduledTasks();\nfor(TaskDescriptor taskDescriptor : scheduledTasks.getCron()){//iterate through all cron tasks here\n    RunnableDescriptor rDescriptor = taskDescriptor.getRunnable();\n    String target = rDescriptor.getTarget();\n    if(taskDescriptor instanceof CronTaskDescriptor desc) {\n        String expression = desc.getExpression();\n    }\n}\n</code></pre>\n<p>However, that won't allow you to actually run the tasks, just to get information about them. But since you are only interested in meta-information, this should be fine.</p>\n"}],"owner":{"account_id":2534457,"reputation":1847,"user_id":2201958,"accept_rate":77,"display_name":"achingfingers"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":19274,"favorite_count":0,"down_vote_count":0,"up_vote_count":18,"accepted_answer_id":25018161,"answer_count":4,"score":18,"last_activity_date":1695165217,"creation_date":1406643617,"question_id":25017691,"body_markdown":"I have a couple of tasks scheduled within **Spring&#39;s task scheduler**:\r\n\r\n\t&lt;task:scheduled-tasks&gt;\r\n\t\t&lt;task:scheduled ref=&quot;task1&quot; method=&quot;run&quot;\r\n\t\t\tcron=&quot;0 0 */0 * * *&quot; /&gt;\r\n\t\t&lt;task:scheduled ref=&quot;task2&quot; method=&quot;run&quot;\r\n\t\t\tcron=&quot;0 0 */30 * * *&quot; /&gt;\r\n\t&lt;/task:scheduled-tasks&gt;\r\n\r\n\t&lt;task:scheduler id=&quot;scheduler&quot; pool-size=&quot;10&quot; /&gt;\r\n\r\nHow can I access a **list of scheduled tasks** and retrieve **meta-information** (e.g the next execution time) from within the application context?\r\n\r\n    ClassPathXmlApplicationContext context = new ClassPathXmlApplicationContext(&quot;context.xml&quot;);\r\n    ThreadPoolTaskScheduler scheduler = (ThreadPoolTaskScheduler)context.getBean(&quot;scheduler&quot;);\r\n    //... how to continue from here?\r\n","title":"Accessing scheduled tasks in Spring","body":"<p>I have a couple of tasks scheduled within <strong>Spring's task scheduler</strong>:</p>\n\n<pre><code>&lt;task:scheduled-tasks&gt;\n    &lt;task:scheduled ref=\"task1\" method=\"run\"\n        cron=\"0 0 */0 * * *\" /&gt;\n    &lt;task:scheduled ref=\"task2\" method=\"run\"\n        cron=\"0 0 */30 * * *\" /&gt;\n&lt;/task:scheduled-tasks&gt;\n\n&lt;task:scheduler id=\"scheduler\" pool-size=\"10\" /&gt;\n</code></pre>\n\n<p>How can I access a <strong>list of scheduled tasks</strong> and retrieve <strong>meta-information</strong> (e.g the next execution time) from within the application context?</p>\n\n<pre><code>ClassPathXmlApplicationContext context = new ClassPathXmlApplicationContext(\"context.xml\");\nThreadPoolTaskScheduler scheduler = (ThreadPoolTaskScheduler)context.getBean(\"scheduler\");\n//... how to continue from here?\n</code></pre>\n"},{"tags":["java","maven","junit5","spring-boot-maven-plugin","openjdk-12"],"comments":[{"owner":{"account_id":3116234,"reputation":9296,"user_id":2636929,"display_name":"Stultuske"},"score":0,"creation_date":1567415201,"post_id":57754113,"comment_id":101944945,"body_markdown":"this means you are trying to run code on a JVM that&#39;s older than the one used compiling the code. For instance: you write Java 8 code, compile it with a Java 8 JDK and then continue to try and run it on a Java 6 JVM. (with you it are different versions, but you get the drift, I hope)","body":"this means you are trying to run code on a JVM that&#39;s older than the one used compiling the code. For instance: you write Java 8 code, compile it with a Java 8 JDK and then continue to try and run it on a Java 6 JVM. (with you it are different versions, but you get the drift, I hope)"},{"owner":{"account_id":10496592,"reputation":3058,"user_id":7736617,"display_name":"Arnaud Claudel"},"score":0,"creation_date":1567415684,"post_id":57754113,"comment_id":101945159,"body_markdown":"Have you looked at this similar [question] (https://stackoverflow.com/questions/55303837/problem-running-tests-with-enabled-preview-features-in-surefire-and-failsafe)","body":"Have you looked at this similar [question] (<a href=\"https://stackoverflow.com/questions/55303837/problem-running-tests-with-enabled-preview-features-in-surefire-and-failsafe\" title=\"problem running tests with enabled preview features in surefire and failsafe\">stackoverflow.com/questions/55303837/&hellip;</a>)"},{"owner":{"account_id":21994,"reputation":73808,"user_id":53897,"accept_rate":56,"display_name":"Thorbj&#248;rn Ravn Andersen"},"score":1,"creation_date":1567421148,"post_id":57754113,"comment_id":101947518,"body_markdown":"Do you understand what the message &quot; Unsupported class file major version 56&quot; means?","body":"Do you understand what the message &quot; Unsupported class file major version 56&quot; means?"},{"owner":{"account_id":12194063,"reputation":57,"user_id":8900386,"display_name":"Dinesh"},"score":0,"creation_date":1567428072,"post_id":57754113,"comment_id":101950638,"body_markdown":"i have built the application in intellij with jdk 12 and it was successful.After adding the junit 5 i am facing this issue. Unsupported class file major version 56 refers to jdk 12 .","body":"i have built the application in intellij with jdk 12 and it was successful.After adding the junit 5 i am facing this issue. Unsupported class file major version 56 refers to jdk 12 ."},{"owner":{"account_id":12194063,"reputation":57,"user_id":8900386,"display_name":"Dinesh"},"score":0,"creation_date":1567428107,"post_id":57754113,"comment_id":101950656,"body_markdown":"i can run the test cases too successfully.It fails in maven build","body":"i can run the test cases too successfully.It fails in maven build"},{"owner":{"account_id":12194063,"reputation":57,"user_id":8900386,"display_name":"Dinesh"},"score":0,"creation_date":1567428946,"post_id":57754113,"comment_id":101951036,"body_markdown":"@Arnaud - i have tried adding that --enable-preview maven options but i am still facing this.May be i need to check more on that.","body":"@Arnaud - i have tried adding that --enable-preview maven options but i am still facing this.May be i need to check more on that."},{"owner":{"account_id":12194063,"reputation":57,"user_id":8900386,"display_name":"Dinesh"},"score":0,"creation_date":1567429689,"post_id":57754113,"comment_id":101951350,"body_markdown":"I have degraded the compiler version :         &lt;maven.compiler.source&gt;11&lt;/maven.compiler.source&gt;\n&lt;maven.compiler.target&gt;11&lt;/maven.compiler.target&gt;  now it works. it doesn&#39;t work with 12","body":"I have degraded the compiler version :         &lt;maven.compiler.source&gt;11&lt;/maven.compiler.source&gt; &lt;maven.compiler.target&gt;11&lt;/maven.compiler.target&gt;  now it works. it doesn&#39;t work with 12"},{"owner":{"account_id":261142,"reputation":47118,"user_id":545127,"accept_rate":69,"display_name":"Raedwald"},"score":0,"creation_date":1567511503,"post_id":57754113,"comment_id":101977308,"body_markdown":"See https://stackoverflow.com/questions/9170832/list-of-java-class-file-format-major-version-numbers","body":"See <a href=\"https://stackoverflow.com/questions/9170832/list-of-java-class-file-format-major-version-numbers\" title=\"list of java class file format major version numbers\">stackoverflow.com/questions/9170832/&hellip;</a>"}],"answers":[{"comments":[{"owner":{"account_id":12194063,"reputation":57,"user_id":8900386,"display_name":"Dinesh"},"score":0,"creation_date":1567435388,"post_id":57758161,"comment_id":101953879,"body_markdown":"maybe.I just wanted to know ,is there any config required in maven to fix the issue with 12","body":"maybe.I just wanted to know ,is there any config required in maven to fix the issue with 12"},{"owner":{"account_id":21994,"reputation":73808,"user_id":53897,"accept_rate":56,"display_name":"Thorbj&#248;rn Ravn Andersen"},"score":0,"creation_date":1567503300,"post_id":57758161,"comment_id":101972946,"body_markdown":"Are you absolutely certain that Java 12 is used by Maven?  What is the output of `mvn -v`?","body":"Are you absolutely certain that Java 12 is used by Maven?  What is the output of <code>mvn -v</code>?"},{"owner":{"account_id":12194063,"reputation":57,"user_id":8900386,"display_name":"Dinesh"},"score":0,"creation_date":1567510370,"post_id":57758161,"comment_id":101976730,"body_markdown":"Java version: 12.0.2, vendor: Oracle Corporation\nJava home: C:\\Program Files\\Java\\jdk-12.0.2\nDefault locale: en_US, platform encoding: Cp1252\nOS name: &quot;windows 10&quot;, version: &quot;10.0&quot;, arch: &quot;amd64&quot;, family: &quot;windows&quot;","body":"Java version: 12.0.2, vendor: Oracle Corporation Java home: C:\\Program Files\\Java\\jdk-12.0.2 Default locale: en_US, platform encoding: Cp1252 OS name: &quot;windows 10&quot;, version: &quot;10.0&quot;, arch: &quot;amd64&quot;, family: &quot;windows&quot;"}],"tags":[],"owner":{"account_id":21994,"reputation":73808,"user_id":53897,"accept_rate":56,"display_name":"Thorbj&#248;rn Ravn Andersen"},"comment_count":3,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1567503255,"creation_date":1567432364,"answer_id":57758161,"question_id":57754113,"body_markdown":"The JVM being executed here in the Maven build is not the one you think it is.  You need Java 12 to execute your compiled code, and it appears that for some reason Maven uses Java 11.\r\n","title":"Maven surefire plugin 2.22.2 build fails for Junit 5 test cases with errror Unsupported class file major version 56 in spring boot","body":"<p>The JVM being executed here in the Maven build is not the one you think it is.  You need Java 12 to execute your compiled code, and it appears that for some reason Maven uses Java 11.</p>\n"},{"comments":[{"owner":{"account_id":12194063,"reputation":57,"user_id":8900386,"display_name":"Dinesh"},"score":1,"creation_date":1568213266,"post_id":57889738,"comment_id":102204808,"body_markdown":"Oracle configuration was added for Toolchains configuration to build with maven jlink plugin.","body":"Oracle configuration was added for Toolchains configuration to build with maven jlink plugin."}],"tags":[],"owner":{"account_id":5225762,"reputation":172,"user_id":7669414,"display_name":"Ahmed"},"comment_count":1,"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1695163919,"creation_date":1568206643,"answer_id":57889738,"question_id":57754113,"body_markdown":"From the error log you can see that the sub-modules are using maven-surefire-plugin 2.22.2\r\nThe solution for this is defining the version of Maven plugins to be used by all modules adding this section to the main pom.xml:\r\n```\r\n&lt;build&gt;\r\n\t&lt;pluginManagement&gt;\r\n\t\t&lt;plugins&gt;\r\n\t\t\t&lt;plugin&gt;\r\n\t\t\t\t&lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n\t\t\t\t&lt;artifactId&gt;maven-surefire-plugin&lt;/artifactId&gt;\r\n\t\t\t\t&lt;version&gt;3.1.2&lt;/version&gt;\r\n\t\t\t&lt;/plugin&gt;\r\n\t\t\t&lt;plugin&gt;\r\n\t\t\t\t&lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n\t\t\t\t&lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\r\n\t\t\t\t&lt;version&gt;3.8.0&lt;/version&gt;\r\n\t\t\t\t&lt;configuration&gt;\r\n\t\t\t\t\t&lt;release&gt;12&lt;/release&gt;\r\n\t\t\t\t&lt;/configuration&gt;\r\n\t\t\t&lt;/plugin&gt;\r\n\t\t&lt;/plugins&gt;\r\n\t&lt;/pluginManagement&gt;\r\n&lt;/build&gt;\r\n```\r\nI could compile it after removing the Oracle dependency, I don&#39;t know if you will need to do that. If it works for you please comment in the issue.","title":"Maven surefire plugin 2.22.2 build fails for Junit 5 test cases with errror Unsupported class file major version 56 in spring boot","body":"<p>From the error log you can see that the sub-modules are using maven-surefire-plugin 2.22.2\nThe solution for this is defining the version of Maven plugins to be used by all modules adding this section to the main pom.xml:</p>\n<pre><code>&lt;build&gt;\n    &lt;pluginManagement&gt;\n        &lt;plugins&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n                &lt;artifactId&gt;maven-surefire-plugin&lt;/artifactId&gt;\n                &lt;version&gt;3.1.2&lt;/version&gt;\n            &lt;/plugin&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n                &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\n                &lt;version&gt;3.8.0&lt;/version&gt;\n                &lt;configuration&gt;\n                    &lt;release&gt;12&lt;/release&gt;\n                &lt;/configuration&gt;\n            &lt;/plugin&gt;\n        &lt;/plugins&gt;\n    &lt;/pluginManagement&gt;\n&lt;/build&gt;\n</code></pre>\n<p>I could compile it after removing the Oracle dependency, I don't know if you will need to do that. If it works for you please comment in the issue.</p>\n"},{"tags":[],"owner":{"account_id":2414576,"reputation":827,"user_id":2108919,"accept_rate":100,"display_name":"omilke"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1587707741,"creation_date":1587707741,"answer_id":61402049,"question_id":57754113,"body_markdown":"This is caused by an old version of `asm` that the maven-surefire-plugin dependes on.\r\n\r\nif you run your maven build using `mvn test-X` you should see that a version 6.x of asm is used for the plugin.\r\n\r\nThat older version is not capable of using reflection on newer byte code, indepdendent of the executing runtime, which is what actually causes that problem.\r\n\r\ntry this, which worked for me:\r\n\r\n           &lt;plugin&gt;\r\n                &lt;artifactId&gt;maven-surefire-plugin&lt;/artifactId&gt;\r\n                &lt;version&gt;2.22.2&lt;/version&gt;\r\n                &lt;dependencies&gt;\r\n                    &lt;dependency&gt;\r\n                        &lt;groupId&gt;org.ow2.asm&lt;/groupId&gt;\r\n                        &lt;artifactId&gt;asm&lt;/artifactId&gt;\r\n                        &lt;version&gt;7.3.1&lt;/version&gt;\r\n                    &lt;/dependency&gt;\r\n                &lt;/dependencies&gt;\r\n            &lt;/plugin&gt;\r\n\r\nyou may need to add that to your parent-pom&#39;s dependency-management configuration in order to make sure it is applied to all sub-projects properly.","title":"Maven surefire plugin 2.22.2 build fails for Junit 5 test cases with errror Unsupported class file major version 56 in spring boot","body":"<p>This is caused by an old version of <code>asm</code> that the maven-surefire-plugin dependes on.</p>\n\n<p>if you run your maven build using <code>mvn test-X</code> you should see that a version 6.x of asm is used for the plugin.</p>\n\n<p>That older version is not capable of using reflection on newer byte code, indepdendent of the executing runtime, which is what actually causes that problem.</p>\n\n<p>try this, which worked for me:</p>\n\n<pre><code>       &lt;plugin&gt;\n            &lt;artifactId&gt;maven-surefire-plugin&lt;/artifactId&gt;\n            &lt;version&gt;2.22.2&lt;/version&gt;\n            &lt;dependencies&gt;\n                &lt;dependency&gt;\n                    &lt;groupId&gt;org.ow2.asm&lt;/groupId&gt;\n                    &lt;artifactId&gt;asm&lt;/artifactId&gt;\n                    &lt;version&gt;7.3.1&lt;/version&gt;\n                &lt;/dependency&gt;\n            &lt;/dependencies&gt;\n        &lt;/plugin&gt;\n</code></pre>\n\n<p>you may need to add that to your parent-pom's dependency-management configuration in order to make sure it is applied to all sub-projects properly.</p>\n"}],"owner":{"account_id":12194063,"reputation":57,"user_id":8900386,"display_name":"Dinesh"},"comment_count":8,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":7012,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":57889738,"answer_count":3,"score":1,"last_activity_date":1695163919,"creation_date":1567414818,"question_id":57754113,"body_markdown":"Junit 5 test cases for a Spring boot application 2.1.7.RELEASE fails build with below error in intelij.\r\n\r\n[ERROR] Failed to execute goal org.apache.maven.plugins:maven-surefire-plugin:2.22.2:test (default-test) on project domain: Execution default-test of goal org.apache.maven.plugins:maven-surefire-plugin:2.22.2:test failed: Unsupported class file major version 56 -&gt; [Help 1]\r\n\r\nusing java 9 modularization\r\n\r\nApplication builds in maven and works without test cases.\r\n\r\n\r\nused maven surefire plugin version 2.22.1\r\nfails in command line and intellij\r\n\r\n            &lt;plugin&gt;\r\n                &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n                &lt;artifactId&gt;maven-surefire-plugin&lt;/artifactId&gt;\r\n                &lt;configuration&gt;\r\n                    &lt;useSystemClassLoader&gt;false&lt;/useSystemClassLoader&gt;\r\n                &lt;/configuration&gt;\r\n            &lt;/plugin&gt;\r\n\r\n\r\n\r\n            &lt;plugin&gt;\r\n                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n                &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\r\n                &lt;configuration&gt;\r\n                    &lt;jvmArguments&gt;--add-modules=java.xml.ws.annotation&lt;/jvmArguments&gt;\r\n                &lt;/configuration&gt;\r\n            &lt;/plugin&gt;","title":"Maven surefire plugin 2.22.2 build fails for Junit 5 test cases with errror Unsupported class file major version 56 in spring boot","body":"<p>Junit 5 test cases for a Spring boot application 2.1.7.RELEASE fails build with below error in intelij.</p>\n\n<p>[ERROR] Failed to execute goal org.apache.maven.plugins:maven-surefire-plugin:2.22.2:test (default-test) on project domain: Execution default-test of goal org.apache.maven.plugins:maven-surefire-plugin:2.22.2:test failed: Unsupported class file major version 56 -> [Help 1]</p>\n\n<p>using java 9 modularization</p>\n\n<p>Application builds in maven and works without test cases.</p>\n\n<p>used maven surefire plugin version 2.22.1\nfails in command line and intellij</p>\n\n<pre><code>        &lt;plugin&gt;\n            &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n            &lt;artifactId&gt;maven-surefire-plugin&lt;/artifactId&gt;\n            &lt;configuration&gt;\n                &lt;useSystemClassLoader&gt;false&lt;/useSystemClassLoader&gt;\n            &lt;/configuration&gt;\n        &lt;/plugin&gt;\n\n\n\n        &lt;plugin&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\n            &lt;configuration&gt;\n                &lt;jvmArguments&gt;--add-modules=java.xml.ws.annotation&lt;/jvmArguments&gt;\n            &lt;/configuration&gt;\n        &lt;/plugin&gt;\n</code></pre>\n"},{"tags":["java","illegalargumentexception"],"owner":{"account_id":29444579,"reputation":1,"user_id":22562142,"display_name":"hoprik"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":54,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1695163106,"creation_date":1695146218,"question_id":77136896,"body_markdown":"I&#39;m creating my own event system similar to forge in Minecraft on fabric.\r\n\r\nBut I have a problem with the arguments, I created a function (see the first code) and connected the event system annotation to it, specified the required argument and then called it in another place through the `EventManger.post(new OnJoinEvent());` method. And the error `java.lang.IllegalArgumentException: argument type mismatch`. I don`t know what to do\r\n\r\n\r\nEvent\r\n```\r\n@SubscribeEvent\r\npublic static void test(Event event) {\r\n    StorymodServer.sendMessge();\r\n}\r\n```\r\n\r\nPojo OnJoinEvent\r\n```\r\npublic class OnJoinEvent extends Event{\r\n    public OnJoinEvent(){\r\n\r\n    }\r\n}\r\n\r\n```\r\n\r\nEvent Manager (*I know that my annotations are crutchily made differently, they just don&#39;t work)*\r\n```\r\npublic class EventManger {\r\n    static List&lt;Method&gt; methods = new ArrayList&lt;&gt;();\r\n\r\n    public static void register() throws IOException, IllegalAccessException {\r\n        final ClassLoader loader = Thread.currentThread().getContextClassLoader();\r\n\r\n        for (final ClassPath.ClassInfo info : ClassPath.from(loader).getTopLevelClasses()) {\r\n            if (info.getName().startsWith(&quot;ru.hoprik.&quot;)) {\r\n                final Class&lt;?&gt; clazz = info.load();\r\n\r\n                for (Annotation declaredAnnotation : clazz.getDeclaredAnnotations()) {\r\n                    if (declaredAnnotation.annotationType().getSimpleName().equals(&quot;SubscribeEventListener&quot;)) {\r\n                        for (Method method : clazz.getDeclaredMethods()) {\r\n                            for (Annotation methodAnnotation : method.getDeclaredAnnotations()) {\r\n                                if (methodAnnotation.annotationType().getSimpleName().equals(&quot;SubscribeEvent&quot;)) {\r\n                                    try {\r\n                                        method.setAccessible(true);\r\n                                        methods.add(method);\r\n                                        StorymodServer.logger.info(&quot;Registed&quot;);\r\n                                    } catch (Exception e) {\r\n                                        throw new RuntimeException(e.getMessage());\r\n                                    }\r\n                                }\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    public static &lt;E extends Event&gt; void post(E event) {\r\n        StorymodServer.logger.info(event.getClass().toString());\r\n        for (Method method : methods) {\r\n            for (Parameter parameter : method.getParameters()) {\r\n                if (parameter.getType().getSimpleName().equals(event.getClass().getSimpleName())) {\r\n                    try {\r\n                        method.setAccessible(true);\r\n                        method.invoke(null, event);\r\n                        StorymodServer.logger.info(&quot;work!!!&quot;);\r\n                    } catch (IllegalAccessException e) {\r\n                        throw new RuntimeException(e);\r\n                    } catch (InvocationTargetException e) {\r\n                        throw new RuntimeException(e);\r\n                    }\r\n\r\n                }\r\n            }\r\n        }\r\n    }\r\n}\r\n\r\n```\r\n\r\nCrashLog\r\n```\r\n---- Minecraft Crash Report ----\r\n// Uh... Did I do that?\r\n\r\nTime: 2023-09-19 20:39:54\r\nDescription: Initializing game\r\n\r\njava.lang.RuntimeException: Could not execute entrypoint stage &#39;main&#39; due to errors, provided by &#39;mod&#39;!\r\n\tat net.fabricmc.loader.impl.entrypoint.EntrypointUtils.lambda$invoke0$0(EntrypointUtils.java:51)\r\n\tat net.fabricmc.loader.impl.util.ExceptionUtil.gatherExceptions(ExceptionUtil.java:33)\r\n\tat net.fabricmc.loader.impl.entrypoint.EntrypointUtils.invoke0(EntrypointUtils.java:49)\r\n\tat net.fabricmc.loader.impl.entrypoint.EntrypointUtils.invoke(EntrypointUtils.java:35)\r\n\tat net.fabricmc.loader.impl.game.minecraft.Hooks.startClient(Hooks.java:52)\r\n\tat net.minecraft.client.Minecraft.&lt;init&gt;(Minecraft.java:458)\r\n\tat net.minecraft.client.main.Main.main(Main.java:211)\r\n\tat net.fabricmc.loader.impl.game.minecraft.MinecraftGameProvider.launch(MinecraftGameProvider.java:468)\r\n\tat net.fabricmc.loader.impl.launch.knot.Knot.launch(Knot.java:74)\r\n\tat net.fabricmc.loader.impl.launch.knot.KnotClient.main(KnotClient.java:23)\r\n\tat net.fabricmc.devlaunchinjector.Main.main(Main.java:86)\r\nCaused by: java.lang.IllegalArgumentException: argument type mismatch\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)\r\n\tat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:568)\r\n\tat ru.hoprik.storymod.engine.event.EventManger.post(EventManger.java:60)\r\n\tat ru.hoprik.storymod.StorymodServer.onInitialize(StorymodServer.java:64)\r\n\tat net.fabricmc.loader.impl.entrypoint.EntrypointUtils.invoke0(EntrypointUtils.java:47)\r\n\t... 8 more\r\n\r\n\r\nA detailed walkthrough of the error, its code path and all known details is as follows:\r\n---------------------------------------------------------------------------------------\r\n\r\n-- Head --\r\nThread: Render thread\r\nStacktrace:\r\n\tat net.fabricmc.loader.impl.entrypoint.EntrypointUtils.lambda$invoke0$0(EntrypointUtils.java:51)\r\n\tat net.fabricmc.loader.impl.util.ExceptionUtil.gatherExceptions(ExceptionUtil.java:33)\r\n\tat net.fabricmc.loader.impl.entrypoint.EntrypointUtils.invoke0(EntrypointUtils.java:49)\r\n\tat net.fabricmc.loader.impl.entrypoint.EntrypointUtils.invoke(EntrypointUtils.java:35)\r\n\tat net.fabricmc.loader.impl.game.minecraft.Hooks.startClient(Hooks.java:52)\r\n\tat net.minecraft.client.Minecraft.&lt;init&gt;(Minecraft.java:458)\r\n\r\n-- Initialization --\r\nDetails:\r\n\tModules: \r\n\t\tADVAPI32.dll:Windows 32 Extended API Library:10.0.22621.2338 (WinBuild.160101.0800):Microsoft Corporation\r\n        COMCTL32.dll:Replacement libraries for version control with the user:6.10 (WinBuild.160101.0800):Microsoft\r\n        CRYPT32.dll:API32 cryptography:10.0.22621.2338 (WinBuild.160101.0800):Microsoft Corporation\r\n        CRYPTBASE.dll:The basic DLL of the cryptographic API:10.0.22621.1 (WinBuild.160101.0800):Microsoft Corporation\r\n        CRYPTSP.dll:Cryptographic Service Provider API:10.0.22621.1 (WinBuild.160101.0800):Microsoft Corporation\r\n        DBGHELP.DLL:Windows Image Creation Assistant:10.0.22621.1 (WinBuild.160101.0800):Microsoft Corporation\r\n        DNSAPI.dll:Dynamic DNS Client API Library:10.0.22621.2338 (WinBuild.160101.0800):Microsoft Corporation\r\n        GDI32.dll:GDI DLL Client Library:10.0.22621.2215 (WinBuild.160101.0800):Microsoft Corporation\r\n        IMM32.DLL:Windows IMM32 Multiuser Client API DLL:10.0.22621.1344 (WinBuild.160101.0800):Microsoft Corporation\r\n        IPHLPAPI.DLL:API for accessing IP:10.0.22621.2338 (WinBuild.160101.0800):Microsoft Corporation\r\n        KERNEL32.DLL:Libraries-Windows NT BASE API client:10.0.22621.2275 (WinBuild.160101.0800):Microsoft Corporation\r\n        KERNELBASE.dll:Windows NT BASE API Client Library:10.0.22621.2275 (WinBuild.160101.0800):Microsoft Corporation\r\n        MpOav.dll:IOfficeAntiVirus module:4.18.23080.2006 (04d8e871ffe7ba6b2204046883e1ad9b7a5989ce):Microsoft\r\n        NSI.dll:NSI User Mode Interface DLL:10.0.22621.1 (WinBuild.160101.0800):Microsoft Corporation\r\n        NTASN1.dll:Microsoft ASN.1 API:10.0.22621.2338 (WinBuild.160101.0800):Microsoft Corporation\r\n        OLEAUT32.dll:OLEAUT32.DLL:10.0.22621.1992 (WinBuild.160101.0800):Microsoft Ole32.dll Corporation\r\n        :Microsoft OLE for Windows:10.0.22621.2338 (WinBuild.160101.0800):Microsoft\r\n        POWRPROF.dll:DLL module to support the power management program:10.0.22621.818 (WinBuild.160101.0800):Microsoft Corporation\r\n        PSAPI.DLL:Process Status Assistant:10.0.22621.1 (WinBuild.160101.0800):Microsoft Corporation\r\n        Pdh.dll:Data loading module for Windows:10.0.22621.2338 (WinBuild.160101.0800):Microsoft Corporation\r\n        RPCRT4.dll:Remote Access Libraries version:10.0.22621.2338 (WinBuild.160101.0800):Microsoft Corporation\r\n        SHCORE.dll:SHCORE:10.0.22621.2338 (WinBuild.160101.0800):Microsoft Corporation\r\n        SHELL32.dll:Additional library for Windows:10.0.22621.2275 (WinBuild.160101.0800):Microsoft Corporation\r\n        UMPDC.dll:Coordinator of User mode power dependencies:10.0.22621.1 (WinBuild.160101.0800):Microsoft Corporation\r\n        USER32.dll:Windows Multiuser CLIENT API Library:10.0.22621.2338 (WinBuild.160101.0800):Microsoft Corporation\r\n        USERENV.dll:Userenv:10.0.22621.2338 (WinBuild.160101.0800):Microsoft Corporation\r\n        VCRUNTIME140.dll:Microsoft&#174; Runtime Library C:14.16.27031.1 created: vcwrkspc:Microsoft Corporation\r\n        VERSION.dll:Libraries for checking the version and installing files:10.0.22621.1 (WinBuild.160101.0800):Microsoft Corporation\r\n        WINHTTP.dll:Windows HTTP Services:10.0.22621.2338 (WinBuild.160101.0800):Microsoft\r\n        WINMM.dll:MCI API DLL:10.0.22621.2338 (WinBuild.160101.0800):Microsoft Corporation\r\n        WS2_32.dll:32-bit Windows Socket 2.0 Library:10.0.22621.2338 (WinBuild.160101.0800):Microsoft Corporation\r\n        WSOCK32.dll:32-bit DLL for Windows Socket:10.0.22621.2338 (WinBuild.160101.0800):Microsoft Corporation\r\n        amsi.dll:Malware Scanning Interface:10.0.22621.1 (WinBuild.160101.0800):Microsoft Corporation\r\n        bcrypt.dll:Libraries Cryptographic interface for Windows:10.0.22621.2338 (WinBuild.160101.0800):Microsoft Corporation\r\n        bcryptPrimitives.dll:Windows Cryptographic Primitives Library:10.0.22621.1928 (WinBuild.160101.0800):Microsoft Corporation\r\n       clbcatq.dll:COM+ Configuration directory:2001.12.10941.16384 (WinBuild.160101.0800):Microsoft Corporation\r\n        combase.dll:Microsoft COM for Windows:10.0.22621.2338 (WinBuild.160101.0800):Microsoft Corporation\r\n        dbgcore.DLL:Windows Kernel Debugging Assistants:10.0.22621.1 (WinBuild.160101.0800):Microsoft Corporation\r\n        dhcpcsvc.DLL:DHCP Client Service:10.0.22621.2338 (WinBuild.160101.0800):Microsoft Corporation\r\n        dhcpcsvc6.DLL:DHCPv6 client:10.0.22621.2338 (WinBuild.160101.0800):Microsoft Corporation\r\n        fwpuclnt.dll:FWP/IPsec User Interface API:10.0.22621.2338 (WinBuild.160101.0800):Corporation\r\n        Microsoft gdi32full.dll:GDI Client Library:10.0.22621.2215 (WinBuild.160101.0800):Microsoft Corporation\r\n        iertutil.dll:Utility program for connecting to Internet Explorer:11.00.22621.2338 (WinBuild.160101.0800):Microsoft Corporation\r\n        java.dll:OpenJDK binary platform:17.0.8.0:Amazon.com Inc.\r\n       \tjava.exe:OpenJDK binary platform:17.0.8.0:Amazon.com Inc.\r\n       \tjemalloc.dll\r\n        jimage.dll:OpenJDK binary platform:17.0.8.0:Amazon.com Inc.\r\n       \tjli.dll:OpenJDK binary platform:17.0.8.0:Amazon.com Inc.\r\n       \tjna1721872042997710250.dll:Own JNA library:6.1.4:Java(TM) Native Access (JNA)\r\n        jsvml.dll:OpenJDK binary platform:17.0.8.0:Amazon.com Inc.\r\n       \tjvm.dll:64-bit OpenJDK VM server:17.0.8.0:Amazon.com Inc.\r\n       \tkernel.appcore.dll:AppModel API Host:10.0.22621.1 (WinBuild.160101.0800):Microsoft Corporation\r\n        lwjgl.dll\r\n        management.dll:OpenJDK binary platform:17.0.8.0:Amazon.com Inc.\r\n       \tmanagement_ext.dll:OpenJDK binary platform:17.0.8.0:Amazon.com Inc.\r\n       \tmsvcp140.dll:Microsoft&#174; Runtime Library C:14.16.27033.0 , created by: vcwrkspc:Microsoft Corporation\r\n        msvcp_win.dll:Microsoft&#174; Runtime Library C:10.0.22621.608 (WinBuild.160101.0800):Microsoft Corporation\r\n        msvcrt.dll:Windows NT CRT DLL:7.0.22621.608 (WinBuild. 160101.0800):Microsoft Corporation\r\n        mswsock.dll:Extended version of the application\r\n        to support the Microsoft Windows Sockets 2.0 API:10.0.22621.2338 (WinBuild.160101.0800):Microsoft Corporation napinsp.dll:Application for downloading information for users email:10.0.22621.2338 (WinBuild.160101.0800):Microsoft Corporation\r\n        ncrypt.dll:Windows NCrypt Developer:10.0.22621.2338 (WinBuild.160101.0800):Microsoft Corporation\r\n        net.dll:OpenJDK binary platform:17.0.8.0:Amazon.com Inc.\r\n        netutils.dll:Net Win32 API Helpers DLL library:10.0.22621.674 (WinBuild.160101.0800):Microsoft Corporation\r\n        nio.dll:OpenJDK binary platform:17.0.8.0:Amazon.com Inc.\r\n        nlansp_c.dll:NLA DLL Namespace Service Provider:10.0.22621.2070 (WinBuild.160101.0800):Microsoft Corporation\r\n        ntdll.dll:NT System Library:10.0.22621.2275 (WinBuild.160101.0800):Microsoft\r\n        perfos.dll Corporation:Fairing Libraries for Windows operating system:10.0.22621.2338 (WinBuild.160101.0800):Microsoft Corporation\r\n        pfclient.dll:SysMain client:10.0.22621.1 (WinBuild.160101. 0800):Microsoft Corporation\r\n        pnrpnsp.dll:Software Installer and PNRP password:10.0.22621.2338 (WinBuild.160101.0800):Microsoft Corporation\r\n        profapi.dll:The basic API of the user profile:10.0.22621.1928 (WinBuild.160101.0800):Microsoft Corporation\r\n        rasadhlp.dll:Assistant for automatic dial-up of remote access:10.0.22621.1 (WinBuild.160101.0800):Microsoft Corporation\r\n        rsaenh.dll:Microsoft Enhanced Cryptographic Provider:10.0.22621.2338 (WinBuild.160101.0800):Microsoft Corporation\r\n        sechost.dll:Host for SCM/SDDL/LSA Search API:10.0.22621.2338 (WinBuild.160101.0800):Microsoft Corporation\r\n        shlwapi.dll:Libraries Problems in the program:10.0.22621.2338 (WinBuild.160101.0800):Microsoft Corporation\r\n        srvcli.dll:Client library of the server service:10.0.22621.1928 (WinBuild.160101.0800):Microsoft Corporation\r\n        sunmscapi.dll:OpenJDK binary platform:17.0.8.0:Amazon.com Inc.\r\n        ucrtbase.dll:Microsoft&#174; Runtime Library C:10.0.22621.608 (WinBuild.160101.0800):Microsoft Corporation\r\n        urlmon.dll:OLE32 registration for Win32:11.00.22621.2338 (WinBuild.160101.0800):Microsoft Corporation\r\n        verify.dll:OpenJDK binary platform:17.0.8.0:Amazon.com Inc.\r\n        win32u.dll:Win32u:10.0.22621.2283 (WinBuild.160101.0800):Microsoft Corporation\r\n        windows.storage.dll:Microsoft WinRT API:10.0.22621.2338 (WinBuild.160101.0800):Microsoft Corporation\r\n        winrnr.dll:LDAP RnR Provider DLL: 10.0.22621.1 (WinBuild.160101.0800):Microsoft Corporation\r\n        wintypes.dll:DLL for Windows OS:10.0.22621.2338 (WinBuild.160101.0800):Microsoft Corporation\r\n        wshbth.dll:Windows Sockets Helper DLL:10.0.22621.1778 (WinBuild.160101.0800):Microsoft Corporation\r\n        zip.dll : OpenJDK binary platform:17.0.8.0:Amazon.com Inc.\r\nStacktrace:\r\n\tat net.minecraft.client.main.Main.main(Main.java:211)\r\n\tat net.fabricmc.loader.impl.game.minecraft.MinecraftGameProvider.launch(MinecraftGameProvider.java:468)\r\n\tat net.fabricmc.loader.impl.launch.knot.Knot.launch(Knot.java:74)\r\n\tat net.fabricmc.loader.impl.launch.knot.KnotClient.main(KnotClient.java:23)\r\n\tat net.fabricmc.devlaunchinjector.Main.main(Main.java:86)\r\n\r\n-- System Details --\r\nDetails:\r\n\tMinecraft Version: 1.20.1\r\n\tMinecraft Version ID: 1.20.1\r\n\tOperating System: Windows 11 (amd64) version 10.0\r\n\tJava Version: 17.0.8, Amazon.com Inc.\r\n\tJava VM Version: OpenJDK 64-Bit Server VM (mixed mode, sharing), Amazon.com Inc.\r\n\tMemory: 145630752 bytes (138 MiB) / 494927872 bytes (472 MiB) up to 6421479424 bytes (6124 MiB)\r\n\tCPUs: 6\r\n\tProcessor Vendor: GenuineIntel\r\n\tProcessor Name: Intel(R) Core(TM) i5-9400F CPU @ 2.90GHz\r\n\tIdentifier: Intel64 Family 6 Model 158 Stepping 10\r\n\tMicroarchitecture: Coffee Lake\r\n\tFrequency (GHz): 2.90\r\n\tNumber of physical packages: 1\r\n\tNumber of physical CPUs: 6\r\n\tNumber of logical CPUs: 6\r\n\tGraphics card #0 name: NVIDIA GeForce GTX 1650\r\n\tGraphics card #0 vendor: NVIDIA (0x10de)\r\n\tGraphics card #0 VRAM (MB): 4095.00\r\n\tGraphics card #0 deviceId: 0x1f82\r\n\tGraphics card #0 versionInfo: DriverVersion=31.0.15.2647\r\n\tMemory slot #0 capacity (MB): 8192.00\r\n\tMemory slot #0 clockSpeed (GHz): 2.40\r\n\tMemory slot #0 type: DDR4\r\n\tMemory slot #1 capacity (MB): 4096.00\r\n\tMemory slot #1 clockSpeed (GHz): 2.40\r\n\tMemory slot #1 type: DDR4\r\n\tMemory slot #2 capacity (MB): 8192.00\r\n\tMemory slot #2 clockSpeed (GHz): 2.40\r\n\tMemory slot #2 type: DDR4\r\n\tMemory slot #3 capacity (MB): 4096.00\r\n\tMemory slot #3 clockSpeed (GHz): 2.40\r\n\tMemory slot #3 type: DDR4\r\n\tVirtual memory max (MB): 30889.77\r\n\tVirtual memory used (MB): 19304.91\r\n\tSwap memory total (MB): 6400.00\r\n\tSwap memory used (MB): 68.38\r\n\tJVM Flags: 0 total; \r\n\tFabric Mods: \r\n\t\tfabric-api: Fabric API 0.87.0+1.20.1\r\n\t\tfabric-api-base: Fabric API Base 0.4.30+7abfd51577\r\n\t\tfabric-api-lookup-api-v1: Fabric API Lookup API (v1) 1.6.35+4d8536c977\r\n\t\tfabric-biome-api-v1: Fabric Biome API (v1) 13.0.10+b3afc78b77\r\n\t\tfabric-block-api-v1: Fabric Block API (v1) 1.0.9+e022e5d177\r\n\t\tfabric-blockrenderlayer-v1: Fabric BlockRenderLayer Registration (v1) 1.1.40+b3afc78b77\r\n\t\tfabric-client-tags-api-v1: Fabric Client Tags 1.1.1+97bb207577\r\n\t\tfabric-command-api-v1: Fabric Command API (v1) 1.2.33+f71b366f77\r\n\t\tfabric-command-api-v2: Fabric Command API (v2) 2.2.12+b3afc78b77\r\n\t\tfabric-commands-v0: Fabric Commands (v0) 0.2.50+df3654b377\r\n\t\tfabric-containers-v0: Fabric Containers (v0) 0.1.63+df3654b377\r\n\t\tfabric-content-registries-v0: Fabric Content Registries (v0) 4.0.9+b3afc78b77\r\n\t\tfabric-convention-tags-v1: Fabric Convention Tags 1.5.4+a1a980da77\r\n\t\tfabric-crash-report-info-v1: Fabric Crash Report Info (v1) 0.2.18+aeb40ebe77\r\n\t\tfabric-data-generation-api-v1: Fabric Data Generation API (v1) 12.2.2+1e61dba177\r\n\t\tfabric-dimensions-v1: Fabric Dimensions API (v1) 2.1.53+8536527b77\r\n\t\tfabric-entity-events-v1: Fabric Entity Events (v1) 1.5.22+b3afc78b77\r\n\t\tfabric-events-interaction-v0: Fabric Events Interaction (v0) 0.6.1+e91849a877\r\n\t\tfabric-events-lifecycle-v0: Fabric Events Lifecycle (v0) 0.2.62+df3654b377\r\n\t\tfabric-game-rule-api-v1: Fabric Game Rule API (v1) 1.0.38+b04edc7a77\r\n\t\tfabric-gametest-api-v1: Fabric Game Test API (v1) 1.2.12+b3afc78b77\r\n\t\tfabric-item-api-v1: Fabric Item API (v1) 2.1.27+b3afc78b77\r\n\t\tfabric-item-group-api-v1: Fabric Item Group API (v1) 4.0.10+23d9108177\r\n\t\tfabric-key-binding-api-v1: Fabric Key Binding API (v1) 1.0.36+fb8d95da77\r\n\t\tfabric-keybindings-v0: Fabric Key Bindings (v0) 0.2.34+df3654b377\r\n\t\tfabric-lifecycle-events-v1: Fabric Lifecycle Events (v1) 2.2.21+b3afc78b77\r\n\t\tfabric-loot-api-v2: Fabric Loot API (v2) 1.1.39+b3afc78b77\r\n\t\tfabric-loot-tables-v1: Fabric Loot Tables (v1) 1.1.43+9e7660c677\r\n\t\tfabric-message-api-v1: Fabric Message API (v1) 5.1.7+3265161977\r\n\t\tfabric-mining-level-api-v1: Fabric Mining Level API (v1) 2.1.49+b3afc78b77\r\n\t\tfabric-model-loading-api-v1: Fabric Model Loading API (v1) 1.0.2+709a987177\r\n\t\tfabric-models-v0: Fabric Models (v0) 0.4.1+9386d8a777\r\n\t\tfabric-networking-api-v1: Fabric Networking API (v1) 1.3.10+eeb8eb3677\r\n\t\tfabric-networking-v0: Fabric Networking (v0) 0.3.50+df3654b377\r\n\t\tfabric-object-builder-api-v1: Fabric Object Builder API (v1) 11.1.1+6beca84877\r\n\t\tfabric-particles-v1: Fabric Particles (v1) 1.1.1+201a23a077\r\n\t\tfabric-recipe-api-v1: Fabric Recipe API (v1) 1.0.20+b3afc78b77\r\n\t\tfabric-registry-sync-v0: Fabric Registry Sync (v0) 2.3.2+4df89eb277\r\n\t\tfabric-renderer-api-v1: Fabric Renderer API (v1) 3.1.2+6bdb2ed077\r\n\t\tfabric-renderer-indigo: Fabric Renderer - Indigo 1.4.2+6bdb2ed077\r\n\t\tfabric-renderer-registries-v1: Fabric Renderer Registries (v1) 3.2.45+df3654b377\r\n\t\tfabric-rendering-data-attachment-v1: Fabric Rendering Data Attachment (v1) 0.3.34+b3afc78b77\r\n\t\tfabric-rendering-fluids-v1: Fabric Rendering Fluids (v1) 3.0.27+b3afc78b77\r\n\t\tfabric-rendering-v0: Fabric Rendering (v0) 1.1.48+df3654b377\r\n\t\tfabric-rendering-v1: Fabric Rendering (v1) 3.0.7+b3afc78b77\r\n\t\tfabric-resource-conditions-api-v1: Fabric Resource Conditions API (v1) 2.3.5+ea08f9d877\r\n\t\tfabric-resource-loader-v0: Fabric Resource Loader (v0) 0.11.9+132c48c177\r\n\t\tfabric-screen-api-v1: Fabric Screen API (v1) 2.0.7+b3afc78b77\r\n\t\tfabric-screen-handler-api-v1: Fabric Screen Handler API (v1) 1.3.29+b3afc78b77\r\n\t\tfabric-sound-api-v1: Fabric Sound API (v1) 1.0.12+b3afc78b77\r\n\t\tfabric-transfer-api-v1: Fabric Transfer API (v1) 3.3.0+cdf060b277\r\n\t\tfabric-transitive-access-wideners-v1: Fabric Transitive Access Wideners (v1) 4.3.0+6c31357e77\r\n\t\tfabricloader: Fabric Loader 0.14.22\r\n\t\tgeckolib: Geckolib 4.2.2\r\n\t\tjava: OpenJDK 64-Bit Server VM 17\r\n\t\tminecraft: Minecraft 1.20.1\r\n\t\tstorymod: storymod 1.0.0\r\n\tLaunched Version: Fabric\r\n\tBackend library: LWJGL version 3.3.1 SNAPSHOT\r\n\tBackend API: Unknown\r\n\tWindow size: &lt;not initialized&gt;\r\n\tGL Caps: Using framebuffer using OpenGL 3.2\r\n\tGL debug messages: &lt;disabled&gt;\r\n\tUsing VBOs: Yes\r\n\tIs Modded: Definitely; Client brand changed to &#39;fabric&#39;\r\n\tType: Client (map_client.txt)\r\n\tCPU: &lt;unknown&gt;\r\n```\r\n\r\nUPD:\r\nI changed the parameter class to object and everything worked, but I need custom classes\r\n\r\nI`m use chat gpt and fix this bug 9 days........\r\n","title":"Crash fabric, IllegalArgumentException","body":"<p>I'm creating my own event system similar to forge in Minecraft on fabric.</p>\n<p>But I have a problem with the arguments, I created a function (see the first code) and connected the event system annotation to it, specified the required argument and then called it in another place through the <code>EventManger.post(new OnJoinEvent());</code> method. And the error <code>java.lang.IllegalArgumentException: argument type mismatch</code>. I don`t know what to do</p>\n<p>Event</p>\n<pre><code>@SubscribeEvent\npublic static void test(Event event) {\n    StorymodServer.sendMessge();\n}\n</code></pre>\n<p>Pojo OnJoinEvent</p>\n<pre><code>public class OnJoinEvent extends Event{\n    public OnJoinEvent(){\n\n    }\n}\n\n</code></pre>\n<p>Event Manager (<em>I know that my annotations are crutchily made differently, they just don't work)</em></p>\n<pre><code>public class EventManger {\n    static List&lt;Method&gt; methods = new ArrayList&lt;&gt;();\n\n    public static void register() throws IOException, IllegalAccessException {\n        final ClassLoader loader = Thread.currentThread().getContextClassLoader();\n\n        for (final ClassPath.ClassInfo info : ClassPath.from(loader).getTopLevelClasses()) {\n            if (info.getName().startsWith(&quot;ru.hoprik.&quot;)) {\n                final Class&lt;?&gt; clazz = info.load();\n\n                for (Annotation declaredAnnotation : clazz.getDeclaredAnnotations()) {\n                    if (declaredAnnotation.annotationType().getSimpleName().equals(&quot;SubscribeEventListener&quot;)) {\n                        for (Method method : clazz.getDeclaredMethods()) {\n                            for (Annotation methodAnnotation : method.getDeclaredAnnotations()) {\n                                if (methodAnnotation.annotationType().getSimpleName().equals(&quot;SubscribeEvent&quot;)) {\n                                    try {\n                                        method.setAccessible(true);\n                                        methods.add(method);\n                                        StorymodServer.logger.info(&quot;Registed&quot;);\n                                    } catch (Exception e) {\n                                        throw new RuntimeException(e.getMessage());\n                                    }\n                                }\n                            }\n                        }\n                    }\n                }\n            }\n        }\n    }\n\n    public static &lt;E extends Event&gt; void post(E event) {\n        StorymodServer.logger.info(event.getClass().toString());\n        for (Method method : methods) {\n            for (Parameter parameter : method.getParameters()) {\n                if (parameter.getType().getSimpleName().equals(event.getClass().getSimpleName())) {\n                    try {\n                        method.setAccessible(true);\n                        method.invoke(null, event);\n                        StorymodServer.logger.info(&quot;work!!!&quot;);\n                    } catch (IllegalAccessException e) {\n                        throw new RuntimeException(e);\n                    } catch (InvocationTargetException e) {\n                        throw new RuntimeException(e);\n                    }\n\n                }\n            }\n        }\n    }\n}\n\n</code></pre>\n<p>CrashLog</p>\n<pre><code>---- Minecraft Crash Report ----\n// Uh... Did I do that?\n\nTime: 2023-09-19 20:39:54\nDescription: Initializing game\n\njava.lang.RuntimeException: Could not execute entrypoint stage 'main' due to errors, provided by 'mod'!\n    at net.fabricmc.loader.impl.entrypoint.EntrypointUtils.lambda$invoke0$0(EntrypointUtils.java:51)\n    at net.fabricmc.loader.impl.util.ExceptionUtil.gatherExceptions(ExceptionUtil.java:33)\n    at net.fabricmc.loader.impl.entrypoint.EntrypointUtils.invoke0(EntrypointUtils.java:49)\n    at net.fabricmc.loader.impl.entrypoint.EntrypointUtils.invoke(EntrypointUtils.java:35)\n    at net.fabricmc.loader.impl.game.minecraft.Hooks.startClient(Hooks.java:52)\n    at net.minecraft.client.Minecraft.&lt;init&gt;(Minecraft.java:458)\n    at net.minecraft.client.main.Main.main(Main.java:211)\n    at net.fabricmc.loader.impl.game.minecraft.MinecraftGameProvider.launch(MinecraftGameProvider.java:468)\n    at net.fabricmc.loader.impl.launch.knot.Knot.launch(Knot.java:74)\n    at net.fabricmc.loader.impl.launch.knot.KnotClient.main(KnotClient.java:23)\n    at net.fabricmc.devlaunchinjector.Main.main(Main.java:86)\nCaused by: java.lang.IllegalArgumentException: argument type mismatch\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)\n    at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n    at java.base/java.lang.reflect.Method.invoke(Method.java:568)\n    at ru.hoprik.storymod.engine.event.EventManger.post(EventManger.java:60)\n    at ru.hoprik.storymod.StorymodServer.onInitialize(StorymodServer.java:64)\n    at net.fabricmc.loader.impl.entrypoint.EntrypointUtils.invoke0(EntrypointUtils.java:47)\n    ... 8 more\n\n\nA detailed walkthrough of the error, its code path and all known details is as follows:\n---------------------------------------------------------------------------------------\n\n-- Head --\nThread: Render thread\nStacktrace:\n    at net.fabricmc.loader.impl.entrypoint.EntrypointUtils.lambda$invoke0$0(EntrypointUtils.java:51)\n    at net.fabricmc.loader.impl.util.ExceptionUtil.gatherExceptions(ExceptionUtil.java:33)\n    at net.fabricmc.loader.impl.entrypoint.EntrypointUtils.invoke0(EntrypointUtils.java:49)\n    at net.fabricmc.loader.impl.entrypoint.EntrypointUtils.invoke(EntrypointUtils.java:35)\n    at net.fabricmc.loader.impl.game.minecraft.Hooks.startClient(Hooks.java:52)\n    at net.minecraft.client.Minecraft.&lt;init&gt;(Minecraft.java:458)\n\n-- Initialization --\nDetails:\n    Modules: \n        ADVAPI32.dll:Windows 32 Extended API Library:10.0.22621.2338 (WinBuild.160101.0800):Microsoft Corporation\n        COMCTL32.dll:Replacement libraries for version control with the user:6.10 (WinBuild.160101.0800):Microsoft\n        CRYPT32.dll:API32 cryptography:10.0.22621.2338 (WinBuild.160101.0800):Microsoft Corporation\n        CRYPTBASE.dll:The basic DLL of the cryptographic API:10.0.22621.1 (WinBuild.160101.0800):Microsoft Corporation\n        CRYPTSP.dll:Cryptographic Service Provider API:10.0.22621.1 (WinBuild.160101.0800):Microsoft Corporation\n        DBGHELP.DLL:Windows Image Creation Assistant:10.0.22621.1 (WinBuild.160101.0800):Microsoft Corporation\n        DNSAPI.dll:Dynamic DNS Client API Library:10.0.22621.2338 (WinBuild.160101.0800):Microsoft Corporation\n        GDI32.dll:GDI DLL Client Library:10.0.22621.2215 (WinBuild.160101.0800):Microsoft Corporation\n        IMM32.DLL:Windows IMM32 Multiuser Client API DLL:10.0.22621.1344 (WinBuild.160101.0800):Microsoft Corporation\n        IPHLPAPI.DLL:API for accessing IP:10.0.22621.2338 (WinBuild.160101.0800):Microsoft Corporation\n        KERNEL32.DLL:Libraries-Windows NT BASE API client:10.0.22621.2275 (WinBuild.160101.0800):Microsoft Corporation\n        KERNELBASE.dll:Windows NT BASE API Client Library:10.0.22621.2275 (WinBuild.160101.0800):Microsoft Corporation\n        MpOav.dll:IOfficeAntiVirus module:4.18.23080.2006 (04d8e871ffe7ba6b2204046883e1ad9b7a5989ce):Microsoft\n        NSI.dll:NSI User Mode Interface DLL:10.0.22621.1 (WinBuild.160101.0800):Microsoft Corporation\n        NTASN1.dll:Microsoft ASN.1 API:10.0.22621.2338 (WinBuild.160101.0800):Microsoft Corporation\n        OLEAUT32.dll:OLEAUT32.DLL:10.0.22621.1992 (WinBuild.160101.0800):Microsoft Ole32.dll Corporation\n        :Microsoft OLE for Windows:10.0.22621.2338 (WinBuild.160101.0800):Microsoft\n        POWRPROF.dll:DLL module to support the power management program:10.0.22621.818 (WinBuild.160101.0800):Microsoft Corporation\n        PSAPI.DLL:Process Status Assistant:10.0.22621.1 (WinBuild.160101.0800):Microsoft Corporation\n        Pdh.dll:Data loading module for Windows:10.0.22621.2338 (WinBuild.160101.0800):Microsoft Corporation\n        RPCRT4.dll:Remote Access Libraries version:10.0.22621.2338 (WinBuild.160101.0800):Microsoft Corporation\n        SHCORE.dll:SHCORE:10.0.22621.2338 (WinBuild.160101.0800):Microsoft Corporation\n        SHELL32.dll:Additional library for Windows:10.0.22621.2275 (WinBuild.160101.0800):Microsoft Corporation\n        UMPDC.dll:Coordinator of User mode power dependencies:10.0.22621.1 (WinBuild.160101.0800):Microsoft Corporation\n        USER32.dll:Windows Multiuser CLIENT API Library:10.0.22621.2338 (WinBuild.160101.0800):Microsoft Corporation\n        USERENV.dll:Userenv:10.0.22621.2338 (WinBuild.160101.0800):Microsoft Corporation\n        VCRUNTIME140.dll:Microsoft® Runtime Library C:14.16.27031.1 created: vcwrkspc:Microsoft Corporation\n        VERSION.dll:Libraries for checking the version and installing files:10.0.22621.1 (WinBuild.160101.0800):Microsoft Corporation\n        WINHTTP.dll:Windows HTTP Services:10.0.22621.2338 (WinBuild.160101.0800):Microsoft\n        WINMM.dll:MCI API DLL:10.0.22621.2338 (WinBuild.160101.0800):Microsoft Corporation\n        WS2_32.dll:32-bit Windows Socket 2.0 Library:10.0.22621.2338 (WinBuild.160101.0800):Microsoft Corporation\n        WSOCK32.dll:32-bit DLL for Windows Socket:10.0.22621.2338 (WinBuild.160101.0800):Microsoft Corporation\n        amsi.dll:Malware Scanning Interface:10.0.22621.1 (WinBuild.160101.0800):Microsoft Corporation\n        bcrypt.dll:Libraries Cryptographic interface for Windows:10.0.22621.2338 (WinBuild.160101.0800):Microsoft Corporation\n        bcryptPrimitives.dll:Windows Cryptographic Primitives Library:10.0.22621.1928 (WinBuild.160101.0800):Microsoft Corporation\n       clbcatq.dll:COM+ Configuration directory:2001.12.10941.16384 (WinBuild.160101.0800):Microsoft Corporation\n        combase.dll:Microsoft COM for Windows:10.0.22621.2338 (WinBuild.160101.0800):Microsoft Corporation\n        dbgcore.DLL:Windows Kernel Debugging Assistants:10.0.22621.1 (WinBuild.160101.0800):Microsoft Corporation\n        dhcpcsvc.DLL:DHCP Client Service:10.0.22621.2338 (WinBuild.160101.0800):Microsoft Corporation\n        dhcpcsvc6.DLL:DHCPv6 client:10.0.22621.2338 (WinBuild.160101.0800):Microsoft Corporation\n        fwpuclnt.dll:FWP/IPsec User Interface API:10.0.22621.2338 (WinBuild.160101.0800):Corporation\n        Microsoft gdi32full.dll:GDI Client Library:10.0.22621.2215 (WinBuild.160101.0800):Microsoft Corporation\n        iertutil.dll:Utility program for connecting to Internet Explorer:11.00.22621.2338 (WinBuild.160101.0800):Microsoft Corporation\n        java.dll:OpenJDK binary platform:17.0.8.0:Amazon.com Inc.\n        java.exe:OpenJDK binary platform:17.0.8.0:Amazon.com Inc.\n        jemalloc.dll\n        jimage.dll:OpenJDK binary platform:17.0.8.0:Amazon.com Inc.\n        jli.dll:OpenJDK binary platform:17.0.8.0:Amazon.com Inc.\n        jna1721872042997710250.dll:Own JNA library:6.1.4:Java(TM) Native Access (JNA)\n        jsvml.dll:OpenJDK binary platform:17.0.8.0:Amazon.com Inc.\n        jvm.dll:64-bit OpenJDK VM server:17.0.8.0:Amazon.com Inc.\n        kernel.appcore.dll:AppModel API Host:10.0.22621.1 (WinBuild.160101.0800):Microsoft Corporation\n        lwjgl.dll\n        management.dll:OpenJDK binary platform:17.0.8.0:Amazon.com Inc.\n        management_ext.dll:OpenJDK binary platform:17.0.8.0:Amazon.com Inc.\n        msvcp140.dll:Microsoft® Runtime Library C:14.16.27033.0 , created by: vcwrkspc:Microsoft Corporation\n        msvcp_win.dll:Microsoft® Runtime Library C:10.0.22621.608 (WinBuild.160101.0800):Microsoft Corporation\n        msvcrt.dll:Windows NT CRT DLL:7.0.22621.608 (WinBuild. 160101.0800):Microsoft Corporation\n        mswsock.dll:Extended version of the application\n        to support the Microsoft Windows Sockets 2.0 API:10.0.22621.2338 (WinBuild.160101.0800):Microsoft Corporation napinsp.dll:Application for downloading information for users email:10.0.22621.2338 (WinBuild.160101.0800):Microsoft Corporation\n        ncrypt.dll:Windows NCrypt Developer:10.0.22621.2338 (WinBuild.160101.0800):Microsoft Corporation\n        net.dll:OpenJDK binary platform:17.0.8.0:Amazon.com Inc.\n        netutils.dll:Net Win32 API Helpers DLL library:10.0.22621.674 (WinBuild.160101.0800):Microsoft Corporation\n        nio.dll:OpenJDK binary platform:17.0.8.0:Amazon.com Inc.\n        nlansp_c.dll:NLA DLL Namespace Service Provider:10.0.22621.2070 (WinBuild.160101.0800):Microsoft Corporation\n        ntdll.dll:NT System Library:10.0.22621.2275 (WinBuild.160101.0800):Microsoft\n        perfos.dll Corporation:Fairing Libraries for Windows operating system:10.0.22621.2338 (WinBuild.160101.0800):Microsoft Corporation\n        pfclient.dll:SysMain client:10.0.22621.1 (WinBuild.160101. 0800):Microsoft Corporation\n        pnrpnsp.dll:Software Installer and PNRP password:10.0.22621.2338 (WinBuild.160101.0800):Microsoft Corporation\n        profapi.dll:The basic API of the user profile:10.0.22621.1928 (WinBuild.160101.0800):Microsoft Corporation\n        rasadhlp.dll:Assistant for automatic dial-up of remote access:10.0.22621.1 (WinBuild.160101.0800):Microsoft Corporation\n        rsaenh.dll:Microsoft Enhanced Cryptographic Provider:10.0.22621.2338 (WinBuild.160101.0800):Microsoft Corporation\n        sechost.dll:Host for SCM/SDDL/LSA Search API:10.0.22621.2338 (WinBuild.160101.0800):Microsoft Corporation\n        shlwapi.dll:Libraries Problems in the program:10.0.22621.2338 (WinBuild.160101.0800):Microsoft Corporation\n        srvcli.dll:Client library of the server service:10.0.22621.1928 (WinBuild.160101.0800):Microsoft Corporation\n        sunmscapi.dll:OpenJDK binary platform:17.0.8.0:Amazon.com Inc.\n        ucrtbase.dll:Microsoft® Runtime Library C:10.0.22621.608 (WinBuild.160101.0800):Microsoft Corporation\n        urlmon.dll:OLE32 registration for Win32:11.00.22621.2338 (WinBuild.160101.0800):Microsoft Corporation\n        verify.dll:OpenJDK binary platform:17.0.8.0:Amazon.com Inc.\n        win32u.dll:Win32u:10.0.22621.2283 (WinBuild.160101.0800):Microsoft Corporation\n        windows.storage.dll:Microsoft WinRT API:10.0.22621.2338 (WinBuild.160101.0800):Microsoft Corporation\n        winrnr.dll:LDAP RnR Provider DLL: 10.0.22621.1 (WinBuild.160101.0800):Microsoft Corporation\n        wintypes.dll:DLL for Windows OS:10.0.22621.2338 (WinBuild.160101.0800):Microsoft Corporation\n        wshbth.dll:Windows Sockets Helper DLL:10.0.22621.1778 (WinBuild.160101.0800):Microsoft Corporation\n        zip.dll : OpenJDK binary platform:17.0.8.0:Amazon.com Inc.\nStacktrace:\n    at net.minecraft.client.main.Main.main(Main.java:211)\n    at net.fabricmc.loader.impl.game.minecraft.MinecraftGameProvider.launch(MinecraftGameProvider.java:468)\n    at net.fabricmc.loader.impl.launch.knot.Knot.launch(Knot.java:74)\n    at net.fabricmc.loader.impl.launch.knot.KnotClient.main(KnotClient.java:23)\n    at net.fabricmc.devlaunchinjector.Main.main(Main.java:86)\n\n-- System Details --\nDetails:\n    Minecraft Version: 1.20.1\n    Minecraft Version ID: 1.20.1\n    Operating System: Windows 11 (amd64) version 10.0\n    Java Version: 17.0.8, Amazon.com Inc.\n    Java VM Version: OpenJDK 64-Bit Server VM (mixed mode, sharing), Amazon.com Inc.\n    Memory: 145630752 bytes (138 MiB) / 494927872 bytes (472 MiB) up to 6421479424 bytes (6124 MiB)\n    CPUs: 6\n    Processor Vendor: GenuineIntel\n    Processor Name: Intel(R) Core(TM) i5-9400F CPU @ 2.90GHz\n    Identifier: Intel64 Family 6 Model 158 Stepping 10\n    Microarchitecture: Coffee Lake\n    Frequency (GHz): 2.90\n    Number of physical packages: 1\n    Number of physical CPUs: 6\n    Number of logical CPUs: 6\n    Graphics card #0 name: NVIDIA GeForce GTX 1650\n    Graphics card #0 vendor: NVIDIA (0x10de)\n    Graphics card #0 VRAM (MB): 4095.00\n    Graphics card #0 deviceId: 0x1f82\n    Graphics card #0 versionInfo: DriverVersion=31.0.15.2647\n    Memory slot #0 capacity (MB): 8192.00\n    Memory slot #0 clockSpeed (GHz): 2.40\n    Memory slot #0 type: DDR4\n    Memory slot #1 capacity (MB): 4096.00\n    Memory slot #1 clockSpeed (GHz): 2.40\n    Memory slot #1 type: DDR4\n    Memory slot #2 capacity (MB): 8192.00\n    Memory slot #2 clockSpeed (GHz): 2.40\n    Memory slot #2 type: DDR4\n    Memory slot #3 capacity (MB): 4096.00\n    Memory slot #3 clockSpeed (GHz): 2.40\n    Memory slot #3 type: DDR4\n    Virtual memory max (MB): 30889.77\n    Virtual memory used (MB): 19304.91\n    Swap memory total (MB): 6400.00\n    Swap memory used (MB): 68.38\n    JVM Flags: 0 total; \n    Fabric Mods: \n        fabric-api: Fabric API 0.87.0+1.20.1\n        fabric-api-base: Fabric API Base 0.4.30+7abfd51577\n        fabric-api-lookup-api-v1: Fabric API Lookup API (v1) 1.6.35+4d8536c977\n        fabric-biome-api-v1: Fabric Biome API (v1) 13.0.10+b3afc78b77\n        fabric-block-api-v1: Fabric Block API (v1) 1.0.9+e022e5d177\n        fabric-blockrenderlayer-v1: Fabric BlockRenderLayer Registration (v1) 1.1.40+b3afc78b77\n        fabric-client-tags-api-v1: Fabric Client Tags 1.1.1+97bb207577\n        fabric-command-api-v1: Fabric Command API (v1) 1.2.33+f71b366f77\n        fabric-command-api-v2: Fabric Command API (v2) 2.2.12+b3afc78b77\n        fabric-commands-v0: Fabric Commands (v0) 0.2.50+df3654b377\n        fabric-containers-v0: Fabric Containers (v0) 0.1.63+df3654b377\n        fabric-content-registries-v0: Fabric Content Registries (v0) 4.0.9+b3afc78b77\n        fabric-convention-tags-v1: Fabric Convention Tags 1.5.4+a1a980da77\n        fabric-crash-report-info-v1: Fabric Crash Report Info (v1) 0.2.18+aeb40ebe77\n        fabric-data-generation-api-v1: Fabric Data Generation API (v1) 12.2.2+1e61dba177\n        fabric-dimensions-v1: Fabric Dimensions API (v1) 2.1.53+8536527b77\n        fabric-entity-events-v1: Fabric Entity Events (v1) 1.5.22+b3afc78b77\n        fabric-events-interaction-v0: Fabric Events Interaction (v0) 0.6.1+e91849a877\n        fabric-events-lifecycle-v0: Fabric Events Lifecycle (v0) 0.2.62+df3654b377\n        fabric-game-rule-api-v1: Fabric Game Rule API (v1) 1.0.38+b04edc7a77\n        fabric-gametest-api-v1: Fabric Game Test API (v1) 1.2.12+b3afc78b77\n        fabric-item-api-v1: Fabric Item API (v1) 2.1.27+b3afc78b77\n        fabric-item-group-api-v1: Fabric Item Group API (v1) 4.0.10+23d9108177\n        fabric-key-binding-api-v1: Fabric Key Binding API (v1) 1.0.36+fb8d95da77\n        fabric-keybindings-v0: Fabric Key Bindings (v0) 0.2.34+df3654b377\n        fabric-lifecycle-events-v1: Fabric Lifecycle Events (v1) 2.2.21+b3afc78b77\n        fabric-loot-api-v2: Fabric Loot API (v2) 1.1.39+b3afc78b77\n        fabric-loot-tables-v1: Fabric Loot Tables (v1) 1.1.43+9e7660c677\n        fabric-message-api-v1: Fabric Message API (v1) 5.1.7+3265161977\n        fabric-mining-level-api-v1: Fabric Mining Level API (v1) 2.1.49+b3afc78b77\n        fabric-model-loading-api-v1: Fabric Model Loading API (v1) 1.0.2+709a987177\n        fabric-models-v0: Fabric Models (v0) 0.4.1+9386d8a777\n        fabric-networking-api-v1: Fabric Networking API (v1) 1.3.10+eeb8eb3677\n        fabric-networking-v0: Fabric Networking (v0) 0.3.50+df3654b377\n        fabric-object-builder-api-v1: Fabric Object Builder API (v1) 11.1.1+6beca84877\n        fabric-particles-v1: Fabric Particles (v1) 1.1.1+201a23a077\n        fabric-recipe-api-v1: Fabric Recipe API (v1) 1.0.20+b3afc78b77\n        fabric-registry-sync-v0: Fabric Registry Sync (v0) 2.3.2+4df89eb277\n        fabric-renderer-api-v1: Fabric Renderer API (v1) 3.1.2+6bdb2ed077\n        fabric-renderer-indigo: Fabric Renderer - Indigo 1.4.2+6bdb2ed077\n        fabric-renderer-registries-v1: Fabric Renderer Registries (v1) 3.2.45+df3654b377\n        fabric-rendering-data-attachment-v1: Fabric Rendering Data Attachment (v1) 0.3.34+b3afc78b77\n        fabric-rendering-fluids-v1: Fabric Rendering Fluids (v1) 3.0.27+b3afc78b77\n        fabric-rendering-v0: Fabric Rendering (v0) 1.1.48+df3654b377\n        fabric-rendering-v1: Fabric Rendering (v1) 3.0.7+b3afc78b77\n        fabric-resource-conditions-api-v1: Fabric Resource Conditions API (v1) 2.3.5+ea08f9d877\n        fabric-resource-loader-v0: Fabric Resource Loader (v0) 0.11.9+132c48c177\n        fabric-screen-api-v1: Fabric Screen API (v1) 2.0.7+b3afc78b77\n        fabric-screen-handler-api-v1: Fabric Screen Handler API (v1) 1.3.29+b3afc78b77\n        fabric-sound-api-v1: Fabric Sound API (v1) 1.0.12+b3afc78b77\n        fabric-transfer-api-v1: Fabric Transfer API (v1) 3.3.0+cdf060b277\n        fabric-transitive-access-wideners-v1: Fabric Transitive Access Wideners (v1) 4.3.0+6c31357e77\n        fabricloader: Fabric Loader 0.14.22\n        geckolib: Geckolib 4.2.2\n        java: OpenJDK 64-Bit Server VM 17\n        minecraft: Minecraft 1.20.1\n        storymod: storymod 1.0.0\n    Launched Version: Fabric\n    Backend library: LWJGL version 3.3.1 SNAPSHOT\n    Backend API: Unknown\n    Window size: &lt;not initialized&gt;\n    GL Caps: Using framebuffer using OpenGL 3.2\n    GL debug messages: &lt;disabled&gt;\n    Using VBOs: Yes\n    Is Modded: Definitely; Client brand changed to 'fabric'\n    Type: Client (map_client.txt)\n    CPU: &lt;unknown&gt;\n</code></pre>\n<p>UPD:\nI changed the parameter class to object and everything worked, but I need custom classes</p>\n<p>I`m use chat gpt and fix this bug 9 days........</p>\n"},{"tags":["java","xmlgregoriancalendar","jakarta-migration"],"comments":[{"owner":{"account_id":16878,"reputation":306143,"user_id":37213,"accept_rate":81,"display_name":"duffymo"},"score":1,"creation_date":1677174784,"post_id":75548349,"comment_id":133290684,"body_markdown":"I thought all packages that start with javax have been removed from JDK 17.   I see OpenJDK and Oracle JDK have that class.  Possible problem with Eclipse.  Duplicate: https://stackoverflow.com/questions/55278964/eclipse-cant-find-javax-xml-datatype-xmlgregoriancalendar-java-11","body":"I thought all packages that start with javax have been removed from JDK 17.   I see OpenJDK and Oracle JDK have that class.  Possible problem with Eclipse.  Duplicate: <a href=\"https://stackoverflow.com/questions/55278964/eclipse-cant-find-javax-xml-datatype-xmlgregoriancalendar-java-11\" title=\"eclipse cant find javax xml datatype xmlgregoriancalendar java 11\">stackoverflow.com/questions/55278964/&hellip;</a>"}],"owner":{"account_id":27862671,"reputation":1,"user_id":21274843,"display_name":"satheesh vs"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":203,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1695163058,"creation_date":1677173657,"question_id":75548349,"body_markdown":"I have migrated a project from java 1.8 to java 17. The application is a maven project.  Eclipse complains it can&#39;t resolve `javax.xml.datatype.XMLGregorianCalendar`.  I know that in java 11 the java.xml.bind is removed,  which dependency i can use, either xml-apis or jaxb-api-*.jar , is compatible with java 17?\r\n","title":"Eclipse can’t find XMLGregorianCalendar class - as part of Jakarta migration","body":"<p>I have migrated a project from java 1.8 to java 17. The application is a maven project.  Eclipse complains it can't resolve <code>javax.xml.datatype.XMLGregorianCalendar</code>.  I know that in java 11 the java.xml.bind is removed,  which dependency i can use, either xml-apis or jaxb-api-*.jar , is compatible with java 17?</p>\n"},{"tags":["java","jar","dependencies","timezone-offset","unparseable"],"comments":[{"owner":{"account_id":1894950,"reputation":18007,"user_id":1712135,"display_name":"deHaar"},"score":1,"creation_date":1694599503,"post_id":77096003,"comment_id":135911425,"body_markdown":"How does the affected Java code look?","body":"How does the affected Java code look?"},{"owner":{"account_id":24475288,"reputation":1,"user_id":18394415,"display_name":"user18394415"},"score":0,"creation_date":1694600059,"post_id":77096003,"comment_id":135911536,"body_markdown":"There was no code changes except the jars version update in pom.xml","body":"There was no code changes except the jars version update in pom.xml"},{"owner":{"account_id":15519832,"reputation":1026,"user_id":11478354,"display_name":"dcolazin"},"score":1,"creation_date":1694600547,"post_id":77096003,"comment_id":135911614,"body_markdown":"We don&#39;t know which jar you updated. Please add more info.","body":"We don&#39;t know which jar you updated. Please add more info."},{"owner":{"account_id":24475288,"reputation":1,"user_id":18394415,"display_name":"user18394415"},"score":0,"creation_date":1694600712,"post_id":77096003,"comment_id":135911647,"body_markdown":"Updated mysql-connector-java version from 8.0.19 to 8.0.33. Though others as mentioned in the question also being updated but I suspect this one and hibernateORM which is update to 5.3.20.Final from 4.3.11.Final","body":"Updated mysql-connector-java version from 8.0.19 to 8.0.33. Though others as mentioned in the question also being updated but I suspect this one and hibernateORM which is update to 5.3.20.Final from 4.3.11.Final"},{"owner":{"account_id":24475288,"reputation":1,"user_id":18394415,"display_name":"user18394415"},"score":0,"creation_date":1694603981,"post_id":77096003,"comment_id":135912381,"body_markdown":"UTC offset issue- 2023-08-30T01:30:00.000+00:00 the +0000 in the end is working but not the +00:00. Some parsing has been changed what it looks like as with previous version working and with new getting error because of +00:00 is coming. Can someone guide how can I identify","body":"UTC offset issue- 2023-08-30T01:30:00.000+00:00 the +0000 in the end is working but not the +00:00. Some parsing has been changed what it looks like as with previous version working and with new getting error because of +00:00 is coming. Can someone guide how can I identify"},{"owner":{"account_id":322981,"reputation":310755,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"score":0,"creation_date":1694618143,"post_id":77096003,"comment_id":135915654,"body_markdown":"Take more care in formatting your post to Stack Overflow. I cleaned up this one for you this time.","body":"Take more care in formatting your post to Stack Overflow. I cleaned up this one for you this time."},{"owner":{"account_id":7612423,"reputation":82506,"user_id":5772882,"display_name":"Anonymous"},"score":0,"creation_date":1695162675,"post_id":77096003,"comment_id":135986566,"body_markdown":"Impossible to say. Do you know how to use a debugger?","body":"Impossible to say. Do you know how to use a debugger?"},{"owner":{"account_id":24475288,"reputation":1,"user_id":18394415,"display_name":"user18394415"},"score":0,"creation_date":1695620710,"post_id":77096003,"comment_id":136043442,"body_markdown":"Yes, but not much","body":"Yes, but not much"},{"owner":{"account_id":24475288,"reputation":1,"user_id":18394415,"display_name":"user18394415"},"score":0,"creation_date":1695620741,"post_id":77096003,"comment_id":136043446,"body_markdown":"I added this property: spring.jackson.datr-format=yyyy-MM-dd&#39;T&#39;HH:mm:ss.SSSZ, and it worked but now getting another issue - Cannot deserialize value of type java.util.date from string &quot;some value&quot; not a valid representation. Failed to par se Date value","body":"I added this property: spring.jackson.datr-format=yyyy-MM-dd&#39;T&#39;HH:mm:ss.SSSZ, and it worked but now getting another issue - Cannot deserialize value of type java.util.date from string &quot;some value&quot; not a valid representation. Failed to par se Date value"},{"owner":{"account_id":24475288,"reputation":1,"user_id":18394415,"display_name":"user18394415"},"score":0,"creation_date":1695638275,"post_id":77096003,"comment_id":136046513,"body_markdown":"This is coming after jackson version update from 2.9.5 to 2.15.2. Added the above property but it is not solving my problem. Any other suggestion?","body":"This is coming after jackson version update from 2.9.5 to 2.15.2. Added the above property but it is not solving my problem. Any other suggestion?"}],"owner":{"account_id":24475288,"reputation":1,"user_id":18394415,"display_name":"user18394415"},"comment_count":10,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":40,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1695162609,"creation_date":1694598984,"question_id":77096003,"body_markdown":"I&#39;ve updated few jars dependency and created the war. In the new war getting the issue-\r\n\r\n&gt; Unparseable date format -&quot;2023-08-30T01:30:00.000+00:00&quot; and working 2023-08-30T01:30:00.000+0000&quot;\r\n\r\nUTC offset issue- `2023-08-30T01:30:00.000+00:00` the `+0000` in the end is working but not the `+00:00`. Some parsing has been changed what it looks like as with previous version working and with new getting error because of `+00:00` is coming.\r\n\r\nBut when I rollback with the older one it was working fine. So, I suspect it is because of some jar update. \r\nUpdate few jars- mysqlconnector version, hibernateORM, bouncycastle, and few others but don&#39;t know which is causing this issue\r\n\r\nI tried to check which jar is causing this issue but didn&#39;t get anything yet to know what is causing the issue. Guessing any jar is causing the issue. New to all this and might be information is not sufficient. Any idea may help.","title":"Facing the issue with the UTC date format, using setdateformat(&quot;yyyy-MM-dd&#39;T&#39;HH:mm:ss.SSSZ&quot;)","body":"<p>I've updated few jars dependency and created the war. In the new war getting the issue-</p>\n<blockquote>\n<p>Unparseable date format -&quot;2023-08-30T01:30:00.000+00:00&quot; and working 2023-08-30T01:30:00.000+0000&quot;</p>\n</blockquote>\n<p>UTC offset issue- <code>2023-08-30T01:30:00.000+00:00</code> the <code>+0000</code> in the end is working but not the <code>+00:00</code>. Some parsing has been changed what it looks like as with previous version working and with new getting error because of <code>+00:00</code> is coming.</p>\n<p>But when I rollback with the older one it was working fine. So, I suspect it is because of some jar update.\nUpdate few jars- mysqlconnector version, hibernateORM, bouncycastle, and few others but don't know which is causing this issue</p>\n<p>I tried to check which jar is causing this issue but didn't get anything yet to know what is causing the issue. Guessing any jar is causing the issue. New to all this and might be information is not sufficient. Any idea may help.</p>\n"},{"tags":["java","sockets"],"comments":[{"owner":{"account_id":28104689,"reputation":512,"user_id":21473475,"display_name":"Arfur Narf"},"score":1,"creation_date":1695174975,"post_id":77138218,"comment_id":135987766,"body_markdown":"You&#39;ll need to figure out a way for each entity to assign a unique identifier for itself, and a protocol to communicate the id across the connection.","body":"You&#39;ll need to figure out a way for each entity to assign a unique identifier for itself, and a protocol to communicate the id across the connection."}],"owner":{"account_id":7527198,"reputation":1109,"user_id":5716914,"accept_rate":11,"display_name":"Johnyb"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":25,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1695161492,"creation_date":1695161492,"question_id":77138218,"body_markdown":"I am trying to create M:N socket clients, e.g N clients and each is connected to every other node. Basicly i will run my app N times with different info about other sockets so it can connect to other running instances of the app.\r\n\r\nFirst i want to accept socket connections so i create listening server:\r\n\r\n    public class SocketServer {\r\n        private ServerSocket serverSocket;\r\n        private List&lt;ClientSocketWrapper&gt; socketList = new ArrayList&lt;&gt;();\r\n    \r\n        public void start(int port) throws IOException {\r\n            serverSocket = new ServerSocket(port);\r\n            while (true) {\r\n                Socket clientSocket = serverSocket.accept();\r\n                ClientSocketWrapper clientSocketWrapper = new ClientSocketWrapper(clientSocket);\r\n                clientSocketWrapper.start();\r\n                socketList.add(clientSocketWrapper)\r\n            }\r\n        }\r\n    \r\n        public void stop() throws IOException {\r\n            in.close();\r\n            out.close();\r\n            serverSocket.close();\r\n            socketList.forEach(ClientSocketWrapper::close);\r\n        }\r\n    }\r\n\r\nWrapper for sockets:\r\n\r\n    public class ClientSocketWrapper {\r\n        private final Socket socket;\r\n        private final PrintWriter out;\r\n        private final BufferedReader in;\r\n        private Thread thread;\r\n    \r\n        public ClientSocketWrapper(Socket socket) throws IOException {\r\n            this.socket = socket;\r\n            out = new PrintWriter(socket.getOutputStream(), true);\r\n            in = new BufferedReader(new InputStreamReader(socket.getInputStream()));\r\n        }\r\n    \r\n        public void start() {\r\n            this.thread = new Thread(this::handleSocketMessages);\r\n            this.thread.start();\r\n        }\r\n    \r\n        public void sendMessage(String message) {\r\n            out.println(message);\r\n        }\r\n    \r\n        public void close() {\r\n            try {\r\n                in.close();\r\n                out.close();\r\n                socket.close();\r\n            } catch (IOException e) {\r\n                //\r\n            }\r\n        }\r\n    }\r\n\r\n\r\nNow i want to connect to other nodes:\r\n\r\n    private void startConnection(String ip, int port) {\r\n        Socket clientSocket = new Socket(ip, port);\r\n        ClientSocketWrapper clientSocketWrapper = new ClientSocketWrapper(clientSocket);\r\n        clientSocketWrapper.start();\r\n        socketList.add(clientSocketWrapper)\r\n    }\r\n\r\nNow lets omit the details and lets say `start` method and `startConnection` method are running in different threads. \r\n\r\nWhat can happen is:\r\n\r\n1) Instance A has the `start` method is running, connection from instnace B is accepted, and the socket is stored in list\r\n2) the instnace A issues connect to instnace B, that is also created and stored in the list.\r\n\r\nHowever now i basicly have two socket connections that are the same, e.g connection between two instances A and B.\r\n\r\nIf both intances of the application ran on different server, i could distinquish if connection exists using the IP address of node, and check if it already exists and if yes just close redundant connection. However if both of these instances run on localhost, well their IP is localhost, and port means nothing too.\r\n\r\nIs there some way how to check if the connection already exists? Or there is no such way if everything runs on same machine.\r\n\r\nThanks for help!","title":"How to detect if connection to client is already made with sockets","body":"<p>I am trying to create M:N socket clients, e.g N clients and each is connected to every other node. Basicly i will run my app N times with different info about other sockets so it can connect to other running instances of the app.</p>\n<p>First i want to accept socket connections so i create listening server:</p>\n<pre><code>public class SocketServer {\n    private ServerSocket serverSocket;\n    private List&lt;ClientSocketWrapper&gt; socketList = new ArrayList&lt;&gt;();\n\n    public void start(int port) throws IOException {\n        serverSocket = new ServerSocket(port);\n        while (true) {\n            Socket clientSocket = serverSocket.accept();\n            ClientSocketWrapper clientSocketWrapper = new ClientSocketWrapper(clientSocket);\n            clientSocketWrapper.start();\n            socketList.add(clientSocketWrapper)\n        }\n    }\n\n    public void stop() throws IOException {\n        in.close();\n        out.close();\n        serverSocket.close();\n        socketList.forEach(ClientSocketWrapper::close);\n    }\n}\n</code></pre>\n<p>Wrapper for sockets:</p>\n<pre><code>public class ClientSocketWrapper {\n    private final Socket socket;\n    private final PrintWriter out;\n    private final BufferedReader in;\n    private Thread thread;\n\n    public ClientSocketWrapper(Socket socket) throws IOException {\n        this.socket = socket;\n        out = new PrintWriter(socket.getOutputStream(), true);\n        in = new BufferedReader(new InputStreamReader(socket.getInputStream()));\n    }\n\n    public void start() {\n        this.thread = new Thread(this::handleSocketMessages);\n        this.thread.start();\n    }\n\n    public void sendMessage(String message) {\n        out.println(message);\n    }\n\n    public void close() {\n        try {\n            in.close();\n            out.close();\n            socket.close();\n        } catch (IOException e) {\n            //\n        }\n    }\n}\n</code></pre>\n<p>Now i want to connect to other nodes:</p>\n<pre><code>private void startConnection(String ip, int port) {\n    Socket clientSocket = new Socket(ip, port);\n    ClientSocketWrapper clientSocketWrapper = new ClientSocketWrapper(clientSocket);\n    clientSocketWrapper.start();\n    socketList.add(clientSocketWrapper)\n}\n</code></pre>\n<p>Now lets omit the details and lets say <code>start</code> method and <code>startConnection</code> method are running in different threads.</p>\n<p>What can happen is:</p>\n<ol>\n<li>Instance A has the <code>start</code> method is running, connection from instnace B is accepted, and the socket is stored in list</li>\n<li>the instnace A issues connect to instnace B, that is also created and stored in the list.</li>\n</ol>\n<p>However now i basicly have two socket connections that are the same, e.g connection between two instances A and B.</p>\n<p>If both intances of the application ran on different server, i could distinquish if connection exists using the IP address of node, and check if it already exists and if yes just close redundant connection. However if both of these instances run on localhost, well their IP is localhost, and port means nothing too.</p>\n<p>Is there some way how to check if the connection already exists? Or there is no such way if everything runs on same machine.</p>\n<p>Thanks for help!</p>\n"},{"tags":["java"],"answers":[{"comments":[{"owner":{"account_id":23740623,"reputation":1,"user_id":17758716,"display_name":"Reilas"},"score":1,"creation_date":1695161285,"post_id":77137400,"comment_id":135986365,"body_markdown":"As a note, you can refine the _stream_ invocations, `getPlayers().stream().filter(Player::canPlay).toList()`.","body":"As a note, you can refine the <i>stream</i> invocations, <code>getPlayers().stream().filter(Player::canPlay).toList()</code>."}],"tags":[],"owner":{"account_id":7801308,"reputation":462,"user_id":5900660,"accept_rate":100,"display_name":"Conor Egan"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1695151544,"creation_date":1695151236,"answer_id":77137400,"question_id":77137286,"body_markdown":"Assuming the Players class has a variable for whether the player can play, and the equivalent getter method. You can do the following using the Stream API:\r\n\r\n```Java\r\nteam.getPlayers().stream().filter(player -&gt; player.canPlay()).collect(Collectors.toList())\r\n```\r\n\r\nYou cannot call `playing()` on `getPlayers()` because it returns a `List&lt;Player&gt;`. So you can only call methods that apply for lists.\r\n\r\nI would suggest to create a function on the Team class, that returns the players that can still play:\r\n```Java\r\npublic List&lt;Player&gt; getPlayersThatCanPlay() {\r\n    return players.stream().filter(player -&gt; player.canPlay()).collect(Collectors.toList());\r\n}\r\n```","title":"Java subobject/submethod","body":"<p>Assuming the Players class has a variable for whether the player can play, and the equivalent getter method. You can do the following using the Stream API:</p>\n<pre><code>team.getPlayers().stream().filter(player -&gt; player.canPlay()).collect(Collectors.toList())\n</code></pre>\n<p>You cannot call <code>playing()</code> on <code>getPlayers()</code> because it returns a <code>List&lt;Player&gt;</code>. So you can only call methods that apply for lists.</p>\n<p>I would suggest to create a function on the Team class, that returns the players that can still play:</p>\n<pre><code>public List&lt;Player&gt; getPlayersThatCanPlay() {\n    return players.stream().filter(player -&gt; player.canPlay()).collect(Collectors.toList());\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":23740623,"reputation":1,"user_id":17758716,"display_name":"Reilas"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695161011,"creation_date":1695161011,"answer_id":77138193,"question_id":77137286,"body_markdown":"&gt; _&quot;... I would need help because I don&#39;t know how to make a submethod when I want something().nic(), for example. ... This method should return a list of players who can still play. ...&quot;_\r\n\r\nYou could _encapsulate_ an _ArrayList_, and add a _playing_ method.\r\n\r\n```java\r\nprivate final PlayersList&lt;?&gt; players;\r\nstatic class PlayersList&lt;T extends Player&gt; extends ArrayList&lt;Player&gt; {\r\n    Player[] playing() {\r\n        return (Player[]) stream().filter(Player::isPlaying).toArray();\r\n    }\r\n}\r\n```\r\n\r\nAnd, as a recommendation, use a _static import_ for the _TeamColor_ enum.\r\n\r\n```java\r\nimport static Team.TeamColor.*;\r\n```\r\n\r\n```java\r\nt_colors = { WHITE, AQUA, YELLOW, GREEN, BLUE, RED, GRAY, PINK};\r\n```\r\n\r\nAlso, ","title":"Java subobject/submethod","body":"<blockquote>\n<p><em>&quot;... I would need help because I don't know how to make a submethod when I want something().nic(), for example. ... This method should return a list of players who can still play. ...&quot;</em></p>\n</blockquote>\n<p>You could <em>encapsulate</em> an <em>ArrayList</em>, and add a <em>playing</em> method.</p>\n<pre class=\"lang-java prettyprint-override\"><code>private final PlayersList&lt;?&gt; players;\nstatic class PlayersList&lt;T extends Player&gt; extends ArrayList&lt;Player&gt; {\n    Player[] playing() {\n        return (Player[]) stream().filter(Player::isPlaying).toArray();\n    }\n}\n</code></pre>\n<p>And, as a recommendation, use a <em>static import</em> for the <em>TeamColor</em> enum.</p>\n<pre class=\"lang-java prettyprint-override\"><code>import static Team.TeamColor.*;\n</code></pre>\n<pre class=\"lang-java prettyprint-override\"><code>t_colors = { WHITE, AQUA, YELLOW, GREEN, BLUE, RED, GRAY, PINK};\n</code></pre>\n<p>Also,</p>\n"}],"owner":{"account_id":29483861,"reputation":1,"user_id":22594231,"display_name":"Developer Team"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":34,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":2,"score":-1,"last_activity_date":1695161011,"creation_date":1695150007,"question_id":77137286,"body_markdown":"I would need help because I don&#39;t know how to make a submethod when I want something().nic(), for example. So I would need advice on how to do such a thing. My Code is below. And I would need to do `team.getPlayers().playing()`. This method should return a list of players who can still play.\r\n\r\nMy code:\r\n\r\n```Java\r\npackage net.malejmarabu.gs.games.files;\r\n\r\nimport org.bukkit.entity.Player;\r\n\r\nimport javax.annotation.Nullable;\r\nimport java.util.HashMap;\r\nimport java.util.List;\r\n\r\npublic class Team {\r\n    public enum TeamColor {\r\n        RED,\r\n        BLUE,\r\n        GREEN,\r\n        PINK,\r\n        YELLOW,\r\n        WHITE,\r\n        GRAY,\r\n        AQUA\r\n    }\r\n\r\n    public class TeamData {\r\n        public static Team getTeamByColor(Game game, TeamColor color) {\r\n            return teamsByColor.get(game).get(color);\r\n        }\r\n\r\n        public static Team getTeamByPlayer(Player player) {\r\n            return teamByPlayer.get(player);\r\n        }\r\n\r\n        public final static TeamColor[] t_colors = {TeamColor.WHITE, TeamColor.AQUA, TeamColor.YELLOW, TeamColor.GREEN, TeamColor.BLUE, TeamColor.RED, TeamColor.GRAY, TeamColor.PINK};\r\n    }\r\n\r\n    private static final HashMap&lt;Game, HashMap&lt;TeamColor, Team&gt;&gt; teamsByColor = new HashMap&lt;&gt;();\r\n    private static final HashMap&lt;Player, Team&gt; teamByPlayer = new HashMap&lt;&gt;();;\r\n\r\n    private final TeamColor color;\r\n    private int status = 0;\r\n    private final List&lt;Player&gt; players;\r\n    private final Game game;\r\n\r\n    public Team(TeamColor colour, Game game, @Nullable List&lt;Player&gt; players) {\r\n        this.color = colour;\r\n        this.players = players;\r\n        this.game = game;\r\n        status = 2;\r\n\r\n        teamsByColor.put(game, new HashMap&lt;TeamColor, Team&gt;());\r\n        teamsByColor.get(game).put(colour, this);\r\n\r\n        for (Player player : players) {\r\n            if (teamByPlayer.containsKey(player)) {\r\n                teamByPlayer.remove(player);\r\n            }\r\n\r\n            teamByPlayer.put(player, this);\r\n        }\r\n    }\r\n\r\n    public TeamColor getColor() {\r\n        return color;\r\n    }\r\n\r\n    public int getStatus() {\r\n        return status;\r\n    }\r\n\r\n    public void setStatus(int status) {\r\n        this.status = status;\r\n    }\r\n\r\n    public void addPlayer(Player player) {\r\n        players.add(player);\r\n        teamByPlayer.put(player, this);\r\n    }\r\n\r\n    public void removePlayer(Player player) {\r\n        players.remove(player);\r\n        teamByPlayer.remove(player);\r\n    }\r\n\r\n    public List&lt;Player&gt; getPlayers() {\r\n      return players;\r\n    }\r\n}\r\n```\r\n\r\nI tried to use AI and I also searched on google, but I couldn&#39;t find anything.I don&#39;t know how to proceed, please help.","title":"Java subobject/submethod","body":"<p>I would need help because I don't know how to make a submethod when I want something().nic(), for example. So I would need advice on how to do such a thing. My Code is below. And I would need to do <code>team.getPlayers().playing()</code>. This method should return a list of players who can still play.</p>\n<p>My code:</p>\n<pre><code>package net.malejmarabu.gs.games.files;\n\nimport org.bukkit.entity.Player;\n\nimport javax.annotation.Nullable;\nimport java.util.HashMap;\nimport java.util.List;\n\npublic class Team {\n    public enum TeamColor {\n        RED,\n        BLUE,\n        GREEN,\n        PINK,\n        YELLOW,\n        WHITE,\n        GRAY,\n        AQUA\n    }\n\n    public class TeamData {\n        public static Team getTeamByColor(Game game, TeamColor color) {\n            return teamsByColor.get(game).get(color);\n        }\n\n        public static Team getTeamByPlayer(Player player) {\n            return teamByPlayer.get(player);\n        }\n\n        public final static TeamColor[] t_colors = {TeamColor.WHITE, TeamColor.AQUA, TeamColor.YELLOW, TeamColor.GREEN, TeamColor.BLUE, TeamColor.RED, TeamColor.GRAY, TeamColor.PINK};\n    }\n\n    private static final HashMap&lt;Game, HashMap&lt;TeamColor, Team&gt;&gt; teamsByColor = new HashMap&lt;&gt;();\n    private static final HashMap&lt;Player, Team&gt; teamByPlayer = new HashMap&lt;&gt;();;\n\n    private final TeamColor color;\n    private int status = 0;\n    private final List&lt;Player&gt; players;\n    private final Game game;\n\n    public Team(TeamColor colour, Game game, @Nullable List&lt;Player&gt; players) {\n        this.color = colour;\n        this.players = players;\n        this.game = game;\n        status = 2;\n\n        teamsByColor.put(game, new HashMap&lt;TeamColor, Team&gt;());\n        teamsByColor.get(game).put(colour, this);\n\n        for (Player player : players) {\n            if (teamByPlayer.containsKey(player)) {\n                teamByPlayer.remove(player);\n            }\n\n            teamByPlayer.put(player, this);\n        }\n    }\n\n    public TeamColor getColor() {\n        return color;\n    }\n\n    public int getStatus() {\n        return status;\n    }\n\n    public void setStatus(int status) {\n        this.status = status;\n    }\n\n    public void addPlayer(Player player) {\n        players.add(player);\n        teamByPlayer.put(player, this);\n    }\n\n    public void removePlayer(Player player) {\n        players.remove(player);\n        teamByPlayer.remove(player);\n    }\n\n    public List&lt;Player&gt; getPlayers() {\n      return players;\n    }\n}\n</code></pre>\n<p>I tried to use AI and I also searched on google, but I couldn't find anything.I don't know how to proceed, please help.</p>\n"},{"tags":["java","json","spring","jackson","deserialization"],"owner":{"account_id":1469678,"reputation":53,"user_id":1381544,"display_name":"adityajava6"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":93,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1695160986,"creation_date":1694960570,"question_id":77122208,"body_markdown":"Attempting to deserialize input Json having nested fields and different field names. Hoping for a way to deserilize using JsonPointer espression (because it allows path lookup).\r\n\r\nSeveral approaches tried but none of them worked so far.\r\n\r\n- Using AnnotationIntrospector = introspector gets invoked which returns a custom deserializer from overridden findDeserializer(). However, custom JsonDeserialiser.deserialize() never invoked on mapper.readValue()\r\n\r\n- Using ContextualDeserilizer = it gets invoked which returns a custom deserializer. However, custom JsonDeserialiser.deserialize() never invoked on mapper.readValue()\r\n\r\nThe custom deserialiser only invoked when it is declared on the class (not on field).\r\n\r\nReferences: Most of them are related to serialization, however the use case is for deserialization.\r\n\r\nhttps://stackoverflow.com/questions/43342097/jackson-custom-annotation-for-custom-value-serialization\r\n \r\nhttps://stackoverflow.com/questions/34965201/customize-jackson-objectmapper-to-read-custom-annotation-and-mask-fields-annotat\r\n \r\nhttps://stackoverflow.com/questions/63362602/how-to-perform-a-custom-json-deserialization-with-jackson-that-respects-a-custom\r\n\r\nhttps://stackoverflow.com/questions/76120278/jackson-custom-writer-for-annotation?newreg=b53a8ee8da3046f6be22db82e9e34a55\r\n\r\nhttps://bsideup.github.io/posts/custom_jackson_annotations/\r\n\r\nhttps://www.baeldung.com/spring-boot-customize-jackson-objectmapper\r\n\r\nhttps://github.com/arthureffting/custom-serialization-demo/blob/master/src/main/java/com/example/globalserialization/demo/serialization/MyCustomSerializer.java\r\n\r\nFollowing are classes:\r\nUsing jackson with lombok\r\n\r\n```java\r\n// custom annotation\r\n\r\n@Target({ElementType.FIELD})\r\n@Retention(RetentionPolicy.RUNTIME)\r\n@Documented\r\npublic @interface JsonPointerProperty {\r\n\r\n    String value();\r\n}\r\n\r\n// Person POJO\r\n\r\n@Data\r\n@NoArgsConstructor\r\n@AllArgsConstructor\r\n@JsonIgnoreProperties(ignoreUnknown = true)\r\npublic class Person {\r\n    private String name;\r\n    private Address address;\r\n}\r\n\r\n// Address POJO\r\n\r\n@Data\r\n@NoArgsConstructor\r\n@AllArgsConstructor\r\n@JsonIgnoreProperties(ignoreUnknown = true)\r\npublic class Address {\r\n\r\n// using custom annotation\r\n    @JsonPointerProperty(&quot;/requestModel/streetName&quot;)\r\n    private String street;\r\n    private String city;\r\n    private String postcode;\r\n}\r\n```\r\n\r\n```java\r\n// introspector \r\n\r\npublic class JsonPointerPropertyIntrospector\r\n        extends NopAnnotationIntrospector {\r\n\r\n    @Override\r\n    public Object findDeserializer(Annotated am) {\r\n\r\n        final JsonPointerProperty jsonPointerProperty = am.getAnnotation(JsonPointerProperty.class);\r\n        if (jsonPointerProperty != null) {\r\n            return new JsonPointerPropertyDeserializer(\r\n                    jsonPointerProperty.value(),\r\n                    am.getType().getRawClass()\r\n            );\r\n        }\r\n\r\n        return super.findDeserializer(am);\r\n    }\r\n}\r\n\r\n// custom deserializer\r\npublic class JsonPointerPropertyDeserializer\r\n        extends JsonDeserializer&lt;Object&gt; {\r\n\r\n    private final String jsonPath;\r\n    private final Class&lt;?&gt; clazz;\r\n\r\n    public JsonPointerPropertyDeserializer() {\r\n        this(null, null);\r\n    }\r\n\r\n    public JsonPointerPropertyDeserializer(String jsonPath,\r\n                                           Class&lt;?&gt; clazz) {\r\n        this.jsonPath = jsonPath;\r\n        this.clazz = clazz;\r\n    }\r\n\r\n    @Override\r\n    public Object deserialize(JsonParser parser, DeserializationContext ctx)\r\n            throws IOException, JacksonException {\r\n\r\n        // not reaching here\r\n        JsonNode jsonNode = parser.readValueAs(JsonNode.class);\r\n        JsonNode at = jsonNode.at(jsonPath);\r\n\r\n        String value = ctx.readTreeAsValue(jsonNode, String.class);\r\n\r\n        System.out.println(value);\r\n\r\n        return null;\r\n    }\r\n}\r\n```\r\n\r\nThe actual data contains nested level objects having different field names.\r\n\r\n```java\r\n\r\n// Unit test\r\n\r\nclass PersonTest {\r\n    String json;\r\n\r\n    @BeforeEach\r\n    void setup() throws IOException {\r\n        json = &quot;{ &#39;address&#39;: { &#39;requestModel&#39;: { &#39;streetName&#39;: &#39;some street&#39;, &#39;cityName&#39;: &#39;some city&#39; }}}&quot;\r\n                .replace(\r\n                &quot;&#39;&quot;,\r\n                &quot;\\&quot;&quot;\r\n        );\r\n    }\r\n\r\n    @Test\r\n    void testPerson() throws JsonProcessingException {\r\n        ObjectMapper mapper = new ObjectMapper();\r\n        mapper.setAnnotationIntrospector(new JsonPointerPropertyIntrospector());\r\n\r\n        final Person person = mapper.readValue(json, Person.class);\r\n\r\n        assertEquals(&quot;some street&quot;, person.getAddress().getStreet(), &quot;Street mismatch&quot;);\r\n    }\r\n}\r\n```\r\n\r\nThere is some error parsing `requestModel` which I need to figure out (maybe use JsonSetter or JsonProperty?), but I was hoping it would at least reach to custom deserializer.\r\n\r\nAppreciate your time and any suggestions.\r\n\r\n","title":"Jackson custom annotation for field level deserialization","body":"<p>Attempting to deserialize input Json having nested fields and different field names. Hoping for a way to deserilize using JsonPointer espression (because it allows path lookup).</p>\n<p>Several approaches tried but none of them worked so far.</p>\n<ul>\n<li><p>Using AnnotationIntrospector = introspector gets invoked which returns a custom deserializer from overridden findDeserializer(). However, custom JsonDeserialiser.deserialize() never invoked on mapper.readValue()</p>\n</li>\n<li><p>Using ContextualDeserilizer = it gets invoked which returns a custom deserializer. However, custom JsonDeserialiser.deserialize() never invoked on mapper.readValue()</p>\n</li>\n</ul>\n<p>The custom deserialiser only invoked when it is declared on the class (not on field).</p>\n<p>References: Most of them are related to serialization, however the use case is for deserialization.</p>\n<p><a href=\"https://stackoverflow.com/questions/43342097/jackson-custom-annotation-for-custom-value-serialization\">Jackson custom annotation for custom value serialization</a></p>\n<p><a href=\"https://stackoverflow.com/questions/34965201/customize-jackson-objectmapper-to-read-custom-annotation-and-mask-fields-annotat\">Customize Jackson ObjectMapper to Read custom Annotation and mask fields annotated</a></p>\n<p><a href=\"https://stackoverflow.com/questions/63362602/how-to-perform-a-custom-json-deserialization-with-jackson-that-respects-a-custom\">How to perform a custom JSON deserialization with Jackson that respects a custom annotation?</a></p>\n<p><a href=\"https://stackoverflow.com/questions/76120278/jackson-custom-writer-for-annotation?newreg=b53a8ee8da3046f6be22db82e9e34a55\">Jackson, custom &quot;writer&quot; for annotation</a></p>\n<p><a href=\"https://bsideup.github.io/posts/custom_jackson_annotations/\" rel=\"nofollow noreferrer\">https://bsideup.github.io/posts/custom_jackson_annotations/</a></p>\n<p><a href=\"https://www.baeldung.com/spring-boot-customize-jackson-objectmapper\" rel=\"nofollow noreferrer\">https://www.baeldung.com/spring-boot-customize-jackson-objectmapper</a></p>\n<p><a href=\"https://github.com/arthureffting/custom-serialization-demo/blob/master/src/main/java/com/example/globalserialization/demo/serialization/MyCustomSerializer.java\" rel=\"nofollow noreferrer\">https://github.com/arthureffting/custom-serialization-demo/blob/master/src/main/java/com/example/globalserialization/demo/serialization/MyCustomSerializer.java</a></p>\n<p>Following are classes:\nUsing jackson with lombok</p>\n<pre class=\"lang-java prettyprint-override\"><code>// custom annotation\n\n@Target({ElementType.FIELD})\n@Retention(RetentionPolicy.RUNTIME)\n@Documented\npublic @interface JsonPointerProperty {\n\n    String value();\n}\n\n// Person POJO\n\n@Data\n@NoArgsConstructor\n@AllArgsConstructor\n@JsonIgnoreProperties(ignoreUnknown = true)\npublic class Person {\n    private String name;\n    private Address address;\n}\n\n// Address POJO\n\n@Data\n@NoArgsConstructor\n@AllArgsConstructor\n@JsonIgnoreProperties(ignoreUnknown = true)\npublic class Address {\n\n// using custom annotation\n    @JsonPointerProperty(&quot;/requestModel/streetName&quot;)\n    private String street;\n    private String city;\n    private String postcode;\n}\n</code></pre>\n<pre class=\"lang-java prettyprint-override\"><code>// introspector \n\npublic class JsonPointerPropertyIntrospector\n        extends NopAnnotationIntrospector {\n\n    @Override\n    public Object findDeserializer(Annotated am) {\n\n        final JsonPointerProperty jsonPointerProperty = am.getAnnotation(JsonPointerProperty.class);\n        if (jsonPointerProperty != null) {\n            return new JsonPointerPropertyDeserializer(\n                    jsonPointerProperty.value(),\n                    am.getType().getRawClass()\n            );\n        }\n\n        return super.findDeserializer(am);\n    }\n}\n\n// custom deserializer\npublic class JsonPointerPropertyDeserializer\n        extends JsonDeserializer&lt;Object&gt; {\n\n    private final String jsonPath;\n    private final Class&lt;?&gt; clazz;\n\n    public JsonPointerPropertyDeserializer() {\n        this(null, null);\n    }\n\n    public JsonPointerPropertyDeserializer(String jsonPath,\n                                           Class&lt;?&gt; clazz) {\n        this.jsonPath = jsonPath;\n        this.clazz = clazz;\n    }\n\n    @Override\n    public Object deserialize(JsonParser parser, DeserializationContext ctx)\n            throws IOException, JacksonException {\n\n        // not reaching here\n        JsonNode jsonNode = parser.readValueAs(JsonNode.class);\n        JsonNode at = jsonNode.at(jsonPath);\n\n        String value = ctx.readTreeAsValue(jsonNode, String.class);\n\n        System.out.println(value);\n\n        return null;\n    }\n}\n</code></pre>\n<p>The actual data contains nested level objects having different field names.</p>\n<pre class=\"lang-java prettyprint-override\"><code>\n// Unit test\n\nclass PersonTest {\n    String json;\n\n    @BeforeEach\n    void setup() throws IOException {\n        json = &quot;{ 'address': { 'requestModel': { 'streetName': 'some street', 'cityName': 'some city' }}}&quot;\n                .replace(\n                &quot;'&quot;,\n                &quot;\\&quot;&quot;\n        );\n    }\n\n    @Test\n    void testPerson() throws JsonProcessingException {\n        ObjectMapper mapper = new ObjectMapper();\n        mapper.setAnnotationIntrospector(new JsonPointerPropertyIntrospector());\n\n        final Person person = mapper.readValue(json, Person.class);\n\n        assertEquals(&quot;some street&quot;, person.getAddress().getStreet(), &quot;Street mismatch&quot;);\n    }\n}\n</code></pre>\n<p>There is some error parsing <code>requestModel</code> which I need to figure out (maybe use JsonSetter or JsonProperty?), but I was hoping it would at least reach to custom deserializer.</p>\n<p>Appreciate your time and any suggestions.</p>\n"},{"tags":["java","android","layout"],"answers":[{"tags":[],"owner":{"account_id":353777,"reputation":64351,"user_id":691688,"accept_rate":80,"display_name":"Femi"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1304268325,"creation_date":1304268325,"answer_id":5849793,"question_id":5849763,"body_markdown":"http://developer.android.com/reference/android/app/Activity.html#onConfigurationChanged%28android.content.res.Configuration%29\r\n\r\nEDIT: in code (add this to your Activity):\r\n\r\n    @Override\r\n    public void onConfigurationChanged(Configuration _newConfig){\r\n            super.onConfigurationChanged(_newConfig);\r\n            int height = getWindowManager().getDefaultDisplay().getHeight();\r\n            int width = getWindowManager().getDefaultDisplay().getWidth();\r\n            if(width &gt; height){\r\n                    // landscape\r\n            }else{\r\n                    // portrait\r\n            }\r\n    }","title":"How do i create Screen Orientation Awareness in android?","body":"<p><a href=\"http://developer.android.com/reference/android/app/Activity.html#onConfigurationChanged%28android.content.res.Configuration%29\" rel=\"nofollow\">http://developer.android.com/reference/android/app/Activity.html#onConfigurationChanged%28android.content.res.Configuration%29</a></p>\n\n<p>EDIT: in code (add this to your Activity):</p>\n\n<pre><code>@Override\npublic void onConfigurationChanged(Configuration _newConfig){\n        super.onConfigurationChanged(_newConfig);\n        int height = getWindowManager().getDefaultDisplay().getHeight();\n        int width = getWindowManager().getDefaultDisplay().getWidth();\n        if(width &gt; height){\n                // landscape\n        }else{\n                // portrait\n        }\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":374998,"reputation":37,"user_id":725548,"accept_rate":89,"display_name":"zack"},"score":0,"creation_date":1304269975,"post_id":5849816,"comment_id":6720586,"body_markdown":"and @Femi thanks for your reply but if i happen that my screen is just a tab screen with multiple PreferenceActivity which i just wanted the screen to just orientate its position for the cause of the phone position how would i do that?","body":"and @Femi thanks for your reply but if i happen that my screen is just a tab screen with multiple PreferenceActivity which i just wanted the screen to just orientate its position for the cause of the phone position how would i do that?"}],"tags":[],"owner":{"account_id":120213,"reputation":24354,"user_id":312499,"accept_rate":89,"display_name":"yydl"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1304268511,"creation_date":1304268511,"answer_id":5849816,"question_id":5849763,"body_markdown":"Android will automatically recreate (destroy and then create) your activity when the orientation changes. If you want a special layout for landscape, you can create a special resource file in the `layout-land` folder, which will be loaded after the activity is recreated.\r\n\r\nOn the other hand, if you want to override the default behavior so that you can do something custom when the orientation changes, you can override the onConfigurationChanged method like so:\r\n\r\n    @Override\r\n    public void onConfigurationChanged(Configuration newConfig) {\r\n        super.onConfigurationChanged(newConfig);\r\n        if(newConfig.orientation == Configuration.ORIENTATION_PORTRAIT){\r\n            //do something if portrait...\r\n        }\r\n    }","title":"How do i create Screen Orientation Awareness in android?","body":"<p>Android will automatically recreate (destroy and then create) your activity when the orientation changes. If you want a special layout for landscape, you can create a special resource file in the <code>layout-land</code> folder, which will be loaded after the activity is recreated.</p>\n\n<p>On the other hand, if you want to override the default behavior so that you can do something custom when the orientation changes, you can override the onConfigurationChanged method like so:</p>\n\n<pre><code>@Override\npublic void onConfigurationChanged(Configuration newConfig) {\n    super.onConfigurationChanged(newConfig);\n    if(newConfig.orientation == Configuration.ORIENTATION_PORTRAIT){\n        //do something if portrait...\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":29394488,"reputation":3,"user_id":22522142,"display_name":"wiefunkdai"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695160805,"creation_date":1695160376,"answer_id":77138159,"question_id":5849763,"body_markdown":"With pleasure, this is my recomendation for better run detect orientation when changed device mode. You can use code at bellow, then you will take that what do you want:\r\n\r\n    class MyActivity extends AppCompatActivity {\r\n        @Override\r\n        public void onCreate(@Nullable Bundle savedInstanceState, @Nullable PersistableBundle persistentState) {\r\n            super.onCreate(savedInstanceState, persistentState);\r\n            OrientationEventListener orientationListener =\r\n                    new OrientationEventListener(this, SensorManager.SENSOR_DELAY_UI) {\r\n                        @Override\r\n                        public void onOrientationChanged(int orientation) {\r\n                            if (orientation == 0 || orientation == 180) {\r\n                                Log.e(this.toString(), &quot;Orientation Device is POTRAIT&quot;);\r\n                                // TODO your action at here when device has been change to POTRAIT mdoe. \r\n                            } else {\r\n                                Log.e(this.toString(), &quot;Orientation Device is LANDSCAPE&quot;);\r\n                                // TODO your action at here when device has been change to LANDSCAPE mdoe.\r\n                            }\r\n                        }\r\n                    };\r\n            if(orientationListener.canDetectOrientation()) {\r\n                orientationListener.enable();\r\n            }\r\n        }\r\n    }\r\n\r\nIf you want to use code as a method, you can also use the formula below:\r\n\r\n    public static final void runOrientationChangedService(Context context, OrientationEventListener listener) {\r\n        OrientationEventListener orientationListener =\r\n                new OrientationEventListener(context, SensorManager.SENSOR_DELAY_UI) {\r\n                    @Override\r\n                    public void onOrientationChanged(int orientation) {\r\n                        listener.onOrientationChanged(orientation);\r\n                    }\r\n                };\r\n        if(orientationListener.canDetectOrientation()) {\r\n            orientationListener.enable();\r\n            listener.enable();\r\n        }\r\n    }\r\n\r\nRun the service as a method, then we need a role or callback argument instead.","title":"How do i create Screen Orientation Awareness in android?","body":"<p>With pleasure, this is my recomendation for better run detect orientation when changed device mode. You can use code at bellow, then you will take that what do you want:</p>\n<pre><code>class MyActivity extends AppCompatActivity {\n    @Override\n    public void onCreate(@Nullable Bundle savedInstanceState, @Nullable PersistableBundle persistentState) {\n        super.onCreate(savedInstanceState, persistentState);\n        OrientationEventListener orientationListener =\n                new OrientationEventListener(this, SensorManager.SENSOR_DELAY_UI) {\n                    @Override\n                    public void onOrientationChanged(int orientation) {\n                        if (orientation == 0 || orientation == 180) {\n                            Log.e(this.toString(), &quot;Orientation Device is POTRAIT&quot;);\n                            // TODO your action at here when device has been change to POTRAIT mdoe. \n                        } else {\n                            Log.e(this.toString(), &quot;Orientation Device is LANDSCAPE&quot;);\n                            // TODO your action at here when device has been change to LANDSCAPE mdoe.\n                        }\n                    }\n                };\n        if(orientationListener.canDetectOrientation()) {\n            orientationListener.enable();\n        }\n    }\n}\n</code></pre>\n<p>If you want to use code as a method, you can also use the formula below:</p>\n<pre><code>public static final void runOrientationChangedService(Context context, OrientationEventListener listener) {\n    OrientationEventListener orientationListener =\n            new OrientationEventListener(context, SensorManager.SENSOR_DELAY_UI) {\n                @Override\n                public void onOrientationChanged(int orientation) {\n                    listener.onOrientationChanged(orientation);\n                }\n            };\n    if(orientationListener.canDetectOrientation()) {\n        orientationListener.enable();\n        listener.enable();\n    }\n}\n</code></pre>\n<p>Run the service as a method, then we need a role or callback argument instead.</p>\n"}],"owner":{"account_id":374998,"reputation":37,"user_id":725548,"accept_rate":89,"display_name":"zack"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":256,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":5849816,"answer_count":3,"score":1,"last_activity_date":1695160805,"creation_date":1304268059,"question_id":5849763,"body_markdown":"How do you detect that the user has changed the orientation of the display screen from portrait to landscape and vice versa?\r\n\r\nThe Android application must adjust to the new orientation. The system should be sending a change of orientation message to all open applications so that they can adjust. I could not find anything about this in the docs? Sorry if i copy these statement from somewhere else but i&#39;m kinna new ina android/java, can someone guide me along?\r\n\r\n\r\nIts just one of the Preference screen in multiple tabs i have, but i just want mere change of screen orientation when the phone position changes...\r\n\r\n    public class Tab2Activity extends PreferenceActivity {\r\n    \t\r\n        @Override\r\n        public void onCreate(Bundle savedInstanceState) {\r\n            super.onCreate(savedInstanceState);\r\n            addPreferencesFromResource(R.xml.tab2);\r\n        }\r\n\r\n    }","title":"How do i create Screen Orientation Awareness in android?","body":"<p>How do you detect that the user has changed the orientation of the display screen from portrait to landscape and vice versa?</p>\n\n<p>The Android application must adjust to the new orientation. The system should be sending a change of orientation message to all open applications so that they can adjust. I could not find anything about this in the docs? Sorry if i copy these statement from somewhere else but i'm kinna new ina android/java, can someone guide me along?</p>\n\n<p>Its just one of the Preference screen in multiple tabs i have, but i just want mere change of screen orientation when the phone position changes...</p>\n\n<pre><code>public class Tab2Activity extends PreferenceActivity {\n\n    @Override\n    public void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        addPreferencesFromResource(R.xml.tab2);\n    }\n\n}\n</code></pre>\n"},{"tags":["java","csv","split"],"comments":[{"owner":{"account_id":916642,"reputation":15473,"user_id":949300,"accept_rate":65,"display_name":"user949300"},"score":6,"creation_date":1364799365,"post_id":15738918,"comment_id":22363244,"body_markdown":"Why do you insist on using String.split?  There are far better options for this example?","body":"Why do you insist on using String.split?  There are far better options for this example?"}],"answers":[{"comments":[{"owner":{"account_id":4405100,"reputation":1990,"user_id":3589749,"accept_rate":67,"display_name":"abhishek ringsia"},"score":0,"creation_date":1443430378,"post_id":15739042,"comment_id":53474004,"body_markdown":"for reading csv file it is working fine .if you have this type of format    987663,seepzBranch,&quot;Seepz mumbai,andheri&quot;,&quot;near infra, flat no 23,raghilla mall thane&quot;,seepz,","body":"for reading csv file it is working fine .if you have this type of format    987663,seepzBranch,&quot;Seepz mumbai,andheri&quot;,&quot;near infra, flat no 23,raghilla mall thane&quot;,seepz,"}],"tags":[],"owner":{"account_id":281244,"reputation":38779,"user_id":577423,"display_name":"Howard"},"comment_count":1,"down_vote_count":0,"up_vote_count":11,"is_accepted":false,"score":11,"last_activity_date":1364799473,"creation_date":1364799473,"answer_id":15739042,"question_id":15738918,"body_markdown":"If your strings are all well-formed it is possible with the following regular expression:\r\n\r\n    String[] res = str.split(&quot;,(?=([^\\&quot;]|\\&quot;[^\\&quot;]*\\&quot;)*$)&quot;);\r\n\r\nThe expression ensures that a split occurs only at commas which are followed by an even (or zero) number of quotes (and thus not inside such quotes).\r\n\r\nNevertheless, it may be easier to use a simple non-regex parser.","title":"Splitting a csv file with quotes as text-delimiter using String.split()","body":"<p>If your strings are all well-formed it is possible with the following regular expression:</p>\n\n<pre><code>String[] res = str.split(\",(?=([^\\\"]|\\\"[^\\\"]*\\\")*$)\");\n</code></pre>\n\n<p>The expression ensures that a split occurs only at commas which are followed by an even (or zero) number of quotes (and thus not inside such quotes).</p>\n\n<p>Nevertheless, it may be easier to use a simple non-regex parser.</p>\n"},{"comments":[{"owner":{"account_id":3070183,"reputation":195,"user_id":2601049,"accept_rate":86,"display_name":"glyphx"},"score":10,"creation_date":1415288381,"post_id":15739087,"comment_id":42143730,"body_markdown":"It took me a while to figure out what this regex was doing.  It would have helped me greatly to have the explanation that it matches commas that are followed by an even number of quotes (or no quotes).  So this works because comma&#39;s inside quotes (i.e. the ones we don&#39;t want to match/split on) should have an odd number of quotes between them and the end of the line.  It also might be worth noting that I believe this would not work if the data could have escaped quotes in it.","body":"It took me a while to figure out what this regex was doing.  It would have helped me greatly to have the explanation that it matches commas that are followed by an even number of quotes (or no quotes).  So this works because comma&#39;s inside quotes (i.e. the ones we don&#39;t want to match/split on) should have an odd number of quotes between them and the end of the line.  It also might be worth noting that I believe this would not work if the data could have escaped quotes in it."},{"owner":{"account_id":35714,"reputation":10973,"user_id":101251,"accept_rate":59,"display_name":"kctang"},"score":4,"creation_date":1417059516,"post_id":15739087,"comment_id":42818447,"body_markdown":"Do this s.split(&#39;,(?=([^\\&quot;]*\\&quot;[^\\&quot;]*\\&quot;)*[^\\&quot;]*$)&#39;, -1) if you want to preserve empty strings at the end. http://stackoverflow.com/questions/13939675/java-string-split-i-want-it-to-include-the-empty-strings-at-the-end","body":"Do this s.split(&#39;,(?=([^\\&quot;]*\\&quot;[^\\&quot;]*\\&quot;)*[^\\&quot;]*$)&#39;, -1) if you want to preserve empty strings at the end. <a href=\"http://stackoverflow.com/questions/13939675/java-string-split-i-want-it-to-include-the-empty-strings-at-the-end\" title=\"java string split i want it to include the empty strings at the end\">stackoverflow.com/questions/13939675/&hellip;</a>"},{"owner":{"account_id":93255,"reputation":8911,"user_id":255244,"accept_rate":93,"display_name":"Marty Neal"},"score":1,"creation_date":1453400759,"post_id":15739087,"comment_id":57595850,"body_markdown":"Very helpful.  I needed to add `?:` to the inner group when doing this in javascript, so the full expression becomes `s.split(/,(?=(?:[^\\&quot;]*\\&quot;[^\\&quot;]*\\&quot;)*[^\\&quot;]*$)/);`","body":"Very helpful.  I needed to add <code>?:</code> to the inner group when doing this in javascript, so the full expression becomes <code>s.split(&#47;,(?=(?:[^\\&quot;]*\\&quot;[^\\&quot;]*\\&quot;)*[^\\&quot;]*$)&#47;);</code>"},{"owner":{"account_id":7591227,"reputation":363,"user_id":5758839,"accept_rate":79,"display_name":"Ashton"},"score":0,"creation_date":1462986801,"post_id":15739087,"comment_id":61873327,"body_markdown":"How would I get this to work if some of my fields actually contain quotes in them too? It is working for everything except it is now splitting at where some of the names in my Customer fields have &quot; &quot;. Example is: Montgomery County Sheriff&#39;s Office KS &quot;Montgomery PD, AL&quot; where it is splitting at &quot;Montgomery PD, AL&quot; and putting it at it&#39;s own line but it should not :/ @glyphx","body":"How would I get this to work if some of my fields actually contain quotes in them too? It is working for everything except it is now splitting at where some of the names in my Customer fields have &quot; &quot;. Example is: Montgomery County Sheriff&#39;s Office KS &quot;Montgomery PD, AL&quot; where it is splitting at &quot;Montgomery PD, AL&quot; and putting it at it&#39;s own line but it should not :/ @glyphx"},{"owner":{"account_id":5437664,"reputation":317,"user_id":4326638,"accept_rate":80,"display_name":"Ben"},"score":1,"creation_date":1463445249,"post_id":15739087,"comment_id":62057302,"body_markdown":"@Ashton That&#39;s very strange... You are probably best off posting a new question with full details.  Show an entire string you are trying to parse and the pattern you are using and the results. The pattern in this answer should only ever match and split on commas, as far as I understand it.","body":"@Ashton That&#39;s very strange... You are probably best off posting a new question with full details.  Show an entire string you are trying to parse and the pattern you are using and the results. The pattern in this answer should only ever match and split on commas, as far as I understand it."},{"owner":{"account_id":1155134,"reputation":13311,"user_id":1135954,"accept_rate":68,"display_name":"mtk"},"score":1,"creation_date":1486070635,"post_id":15739087,"comment_id":71200589,"body_markdown":"Explanation/Visualization of regex https://regexper.com/#(%3F%3D(%5B%5E%5C%22%5D*%5C%22%5B%5E%5C%22%5D*%5C%22)*%5B%5E%5C%22%5D*%24)","body":"Explanation/Visualization of regex <a href=\"https://regexper.com/#(%3F%3D(%5B%5E%5C%22%5D\" rel=\"nofollow noreferrer\">regexper.com/#(%3F%3D(%5B%5E%5C%22%5D</a>*%5C%22%5B%5E%5C%22%5D*&zwnj;&#8203;%5C%22)*%5B%5E%5C%22&zwnj;&#8203;%5D*%24)"}],"tags":[],"owner":{"account_id":2118345,"reputation":12755,"user_id":1882149,"display_name":"Achintya Jha"},"comment_count":6,"down_vote_count":0,"up_vote_count":213,"is_accepted":true,"score":213,"last_activity_date":1364799654,"creation_date":1364799654,"answer_id":15739087,"question_id":15738918,"body_markdown":"    public static void main(String[] args) {\r\n\t\tString s = &quot;Sachin,,M,\\&quot;Maths,Science,English\\&quot;,Need to improve in these subjects.&quot;;\r\n\t\tString[] splitted = s.split(&quot;,(?=([^\\&quot;]*\\&quot;[^\\&quot;]*\\&quot;)*[^\\&quot;]*$)&quot;);\r\n\t\tSystem.out.println(Arrays.toString(splitted));\r\n\t}\r\n\r\nOutput:\r\n\r\n    [Sachin, , M, &quot;Maths,Science,English&quot;, Need to improve in these subjects.]","title":"Splitting a csv file with quotes as text-delimiter using String.split()","body":"<pre><code>public static void main(String[] args) {\n    String s = \"Sachin,,M,\\\"Maths,Science,English\\\",Need to improve in these subjects.\";\n    String[] splitted = s.split(\",(?=([^\\\"]*\\\"[^\\\"]*\\\")*[^\\\"]*$)\");\n    System.out.println(Arrays.toString(splitted));\n}\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>[Sachin, , M, \"Maths,Science,English\", Need to improve in these subjects.]\n</code></pre>\n"},{"comments":[{"owner":{"account_id":93689,"reputation":415951,"user_id":256196,"accept_rate":77,"display_name":"Bohemian"},"score":1,"creation_date":1365545280,"post_id":15905916,"comment_id":22665534,"body_markdown":"-1 This does not answer the question, which specifically asks for a solution using `String.split()`. As an aside, one of the hallmarks of code written by someone who knows very little about java is the use of `Vector`.","body":"-1 This does not answer the question, which specifically asks for a solution using <code>String.split()</code>. As an aside, one of the hallmarks of code written by someone who knows very little about java is the use of <code>Vector</code>."},{"owner":{"account_id":1864571,"reputation":23738,"user_id":1688441,"accept_rate":82,"display_name":"Menelaos"},"score":10,"creation_date":1365545516,"post_id":15905916,"comment_id":22665638,"body_markdown":"Please explain why in this situation it would be more advantageous to use ArrayList instead of Vector (except for the performance hit due to thread safeness). Also, your politeness could use some work, which is one of the hallmarks of someone who is rude.","body":"Please explain why in this situation it would be more advantageous to use ArrayList instead of Vector (except for the performance hit due to thread safeness). Also, your politeness could use some work, which is one of the hallmarks of someone who is rude."},{"owner":{"account_id":93689,"reputation":415951,"user_id":256196,"accept_rate":77,"display_name":"Bohemian"},"score":2,"creation_date":1365553481,"post_id":15905916,"comment_id":22668013,"body_markdown":"I wasn&#39;t being rude; merely factual. Here&#39;s a little tip... `Vector` is *not* threadsafe. It&#39;s a broken class, which is why no one, and I really do mean *no one*, uses it in the real world. Only total beginners use it, my guess is because lecture notes are ten years out of date, and especially because lecturers advocating the use of Vector have spent too much time in academia to keep in touch and the old adage &quot;if you can&#39;t do it, teach it&quot; still holds true.","body":"I wasn&#39;t being rude; merely factual. Here&#39;s a little tip... <code>Vector</code> is <i>not</i> threadsafe. It&#39;s a broken class, which is why no one, and I really do mean <i>no one</i>, uses it in the real world. Only total beginners use it, my guess is because lecture notes are ten years out of date, and especially because lecturers advocating the use of Vector have spent too much time in academia to keep in touch and the old adage &quot;if you can&#39;t do it, teach it&quot; still holds true."},{"owner":{"account_id":1864571,"reputation":23738,"user_id":1688441,"accept_rate":82,"display_name":"Menelaos"},"score":4,"creation_date":1365554993,"post_id":15905916,"comment_id":22668436,"body_markdown":"Aha, I found the answer myself about vector being legacy. Thanks, don&#39;t plan on using that anymore and you did help me improve the speed of my solution a bit more in comparison to regex+split. Yes, the original question asked for split but it is sometimes helpful to also have alternatives for people who will find this via google etc. Just imagine the difference in time over 1 million or 10 million records to split for this specific case.","body":"Aha, I found the answer myself about vector being legacy. Thanks, don&#39;t plan on using that anymore and you did help me improve the speed of my solution a bit more in comparison to regex+split. Yes, the original question asked for split but it is sometimes helpful to also have alternatives for people who will find this via google etc. Just imagine the difference in time over 1 million or 10 million records to split for this specific case."},{"owner":{"account_id":93689,"reputation":415951,"user_id":256196,"accept_rate":77,"display_name":"Bohemian"},"score":2,"creation_date":1365560835,"post_id":15905916,"comment_id":22669825,"body_markdown":"Well, speed isn&#39;t everything. I firmly believe &quot;less code is good&quot; (many reasons - too many to discuss here). But rather than write your own code (if not using `split()`), I would look first to an existing library, and for CSV parsing there are many.","body":"Well, speed isn&#39;t everything. I firmly believe &quot;less code is good&quot; (many reasons - too many to discuss here). But rather than write your own code (if not using <code>split()</code>), I would look first to an existing library, and for CSV parsing there are many."},{"owner":{"account_id":121289,"reputation":4343,"user_id":314283,"accept_rate":92,"display_name":"Lisa"},"score":0,"creation_date":1558576420,"post_id":15905916,"comment_id":99150098,"body_markdown":"From years ago when I mucked with regexes in .NET a lot I found I could dramatically improve the performance by keeping a static copy of the regex object (thus pre-parsed into memory as its own parsing tree). No idea how to do the equivalent in java while still using String.split, but that is probably the big performance cost here.","body":"From years ago when I mucked with regexes in .NET a lot I found I could dramatically improve the performance by keeping a static copy of the regex object (thus pre-parsed into memory as its own parsing tree). No idea how to do the equivalent in java while still using String.split, but that is probably the big performance cost here."}],"tags":[],"owner":{"account_id":1864571,"reputation":23738,"user_id":1688441,"accept_rate":82,"display_name":"Menelaos"},"comment_count":6,"down_vote_count":2,"up_vote_count":28,"is_accepted":false,"score":26,"last_activity_date":1365546841,"creation_date":1365520844,"answer_id":15905916,"question_id":15738918,"body_markdown":"As your problem/requirements are not all that complex a custom method can be utilized that performs over 20  times faster and produces the same results.\r\nThis is variable based on the data size and number of rows parsed, and for more complicated problems using regular expressions is a must.\r\n\r\n    import java.util.Arrays;\r\n    import java.util.ArrayList;\r\n    public class SplitTest {\r\n\r\n\tpublic static void main(String[] args) {\r\n\t\t\r\n\t\tString s = &quot;Sachin,,M,\\&quot;Maths,Science,English\\&quot;,Need to improve in these subjects.&quot;;\r\n\t\tString[] splitted = null;\r\n\t\t\r\n     //Measure Regular Expression\r\n\t\tlong startTime = System.nanoTime();\r\n\t\tfor(int i=0; i&lt;10; i++)\r\n\t\tsplitted = s.split(&quot;,(?=([^\\&quot;]*\\&quot;[^\\&quot;]*\\&quot;)*[^\\&quot;]*$)&quot;);\r\n\t\tlong endTime =   System.nanoTime();\r\n\t\t\r\n\t\tSystem.out.println(&quot;Took: &quot; + (endTime-startTime));\r\n\t\tSystem.out.println(Arrays.toString(splitted));\r\n\t\tSystem.out.println(&quot;&quot;);\r\n\t\t\r\n\t\t\r\n\t\tArrayList&lt;String&gt; sw = null;\t\t\r\n     //Measure Custom Method\r\n                startTime = System.nanoTime();\r\n\t\tfor(int i=0; i&lt;10; i++)\r\n\t\tsw = customSplitSpecific(s);\r\n\t\tendTime =   System.nanoTime();\r\n\t\t\r\n\t\tSystem.out.println(&quot;Took: &quot; + (endTime-startTime));\r\n\t\tSystem.out.println(sw);\t\t\t\r\n\t}\r\n\r\n\tpublic static ArrayList&lt;String&gt; customSplitSpecific(String s)\r\n\t{\r\n\t\tArrayList&lt;String&gt; words = new ArrayList&lt;String&gt;();\r\n\t\tboolean notInsideComma = true;\r\n\t\tint start =0, end=0;\r\n\t\tfor(int i=0; i&lt;s.length()-1; i++)\r\n\t\t{\r\n\t\t\tif(s.charAt(i)==&#39;,&#39; &amp;&amp; notInsideComma)\r\n\t\t\t{\r\n\t\t\t\twords.add(s.substring(start,i));\r\n\t\t\t\tstart = i+1;\t\t\t\t\r\n\t\t\t}\t\r\n\t\t\telse if(s.charAt(i)==&#39;&quot;&#39;)\r\n\t\t\tnotInsideComma=!notInsideComma;\r\n\t\t}\r\n\t\twords.add(s.substring(start));\r\n\t\treturn words;\r\n\t}\t\r\n}\r\n\r\n\r\nOn my own computer this produces:\r\n\r\n    Took: 6651100\r\n    [Sachin, , M, &quot;Maths,Science,English&quot;, Need to improve in these subjects.]\r\n    \r\n    Took: 224179\r\n    [Sachin, , M, &quot;Maths,Science,English&quot;, Need to improve in these subjects.]\r\n\r\n","title":"Splitting a csv file with quotes as text-delimiter using String.split()","body":"<p>As your problem/requirements are not all that complex a custom method can be utilized that performs over 20  times faster and produces the same results.\nThis is variable based on the data size and number of rows parsed, and for more complicated problems using regular expressions is a must.</p>\n\n<pre><code>import java.util.Arrays;\nimport java.util.ArrayList;\npublic class SplitTest {\n\npublic static void main(String[] args) {\n\n    String s = \"Sachin,,M,\\\"Maths,Science,English\\\",Need to improve in these subjects.\";\n    String[] splitted = null;\n\n //Measure Regular Expression\n    long startTime = System.nanoTime();\n    for(int i=0; i&lt;10; i++)\n    splitted = s.split(\",(?=([^\\\"]*\\\"[^\\\"]*\\\")*[^\\\"]*$)\");\n    long endTime =   System.nanoTime();\n\n    System.out.println(\"Took: \" + (endTime-startTime));\n    System.out.println(Arrays.toString(splitted));\n    System.out.println(\"\");\n\n\n    ArrayList&lt;String&gt; sw = null;        \n //Measure Custom Method\n            startTime = System.nanoTime();\n    for(int i=0; i&lt;10; i++)\n    sw = customSplitSpecific(s);\n    endTime =   System.nanoTime();\n\n    System.out.println(\"Took: \" + (endTime-startTime));\n    System.out.println(sw);         \n}\n\npublic static ArrayList&lt;String&gt; customSplitSpecific(String s)\n{\n    ArrayList&lt;String&gt; words = new ArrayList&lt;String&gt;();\n    boolean notInsideComma = true;\n    int start =0, end=0;\n    for(int i=0; i&lt;s.length()-1; i++)\n    {\n        if(s.charAt(i)==',' &amp;&amp; notInsideComma)\n        {\n            words.add(s.substring(start,i));\n            start = i+1;                \n        }   \n        else if(s.charAt(i)=='\"')\n        notInsideComma=!notInsideComma;\n    }\n    words.add(s.substring(start));\n    return words;\n}   \n</code></pre>\n\n<p>}</p>\n\n<p>On my own computer this produces:</p>\n\n<pre><code>Took: 6651100\n[Sachin, , M, \"Maths,Science,English\", Need to improve in these subjects.]\n\nTook: 224179\n[Sachin, , M, \"Maths,Science,English\", Need to improve in these subjects.]\n</code></pre>\n"},{"comments":[{"owner":{"account_id":156757,"reputation":662,"user_id":374236,"display_name":"Marc Wrobel"},"score":1,"creation_date":1645391770,"post_id":71137199,"comment_id":125853420,"body_markdown":"This does not provide an answer to the question. Once you have sufficient [reputation](https://stackoverflow.com/help/whats-reputation) you will be able to [comment on any post](https://stackoverflow.com/help/privileges/comment); instead, [provide answers that don&#39;t require clarification from the asker](https://meta.stackexchange.com/questions/214173/why-do-i-need-50-reputation-to-comment-what-can-i-do-instead). - [From Review](/review/late-answers/31081350)","body":"This does not provide an answer to the question. Once you have sufficient <a href=\"https://stackoverflow.com/help/whats-reputation\">reputation</a> you will be able to <a href=\"https://stackoverflow.com/help/privileges/comment\">comment on any post</a>; instead, <a href=\"https://meta.stackexchange.com/questions/214173/why-do-i-need-50-reputation-to-comment-what-can-i-do-instead\">provide answers that don&#39;t require clarification from the asker</a>. - <a href=\"/review/late-answers/31081350\">From Review</a>"}],"tags":[],"owner":{"account_id":24272414,"reputation":1,"user_id":18220233,"display_name":"Shiva Prasadh"},"comment_count":1,"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1644992407,"creation_date":1644992407,"answer_id":71137199,"question_id":15738918,"body_markdown":"While working on csv string we need to know following points.\r\n\r\n1) Every tuple in row will start with either &quot;(quotes) or not.\r\n   a) If it is starts with &quot;(quotes) then it must be value of a particular column.\r\n   b) If it is starts directly then it must be header.\r\n Ex : &#39;Header1,Header2,Header3,&quot;value1&quot;,&quot;value2&quot;,&quot;value3&quot;&#39;;\r\n Here Header1,Header2,Header3 are column names remaining are values.\r\n\r\nMain point we need to remember while doing split is you need check that spiting is done properly or not. \r\na) Get the split value and check number of quotes in value (count must be even)\r\nb) If count is odd then append next split value.\r\nc) Repeat process a,b until quotes are equal.\r\n \r\n","title":"Splitting a csv file with quotes as text-delimiter using String.split()","body":"<p>While working on csv string we need to know following points.</p>\n<ol>\n<li>Every tuple in row will start with either &quot;(quotes) or not.\na) If it is starts with &quot;(quotes) then it must be value of a particular column.\nb) If it is starts directly then it must be header.\nEx : 'Header1,Header2,Header3,&quot;value1&quot;,&quot;value2&quot;,&quot;value3&quot;';\nHere Header1,Header2,Header3 are column names remaining are values.</li>\n</ol>\n<p>Main point we need to remember while doing split is you need check that spiting is done properly or not.\na) Get the split value and check number of quotes in value (count must be even)\nb) If count is odd then append next split value.\nc) Repeat process a,b until quotes are equal.</p>\n"},{"tags":[],"owner":{"account_id":23580993,"reputation":1,"user_id":17620020,"display_name":"Max Omdal"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695160570,"creation_date":1695160570,"answer_id":77138171,"question_id":15738918,"body_markdown":"The favorited answer seems to be correct, except in the case where you have trailing commas. You should specify [the limit argument](https://stackoverflow.com/questions/13939675/java-string-split-i-want-it-to-include-the-empty-strings-at-the-end?noredirect=1&amp;lq=1) on the split \r\n\r\n```java\r\npublic static void main(String[] args) {\r\n   String s = &quot;Sachin,,M,\\&quot;Maths,Science,English\\&quot;,Need to improve in these subjects.,,,&quot;;\r\n   String[] splitted = s.split(&quot;,(?=([^\\&quot;]*\\&quot;[^\\&quot;]*\\&quot;)*[^\\&quot;]*$)&quot;, -1);\r\n   System.out.println(Arrays.toString(splitted));\r\n}\r\n```\r\n\r\notherwise the results will not include the last three columns.","title":"Splitting a csv file with quotes as text-delimiter using String.split()","body":"<p>The favorited answer seems to be correct, except in the case where you have trailing commas. You should specify <a href=\"https://stackoverflow.com/questions/13939675/java-string-split-i-want-it-to-include-the-empty-strings-at-the-end?noredirect=1&amp;lq=1\">the limit argument</a> on the split</p>\n<pre class=\"lang-java prettyprint-override\"><code>public static void main(String[] args) {\n   String s = &quot;Sachin,,M,\\&quot;Maths,Science,English\\&quot;,Need to improve in these subjects.,,,&quot;;\n   String[] splitted = s.split(&quot;,(?=([^\\&quot;]*\\&quot;[^\\&quot;]*\\&quot;)*[^\\&quot;]*$)&quot;, -1);\n   System.out.println(Arrays.toString(splitted));\n}\n</code></pre>\n<p>otherwise the results will not include the last three columns.</p>\n"}],"owner":{"account_id":1369475,"reputation":845,"user_id":1305126,"accept_rate":58,"display_name":"FarSh018"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":85312,"favorite_count":0,"down_vote_count":0,"up_vote_count":70,"accepted_answer_id":15739087,"answer_count":5,"score":70,"last_activity_date":1695160570,"creation_date":1364798883,"question_id":15738918,"body_markdown":"I  have a comma separated file with many lines similar to one below.\r\n\r\n    Sachin,,M,&quot;Maths,Science,English&quot;,Need to improve in these subjects.\r\n\r\nQuotes is used to escape the delimiter comma used to represent multiple values.\r\n\r\nNow how do I split the above value on the comma delimiter using `String.split()` if at all its possible?","title":"Splitting a csv file with quotes as text-delimiter using String.split()","body":"<p>I  have a comma separated file with many lines similar to one below.</p>\n\n<pre><code>Sachin,,M,\"Maths,Science,English\",Need to improve in these subjects.\n</code></pre>\n\n<p>Quotes is used to escape the delimiter comma used to represent multiple values.</p>\n\n<p>Now how do I split the above value on the comma delimiter using <code>String.split()</code> if at all its possible?</p>\n"},{"tags":["java","spring-boot","kotlin","spring-security"],"comments":[{"owner":{"account_id":19726215,"reputation":538,"user_id":14442758,"display_name":"Z-100"},"score":0,"creation_date":1695214405,"post_id":77137735,"comment_id":135994061,"body_markdown":"I&#39;ve finally found this answer and this is good enough for me: https://stackoverflow.com/a/46086769/14442758. Won&#39;t close tho, as there still might be another answer somewhere.","body":"I&#39;ve finally found this answer and this is good enough for me: <a href=\"https://stackoverflow.com/a/46086769/14442758\">stackoverflow.com/a/46086769/14442758</a>. Won&#39;t close tho, as there still might be another answer somewhere."}],"owner":{"account_id":19726215,"reputation":538,"user_id":14442758,"display_name":"Z-100"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":32,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1695159863,"creation_date":1695154708,"question_id":77137735,"body_markdown":"Lil problem with Spring Security: I have two &#39;main-endpoints&#39; in my app. `/authenticated/**` &amp; `/anonymous/**`. The name of each endpoint is pretty much what I also want Spring Boot to do.\r\n\r\n`SecurityConfig`:\r\n```java\r\n@Bean\r\nopen fun configure(httpSecurity: HttpSecurity): SecurityFilterChain {\r\n\r\n    httpSecurity\r\n        .csrf { }\r\n        .httpBasic { it.disable() }\r\n        .formLogin { it.disable() }\r\n        .authorizeHttpRequests {\r\n            it.requestMatchers(*AUTH_WHITELIST).permitAll()\r\n                .anyRequest().authenticated()\r\n        }\r\n        .addFilterAfter(JWTAuthenticationFilter(), AuthorizationFilter::class.java)\r\n\r\n    return httpSecurity.build()\r\n}\r\n```\r\n\r\nIn previous projects I just used to create a second `AUTH_WHITELIST`, which would then be checked in the `shouldNotFilter` method of - in this case - `JWTAuthenticationFilter`.\r\n\r\nI figured that there has to be some other way to achieve the same result of &#39;anonymous&#39; requests _not_ being filtered, but as of now, I haven&#39;t found a way to do so.\r\n\r\nMy current understanding of the filter chain isn&#39;t all too great, even though I&#39;ve read some docs and read through countless posts on this website. \\\r\n-&gt; Tried with various orders (resp. placements) of my custom filter in the filter chain in the hope of somehow setting it back far enough, for `.authorizeHttpRequests` to do its job, before being called.\r\n\r\nCheers","title":"Spring Boot Filter called in anonymous request","body":"<p>Lil problem with Spring Security: I have two 'main-endpoints' in my app. <code>/authenticated/**</code> &amp; <code>/anonymous/**</code>. The name of each endpoint is pretty much what I also want Spring Boot to do.</p>\n<p><code>SecurityConfig</code>:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Bean\nopen fun configure(httpSecurity: HttpSecurity): SecurityFilterChain {\n\n    httpSecurity\n        .csrf { }\n        .httpBasic { it.disable() }\n        .formLogin { it.disable() }\n        .authorizeHttpRequests {\n            it.requestMatchers(*AUTH_WHITELIST).permitAll()\n                .anyRequest().authenticated()\n        }\n        .addFilterAfter(JWTAuthenticationFilter(), AuthorizationFilter::class.java)\n\n    return httpSecurity.build()\n}\n</code></pre>\n<p>In previous projects I just used to create a second <code>AUTH_WHITELIST</code>, which would then be checked in the <code>shouldNotFilter</code> method of - in this case - <code>JWTAuthenticationFilter</code>.</p>\n<p>I figured that there has to be some other way to achieve the same result of 'anonymous' requests <em>not</em> being filtered, but as of now, I haven't found a way to do so.</p>\n<p>My current understanding of the filter chain isn't all too great, even though I've read some docs and read through countless posts on this website. <br />\n-&gt; Tried with various orders (resp. placements) of my custom filter in the filter chain in the hope of somehow setting it back far enough, for <code>.authorizeHttpRequests</code> to do its job, before being called.</p>\n<p>Cheers</p>\n"},{"tags":["java","spring-boot","junit","junit4","h2"],"comments":[{"owner":{"display_name":"user10677470"},"score":1,"creation_date":1556036333,"post_id":55815439,"comment_id":98297672,"body_markdown":"what part of *nested exception is org.h2.jdbc.JdbcSQLIntegrityConstraintViolationException: **NULL not allowed for column &quot;ID&quot;**; SQL statement:* is unclear to you?","body":"what part of <i>nested exception is org.h2.jdbc.JdbcSQLIntegrityConstraintViolationException: <b>NULL not allowed for column &quot;ID&quot;</b>; SQL statement:</i> is unclear to you?"},{"owner":{"account_id":8614818,"reputation":1436,"user_id":6452106,"display_name":"Planck Constant"},"score":1,"creation_date":1556036474,"post_id":55815439,"comment_id":98297742,"body_markdown":"https://stackoverflow.com/questions/39094649/h2-database-null-not-allowed-for-column-id-when-inserting-record-using-jdbcte","body":"<a href=\"https://stackoverflow.com/questions/39094649/h2-database-null-not-allowed-for-column-id-when-inserting-record-using-jdbcte\" title=\"h2 database null not allowed for column id when inserting record using jdbcte\">stackoverflow.com/questions/39094649/&hellip;</a>"},{"owner":{"account_id":49142,"reputation":4904,"user_id":146234,"accept_rate":40,"display_name":"PacificNW_Lover"},"score":0,"creation_date":1556036956,"post_id":55815439,"comment_id":98298006,"body_markdown":"@Uata - yes, thanks the URL for similar problem!    @GeneratedValue(strategy=GenerationType.IDENTITY) solved the problem!","body":"@Uata - yes, thanks the URL for similar problem!    @GeneratedValue(strategy=GenerationType.IDENTITY) solved the problem!"}],"answers":[{"comments":[{"owner":{"account_id":49142,"reputation":4904,"user_id":146234,"accept_rate":40,"display_name":"PacificNW_Lover"},"score":0,"creation_date":1556036706,"post_id":55815497,"comment_id":98297864,"body_markdown":"admly - doesn&#39;t it auto-increment though? How would that look like in the SQL? When I tried doing this insert into booking (1, booking_name, group_size) values (1, &#39;LiveLessons&#39;, 1000); it still broke?","body":"admly - doesn&#39;t it auto-increment though? How would that look like in the SQL? When I tried doing this insert into booking (1, booking_name, group_size) values (1, &#39;LiveLessons&#39;, 1000); it still broke?"},{"owner":{"account_id":15787984,"reputation":317,"user_id":11392112,"display_name":"admly"},"score":0,"creation_date":1556037082,"post_id":55815497,"comment_id":98298072,"body_markdown":"it would generate an id if you use JPA, but you should state it explicitly in init sql script.","body":"it would generate an id if you use JPA, but you should state it explicitly in init sql script."},{"owner":{"account_id":15787984,"reputation":317,"user_id":11392112,"display_name":"admly"},"score":0,"creation_date":1556038997,"post_id":55815497,"comment_id":98299024,"body_markdown":"Checked by myself, insert into booking ( id, booking_name, group_size) values (1, &#39;LiveLessons&#39;, 1000);\ninsert into booking ( id, booking_name, group_size) values (2, &#39;John Doe&#39;, 1); works. Of course you can fix it by declaring a generation strategy.","body":"Checked by myself, insert into booking ( id, booking_name, group_size) values (1, &#39;LiveLessons&#39;, 1000); insert into booking ( id, booking_name, group_size) values (2, &#39;John Doe&#39;, 1); works. Of course you can fix it by declaring a generation strategy."}],"tags":[],"owner":{"account_id":15787984,"reputation":317,"user_id":11392112,"display_name":"admly"},"comment_count":3,"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1556036389,"creation_date":1556036389,"answer_id":55815497,"question_id":55815439,"body_markdown":"You are missing ID in your sql.","title":"Issue using Spring Boot with Inserting into h2database with a JUnit4 test","body":"<p>You are missing ID in your sql.</p>\n"},{"tags":[],"owner":{"account_id":26759108,"reputation":21,"user_id":20357338,"display_name":"Giovannisc"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695159850,"creation_date":1695159850,"answer_id":77138118,"question_id":55815439,"body_markdown":"I solved it creating table so as:\r\n\r\ncreate table IF NOT EXISTS `boooking`(id int NOT NULL auto_increment, booking_name varchar(255));\r\n\r\ninsert into boooking(booking_name) values(&#39;Kris&#39;);\r\ninsert into boooking(booking_name) values(&#39;Martin&#39;);","title":"Issue using Spring Boot with Inserting into h2database with a JUnit4 test","body":"<p>I solved it creating table so as:</p>\n<p>create table IF NOT EXISTS <code>boooking</code>(id int NOT NULL auto_increment, booking_name varchar(255));</p>\n<p>insert into boooking(booking_name) values('Kris');\ninsert into boooking(booking_name) values('Martin');</p>\n"}],"owner":{"account_id":49142,"reputation":4904,"user_id":146234,"accept_rate":40,"display_name":"PacificNW_Lover"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":2859,"favorite_count":0,"down_vote_count":3,"up_vote_count":3,"answer_count":2,"score":0,"last_activity_date":1695159850,"creation_date":1556036160,"question_id":55815439,"body_markdown":"Was following an online tutorial on how to setup a Spring Boot project and write unit tests against an h2 database...\r\n\r\nAm new to Spring Boot when it comes to writing JUnit tests and also am new to using the in-memory h2 database. \r\n\r\nWrote a test and now it doesn&#39;t work!\r\n\r\n---\r\n\r\npom.xml\r\n\r\n\t&lt;parent&gt;\r\n\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t&lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\r\n\t\t&lt;version&gt;2.1.4.RELEASE&lt;/version&gt;\r\n\t\t&lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;\r\n\t&lt;/parent&gt;\r\n\r\n\t&lt;properties&gt;\r\n\t\t&lt;java.version&gt;1.8&lt;/java.version&gt;\r\n\t&lt;/properties&gt;\r\n\r\n\t&lt;dependencies&gt;\r\n\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-actuator&lt;/artifactId&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\r\n\t\t\t&lt;scope&gt;test&lt;/scope&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;com.h2database&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;h2&lt;/artifactId&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\n\t&lt;/dependencies&gt;\r\n\r\n---\r\n\r\ncode structure\r\n\r\n    demo\r\n\t ├── mvnw\r\n\t ├── mvnw.cmd\r\n\t ├── pom.xml\r\n\t └── src\r\n\t    ├── main\r\n\t    │&#160;&#160; ├── java\r\n\t    │&#160;&#160; │&#160;&#160; └── com\r\n\t    │&#160;&#160; │&#160;&#160;     └── example\r\n\t    │&#160;&#160; │&#160;&#160;         └── demo\r\n\t    │&#160;&#160; │&#160;&#160;             ├── Booking.java\r\n\t    │&#160;&#160; │&#160;&#160;             ├── DemoApplication.java\r\n\t    │&#160;&#160; │&#160;&#160;             └── ReservationRepository.java\r\n\t    │&#160;&#160; └── resources\r\n\t    │&#160;&#160;     ├── application.properties\r\n\t    │&#160;&#160;     ├── static\r\n\t    │&#160;&#160;     └── templates\r\n\t    └── test\r\n\t        ├── java\r\n\t        │&#160;&#160; └── com\r\n\t        │&#160;&#160;     └── example\r\n\t        │&#160;&#160;         └── demo\r\n\t        │&#160;&#160;             └── DemoApplicationTests.java\r\n\t        └── resources\r\n\t            └── data.sql\r\n\r\n---\r\n\r\nBooking.java\r\n\r\n\t@Entity\r\n\tpublic class Booking {\r\n\r\n\t    @Id\r\n\t    @GeneratedValue\r\n\t    private Long id;\r\n\r\n\t    // booking_name\r\n\t    private String bookingName;\r\n\r\n\t    // group_size\r\n\t    private int groupSize;\r\n\r\n\t    Booking(){ }\r\n\r\n\t    public Booking(String bookingName, int groupSize) {\r\n\t        this.bookingName = bookingName;\r\n\t        this.groupSize = groupSize;\r\n\t    }\r\n\r\n\t    // Getters &amp; setters omitted for brevity\r\n\t}\t            \r\n\r\n---\r\n\r\nReservationRepository\r\n\r\n\timport org.springframework.data.jpa.repository.JpaRepository;\r\n\r\n\tpublic interface ReservationRepository extends JpaRepository&lt;Booking, Long&gt; {\r\n\t}\r\n\r\n---\r\n\r\nDemoApplicationTests\r\n\r\n\t@RunWith(SpringRunner.class)\r\n\t@SpringBootTest\r\n\tpublic class DemoApplicationTests {\r\n\r\n\t\t@Autowired\r\n\t\tReservationRepository reservationRepository;\r\n\r\n\t\t@Test\r\n\t\tpublic void contextLoads() {\r\n\t\t\tAssert.assertNotNull(&quot;The reservation repository should be non-null&quot;, this.reservationRepository);\r\n\t\t}\r\n\r\n\t\t@Test\r\n\t\tpublic void testLoadingResultsInDatabase() {\r\n\t\t\tList&lt;Booking&gt; bookings = this.reservationRepository.findAll();\r\n\t\t\tAssert.assertNotNull(&quot;There must be a response&quot;, bookings);\r\n\t\t\tAssert.assertTrue(&quot;There should be at least one booking&quot;, bookings.size() &gt; 0);\r\n\t\t}\r\n\t}\r\n\r\n---\r\n\r\ndata.sql\r\n\r\n\tinsert into booking ( booking_name, group_size) values (&#39;LiveLessons&#39;, 1000);\r\n\tinsert into booking ( booking_name, group_size) values (&#39;John Doe&#39;, 1);\r\n\r\n---\r\n\r\nWhen I run this JUnit test:\r\n\r\n\torg.springframework.beans.factory.BeanCreationException: Error creating bean with name &#39;entityManagerFactory&#39; defined in class path resource [org/springframework/boot/autoconfigure/orm/jpa/HibernateJpaConfiguration.class]: Initialization of bean failed; nested exception is org.springframework.jdbc.datasource.init.ScriptStatementFailedException: Failed to execute SQL script statement #1 of URL [file:/home/work/demo/target/test-classes/data.sql]: insert into booking ( booking_name, group_size) values (&#39;LiveLessons&#39;, 1000); nested exception is org.h2.jdbc.JdbcSQLIntegrityConstraintViolationException: NULL not allowed for column &quot;ID&quot;; SQL statement:\r\n\tinsert into booking ( booking_name, group_size) values (&#39;LiveLessons&#39;, 1000) [23502-199]\r\n\r\n\tCaused by: org.springframework.jdbc.datasource.init.ScriptStatementFailedException: Failed to execute SQL script statement #1 of URL [file:/home/work/demo/target/test-classes/data.sql]: insert into booking ( booking_name, group_size) values (&#39;LiveLessons&#39;, 1000); nested exception is org.h2.jdbc.JdbcSQLIntegrityConstraintViolationException: NULL not allowed for column &quot;ID&quot;; SQL statement:\r\n\tinsert into booking ( booking_name, group_size) values (&#39;LiveLessons&#39;, 1000) [23502-199]\r\n\t\tat org.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript(ScriptUtils.java:509) ~[spring-jdbc-5.1.6.RELEASE.jar:5.1.6.RELEASE]\r\n\t\tat org.springframework.jdbc.datasource.init.ResourceDatabasePopulator.populate(ResourceDatabasePopulator.java:238) ~[spring-jdbc-5.1.6.RELEASE.jar:5.1.6.RELEASE]\r\n\tCaused by: org.h2.jdbc.JdbcSQLIntegrityConstraintViolationException: NULL not allowed for column &quot;ID&quot;; SQL statement:\r\n\tinsert into booking ( booking_name, group_size) values (&#39;LiveLessons&#39;, 1000) [23502-199]\r\n\t\tat org.h2.message.DbException.getJdbcSQLException(DbException.java:457) ~[h2-1.4.199.jar:1.4.199]\r\n\t\tat org.h2.message.DbException.getJdbcSQLException(DbException.java:427) ~[h2-1.4.199.jar:1.4.199]\r\n\t\tat org.h2.message.DbException.get(DbException.java:205) ~[h2-1.4.199.jar:1.4.199]\r\n\t\tat org.h2.message.DbException.get(DbException.java:181) ~[h2-1.4.199.jar:1.4.199]\r\n\r\n---\t\r\n\t\r\nWhat am I possibly doing wrong?","title":"Issue using Spring Boot with Inserting into h2database with a JUnit4 test","body":"<p>Was following an online tutorial on how to setup a Spring Boot project and write unit tests against an h2 database...</p>\n\n<p>Am new to Spring Boot when it comes to writing JUnit tests and also am new to using the in-memory h2 database. </p>\n\n<p>Wrote a test and now it doesn't work!</p>\n\n<hr>\n\n<p>pom.xml</p>\n\n<pre><code>&lt;parent&gt;\n    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n    &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\n    &lt;version&gt;2.1.4.RELEASE&lt;/version&gt;\n    &lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;\n&lt;/parent&gt;\n\n&lt;properties&gt;\n    &lt;java.version&gt;1.8&lt;/java.version&gt;\n&lt;/properties&gt;\n\n&lt;dependencies&gt;\n\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-actuator&lt;/artifactId&gt;\n    &lt;/dependency&gt;\n\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt;\n    &lt;/dependency&gt;\n\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\n    &lt;/dependency&gt;\n\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\n        &lt;scope&gt;test&lt;/scope&gt;\n    &lt;/dependency&gt;\n\n    &lt;dependency&gt;\n        &lt;groupId&gt;com.h2database&lt;/groupId&gt;\n        &lt;artifactId&gt;h2&lt;/artifactId&gt;\n    &lt;/dependency&gt;\n\n&lt;/dependencies&gt;\n</code></pre>\n\n<hr>\n\n<p>code structure</p>\n\n<pre><code>demo\n ├── mvnw\n ├── mvnw.cmd\n ├── pom.xml\n └── src\n    ├── main\n    │   ├── java\n    │   │   └── com\n    │   │       └── example\n    │   │           └── demo\n    │   │               ├── Booking.java\n    │   │               ├── DemoApplication.java\n    │   │               └── ReservationRepository.java\n    │   └── resources\n    │       ├── application.properties\n    │       ├── static\n    │       └── templates\n    └── test\n        ├── java\n        │   └── com\n        │       └── example\n        │           └── demo\n        │               └── DemoApplicationTests.java\n        └── resources\n            └── data.sql\n</code></pre>\n\n<hr>\n\n<p>Booking.java</p>\n\n<pre><code>@Entity\npublic class Booking {\n\n    @Id\n    @GeneratedValue\n    private Long id;\n\n    // booking_name\n    private String bookingName;\n\n    // group_size\n    private int groupSize;\n\n    Booking(){ }\n\n    public Booking(String bookingName, int groupSize) {\n        this.bookingName = bookingName;\n        this.groupSize = groupSize;\n    }\n\n    // Getters &amp; setters omitted for brevity\n}               \n</code></pre>\n\n<hr>\n\n<p>ReservationRepository</p>\n\n<pre><code>import org.springframework.data.jpa.repository.JpaRepository;\n\npublic interface ReservationRepository extends JpaRepository&lt;Booking, Long&gt; {\n}\n</code></pre>\n\n<hr>\n\n<p>DemoApplicationTests</p>\n\n<pre><code>@RunWith(SpringRunner.class)\n@SpringBootTest\npublic class DemoApplicationTests {\n\n    @Autowired\n    ReservationRepository reservationRepository;\n\n    @Test\n    public void contextLoads() {\n        Assert.assertNotNull(\"The reservation repository should be non-null\", this.reservationRepository);\n    }\n\n    @Test\n    public void testLoadingResultsInDatabase() {\n        List&lt;Booking&gt; bookings = this.reservationRepository.findAll();\n        Assert.assertNotNull(\"There must be a response\", bookings);\n        Assert.assertTrue(\"There should be at least one booking\", bookings.size() &gt; 0);\n    }\n}\n</code></pre>\n\n<hr>\n\n<p>data.sql</p>\n\n<pre><code>insert into booking ( booking_name, group_size) values ('LiveLessons', 1000);\ninsert into booking ( booking_name, group_size) values ('John Doe', 1);\n</code></pre>\n\n<hr>\n\n<p>When I run this JUnit test:</p>\n\n<pre><code>org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'entityManagerFactory' defined in class path resource [org/springframework/boot/autoconfigure/orm/jpa/HibernateJpaConfiguration.class]: Initialization of bean failed; nested exception is org.springframework.jdbc.datasource.init.ScriptStatementFailedException: Failed to execute SQL script statement #1 of URL [file:/home/work/demo/target/test-classes/data.sql]: insert into booking ( booking_name, group_size) values ('LiveLessons', 1000); nested exception is org.h2.jdbc.JdbcSQLIntegrityConstraintViolationException: NULL not allowed for column \"ID\"; SQL statement:\ninsert into booking ( booking_name, group_size) values ('LiveLessons', 1000) [23502-199]\n\nCaused by: org.springframework.jdbc.datasource.init.ScriptStatementFailedException: Failed to execute SQL script statement #1 of URL [file:/home/work/demo/target/test-classes/data.sql]: insert into booking ( booking_name, group_size) values ('LiveLessons', 1000); nested exception is org.h2.jdbc.JdbcSQLIntegrityConstraintViolationException: NULL not allowed for column \"ID\"; SQL statement:\ninsert into booking ( booking_name, group_size) values ('LiveLessons', 1000) [23502-199]\n    at org.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript(ScriptUtils.java:509) ~[spring-jdbc-5.1.6.RELEASE.jar:5.1.6.RELEASE]\n    at org.springframework.jdbc.datasource.init.ResourceDatabasePopulator.populate(ResourceDatabasePopulator.java:238) ~[spring-jdbc-5.1.6.RELEASE.jar:5.1.6.RELEASE]\nCaused by: org.h2.jdbc.JdbcSQLIntegrityConstraintViolationException: NULL not allowed for column \"ID\"; SQL statement:\ninsert into booking ( booking_name, group_size) values ('LiveLessons', 1000) [23502-199]\n    at org.h2.message.DbException.getJdbcSQLException(DbException.java:457) ~[h2-1.4.199.jar:1.4.199]\n    at org.h2.message.DbException.getJdbcSQLException(DbException.java:427) ~[h2-1.4.199.jar:1.4.199]\n    at org.h2.message.DbException.get(DbException.java:205) ~[h2-1.4.199.jar:1.4.199]\n    at org.h2.message.DbException.get(DbException.java:181) ~[h2-1.4.199.jar:1.4.199]\n</code></pre>\n\n<hr>\n\n<p>What am I possibly doing wrong?</p>\n"},{"tags":["javascript","java","android","typescript","react-native"],"comments":[{"owner":{"account_id":24301499,"reputation":24395,"user_id":18244921,"display_name":"katniss"},"score":0,"creation_date":1695155813,"post_id":77137469,"comment_id":135985529,"body_markdown":"I&#39;m not a Java person but isn&#39;t that `toString` supposed to return *valid JSON*? It&#39;s using `=` which is not valid JSON.","body":"I&#39;m not a Java person but isn&#39;t that <code>toString</code> supposed to return <i>valid JSON</i>? It&#39;s using <code>=</code> which is not valid JSON."}],"answers":[{"tags":[],"owner":{"account_id":29202437,"reputation":52,"user_id":22372249,"display_name":"Andr&#233; Lu&#237;s de Andrade"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695153906,"creation_date":1695153280,"answer_id":77137601,"question_id":77137469,"body_markdown":"&gt; ```js\r\n&gt; console.log(JSON.stringify(studentList)) // [&quot;{\\&quot;name\\&quot;:\\&quot;John Doe\\&quot;,\\&quot;course\\&quot;:\\&quot;Javascript\\&quot;}&quot;,&quot;{\\&quot;name\\&quot;:\\&quot;Jane Doe\\&quot;,\\&quot;course\\&quot;:\\&quot;Typescript\\&quot;}&quot;,&quot;{\\&quot;name\\&quot;:\\&quot;Greg Doe\\&quot;,\\&quot;course\\&quot;:\\&quot;ReactNative\\&quot;}&quot;]\r\n&gt; ```\r\n\r\nNote the quotes around your curly braces, that means `studentList` is an array of JSON strings, which is why `console.log(typeof studentList)` yields `object`, since the `typeof` operator considers arrays as objects.\r\n\r\nThe reason for your TS error is that your explicit types promise TS that `studentList` is an array of objects, so each `student` should be an object, which isn&#39;t a valid input for `JSON.parse`, which only takes in strings.\r\n\r\nWhen you asked\r\n&gt; Why I am not allow to do something like this?\r\n\r\nYou are. But the code provided after the question is not equivalent to the props you gave the component\r\n\r\nYour code even says as much\r\n\r\n&gt; ```java\r\n&gt; initialProperties.putStringArrayList(&quot;studentList&quot;, studentList);\r\n&gt; ```\r\n\r\nYour `studentList` is a String ArrayList, that&#39;s the issue.\r\n\r\nI don&#39;t know much about Java, but since your class implements `Serializable`, my guess is you don&#39;t need to call `toJson`, let java figure serialization out, and change your arraylist to be properly typed. You may also want to look into `Parceable` rather than `Serializable` and use `initialProperties.putParceableArrayList`","title":"error TS2345: Argument of type &#39;StudentInfo&#39; is not assignable to parameter of type &#39;string&#39;","body":"<blockquote>\n<pre class=\"lang-js prettyprint-override\"><code>console.log(JSON.stringify(studentList)) // [&quot;{\\&quot;name\\&quot;:\\&quot;John Doe\\&quot;,\\&quot;course\\&quot;:\\&quot;Javascript\\&quot;}&quot;,&quot;{\\&quot;name\\&quot;:\\&quot;Jane Doe\\&quot;,\\&quot;course\\&quot;:\\&quot;Typescript\\&quot;}&quot;,&quot;{\\&quot;name\\&quot;:\\&quot;Greg Doe\\&quot;,\\&quot;course\\&quot;:\\&quot;ReactNative\\&quot;}&quot;]\n</code></pre>\n</blockquote>\n<p>Note the quotes around your curly braces, that means <code>studentList</code> is an array of JSON strings, which is why <code>console.log(typeof studentList)</code> yields <code>object</code>, since the <code>typeof</code> operator considers arrays as objects.</p>\n<p>The reason for your TS error is that your explicit types promise TS that <code>studentList</code> is an array of objects, so each <code>student</code> should be an object, which isn't a valid input for <code>JSON.parse</code>, which only takes in strings.</p>\n<p>When you asked</p>\n<blockquote>\n<p>Why I am not allow to do something like this?</p>\n</blockquote>\n<p>You are. But the code provided after the question is not equivalent to the props you gave the component</p>\n<p>Your code even says as much</p>\n<blockquote>\n<pre class=\"lang-java prettyprint-override\"><code>initialProperties.putStringArrayList(&quot;studentList&quot;, studentList);\n</code></pre>\n</blockquote>\n<p>Your <code>studentList</code> is a String ArrayList, that's the issue.</p>\n<p>I don't know much about Java, but since your class implements <code>Serializable</code>, my guess is you don't need to call <code>toJson</code>, let java figure serialization out, and change your arraylist to be properly typed. You may also want to look into <code>Parceable</code> rather than <code>Serializable</code> and use <code>initialProperties.putParceableArrayList</code></p>\n"}],"owner":{"account_id":5748147,"reputation":1645,"user_id":4538768,"accept_rate":55,"display_name":"JarochoEngineer"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":42,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1695158834,"creation_date":1695151897,"question_id":77137469,"body_markdown":"I am getting string type when iterating over an object using map. So I am forced to use JSON.parse and then use the object fields.\r\n\r\nHere is my component in TS causing the issues:\r\n\r\nStudentsScreen.tsx:\r\n\r\n    export default function StudentsScreen(props: StudentInfoProps) {\r\n      const {studentList} = props;\r\n      console.log(typeof studentList);//object\r\n      console.log(JSON.stringify(studentList)); //[&quot;{\\&quot;name\\&quot;:\\&quot;John Doe\\&quot;,\\&quot;course\\&quot;:\\&quot;Javascript\\&quot;}&quot;,&quot;{\\&quot;name\\&quot;:\\&quot;Jane Doe\\&quot;,\\&quot;course\\&quot;:\\&quot;Typescript\\&quot;}&quot;,&quot;{\\&quot;name\\&quot;:\\&quot;Greg Doe\\&quot;,\\&quot;course\\&quot;:\\&quot;ReactNative\\&quot;}&quot;]\r\n      return &lt;&gt; {\r\n        studentList?.map(student =&gt; {\r\n        console.log(typeof student);//string\r\n        const {name, course} = JSON.parse(student); //I should not need to do this\r\n        //const {name, course} = student; //This should be enough. However, this would cause to get undefined for name and course.\r\n        return (\r\n          &lt;Student\r\n            key={uuidv4()}\r\n            name={name}\r\n            course={course}\r\n          /&gt;\r\n        );  \r\n      })}\r\n      &lt;/&gt;;\r\n    }\r\n\r\nError:\r\n\r\n    Screens/Students.tsx:11:53 - error TS2345: Argument of type &#39;StudentInfo&#39; is not assignable to parameter of type &#39;string&#39;.\r\n    \r\n    11     const {name, course} = JSON.parse(student);\r\n\r\nStudentInfo.tsx:\r\n\r\n    export type StudentInfo = {\r\n      name: string;\r\n      course: string;\r\n    };\r\n    \r\n    export type StudentInfoProps = {\r\n      studentList: StudentInfo[];\r\n    };\r\n    \r\n    export type RootStackParamList = {\r\n      ReactNative: {studentList: StudentInfoProps};\r\n    };\r\n\r\nDo you what could cause to obtain a string when iterating over an object?\r\n\r\nThis object is coming from Android Native:\r\n\r\nMyReactActivity.java:\r\n\r\n    public class MyReactActivity extends ReactActivity  implements DefaultHardwareBackBtnHandler {\r\n        private ReactInstanceManager mReactInstanceManager;\r\n        private ReactRootView mReactRootView;\r\n    \tprotected void onCreate(Bundle savedInstanceState) {\r\n    \t\tsuper.onCreate(savedInstanceState);\r\n    \r\n    \t\tmReactRootView = new ReactRootView(this);\r\n    \t\tGson gson = new Gson();\r\n    \t\tBundle initialProperties = new Bundle();\r\n    \t\t\tStudent stud1 = new Student(&quot;John Doe&quot;, &quot;Javascript&quot;);\r\n    \t\t\tStudent stud2 = new Student(&quot;Jane Doe&quot;, &quot;Typescript&quot; );\r\n    \t\t\tStudent stud3 = new Student(&quot;Greg Doe&quot;, &quot;React Native&quot;);\r\n    \t\t\tArrayList&lt;String&gt; studentList = new ArrayList&lt;&gt;();\r\n    \t\t\tstudentList.add(gson.toJson(stud1));\r\n    \t\t\tstudentList.add(gson.toJson(stud2));\r\n    \t\t\tstudentList.add(gson.toJson(stud3));\r\n    \t\t\tinitialProperties.putStringArrayList(&quot;studentList&quot;, studentList);\r\n    \t\t\t\r\n    \t\tmReactRootView.startReactApplication(mReactInstanceManager, &quot;RNProject&quot;, initialProperties);\r\n    \t\t\r\n    \t\tsetContentView(mReactRootView);\r\n    \t}\r\n    }\r\n\r\nHere I defined the Student object in java which then is passed to React Native:\r\n\r\nStudent,java:\r\n\r\n    package com.rnproject.screens.reactnative.helpers;\r\n    \r\n    import java.io.Serializable;\r\n    \r\n    public class Student implements Serializable {\r\n        private String name;\r\n        private String course;\r\n    \r\n        public Student(){}\r\n    \r\n        @Override\r\n        public String toString(){\r\n            return &quot;{name=&quot;+name+&quot;,course=&quot;+course+&quot;}&quot;;\r\n        }\r\n    \r\n        public Student(String name, String course){\r\n            this.name = name;\r\n            this.course = course;\r\n        }\r\n    }\r\n\r\nDo you see any wrong with the student object that can cause to get a string during iteration with map?\r\n\r\nWhy I am not allow to do something like this?\r\n\r\n    const students = [{&quot;name&quot;:&quot;John Doe&quot;,\r\n                   &quot;course&quot;:&quot;Typescript&quot;},\r\n                   {&quot;name&quot;:&quot;Jane Doe&quot;,\r\n                   &quot;course&quot;:&quot;Javascript&quot;}]\r\n    \r\n    \r\n    const tmp = students.map(student =&gt; {\r\n      const {name, course} = student;\r\n      console.log(name);\r\n      console.log(course);\r\n    })\r\n\r\nThanks a lot for your help!","title":"error TS2345: Argument of type &#39;StudentInfo&#39; is not assignable to parameter of type &#39;string&#39;","body":"<p>I am getting string type when iterating over an object using map. So I am forced to use JSON.parse and then use the object fields.</p>\n<p>Here is my component in TS causing the issues:</p>\n<p>StudentsScreen.tsx:</p>\n<pre><code>export default function StudentsScreen(props: StudentInfoProps) {\n  const {studentList} = props;\n  console.log(typeof studentList);//object\n  console.log(JSON.stringify(studentList)); //[&quot;{\\&quot;name\\&quot;:\\&quot;John Doe\\&quot;,\\&quot;course\\&quot;:\\&quot;Javascript\\&quot;}&quot;,&quot;{\\&quot;name\\&quot;:\\&quot;Jane Doe\\&quot;,\\&quot;course\\&quot;:\\&quot;Typescript\\&quot;}&quot;,&quot;{\\&quot;name\\&quot;:\\&quot;Greg Doe\\&quot;,\\&quot;course\\&quot;:\\&quot;ReactNative\\&quot;}&quot;]\n  return &lt;&gt; {\n    studentList?.map(student =&gt; {\n    console.log(typeof student);//string\n    const {name, course} = JSON.parse(student); //I should not need to do this\n    //const {name, course} = student; //This should be enough. However, this would cause to get undefined for name and course.\n    return (\n      &lt;Student\n        key={uuidv4()}\n        name={name}\n        course={course}\n      /&gt;\n    );  \n  })}\n  &lt;/&gt;;\n}\n</code></pre>\n<p>Error:</p>\n<pre><code>Screens/Students.tsx:11:53 - error TS2345: Argument of type 'StudentInfo' is not assignable to parameter of type 'string'.\n\n11     const {name, course} = JSON.parse(student);\n</code></pre>\n<p>StudentInfo.tsx:</p>\n<pre><code>export type StudentInfo = {\n  name: string;\n  course: string;\n};\n\nexport type StudentInfoProps = {\n  studentList: StudentInfo[];\n};\n\nexport type RootStackParamList = {\n  ReactNative: {studentList: StudentInfoProps};\n};\n</code></pre>\n<p>Do you what could cause to obtain a string when iterating over an object?</p>\n<p>This object is coming from Android Native:</p>\n<p>MyReactActivity.java:</p>\n<pre><code>public class MyReactActivity extends ReactActivity  implements DefaultHardwareBackBtnHandler {\n    private ReactInstanceManager mReactInstanceManager;\n    private ReactRootView mReactRootView;\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n\n        mReactRootView = new ReactRootView(this);\n        Gson gson = new Gson();\n        Bundle initialProperties = new Bundle();\n            Student stud1 = new Student(&quot;John Doe&quot;, &quot;Javascript&quot;);\n            Student stud2 = new Student(&quot;Jane Doe&quot;, &quot;Typescript&quot; );\n            Student stud3 = new Student(&quot;Greg Doe&quot;, &quot;React Native&quot;);\n            ArrayList&lt;String&gt; studentList = new ArrayList&lt;&gt;();\n            studentList.add(gson.toJson(stud1));\n            studentList.add(gson.toJson(stud2));\n            studentList.add(gson.toJson(stud3));\n            initialProperties.putStringArrayList(&quot;studentList&quot;, studentList);\n            \n        mReactRootView.startReactApplication(mReactInstanceManager, &quot;RNProject&quot;, initialProperties);\n        \n        setContentView(mReactRootView);\n    }\n}\n</code></pre>\n<p>Here I defined the Student object in java which then is passed to React Native:</p>\n<p>Student,java:</p>\n<pre><code>package com.rnproject.screens.reactnative.helpers;\n\nimport java.io.Serializable;\n\npublic class Student implements Serializable {\n    private String name;\n    private String course;\n\n    public Student(){}\n\n    @Override\n    public String toString(){\n        return &quot;{name=&quot;+name+&quot;,course=&quot;+course+&quot;}&quot;;\n    }\n\n    public Student(String name, String course){\n        this.name = name;\n        this.course = course;\n    }\n}\n</code></pre>\n<p>Do you see any wrong with the student object that can cause to get a string during iteration with map?</p>\n<p>Why I am not allow to do something like this?</p>\n<pre><code>const students = [{&quot;name&quot;:&quot;John Doe&quot;,\n               &quot;course&quot;:&quot;Typescript&quot;},\n               {&quot;name&quot;:&quot;Jane Doe&quot;,\n               &quot;course&quot;:&quot;Javascript&quot;}]\n\n\nconst tmp = students.map(student =&gt; {\n  const {name, course} = student;\n  console.log(name);\n  console.log(course);\n})\n</code></pre>\n<p>Thanks a lot for your help!</p>\n"},{"tags":["java","spring","hibernate","sqlite"],"owner":{"account_id":8565752,"reputation":615,"user_id":6418277,"accept_rate":81,"display_name":"Gaetan L."},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":93,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1695158767,"creation_date":1695158767,"question_id":77138057,"body_markdown":"I&#39;m very new to all this and I don&#39;t really know what I&#39;m doing, so forgive me if my problem seems trivial. I&#39;m trying to set up a project using Spring, Hibernate 6 and SQLite and I get en error message and can&#39;t find how to solve it. Here it is:\r\n\r\n    Caused by: org.hibernate.UnknownEntityTypeException: Unable to locate persister: com.example.demo.Message\r\n    at org.hibernate.metamodel.model.domain.internal.MappingMetamodelImpl.getEntityDescriptor(MappingMetamodelImpl.java:388) ~[hibernate-core-6.3.1.Final.jar:6.3.1.Final]\r\n    at org.hibernate.internal.SessionImpl.getEntityPersister(SessionImpl.java:1498) ~[hibernate-core-6.3.1.Final.jar:6.3.1.Final]\r\n    at org.hibernate.engine.internal.ForeignKeys.isTransient(ForeignKeys.java:292) ~[hibernate-core-6.3.1.Final.jar:6.3.1.Final]\r\n    at org.hibernate.event.internal.EntityState.getEntityState(EntityState.java:62) ~[hibernate-core-6.3.1.Final.jar:6.3.1.Final]\r\n    at org.hibernate.event.internal.DefaultPersistEventListener.entityState(DefaultPersistEventListener.java:112) ~[hibernate-core-6.3.1.Final.jar:6.3.1.Final]\r\n    at org.hibernate.event.internal.DefaultPersistEventListener.persist(DefaultPersistEventListener.java:85) ~[hibernate-core-6.3.1.Final.jar:6.3.1.Final]\r\n    at org.hibernate.event.internal.DefaultPersistEventListener.onPersist(DefaultPersistEventListener.java:77) ~[hibernate-core-6.3.1.Final.jar:6.3.1.Final]\r\n    at org.hibernate.event.internal.DefaultPersistEventListener.onPersist(DefaultPersistEventListener.java:54) ~[hibernate-core-6.3.1.Final.jar:6.3.1.Final]\r\n    at org.hibernate.event.service.internal.EventListenerGroupImpl.fireEventOnEachListener(EventListenerGroupImpl.java:127) ~[hibernate-core-6.3.1.Final.jar:6.3.1.Final]\r\n    at org.hibernate.internal.SessionImpl.firePersist(SessionImpl.java:766) ~[hibernate-core-6.3.1.Final.jar:6.3.1.Final]\r\n    ... 8 common frames omitted\r\n\r\nHere is the Message class :\r\n\r\n    package com.example.demo;\r\n    import jakarta.persistence.Entity; import jakarta.persistence.GeneratedValue; import jakarta.persistence.Id; import jakarta.persistence.Table;\r\n    @Entity @Table(name = &quot;message&quot;) public class Message {\r\n        @Id\r\n        @GeneratedValue\r\n        private String text;\r\n\r\n        public Message() {};\r\n\r\n        public Message(String name) {\r\n            this.text = name;\r\n        }\r\n\r\n        public void setText(String name) {\r\n            this.text = name;\r\n        }\r\n\r\n        public String getText() {\r\n            return text;\r\n        }\r\n\r\n        @Override\r\n        public String toString() {\r\n            return &quot;Message [text=&quot; + text + &quot;]&quot;;\r\n        }\r\n    }\r\n\r\nHere is the SpringBootApplication:\r\n\r\n    package com.example.demo;\r\n    import java.util.List;\r\n    import org.hibernate.Session;\r\n    import org.hibernate.SessionFactory;\r\n    import org.hibernate.cfg.Configuration;\r\n    import org.hibernate.service.ServiceRegistry;\r\n    import org.hibernate.boot.registry.StandardServiceRegistryBuilder;\r\n    import org.springframework.boot.CommandLineRunner;\r\n    import org.springframework.boot.SpringApplication;\r\n    import org.springframework.boot.autoconfigure.SpringBootApplication;\r\n\r\n    @SpringBootApplication\r\n    public class DemoSpringApplication implements CommandLineRunner {\r\n        public static void main(String[] args) {\r\n            SpringApplication.run(DemoSpringApplication.class, args);\r\n        }\r\n\r\n        private static SessionFactory configureSessionFactory() {\r\n            Configuration conf = new Configuration().configure();\r\n            ServiceRegistry sr = new StandardServiceRegistryBuilder().applySettings(conf.getProperties()).build();\r\n            SessionFactory sf = conf.buildSessionFactory(sr);\r\n            return sf;\r\n        }\r\n\r\n        @Override\r\n        public void run(String... args) throws Exception {\r\n            SessionFactory sf = configureSessionFactory();\r\n            Session session = sf.openSession();\r\n                session.beginTransaction();\r\n                    Message message1 = new Message(&quot;Message one&quot;);\r\n                    Message message2 = new Message(&quot;Message two&quot;);\r\n                    Message message3 = new Message(&quot;Message three&quot;);\r\n                    session.persist(message1);\r\n                    session.persist(message2);\r\n                    session.persist(message3);\r\n                    session.getTransaction().commit();\r\n\r\n                    List&lt;Message&gt; messages = session.createQuery(&quot;from Message&quot;, Message.class).list();\r\n                    messages.forEach(m -&gt; {\r\n                        System.out.println(&quot;Print message text : &quot; + m.getText());\r\n                    });\r\n                session.close();\r\n            sf.close();\r\n        }\r\n    }\r\n\r\nhibernate.cfg.xml\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n    &lt;!DOCTYPE hibernate-configuration PUBLIC &quot;-//Hibernate/Hibernate Configuration DTD 3.0//EN&quot; &quot;http://www.hibernate.org/dtd/hibernate-configuration-3.0.dtd&quot;&gt;\r\n\r\n    &lt;hibernate-configuration&gt;\r\n        &lt;session-factory&gt;\r\n            &lt;property name=&quot;show_sql&quot;&gt;true&lt;/property&gt;\r\n            &lt;property name=&quot;format_sql&quot;&gt;true&lt;/property&gt;\r\n            &lt;property name=&quot;dialect&quot;&gt;org.hibernate.community.dialect.SQLiteDialect&lt;/property&gt;\r\n            &lt;property name=&quot;connection.driver_class&quot;&gt;org.sqlite.JDBC&lt;/property&gt;\r\n            &lt;property name=&quot;connection.url&quot;&gt;jdbc:sqlite:test-spring.db&lt;/property&gt;\r\n            &lt;property name=&quot;connection.username&quot;&gt;&lt;/property&gt;\r\n            &lt;property name=&quot;connection.password&quot;&gt;&lt;/property&gt;\r\n            &lt;property name=&quot;hibernate.hbm2ddl.auto&quot;&gt;update&lt;/property&gt;\r\n            &lt;mapping class=&quot;com.example.demo.Message&quot;/&gt;\r\n        &lt;/session-factory&gt;\r\n    &lt;/hibernate-configuration&gt;\r\n\r\nbuild.gradle\r\n\r\n    plugins {\r\n        id &#39;java&#39;\r\n        id &#39;org.springframework.boot&#39; version &#39;3.1.3&#39;\r\n        id &#39;io.spring.dependency-management&#39; version &#39;1.1.3&#39;\r\n    }\r\n    group = &#39;xxxx&#39; version = &#39;0.0.1-SNAPSHOT&#39;\r\n    java {\r\n        sourceCompatibility = &#39;20&#39;\r\n    }\r\n    repositories {\r\n        mavenCentral()\r\n    }\r\n    dependencies {\r\n        implementation &#39;org.springframework.boot:spring-boot-starter&#39; testImplementation &#39;org.springframework.boot:spring-boot-starter-test&#39;\r\n        implementation &#39;org.hibernate.orm:hibernate-core:6.3.1.Final&#39;\r\n        implementation &#39;org.hibernate.orm:hibernate-community-dialects:6.3.0.Final&#39;\r\n    }\r\n    tasks.named(&#39;test&#39;) {\r\n        useJUnitPlatform()\r\n    }\r\n    tasks.named(&quot;jar&quot;) {\r\n        enabled = false\r\n    }","title":"Hibernate 6 - UnknownEntityTypeException: Unable to locate persister","body":"<p>I'm very new to all this and I don't really know what I'm doing, so forgive me if my problem seems trivial. I'm trying to set up a project using Spring, Hibernate 6 and SQLite and I get en error message and can't find how to solve it. Here it is:</p>\n<pre><code>Caused by: org.hibernate.UnknownEntityTypeException: Unable to locate persister: com.example.demo.Message\nat org.hibernate.metamodel.model.domain.internal.MappingMetamodelImpl.getEntityDescriptor(MappingMetamodelImpl.java:388) ~[hibernate-core-6.3.1.Final.jar:6.3.1.Final]\nat org.hibernate.internal.SessionImpl.getEntityPersister(SessionImpl.java:1498) ~[hibernate-core-6.3.1.Final.jar:6.3.1.Final]\nat org.hibernate.engine.internal.ForeignKeys.isTransient(ForeignKeys.java:292) ~[hibernate-core-6.3.1.Final.jar:6.3.1.Final]\nat org.hibernate.event.internal.EntityState.getEntityState(EntityState.java:62) ~[hibernate-core-6.3.1.Final.jar:6.3.1.Final]\nat org.hibernate.event.internal.DefaultPersistEventListener.entityState(DefaultPersistEventListener.java:112) ~[hibernate-core-6.3.1.Final.jar:6.3.1.Final]\nat org.hibernate.event.internal.DefaultPersistEventListener.persist(DefaultPersistEventListener.java:85) ~[hibernate-core-6.3.1.Final.jar:6.3.1.Final]\nat org.hibernate.event.internal.DefaultPersistEventListener.onPersist(DefaultPersistEventListener.java:77) ~[hibernate-core-6.3.1.Final.jar:6.3.1.Final]\nat org.hibernate.event.internal.DefaultPersistEventListener.onPersist(DefaultPersistEventListener.java:54) ~[hibernate-core-6.3.1.Final.jar:6.3.1.Final]\nat org.hibernate.event.service.internal.EventListenerGroupImpl.fireEventOnEachListener(EventListenerGroupImpl.java:127) ~[hibernate-core-6.3.1.Final.jar:6.3.1.Final]\nat org.hibernate.internal.SessionImpl.firePersist(SessionImpl.java:766) ~[hibernate-core-6.3.1.Final.jar:6.3.1.Final]\n... 8 common frames omitted\n</code></pre>\n<p>Here is the Message class :</p>\n<pre><code>package com.example.demo;\nimport jakarta.persistence.Entity; import jakarta.persistence.GeneratedValue; import jakarta.persistence.Id; import jakarta.persistence.Table;\n@Entity @Table(name = &quot;message&quot;) public class Message {\n    @Id\n    @GeneratedValue\n    private String text;\n\n    public Message() {};\n\n    public Message(String name) {\n        this.text = name;\n    }\n\n    public void setText(String name) {\n        this.text = name;\n    }\n\n    public String getText() {\n        return text;\n    }\n\n    @Override\n    public String toString() {\n        return &quot;Message [text=&quot; + text + &quot;]&quot;;\n    }\n}\n</code></pre>\n<p>Here is the SpringBootApplication:</p>\n<pre><code>package com.example.demo;\nimport java.util.List;\nimport org.hibernate.Session;\nimport org.hibernate.SessionFactory;\nimport org.hibernate.cfg.Configuration;\nimport org.hibernate.service.ServiceRegistry;\nimport org.hibernate.boot.registry.StandardServiceRegistryBuilder;\nimport org.springframework.boot.CommandLineRunner;\nimport org.springframework.boot.SpringApplication;\nimport org.springframework.boot.autoconfigure.SpringBootApplication;\n\n@SpringBootApplication\npublic class DemoSpringApplication implements CommandLineRunner {\n    public static void main(String[] args) {\n        SpringApplication.run(DemoSpringApplication.class, args);\n    }\n\n    private static SessionFactory configureSessionFactory() {\n        Configuration conf = new Configuration().configure();\n        ServiceRegistry sr = new StandardServiceRegistryBuilder().applySettings(conf.getProperties()).build();\n        SessionFactory sf = conf.buildSessionFactory(sr);\n        return sf;\n    }\n\n    @Override\n    public void run(String... args) throws Exception {\n        SessionFactory sf = configureSessionFactory();\n        Session session = sf.openSession();\n            session.beginTransaction();\n                Message message1 = new Message(&quot;Message one&quot;);\n                Message message2 = new Message(&quot;Message two&quot;);\n                Message message3 = new Message(&quot;Message three&quot;);\n                session.persist(message1);\n                session.persist(message2);\n                session.persist(message3);\n                session.getTransaction().commit();\n\n                List&lt;Message&gt; messages = session.createQuery(&quot;from Message&quot;, Message.class).list();\n                messages.forEach(m -&gt; {\n                    System.out.println(&quot;Print message text : &quot; + m.getText());\n                });\n            session.close();\n        sf.close();\n    }\n}\n</code></pre>\n<p>hibernate.cfg.xml</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;!DOCTYPE hibernate-configuration PUBLIC &quot;-//Hibernate/Hibernate Configuration DTD 3.0//EN&quot; &quot;http://www.hibernate.org/dtd/hibernate-configuration-3.0.dtd&quot;&gt;\n\n&lt;hibernate-configuration&gt;\n    &lt;session-factory&gt;\n        &lt;property name=&quot;show_sql&quot;&gt;true&lt;/property&gt;\n        &lt;property name=&quot;format_sql&quot;&gt;true&lt;/property&gt;\n        &lt;property name=&quot;dialect&quot;&gt;org.hibernate.community.dialect.SQLiteDialect&lt;/property&gt;\n        &lt;property name=&quot;connection.driver_class&quot;&gt;org.sqlite.JDBC&lt;/property&gt;\n        &lt;property name=&quot;connection.url&quot;&gt;jdbc:sqlite:test-spring.db&lt;/property&gt;\n        &lt;property name=&quot;connection.username&quot;&gt;&lt;/property&gt;\n        &lt;property name=&quot;connection.password&quot;&gt;&lt;/property&gt;\n        &lt;property name=&quot;hibernate.hbm2ddl.auto&quot;&gt;update&lt;/property&gt;\n        &lt;mapping class=&quot;com.example.demo.Message&quot;/&gt;\n    &lt;/session-factory&gt;\n&lt;/hibernate-configuration&gt;\n</code></pre>\n<p>build.gradle</p>\n<pre><code>plugins {\n    id 'java'\n    id 'org.springframework.boot' version '3.1.3'\n    id 'io.spring.dependency-management' version '1.1.3'\n}\ngroup = 'xxxx' version = '0.0.1-SNAPSHOT'\njava {\n    sourceCompatibility = '20'\n}\nrepositories {\n    mavenCentral()\n}\ndependencies {\n    implementation 'org.springframework.boot:spring-boot-starter' testImplementation 'org.springframework.boot:spring-boot-starter-test'\n    implementation 'org.hibernate.orm:hibernate-core:6.3.1.Final'\n    implementation 'org.hibernate.orm:hibernate-community-dialects:6.3.0.Final'\n}\ntasks.named('test') {\n    useJUnitPlatform()\n}\ntasks.named(&quot;jar&quot;) {\n    enabled = false\n}\n</code></pre>\n"},{"tags":["java","android","libgdx","scrollpane"],"answers":[{"comments":[{"owner":{"account_id":2048935,"reputation":4092,"user_id":1828361,"accept_rate":65,"display_name":"csga5000"},"score":0,"creation_date":1375374868,"post_id":17999317,"comment_id":26319476,"body_markdown":"Also, where did you get Config.VIRTUAL_VIEW_WIDTH?","body":"Also, where did you get Config.VIRTUAL_VIEW_WIDTH?"},{"owner":{"account_id":2017250,"reputation":6162,"user_id":1804251,"accept_rate":89,"display_name":"bemeyer"},"score":0,"creation_date":1375375376,"post_id":17999317,"comment_id":26319785,"body_markdown":"... this is a static float i use in my programm. Replace it with some value","body":"... this is a static float i use in my programm. Replace it with some value"},{"owner":{"account_id":2048935,"reputation":4092,"user_id":1828361,"accept_rate":65,"display_name":"csga5000"},"score":0,"creation_date":1375378677,"post_id":17999317,"comment_id":26321581,"body_markdown":"I did, I used a static field called WIDTH.  I&#39;m going to edit my post so it shows the container","body":"I did, I used a static field called WIDTH.  I&#39;m going to edit my post so it shows the container"},{"owner":{"account_id":2048935,"reputation":4092,"user_id":1828361,"accept_rate":65,"display_name":"csga5000"},"score":0,"creation_date":1375379993,"post_id":17999317,"comment_id":26322413,"body_markdown":"I&#39;ll add a screenshot.","body":"I&#39;ll add a screenshot."},{"owner":{"account_id":2017250,"reputation":6162,"user_id":1804251,"accept_rate":89,"display_name":"bemeyer"},"score":0,"creation_date":1375380227,"post_id":17999317,"comment_id":26322545,"body_markdown":"did you tried to scroll down? jsut by holding the mouse pressed .. maybe just the style does not work. the rest does look right i think","body":"did you tried to scroll down? jsut by holding the mouse pressed .. maybe just the style does not work. the rest does look right i think"},{"owner":{"account_id":2048935,"reputation":4092,"user_id":1828361,"accept_rate":65,"display_name":"csga5000"},"score":0,"creation_date":1375381977,"post_id":17999317,"comment_id":26323602,"body_markdown":"Yeah, I have, but I just realized something. The buttons aren&#39;t working like I would expect them to either.  Maybe my stage isn&#39;t distrubuting/receiving input properly...  I set the input processor... And you can download a desktop version here:  http://hobogames.atspace.cc/ (Just click the wizard wars, and download the desktop version, and see for yourself what&#39;s up(It&#39;s the pvp menu)","body":"Yeah, I have, but I just realized something. The buttons aren&#39;t working like I would expect them to either.  Maybe my stage isn&#39;t distrubuting/receiving input properly...  I set the input processor... And you can download a desktop version here:  <a href=\"http://hobogames.atspace.cc/\" rel=\"nofollow noreferrer\">hobogames.atspace.cc</a> (Just click the wizard wars, and download the desktop version, and see for yourself what&#39;s up(It&#39;s the pvp menu)"},{"owner":{"account_id":1051758,"reputation":1562,"user_id":1055516,"accept_rate":73,"display_name":"Scuba Steve"},"score":0,"creation_date":1408852391,"post_id":17999317,"comment_id":39744360,"body_markdown":"Container in a container is a great way to handle scrollpane. I use a table, then throw my scrollpane in a cell in the table, then throw the content in there.","body":"Container in a container is a great way to handle scrollpane. I use a table, then throw my scrollpane in a cell in the table, then throw the content in there."}],"tags":[],"owner":{"account_id":2017250,"reputation":6162,"user_id":1804251,"accept_rate":89,"display_name":"bemeyer"},"comment_count":7,"down_vote_count":0,"up_vote_count":8,"is_accepted":false,"score":8,"last_activity_date":1535700085,"creation_date":1375373739,"answer_id":17999317,"question_id":17997128,"body_markdown":"You do actually need two things. An outer Container and an inner Container. You do regularly use two Tables for this. So here is a small example how I use the scrollPane. Actually with no style but it should make it clear.\r\n\r\n\tthis.table = new Table();\r\n\tthis.container = new Table();\r\n\tscroll = new ScrollPane(table);\r\n\tcontainer.add(scroll).width(500f).height(500f);\r\n\tcontainer.row();\r\n\r\nThe table is the table one where you do add the stuff that should be scrollable. The container is the outer box. So you can add for example a headline above your scrollbox. The outer box (container) does need a size. Else you will not have any scrollbars or such. And you do need the inner table.\r\n\r\nSimple example for adding:\r\n\r\n\tstyle = new LabelStyle(font, Color.WHITE);\r\n\tlabel = new Label(null, style);\r\n\ttable.add(label);\r\n\ttable.row();\r\n\tlabel.setAlignment(1); // align center\r\n\r\ngive it more lines that it can show and you&#39;ll have a scroll pane. Else there is no scrollbar or such.\r\n\r\n&lt;br&gt;\r\nAll in one. You just missed the outer container i think. Add it and it should work. Don&#39;t forget to sett the sizes.","title":"libgdx ScrollPane - Doesn&#39;t scroll?","body":"<p>You do actually need two things. An outer Container and an inner Container. You do regularly use two Tables for this. So here is a small example how I use the scrollPane. Actually with no style but it should make it clear.</p>\n\n<pre><code>this.table = new Table();\nthis.container = new Table();\nscroll = new ScrollPane(table);\ncontainer.add(scroll).width(500f).height(500f);\ncontainer.row();\n</code></pre>\n\n<p>The table is the table one where you do add the stuff that should be scrollable. The container is the outer box. So you can add for example a headline above your scrollbox. The outer box (container) does need a size. Else you will not have any scrollbars or such. And you do need the inner table.</p>\n\n<p>Simple example for adding:</p>\n\n<pre><code>style = new LabelStyle(font, Color.WHITE);\nlabel = new Label(null, style);\ntable.add(label);\ntable.row();\nlabel.setAlignment(1); // align center\n</code></pre>\n\n<p>give it more lines that it can show and you'll have a scroll pane. Else there is no scrollbar or such.</p>\n\n<p><br>\nAll in one. You just missed the outer container i think. Add it and it should work. Don't forget to sett the sizes.</p>\n"},{"tags":[],"owner":{"account_id":2048935,"reputation":4092,"user_id":1828361,"accept_rate":65,"display_name":"csga5000"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1375382547,"creation_date":1375382547,"answer_id":18002037,"question_id":17997128,"body_markdown":"My problem was that is wasn&#39;t receiving input.  My I shouldn&#39;t have set the input processor in the constructor, because, the previous screen was setting the processor to null when it was &quot;hidden&quot;, so when I moved the line to LobbyScreen&#39;s show method it happened after the previous screen was hidden, and the input is set correctly.","title":"libgdx ScrollPane - Doesn&#39;t scroll?","body":"<p>My problem was that is wasn't receiving input.  My I shouldn't have set the input processor in the constructor, because, the previous screen was setting the processor to null when it was \"hidden\", so when I moved the line to LobbyScreen's show method it happened after the previous screen was hidden, and the input is set correctly.</p>\n"},{"tags":[],"owner":{"account_id":2550024,"reputation":59,"user_id":2213991,"display_name":"junfeng"},"comment_count":0,"down_vote_count":1,"up_vote_count":2,"is_accepted":false,"score":1,"last_activity_date":1380356027,"creation_date":1380356027,"answer_id":19064861,"question_id":17997128,"body_markdown":"after you init the scrollpane you should call this first \r\n\r\n\t\tmScrollPane.layout();","title":"libgdx ScrollPane - Doesn&#39;t scroll?","body":"<p>after you init the scrollpane you should call this first </p>\n\n<pre><code>    mScrollPane.layout();\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3008761,"reputation":111,"user_id":2552687,"display_name":"Jason Wang"},"comment_count":0,"down_vote_count":1,"up_vote_count":9,"is_accepted":false,"score":8,"last_activity_date":1385624872,"creation_date":1385624872,"answer_id":20260449,"question_id":17997128,"body_markdown":"maybe you forget to make stage act in render(), add something like:\r\n\r\n    @Override\r\n    public void render(float delta) {\r\n        Gdx.gl.glClearColor(0, 0, 0, 1);\r\n        Gdx.gl.glClear(GL10.GL_COLOR_BUFFER_BIT);\r\n\r\n        stage.act(Math.min(Gdx.graphics.getDeltaTime(), 1 / 30f));\r\n        stage.draw();\r\n    }","title":"libgdx ScrollPane - Doesn&#39;t scroll?","body":"<p>maybe you forget to make stage act in render(), add something like:</p>\n\n<pre><code>@Override\npublic void render(float delta) {\n    Gdx.gl.glClearColor(0, 0, 0, 1);\n    Gdx.gl.glClear(GL10.GL_COLOR_BUFFER_BIT);\n\n    stage.act(Math.min(Gdx.graphics.getDeltaTime(), 1 / 30f));\n    stage.draw();\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":19812456,"reputation":1189,"user_id":14510925,"display_name":"Владислав Шестернин"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695158742,"creation_date":1673536607,"answer_id":75098540,"question_id":17997128,"body_markdown":"The element to be scrolled must be added to the stage or group before passing it to the ScrollPane\r\n-\r\n\r\n1. Create the necessary actor and add it to the stage or group\r\n\r\n       val actor = Actor()\r\n       [Stage/Group].addActor(actor)\r\n\r\n2. Create a ScrollPane and place an actor in it\r\n\r\n       val scrollPane = ScrollPane(actor)\r\n\r\n3. Set the position and dimensions for the actor and the ScrollPane\r\n\r\n       actor.setBounds(x,y,w,h) | scrollPane.setBounds(x,y,w,h)\r\n\r\n\r\n","title":"libgdx ScrollPane - Doesn&#39;t scroll?","body":"<h2>The element to be scrolled must be added to the stage or group before passing it to the ScrollPane</h2>\n<ol>\n<li><p>Create the necessary actor and add it to the stage or group</p>\n<pre><code>val actor = Actor()\n[Stage/Group].addActor(actor)\n</code></pre>\n</li>\n<li><p>Create a ScrollPane and place an actor in it</p>\n<pre><code>val scrollPane = ScrollPane(actor)\n</code></pre>\n</li>\n<li><p>Set the position and dimensions for the actor and the ScrollPane</p>\n<pre><code>actor.setBounds(x,y,w,h) | scrollPane.setBounds(x,y,w,h)\n</code></pre>\n</li>\n</ol>\n"}],"owner":{"account_id":2048935,"reputation":4092,"user_id":1828361,"accept_rate":65,"display_name":"csga5000"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":13428,"favorite_count":0,"down_vote_count":1,"up_vote_count":6,"accepted_answer_id":18002037,"answer_count":5,"score":5,"last_activity_date":1695158742,"creation_date":1375368070,"question_id":17997128,"body_markdown":"I&#39;m making a lobby in a multi-player game, which may have any number of players displayed in a table.  I have the following code:\r\n\r\n    camera = new OrthographicCamera(WIDTH,HEIGHT);\r\n\t\tcamera.position.set(WIDTH/2,HEIGHT/2, 0);\r\n\t\tcamera.update();\r\n\t\t\r\n\t\tstage = new Stage();\r\n\t\tGdx.input.setInputProcessor(stage);\r\n\t\tstage.setCamera(camera);\r\n\t\tstage.setViewport(WIDTH,HEIGHT,false);\r\n\t\t\r\n\t\tScrollPaneStyle paneStyle = new ScrollPaneStyle();\r\n\t\tpaneStyle.background = new TextureRegionDrawable(WizardsDuel.atlas.findRegion(&quot;cavebg&quot;));\r\n\t\tpaneStyle.vScrollKnob = new TextureRegionDrawable(WizardsDuel.atlas.findRegion(&quot;GUI/slidernob&quot;));\r\n\t\tpaneStyle.hScroll = paneStyle.hScrollKnob = paneStyle.vScroll = paneStyle.vScrollKnob;\r\n\t\t\r\n\t\tTable container = new Table();\r\n\t\ttable = new Table();\r\n\t\tScrollPane pane = new ScrollPane(table,paneStyle);\r\n\t\tcontainer.add(pane).width(WIDTH).height(HEIGHT);\r\n\t\tcontainer.row();\r\n\t\tcontainer.setBounds(0,0,WIDTH,HEIGHT);\r\n\t\tstage.addActor(container);\r\n\t\t\r\n\t\tfont = new BitmapFont();\r\n\t\tcolor = new Color(0,0,0,1);\r\n\t\tstyle = new TextButtonStyle();\r\n\t\tstyle.font = font;\r\n\t\tstyle.up = new TextureRegionDrawable(WizardsDuel.atlas.findRegion(&quot;GUI/guibg&quot;));\r\n\t\tstyle.fontColor = color;\r\n\t\t\r\n\t\thandler = new ChangeHandler();\r\n\t\tArrayList&lt;User&gt; users = FirebaseManager.lobbyUsers;\r\n\t\tfor(int i = 0; i &lt; users.size() || i &lt; 100; i++){\r\n\t\t\tTextButton tmp = new TextButton(&quot;&quot;,style);\r\n\t\t\ttmp.scale(2);\r\n\t\t\t//tmp.setText(users.get(i).name);\r\n\t\t\ttmp.setText(i+ &quot;   asdf&quot;);\r\n\t\t\ttmp.addListener(handler);\r\n\t\t\ttable.add(tmp).width(WIDTH/4f);\r\n\t\t\tif(i%2 == 1 &amp;&amp; i &gt; 0)\r\n\t\t\t\ttable.row();\r\n\t\t}\r\n\r\n\r\nDespite the manner in which the table clearly extends below the bottom of the screen(which should be the bottom of the scroll pane), there is no scroll bar, and clicking and dragging does nothing.\r\n\r\nScreenshot: \r\n![enter image description here][1]\r\n\r\n\r\n  [1]: http://i.stack.imgur.com/h3blj.png","title":"libgdx ScrollPane - Doesn&#39;t scroll?","body":"<p>I'm making a lobby in a multi-player game, which may have any number of players displayed in a table.  I have the following code:</p>\n\n<pre><code>camera = new OrthographicCamera(WIDTH,HEIGHT);\n    camera.position.set(WIDTH/2,HEIGHT/2, 0);\n    camera.update();\n\n    stage = new Stage();\n    Gdx.input.setInputProcessor(stage);\n    stage.setCamera(camera);\n    stage.setViewport(WIDTH,HEIGHT,false);\n\n    ScrollPaneStyle paneStyle = new ScrollPaneStyle();\n    paneStyle.background = new TextureRegionDrawable(WizardsDuel.atlas.findRegion(\"cavebg\"));\n    paneStyle.vScrollKnob = new TextureRegionDrawable(WizardsDuel.atlas.findRegion(\"GUI/slidernob\"));\n    paneStyle.hScroll = paneStyle.hScrollKnob = paneStyle.vScroll = paneStyle.vScrollKnob;\n\n    Table container = new Table();\n    table = new Table();\n    ScrollPane pane = new ScrollPane(table,paneStyle);\n    container.add(pane).width(WIDTH).height(HEIGHT);\n    container.row();\n    container.setBounds(0,0,WIDTH,HEIGHT);\n    stage.addActor(container);\n\n    font = new BitmapFont();\n    color = new Color(0,0,0,1);\n    style = new TextButtonStyle();\n    style.font = font;\n    style.up = new TextureRegionDrawable(WizardsDuel.atlas.findRegion(\"GUI/guibg\"));\n    style.fontColor = color;\n\n    handler = new ChangeHandler();\n    ArrayList&lt;User&gt; users = FirebaseManager.lobbyUsers;\n    for(int i = 0; i &lt; users.size() || i &lt; 100; i++){\n        TextButton tmp = new TextButton(\"\",style);\n        tmp.scale(2);\n        //tmp.setText(users.get(i).name);\n        tmp.setText(i+ \"   asdf\");\n        tmp.addListener(handler);\n        table.add(tmp).width(WIDTH/4f);\n        if(i%2 == 1 &amp;&amp; i &gt; 0)\n            table.row();\n    }\n</code></pre>\n\n<p>Despite the manner in which the table clearly extends below the bottom of the screen(which should be the bottom of the scroll pane), there is no scroll bar, and clicking and dragging does nothing.</p>\n\n<p>Screenshot: \n<img src=\"https://i.stack.imgur.com/h3blj.png\" alt=\"enter image description here\"></p>\n"},{"tags":["java","android","ios","libgdx","box2d"],"comments":[{"owner":{"account_id":3838250,"reputation":9521,"user_id":3182091,"accept_rate":91,"display_name":"Robert P"},"score":0,"creation_date":1444716080,"post_id":33094452,"comment_id":54006124,"body_markdown":"`setTransform` is not actually buggy (as much as i know), but it does not use any physics, which usually is not the disired behavior. If you want the `circle` to have velocity after being teleported, then you can simply add an impact to it, as soon as it has been teleported. If the teleport itself should throw objects out of it&#39;s way, you might teleport the object near to the teleport point and move it (verry fast) to the teleport-point.","body":"<code>setTransform</code> is not actually buggy (as much as i know), but it does not use any physics, which usually is not the disired behavior. If you want the <code>circle</code> to have velocity after being teleported, then you can simply add an impact to it, as soon as it has been teleported. If the teleport itself should throw objects out of it&#39;s way, you might teleport the object near to the teleport point and move it (verry fast) to the teleport-point."},{"owner":{"account_id":2189322,"reputation":3779,"user_id":1936873,"display_name":"Netero"},"score":0,"creation_date":1444724478,"post_id":33094452,"comment_id":54010602,"body_markdown":"i have already try to use settransform() in one of my games, but my physics body had Jointure with other budies so it didn&#39;t work like i wanted, so i did this to teleport my bodies : destroy them at a point and re-create them at another point and it works for me","body":"i have already try to use settransform() in one of my games, but my physics body had Jointure with other budies so it didn&#39;t work like i wanted, so i did this to teleport my bodies : destroy them at a point and re-create them at another point and it works for me"}],"answers":[{"comments":[{"owner":{"account_id":5868763,"reputation":676,"user_id":4621739,"accept_rate":93,"display_name":"Cooper Scott"},"score":0,"creation_date":1444740218,"post_id":33095727,"comment_id":54020796,"body_markdown":"Thanks for this. I will have to try this out in a few hours","body":"Thanks for this. I will have to try this out in a few hours"},{"owner":{"account_id":5868763,"reputation":676,"user_id":4621739,"accept_rate":93,"display_name":"Cooper Scott"},"score":0,"creation_date":1444780247,"post_id":33095727,"comment_id":54043136,"body_markdown":"Worked Perfect! Just now... My Balls speed is stuck at a max speed (that I didn&#39;t set)... Any Ideas?","body":"Worked Perfect! Just now... My Balls speed is stuck at a max speed (that I didn&#39;t set)... Any Ideas?"},{"owner":{"account_id":5190284,"reputation":13363,"user_id":4153426,"display_name":"m.antkowicz"},"score":0,"creation_date":1444821843,"post_id":33095727,"comment_id":54060489,"body_markdown":"How is it stuck? What is happening?","body":"How is it stuck? What is happening?"},{"owner":{"account_id":5868763,"reputation":676,"user_id":4621739,"accept_rate":93,"display_name":"Cooper Scott"},"score":0,"creation_date":1444828618,"post_id":33095727,"comment_id":54065003,"body_markdown":"@m.antkawicz The object will go a certain speed &amp; then go no faster. Looked around the internet and many people have the same problem with no solution. Some suggested applying force... although... that didn&#39;t work for me, or maybe I did the math wrong.","body":"@m.antkawicz The object will go a certain speed &amp; then go no faster. Looked around the internet and many people have the same problem with no solution. Some suggested applying force... although... that didn&#39;t work for me, or maybe I did the math wrong."},{"owner":{"account_id":5190284,"reputation":13363,"user_id":4153426,"display_name":"m.antkowicz"},"score":0,"creation_date":1444829175,"post_id":33095727,"comment_id":54065404,"body_markdown":"how many meters you have for a pixel? Box2d has a limit of speed (120m per second when 60fps) - if you are not using any conversion you may have this problem","body":"how many meters you have for a pixel? Box2d has a limit of speed (120m per second when 60fps) - if you are not using any conversion you may have this problem"}],"tags":[],"owner":{"account_id":5190284,"reputation":13363,"user_id":4153426,"display_name":"m.antkowicz"},"comment_count":5,"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1444718113,"creation_date":1444718113,"answer_id":33095727,"question_id":33094452,"body_markdown":"The **setTransform** method is not buggy itself. **It can cause some troubles because of ignoring physics which can appear when**:\r\n\r\n * **using joints** - joints provide some constraint and this &quot;violent&quot; change can make bodies behave weird\r\n * **collision exists** - because the transformed body can be &quot;pushed&quot; into other body\r\n\r\nThe situation you are describing is totally typical situation when **setTransform** is being used and I see no reason here to be afraid of it. You don&#39;t need any velocity here also.\r\n\r\n----\r\n\r\nHowever, if you decide to change the &quot;teleporting&quot; mechanism to applying the velocity to move object to the world point you should:\r\n\r\n * calculate velocity vector by subtracting target position and body position\r\n\r\n        Vector2 velocity = target.sub( body.getPosition() ) ); //where target is Vector2 of touched point\r\n\r\n * limit the velocity to some maximum I guess **if you need to** (this is optional)\r\n\r\n        //optional\r\n        velocity.nor();\r\n        velocity.mul( MAX_VALUE ); //MAX_VALUE is a float\r\n\r\n * set the velocity to the body\r\n\r\n        body.setLinearVelocity( velocity );\r\n\r\n * add to main loop (render method) check if the body is in target position (or in some range - due to precision there is small chance that it will precisely at the target if you will limit the velocity - if not I guess it should be in the target position after one iteration of world.update() )\r\n\r\n        if( body.getPosition().sub( target ).len() &lt; SOME_PRECISION )\r\n        {\r\n            body.setLinearVelocity( new Vector2(0, 0) );\r\n        }\r\n\r\nYou can also take a look at Box2D [MouseJoint](https://libgdx.badlogicgames.com/nightlies/docs/api/com/badlogic/gdx/physics/box2d/joints/MouseJoint.html) although I&#39;ve been never using this and cannot provide any hint here.","title":"Box2d setTransform","body":"<p>The <strong>setTransform</strong> method is not buggy itself. <strong>It can cause some troubles because of ignoring physics which can appear when</strong>:</p>\n\n<ul>\n<li><strong>using joints</strong> - joints provide some constraint and this \"violent\" change can make bodies behave weird</li>\n<li><strong>collision exists</strong> - because the transformed body can be \"pushed\" into other body</li>\n</ul>\n\n<p>The situation you are describing is totally typical situation when <strong>setTransform</strong> is being used and I see no reason here to be afraid of it. You don't need any velocity here also.</p>\n\n<hr>\n\n<p>However, if you decide to change the \"teleporting\" mechanism to applying the velocity to move object to the world point you should:</p>\n\n<ul>\n<li><p>calculate velocity vector by subtracting target position and body position</p>\n\n<pre><code>Vector2 velocity = target.sub( body.getPosition() ) ); //where target is Vector2 of touched point\n</code></pre></li>\n<li><p>limit the velocity to some maximum I guess <strong>if you need to</strong> (this is optional)</p>\n\n<pre><code>//optional\nvelocity.nor();\nvelocity.mul( MAX_VALUE ); //MAX_VALUE is a float\n</code></pre></li>\n<li><p>set the velocity to the body</p>\n\n<pre><code>body.setLinearVelocity( velocity );\n</code></pre></li>\n<li><p>add to main loop (render method) check if the body is in target position (or in some range - due to precision there is small chance that it will precisely at the target if you will limit the velocity - if not I guess it should be in the target position after one iteration of world.update() )</p>\n\n<pre><code>if( body.getPosition().sub( target ).len() &lt; SOME_PRECISION )\n{\n    body.setLinearVelocity( new Vector2(0, 0) );\n}\n</code></pre></li>\n</ul>\n\n<p>You can also take a look at Box2D <a href=\"https://libgdx.badlogicgames.com/nightlies/docs/api/com/badlogic/gdx/physics/box2d/joints/MouseJoint.html\" rel=\"nofollow\">MouseJoint</a> although I've been never using this and cannot provide any hint here.</p>\n"},{"tags":[],"owner":{"account_id":19812456,"reputation":1189,"user_id":14510925,"display_name":"Владислав Шестернин"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695158733,"creation_date":1677582811,"answer_id":75591255,"question_id":33094452,"body_markdown":"Place the **setTransform()** code in the **LibGDX Gdx.app.postRunnable()** method:\r\n\r\n    Gdx.app.postRunnable {\r\n        body.setTransform(10f, 10f, 0f)\r\n    }\r\n\r\n","title":"Box2d setTransform","body":"<p>Place the <strong>setTransform()</strong> code in the <strong>LibGDX Gdx.app.postRunnable()</strong> method:</p>\n<pre><code>Gdx.app.postRunnable {\n    body.setTransform(10f, 10f, 0f)\n}\n</code></pre>\n"}],"owner":{"account_id":5868763,"reputation":676,"user_id":4621739,"accept_rate":93,"display_name":"Cooper Scott"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2439,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":33095727,"answer_count":2,"score":1,"last_activity_date":1695158733,"creation_date":1444712369,"question_id":33094452,"body_markdown":"Set the scene:\r\n• Our environment: LibGdx Android &amp; iOS //If you don&#39;t know LibGdx, it&#39;s fine, just know that this program is being build for iOS and Android\r\n\r\n• Our screen has nothing on it, just a Box2d Circle\r\n\r\nOkay, so, what do I need to do?\r\n**I need to make my Box2d Circle to &quot;teleport&quot; to where the screen is tapped... but I need it to have some velocity so if it collides w/ something else it will throw the other object out of its way.**\r\n\r\nI am currently using body.setTransform() but I have no velocity and people say it is very buggy.\r\n\r\nHow can I do this? Thank you!","title":"Box2d setTransform","body":"<p>Set the scene:\n• Our environment: LibGdx Android &amp; iOS //If you don't know LibGdx, it's fine, just know that this program is being build for iOS and Android</p>\n\n<p>• Our screen has nothing on it, just a Box2d Circle</p>\n\n<p>Okay, so, what do I need to do?\n<strong>I need to make my Box2d Circle to \"teleport\" to where the screen is tapped... but I need it to have some velocity so if it collides w/ something else it will throw the other object out of its way.</strong></p>\n\n<p>I am currently using body.setTransform() but I have no velocity and people say it is very buggy.</p>\n\n<p>How can I do this? Thank you!</p>\n"}],"has_more":true,"quota_max":10000,"quota_remaining":9959,"page":175,"page_size":100}
