{"items":[{"tags":["java","swing"],"comments":[{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":1,"creation_date":1672941220,"post_id":75022406,"comment_id":132391848,"body_markdown":"You really need to provide a [minimal reproducible example](https://stackoverflow.com/help/minimal-reproducible-example)","body":"You really need to provide a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>"}],"answers":[{"tags":[],"owner":{"account_id":114128,"reputation":50467,"user_id":300257,"accept_rate":89,"display_name":"Gilbert Le Blanc"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1672942088,"creation_date":1672942088,"answer_id":75022638,"question_id":75022406,"body_markdown":"Here&#39;s a GUI I just did for someone else.  I added the yellow background.\r\n\r\n[![Example][1]][1]\r\n\r\nI don&#39;t see white in between the Swing components.\r\n\r\nHere&#39;s the complete runnable code.\r\n\r\n    import java.awt.BorderLayout;\r\n    import java.awt.Color;\r\n    import java.awt.Font;\r\n    import java.awt.GridBagConstraints;\r\n    import java.awt.GridBagLayout;\r\n    import java.awt.Insets;\r\n    import java.awt.event.ActionEvent;\r\n    import java.awt.event.ActionListener;\r\n    \r\n    import javax.swing.BorderFactory;\r\n    import javax.swing.JButton;\r\n    import javax.swing.JFrame;\r\n    import javax.swing.JLabel;\r\n    import javax.swing.JPanel;\r\n    import javax.swing.JPasswordField;\r\n    import javax.swing.JTextField;\r\n    import javax.swing.SwingUtilities;\r\n    \r\n    public class MainRegistrationPage {\r\n    \r\n    \tpublic static void main(String[] args) {\r\n    \t\tSwingUtilities.invokeLater(new Runnable() {\r\n    \t\t\t@Override\r\n    \t\t\tpublic void run() {\r\n    \t\t\t\tnew MainRegistrationPage();\r\n    \t\t\t}\r\n    \t\t});\r\n    \t}\r\n    \r\n    \tprivate JTextField firstname;\r\n    \tprivate JTextField lastname;\r\n    \tprivate JTextField email;\r\n    \tprivate JPasswordField password;\r\n    \r\n    \tprivate JFrame frame;\r\n    \r\n    \tpublic MainRegistrationPage() {\r\n    \t\t// create user interface\r\n    \t\tframe = new JFrame(&quot;Registration Page&quot;);\r\n    \t\tframe.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);\r\n    \r\n    \t\tframe.add(createRegistrationPanel(), BorderLayout.CENTER);\r\n    \r\n    \t\tframe.pack();\r\n    \t\tframe.setLocationByPlatform(true);\r\n    \t\tframe.setVisible(true);\r\n    \t}\r\n    \r\n    \tprivate JPanel createRegistrationPanel() {\r\n    \t\tJPanel mainPanel = new JPanel(new GridBagLayout());\r\n    \t\tmainPanel.setBorder(BorderFactory.createEmptyBorder(0, 5, 5, 5));\r\n    \t\tmainPanel.setBackground(Color.YELLOW);\r\n    \t\tFont font = new Font(&quot;Georgia&quot;, Font.PLAIN, 14);\r\n    \r\n    \t\tGridBagConstraints gbc = new GridBagConstraints();\r\n    \t\tgbc.anchor = GridBagConstraints.LINE_START;\r\n    \t\tgbc.fill = GridBagConstraints.HORIZONTAL;\r\n    \t\tgbc.gridwidth = 1;\r\n    \t\tgbc.insets = new Insets(5, 5, 5, 5);\r\n    \r\n    \t\tgbc.gridx = 0;\r\n    \t\tgbc.gridy = 0;\r\n    \t\tJLabel label = new JLabel(&quot;First Name:&quot;);\r\n    \t\tlabel.setFont(font);\r\n    \t\tmainPanel.add(label, gbc);\r\n    \r\n    \t\tgbc.gridx++;\r\n    \t\tfirstname = new JTextField(30);\r\n    \t\tfirstname.setFont(font);\r\n    \t\tmainPanel.add(firstname, gbc);\r\n    \r\n    \t\tgbc.gridx = 0;\r\n    \t\tgbc.gridy++;\r\n    \t\tlabel = new JLabel(&quot;Last Name:&quot;);\r\n    \t\tlabel.setFont(font);\r\n    \t\tmainPanel.add(label, gbc);\r\n    \r\n    \t\tgbc.gridx++;\r\n    \t\tlastname = new JTextField(30);\r\n    \t\tlastname.setFont(font);\r\n    \t\tmainPanel.add(lastname, gbc);\r\n    \r\n    \t\tgbc.gridx = 0;\r\n    \t\tgbc.gridy++;\r\n    \t\tlabel = new JLabel(&quot;Email:&quot;);\r\n    \t\tlabel.setFont(font);\r\n    \t\tmainPanel.add(label, gbc);\r\n    \r\n    \t\tgbc.gridx++;\r\n    \t\temail = new JTextField(30);\r\n    \t\temail.setFont(font);\r\n    \t\tmainPanel.add(email, gbc);\r\n    \r\n    \t\tgbc.gridx = 0;\r\n    \t\tgbc.gridy++;\r\n    \t\tlabel = new JLabel(&quot;Password:&quot;);\r\n    \t\tlabel.setFont(font);\r\n    \t\tmainPanel.add(label, gbc);\r\n    \r\n    \t\tgbc.gridx++;\r\n    \t\tpassword = new JPasswordField(30);\r\n    \t\tpassword.setFont(font);\r\n    \t\tmainPanel.add(password, gbc);\r\n    \r\n    \t\tgbc.gridwidth = 2;\r\n    \t\tgbc.gridx = 0;\r\n    \t\tgbc.gridy++;\r\n    \t\tJButton submit = new JButton(&quot;Submit&quot;);\r\n    \t\tsubmit.addActionListener(new ActionListener() {\r\n    \t\t\t@Override\r\n    \t\t\tpublic void actionPerformed(ActionEvent e) {\r\n    \r\n    \t\t\t}\r\n    \t\t});\r\n    \t\tmainPanel.add(submit, gbc);\r\n    \r\n    \t\treturn mainPanel;\r\n    \t}\r\n    \r\n    }\r\n\r\n  [1]: https://i.stack.imgur.com/Wl3MG.png\r\n","title":"Java Swing - GridBagConstraints insets color","body":"<p>Here's a GUI I just did for someone else.  I added the yellow background.</p>\n<p><a href=\"https://i.stack.imgur.com/Wl3MG.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Wl3MG.png\" alt=\"Example\" /></a></p>\n<p>I don't see white in between the Swing components.</p>\n<p>Here's the complete runnable code.</p>\n<pre><code>import java.awt.BorderLayout;\nimport java.awt.Color;\nimport java.awt.Font;\nimport java.awt.GridBagConstraints;\nimport java.awt.GridBagLayout;\nimport java.awt.Insets;\nimport java.awt.event.ActionEvent;\nimport java.awt.event.ActionListener;\n\nimport javax.swing.BorderFactory;\nimport javax.swing.JButton;\nimport javax.swing.JFrame;\nimport javax.swing.JLabel;\nimport javax.swing.JPanel;\nimport javax.swing.JPasswordField;\nimport javax.swing.JTextField;\nimport javax.swing.SwingUtilities;\n\npublic class MainRegistrationPage {\n\n    public static void main(String[] args) {\n        SwingUtilities.invokeLater(new Runnable() {\n            @Override\n            public void run() {\n                new MainRegistrationPage();\n            }\n        });\n    }\n\n    private JTextField firstname;\n    private JTextField lastname;\n    private JTextField email;\n    private JPasswordField password;\n\n    private JFrame frame;\n\n    public MainRegistrationPage() {\n        // create user interface\n        frame = new JFrame(&quot;Registration Page&quot;);\n        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);\n\n        frame.add(createRegistrationPanel(), BorderLayout.CENTER);\n\n        frame.pack();\n        frame.setLocationByPlatform(true);\n        frame.setVisible(true);\n    }\n\n    private JPanel createRegistrationPanel() {\n        JPanel mainPanel = new JPanel(new GridBagLayout());\n        mainPanel.setBorder(BorderFactory.createEmptyBorder(0, 5, 5, 5));\n        mainPanel.setBackground(Color.YELLOW);\n        Font font = new Font(&quot;Georgia&quot;, Font.PLAIN, 14);\n\n        GridBagConstraints gbc = new GridBagConstraints();\n        gbc.anchor = GridBagConstraints.LINE_START;\n        gbc.fill = GridBagConstraints.HORIZONTAL;\n        gbc.gridwidth = 1;\n        gbc.insets = new Insets(5, 5, 5, 5);\n\n        gbc.gridx = 0;\n        gbc.gridy = 0;\n        JLabel label = new JLabel(&quot;First Name:&quot;);\n        label.setFont(font);\n        mainPanel.add(label, gbc);\n\n        gbc.gridx++;\n        firstname = new JTextField(30);\n        firstname.setFont(font);\n        mainPanel.add(firstname, gbc);\n\n        gbc.gridx = 0;\n        gbc.gridy++;\n        label = new JLabel(&quot;Last Name:&quot;);\n        label.setFont(font);\n        mainPanel.add(label, gbc);\n\n        gbc.gridx++;\n        lastname = new JTextField(30);\n        lastname.setFont(font);\n        mainPanel.add(lastname, gbc);\n\n        gbc.gridx = 0;\n        gbc.gridy++;\n        label = new JLabel(&quot;Email:&quot;);\n        label.setFont(font);\n        mainPanel.add(label, gbc);\n\n        gbc.gridx++;\n        email = new JTextField(30);\n        email.setFont(font);\n        mainPanel.add(email, gbc);\n\n        gbc.gridx = 0;\n        gbc.gridy++;\n        label = new JLabel(&quot;Password:&quot;);\n        label.setFont(font);\n        mainPanel.add(label, gbc);\n\n        gbc.gridx++;\n        password = new JPasswordField(30);\n        password.setFont(font);\n        mainPanel.add(password, gbc);\n\n        gbc.gridwidth = 2;\n        gbc.gridx = 0;\n        gbc.gridy++;\n        JButton submit = new JButton(&quot;Submit&quot;);\n        submit.addActionListener(new ActionListener() {\n            @Override\n            public void actionPerformed(ActionEvent e) {\n\n            }\n        });\n        mainPanel.add(submit, gbc);\n\n        return mainPanel;\n    }\n\n}\n</code></pre>\n"}],"owner":{"account_id":16245480,"reputation":694,"user_id":11730727,"display_name":"Arfmann"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":53,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1672942088,"creation_date":1672940716,"question_id":75022406,"body_markdown":"I&#39;m having some troubles working with GridBagConstraints, specifically with the insets property.\r\n\r\nI have two components, and I want some custom margin between theme. Now, what I did was using constraints.insets in this way:\r\n\r\n    polinomioConstraints.insets = new Insets(5, 0, 15 ,0);\r\n\r\n    checkboxesPanel.add(infoAggiunte, polinomioConstraints);\r\n    checkBoxesPanel.add(anotherString, constraintWithoutInsets);\r\n\r\nThe problem is that for some reason a white block appears in the insets area, so between the two components, and I found no way to change that white color to the actual panel&#39;s background","title":"Java Swing - GridBagConstraints insets color","body":"<p>I'm having some troubles working with GridBagConstraints, specifically with the insets property.</p>\n<p>I have two components, and I want some custom margin between theme. Now, what I did was using constraints.insets in this way:</p>\n<pre><code>polinomioConstraints.insets = new Insets(5, 0, 15 ,0);\n\ncheckboxesPanel.add(infoAggiunte, polinomioConstraints);\ncheckBoxesPanel.add(anotherString, constraintWithoutInsets);\n</code></pre>\n<p>The problem is that for some reason a white block appears in the insets area, so between the two components, and I found no way to change that white color to the actual panel's background</p>\n"},{"tags":["java","jwt","jjwt"],"comments":[{"owner":{"account_id":4688171,"reputation":11056,"user_id":3795036,"accept_rate":88,"display_name":"K.Nicholas"},"score":0,"creation_date":1672804873,"post_id":74999019,"comment_id":132354230,"body_markdown":"You should use nimbus-jose-jwt since that is what spring supports. Some example code if you want at https://github.com/karlnicholas/reactive-form-jwt-security-demo","body":"You should use nimbus-jose-jwt since that is what spring supports. Some example code if you want at <a href=\"https://github.com/karlnicholas/reactive-form-jwt-security-demo\" rel=\"nofollow noreferrer\">github.com/karlnicholas/reactive-form-jwt-security-demo</a>"}],"answers":[{"tags":[],"owner":{"account_id":10143207,"reputation":13,"user_id":7492238,"display_name":"H Ferguson"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1672941702,"creation_date":1672941702,"answer_id":75022564,"question_id":74999019,"body_markdown":"I think I discovered the problem.  I looked at the code sample that K. Nicholas provided. The Nimbus-Jose library is one that I had previously tried.  However the problem with the jwt.io site was more low-tech than that.  WHen entering your client secret, make sure you erase the text that says &quot;your 256 bit secret&quot;. \r\n[![signature section of jwt.io site][1]][1]\r\n\r\nI thought it was an underlay but no it&#39;s actual text content. If you paste your secret in that box, it just prepends it to the text &quot;your 256 bit secret&quot;.\r\n\r\nIn this case the solution was very low tech.\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/oz72u.png","title":"Cannot get JWT token generation to work on jwt.io debugger","body":"<p>I think I discovered the problem.  I looked at the code sample that K. Nicholas provided. The Nimbus-Jose library is one that I had previously tried.  However the problem with the jwt.io site was more low-tech than that.  WHen entering your client secret, make sure you erase the text that says &quot;your 256 bit secret&quot;.\n<a href=\"https://i.stack.imgur.com/oz72u.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/oz72u.png\" alt=\"signature section of jwt.io site\" /></a></p>\n<p>I thought it was an underlay but no it's actual text content. If you paste your secret in that box, it just prepends it to the text &quot;your 256 bit secret&quot;.</p>\n<p>In this case the solution was very low tech.</p>\n"}],"owner":{"account_id":10143207,"reputation":13,"user_id":7492238,"display_name":"H Ferguson"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":422,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":75022564,"answer_count":1,"score":0,"last_activity_date":1672941702,"creation_date":1672782888,"question_id":74999019,"body_markdown":"I am having some trouble using the JWT debugger at https://jwt.io/ I am using the JWT library from https://github.com/jwtk/jjwt  The use case is to send requests to an API that requires that I pass an API key in the token payload and sign it using the client secret that they give me.  So far, using the client secret they sent me (one secret appeared to be base64, but the second one they sent was definitely not base 64).  So far generating the token using the above library fails on the REST API, and it also fails at jwt.io. If I can get that working, I can probably get it to work on the REST API as well.\r\n\r\nHere is a block of code I use to generate my code.  I used a very simple secret string for this example but it is 32 bytes long (the client secret they gave me was 43 bytes long):\r\n\r\n    public class TestHarness {\r\n\r\n\tpublic static void main(String[] args) {\r\n\t\t\r\n\t\t\r\n\t\tString apiKey = &quot;39999999-ba25-476a-957e-806f9f726e39&quot;;\r\n\t\t\r\n\t\tString secret = &quot;123456789-123456789_123456789_12&quot;;\r\n\t\t//long timeNow = JWTutil.getUnixTime();\r\n\t\t// Using same time so that each time we run we should get the exact same \r\n\t\t// token\r\n\t\tlong timeNow =  1672761664338l;\r\n\t\tSystem.out.println(String.format(&quot;Now in UNIX is %d&quot;, timeNow));\r\n\t\t\r\n\t\tString token = JWTutil.getToken(apiKey, secret, 300, timeNow);\r\n\t\tSystem.out.println(token);\r\n\t\tString[] parts = token.split(token, &#39;.&#39;);\r\n\t\tSystem.out.println(String.format(&quot;Token has %d parts&quot;, parts.length));\r\n\t\tfor (int i=0;i&lt;parts.length;i++) {\r\n\t\t\tSystem.out.println(String.format(&quot;Part %d : %s&quot;, i, parts[i]));\r\n\t\t}\r\n\t\tif (parts.length &gt; 2) {\r\n\t\t\tSystem.out.println(parts[2]);\r\n\t\t}\r\n\t\t\r\n\t}\r\n\r\nAnd here is my JWT utils class with the methods used above to generate the token\r\n```package com.cassiacm.client;\r\n\r\nimport io.jsonwebtoken.Jwts;\r\nimport io.jsonwebtoken.SignatureAlgorithm;\r\nimport io.jsonwebtoken.security.Keys;\r\nimport java.security.Key;\r\nimport java.nio.charset.StandardCharsets;\r\nimport java.util.*;\r\nimport javax.crypto.SecretKey;\r\n\r\npublic class JWTutil {\r\n\tprivate static SignatureAlgorithm sigHS256 = SignatureAlgorithm.HS256;\r\n\t\r\n\tpublic static String getToken(String appID, String secret, int duration ) {\r\n\t\tlong currTime = getUnixTime();\r\n\t\t\t\r\n\t\treturn getToken(appID, secret, duration, currTime);\r\n\t}\r\n\t\r\n\tpublic static String getToken(String appID, String secret, int duration, long currTime) {\r\n\t\tString token = Jwts.builder().setHeader(getHeader()).addClaims(getClaims(appID, currTime, duration)).signWith(getSigningKey(secret), sigHS256).compact();\r\n\t\treturn token;\r\n\t}\r\n\t\r\n\tprivate static Map&lt;String,Object&gt; getHeader() {\r\n\t\tMap&lt;String, Object&gt; map = new HashMap&lt;String,Object&gt;();\r\n\t\tmap.put(&quot;alg&quot;, &quot;HS256&quot;);\r\n\t\tmap.put(&quot;typ&quot;, &quot;JWT&quot;);\r\n\t\treturn map;\r\n\t\t\t\r\n\t}\r\n\t\r\n\tprivate static Map&lt;String,Object&gt; getClaims(String appId, long now, int duration) {\r\n\t\tMap&lt;String,Object&gt; claims = new HashMap&lt;String,Object&gt;();\r\n\t\t\r\n\t\tclaims.put(&quot;sub&quot;, appId);\r\n\t\tclaims.put(&quot;iat&quot;, Long.valueOf(now));\r\n\t\tclaims.put(&quot;exp&quot;, Long.valueOf(now + (long)duration));\r\n\t\treturn claims;\r\n\t}\r\n\tprivate static Key getSigningKey(String secret) {\r\n\t\t\r\n\t\tbyte[] theBytes = secret.getBytes(StandardCharsets.UTF_8);\r\n\t\t//byte[] encodedBytes = Base64.getEncoder().encode(secret.getBytes(StandardCharsets.UTF_8));\r\n\t\t//Key key = new SecretKeySpec(encodedBytes, sigHS256.getJcaName());\r\n\t\tSecretKey key = Keys.hmacShaKeyFor(theBytes);\r\n\t\treturn key;\r\n\t}\r\n\tpublic static long getUnixTime() {\r\n\t\t\r\n\t\tDate current = new Date();\r\n\t\treturn current.getTime();\r\n\t}\r\n\t\r\n}\r\n```\r\nI did look at the source on JJWT (I couldn&#39;t find the link to proper JavaDocs but the source comments on each function served the same purpose), the signWith() function takes 1 or 2 arguments - either a Key (1 argument) which will &quot;guess&quot; the appropriate algorithm to use, or 2 args - A key and the signing algorithm (presumably for when you want to explicitly set the signature).  In an older post, it quoted signWith() taking 1 arg as the Signing algorithm and the second as a base64 string but I seem to recall that is deprecated - it&#39;s a key or nothing.\r\n\r\nOn jwt.io, I provide the client secret I used to create the secret with. I suspect that I may be misunderstanding what I&#39;m supposed to provide.  When answering, assume that I&#39;m given a human readable string which may or may not already be Base64 encoded.  When I toggle the Base64 Encoded Secret checkbox on jwt.io, the signature changes - both ways to something other than what was in original token, even with the text staying the same for the key.","title":"Cannot get JWT token generation to work on jwt.io debugger","body":"<p>I am having some trouble using the JWT debugger at <a href=\"https://jwt.io/\" rel=\"nofollow noreferrer\">https://jwt.io/</a> I am using the JWT library from <a href=\"https://github.com/jwtk/jjwt\" rel=\"nofollow noreferrer\">https://github.com/jwtk/jjwt</a>  The use case is to send requests to an API that requires that I pass an API key in the token payload and sign it using the client secret that they give me.  So far, using the client secret they sent me (one secret appeared to be base64, but the second one they sent was definitely not base 64).  So far generating the token using the above library fails on the REST API, and it also fails at jwt.io. If I can get that working, I can probably get it to work on the REST API as well.</p>\n<p>Here is a block of code I use to generate my code.  I used a very simple secret string for this example but it is 32 bytes long (the client secret they gave me was 43 bytes long):</p>\n<pre><code>public class TestHarness {\n\npublic static void main(String[] args) {\n    \n    \n    String apiKey = &quot;39999999-ba25-476a-957e-806f9f726e39&quot;;\n    \n    String secret = &quot;123456789-123456789_123456789_12&quot;;\n    //long timeNow = JWTutil.getUnixTime();\n    // Using same time so that each time we run we should get the exact same \n    // token\n    long timeNow =  1672761664338l;\n    System.out.println(String.format(&quot;Now in UNIX is %d&quot;, timeNow));\n    \n    String token = JWTutil.getToken(apiKey, secret, 300, timeNow);\n    System.out.println(token);\n    String[] parts = token.split(token, '.');\n    System.out.println(String.format(&quot;Token has %d parts&quot;, parts.length));\n    for (int i=0;i&lt;parts.length;i++) {\n        System.out.println(String.format(&quot;Part %d : %s&quot;, i, parts[i]));\n    }\n    if (parts.length &gt; 2) {\n        System.out.println(parts[2]);\n    }\n    \n}\n</code></pre>\n<p>And here is my JWT utils class with the methods used above to generate the token</p>\n<pre><code>\nimport io.jsonwebtoken.Jwts;\nimport io.jsonwebtoken.SignatureAlgorithm;\nimport io.jsonwebtoken.security.Keys;\nimport java.security.Key;\nimport java.nio.charset.StandardCharsets;\nimport java.util.*;\nimport javax.crypto.SecretKey;\n\npublic class JWTutil {\n    private static SignatureAlgorithm sigHS256 = SignatureAlgorithm.HS256;\n    \n    public static String getToken(String appID, String secret, int duration ) {\n        long currTime = getUnixTime();\n            \n        return getToken(appID, secret, duration, currTime);\n    }\n    \n    public static String getToken(String appID, String secret, int duration, long currTime) {\n        String token = Jwts.builder().setHeader(getHeader()).addClaims(getClaims(appID, currTime, duration)).signWith(getSigningKey(secret), sigHS256).compact();\n        return token;\n    }\n    \n    private static Map&lt;String,Object&gt; getHeader() {\n        Map&lt;String, Object&gt; map = new HashMap&lt;String,Object&gt;();\n        map.put(&quot;alg&quot;, &quot;HS256&quot;);\n        map.put(&quot;typ&quot;, &quot;JWT&quot;);\n        return map;\n            \n    }\n    \n    private static Map&lt;String,Object&gt; getClaims(String appId, long now, int duration) {\n        Map&lt;String,Object&gt; claims = new HashMap&lt;String,Object&gt;();\n        \n        claims.put(&quot;sub&quot;, appId);\n        claims.put(&quot;iat&quot;, Long.valueOf(now));\n        claims.put(&quot;exp&quot;, Long.valueOf(now + (long)duration));\n        return claims;\n    }\n    private static Key getSigningKey(String secret) {\n        \n        byte[] theBytes = secret.getBytes(StandardCharsets.UTF_8);\n        //byte[] encodedBytes = Base64.getEncoder().encode(secret.getBytes(StandardCharsets.UTF_8));\n        //Key key = new SecretKeySpec(encodedBytes, sigHS256.getJcaName());\n        SecretKey key = Keys.hmacShaKeyFor(theBytes);\n        return key;\n    }\n    public static long getUnixTime() {\n        \n        Date current = new Date();\n        return current.getTime();\n    }\n    \n}\n</code></pre>\n<p>I did look at the source on JJWT (I couldn't find the link to proper JavaDocs but the source comments on each function served the same purpose), the signWith() function takes 1 or 2 arguments - either a Key (1 argument) which will &quot;guess&quot; the appropriate algorithm to use, or 2 args - A key and the signing algorithm (presumably for when you want to explicitly set the signature).  In an older post, it quoted signWith() taking 1 arg as the Signing algorithm and the second as a base64 string but I seem to recall that is deprecated - it's a key or nothing.</p>\n<p>On jwt.io, I provide the client secret I used to create the secret with. I suspect that I may be misunderstanding what I'm supposed to provide.  When answering, assume that I'm given a human readable string which may or may not already be Base64 encoded.  When I toggle the Base64 Encoded Secret checkbox on jwt.io, the signature changes - both ways to something other than what was in original token, even with the text staying the same for the key.</p>\n"},{"tags":["java","arrays"],"comments":[{"owner":{"account_id":6844768,"reputation":106,"user_id":5263915,"display_name":"Egor"},"score":0,"creation_date":1672941242,"post_id":75022434,"comment_id":132391857,"body_markdown":"Array list is bigger than other arrays.\nPlease have a look on counter in fors","body":"Array list is bigger than other arrays. Please have a look on counter in fors"}],"answers":[{"comments":[{"owner":{"account_id":2549152,"reputation":2083,"user_id":2213309,"accept_rate":67,"display_name":"flappix"},"score":0,"creation_date":1672941626,"post_id":75022530,"comment_id":132391988,"body_markdown":"Its not even necessary to use 4 distinct loops iterating over ```list``` you can place all if-conditions in one loop","body":"Its not even necessary to use 4 distinct loops iterating over <code>list</code> you can place all if-conditions in one loop"}],"tags":[],"owner":{"account_id":27445247,"reputation":16,"user_id":20939158,"display_name":"M&#225;t&#233;"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1672941524,"creation_date":1672941524,"answer_id":75022530,"question_id":75022434,"body_markdown":"there are a few issues with the code you provided.\r\n\r\nFirst, in the for loops that initialize the negativeList, evenList, and oddList arrays, you are overwriting the values at each iteration. This means that the final arrays will only contain the last value that was assigned to them. To fix this, you can use a counter variable to keep track of the next index to be filled in each array, like this:\r\n\r\n    int negCounter = 0;\r\n    int evenCounter = 0;\r\n    int oddCounter = 0;\r\n\r\n    for(int i = 0; i &lt; list.length; i++)\r\n    {\r\n        if(list[i] &lt; 0)\r\n        {\r\n            negativeList[negCounter] = list[i];\r\n            negCounter++;\r\n        }\r\n    }\r\n\r\n    for(int i = 0; i &lt; list.length; i++)\r\n    {\r\n        if(list[i] % 2 == 0 &amp;&amp; list[i] &gt; 0)\r\n        {\r\n            evenList[evenCounter] = list[i];\r\n            evenCounter++;\r\n        }\r\n    }\r\n\r\n    for(int i = 0; i &lt; list.length; i++)\r\n    {\r\n        if(list[i] % 2 == 1 &amp;&amp; list[i] &gt; 0)\r\n        {\r\n            oddList[oddCounter] = list[i];\r\n            oddCounter++;\r\n        }\r\n    }\r\n\r\nSecond, you are not checking if the input values are integers. If the user enters a non-integer value, the program will throw an exception. You can add a check to make sure that the input is an integer like this:\r\n\r\n    if(scan.hasNextInt())\r\n    {\r\n        list[i] = scan.nextInt();\r\n        // ... rest of the code\r\n    }\r\n    else\r\n    {\r\n        System.out.println(&quot;Please enter an integer.&quot;);\r\n        // If the input is not an integer, discard it and move to the next \r\n    input\r\n        scan.next();\r\n    }\r\n\r\n","title":"Array program not running correctly. How do I fix it?","body":"<p>there are a few issues with the code you provided.</p>\n<p>First, in the for loops that initialize the negativeList, evenList, and oddList arrays, you are overwriting the values at each iteration. This means that the final arrays will only contain the last value that was assigned to them. To fix this, you can use a counter variable to keep track of the next index to be filled in each array, like this:</p>\n<pre><code>int negCounter = 0;\nint evenCounter = 0;\nint oddCounter = 0;\n\nfor(int i = 0; i &lt; list.length; i++)\n{\n    if(list[i] &lt; 0)\n    {\n        negativeList[negCounter] = list[i];\n        negCounter++;\n    }\n}\n\nfor(int i = 0; i &lt; list.length; i++)\n{\n    if(list[i] % 2 == 0 &amp;&amp; list[i] &gt; 0)\n    {\n        evenList[evenCounter] = list[i];\n        evenCounter++;\n    }\n}\n\nfor(int i = 0; i &lt; list.length; i++)\n{\n    if(list[i] % 2 == 1 &amp;&amp; list[i] &gt; 0)\n    {\n        oddList[oddCounter] = list[i];\n        oddCounter++;\n    }\n}\n</code></pre>\n<p>Second, you are not checking if the input values are integers. If the user enters a non-integer value, the program will throw an exception. You can add a check to make sure that the input is an integer like this:</p>\n<pre><code>if(scan.hasNextInt())\n{\n    list[i] = scan.nextInt();\n    // ... rest of the code\n}\nelse\n{\n    System.out.println(&quot;Please enter an integer.&quot;);\n    // If the input is not an integer, discard it and move to the next \ninput\n    scan.next();\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":5823420,"reputation":785,"user_id":6656833,"display_name":"Pavel"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1672941537,"creation_date":1672941537,"answer_id":75022534,"question_id":75022434,"body_markdown":"you can very much simplify your code with using `ArrayList` instead of array. For example:\r\n```java\r\npublic static void main(String[] args) {\r\n        Scanner scan = new Scanner(System.in);\r\n\r\n        int length = 10;\r\n        System.out.println(&quot;Please enter 10 integers:&quot;);\r\n\r\n        List&lt;Integer&gt; oddList = new ArrayList&lt;&gt;();\r\n        List&lt;Integer&gt; evenList = new ArrayList&lt;&gt;();\r\n        List&lt;Integer&gt; negativeList = new ArrayList&lt;&gt;();\r\n\r\n        for (int i = 0; i &lt; length; i++) {\r\n            int n = scan.nextInt();\r\n            if (n &lt; 0) {\r\n                negativeList.add(n);\r\n            } else if (n % 2 == 0) {\r\n                evenList.add(n);\r\n            } else {\r\n                oddList.add(n);\r\n            }\r\n        }\r\n\r\n        for (int i : negativeList) {\r\n            System.out.print(i + &quot; &quot;);\r\n        }\r\n\r\n        System.out.println();\r\n\r\n        for (int i : evenList) {\r\n            System.out.print(i + &quot; &quot;);\r\n        }\r\n\r\n        System.out.println();\r\n\r\n        for (int i : oddList) {\r\n            System.out.print(i + &quot; &quot;);\r\n        }\r\n    }\r\n```","title":"Array program not running correctly. How do I fix it?","body":"<p>you can very much simplify your code with using <code>ArrayList</code> instead of array. For example:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public static void main(String[] args) {\n        Scanner scan = new Scanner(System.in);\n\n        int length = 10;\n        System.out.println(&quot;Please enter 10 integers:&quot;);\n\n        List&lt;Integer&gt; oddList = new ArrayList&lt;&gt;();\n        List&lt;Integer&gt; evenList = new ArrayList&lt;&gt;();\n        List&lt;Integer&gt; negativeList = new ArrayList&lt;&gt;();\n\n        for (int i = 0; i &lt; length; i++) {\n            int n = scan.nextInt();\n            if (n &lt; 0) {\n                negativeList.add(n);\n            } else if (n % 2 == 0) {\n                evenList.add(n);\n            } else {\n                oddList.add(n);\n            }\n        }\n\n        for (int i : negativeList) {\n            System.out.print(i + &quot; &quot;);\n        }\n\n        System.out.println();\n\n        for (int i : evenList) {\n            System.out.print(i + &quot; &quot;);\n        }\n\n        System.out.println();\n\n        for (int i : oddList) {\n            System.out.print(i + &quot; &quot;);\n        }\n    }\n</code></pre>\n"}],"owner":{"account_id":27445086,"reputation":1,"user_id":20939027,"display_name":"nathalier"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":48,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"accepted_answer_id":75022530,"answer_count":2,"score":-1,"last_activity_date":1672941537,"creation_date":1672940894,"question_id":75022434,"body_markdown":"Trying to write a program that asks the a user for 10 integers as input. The program \r\nplaces the even integers into an array called evenList, the odd integers into \r\nan array called oddList, and the negative numbers into an array called \r\nnegativeList. The program displays the contents of the three arrays after \r\nall of the integers have been entered.\r\n\r\n**This is my code:**\r\n\r\n    import java.util.Scanner;\r\n    public class Main\r\n    {\r\n    \tpublic static void main(String[] args) {\r\n    \t\tScanner scan = new Scanner(System.in);\r\n\t\tint countNeg = 0;\r\n\t    int countOdd = 0;\r\n\t    int countEven = 0;\r\n\t    int[] list = new int[10];\r\n\t    System.out.println(&quot;Please enter 10 integers:&quot;);\r\n\t    for(int i = 0; i &lt; list.length; i++)\r\n\t    {\r\n\t        list[i] = scan.nextInt();\r\n\t        if(list[i] &lt; 0)\r\n\t        {\r\n\t            countNeg++;\r\n\t        }\r\n\t        if(list[i] % 2 == 0 &amp;&amp; list[i] &gt; 0)\r\n\t        {\r\n\t            countEven++;\r\n\t        }\r\n\t        if(list[i] % 2 == 1 &amp;&amp; list[i] &gt; 0)\r\n\t        {\r\n\t            countOdd++;\r\n\t        }\r\n\t    }\r\n\t    int[] oddList = new int[countOdd];\r\n\t    int[] evenList = new int[countEven];\r\n\t    int[] negativeList = new int[countNeg];\r\n\t    for(int i = 0; i &lt; list.length; i++)\r\n\t    {\r\n\t        if(list[i] &lt; 0)\r\n\t        {\r\n\t            for(int j = 0; j &lt; countNeg; j++)\r\n\t            {          \r\n\t                negativeList[j] = list[i];\r\n\t            }\r\n\t        }\r\n\t    }\r\n\t    for(int i = 0; i &lt; list.length; i++)\r\n\t    {\r\n\t        if(list[i] % 2 == 0 &amp;&amp; list[i] &gt; 0)\r\n\t        {\r\n\t            for(int j = 0; j &lt; countEven; j++)\r\n\t            {          \r\n\t                evenList[j] = list[i];\r\n\t            }\r\n\t        }\r\n\t    }\r\n\t    for(int i = 0; i &lt; list.length; i++)\r\n\t    {\r\n\t        if(list[i] % 2 == 1 &amp;&amp; list[i] &gt; 0)\r\n\t        {\r\n\t            for(int j = 0; j &lt; countOdd; j++)\r\n\t            {          \r\n\t                oddList[j] = list[i];\r\n\t            }\r\n\t        }\r\n\t    }\r\n\r\n\t    \r\n\t    for (int i : negativeList) \r\n        {\r\n            System.out.print(i + &quot; &quot;);\r\n        }\r\n        \r\n          System.out.println();\r\n        \r\n        for (int i : evenList) \r\n        {\r\n            System.out.print(i + &quot; &quot;);\r\n        }\r\n        \r\n        System.out.println();\r\n        \r\n        for (int i : oddList) \r\n        {\r\n            System.out.print(i + &quot; &quot;);\r\n        }\r\n\t}\r\n    }\r\n\r\nThe program prints the Arrays with the correct amount of values but the wrong numbers. It prints only the last negative, even, or odd number to be input. **ex** input is 1, 2, 3, 4, 5, 6, -1, -2, -3, -4. For negativeList it prints -4 -4 -4 -4. Im guessing something is wrong in the loops after the arrays are created. Please help!!","title":"Array program not running correctly. How do I fix it?","body":"<p>Trying to write a program that asks the a user for 10 integers as input. The program\nplaces the even integers into an array called evenList, the odd integers into\nan array called oddList, and the negative numbers into an array called\nnegativeList. The program displays the contents of the three arrays after\nall of the integers have been entered.</p>\n<p><strong>This is my code:</strong></p>\n<pre><code>import java.util.Scanner;\npublic class Main\n{\n    public static void main(String[] args) {\n        Scanner scan = new Scanner(System.in);\n    int countNeg = 0;\n    int countOdd = 0;\n    int countEven = 0;\n    int[] list = new int[10];\n    System.out.println(&quot;Please enter 10 integers:&quot;);\n    for(int i = 0; i &lt; list.length; i++)\n    {\n        list[i] = scan.nextInt();\n        if(list[i] &lt; 0)\n        {\n            countNeg++;\n        }\n        if(list[i] % 2 == 0 &amp;&amp; list[i] &gt; 0)\n        {\n            countEven++;\n        }\n        if(list[i] % 2 == 1 &amp;&amp; list[i] &gt; 0)\n        {\n            countOdd++;\n        }\n    }\n    int[] oddList = new int[countOdd];\n    int[] evenList = new int[countEven];\n    int[] negativeList = new int[countNeg];\n    for(int i = 0; i &lt; list.length; i++)\n    {\n        if(list[i] &lt; 0)\n        {\n            for(int j = 0; j &lt; countNeg; j++)\n            {          \n                negativeList[j] = list[i];\n            }\n        }\n    }\n    for(int i = 0; i &lt; list.length; i++)\n    {\n        if(list[i] % 2 == 0 &amp;&amp; list[i] &gt; 0)\n        {\n            for(int j = 0; j &lt; countEven; j++)\n            {          \n                evenList[j] = list[i];\n            }\n        }\n    }\n    for(int i = 0; i &lt; list.length; i++)\n    {\n        if(list[i] % 2 == 1 &amp;&amp; list[i] &gt; 0)\n        {\n            for(int j = 0; j &lt; countOdd; j++)\n            {          \n                oddList[j] = list[i];\n            }\n        }\n    }\n\n    \n    for (int i : negativeList) \n    {\n        System.out.print(i + &quot; &quot;);\n    }\n    \n      System.out.println();\n    \n    for (int i : evenList) \n    {\n        System.out.print(i + &quot; &quot;);\n    }\n    \n    System.out.println();\n    \n    for (int i : oddList) \n    {\n        System.out.print(i + &quot; &quot;);\n    }\n}\n}\n</code></pre>\n<p>The program prints the Arrays with the correct amount of values but the wrong numbers. It prints only the last negative, even, or odd number to be input. <strong>ex</strong> input is 1, 2, 3, 4, 5, 6, -1, -2, -3, -4. For negativeList it prints -4 -4 -4 -4. Im guessing something is wrong in the loops after the arrays are created. Please help!!</p>\n"},{"tags":["java","maven","maven-remote-resources"],"comments":[{"owner":{"account_id":112317,"reputation":93949,"user_id":296328,"accept_rate":60,"display_name":"khmarbaise"},"score":0,"creation_date":1672996346,"post_id":75022524,"comment_id":132402996,"body_markdown":"Why do you need resources from another module? Furthermore have you put the resources for tests or for production code?","body":"Why do you need resources from another module? Furthermore have you put the resources for tests or for production code?"},{"owner":{"account_id":12179322,"reputation":245,"user_id":8891321,"display_name":"Czachodym"},"score":0,"creation_date":1673617508,"post_id":75022524,"comment_id":132545441,"body_markdown":"I have about 90 modules which need to share a specific files. Instead of create 90 files we can create one file and share it, to make it easier to maintain. However, there are modules that contain their own version of the file and in their case, file gets overridden. Those modules are separated simple apps, and those files are bash scripts that are packed into assembly .zip using maven-assembly-plugin and contain scripts that run those modules.","body":"I have about 90 modules which need to share a specific files. Instead of create 90 files we can create one file and share it, to make it easier to maintain. However, there are modules that contain their own version of the file and in their case, file gets overridden. Those modules are separated simple apps, and those files are bash scripts that are packed into assembly .zip using maven-assembly-plugin and contain scripts that run those modules."},{"owner":{"account_id":112317,"reputation":93949,"user_id":296328,"accept_rate":60,"display_name":"khmarbaise"},"score":0,"creation_date":1673628584,"post_id":75022524,"comment_id":132549395,"body_markdown":"Are those files test resources or production resources?","body":"Are those files test resources or production resources?"},{"owner":{"account_id":12179322,"reputation":245,"user_id":8891321,"display_name":"Czachodym"},"score":0,"creation_date":1673641248,"post_id":75022524,"comment_id":132552829,"body_markdown":"Production resources","body":"Production resources"},{"owner":{"account_id":112317,"reputation":93949,"user_id":296328,"accept_rate":60,"display_name":"khmarbaise"},"score":0,"creation_date":1673689715,"post_id":75022524,"comment_id":132557531,"body_markdown":"Than you have them on classpath why do you need to copy them?","body":"Than you have them on classpath why do you need to copy them?"}],"owner":{"account_id":12179322,"reputation":245,"user_id":8891321,"display_name":"Czachodym"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":33,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1672941491,"creation_date":1672941491,"question_id":75022524,"body_markdown":"in my application i have many modules with resources.\r\n```\r\nproject\r\n|\r\n└───moduleA\r\n|   |\r\n│   └───resources\r\n│       │\r\n│       └───fileA\r\n|\r\n└───moduleB\r\n|   |\r\n│   └───resources\r\n│   \r\n└───moduleC\r\n|   |\r\n|   └───resources\r\n|       │\r\n|       |───fileA\r\n|       └───fileB\r\n|\r\n...\r\n```\r\nIn `moduleA` and `moduleB` i use `maven-remote-resources` plugin to include resources (fileA and fileB) from `moduleC`. If the file with a given name exists in a moduleA or B, it should not be overwritten with the one from `moduleC`. Files get overwritten by default. How to configure the plugin to avoid that?","title":"How to stop maven-remote-resources-plugin from overwritting resources","body":"<p>in my application i have many modules with resources.</p>\n<pre><code>project\n|\n└───moduleA\n|   |\n│   └───resources\n│       │\n│       └───fileA\n|\n└───moduleB\n|   |\n│   └───resources\n│   \n└───moduleC\n|   |\n|   └───resources\n|       │\n|       |───fileA\n|       └───fileB\n|\n...\n</code></pre>\n<p>In <code>moduleA</code> and <code>moduleB</code> i use <code>maven-remote-resources</code> plugin to include resources (fileA and fileB) from <code>moduleC</code>. If the file with a given name exists in a moduleA or B, it should not be overwritten with the one from <code>moduleC</code>. Files get overwritten by default. How to configure the plugin to avoid that?</p>\n"},{"tags":["java","hibernate","entity-relationship"],"comments":[{"owner":{"account_id":1600162,"reputation":1885,"user_id":1481345,"display_name":"Ale Zalazar"},"score":0,"creation_date":1672959140,"post_id":75022466,"comment_id":132396900,"body_markdown":"So you have to think about your relational model: if you wouldn&#39;t want to use an intermediate table it&#39;s ok but that would mean that words cannot be shared, so you will have duplicates (why? because if you don&#39;t have an intermediate  table, you&#39;ll need a user_id column in your words table, making each row associated to a specific user)","body":"So you have to think about your relational model: if you wouldn&#39;t want to use an intermediate table it&#39;s ok but that would mean that words cannot be shared, so you will have duplicates (why? because if you don&#39;t have an intermediate  table, you&#39;ll need a user_id column in your words table, making each row associated to a specific user)"}],"owner":{"account_id":27444946,"reputation":1,"user_id":20938912,"display_name":"Yauheni Kuchko"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":41,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1672941073,"creation_date":1672941073,"question_id":75022466,"body_markdown":"My question is as follows: I am making a simple telegram bot where users can save and learn words in different languages (dictionary).I can&#39;t decide what kind of relationship between entities in a spring. I have two entities Word and User.\r\n\r\n```\r\n@Entity\r\n@Table(name = &quot;words&quot;)\r\n@Data\r\npublic class Word {\r\n    @Id\r\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\r\n    private long id;\r\n    private String english;\r\n    private String russian;\r\n    @ManyToMany(mappedBy = &quot;words&quot;)\r\n    private Set&lt;User&gt; users;\r\n}\r\n```\r\n\r\n```\r\n@Entity\r\n@Data\r\n@Table(name = &quot;users&quot;)\r\npublic class User {\r\n    @Id\r\n    private long id;\r\n    private String firstName;\r\n    @ManyToMany\r\n    @JoinTable(\r\n            name = &quot;words_users&quot;,\r\n            joinColumns = @JoinColumn(name = &quot;user_id&quot;),\r\n            inverseJoinColumns = @JoinColumn(name = &quot;word_id&quot;))\r\n    private Set&lt;Word&gt; words;\r\n```\r\nThe idea is to have a large dictionary in the database, and each user could add words to his dictionary, and the bot checks to see if he has the word in his dictionary, and if so, he gives a link to the word to the user, which is stored in the user&#39;s list, and if not, the word is added to the bot&#39;s dictionary and then to the user.\r\n\r\n\r\nI used the &quot;many to many&quot; relationship, but I don&#39;t think that&#39;s the best option.I think that the intermediate table is completely out of place here, and the Word entity does not need to know which users are referring to which words. One to many(unidirectional) would be much better, but I can&#39;t find a suitable implementation. Does anyone have any ideas?","title":"How to create relationships between entities","body":"<p>My question is as follows: I am making a simple telegram bot where users can save and learn words in different languages (dictionary).I can't decide what kind of relationship between entities in a spring. I have two entities Word and User.</p>\n<pre><code>@Entity\n@Table(name = &quot;words&quot;)\n@Data\npublic class Word {\n    @Id\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\n    private long id;\n    private String english;\n    private String russian;\n    @ManyToMany(mappedBy = &quot;words&quot;)\n    private Set&lt;User&gt; users;\n}\n</code></pre>\n<pre><code>@Entity\n@Data\n@Table(name = &quot;users&quot;)\npublic class User {\n    @Id\n    private long id;\n    private String firstName;\n    @ManyToMany\n    @JoinTable(\n            name = &quot;words_users&quot;,\n            joinColumns = @JoinColumn(name = &quot;user_id&quot;),\n            inverseJoinColumns = @JoinColumn(name = &quot;word_id&quot;))\n    private Set&lt;Word&gt; words;\n</code></pre>\n<p>The idea is to have a large dictionary in the database, and each user could add words to his dictionary, and the bot checks to see if he has the word in his dictionary, and if so, he gives a link to the word to the user, which is stored in the user's list, and if not, the word is added to the bot's dictionary and then to the user.</p>\n<p>I used the &quot;many to many&quot; relationship, but I don't think that's the best option.I think that the intermediate table is completely out of place here, and the Word entity does not need to know which users are referring to which words. One to many(unidirectional) would be much better, but I can't find a suitable implementation. Does anyone have any ideas?</p>\n"},{"tags":["java","spring","spring-boot","yaml","snakeyaml"],"comments":[{"owner":{"account_id":6486003,"reputation":21,"user_id":5021578,"display_name":"nAtxO Pi"},"score":0,"creation_date":1672922780,"post_id":74997243,"comment_id":132384777,"body_markdown":"Maybe it would be enough if I know how to force double quotes on string params instead of singke quotes...","body":"Maybe it would be enough if I know how to force double quotes on string params instead of singke quotes..."}],"answers":[{"tags":[],"owner":{"account_id":6486003,"reputation":21,"user_id":5021578,"display_name":"nAtxO Pi"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1672940922,"creation_date":1672940922,"answer_id":75022438,"question_id":74997243,"body_markdown":"Finally I think this code do the trick I was looking for:\r\n\r\n```\r\n  public static Yaml getYamlMapper() {\r\n    final LoaderOptions loaderOptions = new LoaderOptions();\r\n    loaderOptions.setAllowDuplicateKeys(false);\r\n    loaderOptions.setMaxAliasesForCollections(Integer.MAX_VALUE);\r\n    loaderOptions.setAllowRecursiveKeys(true);\r\n\r\n    final DumperOptions dumperOptions = new DumperOptions();\r\n    dumperOptions.setIndent(2);\r\n    dumperOptions.setPrettyFlow(true);\r\n    dumperOptions.setDefaultFlowStyle(DumperOptions.FlowStyle.BLOCK);\r\n    dumperOptions.setSplitLines(false);\r\n\r\n    return new Yaml(new Constructor(), new ComplexDataExpressionRepresenter(), dumperOptions, loaderOptions, new Resolver());\r\n  }\r\n\r\n  /**\r\n   * Special representer able to deal with expressions.\r\n   */\r\n  static class ComplexDataExpressionRepresenter extends Representer {\r\n\r\n    public ComplexDataExpressionRepresenter() {\r\n      this.representers.put(String.class, new RepresentQuotedString());\r\n    }\r\n\r\n    private class RepresentQuotedString implements Represent {\r\n\r\n      public Node representData(final Object data) {\r\n        final String valueToString = data.toString();\r\n        if (valueToString.contains(&quot;#{&quot;)) {\r\n          // This do the trick to expressions and maybe also to another properties but is ok.\r\n          return ComplexDataExpressionRepresenter.this.representScalar(Tag.STR, valueToString, ScalarStyle.DOUBLE_QUOTED);\r\n        }\r\n        return ComplexDataExpressionRepresenter.this.representScalar(Tag.STR, valueToString, ScalarStyle.PLAIN);\r\n      }\r\n    }\r\n  }\r\n```\r\n\r\nBest regards!","title":"Dynamic ScalarStyle to certain nodes with snakeyaml","body":"<p>Finally I think this code do the trick I was looking for:</p>\n<pre><code>  public static Yaml getYamlMapper() {\n    final LoaderOptions loaderOptions = new LoaderOptions();\n    loaderOptions.setAllowDuplicateKeys(false);\n    loaderOptions.setMaxAliasesForCollections(Integer.MAX_VALUE);\n    loaderOptions.setAllowRecursiveKeys(true);\n\n    final DumperOptions dumperOptions = new DumperOptions();\n    dumperOptions.setIndent(2);\n    dumperOptions.setPrettyFlow(true);\n    dumperOptions.setDefaultFlowStyle(DumperOptions.FlowStyle.BLOCK);\n    dumperOptions.setSplitLines(false);\n\n    return new Yaml(new Constructor(), new ComplexDataExpressionRepresenter(), dumperOptions, loaderOptions, new Resolver());\n  }\n\n  /**\n   * Special representer able to deal with expressions.\n   */\n  static class ComplexDataExpressionRepresenter extends Representer {\n\n    public ComplexDataExpressionRepresenter() {\n      this.representers.put(String.class, new RepresentQuotedString());\n    }\n\n    private class RepresentQuotedString implements Represent {\n\n      public Node representData(final Object data) {\n        final String valueToString = data.toString();\n        if (valueToString.contains(&quot;#{&quot;)) {\n          // This do the trick to expressions and maybe also to another properties but is ok.\n          return ComplexDataExpressionRepresenter.this.representScalar(Tag.STR, valueToString, ScalarStyle.DOUBLE_QUOTED);\n        }\n        return ComplexDataExpressionRepresenter.this.representScalar(Tag.STR, valueToString, ScalarStyle.PLAIN);\n      }\n    }\n  }\n</code></pre>\n<p>Best regards!</p>\n"}],"owner":{"account_id":6486003,"reputation":21,"user_id":5021578,"display_name":"nAtxO Pi"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":144,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":75022438,"answer_count":1,"score":0,"last_activity_date":1672940922,"creation_date":1672770137,"question_id":74997243,"body_markdown":"I need to parse a complex payload into a yaml with double quoted or plain scalar style depending on the node of the payload\r\n\r\n\r\n\r\nThe result I would like to get is something like that:\r\n\r\n\\`\r\n\r\n```\r\n\r\nconfig:\r\n  zzh: true\r\n  zzh-special-config:\r\n    expressions:\r\n    - expression: &quot;(#{deliveryCity} IN [&#39;MADRID&#39;, &#39;BARNA&#39;] &amp;&amp; (#{channel} IN [&#39;1&#39;] || (#{domain} IN [&#39;core&#39;] &amp;&amp; (#{environment} IN [&#39;des,test&#39;] || #{layer} IN [&#39;composite&#39;]))))&quot;\r\n      value: false\r\n      description: &quot;my-description&quot;\r\n```\r\n\r\n\\`\r\n\r\nIf I use the following configuration:\r\n\r\n\\`\r\n\r\n```\r\n\r\npublic static Yaml getYamlMapper() {\r\nfinal LoaderOptions loaderOptions = new LoaderOptions();\r\nloaderOptions.setAllowDuplicateKeys(false);\r\nloaderOptions.setMaxAliasesForCollections(Integer.MAX_VALUE);\r\nloaderOptions.setAllowRecursiveKeys(true);\r\n\r\nfinal DumperOptions dumperOptions = new DumperOptions();\r\ndumperOptions.setIndent(2);\r\ndumperOptions.setPrettyFlow(true);\r\ndumperOptions.setDefaultFlowStyle(FlowStyle.BLOCK);\r\ndumperOptions.setSplitLines(false);\r\ndumperOptions.setDefaultScalarStyle(ScalarStyle.PLAIN);\r\nreturn new Yaml(new Constructor(), new Representer(), dumperOptions, loaderOptions, new Resolver());\r\n}\r\n```\r\n\r\n\\`\r\n\r\nThe expression is not correclty parsed:\r\n\\`\r\n\r\n```\r\n\r\nconfig:\r\n  zzh: true\r\n  zzh-special-config:\r\n    expressions:\r\n    - expression: &#39;(#{deliveryCity} IN [&#39;&#39;MADRID&#39;&#39;, &#39;&#39;BARNA&#39;&#39;] &amp;&amp; (#{channel} IN [&#39;&#39;1&#39;&#39;] || (#{domain} IN [&#39;&#39;core&#39;&#39;] &amp;&amp; (#{environment} IN [&#39;&#39;des,test&#39;&#39;] || #{layer} IN [&#39;&#39;composite&#39;&#39;]))))&#39;\r\n      value: false\r\n      description: my-description\r\n```\r\n\r\n\\`\r\n\r\nHowever if I change the Yaml configuration in this way:\r\n\r\n\\`\r\n\r\n```\r\n\r\ndumperOptions.setDefaultScalarStyle(ScalarStyle.DOUBLE_QUOTED);\r\n```\r\n\r\n\\`\r\n\r\nThe boolean and integer values breaks down (e.g.: `!!bool &quot;true&quot;`).... And it put double quotes also in the keys :/\r\n\r\n\\`\r\n\r\n```\r\n\r\n&quot;config&quot;:\r\n  &quot;zzh&quot;: !!bool &quot;true&quot;\r\n  &quot;zzh-special-config&quot;:\r\n    &quot;expressions&quot;:\r\n    - &quot;expression&quot;: &quot;(#{deliveryCity} IN [&#39;MADRID&#39;, &#39;BARNA&#39;] &amp;&amp; (#{channel} IN [&#39;1&#39;] || (#{domain} IN [&#39;core&#39;] &amp;&amp; (#{environment} IN [&#39;des,test&#39;] || #{layer} IN [&#39;composite&#39;]))))&quot;\r\n      &quot;value&quot;: !!bool &quot;false&quot;\r\n      &quot;description&quot;: &quot;my-description&quot;\r\n```\r\n\r\n\\`\r\n\r\nAs you can see when I fix something other thing is broken... Therefore the ideal situation would be to do only in all `expression` nodes (e.g: config.zzh-amiga-config.expressions\\[\\].expression)\r\n\r\nI thnk I could use the `ScalarNode` object but I don&#39;t see how to achieve my purpose especially considering that the list of expressions could appear under any node so some kind of wildcard would have to be used...\r\n\r\nCould anybody help me please?\r\n\r\nThanks in advance!","title":"Dynamic ScalarStyle to certain nodes with snakeyaml","body":"<p>I need to parse a complex payload into a yaml with double quoted or plain scalar style depending on the node of the payload</p>\n<p>The result I would like to get is something like that:</p>\n<p>`</p>\n<pre><code>\nconfig:\n  zzh: true\n  zzh-special-config:\n    expressions:\n    - expression: &quot;(#{deliveryCity} IN ['MADRID', 'BARNA'] &amp;&amp; (#{channel} IN ['1'] || (#{domain} IN ['core'] &amp;&amp; (#{environment} IN ['des,test'] || #{layer} IN ['composite']))))&quot;\n      value: false\n      description: &quot;my-description&quot;\n</code></pre>\n<p>`</p>\n<p>If I use the following configuration:</p>\n<p>`</p>\n<pre><code>\npublic static Yaml getYamlMapper() {\nfinal LoaderOptions loaderOptions = new LoaderOptions();\nloaderOptions.setAllowDuplicateKeys(false);\nloaderOptions.setMaxAliasesForCollections(Integer.MAX_VALUE);\nloaderOptions.setAllowRecursiveKeys(true);\n\nfinal DumperOptions dumperOptions = new DumperOptions();\ndumperOptions.setIndent(2);\ndumperOptions.setPrettyFlow(true);\ndumperOptions.setDefaultFlowStyle(FlowStyle.BLOCK);\ndumperOptions.setSplitLines(false);\ndumperOptions.setDefaultScalarStyle(ScalarStyle.PLAIN);\nreturn new Yaml(new Constructor(), new Representer(), dumperOptions, loaderOptions, new Resolver());\n}\n</code></pre>\n<p>`</p>\n<p>The expression is not correclty parsed:\n`</p>\n<pre><code>\nconfig:\n  zzh: true\n  zzh-special-config:\n    expressions:\n    - expression: '(#{deliveryCity} IN [''MADRID'', ''BARNA''] &amp;&amp; (#{channel} IN [''1''] || (#{domain} IN [''core''] &amp;&amp; (#{environment} IN [''des,test''] || #{layer} IN [''composite'']))))'\n      value: false\n      description: my-description\n</code></pre>\n<p>`</p>\n<p>However if I change the Yaml configuration in this way:</p>\n<p>`</p>\n<pre><code>\ndumperOptions.setDefaultScalarStyle(ScalarStyle.DOUBLE_QUOTED);\n</code></pre>\n<p>`</p>\n<p>The boolean and integer values breaks down (e.g.: <code>!!bool &quot;true&quot;</code>).... And it put double quotes also in the keys :/</p>\n<p>`</p>\n<pre><code>\n&quot;config&quot;:\n  &quot;zzh&quot;: !!bool &quot;true&quot;\n  &quot;zzh-special-config&quot;:\n    &quot;expressions&quot;:\n    - &quot;expression&quot;: &quot;(#{deliveryCity} IN ['MADRID', 'BARNA'] &amp;&amp; (#{channel} IN ['1'] || (#{domain} IN ['core'] &amp;&amp; (#{environment} IN ['des,test'] || #{layer} IN ['composite']))))&quot;\n      &quot;value&quot;: !!bool &quot;false&quot;\n      &quot;description&quot;: &quot;my-description&quot;\n</code></pre>\n<p>`</p>\n<p>As you can see when I fix something other thing is broken... Therefore the ideal situation would be to do only in all <code>expression</code> nodes (e.g: config.zzh-amiga-config.expressions[].expression)</p>\n<p>I thnk I could use the <code>ScalarNode</code> object but I don't see how to achieve my purpose especially considering that the list of expressions could appear under any node so some kind of wildcard would have to be used...</p>\n<p>Could anybody help me please?</p>\n<p>Thanks in advance!</p>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":3380632,"reputation":14294,"user_id":2837741,"accept_rate":100,"display_name":"daniu"},"score":1,"creation_date":1589144994,"post_id":61718704,"comment_id":109170663,"body_markdown":"You are aware you&#39;re creating three random numbers, a different one for each check?","body":"You are aware you&#39;re creating three random numbers, a different one for each check?"},{"owner":{"account_id":108033,"reputation":17201,"user_id":286934,"display_name":"Progman"},"score":0,"creation_date":1589145469,"post_id":61718704,"comment_id":109170816,"body_markdown":"The given sample input and output is just a (valid) example. When you enter the values `0 5 0` your algorithm should say `38` as the seed to use. So you can verify that your algorithm works fine, but it should obviously work for every input. Btw.: The input for `M` is most likely be supposed to be a `double` since the `nextGaussian()` method is returning a `double` value as well.","body":"The given sample input and output is just a (valid) example. When you enter the values <code>0 5 0</code> your algorithm should say <code>38</code> as the seed to use. So you can verify that your algorithm works fine, but it should obviously work for every input. Btw.: The input for <code>M</code> is most likely be supposed to be a <code>double</code> since the <code>nextGaussian()</code> method is returning a <code>double</code> value as well."}],"answers":[{"tags":[],"owner":{"account_id":3380632,"reputation":14294,"user_id":2837741,"accept_rate":100,"display_name":"daniu"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1589189076,"creation_date":1589189076,"answer_id":61726335,"question_id":61718704,"body_markdown":"I&#39;m not sure I understand correctly what you&#39;re trying to do, but you generate three different random numbers each iteration, so you check the upper and lower limits against different numbers and then output yet another one.\r\n\r\nThis seems to make more sense to me:\r\n\r\n    for (int i = 0; i &lt; n; i++) {\r\n        double randomNumber = random.nextGaussian();\r\n        // check the generated number against the limits\r\n        if (randomNumber &lt;= m &amp; randomNumber &gt;= k) {\r\n            // output it if within limits\r\n            System.out.println(randomNumber);\r\n        }\r\n    }\r\n\r\nNote: a &quot;seed&quot; is something different, it&#39;s a starting point for the random number generation, not the generated number itself.","title":"Gaussian random generation with the condition","body":"<p>I'm not sure I understand correctly what you're trying to do, but you generate three different random numbers each iteration, so you check the upper and lower limits against different numbers and then output yet another one.</p>\n\n<p>This seems to make more sense to me:</p>\n\n<pre><code>for (int i = 0; i &lt; n; i++) {\n    double randomNumber = random.nextGaussian();\n    // check the generated number against the limits\n    if (randomNumber &lt;= m &amp; randomNumber &gt;= k) {\n        // output it if within limits\n        System.out.println(randomNumber);\n    }\n}\n</code></pre>\n\n<p>Note: a \"seed\" is something different, it's a starting point for the random number generation, not the generated number itself.</p>\n"},{"tags":[],"owner":{"account_id":108033,"reputation":17201,"user_id":286934,"display_name":"Progman"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1589215875,"creation_date":1589215875,"answer_id":61734977,"question_id":61718704,"body_markdown":"The task is asking for a specific &quot;seed&quot; for the given integer inputs. For any pseudo random generator, the &quot;seed&quot; is an internal starting point of the random generator. The random numbers to generate are starting from a value from that &quot;seed&quot;. As an example, when you write the following code:\r\n\r\n    Random r = new Random(42);\r\n    for (int i=0; i&lt;5; i++) {\r\n        System.out.println(r.nextInt());\r\n    }\r\n\r\nYou will always get the following output:\r\n\r\n    -1170105035\r\n    234785527\r\n    -1360544799\r\n    205897768\r\n    1325939940\r\n\r\n*(Warning: Even though the output will always be the same for the same seed, the actual numbers depends on the implementation of the `java.util.Random` class, which might change in future versions. As of writing this answer, the random numbers were generated as these values above with openjdk version &quot;1.8.0_252&quot;.)*\r\n\r\nYour task is asking for a &quot;seed&quot; which have some defined qualities:\r\n\r\n&gt; [...] find the first seed that is greater or equal to `K` [...]\r\n\r\nSo the argument going into the constructor `new Random(...);` must be greater or equal the value of `K`. So for the input `0 5 0` you might get a different output than for the input `1000 5 0`, since the latter only tries &quot;seed&quot; values greater or equal `1000`. As an example, other &quot;seeds&quot; like 425 shouldn&#39;t be tested for the remainder conditions even though they would fit.\r\n\r\n&gt; [...] where each of `N` Gaussian numbers [...]\r\n\r\nSimple, you generate `N` gaussian numbers and check all of them for the following condition:\r\n\r\n&gt; [...] where each of `N` Gaussian numbers **is less than or equal to `M`**.\r\n\r\nThe `M` is an upper bound for your generated random numbers. The `nextGaussian()` method returns a random number with an average value of `0` (if you continue generating gaussian random numbers), but the return value can be greater or smaller than 0. But in your case all the numbers have to be less or equal `M`.\r\n\r\nYour task is now to find the first &quot;seed&quot; which met all these requirements, starting from the &quot;seed&quot; value `K`. Generate `N` numbers and check if they are all at or below `M`. If they aren&#39;t, check the next seed.\r\n\r\nAs an example for the seeds 36, 37 and 38 you will get the following random numbers:\r\n\r\n&lt;!-- language: none --&gt;\r\n\r\n    Checking seed: 36\r\n    1.2723728744482508  &lt;-- fail, not &lt;= K=0\r\n    -0.870801422312458\r\n    -0.8217339464297395\r\n    0.5262022756278059  &lt;-- fail, not &lt;= K=0\r\n    0.7755591855768942  &lt;-- fail, not &lt;= K=0\r\n    \r\n    Checking seed: 37\r\n    1.7687943677666822   &lt;-- fail, not &lt;= K=0\r\n    0.10628211826095219  &lt;-- fail, not &lt;= K=0\r\n    1.7204367528361415   &lt;-- fail, not &lt;= K=0\r\n    -0.037534100873246996\r\n    -0.7556292895100587\r\n    \r\n    Checking seed: 38\r\n    -0.5856548327125106\r\n    -0.5353713241423471\r\n    -0.6629651900370352\r\n    -0.06602762115722295\r\n    -0.5573859875224596\r\n\r\nAs you see, the seed `38` is the first which met the conditions, for **this specific input**. If you change the input condition you might get a different seed value. In fact, when you increase the limit `N` for the count of random numbers to generate from `5` to `10` you will not met the conditions anymore:\r\n\r\n&lt;!-- language: none --&gt;\r\n\r\n    Checking with random number generator seed: 36\r\n    1.2723728744482508    &lt;-- fail, not &lt;= K=0\r\n    -0.870801422312458\r\n    -0.8217339464297395\r\n    0.5262022756278059    &lt;-- fail, not &lt;= K=0\r\n    0.7755591855768942    &lt;-- fail, not &lt;= K=0\r\n    0.1050333460099397    &lt;-- fail, not &lt;= K=0\r\n    -1.2195748465234115\r\n    -0.5682199782926214\r\n    -0.6364150668125728\r\n    1.0752773722411306    &lt;-- fail, not &lt;= K=0\r\n    \r\n    Checking with random number generator seed: 37\r\n    1.7687943677666822     &lt;-- fail, not &lt;= K=0\r\n    0.10628211826095219    &lt;-- fail, not &lt;= K=0\r\n    1.7204367528361415     &lt;-- fail, not &lt;= K=0\r\n    -0.037534100873246996\r\n    -0.7556292895100587\r\n    -0.9951161662703086\r\n    1.052027068066767      &lt;-- fail, not &lt;= K=0\r\n    -0.6497562324361997\r\n    -0.47969604178646064\r\n    1.3195412359422278     &lt;-- fail, not &lt;= K=0\r\n    \r\n    Checking with random number generator seed: 38\r\n    -0.5856548327125106\r\n    -0.5353713241423471\r\n    -0.6629651900370352\r\n    -0.06602762115722295\r\n    -0.5573859875224596\r\n    0.5414339383037863     &lt;-- fail, not &lt;= K=0\r\n    -1.9350302385094755\r\n    1.7250885444038893     &lt;-- fail, not &lt;= K=0\r\n    -1.2161902995946092\r\n    -0.16606956096867706\r\n\r\nNotice, how the first five numbers in each run are the same even after rerun your code (because of the same seed for the random number generator). But also notice that you generated two numbers for the seed `38` which are now greater than `K=0`. So the output `38` is correct for the input `0 5 0`, but it is not correct for the input `0 10 0`.","title":"Gaussian random generation with the condition","body":"<p>The task is asking for a specific \"seed\" for the given integer inputs. For any pseudo random generator, the \"seed\" is an internal starting point of the random generator. The random numbers to generate are starting from a value from that \"seed\". As an example, when you write the following code:</p>\n\n<pre><code>Random r = new Random(42);\nfor (int i=0; i&lt;5; i++) {\n    System.out.println(r.nextInt());\n}\n</code></pre>\n\n<p>You will always get the following output:</p>\n\n<pre><code>-1170105035\n234785527\n-1360544799\n205897768\n1325939940\n</code></pre>\n\n<p><em>(Warning: Even though the output will always be the same for the same seed, the actual numbers depends on the implementation of the <code>java.util.Random</code> class, which might change in future versions. As of writing this answer, the random numbers were generated as these values above with openjdk version \"1.8.0_252\".)</em></p>\n\n<p>Your task is asking for a \"seed\" which have some defined qualities:</p>\n\n<blockquote>\n  <p>[...] find the first seed that is greater or equal to <code>K</code> [...]</p>\n</blockquote>\n\n<p>So the argument going into the constructor <code>new Random(...);</code> must be greater or equal the value of <code>K</code>. So for the input <code>0 5 0</code> you might get a different output than for the input <code>1000 5 0</code>, since the latter only tries \"seed\" values greater or equal <code>1000</code>. As an example, other \"seeds\" like 425 shouldn't be tested for the remainder conditions even though they would fit.</p>\n\n<blockquote>\n  <p>[...] where each of <code>N</code> Gaussian numbers [...]</p>\n</blockquote>\n\n<p>Simple, you generate <code>N</code> gaussian numbers and check all of them for the following condition:</p>\n\n<blockquote>\n  <p>[...] where each of <code>N</code> Gaussian numbers <strong>is less than or equal to <code>M</code></strong>.</p>\n</blockquote>\n\n<p>The <code>M</code> is an upper bound for your generated random numbers. The <code>nextGaussian()</code> method returns a random number with an average value of <code>0</code> (if you continue generating gaussian random numbers), but the return value can be greater or smaller than 0. But in your case all the numbers have to be less or equal <code>M</code>.</p>\n\n<p>Your task is now to find the first \"seed\" which met all these requirements, starting from the \"seed\" value <code>K</code>. Generate <code>N</code> numbers and check if they are all at or below <code>M</code>. If they aren't, check the next seed.</p>\n\n<p>As an example for the seeds 36, 37 and 38 you will get the following random numbers:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>Checking seed: 36\n1.2723728744482508  &lt;-- fail, not &lt;= K=0\n-0.870801422312458\n-0.8217339464297395\n0.5262022756278059  &lt;-- fail, not &lt;= K=0\n0.7755591855768942  &lt;-- fail, not &lt;= K=0\n\nChecking seed: 37\n1.7687943677666822   &lt;-- fail, not &lt;= K=0\n0.10628211826095219  &lt;-- fail, not &lt;= K=0\n1.7204367528361415   &lt;-- fail, not &lt;= K=0\n-0.037534100873246996\n-0.7556292895100587\n\nChecking seed: 38\n-0.5856548327125106\n-0.5353713241423471\n-0.6629651900370352\n-0.06602762115722295\n-0.5573859875224596\n</code></pre>\n\n<p>As you see, the seed <code>38</code> is the first which met the conditions, for <strong>this specific input</strong>. If you change the input condition you might get a different seed value. In fact, when you increase the limit <code>N</code> for the count of random numbers to generate from <code>5</code> to <code>10</code> you will not met the conditions anymore:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>Checking with random number generator seed: 36\n1.2723728744482508    &lt;-- fail, not &lt;= K=0\n-0.870801422312458\n-0.8217339464297395\n0.5262022756278059    &lt;-- fail, not &lt;= K=0\n0.7755591855768942    &lt;-- fail, not &lt;= K=0\n0.1050333460099397    &lt;-- fail, not &lt;= K=0\n-1.2195748465234115\n-0.5682199782926214\n-0.6364150668125728\n1.0752773722411306    &lt;-- fail, not &lt;= K=0\n\nChecking with random number generator seed: 37\n1.7687943677666822     &lt;-- fail, not &lt;= K=0\n0.10628211826095219    &lt;-- fail, not &lt;= K=0\n1.7204367528361415     &lt;-- fail, not &lt;= K=0\n-0.037534100873246996\n-0.7556292895100587\n-0.9951161662703086\n1.052027068066767      &lt;-- fail, not &lt;= K=0\n-0.6497562324361997\n-0.47969604178646064\n1.3195412359422278     &lt;-- fail, not &lt;= K=0\n\nChecking with random number generator seed: 38\n-0.5856548327125106\n-0.5353713241423471\n-0.6629651900370352\n-0.06602762115722295\n-0.5573859875224596\n0.5414339383037863     &lt;-- fail, not &lt;= K=0\n-1.9350302385094755\n1.7250885444038893     &lt;-- fail, not &lt;= K=0\n-1.2161902995946092\n-0.16606956096867706\n</code></pre>\n\n<p>Notice, how the first five numbers in each run are the same even after rerun your code (because of the same seed for the random number generator). But also notice that you generated two numbers for the seed <code>38</code> which are now greater than <code>K=0</code>. So the output <code>38</code> is correct for the input <code>0 5 0</code>, but it is not correct for the input <code>0 10 0</code>.</p>\n"},{"comments":[{"owner":{"account_id":304877,"reputation":2815,"user_id":614659,"accept_rate":36,"display_name":"Logemann"},"score":1,"creation_date":1598367187,"post_id":63580881,"comment_id":112432417,"body_markdown":"It wouldnt hurt give some details about your suggestion.","body":"It wouldnt hurt give some details about your suggestion."}],"tags":[],"owner":{"account_id":15778449,"reputation":61,"user_id":11385590,"display_name":"Rachid Saidane"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1598365104,"creation_date":1598365104,"answer_id":63580881,"question_id":61718704,"body_markdown":"```\r\n import java.util.*;\r\n\r\npublic class Main {\r\n    public static void main(String[] args) {\r\n        Scanner scanner = new Scanner(System.in).useLocale(Locale.US);\r\n        int k = scanner.nextInt();\r\n        int n = scanner.nextInt();\r\n        double m = scanner.nextDouble();\r\n\r\n        for (int i = k; ; i++) {\r\n            Random random = new Random(i);\r\n            int j = 0;\r\n            for (; j &lt; n; j++) {\r\n\r\n                if (random.nextGaussian() &gt; m) {\r\n                    break;\r\n\r\n                }\r\n\r\n            }\r\n\r\n            if (j == n) {\r\n                System.out.println(i);\r\n                break;\r\n            }\r\n\r\n        }\r\n\r\n\r\n    }\r\n}\r\n```","title":"Gaussian random generation with the condition","body":"<pre><code> import java.util.*;\n\npublic class Main {\n    public static void main(String[] args) {\n        Scanner scanner = new Scanner(System.in).useLocale(Locale.US);\n        int k = scanner.nextInt();\n        int n = scanner.nextInt();\n        double m = scanner.nextDouble();\n\n        for (int i = k; ; i++) {\n            Random random = new Random(i);\n            int j = 0;\n            for (; j &lt; n; j++) {\n\n                if (random.nextGaussian() &gt; m) {\n                    break;\n\n                }\n\n            }\n\n            if (j == n) {\n                System.out.println(i);\n                break;\n            }\n\n        }\n\n\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":20179395,"reputation":21,"user_id":14800277,"display_name":"itzj"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1609833560,"creation_date":1609833560,"answer_id":65575021,"question_id":61718704,"body_markdown":"I think the description of the problem is pretty clear.\r\n1. You have to check all N iterations of Gaussian generated numbers to be less than or equal to M. \r\n2. If that is true, then escape loop and print the seed. \r\n3. If any of the generated numbers is greater than M, then you have to test out the next seed and go to the loop all over again.\r\n\r\nSo I literally followed the instructions and this is what I&#39;ve got. \r\n```java\r\nimport java.util.*;\r\n\r\npublic class Main {\r\n    public static void main(String[] args) {\r\n        Scanner sc = new Scanner(System.in);\r\n        int k = sc.nextInt();\r\n        int n = sc.nextInt();\r\n        double m = sc.nextDouble();\r\n\r\n        // your initial seed starts with k\r\n        Random random = new Random(k);\r\n\r\n        // variable to check if all N iterations are valid (&lt;=M)\r\n        int check = 0;\r\n\r\n        // you need an outer loop because like in #3, \r\n        // if there is an invalid number you have to iterate N times again\r\n        while (true) {\r\n\r\n            // this is the N iterations you need\r\n            for (int i = 0; i &lt; n; i++) {\r\n\r\n                // at each iteration, you generate a Gaussian number\r\n                double randomNumber = random.nextGaussian();\r\n\r\n                // again #3: if the generated number is greater than M, move on the the next seed\r\n                if (randomNumber &gt; m) {\r\n                    random.setSeed(++k);    //moving on to the next seed\r\n                    check = 0;  // don&#39;t forget to initialize the check variable too\r\n                    break;\r\n                }\r\n                check++;\r\n            }\r\n            // if all N iterations have passed, that&#39;s your answer\r\n            if (check == n) {\r\n                break;\r\n            }\r\n\r\n        }\r\n        System.out.println(k);\r\n    }\r\n}\r\n```","title":"Gaussian random generation with the condition","body":"<p>I think the description of the problem is pretty clear.</p>\n<ol>\n<li>You have to check all N iterations of Gaussian generated numbers to be less than or equal to M.</li>\n<li>If that is true, then escape loop and print the seed.</li>\n<li>If any of the generated numbers is greater than M, then you have to test out the next seed and go to the loop all over again.</li>\n</ol>\n<p>So I literally followed the instructions and this is what I've got.</p>\n<pre class=\"lang-java prettyprint-override\"><code>import java.util.*;\n\npublic class Main {\n    public static void main(String[] args) {\n        Scanner sc = new Scanner(System.in);\n        int k = sc.nextInt();\n        int n = sc.nextInt();\n        double m = sc.nextDouble();\n\n        // your initial seed starts with k\n        Random random = new Random(k);\n\n        // variable to check if all N iterations are valid (&lt;=M)\n        int check = 0;\n\n        // you need an outer loop because like in #3, \n        // if there is an invalid number you have to iterate N times again\n        while (true) {\n\n            // this is the N iterations you need\n            for (int i = 0; i &lt; n; i++) {\n\n                // at each iteration, you generate a Gaussian number\n                double randomNumber = random.nextGaussian();\n\n                // again #3: if the generated number is greater than M, move on the the next seed\n                if (randomNumber &gt; m) {\n                    random.setSeed(++k);    //moving on to the next seed\n                    check = 0;  // don't forget to initialize the check variable too\n                    break;\n                }\n                check++;\n            }\n            // if all N iterations have passed, that's your answer\n            if (check == n) {\n                break;\n            }\n\n        }\n        System.out.println(k);\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":27445055,"reputation":1,"user_id":20939002,"display_name":"Wael Rezk"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1672940617,"creation_date":1672940617,"answer_id":75022388,"question_id":61718704,"body_markdown":"    import java.util.*;\r\n    import java.util.stream.*;\r\n    public class Main {\r\n        public static void main(String[] args) {\r\n            Scanner scanner = new Scanner(System.in);\r\n            // write your code here\r\n            final long k = scanner.nextLong();\r\n            final long n = scanner.nextLong();\r\n            final double m = scanner.nextDouble();\r\n            long seed = k;\r\n            Random rand = new Random(seed);\r\n            while (Stream.generate(rand::nextGaussian).limit(n).anyMatch(i -&gt; i &gt; m)) {\r\n               rand.setSeed(++seed);\r\n            }\r\n            System.out.println(seed);\r\n        }\r\n    }","title":"Gaussian random generation with the condition","body":"<pre><code>import java.util.*;\nimport java.util.stream.*;\npublic class Main {\n    public static void main(String[] args) {\n        Scanner scanner = new Scanner(System.in);\n        // write your code here\n        final long k = scanner.nextLong();\n        final long n = scanner.nextLong();\n        final double m = scanner.nextDouble();\n        long seed = k;\n        Random rand = new Random(seed);\n        while (Stream.generate(rand::nextGaussian).limit(n).anyMatch(i -&gt; i &gt; m)) {\n           rand.setSeed(++seed);\n        }\n        System.out.println(seed);\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":17162142,"reputation":15,"user_id":13067099,"display_name":"Poul"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":608,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":61734977,"answer_count":5,"score":1,"last_activity_date":1672940617,"creation_date":1589144585,"question_id":61718704,"body_markdown":"I do not understand the task.\r\n\r\n\r\n    import java.util.*;\r\n\r\n    public class GaussianRandomNumbers {\r\n        public static void main(String[] args) {\r\n            Scanner scanner = new Scanner(System.in);\r\n            int k = scanner.nextInt();// for the first seed that is greater or equal to K\r\n            int n = scanner.nextInt();// number of iterations Gaussian\r\n            int m = scanner.nextInt();// Gaussian generated numbers to be less than M\r\n            Random random = new Random();\r\n            for (int i = 0; i &lt; n; i++) {\r\n                if (random.nextGaussian() &lt;= m &amp; random.nextGaussian() &gt;= k) {\r\n                    System.out.println(random.nextGaussian());\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n\r\n\r\nFor the given numbers K, N, and M find the first seed that is greater or equal to K where each of N Gaussian numbers is less than or equal to M.\r\nYou have to check all N iterations of Gaussian generated numbers to be less than or equal to M. If that is true, then escape loop and print the seed. If any of the generated numbers is greater than M, then you have to test out the next seed and go to the loop all over again.\r\n\r\nSample Input 1:\r\n0 5 0\r\nSample Output 1:\r\n38\r\n\r\nWhy is it 38 if the first seed that is greater or equal to K=0 ?  \r\n","title":"Gaussian random generation with the condition","body":"<p>I do not understand the task.</p>\n\n<pre><code>import java.util.*;\n\npublic class GaussianRandomNumbers {\n    public static void main(String[] args) {\n        Scanner scanner = new Scanner(System.in);\n        int k = scanner.nextInt();// for the first seed that is greater or equal to K\n        int n = scanner.nextInt();// number of iterations Gaussian\n        int m = scanner.nextInt();// Gaussian generated numbers to be less than M\n        Random random = new Random();\n        for (int i = 0; i &lt; n; i++) {\n            if (random.nextGaussian() &lt;= m &amp; random.nextGaussian() &gt;= k) {\n                System.out.println(random.nextGaussian());\n            }\n        }\n    }\n}\n</code></pre>\n\n<p>For the given numbers K, N, and M find the first seed that is greater or equal to K where each of N Gaussian numbers is less than or equal to M.\nYou have to check all N iterations of Gaussian generated numbers to be less than or equal to M. If that is true, then escape loop and print the seed. If any of the generated numbers is greater than M, then you have to test out the next seed and go to the loop all over again.</p>\n\n<p>Sample Input 1:\n0 5 0\nSample Output 1:\n38</p>\n\n<p>Why is it 38 if the first seed that is greater or equal to K=0 ?  </p>\n"},{"tags":["java","generics","casting"],"comments":[{"owner":{"account_id":12462,"reputation":162446,"user_id":24545,"accept_rate":99,"display_name":"Yuval Adam"},"score":0,"creation_date":1243243098,"post_id":905964,"comment_id":713743,"body_markdown":"you should have given code examples from the start, I&#39;ll update my answer in a second...","body":"you should have given code examples from the start, I&#39;ll update my answer in a second..."}],"answers":[{"comments":[{"owner":{"account_id":21195,"reputation":26135,"user_id":2119053,"accept_rate":81,"display_name":"jrharshath"},"score":0,"creation_date":1243242508,"post_id":905974,"comment_id":713706,"body_markdown":"You missed my point. Consider: [code] LinkedList&lt;E&gt; ll = someList; List&lt;Object&gt; l =ll [/code]. Is this okay? I mean this.","body":"You missed my point. Consider: [code] LinkedList&lt;E&gt; ll = someList; List&lt;Object&gt; l =ll [/code]. Is this okay? I mean this."},{"owner":{"account_id":21195,"reputation":26135,"user_id":2119053,"accept_rate":81,"display_name":"jrharshath"},"score":0,"creation_date":1243243058,"post_id":905974,"comment_id":713740,"body_markdown":"Did what you said, but problem persists. Edited the question to add code example and the error encountered.","body":"Did what you said, but problem persists. Edited the question to add code example and the error encountered."},{"owner":{"account_id":18638,"reputation":6820,"user_id":42902,"display_name":"Andrew Duffy"},"score":1,"creation_date":1243246041,"post_id":905974,"comment_id":713899,"body_markdown":"Is it possible for your getList() method to return List&lt;?&gt;?","body":"Is it possible for your getList() method to return List&lt;?&gt;?"},{"owner":{"account_id":21195,"reputation":26135,"user_id":2119053,"accept_rate":81,"display_name":"jrharshath"},"score":0,"creation_date":1243311114,"post_id":905974,"comment_id":716772,"body_markdown":"@Andrew No. Thats the main problem.","body":"@Andrew No. Thats the main problem."}],"tags":[],"owner":{"account_id":12462,"reputation":162446,"user_id":24545,"accept_rate":99,"display_name":"Yuval Adam"},"comment_count":4,"down_vote_count":0,"up_vote_count":32,"is_accepted":true,"score":32,"last_activity_date":1243244575,"creation_date":1243242223,"answer_id":905974,"question_id":905964,"body_markdown":"You do not need to cast. `LinkedList` implements `List` so you have no casting to do here.\r\n\r\nEven when you want to down-cast to a `List` of `Object`s you can do it with generics like in the following code:\r\n\r\n    LinkedList&lt;E&gt; ll = someList;\r\n    List&lt;? extends Object&gt; l = ll; // perfectly fine, no casting needed\r\n\r\nNow, after your edit I understand what you are trying to do, and it is something that is not possible, without creating a new `List` like so:\r\n\r\n    LinkedList&lt;E&gt; ll = someList;\r\n    List&lt;Object&gt; l = new LinkedList&lt;Object&gt;();\r\n    for (E e : ll) {\r\n        l.add((Object) e); // need to cast each object specifically\r\n    }\r\n\r\nand I&#39;ll explain why this is not possible otherwise. Consider this:\r\n\r\n    LinkedList&lt;String&gt; ll = new LinkedList&lt;String&gt;();\r\n    List&lt;Object&gt; l = ll; // ERROR, but suppose this was possible\r\n    l.add((Object) new Integer(5)); // now what? How is an int a String???\r\n\r\nFor more info, see the [Sun Java generics tutorial][1]. Hope this clarifies.\r\n\r\n\r\n  [1]: http://java.sun.com/j2se/1.5/pdf/generics-tutorial.pdf","title":"How to cast generic List types in java?","body":"<p>You do not need to cast. <code>LinkedList</code> implements <code>List</code> so you have no casting to do here.</p>\n\n<p>Even when you want to down-cast to a <code>List</code> of <code>Object</code>s you can do it with generics like in the following code:</p>\n\n<pre><code>LinkedList&lt;E&gt; ll = someList;\nList&lt;? extends Object&gt; l = ll; // perfectly fine, no casting needed\n</code></pre>\n\n<p>Now, after your edit I understand what you are trying to do, and it is something that is not possible, without creating a new <code>List</code> like so:</p>\n\n<pre><code>LinkedList&lt;E&gt; ll = someList;\nList&lt;Object&gt; l = new LinkedList&lt;Object&gt;();\nfor (E e : ll) {\n    l.add((Object) e); // need to cast each object specifically\n}\n</code></pre>\n\n<p>and I'll explain why this is not possible otherwise. Consider this:</p>\n\n<pre><code>LinkedList&lt;String&gt; ll = new LinkedList&lt;String&gt;();\nList&lt;Object&gt; l = ll; // ERROR, but suppose this was possible\nl.add((Object) new Integer(5)); // now what? How is an int a String???\n</code></pre>\n\n<p>For more info, see the <a href=\"http://java.sun.com/j2se/1.5/pdf/generics-tutorial.pdf\" rel=\"noreferrer\">Sun Java generics tutorial</a>. Hope this clarifies.</p>\n"},{"comments":[{"owner":{"account_id":21195,"reputation":26135,"user_id":2119053,"accept_rate":81,"display_name":"jrharshath"},"score":0,"creation_date":1243242699,"post_id":905983,"comment_id":713717,"body_markdown":"I want to convert from LinkedList&lt;String&gt; to List&lt;Object&gt;. That (i used to think) should be automatic, coz LinkedList IS_A List, and String IS_A Object. But I found out today that it is not. :(","body":"I want to convert from LinkedList&lt;String&gt; to List&lt;Object&gt;. That (i used to think) should be automatic, coz LinkedList IS_A List, and String IS_A Object. But I found out today that it is not. :("}],"tags":[],"owner":{"account_id":17450,"reputation":12197,"user_id":39062,"accept_rate":100,"display_name":"Markus Lausberg"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1243242462,"creation_date":1243242462,"answer_id":905983,"question_id":905964,"body_markdown":"LinkedList implements List, so you can implement\r\n\r\n    List&lt; String &gt; list1 = new LinkedList&lt; String &gt;(); \r\n\r\nOr do you want to cast from LinkedList&lt; String &gt; to List&lt; int &gt;? in this case you have to pick every single element and convert it to an integer.","title":"How to cast generic List types in java?","body":"<p>LinkedList implements List, so you can implement</p>\n\n<pre><code>List&lt; String &gt; list1 = new LinkedList&lt; String &gt;(); \n</code></pre>\n\n<p>Or do you want to cast from LinkedList&lt; String > to List&lt; int >? in this case you have to pick every single element and convert it to an integer.</p>\n"},{"comments":[{"owner":{"account_id":12462,"reputation":162446,"user_id":24545,"accept_rate":99,"display_name":"Yuval Adam"},"score":3,"creation_date":1243242591,"post_id":905987,"comment_id":713710,"body_markdown":"an explicit cast is never necessary.","body":"an explicit cast is never necessary."}],"tags":[],"owner":{"account_id":38896,"reputation":1799,"user_id":111943,"display_name":"Nick"},"comment_count":1,"down_vote_count":2,"up_vote_count":1,"is_accepted":false,"score":-1,"last_activity_date":1243242483,"creation_date":1243242483,"answer_id":905987,"question_id":905964,"body_markdown":"List is an interface, LinkedList is a concrete implementation of that interface.\r\nMuch of the time an implicit cast will work, assign a LinkedList to a List, or pass it to a function expecting a List and it should just `work&#39;.\r\n\r\nAn explicit cast can also be done if necessary.\r\n\r\n    //This is valid\r\n    List&lt;Customer&gt; myList = new LinkedList&lt;Customer&gt;();\r\n\r\n    //Also Valid\r\n    List&lt;Customer&gt; myList = (List&lt;Customer&gt;) new LinkedList&lt;Customer&gt;();","title":"How to cast generic List types in java?","body":"<p>List is an interface, LinkedList is a concrete implementation of that interface.\nMuch of the time an implicit cast will work, assign a LinkedList to a List, or pass it to a function expecting a List and it should just `work'.</p>\n\n<p>An explicit cast can also be done if necessary.</p>\n\n<pre><code>//This is valid\nList&lt;Customer&gt; myList = new LinkedList&lt;Customer&gt;();\n\n//Also Valid\nList&lt;Customer&gt; myList = (List&lt;Customer&gt;) new LinkedList&lt;Customer&gt;();\n</code></pre>\n"},{"tags":[],"owner":{"account_id":27776,"reputation":14436,"user_id":73652,"accept_rate":88,"display_name":"Kris"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1243251420,"creation_date":1243251420,"answer_id":906408,"question_id":905964,"body_markdown":"    &gt;    public List&lt;Object&gt; getList()\r\n\r\nWhy are you returning List&amp;lt;Object&amp;gt;? You might as well return List (without generics) since that is equivalent but would make the following code work: \r\n\r\n    LinkedList&lt;Customer&gt; theList = new LinkedList&lt;Customer&gt;();\r\n\r\n    public List getList() {\r\n        return theList;\r\n    }\r\n\r\nCasting between Lists with different generic types is tricky and seems unnecessary here.\r\n\r\nOf course you should be returning type List&amp;lt;Customer&amp;gt; ...","title":"How to cast generic List types in java?","body":"<pre><code>&gt;    public List&lt;Object&gt; getList()\n</code></pre>\n\n<p>Why are you returning List&lt;Object&gt;? You might as well return List (without generics) since that is equivalent but would make the following code work: </p>\n\n<pre><code>LinkedList&lt;Customer&gt; theList = new LinkedList&lt;Customer&gt;();\n\npublic List getList() {\n    return theList;\n}\n</code></pre>\n\n<p>Casting between Lists with different generic types is tricky and seems unnecessary here.</p>\n\n<p>Of course you should be returning type List&lt;Customer&gt; ...</p>\n"},{"tags":[],"owner":{"account_id":31622,"reputation":120351,"user_id":86989,"display_name":"newacct"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1243273373,"creation_date":1243273373,"answer_id":907517,"question_id":905964,"body_markdown":"You should return a `List&lt;?&gt;` from your method. Intuitively, `getList()` returns a list so that the caller can retrieve the items inside. `List&lt;?&gt;` (which is equivalent to `List&lt;? extends Object&gt;`) allows that functionality. However, you won&#39;t be able to put anything into it via the returned list, because that would not be type safe; but I don&#39;t think that is what you need anyway.\r\n\r\n    public List&lt;?&gt; getList()\r\n    {\r\n        return theList;\r\n    }\r\n\r\n","title":"How to cast generic List types in java?","body":"<p>You should return a <code>List&lt;?&gt;</code> from your method. Intuitively, <code>getList()</code> returns a list so that the caller can retrieve the items inside. <code>List&lt;?&gt;</code> (which is equivalent to <code>List&lt;? extends Object&gt;</code>) allows that functionality. However, you won't be able to put anything into it via the returned list, because that would not be type safe; but I don't think that is what you need anyway.</p>\n\n<pre><code>public List&lt;?&gt; getList()\n{\n    return theList;\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":69301,"reputation":10391,"user_id":201722,"accept_rate":95,"display_name":"luis.espinal"},"score":1,"creation_date":1600178605,"post_id":6172503,"comment_id":113001890,"body_markdown":"I am absolutely ok with this. I do it regularly. I usually do this &quot;internally&quot; in libraries (never exposed in the wild for arbitrary casts). Then I structure my code to make a wrong cast impossible.\n\nSo when I know that I can safely cast List&lt;E&gt; to List&lt;B&gt; because the structure of my code obligates E to be a subclass of B (and I don&#39;t need to reverse the cast), then I&#39;m good to go.\n\nSometimes a &quot;hack&quot; is the right and clean thing to do.","body":"I am absolutely ok with this. I do it regularly. I usually do this &quot;internally&quot; in libraries (never exposed in the wild for arbitrary casts). Then I structure my code to make a wrong cast impossible.  So when I know that I can safely cast List&lt;E&gt; to List&lt;B&gt; because the structure of my code obligates E to be a subclass of B (and I don&#39;t need to reverse the cast), then I&#39;m good to go.  Sometimes a &quot;hack&quot; is the right and clean thing to do."}],"tags":[],"owner":{"account_id":50730,"reputation":3426,"user_id":151365,"accept_rate":78,"display_name":"logan"},"comment_count":1,"down_vote_count":0,"up_vote_count":20,"is_accepted":false,"score":20,"last_activity_date":1383070953,"creation_date":1306732491,"answer_id":6172503,"question_id":905964,"body_markdown":"Here&#39;s my horrible solution for doing casting. I know, I know, I shouldn&#39;t be releasing something like this into the wild, but it has come in handy for casting any object to any type:\r\n\r\n    public class UnsafeCastUtil {\r\n    \r\n        private UnsafeCastUtil(){ /* not instatiable */}\r\n    \r\n        /**\r\n        * Warning! Using this method is a sin against the gods of programming!\r\n        */\r\n        @SuppressWarnings(&quot;unchecked&quot;)\r\n        public static &lt;T&gt; T cast(Object o){\r\n    \t    return (T)o;\r\n        }\r\n    \r\n    }\r\n\r\nUsage:\r\n\r\n    Cat c = new Cat();\r\n    Dog d = UnsafeCastUtil.cast(c);\r\n\r\nNow I&#39;m going to pray to the gods of programming for my sins...","title":"How to cast generic List types in java?","body":"<p>Here's my horrible solution for doing casting. I know, I know, I shouldn't be releasing something like this into the wild, but it has come in handy for casting any object to any type:</p>\n\n<pre><code>public class UnsafeCastUtil {\n\n    private UnsafeCastUtil(){ /* not instatiable */}\n\n    /**\n    * Warning! Using this method is a sin against the gods of programming!\n    */\n    @SuppressWarnings(\"unchecked\")\n    public static &lt;T&gt; T cast(Object o){\n        return (T)o;\n    }\n\n}\n</code></pre>\n\n<p>Usage:</p>\n\n<pre><code>Cat c = new Cat();\nDog d = UnsafeCastUtil.cast(c);\n</code></pre>\n\n<p>Now I'm going to pray to the gods of programming for my sins...</p>\n"},{"tags":[],"owner":{"account_id":178454,"reputation":5330,"user_id":410439,"accept_rate":81,"display_name":"Ravi Parekh"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1326927034,"creation_date":1312021833,"answer_id":6882565,"question_id":905964,"body_markdown":"just put\r\n\r\n    public static List&lt;Object&gt; getList() {\r\n        List l = test;\r\n        return l;\r\n    }","title":"How to cast generic List types in java?","body":"<p>just put</p>\n\n<pre><code>public static List&lt;Object&gt; getList() {\n    List l = test;\n    return l;\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":2808454,"reputation":14373,"user_id":2415194,"accept_rate":87,"display_name":"nachokk"},"score":2,"creation_date":1431107253,"post_id":15691905,"comment_id":48369721,"body_markdown":"and `clazz` is for what ? is not used","body":"and <code>clazz</code> is for what ? is not used"},{"owner":{"account_id":246615,"reputation":7540,"user_id":520857,"accept_rate":40,"display_name":"Populus"},"score":2,"creation_date":1581721043,"post_id":15691905,"comment_id":106543994,"body_markdown":"`clazz` is purely used to determine what `T` is, so `collection` can be casted to a collection of `T`","body":"<code>clazz</code> is purely used to determine what <code>T</code> is, so <code>collection</code> can be casted to a collection of <code>T</code>"}],"tags":[],"owner":{"account_id":334736,"reputation":531,"user_id":2091489,"display_name":"julman99"},"comment_count":2,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1364503875,"creation_date":1364503875,"answer_id":15691905,"question_id":905964,"body_markdown":"I did this function for that, ugly but it works\r\n\r\n    public static &lt;T&gt; Collection&lt;T&gt; cast(Collection&lt;? super T&gt; collection, Class&lt;T&gt; clazz){\r\n        return (Collection&lt;T&gt;)collection;\r\n    }","title":"How to cast generic List types in java?","body":"<p>I did this function for that, ugly but it works</p>\n\n<pre><code>public static &lt;T&gt; Collection&lt;T&gt; cast(Collection&lt;? super T&gt; collection, Class&lt;T&gt; clazz){\n    return (Collection&lt;T&gt;)collection;\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":4746014,"reputation":1,"user_id":3837361,"display_name":"Vishal"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1405349096,"creation_date":1405349096,"answer_id":24739217,"question_id":905964,"body_markdown":"If your list is of a generic type for eg\r\n\r\n`ArrayList&lt;String&gt; strList = new ArrayList&lt;String&gt;();\r\nstrList.add(&quot;String1&quot;);\r\nObject o = strList;`\r\n\r\nthen Following method should work\r\n\r\n    public &lt;T&gt; List&lt;T&gt; getListObjectInBodyOfType(Class&lt;T&gt; classz, Object body) {\r\n\t\tif(body instanceof List&lt;?&gt;){\r\n\t\t\tList&lt;?&gt; tempList = (List&lt;?&gt;)body;\r\n\t\t\tif(tempList.size() &gt; 0 &amp;&amp; tempList.get(0).getClass().equals(classz)){\r\n\t\t\t\treturn (List&lt;T&gt;) body;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn new ArrayList&lt;T&gt;();\r\n\t}\r\nHow to use it?\r\n\r\n    List&lt;String&gt; strList1 = getListObjectInBodyOfType(String.class, o);\r\n\r\nas I mentioned before it works if the Object contains generic list, this won&#39;t work if you pass a non-generic list with mixed type of elements\r\n","title":"How to cast generic List types in java?","body":"<p>If your list is of a generic type for eg</p>\n\n<p><code>ArrayList&lt;String&gt; strList = new ArrayList&lt;String&gt;();\nstrList.add(\"String1\");\nObject o = strList;</code></p>\n\n<p>then Following method should work</p>\n\n<pre><code>public &lt;T&gt; List&lt;T&gt; getListObjectInBodyOfType(Class&lt;T&gt; classz, Object body) {\n    if(body instanceof List&lt;?&gt;){\n        List&lt;?&gt; tempList = (List&lt;?&gt;)body;\n        if(tempList.size() &gt; 0 &amp;&amp; tempList.get(0).getClass().equals(classz)){\n            return (List&lt;T&gt;) body;\n        }\n    }\n    return new ArrayList&lt;T&gt;();\n}\n</code></pre>\n\n<p>How to use it?</p>\n\n<pre><code>List&lt;String&gt; strList1 = getListObjectInBodyOfType(String.class, o);\n</code></pre>\n\n<p>as I mentioned before it works if the Object contains generic list, this won't work if you pass a non-generic list with mixed type of elements</p>\n"},{"tags":[],"owner":{"account_id":9306157,"reputation":586,"user_id":6909832,"display_name":"Matheus Santz"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1672940606,"creation_date":1672940606,"answer_id":75022385,"question_id":905964,"body_markdown":"Based on **julman99** [answer][1]:\r\n\r\n    @SuppressWarnings(&quot;unchecked&quot;)\r\n\tpublic &lt;T&gt; List&lt;T&gt; cast(List&lt;? super T&gt; list){\r\n\t\treturn (List&lt;T&gt;) list;\r\n\t}\r\n\r\n\r\n  [1]: https://stackoverflow.com/a/15691905/6909832","title":"How to cast generic List types in java?","body":"<p>Based on <strong>julman99</strong> <a href=\"https://stackoverflow.com/a/15691905/6909832\">answer</a>:</p>\n<pre><code>@SuppressWarnings(&quot;unchecked&quot;)\npublic &lt;T&gt; List&lt;T&gt; cast(List&lt;? super T&gt; list){\n    return (List&lt;T&gt;) list;\n}\n</code></pre>\n"}],"owner":{"account_id":21195,"reputation":26135,"user_id":2119053,"accept_rate":81,"display_name":"jrharshath"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":102203,"favorite_count":0,"down_vote_count":0,"up_vote_count":18,"accepted_answer_id":905974,"answer_count":10,"score":18,"last_activity_date":1672940606,"creation_date":1243242048,"question_id":905964,"body_markdown":"Well, I have a class Customer (no base class).\r\n\r\nI need to cast from LinkedList&lt;Customer&gt; to List&lt;Object&gt;. Is there any clean way to do this?\r\n\r\nJust so you know, I need to cast it to List&lt;Object&gt;. No other type will do. (I&#39;m developing a test fixture using Slim and FitNesse).\r\n\r\n\r\n----------\r\n\r\nEDIT: Okay, I think I need to give code examples here.\r\n\r\n    import java.util.*;\r\n    public class CustomerCollection\r\n    {\r\n    \tprotected LinkedList&lt;Customer&gt; theList;\r\n    \t\r\n    \tpublic CustomerCollection()\r\n    \t{\r\n    \t\ttheList = new LinkedList&lt;Customer&gt;();\r\n    \t}\r\n    \t\r\n    \tpublic void addCustomer(Customer c){ theList.add(c); }\r\n    \tpublic List&lt;Object&gt; getList()\r\n    \t{\r\n    \t\treturn (List&lt;? extends Object&gt;) theList;\r\n    \t}\r\n    }\r\n\r\nSo in accordance with Yuval A&#39;s remarks, I&#39;ve finally written the code this way. But I get this error:\r\n\r\n    CustomerCollection.java:31: incompatible types\r\n    found   : java.util.List&lt;capture#824 of ? extends java.lang.Object&gt;\r\n    required: java.util.List&lt;java.lang.Object&gt;\r\n    \t\treturn (List&lt;? extends Object&gt;)theList;\r\n    \t\t       ^\r\n    1 error\r\n\r\nSo, what&#39;s the correct way to do this cast?","title":"How to cast generic List types in java?","body":"<p>Well, I have a class Customer (no base class).</p>\n\n<p>I need to cast from LinkedList to List. Is there any clean way to do this?</p>\n\n<p>Just so you know, I need to cast it to List. No other type will do. (I'm developing a test fixture using Slim and FitNesse).</p>\n\n<hr>\n\n<p>EDIT: Okay, I think I need to give code examples here.</p>\n\n<pre><code>import java.util.*;\npublic class CustomerCollection\n{\n    protected LinkedList&lt;Customer&gt; theList;\n\n    public CustomerCollection()\n    {\n        theList = new LinkedList&lt;Customer&gt;();\n    }\n\n    public void addCustomer(Customer c){ theList.add(c); }\n    public List&lt;Object&gt; getList()\n    {\n        return (List&lt;? extends Object&gt;) theList;\n    }\n}\n</code></pre>\n\n<p>So in accordance with Yuval A's remarks, I've finally written the code this way. But I get this error:</p>\n\n<pre><code>CustomerCollection.java:31: incompatible types\nfound   : java.util.List&lt;capture#824 of ? extends java.lang.Object&gt;\nrequired: java.util.List&lt;java.lang.Object&gt;\n        return (List&lt;? extends Object&gt;)theList;\n               ^\n1 error\n</code></pre>\n\n<p>So, what's the correct way to do this cast?</p>\n"},{"tags":["java","openssl","ssl-certificate","pki"],"comments":[{"owner":{"account_id":97926,"reputation":823,"user_id":265374,"accept_rate":75,"display_name":"reddot"},"score":0,"creation_date":1481029736,"post_id":10308903,"comment_id":69200804,"body_markdown":"Check my [answer](http://security.stackexchange.com/a/144514/132597) on security stackexchange.","body":"Check my <a href=\"http://security.stackexchange.com/a/144514/132597\">answer</a> on security stackexchange."}],"answers":[{"tags":[],"owner":{"display_name":"user1352498"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1335324372,"creation_date":1335324372,"answer_id":10308937,"question_id":10308903,"body_markdown":"Have you tried the BouncyCastle lib?\r\n\r\n[http://www.bouncycastle.org/wiki/display/JA1/Frequently+Asked+Questions][1]\r\n\r\n&quot;\r\nThere are specific example programs for dealing with Attribute Certificates, PKCS12, SMIME and OpenPGP. They can be found in the packages:\r\n\r\norg.bouncycastle.jce.examples\r\norg.bouncycastle.mail.smime.examples\r\norg.bouncycastle.openpgp.examples\r\nAnother useful source of examples is the test packages:\r\n\r\norg.bouncycastle.crypto.test\r\norg.bouncycastle.jce.provider.test\r\norg.bouncycastle.cms.test\r\norg.bouncycastle.mail.smime.test\r\norg.bouncycastle.openpgp.test\r\norg.bouncycastle.cert.test\r\norg.bouncycastle.pkcs.test\r\norg.bouncycastle.tsp.test\r\n&quot;\r\n\r\n\r\n  [1]: http://www.bouncycastle.org/wiki/display/JA1/Frequently+Asked+Questions","title":"Find if a certificate is self signed or CA signed","body":"<p>Have you tried the BouncyCastle lib?</p>\n\n<p><a href=\"http://www.bouncycastle.org/wiki/display/JA1/Frequently+Asked+Questions\" rel=\"nofollow\">http://www.bouncycastle.org/wiki/display/JA1/Frequently+Asked+Questions</a></p>\n\n<p>\"\nThere are specific example programs for dealing with Attribute Certificates, PKCS12, SMIME and OpenPGP. They can be found in the packages:</p>\n\n<p>org.bouncycastle.jce.examples\norg.bouncycastle.mail.smime.examples\norg.bouncycastle.openpgp.examples\nAnother useful source of examples is the test packages:</p>\n\n<p>org.bouncycastle.crypto.test\norg.bouncycastle.jce.provider.test\norg.bouncycastle.cms.test\norg.bouncycastle.mail.smime.test\norg.bouncycastle.openpgp.test\norg.bouncycastle.cert.test\norg.bouncycastle.pkcs.test\norg.bouncycastle.tsp.test\n\"</p>\n"},{"comments":[{"owner":{"account_id":167877,"reputation":1574,"user_id":392967,"display_name":"glyphobet"},"score":1,"creation_date":1357658597,"post_id":10309119,"comment_id":19719842,"body_markdown":"You can improve this by just doing `openssl x509 -in $f -issuer -subject`, and removing the `head` and second `openssl` commands.","body":"You can improve this by just doing <code>openssl x509 -in $f -issuer -subject</code>, and removing the <code>head</code> and second <code>openssl</code> commands."},{"owner":{"account_id":2083970,"reputation":725,"user_id":1855326,"accept_rate":71,"display_name":"muchwow"},"score":0,"creation_date":1384309713,"post_id":10309119,"comment_id":29682336,"body_markdown":"You said &quot;if they are different, then it was signed by a CA&quot;. I think it&#39;s important to notice that it doesn&#39;t actually. Usually, a certificate is signed by more than one certificate in chain. \nEx:Your main certificate is signed by the second one than is itself signed by another certificate and so on. \nIt is important to check all certificates in the chain to ensure the first certificate validation. Else it is a great Technic. thanks!","body":"You said &quot;if they are different, then it was signed by a CA&quot;. I think it&#39;s important to notice that it doesn&#39;t actually. Usually, a certificate is signed by more than one certificate in chain.  Ex:Your main certificate is signed by the second one than is itself signed by another certificate and so on.  It is important to check all certificates in the chain to ensure the first certificate validation. Else it is a great Technic. thanks!"},{"owner":{"account_id":158544,"reputation":102715,"user_id":377270,"display_name":"sarnold"},"score":0,"creation_date":1384366981,"post_id":10309119,"comment_id":29711330,"body_markdown":"@jumojer, that&#39;s a good point -- this is by no means a _verifier_, this is only a way to tell self-signed apart from CA-signed.","body":"@jumojer, that&#39;s a good point -- this is by no means a <i>verifier</i>, this is only a way to tell self-signed apart from CA-signed."},{"owner":{"account_id":1142054,"reputation":1684,"user_id":1125660,"display_name":"rsaxvc"},"score":1,"creation_date":1463543258,"post_id":10309119,"comment_id":62104228,"body_markdown":"&quot;-noout&quot; would be a little cleaner than &quot;| head -1&quot;","body":"&quot;-noout&quot; would be a little cleaner than &quot;| head -1&quot;"},{"owner":{"account_id":4384962,"reputation":1828,"user_id":3575426,"accept_rate":94,"display_name":"Youda008"},"score":1,"creation_date":1571401650,"post_id":10309119,"comment_id":103239391,"body_markdown":"What if someone created a certificate with the &quot;issuer&quot; field set to some known CA and then signed it by his own private key? This doesn&#39;t seem like a correct bullet-proof way to recognize self-signed certs. You should check whether the signature comes from the same key that is in the certificate itself.","body":"What if someone created a certificate with the &quot;issuer&quot; field set to some known CA and then signed it by his own private key? This doesn&#39;t seem like a correct bullet-proof way to recognize self-signed certs. You should check whether the signature comes from the same key that is in the certificate itself."},{"owner":{"account_id":158544,"reputation":102715,"user_id":377270,"display_name":"sarnold"},"score":0,"creation_date":1571426932,"post_id":10309119,"comment_id":103251263,"body_markdown":"@Youda008, thanks for the comment; [mattjm&#39;s answer](https://stackoverflow.com/a/57927684/377270) appears to be a better solution.","body":"@Youda008, thanks for the comment; <a href=\"https://stackoverflow.com/a/57927684/377270\">mattjm&#39;s answer</a> appears to be a better solution."},{"owner":{"account_id":3421244,"reputation":35883,"user_id":2868801,"display_name":"dave_thompson_085"},"score":0,"creation_date":1571429472,"post_id":10309119,"comment_id":103252183,"body_markdown":"@jumojer: yes there are usually multiple CA certs forming a chain (and you check all of them to validate) -- some of them are _intermediate_ or _subordinate_ CAs and the last/top one is a _root_ CA but they are all CAs, and your end-entity aka leaf cert is issued&amp;signed by an intermediate CA and is thus CA-issued/signed.","body":"@jumojer: yes there are usually multiple CA certs forming a chain (and you check all of them to validate) -- some of them are <i>intermediate</i> or <i>subordinate</i> CAs and the last/top one is a <i>root</i> CA but they are all CAs, and your end-entity aka leaf cert is issued&amp;signed by an intermediate CA and is thus CA-issued/signed."},{"owner":{"account_id":2332993,"reputation":2045,"user_id":2045924,"accept_rate":83,"display_name":"sastorsl"},"score":1,"creation_date":1591257326,"post_id":10309119,"comment_id":109988029,"body_markdown":"&quot;why would one want to know about self-signed certificates&quot;. In a big shop you will want to scan known devices to keep up to date of the amount, type of, health and expiry of certificates. If you have a policy to not have self signed certificates in the shop, but you know, it happens, you might want to flag these specifically.","body":"&quot;why would one want to know about self-signed certificates&quot;. In a big shop you will want to scan known devices to keep up to date of the amount, type of, health and expiry of certificates. If you have a policy to not have self signed certificates in the shop, but you know, it happens, you might want to flag these specifically."}],"tags":[],"owner":{"account_id":158544,"reputation":102715,"user_id":377270,"display_name":"sarnold"},"comment_count":8,"down_vote_count":1,"up_vote_count":16,"is_accepted":true,"score":15,"last_activity_date":1571427413,"creation_date":1335325849,"answer_id":10309119,"question_id":10308903,"body_markdown":"Edit: there are two better answers on this question today:\r\n\r\n- https://stackoverflow.com/a/57927684/377270\r\n- https://stackoverflow.com/a/14515875/377270\r\n\r\nHowever, I think there&#39;s something more important to address -- *why* would one want to know about self-signed certificates. What&#39;s the goal? What problem is being solved? Probably trying to split certificates into two piles, self-signed and not-self-signed, is the wrong approach for most situations. The better approach is almost certainly going to be verifying that any given certificate has a valid signature chain from a trusted certificate authority, and that any connections associated with a given certificate matches the certificate.\r\n\r\nHere&#39;s the rest of my original answer. It&#39;s probably not what you want.\r\n\r\n---\r\n\r\nIt&#39;s a bit hacky, but the `openssl x509` command can report both the issuer and the subject. If the subject and issuer are the same, it is self-signed; if they are different, then it was signed by a CA. (Strictly speaking, a great many self-signed certificates are _also_ signed by a CA -- themselves.)\r\n\r\nWhile testing this theory, I ran a handful of tests; it runs something like:\r\n\r\n    cd /etc/ssl/certs\r\n    for f in *.0 ; do openssl x509 -in $f -issuer | head -1 &gt; /tmp/$f.issuer ; openssl x509 -in $f -subject | head -1 &gt; /tmp/$f.subject ; done\r\n     cd /tmp\r\n     sed -i -e s/issuer=// *.issuer\r\n     sed -i -e s/subject=// *.subject\r\n     cd /etc/ssl/certs/\r\n     for f in *.0 ; do diff -u /tmp/$f.issuer /tmp/$f.subject ; done\r\n\r\nHope this helps.\r\n","title":"Find if a certificate is self signed or CA signed","body":"<p>Edit: there are two better answers on this question today:</p>\n\n<ul>\n<li><a href=\"https://stackoverflow.com/a/57927684/377270\">https://stackoverflow.com/a/57927684/377270</a></li>\n<li><a href=\"https://stackoverflow.com/a/14515875/377270\">https://stackoverflow.com/a/14515875/377270</a></li>\n</ul>\n\n<p>However, I think there's something more important to address -- <em>why</em> would one want to know about self-signed certificates. What's the goal? What problem is being solved? Probably trying to split certificates into two piles, self-signed and not-self-signed, is the wrong approach for most situations. The better approach is almost certainly going to be verifying that any given certificate has a valid signature chain from a trusted certificate authority, and that any connections associated with a given certificate matches the certificate.</p>\n\n<p>Here's the rest of my original answer. It's probably not what you want.</p>\n\n<hr>\n\n<p>It's a bit hacky, but the <code>openssl x509</code> command can report both the issuer and the subject. If the subject and issuer are the same, it is self-signed; if they are different, then it was signed by a CA. (Strictly speaking, a great many self-signed certificates are <em>also</em> signed by a CA -- themselves.)</p>\n\n<p>While testing this theory, I ran a handful of tests; it runs something like:</p>\n\n<pre><code>cd /etc/ssl/certs\nfor f in *.0 ; do openssl x509 -in $f -issuer | head -1 &gt; /tmp/$f.issuer ; openssl x509 -in $f -subject | head -1 &gt; /tmp/$f.subject ; done\n cd /tmp\n sed -i -e s/issuer=// *.issuer\n sed -i -e s/subject=// *.subject\n cd /etc/ssl/certs/\n for f in *.0 ; do diff -u /tmp/$f.issuer /tmp/$f.subject ; done\n</code></pre>\n\n<p>Hope this helps.</p>\n"},{"comments":[{"owner":{"account_id":4592980,"reputation":1694,"user_id":3725805,"accept_rate":40,"display_name":"Galdor"},"score":1,"creation_date":1611677575,"post_id":14515875,"comment_id":116525200,"body_markdown":"but openssl verify -CAfile other_ca.pem self_signed_cert.pem also returns OK, see https://stackoverflow.com/questions/65904954/verify-x509-certificate-with-openssl-to-be-valid-and-signed-by-trusted-cas","body":"but openssl verify -CAfile other_ca.pem self_signed_cert.pem also returns OK, see <a href=\"https://stackoverflow.com/questions/65904954/verify-x509-certificate-with-openssl-to-be-valid-and-signed-by-trusted-cas\" title=\"verify x509 certificate with openssl to be valid and signed by trusted cas\">stackoverflow.com/questions/65904954/&hellip;</a>"}],"tags":[],"owner":{"account_id":1795638,"reputation":261,"user_id":1635082,"display_name":"NitinB"},"comment_count":1,"down_vote_count":0,"up_vote_count":26,"is_accepted":false,"score":26,"last_activity_date":1425494748,"creation_date":1359091567,"answer_id":14515875,"question_id":10308903,"body_markdown":"Following email thread precisely tells the right way to verify if the base64 encoded certificate (i.e. PEM) is self signed or not: http://marc.info/?l=openssl-users&amp;m=116177485311662&amp;w=4\r\n\r\nFollowing is the code snippet:\r\n\r\n    openssl verify -CAfile self_signed_cert.pem self_signed_cert.pem\r\n    \r\nshould return:\r\n    \r\n    self_signed_cert.pem: OK\r\n\r\nOR compare the issuer and subject. If they are same, it is self signed\r\n\r\n    openssl x509 -in cert.pem -inform PEM -noout -subject -issuer\r\n","title":"Find if a certificate is self signed or CA signed","body":"<p>Following email thread precisely tells the right way to verify if the base64 encoded certificate (i.e. PEM) is self signed or not: <a href=\"http://marc.info/?l=openssl-users&amp;m=116177485311662&amp;w=4\">http://marc.info/?l=openssl-users&amp;m=116177485311662&amp;w=4</a></p>\n\n<p>Following is the code snippet:</p>\n\n<pre><code>openssl verify -CAfile self_signed_cert.pem self_signed_cert.pem\n</code></pre>\n\n<p>should return:</p>\n\n<pre><code>self_signed_cert.pem: OK\n</code></pre>\n\n<p>OR compare the issuer and subject. If they are same, it is self signed</p>\n\n<pre><code>openssl x509 -in cert.pem -inform PEM -noout -subject -issuer\n</code></pre>\n"},{"comments":[{"owner":{"account_id":3421244,"reputation":35883,"user_id":2868801,"display_name":"dave_thompson_085"},"score":1,"creation_date":1571430013,"post_id":31128411,"comment_id":103252359,"body_markdown":"This is wrong. Java has handled PKCS12 keystores (at least including privatekey) since at least j6 in 2006, although _commandline keytool_ does so _by default_ only since 8u60 which was in 2015 slightly after this answer. `openssl` can convert pkcs12 only to separate PEM objects for CERTIFICATE(s) and PRIVATE KEY, but Java can&#39;t use either of those as a keystore -- although it can import ONLY the former _into_ a keystore and use that.","body":"This is wrong. Java has handled PKCS12 keystores (at least including privatekey) since at least j6 in 2006, although <i>commandline keytool</i> does so <i>by default</i> only since 8u60 which was in 2015 slightly after this answer. <code>openssl</code> can convert pkcs12 only to separate PEM objects for CERTIFICATE(s) and PRIVATE KEY, but Java can&#39;t use either of those as a keystore -- although it can import ONLY the former <i>into</i> a keystore and use that."}],"tags":[],"owner":{"account_id":6391687,"reputation":391,"user_id":4957586,"accept_rate":36,"display_name":"frogcdcn"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1435629903,"creation_date":1435629903,"answer_id":31128411,"question_id":10308903,"body_markdown":"Java is **unable** to analyze `PKCS12` so that you have to convert it to `keystore` using openssl.  \r\n\r\nHere the keystore has both private key and X509 certificate(or you can choose only to store certificate). Then get the issuer from `keystore` using standard JAVA API and manually verify issuer.","title":"Find if a certificate is self signed or CA signed","body":"<p>Java is <strong>unable</strong> to analyze <code>PKCS12</code> so that you have to convert it to <code>keystore</code> using openssl.  </p>\n\n<p>Here the keystore has both private key and X509 certificate(or you can choose only to store certificate). Then get the issuer from <code>keystore</code> using standard JAVA API and manually verify issuer.</p>\n"},{"tags":[],"owner":{"account_id":16691952,"reputation":71,"user_id":12064321,"display_name":"mattjm"},"comment_count":0,"down_vote_count":0,"up_vote_count":7,"is_accepted":false,"score":7,"last_activity_date":1568396712,"creation_date":1568394066,"answer_id":57927684,"question_id":10308903,"body_markdown":"The accepted answer here isn&#39;t strictly correct.  Old question, but this is the first result in google for &quot;how to tell if a certificate is self signed&quot; so it needs to be cleared up.  \r\n\r\nA cert is almost always self-signed if the issuer and subject match, but it&#39;s not guaranteed.  A certificate can be &quot;self-issued&quot; where it has the same issuer/subject but is signed by a private key that isn&#39;t paired with the public key in the cert.  \r\n\r\nThe first part of the answer above from NitinB is the right way to check for a self-signed cert:\r\n\r\n```openssl verify -CAfile self_signed_cert.pem self_signed_cert.pem```\r\n\r\n\r\n&quot;All self-signed certs are self-issued, but not all self-issued certs are self-signed.&quot;  \r\n\r\nCitation: https://www.rfc-editor.org/rfc/rfc5280\r\n\r\n&quot;Self-issued certificates are CA certificates in which the issuer and subject are the same entity.  Self-issued certificates are generated to support changes in policy or operations.  Self- signed certificates are self-issued certificates where the digital signature may be verified by the public key bound into the certificate.&quot;\r\n\r\n","title":"Find if a certificate is self signed or CA signed","body":"<p>The accepted answer here isn't strictly correct.  Old question, but this is the first result in google for &quot;how to tell if a certificate is self signed&quot; so it needs to be cleared up.</p>\n<p>A cert is almost always self-signed if the issuer and subject match, but it's not guaranteed.  A certificate can be &quot;self-issued&quot; where it has the same issuer/subject but is signed by a private key that isn't paired with the public key in the cert.</p>\n<p>The first part of the answer above from NitinB is the right way to check for a self-signed cert:</p>\n<p><code>openssl verify -CAfile self_signed_cert.pem self_signed_cert.pem</code></p>\n<p>&quot;All self-signed certs are self-issued, but not all self-issued certs are self-signed.&quot;</p>\n<p>Citation: <a href=\"https://www.rfc-editor.org/rfc/rfc5280\" rel=\"nofollow noreferrer\">https://www.rfc-editor.org/rfc/rfc5280</a></p>\n<p>&quot;Self-issued certificates are CA certificates in which the issuer and subject are the same entity.  Self-issued certificates are generated to support changes in policy or operations.  Self- signed certificates are self-issued certificates where the digital signature may be verified by the public key bound into the certificate.&quot;</p>\n"},{"tags":[],"owner":{"account_id":16022714,"reputation":11,"user_id":11563799,"display_name":"Prateek"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1672940359,"creation_date":1672940359,"answer_id":75022337,"question_id":10308903,"body_markdown":"Details could be found in https://www.openssl.org/docs/man3.0/man3/X509_verify.html \r\n\r\nX509_self_signed() checks whether certificate cert is self-signed. For success **the issuer and subject names must match, the components of the authority key identifier (if present) must match the subject key identifier etc.** The signature itself is actually verified only if verify_signature is 1, as for explicitly trusted certificates this verification is not worth the effort.","title":"Find if a certificate is self signed or CA signed","body":"<p>Details could be found in <a href=\"https://www.openssl.org/docs/man3.0/man3/X509_verify.html\" rel=\"nofollow noreferrer\">https://www.openssl.org/docs/man3.0/man3/X509_verify.html</a></p>\n<p>X509_self_signed() checks whether certificate cert is self-signed. For success <strong>the issuer and subject names must match, the components of the authority key identifier (if present) must match the subject key identifier etc.</strong> The signature itself is actually verified only if verify_signature is 1, as for explicitly trusted certificates this verification is not worth the effort.</p>\n"}],"owner":{"account_id":35282,"reputation":2831,"user_id":99901,"accept_rate":53,"display_name":"Nishan"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":63934,"favorite_count":0,"down_vote_count":0,"up_vote_count":25,"accepted_answer_id":10309119,"answer_count":6,"score":25,"last_activity_date":1672940359,"creation_date":1335324035,"question_id":10308903,"body_markdown":"I have a web app, which allows user to upload pkcs12.  I store the pkcs12 as binary in database.  Is there any way for me to know if the certificate in the pkcs12 is self signed or CA signed?\r\n\r\nI am running a Java web app on tomcat and have openssl at my disposal.","title":"Find if a certificate is self signed or CA signed","body":"<p>I have a web app, which allows user to upload pkcs12.  I store the pkcs12 as binary in database.  Is there any way for me to know if the certificate in the pkcs12 is self signed or CA signed?</p>\n\n<p>I am running a Java web app on tomcat and have openssl at my disposal.</p>\n"},{"tags":["java","collections","hashmap","comparison"],"answers":[{"comments":[{"owner":{"account_id":2706912,"reputation":15827,"user_id":2336315,"accept_rate":90,"display_name":"user2336315"},"score":7,"creation_date":1389091456,"post_id":20969245,"comment_id":31502099,"body_markdown":"Yes but the OP also wants that they have the same mapping. And note that you need to override hashCode as well.","body":"Yes but the OP also wants that they have the same mapping. And note that you need to override hashCode as well."},{"owner":{"account_id":4608033,"reputation":9671,"user_id":3736955,"accept_rate":71,"display_name":"Jemshit"},"score":0,"creation_date":1483691669,"post_id":20969245,"comment_id":70208766,"body_markdown":"Don&#39;t you forget to override `hashCode()` if you override `.equals()` as the guy said","body":"Don&#39;t you forget to override <code>hashCode()</code> if you override <code>.equals()</code> as the guy said"}],"tags":[],"owner":{"account_id":1903805,"reputation":41397,"user_id":1719067,"accept_rate":73,"display_name":"Narendra Pathai"},"comment_count":2,"down_vote_count":4,"up_vote_count":38,"is_accepted":true,"score":34,"last_activity_date":1389091054,"creation_date":1389090488,"answer_id":20969245,"question_id":20969211,"body_markdown":"Make an `equals` check on the `keySet()` of both `HashMap`s.\r\n\r\n\r\n***NOTE:***\r\n\r\nIf your `Map` contains `String` keys then it is no problem, but if your Map contains `objA` type keys then you need to make sure that your class `objA` implements `equals()`.\r\n\r\n ","title":"Comparing two hashmaps for equal values and same key sets?","body":"<p>Make an <code>equals</code> check on the <code>keySet()</code> of both <code>HashMap</code>s.</p>\n\n<p><em><strong>NOTE:</em></strong></p>\n\n<p>If your <code>Map</code> contains <code>String</code> keys then it is no problem, but if your Map contains <code>objA</code> type keys then you need to make sure that your class <code>objA</code> implements <code>equals()</code>.</p>\n"},{"comments":[{"owner":{"account_id":48818,"reputation":40628,"user_id":145173,"accept_rate":79,"display_name":"Edward Brey"},"score":0,"creation_date":1428061811,"post_id":20969333,"comment_id":47032648,"body_markdown":"Is this for Java or Android? On Android, the description for `equals` is [different](http://stackoverflow.com/a/29431623/145173).","body":"Is this for Java or Android? On Android, the description for <code>equals</code> is <a href=\"http://stackoverflow.com/a/29431623/145173\">different</a>."},{"owner":{"account_id":2706912,"reputation":15827,"user_id":2336315,"accept_rate":90,"display_name":"user2336315"},"score":0,"creation_date":1428100335,"post_id":20969333,"comment_id":47049617,"body_markdown":"@EdwardBrey The description you state does the same thing. And I don&#39;t know where you got this definition because it&#39;s the same on the Android doc: http://developer.android.com/reference/java/util/Map.html#equals(java.lang.Object)","body":"@EdwardBrey The description you state does the same thing. And I don&#39;t know where you got this definition because it&#39;s the same on the Android doc: <a href=\"http://developer.android.com/reference/java/util/Map.html#equals(java.lang.Object)\" rel=\"nofollow noreferrer\">developer.android.com/reference/java/util/&hellip;</a>"},{"owner":{"account_id":48818,"reputation":40628,"user_id":145173,"accept_rate":79,"display_name":"Edward Brey"},"score":0,"creation_date":1428101672,"post_id":20969333,"comment_id":47049984,"body_markdown":"The documentation for the interface method [Map.equals](http://developer.android.com/reference/java/util/Map.html#equals(java.lang.Object)) is as you quoted. However, `HashMap` implements the `equals` method of that interface via [AbstractMap.equals](http://developer.android.com/reference/java/util/AbstractMap.html#equals(java.lang.Object)), which has the weaker guarantee that I quoted. The `AbstractMap` code matches its documentation. It seems to me that `HashMap` violates the contract of the interface.","body":"The documentation for the interface method <a href=\"http://developer.android.com/reference/java/util/Map.html#equals(java.lang.Object)\" rel=\"nofollow noreferrer\">Map.equals</a> is as you quoted. However, <code>HashMap</code> implements the <code>equals</code> method of that interface via <a href=\"http://developer.android.com/reference/java/util/AbstractMap.html#equals(java.lang.Object)\" rel=\"nofollow noreferrer\">AbstractMap.equals</a>, which has the weaker guarantee that I quoted. The <code>AbstractMap</code> code matches its documentation. It seems to me that <code>HashMap</code> violates the contract of the interface."},{"owner":{"account_id":2706912,"reputation":15827,"user_id":2336315,"accept_rate":90,"display_name":"user2336315"},"score":2,"creation_date":1428484257,"post_id":20969333,"comment_id":47176880,"body_markdown":"@EdwardBrey Then tell me the difference between what you quoted? Because I don&#39;t see any. It does the same thing... _&quot;This implementation first checks the structure of object. If it is not a map or of a **different size**, this returns false. Otherwise it iterates its **own entry set**, looking up each **entry&#39;s key** in **object**. If any **value** does not equal **the other map&#39;s value** for the **same** key, this returns false. Otherwise it returns true.&quot;_","body":"@EdwardBrey Then tell me the difference between what you quoted? Because I don&#39;t see any. It does the same thing... <i>&quot;This implementation first checks the structure of object. If it is not a map or of a <b>different size</b>, this returns false. Otherwise it iterates its <b>own entry set</b>, looking up each <b>entry&#39;s key</b> in <b>object</b>. If any <b>value</b> does not equal <b>the other map&#39;s value</b> for the <b>same</b> key, this returns false. Otherwise it returns true.&quot;</i>"},{"owner":{"account_id":48818,"reputation":40628,"user_id":145173,"accept_rate":79,"display_name":"Edward Brey"},"score":0,"creation_date":1428494086,"post_id":20969333,"comment_id":47183348,"body_markdown":"I was concerned that it doesn&#39;t say that it iterates over the other entry set and does a lookup the other way. However, since, as you highlighted, it checks for identical size and since keys must be unique in each map, it doesn&#39;t need to. A comparison starting from just one side is sufficient.","body":"I was concerned that it doesn&#39;t say that it iterates over the other entry set and does a lookup the other way. However, since, as you highlighted, it checks for identical size and since keys must be unique in each map, it doesn&#39;t need to. A comparison starting from just one side is sufficient."}],"tags":[],"owner":{"account_id":2706912,"reputation":15827,"user_id":2336315,"accept_rate":90,"display_name":"user2336315"},"comment_count":5,"down_vote_count":1,"up_vote_count":77,"is_accepted":false,"score":76,"last_activity_date":1389091105,"creation_date":1389090766,"answer_id":20969333,"question_id":20969211,"body_markdown":"Simply use :\r\n\r\n`mapA.equals(mapB);`\r\n\r\n&gt; Compares the specified object with this map for equality. Returns true\r\n&gt; if the given object is also a map and the two maps represent the **same**\r\n&gt; mappings","title":"Comparing two hashmaps for equal values and same key sets?","body":"<p>Simply use :</p>\n\n<p><code>mapA.equals(mapB);</code></p>\n\n<blockquote>\n  <p>Compares the specified object with this map for equality. Returns true\n  if the given object is also a map and the two maps represent the <strong>same</strong>\n  mappings</p>\n</blockquote>\n"},{"comments":[{"owner":{"account_id":2079816,"reputation":592,"user_id":1852070,"display_name":"Steve Swinsburg"},"score":0,"creation_date":1516671714,"post_id":26830741,"comment_id":83773669,"body_markdown":"This doesn&#39;t work if you have null values in your map. Given the following two maps, it will fail the comparison:\n\n    final Map&lt;String, Double&gt; map1 = new HashMap&lt;&gt;();\n\t\tmap1.put(&quot;key1&quot;, new Double(0.0));\n\t\tmap1.put(&quot;key2&quot;, new Double(75.0));\n\t\tmap1.put(&quot;key3&quot;, null);\n\t\tfinal Map&lt;String, Double&gt; map2 = new HashMap&lt;&gt;();\n\t\tmap2.put(&quot;key1&quot;, Double.valueOf(&quot;0.0&quot;));\n\t\tmap2.put(&quot;key2&quot;, 75.0);\n\t\tmap2.put(&quot;key3&quot;, null);","body":"This doesn&#39;t work if you have null values in your map. Given the following two maps, it will fail the comparison:      final Map&lt;String, Double&gt; map1 = new HashMap&lt;&gt;(); \t\tmap1.put(&quot;key1&quot;, new Double(0.0)); \t\tmap1.put(&quot;key2&quot;, new Double(75.0)); \t\tmap1.put(&quot;key3&quot;, null); \t\tfinal Map&lt;String, Double&gt; map2 = new HashMap&lt;&gt;(); \t\tmap2.put(&quot;key1&quot;, Double.valueOf(&quot;0.0&quot;)); \t\tmap2.put(&quot;key2&quot;, 75.0); \t\tmap2.put(&quot;key3&quot;, null);"}],"tags":[],"owner":{"account_id":5171569,"reputation":337,"user_id":4139888,"display_name":"Antonio Ortells"},"comment_count":1,"down_vote_count":0,"up_vote_count":11,"is_accepted":false,"score":11,"last_activity_date":1473780929,"creation_date":1415552645,"answer_id":26830741,"question_id":20969211,"body_markdown":"Compare every key in mapB against the counterpart in mapA. Then check if there is any key in mapA not existing in mapB\r\n\r\n    public boolean mapsAreEqual(Map&lt;String, String&gt; mapA, Map&lt;String, String&gt; mapB) {\r\n    \r\n        try{\r\n            for (String k : mapB.keySet())\r\n            {\r\n                if (!mapA.get(k).equals(mapB.get(k))) {\r\n                    return false;\r\n                }\r\n            } \r\n            for (String y : mapA.keySet())\r\n            {\r\n                if (!mapB.containsKey(y)) {\r\n                    return false;\r\n                }\r\n            } \r\n        } catch (NullPointerException np) {\r\n            return false;\r\n        }\r\n        return true;\r\n    }\r\n\r\n","title":"Comparing two hashmaps for equal values and same key sets?","body":"<p>Compare every key in mapB against the counterpart in mapA. Then check if there is any key in mapA not existing in mapB</p>\n\n<pre><code>public boolean mapsAreEqual(Map&lt;String, String&gt; mapA, Map&lt;String, String&gt; mapB) {\n\n    try{\n        for (String k : mapB.keySet())\n        {\n            if (!mapA.get(k).equals(mapB.get(k))) {\n                return false;\n            }\n        } \n        for (String y : mapA.keySet())\n        {\n            if (!mapB.containsKey(y)) {\n                return false;\n            }\n        } \n    } catch (NullPointerException np) {\n        return false;\n    }\n    return true;\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":6868634,"reputation":129,"user_id":5279988,"display_name":"SanA"},"comment_count":0,"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1457936994,"creation_date":1457936994,"answer_id":35980881,"question_id":20969211,"body_markdown":"\tpublic boolean compareMap(Map&lt;String, String&gt; map1, Map&lt;String, String&gt; map2) {\r\n\r\n\t\tif (map1 == null || map2 == null)\r\n\t\t\treturn false;\r\n\r\n\t\tfor (String ch1 : map1.keySet()) {\r\n\t\t\tif (!map1.get(ch1).equalsIgnoreCase(map2.get(ch1)))\r\n\t\t\t\treturn false;\r\n\r\n\t\t}\r\n\t\tfor (String ch2 : map2.keySet()) {\r\n\t\t\tif (!map2.get(ch2).equalsIgnoreCase(map1.get(ch2)))\r\n\t\t\t\treturn false;\r\n\r\n\t\t}\r\n\r\n\t\treturn true;\r\n\t}\r\n","title":"Comparing two hashmaps for equal values and same key sets?","body":"<pre><code>public boolean compareMap(Map&lt;String, String&gt; map1, Map&lt;String, String&gt; map2) {\n\n    if (map1 == null || map2 == null)\n        return false;\n\n    for (String ch1 : map1.keySet()) {\n        if (!map1.get(ch1).equalsIgnoreCase(map2.get(ch1)))\n            return false;\n\n    }\n    for (String ch2 : map2.keySet()) {\n        if (!map2.get(ch2).equalsIgnoreCase(map1.get(ch2)))\n            return false;\n\n    }\n\n    return true;\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":12846080,"reputation":51,"user_id":9292423,"display_name":"Haroon Rawat"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1517372526,"creation_date":1517372526,"answer_id":48534438,"question_id":20969211,"body_markdown":"    /* JAVA 8 using streams*/\r\n       public static void main(String args[])\r\n        {\r\n            Map&lt;Integer, Boolean&gt; map = new HashMap&lt;Integer, Boolean&gt;();\r\n            map.put(100, true);\r\n            map.put(1011, false);\r\n            map.put(1022, false);\r\n    \r\n            Map&lt;Integer, Boolean&gt; map1 = new HashMap&lt;Integer, Boolean&gt;();\r\n            map1.put(100, false);\r\n            map1.put(101, false);\r\n            map1.put(102, false);\r\n    \r\n            boolean b = map.entrySet().stream().filter(value -&gt; map1.entrySet().stream().anyMatch(value1 -&gt; (value1.getKey() == value.getKey() &amp;&amp; value1.getValue() == value.getValue()))).findAny().isPresent();\r\n            System.out.println(b);\r\n        }","title":"Comparing two hashmaps for equal values and same key sets?","body":"<pre><code>/* JAVA 8 using streams*/\n   public static void main(String args[])\n    {\n        Map&lt;Integer, Boolean&gt; map = new HashMap&lt;Integer, Boolean&gt;();\n        map.put(100, true);\n        map.put(1011, false);\n        map.put(1022, false);\n\n        Map&lt;Integer, Boolean&gt; map1 = new HashMap&lt;Integer, Boolean&gt;();\n        map1.put(100, false);\n        map1.put(101, false);\n        map1.put(102, false);\n\n        boolean b = map.entrySet().stream().filter(value -&gt; map1.entrySet().stream().anyMatch(value1 -&gt; (value1.getKey() == value.getKey() &amp;&amp; value1.getValue() == value.getValue()))).findAny().isPresent();\n        System.out.println(b);\n    }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":14845218,"reputation":11,"user_id":10720710,"display_name":"Swati"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1543553974,"creation_date":1543553974,"answer_id":53551498,"question_id":20969211,"body_markdown":"if you have two maps lets say map1 and map2 then using java8 Streams,we can compare maps using code below.But it is recommended to use equals rather then != or == \r\n     \r\n    boolean b = map1.entrySet().stream().filter(value -&gt; \r\n                map2.entrySet().stream().anyMatch(value1 -&gt; \r\n                (value1.getKey().equals(value.getKey()) &amp;&amp; \r\n      value1.getValue().equals(value.getValue())))).findAny().isPresent();   \r\n                                \r\n\r\n    System.out.println(&quot;comparison  &quot;+b);\r\n\r\n  \r\n","title":"Comparing two hashmaps for equal values and same key sets?","body":"<p>if you have two maps lets say map1 and map2 then using java8 Streams,we can compare maps using code below.But it is recommended to use equals rather then != or == </p>\n\n<pre><code>boolean b = map1.entrySet().stream().filter(value -&gt; \n            map2.entrySet().stream().anyMatch(value1 -&gt; \n            (value1.getKey().equals(value.getKey()) &amp;&amp; \n  value1.getValue().equals(value.getValue())))).findAny().isPresent();   \n\n\nSystem.out.println(\"comparison  \"+b);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":11826686,"reputation":175,"user_id":11249006,"display_name":"Jonas Freire"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1672940344,"creation_date":1672940344,"answer_id":75022334,"question_id":20969211,"body_markdown":"A simple and good algorithm for such a comparison could be:\r\n\r\n        Map&lt;Integer, Boolean&gt; map1 = new HashMap&lt;Integer, Boolean&gt;();\r\n        map1.put(100, false);\r\n        map1.put(101, false);\r\n        map1.put(102, false);\r\n\r\n        Map&lt;Integer, Boolean&gt; map2 = new HashMap&lt;Integer, Boolean&gt;();\r\n        map2.put(100, false);\r\n        map2.put(1011, false);\r\n        map2.put(1022, false);\r\n\r\n        if (!map1.keySet().equals(map2.keySet())) {\r\n            result = false;\r\n        } else {\r\n            result = map1.keySet()\r\n                    .stream()\r\n                    .allMatch(key -&gt; map1.get(key).equals(map2.get(key)));\r\n        }\r\n\r\nSimply you&#39;ll have to compare the set of keys, if they are equal, then compare the values for each key on both maps.","title":"Comparing two hashmaps for equal values and same key sets?","body":"<p>A simple and good algorithm for such a comparison could be:</p>\n<pre><code>    Map&lt;Integer, Boolean&gt; map1 = new HashMap&lt;Integer, Boolean&gt;();\n    map1.put(100, false);\n    map1.put(101, false);\n    map1.put(102, false);\n\n    Map&lt;Integer, Boolean&gt; map2 = new HashMap&lt;Integer, Boolean&gt;();\n    map2.put(100, false);\n    map2.put(1011, false);\n    map2.put(1022, false);\n\n    if (!map1.keySet().equals(map2.keySet())) {\n        result = false;\n    } else {\n        result = map1.keySet()\n                .stream()\n                .allMatch(key -&gt; map1.get(key).equals(map2.get(key)));\n    }\n</code></pre>\n<p>Simply you'll have to compare the set of keys, if they are equal, then compare the values for each key on both maps.</p>\n"}],"owner":{"account_id":1229539,"reputation":82701,"user_id":1194415,"accept_rate":76,"display_name":"membersound"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":177379,"favorite_count":0,"down_vote_count":0,"up_vote_count":47,"accepted_answer_id":20969245,"answer_count":7,"score":47,"last_activity_date":1672940344,"creation_date":1389090378,"question_id":20969211,"body_markdown":"How can I best compare two `HashMap`s, if I want to find out if none of them contains different keys than the other, and if the values of that keys match each other.\r\n\r\n    Map&lt;objA, objB&gt; mapA = new HashMap&lt;objA, objB&gt;();\r\n    mapA.put(&quot;A&quot;, &quot;1&quot;);\r\n    mapA.put(&quot;B&quot;, &quot;2&quot;);\r\n    \r\n    Map&lt;objA, objB&gt; mapB = new HashMap&lt;objA, objB&gt;();\r\n    mapB.put(&quot;D&quot;, &quot;4&quot;);\r\n    mapB.put(&quot;A&quot;, &quot;1&quot;);\r\n\r\nWhen comparing A with B, it should fail due to different keys B and D.\r\n\r\nHow could I best compare non-sorted hashmaps?","title":"Comparing two hashmaps for equal values and same key sets?","body":"<p>How can I best compare two <code>HashMap</code>s, if I want to find out if none of them contains different keys than the other, and if the values of that keys match each other.</p>\n\n<pre><code>Map&lt;objA, objB&gt; mapA = new HashMap&lt;objA, objB&gt;();\nmapA.put(\"A\", \"1\");\nmapA.put(\"B\", \"2\");\n\nMap&lt;objA, objB&gt; mapB = new HashMap&lt;objA, objB&gt;();\nmapB.put(\"D\", \"4\");\nmapB.put(\"A\", \"1\");\n</code></pre>\n\n<p>When comparing A with B, it should fail due to different keys B and D.</p>\n\n<p>How could I best compare non-sorted hashmaps?</p>\n"},{"tags":["java","spring-boot","spring-security"],"comments":[{"owner":{"account_id":10838690,"reputation":3209,"user_id":7970787,"display_name":"Alex R"},"score":0,"creation_date":1672795932,"post_id":74999967,"comment_id":132353084,"body_markdown":"`SecurityWebFilterChain` is used for reactive applications. Let your `@Configuration` class extend `WebSecurityConfigurerAdapter` and override the `void configure(HttpSecurity)` method.","body":"<code>SecurityWebFilterChain</code> is used for reactive applications. Let your <code>@Configuration</code> class extend <code>WebSecurityConfigurerAdapter</code> and override the <code>void configure(HttpSecurity)</code> method."},{"owner":{"account_id":5084578,"reputation":399,"user_id":4079729,"display_name":"Altaf"},"score":0,"creation_date":1672853315,"post_id":74999967,"comment_id":132368151,"body_markdown":"The WebSecurityConfigurerAdapter methods are deprecated https://spring.io/blog/2022/02/21/spring-security-without-the-websecurityconfigureradapter","body":"The WebSecurityConfigurerAdapter methods are deprecated <a href=\"https://spring.io/blog/2022/02/21/spring-security-without-the-websecurityconfigureradapter\" rel=\"nofollow noreferrer\">spring.io/blog/2022/02/21/&hellip;</a>"}],"answers":[{"tags":[],"owner":{"account_id":1074107,"reputation":238,"user_id":1072625,"display_name":"Neeraj"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1672871513,"creation_date":1672840195,"answer_id":75006428,"question_id":74999967,"body_markdown":"You should allow `index.html` in the `HttpSecurity` request matchers as going to `/` is doing an auto-redirect to `index.html` and there is no permit rule defined for `index.html` giving an auth prompt. Below setting should work:\r\n\r\n&lt;!-- language: java --&gt;\r\n\r\n    @Bean\r\n    public SecurityFilterChain filterChain(HttpSecurity http) throws Exception {\r\n\r\n    \thttp\r\n            .authorizeHttpRequests()\r\n                .requestMatchers( &quot;/resources/**&quot;, &quot;/&quot;, &quot;/index.html&quot;).permitAll()\r\n                .anyRequest().authenticated()\r\n                .and()\r\n            .httpBasic();\r\n\t\r\n        return http.build();\r\n    }","title":"Request Matcher not working to permit allowed path","body":"<p>You should allow <code>index.html</code> in the <code>HttpSecurity</code> request matchers as going to <code>/</code> is doing an auto-redirect to <code>index.html</code> and there is no permit rule defined for <code>index.html</code> giving an auth prompt. Below setting should work:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Bean\npublic SecurityFilterChain filterChain(HttpSecurity http) throws Exception {\n\n    http\n        .authorizeHttpRequests()\n            .requestMatchers( &quot;/resources/**&quot;, &quot;/&quot;, &quot;/index.html&quot;).permitAll()\n            .anyRequest().authenticated()\n            .and()\n        .httpBasic();\n\n    return http.build();\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":10247655,"reputation":89,"user_id":7562955,"display_name":"zzpzaf"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1672940296,"creation_date":1672939594,"answer_id":75022203,"question_id":74999967,"body_markdown":"As you suspected, issues can come out from the Spring Boot newest\r\nversion you use, which as it is in the pom is 3.0.1. As you can see\r\n[here][1],versions 3.0 and afterward, are based on the Spring framework 6.0. The Spring framework 6.0 also uses the [Spring Security 6.0][2],,\r\nwhere, antMatchers() (as well as other Matcher methods) are deprecated\r\nfor Spring security configurations. [See [here][3] and [here\\]][4].\r\n\r\nMoreover, I suggest leaving out any URL path you wish to be accessible, such as &quot;/** &quot; or &quot;/resources/** &quot; and protect just the other path(s) of your api, which in your case should be the one defined in your controller &quot;/api/v1/students/** &quot;. You can do that in a similar way as the snippet below:\r\n\r\n\r\n    @Bean\r\n    public SecurityFilterChain filterChain(HttpSecurity http) throws Exception {\r\n        \r\n        // http\r\n        //     .securityMatchers( (matchers) -&gt; matchers\r\n        //     .requestMatchers(&quot;/resources/**&quot;, &quot;/&quot;))\r\n        //     .authorizeHttpRequests((authorize) -&gt; authorize\r\n        //     .anyRequest().permitAll());\r\n\r\n            \r\n        http \r\n            .securityMatchers( (matchers) -&gt; matchers\r\n            .requestMatchers(&quot;/api/v1/students/**&quot;))\r\n            .authorizeHttpRequests((authorize) -&gt; authorize\r\n            .anyRequest().authenticated())\r\n            .httpBasic();\r\n        \r\n        return http.build();\r\n    }\r\n\r\n  [1]: https://github.com/spring-projects/spring-boot/wiki/Spring-Boot-3.0-Release-Notes\r\n  [2]: https://github.com/spring-projects/spring-security/releases/tag/6.0.0\r\n  [3]: https://docs.spring.io/spring-security/reference/whats-new.html\r\n  [4]: https://github.com/spring-projects/spring-security/issues/11939","title":"Request Matcher not working to permit allowed path","body":"<p>As you suspected, issues can come out from the Spring Boot newest\nversion you use, which as it is in the pom is 3.0.1. As you can see\n<a href=\"https://github.com/spring-projects/spring-boot/wiki/Spring-Boot-3.0-Release-Notes\" rel=\"nofollow noreferrer\">here</a>,versions 3.0 and afterward, are based on the Spring framework 6.0. The Spring framework 6.0 also uses the <a href=\"https://github.com/spring-projects/spring-security/releases/tag/6.0.0\" rel=\"nofollow noreferrer\">Spring Security 6.0</a>,,\nwhere, antMatchers() (as well as other Matcher methods) are deprecated\nfor Spring security configurations. [See <a href=\"https://docs.spring.io/spring-security/reference/whats-new.html\" rel=\"nofollow noreferrer\">here</a> and <a href=\"https://github.com/spring-projects/spring-security/issues/11939\" rel=\"nofollow noreferrer\">here]</a>.</p>\n<p>Moreover, I suggest leaving out any URL path you wish to be accessible, such as &quot;/** &quot; or &quot;/resources/** &quot; and protect just the other path(s) of your api, which in your case should be the one defined in your controller &quot;/api/v1/students/** &quot;. You can do that in a similar way as the snippet below:</p>\n<pre><code>@Bean\npublic SecurityFilterChain filterChain(HttpSecurity http) throws Exception {\n    \n    // http\n    //     .securityMatchers( (matchers) -&gt; matchers\n    //     .requestMatchers(&quot;/resources/**&quot;, &quot;/&quot;))\n    //     .authorizeHttpRequests((authorize) -&gt; authorize\n    //     .anyRequest().permitAll());\n\n        \n    http \n        .securityMatchers( (matchers) -&gt; matchers\n        .requestMatchers(&quot;/api/v1/students/**&quot;))\n        .authorizeHttpRequests((authorize) -&gt; authorize\n        .anyRequest().authenticated())\n        .httpBasic();\n    \n    return http.build();\n}\n</code></pre>\n"}],"owner":{"account_id":5084578,"reputation":399,"user_id":4079729,"display_name":"Altaf"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":4925,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":75006428,"answer_count":2,"score":0,"last_activity_date":1672940296,"creation_date":1672793072,"question_id":74999967,"body_markdown":"I am following an older tutorial to implement Spring Security. Unfortunately, `antMatchers` is not recogzied as a method in my configuration class, so after doing some research, I believe `requestMatchers` method is its equivalent. However, the path (`/`) remains blocked without authentication. I would like to permit this.\r\n\r\nHere is my controller:\r\n\r\n```java\r\npackage com.quadri.springsecurity.controllers;\r\n\r\nimport java.util.Arrays;\r\nimport java.util.List;\r\n\r\nimport org.springframework.web.bind.annotation.GetMapping;\r\nimport org.springframework.web.bind.annotation.PathVariable;\r\nimport org.springframework.web.bind.annotation.RequestMapping;\r\nimport org.springframework.web.bind.annotation.RestController;\r\n\r\nimport com.quadri.springsecurity.models.Student;\r\n\r\n@RestController\r\n@RequestMapping(&quot;api/v1/students&quot;)\r\npublic class StudentController {\r\n\r\n    private static final List&lt;Student&gt; STUDENTS = Arrays.asList(\r\n        new Student(1, &quot;James Bond&quot;),\r\n        new Student(2, &quot;Maria Jones&quot;),\r\n        new Student(3, &quot;Anna Smith&quot;)\r\n    );\r\n\r\n    @GetMapping(path = &quot;{studentId}&quot;)\r\n    public Student getStudent(@PathVariable(&quot;studentId&quot;) Integer studentId) {\r\n        return STUDENTS.stream()\r\n        .filter(student -&gt; studentId.equals(student.getStudentId()))\r\n        .findFirst()\r\n        .orElseThrow(() -&gt; new IllegalStateException(&quot;Student &quot; + studentId + &quot; does not exist!&quot;));\r\n    }\r\n}\r\n```\r\n\r\nHere is my config file:\r\n\r\n```java\r\npackage com.quadri.springsecurity.security;\r\n\r\nimport org.springframework.context.annotation.Bean;\r\nimport org.springframework.context.annotation.Configuration;\r\nimport org.springframework.security.config.annotation.web.builders.HttpSecurity;\r\nimport org.springframework.security.config.annotation.web.configuration.EnableWebSecurity;\r\nimport org.springframework.security.web.SecurityFilterChain;\r\n\r\n@Configuration\r\n@EnableWebSecurity\r\npublic class ApplicationSecurityConfig {\r\n\r\n    @Bean\r\n    public SecurityFilterChain filterChain(HttpSecurity http) throws Exception {\r\n        http\r\n            .authorizeHttpRequests()\r\n                .requestMatchers( &quot;resources/**&quot;, &quot;/&quot;).permitAll()\r\n                .anyRequest().authenticated()\r\n                .and()\r\n            .httpBasic();\r\n        \r\n        return http.build();\r\n    }\r\n}\r\n```\r\n\r\nIn my resources/static folder I have created a simple html page (`index.html`) displaying hello world. In the tutorial the `RequestMapping` wasn&#39;t changed, however they used `.antMatcher` in the config file which is not a recognized method in Spring Security at least the version I am using. Here is my POM for reference:\r\n\r\n```xml\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n\txsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\r\n\t&lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n\t&lt;parent&gt;\r\n\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t&lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\r\n\t\t&lt;version&gt;3.0.1&lt;/version&gt;\r\n\t\t&lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;\r\n\t&lt;/parent&gt;\r\n\t&lt;groupId&gt;com.quadri&lt;/groupId&gt;\r\n\t&lt;artifactId&gt;spring-security&lt;/artifactId&gt;\r\n\t&lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\r\n\t&lt;name&gt;spring-security&lt;/name&gt;\r\n\t&lt;description&gt;Demo project for Spring Boot&lt;/description&gt;\r\n\t&lt;properties&gt;\r\n\t\t&lt;java.version&gt;17&lt;/java.version&gt;\r\n\t&lt;/properties&gt;\r\n\t&lt;dependencies&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-devtools&lt;/artifactId&gt;\r\n\t\t\t&lt;scope&gt;runtime&lt;/scope&gt;\r\n\t\t\t&lt;optional&gt;true&lt;/optional&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;lombok&lt;/artifactId&gt;\r\n\t\t\t&lt;optional&gt;true&lt;/optional&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\r\n\t\t\t&lt;scope&gt;test&lt;/scope&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-security&lt;/artifactId&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t&lt;/dependencies&gt;\r\n\r\n\t&lt;build&gt;\r\n\t\t&lt;plugins&gt;\r\n\t\t\t&lt;plugin&gt;\r\n\t\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t\t&lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\r\n\t\t\t\t&lt;configuration&gt;\r\n\t\t\t\t\t&lt;excludes&gt;\r\n\t\t\t\t\t\t&lt;exclude&gt;\r\n\t\t\t\t\t\t\t&lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\r\n\t\t\t\t\t\t\t&lt;artifactId&gt;lombok&lt;/artifactId&gt;\r\n\t\t\t\t\t\t&lt;/exclude&gt;\r\n\t\t\t\t\t&lt;/excludes&gt;\r\n\t\t\t\t&lt;/configuration&gt;\r\n\t\t\t&lt;/plugin&gt;\r\n\t\t&lt;/plugins&gt;\r\n\t&lt;/build&gt;\r\n\r\n&lt;/project&gt;\r\n```\r\n\r\nWhat is the proper way to make sure the home or &quot;/&quot; URL is permitted?","title":"Request Matcher not working to permit allowed path","body":"<p>I am following an older tutorial to implement Spring Security. Unfortunately, <code>antMatchers</code> is not recogzied as a method in my configuration class, so after doing some research, I believe <code>requestMatchers</code> method is its equivalent. However, the path (<code>/</code>) remains blocked without authentication. I would like to permit this.</p>\n<p>Here is my controller:</p>\n<pre class=\"lang-java prettyprint-override\"><code>package com.quadri.springsecurity.controllers;\n\nimport java.util.Arrays;\nimport java.util.List;\n\nimport org.springframework.web.bind.annotation.GetMapping;\nimport org.springframework.web.bind.annotation.PathVariable;\nimport org.springframework.web.bind.annotation.RequestMapping;\nimport org.springframework.web.bind.annotation.RestController;\n\nimport com.quadri.springsecurity.models.Student;\n\n@RestController\n@RequestMapping(&quot;api/v1/students&quot;)\npublic class StudentController {\n\n    private static final List&lt;Student&gt; STUDENTS = Arrays.asList(\n        new Student(1, &quot;James Bond&quot;),\n        new Student(2, &quot;Maria Jones&quot;),\n        new Student(3, &quot;Anna Smith&quot;)\n    );\n\n    @GetMapping(path = &quot;{studentId}&quot;)\n    public Student getStudent(@PathVariable(&quot;studentId&quot;) Integer studentId) {\n        return STUDENTS.stream()\n        .filter(student -&gt; studentId.equals(student.getStudentId()))\n        .findFirst()\n        .orElseThrow(() -&gt; new IllegalStateException(&quot;Student &quot; + studentId + &quot; does not exist!&quot;));\n    }\n}\n</code></pre>\n<p>Here is my config file:</p>\n<pre class=\"lang-java prettyprint-override\"><code>package com.quadri.springsecurity.security;\n\nimport org.springframework.context.annotation.Bean;\nimport org.springframework.context.annotation.Configuration;\nimport org.springframework.security.config.annotation.web.builders.HttpSecurity;\nimport org.springframework.security.config.annotation.web.configuration.EnableWebSecurity;\nimport org.springframework.security.web.SecurityFilterChain;\n\n@Configuration\n@EnableWebSecurity\npublic class ApplicationSecurityConfig {\n\n    @Bean\n    public SecurityFilterChain filterChain(HttpSecurity http) throws Exception {\n        http\n            .authorizeHttpRequests()\n                .requestMatchers( &quot;resources/**&quot;, &quot;/&quot;).permitAll()\n                .anyRequest().authenticated()\n                .and()\n            .httpBasic();\n        \n        return http.build();\n    }\n}\n</code></pre>\n<p>In my resources/static folder I have created a simple html page (<code>index.html</code>) displaying hello world. In the tutorial the <code>RequestMapping</code> wasn't changed, however they used <code>.antMatcher</code> in the config file which is not a recognized method in Spring Security at least the version I am using. Here is my POM for reference:</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\n    xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n    &lt;parent&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\n        &lt;version&gt;3.0.1&lt;/version&gt;\n        &lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;\n    &lt;/parent&gt;\n    &lt;groupId&gt;com.quadri&lt;/groupId&gt;\n    &lt;artifactId&gt;spring-security&lt;/artifactId&gt;\n    &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\n    &lt;name&gt;spring-security&lt;/name&gt;\n    &lt;description&gt;Demo project for Spring Boot&lt;/description&gt;\n    &lt;properties&gt;\n        &lt;java.version&gt;17&lt;/java.version&gt;\n    &lt;/properties&gt;\n    &lt;dependencies&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-devtools&lt;/artifactId&gt;\n            &lt;scope&gt;runtime&lt;/scope&gt;\n            &lt;optional&gt;true&lt;/optional&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\n            &lt;artifactId&gt;lombok&lt;/artifactId&gt;\n            &lt;optional&gt;true&lt;/optional&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\n            &lt;scope&gt;test&lt;/scope&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-security&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n    &lt;/dependencies&gt;\n\n    &lt;build&gt;\n        &lt;plugins&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n                &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\n                &lt;configuration&gt;\n                    &lt;excludes&gt;\n                        &lt;exclude&gt;\n                            &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\n                            &lt;artifactId&gt;lombok&lt;/artifactId&gt;\n                        &lt;/exclude&gt;\n                    &lt;/excludes&gt;\n                &lt;/configuration&gt;\n            &lt;/plugin&gt;\n        &lt;/plugins&gt;\n    &lt;/build&gt;\n\n&lt;/project&gt;\n</code></pre>\n<p>What is the proper way to make sure the home or &quot;/&quot; URL is permitted?</p>\n"},{"tags":["java","immutability","immutables-library"],"comments":[{"owner":{"account_id":4728704,"reputation":17032,"user_id":3824919,"display_name":"Tom"},"score":1,"creation_date":1672940613,"post_id":75022279,"comment_id":132391643,"body_markdown":"They explicitly stated in their own documentation that &quot;When building using builders, the contents of collection attributes can be left unspecified&quot;. You need to ask _them_ why, not _us_.","body":"They explicitly stated in their own documentation that &quot;When building using builders, the contents of collection attributes can be left unspecified&quot;. You need to ask <i>them</i> why, not <i>us</i>."},{"owner":{"account_id":395504,"reputation":4064,"user_id":758494,"accept_rate":56,"display_name":"Isaac Kleinman"},"score":1,"creation_date":1672941628,"post_id":75022279,"comment_id":132391991,"body_markdown":"done: https://github.com/immutables/immutables/issues/1429","body":"done: <a href=\"https://github.com/immutables/immutables/issues/1429\" rel=\"nofollow noreferrer\">github.com/immutables/immutables/issues/1429</a>"}],"owner":{"account_id":395504,"reputation":4064,"user_id":758494,"accept_rate":56,"display_name":"Isaac Kleinman"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":89,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1672939995,"creation_date":1672939995,"question_id":75022279,"body_markdown":"I recently started using the [Immutables](https://immutables.github.io/) library, and I&#39;m puzzled by the following behavior: \r\n\r\nGiven the following abstract value type\r\n```\r\n@Value.Immutable\r\npublic abstract class Foo {\r\n    public abstract String bar();\r\n\r\n    public abstract List&lt;String&gt; baz();\r\n}\r\n```\r\n\r\nattempting to build an object like so\r\n```\r\nImmutableFoo.builder()\r\n    .baz(List.of(&quot;1&quot;, &quot;2&quot;, &quot;3&quot;))\r\n    .build()\r\n```\r\nfails because \r\n&gt;some of required attributes are not set [bar]\r\n\r\nyet\r\n```\r\nImmutableFoo.builder()\r\n    .bar(&quot;1, 2, 3&quot;)\r\n    .build()\r\n```\r\nis fine, and there is no objection that `baz` has not been set.\r\n\r\nWhy do collection attributes receive different treatment?","title":"Immutables Library Does Not Require Collection Attributes To Be Set","body":"<p>I recently started using the <a href=\"https://immutables.github.io/\" rel=\"nofollow noreferrer\">Immutables</a> library, and I'm puzzled by the following behavior:</p>\n<p>Given the following abstract value type</p>\n<pre><code>@Value.Immutable\npublic abstract class Foo {\n    public abstract String bar();\n\n    public abstract List&lt;String&gt; baz();\n}\n</code></pre>\n<p>attempting to build an object like so</p>\n<pre><code>ImmutableFoo.builder()\n    .baz(List.of(&quot;1&quot;, &quot;2&quot;, &quot;3&quot;))\n    .build()\n</code></pre>\n<p>fails because</p>\n<blockquote>\n<p>some of required attributes are not set [bar]</p>\n</blockquote>\n<p>yet</p>\n<pre><code>ImmutableFoo.builder()\n    .bar(&quot;1, 2, 3&quot;)\n    .build()\n</code></pre>\n<p>is fine, and there is no objection that <code>baz</code> has not been set.</p>\n<p>Why do collection attributes receive different treatment?</p>\n"},{"tags":["java","awt","delay","keypress","awtrobot"],"answers":[{"comments":[{"owner":{"account_id":1345710,"reputation":13,"user_id":1286521,"display_name":"Rylogy"},"score":0,"creation_date":1342655027,"post_id":11551631,"comment_id":15277617,"body_markdown":"I didn&#39;t even know I needed to release the key. Nice example by the way. Thank you so much!","body":"I didn&#39;t even know I needed to release the key. Nice example by the way. Thank you so much!"},{"owner":{"account_id":100718,"reputation":43156,"user_id":271357,"accept_rate":83,"display_name":"dacwe"},"score":0,"creation_date":1342655326,"post_id":11551631,"comment_id":15277677,"body_markdown":"I enjoyed coming up with a short example! :) No problem!","body":"I enjoyed coming up with a short example! :) No problem!"},{"owner":{"account_id":247613,"reputation":284089,"user_id":522444,"accept_rate":100,"display_name":"Hovercraft Full Of Eels"},"score":0,"creation_date":1342658349,"post_id":11551631,"comment_id":15278272,"body_markdown":"@Rylogy: if this answer helped you, consider up-voting it too as well as accepting it (as you&#39;ve already done).","body":"@Rylogy: if this answer helped you, consider up-voting it too as well as accepting it (as you&#39;ve already done)."},{"owner":{"account_id":1345710,"reputation":13,"user_id":1286521,"display_name":"Rylogy"},"score":0,"creation_date":1342659122,"post_id":11551631,"comment_id":15278419,"body_markdown":"I tried up-voting it as soon as I finished reading the answer, however, I&#39;m unable to because I need 15 reputation in order to up-vote his answer. Once I get some rep I&#39;ll come back and up-vote.","body":"I tried up-voting it as soon as I finished reading the answer, however, I&#39;m unable to because I need 15 reputation in order to up-vote his answer. Once I get some rep I&#39;ll come back and up-vote."}],"tags":[],"owner":{"account_id":100718,"reputation":43156,"user_id":271357,"accept_rate":83,"display_name":"dacwe"},"comment_count":4,"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1342654790,"creation_date":1342652666,"answer_id":11551631,"question_id":11551568,"body_markdown":"These are some possible problems you might have (I also added a &quot;full&quot; example below to do it):\r\n\r\n1. You are **only pressing keys**, you need to release the key too:\r\n\r\n        robot.keyPress(c);\r\n        robot.keyRelease(c);\r\n\r\n2. You could be running the robot in the EDT. *Use another thread to handle the key-presses...*\r\n\r\n3. Use the &quot;built-in&quot; [**auto delay**][1] feature that the `Robot` class already provides:\r\n\r\n        Robot robot = new Robot();\r\n        robot.setAutoDelay(50); // ms\r\n        ...\r\n\r\n-----\r\n\r\nExample:\r\n----\r\n\r\nThis is an example how you could implement this, every time you press `0`, it will print `&quot;hello&quot;` delaying each typed character using the auto-delay:\r\n\r\n    public static void main(String[] args) throws Exception {\r\n        \r\n        final BlockingQueue&lt;Integer&gt; queue = new ArrayBlockingQueue&lt;Integer&gt;(20);\r\n        \r\n        JTextArea area = new JTextArea(10, 40) {{\r\n            addKeyListener(new KeyAdapter() {\r\n                @Override public void keyPressed(KeyEvent e) {\r\n                    if (e.getKeyCode() == KeyEvent.VK_0) {\r\n                        queue.offer(KeyEvent.VK_H);\r\n                        queue.offer(KeyEvent.VK_E);\r\n                        queue.offer(KeyEvent.VK_L);\r\n                        queue.offer(KeyEvent.VK_L);\r\n                        queue.offer(KeyEvent.VK_O);\r\n                    }\r\n                }\r\n            });\r\n        }};\r\n        \r\n        JFrame frame = new JFrame(&quot;Test&quot;);\r\n        frame.add(area);\r\n        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);\r\n        frame.pack();\r\n        frame.setVisible(true);\r\n        \r\n        Robot robot = new Robot();\r\n        robot.setAutoDelay(50);\r\n        \r\n        while (true) {\r\n            final int c = queue.take();\r\n            robot.keyPress(c);\r\n            robot.keyRelease(c);\r\n        }\r\n    }\r\n\r\n\r\n  [1]: http://docs.oracle.com/javase/6/docs/api/java/awt/Robot.html#setAutoDelay%28int%29","title":"Delaying keyPress","body":"<p>These are some possible problems you might have (I also added a \"full\" example below to do it):</p>\n\n<ol>\n<li><p>You are <strong>only pressing keys</strong>, you need to release the key too:</p>\n\n<pre><code>robot.keyPress(c);\nrobot.keyRelease(c);\n</code></pre></li>\n<li><p>You could be running the robot in the EDT. <em>Use another thread to handle the key-presses...</em></p></li>\n<li><p>Use the \"built-in\" <a href=\"http://docs.oracle.com/javase/6/docs/api/java/awt/Robot.html#setAutoDelay%28int%29\" rel=\"nofollow\"><strong>auto delay</strong></a> feature that the <code>Robot</code> class already provides:</p>\n\n<pre><code>Robot robot = new Robot();\nrobot.setAutoDelay(50); // ms\n...\n</code></pre></li>\n</ol>\n\n<hr>\n\n<h2>Example:</h2>\n\n<p>This is an example how you could implement this, every time you press <code>0</code>, it will print <code>\"hello\"</code> delaying each typed character using the auto-delay:</p>\n\n<pre><code>public static void main(String[] args) throws Exception {\n\n    final BlockingQueue&lt;Integer&gt; queue = new ArrayBlockingQueue&lt;Integer&gt;(20);\n\n    JTextArea area = new JTextArea(10, 40) {{\n        addKeyListener(new KeyAdapter() {\n            @Override public void keyPressed(KeyEvent e) {\n                if (e.getKeyCode() == KeyEvent.VK_0) {\n                    queue.offer(KeyEvent.VK_H);\n                    queue.offer(KeyEvent.VK_E);\n                    queue.offer(KeyEvent.VK_L);\n                    queue.offer(KeyEvent.VK_L);\n                    queue.offer(KeyEvent.VK_O);\n                }\n            }\n        });\n    }};\n\n    JFrame frame = new JFrame(\"Test\");\n    frame.add(area);\n    frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);\n    frame.pack();\n    frame.setVisible(true);\n\n    Robot robot = new Robot();\n    robot.setAutoDelay(50);\n\n    while (true) {\n        final int c = queue.take();\n        robot.keyPress(c);\n        robot.keyRelease(c);\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":1345710,"reputation":13,"user_id":1286521,"display_name":"Rylogy"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1597,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":11551631,"answer_count":1,"score":1,"last_activity_date":1672939878,"creation_date":1342652213,"question_id":11551568,"body_markdown":"I&#39;ve been searching around ways of being able to have a small delay between keypresses. I&#39;ve been making this program that reads global hotkeys using the JIntellitype library, and then fires whichever sequence of keypresses you assigned, such as pressing numpad1 will do a sequence of A B C. My issue is, that if I use Thread.sleep it just delays for X amount of time and then keypresses all the assigned keys without any delay in between any of the keypresses. Does anyone have a suggestion on how to fix this problem ?\r\n\r\nThis is what I&#39;m using to send keypresses with the Robot class\r\n\r\n    public void onHotKey(int identifier) {\r\n        try {\r\n            Robot bot = new Robot();\r\n            if (output.elementAt(identifier - 1).length() == 1) {\r\n                ch = output.elementAt(identifier - 1).charAt(0);\r\n                bot.keyPress(ch);\r\n            } else {\r\n                int cmdSize = output.elementAt(identifier - 1).length();\r\n                for (int c = 0; c &lt; cmdSize; c++) {\r\n                    bot.keyPress((int) output.elementAt(identifier - 1).charAt(c));\r\n                    try {\r\n                        Thread.sleep(50);\r\n                    } catch (InterruptedException ex) {\r\n                        Logger.getLogger(NewJFrame.class.getName()).log(Level.SEVERE, null, ex);\r\n                    }\r\n                }\r\n            }\r\n        } catch (AWTException ex) {\r\n            Logger.getLogger(NewJFrame.class.getName()).log(Level.SEVERE, null, ex);\r\n        }\r\n    }","title":"Delaying keyPress","body":"<p>I've been searching around ways of being able to have a small delay between keypresses. I've been making this program that reads global hotkeys using the JIntellitype library, and then fires whichever sequence of keypresses you assigned, such as pressing numpad1 will do a sequence of A B C. My issue is, that if I use Thread.sleep it just delays for X amount of time and then keypresses all the assigned keys without any delay in between any of the keypresses. Does anyone have a suggestion on how to fix this problem ?</p>\n<p>This is what I'm using to send keypresses with the Robot class</p>\n<pre><code>public void onHotKey(int identifier) {\n    try {\n        Robot bot = new Robot();\n        if (output.elementAt(identifier - 1).length() == 1) {\n            ch = output.elementAt(identifier - 1).charAt(0);\n            bot.keyPress(ch);\n        } else {\n            int cmdSize = output.elementAt(identifier - 1).length();\n            for (int c = 0; c &lt; cmdSize; c++) {\n                bot.keyPress((int) output.elementAt(identifier - 1).charAt(c));\n                try {\n                    Thread.sleep(50);\n                } catch (InterruptedException ex) {\n                    Logger.getLogger(NewJFrame.class.getName()).log(Level.SEVERE, null, ex);\n                }\n            }\n        }\n    } catch (AWTException ex) {\n        Logger.getLogger(NewJFrame.class.getName()).log(Level.SEVERE, null, ex);\n    }\n}\n</code></pre>\n"},{"tags":["java","swing","netbeans","jradiobutton"],"answers":[{"tags":[],"owner":{"account_id":247613,"reputation":284089,"user_id":522444,"accept_rate":100,"display_name":"Hovercraft Full Of Eels"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1400551413,"creation_date":1400551413,"answer_id":23749895,"question_id":23749880,"body_markdown":"No, you can&#39;t add an ActionListener, or even a ChangeListener, to a ButtonGroup, but it&#39;s trivially easy to add ActionListeners to JRadioButtons, and if you create them in a for loop, as is often done, then there&#39;s no need for duplicate code.\r\n\r\nA general unrelated and unrequested suggestion: you may wish to avoid using code-generation software while you are still learning the GUI libray. The code generation library can shield you from having to understand what the library is doing under the covers, thus slowing the rate of your understanding of the library.","title":"Generate actionPerformed event for a buttom group","body":"<p>No, you can't add an ActionListener, or even a ChangeListener, to a ButtonGroup, but it's trivially easy to add ActionListeners to JRadioButtons, and if you create them in a for loop, as is often done, then there's no need for duplicate code.</p>\n\n<p>A general unrelated and unrequested suggestion: you may wish to avoid using code-generation software while you are still learning the GUI libray. The code generation library can shield you from having to understand what the library is doing under the covers, thus slowing the rate of your understanding of the library.</p>\n"},{"tags":[],"owner":{"account_id":3183512,"reputation":2784,"user_id":3444376,"display_name":"Edwin Torres"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1400551546,"creation_date":1400551546,"answer_id":23749910,"question_id":23749880,"body_markdown":"Take a look at the Oracle tutorial on radio buttons. It&#39;s pretty straightforward and clean: http://docs.oracle.com/javase/tutorial/uiswing/components/button.html#radiobutton","title":"Generate actionPerformed event for a buttom group","body":"<p>Take a look at the Oracle tutorial on radio buttons. It's pretty straightforward and clean: <a href=\"http://docs.oracle.com/javase/tutorial/uiswing/components/button.html#radiobutton\" rel=\"nofollow\">http://docs.oracle.com/javase/tutorial/uiswing/components/button.html#radiobutton</a></p>\n"}],"owner":{"account_id":4062480,"reputation":343,"user_id":3338629,"accept_rate":92,"display_name":"MauricioTL"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":65,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":23749895,"answer_count":2,"score":1,"last_activity_date":1672939660,"creation_date":1400551239,"question_id":23749880,"body_markdown":"Is it possible to Generate `actionPerformed` event for a `ButtonGroup` of radio buttons in Java 7?. I can not find this option in NetBeans. I&#39;m working with GUI Builder. Or any other form to develop this task?\r\n\r\nRight now I&#39;m repeating code in all radio buttons, but I&#39;m planning to add several of them and this approach would use to much code.","title":"Generate actionPerformed event for a buttom group","body":"<p>Is it possible to Generate <code>actionPerformed</code> event for a <code>ButtonGroup</code> of radio buttons in Java 7?. I can not find this option in NetBeans. I'm working with GUI Builder. Or any other form to develop this task?</p>\n<p>Right now I'm repeating code in all radio buttons, but I'm planning to add several of them and this approach would use to much code.</p>\n"},{"tags":["java","spring"],"comments":[{"owner":{"account_id":26698569,"reputation":875,"user_id":20306007,"display_name":"life888888"},"score":0,"creation_date":1672842433,"post_id":75006599,"comment_id":132364023,"body_markdown":"https://stackoverflow.com/questions/11383898/how-to-create-a-x509-certificate-using-java , REF @Bastian Voigt his answer.","body":"<a href=\"https://stackoverflow.com/questions/11383898/how-to-create-a-x509-certificate-using-java\" title=\"how to create a x509 certificate using java\">stackoverflow.com/questions/11383898/&hellip;</a> , REF @Bastian Voigt his answer."},{"owner":{"account_id":2702365,"reputation":43,"user_id":2332829,"display_name":"cevin"},"score":0,"creation_date":1672843380,"post_id":75006599,"comment_id":132364376,"body_markdown":"@life888888 Sorry, I just started learning java. i see the code seems to just generate a certificate, and then? will this just generated certificate be automatically called by sslsocket during the handshake? Like go, I can intuitively understand that this is bound to the tls listener and can clearly see that the method will be called only during the handshake, java is generated elsewhere and then automatically called during the handshake?","body":"@life888888 Sorry, I just started learning java. i see the code seems to just generate a certificate, and then? will this just generated certificate be automatically called by sslsocket during the handshake? Like go, I can intuitively understand that this is bound to the tls listener and can clearly see that the method will be called only during the handshake, java is generated elsewhere and then automatically called during the handshake?"}],"owner":{"account_id":2702365,"reputation":43,"user_id":2332829,"display_name":"cevin"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":68,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":0,"score":2,"last_activity_date":1672939317,"creation_date":1672841048,"question_id":75006599,"body_markdown":"like Go:\r\n\r\n```golang\r\nfunc main() {\r\nln, _ := net.Listen(&quot;tcp&quot;,&quot;:443&quot;)\r\nln = tls.NewListener(ln, &amp;tls.Config{\r\n    GetCertificate: func (info *clientHelloInfo) (Certificate, error) {\r\n        // from db or dynamic generate a certificate use &quot;info.ServerName&quot;\r\n        cert := generateX509Certificate(info.ServerName)\r\n        return cert, nil\r\n    }\r\n})\r\n}\r\n```\r\n\r\nIn Go I can implement that the first time a domain is accessed (or even a concurrent request) only one goroutine is responsible for generating the certificate, and then when that is done, all connections are immediately successful.\r\n\r\nNo idea. Since Spring is called through Netty, but don&#39;t know how to modify the Netty behavior of Spring.","title":"How to implement dynamic certificate generation in Java, similar to Golang&#39;s tls.Config.GetCertificate","body":"<p>like Go:</p>\n<pre class=\"lang-golang prettyprint-override\"><code>func main() {\nln, _ := net.Listen(&quot;tcp&quot;,&quot;:443&quot;)\nln = tls.NewListener(ln, &amp;tls.Config{\n    GetCertificate: func (info *clientHelloInfo) (Certificate, error) {\n        // from db or dynamic generate a certificate use &quot;info.ServerName&quot;\n        cert := generateX509Certificate(info.ServerName)\n        return cert, nil\n    }\n})\n}\n</code></pre>\n<p>In Go I can implement that the first time a domain is accessed (or even a concurrent request) only one goroutine is responsible for generating the certificate, and then when that is done, all connections are immediately successful.</p>\n<p>No idea. Since Spring is called through Netty, but don't know how to modify the Netty behavior of Spring.</p>\n"},{"tags":["java","spring-boot"],"answers":[{"tags":[],"owner":{"account_id":15579758,"reputation":187,"user_id":11239910,"display_name":"Žeka Koževin"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1672938073,"creation_date":1672938073,"answer_id":75021931,"question_id":75021640,"body_markdown":"1. Usually it is better to use 1 such a model per endpoint so they are independent. If you share models between endpoints [this][1] should be useful\r\n\r\n2. [This][2] may help\r\n\r\n\r\n  [1]: https://www.baeldung.com/jackson-json-view-annotation\r\n  [2]: https://stackoverflow.com/questions/20578846/ignore-missing-properties-during-jackson-json-deserialization-in-java","title":"Make one property in request body not required","body":"<ol>\n<li><p>Usually it is better to use 1 such a model per endpoint so they are independent. If you share models between endpoints <a href=\"https://www.baeldung.com/jackson-json-view-annotation\" rel=\"nofollow noreferrer\">this</a> should be useful</p>\n</li>\n<li><p><a href=\"https://stackoverflow.com/questions/20578846/ignore-missing-properties-during-jackson-json-deserialization-in-java\">This</a> may help</p>\n</li>\n</ol>\n"},{"tags":[],"owner":{"account_id":16973751,"reputation":21,"user_id":12277666,"display_name":"Muhamad Kheder"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1672938129,"creation_date":1672938129,"answer_id":75021942,"question_id":75021640,"body_markdown":"You can use the `@JsonIgnoreProperties` annotation\r\n\r\nExample:\r\n\r\n    @JsonIgnoreProperties(value = {&quot;email&quot;})\r\n    public interface TestRequestView {\r\n      String getCountryCode();\r\n      String getRegionCode();\r\n    \r\n      @JsonProperty(required = false)\r\n      String getEmail();\r\n    }\r\n\r\n","title":"Make one property in request body not required","body":"<p>You can use the <code>@JsonIgnoreProperties</code> annotation</p>\n<p>Example:</p>\n<pre><code>@JsonIgnoreProperties(value = {&quot;email&quot;})\npublic interface TestRequestView {\n  String getCountryCode();\n  String getRegionCode();\n\n  @JsonProperty(required = false)\n  String getEmail();\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":15579758,"reputation":187,"user_id":11239910,"display_name":"Žeka Koževin"},"score":0,"creation_date":1672938211,"post_id":75021945,"comment_id":132390805,"body_markdown":"If i&#39;m not mistaken Jackson fails by default on undefined properties","body":"If i&#39;m not mistaken Jackson fails by default on undefined properties"},{"owner":{"account_id":7655262,"reputation":7506,"user_id":5802417,"display_name":"Michael Gantman"},"score":0,"creation_date":1672938418,"post_id":75021945,"comment_id":132390881,"body_markdown":"@ŽekaKoževin you are right. I updated the answer to use annotation @JsonInclude(Include.NON_NULL)","body":"@ŽekaKoževin you are right. I updated the answer to use annotation @JsonInclude(Include.NON_NULL)"},{"owner":{"account_id":1661788,"reputation":1025,"user_id":1529940,"accept_rate":100,"display_name":"bpawlowski"},"score":0,"creation_date":1672939620,"post_id":75021945,"comment_id":132391310,"body_markdown":"it&#39;s not the case @MichaelGantman - it will fail during deserialization, not serialization.","body":"it&#39;s not the case @MichaelGantman - it will fail during deserialization, not serialization."},{"owner":{"account_id":7655262,"reputation":7506,"user_id":5802417,"display_name":"Michael Gantman"},"score":0,"creation_date":1672945927,"post_id":75021945,"comment_id":132393307,"body_markdown":"@bpawlowski no, it works both ways","body":"@bpawlowski no, it works both ways"}],"tags":[],"owner":{"account_id":7655262,"reputation":7506,"user_id":5802417,"display_name":"Michael Gantman"},"comment_count":4,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1672938376,"creation_date":1672938145,"answer_id":75021945,"question_id":75021640,"body_markdown":"Add annotation `@JsonInclude(Include.NON_NULL)` at class level for your `TestRequestView`. When passing your param you can pass it without that value and in your controller it will be received with that param as null. You just need to make sure that your controller can handle such case","title":"Make one property in request body not required","body":"<p>Add annotation <code>@JsonInclude(Include.NON_NULL)</code> at class level for your <code>TestRequestView</code>. When passing your param you can pass it without that value and in your controller it will be received with that param as null. You just need to make sure that your controller can handle such case</p>\n"}],"owner":{"account_id":144187,"reputation":7338,"user_id":353046,"accept_rate":47,"display_name":"Mankind1023"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":466,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":3,"score":0,"last_activity_date":1672939264,"creation_date":1672936592,"question_id":75021640,"body_markdown":"I have the following interface:\r\n\r\n    public interface TestRequestView {\r\n      String getCountryCode();\r\n      String getRegionCode();\r\n    }\r\n\r\nIt&#39;s used in several end points like so:\r\n\r\n    @PostMapping(&quot;/my/path/{id}&quot;)\r\n    public String test(@RequestBody TestRequestView request, @PathVariable String id) {\r\n     ...\r\n    } \r\n\r\nI would like to add a property to the TestRequestView that is only used in one new endpoint without breaking the rest, how can I mark that one property as ignorable? Something like:\r\n\r\n    public interface TestRequestView {\r\n      String getCountryCode();\r\n      String getRegionCode();\r\n      String getEmail(); // make this not required\r\n    }","title":"Make one property in request body not required","body":"<p>I have the following interface:</p>\n<pre><code>public interface TestRequestView {\n  String getCountryCode();\n  String getRegionCode();\n}\n</code></pre>\n<p>It's used in several end points like so:</p>\n<pre><code>@PostMapping(&quot;/my/path/{id}&quot;)\npublic String test(@RequestBody TestRequestView request, @PathVariable String id) {\n ...\n} \n</code></pre>\n<p>I would like to add a property to the TestRequestView that is only used in one new endpoint without breaking the rest, how can I mark that one property as ignorable? Something like:</p>\n<pre><code>public interface TestRequestView {\n  String getCountryCode();\n  String getRegionCode();\n  String getEmail(); // make this not required\n}\n</code></pre>\n"},{"tags":["java","for-loop","concatenation","pipe"],"comments":[{"owner":{"account_id":2200636,"reputation":8366,"user_id":1945127,"accept_rate":57,"display_name":"newuser"},"score":0,"creation_date":1379922553,"post_id":18954070,"comment_id":27991960,"body_markdown":"transactionID.replaceFirst(&quot;[|]&quot;, &quot;&quot;);","body":"transactionID.replaceFirst(&quot;[|]&quot;, &quot;&quot;);"},{"owner":{"account_id":411534,"reputation":2703,"user_id":784043,"accept_rate":50,"display_name":"RokL"},"score":0,"creation_date":1379927558,"post_id":18954070,"comment_id":27994211,"body_markdown":"newuser, that is slow as hell.\nFastest solution is:\ntransactionID = transactionID.substring(1);","body":"newuser, that is slow as hell. Fastest solution is: transactionID = transactionID.substring(1);"}],"answers":[{"comments":[{"owner":{"account_id":2720760,"reputation":2190,"user_id":2347107,"accept_rate":79,"display_name":"agad"},"score":0,"creation_date":1379922586,"post_id":18954154,"comment_id":27991971,"body_markdown":"Or substring the result from index 1 ;-)","body":"Or substring the result from index 1 ;-)"},{"owner":{"account_id":1625887,"reputation":7853,"user_id":1501457,"accept_rate":87,"display_name":"Java Questions"},"score":0,"creation_date":1379922814,"post_id":18954154,"comment_id":27992063,"body_markdown":"@Mustafa Genc :) thanks, it helped me, will mark your answer as accepted in few mins of time","body":"@Mustafa Genc :) thanks, it helped me, will mark your answer as accepted in few mins of time"},{"owner":{"account_id":1625887,"reputation":7853,"user_id":1501457,"accept_rate":87,"display_name":"Java Questions"},"score":0,"creation_date":1379922947,"post_id":18954154,"comment_id":27992123,"body_markdown":"what is the difference between using `for each loop` and `Apache Commons Lang`, Please share if you don&#39;t mind","body":"what is the difference between using <code>for each loop</code> and <code>Apache Commons Lang</code>, Please share if you don&#39;t mind"},{"owner":{"account_id":1692259,"reputation":2579,"user_id":1554387,"accept_rate":57,"display_name":"Mustafa Gen&#231;"},"score":1,"creation_date":1379923720,"post_id":18954154,"comment_id":27992463,"body_markdown":"Actually commons lang almost does the same thing. It&#39;s null-safe. It removes probability of making errors for these simple jobs. If you wonder about the performance, just measure it.","body":"Actually commons lang almost does the same thing. It&#39;s null-safe. It removes probability of making errors for these simple jobs. If you wonder about the performance, just measure it."},{"owner":{"account_id":1044190,"reputation":2567,"user_id":1049527,"accept_rate":96,"display_name":"ZaoTaoBao"},"score":0,"creation_date":1379923786,"post_id":18954154,"comment_id":27992484,"body_markdown":"don&#39;t reinvent the wheel! do it?","body":"don&#39;t reinvent the wheel! do it?"}],"tags":[],"owner":{"account_id":1692259,"reputation":2579,"user_id":1554387,"accept_rate":57,"display_name":"Mustafa Gen&#231;"},"comment_count":5,"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1379922483,"creation_date":1379922483,"answer_id":18954154,"question_id":18954070,"body_markdown":"One of the best practice is using Apache Commons Lang:\r\n\r\n    String transactionID = StringUtils.join(transactionReferenceInfoList , &quot;|&quot;);\r\n\r\nOr you may just put an if clause inside loop.","title":"adding pipe to values in java","body":"<p>One of the best practice is using Apache Commons Lang:</p>\n\n<pre><code>String transactionID = StringUtils.join(transactionReferenceInfoList , \"|\");\n</code></pre>\n\n<p>Or you may just put an if clause inside loop.</p>\n"},{"tags":[],"owner":{"account_id":1834782,"reputation":1763,"user_id":1665377,"display_name":"maximede"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1379922538,"creation_date":1379922538,"answer_id":18954169,"question_id":18954070,"body_markdown":"I would use StringUtils.join from Apache Commons\r\n\r\n    StringUtils.join(transactionReferenceInfoList,&#39;|&#39;);","title":"adding pipe to values in java","body":"<p>I would use StringUtils.join from Apache Commons</p>\n\n<pre><code>StringUtils.join(transactionReferenceInfoList,'|');\n</code></pre>\n"},{"comments":[{"owner":{"account_id":2200636,"reputation":8366,"user_id":1945127,"accept_rate":57,"display_name":"newuser"},"score":0,"creation_date":1379922832,"post_id":18954219,"comment_id":27992073,"body_markdown":"The condition will check every time. its needed or not","body":"The condition will check every time. its needed or not"},{"owner":{"account_id":1625887,"reputation":7853,"user_id":1501457,"accept_rate":87,"display_name":"Java Questions"},"score":0,"creation_date":1379922878,"post_id":18954219,"comment_id":27992098,"body_markdown":"@R.S this is also one of the good one but I would prefer using `StringUtils.join from Apache Commons`. +1","body":"@R.S this is also one of the good one but I would prefer using <code>StringUtils.join from Apache Commons</code>. +1"},{"owner":{"account_id":1940458,"reputation":3068,"user_id":1746750,"display_name":"Rohan"},"score":0,"creation_date":1379923063,"post_id":18954219,"comment_id":27992182,"body_markdown":"@newuser Yes,this condition well get checked in each iteration.","body":"@newuser Yes,this condition well get checked in each iteration."},{"owner":{"account_id":2200636,"reputation":8366,"user_id":1945127,"accept_rate":57,"display_name":"newuser"},"score":0,"creation_date":1379923187,"post_id":18954219,"comment_id":27992243,"body_markdown":"If the list size is 1000 then this condition will check 1000 times. It need from the beginning only. Why at all those time","body":"If the list size is 1000 then this condition will check 1000 times. It need from the beginning only. Why at all those time"}],"tags":[],"owner":{"account_id":1940458,"reputation":3068,"user_id":1746750,"display_name":"Rohan"},"comment_count":4,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1379922725,"creation_date":1379922725,"answer_id":18954219,"question_id":18954070,"body_markdown":"For first Iteration check if `transactionID` is null.\r\n\r\n    List&lt;String&gt; transactionReferenceInfoList = paymentInfoDao.getTransactionRefNumberToVerify(&quot;0&quot;);\r\n    \r\n            for (String transactionRefNumber : transactionReferenceInfoList) {\r\n                if(transactionID==null)\r\n                      transactionID=transactionRefNumber;\r\n                transactionID = transactionID + &quot;|&quot;+transactionRefNumber;\r\n            }","title":"adding pipe to values in java","body":"<p>For first Iteration check if <code>transactionID</code> is null.</p>\n\n<pre><code>List&lt;String&gt; transactionReferenceInfoList = paymentInfoDao.getTransactionRefNumberToVerify(\"0\");\n\n        for (String transactionRefNumber : transactionReferenceInfoList) {\n            if(transactionID==null)\n                  transactionID=transactionRefNumber;\n            transactionID = transactionID + \"|\"+transactionRefNumber;\n        }\n</code></pre>\n"},{"comments":[{"owner":{"account_id":1625887,"reputation":7853,"user_id":1501457,"accept_rate":87,"display_name":"Java Questions"},"score":0,"creation_date":1379923111,"post_id":18954296,"comment_id":27992209,"body_markdown":"TaoBao, :) Thanks for your time... +1 for spending your time for me","body":"TaoBao, :) Thanks for your time... +1 for spending your time for me"}],"tags":[],"owner":{"account_id":1044190,"reputation":2567,"user_id":1049527,"accept_rate":96,"display_name":"ZaoTaoBao"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1379922982,"creation_date":1379922982,"answer_id":18954296,"question_id":18954070,"body_markdown":"maybe is strange answer but for making different change loop:\r\n\r\n    List&lt;String&gt; transactionReferenceInfoList = paymentInfoDao.getTransactionRefNumberToVerify(&quot;0&quot;);\r\n    \r\n            for (String transactionRefNumber : transactionReferenceInfoList) {\r\n                \r\n               transactionID+= transactionRefNumber+&quot;|&quot;;\r\n               \r\n            }\r\n\r\nand if you want delete the last &quot;|&quot;\r\n\r\nif i don&#39;t understand your answer, i hope apologize me.\r\n","title":"adding pipe to values in java","body":"<p>maybe is strange answer but for making different change loop:</p>\n\n<pre><code>List&lt;String&gt; transactionReferenceInfoList = paymentInfoDao.getTransactionRefNumberToVerify(\"0\");\n\n        for (String transactionRefNumber : transactionReferenceInfoList) {\n\n           transactionID+= transactionRefNumber+\"|\";\n\n        }\n</code></pre>\n\n<p>and if you want delete the last \"|\"</p>\n\n<p>if i don't understand your answer, i hope apologize me.</p>\n"},{"comments":[{"owner":{"account_id":1625887,"reputation":7853,"user_id":1501457,"accept_rate":87,"display_name":"Java Questions"},"score":0,"creation_date":1379923150,"post_id":18954304,"comment_id":27992234,"body_markdown":"@Suresh Thanks for your time... +1 for spending your time for me","body":"@Suresh Thanks for your time... +1 for spending your time for me"}],"tags":[],"owner":{"account_id":2177522,"reputation":120796,"user_id":1927832,"accept_rate":49,"display_name":"Suresh Atta"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1379923026,"creation_date":1379923026,"answer_id":18954304,"question_id":18954070,"body_markdown":"If you are sure that each time that `|` is there,\r\n\r\nWithout any `Utils`  `String` class alone do that job with help of  `subString` method\r\n\r\n\r\n    resultString = resultString.substring(1,resultString.length()); \r\n\r\nFor ex:\r\n\r\n    String resultString  = &quot;test&quot;;\r\n    resultString = resultString.substring(1,resultString.length());\r\n    System.out.println(resultString);  //gives &quot;est&quot;\r\n","title":"adding pipe to values in java","body":"<p>If you are sure that each time that <code>|</code> is there,</p>\n\n<p>Without any <code>Utils</code>  <code>String</code> class alone do that job with help of  <code>subString</code> method</p>\n\n<pre><code>resultString = resultString.substring(1,resultString.length()); \n</code></pre>\n\n<p>For ex:</p>\n\n<pre><code>String resultString  = \"test\";\nresultString = resultString.substring(1,resultString.length());\nSystem.out.println(resultString);  //gives \"est\"\n</code></pre>\n"},{"comments":[{"owner":{"account_id":1625887,"reputation":7853,"user_id":1501457,"accept_rate":87,"display_name":"Java Questions"},"score":0,"creation_date":1379923132,"post_id":18954307,"comment_id":27992224,"body_markdown":"Thanks for your time... +1 for spending your time for me","body":"Thanks for your time... +1 for spending your time for me"}],"tags":[],"owner":{"account_id":1467301,"reputation":2809,"user_id":1379803,"accept_rate":40,"display_name":"Ashish Jagtap"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1672939167,"creation_date":1379923030,"answer_id":18954307,"question_id":18954070,"body_markdown":"    List&lt;String&gt; transactionReferenceInfoList = paymentInfoDao.getTransactionRefNumberToVerify(&quot;0&quot;);\r\n    int i = 0;\r\n    for (String transactionRefNumber : transactionReferenceInfoList) {\r\n        if(i==0) {\r\n            transactionID = transactionID + transactionRefNumber;\r\n    \t} else {\r\n            transactionID = transactionID + &quot;|&quot;+transactionRefNumber;\r\n        }\r\n    \ti++;\r\n    }\r\n\r\nhope this will solve your problem...","title":"adding pipe to values in java","body":"<pre><code>List&lt;String&gt; transactionReferenceInfoList = paymentInfoDao.getTransactionRefNumberToVerify(&quot;0&quot;);\nint i = 0;\nfor (String transactionRefNumber : transactionReferenceInfoList) {\n    if(i==0) {\n        transactionID = transactionID + transactionRefNumber;\n    } else {\n        transactionID = transactionID + &quot;|&quot;+transactionRefNumber;\n    }\n    i++;\n}\n</code></pre>\n<p>hope this will solve your problem...</p>\n"},{"comments":[{"owner":{"account_id":5883884,"reputation":931,"user_id":4632482,"display_name":"Peter Bruins"},"score":0,"creation_date":1672922319,"post_id":75017087,"comment_id":132384591,"body_markdown":"A good answer needs some explanation. Not only some code.","body":"A good answer needs some explanation. Not only some code."},{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1672922359,"post_id":75017087,"comment_id":132384609,"body_markdown":"Your answer could be improved with additional supporting information. Please [edit] to add further details, such as citations or documentation, so that others can confirm that your answer is correct. You can find more information on how to write good answers [in the help center](/help/how-to-answer).","body":"Your answer could be improved with additional supporting information. Please <a href=\"https://stackoverflow.com/posts/75017087/edit\">edit</a> to add further details, such as citations or documentation, so that others can confirm that your answer is correct. You can find more information on how to write good answers <a href=\"/help/how-to-answer\">in the help center</a>."}],"tags":[],"owner":{"account_id":11876764,"reputation":1,"user_id":8691599,"display_name":"Sandeep Kumar"},"comment_count":2,"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1672914846,"creation_date":1672914846,"answer_id":75017087,"question_id":18954070,"body_markdown":"List&lt;String&gt; transactionReferenceInfoList = paymentInfoDao.getTransactionRefNumberToVerify(&quot;0&quot;);\r\n\r\n        for (String transactionRefNumber : transactionReferenceInfoList) {\r\n            transactionID = transactionID + &quot;|&quot;+transactionRefNumber; //|XXX|XXX\r\n        }\r\n    var trasactionID_new =transactionID.substring(1);//XXX|XXX","title":"adding pipe to values in java","body":"<p>List transactionReferenceInfoList = paymentInfoDao.getTransactionRefNumberToVerify(&quot;0&quot;);</p>\n<pre><code>    for (String transactionRefNumber : transactionReferenceInfoList) {\n        transactionID = transactionID + &quot;|&quot;+transactionRefNumber; //|XXX|XXX\n    }\nvar trasactionID_new =transactionID.substring(1);//XXX|XXX\n</code></pre>\n"}],"owner":{"account_id":1625887,"reputation":7853,"user_id":1501457,"accept_rate":87,"display_name":"Java Questions"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1985,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":18954154,"answer_count":7,"score":1,"last_activity_date":1672939167,"creation_date":1379922191,"question_id":18954070,"body_markdown":"I have some values which I have to bring them as pipe`|` separated and I have done like this : \r\n\r\n    List&lt;String&gt; transactionReferenceInfoList = paymentInfoDao.getTransactionRefNumberToVerify(&quot;0&quot;);\r\n    \t\t\r\n    \t\tfor (String transactionRefNumber : transactionReferenceInfoList) {\r\n    \t\t\ttransactionID = transactionID + &quot;|&quot;+transactionRefNumber;\r\n    \t\t}\r\n\r\nthis gives me what I want like the below : \r\n\r\n    |6503939|2298597|4786967|2855035|8999941|7331957|1829429|7148599\r\n\r\nbut it is having the `|` at the beginning of the value I want. how to I avoid this and is there any other best way to do this ?\r\n\r\nPlease suggest me if there is.\r\n\r\nthanks for your valuable time.","title":"adding pipe to values in java","body":"<p>I have some values which I have to bring them as pipe<code>|</code> separated and I have done like this : </p>\n\n<pre><code>List&lt;String&gt; transactionReferenceInfoList = paymentInfoDao.getTransactionRefNumberToVerify(\"0\");\n\n        for (String transactionRefNumber : transactionReferenceInfoList) {\n            transactionID = transactionID + \"|\"+transactionRefNumber;\n        }\n</code></pre>\n\n<p>this gives me what I want like the below : </p>\n\n<pre><code>|6503939|2298597|4786967|2855035|8999941|7331957|1829429|7148599\n</code></pre>\n\n<p>but it is having the <code>|</code> at the beginning of the value I want. how to I avoid this and is there any other best way to do this ?</p>\n\n<p>Please suggest me if there is.</p>\n\n<p>thanks for your valuable time.</p>\n"},{"tags":["javascript","java","string","split","ascii"],"answers":[{"tags":[],"owner":{"account_id":162699,"reputation":138060,"user_id":3788176,"accept_rate":54,"display_name":"Andy Turner"},"comment_count":0,"down_vote_count":0,"up_vote_count":4,"is_accepted":true,"score":4,"last_activity_date":1460625877,"creation_date":1460625877,"answer_id":36618853,"question_id":36618804,"body_markdown":"Either:\r\n\r\n* Use the `\\uXXXX` form to specify the symbol in the string literal:\r\n\r\n        str.split(&quot;\\u0007&quot;)\r\n\r\n* Convert a `char 7` to a String:\r\n\r\n        str.split(Character.toString((char) 7));\r\n\r\n[&lt;kbd&gt;Ideone demo&lt;/kbd&gt;](http://ideone.com/Cor1xB)\r\n","title":"Split strings in JavaScript with special delimiter","body":"<p>Either:</p>\n\n<ul>\n<li><p>Use the <code>\\uXXXX</code> form to specify the symbol in the string literal:</p>\n\n<pre><code>str.split(\"\\u0007\")\n</code></pre></li>\n<li><p>Convert a <code>char 7</code> to a String:</p>\n\n<pre><code>str.split(Character.toString((char) 7));\n</code></pre></li>\n</ul>\n\n<p><a href=\"http://ideone.com/Cor1xB\" rel=\"nofollow\"><kbd>Ideone demo</kbd></a></p>\n"}],"owner":{"account_id":2185658,"reputation":377,"user_id":1934132,"accept_rate":59,"display_name":"shamika Dharmasiri"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2617,"favorite_count":0,"down_vote_count":1,"up_vote_count":2,"accepted_answer_id":36618853,"answer_count":1,"score":1,"last_activity_date":1672939155,"creation_date":1460625782,"question_id":36618804,"body_markdown":"I create a String in server side (with java) including special characters like (char)007 and I want to split the String with this delimiter in client side with JavaScript.&lt;br&gt;\r\nThe reason to use this character is, it can not be input from keyboard.&lt;br&gt;\r\nIs it possible to split a String in JavaScript with character like (char)007?\r\nHow to specify the character in this case ?","title":"Split strings in JavaScript with special delimiter","body":"<p>I create a String in server side (with java) including special characters like (char)007 and I want to split the String with this delimiter in client side with JavaScript.<br>\nThe reason to use this character is, it can not be input from keyboard.<br>\nIs it possible to split a String in JavaScript with character like (char)007?\nHow to specify the character in this case ?</p>\n"},{"tags":["java","jsf","jersey","hk2"],"comments":[{"owner":{"account_id":329138,"reputation":8059,"user_id":652497,"accept_rate":91,"display_name":"Jonathan S. Fisher"},"score":0,"creation_date":1658288952,"post_id":73045251,"comment_id":129011816,"body_markdown":"I think a much easier approach might be to use Apache TomEE Plus 8.0.12, which is based on Tomcat 9 and has JSF already configured.","body":"I think a much easier approach might be to use Apache TomEE Plus 8.0.12, which is based on Tomcat 9 and has JSF already configured."},{"owner":{"account_id":476363,"reputation":16869,"user_id":887235,"accept_rate":80,"display_name":"Vicky"},"score":0,"creation_date":1658297069,"post_id":73045251,"comment_id":129013226,"body_markdown":"@JonathanS.Fisher sorry.. that is not an option for me. I need to make it work with Tomcat 9.","body":"@JonathanS.Fisher sorry.. that is not an option for me. I need to make it work with Tomcat 9."},{"owner":{"account_id":1014158,"reputation":2646,"user_id":1026104,"display_name":"jan.supol"},"score":0,"creation_date":1658303029,"post_id":73045251,"comment_id":129015029,"body_markdown":"Maybe it would help if you have bean-discovery-mode=&quot;annotated&quot; in your beans.xml?","body":"Maybe it would help if you have bean-discovery-mode=&quot;annotated&quot; in your beans.xml?"},{"owner":{"account_id":476363,"reputation":16869,"user_id":887235,"accept_rate":80,"display_name":"Vicky"},"score":0,"creation_date":1658548740,"post_id":73045251,"comment_id":129084730,"body_markdown":"@jan.supol that did not work unfortunately. Have updated the question with the result of the suggested fix.","body":"@jan.supol that did not work unfortunately. Have updated the question with the result of the suggested fix."},{"owner":{"account_id":329138,"reputation":8059,"user_id":652497,"accept_rate":91,"display_name":"Jonathan S. Fisher"},"score":0,"creation_date":1658778087,"post_id":73045251,"comment_id":129131720,"body_markdown":"@Vicky, TomEE 8.0.12 **IS** Tomcat 9. It&#39;s an enhanced version of it","body":"@Vicky, TomEE 8.0.12 <b>IS</b> Tomcat 9. It&#39;s an enhanced version of it"},{"owner":{"account_id":476363,"reputation":16869,"user_id":887235,"accept_rate":80,"display_name":"Vicky"},"score":0,"creation_date":1659999458,"post_id":73045251,"comment_id":129424748,"body_markdown":"@JonathanS.Fisher sorry.. what I meant was TomEE is not an option. I need to make it work with Tomcat.","body":"@JonathanS.Fisher sorry.. what I meant was TomEE is not an option. I need to make it work with Tomcat."}],"owner":{"account_id":476363,"reputation":16869,"user_id":887235,"accept_rate":80,"display_name":"Vicky"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":178,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":0,"score":2,"last_activity_date":1672939011,"creation_date":1658282850,"question_id":73045251,"body_markdown":"I am trying to upgrade my JSF 1.1 project to JSF 2.3.9 and have implemented CDI on tomcat 9 following instructions from [Balus C Install CDI in Tomcat][1]\r\n\r\nSo I have valid dependencies, context.xml, beans.xml and listener added in web.xml as per instructions above.\r\n\r\n    &lt;listener&gt;\r\n        &lt;listener-class&gt;org.apache.webbeans.servlet.WebBeansConfigurationListener&lt;/listener-class&gt;\r\n    &lt;/listener&gt;\r\n\r\n    &lt;listener&gt;\r\n        &lt;listener-class&gt;com.sun.faces.config.ConfigureListener&lt;/listener-class&gt;\r\n    &lt;/listener&gt;\r\n\r\nMy gradle dependencies are:\r\n\r\n     api &#39;org.glassfish:javax.faces:2.3.9&#39;\r\n     implementation &#39;javax.enterprise:cdi-api:2.0&#39;\r\n     implementation &#39;org.apache.openwebbeans:openwebbeans-jsf:2.0.20&#39;\r\n     implementation &#39;javax.validation:validation-api:2.0.1.Final&#39;\r\n\r\nI also have pre-existing Jersey rest endpoints in my Project. The dependencies for that are:\r\n\r\n    implementation &quot;org.glassfish.jersey.core:jersey-server:${jerseyVersion}&quot;\r\n    implementation &quot;org.glassfish.jersey.core:jersey-common:${jerseyVersion}&quot;\r\n    implementation &quot;org.glassfish.jersey.inject:jersey-hk2:${jerseyVersion}&quot;\r\n    api &quot;org.glassfish.jersey.containers:jersey-container-servlet:${jerseyVersion}&quot;\r\n    api &quot;org.glassfish.jersey.media:jersey-media-multipart:${jerseyVersion}&quot;\r\n    api &quot;org.glassfish.hk2:hk2-api:2.6.1&quot;\r\n\r\nwhere my jerseyVersion is 2.36.\r\n\r\nThe project compiles correctly. But on starting tomcat, I get the following error:\r\n\r\n    July 20, 2022 9:28:01 AM org.apache.catalina.core.StandardContext listenerStart\r\n    SEVERE: Exception sending context initialized event to listener instance of class [org.apache.webbeans.servlet.WebBeansConfigurationListener]\r\n\r\n    org.apache.webbeans.exception.WebBeansDeploymentException: javax.enterprise.inject.UnsatisfiedResolutionException: Api type [org.glassfish.hk2.api.ServiceLocator] is not found with the qualifiers \r\n    Qualifiers: [@javax.enterprise.inject.Default()]\r\n    for injection into Constructor Injection Point, constructor name :  org.glassfish.hk2.utilities.GreedyResolver, Bean Owner : [GreedyResolver, WebBeansType:MANAGED, Name:null, API Types:[org.glassfish.hk2.api.JustInTimeInjectionResolver,java.lang.Object,org.glassfish.hk2.utilities.GreedyResolver], Qualifiers:[javax.enterprise.inject.Default,javax.enterprise.inject.Any]]\r\n\tat org.apache.webbeans.config.BeansDeployer.deploy(BeansDeployer.java:344)\r\n\tat org.apache.webbeans.lifecycle.AbstractLifeCycle.bootstrapApplication(AbstractLifeCycle.java:137)\r\n\tat org.apache.webbeans.lifecycle.AbstractLifeCycle.startApplication(AbstractLifeCycle.java:103)\r\n\tat org.apache.webbeans.web.lifecycle.WebContainerLifecycle.startApplication(WebContainerLifecycle.java:99)\r\n\r\nAm not a CDI JSF expert, but I assume this is CDI trying to scan all the managed beans on load and failing. Everytime I start tomcat, the error changes to the same error getting thrown for some other class from Jersey/HK2 dependencies.\r\n\r\nWhy is this happening? What is the solution for this? Can someone please guide me to a possible way to handle/resolve/correct this.\r\n\r\nI also get below error later in the stack trace:\r\n\r\n    java.lang.RuntimeException: java.lang.IllegalStateException: It&#39;s not allowed to call getReference(Bean, Type, CreationalContext) before AfterDeploymentValidation\r\n\tat com.sun.faces.config.ConfigureListener.contextInitialized(ConfigureListener.java:315)\r\n\tat org.apache.catalina.core.StandardContext.listenerStart(StandardContext.java:4768)\r\n\r\nBut I think that&#39;s just my second listener (com.sun.faces.config.ConfigureListener) failing because the CDI did not complete successfully. And I assume this error will go away once I make CDI to behave correctly. Though please let me know if that is not the case. And would appreciate some guidance for this error as well.\r\n\r\nThanks!\r\n\r\n**Update**\r\n\r\nAfter updating bean-discovery-mode to annotated, I am still getting the same error:\r\n\r\n    July 23, 2022 11:52:05 AM \r\n\r\n    org.apache.webbeans.servlet.WebBeansConfigurationListener doStart\r\n    SEVERE: An error occurred while starting application context path : [/MyApp]\r\n    \r\n    July 23, 2022 11:52:05 AM org.apache.catalina.core.StandardContext listenerStart\r\n    SEVERE: Exception sending context initialized event to listener instance of class [org.apache.webbeans.servlet.WebBeansConfigurationListener]\r\n    \r\n    org.apache.webbeans.exception.WebBeansDeploymentException: javax.enterprise.inject.UnsatisfiedResolutionException: Api type [org.glassfish.hk2.api.ServiceLocator] is not found with the qualifiers \r\n    Qualifiers: [@javax.enterprise.inject.Default()]\r\n    for injection into Constructor Injection Point, constructor name :  org.jvnet.hk2.internal.DynamicConfigurationServiceImpl, Bean Owner : [DynamicConfigurationServiceImpl, WebBeansType:MANAGED, Name:null, API Types:[org.glassfish.hk2.api.DynamicConfigurationService,java.lang.Object,org.jvnet.hk2.internal.DynamicConfigurationServiceImpl], Qualifiers:[javax.enterprise.inject.Default,javax.enterprise.inject.Any]]\r\n    \tat org.apache.webbeans.config.BeansDeployer.deploy(BeansDeployer.java:344)\r\n    \tat org.apache.webbeans.lifecycle.AbstractLifeCycle.bootstrapApplication(AbstractLifeCycle.java:137)\r\n    \tat org.apache.webbeans.lifecycle.AbstractLifeCycle.startApplication(AbstractLifeCycle.java:103)\r\n    \tat org.apache.webbeans.web.lifecycle.WebContainerLifecycle.startApplication(WebContainerLifecycle.java:99)\r\n    \tat org.apache.webbeans.servlet.WebBeansConfigurationListener.doStart(WebBeansConfigurationListener.java:197)\r\n    \tat org.apache.webbeans.servlet.WebBeansConfigurationListener.contextInitialized(WebBeansConfigurationListener.java:86)\r\n    \tat org.apache.catalina.core.StandardContext.listenerStart(StandardContext.java:4768)\r\n    \tat org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:5230)\r\n    \tat org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:183)\r\n    \tat org.apache.catalina.core.ContainerBase.addChildInternal(ContainerBase.java:726)\r\n    \tat org.apache.catalina.core.ContainerBase.addChild(ContainerBase.java:698)\r\n    \tat org.apache.catalina.core.StandardHost.addChild(StandardHost.java:696)\r\n    \tat org.apache.catalina.startup.HostConfig.manageApp(HostConfig.java:1783)\r\n    \tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n    \tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)\r\n    \tat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n    \tat java.base/java.lang.reflect.Method.invoke(Method.java:568)\r\n    \tat org.apache.tomcat.util.modeler.BaseModelMBean.invoke(BaseModelMBean.java:293)\r\n    \tat java.management/com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.invoke(DefaultMBeanServerInterceptor.java:814)\r\n\r\n  [1]: https://balusc.omnifaces.org/2013/10/how-to-install-cdi-in-tomcat.html#:~:text=If%20you%20intend%20to%20use,the%20ZIP%20and%20unzip%20it.\r\n","title":"OpenWebBeans CDI scanning Jersey and HK2 dependencies and throwing error","body":"<p>I am trying to upgrade my JSF 1.1 project to JSF 2.3.9 and have implemented CDI on tomcat 9 following instructions from <a href=\"https://balusc.omnifaces.org/2013/10/how-to-install-cdi-in-tomcat.html#:%7E:text=If%20you%20intend%20to%20use,the%20ZIP%20and%20unzip%20it.\" rel=\"nofollow noreferrer\">Balus C Install CDI in Tomcat</a></p>\n<p>So I have valid dependencies, context.xml, beans.xml and listener added in web.xml as per instructions above.</p>\n<pre><code>&lt;listener&gt;\n    &lt;listener-class&gt;org.apache.webbeans.servlet.WebBeansConfigurationListener&lt;/listener-class&gt;\n&lt;/listener&gt;\n\n&lt;listener&gt;\n    &lt;listener-class&gt;com.sun.faces.config.ConfigureListener&lt;/listener-class&gt;\n&lt;/listener&gt;\n</code></pre>\n<p>My gradle dependencies are:</p>\n<pre><code> api 'org.glassfish:javax.faces:2.3.9'\n implementation 'javax.enterprise:cdi-api:2.0'\n implementation 'org.apache.openwebbeans:openwebbeans-jsf:2.0.20'\n implementation 'javax.validation:validation-api:2.0.1.Final'\n</code></pre>\n<p>I also have pre-existing Jersey rest endpoints in my Project. The dependencies for that are:</p>\n<pre><code>implementation &quot;org.glassfish.jersey.core:jersey-server:${jerseyVersion}&quot;\nimplementation &quot;org.glassfish.jersey.core:jersey-common:${jerseyVersion}&quot;\nimplementation &quot;org.glassfish.jersey.inject:jersey-hk2:${jerseyVersion}&quot;\napi &quot;org.glassfish.jersey.containers:jersey-container-servlet:${jerseyVersion}&quot;\napi &quot;org.glassfish.jersey.media:jersey-media-multipart:${jerseyVersion}&quot;\napi &quot;org.glassfish.hk2:hk2-api:2.6.1&quot;\n</code></pre>\n<p>where my jerseyVersion is 2.36.</p>\n<p>The project compiles correctly. But on starting tomcat, I get the following error:</p>\n<pre><code>July 20, 2022 9:28:01 AM org.apache.catalina.core.StandardContext listenerStart\nSEVERE: Exception sending context initialized event to listener instance of class [org.apache.webbeans.servlet.WebBeansConfigurationListener]\n\norg.apache.webbeans.exception.WebBeansDeploymentException: javax.enterprise.inject.UnsatisfiedResolutionException: Api type [org.glassfish.hk2.api.ServiceLocator] is not found with the qualifiers \nQualifiers: [@javax.enterprise.inject.Default()]\nfor injection into Constructor Injection Point, constructor name :  org.glassfish.hk2.utilities.GreedyResolver, Bean Owner : [GreedyResolver, WebBeansType:MANAGED, Name:null, API Types:[org.glassfish.hk2.api.JustInTimeInjectionResolver,java.lang.Object,org.glassfish.hk2.utilities.GreedyResolver], Qualifiers:[javax.enterprise.inject.Default,javax.enterprise.inject.Any]]\nat org.apache.webbeans.config.BeansDeployer.deploy(BeansDeployer.java:344)\nat org.apache.webbeans.lifecycle.AbstractLifeCycle.bootstrapApplication(AbstractLifeCycle.java:137)\nat org.apache.webbeans.lifecycle.AbstractLifeCycle.startApplication(AbstractLifeCycle.java:103)\nat org.apache.webbeans.web.lifecycle.WebContainerLifecycle.startApplication(WebContainerLifecycle.java:99)\n</code></pre>\n<p>Am not a CDI JSF expert, but I assume this is CDI trying to scan all the managed beans on load and failing. Everytime I start tomcat, the error changes to the same error getting thrown for some other class from Jersey/HK2 dependencies.</p>\n<p>Why is this happening? What is the solution for this? Can someone please guide me to a possible way to handle/resolve/correct this.</p>\n<p>I also get below error later in the stack trace:</p>\n<pre><code>java.lang.RuntimeException: java.lang.IllegalStateException: It's not allowed to call getReference(Bean, Type, CreationalContext) before AfterDeploymentValidation\nat com.sun.faces.config.ConfigureListener.contextInitialized(ConfigureListener.java:315)\nat org.apache.catalina.core.StandardContext.listenerStart(StandardContext.java:4768)\n</code></pre>\n<p>But I think that's just my second listener (com.sun.faces.config.ConfigureListener) failing because the CDI did not complete successfully. And I assume this error will go away once I make CDI to behave correctly. Though please let me know if that is not the case. And would appreciate some guidance for this error as well.</p>\n<p>Thanks!</p>\n<p><strong>Update</strong></p>\n<p>After updating bean-discovery-mode to annotated, I am still getting the same error:</p>\n<pre><code>July 23, 2022 11:52:05 AM \n\norg.apache.webbeans.servlet.WebBeansConfigurationListener doStart\nSEVERE: An error occurred while starting application context path : [/MyApp]\n\nJuly 23, 2022 11:52:05 AM org.apache.catalina.core.StandardContext listenerStart\nSEVERE: Exception sending context initialized event to listener instance of class [org.apache.webbeans.servlet.WebBeansConfigurationListener]\n\norg.apache.webbeans.exception.WebBeansDeploymentException: javax.enterprise.inject.UnsatisfiedResolutionException: Api type [org.glassfish.hk2.api.ServiceLocator] is not found with the qualifiers \nQualifiers: [@javax.enterprise.inject.Default()]\nfor injection into Constructor Injection Point, constructor name :  org.jvnet.hk2.internal.DynamicConfigurationServiceImpl, Bean Owner : [DynamicConfigurationServiceImpl, WebBeansType:MANAGED, Name:null, API Types:[org.glassfish.hk2.api.DynamicConfigurationService,java.lang.Object,org.jvnet.hk2.internal.DynamicConfigurationServiceImpl], Qualifiers:[javax.enterprise.inject.Default,javax.enterprise.inject.Any]]\n    at org.apache.webbeans.config.BeansDeployer.deploy(BeansDeployer.java:344)\n    at org.apache.webbeans.lifecycle.AbstractLifeCycle.bootstrapApplication(AbstractLifeCycle.java:137)\n    at org.apache.webbeans.lifecycle.AbstractLifeCycle.startApplication(AbstractLifeCycle.java:103)\n    at org.apache.webbeans.web.lifecycle.WebContainerLifecycle.startApplication(WebContainerLifecycle.java:99)\n    at org.apache.webbeans.servlet.WebBeansConfigurationListener.doStart(WebBeansConfigurationListener.java:197)\n    at org.apache.webbeans.servlet.WebBeansConfigurationListener.contextInitialized(WebBeansConfigurationListener.java:86)\n    at org.apache.catalina.core.StandardContext.listenerStart(StandardContext.java:4768)\n    at org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:5230)\n    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:183)\n    at org.apache.catalina.core.ContainerBase.addChildInternal(ContainerBase.java:726)\n    at org.apache.catalina.core.ContainerBase.addChild(ContainerBase.java:698)\n    at org.apache.catalina.core.StandardHost.addChild(StandardHost.java:696)\n    at org.apache.catalina.startup.HostConfig.manageApp(HostConfig.java:1783)\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)\n    at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n    at java.base/java.lang.reflect.Method.invoke(Method.java:568)\n    at org.apache.tomcat.util.modeler.BaseModelMBean.invoke(BaseModelMBean.java:293)\n    at java.management/com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.invoke(DefaultMBeanServerInterceptor.java:814)\n</code></pre>\n"},{"tags":["java","spring","spring-data-jpa"],"comments":[{"owner":{"account_id":15365778,"reputation":62,"user_id":11085357,"display_name":"Coding"},"score":0,"creation_date":1672920099,"post_id":75018042,"comment_id":132383884,"body_markdown":"I have tried spring.jpa.open-in-view=true but no help","body":"I have tried spring.jpa.open-in-view=true but no help"},{"owner":{"account_id":15365778,"reputation":62,"user_id":11085357,"display_name":"Coding"},"score":0,"creation_date":1672920267,"post_id":75018042,"comment_id":132383945,"body_markdown":"@ManyToOne(fetch = FetchType.EAGER)\nprivate Region parent;\nwill fix the problem, but some other scenarios I just want to get the region itself not its parent, this will still query the parent and waste performance","body":"@ManyToOne(fetch = FetchType.EAGER) private Region parent; will fix the problem, but some other scenarios I just want to get the region itself not its parent, this will still query the parent and waste performance"},{"owner":{"account_id":4181375,"reputation":5121,"user_id":3426309,"display_name":"Andrey B. Panfilov"},"score":0,"creation_date":1672920773,"post_id":75018042,"comment_id":132384099,"body_markdown":"what is a package name of `@Transactional` annotation over `getRegions` method?","body":"what is a package name of <code>@Transactional</code> annotation over <code>getRegions</code> method?"},{"owner":{"account_id":15365778,"reputation":62,"user_id":11085357,"display_name":"Coding"},"score":0,"creation_date":1672928530,"post_id":75018042,"comment_id":132386961,"body_markdown":"org.springframework.transaction.annotation @Andrey B. Panfilov","body":"org.springframework.transaction.annotation @Andrey B. Panfilov"},{"owner":{"account_id":13979585,"reputation":211,"user_id":10096086,"display_name":"Abraham Ciokler"},"score":0,"creation_date":1673380107,"post_id":75018042,"comment_id":132484524,"body_markdown":"You accepted an answer that fetches eagerly and in your question you specifically asked for a solution that doesn&#39;t. If you want to fetch eagerly then you need to update your post to say you actually want to fetch eagerly. This is very confusing.","body":"You accepted an answer that fetches eagerly and in your question you specifically asked for a solution that doesn&#39;t. If you want to fetch eagerly then you need to update your post to say you actually want to fetch eagerly. This is very confusing."}],"answers":[{"comments":[{"owner":{"account_id":15365778,"reputation":62,"user_id":11085357,"display_name":"Coding"},"score":0,"creation_date":1672979107,"post_id":75021547,"comment_id":132399807,"body_markdown":"The Jackson annotations article is awesome","body":"The Jackson annotations article is awesome"}],"tags":[],"owner":{"account_id":13979585,"reputation":211,"user_id":10096086,"display_name":"Abraham Ciokler"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1672936156,"creation_date":1672936156,"answer_id":75021547,"question_id":75018042,"body_markdown":"I think the issue in your code is that you are trying to return a separate object `RegionVO` with all the fields already fetched and flattened at the controller level, but still want the benefits of lazy fetching (deferring fetching to the serialization phase).\r\n\r\nYou need to rethink of what is the information you really need to return first and control the serialization of it. You can use Jackson annotations for this: https://www.baeldung.com/jackson-annotations\r\n\r\n* If you need the `Region` information and its direct parent (no grand parents), try using `@JsonSerialize` to control how the parents get fetched/serialized. This would be useful to avoid fetching circular references or too many levels of parents.\r\n* If you don&#39;t need the parent at all use `@JsonView` to remove the property from getting serialized.\r\n\r\nOne you figure this out then return `List&lt;Region&gt;` instead of `List&lt;RegionVO&gt;` and keep the lazy initialization.","title":"Spring Data JPA return VO list threw LazyInitializationException","body":"<p>I think the issue in your code is that you are trying to return a separate object <code>RegionVO</code> with all the fields already fetched and flattened at the controller level, but still want the benefits of lazy fetching (deferring fetching to the serialization phase).</p>\n<p>You need to rethink of what is the information you really need to return first and control the serialization of it. You can use Jackson annotations for this: <a href=\"https://www.baeldung.com/jackson-annotations\" rel=\"nofollow noreferrer\">https://www.baeldung.com/jackson-annotations</a></p>\n<ul>\n<li>If you need the <code>Region</code> information and its direct parent (no grand parents), try using <code>@JsonSerialize</code> to control how the parents get fetched/serialized. This would be useful to avoid fetching circular references or too many levels of parents.</li>\n<li>If you don't need the parent at all use <code>@JsonView</code> to remove the property from getting serialized.</li>\n</ul>\n<p>One you figure this out then return <code>List&lt;Region&gt;</code> instead of <code>List&lt;RegionVO&gt;</code> and keep the lazy initialization.</p>\n"},{"tags":[],"owner":{"account_id":14162458,"reputation":3910,"user_id":10231374,"display_name":"Toni"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1672938993,"creation_date":1672937195,"answer_id":75021759,"question_id":75018042,"body_markdown":"I suggest you override the `findAll` method in `RegionRepository` and annotate it with [`@EntityGraph`][1] to configure the fetch plan of the resulting query, as shown below:\r\n```java\r\npublic interface RegionRepository extends JpaRepository&lt;Region, String&gt;, JpaSpecificationExecutor&lt;Region&gt; {\r\n   @Override\r\n   @EntityGraph(attributePaths = {&quot;children&quot;, &quot;parent&quot;})\r\n   Page&lt;Region&gt; findAll(Specification&lt;Region&gt; spec, Pageable pageable);\r\n}\r\n```\r\nBy providing `attributePaths`, fields that should be fetched eagerly are defined.\r\n\r\n\r\n  [1]: https://docs.spring.io/spring-data/jpa/docs/current/reference/html/#jpa.entity-graph","title":"Spring Data JPA return VO list threw LazyInitializationException","body":"<p>I suggest you override the <code>findAll</code> method in <code>RegionRepository</code> and annotate it with <a href=\"https://docs.spring.io/spring-data/jpa/docs/current/reference/html/#jpa.entity-graph\" rel=\"nofollow noreferrer\"><code>@EntityGraph</code></a> to configure the fetch plan of the resulting query, as shown below:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public interface RegionRepository extends JpaRepository&lt;Region, String&gt;, JpaSpecificationExecutor&lt;Region&gt; {\n   @Override\n   @EntityGraph(attributePaths = {&quot;children&quot;, &quot;parent&quot;})\n   Page&lt;Region&gt; findAll(Specification&lt;Region&gt; spec, Pageable pageable);\n}\n</code></pre>\n<p>By providing <code>attributePaths</code>, fields that should be fetched eagerly are defined.</p>\n"}],"owner":{"account_id":15365778,"reputation":62,"user_id":11085357,"display_name":"Coding"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":99,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"accepted_answer_id":75021759,"answer_count":2,"score":-1,"last_activity_date":1672938993,"creation_date":1672919923,"question_id":75018042,"body_markdown":"I have a Region Entity like this\r\n```\r\n@Entity\r\nclass Region {\r\n   private Long id;\r\n   private String name;\r\n   private String type;\r\n   private String state;\r\n   @JsonIgnore\r\n    @OneToMany(mappedBy = &quot;parent&quot;, fetch = FetchType.LAZY)\r\n    private List&lt;Region&gt; children;\r\n\r\n    @JsonIgnore\r\n    @ManyToOne(fetch = FetchType.LAZY)\r\n    @JoinColumn(name = &quot;parent_id&quot;, referencedColumnName = &quot;id&quot;, foreignKey =   @ForeignKey(ConstraintMode.NO_CONSTRAINT))\r\n    private Region parent;\r\n\r\n   // some other fields are ignore\r\n}\r\n```\r\nand the repository like this, because I need to provide some field to search (maybe null) for the frontend, so I extends  the JpaSpecificationExecutor\r\n\r\n```\r\npublic interface RegionRepository extends JpaRepository&lt;Region, String&gt;, JpaSpecificationExecutor&lt;Region&gt; {}\r\n```\r\n\r\nCause the region has lots records, so I need it pageable and sortable. \r\nI define a RegionVO like this\r\n\r\n```\r\n@Getter\r\n@Setter\r\n@ToString\r\n@AllArgsConstructor\r\n@NoArgsConstructor\r\npublic class RegionVO {\r\n   private Long id;\r\n   private String name;\r\n   private Long parentId;\r\n   private Long parentName;\r\n   private String type;\r\n   private String state;\r\n   \r\n   public RegionVO(Region region) {\r\n        id = region.getId();\r\n        name = region.getName();\r\n        parentId = region.getParent().getId(); // this line will throw LazyInitializationException\r\n        parentName = region.getParent().getName(); // this line will throw LazyInitializationException\r\n    }\r\n}\r\n```\r\nI want the return result look like RegionVO List and with the page,sort info. In the service class I wrote the search method like below (Some classes eg Sorter,PageResult are defined by myself and have no effect on this problem)\r\n\r\n```\r\nprivate Specification&lt;Region&gt; createSpecification(String name, String type, String parentName, String  state) {\r\n        return (root, query, criteriaBuilder) -&gt; {\r\n            List&lt;Predicate&gt; ps = new ArrayList&lt;&gt;();\r\n            if (StringUtils.hasText(name)) {\r\n                ps.add(criteriaBuilder.like(root.get(&quot;name&quot;), &quot;%&quot; + name + &quot;%&quot;));\r\n            }\r\n            if (type != null) {\r\n                ps.add(criteriaBuilder.equal(root.get(&quot;type&quot;), type));\r\n            }\r\n\r\n            if (StringUtils.hasText(parentName)) {\r\n                ps.add(criteriaBuilder.like(root.join(&quot;parent&quot;).get(&quot;name&quot;), &quot;%&quot; + parentName + &quot;%&quot;));\r\n            }\r\n\r\n            if (state != null) {\r\n                ps.add(criteriaBuilder.equal(root.get(&quot;state&quot;), state));\r\n            }\r\n            int size = ps.size();\r\n            return query.where(ps.toArray(new Predicate[size])).getRestriction();\r\n        };\r\n    }\r\n\r\n@Transactional(rollbackFor = Exception.class)\r\n    public ResponseEntity&lt;RestResult&gt; getRegions(RegionQueryRequest request, int pageNum, int pageSize) {\r\n        pageSize = Math.min(pageSize, PAGE_MAX_SIZE);\r\n        pageNum = pageNum - 1;\r\n        Pageable pageable = PageRequest.of(pageNum, pageSize);\r\n        Specification&lt;Region&gt; regionSpecification = createSpecification(null, null, null, null);\r\n        List&lt;Sorter&gt; sorters = new ArrayList&lt;&gt;();\r\n        if (request != null) {\r\n            sorters = request.getSort();\r\n            Sort sort = Sort.unsorted();\r\n            for (Sorter s : sorters) {\r\n                sort = sort.and(Sort.by(s.getDirection(), s.getField()));\r\n            }\r\n            pageable = PageRequest.of(pageNum, pageSize, sort);\r\n            regionSpecification = createSpecification(request.getName(), request.getType(), request.getParentName(), request.getState());\r\n        }\r\n        Page&lt;Region&gt; regions = regionRepository.findAll(regionSpecification, pageable);\r\n        regions.getContent().get(0).getParent().getName(); // this line will throw LazyInitializationException\r\n        List&lt;RegionVO&gt; voList = regions.getContent().stream().map(RegionVO::new).toList(); // this line will throw LazyInitializationException\r\n        PageResult data = new PageResult(voList, regions, sorters);\r\n        return ResponseEntity.ok(RestResult.success(&quot;success&quot;, data));\r\n    }\r\n```\r\n\r\nI have comment the code which will throw LazyInitializationException\r\n\r\nHow can I fix this issue? In the Region Entity, I use the LAZY fectch, I don&#39;t want it to be EAGER because the performance problem.\r\n\r\n\r\n\r\n\r\n\r\n\r\nbecause the RegionVO is not a Entity, so I can&#39;t define a repository like RegionVORepository.","title":"Spring Data JPA return VO list threw LazyInitializationException","body":"<p>I have a Region Entity like this</p>\n<pre><code>@Entity\nclass Region {\n   private Long id;\n   private String name;\n   private String type;\n   private String state;\n   @JsonIgnore\n    @OneToMany(mappedBy = &quot;parent&quot;, fetch = FetchType.LAZY)\n    private List&lt;Region&gt; children;\n\n    @JsonIgnore\n    @ManyToOne(fetch = FetchType.LAZY)\n    @JoinColumn(name = &quot;parent_id&quot;, referencedColumnName = &quot;id&quot;, foreignKey =   @ForeignKey(ConstraintMode.NO_CONSTRAINT))\n    private Region parent;\n\n   // some other fields are ignore\n}\n</code></pre>\n<p>and the repository like this, because I need to provide some field to search (maybe null) for the frontend, so I extends  the JpaSpecificationExecutor</p>\n<pre><code>public interface RegionRepository extends JpaRepository&lt;Region, String&gt;, JpaSpecificationExecutor&lt;Region&gt; {}\n</code></pre>\n<p>Cause the region has lots records, so I need it pageable and sortable.\nI define a RegionVO like this</p>\n<pre><code>@Getter\n@Setter\n@ToString\n@AllArgsConstructor\n@NoArgsConstructor\npublic class RegionVO {\n   private Long id;\n   private String name;\n   private Long parentId;\n   private Long parentName;\n   private String type;\n   private String state;\n   \n   public RegionVO(Region region) {\n        id = region.getId();\n        name = region.getName();\n        parentId = region.getParent().getId(); // this line will throw LazyInitializationException\n        parentName = region.getParent().getName(); // this line will throw LazyInitializationException\n    }\n}\n</code></pre>\n<p>I want the return result look like RegionVO List and with the page,sort info. In the service class I wrote the search method like below (Some classes eg Sorter,PageResult are defined by myself and have no effect on this problem)</p>\n<pre><code>private Specification&lt;Region&gt; createSpecification(String name, String type, String parentName, String  state) {\n        return (root, query, criteriaBuilder) -&gt; {\n            List&lt;Predicate&gt; ps = new ArrayList&lt;&gt;();\n            if (StringUtils.hasText(name)) {\n                ps.add(criteriaBuilder.like(root.get(&quot;name&quot;), &quot;%&quot; + name + &quot;%&quot;));\n            }\n            if (type != null) {\n                ps.add(criteriaBuilder.equal(root.get(&quot;type&quot;), type));\n            }\n\n            if (StringUtils.hasText(parentName)) {\n                ps.add(criteriaBuilder.like(root.join(&quot;parent&quot;).get(&quot;name&quot;), &quot;%&quot; + parentName + &quot;%&quot;));\n            }\n\n            if (state != null) {\n                ps.add(criteriaBuilder.equal(root.get(&quot;state&quot;), state));\n            }\n            int size = ps.size();\n            return query.where(ps.toArray(new Predicate[size])).getRestriction();\n        };\n    }\n\n@Transactional(rollbackFor = Exception.class)\n    public ResponseEntity&lt;RestResult&gt; getRegions(RegionQueryRequest request, int pageNum, int pageSize) {\n        pageSize = Math.min(pageSize, PAGE_MAX_SIZE);\n        pageNum = pageNum - 1;\n        Pageable pageable = PageRequest.of(pageNum, pageSize);\n        Specification&lt;Region&gt; regionSpecification = createSpecification(null, null, null, null);\n        List&lt;Sorter&gt; sorters = new ArrayList&lt;&gt;();\n        if (request != null) {\n            sorters = request.getSort();\n            Sort sort = Sort.unsorted();\n            for (Sorter s : sorters) {\n                sort = sort.and(Sort.by(s.getDirection(), s.getField()));\n            }\n            pageable = PageRequest.of(pageNum, pageSize, sort);\n            regionSpecification = createSpecification(request.getName(), request.getType(), request.getParentName(), request.getState());\n        }\n        Page&lt;Region&gt; regions = regionRepository.findAll(regionSpecification, pageable);\n        regions.getContent().get(0).getParent().getName(); // this line will throw LazyInitializationException\n        List&lt;RegionVO&gt; voList = regions.getContent().stream().map(RegionVO::new).toList(); // this line will throw LazyInitializationException\n        PageResult data = new PageResult(voList, regions, sorters);\n        return ResponseEntity.ok(RestResult.success(&quot;success&quot;, data));\n    }\n</code></pre>\n<p>I have comment the code which will throw LazyInitializationException</p>\n<p>How can I fix this issue? In the Region Entity, I use the LAZY fectch, I don't want it to be EAGER because the performance problem.</p>\n<p>because the RegionVO is not a Entity, so I can't define a repository like RegionVORepository.</p>\n"},{"tags":["java","eclipse","junit","cucumber"],"comments":[{"owner":{"account_id":4895787,"reputation":10858,"user_id":3945473,"display_name":"M.P. Korstanje"},"score":0,"creation_date":1672937888,"post_id":75021780,"comment_id":132390695,"body_markdown":"Can you include the actual step definitions?","body":"Can you include the actual step definitions?"},{"owner":{"account_id":4895787,"reputation":10858,"user_id":3945473,"display_name":"M.P. Korstanje"},"score":0,"creation_date":1672939368,"post_id":75021780,"comment_id":132391224,"body_markdown":"Don&#39;t see anything obviously wrong. You should remove the pending exceptions.","body":"Don&#39;t see anything obviously wrong. You should remove the pending exceptions."},{"owner":{"account_id":4895787,"reputation":10858,"user_id":3945473,"display_name":"M.P. Korstanje"},"score":0,"creation_date":1672939406,"post_id":75021780,"comment_id":132391236,"body_markdown":"Also, you can try this project with a single passing and two undefined steps https://github.com/cucumber/cucumber-java-skeleton","body":"Also, you can try this project with a single passing and two undefined steps <a href=\"https://github.com/cucumber/cucumber-java-skeleton\" rel=\"nofollow noreferrer\">github.com/cucumber/cucumber-java-skeleton</a>"}],"owner":{"account_id":13386609,"reputation":3,"user_id":9660287,"display_name":"Noctis Ren"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":214,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1672938728,"creation_date":1672937305,"question_id":75021780,"body_markdown":"Been trying to learn/perform some automated testing using Selenium + JUnit + Cucumber and I&#39;ve spent hours browsing through the internet trying to resolve this with no success. I&#39;ve written my feature, steps and runner code and the &#39;glue&#39; is mapped to the correct package too. However, I run into the topic error when I try to run my Runner.java file. \r\n\r\n[Project Structure][1]\r\n\r\n\r\nFeature file:\r\n\r\n    Feature: Admin login\r\n    \r\n    Scenario: Logging into Fleet Portal\r\n    \tGiven user navigates to Fleet Portal\r\n    \tWhen enter credentials\r\n    \tThen user had logged\r\nRunner file:\r\n\r\n    package Runner;\r\n    \r\n    import org.junit.runner.RunWith;\r\n    import io.cucumber.junit.*;\r\n    \r\n    @RunWith(Cucumber.class)\r\n    @CucumberOptions(\r\n    \t\tfeatures = &quot;Features&quot;\r\n    \t\t,glue=&quot;Steps&quot;\r\n    \t\t)\r\n    \r\n    public class TestRunner {}\r\n\r\nStep file:\r\n\r\n    package Steps;\r\n    \r\n    import java.util.ArrayList;\r\n    import java.util.Scanner;\r\n    \r\n    import org.openqa.selenium.By;\r\n    import org.openqa.selenium.JavascriptExecutor;\r\n    import org.openqa.selenium.WebDriver;\r\n    import org.openqa.selenium.chrome.ChromeDriver;\r\n    \r\n    import io.cucumber.java.en.Given;\r\n    import io.cucumber.java.en.Then;\r\n    import io.cucumber.java.en.When;\r\n    \r\n    class App {\r\n        private static final WebDriver driver = new ChromeDriver();\r\n    \r\n    \tpublic void myMethod(String flag) {\r\n          System.out.println(flag);\r\n        }\r\n    \t@Given(&quot;user navigates to Fleet Portal&quot;)\r\n    \tpublic void user_navigates_to_fleet_portal() {    \t\t\r\n    \t\tthrow new io.cucumber.java.PendingException();\r\n    \t}\r\n    \t\r\n    \t@When(&quot;enter credentials&quot;)\r\n        public void enter_credentials() throws InterruptedException {        \t        \r\n           \r\n    \t\tthrow new io.cucumber.java.PendingException();\r\n    \t}\r\n        @Then(&quot;user had logged in successfully&quot;)\r\n\t    public void user_had_logged_in_successfully() {\r\n\t\t    myMethod(&quot;yes&quot;);\r\n\t\t    throw new io.cucumber.java.PendingException();\r\n    \t    }\r\n    }\r\n\r\n\r\nI&#39;ve tried to take JUnit out of the picture by simply running the feature file as a cucumber test but it still results in the same error, which is weird because the cucumber plugin confirms that the steps are mapped to the features -&gt; [feature mapping][2]\r\n\r\n\r\n[POM file][3]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/Bg6NE.png\r\n  [2]: https://i.stack.imgur.com/03ZDb.png\r\n  [3]: https://i.stack.imgur.com/WI79C.png\r\n\r\nAny and all help is appreciated.\r\n","title":"io.cucumber.junit.UndefinedStepException: The step &#39;&#39;.... are undefined","body":"<p>Been trying to learn/perform some automated testing using Selenium + JUnit + Cucumber and I've spent hours browsing through the internet trying to resolve this with no success. I've written my feature, steps and runner code and the 'glue' is mapped to the correct package too. However, I run into the topic error when I try to run my Runner.java file.</p>\n<p><a href=\"https://i.stack.imgur.com/Bg6NE.png\" rel=\"nofollow noreferrer\">Project Structure</a></p>\n<p>Feature file:</p>\n<pre><code>Feature: Admin login\n\nScenario: Logging into Fleet Portal\n    Given user navigates to Fleet Portal\n    When enter credentials\n    Then user had logged\n</code></pre>\n<p>Runner file:</p>\n<pre><code>package Runner;\n\nimport org.junit.runner.RunWith;\nimport io.cucumber.junit.*;\n\n@RunWith(Cucumber.class)\n@CucumberOptions(\n        features = &quot;Features&quot;\n        ,glue=&quot;Steps&quot;\n        )\n\npublic class TestRunner {}\n</code></pre>\n<p>Step file:</p>\n<pre><code>package Steps;\n\nimport java.util.ArrayList;\nimport java.util.Scanner;\n\nimport org.openqa.selenium.By;\nimport org.openqa.selenium.JavascriptExecutor;\nimport org.openqa.selenium.WebDriver;\nimport org.openqa.selenium.chrome.ChromeDriver;\n\nimport io.cucumber.java.en.Given;\nimport io.cucumber.java.en.Then;\nimport io.cucumber.java.en.When;\n\nclass App {\n    private static final WebDriver driver = new ChromeDriver();\n\n    public void myMethod(String flag) {\n      System.out.println(flag);\n    }\n    @Given(&quot;user navigates to Fleet Portal&quot;)\n    public void user_navigates_to_fleet_portal() {          \n        throw new io.cucumber.java.PendingException();\n    }\n    \n    @When(&quot;enter credentials&quot;)\n    public void enter_credentials() throws InterruptedException {                   \n       \n        throw new io.cucumber.java.PendingException();\n    }\n    @Then(&quot;user had logged in successfully&quot;)\n    public void user_had_logged_in_successfully() {\n        myMethod(&quot;yes&quot;);\n        throw new io.cucumber.java.PendingException();\n        }\n}\n</code></pre>\n<p>I've tried to take JUnit out of the picture by simply running the feature file as a cucumber test but it still results in the same error, which is weird because the cucumber plugin confirms that the steps are mapped to the features -&gt; <a href=\"https://i.stack.imgur.com/03ZDb.png\" rel=\"nofollow noreferrer\">feature mapping</a></p>\n<p><a href=\"https://i.stack.imgur.com/WI79C.png\" rel=\"nofollow noreferrer\">POM file</a></p>\n<p>Any and all help is appreciated.</p>\n"},{"tags":["java","hibernate","maven","jpa","environment-variables"],"comments":[{"owner":{"account_id":4906361,"reputation":3077,"user_id":3952994,"accept_rate":76,"display_name":"Holm"},"score":1,"creation_date":1550760317,"post_id":54809617,"comment_id":96396096,"body_markdown":"would like to use this question to ask that will use `:-` work for your case? or `:` and `:-` are the same? can `${env.DB_SCHEMA:-my_default_scheme}` work?","body":"would like to use this question to ask that will use <code>:-</code> work for your case? or <code>:</code> and <code>:-</code> are the same? can <code>${env.DB_SCHEMA:-my_default_scheme}</code> work?"},{"owner":{"account_id":4540696,"reputation":7790,"user_id":3688648,"accept_rate":54,"display_name":"Felk"},"score":0,"creation_date":1551084713,"post_id":54809617,"comment_id":96495512,"body_markdown":"I have never seen `:-` being used before. What is that syntax, can you elaborate?","body":"I have never seen <code>:-</code> being used before. What is that syntax, can you elaborate?"},{"owner":{"account_id":4906361,"reputation":3077,"user_id":3952994,"accept_rate":76,"display_name":"Holm"},"score":0,"creation_date":1551100010,"post_id":54809617,"comment_id":96504091,"body_markdown":"in your example, its ${env.DB_SCHEMA:-my_default_scheme}\nref: https://unix.stackexchange.com/questions/122845/using-a-b-for-variable-assignment-in-scripts/122878","body":"in your example, its ${env.DB_SCHEMA:-my_default_scheme} ref: <a href=\"https://unix.stackexchange.com/questions/122845/using-a-b-for-variable-assignment-in-scripts/122878\" title=\"using a b for variable assignment in scripts\">unix.stackexchange.com/questions/122845/&hellip;</a>"}],"answers":[{"tags":[],"owner":{"account_id":3484078,"reputation":2533,"user_id":2915423,"display_name":"helvete"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1672938576,"creation_date":1672938576,"answer_id":75022024,"question_id":54809617,"body_markdown":"In case you are using Payara application container (version &gt;= `4.1.2.172`), you can user a syntax like this:\r\n\r\n```sh\r\n${ENV=PG_DATASOURCE_NAME}\r\n```\r\n\r\nMy `persistence.xml` file for example:\r\n```xml\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n&lt;persistence version=&quot;2.1&quot; xmlns=&quot;http://xmlns.jcp.org/xml/ns/persistence&quot;\r\n             xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n             xsi:schemaLocation=&quot;http://xmlns.jcp.org/xml/ns/persistence http://xmlns.jcp.org/xml/ns/persistence/persistence_2_1.xsd&quot;&gt;\r\n\r\n    &lt;persistence-unit name=&quot;${ENV=PG_DATASOURCE_NAME}&quot; transaction-type=&quot;JTA&quot;&gt;\r\n        &lt;jta-data-source&gt;${ENV=PG_DATASOURCE_NAME}&lt;/jta-data-source&gt;\r\n        &lt;properties&gt;\r\n            &lt;property name=&quot;hibernate.show_sql&quot; value=&quot;true&quot;/&gt;\r\n            &lt;property name=&quot;javax.persistence.sharedCache.mode&quot; value=&quot;NONE&quot; /&gt;\r\n        &lt;/properties&gt;\r\n    &lt;/persistence-unit&gt;\r\n&lt;/persistence&gt;\r\n```\r\n\r\nMore on this topic at [the docs][1].\r\n\r\n\r\n  [1]: https://docs.payara.fish/enterprise/docs/5.26.0/documentation/payara-server/server-configuration/var-substitution/usage-of-variables.html","title":"default for persistence.xml variable set by environment variable","body":"<p>In case you are using Payara application container (version &gt;= <code>4.1.2.172</code>), you can user a syntax like this:</p>\n<pre class=\"lang-bash prettyprint-override\"><code>${ENV=PG_DATASOURCE_NAME}\n</code></pre>\n<p>My <code>persistence.xml</code> file for example:</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;persistence version=&quot;2.1&quot; xmlns=&quot;http://xmlns.jcp.org/xml/ns/persistence&quot;\n             xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\n             xsi:schemaLocation=&quot;http://xmlns.jcp.org/xml/ns/persistence http://xmlns.jcp.org/xml/ns/persistence/persistence_2_1.xsd&quot;&gt;\n\n    &lt;persistence-unit name=&quot;${ENV=PG_DATASOURCE_NAME}&quot; transaction-type=&quot;JTA&quot;&gt;\n        &lt;jta-data-source&gt;${ENV=PG_DATASOURCE_NAME}&lt;/jta-data-source&gt;\n        &lt;properties&gt;\n            &lt;property name=&quot;hibernate.show_sql&quot; value=&quot;true&quot;/&gt;\n            &lt;property name=&quot;javax.persistence.sharedCache.mode&quot; value=&quot;NONE&quot; /&gt;\n        &lt;/properties&gt;\n    &lt;/persistence-unit&gt;\n&lt;/persistence&gt;\n</code></pre>\n<p>More on this topic at <a href=\"https://docs.payara.fish/enterprise/docs/5.26.0/documentation/payara-server/server-configuration/var-substitution/usage-of-variables.html\" rel=\"nofollow noreferrer\">the docs</a>.</p>\n"}],"owner":{"account_id":4540696,"reputation":7790,"user_id":3688648,"accept_rate":54,"display_name":"Felk"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":828,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":1,"score":2,"last_activity_date":1672938576,"creation_date":1550759927,"question_id":54809617,"body_markdown":"tl;dr: I want to fill a variable in the `persistence.xml` with an environment variable, or have it be a previously defined default if no such environment variable exists.\r\n\r\n---\r\n\r\nI want to set the default scheme of Hibernate in my persistence.xml dynamically on start-up in Docker.\r\nTherefore i added a variable into the following property, which can be set by using an environment variable:\r\n\r\n    &lt;property name=&quot;hibernate.default_schema&quot; value=&quot;${env.DB_SCHEME}&quot;/&gt;\r\n\r\nThis works perfectly fine for the docker environment, but for the non-docker environment i need some kind of default value that gets injected.\r\n\r\nSadly i cant use something like this, because it is not supported:\r\n\r\n    &lt;property name=&quot;hibernate.default_schema&quot; value=&quot;${env.DB_SCHEMA:my_default_scheme}&quot;/&gt;\r\n\r\nI also tried adding a property `env.DB_SCHEME` to the Maven properties of the project,\r\nbut that way it always uses the value from Maven and i can&#39;t override it with environment variables anymore.\r\n\r\nAnother thing i read about was to use the filtering option from the resource plugin in Maven. That way i could replace the variable with a pre-defined value.\r\nBut that way i have to select a profile while building and it&#39;s not possible to change at runtime.\r\n\r\nFurther i tried doing it programatically. Therefore i took the entityManager of my persistence-unit and checked, whether the environment-variable was set or not.\r\nIf it was set (only while using the docker environment) it should have placed the `${env.DB_SCHEME}` in the value of the property.\r\nOtherwise it could have placed `${DB_SCHEME}` in it, so that the property from Maven could later overwrite it.\r\nBut somehow, the properties aren&#39;t set. Maybe the code is executed too late, because the property hibernate.hbm2ddl.auto&quot; is set to validate.","title":"default for persistence.xml variable set by environment variable","body":"<p>tl;dr: I want to fill a variable in the <code>persistence.xml</code> with an environment variable, or have it be a previously defined default if no such environment variable exists.</p>\n\n<hr>\n\n<p>I want to set the default scheme of Hibernate in my persistence.xml dynamically on start-up in Docker.\nTherefore i added a variable into the following property, which can be set by using an environment variable:</p>\n\n<pre><code>&lt;property name=\"hibernate.default_schema\" value=\"${env.DB_SCHEME}\"/&gt;\n</code></pre>\n\n<p>This works perfectly fine for the docker environment, but for the non-docker environment i need some kind of default value that gets injected.</p>\n\n<p>Sadly i cant use something like this, because it is not supported:</p>\n\n<pre><code>&lt;property name=\"hibernate.default_schema\" value=\"${env.DB_SCHEMA:my_default_scheme}\"/&gt;\n</code></pre>\n\n<p>I also tried adding a property <code>env.DB_SCHEME</code> to the Maven properties of the project,\nbut that way it always uses the value from Maven and i can't override it with environment variables anymore.</p>\n\n<p>Another thing i read about was to use the filtering option from the resource plugin in Maven. That way i could replace the variable with a pre-defined value.\nBut that way i have to select a profile while building and it's not possible to change at runtime.</p>\n\n<p>Further i tried doing it programatically. Therefore i took the entityManager of my persistence-unit and checked, whether the environment-variable was set or not.\nIf it was set (only while using the docker environment) it should have placed the <code>${env.DB_SCHEME}</code> in the value of the property.\nOtherwise it could have placed <code>${DB_SCHEME}</code> in it, so that the property from Maven could later overwrite it.\nBut somehow, the properties aren't set. Maybe the code is executed too late, because the property hibernate.hbm2ddl.auto\" is set to validate.</p>\n"},{"tags":["java","arrays"],"comments":[{"owner":{"account_id":11683,"reputation":1438219,"user_id":22656,"accept_rate":86,"display_name":"Jon Skeet"},"score":0,"creation_date":1672933903,"post_id":75021032,"comment_id":132389121,"body_markdown":"&quot;If the parameter is larger than the array&#39;s length, an error will occur&quot; - not in the code you posted. Which line is throwing the error? The only array indexing you&#39;ve got is within the body of the `if` statement that validates that `switchState` is valid for the array...","body":"&quot;If the parameter is larger than the array&#39;s length, an error will occur&quot; - not in the code you posted. Which line is throwing the error? The only array indexing you&#39;ve got is within the body of the <code>if</code> statement that validates that <code>switchState</code> is valid for the array..."},{"owner":{"account_id":4947846,"reputation":9433,"user_id":3982755,"accept_rate":79,"display_name":"Bentaye"},"score":0,"creation_date":1672934150,"post_id":75021032,"comment_id":132389226,"body_markdown":"Use modulo. `5 % 4` is `1`, `6 % 4` is `2`, etc","body":"Use modulo. <code>5 % 4</code> is <code>1</code>, <code>6 % 4</code> is <code>2</code>, etc"},{"owner":{"account_id":26762937,"reputation":21,"user_id":20360580,"display_name":"Roy"},"score":0,"creation_date":1672934175,"post_id":75021032,"comment_id":132389242,"body_markdown":"The issue is with the last condition, how to deal with the array if the input was larger than the array length, I couldn&#39;t form a condition that doesn&#39;t cause an error","body":"The issue is with the last condition, how to deal with the array if the input was larger than the array length, I couldn&#39;t form a condition that doesn&#39;t cause an error"},{"owner":{"account_id":4728704,"reputation":17032,"user_id":3824919,"display_name":"Tom"},"score":1,"creation_date":1672934421,"post_id":75021032,"comment_id":132389325,"body_markdown":"Your code is wrong so there is no need to &quot;fix&quot; a different issue when the code still remains wrong. Your parameter has a different meaning than the assignment&#39;s parameter description and your code assumes that the lamp has no start, that&#39;s why you assume an input of 5 is always &quot;LowLight&quot;, which is wrong, it obviously depends on the previous state.","body":"Your code is wrong so there is no need to &quot;fix&quot; a different issue when the code still remains wrong. Your parameter has a different meaning than the assignment&#39;s parameter description and your code assumes that the lamp has no start, that&#39;s why you assume an input of 5 is always &quot;LowLight&quot;, which is wrong, it obviously depends on the previous state."},{"owner":{"account_id":6606677,"reputation":1024,"user_id":5103317,"display_name":"Old Dog Programmer"},"score":0,"creation_date":1673018397,"post_id":75021032,"comment_id":132409543,"body_markdown":"A good software developer will understand the requirements. Sometimes, requirements are open to interpretation. Sometimes, the misunderstanding can be with the developer, sometimes with the client. The software developer needs to ask questions to clarify the requirements. My interpretation is that the code should allow multiple turnings of the switch. For example, turn the switch 2x, come back, turn the switch 2x. To do that, `class ThreeWayLamp` needs an instance variable to retain the state between successive calls to &#39;switch (int)&#39;","body":"A good software developer will understand the requirements. Sometimes, requirements are open to interpretation. Sometimes, the misunderstanding can be with the developer, sometimes with the client. The software developer needs to ask questions to clarify the requirements. My interpretation is that the code should allow multiple turnings of the switch. For example, turn the switch 2x, come back, turn the switch 2x. To do that, <code>class ThreeWayLamp</code> needs an instance variable to retain the state between successive calls to &#39;switch (int)&#39;"},{"owner":{"account_id":6606677,"reputation":1024,"user_id":5103317,"display_name":"Old Dog Programmer"},"score":0,"creation_date":1673018449,"post_id":75021032,"comment_id":132409565,"body_markdown":"Also, printing an error message is not the same as throwing an exception.","body":"Also, printing an error message is not the same as throwing an exception."}],"answers":[{"tags":[],"owner":{"account_id":16934234,"reputation":16,"user_id":12247666,"display_name":"Nickitiki"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1672934360,"creation_date":1672934360,"answer_id":75021197,"question_id":75021032,"body_markdown":"You can solve this problem by using a modulo operator:\r\n\r\n``` java\r\nSystem.out.println(States[switchState % States.length]);\r\n```","title":"How to deal with IndexOutOfBounds error in arrays in such a case?","body":"<p>You can solve this problem by using a modulo operator:</p>\n<pre class=\"lang-java prettyprint-override\"><code>System.out.println(States[switchState % States.length]);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":11896372,"reputation":182,"user_id":8705653,"display_name":"Fakipo"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1672934596,"creation_date":1672934596,"answer_id":75021243,"question_id":75021032,"body_markdown":"Instead of using the less than condition, you can try using mod to repeat the indexes of your String array.\r\n\r\nTry below code:\r\n```\r\npublic class ThreeWayLamp {\r\n\r\npublic String[] States = {&quot;Off&quot;,&quot;LowLifght&quot;, &quot;MediumLifght&quot;, &quot;HighLight&quot;}; // an array of the 4 states\r\n    \r\n    \r\n    public void Switch(int switchState){\r\n\r\n        \r\n    if ((switchState &gt; 0){\r\n        System.out.println(States[switchState % States.length]); // states.length = 4 in your case\r\n    } else {\r\n        System.out.println(&quot;Wrong input, try again with diffrent number&quot;);\r\n    }\r\n    \r\n           \r\n    }\r\n```","title":"How to deal with IndexOutOfBounds error in arrays in such a case?","body":"<p>Instead of using the less than condition, you can try using mod to repeat the indexes of your String array.</p>\n<p>Try below code:</p>\n<pre><code>public class ThreeWayLamp {\n\npublic String[] States = {&quot;Off&quot;,&quot;LowLifght&quot;, &quot;MediumLifght&quot;, &quot;HighLight&quot;}; // an array of the 4 states\n    \n    \n    public void Switch(int switchState){\n\n        \n    if ((switchState &gt; 0){\n        System.out.println(States[switchState % States.length]); // states.length = 4 in your case\n    } else {\n        System.out.println(&quot;Wrong input, try again with diffrent number&quot;);\n    }\n    \n           \n    }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":4947846,"reputation":9433,"user_id":3982755,"accept_rate":79,"display_name":"Bentaye"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1672934813,"creation_date":1672934813,"answer_id":75021298,"question_id":75021032,"body_markdown":"Using modulo you can ensure the index will always be within the size of the array \r\n```\r\n4 % 4 = 0\r\n5 % 4 = 1\r\n6 % 4 = 2\r\n7 % 4 = 3\r\n8 % 4 = 0\r\n9 % 4 = 1\r\n...\r\n```\r\n\r\n\r\n    public void Switch(int switchState){\r\n        if ((switchState &lt; States.length) &amp;&amp; (switchState &gt;= 0)){\r\n            System.out.println(States[switchState]);\r\n        } else if (switchState &lt; 0 ){\r\n            System.out.println(&quot;Wrong input, try again with diffrent number&quot;);\r\n        } else {\r\n            Switch(switchState % 4);\r\n            // or\r\n            // System.out.println(States[switchState % 4]);\r\n        }\r\n    }\r\n\r\n\r\nAlso, variable and method names should start with a lower case ","title":"How to deal with IndexOutOfBounds error in arrays in such a case?","body":"<p>Using modulo you can ensure the index will always be within the size of the array</p>\n<pre><code>4 % 4 = 0\n5 % 4 = 1\n6 % 4 = 2\n7 % 4 = 3\n8 % 4 = 0\n9 % 4 = 1\n...\n</code></pre>\n<pre><code>public void Switch(int switchState){\n    if ((switchState &lt; States.length) &amp;&amp; (switchState &gt;= 0)){\n        System.out.println(States[switchState]);\n    } else if (switchState &lt; 0 ){\n        System.out.println(&quot;Wrong input, try again with diffrent number&quot;);\n    } else {\n        Switch(switchState % 4);\n        // or\n        // System.out.println(States[switchState % 4]);\n    }\n}\n</code></pre>\n<p>Also, variable and method names should start with a lower case</p>\n"}],"owner":{"account_id":26762937,"reputation":21,"user_id":20360580,"display_name":"Roy"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":70,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"closed_date":1672939108,"answer_count":3,"score":2,"last_activity_date":1672938547,"creation_date":1672933640,"question_id":75021032,"body_markdown":"I need to create a method for my OOP lab, the details are as the following:\r\n\r\n\r\nA ThreeWayLamp class models the behavior of a lamp that uses a \r\nthree-way bulb. These bulbs have four possible states: off, low light, medium \r\nlight, and high light. Each time the switch is activated, the bulb goes to the next \r\nstate (from high, the next state is off, from off to low etc). The ThreeWayLamp \r\nclass has a single method called switch() which takes a single int parameter \r\nindicating how many times the switch is activated. (you need to throw an \r\nexception if its negative). The Switch() method should simply print out to \r\nSystem.out a message indicating the state of the bulb after it has changed.\r\n\r\n```java\r\npublic class ThreeWayLamp {\r\n\r\npublic String[] States = {&quot;Off&quot;,&quot;LowLifght&quot;, &quot;MediumLifght&quot;, &quot;HighLight&quot;}; // an array of the 4 states\r\n    \r\n    \r\n    public void Switch(int switchState){\r\n    \r\n      //used an if condition to determine what to print based on the parameter switchState\r\n\r\n        if ((switchState &lt;= States.length) &amp;&amp; (switchState &gt;= 0)){\r\n            System.out.println(States[switchState]);\r\n            \r\n        }else if (switchState &lt; 0 ){\r\n            System.out.println(&quot;Wrong input, try again with diffrent number&quot;);\r\n           \r\n        }else if (switchState &gt;= States.length){\r\n            \r\n        } //This condition is the issue, how to form a condition that will solve this problem\r\n    }\r\n```\r\n\r\nIf the parameter is larger than the array&#39;s length, an error will occur, so the issue is how to form a condition that will make the array loop again around itself when it reaches its last index.\r\nFor example, if the input was 5, then the method should print LowLight.\r\nIs there a possible condition or function that could solve this issue, or should I change the entire structure of the code?","title":"How to deal with IndexOutOfBounds error in arrays in such a case?","body":"<p>I need to create a method for my OOP lab, the details are as the following:</p>\n<p>A ThreeWayLamp class models the behavior of a lamp that uses a\nthree-way bulb. These bulbs have four possible states: off, low light, medium\nlight, and high light. Each time the switch is activated, the bulb goes to the next\nstate (from high, the next state is off, from off to low etc). The ThreeWayLamp\nclass has a single method called switch() which takes a single int parameter\nindicating how many times the switch is activated. (you need to throw an\nexception if its negative). The Switch() method should simply print out to\nSystem.out a message indicating the state of the bulb after it has changed.</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class ThreeWayLamp {\n\npublic String[] States = {&quot;Off&quot;,&quot;LowLifght&quot;, &quot;MediumLifght&quot;, &quot;HighLight&quot;}; // an array of the 4 states\n    \n    \n    public void Switch(int switchState){\n    \n      //used an if condition to determine what to print based on the parameter switchState\n\n        if ((switchState &lt;= States.length) &amp;&amp; (switchState &gt;= 0)){\n            System.out.println(States[switchState]);\n            \n        }else if (switchState &lt; 0 ){\n            System.out.println(&quot;Wrong input, try again with diffrent number&quot;);\n           \n        }else if (switchState &gt;= States.length){\n            \n        } //This condition is the issue, how to form a condition that will solve this problem\n    }\n</code></pre>\n<p>If the parameter is larger than the array's length, an error will occur, so the issue is how to form a condition that will make the array loop again around itself when it reaches its last index.\nFor example, if the input was 5, then the method should print LowLight.\nIs there a possible condition or function that could solve this issue, or should I change the entire structure of the code?</p>\n"},{"tags":["java","dll","jna"],"comments":[{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1670855624,"post_id":74772434,"comment_id":131963334,"body_markdown":"Please edit the question to limit it to a specific problem with enough detail to identify an adequate answer.","body":"Please edit the question to limit it to a specific problem with enough detail to identify an adequate answer."},{"owner":{"account_id":17428960,"reputation":13,"user_id":12633325,"display_name":"Naveen Rathnam"},"score":0,"creation_date":1671072675,"post_id":74772434,"comment_id":132020879,"body_markdown":"@DanielWiddis Posted the code","body":"@DanielWiddis Posted the code"},{"owner":{"account_id":1187908,"reputation":8615,"user_id":1161484,"accept_rate":93,"display_name":"Daniel Widdis"},"score":0,"creation_date":1671084643,"post_id":74772434,"comment_id":132022548,"body_markdown":"@NaveenRathnam Thanks for the code.  I don&#39;t see any time delay between your dispose and your checking whether it was disposed.  The linked answer that I wrote says, &quot;Note that in all these options you may want a small time delay of a few milliseconds after disposing&quot;","body":"@NaveenRathnam Thanks for the code.  I don&#39;t see any time delay between your dispose and your checking whether it was disposed.  The linked answer that I wrote says, &quot;Note that in all these options you may want a small time delay of a few milliseconds after disposing&quot;"},{"owner":{"account_id":17428960,"reputation":13,"user_id":12633325,"display_name":"Naveen Rathnam"},"score":0,"creation_date":1671127494,"post_id":74772434,"comment_id":132036920,"body_markdown":"@DanielWiddis tried with time delay of 3000 milliseconds and Files.delete(). still not working. getting below exception :\nException in thread &quot;main&quot; java.nio.file.AccessDeniedException: .\\ExternalDownloader_64.dll\n        at sun.nio.fs.WindowsException.translateToIOException(WindowsException.java:83)\n        at sun.nio.fs.WindowsException.rethrowAsIOException(WindowsException.java:97)\n        at sun.nio.fs.WindowsException.rethrowAsIOException(WindowsException.java:102)\n        at sun.nio.fs.WindowsFileSystemProvider.implDelete(WindowsFileSystemProvider.java:269)","body":"@DanielWiddis tried with time delay of 3000 milliseconds and Files.delete(). still not working. getting below exception : Exception in thread &quot;main&quot; java.nio.file.AccessDeniedException: .\\ExternalDownloader_64.dll         at sun.nio.fs.WindowsException.translateToIOException(WindowsEx&zwnj;&#8203;ception.java:83)         at sun.nio.fs.WindowsException.rethrowAsIOException(WindowsExce&zwnj;&#8203;ption.java:97)         at sun.nio.fs.WindowsException.rethrowAsIOException(WindowsExce&zwnj;&#8203;ption.java:102)         at sun.nio.fs.WindowsFileSystemProvider.implDelete(WindowsFileS&zwnj;&#8203;ystemProvider.java:2&zwnj;&#8203;69)"}],"answers":[{"comments":[{"owner":{"account_id":17428960,"reputation":13,"user_id":12633325,"display_name":"Naveen Rathnam"},"score":0,"creation_date":1671273795,"post_id":74829691,"comment_id":132067103,"body_markdown":"Tried your suggestion. still unable to unload / delete the dll. I am using latest jna version 5.12.1. DllUtil.dispose() - not possible. if possible try executing the code. Thanks","body":"Tried your suggestion. still unable to unload / delete the dll. I am using latest jna version 5.12.1. DllUtil.dispose() - not possible. if possible try executing the code. Thanks"},{"owner":{"account_id":1187908,"reputation":8615,"user_id":1161484,"accept_rate":93,"display_name":"Daniel Widdis"},"score":0,"creation_date":1671303939,"post_id":74829691,"comment_id":132072354,"body_markdown":"@NaveenRathnam Reproduced the error with your code; got it to delete by inserting `System.gc()` call before the time delay.  Looking in more detail into why that is the case and will update my answer (and the linked one as well) later.","body":"@NaveenRathnam Reproduced the error with your code; got it to delete by inserting <code>System.gc()</code> call before the time delay.  Looking in more detail into why that is the case and will update my answer (and the linked one as well) later."}],"tags":[],"owner":{"account_id":1187908,"reputation":8615,"user_id":1161484,"accept_rate":93,"display_name":"Daniel Widdis"},"comment_count":2,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1672938398,"creation_date":1671224261,"answer_id":74829691,"question_id":74772434,"body_markdown":"I was able to reproduce the problem with your code, but only on Windows.  When reproducible, I was able to successfully delete the file by adding a garbage collection suggestion before the time delay:\r\n```java\r\nif (DLLUtil != null) {\r\n    DLLUtil = null;\r\n    NativeLibrary lib = NativeLibrary.getInstance(dllPath);\r\n    lib.close();\r\n    System.gc();\r\n    System.gc();\r\n    Thread.sleep(3000);\r\n}\r\n```\r\n\r\nWhen JNA loads a Windows DLL via `Native.loadLibrary()`, it internally executes the WinAPI [LoadLibraryExW][1] function.\r\n \r\nInternally the Java instance is stored in a map to be re-used when possible -- however for this to happen, it requires two things to look up the same Java object:\r\n - the DLL Path must be an absolute path\r\n - the options must match. In this case, you would need to pass the classloader as an argument as [Matthias Bl&#228;sing][5] indicated in [his answer][2]:\r\n```java\r\n// if loaded like this:\r\nDLLUtil = (ExtDLLTool) Native.loadLibrary(dllPath, ExtDLLTool.class);\r\n// fetch from cache like this:\r\nNativeLibrary lib = NativeLibrary.getInstance(dllPath, ExtDLLTool.class.getClassLoader());\r\nlib.dispose();\r\n```\r\nThis should allow you to delete the file.\r\n\r\nHowever, in your case, with the relative path, the library is getting unloaded but the old java object isn&#39;t getting closed until GC occurs.\r\n\r\nThe `dispose()` (or `close()` as of 5.12) call in JNA eventually calls the `Native.close()` method which uses the Windows API [FreeLibrary][3] function. This unloads the DLL from the Process memory, so the advice on the linked question on how to dispose is still accurate in the case that you want to re-load the library. If you&#39;re not reloading the library, using `dispose()` (5.11-) or `close()` (5.12+) is optional.\r\n\r\nIf you must use a relative path, consider this approach using a `PhantomReference` inspired by [this answer][4] to track the deletion:\r\n```java\r\nif (DLLUtil != null) {\r\n    // Unload the DLL from process memory\r\n    // Optional here, as it will be called by a cleaner on GC below\r\n    NativeLibrary lib = NativeLibrary.getInstance(dllPath);\r\n    lib.close();\r\n    System.out.println(&quot;Closed.&quot;);\r\n\r\n    // Remove any internal JVM references to the file\r\n    final ReferenceQueue rq = new ReferenceQueue();\r\n    final PhantomReference phantom = new PhantomReference(DLLUtil, rq);\r\n    DLLUtil = null;\r\n\r\n    // Poll until GC removes the reference\r\n    int count = 0;\r\n    while (rq.poll() == null) {\r\n        System.out.println(&quot;Waiting...&quot;);\r\n        Thread.sleep(1000);\r\n        if (++count &gt; 4) {\r\n            // After 5 seconds prompt for GC!\r\n            System.out.println(&quot;Suggesting GC...&quot;);\r\n            System.gc();\r\n        }\r\n    }\r\n    System.out.println(&quot;Collected.&quot;);\r\n}\r\n```\r\nThe DLL was successfully deleted following this sequence.  It did take a second GC call to take effect:\r\n\r\n    Closed.\r\n    Waiting...\r\n    Waiting...\r\n    Waiting...\r\n    Waiting...\r\n    Waiting...\r\n    Suggesting GC...\r\n    Waiting...\r\n    Suggesting GC...\r\n    Collected.\r\n    Deleted!\r\n\r\n  [1]: https://learn.microsoft.com/en-us/windows/win32/api/libloaderapi/nf-libloaderapi-loadlibraryexw\r\n  [2]: https://stackoverflow.com/a/74843072/1161484\r\n  [3]: https://learn.microsoft.com/en-us/windows/win32/api/libloaderapi/nf-libloaderapi-freelibrary\r\n  [4]: https://stackoverflow.com/a/3461123/1161484\r\n  [5]: https://stackoverflow.com/users/9415272/matthias-bl%c3%a4sing","title":"Cannot delete library loaded with JNA after disposing","body":"<p>I was able to reproduce the problem with your code, but only on Windows.  When reproducible, I was able to successfully delete the file by adding a garbage collection suggestion before the time delay:</p>\n<pre class=\"lang-java prettyprint-override\"><code>if (DLLUtil != null) {\n    DLLUtil = null;\n    NativeLibrary lib = NativeLibrary.getInstance(dllPath);\n    lib.close();\n    System.gc();\n    System.gc();\n    Thread.sleep(3000);\n}\n</code></pre>\n<p>When JNA loads a Windows DLL via <code>Native.loadLibrary()</code>, it internally executes the WinAPI <a href=\"https://learn.microsoft.com/en-us/windows/win32/api/libloaderapi/nf-libloaderapi-loadlibraryexw\" rel=\"nofollow noreferrer\">LoadLibraryExW</a> function.</p>\n<p>Internally the Java instance is stored in a map to be re-used when possible -- however for this to happen, it requires two things to look up the same Java object:</p>\n<ul>\n<li>the DLL Path must be an absolute path</li>\n<li>the options must match. In this case, you would need to pass the classloader as an argument as <a href=\"https://stackoverflow.com/users/9415272/matthias-bl%c3%a4sing\">Matthias Bläsing</a> indicated in <a href=\"https://stackoverflow.com/a/74843072/1161484\">his answer</a>:</li>\n</ul>\n<pre class=\"lang-java prettyprint-override\"><code>// if loaded like this:\nDLLUtil = (ExtDLLTool) Native.loadLibrary(dllPath, ExtDLLTool.class);\n// fetch from cache like this:\nNativeLibrary lib = NativeLibrary.getInstance(dllPath, ExtDLLTool.class.getClassLoader());\nlib.dispose();\n</code></pre>\n<p>This should allow you to delete the file.</p>\n<p>However, in your case, with the relative path, the library is getting unloaded but the old java object isn't getting closed until GC occurs.</p>\n<p>The <code>dispose()</code> (or <code>close()</code> as of 5.12) call in JNA eventually calls the <code>Native.close()</code> method which uses the Windows API <a href=\"https://learn.microsoft.com/en-us/windows/win32/api/libloaderapi/nf-libloaderapi-freelibrary\" rel=\"nofollow noreferrer\">FreeLibrary</a> function. This unloads the DLL from the Process memory, so the advice on the linked question on how to dispose is still accurate in the case that you want to re-load the library. If you're not reloading the library, using <code>dispose()</code> (5.11-) or <code>close()</code> (5.12+) is optional.</p>\n<p>If you must use a relative path, consider this approach using a <code>PhantomReference</code> inspired by <a href=\"https://stackoverflow.com/a/3461123/1161484\">this answer</a> to track the deletion:</p>\n<pre class=\"lang-java prettyprint-override\"><code>if (DLLUtil != null) {\n    // Unload the DLL from process memory\n    // Optional here, as it will be called by a cleaner on GC below\n    NativeLibrary lib = NativeLibrary.getInstance(dllPath);\n    lib.close();\n    System.out.println(&quot;Closed.&quot;);\n\n    // Remove any internal JVM references to the file\n    final ReferenceQueue rq = new ReferenceQueue();\n    final PhantomReference phantom = new PhantomReference(DLLUtil, rq);\n    DLLUtil = null;\n\n    // Poll until GC removes the reference\n    int count = 0;\n    while (rq.poll() == null) {\n        System.out.println(&quot;Waiting...&quot;);\n        Thread.sleep(1000);\n        if (++count &gt; 4) {\n            // After 5 seconds prompt for GC!\n            System.out.println(&quot;Suggesting GC...&quot;);\n            System.gc();\n        }\n    }\n    System.out.println(&quot;Collected.&quot;);\n}\n</code></pre>\n<p>The DLL was successfully deleted following this sequence.  It did take a second GC call to take effect:</p>\n<pre><code>Closed.\nWaiting...\nWaiting...\nWaiting...\nWaiting...\nWaiting...\nSuggesting GC...\nWaiting...\nSuggesting GC...\nCollected.\nDeleted!\n</code></pre>\n"},{"comments":[{"owner":{"account_id":1187908,"reputation":8615,"user_id":1161484,"accept_rate":93,"display_name":"Daniel Widdis"},"score":0,"creation_date":1671383448,"post_id":74843072,"comment_id":132083233,"body_markdown":"My test case still fails to delete the file even with the `getClassLoader()` call.","body":"My test case still fails to delete the file even with the <code>getClassLoader()</code> call."},{"owner":{"account_id":13027886,"reputation":341,"user_id":9415272,"display_name":"Matthias Bl&#228;sing"},"score":0,"creation_date":1671383700,"post_id":74843072,"comment_id":132083273,"body_markdown":"Check with a debugger whether you get the same instance of NativeLibrary, that back(ed) the ExtDLLTool (I used the testlibrary from JNA). You can also place breakpoints on the locations where Native#open is invoked, you should only see a single call.","body":"Check with a debugger whether you get the same instance of NativeLibrary, that back(ed) the ExtDLLTool (I used the testlibrary from JNA). You can also place breakpoints on the locations where Native#open is invoked, you should only see a single call."},{"owner":{"account_id":1187908,"reputation":8615,"user_id":1161484,"accept_rate":93,"display_name":"Daniel Widdis"},"score":0,"creation_date":1671384045,"post_id":74843072,"comment_id":132083330,"body_markdown":"Quick test using the toStrings(): `NativeLibrary.getInstance(dllPath)` and `NativeLibrary.getInstance(dllPath, ExtDLLTool.class.getClassLoader())` both return the same Java object `Native Library &lt;..\\..\\..\\temp\\test.dll@1667235840&gt;`.  And the `ExtDLLTool` string is `Proxy interface to Native Library &lt;..\\..\\..\\temp\\test.dll@1667235840&gt;`","body":"Quick test using the toStrings(): <code>NativeLibrary.getInstance(dllPath)</code> and <code>NativeLibrary.getInstance(dllPath, ExtDLLTool.class.getClassLoader())</code> both return the same Java object <code>Native Library &lt;..\\..\\..\\temp\\test.dll@1667235840&gt;</code>.  And the <code>ExtDLLTool</code> string is <code>Proxy interface to Native Library &lt;..\\..\\..\\temp\\test.dll@1667235840&gt;</code>"},{"owner":{"account_id":13027886,"reputation":341,"user_id":9415272,"display_name":"Matthias Bl&#228;sing"},"score":0,"creation_date":1671384341,"post_id":74843072,"comment_id":132083371,"body_markdown":"The does not help as the same handle is returned. You must use a debugger or `System#identityHashCode`. I can reproduce the problem with this code:\n\n`NativeLibrary lib = NativeLibrary.getInstance(dllPath);\nlib.close();\nFiles.delete(Paths.get(dllPath));\n`\n\nAnd can fix it by moving to:\n\n`NativeLibrary lib = NativeLibrary.getInstance(dllPath, ExtDLLTool.class.getClassLoader());\nlib.close();\nFiles.delete(Paths.get(dllPath));`","body":"The does not help as the same handle is returned. You must use a debugger or <code>System#identityHashCode</code>. I can reproduce the problem with this code:  <code>NativeLibrary lib = NativeLibrary.getInstance(dllPath); lib.close(); Files.delete(Paths.get(dllPath)); </code>  And can fix it by moving to:  <code>NativeLibrary lib = NativeLibrary.getInstance(dllPath, ExtDLLTool.class.getClassLoader()); lib.close(); Files.delete(Paths.get(dllPath));</code>"},{"owner":{"account_id":1187908,"reputation":8615,"user_id":1161484,"accept_rate":93,"display_name":"Daniel Widdis"},"score":0,"creation_date":1671384668,"post_id":74843072,"comment_id":132083422,"body_markdown":"That code is [precisely what I&#39;m using](https://i.stack.imgur.com/ZkYgK.png) that does not change the failure to delete.  Working on setting up debug.","body":"That code is <a href=\"https://i.stack.imgur.com/ZkYgK.png\" rel=\"nofollow noreferrer\">precisely what I&#39;m using</a> that does not change the failure to delete.  Working on setting up debug."},{"owner":{"account_id":1187908,"reputation":8615,"user_id":1161484,"accept_rate":93,"display_name":"Daniel Widdis"},"score":0,"creation_date":1671385558,"post_id":74843072,"comment_id":132083534,"body_markdown":"Debugging indicates even adding the class loader argument as suggested gives me a different internal NativeLibrary object than the one inside `ExtDLLTool`.","body":"Debugging indicates even adding the class loader argument as suggested gives me a different internal NativeLibrary object than the one inside <code>ExtDLLTool</code>."},{"owner":{"account_id":1187908,"reputation":8615,"user_id":1161484,"accept_rate":93,"display_name":"Daniel Widdis"},"score":0,"creation_date":1671386263,"post_id":74843072,"comment_id":132083634,"body_markdown":"Even repeatedly calling `NativeLibrary.getInstance(dllPath, ExtDLLTool.class.getClassLoader());` returns a different object each time (verified with both debugger and `identityHashCode`).  The Keys and Values in the options hash map are identical but the HashMaps themselves are different objects.","body":"Even repeatedly calling <code>NativeLibrary.getInstance(dllPath, ExtDLLTool.class.getClassLoader());</code> returns a different object each time (verified with both debugger and <code>identityHashCode</code>).  The Keys and Values in the options hash map are identical but the HashMaps themselves are different objects."},{"owner":{"account_id":13027886,"reputation":341,"user_id":9415272,"display_name":"Matthias Bl&#228;sing"},"score":0,"creation_date":1671395520,"post_id":74843072,"comment_id":132085203,"body_markdown":"I think I see the difference. You are using a relative path. Indeed, then you&#39;ll never hit the &quot;cache&quot; path. Please try to provide an absolute path as library name.","body":"I think I see the difference. You are using a relative path. Indeed, then you&#39;ll never hit the &quot;cache&quot; path. Please try to provide an absolute path as library name."}],"tags":[],"owner":{"account_id":13027886,"reputation":341,"user_id":9415272,"display_name":"Matthias Bl&#228;sing"},"comment_count":8,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1671399173,"creation_date":1671382863,"answer_id":74843072,"question_id":74772434,"body_markdown":"In the end the problem is, that `Native#open` is called twice and `Native#close` only once. The assumption behind the presented code is, that:\r\n\r\n```java\r\n    NativeLibrary lib = NativeLibrary.getInstance(dllPath);\r\n```\r\n\r\nyields the same `NativeLibrary` instance, that is used by:\r\n\r\n```java\r\n    DLLUtil = (ExtDLLTool) Native.loadLibrary(dllPath, ExtDLLTool.class);\r\n```\r\n\r\nThis assumption does not hold. Indeed `NativeLibrary#load` does use caching and if invoked with the same parameters it will yield only  a single instance. \r\n\r\nThe codepath behind `Native.loadLibrary` passes two options to `Native#loadLibrary`: `calling-convention` and `classloader`. The `calling-convention` is equal to the default calling convention, so can be ignored. It is/would be automatically added in `NativeLibrary#getInstance`. The `classloader` though is not set to a default value and there is the difference. The options are part of the caching key and thus a second instance of the `NativeLibrary` is created and not the first returned.\r\n\r\nTo make it work, the call to `NativeLibrary#getInstance` must pass the correct classloader. If you modify the sample like this:\r\n\r\n```java\r\nimport java.io.File;\r\nimport java.nio.file.Files;\r\nimport java.nio.file.Paths;\r\n\r\nimport com.sun.jna.Library;\r\nimport com.sun.jna.Native;\r\nimport com.sun.jna.NativeLibrary;\r\n\r\nclass Filter {\r\n\r\n    private static ExtDLLTool DLLUtil;\r\n    final private static String dllPath = &quot;./ExternalDownloader_64.dll&quot;;\r\n\r\n    static {\r\n        DLLUtil = (ExtDLLTool) Native.loadLibrary(dllPath, ExtDLLTool.class);\r\n    }\r\n\r\n    public static void main(String[] args) throws Exception{\r\n\r\n        if (DLLUtil != null) {\r\n            DLLUtil = null;\r\n            NativeLibrary lib = NativeLibrary.getInstance(dllPath, ExtDLLTool.class.getClassLoader());\r\n            lib.dispose();\r\n            Thread.sleep(3000);\r\n        }\r\n\r\n        File dllFile = new File(dllPath);\r\n        if(dllFile.exists()){\r\n            Files.delete(Paths.get(dllPath));\r\n            // boolean isDeleted = dllFile.delete();\r\n            if(dllFile.exists()){\r\n                System.out.println(&quot;Unable to delete dll file, since it hold by jvm&quot;);\r\n            }\r\n        }\r\n    }\r\n\r\n    private interface ExtDLLTool extends Library {\r\n        String validateNomination(String dloadProps);\r\n    }\r\n}\r\n```\r\n\r\nit works as expected.\r\n\r\nAfter discussion there is another requirement: The cache path is only hit in a limited number of cases:\r\n\r\n- the library name is the filename of the library (without a prefix)\r\n- the library name is the absolute path to the library\r\n- the library name is the &quot;base&quot; name without any prefixes or suffixes the default library search mechanism adds (on windows &quot;.dll&quot; should be stripped, on linux &quot;lib&quot; prefix and &quot;.so&quot; suffix should be stripped) (UNTESTED!)\r\n\r\nThe TL;DR version: find the absolute path name and use that for interface loading and NativeLibrary loading.","title":"Cannot delete library loaded with JNA after disposing","body":"<p>In the end the problem is, that <code>Native#open</code> is called twice and <code>Native#close</code> only once. The assumption behind the presented code is, that:</p>\n<pre class=\"lang-java prettyprint-override\"><code>    NativeLibrary lib = NativeLibrary.getInstance(dllPath);\n</code></pre>\n<p>yields the same <code>NativeLibrary</code> instance, that is used by:</p>\n<pre class=\"lang-java prettyprint-override\"><code>    DLLUtil = (ExtDLLTool) Native.loadLibrary(dllPath, ExtDLLTool.class);\n</code></pre>\n<p>This assumption does not hold. Indeed <code>NativeLibrary#load</code> does use caching and if invoked with the same parameters it will yield only  a single instance.</p>\n<p>The codepath behind <code>Native.loadLibrary</code> passes two options to <code>Native#loadLibrary</code>: <code>calling-convention</code> and <code>classloader</code>. The <code>calling-convention</code> is equal to the default calling convention, so can be ignored. It is/would be automatically added in <code>NativeLibrary#getInstance</code>. The <code>classloader</code> though is not set to a default value and there is the difference. The options are part of the caching key and thus a second instance of the <code>NativeLibrary</code> is created and not the first returned.</p>\n<p>To make it work, the call to <code>NativeLibrary#getInstance</code> must pass the correct classloader. If you modify the sample like this:</p>\n<pre class=\"lang-java prettyprint-override\"><code>import java.io.File;\nimport java.nio.file.Files;\nimport java.nio.file.Paths;\n\nimport com.sun.jna.Library;\nimport com.sun.jna.Native;\nimport com.sun.jna.NativeLibrary;\n\nclass Filter {\n\n    private static ExtDLLTool DLLUtil;\n    final private static String dllPath = &quot;./ExternalDownloader_64.dll&quot;;\n\n    static {\n        DLLUtil = (ExtDLLTool) Native.loadLibrary(dllPath, ExtDLLTool.class);\n    }\n\n    public static void main(String[] args) throws Exception{\n\n        if (DLLUtil != null) {\n            DLLUtil = null;\n            NativeLibrary lib = NativeLibrary.getInstance(dllPath, ExtDLLTool.class.getClassLoader());\n            lib.dispose();\n            Thread.sleep(3000);\n        }\n\n        File dllFile = new File(dllPath);\n        if(dllFile.exists()){\n            Files.delete(Paths.get(dllPath));\n            // boolean isDeleted = dllFile.delete();\n            if(dllFile.exists()){\n                System.out.println(&quot;Unable to delete dll file, since it hold by jvm&quot;);\n            }\n        }\n    }\n\n    private interface ExtDLLTool extends Library {\n        String validateNomination(String dloadProps);\n    }\n}\n</code></pre>\n<p>it works as expected.</p>\n<p>After discussion there is another requirement: The cache path is only hit in a limited number of cases:</p>\n<ul>\n<li>the library name is the filename of the library (without a prefix)</li>\n<li>the library name is the absolute path to the library</li>\n<li>the library name is the &quot;base&quot; name without any prefixes or suffixes the default library search mechanism adds (on windows &quot;.dll&quot; should be stripped, on linux &quot;lib&quot; prefix and &quot;.so&quot; suffix should be stripped) (UNTESTED!)</li>\n</ul>\n<p>The TL;DR version: find the absolute path name and use that for interface loading and NativeLibrary loading.</p>\n"}],"owner":{"account_id":17428960,"reputation":13,"user_id":12633325,"display_name":"Naveen Rathnam"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":326,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"accepted_answer_id":74829691,"answer_count":2,"score":0,"last_activity_date":1672938398,"creation_date":1670854529,"question_id":74772434,"body_markdown":"I am trying to delete a DLL which has been loaded into JNA and later disposed. I have tried all the solutions described in the answer to this question, but they are not working: https://stackoverflow.com/questions/41056322/how-to-dispose-library-loaded-with-jna/41090490#41090490\r\n\r\nHere is code I&#39;ve tried without a time delay:\r\n```java\r\nimport java.io.File;\r\n\r\nimport com.sun.jna.Library;\r\nimport com.sun.jna.Native;\r\nimport com.sun.jna.NativeLibrary;\r\n\r\nclass Filter {\r\n\r\n    private static ExtDLLTool DLLUtil;\r\n    final private static String dllPath = &quot;./ExternalDownloader_64.dll&quot;; \r\n\r\n    static {\r\n        DLLUtil = (ExtDLLTool) Native.loadLibrary(dllPath, ExtDLLTool.class);\r\n    }\r\n\r\n    public static void main(String[] args) {\r\n\r\n        if (DLLUtil != null) {\r\n            DLLUtil = null;\r\n            NativeLibrary lib = NativeLibrary.getInstance(dllPath);\r\n            lib.dispose();\r\n        }\r\n\r\n        File dllFile = new File(dllPath);\r\n        if(dllFile.exists()){\r\n            boolean isDeleted = dllFile.delete();\r\n            if(!isDeleted){\r\n                System.out.println(&quot;Unable to delete dll file, since it hold by jvm&quot;);\r\n            }\r\n        }\r\n\r\n    }\r\n\r\n    private interface ExtDLLTool extends Library {\r\n        String validateNomination(String dloadProps);\r\n    }\r\n}\r\n```\r\n\r\nI added a time delay to give the native code time to release the handle:\r\n```java\r\nimport java.io.File;\r\nimport java.nio.file.Files;\r\nimport java.nio.file.Paths;\r\n\r\nimport com.sun.jna.Library;\r\nimport com.sun.jna.Native;\r\nimport com.sun.jna.NativeLibrary;\r\n\r\nclass Filter {\r\n\r\n    private static ExtDLLTool DLLUtil;\r\n    final private static String dllPath = &quot;./ExternalDownloader_64.dll&quot;;\r\n\r\n    static {\r\n        DLLUtil = (ExtDLLTool) Native.loadLibrary(dllPath, ExtDLLTool.class);\r\n    }\r\n\r\n    public static void main(String[] args) throws Exception{\r\n\r\n        if (DLLUtil != null) {\r\n            DLLUtil = null;\r\n            NativeLibrary lib = NativeLibrary.getInstance(dllPath);\r\n            lib.dispose();\r\n            Thread.sleep(3000);\r\n        }\r\n\r\n        File dllFile = new File(dllPath);\r\n        if(dllFile.exists()){\r\n            Files.delete(Paths.get(dllPath));\r\n            // boolean isDeleted = dllFile.delete();\r\n            if(dllFile.exists()){\r\n                System.out.println(&quot;Unable to delete dll file, since it hold by jvm&quot;);\r\n            }\r\n        }\r\n    }\r\n\r\n    private interface ExtDLLTool extends Library {\r\n        String validateNomination(String dloadProps);\r\n    }\r\n}\r\n```\r\nThis code results in an exception implying the JVM has not released the file.\r\n&gt; Exception in thread &quot;main&quot; java.nio.file.AccessDeniedException: .\\ExternalDownloader_64.dll at sun.nio.fs.WindowsException.translateToIOException(WindowsException.java:83) at sun.nio.fs.WindowsException.rethrowAsIOException(WindowsException.java:97) at sun.nio.fs.WindowsException.rethrowAsIOException(WindowsException.java:102) at sun.nio.fs.WindowsFileSystemProvider.implDelete(WindowsFileSystemProvider.java:269)\r\n","title":"Cannot delete library loaded with JNA after disposing","body":"<p>I am trying to delete a DLL which has been loaded into JNA and later disposed. I have tried all the solutions described in the answer to this question, but they are not working: <a href=\"https://stackoverflow.com/questions/41056322/how-to-dispose-library-loaded-with-jna/41090490#41090490\">How to dispose library loaded with JNA</a></p>\n<p>Here is code I've tried without a time delay:</p>\n<pre class=\"lang-java prettyprint-override\"><code>import java.io.File;\n\nimport com.sun.jna.Library;\nimport com.sun.jna.Native;\nimport com.sun.jna.NativeLibrary;\n\nclass Filter {\n\n    private static ExtDLLTool DLLUtil;\n    final private static String dllPath = &quot;./ExternalDownloader_64.dll&quot;; \n\n    static {\n        DLLUtil = (ExtDLLTool) Native.loadLibrary(dllPath, ExtDLLTool.class);\n    }\n\n    public static void main(String[] args) {\n\n        if (DLLUtil != null) {\n            DLLUtil = null;\n            NativeLibrary lib = NativeLibrary.getInstance(dllPath);\n            lib.dispose();\n        }\n\n        File dllFile = new File(dllPath);\n        if(dllFile.exists()){\n            boolean isDeleted = dllFile.delete();\n            if(!isDeleted){\n                System.out.println(&quot;Unable to delete dll file, since it hold by jvm&quot;);\n            }\n        }\n\n    }\n\n    private interface ExtDLLTool extends Library {\n        String validateNomination(String dloadProps);\n    }\n}\n</code></pre>\n<p>I added a time delay to give the native code time to release the handle:</p>\n<pre class=\"lang-java prettyprint-override\"><code>import java.io.File;\nimport java.nio.file.Files;\nimport java.nio.file.Paths;\n\nimport com.sun.jna.Library;\nimport com.sun.jna.Native;\nimport com.sun.jna.NativeLibrary;\n\nclass Filter {\n\n    private static ExtDLLTool DLLUtil;\n    final private static String dllPath = &quot;./ExternalDownloader_64.dll&quot;;\n\n    static {\n        DLLUtil = (ExtDLLTool) Native.loadLibrary(dllPath, ExtDLLTool.class);\n    }\n\n    public static void main(String[] args) throws Exception{\n\n        if (DLLUtil != null) {\n            DLLUtil = null;\n            NativeLibrary lib = NativeLibrary.getInstance(dllPath);\n            lib.dispose();\n            Thread.sleep(3000);\n        }\n\n        File dllFile = new File(dllPath);\n        if(dllFile.exists()){\n            Files.delete(Paths.get(dllPath));\n            // boolean isDeleted = dllFile.delete();\n            if(dllFile.exists()){\n                System.out.println(&quot;Unable to delete dll file, since it hold by jvm&quot;);\n            }\n        }\n    }\n\n    private interface ExtDLLTool extends Library {\n        String validateNomination(String dloadProps);\n    }\n}\n</code></pre>\n<p>This code results in an exception implying the JVM has not released the file.</p>\n<blockquote>\n<p>Exception in thread &quot;main&quot; java.nio.file.AccessDeniedException: .\\ExternalDownloader_64.dll at sun.nio.fs.WindowsException.translateToIOException(WindowsException.java:83) at sun.nio.fs.WindowsException.rethrowAsIOException(WindowsException.java:97) at sun.nio.fs.WindowsException.rethrowAsIOException(WindowsException.java:102) at sun.nio.fs.WindowsFileSystemProvider.implDelete(WindowsFileSystemProvider.java:269)</p>\n</blockquote>\n"},{"tags":["java","delay"],"comments":[{"owner":{"account_id":2139538,"reputation":42521,"user_id":1898563,"accept_rate":78,"display_name":"Michael"},"score":4,"creation_date":1672915218,"post_id":75016807,"comment_id":132382290,"body_markdown":"The schedule method doesn&#39;t know that the 2nd action should happen 60000 after the first action, and the 3rd should happen 60000 after that. It just knows that you want each action deferred 60000 from when it&#39;s called, and all `printFirst`s are called at the same time. You could add an integer parameter to `printFirst` and call printFirst(1), then 2, then 3. Change the delay to `60000 * myIntParam`.","body":"The schedule method doesn&#39;t know that the 2nd action should happen 60000 after the first action, and the 3rd should happen 60000 after that. It just knows that you want each action deferred 60000 from when it&#39;s called, and all <code>printFirst</code>s are called at the same time. You could add an integer parameter to <code>printFirst</code> and call printFirst(1), then 2, then 3. Change the delay to <code>60000 * myIntParam</code>."},{"owner":{"account_id":14736775,"reputation":53,"user_id":10642567,"display_name":"Sangmin Kim"},"score":1,"creation_date":1672917143,"post_id":75016807,"comment_id":132382939,"body_markdown":"I was trying to do this to create a delay between each email that is being sent @Michael","body":"I was trying to do this to create a delay between each email that is being sent @Michael"},{"owner":{"account_id":7547772,"reputation":8593,"user_id":5730279,"display_name":"hc_dev"},"score":1,"creation_date":1672933700,"post_id":75016807,"comment_id":132389051,"body_markdown":"@SangminKim sorry, I somehow was confused by the separate code-blocks. Thanks for guiding me, edited to have them in one.","body":"@SangminKim sorry, I somehow was confused by the separate code-blocks. Thanks for guiding me, edited to have them in one."}],"answers":[{"tags":[],"owner":{"account_id":26855967,"reputation":2351,"user_id":20440272,"display_name":"Sohaib Ahmed"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1672917814,"creation_date":1672917814,"answer_id":75017682,"question_id":75016807,"body_markdown":"While calling function, you can set the number of seconds as a parameter\r\n\r\n    System.out.println(ts() + &quot; Zero&quot;);\r\n    printFirst(60000);\r\n    printFirst(12000);\r\n    printFirst(18000);\r\n    System.out.println(ts() + &quot; Second&quot;);\r\n    System.out.println(ts() + &quot; Third&quot;);\r\n    System.out.println(ts() + &quot; Fourth&quot;);\r\n\r\nIn your function,\r\n\r\n    static void printFirst(long time) {\r\n      new java.util.Timer().schedule(\r\n        new java.util.TimerTask() {\r\n          public void run() {\r\n            System.out.println(ts() + &quot; First&quot;);\r\n          }\r\n        },time\r\n      );\r\n    }","title":"How to delay asynchronously when a method is called consecutively?","body":"<p>While calling function, you can set the number of seconds as a parameter</p>\n<pre><code>System.out.println(ts() + &quot; Zero&quot;);\nprintFirst(60000);\nprintFirst(12000);\nprintFirst(18000);\nSystem.out.println(ts() + &quot; Second&quot;);\nSystem.out.println(ts() + &quot; Third&quot;);\nSystem.out.println(ts() + &quot; Fourth&quot;);\n</code></pre>\n<p>In your function,</p>\n<pre><code>static void printFirst(long time) {\n  new java.util.Timer().schedule(\n    new java.util.TimerTask() {\n      public void run() {\n        System.out.println(ts() + &quot; First&quot;);\n      }\n    },time\n  );\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":6914700,"reputation":4797,"user_id":5309419,"display_name":"DmitryArc"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1672924383,"creation_date":1672924383,"answer_id":75018963,"question_id":75016807,"body_markdown":"As an option you can set up your timer for periodic execution and limit the number of runs\r\n``` java\r\nstatic void printFirst(long delay, int numberOfIterations) {\r\n\tnew java.util.Timer().schedule(\r\n\t\tnew java.util.TimerTask() {\r\n\t\t\tprivate int counter = 0;\r\n\t\t\tpublic void run() {\r\n\t\t\t\tSystem.out.println(ts() + &quot; First&quot;);\r\n\r\n\t\t\t\tif(++counter == numberOfIterations) {\r\n\t\t\t\t\tthis.cancel();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}, delay, delay\r\n\t);\r\n}\r\n```\r\nAnd then just run it with one command `printFirst(60000, 3);`","title":"How to delay asynchronously when a method is called consecutively?","body":"<p>As an option you can set up your timer for periodic execution and limit the number of runs</p>\n<pre class=\"lang-java prettyprint-override\"><code>static void printFirst(long delay, int numberOfIterations) {\n    new java.util.Timer().schedule(\n        new java.util.TimerTask() {\n            private int counter = 0;\n            public void run() {\n                System.out.println(ts() + &quot; First&quot;);\n\n                if(++counter == numberOfIterations) {\n                    this.cancel();\n                }\n            }\n        }, delay, delay\n    );\n}\n</code></pre>\n<p>And then just run it with one command <code>printFirst(60000, 3);</code></p>\n"},{"comments":[{"owner":{"account_id":14736775,"reputation":53,"user_id":10642567,"display_name":"Sangmin Kim"},"score":2,"creation_date":1672938336,"post_id":75021492,"comment_id":132390851,"body_markdown":"This is great! I just do think that it lacks the es.shutdown() after the print line to free up resources","body":"This is great! I just do think that it lacks the es.shutdown() after the print line to free up resources"},{"owner":{"account_id":2139538,"reputation":42521,"user_id":1898563,"accept_rate":78,"display_name":"Michael"},"score":1,"creation_date":1672948818,"post_id":75021492,"comment_id":132394141,"body_markdown":"`TimeUnit.MILLISECONDS.sleep(60000);` Uhh, why not `TimeUnit.MINUTES.sleep(1)` ?","body":"<code>TimeUnit.MILLISECONDS.sleep(60000);</code> Uhh, why not <code>TimeUnit.MINUTES.sleep(1)</code> ?"}],"tags":[],"owner":{"account_id":16777244,"reputation":56,"user_id":20938349,"display_name":"Raigormator"},"comment_count":2,"down_vote_count":0,"up_vote_count":4,"is_accepted":true,"score":4,"last_activity_date":1672935795,"creation_date":1672935795,"answer_id":75021492,"question_id":75016807,"body_markdown":"We can achieve the expected results using ExecutorService class with the newSingleThreadExecutor() method. See the code below.\r\n\r\n    static ExecutorService es = Executors.newSingleThreadExecutor();\r\n\r\n    static void printFirst() {\r\n        es.submit(() -&gt; {\r\n            try {\r\n                TimeUnit.MILLISECONDS.sleep(60000);\r\n                System.out.println(ts() + &quot; First&quot;);\r\n            } catch (InterruptedException e) {\r\n                e.printStackTrace();\r\n            }\r\n        });\r\n    }\r\n\r\nThe main method is still the same.\r\n\r\n    System.out.println(ts() + &quot; Zero&quot;);\r\n    printFirst();\r\n    printFirst();\r\n    printFirst();\r\n    System.out.println(ts() + &quot; Second&quot;);\r\n    System.out.println(ts() + &quot; Third&quot;);\r\n    System.out.println(ts() + &quot; Fourth&quot;);\r\n\r\nWhen run, the results are:\r\n\r\n    2023-01-06 00:05:45.72 Zero\r\n    2023-01-06 00:05:45.763 Second\r\n    2023-01-06 00:05:45.763 Third\r\n    2023-01-06 00:05:45.763 Fourth\r\n    2023-01-06 00:06:45.776 First\r\n    2023-01-06 00:07:45.782 First\r\n    2023-01-06 00:08:45.784 First","title":"How to delay asynchronously when a method is called consecutively?","body":"<p>We can achieve the expected results using ExecutorService class with the newSingleThreadExecutor() method. See the code below.</p>\n<pre><code>static ExecutorService es = Executors.newSingleThreadExecutor();\n\nstatic void printFirst() {\n    es.submit(() -&gt; {\n        try {\n            TimeUnit.MILLISECONDS.sleep(60000);\n            System.out.println(ts() + &quot; First&quot;);\n        } catch (InterruptedException e) {\n            e.printStackTrace();\n        }\n    });\n}\n</code></pre>\n<p>The main method is still the same.</p>\n<pre><code>System.out.println(ts() + &quot; Zero&quot;);\nprintFirst();\nprintFirst();\nprintFirst();\nSystem.out.println(ts() + &quot; Second&quot;);\nSystem.out.println(ts() + &quot; Third&quot;);\nSystem.out.println(ts() + &quot; Fourth&quot;);\n</code></pre>\n<p>When run, the results are:</p>\n<pre><code>2023-01-06 00:05:45.72 Zero\n2023-01-06 00:05:45.763 Second\n2023-01-06 00:05:45.763 Third\n2023-01-06 00:05:45.763 Fourth\n2023-01-06 00:06:45.776 First\n2023-01-06 00:07:45.782 First\n2023-01-06 00:08:45.784 First\n</code></pre>\n"},{"tags":[],"owner":{"account_id":7547772,"reputation":8593,"user_id":5730279,"display_name":"hc_dev"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1672937581,"creation_date":1672936501,"answer_id":75021618,"question_id":75016807,"body_markdown":"### Issue\r\nThe delay in your [`Timer.schedule(TimerTask task, long initialDelay)`](https://docs.oracle.com/javase/7/docs/api/java/util/Timer.html#schedule(java.util.TimerTask,%20long)) is just for the **initial** delay, time between scheduled and start of task. See parameter in docs:\r\n&gt; `delay` - delay in milliseconds before task is to be executed.\r\n\r\n### Solution\r\nFor your intent - as **interval** - you need the overloaded sister-method [`schedule(TimerTask task, long delay, long period)`](https://docs.oracle.com/javase/7/docs/api/java/util/Timer.html#schedule(java.util.TimerTask,%20long,%20long)) passing the 1 minute interval as third argument to parameter named `period`:\r\n\r\n&gt; Schedules the specified task for repeated fixed-delay execution, beginning after the specified delay. Subsequent executions take place at **approximately regular intervals separated by the specified `period`**.\r\n\r\n```\r\nimport java.util.Timer;\r\nimport java.util.TimerTask;\r\n\r\n// define the task, here in a method on demand\r\npublic static TimerTask createPrintTask(String text) {\r\n   return new TimerTask() {\r\n      public void run() {\r\n        System.out.println(ts() + text);  // not sure how ts() is defined\r\n      }\r\n    };\r\n}\r\n\r\n// define print-method using Timer with interval and zero delay\r\nstatic void printScheduledWithInterval(String text, int intervalMillis) {\r\n  var initialDelayMillis = 0; // start immediately (first after 0 seconds)\r\n  new Timer().schedule(createPrintTask(text), initialDelayMillis, intervalMillis);\r\n}\r\n\r\n// MAIN\r\nSystem.out.println(ts() + &quot; Zero&quot;);\r\n\r\n// use to start the task asynchronously (it will continue to print every interval until canceled)\r\nprintScheduledWithInterval(&quot; First&quot;, 60_000);  // 1 minute interval\r\n\r\nSystem.out.println(ts() + &quot; Second&quot;);\r\nSystem.out.println(ts() + &quot; Third&quot;);\r\nSystem.out.println(ts() + &quot; Fourth&quot;);\r\n```\r\nNote: In you code there was `printFirst` called 3 times. Presumably to have 3 different tasks started or to have 3 lines printed. \r\n\r\n### When does the scheduling of task end?\r\nThe `printScheduledWithInterval` here, rather means schedule a print-job to be executed repeatedly on a fixed-interval.\r\n\r\nSince there are no requirements about number of printed lines or max-execution count, the timer will continuously start new tasks.","title":"How to delay asynchronously when a method is called consecutively?","body":"<h3>Issue</h3>\n<p>The delay in your <a href=\"https://docs.oracle.com/javase/7/docs/api/java/util/Timer.html#schedule(java.util.TimerTask,%20long)\" rel=\"nofollow noreferrer\"><code>Timer.schedule(TimerTask task, long initialDelay)</code></a> is just for the <strong>initial</strong> delay, time between scheduled and start of task. See parameter in docs:</p>\n<blockquote>\n<p><code>delay</code> - delay in milliseconds before task is to be executed.</p>\n</blockquote>\n<h3>Solution</h3>\n<p>For your intent - as <strong>interval</strong> - you need the overloaded sister-method <a href=\"https://docs.oracle.com/javase/7/docs/api/java/util/Timer.html#schedule(java.util.TimerTask,%20long,%20long)\" rel=\"nofollow noreferrer\"><code>schedule(TimerTask task, long delay, long period)</code></a> passing the 1 minute interval as third argument to parameter named <code>period</code>:</p>\n<blockquote>\n<p>Schedules the specified task for repeated fixed-delay execution, beginning after the specified delay. Subsequent executions take place at <strong>approximately regular intervals separated by the specified <code>period</code></strong>.</p>\n</blockquote>\n<pre><code>import java.util.Timer;\nimport java.util.TimerTask;\n\n// define the task, here in a method on demand\npublic static TimerTask createPrintTask(String text) {\n   return new TimerTask() {\n      public void run() {\n        System.out.println(ts() + text);  // not sure how ts() is defined\n      }\n    };\n}\n\n// define print-method using Timer with interval and zero delay\nstatic void printScheduledWithInterval(String text, int intervalMillis) {\n  var initialDelayMillis = 0; // start immediately (first after 0 seconds)\n  new Timer().schedule(createPrintTask(text), initialDelayMillis, intervalMillis);\n}\n\n// MAIN\nSystem.out.println(ts() + &quot; Zero&quot;);\n\n// use to start the task asynchronously (it will continue to print every interval until canceled)\nprintScheduledWithInterval(&quot; First&quot;, 60_000);  // 1 minute interval\n\nSystem.out.println(ts() + &quot; Second&quot;);\nSystem.out.println(ts() + &quot; Third&quot;);\nSystem.out.println(ts() + &quot; Fourth&quot;);\n</code></pre>\n<p>Note: In you code there was <code>printFirst</code> called 3 times. Presumably to have 3 different tasks started or to have 3 lines printed.</p>\n<h3>When does the scheduling of task end?</h3>\n<p>The <code>printScheduledWithInterval</code> here, rather means schedule a print-job to be executed repeatedly on a fixed-interval.</p>\n<p>Since there are no requirements about number of printed lines or max-execution count, the timer will continuously start new tasks.</p>\n"}],"owner":{"account_id":14736775,"reputation":53,"user_id":10642567,"display_name":"Sangmin Kim"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":531,"favorite_count":0,"down_vote_count":0,"up_vote_count":5,"accepted_answer_id":75021492,"answer_count":4,"score":5,"last_activity_date":1672937581,"creation_date":1672913398,"question_id":75016807,"body_markdown":"I want to have a delay of 1 minute before the `printFirst()` method is called without affecting the main thread.\r\n\r\n### Code\r\nI tried\r\n```java\r\n// define delaying print-method using Timer\r\nstatic void printFirst() {\r\n  new java.util.Timer().schedule(\r\n    new java.util.TimerTask() {\r\n      public void run() {\r\n        System.out.println(ts() + &quot; First&quot;);\r\n      }\r\n    },60000\r\n  );\r\n}\r\n\r\n// main to run\r\nSystem.out.println(ts() + &quot; Zero&quot;);\r\nprintFirst();\r\nprintFirst();\r\nprintFirst();\r\nSystem.out.println(ts() + &quot; Second&quot;);\r\nSystem.out.println(ts() + &quot; Third&quot;);\r\nSystem.out.println(ts() + &quot; Fourth&quot;);\r\n```\r\n### Actual Output\r\nbut the output was\r\n```\r\nTimestamp: 2023-01-05 17:40:43.664 Zero\r\nTimestamp: 2023-01-05 17:40:43.666 Second\r\nTimestamp: 2023-01-05 17:40:43.667 Third\r\nTimestamp: 2023-01-05 17:40:43.667 Fourth\r\nTimestamp: 2023-01-05 17:41:13.681 First\r\nTimestamp: 2023-01-05 17:41:13.681 First\r\nTimestamp: 2023-01-05 17:41:13.681 First\r\n```\r\n### Expected\r\nI was expecting an interval of 1 min between the 3 lines ending with &quot;First&quot;.\r\n```\r\nTimestamp: 2023-01-05 17:40:43.664 Zero\r\nTimestamp: 2023-01-05 17:40:43.666 Second\r\nTimestamp: 2023-01-05 17:40:43.667 Third\r\nTimestamp: 2023-01-05 17:40:43.667 Fourth\r\nTimestamp: 2023-01-05 17:41:43.667 First\r\nTimestamp: 2023-01-05 17:42:43.667 First\r\nTimestamp: 2023-01-05 17:43:43.667 First\r\n```","title":"How to delay asynchronously when a method is called consecutively?","body":"<p>I want to have a delay of 1 minute before the <code>printFirst()</code> method is called without affecting the main thread.</p>\n<h3>Code</h3>\n<p>I tried</p>\n<pre class=\"lang-java prettyprint-override\"><code>// define delaying print-method using Timer\nstatic void printFirst() {\n  new java.util.Timer().schedule(\n    new java.util.TimerTask() {\n      public void run() {\n        System.out.println(ts() + &quot; First&quot;);\n      }\n    },60000\n  );\n}\n\n// main to run\nSystem.out.println(ts() + &quot; Zero&quot;);\nprintFirst();\nprintFirst();\nprintFirst();\nSystem.out.println(ts() + &quot; Second&quot;);\nSystem.out.println(ts() + &quot; Third&quot;);\nSystem.out.println(ts() + &quot; Fourth&quot;);\n</code></pre>\n<h3>Actual Output</h3>\n<p>but the output was</p>\n<pre><code>Timestamp: 2023-01-05 17:40:43.664 Zero\nTimestamp: 2023-01-05 17:40:43.666 Second\nTimestamp: 2023-01-05 17:40:43.667 Third\nTimestamp: 2023-01-05 17:40:43.667 Fourth\nTimestamp: 2023-01-05 17:41:13.681 First\nTimestamp: 2023-01-05 17:41:13.681 First\nTimestamp: 2023-01-05 17:41:13.681 First\n</code></pre>\n<h3>Expected</h3>\n<p>I was expecting an interval of 1 min between the 3 lines ending with &quot;First&quot;.</p>\n<pre><code>Timestamp: 2023-01-05 17:40:43.664 Zero\nTimestamp: 2023-01-05 17:40:43.666 Second\nTimestamp: 2023-01-05 17:40:43.667 Third\nTimestamp: 2023-01-05 17:40:43.667 Fourth\nTimestamp: 2023-01-05 17:41:43.667 First\nTimestamp: 2023-01-05 17:42:43.667 First\nTimestamp: 2023-01-05 17:43:43.667 First\n</code></pre>\n"},{"tags":["java","list","jdbc"],"comments":[{"owner":{"account_id":1853886,"reputation":210617,"user_id":1679863,"accept_rate":77,"display_name":"Rohit Jain"},"score":2,"creation_date":1350903254,"post_id":13009911,"comment_id":17653803,"body_markdown":"Yes its possible. But what have your tried?","body":"Yes its possible. But what have your tried?"},{"owner":{"account_id":183279,"reputation":168313,"user_id":418556,"accept_rate":98,"display_name":"Andrew Thompson"},"score":0,"creation_date":1350903323,"post_id":13009911,"comment_id":17653833,"body_markdown":"1) [What have you tried?](http://www.whathaveyoutried.com/) 2) *&quot;add to my dto.&quot;*  What is a &#39;DTO&#39;?","body":"1) <a href=\"http://www.whathaveyoutried.com/\" rel=\"nofollow noreferrer\">What have you tried?</a> 2) <i>&quot;add to my dto.&quot;</i>  What is a &#39;DTO&#39;?"},{"owner":{"account_id":456582,"reputation":10927,"user_id":855421,"accept_rate":78,"display_name":"Lews Therin"},"score":1,"creation_date":1350903391,"post_id":13009911,"comment_id":17653868,"body_markdown":"@AndrewThompson Data transfer object.. but I&#39;m guessing you knew that? :P","body":"@AndrewThompson Data transfer object.. but I&#39;m guessing you knew that? :P"},{"owner":{"account_id":183279,"reputation":168313,"user_id":418556,"accept_rate":98,"display_name":"Andrew Thompson"},"score":0,"creation_date":1350903488,"post_id":13009911,"comment_id":17653909,"body_markdown":"@LewsTherin  No I honestly didn&#39;t, and was too plum lazy to search on it. :P  Thanks for the info.  :)","body":"@LewsTherin  No I honestly didn&#39;t, and was too plum lazy to search on it. :P  Thanks for the info.  :)"}],"answers":[{"tags":[],"owner":{"account_id":7450,"reputation":269220,"user_id":12960,"display_name":"Brian Agnew"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1350905700,"creation_date":1350903315,"answer_id":13009950,"question_id":13009911,"body_markdown":"It is. What have you tried ? \r\n\r\nTo access the database, you need to [use JDBC][1] and execute a query, giving you a `ResultSet`.\r\n\r\nI would create an class called `FullName` with 2 String fields `name` and `surname`. Just populate these in a loop using \r\n\r\n    rs.getString(&quot;NAME&quot;);  // column name\r\n    rs.getString(&quot;SURNAME&quot;);\r\n\r\ne.g.\r\n\r\n    List&lt;FullName&gt; fullnames = new ArrayList&lt;FullName&gt;();\r\n    while (rs.next()) {\r\n        fullnames.add(new FullName(rs));\r\n    }\r\n\r\nNote that I&#39;m populating the object via the `ResultSet` object directly. You may choose instead to implement a constructor taking the 2 name fields.\r\n\r\nNote also that I&#39;m creating a `Fullname` object. So the firstname/surname are kept separate and you have the freedom to add initials etc. later. You may prefer to rename this `Person` and that will give you the freedom to add additional attributes going forwards.\r\n\r\n\r\n  [1]: http://docs.oracle.com/javase/tutorial/jdbc/basics/index.html","title":"Resultset to list","body":"<p>It is. What have you tried ? </p>\n\n<p>To access the database, you need to <a href=\"http://docs.oracle.com/javase/tutorial/jdbc/basics/index.html\" rel=\"nofollow\">use JDBC</a> and execute a query, giving you a <code>ResultSet</code>.</p>\n\n<p>I would create an class called <code>FullName</code> with 2 String fields <code>name</code> and <code>surname</code>. Just populate these in a loop using </p>\n\n<pre><code>rs.getString(\"NAME\");  // column name\nrs.getString(\"SURNAME\");\n</code></pre>\n\n<p>e.g.</p>\n\n<pre><code>List&lt;FullName&gt; fullnames = new ArrayList&lt;FullName&gt;();\nwhile (rs.next()) {\n    fullnames.add(new FullName(rs));\n}\n</code></pre>\n\n<p>Note that I'm populating the object via the <code>ResultSet</code> object directly. You may choose instead to implement a constructor taking the 2 name fields.</p>\n\n<p>Note also that I'm creating a <code>Fullname</code> object. So the firstname/surname are kept separate and you have the freedom to add initials etc. later. You may prefer to rename this <code>Person</code> and that will give you the freedom to add additional attributes going forwards.</p>\n"},{"comments":[{"owner":{"account_id":1956305,"reputation":101,"user_id":1759247,"accept_rate":17,"display_name":"user1759247"},"score":0,"creation_date":1350905036,"post_id":13010010,"comment_id":17654565,"body_markdown":"What i must do is read 2 columns from a table called CUSTOMER.\nthe column names are NAME and SURNAME.\ni must then store this information in my DTO.\n\nThen from my main class i must write the names and surnames to a file in this format:  \n\nRohit Jain | Brain Agnew | Andrew Thompson\n\nAnd im still new to java so have no idea how to do this, at the moment it writes to file but like this:  \n\nRohit, Brain, Andrew | Jain, Agnew, Thompson\n\nHow do i resolve this?","body":"What i must do is read 2 columns from a table called CUSTOMER. the column names are NAME and SURNAME. i must then store this information in my DTO.  Then from my main class i must write the names and surnames to a file in this format:    Rohit Jain | Brain Agnew | Andrew Thompson  And im still new to java so have no idea how to do this, at the moment it writes to file but like this:    Rohit, Brain, Andrew | Jain, Agnew, Thompson  How do i resolve this?"},{"owner":{"account_id":1853886,"reputation":210617,"user_id":1679863,"accept_rate":77,"display_name":"Rohit Jain"},"score":0,"creation_date":1350905137,"post_id":13010010,"comment_id":17654618,"body_markdown":"@user1759247 As I said. Create another DTO - `FullName`, which contains two fields - `name` and `surname`. Now, for every ResultSet, you need to create an instance of your `FullName` DTO, and add it to the `List`. And your List will be declared as : - `List&lt;FullName&gt;`","body":"@user1759247 As I said. Create another DTO - <code>FullName</code>, which contains two fields - <code>name</code> and <code>surname</code>. Now, for every ResultSet, you need to create an instance of your <code>FullName</code> DTO, and add it to the <code>List</code>. And your List will be declared as : - <code>List&lt;FullName&gt;</code>"},{"owner":{"account_id":1853886,"reputation":210617,"user_id":1679863,"accept_rate":77,"display_name":"Rohit Jain"},"score":0,"creation_date":1350905287,"post_id":13010010,"comment_id":17654675,"body_markdown":"@user1759247 And then when you fetch data from your `List`, use it like: - `list.get(0).getName() + &quot; &quot; + list.get(0).getSurname()`","body":"@user1759247 And then when you fetch data from your <code>List</code>, use it like: - <code>list.get(0).getName() + &quot; &quot; + list.get(0).getSurname()</code>"},{"owner":{"account_id":1956305,"reputation":101,"user_id":1759247,"accept_rate":17,"display_name":"user1759247"},"score":0,"creation_date":1350909678,"post_id":13010010,"comment_id":17656735,"body_markdown":"got it working, but it now displays as Rohit Jain, Andrew Thompson etc, how can i replace , with |?\n\nThank you / Kind Regards","body":"got it working, but it now displays as Rohit Jain, Andrew Thompson etc, how can i replace , with |?  Thank you / Kind Regards"},{"owner":{"account_id":1853886,"reputation":210617,"user_id":1679863,"accept_rate":77,"display_name":"Rohit Jain"},"score":0,"creation_date":1350909691,"post_id":13010010,"comment_id":17656741,"body_markdown":"@user1759247. Also, you can remove your duplicate comment from above. You might have mistakenly duplicated them.","body":"@user1759247. Also, you can remove your duplicate comment from above. You might have mistakenly duplicated them."},{"owner":{"account_id":1853886,"reputation":210617,"user_id":1679863,"accept_rate":77,"display_name":"Rohit Jain"},"score":0,"creation_date":1350909728,"post_id":13010010,"comment_id":17656755,"body_markdown":"@user1759247. How are you displaying it?","body":"@user1759247. How are you displaying it?"}],"tags":[],"owner":{"account_id":1853886,"reputation":210617,"user_id":1679863,"accept_rate":77,"display_name":"Rohit Jain"},"comment_count":6,"down_vote_count":0,"up_vote_count":11,"is_accepted":true,"score":11,"last_activity_date":1350903854,"creation_date":1350903533,"answer_id":13010010,"question_id":13009911,"body_markdown":"**Steps you can follow**: -\r\n\r\n - First you need to have a `List&lt;String&gt;` that will store all your names. Declare it like this: -\r\n\r\n        List&lt;String&gt; nameList = new ArrayList&lt;String&gt;();\r\n\r\n - Now, you have all the records fetched and stored in `ResultSet`. So I assume that you can iterate over `ResultSet` and get each `values` from it. You need to use `ResultSet#getString` to fetch the `name`.\r\n\r\n - Now, each time you fetch one record, get the `name` field and add it to your list.\r\n\r\n        while(resultSet.next()) {\r\n            nameList.add(resultSet.getString(&quot;name&quot;));\r\n        }\r\n\r\n - Now, since you haven&#39;t given enough information about your `DTO`, so that part you need to find out, how to add this `ArrayList` to your `DTO`. \r\n\r\n - The above `list` only contains `name` and not `surname` as you wanted only `name`. But if you want both, you need to create a custom DTO `(FullName)`, that\r\n   contains `name` and `surname` as fields. And instantiate it from\r\n   every `ResultSet` and add it to the `List&lt;FullName&gt;`","title":"Resultset to list","body":"<p><strong>Steps you can follow</strong>: -</p>\n\n<ul>\n<li><p>First you need to have a <code>List&lt;String&gt;</code> that will store all your names. Declare it like this: -</p>\n\n<pre><code>List&lt;String&gt; nameList = new ArrayList&lt;String&gt;();\n</code></pre></li>\n<li><p>Now, you have all the records fetched and stored in <code>ResultSet</code>. So I assume that you can iterate over <code>ResultSet</code> and get each <code>values</code> from it. You need to use <code>ResultSet#getString</code> to fetch the <code>name</code>.</p></li>\n<li><p>Now, each time you fetch one record, get the <code>name</code> field and add it to your list.</p>\n\n<pre><code>while(resultSet.next()) {\n    nameList.add(resultSet.getString(\"name\"));\n}\n</code></pre></li>\n<li><p>Now, since you haven't given enough information about your <code>DTO</code>, so that part you need to find out, how to add this <code>ArrayList</code> to your <code>DTO</code>. </p></li>\n<li><p>The above <code>list</code> only contains <code>name</code> and not <code>surname</code> as you wanted only <code>name</code>. But if you want both, you need to create a custom DTO <code>(FullName)</code>, that\ncontains <code>name</code> and <code>surname</code> as fields. And instantiate it from\nevery <code>ResultSet</code> and add it to the <code>List&lt;FullName&gt;</code></p></li>\n</ul>\n"},{"tags":[],"owner":{"account_id":247217,"reputation":213465,"user_id":521799,"accept_rate":89,"display_name":"Lukas Eder"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1485174468,"creation_date":1411478096,"answer_id":25996108,"question_id":13009911,"body_markdown":"JDBC unfortunately doesn&#39;t offer any ways to conveniently do this in a one-liner. But there are other APIs, such as [jOOQ][1] (disclaimer: I work for the company behind jOOQ):\r\n\r\n    List&lt;DTO&gt; list =\r\n    DSL.using(connection)\r\n       .fetch(&quot;SELECT first_name, last_name FROM table&quot;)\r\n       .into(DTO.class);\r\n\r\nOr [Spring JDBC][2]\r\n\r\n    List&lt;DTO&gt; list =\r\n    new JdbcTemplate(new SingleConnectionDataSource(connection, true))\r\n       .query(&quot;SELECT first_name, last_name FROM table&quot;, (rs, rowNum) -&gt;\r\n           new DTO(rs.getString(1), rs.getString(2));\r\n\r\nOr [Apache DbUtils][3]:\r\n\r\n    List&lt;DTO&gt; list =\r\n    new QueryRunner()\r\n       .query(connection, \r\n              &quot;SELECT first_name, last_name FROM table&quot;, \r\n              new ArrayListHandler())\r\n       .stream()\r\n       .map(array -&gt; new DTO((String) array[0], (String) array[1]))\r\n       .collect(Collectors.toList());\r\n\r\n\r\nI&#39;ve used Java 8 for the Spring JDBC / Apache DbUtils examples, but it can be done with older versions of Java as well.\r\n\r\n\r\n  [1]: http://www.jooq.org\r\n  [2]: http://projects.spring.io/spring-data/\r\n  [3]: http://commons.apache.org/proper/commons-dbutils/","title":"Resultset to list","body":"<p>JDBC unfortunately doesn't offer any ways to conveniently do this in a one-liner. But there are other APIs, such as <a href=\"http://www.jooq.org\" rel=\"nofollow noreferrer\">jOOQ</a> (disclaimer: I work for the company behind jOOQ):</p>\n\n<pre><code>List&lt;DTO&gt; list =\nDSL.using(connection)\n   .fetch(\"SELECT first_name, last_name FROM table\")\n   .into(DTO.class);\n</code></pre>\n\n<p>Or <a href=\"http://projects.spring.io/spring-data/\" rel=\"nofollow noreferrer\">Spring JDBC</a></p>\n\n<pre><code>List&lt;DTO&gt; list =\nnew JdbcTemplate(new SingleConnectionDataSource(connection, true))\n   .query(\"SELECT first_name, last_name FROM table\", (rs, rowNum) -&gt;\n       new DTO(rs.getString(1), rs.getString(2));\n</code></pre>\n\n<p>Or <a href=\"http://commons.apache.org/proper/commons-dbutils/\" rel=\"nofollow noreferrer\">Apache DbUtils</a>:</p>\n\n<pre><code>List&lt;DTO&gt; list =\nnew QueryRunner()\n   .query(connection, \n          \"SELECT first_name, last_name FROM table\", \n          new ArrayListHandler())\n   .stream()\n   .map(array -&gt; new DTO((String) array[0], (String) array[1]))\n   .collect(Collectors.toList());\n</code></pre>\n\n<p>I've used Java 8 for the Spring JDBC / Apache DbUtils examples, but it can be done with older versions of Java as well.</p>\n"},{"tags":[],"owner":{"account_id":6765293,"reputation":929,"user_id":5210482,"display_name":"vlatko606"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1660315521,"creation_date":1660315521,"answer_id":73335894,"question_id":13009911,"body_markdown":"What worked for me is:\r\n\r\n    ResultSetMetaData rsmd = rs.getMetaData();\r\n             int columnCount = rsmd.getColumnCount();\r\n\r\n             ArrayList&lt;String&gt; resultList= new ArrayList&lt;&gt;(columnCount);\r\n             while (rs.next()) {\r\n                 int i = 1;\r\n                 while(i &lt;= columnCount) {\r\n                     resultList.add(rs.getString(i++));\r\n                 }\r\n             }\r\n             return resultList;","title":"Resultset to list","body":"<p>What worked for me is:</p>\n<pre><code>ResultSetMetaData rsmd = rs.getMetaData();\n         int columnCount = rsmd.getColumnCount();\n\n         ArrayList&lt;String&gt; resultList= new ArrayList&lt;&gt;(columnCount);\n         while (rs.next()) {\n             int i = 1;\n             while(i &lt;= columnCount) {\n                 resultList.add(rs.getString(i++));\n             }\n         }\n         return resultList;\n</code></pre>\n"},{"comments":[{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1672988515,"post_id":75021843,"comment_id":132401270,"body_markdown":"Your answer could be improved with additional supporting information. Please [edit] to add further details, such as citations or documentation, so that others can confirm that your answer is correct. You can find more information on how to write good answers [in the help center](/help/how-to-answer).","body":"Your answer could be improved with additional supporting information. Please <a href=\"https://stackoverflow.com/posts/75021843/edit\">edit</a> to add further details, such as citations or documentation, so that others can confirm that your answer is correct. You can find more information on how to write good answers <a href=\"/help/how-to-answer\">in the help center</a>."}],"tags":[],"owner":{"account_id":23995856,"reputation":1,"user_id":17981371,"display_name":"Ashwin Waikar"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1672937581,"creation_date":1672937581,"answer_id":75021843,"question_id":13009911,"body_markdown":"This worked for me-&gt;\r\n\r\n    private List&lt;Object[]&gt; convertResultsetToObject(ResultSet rs) throws SQLException {\r\n\t\tList&lt;Object[]&gt; results = new ArrayList&lt;Object[]&gt;();\r\n\t\tint count = 0;\r\n\t\tif(rs != null) {\r\n\t\t\tResultSetMetaData rsm = rs.getMetaData();\r\n\t\t\tcount = rsm.getColumnCount();\r\n\t\t}\r\n\t\twhile(rs != null &amp;&amp; rs.next()) {\r\n\t\t\tObject [] obj = new Object[count];\r\n\t\t\tint temp = 1;\r\n\t\t\twhile(temp &lt;= count) {\r\n\t\t\t\tobj[temp - 1] = rs.getObject(temp);\r\n\t\t\t\ttemp++;\r\n\t\t\t}\r\n\t\t\tresults.add(obj);\r\n\t\t}\r\n\t\treturn results;\r\n\t}","title":"Resultset to list","body":"<p>This worked for me-&gt;</p>\n<pre><code>private List&lt;Object[]&gt; convertResultsetToObject(ResultSet rs) throws SQLException {\n    List&lt;Object[]&gt; results = new ArrayList&lt;Object[]&gt;();\n    int count = 0;\n    if(rs != null) {\n        ResultSetMetaData rsm = rs.getMetaData();\n        count = rsm.getColumnCount();\n    }\n    while(rs != null &amp;&amp; rs.next()) {\n        Object [] obj = new Object[count];\n        int temp = 1;\n        while(temp &lt;= count) {\n            obj[temp - 1] = rs.getObject(temp);\n            temp++;\n        }\n        results.add(obj);\n    }\n    return results;\n}\n</code></pre>\n"}],"owner":{"account_id":1956305,"reputation":101,"user_id":1759247,"accept_rate":17,"display_name":"user1759247"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":45415,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"accepted_answer_id":13010010,"answer_count":5,"score":3,"last_activity_date":1672937581,"creation_date":1350903173,"question_id":13009911,"body_markdown":"I want to create a list with my database field values.\r\nThere are 2 columns, name and surname.\r\nI want to create a list that stores all names in name column in a field and then add to my DTO.\r\n\r\nIs this possible?","title":"Resultset to list","body":"<p>I want to create a list with my database field values.\nThere are 2 columns, name and surname.\nI want to create a list that stores all names in name column in a field and then add to my DTO.</p>\n\n<p>Is this possible?</p>\n"},{"tags":["java","rabbitmq","spring-cloud-stream","spring-cloud-stream-binder"],"comments":[{"owner":{"account_id":1288095,"reputation":169336,"user_id":1240763,"display_name":"Gary Russell"},"score":0,"creation_date":1664896197,"post_id":73947338,"comment_id":130572206,"body_markdown":"Setting `maxAttempts` to 1 will disable retries in the binder; so something is wrong with your config.","body":"Setting <code>maxAttempts</code> to 1 will disable retries in the binder; so something is wrong with your config."},{"owner":{"account_id":11047599,"reputation":140,"user_id":8113107,"display_name":"RaRa"},"score":0,"creation_date":1664913405,"post_id":73947338,"comment_id":130577505,"body_markdown":"@GaryRussell I came across a mention of the heartbeat property, could this be causing the messages to be redelivered?\nI observe that the redelivery happens if I pause the consumer through the debugger for close to 60 seconds. \nAlso, the number of redeliveries could be more than 3, basically, it depends on the time I pause on each message in the consumer, and also the deliveryAttempt is always 1.","body":"@GaryRussell I came across a mention of the heartbeat property, could this be causing the messages to be redelivered? I observe that the redelivery happens if I pause the consumer through the debugger for close to 60 seconds.  Also, the number of redeliveries could be more than 3, basically, it depends on the time I pause on each message in the consumer, and also the deliveryAttempt is always 1."}],"answers":[{"tags":[],"owner":{"account_id":20740735,"reputation":85,"user_id":15230464,"display_name":"Wally Liu"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1672937529,"creation_date":1672937529,"answer_id":75021834,"question_id":73947338,"body_markdown":"I used to run into this issue when the message processing in the consumer failed (exception thrown). In this case, if you have DLQ configured, make sure to add the following configuration as well so the failed message will be routed to the DLQ not the original listening queue.\r\n&quot;\r\n      rabbit:\r\n        autoBindDlq: true\r\n&quot;\r\n\r\nOtherwise if you don&#39;t set up the DLQ, configure &quot;autoBindDlq&quot; to &quot;false&quot;.\r\n","title":"Message getting redelivered to RabbitMQ consumer setup using spring cloud stream","body":"<p>I used to run into this issue when the message processing in the consumer failed (exception thrown). In this case, if you have DLQ configured, make sure to add the following configuration as well so the failed message will be routed to the DLQ not the original listening queue.\n&quot;\nrabbit:\nautoBindDlq: true\n&quot;</p>\n<p>Otherwise if you don't set up the DLQ, configure &quot;autoBindDlq&quot; to &quot;false&quot;.</p>\n"}],"owner":{"account_id":11047599,"reputation":140,"user_id":8113107,"display_name":"RaRa"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":435,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1672937529,"creation_date":1664883587,"question_id":73947338,"body_markdown":"We have a SpringBoot service implementation in which we are using delayed messaging with the below setup:\r\n\r\n 1. Initial queue (Queue 1) that gets the message has a TTL set, the queue also has a dead letter exchange mentioned with a specific dead letter routing key.\r\n2. Another queue (Queue 2) is bound to the DLX of the previous queue with the routing key which is set as the dead letter routing key\r\n3. A consumer listens to the messages on Queue 2.\r\n\r\nThe delayed messaging seems to work as expected but I am seeing an issue with messages getting redelivered in certain scenarios.\r\n\r\nIf I have a debug point in my consumer and keep the message just after reading it for some time then once the current message has been processed consumer gets another message which has the below properties:\r\n - Redelivered property as true.\r\n - Property deliveryAttempt as 1\r\n - Only the first message has an ```x-death``` header and redelivered messages do not seem to have it.\r\n\r\nThe attempt to deliver the message is done &lt;strike&gt;3 times&lt;/strike&gt; as many times as I pause the consumer using the debug point each time after reading each redelivered message.\r\n\r\nMy understanding was that the acknowledgment mode by default is AUTO so once the consumer has read the message then it would not be redelivered?\r\n\r\nI have tried using ```maxAttempts=1``` property but does not seem to help. \r\n\r\nI am using the spring cloud stream to create the consumers and the queues. \r\n","title":"Message getting redelivered to RabbitMQ consumer setup using spring cloud stream","body":"<p>We have a SpringBoot service implementation in which we are using delayed messaging with the below setup:</p>\n<ol>\n<li>Initial queue (Queue 1) that gets the message has a TTL set, the queue also has a dead letter exchange mentioned with a specific dead letter routing key.</li>\n<li>Another queue (Queue 2) is bound to the DLX of the previous queue with the routing key which is set as the dead letter routing key</li>\n<li>A consumer listens to the messages on Queue 2.</li>\n</ol>\n<p>The delayed messaging seems to work as expected but I am seeing an issue with messages getting redelivered in certain scenarios.</p>\n<p>If I have a debug point in my consumer and keep the message just after reading it for some time then once the current message has been processed consumer gets another message which has the below properties:</p>\n<ul>\n<li>Redelivered property as true.</li>\n<li>Property deliveryAttempt as 1</li>\n<li>Only the first message has an <code>x-death</code> header and redelivered messages do not seem to have it.</li>\n</ul>\n<p>The attempt to deliver the message is done <strike>3 times</strike> as many times as I pause the consumer using the debug point each time after reading each redelivered message.</p>\n<p>My understanding was that the acknowledgment mode by default is AUTO so once the consumer has read the message then it would not be redelivered?</p>\n<p>I have tried using <code>maxAttempts=1</code> property but does not seem to help.</p>\n<p>I am using the spring cloud stream to create the consumers and the queues.</p>\n"},{"tags":["java","android","kotlin","android-recyclerview","android-arrayadapter"],"comments":[{"owner":{"account_id":3131499,"reputation":1797,"user_id":2649154,"accept_rate":93,"display_name":"gioravered"},"score":0,"creation_date":1672905404,"post_id":75015036,"comment_id":132379334,"body_markdown":"Hi, What is the purpose of the chatViewModel.postReChatResponse.observe ?","body":"Hi, What is the purpose of the chatViewModel.postReChatResponse.observe ?"},{"owner":{"account_id":26287608,"reputation":1,"user_id":19955048,"display_name":"박성범"},"score":0,"creation_date":1672908075,"post_id":75015036,"comment_id":132380017,"body_markdown":"with Retrofit I post the user&#39;s chat to the server and then I add the user&#39;s chat to the recyclerview\nI fix the name of the postReChatResponse to postChatResponse sorry for confusing","body":"with Retrofit I post the user&#39;s chat to the server and then I add the user&#39;s chat to the recyclerview I fix the name of the postReChatResponse to postChatResponse sorry for confusing"},{"owner":{"account_id":3131499,"reputation":1797,"user_id":2649154,"accept_rate":93,"display_name":"gioravered"},"score":0,"creation_date":1672908312,"post_id":75015036,"comment_id":132380097,"body_markdown":"It is not clear why you are calling the &quot;observe&quot; method on every click of the &quot;send button&quot;. Usually observe should be called once. Can you share you ViewModel code?","body":"It is not clear why you are calling the &quot;observe&quot; method on every click of the &quot;send button&quot;. Usually observe should be called once. Can you share you ViewModel code?"},{"owner":{"account_id":26287608,"reputation":1,"user_id":19955048,"display_name":"박성범"},"score":0,"creation_date":1672908502,"post_id":75015036,"comment_id":132380165,"body_markdown":"I&#39;m practice the viewmodel now, so I&#39;m not good at this sorry..\n\n`private val _postChatResponse: MutableLiveData&lt;Response&lt;String&gt;&gt; = \nMutableLiveData()\n\nval postChatResponse: LiveData&lt;Response&lt;String&gt;&gt;\n        get() = _postChatResponse\n\n fun postChat(hashMap: HashMap&lt;String, Any&gt;) {\n    viewModelScope.launch {\n            try {\n                val response = chatRepository.postChat(hashMap)\n                _postChatResponse.value = response\n            } catch (e: Exception) {\n                Log.d(&quot;postChatError&quot;, e.toString())\n            }\n        }\n    }`","body":"I&#39;m practice the viewmodel now, so I&#39;m not good at this sorry..  <code>private val _postChatResponse: MutableLiveData&lt;Response&lt;String&gt;&gt; =  MutableLiveData()  val postChatResponse: LiveData&lt;Response&lt;String&gt;&gt;         get() = _postChatResponse   fun postChat(hashMap: HashMap&lt;String, Any&gt;) {     viewModelScope.launch {             try {                 val response = chatRepository.postChat(hashMap)                 _postChatResponse.value = response             } catch (e: Exception) {                 Log.d(&quot;postChatError&quot;, e.toString())             }         }     }</code>"},{"owner":{"account_id":26287608,"reputation":1,"user_id":19955048,"display_name":"박성범"},"score":0,"creation_date":1672909204,"post_id":75015036,"comment_id":132380367,"body_markdown":"oh I can solve this problem thankyou I delete the postChat() function on the btn Click Thankyou So much","body":"oh I can solve this problem thankyou I delete the postChat() function on the btn Click Thankyou So much"}],"answers":[{"tags":[],"owner":{"account_id":11672847,"reputation":204,"user_id":8547372,"display_name":"Dharmeet Soni"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1672937439,"creation_date":1672937439,"answer_id":75021813,"question_id":75015036,"body_markdown":"Do one thing just use single comment list and add value to the list and then use notifyDataSetChanged for adapter. this will works. Here you are adding values to the list again and again so that is why it is repeating data. ","title":"If I Add the item on the recyclerview the item add duplicate","body":"<p>Do one thing just use single comment list and add value to the list and then use notifyDataSetChanged for adapter. this will works. Here you are adding values to the list again and again so that is why it is repeating data.</p>\n"}],"owner":{"account_id":26287608,"reputation":1,"user_id":19955048,"display_name":"박성범"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":59,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1672937439,"creation_date":1672903406,"question_id":75015036,"body_markdown":"First time, If I add the item(click the send button) on the recyclerview, it does successfully,\r\n\r\n but\r\nif I add the item second time, I expect see the item 1,2 but 1,2,1,2 add to the recyclerview\r\n\r\n\r\nI&#39;m using the multiViewType RecyclerView and the viewmodel\r\n\r\nand I also use the databinding on the adapter code\r\n\r\n\r\nThank you for your help\r\n\r\n\r\nbelow it&#39;s my code\r\n\r\n```\r\nprivate val commentList = mutableListOf&lt;Comment&gt;()\r\nprivate var chatAdpater = ChatAdapter()\r\n....\r\n\r\nbinding.sendBtn.setOnClickListener {\r\n                postChat()\r\n            }\r\n\r\n.....\r\n\r\nprivate fun postChat(){\r\n    chatViewModel.postReChatResponse.observe(viewLifecycleOwner) {\r\n\r\n        val newCommentList = mutableListOf&lt;Comment&gt;()\r\n        commentList.add(\r\n              Comment(\r\n                nickname,\r\n                description,\r\n                writeTime,\r\n                boardId.toInt(),\r\n                categoryId.toInt(),\r\n                id,\r\n                images,\r\n                2,\r\n                commentsid.toInt(),\r\n                0,\r\n                null\r\n               )\r\n              )\r\n\r\n         newCommentList.addAll(commentList)\r\n         chatAdpater.setData(newCommentList,commentList.size-1)\r\n   }\r\n}\r\n\r\n\r\n---------adapter-------\r\n\r\n.....\r\n\r\nvar commentList:MutableList&lt;Comment&gt;? = mutableListOf()\r\n\r\n.....\r\n\r\n@SuppressLint(&quot;NotifyDataSetChanged&quot;)\r\n    fun setData(commentList: MutableList&lt;Comment&gt;,position: Int){\r\n        this.commentList = commentList\r\n        notifyItemInserted(position)\r\n    }\r\n\r\nclass ViewHolder(val binding: ChatItemListBinding) :\r\n        RecyclerView.ViewHolder(binding.root) {\r\n        fun onBind(data: Comment) {\r\n            binding.comment = data\r\n        }\r\n    }\r\n\r\n    class ReViewHolder(val bindingTwo: ReChatItemListBinding) :\r\n        RecyclerView.ViewHolder(bindingTwo.root) {\r\n        fun onBind(data: Comment) {\r\n            bindingTwo.reComment = data\r\n        }\r\n    }\r\n\r\n    override fun getItemViewType(position: Int): Int {\r\n        return when (commentList!![position].isrecomment) {\r\n            1 -&gt; 1\r\n            else -&gt; 2\r\n        }\r\n    }\r\n\r\n    override fun onCreateViewHolder(parent: ViewGroup, viewType: Int): RecyclerView.ViewHolder {\r\n        val binding =\r\n            ChatItemListBinding.inflate(LayoutInflater.from(parent.context), parent, false)\r\n        val bindingRe =\r\n            ReChatItemListBinding.inflate(LayoutInflater.from(parent.context), parent, false)\r\n        return when (viewType) {\r\n            1 -&gt; ReViewHolder(bindingRe)\r\n            else -&gt; ViewHolder(binding)\r\n        }\r\n    }\r\n\r\n    override fun getItemCount(): Int{\r\n        return commentList?.size ?: 0\r\n    }\r\n\r\n    override fun onBindViewHolder(holder: RecyclerView.ViewHolder, position: Int) {\r\n        when (commentList?.get(position)?.isrecomment) {\r\n            1 -&gt; (holder as ReViewHolder).apply {\r\n                holder.onBind(commentList!![position])\r\n                 }\r\n            2 -&gt; (holder as ViewHolder).apply {\r\n                holder.onBind(commentList!![position])\r\n                holder.binding.chatText.setOnClickListener {\r\n       \r\n                 }\r\n              }\r\n           }\r\n```","title":"If I Add the item on the recyclerview the item add duplicate","body":"<p>First time, If I add the item(click the send button) on the recyclerview, it does successfully,</p>\n<p>but\nif I add the item second time, I expect see the item 1,2 but 1,2,1,2 add to the recyclerview</p>\n<p>I'm using the multiViewType RecyclerView and the viewmodel</p>\n<p>and I also use the databinding on the adapter code</p>\n<p>Thank you for your help</p>\n<p>below it's my code</p>\n<pre><code>private val commentList = mutableListOf&lt;Comment&gt;()\nprivate var chatAdpater = ChatAdapter()\n....\n\nbinding.sendBtn.setOnClickListener {\n                postChat()\n            }\n\n.....\n\nprivate fun postChat(){\n    chatViewModel.postReChatResponse.observe(viewLifecycleOwner) {\n\n        val newCommentList = mutableListOf&lt;Comment&gt;()\n        commentList.add(\n              Comment(\n                nickname,\n                description,\n                writeTime,\n                boardId.toInt(),\n                categoryId.toInt(),\n                id,\n                images,\n                2,\n                commentsid.toInt(),\n                0,\n                null\n               )\n              )\n\n         newCommentList.addAll(commentList)\n         chatAdpater.setData(newCommentList,commentList.size-1)\n   }\n}\n\n\n---------adapter-------\n\n.....\n\nvar commentList:MutableList&lt;Comment&gt;? = mutableListOf()\n\n.....\n\n@SuppressLint(&quot;NotifyDataSetChanged&quot;)\n    fun setData(commentList: MutableList&lt;Comment&gt;,position: Int){\n        this.commentList = commentList\n        notifyItemInserted(position)\n    }\n\nclass ViewHolder(val binding: ChatItemListBinding) :\n        RecyclerView.ViewHolder(binding.root) {\n        fun onBind(data: Comment) {\n            binding.comment = data\n        }\n    }\n\n    class ReViewHolder(val bindingTwo: ReChatItemListBinding) :\n        RecyclerView.ViewHolder(bindingTwo.root) {\n        fun onBind(data: Comment) {\n            bindingTwo.reComment = data\n        }\n    }\n\n    override fun getItemViewType(position: Int): Int {\n        return when (commentList!![position].isrecomment) {\n            1 -&gt; 1\n            else -&gt; 2\n        }\n    }\n\n    override fun onCreateViewHolder(parent: ViewGroup, viewType: Int): RecyclerView.ViewHolder {\n        val binding =\n            ChatItemListBinding.inflate(LayoutInflater.from(parent.context), parent, false)\n        val bindingRe =\n            ReChatItemListBinding.inflate(LayoutInflater.from(parent.context), parent, false)\n        return when (viewType) {\n            1 -&gt; ReViewHolder(bindingRe)\n            else -&gt; ViewHolder(binding)\n        }\n    }\n\n    override fun getItemCount(): Int{\n        return commentList?.size ?: 0\n    }\n\n    override fun onBindViewHolder(holder: RecyclerView.ViewHolder, position: Int) {\n        when (commentList?.get(position)?.isrecomment) {\n            1 -&gt; (holder as ReViewHolder).apply {\n                holder.onBind(commentList!![position])\n                 }\n            2 -&gt; (holder as ViewHolder).apply {\n                holder.onBind(commentList!![position])\n                holder.binding.chatText.setOnClickListener {\n       \n                 }\n              }\n           }\n</code></pre>\n"},{"tags":["java","apache-commons","slf4j","apache-commons-logging"],"comments":[{"owner":{"account_id":281184,"reputation":21762,"user_id":577334,"accept_rate":50,"display_name":"billygoat"},"score":0,"creation_date":1296972108,"post_id":4911826,"comment_id":5470382,"body_markdown":"is common logging an abstraction? I thought is is logging implementation.(Spring uses it).You do not have to implement the static binder, jcl over slf4j is your static binder implementation. If you do not provide any logging implementation, then I believe it will default to Java Util Logging.( if you do not package the jcl-over-slf4j logger).","body":"is common logging an abstraction? I thought is is logging implementation.(Spring uses it).You do not have to implement the static binder, jcl over slf4j is your static binder implementation. If you do not provide any logging implementation, then I believe it will default to Java Util Logging.( if you do not package the jcl-over-slf4j logger)."},{"owner":{"account_id":270555,"reputation":4777,"user_id":560585,"accept_rate":60,"display_name":"Joe Hanink"},"score":0,"creation_date":1296972530,"post_id":4911826,"comment_id":5470411,"body_markdown":"the docs say &quot;As of SLF4J version 1.6.0, if no binding is found on the class path, then slf4j-api will default to a no-operation implementation discarding all log requests&quot; -- http://www.slf4j.org/manual.html","body":"the docs say &quot;As of SLF4J version 1.6.0, if no binding is found on the class path, then slf4j-api will default to a no-operation implementation discarding all log requests&quot; -- <a href=\"http://www.slf4j.org/manual.html\" rel=\"nofollow noreferrer\">slf4j.org/manual.html</a>"},{"owner":{"account_id":281184,"reputation":21762,"user_id":577334,"accept_rate":50,"display_name":"billygoat"},"score":0,"creation_date":1296974047,"post_id":4911826,"comment_id":5470543,"body_markdown":"But jul will definitely be in class path. Its packaged with jdk.","body":"But jul will definitely be in class path. Its packaged with jdk."}],"answers":[{"comments":[{"owner":{"account_id":270555,"reputation":4777,"user_id":560585,"accept_rate":60,"display_name":"Joe Hanink"},"score":1,"creation_date":1296975292,"post_id":4911908,"comment_id":5470630,"body_markdown":"the jdk binding jar comes with slf4j. you want to make sure the jar is deployed to your webapp WEB-INF/lib dir or just in your classpath otherwise. See (http://www.slf4j.org/faq.html#where_is_binding) and this (http://www.slf4j.org/faq.html) for more information","body":"the jdk binding jar comes with slf4j. you want to make sure the jar is deployed to your webapp WEB-INF/lib dir or just in your classpath otherwise. See (<a href=\"http://www.slf4j.org/faq.html#where_is_binding\" rel=\"nofollow noreferrer\">slf4j.org/faq.html#where_is_binding</a>) and this (<a href=\"http://www.slf4j.org/faq.html\" rel=\"nofollow noreferrer\">slf4j.org/faq.html</a>) for more information"},{"owner":{"account_id":270555,"reputation":4777,"user_id":560585,"accept_rate":60,"display_name":"Joe Hanink"},"score":0,"creation_date":1296975615,"post_id":4911908,"comment_id":5470657,"body_markdown":"the jar you want to add to your classpath is slf4j-jdk14.jar. Note that the jdk logger is already available, this jar is the link between the slf4j interfaces and the chosen logger implementation. the jdk logging binding jar comes with the slf4j distribution. this should do it for you.","body":"the jar you want to add to your classpath is slf4j-jdk14.jar. Note that the jdk logger is already available, this jar is the link between the slf4j interfaces and the chosen logger implementation. the jdk logging binding jar comes with the slf4j distribution. this should do it for you."},{"owner":{"account_id":270555,"reputation":4777,"user_id":560585,"accept_rate":60,"display_name":"Joe Hanink"},"score":0,"creation_date":1297018334,"post_id":4911908,"comment_id":5475372,"body_markdown":"the answer is in the comments, which basically points to your documentation. I edited the &quot;answer&quot; to include the comments.","body":"the answer is in the comments, which basically points to your documentation. I edited the &quot;answer&quot; to include the comments."}],"tags":[],"owner":{"account_id":270555,"reputation":4777,"user_id":560585,"accept_rate":60,"display_name":"Joe Hanink"},"comment_count":3,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1672936858,"creation_date":1296972428,"answer_id":4911908,"question_id":4911826,"body_markdown":"If you want to keep it simple, use the built-in (as of jdk 1.4) logger\r\n\r\nhttps://docs.oracle.com/en/java/javase/19/docs/api/java.logging/java/util/logging/Logger.html\r\n\r\nthe jdk binding jar comes with slf4j. you want to make sure the jar is deployed to your webapp WEB-INF/lib dir or just in your classpath otherwise. See (slf4j.org/faq.html#where_is_binding) and this (slf4j.org/faq.html) for more information.\r\n\r\n\r\nthe jar you want to add to your classpath is slf4j-jdk14.jar. Note that the jdk logger is already available, this jar is the link between the slf4j interfaces and the chosen logger implementation. the jdk logging binding jar comes with the slf4j distribution. this should do it for you.","title":"SLF4J, Common Logging, console output","body":"<p>If you want to keep it simple, use the built-in (as of jdk 1.4) logger</p>\n<p><a href=\"https://docs.oracle.com/en/java/javase/19/docs/api/java.logging/java/util/logging/Logger.html\" rel=\"nofollow noreferrer\">https://docs.oracle.com/en/java/javase/19/docs/api/java.logging/java/util/logging/Logger.html</a></p>\n<p>the jdk binding jar comes with slf4j. you want to make sure the jar is deployed to your webapp WEB-INF/lib dir or just in your classpath otherwise. See (slf4j.org/faq.html#where_is_binding) and this (slf4j.org/faq.html) for more information.</p>\n<p>the jar you want to add to your classpath is slf4j-jdk14.jar. Note that the jdk logger is already available, this jar is the link between the slf4j interfaces and the chosen logger implementation. the jdk logging binding jar comes with the slf4j distribution. this should do it for you.</p>\n"},{"tags":[],"owner":{"account_id":34142,"reputation":6666,"user_id":96224,"display_name":"Uriah Carpenter"},"comment_count":0,"down_vote_count":0,"up_vote_count":9,"is_accepted":false,"score":9,"last_activity_date":1302755267,"creation_date":1296976702,"answer_id":4912145,"question_id":4911826,"body_markdown":"We use SLF4J. It&#39;s very useful but several of the jars have confusing names and it&#39;s not real clear starting out to know which ones are incompatible.\r\n\r\nSLF4J is the API you use for logging in your code (e.g. `log.info(&quot;blah&quot;)`. However, SLF4J has no configuration aspect to it. At runtime you add _exactly one_ jar to the classpath that binds the API to the &#39;real&#39; logging subsystem. If you want to use Log4J, add `slf4j-log4j.jar` or the StaticBinder jar for [Simple or JDK](http://www.slf4j.org/manual.html), or [Logback](http://logback.qos.ch/). You configure any of these logging implementations as you normally would without SLF4J.\r\n\r\nThere are several [SLF4J modules](http://www.slf4j.org/legacy.html) available to redirect **existing** logging statements written using the APIs of Log4J, Apache Commons Logging, and java.util.logging to SLF4J. This allows you to setup a single logging configuration for all these disperate implementations. (This is *very* useful to avoid configuring both, say, Log4J and JUL if you have libraries that bind directly to any legacy logging framework.)\r\n\r\nThe [SLF4J legacy page](http://www.slf4j.org/legacy.html) explains these concepts in depth. Heck, there is even [a module](http://projects.lidalia.org.uk/sysout-over-slf4j/) to redirect Sysout.out/err to SFL4J.\r\n\r\nTo more directly answer your question: sure you *can* write your own logging implementation to go under SLF4J; but the only reason to do so is because you are already locked into some homegrown craptastic logging framework.","title":"SLF4J, Common Logging, console output","body":"<p>We use SLF4J. It's very useful but several of the jars have confusing names and it's not real clear starting out to know which ones are incompatible.</p>\n\n<p>SLF4J is the API you use for logging in your code (e.g. <code>log.info(\"blah\")</code>. However, SLF4J has no configuration aspect to it. At runtime you add <em>exactly one</em> jar to the classpath that binds the API to the 'real' logging subsystem. If you want to use Log4J, add <code>slf4j-log4j.jar</code> or the StaticBinder jar for <a href=\"http://www.slf4j.org/manual.html\" rel=\"noreferrer\">Simple or JDK</a>, or <a href=\"http://logback.qos.ch/\" rel=\"noreferrer\">Logback</a>. You configure any of these logging implementations as you normally would without SLF4J.</p>\n\n<p>There are several <a href=\"http://www.slf4j.org/legacy.html\" rel=\"noreferrer\">SLF4J modules</a> available to redirect <strong>existing</strong> logging statements written using the APIs of Log4J, Apache Commons Logging, and java.util.logging to SLF4J. This allows you to setup a single logging configuration for all these disperate implementations. (This is <em>very</em> useful to avoid configuring both, say, Log4J and JUL if you have libraries that bind directly to any legacy logging framework.)</p>\n\n<p>The <a href=\"http://www.slf4j.org/legacy.html\" rel=\"noreferrer\">SLF4J legacy page</a> explains these concepts in depth. Heck, there is even <a href=\"http://projects.lidalia.org.uk/sysout-over-slf4j/\" rel=\"noreferrer\">a module</a> to redirect Sysout.out/err to SFL4J.</p>\n\n<p>To more directly answer your question: sure you <em>can</em> write your own logging implementation to go under SLF4J; but the only reason to do so is because you are already locked into some homegrown craptastic logging framework.</p>\n"},{"tags":[],"owner":{"account_id":35628,"reputation":26827,"user_id":100970,"display_name":"Ceki"},"comment_count":0,"down_vote_count":4,"up_vote_count":1,"is_accepted":false,"score":-3,"last_activity_date":1337963306,"creation_date":1296988989,"answer_id":4912789,"question_id":4911826,"body_markdown":"Your question leds me to believe that you have not read the [the SLF4J user manual][1]. It&#39;s a very short document. If after reading the document you still have the same question, then the document fails its purpose and needs to be clarified. \r\n\r\nAnyways, you don&#39;t need to implement your own Logger class. Just use `slf4j-simple` which ships with SLF4J.\r\n\r\n  [1]:  http://slf4j.org/manual.html ","title":"SLF4J, Common Logging, console output","body":"<p>Your question leds me to believe that you have not read the <a href=\"http://slf4j.org/manual.html\" rel=\"nofollow\">the SLF4J user manual</a>. It's a very short document. If after reading the document you still have the same question, then the document fails its purpose and needs to be clarified. </p>\n\n<p>Anyways, you don't need to implement your own Logger class. Just use <code>slf4j-simple</code> which ships with SLF4J.</p>\n"}],"owner":{"account_id":11091,"reputation":99074,"user_id":21239,"accept_rate":81,"display_name":"Mauricio Scheffer"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":7444,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":4911908,"answer_count":3,"score":2,"last_activity_date":1672936858,"creation_date":1296970951,"question_id":4911826,"body_markdown":"I have this 3rd party library that has:\r\n\r\n * slf4j-api-1.5.5.jar\r\n * slf4j-jdk14-1.5.5.jar\r\n * jcl-over-slf4j-1.5.5.jar\r\n\r\nI want to write some tests against this library and see its log output, and I don&#39;t want to add any more logging libraries (no log4j or anything else). \r\n\r\nI understand that SLF4J and Common Logging are both logging abstractions so I probably need to write my own simple concrete logger (or maybe not, since jcl-over-slf4j includes org.apache.commons.logging.impl.SimpleLog?). If so, what interfaces should I implement, and more importantly, how do I set up SL4J/Common Logging to use my logger in my test? I read in the [SLF4J docs that I have to modify the StaticLoggerBinder class][1]... does that really mean that I actually have to download SLF4J sources, modify the class and recompile it?\r\n\r\n\r\n  [1]: http://www.slf4j.org/faq.html#slf4j_compatible","title":"SLF4J, Common Logging, console output","body":"<p>I have this 3rd party library that has:</p>\n\n<ul>\n<li>slf4j-api-1.5.5.jar</li>\n<li>slf4j-jdk14-1.5.5.jar</li>\n<li>jcl-over-slf4j-1.5.5.jar</li>\n</ul>\n\n<p>I want to write some tests against this library and see its log output, and I don't want to add any more logging libraries (no log4j or anything else). </p>\n\n<p>I understand that SLF4J and Common Logging are both logging abstractions so I probably need to write my own simple concrete logger (or maybe not, since jcl-over-slf4j includes org.apache.commons.logging.impl.SimpleLog?). If so, what interfaces should I implement, and more importantly, how do I set up SL4J/Common Logging to use my logger in my test? I read in the <a href=\"http://www.slf4j.org/faq.html#slf4j_compatible\" rel=\"nofollow\">SLF4J docs that I have to modify the StaticLoggerBinder class</a>... does that really mean that I actually have to download SLF4J sources, modify the class and recompile it?</p>\n"},{"tags":["java","environment-variables","containers","visual-studio-code"],"owner":{"account_id":6408837,"reputation":73,"user_id":4969202,"display_name":"Gunasekaran SP"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":150,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1672936681,"creation_date":1592906572,"question_id":62532173,"body_markdown":"How to set java.home path in VS Code Remote Container and I want to know how the path should be mentioned. I have the jdk in my local machine.\r\n\r\nI tried pointing to local absolute path like **C:\\jdk1.xxx** obviously it failed since local files can&#39;t be accessed inside a container.\r\n\r\nI would like to know how the path should be specified for java home.","title":"How to set java.home path in VS Code Remote Container","body":"<p>How to set java.home path in VS Code Remote Container and I want to know how the path should be mentioned. I have the jdk in my local machine.</p>\n<p>I tried pointing to local absolute path like <strong>C:\\jdk1.xxx</strong> obviously it failed since local files can't be accessed inside a container.</p>\n<p>I would like to know how the path should be specified for java home.</p>\n"},{"tags":["java","command-line-interface"],"comments":[{"owner":{"account_id":19118721,"reputation":6319,"user_id":13963086,"display_name":"k314159"},"score":1,"creation_date":1672937378,"post_id":75021622,"comment_id":132390498,"body_markdown":"The option `-Dinputfile=input.txt`, when placed before the class name, is a _System Property_ and you should get it using `String inputfile = System.getProperty(&quot;inputfile&quot;);`.","body":"The option <code>-Dinputfile=input.txt</code>, when placed before the class name, is a <i>System Property</i> and you should get it using <code>String inputfile = System.getProperty(&quot;inputfile&quot;);</code>."},{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":1,"creation_date":1672992452,"post_id":75021622,"comment_id":132402034,"body_markdown":"Please provide enough code so others can better understand or reproduce the problem.","body":"Please provide enough code so others can better understand or reproduce the problem."}],"owner":{"account_id":27444437,"reputation":1,"user_id":20938491,"display_name":"Valdemar"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":26,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1672936512,"creation_date":1672936512,"question_id":75021622,"body_markdown":"How to make sure that the name of the input file (input .txt)is not written in the program\r\nbut it could be changed using these type arguments (-Dinputfile)\r\n\r\nI tried to figure it out myself, but nothing worked, I hope for your help...","title":"How to do so if parameters are passed, then use them, if not, then standard input.txt, output.txt in java","body":"<p>How to make sure that the name of the input file (input .txt)is not written in the program\nbut it could be changed using these type arguments (-Dinputfile)</p>\n<p>I tried to figure it out myself, but nothing worked, I hope for your help...</p>\n"},{"tags":["java","jira-rest-api","jira-rest-java-api"],"comments":[{"owner":{"account_id":2843847,"reputation":55833,"user_id":2442804,"accept_rate":80,"display_name":"luk2302"},"score":0,"creation_date":1614859762,"post_id":66474704,"comment_id":117517012,"body_markdown":"is this jira server or jira cloud?","body":"is this jira server or jira cloud?"},{"owner":{"account_id":13618913,"reputation":572,"user_id":11014103,"display_name":"Koushik J"},"score":0,"creation_date":1614859939,"post_id":66474704,"comment_id":117517073,"body_markdown":"@luk2302 it is jira server","body":"@luk2302 it is jira server"},{"owner":{"account_id":2843847,"reputation":55833,"user_id":2442804,"accept_rate":80,"display_name":"luk2302"},"score":0,"creation_date":1614860143,"post_id":66474704,"comment_id":117517177,"body_markdown":"In that case you will probably need to go with OAuth: https://developer.atlassian.com/server/jira/platform/oauth/","body":"In that case you will probably need to go with OAuth: <a href=\"https://developer.atlassian.com/server/jira/platform/oauth/\" rel=\"nofollow noreferrer\">developer.atlassian.com/server/jira/platform/oauth</a>"}],"answers":[{"tags":[],"owner":{"account_id":12705185,"reputation":101,"user_id":9230701,"display_name":"Irgoff"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1622732821,"creation_date":1622732821,"answer_id":67823987,"question_id":66474704,"body_markdown":"You have to :\r\n- Generate a token : \r\nhttps://support.atlassian.com/atlassian-account/docs/manage-api-tokens-for-your-atlassian-account/&lt;br&gt;\r\n- Once you have your token, replace &quot;*username*&quot; by your email address and &quot;*password*&quot; by the token.","title":"Authenticate Jira Api in Java with personal API token","body":"<p>You have to :</p>\n<ul>\n<li>Generate a token :\n<a href=\"https://support.atlassian.com/atlassian-account/docs/manage-api-tokens-for-your-atlassian-account/\" rel=\"nofollow noreferrer\">https://support.atlassian.com/atlassian-account/docs/manage-api-tokens-for-your-atlassian-account/</a><br></li>\n<li>Once you have your token, replace &quot;<em>username</em>&quot; by your email address and &quot;<em>password</em>&quot; by the token.</li>\n</ul>\n"},{"tags":[],"owner":{"account_id":20282,"reputation":5556,"user_id":48310,"accept_rate":95,"display_name":"Chris Kimpton"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1672936439,"creation_date":1672936439,"answer_id":75021607,"question_id":66474704,"body_markdown":"I tried the suggested answer but that failed for me.  I did get it to work using the suggestion on this page via an Authentication Handler that passes in the Bearer/Access Token:\r\nhttps://community.atlassian.com/t5/Jira-questions/How-do-I-use-a-personal-access-token-PAT-in-jira-rest-java/qaq-p/1859167","title":"Authenticate Jira Api in Java with personal API token","body":"<p>I tried the suggested answer but that failed for me.  I did get it to work using the suggestion on this page via an Authentication Handler that passes in the Bearer/Access Token:\n<a href=\"https://community.atlassian.com/t5/Jira-questions/How-do-I-use-a-personal-access-token-PAT-in-jira-rest-java/qaq-p/1859167\" rel=\"nofollow noreferrer\">https://community.atlassian.com/t5/Jira-questions/How-do-I-use-a-personal-access-token-PAT-in-jira-rest-java/qaq-p/1859167</a></p>\n"}],"owner":{"account_id":13618913,"reputation":572,"user_id":11014103,"display_name":"Koushik J"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":3825,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":2,"score":2,"last_activity_date":1672936439,"creation_date":1614859661,"question_id":66474704,"body_markdown":"I am trying to retrieve issues from jira. I am able to get response using username and password. But As passwords keeps changing, i want to authenticate using api token. But i am not able to do it.\r\nHere is my Code:\r\n\r\n    public class JiraMetrics {\r\n\r\n    private static final String JIRA_URL = &quot;https://jira.company.com&quot;;\r\n    private static final String JIRA_USERNAME = &quot;username&quot;;\r\n    private static final String JIRA_password = &quot;password&quot;;\r\n\r\n         public static  void main(String[] args) throws URISyntaxException {\r\n\r\n\r\n  \r\n\r\n        JiraRestClientFactory factory = new AsynchronousJiraRestClientFactory();\r\n\r\n        URI uri = new URI(JIRA_URL);\r\n        JiraRestClient client = factory.createWithBasicHttpAuthentication(uri,JIRA_USERNAME,JIRA_Password);\r\n\r\n\r\n\r\n        //Calling issues\r\n        Promise&lt;SearchResult&gt; searchJqlPromise = client.getSearchClient().searchJql(&quot;query&quot;);\r\n\r\n        for (Issue issue : searchJqlPromise.claim().getIssues()) {\r\n            System.out.println(issue.getKey());\r\n          \r\n        }\r\n\r\n       }\r\n\r\nInstead of password, could we just call using api token?","title":"Authenticate Jira Api in Java with personal API token","body":"<p>I am trying to retrieve issues from jira. I am able to get response using username and password. But As passwords keeps changing, i want to authenticate using api token. But i am not able to do it.\nHere is my Code:</p>\n<pre><code>public class JiraMetrics {\n\nprivate static final String JIRA_URL = &quot;https://jira.company.com&quot;;\nprivate static final String JIRA_USERNAME = &quot;username&quot;;\nprivate static final String JIRA_password = &quot;password&quot;;\n\n     public static  void main(String[] args) throws URISyntaxException {\n\n\n\n\n    JiraRestClientFactory factory = new AsynchronousJiraRestClientFactory();\n\n    URI uri = new URI(JIRA_URL);\n    JiraRestClient client = factory.createWithBasicHttpAuthentication(uri,JIRA_USERNAME,JIRA_Password);\n\n\n\n    //Calling issues\n    Promise&lt;SearchResult&gt; searchJqlPromise = client.getSearchClient().searchJql(&quot;query&quot;);\n\n    for (Issue issue : searchJqlPromise.claim().getIssues()) {\n        System.out.println(issue.getKey());\n      \n    }\n\n   }\n</code></pre>\n<p>Instead of password, could we just call using api token?</p>\n"},{"tags":["javascript","java","encryption"],"comments":[{"owner":{"account_id":12359353,"reputation":42442,"user_id":9014097,"display_name":"Topaco"},"score":1,"creation_date":1672147948,"post_id":74929291,"comment_id":132229309,"body_markdown":"`PBEWithMD5AndDES` in the Java code uses an 8 bytes salt by definition. Without salt the Java code throws an *InvalidAlgorithmParameterException: Salt must be 8 bytes long*.  So the question is, what key derivation are you using on the encryption side. Post the encryption code (especially regarding the key derivation). By the way, `des-ede` denotes Triple DES (2TDEA).","body":"<code>PBEWithMD5AndDES</code> in the Java code uses an 8 bytes salt by definition. Without salt the Java code throws an <i>InvalidAlgorithmParameterException: Salt must be 8 bytes long</i>.  So the question is, what key derivation are you using on the encryption side. Post the encryption code (especially regarding the key derivation). By the way, <code>des-ede</code> denotes Triple DES (2TDEA)."},{"owner":{"display_name":"user20871694"},"score":0,"creation_date":1672224221,"post_id":74929291,"comment_id":132244965,"body_markdown":"@Topaco My encryption code don&#39;t need salt, i already post it (first code).\nI use wrong encryption with des-ede ?","body":"@Topaco My encryption code don&#39;t need salt, i already post it (first code). I use wrong encryption with des-ede ?"},{"owner":{"account_id":12359353,"reputation":42442,"user_id":9014097,"display_name":"Topaco"},"score":0,"creation_date":1672225601,"post_id":74929291,"comment_id":132245306,"body_markdown":"In the first code, the salt is called `data` (for whatever reason), i.e. the first code uses a salt as well.","body":"In the first code, the salt is called <code>data</code> (for whatever reason), i.e. the first code uses a salt as well."},{"owner":{"display_name":"user20871694"},"score":0,"creation_date":1672825500,"post_id":74929291,"comment_id":132358371,"body_markdown":"I don&#39;t salt the password and all tutorial salt password too, and my salt is random and i don&#39;t need it for decode with my java code @Topaco","body":"I don&#39;t salt the password and all tutorial salt password too, and my salt is random and i don&#39;t need it for decode with my java code @Topaco"},{"owner":{"account_id":12359353,"reputation":42442,"user_id":9014097,"display_name":"Topaco"},"score":0,"creation_date":1672830084,"post_id":74929291,"comment_id":132359814,"body_markdown":"*...I don&#39;t salt the password...* and *...my salt is random...* contradict each other. It is not clear from your question what the problem is. Post the code you use for the **en**cryption. If it is the encryption counterpart of the Java code that applies PBEWithMD5AndDES, it is mandatory that you use a salt. If you use a random salt (which is the correct approach!), the salt has to be sent together with the ciphertext to the decrypting side (usually concatenated). Note that the salt is not secret (but must be randomly generated for each encryption).","body":"<i>...I don&#39;t salt the password...</i> and <i>...my salt is random...</i> contradict each other. It is not clear from your question what the problem is. Post the code you use for the <b>en</b>cryption. If it is the encryption counterpart of the Java code that applies PBEWithMD5AndDES, it is mandatory that you use a salt. If you use a random salt (which is the correct approach!), the salt has to be sent together with the ciphertext to the decrypting side (usually concatenated). Note that the salt is not secret (but must be randomly generated for each encryption)."},{"owner":{"display_name":"user20871694"},"score":0,"creation_date":1672862512,"post_id":74929291,"comment_id":132371130,"body_markdown":"I updated my code, i don&#39;t save the salt and i can decode the file with a random salt, and when i try to decode the same file with js that doesn&#39;t work @Topaco","body":"I updated my code, i don&#39;t save the salt and i can decode the file with a random salt, and when i try to decode the same file with js that doesn&#39;t work @Topaco"},{"owner":{"account_id":12359353,"reputation":42442,"user_id":9014097,"display_name":"Topaco"},"score":0,"creation_date":1672871518,"post_id":74929291,"comment_id":132373635,"body_markdown":"Since `Random()` is called with the same seed, the same salt is generated each time, i.e. the Java code uses a *static* salt (which is insecure btw). You will probably not find a NodeJS implementation that is analogous to `Random()`, so you will need to determine the salt at runtime of the Java code (logging or debugging). This salt is then to be used in the NodeJS code.","body":"Since <code>Random()</code> is called with the same seed, the same salt is generated each time, i.e. the Java code uses a <i>static</i> salt (which is insecure btw). You will probably not find a NodeJS implementation that is analogous to <code>Random()</code>, so you will need to determine the salt at runtime of the Java code (logging or debugging). This salt is then to be used in the NodeJS code."},{"owner":{"display_name":"user20871694"},"score":0,"creation_date":1672921516,"post_id":74929291,"comment_id":132384328,"body_markdown":"Oh i understand ! I updated the code without Random, I will try to integrate with nodejs @Topaco","body":"Oh i understand ! I updated the code without Random, I will try to integrate with nodejs @Topaco"},{"owner":{"account_id":12359353,"reputation":42442,"user_id":9014097,"display_name":"Topaco"},"score":0,"creation_date":1672927481,"post_id":74929291,"comment_id":132386554,"body_markdown":"Your last change resulted in missing the `saveLastLogin()` method and the use of the `Random()` class, both of which are relevant to the answer. I have therefore rolled back your change and appended the code you posted regarding the salt to the end of the original question.","body":"Your last change resulted in missing the <code>saveLastLogin()</code> method and the use of the <code>Random()</code> class, both of which are relevant to the answer. I have therefore rolled back your change and appended the code you posted regarding the salt to the end of the original question."}],"answers":[{"tags":[],"owner":{"account_id":12359353,"reputation":42442,"user_id":9014097,"display_name":"Topaco"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1672936395,"creation_date":1672920080,"answer_id":75018075,"question_id":74929291,"body_markdown":"There are three issues in the code:\r\n\r\n- The Java code uses [`writeUTF()`][1]. This is based on [modified UTF-8][2], with two additional bytes prepended to contain the data size. A NodeJS library for modified UTF-8 is [*mutf-8*][3]. \r\n- Instead of `des-ede` ([3DES/2TDEA][5] in ECB mode), `des-cbc` (DES in CBC mode) must be applied. If DES is not available in the used NodeJS version, it can be mimicked with 3DES/2TDEA in CBC mode, `des-ede-cbc`, where the 8 bytes key has to be concatenated with itself to a 16 bytes key, reducing 3DES to DES. This workaround has the disadvantage of a performance loss.\r\n- The Java code applies a static 8 byte salt because `Random()` is instantiated with a static seed. This salt can be determined at runtime to (hex encoded): `0x0C9D4AE41E8315FC`.\r\n\r\n[*pbewithmd5anddes-js*][4] is a port of `PBEWithMD5AndDES` to NodeJS, from which the `KDF()`, `getKeyIV()` and `decrypt()` methods can be used, but must be adapted taking into account the above points. In addition, the functionality of `readUTF()` (the counterpart of `writeUTF()`) must be implemented. One possible solution is:\r\n\r\n```js\r\nvar crypto = require(&#39;crypto&#39;);\r\nconst { MUtf8Decoder } = require(&quot;mutf-8&quot;);\r\n\r\nvar pbewithmd5anddes = {\r\n\r\n  KDF: function(password,salt,iterations) {\r\n    var pwd = Buffer.from(password,&#39;utf-8&#39;);\r\n    var key = Buffer.concat([pwd, salt]);\r\n    var i;\r\n    for (i = 0; i &lt; iterations; i+=1) {\r\n      key = crypto.createHash(&#39;md5&#39;).update(key).digest();\r\n    }\r\n    return key;\r\n  },\r\n\r\n  getKeyIV: function(password,salt,iterations) {\r\n    var key = this.KDF(password,salt,iterations);\r\n    var keybuf = Buffer.from(key,&#39;binary&#39;).subarray(0,8);\r\n    var ivbuf = Buffer.from(key,&#39;binary&#39;).subarray(8,16);\r\n    return [ keybuf, ivbuf ];\r\n  },\r\n\r\n  decrypt: function(payload,password,salt,iterations) {\r\n    var encryptedBuffer = Buffer.from(payload,&#39;base64&#39;);\r\n    var kiv = this.getKeyIV(password,salt,iterations);\r\n    //var decipher = crypto.createDecipheriv(&#39;des-cbc&#39;, kiv[0], kiv[1]);                              // Fix 1: If supported, apply DES-CBC with key K\r\n    var decipher = crypto.createDecipheriv(&#39;des-ede-cbc&#39;, Buffer.concat([kiv[0], kiv[0]]), kiv[1]);   // otherwise DES-EDE-CBC with key K|K  \r\n    var decryptedBuf = Buffer.concat([decipher.update(encryptedBuffer), decipher.final()])\r\n    var decrypted = this.readUTF(decryptedBuf)                                                        // Fix 2: apply writeUTF counterpart\r\n    return decrypted;\r\n  },\r\n\r\n  readUTF: function(decryptedBuf) {\r\n    var decoder = new MUtf8Decoder()\r\n    var decryptedData = []\r\n    var i = 0;\r\n    while (i &lt; decryptedBuf.length){\r\n      var lengthObj = decryptedBuf.readInt16BE(i);\r\n      var bytesObj = decryptedBuf.subarray(i+2, i+2+lengthObj);\r\n      var strObj = decoder.decode(bytesObj)\r\n      decryptedData.push(strObj)\r\n      i += 2 + lengthObj;\r\n    }\r\n    return decryptedData;\r\n  }\r\n};\r\n```\r\n\r\n---------------\r\n\r\nTest:\r\n\r\nOn the Java side, the following is executed: \r\n\r\n```java\r\nsaveLastLogin(file, &quot;This is the first plaintext with special characters like &#167;, $ and €.&quot;, &quot;This is the second plaintext with special characters like &#167;, $ and €.&quot;);\r\n```\r\n\r\nThe raw ciphertext written to `file` is Base64 encoded:\r\n\r\n```none\r\nOw8bdeNM0QpNFQaoDe7dhG3k9nWz/UZ6v3+wQVgrD5QvWR/4+sA+YvqtnQBsy35nQkwhwGRBv1h1eOa587NaFtnJUWVHsRsncLWZ05+dD2rYVpcZRA8s6P2iANK6yLr+GO/+UpZpSe0fA4fFqEK1nm3U7NXdyddfuOlZ3h/RiyxK5819LieUne4F8/TpMzT0RIWkxqagbVw=\r\n```\r\n\r\nThis can be decrypted on the NodeJS side with:\r\n\r\n```js\r\nvar payload = &#39;Ow8bdeNM0QpNFQaoDe7dhG3k9nWz/UZ6v3+wQVgrD5QvWR/4+sA+YvqtnQBsy35nQkwhwGRBv1h1eOa587NaFtnJUWVHsRsncLWZ05+dD2rYVpcZRA8s6P2iANK6yLr+GO/+UpZpSe0fA4fFqEK1nm3U7NXdyddfuOlZ3h/RiyxK5819LieUne4F8/TpMzT0RIWkxqagbVw=&#39;;\r\nvar password = &#39;mysecretpassword&#39;;\r\nvar salt = Buffer.from(&#39;0C9D4AE41E8315FC&#39;, &#39;hex&#39;);\r\nvar iterations = 5;\r\nvar decrypted = pbewithmd5anddes.decrypt(payload,password,salt,iterations);\r\nconsole.log(decrypted);\r\n```\r\n\r\nwith the output:\r\n\r\n```none\r\n[\r\n  &#39;This is the first plaintext with special characters like &#167;, $ and €.&#39;,\r\n  &#39;This is the second plaintext with special characters like &#167;, $ and €.&#39;\r\n]\r\n```\r\n\r\n---------------\r\n\r\nNote that the code contains serious vulnerabilities:\r\n- `PBEWithMD5AndDES` uses a key derivation based on the broken MD5 digest (PBKDF1), and as encryption algorithm the deprecated DES (officially withdrawn almost 20 years ago).\r\n- Use of a static salt. \r\n- An iteration count of 5 is generally much too small.\r\n- `Random()` (unlike `SecureRandom()`) is not cryptographically strong. Also note that it is not a good idea to use a PRNG like `Random()` for deterministic key derivation, as the implementation may change, leading to different results even with the same seed.  \r\n\r\n[1]: https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/io/DataOutputStream.html#writeUTF(java.lang.String)\r\n[2]: https://en.wikipedia.org/wiki/UTF-8#Modified_UTF-8\r\n[3]: https://github.com/sciencesakura/mutf-8\r\n[4]: https://gist.github.com/qzaidi/5401800#file-pbewithmd5anddes-js\r\n[5]: https://en.wikipedia.org/wiki/Triple_DES#Keying_options","title":"Convert Java&#39;s PBEWithMD5AndDES without salt to JavaScript with crypto","body":"<p>There are three issues in the code:</p>\n<ul>\n<li>The Java code uses <a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/io/DataOutputStream.html#writeUTF(java.lang.String)\" rel=\"nofollow noreferrer\"><code>writeUTF()</code></a>. This is based on <a href=\"https://en.wikipedia.org/wiki/UTF-8#Modified_UTF-8\" rel=\"nofollow noreferrer\">modified UTF-8</a>, with two additional bytes prepended to contain the data size. A NodeJS library for modified UTF-8 is <a href=\"https://github.com/sciencesakura/mutf-8\" rel=\"nofollow noreferrer\"><em>mutf-8</em></a>.</li>\n<li>Instead of <code>des-ede</code> (<a href=\"https://en.wikipedia.org/wiki/Triple_DES#Keying_options\" rel=\"nofollow noreferrer\">3DES/2TDEA</a> in ECB mode), <code>des-cbc</code> (DES in CBC mode) must be applied. If DES is not available in the used NodeJS version, it can be mimicked with 3DES/2TDEA in CBC mode, <code>des-ede-cbc</code>, where the 8 bytes key has to be concatenated with itself to a 16 bytes key, reducing 3DES to DES. This workaround has the disadvantage of a performance loss.</li>\n<li>The Java code applies a static 8 byte salt because <code>Random()</code> is instantiated with a static seed. This salt can be determined at runtime to (hex encoded): <code>0x0C9D4AE41E8315FC</code>.</li>\n</ul>\n<p><a href=\"https://gist.github.com/qzaidi/5401800#file-pbewithmd5anddes-js\" rel=\"nofollow noreferrer\"><em>pbewithmd5anddes-js</em></a> is a port of <code>PBEWithMD5AndDES</code> to NodeJS, from which the <code>KDF()</code>, <code>getKeyIV()</code> and <code>decrypt()</code> methods can be used, but must be adapted taking into account the above points. In addition, the functionality of <code>readUTF()</code> (the counterpart of <code>writeUTF()</code>) must be implemented. One possible solution is:</p>\n<pre class=\"lang-js prettyprint-override\"><code>var crypto = require('crypto');\nconst { MUtf8Decoder } = require(&quot;mutf-8&quot;);\n\nvar pbewithmd5anddes = {\n\n  KDF: function(password,salt,iterations) {\n    var pwd = Buffer.from(password,'utf-8');\n    var key = Buffer.concat([pwd, salt]);\n    var i;\n    for (i = 0; i &lt; iterations; i+=1) {\n      key = crypto.createHash('md5').update(key).digest();\n    }\n    return key;\n  },\n\n  getKeyIV: function(password,salt,iterations) {\n    var key = this.KDF(password,salt,iterations);\n    var keybuf = Buffer.from(key,'binary').subarray(0,8);\n    var ivbuf = Buffer.from(key,'binary').subarray(8,16);\n    return [ keybuf, ivbuf ];\n  },\n\n  decrypt: function(payload,password,salt,iterations) {\n    var encryptedBuffer = Buffer.from(payload,'base64');\n    var kiv = this.getKeyIV(password,salt,iterations);\n    //var decipher = crypto.createDecipheriv('des-cbc', kiv[0], kiv[1]);                              // Fix 1: If supported, apply DES-CBC with key K\n    var decipher = crypto.createDecipheriv('des-ede-cbc', Buffer.concat([kiv[0], kiv[0]]), kiv[1]);   // otherwise DES-EDE-CBC with key K|K  \n    var decryptedBuf = Buffer.concat([decipher.update(encryptedBuffer), decipher.final()])\n    var decrypted = this.readUTF(decryptedBuf)                                                        // Fix 2: apply writeUTF counterpart\n    return decrypted;\n  },\n\n  readUTF: function(decryptedBuf) {\n    var decoder = new MUtf8Decoder()\n    var decryptedData = []\n    var i = 0;\n    while (i &lt; decryptedBuf.length){\n      var lengthObj = decryptedBuf.readInt16BE(i);\n      var bytesObj = decryptedBuf.subarray(i+2, i+2+lengthObj);\n      var strObj = decoder.decode(bytesObj)\n      decryptedData.push(strObj)\n      i += 2 + lengthObj;\n    }\n    return decryptedData;\n  }\n};\n</code></pre>\n<hr />\n<p>Test:</p>\n<p>On the Java side, the following is executed:</p>\n<pre class=\"lang-java prettyprint-override\"><code>saveLastLogin(file, &quot;This is the first plaintext with special characters like §, $ and €.&quot;, &quot;This is the second plaintext with special characters like §, $ and €.&quot;);\n</code></pre>\n<p>The raw ciphertext written to <code>file</code> is Base64 encoded:</p>\n<pre class=\"lang-none prettyprint-override\"><code>Ow8bdeNM0QpNFQaoDe7dhG3k9nWz/UZ6v3+wQVgrD5QvWR/4+sA+YvqtnQBsy35nQkwhwGRBv1h1eOa587NaFtnJUWVHsRsncLWZ05+dD2rYVpcZRA8s6P2iANK6yLr+GO/+UpZpSe0fA4fFqEK1nm3U7NXdyddfuOlZ3h/RiyxK5819LieUne4F8/TpMzT0RIWkxqagbVw=\n</code></pre>\n<p>This can be decrypted on the NodeJS side with:</p>\n<pre class=\"lang-js prettyprint-override\"><code>var payload = 'Ow8bdeNM0QpNFQaoDe7dhG3k9nWz/UZ6v3+wQVgrD5QvWR/4+sA+YvqtnQBsy35nQkwhwGRBv1h1eOa587NaFtnJUWVHsRsncLWZ05+dD2rYVpcZRA8s6P2iANK6yLr+GO/+UpZpSe0fA4fFqEK1nm3U7NXdyddfuOlZ3h/RiyxK5819LieUne4F8/TpMzT0RIWkxqagbVw=';\nvar password = 'mysecretpassword';\nvar salt = Buffer.from('0C9D4AE41E8315FC', 'hex');\nvar iterations = 5;\nvar decrypted = pbewithmd5anddes.decrypt(payload,password,salt,iterations);\nconsole.log(decrypted);\n</code></pre>\n<p>with the output:</p>\n<pre class=\"lang-none prettyprint-override\"><code>[\n  'This is the first plaintext with special characters like §, $ and €.',\n  'This is the second plaintext with special characters like §, $ and €.'\n]\n</code></pre>\n<hr />\n<p>Note that the code contains serious vulnerabilities:</p>\n<ul>\n<li><code>PBEWithMD5AndDES</code> uses a key derivation based on the broken MD5 digest (PBKDF1), and as encryption algorithm the deprecated DES (officially withdrawn almost 20 years ago).</li>\n<li>Use of a static salt.</li>\n<li>An iteration count of 5 is generally much too small.</li>\n<li><code>Random()</code> (unlike <code>SecureRandom()</code>) is not cryptographically strong. Also note that it is not a good idea to use a PRNG like <code>Random()</code> for deterministic key derivation, as the implementation may change, leading to different results even with the same seed.</li>\n</ul>\n"}],"owner":{"display_name":"user20871694"},"comment_count":9,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":178,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":75018075,"answer_count":1,"score":1,"last_activity_date":1672936395,"creation_date":1672144299,"question_id":74929291,"body_markdown":"I have the following code for decryption in java, I want that to be implemented in nodejs but the i found many tuto for my problem but they use a salt and that don&#39;t work when i try to remove the salt system.\r\n\r\nMy olds functions from java\r\n\r\n```\r\n    public void readLastLogin(File lastLogin) {\r\n        try {\r\n            final Cipher ciph = this.openCipher(Cipher.DECRYPT_MODE);\r\n            final DataInputStream dis = new DataInputStream(new CipherInputStream(new FileInputStream(lastLogin), ciph));\r\n\r\n            String user = dis.readUTF();\r\n            String token = dis.readUTF();\r\n            dis.close();\r\n        } catch (Exception e) {\r\n            e.printStackTrace();\r\n        }\r\n    }\r\n\r\n    public void saveLastLogin(File lastLogin, String user, String token) {\r\n        try {\r\n            final Cipher ciph = this.openCipher(Cipher.ENCRYPT_MODE);\r\n            final DataOutputStream dos = new DataOutputStream(new CipherOutputStream(new FileOutputStream(lastLogin), ciph));\r\n\r\n            dos.writeUTF(user);\r\n            dos.writeUTF(token);\r\n            dos.close();\r\n        } catch (final Exception e) {\r\n            e.printStackTrace();\r\n        }\r\n    }\r\n\r\n    private Cipher openCipher(final int mode) throws Exception {\r\n        final Random rnd = new Random(43287234L);\r\n        final byte[] data = new byte[8];\r\n\r\n        rnd.nextBytes(data);\r\n        final PBEParameterSpec spec = new PBEParameterSpec(data, 5);\r\n        final SecretKey key = SecretKeyFactory\r\n                .getInstance(&quot;PBEWithMD5AndDES&quot;)\r\n                .generateSecret(new PBEKeySpec(&quot;mysecretpassword&quot;.toCharArray()));\r\n\r\n        final Cipher ret = Cipher.getInstance(&quot;PBEWithMD5AndDES&quot;);\r\n        ret.init(mode, key, spec);\r\n        return ret;\r\n    }\r\n```\r\n\r\n\r\nI try this but not working\r\n\r\n```\r\nKDF(password, iterations) {\r\n var key = new Buffer(password,&#39;utf-8&#39;);\r\n var i;\r\n for (i = 0; i &lt; iterations; i+=1) {\r\n  key = crypto.createHash(&quot;md5&quot;).update(key).digest();\r\n }\r\n return key;\r\n}\r\n\r\ngetKeyIV(password, iterations) {\r\n var key = this.KDF(password, iterations);\r\n var keybuf = new Buffer(key,&#39;binary&#39;).slice(0,8);\r\n var ivbuf = new Buffer(key,&#39;binary&#39;).slice(8,16);\r\n return [ keybuf, ivbuf ];\r\n}\r\n\r\ndecrypt(message) {\r\n var kiv = this.getKeyIV(&#39;password&#39; ,5);\r\n var decipher = crypto.createDecipheriv(&#39;des-ede&#39;, kiv[0], kiv[1]);\r\n var result = decipher.update(message, &#39;hex&#39;, &#39;utf-8&#39;);\r\n return result + decipher.final(&#39;utf-8&#39;);\r\n}\r\n```\r\n\r\n**Edit:** The salt generated at runtime of the Java code is hex encoded: `0x0C9D4AE41E8315FC`\r\n\r\n```java\r\nfinal byte[] data = new byte[8];\r\ndata[0] = 12;\r\ndata[1] = -99;\r\ndata[2] = 74;\r\ndata[3] = -28;\r\ndata[4] = 30;\r\ndata[5] = -125;\r\ndata[6] = 21;\r\ndata[7] = -4;\r\n```\r\n","title":"Convert Java&#39;s PBEWithMD5AndDES without salt to JavaScript with crypto","body":"<p>I have the following code for decryption in java, I want that to be implemented in nodejs but the i found many tuto for my problem but they use a salt and that don't work when i try to remove the salt system.</p>\n<p>My olds functions from java</p>\n<pre><code>    public void readLastLogin(File lastLogin) {\n        try {\n            final Cipher ciph = this.openCipher(Cipher.DECRYPT_MODE);\n            final DataInputStream dis = new DataInputStream(new CipherInputStream(new FileInputStream(lastLogin), ciph));\n\n            String user = dis.readUTF();\n            String token = dis.readUTF();\n            dis.close();\n        } catch (Exception e) {\n            e.printStackTrace();\n        }\n    }\n\n    public void saveLastLogin(File lastLogin, String user, String token) {\n        try {\n            final Cipher ciph = this.openCipher(Cipher.ENCRYPT_MODE);\n            final DataOutputStream dos = new DataOutputStream(new CipherOutputStream(new FileOutputStream(lastLogin), ciph));\n\n            dos.writeUTF(user);\n            dos.writeUTF(token);\n            dos.close();\n        } catch (final Exception e) {\n            e.printStackTrace();\n        }\n    }\n\n    private Cipher openCipher(final int mode) throws Exception {\n        final Random rnd = new Random(43287234L);\n        final byte[] data = new byte[8];\n\n        rnd.nextBytes(data);\n        final PBEParameterSpec spec = new PBEParameterSpec(data, 5);\n        final SecretKey key = SecretKeyFactory\n                .getInstance(&quot;PBEWithMD5AndDES&quot;)\n                .generateSecret(new PBEKeySpec(&quot;mysecretpassword&quot;.toCharArray()));\n\n        final Cipher ret = Cipher.getInstance(&quot;PBEWithMD5AndDES&quot;);\n        ret.init(mode, key, spec);\n        return ret;\n    }\n</code></pre>\n<p>I try this but not working</p>\n<pre><code>KDF(password, iterations) {\n var key = new Buffer(password,'utf-8');\n var i;\n for (i = 0; i &lt; iterations; i+=1) {\n  key = crypto.createHash(&quot;md5&quot;).update(key).digest();\n }\n return key;\n}\n\ngetKeyIV(password, iterations) {\n var key = this.KDF(password, iterations);\n var keybuf = new Buffer(key,'binary').slice(0,8);\n var ivbuf = new Buffer(key,'binary').slice(8,16);\n return [ keybuf, ivbuf ];\n}\n\ndecrypt(message) {\n var kiv = this.getKeyIV('password' ,5);\n var decipher = crypto.createDecipheriv('des-ede', kiv[0], kiv[1]);\n var result = decipher.update(message, 'hex', 'utf-8');\n return result + decipher.final('utf-8');\n}\n</code></pre>\n<p><strong>Edit:</strong> The salt generated at runtime of the Java code is hex encoded: <code>0x0C9D4AE41E8315FC</code></p>\n<pre class=\"lang-java prettyprint-override\"><code>final byte[] data = new byte[8];\ndata[0] = 12;\ndata[1] = -99;\ndata[2] = 74;\ndata[3] = -28;\ndata[4] = 30;\ndata[5] = -125;\ndata[6] = 21;\ndata[7] = -4;\n</code></pre>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":1622859,"reputation":2292,"user_id":1499066,"display_name":"John Smith"},"score":0,"creation_date":1380879699,"post_id":19177994,"comment_id":28372916,"body_markdown":"in the while loop, just collect as many lines , as you want, into a String or StringBuilder and write them to separate files. You cannot know the number of files beforehand, it might be better, to define a maximum number of lines in a file.","body":"in the while loop, just collect as many lines , as you want, into a String or StringBuilder and write them to separate files. You cannot know the number of files beforehand, it might be better, to define a maximum number of lines in a file."},{"owner":{"account_id":2366187,"reputation":60172,"user_id":2071828,"accept_rate":88,"display_name":"Boris the Spider"},"score":0,"creation_date":1380879711,"post_id":19177994,"comment_id":28372920,"body_markdown":"You either need to loop twice, once to get the number of lines and once to split. Or you could guess at the number of lines and split that way.","body":"You either need to loop twice, once to get the number of lines and once to split. Or you could guess at the number of lines and split that way."},{"owner":{"account_id":2366187,"reputation":60172,"user_id":2071828,"accept_rate":88,"display_name":"Boris the Spider"},"score":0,"creation_date":1380879812,"post_id":19177994,"comment_id":28372976,"body_markdown":"@kw4nta why on earth would you want to _store_ the lines. 1) the OP says that storing all the lines isn&#39;t an option, 2) given that you can write the lines straight to another file...","body":"@kw4nta why on earth would you want to <i>store</i> the lines. 1) the OP says that storing all the lines isn&#39;t an option, 2) given that you can write the lines straight to another file..."},{"owner":{"account_id":2522926,"reputation":30310,"user_id":2192903,"accept_rate":73,"display_name":"Arnaud Denoyelle"},"score":0,"creation_date":1380879821,"post_id":19177994,"comment_id":28372981,"body_markdown":"I suggest you to do a first pass where you count the number of lines. On a second pass, you divide it by `n` and create `n` files containing `total/n` lines. Use `BufferedReader.readLine()` for that purpose.","body":"I suggest you to do a first pass where you count the number of lines. On a second pass, you divide it by <code>n</code> and create <code>n</code> files containing <code>total&#47;n</code> lines. Use <code>BufferedReader.readLine()</code> for that purpose."},{"owner":{"account_id":2522926,"reputation":30310,"user_id":2192903,"accept_rate":73,"display_name":"Arnaud Denoyelle"},"score":6,"creation_date":1380879899,"post_id":19177994,"comment_id":28373015,"body_markdown":"Another solution if it makes sense in this use case : use a round robbin algorithm (first line to first file, second line to second file etc)","body":"Another solution if it makes sense in this use case : use a round robbin algorithm (first line to first file, second line to second file etc)"}],"answers":[{"tags":[],"owner":{"account_id":1521734,"reputation":3389,"user_id":1421189,"accept_rate":58,"display_name":"Pranalee"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1380879869,"creation_date":1380879869,"answer_id":19178142,"question_id":19177994,"body_markdown":"Have a counter to count no of entries. Let&#39;s say one entry per line. \r\n\r\nstep1: Initially create new subfile, set counter=0; \r\n\r\nstep2: increment counter as you read each entry from source file to buffer\r\n\r\nstep3: when counter reaches limit to number of entries that you want to write in each sub file, flush contents of buffer to subfile. close the subfile\r\n\r\nstep4 : jump to step1 till you have data in source file to read from\r\n\r\n","title":"Java - Read file and split into multiple files","body":"<p>Have a counter to count no of entries. Let's say one entry per line. </p>\n\n<p>step1: Initially create new subfile, set counter=0; </p>\n\n<p>step2: increment counter as you read each entry from source file to buffer</p>\n\n<p>step3: when counter reaches limit to number of entries that you want to write in each sub file, flush contents of buffer to subfile. close the subfile</p>\n\n<p>step4 : jump to step1 till you have data in source file to read from</p>\n"},{"tags":[],"owner":{"account_id":2027463,"reputation":582,"user_id":1812077,"display_name":"Leff"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1380880026,"creation_date":1380880026,"answer_id":19178202,"question_id":19177994,"body_markdown":"There&#39;s no need to loop twice through the file. You could estimate the size of each chunk as the source file size divided by number of chunks needed. Then you just stop filling each cunk with data as it&#39;s size exceeds estimated.","title":"Java - Read file and split into multiple files","body":"<p>There's no need to loop twice through the file. You could estimate the size of each chunk as the source file size divided by number of chunks needed. Then you just stop filling each cunk with data as it's size exceeds estimated.</p>\n"},{"comments":[{"owner":{"account_id":142175,"reputation":3164,"user_id":349710,"accept_rate":89,"display_name":"Pujan"},"score":7,"creation_date":1451362352,"post_id":19179193,"comment_id":56750580,"body_markdown":"Well it may split a line midway and it matters for csv file","body":"Well it may split a line midway and it matters for csv file"},{"owner":{"account_id":2062923,"reputation":781,"user_id":1839081,"accept_rate":56,"display_name":"Julian"},"score":0,"creation_date":1507716092,"post_id":19179193,"comment_id":80318199,"body_markdown":"Is there a way to overcome this? so that it doesn&#39;t split midline?","body":"Is there a way to overcome this? so that it doesn&#39;t split midline?"},{"owner":{"account_id":2987511,"reputation":3024,"user_id":5772982,"display_name":"Kumar Abhishek"},"score":0,"creation_date":1508261741,"post_id":19179193,"comment_id":80538567,"body_markdown":"In my Company We have Fixed Record Size for each Column and we do padding into CSV so we divide the file size with with one record size and then we split. also While reading each line is sent on MQ to be inserted so that it is async. Anyways your soultion is good.","body":"In my Company We have Fixed Record Size for each Column and we do padding into CSV so we divide the file size with with one record size and then we split. also While reading each line is sent on MQ to be inserted so that it is async. Anyways your soultion is good."},{"owner":{"account_id":23121,"reputation":527376,"user_id":57695,"accept_rate":75,"display_name":"Peter Lawrey"},"score":0,"creation_date":1530711149,"post_id":19179193,"comment_id":89332600,"body_markdown":"You can scan the end of the buffer to find the portion of the last line and add it to the next file.","body":"You can scan the end of the buffer to find the portion of the last line and add it to the next file."},{"owner":{"account_id":2678397,"reputation":800,"user_id":2314232,"accept_rate":25,"display_name":"Jesbus"},"score":1,"creation_date":1581095626,"post_id":19179193,"comment_id":106328035,"body_markdown":"According to the `RandomAccessFile` documentation, `.read(` is not obligated to fill the entire destination buffer. Maybe this code should use `.readFully(` instead?","body":"According to the <code>RandomAccessFile</code> documentation, <code>.read(</code> is not obligated to fill the entire destination buffer. Maybe this code should use <code>.readFully(</code> instead?"},{"owner":{"account_id":5483053,"reputation":406,"user_id":4358787,"display_name":"Gaurav"},"score":0,"creation_date":1594733418,"post_id":19179193,"comment_id":111224765,"body_markdown":"@harsh this is amazing! was able to split 2.2gb file into 10 different files!","body":"@harsh this is amazing! was able to split 2.2gb file into 10 different files!"},{"owner":{"account_id":5254406,"reputation":1108,"user_id":4197679,"accept_rate":79,"display_name":"Ashok kumar Ganesan"},"score":0,"creation_date":1657660905,"post_id":19179193,"comment_id":128862775,"body_markdown":"Good one! But when splitting the file, it would be good to maintain the column/header as well. Any suggestions?","body":"Good one! But when splitting the file, it would be good to maintain the column/header as well. Any suggestions?"}],"tags":[],"owner":{"account_id":801225,"reputation":7522,"user_id":878732,"accept_rate":60,"display_name":"harsh"},"comment_count":7,"down_vote_count":1,"up_vote_count":26,"is_accepted":true,"score":25,"last_activity_date":1577561936,"creation_date":1380883075,"answer_id":19179193,"question_id":19177994,"body_markdown":"Since one file can be very large, each split file could be large as well.\n\n**Example:**\n\n&gt; Source File Size: 5GB \n&gt;\n&gt; Num Splits: 5: Destination \n&gt;\n&gt; File Size: 1GB each (5 files)\n\nThere is no way to read this large split chunk in one go, even if we have such a memory. Basically for each split we can read a fix size `byte-array` which we know should be feasible in terms of performance as well memory.\n\n\n\n**NumSplits: 10 MaxReadBytes: 8KB**\n\n    public static void main(String[] args) throws Exception\n        {\n            RandomAccessFile raf = new RandomAccessFile(&quot;test.csv&quot;, &quot;r&quot;);\n            long numSplits = 10; //from user input, extract it from args\n            long sourceSize = raf.length();\n            long bytesPerSplit = sourceSize/numSplits ;\n            long remainingBytes = sourceSize % numSplits;\n    \n            int maxReadBufferSize = 8 * 1024; //8KB\n            for(int destIx=1; destIx &lt;= numSplits; destIx++) {\n                BufferedOutputStream bw = new BufferedOutputStream(new FileOutputStream(&quot;split.&quot;+destIx));\n                if(bytesPerSplit &gt; maxReadBufferSize) {\n                    long numReads = bytesPerSplit/maxReadBufferSize;\n                    long numRemainingRead = bytesPerSplit % maxReadBufferSize;\n                    for(int i=0; i&lt;numReads; i++) {\n                        readWrite(raf, bw, maxReadBufferSize);\n                    }\n                    if(numRemainingRead &gt; 0) {\n                        readWrite(raf, bw, numRemainingRead);\n                    }\n                }else {\n                    readWrite(raf, bw, bytesPerSplit);\n                }\n                bw.close();\n            }\n            if(remainingBytes &gt; 0) {\n                BufferedOutputStream bw = new BufferedOutputStream(new FileOutputStream(&quot;split.&quot;+(numSplits+1)));\n                readWrite(raf, bw, remainingBytes);\n                bw.close();\n            }\n                raf.close();\n        }\n    \n        static void readWrite(RandomAccessFile raf, BufferedOutputStream bw, long numBytes) throws IOException {\n            byte[] buf = new byte[(int) numBytes];\n            int val = raf.read(buf);\n            if(val != -1) {\n                bw.write(buf);\n            }\n        }","title":"Java - Read file and split into multiple files","body":"<p>Since one file can be very large, each split file could be large as well.</p>\n<p><strong>Example:</strong></p>\n<blockquote>\n<p>Source File Size: 5GB</p>\n<p>Num Splits: 5: Destination</p>\n<p>File Size: 1GB each (5 files)</p>\n</blockquote>\n<p>There is no way to read this large split chunk in one go, even if we have such a memory. Basically for each split we can read a fix size <code>byte-array</code> which we know should be feasible in terms of performance as well memory.</p>\n<p><strong>NumSplits: 10 MaxReadBytes: 8KB</strong></p>\n<pre><code>public static void main(String[] args) throws Exception\n    {\n        RandomAccessFile raf = new RandomAccessFile(&quot;test.csv&quot;, &quot;r&quot;);\n        long numSplits = 10; //from user input, extract it from args\n        long sourceSize = raf.length();\n        long bytesPerSplit = sourceSize/numSplits ;\n        long remainingBytes = sourceSize % numSplits;\n\n        int maxReadBufferSize = 8 * 1024; //8KB\n        for(int destIx=1; destIx &lt;= numSplits; destIx++) {\n            BufferedOutputStream bw = new BufferedOutputStream(new FileOutputStream(&quot;split.&quot;+destIx));\n            if(bytesPerSplit &gt; maxReadBufferSize) {\n                long numReads = bytesPerSplit/maxReadBufferSize;\n                long numRemainingRead = bytesPerSplit % maxReadBufferSize;\n                for(int i=0; i&lt;numReads; i++) {\n                    readWrite(raf, bw, maxReadBufferSize);\n                }\n                if(numRemainingRead &gt; 0) {\n                    readWrite(raf, bw, numRemainingRead);\n                }\n            }else {\n                readWrite(raf, bw, bytesPerSplit);\n            }\n            bw.close();\n        }\n        if(remainingBytes &gt; 0) {\n            BufferedOutputStream bw = new BufferedOutputStream(new FileOutputStream(&quot;split.&quot;+(numSplits+1)));\n            readWrite(raf, bw, remainingBytes);\n            bw.close();\n        }\n            raf.close();\n    }\n\n    static void readWrite(RandomAccessFile raf, BufferedOutputStream bw, long numBytes) throws IOException {\n        byte[] buf = new byte[(int) numBytes];\n        int val = raf.read(buf);\n        if(val != -1) {\n            bw.write(buf);\n        }\n    }\n</code></pre>\n"},{"comments":[{"owner":{"account_id":6404083,"reputation":514,"user_id":4965893,"accept_rate":50,"display_name":"Autumn Leonard"},"score":1,"creation_date":1449263756,"post_id":24903576,"comment_id":55947204,"body_markdown":"This doesn&#39;t do what the OP wanted (set number of files), but it does what I want (set number of lines). Good code! Modified it to be a function taking in a file name and dynamically naming created files.","body":"This doesn&#39;t do what the OP wanted (set number of files), but it does what I want (set number of lines). Good code! Modified it to be a function taking in a file name and dynamically naming created files."},{"owner":{"account_id":2472947,"reputation":3401,"user_id":2154300,"accept_rate":94,"display_name":"bish"},"score":0,"creation_date":1473328431,"post_id":24903576,"comment_id":66102009,"body_markdown":"C&amp;P from http://javaprogramming.language-tutorial.com/2012/10/split-huge-files-into-small-text-files.html ? (The blog entry is from 2012)","body":"C&amp;P from <a href=\"http://javaprogramming.language-tutorial.com/2012/10/split-huge-files-into-small-text-files.html\" rel=\"nofollow noreferrer\">javaprogramming.language-tutorial.com/2012/10/&hellip;</a> ? (The blog entry is from 2012)"},{"owner":{"account_id":13053348,"reputation":824,"user_id":9432967,"display_name":"Omid.N"},"score":0,"creation_date":1590012140,"post_id":24903576,"comment_id":109524115,"body_markdown":"Why should the number of lines be double?","body":"Why should the number of lines be double?"},{"owner":{"account_id":4555074,"reputation":138,"user_id":3699039,"accept_rate":0,"display_name":"Muhammad_08"},"score":0,"creation_date":1667389906,"post_id":24903576,"comment_id":131154523,"body_markdown":"one thing is very important that is scanner isn&#39;t thread safe","body":"one thing is very important that is scanner isn&#39;t thread safe"}],"tags":[],"owner":{"account_id":4358550,"reputation":105,"user_id":3556411,"display_name":"user3556411"},"comment_count":4,"down_vote_count":0,"up_vote_count":9,"is_accepted":false,"score":9,"last_activity_date":1406098076,"creation_date":1406098076,"answer_id":24903576,"question_id":19177994,"body_markdown":"    import java.io.*;  \r\n    import java.util.Scanner;  \r\n    public class split {  \r\n    public static void main(String args[])  \r\n    {  \r\n     try{  \r\n      // Reading file and getting no. of files to be generated  \r\n      String inputfile = &quot;C:/test.txt&quot;; //  Source File Name.  \r\n      double nol = 2000.0; //  No. of lines to be split and saved in each output file.  \r\n      File file = new File(inputfile);  \r\n      Scanner scanner = new Scanner(file);  \r\n      int count = 0;  \r\n      while (scanner.hasNextLine())   \r\n      {  \r\n       scanner.nextLine();  \r\n       count++;  \r\n      }  \r\n      System.out.println(&quot;Lines in the file: &quot; + count);     // Displays no. of lines in the input file.  \r\n      \r\n      double temp = (count/nol);  \r\n      int temp1=(int)temp;  \r\n      int nof=0;  \r\n      if(temp1==temp)  \r\n      {  \r\n       nof=temp1;  \r\n      }  \r\n      else  \r\n      {  \r\n       nof=temp1+1;  \r\n      }  \r\n      System.out.println(&quot;No. of files to be generated :&quot;+nof); // Displays no. of files to be generated.  \r\n       \r\n      //---------------------------------------------------------------------------------------------------------  \r\n      \r\n      // Actual splitting of file into smaller files  \r\n      \r\n      FileInputStream fstream = new FileInputStream(inputfile); DataInputStream in = new DataInputStream(fstream);  \r\n      \r\n      BufferedReader br = new BufferedReader(new InputStreamReader(in)); String strLine;  \r\n       \r\n      for (int j=1;j&lt;=nof;j++)  \r\n      {  \r\n       FileWriter fstream1 = new FileWriter(&quot;C:/New Folder/File&quot;+j+&quot;.txt&quot;);     // Destination File Location  \r\n       BufferedWriter out = new BufferedWriter(fstream1);   \r\n       for (int i=1;i&lt;=nol;i++)  \r\n       {  \r\n        strLine = br.readLine();   \r\n        if (strLine!= null)  \r\n        {  \r\n         out.write(strLine);   \r\n         if(i!=nol)  \r\n         {  \r\n          out.newLine();  \r\n         }  \r\n        }  \r\n       }  \r\n       out.close();  \r\n      }  \r\n      \r\n      in.close();  \r\n     }catch (Exception e)  \r\n     {  \r\n      System.err.println(&quot;Error: &quot; + e.getMessage());  \r\n     }  \r\n      \r\n    }  \r\n      \r\n    }   \r\n\r\n","title":"Java - Read file and split into multiple files","body":"<pre><code>import java.io.*;  \nimport java.util.Scanner;  \npublic class split {  \npublic static void main(String args[])  \n{  \n try{  \n  // Reading file and getting no. of files to be generated  \n  String inputfile = \"C:/test.txt\"; //  Source File Name.  \n  double nol = 2000.0; //  No. of lines to be split and saved in each output file.  \n  File file = new File(inputfile);  \n  Scanner scanner = new Scanner(file);  \n  int count = 0;  \n  while (scanner.hasNextLine())   \n  {  \n   scanner.nextLine();  \n   count++;  \n  }  \n  System.out.println(\"Lines in the file: \" + count);     // Displays no. of lines in the input file.  \n\n  double temp = (count/nol);  \n  int temp1=(int)temp;  \n  int nof=0;  \n  if(temp1==temp)  \n  {  \n   nof=temp1;  \n  }  \n  else  \n  {  \n   nof=temp1+1;  \n  }  \n  System.out.println(\"No. of files to be generated :\"+nof); // Displays no. of files to be generated.  \n\n  //---------------------------------------------------------------------------------------------------------  \n\n  // Actual splitting of file into smaller files  \n\n  FileInputStream fstream = new FileInputStream(inputfile); DataInputStream in = new DataInputStream(fstream);  \n\n  BufferedReader br = new BufferedReader(new InputStreamReader(in)); String strLine;  \n\n  for (int j=1;j&lt;=nof;j++)  \n  {  \n   FileWriter fstream1 = new FileWriter(\"C:/New Folder/File\"+j+\".txt\");     // Destination File Location  \n   BufferedWriter out = new BufferedWriter(fstream1);   \n   for (int i=1;i&lt;=nol;i++)  \n   {  \n    strLine = br.readLine();   \n    if (strLine!= null)  \n    {  \n     out.write(strLine);   \n     if(i!=nol)  \n     {  \n      out.newLine();  \n     }  \n    }  \n   }  \n   out.close();  \n  }  \n\n  in.close();  \n }catch (Exception e)  \n {  \n  System.err.println(\"Error: \" + e.getMessage());  \n }  \n\n}  \n\n}   \n</code></pre>\n"},{"comments":[{"owner":{"account_id":6115978,"reputation":2219,"user_id":4771017,"accept_rate":75,"display_name":"CubeJockey"},"score":1,"creation_date":1463773261,"post_id":37353956,"comment_id":62224642,"body_markdown":"While this link may answer the question, it is better to include the essential parts of the answer here and provide the link for reference.  Link-only answers can become invalid if the linked page changes. - [From Review](/review/low-quality-posts/12423371)","body":"While this link may answer the question, it is better to include the essential parts of the answer here and provide the link for reference.  Link-only answers can become invalid if the linked page changes. - <a href=\"/review/low-quality-posts/12423371\">From Review</a>"},{"owner":{"account_id":1588298,"reputation":96,"user_id":1472187,"display_name":"user1472187"},"score":1,"creation_date":1463785149,"post_id":37353956,"comment_id":62229210,"body_markdown":"Thanks, Updated the comment.","body":"Thanks, Updated the comment."}],"tags":[],"owner":{"account_id":1588298,"reputation":96,"user_id":1472187,"display_name":"user1472187"},"comment_count":2,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1495822521,"creation_date":1463770451,"answer_id":37353956,"question_id":19177994,"body_markdown":"Though its a old question but for reference I am listing out the code which I used to split large files to any sizes and it works with any Java versions above 1.4 .\r\n\r\nSample Split and Join blocks were like below:\r\n\r\n    public void join(String FilePath) {\r\n        long leninfile = 0, leng = 0;\r\n        int count = 1, data = 0;\r\n        try {\r\n            File filename = new File(FilePath);\r\n            //RandomAccessFile outfile = new RandomAccessFile(filename,&quot;rw&quot;);\r\n    \r\n            OutputStream outfile = new BufferedOutputStream(new FileOutputStream(filename));\r\n            while (true) {\r\n                filename = new File(FilePath + count + &quot;.sp&quot;);\r\n                if (filename.exists()) {\r\n                    //RandomAccessFile infile = new RandomAccessFile(filename,&quot;r&quot;);\r\n                    InputStream infile = new BufferedInputStream(new FileInputStream(filename));\r\n                    data = infile.read();\r\n                    while (data != -1) {\r\n                        outfile.write(data);\r\n                        data = infile.read();\r\n                    }\r\n                    leng++;\r\n                    infile.close();\r\n                    count++;\r\n                } else {\r\n                    break;\r\n                }\r\n            }\r\n            outfile.close();\r\n        } catch (Exception e) {\r\n            e.printStackTrace();\r\n        }\r\n    }\r\n    \r\n    public void split(String FilePath, long splitlen) {\r\n        long leninfile = 0, leng = 0;\r\n        int count = 1, data;\r\n        try {\r\n            File filename = new File(FilePath);\r\n            //RandomAccessFile infile = new RandomAccessFile(filename, &quot;r&quot;);\r\n            InputStream infile = new BufferedInputStream(new FileInputStream(filename));\r\n            data = infile.read();\r\n            while (data != -1) {\r\n                filename = new File(FilePath + count + &quot;.sp&quot;);\r\n                //RandomAccessFile outfile = new RandomAccessFile(filename, &quot;rw&quot;);\r\n                OutputStream outfile = new BufferedOutputStream(new FileOutputStream(filename));\r\n                while (data != -1 &amp;&amp; leng &lt; splitlen) {\r\n                    outfile.write(data);\r\n                    leng++;\r\n                    data = infile.read();\r\n                }\r\n                leninfile += leng;\r\n                leng = 0;\r\n                outfile.close();\r\n                count++;\r\n            }\r\n        } catch (Exception e) {\r\n            e.printStackTrace();\r\n        }\r\n    }\r\n\r\nComplete java code available here in [File Split in Java Program][1] link.\r\n\r\n\r\n  [1]: http://www.techpaste.com/2011/08/advanced-java-program-split-join-file-upload-size-slices/","title":"Java - Read file and split into multiple files","body":"<p>Though its a old question but for reference I am listing out the code which I used to split large files to any sizes and it works with any Java versions above 1.4 .</p>\n\n<p>Sample Split and Join blocks were like below:</p>\n\n<pre><code>public void join(String FilePath) {\n    long leninfile = 0, leng = 0;\n    int count = 1, data = 0;\n    try {\n        File filename = new File(FilePath);\n        //RandomAccessFile outfile = new RandomAccessFile(filename,\"rw\");\n\n        OutputStream outfile = new BufferedOutputStream(new FileOutputStream(filename));\n        while (true) {\n            filename = new File(FilePath + count + \".sp\");\n            if (filename.exists()) {\n                //RandomAccessFile infile = new RandomAccessFile(filename,\"r\");\n                InputStream infile = new BufferedInputStream(new FileInputStream(filename));\n                data = infile.read();\n                while (data != -1) {\n                    outfile.write(data);\n                    data = infile.read();\n                }\n                leng++;\n                infile.close();\n                count++;\n            } else {\n                break;\n            }\n        }\n        outfile.close();\n    } catch (Exception e) {\n        e.printStackTrace();\n    }\n}\n\npublic void split(String FilePath, long splitlen) {\n    long leninfile = 0, leng = 0;\n    int count = 1, data;\n    try {\n        File filename = new File(FilePath);\n        //RandomAccessFile infile = new RandomAccessFile(filename, \"r\");\n        InputStream infile = new BufferedInputStream(new FileInputStream(filename));\n        data = infile.read();\n        while (data != -1) {\n            filename = new File(FilePath + count + \".sp\");\n            //RandomAccessFile outfile = new RandomAccessFile(filename, \"rw\");\n            OutputStream outfile = new BufferedOutputStream(new FileOutputStream(filename));\n            while (data != -1 &amp;&amp; leng &lt; splitlen) {\n                outfile.write(data);\n                leng++;\n                data = infile.read();\n            }\n            leninfile += leng;\n            leng = 0;\n            outfile.close();\n            count++;\n        }\n    } catch (Exception e) {\n        e.printStackTrace();\n    }\n}\n</code></pre>\n\n<p>Complete java code available here in <a href=\"http://www.techpaste.com/2011/08/advanced-java-program-split-join-file-upload-size-slices/\" rel=\"nofollow noreferrer\">File Split in Java Program</a> link.</p>\n"},{"tags":[],"owner":{"account_id":3521210,"reputation":113,"user_id":2943431,"display_name":"amralieg"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1510298232,"creation_date":1510297156,"answer_id":47217275,"question_id":19177994,"body_markdown":"Here is one that worked for me and I used it to split 10GB file. it also enables you to add a header and a footer. very useful when splitting document based format such as XML and JSON because you need to add document wrapper in the new split files.\r\n\r\n   \r\n    import java.io.BufferedReader;\r\n    import java.io.BufferedWriter;\r\n    import java.io.File;\r\n    import java.io.IOException;\r\n    import java.nio.file.Files;\r\n    import java.nio.file.Path;\r\n    import java.nio.file.Paths;\r\n    import java.nio.file.StandardOpenOption;\r\n    \r\n    public class FileSpliter\r\n    {\r\n    \tpublic static void main(String[] args) throws IOException\r\n    \t{\r\n    \t\tsplitTextFiles(&quot;D:\\\\xref.csx&quot;, 750000, &quot;&quot;, &quot;&quot;, null);\r\n    \t}\r\n    \r\n    \tpublic static void splitTextFiles(String fileName, int maxRows, String header, String footer, String targetDir) throws IOException\r\n    \t{\r\n    \t\tFile bigFile = new File(fileName);\r\n    \t\tint i = 1;\r\n    \t\tString ext = fileName.substring(fileName.lastIndexOf(&quot;.&quot;));\r\n    \t\t\r\n    \t\tString fileNoExt = bigFile.getName().replace(ext, &quot;&quot;);\r\n    \t\tFile newDir = null;\r\n    \t\tif(targetDir != null)\r\n    \t\t{\r\n    \t\t\tnewDir = new File(targetDir);\t\t\t\r\n    \t\t}\r\n    \t\telse\r\n    \t\t{\r\n    \t\t\tnewDir = new File(bigFile.getParent() + &quot;\\\\&quot; + fileNoExt + &quot;_split&quot;);\r\n    \t\t}\r\n    \t\tnewDir.mkdirs();\r\n    \t\ttry (BufferedReader reader = Files.newBufferedReader(Paths.get(fileName)))\r\n    \t\t{\r\n    \t\t\tString line = null;\r\n    \t\t\tint lineNum = 1;\r\n    \t\t\tPath splitFile = Paths.get(newDir.getPath() + &quot;\\\\&quot; +  fileNoExt + &quot;_&quot; + String.format(&quot;%02d&quot;, i) + ext);\r\n    \t\t\tBufferedWriter writer = Files.newBufferedWriter(splitFile, StandardOpenOption.CREATE);\r\n    \t\t\twhile ((line = reader.readLine()) != null)\r\n    \t\t\t{\r\n    \t\t\t\tif(lineNum == 1)\r\n    \t\t\t\t{\r\n    \t\t\t\t\tSystem.out.print(&quot;new file created &#39;&quot; + splitFile.toString());\r\n    \t\t\t\t\tif(header != null &amp;&amp; header.length() &gt; 0)\r\n    \t\t\t\t\t{\r\n    \t\t\t\t\t\twriter.append(header);\r\n    \t\t\t\t\t\twriter.newLine();\r\n    \t\t\t\t\t}\r\n    \t\t\t\t}\r\n    \t\t\t\twriter.append(line);\r\n    \t\t\t\t\r\n    \t\t\t\tif (lineNum &gt;= maxRows)\r\n    \t\t\t\t{\r\n    \t\t\t\t\tif(footer != null &amp;&amp; footer.length() &gt; 0)\r\n    \t\t\t\t\t{\r\n    \t\t\t\t\t\twriter.newLine();\r\n    \t\t\t\t\t\twriter.append(footer);\r\n    \t\t\t\t\t}\r\n    \t\t\t\t\twriter.close();\r\n    \t\t\t\t\tSystem.out.println(&quot;, &quot; + lineNum + &quot; lines written to file&quot;);\r\n    \t\t\t\t\tlineNum = 1;\r\n    \t\t\t\t\ti++;\r\n    \t\t\t\t\tsplitFile = Paths.get(newDir.getPath() + &quot;\\\\&quot; + fileNoExt + &quot;_&quot; + String.format(&quot;%02d&quot;, i) + ext);\r\n    \t\t\t\t\twriter = Files.newBufferedWriter(splitFile, StandardOpenOption.CREATE);\r\n    \t\t\t\t}\r\n    \t\t\t\telse\r\n    \t\t\t\t{\r\n    \t\t\t\t\twriter.newLine();\r\n    \t\t\t\t\tlineNum++;\r\n    \t\t\t\t}\r\n    \t\t\t}\r\n    \t\t\tif(lineNum &lt;= maxRows) // early exit\r\n    \t\t\t{\r\n    \t\t\t\tif(footer != null &amp;&amp; footer.length() &gt; 0)\r\n    \t\t\t\t{\r\n    \t\t\t\t\twriter.newLine();\r\n    \t\t\t\t\tlineNum++;\r\n    \t\t\t\t\twriter.append(footer);\r\n    \t\t\t\t}\r\n    \t\t\t}\r\n    \t\t\twriter.close();\r\n    \t\t\tSystem.out.println(&quot;, &quot; + lineNum + &quot; lines written to file&quot;);\r\n    \t\t}\r\n    \t\t\r\n    \t\tSystem.out.println(&quot;file &#39;&quot; + bigFile.getName() + &quot;&#39; split into &quot; + i + &quot; files&quot;);\r\n    \t}\r\n    }\r\n\r\n","title":"Java - Read file and split into multiple files","body":"<p>Here is one that worked for me and I used it to split 10GB file. it also enables you to add a header and a footer. very useful when splitting document based format such as XML and JSON because you need to add document wrapper in the new split files.</p>\n\n<pre><code>import java.io.BufferedReader;\nimport java.io.BufferedWriter;\nimport java.io.File;\nimport java.io.IOException;\nimport java.nio.file.Files;\nimport java.nio.file.Path;\nimport java.nio.file.Paths;\nimport java.nio.file.StandardOpenOption;\n\npublic class FileSpliter\n{\n    public static void main(String[] args) throws IOException\n    {\n        splitTextFiles(\"D:\\\\xref.csx\", 750000, \"\", \"\", null);\n    }\n\n    public static void splitTextFiles(String fileName, int maxRows, String header, String footer, String targetDir) throws IOException\n    {\n        File bigFile = new File(fileName);\n        int i = 1;\n        String ext = fileName.substring(fileName.lastIndexOf(\".\"));\n\n        String fileNoExt = bigFile.getName().replace(ext, \"\");\n        File newDir = null;\n        if(targetDir != null)\n        {\n            newDir = new File(targetDir);           \n        }\n        else\n        {\n            newDir = new File(bigFile.getParent() + \"\\\\\" + fileNoExt + \"_split\");\n        }\n        newDir.mkdirs();\n        try (BufferedReader reader = Files.newBufferedReader(Paths.get(fileName)))\n        {\n            String line = null;\n            int lineNum = 1;\n            Path splitFile = Paths.get(newDir.getPath() + \"\\\\\" +  fileNoExt + \"_\" + String.format(\"%02d\", i) + ext);\n            BufferedWriter writer = Files.newBufferedWriter(splitFile, StandardOpenOption.CREATE);\n            while ((line = reader.readLine()) != null)\n            {\n                if(lineNum == 1)\n                {\n                    System.out.print(\"new file created '\" + splitFile.toString());\n                    if(header != null &amp;&amp; header.length() &gt; 0)\n                    {\n                        writer.append(header);\n                        writer.newLine();\n                    }\n                }\n                writer.append(line);\n\n                if (lineNum &gt;= maxRows)\n                {\n                    if(footer != null &amp;&amp; footer.length() &gt; 0)\n                    {\n                        writer.newLine();\n                        writer.append(footer);\n                    }\n                    writer.close();\n                    System.out.println(\", \" + lineNum + \" lines written to file\");\n                    lineNum = 1;\n                    i++;\n                    splitFile = Paths.get(newDir.getPath() + \"\\\\\" + fileNoExt + \"_\" + String.format(\"%02d\", i) + ext);\n                    writer = Files.newBufferedWriter(splitFile, StandardOpenOption.CREATE);\n                }\n                else\n                {\n                    writer.newLine();\n                    lineNum++;\n                }\n            }\n            if(lineNum &lt;= maxRows) // early exit\n            {\n                if(footer != null &amp;&amp; footer.length() &gt; 0)\n                {\n                    writer.newLine();\n                    lineNum++;\n                    writer.append(footer);\n                }\n            }\n            writer.close();\n            System.out.println(\", \" + lineNum + \" lines written to file\");\n        }\n\n        System.out.println(\"file '\" + bigFile.getName() + \"' split into \" + i + \" files\");\n    }\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":2177647,"reputation":13,"user_id":1927935,"display_name":"Narendra Kumar Samal"},"score":0,"creation_date":1511245326,"post_id":47406425,"comment_id":81766248,"body_markdown":"The code I have written above is working and I have tested for a file with 40L records/line. It takes around 10 secs to split the file into chinks of 1L line per file.","body":"The code I have written above is working and I have tested for a file with 40L records/line. It takes around 10 secs to split the file into chinks of 1L line per file."},{"owner":{"account_id":1001793,"reputation":2131,"user_id":1016482,"accept_rate":50,"display_name":"rveach"},"score":0,"creation_date":1533235443,"post_id":47406425,"comment_id":90284061,"body_markdown":"The code above is missing re-adding the line separator. `writer.write(System.lineSeparator());` is needed, otherwise it is 1 huge line.","body":"The code above is missing re-adding the line separator. <code>writer.write(System.lineSeparator());</code> is needed, otherwise it is 1 huge line."}],"tags":[],"owner":{"account_id":2177647,"reputation":13,"user_id":1927935,"display_name":"Narendra Kumar Samal"},"comment_count":2,"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1511256683,"creation_date":1511245085,"answer_id":47406425,"question_id":19177994,"body_markdown":"Below code used to split a big file into small files with lesser lines.\r\n\r\n\r\n\t    long linesWritten = 0;\r\n\t\tint count = 1;\r\n\r\n\t\ttry {\r\n\t\t\tFile inputFile = new File(inputFilePath);\r\n\t\t\tInputStream inputFileStream = new BufferedInputStream(new FileInputStream(inputFile));\r\n\t\t\tBufferedReader reader = new BufferedReader(new InputStreamReader(inputFileStream));\r\n\r\n\t\t\tString line = reader.readLine();\r\n\r\n\t\t\tString fileName = inputFile.getName();\r\n\t\t\tString outfileName = outputFolderPath + &quot;\\\\&quot; + fileName;\r\n\r\n\t\t\twhile (line != null) {\r\n\t\t\t\tFile outFile = new File(outfileName + &quot;_&quot; + count + &quot;.split&quot;);\r\n\t\t\t\tWriter writer = new OutputStreamWriter(new FileOutputStream(outFile));\r\n\r\n\t\t\t\twhile (line != null &amp;&amp; linesWritten &lt; linesPerSplit) {\r\n\t\t\t\t\twriter.write(line);\r\n\t\t\t\t\tline = reader.readLine();\r\n\t\t\t\t\tlinesWritten++;\r\n\t\t\t\t}\r\n\r\n\t\t\t\twriter.close();\r\n\t\t\t\tlinesWritten = 0;//next file\r\n\t\t\t\tcount++;//nect file count\r\n\t\t\t}\r\n\r\n\t\t\treader.close();\r\n\r\n\t\t} catch (Exception e) {\r\n\t\t\te.printStackTrace();\r\n\t\t}\r\n","title":"Java - Read file and split into multiple files","body":"<p>Below code used to split a big file into small files with lesser lines.</p>\n\n<pre><code>    long linesWritten = 0;\n    int count = 1;\n\n    try {\n        File inputFile = new File(inputFilePath);\n        InputStream inputFileStream = new BufferedInputStream(new FileInputStream(inputFile));\n        BufferedReader reader = new BufferedReader(new InputStreamReader(inputFileStream));\n\n        String line = reader.readLine();\n\n        String fileName = inputFile.getName();\n        String outfileName = outputFolderPath + \"\\\\\" + fileName;\n\n        while (line != null) {\n            File outFile = new File(outfileName + \"_\" + count + \".split\");\n            Writer writer = new OutputStreamWriter(new FileOutputStream(outFile));\n\n            while (line != null &amp;&amp; linesWritten &lt; linesPerSplit) {\n                writer.write(line);\n                line = reader.readLine();\n                linesWritten++;\n            }\n\n            writer.close();\n            linesWritten = 0;//next file\n            count++;//nect file count\n        }\n\n        reader.close();\n\n    } catch (Exception e) {\n        e.printStackTrace();\n    }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":5939433,"reputation":1476,"user_id":4671263,"display_name":"Aymen"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1573659441,"creation_date":1573490878,"answer_id":58805472,"question_id":19177994,"body_markdown":"a clean solution to edit.\r\n\r\nthis solution involves loading the entire file into memory.\r\n\r\nset all line of a file in `List&lt;String&gt; rowsOfFile;`\r\n\r\nedit `maxSizeFile` to choice max size of a single file splitted\r\n\r\n    public void splitFile(File fileToSplit) throws IOException {\r\n      long maxSizeFile = 10000000 // 10mb\r\n      StringBuilder buffer = new StringBuilder((int) maxSizeFile);\r\n      int sizeOfRows = 0;\r\n      int recurrence = 0;\r\n      String fileName;\r\n      List&lt;String&gt; rowsOfFile;\r\n\r\n      rowsOfFile = Files.readAllLines(fileToSplit.toPath(), Charset.defaultCharset());\r\n\r\n      for (String row : rowsOfFile) {\r\n          buffer.append(row);\r\n          numOfRow++;\r\n          sizeOfRows += row.getBytes(StandardCharsets.UTF_8).length;\r\n          if (sizeOfRows &gt;= maxSizeFile) {\r\n              fileName = generateFileName(recurrence);\r\n              File newFile = new File(fileName);\r\n\r\n              try (PrintWriter writer = new PrintWriter(newFile)) {\r\n                  writer.println(buffer.toString());\r\n              }\r\n\r\n              recurrence++;\r\n              sizeOfRows = 0;\r\n              buffer = new StringBuilder();\r\n          }\r\n      }\r\n      // last rows\r\n      if (sizeOfRows &gt; 0) {\r\n          fileName = generateFileName(recurrence);\r\n          File newFile = createFile(fileName);\r\n\r\n          try (PrintWriter writer = new PrintWriter(newFile)) {\r\n              writer.println(buffer.toString());\r\n          }\r\n      }\r\n      Files.delete(fileToSplit.toPath());\r\n    }\r\n\r\nmethod to generate Name of file:\r\n\r\n        public String generateFileName(int numFile) {\r\n          String extension = &quot;.txt&quot;;\r\n          return &quot;myFile&quot; + numFile + extension;\r\n        }","title":"Java - Read file and split into multiple files","body":"<p>a clean solution to edit.</p>\n\n<p>this solution involves loading the entire file into memory.</p>\n\n<p>set all line of a file in <code>List&lt;String&gt; rowsOfFile;</code></p>\n\n<p>edit <code>maxSizeFile</code> to choice max size of a single file splitted</p>\n\n<pre><code>public void splitFile(File fileToSplit) throws IOException {\n  long maxSizeFile = 10000000 // 10mb\n  StringBuilder buffer = new StringBuilder((int) maxSizeFile);\n  int sizeOfRows = 0;\n  int recurrence = 0;\n  String fileName;\n  List&lt;String&gt; rowsOfFile;\n\n  rowsOfFile = Files.readAllLines(fileToSplit.toPath(), Charset.defaultCharset());\n\n  for (String row : rowsOfFile) {\n      buffer.append(row);\n      numOfRow++;\n      sizeOfRows += row.getBytes(StandardCharsets.UTF_8).length;\n      if (sizeOfRows &gt;= maxSizeFile) {\n          fileName = generateFileName(recurrence);\n          File newFile = new File(fileName);\n\n          try (PrintWriter writer = new PrintWriter(newFile)) {\n              writer.println(buffer.toString());\n          }\n\n          recurrence++;\n          sizeOfRows = 0;\n          buffer = new StringBuilder();\n      }\n  }\n  // last rows\n  if (sizeOfRows &gt; 0) {\n      fileName = generateFileName(recurrence);\n      File newFile = createFile(fileName);\n\n      try (PrintWriter writer = new PrintWriter(newFile)) {\n          writer.println(buffer.toString());\n      }\n  }\n  Files.delete(fileToSplit.toPath());\n}\n</code></pre>\n\n<p>method to generate Name of file:</p>\n\n<pre><code>    public String generateFileName(int numFile) {\n      String extension = \".txt\";\n      return \"myFile\" + numFile + extension;\n    }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":15231654,"reputation":97,"user_id":10990603,"display_name":"Ajith"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1601560957,"creation_date":1601560957,"answer_id":64157032,"question_id":19177994,"body_markdown":"Split a file to multiple chunks (in memory operation), here I&#39;m splitting any file to a size of 500kb(500000 bytes) :\r\n\r\n    public static List&lt;ByteArrayOutputStream&gt; splitFile(File f) {\r\n    List&lt;ByteArrayOutputStream&gt; datalist = new ArrayList&lt;&gt;();\r\n    try {\r\n\r\n        int sizeOfFiles = 500000;\r\n        byte[] buffer = new byte[sizeOfFiles];\r\n\r\n        try (FileInputStream fis = new FileInputStream(f); BufferedInputStream bis = new BufferedInputStream(fis)) {\r\n\r\n            int bytesAmount = 0;\r\n            while ((bytesAmount = bis.read(buffer)) &gt; 0) {\r\n                try (OutputStream out = new ByteArrayOutputStream()) {\r\n                    out.write(buffer, 0, bytesAmount);\r\n                    out.flush();\r\n                    datalist.add((ByteArrayOutputStream) out);\r\n                }\r\n            }\r\n        }\r\n    } catch (Exception e) {\r\n        //get the error\r\n    }\r\n\r\n    return datalist; }\r\n","title":"Java - Read file and split into multiple files","body":"<p>Split a file to multiple chunks (in memory operation), here I'm splitting any file to a size of 500kb(500000 bytes) :</p>\n<pre><code>public static List&lt;ByteArrayOutputStream&gt; splitFile(File f) {\nList&lt;ByteArrayOutputStream&gt; datalist = new ArrayList&lt;&gt;();\ntry {\n\n    int sizeOfFiles = 500000;\n    byte[] buffer = new byte[sizeOfFiles];\n\n    try (FileInputStream fis = new FileInputStream(f); BufferedInputStream bis = new BufferedInputStream(fis)) {\n\n        int bytesAmount = 0;\n        while ((bytesAmount = bis.read(buffer)) &gt; 0) {\n            try (OutputStream out = new ByteArrayOutputStream()) {\n                out.write(buffer, 0, bytesAmount);\n                out.flush();\n                datalist.add((ByteArrayOutputStream) out);\n            }\n        }\n    }\n} catch (Exception e) {\n    //get the error\n}\n\nreturn datalist; }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":8810132,"reputation":245,"user_id":6583432,"display_name":"Malkeith Singh"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1664305563,"creation_date":1664305563,"answer_id":73872668,"question_id":19177994,"body_markdown":"I am a bit late to answer, But here&#39;s how I did it:\r\n\r\n**Approach:**\r\n\r\nFirst I determine how many bytes each of the individual files should contain then I split the large file by bytes. Only one file chunk worth of data is loaded into memory at a time.\r\n\r\n**Example:-** if a 5 GB file is split into 10 files then only 500MB worth of bytes are loaded into memory at a time which are held in the **buffer** variable in the **splitBySize** method below.\r\n\r\n**Code Explaination:**\r\n\r\nThe method **splitFile** first gets the number of bytes each of the individual **file chunks** should contain by calling the **getSizeInBytes** method, then it calls the **splitBySize** method which splits the large file by size (i..e **maxChunkSize** represents the number of bytes each of file chunks will contain).\r\n\r\n    public static List&lt;File&gt; splitFile(File largeFile, int noOfFiles) throws IOException {\r\n        return splitBySize(largeFile, getSizeInBytes(largeFile.length(), noOfFiles));\r\n    }\r\n\r\n    public static List&lt;File&gt; splitBySize(File largeFile, int maxChunkSize) throws IOException {\r\n        List&lt;File&gt; list = new ArrayList&lt;&gt;();\r\n        int numberOfFiles = 0;\r\n        try (InputStream in = Files.newInputStream(largeFile.toPath())) {\r\n            final byte[] buffer = new byte[maxChunkSize];\r\n            int dataRead = in.read(buffer);\r\n            while (dataRead &gt; -1) {\r\n                list.add(stageLocally(buffer, dataRead));\r\n                numberOfFiles++;\r\n                dataRead = in.read(buffer);\r\n            }\r\n        }\r\n        System.out.println(&quot;Number of files generated: &quot; + numberOfFiles);\r\n        return list;\r\n    }\r\n\r\n    private static int getSizeInBytes(long totalBytes, int numberOfFiles) {\r\n        if (totalBytes % numberOfFiles != 0) {\r\n            totalBytes = ((totalBytes / numberOfFiles) + 1)*numberOfFiles;\r\n        }\r\n        long x = totalBytes / numberOfFiles;\r\n        if (x &gt; Integer.MAX_VALUE){\r\n            throw new NumberFormatException(&quot;Byte chunk too large&quot;);\r\n\r\n        }\r\n        return (int) x;\r\n    }\r\n\r\n\r\n\r\n**Full Code**:\r\n\r\n    public class StackOverflow {\r\n\r\n    private static final String INPUT_FILE_PATH = &quot;/Users/malkesingh/Downloads/5MB.zip&quot;;\r\n    private static final String TEMP_DIRECTORY = &quot;/Users/malkesingh/temp&quot;;\r\n\r\n    public static void main(String[] args) throws IOException {\r\n\r\n        File input = new File(INPUT_FILE_PATH);\r\n        File outPut = fileJoin2(splitFile(input, 5));\r\n\r\n        try (InputStream in = Files.newInputStream(input.toPath()); InputStream out = Files.newInputStream(outPut.toPath())) {\r\n            System.out.println(IOUtils.contentEquals(in, out));\r\n        }\r\n\r\n    }\r\n\r\n    public static List&lt;File&gt; splitFile(File largeFile, int noOfFiles) throws IOException {\r\n        return splitBySize(largeFile, getSizeInBytes(largeFile.length(), noOfFiles));\r\n    }\r\n\r\n    public static List&lt;File&gt; splitBySize(File largeFile, int maxChunkSize) throws IOException {\r\n        List&lt;File&gt; list = new ArrayList&lt;&gt;();\r\n        int numberOfFiles = 0;\r\n        try (InputStream in = Files.newInputStream(largeFile.toPath())) {\r\n            final byte[] buffer = new byte[maxChunkSize];\r\n            int dataRead = in.read(buffer);\r\n            while (dataRead &gt; -1) {\r\n                list.add(stageLocally(buffer, dataRead));\r\n                numberOfFiles++;\r\n                dataRead = in.read(buffer);\r\n            }\r\n        }\r\n        System.out.println(&quot;Number of files generated: &quot; + numberOfFiles);\r\n        return list;\r\n    }\r\n\r\n    private static int getSizeInBytes(long totalBytes, int numberOfFiles) {\r\n        if (totalBytes % numberOfFiles != 0) {\r\n            totalBytes = ((totalBytes / numberOfFiles) + 1)*numberOfFiles;\r\n        }\r\n        long x = totalBytes / numberOfFiles;\r\n        if (x &gt; Integer.MAX_VALUE){\r\n            throw new NumberFormatException(&quot;Byte chunk too large&quot;);\r\n\r\n        }\r\n        return (int) x;\r\n    }\r\n\r\n\r\n\r\n\r\n    private static File stageLocally(byte[] buffer, int length) throws IOException {\r\n        File outPutFile = File.createTempFile(&quot;temp-&quot;, &quot;split&quot;, new File(TEMP_DIRECTORY));\r\n        try(FileOutputStream fos = new FileOutputStream(outPutFile)) {\r\n            fos.write(buffer, 0, length);\r\n        }\r\n        return outPutFile;\r\n    }\r\n\r\n\r\n    public static File fileJoin2(List&lt;File&gt; list) throws IOException {\r\n        File outPutFile = File.createTempFile(&quot;temp-&quot;, &quot;unsplit&quot;, new File(TEMP_DIRECTORY));\r\n        FileOutputStream fos = new FileOutputStream(outPutFile);\r\n        for (File file : list) {\r\n            Files.copy(file.toPath(), fos);\r\n        }\r\n        fos.close();\r\n        return outPutFile;\r\n    }}","title":"Java - Read file and split into multiple files","body":"<p>I am a bit late to answer, But here's how I did it:</p>\n<p><strong>Approach:</strong></p>\n<p>First I determine how many bytes each of the individual files should contain then I split the large file by bytes. Only one file chunk worth of data is loaded into memory at a time.</p>\n<p><strong>Example:-</strong> if a 5 GB file is split into 10 files then only 500MB worth of bytes are loaded into memory at a time which are held in the <strong>buffer</strong> variable in the <strong>splitBySize</strong> method below.</p>\n<p><strong>Code Explaination:</strong></p>\n<p>The method <strong>splitFile</strong> first gets the number of bytes each of the individual <strong>file chunks</strong> should contain by calling the <strong>getSizeInBytes</strong> method, then it calls the <strong>splitBySize</strong> method which splits the large file by size (i..e <strong>maxChunkSize</strong> represents the number of bytes each of file chunks will contain).</p>\n<pre><code>public static List&lt;File&gt; splitFile(File largeFile, int noOfFiles) throws IOException {\n    return splitBySize(largeFile, getSizeInBytes(largeFile.length(), noOfFiles));\n}\n\npublic static List&lt;File&gt; splitBySize(File largeFile, int maxChunkSize) throws IOException {\n    List&lt;File&gt; list = new ArrayList&lt;&gt;();\n    int numberOfFiles = 0;\n    try (InputStream in = Files.newInputStream(largeFile.toPath())) {\n        final byte[] buffer = new byte[maxChunkSize];\n        int dataRead = in.read(buffer);\n        while (dataRead &gt; -1) {\n            list.add(stageLocally(buffer, dataRead));\n            numberOfFiles++;\n            dataRead = in.read(buffer);\n        }\n    }\n    System.out.println(&quot;Number of files generated: &quot; + numberOfFiles);\n    return list;\n}\n\nprivate static int getSizeInBytes(long totalBytes, int numberOfFiles) {\n    if (totalBytes % numberOfFiles != 0) {\n        totalBytes = ((totalBytes / numberOfFiles) + 1)*numberOfFiles;\n    }\n    long x = totalBytes / numberOfFiles;\n    if (x &gt; Integer.MAX_VALUE){\n        throw new NumberFormatException(&quot;Byte chunk too large&quot;);\n\n    }\n    return (int) x;\n}\n</code></pre>\n<p><strong>Full Code</strong>:</p>\n<pre><code>public class StackOverflow {\n\nprivate static final String INPUT_FILE_PATH = &quot;/Users/malkesingh/Downloads/5MB.zip&quot;;\nprivate static final String TEMP_DIRECTORY = &quot;/Users/malkesingh/temp&quot;;\n\npublic static void main(String[] args) throws IOException {\n\n    File input = new File(INPUT_FILE_PATH);\n    File outPut = fileJoin2(splitFile(input, 5));\n\n    try (InputStream in = Files.newInputStream(input.toPath()); InputStream out = Files.newInputStream(outPut.toPath())) {\n        System.out.println(IOUtils.contentEquals(in, out));\n    }\n\n}\n\npublic static List&lt;File&gt; splitFile(File largeFile, int noOfFiles) throws IOException {\n    return splitBySize(largeFile, getSizeInBytes(largeFile.length(), noOfFiles));\n}\n\npublic static List&lt;File&gt; splitBySize(File largeFile, int maxChunkSize) throws IOException {\n    List&lt;File&gt; list = new ArrayList&lt;&gt;();\n    int numberOfFiles = 0;\n    try (InputStream in = Files.newInputStream(largeFile.toPath())) {\n        final byte[] buffer = new byte[maxChunkSize];\n        int dataRead = in.read(buffer);\n        while (dataRead &gt; -1) {\n            list.add(stageLocally(buffer, dataRead));\n            numberOfFiles++;\n            dataRead = in.read(buffer);\n        }\n    }\n    System.out.println(&quot;Number of files generated: &quot; + numberOfFiles);\n    return list;\n}\n\nprivate static int getSizeInBytes(long totalBytes, int numberOfFiles) {\n    if (totalBytes % numberOfFiles != 0) {\n        totalBytes = ((totalBytes / numberOfFiles) + 1)*numberOfFiles;\n    }\n    long x = totalBytes / numberOfFiles;\n    if (x &gt; Integer.MAX_VALUE){\n        throw new NumberFormatException(&quot;Byte chunk too large&quot;);\n\n    }\n    return (int) x;\n}\n\n\n\n\nprivate static File stageLocally(byte[] buffer, int length) throws IOException {\n    File outPutFile = File.createTempFile(&quot;temp-&quot;, &quot;split&quot;, new File(TEMP_DIRECTORY));\n    try(FileOutputStream fos = new FileOutputStream(outPutFile)) {\n        fos.write(buffer, 0, length);\n    }\n    return outPutFile;\n}\n\n\npublic static File fileJoin2(List&lt;File&gt; list) throws IOException {\n    File outPutFile = File.createTempFile(&quot;temp-&quot;, &quot;unsplit&quot;, new File(TEMP_DIRECTORY));\n    FileOutputStream fos = new FileOutputStream(outPutFile);\n    for (File file : list) {\n        Files.copy(file.toPath(), fos);\n    }\n    fos.close();\n    return outPutFile;\n}}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":1,"creation_date":1672987908,"post_id":75021593,"comment_id":132401159,"body_markdown":"Your answer could be improved with additional supporting information. Please [edit] to add further details, such as citations or documentation, so that others can confirm that your answer is correct. You can find more information on how to write good answers [in the help center](/help/how-to-answer).","body":"Your answer could be improved with additional supporting information. Please <a href=\"https://stackoverflow.com/posts/75021593/edit\">edit</a> to add further details, such as citations or documentation, so that others can confirm that your answer is correct. You can find more information on how to write good answers <a href=\"/help/how-to-answer\">in the help center</a>."}],"tags":[],"owner":{"account_id":27444475,"reputation":1,"user_id":20938523,"display_name":"K.TEJ"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1672936367,"creation_date":1672936367,"answer_id":75021593,"question_id":19177994,"body_markdown":"    import java.util.*;\r\n    import java.io.*;\r\n    public class task13 {\r\n        public static void main(String[] args)throws IOException{\r\n            Scanner s =new Scanner(System.in);\r\n            System.out.print(&quot;Enter path:&quot;);\r\n            String a=s.next();\r\n            File f=new File(a+&quot;.txt&quot;);\r\n            Scanner st=new Scanner(f);\r\n            System.out.println(f.canRead()+&quot;\\n&quot;+f.canWrite());\r\n            long l=f.length();\r\n            System.out.println(&quot;Length is:&quot;+l);\r\n            System.out.print(&quot;Enter no.of partitions:&quot;);\r\n            int p=s.nextInt();\r\n            long x=l/p;\r\n            st.useDelimiter(&quot;\\\\Z&quot;);\r\n            String t=st.next();\r\n            int j=0;\r\n            System.out.println(&quot;Each File Length is:&quot;+x);\r\n            for(int i=1;i&lt;=p;i++){\r\n               File ft=new File(a+&quot;-&quot;+i+&quot;.txt&quot;);\r\n               ft.createNewFile();\r\n               int g=(j*(int)x);\r\n               int h=(j+1)*(int)x;\r\n               if(g&lt;=l&amp;&amp;h&lt;=l){\r\n               FileWriter fw=new FileWriter(a+&quot;-&quot;+i+&quot;.txt&quot;);\r\n                   String v=t.substring(g,h);            \r\n                   fw.write(v);\r\n                   j++;\r\n                   fw.close();\r\n               }}\r\n            }}","title":"Java - Read file and split into multiple files","body":"<pre><code>import java.util.*;\nimport java.io.*;\npublic class task13 {\n    public static void main(String[] args)throws IOException{\n        Scanner s =new Scanner(System.in);\n        System.out.print(&quot;Enter path:&quot;);\n        String a=s.next();\n        File f=new File(a+&quot;.txt&quot;);\n        Scanner st=new Scanner(f);\n        System.out.println(f.canRead()+&quot;\\n&quot;+f.canWrite());\n        long l=f.length();\n        System.out.println(&quot;Length is:&quot;+l);\n        System.out.print(&quot;Enter no.of partitions:&quot;);\n        int p=s.nextInt();\n        long x=l/p;\n        st.useDelimiter(&quot;\\\\Z&quot;);\n        String t=st.next();\n        int j=0;\n        System.out.println(&quot;Each File Length is:&quot;+x);\n        for(int i=1;i&lt;=p;i++){\n           File ft=new File(a+&quot;-&quot;+i+&quot;.txt&quot;);\n           ft.createNewFile();\n           int g=(j*(int)x);\n           int h=(j+1)*(int)x;\n           if(g&lt;=l&amp;&amp;h&lt;=l){\n           FileWriter fw=new FileWriter(a+&quot;-&quot;+i+&quot;.txt&quot;);\n               String v=t.substring(g,h);            \n               fw.write(v);\n               j++;\n               fw.close();\n           }}\n        }}\n</code></pre>\n"}],"owner":{"account_id":1887192,"reputation":5567,"user_id":2225572,"accept_rate":67,"display_name":"Ankit Rustagi"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":133386,"favorite_count":0,"down_vote_count":1,"up_vote_count":18,"accepted_answer_id":19179193,"answer_count":11,"score":17,"last_activity_date":1672936367,"creation_date":1380879448,"question_id":19177994,"body_markdown":"I have a file which I would like to read in Java and split this file into `n` (user input) output files. Here is how I read the file:\r\n\r\n    int n = 4;\r\n    BufferedReader br = new BufferedReader(new FileReader(&quot;file.csv&quot;));\r\n    try {\r\n        String line = br.readLine();\r\n\r\n        while (line != null) {\r\n            line = br.readLine();\r\n        }\r\n    } finally {\r\n        br.close();\r\n    }\r\n\r\n\r\nHow do I split the file - `file.csv` into `n` files?\r\n\r\nNote - Since the number of entries in the file are of the order of 100k, I can&#39;t store the file content into an array and then split it and save into multiple files.","title":"Java - Read file and split into multiple files","body":"<p>I have a file which I would like to read in Java and split this file into <code>n</code> (user input) output files. Here is how I read the file:</p>\n\n<pre><code>int n = 4;\nBufferedReader br = new BufferedReader(new FileReader(\"file.csv\"));\ntry {\n    String line = br.readLine();\n\n    while (line != null) {\n        line = br.readLine();\n    }\n} finally {\n    br.close();\n}\n</code></pre>\n\n<p>How do I split the file - <code>file.csv</code> into <code>n</code> files?</p>\n\n<p>Note - Since the number of entries in the file are of the order of 100k, I can't store the file content into an array and then split it and save into multiple files.</p>\n"},{"tags":["java","android","java-native-interface","android-runonuithread"],"answers":[{"comments":[{"owner":{"account_id":20969448,"reputation":298,"user_id":15406934,"display_name":"Abhi_M"},"score":0,"creation_date":1672916495,"post_id":75016313,"comment_id":132382733,"body_markdown":"The end result is the same even if I user Handler to post to the UI thread. Keyboard gets hidden when I post to the UI thread.","body":"The end result is the same even if I user Handler to post to the UI thread. Keyboard gets hidden when I post to the UI thread."}],"tags":[],"owner":{"account_id":12731703,"reputation":3217,"user_id":9248098,"display_name":"Gowtham K K"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1672911068,"creation_date":1672911068,"answer_id":75016313,"question_id":75016036,"body_markdown":"Not sure why `runOnUIthread` is making the keyboard to hide.\r\n\r\nBut you can try using `Handler` to post update to UI instead.\r\n\r\n    Handler(Looper.getMainLooper()).post {\r\n    //Update UI.\r\n     }","title":"runOnUIThread for Android is hiding the soft keyboard","body":"<p>Not sure why <code>runOnUIthread</code> is making the keyboard to hide.</p>\n<p>But you can try using <code>Handler</code> to post update to UI instead.</p>\n<pre><code>Handler(Looper.getMainLooper()).post {\n//Update UI.\n }\n</code></pre>\n"},{"comments":[{"owner":{"account_id":1459802,"reputation":621,"user_id":1374419,"display_name":"JustAnotherCoder"},"score":0,"creation_date":1672936974,"post_id":75021541,"comment_id":132390355,"body_markdown":"Also call &#39;EditText.requestFocus()&#39;?","body":"Also call &#39;EditText.requestFocus()&#39;?"}],"tags":[],"owner":{"account_id":13750010,"reputation":171,"user_id":9922403,"display_name":"BADER EDDINE QODIA"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1672936129,"creation_date":1672936129,"answer_id":75021541,"question_id":75016036,"body_markdown":"I think there are two **options**, you can use to prevent the keyboard from being hidden when posting on UI Thread:\r\n\r\nfirst you can add this code (***adjustPan***) in your manifest XML file in holder activity(if you are in Fragment, add it to the activity which call the fragment):\r\n\r\n    &lt;activity android:windowSoftInputMode=&quot;adjustPan&quot;&gt; &lt;/activity&gt;\r\n\r\n&gt; &quot;**adjustPan**&quot;\r\n&gt; \r\n&gt; The activity&#39;s main window is not resized to make room for the soft\r\n&gt; keyboard. Rather, the contents of the window are automatically panned\r\n&gt; so that the current focus is never obscured by the keyboard and users\r\n&gt; can always see what they are typing. This is generally less desirable\r\n&gt; than resizing, because the user may need to close the soft keyboard to\r\n&gt; get at and interact with obscured parts of the window.\r\n\r\nthe second option is to use an explicit call of a soft keyboard after you post to the UI Thread :\r\n\r\n    InputMethodManager imm = (InputMethodManager)   getSystemService(Context.INPUT_METHOD_SERVICE);\r\n    imm.toggleSoftInput(InputMethodManager.SHOW_FORCED, 0);\r\n\r\n","title":"runOnUIThread for Android is hiding the soft keyboard","body":"<p>I think there are two <strong>options</strong>, you can use to prevent the keyboard from being hidden when posting on UI Thread:</p>\n<p>first you can add this code (<em><strong>adjustPan</strong></em>) in your manifest XML file in holder activity(if you are in Fragment, add it to the activity which call the fragment):</p>\n<pre><code>&lt;activity android:windowSoftInputMode=&quot;adjustPan&quot;&gt; &lt;/activity&gt;\n</code></pre>\n<blockquote>\n<p>&quot;<strong>adjustPan</strong>&quot;</p>\n<p>The activity's main window is not resized to make room for the soft\nkeyboard. Rather, the contents of the window are automatically panned\nso that the current focus is never obscured by the keyboard and users\ncan always see what they are typing. This is generally less desirable\nthan resizing, because the user may need to close the soft keyboard to\nget at and interact with obscured parts of the window.</p>\n</blockquote>\n<p>the second option is to use an explicit call of a soft keyboard after you post to the UI Thread :</p>\n<pre><code>InputMethodManager imm = (InputMethodManager)   getSystemService(Context.INPUT_METHOD_SERVICE);\nimm.toggleSoftInput(InputMethodManager.SHOW_FORCED, 0);\n</code></pre>\n"}],"owner":{"account_id":20969448,"reputation":298,"user_id":15406934,"display_name":"Abhi_M"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":66,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1672936129,"creation_date":1672909645,"question_id":75016036,"body_markdown":"In my android application, the core logic is written in C++. Hence for multiple scenarios, there will be JNI calls happening.\r\n\r\nIn one use-case, as the text is being entered by the user in the &#39;EditText&#39;, I call a JNI method which will capitalize each word (the logic and hence the outcome can vary for case to case).\r\n\r\nThe TextChange handler calls a JNI function which will capitalize each word the text in a worker thread and then invoke a method on the main thread using &#39;runOnUIThread&#39; to update the text field&#39;s value. My expectation is this should happen seamlessly and should not hamper the way user is interacting.\r\n\r\nCode Samples:\r\n\r\nCalling of the JNI function-\r\n\r\n         edittext.addTextChangedListener(new TextWatcher() {\r\n    \r\n                @Override\r\n                public void onTextChanged(CharSequence s, int start, int before, int count) {\r\n                    \r\n                    OnTextChanged (edittext.getId(), String.valueOf(s));\r\n                }\r\n                ...\r\n         });\r\n\r\nUpdating the EditText with the capitalized text-\r\n\r\n    // Below function is invoked on the Main Thread once the Worker Thread is done with its job of capitalizing\r\n    // An entry function is called which gets the textfield object from the layout and then called the below\r\n    public static void UpdateTextField(EditText pEditTextObj, int pID, int pPosX, int pPosY, int pHeight, int pWidth, int pColor, String pText)\r\n    {\r\n            Log.d(&quot;SampleJNIApp01&quot;, &quot;TextField valued to be updated = &quot; + pText);\r\n            \r\n            pEditTextObj.setText(pText);\r\n            pEditTextObj.requestFocus();\r\n            pEditTextObj.setCursorVisible(true);\r\n            pEditTextObj.setSelection(pEditTextObj.getText().length());\r\n\r\n            // TODO - Show the keyboard \r\n    }\r\n\r\nObservation :\r\n\r\nOnce the first letter is typed in, it DOES get capitalized by the JNI function and the text in the EditText is also updated. However, the focus goes away, cursor is not visible and the keyboard gets hidden.\r\n\r\nSame is observed when I am typing in the text field and some worker thread has invoked some java method to &#39;runOnUIthread&#39; - the focus is lost and soft keyboard gets hidden.\r\n\r\nIs there something wrong that I am doing ?","title":"runOnUIThread for Android is hiding the soft keyboard","body":"<p>In my android application, the core logic is written in C++. Hence for multiple scenarios, there will be JNI calls happening.</p>\n<p>In one use-case, as the text is being entered by the user in the 'EditText', I call a JNI method which will capitalize each word (the logic and hence the outcome can vary for case to case).</p>\n<p>The TextChange handler calls a JNI function which will capitalize each word the text in a worker thread and then invoke a method on the main thread using 'runOnUIThread' to update the text field's value. My expectation is this should happen seamlessly and should not hamper the way user is interacting.</p>\n<p>Code Samples:</p>\n<p>Calling of the JNI function-</p>\n<pre><code>     edittext.addTextChangedListener(new TextWatcher() {\n\n            @Override\n            public void onTextChanged(CharSequence s, int start, int before, int count) {\n                \n                OnTextChanged (edittext.getId(), String.valueOf(s));\n            }\n            ...\n     });\n</code></pre>\n<p>Updating the EditText with the capitalized text-</p>\n<pre><code>// Below function is invoked on the Main Thread once the Worker Thread is done with its job of capitalizing\n// An entry function is called which gets the textfield object from the layout and then called the below\npublic static void UpdateTextField(EditText pEditTextObj, int pID, int pPosX, int pPosY, int pHeight, int pWidth, int pColor, String pText)\n{\n        Log.d(&quot;SampleJNIApp01&quot;, &quot;TextField valued to be updated = &quot; + pText);\n        \n        pEditTextObj.setText(pText);\n        pEditTextObj.requestFocus();\n        pEditTextObj.setCursorVisible(true);\n        pEditTextObj.setSelection(pEditTextObj.getText().length());\n\n        // TODO - Show the keyboard \n}\n</code></pre>\n<p>Observation :</p>\n<p>Once the first letter is typed in, it DOES get capitalized by the JNI function and the text in the EditText is also updated. However, the focus goes away, cursor is not visible and the keyboard gets hidden.</p>\n<p>Same is observed when I am typing in the text field and some worker thread has invoked some java method to 'runOnUIthread' - the focus is lost and soft keyboard gets hidden.</p>\n<p>Is there something wrong that I am doing ?</p>\n"},{"tags":["java","json","serialization","unordered-map","everit"],"owner":{"account_id":94736,"reputation":48421,"user_id":258483,"accept_rate":46,"display_name":"Dims"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":14,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1672936087,"creation_date":1672936087,"question_id":75021537,"body_markdown":"n my experience, an output of [Schema#toString()][1] can be different for equal objects. Particularly, order of dictionary keys can be different.\r\n\r\nCan this be stabilized?\r\n\r\nOr is it possible to use other method to convert Schema to String to get stable results?\r\n\r\n\r\n  [1]: https://github.com/everit-org/json-schema/blob/master/core/src/main/java/org/everit/json/schema/Schema.java#L351","title":"How to stabilize Everit Schema serialization?","body":"<p>n my experience, an output of <a href=\"https://github.com/everit-org/json-schema/blob/master/core/src/main/java/org/everit/json/schema/Schema.java#L351\" rel=\"nofollow noreferrer\">Schema#toString()</a> can be different for equal objects. Particularly, order of dictionary keys can be different.</p>\n<p>Can this be stabilized?</p>\n<p>Or is it possible to use other method to convert Schema to String to get stable results?</p>\n"},{"tags":["java","spring","hibernate","spring-data-jpa"],"owner":{"account_id":23779529,"reputation":11,"user_id":17792420,"display_name":"Jabez_Brew"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":44,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1672935735,"creation_date":1672933766,"question_id":75021064,"body_markdown":"I&#39;ve two entities (`User` and `Quiz`) that I want to build a relationship between so I made another entity (`UserQuiz`) to store their primary keys. Here&#39;s the code for `UserQuiz`:\r\n\r\n    public class UserQuiz {\r\n        @Id\r\n        @Column(name = &quot;id&quot;, nullable = false)\r\n        private Long id;\r\n    \r\n        @ManyToOne(targetEntity = User.class, cascade = CascadeType.ALL)\r\n        @JoinColumn(name = &quot;user_id&quot;)\r\n        private Long user_id;\r\n    \r\n        @ManyToOne(targetEntity = Quiz.class, cascade = CascadeType.ALL)\r\n        @JoinColumn(name = &quot;quiz_id&quot;)\r\n        private Long quiz_id;\r\n    }\r\n\r\n    \r\n\r\nI then create an instance of the `UserQuiz` and pass it to a `UserQuizSerivce` method which abstracts the `CrudeRepository save` method.\r\n\r\n    @PostMapping(&quot;/quizzes&quot;)\r\n    public Quiz postQuiz(@Valid @RequestBody Quiz quiz, Authentication details){\r\n        UserDetailsImpl currentUser = (UserDetailsImpl) details.getPrincipal();\r\n        UserQuiz userQuiz = UserQuiz.builder().user_id(currentUser.getId()).quiz_id(quiz.getId()).build();\r\n        userQuizService.saveUserQuiz(userQuiz);\r\n        return quizService.saveQuiz(quiz);\r\n    }\r\n\r\nThe issue here is the `CrudRepository save` methods throws an `IllegalArgumentException` even though a print statement clearly shows the `userQuiz` object is not null before it gets passed into the method. And also the error from the title is thrown by postman talking about `Quiz.id` which i don&#39;t understand why that field is even been accessed. Very confusing\r\n\r\nBecause of the error from postman, I tried turning the the id (primary keys) fields of `User` and `Quiz` entities into public fields. Tried using the `setAccessible(true)` methods on these fields too but all to no avail.\r\n","title":"Error accessing field [private java.lang.Long engine.Quiz.id] by reflection for persistent property [engine.Quiz#id] : 47;","body":"<p>I've two entities (<code>User</code> and <code>Quiz</code>) that I want to build a relationship between so I made another entity (<code>UserQuiz</code>) to store their primary keys. Here's the code for <code>UserQuiz</code>:</p>\n<pre><code>public class UserQuiz {\n    @Id\n    @Column(name = &quot;id&quot;, nullable = false)\n    private Long id;\n\n    @ManyToOne(targetEntity = User.class, cascade = CascadeType.ALL)\n    @JoinColumn(name = &quot;user_id&quot;)\n    private Long user_id;\n\n    @ManyToOne(targetEntity = Quiz.class, cascade = CascadeType.ALL)\n    @JoinColumn(name = &quot;quiz_id&quot;)\n    private Long quiz_id;\n}\n</code></pre>\n<p>I then create an instance of the <code>UserQuiz</code> and pass it to a <code>UserQuizSerivce</code> method which abstracts the <code>CrudeRepository save</code> method.</p>\n<pre><code>@PostMapping(&quot;/quizzes&quot;)\npublic Quiz postQuiz(@Valid @RequestBody Quiz quiz, Authentication details){\n    UserDetailsImpl currentUser = (UserDetailsImpl) details.getPrincipal();\n    UserQuiz userQuiz = UserQuiz.builder().user_id(currentUser.getId()).quiz_id(quiz.getId()).build();\n    userQuizService.saveUserQuiz(userQuiz);\n    return quizService.saveQuiz(quiz);\n}\n</code></pre>\n<p>The issue here is the <code>CrudRepository save</code> methods throws an <code>IllegalArgumentException</code> even though a print statement clearly shows the <code>userQuiz</code> object is not null before it gets passed into the method. And also the error from the title is thrown by postman talking about <code>Quiz.id</code> which i don't understand why that field is even been accessed. Very confusing</p>\n<p>Because of the error from postman, I tried turning the the id (primary keys) fields of <code>User</code> and <code>Quiz</code> entities into public fields. Tried using the <code>setAccessible(true)</code> methods on these fields too but all to no avail.</p>\n"},{"tags":["java","json","maven"],"comments":[{"owner":{"account_id":3758602,"reputation":10072,"user_id":3124333,"accept_rate":100,"display_name":"SiKing"},"score":0,"creation_date":1672935217,"post_id":75021192,"comment_id":132389631,"body_markdown":"Remove `&lt;type&gt;bundle&lt;/type&gt;` and try again. See [What is the meaning of type &quot;bundle&quot; in a maven dependency?](https://stackoverflow.com/q/5389691/3124333) for more info.","body":"Remove <code>&lt;type&gt;bundle&lt;&#47;type&gt;</code> and try again. See <a href=\"https://stackoverflow.com/q/5389691/3124333\">What is the meaning of type &quot;bundle&quot; in a maven dependency?</a> for more info."},{"owner":{"account_id":24369621,"reputation":37,"user_id":18302790,"display_name":"MrWobbles"},"score":0,"creation_date":1672935472,"post_id":75021192,"comment_id":132389737,"body_markdown":"I did that and there were no errors on pom but I still could not reference it in my code. I get this error: `The type org.json.JSONArray is not accessible`","body":"I did that and there were no errors on pom but I still could not reference it in my code. I get this error: <code>The type org.json.JSONArray is not accessible</code>"}],"owner":{"account_id":24369621,"reputation":37,"user_id":18302790,"display_name":"MrWobbles"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":455,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1672935459,"creation_date":1672934325,"question_id":75021192,"body_markdown":"I am making a JavaFX project (for the GUI) on Maven and for the moment I want to convert a StringBuffer object to JSON.\r\n\r\nI tried to add the dependency org.json from Maven but there is a problem in pom.xml file \r\n`Missing Artifact org.json:json:bundle:20220924`\r\n\r\nI tried adding an older version of org.json dependency, it had the same issue\r\n\r\nI tried a different dependency, everything was ok in the pom.xml file but I could not import it into my project (any dependency). \r\n\r\nAll dependencies return this error: `The type org.json.JSONArray is not accessible`\r\n\r\nLastly, I tried to download the json-java.jar from github and add it into a libs folder on the base project directory and added it in the pom file as a dependency but it could not be resolved either.\r\n\r\nMy pom.xml file:\r\n```\r\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n  xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd&quot;&gt;\r\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n    &lt;groupId&gt;com.example&lt;/groupId&gt;\r\n    &lt;artifactId&gt;books&lt;/artifactId&gt;\r\n    &lt;version&gt;1.0-SNAPSHOT&lt;/version&gt;\r\n    &lt;properties&gt;\r\n        &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\r\n        &lt;maven.compiler.source&gt;11&lt;/maven.compiler.source&gt;\r\n        &lt;maven.compiler.target&gt;11&lt;/maven.compiler.target&gt;\r\n    &lt;/properties&gt;\r\n    &lt;dependencies&gt;\r\n\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.json&lt;/groupId&gt;\r\n            &lt;artifactId&gt;json&lt;/artifactId&gt;\r\n            &lt;version&gt;20220924&lt;/version&gt;\r\n            &lt;type&gt;bundle&lt;/type&gt;\r\n        &lt;/dependency&gt;\r\n\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.openjfx&lt;/groupId&gt;\r\n            &lt;artifactId&gt;javafx-controls&lt;/artifactId&gt;\r\n            &lt;version&gt;13&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.openjfx&lt;/groupId&gt;\r\n            &lt;artifactId&gt;javafx-fxml&lt;/artifactId&gt;\r\n            &lt;version&gt;13&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;com.sample&lt;/groupId&gt;\r\n            &lt;artifactId&gt;sample&lt;/artifactId&gt;\r\n            &lt;version&gt;1.0&lt;/version&gt;\r\n            &lt;scope&gt;system&lt;/scope&gt;\r\n            &lt;systemPath&gt;${project.basedir}/libs/json-20220924.jar&lt;/systemPath&gt;\r\n        &lt;/dependency&gt;\r\n    &lt;/dependencies&gt;\r\n    &lt;build&gt;\r\n        &lt;plugins&gt;\r\n            &lt;plugin&gt;\r\n                &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n                &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\r\n                &lt;version&gt;3.8.0&lt;/version&gt;\r\n                &lt;configuration&gt;\r\n                    &lt;release&gt;11&lt;/release&gt;\r\n                &lt;/configuration&gt;\r\n            &lt;/plugin&gt;\r\n            &lt;plugin&gt;\r\n                &lt;groupId&gt;org.openjfx&lt;/groupId&gt;\r\n                &lt;artifactId&gt;javafx-maven-plugin&lt;/artifactId&gt;\r\n                &lt;version&gt;0.0.6&lt;/version&gt;\r\n                &lt;executions&gt;\r\n                    &lt;execution&gt;\r\n                        &lt;!-- Default configuration for running --&gt;\r\n                        &lt;!-- Usage: mvn clean javafx:run --&gt;\r\n                        &lt;id&gt;default-cli&lt;/id&gt;\r\n                        &lt;configuration&gt;\r\n                            &lt;mainClass&gt;com.example.App&lt;/mainClass&gt;\r\n                        &lt;/configuration&gt;\r\n                    &lt;/execution&gt;\r\n                &lt;/executions&gt;\r\n            &lt;/plugin&gt;\r\n        &lt;/plugins&gt;\r\n    &lt;/build&gt;\r\n&lt;/project&gt;\r\n```\r\n\r\nIn the end I downloaded Maven again and extracted it into a folder and changed my environment variables on path. Maven is successfully installed on version 3.8.7\r\n\r\nThank you in advance for any help!\r\n\r\n**UPDATE**\r\n\r\nI should mention that I tried it on a new java project (without maven) and it works fine, by importing the .jar file from git-hub repository","title":"org.json.* is not accessible in JAVA Maven Project as a dependency","body":"<p>I am making a JavaFX project (for the GUI) on Maven and for the moment I want to convert a StringBuffer object to JSON.</p>\n<p>I tried to add the dependency org.json from Maven but there is a problem in pom.xml file\n<code>Missing Artifact org.json:json:bundle:20220924</code></p>\n<p>I tried adding an older version of org.json dependency, it had the same issue</p>\n<p>I tried a different dependency, everything was ok in the pom.xml file but I could not import it into my project (any dependency).</p>\n<p>All dependencies return this error: <code>The type org.json.JSONArray is not accessible</code></p>\n<p>Lastly, I tried to download the json-java.jar from github and add it into a libs folder on the base project directory and added it in the pom file as a dependency but it could not be resolved either.</p>\n<p>My pom.xml file:</p>\n<pre><code>&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\n  xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd&quot;&gt;\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n    &lt;groupId&gt;com.example&lt;/groupId&gt;\n    &lt;artifactId&gt;books&lt;/artifactId&gt;\n    &lt;version&gt;1.0-SNAPSHOT&lt;/version&gt;\n    &lt;properties&gt;\n        &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\n        &lt;maven.compiler.source&gt;11&lt;/maven.compiler.source&gt;\n        &lt;maven.compiler.target&gt;11&lt;/maven.compiler.target&gt;\n    &lt;/properties&gt;\n    &lt;dependencies&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.json&lt;/groupId&gt;\n            &lt;artifactId&gt;json&lt;/artifactId&gt;\n            &lt;version&gt;20220924&lt;/version&gt;\n            &lt;type&gt;bundle&lt;/type&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.openjfx&lt;/groupId&gt;\n            &lt;artifactId&gt;javafx-controls&lt;/artifactId&gt;\n            &lt;version&gt;13&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.openjfx&lt;/groupId&gt;\n            &lt;artifactId&gt;javafx-fxml&lt;/artifactId&gt;\n            &lt;version&gt;13&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;com.sample&lt;/groupId&gt;\n            &lt;artifactId&gt;sample&lt;/artifactId&gt;\n            &lt;version&gt;1.0&lt;/version&gt;\n            &lt;scope&gt;system&lt;/scope&gt;\n            &lt;systemPath&gt;${project.basedir}/libs/json-20220924.jar&lt;/systemPath&gt;\n        &lt;/dependency&gt;\n    &lt;/dependencies&gt;\n    &lt;build&gt;\n        &lt;plugins&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n                &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\n                &lt;version&gt;3.8.0&lt;/version&gt;\n                &lt;configuration&gt;\n                    &lt;release&gt;11&lt;/release&gt;\n                &lt;/configuration&gt;\n            &lt;/plugin&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.openjfx&lt;/groupId&gt;\n                &lt;artifactId&gt;javafx-maven-plugin&lt;/artifactId&gt;\n                &lt;version&gt;0.0.6&lt;/version&gt;\n                &lt;executions&gt;\n                    &lt;execution&gt;\n                        &lt;!-- Default configuration for running --&gt;\n                        &lt;!-- Usage: mvn clean javafx:run --&gt;\n                        &lt;id&gt;default-cli&lt;/id&gt;\n                        &lt;configuration&gt;\n                            &lt;mainClass&gt;com.example.App&lt;/mainClass&gt;\n                        &lt;/configuration&gt;\n                    &lt;/execution&gt;\n                &lt;/executions&gt;\n            &lt;/plugin&gt;\n        &lt;/plugins&gt;\n    &lt;/build&gt;\n&lt;/project&gt;\n</code></pre>\n<p>In the end I downloaded Maven again and extracted it into a folder and changed my environment variables on path. Maven is successfully installed on version 3.8.7</p>\n<p>Thank you in advance for any help!</p>\n<p><strong>UPDATE</strong></p>\n<p>I should mention that I tried it on a new java project (without maven) and it works fine, by importing the .jar file from git-hub repository</p>\n"},{"tags":["java","macos","swing"],"answers":[{"tags":[],"owner":{"account_id":278315,"reputation":11589,"user_id":572834,"display_name":"Alexey Ivanov"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1672935435,"creation_date":1672935435,"answer_id":75021432,"question_id":41533992,"body_markdown":"It looks like this is impossible, there are no mnemonics to access the menu bar on macOS.\r\n\r\nSee a similar question on Super User: [How to select File menu in Mac, just like Alt + F in Windows?][1]. Although the question is not Swing-specific, the answers highlight that this is impossible on macOS. Swing does its best to display the menu invoked by a mnemonic.\r\n\r\n\r\n  [1]: https://superuser.com/q/504111/80304","title":"How to use the screen menu bar with a mnemonic key combination on MacOS?","body":"<p>It looks like this is impossible, there are no mnemonics to access the menu bar on macOS.</p>\n<p>See a similar question on Super User: <a href=\"https://superuser.com/q/504111/80304\">How to select File menu in Mac, just like Alt + F in Windows?</a>. Although the question is not Swing-specific, the answers highlight that this is impossible on macOS. Swing does its best to display the menu invoked by a mnemonic.</p>\n"}],"owner":{"account_id":2694517,"reputation":6631,"user_id":2326961,"accept_rate":70,"display_name":"G&#233;ry Ogam"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":307,"favorite_count":0,"down_vote_count":0,"up_vote_count":4,"accepted_answer_id":75021432,"answer_count":1,"score":4,"last_activity_date":1672935435,"creation_date":1483887116,"question_id":41533992,"body_markdown":"How to use the screen menu bar with a mnemonic key combination (e.g. &lt;kbd&gt;Ctrl&lt;/kbd&gt; + &lt;kbd&gt;Alt&lt;/kbd&gt; + &lt;kbd&gt;F&lt;/kbd&gt;) instead of windows menu bar on MacOS?\r\n\r\nExpected outcome (menu in the *screen* menu bar):\r\n\r\n[![expectation][1]][1]\r\n\r\nActual outcome (menu in the *window* menu bar):\r\n\r\n[![reality][2]][2]\r\n\r\nCode:\r\n\r\n```java\r\nimport javax.swing.JFrame;\r\nimport javax.swing.JMenu;\r\nimport javax.swing.JMenuBar;\r\nimport javax.swing.JMenuItem;\r\n\r\n\r\nclass GUI extends JFrame {\r\n  public static void main(String[] args) {\r\n    new GUI();\r\n  }\r\n\r\n  public GUI() {\r\n    // Use the screen menu bar instead of the window menu bar.\r\n    System.setProperty(&quot;apple.laf.useScreenMenuBar&quot;, &quot;true&quot;);\r\n    JMenuBar menuBar = new JMenuBar();\r\n    JMenu menu = new JMenu(&quot;File&quot;);\r\n    JMenuItem menuItem1 = new JMenuItem(&quot;New&quot;);\r\n    JMenuItem menuItem2 = new JMenuItem(&quot;Open&quot;);\r\n    JMenuItem menuItem3 = new JMenuItem(&quot;Close&quot;);\r\n\r\n    // Make the menu listens to &lt;Ctrl&gt; + &lt;Alt&gt; + &lt;F&gt; mnemonic key events.\r\n    menu.setMnemonic(&#39;F&#39;);\r\n    menu.add(menuItem1);\r\n    menu.add(menuItem2);\r\n    menu.add(menuItem3);\r\n    menuBar.add(menu);\r\n    setJMenuBar(menuBar);\r\n    setSize(854, 480);\r\n    setLocationRelativeTo(null);\r\n    setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);\r\n    setVisible(true);\r\n  }\r\n}\r\n```\r\n\r\n[1]: https://i.stack.imgur.com/O1zg8.jpg\r\n[2]: https://i.stack.imgur.com/vrwdy.jpg","title":"How to use the screen menu bar with a mnemonic key combination on MacOS?","body":"<p>How to use the screen menu bar with a mnemonic key combination (e.g. <kbd>Ctrl</kbd> + <kbd>Alt</kbd> + <kbd>F</kbd>) instead of windows menu bar on MacOS?</p>\n<p>Expected outcome (menu in the <em>screen</em> menu bar):</p>\n<p><a href=\"https://i.stack.imgur.com/O1zg8.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/O1zg8.jpg\" alt=\"expectation\" /></a></p>\n<p>Actual outcome (menu in the <em>window</em> menu bar):</p>\n<p><a href=\"https://i.stack.imgur.com/vrwdy.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/vrwdy.jpg\" alt=\"reality\" /></a></p>\n<p>Code:</p>\n<pre class=\"lang-java prettyprint-override\"><code>import javax.swing.JFrame;\nimport javax.swing.JMenu;\nimport javax.swing.JMenuBar;\nimport javax.swing.JMenuItem;\n\n\nclass GUI extends JFrame {\n  public static void main(String[] args) {\n    new GUI();\n  }\n\n  public GUI() {\n    // Use the screen menu bar instead of the window menu bar.\n    System.setProperty(&quot;apple.laf.useScreenMenuBar&quot;, &quot;true&quot;);\n    JMenuBar menuBar = new JMenuBar();\n    JMenu menu = new JMenu(&quot;File&quot;);\n    JMenuItem menuItem1 = new JMenuItem(&quot;New&quot;);\n    JMenuItem menuItem2 = new JMenuItem(&quot;Open&quot;);\n    JMenuItem menuItem3 = new JMenuItem(&quot;Close&quot;);\n\n    // Make the menu listens to &lt;Ctrl&gt; + &lt;Alt&gt; + &lt;F&gt; mnemonic key events.\n    menu.setMnemonic('F');\n    menu.add(menuItem1);\n    menu.add(menuItem2);\n    menu.add(menuItem3);\n    menuBar.add(menu);\n    setJMenuBar(menuBar);\n    setSize(854, 480);\n    setLocationRelativeTo(null);\n    setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);\n    setVisible(true);\n  }\n}\n</code></pre>\n"},{"tags":["java","android","mpandroidchart"],"comments":[{"owner":{"account_id":13113788,"reputation":10080,"user_id":9473786,"display_name":"Tyler V"},"score":0,"creation_date":1673070554,"post_id":75016633,"comment_id":132420076,"body_markdown":"Please take the time to create a [minimum complete example](https://stackoverflow.com/help/minimal-reproducible-example) that someone else could run and see the same issue. When I try a simple bar chart with its data set toggled by a switch (like you are doing here) it works fine.","body":"Please take the time to create a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimum complete example</a> that someone else could run and see the same issue. When I try a simple bar chart with its data set toggled by a switch (like you are doing here) it works fine."},{"owner":{"account_id":25794920,"reputation":49,"user_id":19538282,"display_name":"Francisco Torres"},"score":0,"creation_date":1673098785,"post_id":75016633,"comment_id":132423843,"body_markdown":"@TylerV i found the problem, it seems like my graph is drawing correctly, what is happening is, sometimes my graph is shifting towards left, and i only see a fracion of my bars, its some setting not working good, maybe im setting the minimum height but as my graph is turned in other direction i have to work with the width. But thanks for the example anyway, i will give a look.","body":"@TylerV i found the problem, it seems like my graph is drawing correctly, what is happening is, sometimes my graph is shifting towards left, and i only see a fracion of my bars, its some setting not working good, maybe im setting the minimum height but as my graph is turned in other direction i have to work with the width. But thanks for the example anyway, i will give a look."},{"owner":{"account_id":13113788,"reputation":10080,"user_id":9473786,"display_name":"Tyler V"},"score":1,"creation_date":1673100810,"post_id":75016633,"comment_id":132424243,"body_markdown":"Probably need to adjust your axis min and max values as you change the data.","body":"Probably need to adjust your axis min and max values as you change the data."},{"owner":{"account_id":25794920,"reputation":49,"user_id":19538282,"display_name":"Francisco Torres"},"score":0,"creation_date":1673117442,"post_id":75016633,"comment_id":132427919,"body_markdown":"@TylerV i dont know whats happening, because i have a chart who has a bar with 122 errors, so it should disformat the barchart too, and it dont happen. Can&#39;t see where is the error, cant it be a bug ?","body":"@TylerV i dont know whats happening, because i have a chart who has a bar with 122 errors, so it should disformat the barchart too, and it dont happen. Can&#39;t see where is the error, cant it be a bug ?"},{"owner":{"account_id":13113788,"reputation":10080,"user_id":9473786,"display_name":"Tyler V"},"score":0,"creation_date":1673122094,"post_id":75016633,"comment_id":132428786,"body_markdown":"Nobody can debug your code for you without seeing it - you have to make a complete example (ideally as small as possible) that someone else could run to see the same issue if you want help.","body":"Nobody can debug your code for you without seeing it - you have to make a complete example (ideally as small as possible) that someone else could run to see the same issue if you want help."},{"owner":{"account_id":25794920,"reputation":49,"user_id":19538282,"display_name":"Francisco Torres"},"score":0,"creation_date":1673211335,"post_id":75016633,"comment_id":132442066,"body_markdown":"@TylerV i fixed my problem, now i got a diferent one, what is the setting where i set the minimum scale on my Y bar. like my bar is starting from 0 now, but wheni have like 20 problems, the bar have the values like 1, 2 , 3 , 4 , 5 ... but if i only have 5 problems, the values go for 0.5, 1 , 1.5, 2 ... or even less. how do i set the minimun to be 1, 2 ,3 ,4 ,5 ... ?  sorry but i cant explain it better","body":"@TylerV i fixed my problem, now i got a diferent one, what is the setting where i set the minimum scale on my Y bar. like my bar is starting from 0 now, but wheni have like 20 problems, the bar have the values like 1, 2 , 3 , 4 , 5 ... but if i only have 5 problems, the values go for 0.5, 1 , 1.5, 2 ... or even less. how do i set the minimun to be 1, 2 ,3 ,4 ,5 ... ?  sorry but i cant explain it better"},{"owner":{"account_id":25794920,"reputation":49,"user_id":19538282,"display_name":"Francisco Torres"},"score":0,"creation_date":1673211522,"post_id":75016633,"comment_id":132442100,"body_markdown":"Ok, now i fixed it... Thanks for your help... Im just going to close this. Thanks for your help.","body":"Ok, now i fixed it... Thanks for your help... Im just going to close this. Thanks for your help."}],"owner":{"account_id":25794920,"reputation":49,"user_id":19538282,"display_name":"Francisco Torres"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":64,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1672935249,"creation_date":1672912636,"question_id":75016633,"body_markdown":"I don&#39;t know if I&#39;m using the correct way of filtering a barchart, or even if my code is properly written.\r\n\r\nBut I have  problem, when I open my dashboard, I have 3 charts, one of the piecharts can filter the barchart, and depending on which was selected, the barchart only shows the piechart selected, otherwise shows all. \r\n\r\nMy problem is when I filter those, I&#39;m getting the correct filter, but I can&#39;t get the labels to appear, they just appear when I got only one, for example if I have 1Yellow, 15 Reds, its only a bar to show, but it only shows the label for the yellow one, but if yellow2 and 15 reds, it doesn&#39;t show any of them.\r\n\r\nIt should be a easy fix, I just can&#39;t see where is the error.\r\n\r\n    ArrayList&lt;Integer&gt; colors_to_add_type = new ArrayList&lt;&gt;();\r\n                                ArrayList&lt;Integer&gt; colors_to_add_type_MINOR = new ArrayList&lt;&gt;();\r\n                                ArrayList&lt;Integer&gt; colors_to_add_type_MEDIUM = new ArrayList&lt;&gt;();\r\n                                ArrayList&lt;Integer&gt; colors_to_add_type_MAJOR = new ArrayList&lt;&gt;();\r\n                                ArrayList&lt;Integer&gt; colors_to_add_type_OTHER = new ArrayList&lt;&gt;();\r\n                                Iterator&lt;String&gt; defects_colors_keys;\r\n                                defects_colors_keys = colors_type.keys();\r\n                                while (defects_colors_keys.hasNext()){\r\n                                    String key = defects_colors_keys.next();\r\n                                    Log.e(&quot;COLOR_KEY&quot;, &quot;onResponse: &quot; + key );\r\n                                    int to_add = Color.parseColor(colors_type.getString(key));\r\n                                    int to_add_MINOR = Color.parseColor(&quot;#00FF00&quot;);\r\n                                    int to_add_MEDIUM = Color.parseColor(&quot;#FFFF00&quot;);\r\n                                    int to_add_MAJOR = Color.parseColor(&quot;#FF0000&quot;);\r\n                                    int to_add_OTHER = Color.parseColor(&quot;#800080&quot;);\r\n                                    Log.e(&quot;COLOR_NAME&quot;, &quot;onResponse: &quot; + colors_type.getString(key));\r\n                                    colors_to_add_type.add(to_add);\r\n                                    colors_to_add_type_MAJOR.add(to_add_MAJOR);\r\n                                    colors_to_add_type_MEDIUM.add(to_add_MEDIUM);\r\n                                    colors_to_add_type_MINOR.add(to_add_MINOR);\r\n                                    colors_to_add_type_OTHER.add(to_add_OTHER);\r\n                                }\r\n                                List&lt;LegendEntry&gt; legends_type = new ArrayList&lt;&gt;();\r\n                                List&lt;LegendEntry&gt; legends_type_MINOR = new ArrayList&lt;&gt;();\r\n                                List&lt;LegendEntry&gt; legends_type_MEDIUM = new ArrayList&lt;&gt;();\r\n                                List&lt;LegendEntry&gt; legends_type_MAJOR = new ArrayList&lt;&gt;();\r\n                                List&lt;LegendEntry&gt; legends_type_OTHER = new ArrayList&lt;&gt;();\r\n                                    type_of_defects = by_type.keys();\r\n                                    int c = 0;\r\n                                    if(!map_defects_by_type_count.isEmpty()){\r\n                                        map_defects_by_type_count.clear();\r\n                                    }\r\n                                    Log.e(&quot;DEFECTS&quot;, defects_list.toString());\r\n                                    Log.e(&quot;DEFECTS&quot;,String.valueOf(defects_list.size()));\r\n                                    while(type_of_defects.hasNext()) {\r\n                                        String key = type_of_defects.next();\r\n                                        Log.e(&quot;DEFECTS_type&quot;, key.toString());\r\n                                        map_defects_by_type_count.put(key, by_type.getInt(key));\r\n                                        map_get_defect_type.put(c, key);\r\n                                        LegendEntry legendEntry = new LegendEntry();\r\n                                        legendEntry.label = key;\r\n                                        legendEntry.formColor = colors_to_add_type.get(c);\r\n                                        legends_type.add(legendEntry);\r\n                                        arr_by_type.add(new BarEntry((float)c + 1, (int)by_type.getInt(key), (String)key));\r\n                                        c++;\r\n                                        for (int i = 0; i &lt; defects_list.size(); i++){\r\n                                            if (defects_list.get(i).getStringProperty(&quot;defect&quot;).equals(key)){\r\n                                                if (defects_list.get(i).getStringProperty(&quot;criticality&quot;).equals(&quot;MAJOR&quot;)){\r\n                                                    arr_by_type_MAJOR.add(new BarEntry((float)c +1, (int)by_type.getInt(key), (String)key));\r\n                                                    legends_type_MAJOR.add(legendEntry);\r\n                                                    break;\r\n                                                }\r\n                                                if (defects_list.get(i).getStringProperty(&quot;criticality&quot;).equals(&quot;MEDIUM&quot;)){\r\n                                                    arr_by_type_MEDIUM.add(new BarEntry((float)c +1 , (int)by_type.getInt(key), (String)key));\r\n                                                    legends_type_MEDIUM.add(legendEntry);\r\n                                                    break;\r\n                                                }\r\n                                                if (defects_list.get(i).getStringProperty(&quot;criticality&quot;).equals(&quot;MINOR&quot;)){\r\n                                                    arr_by_type_MINOR.add(new BarEntry((float)c +1, (int)by_type.getInt(key), (String)key));\r\n                                                    legends_type_MINOR.add(legendEntry);\r\n                                                    break;\r\n                                                }\r\n                                                if (defects_list.get(i).getStringProperty(&quot;criticality&quot;).equals(&quot;OTHER&quot;)){\r\n                                                    arr_by_type_OTHER.add(new BarEntry((float)c +1, (int)by_type.getInt(key), (String)key));\r\n                                                    legends_type_OTHER.add(legendEntry);\r\n                                                    break;\r\n                                                }\r\n                                            }\r\n                                        }\r\n                                    }\r\n                                    TOTAL_DEFECTS = TOTAL_BY_CRIT;\r\n                                if(TOTAL_BY_CRIT != 0){\r\n                                    if(MAJOR != 0){\r\n                                        major_percent =  (float) MAJOR / TOTAL_BY_CRIT;\r\n                                    }\r\n                                    if(MEDIUM != 0){\r\n                                        medium_percent =  (float) MEDIUM / TOTAL_BY_CRIT;\r\n                                    }\r\n                                    if(MINOR != 0){\r\n                                        minor_percent = (float) MINOR / TOTAL_BY_CRIT;\r\n                                    }\r\n                                    if(OTHER != 0){\r\n                                        other_percent = (float) OTHER / TOTAL_BY_CRIT;\r\n                                    }\r\n                                }\r\n    \r\n                                TOTAL_SOURCE = TOTAL_H_M;\r\n                                if(TOTAL_H_M != 0){\r\n                                    if(HUMAN != 0){\r\n                                        human_percent = (float) HUMAN / TOTAL_H_M;\r\n                                    }\r\n                                    if(MACHINE != 0){\r\n                                        machine_percent = (float) MACHINE / TOTAL_H_M;\r\n                                    }\r\n                                }\r\n                                arr_by_defect.add(new PieEntry(MAJOR, &quot;MAJOR&quot;));\r\n                                arr_by_defect.add(new PieEntry(MEDIUM, &quot;MEDIUM&quot;));\r\n                                arr_by_defect.add(new PieEntry(MINOR, &quot;MINOR&quot;));\r\n                                arr_by_defect.add(new PieEntry(OTHER, &quot;OTHER&quot;));\r\n                                arr_by_source.add(new PieEntry(HUMAN, &quot;HUMAN&quot;));\r\n                                arr_by_source.add(new PieEntry(MACHINE, &quot;MACHINE&quot;));\r\n                                dataSet_by_defect = new PieDataSet(arr_by_defect, &quot;&quot;);\r\n                                dataSet_by_source = new PieDataSet(arr_by_source, &quot;&quot;);\r\n                                dataSet_by_type = new BarDataSet(arr_by_type, &quot;&quot;);\r\n                                dataSet_by_type_MAJOR = new BarDataSet(arr_by_type_MAJOR, &quot;&quot;);\r\n                                dataSet_by_type_MEDIUM = new BarDataSet(arr_by_type_MEDIUM, &quot;&quot;);\r\n                                dataSet_by_type_MINOR = new BarDataSet(arr_by_type_MINOR, &quot;&quot;);\r\n                                dataSet_by_type_OTHER = new BarDataSet(arr_by_type_OTHER, &quot;&quot;);\r\n                                //GET THE COLORS\r\n                                String colorMajor = colors.getString(&quot;MAJOR&quot;);\r\n                                String colorMedium = colors.getString(&quot;MEDIUM&quot;);\r\n                                String colorMinor = colors.getString(&quot;MINOR&quot;);\r\n                                String colorOther = colors.getString(&quot;OTHER&quot;);\r\n                                String colorHuman = human_machine_colors.getString(&quot;human&quot;);\r\n                                String colorMachine = human_machine_colors.getString(&quot;machine&quot;);\r\n                                final int[] sliceColors = {Color.parseColor(colorMajor), Color.parseColor(colorMedium), Color.parseColor(colorMinor), Color.parseColor(colorOther)};\r\n                                ArrayList&lt;Integer&gt; colorsSet = new ArrayList&lt;&gt;();\r\n                                for (int color : sliceColors){\r\n                                    colorsSet.add(color);\r\n                                }\r\n                                Log.e(&quot;COLORS_TO ADD&quot;, &quot;MAJOR&quot; + colorMajor);\r\n                                Log.e(&quot;COLORS_TO ADD&quot;, &quot;MEDIUM&quot; + colorMedium);\r\n                                Log.e(&quot;COLORS_TO ADD&quot;, &quot;MINOR&quot; + colorMinor);\r\n                                Log.e(&quot;COLORS_TO ADD&quot;, &quot;OTHER&quot; + colorOther);\r\n                                dataSet_by_defect.setColors(colorsSet);\r\n                                final int[] sliceColors_hm = {Color.parseColor(colorHuman), Color.parseColor(colorMachine)};\r\n                                ArrayList&lt;Integer&gt; colorsSet_hm = new ArrayList&lt;&gt;();\r\n                                for (int color : sliceColors_hm){\r\n                                    colorsSet_hm.add(color);\r\n                                }\r\n                                dataSet_by_source.setColors(colorsSet_hm);\r\n                                dataSet_by_type.setColors(colors_to_add_type);\r\n                                dataSet_by_type_MINOR.setColors(colors_to_add_type_MINOR);\r\n                                dataSet_by_type_MEDIUM.setColors(colors_to_add_type_MEDIUM);\r\n                                dataSet_by_type_MAJOR.setColors(colors_to_add_type_MAJOR);\r\n                                dataSet_by_type_OTHER.setColors(colors_to_add_type_OTHER);\r\n                                dataSet_by_type.setAxisDependency(YAxis.AxisDependency.RIGHT);\r\n                                dataSet_by_type_MINOR.setAxisDependency(YAxis.AxisDependency.RIGHT);\r\n                                dataSet_by_type_MEDIUM.setAxisDependency(YAxis.AxisDependency.RIGHT);\r\n                                dataSet_by_type_MAJOR.setAxisDependency(YAxis.AxisDependency.RIGHT);\r\n                                dataSet_by_type_OTHER.setAxisDependency(YAxis.AxisDependency.RIGHT);\r\n    \r\n    \r\n                                final PieData data_defect = new PieData(dataSet_by_defect);\r\n                                final PieData data_source = new PieData(dataSet_by_source);\r\n                                final BarData data_type = new BarData(dataSet_by_type);\r\n                                final BarData data_type_MINOR = new BarData(dataSet_by_type_MINOR);\r\n                                final BarData data_type_MEDIUM = new BarData(dataSet_by_type_MEDIUM);\r\n                                final BarData data_type_MAJOR = new BarData(dataSet_by_type_MAJOR);\r\n                                final BarData data_type_OTHER = new BarData(dataSet_by_type_OTHER);\r\n                                data_type.setDrawValues(true);\r\n                                data_type_MAJOR.setDrawValues(true);\r\n                                data_type_MEDIUM.setDrawValues(true);\r\n                                data_type_MINOR.setDrawValues(true);\r\n                                data_type_OTHER.setDrawValues(true);\r\n    \r\n                                data_defect.setDrawValues(false);\r\n                                data_source.setDrawValues(false);\r\n                                //data_type.setBarWidth(.75f);\r\n                                piechart_defects.setDrawHoleEnabled(true);\r\n                                piechart_defects.setHoleColor(Color.TRANSPARENT);\r\n                                piechart_defects.setDrawEntryLabels(false);\r\n                                piechart_defects.setDrawMarkers(false);\r\n                                piechart_defects.setCenterText(String.valueOf(TOTAL_DEFECTS) + &quot; TOTAL&quot;);\r\n                                piechart_defects.setCenterTextSize(10);\r\n                                piechart_defects.getDescription().setEnabled(false);\r\n                                Legend l_defect = piechart_defects.getLegend();\r\n                                l_defect.setVerticalAlignment(Legend.LegendVerticalAlignment.TOP);\r\n                                l_defect.setHorizontalAlignment(Legend.LegendHorizontalAlignment.RIGHT);\r\n                                l_defect.setOrientation(Legend.LegendOrientation.VERTICAL);\r\n                                l_defect.setDrawInside(false);\r\n                                l_defect.setEnabled(true);\r\n                                l_defect.setFormSize(4f);\r\n                                l_defect.setTextColor(Color.WHITE);\r\n                                l_defect.setTextSize(.5f);\r\n                                piechart_source.setDrawHoleEnabled(true);\r\n                                piechart_source.setDrawEntryLabels(false);\r\n                                piechart_source.setHoleColor(Color.TRANSPARENT);\r\n                                piechart_source.setDrawMarkers(false);\r\n                                piechart_source.setCenterText(String.valueOf(TOTAL_SOURCE) + &quot; TOTAL&quot;);\r\n                                piechart_source.setCenterTextSize(10);\r\n                                piechart_source.getDescription().setEnabled(false);\r\n                                piechart_source.setTransparentCircleRadius(10f);\r\n                                Legend l_source = piechart_source.getLegend();\r\n                                l_source.setVerticalAlignment(Legend.LegendVerticalAlignment.TOP);\r\n                                l_source.setHorizontalAlignment(Legend.LegendHorizontalAlignment.RIGHT);\r\n                                l_source.setOrientation(Legend.LegendOrientation.VERTICAL);\r\n                                l_source.setDrawInside(false);\r\n                                l_source.setEnabled(true);\r\n                                l_source.setFormSize(4f);\r\n                                l_source.setTextColor(Color.WHITE);\r\n                                l_source.setTextSize(.5f);\r\n                                dataSet_by_type.setValueTextColor(Color.WHITE);\r\n                                dataSet_by_type_MAJOR.setValueTextColor(Color.WHITE);\r\n                                dataSet_by_type_MEDIUM.setValueTextColor(Color.WHITE);\r\n                                dataSet_by_type_MINOR.setValueTextColor(Color.WHITE);\r\n                                dataSet_by_type_OTHER.setValueTextColor(Color.WHITE);\r\n                                dataSet_by_type.setValueTextSize(7f);\r\n                                dataSet_by_type_MINOR.setValueTextSize(7f);\r\n                                dataSet_by_type_MEDIUM.setValueTextSize(7f);\r\n                                dataSet_by_type_MAJOR.setValueTextSize(7f);\r\n                                dataSet_by_type_OTHER.setValueTextSize(7f);\r\n    \r\n                                data_type.setBarWidth(.5f);\r\n    \r\n                                data_type.setValueFormatter(new ValueFormatter() {\r\n                                    @Override\r\n                                    public String getBarLabel(BarEntry barEntry) {\r\n                                        int barEntryY = (int) barEntry.getY();\r\n    \r\n                                        return (String)barEntry.getData() + &quot;  &quot; + &quot;(&quot; + String.valueOf(barEntryY) + &quot;)&quot;;\r\n                                    }\r\n                                });\r\n    \r\n    \r\n                            Legend l_type_MAJOR = barchart_type.getLegend();\r\n                            l_type_MAJOR.setCustom(legends_type_MAJOR);\r\n                            l_type_MAJOR.setWordWrapEnabled(true);\r\n                            l_type_MAJOR.setDrawInside(true);\r\n                            data_type_MAJOR.setValueFormatter(new ValueFormatter() {\r\n                                @Override\r\n                                public String getBarLabel(BarEntry barEntry) {\r\n                                    int barEntryY = (int) barEntry.getY();\r\n                                    return (String)barEntry.getData() + &quot;  &quot; + &quot;(&quot; + String.valueOf(barEntryY) + &quot;)&quot;;\r\n                                }\r\n                            });\r\n                            data_type_MAJOR.setBarWidth(.5f);\r\n    \r\n                            Legend l_type_OTHER = barchart_type.getLegend();\r\n                            l_type_OTHER.setCustom(legends_type_OTHER);\r\n                            l_type_OTHER.setWordWrapEnabled(true);\r\n                            l_type_OTHER.setDrawInside(true);\r\n                            data_type_OTHER.setValueFormatter(new ValueFormatter() {\r\n                                @Override\r\n                                public String getBarLabel(BarEntry barEntry) {\r\n                                    int barEntryY = (int) barEntry.getY();\r\n                                    return (String)barEntry.getData() + &quot;  &quot; + &quot;(&quot; + String.valueOf(barEntryY) + &quot;)&quot;;\r\n                                }\r\n                            });\r\n                            data_type_OTHER.setBarWidth(.5f);\r\n    \r\n                            Legend l_type_MINOR = barchart_type.getLegend();\r\n                            l_type_MINOR.setCustom(legends_type_MINOR);\r\n                            l_type_MINOR.setWordWrapEnabled(true);\r\n                            l_type_MINOR.setDrawInside(true);\r\n                            data_type_MINOR.setValueFormatter(new ValueFormatter() {\r\n                                @Override\r\n                                public String getBarLabel(BarEntry barEntry) {\r\n                                    int barEntryY = (int) barEntry.getY();\r\n    \r\n                                    return (String)barEntry.getData() + &quot;  &quot; + &quot;(&quot; + String.valueOf(barEntryY) + &quot;)&quot;;\r\n                                }\r\n                            });\r\n    \r\n                            Legend l_type_MEDIUM = barchart_type.getLegend();\r\n                            l_type_MEDIUM.setCustom(legends_type_MEDIUM);\r\n                            l_type_MEDIUM.setWordWrapEnabled(true);\r\n                            l_type_MEDIUM.setDrawInside(true);\r\n                            data_type_MEDIUM.setValueFormatter(new ValueFormatter() {\r\n                                @Override\r\n                                public String getBarLabel(BarEntry barEntry) {\r\n                                    int barEntryY = (int) barEntry.getY();\r\n    \r\n                                    return (String)barEntry.getData() + &quot;  &quot; + &quot;(&quot; + String.valueOf(barEntryY) + &quot;)&quot;;\r\n                                }\r\n                            });\r\n    \r\n    \r\n    \r\n    \r\n    \r\n    \r\n    \r\n    \r\n                                barchart_type.setRenderer(new MyRenderer(barchart_type, barchart_type.getAnimator(), barchart_type.getViewPortHandler()));\r\n    \r\n                                Legend l_type = barchart_type.getLegend();\r\n                                l_type.setCustom(legends_type);\r\n                                l_type.setWordWrapEnabled(true);\r\n                                l_type.setDrawInside(true);\r\n                                piechart_defects.setData(data_defect);\r\n                                piechart_defects.invalidate();\r\n                                piechart_source.setData(data_source);\r\n                                piechart_source.invalidate();\r\n    \r\n                                barchart_type.getAxisLeft().setEnabled(false);\r\n                                barchart_type.setScaleEnabled(false);\r\n                                barchart_type.getAxisRight().setEnabled(false);\r\n                                barchart_type.getAxisRight().setDrawGridLines(false);\r\n                                barchart_type.getXAxis().setDrawLabels(false);\r\n                                barchart_type.getXAxis().setDrawGridLines(false);\r\n                                barchart_type.getDescription().setEnabled(false);\r\n                                barchart_type.getLegend().setEnabled(false);\r\n                                barchart_type.setBorderColor(Color.BLACK);\r\n                                barchart_type.setDrawBorders(false);\r\n    \r\n    \r\n                                barchart_type.setData(data_type);\r\n                                barchart_type.setMinimumHeight(arr_by_type.size()*250);\r\n                                barchart_type.invalidate();\r\n                                Log.e(&quot;INFO BAR&quot;, data_type.toString());\r\n    \r\n    \r\n                            piechart_defects.setOnChartValueSelectedListener(new OnChartValueSelectedListener() {\r\n                                @Override\r\n                                public void onValueSelected(Entry e, Highlight h) {\r\n                                    String value = String.valueOf((int)h.getY());\r\n                                    String toShow = &quot;&quot;;\r\n                                    if(h.getX() == 0){\r\n                                        toShow = &quot; MAJOR \\n&quot; + value;\r\n                                        chartSelectedDefect = &quot;MAJOR&quot;;\r\n                                        barchart_type.setData(data_type_MAJOR);\r\n                                    }else if(h.getX() == 1){\r\n                                        toShow = &quot; MEDIUM \\n&quot; + value;\r\n                                        chartSelectedDefect = &quot;MEDIUM&quot;;\r\n                                        barchart_type.setData(data_type_MEDIUM);\r\n                                        barchart_type.invalidate();\r\n                                    }else if(h.getX() == 2){\r\n                                        toShow = &quot; MINOR \\n&quot; + value ;\r\n                                        chartSelectedDefect = &quot;MINOR&quot;;\r\n                                        barchart_type.setData(data_type_MINOR);\r\n                                    }else if(h.getX() == 3){\r\n                                        toShow = &quot; OTHER \\n&quot; + value;\r\n                                        chartSelectedDefect = &quot;OTHER&quot;;\r\n                                        barchart_type.setData(data_type_OTHER);\r\n\r\n\r\nHow it appears when I show all:\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n\r\n[![How it appears on filtered. It should keep the size of the bar as well but it doesn&#39;t:][2]][2]\r\n\r\n\r\n[![enter image description here][3]][3]\r\n\r\n\r\n[![The yellow one appears the label, I don&#39;t know why...][4]][4]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/By0Yn.png\r\n  [2]: https://i.stack.imgur.com/jt0Uq.png\r\n  [3]: https://i.stack.imgur.com/w3cDg.png\r\n  [4]: https://i.stack.imgur.com/kUXAW.png","title":"Barchart doesn&#39;t show my values when filtered","body":"<p>I don't know if I'm using the correct way of filtering a barchart, or even if my code is properly written.</p>\n<p>But I have  problem, when I open my dashboard, I have 3 charts, one of the piecharts can filter the barchart, and depending on which was selected, the barchart only shows the piechart selected, otherwise shows all.</p>\n<p>My problem is when I filter those, I'm getting the correct filter, but I can't get the labels to appear, they just appear when I got only one, for example if I have 1Yellow, 15 Reds, its only a bar to show, but it only shows the label for the yellow one, but if yellow2 and 15 reds, it doesn't show any of them.</p>\n<p>It should be a easy fix, I just can't see where is the error.</p>\n<pre><code>ArrayList&lt;Integer&gt; colors_to_add_type = new ArrayList&lt;&gt;();\n                            ArrayList&lt;Integer&gt; colors_to_add_type_MINOR = new ArrayList&lt;&gt;();\n                            ArrayList&lt;Integer&gt; colors_to_add_type_MEDIUM = new ArrayList&lt;&gt;();\n                            ArrayList&lt;Integer&gt; colors_to_add_type_MAJOR = new ArrayList&lt;&gt;();\n                            ArrayList&lt;Integer&gt; colors_to_add_type_OTHER = new ArrayList&lt;&gt;();\n                            Iterator&lt;String&gt; defects_colors_keys;\n                            defects_colors_keys = colors_type.keys();\n                            while (defects_colors_keys.hasNext()){\n                                String key = defects_colors_keys.next();\n                                Log.e(&quot;COLOR_KEY&quot;, &quot;onResponse: &quot; + key );\n                                int to_add = Color.parseColor(colors_type.getString(key));\n                                int to_add_MINOR = Color.parseColor(&quot;#00FF00&quot;);\n                                int to_add_MEDIUM = Color.parseColor(&quot;#FFFF00&quot;);\n                                int to_add_MAJOR = Color.parseColor(&quot;#FF0000&quot;);\n                                int to_add_OTHER = Color.parseColor(&quot;#800080&quot;);\n                                Log.e(&quot;COLOR_NAME&quot;, &quot;onResponse: &quot; + colors_type.getString(key));\n                                colors_to_add_type.add(to_add);\n                                colors_to_add_type_MAJOR.add(to_add_MAJOR);\n                                colors_to_add_type_MEDIUM.add(to_add_MEDIUM);\n                                colors_to_add_type_MINOR.add(to_add_MINOR);\n                                colors_to_add_type_OTHER.add(to_add_OTHER);\n                            }\n                            List&lt;LegendEntry&gt; legends_type = new ArrayList&lt;&gt;();\n                            List&lt;LegendEntry&gt; legends_type_MINOR = new ArrayList&lt;&gt;();\n                            List&lt;LegendEntry&gt; legends_type_MEDIUM = new ArrayList&lt;&gt;();\n                            List&lt;LegendEntry&gt; legends_type_MAJOR = new ArrayList&lt;&gt;();\n                            List&lt;LegendEntry&gt; legends_type_OTHER = new ArrayList&lt;&gt;();\n                                type_of_defects = by_type.keys();\n                                int c = 0;\n                                if(!map_defects_by_type_count.isEmpty()){\n                                    map_defects_by_type_count.clear();\n                                }\n                                Log.e(&quot;DEFECTS&quot;, defects_list.toString());\n                                Log.e(&quot;DEFECTS&quot;,String.valueOf(defects_list.size()));\n                                while(type_of_defects.hasNext()) {\n                                    String key = type_of_defects.next();\n                                    Log.e(&quot;DEFECTS_type&quot;, key.toString());\n                                    map_defects_by_type_count.put(key, by_type.getInt(key));\n                                    map_get_defect_type.put(c, key);\n                                    LegendEntry legendEntry = new LegendEntry();\n                                    legendEntry.label = key;\n                                    legendEntry.formColor = colors_to_add_type.get(c);\n                                    legends_type.add(legendEntry);\n                                    arr_by_type.add(new BarEntry((float)c + 1, (int)by_type.getInt(key), (String)key));\n                                    c++;\n                                    for (int i = 0; i &lt; defects_list.size(); i++){\n                                        if (defects_list.get(i).getStringProperty(&quot;defect&quot;).equals(key)){\n                                            if (defects_list.get(i).getStringProperty(&quot;criticality&quot;).equals(&quot;MAJOR&quot;)){\n                                                arr_by_type_MAJOR.add(new BarEntry((float)c +1, (int)by_type.getInt(key), (String)key));\n                                                legends_type_MAJOR.add(legendEntry);\n                                                break;\n                                            }\n                                            if (defects_list.get(i).getStringProperty(&quot;criticality&quot;).equals(&quot;MEDIUM&quot;)){\n                                                arr_by_type_MEDIUM.add(new BarEntry((float)c +1 , (int)by_type.getInt(key), (String)key));\n                                                legends_type_MEDIUM.add(legendEntry);\n                                                break;\n                                            }\n                                            if (defects_list.get(i).getStringProperty(&quot;criticality&quot;).equals(&quot;MINOR&quot;)){\n                                                arr_by_type_MINOR.add(new BarEntry((float)c +1, (int)by_type.getInt(key), (String)key));\n                                                legends_type_MINOR.add(legendEntry);\n                                                break;\n                                            }\n                                            if (defects_list.get(i).getStringProperty(&quot;criticality&quot;).equals(&quot;OTHER&quot;)){\n                                                arr_by_type_OTHER.add(new BarEntry((float)c +1, (int)by_type.getInt(key), (String)key));\n                                                legends_type_OTHER.add(legendEntry);\n                                                break;\n                                            }\n                                        }\n                                    }\n                                }\n                                TOTAL_DEFECTS = TOTAL_BY_CRIT;\n                            if(TOTAL_BY_CRIT != 0){\n                                if(MAJOR != 0){\n                                    major_percent =  (float) MAJOR / TOTAL_BY_CRIT;\n                                }\n                                if(MEDIUM != 0){\n                                    medium_percent =  (float) MEDIUM / TOTAL_BY_CRIT;\n                                }\n                                if(MINOR != 0){\n                                    minor_percent = (float) MINOR / TOTAL_BY_CRIT;\n                                }\n                                if(OTHER != 0){\n                                    other_percent = (float) OTHER / TOTAL_BY_CRIT;\n                                }\n                            }\n\n                            TOTAL_SOURCE = TOTAL_H_M;\n                            if(TOTAL_H_M != 0){\n                                if(HUMAN != 0){\n                                    human_percent = (float) HUMAN / TOTAL_H_M;\n                                }\n                                if(MACHINE != 0){\n                                    machine_percent = (float) MACHINE / TOTAL_H_M;\n                                }\n                            }\n                            arr_by_defect.add(new PieEntry(MAJOR, &quot;MAJOR&quot;));\n                            arr_by_defect.add(new PieEntry(MEDIUM, &quot;MEDIUM&quot;));\n                            arr_by_defect.add(new PieEntry(MINOR, &quot;MINOR&quot;));\n                            arr_by_defect.add(new PieEntry(OTHER, &quot;OTHER&quot;));\n                            arr_by_source.add(new PieEntry(HUMAN, &quot;HUMAN&quot;));\n                            arr_by_source.add(new PieEntry(MACHINE, &quot;MACHINE&quot;));\n                            dataSet_by_defect = new PieDataSet(arr_by_defect, &quot;&quot;);\n                            dataSet_by_source = new PieDataSet(arr_by_source, &quot;&quot;);\n                            dataSet_by_type = new BarDataSet(arr_by_type, &quot;&quot;);\n                            dataSet_by_type_MAJOR = new BarDataSet(arr_by_type_MAJOR, &quot;&quot;);\n                            dataSet_by_type_MEDIUM = new BarDataSet(arr_by_type_MEDIUM, &quot;&quot;);\n                            dataSet_by_type_MINOR = new BarDataSet(arr_by_type_MINOR, &quot;&quot;);\n                            dataSet_by_type_OTHER = new BarDataSet(arr_by_type_OTHER, &quot;&quot;);\n                            //GET THE COLORS\n                            String colorMajor = colors.getString(&quot;MAJOR&quot;);\n                            String colorMedium = colors.getString(&quot;MEDIUM&quot;);\n                            String colorMinor = colors.getString(&quot;MINOR&quot;);\n                            String colorOther = colors.getString(&quot;OTHER&quot;);\n                            String colorHuman = human_machine_colors.getString(&quot;human&quot;);\n                            String colorMachine = human_machine_colors.getString(&quot;machine&quot;);\n                            final int[] sliceColors = {Color.parseColor(colorMajor), Color.parseColor(colorMedium), Color.parseColor(colorMinor), Color.parseColor(colorOther)};\n                            ArrayList&lt;Integer&gt; colorsSet = new ArrayList&lt;&gt;();\n                            for (int color : sliceColors){\n                                colorsSet.add(color);\n                            }\n                            Log.e(&quot;COLORS_TO ADD&quot;, &quot;MAJOR&quot; + colorMajor);\n                            Log.e(&quot;COLORS_TO ADD&quot;, &quot;MEDIUM&quot; + colorMedium);\n                            Log.e(&quot;COLORS_TO ADD&quot;, &quot;MINOR&quot; + colorMinor);\n                            Log.e(&quot;COLORS_TO ADD&quot;, &quot;OTHER&quot; + colorOther);\n                            dataSet_by_defect.setColors(colorsSet);\n                            final int[] sliceColors_hm = {Color.parseColor(colorHuman), Color.parseColor(colorMachine)};\n                            ArrayList&lt;Integer&gt; colorsSet_hm = new ArrayList&lt;&gt;();\n                            for (int color : sliceColors_hm){\n                                colorsSet_hm.add(color);\n                            }\n                            dataSet_by_source.setColors(colorsSet_hm);\n                            dataSet_by_type.setColors(colors_to_add_type);\n                            dataSet_by_type_MINOR.setColors(colors_to_add_type_MINOR);\n                            dataSet_by_type_MEDIUM.setColors(colors_to_add_type_MEDIUM);\n                            dataSet_by_type_MAJOR.setColors(colors_to_add_type_MAJOR);\n                            dataSet_by_type_OTHER.setColors(colors_to_add_type_OTHER);\n                            dataSet_by_type.setAxisDependency(YAxis.AxisDependency.RIGHT);\n                            dataSet_by_type_MINOR.setAxisDependency(YAxis.AxisDependency.RIGHT);\n                            dataSet_by_type_MEDIUM.setAxisDependency(YAxis.AxisDependency.RIGHT);\n                            dataSet_by_type_MAJOR.setAxisDependency(YAxis.AxisDependency.RIGHT);\n                            dataSet_by_type_OTHER.setAxisDependency(YAxis.AxisDependency.RIGHT);\n\n\n                            final PieData data_defect = new PieData(dataSet_by_defect);\n                            final PieData data_source = new PieData(dataSet_by_source);\n                            final BarData data_type = new BarData(dataSet_by_type);\n                            final BarData data_type_MINOR = new BarData(dataSet_by_type_MINOR);\n                            final BarData data_type_MEDIUM = new BarData(dataSet_by_type_MEDIUM);\n                            final BarData data_type_MAJOR = new BarData(dataSet_by_type_MAJOR);\n                            final BarData data_type_OTHER = new BarData(dataSet_by_type_OTHER);\n                            data_type.setDrawValues(true);\n                            data_type_MAJOR.setDrawValues(true);\n                            data_type_MEDIUM.setDrawValues(true);\n                            data_type_MINOR.setDrawValues(true);\n                            data_type_OTHER.setDrawValues(true);\n\n                            data_defect.setDrawValues(false);\n                            data_source.setDrawValues(false);\n                            //data_type.setBarWidth(.75f);\n                            piechart_defects.setDrawHoleEnabled(true);\n                            piechart_defects.setHoleColor(Color.TRANSPARENT);\n                            piechart_defects.setDrawEntryLabels(false);\n                            piechart_defects.setDrawMarkers(false);\n                            piechart_defects.setCenterText(String.valueOf(TOTAL_DEFECTS) + &quot; TOTAL&quot;);\n                            piechart_defects.setCenterTextSize(10);\n                            piechart_defects.getDescription().setEnabled(false);\n                            Legend l_defect = piechart_defects.getLegend();\n                            l_defect.setVerticalAlignment(Legend.LegendVerticalAlignment.TOP);\n                            l_defect.setHorizontalAlignment(Legend.LegendHorizontalAlignment.RIGHT);\n                            l_defect.setOrientation(Legend.LegendOrientation.VERTICAL);\n                            l_defect.setDrawInside(false);\n                            l_defect.setEnabled(true);\n                            l_defect.setFormSize(4f);\n                            l_defect.setTextColor(Color.WHITE);\n                            l_defect.setTextSize(.5f);\n                            piechart_source.setDrawHoleEnabled(true);\n                            piechart_source.setDrawEntryLabels(false);\n                            piechart_source.setHoleColor(Color.TRANSPARENT);\n                            piechart_source.setDrawMarkers(false);\n                            piechart_source.setCenterText(String.valueOf(TOTAL_SOURCE) + &quot; TOTAL&quot;);\n                            piechart_source.setCenterTextSize(10);\n                            piechart_source.getDescription().setEnabled(false);\n                            piechart_source.setTransparentCircleRadius(10f);\n                            Legend l_source = piechart_source.getLegend();\n                            l_source.setVerticalAlignment(Legend.LegendVerticalAlignment.TOP);\n                            l_source.setHorizontalAlignment(Legend.LegendHorizontalAlignment.RIGHT);\n                            l_source.setOrientation(Legend.LegendOrientation.VERTICAL);\n                            l_source.setDrawInside(false);\n                            l_source.setEnabled(true);\n                            l_source.setFormSize(4f);\n                            l_source.setTextColor(Color.WHITE);\n                            l_source.setTextSize(.5f);\n                            dataSet_by_type.setValueTextColor(Color.WHITE);\n                            dataSet_by_type_MAJOR.setValueTextColor(Color.WHITE);\n                            dataSet_by_type_MEDIUM.setValueTextColor(Color.WHITE);\n                            dataSet_by_type_MINOR.setValueTextColor(Color.WHITE);\n                            dataSet_by_type_OTHER.setValueTextColor(Color.WHITE);\n                            dataSet_by_type.setValueTextSize(7f);\n                            dataSet_by_type_MINOR.setValueTextSize(7f);\n                            dataSet_by_type_MEDIUM.setValueTextSize(7f);\n                            dataSet_by_type_MAJOR.setValueTextSize(7f);\n                            dataSet_by_type_OTHER.setValueTextSize(7f);\n\n                            data_type.setBarWidth(.5f);\n\n                            data_type.setValueFormatter(new ValueFormatter() {\n                                @Override\n                                public String getBarLabel(BarEntry barEntry) {\n                                    int barEntryY = (int) barEntry.getY();\n\n                                    return (String)barEntry.getData() + &quot;  &quot; + &quot;(&quot; + String.valueOf(barEntryY) + &quot;)&quot;;\n                                }\n                            });\n\n\n                        Legend l_type_MAJOR = barchart_type.getLegend();\n                        l_type_MAJOR.setCustom(legends_type_MAJOR);\n                        l_type_MAJOR.setWordWrapEnabled(true);\n                        l_type_MAJOR.setDrawInside(true);\n                        data_type_MAJOR.setValueFormatter(new ValueFormatter() {\n                            @Override\n                            public String getBarLabel(BarEntry barEntry) {\n                                int barEntryY = (int) barEntry.getY();\n                                return (String)barEntry.getData() + &quot;  &quot; + &quot;(&quot; + String.valueOf(barEntryY) + &quot;)&quot;;\n                            }\n                        });\n                        data_type_MAJOR.setBarWidth(.5f);\n\n                        Legend l_type_OTHER = barchart_type.getLegend();\n                        l_type_OTHER.setCustom(legends_type_OTHER);\n                        l_type_OTHER.setWordWrapEnabled(true);\n                        l_type_OTHER.setDrawInside(true);\n                        data_type_OTHER.setValueFormatter(new ValueFormatter() {\n                            @Override\n                            public String getBarLabel(BarEntry barEntry) {\n                                int barEntryY = (int) barEntry.getY();\n                                return (String)barEntry.getData() + &quot;  &quot; + &quot;(&quot; + String.valueOf(barEntryY) + &quot;)&quot;;\n                            }\n                        });\n                        data_type_OTHER.setBarWidth(.5f);\n\n                        Legend l_type_MINOR = barchart_type.getLegend();\n                        l_type_MINOR.setCustom(legends_type_MINOR);\n                        l_type_MINOR.setWordWrapEnabled(true);\n                        l_type_MINOR.setDrawInside(true);\n                        data_type_MINOR.setValueFormatter(new ValueFormatter() {\n                            @Override\n                            public String getBarLabel(BarEntry barEntry) {\n                                int barEntryY = (int) barEntry.getY();\n\n                                return (String)barEntry.getData() + &quot;  &quot; + &quot;(&quot; + String.valueOf(barEntryY) + &quot;)&quot;;\n                            }\n                        });\n\n                        Legend l_type_MEDIUM = barchart_type.getLegend();\n                        l_type_MEDIUM.setCustom(legends_type_MEDIUM);\n                        l_type_MEDIUM.setWordWrapEnabled(true);\n                        l_type_MEDIUM.setDrawInside(true);\n                        data_type_MEDIUM.setValueFormatter(new ValueFormatter() {\n                            @Override\n                            public String getBarLabel(BarEntry barEntry) {\n                                int barEntryY = (int) barEntry.getY();\n\n                                return (String)barEntry.getData() + &quot;  &quot; + &quot;(&quot; + String.valueOf(barEntryY) + &quot;)&quot;;\n                            }\n                        });\n\n\n\n\n\n\n\n\n                            barchart_type.setRenderer(new MyRenderer(barchart_type, barchart_type.getAnimator(), barchart_type.getViewPortHandler()));\n\n                            Legend l_type = barchart_type.getLegend();\n                            l_type.setCustom(legends_type);\n                            l_type.setWordWrapEnabled(true);\n                            l_type.setDrawInside(true);\n                            piechart_defects.setData(data_defect);\n                            piechart_defects.invalidate();\n                            piechart_source.setData(data_source);\n                            piechart_source.invalidate();\n\n                            barchart_type.getAxisLeft().setEnabled(false);\n                            barchart_type.setScaleEnabled(false);\n                            barchart_type.getAxisRight().setEnabled(false);\n                            barchart_type.getAxisRight().setDrawGridLines(false);\n                            barchart_type.getXAxis().setDrawLabels(false);\n                            barchart_type.getXAxis().setDrawGridLines(false);\n                            barchart_type.getDescription().setEnabled(false);\n                            barchart_type.getLegend().setEnabled(false);\n                            barchart_type.setBorderColor(Color.BLACK);\n                            barchart_type.setDrawBorders(false);\n\n\n                            barchart_type.setData(data_type);\n                            barchart_type.setMinimumHeight(arr_by_type.size()*250);\n                            barchart_type.invalidate();\n                            Log.e(&quot;INFO BAR&quot;, data_type.toString());\n\n\n                        piechart_defects.setOnChartValueSelectedListener(new OnChartValueSelectedListener() {\n                            @Override\n                            public void onValueSelected(Entry e, Highlight h) {\n                                String value = String.valueOf((int)h.getY());\n                                String toShow = &quot;&quot;;\n                                if(h.getX() == 0){\n                                    toShow = &quot; MAJOR \\n&quot; + value;\n                                    chartSelectedDefect = &quot;MAJOR&quot;;\n                                    barchart_type.setData(data_type_MAJOR);\n                                }else if(h.getX() == 1){\n                                    toShow = &quot; MEDIUM \\n&quot; + value;\n                                    chartSelectedDefect = &quot;MEDIUM&quot;;\n                                    barchart_type.setData(data_type_MEDIUM);\n                                    barchart_type.invalidate();\n                                }else if(h.getX() == 2){\n                                    toShow = &quot; MINOR \\n&quot; + value ;\n                                    chartSelectedDefect = &quot;MINOR&quot;;\n                                    barchart_type.setData(data_type_MINOR);\n                                }else if(h.getX() == 3){\n                                    toShow = &quot; OTHER \\n&quot; + value;\n                                    chartSelectedDefect = &quot;OTHER&quot;;\n                                    barchart_type.setData(data_type_OTHER);\n</code></pre>\n<p>How it appears when I show all:</p>\n<p><a href=\"https://i.stack.imgur.com/By0Yn.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/By0Yn.png\" alt=\"enter image description here\" /></a></p>\n<p><a href=\"https://i.stack.imgur.com/jt0Uq.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/jt0Uq.png\" alt=\"How it appears on filtered. It should keep the size of the bar as well but it doesn't:\" /></a></p>\n<p><a href=\"https://i.stack.imgur.com/w3cDg.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/w3cDg.png\" alt=\"enter image description here\" /></a></p>\n<p><a href=\"https://i.stack.imgur.com/kUXAW.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/kUXAW.png\" alt=\"The yellow one appears the label, I don't know why...\" /></a></p>\n"},{"tags":["java","spring","spring-boot","spring-mvc","jsp"],"comments":[{"owner":{"account_id":195331,"reputation":275428,"user_id":438154,"accept_rate":98,"display_name":"Sotirios Delimanolis"},"score":0,"creation_date":1672933124,"post_id":75020859,"comment_id":132388821,"body_markdown":"What does the rest of your configuration look like? The view shouldn&#39;t be getting handled by `ResourceHttpRequestHandler`.","body":"What does the rest of your configuration look like? The view shouldn&#39;t be getting handled by <code>ResourceHttpRequestHandler</code>."},{"owner":{"account_id":7680380,"reputation":351,"user_id":5819768,"accept_rate":25,"display_name":"Krowar"},"score":0,"creation_date":1672933595,"post_id":75020859,"comment_id":132389014,"body_markdown":"Which configuration file do you want to see ?","body":"Which configuration file do you want to see ?"}],"answers":[{"tags":[],"owner":{"account_id":7680380,"reputation":351,"user_id":5819768,"accept_rate":25,"display_name":"Krowar"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1672935210,"creation_date":1672935210,"answer_id":75021373,"question_id":75020859,"body_markdown":"Found the answer here : https://youtrack.jetbrains.com/issue/IDEA-158125/Spring-boot-run-configuration-does-not-find-resources-in-META-INF , thanks Andy Wilkinson:\r\n\r\n\r\n\r\n&gt; The problem is that Jasper is marked as provided in the pom so it&#39;s\r\n&gt; not on the classpath. I believe there&#39;s already an IDEA issue open for\r\n&gt; that problem. It causes Spring Boot to go down a code path where\r\n&gt; various JSP-related bits and pieces are not enabled. You can avoid it\r\n&gt; by removing &lt;scope&gt;provided&lt;/scope&gt; from your pom as it&#39;s only\r\n&gt; necessary when building a war file that will be deployed to a servlet\r\n&gt; container.\r\n\r\nI&#39;ve removed the &lt;scope&gt;provided&lt;/scope&gt; , ran a mvn clean (it does not work to just re-run the project) and then it worked. \r\n\r\nWeird that this basic issue is still present in IntelliJ after 6 years (link is from 2016)","title":"Why is the JSP not found in Spring ? File exists","body":"<p>Found the answer here : <a href=\"https://youtrack.jetbrains.com/issue/IDEA-158125/Spring-boot-run-configuration-does-not-find-resources-in-META-INF\" rel=\"nofollow noreferrer\">https://youtrack.jetbrains.com/issue/IDEA-158125/Spring-boot-run-configuration-does-not-find-resources-in-META-INF</a> , thanks Andy Wilkinson:</p>\n<blockquote>\n<p>The problem is that Jasper is marked as provided in the pom so it's\nnot on the classpath. I believe there's already an IDEA issue open for\nthat problem. It causes Spring Boot to go down a code path where\nvarious JSP-related bits and pieces are not enabled. You can avoid it\nby removing provided from your pom as it's only\nnecessary when building a war file that will be deployed to a servlet\ncontainer.</p>\n</blockquote>\n<p>I've removed the provided , ran a mvn clean (it does not work to just re-run the project) and then it worked.</p>\n<p>Weird that this basic issue is still present in IntelliJ after 6 years (link is from 2016)</p>\n"}],"owner":{"account_id":7680380,"reputation":351,"user_id":5819768,"accept_rate":25,"display_name":"Krowar"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":283,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1672935210,"creation_date":1672932837,"question_id":75020859,"body_markdown":"In a very basic app, I have the sayHelloController.java as following\r\n\r\n    @Controller\r\n    public class SayHelloController {\r\n    \r\n    \r\n        @RequestMapping(&quot;say-hello-jsp&quot;)\r\n        public String sayHelloJsp() {\r\n            return &quot;sayHello&quot;;\r\n        }\r\n    }\r\n\r\nwith the following application.properties:\r\n\r\n    spring.mvc.view.prefix=/WEB-INF/jsp/\r\n    spring.mvc.view.suffix=.jsp\r\n    logging.level.org.springframwork=debug\r\n\r\nand the sayHello.jsp:\r\n\r\n     &lt;html&gt;\r\n        &lt;head&gt;\r\n            My first JSP file!\r\n        &lt;/head&gt;\r\n        &lt;body&gt;\r\n            &lt;h1&gt;Hello&lt;/h1&gt;\r\n            &lt;p&gt;\r\n                This is the text we want to show &lt;br/&gt;\r\n            &lt;p&gt;\r\n        &lt;/body&gt;\r\n     &lt;/html&gt;\r\n\r\nWhen I go to http://localhost:8080/say-hello-jsp, I get a 404 and the logs give me : \r\n\r\n    : GET &quot;/say-hello-jsp&quot;, parameters={}\r\n    : Mapped to com.in28minutes.springboot.myfirstwebapp.hello.SayHelloController#sayHelloJsp()\r\n    : Selected &#39;text/html&#39; given [text/html, application/xhtml+xml, image/avif, image/webp, image/apng, application/xml;q=0.9, application/signed-exchange;v=b3;q=0.9, */*;q=0.8]\r\n    : View name &#39;sayHello&#39;, model {}\r\n    : Forwarding to [/WEB-INF/jsp/sayHello.jsp]\r\n    : &quot;FORWARD&quot; dispatch for GET &quot;/WEB-INF/jsp/sayHello.jsp&quot;, parameters={}\r\n    : Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/], classpath [resources/], classpath [static/], classpath [public/], ServletContext [/]]\r\n    : &quot;Path with &quot;WEB-INF&quot; or &quot;META-INF&quot;: [WEB-INF/jsp/sayHello.jsp]&quot;\r\n    : Resource not found\r\n\r\nWhich does not make sense, because the file exists, proof : \r\n\r\n    macbook-air:jsp gerald$ pwd\r\n    /Users/gerald/IdeaProjects/myfirstwebapp/src/main/resources/META-INF/resources/WEB-INF/jsp\r\n    macbook-air:jsp gerald$ ls\r\n    sayHello.jsp\r\n\r\nAlso, I&#39;ve added jasper as a dependency in my pom.xml\r\n\r\n\t&lt;dependency&gt;\r\n\t\t&lt;groupId&gt;org.apache.tomcat.embed&lt;/groupId&gt;\r\n\t\t&lt;artifactId&gt;tomcat-embed-jasper&lt;/artifactId&gt;\r\n\t\t&lt;scope&gt;provided&lt;/scope&gt;\r\n\t&lt;/dependency&gt;\r\n\r\nWhy is the file not retrieved ? \r\n","title":"Why is the JSP not found in Spring ? File exists","body":"<p>In a very basic app, I have the sayHelloController.java as following</p>\n<pre><code>@Controller\npublic class SayHelloController {\n\n\n    @RequestMapping(&quot;say-hello-jsp&quot;)\n    public String sayHelloJsp() {\n        return &quot;sayHello&quot;;\n    }\n}\n</code></pre>\n<p>with the following application.properties:</p>\n<pre><code>spring.mvc.view.prefix=/WEB-INF/jsp/\nspring.mvc.view.suffix=.jsp\nlogging.level.org.springframwork=debug\n</code></pre>\n<p>and the sayHello.jsp:</p>\n<pre><code> &lt;html&gt;\n    &lt;head&gt;\n        My first JSP file!\n    &lt;/head&gt;\n    &lt;body&gt;\n        &lt;h1&gt;Hello&lt;/h1&gt;\n        &lt;p&gt;\n            This is the text we want to show &lt;br/&gt;\n        &lt;p&gt;\n    &lt;/body&gt;\n &lt;/html&gt;\n</code></pre>\n<p>When I go to http://localhost:8080/say-hello-jsp, I get a 404 and the logs give me :</p>\n<pre><code>: GET &quot;/say-hello-jsp&quot;, parameters={}\n: Mapped to com.in28minutes.springboot.myfirstwebapp.hello.SayHelloController#sayHelloJsp()\n: Selected 'text/html' given [text/html, application/xhtml+xml, image/avif, image/webp, image/apng, application/xml;q=0.9, application/signed-exchange;v=b3;q=0.9, */*;q=0.8]\n: View name 'sayHello', model {}\n: Forwarding to [/WEB-INF/jsp/sayHello.jsp]\n: &quot;FORWARD&quot; dispatch for GET &quot;/WEB-INF/jsp/sayHello.jsp&quot;, parameters={}\n: Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/], classpath [resources/], classpath [static/], classpath [public/], ServletContext [/]]\n: &quot;Path with &quot;WEB-INF&quot; or &quot;META-INF&quot;: [WEB-INF/jsp/sayHello.jsp]&quot;\n: Resource not found\n</code></pre>\n<p>Which does not make sense, because the file exists, proof :</p>\n<pre><code>macbook-air:jsp gerald$ pwd\n/Users/gerald/IdeaProjects/myfirstwebapp/src/main/resources/META-INF/resources/WEB-INF/jsp\nmacbook-air:jsp gerald$ ls\nsayHello.jsp\n</code></pre>\n<p>Also, I've added jasper as a dependency in my pom.xml</p>\n<pre><code>&lt;dependency&gt;\n    &lt;groupId&gt;org.apache.tomcat.embed&lt;/groupId&gt;\n    &lt;artifactId&gt;tomcat-embed-jasper&lt;/artifactId&gt;\n    &lt;scope&gt;provided&lt;/scope&gt;\n&lt;/dependency&gt;\n</code></pre>\n<p>Why is the file not retrieved ?</p>\n"},{"tags":["java","spring-boot","azure","azure-application-insights"],"answers":[{"comments":[{"owner":{"account_id":70456,"reputation":106,"user_id":204295,"display_name":"Ben Ketteridge"},"score":0,"creation_date":1670946171,"post_id":74785486,"comment_id":131987836,"body_markdown":"The applications normally connect to AI just fine. It&#39;s a new issue of runtime connectivity.\nRedeployment of the applications and even re-building the application instance from scratch have had no impact.","body":"The applications normally connect to AI just fine. It&#39;s a new issue of runtime connectivity. Redeployment of the applications and even re-building the application instance from scratch have had no impact."}],"tags":[],"owner":{"account_id":18432270,"reputation":1955,"user_id":13427068,"display_name":"Faceless_GOD"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1670937401,"creation_date":1670937401,"answer_id":74785486,"question_id":74772630,"body_markdown":"- Here I was able to connect to application insights by adding an `applicationsinsights.json` which will contain the connection string and with  `logback-spring.xml` which will configure logging in the app. \r\n\r\nlogback-spring.xml\r\n```\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; ?&gt;  \r\n&lt;configuration&gt;  \r\n\t&lt;appender name=&quot;aiAppender&quot; class=&quot;com.microsoft.applicationinsights.logback.ApplicationInsightsAppender&quot;&gt;  \r\n\t&lt;/appender&gt;\r\n\t&lt;appender name=&quot;Console&quot; class=&quot;ch.qos.logback.core.ConsoleAppender&quot;&gt;  \r\n\t\t &lt;layout name = &quot;ch.qos.logback.classic.PatternLayout&quot;&gt;  \r\n\t\t\t &lt;Pattern&gt;  %black(%d{ISO8601}) %highlight(%-5level) [%blue(%t)] %yellow(%c{}): %msg%n%throwable;%n  \r\n             &lt;/Pattern&gt;  \r\n\t\t &lt;/layout&gt; \r\n\t &lt;/appender&gt;  \r\n\t &lt;root level =&quot;warn&quot;&gt;  \r\n\t &lt;appender-ref ref=&quot;aiAppender&quot; /&gt;  \r\n\t &lt;appender-ref ref=&quot;Console&quot; /&gt;   \r\n\t &lt;/root&gt;\r\n &lt;/configuration&gt;\r\n```\r\n\r\napplicationsinsights.json\r\n\r\n```\r\n{\r\n\t&quot;ConnectionString&quot;:&quot;&quot;\r\n}\r\n```\r\n\r\npom.xml  (Dependencies)\r\n```\r\n&lt;dependency&gt;  \r\n\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;  \r\n\t &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;  \r\n&lt;/dependency&gt;  \r\n  \r\n&lt;dependency&gt;  \r\n\t &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;  \r\n\t &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;  \r\n\t &lt;scope&gt;test&lt;/scope&gt;  \r\n&lt;/dependency&gt;  \r\n&lt;dependency&gt;  \r\n\t &lt;groupId&gt;com.microsoft.azure&lt;/groupId&gt;  \r\n\t &lt;artifactId&gt;applicationinsights-runtime-attach&lt;/artifactId&gt;  \r\n\t &lt;version&gt;3.4.3&lt;/version&gt;  \r\n&lt;/dependency&gt;  \r\n  \r\n&lt;dependency&gt;  \r\n\t &lt;groupId&gt;com.microsoft.azure&lt;/groupId&gt;  \r\n\t &lt;artifactId&gt;applicationinsights-logging-logback&lt;/artifactId&gt;  \r\n\t &lt;version&gt;[2.0,)&lt;/version&gt;  \r\n&lt;/dependency&gt;  \r\n&lt;dependency&gt;  \r\n\t &lt;groupId&gt;com.microsoft.azure&lt;/groupId&gt;  \r\n\t &lt;artifactId&gt;applicationinsights-spring-boot-starter&lt;/artifactId&gt;  \r\n\t &lt;version&gt;2.6.4&lt;/version&gt;  \r\n&lt;/dependency&gt;\r\n```\r\nIn The main file I also added the following line \r\n```\r\nApplicationInsights.attach();\r\n```\r\nmake sure the above file is above everything else in the main function.\r\n![enter image description here](https://i.stack.imgur.com/PFJv9.png)\r\n\r\n- Now coming back to your error, it maybe because the connection to the application insights is closing before your app could send the logs. Try redeploying the application insight. ","title":"Spring Boot app on Azure cannot connect to Application Insights","body":"<ul>\n<li>Here I was able to connect to application insights by adding an <code>applicationsinsights.json</code> which will contain the connection string and with  <code>logback-spring.xml</code> which will configure logging in the app.</li>\n</ul>\n<p>logback-spring.xml</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; ?&gt;  \n&lt;configuration&gt;  \n    &lt;appender name=&quot;aiAppender&quot; class=&quot;com.microsoft.applicationinsights.logback.ApplicationInsightsAppender&quot;&gt;  \n    &lt;/appender&gt;\n    &lt;appender name=&quot;Console&quot; class=&quot;ch.qos.logback.core.ConsoleAppender&quot;&gt;  \n         &lt;layout name = &quot;ch.qos.logback.classic.PatternLayout&quot;&gt;  \n             &lt;Pattern&gt;  %black(%d{ISO8601}) %highlight(%-5level) [%blue(%t)] %yellow(%c{}): %msg%n%throwable;%n  \n             &lt;/Pattern&gt;  \n         &lt;/layout&gt; \n     &lt;/appender&gt;  \n     &lt;root level =&quot;warn&quot;&gt;  \n     &lt;appender-ref ref=&quot;aiAppender&quot; /&gt;  \n     &lt;appender-ref ref=&quot;Console&quot; /&gt;   \n     &lt;/root&gt;\n &lt;/configuration&gt;\n</code></pre>\n<p>applicationsinsights.json</p>\n<pre><code>{\n    &quot;ConnectionString&quot;:&quot;&quot;\n}\n</code></pre>\n<p>pom.xml  (Dependencies)</p>\n<pre><code>&lt;dependency&gt;  \n    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;  \n     &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;  \n&lt;/dependency&gt;  \n  \n&lt;dependency&gt;  \n     &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;  \n     &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;  \n     &lt;scope&gt;test&lt;/scope&gt;  \n&lt;/dependency&gt;  \n&lt;dependency&gt;  \n     &lt;groupId&gt;com.microsoft.azure&lt;/groupId&gt;  \n     &lt;artifactId&gt;applicationinsights-runtime-attach&lt;/artifactId&gt;  \n     &lt;version&gt;3.4.3&lt;/version&gt;  \n&lt;/dependency&gt;  \n  \n&lt;dependency&gt;  \n     &lt;groupId&gt;com.microsoft.azure&lt;/groupId&gt;  \n     &lt;artifactId&gt;applicationinsights-logging-logback&lt;/artifactId&gt;  \n     &lt;version&gt;[2.0,)&lt;/version&gt;  \n&lt;/dependency&gt;  \n&lt;dependency&gt;  \n     &lt;groupId&gt;com.microsoft.azure&lt;/groupId&gt;  \n     &lt;artifactId&gt;applicationinsights-spring-boot-starter&lt;/artifactId&gt;  \n     &lt;version&gt;2.6.4&lt;/version&gt;  \n&lt;/dependency&gt;\n</code></pre>\n<p>In The main file I also added the following line</p>\n<pre><code>ApplicationInsights.attach();\n</code></pre>\n<p>make sure the above file is above everything else in the main function.\n<img src=\"https://i.stack.imgur.com/PFJv9.png\" alt=\"enter image description here\" /></p>\n<ul>\n<li>Now coming back to your error, it maybe because the connection to the application insights is closing before your app could send the logs. Try redeploying the application insight.</li>\n</ul>\n"},{"tags":[],"owner":{"account_id":70456,"reputation":106,"user_id":204295,"display_name":"Ben Ketteridge"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1672934975,"creation_date":1672934975,"answer_id":75021331,"question_id":74772630,"body_markdown":"Turns out that the actual problem was in the configuration of the firewall between the application instances and the Application Insights service. The firewall is configured by a third party (outsourcing FTW), and they had change the network MTU from 1500 to 1400, resulting in many, many dropped packets. Some messages were getting through (which made it hard to diagnose), and sometimes even large messages were (eventually) getting through, but the fix was to revert the firewall change.","title":"Spring Boot app on Azure cannot connect to Application Insights","body":"<p>Turns out that the actual problem was in the configuration of the firewall between the application instances and the Application Insights service. The firewall is configured by a third party (outsourcing FTW), and they had change the network MTU from 1500 to 1400, resulting in many, many dropped packets. Some messages were getting through (which made it hard to diagnose), and sometimes even large messages were (eventually) getting through, but the fix was to revert the firewall change.</p>\n"}],"owner":{"account_id":70456,"reputation":106,"user_id":204295,"display_name":"Ben Ketteridge"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1009,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":75021331,"answer_count":2,"score":0,"last_activity_date":1672934975,"creation_date":1670855404,"question_id":74772630,"body_markdown":"I have a number of Azure App Service deployed Java applications using Application Insights. Over the last 72 hours they&#39;ve started failing to deploy upon restart. Nothing has changed that I&#39;m  aware of, though, of course, I would say that.\r\n\r\nThe only smoking gun I can find is that there is a warning in the default-docker.log\r\n\r\n    WARN 138 --- [           main] c.m.azure.telemetry.TelemetrySender      : Failed to exchange telemetry request, I/O error on POST request for &quot;https://dc.services.visualstudio.com/v2/track&quot;: Connection reset; nested exception is java.net.SocketException: Connection reset.\r\n\r\nSome of the applications are using the java agent for application insights, some are not, so I don&#39;t think that the agent is the problem.\r\n\r\nAnd google has not seemed to be my friend today, as there are no results on this subject.","title":"Spring Boot app on Azure cannot connect to Application Insights","body":"<p>I have a number of Azure App Service deployed Java applications using Application Insights. Over the last 72 hours they've started failing to deploy upon restart. Nothing has changed that I'm  aware of, though, of course, I would say that.</p>\n<p>The only smoking gun I can find is that there is a warning in the default-docker.log</p>\n<pre><code>WARN 138 --- [           main] c.m.azure.telemetry.TelemetrySender      : Failed to exchange telemetry request, I/O error on POST request for &quot;https://dc.services.visualstudio.com/v2/track&quot;: Connection reset; nested exception is java.net.SocketException: Connection reset.\n</code></pre>\n<p>Some of the applications are using the java agent for application insights, some are not, so I don't think that the agent is the problem.</p>\n<p>And google has not seemed to be my friend today, as there are no results on this subject.</p>\n"},{"tags":["java","spring","spring-boot","producer-consumer","java.util.concurrent"],"answers":[{"tags":[],"owner":{"account_id":12332598,"reputation":1,"user_id":8998027,"display_name":"ordinary user"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1672934924,"creation_date":1672934924,"answer_id":75021320,"question_id":74986158,"body_markdown":"The problem was in wrong design. Producer-consumer is not normal solution. More appropriate way is using synchronous blocking pipeline scaled by performance of bottleneck. In my case I&#39;m bounded by  database pool connection performance.\r\n\r\n(dataSource-&gt;businessLogic-&gt;dataDestination) x N\r\n\r\nwhere N is scale","title":"Thread blocking even when LinkedBlockingQueue is empty","body":"<p>The problem was in wrong design. Producer-consumer is not normal solution. More appropriate way is using synchronous blocking pipeline scaled by performance of bottleneck. In my case I'm bounded by  database pool connection performance.</p>\n<p>(dataSource-&gt;businessLogic-&gt;dataDestination) x N</p>\n<p>where N is scale</p>\n"}],"owner":{"account_id":12332598,"reputation":1,"user_id":8998027,"display_name":"ordinary user"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":102,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":75021320,"answer_count":1,"score":0,"last_activity_date":1672934924,"creation_date":1672686484,"question_id":74986158,"body_markdown":"For clear investigation I have only one thread producing an entity and one thread consuming it. These two parts share LinkedBlockingQueue. After consuming the entity the thread pass it forward to other thread to save entity in DB. The producing thread stops working after few iterations of inserting and removes an entity via queue. Debug logging shows it like the queue blocks the insert operation even when the queue is empty or has enough space.\r\n\r\nProducer code:\r\n\r\n```\r\n         final BlockingQueue&lt;Entity&gt; queue = new LinkedBlockingQueue&lt;&gt;(8); //located in calling method\r\n\r\n         ....................................................................................\r\n\r\n         do {\r\n                List&lt;Entity&gt; entityList = entityDatasource.getEntity();\r\n\r\n                for (Entity entity: entityList) {\r\n                    try {\r\n                        log.debug(&quot;Size before insert opertaion is: &quot; + queue.size());\r\n                        queue.put(entity);\r\n                        log.debug(&quot;Size after insert opertaion is: &quot; + queue.size());\r\n                    } catch (InterruptedException ex) {\r\n                        ...\r\n                    }\r\n                }\r\n             } while (atomicBool.get());\r\n\r\n```\r\n\r\nConsumer code:\r\n\r\n```\r\n        CompletableFuture&lt;Void&gt; queueHandler = CompletableFuture.runAsync(() -&gt; {\r\n\r\n            do {\r\n                try {\r\n                    log.debug(&quot;Queue size is: &quot; + queue.size());\r\n                    Entity entity = queue.take();\r\n                    log.debug(&quot;Queue size is: &quot; + queue.size());\r\n                    storeInDb(entity);\r\n\r\n                } catch (InterruptedException ex) {\r\n                  ...\r\n                }\r\n            } while (atomicBool.get());\r\n\r\n        }, asyncPoolQueueHandler); //ThreadPoolTaskExecutor\r\n\r\n        List&lt;CompletableFuture&lt;Void&gt;&gt; pool = new ArrayList&lt;&gt;();\r\n        IntStream.range(0, 1).forEach(i -&gt; {\r\n            pool.add(queueHandler);\r\n        });\r\n        CompletableFuture.allOf(pool.toArray(CompletableFuture[]::new));\r\n```\r\n\r\nDB store:\r\n\r\n\r\n```\r\nCompletableFuture\r\n                .supplyAsync(() -&gt; {\r\n\r\n                    return entityRep.save(entity);\r\n\r\n                }, asyncPoolDbPerformer).join(); //ThreadPoolTaskExecutor\r\n```\r\n\r\n\r\n\r\n\r\n\r\n\r\n[VisualVM screenshot](https://i.stack.imgur.com/ni7s6.png)\r\n\r\nI was wached VisualVM, but there is nothing unexpected to me: when producer stuck then other parts of pipeline are motionless. I would be grateful for advice on what I could do with my issue","title":"Thread blocking even when LinkedBlockingQueue is empty","body":"<p>For clear investigation I have only one thread producing an entity and one thread consuming it. These two parts share LinkedBlockingQueue. After consuming the entity the thread pass it forward to other thread to save entity in DB. The producing thread stops working after few iterations of inserting and removes an entity via queue. Debug logging shows it like the queue blocks the insert operation even when the queue is empty or has enough space.</p>\n<p>Producer code:</p>\n<pre><code>         final BlockingQueue&lt;Entity&gt; queue = new LinkedBlockingQueue&lt;&gt;(8); //located in calling method\n\n         ....................................................................................\n\n         do {\n                List&lt;Entity&gt; entityList = entityDatasource.getEntity();\n\n                for (Entity entity: entityList) {\n                    try {\n                        log.debug(&quot;Size before insert opertaion is: &quot; + queue.size());\n                        queue.put(entity);\n                        log.debug(&quot;Size after insert opertaion is: &quot; + queue.size());\n                    } catch (InterruptedException ex) {\n                        ...\n                    }\n                }\n             } while (atomicBool.get());\n\n</code></pre>\n<p>Consumer code:</p>\n<pre><code>        CompletableFuture&lt;Void&gt; queueHandler = CompletableFuture.runAsync(() -&gt; {\n\n            do {\n                try {\n                    log.debug(&quot;Queue size is: &quot; + queue.size());\n                    Entity entity = queue.take();\n                    log.debug(&quot;Queue size is: &quot; + queue.size());\n                    storeInDb(entity);\n\n                } catch (InterruptedException ex) {\n                  ...\n                }\n            } while (atomicBool.get());\n\n        }, asyncPoolQueueHandler); //ThreadPoolTaskExecutor\n\n        List&lt;CompletableFuture&lt;Void&gt;&gt; pool = new ArrayList&lt;&gt;();\n        IntStream.range(0, 1).forEach(i -&gt; {\n            pool.add(queueHandler);\n        });\n        CompletableFuture.allOf(pool.toArray(CompletableFuture[]::new));\n</code></pre>\n<p>DB store:</p>\n<pre><code>CompletableFuture\n                .supplyAsync(() -&gt; {\n\n                    return entityRep.save(entity);\n\n                }, asyncPoolDbPerformer).join(); //ThreadPoolTaskExecutor\n</code></pre>\n<p><a href=\"https://i.stack.imgur.com/ni7s6.png\" rel=\"nofollow noreferrer\">VisualVM screenshot</a></p>\n<p>I was wached VisualVM, but there is nothing unexpected to me: when producer stuck then other parts of pipeline are motionless. I would be grateful for advice on what I could do with my issue</p>\n"},{"tags":["java","hibernate","jpa"],"comments":[{"owner":{"account_id":2094057,"reputation":506144,"user_id":1863229,"accept_rate":58,"display_name":"Tim Biegeleisen"},"score":0,"creation_date":1672935249,"post_id":75021303,"comment_id":132389645,"body_markdown":"`his value appears 00x` ... where are you making this observation?","body":"<code>his value appears 00x</code> ... where are you making this observation?"},{"owner":{"account_id":25325787,"reputation":1,"user_id":19146469,"display_name":"Cesar Soares Costa FIlho"},"score":0,"creation_date":1672935445,"post_id":75021303,"comment_id":132389724,"body_markdown":"yes, in database!","body":"yes, in database!"},{"owner":{"account_id":25325787,"reputation":1,"user_id":19146469,"display_name":"Cesar Soares Costa FIlho"},"score":0,"creation_date":1672935484,"post_id":75021303,"comment_id":132389751,"body_markdown":"i would like to know why is it appers in database?","body":"i would like to know why is it appers in database?"},{"owner":{"account_id":2094057,"reputation":506144,"user_id":1863229,"accept_rate":58,"display_name":"Tim Biegeleisen"},"score":0,"creation_date":1672935622,"post_id":75021303,"comment_id":132389811,"body_markdown":"Don&#39;t pay much attention to the DB.  If it works within Java, then it is probably OK.","body":"Don&#39;t pay much attention to the DB.  If it works within Java, then it is probably OK."},{"owner":{"account_id":194308,"reputation":66745,"user_id":436560,"accept_rate":87,"display_name":"Lajos Arpad"},"score":0,"creation_date":1672936017,"post_id":75021303,"comment_id":132389972,"body_markdown":"Define &quot;is not working&quot;.","body":"Define &quot;is not working&quot;."},{"owner":{"account_id":25325787,"reputation":1,"user_id":19146469,"display_name":"Cesar Soares Costa FIlho"},"score":0,"creation_date":1672936171,"post_id":75021303,"comment_id":132390044,"body_markdown":"1 or 0 is not appearing in the boolean column in the database but is appearing this value =&gt; 0x00","body":"1 or 0 is not appearing in the boolean column in the database but is appearing this value =&gt; 0x00"},{"owner":{"account_id":25325787,"reputation":1,"user_id":19146469,"display_name":"Cesar Soares Costa FIlho"},"score":0,"creation_date":1672936250,"post_id":75021303,"comment_id":132390068,"body_markdown":"I am sending a boolean value to the database field but this value 0x00 is coming","body":"I am sending a boolean value to the database field but this value 0x00 is coming"},{"owner":{"account_id":25325787,"reputation":1,"user_id":19146469,"display_name":"Cesar Soares Costa FIlho"},"score":0,"creation_date":1672936405,"post_id":75021303,"comment_id":132390133,"body_markdown":"did you understand?","body":"did you understand?"},{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1672937532,"post_id":75021303,"comment_id":132390578,"body_markdown":"Please clarify your specific problem or provide additional details to highlight exactly what you need. As it&#39;s currently written, it&#39;s hard to tell exactly what you&#39;re asking.","body":"Please clarify your specific problem or provide additional details to highlight exactly what you need. As it&#39;s currently written, it&#39;s hard to tell exactly what you&#39;re asking."},{"owner":{"account_id":194308,"reputation":66745,"user_id":436560,"accept_rate":87,"display_name":"Lajos Arpad"},"score":2,"creation_date":1672938372,"post_id":75021303,"comment_id":132390862,"body_markdown":"What is the value stored for true and what is the value stored for false?","body":"What is the value stored for true and what is the value stored for false?"}],"owner":{"account_id":25325787,"reputation":1,"user_id":19146469,"display_name":"Cesar Soares Costa FIlho"},"comment_count":10,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":45,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1672934874,"creation_date":1672934835,"question_id":75021303,"body_markdown":"I have a problem regarding bit data in mysql when I store a boolean value in the base this value appears 00x\r\n\r\n       \r\n    @Type(type = &quot;org.hibernate.type.NumericBooleanType&quot;)\r\n    private boolean inactive;\r\n\r\nI put this in attribute, but is not working! Comes the same problem.","title":"0 or 1 is not appearing in the boolean field in the database","body":"<p>I have a problem regarding bit data in mysql when I store a boolean value in the base this value appears 00x</p>\n<pre><code>@Type(type = &quot;org.hibernate.type.NumericBooleanType&quot;)\nprivate boolean inactive;\n</code></pre>\n<p>I put this in attribute, but is not working! Comes the same problem.</p>\n"},{"tags":["java","spring-boot","spring-data-jpa","crud-repository"],"comments":[{"owner":{"account_id":3192259,"reputation":117619,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1672926866,"post_id":75019422,"comment_id":132386309,"body_markdown":"Your save returns a `List&lt;Cart&gt;` how do you expect that to work? Also you are passing 2 values to your other query but are only using 1. You also don&#39;t explain what errors you get, should we guess?","body":"Your save returns a <code>List&lt;Cart&gt;</code> how do you expect that to work? Also you are passing 2 values to your other query but are only using 1. You also don&#39;t explain what errors you get, should we guess?"},{"owner":{"account_id":20552896,"reputation":1,"user_id":15085193,"display_name":"Ovidiu"},"score":0,"creation_date":1672927420,"post_id":75019422,"comment_id":132386532,"body_markdown":"I added the errors, for second parameters i removed one, for example query what type return to save him as what?","body":"I added the errors, for second parameters i removed one, for example query what type return to save him as what?"},{"owner":{"account_id":3192259,"reputation":117619,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1672929713,"post_id":75019422,"comment_id":132387413,"body_markdown":"The `save` needs an `@Modifying` but I wonder why all the hassle if you are using JPA in the first place, feels like you are trying very hard to work around the fact that you are using JPA.","body":"The <code>save</code> needs an <code>@Modifying</code> but I wonder why all the hassle if you are using JPA in the first place, feels like you are trying very hard to work around the fact that you are using JPA."},{"owner":{"account_id":9735171,"reputation":2264,"user_id":7218656,"accept_rate":75,"display_name":"Arun Sudhakaran"},"score":0,"creation_date":1672934470,"post_id":75019422,"comment_id":132389352,"body_markdown":"I&#39;m wondering why this line `cartRepository.save(saveId,userRepository.AiciVoiAveaId(nume));` won&#39;t give NullPointerException.","body":"I&#39;m wondering why this line <code>cartRepository.save(saveId,userRepository.AiciVoiAveaId(nume&zwnj;&#8203;));</code> won&#39;t give NullPointerException."}],"answers":[{"comments":[{"owner":{"account_id":20552896,"reputation":1,"user_id":15085193,"display_name":"Ovidiu"},"score":0,"creation_date":1672946743,"post_id":75019644,"comment_id":132393500,"body_markdown":"I hate spring boot, I tried but it didn&#39;t work, could you help me in the chat?","body":"I hate spring boot, I tried but it didn&#39;t work, could you help me in the chat?"}],"tags":[],"owner":{"account_id":16161082,"reputation":113,"user_id":11667138,"display_name":"Kashan Nadeem"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1672927418,"creation_date":1672927418,"answer_id":75019644,"question_id":75019422,"body_markdown":"Salut,\r\n\r\nYou can try with JpaRepository:\r\n```\r\n@Repository\r\npublic interface CartRepository extends JpaRepository&lt;Cart, Long&gt; {\r\n\r\n    @Query(&quot;FROM Cart WHERE user.id = :userID&quot;)\r\n    List&lt;Cart&gt; findAllByUserId(Long userID);\r\n}\r\n```\r\n```\r\n@Getter\r\n@Setter\r\n@NoArgsConstructor\r\n@AllArgsConstructor\r\n@Entity\r\n@Table(name = &quot;cart&quot;)\r\npublic class Cart {\r\n\r\n    @Id\r\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\r\n    @Column(name = &quot;id&quot;, nullable = false)\r\n    private Long id;\r\n\r\n    @ManyToOne(fetch = FetchType.LAZY)\r\n    @JoinColumn(name = &quot;id_user&quot;, nullable = false)\r\n    private User user;\r\n\r\n}\r\n```\r\nAnd then you can use the repository like so:\r\n```\r\nCart cartToBeSaved = new Cart(userId);\r\ncartRepository.save(cartToBeSaved); //cart id is auto-generated\r\n```\r\nAlso, I would avoid declaring a global `Long saveId;`. It has no useful purpose and can lead to more serious issues when multiple users are accessing these endpoints.\r\n\r\nI would also move some logic in a service class and I would encapsulate the repositories.\r\n\r\nFor example:\r\n```\r\n@Controller\r\n@RequiredArgsConstructor\r\npublic class CartController {\r\n\r\n    private final CartService cartService;\r\n\r\n    @GetMapping(&quot;/shoppingCart&quot;)\r\n    public String showCart(Model model, Principal principal) {\r\n        Product product = cartService.saveProduct(...);\r\n        model.addAttribute(&quot;product&quot;, product.get());\r\n        return &quot;shoppingCart&quot;;\r\n    }\r\n\r\n\r\n    @PostMapping(&quot;/shoppingCart/{id}&quot;)\r\n    public String shoppingCart(@PathVariable Long id){\r\n        //something here\r\n    }\r\n\r\n}\r\n```\r\n```\r\n@Service\r\n@RequiredArgsConstructor\r\npublic class CartService {\r\n\r\n    private final ProductRepository productRepository;\r\n    private final UserRepository userRepository;\r\n    private final CartRepository cartRepository;\r\n\r\n    public Product saveProduct(...) {\r\n        //some business logic here\r\n    }\r\n}\r\n```","title":"I get an error when I make my own spring boot query","body":"<p>Salut,</p>\n<p>You can try with JpaRepository:</p>\n<pre><code>@Repository\npublic interface CartRepository extends JpaRepository&lt;Cart, Long&gt; {\n\n    @Query(&quot;FROM Cart WHERE user.id = :userID&quot;)\n    List&lt;Cart&gt; findAllByUserId(Long userID);\n}\n</code></pre>\n<pre><code>@Getter\n@Setter\n@NoArgsConstructor\n@AllArgsConstructor\n@Entity\n@Table(name = &quot;cart&quot;)\npublic class Cart {\n\n    @Id\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\n    @Column(name = &quot;id&quot;, nullable = false)\n    private Long id;\n\n    @ManyToOne(fetch = FetchType.LAZY)\n    @JoinColumn(name = &quot;id_user&quot;, nullable = false)\n    private User user;\n\n}\n</code></pre>\n<p>And then you can use the repository like so:</p>\n<pre><code>Cart cartToBeSaved = new Cart(userId);\ncartRepository.save(cartToBeSaved); //cart id is auto-generated\n</code></pre>\n<p>Also, I would avoid declaring a global <code>Long saveId;</code>. It has no useful purpose and can lead to more serious issues when multiple users are accessing these endpoints.</p>\n<p>I would also move some logic in a service class and I would encapsulate the repositories.</p>\n<p>For example:</p>\n<pre><code>@Controller\n@RequiredArgsConstructor\npublic class CartController {\n\n    private final CartService cartService;\n\n    @GetMapping(&quot;/shoppingCart&quot;)\n    public String showCart(Model model, Principal principal) {\n        Product product = cartService.saveProduct(...);\n        model.addAttribute(&quot;product&quot;, product.get());\n        return &quot;shoppingCart&quot;;\n    }\n\n\n    @PostMapping(&quot;/shoppingCart/{id}&quot;)\n    public String shoppingCart(@PathVariable Long id){\n        //something here\n    }\n\n}\n</code></pre>\n<pre><code>@Service\n@RequiredArgsConstructor\npublic class CartService {\n\n    private final ProductRepository productRepository;\n    private final UserRepository userRepository;\n    private final CartRepository cartRepository;\n\n    public Product saveProduct(...) {\n        //some business logic here\n    }\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":20552896,"reputation":1,"user_id":15085193,"display_name":"Ovidiu"},"score":0,"creation_date":1672929050,"post_id":75019648,"comment_id":132387172,"body_markdown":"I modified as you said but I get the same errors","body":"I modified as you said but I get the same errors"},{"owner":{"account_id":14320275,"reputation":1315,"user_id":10343888,"display_name":"fatih"},"score":0,"creation_date":1672934070,"post_id":75019648,"comment_id":132389186,"body_markdown":"Change the `List&lt;Cart&gt;` expression to `Cart`.","body":"Change the <code>List&lt;Cart&gt;</code> expression to <code>Cart</code>."}],"tags":[],"owner":{"account_id":14320275,"reputation":1315,"user_id":10343888,"display_name":"fatih"},"comment_count":2,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1672934016,"creation_date":1672927429,"answer_id":75019648,"question_id":75019422,"body_markdown":"Your `save()` method contains a faulty sql command. The `INSERT` command for SQL does not work this way. I don&#39;t know exactly the qualities of your `Cart` object, but it needs to look like the following way.\r\n\r\n     @Modifying\r\n     @Query(name = &quot;INSERT INTO cart (productId, userId) VALUES (:productID,:userID)&quot;,nativeQuery = true)\r\n     Cart save(@Param(&quot;productID&quot;) Long productId, @Param(&quot;userID&quot;) Long userID);\r\n\r\nA SQL `INSERT` command must contain the column names of the corresponding table.\r\n\r\nI also recommend using `@Modifying` annotation for commands such as `INSERT`, `UPDATE`, `DELETE`. You can find detailed information about `@Modifying` anatotion [here][1].\r\n\r\n\r\n  [1]: https://www.baeldung.com/spring-data-jpa-modifying-annotation","title":"I get an error when I make my own spring boot query","body":"<p>Your <code>save()</code> method contains a faulty sql command. The <code>INSERT</code> command for SQL does not work this way. I don't know exactly the qualities of your <code>Cart</code> object, but it needs to look like the following way.</p>\n<pre><code> @Modifying\n @Query(name = &quot;INSERT INTO cart (productId, userId) VALUES (:productID,:userID)&quot;,nativeQuery = true)\n Cart save(@Param(&quot;productID&quot;) Long productId, @Param(&quot;userID&quot;) Long userID);\n</code></pre>\n<p>A SQL <code>INSERT</code> command must contain the column names of the corresponding table.</p>\n<p>I also recommend using <code>@Modifying</code> annotation for commands such as <code>INSERT</code>, <code>UPDATE</code>, <code>DELETE</code>. You can find detailed information about <code>@Modifying</code> anatotion <a href=\"https://www.baeldung.com/spring-data-jpa-modifying-annotation\" rel=\"nofollow noreferrer\">here</a>.</p>\n"}],"owner":{"account_id":20552896,"reputation":1,"user_id":15085193,"display_name":"Ovidiu"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":132,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1672934758,"creation_date":1672926488,"question_id":75019422,"body_markdown":"My problem is when I try to make a customized query, I want to use `crud` or `jpa` repositories for my repository to make custom methods to do the following operations on the database, but I can&#39;t succeed in any way...\r\n\r\n\r\n**CartRepository**\r\n\r\n```\r\npackage com.example.registrationlogindemo.repository;\r\n\r\nimport com.example.registrationlogindemo.model.Cart;\r\nimport org.springframework.data.jpa.repository.Query;\r\nimport org.springframework.data.repository.CrudRepository;\r\nimport org.springframework.data.repository.query.Param;\r\nimport org.springframework.stereotype.Repository;\r\n\r\nimport java.util.List;\r\npublic interface CartRepository extends CrudRepository&lt;Cart,Long&gt; {\r\n\r\n    @Query(name = &quot;INSERT INTO cart VALUES (:productID,:userID)&quot;,nativeQuery = true)\r\n    List&lt;Cart&gt; save(@Param(&quot;productID&quot;) Long productId, @Param(&quot;userID&quot;) Long userID);\r\n\r\n    @Query(name = &quot;SELECT * FROM cart WHERE user_id = ?2&quot;,nativeQuery = true)\r\n    List&lt;Cart&gt;showAll(Long productID, Long userID);\r\n}\r\n\r\n```\r\n\r\n\r\n**Cart**\r\n\r\n```\r\npackage com.example.registrationlogindemo.model;\r\n\r\nimport jakarta.persistence.*;\r\nimport lombok.*;\r\n\r\n\r\n@Data\r\n@Getter\r\n@Setter\r\n@NoArgsConstructor\r\n@AllArgsConstructor\r\n@Entity\r\n@Table(name = &quot;cart&quot;)\r\npublic class Cart {\r\n    @Id\r\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\r\n    private Long id;\r\n\r\n\r\n}\r\n\r\n```\r\n\r\n**Controller**\r\n\r\n```\r\n@Controller\r\npublic class CartController {\r\n    \r\n    private static SessionFactory factory;\r\n    Long saveId;\r\n    \r\n    @Autowired\r\n    ProductRepository productRepository;\r\n    \r\n    @Autowired\r\n    UserRepository userRepository;\r\n\r\n    CartRepository cartRepository;\r\n\r\n    @GetMapping(&quot;/shoppingCart&quot;)\r\n    @ResponseBody\r\n    public String showCart(Model model, Principal principal){\r\n        String nume = principal.getName();\r\n        cartRepository.save(saveId,userRepository.AiciVoiAveaId(nume));\r\n        Optional&lt;Product&gt; product = productRepository.findById(saveId);\r\n        model.addAttribute(&quot;product&quot;, product.get());\r\n        return &quot;shoppingCart&quot;;\r\n    }\r\n\r\n    @PostMapping(&quot;/shoppingCart/{id}&quot;)\r\n    public String shoppingCart(@PathVariable Long id){\r\n        saveId = id;\r\n        return &quot;redirect:/shoppingCart&quot;;\r\n    }\r\n\r\n}\r\n```\r\nError\r\n```\r\n    2023-01-05T15:39:16.146+02:00  WARN 16652 --- [           main] ConfigServletWebServerApplicationContext : Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.BeanCreationException: Error creating bean with name &#39;cartRepository&#39; defined in com.example.registrationlogindemo.repository.CartRepository defined in @EnableJpaRepositories declared on JpaRepositoriesRegistrar.EnableJpaRepositoriesConfiguration: Could not create query for public abstract java.util.List com.example.registrationlogindemo.repository.CartRepository.save(java.lang.Long,java.lang.Long); Reason: Failed to create query for method public abstract java.util.List com.example.registrationlogindemo.repository.CartRepository.save(java.lang.Long,java.lang.Long); No property &#39;save&#39; found for type &#39;Cart&#39;\r\n\r\norg.springframework.beans.factory.BeanCreationException: Error creating bean with name &#39;cartRepository&#39; defined in com.example.registrationlogindemo.repository.CartRepository defined in @EnableJpaRepositories declared on JpaRepositoriesRegistrar.EnableJpaRepositoriesConfiguration: Could not create query for public abstract java.util.List com.example.registrationlogindemo.repository.CartRepository.save(java.lang.Long,java.lang.Long); Reason: Failed to create query for method public abstract java.util.List com.example.registrationlogindemo.repository.CartRepository.save(java.lang.Long,java.lang.Long); No property &#39;save&#39; found for type &#39;Cart&#39;\r\n```\r\n\r\nCan someone help me?\r\n\r\n\r\nHi, I have a problem too, I try to create a specific query for several actions and I get errors and I don&#39;t understand why...\r\n","title":"I get an error when I make my own spring boot query","body":"<p>My problem is when I try to make a customized query, I want to use <code>crud</code> or <code>jpa</code> repositories for my repository to make custom methods to do the following operations on the database, but I can't succeed in any way...</p>\n<p><strong>CartRepository</strong></p>\n<pre><code>package com.example.registrationlogindemo.repository;\n\nimport com.example.registrationlogindemo.model.Cart;\nimport org.springframework.data.jpa.repository.Query;\nimport org.springframework.data.repository.CrudRepository;\nimport org.springframework.data.repository.query.Param;\nimport org.springframework.stereotype.Repository;\n\nimport java.util.List;\npublic interface CartRepository extends CrudRepository&lt;Cart,Long&gt; {\n\n    @Query(name = &quot;INSERT INTO cart VALUES (:productID,:userID)&quot;,nativeQuery = true)\n    List&lt;Cart&gt; save(@Param(&quot;productID&quot;) Long productId, @Param(&quot;userID&quot;) Long userID);\n\n    @Query(name = &quot;SELECT * FROM cart WHERE user_id = ?2&quot;,nativeQuery = true)\n    List&lt;Cart&gt;showAll(Long productID, Long userID);\n}\n\n</code></pre>\n<p><strong>Cart</strong></p>\n<pre><code>package com.example.registrationlogindemo.model;\n\nimport jakarta.persistence.*;\nimport lombok.*;\n\n\n@Data\n@Getter\n@Setter\n@NoArgsConstructor\n@AllArgsConstructor\n@Entity\n@Table(name = &quot;cart&quot;)\npublic class Cart {\n    @Id\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\n    private Long id;\n\n\n}\n\n</code></pre>\n<p><strong>Controller</strong></p>\n<pre><code>@Controller\npublic class CartController {\n    \n    private static SessionFactory factory;\n    Long saveId;\n    \n    @Autowired\n    ProductRepository productRepository;\n    \n    @Autowired\n    UserRepository userRepository;\n\n    CartRepository cartRepository;\n\n    @GetMapping(&quot;/shoppingCart&quot;)\n    @ResponseBody\n    public String showCart(Model model, Principal principal){\n        String nume = principal.getName();\n        cartRepository.save(saveId,userRepository.AiciVoiAveaId(nume));\n        Optional&lt;Product&gt; product = productRepository.findById(saveId);\n        model.addAttribute(&quot;product&quot;, product.get());\n        return &quot;shoppingCart&quot;;\n    }\n\n    @PostMapping(&quot;/shoppingCart/{id}&quot;)\n    public String shoppingCart(@PathVariable Long id){\n        saveId = id;\n        return &quot;redirect:/shoppingCart&quot;;\n    }\n\n}\n</code></pre>\n<p>Error</p>\n<pre><code>    2023-01-05T15:39:16.146+02:00  WARN 16652 --- [           main] ConfigServletWebServerApplicationContext : Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'cartRepository' defined in com.example.registrationlogindemo.repository.CartRepository defined in @EnableJpaRepositories declared on JpaRepositoriesRegistrar.EnableJpaRepositoriesConfiguration: Could not create query for public abstract java.util.List com.example.registrationlogindemo.repository.CartRepository.save(java.lang.Long,java.lang.Long); Reason: Failed to create query for method public abstract java.util.List com.example.registrationlogindemo.repository.CartRepository.save(java.lang.Long,java.lang.Long); No property 'save' found for type 'Cart'\n\norg.springframework.beans.factory.BeanCreationException: Error creating bean with name 'cartRepository' defined in com.example.registrationlogindemo.repository.CartRepository defined in @EnableJpaRepositories declared on JpaRepositoriesRegistrar.EnableJpaRepositoriesConfiguration: Could not create query for public abstract java.util.List com.example.registrationlogindemo.repository.CartRepository.save(java.lang.Long,java.lang.Long); Reason: Failed to create query for method public abstract java.util.List com.example.registrationlogindemo.repository.CartRepository.save(java.lang.Long,java.lang.Long); No property 'save' found for type 'Cart'\n</code></pre>\n<p>Can someone help me?</p>\n<p>Hi, I have a problem too, I try to create a specific query for several actions and I get errors and I don't understand why...</p>\n"},{"tags":["java","arrays","algorithm"],"comments":[{"owner":{"account_id":10108456,"reputation":3914,"user_id":7470253,"display_name":"M. Prokhorov"},"score":1,"creation_date":1488815170,"post_id":42629583,"comment_id":72387505,"body_markdown":"&quot;Lower&quot; is the lowest large sum you can get from that array, which is the maximum array element since you can&#39;t get large sum lower than this whatever you do. &quot;Upper&quot; is what you get if you just sum all elements and leave all other blocks empty. This is the maximum large sum you can get from that array, and this is what you will try to minimize in your algorithm.","body":"&quot;Lower&quot; is the lowest large sum you can get from that array, which is the maximum array element since you can&#39;t get large sum lower than this whatever you do. &quot;Upper&quot; is what you get if you just sum all elements and leave all other blocks empty. This is the maximum large sum you can get from that array, and this is what you will try to minimize in your algorithm."},{"owner":{"account_id":9748305,"reputation":3131,"user_id":7227475,"accept_rate":68,"display_name":"doublemc"},"score":0,"creation_date":1488815625,"post_id":42629583,"comment_id":72387814,"body_markdown":"Oh, I get it now. What about blocks? Could you explain them as well? Like what&#39;s the logic behind int blocks and method that calculates it?","body":"Oh, I get it now. What about blocks? Could you explain them as well? Like what&#39;s the logic behind int blocks and method that calculates it?"},{"owner":{"account_id":10108456,"reputation":3914,"user_id":7470253,"display_name":"M. Prokhorov"},"score":0,"creation_date":1488817568,"post_id":42629583,"comment_id":72389168,"body_markdown":"Umm.. first you take target sum, some &quot;pretty good value&quot;, as a start, which in your case is `(lower + upper)/2`, and try to see if you are able to collect `K` subarrays where each array would have the sum at or lower your target. If you succeed, you try the same with lower target, if not - you try with higher target.","body":"Umm.. first you take target sum, some &quot;pretty good value&quot;, as a start, which in your case is <code>(lower + upper)&#47;2</code>, and try to see if you are able to collect <code>K</code> subarrays where each array would have the sum at or lower your target. If you succeed, you try the same with lower target, if not - you try with higher target."},{"owner":{"account_id":1888125,"reputation":601,"user_id":1706924,"accept_rate":100,"display_name":"Very Objective"},"score":3,"creation_date":1533804279,"post_id":42629583,"comment_id":90483858,"body_markdown":"@ohwelppp FYI, the solution you posted only passes the *example test* on Codility. It fails all the other tests.","body":"@ohwelppp FYI, the solution you posted only passes the <i>example test</i> on Codility. It fails all the other tests."}],"answers":[{"comments":[{"owner":{"account_id":450751,"reputation":912,"user_id":846244,"display_name":"anhtuannd"},"score":4,"creation_date":1536686223,"post_id":42635035,"comment_id":91510134,"body_markdown":"Mid = 10 calculateBlockCount returns 2 (actually 1 in source code, count must be set to be 1) and Mid = 7 calculateBlockCount returns 3","body":"Mid = 10 calculateBlockCount returns 2 (actually 1 in source code, count must be set to be 1) and Mid = 7 calculateBlockCount returns 3"},{"owner":{"account_id":2155245,"reputation":996,"user_id":1910652,"display_name":"Tomasz Posłuszny"},"score":2,"creation_date":1565806223,"post_id":42635035,"comment_id":101469358,"body_markdown":"Just to point out: this is not learning to code, this is solving mathematical problems with algorithms. Coding is the last and the easiest part.","body":"Just to point out: this is not learning to code, this is solving mathematical problems with algorithms. Coding is the last and the easiest part."}],"tags":[],"owner":{"account_id":9791920,"reputation":620,"user_id":7256243,"display_name":"Gijs Den Hollander"},"comment_count":2,"down_vote_count":0,"up_vote_count":18,"is_accepted":true,"score":18,"last_activity_date":1672934659,"creation_date":1488832461,"answer_id":42635035,"question_id":42629583,"body_markdown":"So what the code does is using a form of binary search (How binary search works is explained quite nicely here, https://www.topcoder.com/community/data-science/data-science-tutorials/binary-search/. It also uses an example quite similar to your problem.). Where you search for the minimum sum every block needs to contain.  In the example case, you need the divide the array in 3 parts\r\n\r\nWhen doing a binary search you need to define 2 boundaries, where you are certain that your answer can be found in between. Here, the lower boundary is the maximum value in the array (`lower`). For the example, this is 5 (this is if you divide your array in 7 blocks). The upper boundary (`upper`) is 15, which is the sum of all the elements in the array (this is if you divide the array in 1 block.) \r\n\r\nNow comes the search part: In `solution()` you start with your bounds and mid point (10 for the example). \r\nIn `calculateBlockCount` you count (`count ++` does that) how many blocks you can make if your sum is a maximum of 10 (your middle point/ or `maxSum` in `calculateBlockCount`).  \r\nFor the example 10 (in the while loop) this is 2 blocks, now the code returns this (`blocks`) to `solution`. Then it checks whether is less or more than `K`, which is the number of blocks you want. If its less than `K` your `mid` point is high because you&#39;re putting to many array elements in your blocks. If it&#39;s more than `K`, than your `mid` point is too high and you&#39;re putting too little array elements in your array.\r\nNow after the checking this, it halves the solution space (`upper = mid-1`). \r\nThis happens every loop, it halves the solution space which makes it converge quite quickly.\r\n  \r\n\r\nNow you keep going through your while adjusting the `mid`, till this gives the amount blocks which was in your input `K`.\r\n\r\nSo to go though it step by step:\r\n\r\n    Mid =10 , calculateBlockCount returns 2 blocks\r\n    solution. 2 blocks &lt; K so upper -&gt; mid-1 =9, mid -&gt; 7  (lower is 5)\r\n    Mid =7 , calculateBlockCount returns 2 blocks  \r\n    solution() 2 blocks &lt; K so upper -&gt; mid-1 =6, mid -&gt; 5 (lower is 5, cast to int makes it 5)\r\n    Mid =5 , calculateBlockCount returns 4 blocks\r\n    solution() 4 blocks &lt; K so lower -&gt; mid+1 =6, mid -&gt; 6  (lower is 6, upper is 6\r\n    Mid =6 , calculateBlockCount returns 3 blocks\r\n    So the function returns mid =6....\r\n\r\nHope this helps,\r\n\r\nGl learning to code :)\r\n\r\nEdit. When using binary search a prerequisite is that the solution space is a monotonic function. This is true in this case as when K increases the sum is strictly decreasing. \r\n\r\n","title":"Need explanation for algorithm searching minimal large sum","body":"<p>So what the code does is using a form of binary search (How binary search works is explained quite nicely here, <a href=\"https://www.topcoder.com/community/data-science/data-science-tutorials/binary-search/\" rel=\"nofollow noreferrer\">https://www.topcoder.com/community/data-science/data-science-tutorials/binary-search/</a>. It also uses an example quite similar to your problem.). Where you search for the minimum sum every block needs to contain.  In the example case, you need the divide the array in 3 parts</p>\n<p>When doing a binary search you need to define 2 boundaries, where you are certain that your answer can be found in between. Here, the lower boundary is the maximum value in the array (<code>lower</code>). For the example, this is 5 (this is if you divide your array in 7 blocks). The upper boundary (<code>upper</code>) is 15, which is the sum of all the elements in the array (this is if you divide the array in 1 block.)</p>\n<p>Now comes the search part: In <code>solution()</code> you start with your bounds and mid point (10 for the example).\nIn <code>calculateBlockCount</code> you count (<code>count ++</code> does that) how many blocks you can make if your sum is a maximum of 10 (your middle point/ or <code>maxSum</code> in <code>calculateBlockCount</code>).<br />\nFor the example 10 (in the while loop) this is 2 blocks, now the code returns this (<code>blocks</code>) to <code>solution</code>. Then it checks whether is less or more than <code>K</code>, which is the number of blocks you want. If its less than <code>K</code> your <code>mid</code> point is high because you're putting to many array elements in your blocks. If it's more than <code>K</code>, than your <code>mid</code> point is too high and you're putting too little array elements in your array.\nNow after the checking this, it halves the solution space (<code>upper = mid-1</code>).\nThis happens every loop, it halves the solution space which makes it converge quite quickly.</p>\n<p>Now you keep going through your while adjusting the <code>mid</code>, till this gives the amount blocks which was in your input <code>K</code>.</p>\n<p>So to go though it step by step:</p>\n<pre><code>Mid =10 , calculateBlockCount returns 2 blocks\nsolution. 2 blocks &lt; K so upper -&gt; mid-1 =9, mid -&gt; 7  (lower is 5)\nMid =7 , calculateBlockCount returns 2 blocks  \nsolution() 2 blocks &lt; K so upper -&gt; mid-1 =6, mid -&gt; 5 (lower is 5, cast to int makes it 5)\nMid =5 , calculateBlockCount returns 4 blocks\nsolution() 4 blocks &lt; K so lower -&gt; mid+1 =6, mid -&gt; 6  (lower is 6, upper is 6\nMid =6 , calculateBlockCount returns 3 blocks\nSo the function returns mid =6....\n</code></pre>\n<p>Hope this helps,</p>\n<p>Gl learning to code :)</p>\n<p>Edit. When using binary search a prerequisite is that the solution space is a monotonic function. This is true in this case as when K increases the sum is strictly decreasing.</p>\n"},{"tags":[],"owner":{"account_id":450751,"reputation":912,"user_id":846244,"display_name":"anhtuannd"},"comment_count":0,"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1536686279,"creation_date":1536686279,"answer_id":52281097,"question_id":42629583,"body_markdown":"Seems like your solution has some problems. I rewrote it as below: \r\n\r\n\r\n    class Solution {\r\n    public int solution(int K, int M, int[] A) {\r\n        // write your code in Java SE 8\r\n        int high = sum(A);\r\n        int low = max(A);\r\n        \r\n        int mid = 0;\r\n        \r\n        int smallestSum = 0;\r\n        \r\n        while (high &gt;= low) {\r\n            mid = (high + low) / 2;\r\n            int numberOfBlock = blockCount(mid, A);\r\n            \r\n            if (numberOfBlock &gt; K) {\r\n                low = mid + 1;\r\n            } else if (numberOfBlock &lt;= K) {\r\n                smallestSum = mid;\r\n                high = mid - 1;\r\n            }\r\n          \r\n        }\r\n        return smallestSum;\r\n    }\r\n    \r\n    public int sum(int[] A) {\r\n        int total = 0;\r\n        for (int i = 0; i &lt; A.length; i++) {\r\n            total += A[i];\r\n        }\r\n        return total;\r\n    }\r\n    \r\n    public int max(int[] A) {\r\n        int max = 0;\r\n        for (int i = 0; i &lt; A.length; i++) {\r\n            if (max &lt; A[i]) max = A[i];\r\n        }\r\n        return max;\r\n    }\r\n    \r\n    public int blockCount(int max, int[] A) {\r\n        int current = 0;\r\n        int count = 1;\r\n        for (int i = 0; i&lt; A.length; i++) {\r\n            if (current + A[i] &gt; max) {\r\n                current = A[i];\r\n                count++;\r\n            } else {\r\n                current += A[i];\r\n            }\r\n        }\r\n        return count;\r\n    }\r\n    }\r\n\r\n","title":"Need explanation for algorithm searching minimal large sum","body":"<p>Seems like your solution has some problems. I rewrote it as below: </p>\n\n<pre><code>class Solution {\npublic int solution(int K, int M, int[] A) {\n    // write your code in Java SE 8\n    int high = sum(A);\n    int low = max(A);\n\n    int mid = 0;\n\n    int smallestSum = 0;\n\n    while (high &gt;= low) {\n        mid = (high + low) / 2;\n        int numberOfBlock = blockCount(mid, A);\n\n        if (numberOfBlock &gt; K) {\n            low = mid + 1;\n        } else if (numberOfBlock &lt;= K) {\n            smallestSum = mid;\n            high = mid - 1;\n        }\n\n    }\n    return smallestSum;\n}\n\npublic int sum(int[] A) {\n    int total = 0;\n    for (int i = 0; i &lt; A.length; i++) {\n        total += A[i];\n    }\n    return total;\n}\n\npublic int max(int[] A) {\n    int max = 0;\n    for (int i = 0; i &lt; A.length; i++) {\n        if (max &lt; A[i]) max = A[i];\n    }\n    return max;\n}\n\npublic int blockCount(int max, int[] A) {\n    int current = 0;\n    int count = 1;\n    for (int i = 0; i&lt; A.length; i++) {\n        if (current + A[i] &gt; max) {\n            current = A[i];\n            count++;\n        } else {\n            current += A[i];\n        }\n    }\n    return count;\n}\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":8916259,"reputation":6950,"user_id":6654730,"accept_rate":81,"display_name":"M3RS"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1539262357,"creation_date":1539262357,"answer_id":52760559,"question_id":42629583,"body_markdown":"This is helped me in case anyone else finds it helpful.\r\n\r\nThink of it as a function: given `k` (the block count) we get some `largeSum`.\r\n\r\nWhat is the inverse of this function? It&#39;s that given `largeSum` we get a `k`. This inverse function is implemented below.\r\n\r\nIn `solution()` we keep plugging guesses for `largeSum` into the inverse function until it returns the `k` given in the exercise. \r\n\r\nTo speed up the guessing process, we use binary search.\r\n\r\n    public class Problem {\r\n        int SLICE_MAX = 100 * 1000 + 1;\r\n        \r\n        public int solution(int blockCount, int maxElement, int[] array) {\r\n            // maxGuess is determined by looking at what the max possible largeSum could be\r\n            // this happens if all elements are m and the blockCount is 1\r\n            // Math.max is necessary, because blockCount can exceed array.length, \r\n            // but this shouldn&#39;t lower maxGuess\r\n            int maxGuess = (Math.max(array.length / blockCount, array.length)) * maxElement;\r\n            int minGuess = 0;\r\n            return helper(blockCount, array, minGuess, maxGuess);\r\n        }\r\n        \r\n        private int helper(int targetBlockCount, int[] array, int minGuess, int maxGuess) {\r\n            int guess = minGuess + (maxGuess - minGuess) / 2;\r\n            int resultBlockCount = inverseFunction(array, guess);\r\n            // if resultBlockCount == targetBlockCount this is not necessarily the solution\r\n            // as there might be a lower largeSum, which also satisfies resultBlockCount == targetBlockCount\r\n            if (resultBlockCount &lt;= targetBlockCount) {\r\n                if (minGuess == guess) return guess;\r\n                // even if resultBlockCount == targetBlockCount\r\n                // we keep searching for potential lower largeSum that also satisfies resultBlockCount == targetBlockCount\r\n                // note that the search range below includes &#39;guess&#39;, as this might in fact be the lowest possible solution\r\n                // but we need to check in case there&#39;s a lower one\r\n                return helper(targetBlockCount, array, minGuess, guess);\r\n            } else {\r\n                return helper(targetBlockCount, array, guess + 1, maxGuess);\r\n            }\r\n        }\r\n        \r\n        // think of it as a function: given k (blockCount) we get some largeSum\r\n        // the inverse of the above function is that given largeSum we get a k\r\n        // in solution() we will keep guessing largeSum using binary search until \r\n        // we hit k given in the exercise\r\n        int inverseFunction(int[] array, int largeSumGuess) {\r\n            int runningSum = 0;\r\n            int blockCount = 1;\r\n            for (int i = 0; i &lt; array.length; i++) {\r\n                int current = array[i];\r\n                if (current &gt; largeSumGuess) return SLICE_MAX;\r\n                if (runningSum + current &lt;= largeSumGuess) {\r\n                    runningSum += current;\r\n                } else {\r\n                    runningSum = current;\r\n                    blockCount++;\r\n                }\r\n            }\r\n            return blockCount;\r\n        }\r\n    }\r\n\r\n","title":"Need explanation for algorithm searching minimal large sum","body":"<p>This is helped me in case anyone else finds it helpful.</p>\n\n<p>Think of it as a function: given <code>k</code> (the block count) we get some <code>largeSum</code>.</p>\n\n<p>What is the inverse of this function? It's that given <code>largeSum</code> we get a <code>k</code>. This inverse function is implemented below.</p>\n\n<p>In <code>solution()</code> we keep plugging guesses for <code>largeSum</code> into the inverse function until it returns the <code>k</code> given in the exercise. </p>\n\n<p>To speed up the guessing process, we use binary search.</p>\n\n<pre><code>public class Problem {\n    int SLICE_MAX = 100 * 1000 + 1;\n\n    public int solution(int blockCount, int maxElement, int[] array) {\n        // maxGuess is determined by looking at what the max possible largeSum could be\n        // this happens if all elements are m and the blockCount is 1\n        // Math.max is necessary, because blockCount can exceed array.length, \n        // but this shouldn't lower maxGuess\n        int maxGuess = (Math.max(array.length / blockCount, array.length)) * maxElement;\n        int minGuess = 0;\n        return helper(blockCount, array, minGuess, maxGuess);\n    }\n\n    private int helper(int targetBlockCount, int[] array, int minGuess, int maxGuess) {\n        int guess = minGuess + (maxGuess - minGuess) / 2;\n        int resultBlockCount = inverseFunction(array, guess);\n        // if resultBlockCount == targetBlockCount this is not necessarily the solution\n        // as there might be a lower largeSum, which also satisfies resultBlockCount == targetBlockCount\n        if (resultBlockCount &lt;= targetBlockCount) {\n            if (minGuess == guess) return guess;\n            // even if resultBlockCount == targetBlockCount\n            // we keep searching for potential lower largeSum that also satisfies resultBlockCount == targetBlockCount\n            // note that the search range below includes 'guess', as this might in fact be the lowest possible solution\n            // but we need to check in case there's a lower one\n            return helper(targetBlockCount, array, minGuess, guess);\n        } else {\n            return helper(targetBlockCount, array, guess + 1, maxGuess);\n        }\n    }\n\n    // think of it as a function: given k (blockCount) we get some largeSum\n    // the inverse of the above function is that given largeSum we get a k\n    // in solution() we will keep guessing largeSum using binary search until \n    // we hit k given in the exercise\n    int inverseFunction(int[] array, int largeSumGuess) {\n        int runningSum = 0;\n        int blockCount = 1;\n        for (int i = 0; i &lt; array.length; i++) {\n            int current = array[i];\n            if (current &gt; largeSumGuess) return SLICE_MAX;\n            if (runningSum + current &lt;= largeSumGuess) {\n                runningSum += current;\n            } else {\n                runningSum = current;\n                blockCount++;\n            }\n        }\n        return blockCount;\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":10513148,"reputation":53,"user_id":7748148,"display_name":"Guillermo Abbona"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1594817712,"creation_date":1594817712,"answer_id":62915381,"question_id":42629583,"body_markdown":"From anhtuannd&#39;s code, I refactored using Java 8. It is slightly slower. Thanks anhtuannd.\r\n\r\n    IntSummaryStatistics summary = Arrays.stream(A).summaryStatistics();\r\n        long high = summary.getSum();\r\n        long low = summary.getMax();\r\n\r\n        long result = 0;\r\n        while (high &gt;= low) {\r\n            long mid = (high + low) / 2;\r\n            AtomicLong blocks = new AtomicLong(1);\r\n            Arrays.stream(A).reduce(0, (acc, val) -&gt; {\r\n                if (acc + val &gt; mid) {\r\n                    blocks.incrementAndGet();\r\n                    return val;\r\n                } else {\r\n                    return acc + val;\r\n                }\r\n            });\r\n            if (blocks.get() &gt; K) {\r\n                low = mid + 1;\r\n            } else if (blocks.get() &lt;= K) {\r\n                result = mid;\r\n                high = mid - 1;\r\n            }\r\n        }\r\n        return (int) result;","title":"Need explanation for algorithm searching minimal large sum","body":"<p>From anhtuannd's code, I refactored using Java 8. It is slightly slower. Thanks anhtuannd.</p>\n<pre><code>IntSummaryStatistics summary = Arrays.stream(A).summaryStatistics();\n    long high = summary.getSum();\n    long low = summary.getMax();\n\n    long result = 0;\n    while (high &gt;= low) {\n        long mid = (high + low) / 2;\n        AtomicLong blocks = new AtomicLong(1);\n        Arrays.stream(A).reduce(0, (acc, val) -&gt; {\n            if (acc + val &gt; mid) {\n                blocks.incrementAndGet();\n                return val;\n            } else {\n                return acc + val;\n            }\n        });\n        if (blocks.get() &gt; K) {\n            low = mid + 1;\n        } else if (blocks.get() &lt;= K) {\n            result = mid;\n            high = mid - 1;\n        }\n    }\n    return (int) result;\n</code></pre>\n"},{"comments":[{"owner":{"account_id":8659454,"reputation":361,"user_id":6482466,"display_name":"L&#234; văn Huy"},"score":0,"creation_date":1654529977,"post_id":64613992,"comment_id":128106648,"body_markdown":"Converted your solution in Java: https://app.codility.com/demo/results/trainingP8A7MV-AV9/. Your explanation is very helpful","body":"Converted your solution in Java: <a href=\"https://app.codility.com/demo/results/trainingP8A7MV-AV9/\" rel=\"nofollow noreferrer\">app.codility.com/demo/results/trainingP8A7MV-AV9</a>. Your explanation is very helpful"}],"tags":[],"owner":{"account_id":360126,"reputation":815,"user_id":701945,"accept_rate":88,"display_name":"nialloc"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1654629124,"creation_date":1604082844,"answer_id":64613992,"question_id":42629583,"body_markdown":"I wrote a 100% solution in python [here][1].  The result is [here][2].\r\n\r\nRemember:  You are searching the set of possible answers not the array A\r\n\r\nIn the example given they are searching for possible answers. Consider [5] as 5 being the smallest max value for a block. And consider [2, 1, 5, 1, 2, 2, 2] 15 as the largest max value for a block.  \r\n\r\nMid = (5 + 15) // 2. Slicing out blocks of 10 at a time won&#39;t create more than 3 blocks in total.\r\n\r\nMake 10-1 the upper and try again (5+9)//2 is 7. Slicing out blocks of 7 at a time won&#39;t create more than 3 blocks in total.\r\n\r\nMake 7-1 the upper and try again (5+6)//2 is 5. Slicing out blocks of 5 at a time will create more than 3 blocks in total.\r\n\r\nMake 5+1 the lower and try again (6+6)//2 is 6. Slicing out blocks of 6 at a time won&#39;t create more than 3 blocks in total.\r\n\r\nTherefore 6 is the lowest limit to impose on the sum of a block that will permit breaking into 3 blocks.\r\n\r\n\r\n\r\n\r\n  [1]: https://github.com/niall-oc/things/blob/master/codility/min_max_division.py\r\n  [2]: https://app.codility.com/demo/results/training4F2MPW-UPD/","title":"Need explanation for algorithm searching minimal large sum","body":"<p>I wrote a 100% solution in python <a href=\"https://github.com/niall-oc/things/blob/master/codility/min_max_division.py\" rel=\"nofollow noreferrer\">here</a>.  The result is <a href=\"https://app.codility.com/demo/results/training4F2MPW-UPD/\" rel=\"nofollow noreferrer\">here</a>.</p>\n<p>Remember:  You are searching the set of possible answers not the array A</p>\n<p>In the example given they are searching for possible answers. Consider [5] as 5 being the smallest max value for a block. And consider [2, 1, 5, 1, 2, 2, 2] 15 as the largest max value for a block.</p>\n<p>Mid = (5 + 15) // 2. Slicing out blocks of 10 at a time won't create more than 3 blocks in total.</p>\n<p>Make 10-1 the upper and try again (5+9)//2 is 7. Slicing out blocks of 7 at a time won't create more than 3 blocks in total.</p>\n<p>Make 7-1 the upper and try again (5+6)//2 is 5. Slicing out blocks of 5 at a time will create more than 3 blocks in total.</p>\n<p>Make 5+1 the lower and try again (6+6)//2 is 6. Slicing out blocks of 6 at a time won't create more than 3 blocks in total.</p>\n<p>Therefore 6 is the lowest limit to impose on the sum of a block that will permit breaking into 3 blocks.</p>\n"}],"owner":{"account_id":9748305,"reputation":3131,"user_id":7227475,"accept_rate":68,"display_name":"doublemc"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":8080,"favorite_count":0,"down_vote_count":1,"up_vote_count":9,"accepted_answer_id":42635035,"answer_count":5,"score":8,"last_activity_date":1672934659,"creation_date":1488814491,"question_id":42629583,"body_markdown":"I&#39;m solving Codility questions as practice and couldn&#39;t answer one of the questions.  I found the answer on the Internet but I don&#39;t get how this algorithm works. Could someone walk me through it step-by-step? \r\nHere is the question:\r\n\r\n   \r\n\r\n     /*\r\n      You are given integers K, M and a non-empty zero-indexed array A consisting of N integers.\r\n      Every element of the array is not greater than M.\r\n    \tYou should divide this array into K blocks of consecutive elements.\r\n    \tThe size of the block is any integer between 0 and N. Every element of the array should belong to some block.\r\n    \tThe sum of the block from X to Y equals A[X] + A[X + 1] + ... + A[Y]. The sum of empty block equals 0.\r\n    \tThe large sum is the maximal sum of any block.\r\n    \tFor example, you are given integers K = 3, M = 5 and array A such that:\r\n    \t  A[0] = 2\r\n    \t  A[1] = 1\r\n    \t  A[2] = 5\r\n    \t  A[3] = 1\r\n    \t  A[4] = 2\r\n    \t  A[5] = 2\r\n    \t  A[6] = 2\r\n    \tThe array can be divided, for example, into the following blocks:\r\n    \t[2, 1, 5, 1, 2, 2, 2], [], [] with a large sum of 15;\r\n    \t[2], [1, 5, 1, 2], [2, 2] with a large sum of 9;\r\n    \t[2, 1, 5], [], [1, 2, 2, 2] with a large sum of 8;\r\n    \t[2, 1], [5, 1], [2, 2, 2] with a large sum of 6.\r\n    \tThe goal is to minimize the large sum. In the above example, 6 is the minimal large sum.\r\n    \tWrite a function:\r\n    \tclass Solution { public int solution(int K, int M, int[] A); }\r\n    \tthat, given integers K, M and a non-empty zero-indexed array A consisting of N integers, returns the minimal large sum.\r\n    \tFor example, given K = 3, M = 5 and array A such that:\r\n    \t  A[0] = 2\r\n    \t  A[1] = 1\r\n    \t  A[2] = 5\r\n    \t  A[3] = 1\r\n    \t  A[4] = 2\r\n    \t  A[5] = 2\r\n    \t  A[6] = 2\r\n    \tthe function should return 6, as explained above. Assume that:\r\n    \tN and K are integers within the range [1..100,000];\r\n    \tM is an integer within the range [0..10,000];\r\n    \teach element of array A is an integer within the range [0..M].\r\n    \tComplexity:\r\n    \texpected worst-case time complexity is O(N*log(N+M));\r\n    \texpected worst-case space complexity is O(1), beyond input storage (not counting the storage required for input arguments).\r\n    \tElements of input arrays can be modified.\r\n     */\r\n\r\nAnd here is the solution I found with my comments about parts which I don&#39;t understand:\r\n\r\n          public static int solution(int K, int M, int[] A) {\r\n        int lower = max(A);  // why lower is max?\r\n        int upper = sum(A);  // why upper is sum?\r\n        while (true) {\r\n          int mid = (lower + upper) / 2;\r\n          int blocks = calculateBlockCount(A, mid); // don&#39;t I have specified number of blocks? What blocks do? Don&#39;t get that.\r\n          if (blocks &lt; K) {\r\n            upper = mid - 1;\r\n          } else if (blocks &gt; K) {\r\n            lower = mid + 1;\r\n          } else {\r\n            return upper;\r\n          }\r\n        }\r\n      }\r\n    \r\n      private static int calculateBlockCount(int[] array, int maxSum) {\r\n        int count = 0;\r\n        int sum = array[0];\r\n        for (int i = 1; i &lt; array.length; i++) {\r\n          if (sum + array[i] &gt; maxSum) {\r\n            count++;\r\n            sum = array[i];\r\n          } else {\r\n            sum += array[i];\r\n          }\r\n        }\r\n        return count;\r\n      }\r\n    \r\n      // returns sum of all elements in an array\r\n      private static int sum(int[] input) {\r\n        int sum = 0;\r\n        for (int n : input) {\r\n          sum += n;\r\n        }\r\n        return sum;\r\n      }\r\n    \r\n      // returns max value in an array\r\n      private static int max(int[] input) {\r\n        int max = -1;\r\n        for (int n : input) {\r\n          if (n &gt; max) {\r\n            max = n;\r\n          }\r\n        }\r\n        return max;\r\n      }\r\n\r\n","title":"Need explanation for algorithm searching minimal large sum","body":"<p>I'm solving Codility questions as practice and couldn't answer one of the questions.  I found the answer on the Internet but I don't get how this algorithm works. Could someone walk me through it step-by-step? \nHere is the question:</p>\n\n<pre><code> /*\n  You are given integers K, M and a non-empty zero-indexed array A consisting of N integers.\n  Every element of the array is not greater than M.\n    You should divide this array into K blocks of consecutive elements.\n    The size of the block is any integer between 0 and N. Every element of the array should belong to some block.\n    The sum of the block from X to Y equals A[X] + A[X + 1] + ... + A[Y]. The sum of empty block equals 0.\n    The large sum is the maximal sum of any block.\n    For example, you are given integers K = 3, M = 5 and array A such that:\n      A[0] = 2\n      A[1] = 1\n      A[2] = 5\n      A[3] = 1\n      A[4] = 2\n      A[5] = 2\n      A[6] = 2\n    The array can be divided, for example, into the following blocks:\n    [2, 1, 5, 1, 2, 2, 2], [], [] with a large sum of 15;\n    [2], [1, 5, 1, 2], [2, 2] with a large sum of 9;\n    [2, 1, 5], [], [1, 2, 2, 2] with a large sum of 8;\n    [2, 1], [5, 1], [2, 2, 2] with a large sum of 6.\n    The goal is to minimize the large sum. In the above example, 6 is the minimal large sum.\n    Write a function:\n    class Solution { public int solution(int K, int M, int[] A); }\n    that, given integers K, M and a non-empty zero-indexed array A consisting of N integers, returns the minimal large sum.\n    For example, given K = 3, M = 5 and array A such that:\n      A[0] = 2\n      A[1] = 1\n      A[2] = 5\n      A[3] = 1\n      A[4] = 2\n      A[5] = 2\n      A[6] = 2\n    the function should return 6, as explained above. Assume that:\n    N and K are integers within the range [1..100,000];\n    M is an integer within the range [0..10,000];\n    each element of array A is an integer within the range [0..M].\n    Complexity:\n    expected worst-case time complexity is O(N*log(N+M));\n    expected worst-case space complexity is O(1), beyond input storage (not counting the storage required for input arguments).\n    Elements of input arrays can be modified.\n */\n</code></pre>\n\n<p>And here is the solution I found with my comments about parts which I don't understand:</p>\n\n<pre><code>      public static int solution(int K, int M, int[] A) {\n    int lower = max(A);  // why lower is max?\n    int upper = sum(A);  // why upper is sum?\n    while (true) {\n      int mid = (lower + upper) / 2;\n      int blocks = calculateBlockCount(A, mid); // don't I have specified number of blocks? What blocks do? Don't get that.\n      if (blocks &lt; K) {\n        upper = mid - 1;\n      } else if (blocks &gt; K) {\n        lower = mid + 1;\n      } else {\n        return upper;\n      }\n    }\n  }\n\n  private static int calculateBlockCount(int[] array, int maxSum) {\n    int count = 0;\n    int sum = array[0];\n    for (int i = 1; i &lt; array.length; i++) {\n      if (sum + array[i] &gt; maxSum) {\n        count++;\n        sum = array[i];\n      } else {\n        sum += array[i];\n      }\n    }\n    return count;\n  }\n\n  // returns sum of all elements in an array\n  private static int sum(int[] input) {\n    int sum = 0;\n    for (int n : input) {\n      sum += n;\n    }\n    return sum;\n  }\n\n  // returns max value in an array\n  private static int max(int[] input) {\n    int max = -1;\n    for (int n : input) {\n      if (n &gt; max) {\n        max = n;\n      }\n    }\n    return max;\n  }\n</code></pre>\n"},{"tags":["java","javafx","javafx-css"],"comments":[{"owner":{"account_id":2518243,"reputation":203472,"user_id":2189127,"display_name":"James_D"},"score":0,"creation_date":1672934142,"post_id":75021120,"comment_id":132389220,"body_markdown":"Are you just looking to add [padding](https://openjfx.io/javadoc/19/javafx.graphics/javafx/scene/layout/Region.html#setPadding(javafx.geometry.Insets))?","body":"Are you just looking to add <a href=\"https://openjfx.io/javadoc/19/javafx.graphics/javafx/scene/layout/Region.html#setPadding(javafx.geometry.Insets)\" rel=\"nofollow noreferrer\">padding</a>?"},{"owner":{"account_id":27443846,"reputation":11,"user_id":20937999,"display_name":"Dokat"},"score":0,"creation_date":1672934382,"post_id":75021120,"comment_id":132389312,"body_markdown":"I want add indents between letters","body":"I want add indents between letters"},{"owner":{"account_id":1180113,"reputation":152335,"user_id":1155209,"display_name":"jewelsea"},"score":2,"creation_date":1672957360,"post_id":75021120,"comment_id":132396519,"body_markdown":"In HTML CSS this is known as [`letter-spacing`](https://developer.mozilla.org/en-US/docs/Web/CSS/letter-spacing).  However, JavaFX will only support HTML CSS for HTML displayed inside a WebView, not on standard JavaFX controls like Labels or TextFields.  It may not even support letter spacing within a WebView (I haven&#39;t tried it).  Letter spacing is related to [Kerning](https://en.wikipedia.org/wiki/Kerning), though a little different.  Custom Kerning is also not supported by the JavaFX font engine.","body":"In HTML CSS this is known as <a href=\"https://developer.mozilla.org/en-US/docs/Web/CSS/letter-spacing\" rel=\"nofollow noreferrer\"><code>letter-spacing</code></a>.  However, JavaFX will only support HTML CSS for HTML displayed inside a WebView, not on standard JavaFX controls like Labels or TextFields.  It may not even support letter spacing within a WebView (I haven&#39;t tried it).  Letter spacing is related to <a href=\"https://en.wikipedia.org/wiki/Kerning\" rel=\"nofollow noreferrer\">Kerning</a>, though a little different.  Custom Kerning is also not supported by the JavaFX font engine."},{"owner":{"account_id":1180113,"reputation":152335,"user_id":1155209,"display_name":"jewelsea"},"score":0,"creation_date":1672957683,"post_id":75021120,"comment_id":132396613,"body_markdown":"Perhaps try to use [a custom font](https://stackoverflow.com/questions/16855677/how-to-embed-ttf-fonts-in-javafx-2-2).  Either you could try to search for a font that defaults to a wide letter spacing, or you may be able to [modify an existing font to adjust its spacing](https://graphicdesign.stackexchange.com/a/10633).  I&#39;ve never done either and further advice on how to do that would be out of scope for what I could answer here.","body":"Perhaps try to use <a href=\"https://stackoverflow.com/questions/16855677/how-to-embed-ttf-fonts-in-javafx-2-2\">a custom font</a>.  Either you could try to search for a font that defaults to a wide letter spacing, or you may be able to <a href=\"https://graphicdesign.stackexchange.com/a/10633\">modify an existing font to adjust its spacing</a>.  I&#39;ve never done either and further advice on how to do that would be out of scope for what I could answer here."}],"answers":[{"comments":[{"owner":{"account_id":27443846,"reputation":11,"user_id":20937999,"display_name":"Dokat"},"score":0,"creation_date":1672936706,"post_id":75021260,"comment_id":132390247,"body_markdown":"How create indents in text in TextInputControl?","body":"How create indents in text in TextInputControl?"},{"owner":{"account_id":2819940,"reputation":12538,"user_id":2423906,"accept_rate":100,"display_name":"SedJ601"},"score":0,"creation_date":1672974523,"post_id":75021260,"comment_id":132399204,"body_markdown":"@Dokat, attempt to find the answer yourself. If you don&#39;t have any luck, try asking a new question.","body":"@Dokat, attempt to find the answer yourself. If you don&#39;t have any luck, try asking a new question."}],"tags":[],"owner":{"account_id":2518243,"reputation":203472,"user_id":2189127,"display_name":"James_D"},"comment_count":2,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1672934647,"creation_date":1672934647,"answer_id":75021260,"question_id":75021120,"body_markdown":"You can do something like the following:\r\n\r\n    final int spacing = 8; // pixels between each letter\r\n    final String buttonText = &quot;Text&quot;; // text to display\r\n    Button button = new Button();\r\n    HBox graphic = new HBox(spacing);\r\n    for (int i=0; i&lt;buttonText.length(); i++) {\r\n        graphic.getChildren().add(new Label(buttonText.substring(i, i+1)));\r\n    }\r\n    button.setGraphic(graphic);","title":"How create Indent for letters in button. JavaFX","body":"<p>You can do something like the following:</p>\n<pre><code>final int spacing = 8; // pixels between each letter\nfinal String buttonText = &quot;Text&quot;; // text to display\nButton button = new Button();\nHBox graphic = new HBox(spacing);\nfor (int i=0; i&lt;buttonText.length(); i++) {\n    graphic.getChildren().add(new Label(buttonText.substring(i, i+1)));\n}\nbutton.setGraphic(graphic);\n</code></pre>\n"}],"owner":{"account_id":27443846,"reputation":11,"user_id":20937999,"display_name":"Dokat"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":81,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"closed_date":1673419729,"accepted_answer_id":75021260,"answer_count":1,"score":0,"last_activity_date":1672934647,"creation_date":1672933988,"question_id":75021120,"body_markdown":"I have standard button and me need create indent for letters in this button, how it do?\r\nSorry behind my English..\r\n\r\nI had tried find in documentation JavaFX CSS the decision but him not or i him no find.\r\nExample how should to look like text in button: T e x t.","title":"How create Indent for letters in button. JavaFX","body":"<p>I have standard button and me need create indent for letters in this button, how it do?\nSorry behind my English..</p>\n<p>I had tried find in documentation JavaFX CSS the decision but him not or i him no find.\nExample how should to look like text in button: T e x t.</p>\n"},{"tags":["java","android"],"answers":[{"comments":[{"owner":{"account_id":16768304,"reputation":8503,"user_id":12121419,"display_name":"blackapps"},"score":0,"creation_date":1672939562,"post_id":75021242,"comment_id":132391286,"body_markdown":"Do not use if () {} else {}. As one has to scroll down to see what happens for the else. Do without the else: `if(result==null) return; // your code here.`","body":"Do not use if () {} else {}. As one has to scroll down to see what happens for the else. Do without the else: <code>if(result==null) return; &#47;&#47; your code here.</code>"}],"tags":[],"owner":{"account_id":20533705,"reputation":1,"user_id":15070336,"display_name":"Armin Grobbelaar"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1672934590,"creation_date":1672934590,"answer_id":75021242,"question_id":75020554,"body_markdown":"I found the solution:\r\n\r\n```\r\nshowRecipeActivity = registerForActivityResult(\r\n                new ActivityResultContracts.GetContent(),\r\n                new ActivityResultCallback&lt;Uri&gt;() {\r\n                    @Override\r\n                    public void onActivityResult(Uri result) {\r\n                        if(result != null) {\r\n                            TextView textView = findViewById(R.id.tViewRecipe);\r\n                            textView.setText(&quot; &quot;);\r\n                            MainActivity.this.Ingredients.clear();\r\n                            MainActivity.this.Measurement.clear();\r\n                            MainActivity.this.Amount.clear();\r\n                            MainActivity.this.Recipe.clear();\r\n                            MainActivity.this.TerminationWords.add(&quot;METHOD&quot;);\r\n                            MainActivity.this.TerminationWords.add(&quot;METODE&quot;);\r\n                            MainActivity.this.TerminationWords.add(&quot;PREPARATION&quot;);\r\n                            MainActivity.this.TerminationWords.add(&quot;VOORBEREIDING&quot;);\r\n                            MainActivity.this.TerminationWords.add(&quot;INSTRUCTIONS&quot;);\r\n                            MainActivity.this.TerminationWords.add(&quot;INSTRUKSIES&quot;);\r\n                            try {\r\n                                //Read recipe here\r\n                            } catch (IOException unused) {\r\n                                Toast.makeText(MainActivity.this, &quot;Failed to load recipe&quot;, Toast.LENGTH_SHORT).show();\r\n                            }\r\n                        }else{\r\n                            Toast.makeText(MainActivity.this, &quot;Recipe not loaded&quot;, Toast.LENGTH_LONG).show();\r\n                        }\r\n                    }\r\n                }\r\n\r\n\r\n        );\r\n```\r\n\r\nAdd:\r\n\r\n```\r\nif(result!= null){\r\n//code here\r\n}else{\r\n  Toast.makeText(MainActivity.this, &quot;Recipe not loaded&quot;, Toast.LENGTH_LONG).show();\r\n}\r\n```","title":"Handle a failed registerForActivityResult","body":"<p>I found the solution:</p>\n<pre><code>showRecipeActivity = registerForActivityResult(\n                new ActivityResultContracts.GetContent(),\n                new ActivityResultCallback&lt;Uri&gt;() {\n                    @Override\n                    public void onActivityResult(Uri result) {\n                        if(result != null) {\n                            TextView textView = findViewById(R.id.tViewRecipe);\n                            textView.setText(&quot; &quot;);\n                            MainActivity.this.Ingredients.clear();\n                            MainActivity.this.Measurement.clear();\n                            MainActivity.this.Amount.clear();\n                            MainActivity.this.Recipe.clear();\n                            MainActivity.this.TerminationWords.add(&quot;METHOD&quot;);\n                            MainActivity.this.TerminationWords.add(&quot;METODE&quot;);\n                            MainActivity.this.TerminationWords.add(&quot;PREPARATION&quot;);\n                            MainActivity.this.TerminationWords.add(&quot;VOORBEREIDING&quot;);\n                            MainActivity.this.TerminationWords.add(&quot;INSTRUCTIONS&quot;);\n                            MainActivity.this.TerminationWords.add(&quot;INSTRUKSIES&quot;);\n                            try {\n                                //Read recipe here\n                            } catch (IOException unused) {\n                                Toast.makeText(MainActivity.this, &quot;Failed to load recipe&quot;, Toast.LENGTH_SHORT).show();\n                            }\n                        }else{\n                            Toast.makeText(MainActivity.this, &quot;Recipe not loaded&quot;, Toast.LENGTH_LONG).show();\n                        }\n                    }\n                }\n\n\n        );\n</code></pre>\n<p>Add:</p>\n<pre><code>if(result!= null){\n//code here\n}else{\n  Toast.makeText(MainActivity.this, &quot;Recipe not loaded&quot;, Toast.LENGTH_LONG).show();\n}\n</code></pre>\n"}],"owner":{"account_id":20533705,"reputation":1,"user_id":15070336,"display_name":"Armin Grobbelaar"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":54,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1672934590,"creation_date":1672931536,"question_id":75020554,"body_markdown":"Good day \r\n\r\nI&#39;m trying to change all my startActivityForResult to registerForActivityResult. When I used startActivityForResult I passed a int to the function to handle &quot;no file selected&quot; \r\n```\r\npublic void onActivityResult(int i, int i2, Intent intent)\r\n```\r\nand used\r\n```\r\nif (i != 1) {Toast.makeText(this, &quot;Recipe not loaded&quot;, Toast.LENGTH_LONG).show();\r\n```\r\nsay when the user presses the back button instead of selecting a file\r\n\r\nIn my new code my app crashes when I do not select a file\r\n\r\nHere is my old function:\r\n\r\n```\r\n /* access modifiers changed from: protected */\r\n    public void onActivityResult(int i, int i2, Intent intent) {\r\n        super.onActivityResult(i, i2, intent);\r\n        TextView textView = (TextView) findViewById(R.id.tViewRecipe);\r\n        textView.setText(&quot; &quot;);\r\n        this.Ingredients.clear();\r\n        this.Measurement.clear();\r\n        this.Amount.clear();\r\n        this.Recipe.clear();\r\n        this.TerminationWords.add(&quot;METHOD&quot;);\r\n        this.TerminationWords.add(&quot;METODE&quot;);\r\n        this.TerminationWords.add(&quot;PREPARATION&quot;);\r\n        this.TerminationWords.add(&quot;VOORBEREIDING&quot;);\r\n        this.TerminationWords.add(&quot;INSTRUCTIONS&quot;);\r\n        this.TerminationWords.add(&quot;INSTRUKSIES&quot;);\r\n        if (i != 1) {\r\n            Toast.makeText(this, &quot;Recipe not loaded&quot;, Toast.LENGTH_LONG).show();\r\n        } else if (i2 == -1) {\r\n            try {\r\n                // read text file here\r\n    }catch (IOException unused) {\r\n                Toast.makeText(this, &quot;Failed to load recipe&quot;, Toast.LENGTH_SHORT).show();\r\n            }\r\n```\r\nAnd here is my new function:\r\n\r\n```\r\nshowRecipeActivity = registerForActivityResult(\r\n                new ActivityResultContracts.GetContent(),\r\n                new ActivityResultCallback&lt;Uri&gt;() {\r\n                    @Override\r\n                    public void onActivityResult(Uri result) {\r\n                        TextView textView = findViewById(R.id.tViewRecipe);\r\n                        textView.setText(&quot; &quot;);\r\n                        MainActivity.this.Ingredients.clear();\r\n                        MainActivity.this.Measurement.clear();\r\n                        MainActivity.this.Amount.clear();\r\n                        MainActivity.this.Recipe.clear();\r\n                        MainActivity.this.TerminationWords.add(&quot;METHOD&quot;);\r\n                        MainActivity.this.TerminationWords.add(&quot;METODE&quot;);\r\n                        MainActivity.this.TerminationWords.add(&quot;PREPARATION&quot;);\r\n                        MainActivity.this.TerminationWords.add(&quot;VOORBEREIDING&quot;);\r\n                        MainActivity.this.TerminationWords.add(&quot;INSTRUCTIONS&quot;);\r\n                        MainActivity.this.TerminationWords.add(&quot;INSTRUKSIES&quot;);\r\n                        try {\r\n                            //Read text file here\r\n                        } catch (IOException unused) {\r\n                            Toast.makeText(MainActivity.this, &quot;Failed to load recipe&quot;, Toast.LENGTH_SHORT).show();\r\n                        }\r\n                    }\r\n                }\r\n\r\n\r\n        );\r\n```\r\n\r\nHow I call the showRecipeActivity:\r\n\r\n```\r\nprivate void showRecipe() {\r\n            showRecipeActivity.launch(&quot;text/*&quot;);\r\n}\r\n```\r\n\r\nI tried to add a try/catch block in the &quot;public void onActivityResult(Uri result)&quot; function, I also tried a try/catch over the showRecipeActivity.launch(&quot;text/*&quot;) call both to no avail.","title":"Handle a failed registerForActivityResult","body":"<p>Good day</p>\n<p>I'm trying to change all my startActivityForResult to registerForActivityResult. When I used startActivityForResult I passed a int to the function to handle &quot;no file selected&quot;</p>\n<pre><code>public void onActivityResult(int i, int i2, Intent intent)\n</code></pre>\n<p>and used</p>\n<pre><code>if (i != 1) {Toast.makeText(this, &quot;Recipe not loaded&quot;, Toast.LENGTH_LONG).show();\n</code></pre>\n<p>say when the user presses the back button instead of selecting a file</p>\n<p>In my new code my app crashes when I do not select a file</p>\n<p>Here is my old function:</p>\n<pre><code> /* access modifiers changed from: protected */\n    public void onActivityResult(int i, int i2, Intent intent) {\n        super.onActivityResult(i, i2, intent);\n        TextView textView = (TextView) findViewById(R.id.tViewRecipe);\n        textView.setText(&quot; &quot;);\n        this.Ingredients.clear();\n        this.Measurement.clear();\n        this.Amount.clear();\n        this.Recipe.clear();\n        this.TerminationWords.add(&quot;METHOD&quot;);\n        this.TerminationWords.add(&quot;METODE&quot;);\n        this.TerminationWords.add(&quot;PREPARATION&quot;);\n        this.TerminationWords.add(&quot;VOORBEREIDING&quot;);\n        this.TerminationWords.add(&quot;INSTRUCTIONS&quot;);\n        this.TerminationWords.add(&quot;INSTRUKSIES&quot;);\n        if (i != 1) {\n            Toast.makeText(this, &quot;Recipe not loaded&quot;, Toast.LENGTH_LONG).show();\n        } else if (i2 == -1) {\n            try {\n                // read text file here\n    }catch (IOException unused) {\n                Toast.makeText(this, &quot;Failed to load recipe&quot;, Toast.LENGTH_SHORT).show();\n            }\n</code></pre>\n<p>And here is my new function:</p>\n<pre><code>showRecipeActivity = registerForActivityResult(\n                new ActivityResultContracts.GetContent(),\n                new ActivityResultCallback&lt;Uri&gt;() {\n                    @Override\n                    public void onActivityResult(Uri result) {\n                        TextView textView = findViewById(R.id.tViewRecipe);\n                        textView.setText(&quot; &quot;);\n                        MainActivity.this.Ingredients.clear();\n                        MainActivity.this.Measurement.clear();\n                        MainActivity.this.Amount.clear();\n                        MainActivity.this.Recipe.clear();\n                        MainActivity.this.TerminationWords.add(&quot;METHOD&quot;);\n                        MainActivity.this.TerminationWords.add(&quot;METODE&quot;);\n                        MainActivity.this.TerminationWords.add(&quot;PREPARATION&quot;);\n                        MainActivity.this.TerminationWords.add(&quot;VOORBEREIDING&quot;);\n                        MainActivity.this.TerminationWords.add(&quot;INSTRUCTIONS&quot;);\n                        MainActivity.this.TerminationWords.add(&quot;INSTRUKSIES&quot;);\n                        try {\n                            //Read text file here\n                        } catch (IOException unused) {\n                            Toast.makeText(MainActivity.this, &quot;Failed to load recipe&quot;, Toast.LENGTH_SHORT).show();\n                        }\n                    }\n                }\n\n\n        );\n</code></pre>\n<p>How I call the showRecipeActivity:</p>\n<pre><code>private void showRecipe() {\n            showRecipeActivity.launch(&quot;text/*&quot;);\n}\n</code></pre>\n<p>I tried to add a try/catch block in the &quot;public void onActivityResult(Uri result)&quot; function, I also tried a try/catch over the showRecipeActivity.launch(&quot;text/*&quot;) call both to no avail.</p>\n"},{"tags":["java","arrays","for-loop","if-statement"],"comments":[{"owner":{"account_id":2709823,"reputation":10716,"user_id":2338547,"display_name":"markspace"},"score":1,"creation_date":1672766562,"post_id":74996568,"comment_id":132346501,"body_markdown":"`but it failed.` Can you produce a [mcve] that illustrates this?  Something with a much smaller array please, we don&#39;t want to have to search huge arrays full of numbers.  What result are you looking for?","body":"<code>but it failed.</code> Can you produce a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> that illustrates this?  Something with a much smaller array please, we don&#39;t want to have to search huge arrays full of numbers.  What result are you looking for?"},{"owner":{"account_id":27423264,"reputation":1,"user_id":20921279,"display_name":"shitposter"},"score":0,"creation_date":1672767240,"post_id":74996568,"comment_id":132346709,"body_markdown":"I am trying to make the program not repeat numbers that have been already tested.","body":"I am trying to make the program not repeat numbers that have been already tested."},{"owner":{"account_id":162699,"reputation":138060,"user_id":3788176,"accept_rate":54,"display_name":"Andy Turner"},"score":0,"creation_date":1672767246,"post_id":74996568,"comment_id":132346716,"body_markdown":"Build a set of the numbers you have checked so far, if you&#39;ve checked a number previously, skip it.","body":"Build a set of the numbers you have checked so far, if you&#39;ve checked a number previously, skip it."},{"owner":{"account_id":27423264,"reputation":1,"user_id":20921279,"display_name":"shitposter"},"score":0,"creation_date":1672767538,"post_id":74996568,"comment_id":132346825,"body_markdown":"good idea, I will try storing them in an array and then checking the array has the used numbers.","body":"good idea, I will try storing them in an array and then checking the array has the used numbers."}],"answers":[{"comments":[{"owner":{"account_id":27423264,"reputation":1,"user_id":20921279,"display_name":"shitposter"},"score":0,"creation_date":1672848032,"post_id":74996976,"comment_id":132366296,"body_markdown":"Sorry for the late response @skidwiz , but I have found quite a simple way to solve this: [link](https://pastebin.com/h1VN5ZqY) This checks numbers that have been already &quot;used&quot; using an array, thus solving the problem.\n\nfyi: i dont know how to send a snippet of code in a comment","body":"Sorry for the late response @skidwiz , but I have found quite a simple way to solve this: <a href=\"https://pastebin.com/h1VN5ZqY\" rel=\"nofollow noreferrer\">link</a> This checks numbers that have been already &quot;used&quot; using an array, thus solving the problem.  fyi: i dont know how to send a snippet of code in a comment"},{"owner":{"account_id":9235242,"reputation":1488,"user_id":6860078,"display_name":"tbatch"},"score":0,"creation_date":1672849614,"post_id":74996976,"comment_id":132366818,"body_markdown":"No problem.  Feel free to answer your own question with your solution.  This way other people can see it.","body":"No problem.  Feel free to answer your own question with your solution.  This way other people can see it."}],"tags":[],"owner":{"account_id":9235242,"reputation":1488,"user_id":6860078,"display_name":"tbatch"},"comment_count":2,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1672768614,"creation_date":1672768614,"answer_id":74996976,"question_id":74996568,"body_markdown":"Convert the array to a set before checking its values.  This will remove all duplicates.\r\n\r\nTry something like this:\r\n```java\r\nvar mySet = IntStream.of(firstArr).boxed().collect(Collectors.toSet());\r\nfor (int i = 0; i &lt; mySet.size(); i++) {\r\n  int [] result = arrRepeatCheck(secondArr, (Integer) mySet.toArray()[i]);\r\n  if (result[1] != 0) {\r\n    System.out.println(&quot;The number &quot; + result[0] + &quot; was found to be repetetive in the arrays &quot; + result[1] + &quot; times!&quot;);\r\n  }\r\n}\r\n```","title":"How can I stop the repetition of a value that has been already been checked in a function?","body":"<p>Convert the array to a set before checking its values.  This will remove all duplicates.</p>\n<p>Try something like this:</p>\n<pre class=\"lang-java prettyprint-override\"><code>var mySet = IntStream.of(firstArr).boxed().collect(Collectors.toSet());\nfor (int i = 0; i &lt; mySet.size(); i++) {\n  int [] result = arrRepeatCheck(secondArr, (Integer) mySet.toArray()[i]);\n  if (result[1] != 0) {\n    System.out.println(&quot;The number &quot; + result[0] + &quot; was found to be repetetive in the arrays &quot; + result[1] + &quot; times!&quot;);\n  }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":27423264,"reputation":1,"user_id":20921279,"display_name":"shitposter"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1672934476,"creation_date":1672934476,"answer_id":75021221,"question_id":74996568,"body_markdown":"I have found the answer, by making an array that stores successful checks, I can simply check if the array has an already checked number, thus stopping the repetition.  \r\n\r\n \r\n    int [] debug = new int [firstArr.length];\r\n    for (int i = 0; i &lt; firstArr.length; i++) {\r\n    \tresult = Utils.arrRepeatCheck(secondArr, firstArr[i]);\r\n    \tif ((result[1] != 0) &amp; (Utils.arrRepeatCheck(debug, result[0])[1] &lt; 1)) {\r\n    \t\tSystem.out.println(&quot;The number &quot; + result[0] + &quot; was found to be repetetive in the arrays &quot; + result[1] + &quot; times!&quot;);\r\n    \t\tdebug[i] = result[0];\r\n    \t}\r\n    }","title":"How can I stop the repetition of a value that has been already been checked in a function?","body":"<p>I have found the answer, by making an array that stores successful checks, I can simply check if the array has an already checked number, thus stopping the repetition.</p>\n<pre><code>int [] debug = new int [firstArr.length];\nfor (int i = 0; i &lt; firstArr.length; i++) {\n    result = Utils.arrRepeatCheck(secondArr, firstArr[i]);\n    if ((result[1] != 0) &amp; (Utils.arrRepeatCheck(debug, result[0])[1] &lt; 1)) {\n        System.out.println(&quot;The number &quot; + result[0] + &quot; was found to be repetetive in the arrays &quot; + result[1] + &quot; times!&quot;);\n        debug[i] = result[0];\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":27423264,"reputation":1,"user_id":20921279,"display_name":"shitposter"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":37,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":75021221,"answer_count":2,"score":0,"last_activity_date":1672934476,"creation_date":1672766261,"question_id":74996568,"body_markdown":"```\r\nint [] firstArr = Utils.arrGen(len, min, max);\r\nint [] secondArr = Utils.arrGen(len, min, max);\r\n```\r\n\r\n\r\n```\r\nfor (int i = 0; i &lt; firstArr.length; i++) {\r\n   int [] result = Utils.arrRepeatCheck(secondArr, firstArr[i]);\r\n   if (result[1] != 0) {\r\n      System.out.println(&quot;The number &quot; + result[0] + &quot; was found to be repetetive in the arrays &quot; + result[1] + &quot; times!&quot;);\r\n   }\r\n}\r\n```\r\n\r\n\r\n```\r\npublic static int [] arrRepeatCheck(int [] arr, int num) {\r\n   int counter = 0;\r\n   for (int i = 0; i &lt; arr.length; i++) {\r\n      if (arr[i] == num) {\r\n         counter++;\r\n      }\r\n   }\r\n\r\n\r\nint [] result = {num, counter};\r\nreturn result;\r\n```\r\n\r\n(The function Utils.arrGen generates arrays with random values in them in a certain range, btw arrRepeartCheck is already in the utils class.)\r\n\r\n\r\n\r\nI tried using an if statement to check if the number has been already tested, but it failed.\r\n\r\n```\r\nThe number 1 was found to be repetetive in the arrays 12 times!\r\nThe number 3 was found to be repetetive in the arrays 15 times!\r\nThe number 1 was found to be repetetive in the arrays 12 times!\r\nThe number 1 was found to be repetetive in the arrays 12 times!\r\nThe number 2 was found to be repetetive in the arrays 8 times!\r\nThe number 0 was found to be repetetive in the arrays 15 times!\r\nThe number 1 was found to be repetetive in the arrays 12 times!\r\nThe number 0 was found to be repetetive in the arrays 15 times!\r\nThe number 2 was found to be repetetive in the arrays 8 times!\r\nThe number 0 was found to be repetetive in the arrays 15 times!\r\nThe number 2 was found to be repetetive in the arrays 8 times!\r\nThe number 1 was found to be repetetive in the arrays 12 times!\r\nThe number 3 was found to be repetetive in the arrays 15 times!\r\nThe number 2 was found to be repetetive in the arrays 8 times!\r\nThe number 3 was found to be repetetive in the arrays 15 times!\r\nThe number 3 was found to be repetetive in the arrays 15 times!\r\nThe number 1 was found to be repetetive in the arrays 12 times!\r\nThe number 3 was found to be repetetive in the arrays 15 times!\r\nThe number 0 was found to be repetetive in the arrays 15 times!\r\nThe number 3 was found to be repetetive in the arrays 15 times!\r\nThe number 3 was found to be repetetive in the arrays 15 times!\r\nThe number 0 was found to be repetetive in the arrays 15 times!\r\nThe number 3 was found to be repetetive in the arrays 15 times!\r\nThe number 2 was found to be repetetive in the arrays 8 times!\r\nThe number 1 was found to be repetetive in the arrays 12 times!\r\nThe number 3 was found to be repetetive in the arrays 15 times!\r\nThe number 0 was found to be repetetive in the arrays 15 times!\r\nThe number 3 was found to be repetetive in the arrays 15 times!\r\n\r\nProcess finished with exit code 0\r\n```","title":"How can I stop the repetition of a value that has been already been checked in a function?","body":"<pre><code>int [] firstArr = Utils.arrGen(len, min, max);\nint [] secondArr = Utils.arrGen(len, min, max);\n</code></pre>\n<pre><code>for (int i = 0; i &lt; firstArr.length; i++) {\n   int [] result = Utils.arrRepeatCheck(secondArr, firstArr[i]);\n   if (result[1] != 0) {\n      System.out.println(&quot;The number &quot; + result[0] + &quot; was found to be repetetive in the arrays &quot; + result[1] + &quot; times!&quot;);\n   }\n}\n</code></pre>\n<pre><code>public static int [] arrRepeatCheck(int [] arr, int num) {\n   int counter = 0;\n   for (int i = 0; i &lt; arr.length; i++) {\n      if (arr[i] == num) {\n         counter++;\n      }\n   }\n\n\nint [] result = {num, counter};\nreturn result;\n</code></pre>\n<p>(The function Utils.arrGen generates arrays with random values in them in a certain range, btw arrRepeartCheck is already in the utils class.)</p>\n<p>I tried using an if statement to check if the number has been already tested, but it failed.</p>\n<pre><code>The number 1 was found to be repetetive in the arrays 12 times!\nThe number 3 was found to be repetetive in the arrays 15 times!\nThe number 1 was found to be repetetive in the arrays 12 times!\nThe number 1 was found to be repetetive in the arrays 12 times!\nThe number 2 was found to be repetetive in the arrays 8 times!\nThe number 0 was found to be repetetive in the arrays 15 times!\nThe number 1 was found to be repetetive in the arrays 12 times!\nThe number 0 was found to be repetetive in the arrays 15 times!\nThe number 2 was found to be repetetive in the arrays 8 times!\nThe number 0 was found to be repetetive in the arrays 15 times!\nThe number 2 was found to be repetetive in the arrays 8 times!\nThe number 1 was found to be repetetive in the arrays 12 times!\nThe number 3 was found to be repetetive in the arrays 15 times!\nThe number 2 was found to be repetetive in the arrays 8 times!\nThe number 3 was found to be repetetive in the arrays 15 times!\nThe number 3 was found to be repetetive in the arrays 15 times!\nThe number 1 was found to be repetetive in the arrays 12 times!\nThe number 3 was found to be repetetive in the arrays 15 times!\nThe number 0 was found to be repetetive in the arrays 15 times!\nThe number 3 was found to be repetetive in the arrays 15 times!\nThe number 3 was found to be repetetive in the arrays 15 times!\nThe number 0 was found to be repetetive in the arrays 15 times!\nThe number 3 was found to be repetetive in the arrays 15 times!\nThe number 2 was found to be repetetive in the arrays 8 times!\nThe number 1 was found to be repetetive in the arrays 12 times!\nThe number 3 was found to be repetetive in the arrays 15 times!\nThe number 0 was found to be repetetive in the arrays 15 times!\nThe number 3 was found to be repetetive in the arrays 15 times!\n\nProcess finished with exit code 0\n</code></pre>\n"},{"tags":["java"],"owner":{"account_id":18093144,"reputation":565,"user_id":13152124,"display_name":"Mama"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":28,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1672934396,"creation_date":1672934396,"question_id":75021208,"body_markdown":"&gt; I want to pass dynamic value inside  request body in my case I pass\r\n&gt; thirdpartypaymentGatewayToken in two place inside request body and an\r\n&gt; other place requestString as requestBody but I want make single\r\n&gt; function and pass values inside request body dynamic. for your\r\n&gt; reference I post my old code and new code.\r\n&gt; \r\n&gt; Here my old code\r\n\r\n        public ThirdPartyPaymentGatewayResponse getThirdPartyPaymentGatewayToken(ThirdPartyPaymentGatewayToken thirdPartyPaymentGatewayToken, String managedBy) \r\n        \t\t\t\tthrows AuthenticationException, UnknownHostException, BadRequestException {\r\n        \t\t\tString brandwiseBearerToken = getBrandwiseAuthenticationToken();\r\n        \t\t\tThirdPartyPaymentGatewayResponse thirdPartyPaymentGatewayResponse = new ThirdPartyPaymentGatewayResponse();\r\n        \r\n        String thirdPartyPaymentGatewayTokenJson = ow.writeValueAsString(thirdPartyPaymentGatewayToken);\r\n        \t\t\t\t\t\r\n        \t\t\t\t\tRequestBody body = RequestBody.create(mediaType, thirdPartyPaymentGatewayTokenJson);\r\n        \t\t\t\t\tRequest request = new Request.Builder().url(brandwiseThirdPartypaymentGatewayURL)\r\n        \t\t\t\t\t\t\t.post(body)\r\n        \t\t\t\t\t\t\t.addHeader(&quot;Content-Type&quot;, &quot;application/json&quot;)\r\n        \t\t\t\t\t\t\t.addHeader(&quot;Bearer&quot;, brandwiseBearerToken)\r\n        \t\t\t\t\t\t\t.build();\r\n        \t\t\t\t\t\r\n        \t\t\t\t\tResponse response = client.newCall(request).execute();\r\n        \t\t\t\t\tResponseBody responseBody = response.body();\r\n        \t\t\t\t\t\r\n        \t\t\t\t\tJsonObject jsonObject = new Gson().fromJson(responseBody.string(), JsonObject.class);\r\n        \t\t\t\t\tJsonElement error = jsonObject.get(&quot;Message&quot;);\r\n        }\r\n    \r\n    &gt; second function\r\n    public ThirdPartyPaymentGatewayResponse getThirdPartyPaymentGatewayToken(ThirdPartyPaymentGatewayToken thirdPartyPaymentGatewayToken, String managedBy) \r\n    \t\t\t\tthrows AuthenticationException, UnknownHostException, BadRequestException {\r\n    \t\t\tString brandwiseBearerToken = getBrandwiseAuthenticationToken();\r\n    \r\n    \tString thirdPartyPaymentGatewayTokenJson = ow.writeValueAsString(thirdPartyPaymentGatewayToken);\r\n    \t\t\t\t\t\r\n    \t\t\t\t\tRequestBody body = RequestBody.create(mediaType, thirdPartyPaymentGatewayTokenJson);\r\n    \t\t\t\t\tRequest request = new Request.Builder().url(brandwiseThirdPartypaymentGatewayURL)\r\n    \t\t\t\t\t\t\t.post(body)\r\n    \t\t\t\t\t\t\t.addHeader(&quot;Content-Type&quot;, &quot;application/json&quot;)\r\n    \t\t\t\t\t\t\t.addHeader(&quot;Bearer&quot;, brandwiseBearerToken)\r\n    \t\t\t\t\t\t\t.build();\r\n    \t\t\t\t\t\r\n    \t\t\t\t\tResponse response = client.newCall(request).execute();\r\n    \t\t\t\t\tResponseBody responseBody = response.body();\r\n    \t\t\t\t\t\r\n    \t\t\t\t\tJsonObject jsonObject = new Gson().fromJson(responseBody.string(), JsonObject.class);\r\n    \t\t\t\t\tJsonElement error = jsonObject.get(&quot;Message&quot;);\r\n    \r\n    /** rest of code*/\r\n    }\r\n\r\n&gt; third function different than other two\r\n\r\n    private String getBrandwiseAuthenticationToken() throws UnknownHostException, AuthenticationException {\r\n    \r\n    OkHttpClient client = new OkHttpClient();\r\n    \t\t\t\tMediaType mediaType = MediaType.parse(&quot;application/json&quot;);\r\n    \t\t\t\tString requestString = &quot;{\\&quot;LoginName\\&quot;: \\&quot;&quot; + brandwiseAuthUsername + &quot;\\&quot;,\\&quot;Password\\&quot;: \\&quot;&quot;+ brandwiseAuthPassword + &quot;\\&quot;}&quot;;\r\n    \r\n    \t\t\t\tRequestBody body = RequestBody.create(mediaType, requestString);\r\n    \t\t\t\tRequest request = new Request.Builder().url(brandwiseAuthenticationURL)\r\n    \t\t\t\t\t\t.post(body)\r\n    \t\t\t\t\t\t.addHeader(&quot;Content-Type&quot;, &quot;application/json&quot;)\r\n    \t\t\t\t\t\t.build();\r\n    \t\t\t\t\r\n    \t\t\t\tResponse response = client.newCall(request).execute();\r\n    \t\t\t\tResponseBody responseBody = response.body();\r\n    \r\n    \t\t\t\tJsonObject jsonObject = new Gson().fromJson(responseBody.string(), JsonObject.class);\r\n    }\r\n\r\n&gt; To overcome from this issue I do this way but I am not able make\r\n&gt; request body as dynamic. Here my new code\r\n\r\n    private JsonObject gateWayToken(String url,String brandwiseBearerToken,\r\n    \t\t\t\t\t\t\tThirdPartyPaymentGatewayToken thirdPartyPaymentGatewayToken ) throws IOException, AuthenticationException{\r\n    \t\t\t\t\t\t\r\n    \t\t\t\t\t\tObjectWriter ow = new ObjectMapper().writer().withDefaultPrettyPrinter();\r\n    \t\t\t\t\t\t\r\n    \t\t\t\t\t\tString requestString = &quot;{\\&quot;LoginName\\&quot;: \\&quot;&quot; + brandwiseAuthUsername + &quot;\\&quot;,\\&quot;Password\\&quot;: \\&quot;&quot;+ brandwiseAuthPassword + &quot;\\&quot;}&quot;;\r\n    \t\t\t\t\t\t\r\n    \t\t\t\t\t\tOkHttpClient client = new OkHttpClient();\r\n    \t\t\t\t\t\t\r\n    \t\t\t\t\t\tMediaType mediaType = MediaType.parse(&quot;application/json&quot;);\r\n    \t\t\t\t\t\t\r\n    \t\t\t\t\t\tRequestBody body=null;\r\n    \t\t\t\t\t\t//dynamic  value accept by  body\r\n    \t\t\t\t\t\tif(!Strings.isNullOrEmpty(requestString)) {\r\n    \t\t\t\t\t\t\tString brandwiseBearerPaymentGatewayTokenJson = ow.writeValueAsString(requestString);\r\n    \t\t\t\t\t\t\t body = RequestBody.create(mediaType,brandwiseBearerPaymentGatewayTokenJson);\r\n    \t\t\t\t\t\t}else {\r\n    \t\t\t\t\t\t\tString thirdPartyPaymentGatewayTokenJson = ow.writeValueAsString(thirdPartyPaymentGatewayToken);\r\n    \t\t\t\t\t\t\t body = RequestBody.create(mediaType,thirdPartyPaymentGatewayTokenJson );\r\n    \t\t\t\t\t\t}\r\n    \t\t\t\t\t\t//if user is authenticated then header part will show \r\n    \t\t\t\t\t\t\tRequest request=null;\r\n    \t\t\t\t\t\t\tif (brandwiseBearerToken != null &amp;&amp; StringUtils.isNotEmpty(brandwiseBearerToken)) {\r\n    \t\t\t\t\t\t\t\t request =new Request.Builder().url(url).post(body)\r\n    \t\t\t\t\t\t\t\t.addHeader(&quot;Content-Type&quot;, &quot;application/json&quot;)\r\n    \t\t\t\t\t\t\t\t.addHeader(&quot;Bearer&quot;, brandwiseBearerToken)\r\n    \t\t\t\t\t\t\t\t.build();\r\n    \t\t\t\t\t\t\t} else {\r\n    \t\t\t\t\t\t\t request=new Request.Builder().url(url).post(body)\r\n    \t\t\t\t\t\t\t\t.addHeader(&quot;Content-Type&quot;, &quot;application/json&quot;)\r\n    \t\t\t\t\t\t\t\t.build();\r\n    \t\t\t\t\t\t\t}\r\n    \t\t\t\t\t\t\t\r\n    \t\t\t\t\t\t\tResponse response = client.newCall(request).execute();\r\n    \t\t\t\t\t\t\tResponseBody responseBody = response.body();\r\n    \t\t\t\t\t\t\treturn new Gson().fromJson(responseBody.string(), JsonObject.class);\r\n    \t\t\t\t\t}\r\n\r\n&gt; I want to dynamic exact at this point\r\n \r\n\r\n     if(!Strings.isNullOrEmpty(requestString)) {\r\n                                String brandwiseBearerPaymentGatewayTokenJson = ow.writeValueAsString(requestString);\r\n                                 body = RequestBody.create(mediaType,brandwiseBearerPaymentGatewayTokenJson);\r\n                            }else {\r\n                                String thirdPartyPaymentGatewayTokenJson = ow.writeValueAsString(thirdPartyPaymentGatewayToken);\r\n                                 body = RequestBody.create(mediaType,thirdPartyPaymentGatewayTokenJson );\r\n                            }\r\n\r\n&gt; Check Passing values inside ReqestBody","title":"Conditional Base pass dynamic value inside request body","body":"<blockquote>\n<p>I want to pass dynamic value inside  request body in my case I pass\nthirdpartypaymentGatewayToken in two place inside request body and an\nother place requestString as requestBody but I want make single\nfunction and pass values inside request body dynamic. for your\nreference I post my old code and new code.</p>\n<p>Here my old code</p>\n</blockquote>\n<pre><code>    public ThirdPartyPaymentGatewayResponse getThirdPartyPaymentGatewayToken(ThirdPartyPaymentGatewayToken thirdPartyPaymentGatewayToken, String managedBy) \n                    throws AuthenticationException, UnknownHostException, BadRequestException {\n                String brandwiseBearerToken = getBrandwiseAuthenticationToken();\n                ThirdPartyPaymentGatewayResponse thirdPartyPaymentGatewayResponse = new ThirdPartyPaymentGatewayResponse();\n    \n    String thirdPartyPaymentGatewayTokenJson = ow.writeValueAsString(thirdPartyPaymentGatewayToken);\n                        \n                        RequestBody body = RequestBody.create(mediaType, thirdPartyPaymentGatewayTokenJson);\n                        Request request = new Request.Builder().url(brandwiseThirdPartypaymentGatewayURL)\n                                .post(body)\n                                .addHeader(&quot;Content-Type&quot;, &quot;application/json&quot;)\n                                .addHeader(&quot;Bearer&quot;, brandwiseBearerToken)\n                                .build();\n                        \n                        Response response = client.newCall(request).execute();\n                        ResponseBody responseBody = response.body();\n                        \n                        JsonObject jsonObject = new Gson().fromJson(responseBody.string(), JsonObject.class);\n                        JsonElement error = jsonObject.get(&quot;Message&quot;);\n    }\n\n&gt; second function\npublic ThirdPartyPaymentGatewayResponse getThirdPartyPaymentGatewayToken(ThirdPartyPaymentGatewayToken thirdPartyPaymentGatewayToken, String managedBy) \n                throws AuthenticationException, UnknownHostException, BadRequestException {\n            String brandwiseBearerToken = getBrandwiseAuthenticationToken();\n\n    String thirdPartyPaymentGatewayTokenJson = ow.writeValueAsString(thirdPartyPaymentGatewayToken);\n                    \n                    RequestBody body = RequestBody.create(mediaType, thirdPartyPaymentGatewayTokenJson);\n                    Request request = new Request.Builder().url(brandwiseThirdPartypaymentGatewayURL)\n                            .post(body)\n                            .addHeader(&quot;Content-Type&quot;, &quot;application/json&quot;)\n                            .addHeader(&quot;Bearer&quot;, brandwiseBearerToken)\n                            .build();\n                    \n                    Response response = client.newCall(request).execute();\n                    ResponseBody responseBody = response.body();\n                    \n                    JsonObject jsonObject = new Gson().fromJson(responseBody.string(), JsonObject.class);\n                    JsonElement error = jsonObject.get(&quot;Message&quot;);\n\n/** rest of code*/\n}\n</code></pre>\n<blockquote>\n<p>third function different than other two</p>\n</blockquote>\n<pre><code>private String getBrandwiseAuthenticationToken() throws UnknownHostException, AuthenticationException {\n\nOkHttpClient client = new OkHttpClient();\n                MediaType mediaType = MediaType.parse(&quot;application/json&quot;);\n                String requestString = &quot;{\\&quot;LoginName\\&quot;: \\&quot;&quot; + brandwiseAuthUsername + &quot;\\&quot;,\\&quot;Password\\&quot;: \\&quot;&quot;+ brandwiseAuthPassword + &quot;\\&quot;}&quot;;\n\n                RequestBody body = RequestBody.create(mediaType, requestString);\n                Request request = new Request.Builder().url(brandwiseAuthenticationURL)\n                        .post(body)\n                        .addHeader(&quot;Content-Type&quot;, &quot;application/json&quot;)\n                        .build();\n                \n                Response response = client.newCall(request).execute();\n                ResponseBody responseBody = response.body();\n\n                JsonObject jsonObject = new Gson().fromJson(responseBody.string(), JsonObject.class);\n}\n</code></pre>\n<blockquote>\n<p>To overcome from this issue I do this way but I am not able make\nrequest body as dynamic. Here my new code</p>\n</blockquote>\n<pre><code>private JsonObject gateWayToken(String url,String brandwiseBearerToken,\n                            ThirdPartyPaymentGatewayToken thirdPartyPaymentGatewayToken ) throws IOException, AuthenticationException{\n                        \n                        ObjectWriter ow = new ObjectMapper().writer().withDefaultPrettyPrinter();\n                        \n                        String requestString = &quot;{\\&quot;LoginName\\&quot;: \\&quot;&quot; + brandwiseAuthUsername + &quot;\\&quot;,\\&quot;Password\\&quot;: \\&quot;&quot;+ brandwiseAuthPassword + &quot;\\&quot;}&quot;;\n                        \n                        OkHttpClient client = new OkHttpClient();\n                        \n                        MediaType mediaType = MediaType.parse(&quot;application/json&quot;);\n                        \n                        RequestBody body=null;\n                        //dynamic  value accept by  body\n                        if(!Strings.isNullOrEmpty(requestString)) {\n                            String brandwiseBearerPaymentGatewayTokenJson = ow.writeValueAsString(requestString);\n                             body = RequestBody.create(mediaType,brandwiseBearerPaymentGatewayTokenJson);\n                        }else {\n                            String thirdPartyPaymentGatewayTokenJson = ow.writeValueAsString(thirdPartyPaymentGatewayToken);\n                             body = RequestBody.create(mediaType,thirdPartyPaymentGatewayTokenJson );\n                        }\n                        //if user is authenticated then header part will show \n                            Request request=null;\n                            if (brandwiseBearerToken != null &amp;&amp; StringUtils.isNotEmpty(brandwiseBearerToken)) {\n                                 request =new Request.Builder().url(url).post(body)\n                                .addHeader(&quot;Content-Type&quot;, &quot;application/json&quot;)\n                                .addHeader(&quot;Bearer&quot;, brandwiseBearerToken)\n                                .build();\n                            } else {\n                             request=new Request.Builder().url(url).post(body)\n                                .addHeader(&quot;Content-Type&quot;, &quot;application/json&quot;)\n                                .build();\n                            }\n                            \n                            Response response = client.newCall(request).execute();\n                            ResponseBody responseBody = response.body();\n                            return new Gson().fromJson(responseBody.string(), JsonObject.class);\n                    }\n</code></pre>\n<blockquote>\n<p>I want to dynamic exact at this point</p>\n</blockquote>\n<pre><code> if(!Strings.isNullOrEmpty(requestString)) {\n                            String brandwiseBearerPaymentGatewayTokenJson = ow.writeValueAsString(requestString);\n                             body = RequestBody.create(mediaType,brandwiseBearerPaymentGatewayTokenJson);\n                        }else {\n                            String thirdPartyPaymentGatewayTokenJson = ow.writeValueAsString(thirdPartyPaymentGatewayToken);\n                             body = RequestBody.create(mediaType,thirdPartyPaymentGatewayTokenJson );\n                        }\n</code></pre>\n<blockquote>\n<p>Check Passing values inside ReqestBody</p>\n</blockquote>\n"},{"tags":["java","json","jsonpath","json-path-expression"],"comments":[{"owner":{"account_id":3923819,"reputation":81,"user_id":3245115,"display_name":"Filipizaum"},"score":0,"creation_date":1672934702,"post_id":75021089,"comment_id":132389437,"body_markdown":"https://salesforce.stackexchange.com/questions/176071/how-can-i-dynamically-create-json-from-many-dot-separated-strings-for-example-p","body":"<a href=\"https://salesforce.stackexchange.com/questions/176071/how-can-i-dynamically-create-json-from-many-dot-separated-strings-for-example-p\" title=\"how can i dynamically create json from many dot separated strings for example p\">salesforce.stackexchange.com/questions/176071/&hellip;</a>"}],"answers":[{"tags":[],"owner":{"account_id":16807985,"reputation":403,"user_id":12151634,"display_name":"Roniel L&#243;pez"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1672934367,"creation_date":1672934367,"answer_id":75021200,"question_id":75021089,"body_markdown":"you could do something like this:\r\n\r\n```\r\nimport org.json.JSONObject;\r\n\r\nList&lt;String&gt; input = List.of(&quot;customer.name&quot;, &quot;customer.phone&quot;, &quot;shop.address&quot;, &quot;nr&quot;);\r\n\r\nJSONObject root = new JSONObject();\r\n\r\nfor (String s : input) {\r\n  // Split the string by the &#39;.&#39; character to get the keys\r\n  String[] keys = s.split(&quot;\\\\.&quot;);\r\n\r\n  JSONObject obj = root;\r\n  for (int i = 0; i &lt; keys.length; i++) {\r\n    String key = keys[i];\r\n    if (i &lt; keys.length - 1) {\r\n      if (!obj.has(key)) {\r\n        obj.put(key, new JSONObject());\r\n      }\r\n      obj = obj.getJSONObject(key);\r\n    } else {\r\n      obj.put(key, &quot;&quot;);\r\n    }\r\n  }\r\n}\r\n\r\n```","title":"Get JSON tree based on the JSON paths list Java","body":"<p>you could do something like this:</p>\n<pre><code>import org.json.JSONObject;\n\nList&lt;String&gt; input = List.of(&quot;customer.name&quot;, &quot;customer.phone&quot;, &quot;shop.address&quot;, &quot;nr&quot;);\n\nJSONObject root = new JSONObject();\n\nfor (String s : input) {\n  // Split the string by the '.' character to get the keys\n  String[] keys = s.split(&quot;\\\\.&quot;);\n\n  JSONObject obj = root;\n  for (int i = 0; i &lt; keys.length; i++) {\n    String key = keys[i];\n    if (i &lt; keys.length - 1) {\n      if (!obj.has(key)) {\n        obj.put(key, new JSONObject());\n      }\n      obj = obj.getJSONObject(key);\n    } else {\n      obj.put(key, &quot;&quot;);\n    }\n  }\n}\n\n</code></pre>\n"}],"owner":{"account_id":24407910,"reputation":13,"user_id":18335822,"display_name":"Anamaria Dragomir"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":126,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":75021200,"answer_count":1,"score":0,"last_activity_date":1672934367,"creation_date":1672933845,"question_id":75021089,"body_markdown":"My input is something like:\r\n\r\n    List.of(&quot;customer.name&quot;, &quot;customer.phone&quot;, &quot;shop.address&quot;, &quot;nr&quot;)\r\n\r\nAnd I have to get the JSON tree hierarchy like:\r\n\r\n    { \r\n      customer: {\r\n        name: &quot;&quot;,\r\n        phone: &quot;&quot;,\r\n      },\r\n      shop: {\r\n        address: &quot;&quot;\r\n      },\r\n      nr: &quot;&quot;\r\n    }\r\n\r\nI am using Java and &#39;org.json&#39;, &#39;com.jayway.jsonpath&#39; JSON dependencies.\r\n\r\nDo you have any ideas, please?\r\nThank you!","title":"Get JSON tree based on the JSON paths list Java","body":"<p>My input is something like:</p>\n<pre><code>List.of(&quot;customer.name&quot;, &quot;customer.phone&quot;, &quot;shop.address&quot;, &quot;nr&quot;)\n</code></pre>\n<p>And I have to get the JSON tree hierarchy like:</p>\n<pre><code>{ \n  customer: {\n    name: &quot;&quot;,\n    phone: &quot;&quot;,\n  },\n  shop: {\n    address: &quot;&quot;\n  },\n  nr: &quot;&quot;\n}\n</code></pre>\n<p>I am using Java and 'org.json', 'com.jayway.jsonpath' JSON dependencies.</p>\n<p>Do you have any ideas, please?\nThank you!</p>\n"},{"tags":["java","matrix"],"comments":[{"owner":{"account_id":16975895,"reputation":1,"user_id":20938181,"display_name":"epsilonolispe"},"score":0,"creation_date":1672934397,"post_id":75021195,"comment_id":132389317,"body_markdown":"Also confused on how to grab the fruit from one class by giving it the colour","body":"Also confused on how to grab the fruit from one class by giving it the colour"},{"owner":{"account_id":1352170,"reputation":34246,"user_id":1291492,"accept_rate":100,"display_name":"ControlAltDel"},"score":0,"creation_date":1672935080,"post_id":75021195,"comment_id":132389587,"body_markdown":"You should use an instance of a `java.util.Map` for this","body":"You should use an instance of a <code>java.util.Map</code> for this"},{"owner":{"account_id":6606677,"reputation":1024,"user_id":5103317,"display_name":"Old Dog Programmer"},"score":0,"creation_date":1672936708,"post_id":75021195,"comment_id":132390249,"body_markdown":"There is too little code here for us to be able to evaluate.","body":"There is too little code here for us to be able to evaluate."},{"owner":{"account_id":6606677,"reputation":1024,"user_id":5103317,"display_name":"Old Dog Programmer"},"score":2,"creation_date":1672936882,"post_id":75021195,"comment_id":132390313,"body_markdown":"But, why a 2D array? Why not have a `class` where the name of the fruit (or food) is one attribute, and the color another? `new Fruit (&quot;Granny Smith Apple&quot;, &quot;Green&quot;)`, `new Fruit (&quot;Navel Orange&quot;, &quot;Orange&quot;)`, ?   What about using `enum` for colours?","body":"But, why a 2D array? Why not have a <code>class</code> where the name of the fruit (or food) is one attribute, and the color another? <code>new Fruit (&quot;Granny Smith Apple&quot;, &quot;Green&quot;)</code>, <code>new Fruit (&quot;Navel Orange&quot;, &quot;Orange&quot;)</code>, ?   What about using <code>enum</code> for colours?"},{"owner":{"account_id":543600,"reputation":1014,"user_id":2125723,"accept_rate":80,"display_name":"ryanwebjackson"},"score":1,"creation_date":1672940603,"post_id":75021195,"comment_id":132391639,"body_markdown":"Yeah, there&#39;s nothing wrong with a 2D array necessarily, but we need to know the problem you are trying to solve.","body":"Yeah, there&#39;s nothing wrong with a 2D array necessarily, but we need to know the problem you are trying to solve."}],"owner":{"account_id":16975895,"reputation":1,"user_id":20938181,"display_name":"epsilonolispe"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":25,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1672934346,"creation_date":1672934346,"question_id":75021195,"body_markdown":"I am trying to improve current code. To do so, I want to call another class. \r\n\r\nI have colours and fruit, essentially something like this: \r\nred = apple, yellow = banana, orange = orange ...\r\n\r\n\r\n\r\nMy proposed solution is to put this into a matrix, have the colour from one class and call the other class to get back the fruit name. Here is what I have so far: \r\n\r\n```\r\nprivate String c1 = red \r\n... \r\n\r\nprivate String f1 = apple\r\n...\r\n\r\nprivate String[][] food;\r\n\r\npublic void setFood(){\r\n// HELP NEEDED \r\n} \r\n\r\npublic String getFruit(string colour){\r\n// HELP NEEDED - I&#39;m guessing some sort of 2 for loops ?\r\n\r\nreturn fruit; \r\n}\r\n``` ","title":"Access a 2D array from another class","body":"<p>I am trying to improve current code. To do so, I want to call another class.</p>\n<p>I have colours and fruit, essentially something like this:\nred = apple, yellow = banana, orange = orange ...</p>\n<p>My proposed solution is to put this into a matrix, have the colour from one class and call the other class to get back the fruit name. Here is what I have so far:</p>\n<pre><code>private String c1 = red \n... \n\nprivate String f1 = apple\n...\n\nprivate String[][] food;\n\npublic void setFood(){\n// HELP NEEDED \n} \n\npublic String getFruit(string colour){\n// HELP NEEDED - I'm guessing some sort of 2 for loops ?\n\nreturn fruit; \n}\n</code></pre>\n"},{"tags":["java","spring","spring-boot"],"answers":[{"comments":[{"owner":{"account_id":26950487,"reputation":41,"user_id":20519796,"display_name":"Leobejj"},"score":0,"creation_date":1672936409,"post_id":75021181,"comment_id":132390134,"body_markdown":"It still doesn&#39;t work","body":"It still doesn&#39;t work"},{"owner":{"account_id":15215084,"reputation":302,"user_id":10978688,"display_name":"selllami"},"score":0,"creation_date":1672942279,"post_id":75021181,"comment_id":132392216,"body_markdown":"Could u plz, check your browser config to enable &quot;Save As&quot;:  \n=&gt; Open the Google Chrome browser.  \n=&gt; Click the three-dotted icon on top-right and select Settings.  \n=&gt; Click the Advanced option. and  Select Downloads.  \n=&gt; Toggle the Ask where to save each file before downloading button.","body":"Could u plz, check your browser config to enable &quot;Save As&quot;:   =&gt; Open the Google Chrome browser.   =&gt; Click the three-dotted icon on top-right and select Settings.   =&gt; Click the Advanced option. and  Select Downloads.   =&gt; Toggle the Ask where to save each file before downloading button."}],"tags":[],"owner":{"account_id":15215084,"reputation":302,"user_id":10978688,"display_name":"selllami"},"comment_count":2,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1672934258,"creation_date":1672934258,"answer_id":75021181,"question_id":75020351,"body_markdown":"You must add a contentType to ur response, Try using :\r\n```\r\n@GetMapping(&quot;/download/{fileName:.+}&quot;)\r\npublic ResponseEntity&lt;ByteArrayResource&gt; download(@PathVariable String fileName) throws IOException {\r\n   File file = new File(UPLOADED_FOLDER + fileName);\r\n   // return 404 if file not exist or ResponseEntity.noContent().build();\r\n\r\n   HttpHeaders headers = new HttpHeaders();\r\n   headers.add(&quot;Content-disposition&quot;, &quot;attachment; filename=\\&quot;&quot;+fileName+&quot;\\&quot;&quot;);\r\n   // add other header, ex: Cache-Control...\r\n\r\n\r\n   Path path = Paths.get(UPLOADED_FOLDER + fileName);\r\n   ByteArrayResource resource = new ByteArrayResource(Files.readAllBytes(path));\r\n\r\n   return ResponseEntity.ok()\r\n       .headers(headers)\r\n       .contentLength(file.length())\r\n       .contentType(MediaType.parseMediaType(&quot;application/octet-stream&quot;))\r\n       .body(resource);\r\n }\r\n```","title":"How to set a configurable download location for a file through Spring Boot Rest Controller","body":"<p>You must add a contentType to ur response, Try using :</p>\n<pre><code>@GetMapping(&quot;/download/{fileName:.+}&quot;)\npublic ResponseEntity&lt;ByteArrayResource&gt; download(@PathVariable String fileName) throws IOException {\n   File file = new File(UPLOADED_FOLDER + fileName);\n   // return 404 if file not exist or ResponseEntity.noContent().build();\n\n   HttpHeaders headers = new HttpHeaders();\n   headers.add(&quot;Content-disposition&quot;, &quot;attachment; filename=\\&quot;&quot;+fileName+&quot;\\&quot;&quot;);\n   // add other header, ex: Cache-Control...\n\n\n   Path path = Paths.get(UPLOADED_FOLDER + fileName);\n   ByteArrayResource resource = new ByteArrayResource(Files.readAllBytes(path));\n\n   return ResponseEntity.ok()\n       .headers(headers)\n       .contentLength(file.length())\n       .contentType(MediaType.parseMediaType(&quot;application/octet-stream&quot;))\n       .body(resource);\n }\n</code></pre>\n"}],"owner":{"account_id":26950487,"reputation":41,"user_id":20519796,"display_name":"Leobejj"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":438,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1672934258,"creation_date":1672930529,"question_id":75020351,"body_markdown":"In my REST API I want to download a file into a configurable location on disk, I managed to implement the download functionality but I can&#39;t get that Save As window in browser(I use Chrome).\r\nThis is the response entity that I return into my get method\r\n\r\n   \r\n\r\n      public ResponseEntity&lt;Object&gt; download() throws IOException {\r\n        \r\n        String fileName = &quot;fileDownload.txt&quot;;\r\n        File file = objService.getFile();\r\n\r\n        return ResponseEntity.ok().contentType(MediaType.APPLICATION_JSON)\r\n                .header(HttpHeaders.CONTENT_DISPOSITION\r\n                        ,String.format(&quot;attachment; filename=\\&quot;&quot; + file.getName() + &quot;\\&quot;&quot;))\r\n                .body(new ByteArrayResource(new FileInputStream(file).readAllBytes()));\r\n    }","title":"How to set a configurable download location for a file through Spring Boot Rest Controller","body":"<p>In my REST API I want to download a file into a configurable location on disk, I managed to implement the download functionality but I can't get that Save As window in browser(I use Chrome).\nThis is the response entity that I return into my get method</p>\n<pre><code>  public ResponseEntity&lt;Object&gt; download() throws IOException {\n    \n    String fileName = &quot;fileDownload.txt&quot;;\n    File file = objService.getFile();\n\n    return ResponseEntity.ok().contentType(MediaType.APPLICATION_JSON)\n            .header(HttpHeaders.CONTENT_DISPOSITION\n                    ,String.format(&quot;attachment; filename=\\&quot;&quot; + file.getName() + &quot;\\&quot;&quot;))\n            .body(new ByteArrayResource(new FileInputStream(file).readAllBytes()));\n}\n</code></pre>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":1082858,"reputation":104688,"user_id":1079354,"accept_rate":93,"display_name":"Makoto"},"score":1,"creation_date":1672931869,"post_id":75020503,"comment_id":132388296,"body_markdown":"I don&#39;t see a way to do this &quot;better&quot;; if you have multiple conditions to branch off of, a switch is conventional (which is preferred over nested if statements).  A map is just a structure and you&#39;d still have to have some logic to pull the values out of it if you need.","body":"I don&#39;t see a way to do this &quot;better&quot;; if you have multiple conditions to branch off of, a switch is conventional (which is preferred over nested if statements).  A map is just a structure and you&#39;d still have to have some logic to pull the values out of it if you need."},{"owner":{"account_id":19571807,"reputation":133,"user_id":14322804,"display_name":"nuzooo"},"score":0,"creation_date":1672931998,"post_id":75020503,"comment_id":132388350,"body_markdown":"Thanks, even if Map, it will be two maps, one to compare the misssingField in map and the other map is to change the values of the expected..so no other way?","body":"Thanks, even if Map, it will be two maps, one to compare the misssingField in map and the other map is to change the values of the expected..so no other way?"}],"answers":[{"comments":[{"owner":{"account_id":19571807,"reputation":133,"user_id":14322804,"display_name":"nuzooo"},"score":0,"creation_date":1672934655,"post_id":75021152,"comment_id":132389418,"body_markdown":"and any other possiblities? not map, something else?","body":"and any other possiblities? not map, something else?"}],"tags":[],"owner":{"account_id":14718166,"reputation":26,"user_id":10629559,"display_name":"Mordano"},"comment_count":1,"down_vote_count":1,"up_vote_count":1,"is_accepted":true,"score":0,"last_activity_date":1672934119,"creation_date":1672934119,"answer_id":75021152,"question_id":75020503,"body_markdown":"A switch statement is the preferable approach in your described use case.\r\nEspecially with more than 3 different possible branches you should convert from multiple if statements to a switch statement. So you are already following this convention.\r\n\r\nA Map is only a different data structure. I don&#39;t see any benefits of using one in this use case.","title":"looking for option to change switch case to something else","body":"<p>A switch statement is the preferable approach in your described use case.\nEspecially with more than 3 different possible branches you should convert from multiple if statements to a switch statement. So you are already following this convention.</p>\n<p>A Map is only a different data structure. I don't see any benefits of using one in this use case.</p>\n"}],"owner":{"account_id":19571807,"reputation":133,"user_id":14322804,"display_name":"nuzooo"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":45,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"closed_date":1672940630,"accepted_answer_id":75021152,"answer_count":1,"score":-1,"last_activity_date":1672934119,"creation_date":1672931257,"question_id":75020503,"body_markdown":"I have piece of code that I want to change, I think I can do it better but I have no idea how.\r\nThe code should get an option and to do changes (two changes of the constants) according to the string (option) that he gets.\r\nhere is the actual code:\r\n\r\n        public static void setMissingField(String missingField) {\r\n        switch (missingField) {\r\n            case &quot;firstName&quot;:\r\n                expectedFirstName = &quot;&quot;;\r\n                break;\r\n            case &quot;lastName&quot;:\r\n                expectedLastname = &quot;&quot;;\r\n                expectedFirstName = &quot;test&quot;;\r\n                break;\r\n            case &quot;email&quot;:\r\n                expectedWorkEmail = &quot;&quot;;\r\n                expectedLastname = &quot;test&quot;;\r\n                break;\r\n            case &quot;shortEmail&quot;:\r\n                expectedWorkEmail = &quot;12@yes&quot;;\r\n                expectedLastname = &quot;test&quot;;\r\n                break;\r\n            case &quot;invalidEmail&quot;:\r\n                expectedWorkEmail = &quot;asb@@abc.com&quot;;\r\n                expectedLastname = &quot;test&quot;;\r\n                break;\r\n            case &quot;company&quot;:\r\n                expectedCompany = &quot;&quot;;\r\n                expectedWorkEmail = &quot;abd@thank.you&quot;;\r\n                break;\r\n            case &quot;password&quot;:\r\n                expectedPassword = &quot;&quot;;\r\n                expectedCompany = &quot;dontAsk&quot;;\r\n                break;\r\n            case &quot;shortPassword&quot;:\r\n                expectedPassword = &quot;12Aa@&quot;;\r\n                expectedCompany = &quot;dontAsk&quot;;\r\n                break;\r\n            case &quot;withoutLowerCasePassword&quot;:\r\n                expectedPassword = &quot;PASSWORD1@&quot;;\r\n                expectedCompany = &quot;dontAsk&quot;;\r\n                break;\r\n            case &quot;withoutUpperCasePassword&quot;:\r\n                expectedPassword = &quot;password1!&quot;;\r\n                expectedCompany = &quot;dontAsk&quot;;\r\n                break;\r\n            case &quot;withoutNumberPassword&quot;:\r\n                expectedPassword = &quot;Password!&quot;;\r\n                expectedCompany = &quot;dontAsk&quot;;\r\n                break;\r\n            case &quot;withoutSpecialCharacterPassword&quot;:\r\n                expectedPassword = &quot;Password1&quot;;\r\n                expectedCompany = &quot;dontAsk&quot;;\r\n                break;\r\n            case &quot;confirmationPassword&quot;:\r\n                expectedConfirmPassword = &quot;&quot;;\r\n                expectedPassword = &quot;Password1@&quot;;\r\n                break;\r\n        }\r\n    }\r\n\r\nit suppose to change the constants :\r\n\r\n    public static String expectedFirstName = &quot;test&quot;;\r\n    public static String expectedLastname = &quot;test&quot;;\r\n    public static String expectedWorkEmail = &quot;abd@thank.you&quot;;\r\n    public static String expectedCompany = &quot;dontAsk&quot;;\r\n    public static String expectedPassword = &quot;Password1@&quot;;\r\n    public static String expectedConfirmPassword = &quot;Password1@&quot;;\r\n\r\nI thought maybe to use Map but eventhough it will be if statments(on the options itself) and after it PUT on the key values, but that look for me the same, so any good idea?","title":"looking for option to change switch case to something else","body":"<p>I have piece of code that I want to change, I think I can do it better but I have no idea how.\nThe code should get an option and to do changes (two changes of the constants) according to the string (option) that he gets.\nhere is the actual code:</p>\n<pre><code>    public static void setMissingField(String missingField) {\n    switch (missingField) {\n        case &quot;firstName&quot;:\n            expectedFirstName = &quot;&quot;;\n            break;\n        case &quot;lastName&quot;:\n            expectedLastname = &quot;&quot;;\n            expectedFirstName = &quot;test&quot;;\n            break;\n        case &quot;email&quot;:\n            expectedWorkEmail = &quot;&quot;;\n            expectedLastname = &quot;test&quot;;\n            break;\n        case &quot;shortEmail&quot;:\n            expectedWorkEmail = &quot;12@yes&quot;;\n            expectedLastname = &quot;test&quot;;\n            break;\n        case &quot;invalidEmail&quot;:\n            expectedWorkEmail = &quot;asb@@abc.com&quot;;\n            expectedLastname = &quot;test&quot;;\n            break;\n        case &quot;company&quot;:\n            expectedCompany = &quot;&quot;;\n            expectedWorkEmail = &quot;abd@thank.you&quot;;\n            break;\n        case &quot;password&quot;:\n            expectedPassword = &quot;&quot;;\n            expectedCompany = &quot;dontAsk&quot;;\n            break;\n        case &quot;shortPassword&quot;:\n            expectedPassword = &quot;12Aa@&quot;;\n            expectedCompany = &quot;dontAsk&quot;;\n            break;\n        case &quot;withoutLowerCasePassword&quot;:\n            expectedPassword = &quot;PASSWORD1@&quot;;\n            expectedCompany = &quot;dontAsk&quot;;\n            break;\n        case &quot;withoutUpperCasePassword&quot;:\n            expectedPassword = &quot;password1!&quot;;\n            expectedCompany = &quot;dontAsk&quot;;\n            break;\n        case &quot;withoutNumberPassword&quot;:\n            expectedPassword = &quot;Password!&quot;;\n            expectedCompany = &quot;dontAsk&quot;;\n            break;\n        case &quot;withoutSpecialCharacterPassword&quot;:\n            expectedPassword = &quot;Password1&quot;;\n            expectedCompany = &quot;dontAsk&quot;;\n            break;\n        case &quot;confirmationPassword&quot;:\n            expectedConfirmPassword = &quot;&quot;;\n            expectedPassword = &quot;Password1@&quot;;\n            break;\n    }\n}\n</code></pre>\n<p>it suppose to change the constants :</p>\n<pre><code>public static String expectedFirstName = &quot;test&quot;;\npublic static String expectedLastname = &quot;test&quot;;\npublic static String expectedWorkEmail = &quot;abd@thank.you&quot;;\npublic static String expectedCompany = &quot;dontAsk&quot;;\npublic static String expectedPassword = &quot;Password1@&quot;;\npublic static String expectedConfirmPassword = &quot;Password1@&quot;;\n</code></pre>\n<p>I thought maybe to use Map but eventhough it will be if statments(on the options itself) and after it PUT on the key values, but that look for me the same, so any good idea?</p>\n"},{"tags":["java","apache-kafka","confluent-schema-registry"],"comments":[{"owner":{"account_id":5823420,"reputation":785,"user_id":6656833,"display_name":"Pavel"},"score":1,"creation_date":1672896331,"post_id":75013891,"comment_id":132377536,"body_markdown":"this was already asked here https://stackoverflow.com/questions/66280239/java-lang-classnotfoundexception-io-confluent-kafka-serializers-abstractkafkasc","body":"this was already asked here <a href=\"https://stackoverflow.com/questions/66280239/java-lang-classnotfoundexception-io-confluent-kafka-serializers-abstractkafkasc\" title=\"java lang classnotfoundexception io confluent kafka serializers abstractkafkasc\">stackoverflow.com/questions/66280239/&hellip;</a>"},{"owner":{"account_id":13832761,"reputation":97,"user_id":12073556,"display_name":"blinkbink"},"score":0,"creation_date":1672897408,"post_id":75013891,"comment_id":132377710,"body_markdown":"i have tried but not working","body":"i have tried but not working"},{"owner":{"account_id":2671330,"reputation":183386,"user_id":2308683,"accept_rate":90,"display_name":"OneCricketeer"},"score":0,"creation_date":1672933998,"post_id":75013891,"comment_id":132389153,"body_markdown":"Please use Maven/Gradle (as in your new question), not manual JAR files...","body":"Please use Maven/Gradle (as in your new question), not manual JAR files..."}],"owner":{"account_id":13832761,"reputation":97,"user_id":12073556,"display_name":"blinkbink"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":251,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1672934041,"creation_date":1672893537,"question_id":75013891,"body_markdown":"Have problem with Kafka, error \r\n\r\n&gt; 05-Jan-2023 11:19:47.532 SEVERE [http-nio-8080-exec-32] org.apache.catalina.core.StandardWrapperValve.invoke Servlet.service() for servlet [jpublish] in context with path [/DS] threw exception [Servlet execution threw an exception] with root cause java.lang.ClassNotFoundException:\r\n&gt; io.confluent.kafka.serializers.AbstractKafkaSchemaSerDe\r\n\r\n    Properties props = new Properties();\r\n\tprops.put(&quot;bootstrap.servers&quot;, url);\r\n\tprops.put(&quot;linger.ms&quot;, 1);\r\n\tprops.put(&quot;max.block.ms&quot;, 10000);\r\n\tprops.put(&quot;group.id&quot;, &quot;group&quot;);\r\n\tprops.put(ProducerConfig.KEY_SERIALIZER_CLASS_CONFIG, IntegerSerializer.class.getName());\r\n\tprops.put(ProducerConfig.VALUE_SERIALIZER_CLASS_CONFIG, KafkaJsonSchemaSerializer.class.getName());\r\n\tprops.put(KafkaJsonSchemaSerializerConfig.SCHEMA_REGISTRY_URL_CONFIG, &quot;http://localhost:8081&quot;);\r\n\t\r\n\tProducer&lt;String, Payment&gt; producer = new KafkaProducer&lt;String, Payment&gt;(props);\r\n    ProducerRecord&lt;String, Payment&gt; record = new ProducerRecord&lt;String, Payment&gt;(topic, uuid, message);\r\n\t\r\n\tproducer.send(record);\r\n\t\r\n\tproducer.close();\r\n\r\nlib kafka on project\r\n\r\n[![library][1]][1]\r\n\r\n\r\nclass `io.confluent.kafka.serializers.AbstractKafkaSchemaSerDe` i can import and no error\r\n\r\n[![import][2]][2]\r\n\r\n\r\nany suggest ?\r\n\r\nalready tried including `kafka-serde-tools` from [link][3], but not working \r\n\r\n\r\n  [1]: https://i.stack.imgur.com/XqGyI.png\r\n  [2]: https://i.stack.imgur.com/aNtgr.png\r\n  [3]: https://stackoverflow.com/questions/66280239/java-lang-classnotfoundexception-io-confluent-kafka-serializers-abstractkafkasc","title":"Kafka java.lang.ClassNotFoundException: io.confluent.kafka.serializers.AbstractKafkaSchemaSerDe","body":"<p>Have problem with Kafka, error</p>\n<blockquote>\n<p>05-Jan-2023 11:19:47.532 SEVERE [http-nio-8080-exec-32] org.apache.catalina.core.StandardWrapperValve.invoke Servlet.service() for servlet [jpublish] in context with path [/DS] threw exception [Servlet execution threw an exception] with root cause java.lang.ClassNotFoundException:\nio.confluent.kafka.serializers.AbstractKafkaSchemaSerDe</p>\n</blockquote>\n<pre><code>Properties props = new Properties();\nprops.put(&quot;bootstrap.servers&quot;, url);\nprops.put(&quot;linger.ms&quot;, 1);\nprops.put(&quot;max.block.ms&quot;, 10000);\nprops.put(&quot;group.id&quot;, &quot;group&quot;);\nprops.put(ProducerConfig.KEY_SERIALIZER_CLASS_CONFIG, IntegerSerializer.class.getName());\nprops.put(ProducerConfig.VALUE_SERIALIZER_CLASS_CONFIG, KafkaJsonSchemaSerializer.class.getName());\nprops.put(KafkaJsonSchemaSerializerConfig.SCHEMA_REGISTRY_URL_CONFIG, &quot;http://localhost:8081&quot;);\n\nProducer&lt;String, Payment&gt; producer = new KafkaProducer&lt;String, Payment&gt;(props);\nProducerRecord&lt;String, Payment&gt; record = new ProducerRecord&lt;String, Payment&gt;(topic, uuid, message);\n\nproducer.send(record);\n\nproducer.close();\n</code></pre>\n<p>lib kafka on project</p>\n<p><a href=\"https://i.stack.imgur.com/XqGyI.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/XqGyI.png\" alt=\"library\" /></a></p>\n<p>class <code>io.confluent.kafka.serializers.AbstractKafkaSchemaSerDe</code> i can import and no error</p>\n<p><a href=\"https://i.stack.imgur.com/aNtgr.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/aNtgr.png\" alt=\"import\" /></a></p>\n<p>any suggest ?</p>\n<p>already tried including <code>kafka-serde-tools</code> from <a href=\"https://stackoverflow.com/questions/66280239/java-lang-classnotfoundexception-io-confluent-kafka-serializers-abstractkafkasc\">link</a>, but not working</p>\n"},{"tags":["java","object","export"],"owner":{"account_id":19704757,"reputation":115,"user_id":14469369,"display_name":"Jos&#233; Pedro Ferreira"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":8,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1672933689,"creation_date":1672933689,"question_id":75021045,"body_markdown":"I have exported an ArrayList of instances of class defined by myself, and I need to read in another project. I don&#39;t intend to use the methods of that class in particular, only to use its atributes.\r\n\r\nI could transform those atribuites into ArrayList of primitive objects, that I could read afterwards without the need of having that class implemented again in that project, but I&#39;m specifically asked not to do so. Is there a way to get only the atributes of such class?\r\n\r\n\r\n","title":"Read previously exported object with a non primitive class associated","body":"<p>I have exported an ArrayList of instances of class defined by myself, and I need to read in another project. I don't intend to use the methods of that class in particular, only to use its atributes.</p>\n<p>I could transform those atribuites into ArrayList of primitive objects, that I could read afterwards without the need of having that class implemented again in that project, but I'm specifically asked not to do so. Is there a way to get only the atributes of such class?</p>\n"},{"tags":["java","spring","spring-integration","spring-integration-sftp"],"answers":[{"comments":[{"owner":{"account_id":2654907,"reputation":440,"user_id":2295807,"accept_rate":76,"display_name":"kacpr"},"score":0,"creation_date":1671210183,"post_id":74826498,"comment_id":132057468,"body_markdown":"Ok, based on your answer I updated my question: removed the other consumer - the @ServiceActivator so it doesn&#39;t compete. Updated the @InboundChannelAdapter with an @EndpointId and a name - I have not used that annotation before but I am assuming that it causes an endpoint to be generated, in this case `SourcePollingChannelAdapter`. But then, when I autowire it Spring can&#39;t find a bean with this name. I&#39;ve also tried finding it using context.getBean(class), but ended with the same result. Does SourcePollingChannelAdapter need to be explicitly created as a @Bean?","body":"Ok, based on your answer I updated my question: removed the other consumer - the @ServiceActivator so it doesn&#39;t compete. Updated the @InboundChannelAdapter with an @EndpointId and a name - I have not used that annotation before but I am assuming that it causes an endpoint to be generated, in this case <code>SourcePollingChannelAdapter</code>. But then, when I autowire it Spring can&#39;t find a bean with this name. I&#39;ve also tried finding it using context.getBean(class), but ended with the same result. Does SourcePollingChannelAdapter need to be explicitly created as a @Bean?"},{"owner":{"account_id":3273937,"reputation":114870,"user_id":2756547,"accept_rate":75,"display_name":"Artem Bilan"},"score":0,"creation_date":1671212182,"post_id":74826498,"comment_id":132058024,"body_markdown":"No. Exactly an `@InboundChannelAdapter` is a trigger to create a `SourcePollingChannelAdapter` on the `MessageSource` bean. See docs: https://docs.spring.io/spring-integration/docs/current/reference/html/configuration.html#using-the-inboundchanneladapter-annotation. Since you cannot find any `SourcePollingChannelAdapter`, it only may mean that you don&#39;t have an `@EnableIntegration` on some of your `@Configuration` class. Still no answer from your what is `testSftpSessionFactory` though...","body":"No. Exactly an <code>@InboundChannelAdapter</code> is a trigger to create a <code>SourcePollingChannelAdapter</code> on the <code>MessageSource</code> bean. See docs: <a href=\"https://docs.spring.io/spring-integration/docs/current/reference/html/configuration.html#using-the-inboundchanneladapter-annotation\" rel=\"nofollow noreferrer\">docs.spring.io/spring-integration/docs/current/reference/htm&zwnj;&#8203;l/&hellip;</a>. Since you cannot find any <code>SourcePollingChannelAdapter</code>, it only may mean that you don&#39;t have an <code>@EnableIntegration</code> on some of your <code>@Configuration</code> class. Still no answer from your what is <code>testSftpSessionFactory</code> though..."},{"owner":{"account_id":2654907,"reputation":440,"user_id":2295807,"accept_rate":76,"display_name":"kacpr"},"score":0,"creation_date":1672933815,"post_id":74826498,"comment_id":132389093,"body_markdown":"The `testSftpSessionFactory` is a bean that the name suggests, sorry I made a mistake in my question by trying to make it more concise (in real code I have a method `getSftpSessionFactory` AND a bean `testSftpSessionFactory` which calls that method). I improved the example in the question.","body":"The <code>testSftpSessionFactory</code> is a bean that the name suggests, sorry I made a mistake in my question by trying to make it more concise (in real code I have a method <code>getSftpSessionFactory</code> AND a bean <code>testSftpSessionFactory</code> which calls that method). I improved the example in the question."},{"owner":{"account_id":2654907,"reputation":440,"user_id":2295807,"accept_rate":76,"display_name":"kacpr"},"score":0,"creation_date":1672933856,"post_id":74826498,"comment_id":132389102,"body_markdown":"And it was a missing annotation that was the problem (after making changes that you suggested in your answer)","body":"And it was a missing annotation that was the problem (after making changes that you suggested in your answer)"}],"tags":[],"owner":{"account_id":3273937,"reputation":114870,"user_id":2756547,"accept_rate":75,"display_name":"Artem Bilan"},"comment_count":4,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1671204447,"creation_date":1671204447,"answer_id":74826498,"question_id":74817913,"body_markdown":"First of all it is wrong to rewrite your code to satisfy unit test expectations. We spend not one hour thinking about dividing concerns from production code to testing. \r\nSee respective documentation: https://docs.spring.io/spring-integration/docs/current/reference/html/testing.html#test-context.\r\n\r\nFor your use-case it might be better to do a mock on that `@ServiceActivator` instead of `QueueChannel` and competing consumer in your test. What I mean that you already have a consumer in your configuration with that `@ServiceActivator`. So, there is no guarantee that your manual `sftpChannel.receive()` would give you a message from the queue since this one could be consumed by your `@ServiceActivator`  subscriber.\r\n\r\nThe `fixedDelay = &quot;0&quot;` looks suspicious. Isn&#39;t that too often to ask SFTP server for new files? How do you expect your system would be stable enough if you give it so much stress with such a short delay?\r\n\r\nWe don&#39;t know what is `withSftpServer(server -&gt; {`, and it is also not clear what is `testSftpSessionFactory`. So, not sure yet how you start an SFTP server and connect to it from your code.\r\n\r\nI also see `sftpMessageSource.start();`, but there is nowhere in your that it is stopped somehow. Plus I guess you really meant to start an `endpoint`, not `source`. The endpoint in your case is a `SourcePollingChannelAdapter` created for that `@InboundChannelAdapter`. You can use an `@EndpointId`, if it is not autowired automatically by type. \r\n\r\nIn our tests we use Apache MINA SSH library: https://github.com/spring-projects/spring-integration/blob/main/spring-integration-sftp/src/test/java/org/springframework/integration/sftp/SftpTestSupport.java#L64-L76","title":"How to trigger SFTP inbound channel in test","body":"<p>First of all it is wrong to rewrite your code to satisfy unit test expectations. We spend not one hour thinking about dividing concerns from production code to testing.\nSee respective documentation: <a href=\"https://docs.spring.io/spring-integration/docs/current/reference/html/testing.html#test-context\" rel=\"nofollow noreferrer\">https://docs.spring.io/spring-integration/docs/current/reference/html/testing.html#test-context</a>.</p>\n<p>For your use-case it might be better to do a mock on that <code>@ServiceActivator</code> instead of <code>QueueChannel</code> and competing consumer in your test. What I mean that you already have a consumer in your configuration with that <code>@ServiceActivator</code>. So, there is no guarantee that your manual <code>sftpChannel.receive()</code> would give you a message from the queue since this one could be consumed by your <code>@ServiceActivator</code>  subscriber.</p>\n<p>The <code>fixedDelay = &quot;0&quot;</code> looks suspicious. Isn't that too often to ask SFTP server for new files? How do you expect your system would be stable enough if you give it so much stress with such a short delay?</p>\n<p>We don't know what is <code>withSftpServer(server -&gt; {</code>, and it is also not clear what is <code>testSftpSessionFactory</code>. So, not sure yet how you start an SFTP server and connect to it from your code.</p>\n<p>I also see <code>sftpMessageSource.start();</code>, but there is nowhere in your that it is stopped somehow. Plus I guess you really meant to start an <code>endpoint</code>, not <code>source</code>. The endpoint in your case is a <code>SourcePollingChannelAdapter</code> created for that <code>@InboundChannelAdapter</code>. You can use an <code>@EndpointId</code>, if it is not autowired automatically by type.</p>\n<p>In our tests we use Apache MINA SSH library: <a href=\"https://github.com/spring-projects/spring-integration/blob/main/spring-integration-sftp/src/test/java/org/springframework/integration/sftp/SftpTestSupport.java#L64-L76\" rel=\"nofollow noreferrer\">https://github.com/spring-projects/spring-integration/blob/main/spring-integration-sftp/src/test/java/org/springframework/integration/sftp/SftpTestSupport.java#L64-L76</a></p>\n"}],"owner":{"account_id":2654907,"reputation":440,"user_id":2295807,"accept_rate":76,"display_name":"kacpr"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":227,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":74826498,"answer_count":1,"score":0,"last_activity_date":1672933629,"creation_date":1671140704,"question_id":74817913,"body_markdown":"I have found out that an IntegrationFlow I have written using Java DSL wasn&#39;t very testable so I have followed [Configuring with Java Configuration][1] and split it into @Bean configuration.\r\nIn my unit test I have used a 3rd party SFTP in memory server and I tried triggering InboundChannelAdaper and then calling `receive()` on the channel. \r\nI had a problem with finding out the type of Channel to use, as Channel usage was not mentioned anywhere in the SFTP Adapters documentation, but ultimately I found what I think is correct (QueueChannel) in the testing examples [repository ][2].\r\nMy problem is that the unit test I wrote is hanging on the channel&#39;s `receive()` method. Through debugging I determined that session factory&#39;s `getSession()` never gets called. \r\nWhat am I doing wrong?\r\n\r\n````java\r\n    @Bean\r\n    public PollableChannel sftpChannel() {\r\n        return new QueueChannel();\r\n    }\r\n\r\n    @Bean\r\n    @EndpointId(&quot;sftpInboundAdapter&quot;)\r\n    @InboundChannelAdapter(channel = &quot;sftpChannel&quot;, poller = @Poller(fixedDelay = &quot;1000&quot;))\r\n    public SftpInboundFileSynchronizingMessageSource sftpMessageSource() {\r\n        SftpInboundFileSynchronizingMessageSource source =\r\n                new SftpInboundFileSynchronizingMessageSource(sftpInboundFileSynchronizer);\r\n        source.setLocalDirectory(new File(&quot;/local&quot;));\r\n        source.setAutoCreateLocalDirectory(true);\r\n        source.setLocalFilter(new AcceptOnceFileListFilter&lt;File&gt;());\r\n        source.setMaxFetchSize(6);\r\n        return source;\r\n    }\r\n\r\n    @Bean\r\n    public SftpInboundFileSynchronizer sftpInboundFileSynchronizer() {\r\n        SftpInboundFileSynchronizer fileSynchronizer = new SftpInboundFileSynchronizer(testSftpSessionFactory);\r\n        fileSynchronizer.setDeleteRemoteFiles(false);\r\n        fileSynchronizer.setPreserveTimestamp(true);\r\n        fileSynchronizer.setRemoteDirectory(&quot;/remote&quot;);\r\n        List&lt;String&gt; filterFileNameList = List.of(&quot;1.txt&quot;);\r\n        fileSynchronizer.setFilter(new FilenameListFilter(filterFileNameList));\r\n\r\n        return fileSynchronizer;\r\n    }\r\n\r\n    @Bean\r\n    private DefaultSftpSessionFactory testSftpSessionFactory(String username, String password, int port, String host) {\r\n        DefaultSftpSessionFactory defaultSftpSessionFactory = new DefaultSftpSessionFactory();\r\n        defaultSftpSessionFactory.setPassword(&quot;password&quot;);\r\n        defaultSftpSessionFactory.setUser(&quot;username&quot;);\r\n        defaultSftpSessionFactory.setHost(&quot;localhost&quot;);\r\n        defaultSftpSessionFactory.setPort(777);\r\n        defaultSftpSessionFactory.setAllowUnknownKeys(true);\r\n\r\n        Properties config = new java.util.Properties();\r\n        config.put( &quot;StrictHostKeyChecking&quot;, &quot;no&quot; );\r\n        defaultSftpSessionFactory.setSessionConfig(config);\r\n\r\n        return defaultSftpSessionFactory;\r\n    }\r\n\r\n````\r\n\r\n````java\r\n@ExtendWith(SpringExtension.class)\r\n@ContextConfiguration(classes = {IntegrationFlowTestSupport.class, Synchronizer.class, Channel.class, Activator.class})\r\npublic class IntegrationFlowConfigTest {\r\n\r\n    private static final String CONTENTS = &quot;abcdef 1234567890&quot;;\r\n\r\n    @Autowired\r\n    PollableChannel sftpChannel;\r\n\r\n    @Autowired\r\n    DefaultSftpSessionFactory testSftpSessionFactory;\r\n\r\n    @Autowired\r\n    SftpInboundFileSynchronizer sftpInboundFileSynchronizer;\r\n\r\n    @Autowired\r\n    SftpInboundFileSynchronizingMessageSource sftpMessageSource;\r\n\r\n    @Autowired\r\n    SourcePollingChannelAdapter sftpInboundAdapter;\r\n\r\n    @Test\r\n    public void test() throws Exception {\r\n        FileEntry f1 = new FileEntry(&quot;/remote/1.txt&quot;, CONTENTS);\r\n        FileEntry f2 = new FileEntry(&quot;/remote/2.txt&quot;, CONTENTS);\r\n        FileEntry f3 = new FileEntry(&quot;/remote/3.txt&quot;, CONTENTS);\r\n\r\n        withSftpServer(server -&gt; {\r\n            server.setPort(777);\r\n            server.addUser(&quot;username&quot;, &quot;password&quot;);\r\n\r\n            server.putFile(f1.getPath(), f1.createInputStream());\r\n            server.putFile(f2.getPath(), f2.createInputStream());\r\n\r\n            sftpInboundAdapter.start();\r\n            Message&lt;?&gt; message = sftpChannel.receive();\r\n        });\r\n    }\r\n}\r\n````\r\n\r\n\r\n  [1]: https://docs.spring.io/spring-integration/reference/html/sftp.html#sftp-streaming-java-config\r\n  [2]: https://github.com/spring-projects/spring-integration-samples/blob/main/basic/sftp/src/test/java/org/springframework/integration/samples/sftp/SftpInboundReceiveSample.java","title":"How to trigger SFTP inbound channel in test","body":"<p>I have found out that an IntegrationFlow I have written using Java DSL wasn't very testable so I have followed <a href=\"https://docs.spring.io/spring-integration/reference/html/sftp.html#sftp-streaming-java-config\" rel=\"nofollow noreferrer\">Configuring with Java Configuration</a> and split it into @Bean configuration.\nIn my unit test I have used a 3rd party SFTP in memory server and I tried triggering InboundChannelAdaper and then calling <code>receive()</code> on the channel.\nI had a problem with finding out the type of Channel to use, as Channel usage was not mentioned anywhere in the SFTP Adapters documentation, but ultimately I found what I think is correct (QueueChannel) in the testing examples <a href=\"https://github.com/spring-projects/spring-integration-samples/blob/main/basic/sftp/src/test/java/org/springframework/integration/samples/sftp/SftpInboundReceiveSample.java\" rel=\"nofollow noreferrer\">repository </a>.\nMy problem is that the unit test I wrote is hanging on the channel's <code>receive()</code> method. Through debugging I determined that session factory's <code>getSession()</code> never gets called.\nWhat am I doing wrong?</p>\n<pre class=\"lang-java prettyprint-override\"><code>    @Bean\n    public PollableChannel sftpChannel() {\n        return new QueueChannel();\n    }\n\n    @Bean\n    @EndpointId(&quot;sftpInboundAdapter&quot;)\n    @InboundChannelAdapter(channel = &quot;sftpChannel&quot;, poller = @Poller(fixedDelay = &quot;1000&quot;))\n    public SftpInboundFileSynchronizingMessageSource sftpMessageSource() {\n        SftpInboundFileSynchronizingMessageSource source =\n                new SftpInboundFileSynchronizingMessageSource(sftpInboundFileSynchronizer);\n        source.setLocalDirectory(new File(&quot;/local&quot;));\n        source.setAutoCreateLocalDirectory(true);\n        source.setLocalFilter(new AcceptOnceFileListFilter&lt;File&gt;());\n        source.setMaxFetchSize(6);\n        return source;\n    }\n\n    @Bean\n    public SftpInboundFileSynchronizer sftpInboundFileSynchronizer() {\n        SftpInboundFileSynchronizer fileSynchronizer = new SftpInboundFileSynchronizer(testSftpSessionFactory);\n        fileSynchronizer.setDeleteRemoteFiles(false);\n        fileSynchronizer.setPreserveTimestamp(true);\n        fileSynchronizer.setRemoteDirectory(&quot;/remote&quot;);\n        List&lt;String&gt; filterFileNameList = List.of(&quot;1.txt&quot;);\n        fileSynchronizer.setFilter(new FilenameListFilter(filterFileNameList));\n\n        return fileSynchronizer;\n    }\n\n    @Bean\n    private DefaultSftpSessionFactory testSftpSessionFactory(String username, String password, int port, String host) {\n        DefaultSftpSessionFactory defaultSftpSessionFactory = new DefaultSftpSessionFactory();\n        defaultSftpSessionFactory.setPassword(&quot;password&quot;);\n        defaultSftpSessionFactory.setUser(&quot;username&quot;);\n        defaultSftpSessionFactory.setHost(&quot;localhost&quot;);\n        defaultSftpSessionFactory.setPort(777);\n        defaultSftpSessionFactory.setAllowUnknownKeys(true);\n\n        Properties config = new java.util.Properties();\n        config.put( &quot;StrictHostKeyChecking&quot;, &quot;no&quot; );\n        defaultSftpSessionFactory.setSessionConfig(config);\n\n        return defaultSftpSessionFactory;\n    }\n\n</code></pre>\n<pre class=\"lang-java prettyprint-override\"><code>@ExtendWith(SpringExtension.class)\n@ContextConfiguration(classes = {IntegrationFlowTestSupport.class, Synchronizer.class, Channel.class, Activator.class})\npublic class IntegrationFlowConfigTest {\n\n    private static final String CONTENTS = &quot;abcdef 1234567890&quot;;\n\n    @Autowired\n    PollableChannel sftpChannel;\n\n    @Autowired\n    DefaultSftpSessionFactory testSftpSessionFactory;\n\n    @Autowired\n    SftpInboundFileSynchronizer sftpInboundFileSynchronizer;\n\n    @Autowired\n    SftpInboundFileSynchronizingMessageSource sftpMessageSource;\n\n    @Autowired\n    SourcePollingChannelAdapter sftpInboundAdapter;\n\n    @Test\n    public void test() throws Exception {\n        FileEntry f1 = new FileEntry(&quot;/remote/1.txt&quot;, CONTENTS);\n        FileEntry f2 = new FileEntry(&quot;/remote/2.txt&quot;, CONTENTS);\n        FileEntry f3 = new FileEntry(&quot;/remote/3.txt&quot;, CONTENTS);\n\n        withSftpServer(server -&gt; {\n            server.setPort(777);\n            server.addUser(&quot;username&quot;, &quot;password&quot;);\n\n            server.putFile(f1.getPath(), f1.createInputStream());\n            server.putFile(f2.getPath(), f2.createInputStream());\n\n            sftpInboundAdapter.start();\n            Message&lt;?&gt; message = sftpChannel.receive();\n        });\n    }\n}\n</code></pre>\n"},{"tags":["java","spring","api","rest"],"owner":{"account_id":5084916,"reputation":303,"user_id":4079977,"accept_rate":50,"display_name":"MishraJi"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":39,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1672933592,"creation_date":1672933592,"question_id":75021022,"body_markdown":"I have created an API at my backend server side code, suppose a request comes from browser and it got timeout because `identityService` took more than expected time. Since, client has already received `SocketTimeoutException` so there is no benefit to call `hrService` and `accountService` because client/browser is not going to get the response as TCP connection is already closed.\r\n\r\nIs there a way or line of code I can write between `identityService` and `hrService` API call (and other places too) where if Client connection is already closed, my code should also stop executing next line of code. \r\nIn above example, the thread should break before `hrService` and `accountService` API call since connection is already closed.\r\n\r\n```\r\n////Controller class\r\n@RestController\r\n@RequestMapping(path = &quot;/employee&quot;)\r\npublic class EmployeeController {\r\n\r\n    @Autowired\r\n    private EmployeeService employeeService;\r\n\r\n    @GetMapping(path = &quot;/detail/{employeeId}&quot;)\r\n    public ResponseEntity&lt;EmployeeDetailResponse&gt; employeeDetail(@PathVariable(&quot;employeeId&quot;) Long employeeId)  {\r\n        return new ResponseEntity(employeeService.getEmployeeDetail(employeeId), HttpStatus.OK);\r\n    }\r\n}\r\n\r\n\r\n//// Service class \r\n@Service\r\npublic class EmployeeServiceImpl implements EmployeeService {\r\n\r\n    @Autowired\r\n    private EmployeeRepository employeeRepository;\r\n    \r\n    @Autowired\r\n    private IdentityService identityService;\r\n \r\n    @Autowired\r\n    private HRService hrService;\r\n    \r\n    @Autowired\r\n    private AccountService accountService;\r\n\r\n    @Transactional\r\n    public EmployeeDetailResponse getEmployeeDetail(Long employeeId) {\r\n        Employee employee = employeeRepository.findById(employeeId);\r\n\r\n        //Call API-1 identityService to get Address and phone details\r\n        IdentityDetail identityDetail = identityService.getIdentity(employeeId);\r\n\r\n        //Call  API-2 hrService to get employement Details\r\n        EmplyementDetail employementDetail = hrService.getEmployementDetail(employeeId);\r\n\r\n        //Call API-3 accountService to get Salary details\r\n        AccountDetail accountDetail = accountService.getAccountDetail(employeeId);\r\n\r\n        return mergeResponses(employee,identityDetail,employementDetail,accountDetail)\r\n    }\r\n}\r\n```\r\n\r\nAppriciate your help.","title":"Interrupt operation if client connection is already closed or client has received SocketTimeoutException","body":"<p>I have created an API at my backend server side code, suppose a request comes from browser and it got timeout because <code>identityService</code> took more than expected time. Since, client has already received <code>SocketTimeoutException</code> so there is no benefit to call <code>hrService</code> and <code>accountService</code> because client/browser is not going to get the response as TCP connection is already closed.</p>\n<p>Is there a way or line of code I can write between <code>identityService</code> and <code>hrService</code> API call (and other places too) where if Client connection is already closed, my code should also stop executing next line of code.\nIn above example, the thread should break before <code>hrService</code> and <code>accountService</code> API call since connection is already closed.</p>\n<pre><code>////Controller class\n@RestController\n@RequestMapping(path = &quot;/employee&quot;)\npublic class EmployeeController {\n\n    @Autowired\n    private EmployeeService employeeService;\n\n    @GetMapping(path = &quot;/detail/{employeeId}&quot;)\n    public ResponseEntity&lt;EmployeeDetailResponse&gt; employeeDetail(@PathVariable(&quot;employeeId&quot;) Long employeeId)  {\n        return new ResponseEntity(employeeService.getEmployeeDetail(employeeId), HttpStatus.OK);\n    }\n}\n\n\n//// Service class \n@Service\npublic class EmployeeServiceImpl implements EmployeeService {\n\n    @Autowired\n    private EmployeeRepository employeeRepository;\n    \n    @Autowired\n    private IdentityService identityService;\n \n    @Autowired\n    private HRService hrService;\n    \n    @Autowired\n    private AccountService accountService;\n\n    @Transactional\n    public EmployeeDetailResponse getEmployeeDetail(Long employeeId) {\n        Employee employee = employeeRepository.findById(employeeId);\n\n        //Call API-1 identityService to get Address and phone details\n        IdentityDetail identityDetail = identityService.getIdentity(employeeId);\n\n        //Call  API-2 hrService to get employement Details\n        EmplyementDetail employementDetail = hrService.getEmployementDetail(employeeId);\n\n        //Call API-3 accountService to get Salary details\n        AccountDetail accountDetail = accountService.getAccountDetail(employeeId);\n\n        return mergeResponses(employee,identityDetail,employementDetail,accountDetail)\n    }\n}\n</code></pre>\n<p>Appriciate your help.</p>\n"},{"tags":["java","mysql","spring-data-jpa"],"owner":{"account_id":5459451,"reputation":252,"user_id":4341998,"accept_rate":56,"display_name":"Sandeep Choudhary"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":36,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1672933459,"creation_date":1672933459,"question_id":75020994,"body_markdown":"My scenario is I have different vendors who will be generating invoices. The series must be maintained for all in incremental order as follows\r\n\r\nVEN1-2223-0001\r\nVEN1-2223-0002\r\nVEN2-2223-0001\r\nVEN1-2223-0003\r\nVEN2-2223-0002\r\n\r\nwhere &quot;VEN1&quot; is a vendor code, 2223 is as per financial year and 0001 is series. I am able to prefix VEN1 using custom generator as follows\r\n\r\n \r\n\r\n    @Id\r\n        @GeneratedValue(strategy = GenerationType.SEQUENCE, generator = &quot;test_seq&quot;)\r\n        @GenericGenerator(name = &quot;test_seq&quot;, strategy = &quot;VendorDealerCodePrefixedSequenceIdGenerator&quot;,\r\n                parameters = {\r\n                        @org.hibernate.annotations.Parameter(name = VendorCodePrefixedSequenceIdGenerator.INCREMENT_PARAM, value = &quot;50&quot;),\r\n                        @org.hibernate.annotations.Parameter(name = VendorCodePrefixedSequenceIdGenerator.CODE_NUMBER_SEPARATOR_PARAMETER, value = &quot;_&quot;),\r\n                        @org.hibernate.annotations.Parameter(name = VendorCodePrefixedSequenceIdGenerator.NUMBER_FORMAT_PARAMETER, value = &quot;%05d&quot;) })\r\n        private String testId;\r\n\r\nand \r\n\r\n    public class VendorCodePrefixedSequenceIdGenerator extends SequenceStyleGenerator {\r\n    \r\n        public static final String CODE_NUMBER_SEPARATOR_PARAMETER = &quot;codeNumberSeparator&quot;;\r\n        public static final String CODE_NUMBER_SEPARATOR_DEFAULT = &quot;-&quot;;\r\n    \r\n        public static final String NUMBER_FORMAT_PARAMETER = &quot;numberFormat&quot;;\r\n        public static final String NUMBER_FORMAT_DEFAULT = &quot;%05d&quot;;\r\n    \r\n        private String numberFormat;\r\n    \r\n        @Override\r\n        public Serializable generate(SharedSessionContractImplementor session, Object object) throws HibernateException {\r\n            return String.format(&quot;%s-&quot;, ((Test) object).getDealer().getDealerCode()) + String.format(numberFormat,\r\n                    super.generate(session, object));\r\n        }\r\n    \r\n        @Override\r\n        public void configure(Type type, Properties params, ServiceRegistry serviceRegistry) throws MappingException {\r\n            super.configure(LongType.INSTANCE, params, serviceRegistry);\r\n            numberFormat = ConfigurationHelper.getString(NUMBER_FORMAT_PARAMETER,\r\n                    params, NUMBER_FORMAT_DEFAULT);\r\n        }\r\n    }\r\n\r\nthe year part is not there but that can be done on similar basis. Now I&#39;m struggling for \r\n1. how to reset series every financial year.\r\n2. how to maintain different series for different vendors.","title":"How to generate different invoice series for different vendors in MySQL and Spring JPA alongwith Vendor Code and Year Prefixed","body":"<p>My scenario is I have different vendors who will be generating invoices. The series must be maintained for all in incremental order as follows</p>\n<p>VEN1-2223-0001\nVEN1-2223-0002\nVEN2-2223-0001\nVEN1-2223-0003\nVEN2-2223-0002</p>\n<p>where &quot;VEN1&quot; is a vendor code, 2223 is as per financial year and 0001 is series. I am able to prefix VEN1 using custom generator as follows</p>\n<pre><code>@Id\n    @GeneratedValue(strategy = GenerationType.SEQUENCE, generator = &quot;test_seq&quot;)\n    @GenericGenerator(name = &quot;test_seq&quot;, strategy = &quot;VendorDealerCodePrefixedSequenceIdGenerator&quot;,\n            parameters = {\n                    @org.hibernate.annotations.Parameter(name = VendorCodePrefixedSequenceIdGenerator.INCREMENT_PARAM, value = &quot;50&quot;),\n                    @org.hibernate.annotations.Parameter(name = VendorCodePrefixedSequenceIdGenerator.CODE_NUMBER_SEPARATOR_PARAMETER, value = &quot;_&quot;),\n                    @org.hibernate.annotations.Parameter(name = VendorCodePrefixedSequenceIdGenerator.NUMBER_FORMAT_PARAMETER, value = &quot;%05d&quot;) })\n    private String testId;\n</code></pre>\n<p>and</p>\n<pre><code>public class VendorCodePrefixedSequenceIdGenerator extends SequenceStyleGenerator {\n\n    public static final String CODE_NUMBER_SEPARATOR_PARAMETER = &quot;codeNumberSeparator&quot;;\n    public static final String CODE_NUMBER_SEPARATOR_DEFAULT = &quot;-&quot;;\n\n    public static final String NUMBER_FORMAT_PARAMETER = &quot;numberFormat&quot;;\n    public static final String NUMBER_FORMAT_DEFAULT = &quot;%05d&quot;;\n\n    private String numberFormat;\n\n    @Override\n    public Serializable generate(SharedSessionContractImplementor session, Object object) throws HibernateException {\n        return String.format(&quot;%s-&quot;, ((Test) object).getDealer().getDealerCode()) + String.format(numberFormat,\n                super.generate(session, object));\n    }\n\n    @Override\n    public void configure(Type type, Properties params, ServiceRegistry serviceRegistry) throws MappingException {\n        super.configure(LongType.INSTANCE, params, serviceRegistry);\n        numberFormat = ConfigurationHelper.getString(NUMBER_FORMAT_PARAMETER,\n                params, NUMBER_FORMAT_DEFAULT);\n    }\n}\n</code></pre>\n<p>the year part is not there but that can be done on similar basis. Now I'm struggling for</p>\n<ol>\n<li>how to reset series every financial year.</li>\n<li>how to maintain different series for different vendors.</li>\n</ol>\n"},{"tags":["java","mysql"],"comments":[{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1672933135,"post_id":75020897,"comment_id":132388825,"body_markdown":"Please trim your code to make it easier to find your problem. Follow these guidelines to create a [minimal reproducible example](https://stackoverflow.com/help/minimal-reproducible-example).","body":"Please trim your code to make it easier to find your problem. Follow these guidelines to create a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>."}],"owner":{"account_id":27443716,"reputation":1,"user_id":20937918,"display_name":"Joao Castilhos"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":27,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1672933112,"creation_date":1672933004,"question_id":75020897,"body_markdown":"I&#39;m new in Java programming so that&#39;s why I&#39;m here seeking your kind help stackoverflowers.\r\n\r\nI have this problem which I could not find the solution on internet, I hope someone could inform me where is my mistake and how can I fix it.\r\n\r\nMy problem is that when I try to insert the data, everything goes fine, the window opens, I can insert the data, button looks just fine.\r\n\r\nBut it gives me this message \r\n\r\njava.sql.SQLIntegrityConstraintViolationException: Column &#39;prenom&#39; cannot be null\r\n\r\nWhich I assume was a problem with php mySQL, then I changed all variables to NULL, activating the button &quot;Null&quot; for all of them.\r\n\r\nIt then WORKED, but all informations were saved as &quot;null&quot; in my database, which didn&#39;t really solve my problem.\r\n\r\nMy goal is to insert data (name, lastname, phone, email) into a data base (php mySQL) through eclipse. I did a program which I&#39;m obliged to use window builder to insert that data, so graphical user interface MUST be used \r\n\r\nWhat I expect to happen is to save data normally. Like, name = Mike, lastname = Tyson, phone = +55555, email = mtyson@gmail.com\r\nAnd it shows in my database, not null message.\r\n\r\nThank you everyone\r\n\r\n\r\n\r\n\r\n```\r\npackage interfaceGraphique;\r\n\r\n\r\nimport accesBaseDeDonnees.ClientsBDD;\r\nimport entites.Clients;\r\n\r\nimport java.awt.EventQueue;\r\n\r\nimport javax.swing.JFrame;\r\nimport javax.swing.JPanel;\r\nimport javax.swing.border.EmptyBorder;\r\nimport javax.swing.AbstractButton;\r\nimport javax.swing.JButton;\r\nimport java.awt.event.ActionListener;\r\nimport java.sql.Connection;\r\nimport java.awt.event.ActionEvent;\r\nimport javax.swing.JTextField;\r\nimport javax.swing.JLabel;\r\nimport java.awt.Color;\r\n\r\npublic class InterfaceClients extends JFrame {\r\n\r\n\tstatic InterfaceClients window;\r\n\t\r\n\tprivate JPanel contentPane;\r\n\tprivate JTextField txtPrenom;\r\n\tprivate JTextField txtNom;\r\n\tprivate JTextField txtTelephone;\r\n\tprivate JTextField txtEmail;\r\n\r\n\t/**\r\n\t * Launch the application.\r\n\t */\r\n\tpublic static void main(String[] args) {\r\n\t\tEventQueue.invokeLater(new Runnable() {\r\n\t\t\tpublic void run() {\r\n\t\t\t\ttry {\r\n\t\t\t\t\tInterfaceClients frame = new InterfaceClients();\r\n\t\t\t\t\tframe.setVisible(true);\r\n\t\t\t\t} catch (Exception e) {\r\n\t\t\t\t\te.printStackTrace();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\t/**\r\n\t * Create the frame.\r\n\t */\r\n\tpublic InterfaceClients() {\r\n\t\tsetBackground(new Color(0, 0, 0));\r\n\t\tsetOpacity(1.0f);\r\n\t\tsetTitle(&quot;Ajouter un client&quot;);\r\n\t\t\r\n\t\t\r\n\t\tsetDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);\r\n\t\tsetBounds(100, 100, 450, 300);\r\n\t\tcontentPane = new JPanel();\r\n\t\tcontentPane.setBorder(new EmptyBorder(5, 5, 5, 5));\r\n\r\n\t\tsetContentPane(contentPane);\r\n\t\tcontentPane.setLayout(null);\r\n\t\t\r\n\t\tJButton btnNewButton = new JButton(&quot;Enregistrer&quot;);\r\n\t\tbtnNewButton.addActionListener(new ActionListener() {\r\n\t\t\tprivate AbstractButton labelResult;\r\n\t\t\t\r\n\t\t\t@Override\r\n\t\t\tpublic void actionPerformed(ActionEvent e) {\r\n\t\t\t\tString prenom = txtPrenom.getText();\r\n\t\t\t\tString nom = txtNom.getText();\r\n\t\t\t\tString telephone = txtTelephone.getText();\r\n\t\t\t\tString email = txtEmail.getText();\r\n\t\t\t\t\r\n\t\t\t\tClients Clients = new Clients(prenom, nom, telephone, email);\r\n\t\t\t\tClientsBDD clientsBDD = new ClientsBDD();\r\n\t\t\t\tConnection cn = clientsBDD.makeConnection();\r\n\t\t\t\tclientsBDD.insert(Clients, cn);\r\n\t\t\t\tclientsBDD.closeConnection(cn);\r\n\t\t\t\t\r\n\t\t\t\t//labelResult = null;\r\n\t\t\t\t//labelResult.setText(&quot;Client ajoute avec succes&quot;);\r\n\t\t\t\t}\r\n\t\t});\r\n\t\tbtnNewButton.setBounds(45, 227, 112, 23);\r\n\t\tcontentPane.add(btnNewButton);\r\n\t\t\r\n\t\ttxtPrenom = new JTextField();\r\n\t\ttxtPrenom.setBounds(124, 39, 258, 20);\r\n\t\tcontentPane.add(txtPrenom);\r\n\t\ttxtPrenom.setColumns(10);\r\n\t\t\r\n\t\ttxtNom = new JTextField();\r\n\t\ttxtNom.setColumns(10);\r\n\t\ttxtNom.setBounds(124, 82, 258, 20);\r\n\t\tcontentPane.add(txtNom);\r\n\t\t\r\n\t\ttxtTelephone = new JTextField();\r\n\t\ttxtTelephone.setColumns(10);\r\n\t\ttxtTelephone.setBounds(124, 125, 258, 20);\r\n\t\tcontentPane.add(txtTelephone);\r\n\t\t\r\n\t\ttxtEmail = new JTextField();\r\n\t\ttxtEmail.setColumns(10);\r\n\t\ttxtEmail.setBounds(124, 166, 258, 20);\r\n\t\tcontentPane.add(txtEmail);\r\n\t\t\r\n\t\tJLabel lblNewLabel = new JLabel(&quot;Prenom&quot;);\r\n\t\tlblNewLabel.setBounds(45, 42, 67, 14);\r\n\t\tcontentPane.add(lblNewLabel);\r\n\t\t\r\n\t\tJLabel lblMarque = new JLabel(&quot;Nom&quot;);\r\n\t\tlblMarque.setBounds(45, 85, 46, 14);\r\n\t\tcontentPane.add(lblMarque);\r\n\t\t\r\n\t\tJLabel lblNewLabel_1_1 = new JLabel(&quot;Telephone&quot;);\r\n\t\tlblNewLabel_1_1.setBounds(45, 128, 67, 14);\r\n\t\tcontentPane.add(lblNewLabel_1_1);\r\n\t\t\r\n\t\tJLabel lblNewLabel_1_1_1 = new JLabel(&quot;Email&quot;);\r\n\t\tlblNewLabel_1_1_1.setBounds(45, 169, 89, 14);\r\n\t\tcontentPane.add(lblNewLabel_1_1_1);\r\n\t\t\r\n\t\tJLabel labelResult = new JLabel(&quot;&quot;);\r\n\t\tlabelResult.setBounds(194, 229, 227, 16);\r\n\t\tcontentPane.add(labelResult);\r\n\t}\r\n}\r\n```\r\n","title":"java.sql.SQLIntegrityConstraintViolationException: Column &#39;prenom&#39; cannot be null","body":"<p>I'm new in Java programming so that's why I'm here seeking your kind help stackoverflowers.</p>\n<p>I have this problem which I could not find the solution on internet, I hope someone could inform me where is my mistake and how can I fix it.</p>\n<p>My problem is that when I try to insert the data, everything goes fine, the window opens, I can insert the data, button looks just fine.</p>\n<p>But it gives me this message</p>\n<p>java.sql.SQLIntegrityConstraintViolationException: Column 'prenom' cannot be null</p>\n<p>Which I assume was a problem with php mySQL, then I changed all variables to NULL, activating the button &quot;Null&quot; for all of them.</p>\n<p>It then WORKED, but all informations were saved as &quot;null&quot; in my database, which didn't really solve my problem.</p>\n<p>My goal is to insert data (name, lastname, phone, email) into a data base (php mySQL) through eclipse. I did a program which I'm obliged to use window builder to insert that data, so graphical user interface MUST be used</p>\n<p>What I expect to happen is to save data normally. Like, name = Mike, lastname = Tyson, phone = +55555, email = mtyson@gmail.com\nAnd it shows in my database, not null message.</p>\n<p>Thank you everyone</p>\n<pre><code>package interfaceGraphique;\n\n\nimport accesBaseDeDonnees.ClientsBDD;\nimport entites.Clients;\n\nimport java.awt.EventQueue;\n\nimport javax.swing.JFrame;\nimport javax.swing.JPanel;\nimport javax.swing.border.EmptyBorder;\nimport javax.swing.AbstractButton;\nimport javax.swing.JButton;\nimport java.awt.event.ActionListener;\nimport java.sql.Connection;\nimport java.awt.event.ActionEvent;\nimport javax.swing.JTextField;\nimport javax.swing.JLabel;\nimport java.awt.Color;\n\npublic class InterfaceClients extends JFrame {\n\n    static InterfaceClients window;\n    \n    private JPanel contentPane;\n    private JTextField txtPrenom;\n    private JTextField txtNom;\n    private JTextField txtTelephone;\n    private JTextField txtEmail;\n\n    /**\n     * Launch the application.\n     */\n    public static void main(String[] args) {\n        EventQueue.invokeLater(new Runnable() {\n            public void run() {\n                try {\n                    InterfaceClients frame = new InterfaceClients();\n                    frame.setVisible(true);\n                } catch (Exception e) {\n                    e.printStackTrace();\n                }\n            }\n        });\n    }\n\n    /**\n     * Create the frame.\n     */\n    public InterfaceClients() {\n        setBackground(new Color(0, 0, 0));\n        setOpacity(1.0f);\n        setTitle(&quot;Ajouter un client&quot;);\n        \n        \n        setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);\n        setBounds(100, 100, 450, 300);\n        contentPane = new JPanel();\n        contentPane.setBorder(new EmptyBorder(5, 5, 5, 5));\n\n        setContentPane(contentPane);\n        contentPane.setLayout(null);\n        \n        JButton btnNewButton = new JButton(&quot;Enregistrer&quot;);\n        btnNewButton.addActionListener(new ActionListener() {\n            private AbstractButton labelResult;\n            \n            @Override\n            public void actionPerformed(ActionEvent e) {\n                String prenom = txtPrenom.getText();\n                String nom = txtNom.getText();\n                String telephone = txtTelephone.getText();\n                String email = txtEmail.getText();\n                \n                Clients Clients = new Clients(prenom, nom, telephone, email);\n                ClientsBDD clientsBDD = new ClientsBDD();\n                Connection cn = clientsBDD.makeConnection();\n                clientsBDD.insert(Clients, cn);\n                clientsBDD.closeConnection(cn);\n                \n                //labelResult = null;\n                //labelResult.setText(&quot;Client ajoute avec succes&quot;);\n                }\n        });\n        btnNewButton.setBounds(45, 227, 112, 23);\n        contentPane.add(btnNewButton);\n        \n        txtPrenom = new JTextField();\n        txtPrenom.setBounds(124, 39, 258, 20);\n        contentPane.add(txtPrenom);\n        txtPrenom.setColumns(10);\n        \n        txtNom = new JTextField();\n        txtNom.setColumns(10);\n        txtNom.setBounds(124, 82, 258, 20);\n        contentPane.add(txtNom);\n        \n        txtTelephone = new JTextField();\n        txtTelephone.setColumns(10);\n        txtTelephone.setBounds(124, 125, 258, 20);\n        contentPane.add(txtTelephone);\n        \n        txtEmail = new JTextField();\n        txtEmail.setColumns(10);\n        txtEmail.setBounds(124, 166, 258, 20);\n        contentPane.add(txtEmail);\n        \n        JLabel lblNewLabel = new JLabel(&quot;Prenom&quot;);\n        lblNewLabel.setBounds(45, 42, 67, 14);\n        contentPane.add(lblNewLabel);\n        \n        JLabel lblMarque = new JLabel(&quot;Nom&quot;);\n        lblMarque.setBounds(45, 85, 46, 14);\n        contentPane.add(lblMarque);\n        \n        JLabel lblNewLabel_1_1 = new JLabel(&quot;Telephone&quot;);\n        lblNewLabel_1_1.setBounds(45, 128, 67, 14);\n        contentPane.add(lblNewLabel_1_1);\n        \n        JLabel lblNewLabel_1_1_1 = new JLabel(&quot;Email&quot;);\n        lblNewLabel_1_1_1.setBounds(45, 169, 89, 14);\n        contentPane.add(lblNewLabel_1_1_1);\n        \n        JLabel labelResult = new JLabel(&quot;&quot;);\n        labelResult.setBounds(194, 229, 227, 16);\n        contentPane.add(labelResult);\n    }\n}\n</code></pre>\n"},{"tags":["java","amazon-web-services","spring-boot","amazon-s3"],"answers":[{"tags":[],"owner":{"account_id":2486870,"reputation":685,"user_id":2165146,"display_name":"muhammed ozbilici"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1672932972,"creation_date":1672932972,"answer_id":75020887,"question_id":75020392,"body_markdown":"You can use `GeneratePresignedUrlRequest`, try this ;\r\n\r\n    GeneratePresignedUrlRequest generatePresignedUrlRequest = new GeneratePresignedUrlRequest(S3_BUCKET_NAME, key);\r\n    generatePresignedUrlRequest.addRequestParameter(&quot;uploadId&quot;, uploadIdentifier);\r\n    generatePresignedUrlRequest.addRequestParameter(&quot;partNumber&quot;, Integer.toString(partNumber))\r\n    generatePresignedUrlRequest.putCustomRequestHeader(Headers.CONTENT_MD5, md5Hash);\r\n    generatePresignedUrlRequest.putCustomRequestHeader(Headers.CONTENT_LENGTH, Long.toString(contentLength));","title":"What is the best way to create multipart upload to a presigned url in aws s3 bucket?","body":"<p>You can use <code>GeneratePresignedUrlRequest</code>, try this ;</p>\n<pre><code>GeneratePresignedUrlRequest generatePresignedUrlRequest = new GeneratePresignedUrlRequest(S3_BUCKET_NAME, key);\ngeneratePresignedUrlRequest.addRequestParameter(&quot;uploadId&quot;, uploadIdentifier);\ngeneratePresignedUrlRequest.addRequestParameter(&quot;partNumber&quot;, Integer.toString(partNumber))\ngeneratePresignedUrlRequest.putCustomRequestHeader(Headers.CONTENT_MD5, md5Hash);\ngeneratePresignedUrlRequest.putCustomRequestHeader(Headers.CONTENT_LENGTH, Long.toString(contentLength));\n</code></pre>\n"}],"owner":{"account_id":15704117,"reputation":83,"user_id":11916606,"display_name":"Artem Causelove"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":153,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":1,"score":2,"last_activity_date":1672932972,"creation_date":1672930693,"question_id":75020392,"body_markdown":"I want to generate a presign url(with upload rights only) and share it with my second application, so the second application can upload multipart file to it. How can I achieve this with java + spring boot ? \r\nP.S. all the solutions I googled work only for single upload but not for multipart.","title":"What is the best way to create multipart upload to a presigned url in aws s3 bucket?","body":"<p>I want to generate a presign url(with upload rights only) and share it with my second application, so the second application can upload multipart file to it. How can I achieve this with java + spring boot ?\nP.S. all the solutions I googled work only for single upload but not for multipart.</p>\n"},{"tags":["java","spring","spring-boot","hibernate","spring-security"],"comments":[{"owner":{"account_id":3192259,"reputation":117619,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1672903883,"post_id":75011130,"comment_id":132378965,"body_markdown":"Have you read the error? You get a validation error which tries to redirect to `/error` (which is the default behavior), for some reason your `/error` page is only visible by fully authenticated users, it probably not in your `permitAll` list.","body":"Have you read the error? You get a validation error which tries to redirect to <code>&#47;error</code> (which is the default behavior), for some reason your <code>&#47;error</code> page is only visible by fully authenticated users, it probably not in your <code>permitAll</code> list."},{"owner":{"account_id":27367851,"reputation":71,"user_id":20874384,"display_name":"vw0389"},"score":0,"creation_date":1672932824,"post_id":75011130,"comment_id":132388677,"body_markdown":"Thank you, I had no idea that was how it worked.  I had not explicity permitted /error to all users w/o a jwt, so it was giving an auth error.","body":"Thank you, I had no idea that was how it worked.  I had not explicity permitted /error to all users w/o a jwt, so it was giving an auth error."}],"answers":[{"tags":[],"owner":{"account_id":27367851,"reputation":71,"user_id":20874384,"display_name":"vw0389"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1672932882,"creation_date":1672932882,"answer_id":75020870,"question_id":75011130,"body_markdown":"added\r\n```\r\n.requestMatchers(&quot;/error&quot;).permitAll()\r\n```\r\nTo my filterChain in my WebSecurityConfig file. I did not know that when @Validated fails to validate it redirects to `/error`","title":"Spring @Validated is appears to be giving AuthenticationException","body":"<p>added</p>\n<pre><code>.requestMatchers(&quot;/error&quot;).permitAll()\n</code></pre>\n<p>To my filterChain in my WebSecurityConfig file. I did not know that when @Validated fails to validate it redirects to <code>/error</code></p>\n"}],"owner":{"account_id":27367851,"reputation":71,"user_id":20874384,"display_name":"vw0389"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":147,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"accepted_answer_id":75020870,"answer_count":1,"score":-1,"last_activity_date":1672932882,"creation_date":1672865373,"question_id":75011130,"body_markdown":"I&#39;m trying to make a blog w/ spring boot. I am using @Validated and groupings for certain requests.  For Example hitting my signup route, I validate the email using @NotBlank and @Email on my User model\r\n\r\nController:\r\n```\r\npackage com.vweinert.fedditbackend.controllers;\r\n\r\nimport com.vweinert.fedditbackend.security.jwt.AuthEntryPointJwt;\r\nimport org.modelmapper.ModelMapper;\r\n\r\nimport org.slf4j.Logger;\r\nimport org.slf4j.LoggerFactory;\r\nimport org.springframework.http.ResponseEntity;\r\nimport org.springframework.validation.annotation.Validated;\r\nimport org.springframework.web.bind.annotation.CrossOrigin;\r\nimport org.springframework.web.bind.annotation.PostMapping;\r\nimport org.springframework.web.bind.annotation.RequestBody;\r\nimport org.springframework.web.bind.annotation.RequestMapping;\r\nimport org.springframework.web.bind.annotation.RestController;\r\n\r\nimport com.vweinert.fedditbackend.entities.User;\r\nimport com.vweinert.fedditbackend.request.auth.LoginRequest;\r\nimport com.vweinert.fedditbackend.request.auth.SignupRequest;\r\nimport com.vweinert.fedditbackend.dto.AuthDto;\r\nimport com.vweinert.fedditbackend.service.inter.UserService;\r\n@CrossOrigin(origins = &quot;*&quot;, maxAge = 3600)\r\n@RestController\r\n@RequestMapping(&quot;/api/auth&quot;)\r\npublic class AuthController {\r\n    private final UserService userService;\r\n    private final ModelMapper modelMapper;\r\n    private static final Logger logger = LoggerFactory.getLogger(AuthController.class);\r\n    public AuthController(UserService userService, ModelMapper modelMapper) {\r\n        this.userService = userService;\r\n        this.modelMapper = modelMapper;\r\n        logger.debug(&quot;Auth controller initialized&quot;);\r\n    }\r\n\r\n    @PostMapping(&quot;/signin&quot;)\r\n    public ResponseEntity&lt;?&gt; loginUser(@Validated(LoginRequest.class) @RequestBody User loginRequest) {\r\n        try {\r\n            logger.debug(&quot;logging in user {},&quot;,loginRequest);\r\n            User user = userService.sigInUser(loginRequest);\r\n            AuthDto authDto = modelMapper.map(user, AuthDto.class);\r\n            return ResponseEntity.ok(authDto);\r\n        } catch (Exception e) {\r\n            return ResponseEntity.badRequest().body(e.getMessage());\r\n        }\r\n    }\r\n\r\n    @PostMapping(&quot;/signup&quot;)\r\n    public ResponseEntity&lt;?&gt; registerUser(@Validated(SignupRequest.class) @RequestBody User signUpRequest) {\r\n        try {\r\n            logger.debug(&quot;signing up user {},&quot;, signUpRequest);\r\n            User user = userService.registerUser(signUpRequest);\r\n            AuthDto authDto = modelMapper.map(user, AuthDto.class);\r\n            return ResponseEntity.ok(authDto);\r\n        } catch (Exception e) {\r\n            return ResponseEntity.badRequest().body(e.getMessage());\r\n        }\r\n    }\r\n}\r\n```\r\nModel:\r\n```\r\npackage com.vweinert.fedditbackend.entities;\r\n\r\nimport java.time.LocalDateTime;\r\nimport java.util.Set;\r\n\r\nimport jakarta.persistence.Column;\r\nimport jakarta.persistence.Entity;\r\nimport jakarta.persistence.GeneratedValue;\r\nimport jakarta.persistence.GenerationType;\r\nimport jakarta.persistence.Id;\r\nimport jakarta.persistence.Table;\r\nimport jakarta.persistence.JoinColumn;\r\nimport jakarta.persistence.OneToMany;\r\nimport jakarta.persistence.ManyToMany;\r\nimport jakarta.persistence.JoinTable;\r\nimport jakarta.persistence.Transient;\r\nimport jakarta.persistence.FetchType;\r\nimport jakarta.validation.constraints.Email;\r\nimport jakarta.validation.constraints.NotBlank;\r\nimport jakarta.validation.constraints.Size;\r\n\r\nimport com.fasterxml.jackson.annotation.JsonInclude;\r\n\r\nimport org.hibernate.annotations.CreationTimestamp;\r\n\r\nimport lombok.AllArgsConstructor;\r\nimport lombok.Builder;\r\nimport lombok.Data;\r\nimport lombok.NoArgsConstructor;\r\n\r\nimport com.vweinert.fedditbackend.request.auth.LoginRequest;\r\nimport com.vweinert.fedditbackend.request.auth.SignupRequest;\r\n\r\n@Entity\r\n@Table(name=&quot;users&quot;)\r\n@Data\r\n@NoArgsConstructor\r\n@AllArgsConstructor\r\n@Builder\r\npublic class User {\r\n    @Id\r\n    @GeneratedValue(strategy = GenerationType.AUTO)\r\n    private Long id;\r\n    @Column(nullable=false,unique = true)\r\n    @NotBlank(groups = {SignupRequest.class}, message = &quot;email is blank&quot;)\r\n    @Email(groups = {SignupRequest.class}, message = &quot;invalid email&quot;)\r\n    private String email;\r\n    @Column(nullable=false,updatable = false,unique = true)\r\n    @NotBlank(groups = {LoginRequest.class, SignupRequest.class},message = &quot;username is blank&quot;)\r\n    @Size(min = 8, max = 32, groups = {LoginRequest.class, SignupRequest.class}, message = &quot;username must be between 8 and 32 characters&quot;)\r\n    private String username;\r\n    @Column(nullable=false)\r\n    @NotBlank(groups = {LoginRequest.class, SignupRequest.class},message = &quot;Missing password&quot;)\r\n    @Size(min = 8, max = 32, groups = {LoginRequest.class, SignupRequest.class}, message = &quot;password must be between 8 and 32 characters&quot;)\r\n    private String password;\r\n    @Column(columnDefinition = &quot;text&quot;)\r\n    private String about;\r\n    @Column(nullable=false,updatable = false)\r\n    @CreationTimestamp\r\n    private LocalDateTime createdAt;\r\n    private LocalDateTime passwordChangedAt;\r\n    private LocalDateTime aboutChangedAt;\r\n    @Column(nullable = false)\r\n    @Builder.Default\r\n    private Boolean deleted = false;\r\n    @ManyToMany(fetch = FetchType.LAZY)\r\n    @JoinTable(\tname = &quot;user_roles&quot;, \r\n\t\t\t\tjoinColumns = @JoinColumn(name = &quot;user_id&quot;), \r\n\t\t\t\tinverseJoinColumns = @JoinColumn(name = &quot;role_id&quot;))\r\n    private Set&lt;Role&gt; roles;\r\n  \r\n    @OneToMany(mappedBy = &quot;user&quot;,fetch = FetchType.LAZY)\r\n    private Set&lt;Post&gt; posts;\r\n\r\n    @OneToMany(mappedBy = &quot;user&quot;,fetch = FetchType.LAZY)\r\n    private Set&lt;Comment&gt; comments;\r\n    @Transient\r\n    @JsonInclude()\r\n    private String jwt;\r\n    public User(String username, String email, String password){\r\n        this.username = username;\r\n        this.email = email;\r\n        this.password = password;\r\n    }\r\n}\r\n```\r\nSignup request interface for the @Validated groups\r\n```\r\npackage com.vweinert.fedditbackend.request.auth;\r\n\r\npublic interface SignupRequest {\r\n\r\n}\r\n```\r\nWeb Security Config:\r\n```\r\npackage com.vweinert.fedditbackend.security;\r\n\r\nimport org.springframework.context.annotation.Bean;\r\nimport org.springframework.context.annotation.Configuration;\r\nimport org.springframework.security.authentication.AuthenticationManager;\r\nimport org.springframework.security.authentication.dao.DaoAuthenticationProvider;\r\nimport org.springframework.security.config.annotation.authentication.configuration.AuthenticationConfiguration;\r\nimport org.springframework.security.config.annotation.method.configuration.EnableGlobalMethodSecurity;\r\nimport org.springframework.security.config.annotation.web.builders.HttpSecurity;\r\nimport org.springframework.security.config.http.SessionCreationPolicy;\r\nimport org.springframework.security.crypto.bcrypt.BCryptPasswordEncoder;\r\nimport org.springframework.security.crypto.password.PasswordEncoder;\r\nimport org.springframework.security.web.SecurityFilterChain;\r\nimport org.springframework.security.web.authentication.UsernamePasswordAuthenticationFilter;\r\n\r\nimport com.vweinert.fedditbackend.security.jwt.AuthEntryPointJwt;\r\nimport com.vweinert.fedditbackend.security.jwt.AuthTokenFilter;\r\nimport com.vweinert.fedditbackend.security.services.UserDetailsServiceImpl;\r\nimport com.vweinert.fedditbackend.security.jwt.JwtUtils;\r\n\r\n@Configuration\r\n@EnableGlobalMethodSecurity(\r\n    prePostEnabled = true)\r\npublic class WebSecurityConfig {\r\n  private final UserDetailsServiceImpl userDetailsService;\r\n  private final AuthEntryPointJwt unauthorizedHandler;\r\n  private final JwtUtils jwtUtils;\r\n  public WebSecurityConfig(JwtUtils jwtUtils, UserDetailsServiceImpl userDetailsService, AuthEntryPointJwt unauthorizedHandler) {\r\n    this.jwtUtils = jwtUtils;\r\n    this.userDetailsService = userDetailsService;\r\n    this.unauthorizedHandler = unauthorizedHandler;\r\n  }\r\n  @Bean\r\n  public AuthTokenFilter authenticationJwtTokenFilter() {\r\n    return new AuthTokenFilter(jwtUtils,userDetailsService);\r\n  }\r\n  \r\n  @Bean\r\n  public DaoAuthenticationProvider authenticationProvider() {\r\n      DaoAuthenticationProvider authProvider = new DaoAuthenticationProvider();\r\n       \r\n      authProvider.setUserDetailsService(userDetailsService);\r\n      authProvider.setPasswordEncoder(passwordEncoder());\r\n   \r\n      return authProvider;\r\n  }\r\n  \r\n  @Bean\r\n  public AuthenticationManager authenticationManager(AuthenticationConfiguration authConfig) throws Exception {\r\n    return authConfig.getAuthenticationManager();\r\n  }\r\n\r\n  @Bean\r\n  public PasswordEncoder passwordEncoder() {\r\n    return new BCryptPasswordEncoder();\r\n  }\r\n  \r\n  @Bean\r\n  public SecurityFilterChain filterChain(HttpSecurity http) throws Exception {\r\n    http.cors().and().csrf().disable()\r\n        .exceptionHandling().authenticationEntryPoint(unauthorizedHandler).and()\r\n        .sessionManagement().sessionCreationPolicy(SessionCreationPolicy.STATELESS).and()\r\n            .authorizeHttpRequests((requests) -&gt; requests\r\n                    .requestMatchers(&quot;/api/auth/**&quot;).permitAll()\r\n                    .requestMatchers(&quot;/api/home/**&quot;).permitAll()\r\n                    .anyRequest().authenticated()\r\n            );\r\n    http.authenticationProvider(authenticationProvider());\r\n    http.addFilterBefore(authenticationJwtTokenFilter(), UsernamePasswordAuthenticationFilter.class);\r\n    return http.build();\r\n  }\r\n}\r\n```\r\nAuthentication entry Point:\r\n```\r\npackage com.vweinert.fedditbackend.security.jwt;\r\n\r\nimport java.io.IOException;\r\nimport java.util.HashMap;\r\nimport java.util.Map;\r\n\r\nimport jakarta.servlet.ServletException;\r\nimport jakarta.servlet.http.HttpServletRequest;\r\nimport jakarta.servlet.http.HttpServletResponse;\r\n\r\nimport org.slf4j.Logger;\r\nimport org.slf4j.LoggerFactory;\r\n\r\nimport org.springframework.http.MediaType;\r\nimport org.springframework.security.core.AuthenticationException;\r\nimport org.springframework.security.web.AuthenticationEntryPoint;\r\nimport org.springframework.stereotype.Component;\r\n\r\nimport com.fasterxml.jackson.databind.ObjectMapper;\r\n\r\n@Component\r\npublic class AuthEntryPointJwt implements AuthenticationEntryPoint {\r\n\r\n  private static final Logger logger = LoggerFactory.getLogger(AuthEntryPointJwt.class);\r\n\r\n  @Override\r\n  public void commence(HttpServletRequest request, HttpServletResponse response, AuthenticationException authException)\r\n      throws IOException, ServletException {\r\n    logger.error(&quot;Unauthorized error: {}&quot;, authException.getMessage());\r\n\r\n    response.setContentType(MediaType.APPLICATION_JSON_VALUE);\r\n    response.setStatus(HttpServletResponse.SC_UNAUTHORIZED);\r\n\r\n    final Map&lt;String, Object&gt; body = new HashMap&lt;&gt;();\r\n    body.put(&quot;status&quot;, HttpServletResponse.SC_UNAUTHORIZED);\r\n    body.put(&quot;error&quot;, &quot;Unauthorized&quot;);\r\n    body.put(&quot;message&quot;, authException.getMessage());\r\n    body.put(&quot;path&quot;, request.getServletPath());\r\n\r\n    final ObjectMapper mapper = new ObjectMapper();\r\n    mapper.writeValue(response.getOutputStream(), body);\r\n  }\r\n\r\n}\r\n```\r\n\r\nCurrently I am getting an AuthenticationException going through my commence method that implements the AuthenticationEntryPoint class.  I would like to have custom exceptions that simply return the message attached to my @Email annotation, though I&#39;m really not sure how to do this.\r\n\r\nWhen I do a postman call with this (with no authorization and an intentionally invalid email):\r\n```\r\n{\r\n\t&quot;email&quot;:&quot;emailssss&quot;,\r\n\t&quot;username&quot;:&quot;emailsssssssss&quot;,\r\n\t&quot;password&quot;:&quot;emailly123theemail&quot;\r\n}\r\n```\r\nI get:\r\n```\r\n{\r\n    &quot;path&quot;: &quot;/error&quot;,\r\n    &quot;error&quot;: &quot;Unauthorized&quot;,\r\n    &quot;message&quot;: &quot;Full authentication is required to access this resource&quot;,\r\n    &quot;status&quot;: 401\r\n}\r\n```\r\nand in the console I get:\r\n```\r\n2023-01-04T14:37:25.768-06:00  WARN 36022 --- [nio-8080-exec-1] .w.s.m.s.DefaultHandlerExceptionResolver : Resolved [org.springframework.web.bind.MethodArgumentNotValidException: Validation failed for argument [0] in public org.springframework.http.ResponseEntity&lt;?&gt; com.vweinert.fedditbackend.controllers.AuthController.registerUser(com.vweinert.fedditbackend.entities.User): [Field error in object &#39;user&#39; on field &#39;email&#39;: rejected value [emailssss]; codes [Email.user.email,Email.email,Email.java.lang.String,Email]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [user.email,email]; arguments []; default message [email],[Ljakarta.validation.constraints.Pattern$Flag;@49be6e2e,.*]; default message [invalid email]] ]\r\n2023-01-04T14:37:25.774-06:00 ERROR 36022 --- [nio-8080-exec-1] c.v.f.security.jwt.AuthEntryPointJwt     : Unauthorized error: Full authentication is required to access this resource\r\n```\r\nI would like to get something like:\r\n```\r\n{\r\n    &quot;message&quot;: &quot;invalid email&quot;\r\n}\r\n```\r\n","title":"Spring @Validated is appears to be giving AuthenticationException","body":"<p>I'm trying to make a blog w/ spring boot. I am using @Validated and groupings for certain requests.  For Example hitting my signup route, I validate the email using @NotBlank and @Email on my User model</p>\n<p>Controller:</p>\n<pre><code>package com.vweinert.fedditbackend.controllers;\n\nimport com.vweinert.fedditbackend.security.jwt.AuthEntryPointJwt;\nimport org.modelmapper.ModelMapper;\n\nimport org.slf4j.Logger;\nimport org.slf4j.LoggerFactory;\nimport org.springframework.http.ResponseEntity;\nimport org.springframework.validation.annotation.Validated;\nimport org.springframework.web.bind.annotation.CrossOrigin;\nimport org.springframework.web.bind.annotation.PostMapping;\nimport org.springframework.web.bind.annotation.RequestBody;\nimport org.springframework.web.bind.annotation.RequestMapping;\nimport org.springframework.web.bind.annotation.RestController;\n\nimport com.vweinert.fedditbackend.entities.User;\nimport com.vweinert.fedditbackend.request.auth.LoginRequest;\nimport com.vweinert.fedditbackend.request.auth.SignupRequest;\nimport com.vweinert.fedditbackend.dto.AuthDto;\nimport com.vweinert.fedditbackend.service.inter.UserService;\n@CrossOrigin(origins = &quot;*&quot;, maxAge = 3600)\n@RestController\n@RequestMapping(&quot;/api/auth&quot;)\npublic class AuthController {\n    private final UserService userService;\n    private final ModelMapper modelMapper;\n    private static final Logger logger = LoggerFactory.getLogger(AuthController.class);\n    public AuthController(UserService userService, ModelMapper modelMapper) {\n        this.userService = userService;\n        this.modelMapper = modelMapper;\n        logger.debug(&quot;Auth controller initialized&quot;);\n    }\n\n    @PostMapping(&quot;/signin&quot;)\n    public ResponseEntity&lt;?&gt; loginUser(@Validated(LoginRequest.class) @RequestBody User loginRequest) {\n        try {\n            logger.debug(&quot;logging in user {},&quot;,loginRequest);\n            User user = userService.sigInUser(loginRequest);\n            AuthDto authDto = modelMapper.map(user, AuthDto.class);\n            return ResponseEntity.ok(authDto);\n        } catch (Exception e) {\n            return ResponseEntity.badRequest().body(e.getMessage());\n        }\n    }\n\n    @PostMapping(&quot;/signup&quot;)\n    public ResponseEntity&lt;?&gt; registerUser(@Validated(SignupRequest.class) @RequestBody User signUpRequest) {\n        try {\n            logger.debug(&quot;signing up user {},&quot;, signUpRequest);\n            User user = userService.registerUser(signUpRequest);\n            AuthDto authDto = modelMapper.map(user, AuthDto.class);\n            return ResponseEntity.ok(authDto);\n        } catch (Exception e) {\n            return ResponseEntity.badRequest().body(e.getMessage());\n        }\n    }\n}\n</code></pre>\n<p>Model:</p>\n<pre><code>package com.vweinert.fedditbackend.entities;\n\nimport java.time.LocalDateTime;\nimport java.util.Set;\n\nimport jakarta.persistence.Column;\nimport jakarta.persistence.Entity;\nimport jakarta.persistence.GeneratedValue;\nimport jakarta.persistence.GenerationType;\nimport jakarta.persistence.Id;\nimport jakarta.persistence.Table;\nimport jakarta.persistence.JoinColumn;\nimport jakarta.persistence.OneToMany;\nimport jakarta.persistence.ManyToMany;\nimport jakarta.persistence.JoinTable;\nimport jakarta.persistence.Transient;\nimport jakarta.persistence.FetchType;\nimport jakarta.validation.constraints.Email;\nimport jakarta.validation.constraints.NotBlank;\nimport jakarta.validation.constraints.Size;\n\nimport com.fasterxml.jackson.annotation.JsonInclude;\n\nimport org.hibernate.annotations.CreationTimestamp;\n\nimport lombok.AllArgsConstructor;\nimport lombok.Builder;\nimport lombok.Data;\nimport lombok.NoArgsConstructor;\n\nimport com.vweinert.fedditbackend.request.auth.LoginRequest;\nimport com.vweinert.fedditbackend.request.auth.SignupRequest;\n\n@Entity\n@Table(name=&quot;users&quot;)\n@Data\n@NoArgsConstructor\n@AllArgsConstructor\n@Builder\npublic class User {\n    @Id\n    @GeneratedValue(strategy = GenerationType.AUTO)\n    private Long id;\n    @Column(nullable=false,unique = true)\n    @NotBlank(groups = {SignupRequest.class}, message = &quot;email is blank&quot;)\n    @Email(groups = {SignupRequest.class}, message = &quot;invalid email&quot;)\n    private String email;\n    @Column(nullable=false,updatable = false,unique = true)\n    @NotBlank(groups = {LoginRequest.class, SignupRequest.class},message = &quot;username is blank&quot;)\n    @Size(min = 8, max = 32, groups = {LoginRequest.class, SignupRequest.class}, message = &quot;username must be between 8 and 32 characters&quot;)\n    private String username;\n    @Column(nullable=false)\n    @NotBlank(groups = {LoginRequest.class, SignupRequest.class},message = &quot;Missing password&quot;)\n    @Size(min = 8, max = 32, groups = {LoginRequest.class, SignupRequest.class}, message = &quot;password must be between 8 and 32 characters&quot;)\n    private String password;\n    @Column(columnDefinition = &quot;text&quot;)\n    private String about;\n    @Column(nullable=false,updatable = false)\n    @CreationTimestamp\n    private LocalDateTime createdAt;\n    private LocalDateTime passwordChangedAt;\n    private LocalDateTime aboutChangedAt;\n    @Column(nullable = false)\n    @Builder.Default\n    private Boolean deleted = false;\n    @ManyToMany(fetch = FetchType.LAZY)\n    @JoinTable( name = &quot;user_roles&quot;, \n                joinColumns = @JoinColumn(name = &quot;user_id&quot;), \n                inverseJoinColumns = @JoinColumn(name = &quot;role_id&quot;))\n    private Set&lt;Role&gt; roles;\n  \n    @OneToMany(mappedBy = &quot;user&quot;,fetch = FetchType.LAZY)\n    private Set&lt;Post&gt; posts;\n\n    @OneToMany(mappedBy = &quot;user&quot;,fetch = FetchType.LAZY)\n    private Set&lt;Comment&gt; comments;\n    @Transient\n    @JsonInclude()\n    private String jwt;\n    public User(String username, String email, String password){\n        this.username = username;\n        this.email = email;\n        this.password = password;\n    }\n}\n</code></pre>\n<p>Signup request interface for the @Validated groups</p>\n<pre><code>package com.vweinert.fedditbackend.request.auth;\n\npublic interface SignupRequest {\n\n}\n</code></pre>\n<p>Web Security Config:</p>\n<pre><code>package com.vweinert.fedditbackend.security;\n\nimport org.springframework.context.annotation.Bean;\nimport org.springframework.context.annotation.Configuration;\nimport org.springframework.security.authentication.AuthenticationManager;\nimport org.springframework.security.authentication.dao.DaoAuthenticationProvider;\nimport org.springframework.security.config.annotation.authentication.configuration.AuthenticationConfiguration;\nimport org.springframework.security.config.annotation.method.configuration.EnableGlobalMethodSecurity;\nimport org.springframework.security.config.annotation.web.builders.HttpSecurity;\nimport org.springframework.security.config.http.SessionCreationPolicy;\nimport org.springframework.security.crypto.bcrypt.BCryptPasswordEncoder;\nimport org.springframework.security.crypto.password.PasswordEncoder;\nimport org.springframework.security.web.SecurityFilterChain;\nimport org.springframework.security.web.authentication.UsernamePasswordAuthenticationFilter;\n\nimport com.vweinert.fedditbackend.security.jwt.AuthEntryPointJwt;\nimport com.vweinert.fedditbackend.security.jwt.AuthTokenFilter;\nimport com.vweinert.fedditbackend.security.services.UserDetailsServiceImpl;\nimport com.vweinert.fedditbackend.security.jwt.JwtUtils;\n\n@Configuration\n@EnableGlobalMethodSecurity(\n    prePostEnabled = true)\npublic class WebSecurityConfig {\n  private final UserDetailsServiceImpl userDetailsService;\n  private final AuthEntryPointJwt unauthorizedHandler;\n  private final JwtUtils jwtUtils;\n  public WebSecurityConfig(JwtUtils jwtUtils, UserDetailsServiceImpl userDetailsService, AuthEntryPointJwt unauthorizedHandler) {\n    this.jwtUtils = jwtUtils;\n    this.userDetailsService = userDetailsService;\n    this.unauthorizedHandler = unauthorizedHandler;\n  }\n  @Bean\n  public AuthTokenFilter authenticationJwtTokenFilter() {\n    return new AuthTokenFilter(jwtUtils,userDetailsService);\n  }\n  \n  @Bean\n  public DaoAuthenticationProvider authenticationProvider() {\n      DaoAuthenticationProvider authProvider = new DaoAuthenticationProvider();\n       \n      authProvider.setUserDetailsService(userDetailsService);\n      authProvider.setPasswordEncoder(passwordEncoder());\n   \n      return authProvider;\n  }\n  \n  @Bean\n  public AuthenticationManager authenticationManager(AuthenticationConfiguration authConfig) throws Exception {\n    return authConfig.getAuthenticationManager();\n  }\n\n  @Bean\n  public PasswordEncoder passwordEncoder() {\n    return new BCryptPasswordEncoder();\n  }\n  \n  @Bean\n  public SecurityFilterChain filterChain(HttpSecurity http) throws Exception {\n    http.cors().and().csrf().disable()\n        .exceptionHandling().authenticationEntryPoint(unauthorizedHandler).and()\n        .sessionManagement().sessionCreationPolicy(SessionCreationPolicy.STATELESS).and()\n            .authorizeHttpRequests((requests) -&gt; requests\n                    .requestMatchers(&quot;/api/auth/**&quot;).permitAll()\n                    .requestMatchers(&quot;/api/home/**&quot;).permitAll()\n                    .anyRequest().authenticated()\n            );\n    http.authenticationProvider(authenticationProvider());\n    http.addFilterBefore(authenticationJwtTokenFilter(), UsernamePasswordAuthenticationFilter.class);\n    return http.build();\n  }\n}\n</code></pre>\n<p>Authentication entry Point:</p>\n<pre><code>package com.vweinert.fedditbackend.security.jwt;\n\nimport java.io.IOException;\nimport java.util.HashMap;\nimport java.util.Map;\n\nimport jakarta.servlet.ServletException;\nimport jakarta.servlet.http.HttpServletRequest;\nimport jakarta.servlet.http.HttpServletResponse;\n\nimport org.slf4j.Logger;\nimport org.slf4j.LoggerFactory;\n\nimport org.springframework.http.MediaType;\nimport org.springframework.security.core.AuthenticationException;\nimport org.springframework.security.web.AuthenticationEntryPoint;\nimport org.springframework.stereotype.Component;\n\nimport com.fasterxml.jackson.databind.ObjectMapper;\n\n@Component\npublic class AuthEntryPointJwt implements AuthenticationEntryPoint {\n\n  private static final Logger logger = LoggerFactory.getLogger(AuthEntryPointJwt.class);\n\n  @Override\n  public void commence(HttpServletRequest request, HttpServletResponse response, AuthenticationException authException)\n      throws IOException, ServletException {\n    logger.error(&quot;Unauthorized error: {}&quot;, authException.getMessage());\n\n    response.setContentType(MediaType.APPLICATION_JSON_VALUE);\n    response.setStatus(HttpServletResponse.SC_UNAUTHORIZED);\n\n    final Map&lt;String, Object&gt; body = new HashMap&lt;&gt;();\n    body.put(&quot;status&quot;, HttpServletResponse.SC_UNAUTHORIZED);\n    body.put(&quot;error&quot;, &quot;Unauthorized&quot;);\n    body.put(&quot;message&quot;, authException.getMessage());\n    body.put(&quot;path&quot;, request.getServletPath());\n\n    final ObjectMapper mapper = new ObjectMapper();\n    mapper.writeValue(response.getOutputStream(), body);\n  }\n\n}\n</code></pre>\n<p>Currently I am getting an AuthenticationException going through my commence method that implements the AuthenticationEntryPoint class.  I would like to have custom exceptions that simply return the message attached to my @Email annotation, though I'm really not sure how to do this.</p>\n<p>When I do a postman call with this (with no authorization and an intentionally invalid email):</p>\n<pre><code>{\n    &quot;email&quot;:&quot;emailssss&quot;,\n    &quot;username&quot;:&quot;emailsssssssss&quot;,\n    &quot;password&quot;:&quot;emailly123theemail&quot;\n}\n</code></pre>\n<p>I get:</p>\n<pre><code>{\n    &quot;path&quot;: &quot;/error&quot;,\n    &quot;error&quot;: &quot;Unauthorized&quot;,\n    &quot;message&quot;: &quot;Full authentication is required to access this resource&quot;,\n    &quot;status&quot;: 401\n}\n</code></pre>\n<p>and in the console I get:</p>\n<pre><code>2023-01-04T14:37:25.768-06:00  WARN 36022 --- [nio-8080-exec-1] .w.s.m.s.DefaultHandlerExceptionResolver : Resolved [org.springframework.web.bind.MethodArgumentNotValidException: Validation failed for argument [0] in public org.springframework.http.ResponseEntity&lt;?&gt; com.vweinert.fedditbackend.controllers.AuthController.registerUser(com.vweinert.fedditbackend.entities.User): [Field error in object 'user' on field 'email': rejected value [emailssss]; codes [Email.user.email,Email.email,Email.java.lang.String,Email]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [user.email,email]; arguments []; default message [email],[Ljakarta.validation.constraints.Pattern$Flag;@49be6e2e,.*]; default message [invalid email]] ]\n2023-01-04T14:37:25.774-06:00 ERROR 36022 --- [nio-8080-exec-1] c.v.f.security.jwt.AuthEntryPointJwt     : Unauthorized error: Full authentication is required to access this resource\n</code></pre>\n<p>I would like to get something like:</p>\n<pre><code>{\n    &quot;message&quot;: &quot;invalid email&quot;\n}\n</code></pre>\n"},{"tags":["java","spring","spring-security"],"comments":[{"owner":{"account_id":15841746,"reputation":6011,"user_id":11430047,"display_name":"Eleftheria Stein-Kousathana"},"score":0,"creation_date":1672930269,"post_id":75019714,"comment_id":132387608,"body_markdown":"I assume the `WebSecurityConfig` class used to extend the `WebSecurityConfigurerAdapter`. When you no longer extend the class then there is no method to override. Check out the &quot;In-Memory Authentication&quot; section in [this post](https://spring.io/blog/2022/02/21/spring-security-without-the-websecurityconfigureradapter) that describes how to migrate away from the `WebSecurityConfigurerAdapter`.","body":"I assume the <code>WebSecurityConfig</code> class used to extend the <code>WebSecurityConfigurerAdapter</code>. When you no longer extend the class then there is no method to override. Check out the &quot;In-Memory Authentication&quot; section in <a href=\"https://spring.io/blog/2022/02/21/spring-security-without-the-websecurityconfigureradapter\" rel=\"nofollow noreferrer\">this post</a> that describes how to migrate away from the <code>WebSecurityConfigurerAdapter</code>."}],"owner":{"account_id":8776074,"reputation":8345,"user_id":6561309,"accept_rate":42,"display_name":"Richard"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":183,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1672932752,"creation_date":1672927736,"question_id":75019714,"body_markdown":"I am using Spring Boot 3.0.1, and am trying to configure web access.\r\n\r\nI have the following:\r\n\r\n    @Configuration\r\n    @EnableWebSecurity\r\n    public class WebSecurityConfig {\r\n    \r\n        @Bean\r\n        public SecurityFilterChain filterChain(HttpSecurity http) throws Exception {\r\n            http.sessionManagement().sessionCreationPolicy(SessionCreationPolicy.STATELESS).and()\r\n                    .authorizeHttpRequests().requestMatchers(&quot;/soapWS/**&quot;).permitAll().and()\r\n                    .authorizeHttpRequests().requestMatchers(&quot;/swagger-ui/**&quot;, &quot;/v3/api-docs/**&quot;).permitAll().and()\r\n                    .authorizeHttpRequests().requestMatchers(&quot;/actuator/**&quot;).permitAll().and()\r\n                    .authorizeHttpRequests().requestMatchers(&quot;/powwow/spreadsheet/**&quot;).permitAll().and()\r\n                    .authorizeHttpRequests().requestMatchers(&quot;/swagger-ui/**&quot;, &quot;/v3/api-docs/**&quot;).permitAll()\r\n                    .anyRequest().authenticated().and()\r\n                    .cors().and()\r\n                    .httpBasic().and()\r\n                    .csrf().disable();\r\n            return http.build();\r\n        }\r\n\r\n        @Bean\r\n        protected AuthenticationManager configure(AuthenticationManagerBuilder auth) throws Exception {\r\n            return\r\n                    auth.authenticationProvider(customWebAuthenticationProvider)\r\n                    .inMemoryAuthentication()\r\n                    .passwordEncoder(passwordEncoder())\r\n                    .withUser(WEB_ACCESS_USERNAME).password(passwordEncoder().encode(WEB_ACCESS_PASSWORD)).roles(&quot;USER&quot;)\r\n                            .and().and().getObject();\r\n        }\r\n    \r\n        @Bean\r\n        public PasswordEncoder passwordEncoder() {\r\n            return new BCryptPasswordEncoder();\r\n        }\r\n    \r\n    }\r\n\r\n**Error**\r\n\r\n\r\n&gt; Error creating bean with name &#39;configure&#39; defined in class path\r\n&gt; resource [com/xxxx/powwow/config/WebSecurityConfig.class]: Failed to\r\n&gt; instantiate\r\n&gt; [org.springframework.security.authentication.AuthenticationManager]:\r\n&gt; Factory method &#39;configure&#39; threw exception with message: Cannot apply\r\n&gt; org.springframework.security.config.annotation.authentication.configurers.provisioning.InMemoryUserDetailsManagerConfigurer@57b7287c\r\n&gt; to already built object\r\n\r\nI was previously using Spring Boot 2.5.1, and the following method was working perfectly. However, with the new version, it requires a return type.\r\n\r\n    @Override\r\n    protected void configure(AuthenticationManagerBuilder auth) throws Exception {\r\n        auth.authenticationProvider(customWebAuthenticationProvider);\r\n        auth.inMemoryAuthentication()\r\n                .passwordEncoder(passwordEncoder())\r\n                .withUser(WEB_ACCESS_USERNAME).password(passwordEncoder().encode(WEB_ACCESS_PASSWORD)).roles(&quot;USER&quot;);\r\n    }\r\n\r\nAny help appreciated.\r\n\r\n**UPDATE**\r\n\r\nThanks to the comments below, I have updated it to the following which compiles an runs with no errors now, however all requests return a `401` error:\r\n\r\n    @Bean\r\n    public SecurityFilterChain filterChain(HttpSecurity http) throws Exception {\r\n        http.sessionManagement().sessionCreationPolicy(SessionCreationPolicy.STATELESS).and()\r\n                .authorizeHttpRequests().requestMatchers(&quot;/soapWS/**&quot;).permitAll().and()\r\n                .authorizeHttpRequests().requestMatchers(&quot;/swagger-ui/**&quot;, &quot;/v3/api-docs/**&quot;).permitAll().and()\r\n                .authorizeHttpRequests().requestMatchers(&quot;/actuator/**&quot;).permitAll().and()\r\n                .authorizeHttpRequests().requestMatchers(&quot;/powwow/spreadsheet/**&quot;).permitAll()\r\n                .anyRequest().authenticated().and()\r\n                .cors().and()\r\n                .httpBasic().and()\r\n                .csrf().disable();\r\n        return http.build();\r\n    }\r\n    \r\n    @Bean\r\n    public InMemoryUserDetailsManager userDetailsService() {\r\n        UserDetails user = User\r\n                .withUsername(WEB_ACCESS_USERNAME)\r\n                .password(passwordEncoder().encode(WEB_ACCESS_PASSWORD))\r\n                .roles(&quot;USER&quot;)\r\n                .build();\r\n        return new InMemoryUserDetailsManager(user);\r\n    }\r\n\r\n    @Bean\r\n    public WebSecurityCustomizer webSecurityCustomizer() {\r\n        return (web) -&gt; {\r\n            web.ignoring().requestMatchers(&quot;/swagger-ui/**&quot;, &quot;/v3/api-docs/**&quot;);\r\n        };\r\n    }\r\n\r\n\r\n    @Bean\r\n    public PasswordEncoder passwordEncoder() {\r\n        return new BCryptPasswordEncoder();\r\n    }\r\n\r\ne.g. If I try to access Swagger via the following, it always gets a `401`, even through I do have &#39;Basic Auth&#39; set in in Postman to correct credentials (this worked before the upgrade):\r\n\r\n    http://localhost:8085/swagger-ui/index.html#/\r\n\r\nor a REST endpoint via:\r\n\r\n    http://localhost:8085/powwow/test-me","title":"Spring Boot configure WebSecurityConfig error","body":"<p>I am using Spring Boot 3.0.1, and am trying to configure web access.</p>\n<p>I have the following:</p>\n<pre><code>@Configuration\n@EnableWebSecurity\npublic class WebSecurityConfig {\n\n    @Bean\n    public SecurityFilterChain filterChain(HttpSecurity http) throws Exception {\n        http.sessionManagement().sessionCreationPolicy(SessionCreationPolicy.STATELESS).and()\n                .authorizeHttpRequests().requestMatchers(&quot;/soapWS/**&quot;).permitAll().and()\n                .authorizeHttpRequests().requestMatchers(&quot;/swagger-ui/**&quot;, &quot;/v3/api-docs/**&quot;).permitAll().and()\n                .authorizeHttpRequests().requestMatchers(&quot;/actuator/**&quot;).permitAll().and()\n                .authorizeHttpRequests().requestMatchers(&quot;/powwow/spreadsheet/**&quot;).permitAll().and()\n                .authorizeHttpRequests().requestMatchers(&quot;/swagger-ui/**&quot;, &quot;/v3/api-docs/**&quot;).permitAll()\n                .anyRequest().authenticated().and()\n                .cors().and()\n                .httpBasic().and()\n                .csrf().disable();\n        return http.build();\n    }\n\n    @Bean\n    protected AuthenticationManager configure(AuthenticationManagerBuilder auth) throws Exception {\n        return\n                auth.authenticationProvider(customWebAuthenticationProvider)\n                .inMemoryAuthentication()\n                .passwordEncoder(passwordEncoder())\n                .withUser(WEB_ACCESS_USERNAME).password(passwordEncoder().encode(WEB_ACCESS_PASSWORD)).roles(&quot;USER&quot;)\n                        .and().and().getObject();\n    }\n\n    @Bean\n    public PasswordEncoder passwordEncoder() {\n        return new BCryptPasswordEncoder();\n    }\n\n}\n</code></pre>\n<p><strong>Error</strong></p>\n<blockquote>\n<p>Error creating bean with name 'configure' defined in class path\nresource [com/xxxx/powwow/config/WebSecurityConfig.class]: Failed to\ninstantiate\n[org.springframework.security.authentication.AuthenticationManager]:\nFactory method 'configure' threw exception with message: Cannot apply\norg.springframework.security.config.annotation.authentication.configurers.provisioning.InMemoryUserDetailsManagerConfigurer@57b7287c\nto already built object</p>\n</blockquote>\n<p>I was previously using Spring Boot 2.5.1, and the following method was working perfectly. However, with the new version, it requires a return type.</p>\n<pre><code>@Override\nprotected void configure(AuthenticationManagerBuilder auth) throws Exception {\n    auth.authenticationProvider(customWebAuthenticationProvider);\n    auth.inMemoryAuthentication()\n            .passwordEncoder(passwordEncoder())\n            .withUser(WEB_ACCESS_USERNAME).password(passwordEncoder().encode(WEB_ACCESS_PASSWORD)).roles(&quot;USER&quot;);\n}\n</code></pre>\n<p>Any help appreciated.</p>\n<p><strong>UPDATE</strong></p>\n<p>Thanks to the comments below, I have updated it to the following which compiles an runs with no errors now, however all requests return a <code>401</code> error:</p>\n<pre><code>@Bean\npublic SecurityFilterChain filterChain(HttpSecurity http) throws Exception {\n    http.sessionManagement().sessionCreationPolicy(SessionCreationPolicy.STATELESS).and()\n            .authorizeHttpRequests().requestMatchers(&quot;/soapWS/**&quot;).permitAll().and()\n            .authorizeHttpRequests().requestMatchers(&quot;/swagger-ui/**&quot;, &quot;/v3/api-docs/**&quot;).permitAll().and()\n            .authorizeHttpRequests().requestMatchers(&quot;/actuator/**&quot;).permitAll().and()\n            .authorizeHttpRequests().requestMatchers(&quot;/powwow/spreadsheet/**&quot;).permitAll()\n            .anyRequest().authenticated().and()\n            .cors().and()\n            .httpBasic().and()\n            .csrf().disable();\n    return http.build();\n}\n\n@Bean\npublic InMemoryUserDetailsManager userDetailsService() {\n    UserDetails user = User\n            .withUsername(WEB_ACCESS_USERNAME)\n            .password(passwordEncoder().encode(WEB_ACCESS_PASSWORD))\n            .roles(&quot;USER&quot;)\n            .build();\n    return new InMemoryUserDetailsManager(user);\n}\n\n@Bean\npublic WebSecurityCustomizer webSecurityCustomizer() {\n    return (web) -&gt; {\n        web.ignoring().requestMatchers(&quot;/swagger-ui/**&quot;, &quot;/v3/api-docs/**&quot;);\n    };\n}\n\n\n@Bean\npublic PasswordEncoder passwordEncoder() {\n    return new BCryptPasswordEncoder();\n}\n</code></pre>\n<p>e.g. If I try to access Swagger via the following, it always gets a <code>401</code>, even through I do have 'Basic Auth' set in in Postman to correct credentials (this worked before the upgrade):</p>\n<pre><code>http://localhost:8085/swagger-ui/index.html#/\n</code></pre>\n<p>or a REST endpoint via:</p>\n<pre><code>http://localhost:8085/powwow/test-me\n</code></pre>\n"},{"tags":["java","aws-cdk"],"comments":[{"owner":{"account_id":12231203,"reputation":400,"user_id":8927135,"display_name":"y. bs"},"score":0,"creation_date":1675093185,"post_id":75020807,"comment_id":132848976,"body_markdown":"you should `Implements` the StackProps not extends it","body":"you should <code>Implements</code> the StackProps not extends it"},{"owner":{"account_id":2050693,"reputation":361,"user_id":1829787,"accept_rate":53,"display_name":"Trevor"},"score":0,"creation_date":1677599107,"post_id":75020807,"comment_id":133367692,"body_markdown":"Thank you. Total mistake on my part using extends vs implements.","body":"Thank you. Total mistake on my part using extends vs implements."}],"owner":{"account_id":2050693,"reputation":361,"user_id":1829787,"accept_rate":53,"display_name":"Trevor"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":299,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1672932642,"creation_date":1672932642,"question_id":75020807,"body_markdown":"I was trying to implement something similar to [this](https://docs.aws.amazon.com/cdk/api/v2/java/index.html?software/amazon/awscdk/StackProps.html) example. \r\n\r\n```java\r\n public class StackUnderTestProps extends StackProps {\r\n     private Architecture architecture;\r\n     public Architecture getArchitecture() {\r\n         return this.architecture;\r\n     }\r\n     public StackUnderTestProps architecture(Architecture architecture) {\r\n         this.architecture = architecture;\r\n         return this;\r\n     }\r\n }\r\n```\r\n\r\nI get an error with the extends because StackProps is an interface not a class. I am unable to find any examples extending StackProps using Java. Not quite sure how to do it considering that StackProps proxy is a final class. Thoughts?","title":"How do I extend StackProps in cdk using Java?","body":"<p>I was trying to implement something similar to <a href=\"https://docs.aws.amazon.com/cdk/api/v2/java/index.html?software/amazon/awscdk/StackProps.html\" rel=\"nofollow noreferrer\">this</a> example.</p>\n<pre class=\"lang-java prettyprint-override\"><code> public class StackUnderTestProps extends StackProps {\n     private Architecture architecture;\n     public Architecture getArchitecture() {\n         return this.architecture;\n     }\n     public StackUnderTestProps architecture(Architecture architecture) {\n         this.architecture = architecture;\n         return this;\n     }\n }\n</code></pre>\n<p>I get an error with the extends because StackProps is an interface not a class. I am unable to find any examples extending StackProps using Java. Not quite sure how to do it considering that StackProps proxy is a final class. Thoughts?</p>\n"},{"tags":["java","asynchronous","vaadin","vaadin-flow","vaadin14"],"owner":{"account_id":19662820,"reputation":169,"user_id":14393923,"display_name":"Miłosz Bąbliński"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":148,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1672932558,"creation_date":1672932558,"question_id":75020789,"body_markdown":"i want to make update in my component after getting event which can be executed during refreshing the page so component can be detached. So the problem is that when i&#39;m using \r\n\r\n    comp.getUI().get().access(() -&gt; makeAction());\r\nmy component can by detached because of reloading the page with PreserveOnRefresh annotation so it throw a error that UI is detached. But after reloading ends then component will be attached again and i would like to get result of the view which should be after firing makeAction function. So my question is what is the best way to make async updates which can by fired during when component is detached but will be attached again.\r\n\r\nI made something like that:\r\n\r\n    public static void doCommandWhenCompUIAccessIsAvailable(Component c, final Command command){\r\n    \tif(c.getUI().isPresent() &amp;&amp; c.isAttached()){\r\n    \t\tc.getUI().get().access(command);\r\n    \t}else{\r\n    \t\tc.addAttachListener(evt -&gt; {\r\n    \t\t\tevt.getUI().access(command);\r\n    \t\t\tevt.unregisterListener();\r\n    \t\t});\r\n    \t}\r\n    }\r\n\r\n but i&#39;m getting error because of attach listener functionality like the one from [this thread][1].  \r\nI&#39;m using Vaadin 14.8.14.\r\n\r\n  [1]: https://stackoverflow.com/questions/75019718/vaadin-flow-14-cant-move-a-node-from-one-state-tree-to-another-error-when-refre/75020305#75020305","title":"Vaadin 14 async update to component send during refresh","body":"<p>i want to make update in my component after getting event which can be executed during refreshing the page so component can be detached. So the problem is that when i'm using</p>\n<pre><code>comp.getUI().get().access(() -&gt; makeAction());\n</code></pre>\n<p>my component can by detached because of reloading the page with PreserveOnRefresh annotation so it throw a error that UI is detached. But after reloading ends then component will be attached again and i would like to get result of the view which should be after firing makeAction function. So my question is what is the best way to make async updates which can by fired during when component is detached but will be attached again.</p>\n<p>I made something like that:</p>\n<pre><code>public static void doCommandWhenCompUIAccessIsAvailable(Component c, final Command command){\n    if(c.getUI().isPresent() &amp;&amp; c.isAttached()){\n        c.getUI().get().access(command);\n    }else{\n        c.addAttachListener(evt -&gt; {\n            evt.getUI().access(command);\n            evt.unregisterListener();\n        });\n    }\n}\n</code></pre>\n<p>but i'm getting error because of attach listener functionality like the one from <a href=\"https://stackoverflow.com/questions/75019718/vaadin-flow-14-cant-move-a-node-from-one-state-tree-to-another-error-when-refre/75020305#75020305\">this thread</a>.<br />\nI'm using Vaadin 14.8.14.</p>\n"},{"tags":["java","spring","spring-boot"],"comments":[{"owner":{"account_id":13919742,"reputation":964,"user_id":10342150,"display_name":"robertobatts"},"score":0,"creation_date":1672931235,"post_id":75020008,"comment_id":132388026,"body_markdown":"Is it working correctly on &quot;/hello&quot;?","body":"Is it working correctly on &quot;/hello&quot;?"},{"owner":{"account_id":27443078,"reputation":41,"user_id":20937437,"display_name":"Seungje Mun"},"score":0,"creation_date":1672932082,"post_id":75020008,"comment_id":132388386,"body_markdown":"yes it&#39;s working on /hello url..","body":"yes it&#39;s working on /hello url.."}],"answers":[{"tags":[],"owner":{"account_id":27443078,"reputation":41,"user_id":20937437,"display_name":"Seungje Mun"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1672932391,"creation_date":1672932391,"answer_id":75020751,"question_id":75020008,"body_markdown":"I found a answer.\r\nThere was no mapped paged with &quot;/&quot;.\r\nAfter I map the &quot;/&quot; page, it work.\r\nI thought that it should be shown White page, but it seems like if start page is white page, then it print log in page even though there is permitted by permitAll.\r\n\r\n    @RestController\r\n    public class HelloController {\r\n        @GetMapping(&quot;/hello&quot;)\r\n        public String hello(){\r\n            return &quot;hello&quot;;\r\n        }\r\n    \r\n        @GetMapping(&quot;/hello2&quot;)\r\n        public String hello2(){\r\n            return &quot;hello2&quot;;\r\n        }\r\n    //\r\n    //    @GetMapping(&quot;/&quot;)\r\n    //    public String start(){\r\n    //        return &quot;startpage&quot;;\r\n    //    }\r\n    }","title":"permitAll of requestMatchers doesn&#39;t work on &quot;/&quot; pattern","body":"<p>I found a answer.\nThere was no mapped paged with &quot;/&quot;.\nAfter I map the &quot;/&quot; page, it work.\nI thought that it should be shown White page, but it seems like if start page is white page, then it print log in page even though there is permitted by permitAll.</p>\n<pre><code>@RestController\npublic class HelloController {\n    @GetMapping(&quot;/hello&quot;)\n    public String hello(){\n        return &quot;hello&quot;;\n    }\n\n    @GetMapping(&quot;/hello2&quot;)\n    public String hello2(){\n        return &quot;hello2&quot;;\n    }\n//\n//    @GetMapping(&quot;/&quot;)\n//    public String start(){\n//        return &quot;startpage&quot;;\n//    }\n}\n</code></pre>\n"}],"owner":{"account_id":27443078,"reputation":41,"user_id":20937437,"display_name":"Seungje Mun"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":823,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":1,"score":2,"last_activity_date":1672932391,"creation_date":1672929086,"question_id":75020008,"body_markdown":"I&#39;m making website and I have to use SecurityFilterChain.\r\nBTW, the start page - localhost:8080/ is always secured.\r\nWhen I enter localhost:8080/, browser always want me to sign in.\r\nHow can I adjust permitAll on &quot;/&quot; pattern?\r\n\r\n```\r\npublic class SecurityConfig {\r\n\r\n    @Bean\r\n    public SecurityFilterChain web(HttpSecurity http) throws Exception {\r\n        return http\r\n                .authorizeHttpRequests(auth -&gt; {\r\n                    auth.requestMatchers(&quot;/&quot;, &quot;/hello&quot;).permitAll();\r\n                    auth.anyRequest().authenticated();\r\n                })\r\n                .formLogin(Customizer.withDefaults())\r\n                .build();\r\n    }\r\n}\r\n```\r\n\r\n\r\n\r\n\r\nWhen I entered localhost:8080/, I expect to see the page, not sign in page.","title":"permitAll of requestMatchers doesn&#39;t work on &quot;/&quot; pattern","body":"<p>I'm making website and I have to use SecurityFilterChain.\nBTW, the start page - localhost:8080/ is always secured.\nWhen I enter localhost:8080/, browser always want me to sign in.\nHow can I adjust permitAll on &quot;/&quot; pattern?</p>\n<pre><code>public class SecurityConfig {\n\n    @Bean\n    public SecurityFilterChain web(HttpSecurity http) throws Exception {\n        return http\n                .authorizeHttpRequests(auth -&gt; {\n                    auth.requestMatchers(&quot;/&quot;, &quot;/hello&quot;).permitAll();\n                    auth.anyRequest().authenticated();\n                })\n                .formLogin(Customizer.withDefaults())\n                .build();\n    }\n}\n</code></pre>\n<p>When I entered localhost:8080/, I expect to see the page, not sign in page.</p>\n"},{"tags":["java","ignite","apacheignite"],"comments":[{"owner":{"account_id":15624718,"reputation":2360,"user_id":11272685,"display_name":"Alexandr Shapkin"},"score":0,"creation_date":1673120346,"post_id":75020685,"comment_id":132428461,"body_markdown":"Is it repetitive? I don&#39;t think there is a chance to debug this without having a complete thread dump and full logs. Are there any errors in the logs? I think you mentioned an NPE in another discussion. Could be a known issue.","body":"Is it repetitive? I don&#39;t think there is a chance to debug this without having a complete thread dump and full logs. Are there any errors in the logs? I think you mentioned an NPE in another discussion. Could be a known issue."},{"owner":{"account_id":470642,"reputation":8064,"user_id":877942,"accept_rate":79,"display_name":"Shades88"},"score":0,"creation_date":1673257158,"post_id":75020685,"comment_id":132449320,"body_markdown":"This error repeated for many hours and then died down on its own. But this occurs on every cluster restart. So this is worrisome","body":"This error repeated for many hours and then died down on its own. But this occurs on every cluster restart. So this is worrisome"},{"owner":{"account_id":11418892,"reputation":419,"user_id":8371000,"display_name":"sk0x50"},"score":0,"creation_date":1673599738,"post_id":75020685,"comment_id":132539894,"body_markdown":"@Shades88 Could you please upload the full thread dump somewhere (for example, GitHub) and provide a link to it? I&#39;ll try to analyze it to understand the root cause.","body":"@Shades88 Could you please upload the full thread dump somewhere (for example, GitHub) and provide a link to it? I&#39;ll try to analyze it to understand the root cause."}],"owner":{"account_id":470642,"reputation":8064,"user_id":877942,"accept_rate":79,"display_name":"Shades88"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":291,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1672932068,"creation_date":1672932068,"question_id":75020685,"body_markdown":"I have a 2 node Ignite cluster on dev environment. Version 2.9.0\r\nI have enabled persistence in my data region configs. When I start cluster it runs fine. Now when I shutdown node one by one and restart them, to check if persistence is working alright, I see below errors in one of the nodes.\r\n\r\n    SEVERE: Blocked system-critical thread has been detected. This can lead to cluster-wide undefined behaviour [workerName=ttl-cleanup-worker, threadName=ttl-cleanup-worker-#44%Gemini.dev%, blockedFor=3079s]\r\n\r\n    [15:04:59] Possible failure suppressed accordingly to a configured handler [hnd=StopNodeOrHaltFailureHandler [tryStop=false, timeout=0, super=AbstractFailureHandler [ignoredFailureTypes=UnmodifiableSet [SYSTEM_WORKER_BLOCKED, SYSTEM_CRITICAL_OPERATION_TIMEOUT]]], failureCtx=FailureContext [type=SYSTEM_WORKER_BLOCKED, err=class o.a.i.IgniteException: GridWorker [name=ttl-cleanup-worker, igniteInstanceName=Gemini.dev, finished=false, heartbeatTs=1672928019372]]]\r\n\r\n    Jan 05, 2023 3:05:08 PM org.apache.ignite.logger.java.JavaLogger error\r\n    SEVERE: Blocked system-critical thread has been detected. This can lead to cluster-wide undefined behaviour [workerName=sys-stripe-0, threadName=sys-stripe-0-#1%Gemini.dev%, blockedFor=2490s]\r\n\r\n    [15:05:08] Possible failure suppressed accordingly to a configured handler [hnd=StopNodeOrHaltFailureHandler [tryStop=false, timeout=0, super=AbstractFailureHandler [ignoredFailureTypes=UnmodifiableSet [SYSTEM_WORKER_BLOCKED, SYSTEM_CRITICAL_OPERATION_TIMEOUT]]], failureCtx=FailureContext [type=SYSTEM_WORKER_BLOCKED, err=class o.a.i.IgniteException: GridWorker [name=sys-stripe-0, igniteInstanceName=Gemini.dev, finished=false, heartbeatTs=1672928617333]]]\r\n\r\n    Jan 05, 2023 3:05:08 PM org.apache.ignite.logger.java.JavaLogger error\r\n    SEVERE: Blocked system-critical thread has been detected. This can lead to cluster-wide undefined behaviour [workerName=sys-stripe-6, threadName=sys-stripe-6-#7%Gemini.dev%, blockedFor=2506s]\r\n\r\n    [15:05:08] Possible failure suppressed accordingly to a configured handler [hnd=StopNodeOrHaltFailureHandler [tryStop=false, timeout=0, super=AbstractFailureHandler [ignoredFailureTypes=UnmodifiableSet [SYSTEM_WORKER_BLOCKED, SYSTEM_CRITICAL_OPERATION_TIMEOUT]]], failureCtx=FailureContext [type=SYSTEM_WORKER_BLOCKED, err=class o.a.i.IgniteException: GridWorker [name=sys-stripe-6, igniteInstanceName=Gemini.dev, finished=false, heartbeatTs=1672928602019]]]\r\n\r\n    Jan 05, 2023 3:05:17 PM org.apache.ignite.logger.java.JavaLogger error\r\n    SEVERE: Blocked system-critical thread has been detected. This can lead to cluster-wide undefined behaviour [workerName=db-checkpoint-thread, threadName=db-checkpoint-thread-#105%Gemini.dev%, blockedFor=3098s]\r\n\r\n    [15:05:17] Possible failure suppressed accordingly to a configured handler [hnd=StopNodeOrHaltFailureHandler [tryStop=false, timeout=0, super=AbstractFailureHandler [ignoredFailureTypes=UnmodifiableSet [SYSTEM_WORKER_BLOCKED, SYSTEM_CRITICAL_OPERATION_TIMEOUT]]], failureCtx=FailureContext [type=SYSTEM_WORKER_BLOCKED, err=class o.a.i.IgniteException: GridWorker [name=db-checkpoint-thread, igniteInstanceName=Gemini.dev, finished=false, heartbeatTs=1672928018434]]]\r\n\r\nWhen these errors are shown some caches of cluster become unresponsive. I am attaching entire Ignite config at the end. \r\n\r\nI also tried observing persistence related metrics, but I don&#39;t see any in JConsole in &quot;Persistent Storage&quot; section. As you can see in my config I have set `metricsEnabled=true` in DR configs.\r\n\r\nI took a threaddump too. Although I am unable to make out anything from it. There are many threads which are in WAITING(parking) state. Here is one snippet from it.\r\n\r\n    &quot;db-checkpoint-thread-#105%Gemini.dev%&quot; #165 prio=5 os_prio=0 cpu=86.94ms elapsed=2085.34s tid=0x00007f9a5c138000 nid=0x3d3b waiting on condition  [0x00007f7eabf7c000]\r\n       java.lang.Thread.State: WAITING (parking)\r\n            at jdk.internal.misc.Unsafe.park(java.base@11.0.17/Native Method)\r\n            - parking to wait for  &lt;0x00000004018cc220&gt; (a java.util.concurrent.locks.ReentrantReadWriteLock$NonfairSync)\r\n            at java.util.concurrent.locks.LockSupport.park(java.base@11.0.17/LockSupport.java:194)\r\n            at java.util.concurrent.locks.AbstractQueuedSynchronizer.parkAndCheckInterrupt(java.base@11.0.17/AbstractQueuedSynchronizer.java:885)\r\n            at java.util.concurrent.locks.AbstractQueuedSynchronizer.acquireQueued(java.base@11.0.17/AbstractQueuedSynchronizer.java:917)\r\n            at java.util.concurrent.locks.AbstractQueuedSynchronizer.acquire(java.base@11.0.17/AbstractQueuedSynchronizer.java:1240)\r\n            at java.util.concurrent.locks.ReentrantReadWriteLock$WriteLock.lock(java.base@11.0.17/ReentrantReadWriteLock.java:959)\r\n\r\nSome lines are cut to keep post under size limit\r\n\r\nBelow is my entire Ignite server config.\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;    \r\n    &lt;beans xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n           xmlns:util=&quot;http://www.springframework.org/schema/util&quot;\r\n           xmlns=&quot;http://www.springframework.org/schema/beans&quot;\r\n           xsi:schemaLocation=&quot;\r\n            http://www.springframework.org/schema/beans\r\n            http://www.springframework.org/schema/beans/spring-beans.xsd\r\n            http://www.springframework.org/schema/util\r\n            http://www.springframework.org/schema/util/spring-util.xsd&quot;&gt;\r\n    \r\n      &lt;bean id=&quot;propertyConfigurer&quot; class=&quot;org.springframework.beans.factory.config.PropertyPlaceholderConfigurer&quot;&gt;\r\n        &lt;property name=&quot;systemPropertiesModeName&quot; value=&quot;SYSTEM_PROPERTIES_MODE_FALLBACK&quot;/&gt;\r\n        &lt;property name=&quot;searchSystemEnvironment&quot; value=&quot;true&quot;/&gt;\r\n      &lt;/bean&gt;\r\n    \r\n      &lt;bean id=&quot;ignite.cfg&quot; class=&quot;org.apache.ignite.configuration.IgniteConfiguration&quot;&gt;\r\n        &lt;!-- Set to true to enable distributed class loading for examples, default is false. --&gt;\r\n        &lt;property name=&quot;sslContextFactory&quot;&gt;\r\n          &lt;bean class=&quot;org.apache.ignite.ssl.SslContextFactory&quot;&gt;\r\n              &lt;property name=&quot;keyStoreFilePath&quot; value=&quot;/home/sysSvcDevOps/ssl/ignite1.keystore.jks&quot;/&gt;\r\n              &lt;property name=&quot;keyStorePassword&quot; value=&quot;KeyStore443&quot;/&gt;\r\n              &lt;property name=&quot;keyStoreType&quot; value=&quot;jks&quot;/&gt;\r\n              &lt;property name=&quot;trustStoreFilePath&quot; value=&quot;/home/sysSvcDevOps/ssl/cacerts/java.cacerts.jks&quot;/&gt;\r\n              &lt;property name=&quot;trustStorePassword&quot; value=&quot;changeit&quot;/&gt;\r\n              &lt;property name=&quot;trustStoreType&quot; value=&quot;jks&quot;/&gt;\r\n          &lt;/bean&gt;\r\n        &lt;/property&gt;\r\n        &lt;property name=&quot;igniteInstanceName&quot; value=&quot;.dev&quot;/&gt;\r\n        &lt;property name=&quot;consistentId&quot; value=&quot;ignite1.dev&quot;/&gt;\r\n        &lt;property name=&quot;workDirectory&quot; value=&quot;/apps/Svc/dev/Ignite/IgniteData/persistentstore/work&quot;/&gt;\r\n    \r\n          &lt;property name=&quot;rebalanceThreadPoolSize&quot; value=&quot;8&quot;/&gt;\r\n          &lt;property name=&quot;publicThreadPoolSize&quot; value=&quot;32&quot;/&gt;\r\n          &lt;property name=&quot;systemThreadPoolSize&quot; value=&quot;64&quot;/&gt;\r\n          &lt;property name=&quot;queryThreadPoolSize&quot; value=&quot;64&quot;/&gt;\r\n          &lt;property name=&quot;failureDetectionTimeout&quot; value=&quot;30000&quot;/&gt;\r\n          &lt;property name=&quot;authenticationEnabled&quot; value=&quot;true&quot;/&gt;\r\n          &lt;property name=&quot;metricsUpdateFrequency&quot; value=&quot;30000&quot;/&gt;\r\n          &lt;property name=&quot;peerClassLoadingEnabled&quot; value=&quot;false&quot;/&gt;\r\n          &lt;property name=&quot;clientMode&quot; value=&quot;false&quot;/&gt;\r\n    \r\n        &lt;!-- Enable task execution events for examples. --&gt;\r\n        &lt;property name=&quot;includeEventTypes&quot;&gt;\r\n          &lt;list&gt;\r\n            &lt;util:constant static-field=&quot;org.apache.ignite.events.EventType.EVT_CACHE_STARTED&quot;/&gt;\r\n            &lt;util:constant static-field=&quot;org.apache.ignite.events.EventType.EVT_CACHE_STOPPED&quot;/&gt;\r\n            &lt;util:constant static-field=&quot;org.apache.ignite.events.EventType.EVT_CACHE_REBALANCE_PART_DATA_LOST&quot;/&gt;\r\n            &lt;util:constant static-field=&quot;org.apache.ignite.events.EventType.EVT_CACHE_NODES_LEFT&quot;/&gt;\r\n          &lt;/list&gt;\r\n        &lt;/property&gt;\r\n    \r\n        &lt;property name=&quot;dataStorageConfiguration&quot;&gt;\r\n          &lt;bean class=&quot;org.apache.ignite.configuration.DataStorageConfiguration&quot;&gt;\r\n    \r\n            &lt;property name=&quot;walSegmentSize&quot; value=&quot;1073741824&quot;/&gt;\r\n              &lt;property name=&quot;walSegments&quot; value=&quot;20&quot;/&gt;\r\n              &lt;property name=&quot;maxWalArchiveSize&quot; value=&quot;10737418240&quot;/&gt;\r\n              &lt;property name=&quot;walCompactionEnabled&quot; value=&quot;true&quot;/&gt;\r\n              &lt;property name=&quot;walCompactionLevel&quot; value=&quot;4&quot;/&gt;\r\n              &lt;property name=&quot;checkpointFrequency&quot; value=&quot;300000&quot;/&gt;\r\n              &lt;property name=&quot;checkpointThreads&quot; value=&quot;16&quot;/&gt;\r\n              &lt;property name=&quot;checkpointReadLockTimeout&quot; value=&quot;60000&quot;/&gt;\r\n              &lt;property name=&quot;lockWaitTime&quot; value=&quot;45000&quot;/&gt;\r\n              &lt;property name=&quot;checkpointWriteOrder&quot; value=&quot;RANDOM&quot;/&gt;\r\n              &lt;property name=&quot;pageSize&quot; value=&quot;4096&quot;/&gt;\r\n              &lt;property name=&quot;writeThrottlingEnabled&quot; value=&quot;true&quot;/&gt;\r\n    \r\n            &lt;!-- wal storage paths --&gt;\r\n            &lt;property name=&quot;walPath&quot; value=&quot;/apps/Svc/dev/Ignite/IgniteData&quot;/&gt;\r\n            &lt;property name=&quot;walArchivePath&quot; value=&quot;/apps/Svc/dev/Ignite/IgniteDataArchive&quot;/&gt;\r\n            &lt;property name=&quot;storagePath&quot; value=&quot;/apps/Svc/dev/Ignite/IgniteData/archive&quot;/&gt;\r\n    \r\n            &lt;property name=&quot;dataRegionConfigurations&quot;&gt;\r\n              &lt;list&gt;\r\n                    &lt;bean class=&quot;org.apache.ignite.configuration.DataRegionConfiguration&quot;&gt;\r\n                        &lt;property name=&quot;name&quot; value=&quot;dr.dev.referencedata&quot;/&gt;\r\n                        &lt;property name=&quot;persistenceEnabled&quot; value=&quot;true&quot;/&gt;\r\n                        &lt;property name=&quot;initialSize&quot; value=&quot;1073741824&quot;/&gt;\r\n                        &lt;property name=&quot;maxSize&quot; value=&quot;4294969673&quot;/&gt;\r\n                        &lt;property name=&quot;checkpointPageBufferSize&quot; value=&quot;1073741824&quot;/&gt;\r\n                    &lt;/bean&gt;\r\n                    &lt;bean class=&quot;org.apache.ignite.configuration.DataRegionConfiguration&quot;&gt;\r\n                        &lt;property name=&quot;name&quot; value=&quot;dr.dev.input&quot;/&gt;\r\n                        &lt;property name=&quot;persistenceEnabled&quot; value=&quot;true&quot;/&gt;\r\n                        &lt;property name=&quot;metricsEnabled&quot; value=&quot;true&quot;/&gt;\r\n                        &lt;property name=&quot;checkpointPageBufferSize&quot; value=&quot;#{4 * 1024 * 1024 * 1024}&quot;/&gt;\r\n                        &lt;property name=&quot;initialSize&quot; value=&quot;12884901888&quot;/&gt;\r\n                        &lt;property name=&quot;maxSize&quot; value=&quot;81604378624&quot;/&gt;\r\n                        &lt;property name=&quot;pageEvictionMode&quot; value=&quot;RANDOM_2_LRU&quot;/&gt;\r\n                    &lt;/bean&gt;\r\n                    &lt;bean class=&quot;org.apache.ignite.configuration.DataRegionConfiguration&quot;&gt;\r\n                        &lt;property name=&quot;name&quot; value=&quot;dr.dev.input.exception&quot;/&gt;\r\n                        &lt;property name=&quot;persistenceEnabled&quot; value=&quot;true&quot;/&gt;\r\n                        &lt;property name=&quot;metricsEnabled&quot; value=&quot;true&quot;/&gt;\r\n                        &lt;property name=&quot;checkpointPageBufferSize&quot; value=&quot;#{4 * 1024 * 1024 * 1024}&quot;/&gt;\r\n                        &lt;property name=&quot;initialSize&quot; value=&quot;4294967296&quot;/&gt;\r\n                        &lt;property name=&quot;maxSize&quot; value=&quot;21474836480&quot;/&gt;\r\n                        &lt;property name=&quot;pageEvictionMode&quot; value=&quot;RANDOM_2_LRU&quot;/&gt;\r\n                    &lt;/bean&gt;\r\n                    &lt;bean class=&quot;org.apache.ignite.configuration.DataRegionConfiguration&quot;&gt;\r\n                        &lt;property name=&quot;name&quot; value=&quot;dr.dev.output&quot;/&gt;\r\n                        &lt;property name=&quot;initialSize&quot; value=&quot;1073741824&quot;/&gt;\r\n                        &lt;property name=&quot;persistenceEnabled&quot; value=&quot;true&quot;/&gt;\r\n                        &lt;property name=&quot;metricsEnabled&quot; value=&quot;true&quot;/&gt;\r\n                        &lt;property name=&quot;checkpointPageBufferSize&quot; value=&quot;#{2 * 1024 * 1024 * 1024}&quot;/&gt;\r\n                        &lt;property name=&quot;maxSize&quot; value=&quot;2147483648&quot;/&gt;\r\n                    &lt;/bean&gt;\r\n              &lt;/list&gt;\r\n            &lt;/property&gt;\r\n    \r\n            &lt;property name=&quot;defaultDataRegionConfiguration&quot;&gt;\r\n              &lt;bean class=&quot;org.apache.ignite.configuration.DataRegionConfiguration&quot;&gt;\r\n                  &lt;property name=&quot;name&quot; value=&quot;default_region&quot;/&gt;\r\n                  &lt;property name=&quot;persistenceEnabled&quot; value=&quot;true&quot;/&gt;\r\n                  &lt;property name=&quot;initialSize&quot; value=&quot;268435456&quot;/&gt;\r\n                  &lt;property name=&quot;maxSize&quot; value=&quot;268435456&quot;/&gt;\r\n    \r\n              &lt;/bean&gt;\r\n            &lt;/property&gt;\r\n          &lt;/bean&gt;\r\n        &lt;/property&gt;\r\n    \r\n        &lt;property name=&quot;discoverySpi&quot;&gt;\r\n          &lt;bean class=&quot;org.apache.ignite.spi.discovery.zk.ZookeeperDiscoverySpi&quot;&gt;\r\n            &lt;property name=&quot;zkConnectionString&quot; value=&quot;zk1.intranet.com:22001,zk2.intranet.com:22001&quot;/&gt;\r\n              &lt;property name=&quot;zkRootPath&quot; value=&quot;/ignite&quot;/&gt;\r\n              &lt;property name=&quot;sessionTimeout&quot; value=&quot;120000&quot;/&gt;\r\n              &lt;property name=&quot;joinTimeout&quot; value=&quot;10000&quot;/&gt;\r\n          &lt;/bean&gt;\r\n        &lt;/property&gt;\r\n    \r\n        &lt;property name=&quot;communicationSpi&quot;&gt;\r\n          &lt;bean class=&quot;org.apache.ignite.spi.communication.tcp.TcpCommunicationSpi&quot;&gt;\r\n              &lt;property name=&quot;socketWriteTimeout&quot; value=&quot;60000&quot;/&gt;\r\n          &lt;/bean&gt;\r\n        &lt;/property&gt;\r\n    \r\n        &lt;property name=&quot;cacheConfiguration&quot;&gt;\r\n          &lt;list&gt;\r\n              &lt;bean id=&quot;cache-template-bean&quot; abstract=&quot;true&quot;\r\n                    class=&quot;org.apache.ignite.configuration.CacheConfiguration&quot;&gt;\r\n                  &lt;property name=&quot;name&quot; value=&quot;referenceDataCacheTemplate*&quot;/&gt;\r\n                  &lt;property name=&quot;cacheMode&quot; value=&quot;REPLICATED&quot;/&gt;\r\n                  &lt;property name=&quot;backups&quot; value=&quot;1&quot;/&gt;\r\n                  &lt;property name=&quot;atomicityMode&quot; value=&quot;ATOMIC&quot;/&gt;\r\n                  &lt;property name=&quot;dataRegionName&quot; value=&quot;dr.dev.referencedata&quot;/&gt;\r\n                  &lt;property name=&quot;partitionLossPolicy&quot; value=&quot;READ_WRITE_SAFE&quot;/&gt;\r\n                  &lt;property name=&quot;writeSynchronizationMode&quot; value=&quot;PRIMARY_SYNC&quot;/&gt;\r\n                  &lt;property name=&quot;statisticsEnabled&quot; value=&quot;true&quot;/&gt;\r\n                  &lt;property name=&quot;sqlIndexMaxInlineSize&quot; value=&quot;203&quot;/&gt;\r\n                &lt;property name=&quot;affinity&quot;&gt;\r\n                  &lt;bean class=&quot;org.apache.ignite.cache.affinity.rendezvous.RendezvousAffinityFunction&quot;&gt;\r\n                      &lt;property name=&quot;partitions&quot; value=&quot;256&quot;/&gt;\r\n    \r\n    \r\n                  &lt;/bean&gt;\r\n                &lt;/property&gt;\r\n              &lt;/bean&gt;\r\n              &lt;bean id=&quot;cache-template-bean&quot; abstract=&quot;true&quot;\r\n                    class=&quot;org.apache.ignite.configuration.CacheConfiguration&quot;&gt;\r\n                  &lt;property name=&quot;name&quot; value=&quot;inputMetadataCacheTemplate*&quot;/&gt;\r\n                  &lt;property name=&quot;cacheMode&quot; value=&quot;PARTITIONED&quot;/&gt;\r\n                  &lt;property name=&quot;backups&quot; value=&quot;1&quot;/&gt;\r\n                  &lt;property name=&quot;atomicityMode&quot; value=&quot;ATOMIC&quot;/&gt;\r\n                  &lt;property name=&quot;dataRegionName&quot; value=&quot;dr.dev.input&quot;/&gt;\r\n                  &lt;property name=&quot;partitionLossPolicy&quot; value=&quot;READ_WRITE_SAFE&quot;/&gt;\r\n                  &lt;property name=&quot;writeSynchronizationMode&quot; value=&quot;PRIMARY_SYNC&quot;/&gt;\r\n                  &lt;property name=&quot;statisticsEnabled&quot; value=&quot;true&quot;/&gt;\r\n                  &lt;property name=&quot;readFromBackup&quot; value=&quot;false&quot;/&gt;\r\n                  &lt;property name=&quot;sqlIndexMaxInlineSize&quot; value=&quot;211&quot;/&gt;\r\n                &lt;property name=&quot;affinity&quot;&gt;\r\n                  &lt;bean class=&quot;org.apache.ignite.cache.affinity.rendezvous.RendezvousAffinityFunction&quot;&gt;\r\n                      &lt;property name=&quot;partitions&quot; value=&quot;256&quot;/&gt;\r\n    \r\n                    &lt;property name=&quot;affinityBackupFilter&quot;&gt;\r\n                              &lt;bean class=&quot;org.apache.ignite.cache.affinity.rendezvous.ClusterNodeAttributeAffinityBackupFilter&quot;&gt;\r\n                                &lt;constructor-arg&gt;\r\n                                                      &lt;array value-type=&quot;java.lang.String&quot;&gt;\r\n                                                      &lt;value&gt;RACK_ID&lt;/value&gt;\r\n                                                         &lt;/array&gt;\r\n                                 &lt;/constructor-arg&gt;\r\n                              &lt;/bean&gt;\r\n                    &lt;/property&gt;\r\n    \r\n                  &lt;/bean&gt;\r\n                &lt;/property&gt;\r\n                  &lt;property name=&quot;expiryPolicyFactory&quot;&gt;\r\n                    &lt;bean class=&quot;javax.cache.expiry.ModifiedExpiryPolicy&quot; factory-method=&quot;factoryOf&quot;&gt;\r\n                      &lt;constructor-arg&gt;\r\n                        &lt;bean class=&quot;javax.cache.expiry.Duration&quot;&gt;\r\n                          &lt;constructor-arg value=&quot;DAYS&quot;/&gt;\r\n                          &lt;constructor-arg value=&quot;5&quot;/&gt;\r\n                        &lt;/bean&gt;\r\n                      &lt;/constructor-arg&gt;\r\n                    &lt;/bean&gt;\r\n                  &lt;/property&gt;\r\n              &lt;/bean&gt;\r\n              &lt;bean id=&quot;cache-template-bean&quot; abstract=&quot;true&quot;\r\n                    class=&quot;org.apache.ignite.configuration.CacheConfiguration&quot;&gt;\r\n                  &lt;property name=&quot;name&quot; value=&quot;inputReconCacheTemplate*&quot;/&gt;\r\n                  &lt;property name=&quot;cacheMode&quot; value=&quot;PARTITIONED&quot;/&gt;\r\n                  &lt;property name=&quot;backups&quot; value=&quot;1&quot;/&gt;\r\n                  &lt;property name=&quot;atomicityMode&quot; value=&quot;ATOMIC&quot;/&gt;\r\n                  &lt;property name=&quot;dataRegionName&quot; value=&quot;dr.dev.input&quot;/&gt;\r\n                  &lt;property name=&quot;partitionLossPolicy&quot; value=&quot;READ_WRITE_SAFE&quot;/&gt;\r\n                  &lt;property name=&quot;writeSynchronizationMode&quot; value=&quot;PRIMARY_SYNC&quot;/&gt;\r\n                  &lt;property name=&quot;statisticsEnabled&quot; value=&quot;true&quot;/&gt;\r\n                  &lt;property name=&quot;readFromBackup&quot; value=&quot;false&quot;/&gt;\r\n                  &lt;property name=&quot;sqlIndexMaxInlineSize&quot; value=&quot;211&quot;/&gt;\r\n                &lt;property name=&quot;affinity&quot;&gt;\r\n                  &lt;bean class=&quot;org.apache.ignite.cache.affinity.rendezvous.RendezvousAffinityFunction&quot;&gt;\r\n                      &lt;property name=&quot;partitions&quot; value=&quot;256&quot;/&gt;\r\n    \r\n                    &lt;property name=&quot;affinityBackupFilter&quot;&gt;\r\n                              &lt;bean class=&quot;org.apache.ignite.cache.affinity.rendezvous.ClusterNodeAttributeAffinityBackupFilter&quot;&gt;\r\n                                &lt;constructor-arg&gt;\r\n                                                      &lt;array value-type=&quot;java.lang.String&quot;&gt;\r\n                                                      &lt;value&gt;RACK_ID&lt;/value&gt;\r\n                                                         &lt;/array&gt;\r\n                                 &lt;/constructor-arg&gt;\r\n                              &lt;/bean&gt;\r\n                    &lt;/property&gt;\r\n    \r\n                  &lt;/bean&gt;\r\n                &lt;/property&gt;\r\n                  &lt;property name=&quot;expiryPolicyFactory&quot;&gt;\r\n                    &lt;bean class=&quot;javax.cache.expiry.CreatedExpiryPolicy&quot; factory-method=&quot;factoryOf&quot;&gt;\r\n                      &lt;constructor-arg&gt;\r\n                        &lt;bean class=&quot;javax.cache.expiry.Duration&quot;&gt;\r\n                          &lt;constructor-arg value=&quot;DAYS&quot;/&gt;\r\n                          &lt;constructor-arg value=&quot;4&quot;/&gt;\r\n                        &lt;/bean&gt;\r\n                      &lt;/constructor-arg&gt;\r\n                    &lt;/bean&gt;\r\n                  &lt;/property&gt;\r\n              &lt;/bean&gt;\r\n              &lt;bean id=&quot;cache-template-bean&quot; abstract=&quot;true&quot;\r\n                    class=&quot;org.apache.ignite.configuration.CacheConfiguration&quot;&gt;\r\n                  &lt;property name=&quot;name&quot; value=&quot;inputExceptionsCacheTemplate*&quot;/&gt;\r\n                  &lt;property name=&quot;cacheMode&quot; value=&quot;PARTITIONED&quot;/&gt;\r\n                  &lt;property name=&quot;backups&quot; value=&quot;1&quot;/&gt;\r\n                  &lt;property name=&quot;atomicityMode&quot; value=&quot;ATOMIC&quot;/&gt;\r\n                  &lt;property name=&quot;dataRegionName&quot; value=&quot;dr.dev.input.exception&quot;/&gt;\r\n                  &lt;property name=&quot;partitionLossPolicy&quot; value=&quot;READ_WRITE_SAFE&quot;/&gt;\r\n                  &lt;property name=&quot;writeSynchronizationMode&quot; value=&quot;PRIMARY_SYNC&quot;/&gt;\r\n                  &lt;property name=&quot;statisticsEnabled&quot; value=&quot;true&quot;/&gt;\r\n                  &lt;property name=&quot;readFromBackup&quot; value=&quot;false&quot;/&gt;\r\n                &lt;property name=&quot;affinity&quot;&gt;\r\n                  &lt;bean class=&quot;org.apache.ignite.cache.affinity.rendezvous.RendezvousAffinityFunction&quot;&gt;\r\n                      &lt;property name=&quot;partitions&quot; value=&quot;256&quot;/&gt;\r\n    \r\n                    &lt;property name=&quot;affinityBackupFilter&quot;&gt;\r\n                              &lt;bean class=&quot;org.apache.ignite.cache.affinity.rendezvous.ClusterNodeAttributeAffinityBackupFilter&quot;&gt;\r\n                                &lt;constructor-arg&gt;\r\n                                                      &lt;array value-type=&quot;java.lang.String&quot;&gt;\r\n                                                      &lt;value&gt;RACK_ID&lt;/value&gt;\r\n                                                         &lt;/array&gt;\r\n                                 &lt;/constructor-arg&gt;\r\n                              &lt;/bean&gt;\r\n                    &lt;/property&gt;\r\n    \r\n                  &lt;/bean&gt;\r\n                &lt;/property&gt;\r\n                  &lt;property name=&quot;expiryPolicyFactory&quot;&gt;\r\n                    &lt;bean class=&quot;javax.cache.expiry.CreatedExpiryPolicy&quot; factory-method=&quot;factoryOf&quot;&gt;\r\n                      &lt;constructor-arg&gt;\r\n                        &lt;bean class=&quot;javax.cache.expiry.Duration&quot;&gt;\r\n                          &lt;constructor-arg value=&quot;DAYS&quot;/&gt;\r\n                          &lt;constructor-arg value=&quot;15&quot;/&gt;\r\n                        &lt;/bean&gt;\r\n                      &lt;/constructor-arg&gt;\r\n                    &lt;/bean&gt;\r\n                  &lt;/property&gt;\r\n              &lt;/bean&gt;\r\n              &lt;bean id=&quot;cache-template-bean&quot; abstract=&quot;true&quot;\r\n                    class=&quot;org.apache.ignite.configuration.CacheConfiguration&quot;&gt;\r\n                  &lt;property name=&quot;name&quot; value=&quot;outputDataCacheTemplate*&quot;/&gt;\r\n                  &lt;property name=&quot;cacheMode&quot; value=&quot;PARTITIONED&quot;/&gt;\r\n                  &lt;property name=&quot;backups&quot; value=&quot;1&quot;/&gt;\r\n                  &lt;property name=&quot;atomicityMode&quot; value=&quot;ATOMIC&quot;/&gt;\r\n                  &lt;property name=&quot;dataRegionName&quot; value=&quot;dr.dev.output&quot;/&gt;\r\n                  &lt;property name=&quot;partitionLossPolicy&quot; value=&quot;READ_WRITE_SAFE&quot;/&gt;\r\n                  &lt;property name=&quot;writeSynchronizationMode&quot; value=&quot;PRIMARY_SYNC&quot;/&gt;\r\n                  &lt;property name=&quot;sqlSchema&quot; value=&quot;&quot;/&gt;\r\n                  &lt;property name=&quot;statisticsEnabled&quot; value=&quot;true&quot;/&gt;\r\n                &lt;property name=&quot;affinity&quot;&gt;\r\n                  &lt;bean class=&quot;org.apache.ignite.cache.affinity.rendezvous.RendezvousAffinityFunction&quot;&gt;\r\n                      &lt;property name=&quot;partitions&quot; value=&quot;256&quot;/&gt;\r\n    \r\n                    &lt;property name=&quot;affinityBackupFilter&quot;&gt;\r\n                              &lt;bean class=&quot;org.apache.ignite.cache.affinity.rendezvous.ClusterNodeAttributeAffinityBackupFilter&quot;&gt;\r\n                                &lt;constructor-arg&gt;\r\n                                                      &lt;array value-type=&quot;java.lang.String&quot;&gt;\r\n                                                      &lt;value&gt;RACK_ID&lt;/value&gt;\r\n                                                         &lt;/array&gt;\r\n                                 &lt;/constructor-arg&gt;\r\n                              &lt;/bean&gt;\r\n                    &lt;/property&gt;\r\n    \r\n                  &lt;/bean&gt;\r\n                &lt;/property&gt;\r\n                  &lt;property name=&quot;expiryPolicyFactory&quot;&gt;\r\n                    &lt;bean class=&quot;javax.cache.expiry.CreatedExpiryPolicy&quot; factory-method=&quot;factoryOf&quot;&gt;\r\n                      &lt;constructor-arg&gt;\r\n                        &lt;bean class=&quot;javax.cache.expiry.Duration&quot;&gt;\r\n                          &lt;constructor-arg value=&quot;DAYS&quot;/&gt;\r\n                          &lt;constructor-arg value=&quot;450&quot;/&gt;\r\n                        &lt;/bean&gt;\r\n                      &lt;/constructor-arg&gt;\r\n                    &lt;/bean&gt;\r\n                  &lt;/property&gt;\r\n              &lt;/bean&gt;\r\n              &lt;bean id=&quot;cache-template-bean&quot; abstract=&quot;true&quot;\r\n                    class=&quot;org.apache.ignite.configuration.CacheConfiguration&quot;&gt;\r\n                  &lt;property name=&quot;name&quot; value=&quot;reconAuditDataCacheTemplate*&quot;/&gt;\r\n                  &lt;property name=&quot;cacheMode&quot; value=&quot;PARTITIONED&quot;/&gt;\r\n                  &lt;property name=&quot;backups&quot; value=&quot;1&quot;/&gt;\r\n                  &lt;property name=&quot;atomicityMode&quot; value=&quot;ATOMIC&quot;/&gt;\r\n                  &lt;property name=&quot;dataRegionName&quot; value=&quot;dr.dev.referencedata&quot;/&gt;\r\n                  &lt;property name=&quot;partitionLossPolicy&quot; value=&quot;READ_WRITE_SAFE&quot;/&gt;\r\n                  &lt;property name=&quot;writeSynchronizationMode&quot; value=&quot;PRIMARY_SYNC&quot;/&gt;\r\n                  &lt;property name=&quot;sqlSchema&quot; value=&quot;&quot;/&gt;\r\n                  &lt;property name=&quot;statisticsEnabled&quot; value=&quot;true&quot;/&gt;\r\n                &lt;property name=&quot;affinity&quot;&gt;\r\n                  &lt;bean class=&quot;org.apache.ignite.cache.affinity.rendezvous.RendezvousAffinityFunction&quot;&gt;\r\n                      &lt;property name=&quot;partitions&quot; value=&quot;256&quot;/&gt;\r\n    \r\n                    &lt;property name=&quot;affinityBackupFilter&quot;&gt;\r\n                              &lt;bean class=&quot;org.apache.ignite.cache.affinity.rendezvous.ClusterNodeAttributeAffinityBackupFilter&quot;&gt;\r\n                                &lt;constructor-arg&gt;\r\n                                                      &lt;array value-type=&quot;java.lang.String&quot;&gt;\r\n                                                      &lt;value&gt;RACK_ID&lt;/value&gt;\r\n                                                         &lt;/array&gt;\r\n                                 &lt;/constructor-arg&gt;\r\n                              &lt;/bean&gt;\r\n                    &lt;/property&gt;\r\n    \r\n                  &lt;/bean&gt;\r\n                &lt;/property&gt;\r\n              &lt;/bean&gt;\r\n              &lt;bean id=&quot;cache-template-bean&quot; abstract=&quot;true&quot;\r\n                    class=&quot;org.apache.ignite.configuration.CacheConfiguration&quot;&gt;\r\n                  &lt;property name=&quot;name&quot; value=&quot;fileDataCacheTemplate*&quot;/&gt;\r\n                  &lt;property name=&quot;cacheMode&quot; value=&quot;PARTITIONED&quot;/&gt;\r\n                  &lt;property name=&quot;backups&quot; value=&quot;1&quot;/&gt;\r\n                  &lt;property name=&quot;atomicityMode&quot; value=&quot;ATOMIC&quot;/&gt;\r\n                  &lt;property name=&quot;dataRegionName&quot; value=&quot;dr.dev.input&quot;/&gt;\r\n                  &lt;property name=&quot;partitionLossPolicy&quot; value=&quot;READ_WRITE_SAFE&quot;/&gt;\r\n                  &lt;property name=&quot;writeSynchronizationMode&quot; value=&quot;PRIMARY_SYNC&quot;/&gt;\r\n                  &lt;property name=&quot;statisticsEnabled&quot; value=&quot;true&quot;/&gt;\r\n                  &lt;property name=&quot;queryParallelism&quot; value=&quot;4&quot;/&gt;\r\n                  &lt;property name=&quot;eagerTtl&quot; value=&quot;true&quot;/&gt;\r\n                &lt;property name=&quot;affinity&quot;&gt;\r\n                  &lt;bean class=&quot;org.apache.ignite.cache.affinity.rendezvous.RendezvousAffinityFunction&quot;&gt;\r\n                      &lt;property name=&quot;partitions&quot; value=&quot;256&quot;/&gt;\r\n    \r\n                    &lt;property name=&quot;affinityBackupFilter&quot;&gt;\r\n                              &lt;bean class=&quot;org.apache.ignite.cache.affinity.rendezvous.ClusterNodeAttributeAffinityBackupFilter&quot;&gt;\r\n                                &lt;constructor-arg&gt;\r\n                                                      &lt;array value-type=&quot;java.lang.String&quot;&gt;\r\n                                                      &lt;value&gt;RACK_ID&lt;/value&gt;\r\n                                                         &lt;/array&gt;\r\n                                 &lt;/constructor-arg&gt;\r\n                              &lt;/bean&gt;\r\n                    &lt;/property&gt;\r\n    \r\n                  &lt;/bean&gt;\r\n                &lt;/property&gt;\r\n                  &lt;property name=&quot;expiryPolicyFactory&quot;&gt;\r\n                    &lt;bean class=&quot;javax.cache.expiry.CreatedExpiryPolicy&quot; factory-method=&quot;factoryOf&quot;&gt;\r\n                      &lt;constructor-arg&gt;\r\n                        &lt;bean class=&quot;javax.cache.expiry.Duration&quot;&gt;\r\n                          &lt;constructor-arg value=&quot;DAYS&quot;/&gt;\r\n                          &lt;constructor-arg value=&quot;5&quot;/&gt;\r\n                        &lt;/bean&gt;\r\n                      &lt;/constructor-arg&gt;\r\n                    &lt;/bean&gt;\r\n                  &lt;/property&gt;\r\n              &lt;/bean&gt;\r\n              &lt;bean id=&quot;cache-template-bean&quot; abstract=&quot;true&quot;\r\n                    class=&quot;org.apache.ignite.configuration.CacheConfiguration&quot;&gt;\r\n                  &lt;property name=&quot;name&quot; value=&quot;shortLivedReferenceDataTemplate*&quot;/&gt;\r\n                  &lt;property name=&quot;cacheMode&quot; value=&quot;PARTITIONED&quot;/&gt;\r\n                  &lt;property name=&quot;backups&quot; value=&quot;1&quot;/&gt;\r\n                  &lt;property name=&quot;atomicityMode&quot; value=&quot;ATOMIC&quot;/&gt;\r\n                  &lt;property name=&quot;dataRegionName&quot; value=&quot;dr.dev.input.exception&quot;/&gt;\r\n                  &lt;property name=&quot;partitionLossPolicy&quot; value=&quot;READ_WRITE_SAFE&quot;/&gt;\r\n                  &lt;property name=&quot;writeSynchronizationMode&quot; value=&quot;PRIMARY_SYNC&quot;/&gt;\r\n                  &lt;property name=&quot;statisticsEnabled&quot; value=&quot;true&quot;/&gt;\r\n                  &lt;property name=&quot;managementEnabled&quot; value=&quot;true&quot;/&gt;\r\n                &lt;property name=&quot;affinity&quot;&gt;\r\n                  &lt;bean class=&quot;org.apache.ignite.cache.affinity.rendezvous.RendezvousAffinityFunction&quot;&gt;\r\n                      &lt;property name=&quot;partitions&quot; value=&quot;64&quot;/&gt;\r\n    \r\n                    &lt;property name=&quot;affinityBackupFilter&quot;&gt;\r\n                              &lt;bean class=&quot;org.apache.ignite.cache.affinity.rendezvous.ClusterNodeAttributeAffinityBackupFilter&quot;&gt;\r\n                                &lt;constructor-arg&gt;\r\n                                                      &lt;array value-type=&quot;java.lang.String&quot;&gt;\r\n                                                      &lt;value&gt;RACK_ID&lt;/value&gt;\r\n                                                         &lt;/array&gt;\r\n                                 &lt;/constructor-arg&gt;\r\n                              &lt;/bean&gt;\r\n                    &lt;/property&gt;\r\n    \r\n                  &lt;/bean&gt;\r\n                &lt;/property&gt;\r\n                  &lt;property name=&quot;expiryPolicyFactory&quot;&gt;\r\n                    &lt;bean class=&quot;javax.cache.expiry.CreatedExpiryPolicy&quot; factory-method=&quot;factoryOf&quot;&gt;\r\n                      &lt;constructor-arg&gt;\r\n                        &lt;bean class=&quot;javax.cache.expiry.Duration&quot;&gt;\r\n                          &lt;constructor-arg value=&quot;DAYS&quot;/&gt;\r\n                          &lt;constructor-arg value=&quot;2&quot;/&gt;\r\n                        &lt;/bean&gt;\r\n                      &lt;/constructor-arg&gt;\r\n                    &lt;/bean&gt;\r\n                  &lt;/property&gt;\r\n              &lt;/bean&gt;\r\n    \r\n          &lt;/list&gt;\r\n        &lt;/property&gt;\r\n    \r\n        &lt;property name=&quot;sqlSchemas&quot;&gt;\r\n          &lt;list&gt;\r\n            &lt;value&gt;dataInput&lt;/value&gt;\r\n          &lt;/list&gt;\r\n        &lt;/property&gt;\r\n    \r\n      &lt;/bean&gt;\r\n    &lt;/beans&gt;","title":"Ignite system-critical thread blocked","body":"<p>I have a 2 node Ignite cluster on dev environment. Version 2.9.0\nI have enabled persistence in my data region configs. When I start cluster it runs fine. Now when I shutdown node one by one and restart them, to check if persistence is working alright, I see below errors in one of the nodes.</p>\n<pre><code>SEVERE: Blocked system-critical thread has been detected. This can lead to cluster-wide undefined behaviour [workerName=ttl-cleanup-worker, threadName=ttl-cleanup-worker-#44%Gemini.dev%, blockedFor=3079s]\n\n[15:04:59] Possible failure suppressed accordingly to a configured handler [hnd=StopNodeOrHaltFailureHandler [tryStop=false, timeout=0, super=AbstractFailureHandler [ignoredFailureTypes=UnmodifiableSet [SYSTEM_WORKER_BLOCKED, SYSTEM_CRITICAL_OPERATION_TIMEOUT]]], failureCtx=FailureContext [type=SYSTEM_WORKER_BLOCKED, err=class o.a.i.IgniteException: GridWorker [name=ttl-cleanup-worker, igniteInstanceName=Gemini.dev, finished=false, heartbeatTs=1672928019372]]]\n\nJan 05, 2023 3:05:08 PM org.apache.ignite.logger.java.JavaLogger error\nSEVERE: Blocked system-critical thread has been detected. This can lead to cluster-wide undefined behaviour [workerName=sys-stripe-0, threadName=sys-stripe-0-#1%Gemini.dev%, blockedFor=2490s]\n\n[15:05:08] Possible failure suppressed accordingly to a configured handler [hnd=StopNodeOrHaltFailureHandler [tryStop=false, timeout=0, super=AbstractFailureHandler [ignoredFailureTypes=UnmodifiableSet [SYSTEM_WORKER_BLOCKED, SYSTEM_CRITICAL_OPERATION_TIMEOUT]]], failureCtx=FailureContext [type=SYSTEM_WORKER_BLOCKED, err=class o.a.i.IgniteException: GridWorker [name=sys-stripe-0, igniteInstanceName=Gemini.dev, finished=false, heartbeatTs=1672928617333]]]\n\nJan 05, 2023 3:05:08 PM org.apache.ignite.logger.java.JavaLogger error\nSEVERE: Blocked system-critical thread has been detected. This can lead to cluster-wide undefined behaviour [workerName=sys-stripe-6, threadName=sys-stripe-6-#7%Gemini.dev%, blockedFor=2506s]\n\n[15:05:08] Possible failure suppressed accordingly to a configured handler [hnd=StopNodeOrHaltFailureHandler [tryStop=false, timeout=0, super=AbstractFailureHandler [ignoredFailureTypes=UnmodifiableSet [SYSTEM_WORKER_BLOCKED, SYSTEM_CRITICAL_OPERATION_TIMEOUT]]], failureCtx=FailureContext [type=SYSTEM_WORKER_BLOCKED, err=class o.a.i.IgniteException: GridWorker [name=sys-stripe-6, igniteInstanceName=Gemini.dev, finished=false, heartbeatTs=1672928602019]]]\n\nJan 05, 2023 3:05:17 PM org.apache.ignite.logger.java.JavaLogger error\nSEVERE: Blocked system-critical thread has been detected. This can lead to cluster-wide undefined behaviour [workerName=db-checkpoint-thread, threadName=db-checkpoint-thread-#105%Gemini.dev%, blockedFor=3098s]\n\n[15:05:17] Possible failure suppressed accordingly to a configured handler [hnd=StopNodeOrHaltFailureHandler [tryStop=false, timeout=0, super=AbstractFailureHandler [ignoredFailureTypes=UnmodifiableSet [SYSTEM_WORKER_BLOCKED, SYSTEM_CRITICAL_OPERATION_TIMEOUT]]], failureCtx=FailureContext [type=SYSTEM_WORKER_BLOCKED, err=class o.a.i.IgniteException: GridWorker [name=db-checkpoint-thread, igniteInstanceName=Gemini.dev, finished=false, heartbeatTs=1672928018434]]]\n</code></pre>\n<p>When these errors are shown some caches of cluster become unresponsive. I am attaching entire Ignite config at the end.</p>\n<p>I also tried observing persistence related metrics, but I don't see any in JConsole in &quot;Persistent Storage&quot; section. As you can see in my config I have set <code>metricsEnabled=true</code> in DR configs.</p>\n<p>I took a threaddump too. Although I am unable to make out anything from it. There are many threads which are in WAITING(parking) state. Here is one snippet from it.</p>\n<pre><code>&quot;db-checkpoint-thread-#105%Gemini.dev%&quot; #165 prio=5 os_prio=0 cpu=86.94ms elapsed=2085.34s tid=0x00007f9a5c138000 nid=0x3d3b waiting on condition  [0x00007f7eabf7c000]\n   java.lang.Thread.State: WAITING (parking)\n        at jdk.internal.misc.Unsafe.park(java.base@11.0.17/Native Method)\n        - parking to wait for  &lt;0x00000004018cc220&gt; (a java.util.concurrent.locks.ReentrantReadWriteLock$NonfairSync)\n        at java.util.concurrent.locks.LockSupport.park(java.base@11.0.17/LockSupport.java:194)\n        at java.util.concurrent.locks.AbstractQueuedSynchronizer.parkAndCheckInterrupt(java.base@11.0.17/AbstractQueuedSynchronizer.java:885)\n        at java.util.concurrent.locks.AbstractQueuedSynchronizer.acquireQueued(java.base@11.0.17/AbstractQueuedSynchronizer.java:917)\n        at java.util.concurrent.locks.AbstractQueuedSynchronizer.acquire(java.base@11.0.17/AbstractQueuedSynchronizer.java:1240)\n        at java.util.concurrent.locks.ReentrantReadWriteLock$WriteLock.lock(java.base@11.0.17/ReentrantReadWriteLock.java:959)\n</code></pre>\n<p>Some lines are cut to keep post under size limit</p>\n<p>Below is my entire Ignite server config.</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;    \n&lt;beans xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\n       xmlns:util=&quot;http://www.springframework.org/schema/util&quot;\n       xmlns=&quot;http://www.springframework.org/schema/beans&quot;\n       xsi:schemaLocation=&quot;\n        http://www.springframework.org/schema/beans\n        http://www.springframework.org/schema/beans/spring-beans.xsd\n        http://www.springframework.org/schema/util\n        http://www.springframework.org/schema/util/spring-util.xsd&quot;&gt;\n\n  &lt;bean id=&quot;propertyConfigurer&quot; class=&quot;org.springframework.beans.factory.config.PropertyPlaceholderConfigurer&quot;&gt;\n    &lt;property name=&quot;systemPropertiesModeName&quot; value=&quot;SYSTEM_PROPERTIES_MODE_FALLBACK&quot;/&gt;\n    &lt;property name=&quot;searchSystemEnvironment&quot; value=&quot;true&quot;/&gt;\n  &lt;/bean&gt;\n\n  &lt;bean id=&quot;ignite.cfg&quot; class=&quot;org.apache.ignite.configuration.IgniteConfiguration&quot;&gt;\n    &lt;!-- Set to true to enable distributed class loading for examples, default is false. --&gt;\n    &lt;property name=&quot;sslContextFactory&quot;&gt;\n      &lt;bean class=&quot;org.apache.ignite.ssl.SslContextFactory&quot;&gt;\n          &lt;property name=&quot;keyStoreFilePath&quot; value=&quot;/home/sysSvcDevOps/ssl/ignite1.keystore.jks&quot;/&gt;\n          &lt;property name=&quot;keyStorePassword&quot; value=&quot;KeyStore443&quot;/&gt;\n          &lt;property name=&quot;keyStoreType&quot; value=&quot;jks&quot;/&gt;\n          &lt;property name=&quot;trustStoreFilePath&quot; value=&quot;/home/sysSvcDevOps/ssl/cacerts/java.cacerts.jks&quot;/&gt;\n          &lt;property name=&quot;trustStorePassword&quot; value=&quot;changeit&quot;/&gt;\n          &lt;property name=&quot;trustStoreType&quot; value=&quot;jks&quot;/&gt;\n      &lt;/bean&gt;\n    &lt;/property&gt;\n    &lt;property name=&quot;igniteInstanceName&quot; value=&quot;.dev&quot;/&gt;\n    &lt;property name=&quot;consistentId&quot; value=&quot;ignite1.dev&quot;/&gt;\n    &lt;property name=&quot;workDirectory&quot; value=&quot;/apps/Svc/dev/Ignite/IgniteData/persistentstore/work&quot;/&gt;\n\n      &lt;property name=&quot;rebalanceThreadPoolSize&quot; value=&quot;8&quot;/&gt;\n      &lt;property name=&quot;publicThreadPoolSize&quot; value=&quot;32&quot;/&gt;\n      &lt;property name=&quot;systemThreadPoolSize&quot; value=&quot;64&quot;/&gt;\n      &lt;property name=&quot;queryThreadPoolSize&quot; value=&quot;64&quot;/&gt;\n      &lt;property name=&quot;failureDetectionTimeout&quot; value=&quot;30000&quot;/&gt;\n      &lt;property name=&quot;authenticationEnabled&quot; value=&quot;true&quot;/&gt;\n      &lt;property name=&quot;metricsUpdateFrequency&quot; value=&quot;30000&quot;/&gt;\n      &lt;property name=&quot;peerClassLoadingEnabled&quot; value=&quot;false&quot;/&gt;\n      &lt;property name=&quot;clientMode&quot; value=&quot;false&quot;/&gt;\n\n    &lt;!-- Enable task execution events for examples. --&gt;\n    &lt;property name=&quot;includeEventTypes&quot;&gt;\n      &lt;list&gt;\n        &lt;util:constant static-field=&quot;org.apache.ignite.events.EventType.EVT_CACHE_STARTED&quot;/&gt;\n        &lt;util:constant static-field=&quot;org.apache.ignite.events.EventType.EVT_CACHE_STOPPED&quot;/&gt;\n        &lt;util:constant static-field=&quot;org.apache.ignite.events.EventType.EVT_CACHE_REBALANCE_PART_DATA_LOST&quot;/&gt;\n        &lt;util:constant static-field=&quot;org.apache.ignite.events.EventType.EVT_CACHE_NODES_LEFT&quot;/&gt;\n      &lt;/list&gt;\n    &lt;/property&gt;\n\n    &lt;property name=&quot;dataStorageConfiguration&quot;&gt;\n      &lt;bean class=&quot;org.apache.ignite.configuration.DataStorageConfiguration&quot;&gt;\n\n        &lt;property name=&quot;walSegmentSize&quot; value=&quot;1073741824&quot;/&gt;\n          &lt;property name=&quot;walSegments&quot; value=&quot;20&quot;/&gt;\n          &lt;property name=&quot;maxWalArchiveSize&quot; value=&quot;10737418240&quot;/&gt;\n          &lt;property name=&quot;walCompactionEnabled&quot; value=&quot;true&quot;/&gt;\n          &lt;property name=&quot;walCompactionLevel&quot; value=&quot;4&quot;/&gt;\n          &lt;property name=&quot;checkpointFrequency&quot; value=&quot;300000&quot;/&gt;\n          &lt;property name=&quot;checkpointThreads&quot; value=&quot;16&quot;/&gt;\n          &lt;property name=&quot;checkpointReadLockTimeout&quot; value=&quot;60000&quot;/&gt;\n          &lt;property name=&quot;lockWaitTime&quot; value=&quot;45000&quot;/&gt;\n          &lt;property name=&quot;checkpointWriteOrder&quot; value=&quot;RANDOM&quot;/&gt;\n          &lt;property name=&quot;pageSize&quot; value=&quot;4096&quot;/&gt;\n          &lt;property name=&quot;writeThrottlingEnabled&quot; value=&quot;true&quot;/&gt;\n\n        &lt;!-- wal storage paths --&gt;\n        &lt;property name=&quot;walPath&quot; value=&quot;/apps/Svc/dev/Ignite/IgniteData&quot;/&gt;\n        &lt;property name=&quot;walArchivePath&quot; value=&quot;/apps/Svc/dev/Ignite/IgniteDataArchive&quot;/&gt;\n        &lt;property name=&quot;storagePath&quot; value=&quot;/apps/Svc/dev/Ignite/IgniteData/archive&quot;/&gt;\n\n        &lt;property name=&quot;dataRegionConfigurations&quot;&gt;\n          &lt;list&gt;\n                &lt;bean class=&quot;org.apache.ignite.configuration.DataRegionConfiguration&quot;&gt;\n                    &lt;property name=&quot;name&quot; value=&quot;dr.dev.referencedata&quot;/&gt;\n                    &lt;property name=&quot;persistenceEnabled&quot; value=&quot;true&quot;/&gt;\n                    &lt;property name=&quot;initialSize&quot; value=&quot;1073741824&quot;/&gt;\n                    &lt;property name=&quot;maxSize&quot; value=&quot;4294969673&quot;/&gt;\n                    &lt;property name=&quot;checkpointPageBufferSize&quot; value=&quot;1073741824&quot;/&gt;\n                &lt;/bean&gt;\n                &lt;bean class=&quot;org.apache.ignite.configuration.DataRegionConfiguration&quot;&gt;\n                    &lt;property name=&quot;name&quot; value=&quot;dr.dev.input&quot;/&gt;\n                    &lt;property name=&quot;persistenceEnabled&quot; value=&quot;true&quot;/&gt;\n                    &lt;property name=&quot;metricsEnabled&quot; value=&quot;true&quot;/&gt;\n                    &lt;property name=&quot;checkpointPageBufferSize&quot; value=&quot;#{4 * 1024 * 1024 * 1024}&quot;/&gt;\n                    &lt;property name=&quot;initialSize&quot; value=&quot;12884901888&quot;/&gt;\n                    &lt;property name=&quot;maxSize&quot; value=&quot;81604378624&quot;/&gt;\n                    &lt;property name=&quot;pageEvictionMode&quot; value=&quot;RANDOM_2_LRU&quot;/&gt;\n                &lt;/bean&gt;\n                &lt;bean class=&quot;org.apache.ignite.configuration.DataRegionConfiguration&quot;&gt;\n                    &lt;property name=&quot;name&quot; value=&quot;dr.dev.input.exception&quot;/&gt;\n                    &lt;property name=&quot;persistenceEnabled&quot; value=&quot;true&quot;/&gt;\n                    &lt;property name=&quot;metricsEnabled&quot; value=&quot;true&quot;/&gt;\n                    &lt;property name=&quot;checkpointPageBufferSize&quot; value=&quot;#{4 * 1024 * 1024 * 1024}&quot;/&gt;\n                    &lt;property name=&quot;initialSize&quot; value=&quot;4294967296&quot;/&gt;\n                    &lt;property name=&quot;maxSize&quot; value=&quot;21474836480&quot;/&gt;\n                    &lt;property name=&quot;pageEvictionMode&quot; value=&quot;RANDOM_2_LRU&quot;/&gt;\n                &lt;/bean&gt;\n                &lt;bean class=&quot;org.apache.ignite.configuration.DataRegionConfiguration&quot;&gt;\n                    &lt;property name=&quot;name&quot; value=&quot;dr.dev.output&quot;/&gt;\n                    &lt;property name=&quot;initialSize&quot; value=&quot;1073741824&quot;/&gt;\n                    &lt;property name=&quot;persistenceEnabled&quot; value=&quot;true&quot;/&gt;\n                    &lt;property name=&quot;metricsEnabled&quot; value=&quot;true&quot;/&gt;\n                    &lt;property name=&quot;checkpointPageBufferSize&quot; value=&quot;#{2 * 1024 * 1024 * 1024}&quot;/&gt;\n                    &lt;property name=&quot;maxSize&quot; value=&quot;2147483648&quot;/&gt;\n                &lt;/bean&gt;\n          &lt;/list&gt;\n        &lt;/property&gt;\n\n        &lt;property name=&quot;defaultDataRegionConfiguration&quot;&gt;\n          &lt;bean class=&quot;org.apache.ignite.configuration.DataRegionConfiguration&quot;&gt;\n              &lt;property name=&quot;name&quot; value=&quot;default_region&quot;/&gt;\n              &lt;property name=&quot;persistenceEnabled&quot; value=&quot;true&quot;/&gt;\n              &lt;property name=&quot;initialSize&quot; value=&quot;268435456&quot;/&gt;\n              &lt;property name=&quot;maxSize&quot; value=&quot;268435456&quot;/&gt;\n\n          &lt;/bean&gt;\n        &lt;/property&gt;\n      &lt;/bean&gt;\n    &lt;/property&gt;\n\n    &lt;property name=&quot;discoverySpi&quot;&gt;\n      &lt;bean class=&quot;org.apache.ignite.spi.discovery.zk.ZookeeperDiscoverySpi&quot;&gt;\n        &lt;property name=&quot;zkConnectionString&quot; value=&quot;zk1.intranet.com:22001,zk2.intranet.com:22001&quot;/&gt;\n          &lt;property name=&quot;zkRootPath&quot; value=&quot;/ignite&quot;/&gt;\n          &lt;property name=&quot;sessionTimeout&quot; value=&quot;120000&quot;/&gt;\n          &lt;property name=&quot;joinTimeout&quot; value=&quot;10000&quot;/&gt;\n      &lt;/bean&gt;\n    &lt;/property&gt;\n\n    &lt;property name=&quot;communicationSpi&quot;&gt;\n      &lt;bean class=&quot;org.apache.ignite.spi.communication.tcp.TcpCommunicationSpi&quot;&gt;\n          &lt;property name=&quot;socketWriteTimeout&quot; value=&quot;60000&quot;/&gt;\n      &lt;/bean&gt;\n    &lt;/property&gt;\n\n    &lt;property name=&quot;cacheConfiguration&quot;&gt;\n      &lt;list&gt;\n          &lt;bean id=&quot;cache-template-bean&quot; abstract=&quot;true&quot;\n                class=&quot;org.apache.ignite.configuration.CacheConfiguration&quot;&gt;\n              &lt;property name=&quot;name&quot; value=&quot;referenceDataCacheTemplate*&quot;/&gt;\n              &lt;property name=&quot;cacheMode&quot; value=&quot;REPLICATED&quot;/&gt;\n              &lt;property name=&quot;backups&quot; value=&quot;1&quot;/&gt;\n              &lt;property name=&quot;atomicityMode&quot; value=&quot;ATOMIC&quot;/&gt;\n              &lt;property name=&quot;dataRegionName&quot; value=&quot;dr.dev.referencedata&quot;/&gt;\n              &lt;property name=&quot;partitionLossPolicy&quot; value=&quot;READ_WRITE_SAFE&quot;/&gt;\n              &lt;property name=&quot;writeSynchronizationMode&quot; value=&quot;PRIMARY_SYNC&quot;/&gt;\n              &lt;property name=&quot;statisticsEnabled&quot; value=&quot;true&quot;/&gt;\n              &lt;property name=&quot;sqlIndexMaxInlineSize&quot; value=&quot;203&quot;/&gt;\n            &lt;property name=&quot;affinity&quot;&gt;\n              &lt;bean class=&quot;org.apache.ignite.cache.affinity.rendezvous.RendezvousAffinityFunction&quot;&gt;\n                  &lt;property name=&quot;partitions&quot; value=&quot;256&quot;/&gt;\n\n\n              &lt;/bean&gt;\n            &lt;/property&gt;\n          &lt;/bean&gt;\n          &lt;bean id=&quot;cache-template-bean&quot; abstract=&quot;true&quot;\n                class=&quot;org.apache.ignite.configuration.CacheConfiguration&quot;&gt;\n              &lt;property name=&quot;name&quot; value=&quot;inputMetadataCacheTemplate*&quot;/&gt;\n              &lt;property name=&quot;cacheMode&quot; value=&quot;PARTITIONED&quot;/&gt;\n              &lt;property name=&quot;backups&quot; value=&quot;1&quot;/&gt;\n              &lt;property name=&quot;atomicityMode&quot; value=&quot;ATOMIC&quot;/&gt;\n              &lt;property name=&quot;dataRegionName&quot; value=&quot;dr.dev.input&quot;/&gt;\n              &lt;property name=&quot;partitionLossPolicy&quot; value=&quot;READ_WRITE_SAFE&quot;/&gt;\n              &lt;property name=&quot;writeSynchronizationMode&quot; value=&quot;PRIMARY_SYNC&quot;/&gt;\n              &lt;property name=&quot;statisticsEnabled&quot; value=&quot;true&quot;/&gt;\n              &lt;property name=&quot;readFromBackup&quot; value=&quot;false&quot;/&gt;\n              &lt;property name=&quot;sqlIndexMaxInlineSize&quot; value=&quot;211&quot;/&gt;\n            &lt;property name=&quot;affinity&quot;&gt;\n              &lt;bean class=&quot;org.apache.ignite.cache.affinity.rendezvous.RendezvousAffinityFunction&quot;&gt;\n                  &lt;property name=&quot;partitions&quot; value=&quot;256&quot;/&gt;\n\n                &lt;property name=&quot;affinityBackupFilter&quot;&gt;\n                          &lt;bean class=&quot;org.apache.ignite.cache.affinity.rendezvous.ClusterNodeAttributeAffinityBackupFilter&quot;&gt;\n                            &lt;constructor-arg&gt;\n                                                  &lt;array value-type=&quot;java.lang.String&quot;&gt;\n                                                  &lt;value&gt;RACK_ID&lt;/value&gt;\n                                                     &lt;/array&gt;\n                             &lt;/constructor-arg&gt;\n                          &lt;/bean&gt;\n                &lt;/property&gt;\n\n              &lt;/bean&gt;\n            &lt;/property&gt;\n              &lt;property name=&quot;expiryPolicyFactory&quot;&gt;\n                &lt;bean class=&quot;javax.cache.expiry.ModifiedExpiryPolicy&quot; factory-method=&quot;factoryOf&quot;&gt;\n                  &lt;constructor-arg&gt;\n                    &lt;bean class=&quot;javax.cache.expiry.Duration&quot;&gt;\n                      &lt;constructor-arg value=&quot;DAYS&quot;/&gt;\n                      &lt;constructor-arg value=&quot;5&quot;/&gt;\n                    &lt;/bean&gt;\n                  &lt;/constructor-arg&gt;\n                &lt;/bean&gt;\n              &lt;/property&gt;\n          &lt;/bean&gt;\n          &lt;bean id=&quot;cache-template-bean&quot; abstract=&quot;true&quot;\n                class=&quot;org.apache.ignite.configuration.CacheConfiguration&quot;&gt;\n              &lt;property name=&quot;name&quot; value=&quot;inputReconCacheTemplate*&quot;/&gt;\n              &lt;property name=&quot;cacheMode&quot; value=&quot;PARTITIONED&quot;/&gt;\n              &lt;property name=&quot;backups&quot; value=&quot;1&quot;/&gt;\n              &lt;property name=&quot;atomicityMode&quot; value=&quot;ATOMIC&quot;/&gt;\n              &lt;property name=&quot;dataRegionName&quot; value=&quot;dr.dev.input&quot;/&gt;\n              &lt;property name=&quot;partitionLossPolicy&quot; value=&quot;READ_WRITE_SAFE&quot;/&gt;\n              &lt;property name=&quot;writeSynchronizationMode&quot; value=&quot;PRIMARY_SYNC&quot;/&gt;\n              &lt;property name=&quot;statisticsEnabled&quot; value=&quot;true&quot;/&gt;\n              &lt;property name=&quot;readFromBackup&quot; value=&quot;false&quot;/&gt;\n              &lt;property name=&quot;sqlIndexMaxInlineSize&quot; value=&quot;211&quot;/&gt;\n            &lt;property name=&quot;affinity&quot;&gt;\n              &lt;bean class=&quot;org.apache.ignite.cache.affinity.rendezvous.RendezvousAffinityFunction&quot;&gt;\n                  &lt;property name=&quot;partitions&quot; value=&quot;256&quot;/&gt;\n\n                &lt;property name=&quot;affinityBackupFilter&quot;&gt;\n                          &lt;bean class=&quot;org.apache.ignite.cache.affinity.rendezvous.ClusterNodeAttributeAffinityBackupFilter&quot;&gt;\n                            &lt;constructor-arg&gt;\n                                                  &lt;array value-type=&quot;java.lang.String&quot;&gt;\n                                                  &lt;value&gt;RACK_ID&lt;/value&gt;\n                                                     &lt;/array&gt;\n                             &lt;/constructor-arg&gt;\n                          &lt;/bean&gt;\n                &lt;/property&gt;\n\n              &lt;/bean&gt;\n            &lt;/property&gt;\n              &lt;property name=&quot;expiryPolicyFactory&quot;&gt;\n                &lt;bean class=&quot;javax.cache.expiry.CreatedExpiryPolicy&quot; factory-method=&quot;factoryOf&quot;&gt;\n                  &lt;constructor-arg&gt;\n                    &lt;bean class=&quot;javax.cache.expiry.Duration&quot;&gt;\n                      &lt;constructor-arg value=&quot;DAYS&quot;/&gt;\n                      &lt;constructor-arg value=&quot;4&quot;/&gt;\n                    &lt;/bean&gt;\n                  &lt;/constructor-arg&gt;\n                &lt;/bean&gt;\n              &lt;/property&gt;\n          &lt;/bean&gt;\n          &lt;bean id=&quot;cache-template-bean&quot; abstract=&quot;true&quot;\n                class=&quot;org.apache.ignite.configuration.CacheConfiguration&quot;&gt;\n              &lt;property name=&quot;name&quot; value=&quot;inputExceptionsCacheTemplate*&quot;/&gt;\n              &lt;property name=&quot;cacheMode&quot; value=&quot;PARTITIONED&quot;/&gt;\n              &lt;property name=&quot;backups&quot; value=&quot;1&quot;/&gt;\n              &lt;property name=&quot;atomicityMode&quot; value=&quot;ATOMIC&quot;/&gt;\n              &lt;property name=&quot;dataRegionName&quot; value=&quot;dr.dev.input.exception&quot;/&gt;\n              &lt;property name=&quot;partitionLossPolicy&quot; value=&quot;READ_WRITE_SAFE&quot;/&gt;\n              &lt;property name=&quot;writeSynchronizationMode&quot; value=&quot;PRIMARY_SYNC&quot;/&gt;\n              &lt;property name=&quot;statisticsEnabled&quot; value=&quot;true&quot;/&gt;\n              &lt;property name=&quot;readFromBackup&quot; value=&quot;false&quot;/&gt;\n            &lt;property name=&quot;affinity&quot;&gt;\n              &lt;bean class=&quot;org.apache.ignite.cache.affinity.rendezvous.RendezvousAffinityFunction&quot;&gt;\n                  &lt;property name=&quot;partitions&quot; value=&quot;256&quot;/&gt;\n\n                &lt;property name=&quot;affinityBackupFilter&quot;&gt;\n                          &lt;bean class=&quot;org.apache.ignite.cache.affinity.rendezvous.ClusterNodeAttributeAffinityBackupFilter&quot;&gt;\n                            &lt;constructor-arg&gt;\n                                                  &lt;array value-type=&quot;java.lang.String&quot;&gt;\n                                                  &lt;value&gt;RACK_ID&lt;/value&gt;\n                                                     &lt;/array&gt;\n                             &lt;/constructor-arg&gt;\n                          &lt;/bean&gt;\n                &lt;/property&gt;\n\n              &lt;/bean&gt;\n            &lt;/property&gt;\n              &lt;property name=&quot;expiryPolicyFactory&quot;&gt;\n                &lt;bean class=&quot;javax.cache.expiry.CreatedExpiryPolicy&quot; factory-method=&quot;factoryOf&quot;&gt;\n                  &lt;constructor-arg&gt;\n                    &lt;bean class=&quot;javax.cache.expiry.Duration&quot;&gt;\n                      &lt;constructor-arg value=&quot;DAYS&quot;/&gt;\n                      &lt;constructor-arg value=&quot;15&quot;/&gt;\n                    &lt;/bean&gt;\n                  &lt;/constructor-arg&gt;\n                &lt;/bean&gt;\n              &lt;/property&gt;\n          &lt;/bean&gt;\n          &lt;bean id=&quot;cache-template-bean&quot; abstract=&quot;true&quot;\n                class=&quot;org.apache.ignite.configuration.CacheConfiguration&quot;&gt;\n              &lt;property name=&quot;name&quot; value=&quot;outputDataCacheTemplate*&quot;/&gt;\n              &lt;property name=&quot;cacheMode&quot; value=&quot;PARTITIONED&quot;/&gt;\n              &lt;property name=&quot;backups&quot; value=&quot;1&quot;/&gt;\n              &lt;property name=&quot;atomicityMode&quot; value=&quot;ATOMIC&quot;/&gt;\n              &lt;property name=&quot;dataRegionName&quot; value=&quot;dr.dev.output&quot;/&gt;\n              &lt;property name=&quot;partitionLossPolicy&quot; value=&quot;READ_WRITE_SAFE&quot;/&gt;\n              &lt;property name=&quot;writeSynchronizationMode&quot; value=&quot;PRIMARY_SYNC&quot;/&gt;\n              &lt;property name=&quot;sqlSchema&quot; value=&quot;&quot;/&gt;\n              &lt;property name=&quot;statisticsEnabled&quot; value=&quot;true&quot;/&gt;\n            &lt;property name=&quot;affinity&quot;&gt;\n              &lt;bean class=&quot;org.apache.ignite.cache.affinity.rendezvous.RendezvousAffinityFunction&quot;&gt;\n                  &lt;property name=&quot;partitions&quot; value=&quot;256&quot;/&gt;\n\n                &lt;property name=&quot;affinityBackupFilter&quot;&gt;\n                          &lt;bean class=&quot;org.apache.ignite.cache.affinity.rendezvous.ClusterNodeAttributeAffinityBackupFilter&quot;&gt;\n                            &lt;constructor-arg&gt;\n                                                  &lt;array value-type=&quot;java.lang.String&quot;&gt;\n                                                  &lt;value&gt;RACK_ID&lt;/value&gt;\n                                                     &lt;/array&gt;\n                             &lt;/constructor-arg&gt;\n                          &lt;/bean&gt;\n                &lt;/property&gt;\n\n              &lt;/bean&gt;\n            &lt;/property&gt;\n              &lt;property name=&quot;expiryPolicyFactory&quot;&gt;\n                &lt;bean class=&quot;javax.cache.expiry.CreatedExpiryPolicy&quot; factory-method=&quot;factoryOf&quot;&gt;\n                  &lt;constructor-arg&gt;\n                    &lt;bean class=&quot;javax.cache.expiry.Duration&quot;&gt;\n                      &lt;constructor-arg value=&quot;DAYS&quot;/&gt;\n                      &lt;constructor-arg value=&quot;450&quot;/&gt;\n                    &lt;/bean&gt;\n                  &lt;/constructor-arg&gt;\n                &lt;/bean&gt;\n              &lt;/property&gt;\n          &lt;/bean&gt;\n          &lt;bean id=&quot;cache-template-bean&quot; abstract=&quot;true&quot;\n                class=&quot;org.apache.ignite.configuration.CacheConfiguration&quot;&gt;\n              &lt;property name=&quot;name&quot; value=&quot;reconAuditDataCacheTemplate*&quot;/&gt;\n              &lt;property name=&quot;cacheMode&quot; value=&quot;PARTITIONED&quot;/&gt;\n              &lt;property name=&quot;backups&quot; value=&quot;1&quot;/&gt;\n              &lt;property name=&quot;atomicityMode&quot; value=&quot;ATOMIC&quot;/&gt;\n              &lt;property name=&quot;dataRegionName&quot; value=&quot;dr.dev.referencedata&quot;/&gt;\n              &lt;property name=&quot;partitionLossPolicy&quot; value=&quot;READ_WRITE_SAFE&quot;/&gt;\n              &lt;property name=&quot;writeSynchronizationMode&quot; value=&quot;PRIMARY_SYNC&quot;/&gt;\n              &lt;property name=&quot;sqlSchema&quot; value=&quot;&quot;/&gt;\n              &lt;property name=&quot;statisticsEnabled&quot; value=&quot;true&quot;/&gt;\n            &lt;property name=&quot;affinity&quot;&gt;\n              &lt;bean class=&quot;org.apache.ignite.cache.affinity.rendezvous.RendezvousAffinityFunction&quot;&gt;\n                  &lt;property name=&quot;partitions&quot; value=&quot;256&quot;/&gt;\n\n                &lt;property name=&quot;affinityBackupFilter&quot;&gt;\n                          &lt;bean class=&quot;org.apache.ignite.cache.affinity.rendezvous.ClusterNodeAttributeAffinityBackupFilter&quot;&gt;\n                            &lt;constructor-arg&gt;\n                                                  &lt;array value-type=&quot;java.lang.String&quot;&gt;\n                                                  &lt;value&gt;RACK_ID&lt;/value&gt;\n                                                     &lt;/array&gt;\n                             &lt;/constructor-arg&gt;\n                          &lt;/bean&gt;\n                &lt;/property&gt;\n\n              &lt;/bean&gt;\n            &lt;/property&gt;\n          &lt;/bean&gt;\n          &lt;bean id=&quot;cache-template-bean&quot; abstract=&quot;true&quot;\n                class=&quot;org.apache.ignite.configuration.CacheConfiguration&quot;&gt;\n              &lt;property name=&quot;name&quot; value=&quot;fileDataCacheTemplate*&quot;/&gt;\n              &lt;property name=&quot;cacheMode&quot; value=&quot;PARTITIONED&quot;/&gt;\n              &lt;property name=&quot;backups&quot; value=&quot;1&quot;/&gt;\n              &lt;property name=&quot;atomicityMode&quot; value=&quot;ATOMIC&quot;/&gt;\n              &lt;property name=&quot;dataRegionName&quot; value=&quot;dr.dev.input&quot;/&gt;\n              &lt;property name=&quot;partitionLossPolicy&quot; value=&quot;READ_WRITE_SAFE&quot;/&gt;\n              &lt;property name=&quot;writeSynchronizationMode&quot; value=&quot;PRIMARY_SYNC&quot;/&gt;\n              &lt;property name=&quot;statisticsEnabled&quot; value=&quot;true&quot;/&gt;\n              &lt;property name=&quot;queryParallelism&quot; value=&quot;4&quot;/&gt;\n              &lt;property name=&quot;eagerTtl&quot; value=&quot;true&quot;/&gt;\n            &lt;property name=&quot;affinity&quot;&gt;\n              &lt;bean class=&quot;org.apache.ignite.cache.affinity.rendezvous.RendezvousAffinityFunction&quot;&gt;\n                  &lt;property name=&quot;partitions&quot; value=&quot;256&quot;/&gt;\n\n                &lt;property name=&quot;affinityBackupFilter&quot;&gt;\n                          &lt;bean class=&quot;org.apache.ignite.cache.affinity.rendezvous.ClusterNodeAttributeAffinityBackupFilter&quot;&gt;\n                            &lt;constructor-arg&gt;\n                                                  &lt;array value-type=&quot;java.lang.String&quot;&gt;\n                                                  &lt;value&gt;RACK_ID&lt;/value&gt;\n                                                     &lt;/array&gt;\n                             &lt;/constructor-arg&gt;\n                          &lt;/bean&gt;\n                &lt;/property&gt;\n\n              &lt;/bean&gt;\n            &lt;/property&gt;\n              &lt;property name=&quot;expiryPolicyFactory&quot;&gt;\n                &lt;bean class=&quot;javax.cache.expiry.CreatedExpiryPolicy&quot; factory-method=&quot;factoryOf&quot;&gt;\n                  &lt;constructor-arg&gt;\n                    &lt;bean class=&quot;javax.cache.expiry.Duration&quot;&gt;\n                      &lt;constructor-arg value=&quot;DAYS&quot;/&gt;\n                      &lt;constructor-arg value=&quot;5&quot;/&gt;\n                    &lt;/bean&gt;\n                  &lt;/constructor-arg&gt;\n                &lt;/bean&gt;\n              &lt;/property&gt;\n          &lt;/bean&gt;\n          &lt;bean id=&quot;cache-template-bean&quot; abstract=&quot;true&quot;\n                class=&quot;org.apache.ignite.configuration.CacheConfiguration&quot;&gt;\n              &lt;property name=&quot;name&quot; value=&quot;shortLivedReferenceDataTemplate*&quot;/&gt;\n              &lt;property name=&quot;cacheMode&quot; value=&quot;PARTITIONED&quot;/&gt;\n              &lt;property name=&quot;backups&quot; value=&quot;1&quot;/&gt;\n              &lt;property name=&quot;atomicityMode&quot; value=&quot;ATOMIC&quot;/&gt;\n              &lt;property name=&quot;dataRegionName&quot; value=&quot;dr.dev.input.exception&quot;/&gt;\n              &lt;property name=&quot;partitionLossPolicy&quot; value=&quot;READ_WRITE_SAFE&quot;/&gt;\n              &lt;property name=&quot;writeSynchronizationMode&quot; value=&quot;PRIMARY_SYNC&quot;/&gt;\n              &lt;property name=&quot;statisticsEnabled&quot; value=&quot;true&quot;/&gt;\n              &lt;property name=&quot;managementEnabled&quot; value=&quot;true&quot;/&gt;\n            &lt;property name=&quot;affinity&quot;&gt;\n              &lt;bean class=&quot;org.apache.ignite.cache.affinity.rendezvous.RendezvousAffinityFunction&quot;&gt;\n                  &lt;property name=&quot;partitions&quot; value=&quot;64&quot;/&gt;\n\n                &lt;property name=&quot;affinityBackupFilter&quot;&gt;\n                          &lt;bean class=&quot;org.apache.ignite.cache.affinity.rendezvous.ClusterNodeAttributeAffinityBackupFilter&quot;&gt;\n                            &lt;constructor-arg&gt;\n                                                  &lt;array value-type=&quot;java.lang.String&quot;&gt;\n                                                  &lt;value&gt;RACK_ID&lt;/value&gt;\n                                                     &lt;/array&gt;\n                             &lt;/constructor-arg&gt;\n                          &lt;/bean&gt;\n                &lt;/property&gt;\n\n              &lt;/bean&gt;\n            &lt;/property&gt;\n              &lt;property name=&quot;expiryPolicyFactory&quot;&gt;\n                &lt;bean class=&quot;javax.cache.expiry.CreatedExpiryPolicy&quot; factory-method=&quot;factoryOf&quot;&gt;\n                  &lt;constructor-arg&gt;\n                    &lt;bean class=&quot;javax.cache.expiry.Duration&quot;&gt;\n                      &lt;constructor-arg value=&quot;DAYS&quot;/&gt;\n                      &lt;constructor-arg value=&quot;2&quot;/&gt;\n                    &lt;/bean&gt;\n                  &lt;/constructor-arg&gt;\n                &lt;/bean&gt;\n              &lt;/property&gt;\n          &lt;/bean&gt;\n\n      &lt;/list&gt;\n    &lt;/property&gt;\n\n    &lt;property name=&quot;sqlSchemas&quot;&gt;\n      &lt;list&gt;\n        &lt;value&gt;dataInput&lt;/value&gt;\n      &lt;/list&gt;\n    &lt;/property&gt;\n\n  &lt;/bean&gt;\n&lt;/beans&gt;\n</code></pre>\n"},{"tags":["java","http-post","spring-webflux","rsocket"],"comments":[{"owner":{"account_id":58650,"reputation":3399,"user_id":175554,"accept_rate":40,"display_name":"ozkanpakdil"},"score":0,"creation_date":1673038170,"post_id":75020476,"comment_id":132415593,"body_markdown":"can you provide a small reproducer ?","body":"can you provide a small reproducer ?"}],"owner":{"account_id":13939282,"reputation":101,"user_id":10065622,"display_name":"Kaustubh Dixit"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":70,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1672932052,"creation_date":1672931119,"question_id":75020476,"body_markdown":"I want the functionality similar to HTTP POST using Rsocket. Using Rsocket&#39;s request/response pattern, the data(image file and text) needs to be send and confirmation will be sent back to requester. \r\n\r\nI tried to create a simple CustomData class to test :\r\n\r\nRSocket Requester : \r\n\r\n```\r\n            RSocketRequester req = RSocketRequester.builder()\r\n                .websocket(URI.create(&quot;ws://localhost:7000/rsocket&quot;));\r\n\r\n            req.route(&quot;message&quot;)\r\n                .data(Mono.just(new CustomData(&quot;name&quot;, 12)), CustomData.class)\r\n                .retrieveMono(String.class).subscribe((value) -&gt; {\r\n                    System.out.println(value);\r\n                });\r\n```\r\n\r\nMessage Handler:\r\n\r\n```\r\n        @MessageMapping(&quot;message&quot;)\r\n        public Mono&lt;String&gt; response(@Payload CustomData cData) {\r\n            return Mono.just(&quot;data received!&quot;);\r\n        }\r\n```\r\n\r\nI am getting this exception : \r\n```\r\njava.lang.IllegalArgumentException: No encoder for com.demo1.demo.customdata.CustomData\r\n```\r\n\r\nCan anyone please provide an example to fulfil this?\r\n\r\n","title":"How to send form data(like HTTP POST) containing image and text via Rsocket?","body":"<p>I want the functionality similar to HTTP POST using Rsocket. Using Rsocket's request/response pattern, the data(image file and text) needs to be send and confirmation will be sent back to requester.</p>\n<p>I tried to create a simple CustomData class to test :</p>\n<p>RSocket Requester :</p>\n<pre><code>            RSocketRequester req = RSocketRequester.builder()\n                .websocket(URI.create(&quot;ws://localhost:7000/rsocket&quot;));\n\n            req.route(&quot;message&quot;)\n                .data(Mono.just(new CustomData(&quot;name&quot;, 12)), CustomData.class)\n                .retrieveMono(String.class).subscribe((value) -&gt; {\n                    System.out.println(value);\n                });\n</code></pre>\n<p>Message Handler:</p>\n<pre><code>        @MessageMapping(&quot;message&quot;)\n        public Mono&lt;String&gt; response(@Payload CustomData cData) {\n            return Mono.just(&quot;data received!&quot;);\n        }\n</code></pre>\n<p>I am getting this exception :</p>\n<pre><code>java.lang.IllegalArgumentException: No encoder for com.demo1.demo.customdata.CustomData\n</code></pre>\n<p>Can anyone please provide an example to fulfil this?</p>\n"},{"tags":["java","xml","jaxb"],"answers":[{"comments":[{"owner":{"account_id":1580087,"reputation":8933,"user_id":1465623,"accept_rate":84,"display_name":"Rahul Agrawal"},"score":3,"creation_date":1380121411,"post_id":18984458,"comment_id":28083245,"body_markdown":"Can we have simply  &lt;personTraining&gt;\n    &lt;Val2&gt;&lt;/Val2&gt;\n    &lt;Val3&gt;&lt;/Val3&gt;\n&lt;/personTraining&gt;","body":"Can we have simply  &lt;personTraining&gt;     &lt;Val2&gt;&lt;/Val2&gt;     &lt;Val3&gt;&lt;/Val3&gt; &lt;/personTraining&gt;"},{"owner":{"account_id":162425,"reputation":147999,"user_id":383861,"display_name":"bdoughan"},"score":3,"creation_date":1380125367,"post_id":18984458,"comment_id":28085800,"body_markdown":"@RahulAgrawal - Empty elements are not a valid representation of null.  If in your XML schema if you define a simple element as a non-string type then validation will fail when the element is empty.","body":"@RahulAgrawal - Empty elements are not a valid representation of null.  If in your XML schema if you define a simple element as a non-string type then validation will fail when the element is empty."}],"tags":[],"owner":{"account_id":162425,"reputation":147999,"user_id":383861,"display_name":"bdoughan"},"comment_count":2,"down_vote_count":0,"up_vote_count":18,"is_accepted":true,"score":18,"last_activity_date":1380033431,"creation_date":1380033042,"answer_id":18984458,"question_id":18983687,"body_markdown":"By default a [**JAXB (JSR-222)**][1] implementation will not marshal an attribute/element for null values.  This will be true for the following field in your Java model.\r\n\r\n    @XmlElement(name = &quot;Val1&quot;, required = true)\r\n    protected BigDecimal val1;\r\n\r\nYou can override this behaviour by specifying `nillable=true` on the `@XmlElement` annotation like you have done here:\r\n\r\n    @XmlElement(name = &quot;Val2&quot;, required = true, nillable = true)\r\n    protected BigDecimal val2;\r\n\r\nThis will cause the `xsi:nil=&quot;true&quot;` attribute to be leverage:\r\n\r\n    &lt;Val2 xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xsi:nil=&quot;true&quot;/&gt;\r\n\r\nFor more information:\r\n\r\n  - http://blog.bdoughan.com/2012/04/binding-to-json-xml-handling-null.html\r\n\r\n---\r\n\r\n## Java Model\r\n\r\n**PersonTraining**\r\n\r\nSince you are annotating the `fields` you should make sure you specify `@XmlAccessorType(XmlAccessType.FIELD)` at the class or package level (see:  http://blog.bdoughan.com/2011/06/using-jaxbs-xmlaccessortype-to.html).\r\n\r\n    import java.math.BigDecimal;\r\n    import javax.xml.bind.annotation.*;\r\n    import javax.xml.datatype.XMLGregorianCalendar;\r\n    \r\n    @XmlRootElement\r\n    @XmlAccessorType(XmlAccessType.FIELD)\r\n    public class PersonTraining {\r\n    \r\n        @XmlElement(name = &quot;Val1&quot;, required = true)\r\n        protected BigDecimal val1;\r\n        @XmlElement(name = &quot;Val2&quot;, required = true, nillable = true)\r\n        protected BigDecimal val2;\r\n        @XmlElement(name = &quot;Val3&quot;, required = true, nillable = true)\r\n        @XmlSchemaType(name = &quot;dateTime&quot;)\r\n        protected XMLGregorianCalendar val3;\r\n    \r\n    }\r\n\r\n## Demo Code\r\n\r\n**Demo**\r\n\r\n    import javax.xml.bind.*;\r\n    \r\n    public class Demo {\r\n    \r\n        public static void main(String[] args) throws Exception {\r\n            JAXBContext jc = JAXBContext.newInstance(PersonTraining.class);\r\n            \r\n            PersonTraining pt = new PersonTraining();\r\n            \r\n            Marshaller marshaller = jc.createMarshaller();\r\n            marshaller.setProperty(Marshaller.JAXB_FORMATTED_OUTPUT, true);\r\n            marshaller.marshal(pt, System.out);\r\n        }\r\n    \r\n    }\r\n\r\n**Output**\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; standalone=&quot;yes&quot;?&gt;\r\n    &lt;personTraining&gt;\r\n        &lt;Val2 xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xsi:nil=&quot;true&quot;/&gt;\r\n        &lt;Val3 xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xsi:nil=&quot;true&quot;/&gt;\r\n    &lt;/personTraining&gt;\r\n\r\n\r\n  [1]: http://jcp.org/en/jsr/detail?id=222","title":"JAXB Marshaller does not have elements whos value is null","body":"<p>By default a <a href=\"http://jcp.org/en/jsr/detail?id=222\" rel=\"noreferrer\"><strong>JAXB (JSR-222)</strong></a> implementation will not marshal an attribute/element for null values.  This will be true for the following field in your Java model.</p>\n\n<pre><code>@XmlElement(name = \"Val1\", required = true)\nprotected BigDecimal val1;\n</code></pre>\n\n<p>You can override this behaviour by specifying <code>nillable=true</code> on the <code>@XmlElement</code> annotation like you have done here:</p>\n\n<pre><code>@XmlElement(name = \"Val2\", required = true, nillable = true)\nprotected BigDecimal val2;\n</code></pre>\n\n<p>This will cause the <code>xsi:nil=\"true\"</code> attribute to be leverage:</p>\n\n<pre><code>&lt;Val2 xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xsi:nil=\"true\"/&gt;\n</code></pre>\n\n<p>For more information:</p>\n\n<ul>\n<li><a href=\"http://blog.bdoughan.com/2012/04/binding-to-json-xml-handling-null.html\" rel=\"noreferrer\">http://blog.bdoughan.com/2012/04/binding-to-json-xml-handling-null.html</a></li>\n</ul>\n\n<hr>\n\n<h2>Java Model</h2>\n\n<p><strong>PersonTraining</strong></p>\n\n<p>Since you are annotating the <code>fields</code> you should make sure you specify <code>@XmlAccessorType(XmlAccessType.FIELD)</code> at the class or package level (see:  <a href=\"http://blog.bdoughan.com/2011/06/using-jaxbs-xmlaccessortype-to.html\" rel=\"noreferrer\">http://blog.bdoughan.com/2011/06/using-jaxbs-xmlaccessortype-to.html</a>).</p>\n\n<pre><code>import java.math.BigDecimal;\nimport javax.xml.bind.annotation.*;\nimport javax.xml.datatype.XMLGregorianCalendar;\n\n@XmlRootElement\n@XmlAccessorType(XmlAccessType.FIELD)\npublic class PersonTraining {\n\n    @XmlElement(name = \"Val1\", required = true)\n    protected BigDecimal val1;\n    @XmlElement(name = \"Val2\", required = true, nillable = true)\n    protected BigDecimal val2;\n    @XmlElement(name = \"Val3\", required = true, nillable = true)\n    @XmlSchemaType(name = \"dateTime\")\n    protected XMLGregorianCalendar val3;\n\n}\n</code></pre>\n\n<h2>Demo Code</h2>\n\n<p><strong>Demo</strong></p>\n\n<pre><code>import javax.xml.bind.*;\n\npublic class Demo {\n\n    public static void main(String[] args) throws Exception {\n        JAXBContext jc = JAXBContext.newInstance(PersonTraining.class);\n\n        PersonTraining pt = new PersonTraining();\n\n        Marshaller marshaller = jc.createMarshaller();\n        marshaller.setProperty(Marshaller.JAXB_FORMATTED_OUTPUT, true);\n        marshaller.marshal(pt, System.out);\n    }\n\n}\n</code></pre>\n\n<p><strong>Output</strong></p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\" standalone=\"yes\"?&gt;\n&lt;personTraining&gt;\n    &lt;Val2 xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xsi:nil=\"true\"/&gt;\n    &lt;Val3 xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xsi:nil=\"true\"/&gt;\n&lt;/personTraining&gt;\n</code></pre>\n"}],"owner":{"account_id":1580087,"reputation":8933,"user_id":1465623,"accept_rate":84,"display_name":"Rahul Agrawal"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":44279,"favorite_count":0,"down_vote_count":0,"up_vote_count":14,"accepted_answer_id":18984458,"answer_count":1,"score":14,"last_activity_date":1672931976,"creation_date":1380031043,"question_id":18983687,"body_markdown":"When I marshall a java object using JAXB Marshaller, the marshaller does not create empty elements for null files in the java object. For example, I have a following java object:\r\n\r\n\r\n    public class PersonTraining {\r\n    \r\n        @XmlElement(name = &quot;Val1&quot;, required = true)\r\n        protected BigDecimal val1;\r\n        @XmlElement(name = &quot;Val2&quot;, required = true, nillable = true)\r\n        protected BigDecimal val2;\r\n        @XmlElement(name = &quot;Val3&quot;, required = true, nillable = true)\r\n        @XmlSchemaType(name = &quot;dateTime&quot;)\r\n        protected XMLGregorianCalendar val3;\r\n    }\r\n\r\nWhen I take an instance of this object, and marshall into an XML, I get the following (This is beacuse I did not set the value for Val2):\r\n\r\n    &lt;PersonTraining&gt;\r\n          &lt;Val1&gt;1&lt;/Val1&gt;\r\n           &lt;Val3&gt;2010-01-01T00:00:00.0-05:00&lt;/Val3&gt;\r\n     &lt;/PersonTraining&gt;\r\n\r\nHowever, I had expected hte following result from the marshalling operation (Infact, I specifically need &lt;Val2&gt; element as well so that the XML can be validated against the XSD)\r\n\r\n    &lt;PersonTraining&gt;\r\n          &lt;Val1&gt;1&lt;/Val1&gt;\r\n          &lt;Val2&gt;&lt;/Val2&gt;\r\n           &lt;Val3&gt;2010-01-01T00:00:00.0-05:00&lt;/Val3&gt;\r\n     &lt;/PersonTraining&gt;\r\n\r\nPlease let me know what option I would need to set so that the null value in the object attributes can ALSO be marshalled, and returned as empty/null elements.\r\n\r\n\r\nHere is the marshalling code:\r\n\r\n            \r\n\r\n    \r\n\r\n    StringWriter sw = new StringWriter();\r\n    JAXBContext jc = JAXBContext.newInstance(&quot;person_training&quot;);   \r\n    Marshaller m = jc.createMarshaller();\r\n    m.setProperty(Marshaller.JAXB_FORMATTED_OUTPUT, Boolean.TRUE);\r\n    m.marshal(ptl, sw);\r\n\r\n","title":"JAXB Marshaller does not have elements whos value is null","body":"<p>When I marshall a java object using JAXB Marshaller, the marshaller does not create empty elements for null files in the java object. For example, I have a following java object:</p>\n\n<pre><code>public class PersonTraining {\n\n    @XmlElement(name = \"Val1\", required = true)\n    protected BigDecimal val1;\n    @XmlElement(name = \"Val2\", required = true, nillable = true)\n    protected BigDecimal val2;\n    @XmlElement(name = \"Val3\", required = true, nillable = true)\n    @XmlSchemaType(name = \"dateTime\")\n    protected XMLGregorianCalendar val3;\n}\n</code></pre>\n\n<p>When I take an instance of this object, and marshall into an XML, I get the following (This is beacuse I did not set the value for Val2):</p>\n\n<pre><code>&lt;PersonTraining&gt;\n      &lt;Val1&gt;1&lt;/Val1&gt;\n       &lt;Val3&gt;2010-01-01T00:00:00.0-05:00&lt;/Val3&gt;\n &lt;/PersonTraining&gt;\n</code></pre>\n\n<p>However, I had expected hte following result from the marshalling operation (Infact, I specifically need  element as well so that the XML can be validated against the XSD)</p>\n\n<pre><code>&lt;PersonTraining&gt;\n      &lt;Val1&gt;1&lt;/Val1&gt;\n      &lt;Val2&gt;&lt;/Val2&gt;\n       &lt;Val3&gt;2010-01-01T00:00:00.0-05:00&lt;/Val3&gt;\n &lt;/PersonTraining&gt;\n</code></pre>\n\n<p>Please let me know what option I would need to set so that the null value in the object attributes can ALSO be marshalled, and returned as empty/null elements.</p>\n\n<p>Here is the marshalling code:</p>\n\n<pre><code>StringWriter sw = new StringWriter();\nJAXBContext jc = JAXBContext.newInstance(\"person_training\");   \nMarshaller m = jc.createMarshaller();\nm.setProperty(Marshaller.JAXB_FORMATTED_OUTPUT, Boolean.TRUE);\nm.marshal(ptl, sw);\n</code></pre>\n"},{"tags":["java","arrays","loops","if-statement","return"],"comments":[{"owner":{"account_id":2562742,"reputation":5917,"user_id":2851311,"display_name":"hfontanez"},"score":1,"creation_date":1672753626,"post_id":74994201,"comment_id":132342138,"body_markdown":"You need to create a comparator that compares `Person` objects by birthYear. That&#39;s the best solution. Other solution is brute force. Sort by getting the age year and swap (like a bubblesort).","body":"You need to create a comparator that compares <code>Person</code> objects by birthYear. That&#39;s the best solution. Other solution is brute force. Sort by getting the age year and swap (like a bubblesort)."},{"owner":{"account_id":1475,"reputation":533794,"user_id":1968,"accept_rate":83,"display_name":"Konrad Rudolph"},"score":0,"creation_date":1672754365,"post_id":74994201,"comment_id":132342389,"body_markdown":"@hfontanez Sorting is overkill. It&#39;s simpler and more efficient to iterate through the array and keep track of the oldest person so far.","body":"@hfontanez Sorting is overkill. It&#39;s simpler and more efficient to iterate through the array and keep track of the oldest person so far."},{"owner":{"account_id":1475,"reputation":533794,"user_id":1968,"accept_rate":83,"display_name":"Konrad Rudolph"},"score":0,"creation_date":1672754517,"post_id":74994201,"comment_id":132342438,"body_markdown":"The approach outlined at the beginning of the last paragraph is sound. So please show us what you have tried. Not sure what you mean by &quot;use external method calls&quot;. What would you need them for? You have all the information you need right there in your `Person` class.","body":"The approach outlined at the beginning of the last paragraph is sound. So please show us what you have tried. Not sure what you mean by &quot;use external method calls&quot;. What would you need them for? You have all the information you need right there in your <code>Person</code> class."},{"owner":{"account_id":2562742,"reputation":5917,"user_id":2851311,"display_name":"hfontanez"},"score":0,"creation_date":1672754859,"post_id":74994201,"comment_id":132342544,"body_markdown":"@KonradRudolph I never said that sorting was an optimal solution. In fact, you seem to ignore that my initial recommendation was to create a comparator AND that I mentioned it was the best solution.","body":"@KonradRudolph I never said that sorting was an optimal solution. In fact, you seem to ignore that my initial recommendation was to create a comparator AND that I mentioned it was the best solution."},{"owner":{"account_id":1475,"reputation":533794,"user_id":1968,"accept_rate":83,"display_name":"Konrad Rudolph"},"score":0,"creation_date":1672754979,"post_id":74994201,"comment_id":132342576,"body_markdown":"@hfontanez My comment didn&#39;t imply that you said it was the best solution; but why mention it at all? In fact, creating a comparator is *also* overkill for OP (but I agree that in real-world code it would *usually* be the best solution). Given their level, it&#39;s best to have a dumb, manual `for` loop that compares the ages in each iteration.","body":"@hfontanez My comment didn&#39;t imply that you said it was the best solution; but why mention it at all? In fact, creating a comparator is <i>also</i> overkill for OP (but I agree that in real-world code it would <i>usually</i> be the best solution). Given their level, it&#39;s best to have a dumb, manual <code>for</code> loop that compares the ages in each iteration."},{"owner":{"account_id":2562742,"reputation":5917,"user_id":2851311,"display_name":"hfontanez"},"score":0,"creation_date":1672768316,"post_id":74994201,"comment_id":132347072,"body_markdown":"I suggest to change (if you can) the `birthYear` variable name to `birthDate` and change its datatype to be `LocalDate`. You can still use g00se solution to figure out the eldest `Person`.","body":"I suggest to change (if you can) the <code>birthYear</code> variable name to <code>birthDate</code> and change its datatype to be <code>LocalDate</code>. You can still use g00se solution to figure out the eldest <code>Person</code>."}],"answers":[{"comments":[{"owner":{"account_id":13542195,"reputation":139,"user_id":9769594,"display_name":"warmCabin"},"score":0,"creation_date":1672779768,"post_id":74994423,"comment_id":132350173,"body_markdown":"That&#39;s how I&#39;d do it, or maybe `Optional&lt;Person&gt; eldest = Arrays.stream(allPersons).max(Comparator.comparing(Person::getAge));`. but I don&#39;t think OP is ready for streams yet.","body":"That&#39;s how I&#39;d do it, or maybe <code>Optional&lt;Person&gt; eldest = Arrays.stream(allPersons).max(Comparator.comparing(Person::g&zwnj;&#8203;etAge));</code>. but I don&#39;t think OP is ready for streams yet."}],"tags":[],"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1672754596,"creation_date":1672754596,"answer_id":74994423,"question_id":74994201,"body_markdown":"Or you could use a stream approach:\r\n\r\n        Optional&lt;Person&gt; eldest = Arrays.stream(allPersons)\r\n            .collect(Collectors.maxBy((p1, p2) -&gt; Integer.compare(p1.getAge(), p2.getAge())));\r\n        System.out.println(&quot;Eldest is &quot; + eldest.get());\r\n\r\nBut you might want to do a simple iteration, keeping track of the current oldest, as has been suggested\r\n\r\n","title":"Find highest age of person in Array and return name","body":"<p>Or you could use a stream approach:</p>\n<pre><code>    Optional&lt;Person&gt; eldest = Arrays.stream(allPersons)\n        .collect(Collectors.maxBy((p1, p2) -&gt; Integer.compare(p1.getAge(), p2.getAge())));\n    System.out.println(&quot;Eldest is &quot; + eldest.get());\n</code></pre>\n<p>But you might want to do a simple iteration, keeping track of the current oldest, as has been suggested</p>\n"},{"comments":[{"owner":{"account_id":27421106,"reputation":1,"user_id":20919521,"display_name":"Hexatronic"},"score":0,"creation_date":1672847813,"post_id":74998696,"comment_id":132366189,"body_markdown":"@KonradRudolph\n\nHm, external method calls: i was thinking because this nameOfTheOldest-method is supposed to be \nin the PersonRegister class and the getName- and birthYear-methods are in the Person class?","body":"@KonradRudolph  Hm, external method calls: i was thinking because this nameOfTheOldest-method is supposed to be  in the PersonRegister class and the getName- and birthYear-methods are in the Person class?"},{"owner":{"account_id":27421106,"reputation":1,"user_id":20919521,"display_name":"Hexatronic"},"score":0,"creation_date":1672847835,"post_id":74998696,"comment_id":132366203,"body_markdown":"what do you compare allPersons[i] to inside \nthe if statement? I get &quot;bad operand types for binary operator&quot;\nwhen i compare it to the oldest-variable.","body":"what do you compare allPersons[i] to inside  the if statement? I get &quot;bad operand types for binary operator&quot; when i compare it to the oldest-variable."},{"owner":{"account_id":13542195,"reputation":139,"user_id":9769594,"display_name":"warmCabin"},"score":0,"creation_date":1672896885,"post_id":74998696,"comment_id":132377622,"body_markdown":"Were you doing `if (allPersons[i] &gt; oldest)`? That&#39;s not going to work. You need to do `allPersons[i].something()` (but I won&#39;t spoil that something exactly).","body":"Were you doing <code>if (allPersons[i] &gt; oldest)</code>? That&#39;s not going to work. You need to do <code>allPersons[i].something()</code> (but I won&#39;t spoil that something exactly)."}],"tags":[],"owner":{"account_id":13542195,"reputation":139,"user_id":9769594,"display_name":"warmCabin"},"comment_count":3,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1672780403,"creation_date":1672780403,"answer_id":74998696,"question_id":74994201,"body_markdown":"This should get you started.\r\n\r\n```java\r\npublic String nameOfTheOldest()\r\n{\r\n    Person oldest = allPersons[0];\r\n    for (int i = 1; i &lt; allPersons.length; i++)\r\n    {\r\n        if (allPersons[i] ...)\r\n            ...\r\n    }\r\n    return ...;\r\n}\r\n```","title":"Find highest age of person in Array and return name","body":"<p>This should get you started.</p>\n<pre class=\"lang-java prettyprint-override\"><code>public String nameOfTheOldest()\n{\n    Person oldest = allPersons[0];\n    for (int i = 1; i &lt; allPersons.length; i++)\n    {\n        if (allPersons[i] ...)\n            ...\n    }\n    return ...;\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":4487116,"reputation":429,"user_id":3649352,"accept_rate":67,"display_name":"Kunal Varpe"},"score":0,"creation_date":1672849494,"post_id":75008268,"comment_id":132366771,"body_markdown":"As it’s currently written, your answer is unclear. Please [edit] to add additional details that will help others understand how this addresses the question asked. You can find more information on how to write good answers [in the help center](/help/how-to-answer).","body":"As it’s currently written, your answer is unclear. Please <a href=\"https://stackoverflow.com/posts/75008268/edit\">edit</a> to add additional details that will help others understand how this addresses the question asked. You can find more information on how to write good answers <a href=\"/help/how-to-answer\">in the help center</a>."},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1672850449,"post_id":75008268,"comment_id":132367128,"body_markdown":"If it worked, that wouldn&#39;t do what the method says. It would return an age as a `String`","body":"If it worked, that wouldn&#39;t do what the method says. It would return an age as a <code>String</code>"}],"tags":[],"owner":{"account_id":27421106,"reputation":1,"user_id":20919521,"display_name":"Hexatronic"},"comment_count":2,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1672849087,"creation_date":1672849059,"answer_id":75008268,"question_id":74994201,"body_markdown":"I tried this. Returns the \r\nage as a string but not the name. Also i get &quot;Exception occurred&quot; if the amount\r\nof Person objects in the array do not match the length of the array when i use the method.  \r\n\r\nCode:\r\n```\r\n      public String nameOfTheOldest() {\r\n        // oldest == earliest birthYear.\r\n            \r\n            String str= &quot;&quot;;\r\n            Person oldest = allPersons[0];\r\n            int oldestINT = oldest.birthYear();\r\n    for (int i = 1; i &lt; allPersons.length; i++)\r\n    {     \r\n        \r\n        Person maybeOldest = allPersons[i];\r\n        int perhapsOldest = maybeOldest.birthYear();\r\n        if (perhapsOldest &lt; oldestINT)\r\n            oldestINT = perhapsOldest;\r\n            \r\n            str = String.valueOf(oldestINT);\r\n            \r\n    }\r\n    return str;\r\n}\r\n```","title":"Find highest age of person in Array and return name","body":"<p>I tried this. Returns the\nage as a string but not the name. Also i get &quot;Exception occurred&quot; if the amount\nof Person objects in the array do not match the length of the array when i use the method.</p>\n<p>Code:</p>\n<pre><code>      public String nameOfTheOldest() {\n        // oldest == earliest birthYear.\n            \n            String str= &quot;&quot;;\n            Person oldest = allPersons[0];\n            int oldestINT = oldest.birthYear();\n    for (int i = 1; i &lt; allPersons.length; i++)\n    {     \n        \n        Person maybeOldest = allPersons[i];\n        int perhapsOldest = maybeOldest.birthYear();\n        if (perhapsOldest &lt; oldestINT)\n            oldestINT = perhapsOldest;\n            \n            str = String.valueOf(oldestINT);\n            \n    }\n    return str;\n}\n</code></pre>\n"},{"tags":[],"owner":{"display_name":"user20937564"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1672931960,"creation_date":1672931960,"answer_id":75020656,"question_id":74994201,"body_markdown":"Use below code -\r\n\r\n        public String nameOfTheOldest() {\r\n        Person oldest = allPersons[0];\r\n        for (int i = 1; i &lt; allPersons.length; i++)\r\n        {\r\n            Person p = allPersons[i];\r\n            if (p.birthYear() &lt; oldest.birthYear()) {\r\n                oldest = p;\r\n            }\r\n        }\r\n        return oldest.name();\r\n    }\r\n","title":"Find highest age of person in Array and return name","body":"<p>Use below code -</p>\n<pre><code>    public String nameOfTheOldest() {\n    Person oldest = allPersons[0];\n    for (int i = 1; i &lt; allPersons.length; i++)\n    {\n        Person p = allPersons[i];\n        if (p.birthYear() &lt; oldest.birthYear()) {\n            oldest = p;\n        }\n    }\n    return oldest.name();\n}\n</code></pre>\n"}],"owner":{"account_id":27421106,"reputation":1,"user_id":20919521,"display_name":"Hexatronic"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":146,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":4,"score":0,"last_activity_date":1672931960,"creation_date":1672753438,"question_id":74994201,"body_markdown":"Task: your task is to expand the class `PersonRegister` through coding the method `nameOftheOldest()`. The methods task is to find and return the name of the person that is the oldest in the register (that is the oldest of those stored in the list `allPersons` array).\r\n\r\nCode of the class looks like this:\r\n\r\n```\r\npublic class PersonRegister\r\n{\r\n    // instance variables - replace the example below with your own\r\n    private Person[] allPersons;\r\n\r\n    /**\r\n     * Constructor for objects of class PersonRegister\r\n     */\r\n    public PersonRegister(int numberOfPersons)\r\n    {\r\n        // initialise instance variables\r\n        this.allPersons = new Person[numberOfPersons];\r\n    }\r\n    \r\n    public void registreraPerson(int index, Person aPerson)\r\n    {\r\n        \r\n        allPersons[index] = aPerson;\r\n        \r\n    }\r\n}\r\n```\r\n\r\nThere is another class called Person in the program that looks like this:\r\n\r\n```\r\npublic class Person\r\n{\r\n    // instance variables - replace the example below with your own\r\n    private String name;\r\n    private int birthYear;\r\n\r\n    /**\r\n     * Constructor for objects of class ExperimentJavaLoops\r\n     */\r\n    public Person(String name, int birthYear)\r\n    {\r\n        // initialise instance variables\r\n        this.name = name;\r\n        this.birthYear = birthYear;\r\n    }\r\n    \r\n    public String getName()\r\n    {\r\n        return name;\r\n        \r\n    }\r\n    \r\n    public int birthYear()\r\n    {\r\n        return birthYear;\r\n    }\r\n    \r\n    public void setName(String name)\r\n    {\r\n        this.name = name;\r\n        \r\n    }\r\n    \r\n    public void setbirthYear(int birthYear)\r\n    {\r\n        \r\n        this.birthYear = birthYear;\r\n        \r\n    }\r\n}\r\n```\r\n\r\nGoogled this a lot, read literature and tried to code it but cant find a solution. I think I&#39;m supposed to loop through the array and compare values inside the loop through an if-statement. Then also use external method calls to get the name and birthyear (oldest will be the person with lowest birthyear, naturally). And it should be converted to String and returned in order to return name? Confused. Very new to programming and a bit more used to ArrayLists than Arrays. ","title":"Find highest age of person in Array and return name","body":"<p>Task: your task is to expand the class <code>PersonRegister</code> through coding the method <code>nameOftheOldest()</code>. The methods task is to find and return the name of the person that is the oldest in the register (that is the oldest of those stored in the list <code>allPersons</code> array).</p>\n<p>Code of the class looks like this:</p>\n<pre><code>public class PersonRegister\n{\n    // instance variables - replace the example below with your own\n    private Person[] allPersons;\n\n    /**\n     * Constructor for objects of class PersonRegister\n     */\n    public PersonRegister(int numberOfPersons)\n    {\n        // initialise instance variables\n        this.allPersons = new Person[numberOfPersons];\n    }\n    \n    public void registreraPerson(int index, Person aPerson)\n    {\n        \n        allPersons[index] = aPerson;\n        \n    }\n}\n</code></pre>\n<p>There is another class called Person in the program that looks like this:</p>\n<pre><code>public class Person\n{\n    // instance variables - replace the example below with your own\n    private String name;\n    private int birthYear;\n\n    /**\n     * Constructor for objects of class ExperimentJavaLoops\n     */\n    public Person(String name, int birthYear)\n    {\n        // initialise instance variables\n        this.name = name;\n        this.birthYear = birthYear;\n    }\n    \n    public String getName()\n    {\n        return name;\n        \n    }\n    \n    public int birthYear()\n    {\n        return birthYear;\n    }\n    \n    public void setName(String name)\n    {\n        this.name = name;\n        \n    }\n    \n    public void setbirthYear(int birthYear)\n    {\n        \n        this.birthYear = birthYear;\n        \n    }\n}\n</code></pre>\n<p>Googled this a lot, read literature and tried to code it but cant find a solution. I think I'm supposed to loop through the array and compare values inside the loop through an if-statement. Then also use external method calls to get the name and birthyear (oldest will be the person with lowest birthyear, naturally). And it should be converted to String and returned in order to return name? Confused. Very new to programming and a bit more used to ArrayLists than Arrays.</p>\n"},{"tags":["java","svg","batik"],"comments":[{"owner":{"display_name":"user19145409"},"score":0,"creation_date":1672905219,"post_id":75014971,"comment_id":132379297,"body_markdown":"are you using maven ?","body":"are you using maven ?"},{"owner":{"account_id":7701,"reputation":47163,"user_id":13447,"accept_rate":100,"display_name":"Olaf Kock"},"score":0,"creation_date":1672907521,"post_id":75014971,"comment_id":132379873,"body_markdown":"Please [don&#39;t upload text as image](https://meta.stackoverflow.com/a/285557/13447). Edit your question to contain all the information in text form - consider to use the editor&#39;s formatting options. Also see [ask]: A screenshot of an IDE is not a proper problem description. Check [mcve] for a description of what is required to help, and what will help others coming after you finding the same, or a similar problem and its solution","body":"Please <a href=\"https://meta.stackoverflow.com/a/285557/13447\">don&#39;t upload text as image</a>. Edit your question to contain all the information in text form - consider to use the editor&#39;s formatting options. Also see <a href=\"https://stackoverflow.com/questions/how-to-ask\">How to Ask</a>: A screenshot of an IDE is not a proper problem description. Check <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> for a description of what is required to help, and what will help others coming after you finding the same, or a similar problem and its solution"},{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1672908413,"post_id":75014971,"comment_id":132380136,"body_markdown":"Please clarify your specific problem or provide additional details to highlight exactly what you need. As it&#39;s currently written, it&#39;s hard to tell exactly what you&#39;re asking.","body":"Please clarify your specific problem or provide additional details to highlight exactly what you need. As it&#39;s currently written, it&#39;s hard to tell exactly what you&#39;re asking."},{"owner":{"account_id":9067781,"reputation":30730,"user_id":6752050,"display_name":"273K"},"score":0,"creation_date":1672931804,"post_id":75014971,"comment_id":132388272,"body_markdown":"The tag [tag:STL] is wrong here. Read the descriptions while choosing tags.","body":"The tag <a href=\"https://stackoverflow.com/questions/tagged/stl\">stl</a> is wrong here. Read the descriptions while choosing tags."}],"answers":[{"tags":[],"owner":{"display_name":"user19145409"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1672905424,"creation_date":1672905424,"answer_id":75015329,"question_id":75014971,"body_markdown":"If you are using maven :\r\n\r\nFor For Apache Batik:\r\n\r\n    &lt;dependency&gt;\r\n      &lt;groupId&gt;org.apache.xmlgraphics&lt;/groupId&gt;\r\n      &lt;artifactId&gt;batik-all&lt;/artifactId&gt;\r\n      &lt;version&gt;1.13&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n\r\nFor For OpenPnP:\r\n\r\n    &lt;dependency&gt;\r\n      &lt;groupId&gt;org.openpnp&lt;/groupId&gt;\r\n      &lt;artifactId&gt;openpnp-lib&lt;/artifactId&gt;\r\n      &lt;version&gt;2.2.0&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n\r\nApply the import as required. \r\n\r\n    import org.apache.batik.dom.svg.SVGDOMImplementation;\r\n    import org.openpnp.model.LengthUnit;\r\n\r\n \r\nIf you are not using maven:\r\n\r\n1.Download the latest version of the libraries from the Apache Batik website (https://xmlgraphics.apache.org/batik/) and the OpenPnP website (http://openpnp.org/).\r\n\r\n2.Add the libraries to your project&#39;s classpath. This will typically involve adding the libraries to your project&#39;s build path or referencing them in your build tool&#39;s configuration files.\r\n\r\nDoing above must help you in general.\r\n","title":"How do I add Apache Batik and OpenePnP libraries in my project","body":"<p>If you are using maven :</p>\n<p>For For Apache Batik:</p>\n<pre><code>&lt;dependency&gt;\n  &lt;groupId&gt;org.apache.xmlgraphics&lt;/groupId&gt;\n  &lt;artifactId&gt;batik-all&lt;/artifactId&gt;\n  &lt;version&gt;1.13&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n<p>For For OpenPnP:</p>\n<pre><code>&lt;dependency&gt;\n  &lt;groupId&gt;org.openpnp&lt;/groupId&gt;\n  &lt;artifactId&gt;openpnp-lib&lt;/artifactId&gt;\n  &lt;version&gt;2.2.0&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n<p>Apply the import as required.</p>\n<pre><code>import org.apache.batik.dom.svg.SVGDOMImplementation;\nimport org.openpnp.model.LengthUnit;\n</code></pre>\n<p>If you are not using maven:</p>\n<p>1.Download the latest version of the libraries from the Apache Batik website (<a href=\"https://xmlgraphics.apache.org/batik/\" rel=\"nofollow noreferrer\">https://xmlgraphics.apache.org/batik/</a>) and the OpenPnP website (<a href=\"http://openpnp.org/\" rel=\"nofollow noreferrer\">http://openpnp.org/</a>).</p>\n<p>2.Add the libraries to your project's classpath. This will typically involve adding the libraries to your project's build path or referencing them in your build tool's configuration files.</p>\n<p>Doing above must help you in general.</p>\n"}],"owner":{"account_id":20991485,"reputation":1,"user_id":19630161,"display_name":"Pawan Kumar"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":152,"favorite_count":0,"down_vote_count":3,"up_vote_count":0,"closed_date":1672931760,"answer_count":1,"score":-3,"last_activity_date":1672931811,"creation_date":1672903054,"question_id":75014971,"body_markdown":"[Here is problem](https://i.stack.imgur.com/GMtwT.png)\r\n\r\n[Please guide me](https://i.stack.imgur.com/H1IHi.png)\r\n\r\nI tried to add libraries which I download and it didnot work.\r\ncan someone help me to solve this problem","title":"How do I add Apache Batik and OpenePnP libraries in my project","body":"<p><a href=\"https://i.stack.imgur.com/GMtwT.png\" rel=\"nofollow noreferrer\">Here is problem</a></p>\n<p><a href=\"https://i.stack.imgur.com/H1IHi.png\" rel=\"nofollow noreferrer\">Please guide me</a></p>\n<p>I tried to add libraries which I download and it didnot work.\ncan someone help me to solve this problem</p>\n"},{"tags":["java","android","service","permissions","adb"],"comments":[{"owner":{"account_id":50585,"reputation":39940,"user_id":150978,"accept_rate":78,"display_name":"Robert"},"score":1,"creation_date":1672933097,"post_id":75020620,"comment_id":132388804,"body_markdown":"Have you read [this answer](https://stackoverflow.com/a/31386719/150978)? I assume it is the same case here, the service does not make use of the permission, instead it defines that the component using the service requires it.","body":"Have you read <a href=\"https://stackoverflow.com/a/31386719/150978\">this answer</a>? I assume it is the same case here, the service does not make use of the permission, instead it defines that the component using the service requires it."},{"owner":{"account_id":10060184,"reputation":2295,"user_id":7437143,"accept_rate":100,"display_name":"a.t."},"score":0,"creation_date":1672961480,"post_id":75020620,"comment_id":132397361,"body_markdown":"Thank you, it indeed seems related to this error, however, I did not yet understand it well enough to apply that knowledge to start the service with the required permission.","body":"Thank you, it indeed seems related to this error, however, I did not yet understand it well enough to apply that knowledge to start the service with the required permission."}],"owner":{"account_id":10060184,"reputation":2295,"user_id":7437143,"accept_rate":100,"display_name":"a.t."},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":281,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1672931795,"creation_date":1672931795,"question_id":75020620,"body_markdown":"## Context\r\nWhile trying to launch a tor service in Orbot, on a rooted phone, I am encountering some difficulties.\r\n\r\nWhen I try to launch the tor connection with:\r\n```\r\nadb shell am startservice -n org.torproject.android/.service.OrbotService\r\n```\r\nI get error:\r\n```\r\nStarting service: Intent { cmp=org.torproject.android/.service.OrbotService }\r\nError: Requires permission android.permission.BIND_VPN_SERVICE\r\n```\r\nYet when I try to set that permission with:\r\n```\r\nadb shell pm grant org.torproject.android android.permission.BIND_VPN_SERVICE\r\n```\r\nIt throws error:\r\n```\r\nSecurity exception: Package org.torproject.android has not requested permission android.permission.BIND_VPN_SERVICE\r\n\r\njava.lang.SecurityException: Package org.torproject.android has not requested permission android.permission.BIND_VPN_SERVICE\r\n\tat com.android.server.pm.permission.BasePermission.enforceDeclaredUsedAndRuntimeOrDevelopment(BasePermission.java:444)\r\n\tat com.android.server.pm.permission.PermissionManagerService.grantRuntimePermission(PermissionManagerService.java:2238)\r\n\tat com.android.server.pm.permission.PermissionManagerService.access$1100(PermissionManagerService.java:122)\r\n\tat com.android.server.pm.permission.PermissionManagerService$PermissionManagerServiceInternalImpl.grantRuntimePermission(PermissionManagerService.java:3239)\r\n\tat com.android.server.pm.PackageManagerService.grantRuntimePermission(PackageManagerService.java:5788)\r\n\tat com.android.server.pm.PackageManagerShellCommand.runGrantRevokePermission(PackageManagerShellCommand.java:1955)\r\n\tat com.android.server.pm.PackageManagerShellCommand.onCommand(PackageManagerShellCommand.java:230)\r\n\tat android.os.ShellCommand.exec(ShellCommand.java:104)\r\n\tat com.android.server.pm.PackageManagerService.onShellCommand(PackageManagerService.java:21952)\r\n\tat android.os.Binder.shellCommand(Binder.java:881)\r\n\tat android.os.Binder.onTransact(Binder.java:765)\r\n\tat android.content.pm.IPackageManager$Stub.onTransact(IPackageManager.java:4876)\r\n\tat com.android.server.pm.PackageManagerService.onTransact(PackageManagerService.java:4049)\r\n\tat android.os.Binder.execTransactInternal(Binder.java:1021)\r\n\tat android.os.Binder.execTransact(Binder.java:994)\r\n```\r\nBased on [this answer](https://stackoverflow.com/a/21767385/7437143) I should create the request in the `AndroidManifest.xml` of the Orbot `.apk` file, however, I am not compiling the apk, the apk is already pre-installed from a store, and I would expect the request for the permission to be stored when I try to launch the service. (Such that it recongises the previous request for permmission when I try to set it).\r\n\r\n## Question\r\nHow can I start the service and set the required permission successfully using `adb`?","title":"Error: Requires permission android.permission.BIND_VPN_SERVICE with Error: Package has not requested permission android.permission.BIND_VPN_SERVICE","body":"<h2>Context</h2>\n<p>While trying to launch a tor service in Orbot, on a rooted phone, I am encountering some difficulties.</p>\n<p>When I try to launch the tor connection with:</p>\n<pre><code>adb shell am startservice -n org.torproject.android/.service.OrbotService\n</code></pre>\n<p>I get error:</p>\n<pre><code>Starting service: Intent { cmp=org.torproject.android/.service.OrbotService }\nError: Requires permission android.permission.BIND_VPN_SERVICE\n</code></pre>\n<p>Yet when I try to set that permission with:</p>\n<pre><code>adb shell pm grant org.torproject.android android.permission.BIND_VPN_SERVICE\n</code></pre>\n<p>It throws error:</p>\n<pre><code>Security exception: Package org.torproject.android has not requested permission android.permission.BIND_VPN_SERVICE\n\njava.lang.SecurityException: Package org.torproject.android has not requested permission android.permission.BIND_VPN_SERVICE\n    at com.android.server.pm.permission.BasePermission.enforceDeclaredUsedAndRuntimeOrDevelopment(BasePermission.java:444)\n    at com.android.server.pm.permission.PermissionManagerService.grantRuntimePermission(PermissionManagerService.java:2238)\n    at com.android.server.pm.permission.PermissionManagerService.access$1100(PermissionManagerService.java:122)\n    at com.android.server.pm.permission.PermissionManagerService$PermissionManagerServiceInternalImpl.grantRuntimePermission(PermissionManagerService.java:3239)\n    at com.android.server.pm.PackageManagerService.grantRuntimePermission(PackageManagerService.java:5788)\n    at com.android.server.pm.PackageManagerShellCommand.runGrantRevokePermission(PackageManagerShellCommand.java:1955)\n    at com.android.server.pm.PackageManagerShellCommand.onCommand(PackageManagerShellCommand.java:230)\n    at android.os.ShellCommand.exec(ShellCommand.java:104)\n    at com.android.server.pm.PackageManagerService.onShellCommand(PackageManagerService.java:21952)\n    at android.os.Binder.shellCommand(Binder.java:881)\n    at android.os.Binder.onTransact(Binder.java:765)\n    at android.content.pm.IPackageManager$Stub.onTransact(IPackageManager.java:4876)\n    at com.android.server.pm.PackageManagerService.onTransact(PackageManagerService.java:4049)\n    at android.os.Binder.execTransactInternal(Binder.java:1021)\n    at android.os.Binder.execTransact(Binder.java:994)\n</code></pre>\n<p>Based on <a href=\"https://stackoverflow.com/a/21767385/7437143\">this answer</a> I should create the request in the <code>AndroidManifest.xml</code> of the Orbot <code>.apk</code> file, however, I am not compiling the apk, the apk is already pre-installed from a store, and I would expect the request for the permission to be stored when I try to launch the service. (Such that it recongises the previous request for permmission when I try to set it).</p>\n<h2>Question</h2>\n<p>How can I start the service and set the required permission successfully using <code>adb</code>?</p>\n"},{"tags":["java","avro"],"comments":[{"owner":{"account_id":2671330,"reputation":183386,"user_id":2308683,"accept_rate":90,"display_name":"OneCricketeer"},"score":0,"creation_date":1672931871,"post_id":75016400,"comment_id":132388299,"body_markdown":"Javadoc says AvroEncode overrides Nullable annotation - https://avro.apache.org/docs/current/api/java/org/apache/avro/reflect/AvroEncode.html Did you try `@Union` with Void and Long?","body":"Javadoc says AvroEncode overrides Nullable annotation - <a href=\"https://avro.apache.org/docs/current/api/java/org/apache/avro/reflect/AvroEncode.html\" rel=\"nofollow noreferrer\">avro.apache.org/docs/current/api/java/org/apache/avro/reflec&zwnj;&#8203;t/&hellip;</a> Did you try <code>@Union</code> with Void and Long?"}],"owner":{"account_id":1527510,"reputation":961,"user_id":1425564,"accept_rate":50,"display_name":"Ruju"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":104,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1672931767,"creation_date":1672911556,"question_id":75016400,"body_markdown":"I need to allow default &quot;null&quot; value to Date type field.\r\nJava class :\r\n```\r\nclass Test{\r\n@Nullable\r\n@AvroEncode(using=DateAsLongEncoding.class)\r\nprivate Date updatedDate;\r\n}\r\n```\r\nGenerated schema for updatedDate:\r\n```\r\n{\r\n &quot;name&quot;:&quot;updatedDate&quot;,\r\n  &quot;type&quot;:{\r\n      &quot;type&quot;:&quot;long&quot;,\r\n      &quot;CustomEncoding&quot;:&quot;DateAsLongEncoding&quot;\r\n  }\r\n}\r\n```\r\nWhenever try to push the records to kafka it gives following exception whenever updatedDate is null\r\n```\r\nCaused by: java.lang.NullPointerException at org.apache.avro.reflect.DateAsLongEncoding.java\r\n```\r\nHow this field can be configured to nullable?","title":"allow null to &quot;Date&quot; type field encoded with DateAsLongEncoding","body":"<p>I need to allow default &quot;null&quot; value to Date type field.\nJava class :</p>\n<pre><code>class Test{\n@Nullable\n@AvroEncode(using=DateAsLongEncoding.class)\nprivate Date updatedDate;\n}\n</code></pre>\n<p>Generated schema for updatedDate:</p>\n<pre><code>{\n &quot;name&quot;:&quot;updatedDate&quot;,\n  &quot;type&quot;:{\n      &quot;type&quot;:&quot;long&quot;,\n      &quot;CustomEncoding&quot;:&quot;DateAsLongEncoding&quot;\n  }\n}\n</code></pre>\n<p>Whenever try to push the records to kafka it gives following exception whenever updatedDate is null</p>\n<pre><code>Caused by: java.lang.NullPointerException at org.apache.avro.reflect.DateAsLongEncoding.java\n</code></pre>\n<p>How this field can be configured to nullable?</p>\n"},{"tags":["java","apache-kafka","confluent-schema-registry"],"answers":[{"tags":[],"owner":{"account_id":2671330,"reputation":183386,"user_id":2308683,"accept_rate":90,"display_name":"OneCricketeer"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1672931573,"creation_date":1672931573,"answer_id":75020568,"question_id":75016914,"body_markdown":"The serializers are separated from the core registry module. \r\n\r\nYou&#39;re missing these \r\n\r\n```\r\n&lt;dependency&gt;\r\n    &lt;groupId&gt;io.confluent&lt;/groupId&gt;\r\n    &lt;artifactId&gt;kafka-json-schema-provider&lt;/artifactId&gt;\r\n    &lt;version&gt;7.3.1&lt;/version&gt;\r\n&lt;/dependency&gt;\r\n&lt;dependency&gt;\r\n    &lt;groupId&gt;io.confluent&lt;/groupId&gt;\r\n    &lt;artifactId&gt;kafka-json-schema-serializer&lt;/artifactId&gt;\r\n    &lt;version&gt;7.3.1&lt;/version&gt;\r\n&lt;/dependency&gt;\r\n```","title":"Confluent Kafka java.lang.ClassNotFoundException: io.confluent.kafka.schemaregistry.json.jackson.Jackson","body":"<p>The serializers are separated from the core registry module.</p>\n<p>You're missing these</p>\n<pre><code>&lt;dependency&gt;\n    &lt;groupId&gt;io.confluent&lt;/groupId&gt;\n    &lt;artifactId&gt;kafka-json-schema-provider&lt;/artifactId&gt;\n    &lt;version&gt;7.3.1&lt;/version&gt;\n&lt;/dependency&gt;\n&lt;dependency&gt;\n    &lt;groupId&gt;io.confluent&lt;/groupId&gt;\n    &lt;artifactId&gt;kafka-json-schema-serializer&lt;/artifactId&gt;\n    &lt;version&gt;7.3.1&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n"}],"owner":{"account_id":13832761,"reputation":97,"user_id":12073556,"display_name":"blinkbink"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":468,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":75020568,"answer_count":1,"score":0,"last_activity_date":1672931573,"creation_date":1672914031,"question_id":75016914,"body_markdown":"Cause i use ant project, i need lib jar from here [kafka-schema-registry][1], use the jar but got error missing \r\n\r\n    java.lang.ClassNotFoundException: io.confluent.kafka.schemaregistry.json.jackson.Jackson\r\n\r\n\r\n\r\nif i try build with maven project\r\n\r\n    &lt;!-- https://mvnrepository.com/artifact/io.confluent/kafka-schema-registry --&gt;\r\n    &lt;dependency&gt;\r\n        &lt;groupId&gt;io.confluent&lt;/groupId&gt;\r\n        &lt;artifactId&gt;kafka-schema-registry&lt;/artifactId&gt;\r\n        &lt;version&gt;7.3.1&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n\r\nthe class `io.confluent.kafka.schemaregistry.json.jackson.Jackson` can be imported\r\n\r\n    import io.confluent.kafka.schemaregistry.json.jackson.Jackson;\r\n\r\nwhy the class missing in .jar ?\r\n\r\n  [1]: https://mvnrepository.com/artifact/io.confluent/kafka-schema-registry/7.3.1\r\n\r\nimport lib :\r\n\r\n    import io.confluent.kafka.serializers.json.KafkaJsonSchemaSerializer;\r\n    import io.confluent.kafka.serializers.json.KafkaJsonSchemaSerializerConfig;\r\n    import org.apache.kafka.clients.producer.KafkaProducer;\r\n    import org.apache.kafka.clients.producer.Producer;\r\n    import org.apache.kafka.clients.producer.ProducerConfig;\r\n    import org.apache.kafka.clients.producer.ProducerRecord;\r\n    import org.apache.kafka.common.serialization.IntegerSerializer;\r\n\r\nConfig :\r\n\r\n    Properties props = new Properties();\r\n    \t\t        props.put(&quot;bootstrap.servers&quot;, url);\r\n    \t\t        props.put(&quot;linger.ms&quot;, 1);\r\n    \t\t        props.put(&quot;max.block.ms&quot;, 10000);\r\n    \t\t        props.put(&quot;group.id&quot;, &quot;billtrust&quot;);\r\n    \t\t        props.put(ProducerConfig.KEY_SERIALIZER_CLASS_CONFIG, IntegerSerializer.class.getName());\r\n    \t\t        props.put(ProducerConfig.VALUE_SERIALIZER_CLASS_CONFIG, KafkaJsonSchemaSerializer.class.getName());\r\n    \t\t        props.put(KafkaJsonSchemaSerializerConfig.SCHEMA_REGISTRY_URL_CONFIG, &quot;http://localhost:8081&quot;);\r\n    \t\t        Producer&lt;String, Payment&gt; producer = new KafkaProducer&lt;String, Payment&gt;(props);\r\n    \t\t        ProducerRecord&lt;String, Payment&gt; record = new ProducerRecord&lt;String, Payment&gt;(topic, uuid, message);\r\n    \r\n    \t\t        producer.send(record);\r\n\r\ncomplete error log :\r\n\r\n    org.apache.kafka.common.KafkaException: Failed to construct kafka producer\r\n            at org.apache.kafka.clients.producer.KafkaProducer.&lt;init&gt;(KafkaProducer.java:468)\r\n            at org.apache.kafka.clients.producer.KafkaProducer.&lt;init&gt;(KafkaProducer.java:291)\r\n            at org.apache.kafka.clients.producer.KafkaProducer.&lt;init&gt;(KafkaProducer.java:318)\r\n            at org.apache.kafka.clients.producer.KafkaProducer.&lt;init&gt;(KafkaProducer.java:303)\r\n            at api.kafka.Kafka.sendPayment(Kafka.java:80)\r\n            at apiBiling.Prepaid.TopupPlan.TopupwPlan(TopupPlan.java:382)\r\n            at apiBiling.Prepaid.TopupPlan.execute(TopupPlan.java:86)\r\n            at org.jpublish.action.ActionWrapper.execute(ActionWrapper.java:68)\r\n            at org.jpublish.page.PageInstance.executeActions(PageInstance.java:272)\r\n            at org.jpublish.Page.executeActions(Page.java:245)\r\n            at org.jpublish.servlet.JPublishServlet.doPost(JPublishServlet.java:413)\r\n            at javax.servlet.http.HttpServlet.service(HttpServlet.java:681)\r\n            at javax.servlet.http.HttpServlet.service(HttpServlet.java:764)\r\n            at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:227)\r\n            at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)\r\n            at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53)\r\n            at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)\r\n            at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)\r\n            at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:197)\r\n            at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97)\r\n            at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:540)\r\n            at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:135)\r\n            at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92)\r\n            at org.apache.catalina.valves.AbstractAccessLogValve.invoke(AbstractAccessLogValve.java:687)\r\n            at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78)\r\n            at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:357)\r\n            at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:382)\r\n            at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65)\r\n            at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:895)\r\n            at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1722)\r\n            at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49)\r\n            at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)\r\n            at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)\r\n            at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)\r\n            at java.lang.Thread.run(Thread.java:748)\r\n    Caused by: org.apache.kafka.common.KafkaException: Could not instantiate class io.confluent.kafka.serializers.json.KafkaJsonSchemaSerializer\r\n            at org.apache.kafka.common.utils.Utils.newInstance(Utils.java:396)\r\n            at org.apache.kafka.common.config.AbstractConfig.getConfiguredInstance(AbstractConfig.java:401)\r\n            at org.apache.kafka.common.config.AbstractConfig.getConfiguredInstance(AbstractConfig.java:436)\r\n            at org.apache.kafka.common.config.AbstractConfig.getConfiguredInstance(AbstractConfig.java:421)\r\n            at org.apache.kafka.clients.producer.KafkaProducer.&lt;init&gt;(KafkaProducer.java:394)\r\n            ... 34 more\r\n    Caused by: java.lang.reflect.InvocationTargetException\r\n            at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)\r\n            at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:62)\r\n            at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45)\r\n            at java.lang.reflect.Constructor.newInstance(Constructor.java:423)\r\n            at org.apache.kafka.common.utils.Utils.newInstance(Utils.java:392)\r\n            ... 38 more\r\n    Caused by: java.lang.NoClassDefFoundError: io/confluent/kafka/schemaregistry/json/jackson/Jackson\r\n            at io.confluent.kafka.serializers.json.AbstractKafkaJsonSchemaSerializer.&lt;init&gt;(AbstractKafkaJsonSchemaSerializer.java:47)\r\n            at io.confluent.kafka.serializers.json.KafkaJsonSchemaSerializer.&lt;init&gt;(KafkaJsonSchemaSerializer.java:41)\r\n            ... 43 more\r\n    Caused by: java.lang.ClassNotFoundException: io.confluent.kafka.schemaregistry.json.jackson.Jackson\r\n            at org.apache.catalina.loader.WebappClassLoaderBase.loadClass(WebappClassLoaderBase.java:1407)\r\n            at org.apache.catalina.loader.WebappClassLoaderBase.loadClass(WebappClassLoaderBase.java:1215)\r\n            ... 45 more\r\n    java.lang.Exception: org.apache.kafka.common.KafkaException: Failed to construct kafka producer\r\n\r\n","title":"Confluent Kafka java.lang.ClassNotFoundException: io.confluent.kafka.schemaregistry.json.jackson.Jackson","body":"<p>Cause i use ant project, i need lib jar from here <a href=\"https://mvnrepository.com/artifact/io.confluent/kafka-schema-registry/7.3.1\" rel=\"nofollow noreferrer\">kafka-schema-registry</a>, use the jar but got error missing</p>\n<pre><code>java.lang.ClassNotFoundException: io.confluent.kafka.schemaregistry.json.jackson.Jackson\n</code></pre>\n<p>if i try build with maven project</p>\n<pre><code>&lt;!-- https://mvnrepository.com/artifact/io.confluent/kafka-schema-registry --&gt;\n&lt;dependency&gt;\n    &lt;groupId&gt;io.confluent&lt;/groupId&gt;\n    &lt;artifactId&gt;kafka-schema-registry&lt;/artifactId&gt;\n    &lt;version&gt;7.3.1&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n<p>the class <code>io.confluent.kafka.schemaregistry.json.jackson.Jackson</code> can be imported</p>\n<pre><code>import io.confluent.kafka.schemaregistry.json.jackson.Jackson;\n</code></pre>\n<p>why the class missing in .jar ?</p>\n<p>import lib :</p>\n<pre><code>import io.confluent.kafka.serializers.json.KafkaJsonSchemaSerializer;\nimport io.confluent.kafka.serializers.json.KafkaJsonSchemaSerializerConfig;\nimport org.apache.kafka.clients.producer.KafkaProducer;\nimport org.apache.kafka.clients.producer.Producer;\nimport org.apache.kafka.clients.producer.ProducerConfig;\nimport org.apache.kafka.clients.producer.ProducerRecord;\nimport org.apache.kafka.common.serialization.IntegerSerializer;\n</code></pre>\n<p>Config :</p>\n<pre><code>Properties props = new Properties();\n                props.put(&quot;bootstrap.servers&quot;, url);\n                props.put(&quot;linger.ms&quot;, 1);\n                props.put(&quot;max.block.ms&quot;, 10000);\n                props.put(&quot;group.id&quot;, &quot;billtrust&quot;);\n                props.put(ProducerConfig.KEY_SERIALIZER_CLASS_CONFIG, IntegerSerializer.class.getName());\n                props.put(ProducerConfig.VALUE_SERIALIZER_CLASS_CONFIG, KafkaJsonSchemaSerializer.class.getName());\n                props.put(KafkaJsonSchemaSerializerConfig.SCHEMA_REGISTRY_URL_CONFIG, &quot;http://localhost:8081&quot;);\n                Producer&lt;String, Payment&gt; producer = new KafkaProducer&lt;String, Payment&gt;(props);\n                ProducerRecord&lt;String, Payment&gt; record = new ProducerRecord&lt;String, Payment&gt;(topic, uuid, message);\n\n                producer.send(record);\n</code></pre>\n<p>complete error log :</p>\n<pre><code>org.apache.kafka.common.KafkaException: Failed to construct kafka producer\n        at org.apache.kafka.clients.producer.KafkaProducer.&lt;init&gt;(KafkaProducer.java:468)\n        at org.apache.kafka.clients.producer.KafkaProducer.&lt;init&gt;(KafkaProducer.java:291)\n        at org.apache.kafka.clients.producer.KafkaProducer.&lt;init&gt;(KafkaProducer.java:318)\n        at org.apache.kafka.clients.producer.KafkaProducer.&lt;init&gt;(KafkaProducer.java:303)\n        at api.kafka.Kafka.sendPayment(Kafka.java:80)\n        at apiBiling.Prepaid.TopupPlan.TopupwPlan(TopupPlan.java:382)\n        at apiBiling.Prepaid.TopupPlan.execute(TopupPlan.java:86)\n        at org.jpublish.action.ActionWrapper.execute(ActionWrapper.java:68)\n        at org.jpublish.page.PageInstance.executeActions(PageInstance.java:272)\n        at org.jpublish.Page.executeActions(Page.java:245)\n        at org.jpublish.servlet.JPublishServlet.doPost(JPublishServlet.java:413)\n        at javax.servlet.http.HttpServlet.service(HttpServlet.java:681)\n        at javax.servlet.http.HttpServlet.service(HttpServlet.java:764)\n        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:227)\n        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)\n        at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53)\n        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)\n        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)\n        at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:197)\n        at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97)\n        at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:540)\n        at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:135)\n        at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92)\n        at org.apache.catalina.valves.AbstractAccessLogValve.invoke(AbstractAccessLogValve.java:687)\n        at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78)\n        at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:357)\n        at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:382)\n        at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65)\n        at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:895)\n        at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1722)\n        at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49)\n        at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)\n        at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)\n        at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)\n        at java.lang.Thread.run(Thread.java:748)\nCaused by: org.apache.kafka.common.KafkaException: Could not instantiate class io.confluent.kafka.serializers.json.KafkaJsonSchemaSerializer\n        at org.apache.kafka.common.utils.Utils.newInstance(Utils.java:396)\n        at org.apache.kafka.common.config.AbstractConfig.getConfiguredInstance(AbstractConfig.java:401)\n        at org.apache.kafka.common.config.AbstractConfig.getConfiguredInstance(AbstractConfig.java:436)\n        at org.apache.kafka.common.config.AbstractConfig.getConfiguredInstance(AbstractConfig.java:421)\n        at org.apache.kafka.clients.producer.KafkaProducer.&lt;init&gt;(KafkaProducer.java:394)\n        ... 34 more\nCaused by: java.lang.reflect.InvocationTargetException\n        at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)\n        at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:62)\n        at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45)\n        at java.lang.reflect.Constructor.newInstance(Constructor.java:423)\n        at org.apache.kafka.common.utils.Utils.newInstance(Utils.java:392)\n        ... 38 more\nCaused by: java.lang.NoClassDefFoundError: io/confluent/kafka/schemaregistry/json/jackson/Jackson\n        at io.confluent.kafka.serializers.json.AbstractKafkaJsonSchemaSerializer.&lt;init&gt;(AbstractKafkaJsonSchemaSerializer.java:47)\n        at io.confluent.kafka.serializers.json.KafkaJsonSchemaSerializer.&lt;init&gt;(KafkaJsonSchemaSerializer.java:41)\n        ... 43 more\nCaused by: java.lang.ClassNotFoundException: io.confluent.kafka.schemaregistry.json.jackson.Jackson\n        at org.apache.catalina.loader.WebappClassLoaderBase.loadClass(WebappClassLoaderBase.java:1407)\n        at org.apache.catalina.loader.WebappClassLoaderBase.loadClass(WebappClassLoaderBase.java:1215)\n        ... 45 more\njava.lang.Exception: org.apache.kafka.common.KafkaException: Failed to construct kafka producer\n</code></pre>\n"},{"tags":["java","spring","spring-boot","spring-kafka"],"comments":[{"owner":{"account_id":6520,"reputation":10523,"user_id":11002,"accept_rate":75,"display_name":"tgdavies"},"score":0,"creation_date":1672876348,"post_id":75012134,"comment_id":132374569,"body_markdown":"What exactly does microservice B do that needs to happen exactly once? Just sending an email?","body":"What exactly does microservice B do that needs to happen exactly once? Just sending an email?"},{"owner":{"account_id":1288095,"reputation":169336,"user_id":1240763,"display_name":"Gary Russell"},"score":0,"creation_date":1672931480,"post_id":75012134,"comment_id":132388127,"body_markdown":"Consumption is always at least once (or at most once); exactly once is not possible for your scenario; more in my answer.","body":"Consumption is always at least once (or at most once); exactly once is not possible for your scenario; more in my answer."}],"answers":[{"tags":[],"owner":{"account_id":1288095,"reputation":169336,"user_id":1240763,"display_name":"Gary Russell"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1672931441,"creation_date":1672931441,"answer_id":75020535,"question_id":75012134,"body_markdown":"Exactly once semantics in Kafka apply to `consume-&gt;process-&gt;produce` operations within the same application - even then, only the entire cpp is &quot;exactly once&quot;; the `consume-&gt;process` part is at least once; consumption is always at least once (or at most once),  including in your scenario (for B).","title":"Exactly once Producer and Consumption - Apache Kafka and SpringBoot","body":"<p>Exactly once semantics in Kafka apply to <code>consume-&gt;process-&gt;produce</code> operations within the same application - even then, only the entire cpp is &quot;exactly once&quot;; the <code>consume-&gt;process</code> part is at least once; consumption is always at least once (or at most once),  including in your scenario (for B).</p>\n"}],"owner":{"account_id":27435856,"reputation":11,"user_id":20931720,"display_name":"Spinozist Scientist"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":84,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":1,"score":0,"last_activity_date":1672931441,"creation_date":1672872202,"question_id":75012134,"body_markdown":"I am working on a microservices project. In this project, there is a Microservice A is doing a process in various steps. At the completion of each step, Microservice sends a message into a kafka topic. Then another Microservice B consumes the message from the kafka topic and sends an email notifying the successful completion of the step. I need Exactly once semantics for this. I am using KafkaTemplate.send in Microservice A and @KafkaListener to read the message in Microservice B. My question is whether KafkaTemplate producer and @KafkaListener consumer are idempotent and if not, how can I make them idempotent.\r\n\r\nRegards,\r\n\r\nI am creating autowiring the KafkaTemplate using the following code:-\r\n@Autowired\r\n    public EventProducer(NewTopic topic, KafkaTemplate&lt;String, Event&gt; kafkaTemplate) {\r\n        this.kafkaTemplate = kafkaTemplate;\r\n  }","title":"Exactly once Producer and Consumption - Apache Kafka and SpringBoot","body":"<p>I am working on a microservices project. In this project, there is a Microservice A is doing a process in various steps. At the completion of each step, Microservice sends a message into a kafka topic. Then another Microservice B consumes the message from the kafka topic and sends an email notifying the successful completion of the step. I need Exactly once semantics for this. I am using KafkaTemplate.send in Microservice A and @KafkaListener to read the message in Microservice B. My question is whether KafkaTemplate producer and @KafkaListener consumer are idempotent and if not, how can I make them idempotent.</p>\n<p>Regards,</p>\n<p>I am creating autowiring the KafkaTemplate using the following code:-\n@Autowired\npublic EventProducer(NewTopic topic, KafkaTemplate&lt;String, Event&gt; kafkaTemplate) {\nthis.kafkaTemplate = kafkaTemplate;\n}</p>\n"},{"tags":["java","gradle","casting","deserialization"],"owner":{"account_id":10398091,"reputation":65,"user_id":7667292,"display_name":"chrisb89"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":41,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1672930924,"creation_date":1672927491,"question_id":75019664,"body_markdown":"I have a gradle project with two modules, `library` and `app`. `library` is a java-library that can be published as maven artifact. It contains some util methods that are used by `app`, hence `app` depends on `library`.\r\n\r\nNow, I&#39;d like to add two util methods for serialization as shown below. Depending on where the util methods are placed and whether or not the serialized string of `MyClass` (which is also located in `app`) is written to a csv file in between (serialize -&gt; export -&gt; import -&gt; deserialize).\r\n\r\n**Case 1 / No Problem**: As long as my util methods are part of `app`, I can serialize and deserialize `MyClass` without any problems, even if I export the serialized string to a csv-file in between.\r\n\r\n**Case 2 / No Problem**: When my utils methods are part of `library`, I can only serialize and deserialize `MyClass`, if the serialized string is not written to a csv-file in between.\r\n\r\n**Case 3 / PROBLEM**: If my utils are placed in `library` and the serialized string is written to a csv-file in between, then I get a `java.lang.ClassCastException: Cannot cast my.package.MyClass to my.package.MyClass at java.base/java.lang.Class.cast(Class.java:3605)`.\r\n\r\nWhen I run the debugger up until `ois.readObject()`, I can even see the properly deserialized object. However, it is not possible to cast it correctly.\r\n\r\nCould anyone help me to find the reason for the situation described above? Any ideas why this error could occur? Any ideas why it might not be allowed to have my util methods in `library`?\r\n\r\n```\r\n@Nonnull\r\npublic static &lt;T&gt; String serialize(T object) throws IllegalStateException {\r\n    try (\r\n        final ByteArrayOutputStream bos = new ByteArrayOutputStream();\r\n        final ObjectOutputStream oos = new ObjectOutputStream(bos)\r\n    ) {\r\n        oos.writeObject(object);\r\n        return Base64.getEncoder().encodeToString(bos.toByteArray());\r\n    } catch (final IOException e) {\r\n        throw new IllegalStateException(&quot;serialization failed&quot;, e);\r\n    }\r\n}\r\n\r\n\r\n@Nonnull\r\npublic static &lt;T&gt; T deserialize(String objectAsString, Class&lt;T&gt; tClass) throws IllegalStateException {\r\n    final byte[] data = Base64.getDecoder().decode(objectAsString);\r\n    try (\r\n        final ByteArrayInputStream bis = new ByteArrayInputStream(data);\r\n        final ObjectInputStream ois = new ObjectInputStream(bis)\r\n    ) {\r\n        return tClass.cast(ois.readObject());\r\n    } catch (Exception e) {\r\n        throw new IllegalStateException(&quot;deserialization failed&quot;, e);\r\n    }\r\n}\r\n```","title":"ClassCastException depending on which gradle module holds the code?","body":"<p>I have a gradle project with two modules, <code>library</code> and <code>app</code>. <code>library</code> is a java-library that can be published as maven artifact. It contains some util methods that are used by <code>app</code>, hence <code>app</code> depends on <code>library</code>.</p>\n<p>Now, I'd like to add two util methods for serialization as shown below. Depending on where the util methods are placed and whether or not the serialized string of <code>MyClass</code> (which is also located in <code>app</code>) is written to a csv file in between (serialize -&gt; export -&gt; import -&gt; deserialize).</p>\n<p><strong>Case 1 / No Problem</strong>: As long as my util methods are part of <code>app</code>, I can serialize and deserialize <code>MyClass</code> without any problems, even if I export the serialized string to a csv-file in between.</p>\n<p><strong>Case 2 / No Problem</strong>: When my utils methods are part of <code>library</code>, I can only serialize and deserialize <code>MyClass</code>, if the serialized string is not written to a csv-file in between.</p>\n<p><strong>Case 3 / PROBLEM</strong>: If my utils are placed in <code>library</code> and the serialized string is written to a csv-file in between, then I get a <code>java.lang.ClassCastException: Cannot cast my.package.MyClass to my.package.MyClass at java.base/java.lang.Class.cast(Class.java:3605)</code>.</p>\n<p>When I run the debugger up until <code>ois.readObject()</code>, I can even see the properly deserialized object. However, it is not possible to cast it correctly.</p>\n<p>Could anyone help me to find the reason for the situation described above? Any ideas why this error could occur? Any ideas why it might not be allowed to have my util methods in <code>library</code>?</p>\n<pre><code>@Nonnull\npublic static &lt;T&gt; String serialize(T object) throws IllegalStateException {\n    try (\n        final ByteArrayOutputStream bos = new ByteArrayOutputStream();\n        final ObjectOutputStream oos = new ObjectOutputStream(bos)\n    ) {\n        oos.writeObject(object);\n        return Base64.getEncoder().encodeToString(bos.toByteArray());\n    } catch (final IOException e) {\n        throw new IllegalStateException(&quot;serialization failed&quot;, e);\n    }\n}\n\n\n@Nonnull\npublic static &lt;T&gt; T deserialize(String objectAsString, Class&lt;T&gt; tClass) throws IllegalStateException {\n    final byte[] data = Base64.getDecoder().decode(objectAsString);\n    try (\n        final ByteArrayInputStream bis = new ByteArrayInputStream(data);\n        final ObjectInputStream ois = new ObjectInputStream(bis)\n    ) {\n        return tClass.cast(ois.readObject());\n    } catch (Exception e) {\n        throw new IllegalStateException(&quot;deserialization failed&quot;, e);\n    }\n}\n</code></pre>\n"},{"tags":["javascript","java","swing"],"comments":[{"owner":{"account_id":19886917,"reputation":1199,"user_id":14569750,"display_name":"ericmp"},"score":0,"creation_date":1672930838,"post_id":75020410,"comment_id":132387845,"body_markdown":"is javascript related?","body":"is javascript related?"},{"owner":{"account_id":70123,"reputation":51175,"user_id":203657,"accept_rate":53,"display_name":"kleopatra"},"score":0,"creation_date":1673005864,"post_id":75020410,"comment_id":132405698,"body_markdown":"[mcve] please ..  mind the M! that is nothing unrelated but still runnable as-is to demonstrate the issue you are describing. That said: in your shoes I would first try to add a user in a plain non-ui context (use hard-coded data) to verify that the issue is related to swing.","body":"<a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> please ..  mind the M! that is nothing unrelated but still runnable as-is to demonstrate the issue you are describing. That said: in your shoes I would first try to add a user in a plain non-ui context (use hard-coded data) to verify that the issue is related to swing."}],"owner":{"account_id":27067565,"reputation":11,"user_id":20618687,"display_name":"bertrand pacode"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":35,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1672930754,"creation_date":1672930754,"question_id":75020410,"body_markdown":"I try to add users in my active directory (samba-ad). The addition goes well except that the name of the user appears in a character string for example yanick gives $BE23343... in the active directory\r\n\r\nindeed I retrieve the information that the user would have typed through the graphical interface and I add in the context\r\n\r\nhere is what i tried\r\n\r\n```\r\nimport javax.naming.*;\r\nimport javax.naming.directory.*;\r\nimport javax.swing.*;\r\nimport java.awt.*;\r\nimport java.awt.event.*;\r\nimport java.util.Hashtable;\r\n\r\npublic class ADManagerUI extends JFrame {\r\n\r\n  private static final long serialVersionUID = 1L;\r\nprivate JTextField cnField;\r\n  private JTextField snField;\r\n  private JTextField uidField;\r\n  private JTextField passwordField;\r\n  private JTextField mailField;\r\n  private JTextField displayNameField;\r\n  private JTextField descriptionField;\r\n  private JButton addButton;\r\n  private JButton deleteButton;\r\n  private JButton modifyButton;\r\n  \r\n\r\n  public ADManagerUI() {\r\n    // Initialisation de la fen&#234;tre\r\n    setTitle(&quot;Gestionnaire d&#39;utilisateurs AD&quot;);\r\n    setSize(600, 400);\r\n    setLocationRelativeTo(null);\r\n    setDefaultCloseOperation(EXIT_ON_CLOSE);\r\n\r\n    // Cr&#233;ation des champs de texte et des labels\r\n    JLabel cnLabel = new JLabel(&quot;Nom complet :&quot;);\r\n    cnField = new JTextField(20);\r\n    JLabel snLabel = new JLabel(&quot;Nom de famille :&quot;);\r\n    snField = new JTextField(20);\r\n    JLabel uidLabel = new JLabel(&quot;Nom d&#39;utilisateur :&quot;);\r\n    uidField = new JTextField(20);\r\n    JLabel passwordLabel = new JLabel(&quot;Mot de passe :&quot;);\r\n    passwordField = new JTextField(20);\r\n    JLabel mailLabel = new JLabel(&quot;Adresse e-mail :&quot;);\r\n    mailField = new JTextField(20);\r\n    JLabel displayNameLabel = new JLabel(&quot;Nom affich&#233; :&quot;);\r\n    displayNameField = new JTextField(20);\r\n    JLabel descriptionLabel = new JLabel(&quot;Description :&quot;);\r\n    descriptionField = new JTextField(20);\r\n\r\n    // Cr&#233;ation des boutons\r\n    addButton = new JButton(&quot;Ajouter un utilisateur&quot;);\r\n    deleteButton = new JButton(&quot;Supprimer un utilisateur&quot;);\r\n    modifyButton = new JButton(&quot;Modifier un utilisateur&quot;);\r\n\r\n    // Ajout des champs de texte et des labels &#224; la fen&#234;tre\r\n    setLayout(new GridBagLayout());\r\n    GridBagConstraints constraints = new GridBagConstraints();\r\n    constraints.anchor = GridBagConstraints.WEST;\r\n    constraints.insets = new Insets(5, 5, 5, 5);\r\n    constraints.gridx = 0;\r\n    constraints.gridy = 0;\r\n    add(cnLabel, constraints);\r\n    constraints.gridx = 1;\r\n    add(cnField, constraints);\r\n    constraints.gridx = 0;\r\n    constraints.gridy = 1;\r\n    add(snLabel, constraints);\r\n    constraints.gridx = 1;\r\n    add(snField, constraints);\r\n    constraints.gridx = 0;\r\n    constraints.gridy = 2;\r\n    add(uidLabel, constraints);\r\n    constraints.gridx = 1;\r\n    add(uidField, constraints);\r\n    constraints.gridx = 0;\r\n    constraints.gridy = 3;\r\n    add(passwordLabel, constraints);\r\n    constraints.gridx = 1;\r\n    add(passwordField, constraints);\r\n    constraints.gridx = 0;\r\n    constraints.gridy = 4;\r\n    add(mailLabel, constraints);\r\n    constraints.gridx = 1;\r\n    add( mailField, constraints);\r\n    constraints.gridx = 0;\r\n    constraints.gridy = 5;\r\n    add(displayNameLabel, constraints);\r\n    constraints.gridx = 1;\r\n    add(displayNameField, constraints);\r\n    constraints.gridx = 0;\r\n    constraints.gridy = 6;\r\n    add(descriptionLabel , constraints);\r\n    constraints.gridx = 1;\r\n    add(descriptionField, constraints);\r\n    // Ajout des boutons &#224; la fen&#234;tre\r\n    constraints.gridx = 0;\r\n    constraints.gridy = 8;\r\n    add(addButton, constraints);\r\n    constraints.gridx = 1;\r\n    add(deleteButton, constraints);\r\n    constraints.gridx = 2;\r\n    add(modifyButton, constraints);\r\n    // Ajout des listeners aux boutons\r\n    addButton.addActionListener(new AddButtonListener());\r\n    deleteButton.addActionListener(new DeleteButtonListener());\r\n    modifyButton.addActionListener(new ModifyButtonListener());\r\n}\r\n\r\n// Classe interne pour g&#233;rer le clic sur le bouton &quot;Ajouter&quot;\r\nclass AddButtonListener implements ActionListener {\r\n  public void actionPerformed(ActionEvent e) {\r\n    // Les informations de connexion au serveur LDAP\r\n    String ldapAdServer = &quot;ldap://serveur.domaine.com&quot;;\r\n    String ldapUsername = &quot;cn=admin,dc=domaine,dc=com&quot;;\r\n    String ldapPassword = &quot;mot_de_passe&quot;;\r\n\r\n    // Les informations du nouvel utilisateur\r\n    String cn = cnField.getText();\r\n    String sn = snField.getText();\r\n    String uid = uidField.getText();\r\n    String password = passwordField.getText();\r\n    String mail = mailField.getText();\r\n    String displayName = displayNameField.getText();\r\n    String description = descriptionField.getText();\r\n\r\n    // Connexion au serveur LDAP\r\n    Hashtable&lt;String, Object&gt; env = new Hashtable&lt;String, Object&gt;();\r\n    env.put(Context.INITIAL_CONTEXT_FACTORY, &quot;com.sun.jndi.ldap.LdapCtxFactory&quot;);\r\n    env.put(Context.PROVIDER_URL, ldapAdServer);\r\n    env.put(Context.SECURITY_PRINCIPAL, ldapUsername);\r\n    env.put(Context.SECURITY_CREDENTIALS, ldapPassword);\r\n\r\n    try {\r\n      // Cr&#233;ation du contexte LDAP\r\n      DirContext ctx = new InitialDirContext(env);\r\n\r\n      // Cr&#233;ation de l&#39;entr&#233;e pour le nouvel utilisateur\r\n      Attributes attrs = new BasicAttributes();\r\n      Attribute objClasses = new BasicAttribute(&quot;objectClass&quot;);\r\n      objClasses.add(&quot;top&quot;);\r\n      objClasses.add(&quot;person&quot;);\r\n      objClasses.add(&quot;organizationalPerson&quot;);\r\n      objClasses.add(&quot;user&quot;);\r\n      attrs.put(objClasses);\r\n      attrs.put(new BasicAttribute(&quot;cn&quot;, cn));\r\n      attrs.put(new BasicAttribute(&quot;sn&quot;, sn));\r\n      attrs.put(new BasicAttribute(&quot;uid&quot;, uid));\r\n      attrs.put(new BasicAttribute(&quot;userPassword&quot;, password));\r\n      attrs.put(new BasicAttribute(&quot;mail&quot;, mail));\r\n      attrs.put(new BasicAttribute(&quot;displayName&quot;, displayName));\r\n      attrs.put(new BasicAttribute(&quot;description&quot;, description));\r\n\r\n      String dn = &quot;cn=&quot; + cn + &quot;,ou=utilisateurs,dc=domaine,dc=com&quot;;\r\n      ctx.createSubcontext(dn, attrs);\r\n      ctx.close();\r\n\r\n      JOptionPane.showMessageDialog(null, &quot;Utilisateur ajout&#233; avec succ&#232;s !&quot;);\r\n    } catch (NamingException ex) {\r\n      ex.printStackTrace();\r\n      JOptionPane.showMessageDialog(null, &quot;Erreur lors de l&#39;ajout de l&#39;utilisateur !&quot;);\r\n    }\r\n  }\r\n}\r\n\r\n}\r\n\r\npublic static void main(String[] args) {\r\n  ADManagerUI adUI = new ADManagerUI();\r\n  adUI.setVisible(true);\r\n}\r\n}\r\n```","title":"Java,Add user into Active Directory (samba-ad)","body":"<p>I try to add users in my active directory (samba-ad). The addition goes well except that the name of the user appears in a character string for example yanick gives $BE23343... in the active directory</p>\n<p>indeed I retrieve the information that the user would have typed through the graphical interface and I add in the context</p>\n<p>here is what i tried</p>\n<pre><code>import javax.naming.*;\nimport javax.naming.directory.*;\nimport javax.swing.*;\nimport java.awt.*;\nimport java.awt.event.*;\nimport java.util.Hashtable;\n\npublic class ADManagerUI extends JFrame {\n\n  private static final long serialVersionUID = 1L;\nprivate JTextField cnField;\n  private JTextField snField;\n  private JTextField uidField;\n  private JTextField passwordField;\n  private JTextField mailField;\n  private JTextField displayNameField;\n  private JTextField descriptionField;\n  private JButton addButton;\n  private JButton deleteButton;\n  private JButton modifyButton;\n  \n\n  public ADManagerUI() {\n    // Initialisation de la fenêtre\n    setTitle(&quot;Gestionnaire d'utilisateurs AD&quot;);\n    setSize(600, 400);\n    setLocationRelativeTo(null);\n    setDefaultCloseOperation(EXIT_ON_CLOSE);\n\n    // Création des champs de texte et des labels\n    JLabel cnLabel = new JLabel(&quot;Nom complet :&quot;);\n    cnField = new JTextField(20);\n    JLabel snLabel = new JLabel(&quot;Nom de famille :&quot;);\n    snField = new JTextField(20);\n    JLabel uidLabel = new JLabel(&quot;Nom d'utilisateur :&quot;);\n    uidField = new JTextField(20);\n    JLabel passwordLabel = new JLabel(&quot;Mot de passe :&quot;);\n    passwordField = new JTextField(20);\n    JLabel mailLabel = new JLabel(&quot;Adresse e-mail :&quot;);\n    mailField = new JTextField(20);\n    JLabel displayNameLabel = new JLabel(&quot;Nom affiché :&quot;);\n    displayNameField = new JTextField(20);\n    JLabel descriptionLabel = new JLabel(&quot;Description :&quot;);\n    descriptionField = new JTextField(20);\n\n    // Création des boutons\n    addButton = new JButton(&quot;Ajouter un utilisateur&quot;);\n    deleteButton = new JButton(&quot;Supprimer un utilisateur&quot;);\n    modifyButton = new JButton(&quot;Modifier un utilisateur&quot;);\n\n    // Ajout des champs de texte et des labels à la fenêtre\n    setLayout(new GridBagLayout());\n    GridBagConstraints constraints = new GridBagConstraints();\n    constraints.anchor = GridBagConstraints.WEST;\n    constraints.insets = new Insets(5, 5, 5, 5);\n    constraints.gridx = 0;\n    constraints.gridy = 0;\n    add(cnLabel, constraints);\n    constraints.gridx = 1;\n    add(cnField, constraints);\n    constraints.gridx = 0;\n    constraints.gridy = 1;\n    add(snLabel, constraints);\n    constraints.gridx = 1;\n    add(snField, constraints);\n    constraints.gridx = 0;\n    constraints.gridy = 2;\n    add(uidLabel, constraints);\n    constraints.gridx = 1;\n    add(uidField, constraints);\n    constraints.gridx = 0;\n    constraints.gridy = 3;\n    add(passwordLabel, constraints);\n    constraints.gridx = 1;\n    add(passwordField, constraints);\n    constraints.gridx = 0;\n    constraints.gridy = 4;\n    add(mailLabel, constraints);\n    constraints.gridx = 1;\n    add( mailField, constraints);\n    constraints.gridx = 0;\n    constraints.gridy = 5;\n    add(displayNameLabel, constraints);\n    constraints.gridx = 1;\n    add(displayNameField, constraints);\n    constraints.gridx = 0;\n    constraints.gridy = 6;\n    add(descriptionLabel , constraints);\n    constraints.gridx = 1;\n    add(descriptionField, constraints);\n    // Ajout des boutons à la fenêtre\n    constraints.gridx = 0;\n    constraints.gridy = 8;\n    add(addButton, constraints);\n    constraints.gridx = 1;\n    add(deleteButton, constraints);\n    constraints.gridx = 2;\n    add(modifyButton, constraints);\n    // Ajout des listeners aux boutons\n    addButton.addActionListener(new AddButtonListener());\n    deleteButton.addActionListener(new DeleteButtonListener());\n    modifyButton.addActionListener(new ModifyButtonListener());\n}\n\n// Classe interne pour gérer le clic sur le bouton &quot;Ajouter&quot;\nclass AddButtonListener implements ActionListener {\n  public void actionPerformed(ActionEvent e) {\n    // Les informations de connexion au serveur LDAP\n    String ldapAdServer = &quot;ldap://serveur.domaine.com&quot;;\n    String ldapUsername = &quot;cn=admin,dc=domaine,dc=com&quot;;\n    String ldapPassword = &quot;mot_de_passe&quot;;\n\n    // Les informations du nouvel utilisateur\n    String cn = cnField.getText();\n    String sn = snField.getText();\n    String uid = uidField.getText();\n    String password = passwordField.getText();\n    String mail = mailField.getText();\n    String displayName = displayNameField.getText();\n    String description = descriptionField.getText();\n\n    // Connexion au serveur LDAP\n    Hashtable&lt;String, Object&gt; env = new Hashtable&lt;String, Object&gt;();\n    env.put(Context.INITIAL_CONTEXT_FACTORY, &quot;com.sun.jndi.ldap.LdapCtxFactory&quot;);\n    env.put(Context.PROVIDER_URL, ldapAdServer);\n    env.put(Context.SECURITY_PRINCIPAL, ldapUsername);\n    env.put(Context.SECURITY_CREDENTIALS, ldapPassword);\n\n    try {\n      // Création du contexte LDAP\n      DirContext ctx = new InitialDirContext(env);\n\n      // Création de l'entrée pour le nouvel utilisateur\n      Attributes attrs = new BasicAttributes();\n      Attribute objClasses = new BasicAttribute(&quot;objectClass&quot;);\n      objClasses.add(&quot;top&quot;);\n      objClasses.add(&quot;person&quot;);\n      objClasses.add(&quot;organizationalPerson&quot;);\n      objClasses.add(&quot;user&quot;);\n      attrs.put(objClasses);\n      attrs.put(new BasicAttribute(&quot;cn&quot;, cn));\n      attrs.put(new BasicAttribute(&quot;sn&quot;, sn));\n      attrs.put(new BasicAttribute(&quot;uid&quot;, uid));\n      attrs.put(new BasicAttribute(&quot;userPassword&quot;, password));\n      attrs.put(new BasicAttribute(&quot;mail&quot;, mail));\n      attrs.put(new BasicAttribute(&quot;displayName&quot;, displayName));\n      attrs.put(new BasicAttribute(&quot;description&quot;, description));\n\n      String dn = &quot;cn=&quot; + cn + &quot;,ou=utilisateurs,dc=domaine,dc=com&quot;;\n      ctx.createSubcontext(dn, attrs);\n      ctx.close();\n\n      JOptionPane.showMessageDialog(null, &quot;Utilisateur ajouté avec succès !&quot;);\n    } catch (NamingException ex) {\n      ex.printStackTrace();\n      JOptionPane.showMessageDialog(null, &quot;Erreur lors de l'ajout de l'utilisateur !&quot;);\n    }\n  }\n}\n\n}\n\npublic static void main(String[] args) {\n  ADManagerUI adUI = new ADManagerUI();\n  adUI.setVisible(true);\n}\n}\n</code></pre>\n"},{"tags":["java","jpa","spring-data-jpa","jpql"],"comments":[{"owner":{"account_id":1038596,"reputation":34548,"user_id":1045142,"accept_rate":67,"display_name":"Simon Martinelli"},"score":0,"creation_date":1672931514,"post_id":75020326,"comment_id":132388141,"body_markdown":"https://www.baeldung.com/hibernate-criteria-queries","body":"<a href=\"https://www.baeldung.com/hibernate-criteria-queries\" rel=\"nofollow noreferrer\">baeldung.com/hibernate-criteria-queries</a>"},{"owner":{"account_id":15365778,"reputation":62,"user_id":11085357,"display_name":"Coding"},"score":0,"creation_date":1672934783,"post_id":75020326,"comment_id":132389470,"body_markdown":"the baeldung tutorial is helpful but my ConfigVO is not an Entity, it contains some fields that need to be calculated. So the tutorial is not perfect match","body":"the baeldung tutorial is helpful but my ConfigVO is not an Entity, it contains some fields that need to be calculated. So the tutorial is not perfect match"},{"owner":{"account_id":1038596,"reputation":34548,"user_id":1045142,"accept_rate":67,"display_name":"Simon Martinelli"},"score":0,"creation_date":1672935053,"post_id":75020326,"comment_id":132389576,"body_markdown":"Sure but there is never a perfect match for a problem in development. You should first try to solve the problem yourself. And then ask question what is not working for you https://stackoverflow.com/help/how-to-ask","body":"Sure but there is never a perfect match for a problem in development. You should first try to solve the problem yourself. And then ask question what is not working for you <a href=\"https://stackoverflow.com/help/how-to-ask\">stackoverflow.com/help/how-to-ask</a>"}],"owner":{"account_id":15365778,"reputation":62,"user_id":11085357,"display_name":"Coding"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":26,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1672930443,"creation_date":1672930443,"question_id":75020326,"body_markdown":"I have two Entities like Below:\r\n\r\n```\r\n@Entity\r\n@Table(name=&quot;tb_sm_config&quot;)\r\nclass Config {\r\n   @Id\r\n   private Long id;\r\n   private String code;\r\n   private String name;\r\n   @Enumerated(EnumType.STRING)\r\n   private State state;\r\n   @JsonIgnore\r\n   @OneToMany(mappedBy = &quot;config&quot;, fetch = FetchType.LAZY)\r\n   private List&lt;ConfigItem&gt; items;\r\n}\r\n\r\n@Entity\r\n@Table(name=&quot;tb_sm_config_item&quot;)\r\nclass ConfigItem {\r\n   @Id\r\n   private Long id;\r\n   private String code;\r\n   private String name;\r\n   @Enumerated(EnumType.STRING)\r\n   private State state;\r\n   @ManyToOne(fetch = FetchType.LAZY)\r\n   @JoinColumn(name = &quot;config_id&quot;, referencedColumnName = &quot;id&quot;, foreignKey = @ForeignKey(ConstraintMode.NO_CONSTRAINT))\r\n    private Config config;\r\n}\r\n```\r\n\r\nthe State is an Enum, there are three states : VALID, INVALID, DELETED\r\n\r\nThen I define a ConfigVO like below:\r\n\r\n```\r\nclass ConfigVO {\r\n   private Long id;\r\n   private String code;\r\n   private String name;\r\n   private State state;\r\n   private Long validItemCount;\r\n   private Long invalidItemCount;\r\n   pirvate Long deletedItemCount;\r\n}\r\n```\r\nI want to provide fuzzy query based on config.name, config.code and precise query based on config.state and return a list of ConfigVO with pageable and sortable.\r\n\r\nI know native sql will like :\r\n\r\n```\r\nselect a.id, a.code, a.name, a.state,\r\n       coalesce(b._valid, 0) validItemCount,\r\n       coalesce(b._invalid, 0) invalidItemCount,\r\n       coalesce(b._deleted, 0) deletedItemCount\r\nfrom tb_sm_config a left join\r\n    (select config_id, sum(if(state = &#39;VALID&#39;, 1, 0)) _valid, sum(if(state = &#39;INVALID&#39;, 1, 0)) _invalid, sum(if(state = &#39;DELETED&#39;, 1, 0)) _deleted  from tb_sm_config_item group by config_id) b\r\non a.id = b.config_id\r\nwhere code like %:code% and name like %:name% and state = :state\r\n```\r\n\r\nBut here are the problems I don&#39;t know how to deal with:\r\n1. The frontend will not always pass the code, name, state to query, so these three parameters is nullable.\r\n2. If I use the @Query(nativeQuery=true, value=xxxx) in the ConfigRepository interface method, I don&#39;t know how to deal with the null value and the paging and sorting.\r\n\r\n\r\n\r\n\r\nIs that any possible to achieve this goal through JpaSpecificationExecutor interface, Example interface, or something else?\r\n\r\nI want to query base on the code, name, state, sometimes they will be null and want to count the total number of individual configItem states and pageable and sortable.","title":"Translate native sql to JPA code or JPQL and make it pageable and sortable","body":"<p>I have two Entities like Below:</p>\n<pre><code>@Entity\n@Table(name=&quot;tb_sm_config&quot;)\nclass Config {\n   @Id\n   private Long id;\n   private String code;\n   private String name;\n   @Enumerated(EnumType.STRING)\n   private State state;\n   @JsonIgnore\n   @OneToMany(mappedBy = &quot;config&quot;, fetch = FetchType.LAZY)\n   private List&lt;ConfigItem&gt; items;\n}\n\n@Entity\n@Table(name=&quot;tb_sm_config_item&quot;)\nclass ConfigItem {\n   @Id\n   private Long id;\n   private String code;\n   private String name;\n   @Enumerated(EnumType.STRING)\n   private State state;\n   @ManyToOne(fetch = FetchType.LAZY)\n   @JoinColumn(name = &quot;config_id&quot;, referencedColumnName = &quot;id&quot;, foreignKey = @ForeignKey(ConstraintMode.NO_CONSTRAINT))\n    private Config config;\n}\n</code></pre>\n<p>the State is an Enum, there are three states : VALID, INVALID, DELETED</p>\n<p>Then I define a ConfigVO like below:</p>\n<pre><code>class ConfigVO {\n   private Long id;\n   private String code;\n   private String name;\n   private State state;\n   private Long validItemCount;\n   private Long invalidItemCount;\n   pirvate Long deletedItemCount;\n}\n</code></pre>\n<p>I want to provide fuzzy query based on config.name, config.code and precise query based on config.state and return a list of ConfigVO with pageable and sortable.</p>\n<p>I know native sql will like :</p>\n<pre><code>select a.id, a.code, a.name, a.state,\n       coalesce(b._valid, 0) validItemCount,\n       coalesce(b._invalid, 0) invalidItemCount,\n       coalesce(b._deleted, 0) deletedItemCount\nfrom tb_sm_config a left join\n    (select config_id, sum(if(state = 'VALID', 1, 0)) _valid, sum(if(state = 'INVALID', 1, 0)) _invalid, sum(if(state = 'DELETED', 1, 0)) _deleted  from tb_sm_config_item group by config_id) b\non a.id = b.config_id\nwhere code like %:code% and name like %:name% and state = :state\n</code></pre>\n<p>But here are the problems I don't know how to deal with:</p>\n<ol>\n<li>The frontend will not always pass the code, name, state to query, so these three parameters is nullable.</li>\n<li>If I use the @Query(nativeQuery=true, value=xxxx) in the ConfigRepository interface method, I don't know how to deal with the null value and the paging and sorting.</li>\n</ol>\n<p>Is that any possible to achieve this goal through JpaSpecificationExecutor interface, Example interface, or something else?</p>\n<p>I want to query base on the code, name, state, sometimes they will be null and want to count the total number of individual configItem states and pageable and sortable.</p>\n"},{"tags":["java","spring-boot","exception","spring-data-jpa","associations"],"comments":[{"owner":{"account_id":13979585,"reputation":211,"user_id":10096086,"display_name":"Abraham Ciokler"},"score":0,"creation_date":1672777250,"post_id":74995964,"comment_id":132349495,"body_markdown":"This error means you haven&#39;t saved the `department` entity in the database before assigning it to the `Student` entity. A typical mistake that can cause this is the `id` field is null somehow. Please, post the logic that actually assigns departments to students and how it saves.","body":"This error means you haven&#39;t saved the <code>department</code> entity in the database before assigning it to the <code>Student</code> entity. A typical mistake that can cause this is the <code>id</code> field is null somehow. Please, post the logic that actually assigns departments to students and how it saves."},{"owner":{"account_id":8183303,"reputation":107,"user_id":6159786,"display_name":"B.Ahmad"},"score":0,"creation_date":1672818659,"post_id":74995964,"comment_id":132356530,"body_markdown":"@AbrahamCiokler You are absolutely right. The Department id was null when passing the department object to Student. Problem solved!. Thanks a lot my friend!","body":"@AbrahamCiokler You are absolutely right. The Department id was null when passing the department object to Student. Problem solved!. Thanks a lot my friend!"}],"answers":[{"tags":[],"owner":{"account_id":13979585,"reputation":211,"user_id":10096086,"display_name":"Abraham Ciokler"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1672930413,"creation_date":1672930413,"answer_id":75020317,"question_id":74995964,"body_markdown":"This error means you haven&#39;t saved the department entity in the database before assigning it to the Student entity. A typical mistake that can cause this is the id field is null somehow.","title":"How to resolve TransientPropertyValueException in one to one association without using Cascading types?[SOLVED]","body":"<p>This error means you haven't saved the department entity in the database before assigning it to the Student entity. A typical mistake that can cause this is the id field is null somehow.</p>\n"}],"owner":{"account_id":8183303,"reputation":107,"user_id":6159786,"display_name":"B.Ahmad"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":43,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1672930413,"creation_date":1672763032,"question_id":74995964,"body_markdown":"I have a Student entity like this:\r\n```\r\n@Entity\r\n@Table(name=&quot;student&quot;)\r\npublic class Student{\r\n  @Id\r\n  @GeneratedValue(strategy = GenerationType.IDENTITY)\r\n  private Long id;\r\n \r\n  @OneToOne\r\n  @JoinColumn(name=&quot;dept_id&quot;)\r\n  private Department department;\r\n}\r\n```\r\nand a Department Entity:\r\n```\r\n@Entity\r\n@Table(name=&quot;department&quot;)\r\npublic class Department{\r\n  @Id\r\n  @GeneratedValue(strategy = GenerationType.IDENTITY)\r\n  private Long id;\r\n \r\n  @Column(unique=true)\r\n  private String departmentName;\r\n}\r\n```\r\nBefore I save students, I have saved couple of Departments in the the MySQL database. In the Add Student form, I select Department from the dropdown which are fetched from Database. Now when I am about to save Student, following exception occurs:\r\n```\r\nobject references an unsaved transient instance - save the transient instance before flushing\r\n```\r\nBy searching on internet, I found that adding CascadeType.ALL resolves the problem. But I don&#39;t want the department be saved along with Student when saving Student, because that department is already in the database. Again, CascadeType.ALL tries the existing department to save in the &quot;department&quot; table but fails due to unique deparmentName attribute. Also, I don&#39;t want associated department to be removed when I remove any Student. \r\nPlease advise. All I want is to make a query where all students will be returned as list and each student object will consist the associated department information also.\r\nThanks in advance!\r\n\r\n*** [SOLVED] The problem is solved actually. Department id was null when passing the department object to Student.***","title":"How to resolve TransientPropertyValueException in one to one association without using Cascading types?[SOLVED]","body":"<p>I have a Student entity like this:</p>\n<pre><code>@Entity\n@Table(name=&quot;student&quot;)\npublic class Student{\n  @Id\n  @GeneratedValue(strategy = GenerationType.IDENTITY)\n  private Long id;\n \n  @OneToOne\n  @JoinColumn(name=&quot;dept_id&quot;)\n  private Department department;\n}\n</code></pre>\n<p>and a Department Entity:</p>\n<pre><code>@Entity\n@Table(name=&quot;department&quot;)\npublic class Department{\n  @Id\n  @GeneratedValue(strategy = GenerationType.IDENTITY)\n  private Long id;\n \n  @Column(unique=true)\n  private String departmentName;\n}\n</code></pre>\n<p>Before I save students, I have saved couple of Departments in the the MySQL database. In the Add Student form, I select Department from the dropdown which are fetched from Database. Now when I am about to save Student, following exception occurs:</p>\n<pre><code>object references an unsaved transient instance - save the transient instance before flushing\n</code></pre>\n<p>By searching on internet, I found that adding CascadeType.ALL resolves the problem. But I don't want the department be saved along with Student when saving Student, because that department is already in the database. Again, CascadeType.ALL tries the existing department to save in the &quot;department&quot; table but fails due to unique deparmentName attribute. Also, I don't want associated department to be removed when I remove any Student.\nPlease advise. All I want is to make a query where all students will be returned as list and each student object will consist the associated department information also.\nThanks in advance!</p>\n<p>*** [SOLVED] The problem is solved actually. Department id was null when passing the department object to Student.***</p>\n"},{"tags":["java","vaadin","refresh","vaadin-flow","vaadin14"],"answers":[{"comments":[{"owner":{"account_id":19662820,"reputation":169,"user_id":14393923,"display_name":"Miłosz Bąbliński"},"score":0,"creation_date":1672931053,"post_id":75020305,"comment_id":132387948,"body_markdown":"Shouldn&#39;t it be by default that when i use removeAll() then it should use removeFromTree()  for each child to be sure that next adding will be without error? what is the point of not doing it every time?","body":"Shouldn&#39;t it be by default that when i use removeAll() then it should use removeFromTree()  for each child to be sure that next adding will be without error? what is the point of not doing it every time?"},{"owner":{"account_id":19662820,"reputation":169,"user_id":14393923,"display_name":"Miłosz Bąbliński"},"score":0,"creation_date":1672931424,"post_id":75020305,"comment_id":132388099,"body_markdown":"In my example button should be always in one UI because after i&#39;m removing it from layout then it should&#39;t be in any UI so when i&#39;m adding it again to the new UI of the layout then it isn&#39;t in any older UI.","body":"In my example button should be always in one UI because after i&#39;m removing it from layout then it should&#39;t be in any UI so when i&#39;m adding it again to the new UI of the layout then it isn&#39;t in any older UI."},{"owner":{"account_id":19662820,"reputation":169,"user_id":14393923,"display_name":"Miłosz Bąbliński"},"score":0,"creation_date":1672935075,"post_id":75020305,"comment_id":132389583,"body_markdown":"I added button which on click is executing same code as onattach and then there is no error when i&#39;m reloading browser tab with component attached or detached. Do i dont think that the problem is that component isnt detached on special way. There is sole problem with doing it im attache listener.","body":"I added button which on click is executing same code as onattach and then there is no error when i&#39;m reloading browser tab with component attached or detached. Do i dont think that the problem is that component isnt detached on special way. There is sole problem with doing it im attache listener."},{"owner":{"account_id":2759852,"reputation":7920,"user_id":2376954,"display_name":"Leif &#197;strand"},"score":0,"creation_date":1673334838,"post_id":75020305,"comment_id":132469472,"body_markdown":"Does indeed seem like my assumption was mistaken. Good that you investigated further and also good that you filed this as an issue: https://github.com/vaadin/flow/issues/15642","body":"Does indeed seem like my assumption was mistaken. Good that you investigated further and also good that you filed this as an issue: <a href=\"https://github.com/vaadin/flow/issues/15642\" rel=\"nofollow noreferrer\">github.com/vaadin/flow/issues/15642</a>"},{"owner":{"account_id":2759852,"reputation":7920,"user_id":2376954,"display_name":"Leif &#197;strand"},"score":0,"creation_date":1673337793,"post_id":75020305,"comment_id":132470258,"body_markdown":"For the record, removeAll() shouldn&#39;t do removeFromTree() since removeAll() is also what&#39;s used behind the scenes if an instance is accidentally shared because of too wide scopes.","body":"For the record, removeAll() shouldn&#39;t do removeFromTree() since removeAll() is also what&#39;s used behind the scenes if an instance is accidentally shared because of too wide scopes."}],"tags":[],"owner":{"account_id":2759852,"reputation":7920,"user_id":2376954,"display_name":"Leif &#197;strand"},"comment_count":5,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1672930379,"creation_date":1672930379,"answer_id":75020305,"question_id":75019718,"body_markdown":"The error message you see is there to guard against accidentally reusing the same component instance between separate UIs e.g. by using the component instance through a singleton bean with Spring or CDI.\r\n\r\nBecause `@PreserveOnRefresh` is technically creating a new UI when you refresh, there&#39;s some special logic that goes through components that are attached during the refresh and detaches them from the old UI in a special way (`removeFromTree()`) to avoid triggering the logic that prevents accidental sharing.\r\n\r\nI suspect the problem in your case is that the button isn&#39;t always attached when the refresh happens, which also means that it doesn&#39;t get detached in that special way. This means that you need to use `removeFromTree()` for whenever you want to be able to reuse something that wasn&#39;t attached when the refresh happened.\r\n","title":"Vaadin Flow 14 Can&#39;t move a node from one state tree to another error when refreshing","body":"<p>The error message you see is there to guard against accidentally reusing the same component instance between separate UIs e.g. by using the component instance through a singleton bean with Spring or CDI.</p>\n<p>Because <code>@PreserveOnRefresh</code> is technically creating a new UI when you refresh, there's some special logic that goes through components that are attached during the refresh and detaches them from the old UI in a special way (<code>removeFromTree()</code>) to avoid triggering the logic that prevents accidental sharing.</p>\n<p>I suspect the problem in your case is that the button isn't always attached when the refresh happens, which also means that it doesn't get detached in that special way. This means that you need to use <code>removeFromTree()</code> for whenever you want to be able to reuse something that wasn't attached when the refresh happened.</p>\n"}],"owner":{"account_id":19662820,"reputation":169,"user_id":14393923,"display_name":"Miłosz Bąbliński"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":229,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1672930379,"creation_date":1672927763,"question_id":75019718,"body_markdown":"i have a problem with adding again btn to layout after this layout is cleared from components. I&#39;m gettin a error \r\n\r\n&gt; Can&#39;t move a node from one state tree to another. If this is intentional, first remove the node from its current state tree by calling removeFromTree\r\n\r\nfor the line \r\n\r\n    \t\t\tactionsLay.add(testButton);\r\nafter refreshing few times, and i don&#39;t get it why this error is showing. Below is very simple code to show this error when i&#39;m adding and removing button for refresh action. In my app it is much more complicated code and i&#39;m getting this error aswell after some page refresh and only for one component. I know that i can just add \r\n\r\n    testButton.getElement().removeFromTree()\r\n\r\nbut until I know why this error appears then I won&#39;t know when when i should add this line.\r\n\r\nI&#39;m using Vaadin 14.8.14.\r\n\r\n    @Route(value = &quot;test&quot;)\r\n    @UIScope\r\n    @PreserveOnRefresh\r\n    public class testPanel extends Div {\r\n    \tprivate static final long serialVersionUID = 5081824598131333345L;\r\n    \r\n    \tButton testButton;\r\n    \tprivate HorizontalLayout actionsLay;\r\n    \tprivate boolean addBtn = true;\r\n    \tpublic testPanel() {\r\n    \t\ttestButton = new Button(new Icon(VaadinIcon.REFRESH));\r\n    \t\tactionsLay = new HorizontalLayout();\r\n    \t\tadd(actionsLay);\r\n    \t}\r\n    \r\n    \t@Override\r\n    \tprotected void onAttach(AttachEvent attachEvent) {\r\n    \t\tif (addBtn) {\r\n    \t\t\tactionsLay.removeAll();\r\n    \t\t\tactionsLay.add(testButton);\r\n    \t\t\taddBtn = false;\r\n    \t\t} else {\r\n    \t\t\tactionsLay.removeAll();\r\n    \t\t\taddBtn = true;\r\n    \t\t}\r\n    \r\n    \t}\r\n    }\r\n\r\nThe error is thrown becouse \r\n\r\n    isOwnerAttached = ((StateTree) getOwner()).getRootNode()\r\n                    .isAttached();\r\nin class StateNode in method doSetTree is true.","title":"Vaadin Flow 14 Can&#39;t move a node from one state tree to another error when refreshing","body":"<p>i have a problem with adding again btn to layout after this layout is cleared from components. I'm gettin a error</p>\n<blockquote>\n<p>Can't move a node from one state tree to another. If this is intentional, first remove the node from its current state tree by calling removeFromTree</p>\n</blockquote>\n<p>for the line</p>\n<pre><code>            actionsLay.add(testButton);\n</code></pre>\n<p>after refreshing few times, and i don't get it why this error is showing. Below is very simple code to show this error when i'm adding and removing button for refresh action. In my app it is much more complicated code and i'm getting this error aswell after some page refresh and only for one component. I know that i can just add</p>\n<pre><code>testButton.getElement().removeFromTree()\n</code></pre>\n<p>but until I know why this error appears then I won't know when when i should add this line.</p>\n<p>I'm using Vaadin 14.8.14.</p>\n<pre><code>@Route(value = &quot;test&quot;)\n@UIScope\n@PreserveOnRefresh\npublic class testPanel extends Div {\n    private static final long serialVersionUID = 5081824598131333345L;\n\n    Button testButton;\n    private HorizontalLayout actionsLay;\n    private boolean addBtn = true;\n    public testPanel() {\n        testButton = new Button(new Icon(VaadinIcon.REFRESH));\n        actionsLay = new HorizontalLayout();\n        add(actionsLay);\n    }\n\n    @Override\n    protected void onAttach(AttachEvent attachEvent) {\n        if (addBtn) {\n            actionsLay.removeAll();\n            actionsLay.add(testButton);\n            addBtn = false;\n        } else {\n            actionsLay.removeAll();\n            addBtn = true;\n        }\n\n    }\n}\n</code></pre>\n<p>The error is thrown becouse</p>\n<pre><code>isOwnerAttached = ((StateTree) getOwner()).getRootNode()\n                .isAttached();\n</code></pre>\n<p>in class StateNode in method doSetTree is true.</p>\n"},{"tags":["java","sql","postgresql","spring-boot","sql-order-by"],"comments":[{"owner":{"account_id":4564696,"reputation":43122,"user_id":3706016,"display_name":"jarlh"},"score":0,"creation_date":1672930306,"post_id":75020249,"comment_id":132387622,"body_markdown":"Why the GROUP BY? Do you simply want SELECT DISTINCT?","body":"Why the GROUP BY? Do you simply want SELECT DISTINCT?"},{"owner":{"account_id":17883305,"reputation":33,"user_id":12991527,"display_name":"Fazeel Usmani"},"score":0,"creation_date":1672930679,"post_id":75020249,"comment_id":132387781,"body_markdown":"@jarlh Earlier, I thought of having them in groups thats why GROUP BY. And now thinking of only ORDER BY would do the job. \nDISTINCT returns only unique records.","body":"@jarlh Earlier, I thought of having them in groups thats why GROUP BY. And now thinking of only ORDER BY would do the job.  DISTINCT returns only unique records."}],"owner":{"account_id":17883305,"reputation":33,"user_id":12991527,"display_name":"Fazeel Usmani"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":50,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1672930159,"creation_date":1672930159,"question_id":75020249,"body_markdown":"I&#39;m unable to figure out the Spring query for my SQL query\r\n\r\n\r\n    SELECT person_name, role FROM persons\r\n    GROUP BY person_name, role\r\n    ORDER BY ROLE = &#39;viewer&#39;,\r\n    \t ROLE = &#39;participant&#39;,\r\n    \t ROLE = &#39;collaborator&#39;,\r\n    \t ROLE = &#39;lead&#39;;\r\n\r\n\r\nI tried \r\n\r\n    select(field(&quot;person_name&quot;), field(&quot;role&quot;))\r\n     .from(table(&quot;person&quot;)\r\n     .groupBy(field(&quot;person_name&quot;), field(&quot;role&quot;))\r\n     .orderBy((field(&quot;role&quot;).equals(&quot;viewer&quot;)).and(field(&quot;role&quot;).equals(&quot;participant&quot;)).and(\r\n                   field(&quot;role&quot;).equals(&quot;collaborator&quot;)).and(field(&quot;role&quot;).equals(&quot;lead&quot;)));\r\n\r\nbut no luck. \r\n\r\nIf I do orderBy(role) then I&#39;m getting ascending order result like \r\ncollaborator &gt; lead &gt; participant &gt; viewer\r\n\r\nBut I&#39;m expecting lead &gt; collaborator &gt; participant &gt; viewer\r\n\r\n","title":"Using orderBy for custom sorting in Spring Boot","body":"<p>I'm unable to figure out the Spring query for my SQL query</p>\n<pre><code>SELECT person_name, role FROM persons\nGROUP BY person_name, role\nORDER BY ROLE = 'viewer',\n     ROLE = 'participant',\n     ROLE = 'collaborator',\n     ROLE = 'lead';\n</code></pre>\n<p>I tried</p>\n<pre><code>select(field(&quot;person_name&quot;), field(&quot;role&quot;))\n .from(table(&quot;person&quot;)\n .groupBy(field(&quot;person_name&quot;), field(&quot;role&quot;))\n .orderBy((field(&quot;role&quot;).equals(&quot;viewer&quot;)).and(field(&quot;role&quot;).equals(&quot;participant&quot;)).and(\n               field(&quot;role&quot;).equals(&quot;collaborator&quot;)).and(field(&quot;role&quot;).equals(&quot;lead&quot;)));\n</code></pre>\n<p>but no luck.</p>\n<p>If I do orderBy(role) then I'm getting ascending order result like\ncollaborator &gt; lead &gt; participant &gt; viewer</p>\n<p>But I'm expecting lead &gt; collaborator &gt; participant &gt; viewer</p>\n"},{"tags":["java","performance","jmeter","blockchain","corda"],"answers":[{"comments":[{"owner":{"account_id":17248886,"reputation":105,"user_id":12489459,"display_name":"Benjamin"},"score":0,"creation_date":1672935113,"post_id":75020077,"comment_id":132389596,"body_markdown":"Hi Christian, thanks for the answer.\nMy aim is to identify the reason for extra significant time taken when a flow is invoked for the first time after the nodes are deployed and running, compared to the succeeding trials of same flow.","body":"Hi Christian, thanks for the answer. My aim is to identify the reason for extra significant time taken when a flow is invoked for the first time after the nodes are deployed and running, compared to the succeeding trials of same flow."}],"tags":[],"owner":{"account_id":10430083,"reputation":141,"user_id":7690168,"display_name":"Christian Sailer"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1672929430,"creation_date":1672929430,"answer_id":75020077,"question_id":74992529,"body_markdown":"This also applies to the connection to the notary, technically that is just a peer 2 peer connection like to any other node.\r\n\r\nHowever, I think you misunderstood the bit from the documentation you quoted here. The limitation mentioned there is not on establishing a connection - it refers to the fact that the SSL implementation in Java 1.8 that Corda 4.x uses limits how fast data can be en-/decrypted, so has an impact on the steady stream throughput.\r\n","title":"Does a Corda node communication with Notary is same as in case of another peer node?","body":"<p>This also applies to the connection to the notary, technically that is just a peer 2 peer connection like to any other node.</p>\n<p>However, I think you misunderstood the bit from the documentation you quoted here. The limitation mentioned there is not on establishing a connection - it refers to the fact that the SSL implementation in Java 1.8 that Corda 4.x uses limits how fast data can be en-/decrypted, so has an impact on the steady stream throughput.</p>\n"}],"owner":{"account_id":17248886,"reputation":105,"user_id":12489459,"display_name":"Benjamin"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":72,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":75020077,"answer_count":1,"score":0,"last_activity_date":1672929430,"creation_date":1672744157,"question_id":74992529,"body_markdown":"&gt; TLS connections\r\nCorda uses TLS to encrypt the peer to peer connections between nodes. It can be shown that the maximal throughput that is achievable with the JVM TLS layer can limit the node throughput for flows that need to send sufficient amount of data between peers. This is e.g. the case for the CashIssueAndPayment flow in the performance test CorDapp.\r\n\r\nRef: https://docs.r3.com/en/platform/corda/4.9/enterprise/node/operating/optimizing.html#tls-connections\r\n\r\nI hope this is same in case of Communication with Notary as well, if so does this connection establish (like handshaking) only on the first flow execution or it happens along with node restart?\r\n\r\nI am trying to correlate facts for the significant time taken while calling a flow after the node is up and running when compared to succeeding ones.\r\n\r\nAnother related question: https://stackoverflow.com/questions/74953584/corda-jmeter-performance-testing-takes-more-time-for-first-sampler-inside-thread\r\n","title":"Does a Corda node communication with Notary is same as in case of another peer node?","body":"<blockquote>\n<p>TLS connections\nCorda uses TLS to encrypt the peer to peer connections between nodes. It can be shown that the maximal throughput that is achievable with the JVM TLS layer can limit the node throughput for flows that need to send sufficient amount of data between peers. This is e.g. the case for the CashIssueAndPayment flow in the performance test CorDapp.</p>\n</blockquote>\n<p>Ref: <a href=\"https://docs.r3.com/en/platform/corda/4.9/enterprise/node/operating/optimizing.html#tls-connections\" rel=\"nofollow noreferrer\">https://docs.r3.com/en/platform/corda/4.9/enterprise/node/operating/optimizing.html#tls-connections</a></p>\n<p>I hope this is same in case of Communication with Notary as well, if so does this connection establish (like handshaking) only on the first flow execution or it happens along with node restart?</p>\n<p>I am trying to correlate facts for the significant time taken while calling a flow after the node is up and running when compared to succeeding ones.</p>\n<p>Another related question: <a href=\"https://stackoverflow.com/questions/74953584/corda-jmeter-performance-testing-takes-more-time-for-first-sampler-inside-thread\">Corda Jmeter Performance testing takes more time for first sampler inside Thread group (all are Java Request Samplers)</a></p>\n"},{"tags":["java","selenium","selenium-webdriver","selenium-chromedriver","cucumber-java"],"answers":[{"tags":[],"owner":{"account_id":10489136,"reputation":2762,"user_id":7731623,"display_name":"Nandan A"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1625642237,"creation_date":1625642237,"answer_id":68281622,"question_id":68271205,"body_markdown":"I am not sure about using cucumber options but by using cucumber `RuntimeOptions` class you can achieve it. The below method needs to be called in a loop that means you have 10 tags to execute then call this method in `for` loop.\r\n\r\n    public static boolean cucumberRun(String tag) {\r\n    \t\ttry {\r\n                ClassLoader classLoader = CustomClass.class.getClassLoader();\r\n    \t\t\tResourceLoader resourceLoader = new MultiLoader(classLoader);\r\n    \t\t\tClassFinder classFinder = new ResourceLoaderClassFinder(resourceLoader, classLoader);\r\n    \r\n    \t\t\t/* Adding cucumber plugins */\r\n    \t\t\tList&lt;String&gt; pluginList = new ArrayList&lt;String&gt;();\r\n    \t\t\tpluginList.add(&quot;--plugin&quot;);\r\n    \t\t\tpluginList.add(&quot;html:target/cucumber-html-report&quot;);\r\n    \t\t\tpluginList.add(&quot;--plugin&quot;);\r\n    \t\t\tpluginList.add(&quot;json:target/cucumber.json&quot;);\r\n    \t\t\tpluginList.add(&quot;--plugin&quot;);\r\n    \t\t\tpluginList.add(&quot;com.cucumber.listener.ExtentCucumberFormatter:&quot;);\r\n    \t\t\tpluginList.add(&quot;--plugin&quot;);\r\n    \t\t\tpluginList.add(&quot;rerun:target/failedScenarios.txt&quot;);\r\n    \r\n    \t\t\t/* Location for BDD extent report. */\r\n    \t\t\tExtentProperties extentProperties = ExtentProperties.INSTANCE;\r\n    \t\t\textentProperties.setReportPath(&quot;location/Extent_report.html&quot;);\r\n    \r\n    \t\t\t/*\r\n    \t\t\t * Adding cucumberOptions.\r\n    \t\t\t * \r\n    \t\t\t * You can get the tag value from excel and pass it here. We need to add @ before tag value.\r\n    \t\t\t */\r\n    \t\t\tRuntimeOptions ro = new RuntimeOptions(pluginList);\r\n    \t\t\tro.getFilters().add(&quot;@&quot;+tag);\r\n    \t\t\tro.getFeaturePaths().add(&quot;location of feature files&quot;);\r\n    \t\t\tro.getGlue().add(&quot;location of glue code&quot;);\r\n    \r\n    \t\t\t/* Loads all the resources into Cucumber RunTime class and execute. */\r\n    \t\t\tcucumber.runtime.Runtime runtime = new cucumber.runtime.Runtime(resourceLoader, classFinder, classLoader,\r\n    \t\t\t\t\tro);\r\n    \t\t\truntime.run();\r\n    }catch(Exception e){\r\n    // Handle exception\r\n    }","title":"How to get @tag from an excel file to CucumberOptions in Selenium java","body":"<p>I am not sure about using cucumber options but by using cucumber <code>RuntimeOptions</code> class you can achieve it. The below method needs to be called in a loop that means you have 10 tags to execute then call this method in <code>for</code> loop.</p>\n<pre><code>public static boolean cucumberRun(String tag) {\n        try {\n            ClassLoader classLoader = CustomClass.class.getClassLoader();\n            ResourceLoader resourceLoader = new MultiLoader(classLoader);\n            ClassFinder classFinder = new ResourceLoaderClassFinder(resourceLoader, classLoader);\n\n            /* Adding cucumber plugins */\n            List&lt;String&gt; pluginList = new ArrayList&lt;String&gt;();\n            pluginList.add(&quot;--plugin&quot;);\n            pluginList.add(&quot;html:target/cucumber-html-report&quot;);\n            pluginList.add(&quot;--plugin&quot;);\n            pluginList.add(&quot;json:target/cucumber.json&quot;);\n            pluginList.add(&quot;--plugin&quot;);\n            pluginList.add(&quot;com.cucumber.listener.ExtentCucumberFormatter:&quot;);\n            pluginList.add(&quot;--plugin&quot;);\n            pluginList.add(&quot;rerun:target/failedScenarios.txt&quot;);\n\n            /* Location for BDD extent report. */\n            ExtentProperties extentProperties = ExtentProperties.INSTANCE;\n            extentProperties.setReportPath(&quot;location/Extent_report.html&quot;);\n\n            /*\n             * Adding cucumberOptions.\n             * \n             * You can get the tag value from excel and pass it here. We need to add @ before tag value.\n             */\n            RuntimeOptions ro = new RuntimeOptions(pluginList);\n            ro.getFilters().add(&quot;@&quot;+tag);\n            ro.getFeaturePaths().add(&quot;location of feature files&quot;);\n            ro.getGlue().add(&quot;location of glue code&quot;);\n\n            /* Loads all the resources into Cucumber RunTime class and execute. */\n            cucumber.runtime.Runtime runtime = new cucumber.runtime.Runtime(resourceLoader, classFinder, classLoader,\n                    ro);\n            runtime.run();\n}catch(Exception e){\n// Handle exception\n}\n</code></pre>\n"}],"owner":{"account_id":22141353,"reputation":1,"user_id":16391333,"display_name":"Aarsha"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":587,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1672929006,"creation_date":1625576988,"question_id":68271205,"body_markdown":"Normally I would write a cucumber option as below:\r\n\r\n    @CucumberOptions(\r\n        \tfeatures = &quot;src\\\\main\\\\java\\\\feature&quot;\r\n            \t, glue= &quot;stepdefination&quot;,\r\n\t            plugin= {&quot;com.cucumber.listener.ExtentCucumberFormatter:Report/Report.html&quot;}\r\n        \t    tags=&quot;@tag, @tag1, @sort&quot; \r\n               )\r\n\r\npublic class TestRunner extends TestFunction {\r\n\r\n\t@Test\r\n\tpublic void runcukes( ) {\r\n\t\tnew TestNGCucumberRunner(getClass()).runCukes();\r\n\t\t\r\n\t}\r\n\t\r\n\t\r\n\t@BeforeClass\r\n    public void tags() {\r\n }\r\n\t\t \r\n\t@AfterClass\r\n\tpublic void writeExtentReport() {\r\n\t\tReporter.loadXMLConfig(&quot;extent-config.xml&quot;);\r\n\t}\r\n\r\n}\r\n\r\nMy question is: How can I fetch @tag, @tag1, @sort from an excel file to @cucmberoptions and run the program in Selenium Java? ","title":"How to get @tag from an excel file to CucumberOptions in Selenium java","body":"<p>Normally I would write a cucumber option as below:</p>\n<pre><code>@CucumberOptions(\n        features = &quot;src\\\\main\\\\java\\\\feature&quot;\n            , glue= &quot;stepdefination&quot;,\n            plugin= {&quot;com.cucumber.listener.ExtentCucumberFormatter:Report/Report.html&quot;}\n            tags=&quot;@tag, @tag1, @sort&quot; \n           )\n</code></pre>\n<p>public class TestRunner extends TestFunction {</p>\n<pre><code>@Test\npublic void runcukes( ) {\n    new TestNGCucumberRunner(getClass()).runCukes();\n    \n}\n\n\n@BeforeClass\npublic void tags() {\n</code></pre>\n<p>}</p>\n<pre><code>@AfterClass\npublic void writeExtentReport() {\n    Reporter.loadXMLConfig(&quot;extent-config.xml&quot;);\n}\n</code></pre>\n<p>}</p>\n<p>My question is: How can I fetch @tag, @tag1, @sort from an excel file to @cucmberoptions and run the program in Selenium Java?</p>\n"},{"tags":["python","java"],"comments":[{"owner":{"account_id":4614611,"reputation":6295,"user_id":3741571,"accept_rate":2,"display_name":"chenzhongpu"},"score":0,"creation_date":1672927763,"post_id":75019653,"comment_id":132386645,"body_markdown":"Have a look at https://www.baeldung.com/java-working-with-python","body":"Have a look at <a href=\"https://www.baeldung.com/java-working-with-python\" rel=\"nofollow noreferrer\">baeldung.com/java-working-with-python</a>"}],"answers":[{"tags":[],"owner":{"account_id":15779087,"reputation":29,"user_id":11386042,"display_name":"Felipe Kafuri"},"comment_count":0,"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1672928888,"creation_date":1672928888,"answer_id":75019965,"question_id":75019653,"body_markdown":"Try this my friend https://pythonhosted.org/javabridge/java2python.html it might help you with the solution. But I never tried my self","title":"How could I use a method from a Python code in a Java?","body":"<p>Try this my friend <a href=\"https://pythonhosted.org/javabridge/java2python.html\" rel=\"nofollow noreferrer\">https://pythonhosted.org/javabridge/java2python.html</a> it might help you with the solution. But I never tried my self</p>\n"},{"comments":[{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1672950762,"post_id":75019987,"comment_id":132394732,"body_markdown":"Your answer could be improved with additional supporting information. Please [edit] to add further details, such as citations or documentation, so that others can confirm that your answer is correct. You can find more information on how to write good answers [in the help center](/help/how-to-answer).","body":"Your answer could be improved with additional supporting information. Please <a href=\"https://stackoverflow.com/posts/75019987/edit\">edit</a> to add further details, such as citations or documentation, so that others can confirm that your answer is correct. You can find more information on how to write good answers <a href=\"/help/how-to-answer\">in the help center</a>."}],"tags":[],"owner":{"account_id":27164886,"reputation":1,"user_id":20702542,"display_name":"Nithin Rokkam"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1672929001,"creation_date":1672929001,"answer_id":75019987,"question_id":75019653,"body_markdown":"You can use Java Runtime. exec() to run python script, As an example first create a python script file using shebang and then set it executable","title":"How could I use a method from a Python code in a Java?","body":"<p>You can use Java Runtime. exec() to run python script, As an example first create a python script file using shebang and then set it executable</p>\n"}],"owner":{"account_id":27414177,"reputation":1,"user_id":20913654,"display_name":"RandyLyroyd"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":53,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"closed_date":1673175012,"answer_count":2,"score":0,"last_activity_date":1672929001,"creation_date":1672927443,"question_id":75019653,"body_markdown":"So I have a Python script that look like this:\r\n```\r\ndef methodOne():\r\n    print(&quot;Hello I am the first method&quot;)\r\n\r\ndef methodTwo():\r\n    print(&quot;Hello I am the second method&quot;)\r\n```\r\nAnd I have a simple Java script like this:\r\n\r\n```\r\npublic class helloworld {\r\n\r\n    public static void main(String[] args) {\r\n        //Here I want to call the Methods that are in the Python script\r\n    }\r\n\r\n}\r\n```\r\n\r\n\r\nBut I can&#180;t figure out how I could call those methods in the Java file. Is there a way to do this?","title":"How could I use a method from a Python code in a Java?","body":"<p>So I have a Python script that look like this:</p>\n<pre><code>def methodOne():\n    print(&quot;Hello I am the first method&quot;)\n\ndef methodTwo():\n    print(&quot;Hello I am the second method&quot;)\n</code></pre>\n<p>And I have a simple Java script like this:</p>\n<pre><code>public class helloworld {\n\n    public static void main(String[] args) {\n        //Here I want to call the Methods that are in the Python script\n    }\n\n}\n</code></pre>\n<p>But I can´t figure out how I could call those methods in the Java file. Is there a way to do this?</p>\n"},{"tags":["java","string","addition","integer-arithmetic","string-conversion"],"answers":[{"tags":[],"owner":{"account_id":2818342,"reputation":299906,"user_id":2422776,"display_name":"Mureinik"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1672913008,"creation_date":1672913008,"answer_id":75016720,"question_id":75016577,"body_markdown":"The loop iterates over `--T`, and then you use `T` as the array index for the result, meaning you&#39;re getting the results in **reverse** order. One way to solve this is to use a straight-up ascending for loop and use its index as the array index:\r\n\r\n  \r\n    for (int i = 0; i &lt; T; ++i) {\r\n        // The logic remains unchanged\r\n        String arr[] = sc.nextLine().split(&quot; &quot;);\r\n\r\n        System.out.println(&quot;arr[0]: &quot; + Integer.parseInt(arr[0]));\r\n        System.out.println(&quot;arr[1]: &quot; + Integer.parseInt(arr[1]));\r\n        System.out.println(&quot;arr[2]: &quot; + Integer.parseInt(arr[2]));\r\n\r\n        // i is used for the array index, not T\r\n        if ((Integer.parseInt(arr[0]) + Integer.parseInt(arr[1]) + Integer.parseInt(arr[2])) == 180) {\r\n            output[i] = &quot;YES&quot;;\r\n        } else {\r\n            output[i] = &quot;NO&quot;;\r\n        }\r\n    }","title":"Can&#39;t we convert string into Integer and add it to other Integers at the same time and check in a if condition if it equals another integer?","body":"<p>The loop iterates over <code>--T</code>, and then you use <code>T</code> as the array index for the result, meaning you're getting the results in <strong>reverse</strong> order. One way to solve this is to use a straight-up ascending for loop and use its index as the array index:</p>\n<pre><code>for (int i = 0; i &lt; T; ++i) {\n    // The logic remains unchanged\n    String arr[] = sc.nextLine().split(&quot; &quot;);\n\n    System.out.println(&quot;arr[0]: &quot; + Integer.parseInt(arr[0]));\n    System.out.println(&quot;arr[1]: &quot; + Integer.parseInt(arr[1]));\n    System.out.println(&quot;arr[2]: &quot; + Integer.parseInt(arr[2]));\n\n    // i is used for the array index, not T\n    if ((Integer.parseInt(arr[0]) + Integer.parseInt(arr[1]) + Integer.parseInt(arr[2])) == 180) {\n        output[i] = &quot;YES&quot;;\n    } else {\n        output[i] = &quot;NO&quot;;\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":5281408,"reputation":18797,"user_id":4216641,"display_name":"Turing85"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1672928570,"creation_date":1672913203,"answer_id":75016762,"question_id":75016577,"body_markdown":"The variable `T` runs &quot;backwards&quot;; it starts at - in the example - `2` and ends at `0`. Variable `T` is also used to index the `output` array. This means that:\r\n- `output[2]` correlates with the 1st iteration (i.e. the input `40 40 100`), \r\n- `output[1]` correlates with the 2nd iteration (i.e. the input `45 45 90`), and\r\n- `output[0]` correlates with the 3rd iteration (i.e. the input `180 1 1`).\r\n\r\nNow we see that - in fact - the value of `output[0]` (being `&quot;NO&quot;`) is correct since `180 + 1 + 1 = 182 != 180`.\r\n\r\nI rewrote the program such that the `output` is stored in the order the values are calculates:\r\n\r\n    class Ideone {\r\n      public static void main(String[] args) {\r\n        Scanner sc = new Scanner(System.in);\r\n        int num = Integer.parseInt(sc.nextLine().split(&quot; &quot;)[0]);\r\n        String[] output = new String[num];\r\n        for (int index = 0; index &lt; num; ++index) {\r\n          String arr[] = sc.nextLine().split(&quot; &quot;);\r\n    \r\n          System.out.println(&quot;arr[0]: &quot; + Integer.parseInt(arr[0]));\r\n          System.out.println(&quot;arr[1]: &quot; + Integer.parseInt(arr[1]));\r\n          System.out.println(&quot;arr[2]: &quot; + Integer.parseInt(arr[2]));\r\n          if ((Integer.parseInt(arr[0]) + Integer.parseInt(arr[1]) + Integer.parseInt(arr[2])) == 180) {\r\n            output[index] = &quot;YES&quot;;\r\n          } else {\r\n            output[index] = &quot;NO&quot;;\r\n          }\r\n        }\r\n        System.out.println(Arrays.toString(output));\r\n      }\r\n    }\r\n\r\nThis then gives the output:\r\n\r\n    ...\r\n    [YES, YES, NO]\r\n\r\n[&lt;kbd&gt;`Ideone.com` demo&lt;/kbd&gt;][ideone]\r\n\r\n--- \r\n\r\nSome remarks:\r\n- We should use descriptive names for variables (e.g. `String[] arr` could be `String[] userInputs`)\r\n- variable names should be writte in `lowerCamelCase` (`int T = ...` -&gt; `int t = ...`)\r\n- Instead of parsing the `String`s over and over again, I would suggest to parse them once, and then - for example - store them in a `List&lt;Integer&gt;` and work with them, e.g.: \r\n\r\n      List&lt;Integer&gt; values = Arrays.stream(arr)\r\n          .mapToInt(Integer::parseInt)\r\n          .boxed()\r\n          .toList();\r\n- While possible, it is uncommon to write the array-brackets (`[]`) after the variable name. We normally write them after the type since they influence the type (`String arr[]` -&gt; `String[] arr`).\r\n\r\n[ideone]: https://ideone.com/rsO8t4","title":"Can&#39;t we convert string into Integer and add it to other Integers at the same time and check in a if condition if it equals another integer?","body":"<p>The variable <code>T</code> runs &quot;backwards&quot;; it starts at - in the example - <code>2</code> and ends at <code>0</code>. Variable <code>T</code> is also used to index the <code>output</code> array. This means that:</p>\n<ul>\n<li><code>output[2]</code> correlates with the 1st iteration (i.e. the input <code>40 40 100</code>),</li>\n<li><code>output[1]</code> correlates with the 2nd iteration (i.e. the input <code>45 45 90</code>), and</li>\n<li><code>output[0]</code> correlates with the 3rd iteration (i.e. the input <code>180 1 1</code>).</li>\n</ul>\n<p>Now we see that - in fact - the value of <code>output[0]</code> (being <code>&quot;NO&quot;</code>) is correct since <code>180 + 1 + 1 = 182 != 180</code>.</p>\n<p>I rewrote the program such that the <code>output</code> is stored in the order the values are calculates:</p>\n<pre><code>class Ideone {\n  public static void main(String[] args) {\n    Scanner sc = new Scanner(System.in);\n    int num = Integer.parseInt(sc.nextLine().split(&quot; &quot;)[0]);\n    String[] output = new String[num];\n    for (int index = 0; index &lt; num; ++index) {\n      String arr[] = sc.nextLine().split(&quot; &quot;);\n\n      System.out.println(&quot;arr[0]: &quot; + Integer.parseInt(arr[0]));\n      System.out.println(&quot;arr[1]: &quot; + Integer.parseInt(arr[1]));\n      System.out.println(&quot;arr[2]: &quot; + Integer.parseInt(arr[2]));\n      if ((Integer.parseInt(arr[0]) + Integer.parseInt(arr[1]) + Integer.parseInt(arr[2])) == 180) {\n        output[index] = &quot;YES&quot;;\n      } else {\n        output[index] = &quot;NO&quot;;\n      }\n    }\n    System.out.println(Arrays.toString(output));\n  }\n}\n</code></pre>\n<p>This then gives the output:</p>\n<pre><code>...\n[YES, YES, NO]\n</code></pre>\n<p><a href=\"https://ideone.com/rsO8t4\" rel=\"nofollow noreferrer\"><kbd><code>Ideone.com</code> demo</kbd></a></p>\n<hr />\n<p>Some remarks:</p>\n<ul>\n<li><p>We should use descriptive names for variables (e.g. <code>String[] arr</code> could be <code>String[] userInputs</code>)</p>\n</li>\n<li><p>variable names should be writte in <code>lowerCamelCase</code> (<code>int T = ...</code> -&gt; <code>int t = ...</code>)</p>\n</li>\n<li><p>Instead of parsing the <code>String</code>s over and over again, I would suggest to parse them once, and then - for example - store them in a <code>List&lt;Integer&gt;</code> and work with them, e.g.:</p>\n<pre><code>List&lt;Integer&gt; values = Arrays.stream(arr)\n    .mapToInt(Integer::parseInt)\n    .boxed()\n    .toList();\n</code></pre>\n</li>\n<li><p>While possible, it is uncommon to write the array-brackets (<code>[]</code>) after the variable name. We normally write them after the type since they influence the type (<code>String arr[]</code> -&gt; <code>String[] arr</code>).</p>\n</li>\n</ul>\n"},{"tags":[],"owner":{"account_id":18271532,"reputation":24,"user_id":13302222,"display_name":"Marzen"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1672913234,"creation_date":1672913234,"answer_id":75016773,"question_id":75016577,"body_markdown":"you&#39;ve assigned YES/NO into the array `output` with a reserved sort.when you are using `--T` the index of `output` in loop was 2,1,0 so the values in output are [&quot;NO&quot;,&quot;YES&quot;,&quot;YES]. that&#39;s why you get a wrong result.\r\n\r\nYou can change the while loop to a simple for loop.\r\n`for(int i=0;i&lt;output.size;i++`)` and assign YES/NO to output[i]","title":"Can&#39;t we convert string into Integer and add it to other Integers at the same time and check in a if condition if it equals another integer?","body":"<p>you've assigned YES/NO into the array <code>output</code> with a reserved sort.when you are using <code>--T</code> the index of <code>output</code> in loop was 2,1,0 so the values in output are [&quot;NO&quot;,&quot;YES&quot;,&quot;YES]. that's why you get a wrong result.</p>\n<p>You can change the while loop to a simple for loop.\n<code>for(int i=0;i&lt;output.size;i++</code>)` and assign YES/NO to output[i]</p>\n"}],"owner":{"account_id":27216231,"reputation":37,"user_id":20746216,"display_name":"JavaBoi"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":71,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":75016762,"answer_count":3,"score":2,"last_activity_date":1672928570,"creation_date":1672912397,"question_id":75016577,"body_markdown":"I was solving a question on Codechef and I encountered this problem.\r\n\r\nHere is the link to the question. https://www.codechef.com/LP0TO101/problems/FLOW013\r\n\r\nBasically we are given three angles and we need to check if their sum is 180 and therefore it is a triangle, and if it is we need to print YES or else we need to print NO.\r\n\r\nWe are given input in the following format.\r\n\r\n```\r\n3 \r\n40 40 100\r\n45 45 90\r\n180 1 1\r\n```\r\n[Note: There is a blank string(&quot; &quot;) right after 3.]\r\n\r\nThis is my source code.\r\n\r\n\r\n```\r\nimport java.util.Scanner;\r\nimport java.util.stream.IntStream;\r\n\r\nclass Codechef {\r\n\tpublic static void main(String[] args) throws java.lang.Exception {\r\n\r\n\t\tScanner sc = new Scanner(System.in);\r\n\t\tint T = Integer.parseInt(sc.nextLine().split(&quot; &quot;)[0]);\r\n\t\tString[] output = new String[T];\r\n\t\twhile (--T &gt;= 0) {\r\n\t\t\tString arr[] = sc.nextLine().split(&quot; &quot;);\r\n\r\n\t\t\tSystem.out.println(&quot;arr[0]: &quot; + Integer.parseInt(arr[0]));\r\n\t\t\tSystem.out.println(&quot;arr[1]: &quot; + Integer.parseInt(arr[1]));\r\n\t\t\tSystem.out.println(&quot;arr[2]: &quot; + Integer.parseInt(arr[2]));\r\n\t\t\tif ((Integer.parseInt(arr[0]) + Integer.parseInt(arr[1]) + Integer.parseInt(arr[2])) == 180) {\r\n\t\t\t\toutput[T] = &quot;YES&quot;;\r\n\t\t\t} else {\r\n\t\t\t\toutput[T] = &quot;NO&quot;;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tIntStream.range(0, output.length).forEach(h -&gt; System.out.println(output[h]));\r\n\r\n\t}\r\n}\r\n\r\n\r\n```\r\n\r\nThe output it is returning on Codechef is:\r\n```\r\narr[0]: 40\r\narr[1]: 40\r\narr[2]: 100\r\narr[0]: 45\r\narr[1]: 45\r\narr[2]: 90\r\narr[0]: 180\r\narr[1]: 1\r\narr[2]: 1\r\nNO\r\nYES\r\nYES\r\n```\r\nWhat is wrong here, please help.\r\n\r\n&gt;My question is how come arr[0]: 40 + arr[1]: 40 + arr[2]: 100 is not equal to 180, I mean 40 + 40 + 100 should be equal to 180, so what is wrong.\r\n\r\n\r\nWhen in the Eclipse IDE I gave the input of:\r\n```\r\n1\r\n40 40 100\r\n```\r\nIt showed me output of: \r\n```\r\narr[0]: 40\r\narr[1]: 40\r\narr[2]: 100\r\nYES\r\n```\r\nBut when I give the same output there, it doesn&#39;t executes fully and keeps processing while it is incomplete and shows me output of(I am inserting the image): \r\n\r\n![enter image description here](https://i.stack.imgur.com/SrWzk.png)\r\n\r\n\r\nNote: The red square in the right corner of the image shows that it is still executing.\r\n\r\nHowever when I have removed the printing statements and gave the same input in eclipse, it showed me an output of: (Inserting an image again) \r\n\r\n![enter image description here](https://i.stack.imgur.com/fBZoC.png)\r\n\r\n\r\nI hope you have understood my problem. \r\n\r\n&gt; My question again is how come arr[0]: 40 + arr[1]: 40 + arr[2]: 100 is not equal to 180, I mean 40 + 40 + 100 should be equal to 180, what is wrong.\r\nAnd when I am executing it individually it is showing me the right output but when I do the test case on Codechef it is showing the opposite answer.\r\n\r\n What is wrong here?\r\n\r\n","title":"Can&#39;t we convert string into Integer and add it to other Integers at the same time and check in a if condition if it equals another integer?","body":"<p>I was solving a question on Codechef and I encountered this problem.</p>\n<p>Here is the link to the question. <a href=\"https://www.codechef.com/LP0TO101/problems/FLOW013\" rel=\"nofollow noreferrer\">https://www.codechef.com/LP0TO101/problems/FLOW013</a></p>\n<p>Basically we are given three angles and we need to check if their sum is 180 and therefore it is a triangle, and if it is we need to print YES or else we need to print NO.</p>\n<p>We are given input in the following format.</p>\n<pre><code>3 \n40 40 100\n45 45 90\n180 1 1\n</code></pre>\n<p>[Note: There is a blank string(&quot; &quot;) right after 3.]</p>\n<p>This is my source code.</p>\n<pre><code>import java.util.Scanner;\nimport java.util.stream.IntStream;\n\nclass Codechef {\n    public static void main(String[] args) throws java.lang.Exception {\n\n        Scanner sc = new Scanner(System.in);\n        int T = Integer.parseInt(sc.nextLine().split(&quot; &quot;)[0]);\n        String[] output = new String[T];\n        while (--T &gt;= 0) {\n            String arr[] = sc.nextLine().split(&quot; &quot;);\n\n            System.out.println(&quot;arr[0]: &quot; + Integer.parseInt(arr[0]));\n            System.out.println(&quot;arr[1]: &quot; + Integer.parseInt(arr[1]));\n            System.out.println(&quot;arr[2]: &quot; + Integer.parseInt(arr[2]));\n            if ((Integer.parseInt(arr[0]) + Integer.parseInt(arr[1]) + Integer.parseInt(arr[2])) == 180) {\n                output[T] = &quot;YES&quot;;\n            } else {\n                output[T] = &quot;NO&quot;;\n            }\n        }\n\n        IntStream.range(0, output.length).forEach(h -&gt; System.out.println(output[h]));\n\n    }\n}\n\n\n</code></pre>\n<p>The output it is returning on Codechef is:</p>\n<pre><code>arr[0]: 40\narr[1]: 40\narr[2]: 100\narr[0]: 45\narr[1]: 45\narr[2]: 90\narr[0]: 180\narr[1]: 1\narr[2]: 1\nNO\nYES\nYES\n</code></pre>\n<p>What is wrong here, please help.</p>\n<blockquote>\n<p>My question is how come arr[0]: 40 + arr[1]: 40 + arr[2]: 100 is not equal to 180, I mean 40 + 40 + 100 should be equal to 180, so what is wrong.</p>\n</blockquote>\n<p>When in the Eclipse IDE I gave the input of:</p>\n<pre><code>1\n40 40 100\n</code></pre>\n<p>It showed me output of:</p>\n<pre><code>arr[0]: 40\narr[1]: 40\narr[2]: 100\nYES\n</code></pre>\n<p>But when I give the same output there, it doesn't executes fully and keeps processing while it is incomplete and shows me output of(I am inserting the image):</p>\n<p><img src=\"https://i.stack.imgur.com/SrWzk.png\" alt=\"enter image description here\" /></p>\n<p>Note: The red square in the right corner of the image shows that it is still executing.</p>\n<p>However when I have removed the printing statements and gave the same input in eclipse, it showed me an output of: (Inserting an image again)</p>\n<p><img src=\"https://i.stack.imgur.com/fBZoC.png\" alt=\"enter image description here\" /></p>\n<p>I hope you have understood my problem.</p>\n<blockquote>\n<p>My question again is how come arr[0]: 40 + arr[1]: 40 + arr[2]: 100 is not equal to 180, I mean 40 + 40 + 100 should be equal to 180, what is wrong.\nAnd when I am executing it individually it is showing me the right output but when I do the test case on Codechef it is showing the opposite answer.</p>\n</blockquote>\n<p>What is wrong here?</p>\n"},{"tags":["java","vert.x","blocking","nonblocking","jmc"],"comments":[{"owner":{"account_id":2446461,"reputation":8725,"user_id":2133695,"display_name":"tsegismont"},"score":0,"creation_date":1672933123,"post_id":75019835,"comment_id":132388819,"body_markdown":"you might be interested in https://stackoverflow.com/a/63883926/2133695","body":"you might be interested in <a href=\"https://stackoverflow.com/a/63883926/2133695\">stackoverflow.com/a/63883926/2133695</a>"},{"owner":{"account_id":2616549,"reputation":1922,"user_id":2265497,"accept_rate":41,"display_name":"slesh"},"score":0,"creation_date":1672934753,"post_id":75019835,"comment_id":132389452,"body_markdown":"I saw it, that SO mentioned in my message. My question is more about is it okay to see such amount of &quot;Java Monitor Blocked&quot; events in JMC?","body":"I saw it, that SO mentioned in my message. My question is more about is it okay to see such amount of &quot;Java Monitor Blocked&quot; events in JMC?"},{"owner":{"account_id":2446461,"reputation":8725,"user_id":2133695,"display_name":"tsegismont"},"score":0,"creation_date":1673623826,"post_id":75019835,"comment_id":132547783,"body_markdown":"Can you share a simple reproducer on GitHub?","body":"Can you share a simple reproducer on GitHub?"}],"owner":{"account_id":2616549,"reputation":1922,"user_id":2265497,"accept_rate":41,"display_name":"slesh"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":67,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":0,"score":2,"last_activity_date":1672928273,"creation_date":1672928273,"question_id":75019835,"body_markdown":"I do profile my vert.x based http service and noticed in JMC that all my envelop threads(aka verticles) produce lots of &quot;Java Monitor Blocked&quot; events in class io.vertx.core.http.impl.Http1xServerConnection. Javadoc of this class says: &quot;The internal state is protected using the synchronized keyword. If always used on the same event loop, then we benefit from biased locking which makes the overhead of synchronized near zero.&quot;. I noticed that JDK17 I use has BiasedLocking turned off. I try to run test with turned on BiasedLocking but nothing changed. It also says that BiasedLocking was deprecated and could be removed. In the internet I found this SO topic which says that it&#39;s fine that vert.x uses synchronized in some classes https://stackoverflow.com/questions/63868643/does-vert-x-have-plans-addressing-the-deprecation-of-biased-locking-in-java-15\r\n\r\nMy question is that does the JMC profile looks good or I should worry and there is a performance issues in my code? [![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/8XbBU.png","title":"Is JMC&#39;s &quot;Java Monitor Blocked&quot; caused by vert.x Http1xServerConnection problem?","body":"<p>I do profile my vert.x based http service and noticed in JMC that all my envelop threads(aka verticles) produce lots of &quot;Java Monitor Blocked&quot; events in class io.vertx.core.http.impl.Http1xServerConnection. Javadoc of this class says: &quot;The internal state is protected using the synchronized keyword. If always used on the same event loop, then we benefit from biased locking which makes the overhead of synchronized near zero.&quot;. I noticed that JDK17 I use has BiasedLocking turned off. I try to run test with turned on BiasedLocking but nothing changed. It also says that BiasedLocking was deprecated and could be removed. In the internet I found this SO topic which says that it's fine that vert.x uses synchronized in some classes <a href=\"https://stackoverflow.com/questions/63868643/does-vert-x-have-plans-addressing-the-deprecation-of-biased-locking-in-java-15\">Does Vert.x have plans addressing the deprecation of biased locking in Java 15?</a></p>\n<p>My question is that does the JMC profile looks good or I should worry and there is a performance issues in my code? <a href=\"https://i.stack.imgur.com/8XbBU.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/8XbBU.png\" alt=\"enter image description here\" /></a></p>\n"},{"tags":["java","spring-boot","unit-testing","testing","junit"],"comments":[{"owner":{"account_id":1056871,"reputation":117749,"user_id":1059372,"accept_rate":97,"display_name":"Eugene"},"score":1,"creation_date":1672951449,"post_id":75019826,"comment_id":132394929,"body_markdown":"you don&#39;t get any other exception stacktrace? Btw, it&#39;s not a good idea to have `DEFINED_PORT`, it could be random port too..","body":"you don&#39;t get any other exception stacktrace? Btw, it&#39;s not a good idea to have <code>DEFINED_PORT</code>, it could be random port too.."},{"owner":{"account_id":2726668,"reputation":4982,"user_id":2351527,"accept_rate":67,"display_name":"codeX"},"score":0,"creation_date":1672990940,"post_id":75019826,"comment_id":132401712,"body_markdown":"Thanks for the comment, @Eugene.  No other potential traces are thrown. If I am not using a defined port, how can I make it target the 8080 port ? Let me try it out, configuring that in application.properties.","body":"Thanks for the comment, @Eugene.  No other potential traces are thrown. If I am not using a defined port, how can I make it target the 8080 port ? Let me try it out, configuring that in application.properties."},{"owner":{"account_id":1056871,"reputation":117749,"user_id":1059372,"accept_rate":97,"display_name":"Eugene"},"score":0,"creation_date":1672991850,"post_id":75019826,"comment_id":132401892,"body_markdown":"without a stacktrace, this is impossible to diagnose, I am sure you know that. You don&#39;t &quot;need&quot; to target 8080 usually, what if there is some other service that is running on 8080 on that host? That&#39;s the entire point of `RANDOM_PORT` and then you use annotation `@LocalServerPort` (or `@Value(&quot;${local.server.port}&quot;`) if you are on a spring version that does not have that yet","body":"without a stacktrace, this is impossible to diagnose, I am sure you know that. You don&#39;t &quot;need&quot; to target 8080 usually, what if there is some other service that is running on 8080 on that host? That&#39;s the entire point of <code>RANDOM_PORT</code> and then you use annotation <code>@LocalServerPort</code> (or <code>@Value(&quot;${local.server.port}&quot;</code>) if you are on a spring version that does not have that yet"},{"owner":{"account_id":2726668,"reputation":4982,"user_id":2351527,"accept_rate":67,"display_name":"codeX"},"score":0,"creation_date":1673028668,"post_id":75019826,"comment_id":132413036,"body_markdown":"Thanks Eugene.I have defined the port number in application.yaml as 8080, and it&#39;s taken by default during the execution in local. But why can&#39;t it take it in the build ?\n\nI tried using Random Port and  @Value(&quot;${local.server.port}&quot;) but still the default port only taken because /sampletest executes the snippet where it catches the port on the fly from application.yaml.\n\nI have seen the trace and port is the only problem. If I am able to make the get call get this random port number on the fly, I believe it will do it. Trying that now.","body":"Thanks Eugene.I have defined the port number in application.yaml as 8080, and it&#39;s taken by default during the execution in local. But why can&#39;t it take it in the build ?  I tried using Random Port and  @Value(&quot;${local.server.port}&quot;) but still the default port only taken because /sampletest executes the snippet where it catches the port on the fly from application.yaml.  I have seen the trace and port is the only problem. If I am able to make the get call get this random port number on the fly, I believe it will do it. Trying that now."},{"owner":{"account_id":1056871,"reputation":117749,"user_id":1059372,"accept_rate":97,"display_name":"Eugene"},"score":0,"creation_date":1673083833,"post_id":75019826,"comment_id":132421451,"body_markdown":"after you have the port in your test class, for example `@Autowired private WebTestClient webClient;`, you need to use it in the testing code, for example: `webClient.get().uri(&quot;http://localhost:{port}/actuator/health&quot;, this.port)`","body":"after you have the port in your test class, for example <code>@Autowired private WebTestClient webClient;</code>, you need to use it in the testing code, for example: <code>webClient.get().uri(&quot;http:&#47;&#47;localhost:{port}&#47;actuator&#47;health&zwnj;&#8203;&quot;, this.port)</code>"}],"owner":{"account_id":2726668,"reputation":4982,"user_id":2351527,"accept_rate":67,"display_name":"codeX"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":114,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":0,"score":2,"last_activity_date":1672928249,"creation_date":1672928249,"question_id":75019826,"body_markdown":"I have a test case class something like\r\n\r\n    @RunWith(SpringRunner.class)\r\n    @SpringBootTest(webEnvironment = SpringBootTest.WebEnvironment.DEFINED_PORT)\r\n    @AutoConfigureWebTestClient\r\n    public class sampleTests {\r\n    \r\n       when(test.getUrl()).thenReturn(&quot;http://localhost:8080/sampletest&quot;);\r\n    \r\n     @Test\r\n      public void getEndpoint() throws Exception {\r\n            webTestClient.get().uri(&quot;/sampletest&quot;).exchange().expectStatus().isOk().expectBody().consumeWith(System.out::println).json(expectedBody);\r\n    \r\n             }\r\n    \r\n    }\r\n\r\nThis is passing in local, but got failed with the following error when executed in the azure DevOps pipeline.\r\n\r\n    java.lang.AssertionError: Status expected:&lt;200 OK&gt; but was:&lt;500 INTERNAL_SERVER_ERROR&gt;\r\n\r\nAny insights on the same will be much appreciated.","title":"Springboot REST API Testcase passing in local but failing in build","body":"<p>I have a test case class something like</p>\n<pre><code>@RunWith(SpringRunner.class)\n@SpringBootTest(webEnvironment = SpringBootTest.WebEnvironment.DEFINED_PORT)\n@AutoConfigureWebTestClient\npublic class sampleTests {\n\n   when(test.getUrl()).thenReturn(&quot;http://localhost:8080/sampletest&quot;);\n\n @Test\n  public void getEndpoint() throws Exception {\n        webTestClient.get().uri(&quot;/sampletest&quot;).exchange().expectStatus().isOk().expectBody().consumeWith(System.out::println).json(expectedBody);\n\n         }\n\n}\n</code></pre>\n<p>This is passing in local, but got failed with the following error when executed in the azure DevOps pipeline.</p>\n<pre><code>java.lang.AssertionError: Status expected:&lt;200 OK&gt; but was:&lt;500 INTERNAL_SERVER_ERROR&gt;\n</code></pre>\n<p>Any insights on the same will be much appreciated.</p>\n"},{"tags":["java","jsp","jdbc"],"owner":{"account_id":27381020,"reputation":1,"user_id":20885629,"display_name":"Dipesh Mahajan"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":151,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1672928237,"creation_date":1672928237,"question_id":75019821,"body_markdown":"This is my RegistrationController.jsp\r\n```\r\n&lt;%@ page language=&quot;java&quot; contentType=&quot;text/html; charset=UTF-8&quot;\r\n    pageEncoding=&quot;UTF-8&quot;%&gt;\r\n&lt;%@page import=&quot;com.jsplogindemo.dao.UserDao&quot; %&gt;\r\n&lt;%@page import=&quot;com.jsplogindemo.daoimpl.UserDaoImpl&quot; %&gt;\r\n\r\n &lt;jsp:useBean class=&quot;com.jsplogindemo.entity.User&quot; \r\n    id=&quot;user&quot; scope=&quot;page&quot;&gt;&lt;/jsp:useBean&gt;\r\n    &lt;jsp:setProperty name=&quot;user&quot; property=&quot;*&quot;/&gt;\r\n    \r\n    &lt;%\r\n    \tUserDao daoImpl = new UserDaoImpl();\r\n    \t\r\n    \tif(daoImpl.addNewUser(user)) {\r\n    \t\tresponse.sendRedirect(\r\n    \t\t\t\t&quot;login.jsp?msg=regsuccess&quot;);\r\n    \t}\r\n    \telse {\r\n    \t\tresponse.sendRedirect(\r\n    \t\t\t\t&quot;registration.jsp?msg=regerror&quot;);\r\n    \t}\r\n    %&gt;\r\n```\r\nThis is LoginController.jsp\r\n\r\n```\r\n&lt;%@ page language=&quot;java&quot; contentType=&quot;text/html; charset=UTF-8&quot;\r\n    pageEncoding=&quot;UTF-8&quot;%&gt;\r\n&lt;%@page import=&quot;com.jsplogindemo.dao.UserDao&quot; %&gt;\r\n&lt;%@page import=&quot;com.jsplogindemo.daoimpl.UserDaoImpl&quot; %&gt;\r\n\r\n &lt;jsp:useBean class=&quot;com.jsplogindemo.entity.User&quot; \r\n    id=&quot;user&quot; scope=&quot;page&quot;&gt;&lt;/jsp:useBean&gt;\r\n    &lt;jsp:setProperty name=&quot;user&quot; property=&quot;*&quot;/&gt;\r\n    \r\n    &lt;%\r\n    \tUserDao daoImpl = new UserDaoImpl();\r\n    \t\r\n    \tif(daoImpl.checkUserCredentials(user)) {\r\n    \t\t\r\n    \t\tsession.setAttribute(&quot;USERNAME&quot;, \r\n    \t\t\t\tuser.getUsername());\r\n    \t\tresponse.sendRedirect(&quot;home&quot;);\r\n    \t}\r\n    \telse {\r\n    \t\tresponse.sendRedirect(\r\n    \t\t\t\t&quot;login.jsp?msg=loginerror&quot;);\r\n    \t}\r\n    %&gt;\r\n```\r\nThis is User.java \r\n\r\n```\r\npackage com.jsplogindemo.entity;\r\n\r\npublic class User {\r\n     private String username;\r\n     private String email;\r\n     private String password;\r\n     \r\n\t public User() {\r\n\t\t\r\n\t}\r\n\tpublic User(String username, String email, String password) {\r\n\t\tsuper();\r\n\t\tthis.setUsername(username);\r\n\t\tthis.setEmail(email);\r\n\t\tthis.setPassword(password);\r\n\t}\r\n\tpublic String getEmail() {\r\n\t\treturn email;\r\n\t}\r\n\tpublic void setEmail(String email) {\r\n\t\tthis.email = email;\r\n\t}\r\n\tpublic String getUsername() {\r\n\t\treturn username;\r\n\t}\r\n\tpublic void setUsername(String username) {\r\n\t\tthis.username = username;\r\n\t}\r\n\tpublic String getPassword() {\r\n\t\treturn password;\r\n\t}\r\n\tpublic void setPassword(String password) {\r\n\t\tthis.password = password;\r\n\t}\r\n\t\r\n     \r\n     \r\n}\r\n```\r\nThis is my folder structure\r\n[folder structure](https://i.stack.imgur.com/Jb1Go.jpg)\r\n\r\n\r\nI want to register the user and take to the login page but it show this type of error\r\n\r\nI am using Apache Tomcat/9.0.70\r\n\r\n&gt; HTTP Status 500 – Internal Server Error\r\n&gt; Type Exception Report\r\n&gt; \r\n&gt; Message /controller/RegistrationController.jsp (line: [6], column: [1]) The value for the useBean class attribute [com.jsplogindemo.entity.User] is invalid.\r\n&gt; \r\n&gt; Description The server encountered an unexpected condition that prevented it from fulfilling the request.\r\n&gt; \r\n&gt; Exception ","title":"HTTP Status 500 – Internal Server Error - The value for the ___ class attribute [ ____ ] is invalid","body":"<p>This is my RegistrationController.jsp</p>\n<pre><code>&lt;%@ page language=&quot;java&quot; contentType=&quot;text/html; charset=UTF-8&quot;\n    pageEncoding=&quot;UTF-8&quot;%&gt;\n&lt;%@page import=&quot;com.jsplogindemo.dao.UserDao&quot; %&gt;\n&lt;%@page import=&quot;com.jsplogindemo.daoimpl.UserDaoImpl&quot; %&gt;\n\n &lt;jsp:useBean class=&quot;com.jsplogindemo.entity.User&quot; \n    id=&quot;user&quot; scope=&quot;page&quot;&gt;&lt;/jsp:useBean&gt;\n    &lt;jsp:setProperty name=&quot;user&quot; property=&quot;*&quot;/&gt;\n    \n    &lt;%\n        UserDao daoImpl = new UserDaoImpl();\n        \n        if(daoImpl.addNewUser(user)) {\n            response.sendRedirect(\n                    &quot;login.jsp?msg=regsuccess&quot;);\n        }\n        else {\n            response.sendRedirect(\n                    &quot;registration.jsp?msg=regerror&quot;);\n        }\n    %&gt;\n</code></pre>\n<p>This is LoginController.jsp</p>\n<pre><code>&lt;%@ page language=&quot;java&quot; contentType=&quot;text/html; charset=UTF-8&quot;\n    pageEncoding=&quot;UTF-8&quot;%&gt;\n&lt;%@page import=&quot;com.jsplogindemo.dao.UserDao&quot; %&gt;\n&lt;%@page import=&quot;com.jsplogindemo.daoimpl.UserDaoImpl&quot; %&gt;\n\n &lt;jsp:useBean class=&quot;com.jsplogindemo.entity.User&quot; \n    id=&quot;user&quot; scope=&quot;page&quot;&gt;&lt;/jsp:useBean&gt;\n    &lt;jsp:setProperty name=&quot;user&quot; property=&quot;*&quot;/&gt;\n    \n    &lt;%\n        UserDao daoImpl = new UserDaoImpl();\n        \n        if(daoImpl.checkUserCredentials(user)) {\n            \n            session.setAttribute(&quot;USERNAME&quot;, \n                    user.getUsername());\n            response.sendRedirect(&quot;home&quot;);\n        }\n        else {\n            response.sendRedirect(\n                    &quot;login.jsp?msg=loginerror&quot;);\n        }\n    %&gt;\n</code></pre>\n<p>This is User.java</p>\n<pre><code>package com.jsplogindemo.entity;\n\npublic class User {\n     private String username;\n     private String email;\n     private String password;\n     \n     public User() {\n        \n    }\n    public User(String username, String email, String password) {\n        super();\n        this.setUsername(username);\n        this.setEmail(email);\n        this.setPassword(password);\n    }\n    public String getEmail() {\n        return email;\n    }\n    public void setEmail(String email) {\n        this.email = email;\n    }\n    public String getUsername() {\n        return username;\n    }\n    public void setUsername(String username) {\n        this.username = username;\n    }\n    public String getPassword() {\n        return password;\n    }\n    public void setPassword(String password) {\n        this.password = password;\n    }\n    \n     \n     \n}\n</code></pre>\n<p>This is my folder structure\n<a href=\"https://i.stack.imgur.com/Jb1Go.jpg\" rel=\"nofollow noreferrer\">folder structure</a></p>\n<p>I want to register the user and take to the login page but it show this type of error</p>\n<p>I am using Apache Tomcat/9.0.70</p>\n<blockquote>\n<p>HTTP Status 500 – Internal Server Error\nType Exception Report</p>\n<p>Message /controller/RegistrationController.jsp (line: [6], column: [1]) The value for the useBean class attribute [com.jsplogindemo.entity.User] is invalid.</p>\n<p>Description The server encountered an unexpected condition that prevented it from fulfilling the request.</p>\n<p>Exception</p>\n</blockquote>\n"},{"tags":["java","java-8","precision","jit","java-17"],"comments":[{"owner":{"account_id":2709823,"reputation":10716,"user_id":2338547,"display_name":"markspace"},"score":4,"creation_date":1670624386,"post_id":74747949,"comment_id":131924271,"body_markdown":"Could explain where the error is?  For example, what result do you see, and what result to you expect to see?  I realize the arrays are large but pointing out what values (at least a few of them) are wrong might help folks debug on their own end.","body":"Could explain where the error is?  For example, what result do you see, and what result to you expect to see?  I realize the arrays are large but pointing out what values (at least a few of them) are wrong might help folks debug on their own end."},{"owner":{"account_id":108033,"reputation":17201,"user_id":286934,"display_name":"Progman"},"score":2,"creation_date":1670668445,"post_id":74747949,"comment_id":131929541,"body_markdown":"Please [edit] your question to include your source code as a working [mcve], which can be tested by others.","body":"Please <a href=\"https://stackoverflow.com/posts/74747949/edit\">edit</a> your question to include your source code as a working <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>, which can be tested by others."},{"owner":{"account_id":5655489,"reputation":308,"user_id":4474819,"display_name":"greg"},"score":0,"creation_date":1670669858,"post_id":74747949,"comment_id":131929731,"body_markdown":"Yes I will do this, for that I need to rework a bit the code such that I can reproduce in a minimal unit test.","body":"Yes I will do this, for that I need to rework a bit the code such that I can reproduce in a minimal unit test."},{"owner":{"account_id":5655489,"reputation":308,"user_id":4474819,"display_name":"greg"},"score":0,"creation_date":1672928033,"post_id":74747949,"comment_id":132386748,"body_markdown":"@Progman Just added a link to the reproductible example.","body":"@Progman Just added a link to the reproductible example."},{"owner":{"account_id":108033,"reputation":17201,"user_id":286934,"display_name":"Progman"},"score":0,"creation_date":1672932526,"post_id":74747949,"comment_id":132388581,"body_markdown":"@greg Please add your code to the question itself, not on an external site.","body":"@greg Please add your code to the question itself, not on an external site."},{"owner":{"account_id":5655489,"reputation":308,"user_id":4474819,"display_name":"greg"},"score":0,"creation_date":1672933375,"post_id":74747949,"comment_id":132388914,"body_markdown":"@Progman It&#39;s not a simple code snippet there are multiple classes involved so I&#39;am not sure how to proceed on stackoverlow as I do not see any import zipped or similar button","body":"@Progman It&#39;s not a simple code snippet there are multiple classes involved so I&#39;am not sure how to proceed on stackoverlow as I do not see any import zipped or similar button"}],"owner":{"account_id":5655489,"reputation":308,"user_id":4474819,"display_name":"greg"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":117,"favorite_count":0,"down_vote_count":1,"up_vote_count":6,"answer_count":0,"score":5,"last_activity_date":1672928196,"creation_date":1670617162,"question_id":74747949,"body_markdown":"In the context of a scientific computing pipeline implemented in Java, we are using a LeastSquare optimizer from Apache Commons math 3.6.1 and experience strange numerical differences between Java 8 (jdk8u322-b06), Java and Java 17.\r\n\r\nWe noticed differences after migration to Java 17 (currently using 17.0.5.)\r\n\r\nI can reproduce the different behavior between Java 8 and Java 17 in a &quot;simple&quot; unit test without involving the full computing pipeline so all problems that could come from the data loading  or multi threading part are excluded.\r\n\r\nIn JDK 17 the strict floating point semantics has been restored but the results is fully different compared to Java 8 compiled or interpreted. In this case actually the least square optimizer does not converge while it does in the Java 8 case.\r\n\r\nAn important point is that all these results are fully reproducible to the last digit, they are fully predictable on each platform configuration.\r\n\r\nI also but this time in the full pipeline execution observed that I can reproduce numerical difference on Java 8 itself depending if the code is interpreted or compiled (at C2 level or C1 I did not investigated yet)\r\n\r\nI am really puzzled and would like to know if this are known/documented behaviors or if this is a bug in the JDK 8 platform or JDK 17 ?\r\nDoes anyone observed such issues ?\r\n\r\nThanks for any hints !\r\n\r\n\r\n**EDIT**\r\n\r\nI cannot provide here a simple code snippet to reproduce the issue. But I extracted the necessary part of the code to reproduce the behavior in a GitHub repository. Disclaimer : I&#39;am not the original author of the code.\r\n\r\nSteps to reproduce:\r\n* git clone https://github.com/gjevardat/ReproduceFloatingPointBug\r\n* Run the unit test named TimeSeriesModelFitterBugTest\r\nI ran it in eclipse as a Junit5 test.\r\n\r\nTo see the difference of behavior just switch the java.version property from 1.8 to 17 in the pom.xml. \r\n\r\nI can pinpoint the location in Apache math commons were the code diverge:\r\nIn the class LevenbergMarquardtOptimizer of Apache Math commmons 3.6.1 (line 453)\r\n\r\n      double actRed = -1.0;\r\n          if (0.1 * currentCost &lt; previousCost) {\r\n              double r = currentCost / previousCost;\r\n              actRed = 1.0 - r * r;\r\n          }\r\nAt iteration 17 actRed becomes 0 because r==1 in Java 17 while it is slightly positive in Java 8\r\nBecause of the value being 0, later (line 533) the non convergenceException is thrown\r\n\r\n     if (FastMath.abs(actRed) &lt;= TWO_EPS &amp;&amp;\r\n         preRed &lt;= TWO_EPS &amp;&amp; ratio &lt;= 2.0) {\r\n             throw new ConvergenceException(LocalizedFormats.TOO_SMALL_COST_RELATIVE_TOLERANCE,\r\n                                                   costRelativeTolerance);\r\n                } ","title":"Java floating point computations behavior differences","body":"<p>In the context of a scientific computing pipeline implemented in Java, we are using a LeastSquare optimizer from Apache Commons math 3.6.1 and experience strange numerical differences between Java 8 (jdk8u322-b06), Java and Java 17.</p>\n<p>We noticed differences after migration to Java 17 (currently using 17.0.5.)</p>\n<p>I can reproduce the different behavior between Java 8 and Java 17 in a &quot;simple&quot; unit test without involving the full computing pipeline so all problems that could come from the data loading  or multi threading part are excluded.</p>\n<p>In JDK 17 the strict floating point semantics has been restored but the results is fully different compared to Java 8 compiled or interpreted. In this case actually the least square optimizer does not converge while it does in the Java 8 case.</p>\n<p>An important point is that all these results are fully reproducible to the last digit, they are fully predictable on each platform configuration.</p>\n<p>I also but this time in the full pipeline execution observed that I can reproduce numerical difference on Java 8 itself depending if the code is interpreted or compiled (at C2 level or C1 I did not investigated yet)</p>\n<p>I am really puzzled and would like to know if this are known/documented behaviors or if this is a bug in the JDK 8 platform or JDK 17 ?\nDoes anyone observed such issues ?</p>\n<p>Thanks for any hints !</p>\n<p><strong>EDIT</strong></p>\n<p>I cannot provide here a simple code snippet to reproduce the issue. But I extracted the necessary part of the code to reproduce the behavior in a GitHub repository. Disclaimer : I'am not the original author of the code.</p>\n<p>Steps to reproduce:</p>\n<ul>\n<li>git clone <a href=\"https://github.com/gjevardat/ReproduceFloatingPointBug\" rel=\"nofollow noreferrer\">https://github.com/gjevardat/ReproduceFloatingPointBug</a></li>\n<li>Run the unit test named TimeSeriesModelFitterBugTest\nI ran it in eclipse as a Junit5 test.</li>\n</ul>\n<p>To see the difference of behavior just switch the java.version property from 1.8 to 17 in the pom.xml.</p>\n<p>I can pinpoint the location in Apache math commons were the code diverge:\nIn the class LevenbergMarquardtOptimizer of Apache Math commmons 3.6.1 (line 453)</p>\n<pre><code>  double actRed = -1.0;\n      if (0.1 * currentCost &lt; previousCost) {\n          double r = currentCost / previousCost;\n          actRed = 1.0 - r * r;\n      }\n</code></pre>\n<p>At iteration 17 actRed becomes 0 because r==1 in Java 17 while it is slightly positive in Java 8\nBecause of the value being 0, later (line 533) the non convergenceException is thrown</p>\n<pre><code> if (FastMath.abs(actRed) &lt;= TWO_EPS &amp;&amp;\n     preRed &lt;= TWO_EPS &amp;&amp; ratio &lt;= 2.0) {\n         throw new ConvergenceException(LocalizedFormats.TOO_SMALL_COST_RELATIVE_TOLERANCE,\n                                               costRelativeTolerance);\n            } \n</code></pre>\n"},{"tags":["java","intellij-idea","javafx","lib"],"comments":[{"owner":{"account_id":26954515,"reputation":27,"user_id":20523135,"display_name":"n00biew0lf"},"score":0,"creation_date":1672877618,"post_id":75012642,"comment_id":132374759,"body_markdown":"somehow the links didn&#39;t go through for what I used for my help -- here they are: [](https://intellij-support.jetbrains.com/hc/en-us/community/posts/6415280540562-Where-can-I-find-the-Create-project-from-template-and-the-Base-package-settings-when-creating-a-new-project-)\n\n[](https://stackoverflow.com/questions/51478675/error-javafx-runtime-components-are-missing-and-are-required-to-run-this-appli)\n\n[](https://stackoverflow.com/questions/71215161/eclipse-ide-error-could-not-find-or-load-main-class-javafx-fxml-caused-by-java)","body":"somehow the links didn&#39;t go through for what I used for my help -- here they are: [](<a href=\"https://intellij-support.jetbrains.com/hc/en-us/community/posts/6415280540562-Where-can-I-find-the-Create-project-from-template-and-the-Base-package-settings-when-creating-a-new-project-\" rel=\"nofollow noreferrer\">intellij-support.jetbrains.com/hc/en-us/community/posts/&hellip;</a>&zwnj;&#8203;)  [](<a href=\"https://stackoverflow.com/questions/51478675/error-javafx-runtime-components-are-missing-and-are-required-to-run-this-appli\" title=\"error javafx runtime components are missing and are required to run this appli\">stackoverflow.com/questions/51478675/&hellip;</a>)  [](<a href=\"https://stackoverflow.com/questions/71215161/eclipse-ide-error-could-not-find-or-load-main-class-javafx-fxml-caused-by-java\" title=\"eclipse ide error could not find or load main class javafx fxml caused by java\">stackoverflow.com/questions/71215161/&hellip;</a>)"},{"owner":{"account_id":1180113,"reputation":152335,"user_id":1155209,"display_name":"jewelsea"},"score":0,"creation_date":1672877958,"post_id":75012642,"comment_id":132374811,"body_markdown":"You need a space between the module-path and the next directive, e.g. NOT `javafx-sdk-19\\lib--add-modules=javafx.controls`, but instead `javafx-sdk-19\\lib --add-modules=javafx.controls`.","body":"You need a space between the module-path and the next directive, e.g. NOT <code>javafx-sdk-19\\lib--add-modules=javafx.controls</code>, but instead <code>javafx-sdk-19\\lib --add-modules=javafx.controls</code>."},{"owner":{"account_id":1180113,"reputation":152335,"user_id":1155209,"display_name":"jewelsea"},"score":0,"creation_date":1672878148,"post_id":75012642,"comment_id":132374836,"body_markdown":"The command-line information in the `...` is important for the question.  In the Idea console that you copied this text from, you can get the full command line by clicking on the `...` in the console, which will expand it, then you can copy and paste the full command line into the question.","body":"The command-line information in the <code>...</code> is important for the question.  In the Idea console that you copied this text from, you can get the full command line by clicking on the <code>...</code> in the console, which will expand it, then you can copy and paste the full command line into the question."},{"owner":{"account_id":1180113,"reputation":152335,"user_id":1155209,"display_name":"jewelsea"},"score":0,"creation_date":1672878401,"post_id":75012642,"comment_id":132374875,"body_markdown":"Also, check that you are [setting VM options](https://stackoverflow.com/a/67960821/1155209) and not program execution arguments.","body":"Also, check that you are <a href=\"https://stackoverflow.com/a/67960821/1155209\">setting VM options</a> and not program execution arguments."},{"owner":{"account_id":8532578,"reputation":39918,"user_id":6395627,"display_name":"Slaw"},"score":1,"creation_date":1672878807,"post_id":75012642,"comment_id":132374926,"body_markdown":"`C:\\Users\\wtfri\\Downloads\\openjfx-19_windows-x64_bin-sdk.zip\\javafx-sdk-19\\lib` — That looks like you&#39;re pointing to a directory inside a ZIP file. Is that what&#39;s happening? Because I don&#39;t believe that&#39;s possible (at least not by default). You should be extracting the ZIP file, then pointing to the extracted directory.","body":"<code>C:\\Users\\wtfri\\Downloads\\openjfx-19_windows-x64_bin-sdk.zip\\&zwnj;&#8203;javafx-sdk-19\\lib</code> — That looks like you&#39;re pointing to a directory inside a ZIP file. Is that what&#39;s happening? Because I don&#39;t believe that&#39;s possible (at least not by default). You should be extracting the ZIP file, then pointing to the extracted directory."},{"owner":{"account_id":1180113,"reputation":152335,"user_id":1155209,"display_name":"jewelsea"},"score":0,"creation_date":1672878946,"post_id":75012642,"comment_id":132374948,"body_markdown":"It is probably easier to get started with JavaFX using the [new project wizard](https://stackoverflow.com/questions/74764217/error-javafx-runtime-components-are-missing-with-intellij-idea-maven-and-jdk/74764297#74764297) rather than a downloaded SDK.  I recommend using the wizard instead.","body":"It is probably easier to get started with JavaFX using the <a href=\"https://stackoverflow.com/questions/74764217/error-javafx-runtime-components-are-missing-with-intellij-idea-maven-and-jdk/74764297#74764297\">new project wizard</a> rather than a downloaded SDK.  I recommend using the wizard instead."},{"owner":{"account_id":26954515,"reputation":27,"user_id":20523135,"display_name":"n00biew0lf"},"score":1,"creation_date":1672879564,"post_id":75012642,"comment_id":132375031,"body_markdown":"@Slaw I removed the &quot;.zip&quot; and it went through--looks like that was it.","body":"@Slaw I removed the &quot;.zip&quot; and it went through--looks like that was it."},{"owner":{"account_id":26954515,"reputation":27,"user_id":20523135,"display_name":"n00biew0lf"},"score":0,"creation_date":1672879600,"post_id":75012642,"comment_id":132375037,"body_markdown":"@jewelsea I&#39;ll add the space in the path as well -- thank you for that!","body":"@jewelsea I&#39;ll add the space in the path as well -- thank you for that!"}],"owner":{"account_id":26954515,"reputation":27,"user_id":20523135,"display_name":"n00biew0lf"},"comment_count":8,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":102,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1672927902,"creation_date":1672877560,"question_id":75012642,"body_markdown":"I&#39;m trying to set up an IntelliJ application, and can&#39;t get something quite right. \r\n\r\nBeing hit with an error when I try to run it:\r\n```none\r\n&quot;C:\\Program Files\\Java\\jdk-19\\bin\\java.exe&quot; ...\r\nError occurred during initialization of boot layer\r\njava.lang.module.FindException: Module javafx.controls not found\r\n\r\nProcess finished with exit code 1\r\n```\r\n\r\nI uploaded the lib folder for openjfx, as well as the pathway to the lib folder in Project Structure.\r\n\r\nI used these three pages in order to help me get to where I currently am:\r\n\r\n- [Where can I find the &quot;Create project from template&quot; and the &quot;Base package&quot; settings when creating a new project?][1]\r\n- https://stackoverflow.com/questions/51478675/error-javafx-runtime-components-are-missing-and-are-required-to-run-this-appli\r\n- https://stackoverflow.com/questions/71215161/eclipse-ide-error-could-not-find-or-load-main-class-javafx-fxml-caused-by-java\r\n\r\nIn the VM Options under Run Configurations, I put the pathway to the lib folder:\r\n&gt; --module-path C:\\Users\\wtfri\\Downloads\\openjfx-19_windows-x64_bin-sdk.zip\\javafx-sdk-19\\lib--add-modules=javafx.controls\r\n\r\nI feel like I made a mistake somewhere in the snippet of code I put into the VM options, but I&#39;m not experienced enough yet to know what&#39;s going on.\r\n\r\n\r\n  [1]: https://intellij-support.jetbrains.com/hc/en-us/community/posts/6415280540562-Where-can-I-find-the-Create-project-from-template-and-the-Base-package-settings-when-creating-a-new-project-","title":"JavaFX/IntelliJ Application Pathway Issue","body":"<p>I'm trying to set up an IntelliJ application, and can't get something quite right.</p>\n<p>Being hit with an error when I try to run it:</p>\n<pre class=\"lang-none prettyprint-override\"><code>&quot;C:\\Program Files\\Java\\jdk-19\\bin\\java.exe&quot; ...\nError occurred during initialization of boot layer\njava.lang.module.FindException: Module javafx.controls not found\n\nProcess finished with exit code 1\n</code></pre>\n<p>I uploaded the lib folder for openjfx, as well as the pathway to the lib folder in Project Structure.</p>\n<p>I used these three pages in order to help me get to where I currently am:</p>\n<ul>\n<li><a href=\"https://intellij-support.jetbrains.com/hc/en-us/community/posts/6415280540562-Where-can-I-find-the-Create-project-from-template-and-the-Base-package-settings-when-creating-a-new-project-\" rel=\"nofollow noreferrer\">Where can I find the &quot;Create project from template&quot; and the &quot;Base package&quot; settings when creating a new project?</a></li>\n<li><a href=\"https://stackoverflow.com/questions/51478675/error-javafx-runtime-components-are-missing-and-are-required-to-run-this-appli\">Error: JavaFX runtime components are missing, and are required to run this application with JDK 11</a></li>\n<li><a href=\"https://stackoverflow.com/questions/71215161/eclipse-ide-error-could-not-find-or-load-main-class-javafx-fxml-caused-by-java\">Eclipse IDE Error: Could not find or load main class javafx.fxml Caused by: java.lang.ClassNotFoundException: javafx.fxml</a></li>\n</ul>\n<p>In the VM Options under Run Configurations, I put the pathway to the lib folder:</p>\n<blockquote>\n<p>--module-path C:\\Users\\wtfri\\Downloads\\openjfx-19_windows-x64_bin-sdk.zip\\javafx-sdk-19\\lib--add-modules=javafx.controls</p>\n</blockquote>\n<p>I feel like I made a mistake somewhere in the snippet of code I put into the VM options, but I'm not experienced enough yet to know what's going on.</p>\n"},{"tags":["java","oracle","hibernate","quarkus"],"comments":[{"owner":{"account_id":1635690,"reputation":150157,"user_id":1509264,"accept_rate":58,"display_name":"MT0"},"score":0,"creation_date":1652692156,"post_id":72256360,"comment_id":127658664,"body_markdown":"Do you just need to add an `@Lob` annotation to the entity on the `JSON` column?","body":"Do you just need to add an <code>@Lob</code> annotation to the entity on the <code>JSON</code> column?"},{"owner":{"account_id":25301457,"reputation":11,"user_id":19125638,"display_name":"babl"},"score":0,"creation_date":1652693587,"post_id":72256360,"comment_id":127659114,"body_markdown":"@MT0 I tried with `@Lob` annotation, but without any change unfortunately","body":"@MT0 I tried with <code>@Lob</code> annotation, but without any change unfortunately"},{"owner":{"account_id":25301457,"reputation":11,"user_id":19125638,"display_name":"babl"},"score":0,"creation_date":1652693666,"post_id":72256360,"comment_id":127659144,"body_markdown":"I also tried with `Integer id` instead of `Long id`, consequently leading to `OraclePreparedStatement.setIntegerInternal` throwing the error","body":"I also tried with <code>Integer id</code> instead of <code>Long id</code>, consequently leading to <code>OraclePreparedStatement.setIntegerInternal</code> throwing the error"},{"owner":{"account_id":25229135,"reputation":556,"user_id":19064525,"display_name":"SeanH"},"score":0,"creation_date":1652695826,"post_id":72256360,"comment_id":127659916,"body_markdown":"Can you compare the oracle jdbc driver used in your case?  which version can work? Are those 2 scenaios using the same version of oracle jdbc driver?","body":"Can you compare the oracle jdbc driver used in your case?  which version can work? Are those 2 scenaios using the same version of oracle jdbc driver?"},{"owner":{"account_id":25301457,"reputation":11,"user_id":19125638,"display_name":"babl"},"score":0,"creation_date":1652696910,"post_id":72256360,"comment_id":127660244,"body_markdown":"@SeanH the last working version used com.oracle.database.jdbc:ojdbc8:jar:21.1.0.0:compile   -&gt; non working versions use com.oracle.database.jdbc:ojdbc11:jar:21.3.0.0:compile to com.oracle.database.jdbc:ojdbc11:jar:21.5.0.0:compile","body":"@SeanH the last working version used com.oracle.database.jdbc:ojdbc8:jar:21.1.0.0:compile   -&gt; non working versions use com.oracle.database.jdbc:ojdbc11:jar:21.3.0.0:compile to com.oracle.database.jdbc:ojdbc11:jar:21.5.0.0:compile"},{"owner":{"account_id":25301457,"reputation":11,"user_id":19125638,"display_name":"babl"},"score":0,"creation_date":1652697561,"post_id":72256360,"comment_id":127660442,"body_markdown":"@SeanH I just wanted to try with new Quarkus-version plus old (working) jdbc-driver, but this unfortunalety leads to io.quarkus.jdbc.oracle.deployment.OracleProcessor#configureAgroalConnection threw an exception: java.lang.NoSuchFieldError: AGROAL   so it&#39;s not really compatible","body":"@SeanH I just wanted to try with new Quarkus-version plus old (working) jdbc-driver, but this unfortunalety leads to io.quarkus.jdbc.oracle.deployment.OracleProcessor#configureA&zwnj;&#8203;groalConnection threw an exception: java.lang.NoSuchFieldError: AGROAL   so it&#39;s not really compatible"},{"owner":{"account_id":25229135,"reputation":556,"user_id":19064525,"display_name":"SeanH"},"score":0,"creation_date":1652707288,"post_id":72256360,"comment_id":127663799,"body_markdown":"From your description,  perhaps you can fire a BUG to Quarkus system directly.  Seems it&#39;s easy to reproduce the issue.","body":"From your description,  perhaps you can fire a BUG to Quarkus system directly.  Seems it&#39;s easy to reproduce the issue."},{"owner":{"account_id":25301457,"reputation":11,"user_id":19125638,"display_name":"babl"},"score":0,"creation_date":1652713716,"post_id":72256360,"comment_id":127666429,"body_markdown":"Already did as @SeanH advised: [here is the link to the issue](https://github.com/quarkusio/quarkus/issues/25593)","body":"Already did as @SeanH advised: <a href=\"https://github.com/quarkusio/quarkus/issues/25593\" rel=\"nofollow noreferrer\">here is the link to the issue</a>"}],"answers":[{"tags":[],"owner":{"account_id":1202593,"reputation":9569,"user_id":1173495,"accept_rate":46,"display_name":"SANN3"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1672927706,"creation_date":1672927706,"answer_id":75019709,"question_id":72256360,"body_markdown":"Escaping the column name with backtick character will solve the issue.\r\n\r\n    @Column(name = &quot;`JSON`&quot;)\r\n    private String json;","title":"oracle.jdbc.driver.OraclePreparedStatement.setLongInternal throws invalid column index","body":"<p>Escaping the column name with backtick character will solve the issue.</p>\n<pre><code>@Column(name = &quot;`JSON`&quot;)\nprivate String json;\n</code></pre>\n"}],"owner":{"account_id":25301457,"reputation":11,"user_id":19125638,"display_name":"babl"},"comment_count":8,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":339,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1672927706,"creation_date":1652690459,"question_id":72256360,"body_markdown":"From Quarkus2.6.2/Hibernate5.6.1 to our current Quarkus2.8.2/Hibernate5.6.8 we are getting an invalid column index error when updating one of our entities.\r\nThe identical code did work without any problems under Quarkus1.13.7/Hibernate5.4.29.\r\nWe are using\r\n```\r\nquarkus.datasource.db-kind=oracle\r\nquarkus.hibernate-orm.dialect = org.hibernate.dialect.Oracle9iDialect\r\n```\r\n\r\nMy question is, whether this is a problem of:\r\n\r\n 1. The Oracle driver?\r\n 2. Hibernate?\r\n 3. Quarkus?\r\n 4. Something wrong in our code?\r\n\r\nHere is the entity:\r\n```\r\n@Entity\r\n@Table(name = &quot;USER_PREFERENCES&quot;)\r\n@Data\r\n@NoArgsConstructor\r\n@AllArgsConstructor\r\n@Builder\r\n@SequenceGenerator(name = &quot;user_preferences_id_sequence&quot;, sequenceName = &quot;USER_PREFERENCES_SEQ&quot;, allocationSize = 1)\r\npublic class Preferences {\r\n\r\n    @Id\r\n    @GeneratedValue(strategy = GenerationType.SEQUENCE, generator = &quot;user_preferences_id_sequence&quot;)\r\n    @Column(name = &quot;ID&quot;)\r\n    private Long id;\r\n\r\n    @Column(name = &quot;TYP&quot;)\r\n    private String typ;\r\n\r\n    @Column(name = &quot;MODEX&quot;)\r\n    private String modex;\r\n\r\n    @Column(name = &quot;JSON&quot;)\r\n    private String json;\r\n}\r\n```\r\n\r\nAnd here is the DB-Table as created via Liquibase:\r\n```\r\n&lt;createTable tableName=&quot;USER_PREFERENCES&quot;&gt;\r\n    &lt;column name=&quot;ID&quot; type=&quot;NUMBER(38,0)&quot;&gt;\r\n        &lt;constraints nullable=&quot;false&quot; primaryKey=&quot;true&quot; /&gt;\r\n    &lt;/column&gt;\r\n    &lt;column name=&quot;MODEX&quot; type=&quot;VARCHAR2(12)&quot;/&gt;\r\n    &lt;column name=&quot;TYP&quot; type=&quot;VARCHAR2(100)&quot;/&gt;\r\n    &lt;column name=&quot;JSON&quot; type=&quot;CLOB&quot;/&gt;\r\n&lt;/createTable&gt;\r\n\r\nleading to:\r\n\r\nID\tNUMBER(38,0)\r\nMODEX\tVARCHAR2(12 CHAR)\r\nTYP\tVARCHAR2(100 CHAR)\r\nJSON\tCLOB\r\n```\r\n\r\nUpon calling `em.persist(preferences)` Hibernate creates the following output in both, the working and the not-working versions:\r\n```\r\n2022-05-16 08:50:39,914 DEBUG [org.hib.SQL] (executor-thread-1)\r\n    update\r\n        USER_PREFERENCES\r\n    set\r\n        JSON=?,\r\n        MODEX=?,\r\n        TYP=?\r\n    where\r\n        ID=?\r\nHibernate:\r\n    update\r\n        USER_PREFERENCES\r\n    set\r\n        JSON=?,\r\n        MODEX=?,\r\n        TYP=?\r\n    where\r\n        ID=?\r\n2022-05-16 08:50:39,918 TRACE [org.hib.typ.des.sql.BasicBinder] (executor-thread-1) binding parameter [1] as [VARCHAR] - [{&quot;autoSearch&quot;:true,&quot;filter&quot;:{&quot;statusId&quot;:2,&quot;userId&quot;:55,&quot;testProp&quot;:&quot;xxx&quot;}}]\r\n2022-05-16 08:50:39,919 TRACE [org.hib.typ.des.sql.BasicBinder] (executor-thread-1) binding parameter [2] as [VARCHAR] - [testB985B]\r\n2022-05-16 08:50:39,921 TRACE [org.hib.typ.des.sql.BasicBinder] (executor-thread-1) binding parameter [3] as [VARCHAR] - [search_prefs]\r\n2022-05-16 08:50:39,923 TRACE [org.hib.typ.des.sql.BasicBinder] (executor-thread-1) binding parameter [4] as [BIGINT] - [11]\r\n```\r\n\r\nIn the not-working version, this leads to\r\n```\r\n2022-05-16 09:06:51,292 DEBUG [org.hib.eng.jdb.spi.SqlExceptionHelper] (executor-thread-0) could not update: [de.my.app.preferences.entity.Preferences#11] [update USER_PREFERENCES set JSON=?, MODEX=?, TYP=? where ID=?]: java.sql.SQLException: Ung&#179;ltiger Spaltenindex\r\n        at oracle.jdbc.driver.OraclePreparedStatement.setLongInternal(OraclePreparedStatement.java:5005)\r\n        at oracle.jdbc.driver.OraclePreparedStatement.setLong(OraclePreparedStatement.java:4996)\r\n        at oracle.jdbc.driver.OraclePreparedStatementWrapper.setLong(OraclePreparedStatementWrapper.java:207)\r\n        at io.agroal.pool.wrapper.PreparedStatementWrapper.setLong(PreparedStatementWrapper.java:148)\r\n        at org.hibernate.type.descriptor.sql.BigIntTypeDescriptor$1.doBind(BigIntTypeDescriptor.java:46)\r\n        at org.hibernate.type.descriptor.sql.BasicBinder.bind(BasicBinder.java:73)\r\n        at org.hibernate.type.AbstractStandardBasicType.nullSafeSet(AbstractStandardBasicType.java:276)\r\n        at org.hibernate.type.AbstractStandardBasicType.nullSafeSet(AbstractStandardBasicType.java:271)\r\n        at org.hibernate.persister.entity.AbstractEntityPersister.dehydrateId(AbstractEntityPersister.java:3121)\r\n        at org.hibernate.persister.entity.AbstractEntityPersister.dehydrate(AbstractEntityPersister.java:3093)\r\n        at org.hibernate.persister.entity.AbstractEntityPersister.update(AbstractEntityPersister.java:3527)\r\n        ... 139 more\r\n```","title":"oracle.jdbc.driver.OraclePreparedStatement.setLongInternal throws invalid column index","body":"<p>From Quarkus2.6.2/Hibernate5.6.1 to our current Quarkus2.8.2/Hibernate5.6.8 we are getting an invalid column index error when updating one of our entities.\nThe identical code did work without any problems under Quarkus1.13.7/Hibernate5.4.29.\nWe are using</p>\n<pre><code>quarkus.datasource.db-kind=oracle\nquarkus.hibernate-orm.dialect = org.hibernate.dialect.Oracle9iDialect\n</code></pre>\n<p>My question is, whether this is a problem of:</p>\n<ol>\n<li>The Oracle driver?</li>\n<li>Hibernate?</li>\n<li>Quarkus?</li>\n<li>Something wrong in our code?</li>\n</ol>\n<p>Here is the entity:</p>\n<pre><code>@Entity\n@Table(name = &quot;USER_PREFERENCES&quot;)\n@Data\n@NoArgsConstructor\n@AllArgsConstructor\n@Builder\n@SequenceGenerator(name = &quot;user_preferences_id_sequence&quot;, sequenceName = &quot;USER_PREFERENCES_SEQ&quot;, allocationSize = 1)\npublic class Preferences {\n\n    @Id\n    @GeneratedValue(strategy = GenerationType.SEQUENCE, generator = &quot;user_preferences_id_sequence&quot;)\n    @Column(name = &quot;ID&quot;)\n    private Long id;\n\n    @Column(name = &quot;TYP&quot;)\n    private String typ;\n\n    @Column(name = &quot;MODEX&quot;)\n    private String modex;\n\n    @Column(name = &quot;JSON&quot;)\n    private String json;\n}\n</code></pre>\n<p>And here is the DB-Table as created via Liquibase:</p>\n<pre><code>&lt;createTable tableName=&quot;USER_PREFERENCES&quot;&gt;\n    &lt;column name=&quot;ID&quot; type=&quot;NUMBER(38,0)&quot;&gt;\n        &lt;constraints nullable=&quot;false&quot; primaryKey=&quot;true&quot; /&gt;\n    &lt;/column&gt;\n    &lt;column name=&quot;MODEX&quot; type=&quot;VARCHAR2(12)&quot;/&gt;\n    &lt;column name=&quot;TYP&quot; type=&quot;VARCHAR2(100)&quot;/&gt;\n    &lt;column name=&quot;JSON&quot; type=&quot;CLOB&quot;/&gt;\n&lt;/createTable&gt;\n\nleading to:\n\nID  NUMBER(38,0)\nMODEX   VARCHAR2(12 CHAR)\nTYP VARCHAR2(100 CHAR)\nJSON    CLOB\n</code></pre>\n<p>Upon calling <code>em.persist(preferences)</code> Hibernate creates the following output in both, the working and the not-working versions:</p>\n<pre><code>2022-05-16 08:50:39,914 DEBUG [org.hib.SQL] (executor-thread-1)\n    update\n        USER_PREFERENCES\n    set\n        JSON=?,\n        MODEX=?,\n        TYP=?\n    where\n        ID=?\nHibernate:\n    update\n        USER_PREFERENCES\n    set\n        JSON=?,\n        MODEX=?,\n        TYP=?\n    where\n        ID=?\n2022-05-16 08:50:39,918 TRACE [org.hib.typ.des.sql.BasicBinder] (executor-thread-1) binding parameter [1] as [VARCHAR] - [{&quot;autoSearch&quot;:true,&quot;filter&quot;:{&quot;statusId&quot;:2,&quot;userId&quot;:55,&quot;testProp&quot;:&quot;xxx&quot;}}]\n2022-05-16 08:50:39,919 TRACE [org.hib.typ.des.sql.BasicBinder] (executor-thread-1) binding parameter [2] as [VARCHAR] - [testB985B]\n2022-05-16 08:50:39,921 TRACE [org.hib.typ.des.sql.BasicBinder] (executor-thread-1) binding parameter [3] as [VARCHAR] - [search_prefs]\n2022-05-16 08:50:39,923 TRACE [org.hib.typ.des.sql.BasicBinder] (executor-thread-1) binding parameter [4] as [BIGINT] - [11]\n</code></pre>\n<p>In the not-working version, this leads to</p>\n<pre><code>2022-05-16 09:06:51,292 DEBUG [org.hib.eng.jdb.spi.SqlExceptionHelper] (executor-thread-0) could not update: [de.my.app.preferences.entity.Preferences#11] [update USER_PREFERENCES set JSON=?, MODEX=?, TYP=? where ID=?]: java.sql.SQLException: Ung³ltiger Spaltenindex\n        at oracle.jdbc.driver.OraclePreparedStatement.setLongInternal(OraclePreparedStatement.java:5005)\n        at oracle.jdbc.driver.OraclePreparedStatement.setLong(OraclePreparedStatement.java:4996)\n        at oracle.jdbc.driver.OraclePreparedStatementWrapper.setLong(OraclePreparedStatementWrapper.java:207)\n        at io.agroal.pool.wrapper.PreparedStatementWrapper.setLong(PreparedStatementWrapper.java:148)\n        at org.hibernate.type.descriptor.sql.BigIntTypeDescriptor$1.doBind(BigIntTypeDescriptor.java:46)\n        at org.hibernate.type.descriptor.sql.BasicBinder.bind(BasicBinder.java:73)\n        at org.hibernate.type.AbstractStandardBasicType.nullSafeSet(AbstractStandardBasicType.java:276)\n        at org.hibernate.type.AbstractStandardBasicType.nullSafeSet(AbstractStandardBasicType.java:271)\n        at org.hibernate.persister.entity.AbstractEntityPersister.dehydrateId(AbstractEntityPersister.java:3121)\n        at org.hibernate.persister.entity.AbstractEntityPersister.dehydrate(AbstractEntityPersister.java:3093)\n        at org.hibernate.persister.entity.AbstractEntityPersister.update(AbstractEntityPersister.java:3527)\n        ... 139 more\n</code></pre>\n"},{"tags":["javascript","java","angular","typescript","spring-boot"],"comments":[{"owner":{"account_id":1674328,"reputation":2652,"user_id":1540177,"display_name":"grekier"},"score":0,"creation_date":1672925617,"post_id":75019145,"comment_id":132385772,"body_markdown":"You could set it in the ENV and read it from there.","body":"You could set it in the ENV and read it from there."}],"answers":[{"tags":[],"owner":{"account_id":5255222,"reputation":573,"user_id":4198317,"display_name":"St&#233;phane Jeandeaux"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1672925843,"creation_date":1672925843,"answer_id":75019280,"question_id":75019145,"body_markdown":"There are many ways to do it\r\n\r\n 1. environmental variables\r\n 2. application arguments CommandLineRunner\r\n 3. configuration file\r\n\r\n","title":"Setting host and port when executing a .jar","body":"<p>There are many ways to do it</p>\n<ol>\n<li>environmental variables</li>\n<li>application arguments CommandLineRunner</li>\n<li>configuration file</li>\n</ol>\n"},{"tags":[],"owner":{"account_id":9763630,"reputation":16595,"user_id":7237884,"display_name":"Panagiotis Bougioukos"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1672927493,"creation_date":1672926849,"answer_id":75019502,"question_id":75019145,"body_markdown":"The question is very broad and could not be answered definitely with such minimal information. I want to point some things though which you must consider in what ever solution you apply to this problem.\r\n\r\nThe backend which is a spring boot app, may as well run in `localhost:8080` and that is fine. It is never however the case that an application backend is in the same machine as the Frontend. You have adopted `angular` as your frontend which means by default (if you haven&#39;t overridden this behavior) some static files would be served and executed in the browser of the end user.\r\n\r\nSo this in most cases means that the end user must know the `ip-address` or domain so that he can reach the machine that runs the backend server.\r\n\r\nSo the end situation you will have is backend running in for example `localhost:8080` in some VM and frontend using a property like `const PATH: string = &#39;http://my-backend-domain.com:8080/(...)&#39;;` so that an external user can reach the backend server from his browser.\r\n\r\nIn a very simplified scenario an effective solution would be to adapt your angular app [with this answer][1] then during deployment decide what is the domain for example where you are deploying the app like `/my-backend-domain.com` and go to `assets/data/config.json` and configure it there. This would not require any additional build of Frontend just a simple configuration. \r\n\r\n\r\n  [1]: https://stackoverflow.com/a/49904822/7237884","title":"Setting host and port when executing a .jar","body":"<p>The question is very broad and could not be answered definitely with such minimal information. I want to point some things though which you must consider in what ever solution you apply to this problem.</p>\n<p>The backend which is a spring boot app, may as well run in <code>localhost:8080</code> and that is fine. It is never however the case that an application backend is in the same machine as the Frontend. You have adopted <code>angular</code> as your frontend which means by default (if you haven't overridden this behavior) some static files would be served and executed in the browser of the end user.</p>\n<p>So this in most cases means that the end user must know the <code>ip-address</code> or domain so that he can reach the machine that runs the backend server.</p>\n<p>So the end situation you will have is backend running in for example <code>localhost:8080</code> in some VM and frontend using a property like <code>const PATH: string = 'http://my-backend-domain.com:8080/(...)';</code> so that an external user can reach the backend server from his browser.</p>\n<p>In a very simplified scenario an effective solution would be to adapt your angular app <a href=\"https://stackoverflow.com/a/49904822/7237884\">with this answer</a> then during deployment decide what is the domain for example where you are deploying the app like <code>/my-backend-domain.com</code> and go to <code>assets/data/config.json</code> and configure it there. This would not require any additional build of Frontend just a simple configuration.</p>\n"}],"owner":{"account_id":25542851,"reputation":37,"user_id":19328650,"display_name":"podehi"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":253,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":75019502,"answer_count":2,"score":0,"last_activity_date":1672927493,"creation_date":1672925210,"question_id":75019145,"body_markdown":"I have an Angular + Spring Boot app that&#39;s deployed as a single .jar file, some .properties files and a bash script to execute the .jar depending on what properties we want to use.\r\n\r\nRight now, my .ts classes have host and port set statically, e.g.:\r\n```\r\nconst PATH: string = &#39;http://localhost:8080/(...)&#39;;\r\n```\r\n\r\nIs there a way to set them dynamically while executing the .jar?","title":"Setting host and port when executing a .jar","body":"<p>I have an Angular + Spring Boot app that's deployed as a single .jar file, some .properties files and a bash script to execute the .jar depending on what properties we want to use.</p>\n<p>Right now, my .ts classes have host and port set statically, e.g.:</p>\n<pre><code>const PATH: string = 'http://localhost:8080/(...)';\n</code></pre>\n<p>Is there a way to set them dynamically while executing the .jar?</p>\n"},{"tags":["java","kubernetes","cors","cross-domain","quarkus"],"owner":{"account_id":7398157,"reputation":808,"user_id":5629392,"accept_rate":50,"display_name":"Giamma"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":32,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"closed_date":1672787282,"answer_count":0,"score":0,"last_activity_date":1672927473,"creation_date":1672763339,"question_id":74996035,"body_markdown":"I&#39;ve a pod in kubernetes with quarkus running (version 2.15.1.Final) and exposing a simple rest easy controller. Calling this endpoint from an app or a browser it returns this cors error:  &quot;This URL will not work correctly with CORS.It does not have the access-control-allow-origin header set to *. Without this header, requests from other domains cannot be made to it via a users browser.&quot;. This error is taken from sites like this: https://cors-test.codehappy.dev\r\nI&#39;ve searched on docs and I&#39;ve added in application.properties the following pros:\r\n```\r\n# CORS\r\nquarkus.http.port=8080\r\nquarkus.http.cors=true\r\nquarkus.http.cors.origins=*\r\n```\r\n\r\nBut the problem still remains. Any idea what I&#39;m doing wrong?\r\n\r\nThanks","title":"Quarkus cors error due to control-allow-origin header","body":"<p>I've a pod in kubernetes with quarkus running (version 2.15.1.Final) and exposing a simple rest easy controller. Calling this endpoint from an app or a browser it returns this cors error:  &quot;This URL will not work correctly with CORS.It does not have the access-control-allow-origin header set to *. Without this header, requests from other domains cannot be made to it via a users browser.&quot;. This error is taken from sites like this: <a href=\"https://cors-test.codehappy.dev\" rel=\"nofollow noreferrer\">https://cors-test.codehappy.dev</a>\nI've searched on docs and I've added in application.properties the following pros:</p>\n<pre><code># CORS\nquarkus.http.port=8080\nquarkus.http.cors=true\nquarkus.http.cors.origins=*\n</code></pre>\n<p>But the problem still remains. Any idea what I'm doing wrong?</p>\n<p>Thanks</p>\n"},{"tags":["java","arrays"],"comments":[{"owner":{"account_id":45213,"reputation":26348,"user_id":133203,"accept_rate":97,"display_name":"Federico klez Culloca"},"score":1,"creation_date":1672835065,"post_id":75005363,"comment_id":132361315,"body_markdown":"You want to print stuff **if**  a number is 0 or negative, not **while** a number is zero or negative. That&#39;s the difference between a condition (what you&#39;re looking for) and a loop (what you&#39;re actually using).","body":"You want to print stuff <b>if</b>  a number is 0 or negative, not <b>while</b> a number is zero or negative. That&#39;s the difference between a condition (what you&#39;re looking for) and a loop (what you&#39;re actually using)."},{"owner":{"account_id":45213,"reputation":26348,"user_id":133203,"accept_rate":97,"display_name":"Federico klez Culloca"},"score":0,"creation_date":1672835126,"post_id":75005363,"comment_id":132361335,"body_markdown":"Also, judging by the output you&#39;re expecting you&#39;ll need two loops: one to read the data and one to print &quot;Hello name&quot;.","body":"Also, judging by the output you&#39;re expecting you&#39;ll need two loops: one to read the data and one to print &quot;Hello name&quot;."}],"answers":[{"tags":[],"owner":{"account_id":26778261,"reputation":32,"user_id":20373538,"display_name":"Rixit Dobariya"},"comment_count":0,"down_vote_count":2,"up_vote_count":2,"is_accepted":true,"score":0,"last_activity_date":1672836294,"creation_date":1672836294,"answer_id":75005637,"question_id":75005363,"body_markdown":"```\r\nimport java.util.*;\r\npublic class Main {\r\n\tpublic static void main(String[] args) {\r\n\t\tScanner input = new Scanner(System.in);\r\n        System.out.println(&quot;Enter the size of an Array&quot;);\r\n        int num = input.nextInt();\r\n        if(num==0) {\r\n            System.out.println(&quot;Oh, it looks like there is no one here&quot;);\r\n        }\r\n        else if(num&lt;0) {\r\n            System.out.println(&quot;Seriously? Why so negative?&quot;);\r\n        }\r\n        else {\r\n            String numbers[] = new String[num];\r\n            input.nextLine();\r\n            for (int i=0; i&lt; num;i++) {\r\n              numbers[i]=input.nextLine();\r\n            }\r\n            for (int i=0; i&lt; numbers.length;i++) {\r\n              System.out.println(&quot;Hello, &quot; +numbers[i]);\r\n            }\r\n        }\r\n\t}\r\n}\r\n\r\n```\r\nThis is how your code will look and you&#39;ll need to add member function input.nextLine(); to read newline character, so there can&#39;t be problem regarding input","title":"Scan a number of names, print names (number==amount of names) and print Hello to each of them","body":"<pre><code>import java.util.*;\npublic class Main {\n    public static void main(String[] args) {\n        Scanner input = new Scanner(System.in);\n        System.out.println(&quot;Enter the size of an Array&quot;);\n        int num = input.nextInt();\n        if(num==0) {\n            System.out.println(&quot;Oh, it looks like there is no one here&quot;);\n        }\n        else if(num&lt;0) {\n            System.out.println(&quot;Seriously? Why so negative?&quot;);\n        }\n        else {\n            String numbers[] = new String[num];\n            input.nextLine();\n            for (int i=0; i&lt; num;i++) {\n              numbers[i]=input.nextLine();\n            }\n            for (int i=0; i&lt; numbers.length;i++) {\n              System.out.println(&quot;Hello, &quot; +numbers[i]);\n            }\n        }\n    }\n}\n\n</code></pre>\n<p>This is how your code will look and you'll need to add member function input.nextLine(); to read newline character, so there can't be problem regarding input</p>\n"},{"comments":[{"owner":{"account_id":9235242,"reputation":1488,"user_id":6860078,"display_name":"tbatch"},"score":0,"creation_date":1672866966,"post_id":75010710,"comment_id":132372507,"body_markdown":"Your answer doesn&#39;t clearly address the requirements.  The question clearly states, &quot;if the number is negative, then print &quot;Looks negative to me&quot;&quot;.  This means that a negative number is valid and warrants a valid response.  Other things of note: arrays are declared on the variable declaration, not the variable name.  `String strangers[] = new String[num]` should be rewritten as `String[] strangers = new String[num]`.  Additionally, it&#39;s usually helpful to provide explanations of your answers and possible supporting information.  You can find more information on how to write good answers in the","body":"Your answer doesn&#39;t clearly address the requirements.  The question clearly states, &quot;if the number is negative, then print &quot;Looks negative to me&quot;&quot;.  This means that a negative number is valid and warrants a valid response.  Other things of note: arrays are declared on the variable declaration, not the variable name.  <code>String strangers[] = new String[num]</code> should be rewritten as <code>String[] strangers = new String[num]</code>.  Additionally, it&#39;s usually helpful to provide explanations of your answers and possible supporting information.  You can find more information on how to write good answers in the"}],"tags":[],"owner":{"account_id":20887307,"reputation":21,"user_id":15343591,"display_name":"senasimsek"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1672927206,"creation_date":1672862685,"answer_id":75010710,"question_id":75005363,"body_markdown":"With using do while loop you can ask the number to the user again and again if it is negative number.\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n    import java.util.Scanner;\r\n    public class Main\r\n      {\r\n\t    public static void main(String[] args) {\r\n\t    int num;\r\n\t    String name;\r\n\t    Scanner scan = new Scanner(System.in);\r\n\t    \r\n\t    //The loop asks a number till the number is nonnegative\r\n\t    do{\r\n\t        \r\n\t\tSystem.out.print(&quot;Please enter the number of strangers: &quot;);\r\n\t\tnum = scan.nextInt();\r\n\t\t\r\n\t\tif(num&lt;0) {\r\n\t\t    \r\n\t\t    System.out.println(&quot;It cannot be a negative number try again.&quot;);\r\n\t\t}else if(num==0) {\r\n\t\t    \r\n\t\t    System.out.println(&quot;Oh, it looks like there is no one here&quot;);\r\n\t\t    break;\r\n\t\t}else{\r\n\t\t    \r\n\t\t    String[] strangers = new String[num];\r\n\t\t    //Takes the names and puts them to the strangers array\r\n\t\t    for(int i=0;i&lt;num;i++) {\r\n\t\t        System.out.print(&quot;Name &quot; + (i+1) + &quot; : &quot;);\r\n\t\t        name = scan.next();\r\n\t\t        strangers[i] = name;\r\n\t\t    }\r\n\t\t    \r\n\t\t    //Printing the array\r\n\t\t    for(int j=0; j&lt;num; j++) {\r\n\t\t        System.out.println(&quot;Hello, &quot; + strangers[j]);\r\n\t\t    }\r\n\t\t    break;\r\n\t\t    \r\n\t\t}\r\n\t    }while(num&lt;0);\r\n\t\r\n\t}\r\n    }\r\n","title":"Scan a number of names, print names (number==amount of names) and print Hello to each of them","body":"<p>With using do while loop you can ask the number to the user again and again if it is negative number.</p>\n<pre><code>import java.util.Scanner;\npublic class Main\n  {\n    public static void main(String[] args) {\n    int num;\n    String name;\n    Scanner scan = new Scanner(System.in);\n    \n    //The loop asks a number till the number is nonnegative\n    do{\n        \n    System.out.print(&quot;Please enter the number of strangers: &quot;);\n    num = scan.nextInt();\n    \n    if(num&lt;0) {\n        \n        System.out.println(&quot;It cannot be a negative number try again.&quot;);\n    }else if(num==0) {\n        \n        System.out.println(&quot;Oh, it looks like there is no one here&quot;);\n        break;\n    }else{\n        \n        String[] strangers = new String[num];\n        //Takes the names and puts them to the strangers array\n        for(int i=0;i&lt;num;i++) {\n            System.out.print(&quot;Name &quot; + (i+1) + &quot; : &quot;);\n            name = scan.next();\n            strangers[i] = name;\n        }\n        \n        //Printing the array\n        for(int j=0; j&lt;num; j++) {\n            System.out.println(&quot;Hello, &quot; + strangers[j]);\n        }\n        break;\n        \n    }\n    }while(num&lt;0);\n\n}\n}\n</code></pre>\n"}],"owner":{"account_id":27430364,"reputation":19,"user_id":20927173,"display_name":"Kris"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":82,"favorite_count":0,"down_vote_count":2,"up_vote_count":2,"accepted_answer_id":75005637,"answer_count":2,"score":0,"last_activity_date":1672927206,"creation_date":1672834836,"question_id":75005363,"body_markdown":"I am new to Java and have a task: Scanner a number of &quot;strangers&#39; &quot; names, then read these names and print &quot;Hello+name&quot; to the console. If number of strangers is zero, then print &quot;Looks empty&quot;, if the number is negative, then print &quot;Looks negative to me&quot;.\r\nSo the input and output to console should look like this:\r\n\r\n    3\r\n    Den\r\n    Ken\r\n    Mel\r\n    Hello, Den\r\n    Hello, Ken\r\n    Hello, Mel\r\n\r\nSo I have this code edited from someone with some related task, but it seems I miss something as I am new to Java...\r\n\r\n    Scanner input = new Scanner(System.in);\r\n    System.out.println(&quot;Enter the size of an Array&quot;);\r\n    int num = input.nextInt();\r\n    \r\n    while (num==0) {\r\n      System.out.println(&quot;Oh, it looks like there is no one here&quot;);\r\n      break;\r\n    \r\n    } while (num&lt;0) {\r\n      System.out.println(&quot;Seriously? Why so negative?&quot;);\r\n      break;\r\n    }\r\n    \r\n    String[] numbers = new String[num];\r\n    for (int i=0; i&lt; numbers.length;i++) {\r\n      System.out.println(&quot;Hello, &quot; +input.nextLine());\r\n    }","title":"Scan a number of names, print names (number==amount of names) and print Hello to each of them","body":"<p>I am new to Java and have a task: Scanner a number of &quot;strangers' &quot; names, then read these names and print &quot;Hello+name&quot; to the console. If number of strangers is zero, then print &quot;Looks empty&quot;, if the number is negative, then print &quot;Looks negative to me&quot;.\nSo the input and output to console should look like this:</p>\n<pre><code>3\nDen\nKen\nMel\nHello, Den\nHello, Ken\nHello, Mel\n</code></pre>\n<p>So I have this code edited from someone with some related task, but it seems I miss something as I am new to Java...</p>\n<pre><code>Scanner input = new Scanner(System.in);\nSystem.out.println(&quot;Enter the size of an Array&quot;);\nint num = input.nextInt();\n\nwhile (num==0) {\n  System.out.println(&quot;Oh, it looks like there is no one here&quot;);\n  break;\n\n} while (num&lt;0) {\n  System.out.println(&quot;Seriously? Why so negative?&quot;);\n  break;\n}\n\nString[] numbers = new String[num];\nfor (int i=0; i&lt; numbers.length;i++) {\n  System.out.println(&quot;Hello, &quot; +input.nextLine());\n}\n</code></pre>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":20415010,"reputation":29,"user_id":14977444,"display_name":"eritten"},"score":0,"creation_date":1672629179,"post_id":74978611,"comment_id":132315528,"body_markdown":"Please someone should help me. I have been trying to fix it but still have not been able to fix it.","body":"Please someone should help me. I have been trying to fix it but still have not been able to fix it."},{"owner":{"account_id":6520,"reputation":10523,"user_id":11002,"accept_rate":75,"display_name":"tgdavies"},"score":0,"creation_date":1672629647,"post_id":74978611,"comment_id":132315576,"body_markdown":"You need to make sure that that class is on the classpath when you run your program.","body":"You need to make sure that that class is on the classpath when you run your program."},{"owner":{"account_id":20415010,"reputation":29,"user_id":14977444,"display_name":"eritten"},"score":0,"creation_date":1672629982,"post_id":74978611,"comment_id":132315609,"body_markdown":"Please I am using maven and  I have specified the freetts 1.2.2  dependency in the pom.xml file.","body":"Please I am using maven and  I have specified the freetts 1.2.2  dependency in the pom.xml file."},{"owner":{"account_id":6520,"reputation":10523,"user_id":11002,"accept_rate":75,"display_name":"tgdavies"},"score":0,"creation_date":1672632469,"post_id":74978611,"comment_id":132315835,"body_markdown":"How are you running your program?","body":"How are you running your program?"},{"owner":{"account_id":6520,"reputation":10523,"user_id":11002,"accept_rate":75,"display_name":"tgdavies"},"score":0,"creation_date":1672633143,"post_id":74978611,"comment_id":132315912,"body_markdown":"https://freetts.sourceforge.io/#no_jsapi might help","body":"<a href=\"https://freetts.sourceforge.io/#no_jsapi\" rel=\"nofollow noreferrer\">freetts.sourceforge.io/#no_jsapi</a> might help"}],"owner":{"account_id":20415010,"reputation":29,"user_id":14977444,"display_name":"eritten"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":19,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"closed_date":1672926816,"answer_count":0,"score":0,"last_activity_date":1672926799,"creation_date":1672626581,"question_id":74978611,"body_markdown":"I am new to freetts and I want to convert text to speech, but I am getting class not found exception.\r\n\r\nMy source code\r\n```java\r\npackage com.sewonet;\r\n\r\nimport com.sun.speech.freetts.VoiceManager;\r\nimport com.sun.speech.freetts.Voice;\r\n\r\npublic class App {\r\n    public static void main(String[] args) throws Exception{\r\n        VoiceManager voiceManager = VoiceManager.getInstance();\r\n        Voice voice = VoiceManager.getVoice(&quot;kelvin16&quot;);\r\n        voice.speak(&quot;I love java&quot;);\r\n    }\r\n\r\n}\r\n```\r\nCode compilation does not generate any error but generate the below error at runtime.\r\n```none\r\nException in thread &quot;main&quot; java.lang.NoClassDefFoundError: com/sun/speech/freetts/VoiceManager\r\n        at com.sewonet.App.main(App.java:7)\r\nCaused by: java.lang.ClassNotFoundException: com.sun.speech.freetts.VoiceManager\r\n        at java.base/jdk.internal.loader.BuiltinClassLoader.loadClass(BuiltinClassLoader.java:641)\r\n        at java.base/jdk.internal.loader.ClassLoaders$AppClassLoader.loadClass(ClassLoaders.java:188)\r\n        at java.base/java.lang.ClassLoader.loadClass(ClassLoader.java:521)\r\n        ... 1 more\r\n```\r\n\r\n\r\n","title":"How to fix class not found error exception in freetts 1.2.2 VoiceManager in Maven on Windows","body":"<p>I am new to freetts and I want to convert text to speech, but I am getting class not found exception.</p>\n<p>My source code</p>\n<pre class=\"lang-java prettyprint-override\"><code>package com.sewonet;\n\nimport com.sun.speech.freetts.VoiceManager;\nimport com.sun.speech.freetts.Voice;\n\npublic class App {\n    public static void main(String[] args) throws Exception{\n        VoiceManager voiceManager = VoiceManager.getInstance();\n        Voice voice = VoiceManager.getVoice(&quot;kelvin16&quot;);\n        voice.speak(&quot;I love java&quot;);\n    }\n\n}\n</code></pre>\n<p>Code compilation does not generate any error but generate the below error at runtime.</p>\n<pre class=\"lang-none prettyprint-override\"><code>Exception in thread &quot;main&quot; java.lang.NoClassDefFoundError: com/sun/speech/freetts/VoiceManager\n        at com.sewonet.App.main(App.java:7)\nCaused by: java.lang.ClassNotFoundException: com.sun.speech.freetts.VoiceManager\n        at java.base/jdk.internal.loader.BuiltinClassLoader.loadClass(BuiltinClassLoader.java:641)\n        at java.base/jdk.internal.loader.ClassLoaders$AppClassLoader.loadClass(ClassLoaders.java:188)\n        at java.base/java.lang.ClassLoader.loadClass(ClassLoader.java:521)\n        ... 1 more\n</code></pre>\n"},{"tags":["java","android","listener"],"comments":[{"owner":{"account_id":2675582,"reputation":1012,"user_id":2312064,"display_name":"krzydyn"},"score":1,"creation_date":1660294360,"post_id":73331467,"comment_id":129503664,"body_markdown":"make the count variable an upper class field, maybe you need to add sth to check if count is ready.","body":"make the count variable an upper class field, maybe you need to add sth to check if count is ready."},{"owner":{"account_id":17575058,"reputation":2200,"user_id":12749998,"display_name":"Kozmotronik"},"score":0,"creation_date":1660294693,"post_id":73331467,"comment_id":129503765,"body_markdown":"You cannot get the count value instantly because the listener is an asnchronous call and it will be called somewhere in the future depending on its events. Where else do you need to use the count?","body":"You cannot get the count value instantly because the listener is an asnchronous call and it will be called somewhere in the future depending on its events. Where else do you need to use the count?"},{"owner":{"account_id":12869869,"reputation":1426,"user_id":9308731,"display_name":"CrackerKSR"},"score":0,"creation_date":1660295620,"post_id":73331467,"comment_id":129504070,"body_markdown":"@Kozmotronik I just wanted this count to avoid index out bound error while retrieving  the bitmaps using that decoder . I cant get bitmaps in onStart(). it only works outside of listener. But noticed that sharedpref works fine. How it gives values  in synch way. &#129300;","body":"@Kozmotronik I just wanted this count to avoid index out bound error while retrieving  the bitmaps using that decoder . I cant get bitmaps in onStart(). it only works outside of listener. But noticed that sharedpref works fine. How it gives values  in synch way. 🤔"}],"answers":[{"comments":[{"owner":{"account_id":12869869,"reputation":1426,"user_id":9308731,"display_name":"CrackerKSR"},"score":0,"creation_date":1660296629,"post_id":73331647,"comment_id":129504391,"body_markdown":"You mean I should keep running loop and check if value set yet or not &#129300;. I think that will surely work but not reliable way. It seems Risky.","body":"You mean I should keep running loop and check if value set yet or not 🤔. I think that will surely work but not reliable way. It seems Risky."},{"owner":{"account_id":39574,"reputation":24267,"user_id":114226,"accept_rate":79,"display_name":"PeterMmm"},"score":0,"creation_date":1660297720,"post_id":73331647,"comment_id":129504753,"body_markdown":"It is not clear what you want to do with the counter outside the context (closure) of `WebPDecoder.RenderListener`. No, looping in the main thread, of course, no. Probably you may run another thread (via a Handler) to log count periodically. But you don&#39;t explain your requirement where/when to use count.","body":"It is not clear what you want to do with the counter outside the context (closure) of <code>WebPDecoder.RenderListener</code>. No, looping in the main thread, of course, no. Probably you may run another thread (via a Handler) to log count periodically. But you don&#39;t explain your requirement where/when to use count."},{"owner":{"account_id":12869869,"reputation":1426,"user_id":9308731,"display_name":"CrackerKSR"},"score":0,"creation_date":1660298025,"post_id":73331647,"comment_id":129504856,"body_markdown":"want to get bitmaps using getFrameBitamap(index). But frameCount must be known to avoid the &#39;indexOutOfBound&#39;. getting bitmaps is not available within overriden methods onStart() , OnEnd() and OnRender(). outside of listeners I can access the bitamaps. So here I need frameCount.","body":"want to get bitmaps using getFrameBitamap(index). But frameCount must be known to avoid the &#39;indexOutOfBound&#39;. getting bitmaps is not available within overriden methods onStart() , OnEnd() and OnRender(). outside of listeners I can access the bitamaps. So here I need frameCount."},{"owner":{"account_id":12869869,"reputation":1426,"user_id":9308731,"display_name":"CrackerKSR"},"score":0,"creation_date":1660298374,"post_id":73331647,"comment_id":129505006,"body_markdown":"I have update code snippet in question","body":"I have update code snippet in question"}],"tags":[],"owner":{"account_id":39574,"reputation":24267,"user_id":114226,"accept_rate":79,"display_name":"PeterMmm"},"comment_count":4,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1660294572,"creation_date":1660294572,"answer_id":73331647,"question_id":73331467,"body_markdown":"To get around the `must be final` you may use a \r\n\r\n    final AtomicInteger count = new AtomicInteger(0);\r\n\r\nand then\r\n\r\n    count.addAndGet(1);\r\n\r\nAnyway, line\r\n\r\n    Log.d(TAG,&quot;count : &quot;+count.get());\r\n\r\nwill always return 0, as long it is before `decoder.start()`. Probably you want to put into a Handler and run periodically ?.\r\n ","title":"How to get value outside of asynchronous listener methods","body":"<p>To get around the <code>must be final</code> you may use a</p>\n<pre><code>final AtomicInteger count = new AtomicInteger(0);\n</code></pre>\n<p>and then</p>\n<pre><code>count.addAndGet(1);\n</code></pre>\n<p>Anyway, line</p>\n<pre><code>Log.d(TAG,&quot;count : &quot;+count.get());\n</code></pre>\n<p>will always return 0, as long it is before <code>decoder.start()</code>. Probably you want to put into a Handler and run periodically ?.</p>\n"},{"tags":[],"owner":{"account_id":17575058,"reputation":2200,"user_id":12749998,"display_name":"Kozmotronik"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1660296738,"creation_date":1660296738,"answer_id":73332054,"question_id":73331467,"body_markdown":"Well a more effective way to achieve to control this would be using a LiveData object to keep track of the active counts.\r\n\r\nDefine the count variable as a `MutableLiveData&lt;Integer&gt;` and update this livedata whenever the `onStart` method called. This may be much faster than writing to and reading from the shared preferences. See the example snippet for an example implementation.\r\n\r\n```lang-java\r\n// Define the live data object within a correct scope in your class\r\nMutableLiveData&lt;Integer&gt; mldCount = new MutableLiveData&lt;&gt;(0);\r\n\r\n// In the part where you want to control and avoid the index out of bounds observe the count live data\r\nmldCount.observe(&lt;Pass the lifecycle owner here&gt;, count -&gt; {\r\n    // Check the new count here\r\n});\r\n\r\npublic void Test5 (String path){\r\n   \r\n   decoder.addRenderListener(\r\n     new WebPDecoder.RenderListener(){\r\n       @Override\r\n       public void onStart(){\r\n\r\n         // 2. assigning value to count variable\r\n         int count = decoder.getFrameCount();\r\n         // If this callback is called from a background thread use:\r\n         mldCount.postValue(count);\r\n         \r\n         // If it is called in main thread then use:\r\n         mldCount.setValue(count);\r\n         Log.d(TAG, count); count is non zero\r\n\r\n       }\r\n       @Override\r\n       public void onRender(ByteBuffer byebuffer){}\r\n       \r\n       @Override\r\n       public void onEnd(){\r\n         decoder.stop();\r\n       }\r\n     }\r\n   );\r\n\r\n   // This will not show the valid actual values\r\n   Log.d(TAG,&quot;count : &quot;+mldCount.getValue());  // still  count is 0\r\n\r\n   decoder.start();\r\n\r\n }\r\n```\r\n","title":"How to get value outside of asynchronous listener methods","body":"<p>Well a more effective way to achieve to control this would be using a LiveData object to keep track of the active counts.</p>\n<p>Define the count variable as a <code>MutableLiveData&lt;Integer&gt;</code> and update this livedata whenever the <code>onStart</code> method called. This may be much faster than writing to and reading from the shared preferences. See the example snippet for an example implementation.</p>\n<pre class=\"lang-java prettyprint-override\"><code>// Define the live data object within a correct scope in your class\nMutableLiveData&lt;Integer&gt; mldCount = new MutableLiveData&lt;&gt;(0);\n\n// In the part where you want to control and avoid the index out of bounds observe the count live data\nmldCount.observe(&lt;Pass the lifecycle owner here&gt;, count -&gt; {\n    // Check the new count here\n});\n\npublic void Test5 (String path){\n   \n   decoder.addRenderListener(\n     new WebPDecoder.RenderListener(){\n       @Override\n       public void onStart(){\n\n         // 2. assigning value to count variable\n         int count = decoder.getFrameCount();\n         // If this callback is called from a background thread use:\n         mldCount.postValue(count);\n         \n         // If it is called in main thread then use:\n         mldCount.setValue(count);\n         Log.d(TAG, count); count is non zero\n\n       }\n       @Override\n       public void onRender(ByteBuffer byebuffer){}\n       \n       @Override\n       public void onEnd(){\n         decoder.stop();\n       }\n     }\n   );\n\n   // This will not show the valid actual values\n   Log.d(TAG,&quot;count : &quot;+mldCount.getValue());  // still  count is 0\n\n   decoder.start();\n\n }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":12869869,"reputation":1426,"user_id":9308731,"display_name":"CrackerKSR"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1660317423,"creation_date":1660317423,"answer_id":73336353,"question_id":73331467,"body_markdown":"I got solution but won&#39;t accept is as answer beacuse it is not a solution for specified problem in question.\r\n\r\nI invoked ```decoder.stop()``` in override ```OnStart()``` and then I could access the Bitmaps after stopping. So now no need to get frameCount outside of decoder. ","title":"How to get value outside of asynchronous listener methods","body":"<p>I got solution but won't accept is as answer beacuse it is not a solution for specified problem in question.</p>\n<p>I invoked <code>decoder.stop()</code> in override <code>OnStart()</code> and then I could access the Bitmaps after stopping. So now no need to get frameCount outside of decoder.</p>\n"}],"owner":{"account_id":12869869,"reputation":1426,"user_id":9308731,"display_name":"CrackerKSR"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":120,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":3,"score":0,"last_activity_date":1672926668,"creation_date":1660293612,"question_id":73331467,"body_markdown":"\r\nI want to get frame counts which can be obtain on listener&#39;s overridden methods.\r\n\r\nBut if I use try to assign value to outer variable I get error.\r\n```error: local variables referenced from an inner class must be final or effectively final```\r\n\r\n``` java\r\n\r\npublic void Test5 (String path, Callback cb){\r\n   // 1. initialised count variable\r\n   int count = 0;\r\n   \r\n   decoder.addRenderListener(\r\n     new WebPDecoder.RenderListener(){\r\n       @Override\r\n       public void onStart(){\r\n\r\n         // 2. assigning value to count variable\r\n         count = decoder.getFrameCount();\r\n         Log.d(TAG, count); count is non zero\r\n\r\n       }\r\n       @Override\r\n       public void onRender(ByteBuffer byebuffer){}\r\n       \r\n       @Override\r\n       public void onEnd(){\r\n         decoder.stop();\r\n       }\r\n     }\r\n   );\r\n   decoder.start();\r\n   \r\n   // 3. accessing the count variable\r\n   Log.d(TAG,&quot;count : &quot;+count);  // still  count is 0\r\n   \r\n   // this won&#39;t run as count is 0\r\n   for(int i=0; i &lt; count i++)\r\n       bitmaps.add(decoder.getFrameBitmap(i));\r\n       // and getFrameBitmap(i) is not useful inside above listener overriden methods. This returns bitmap only outside of listener.\r\n }\r\n```\r\n\r\nI tried SharedPreference and it works but I can&#39;t use for reliablity and also app crashes.\r\n\r\nI also Tried to use custom class. It does not give error But the value is still zero.\r\n```MyData frameData = new MyData();\r\nframeData.setFrameCount(frameCount); // setting in onStart()\r\nframeData.getFrameCount(); // getting out of listener\r\nbut still zero because it executes before assignment\r\n```\r\n\r\n\r\nI wonder how sharedPreference gives non zero value but not this custom class\r\n","title":"How to get value outside of asynchronous listener methods","body":"<p>I want to get frame counts which can be obtain on listener's overridden methods.</p>\n<p>But if I use try to assign value to outer variable I get error.\n<code>error: local variables referenced from an inner class must be final or effectively final</code></p>\n<pre class=\"lang-java prettyprint-override\"><code>\npublic void Test5 (String path, Callback cb){\n   // 1. initialised count variable\n   int count = 0;\n   \n   decoder.addRenderListener(\n     new WebPDecoder.RenderListener(){\n       @Override\n       public void onStart(){\n\n         // 2. assigning value to count variable\n         count = decoder.getFrameCount();\n         Log.d(TAG, count); count is non zero\n\n       }\n       @Override\n       public void onRender(ByteBuffer byebuffer){}\n       \n       @Override\n       public void onEnd(){\n         decoder.stop();\n       }\n     }\n   );\n   decoder.start();\n   \n   // 3. accessing the count variable\n   Log.d(TAG,&quot;count : &quot;+count);  // still  count is 0\n   \n   // this won't run as count is 0\n   for(int i=0; i &lt; count i++)\n       bitmaps.add(decoder.getFrameBitmap(i));\n       // and getFrameBitmap(i) is not useful inside above listener overriden methods. This returns bitmap only outside of listener.\n }\n</code></pre>\n<p>I tried SharedPreference and it works but I can't use for reliablity and also app crashes.</p>\n<p>I also Tried to use custom class. It does not give error But the value is still zero.</p>\n<pre><code>frameData.setFrameCount(frameCount); // setting in onStart()\nframeData.getFrameCount(); // getting out of listener\nbut still zero because it executes before assignment\n</code></pre>\n<p>I wonder how sharedPreference gives non zero value but not this custom class</p>\n"},{"tags":["java","android","rad-studio"],"answers":[{"comments":[{"owner":{"account_id":3781691,"reputation":725,"user_id":3140961,"accept_rate":65,"display_name":"JimPapas"},"score":0,"creation_date":1603374610,"post_id":64483418,"comment_id":114022043,"body_markdown":"I do : File/new/multidevice app-Delphi/blanc application/android 32b --&gt; run --&gt; error","body":"I do : File/new/multidevice app-Delphi/blanc application/android 32b --&gt; run --&gt; error"},{"owner":{"account_id":3781691,"reputation":725,"user_id":3140961,"accept_rate":65,"display_name":"JimPapas"},"score":0,"creation_date":1603374878,"post_id":64483418,"comment_id":114022182,"body_markdown":"I won&#39;t use keytool (no cryptografy needed). My RAD IDE does it. Is there a setting to avoid this ?","body":"I won&#39;t use keytool (no cryptografy needed). My RAD IDE does it. Is there a setting to avoid this ?"}],"tags":[],"owner":{"account_id":47283,"reputation":703927,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"comment_count":2,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1603373697,"creation_date":1603373697,"answer_id":64483418,"question_id":64481883,"body_markdown":"&gt; &quot;Is this meaning something?&quot;  \r\n\r\nThose arguments are for the `keytool` command not the `java` command.\r\n\r\nSee the [Keytool manual page](https://docs.oracle.com/en/java/javase/11/tools/keytool.html).\r\n\r\nIf your sample Android app is actually trying to run `keytool`, it is doing it the wrong way.  However, I don&#39;t think we can help beyond that unless you share the code with us so that we can understand what it is trying to do.\r\n\r\n","title":"RAD studio 10.3.3 could not create java virtual machine","body":"<blockquote>\n<p>&quot;Is this meaning something?&quot;</p>\n</blockquote>\n<p>Those arguments are for the <code>keytool</code> command not the <code>java</code> command.</p>\n<p>See the <a href=\"https://docs.oracle.com/en/java/javase/11/tools/keytool.html\" rel=\"nofollow noreferrer\">Keytool manual page</a>.</p>\n<p>If your sample Android app is actually trying to run <code>keytool</code>, it is doing it the wrong way.  However, I don't think we can help beyond that unless you share the code with us so that we can understand what it is trying to do.</p>\n"},{"comments":[{"owner":{"account_id":645606,"reputation":14486,"user_id":903651,"accept_rate":81,"display_name":"Adrian Maire"},"score":0,"creation_date":1673364957,"post_id":64483954,"comment_id":132479407,"body_markdown":"Default value point to java.exe.... so that is probably the trigger.","body":"Default value point to java.exe.... so that is probably the trigger."}],"tags":[],"owner":{"account_id":3781691,"reputation":725,"user_id":3140961,"accept_rate":65,"display_name":"JimPapas"},"comment_count":1,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1609603386,"creation_date":1603375416,"answer_id":64483954,"question_id":64481883,"body_markdown":"Ok, I found my mistake.\r\n\r\nIn tools/options/deployment/SDKmanager/Java/keytool location I had the (wrong value) java.exe instead of keytool.exe\r\n\r\nMany thanks for your help","title":"RAD studio 10.3.3 could not create java virtual machine","body":"<p>Ok, I found my mistake.</p>\n<p>In tools/options/deployment/SDKmanager/Java/keytool location I had the (wrong value) java.exe instead of keytool.exe</p>\n<p>Many thanks for your help</p>\n"}],"owner":{"account_id":3781691,"reputation":725,"user_id":3140961,"accept_rate":65,"display_name":"JimPapas"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":3041,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":2,"score":2,"last_activity_date":1672926446,"creation_date":1603368436,"question_id":64481883,"body_markdown":"I already checked the issue but i didn&#39;t found a solution.\r\n\r\nI use RAD STUDIO 10.3.3 in Win 10/**64b** and i have installed java 1.8_171/**32b**\r\n\r\nI try to create a new (sample) android application **32b** and it builds ok.\r\n\r\nWhen i try to run it raises the error `could not create java virtual machine` followed by\r\n`[Exec Error] EXEC(1): A fatal exception has occurred. Program will exit.`\r\n\r\nand\r\n\r\n`[Exec Error] The command &quot;&quot;C:\\Program Files (x86)\\Java\\jdk1.8.0_171\\bin\\java.exe&quot; -genkey -v -keystore &quot;C:\\Users\\DELL\\AppData\\Roaming\\Embarcadero\\BDS\\20.0\\debug.keystore&quot; -storepass android -alias androiddebugkey -keypass android -dname &quot;cn=Unnamed, ou=Mobile Organization, o=Embarcadero Technologies, l=San Francisco, s=California, c=US&quot; -keyalg RSA -keysize 2048 -validity 10000&quot; exited with code 1.`\r\n\r\nAs i can see java.exe does not support parameter `-keypass` and all the others following it. Is this meaning something ?\r\nPlease help me to solve this problem\r\n","title":"RAD studio 10.3.3 could not create java virtual machine","body":"<p>I already checked the issue but i didn't found a solution.</p>\n<p>I use RAD STUDIO 10.3.3 in Win 10/<strong>64b</strong> and i have installed java 1.8_171/<strong>32b</strong></p>\n<p>I try to create a new (sample) android application <strong>32b</strong> and it builds ok.</p>\n<p>When i try to run it raises the error <code>could not create java virtual machine</code> followed by\n<code>[Exec Error] EXEC(1): A fatal exception has occurred. Program will exit.</code></p>\n<p>and</p>\n<p><code>[Exec Error] The command &quot;&quot;C:\\Program Files (x86)\\Java\\jdk1.8.0_171\\bin\\java.exe&quot; -genkey -v -keystore &quot;C:\\Users\\DELL\\AppData\\Roaming\\Embarcadero\\BDS\\20.0\\debug.keystore&quot; -storepass android -alias androiddebugkey -keypass android -dname &quot;cn=Unnamed, ou=Mobile Organization, o=Embarcadero Technologies, l=San Francisco, s=California, c=US&quot; -keyalg RSA -keysize 2048 -validity 10000&quot; exited with code 1.</code></p>\n<p>As i can see java.exe does not support parameter <code>-keypass</code> and all the others following it. Is this meaning something ?\nPlease help me to solve this problem</p>\n"},{"tags":["java","excel","apache-poi","xlsx"],"comments":[{"owner":{"account_id":12646737,"reputation":1077,"user_id":9192223,"display_name":"hiren"},"score":2,"creation_date":1672656022,"post_id":74981363,"comment_id":132320071,"body_markdown":"Might help: https://stackoverflow.com/questions/58147646/found-interface-org-apache-poi-util-poilogger-but-class-was-expected-error","body":"Might help: <a href=\"https://stackoverflow.com/questions/58147646/found-interface-org-apache-poi-util-poilogger-but-class-was-expected-error\" title=\"found interface org apache poi util poilogger but class was expected error\">stackoverflow.com/questions/58147646/&hellip;</a>"}],"owner":{"account_id":27410414,"reputation":1,"user_id":20910422,"display_name":"Taimoor Pasha"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":19,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"closed_date":1672926190,"answer_count":0,"score":0,"last_activity_date":1672926177,"creation_date":1672655845,"question_id":74981363,"body_markdown":"I am trying to read my excel file using following method:\r\n\r\n```\r\npublic static String readDataFromExcel(String fileName, int rowNumber, \r\n    int columnNumber) throws IOException {\r\n    String valueOfCell;\r\n    XSSFWorkbook sheetWorkBook = null;\r\n    try {\r\n        FileInputStream fis = new FileInputStream(fileName);\r\n        sheetWorkBook = new XSSFWorkbook(fis);\r\n    } catch (IOException e) {\r\n        e.printStackTrace();\r\n    }\r\n    assert sheetWorkBook != null;\r\n    Sheet sheet = sheetWorkBook.getSheetAt(0);\r\n    Row row = sheet.getRow(rowNumber);\r\n    Cell cell = row.getCell(columnNumber);\r\n    valueOfCell = cell.getStringCellValue();\r\n    return valueOfCell;\r\n}\r\n\r\npublic static void main(String [] args) throws IOException {\r\n    System.out.println(readDataFromExcel(filePathInString, 1, 0));\r\n}\r\n```\r\n\r\nUpon executing, I am getting this message:\r\n\r\n&gt; Exception in thread &quot;main&quot; java.lang.IncompatibleClassChangeError:\r\n&gt; Found interface org.apache.poi.util.POILogger, but class was expected\r\n\r\nI need to know what I am doing wrong.","title":"Found interface org.apache.poi.util.POILogger, but class was expected","body":"<p>I am trying to read my excel file using following method:</p>\n<pre><code>public static String readDataFromExcel(String fileName, int rowNumber, \n    int columnNumber) throws IOException {\n    String valueOfCell;\n    XSSFWorkbook sheetWorkBook = null;\n    try {\n        FileInputStream fis = new FileInputStream(fileName);\n        sheetWorkBook = new XSSFWorkbook(fis);\n    } catch (IOException e) {\n        e.printStackTrace();\n    }\n    assert sheetWorkBook != null;\n    Sheet sheet = sheetWorkBook.getSheetAt(0);\n    Row row = sheet.getRow(rowNumber);\n    Cell cell = row.getCell(columnNumber);\n    valueOfCell = cell.getStringCellValue();\n    return valueOfCell;\n}\n\npublic static void main(String [] args) throws IOException {\n    System.out.println(readDataFromExcel(filePathInString, 1, 0));\n}\n</code></pre>\n<p>Upon executing, I am getting this message:</p>\n<blockquote>\n<p>Exception in thread &quot;main&quot; java.lang.IncompatibleClassChangeError:\nFound interface org.apache.poi.util.POILogger, but class was expected</p>\n</blockquote>\n<p>I need to know what I am doing wrong.</p>\n"},{"tags":["python","java","algorithm","recursion","bucket"],"comments":[{"owner":{"account_id":95372,"reputation":114366,"user_id":259769,"accept_rate":93,"display_name":"Enigmativity"},"score":0,"creation_date":1672878387,"post_id":75012388,"comment_id":132374873,"body_markdown":"What language is this?","body":"What language is this?"},{"owner":{"account_id":19451776,"reputation":11,"user_id":14228017,"display_name":"charlesrain"},"score":0,"creation_date":1672879236,"post_id":75012388,"comment_id":132374990,"body_markdown":"Python, but I&#39;d be open to any solution in a language a Java/Python person can understand","body":"Python, but I&#39;d be open to any solution in a language a Java/Python person can understand"},{"owner":{"account_id":95372,"reputation":114366,"user_id":259769,"accept_rate":93,"display_name":"Enigmativity"},"score":0,"creation_date":1672881435,"post_id":75012388,"comment_id":132375336,"body_markdown":"Then you should add the tags so that people who have subscribed to those languages get your question highlighted to them. Otherwise you severely restrict your audience. It&#39;s also worthwhile explicitly stating the languages that you&#39;d like as part of the answer.","body":"Then you should add the tags so that people who have subscribed to those languages get your question highlighted to them. Otherwise you severely restrict your audience. It&#39;s also worthwhile explicitly stating the languages that you&#39;d like as part of the answer."},{"owner":{"account_id":19451776,"reputation":11,"user_id":14228017,"display_name":"charlesrain"},"score":0,"creation_date":1672882448,"post_id":75012388,"comment_id":132375503,"body_markdown":"It seems to be added now!","body":"It seems to be added now!"},{"owner":{"account_id":95372,"reputation":114366,"user_id":259769,"accept_rate":93,"display_name":"Enigmativity"},"score":0,"creation_date":1672882933,"post_id":75012388,"comment_id":132375581,"body_markdown":"I added the tags.","body":"I added the tags."},{"owner":{"account_id":2460360,"reputation":64577,"user_id":2144669,"display_name":"David Eisenstat"},"score":0,"creation_date":1672924253,"post_id":75012388,"comment_id":132385267,"body_markdown":"I disagree on the language tags; the algorithm tag alone gives enough visibility to the right people, and getting genpop to look too often just results in a closed question.","body":"I disagree on the language tags; the algorithm tag alone gives enough visibility to the right people, and getting genpop to look too often just results in a closed question."}],"answers":[{"tags":[],"owner":{"account_id":2460360,"reputation":64577,"user_id":2144669,"display_name":"David Eisenstat"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1672926161,"creation_date":1672926161,"answer_id":75019354,"question_id":75012388,"body_markdown":"For recursion, you need a base case and a recursive case.\r\n\r\n&gt; You could use some kind of recursion, where the end criterion is\r\n&gt; “\\[height\\] is smaller than or equal to max bucket value, return one”.\r\n\r\nThis is half of a correct base case. The other half is doing one round\r\nof splits when `max_size &lt; height &lt;= splits * max_size`.\r\n\r\nFor the recursive case, we need to determine the optimal way to split.\r\nThis turns out to be splitting off `splits - 1` buckets of size\r\n`max_size` (the bigger the better) and handling the remainder. See the\r\nPython below. (I would use iteration instead because of Python’s stack\r\nlimit.)\r\n\r\nTo prove correctness, we need to do some math. The base cases are\r\ncorrect by inspection. For the recursive case, since `n` buckets hold at\r\nmost `n * max_size`, we need at least `height / max_size` buckets. We\r\nalso know that the number of buckets must be one plus a multiple of\r\n`splits - 1`, since we start with one and add `splits - 1` with each\r\nround of splits. Hence, the number of buckets in the optimal solution is\r\nat least `height / max_size` rounded up to the nearest one plus a\r\nmultiple of `splits - 1`. The recursive case matches this bound exactly,\r\nso it’s optimal.\r\n\r\n``` python\r\ndef buckets(height, max_size, splits):\r\n    if height &lt;= max_size:\r\n        return 1\r\n    if height &lt;= splits * max_size:\r\n        return splits\r\n    return (splits - 1) + buckets(height - (splits - 1) * max_size, max_size, splits)\r\n```\r\n","title":"How to count the number of buckets needed to split a number into buckets of max size X, where each split has to be Y splits","body":"<p>For recursion, you need a base case and a recursive case.</p>\n<blockquote>\n<p>You could use some kind of recursion, where the end criterion is\n“[height] is smaller than or equal to max bucket value, return one”.</p>\n</blockquote>\n<p>This is half of a correct base case. The other half is doing one round\nof splits when <code>max_size &lt; height &lt;= splits * max_size</code>.</p>\n<p>For the recursive case, we need to determine the optimal way to split.\nThis turns out to be splitting off <code>splits - 1</code> buckets of size\n<code>max_size</code> (the bigger the better) and handling the remainder. See the\nPython below. (I would use iteration instead because of Python’s stack\nlimit.)</p>\n<p>To prove correctness, we need to do some math. The base cases are\ncorrect by inspection. For the recursive case, since <code>n</code> buckets hold at\nmost <code>n * max_size</code>, we need at least <code>height / max_size</code> buckets. We\nalso know that the number of buckets must be one plus a multiple of\n<code>splits - 1</code>, since we start with one and add <code>splits - 1</code> with each\nround of splits. Hence, the number of buckets in the optimal solution is\nat least <code>height / max_size</code> rounded up to the nearest one plus a\nmultiple of <code>splits - 1</code>. The recursive case matches this bound exactly,\nso it’s optimal.</p>\n<pre class=\"lang-py prettyprint-override\"><code>def buckets(height, max_size, splits):\n    if height &lt;= max_size:\n        return 1\n    if height &lt;= splits * max_size:\n        return splits\n    return (splits - 1) + buckets(height - (splits - 1) * max_size, max_size, splits)\n</code></pre>\n"}],"owner":{"account_id":19451776,"reputation":11,"user_id":14228017,"display_name":"charlesrain"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":165,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1672926161,"creation_date":1672874496,"question_id":75012388,"body_markdown":"I encoutered this problem on a leetcode github and can&#39;t wrap my head around it. I figured you could use some kind of recursion, where the end criterion is &quot;bucket is smaller than or equal to max bucket value, return one&quot;, but I am having a hard time getting there.\r\n\r\nI&#39;ve tried this (in Python):\r\n\r\n    def buckets(height, max, splits):\r\n        \r\n        if(splits &gt;= height):\r\n            return math.ceil(height / max) + 1\r\n        else:\r\n            return math.ceil(height / max) \r\n        ","title":"How to count the number of buckets needed to split a number into buckets of max size X, where each split has to be Y splits","body":"<p>I encoutered this problem on a leetcode github and can't wrap my head around it. I figured you could use some kind of recursion, where the end criterion is &quot;bucket is smaller than or equal to max bucket value, return one&quot;, but I am having a hard time getting there.</p>\n<p>I've tried this (in Python):</p>\n<pre><code>def buckets(height, max, splits):\n    \n    if(splits &gt;= height):\n        return math.ceil(height / max) + 1\n    else:\n        return math.ceil(height / max) \n    \n</code></pre>\n"},{"tags":["java","javafx","fxml","scenebuilder","gridpane"],"comments":[{"owner":{"account_id":2053598,"reputation":41316,"user_id":1831987,"display_name":"VGR"},"score":0,"creation_date":1571880966,"post_id":58532867,"comment_id":103389321,"body_markdown":"I would start by verifying that `source` is in fact an AnchorPane.  I would also verify that its parent is a GridPane.","body":"I would start by verifying that <code>source</code> is in fact an AnchorPane.  I would also verify that its parent is a GridPane."},{"owner":{"account_id":16958389,"reputation":1,"user_id":12266125,"display_name":"Tammy Bammy"},"score":0,"creation_date":1571881083,"post_id":58532867,"comment_id":103389340,"body_markdown":"Here, the &#39;grid&#39; is the GridPane. So I thought it will add as a child of &#39;grid&#39;. And how do I check the type of source?","body":"Here, the &#39;grid&#39; is the GridPane. So I thought it will add as a child of &#39;grid&#39;. And how do I check the type of source?"},{"owner":{"account_id":16958389,"reputation":1,"user_id":12266125,"display_name":"Tammy Bammy"},"score":0,"creation_date":1571881508,"post_id":58532867,"comment_id":103389430,"body_markdown":"I have checked the parent of the AnchorPane identifiers and the `source` and it is `grid`. And it is still returning null.","body":"I have checked the parent of the AnchorPane identifiers and the <code>source</code> and it is <code>grid</code>. And it is still returning null."},{"owner":{"account_id":1206541,"reputation":2037,"user_id":1176037,"accept_rate":67,"display_name":"Alan Deep"},"score":0,"creation_date":1571884779,"post_id":58532867,"comment_id":103390043,"body_markdown":"this is a bad approach @TammyBammy, you should use `Controllers`, it&#39;s much better and easier in JavaFX","body":"this is a bad approach @TammyBammy, you should use <code>Controllers</code>, it&#39;s much better and easier in JavaFX"},{"owner":{"account_id":2819940,"reputation":12538,"user_id":2423906,"accept_rate":100,"display_name":"SedJ601"},"score":0,"creation_date":1571886164,"post_id":58532867,"comment_id":103390273,"body_markdown":"One thing that I noticed in the past was that Scenebuilder would not put a zero in the FXML. So I would look at the FXML and make sure all zero indexed gridcells had zero&#39;s in the FXML. Also make sure you have some type of Node in each cell. Have a look at [this](https://github.com/sedj601/GameOfFifteen) code.","body":"One thing that I noticed in the past was that Scenebuilder would not put a zero in the FXML. So I would look at the FXML and make sure all zero indexed gridcells had zero&#39;s in the FXML. Also make sure you have some type of Node in each cell. Have a look at <a href=\"https://github.com/sedj601/GameOfFifteen\" rel=\"nofollow noreferrer\">this</a> code."},{"owner":{"account_id":4962253,"reputation":18492,"user_id":3992939,"accept_rate":73,"display_name":"c0der"},"score":2,"creation_date":1571928023,"post_id":58532867,"comment_id":103408896,"body_markdown":"&quot;\nQuestions seeking debugging help (&quot;why isn&#39;t this code working?&quot;) must include the desired behavior, a specific problem or error and the shortest code necessary to reproduce it in the question itself. Questions without a clear problem statement are not useful to other readers. See: [mre]&quot;","body":"&quot; Questions seeking debugging help (&quot;why isn&#39;t this code working?&quot;) must include the desired behavior, a specific problem or error and the shortest code necessary to reproduce it in the question itself. Questions without a clear problem statement are not useful to other readers. See: <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>&quot;"}],"answers":[{"tags":[],"owner":{"account_id":19013920,"reputation":31,"user_id":13879295,"display_name":"krešimir šumiga"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1672926130,"creation_date":1672922719,"answer_id":75018605,"question_id":58532867,"body_markdown":"I don&#39;t know if this is a problem anymore, but looking for answers I came across this topic, so I will answer it in case someone needs answer. First of all, the problem is with accessing node itself with command: \r\n```Integer colIndex = grid.getColumnIndex(source);```. \r\nCommand getColumnIndex is static, so you have to access the type directly: \r\n```GridPane.getColumnIndex(source);```\r\n\r\nSecondly, you are trying to retrieve coordinates of a grid pane without anything inside the grid pane, which doesn&#39;t work because grid pane cell without children, which means node type, is null. There must be a node inside a grid pane intersection, let&#39;s say ImageView, meaning all nodes must be cast to ImageView type node:\r\n\r\n```for(Node i : grid.getChildren){ImageView iv = (ImageView)i;```\r\n\r\nNow you can retrieve indexes:\r\n\r\n```int colIndex = GridPane.getColumnIndex(iv);}```\r\n\r\nBasically, this means that method must know what is the type of node whose indexes it is retrieving. \r\n\r\nAnd lastly, be careful with fxml, because, if you, for example, drag and drop ImageView or button to grid pane in SceneBuilder, if grid pane cell has row or column index 0, fxml will assume default value, which is zero and it will not assign value explicitly: \r\n\r\n```\r\n&lt;example&gt;\r\n&lt;ImageView fx:id=&quot;IvTarget_0_0&quot; fitHeight=&quot;55.0&quot; fitWidth=&quot;58.0&quot; onDragDropped=&quot;#handleImageDrop&quot; pickOnBounds=&quot;true&quot; preserveRatio=&quot;true&quot;&gt;\r\n               &lt;GridPane.margin&gt;\r\n                  &lt;Insets left=&quot;12.0&quot; /&gt;\r\n               &lt;/GridPane.margin&gt;\r\n            &lt;/ImageView&gt;\r\n&lt;/example&gt;\r\n```\r\n\r\nso you see that node with coordinates 0,0 in your fxml editor doesn&#39;t have ```GridPane.columnIndex ``` or ```GridPane.rowIndex``` values set. This is OK for other functionalities, but when it comes to retrieving indexes, it will throw nullPtr exception, even if just one of multiple children doesn&#39;t have these properties set. In this case, you have to review all nodes in fxml editor and set them manually. \r\n\r\n```\r\n&lt;example&gt;\r\n&lt;ImageView fx:id=&quot;IvTarget_0_0&quot; GridPane.columnIndex=&quot;0&quot; GridPane.rowIndex=&quot;0&quot; fitHeight=&quot;55.0&quot; fitWidth=&quot;58.0&quot; onDragDropped=&quot;#handleImageDrop&quot; pickOnBounds=&quot;true&quot; preserveRatio=&quot;true&quot;&gt;\r\n               &lt;GridPane.margin&gt;\r\n                  &lt;Insets left=&quot;12.0&quot; /&gt;\r\n               &lt;/GridPane.margin&gt;\r\n            &lt;/ImageView&gt;\r\n&lt;/example&gt;\r\n```\r\n\r\nHope this helps! \r\n","title":"Java FXML GridPane.getRowIndex(source) returning null always when handling mouse event in Scene Builder","body":"<p>I don't know if this is a problem anymore, but looking for answers I came across this topic, so I will answer it in case someone needs answer. First of all, the problem is with accessing node itself with command:\n<code>Integer colIndex = grid.getColumnIndex(source);</code>.\nCommand getColumnIndex is static, so you have to access the type directly:\n<code>GridPane.getColumnIndex(source);</code></p>\n<p>Secondly, you are trying to retrieve coordinates of a grid pane without anything inside the grid pane, which doesn't work because grid pane cell without children, which means node type, is null. There must be a node inside a grid pane intersection, let's say ImageView, meaning all nodes must be cast to ImageView type node:</p>\n<p><code>for(Node i : grid.getChildren){ImageView iv = (ImageView)i;</code></p>\n<p>Now you can retrieve indexes:</p>\n<p><code>int colIndex = GridPane.getColumnIndex(iv);}</code></p>\n<p>Basically, this means that method must know what is the type of node whose indexes it is retrieving.</p>\n<p>And lastly, be careful with fxml, because, if you, for example, drag and drop ImageView or button to grid pane in SceneBuilder, if grid pane cell has row or column index 0, fxml will assume default value, which is zero and it will not assign value explicitly:</p>\n<pre><code>&lt;example&gt;\n&lt;ImageView fx:id=&quot;IvTarget_0_0&quot; fitHeight=&quot;55.0&quot; fitWidth=&quot;58.0&quot; onDragDropped=&quot;#handleImageDrop&quot; pickOnBounds=&quot;true&quot; preserveRatio=&quot;true&quot;&gt;\n               &lt;GridPane.margin&gt;\n                  &lt;Insets left=&quot;12.0&quot; /&gt;\n               &lt;/GridPane.margin&gt;\n            &lt;/ImageView&gt;\n&lt;/example&gt;\n</code></pre>\n<p>so you see that node with coordinates 0,0 in your fxml editor doesn't have <code>GridPane.columnIndex </code> or <code>GridPane.rowIndex</code> values set. This is OK for other functionalities, but when it comes to retrieving indexes, it will throw nullPtr exception, even if just one of multiple children doesn't have these properties set. In this case, you have to review all nodes in fxml editor and set them manually.</p>\n<pre><code>&lt;example&gt;\n&lt;ImageView fx:id=&quot;IvTarget_0_0&quot; GridPane.columnIndex=&quot;0&quot; GridPane.rowIndex=&quot;0&quot; fitHeight=&quot;55.0&quot; fitWidth=&quot;58.0&quot; onDragDropped=&quot;#handleImageDrop&quot; pickOnBounds=&quot;true&quot; preserveRatio=&quot;true&quot;&gt;\n               &lt;GridPane.margin&gt;\n                  &lt;Insets left=&quot;12.0&quot; /&gt;\n               &lt;/GridPane.margin&gt;\n            &lt;/ImageView&gt;\n&lt;/example&gt;\n</code></pre>\n<p>Hope this helps!</p>\n"}],"owner":{"account_id":16958389,"reputation":1,"user_id":12266125,"display_name":"Tammy Bammy"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":223,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":1,"score":-1,"last_activity_date":1672926130,"creation_date":1571880093,"question_id":58532867,"body_markdown":"I am new to Java FXML. I am still learning how to use Scene Builder 2.0 and controller classes. I don&#39;t understand why this is returning null\n\n\n    @FXML\n    public void gridClick(MouseEvent e){\n        Node source = (Node)e.getSource() ;\n        Integer colIndex = grid.getColumnIndex(source);\n        Integer rowIndex = grid.getRowIndex(source);\n        System.out.println(&quot;Mouse entered cell [&quot;+colIndex+&quot;,&quot;+rowIndex+&quot;]&quot;);\n    }\n\n\nI initiated all the grid cells in SceneBuilder\n[The gridpane has been created in SceneBuilder][1]\nThen I created the anchorpanes for each cell in the controller class initialization:\n\n    for(int row=0;row&lt;numRows;row++){\n        for(int col=0;col&lt;numCols;col++){\n            AnchorPane slot=new AnchorPane();\n            slot.setStyle(&quot;-fx-border-color: black;-fx-border-width: 0.2;&quot;);\n            grid.add(slot,col,row);\n        }\n    }\n\nI don&#39;t know if this is a bad approach but i am trying to learn. Please help me how to do this differently or why it is giving me null value.\nWhen the user clicks on one of the grid cells, i.e. they should be anchorpanes, I want the Anchorpane that they clicked or the grid cell row and column.\n\n  [1]: https://i.stack.imgur.com/IXwJd.png","title":"Java FXML GridPane.getRowIndex(source) returning null always when handling mouse event in Scene Builder","body":"<p>I am new to Java FXML. I am still learning how to use Scene Builder 2.0 and controller classes. I don't understand why this is returning null</p>\n<pre><code>@FXML\npublic void gridClick(MouseEvent e){\n    Node source = (Node)e.getSource() ;\n    Integer colIndex = grid.getColumnIndex(source);\n    Integer rowIndex = grid.getRowIndex(source);\n    System.out.println(&quot;Mouse entered cell [&quot;+colIndex+&quot;,&quot;+rowIndex+&quot;]&quot;);\n}\n</code></pre>\n<p>I initiated all the grid cells in SceneBuilder\n<a href=\"https://i.stack.imgur.com/IXwJd.png\" rel=\"nofollow noreferrer\">The gridpane has been created in SceneBuilder</a>\nThen I created the anchorpanes for each cell in the controller class initialization:</p>\n<pre><code>for(int row=0;row&lt;numRows;row++){\n    for(int col=0;col&lt;numCols;col++){\n        AnchorPane slot=new AnchorPane();\n        slot.setStyle(&quot;-fx-border-color: black;-fx-border-width: 0.2;&quot;);\n        grid.add(slot,col,row);\n    }\n}\n</code></pre>\n<p>I don't know if this is a bad approach but i am trying to learn. Please help me how to do this differently or why it is giving me null value.\nWhen the user clicks on one of the grid cells, i.e. they should be anchorpanes, I want the Anchorpane that they clicked or the grid cell row and column.</p>\n"}],"has_more":true,"quota_max":10000,"quota_remaining":9469,"page":754,"page_size":100}
