{"items":[{"tags":["java","android","xml","android-studio"],"comments":[{"owner":{"account_id":6686506,"reputation":360,"user_id":16020533,"display_name":"Mohamed Rimshad"},"score":1,"creation_date":1662474600,"post_id":73623278,"comment_id":130010723,"body_markdown":"Does this answer your question? [package R does not exist](https://stackoverflow.com/questions/12986301/package-r-does-not-exist)","body":"Does this answer your question? <a href=\"https://stackoverflow.com/questions/12986301/package-r-does-not-exist\">package R does not exist</a>"}],"answers":[{"tags":[],"owner":{"account_id":26237581,"reputation":277,"user_id":19912454,"display_name":"ankor ank"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1662565002,"creation_date":1662565002,"answer_id":73638204,"question_id":73623278,"body_markdown":"possible solutions are:\r\n1.  go to imports section in the code and add manually import \r\n\r\n```\r\nimport com.example.dictionary.mRecyclerView.R;\r\n\r\n```\r\n2. if you refactored the package name then you should change the package name in android manifest and app gradle file.\r\n```\r\n applicationId &quot;com.example.dictionary.mRecyclerView&quot;\r\n```\r\nand in manifest file\r\n```\r\n package=&quot;com.example.dictionary.mRecyclerView&quot;\r\n```\r\n3. if the above two steps not working, then you can try some technic which you can use to remove this error:-\r\n\r\n   ☞ Clean your project, Build-&gt;clean Project\r\n\r\n   ☞ Rebuild project, Build -&gt; Rebuild Project\r\n\r\n   ☞ Open manifest and check is there any resource missing\r\n\r\n   ☞ Check-in layout to particular id if missing add it\r\n\r\n   ☞ If the above steps did not work then restart android studio with invalidating the cache\r\n\r\n\r\n","title":"package R does not exist in android studio","body":"<p>possible solutions are:</p>\n<ol>\n<li>go to imports section in the code and add manually import</li>\n</ol>\n<pre><code>import com.example.dictionary.mRecyclerView.R;\n\n</code></pre>\n<ol start=\"2\">\n<li>if you refactored the package name then you should change the package name in android manifest and app gradle file.</li>\n</ol>\n<pre><code> applicationId &quot;com.example.dictionary.mRecyclerView&quot;\n</code></pre>\n<p>and in manifest file</p>\n<pre><code> package=&quot;com.example.dictionary.mRecyclerView&quot;\n</code></pre>\n<ol start=\"3\">\n<li><p>if the above two steps not working, then you can try some technic which you can use to remove this error:-</p>\n<p>☞ Clean your project, Build-&gt;clean Project</p>\n<p>☞ Rebuild project, Build -&gt; Rebuild Project</p>\n<p>☞ Open manifest and check is there any resource missing</p>\n<p>☞ Check-in layout to particular id if missing add it</p>\n<p>☞ If the above steps did not work then restart android studio with invalidating the cache</p>\n</li>\n</ol>\n"}],"owner":{"account_id":26260921,"reputation":1,"user_id":19932255,"display_name":"seyee30"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":525,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1662565002,"creation_date":1662472534,"question_id":73623278,"body_markdown":"``` \r\npackage com.example.dictionary.mRecyclerView;\r\n\r\nimport android.os.Bundle;\r\nimport android.view.View;\r\nimport android.widget.TextView;\r\n\r\nimport androidx.annotation.NonNull;\r\nimport androidx.recyclerview.widget.RecyclerView;\r\npublic class ViewHolder extends RecyclerView.ViewHolder {\r\n\r\n    public TextView list_title;\r\n    public TextView list_desc;\r\n\r\n    public ViewHolder(View itemView) {\r\n        super(itemView);\r\n\r\n        list_title = (TextView) itemView.findViewById(R.id.list_title);\r\n        list_desc = (TextView) itemView.findViewById(R.id.list_desc);\r\n    }\r\n\r\n}\r\n```\r\n\r\nin itemView.findViewById(R.id.list_title) and itemView.findViewById(R.id.list_desc) I get an error in R\r\nerror message : package R does not exist\r\n\r\nThis is definitely code that should work. But this code is not running in my android studio.\r\nHow can I get this code to work?\r\n\r\n\r\nlist_item.xml\r\n```\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\r\n&lt;LinearLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\r\n    android:orientation=&quot;vertical&quot;\r\n    android:layout_width=&quot;match_parent&quot;\r\n    android:layout_height=&quot;wrap_content&quot;&gt;\r\n\r\n    &lt;TextView\r\n        android:id=&quot;@+id/list_title&quot;\r\n        android:layout_width=&quot;match_parent&quot;\r\n        android:layout_height=&quot;wrap_content&quot;\r\n        android:text=&quot;리스트 화면&quot;\r\n        android:textColor=&quot;#fff&quot;\r\n        android:background=&quot;#36384F&quot;\r\n        android:textSize=&quot;20sp&quot;\r\n        android:paddingLeft=&quot;20dp&quot;\r\n        android:paddingTop=&quot;20dp&quot;\r\n        android:paddingBottom=&quot;10dp&quot;/&gt;\r\n\r\n    &lt;TextView\r\n        android:id=&quot;@+id/list_desc&quot;\r\n        android:layout_width=&quot;match_parent&quot;\r\n        android:layout_height=&quot;wrap_content&quot;\r\n        android:text=&quot;리스트 내용&quot;\r\n        android:textColor=&quot;#fff&quot;\r\n        android:background=&quot;#36384F&quot;\r\n        android:textSize=&quot;15sp&quot;\r\n        android:maxLines=&quot;2&quot;\r\n        android:ellipsize=&quot;end&quot;\r\n        android:paddingLeft=&quot;20dp&quot;\r\n        android:paddingBottom=&quot;20dp&quot;/&gt;\r\n\r\n&lt;/LinearLayout&gt;\r\n```","title":"package R does not exist in android studio","body":"<pre><code>package com.example.dictionary.mRecyclerView;\n\nimport android.os.Bundle;\nimport android.view.View;\nimport android.widget.TextView;\n\nimport androidx.annotation.NonNull;\nimport androidx.recyclerview.widget.RecyclerView;\npublic class ViewHolder extends RecyclerView.ViewHolder {\n\n    public TextView list_title;\n    public TextView list_desc;\n\n    public ViewHolder(View itemView) {\n        super(itemView);\n\n        list_title = (TextView) itemView.findViewById(R.id.list_title);\n        list_desc = (TextView) itemView.findViewById(R.id.list_desc);\n    }\n\n}\n</code></pre>\n<p>in itemView.findViewById(R.id.list_title) and itemView.findViewById(R.id.list_desc) I get an error in R\nerror message : package R does not exist</p>\n<p>This is definitely code that should work. But this code is not running in my android studio.\nHow can I get this code to work?</p>\n<p>list_item.xml</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\n&lt;LinearLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\n    android:orientation=&quot;vertical&quot;\n    android:layout_width=&quot;match_parent&quot;\n    android:layout_height=&quot;wrap_content&quot;&gt;\n\n    &lt;TextView\n        android:id=&quot;@+id/list_title&quot;\n        android:layout_width=&quot;match_parent&quot;\n        android:layout_height=&quot;wrap_content&quot;\n        android:text=&quot;리스트 화면&quot;\n        android:textColor=&quot;#fff&quot;\n        android:background=&quot;#36384F&quot;\n        android:textSize=&quot;20sp&quot;\n        android:paddingLeft=&quot;20dp&quot;\n        android:paddingTop=&quot;20dp&quot;\n        android:paddingBottom=&quot;10dp&quot;/&gt;\n\n    &lt;TextView\n        android:id=&quot;@+id/list_desc&quot;\n        android:layout_width=&quot;match_parent&quot;\n        android:layout_height=&quot;wrap_content&quot;\n        android:text=&quot;리스트 내용&quot;\n        android:textColor=&quot;#fff&quot;\n        android:background=&quot;#36384F&quot;\n        android:textSize=&quot;15sp&quot;\n        android:maxLines=&quot;2&quot;\n        android:ellipsize=&quot;end&quot;\n        android:paddingLeft=&quot;20dp&quot;\n        android:paddingBottom=&quot;20dp&quot;/&gt;\n\n&lt;/LinearLayout&gt;\n</code></pre>\n"},{"tags":["java","arrays"],"comments":[{"owner":{"account_id":2360785,"reputation":11123,"user_id":2067492,"display_name":"matt"},"score":0,"creation_date":1662500542,"post_id":73627980,"comment_id":130018891,"body_markdown":"What is wrong with what you&#39;re doing?","body":"What is wrong with what you&#39;re doing?"},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":1,"creation_date":1662500850,"post_id":73627980,"comment_id":130018944,"body_markdown":"*i == fiberColors.length* Why?","body":"<i>i == fiberColors.length</i> Why?"},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1662501366,"post_id":73627980,"comment_id":130019057,"body_markdown":"Why a loop at all? ```int modNum = (input - 1) % fiberColors.length; System.out.println(fiberColors[modNum]);``` should do it","body":"Why a loop at all? <code>int modNum = (input - 1) % fiberColors.length; System.out.println(fiberColors[modNum]);</code> should do it"},{"owner":{"account_id":26154140,"reputation":31,"user_id":19841611,"display_name":"Jardo"},"score":0,"creation_date":1662501897,"post_id":73627980,"comment_id":130019178,"body_markdown":"@g00se I left the for loop in because I was just trying basically anything. I&#39;ve been going at this for an embarrassingly long time. With that said your solution worked perfectly thank you.","body":"@g00se I left the for loop in because I was just trying basically anything. I&#39;ve been going at this for an embarrassingly long time. With that said your solution worked perfectly thank you."}],"answers":[{"tags":[],"owner":{"account_id":26263818,"reputation":28,"user_id":19934701,"display_name":"Kruger_Doggie"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1662564999,"creation_date":1662543664,"answer_id":73633243,"question_id":73627980,"body_markdown":"Here is a solution that works. I have added a protection to prevent an exception in the interpretation of the input.\r\n\r\n    import java.util.Scanner;\r\n\r\n\tpublic class LemurienAgileForm {\r\n\r\n\t\tpublic LemurienAgileForm() {\r\n\t\t\tScanner inputNum = new Scanner(System.in);  // User inputs Intager\r\n\t\t\tSystem.out.println(&quot;Enter Number...&quot;);\r\n\r\n\t\t\tString[] fiberColors = {&quot;Blue&quot;, &quot;Orange&quot;, &quot;Green&quot;, &quot;Brown&quot;, &quot;Slate&quot;, &quot;White&quot;, &quot;Red&quot;, &quot;Black&quot;, &quot;Yellow&quot;, &quot;Violet&quot;, &quot;Rose&quot;, &quot;Aqua&quot;};\r\n\r\n\t\t\tString userIn = inputNum.nextLine();//Read user input\r\n\r\n\t\t\ttry {\r\n\t\t\t\tint input = Integer.parseInt(userIn);//Try to get an int value\r\n\t\t\t\tif (input &lt;= 0 || input &gt; 144) {\r\n\t\t\t\t\tSystem.err.println(&quot;Invalid input (out of range)&quot;);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tinput--;\r\n\t\t\t\t\tSystem.out.println(fiberColors[input / 12]);\r\n\t\t\t\t}\r\n\t\t\t} catch (NumberFormatException e) {\r\n\t\t\t\tSystem.err.println(&quot;Invalid input (not a number)&quot;);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\nEdit:\r\nIf the problem has been identified correctly, by entering a number, you are supposed to output the color in the array that is maped by the linked table. I take this from the statement \r\n\r\n&gt; Each color has 12 numbers. Blue 1-12, Orange 13-24 etc.\r\n\r\nNow what has been changed:\r\n1. Read the whole line from the console instead of a number (user can make wrong input)\r\n2. The try catch block tries to interpret the input as a number\r\n3. Check if the input is in the valid range (0, negative and &gt;144 are invalid)\r\n4. The array starts with index 0. To map the numbers 1-12 to 0, the value is decreased by 1 and then divided by 12. Here is the integer divison used. This assigns the values of the columns to the color values of the corresponding column.\r\n\r\nNow for the other possible solution. Assign the values in the rows to the colors in the first column.\r\nChange the content of else block to\r\n\r\n    int index = input % 12 - 1;\r\n    if(index &lt; 0) {\r\n        index = fiberColors.length - 1;\r\n    }\r\n    System.out.println(fiberColors[index]);\r\nThe reason for the if condition is that the modulo calculation returns the values 1-11 0 from which one is subtracted to adjust the index (new range 0-10 -1). Now the last value must be changed from -1 to the last array position.","title":"Using User Input to Search Array Index to find string","body":"<p>Here is a solution that works. I have added a protection to prevent an exception in the interpretation of the input.</p>\n<pre><code>import java.util.Scanner;\n\npublic class LemurienAgileForm {\n\n    public LemurienAgileForm() {\n        Scanner inputNum = new Scanner(System.in);  // User inputs Intager\n        System.out.println(&quot;Enter Number...&quot;);\n\n        String[] fiberColors = {&quot;Blue&quot;, &quot;Orange&quot;, &quot;Green&quot;, &quot;Brown&quot;, &quot;Slate&quot;, &quot;White&quot;, &quot;Red&quot;, &quot;Black&quot;, &quot;Yellow&quot;, &quot;Violet&quot;, &quot;Rose&quot;, &quot;Aqua&quot;};\n\n        String userIn = inputNum.nextLine();//Read user input\n\n        try {\n            int input = Integer.parseInt(userIn);//Try to get an int value\n            if (input &lt;= 0 || input &gt; 144) {\n                System.err.println(&quot;Invalid input (out of range)&quot;);\n            } else {\n                input--;\n                System.out.println(fiberColors[input / 12]);\n            }\n        } catch (NumberFormatException e) {\n            System.err.println(&quot;Invalid input (not a number)&quot;);\n        }\n    }\n}\n</code></pre>\n<p>Edit:\nIf the problem has been identified correctly, by entering a number, you are supposed to output the color in the array that is maped by the linked table. I take this from the statement</p>\n<blockquote>\n<p>Each color has 12 numbers. Blue 1-12, Orange 13-24 etc.</p>\n</blockquote>\n<p>Now what has been changed:</p>\n<ol>\n<li>Read the whole line from the console instead of a number (user can make wrong input)</li>\n<li>The try catch block tries to interpret the input as a number</li>\n<li>Check if the input is in the valid range (0, negative and &gt;144 are invalid)</li>\n<li>The array starts with index 0. To map the numbers 1-12 to 0, the value is decreased by 1 and then divided by 12. Here is the integer divison used. This assigns the values of the columns to the color values of the corresponding column.</li>\n</ol>\n<p>Now for the other possible solution. Assign the values in the rows to the colors in the first column.\nChange the content of else block to</p>\n<pre><code>int index = input % 12 - 1;\nif(index &lt; 0) {\n    index = fiberColors.length - 1;\n}\nSystem.out.println(fiberColors[index]);\n</code></pre>\n<p>The reason for the if condition is that the modulo calculation returns the values 1-11 0 from which one is subtracted to adjust the index (new range 0-10 -1). Now the last value must be changed from -1 to the last array position.</p>\n"}],"owner":{"account_id":26154140,"reputation":31,"user_id":19841611,"display_name":"Jardo"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":632,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1662564999,"creation_date":1662500307,"question_id":73627980,"body_markdown":"I&#39;m pretty new to programming and very new to java so please be patient.\r\n\r\nBasically, I&#39;m trying to get the user-implemented number (after going through the math) to be used as an index value within the array to find out which color it belongs to.\r\n\r\nExample. The user submits an integer. Let&#39;s say 66. 66 mod 12 would be 6. Using 6 I can go throught the array where [6] is assigned to white and print out white.\r\n\r\n[Fiber Optics Color Code Chart][1]\r\n\r\nEach color has 12 numbers. Blue 1-12, Orange 13-24 etc.\r\n\r\n\r\n```\r\nimport java.util.Scanner;\r\nimport java.util.Arrays;\r\n\r\npublic class Main {\r\n    public static void main(String[] args) {\r\n        Scanner inputNum = new Scanner(System.in);  // User inputs Intager\r\n        System.out.println(&quot;Enter Number...&quot;);\r\n\r\n        String[] fiberColors = {&quot;Blue&quot;, &quot;Orange&quot;, &quot;Green&quot;, &quot;Brown&quot;, &quot;Slate&quot;, &quot;White&quot;, &quot;Red&quot;, &quot;Black&quot;, &quot;Yellow&quot;, &quot;Violet&quot;, &quot;Rose&quot;, &quot;Aqua&quot;};\r\n\r\n        int input = inputNum.nextInt(); // Read user input\r\n        \r\n         if (input &lt; 145) { \r\n            int modNum = (input- 1) % 12; // Find the modulus number from 12\r\n            \r\n            for (int i = modNum; i == fiberColors.length; i++) {\r\n                System.out.println(fiberColors[i]);\r\n              }\r\n            \r\n         if (input &gt;= 145) {\r\n            System.out.println(&quot;Invalid Number/Over 144c&quot;); // If user input is over 144 count\r\n         }\r\n        \r\n        }\r\n\r\n    }      \r\n}\r\n```\r\n  [1]: https://i.stack.imgur.com/0lNcf.jpg","title":"Using User Input to Search Array Index to find string","body":"<p>I'm pretty new to programming and very new to java so please be patient.</p>\n<p>Basically, I'm trying to get the user-implemented number (after going through the math) to be used as an index value within the array to find out which color it belongs to.</p>\n<p>Example. The user submits an integer. Let's say 66. 66 mod 12 would be 6. Using 6 I can go throught the array where [6] is assigned to white and print out white.</p>\n<p><a href=\"https://i.stack.imgur.com/0lNcf.jpg\" rel=\"nofollow noreferrer\">Fiber Optics Color Code Chart</a></p>\n<p>Each color has 12 numbers. Blue 1-12, Orange 13-24 etc.</p>\n<pre><code>import java.util.Scanner;\nimport java.util.Arrays;\n\npublic class Main {\n    public static void main(String[] args) {\n        Scanner inputNum = new Scanner(System.in);  // User inputs Intager\n        System.out.println(&quot;Enter Number...&quot;);\n\n        String[] fiberColors = {&quot;Blue&quot;, &quot;Orange&quot;, &quot;Green&quot;, &quot;Brown&quot;, &quot;Slate&quot;, &quot;White&quot;, &quot;Red&quot;, &quot;Black&quot;, &quot;Yellow&quot;, &quot;Violet&quot;, &quot;Rose&quot;, &quot;Aqua&quot;};\n\n        int input = inputNum.nextInt(); // Read user input\n        \n         if (input &lt; 145) { \n            int modNum = (input- 1) % 12; // Find the modulus number from 12\n            \n            for (int i = modNum; i == fiberColors.length; i++) {\n                System.out.println(fiberColors[i]);\n              }\n            \n         if (input &gt;= 145) {\n            System.out.println(&quot;Invalid Number/Over 144c&quot;); // If user input is over 144 count\n         }\n        \n        }\n\n    }      \n}\n</code></pre>\n"},{"tags":["java","spring","postgis","jts","hibernate-spatial"],"answers":[{"tags":[],"owner":{"account_id":4577330,"reputation":761,"user_id":3715449,"display_name":"Karel Maesen"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1660222012,"creation_date":1660222012,"answer_id":73320917,"question_id":73311110,"body_markdown":"You need to register a Jackson Module that provides appropriate serializers and deserializers for JTS Geometry objects. A good candidate is [jackson-datatype-jts](https://github.com/bedatadriven/jackson-datatype-jts).\r\n\r\nIf you want an example on how to do this, you could check out [this blog post](https://www.cockroachlabs.com/blog/hibernate-spatial-data-tutorial/). (I wrote it using an alternative geometry library, but the approach should work with JTS and the jackson-datatype-jts module). ","title":"How to send PostGiS Geometry and Point data types through Spring Boot Rest API","body":"<p>You need to register a Jackson Module that provides appropriate serializers and deserializers for JTS Geometry objects. A good candidate is <a href=\"https://github.com/bedatadriven/jackson-datatype-jts\" rel=\"nofollow noreferrer\">jackson-datatype-jts</a>.</p>\n<p>If you want an example on how to do this, you could check out <a href=\"https://www.cockroachlabs.com/blog/hibernate-spatial-data-tutorial/\" rel=\"nofollow noreferrer\">this blog post</a>. (I wrote it using an alternative geometry library, but the approach should work with JTS and the jackson-datatype-jts module).</p>\n"},{"tags":[],"owner":{"account_id":1179237,"reputation":887,"user_id":1154544,"accept_rate":50,"display_name":"slambeth"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1662564778,"creation_date":1662562854,"answer_id":73637697,"question_id":73311110,"body_markdown":"There is a common exchange format, GeoJSON.  You would likely have to code JTS to do this, or PostGIS has functions to generate GeoJSON directly from your DB objects.\r\n\r\nAnother somewhat simpler approach is to convert your objects to WKT and return them in a String.  Both PostGIS, and JTS can generate and convert from WKT.  This may or may not be easier for other services to consume depending on the system making the call.  The only annoying thing about WKT, is the SRID is assumed.  I&#39;ve created my services to have a parameter to request the SRID the client would like (this of course requires that you can convert to the SRID requested), or, make your services always return data in a de facto standard, like 4326.","title":"How to send PostGiS Geometry and Point data types through Spring Boot Rest API","body":"<p>There is a common exchange format, GeoJSON.  You would likely have to code JTS to do this, or PostGIS has functions to generate GeoJSON directly from your DB objects.</p>\n<p>Another somewhat simpler approach is to convert your objects to WKT and return them in a String.  Both PostGIS, and JTS can generate and convert from WKT.  This may or may not be easier for other services to consume depending on the system making the call.  The only annoying thing about WKT, is the SRID is assumed.  I've created my services to have a parameter to request the SRID the client would like (this of course requires that you can convert to the SRID requested), or, make your services always return data in a de facto standard, like 4326.</p>\n"}],"owner":{"account_id":10101958,"reputation":348,"user_id":7465804,"display_name":"Simonas Petkevičius"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1462,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":73320917,"answer_count":2,"score":0,"last_activity_date":1662564778,"creation_date":1660156226,"question_id":73311110,"body_markdown":"I have an query that returns an interface OverlayDTO that I get from a native query. center is PostGIS `point` and `geometry` as you might have guessed it is `geometry`\r\n\r\n    @Query(&quot;SELECT &quot; +\r\n            &quot;o.geometry as geometry, &quot; +\r\n            &quot;o.center as center, &quot; +\r\n            &quot;FROM Overlay o &quot; +\r\n            &quot;WHERE  o.layer.id = :layerId&quot;)\r\n    List&lt;OverlayDTO&gt; getAllOverlays(long layerId);\r\nInterface:\r\n\r\n    import org.locationtech.jts.geom.Geometry;\r\n    import org.locationtech.jts.geom.Point;\r\n    \r\n    public interface OverlayDTO {\r\n        Geometry getGeometry();\r\n        Point getCenter();\r\n    }\r\n\r\nI want to send it through REST API like this (if possible) (it should call a service and do some more logic, but this is the basic gist of it)\r\n\r\n\r\n\r\n        @GetMapping(value=&quot;{layerId}&quot;)\r\n    public ResponseEntity&lt;List&lt;OverlayDTO&gt;&gt; getCompanyLayers(@PathVariable Long layerId) {\r\n        List&lt;OverlayDTO&gt; overlays = mapRepository.getAllOverlays(layerId);\r\n            \r\n        return ResponseEntity.ok(overlays);\r\n    }\r\n\r\n\r\nHowever, I get an error that Jackson was unable to map due to recursion.\r\n\r\n    Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception [Request processing failed; nested exception is org.springframework.http.converter.HttpMessageNotWritableException: Could not write JSON: Infinite recursion (StackOverflowError); nested exception is com.fasterxml.jackson.databind.JsonMappingException: Infinite recursion (StackOverflowError) (through reference chain: org.locationtech.jts.geom.Polygon[&quot;envelope&quot;]-&gt;org.locationtech.jts.geom.Polygon[&quot;envelope&quot;]-&gt;org.locationtech.jts.geom.Polygon[&quot;envelope&quot;]-&gt;org.locationtech.jts.geom.Polygon[&quot;envelope&quot;]-&gt;org.locationtech.jts.geom.Polygon[&quot;envelope&quot;]-&gt;org.locationtech.jts.geom.Polygon[&quot;envelope&quot;]-&gt;org.locationtech.jts.geom.Polygon[&quot;envelope&quot;]-&gt;org.locationtech.jts.geom.Polygon[&quot;envelope&quot;]-&gt;org.locationtech.jts.geom.Polygon[&quot;envelope&quot;]-&gt;org.locationtech.jts.geom.Polygon[&quot;envelope&quot;]-&gt;org.locationtech.jts.geom.Polygon[&quot;envelope&quot;]-&gt;org.locationtech.jts.geom.Polygon[&quot;envelope&quot;]-&gt;org.locationtech.jts.geom.Polygon[&quot;envelope&quot;]-&gt;org.locationtech.jts.geom.Polygon[&quot;envelope&quot;]-&gt;org.locationtech.jts.geom.Polygon[&quot;envelope&quot;]-&gt;org.locationtech.jts.geom.Polygon[&quot;envelope&quot;]-&gt;org.locationtech.jts.geom.Polygon[&quot;envelope&quot;]-&gt;org.locationtech.jts.geom.Polygon[&quot;envelope&quot;]-&gt;org.locationtech.jts.geom.Polygon[&quot;envelope&quot;]-&gt;org.locationtech.jts.geom.Polygon[&quot;envelope&quot;]-&gt;org.locationtech.jts.geom.Polygon[&quot;envelope&quot;]-&gt;org.locationtech.jts.geom.Polygon[&quot;envelope&quot;]-&gt;org.locationtech.jts.geom.Polygon[&quot;envelope&quot;]-&gt;org.locationtech.jts.geom.Polygon[&quot;envelope&quot;]-&gt;org.locationtech.jts.geom.Polygon[&quot;envelope&quot;]-&gt;org.locationtech.jts.geom.Polygon[&quot;envelope&quot;]-&gt;org.locationtech.jts.geom.Polygon[&quot;envelope&quot;]-&gt;org.locationtech.jts.geom.Polygon[&quot;envelope&quot;]-&gt;org.locationtech.jts.geom.Polygon[&quot;envelope&quot;]-&gt;org.locationtech.jts.geom.Polygon[&quot;envelope&quot;]\r\n\r\nHow could I fix this issue? Should I query data differently, or should I build my own DTO class and just send a POJO? Or do I need to build some serializer/deserializer?","title":"How to send PostGiS Geometry and Point data types through Spring Boot Rest API","body":"<p>I have an query that returns an interface OverlayDTO that I get from a native query. center is PostGIS <code>point</code> and <code>geometry</code> as you might have guessed it is <code>geometry</code></p>\n<pre><code>@Query(&quot;SELECT &quot; +\n        &quot;o.geometry as geometry, &quot; +\n        &quot;o.center as center, &quot; +\n        &quot;FROM Overlay o &quot; +\n        &quot;WHERE  o.layer.id = :layerId&quot;)\nList&lt;OverlayDTO&gt; getAllOverlays(long layerId);\n</code></pre>\n<p>Interface:</p>\n<pre><code>import org.locationtech.jts.geom.Geometry;\nimport org.locationtech.jts.geom.Point;\n\npublic interface OverlayDTO {\n    Geometry getGeometry();\n    Point getCenter();\n}\n</code></pre>\n<p>I want to send it through REST API like this (if possible) (it should call a service and do some more logic, but this is the basic gist of it)</p>\n<pre><code>    @GetMapping(value=&quot;{layerId}&quot;)\npublic ResponseEntity&lt;List&lt;OverlayDTO&gt;&gt; getCompanyLayers(@PathVariable Long layerId) {\n    List&lt;OverlayDTO&gt; overlays = mapRepository.getAllOverlays(layerId);\n        \n    return ResponseEntity.ok(overlays);\n}\n</code></pre>\n<p>However, I get an error that Jackson was unable to map due to recursion.</p>\n<pre><code>Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception [Request processing failed; nested exception is org.springframework.http.converter.HttpMessageNotWritableException: Could not write JSON: Infinite recursion (StackOverflowError); nested exception is com.fasterxml.jackson.databind.JsonMappingException: Infinite recursion (StackOverflowError) (through reference chain: org.locationtech.jts.geom.Polygon[&quot;envelope&quot;]-&gt;org.locationtech.jts.geom.Polygon[&quot;envelope&quot;]-&gt;org.locationtech.jts.geom.Polygon[&quot;envelope&quot;]-&gt;org.locationtech.jts.geom.Polygon[&quot;envelope&quot;]-&gt;org.locationtech.jts.geom.Polygon[&quot;envelope&quot;]-&gt;org.locationtech.jts.geom.Polygon[&quot;envelope&quot;]-&gt;org.locationtech.jts.geom.Polygon[&quot;envelope&quot;]-&gt;org.locationtech.jts.geom.Polygon[&quot;envelope&quot;]-&gt;org.locationtech.jts.geom.Polygon[&quot;envelope&quot;]-&gt;org.locationtech.jts.geom.Polygon[&quot;envelope&quot;]-&gt;org.locationtech.jts.geom.Polygon[&quot;envelope&quot;]-&gt;org.locationtech.jts.geom.Polygon[&quot;envelope&quot;]-&gt;org.locationtech.jts.geom.Polygon[&quot;envelope&quot;]-&gt;org.locationtech.jts.geom.Polygon[&quot;envelope&quot;]-&gt;org.locationtech.jts.geom.Polygon[&quot;envelope&quot;]-&gt;org.locationtech.jts.geom.Polygon[&quot;envelope&quot;]-&gt;org.locationtech.jts.geom.Polygon[&quot;envelope&quot;]-&gt;org.locationtech.jts.geom.Polygon[&quot;envelope&quot;]-&gt;org.locationtech.jts.geom.Polygon[&quot;envelope&quot;]-&gt;org.locationtech.jts.geom.Polygon[&quot;envelope&quot;]-&gt;org.locationtech.jts.geom.Polygon[&quot;envelope&quot;]-&gt;org.locationtech.jts.geom.Polygon[&quot;envelope&quot;]-&gt;org.locationtech.jts.geom.Polygon[&quot;envelope&quot;]-&gt;org.locationtech.jts.geom.Polygon[&quot;envelope&quot;]-&gt;org.locationtech.jts.geom.Polygon[&quot;envelope&quot;]-&gt;org.locationtech.jts.geom.Polygon[&quot;envelope&quot;]-&gt;org.locationtech.jts.geom.Polygon[&quot;envelope&quot;]-&gt;org.locationtech.jts.geom.Polygon[&quot;envelope&quot;]-&gt;org.locationtech.jts.geom.Polygon[&quot;envelope&quot;]-&gt;org.locationtech.jts.geom.Polygon[&quot;envelope&quot;]\n</code></pre>\n<p>How could I fix this issue? Should I query data differently, or should I build my own DTO class and just send a POJO? Or do I need to build some serializer/deserializer?</p>\n"},{"tags":["java","groovy","collections","java-8","hashmap"],"comments":[{"owner":{"account_id":6520,"reputation":10523,"user_id":11002,"accept_rate":75,"display_name":"tgdavies"},"score":1,"creation_date":1662533933,"post_id":73631263,"comment_id":130024407,"body_markdown":"Please explain exactly where you are stuck.","body":"Please explain exactly where you are stuck."},{"owner":{"account_id":19068200,"reputation":113,"user_id":19692198,"display_name":"deewreck"},"score":0,"creation_date":1662534080,"post_id":73631263,"comment_id":130024449,"body_markdown":"Hi @tgdavies, I am stuck with the part of removing values from MapA while creating MapB. I am very new to groovy so not exactly sure how to approach this wrt to groovy syntax. I can add my code snippet","body":"Hi @tgdavies, I am stuck with the part of removing values from MapA while creating MapB. I am very new to groovy so not exactly sure how to approach this wrt to groovy syntax. I can add my code snippet"},{"owner":{"account_id":319873,"reputation":87612,"user_id":637853,"accept_rate":50,"display_name":"Thomas"},"score":0,"creation_date":1662534627,"post_id":73631263,"comment_id":130024618,"body_markdown":"Since you put &quot;or in Java&quot; - How would you do it in Java? Hint: I&#39;d iterate over the entry set, check the values and if they are incomplete remove them from the iterator and put them into the new map.","body":"Since you put &quot;or in Java&quot; - How would you do it in Java? Hint: I&#39;d iterate over the entry set, check the values and if they are incomplete remove them from the iterator and put them into the new map."},{"owner":{"account_id":19068200,"reputation":113,"user_id":19692198,"display_name":"deewreck"},"score":0,"creation_date":1662535128,"post_id":73631263,"comment_id":130024779,"body_markdown":"Hi @Thomas, i have added my part of code which i have written i java, but i am not sure how to remove the value while creating new map.","body":"Hi @Thomas, i have added my part of code which i have written i java, but i am not sure how to remove the value while creating new map."},{"owner":{"account_id":319873,"reputation":87612,"user_id":637853,"accept_rate":50,"display_name":"Thomas"},"score":0,"creation_date":1662535581,"post_id":73631263,"comment_id":130024935,"body_markdown":"Don&#39;t use streams here as they won&#39;t allow you to modify the underlying source. Instead use a traditional loop and an iterator (`for(Iterator&lt;Object&gt; itr = mapA.keySet().iterator(); itr.hasNext();) { /*your body*/ }`). Alterantively remove the keys you put into mapB after using the stream.","body":"Don&#39;t use streams here as they won&#39;t allow you to modify the underlying source. Instead use a traditional loop and an iterator (<code>for(Iterator&lt;Object&gt; itr = mapA.keySet().iterator(); itr.hasNext();) { &#47;*your body*&#47; }</code>). Alterantively remove the keys you put into mapB after using the stream."},{"owner":{"account_id":19068200,"reputation":113,"user_id":19692198,"display_name":"deewreck"},"score":0,"creation_date":1662535871,"post_id":73631263,"comment_id":130025032,"body_markdown":"@Thomas won&#39;t removing any value from map while iterating will cause concurrent modification exception?","body":"@Thomas won&#39;t removing any value from map while iterating will cause concurrent modification exception?"},{"owner":{"account_id":319873,"reputation":87612,"user_id":637853,"accept_rate":50,"display_name":"Thomas"},"score":0,"creation_date":1662536003,"post_id":73631263,"comment_id":130025085,"body_markdown":"Not if you&#39;re using the iterator&#39;s `remove()` method which is built to handle this kind of situation. Just don&#39;t change the map via other means while using an iterator.","body":"Not if you&#39;re using the iterator&#39;s <code>remove()</code> method which is built to handle this kind of situation. Just don&#39;t change the map via other means while using an iterator."},{"owner":{"account_id":19068200,"reputation":113,"user_id":19692198,"display_name":"deewreck"},"score":0,"creation_date":1662536600,"post_id":73631263,"comment_id":130025307,"body_markdown":"@Thomas, edited my question and added the code, can you tell me if its correct?? i can&#39;t run it right now due to lack of data.","body":"@Thomas, edited my question and added the code, can you tell me if its correct?? i can&#39;t run it right now due to lack of data."},{"owner":{"account_id":319873,"reputation":87612,"user_id":637853,"accept_rate":50,"display_name":"Thomas"},"score":0,"creation_date":1662537653,"post_id":73631263,"comment_id":130025706,"body_markdown":"Looks reasonable","body":"Looks reasonable"}],"answers":[{"tags":[],"owner":{"account_id":1857554,"reputation":20310,"user_id":1682820,"accept_rate":70,"display_name":"injecteer"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1662558020,"creation_date":1662540104,"answer_id":73632478,"question_id":73631263,"body_markdown":"There are thousands way of doing this. \r\n\r\nDown below I put 3 options: 1 with filling 2 maps independently in 2 loops, 1 (slightly better performing) using the single loop, and 1 using `groupBy`:\r\n\r\n```\r\ndef map = [ &#39;0003bb2d-f3cf-4b5c-9f34&#39;:[&quot;12345&quot;,&quot;Complete&quot;,&quot;5431&quot;],\r\n&#39;0003bb2d-f3cf-4b5c-9f71&#39;:[&quot;2311&quot;,&quot;InComplete&quot;,&quot;5321&quot;],\r\n&#39;0003bb2d-f3cf-4b5c-1d71&#39;:[&quot;4567&quot;,&quot;InComplete&quot;,&quot;4321&quot;],\r\n&#39;0003bb2d-f3cf-4b5c-1r51&#39;:[&quot;2345&quot;,&quot;Complete&quot;,&quot;5432&quot;]]\r\n\r\n// 1. option\r\nMap complete = map.findAll{ k, v -&gt; &#39;Complete&#39; == v[ 1 ] }\r\nMap inComplete = map.findAll{ k, v -&gt; &#39;InComplete&#39; in v }\r\nassert complete.toString() == &#39;[0003bb2d-f3cf-4b5c-9f34:[12345, Complete, 5431], 0003bb2d-f3cf-4b5c-1r51:[2345, Complete, 5432]]&#39;\r\nassert inComplete.toString() == &#39;[0003bb2d-f3cf-4b5c-9f71:[2311, InComplete, 5321], 0003bb2d-f3cf-4b5c-1d71:[4567, InComplete, 4321]]&#39;\r\n\r\n// 2. option\r\ndef twoMaps = map.inject( [:].withDefault{ [:] } ){ res, curr -&gt;\r\n  res[ curr.value[ 1 ] ] &lt;&lt; curr\r\n  res\r\n}\r\nassert twoMaps.toString() == &#39;[Complete:[0003bb2d-f3cf-4b5c-9f34:[12345, Complete, 5431], 0003bb2d-f3cf-4b5c-1r51:[2345, Complete, 5432]], InComplete:[0003bb2d-f3cf-4b5c-9f71:[2311, InComplete, 5321], 0003bb2d-f3cf-4b5c-1d71:[4567, InComplete, 4321]]]&#39;\r\n\r\n// 3. option -&gt; credits to @tim_yates!\r\ndef groupMaps = map.groupBy{ it.value[ 1 ] }\r\nassert groupMaps.toString() == &#39;[Complete:[0003bb2d-f3cf-4b5c-9f34:[12345, Complete, 5431], 0003bb2d-f3cf-4b5c-1r51:[2345, Complete, 5432]], InComplete:[0003bb2d-f3cf-4b5c-9f71:[2311, InComplete, 5321], 0003bb2d-f3cf-4b5c-1d71:[4567, InComplete, 4321]]]&#39;\r\n```","title":"Segregating a Map in two map based on value in Groovy or java","body":"<p>There are thousands way of doing this.</p>\n<p>Down below I put 3 options: 1 with filling 2 maps independently in 2 loops, 1 (slightly better performing) using the single loop, and 1 using <code>groupBy</code>:</p>\n<pre><code>def map = [ '0003bb2d-f3cf-4b5c-9f34':[&quot;12345&quot;,&quot;Complete&quot;,&quot;5431&quot;],\n'0003bb2d-f3cf-4b5c-9f71':[&quot;2311&quot;,&quot;InComplete&quot;,&quot;5321&quot;],\n'0003bb2d-f3cf-4b5c-1d71':[&quot;4567&quot;,&quot;InComplete&quot;,&quot;4321&quot;],\n'0003bb2d-f3cf-4b5c-1r51':[&quot;2345&quot;,&quot;Complete&quot;,&quot;5432&quot;]]\n\n// 1. option\nMap complete = map.findAll{ k, v -&gt; 'Complete' == v[ 1 ] }\nMap inComplete = map.findAll{ k, v -&gt; 'InComplete' in v }\nassert complete.toString() == '[0003bb2d-f3cf-4b5c-9f34:[12345, Complete, 5431], 0003bb2d-f3cf-4b5c-1r51:[2345, Complete, 5432]]'\nassert inComplete.toString() == '[0003bb2d-f3cf-4b5c-9f71:[2311, InComplete, 5321], 0003bb2d-f3cf-4b5c-1d71:[4567, InComplete, 4321]]'\n\n// 2. option\ndef twoMaps = map.inject( [:].withDefault{ [:] } ){ res, curr -&gt;\n  res[ curr.value[ 1 ] ] &lt;&lt; curr\n  res\n}\nassert twoMaps.toString() == '[Complete:[0003bb2d-f3cf-4b5c-9f34:[12345, Complete, 5431], 0003bb2d-f3cf-4b5c-1r51:[2345, Complete, 5432]], InComplete:[0003bb2d-f3cf-4b5c-9f71:[2311, InComplete, 5321], 0003bb2d-f3cf-4b5c-1d71:[4567, InComplete, 4321]]]'\n\n// 3. option -&gt; credits to @tim_yates!\ndef groupMaps = map.groupBy{ it.value[ 1 ] }\nassert groupMaps.toString() == '[Complete:[0003bb2d-f3cf-4b5c-9f34:[12345, Complete, 5431], 0003bb2d-f3cf-4b5c-1r51:[2345, Complete, 5432]], InComplete:[0003bb2d-f3cf-4b5c-9f71:[2311, InComplete, 5321], 0003bb2d-f3cf-4b5c-1d71:[4567, InComplete, 4321]]]'\n</code></pre>\n"},{"tags":[],"owner":{"account_id":4358,"reputation":168410,"user_id":6509,"display_name":"tim_yates"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1662564741,"creation_date":1662564741,"answer_id":73638146,"question_id":73631263,"body_markdown":"And for fun, this is the same but in Java 17\r\n\r\n```\r\nvar stringListMap = Map.of(\r\n        &quot;0003bb2d-f3cf-4b5c-9f34&quot;, List.of(&quot;12345&quot;, &quot;Complete&quot;, &quot;5431&quot;),\r\n        &quot;0003bb2d-f3cf-4b5c-9f71&quot;, List.of(&quot;2311&quot;, &quot;InComplete&quot;, &quot;5321&quot;),\r\n        &quot;0003bb2d-f3cf-4b5c-1d71&quot;, List.of(&quot;4567&quot;, &quot;InComplete&quot;, &quot;4321&quot;),\r\n        &quot;0003bb2d-f3cf-4b5c-1r51&quot;, List.of(&quot;2345&quot;, &quot;Complete&quot;, &quot;5432&quot;)\r\n);\r\n\r\nvar result = stringListMap.entrySet().stream().collect(\r\n        Collectors.groupingBy(\r\n                e -&gt; e.getValue().get(1),\r\n                Collectors.mapping(e -&gt; e, Collectors.toList())\r\n        )\r\n);\r\nresult.forEach((k, v) -&gt; System.out.println(k + &quot; =&gt; &quot; + v));\r\n```\r\n\r\nWhich prints:\r\n\r\n```\r\nComplete =&gt; [0003bb2d-f3cf-4b5c-9f34=[12345, Complete, 5431], 0003bb2d-f3cf-4b5c-1r51=[2345, Complete, 5432]]\r\nInComplete =&gt; [0003bb2d-f3cf-4b5c-9f71=[2311, InComplete, 5321], 0003bb2d-f3cf-4b5c-1d71=[4567, InComplete, 4321]]\r\n```","title":"Segregating a Map in two map based on value in Groovy or java","body":"<p>And for fun, this is the same but in Java 17</p>\n<pre><code>var stringListMap = Map.of(\n        &quot;0003bb2d-f3cf-4b5c-9f34&quot;, List.of(&quot;12345&quot;, &quot;Complete&quot;, &quot;5431&quot;),\n        &quot;0003bb2d-f3cf-4b5c-9f71&quot;, List.of(&quot;2311&quot;, &quot;InComplete&quot;, &quot;5321&quot;),\n        &quot;0003bb2d-f3cf-4b5c-1d71&quot;, List.of(&quot;4567&quot;, &quot;InComplete&quot;, &quot;4321&quot;),\n        &quot;0003bb2d-f3cf-4b5c-1r51&quot;, List.of(&quot;2345&quot;, &quot;Complete&quot;, &quot;5432&quot;)\n);\n\nvar result = stringListMap.entrySet().stream().collect(\n        Collectors.groupingBy(\n                e -&gt; e.getValue().get(1),\n                Collectors.mapping(e -&gt; e, Collectors.toList())\n        )\n);\nresult.forEach((k, v) -&gt; System.out.println(k + &quot; =&gt; &quot; + v));\n</code></pre>\n<p>Which prints:</p>\n<pre><code>Complete =&gt; [0003bb2d-f3cf-4b5c-9f34=[12345, Complete, 5431], 0003bb2d-f3cf-4b5c-1r51=[2345, Complete, 5432]]\nInComplete =&gt; [0003bb2d-f3cf-4b5c-9f71=[2311, InComplete, 5321], 0003bb2d-f3cf-4b5c-1d71=[4567, InComplete, 4321]]\n</code></pre>\n"}],"owner":{"account_id":19068200,"reputation":113,"user_id":19692198,"display_name":"deewreck"},"comment_count":9,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":45,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":2,"score":0,"last_activity_date":1662564741,"creation_date":1662533867,"question_id":73631263,"body_markdown":"I have a map of type Map&lt;Object,ArrayList&gt; MapA. \r\nmap can have values like \r\n\r\n```\r\nMapA\r\n{key=0003bb2d-f3cf-4b5c-9f34 , value = [&quot;12345&quot;,&quot;Complete&quot;,&quot;5431&quot;],\r\nkey=0003bb2d-f3cf-4b5c-9f71 , value = [&quot;2311&quot;,&quot;InComplete&quot;,&quot;5321&quot;],\r\nkey=0003bb2d-f3cf-4b5c-1d71 , value = [&quot;4567&quot;,&quot;InComplete&quot;,&quot;4321&quot;],\r\nkey=0003bb2d-f3cf-4b5c-1r51 , value = [&quot;2345&quot;,&quot;Complete&quot;,&quot;5432&quot;]}\r\n\r\n\r\noutput should be \r\n\r\nMapA\r\n{key=0003bb2d-f3cf-4b5c-9f34 , value = [&quot;12345&quot;,&quot;Complete&quot;,&quot;5431&quot;],\r\nkey=0003bb2d-f3cf-4b5c-1r51 , value = [&quot;2345&quot;,&quot;Complete&quot;,&quot;5432&quot;]}\r\n\r\nMapB\r\n{key=0003bb2d-f3cf-4b5c-9f71 , value = [&quot;2311&quot;,&quot;InComplete&quot;,&quot;5321&quot;],\r\nkey=0003bb2d-f3cf-4b5c-1d71 , value = [&quot;4567&quot;,&quot;InComplete&quot;,&quot;4321&quot;]}\r\n\r\n```\r\nI want to create a new MapB from MapA having all key value pairs, where value has &quot;InComplete&quot; in it. Either i can have two extra map having &quot;Complete&quot; and &quot;InComplete&quot; KeyValue pairs or if i can remove Incomplete from MapA. \r\n\r\nSo i want to Segregate MapA on the basis of Complete or InComplete into two seperate maps. \r\n\r\nI need to write it in groovy but if i can get some hint in java 8 as well, i can try to convert it.\r\n\r\nCode snippet i am working on but this will create new Map but won&#39;t remove these values from MapA, how can i do that?\r\n```\r\nMapA.entrySet().stream().filter(entry-&gt;entry.getValue().get(1).equals(&quot;InComplete&quot;)).collect(Collectors.toMap())\r\n```\r\n\r\nAppreciate your help\r\n\r\n\r\n\r\n**UPDATE**\r\n\r\n```\r\n def mapB = [:].withDefault {key -&gt; return []}\r\n    Iterator&lt;Map.Entry&lt;Object, ArrayList&gt;&gt; iterator = mapA.entrySet().iterator();\r\n    while (iterator.hasNext()) {\r\n        Map.Entry&lt;Object, ArrayList&gt; entry = iterator.next();\r\n        if(entry.getValue().get(1).equals(&quot;InComplete&quot;)) {\r\n            mapB.put(entry.getKey(), entry.getValue())\r\n            iterator.remove()\r\n        }\r\n    }\r\n```\r\n\r\n","title":"Segregating a Map in two map based on value in Groovy or java","body":"<p>I have a map of type Map&lt;Object,ArrayList&gt; MapA.\nmap can have values like</p>\n<pre><code>MapA\n{key=0003bb2d-f3cf-4b5c-9f34 , value = [&quot;12345&quot;,&quot;Complete&quot;,&quot;5431&quot;],\nkey=0003bb2d-f3cf-4b5c-9f71 , value = [&quot;2311&quot;,&quot;InComplete&quot;,&quot;5321&quot;],\nkey=0003bb2d-f3cf-4b5c-1d71 , value = [&quot;4567&quot;,&quot;InComplete&quot;,&quot;4321&quot;],\nkey=0003bb2d-f3cf-4b5c-1r51 , value = [&quot;2345&quot;,&quot;Complete&quot;,&quot;5432&quot;]}\n\n\noutput should be \n\nMapA\n{key=0003bb2d-f3cf-4b5c-9f34 , value = [&quot;12345&quot;,&quot;Complete&quot;,&quot;5431&quot;],\nkey=0003bb2d-f3cf-4b5c-1r51 , value = [&quot;2345&quot;,&quot;Complete&quot;,&quot;5432&quot;]}\n\nMapB\n{key=0003bb2d-f3cf-4b5c-9f71 , value = [&quot;2311&quot;,&quot;InComplete&quot;,&quot;5321&quot;],\nkey=0003bb2d-f3cf-4b5c-1d71 , value = [&quot;4567&quot;,&quot;InComplete&quot;,&quot;4321&quot;]}\n\n</code></pre>\n<p>I want to create a new MapB from MapA having all key value pairs, where value has &quot;InComplete&quot; in it. Either i can have two extra map having &quot;Complete&quot; and &quot;InComplete&quot; KeyValue pairs or if i can remove Incomplete from MapA.</p>\n<p>So i want to Segregate MapA on the basis of Complete or InComplete into two seperate maps.</p>\n<p>I need to write it in groovy but if i can get some hint in java 8 as well, i can try to convert it.</p>\n<p>Code snippet i am working on but this will create new Map but won't remove these values from MapA, how can i do that?</p>\n<pre><code>MapA.entrySet().stream().filter(entry-&gt;entry.getValue().get(1).equals(&quot;InComplete&quot;)).collect(Collectors.toMap())\n</code></pre>\n<p>Appreciate your help</p>\n<p><strong>UPDATE</strong></p>\n<pre><code> def mapB = [:].withDefault {key -&gt; return []}\n    Iterator&lt;Map.Entry&lt;Object, ArrayList&gt;&gt; iterator = mapA.entrySet().iterator();\n    while (iterator.hasNext()) {\n        Map.Entry&lt;Object, ArrayList&gt; entry = iterator.next();\n        if(entry.getValue().get(1).equals(&quot;InComplete&quot;)) {\n            mapB.put(entry.getKey(), entry.getValue())\n            iterator.remove()\n        }\n    }\n</code></pre>\n"},{"tags":["java","multithreading"],"comments":[{"owner":{"account_id":26075,"reputation":41643,"user_id":67566,"accept_rate":73,"display_name":"James Black"},"score":1,"creation_date":1310242193,"post_id":6637170,"comment_id":7840575,"body_markdown":"You may want to read this thread and then see if there is a better way to word your question, as which is better will depend on what you are doing, how your code is accessing objects/variables. http://forum.ragezone.com/f683/synchronised-vs-reentrantlocks-696540/","body":"You may want to read this thread and then see if there is a better way to word your question, as which is better will depend on what you are doing, how your code is accessing objects/variables. <a href=\"http://forum.ragezone.com/f683/synchronised-vs-reentrantlocks-696540/\" rel=\"nofollow noreferrer\">forum.ragezone.com/f683/synchronised-vs-reentrantlocks-69654&zwnj;&#8203;0</a>"}],"answers":[{"tags":[],"owner":{"account_id":30285,"reputation":55210,"user_id":82511,"accept_rate":71,"display_name":"djna"},"down_vote_count":1,"up_vote_count":30,"is_accepted":true,"score":29,"last_activity_date":1382537810,"creation_date":1310242302,"answer_id":6637213,"question_id":6637170,"body_markdown":"Synchronized allows in one thread at a time.\r\n\r\nRead/Write locks allow in multiple readers a the same time, but only if no writers are already in. Hence under some usage scenarios we can get better concurrency, because the reader populations can proceed together.\r\n\r\nJava API [documentation][1] gives the example of collection classes which are expected to have more readers than writers.\r\n\r\n\r\n  [1]: http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/locks/ReentrantReadWriteLock.html","title":"ReentrantReadWriteLock vs synchronized","body":"<p>Synchronized allows in one thread at a time.</p>\n\n<p>Read/Write locks allow in multiple readers a the same time, but only if no writers are already in. Hence under some usage scenarios we can get better concurrency, because the reader populations can proceed together.</p>\n\n<p>Java API <a href=\"http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/locks/ReentrantReadWriteLock.html\" rel=\"noreferrer\">documentation</a> gives the example of collection classes which are expected to have more readers than writers.</p>\n"},{"tags":[],"owner":{"account_id":66010,"reputation":22927,"user_id":193906,"display_name":"Sanjay T. Sharma"},"down_vote_count":0,"up_vote_count":17,"is_accepted":false,"score":17,"last_activity_date":1662564446,"creation_date":1310243006,"answer_id":6637284,"question_id":6637170,"body_markdown":"The [locking article by Brian][1] explains in detail the pros and cons of each approach.\r\n\r\n&gt; The Lock framework is a compatible\r\n&gt; replacement for synchronization, which\r\n&gt; offers many features not provided by\r\n&gt; synchronized, as well as\r\n&gt; implementations offering better\r\n&gt; performance under contention. However,\r\n&gt; the existence of these obvious\r\n&gt; benefits are not a good enough reason\r\n&gt; to always prefer ReentrantLock to\r\n&gt; synchronized. Instead, make the\r\n&gt; decision on the basis of whether you\r\n&gt; need the power of ReentrantLock. In\r\n&gt; the vast majority of cases, you will\r\n&gt; not -- synchronization works just\r\n&gt; fine, works on all JVMs, is understood\r\n&gt; by a wider range of developers, and is\r\n&gt; less error-prone. Save Lock for when\r\n&gt; you really need it. In those cases,\r\n&gt; you&#39;ll be glad you have it.\r\n\r\n  [1]: https://web.archive.org/web/20200809031812/http://www.ibm.com/developerworks/java/library/j-jtp10264/","title":"ReentrantReadWriteLock vs synchronized","body":"<p>The <a href=\"https://web.archive.org/web/20200809031812/http://www.ibm.com/developerworks/java/library/j-jtp10264/\" rel=\"nofollow noreferrer\">locking article by Brian</a> explains in detail the pros and cons of each approach.</p>\n<blockquote>\n<p>The Lock framework is a compatible\nreplacement for synchronization, which\noffers many features not provided by\nsynchronized, as well as\nimplementations offering better\nperformance under contention. However,\nthe existence of these obvious\nbenefits are not a good enough reason\nto always prefer ReentrantLock to\nsynchronized. Instead, make the\ndecision on the basis of whether you\nneed the power of ReentrantLock. In\nthe vast majority of cases, you will\nnot -- synchronization works just\nfine, works on all JVMs, is understood\nby a wider range of developers, and is\nless error-prone. Save Lock for when\nyou really need it. In those cases,\nyou'll be glad you have it.</p>\n</blockquote>\n"},{"tags":[],"owner":{"account_id":9599750,"reputation":2970,"user_id":7208029,"display_name":"Chai T. Rex"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1527814484,"creation_date":1527814484,"answer_id":50634707,"question_id":6637170,"body_markdown":"It should be noted that [`StampedLock`](https://docs.oracle.com/javase/8/docs/api/java/util/concurrent/locks/StampedLock.html) has since come out with Java 8, and it&#39;s much faster than `ReentrantReadWriteLock` (especially as you use more and more threads) when you don&#39;t use the lock in a reentrant manner (using `StampedLock` reentrantly can lead to deadlocks, so don&#39;t do it).\r\n\r\nIt also allows optimistic read nonlocks that are available if there is no write lock in effect. Unlike a normal read lock, they don&#39;t block a write lock from being established. You can check whether a write lock has been established over your optimistic read nonlock by using [the `validate` method](https://docs.oracle.com/javase/8/docs/api/java/util/concurrent/locks/StampedLock.html#validate-long-).\r\n\r\nIts interface is a little different since you have to store a `long` value called a stamp in order to later unlock a read or write lock properly or to later `validate` an optimistic read nonlock properly when you&#39;re done.","title":"ReentrantReadWriteLock vs synchronized","body":"<p>It should be noted that <a href=\"https://docs.oracle.com/javase/8/docs/api/java/util/concurrent/locks/StampedLock.html\" rel=\"nofollow noreferrer\"><code>StampedLock</code></a> has since come out with Java 8, and it's much faster than <code>ReentrantReadWriteLock</code> (especially as you use more and more threads) when you don't use the lock in a reentrant manner (using <code>StampedLock</code> reentrantly can lead to deadlocks, so don't do it).</p>\n\n<p>It also allows optimistic read nonlocks that are available if there is no write lock in effect. Unlike a normal read lock, they don't block a write lock from being established. You can check whether a write lock has been established over your optimistic read nonlock by using <a href=\"https://docs.oracle.com/javase/8/docs/api/java/util/concurrent/locks/StampedLock.html#validate-long-\" rel=\"nofollow noreferrer\">the <code>validate</code> method</a>.</p>\n\n<p>Its interface is a little different since you have to store a <code>long</code> value called a stamp in order to later unlock a read or write lock properly or to later <code>validate</code> an optimistic read nonlock properly when you're done.</p>\n"}],"owner":{"account_id":436835,"reputation":7656,"user_id":824210,"accept_rate":92,"display_name":"Mike"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":13880,"favorite_count":0,"down_vote_count":1,"up_vote_count":23,"accepted_answer_id":6637213,"answer_count":3,"score":22,"last_activity_date":1662564446,"creation_date":1310241888,"question_id":6637170,"body_markdown":"When should we use *ReentrantReadWriteLock* as compared to *synchronized* keyword in multithreaded environment in Java? \r\n\r\nWhat are the benefits of using *ReentrantReadWriteLock* over *synchronized* in Java?\r\n\r\nCan any one give an example as well (in Java)?\r\n\r\nThanks!","title":"ReentrantReadWriteLock vs synchronized","body":"<p>When should we use <em>ReentrantReadWriteLock</em> as compared to <em>synchronized</em> keyword in multithreaded environment in Java? </p>\n\n<p>What are the benefits of using <em>ReentrantReadWriteLock</em> over <em>synchronized</em> in Java?</p>\n\n<p>Can any one give an example as well (in Java)?</p>\n\n<p>Thanks!</p>\n"},{"tags":["java","project-reactor"],"answers":[{"tags":[],"owner":{"account_id":14492583,"reputation":701,"user_id":10468291,"display_name":"Patrick Hooijer"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1662564423,"creation_date":1662564423,"answer_id":73638065,"question_id":73635957,"body_markdown":"This is because the last buffer wasn&#39;t at full capacity yet. `Flux.buffer` will emit an item whenever it has a buffer at full capacity. When `Flux.fromStream` emits an onComplete signal, it first passes the `.doOnComplete`, then it is received at `.buffer` after which two things can happen:\r\n\r\n1. Either Flux.buffer has no items in it&#39;s current buffer, and it will relay the onComplete signal downstream.\r\n2. Or it has some leftover items, then it will emit the incomplete buffer first (`[2]` in your example), then relay the onComplete signal. Finally, the `.subscribe` receives the incomplete buffer.\r\n\r\nIf you place the `.doOnComplete` after the `.buffer`, you would find the onComplete signal always to be after the last incomplete buffer, as you are now listening to `Flux.buffer` instead of `Flux.fromStream`:\r\n\r\n```java\r\nFlux.fromStream(IntStream.range(0, 3).boxed()) // Three elements here\r\n        .doOnNext(subscription -&gt; out.println(&quot;onNext&quot;))\r\n        .doOnComplete(() -&gt; out.println(&quot;OnComplete fromStream&quot;))\r\n        .buffer(2) // Buffer size 2\r\n        .doOnComplete(() -&gt; out.println(&quot;OnComplete buffer&quot;))\r\n        .subscribe(integers -&gt; out.println(&quot;Numbers &quot; + integers));\r\n```\r\nOutput:\r\n```\r\nonNext\r\nonNext\r\nNumbers [0, 1]\r\nonNext\r\nOnComplete fromStream\r\nNumbers [2]\r\nOnComplete buffer\r\n```","title":"Event sequencing in project-reactor","body":"<p>This is because the last buffer wasn't at full capacity yet. <code>Flux.buffer</code> will emit an item whenever it has a buffer at full capacity. When <code>Flux.fromStream</code> emits an onComplete signal, it first passes the <code>.doOnComplete</code>, then it is received at <code>.buffer</code> after which two things can happen:</p>\n<ol>\n<li>Either Flux.buffer has no items in it's current buffer, and it will relay the onComplete signal downstream.</li>\n<li>Or it has some leftover items, then it will emit the incomplete buffer first (<code>[2]</code> in your example), then relay the onComplete signal. Finally, the <code>.subscribe</code> receives the incomplete buffer.</li>\n</ol>\n<p>If you place the <code>.doOnComplete</code> after the <code>.buffer</code>, you would find the onComplete signal always to be after the last incomplete buffer, as you are now listening to <code>Flux.buffer</code> instead of <code>Flux.fromStream</code>:</p>\n<pre class=\"lang-java prettyprint-override\"><code>Flux.fromStream(IntStream.range(0, 3).boxed()) // Three elements here\n        .doOnNext(subscription -&gt; out.println(&quot;onNext&quot;))\n        .doOnComplete(() -&gt; out.println(&quot;OnComplete fromStream&quot;))\n        .buffer(2) // Buffer size 2\n        .doOnComplete(() -&gt; out.println(&quot;OnComplete buffer&quot;))\n        .subscribe(integers -&gt; out.println(&quot;Numbers &quot; + integers));\n</code></pre>\n<p>Output:</p>\n<pre><code>onNext\nonNext\nNumbers [0, 1]\nonNext\nOnComplete fromStream\nNumbers [2]\nOnComplete buffer\n</code></pre>\n"}],"owner":{"account_id":2297930,"reputation":98,"user_id":2018929,"display_name":"Guillaume Macke"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":276,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":73638065,"answer_count":1,"score":0,"last_activity_date":1662564423,"creation_date":1662555479,"question_id":73635957,"body_markdown":"I&#39;m pretty new in project-reactor and I need some clarification about events sequencing.\r\n\r\n**Example 1 (Flux with 2 elements and buffer size == 2) :**\r\n```java\r\nFlux.fromStream(IntStream.range(0, 2).boxed()) // Two element in the stream\r\n   .doOnSubscribe(subscription -&gt; out.println(&quot;OnSubscribe&quot;))\r\n   .doOnRequest(l -&gt; out.println(&quot;OnRequest&quot;))\r\n   .doOnNext(subscription -&gt; out.println(&quot;onNext&quot;))\r\n   .doOnEach(subscription -&gt; out.println(&quot;onEach&quot;))\r\n   .doOnComplete(() -&gt; out.println(&quot;OnComplete&quot;))\r\n   .doOnTerminate(() -&gt; out.println(&quot;onTerminate&quot;))\r\n   .doAfterTerminate(() -&gt; out.println(&quot;doAfterTerminate&quot;))\r\n   .doFinally(signalType -&gt; out.println(&quot;doFinally&quot;))\r\n   .doOnCancel(() -&gt; out.println(&quot;onCancel&quot;))\r\n   .doOnError(throwable -&gt; out.println(&quot;onError&quot;))\r\n   .buffer(2) // Buffer size 2\r\n   .subscribe(integers -&gt; out.println(&quot;Numbers &quot; + integers));\r\n```\r\n\r\n**Output 1 :**\r\n\r\n\r\n```text\r\nOnSubscribe\r\nOnRequest\r\nonNext\r\nonEach\r\nonNext\r\nonEach\r\nNumbers [0, 1]\r\nonEach\r\nOnComplete\r\nonTerminate\r\ndoFinally\r\ndoAfterTerminate\r\n```\r\n\r\n**Example 2 (Flux with 3 elements and buffer size == 2):**\r\n```java\r\nFlux.fromStream(IntStream.range(0, 3).boxed()) // Three elements here !!!!!\r\n   .doOnSubscribe(subscription -&gt; out.println(&quot;OnSubscribe&quot;))\r\n   .doOnRequest(l -&gt; out.println(&quot;OnRequest&quot;))\r\n   .doOnNext(subscription -&gt; out.println(&quot;onNext&quot;))\r\n   .doOnEach(subscription -&gt; out.println(&quot;onEach&quot;))\r\n   .doOnComplete(() -&gt; out.println(&quot;OnComplete&quot;))\r\n   .doOnTerminate(() -&gt; out.println(&quot;onTerminate&quot;))\r\n   .doAfterTerminate(() -&gt; out.println(&quot;doAfterTerminate&quot;))\r\n   .doFinally(signalType -&gt; out.println(&quot;doFinally&quot;))\r\n   .doOnCancel(() -&gt; out.println(&quot;onCancel&quot;))\r\n   .doOnError(throwable -&gt; out.println(&quot;onError&quot;))\r\n   .buffer(2) // Buffer size 2\r\n   .subscribe(integers -&gt; out.println(&quot;Numbers &quot; + integers));\r\n```\r\n\r\n**Output 2 :**\r\n\r\n\r\n```text\r\nOnSubscribe\r\nOnRequest\r\nonNext\r\nonEach\r\nonNext\r\nonEach\r\nNumbers [0, 1]\r\nonNext\r\nonEach\r\nonEach\r\nOnComplete\r\nonTerminate\r\nNumbers [2]\r\ndoFinally\r\ndoAfterTerminate\r\n```\r\nWhy in the second example, onComplete was triggered before consumer ending ? \r\n```\r\nOnComplete\r\nonTerminate\r\nNumbers [2] -&gt; this one ? \r\n```\r\nI thought that onComplete was triggered when the Flux completes successfully but here, it&#39;s not.\r\n\r\nI&#39;m little bit confused.","title":"Event sequencing in project-reactor","body":"<p>I'm pretty new in project-reactor and I need some clarification about events sequencing.</p>\n<p><strong>Example 1 (Flux with 2 elements and buffer size == 2) :</strong></p>\n<pre class=\"lang-java prettyprint-override\"><code>Flux.fromStream(IntStream.range(0, 2).boxed()) // Two element in the stream\n   .doOnSubscribe(subscription -&gt; out.println(&quot;OnSubscribe&quot;))\n   .doOnRequest(l -&gt; out.println(&quot;OnRequest&quot;))\n   .doOnNext(subscription -&gt; out.println(&quot;onNext&quot;))\n   .doOnEach(subscription -&gt; out.println(&quot;onEach&quot;))\n   .doOnComplete(() -&gt; out.println(&quot;OnComplete&quot;))\n   .doOnTerminate(() -&gt; out.println(&quot;onTerminate&quot;))\n   .doAfterTerminate(() -&gt; out.println(&quot;doAfterTerminate&quot;))\n   .doFinally(signalType -&gt; out.println(&quot;doFinally&quot;))\n   .doOnCancel(() -&gt; out.println(&quot;onCancel&quot;))\n   .doOnError(throwable -&gt; out.println(&quot;onError&quot;))\n   .buffer(2) // Buffer size 2\n   .subscribe(integers -&gt; out.println(&quot;Numbers &quot; + integers));\n</code></pre>\n<p><strong>Output 1 :</strong></p>\n<pre><code>OnSubscribe\nOnRequest\nonNext\nonEach\nonNext\nonEach\nNumbers [0, 1]\nonEach\nOnComplete\nonTerminate\ndoFinally\ndoAfterTerminate\n</code></pre>\n<p><strong>Example 2 (Flux with 3 elements and buffer size == 2):</strong></p>\n<pre class=\"lang-java prettyprint-override\"><code>Flux.fromStream(IntStream.range(0, 3).boxed()) // Three elements here !!!!!\n   .doOnSubscribe(subscription -&gt; out.println(&quot;OnSubscribe&quot;))\n   .doOnRequest(l -&gt; out.println(&quot;OnRequest&quot;))\n   .doOnNext(subscription -&gt; out.println(&quot;onNext&quot;))\n   .doOnEach(subscription -&gt; out.println(&quot;onEach&quot;))\n   .doOnComplete(() -&gt; out.println(&quot;OnComplete&quot;))\n   .doOnTerminate(() -&gt; out.println(&quot;onTerminate&quot;))\n   .doAfterTerminate(() -&gt; out.println(&quot;doAfterTerminate&quot;))\n   .doFinally(signalType -&gt; out.println(&quot;doFinally&quot;))\n   .doOnCancel(() -&gt; out.println(&quot;onCancel&quot;))\n   .doOnError(throwable -&gt; out.println(&quot;onError&quot;))\n   .buffer(2) // Buffer size 2\n   .subscribe(integers -&gt; out.println(&quot;Numbers &quot; + integers));\n</code></pre>\n<p><strong>Output 2 :</strong></p>\n<pre><code>OnSubscribe\nOnRequest\nonNext\nonEach\nonNext\nonEach\nNumbers [0, 1]\nonNext\nonEach\nonEach\nOnComplete\nonTerminate\nNumbers [2]\ndoFinally\ndoAfterTerminate\n</code></pre>\n<p>Why in the second example, onComplete was triggered before consumer ending ?</p>\n<pre><code>OnComplete\nonTerminate\nNumbers [2] -&gt; this one ? \n</code></pre>\n<p>I thought that onComplete was triggered when the Flux completes successfully but here, it's not.</p>\n<p>I'm little bit confused.</p>\n"},{"tags":["java","web-services","spring-boot"],"comments":[{"owner":{"account_id":7272626,"reputation":2748,"user_id":5545087,"display_name":"Kartik Pandya"},"score":0,"creation_date":1476762962,"post_id":39923387,"comment_id":67470796,"body_markdown":"Any particular reason why Jersey and not use Spring MVC supported `RestController`?","body":"Any particular reason why Jersey and not use Spring MVC supported <code>RestController</code>?"}],"answers":[{"tags":[],"owner":{"account_id":1546286,"reputation":7588,"user_id":1439771,"accept_rate":75,"display_name":"Alex"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1476754177,"creation_date":1476754177,"answer_id":40098125,"question_id":39923387,"body_markdown":"I didn&#39;t use this personally but it seems that spring provides starter pack for JAX-WS\r\n\r\nTake a look at [this artifact](https://mvnrepository.com/artifact/org.springframework.boot/spring-boot-starter-jersey/1.4.1.RELEASE). It should be enough just to add this dependency to your project:\r\n\r\n    &lt;dependency&gt;\r\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n        &lt;artifactId&gt;spring-boot-starter-jersey&lt;/artifactId&gt;\r\n    &lt;/dependency&gt;","title":"Integration of JAX-WS to Spring Boot","body":"<p>I didn't use this personally but it seems that spring provides starter pack for JAX-WS</p>\n\n<p>Take a look at <a href=\"https://mvnrepository.com/artifact/org.springframework.boot/spring-boot-starter-jersey/1.4.1.RELEASE\" rel=\"nofollow\">this artifact</a>. It should be enough just to add this dependency to your project:</p>\n\n<pre><code>&lt;dependency&gt;\n    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n    &lt;artifactId&gt;spring-boot-starter-jersey&lt;/artifactId&gt;\n&lt;/dependency&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":397090,"reputation":3123,"user_id":761035,"accept_rate":55,"display_name":"Shiraaz.M"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1476772036,"creation_date":1476772036,"answer_id":40101008,"question_id":39923387,"body_markdown":"Ideally you&#39;d want to use a Spring Boot Starter to assist you. According to [their documentation][1]:\r\n\r\n&gt; Starters are a set of convenient dependency descriptors that you can\r\n&gt; include in your application. You get a one-stop-shop for all the\r\n&gt; Spring and related technology that you need, without having to hunt\r\n&gt; through sample code and copy paste loads of dependency descriptors.\r\n&gt; For example, if you want to get started using Spring and JPA for\r\n&gt; database access, just include the spring-boot-starter-data-jpa\r\n&gt; dependency in your project, and you are good to go.\r\n\r\nUsing [this list][2] of official and community starters, it looks like you have the following options:\r\n\r\n* `spring-boot-starter-jersey` should be able to handle JAX-RS\r\n* `spring-boot-web-services` might be able to handle JAX-WS. From what I understand, you might need to do things the &#39;Spring Web Services&#39; way which is different to JAX-WS. It&#39;s been a while since I worked with Spring Web Services, so I might be incorrect on this point.\r\n* The Apache CXF starter can support both JAX-RS and JAX-WS which seems to meet your requirement. They have [this guide][3] for their spring boot integration for you to look at.\r\n\r\n\r\n  [1]: http://docs.spring.io/spring-boot/docs/current-SNAPSHOT/reference/htmlsingle/#using-boot-starter\r\n  [2]: https://github.com/spring-projects/spring-boot/tree/master/spring-boot-starters\r\n  [3]: http://cxf.apache.org/docs/springboot.html","title":"Integration of JAX-WS to Spring Boot","body":"<p>Ideally you'd want to use a Spring Boot Starter to assist you. According to <a href=\"http://docs.spring.io/spring-boot/docs/current-SNAPSHOT/reference/htmlsingle/#using-boot-starter\" rel=\"nofollow\">their documentation</a>:</p>\n\n<blockquote>\n  <p>Starters are a set of convenient dependency descriptors that you can\n  include in your application. You get a one-stop-shop for all the\n  Spring and related technology that you need, without having to hunt\n  through sample code and copy paste loads of dependency descriptors.\n  For example, if you want to get started using Spring and JPA for\n  database access, just include the spring-boot-starter-data-jpa\n  dependency in your project, and you are good to go.</p>\n</blockquote>\n\n<p>Using <a href=\"https://github.com/spring-projects/spring-boot/tree/master/spring-boot-starters\" rel=\"nofollow\">this list</a> of official and community starters, it looks like you have the following options:</p>\n\n<ul>\n<li><code>spring-boot-starter-jersey</code> should be able to handle JAX-RS</li>\n<li><code>spring-boot-web-services</code> might be able to handle JAX-WS. From what I understand, you might need to do things the 'Spring Web Services' way which is different to JAX-WS. It's been a while since I worked with Spring Web Services, so I might be incorrect on this point.</li>\n<li>The Apache CXF starter can support both JAX-RS and JAX-WS which seems to meet your requirement. They have <a href=\"http://cxf.apache.org/docs/springboot.html\" rel=\"nofollow\">this guide</a> for their spring boot integration for you to look at.</li>\n</ul>\n"},{"tags":[],"owner":{"account_id":16872647,"reputation":120,"user_id":12200835,"display_name":"Mohammed Ashraf"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1662564407,"creation_date":1662564407,"answer_id":73638060,"question_id":39923387,"body_markdown":"I have solved the problem by using this dependency \r\n\r\n    &lt;dependency&gt;\r\n            &lt;groupId&gt;org.apache.cxf&lt;/groupId&gt;\r\n            &lt;artifactId&gt;cxf-spring-boot-starter-jaxws&lt;/artifactId&gt;\r\n            &lt;version&gt;3.3.6&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n\r\nand add this bean in the configuration bean\r\n\r\n    \r\n    import org.springframework.beans.factory.annotation.Autowired;\r\n    \r\n    import org.springframework.context.annotation.Bean;\r\n    import org.springframework.context.annotation.Configuration;\r\n    \r\n    import javax.xml.ws.Endpoint;\r\n    import org.apache.cxf.Bus;\r\n    import org.apache.cxf.jaxws.EndpointImpl;\r\n    \r\n    @Configuration\r\n    public class WebServiceConfig{\r\n    \r\n        @Autowired\r\n        private Bus bus;\r\n    \r\n        @Bean\r\n        public Endpoint endpoint() {\r\n            EndpointImpl endpoint = new EndpointImpl(bus, new SpPortImpl());\r\n            endpoint.publish(&quot;/NpcdbService&quot;);\r\n            return endpoint;\r\n        }\r\n    }\r\n\r\nSpPortImpl is the class annotated with @WebService","title":"Integration of JAX-WS to Spring Boot","body":"<p>I have solved the problem by using this dependency</p>\n<pre><code>&lt;dependency&gt;\n        &lt;groupId&gt;org.apache.cxf&lt;/groupId&gt;\n        &lt;artifactId&gt;cxf-spring-boot-starter-jaxws&lt;/artifactId&gt;\n        &lt;version&gt;3.3.6&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n<p>and add this bean in the configuration bean</p>\n<pre><code>import org.springframework.beans.factory.annotation.Autowired;\n\nimport org.springframework.context.annotation.Bean;\nimport org.springframework.context.annotation.Configuration;\n\nimport javax.xml.ws.Endpoint;\nimport org.apache.cxf.Bus;\nimport org.apache.cxf.jaxws.EndpointImpl;\n\n@Configuration\npublic class WebServiceConfig{\n\n    @Autowired\n    private Bus bus;\n\n    @Bean\n    public Endpoint endpoint() {\n        EndpointImpl endpoint = new EndpointImpl(bus, new SpPortImpl());\n        endpoint.publish(&quot;/NpcdbService&quot;);\n        return endpoint;\n    }\n}\n</code></pre>\n<p>SpPortImpl is the class annotated with @WebService</p>\n"}],"owner":{"account_id":205049,"reputation":73345,"user_id":453596,"accept_rate":76,"display_name":"kamaci"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":4126,"favorite_count":0,"down_vote_count":0,"up_vote_count":7,"answer_count":3,"score":7,"last_activity_date":1662564407,"creation_date":1475863496,"question_id":39923387,"body_markdown":"I have an existing API which has both JAX-RS and JAX-WS. I want to migrate it into a Spring Boot application. What I&#39;ve done for JAX-RS part is registering that class:\r\n\r\n    @GET\r\n    @Path(&quot;/ping&quot;)\r\n    @Produces(&quot;text/plain&quot;)\r\n    String ping();\r\n\r\ninto a `Jersey Config` which extends `ResourceConfig`. Here is the example from JAX-WS of same class:\r\n\r\n    @WebMethod(operationName = &quot;Ping&quot;, action = &quot;ping-app&quot;)\r\n    String ping();\r\n\r\nSince I&#39;ve used reference implementations of JAX-RS and JAX-WS I hope that it should be easy to migrate it into Spring Boot. I&#39;ve easily done JAX-RS integration. Is there any such simple way to integrate JAX-WS too?","title":"Integration of JAX-WS to Spring Boot","body":"<p>I have an existing API which has both JAX-RS and JAX-WS. I want to migrate it into a Spring Boot application. What I've done for JAX-RS part is registering that class:</p>\n\n<pre><code>@GET\n@Path(\"/ping\")\n@Produces(\"text/plain\")\nString ping();\n</code></pre>\n\n<p>into a <code>Jersey Config</code> which extends <code>ResourceConfig</code>. Here is the example from JAX-WS of same class:</p>\n\n<pre><code>@WebMethod(operationName = \"Ping\", action = \"ping-app\")\nString ping();\n</code></pre>\n\n<p>Since I've used reference implementations of JAX-RS and JAX-WS I hope that it should be easy to migrate it into Spring Boot. I've easily done JAX-RS integration. Is there any such simple way to integrate JAX-WS too?</p>\n"},{"tags":["java","web-services","soap","soapui","wss4j"],"answers":[{"tags":[],"owner":{"account_id":13046654,"reputation":2497,"user_id":9428319,"display_name":"Maciej Pulikowski"},"down_vote_count":0,"up_vote_count":5,"is_accepted":true,"score":5,"last_activity_date":1561317897,"creation_date":1561316830,"answer_id":56727015,"question_id":56701257,"body_markdown":"Ok, I have solved the problem.\r\n\r\nNormally this code should work in my situation.\r\n\r\n    //strange static method from apache o.O\r\n    org.apache.xml.security.Init.init();\r\n    List&lt;WSEncryptionPart&gt; wsEncryptionParts = new ArrayList&lt;&gt;();\r\n    WSEncryptionPart somethingPart = new WSEncryptionPart(&quot;something&quot;,&quot;somethingNamespace&quot;,&quot;&quot;);\r\n    wsEncryptionParts.add(somethingPart);\r\n    sign.addReferencesToSign(wsEncryptionParts);\r\n\r\nNevertheless, It doesn&#39;t work. It always throws an exception:\r\n\r\n&gt; org.apache.wss4j.common.ext.WSSecurityException: No message with ID\r\n&gt; &quot;noXMLSig&quot; found in resource bundle\r\n&gt; &quot;org/apache/xml/security/resource/xmlsecurity&quot;. Original Exception was\r\n&gt; a org.apache.wss4j.common.ext.WSSecurityException and message No\r\n&gt; message with ID &quot;noEncElement&quot; found in resource bundle\r\n&gt; &quot;org/apache/xml/security/resource/xmlsecurity&quot;\r\n\r\nI could not find an answer to what is wrong with my soap message or code. \r\n\r\nHowever, after a time of debugging of **org.apache.wss4j.dom.message.WSSecSignature**. I felt that something is wrong with the class. I decided to modify a method **build(Crypto cr)**.\r\n\r\n    public Document build(Crypto cr) throws WSSecurityException {\r\n            LOG.debug(&quot;Beginning signing...&quot;);\r\n            this.prepare(cr);\r\n            if (this.getParts().isEmpty()) {\r\n                this.getParts().add(WSSecurityUtil.getDefaultEncryptionPart(this.getDocument()));\r\n    \r\n                // --- Here is my edit - And it works!\r\n    \r\n                WSEncryptionPart aaa = new WSEncryptionPart(&quot;something&quot;,&quot;somethingNamespace&quot;,&quot;&quot;);\r\n                this.getParts().add(aaa);\r\n    \r\n                // ----------------------------------\r\n    \r\n            } else {\r\n                Iterator var2 = this.getParts().iterator();\r\n    \r\n                label33:\r\n                while(true) {\r\n                    while(true) {\r\n                        if (!var2.hasNext()) {\r\n                            break label33;\r\n                        }\r\n    \r\n                        WSEncryptionPart part = (WSEncryptionPart)var2.next();\r\n                        if (part.getId() == null &amp;&amp; &quot;STRTransform&quot;.equals(part.getName())) {\r\n                            part.setId(this.strUri);\r\n                        } else if (&quot;KeyInfo&quot;.equals(part.getName()) &amp;&amp; &quot;http://www.w3.org/2000/09/xmldsig#&quot;.equals(part.getNamespace()) &amp;&amp; part.getElement() == null) {\r\n                            Element keyInfoElement = this.getKeyInfoElement();\r\n                            part.setElement(keyInfoElement);\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n    \r\n            List&lt;javax.xml.crypto.dsig.Reference&gt; referenceList = this.addReferencesToSign(this.getParts());\r\n            this.computeSignature(referenceList);\r\n            if (this.bstToken != null) {\r\n                this.prependBSTElementToHeader();\r\n            }\r\n    \r\n            return this.getDocument();\r\n        }\r\n\r\n \r\nOf course, the solution is quite weak. Yet, at least it works now.\r\n\r\nThe problem exists in the newest version:\r\n\r\n**wss4j-ws-security-dom 2.2.2**\r\n\r\n**wss4j-ws-security-common 2.2.2**\r\n","title":"WSSE - Sign an element inside soapenv:Header","body":"<p>Ok, I have solved the problem.</p>\n\n<p>Normally this code should work in my situation.</p>\n\n<pre><code>//strange static method from apache o.O\norg.apache.xml.security.Init.init();\nList&lt;WSEncryptionPart&gt; wsEncryptionParts = new ArrayList&lt;&gt;();\nWSEncryptionPart somethingPart = new WSEncryptionPart(\"something\",\"somethingNamespace\",\"\");\nwsEncryptionParts.add(somethingPart);\nsign.addReferencesToSign(wsEncryptionParts);\n</code></pre>\n\n<p>Nevertheless, It doesn't work. It always throws an exception:</p>\n\n<blockquote>\n  <p>org.apache.wss4j.common.ext.WSSecurityException: No message with ID\n  \"noXMLSig\" found in resource bundle\n  \"org/apache/xml/security/resource/xmlsecurity\". Original Exception was\n  a org.apache.wss4j.common.ext.WSSecurityException and message No\n  message with ID \"noEncElement\" found in resource bundle\n  \"org/apache/xml/security/resource/xmlsecurity\"</p>\n</blockquote>\n\n<p>I could not find an answer to what is wrong with my soap message or code. </p>\n\n<p>However, after a time of debugging of <strong>org.apache.wss4j.dom.message.WSSecSignature</strong>. I felt that something is wrong with the class. I decided to modify a method <strong>build(Crypto cr)</strong>.</p>\n\n<pre><code>public Document build(Crypto cr) throws WSSecurityException {\n        LOG.debug(\"Beginning signing...\");\n        this.prepare(cr);\n        if (this.getParts().isEmpty()) {\n            this.getParts().add(WSSecurityUtil.getDefaultEncryptionPart(this.getDocument()));\n\n            // --- Here is my edit - And it works!\n\n            WSEncryptionPart aaa = new WSEncryptionPart(\"something\",\"somethingNamespace\",\"\");\n            this.getParts().add(aaa);\n\n            // ----------------------------------\n\n        } else {\n            Iterator var2 = this.getParts().iterator();\n\n            label33:\n            while(true) {\n                while(true) {\n                    if (!var2.hasNext()) {\n                        break label33;\n                    }\n\n                    WSEncryptionPart part = (WSEncryptionPart)var2.next();\n                    if (part.getId() == null &amp;&amp; \"STRTransform\".equals(part.getName())) {\n                        part.setId(this.strUri);\n                    } else if (\"KeyInfo\".equals(part.getName()) &amp;&amp; \"http://www.w3.org/2000/09/xmldsig#\".equals(part.getNamespace()) &amp;&amp; part.getElement() == null) {\n                        Element keyInfoElement = this.getKeyInfoElement();\n                        part.setElement(keyInfoElement);\n                    }\n                }\n            }\n        }\n\n        List&lt;javax.xml.crypto.dsig.Reference&gt; referenceList = this.addReferencesToSign(this.getParts());\n        this.computeSignature(referenceList);\n        if (this.bstToken != null) {\n            this.prependBSTElementToHeader();\n        }\n\n        return this.getDocument();\n    }\n</code></pre>\n\n<p>Of course, the solution is quite weak. Yet, at least it works now.</p>\n\n<p>The problem exists in the newest version:</p>\n\n<p><strong>wss4j-ws-security-dom 2.2.2</strong></p>\n\n<p><strong>wss4j-ws-security-common 2.2.2</strong></p>\n"},{"tags":[],"owner":{"account_id":17045842,"reputation":1,"user_id":12332725,"display_name":"user12332725"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1573051556,"creation_date":1573051556,"answer_id":58732673,"question_id":56701257,"body_markdown":"I guess it is supposed to work that way:\r\n\r\n            WSSecSignature sign = new WSSecSignature(secHeader);\r\n            sign.getParts().addAll(getEncryptionParts());\r\n\r\n\r\nWith getEncryptionParts() being the WSEncryptionPart List you want to add.\r\nIf added that way, the build method is capable of finding them, without patching the framework. \r\n\r\n\r\n\r\n","title":"WSSE - Sign an element inside soapenv:Header","body":"<p>I guess it is supposed to work that way:</p>\n\n<pre><code>        WSSecSignature sign = new WSSecSignature(secHeader);\n        sign.getParts().addAll(getEncryptionParts());\n</code></pre>\n\n<p>With getEncryptionParts() being the WSEncryptionPart List you want to add.\nIf added that way, the build method is capable of finding them, without patching the framework. </p>\n"}],"owner":{"account_id":13046654,"reputation":2497,"user_id":9428319,"display_name":"Maciej Pulikowski"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1532,"favorite_count":0,"down_vote_count":0,"up_vote_count":6,"accepted_answer_id":56727015,"answer_count":2,"score":6,"last_activity_date":1662563942,"creation_date":1561111624,"question_id":56701257,"body_markdown":"I want to add **wsse:security** to my soap message. This is my code:\r\n\r\n        public Document signSoapMessage(SOAPMessage message) {\r\n        try {\r\n            Document doc = message.getSOAPBody().getOwnerDocument();\r\n            Crypto crypto = CryptoFactory.getInstance(properties); //File\r\n\r\n            WSSecHeader secHeader = new WSSecHeader(doc);\r\n            secHeader.insertSecurityHeader();\r\n\r\n            InputStream inStream = new FileInputStream(properties.getProperty(&quot;org.apache.ws.security.crypto.merlin.keystore.file&quot;));\r\n\r\n            KeyStore ks = KeyStore.getInstance(&quot;PKCS12&quot;);\r\n            ks.load(inStream, properties.getProperty(&quot;privatekeypassword&quot;).toCharArray());\r\n\r\n            String alias = ks.aliases().nextElement();\r\n            X509Certificate cert = (X509Certificate) ks.getCertificate(alias);\r\n\r\n            WSSecSignature sign = new WSSecSignature(secHeader);\r\n            sign.setX509Certificate(cert);\r\n            sign.setUserInfo(properties.getProperty(&quot;org.apache.ws.security.crypto.merlin.keystore.alias&quot;), properties.getProperty(&quot;privatekeypassword&quot;));\r\n            sign.setKeyIdentifierType(WSConstants.BST_DIRECT_REFERENCE); // Binary Security Token - SecurityTokenReference\r\n            sign.setUseSingleCertificate(true);\r\n            sign.setDigestAlgo(DigestMethod.SHA1);\r\n\r\n            //sign.build(crypto);\r\n            Document signedDoc = sign.build(crypto);\r\n\r\n            return signedDoc;\r\n        } catch (SOAPException e) {\r\n            e.printStackTrace();\r\n            return null;\r\n        } catch (WSSecurityException e) {\r\n            e.printStackTrace();\r\n            throw new RuntimeException(&quot;Error: &quot; + e.getMessage());\r\n        } catch (IOException e) {\r\n            e.printStackTrace();\r\n            return null;\r\n        } catch (CertificateException e) {\r\n            e.printStackTrace();\r\n            return null;\r\n        } catch (NoSuchAlgorithmException e) {\r\n            e.printStackTrace();\r\n            return null;\r\n        } catch (KeyStoreException e) {\r\n            e.printStackTrace();\r\n            return null;\r\n        }\r\n    }\r\nIt works for **soapenv:Body** (It does add **wsu:Id** and **xmlns:wsu** parameters)\r\n\r\nBut there is an extra element in **soapenv:Header** and it doesn&#39;t sign this element. There is no  **wsu:Id** and **xmlns:wsu** parameters and lack of one ds:Reference. \r\n\r\nExample of not signed soap msg:\r\n\r\n    &lt;soapenv:Envelope xmlns:soapenv=&quot;http://schemas.xmlsoap.org/soap/envelope/&quot;&gt;\r\n       &lt;soapenv:Header&gt;\r\n        &lt;!-- this element should be signed but is not - NOT WORKING --&gt;\r\n        &lt;something&gt;\r\n    \t&lt;/something&gt;\r\n    \r\n       &lt;/soapenv:Header&gt;\r\n       &lt;!-- this element should be signed and It does. --&gt;\r\n       &lt;soapenv:Body&gt;\r\n        &lt;/soapenv:Body&gt;\r\n    &lt;/soapenv:Envelope&gt;\r\n\r\n*I compare soap msg from my program to working soap msg from SoapUI project.*\r\n\r\nWhen I post a message to web service I get an error: `wsse:InvalidSecurity - Soap Header must be signed`. While in SoupUI it does works.\r\n\r\nSo my question is how can I force **WSS4j** to sign extra element inside **soapenv:Header** ?","title":"WSSE - Sign an element inside soapenv:Header","body":"<p>I want to add <strong>wsse:security</strong> to my soap message. This is my code:</p>\n\n<pre><code>    public Document signSoapMessage(SOAPMessage message) {\n    try {\n        Document doc = message.getSOAPBody().getOwnerDocument();\n        Crypto crypto = CryptoFactory.getInstance(properties); //File\n\n        WSSecHeader secHeader = new WSSecHeader(doc);\n        secHeader.insertSecurityHeader();\n\n        InputStream inStream = new FileInputStream(properties.getProperty(\"org.apache.ws.security.crypto.merlin.keystore.file\"));\n\n        KeyStore ks = KeyStore.getInstance(\"PKCS12\");\n        ks.load(inStream, properties.getProperty(\"privatekeypassword\").toCharArray());\n\n        String alias = ks.aliases().nextElement();\n        X509Certificate cert = (X509Certificate) ks.getCertificate(alias);\n\n        WSSecSignature sign = new WSSecSignature(secHeader);\n        sign.setX509Certificate(cert);\n        sign.setUserInfo(properties.getProperty(\"org.apache.ws.security.crypto.merlin.keystore.alias\"), properties.getProperty(\"privatekeypassword\"));\n        sign.setKeyIdentifierType(WSConstants.BST_DIRECT_REFERENCE); // Binary Security Token - SecurityTokenReference\n        sign.setUseSingleCertificate(true);\n        sign.setDigestAlgo(DigestMethod.SHA1);\n\n        //sign.build(crypto);\n        Document signedDoc = sign.build(crypto);\n\n        return signedDoc;\n    } catch (SOAPException e) {\n        e.printStackTrace();\n        return null;\n    } catch (WSSecurityException e) {\n        e.printStackTrace();\n        throw new RuntimeException(\"Error: \" + e.getMessage());\n    } catch (IOException e) {\n        e.printStackTrace();\n        return null;\n    } catch (CertificateException e) {\n        e.printStackTrace();\n        return null;\n    } catch (NoSuchAlgorithmException e) {\n        e.printStackTrace();\n        return null;\n    } catch (KeyStoreException e) {\n        e.printStackTrace();\n        return null;\n    }\n}\n</code></pre>\n\n<p>It works for <strong>soapenv:Body</strong> (It does add <strong>wsu:Id</strong> and <strong>xmlns:wsu</strong> parameters)</p>\n\n<p>But there is an extra element in <strong>soapenv:Header</strong> and it doesn't sign this element. There is no  <strong>wsu:Id</strong> and <strong>xmlns:wsu</strong> parameters and lack of one ds:Reference. </p>\n\n<p>Example of not signed soap msg:</p>\n\n<pre><code>&lt;soapenv:Envelope xmlns:soapenv=\"http://schemas.xmlsoap.org/soap/envelope/\"&gt;\n   &lt;soapenv:Header&gt;\n    &lt;!-- this element should be signed but is not - NOT WORKING --&gt;\n    &lt;something&gt;\n    &lt;/something&gt;\n\n   &lt;/soapenv:Header&gt;\n   &lt;!-- this element should be signed and It does. --&gt;\n   &lt;soapenv:Body&gt;\n    &lt;/soapenv:Body&gt;\n&lt;/soapenv:Envelope&gt;\n</code></pre>\n\n<p><em>I compare soap msg from my program to working soap msg from SoapUI project.</em></p>\n\n<p>When I post a message to web service I get an error: <code>wsse:InvalidSecurity - Soap Header must be signed</code>. While in SoupUI it does works.</p>\n\n<p>So my question is how can I force <strong>WSS4j</strong> to sign extra element inside <strong>soapenv:Header</strong> ?</p>\n"},{"tags":["java","loops","recursion","runtime","execution"],"owner":{"account_id":9568330,"reputation":13,"user_id":7106872,"display_name":"Luis Salazar"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":38,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":0,"score":-1,"last_activity_date":1662563914,"creation_date":1662563914,"question_id":73637954,"body_markdown":"i have a block of code i need to improve because i go over the execution time suggested:\r\n\r\n```\r\npublic class terace {\r\n    public boolean trapRainWater(int[][] arr,int i,int j,int m,int n, int[][] visited){\r\n        if(i&lt;=0 || i&gt;=m+1 || j&lt;=0 || j&gt;=n+1){\r\n            return true;\r\n        }\r\n\r\n        if(visited[i][j]==1){\r\n            return true;\r\n        }\r\n\r\n        visited[i][j]=1;\r\n\t\t\r\n        boolean top=false,bottom=false,left=false,right=false;\r\n        if(arr[i][j]==arr[i-1][j])\r\n\r\n            bottom = trapRainWater(arr,i-1,j,m,n,visited);\r\n        else if(arr[i][j]&lt;arr[i-1][j]){\r\n            bottom = true;\r\n        }\r\n        if(arr[i][j] == arr[i+1][j])\r\n            top = trapRainWater(arr,i+1,j,m,n,visited);\r\n        else if(arr[i][j]&lt;arr[i+1][j]){\r\n            top = true;\r\n        }\r\n        if(arr[i][j] == arr[i][j-1])\r\n            left = trapRainWater(arr,i,j-1,m,n,visited);\r\n        else if(arr[i][j]&lt; arr[i][j-1]){\r\n            left = true;\r\n        }\r\n        if(arr[i][j] == arr[i][j+1])\r\n            right = trapRainWater(arr,i,j+1,m,n,visited);\r\n        else if(arr[i][j]&lt;arr[i][j+1]){\r\n            right = true;\r\n        }\r\n        return (top &amp;&amp; bottom &amp;&amp; left &amp;&amp; right);\r\n    }\r\n    public static void main(String args[]){\r\n        Scanner sc = new Scanner(System.in);\r\n        int n = sc.nextInt();\r\n        int m = sc.nextInt();\r\n        int[][] arr = new int[m+2][n+2];\r\n        int max = 0;\r\n        for(int i=1;i&lt;m+1;i++){\r\n            for(int j=1;j&lt;n+1;j++){\r\n                arr[i][j] = sc.nextInt();\r\n                if(arr[i][j]&gt;max)\r\n                    max = arr[i][j];\r\n            }\r\n        }\r\n        for(int i=0;i&lt;m+2;i++){\r\n            for(int j=0;j&lt;n+2;j++){\r\n                if(i==0 || j==0 || i==m+1 || j==n+1)\r\n                    arr[i][j] = max+1;\r\n            }\r\n        }\r\n\r\n        int count=0;\r\n\r\n        terace t = new terace();\r\n        for(int i=1;i&lt;m+1;i++){\r\n            for(int j=1;j&lt;n+1;j++){\r\n                int[][] visited = new int[m+2][n+2];\r\n                if(t.trapRainWater(arr, i, j, m, n,visited)){\r\n                    count = count+1;       \r\n                }\r\n            }\r\n        }\r\n        System.out.println(count);\r\n\r\n\r\n    }\r\n}\r\n```\r\n\r\nThis calculates all the positions that water can&#39;t flow lower. The code works and gives the expected output, but in some test cases it goes over. Is there anything i could change to improve the execution time? Thanks for your help in advance.","title":"Improve runtime execution","body":"<p>i have a block of code i need to improve because i go over the execution time suggested:</p>\n<pre><code>public class terace {\n    public boolean trapRainWater(int[][] arr,int i,int j,int m,int n, int[][] visited){\n        if(i&lt;=0 || i&gt;=m+1 || j&lt;=0 || j&gt;=n+1){\n            return true;\n        }\n\n        if(visited[i][j]==1){\n            return true;\n        }\n\n        visited[i][j]=1;\n        \n        boolean top=false,bottom=false,left=false,right=false;\n        if(arr[i][j]==arr[i-1][j])\n\n            bottom = trapRainWater(arr,i-1,j,m,n,visited);\n        else if(arr[i][j]&lt;arr[i-1][j]){\n            bottom = true;\n        }\n        if(arr[i][j] == arr[i+1][j])\n            top = trapRainWater(arr,i+1,j,m,n,visited);\n        else if(arr[i][j]&lt;arr[i+1][j]){\n            top = true;\n        }\n        if(arr[i][j] == arr[i][j-1])\n            left = trapRainWater(arr,i,j-1,m,n,visited);\n        else if(arr[i][j]&lt; arr[i][j-1]){\n            left = true;\n        }\n        if(arr[i][j] == arr[i][j+1])\n            right = trapRainWater(arr,i,j+1,m,n,visited);\n        else if(arr[i][j]&lt;arr[i][j+1]){\n            right = true;\n        }\n        return (top &amp;&amp; bottom &amp;&amp; left &amp;&amp; right);\n    }\n    public static void main(String args[]){\n        Scanner sc = new Scanner(System.in);\n        int n = sc.nextInt();\n        int m = sc.nextInt();\n        int[][] arr = new int[m+2][n+2];\n        int max = 0;\n        for(int i=1;i&lt;m+1;i++){\n            for(int j=1;j&lt;n+1;j++){\n                arr[i][j] = sc.nextInt();\n                if(arr[i][j]&gt;max)\n                    max = arr[i][j];\n            }\n        }\n        for(int i=0;i&lt;m+2;i++){\n            for(int j=0;j&lt;n+2;j++){\n                if(i==0 || j==0 || i==m+1 || j==n+1)\n                    arr[i][j] = max+1;\n            }\n        }\n\n        int count=0;\n\n        terace t = new terace();\n        for(int i=1;i&lt;m+1;i++){\n            for(int j=1;j&lt;n+1;j++){\n                int[][] visited = new int[m+2][n+2];\n                if(t.trapRainWater(arr, i, j, m, n,visited)){\n                    count = count+1;       \n                }\n            }\n        }\n        System.out.println(count);\n\n\n    }\n}\n</code></pre>\n<p>This calculates all the positions that water can't flow lower. The code works and gives the expected output, but in some test cases it goes over. Is there anything i could change to improve the execution time? Thanks for your help in advance.</p>\n"},{"tags":["java","spring"],"answers":[{"tags":[],"owner":{"account_id":23783500,"reputation":5175,"user_id":17795888,"display_name":"Chaosfire"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1662364023,"creation_date":1662364023,"answer_id":73606068,"question_id":73604719,"body_markdown":"You can declare global exception handler, then you won&#39;t need to catch the exception in your controller at all.\r\n```\r\n@ControllerAdvice\r\npublic class ErrorHandler {\r\n\r\n    @ExceptionHandler(BadCredentialsException.class)\r\n    public ResponseEntity&lt;Map&lt;String, Object&gt;&gt; badCredentialsHandler() {\r\n        return ResponseEntity.badRequest().body(Map.of(&quot;message&quot;, &quot;invalid credentials&quot;));\r\n    }\r\n}\r\n```\r\nKeep in mind the exception is quite general, so depending on your use case you may still need to catch and rethrow it wrapped in some custom exception and then handle the custom one.\r\n\r\nIf the exception contains information you need to build the response, or just for logging purposes, you can autowire it in the handler method.","title":"Spring Security 400","body":"<p>You can declare global exception handler, then you won't need to catch the exception in your controller at all.</p>\n<pre><code>@ControllerAdvice\npublic class ErrorHandler {\n\n    @ExceptionHandler(BadCredentialsException.class)\n    public ResponseEntity&lt;Map&lt;String, Object&gt;&gt; badCredentialsHandler() {\n        return ResponseEntity.badRequest().body(Map.of(&quot;message&quot;, &quot;invalid credentials&quot;));\n    }\n}\n</code></pre>\n<p>Keep in mind the exception is quite general, so depending on your use case you may still need to catch and rethrow it wrapped in some custom exception and then handle the custom one.</p>\n<p>If the exception contains information you need to build the response, or just for logging purposes, you can autowire it in the handler method.</p>\n"}],"owner":{"account_id":24519139,"reputation":23,"user_id":19894782,"display_name":"Borka192"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":132,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1662563913,"creation_date":1662354680,"question_id":73604719,"body_markdown":"if you specify incorrect data when logging in, postman gives the message &quot;invalid data&quot;, but the status is &quot;200 ok&quot;, I need to receive `400` status\r\n\r\n    @PostMapping(&quot;/login&quot;)\r\n        public Map&lt;String, Object&gt; performLogin(@RequestBody PersonDTO personDTO, BindingResult bindingResult) throws BadCredentialsException{\r\n    \r\n            UsernamePasswordAuthenticationToken authInputToken =\r\n                    new UsernamePasswordAuthenticationToken(personDTO.getUsername(),\r\n                            personDTO.getPassword());\r\n    \r\n    \r\n            try {\r\n                authenticationManager.authenticate(authInputToken);\r\n            }\r\n            catch (BadCredentialsException e) {\r\n                return Map.of(&quot;message&quot;, &quot;Неверные данные!&quot;);\r\n            }\r\n    \r\n            String token = jwtUtil.generateToken(personDTO.getUsername());\r\n            Optional&lt;Person&gt; person = peopleRepository.findByUsername(personDTO.getUsername());\r\n\r\n\r\n","title":"Spring Security 400","body":"<p>if you specify incorrect data when logging in, postman gives the message &quot;invalid data&quot;, but the status is &quot;200 ok&quot;, I need to receive <code>400</code> status</p>\n<pre><code>@PostMapping(&quot;/login&quot;)\n    public Map&lt;String, Object&gt; performLogin(@RequestBody PersonDTO personDTO, BindingResult bindingResult) throws BadCredentialsException{\n\n        UsernamePasswordAuthenticationToken authInputToken =\n                new UsernamePasswordAuthenticationToken(personDTO.getUsername(),\n                        personDTO.getPassword());\n\n\n        try {\n            authenticationManager.authenticate(authInputToken);\n        }\n        catch (BadCredentialsException e) {\n            return Map.of(&quot;message&quot;, &quot;Неверные данные!&quot;);\n        }\n\n        String token = jwtUtil.generateToken(personDTO.getUsername());\n        Optional&lt;Person&gt; person = peopleRepository.findByUsername(personDTO.getUsername());\n</code></pre>\n"},{"tags":["java","sql","jooq"],"answers":[{"tags":[],"owner":{"account_id":247217,"reputation":213455,"user_id":521799,"accept_rate":89,"display_name":"Lukas Eder"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1662563819,"creation_date":1662551934,"answer_id":73635125,"question_id":73634420,"body_markdown":"The [`Row4.mapping(Function4)`][1] is just syntax sugar for [ad-hoc conversion methods][2], like [`SelectField.convertFrom`][3].\r\n\r\nNow, `Row4&lt;T1, T2, T3, T4&gt;` extends `SelectField&lt;Record4&lt;T1, T2, T3, T4&gt;&gt;`, and thus you can pass any `? super Record4&lt;T1, T2, T3, T4&gt;` type to the `convertFrom(...)` method. Your `RecordMapper&lt;Record, UserGroup&gt;` extends `Function&lt;Record, UserGroup&gt;`, so you can pass that directly:\r\n\r\n**With jOOQ 3.17**\r\n\r\n```java\r\nField&lt;UserGroup&gt; field = row(...).convertFrom(new UserGroupMapper());\r\n```\r\n\r\n**With jOOQ 3.16**\r\n\r\nThe above `SelectField::convertFrom` method was pulled up from `Field` only in jOOQ 3.17, see [#13118][4]. Prior to that, you can turn your `row()` expression into a `Field` using `DSL.field(SelectField)`:\r\n\r\n```java\r\nField&lt;UserGroup&gt; field = field(row(...)).convertFrom(new UserGroupMapper());\r\n```\r\n\r\n\r\n  [1]: https://www.jooq.org/javadoc/dev/org.jooq/org/jooq/Row4.html#mapping(org.jooq.Function4)\r\n  [2]: https://www.jooq.org/doc/latest/manual/sql-execution/fetching/ad-hoc-converter/\r\n  [3]: https://www.jooq.org/javadoc/latest/org.jooq/org/jooq/SelectField.html#convertFrom(java.util.function.Function)\r\n  [4]: https://github.com/jOOQ/jOOQ/issues/13118","title":"Can I use a custom recordmapper in JOOQ select field already?","body":"<p>The <a href=\"https://www.jooq.org/javadoc/dev/org.jooq/org/jooq/Row4.html#mapping(org.jooq.Function4)\" rel=\"nofollow noreferrer\"><code>Row4.mapping(Function4)</code></a> is just syntax sugar for <a href=\"https://www.jooq.org/doc/latest/manual/sql-execution/fetching/ad-hoc-converter/\" rel=\"nofollow noreferrer\">ad-hoc conversion methods</a>, like <a href=\"https://www.jooq.org/javadoc/latest/org.jooq/org/jooq/SelectField.html#convertFrom(java.util.function.Function)\" rel=\"nofollow noreferrer\"><code>SelectField.convertFrom</code></a>.</p>\n<p>Now, <code>Row4&lt;T1, T2, T3, T4&gt;</code> extends <code>SelectField&lt;Record4&lt;T1, T2, T3, T4&gt;&gt;</code>, and thus you can pass any <code>? super Record4&lt;T1, T2, T3, T4&gt;</code> type to the <code>convertFrom(...)</code> method. Your <code>RecordMapper&lt;Record, UserGroup&gt;</code> extends <code>Function&lt;Record, UserGroup&gt;</code>, so you can pass that directly:</p>\n<p><strong>With jOOQ 3.17</strong></p>\n<pre class=\"lang-java prettyprint-override\"><code>Field&lt;UserGroup&gt; field = row(...).convertFrom(new UserGroupMapper());\n</code></pre>\n<p><strong>With jOOQ 3.16</strong></p>\n<p>The above <code>SelectField::convertFrom</code> method was pulled up from <code>Field</code> only in jOOQ 3.17, see <a href=\"https://github.com/jOOQ/jOOQ/issues/13118\" rel=\"nofollow noreferrer\">#13118</a>. Prior to that, you can turn your <code>row()</code> expression into a <code>Field</code> using <code>DSL.field(SelectField)</code>:</p>\n<pre class=\"lang-java prettyprint-override\"><code>Field&lt;UserGroup&gt; field = field(row(...)).convertFrom(new UserGroupMapper());\n</code></pre>\n"}],"owner":{"account_id":990449,"reputation":599,"user_id":1007927,"accept_rate":75,"display_name":"Theo"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":407,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":73635125,"answer_count":1,"score":2,"last_activity_date":1662563819,"creation_date":1662548739,"question_id":73634420,"body_markdown":"Suppose I have a custom RecordMapper due to whatever reaons:\r\n\r\n```\r\n    public class UserGroupMapper implements RecordMapper&lt;Record, UserGroup&gt; {\r\n        @Override\r\n        public UserGroup map(Record rec) {\r\n            UserGroup grp = new UserGroup(rec.getValue(USER_GROUP.ID),\r\n                    rec.getValue(USER_GROUP.NAME),\r\n                    rec.getValue(USER_GROUP.DESCRIPTION)\r\n                    javaParseTags(USER_GROUP.TAGS)\r\n            );\r\n        }\r\n```\r\n\r\nIn JOOQ, I could use it like so:\r\n```\r\nctx.select()\r\n                .from(USER_GROUP)\r\n                .fetch(new UserGroupMapper());\r\n```\r\n\r\nHowever, if I want to select multiple things (like data from a left join), it would be convenient to not use the RecordMapper in the last step (fetch step) but already during the `select` step as I have seen as an example here with POJOs, not RecordMappers: `ctx.select(row(A, B, C).mapping(MyPojo::new), otherFieldsLikeMultiSet)`\r\n\r\nMy question: Is there something like this syntax available for normal RecordMappers as well? The `mapping` function expects a FunctionN&lt;AllMyFields..., ?&gt; and not something like Function&lt;Record, ?&gt; as the RecordMapper implements.\r\n\r\nSo some code somewhat like this:\r\n```\r\nUserGroupMapper mapper = new UserGroupMapper(); //Implements RecordMapper\r\n\r\nvar res = ctx.select(\r\n      row(\r\n         USER_GROUP.ID,\r\n         USER_GROUP.NAME,\r\n         USER_GROUP.DESCRIPTION,\r\n         USER_GROUP.TAGS\r\n      ).mapToMyPojo(mapper), // this function doesn&#39;t exist. How to utilize my mapper here? \r\n      USER_GROUP.JSONLOAD\r\n   )\r\n   .from(USER_GROUP)\r\n   .fetch();\r\n```\r\nNow, I&#39;d like to have a `Result&lt;Record2&lt;UserGroup,String&gt;&gt;`. So instead of using the recordmapper &quot;in the end&quot; at fetch phase, I&#39;d like to apply the RecordMapper earlier. I know it&#39;s possible when providing a FunctionN to the row object `mapping`, but my RecordMapper sadly isn&#39;t a `FunctionN` :)","title":"Can I use a custom recordmapper in JOOQ select field already?","body":"<p>Suppose I have a custom RecordMapper due to whatever reaons:</p>\n<pre><code>    public class UserGroupMapper implements RecordMapper&lt;Record, UserGroup&gt; {\n        @Override\n        public UserGroup map(Record rec) {\n            UserGroup grp = new UserGroup(rec.getValue(USER_GROUP.ID),\n                    rec.getValue(USER_GROUP.NAME),\n                    rec.getValue(USER_GROUP.DESCRIPTION)\n                    javaParseTags(USER_GROUP.TAGS)\n            );\n        }\n</code></pre>\n<p>In JOOQ, I could use it like so:</p>\n<pre><code>ctx.select()\n                .from(USER_GROUP)\n                .fetch(new UserGroupMapper());\n</code></pre>\n<p>However, if I want to select multiple things (like data from a left join), it would be convenient to not use the RecordMapper in the last step (fetch step) but already during the <code>select</code> step as I have seen as an example here with POJOs, not RecordMappers: <code>ctx.select(row(A, B, C).mapping(MyPojo::new), otherFieldsLikeMultiSet)</code></p>\n<p>My question: Is there something like this syntax available for normal RecordMappers as well? The <code>mapping</code> function expects a FunctionN&lt;AllMyFields..., ?&gt; and not something like Function&lt;Record, ?&gt; as the RecordMapper implements.</p>\n<p>So some code somewhat like this:</p>\n<pre><code>UserGroupMapper mapper = new UserGroupMapper(); //Implements RecordMapper\n\nvar res = ctx.select(\n      row(\n         USER_GROUP.ID,\n         USER_GROUP.NAME,\n         USER_GROUP.DESCRIPTION,\n         USER_GROUP.TAGS\n      ).mapToMyPojo(mapper), // this function doesn't exist. How to utilize my mapper here? \n      USER_GROUP.JSONLOAD\n   )\n   .from(USER_GROUP)\n   .fetch();\n</code></pre>\n<p>Now, I'd like to have a <code>Result&lt;Record2&lt;UserGroup,String&gt;&gt;</code>. So instead of using the recordmapper &quot;in the end&quot; at fetch phase, I'd like to apply the RecordMapper earlier. I know it's possible when providing a FunctionN to the row object <code>mapping</code>, but my RecordMapper sadly isn't a <code>FunctionN</code> :)</p>\n"},{"tags":["java","amazon-web-services","amazon-s3"],"comments":[{"owner":{"account_id":12657663,"reputation":546,"user_id":9199668,"display_name":"ZabielskiGabriel"},"score":0,"creation_date":1662567091,"post_id":73637931,"comment_id":130037574,"body_markdown":"What is the error massage","body":"What is the error massage"},{"owner":{"account_id":20812072,"reputation":51,"user_id":15285766,"display_name":"sushant shekhar"},"score":0,"creation_date":1662570737,"post_id":73637931,"comment_id":130038763,"body_markdown":"@ZabielskiGabriel  ..No ERROR ..But nothing got copied also","body":"@ZabielskiGabriel  ..No ERROR ..But nothing got copied also"},{"owner":{"account_id":303420,"reputation":10129,"user_id":2378643,"display_name":"Anon Coward"},"score":2,"creation_date":1662578048,"post_id":73637931,"comment_id":130040831,"body_markdown":"You&#39;re copying all the objects to the same key, instead of `dest`, you probably want to create unique keys per object with something like `s3Summary.replace(source, dest)`","body":"You&#39;re copying all the objects to the same key, instead of <code>dest</code>, you probably want to create unique keys per object with something like <code>s3Summary.replace(source, dest)</code>"},{"owner":{"account_id":58377,"reputation":247890,"user_id":174777,"display_name":"John Rotenstein"},"score":0,"creation_date":1662585859,"post_id":73637931,"comment_id":130042966,"body_markdown":"The code is currently copying every object to a destination Key of `2022-09-09/EOD/9898/PROCESSED/`. Unlike operating systems, Amazon S3 does not interpret this as &quot;please copy the object to _inside_ this folder&quot;. Rather, it is treating that string as the actual Key (including the final slash). There, all objects are being copied to the same destination Key. You will need to append the &#39;filename&#39; to the end of the Key, as suggested by @AnonCoward.","body":"The code is currently copying every object to a destination Key of <code>2022-09-09&#47;EOD&#47;9898&#47;PROCESSED&#47;</code>. Unlike operating systems, Amazon S3 does not interpret this as &quot;please copy the object to <i>inside</i> this folder&quot;. Rather, it is treating that string as the actual Key (including the final slash). There, all objects are being copied to the same destination Key. You will need to append the &#39;filename&#39; to the end of the Key, as suggested by @AnonCoward."}],"owner":{"account_id":20812072,"reputation":51,"user_id":15285766,"display_name":"sushant shekhar"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":142,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1662563785,"creation_date":1662563785,"question_id":73637931,"body_markdown":"I have below folder structure in S3 bucket \r\n**Source:**\r\n\r\n2022-09-09/EOD/9898/**STAGED**/1/abc.txt\r\n\r\n2022-09-09/EOD/9898/**STAGED**/1/test.csv\r\n\r\n2022-09-09/EOD/9898/**STAGED**/2/abc1.txt\r\n\r\n2022-09-09/EOD/9898/**STAGED**/2/test1.csv\r\n\r\n**Destination:**\r\n\r\n2022-09-09/EOD/9898/**PROCESSED**/1/abc.txt\r\n\r\n2022-09-09/EOD/9898/**PROCESSED**/1/test.csv\r\n\r\n2022-09-09/EOD/9898/**PROCESSED**/2/abc1.txt\r\n\r\n2022-09-09/EOD/9898/**PROCESSED**/2/test1.csv\r\n\r\nThe contents under **STAGED** directory should be copied to **PROCESSED** directory with exact child directories .\r\n\r\nTried below code .But no luck:\r\n\r\n    String dest=(&quot;2022-09-09/EOD/9898/).concat(&quot;PROCESSED&quot;).concat(&quot;/&quot;);\r\n    String source=(&quot;2022-09-09/EOD/9898/).concat(&quot;STAGED&quot;).concat(&quot;/&quot;);\r\n    \r\n    ListObjectRequest lst=new ListObjectRequest().withBucketName(&quot;myBucket&quot;).withPrefix(source).withDelimiter(&quot;/&quot;);\r\n    ObjectListing list=amazonS3.listObjects(lst)\r\n    list.getObjectSummaries()./stream().forEach(s3Summary-&gt;{\r\n    \r\n    CopyObjectRequest cor=new CopyObjectRequest (&quot;myBucket&quot;,s3Summary.getKey(),&quot;s3Summary&quot;,dest);\r\n    amazonS3.copyObject(cor);\r\n    });\r\n\r\n\r\nDid not work..Can some one please help","title":"How to copy complete folder structure to another folder in AWS s3","body":"<p>I have below folder structure in S3 bucket\n<strong>Source:</strong></p>\n<p>2022-09-09/EOD/9898/<strong>STAGED</strong>/1/abc.txt</p>\n<p>2022-09-09/EOD/9898/<strong>STAGED</strong>/1/test.csv</p>\n<p>2022-09-09/EOD/9898/<strong>STAGED</strong>/2/abc1.txt</p>\n<p>2022-09-09/EOD/9898/<strong>STAGED</strong>/2/test1.csv</p>\n<p><strong>Destination:</strong></p>\n<p>2022-09-09/EOD/9898/<strong>PROCESSED</strong>/1/abc.txt</p>\n<p>2022-09-09/EOD/9898/<strong>PROCESSED</strong>/1/test.csv</p>\n<p>2022-09-09/EOD/9898/<strong>PROCESSED</strong>/2/abc1.txt</p>\n<p>2022-09-09/EOD/9898/<strong>PROCESSED</strong>/2/test1.csv</p>\n<p>The contents under <strong>STAGED</strong> directory should be copied to <strong>PROCESSED</strong> directory with exact child directories .</p>\n<p>Tried below code .But no luck:</p>\n<pre><code>String dest=(&quot;2022-09-09/EOD/9898/).concat(&quot;PROCESSED&quot;).concat(&quot;/&quot;);\nString source=(&quot;2022-09-09/EOD/9898/).concat(&quot;STAGED&quot;).concat(&quot;/&quot;);\n\nListObjectRequest lst=new ListObjectRequest().withBucketName(&quot;myBucket&quot;).withPrefix(source).withDelimiter(&quot;/&quot;);\nObjectListing list=amazonS3.listObjects(lst)\nlist.getObjectSummaries()./stream().forEach(s3Summary-&gt;{\n\nCopyObjectRequest cor=new CopyObjectRequest (&quot;myBucket&quot;,s3Summary.getKey(),&quot;s3Summary&quot;,dest);\namazonS3.copyObject(cor);\n});\n</code></pre>\n<p>Did not work..Can some one please help</p>\n"},{"tags":["java","android"],"comments":[{"owner":{"account_id":16801428,"reputation":910,"user_id":12146581,"display_name":"Mohamad Ghaith Alzin"},"score":0,"creation_date":1662552621,"post_id":73635179,"comment_id":130031505,"body_markdown":"Do you mean that each image (or possibly a question) must be shown only once to users? or Is it just looping again each time you finish showing all the images?","body":"Do you mean that each image (or possibly a question) must be shown only once to users? or Is it just looping again each time you finish showing all the images?"},{"owner":{"account_id":26270447,"reputation":1,"user_id":19940417,"display_name":"needsHelp"},"score":0,"creation_date":1662553365,"post_id":73635179,"comment_id":130031799,"body_markdown":"@MohamadGhaithAlzin each image must be shown only once when the user answer it correctly and when you return to the home page and back to play activity, the image that was answered already must not be show again like it will be removed.","body":"@MohamadGhaithAlzin each image must be shown only once when the user answer it correctly and when you return to the home page and back to play activity, the image that was answered already must not be show again like it will be removed."}],"answers":[{"tags":[],"owner":{"account_id":25373331,"reputation":110,"user_id":19186780,"display_name":"CodeGorilla"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1662563737,"creation_date":1662563737,"answer_id":73637913,"question_id":73635179,"body_markdown":"You can achieve this multiple ways, one good way to start would be to use [SharedPreferences][1]. Once a player has answered a question, save a boolean value in SharedPreferences against a key for that question. Load all the keys from SharedPreferences when your app loads or resumes :)\r\n\r\n\r\n  [1]: https://developer.android.com/reference/android/content/SharedPreferences","title":"How to remove a question/image that was answered correctly the next time user opens the app/comes to the home screen in Android?","body":"<p>You can achieve this multiple ways, one good way to start would be to use <a href=\"https://developer.android.com/reference/android/content/SharedPreferences\" rel=\"nofollow noreferrer\">SharedPreferences</a>. Once a player has answered a question, save a boolean value in SharedPreferences against a key for that question. Load all the keys from SharedPreferences when your app loads or resumes :)</p>\n"}],"owner":{"account_id":26270447,"reputation":1,"user_id":19940417,"display_name":"needsHelp"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":52,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1662563737,"creation_date":1662552171,"question_id":73635179,"body_markdown":"I&#39;m currently creating a mobile guessing game in Android Studio.\r\n\r\nI&#39;m struggling with, how will the image that was answered correctly will not show again when the activity is return to the home page or exits the application.\r\n\r\nThe code below is for the play activity, I used hashmap for the image and arraylist for the answers.\r\n\r\n   \r\n\r\n    heroList.add(&quot;abaddon&quot;); \r\n    heroList.add(&quot;alchemist&quot;); \r\n    heroList.add(&quot;axe&quot;); \r\n    heroList.add(&quot;beastmaster&quot;); \r\n    heroList.add(&quot;brewmaster&quot;);\r\n    \r\n    map.put(heroList.get(0), R.drawable.ic_s_abaddon); \r\n    map.put(heroList.get(1), R.drawable.ic_s_alchemist);\r\n    map.put(heroList.get(2), R.drawable.ic_s_axe);\r\n    map.put(heroList.get(3), R.drawable.ic_s_beastmaster);\r\n    map.put(heroList.get(4), R.drawable.ic_s_brewmaster);\r\n       \r\n    Collections.shuffle(heroList);\r\n    generateImage();\r\n\r\n   \r\n\r\nGenerate image method:\r\n\r\n    private void generateImage(int index) {\r\n        ArrayList&lt;String&gt; heroListTemp = (ArrayList&lt;String&gt;) heroList.clone();\r\n        String cAns = heroList.get(index);\r\n        heroListTemp.remove(cAns);\r\n        Collections.shuffle(heroListTemp);\r\n        ArrayList&lt;String&gt; newList = new ArrayList&lt;&gt;();\r\n        newList.add(heroListTemp.get(0));\r\n        newList.add(heroListTemp.get(1));\r\n        newList.add(heroListTemp.get(2));\r\n        newList.add(cAns);\r\n        Collections.shuffle(newList);\r\n\r\n        heroImage.setImageResource(map.get(heroList.get(index)));\r\n    }\r\nCode for the button to check if the answer is right or wrong:\r\n\r\n    public void checkAnswer(View view){\r\n        String answer = heroAns.getText().toString().toLowerCase().replaceAll(&quot;\\\\s&quot;,&quot;&quot;);\r\n        String cAnswer = heroList.get(index);\r\n\r\n        if(answer.equals(cAnswer)){\r\n            index++;\r\n            if(index &gt; heroList.size() - 1){\r\n                Toast.makeText(PlayEasy.this,&quot;You Guessed it all!!!!&quot;, Toast.LENGTH_SHORT).show();\r\n                finish();\r\n\r\n            }\r\n            else{\r\n                Toast.makeText(PlayEasy.this,&quot;Nice!&quot;, Toast.LENGTH_SHORT).show();\r\n                heroAns.setText(&quot;&quot;);\r\n                generateImage();\r\n            }\r\n        }\r\n        else{\r\n            Toast.makeText(PlayEasy.this,&quot;Nope -_-&quot;, Toast.LENGTH_SHORT).show();\r\n        }\r\n    }","title":"How to remove a question/image that was answered correctly the next time user opens the app/comes to the home screen in Android?","body":"<p>I'm currently creating a mobile guessing game in Android Studio.</p>\n<p>I'm struggling with, how will the image that was answered correctly will not show again when the activity is return to the home page or exits the application.</p>\n<p>The code below is for the play activity, I used hashmap for the image and arraylist for the answers.</p>\n<pre><code>heroList.add(&quot;abaddon&quot;); \nheroList.add(&quot;alchemist&quot;); \nheroList.add(&quot;axe&quot;); \nheroList.add(&quot;beastmaster&quot;); \nheroList.add(&quot;brewmaster&quot;);\n\nmap.put(heroList.get(0), R.drawable.ic_s_abaddon); \nmap.put(heroList.get(1), R.drawable.ic_s_alchemist);\nmap.put(heroList.get(2), R.drawable.ic_s_axe);\nmap.put(heroList.get(3), R.drawable.ic_s_beastmaster);\nmap.put(heroList.get(4), R.drawable.ic_s_brewmaster);\n   \nCollections.shuffle(heroList);\ngenerateImage();\n</code></pre>\n<p>Generate image method:</p>\n<pre><code>private void generateImage(int index) {\n    ArrayList&lt;String&gt; heroListTemp = (ArrayList&lt;String&gt;) heroList.clone();\n    String cAns = heroList.get(index);\n    heroListTemp.remove(cAns);\n    Collections.shuffle(heroListTemp);\n    ArrayList&lt;String&gt; newList = new ArrayList&lt;&gt;();\n    newList.add(heroListTemp.get(0));\n    newList.add(heroListTemp.get(1));\n    newList.add(heroListTemp.get(2));\n    newList.add(cAns);\n    Collections.shuffle(newList);\n\n    heroImage.setImageResource(map.get(heroList.get(index)));\n}\n</code></pre>\n<p>Code for the button to check if the answer is right or wrong:</p>\n<pre><code>public void checkAnswer(View view){\n    String answer = heroAns.getText().toString().toLowerCase().replaceAll(&quot;\\\\s&quot;,&quot;&quot;);\n    String cAnswer = heroList.get(index);\n\n    if(answer.equals(cAnswer)){\n        index++;\n        if(index &gt; heroList.size() - 1){\n            Toast.makeText(PlayEasy.this,&quot;You Guessed it all!!!!&quot;, Toast.LENGTH_SHORT).show();\n            finish();\n\n        }\n        else{\n            Toast.makeText(PlayEasy.this,&quot;Nice!&quot;, Toast.LENGTH_SHORT).show();\n            heroAns.setText(&quot;&quot;);\n            generateImage();\n        }\n    }\n    else{\n        Toast.makeText(PlayEasy.this,&quot;Nope -_-&quot;, Toast.LENGTH_SHORT).show();\n    }\n}\n</code></pre>\n"},{"tags":["java","methods"],"answers":[{"tags":[],"owner":{"account_id":2106797,"reputation":124,"user_id":1872962,"display_name":"Shadi A"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1354798336,"creation_date":1354798336,"answer_id":13744024,"question_id":13743868,"body_markdown":"if I understand the problem correctly basically you have two buttons you want one to pause and the other to resume, every program runs in Java is running in a thread, even if you are not using multithreading, the main method runs in a thread called main, you need to pause this thread and resume it on the click of the other button, since it a school project I&#39;m not going to tell you how to do it, you can read this and figure it out yourself :\r\n\r\nhttp://docs.oracle.com/javase/6/docs/api/java/lang/Object.html\r\n\r\nlook for wait() and notify()\r\n","title":"Pausing a method","body":"<p>if I understand the problem correctly basically you have two buttons you want one to pause and the other to resume, every program runs in Java is running in a thread, even if you are not using multithreading, the main method runs in a thread called main, you need to pause this thread and resume it on the click of the other button, since it a school project I'm not going to tell you how to do it, you can read this and figure it out yourself :</p>\n\n<p><a href=\"http://docs.oracle.com/javase/6/docs/api/java/lang/Object.html\" rel=\"nofollow\">http://docs.oracle.com/javase/6/docs/api/java/lang/Object.html</a></p>\n\n<p>look for wait() and notify()</p>\n"}],"owner":{"account_id":2064073,"reputation":89,"user_id":1839986,"accept_rate":14,"display_name":"TH3Mitch"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":113,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1662563511,"creation_date":1354797666,"question_id":13743868,"body_markdown":"I was having a problem with a project for school. The problem is that I acquired a code from school which I need to adjust to give the wanted criteria. The problem involves a database.\r\n\r\nThe program needs to get the current date+time when an action is performed (for practice I used a normal JButton), and it also needs to get the date+time when an action is performed on another button.\r\n\r\nI need to modify this piece of code:\r\n\r\n        try {\r\n            stmt = conn.createStatement();\r\n            java.sql.Timestamp now = new Timestamp((new Date()).getTime());    \r\n            PreparedStatement ps = conn.prepareStatement(\r\n                &quot;INSERT INTO &quot;Table name&quot; (date_in, name, date_out, passcode)&quot;+\r\n                 &quot; VALUES(?,?,?,null)&quot; );\r\n            ps.setTimestamp(1, now);\r\n            ps.setString(2, &quot;JavaTest&quot;);\r\n            Timestamp later = new Timestamp((new Date()).getTime());\r\n            ps.setTimestamp(3, later);\r\n            ps.executeUpdate();\r\n\r\nThe method needs to be paused after the ps.setString(2, &quot;JavaTest&quot;);. After this part has been executed the method needs to pause and resume when another button has been pressed so there will be an entry in the database which has a different date_in and date_out.\r\n\r\nI hope someone can help me cause I&#39;m kind of stuck now.","title":"Pausing a method","body":"<p>I was having a problem with a project for school. The problem is that I acquired a code from school which I need to adjust to give the wanted criteria. The problem involves a database.</p>\n<p>The program needs to get the current date+time when an action is performed (for practice I used a normal JButton), and it also needs to get the date+time when an action is performed on another button.</p>\n<p>I need to modify this piece of code:</p>\n<pre><code>    try {\n        stmt = conn.createStatement();\n        java.sql.Timestamp now = new Timestamp((new Date()).getTime());    \n        PreparedStatement ps = conn.prepareStatement(\n            &quot;INSERT INTO &quot;Table name&quot; (date_in, name, date_out, passcode)&quot;+\n             &quot; VALUES(?,?,?,null)&quot; );\n        ps.setTimestamp(1, now);\n        ps.setString(2, &quot;JavaTest&quot;);\n        Timestamp later = new Timestamp((new Date()).getTime());\n        ps.setTimestamp(3, later);\n        ps.executeUpdate();\n</code></pre>\n<p>The method needs to be paused after the ps.setString(2, &quot;JavaTest&quot;);. After this part has been executed the method needs to pause and resume when another button has been pressed so there will be an entry in the database which has a different date_in and date_out.</p>\n<p>I hope someone can help me cause I'm kind of stuck now.</p>\n"},{"tags":["java","eclipse","maven","cucumber"],"comments":[{"owner":{"account_id":4243,"reputation":1301840,"user_id":6309,"accept_rate":100,"display_name":"VonC"},"score":0,"creation_date":1640761848,"post_id":70516086,"comment_id":124651108,"body_markdown":"Did you tried with your Eclipse configured with text file encoding set to UTF-8? (https://stackoverflow.com/a/28289907/6309)","body":"Did you tried with your Eclipse configured with text file encoding set to UTF-8? (<a href=\"https://stackoverflow.com/a/28289907/6309\">stackoverflow.com/a/28289907/6309</a>)"},{"owner":{"account_id":23772649,"reputation":31,"user_id":17786503,"display_name":"Rauf Mirzayev"},"score":0,"creation_date":1640763252,"post_id":70516086,"comment_id":124651440,"body_markdown":"@VonC yes, but didnt genearate report","body":"@VonC yes, but didnt genearate report"},{"owner":{"account_id":4243,"reputation":1301840,"user_id":6309,"accept_rate":100,"display_name":"VonC"},"score":0,"creation_date":1640763316,"post_id":70516086,"comment_id":124651451,"body_markdown":"Did the warning at least disappear?","body":"Did the warning at least disappear?"},{"owner":{"account_id":23772649,"reputation":31,"user_id":17786503,"display_name":"Rauf Mirzayev"},"score":0,"creation_date":1640764299,"post_id":70516086,"comment_id":124651674,"body_markdown":"@VonC, now tests run successfully,  without any errors or warnings during clean install. But report doesnt generated.","body":"@VonC, now tests run successfully,  without any errors or warnings during clean install. But report doesnt generated."},{"owner":{"account_id":4243,"reputation":1301840,"user_id":6309,"accept_rate":100,"display_name":"VonC"},"score":0,"creation_date":1640764606,"post_id":70516086,"comment_id":124651757,"body_markdown":"OK. I just wanted to rule out this warning effect on the actual issue.","body":"OK. I just wanted to rule out this warning effect on the actual issue."}],"answers":[{"tags":[],"owner":{"account_id":23772649,"reputation":31,"user_id":17786503,"display_name":"Rauf Mirzayev"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1640862852,"creation_date":1640783904,"answer_id":70519997,"question_id":70516086,"body_markdown":"Thank you to all, and especially to Raghav Pal, and his YouTube channel.\r\n\r\nAfter all steps, it was needed to perform &quot;clean verify&quot;. After this operation, the report has been successfully generated.\r\n\r\nUpdated POM.xml:\r\n\r\n\t&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\r\n\t\t&lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n\t\t&lt;groupId&gt;MobWebAutomation&lt;/groupId&gt;\r\n\t\t&lt;artifactId&gt;MobWebAutomation&lt;/artifactId&gt;\r\n\t\t&lt;version&gt;1.0-SNAPSHOT&lt;/version&gt;\r\n\r\n\t\t&lt;properties&gt;\r\n\t\t\t&lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\r\n\t\t\t&lt;maven.compiler.source&gt;1.8&lt;/maven.compiler.source&gt; /* 1.8 it&#39;s your JDK version */\r\n\t\t\t&lt;maven.compiler.target&gt;1.8&lt;/maven.compiler.target&gt;/* 1.8 it&#39;s your JDK version */\r\n\t\t&lt;/properties&gt;\r\n\r\n\t\t&lt;dependencies&gt;\r\n\t\t\t&lt;dependency&gt;\r\n\t\t\t\t&lt;groupId&gt;io.appium&lt;/groupId&gt;\r\n\t\t\t\t&lt;artifactId&gt;java-client&lt;/artifactId&gt;\r\n\t\t\t\t&lt;version&gt;7.2.0&lt;/version&gt;\r\n\t\t\t&lt;/dependency&gt;\r\n\r\n\t\t\t&lt;dependency&gt;\r\n\t\t\t\t&lt;groupId&gt;io.cucumber&lt;/groupId&gt;\r\n\t\t\t\t&lt;artifactId&gt;cucumber-java&lt;/artifactId&gt;\r\n\t\t\t\t&lt;version&gt;7.1.0&lt;/version&gt;\r\n\t\t\t&lt;/dependency&gt;\r\n\r\n\t\t\t&lt;!-- https://mvnrepository.com/artifact/io.cucumber/cucumber-junit --&gt;\r\n\t\t\t&lt;dependency&gt;\r\n\t\t\t\t&lt;groupId&gt;io.cucumber&lt;/groupId&gt;\r\n\t\t\t\t&lt;artifactId&gt;cucumber-junit&lt;/artifactId&gt;\r\n\t\t\t\t&lt;version&gt;7.0.0&lt;/version&gt;\r\n\t\t\t\t&lt;scope&gt;test&lt;/scope&gt;\r\n\t\t\t&lt;/dependency&gt;\r\n\t\t&lt;/dependencies&gt;\r\n\r\n\t\t&lt;build&gt;\r\n\t\t\t&lt;plugins&gt;\r\n\t\t\t\t&lt;plugin&gt;\r\n\t\t\t\t\t&lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n\t\t\t\t\t&lt;artifactId&gt;maven-surefire-plugin&lt;/artifactId&gt;\r\n\t\t\t\t\t&lt;version&gt;2.22.0&lt;/version&gt;\r\n\t\t\t\t\t&lt;configuration&gt;\r\n\t\t\t\t\t\t&lt;testFailureIgnore&gt;true&lt;/testFailureIgnore&gt;\r\n\t\t\t\t\t&lt;/configuration&gt;\r\n\t\t\t\t&lt;/plugin&gt;\r\n\t\t\t\t&lt;plugin&gt;\r\n\t\t\t\t\t&lt;groupId&gt;net.masterthought&lt;/groupId&gt;\r\n\t\t\t\t\t&lt;artifactId&gt;maven-cucumber-reporting&lt;/artifactId&gt;\r\n\t\t\t\t\t&lt;version&gt;2.8.0&lt;/version&gt;\r\n\t\t\t\t\t&lt;executions&gt;\r\n\t\t\t\t\t\t&lt;execution&gt;\r\n\t\t\t\t\t\t\t&lt;id&gt;execution&lt;/id&gt;\r\n\t\t\t\t\t\t\t&lt;phase&gt;verify&lt;/phase&gt;\r\n\t\t\t\t\t\t\t&lt;goals&gt;\r\n\t\t\t\t\t\t\t\t&lt;goal&gt;generate&lt;/goal&gt;\r\n\t\t\t\t\t\t\t&lt;/goals&gt;\r\n\t\t\t\t\t\t\t&lt;configuration&gt;\r\n\t\t\t\t\t\t\t\t&lt;projectName&gt;YOUR_PROJECT_Name&lt;/projectName&gt;\r\n\t\t\t\t\t\t\t\t&lt;outputDirectory&gt;${project.build.directory}/cucumber-report-html&lt;/outputDirectory&gt;\r\n\t\t\t\t\t\t\t\t&lt;cucumberOutput&gt;${project.build.directory}/cucumber.json&lt;/cucumberOutput&gt;\r\n\t\t\t\t\t\t\t&lt;/configuration&gt;\r\n\t\t\t\t\t\t&lt;/execution&gt;\r\n\t\t\t\t\t&lt;/executions&gt;\r\n\t\t\t\t&lt;/plugin&gt;\r\n\t\t\t&lt;/plugins&gt;\r\n\t\t&lt;/build&gt;\r\n\t&lt;/project&gt;\r\n\r\nRUNNER CLASS:\r\n\r\n\tpackage runner;\r\n\timport org.junit.runner.RunWith;\r\n\r\n\timport io.cucumber.junit.CucumberOptions;\r\n\timport io.cucumber.junit.Cucumber;\r\n\r\n\t@RunWith(Cucumber.class)\r\n\t@CucumberOptions(\r\n\t\tfeatures = { &quot;src/test/java/features/registration.feature&quot; }, \r\n\t\tglue = { &quot;stepDefinitions&quot;, &quot;utility&quot; },\r\n\t\tmonochrome = true,\r\n\t\tplugin = {\r\n\t\t\t&quot;pretty&quot;,\r\n\t\t\t&quot;json:target/Cucumber.json&quot;\t\t\t\t\t\t\r\n\t\t}, \r\n\t\tdryRun = false\r\n\t) \r\n\tpublic class RunTest  {\r\n\t\t//\r\n\t}\r\n\r\nAfter you need to clean your project -&gt; run via `mvn clear verify`. That&#39;s all.\r\n\r\nSource: YouTube video - [Selenium Cucumber Java BDD Framework 12 | How To Create HTML Reports][1]\r\n\r\n  [1]: https://www.youtube.com/watch?v=jmObajLF4jQ","title":"Cucumber jvm report doesnt generating","body":"<p>Thank you to all, and especially to Raghav Pal, and his YouTube channel.</p>\n<p>After all steps, it was needed to perform &quot;clean verify&quot;. After this operation, the report has been successfully generated.</p>\n<p>Updated POM.xml:</p>\n<pre><code>&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n    &lt;groupId&gt;MobWebAutomation&lt;/groupId&gt;\n    &lt;artifactId&gt;MobWebAutomation&lt;/artifactId&gt;\n    &lt;version&gt;1.0-SNAPSHOT&lt;/version&gt;\n\n    &lt;properties&gt;\n        &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\n        &lt;maven.compiler.source&gt;1.8&lt;/maven.compiler.source&gt; /* 1.8 it's your JDK version */\n        &lt;maven.compiler.target&gt;1.8&lt;/maven.compiler.target&gt;/* 1.8 it's your JDK version */\n    &lt;/properties&gt;\n\n    &lt;dependencies&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;io.appium&lt;/groupId&gt;\n            &lt;artifactId&gt;java-client&lt;/artifactId&gt;\n            &lt;version&gt;7.2.0&lt;/version&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;io.cucumber&lt;/groupId&gt;\n            &lt;artifactId&gt;cucumber-java&lt;/artifactId&gt;\n            &lt;version&gt;7.1.0&lt;/version&gt;\n        &lt;/dependency&gt;\n\n        &lt;!-- https://mvnrepository.com/artifact/io.cucumber/cucumber-junit --&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;io.cucumber&lt;/groupId&gt;\n            &lt;artifactId&gt;cucumber-junit&lt;/artifactId&gt;\n            &lt;version&gt;7.0.0&lt;/version&gt;\n            &lt;scope&gt;test&lt;/scope&gt;\n        &lt;/dependency&gt;\n    &lt;/dependencies&gt;\n\n    &lt;build&gt;\n        &lt;plugins&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n                &lt;artifactId&gt;maven-surefire-plugin&lt;/artifactId&gt;\n                &lt;version&gt;2.22.0&lt;/version&gt;\n                &lt;configuration&gt;\n                    &lt;testFailureIgnore&gt;true&lt;/testFailureIgnore&gt;\n                &lt;/configuration&gt;\n            &lt;/plugin&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;net.masterthought&lt;/groupId&gt;\n                &lt;artifactId&gt;maven-cucumber-reporting&lt;/artifactId&gt;\n                &lt;version&gt;2.8.0&lt;/version&gt;\n                &lt;executions&gt;\n                    &lt;execution&gt;\n                        &lt;id&gt;execution&lt;/id&gt;\n                        &lt;phase&gt;verify&lt;/phase&gt;\n                        &lt;goals&gt;\n                            &lt;goal&gt;generate&lt;/goal&gt;\n                        &lt;/goals&gt;\n                        &lt;configuration&gt;\n                            &lt;projectName&gt;YOUR_PROJECT_Name&lt;/projectName&gt;\n                            &lt;outputDirectory&gt;${project.build.directory}/cucumber-report-html&lt;/outputDirectory&gt;\n                            &lt;cucumberOutput&gt;${project.build.directory}/cucumber.json&lt;/cucumberOutput&gt;\n                        &lt;/configuration&gt;\n                    &lt;/execution&gt;\n                &lt;/executions&gt;\n            &lt;/plugin&gt;\n        &lt;/plugins&gt;\n    &lt;/build&gt;\n&lt;/project&gt;\n</code></pre>\n<p>RUNNER CLASS:</p>\n<pre><code>package runner;\nimport org.junit.runner.RunWith;\n\nimport io.cucumber.junit.CucumberOptions;\nimport io.cucumber.junit.Cucumber;\n\n@RunWith(Cucumber.class)\n@CucumberOptions(\n    features = { &quot;src/test/java/features/registration.feature&quot; }, \n    glue = { &quot;stepDefinitions&quot;, &quot;utility&quot; },\n    monochrome = true,\n    plugin = {\n        &quot;pretty&quot;,\n        &quot;json:target/Cucumber.json&quot;                     \n    }, \n    dryRun = false\n) \npublic class RunTest  {\n    //\n}\n</code></pre>\n<p>After you need to clean your project -&gt; run via <code>mvn clear verify</code>. That's all.</p>\n<p>Source: YouTube video - <a href=\"https://www.youtube.com/watch?v=jmObajLF4jQ\" rel=\"nofollow noreferrer\">Selenium Cucumber Java BDD Framework 12 | How To Create HTML Reports</a></p>\n"},{"tags":[],"owner":{"account_id":26272558,"reputation":11,"user_id":19942261,"display_name":"Amit Shelar"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1662563489,"creation_date":1662563489,"answer_id":73637851,"question_id":70516086,"body_markdown":"Following Configuration helped me to resolve the issue\r\n\r\npom.xml\r\n\r\n    &lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n      xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd&quot;&gt;\r\n      &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n      &lt;groupId&gt;qaclickacademy&lt;/groupId&gt;\r\n      &lt;artifactId&gt;RestAPIFramework&lt;/artifactId&gt;\r\n      &lt;packaging&gt;jar&lt;/packaging&gt;\r\n      &lt;version&gt;1.0-SNAPSHOT&lt;/version&gt;\r\n      &lt;name&gt;RestAPIFramework&lt;/name&gt;\r\n      &lt;url&gt;http://maven.apache.org&lt;/url&gt;\r\n      \r\n      &lt;properties&gt;\r\n            &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\r\n            &lt;maven.compiler.source&gt;1.8&lt;/maven.compiler.source&gt;\r\n            &lt;maven.compiler.target&gt;1.8&lt;/maven.compiler.target&gt;\r\n      &lt;/properties&gt;\r\n        \r\n      &lt;build&gt;\r\n          &lt;plugins&gt;\r\n            &lt;plugin&gt;\r\n              &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n              &lt;artifactId&gt;maven-surefire-plugin&lt;/artifactId&gt;\r\n              &lt;version&gt;3.0.0-M7&lt;/version&gt;\r\n              &lt;configuration&gt;\r\n                &lt;testFailureIgnore&gt;true&lt;/testFailureIgnore&gt;\r\n              &lt;/configuration&gt;\r\n            &lt;/plugin&gt;\r\n            \r\n            &lt;plugin&gt;\r\n                    &lt;groupId&gt;net.masterthought&lt;/groupId&gt;\r\n                    &lt;artifactId&gt;maven-cucumber-reporting&lt;/artifactId&gt;\r\n                    &lt;version&gt;5.3.0&lt;/version&gt;\r\n                    &lt;executions&gt;\r\n                        &lt;execution&gt;\r\n                            &lt;id&gt;execution&lt;/id&gt;\r\n                            &lt;phase&gt;verify&lt;/phase&gt;\r\n                            &lt;goals&gt;\r\n                                &lt;goal&gt;generate&lt;/goal&gt;\r\n                            &lt;/goals&gt;\r\n                            &lt;configuration&gt;\r\n                                &lt;projectName&gt;cucumber-jvm-example&lt;/projectName&gt;\r\n                                &lt;jsonFiles&gt;\r\n                                    &lt;param&gt;**/*.json&lt;/param&gt;\r\n                                &lt;/jsonFiles&gt;\r\n                                &lt;outputDirectory&gt;${project.build.directory}/advanced-reports&lt;/outputDirectory&gt;\r\n                                &lt;inputDirectory&gt;${project.build.directory}/cucumber-reports&lt;/inputDirectory&gt;\r\n                            &lt;/configuration&gt;\r\n                        &lt;/execution&gt;\r\n                    &lt;/executions&gt;\r\n                &lt;/plugin&gt;\r\n          &lt;/plugins&gt;\r\n      &lt;/build&gt;\r\n      \r\n      &lt;dependencies&gt;\r\n        &lt;dependency&gt;\r\n          &lt;groupId&gt;junit&lt;/groupId&gt;\r\n          &lt;artifactId&gt;junit&lt;/artifactId&gt;\r\n          &lt;version&gt;4.11&lt;/version&gt;\r\n          &lt;scope&gt;test&lt;/scope&gt;\r\n        &lt;/dependency&gt;\r\n        \r\n         &lt;!-- https://mvnrepository.com/artifact/io.cucumber/cucumber-java --&gt;\r\n    \t&lt;dependency&gt;\r\n    \t    &lt;groupId&gt;io.cucumber&lt;/groupId&gt;\r\n    \t    &lt;artifactId&gt;cucumber-java&lt;/artifactId&gt;\r\n    \t    &lt;version&gt;7.5.0&lt;/version&gt;\r\n    \t&lt;/dependency&gt;\r\n    \t\r\n    \t&lt;!-- https://mvnrepository.com/artifact/io.cucumber/cucumber-junit --&gt;\r\n    \t&lt;dependency&gt;\r\n    \t    &lt;groupId&gt;io.cucumber&lt;/groupId&gt;\r\n    \t    &lt;artifactId&gt;cucumber-junit&lt;/artifactId&gt;\r\n    \t    &lt;version&gt;7.5.0&lt;/version&gt;\r\n    \t    &lt;scope&gt;test&lt;/scope&gt;\r\n    \t&lt;/dependency&gt;\r\n    \t\r\n    \t&lt;!-- https://mvnrepository.com/artifact/io.cucumber/cucumber-core --&gt;\r\n    \t&lt;dependency&gt;\r\n    \t    &lt;groupId&gt;io.cucumber&lt;/groupId&gt;\r\n    \t    &lt;artifactId&gt;cucumber-core&lt;/artifactId&gt;\r\n    \t    &lt;version&gt;7.5.0&lt;/version&gt;\r\n    \t&lt;/dependency&gt;\r\n      &lt;/dependencies&gt;\r\n    &lt;/project&gt;\r\n\r\n\r\nTestRunner Class\r\n\r\n    @RunWith(Cucumber.class)\r\n    @CucumberOptions(features=&quot;src/test/java/features&quot;, glue= {&quot;stepDefinations&quot;},\r\n    \t\t\t\tmonochrome = true,\r\n    \t\t\t\tplugin = {&quot;pretty&quot;,\r\n                              &quot;json:target/cucumber-reports/reports.json&quot;,\r\n    \t\t\t\t\t\t  &quot;json:target/cucumber-reports/cucumber.runtime.formatter.JSONFormatter&quot;})\r\n    \r\n    \t\t\t\t\r\n    public class TestRunner {\r\n    \r\n    }","title":"Cucumber jvm report doesnt generating","body":"<p>Following Configuration helped me to resolve the issue</p>\n<p>pom.xml</p>\n<pre><code>&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\n  xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd&quot;&gt;\n  &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n  &lt;groupId&gt;qaclickacademy&lt;/groupId&gt;\n  &lt;artifactId&gt;RestAPIFramework&lt;/artifactId&gt;\n  &lt;packaging&gt;jar&lt;/packaging&gt;\n  &lt;version&gt;1.0-SNAPSHOT&lt;/version&gt;\n  &lt;name&gt;RestAPIFramework&lt;/name&gt;\n  &lt;url&gt;http://maven.apache.org&lt;/url&gt;\n  \n  &lt;properties&gt;\n        &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\n        &lt;maven.compiler.source&gt;1.8&lt;/maven.compiler.source&gt;\n        &lt;maven.compiler.target&gt;1.8&lt;/maven.compiler.target&gt;\n  &lt;/properties&gt;\n    \n  &lt;build&gt;\n      &lt;plugins&gt;\n        &lt;plugin&gt;\n          &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n          &lt;artifactId&gt;maven-surefire-plugin&lt;/artifactId&gt;\n          &lt;version&gt;3.0.0-M7&lt;/version&gt;\n          &lt;configuration&gt;\n            &lt;testFailureIgnore&gt;true&lt;/testFailureIgnore&gt;\n          &lt;/configuration&gt;\n        &lt;/plugin&gt;\n        \n        &lt;plugin&gt;\n                &lt;groupId&gt;net.masterthought&lt;/groupId&gt;\n                &lt;artifactId&gt;maven-cucumber-reporting&lt;/artifactId&gt;\n                &lt;version&gt;5.3.0&lt;/version&gt;\n                &lt;executions&gt;\n                    &lt;execution&gt;\n                        &lt;id&gt;execution&lt;/id&gt;\n                        &lt;phase&gt;verify&lt;/phase&gt;\n                        &lt;goals&gt;\n                            &lt;goal&gt;generate&lt;/goal&gt;\n                        &lt;/goals&gt;\n                        &lt;configuration&gt;\n                            &lt;projectName&gt;cucumber-jvm-example&lt;/projectName&gt;\n                            &lt;jsonFiles&gt;\n                                &lt;param&gt;**/*.json&lt;/param&gt;\n                            &lt;/jsonFiles&gt;\n                            &lt;outputDirectory&gt;${project.build.directory}/advanced-reports&lt;/outputDirectory&gt;\n                            &lt;inputDirectory&gt;${project.build.directory}/cucumber-reports&lt;/inputDirectory&gt;\n                        &lt;/configuration&gt;\n                    &lt;/execution&gt;\n                &lt;/executions&gt;\n            &lt;/plugin&gt;\n      &lt;/plugins&gt;\n  &lt;/build&gt;\n  \n  &lt;dependencies&gt;\n    &lt;dependency&gt;\n      &lt;groupId&gt;junit&lt;/groupId&gt;\n      &lt;artifactId&gt;junit&lt;/artifactId&gt;\n      &lt;version&gt;4.11&lt;/version&gt;\n      &lt;scope&gt;test&lt;/scope&gt;\n    &lt;/dependency&gt;\n    \n     &lt;!-- https://mvnrepository.com/artifact/io.cucumber/cucumber-java --&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;io.cucumber&lt;/groupId&gt;\n        &lt;artifactId&gt;cucumber-java&lt;/artifactId&gt;\n        &lt;version&gt;7.5.0&lt;/version&gt;\n    &lt;/dependency&gt;\n    \n    &lt;!-- https://mvnrepository.com/artifact/io.cucumber/cucumber-junit --&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;io.cucumber&lt;/groupId&gt;\n        &lt;artifactId&gt;cucumber-junit&lt;/artifactId&gt;\n        &lt;version&gt;7.5.0&lt;/version&gt;\n        &lt;scope&gt;test&lt;/scope&gt;\n    &lt;/dependency&gt;\n    \n    &lt;!-- https://mvnrepository.com/artifact/io.cucumber/cucumber-core --&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;io.cucumber&lt;/groupId&gt;\n        &lt;artifactId&gt;cucumber-core&lt;/artifactId&gt;\n        &lt;version&gt;7.5.0&lt;/version&gt;\n    &lt;/dependency&gt;\n  &lt;/dependencies&gt;\n&lt;/project&gt;\n</code></pre>\n<p>TestRunner Class</p>\n<pre><code>@RunWith(Cucumber.class)\n@CucumberOptions(features=&quot;src/test/java/features&quot;, glue= {&quot;stepDefinations&quot;},\n                monochrome = true,\n                plugin = {&quot;pretty&quot;,\n                          &quot;json:target/cucumber-reports/reports.json&quot;,\n                          &quot;json:target/cucumber-reports/cucumber.runtime.formatter.JSONFormatter&quot;})\n\n                \npublic class TestRunner {\n\n}\n</code></pre>\n"}],"owner":{"account_id":23772649,"reputation":31,"user_id":17786503,"display_name":"Rauf Mirzayev"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2985,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":70519997,"answer_count":2,"score":1,"last_activity_date":1662563489,"creation_date":1640761111,"question_id":70516086,"body_markdown":"I want to get cucumber report, but it nothing generates. \r\nI get this error during running via mvn clean install. \r\nI cant to resolve this issue.\r\nI&#39;m new in automation...\r\n\r\n /* During run as Maven Clean Install I get mentioned below error:\r\n        \r\n        [INFO] Scanning for projects...\r\n        [INFO] \r\n        [INFO] -----------------&lt; MobWebAutomation:MobWebAutomation &gt;------------------\r\n        [INFO] Building MobWebAutomation 1.0-SNAPSHOT\r\n        [INFO] --------------------------------[ jar ]---------------------------------\r\n        [INFO] \r\n        [INFO] --- maven-clean-plugin:2.5:clean (default-clean) @ MobWebAutomation ---\r\n        [INFO] Deleting C:\\Users\\Rauf.mirzoyev\\eclipse-workspace_Appium\\MobWebAutomation\\target\r\n        [INFO] \r\n        [INFO] --- maven-resources-plugin:2.6:resources (default-resources) @ MobWebAutomation ---\r\n        [WARNING] Using platform encoding (Cp1252 actually) to copy filtered resources, i.e. build is platform dependent!\r\n        [INFO] Copying 0 resource\r\n        [INFO] \r\n        [INFO] --- maven-compiler-plugin:3.8.0:compile (default-compile) @ MobWebAutomation ---\r\n        [INFO] Nothing to compile - all classes are up to date\r\n        [INFO] \r\n        [INFO] --- maven-resources-plugin:2.6:testResources (default-testResources) @ MobWebAutomation ---\r\n        [WARNING] Using platform encoding (Cp1252 actually) to copy filtered resources, i.e. build is platform dependent!\r\n        [INFO] Copying 1 resource\r\n        [INFO] \r\n        [INFO] --- maven-compiler-plugin:3.8.0:testCompile (default-testCompile) @ MobWebAutomation ---\r\n        [INFO] Changes detected - recompiling the module!\r\n        [WARNING] File encoding has not been set, using platform encoding Cp1252, i.e. build is platform dependent!\r\n        [INFO] Compiling 4 source files to C:\\Users\\Rauf.mirzoyev\\eclipse-workspace_Appium\\MobWebAutomation\\target\\test-classes\r\n        [ERROR] /C:/Users/Rauf.mirzoyev/eclipse-workspace_Appium/MobWebAutomation/src/test/java/stepDefinitions/RegistrationWithValidCredentials.java:[116,55] unmappable character (0x8F) for encoding windows-1252\r\n        [ERROR] /C:/Users/Rauf.mirzoyev/eclipse-workspace_Appium/MobWebAutomation/src/test/java/stepDefinitions/RegistrationWithValidCredentials.java:[116,61] unmappable character (0x8F) for encoding windows-1252\r\n        [ERROR] /C:/Users/Rauf.mirzoyev/eclipse-workspace_Appium/MobWebAutomation/src/test/java/stepDefinitions/RegistrationWithValidCredentials.java:[116,64] unmappable character (0x8F) for encoding windows-1252\r\n        [INFO] \r\n        [INFO] --- maven-surefire-plugin:2.22.0:test (default-test) @ MobWebAutomation ---\r\n        [INFO] \r\n        [INFO] --- maven-jar-plugin:2.4:jar (default-jar) @ MobWebAutomation ---\r\n        [INFO] Building jar: C:\\Users\\Rauf.mirzoyev\\eclipse-workspace_Appium\\MobWebAutomation\\target\\MobWebAutomation-1.0-SNAPSHOT.jar\r\n        [INFO] \r\n        [INFO] --- maven-cucumber-reporting:5.0.0:generate (execution) @ MobWebAutomation ---\r\n        [INFO] About to generate Cucumber report.\r\n        Dec 29, 2021 10:31:50 AM net.masterthought.cucumber.ReportBuilder generateErrorPage\r\n        INFO: Unexpected error\r\n        net.masterthought.cucumber.ValidationException: None report file was added!\r\n        \tat net.masterthought.cucumber.ReportParser.parseJsonFiles(ReportParser.java:62)\r\n        \tat net.masterthought.cucumber.ReportBuilder.generateReports(ReportBuilder.java:88)\r\n        \tat net.masterthought.cucumber.CucumberReportGeneratorMojo.execute(CucumberReportGeneratorMojo.java:209)\r\n        \tat org.apache.maven.plugin.DefaultBuildPluginManager.executeMojo(DefaultBuildPluginManager.java:137)\r\n        \tat org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:210)\r\n        \tat org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:156)\r\n        \tat org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:148)\r\n        \tat org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject(LifecycleModuleBuilder.java:117)\r\n        \tat org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject(LifecycleModuleBuilder.java:81)\r\n        \tat org.apache.maven.lifecycle.internal.builder.singlethreaded.SingleThreadedBuilder.build(SingleThreadedBuilder.java:56)\r\n        \tat org.apache.maven.lifecycle.internal.LifecycleStarter.execute(LifecycleStarter.java:128)\r\n        \tat org.apache.maven.DefaultMaven.doExecute(DefaultMaven.java:305)\r\n        \tat org.apache.maven.DefaultMaven.doExecute(DefaultMaven.java:192)\r\n        \tat org.apache.maven.DefaultMaven.execute(DefaultMaven.java:105)\r\n        \tat org.apache.maven.cli.MavenCli.execute(MavenCli.java:957)\r\n        \tat org.apache.maven.cli.MavenCli.doMain(MavenCli.java:289)\r\n        \tat org.apache.maven.cli.MavenCli.main(MavenCli.java:193)\r\n        \tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n        \tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)\r\n        \tat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n        \tat java.base/java.lang.reflect.Method.invoke(Method.java:568)\r\n        \tat org.codehaus.plexus.classworlds.launcher.Launcher.launchEnhanced(Launcher.java:282)\r\n        \tat org.codehaus.plexus.classworlds.launcher.Launcher.launch(Launcher.java:225)\r\n        \tat org.codehaus.plexus.classworlds.launcher.Launcher.mainWithExitCode(Launcher.java:406)\r\n        \tat org.codehaus.plexus.classworlds.launcher.Launcher.main(Launcher.java:347)\r\n        \r\n        [INFO] ------------------------------------------------------------------------\r\n        [INFO] BUILD FAILURE\r\n        [INFO] ------------------------------------------------------------------------\r\n        [INFO] Total time:  7.525 s\r\n        [INFO] Finished at: 2021-12-29T10:31:51+04:00\r\n        [INFO] ------------------------------------------------------------------------\r\n        [ERROR] Failed to execute goal net.masterthought:maven-cucumber-reporting:5.0.0:generate (execution) on project MobWebAutomation: Error Found: BUILD FAILED - Check Report For Details -&gt; [Help 1]\r\n        [ERROR] \r\n        [ERROR] To see the full stack trace of the errors, re-run Maven with the -e switch.\r\n        [ERROR] Re-run Maven using the -X switch to enable full debug logging.\r\n        [ERROR] \r\n        [ERROR] For more information about the errors and possible solutions, please read the \r\n\r\n\r\n\r\nfollowing articles:\r\n        [ERROR] [Help 1] http://cwiki.apache.org/confluence/display/MAVEN/MojoExecutionException\r\n        \r\n        \r\n         */\r\n        \r\n\r\n        \r\n        /*My pom file:*/\r\n        \r\n      {  &lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\r\n        \t&lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n        \t&lt;groupId&gt;MobWebAutomation&lt;/groupId&gt;\r\n        \t&lt;artifactId&gt;MobWebAutomation&lt;/artifactId&gt;\r\n        \t&lt;version&gt;1.0-SNAPSHOT&lt;/version&gt;\r\n        \r\n        \t&lt;dependencies&gt;\r\n        \r\n        \t\t&lt;dependency&gt;\r\n        \t\t\t&lt;groupId&gt;io.appium&lt;/groupId&gt;\r\n        \t\t\t&lt;artifactId&gt;java-client&lt;/artifactId&gt;\r\n        \t\t\t&lt;version&gt;7.2.0&lt;/version&gt;\r\n        \t\t&lt;/dependency&gt;\r\n        \r\n        \r\n        \t\t&lt;dependency&gt;\r\n        \t\t\t&lt;groupId&gt;io.cucumber&lt;/groupId&gt;\r\n        \t\t\t&lt;artifactId&gt;cucumber-java&lt;/artifactId&gt;\r\n        \t\t\t&lt;version&gt;7.1.0&lt;/version&gt;\r\n        \t\t&lt;/dependency&gt;\r\n        \r\n        \t\t&lt;!-- https://mvnrepository.com/artifact/io.cucumber/cucumber-junit --&gt;\r\n        \t\t&lt;dependency&gt;\r\n        \t\t\t&lt;groupId&gt;io.cucumber&lt;/groupId&gt;\r\n        \t\t\t&lt;artifactId&gt;cucumber-junit&lt;/artifactId&gt;\r\n        \t\t\t&lt;version&gt;7.0.0&lt;/version&gt;\r\n        \t\t\t&lt;scope&gt;test&lt;/scope&gt;\r\n        \t\t&lt;/dependency&gt;\r\n        \t\t&lt;!-- https://mvnrepository.com/artifact/org.seleniumhq.selenium/selenium-java --&gt;\r\n        \r\n        \r\n        \t&lt;/dependencies&gt;\r\n        \t&lt;build&gt;\r\n        \t\t&lt;plugins&gt;\r\n        \t\t\t&lt;plugin&gt;\r\n        \t\t\t\t&lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n        \t\t\t\t&lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\r\n        \t\t\t\t&lt;version&gt;3.8.0&lt;/version&gt;\r\n        \t\t\t\t&lt;configuration&gt;\r\n        \t\t\t\t\t&lt;source&gt;1.8&lt;/source&gt;\r\n        \t\t\t\t\t&lt;target&gt;1.8&lt;/target&gt;\r\n        \t\t\t\t&lt;/configuration&gt;\r\n        \t\t\t&lt;/plugin&gt;\r\n        \t\t\t&lt;plugin&gt;\r\n        \t\t\t\t&lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n        \t\t\t\t&lt;artifactId&gt;maven-surefire-plugin&lt;/artifactId&gt;\r\n        \t\t\t\t&lt;version&gt;2.22.0&lt;/version&gt;\r\n        \t\t\t\t&lt;configuration&gt;\r\n        \t\t\t\t\t&lt;includes&gt;\r\n        \t\t\t\t\t\t&lt;exclude&gt;**/*Runner.java&lt;/exclude&gt;\r\n        \t\t\t\t\t&lt;/includes&gt;\r\n        \t\t\t\t&lt;/configuration&gt;\r\n        \t\t\t&lt;/plugin&gt;\r\n        \t\t\t\r\n        \r\n        \r\n        &lt;plugin&gt;\r\n                &lt;groupId&gt;net.masterthought&lt;/groupId&gt;\r\n                &lt;artifactId&gt;maven-cucumber-reporting&lt;/artifactId&gt;\r\n                 &lt;version&gt;5.0.0&lt;/version&gt;\r\n                &lt;executions&gt;\r\n                  &lt;execution&gt;\r\n                    &lt;id&gt;execution&lt;/id&gt;\r\n                    &lt;phase&gt;verify&lt;/phase&gt;\r\n                    &lt;goals&gt;\r\n                      &lt;goal&gt;generate&lt;/goal&gt;\r\n                    &lt;/goals&gt;\r\n                    &lt;configuration&gt;\r\n                      &lt;projectName&gt;MobWebAutomation&lt;/projectName&gt;\r\n                      &lt;outputDirectory&gt;${project.build.directory}/cucumber-reports&lt;/outputDirectory&gt;\r\n                        &lt;enableFlashCharts&gt;true&lt;/enableFlashCharts&gt;\r\n                        &lt;buildNumber&gt;42&lt;/buildNumber&gt; \r\n                       &lt;parallelTesting&gt;false&lt;/parallelTesting&gt;\r\n                        &lt;inputDirectory&gt;${project.build.directory}/cucumber-reports&lt;/inputDirectory&gt;\r\n                      &lt;jsonFiles&gt;\r\n                      &lt;jsonFile&gt;**/*.json&lt;/jsonFile&gt;\r\n                      &lt;/jsonFiles&gt;\r\n                      &lt;testFailureIgnore&gt;true&lt;/testFailureIgnore&gt;\r\n                      &lt;buildSuccessOnTestFailure&gt;true&lt;/buildSuccessOnTestFailure&gt;\r\n                    &lt;/configuration&gt;\r\n                  &lt;/execution&gt;\r\n                &lt;/executions&gt;\r\n              &lt;/plugin&gt;\r\n        \t\t&lt;/plugins&gt;\r\n        \t&lt;/build&gt;\r\n        \r\n        &lt;/project&gt;\r\n        \r\n        }\r\n    \r\n        **Runner class** \r\n        \r\n       { package runner;\r\n        \r\n        import org.junit.runner.RunWith;\r\n        import io.cucumber.junit.CucumberOptions;\r\n        import io.cucumber.junit.Cucumber;\r\n        \r\n        \r\n        @RunWith(Cucumber.class)\r\n        @CucumberOptions(features = { &quot;src/test/java/features/registration.feature&quot; }, \r\n        \t\t\t\tglue = { &quot;stepDefinitions&quot;,\r\n        \t\t\t\t&quot;utility&quot; }, monochrome = true, plugin = { &quot;pretty&quot;,\r\n        \t\t\t\t\r\n        \t\t\t\t&quot;json:target/cucumber-reports/AutomationReport.json&quot;,\r\n        \t\t\t\t&quot;json:target/cucumber-reports/cucumber.runtime.formatter.JSONFormatter&quot;\r\n        \t\t\t\t\r\n        \t\t\t\t\r\n        \t\t\t\t\r\n        \t\t\t\t}, \r\n        \t\t\t\tdryRun = false)//, tags = &quot;@correct or @incorrect&quot;)\r\n        \r\n        public class RunTest  {\r\n        \r\n        }\r\n\r\n","title":"Cucumber jvm report doesnt generating","body":"<p>I want to get cucumber report, but it nothing generates.\nI get this error during running via mvn clean install.\nI cant to resolve this issue.\nI'm new in automation...</p>\n<p>/* During run as Maven Clean Install I get mentioned below error:</p>\n<pre><code>    [INFO] Scanning for projects...\n    [INFO] \n    [INFO] -----------------&lt; MobWebAutomation:MobWebAutomation &gt;------------------\n    [INFO] Building MobWebAutomation 1.0-SNAPSHOT\n    [INFO] --------------------------------[ jar ]---------------------------------\n    [INFO] \n    [INFO] --- maven-clean-plugin:2.5:clean (default-clean) @ MobWebAutomation ---\n    [INFO] Deleting C:\\Users\\Rauf.mirzoyev\\eclipse-workspace_Appium\\MobWebAutomation\\target\n    [INFO] \n    [INFO] --- maven-resources-plugin:2.6:resources (default-resources) @ MobWebAutomation ---\n    [WARNING] Using platform encoding (Cp1252 actually) to copy filtered resources, i.e. build is platform dependent!\n    [INFO] Copying 0 resource\n    [INFO] \n    [INFO] --- maven-compiler-plugin:3.8.0:compile (default-compile) @ MobWebAutomation ---\n    [INFO] Nothing to compile - all classes are up to date\n    [INFO] \n    [INFO] --- maven-resources-plugin:2.6:testResources (default-testResources) @ MobWebAutomation ---\n    [WARNING] Using platform encoding (Cp1252 actually) to copy filtered resources, i.e. build is platform dependent!\n    [INFO] Copying 1 resource\n    [INFO] \n    [INFO] --- maven-compiler-plugin:3.8.0:testCompile (default-testCompile) @ MobWebAutomation ---\n    [INFO] Changes detected - recompiling the module!\n    [WARNING] File encoding has not been set, using platform encoding Cp1252, i.e. build is platform dependent!\n    [INFO] Compiling 4 source files to C:\\Users\\Rauf.mirzoyev\\eclipse-workspace_Appium\\MobWebAutomation\\target\\test-classes\n    [ERROR] /C:/Users/Rauf.mirzoyev/eclipse-workspace_Appium/MobWebAutomation/src/test/java/stepDefinitions/RegistrationWithValidCredentials.java:[116,55] unmappable character (0x8F) for encoding windows-1252\n    [ERROR] /C:/Users/Rauf.mirzoyev/eclipse-workspace_Appium/MobWebAutomation/src/test/java/stepDefinitions/RegistrationWithValidCredentials.java:[116,61] unmappable character (0x8F) for encoding windows-1252\n    [ERROR] /C:/Users/Rauf.mirzoyev/eclipse-workspace_Appium/MobWebAutomation/src/test/java/stepDefinitions/RegistrationWithValidCredentials.java:[116,64] unmappable character (0x8F) for encoding windows-1252\n    [INFO] \n    [INFO] --- maven-surefire-plugin:2.22.0:test (default-test) @ MobWebAutomation ---\n    [INFO] \n    [INFO] --- maven-jar-plugin:2.4:jar (default-jar) @ MobWebAutomation ---\n    [INFO] Building jar: C:\\Users\\Rauf.mirzoyev\\eclipse-workspace_Appium\\MobWebAutomation\\target\\MobWebAutomation-1.0-SNAPSHOT.jar\n    [INFO] \n    [INFO] --- maven-cucumber-reporting:5.0.0:generate (execution) @ MobWebAutomation ---\n    [INFO] About to generate Cucumber report.\n    Dec 29, 2021 10:31:50 AM net.masterthought.cucumber.ReportBuilder generateErrorPage\n    INFO: Unexpected error\n    net.masterthought.cucumber.ValidationException: None report file was added!\n        at net.masterthought.cucumber.ReportParser.parseJsonFiles(ReportParser.java:62)\n        at net.masterthought.cucumber.ReportBuilder.generateReports(ReportBuilder.java:88)\n        at net.masterthought.cucumber.CucumberReportGeneratorMojo.execute(CucumberReportGeneratorMojo.java:209)\n        at org.apache.maven.plugin.DefaultBuildPluginManager.executeMojo(DefaultBuildPluginManager.java:137)\n        at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:210)\n        at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:156)\n        at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:148)\n        at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject(LifecycleModuleBuilder.java:117)\n        at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject(LifecycleModuleBuilder.java:81)\n        at org.apache.maven.lifecycle.internal.builder.singlethreaded.SingleThreadedBuilder.build(SingleThreadedBuilder.java:56)\n        at org.apache.maven.lifecycle.internal.LifecycleStarter.execute(LifecycleStarter.java:128)\n        at org.apache.maven.DefaultMaven.doExecute(DefaultMaven.java:305)\n        at org.apache.maven.DefaultMaven.doExecute(DefaultMaven.java:192)\n        at org.apache.maven.DefaultMaven.execute(DefaultMaven.java:105)\n        at org.apache.maven.cli.MavenCli.execute(MavenCli.java:957)\n        at org.apache.maven.cli.MavenCli.doMain(MavenCli.java:289)\n        at org.apache.maven.cli.MavenCli.main(MavenCli.java:193)\n        at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n        at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)\n        at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n        at java.base/java.lang.reflect.Method.invoke(Method.java:568)\n        at org.codehaus.plexus.classworlds.launcher.Launcher.launchEnhanced(Launcher.java:282)\n        at org.codehaus.plexus.classworlds.launcher.Launcher.launch(Launcher.java:225)\n        at org.codehaus.plexus.classworlds.launcher.Launcher.mainWithExitCode(Launcher.java:406)\n        at org.codehaus.plexus.classworlds.launcher.Launcher.main(Launcher.java:347)\n    \n    [INFO] ------------------------------------------------------------------------\n    [INFO] BUILD FAILURE\n    [INFO] ------------------------------------------------------------------------\n    [INFO] Total time:  7.525 s\n    [INFO] Finished at: 2021-12-29T10:31:51+04:00\n    [INFO] ------------------------------------------------------------------------\n    [ERROR] Failed to execute goal net.masterthought:maven-cucumber-reporting:5.0.0:generate (execution) on project MobWebAutomation: Error Found: BUILD FAILED - Check Report For Details -&gt; [Help 1]\n    [ERROR] \n    [ERROR] To see the full stack trace of the errors, re-run Maven with the -e switch.\n    [ERROR] Re-run Maven using the -X switch to enable full debug logging.\n    [ERROR] \n    [ERROR] For more information about the errors and possible solutions, please read the \n</code></pre>\n<p>following articles:\n[ERROR] [Help 1] <a href=\"http://cwiki.apache.org/confluence/display/MAVEN/MojoExecutionException\" rel=\"nofollow noreferrer\">http://cwiki.apache.org/confluence/display/MAVEN/MojoExecutionException</a></p>\n<pre><code>     */\n    \n\n    \n    /*My pom file:*/\n    \n  {  &lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\n        &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n        &lt;groupId&gt;MobWebAutomation&lt;/groupId&gt;\n        &lt;artifactId&gt;MobWebAutomation&lt;/artifactId&gt;\n        &lt;version&gt;1.0-SNAPSHOT&lt;/version&gt;\n    \n        &lt;dependencies&gt;\n    \n            &lt;dependency&gt;\n                &lt;groupId&gt;io.appium&lt;/groupId&gt;\n                &lt;artifactId&gt;java-client&lt;/artifactId&gt;\n                &lt;version&gt;7.2.0&lt;/version&gt;\n            &lt;/dependency&gt;\n    \n    \n            &lt;dependency&gt;\n                &lt;groupId&gt;io.cucumber&lt;/groupId&gt;\n                &lt;artifactId&gt;cucumber-java&lt;/artifactId&gt;\n                &lt;version&gt;7.1.0&lt;/version&gt;\n            &lt;/dependency&gt;\n    \n            &lt;!-- https://mvnrepository.com/artifact/io.cucumber/cucumber-junit --&gt;\n            &lt;dependency&gt;\n                &lt;groupId&gt;io.cucumber&lt;/groupId&gt;\n                &lt;artifactId&gt;cucumber-junit&lt;/artifactId&gt;\n                &lt;version&gt;7.0.0&lt;/version&gt;\n                &lt;scope&gt;test&lt;/scope&gt;\n            &lt;/dependency&gt;\n            &lt;!-- https://mvnrepository.com/artifact/org.seleniumhq.selenium/selenium-java --&gt;\n    \n    \n        &lt;/dependencies&gt;\n        &lt;build&gt;\n            &lt;plugins&gt;\n                &lt;plugin&gt;\n                    &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n                    &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\n                    &lt;version&gt;3.8.0&lt;/version&gt;\n                    &lt;configuration&gt;\n                        &lt;source&gt;1.8&lt;/source&gt;\n                        &lt;target&gt;1.8&lt;/target&gt;\n                    &lt;/configuration&gt;\n                &lt;/plugin&gt;\n                &lt;plugin&gt;\n                    &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n                    &lt;artifactId&gt;maven-surefire-plugin&lt;/artifactId&gt;\n                    &lt;version&gt;2.22.0&lt;/version&gt;\n                    &lt;configuration&gt;\n                        &lt;includes&gt;\n                            &lt;exclude&gt;**/*Runner.java&lt;/exclude&gt;\n                        &lt;/includes&gt;\n                    &lt;/configuration&gt;\n                &lt;/plugin&gt;\n                \n    \n    \n    &lt;plugin&gt;\n            &lt;groupId&gt;net.masterthought&lt;/groupId&gt;\n            &lt;artifactId&gt;maven-cucumber-reporting&lt;/artifactId&gt;\n             &lt;version&gt;5.0.0&lt;/version&gt;\n            &lt;executions&gt;\n              &lt;execution&gt;\n                &lt;id&gt;execution&lt;/id&gt;\n                &lt;phase&gt;verify&lt;/phase&gt;\n                &lt;goals&gt;\n                  &lt;goal&gt;generate&lt;/goal&gt;\n                &lt;/goals&gt;\n                &lt;configuration&gt;\n                  &lt;projectName&gt;MobWebAutomation&lt;/projectName&gt;\n                  &lt;outputDirectory&gt;${project.build.directory}/cucumber-reports&lt;/outputDirectory&gt;\n                    &lt;enableFlashCharts&gt;true&lt;/enableFlashCharts&gt;\n                    &lt;buildNumber&gt;42&lt;/buildNumber&gt; \n                   &lt;parallelTesting&gt;false&lt;/parallelTesting&gt;\n                    &lt;inputDirectory&gt;${project.build.directory}/cucumber-reports&lt;/inputDirectory&gt;\n                  &lt;jsonFiles&gt;\n                  &lt;jsonFile&gt;**/*.json&lt;/jsonFile&gt;\n                  &lt;/jsonFiles&gt;\n                  &lt;testFailureIgnore&gt;true&lt;/testFailureIgnore&gt;\n                  &lt;buildSuccessOnTestFailure&gt;true&lt;/buildSuccessOnTestFailure&gt;\n                &lt;/configuration&gt;\n              &lt;/execution&gt;\n            &lt;/executions&gt;\n          &lt;/plugin&gt;\n            &lt;/plugins&gt;\n        &lt;/build&gt;\n    \n    &lt;/project&gt;\n    \n    }\n\n    **Runner class** \n    \n   { package runner;\n    \n    import org.junit.runner.RunWith;\n    import io.cucumber.junit.CucumberOptions;\n    import io.cucumber.junit.Cucumber;\n    \n    \n    @RunWith(Cucumber.class)\n    @CucumberOptions(features = { &quot;src/test/java/features/registration.feature&quot; }, \n                    glue = { &quot;stepDefinitions&quot;,\n                    &quot;utility&quot; }, monochrome = true, plugin = { &quot;pretty&quot;,\n                    \n                    &quot;json:target/cucumber-reports/AutomationReport.json&quot;,\n                    &quot;json:target/cucumber-reports/cucumber.runtime.formatter.JSONFormatter&quot;\n                    \n                    \n                    \n                    }, \n                    dryRun = false)//, tags = &quot;@correct or @incorrect&quot;)\n    \n    public class RunTest  {\n    \n    }\n</code></pre>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":15856821,"reputation":2451,"user_id":11441011,"display_name":"maloomeister"},"score":3,"creation_date":1662560740,"post_id":73637174,"comment_id":130034934,"body_markdown":"[Please do not upload images of code/data/errors when asking a question.](//meta.stackoverflow.com/q/285551) Instead, [edit] your question and put all relevant code / errors / output / etc. as text.","body":"<a href=\"//meta.stackoverflow.com/q/285551\">Please do not upload images of code/data/errors when asking a question.</a> Instead, <a href=\"https://stackoverflow.com/posts/73637174/edit\">edit</a> your question and put all relevant code / errors / output / etc. as text."},{"owner":{"account_id":14632062,"reputation":585,"user_id":10671013,"display_name":"Tan Yu Hau Sean"},"score":1,"creation_date":1662560809,"post_id":73637174,"comment_id":130034961,"body_markdown":"have you tried calling your method?","body":"have you tried calling your method?"},{"owner":{"account_id":15856821,"reputation":2451,"user_id":11441011,"display_name":"maloomeister"},"score":3,"creation_date":1662560810,"post_id":73637174,"comment_id":130034962,"body_markdown":"By the way, you never call `sortArray()` from your `main`.","body":"By the way, you never call <code>sortArray()</code> from your <code>main</code>."}],"answers":[{"tags":[],"owner":{"account_id":17717155,"reputation":527,"user_id":12863192,"display_name":"Ishan"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1662561265,"creation_date":1662561265,"answer_id":73637320,"question_id":73637174,"body_markdown":"The `public static void main` method does not call the method `sortArray` at all.\r\nIt just loops through the array, and prints the values in the array.\r\nSo, it just prints the numbers 1,3,4,6,9,7,8,2 as-is in the same order.\r\n\r\nAnd the problem statement\r\n&gt; to sort odd numbers in an ascending array\r\n\r\nDoes not exactly explain what needs to be done.\r\nSo, should the odd numbers of an array be moved to the beginning of the array and all those in ascending order, while the even numbers should be pushed towards the end of the array?\r\nSo the whole array won&#39;t be sorted, but all the odd numbers will be in ascending order and at the beginning of the array.\r\n\r\nAlso, even if the `sortArray` method is called, after sorting, it still prints the wrong result:\r\n```\r\n7\r\n7\r\n4\r\n6\r\n7\r\n7\r\n8\r\n2\r\n```\r\nSo, the logic is also wrong.","title":"Can&#39;t sort the odd numbers in the array","body":"<p>The <code>public static void main</code> method does not call the method <code>sortArray</code> at all.\nIt just loops through the array, and prints the values in the array.\nSo, it just prints the numbers 1,3,4,6,9,7,8,2 as-is in the same order.</p>\n<p>And the problem statement</p>\n<blockquote>\n<p>to sort odd numbers in an ascending array</p>\n</blockquote>\n<p>Does not exactly explain what needs to be done.\nSo, should the odd numbers of an array be moved to the beginning of the array and all those in ascending order, while the even numbers should be pushed towards the end of the array?\nSo the whole array won't be sorted, but all the odd numbers will be in ascending order and at the beginning of the array.</p>\n<p>Also, even if the <code>sortArray</code> method is called, after sorting, it still prints the wrong result:</p>\n<pre><code>7\n7\n4\n6\n7\n7\n8\n2\n</code></pre>\n<p>So, the logic is also wrong.</p>\n"},{"tags":[],"owner":{"account_id":322981,"reputation":310745,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1662563319,"creation_date":1662561906,"answer_id":73637480,"question_id":73637174,"body_markdown":"# Stream left incomplete\r\n\r\nYour code: \r\n\r\n    list.stream().sorted(); \r\n\r\n… is flawed. \r\n\r\nYou left the stream incomplete, not yet resolved. The method [`Stream#sorted`][1] is documented as returning another stream. \r\n\r\nTo quote the Javadoc:\r\n\r\n&gt; Returns a stream consisting of the elements of this stream …\r\n&gt; \r\n&gt; This is a [stateful intermediate operation][2].\r\n\r\nFurthermore, the Javadoc never promised that the original source list would be affected. \r\n\r\nApparently you assumed that calling `sorted` on a stream would sort the source list. Programming by assumption rarely goes well. Before blindly calling methods, **study the Javadoc**. If not clear, search Stack Overflow and other sources for discussion and example code.\r\n\r\nYou need to collect the results of your stream work into another list. By the way, use meaningful names — I changed your `list` for the more descriptive name `odds`.\r\n\r\n    List &lt; Integer &gt; oddsSorted  = odds.stream().sorted().toList() ;\r\n\r\nWe can use streams to filter out the even numbers. The `Arrays.stream` method returns an [`IntStream`][3].\r\n\r\nThe following code is untested, but should be close to correct.\r\n\r\n    int[] integerInputs= {1,3,4,6,9,7,8,2} ;\r\n    List &lt; Integer &gt; oddsSorted =\r\n        Arrays\r\n        .toStream( integerInputs )\r\n        .filter( \r\n           integer -&gt; integer % 2 != 0\r\n        )\r\n        .sorted()\r\n        .boxed()  // Convert from `int` primitives to `Integer` objects.\r\n        .toList()\r\n    ;\r\n\r\n    \r\n\r\n\r\n----------\r\n\r\nAs [commented][4], you can directly sort the original source list by merely calling [`List#sort`][5].\r\n\r\n    odds.sort( Comparator.naturalOrder() ) ;\r\n\r\nOr more briefly:\r\n\r\n    odds.sort() ;\r\n\r\n\r\n----------\r\n\r\nAs [commented][6], if you are new to programming, you might want to postpone your study of streams. Focus first on the conventional loops.\r\n\r\n\r\n  [1]: https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/stream/Stream.html#sorted()\r\n  [2]: https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/stream/package-summary.html#StreamOps\r\n  [3]: https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/stream/IntStream.html\r\n  [4]: https://stackoverflow.com/questions/73637174/cant-sort-the-odd-numbers-in-the-array/73637480#comment130035674_73637480\r\n  [5]: https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/List.html#sort(java.util.Comparator)\r\n  [6]: https://stackoverflow.com/questions/73637174/cant-sort-the-odd-numbers-in-the-array/73637480#comment130035968_73637480","title":"Can&#39;t sort the odd numbers in the array","body":"<h1>Stream left incomplete</h1>\n<p>Your code:</p>\n<pre><code>list.stream().sorted(); \n</code></pre>\n<p>… is flawed.</p>\n<p>You left the stream incomplete, not yet resolved. The method <a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/stream/Stream.html#sorted()\" rel=\"nofollow noreferrer\"><code>Stream#sorted</code></a> is documented as returning another stream.</p>\n<p>To quote the Javadoc:</p>\n<blockquote>\n<p>Returns a stream consisting of the elements of this stream …</p>\n<p>This is a <a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/stream/package-summary.html#StreamOps\" rel=\"nofollow noreferrer\">stateful intermediate operation</a>.</p>\n</blockquote>\n<p>Furthermore, the Javadoc never promised that the original source list would be affected.</p>\n<p>Apparently you assumed that calling <code>sorted</code> on a stream would sort the source list. Programming by assumption rarely goes well. Before blindly calling methods, <strong>study the Javadoc</strong>. If not clear, search Stack Overflow and other sources for discussion and example code.</p>\n<p>You need to collect the results of your stream work into another list. By the way, use meaningful names — I changed your <code>list</code> for the more descriptive name <code>odds</code>.</p>\n<pre><code>List &lt; Integer &gt; oddsSorted  = odds.stream().sorted().toList() ;\n</code></pre>\n<p>We can use streams to filter out the even numbers. The <code>Arrays.stream</code> method returns an <a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/stream/IntStream.html\" rel=\"nofollow noreferrer\"><code>IntStream</code></a>.</p>\n<p>The following code is untested, but should be close to correct.</p>\n<pre><code>int[] integerInputs= {1,3,4,6,9,7,8,2} ;\nList &lt; Integer &gt; oddsSorted =\n    Arrays\n    .toStream( integerInputs )\n    .filter( \n       integer -&gt; integer % 2 != 0\n    )\n    .sorted()\n    .boxed()  // Convert from `int` primitives to `Integer` objects.\n    .toList()\n;\n</code></pre>\n<hr />\n<p>As <a href=\"https://stackoverflow.com/questions/73637174/cant-sort-the-odd-numbers-in-the-array/73637480#comment130035674_73637480\">commented</a>, you can directly sort the original source list by merely calling <a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/List.html#sort(java.util.Comparator)\" rel=\"nofollow noreferrer\"><code>List#sort</code></a>.</p>\n<pre><code>odds.sort( Comparator.naturalOrder() ) ;\n</code></pre>\n<p>Or more briefly:</p>\n<pre><code>odds.sort() ;\n</code></pre>\n<hr />\n<p>As <a href=\"https://stackoverflow.com/questions/73637174/cant-sort-the-odd-numbers-in-the-array/73637480#comment130035968_73637480\">commented</a>, if you are new to programming, you might want to postpone your study of streams. Focus first on the conventional loops.</p>\n"},{"tags":[],"owner":{"account_id":12948514,"reputation":501,"user_id":19926805,"display_name":"Steffen"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1662562566,"creation_date":1662562566,"answer_id":73637628,"question_id":73637174,"body_markdown":"**Option 1: with Stream API**\r\n\r\n    int filteredSortedArray[] = Arrays.stream(yourArray).filter(x -&gt; x % 2 != 0).sorted().toArray();\r\n\r\n**Option 2:**\r\n\r\n 1. Use `Arrays.sort(arr);` to actually sort the array.\r\n 2. Implement your filter logic in a loop and save the values to a new array\r\n 3. Shorten the filtered array to the number of filtered values with `Arrays.copyOf(filteredSortedArray, &lt;new_array_length&gt;);`\r\n\r\n        private int[] sortFilterOddArray(int[] arr) {\r\n            Arrays.sort(arr);\r\n\r\n            int[] filteredSortedArray = new int[arr.length];\r\n            int counter = 0;\r\n            for (int i : arr) {\r\n                if (i % 2 == 0) continue;\r\n                filteredSortedArray[counter] = i;\r\n                counter++;\r\n            }\r\n            return Arrays.copyOf(filteredSortedArray, counter);\r\n        }\r\n","title":"Can&#39;t sort the odd numbers in the array","body":"<p><strong>Option 1: with Stream API</strong></p>\n<pre><code>int filteredSortedArray[] = Arrays.stream(yourArray).filter(x -&gt; x % 2 != 0).sorted().toArray();\n</code></pre>\n<p><strong>Option 2:</strong></p>\n<ol>\n<li><p>Use <code>Arrays.sort(arr);</code> to actually sort the array.</p>\n</li>\n<li><p>Implement your filter logic in a loop and save the values to a new array</p>\n</li>\n<li><p>Shorten the filtered array to the number of filtered values with <code>Arrays.copyOf(filteredSortedArray, &lt;new_array_length&gt;);</code></p>\n<pre><code>private int[] sortFilterOddArray(int[] arr) {\n    Arrays.sort(arr);\n\n    int[] filteredSortedArray = new int[arr.length];\n    int counter = 0;\n    for (int i : arr) {\n        if (i % 2 == 0) continue;\n        filteredSortedArray[counter] = i;\n        counter++;\n    }\n    return Arrays.copyOf(filteredSortedArray, counter);\n}\n</code></pre>\n</li>\n</ol>\n"}],"owner":{"account_id":26272067,"reputation":1,"user_id":19941835,"display_name":"Truong Nguyen Quoc"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":50,"favorite_count":0,"down_vote_count":2,"up_vote_count":0,"answer_count":3,"score":-2,"last_activity_date":1662563319,"creation_date":1662560651,"question_id":73637174,"body_markdown":"I am really new to java (started learning 2 days ago). Sorry if this is a stupid question.I have an exercise to sort odd numbers in an ascending array. But it fails to sort. And this is my error.\r\nThank you for your help[enter image description here][1]\r\n\r\n\r\n\r\n        package Java1;\r\n    \r\n    import java.util.ArrayList;\r\n    import java.util.List;\r\n    \r\n    public class StringB1 {\r\n    \t public static void main(String[] agrs) {\r\n    \t        int arr[] = {1,3,4,6,9,7,8,2};\r\n    \t        for (int e : arr) {\r\n    \t        \tSystem.out.println(e);\r\n    \t        }\r\n    \t    }\r\n    \tpublic static int[] sortArray(int[] array) {\r\n    \t    List&lt;Integer&gt; list = new ArrayList&lt;&gt;();\r\n    \t    for (int e : array) {\r\n    \t        if (e % 2 != 0) {\r\n    \t            list.add(e);\r\n    \t        }\r\n    \t    }\r\n    \t    list.stream().sorted();\r\n    \t    for (int i = 0; i &lt; array.length; i++) {\r\n    \t        if (array[i] %2 != 0){\r\n    \t            for (int j = 1; j &lt; list.size(); j++) {\r\n    \t                array[i] = list.get(j);\r\n    \t            }\r\n    \t        }\r\n    \t    }\r\n    \t    return array;\r\n    \t}\r\n    }\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/otjrE.png","title":"Can&#39;t sort the odd numbers in the array","body":"<p>I am really new to java (started learning 2 days ago). Sorry if this is a stupid question.I have an exercise to sort odd numbers in an ascending array. But it fails to sort. And this is my error.\nThank you for your help<a href=\"https://i.stack.imgur.com/otjrE.png\" rel=\"nofollow noreferrer\">enter image description here</a></p>\n<pre><code>    package Java1;\n\nimport java.util.ArrayList;\nimport java.util.List;\n\npublic class StringB1 {\n     public static void main(String[] agrs) {\n            int arr[] = {1,3,4,6,9,7,8,2};\n            for (int e : arr) {\n                System.out.println(e);\n            }\n        }\n    public static int[] sortArray(int[] array) {\n        List&lt;Integer&gt; list = new ArrayList&lt;&gt;();\n        for (int e : array) {\n            if (e % 2 != 0) {\n                list.add(e);\n            }\n        }\n        list.stream().sorted();\n        for (int i = 0; i &lt; array.length; i++) {\n            if (array[i] %2 != 0){\n                for (int j = 1; j &lt; list.size(); j++) {\n                    array[i] = list.get(j);\n                }\n            }\n        }\n        return array;\n    }\n}\n</code></pre>\n"},{"tags":["java","serialization","jackson","deserialization","objectmapper"],"answers":[{"tags":[],"owner":{"account_id":63318,"reputation":1115,"user_id":187484,"accept_rate":86,"display_name":"John Russell"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1662562997,"creation_date":1662561110,"answer_id":73637279,"question_id":72599197,"body_markdown":"This usually happens when your object has a property definition of type `Boolean` but a getter of type `boolean`.  Ensure these types match.","title":"com.fasterxml.jackson.databind.JsonMappingException: Cannot invoke &quot;java.lang.Boolean.booleanValue()&quot; because &quot;this.flag&quot; is null","body":"<p>This usually happens when your object has a property definition of type <code>Boolean</code> but a getter of type <code>boolean</code>.  Ensure these types match.</p>\n"}],"owner":{"account_id":22030810,"reputation":41,"user_id":19328138,"display_name":"FIKI"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2657,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"answer_count":1,"score":3,"last_activity_date":1662562997,"creation_date":1655105805,"question_id":72599197,"body_markdown":"I&#39;m trying to use Jackson in case to serialize and then deserialize an object. The object contains a field -&gt; `protected Serializable data`\r\nThis is where the problem comes from - this data can come from a lot of components. That is why I&#39;m trying to configure the Jackson ObjectMapper instead of adding annotations and changing the code (because for some of the issues I have with the serialization, like this one, I have to change like hundreds of different classes). Is there any way to tell the ObjectMapper to not use `.booleanValue()` on null fields.\r\nThis is how I&#39;ve currently configured my ObjectMapper:\r\n\r\n    ObjectMapper objectMapper = new ObjectMapper();\r\n    \r\n        objectMapper.setVisibility(objectMapper.getSerializationConfig().getDefaultVisibilityChecker()\r\n                    .withFieldVisibility(JsonAutoDetect.Visibility.ANY)\r\n                    .withGetterVisibility(JsonAutoDetect.Visibility.NONE)\r\n                    .withSetterVisibility(JsonAutoDetect.Visibility.NONE)\r\n                    .withCreatorVisibility(JsonAutoDetect.Visibility.NONE));\r\n\r\n","title":"com.fasterxml.jackson.databind.JsonMappingException: Cannot invoke &quot;java.lang.Boolean.booleanValue()&quot; because &quot;this.flag&quot; is null","body":"<p>I'm trying to use Jackson in case to serialize and then deserialize an object. The object contains a field -&gt; <code>protected Serializable data</code>\nThis is where the problem comes from - this data can come from a lot of components. That is why I'm trying to configure the Jackson ObjectMapper instead of adding annotations and changing the code (because for some of the issues I have with the serialization, like this one, I have to change like hundreds of different classes). Is there any way to tell the ObjectMapper to not use <code>.booleanValue()</code> on null fields.\nThis is how I've currently configured my ObjectMapper:</p>\n<pre><code>ObjectMapper objectMapper = new ObjectMapper();\n\n    objectMapper.setVisibility(objectMapper.getSerializationConfig().getDefaultVisibilityChecker()\n                .withFieldVisibility(JsonAutoDetect.Visibility.ANY)\n                .withGetterVisibility(JsonAutoDetect.Visibility.NONE)\n                .withSetterVisibility(JsonAutoDetect.Visibility.NONE)\n                .withCreatorVisibility(JsonAutoDetect.Visibility.NONE));\n</code></pre>\n"},{"tags":["java","spring-boot","rabbitmq","spring-cloud-stream"],"answers":[{"tags":[],"owner":{"account_id":445335,"reputation":5970,"user_id":837717,"display_name":"Oleg Zhurakousky"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1662555859,"creation_date":1662555859,"answer_id":73636057,"question_id":73635048,"body_markdown":"Yes, you can do it in several ways - https://docs.spring.io/spring-cloud-function/docs/current/reference/html/spring-cloud-function.html#_inputoutput_enrichment\r\nThe latest addition is via `input/output-header-mapping-expression`.\r\n\r\nThis feature is binder agnostic as it lives at the level of spring-cloud-function and will work with any binder.","title":"Send message TTL in header using spring cloud stream rabbit mq binder","body":"<p>Yes, you can do it in several ways - <a href=\"https://docs.spring.io/spring-cloud-function/docs/current/reference/html/spring-cloud-function.html#_inputoutput_enrichment\" rel=\"nofollow noreferrer\">https://docs.spring.io/spring-cloud-function/docs/current/reference/html/spring-cloud-function.html#_inputoutput_enrichment</a>\nThe latest addition is via <code>input/output-header-mapping-expression</code>.</p>\n<p>This feature is binder agnostic as it lives at the level of spring-cloud-function and will work with any binder.</p>\n"}],"owner":{"account_id":374940,"reputation":475,"user_id":725455,"accept_rate":51,"display_name":"user725455"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":330,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1662562962,"creation_date":1662551566,"question_id":73635048,"body_markdown":"I want to use spring cloud stream rabbitMQ binder for message driven architecture.\r\nBut each message should have own time to live setting. so I need to give this setting in message header. Do you think is this possible using Spring Cloud Stream RabbitMQ Binder ?\r\n\r\n       Message message1 = MessageBuilder.withPayload(new PFSimulationEvent(1, &quot;sd&quot;))\r\n                .setHeader(&quot;to_process&quot;, true).setHeader(&quot;expiration&quot;, 10000)\r\n                .build();\r\n            output.send(&quot;simulatePf-out-0&quot;, message1);","title":"Send message TTL in header using spring cloud stream rabbit mq binder","body":"<p>I want to use spring cloud stream rabbitMQ binder for message driven architecture.\nBut each message should have own time to live setting. so I need to give this setting in message header. Do you think is this possible using Spring Cloud Stream RabbitMQ Binder ?</p>\n<pre><code>   Message message1 = MessageBuilder.withPayload(new PFSimulationEvent(1, &quot;sd&quot;))\n            .setHeader(&quot;to_process&quot;, true).setHeader(&quot;expiration&quot;, 10000)\n            .build();\n        output.send(&quot;simulatePf-out-0&quot;, message1);\n</code></pre>\n"},{"tags":["java","project-reactor","reactor"],"comments":[{"owner":{"account_id":319873,"reputation":87612,"user_id":637853,"accept_rate":50,"display_name":"Thomas"},"score":0,"creation_date":1662546601,"post_id":73633856,"comment_id":130029084,"body_markdown":"So `bookRepository.findByLibraryId(...)` returns a book but `bookRepository.findById(...)` returns the pages of a book? How about replacing `flatMap()` with `map()` and some logic (not sure if that would break the reactive style though)?","body":"So <code>bookRepository.findByLibraryId(...)</code> returns a book but <code>bookRepository.findById(...)</code> returns the pages of a book? How about replacing <code>flatMap()</code> with <code>map()</code> and some logic (not sure if that would break the reactive style though)?"}],"answers":[{"tags":[],"owner":{"account_id":14492583,"reputation":701,"user_id":10468291,"display_name":"Patrick Hooijer"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1662562924,"creation_date":1662551762,"answer_id":73635084,"question_id":73633856,"body_markdown":"In functional libraries like Reactor you can pass arguments from previous steps by nesting. In your case you can achieve this by calling `map` inside the `flatMap`.\r\n\r\nHere are two examples of doing this. Both are equivalent so choose the one by your own preference:\r\n\r\nCode block 1: map at both Monos\r\n```lang-java\r\npublic Mono&lt;BookInfo&gt; get(int bookId) {\r\n    return bookRepository.findByLibraryId(bookId)\r\n            .flatMap(book -&gt; bookRepository.findById(book.id() + 1)\r\n                    .map(pages -&gt; new BookInfo(Optional.of(book), pages)))\r\n            .switchIfEmpty(Mono.defer(() -&gt; bookRepository.findById(0)\r\n                    .map(pages -&gt; new BookInfo(Optional.empty(), pages))));\r\n}\r\n```\r\n\r\nCode block 2: map at one Mono by first mapping to an Optional\r\n```java\r\npublic Mono&lt;BookInfo&gt; get2(int bookId) {\r\n    return bookRepository.findByLibraryId(bookId)\r\n            .map(Optional::of)\r\n            .defaultIfEmpty(Optional.empty())\r\n            .flatMap(optionalBook -&gt; bookRepository.findById(\r\n                            optionalBook.map(book -&gt; book.id() + 1).orElse(0))\r\n                    .map(pages -&gt; new BookInfo(optionalBook, pages)));\r\n}\r\n```\r\n\r\nNote that in both cases, the `map` has access to book/optionalBook.","title":"Pass Mono to the last map","body":"<p>In functional libraries like Reactor you can pass arguments from previous steps by nesting. In your case you can achieve this by calling <code>map</code> inside the <code>flatMap</code>.</p>\n<p>Here are two examples of doing this. Both are equivalent so choose the one by your own preference:</p>\n<p>Code block 1: map at both Monos</p>\n<pre class=\"lang-java prettyprint-override\"><code>public Mono&lt;BookInfo&gt; get(int bookId) {\n    return bookRepository.findByLibraryId(bookId)\n            .flatMap(book -&gt; bookRepository.findById(book.id() + 1)\n                    .map(pages -&gt; new BookInfo(Optional.of(book), pages)))\n            .switchIfEmpty(Mono.defer(() -&gt; bookRepository.findById(0)\n                    .map(pages -&gt; new BookInfo(Optional.empty(), pages))));\n}\n</code></pre>\n<p>Code block 2: map at one Mono by first mapping to an Optional</p>\n<pre class=\"lang-java prettyprint-override\"><code>public Mono&lt;BookInfo&gt; get2(int bookId) {\n    return bookRepository.findByLibraryId(bookId)\n            .map(Optional::of)\n            .defaultIfEmpty(Optional.empty())\n            .flatMap(optionalBook -&gt; bookRepository.findById(\n                            optionalBook.map(book -&gt; book.id() + 1).orElse(0))\n                    .map(pages -&gt; new BookInfo(optionalBook, pages)));\n}\n</code></pre>\n<p>Note that in both cases, the <code>map</code> has access to book/optionalBook.</p>\n"}],"owner":{"account_id":24287116,"reputation":408,"user_id":18232723,"display_name":"kylie.zoltan"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":162,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1662562924,"creation_date":1662546139,"question_id":73633856,"body_markdown":"I&#39;m trying to make this code reactive, but without any luck.\r\n\r\nThis is the old code:\r\n\r\n    public BookInfo get( int libraryId )\r\n    {\r\n        Optional&lt;Book&gt; optionalBook = bookRepository.findByLibraryId( bookId );\r\n\r\n        int bookId = optionalBook\r\n            .map( b -&gt; b.id() + 1 )\r\n            .orElse( 0 );\r\n        \r\n        return bookRepository.findById( bookId )\r\n                             .map( pages -&gt; new BookInfo( optionalBook, pages ) );\r\n    }\r\n\r\nThis is what I came up with so far:\r\n\r\n    public Mono&lt;BookInfo&gt; get( int libraryId )\r\n    {\r\n        return bookRepository.findByLibraryId( bookId )\r\n                             .flatMap( book -&gt; bookRepository.findById( book.id() ) )\r\n                             .switchIfEmpty( Mono.defer( () -&gt; bookRepository.findById( 0 ) ) )\r\n                             .map( pages -&gt; new BookInfo( null, pages ) );\r\n    }\r\n\r\nThis issue is how can I get the book returned by the `findByLibraryId` method to the last map?\r\n\r\nFor this case I only need to pass in an extra value to the last map but what if I have to pass multiples?\r\n\r\n\r\nThanks","title":"Pass Mono to the last map","body":"<p>I'm trying to make this code reactive, but without any luck.</p>\n<p>This is the old code:</p>\n<pre><code>public BookInfo get( int libraryId )\n{\n    Optional&lt;Book&gt; optionalBook = bookRepository.findByLibraryId( bookId );\n\n    int bookId = optionalBook\n        .map( b -&gt; b.id() + 1 )\n        .orElse( 0 );\n    \n    return bookRepository.findById( bookId )\n                         .map( pages -&gt; new BookInfo( optionalBook, pages ) );\n}\n</code></pre>\n<p>This is what I came up with so far:</p>\n<pre><code>public Mono&lt;BookInfo&gt; get( int libraryId )\n{\n    return bookRepository.findByLibraryId( bookId )\n                         .flatMap( book -&gt; bookRepository.findById( book.id() ) )\n                         .switchIfEmpty( Mono.defer( () -&gt; bookRepository.findById( 0 ) ) )\n                         .map( pages -&gt; new BookInfo( null, pages ) );\n}\n</code></pre>\n<p>This issue is how can I get the book returned by the <code>findByLibraryId</code> method to the last map?</p>\n<p>For this case I only need to pass in an extra value to the last map but what if I have to pass multiples?</p>\n<p>Thanks</p>\n"},{"tags":["java","android","xml"],"comments":[{"owner":{"account_id":9172301,"reputation":4168,"user_id":6819340,"accept_rate":39,"display_name":"darshan"},"score":0,"creation_date":1662562247,"post_id":73637537,"comment_id":130035561,"body_markdown":"Hint: `Theme.AppCompat.DayNight`.","body":"Hint: <code>Theme.AppCompat.DayNight</code>."},{"owner":{"account_id":25892115,"reputation":19,"user_id":19619360,"display_name":"Mikandre"},"score":0,"creation_date":1662562359,"post_id":73637537,"comment_id":130035605,"body_markdown":"yes, but i can&#39;t control the background","body":"yes, but i can&#39;t control the background"},{"owner":{"account_id":9172301,"reputation":4168,"user_id":6819340,"accept_rate":39,"display_name":"darshan"},"score":0,"creation_date":1662562481,"post_id":73637537,"comment_id":130035664,"body_markdown":"You can, using your own resources for dark/light themes. Check: https://medium.com/androiddevelopers/appcompat-v23-2-daynight-d10f90c83e94","body":"You can, using your own resources for dark/light themes. Check: <a href=\"https://medium.com/androiddevelopers/appcompat-v23-2-daynight-d10f90c83e94\" rel=\"nofollow noreferrer\">medium.com/androiddevelopers/&hellip;</a>"}],"answers":[{"tags":[],"owner":{"account_id":25373331,"reputation":110,"user_id":19186780,"display_name":"CodeGorilla"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1662562452,"creation_date":1662562452,"answer_id":73637608,"question_id":73637537,"body_markdown":"There are a few ways to go about this, one way is the following:\r\n\r\nYou need to create 2 files under the res/values/colours. One as the default and one for night.\r\n\r\nIn each of those files create something like the following:\r\n\r\n    &lt;color name=&quot;application_background&quot;&gt;HEX_CODE_VALUE&lt;/color&gt;\r\n\r\nThen in your desired layout simply add application_background as the background colour - assuming you are using XML layouts.","title":"Change background color according to the phone mode - Android Studio in Java","body":"<p>There are a few ways to go about this, one way is the following:</p>\n<p>You need to create 2 files under the res/values/colours. One as the default and one for night.</p>\n<p>In each of those files create something like the following:</p>\n<pre><code>&lt;color name=&quot;application_background&quot;&gt;HEX_CODE_VALUE&lt;/color&gt;\n</code></pre>\n<p>Then in your desired layout simply add application_background as the background colour - assuming you are using XML layouts.</p>\n"}],"owner":{"account_id":25892115,"reputation":19,"user_id":19619360,"display_name":"Mikandre"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":134,"favorite_count":0,"down_vote_count":3,"up_vote_count":0,"accepted_answer_id":73637608,"answer_count":1,"score":-3,"last_activity_date":1662562452,"creation_date":1662562131,"question_id":73637537,"body_markdown":"I&#39;m trying to build a Java application with Android Studio. I plan to make 2 versions: a day version and a night version. How can I change the background of my xml file according to the mode it is set? That is, if it is day, the background must be white, if it is night it must be blue.","title":"Change background color according to the phone mode - Android Studio in Java","body":"<p>I'm trying to build a Java application with Android Studio. I plan to make 2 versions: a day version and a night version. How can I change the background of my xml file according to the mode it is set? That is, if it is day, the background must be white, if it is night it must be blue.</p>\n"},{"tags":["java","faker","snakeyaml"],"comments":[{"owner":{"account_id":980655,"reputation":1119,"user_id":1168586,"display_name":"mac"},"score":2,"creation_date":1617604836,"post_id":65775918,"comment_id":118341294,"body_markdown":"There is an issue in java faker repository with an workaround - https://github.com/DiUS/java-faker/issues/327 you gonna need to exclude org.yaml from your javafaker dependency","body":"There is an issue in java faker repository with an workaround - <a href=\"https://github.com/DiUS/java-faker/issues/327\" rel=\"nofollow noreferrer\">github.com/DiUS/java-faker/issues/327</a> you gonna need to exclude org.yaml from your javafaker dependency"},{"owner":{"account_id":2141833,"reputation":5558,"user_id":1900290,"accept_rate":59,"display_name":"Rpj"},"score":0,"creation_date":1617626252,"post_id":65775918,"comment_id":118347947,"body_markdown":"@mac this doesn&#39;t help, resulting in the same error","body":"@mac this doesn&#39;t help, resulting in the same error"}],"answers":[{"tags":[],"owner":{"account_id":12711012,"reputation":97,"user_id":16330843,"display_name":"doniadhamov"},"down_vote_count":2,"up_vote_count":10,"is_accepted":false,"score":8,"last_activity_date":1624852672,"creation_date":1624852672,"answer_id":68157386,"question_id":65775918,"body_markdown":"In my case, I just deleted *snakeyaml* dependencies directory manually (*/.m2/repository/org/yaml/snakeyaml), it works.","title":"snakeyaml-1.27-android.jar not found error while running tests","body":"<p>In my case, I just deleted <em>snakeyaml</em> dependencies directory manually (*/.m2/repository/org/yaml/snakeyaml), it works.</p>\n"},{"tags":[],"owner":{"account_id":22098158,"reputation":9,"user_id":16355048,"display_name":"Guest Viewer"},"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1625112622,"creation_date":1625112622,"answer_id":68204179,"question_id":65775918,"body_markdown":"Workaround: Copy existing snakeyaml jar to the filename being searched\r\n\r\ncp /Users/user/.m2/repository/org/yaml/snakeyaml/1.27/snakeyaml-1.27.jar /Users/user/.m2/repository/org/yaml/snakeyaml/1.27/snakeyaml-1.27-android.jar","title":"snakeyaml-1.27-android.jar not found error while running tests","body":"<p>Workaround: Copy existing snakeyaml jar to the filename being searched</p>\n<p>cp /Users/user/.m2/repository/org/yaml/snakeyaml/1.27/snakeyaml-1.27.jar /Users/user/.m2/repository/org/yaml/snakeyaml/1.27/snakeyaml-1.27-android.jar</p>\n"},{"tags":[],"owner":{"account_id":24025519,"reputation":51,"user_id":18007177,"display_name":"Abhijeet kumar"},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1660915417,"creation_date":1660590409,"answer_id":73365418,"question_id":65775918,"body_markdown":"```\r\n// https://mvnrepository.com/artifact/com.github.javafaker/javafaker\r\nimplementation &#39;com.github.javafaker:javafaker:1.0.2&#39;\r\n```\r\nResult: Could not find `snakeyaml-1.30-android.jar (org.yaml:snakeyaml:1.30).`\r\nSearched in the following locations:\r\n    https://repo.maven.apache.org/maven2/org/yaml/snakeyaml/1.30/snakeyaml-1.30-android.jar\r\n \r\n\r\n\r\nSolution: Use `dataFaker` instead of `javaFaker` that will resolve all the issues, like so:\r\n```\r\n// https://mvnrepository.com/artifact/net.datafaker/datafaker\r\nimplementation &#39;net.datafaker:datafaker:1.5.0&#39;\r\n```\r\n\r\n","title":"snakeyaml-1.27-android.jar not found error while running tests","body":"<pre><code>// https://mvnrepository.com/artifact/com.github.javafaker/javafaker\nimplementation 'com.github.javafaker:javafaker:1.0.2'\n</code></pre>\n<p>Result: Could not find <code>snakeyaml-1.30-android.jar (org.yaml:snakeyaml:1.30).</code>\nSearched in the following locations:\n<a href=\"https://repo.maven.apache.org/maven2/org/yaml/snakeyaml/1.30/snakeyaml-1.30-android.jar\" rel=\"noreferrer\">https://repo.maven.apache.org/maven2/org/yaml/snakeyaml/1.30/snakeyaml-1.30-android.jar</a></p>\n<p>Solution: Use <code>dataFaker</code> instead of <code>javaFaker</code> that will resolve all the issues, like so:</p>\n<pre><code>// https://mvnrepository.com/artifact/net.datafaker/datafaker\nimplementation 'net.datafaker:datafaker:1.5.0'\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3173718,"reputation":204,"user_id":2682089,"display_name":"Kabiru Ahmed"},"down_vote_count":0,"up_vote_count":4,"is_accepted":true,"score":4,"last_activity_date":1662562314,"creation_date":1662562314,"answer_id":73637572,"question_id":65775918,"body_markdown":"You need to exclude the org.yaml from the java faker dependency.\r\n```\r\n implementation (&#39;com.github.javafaker:javafaker:1.0.2&#39;) { exclude module: &#39;org.yaml&#39; }\r\n    implementation group: &#39;org.yaml&#39;, name: &#39;snakeyaml&#39;, version: &#39;1.26&#39;\r\n```\r\n","title":"snakeyaml-1.27-android.jar not found error while running tests","body":"<p>You need to exclude the org.yaml from the java faker dependency.</p>\n<pre><code> implementation ('com.github.javafaker:javafaker:1.0.2') { exclude module: 'org.yaml' }\n    implementation group: 'org.yaml', name: 'snakeyaml', version: '1.26'\n</code></pre>\n"}],"owner":{"account_id":2141833,"reputation":5558,"user_id":1900290,"accept_rate":59,"display_name":"Rpj"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":7778,"favorite_count":0,"down_vote_count":0,"up_vote_count":7,"accepted_answer_id":73637572,"answer_count":4,"score":7,"last_activity_date":1662562314,"creation_date":1610978389,"question_id":65775918,"body_markdown":"./gradlew test\r\n&gt; Task :compileTestJava FAILED\r\n    FAILURE: Build failed with an exception.\r\n     \r\n    * What went wrong:\r\n    Execution failed for task &#39;:compileTestJava&#39;.\r\n    &gt; Could not find snakeyaml-1.27-android.jar (org.yaml:snakeyaml:1.27).\r\n      Searched in the following locations:\r\n          file:/Users/user/.m2/repository/org/yaml/snakeyaml/1.27/snakeyaml-1.27-android.jar\r\n\r\nI get the above error with the following definition in my build.gradle file, trying to exclude from javafaker doesn&#39;t help either. What should I do here?\r\n\r\n    // faker\r\n    testImplementation(&#39;com.github.javafaker:javafaker:1.0.2&#39;)\r\n    testImplementation group: &#39;org.yaml&#39;, name: &#39;snakeyaml&#39;, version: &#39;1.27&#39;","title":"snakeyaml-1.27-android.jar not found error while running tests","body":"<p>./gradlew test</p>\n<blockquote>\n<p>Task :compileTestJava FAILED\nFAILURE: Build failed with an exception.</p>\n</blockquote>\n<pre><code>* What went wrong:\nExecution failed for task ':compileTestJava'.\n&gt; Could not find snakeyaml-1.27-android.jar (org.yaml:snakeyaml:1.27).\n  Searched in the following locations:\n      file:/Users/user/.m2/repository/org/yaml/snakeyaml/1.27/snakeyaml-1.27-android.jar\n</code></pre>\n<p>I get the above error with the following definition in my build.gradle file, trying to exclude from javafaker doesn't help either. What should I do here?</p>\n<pre><code>// faker\ntestImplementation('com.github.javafaker:javafaker:1.0.2')\ntestImplementation group: 'org.yaml', name: 'snakeyaml', version: '1.27'\n</code></pre>\n"},{"tags":["java","java-annotations"],"comments":[{"owner":{"account_id":1992310,"reputation":11172,"user_id":1786065,"accept_rate":91,"display_name":"Rogue"},"score":0,"creation_date":1662559563,"post_id":73636828,"comment_id":130034400,"body_markdown":"You could potentially work with the `StackTraceElement`s for the given `Thread.currentThread().getStackTrace()`, for which there is a `StackTraceElement#getLineNumber`. There&#39;s also the relatively-newer stackwalking api, which you could look into.","body":"You could potentially work with the <code>StackTraceElement</code>s for the given <code>Thread.currentThread().getStackTrace()</code>, for which there is a <code>StackTraceElement#getLineNumber</code>. There&#39;s also the relatively-newer stackwalking api, which you could look into."},{"owner":{"account_id":401843,"reputation":89788,"user_id":768644,"display_name":"rzwitserloot"},"score":0,"creation_date":1662560453,"post_id":73636828,"comment_id":130034787,"body_markdown":"Your question doesn&#39;t appear to make sense, perhaps edit it. Specifically: Ordinarily, you log with e.g. `log.warn(&quot;Hello&quot;)`, and stack traces let you get line numbers if you want it (though, that is slow). Where does the annotation part come in?","body":"Your question doesn&#39;t appear to make sense, perhaps edit it. Specifically: Ordinarily, you log with e.g. <code>log.warn(&quot;Hello&quot;)</code>, and stack traces let you get line numbers if you want it (though, that is slow). Where does the annotation part come in?"},{"owner":{"account_id":401843,"reputation":89788,"user_id":768644,"display_name":"rzwitserloot"},"score":0,"creation_date":1662561098,"post_id":73636828,"comment_id":130035084,"body_markdown":"It almost sounds like you think you can annotate arbitrary lines. You can&#39;t, which makes this question moot. Annotation processors only see signatures (field and method decls), not method bodies. I&#39;m not quite sure what you want, but I&#39;m pretty sure the answer is &#39;whatever it is, you cannot :(&#39;.","body":"It almost sounds like you think you can annotate arbitrary lines. You can&#39;t, which makes this question moot. Annotation processors only see signatures (field and method decls), not method bodies. I&#39;m not quite sure what you want, but I&#39;m pretty sure the answer is &#39;whatever it is, you cannot :(&#39;."},{"owner":{"account_id":25946793,"reputation":99,"user_id":19665422,"display_name":"Thorbj&#248;rn Andersen - UFST"},"score":0,"creation_date":1662562213,"post_id":73636828,"comment_id":130035542,"body_markdown":"@rzwitserloot I have revised the text.   I may have misunderstood what is possible.","body":"@rzwitserloot I have revised the text.   I may have misunderstood what is possible."},{"owner":{"account_id":401843,"reputation":89788,"user_id":768644,"display_name":"rzwitserloot"},"score":0,"creation_date":1662562628,"post_id":73636828,"comment_id":130035725,"body_markdown":"Ah, I see what you want to do now. Annotation Processors _cannot do this_ officially. You could hack it (use APs as a way &#39;in&#39;, using a lot of `--add-opens` and presumptive casting, or use agents, or just fork `javac`, that&#39;ll probably be easier. But this is still all incredibly complicated.","body":"Ah, I see what you want to do now. Annotation Processors <i>cannot do this</i> officially. You could hack it (use APs as a way &#39;in&#39;, using a lot of <code>--add-opens</code> and presumptive casting, or use agents, or just fork <code>javac</code>, that&#39;ll probably be easier. But this is still all incredibly complicated."},{"owner":{"account_id":401843,"reputation":89788,"user_id":768644,"display_name":"rzwitserloot"},"score":0,"creation_date":1662562766,"post_id":73636828,"comment_id":130035798,"body_markdown":"If you are interested, we (core dev team, [Project Lombok](https://projectlombok.org)) have been considering adding something like this. We&#39;d accept PRs...","body":"If you are interested, we (core dev team, <a href=\"https://projectlombok.org\" rel=\"nofollow noreferrer\">Project Lombok</a>) have been considering adding something like this. We&#39;d accept PRs..."},{"owner":{"account_id":25946793,"reputation":99,"user_id":19665422,"display_name":"Thorbj&#248;rn Andersen - UFST"},"score":0,"creation_date":1662632000,"post_id":73636828,"comment_id":130052654,"body_markdown":"@rzwitserloot Thank you for clarifying that this is not easily done.  I have previously been very wary about Lombok because it needs to hook deep into the compiler to do its magic which makes the builds vendor dependant.  Is this still so?","body":"@rzwitserloot Thank you for clarifying that this is not easily done.  I have previously been very wary about Lombok because it needs to hook deep into the compiler to do its magic which makes the builds vendor dependant.  Is this still so?"}],"owner":{"account_id":25946793,"reputation":99,"user_id":19665422,"display_name":"Thorbj&#248;rn Andersen - UFST"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":160,"favorite_count":0,"down_vote_count":0,"up_vote_count":4,"answer_count":0,"score":4,"last_activity_date":1662562155,"creation_date":1662559307,"question_id":73636828,"body_markdown":"In the process of writing a Java program doing a lot of logging using java.util.logging (keeping it simple) I was wondering if I could generate the `(MyJavaFile.java:123)` bit with the java annotation processor **at compile time** creating static strings containing this information to be used for logging.  I am not interested in throwing and investigating an exception at runtime.\r\n\r\nI would therefore like to be able to get the line number for an Element found by the annotation processor code eventually written by me to do this (generate a class with string constants including method+line number) but was not able to identify the proper way to do this.\r\n\r\n\r\nHow should &quot;get line number for current source&quot; be done when processing annotations?\r\n\r\n","title":"Can I get source line number when processing annotations in Java?","body":"<p>In the process of writing a Java program doing a lot of logging using java.util.logging (keeping it simple) I was wondering if I could generate the <code>(MyJavaFile.java:123)</code> bit with the java annotation processor <strong>at compile time</strong> creating static strings containing this information to be used for logging.  I am not interested in throwing and investigating an exception at runtime.</p>\n<p>I would therefore like to be able to get the line number for an Element found by the annotation processor code eventually written by me to do this (generate a class with string constants including method+line number) but was not able to identify the proper way to do this.</p>\n<p>How should &quot;get line number for current source&quot; be done when processing annotations?</p>\n"},{"tags":["java","rest-assured","printstream","stringwriter"],"answers":[{"tags":[],"owner":{"account_id":90755,"reputation":5544,"user_id":249663,"display_name":"Guillaume"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1662562046,"creation_date":1662562046,"answer_id":73637524,"question_id":71063859,"body_markdown":"It looks a lot like a missing `flush()` call.\r\n\r\nThe easiest solution is to set the autoFlush parameter to `true` when constructing your `PrintStream`:\r\n\r\n    new PrintStream(true, new WriterOutputStream(requestWriter, UTF_8))\r\n\r\n","title":"Writing RestAssured logs to StringWriter always seems to cut the last lines of the result","body":"<p>It looks a lot like a missing <code>flush()</code> call.</p>\n<p>The easiest solution is to set the autoFlush parameter to <code>true</code> when constructing your <code>PrintStream</code>:</p>\n<pre><code>new PrintStream(true, new WriterOutputStream(requestWriter, UTF_8))\n</code></pre>\n"}],"owner":{"account_id":21653233,"reputation":1,"user_id":15973483,"display_name":"Kristr&#250;n Louise &#193;stvaldsd&#243;ttir"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":131,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1662562046,"creation_date":1644490569,"question_id":71063859,"body_markdown":"I am running RestAssured tests and I wanted to read info about the request from the logs ( to use in reports). I have a superclass with the following code which the test classes extent.\r\nThe superclass:\r\n```\r\nimport java.io.PrintStream;\r\nimport java.io.StringWriter;\r\nimport java.nio.charset.StandardCharsets;\r\nimport io.restassured.filter.log.RequestLoggingFilter;\r\n \r\n\r\n static StringWriter requestWriter;\r\n static PrintStream requestCapture;\r\n requestWriter = new StringWriter();\r\n requestCapture = new PrintStream(new WriterOutputStream(requestWriter,\r\n                StandardCharsets.UTF_8));\r\n filters(new RequestLoggingFilter(requestCapture)\r\n\r\n```\r\n```\r\nsystem.out.println(requestWriter.toString())\r\n```\r\nGives something like this:\r\n```\r\nRequest method:\tGET\r\nRequest URI:\thttps://xxxxxxxxxxxxx/rest/v1/filters/4b54309a-37f0-11ec-8104-0af82ae7751a/tasks\r\nProxy:\t\t\t&lt;none&gt;\r\nRequest params:\t&lt;none&gt;\r\nQuery params:\t&lt;none&gt;\r\nForm params:\t&lt;none&gt;\r\nPath params:\t&lt;none&gt;\r\nHeaders:\t\tAccept=*/*\r\n\t\t\t\tContent-Type=application/json\r\nCookies:\t\tSESSION=869fd661-b0c8-408f-be33-db8951804ef3;Path=/cc;Secure;HttpOnly;SameSite=None\r\nMultiparts:\t\t&lt;none&gt;\r\nBody:\t\t\t&lt;none&gt;\r\nRequest method:\tGET\r\nRequest URI:\thttps://xxxxxxxxxx/rest/v1/tasks/cee718c1-8822-11ec-89f9-e27daa79f45a\r\nProxy:\t\t\t&lt;none&gt;\r\nRequest params:\t&lt;\r\n```\r\nwhere the logs are always missing the last lines, no matter how big or small it is.","title":"Writing RestAssured logs to StringWriter always seems to cut the last lines of the result","body":"<p>I am running RestAssured tests and I wanted to read info about the request from the logs ( to use in reports). I have a superclass with the following code which the test classes extent.\nThe superclass:</p>\n<pre><code>import java.io.PrintStream;\nimport java.io.StringWriter;\nimport java.nio.charset.StandardCharsets;\nimport io.restassured.filter.log.RequestLoggingFilter;\n \n\n static StringWriter requestWriter;\n static PrintStream requestCapture;\n requestWriter = new StringWriter();\n requestCapture = new PrintStream(new WriterOutputStream(requestWriter,\n                StandardCharsets.UTF_8));\n filters(new RequestLoggingFilter(requestCapture)\n\n</code></pre>\n<pre><code>system.out.println(requestWriter.toString())\n</code></pre>\n<p>Gives something like this:</p>\n<pre><code>Request method: GET\nRequest URI:    https://xxxxxxxxxxxxx/rest/v1/filters/4b54309a-37f0-11ec-8104-0af82ae7751a/tasks\nProxy:          &lt;none&gt;\nRequest params: &lt;none&gt;\nQuery params:   &lt;none&gt;\nForm params:    &lt;none&gt;\nPath params:    &lt;none&gt;\nHeaders:        Accept=*/*\n                Content-Type=application/json\nCookies:        SESSION=869fd661-b0c8-408f-be33-db8951804ef3;Path=/cc;Secure;HttpOnly;SameSite=None\nMultiparts:     &lt;none&gt;\nBody:           &lt;none&gt;\nRequest method: GET\nRequest URI:    https://xxxxxxxxxx/rest/v1/tasks/cee718c1-8822-11ec-89f9-e27daa79f45a\nProxy:          &lt;none&gt;\nRequest params: &lt;\n</code></pre>\n<p>where the logs are always missing the last lines, no matter how big or small it is.</p>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":4826640,"reputation":25377,"user_id":3895960,"accept_rate":97,"display_name":"Dici"},"score":0,"creation_date":1662560458,"post_id":73637070,"comment_id":130034792,"body_markdown":"If you want to support complex arbitrary queries you&#39;re unlikely to find anything like this. Do you even need to beat linear speed? How many items do you have? If you have some restrictions on what keys can be used to do your most important filters, you can use existing data structures","body":"If you want to support complex arbitrary queries you&#39;re unlikely to find anything like this. Do you even need to beat linear speed? How many items do you have? If you have some restrictions on what keys can be used to do your most important filters, you can use existing data structures"},{"owner":{"account_id":8556756,"reputation":595,"user_id":6412004,"display_name":"Regyn"},"score":0,"creation_date":1662560752,"post_id":73637070,"comment_id":130034936,"body_markdown":"@Dici Not arbitrary but specific fields (+ combinations) being sorted. Known at coding time. But since there are multiple fields, I cannot only have one sort order, but multiple. Simplest use-case would be &quot;get all with author equals&quot; AND &quot;get all with year equals&quot;. If I sort by author, I can&#39;t answer year quickly. If I want author + year, it would be O(log n) + O(n) of the returned subset. If I use multiple lists, I&#39;ve to keep them in sync, and store the index to compare subsets.","body":"@Dici Not arbitrary but specific fields (+ combinations) being sorted. Known at coding time. But since there are multiple fields, I cannot only have one sort order, but multiple. Simplest use-case would be &quot;get all with author equals&quot; AND &quot;get all with year equals&quot;. If I sort by author, I can&#39;t answer year quickly. If I want author + year, it would be O(log n) + O(n) of the returned subset. If I use multiple lists, I&#39;ve to keep them in sync, and store the index to compare subsets."}],"answers":[{"tags":[],"owner":{"account_id":4826640,"reputation":25377,"user_id":3895960,"accept_rate":97,"display_name":"Dici"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1662560807,"creation_date":1662560807,"answer_id":73637214,"question_id":73637070,"body_markdown":"If you really need to support just those two types of queries, you can use a `Map&lt;String, Map&lt;String, Set&lt;Book&gt;&gt;&gt;` where the first key is the year and the second is the author. That&#39;s the equivalent of a Guava `Table`. \r\n\r\nThis would look like this (incomplete code):\r\n\r\n```java\r\nMap&lt;String, Map&lt;String, Set&lt;Book&gt;&gt;&gt; booksByYearAndAuthor;\r\n\r\n// books where author = &quot;Foo&quot; and year = &quot;2022&quot;\r\nbooksByYearAndAuthor.get(&quot;2022&quot;).get(&quot;author&quot;) // add necessary null checks or default value\r\n\r\n// books where year = &quot;2022&quot;\r\nbooksByYearAndAuthor.get(&quot;2022&quot;).values().stream().flatMap(...).collect(...) // add necessary null checks or default value\r\n```\r\n\r\n\r\n\r\nIf you need to support arbitrary queries... I don&#39;t think you can get away from linear queries without implementing something yourself to add secondary indices, at the cost of extra memory. Do you have enough items to require doing this? That&#39;s the question, and if you don&#39;t need a DB I would say: probably not.","title":"Java list with index on attributes without using sql","body":"<p>If you really need to support just those two types of queries, you can use a <code>Map&lt;String, Map&lt;String, Set&lt;Book&gt;&gt;&gt;</code> where the first key is the year and the second is the author. That's the equivalent of a Guava <code>Table</code>.</p>\n<p>This would look like this (incomplete code):</p>\n<pre class=\"lang-java prettyprint-override\"><code>Map&lt;String, Map&lt;String, Set&lt;Book&gt;&gt;&gt; booksByYearAndAuthor;\n\n// books where author = &quot;Foo&quot; and year = &quot;2022&quot;\nbooksByYearAndAuthor.get(&quot;2022&quot;).get(&quot;author&quot;) // add necessary null checks or default value\n\n// books where year = &quot;2022&quot;\nbooksByYearAndAuthor.get(&quot;2022&quot;).values().stream().flatMap(...).collect(...) // add necessary null checks or default value\n</code></pre>\n<p>If you need to support arbitrary queries... I don't think you can get away from linear queries without implementing something yourself to add secondary indices, at the cost of extra memory. Do you have enough items to require doing this? That's the question, and if you don't need a DB I would say: probably not.</p>\n"},{"tags":[],"owner":{"account_id":960307,"reputation":107861,"user_id":984823,"display_name":"Joop Eggen"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1662561992,"creation_date":1662561992,"answer_id":73637501,"question_id":73637070,"body_markdown":"Doing it yourself is quite hard, and puts you back in time in COBOL and navigational databases. Before investigating much time and effort in such a side-track, the following alternatives.\r\n\r\n## 1. No indexing\r\n\r\nSay you have 2000 books and 4 fields.\r\n\r\n- Reading probably takes some time.\r\n- Filling indexes takes long too, and you might need not 4 indexes, but compound indexes. In fact you do not know in advance which indexes need to be used.\r\n\r\nSo if you store the indexes with the table data, the reading takes time.\r\n\r\nIn fact it might be advisable to forget about indexes (like HashMap).\r\nOne very expressive form would be the `Stream&lt;Book&gt;`\r\n\r\n    List&lt;Book&gt; books = ...\r\n    books.parallelStream()\r\n        .filter(b -&gt; b.getYear() == 2022)\r\n        .filter(b -&gt; b.getAuthor().equalsIgnoreCase(&quot;X&quot;))\r\n        .sort(Comparator.comparing(Book::getTitle)\r\n        .forEach(b -&gt; System.out.println(b));\r\n\r\n## 2. An embedded database\r\n\r\nAn H2 database is really simple to create, and has several advantages, as versatile (SQL) queries and indexing. Also O/R mapping in the form of JPA, like with eclipseLink is easy. Then you have the (type-safe) criteria API.\r\n","title":"Java list with index on attributes without using sql","body":"<p>Doing it yourself is quite hard, and puts you back in time in COBOL and navigational databases. Before investigating much time and effort in such a side-track, the following alternatives.</p>\n<h2>1. No indexing</h2>\n<p>Say you have 2000 books and 4 fields.</p>\n<ul>\n<li>Reading probably takes some time.</li>\n<li>Filling indexes takes long too, and you might need not 4 indexes, but compound indexes. In fact you do not know in advance which indexes need to be used.</li>\n</ul>\n<p>So if you store the indexes with the table data, the reading takes time.</p>\n<p>In fact it might be advisable to forget about indexes (like HashMap).\nOne very expressive form would be the <code>Stream&lt;Book&gt;</code></p>\n<pre><code>List&lt;Book&gt; books = ...\nbooks.parallelStream()\n    .filter(b -&gt; b.getYear() == 2022)\n    .filter(b -&gt; b.getAuthor().equalsIgnoreCase(&quot;X&quot;))\n    .sort(Comparator.comparing(Book::getTitle)\n    .forEach(b -&gt; System.out.println(b));\n</code></pre>\n<h2>2. An embedded database</h2>\n<p>An H2 database is really simple to create, and has several advantages, as versatile (SQL) queries and indexing. Also O/R mapping in the form of JPA, like with eclipseLink is easy. Then you have the (type-safe) criteria API.</p>\n"}],"owner":{"account_id":8556756,"reputation":595,"user_id":6412004,"display_name":"Regyn"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":42,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":2,"score":0,"last_activity_date":1662561992,"creation_date":1662560274,"question_id":73637070,"body_markdown":"Assuming I&#39;ve the following class\r\n\r\n```\r\npublic class Book {\r\n private String title;\r\n private String year;\r\n private String author;\r\n}\r\n```\r\n\r\nI&#39;d like to avoid using a database engine since it&#39;s living really shortly only. Yet to improve performance I&#39;d like to answer questions like &quot;retrieve books where author = &quot;Foo&quot; and year = &quot;2022&quot;&quot; or just &quot;year = 2022&quot; efficiently (not O(n)).\r\n\r\nWhen using a Map, I can specify only one key that must be fully known, e.g. year, author, or both. Then I could get a list from there. But I need to answer both questions. So I&#39;d need a Map with Author -&gt; Index, Year -&gt; Index and check if an entry is in both.\r\n\r\nIs there any other API? Like `list.addIndexOn(Book::title)`?\r\n\r\nI need to perform lookups on field (combinations) known at coding time.\r\n\r\nLike `books.getYear(2022).andAuthor(&quot;X&quot;)` and `books.getYear(2022)` and `books.getAuthor(&quot;X&quot;)`.\r\nSo I can say in advance I&#39;d need an index on year and author.\r\n","title":"Java list with index on attributes without using sql","body":"<p>Assuming I've the following class</p>\n<pre><code>public class Book {\n private String title;\n private String year;\n private String author;\n}\n</code></pre>\n<p>I'd like to avoid using a database engine since it's living really shortly only. Yet to improve performance I'd like to answer questions like &quot;retrieve books where author = &quot;Foo&quot; and year = &quot;2022&quot;&quot; or just &quot;year = 2022&quot; efficiently (not O(n)).</p>\n<p>When using a Map, I can specify only one key that must be fully known, e.g. year, author, or both. Then I could get a list from there. But I need to answer both questions. So I'd need a Map with Author -&gt; Index, Year -&gt; Index and check if an entry is in both.</p>\n<p>Is there any other API? Like <code>list.addIndexOn(Book::title)</code>?</p>\n<p>I need to perform lookups on field (combinations) known at coding time.</p>\n<p>Like <code>books.getYear(2022).andAuthor(&quot;X&quot;)</code> and <code>books.getYear(2022)</code> and <code>books.getAuthor(&quot;X&quot;)</code>.\nSo I can say in advance I'd need an index on year and author.</p>\n"},{"tags":["java","pie-chart","jfreechart"],"comments":[{"owner":{"account_id":81822,"reputation":204250,"user_id":230513,"accept_rate":100,"display_name":"trashgod"},"score":0,"creation_date":1662298981,"post_id":73584220,"comment_id":129969428,"body_markdown":"I don&#39;t see any support for this.","body":"I don&#39;t see any support for this."}],"answers":[{"tags":[],"owner":{"account_id":18256378,"reputation":11,"user_id":13290236,"display_name":"esteemedtogami"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1662561646,"creation_date":1662561646,"answer_id":73637415,"question_id":73584220,"body_markdown":"It looks like for now the most straightforward way to approach this problem is to subclass the `PiePlot` class and override the `drawRightLabel` and `drawLeftLabel` methods. In my case, I needed to have the label link color match the corresponding pie chart section, so in my overridden methods I set `g2.setPaint(getSectionPaint(record.getKey()))`. \r\n\r\nMy advice to anyone trying to do something similar is to watch out for casting errors if casting from a `JFreeChart` chart object. You will likely have to additionally subclass `ChartFactory` and modify it so that it uses your subclassed `PiePlot` and not the original one.","title":"Is there a way to set individual label link colors in JFreeChart&#39;s PiePlot?","body":"<p>It looks like for now the most straightforward way to approach this problem is to subclass the <code>PiePlot</code> class and override the <code>drawRightLabel</code> and <code>drawLeftLabel</code> methods. In my case, I needed to have the label link color match the corresponding pie chart section, so in my overridden methods I set <code>g2.setPaint(getSectionPaint(record.getKey()))</code>.</p>\n<p>My advice to anyone trying to do something similar is to watch out for casting errors if casting from a <code>JFreeChart</code> chart object. You will likely have to additionally subclass <code>ChartFactory</code> and modify it so that it uses your subclassed <code>PiePlot</code> and not the original one.</p>\n"}],"owner":{"account_id":18256378,"reputation":11,"user_id":13290236,"display_name":"esteemedtogami"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":74,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":73637415,"answer_count":1,"score":0,"last_activity_date":1662561646,"creation_date":1662129428,"question_id":73584220,"body_markdown":"I see that I can use `setLabelLinkPaint()` to universally apply a color to *all* label links, but I&#39;m looking to set each individual label link to a different color. Is there a way to do this?","title":"Is there a way to set individual label link colors in JFreeChart&#39;s PiePlot?","body":"<p>I see that I can use <code>setLabelLinkPaint()</code> to universally apply a color to <em>all</em> label links, but I'm looking to set each individual label link to a different color. Is there a way to do this?</p>\n"},{"tags":["java","apache-kafka","spring-kafka"],"comments":[{"owner":{"account_id":2671330,"reputation":183376,"user_id":2308683,"accept_rate":90,"display_name":"OneCricketeer"},"score":0,"creation_date":1662556864,"post_id":73635465,"comment_id":130033240,"body_markdown":"I don&#39;t think Spring throws Kafka&#39;s SerializationException on untrusted packages, it probably throws its own exception type","body":"I don&#39;t think Spring throws Kafka&#39;s SerializationException on untrusted packages, it probably throws its own exception type"}],"answers":[{"tags":[],"owner":{"account_id":3273937,"reputation":114855,"user_id":2756547,"accept_rate":75,"display_name":"Artem Bilan"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1662561449,"creation_date":1662561449,"answer_id":73637363,"question_id":73635465,"body_markdown":"The `DefaultJackson2JavaTypeMapper` (used in that `JsonDeserializer`) does this:\r\n\r\n\t\t\t\tif (!isTrustedPackage(classId)) {\r\n\t\t\t\t\tthrow new IllegalArgumentException(&quot;The class &#39;&quot; + classId\r\n\t\t\t\t\t\t\t+ &quot;&#39; is not in the trusted packages: &quot;\r\n\t\t\t\t\t\t\t+ this.trustedPackages + &quot;. &quot;\r\n\t\t\t\t\t\t\t+ &quot;If you believe this class is safe to deserialize, please provide its name. &quot;\r\n\t\t\t\t\t\t\t+ &quot;If the serialization is only done by a trusted source, you can also enable &quot;\r\n\t\t\t\t\t\t\t+ &quot;trust all (*).&quot;);\r\n\r\nYou may consider to use a `ErrorHandlingDeserializer` wrapper to handle that type of error: https://docs.spring.io/spring-kafka/reference/html/#error-handling-deserializer","title":"Skip not trusted package in Kafka consumer","body":"<p>The <code>DefaultJackson2JavaTypeMapper</code> (used in that <code>JsonDeserializer</code>) does this:</p>\n<pre><code>            if (!isTrustedPackage(classId)) {\n                throw new IllegalArgumentException(&quot;The class '&quot; + classId\n                        + &quot;' is not in the trusted packages: &quot;\n                        + this.trustedPackages + &quot;. &quot;\n                        + &quot;If you believe this class is safe to deserialize, please provide its name. &quot;\n                        + &quot;If the serialization is only done by a trusted source, you can also enable &quot;\n                        + &quot;trust all (*).&quot;);\n</code></pre>\n<p>You may consider to use a <code>ErrorHandlingDeserializer</code> wrapper to handle that type of error: <a href=\"https://docs.spring.io/spring-kafka/reference/html/#error-handling-deserializer\" rel=\"nofollow noreferrer\">https://docs.spring.io/spring-kafka/reference/html/#error-handling-deserializer</a></p>\n"}],"owner":{"account_id":11149920,"reputation":23,"user_id":8183502,"display_name":"Roman"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":147,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":73637363,"answer_count":1,"score":0,"last_activity_date":1662561449,"creation_date":1662553441,"question_id":73635465,"body_markdown":"I used in my second project same Kafka topic name like in project one but but message has different package and in first project I got exception &quot;The class &#39;com.example.proj2&#39; is not in the trusted packages&quot;. I do not want this message in project one. Is there any chance to skip this message? I tried to catch SerializationException and commit but did not help. Message comes to consumer again and again.\r\n\r\nConsumer config:\r\n\r\n\t\tMap&lt;String, Object&gt; configurations = new HashMap&lt;&gt;();\r\n\t    configurations.put(ConsumerConfig.BOOTSTRAP_SERVERS_CONFIG, servers);\r\n\t    configurations.put(ConsumerConfig.ALLOW_AUTO_CREATE_TOPICS_CONFIG, &quot;true&quot;);\r\n\t\tconfigurations.put(ConsumerConfig.GROUP_ID_CONFIG, groupId );\r\n\t\tconfigurations.put(ConsumerConfig.CLIENT_ID_CONFIG, clientId );\r\n\t    configurations.put(ConsumerConfig.VALUE_DESERIALIZER_CLASS_CONFIG, JsonDeserializer.class);\r\n\t    configurations.put(ConsumerConfig.KEY_DESERIALIZER_CLASS_CONFIG, StringDeserializer.class);\r\n\t    configurations.put(ConsumerConfig.ENABLE_AUTO_COMMIT_CONFIG, &quot;false&quot;);\r\n\t    configurations.put(ConsumerConfig.FETCH_MAX_BYTES_CONFIG, &quot;52428800&quot;);\r\n\t    configurations.put(ConsumerConfig.MAX_PARTITION_FETCH_BYTES_CONFIG, &quot;52428800&quot;);\r\n\t    configurations.put(ConsumerConfig.MAX_POLL_INTERVAL_MS_CONFIG, &quot;3600000&quot;);\r\n\t    configurations.put(ConsumerConfig.PARTITION_ASSIGNMENT_STRATEGY_CONFIG, &quot;org.apache.kafka.clients.consumer.RoundRobinAssignor&quot;);\r\n\t    configurations.put(JsonDeserializer.TRUSTED_PACKAGES, &quot;com.example.proj1&quot;);\r\n\t    configurations.put(ConsumerConfig.MAX_POLL_RECORDS_CONFIG, &quot;1&quot;);\r\n\t\tconsumer = new KafkaConsumer&lt;Object, Object&gt;(configurations);\r\n\t\tconsumer.subscribe(topic);\r\n\r\nConsuming code:\r\n\r\n\t\ttry {\r\n\t\t\tConsumerRecords&lt;Object, Object&gt; records = consumer.poll(Duration.ofMillis(10000));\r\n\t\t\tif(records.count() &gt; 0) {\r\n\t\t\t\thandleMessages(records);\r\n\t\t\t\tconsumer.commitSync();\r\n\t\t\t}\r\n\t\t} catch(SerializationException e) {\r\n\t\t\tLOGGER.error(&quot;Invalid package&quot;, e);\r\n\t\t\tconsumer.commitSync();\r\n\t\t} catch (Exception e) {...}\r\n","title":"Skip not trusted package in Kafka consumer","body":"<p>I used in my second project same Kafka topic name like in project one but but message has different package and in first project I got exception &quot;The class 'com.example.proj2' is not in the trusted packages&quot;. I do not want this message in project one. Is there any chance to skip this message? I tried to catch SerializationException and commit but did not help. Message comes to consumer again and again.</p>\n<p>Consumer config:</p>\n<pre><code>    Map&lt;String, Object&gt; configurations = new HashMap&lt;&gt;();\n    configurations.put(ConsumerConfig.BOOTSTRAP_SERVERS_CONFIG, servers);\n    configurations.put(ConsumerConfig.ALLOW_AUTO_CREATE_TOPICS_CONFIG, &quot;true&quot;);\n    configurations.put(ConsumerConfig.GROUP_ID_CONFIG, groupId );\n    configurations.put(ConsumerConfig.CLIENT_ID_CONFIG, clientId );\n    configurations.put(ConsumerConfig.VALUE_DESERIALIZER_CLASS_CONFIG, JsonDeserializer.class);\n    configurations.put(ConsumerConfig.KEY_DESERIALIZER_CLASS_CONFIG, StringDeserializer.class);\n    configurations.put(ConsumerConfig.ENABLE_AUTO_COMMIT_CONFIG, &quot;false&quot;);\n    configurations.put(ConsumerConfig.FETCH_MAX_BYTES_CONFIG, &quot;52428800&quot;);\n    configurations.put(ConsumerConfig.MAX_PARTITION_FETCH_BYTES_CONFIG, &quot;52428800&quot;);\n    configurations.put(ConsumerConfig.MAX_POLL_INTERVAL_MS_CONFIG, &quot;3600000&quot;);\n    configurations.put(ConsumerConfig.PARTITION_ASSIGNMENT_STRATEGY_CONFIG, &quot;org.apache.kafka.clients.consumer.RoundRobinAssignor&quot;);\n    configurations.put(JsonDeserializer.TRUSTED_PACKAGES, &quot;com.example.proj1&quot;);\n    configurations.put(ConsumerConfig.MAX_POLL_RECORDS_CONFIG, &quot;1&quot;);\n    consumer = new KafkaConsumer&lt;Object, Object&gt;(configurations);\n    consumer.subscribe(topic);\n</code></pre>\n<p>Consuming code:</p>\n<pre><code>    try {\n        ConsumerRecords&lt;Object, Object&gt; records = consumer.poll(Duration.ofMillis(10000));\n        if(records.count() &gt; 0) {\n            handleMessages(records);\n            consumer.commitSync();\n        }\n    } catch(SerializationException e) {\n        LOGGER.error(&quot;Invalid package&quot;, e);\n        consumer.commitSync();\n    } catch (Exception e) {...}\n</code></pre>\n"},{"tags":["java","maven","maven-shade-plugin","maven-deploy-plugin"],"comments":[{"owner":{"account_id":9045259,"reputation":5321,"user_id":6737860,"display_name":"Thomas K&#229;sene"},"score":0,"creation_date":1507212946,"post_id":42882698,"comment_id":80128917,"body_markdown":"Did you ever find out how to do this? I&#39;m encountering the same problem and deploy:deploy-file is starting to infuriate me.","body":"Did you ever find out how to do this? I&#39;m encountering the same problem and deploy:deploy-file is starting to infuriate me."},{"owner":{"account_id":5395500,"reputation":642,"user_id":4296851,"accept_rate":71,"display_name":"Richard Sand"},"score":1,"creation_date":1507229331,"post_id":42882698,"comment_id":80138571,"body_markdown":"No, and the maven kings are very unsympathetic. You may only use the tools as they decree! Change your business to accommodate the tool is basically what I was told","body":"No, and the maven kings are very unsympathetic. You may only use the tools as they decree! Change your business to accommodate the tool is basically what I was told"}],"answers":[{"tags":[],"owner":{"account_id":2616282,"reputation":188,"user_id":2265270,"display_name":"Tiemo Vorsch&#252;tz"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1541153375,"creation_date":1541153375,"answer_id":53116500,"question_id":42882698,"body_markdown":"This is what I did to automatically select either the SNAPSHOT or RELEASE repro based on the version pattern: (I know that this is a kind of code smell but as far as the ASF is not willing to include your code for what ever reason I could solve my requirement)\r\n\r\n    &lt;properties&gt;\r\n\t\t&lt;deploy.repositoryUrl&gt;.. url release repo ..&lt;/deploy.repositoryUrl&gt;\r\n\t\t&lt;deploy.repositoryId&gt;.. id release repo ..&lt;/deploy.repositoryId&gt;\r\n\t\t&lt;deploy.repositorySnapshotUrl&gt;.. snapshot repo ..&lt;/deploy.repositorySnapshotUrl&gt;\r\n\t\t&lt;deploy.repositorySnapshotId&gt;.. id snapshot repo ..&lt;/deploy.repositorySnapshotId&gt;\t\t\r\n\t&lt;/properties&gt;\r\n\t\r\n\t&lt;build&gt;\t\t\r\n\t\t&lt;plugins&gt;\t\r\n\t\t\t&lt;plugin&gt;\r\n\t\t\t\t&lt;groupId&gt;org.codehaus.mojo&lt;/groupId&gt;\r\n\t\t\t\t&lt;artifactId&gt;build-helper-maven-plugin&lt;/artifactId&gt;\r\n\t\t\t\t&lt;version&gt;3.0.0&lt;/version&gt;\r\n\t\t\t\t&lt;executions&gt;\r\n\t\t\t\t\t&lt;execution&gt;\r\n\t\t\t\t\t\t&lt;!-- sets the isSnapshot property to true if SNAPSHOT was used --&gt;\r\n\t\t\t\t\t\t&lt;id&gt;build-helper-regex-is-snapshot-used&lt;/id&gt;\r\n\t\t\t\t\t\t&lt;phase&gt;validate&lt;/phase&gt;\r\n\t\t\t\t\t\t&lt;goals&gt;\r\n\t\t\t\t\t\t\t&lt;goal&gt;regex-property&lt;/goal&gt;\r\n\t\t\t\t\t\t&lt;/goals&gt;\r\n\t\t\t\t\t\t&lt;configuration&gt;\r\n\t\t\t\t\t\t\t&lt;name&gt;isSnapshot&lt;/name&gt;\r\n\t\t\t\t\t\t\t&lt;value&gt;${project.version}&lt;/value&gt;\r\n\t\t\t\t\t\t\t&lt;regex&gt;.*-SNAPSHOT&lt;/regex&gt;\r\n\t\t\t\t\t\t\t&lt;replacement&gt;true&lt;/replacement&gt;\r\n\t\t\t\t\t\t\t&lt;failIfNoMatch&gt;false&lt;/failIfNoMatch&gt;\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t&lt;/configuration&gt;\r\n\t\t\t\t\t&lt;/execution&gt;\t\t\t\t\t\r\n\t\t\t\t&lt;/executions&gt;\r\n\t\t\t&lt;/plugin&gt;\t\r\n\t\t\t&lt;!-- set the properties deploy.Url and deploy.Id during validation to \r\n\t\t\teither the snapshot repository or the release repository \r\n\t\t\tdepending on the version pattern.--&gt;\t\t\t\r\n\t\t\t&lt;plugin&gt;\r\n\t\t\t\t&lt;groupId&gt;org.codehaus.gmaven&lt;/groupId&gt;\r\n\t\t\t\t&lt;artifactId&gt;gmaven-plugin&lt;/artifactId&gt;\r\n\t\t\t\t&lt;version&gt;1.5&lt;/version&gt;\r\n\t\t\t\t&lt;executions&gt;\r\n\t\t\t\t\t&lt;execution&gt;\r\n\t\t\t\t\t\t&lt;phase&gt;validate&lt;/phase&gt;\r\n\t\t\t\t\t\t&lt;goals&gt;\r\n\t\t\t\t\t\t\t&lt;goal&gt;execute&lt;/goal&gt;\r\n\t\t\t\t\t\t&lt;/goals&gt;\r\n\t\t\t\t\t\t&lt;configuration&gt;\r\n\t\t\t\t\t\t\t&lt;source&gt;&lt;![CDATA[\r\n\t\t\t\t\t\t\t\tpom.properties[&#39;deploy.Url&#39;]=pom.properties[&#39;isSnapshot&#39;].equals(&#39;true&#39;) ? pom.properties[&#39;deploy.repositorySnapshotUrl&#39;] : pom.properties[&#39;deploy.repositoryUrl&#39;];\r\n\t\t\t\t\t\t\t\tpom.properties[&#39;deploy.Id&#39;]=pom.properties[&#39;isSnapshot&#39;].equals(&#39;true&#39;) ? pom.properties[&#39;deploy.repositorySnapshotId&#39;] : pom.properties[&#39;deploy.repositoryId&#39;];\r\n\t\t\t\t\t\t\t]]&gt;&lt;/source&gt;\r\n\t\t\t\t\t\t&lt;/configuration&gt;\r\n\t\t\t\t\t&lt;/execution&gt;\r\n\t\t\t\t&lt;/executions&gt;\r\n\t\t\t&lt;/plugin&gt;\t\r\n\t\t\t...\r\n\t\t\t&lt;plugin&gt;\r\n\t\t\t\t&lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n\t\t\t\t&lt;artifactId&gt;maven-deploy-plugin&lt;/artifactId&gt;\r\n\t\t\t\t&lt;version&gt;3.0.0-M1&lt;/version&gt;\r\n\t\t\t\t&lt;configuration&gt;\r\n\t\t\t\t\t&lt;skip&gt;true&lt;/skip&gt;\r\n\t\t\t\t&lt;/configuration&gt; \r\n\t\t\t\t&lt;executions&gt;\r\n\t\t\t\t\t&lt;execution&gt;\r\n\t\t\t\t\t\t&lt;id&gt;DeployToArtifactory&lt;/id&gt;\r\n\t\t\t\t\t\t&lt;phase&gt;deploy&lt;/phase&gt;\r\n\t\t\t\t\t\t&lt;goals&gt;\r\n\t\t\t\t\t\t\t&lt;goal&gt;deploy-file&lt;/goal&gt;\r\n\t\t\t\t\t\t&lt;/goals&gt;\r\n\t\t\t\t\t\t&lt;configuration&gt;\r\n\t\t\t\t\t\t\t&lt;url&gt;${deploy.Url}&lt;/url&gt;\r\n\t\t\t\t\t\t\t&lt;repositoryId&gt;${deploy.Id}&lt;/repositoryId&gt;\r\n\t\t\t\t\t\t\t&lt;file&gt;target/${project.build.finalName}.${project.packaging}&lt;/file&gt;\r\n\t\t\t\t\t\t\t&lt;groupId&gt;${project.groupId}&lt;/groupId&gt;\r\n\t\t\t\t\t\t\t&lt;artifactId&gt;${project.artifactId}&lt;/artifactId&gt;\r\n\t\t\t\t\t\t\t&lt;version&gt;${project.version}&lt;/version&gt;\r\n\t\t\t\t\t\t\t&lt;packaging&gt;jar&lt;/packaging&gt;\r\n\t\t\t\t\t\t\t&lt;classifier&gt;resources&lt;/classifier&gt;\r\n\t\t\t\t\t\t\t&lt;pomFile&gt;${project.build.directory}/pom/pom.xml&lt;/pomFile&gt;\r\n\t\t\t\t\t\t&lt;/configuration&gt;\r\n\t\t\t\t\t&lt;/execution&gt;\r\n\t\t\t\t&lt;/executions&gt;\t\t\t\t                                         \r\n\t\t\t&lt;/plugin&gt;\r\n\t\t&lt;/plugins&gt;\r\n\t&lt;/build&gt;","title":"determine repository URL for maven deploy-file","body":"<p>This is what I did to automatically select either the SNAPSHOT or RELEASE repro based on the version pattern: (I know that this is a kind of code smell but as far as the ASF is not willing to include your code for what ever reason I could solve my requirement)</p>\n\n<pre><code>&lt;properties&gt;\n    &lt;deploy.repositoryUrl&gt;.. url release repo ..&lt;/deploy.repositoryUrl&gt;\n    &lt;deploy.repositoryId&gt;.. id release repo ..&lt;/deploy.repositoryId&gt;\n    &lt;deploy.repositorySnapshotUrl&gt;.. snapshot repo ..&lt;/deploy.repositorySnapshotUrl&gt;\n    &lt;deploy.repositorySnapshotId&gt;.. id snapshot repo ..&lt;/deploy.repositorySnapshotId&gt;       \n&lt;/properties&gt;\n\n&lt;build&gt;     \n    &lt;plugins&gt;   \n        &lt;plugin&gt;\n            &lt;groupId&gt;org.codehaus.mojo&lt;/groupId&gt;\n            &lt;artifactId&gt;build-helper-maven-plugin&lt;/artifactId&gt;\n            &lt;version&gt;3.0.0&lt;/version&gt;\n            &lt;executions&gt;\n                &lt;execution&gt;\n                    &lt;!-- sets the isSnapshot property to true if SNAPSHOT was used --&gt;\n                    &lt;id&gt;build-helper-regex-is-snapshot-used&lt;/id&gt;\n                    &lt;phase&gt;validate&lt;/phase&gt;\n                    &lt;goals&gt;\n                        &lt;goal&gt;regex-property&lt;/goal&gt;\n                    &lt;/goals&gt;\n                    &lt;configuration&gt;\n                        &lt;name&gt;isSnapshot&lt;/name&gt;\n                        &lt;value&gt;${project.version}&lt;/value&gt;\n                        &lt;regex&gt;.*-SNAPSHOT&lt;/regex&gt;\n                        &lt;replacement&gt;true&lt;/replacement&gt;\n                        &lt;failIfNoMatch&gt;false&lt;/failIfNoMatch&gt;                            \n                    &lt;/configuration&gt;\n                &lt;/execution&gt;                    \n            &lt;/executions&gt;\n        &lt;/plugin&gt;   \n        &lt;!-- set the properties deploy.Url and deploy.Id during validation to \n        either the snapshot repository or the release repository \n        depending on the version pattern.--&gt;            \n        &lt;plugin&gt;\n            &lt;groupId&gt;org.codehaus.gmaven&lt;/groupId&gt;\n            &lt;artifactId&gt;gmaven-plugin&lt;/artifactId&gt;\n            &lt;version&gt;1.5&lt;/version&gt;\n            &lt;executions&gt;\n                &lt;execution&gt;\n                    &lt;phase&gt;validate&lt;/phase&gt;\n                    &lt;goals&gt;\n                        &lt;goal&gt;execute&lt;/goal&gt;\n                    &lt;/goals&gt;\n                    &lt;configuration&gt;\n                        &lt;source&gt;&lt;![CDATA[\n                            pom.properties['deploy.Url']=pom.properties['isSnapshot'].equals('true') ? pom.properties['deploy.repositorySnapshotUrl'] : pom.properties['deploy.repositoryUrl'];\n                            pom.properties['deploy.Id']=pom.properties['isSnapshot'].equals('true') ? pom.properties['deploy.repositorySnapshotId'] : pom.properties['deploy.repositoryId'];\n                        ]]&gt;&lt;/source&gt;\n                    &lt;/configuration&gt;\n                &lt;/execution&gt;\n            &lt;/executions&gt;\n        &lt;/plugin&gt;   \n        ...\n        &lt;plugin&gt;\n            &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n            &lt;artifactId&gt;maven-deploy-plugin&lt;/artifactId&gt;\n            &lt;version&gt;3.0.0-M1&lt;/version&gt;\n            &lt;configuration&gt;\n                &lt;skip&gt;true&lt;/skip&gt;\n            &lt;/configuration&gt; \n            &lt;executions&gt;\n                &lt;execution&gt;\n                    &lt;id&gt;DeployToArtifactory&lt;/id&gt;\n                    &lt;phase&gt;deploy&lt;/phase&gt;\n                    &lt;goals&gt;\n                        &lt;goal&gt;deploy-file&lt;/goal&gt;\n                    &lt;/goals&gt;\n                    &lt;configuration&gt;\n                        &lt;url&gt;${deploy.Url}&lt;/url&gt;\n                        &lt;repositoryId&gt;${deploy.Id}&lt;/repositoryId&gt;\n                        &lt;file&gt;target/${project.build.finalName}.${project.packaging}&lt;/file&gt;\n                        &lt;groupId&gt;${project.groupId}&lt;/groupId&gt;\n                        &lt;artifactId&gt;${project.artifactId}&lt;/artifactId&gt;\n                        &lt;version&gt;${project.version}&lt;/version&gt;\n                        &lt;packaging&gt;jar&lt;/packaging&gt;\n                        &lt;classifier&gt;resources&lt;/classifier&gt;\n                        &lt;pomFile&gt;${project.build.directory}/pom/pom.xml&lt;/pomFile&gt;\n                    &lt;/configuration&gt;\n                &lt;/execution&gt;\n            &lt;/executions&gt;                                                        \n        &lt;/plugin&gt;\n    &lt;/plugins&gt;\n&lt;/build&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3584566,"reputation":74,"user_id":2992018,"display_name":"SaintKnight"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1635490312,"creation_date":1635490312,"answer_id":69764752,"question_id":42882698,"body_markdown":"[Tiemo Vorsch&#252;tz][1] method is a good idea, but may not work for me.\r\nIt case some &#39;Exception in thread &quot;main&quot; BUG! exception in phase &#39;conversion&#39; in source unit &#39;script&#39; errors.\r\n\r\nI have changed the [gmaven plugin][2] to a newer version and fixed errors, change it from &#39;gmaven-plugin&#39; 1.x to &#39;groovy-maven-plugin&#39; 2.x\r\nlike this:\r\n\r\n    &lt;properties&gt;\r\n    &lt;deploy.repositoryUrl&gt;.. url release repo ..&lt;/deploy.repositoryUrl&gt;\r\n    &lt;deploy.repositoryId&gt;.. id release repo ..&lt;/deploy.repositoryId&gt;\r\n    &lt;deploy.repositorySnapshotUrl&gt;.. snapshot repo ..&lt;/deploy.repositorySnapshotUrl&gt;\r\n    &lt;deploy.repositorySnapshotId&gt;.. id snapshot repo ..&lt;/deploy.repositorySnapshotId&gt;       \r\n&lt;/properties&gt;\r\n\r\n\r\n                &lt;plugin&gt;\r\n                &lt;groupId&gt;org.codehaus.mojo&lt;/groupId&gt;\r\n                &lt;artifactId&gt;build-helper-maven-plugin&lt;/artifactId&gt;\r\n                &lt;version&gt;3.0.0&lt;/version&gt;\r\n                &lt;executions&gt;\r\n                    &lt;execution&gt;\r\n                        &lt;!-- sets the isSnapshot property to true if SNAPSHOT was used --&gt;\r\n                        &lt;id&gt;build-helper-regex-is-snapshot-used&lt;/id&gt;\r\n                        &lt;phase&gt;validate&lt;/phase&gt;\r\n                        &lt;goals&gt;\r\n                            &lt;goal&gt;regex-property&lt;/goal&gt;\r\n                        &lt;/goals&gt;\r\n                        &lt;configuration&gt;\r\n                            &lt;name&gt;isSnapshot&lt;/name&gt;\r\n                            &lt;value&gt;${project.version}&lt;/value&gt;\r\n                            &lt;regex&gt;.*-SNAPSHOT&lt;/regex&gt;\r\n                            &lt;replacement&gt;true&lt;/replacement&gt;\r\n                            &lt;failIfNoMatch&gt;false&lt;/failIfNoMatch&gt;\r\n                        &lt;/configuration&gt;\r\n                    &lt;/execution&gt;\r\n                &lt;/executions&gt;\r\n            &lt;/plugin&gt;\r\n            &lt;!-- set the properties deploy.Url and deploy.Id during validation to\r\n            either the snapshot repository or the release repository\r\n            depending on the version pattern.--&gt;\r\n            &lt;plugin&gt;\r\n                &lt;groupId&gt;org.codehaus.gmaven&lt;/groupId&gt;\r\n                &lt;artifactId&gt;groovy-maven-plugin&lt;/artifactId&gt;\r\n                &lt;version&gt;2.1.1&lt;/version&gt;\r\n                &lt;executions&gt;\r\n                    &lt;execution&gt;\r\n                        &lt;phase&gt;validate&lt;/phase&gt;\r\n                        &lt;goals&gt;\r\n                            &lt;goal&gt;execute&lt;/goal&gt;\r\n                        &lt;/goals&gt;\r\n                        &lt;configuration&gt;\r\n                            &lt;source&gt;&lt;![CDATA[\r\n                                project.getProperties().put(&#39;deploy.Url&#39;,properties[&#39;isSnapshot&#39;].equals(&#39;true&#39;) ? properties[&#39;deploy.repositorySnapshotUrl&#39;] : properties[&#39;deploy.repositoryUrl&#39;]);\r\n                                project.getProperties().put(&#39;deploy.Id&#39;,properties[&#39;isSnapshot&#39;].equals(&#39;true&#39;) ? properties[&#39;deploy.repositorySnapshotId&#39;] : properties[&#39;deploy.repositoryId&#39;]);\r\n                                ]]&gt;&lt;/source&gt;\r\n                        &lt;/configuration&gt;\r\n                    &lt;/execution&gt;\r\n                &lt;/executions&gt;\r\n            &lt;/plugin&gt;        &lt;plugin&gt;\r\n            &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n            &lt;artifactId&gt;maven-deploy-plugin&lt;/artifactId&gt;\r\n            &lt;version&gt;3.0.0-M1&lt;/version&gt;\r\n            &lt;configuration&gt;\r\n                &lt;skip&gt;true&lt;/skip&gt;\r\n            &lt;/configuration&gt; \r\n            &lt;executions&gt;\r\n                &lt;execution&gt;\r\n                    &lt;id&gt;DeployToArtifactory&lt;/id&gt;\r\n                    &lt;phase&gt;deploy&lt;/phase&gt;\r\n                    &lt;goals&gt;\r\n                        &lt;goal&gt;deploy-file&lt;/goal&gt;\r\n                    &lt;/goals&gt;\r\n                    &lt;configuration&gt;\r\n                        &lt;url&gt;${deploy.Url}&lt;/url&gt;\r\n                        &lt;repositoryId&gt;${deploy.Id}&lt;/repositoryId&gt;\r\n                        &lt;file&gt;target/${project.build.finalName}.${project.packaging}&lt;/file&gt;\r\n                        &lt;groupId&gt;${project.groupId}&lt;/groupId&gt;\r\n                        &lt;artifactId&gt;${project.artifactId}&lt;/artifactId&gt;\r\n                        &lt;version&gt;${project.version}&lt;/version&gt;\r\n                        &lt;packaging&gt;jar&lt;/packaging&gt;\r\n                        &lt;classifier&gt;resources&lt;/classifier&gt;\r\n                        &lt;pomFile&gt;${project.build.directory}/pom/pom.xml&lt;/pomFile&gt;\r\n                    &lt;/configuration&gt;\r\n                &lt;/execution&gt;\r\n            &lt;/executions&gt;                                                        \r\n        &lt;/plugin&gt;\r\n\r\n\r\n  [1]: https://stackoverflow.com/users/2265270/tiemo-vorsch%C3%BCtz\r\n  [2]: https://github.com/groovy/gmaven/","title":"determine repository URL for maven deploy-file","body":"<p><a href=\"https://stackoverflow.com/users/2265270/tiemo-vorsch%C3%BCtz\">Tiemo Vorschütz</a> method is a good idea, but may not work for me.\nIt case some 'Exception in thread &quot;main&quot; BUG! exception in phase 'conversion' in source unit 'script' errors.</p>\n<p>I have changed the <a href=\"https://github.com/groovy/gmaven/\" rel=\"nofollow noreferrer\">gmaven plugin</a> to a newer version and fixed errors, change it from 'gmaven-plugin' 1.x to 'groovy-maven-plugin' 2.x\nlike this:</p>\n<pre><code>&lt;properties&gt;\n&lt;deploy.repositoryUrl&gt;.. url release repo ..&lt;/deploy.repositoryUrl&gt;\n&lt;deploy.repositoryId&gt;.. id release repo ..&lt;/deploy.repositoryId&gt;\n&lt;deploy.repositorySnapshotUrl&gt;.. snapshot repo ..&lt;/deploy.repositorySnapshotUrl&gt;\n&lt;deploy.repositorySnapshotId&gt;.. id snapshot repo ..&lt;/deploy.repositorySnapshotId&gt;       \n</code></pre>\n\n<pre><code>            &lt;plugin&gt;\n            &lt;groupId&gt;org.codehaus.mojo&lt;/groupId&gt;\n            &lt;artifactId&gt;build-helper-maven-plugin&lt;/artifactId&gt;\n            &lt;version&gt;3.0.0&lt;/version&gt;\n            &lt;executions&gt;\n                &lt;execution&gt;\n                    &lt;!-- sets the isSnapshot property to true if SNAPSHOT was used --&gt;\n                    &lt;id&gt;build-helper-regex-is-snapshot-used&lt;/id&gt;\n                    &lt;phase&gt;validate&lt;/phase&gt;\n                    &lt;goals&gt;\n                        &lt;goal&gt;regex-property&lt;/goal&gt;\n                    &lt;/goals&gt;\n                    &lt;configuration&gt;\n                        &lt;name&gt;isSnapshot&lt;/name&gt;\n                        &lt;value&gt;${project.version}&lt;/value&gt;\n                        &lt;regex&gt;.*-SNAPSHOT&lt;/regex&gt;\n                        &lt;replacement&gt;true&lt;/replacement&gt;\n                        &lt;failIfNoMatch&gt;false&lt;/failIfNoMatch&gt;\n                    &lt;/configuration&gt;\n                &lt;/execution&gt;\n            &lt;/executions&gt;\n        &lt;/plugin&gt;\n        &lt;!-- set the properties deploy.Url and deploy.Id during validation to\n        either the snapshot repository or the release repository\n        depending on the version pattern.--&gt;\n        &lt;plugin&gt;\n            &lt;groupId&gt;org.codehaus.gmaven&lt;/groupId&gt;\n            &lt;artifactId&gt;groovy-maven-plugin&lt;/artifactId&gt;\n            &lt;version&gt;2.1.1&lt;/version&gt;\n            &lt;executions&gt;\n                &lt;execution&gt;\n                    &lt;phase&gt;validate&lt;/phase&gt;\n                    &lt;goals&gt;\n                        &lt;goal&gt;execute&lt;/goal&gt;\n                    &lt;/goals&gt;\n                    &lt;configuration&gt;\n                        &lt;source&gt;&lt;![CDATA[\n                            project.getProperties().put('deploy.Url',properties['isSnapshot'].equals('true') ? properties['deploy.repositorySnapshotUrl'] : properties['deploy.repositoryUrl']);\n                            project.getProperties().put('deploy.Id',properties['isSnapshot'].equals('true') ? properties['deploy.repositorySnapshotId'] : properties['deploy.repositoryId']);\n                            ]]&gt;&lt;/source&gt;\n                    &lt;/configuration&gt;\n                &lt;/execution&gt;\n            &lt;/executions&gt;\n        &lt;/plugin&gt;        &lt;plugin&gt;\n        &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n        &lt;artifactId&gt;maven-deploy-plugin&lt;/artifactId&gt;\n        &lt;version&gt;3.0.0-M1&lt;/version&gt;\n        &lt;configuration&gt;\n            &lt;skip&gt;true&lt;/skip&gt;\n        &lt;/configuration&gt; \n        &lt;executions&gt;\n            &lt;execution&gt;\n                &lt;id&gt;DeployToArtifactory&lt;/id&gt;\n                &lt;phase&gt;deploy&lt;/phase&gt;\n                &lt;goals&gt;\n                    &lt;goal&gt;deploy-file&lt;/goal&gt;\n                &lt;/goals&gt;\n                &lt;configuration&gt;\n                    &lt;url&gt;${deploy.Url}&lt;/url&gt;\n                    &lt;repositoryId&gt;${deploy.Id}&lt;/repositoryId&gt;\n                    &lt;file&gt;target/${project.build.finalName}.${project.packaging}&lt;/file&gt;\n                    &lt;groupId&gt;${project.groupId}&lt;/groupId&gt;\n                    &lt;artifactId&gt;${project.artifactId}&lt;/artifactId&gt;\n                    &lt;version&gt;${project.version}&lt;/version&gt;\n                    &lt;packaging&gt;jar&lt;/packaging&gt;\n                    &lt;classifier&gt;resources&lt;/classifier&gt;\n                    &lt;pomFile&gt;${project.build.directory}/pom/pom.xml&lt;/pomFile&gt;\n                &lt;/configuration&gt;\n            &lt;/execution&gt;\n        &lt;/executions&gt;                                                        \n    &lt;/plugin&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":6569999,"reputation":2092,"user_id":5078385,"display_name":"acm"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1662561234,"creation_date":1662561234,"answer_id":73637305,"question_id":42882698,"body_markdown":"A simple way to do this is leveraging `distributionManagement` and `build-helper-maven-plugin` as pointed our by Tiemo Vorsch&#252;tz&#39;s answer.\r\n\r\n```xml\r\n...\r\n\r\n&lt;distributionManagement&gt;\r\n  &lt;repository&gt;\r\n    &lt;id&gt;my-release&lt;/id&gt;\r\n    &lt;name&gt;my-release&lt;/name&gt;\r\n    &lt;url&gt;https://example.com/release&lt;/url&gt;\r\n  &lt;/repository&gt;\r\n  &lt;snapshotRepository&gt;\r\n    &lt;id&gt;my-snapshot&lt;/id&gt;\r\n    &lt;name&gt;my-snapshot&lt;/name&gt;\r\n    &lt;url&gt;https://example.com/snapshot&lt;/url&gt;\r\n  &lt;/snapshotRepository&gt;\r\n&lt;/distributionManagement&gt;\r\n\r\n...\r\n\r\n&lt;build&gt;\r\n  &lt;plugins&gt;\r\n    &lt;plugin&gt;\r\n      &lt;groupId&gt;org.codehaus.mojo&lt;/groupId&gt;\r\n      &lt;artifactId&gt;build-helper-maven-plugin&lt;/artifactId&gt;\r\n      &lt;version&gt;3.3.0&lt;/version&gt;\r\n      &lt;executions&gt;\r\n        &lt;execution&gt;\r\n          &lt;!-- sets the repoUrl property to the correct repository depending on the type of version --&gt;\r\n          &lt;id&gt;build-deploy-url&lt;/id&gt;\r\n          &lt;phase&gt;validate&lt;/phase&gt;\r\n          &lt;goals&gt;\r\n            &lt;goal&gt;regex-property&lt;/goal&gt;\r\n          &lt;/goals&gt;\r\n          &lt;configuration&gt;\r\n            &lt;name&gt;repoUrl&lt;/name&gt;\r\n            &lt;value&gt;${project.version}&lt;/value&gt;\r\n            &lt;regex&gt;.*-SNAPSHOT&lt;/regex&gt;\r\n            &lt;replacement&gt;${project.distributionManagement.snapshotRepository.url}&lt;/replacement&gt;\r\n            &lt;failIfNoMatch&gt;${project.distributionManagement.repository.url}&lt;/failIfNoMatch&gt;\r\n          &lt;/configuration&gt;\r\n        &lt;/execution&gt;\r\n      &lt;/executions&gt;\r\n    &lt;/plugin&gt;\r\n\r\n    &lt;plugin&gt;\r\n      &lt;artifactId&gt;maven-deploy-plugin&lt;/artifactId&gt;\r\n      &lt;version&gt;3.0.0&lt;/version&gt;\r\n      &lt;executions&gt;\r\n        &lt;execution&gt;\r\n          &lt;id&gt;deploy-file&lt;/id&gt;\r\n          &lt;phase&gt;deploy&lt;/phase&gt;\r\n          &lt;goals&gt;\r\n            &lt;goal&gt;deploy-file&lt;/goal&gt;\r\n          &lt;/goals&gt;\r\n          &lt;configuration&gt;\r\n            &lt;file&gt;${project.build.directory}/&lt;!--your-file--&gt;&lt;/file&gt;\r\n            &lt;url&gt;${repoUrl}&lt;/url&gt;\r\n            &lt;repositoryId&gt;&lt;!--repo as per settings.xml if credentials are the same--&gt;&lt;/repositoryId&gt;\r\n            &lt;groupId&gt;${project.groupId}&lt;/groupId&gt;\r\n            &lt;artifactId&gt;${project.artifactId}&lt;/artifactId&gt;\r\n            &lt;version&gt;${project.version}&lt;/version&gt;\r\n            &lt;packaging&gt;&lt;!--your packaging--&gt;&lt;/packaging&gt;\r\n          &lt;/configuration&gt;\r\n        &lt;/execution&gt;\r\n      &lt;/executions&gt;\r\n    &lt;/plugin&gt;\r\n  &lt;/plugins&gt;\r\n&lt;/build&gt;\r\n\r\n...\r\n```","title":"determine repository URL for maven deploy-file","body":"<p>A simple way to do this is leveraging <code>distributionManagement</code> and <code>build-helper-maven-plugin</code> as pointed our by Tiemo Vorschütz's answer.</p>\n<pre class=\"lang-xml prettyprint-override\"><code>...\n\n&lt;distributionManagement&gt;\n  &lt;repository&gt;\n    &lt;id&gt;my-release&lt;/id&gt;\n    &lt;name&gt;my-release&lt;/name&gt;\n    &lt;url&gt;https://example.com/release&lt;/url&gt;\n  &lt;/repository&gt;\n  &lt;snapshotRepository&gt;\n    &lt;id&gt;my-snapshot&lt;/id&gt;\n    &lt;name&gt;my-snapshot&lt;/name&gt;\n    &lt;url&gt;https://example.com/snapshot&lt;/url&gt;\n  &lt;/snapshotRepository&gt;\n&lt;/distributionManagement&gt;\n\n...\n\n&lt;build&gt;\n  &lt;plugins&gt;\n    &lt;plugin&gt;\n      &lt;groupId&gt;org.codehaus.mojo&lt;/groupId&gt;\n      &lt;artifactId&gt;build-helper-maven-plugin&lt;/artifactId&gt;\n      &lt;version&gt;3.3.0&lt;/version&gt;\n      &lt;executions&gt;\n        &lt;execution&gt;\n          &lt;!-- sets the repoUrl property to the correct repository depending on the type of version --&gt;\n          &lt;id&gt;build-deploy-url&lt;/id&gt;\n          &lt;phase&gt;validate&lt;/phase&gt;\n          &lt;goals&gt;\n            &lt;goal&gt;regex-property&lt;/goal&gt;\n          &lt;/goals&gt;\n          &lt;configuration&gt;\n            &lt;name&gt;repoUrl&lt;/name&gt;\n            &lt;value&gt;${project.version}&lt;/value&gt;\n            &lt;regex&gt;.*-SNAPSHOT&lt;/regex&gt;\n            &lt;replacement&gt;${project.distributionManagement.snapshotRepository.url}&lt;/replacement&gt;\n            &lt;failIfNoMatch&gt;${project.distributionManagement.repository.url}&lt;/failIfNoMatch&gt;\n          &lt;/configuration&gt;\n        &lt;/execution&gt;\n      &lt;/executions&gt;\n    &lt;/plugin&gt;\n\n    &lt;plugin&gt;\n      &lt;artifactId&gt;maven-deploy-plugin&lt;/artifactId&gt;\n      &lt;version&gt;3.0.0&lt;/version&gt;\n      &lt;executions&gt;\n        &lt;execution&gt;\n          &lt;id&gt;deploy-file&lt;/id&gt;\n          &lt;phase&gt;deploy&lt;/phase&gt;\n          &lt;goals&gt;\n            &lt;goal&gt;deploy-file&lt;/goal&gt;\n          &lt;/goals&gt;\n          &lt;configuration&gt;\n            &lt;file&gt;${project.build.directory}/&lt;!--your-file--&gt;&lt;/file&gt;\n            &lt;url&gt;${repoUrl}&lt;/url&gt;\n            &lt;repositoryId&gt;&lt;!--repo as per settings.xml if credentials are the same--&gt;&lt;/repositoryId&gt;\n            &lt;groupId&gt;${project.groupId}&lt;/groupId&gt;\n            &lt;artifactId&gt;${project.artifactId}&lt;/artifactId&gt;\n            &lt;version&gt;${project.version}&lt;/version&gt;\n            &lt;packaging&gt;&lt;!--your packaging--&gt;&lt;/packaging&gt;\n          &lt;/configuration&gt;\n        &lt;/execution&gt;\n      &lt;/executions&gt;\n    &lt;/plugin&gt;\n  &lt;/plugins&gt;\n&lt;/build&gt;\n\n...\n</code></pre>\n"}],"owner":{"account_id":5395500,"reputation":642,"user_id":4296851,"accept_rate":71,"display_name":"Richard Sand"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":3144,"favorite_count":0,"down_vote_count":0,"up_vote_count":6,"answer_count":3,"score":6,"last_activity_date":1662561234,"creation_date":1489895176,"question_id":42882698,"body_markdown":"I am using Maven to build a particular project, and within the POM I am building 3 different variants of the primary artifact using the maven shade plugin (I&#39;m creating uber jars with various combinations of included logging frameworks). The shade plugin creates jars with alternative artifact IDs and their respective dependency-reduced-poms.\r\n\r\nMy challenge is now how to deploy these new artifacts to my remote repositories. I&#39;m using the maven install plugin to install them to my local repo, but the maven deploy plugin requires explicit configuration of a repository URL. What I want to happen is for the plugin to adopt whichever remote repo the default deploy uses, whether its the snapshot or release repo or another repo URL that I pass in via command-line. I was hoping to find some maven property like ${project.remoterepo.url} that equated to the resolved repo. It seems silly to have to explicitly configure the remote URL when the deploy goal already does this.\r\n\r\nAny advice appreciated. Thanks!","title":"determine repository URL for maven deploy-file","body":"<p>I am using Maven to build a particular project, and within the POM I am building 3 different variants of the primary artifact using the maven shade plugin (I'm creating uber jars with various combinations of included logging frameworks). The shade plugin creates jars with alternative artifact IDs and their respective dependency-reduced-poms.</p>\n\n<p>My challenge is now how to deploy these new artifacts to my remote repositories. I'm using the maven install plugin to install them to my local repo, but the maven deploy plugin requires explicit configuration of a repository URL. What I want to happen is for the plugin to adopt whichever remote repo the default deploy uses, whether its the snapshot or release repo or another repo URL that I pass in via command-line. I was hoping to find some maven property like ${project.remoterepo.url} that equated to the resolved repo. It seems silly to have to explicitly configure the remote URL when the deploy goal already does this.</p>\n\n<p>Any advice appreciated. Thanks!</p>\n"},{"tags":["java","hibernate","jpa","hibernate-envers","jpa-2.1"],"answers":[{"tags":[],"owner":{"account_id":1968635,"reputation":21509,"user_id":1768226,"accept_rate":80,"display_name":"shazin"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1394681974,"creation_date":1394681974,"answer_id":22368580,"question_id":22358912,"body_markdown":"Try using @Convert in `Party` Entity. Sometimes `autoApply` flag will not work\r\n\r\n    @Entity\r\n    @Audited\r\n    public class Party\r\n        {\r\n        @Convert(converter = NametoStringConverter.class)\r\n        protected Name name;\r\n        ...\r\n        }\r\n\r\n","title":"Hibernate Envers fails with @Converter and AttributeConverter (JPA 2.1)","body":"<p>Try using @Convert in <code>Party</code> Entity. Sometimes <code>autoApply</code> flag will not work</p>\n\n<pre><code>@Entity\n@Audited\npublic class Party\n    {\n    @Convert(converter = NametoStringConverter.class)\n    protected Name name;\n    ...\n    }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":8897,"reputation":11209,"user_id":16206,"accept_rate":78,"display_name":"borjab"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1395753415,"creation_date":1395753415,"answer_id":22635805,"question_id":22358912,"body_markdown":"I see the text &quot;GeneratedConstructorAccessor43&quot; in the exception. May be you need a public void constructor so that JPA can create an instance of NametoStringConverter.\r\n\r\nThe default constructor should work but check if you have another one with receives parameters or not public.","title":"Hibernate Envers fails with @Converter and AttributeConverter (JPA 2.1)","body":"<p>I see the text \"GeneratedConstructorAccessor43\" in the exception. May be you need a public void constructor so that JPA can create an instance of NametoStringConverter.</p>\n\n<p>The default constructor should work but check if you have another one with receives parameters or not public.</p>\n"},{"tags":[],"owner":{"account_id":38331,"reputation":4640,"user_id":109942,"display_name":"Roland Ewald"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1408896060,"creation_date":1408896060,"answer_id":25473563,"question_id":22358912,"body_markdown":"This seems to be a [known problem with Hibernate Envers (HHH-9042)][1].\r\n\r\nA simple workaround would be a manual invocation of the Convter and an additional transient field, like this:\r\n\r\n    @Entity\r\n    public class Party {\r\n\r\n      protected Name name;\r\n\r\n      @Transient\r\n      protected String nameString;\r\n\r\n      //...\r\n\r\n      public void setName(Name name) {\r\n        this.nameString = (new NametoStringConverter()).convertToDatabaseColumn(name);\r\n        this.name = name;\r\n      }\r\n\r\n      //...\r\n\r\n      public void setNameString(String nameString) {\r\n        this.name = (new NametoStringConverter()).convertToEntityAttribute(nameString);\r\n        this.nameString = nameString;\r\n      }\r\n\r\n    }\r\n\r\nDepending on the conversion functions, the code could be further simplified by making them `static`and importing them.\r\n\r\n[1]: https://hibernate.atlassian.net/browse/HHH-9042","title":"Hibernate Envers fails with @Converter and AttributeConverter (JPA 2.1)","body":"<p>This seems to be a <a href=\"https://hibernate.atlassian.net/browse/HHH-9042\" rel=\"nofollow\">known problem with Hibernate Envers (HHH-9042)</a>.</p>\n\n<p>A simple workaround would be a manual invocation of the Convter and an additional transient field, like this:</p>\n\n<pre><code>@Entity\npublic class Party {\n\n  protected Name name;\n\n  @Transient\n  protected String nameString;\n\n  //...\n\n  public void setName(Name name) {\n    this.nameString = (new NametoStringConverter()).convertToDatabaseColumn(name);\n    this.name = name;\n  }\n\n  //...\n\n  public void setNameString(String nameString) {\n    this.name = (new NametoStringConverter()).convertToEntityAttribute(nameString);\n    this.nameString = nameString;\n  }\n\n}\n</code></pre>\n\n<p>Depending on the conversion functions, the code could be further simplified by making them <code>static</code>and importing them.</p>\n"},{"tags":[],"owner":{"account_id":2009103,"reputation":85,"user_id":5774700,"display_name":"dalcorta"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1459136699,"creation_date":1459136699,"answer_id":36255646,"question_id":22358912,"body_markdown":"I had the same problem, what I found out that it only occured when I didn&#39;t put the @Column annotation with columnDefinition = &quot;VARCHAR(255)&quot; to the Enum. So I think that is a better work around than what in hibernate tracker has. ","title":"Hibernate Envers fails with @Converter and AttributeConverter (JPA 2.1)","body":"<p>I had the same problem, what I found out that it only occured when I didn't put the @Column annotation with columnDefinition = \"VARCHAR(255)\" to the Enum. So I think that is a better work around than what in hibernate tracker has. </p>\n"},{"tags":[],"owner":{"account_id":2992157,"reputation":97,"user_id":2539512,"display_name":"Joaquim Perez"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1662561177,"creation_date":1662561177,"answer_id":73637291,"question_id":22358912,"body_markdown":"In case you need to specify a column name for the column (in this example &quot;C_NAME&quot;) you need to add @Column annotation. \r\n\r\n    @Entity\r\n    @Audited\r\n    public class Party\r\n        {\r\n        @Convert(converter = NametoStringConverter.class)\r\n        @Column( name = &quot;C_NAME&quot; )\r\n        protected Name name;\r\n        ...\r\n        }\r\n    \r\n\r\nNote below code will not work and will result in &quot;Could not determine type for: &quot; error because Converter annotation will be ignored.\r\n\r\n    @Entity\r\n    @Audited\r\n    public class Party\r\n        {\r\n        @Convert(converter = NametoStringConverter.class)\r\n        @Column( name = &quot;C_NAME&quot;, nullable=true )   // DOESN&#39;T WORK\r\n        protected Name name;\r\n        ...\r\n        }\r\n    \r\n","title":"Hibernate Envers fails with @Converter and AttributeConverter (JPA 2.1)","body":"<p>In case you need to specify a column name for the column (in this example &quot;C_NAME&quot;) you need to add @Column annotation.</p>\n<pre><code>@Entity\n@Audited\npublic class Party\n    {\n    @Convert(converter = NametoStringConverter.class)\n    @Column( name = &quot;C_NAME&quot; )\n    protected Name name;\n    ...\n    }\n</code></pre>\n<p>Note below code will not work and will result in &quot;Could not determine type for: &quot; error because Converter annotation will be ignored.</p>\n<pre><code>@Entity\n@Audited\npublic class Party\n    {\n    @Convert(converter = NametoStringConverter.class)\n    @Column( name = &quot;C_NAME&quot;, nullable=true )   // DOESN'T WORK\n    protected Name name;\n    ...\n    }\n</code></pre>\n"}],"owner":{"account_id":2650998,"reputation":29491,"user_id":3411681,"accept_rate":61,"display_name":"Marcelo Glasberg"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":11158,"favorite_count":0,"down_vote_count":0,"up_vote_count":8,"answer_count":5,"score":8,"last_activity_date":1662561177,"creation_date":1394644256,"question_id":22358912,"body_markdown":"I am using Hibernate 4.3.4 with Envers, and MySql 5.6.\r\n\r\nWithout a JPA 2.1 converter, the `Party` entity below fails at `Configuration.buildSessionFactory()` as it should, since Hibernate doesn&#39;t know what to do with the Name class:\r\n    \r\n    @Entity\r\n    @Audited\r\n    public class Party\r\n        {\r\n        protected Name name;\r\n        ...\r\n        }\r\n\r\nThe exception is:\r\n\r\n    org.hibernate.MappingException: \r\n      Could not determine type for: \r\n        ModuloADM.Party.Name, \r\n        at table: Party, for columns: [org.hibernate.mapping.Column(name)]\r\n\r\nTo fix this, I then add this converter:\r\n\r\n    @Converter (autoApply=true)\r\n    public class NametoStringConverter\r\n          implements AttributeConverter&lt;Name, String&gt;\r\n        { ... }\r\n\r\n    \r\nAnd the exception now changes to:  \r\n\r\n    org.hibernate.MappingException: \r\n      Could not determine type for: \r\n        BasicType adapter for AttributeConverter&lt;Name,String&gt;, \r\n        at table: History_Party, for columns: [org.hibernate.mapping.Column(name)]\r\n\r\nThis is now failing at the Envers auditing table for the `Party` entity. Note that `History_Party` is the name of the audit table, as chosen by `config.setProperty(&quot;org.hibernate.envers.audit_table_prefix&quot;, &quot;History_&quot;)`.\r\n\r\nThe complete stacktrace is:\r\n\r\n    org.hibernate.MappingException: \r\n      Could not determine type for: \r\n        BasicType adapter for AttributeConverter&lt;Name,String&gt;, \r\n        at table: History_Party, for columns: [org.hibernate.mapping.Column(name)]\r\n\r\n      at org.hibernate.mapping.SimpleValue.getType(SimpleValue.java:336)\r\n    \tat org.hibernate.tuple.PropertyFactory.buildEntityBasedAttribute(PropertyFactory.java:246)\r\n    \tat org.hibernate.tuple.entity.EntityMetamodel.&lt;init&gt;(EntityMetamodel.java:227)\r\n    \tat org.hibernate.persister.entity.AbstractEntityPersister.&lt;init&gt;(AbstractEntityPersister.java:520)\r\n    \tat org.hibernate.persister.entity.SingleTableEntityPersister.&lt;init&gt;(SingleTableEntityPersister.java:148)\r\n    \tat sun.reflect.GeneratedConstructorAccessor43.newInstance(Unknown Source)\r\n    \tat sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45)\r\n    \tat java.lang.reflect.Constructor.newInstance(Constructor.java:525)\r\n    \tat org.hibernate.persister.internal.PersisterFactoryImpl.create(PersisterFactoryImpl.java:163)\r\n    \tat org.hibernate.persister.internal.PersisterFactoryImpl.createEntityPersister(PersisterFactoryImpl.java:135)\r\n    \tat org.hibernate.internal.SessionFactoryImpl.&lt;init&gt;(SessionFactoryImpl.java:401)\r\n    \tat org.hibernate.cfg.Configuration.buildSessionFactory(Configuration.java:1857)\r\n\r\n\r\n**How do I solve this? Is Envers even compatible with AttributeConverters?**\r\n\r\n","title":"Hibernate Envers fails with @Converter and AttributeConverter (JPA 2.1)","body":"<p>I am using Hibernate 4.3.4 with Envers, and MySql 5.6.</p>\n\n<p>Without a JPA 2.1 converter, the <code>Party</code> entity below fails at <code>Configuration.buildSessionFactory()</code> as it should, since Hibernate doesn't know what to do with the Name class:</p>\n\n<pre><code>@Entity\n@Audited\npublic class Party\n    {\n    protected Name name;\n    ...\n    }\n</code></pre>\n\n<p>The exception is:</p>\n\n<pre><code>org.hibernate.MappingException: \n  Could not determine type for: \n    ModuloADM.Party.Name, \n    at table: Party, for columns: [org.hibernate.mapping.Column(name)]\n</code></pre>\n\n<p>To fix this, I then add this converter:</p>\n\n<pre><code>@Converter (autoApply=true)\npublic class NametoStringConverter\n      implements AttributeConverter&lt;Name, String&gt;\n    { ... }\n</code></pre>\n\n<p>And the exception now changes to:  </p>\n\n<pre><code>org.hibernate.MappingException: \n  Could not determine type for: \n    BasicType adapter for AttributeConverter&lt;Name,String&gt;, \n    at table: History_Party, for columns: [org.hibernate.mapping.Column(name)]\n</code></pre>\n\n<p>This is now failing at the Envers auditing table for the <code>Party</code> entity. Note that <code>History_Party</code> is the name of the audit table, as chosen by <code>config.setProperty(\"org.hibernate.envers.audit_table_prefix\", \"History_\")</code>.</p>\n\n<p>The complete stacktrace is:</p>\n\n<pre><code>org.hibernate.MappingException: \n  Could not determine type for: \n    BasicType adapter for AttributeConverter&lt;Name,String&gt;, \n    at table: History_Party, for columns: [org.hibernate.mapping.Column(name)]\n\n  at org.hibernate.mapping.SimpleValue.getType(SimpleValue.java:336)\n    at org.hibernate.tuple.PropertyFactory.buildEntityBasedAttribute(PropertyFactory.java:246)\n    at org.hibernate.tuple.entity.EntityMetamodel.&lt;init&gt;(EntityMetamodel.java:227)\n    at org.hibernate.persister.entity.AbstractEntityPersister.&lt;init&gt;(AbstractEntityPersister.java:520)\n    at org.hibernate.persister.entity.SingleTableEntityPersister.&lt;init&gt;(SingleTableEntityPersister.java:148)\n    at sun.reflect.GeneratedConstructorAccessor43.newInstance(Unknown Source)\n    at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45)\n    at java.lang.reflect.Constructor.newInstance(Constructor.java:525)\n    at org.hibernate.persister.internal.PersisterFactoryImpl.create(PersisterFactoryImpl.java:163)\n    at org.hibernate.persister.internal.PersisterFactoryImpl.createEntityPersister(PersisterFactoryImpl.java:135)\n    at org.hibernate.internal.SessionFactoryImpl.&lt;init&gt;(SessionFactoryImpl.java:401)\n    at org.hibernate.cfg.Configuration.buildSessionFactory(Configuration.java:1857)\n</code></pre>\n\n<p><strong>How do I solve this? Is Envers even compatible with AttributeConverters?</strong></p>\n"},{"tags":["java","spring-boot","spring-security"],"comments":[{"owner":{"account_id":11599687,"reputation":290,"user_id":8762786,"display_name":"Anant"},"score":0,"creation_date":1662579613,"post_id":73634221,"comment_id":130041240,"body_markdown":"@dur naah mate, same effect","body":"@dur naah mate, same effect"}],"answers":[{"tags":[],"owner":{"account_id":25690087,"reputation":1360,"user_id":19451633,"display_name":"Andrei Titov"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1662561088,"creation_date":1662561088,"answer_id":73637274,"question_id":73634221,"body_markdown":"As stated in javadoc [here][1] and [here][2], `SecurityExpressionRoot`&#39;s `.hasRole()` and `.hasAnyRole()` **methods add *&quot;ROLE_&quot;* prefix to passed arguments by default**, if you did not change this default `GrantedAuthority` prefix.  \r\nSo, with `.hasRole(&quot;ADMIN&quot;)` spring-security will try to match actual authority name with *&quot;ROLE_ADMIN&quot;* instead of just *&quot;ADMIN&quot;*.\r\n\r\nBut your in-memory User has a `SimpleGrantedAuthority` with *&quot;ADMIN&quot;* authority, so you get 403 status as a result.\r\n\r\nYou can fix it in 3 ways:\r\n\r\n1) save roles as `SimpleGrantedAuthority(&quot;ROLE_ADMIN&quot;)` and `SimpleGrantedAuthority(&quot;ROLE_CUSTOMER&quot;)` (with prefix)\r\n2) use `.hasAuthority()` instead of `.hasRole()` method - the first one doesn&#39;t change passed argument and doesn&#39;t add any prefixes.\r\n3) override default prefix like this:\r\n\r\n```java\r\n    @Bean\r\n    public GrantedAuthorityDefaults grantedAuthorityDefaults() {\r\n        return new GrantedAuthorityDefaults(&quot;&quot;); // &lt;- no default prefix\r\n    }\r\n```\r\n\r\n  [1]: https://docs.spring.io/spring-security/site/docs/current/api/org/springframework/security/access/expression/SecurityExpressionOperations.html#hasRole(java.lang.String)\r\n  [2]: https://docs.spring.io/spring-security/site/docs/current/api/org/springframework/security/access/expression/SecurityExpressionOperations.html#hasAnyRole(java.lang.String...)","title":"All roles unable to access a protected endpoint","body":"<p>As stated in javadoc <a href=\"https://docs.spring.io/spring-security/site/docs/current/api/org/springframework/security/access/expression/SecurityExpressionOperations.html#hasRole(java.lang.String)\" rel=\"nofollow noreferrer\">here</a> and <a href=\"https://docs.spring.io/spring-security/site/docs/current/api/org/springframework/security/access/expression/SecurityExpressionOperations.html#hasAnyRole(java.lang.String...)\" rel=\"nofollow noreferrer\">here</a>, <code>SecurityExpressionRoot</code>'s <code>.hasRole()</code> and <code>.hasAnyRole()</code> <strong>methods add <em>&quot;ROLE_&quot;</em> prefix to passed arguments by default</strong>, if you did not change this default <code>GrantedAuthority</code> prefix.<br />\nSo, with <code>.hasRole(&quot;ADMIN&quot;)</code> spring-security will try to match actual authority name with <em>&quot;ROLE_ADMIN&quot;</em> instead of just <em>&quot;ADMIN&quot;</em>.</p>\n<p>But your in-memory User has a <code>SimpleGrantedAuthority</code> with <em>&quot;ADMIN&quot;</em> authority, so you get 403 status as a result.</p>\n<p>You can fix it in 3 ways:</p>\n<ol>\n<li>save roles as <code>SimpleGrantedAuthority(&quot;ROLE_ADMIN&quot;)</code> and <code>SimpleGrantedAuthority(&quot;ROLE_CUSTOMER&quot;)</code> (with prefix)</li>\n<li>use <code>.hasAuthority()</code> instead of <code>.hasRole()</code> method - the first one doesn't change passed argument and doesn't add any prefixes.</li>\n<li>override default prefix like this:</li>\n</ol>\n<pre class=\"lang-java prettyprint-override\"><code>    @Bean\n    public GrantedAuthorityDefaults grantedAuthorityDefaults() {\n        return new GrantedAuthorityDefaults(&quot;&quot;); // &lt;- no default prefix\n    }\n</code></pre>\n"}],"owner":{"account_id":11599687,"reputation":290,"user_id":8762786,"display_name":"Anant"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":129,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"closed_date":1662580419,"accepted_answer_id":73637274,"answer_count":1,"score":0,"last_activity_date":1662561088,"creation_date":1662547827,"question_id":73634221,"body_markdown":"I am trying to secure an endpoint using Spring Security. I have created two roles, `ADMIN` and `CUSTOMER`, and for testing purposes I am trying to secure a particular endpoint `/api/v1/customers/` so that only `ADMIN` can access it. \r\n\r\nAs it turns out none of the roles, even `ADMIN` is also unable to access it. I realised I previously wasn&#39;t using `api/v1/customers` and just using `/customers/` so I fixed that. \r\n\r\nAlso based on an answer regarding a similar issue I have entered same end point twice, with and without slash in the end (check the config code, you&#39;ll know).\r\n\r\nNothing seems to work, I am sharing my `SecurityConfig` and controller (only useful parts) classes below.\r\n\r\n**CustomerController.java**\r\n\r\n&lt;!-- language: java --&gt;\r\n\r\n    @CrossOrigin(origins = &quot;http://localhost:3000/&quot;)\r\n    @RestController\r\n    @RequestMapping(&quot;api/v1&quot;)\r\n    public class CustomerController {\r\n        \r\n        @Autowired\r\n        private CustomerRepository customerRepository;\r\n    \r\n        @RequestMapping(value = &quot;/customers&quot;, method = RequestMethod.GET)\r\n        public List&lt;Customer&gt; getAllCustomers(){\r\n            return customerRepository.findAll();\r\n        }\r\n    }\r\n\r\n**SecurityConfiguration.java**\r\n\r\n&lt;!-- language: java --&gt;\r\n\r\n    @Configuration\r\n    @EnableWebSecurity\r\n    public class SecurityConfiguration{\r\n        \r\n        @Bean\r\n        protected SecurityFilterChain filterChain(HttpSecurity http) throws Exception{\r\n            // disabling the csrf isn&#39;t really the best way of dealing with this, need to fix !!!\r\n            http\r\n                .csrf().disable();\r\n            http\r\n                .authorizeRequests()\r\n                    .antMatchers(HttpMethod.GET, &quot;/api/v1/customers/&quot;, &quot;/api/v1/customers&quot;).hasRole(&quot;ADMIN&quot;)\r\n                    .anyRequest().authenticated().\r\n                    .and()\r\n                .formLogin();\r\n            return http.build();\r\n        }\r\n    \r\n        @Bean\r\n        protected InMemoryUserDetailsManager configureAuthentication(){\r\n    \r\n            List&lt;UserDetails&gt; userDetails = new ArrayList&lt;&gt;();\r\n            List&lt;GrantedAuthority&gt; customerRoles = new ArrayList&lt;&gt;();\r\n            customerRoles.add(new SimpleGrantedAuthority(&quot;CUSTOMER&quot;));\r\n            List&lt;GrantedAuthority&gt; adminRoles = new ArrayList&lt;&gt;();\r\n            adminRoles.add(new SimpleGrantedAuthority(&quot;ADMIN&quot;));\r\n    \r\n            userDetails.add(new User(&quot;user_customer&quot;, this.PasswordEncoder().encode(&quot;password&quot;), customerRoles));\r\n            userDetails.add(new User(&quot;user_admin&quot;, this.PasswordEncoder().encode(&quot;password&quot;), adminRoles));\r\n            return new InMemoryUserDetailsManager(userDetails);\r\n        }\r\n    \r\n        @Bean\r\n        public PasswordEncoder PasswordEncoder(){\r\n            return new BCryptPasswordEncoder(10);\r\n        }\r\n    }\r\n\r\n","title":"All roles unable to access a protected endpoint","body":"<p>I am trying to secure an endpoint using Spring Security. I have created two roles, <code>ADMIN</code> and <code>CUSTOMER</code>, and for testing purposes I am trying to secure a particular endpoint <code>/api/v1/customers/</code> so that only <code>ADMIN</code> can access it.</p>\n<p>As it turns out none of the roles, even <code>ADMIN</code> is also unable to access it. I realised I previously wasn't using <code>api/v1/customers</code> and just using <code>/customers/</code> so I fixed that.</p>\n<p>Also based on an answer regarding a similar issue I have entered same end point twice, with and without slash in the end (check the config code, you'll know).</p>\n<p>Nothing seems to work, I am sharing my <code>SecurityConfig</code> and controller (only useful parts) classes below.</p>\n<p><strong>CustomerController.java</strong></p>\n<pre class=\"lang-java prettyprint-override\"><code>@CrossOrigin(origins = &quot;http://localhost:3000/&quot;)\n@RestController\n@RequestMapping(&quot;api/v1&quot;)\npublic class CustomerController {\n    \n    @Autowired\n    private CustomerRepository customerRepository;\n\n    @RequestMapping(value = &quot;/customers&quot;, method = RequestMethod.GET)\n    public List&lt;Customer&gt; getAllCustomers(){\n        return customerRepository.findAll();\n    }\n}\n</code></pre>\n<p><strong>SecurityConfiguration.java</strong></p>\n<pre class=\"lang-java prettyprint-override\"><code>@Configuration\n@EnableWebSecurity\npublic class SecurityConfiguration{\n    \n    @Bean\n    protected SecurityFilterChain filterChain(HttpSecurity http) throws Exception{\n        // disabling the csrf isn't really the best way of dealing with this, need to fix !!!\n        http\n            .csrf().disable();\n        http\n            .authorizeRequests()\n                .antMatchers(HttpMethod.GET, &quot;/api/v1/customers/&quot;, &quot;/api/v1/customers&quot;).hasRole(&quot;ADMIN&quot;)\n                .anyRequest().authenticated().\n                .and()\n            .formLogin();\n        return http.build();\n    }\n\n    @Bean\n    protected InMemoryUserDetailsManager configureAuthentication(){\n\n        List&lt;UserDetails&gt; userDetails = new ArrayList&lt;&gt;();\n        List&lt;GrantedAuthority&gt; customerRoles = new ArrayList&lt;&gt;();\n        customerRoles.add(new SimpleGrantedAuthority(&quot;CUSTOMER&quot;));\n        List&lt;GrantedAuthority&gt; adminRoles = new ArrayList&lt;&gt;();\n        adminRoles.add(new SimpleGrantedAuthority(&quot;ADMIN&quot;));\n\n        userDetails.add(new User(&quot;user_customer&quot;, this.PasswordEncoder().encode(&quot;password&quot;), customerRoles));\n        userDetails.add(new User(&quot;user_admin&quot;, this.PasswordEncoder().encode(&quot;password&quot;), adminRoles));\n        return new InMemoryUserDetailsManager(userDetails);\n    }\n\n    @Bean\n    public PasswordEncoder PasswordEncoder(){\n        return new BCryptPasswordEncoder(10);\n    }\n}\n</code></pre>\n"},{"tags":["java","exception","try-catch","try-catch-finally"],"comments":[{"owner":{"account_id":3211603,"reputation":289297,"user_id":2711488,"display_name":"Holger"},"score":4,"creation_date":1662554816,"post_id":73635745,"comment_id":130032390,"body_markdown":"Why do you want to store the resource in field when the validity is limited to the `try` block?","body":"Why do you want to store the resource in field when the validity is limited to the <code>try</code> block?"},{"owner":{"account_id":1975034,"reputation":961,"user_id":1773011,"accept_rate":85,"display_name":"lightrek"},"score":0,"creation_date":1662554999,"post_id":73635745,"comment_id":130032464,"body_markdown":"Because this try block runs a long time. I have another method in the same class may try to access the resource to do cancellation operation why the try block is running.","body":"Because this try block runs a long time. I have another method in the same class may try to access the resource to do cancellation operation why the try block is running."},{"owner":{"account_id":1992310,"reputation":11172,"user_id":1786065,"accept_rate":91,"display_name":"Rogue"},"score":0,"creation_date":1662555725,"post_id":73635745,"comment_id":130032767,"body_markdown":"When you assign and declare the variable on separate lines (or really, any assignment outside of the initial declaration), your variable is no longer &quot;effectively final&quot; (same goes for lambda expressions, barring being a field). So the `...` in your code example is, in fact, quite relevant. Furthermore, your check will be invalid since you will be dealing with a new resource every time you reach the try-with-resources block, unless `#createMyResource` does some finnicky check ahead of time.","body":"When you assign and declare the variable on separate lines (or really, any assignment outside of the initial declaration), your variable is no longer &quot;effectively final&quot; (same goes for lambda expressions, barring being a field). So the <code>...</code> in your code example is, in fact, quite relevant. Furthermore, your check will be invalid since you will be dealing with a new resource every time you reach the try-with-resources block, unless <code>#createMyResource</code> does some finnicky check ahead of time."},{"owner":{"account_id":3211603,"reputation":289297,"user_id":2711488,"display_name":"Holger"},"score":2,"creation_date":1662555764,"post_id":73635745,"comment_id":130032791,"body_markdown":"Since this method must be invoked from within the try block to make sense, the current resource could be passed as parameter. But storing the value into a field is possible if you can live without reentrancy. The field assignment is just independent from the `try` block.","body":"Since this method must be invoked from within the try block to make sense, the current resource could be passed as parameter. But storing the value into a field is possible if you can live without reentrancy. The field assignment is just independent from the <code>try</code> block."},{"owner":{"account_id":6651855,"reputation":224830,"user_id":5133585,"accept_rate":96,"display_name":"Sweeper"},"score":0,"creation_date":1662556322,"post_id":73635745,"comment_id":130033019,"body_markdown":"[Related](https://stackoverflow.com/q/72553015/5133585)","body":"<a href=\"https://stackoverflow.com/q/72553015/5133585\">Related</a>"}],"answers":[{"tags":[],"owner":{"account_id":3211603,"reputation":289297,"user_id":2711488,"display_name":"Holger"},"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1662560616,"creation_date":1662560616,"answer_id":73637165,"question_id":73635745,"body_markdown":"Maintaining a field for storing an object of limited lifetime should be avoided. But if you really need it, the code should look like\r\n\r\n```java\r\nclass Manager {\r\n    MyResource m_myResource;\r\n    ...\r\n\r\n    void doTraining() {\r\n        try(MyResource newResource = createMyResource()) {\r\n            m_myResource = newResource;\r\n            ...\r\n        }\r\n        finally {\r\n            m_myResource = null;\r\n        }\r\n    }\r\n}\r\n```\r\nSo when there is no ongoing operation within `doTraining()`’s `try()` block, the field is always `null`.\r\n\r\nIt’s clear that this implementation of `doTraining` is not reentrant; there must be no overlapping invocations of this method, neither through multiple threads nor through recursive calls.\r\n\r\nAs said, this is not recommended. But sometimes, passing the resource through all API layers used in an operation is impractical. The existence of such scenarios has been recognized and there’s a planned general solution, [`ExtentLocal`].\r\n\r\nWith this, the future version would look like\r\n\r\n```java\r\nclass Manager {\r\n    final static ExtentLocal&lt;MyResource&gt; MY_RESSOURCE = new ExtentLocal&lt;&gt;();\r\n    ...\r\n\r\n    void doTraining() {        \r\n        try(MyResource newResource = createMyResource()) {\r\n            ExtentLocal.where(MY_RESSOURCE, newResource )\r\n                .run(() -&gt; {/* code indirectly invoking foo */});\r\n            ...\r\n        }\r\n    }\r\n    void foo() {\r\n        var resource = MY_RESSOURCE.get();\r\n        // use resource\r\n    }\r\n}\r\n```\r\n\r\nNote how this does not mutate the instance for passing the locally valid resource. So here, `doTraining()` is reentrant.\r\n\r\nBut well, this is somewhere in the future…\r\n\r\n\r\n[`ExtentLocal`]: https://bugs.openjdk.org/browse/JDK-8263012","title":"try-with-resource for resource as a class member","body":"<p>Maintaining a field for storing an object of limited lifetime should be avoided. But if you really need it, the code should look like</p>\n<pre class=\"lang-java prettyprint-override\"><code>class Manager {\n    MyResource m_myResource;\n    ...\n\n    void doTraining() {\n        try(MyResource newResource = createMyResource()) {\n            m_myResource = newResource;\n            ...\n        }\n        finally {\n            m_myResource = null;\n        }\n    }\n}\n</code></pre>\n<p>So when there is no ongoing operation within <code>doTraining()</code>’s <code>try()</code> block, the field is always <code>null</code>.</p>\n<p>It’s clear that this implementation of <code>doTraining</code> is not reentrant; there must be no overlapping invocations of this method, neither through multiple threads nor through recursive calls.</p>\n<p>As said, this is not recommended. But sometimes, passing the resource through all API layers used in an operation is impractical. The existence of such scenarios has been recognized and there’s a planned general solution, <a href=\"https://bugs.openjdk.org/browse/JDK-8263012\" rel=\"nofollow noreferrer\"><code>ExtentLocal</code></a>.</p>\n<p>With this, the future version would look like</p>\n<pre class=\"lang-java prettyprint-override\"><code>class Manager {\n    final static ExtentLocal&lt;MyResource&gt; MY_RESSOURCE = new ExtentLocal&lt;&gt;();\n    ...\n\n    void doTraining() {        \n        try(MyResource newResource = createMyResource()) {\n            ExtentLocal.where(MY_RESSOURCE, newResource )\n                .run(() -&gt; {/* code indirectly invoking foo */});\n            ...\n        }\n    }\n    void foo() {\n        var resource = MY_RESSOURCE.get();\n        // use resource\n    }\n}\n</code></pre>\n<p>Note how this does not mutate the instance for passing the locally valid resource. So here, <code>doTraining()</code> is reentrant.</p>\n<p>But well, this is somewhere in the future…</p>\n"}],"owner":{"account_id":1975034,"reputation":961,"user_id":1773011,"accept_rate":85,"display_name":"lightrek"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":245,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":73637165,"answer_count":1,"score":2,"last_activity_date":1662560616,"creation_date":1662554618,"question_id":73635745,"body_markdown":"I try to use a class member as a resource in the try block (Because that resource needs to call close() after try block):\r\n\r\n    class Manager {\r\n        MyResource m_myResource;\r\n        ...\r\n    \r\n        void doTraining() {\r\n            m_myResource = createMyResource();\r\n            try(m_myResource) {\r\n                ...\r\n            }\r\n        }\r\n        \r\n    }\r\n\r\nBut there will be a complain saying that `m_myResource` is not effective final. Why? I think `m_myResource`is not changed after initialization. Anyway, not sure how to fix this issue. One way I can think of is:\r\n\r\n    class Manager {\r\n        MyResource m_myResource;\r\n        ...\r\n    \r\n        void doTraining() {\r\n            MyResource newResource = createMyResource();\r\n            m_myResource = newResource;\r\n            try(m_myResource) {\r\n                ...\r\n            }\r\n        }\r\n    }\r\n\r\nBut I am not sure if assigning the local resource to class member could cause any problem?","title":"try-with-resource for resource as a class member","body":"<p>I try to use a class member as a resource in the try block (Because that resource needs to call close() after try block):</p>\n<pre><code>class Manager {\n    MyResource m_myResource;\n    ...\n\n    void doTraining() {\n        m_myResource = createMyResource();\n        try(m_myResource) {\n            ...\n        }\n    }\n    \n}\n</code></pre>\n<p>But there will be a complain saying that <code>m_myResource</code> is not effective final. Why? I think <code>m_myResource</code>is not changed after initialization. Anyway, not sure how to fix this issue. One way I can think of is:</p>\n<pre><code>class Manager {\n    MyResource m_myResource;\n    ...\n\n    void doTraining() {\n        MyResource newResource = createMyResource();\n        m_myResource = newResource;\n        try(m_myResource) {\n            ...\n        }\n    }\n}\n</code></pre>\n<p>But I am not sure if assigning the local resource to class member could cause any problem?</p>\n"},{"tags":["java","android","kotlin","android-mvvm","android-architecture"],"comments":[{"owner":{"account_id":9172301,"reputation":4168,"user_id":6819340,"accept_rate":39,"display_name":"darshan"},"score":1,"creation_date":1662553869,"post_id":73635415,"comment_id":130032012,"body_markdown":"2500 is indeed too many lines for a single class. In your `SinglePostFragment` you can always **split** the logic depending on the functions you need for downloading files &amp; its status, file type behaviour (split different actions depending on file types), etc. Showing suggested list &amp; comments is something that can definitely be split up from the same Fragment to other use cases..","body":"2500 is indeed too many lines for a single class. In your <code>SinglePostFragment</code> you can always <b>split</b> the logic depending on the functions you need for downloading files &amp; its status, file type behaviour (split different actions depending on file types), etc. Showing suggested list &amp; comments is something that can definitely be split up from the same Fragment to other use cases.."},{"owner":{"account_id":8323622,"reputation":319,"user_id":6254352,"display_name":"jafar_aml"},"score":0,"creation_date":1662572237,"post_id":73635415,"comment_id":130039190,"body_markdown":"@DarShan can you explain more about &quot;other use cases&quot; in your comment, please?","body":"@DarShan can you explain more about &quot;other use cases&quot; in your comment, please?"},{"owner":{"account_id":9172301,"reputation":4168,"user_id":6819340,"accept_rate":39,"display_name":"darshan"},"score":1,"creation_date":1662630580,"post_id":73635415,"comment_id":130052066,"body_markdown":"Example like create a separate BottomSheetFragment &amp; a helper to load/manage comments &amp; other related actions. So instead of handling everything in the fragment, you could move the comments handling to other UI classes &amp; helper/utils classes.","body":"Example like create a separate BottomSheetFragment &amp; a helper to load/manage comments &amp; other related actions. So instead of handling everything in the fragment, you could move the comments handling to other UI classes &amp; helper/utils classes."}],"answers":[{"tags":[],"owner":{"account_id":15251222,"reputation":46,"user_id":11004504,"display_name":"Gaurav Bharadia"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1662554540,"creation_date":1662554540,"answer_id":73635725,"question_id":73635415,"body_markdown":"Don&#39;t group code by it&#39;s type.\r\nFor eg. folders like ViewModels, Activities, Fragments etc.\r\n\r\nYou should group it by its functionalites like loginScreen,\r\nhomeScreen, chatScreen. Each part contains everything which \r\nis requrired to run it. Also apis list can be distributed according\r\nto it.\r\n\r\nBy the way this is also recomended by google for android development but not able to find it&#39;s link. Sorry about that.","title":"Android MVVM UI-realated class size","body":"<p>Don't group code by it's type.\nFor eg. folders like ViewModels, Activities, Fragments etc.</p>\n<p>You should group it by its functionalites like loginScreen,\nhomeScreen, chatScreen. Each part contains everything which\nis requrired to run it. Also apis list can be distributed according\nto it.</p>\n<p>By the way this is also recomended by google for android development but not able to find it's link. Sorry about that.</p>\n"}],"owner":{"account_id":8323622,"reputation":319,"user_id":6254352,"display_name":"jafar_aml"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":53,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":1,"score":0,"last_activity_date":1662560183,"creation_date":1662553192,"question_id":73635415,"body_markdown":"I&#39;m working on a relatively big `Android` project. This project&#39;s app architecture is `MVVM`, and all layer responsibilities are separated well enough. Still, as this project is getting bigger, it&#39;s hard to maintain some, especially UI-related classes. I wonder if there is a better way to handle and shrink the UI class size in the number of code lines (nearly 2500 lines)?\r\n* ex: `SinglePostFragment` contains all UI-related logic like ( file download status, file type behavior ( pdf, audio, image, video ), like, bookmark, share, showing suggested list as a horizontal list, comments, etc.).","title":"Android MVVM UI-realated class size","body":"<p>I'm working on a relatively big <code>Android</code> project. This project's app architecture is <code>MVVM</code>, and all layer responsibilities are separated well enough. Still, as this project is getting bigger, it's hard to maintain some, especially UI-related classes. I wonder if there is a better way to handle and shrink the UI class size in the number of code lines (nearly 2500 lines)?</p>\n<ul>\n<li>ex: <code>SinglePostFragment</code> contains all UI-related logic like ( file download status, file type behavior ( pdf, audio, image, video ), like, bookmark, share, showing suggested list as a horizontal list, comments, etc.).</li>\n</ul>\n"},{"tags":["java","loops","command-line-interface"],"comments":[{"owner":{"account_id":1138604,"reputation":30992,"user_id":1123123,"accept_rate":75,"display_name":"Sam I am says Reinstate Monica"},"score":0,"creation_date":1422293487,"post_id":28155387,"comment_id":44682171,"body_markdown":"Why do you think you need a `do while` loop?  I&#39;m not saying that I disagree with using one.  I&#39;m just curious as to where the requirement is coming from","body":"Why do you think you need a <code>do while</code> loop?  I&#39;m not saying that I disagree with using one.  I&#39;m just curious as to where the requirement is coming from"},{"owner":{"account_id":3704967,"reputation":21,"user_id":3083769,"display_name":"user3083769"},"score":0,"creation_date":1422293629,"post_id":28155387,"comment_id":44682240,"body_markdown":"it&#39;s just because i need to choose either a,b,c,d . if i use d the programs exit. i&#39;m not sure if i should use do while or if then.. i&#39;m sorry , i still am clueless here .","body":"it&#39;s just because i need to choose either a,b,c,d . if i use d the programs exit. i&#39;m not sure if i should use do while or if then.. i&#39;m sorry , i still am clueless here ."},{"owner":{"account_id":1138604,"reputation":30992,"user_id":1123123,"accept_rate":75,"display_name":"Sam I am says Reinstate Monica"},"score":0,"creation_date":1422293699,"post_id":28155387,"comment_id":44682286,"body_markdown":"Do you know how to write a simple `while` or `do while`?","body":"Do you know how to write a simple <code>while</code> or <code>do while</code>?"}],"answers":[{"tags":[],"owner":{"account_id":184870,"reputation":118711,"user_id":421195,"accept_rate":83,"display_name":"paulsm4"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1559557662,"creation_date":1422293763,"answer_id":28155521,"question_id":28155387,"body_markdown":"1) First question: What do you get back from &quot;enter.next()&quot;?\r\n\r\n   A: Look at this tutorial:\r\n\r\nhttp://docs.oracle.com/javase/tutorial/essential/io/scanning.html\r\n\r\n```\r\npublic class ScanXan {\r\n    public static void main(String[] args) throws IOException {\r\n\r\n        Scanner s = null;\r\n        try {\r\n            s = new Scanner(new BufferedReader(new FileReader(&quot;xanadu.txt&quot;)));\r\n            while (s.hasNext()) {\r\n                System.out.println(s.next());\r\n                ...\r\n```\r\nOutput:\r\n\r\n    In\r\n    Xanadu\r\n    did\r\n    Kubla\r\n    Khan\r\n    A\r\n    stately\r\n    pleasure-dome\r\n    ...\r\n\r\n2) Second question: &quot;I have to use loop which is do while...&quot;\r\n\r\n   A: On other words, you have to loop *until some condition becomes true*.\r\n\r\n   For example, maybe you should keep asking &quot;option&quot; until the user selects &quot;D. Exit&quot;.\r\n\r\n    public class Mini {\r\n    \r\n      public static void main(String[] args) {\r\n        Scanner enter = new Scanner(System.in);\r\n        String choice;\r\n        do {\r\n          System.out.println(&quot;Select an option: &quot;);\r\n          System.out.println(&quot; A. Hat &quot;);\r\n          ...\r\n          System.out.println(&quot; D. Exit &quot;);\r\n          choice = enter.next();\r\n        } while (!choice.equalsIgnoreCase (&quot;d&quot;));\r\n        ...\r\n\r\n","title":"Command Line Interface: Choosing options from a list by character","body":"<p>1) First question: What do you get back from \"enter.next()\"?</p>\n\n<p>A: Look at this tutorial:</p>\n\n<p><a href=\"http://docs.oracle.com/javase/tutorial/essential/io/scanning.html\" rel=\"nofollow noreferrer\">http://docs.oracle.com/javase/tutorial/essential/io/scanning.html</a></p>\n\n<pre><code>public class ScanXan {\n    public static void main(String[] args) throws IOException {\n\n        Scanner s = null;\n        try {\n            s = new Scanner(new BufferedReader(new FileReader(\"xanadu.txt\")));\n            while (s.hasNext()) {\n                System.out.println(s.next());\n                ...\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>In\nXanadu\ndid\nKubla\nKhan\nA\nstately\npleasure-dome\n...\n</code></pre>\n\n<p>2) Second question: \"I have to use loop which is do while...\"</p>\n\n<p>A: On other words, you have to loop <em>until some condition becomes true</em>.</p>\n\n<p>For example, maybe you should keep asking \"option\" until the user selects \"D. Exit\".</p>\n\n<pre><code>public class Mini {\n\n  public static void main(String[] args) {\n    Scanner enter = new Scanner(System.in);\n    String choice;\n    do {\n      System.out.println(\"Select an option: \");\n      System.out.println(\" A. Hat \");\n      ...\n      System.out.println(\" D. Exit \");\n      choice = enter.next();\n    } while (!choice.equalsIgnoreCase (\"d\"));\n    ...\n</code></pre>\n"},{"tags":[],"owner":{"account_id":5136646,"reputation":16423,"user_id":4338920,"accept_rate":69,"display_name":"Malik Brahimi"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1422293952,"creation_date":1422293952,"answer_id":28155575,"question_id":28155387,"body_markdown":"Use a validation `while` loop:\r\n\r\n    ArrayList&lt;String&gt; options = new ArrayList&lt;String&gt;();\r\n    options.add(&quot;A&quot;);\r\n    options.add(&quot;B&quot;);\r\n    options.add(&quot;C&quot;);\r\n    options.add(&quot;D&quot;);\r\n    \r\n    String answer = &quot;&quot;;\r\n    \r\n    while(!options.contains(answer)) {\r\n        System.out.println(&quot;Select an option: &quot;);\r\n        System.out.println(&quot; A. Hat &quot;);\r\n        System.out.println(&quot; B. Orange &quot;);\r\n        System.out.println(&quot; C. Bounty &quot;);   \r\n        System.out.println(&quot; D. Exit &quot;);\r\n        answer = enter.nextLine();\r\n    }\r\n    \r\n    // answer is now either A, B, C, D","title":"Command Line Interface: Choosing options from a list by character","body":"<p>Use a validation <code>while</code> loop:</p>\n\n<pre><code>ArrayList&lt;String&gt; options = new ArrayList&lt;String&gt;();\noptions.add(\"A\");\noptions.add(\"B\");\noptions.add(\"C\");\noptions.add(\"D\");\n\nString answer = \"\";\n\nwhile(!options.contains(answer)) {\n    System.out.println(\"Select an option: \");\n    System.out.println(\" A. Hat \");\n    System.out.println(\" B. Orange \");\n    System.out.println(\" C. Bounty \");   \n    System.out.println(\" D. Exit \");\n    answer = enter.nextLine();\n}\n\n// answer is now either A, B, C, D\n</code></pre>\n"},{"tags":[],"owner":{"account_id":4322957,"reputation":691,"user_id":3530525,"accept_rate":91,"display_name":"user3530525"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1431769741,"creation_date":1422293986,"answer_id":28155588,"question_id":28155387,"body_markdown":"Here&#39;s an example:\r\n\r\n    import java.util.Scanner;\r\n\r\n\r\n    public class Mini {\r\n\t    public static void main(String[] args) {\r\n    \t\tScanner in = new Scanner(System.in);\r\n    \t\t\r\n    \t\tSystem.out.println(&quot;A: Say something&quot;);\r\n    \t\tSystem.out.println(&quot;B: Say something&quot;);\r\n    \t\tSystem.out.println(&quot;C: Say something&quot;);\r\n    \t\tSystem.out.println(&quot;D: Exit&quot;);\r\n    \r\n    \t\twhile(true) {\r\n    \t\t\tchar input = in.next().toCharArray()[0];\r\n    \t\t\t\r\n    \t\t\tswitch(input) {\r\n    \t\t\tcase &#39;A&#39;:\r\n    \t\t\t\tSystem.out.println(&quot;Something&quot;);\r\n    \t\t\t\tbreak;\r\n    \t\t\tcase &#39;B&#39;:\r\n    \t\t\t\tSystem.out.println(&quot;Something&quot;);\r\n    \t\t\t\tbreak;\r\n    \t\t\tcase &#39;C&#39;:\r\n    \t\t\t\tSystem.out.println(&quot;Something&quot;);\r\n    \t\t\t\tbreak;\r\n    \t\t\tcase &#39;D&#39;:\r\n    \t\t\t\tSystem.exit(0);\r\n    \t\t\t\tbreak;\r\n    \t\t\tdefault:\r\n    \t\t\t\tcontinue;\r\n    \t\t\t}\r\n    \t\t}\r\n    \t}\r\n    }\r\n","title":"Command Line Interface: Choosing options from a list by character","body":"<p>Here's an example:</p>\n\n<pre><code>import java.util.Scanner;\n\n\npublic class Mini {\n    public static void main(String[] args) {\n        Scanner in = new Scanner(System.in);\n\n        System.out.println(\"A: Say something\");\n        System.out.println(\"B: Say something\");\n        System.out.println(\"C: Say something\");\n        System.out.println(\"D: Exit\");\n\n        while(true) {\n            char input = in.next().toCharArray()[0];\n\n            switch(input) {\n            case 'A':\n                System.out.println(\"Something\");\n                break;\n            case 'B':\n                System.out.println(\"Something\");\n                break;\n            case 'C':\n                System.out.println(\"Something\");\n                break;\n            case 'D':\n                System.exit(0);\n                break;\n            default:\n                continue;\n            }\n        }\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":3704967,"reputation":21,"user_id":3083769,"display_name":"user3083769"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2561,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":3,"score":2,"last_activity_date":1662560073,"creation_date":1422293259,"question_id":28155387,"body_markdown":"How do I create an option menu in Java? This is as far as I know:\r\n\r\n    import java.util.Scanner;\r\n    \r\n    public class Mini {\r\n      public static void main(String[] args) {\r\n        Scanner enter = new Scanner(System.in);\r\n    \r\n        System.out.println(&quot;Select an option: &quot;);\r\n        System.out.println(&quot; A. Hat &quot;);\r\n        System.out.println(&quot; B. Orange &quot;);\r\n        System.out.println(&quot; C. Bounty &quot;);   \r\n        System.out.println(&quot; D. Exit &quot;);\r\n        \r\n        choice = enter.next(); /* &lt;--what do i put because i use char? */\r\n      }\r\n    }\r\n\r\nand I have to use a a loop which is `do-while`. I&#39;m confused if I use char.\r\n\r\n","title":"Command Line Interface: Choosing options from a list by character","body":"<p>How do I create an option menu in Java? This is as far as I know:</p>\n\n<pre><code>import java.util.Scanner;\n\npublic class Mini {\n  public static void main(String[] args) {\n    Scanner enter = new Scanner(System.in);\n\n    System.out.println(\"Select an option: \");\n    System.out.println(\" A. Hat \");\n    System.out.println(\" B. Orange \");\n    System.out.println(\" C. Bounty \");   \n    System.out.println(\" D. Exit \");\n\n    choice = enter.next(); /* &lt;--what do i put because i use char? */\n  }\n}\n</code></pre>\n\n<p>and I have to use a a loop which is <code>do-while</code>. I'm confused if I use char.</p>\n"},{"tags":["java","android"],"comments":[{"owner":{"account_id":1790714,"reputation":91128,"user_id":1631193,"accept_rate":71,"display_name":"Gabe Sechan"},"score":0,"creation_date":1662482529,"post_id":73625097,"comment_id":130013748,"body_markdown":"Either you&#39;re passing a null in for a Context somewhere, or you&#39;re not posting the relevant code.  Where is the code in SecondFragment being called, is it possible its called before the context is set up for the fragment (if this is in a constructor or init block, that&#39;s wrong).","body":"Either you&#39;re passing a null in for a Context somewhere, or you&#39;re not posting the relevant code.  Where is the code in SecondFragment being called, is it possible its called before the context is set up for the fragment (if this is in a constructor or init block, that&#39;s wrong)."},{"owner":{"account_id":16768304,"reputation":8503,"user_id":12121419,"display_name":"blackapps"},"score":0,"creation_date":1662486211,"post_id":73625097,"comment_id":130014902,"body_markdown":"`FirstFragment firstFrag = new FirstFragment();` You are not supposed to use the &#39;new&#39; operator to create fragments.","body":"<code>FirstFragment firstFrag = new FirstFragment();</code> You are not supposed to use the &#39;new&#39; operator to create fragments."},{"owner":{"account_id":18093863,"reputation":31,"user_id":13152649,"display_name":"Brajlal"},"score":0,"creation_date":1662559782,"post_id":73625097,"comment_id":130034499,"body_markdown":"@gabe-sechan\n Hi I have updated the code please give some suggestion on my code, thank","body":"@gabe-sechan  Hi I have updated the code please give some suggestion on my code, thank"},{"owner":{"account_id":1790714,"reputation":91128,"user_id":1631193,"accept_rate":71,"display_name":"Gabe Sechan"},"score":0,"creation_date":1662561158,"post_id":73625097,"comment_id":130035103,"body_markdown":"Yeah, no context is ever set on that fragment, as its never attached to a view anywhere.  So getContext() in it returns null.  You need to actually put it into your layout.","body":"Yeah, no context is ever set on that fragment, as its never attached to a view anywhere.  So getContext() in it returns null.  You need to actually put it into your layout."},{"owner":{"account_id":1790714,"reputation":91128,"user_id":1631193,"accept_rate":71,"display_name":"Gabe Sechan"},"score":0,"creation_date":1662561397,"post_id":73625097,"comment_id":130035196,"body_markdown":"@blackapps Using new to create a fragment isn&#39;t that unusual.  You sometimes don&#39;t want to or can&#39;t put the fragment into your xml.  In that case, creating it with new is normal, and then you&#39;d add it into your screen via a FragmentTransaction.  Of course until you do so it doesn&#39;t have a Context and shouldn&#39;t be accessed.","body":"@blackapps Using new to create a fragment isn&#39;t that unusual.  You sometimes don&#39;t want to or can&#39;t put the fragment into your xml.  In that case, creating it with new is normal, and then you&#39;d add it into your screen via a FragmentTransaction.  Of course until you do so it doesn&#39;t have a Context and shouldn&#39;t be accessed."}],"owner":{"account_id":18093863,"reputation":31,"user_id":13152649,"display_name":"Brajlal"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":137,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":0,"score":0,"last_activity_date":1662559671,"creation_date":1662481297,"question_id":73625097,"body_markdown":"I have two file with name\r\n\r\n- FirstFragment.java \r\n- SecondFragment.java\r\n\r\n**Code of the FirstFragment is**\r\n\r\n\r\n    package com.example.application\r\n    \r\n    import android.os.Bundle;\r\n    \r\n    import androidx.fragment.app.Fragment;\r\n    \r\n    import android.view.LayoutInflater;\r\n    import android.view.View;\r\n    import android.view.ViewGroup;\r\n    \r\n    \r\n    public class FirstFragment extends Fragment {\r\n        @Override\r\n        public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {\r\n            View view = inflater.inflate(R.layout.fragment_first, container, false);\r\n    \r\n    \r\n            return view;\r\n        }\r\n    \r\n        // The method that i want to call from SecondFragment\r\n        public void methodFirst() {\r\n            Toast.makeText(getContext(), &quot;Method First Clicked&quot;, Toast.LENGTH_SHORT).show();\r\n        }\r\n    \r\n    }\r\n\r\n----------\r\n\r\n\r\nNow I want to call the *methodFirst* function in SecondFragment. I have tried the following code on SecondFragment.\r\n\r\n\r\n\r\n\r\n**Code of the SecondFragment is** \r\n\r\n    package com.example.application\r\n    \r\n    import android.os.Bundle;\r\n    import androidx.fragment.app.Fragment;\r\n    import android.view.LayoutInflater;\r\n    import android.view.View;\r\n    import android.view.ViewGroup;\r\n    \r\n    \r\n    public class SecondFragment extends Fragment {\r\n        Private AppCompatButton btnOneSecondFragment;\r\n    \r\n        @Override\r\n        public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {\r\n            View view = inflater.inflate(R.layout.fragment_second, container, false);\r\n    \r\n            btnOneSecondFragment = (AppCompatButton) view.findViewById(R.id.btn_one_second_fragment);\r\n\r\n            FirstFragment firstFrag = new FirstFragment();\r\n\r\n            btnOneSecondFragment.setOnClickListener(new View.OnClickListener() {\r\n                @Override\r\n                public void onClick(View view) {\r\n                    firstFrag.methodFirst();\r\n                }\r\n            });\r\n    \r\n    \r\n            return view;\r\n        }\r\n    }\r\n\r\n\r\nBut the following error is displaying\r\n\r\n&gt; java.lang.NullPointerException: Attempt to invoke virtual method\r\n&gt; &#39;java.lang.String android.content.Context.getPackageName()&#39; on a null\r\n&gt; object reference\r\n","title":"java.lang.String android.content.Context.getPackageName()","body":"<p>I have two file with name</p>\n<ul>\n<li>FirstFragment.java</li>\n<li>SecondFragment.java</li>\n</ul>\n<p><strong>Code of the FirstFragment is</strong></p>\n<pre><code>package com.example.application\n\nimport android.os.Bundle;\n\nimport androidx.fragment.app.Fragment;\n\nimport android.view.LayoutInflater;\nimport android.view.View;\nimport android.view.ViewGroup;\n\n\npublic class FirstFragment extends Fragment {\n    @Override\n    public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {\n        View view = inflater.inflate(R.layout.fragment_first, container, false);\n\n\n        return view;\n    }\n\n    // The method that i want to call from SecondFragment\n    public void methodFirst() {\n        Toast.makeText(getContext(), &quot;Method First Clicked&quot;, Toast.LENGTH_SHORT).show();\n    }\n\n}\n</code></pre>\n<hr />\n<p>Now I want to call the <em>methodFirst</em> function in SecondFragment. I have tried the following code on SecondFragment.</p>\n<p><strong>Code of the SecondFragment is</strong></p>\n<pre><code>package com.example.application\n\nimport android.os.Bundle;\nimport androidx.fragment.app.Fragment;\nimport android.view.LayoutInflater;\nimport android.view.View;\nimport android.view.ViewGroup;\n\n\npublic class SecondFragment extends Fragment {\n    Private AppCompatButton btnOneSecondFragment;\n\n    @Override\n    public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {\n        View view = inflater.inflate(R.layout.fragment_second, container, false);\n\n        btnOneSecondFragment = (AppCompatButton) view.findViewById(R.id.btn_one_second_fragment);\n\n        FirstFragment firstFrag = new FirstFragment();\n\n        btnOneSecondFragment.setOnClickListener(new View.OnClickListener() {\n            @Override\n            public void onClick(View view) {\n                firstFrag.methodFirst();\n            }\n        });\n\n\n        return view;\n    }\n}\n</code></pre>\n<p>But the following error is displaying</p>\n<blockquote>\n<p>java.lang.NullPointerException: Attempt to invoke virtual method\n'java.lang.String android.content.Context.getPackageName()' on a null\nobject reference</p>\n</blockquote>\n"},{"tags":["java","angular","weblogic","internal-server-error","http-error"],"answers":[{"tags":[],"owner":{"account_id":8415430,"reputation":2566,"user_id":6316044,"display_name":"Emmanuel Collin"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1643985568,"creation_date":1643981436,"answer_id":70987210,"question_id":70984388,"body_markdown":"The best way is to create a custom error page (jsp) and declare it in the web.xml file. For instance  :  \r\n`&lt;error-page&gt;  \r\n&lt;error-code&gt;500&lt;/error-code&gt;  \r\n&lt;location&gt;myCustomError500.jsp&lt;/location&gt;  \r\n&lt;/error-page&gt;`  \r\nYou can specify a jsp or an html page\r\nIn your case, create a new JSP. It must have this attribute :  \r\n`&lt;%@ page isErrorPage= &quot;true&quot; %&gt;` \r\nInside your jsp, use the built-in exception object to get the error message :   \r\n`&lt;%= exception %&gt;`  \r\nFor the stack trace :  \r\n`exception.printStackTrace(new java.io.PrintWriter(out));` \r\n","title":"how to display stack trace instead of 500 internal server error on weblogic","body":"<p>The best way is to create a custom error page (jsp) and declare it in the web.xml file. For instance  :<br />\n<code>&lt;error-page&gt;   &lt;error-code&gt;500&lt;/error-code&gt;   &lt;location&gt;myCustomError500.jsp&lt;/location&gt;   &lt;/error-page&gt;</code><br />\nYou can specify a jsp or an html page\nIn your case, create a new JSP. It must have this attribute :<br />\n<code>&lt;%@ page isErrorPage= &quot;true&quot; %&gt;</code>\nInside your jsp, use the built-in exception object to get the error message :<br />\n<code>&lt;%= exception %&gt;</code><br />\nFor the stack trace :<br />\n<code>exception.printStackTrace(new java.io.PrintWriter(out));</code></p>\n"},{"tags":[],"owner":{"account_id":1489217,"reputation":13,"user_id":1396750,"display_name":"GITOS"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1662559582,"creation_date":1662115523,"answer_id":73581405,"question_id":70984388,"body_markdown":"The solution is to configure a http filter and intercept the exception then send the message to the frontEnd.\r\nIn prod mode we cant show stack trace.\r\n\r\nin web.xml file we add this:\r\n\r\n     &lt;filter&gt;\r\n         &lt;filter-name&gt;msg&lt;/filter-name&gt;\r\n         &lt;filter-class&gt;com.filters.MSGFilter&lt;/filter-class&gt;\r\n    &lt;/filter&gt;\r\n\r\n    &lt;filter-mapping&gt;\r\n        &lt;filter-name&gt;msg&lt;/filter-name&gt;\r\n        &lt;url-pattern&gt;/*&lt;/url-pattern&gt;\r\n    &lt;/filter-mapping&gt;\r\n\r\n","title":"how to display stack trace instead of 500 internal server error on weblogic","body":"<p>The solution is to configure a http filter and intercept the exception then send the message to the frontEnd.\nIn prod mode we cant show stack trace.</p>\n<p>in web.xml file we add this:</p>\n<pre><code> &lt;filter&gt;\n     &lt;filter-name&gt;msg&lt;/filter-name&gt;\n     &lt;filter-class&gt;com.filters.MSGFilter&lt;/filter-class&gt;\n&lt;/filter&gt;\n\n&lt;filter-mapping&gt;\n    &lt;filter-name&gt;msg&lt;/filter-name&gt;\n    &lt;url-pattern&gt;/*&lt;/url-pattern&gt;\n&lt;/filter-mapping&gt;\n</code></pre>\n"}],"owner":{"account_id":1489217,"reputation":13,"user_id":1396750,"display_name":"GITOS"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1030,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":73581405,"answer_count":2,"score":0,"last_activity_date":1662559582,"creation_date":1643968472,"question_id":70984388,"body_markdown":"I was working with tomcat 7 and when an exception is thrown the stack trace is shown in the browser.\r\nBut now I&#39;m using WebLogic 12 . Occasionally, I&#39;ll get the message &quot;Error 500--Internal Server Error&quot; appear in my web browser when something has gone wrong and I have to look in the log files for the stack trace of the exception. How can I get the exception to be output directly to my browser ?\r\n\r\nFrontEnd Angular.\r\nBackEnd Java.\r\n","title":"how to display stack trace instead of 500 internal server error on weblogic","body":"<p>I was working with tomcat 7 and when an exception is thrown the stack trace is shown in the browser.\nBut now I'm using WebLogic 12 . Occasionally, I'll get the message &quot;Error 500--Internal Server Error&quot; appear in my web browser when something has gone wrong and I have to look in the log files for the stack trace of the exception. How can I get the exception to be output directly to my browser ?</p>\n<p>FrontEnd Angular.\nBackEnd Java.</p>\n"},{"tags":["java","swing","jframe","rectangles","towers-of-hanoi"],"comments":[{"owner":{"account_id":1352170,"reputation":34246,"user_id":1291492,"accept_rate":100,"display_name":"ControlAltDel"},"score":0,"creation_date":1662487682,"post_id":73624521,"comment_id":130015355,"body_markdown":"The `shape` package I put together years ago may be useful for what you are doing: https://sourceforge.net/p/tus/code/HEAD/tree/tjacobs/ui/shape/ The idea is to treat shapes of any kind as 1st class components (ie draggable, clickable, etc). You can see/run the example in AreaManager","body":"The <code>shape</code> package I put together years ago may be useful for what you are doing: <a href=\"https://sourceforge.net/p/tus/code/HEAD/tree/tjacobs/ui/shape/\" rel=\"nofollow noreferrer\">sourceforge.net/p/tus/code/HEAD/tree/tjacobs/ui/shape</a> The idea is to treat shapes of any kind as 1st class components (ie draggable, clickable, etc). You can see/run the example in AreaManager"},{"owner":{"account_id":1352170,"reputation":34246,"user_id":1291492,"accept_rate":100,"display_name":"ControlAltDel"},"score":0,"creation_date":1662487773,"post_id":73624521,"comment_id":130015388,"body_markdown":"The other thing I&#39;d recommend is looking into JOGL. It is much easier to do custom animations in OGL than in Swing","body":"The other thing I&#39;d recommend is looking into JOGL. It is much easier to do custom animations in OGL than in Swing"},{"owner":{"account_id":44852,"reputation":322224,"user_id":131872,"accept_rate":100,"display_name":"camickr"},"score":1,"creation_date":1662506079,"post_id":73624521,"comment_id":130019859,"body_markdown":"There is no need to continually create a Graphics object using the create() method. You only need to create the object once and use the same Graphics object for all further painting. Your current code is wasting resources by continually creating new instances. Also, I&#39;m not sure why you are creating new instances of all your Rectangles. A painting class should NOT create new objects, only paint the current state of the objects in your class.","body":"There is no need to continually create a Graphics object using the create() method. You only need to create the object once and use the same Graphics object for all further painting. Your current code is wasting resources by continually creating new instances. Also, I&#39;m not sure why you are creating new instances of all your Rectangles. A painting class should NOT create new objects, only paint the current state of the objects in your class."},{"owner":{"account_id":44852,"reputation":322224,"user_id":131872,"accept_rate":100,"display_name":"camickr"},"score":0,"creation_date":1662506203,"post_id":73624521,"comment_id":130019876,"body_markdown":"*how i can move a rectangle to specific coordinates.* - you change the coordinates of the Rectangle then simple paint the rectangle. So typically you might keep an ArrayList of objects you want to paint. Then in the paintComponent() method you iterate through the List and paint each object. Maybe this example will help: https://stackoverflow.com/questions/54028090/get-width-and-height-of-jpanel-outside-of-the-class/54028681#54028681. Your code should be simplier since you don&#39;t need the animation.","body":"<i>how i can move a rectangle to specific coordinates.</i> - you change the coordinates of the Rectangle then simple paint the rectangle. So typically you might keep an ArrayList of objects you want to paint. Then in the paintComponent() method you iterate through the List and paint each object. Maybe this example will help: <a href=\"https://stackoverflow.com/questions/54028090/get-width-and-height-of-jpanel-outside-of-the-class/54028681#54028681\" title=\"get width and height of jpanel outside of the class\">stackoverflow.com/questions/54028090/&hellip;</a>. Your code should be simplier since you don&#39;t need the animation."}],"owner":{"account_id":26261778,"reputation":1,"user_id":19932980,"display_name":"ByPander"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":53,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1662559373,"creation_date":1662478196,"question_id":73624521,"body_markdown":"im trying to code a GUI for &quot;Towers of Hanoi&quot; with a Java JFrame.\r\nI thought I can just make a array with all rectangles (I use rectangles to display the elements, that the player can move) and then use something like this &quot;recList[1].move()&quot;to move the rectangle on the canvas, but I don&#39;t finde a funktion, that can do this. \r\nIt would be grade, if somebody could say me how i can move a rectangle to specific coordinates.\r\n\r\nHere is my code:\r\n\r\n    import javax.swing.*;\r\n    import java.awt.*;\r\n    import java.awt.geom.Line2D;\r\n    import java.awt.geom.Rectangle2D;\r\n    \r\n    public class GUIBuilder extends JFrame {\r\n        //object classes\r\n        public static class Rectangle {\r\n            Rectangle2D.Double Rectangle;\r\n    \r\n            public Rectangle(double x, double y, double w, double h) {\r\n                Rectangle = new Rectangle2D.Double(x, y, w, h);\r\n            }\r\n    \r\n            public void draw(Graphics2D g) {\r\n                g.draw(Rectangle);\r\n            }\r\n        }\r\n    \r\n        public static class Stick {\r\n            Line2D.Double stick;\r\n            public Stick(double x1, double y1, double x2, double y2) {\r\n                this.stick = new Line2D.Double(x1, y1, x2, y2);\r\n            }\r\n    \r\n            public void draw(Graphics2D g) {\r\n                g.draw(stick);\r\n            }\r\n        }\r\n    \r\n        //draw\r\n        static class DrawPane extends JPanel {\r\n            public void paintComponent(Graphics g) {\r\n                double s = 3; // s = amount of sticks\r\n                double n = 5; // n = amount of elements\r\n                //base\r\n                Rectangle rectangle = new Rectangle(300, 700, (int) s * 100 + 100, 50);\r\n                rectangle.draw((Graphics2D)g.create());\r\n                //s sticks\r\n                for (int i=0; i&lt;s; i++) {\r\n                    Stick stick = new Stick(400 + 100 * i, 700 - (25 * (n + 1)), 400 + 100 * i, 700);\r\n                    stick.draw((Graphics2D)g.create());\r\n                }\r\n                //n elements\r\n                Rectangle[] recList = new Rectangle[(int)n]; //declaration a list for the rectangles\r\n                for (int i=0;i&lt;n;i++) {\r\n                    double w = 90/n*(n-i);\r\n                    double x = 355+90/n/2*i;\r\n                    double y = 675-25*i;\r\n                    double h = 25;\r\n                    recList[i] = new Rectangle(x, y, w, h);\r\n                    recList[i].draw((Graphics2D)g.create());\r\n                }\r\n            }\r\n        }\r\n        //guibuilder\r\n        public GUIBuilder() {\r\n            JFrame frame = new JFrame(&quot;Towers of Hanoi by ByPander&quot;);\r\n            frame.setContentPane(new DrawPane());\r\n            frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);\r\n            frame.setSize(800, 600);\r\n            frame.setVisible(true);\r\n        }\r\n        //calling the guibuilder\r\n        public static void main(String[] args){\r\n            //start the Guibuilder\r\n            new GUIBuilder();\r\n        }\r\n    }","title":"Move a specific rectangle in a Jframe","body":"<p>im trying to code a GUI for &quot;Towers of Hanoi&quot; with a Java JFrame.\nI thought I can just make a array with all rectangles (I use rectangles to display the elements, that the player can move) and then use something like this &quot;recList[1].move()&quot;to move the rectangle on the canvas, but I don't finde a funktion, that can do this.\nIt would be grade, if somebody could say me how i can move a rectangle to specific coordinates.</p>\n<p>Here is my code:</p>\n<pre><code>import javax.swing.*;\nimport java.awt.*;\nimport java.awt.geom.Line2D;\nimport java.awt.geom.Rectangle2D;\n\npublic class GUIBuilder extends JFrame {\n    //object classes\n    public static class Rectangle {\n        Rectangle2D.Double Rectangle;\n\n        public Rectangle(double x, double y, double w, double h) {\n            Rectangle = new Rectangle2D.Double(x, y, w, h);\n        }\n\n        public void draw(Graphics2D g) {\n            g.draw(Rectangle);\n        }\n    }\n\n    public static class Stick {\n        Line2D.Double stick;\n        public Stick(double x1, double y1, double x2, double y2) {\n            this.stick = new Line2D.Double(x1, y1, x2, y2);\n        }\n\n        public void draw(Graphics2D g) {\n            g.draw(stick);\n        }\n    }\n\n    //draw\n    static class DrawPane extends JPanel {\n        public void paintComponent(Graphics g) {\n            double s = 3; // s = amount of sticks\n            double n = 5; // n = amount of elements\n            //base\n            Rectangle rectangle = new Rectangle(300, 700, (int) s * 100 + 100, 50);\n            rectangle.draw((Graphics2D)g.create());\n            //s sticks\n            for (int i=0; i&lt;s; i++) {\n                Stick stick = new Stick(400 + 100 * i, 700 - (25 * (n + 1)), 400 + 100 * i, 700);\n                stick.draw((Graphics2D)g.create());\n            }\n            //n elements\n            Rectangle[] recList = new Rectangle[(int)n]; //declaration a list for the rectangles\n            for (int i=0;i&lt;n;i++) {\n                double w = 90/n*(n-i);\n                double x = 355+90/n/2*i;\n                double y = 675-25*i;\n                double h = 25;\n                recList[i] = new Rectangle(x, y, w, h);\n                recList[i].draw((Graphics2D)g.create());\n            }\n        }\n    }\n    //guibuilder\n    public GUIBuilder() {\n        JFrame frame = new JFrame(&quot;Towers of Hanoi by ByPander&quot;);\n        frame.setContentPane(new DrawPane());\n        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);\n        frame.setSize(800, 600);\n        frame.setVisible(true);\n    }\n    //calling the guibuilder\n    public static void main(String[] args){\n        //start the Guibuilder\n        new GUIBuilder();\n    }\n}\n</code></pre>\n"},{"tags":["java","spring-boot","testing","mocking","mockmvc"],"answers":[{"tags":[],"owner":{"account_id":7739148,"reputation":3345,"user_id":5859654,"display_name":"Nemanja"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1662559087,"creation_date":1662556303,"answer_id":73636157,"question_id":73635868,"body_markdown":"Take a look at your function:\r\n \r\n```kotlin\r\noverride fun deleteBook(id: Int) {\r\n    libraryRepository.findById(id).let { //1\r\n        if(it == null){\r\n            throw NotFoundException(&quot;Book with the given id not found&quot;)\r\n        }\r\n        libraryRepository.delete(it) //2\r\n    }\r\n}\r\n```\r\n\r\nSince you wrote:\r\n\r\n```kotlin\r\n`when`(libraryRepository.findById(1)).thenReturn(library)\r\n```\r\n\r\nmethod `findById` will return library instance, and then that instance will be passed to `delete`() method of `libraryRepository`. Since you didn&#39;t specify what should happen when this method is invoked, this line:\r\n\r\n```kotlin\r\nlibraryRepository.delete(it)\r\n```\r\n\r\nWill return `null`.\r\n\r\nFinally, you wrote this line of code in your test:\r\n\r\n```kotlin\r\nverify(libraryRepository).delete(library)\r\n```\r\n\r\nAnd since `delete` method of `libraryRepository` has been invoked, your test will pass.\r\n\r\n","title":"Why when I test ``` repository.delete()``` we do not need imitate repository.delete()?","body":"<p>Take a look at your function:</p>\n<pre class=\"lang-kotlin prettyprint-override\"><code>override fun deleteBook(id: Int) {\n    libraryRepository.findById(id).let { //1\n        if(it == null){\n            throw NotFoundException(&quot;Book with the given id not found&quot;)\n        }\n        libraryRepository.delete(it) //2\n    }\n}\n</code></pre>\n<p>Since you wrote:</p>\n<pre class=\"lang-kotlin prettyprint-override\"><code>`when`(libraryRepository.findById(1)).thenReturn(library)\n</code></pre>\n<p>method <code>findById</code> will return library instance, and then that instance will be passed to <code>delete</code>() method of <code>libraryRepository</code>. Since you didn't specify what should happen when this method is invoked, this line:</p>\n<pre class=\"lang-kotlin prettyprint-override\"><code>libraryRepository.delete(it)\n</code></pre>\n<p>Will return <code>null</code>.</p>\n<p>Finally, you wrote this line of code in your test:</p>\n<pre class=\"lang-kotlin prettyprint-override\"><code>verify(libraryRepository).delete(library)\n</code></pre>\n<p>And since <code>delete</code> method of <code>libraryRepository</code> has been invoked, your test will pass.</p>\n"}],"owner":{"account_id":25769257,"reputation":17,"user_id":19518389,"display_name":"Johny"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":63,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1662559087,"creation_date":1662555205,"question_id":73635868,"body_markdown":"I have the following code: \r\n```kotlin\r\n@DeleteMapping(value = [&quot;/library/books/{id}&quot;])\r\nfun deleteBook( @PathVariable(&quot;id&quot;) id: kotlin.Int): ResponseEntity&lt;Unit&gt; {\r\n    return ResponseEntity(service.deleteBook(id), HttpStatus.valueOf(200))\r\n}\r\n\r\noverride fun deleteBook(id: Int) {\r\n    libraryRepository.findById(id).let {\r\n        if(it == null){\r\n            throw NotFoundException(&quot;Book with the given id not found&quot;)\r\n        }\r\n        libraryRepository.delete(it)\r\n    }\r\n}\r\n\r\n@Test\r\nfun `delete book and return 200`(){\r\n    val library = Library(name = &quot;testName&quot;, author = &quot;testAuthor&quot;)\r\n    `when`(libraryRepository.findById(1)).thenReturn(library)\r\n    mvc.perform(MockMvcRequestBuilders.delete(&quot;/library/books/1&quot;))\r\n            .andExpect(MockMvcResultMatchers.status().isOk)\r\n    verify(libraryRepository).delete(library)\r\n}    \r\n```\r\n\r\nHere I am trying to write test, I suppose that it should fail, but it passed. I don&#39;t understand why my test is working, although I do not imitate ```when`(libraryRepository.delete(...))```.","title":"Why when I test ``` repository.delete()``` we do not need imitate repository.delete()?","body":"<p>I have the following code:</p>\n<pre class=\"lang-kotlin prettyprint-override\"><code>@DeleteMapping(value = [&quot;/library/books/{id}&quot;])\nfun deleteBook( @PathVariable(&quot;id&quot;) id: kotlin.Int): ResponseEntity&lt;Unit&gt; {\n    return ResponseEntity(service.deleteBook(id), HttpStatus.valueOf(200))\n}\n\noverride fun deleteBook(id: Int) {\n    libraryRepository.findById(id).let {\n        if(it == null){\n            throw NotFoundException(&quot;Book with the given id not found&quot;)\n        }\n        libraryRepository.delete(it)\n    }\n}\n\n@Test\nfun `delete book and return 200`(){\n    val library = Library(name = &quot;testName&quot;, author = &quot;testAuthor&quot;)\n    `when`(libraryRepository.findById(1)).thenReturn(library)\n    mvc.perform(MockMvcRequestBuilders.delete(&quot;/library/books/1&quot;))\n            .andExpect(MockMvcResultMatchers.status().isOk)\n    verify(libraryRepository).delete(library)\n}    \n</code></pre>\n<p>Here I am trying to write test, I suppose that it should fail, but it passed. I don't understand why my test is working, although I do not imitate <code>when`(libraryRepository.delete(...))</code>.</p>\n"},{"tags":["java","string","random","arraylist","pass-by-reference"],"comments":[{"owner":{"display_name":"user6073886"},"score":3,"creation_date":1662556159,"post_id":73636077,"comment_id":130032956,"body_markdown":"Your method `getChosenWords` returns the locale arraylist you create. Use that and call that method to get the List: `ArrayList&lt;String&gt; chosenWords = getChosenWords(length);`","body":"Your method <code>getChosenWords</code> returns the locale arraylist you create. Use that and call that method to get the List: <code>ArrayList&lt;String&gt; chosenWords = getChosenWords(length);</code>"},{"owner":{"account_id":2360785,"reputation":11123,"user_id":2067492,"display_name":"matt"},"score":1,"creation_date":1662556354,"post_id":73636077,"comment_id":130033036,"body_markdown":"Why does `getRandom` take an `int` parameter? You don&#39;t use it anywhere. Are you sure you have the method parameters correct for both of your methods?","body":"Why does <code>getRandom</code> take an <code>int</code> parameter? You don&#39;t use it anywhere. Are you sure you have the method parameters correct for both of your methods?"},{"owner":{"account_id":26235738,"reputation":1,"user_id":19910914,"display_name":"ASwainy"},"score":0,"creation_date":1662556482,"post_id":73636077,"comment_id":130033084,"body_markdown":"@OHGODSPIDERS I tried that but kept putting in (int length) at the end, I didn&#39;t realise I don&#39;t put the type in.  Thank you. Very grateful.","body":"@OHGODSPIDERS I tried that but kept putting in (int length) at the end, I didn&#39;t realise I don&#39;t put the type in.  Thank you. Very grateful."},{"owner":{"account_id":6520,"reputation":10523,"user_id":11002,"accept_rate":75,"display_name":"tgdavies"},"score":0,"creation_date":1662556981,"post_id":73636077,"comment_id":130033302,"body_markdown":"Please add the unit test to your question.","body":"Please add the unit test to your question."},{"owner":{"account_id":26235738,"reputation":1,"user_id":19910914,"display_name":"ASwainy"},"score":0,"creation_date":1662559117,"post_id":73636077,"comment_id":130034221,"body_markdown":"@matt the int parameter is being used in my solution provided here.\nI can&#39;t change the parameters because the unit test relies on it.","body":"@matt the int parameter is being used in my solution provided here. I can&#39;t change the parameters because the unit test relies on it."}],"answers":[{"tags":[],"owner":{"account_id":18147221,"reputation":1,"user_id":13200425,"display_name":"Riya"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1662556694,"creation_date":1662556694,"answer_id":73636246,"question_id":73636077,"body_markdown":"Instead of receiving `length` as a parameter in the `getRandom()` function, take an ArrayList. Pass the arraylist `chosenWords` to the `getRandom()` function and return the value received from the `getRandom()` function.\r\n\r\nHope that helps.","title":"How do I pass an ArrayList&lt;String&gt; from one method to another in Java. Variable not initialised error","body":"<p>Instead of receiving <code>length</code> as a parameter in the <code>getRandom()</code> function, take an ArrayList. Pass the arraylist <code>chosenWords</code> to the <code>getRandom()</code> function and return the value received from the <code>getRandom()</code> function.</p>\n<p>Hope that helps.</p>\n"},{"tags":[],"owner":{"account_id":2360785,"reputation":11123,"user_id":2067492,"display_name":"matt"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1662558328,"creation_date":1662558328,"answer_id":73636610,"question_id":73636077,"body_markdown":"The obvious solution, if the OP hasn&#39;t used it yet?\r\n\r\n```\r\npublic String getRandom(int length) {\r\n    ArrayList&lt;String&gt; chosenWords = getChosenWords(length);\r\n    Random random = new Random();\r\n    int randomIndex = random.nextInt(chosenWords.size());\r\n    return chosenWords.get(randomIndex);        \r\n}\r\n```\r\n\r\nThat way chosenWords will be initialized.\r\n","title":"How do I pass an ArrayList&lt;String&gt; from one method to another in Java. Variable not initialised error","body":"<p>The obvious solution, if the OP hasn't used it yet?</p>\n<pre><code>public String getRandom(int length) {\n    ArrayList&lt;String&gt; chosenWords = getChosenWords(length);\n    Random random = new Random();\n    int randomIndex = random.nextInt(chosenWords.size());\n    return chosenWords.get(randomIndex);        \n}\n</code></pre>\n<p>That way chosenWords will be initialized.</p>\n"}],"owner":{"account_id":26235738,"reputation":1,"user_id":19910914,"display_name":"ASwainy"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":57,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":2,"score":-1,"last_activity_date":1662558939,"creation_date":1662555964,"question_id":73636077,"body_markdown":"New to Java coding, please bear with me.\r\nI&#39;m trying to pass my ArrayList chosenWords held in my method getChosenWords(int length) to my method getRandom(int length). I need the ArrayList so I can chose a random index and return a random string.\r\n\r\nNote, it&#39;s not declared in the Class fields and **I am not able to change the parameters of my methods**. I have to find another way to pass the `ArrayList` in but I&#39;m unsure how to. The unit test uses these set parameters and I can&#39;t change parameters or the fields as other classes rely on them staying the same.\r\n\r\nI&#39;m pretty sure this is the line that needs changing `ArrayList&lt;String&gt; chosenWords;`\r\nand currently I have an error *variable not initialised* on this line. `random.nextInt(chosenWords.size());` \r\n\r\nAny suggestions?\r\n\r\n\r\n**Method1**\r\n```\r\n// Takes strings in ArrayList words and stores strings with char int length to ArrayList chosenWords\r\n\r\npublic ArrayList&lt;String&gt; getChosenWords(int length) {\r\n       ArrayList&lt;String&gt; chosenWords = new ArrayList&lt;&gt;(); \r\n       \r\n       for(String word1 : words) {\r\n            if(word1.length() == length) {\r\n                 chosenWords.add(word1);\r\n            }\r\n       }\r\n       return chosenWords;  \r\n}\r\n```\r\n\r\n**Method2**\r\n```   \r\n//Returns a randomly selected string from ArrayList chosenWords\r\n\r\npublic String getRandom(int length) {\r\n    ArrayList&lt;String&gt; chosenWords;\r\n    Random random = new Random();\r\n    int randomIndex = random.nextInt(chosenWords.size());\r\n    return chosenWords.get(randomIndex);        \r\n}\r\n```","title":"How do I pass an ArrayList&lt;String&gt; from one method to another in Java. Variable not initialised error","body":"<p>New to Java coding, please bear with me.\nI'm trying to pass my ArrayList chosenWords held in my method getChosenWords(int length) to my method getRandom(int length). I need the ArrayList so I can chose a random index and return a random string.</p>\n<p>Note, it's not declared in the Class fields and <strong>I am not able to change the parameters of my methods</strong>. I have to find another way to pass the <code>ArrayList</code> in but I'm unsure how to. The unit test uses these set parameters and I can't change parameters or the fields as other classes rely on them staying the same.</p>\n<p>I'm pretty sure this is the line that needs changing <code>ArrayList&lt;String&gt; chosenWords;</code>\nand currently I have an error <em>variable not initialised</em> on this line. <code>random.nextInt(chosenWords.size());</code></p>\n<p>Any suggestions?</p>\n<p><strong>Method1</strong></p>\n<pre><code>// Takes strings in ArrayList words and stores strings with char int length to ArrayList chosenWords\n\npublic ArrayList&lt;String&gt; getChosenWords(int length) {\n       ArrayList&lt;String&gt; chosenWords = new ArrayList&lt;&gt;(); \n       \n       for(String word1 : words) {\n            if(word1.length() == length) {\n                 chosenWords.add(word1);\n            }\n       }\n       return chosenWords;  \n}\n</code></pre>\n<p><strong>Method2</strong></p>\n<pre><code>//Returns a randomly selected string from ArrayList chosenWords\n\npublic String getRandom(int length) {\n    ArrayList&lt;String&gt; chosenWords;\n    Random random = new Random();\n    int randomIndex = random.nextInt(chosenWords.size());\n    return chosenWords.get(randomIndex);        \n}\n</code></pre>\n"},{"tags":["java","class","option-type"],"comments":[{"owner":{"account_id":134022,"reputation":717183,"user_id":335858,"accept_rate":81,"display_name":"Sergey Kalinichenko"},"score":0,"creation_date":1332361846,"post_id":9812246,"comment_id":12498516,"body_markdown":"Java does not have `Nullable&lt;T&gt;`. Unlike C# that has value types and reference types, adding `Nullable&lt;T&gt;` to Java would not produce a desired effect, at least if added by itself.","body":"Java does not have <code>Nullable&lt;T&gt;</code>. Unlike C# that has value types and reference types, adding <code>Nullable&lt;T&gt;</code> to Java would not produce a desired effect, at least if added by itself."},{"owner":{"display_name":"user166390"},"score":0,"creation_date":1332371192,"post_id":9812246,"comment_id":12501509,"body_markdown":"@dasblinkenlight The primitives in Java *are* value types... just a fixed restricted set of such with no common base :( One of my biggest gripes about `Nullable&lt;T&gt;` is that it is not like `Option`: I was disappointed to see the construct not taken further (or supported with a reference type version) along with some more useful C# language patterns. (Why do we still have to deal with NPEs in 2012? :-/)","body":"@dasblinkenlight The primitives in Java <i>are</i> value types... just a fixed restricted set of such with no common base :( One of my biggest gripes about <code>Nullable&lt;T&gt;</code> is that it is not like <code>Option</code>: I was disappointed to see the construct not taken further (or supported with a reference type version) along with some more useful C# language patterns. (Why do we still have to deal with NPEs in 2012? :-/)"}],"answers":[{"tags":[],"owner":{"account_id":52616,"reputation":1042915,"user_id":157247,"accept_rate":91,"display_name":"T.J. Crowder"},"down_vote_count":1,"up_vote_count":6,"is_accepted":false,"score":5,"last_activity_date":1332362461,"creation_date":1332361487,"answer_id":9812273,"question_id":9812246,"body_markdown":"In Java, the usual way you&#39;d do that would be with `null` and the [`Integer`][1], [`Long`][2], etc. classes (which are the reference type equivalents of the `int`, `long`, etc. primitive types; being reference types, the references can be `null`). If you have a C# background, `Integer` in Java (with autoboxing) is kind of like `int?` in C#.\r\n\r\nFor instance, [`List#indexOf`][3] has this signature:\r\n\r\n    int indexOf(Object o)\r\n\r\n...and does the `-1` thing you&#39;re talking about. If you were designing `List` and preferred `null`, you might have defined it as:\r\n\r\n    Integer indexOf(Object o)\r\n\r\n...and returned `null` rather than `-1` in the &quot;not found&quot; case.\r\n\r\nThere are these reference type versions of all of the primitive types in Java, and of course, all other types are already reference types so you already have the `null` option.\r\n\r\n  [1]: http://docs.oracle.com/javase/7/docs/api/java/lang/Integer.html\r\n  [2]: http://docs.oracle.com/javase/7/docs/api/java/lang/Long.html\r\n  [3]: http://docs.oracle.com/javase/7/docs/api/java/util/List.html#indexOf%28java.lang.Object%29","title":"Is there standard Option or Nullable class in Java?","body":"<p>In Java, the usual way you'd do that would be with <code>null</code> and the <a href=\"http://docs.oracle.com/javase/7/docs/api/java/lang/Integer.html\" rel=\"nofollow\"><code>Integer</code></a>, <a href=\"http://docs.oracle.com/javase/7/docs/api/java/lang/Long.html\" rel=\"nofollow\"><code>Long</code></a>, etc. classes (which are the reference type equivalents of the <code>int</code>, <code>long</code>, etc. primitive types; being reference types, the references can be <code>null</code>). If you have a C# background, <code>Integer</code> in Java (with autoboxing) is kind of like <code>int?</code> in C#.</p>\n\n<p>For instance, <a href=\"http://docs.oracle.com/javase/7/docs/api/java/util/List.html#indexOf%28java.lang.Object%29\" rel=\"nofollow\"><code>List#indexOf</code></a> has this signature:</p>\n\n<pre><code>int indexOf(Object o)\n</code></pre>\n\n<p>...and does the <code>-1</code> thing you're talking about. If you were designing <code>List</code> and preferred <code>null</code>, you might have defined it as:</p>\n\n<pre><code>Integer indexOf(Object o)\n</code></pre>\n\n<p>...and returned <code>null</code> rather than <code>-1</code> in the \"not found\" case.</p>\n\n<p>There are these reference type versions of all of the primitive types in Java, and of course, all other types are already reference types so you already have the <code>null</code> option.</p>\n"},{"tags":[],"owner":{"display_name":"user166390"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1332371108,"creation_date":1332361721,"answer_id":9812319,"question_id":9812246,"body_markdown":"No. *There is no such construct standard in Java.**\r\n\r\nThere is [Option in FunctionalJava](http://functionaljava.googlecode.com/svn/artifacts/3.0/javadoc/fj/data/Option.html) or, as yshavit notes, [Optional in Guava](http://docs.guava-libraries.googlecode.com/git/javadoc/com/google/common/base/Optional.html)... Or, you could create your own type... but without proper language support... well, let&#39;s just say I avoid Java ;-)\r\n\r\nHappy coding.\r\n\r\n----\r\n\r\n*I disagree that `Integer` or `Double` fulfill this role as they only wrap the fixed set of primitives and are not a generic container. They can be considered to cover the case of `Nullable`, simply due to Java&#39;s fixed set of value types and C#&#39;s limitation of `Nullable` (only works on ValueTypes), but they do *not* replace a real `Option` type.\r\n\r\nDo note however, that the `Option` from FJ or Guava *still uses* (it must, actually) the wrapper types (e.g. `Integer`) for handling primitives. Also note that `Nullable` in C# is not the same as `Option` in Scala due to the aforementioned restriction.","title":"Is there standard Option or Nullable class in Java?","body":"<p>No. <em>There is no such construct standard in Java.</em>*</p>\n\n<p>There is <a href=\"http://functionaljava.googlecode.com/svn/artifacts/3.0/javadoc/fj/data/Option.html\" rel=\"nofollow\">Option in FunctionalJava</a> or, as yshavit notes, <a href=\"http://docs.guava-libraries.googlecode.com/git/javadoc/com/google/common/base/Optional.html\" rel=\"nofollow\">Optional in Guava</a>... Or, you could create your own type... but without proper language support... well, let's just say I avoid Java ;-)</p>\n\n<p>Happy coding.</p>\n\n<hr>\n\n<p>*I disagree that <code>Integer</code> or <code>Double</code> fulfill this role as they only wrap the fixed set of primitives and are not a generic container. They can be considered to cover the case of <code>Nullable</code>, simply due to Java's fixed set of value types and C#'s limitation of <code>Nullable</code> (only works on ValueTypes), but they do <em>not</em> replace a real <code>Option</code> type.</p>\n\n<p>Do note however, that the <code>Option</code> from FJ or Guava <em>still uses</em> (it must, actually) the wrapper types (e.g. <code>Integer</code>) for handling primitives. Also note that <code>Nullable</code> in C# is not the same as <code>Option</code> in Scala due to the aforementioned restriction.</p>\n"},{"tags":[],"owner":{"account_id":99690,"reputation":14845,"user_id":269126,"accept_rate":95,"display_name":"Lumi"},"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1401119467,"creation_date":1401119467,"answer_id":23873769,"question_id":9812246,"body_markdown":"You asked more than two years ago, but two months ago, Java SE 8 has introduced [`java.util.Optional&lt;T&gt;`][1]. For an intro, see this Technet article:\r\n\r\n[Tired of Null Pointer Exceptions? Consider Using Java SE 8&#39;s Optional!][2]\r\n\r\n\r\n  [1]: http://docs.oracle.com/javase/8/docs/api/java/util/Optional.html\r\n  [2]: http://www.oracle.com/technetwork/articles/java/java8-optional-2175753.html","title":"Is there standard Option or Nullable class in Java?","body":"<p>You asked more than two years ago, but two months ago, Java SE 8 has introduced <a href=\"http://docs.oracle.com/javase/8/docs/api/java/util/Optional.html\" rel=\"noreferrer\"><code>java.util.Optional&lt;T&gt;</code></a>. For an intro, see this Technet article:</p>\n\n<p><a href=\"http://www.oracle.com/technetwork/articles/java/java8-optional-2175753.html\" rel=\"noreferrer\">Tired of Null Pointer Exceptions? Consider Using Java SE 8's Optional!</a></p>\n"}],"owner":{"account_id":72937,"reputation":17125,"user_id":210342,"accept_rate":82,"display_name":"greenoldman"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":4743,"favorite_count":0,"down_vote_count":0,"up_vote_count":6,"accepted_answer_id":9812319,"answer_count":3,"score":6,"last_activity_date":1662558813,"creation_date":1332361320,"question_id":9812246,"body_markdown":"`Nullable` (C#) has a bit different meaning, but anyway both `Option` (Scala) and `Nullable` can be used to express the notion of &quot;value or nothing&quot;.\r\n\r\nFor example in case when you would like to find substring in a string -- instead of obscure -1 as Int, it would be better to return Option[Int] (in Scala it would be `None` for nothing).\r\n\r\n**Is there such class in standard Java? If yes, what it is?**\r\n\r\n*Please note, I am not asking how to write such class.*\r\n\r\n## Update\r\n\r\nAs I wrote, `Nullable` has different meaning. Consider this:\r\n\r\nJust imagine Map[K,V], and method get which semantics is to get value of key, if there is such key, or nothing when there is no such key. \r\n\r\nYou cannot use null for two reasons, you cannot use any concrete class for one reason. Option[V] is the way to go. \r\n","title":"Is there standard Option or Nullable class in Java?","body":"<p><code>Nullable</code> (C#) has a bit different meaning, but anyway both <code>Option</code> (Scala) and <code>Nullable</code> can be used to express the notion of \"value or nothing\".</p>\n\n<p>For example in case when you would like to find substring in a string -- instead of obscure -1 as Int, it would be better to return Option[Int] (in Scala it would be <code>None</code> for nothing).</p>\n\n<p><strong>Is there such class in standard Java? If yes, what it is?</strong></p>\n\n<p><em>Please note, I am not asking how to write such class.</em></p>\n\n<h2>Update</h2>\n\n<p>As I wrote, <code>Nullable</code> has different meaning. Consider this:</p>\n\n<p>Just imagine Map[K,V], and method get which semantics is to get value of key, if there is such key, or nothing when there is no such key. </p>\n\n<p>You cannot use null for two reasons, you cannot use any concrete class for one reason. Option[V] is the way to go. </p>\n"},{"tags":["java","spring-boot","apache-kafka","spring-kafka"],"answers":[{"tags":[],"owner":{"account_id":2671330,"reputation":183376,"user_id":2308683,"accept_rate":90,"display_name":"OneCricketeer"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1662558432,"creation_date":1662558432,"answer_id":73636634,"question_id":73633997,"body_markdown":"On your kafka server properties, ensure you&#39;ve defined the advertised listeners on the correct port \r\n\r\n```\r\nlisteners=SASL_SSL://:9094\r\nadvertised.listeners=SASL_SSL://localhost:9094\r\n```\r\n\r\nhttps://www.confluent.io/blog/kafka-listeners-explained/","title":"Reuse AdminClient Bean in Kafka Spring Boot","body":"<p>On your kafka server properties, ensure you've defined the advertised listeners on the correct port</p>\n<pre><code>listeners=SASL_SSL://:9094\nadvertised.listeners=SASL_SSL://localhost:9094\n</code></pre>\n<p><a href=\"https://www.confluent.io/blog/kafka-listeners-explained/\" rel=\"nofollow noreferrer\">https://www.confluent.io/blog/kafka-listeners-explained/</a></p>\n"}],"owner":{"account_id":25505651,"reputation":49,"user_id":19298154,"display_name":"utkarsh saraf"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":2053,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":1,"score":0,"last_activity_date":1662558432,"creation_date":1662546777,"question_id":73633997,"body_markdown":"To connect to kafka with admin client on port ```9094```, i have following two main classes with application.yml as follows:\r\n\r\n```\r\n@EnableKafka\r\n@SpringBootApplication\r\n@ConfigurationPropertiesScan\r\npublic class KafkaSpringApiApplication {\r\n\tpublic static void main(String[] args) {\r\n\t\tSpringApplication.run(KafkaSpringApiApplication.class, args);\r\n\t}\r\n\t@Bean\r\n\tpublic RestTemplate restTemplate() {\r\n\t\treturn new RestTemplate();\r\n\t}\r\n\r\n\r\n}\r\n```\r\n```\r\npackage org.kafka.config;\r\n\r\nimport org.apache.kafka.clients.admin.AdminClient;\r\nimport org.apache.kafka.clients.admin.AdminClientConfig;\r\nimport org.kafka.reader.Kafka;\r\nimport org.springframework.beans.factory.annotation.Autowired;\r\nimport org.springframework.context.annotation.Bean;\r\nimport org.springframework.kafka.annotation.EnableKafka;\r\nimport org.springframework.kafka.core.KafkaAdmin;\r\nimport org.springframework.stereotype.Component;\r\n\r\nimport java.util.HashMap;\r\nimport java.util.Map;\r\n\r\n@Component\r\npublic class AdminConfigurer {\r\n\r\n\r\n    @Autowired\r\n    private Kafka kafkaConfig;\r\n\r\n\r\n\r\n    @Bean\r\n    public Map&lt;String, Object&gt; kafkaAdminProperties() {\r\n        final Map&lt;String, Object&gt; configs = new HashMap&lt;&gt;();\r\n        configs.put(AdminClientConfig.BOOTSTRAP_SERVERS_CONFIG, kafkaConfig.getBootstrapServers());\r\n        if(kafkaConfig.getProperties().getSasl().getEnabled() &amp;&amp; kafkaConfig.getSsl().getEnabled()) {\r\n            configs.put(&quot;sasl.mechanism&quot;, kafkaConfig.getProperties().getSasl().getMechanism());\r\n            configs.put(&quot;security.protocol&quot;, kafkaConfig.getProperties().getSasl().getSecurity().getProtocol());\r\n            configs.put(&quot;ssl.keystore.location&quot;, kafkaConfig.getSsl().getKeystoreLocation());\r\n            configs.put(&quot;ssl.keystore.password&quot;, kafkaConfig.getSsl().getKeystorePassword());\r\n            configs.put(&quot;ssl.truststore.location&quot;, kafkaConfig.getSsl().getTruststoreLocation());\r\n            configs.put(&quot;ssl.truststore.password&quot;, kafkaConfig.getSsl().getTruststorePassword());\r\n            configs.put(&quot;sasl.jaas.config&quot;, String.format(kafkaConfig.getJaasTemplate(),\r\n                    kafkaConfig.getProperties().getSasl().getJaas().getConfig().getUsername(),\r\n                    kafkaConfig.getProperties().getSasl().getJaas().getConfig().getPassword()));\r\n            configs.put(&quot;ssl.endpoint.identification.algorithm&quot;, &quot;&quot;);\r\n        }\r\n        return configs;\r\n    }\r\n\r\n\r\n    @Bean\r\n    public AdminClient getClient() {\r\n        return AdminClient.create(kafkaAdminProperties());\r\n    }\r\n\r\n}\r\n```\r\n\r\napplication.yml\r\n\r\n```\r\nkafka:\r\n  bootstrap-servers: localhost:9094\r\n  properties:\r\n    sasl:\r\n      enabled: false\r\n      jaas:\r\n        config:\r\n          username: XXX\r\n          password: XXX\r\n      mechanism: SCRAM-SHA-256\r\n      security:\r\n        protocol: SASL_SSL\r\n  ssl:\r\n    enabled: false\r\n    truststore-location: /opt/app/secrets/kafka.consumer.truststore.jks\r\n    truststore-password: XXX\r\n    keystore-location: /opt/app/secrets/kafka.consumer.keystore.jks\r\n    keystore-password: XXX\r\n    key-password: XXX\r\n```\r\n\r\nService class\r\n\r\n```\r\n@Service\r\npublic class TopicService {\r\n\r\n  private static final Logger LOG = LoggerFactory.getLogger(TopicService.class);\r\n  @Autowired\r\n  private AdminClient adminClient;\r\n\r\npublic void createTopic(Topic topic) throws ExecutionException, InterruptedException {\r\n    adminClient\r\n            .createTopics(Collections.singletonList(ServiceHelper.fromTopic(topic)))\r\n            .values()\r\n            .get(topic.getName())\r\n            .get();\r\n  }\r\n}\r\n```\r\n\r\nThe issue i have seen in logs is \r\n**initially it uses adminclient  config and properly connect to kafka on port 9094 but when I try to create topics, it is using port 9092 rather**\r\n\r\nLogs\r\n\r\n```\r\n  .   ____          _            __ _ _\r\n /\\\\ / ___&#39;_ __ _ _(_)_ __  __ _ \\ \\ \\ \\\r\n( ( )\\___ | &#39;_ | &#39;_| | &#39;_ \\/ _` | \\ \\ \\ \\\r\n \\\\/  ___)| |_)| | | | | || (_| |  ) ) ) )\r\n  &#39;  |____| .__|_| |_|_| |_\\__, | / / / /\r\n =========|_|==============|___/=/_/_/_/\r\n :: Spring Boot ::                (v2.7.1)\r\n\r\n2022-09-07 15:40:20.144  INFO 71648 --- [  restartedMain] org.kafka.KafkaSpringApiApplication      : Starting KafkaSpringApiApplication using Java 18.0.2.1 on DESKTOP-JT3FAGV with PID 71648 (C:\\Users\\utkarsh\\Desktop\\gitprojects\\kafka-spring-api\\target\\classes started by utkarsh in C:\\Users\\utkarsh\\Desktop\\gitprojects\\kafka-spring-api)\r\n2022-09-07 15:40:20.145  INFO 71648 --- [  restartedMain] org.kafka.KafkaSpringApiApplication      : No active profile set, falling back to 1 default profile: &quot;default&quot;\r\n2022-09-07 15:40:20.245  INFO 71648 --- [  restartedMain] .e.DevToolsPropertyDefaultsPostProcessor : Devtools property defaults active! Set &#39;spring.devtools.add-properties&#39; to &#39;false&#39; to disable\r\n2022-09-07 15:40:20.245  INFO 71648 --- [  restartedMain] .e.DevToolsPropertyDefaultsPostProcessor : For additional web related logging consider setting the &#39;logging.level.web&#39; property to &#39;DEBUG&#39;\r\n2022-09-07 15:40:21.593  INFO 71648 --- [  restartedMain] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.\r\n2022-09-07 15:40:21.675  INFO 71648 --- [  restartedMain] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 71 ms. Found 1 JPA repository interfaces.\r\n2022-09-07 15:40:22.660  INFO 71648 --- [  restartedMain] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 8080 (http)\r\n2022-09-07 15:40:22.673  INFO 71648 --- [  restartedMain] o.apache.catalina.core.StandardService   : Starting service [Tomcat]\r\n2022-09-07 15:40:22.674  INFO 71648 --- [  restartedMain] org.apache.catalina.core.StandardEngine  : Starting Servlet engine: [Apache Tomcat/9.0.64]\r\n2022-09-07 15:40:22.860  INFO 71648 --- [  restartedMain] o.a.c.c.C.[Tomcat].[localhost].[/kafka]  : Initializing Spring embedded WebApplicationContext\r\n2022-09-07 15:40:22.860  INFO 71648 --- [  restartedMain] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 2613 ms\r\n2022-09-07 15:40:23.359  INFO 71648 --- [  restartedMain] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]\r\n2022-09-07 15:40:23.413  INFO 71648 --- [  restartedMain] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 5.6.9.Final\r\n2022-09-07 15:40:23.621  INFO 71648 --- [  restartedMain] o.hibernate.annotations.common.Version   : HCANN000001: Hibernate Commons Annotations {5.1.2.Final}\r\n2022-09-07 15:40:23.798  INFO 71648 --- [  restartedMain] org.hibernate.dialect.Dialect            : HHH000400: Using dialect: org.hibernate.dialect.PostgreSQL10Dialect\r\n2022-09-07 15:40:24.398  INFO 71648 --- [  restartedMain] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]\r\n2022-09-07 15:40:24.407  INFO 71648 --- [  restartedMain] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit &#39;default&#39;\r\n2022-09-07 15:40:33.166  INFO 71648 --- [  restartedMain] o.a.k.clients.admin.AdminClientConfig    : AdminClientConfig values: \r\n\tbootstrap.servers = [localhost:9094]\r\n\tclient.dns.lookup = use_all_dns_ips\r\n\tclient.id = \r\n\tconnections.max.idle.ms = 300000\r\n\tdefault.api.timeout.ms = 60000\r\n\tmetadata.max.age.ms = 300000\r\n\tmetric.reporters = []\r\n\tmetrics.num.samples = 2\r\n\tmetrics.recording.level = INFO\r\n\tmetrics.sample.window.ms = 30000\r\n\treceive.buffer.bytes = 65536\r\n\treconnect.backoff.max.ms = 1000\r\n\treconnect.backoff.ms = 50\r\n\trequest.timeout.ms = 30000\r\n\tretries = 2147483647\r\n\tretry.backoff.ms = 100\r\n\tsasl.client.callback.handler.class = null\r\n\tsasl.jaas.config = null\r\n\tsasl.kerberos.kinit.cmd = /usr/bin/kinit\r\n\tsasl.kerberos.min.time.before.relogin = 60000\r\n\tsasl.kerberos.service.name = null\r\n\tsasl.kerberos.ticket.renew.jitter = 0.05\r\n\tsasl.kerberos.ticket.renew.window.factor = 0.8\r\n\tsasl.login.callback.handler.class = null\r\n\tsasl.login.class = null\r\n\tsasl.login.connect.timeout.ms = null\r\n\tsasl.login.read.timeout.ms = null\r\n\tsasl.login.refresh.buffer.seconds = 300\r\n\tsasl.login.refresh.min.period.seconds = 60\r\n\tsasl.login.refresh.window.factor = 0.8\r\n\tsasl.login.refresh.window.jitter = 0.05\r\n\tsasl.login.retry.backoff.max.ms = 10000\r\n\tsasl.login.retry.backoff.ms = 100\r\n\tsasl.mechanism = GSSAPI\r\n\tsasl.oauthbearer.clock.skew.seconds = 30\r\n\tsasl.oauthbearer.expected.audience = null\r\n\tsasl.oauthbearer.expected.issuer = null\r\n\tsasl.oauthbearer.jwks.endpoint.refresh.ms = 3600000\r\n\tsasl.oauthbearer.jwks.endpoint.retry.backoff.max.ms = 10000\r\n\tsasl.oauthbearer.jwks.endpoint.retry.backoff.ms = 100\r\n\tsasl.oauthbearer.jwks.endpoint.url = null\r\n\tsasl.oauthbearer.scope.claim.name = scope\r\n\tsasl.oauthbearer.sub.claim.name = sub\r\n\tsasl.oauthbearer.token.endpoint.url = null\r\n\tsecurity.protocol = PLAINTEXT\r\n\tsecurity.providers = null\r\n\tsend.buffer.bytes = 131072\r\n\tsocket.connection.setup.timeout.max.ms = 30000\r\n\tsocket.connection.setup.timeout.ms = 10000\r\n\tssl.cipher.suites = null\r\n\tssl.enabled.protocols = [TLSv1.2, TLSv1.3]\r\n\tssl.endpoint.identification.algorithm = https\r\n\tssl.engine.factory.class = null\r\n\tssl.key.password = null\r\n\tssl.keymanager.algorithm = SunX509\r\n\tssl.keystore.certificate.chain = null\r\n\tssl.keystore.key = null\r\n\tssl.keystore.location = null\r\n\tssl.keystore.password = null\r\n\tssl.keystore.type = JKS\r\n\tssl.protocol = TLSv1.3\r\n\tssl.provider = null\r\n\tssl.secure.random.implementation = null\r\n\tssl.trustmanager.algorithm = PKIX\r\n\tssl.truststore.certificates = null\r\n\tssl.truststore.location = null\r\n\tssl.truststore.password = null\r\n\tssl.truststore.type = JKS\r\n\r\n2022-09-07 15:40:47.487  INFO 71648 --- [  restartedMain] o.a.kafka.common.utils.AppInfoParser     : Kafka version: 3.1.1\r\n2022-09-07 15:40:47.489  INFO 71648 --- [  restartedMain] o.a.kafka.common.utils.AppInfoParser     : Kafka commitId: 97671528ba54a138\r\n2022-09-07 15:40:47.489  INFO 71648 --- [  restartedMain] o.a.kafka.common.utils.AppInfoParser     : Kafka startTimeMs: 1662545447486\r\n---\r\n---\r\n2022-09-07 15:40:50.300  INFO 71648 --- [  restartedMain] o.s.s.web.DefaultSecurityFilterChain     : Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@265d12d3, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@14d64eab, org.springframework.security.web.context.SecurityContextPersistenceFilter@1f2465a0, org.springframework.security.web.header.HeaderWriterFilter@2502a969, org.springframework.security.web.authentication.logout.LogoutFilter@6d4146f2, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@4e059749, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@41c12f62, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@eb03b, org.springframework.security.web.session.SessionManagementFilter@7e0bcff7, org.springframework.security.web.access.ExceptionTranslationFilter@19366e29, org.springframework.security.web.access.intercept.FilterSecurityInterceptor@234a3846]\r\n2022-09-07 15:40:50.386  INFO 71648 --- [  restartedMain] o.s.b.d.a.OptionalLiveReloadServer       : LiveReload server is running on port 35729\r\n2022-09-07 15:40:50.429  INFO 71648 --- [  restartedMain] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 8080 (http) with context path &#39;/kafka&#39;\r\n2022-09-07 15:40:50.449  INFO 71648 --- [  restartedMain] org.kafka.KafkaSpringApiApplication      : Started KafkaSpringApiApplication in 31.049 seconds (JVM running for 32.141)\r\n2022-09-07 15:40:56.292  INFO 71648 --- [nio-8080-exec-2] o.a.c.c.C.[Tomcat].[localhost].[/kafka]  : Initializing Spring DispatcherServlet &#39;dispatcherServlet&#39;\r\n2022-09-07 15:40:56.292  INFO 71648 --- [nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Initializing Servlet &#39;dispatcherServlet&#39;\r\n2022-09-07 15:40:56.293  INFO 71648 --- [nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed initialization in 1 ms\r\n2022-09-07 15:41:05.008  INFO 71648 --- [| adminclient-1] org.apache.kafka.clients.NetworkClient   : [AdminClient clientId=adminclient-1] Node 1 disconnected.\r\n2022-09-07 15:41:05.009  WARN 71648 --- [| adminclient-1] org.apache.kafka.clients.NetworkClient   : [AdminClient clientId=adminclient-1] Connection to node 1 (localhost/127.0.0.1:9092) could not be established. Broker may not be available.\r\n2022-09-07 15:41:05.055  INFO 71648 --- [| adminclient-1] org.apache.kafka.clients.NetworkClient   : [AdminClient clientId=adminclient-1] Node 1 disconnected.\r\n2022-09-07 15:41:05.056  WARN 71648 --- [| adminclient-1] org.apache.kafka.clients.NetworkClient   : [AdminClient clientId=adminclient-1] Connection to node 1 (localhost/127.0.0.1:9092) could not be established. Broker may not be available.\r\n2022-09-07 15:41:05.165  INFO 71648 --- [| adminclient-1] org.apache.kafka.clients.NetworkClient   : [AdminClient clientId=adminclient-1] Node 1 disconnected.\r\n2022-09-07 15:41:05.165  WARN 71648 --- [| adminclient-1] org.apache.kafka.clients.NetworkClient   : [AdminClient clientId=adminclient-1] Connection to node 1 (localhost/127.0.0.1:9092) could not be established. Broker may not be available.\r\n2022-09-07 15:41:05.413  INFO 71648 --- [| adminclient-1] org.apache.kafka.clients.NetworkClient   : [AdminClient clientId=adminclient-1] Node 1 disconnected.\r\n```\r\n\r\nI am not getting the sense of why it is not using the bean again to do administrative tasks.Kindly help","title":"Reuse AdminClient Bean in Kafka Spring Boot","body":"<p>To connect to kafka with admin client on port <code>9094</code>, i have following two main classes with application.yml as follows:</p>\n<pre><code>@EnableKafka\n@SpringBootApplication\n@ConfigurationPropertiesScan\npublic class KafkaSpringApiApplication {\n    public static void main(String[] args) {\n        SpringApplication.run(KafkaSpringApiApplication.class, args);\n    }\n    @Bean\n    public RestTemplate restTemplate() {\n        return new RestTemplate();\n    }\n\n\n}\n</code></pre>\n<pre><code>package org.kafka.config;\n\nimport org.apache.kafka.clients.admin.AdminClient;\nimport org.apache.kafka.clients.admin.AdminClientConfig;\nimport org.kafka.reader.Kafka;\nimport org.springframework.beans.factory.annotation.Autowired;\nimport org.springframework.context.annotation.Bean;\nimport org.springframework.kafka.annotation.EnableKafka;\nimport org.springframework.kafka.core.KafkaAdmin;\nimport org.springframework.stereotype.Component;\n\nimport java.util.HashMap;\nimport java.util.Map;\n\n@Component\npublic class AdminConfigurer {\n\n\n    @Autowired\n    private Kafka kafkaConfig;\n\n\n\n    @Bean\n    public Map&lt;String, Object&gt; kafkaAdminProperties() {\n        final Map&lt;String, Object&gt; configs = new HashMap&lt;&gt;();\n        configs.put(AdminClientConfig.BOOTSTRAP_SERVERS_CONFIG, kafkaConfig.getBootstrapServers());\n        if(kafkaConfig.getProperties().getSasl().getEnabled() &amp;&amp; kafkaConfig.getSsl().getEnabled()) {\n            configs.put(&quot;sasl.mechanism&quot;, kafkaConfig.getProperties().getSasl().getMechanism());\n            configs.put(&quot;security.protocol&quot;, kafkaConfig.getProperties().getSasl().getSecurity().getProtocol());\n            configs.put(&quot;ssl.keystore.location&quot;, kafkaConfig.getSsl().getKeystoreLocation());\n            configs.put(&quot;ssl.keystore.password&quot;, kafkaConfig.getSsl().getKeystorePassword());\n            configs.put(&quot;ssl.truststore.location&quot;, kafkaConfig.getSsl().getTruststoreLocation());\n            configs.put(&quot;ssl.truststore.password&quot;, kafkaConfig.getSsl().getTruststorePassword());\n            configs.put(&quot;sasl.jaas.config&quot;, String.format(kafkaConfig.getJaasTemplate(),\n                    kafkaConfig.getProperties().getSasl().getJaas().getConfig().getUsername(),\n                    kafkaConfig.getProperties().getSasl().getJaas().getConfig().getPassword()));\n            configs.put(&quot;ssl.endpoint.identification.algorithm&quot;, &quot;&quot;);\n        }\n        return configs;\n    }\n\n\n    @Bean\n    public AdminClient getClient() {\n        return AdminClient.create(kafkaAdminProperties());\n    }\n\n}\n</code></pre>\n<p>application.yml</p>\n<pre><code>kafka:\n  bootstrap-servers: localhost:9094\n  properties:\n    sasl:\n      enabled: false\n      jaas:\n        config:\n          username: XXX\n          password: XXX\n      mechanism: SCRAM-SHA-256\n      security:\n        protocol: SASL_SSL\n  ssl:\n    enabled: false\n    truststore-location: /opt/app/secrets/kafka.consumer.truststore.jks\n    truststore-password: XXX\n    keystore-location: /opt/app/secrets/kafka.consumer.keystore.jks\n    keystore-password: XXX\n    key-password: XXX\n</code></pre>\n<p>Service class</p>\n<pre><code>@Service\npublic class TopicService {\n\n  private static final Logger LOG = LoggerFactory.getLogger(TopicService.class);\n  @Autowired\n  private AdminClient adminClient;\n\npublic void createTopic(Topic topic) throws ExecutionException, InterruptedException {\n    adminClient\n            .createTopics(Collections.singletonList(ServiceHelper.fromTopic(topic)))\n            .values()\n            .get(topic.getName())\n            .get();\n  }\n}\n</code></pre>\n<p>The issue i have seen in logs is\n<strong>initially it uses adminclient  config and properly connect to kafka on port 9094 but when I try to create topics, it is using port 9092 rather</strong></p>\n<p>Logs</p>\n<pre><code>  .   ____          _            __ _ _\n /\\\\ / ___'_ __ _ _(_)_ __  __ _ \\ \\ \\ \\\n( ( )\\___ | '_ | '_| | '_ \\/ _` | \\ \\ \\ \\\n \\\\/  ___)| |_)| | | | | || (_| |  ) ) ) )\n  '  |____| .__|_| |_|_| |_\\__, | / / / /\n =========|_|==============|___/=/_/_/_/\n :: Spring Boot ::                (v2.7.1)\n\n2022-09-07 15:40:20.144  INFO 71648 --- [  restartedMain] org.kafka.KafkaSpringApiApplication      : Starting KafkaSpringApiApplication using Java 18.0.2.1 on DESKTOP-JT3FAGV with PID 71648 (C:\\Users\\utkarsh\\Desktop\\gitprojects\\kafka-spring-api\\target\\classes started by utkarsh in C:\\Users\\utkarsh\\Desktop\\gitprojects\\kafka-spring-api)\n2022-09-07 15:40:20.145  INFO 71648 --- [  restartedMain] org.kafka.KafkaSpringApiApplication      : No active profile set, falling back to 1 default profile: &quot;default&quot;\n2022-09-07 15:40:20.245  INFO 71648 --- [  restartedMain] .e.DevToolsPropertyDefaultsPostProcessor : Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable\n2022-09-07 15:40:20.245  INFO 71648 --- [  restartedMain] .e.DevToolsPropertyDefaultsPostProcessor : For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'\n2022-09-07 15:40:21.593  INFO 71648 --- [  restartedMain] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.\n2022-09-07 15:40:21.675  INFO 71648 --- [  restartedMain] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 71 ms. Found 1 JPA repository interfaces.\n2022-09-07 15:40:22.660  INFO 71648 --- [  restartedMain] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 8080 (http)\n2022-09-07 15:40:22.673  INFO 71648 --- [  restartedMain] o.apache.catalina.core.StandardService   : Starting service [Tomcat]\n2022-09-07 15:40:22.674  INFO 71648 --- [  restartedMain] org.apache.catalina.core.StandardEngine  : Starting Servlet engine: [Apache Tomcat/9.0.64]\n2022-09-07 15:40:22.860  INFO 71648 --- [  restartedMain] o.a.c.c.C.[Tomcat].[localhost].[/kafka]  : Initializing Spring embedded WebApplicationContext\n2022-09-07 15:40:22.860  INFO 71648 --- [  restartedMain] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 2613 ms\n2022-09-07 15:40:23.359  INFO 71648 --- [  restartedMain] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]\n2022-09-07 15:40:23.413  INFO 71648 --- [  restartedMain] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 5.6.9.Final\n2022-09-07 15:40:23.621  INFO 71648 --- [  restartedMain] o.hibernate.annotations.common.Version   : HCANN000001: Hibernate Commons Annotations {5.1.2.Final}\n2022-09-07 15:40:23.798  INFO 71648 --- [  restartedMain] org.hibernate.dialect.Dialect            : HHH000400: Using dialect: org.hibernate.dialect.PostgreSQL10Dialect\n2022-09-07 15:40:24.398  INFO 71648 --- [  restartedMain] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]\n2022-09-07 15:40:24.407  INFO 71648 --- [  restartedMain] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'\n2022-09-07 15:40:33.166  INFO 71648 --- [  restartedMain] o.a.k.clients.admin.AdminClientConfig    : AdminClientConfig values: \n    bootstrap.servers = [localhost:9094]\n    client.dns.lookup = use_all_dns_ips\n    client.id = \n    connections.max.idle.ms = 300000\n    default.api.timeout.ms = 60000\n    metadata.max.age.ms = 300000\n    metric.reporters = []\n    metrics.num.samples = 2\n    metrics.recording.level = INFO\n    metrics.sample.window.ms = 30000\n    receive.buffer.bytes = 65536\n    reconnect.backoff.max.ms = 1000\n    reconnect.backoff.ms = 50\n    request.timeout.ms = 30000\n    retries = 2147483647\n    retry.backoff.ms = 100\n    sasl.client.callback.handler.class = null\n    sasl.jaas.config = null\n    sasl.kerberos.kinit.cmd = /usr/bin/kinit\n    sasl.kerberos.min.time.before.relogin = 60000\n    sasl.kerberos.service.name = null\n    sasl.kerberos.ticket.renew.jitter = 0.05\n    sasl.kerberos.ticket.renew.window.factor = 0.8\n    sasl.login.callback.handler.class = null\n    sasl.login.class = null\n    sasl.login.connect.timeout.ms = null\n    sasl.login.read.timeout.ms = null\n    sasl.login.refresh.buffer.seconds = 300\n    sasl.login.refresh.min.period.seconds = 60\n    sasl.login.refresh.window.factor = 0.8\n    sasl.login.refresh.window.jitter = 0.05\n    sasl.login.retry.backoff.max.ms = 10000\n    sasl.login.retry.backoff.ms = 100\n    sasl.mechanism = GSSAPI\n    sasl.oauthbearer.clock.skew.seconds = 30\n    sasl.oauthbearer.expected.audience = null\n    sasl.oauthbearer.expected.issuer = null\n    sasl.oauthbearer.jwks.endpoint.refresh.ms = 3600000\n    sasl.oauthbearer.jwks.endpoint.retry.backoff.max.ms = 10000\n    sasl.oauthbearer.jwks.endpoint.retry.backoff.ms = 100\n    sasl.oauthbearer.jwks.endpoint.url = null\n    sasl.oauthbearer.scope.claim.name = scope\n    sasl.oauthbearer.sub.claim.name = sub\n    sasl.oauthbearer.token.endpoint.url = null\n    security.protocol = PLAINTEXT\n    security.providers = null\n    send.buffer.bytes = 131072\n    socket.connection.setup.timeout.max.ms = 30000\n    socket.connection.setup.timeout.ms = 10000\n    ssl.cipher.suites = null\n    ssl.enabled.protocols = [TLSv1.2, TLSv1.3]\n    ssl.endpoint.identification.algorithm = https\n    ssl.engine.factory.class = null\n    ssl.key.password = null\n    ssl.keymanager.algorithm = SunX509\n    ssl.keystore.certificate.chain = null\n    ssl.keystore.key = null\n    ssl.keystore.location = null\n    ssl.keystore.password = null\n    ssl.keystore.type = JKS\n    ssl.protocol = TLSv1.3\n    ssl.provider = null\n    ssl.secure.random.implementation = null\n    ssl.trustmanager.algorithm = PKIX\n    ssl.truststore.certificates = null\n    ssl.truststore.location = null\n    ssl.truststore.password = null\n    ssl.truststore.type = JKS\n\n2022-09-07 15:40:47.487  INFO 71648 --- [  restartedMain] o.a.kafka.common.utils.AppInfoParser     : Kafka version: 3.1.1\n2022-09-07 15:40:47.489  INFO 71648 --- [  restartedMain] o.a.kafka.common.utils.AppInfoParser     : Kafka commitId: 97671528ba54a138\n2022-09-07 15:40:47.489  INFO 71648 --- [  restartedMain] o.a.kafka.common.utils.AppInfoParser     : Kafka startTimeMs: 1662545447486\n---\n---\n2022-09-07 15:40:50.300  INFO 71648 --- [  restartedMain] o.s.s.web.DefaultSecurityFilterChain     : Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@265d12d3, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@14d64eab, org.springframework.security.web.context.SecurityContextPersistenceFilter@1f2465a0, org.springframework.security.web.header.HeaderWriterFilter@2502a969, org.springframework.security.web.authentication.logout.LogoutFilter@6d4146f2, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@4e059749, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@41c12f62, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@eb03b, org.springframework.security.web.session.SessionManagementFilter@7e0bcff7, org.springframework.security.web.access.ExceptionTranslationFilter@19366e29, org.springframework.security.web.access.intercept.FilterSecurityInterceptor@234a3846]\n2022-09-07 15:40:50.386  INFO 71648 --- [  restartedMain] o.s.b.d.a.OptionalLiveReloadServer       : LiveReload server is running on port 35729\n2022-09-07 15:40:50.429  INFO 71648 --- [  restartedMain] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 8080 (http) with context path '/kafka'\n2022-09-07 15:40:50.449  INFO 71648 --- [  restartedMain] org.kafka.KafkaSpringApiApplication      : Started KafkaSpringApiApplication in 31.049 seconds (JVM running for 32.141)\n2022-09-07 15:40:56.292  INFO 71648 --- [nio-8080-exec-2] o.a.c.c.C.[Tomcat].[localhost].[/kafka]  : Initializing Spring DispatcherServlet 'dispatcherServlet'\n2022-09-07 15:40:56.292  INFO 71648 --- [nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'\n2022-09-07 15:40:56.293  INFO 71648 --- [nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed initialization in 1 ms\n2022-09-07 15:41:05.008  INFO 71648 --- [| adminclient-1] org.apache.kafka.clients.NetworkClient   : [AdminClient clientId=adminclient-1] Node 1 disconnected.\n2022-09-07 15:41:05.009  WARN 71648 --- [| adminclient-1] org.apache.kafka.clients.NetworkClient   : [AdminClient clientId=adminclient-1] Connection to node 1 (localhost/127.0.0.1:9092) could not be established. Broker may not be available.\n2022-09-07 15:41:05.055  INFO 71648 --- [| adminclient-1] org.apache.kafka.clients.NetworkClient   : [AdminClient clientId=adminclient-1] Node 1 disconnected.\n2022-09-07 15:41:05.056  WARN 71648 --- [| adminclient-1] org.apache.kafka.clients.NetworkClient   : [AdminClient clientId=adminclient-1] Connection to node 1 (localhost/127.0.0.1:9092) could not be established. Broker may not be available.\n2022-09-07 15:41:05.165  INFO 71648 --- [| adminclient-1] org.apache.kafka.clients.NetworkClient   : [AdminClient clientId=adminclient-1] Node 1 disconnected.\n2022-09-07 15:41:05.165  WARN 71648 --- [| adminclient-1] org.apache.kafka.clients.NetworkClient   : [AdminClient clientId=adminclient-1] Connection to node 1 (localhost/127.0.0.1:9092) could not be established. Broker may not be available.\n2022-09-07 15:41:05.413  INFO 71648 --- [| adminclient-1] org.apache.kafka.clients.NetworkClient   : [AdminClient clientId=adminclient-1] Node 1 disconnected.\n</code></pre>\n<p>I am not getting the sense of why it is not using the bean again to do administrative tasks.Kindly help</p>\n"},{"tags":["java","design-patterns","visitor-pattern"],"comments":[{"owner":{"account_id":18231558,"reputation":969,"user_id":13270392,"display_name":"GACy20"},"score":2,"creation_date":1622791893,"post_id":67815554,"comment_id":119897837,"body_markdown":"IMHO when reasoning with visitor I usually use a tree pattern where you have `Node`s of different types (e.g. think of an AST where some nodes represent operators, and other operands etc so you represent `1+1=2` as `Equals(Plus(Literal(1), Literal(1)), Literal(2))` for example Obviously `Equals`/`Plus` etc are generic since the expressions need not be simple literals and now think of how you&#39;d go to write a visitor that evalutes this expression... Then write some code that parses the text of an expression and evaluates it, now you have 0 concrete classes known at compile time","body":"IMHO when reasoning with visitor I usually use a tree pattern where you have <code>Node</code>s of different types (e.g. think of an AST where some nodes represent operators, and other operands etc so you represent <code>1+1=2</code> as <code>Equals(Plus(Literal(1), Literal(1)), Literal(2))</code> for example Obviously <code>Equals</code>/<code>Plus</code> etc are generic since the expressions need not be simple literals and now think of how you&#39;d go to write a visitor that evalutes this expression... Then write some code that parses the text of an expression and evaluates it, now you have 0 concrete classes known at compile time"},{"owner":{"account_id":3000070,"reputation":2420,"user_id":2545722,"accept_rate":69,"display_name":"AFP_555"},"score":1,"creation_date":1622792213,"post_id":67815554,"comment_id":119897959,"body_markdown":"@GACy20 You&#39;re right. The only reason why this code is working is because I already know the dog is a Dog and the cat is a Cat. Thanks for this example, it gives much more sense to the visitor.","body":"@GACy20 You&#39;re right. The only reason why this code is working is because I already know the dog is a Dog and the cat is a Cat. Thanks for this example, it gives much more sense to the visitor."},{"owner":{"account_id":36215,"reputation":279358,"user_id":103167,"accept_rate":53,"display_name":"Ben Voigt"},"score":3,"creation_date":1622844922,"post_id":67815554,"comment_id":119917708,"body_markdown":"The code working with `dog` and the code working with `cat` *look* identical, so **what happens if you try to put them into a list and use a loop**?","body":"The code working with <code>dog</code> and the code working with <code>cat</code> <i>look</i> identical, so <b>what happens if you try to put them into a list and use a loop</b>?"},{"owner":{"account_id":1760744,"reputation":2445,"user_id":1607937,"display_name":"Den-Jason"},"score":0,"creation_date":1622918518,"post_id":67815554,"comment_id":119931631,"body_markdown":"I think that Shvets rationalises the visitor pattern well; you use it when you need to ***extend existing classes*** to implement some common behaviour - due to this you need to use &quot;double despatch&quot; - https://sourcemaking.com/design_patterns/visitor\n\nWhen you don&#39;t have that constraint to deal with there are usually simpler methods of achieving the same goal.","body":"I think that Shvets rationalises the visitor pattern well; you use it when you need to <b><i>extend existing classes</i></b> to implement some common behaviour - due to this you need to use &quot;double despatch&quot; - <a href=\"https://sourcemaking.com/design_patterns/visitor\" rel=\"nofollow noreferrer\">sourcemaking.com/design_patterns/visitor</a>  When you don&#39;t have that constraint to deal with there are usually simpler methods of achieving the same goal."},{"owner":{"account_id":8607013,"reputation":602,"user_id":8166486,"display_name":"Filip Milovanović"},"score":1,"creation_date":1622919164,"post_id":67815554,"comment_id":119931774,"body_markdown":"See also my answer [here](https://softwareengineering.stackexchange.com/a/412392/275536), it might bring you some further insight.","body":"See also my answer <a href=\"https://softwareengineering.stackexchange.com/a/412392/275536\">here</a>, it might bring you some further insight."},{"owner":{"account_id":5433910,"reputation":10649,"user_id":4323935,"accept_rate":69,"display_name":"dpr"},"score":0,"creation_date":1622933955,"post_id":67815554,"comment_id":119934548,"body_markdown":"I personally don’t get the benefit of this pattern either. I don’t see any benefit over a single method that checks for the concrete types and delegates accordingly. You need to know all supported concrete classes (that need to implement a meaningless interface) in advance, making the pattern 0 flexible. And the indirection of the accept method makes it very unintuitive. Plus it’s bad practice to add behavioral code to data classes - IMHO even if it’s generic code. The only benefit you get is, that by getting all implementation of the visitor you get these kind of usages of your classes.","body":"I personally don’t get the benefit of this pattern either. I don’t see any benefit over a single method that checks for the concrete types and delegates accordingly. You need to know all supported concrete classes (that need to implement a meaningless interface) in advance, making the pattern 0 flexible. And the indirection of the accept method makes it very unintuitive. Plus it’s bad practice to add behavioral code to data classes - IMHO even if it’s generic code. The only benefit you get is, that by getting all implementation of the visitor you get these kind of usages of your classes."},{"owner":{"account_id":2333618,"reputation":876,"user_id":2046442,"accept_rate":69,"display_name":"jcarlosweb"},"score":0,"creation_date":1669764774,"post_id":67815554,"comment_id":131716345,"body_markdown":"I&#39;ve been reading this pattern for a while, and I find it horrible, I am quite angry, this pattern `hides` everything, and on top of that it uses the word `visit`, that doesn&#39;t tell the programmer anything, only that something is going to happen, not what, also if I look at the JAVA example on `Wikipedia`, I see the class `CarElementPrintVisitor` that really can be made to create that same class without having to add the methods in depth of visit, that is to say `CarElementPrint-&gt;printBody(Body)`, I believe that this speaks more by itself that the `visitor pattern`. Or have I missed something?","body":"I&#39;ve been reading this pattern for a while, and I find it horrible, I am quite angry, this pattern <code>hides</code> everything, and on top of that it uses the word <code>visit</code>, that doesn&#39;t tell the programmer anything, only that something is going to happen, not what, also if I look at the JAVA example on <code>Wikipedia</code>, I see the class <code>CarElementPrintVisitor</code> that really can be made to create that same class without having to add the methods in depth of visit, that is to say <code>CarElementPrint-&gt;printBody(Body)</code>, I believe that this speaks more by itself that the <code>visitor pattern</code>. Or have I missed something?"}],"answers":[{"tags":[],"owner":{"account_id":43160,"reputation":227380,"user_id":126014,"accept_rate":86,"display_name":"Mark Seemann"},"down_vote_count":1,"up_vote_count":40,"is_accepted":true,"score":39,"last_activity_date":1622740868,"creation_date":1622699573,"answer_id":67816058,"question_id":67815554,"body_markdown":"The code in the OP resembles a well-known variation of the Visitor design pattern known as an *Internal Visitor* (see e.g. *Extensibility for the Masses. Practical Extensibility with Object Algebras* by Bruno C. d. S. Oliveira and William R. Cook). That variation, however, uses generics and return values (instead of `void`) to solve some of the problems that the Visitor pattern addresses.\r\n\r\nWhich problem is that, and why is the OP variation probably insufficient?\r\n\r\nThe main problem addressed by the Visitor pattern is when you have *heterogenous objects* that you need to treat the same. As the *Gang of Four*, (the authors of [Design Patterns](http://amzn.to/XBYukB)) states, you use the pattern when\r\n\r\n&gt; &quot;an object structure contains many classes of objects with differing interfaces, and you want to perform operations on these objects that depend on their concrete classes.&quot;\r\n\r\nWhat&#39;s missing from this sentence is that while you&#39;d like to &quot;perform operations on these objects that depend on their concrete classes&quot;, you want to treat those concrete classes as though they have a single polymorphic type.\r\n\r\n# A period example\r\n\r\nUsing the *animal* domain is rarely illustrative (I&#39;ll get back to that later), so here&#39;s another more realistic example. Examples are in C# - I hope they&#39;re still useful to you.\r\n\r\nImagine that you&#39;re developing an online restaurant reservation system. As part of that system, you need to be able to show a calendar to users. This calendar could display how many remaining seats are available on a given day, or list all reservations on the day.\r\n\r\nSometimes, you want to display a single day, but at other times, you want to display an entire month as a single calendar object. Throw in an entire year for good measure. This means that you have three *periods: year*, *month*, and *day*. Each has differing interfaces:\r\n\r\n    public Year(int year)\r\n\r\n    public Month(int year, int month)\r\n\r\n    public Day(int year, int month, int day)\r\n\r\nFor brevity, these are just the constructors of three separate classes. Many people might just model this as a single class with nullable fields, but this then forces you to deal with null fields, or enums, or other kinds of nastiness.\r\n\r\nThe above three classes have different structure because they contain different data, yet you&#39;d like to treat them as a single concept - a *period*.\r\n\r\nTo do so, define an `IPeriod` interface:\r\n\r\n    internal interface IPeriod\r\n    {\r\n        T Accept&lt;T&gt;(IPeriodVisitor&lt;T&gt; visitor);\r\n    }\r\n\r\nand make each class implement the interface. Here&#39;s `Month`:\r\n\r\n    internal sealed class Month : IPeriod\r\n    {\r\n        private readonly int year;\r\n        private readonly int month;\r\n\r\n        public Month(int year, int month)\r\n        {\r\n            this.year = year;\r\n            this.month = month;\r\n        }\r\n\r\n        public T Accept&lt;T&gt;(IPeriodVisitor&lt;T&gt; visitor)\r\n        {\r\n            return visitor.VisitMonth(year, month);\r\n        }\r\n    }\r\n\r\nThis enables you to treat the three heterogenous classes as a single type, and define operations on that single type without having to change the interface.\r\n\r\nHere, for example, is an implementation that calculates the *previous* period:\r\n\r\n    private class PreviousPeriodVisitor : IPeriodVisitor&lt;IPeriod&gt;\r\n    {\r\n        public IPeriod VisitYear(int year)\r\n        {\r\n            var date = new DateTime(year, 1, 1);\r\n            var previous = date.AddYears(-1);\r\n            return Period.Year(previous.Year);\r\n        }\r\n\r\n        public IPeriod VisitMonth(int year, int month)\r\n        {\r\n            var date = new DateTime(year, month, 1);\r\n            var previous = date.AddMonths(-1);\r\n            return Period.Month(previous.Year, previous.Month);\r\n        }\r\n\r\n        public IPeriod VisitDay(int year, int month, int day)\r\n        {\r\n            var date = new DateTime(year, month, day);\r\n            var previous = date.AddDays(-1);\r\n            return Period.Day(previous.Year, previous.Month, previous.Day);\r\n        }\r\n    }\r\n\r\nIf you have a `Day`, you&#39;ll get the previous `Day`, but if you have a `Month`, you&#39;ll get the previous `Month`, and so on.\r\n\r\nYou can see the `PreviousPeriodVisitor` class and other Visitors in use in [this article][1], but here are the few lines of code where they&#39;re used:\r\n\r\n    var previous = period.Accept(new PreviousPeriodVisitor());\r\n    var next = period.Accept(new NextPeriodVisitor());\r\n \r\n    dto.Links = new[]\r\n    {\r\n        url.LinkToPeriod(previous, &quot;previous&quot;),\r\n        url.LinkToPeriod(next, &quot;next&quot;)\r\n    };\r\n\r\nHere, `period` is an `IPeriod` object, but the code doesn&#39;t know whether it&#39;s a `Day`, and `Month`, or a `Year`.\r\n\r\nTo be clear, the above example uses the Internal Visitor variation, which is [isomorphic to a Church encoding][2].\r\n\r\n# Animals\r\n\r\nUsing animals to understand object-oriented programming is rarely illuminating. I think that schools should stop using that example, as it&#39;s more likely to confuse than help.\r\n\r\nThe OP code example doesn&#39;t suffer from the problem that the Visitor pattern solves, so in that context, it&#39;s not surprising if you fail to see the benefit.\r\n\r\nThe `Cat` and `Dog` classes are *not heterogenous.* They have the same class field and the same behaviour. The only difference is in the constructor. You could trivially refactor those two classes to a single `Animal` class:\r\n\r\n    public class Animal {\r\n        private int health;\r\n    \r\n        public Animal(int health) {\r\n            this.health = health;\r\n        }\r\n    \r\n        public void increaseHealth(int healthIncrement) {\r\n            this.health += healthIncrement;\r\n        }\r\n    \r\n        public int getHealth() {\r\n            return health;\r\n        }\r\n    }\r\n\r\nThen define two creation methods for cats and dogs, using the two distinct `health` values.\r\n\r\nSince you now have a single class, no Visitor is warranted.\r\n\r\n\r\n  [1]: https://blog.ploeh.dk/2020/08/24/adding-rest-links-as-a-cross-cutting-concern\r\n  [2]: https://blog.ploeh.dk/2018/06/25/visitor-as-a-sum-type","title":"Confused about the Visitor Design Pattern","body":"<p>The code in the OP resembles a well-known variation of the Visitor design pattern known as an <em>Internal Visitor</em> (see e.g. <em>Extensibility for the Masses. Practical Extensibility with Object Algebras</em> by Bruno C. d. S. Oliveira and William R. Cook). That variation, however, uses generics and return values (instead of <code>void</code>) to solve some of the problems that the Visitor pattern addresses.</p>\n<p>Which problem is that, and why is the OP variation probably insufficient?</p>\n<p>The main problem addressed by the Visitor pattern is when you have <em>heterogenous objects</em> that you need to treat the same. As the <em>Gang of Four</em>, (the authors of <a href=\"http://amzn.to/XBYukB\" rel=\"noreferrer\">Design Patterns</a>) states, you use the pattern when</p>\n<blockquote>\n<p>&quot;an object structure contains many classes of objects with differing interfaces, and you want to perform operations on these objects that depend on their concrete classes.&quot;</p>\n</blockquote>\n<p>What's missing from this sentence is that while you'd like to &quot;perform operations on these objects that depend on their concrete classes&quot;, you want to treat those concrete classes as though they have a single polymorphic type.</p>\n<h1>A period example</h1>\n<p>Using the <em>animal</em> domain is rarely illustrative (I'll get back to that later), so here's another more realistic example. Examples are in C# - I hope they're still useful to you.</p>\n<p>Imagine that you're developing an online restaurant reservation system. As part of that system, you need to be able to show a calendar to users. This calendar could display how many remaining seats are available on a given day, or list all reservations on the day.</p>\n<p>Sometimes, you want to display a single day, but at other times, you want to display an entire month as a single calendar object. Throw in an entire year for good measure. This means that you have three <em>periods: year</em>, <em>month</em>, and <em>day</em>. Each has differing interfaces:</p>\n<pre><code>public Year(int year)\n\npublic Month(int year, int month)\n\npublic Day(int year, int month, int day)\n</code></pre>\n<p>For brevity, these are just the constructors of three separate classes. Many people might just model this as a single class with nullable fields, but this then forces you to deal with null fields, or enums, or other kinds of nastiness.</p>\n<p>The above three classes have different structure because they contain different data, yet you'd like to treat them as a single concept - a <em>period</em>.</p>\n<p>To do so, define an <code>IPeriod</code> interface:</p>\n<pre><code>internal interface IPeriod\n{\n    T Accept&lt;T&gt;(IPeriodVisitor&lt;T&gt; visitor);\n}\n</code></pre>\n<p>and make each class implement the interface. Here's <code>Month</code>:</p>\n<pre><code>internal sealed class Month : IPeriod\n{\n    private readonly int year;\n    private readonly int month;\n\n    public Month(int year, int month)\n    {\n        this.year = year;\n        this.month = month;\n    }\n\n    public T Accept&lt;T&gt;(IPeriodVisitor&lt;T&gt; visitor)\n    {\n        return visitor.VisitMonth(year, month);\n    }\n}\n</code></pre>\n<p>This enables you to treat the three heterogenous classes as a single type, and define operations on that single type without having to change the interface.</p>\n<p>Here, for example, is an implementation that calculates the <em>previous</em> period:</p>\n<pre><code>private class PreviousPeriodVisitor : IPeriodVisitor&lt;IPeriod&gt;\n{\n    public IPeriod VisitYear(int year)\n    {\n        var date = new DateTime(year, 1, 1);\n        var previous = date.AddYears(-1);\n        return Period.Year(previous.Year);\n    }\n\n    public IPeriod VisitMonth(int year, int month)\n    {\n        var date = new DateTime(year, month, 1);\n        var previous = date.AddMonths(-1);\n        return Period.Month(previous.Year, previous.Month);\n    }\n\n    public IPeriod VisitDay(int year, int month, int day)\n    {\n        var date = new DateTime(year, month, day);\n        var previous = date.AddDays(-1);\n        return Period.Day(previous.Year, previous.Month, previous.Day);\n    }\n}\n</code></pre>\n<p>If you have a <code>Day</code>, you'll get the previous <code>Day</code>, but if you have a <code>Month</code>, you'll get the previous <code>Month</code>, and so on.</p>\n<p>You can see the <code>PreviousPeriodVisitor</code> class and other Visitors in use in <a href=\"https://blog.ploeh.dk/2020/08/24/adding-rest-links-as-a-cross-cutting-concern\" rel=\"noreferrer\">this article</a>, but here are the few lines of code where they're used:</p>\n<pre><code>var previous = period.Accept(new PreviousPeriodVisitor());\nvar next = period.Accept(new NextPeriodVisitor());\n\ndto.Links = new[]\n{\n    url.LinkToPeriod(previous, &quot;previous&quot;),\n    url.LinkToPeriod(next, &quot;next&quot;)\n};\n</code></pre>\n<p>Here, <code>period</code> is an <code>IPeriod</code> object, but the code doesn't know whether it's a <code>Day</code>, and <code>Month</code>, or a <code>Year</code>.</p>\n<p>To be clear, the above example uses the Internal Visitor variation, which is <a href=\"https://blog.ploeh.dk/2018/06/25/visitor-as-a-sum-type\" rel=\"noreferrer\">isomorphic to a Church encoding</a>.</p>\n<h1>Animals</h1>\n<p>Using animals to understand object-oriented programming is rarely illuminating. I think that schools should stop using that example, as it's more likely to confuse than help.</p>\n<p>The OP code example doesn't suffer from the problem that the Visitor pattern solves, so in that context, it's not surprising if you fail to see the benefit.</p>\n<p>The <code>Cat</code> and <code>Dog</code> classes are <em>not heterogenous.</em> They have the same class field and the same behaviour. The only difference is in the constructor. You could trivially refactor those two classes to a single <code>Animal</code> class:</p>\n<pre><code>public class Animal {\n    private int health;\n\n    public Animal(int health) {\n        this.health = health;\n    }\n\n    public void increaseHealth(int healthIncrement) {\n        this.health += healthIncrement;\n    }\n\n    public int getHealth() {\n        return health;\n    }\n}\n</code></pre>\n<p>Then define two creation methods for cats and dogs, using the two distinct <code>health</code> values.</p>\n<p>Since you now have a single class, no Visitor is warranted.</p>\n"},{"tags":[],"owner":{"account_id":5688520,"reputation":7765,"user_id":4497253,"display_name":"CoronA"},"down_vote_count":0,"up_vote_count":8,"is_accepted":false,"score":8,"last_activity_date":1622737502,"creation_date":1622700896,"answer_id":67816277,"question_id":67815554,"body_markdown":"With BACK-AND-FORTH, do you mean this?\r\n\r\n```\r\npublic class Dog implements Animal {\r\n\r\n    //...\r\n\r\n    @Override\r\n    public void accept(AnimalAction action) {\r\n        action.visit(this);\r\n    }\r\n}\r\n```\r\n\r\nThe purpose of this code is that you can dispatch on the type without knowing the concrete type, like here:\r\n\r\n```\r\npublic class Main {\r\n\r\n    public static void main(String[] args) {\r\n        AnimalAction jumpAction = new JumpVisitor();\r\n        AnimalAction eatAction = new EatVisitor();\r\n\r\n\r\n        Animal animal = aFunctionThatCouldReturnAnyAnimal();\r\n        animal.accept(jumpAction);\r\n        animal.accept(eatAction);\r\n    }\r\n\r\n    private static Animal aFunctionThatCouldReturnAnyAnimal() {\r\n        return new Dog();\r\n    }\r\n}\r\n```\r\n\r\nSo what you get is: You can call the correct individual action on an animal with only knowing that it is an animal.\r\n\r\nThis is especially useful if you traverse a composite pattern, where the leaf nodes are `Animal`s and the inner nodes are aggregations (e.g. a `List`) of `Animals`. A `List&lt;Animal&gt;` cannot be processed with your design.\r\n\r\n\r\n\r\n","title":"Confused about the Visitor Design Pattern","body":"<p>With BACK-AND-FORTH, do you mean this?</p>\n<pre><code>public class Dog implements Animal {\n\n    //...\n\n    @Override\n    public void accept(AnimalAction action) {\n        action.visit(this);\n    }\n}\n</code></pre>\n<p>The purpose of this code is that you can dispatch on the type without knowing the concrete type, like here:</p>\n<pre><code>public class Main {\n\n    public static void main(String[] args) {\n        AnimalAction jumpAction = new JumpVisitor();\n        AnimalAction eatAction = new EatVisitor();\n\n\n        Animal animal = aFunctionThatCouldReturnAnyAnimal();\n        animal.accept(jumpAction);\n        animal.accept(eatAction);\n    }\n\n    private static Animal aFunctionThatCouldReturnAnyAnimal() {\n        return new Dog();\n    }\n}\n</code></pre>\n<p>So what you get is: You can call the correct individual action on an animal with only knowing that it is an animal.</p>\n<p>This is especially useful if you traverse a composite pattern, where the leaf nodes are <code>Animal</code>s and the inner nodes are aggregations (e.g. a <code>List</code>) of <code>Animals</code>. A <code>List&lt;Animal&gt;</code> cannot be processed with your design.</p>\n"},{"tags":[],"owner":{"display_name":"user11595728"},"down_vote_count":0,"up_vote_count":23,"is_accepted":false,"score":23,"last_activity_date":1622748778,"creation_date":1622724957,"answer_id":67821899,"question_id":67815554,"body_markdown":"The back-and-forth in the Visitor is to emulate a kind of [double dispatch](https://en.wikipedia.org/wiki/Double_dispatch) mechanism, where you select a method implementation based on the run-time type of _two_ objects. \r\n\r\nThis is useful if the type of _both_ your animal _and_ visitor are abstract (or polymorphic). In which case you have a potential of 2 x 2 = 4 method implementations to choose from, based on a) what kind of action (visit) you want to do, and b) what type of animal you want this action to apply to.\r\n\r\n[![enter image description here][2]][2]\r\n[![enter image description here][1]][1]\r\n\r\nIf you are using concrete and non-polymorphic types, then part of this back-and-forth is indeed superfluous. \r\n\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/p6pdi.png\r\n  [2]: https://i.stack.imgur.com/Hli67.png","title":"Confused about the Visitor Design Pattern","body":"<p>The back-and-forth in the Visitor is to emulate a kind of <a href=\"https://en.wikipedia.org/wiki/Double_dispatch\" rel=\"noreferrer\">double dispatch</a> mechanism, where you select a method implementation based on the run-time type of <em>two</em> objects.</p>\n<p>This is useful if the type of <em>both</em> your animal <em>and</em> visitor are abstract (or polymorphic). In which case you have a potential of 2 x 2 = 4 method implementations to choose from, based on a) what kind of action (visit) you want to do, and b) what type of animal you want this action to apply to.</p>\n<p><a href=\"https://i.stack.imgur.com/Hli67.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/Hli67.png\" alt=\"enter image description here\" /></a>\n<a href=\"https://i.stack.imgur.com/p6pdi.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/p6pdi.png\" alt=\"enter image description here\" /></a></p>\n<p>If you are using concrete and non-polymorphic types, then part of this back-and-forth is indeed superfluous.</p>\n"},{"tags":[],"owner":{"account_id":1300809,"reputation":56617,"user_id":1250772,"accept_rate":45,"display_name":"Kaz"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1622845007,"creation_date":1622845007,"answer_id":67844560,"question_id":67815554,"body_markdown":"The visitor pattern solves the problem of applying a function to the elements of a graph structure.\r\n\r\nMore specifically, it solves the problem of visiting every node N in some graph structure, in the context of some object V, and for every N, invoking some generic function F(V, N). The method implementation of F is chosen based on the type of V and of N.\r\n\r\nIn programming languages that have multiple dispatch, the visitor pattern almost disappears. It reduces to a walk of the graph object (e.g. recursive tree descent), which makes a simple F(V, N) call for every N node. Done!\r\n\r\nFor instance in Common Lisp. For brevity, let&#39;s not even define classes: `integers` and `strings` are classes, so let&#39;s use those.\r\n\r\nFirst, let&#39;s write the four methods of the generic function, for every combination of an integer or string visiting an integer or string. The methods just produce output. We don&#39;t define the generic function with `defgeneric`; Lisp infers this and does it implicitly for us:\r\n\r\n    (defmethod visit ((visitor integer) (node string))\r\n      (format t &quot;integer ~s visits string ~s!~%&quot; visitor node))\r\n\r\n    (defmethod visit ((visitor integer) (node integer))\r\n      (format t &quot;integer ~s visits integer ~s!~%&quot; visitor node))\r\n\r\n    (defmethod visit ((visitor string) (node string))\r\n      (format t &quot;string ~s visits string ~s!~%&quot; visitor node))\r\n\r\n    (defmethod visit ((visitor string) (node integer))\r\n      (format t &quot;string ~s visits integer ~s!~%&quot; visitor node))\r\n\r\n\r\nNow let&#39;s use a list as our structure to be iterated by the visitor, and write a wrapper function for that:\r\n\r\n    (defun visitor-pattern (visitor list)\r\n      ;; map over the list, doing the visitation\r\n      (mapc (lambda (item) (visit visitor item)) list)\r\n      ;; return  nothing\r\n      (values))\r\n\r\nTest interactively:\r\n\r\n    (visitor-pattern 42 &#39;(1 &quot;abc&quot;))\r\n    integer 42 visits integer 1!\r\n    integer 42 visits string &quot;abc&quot;!\r\n    \r\n    (visitor-pattern &quot;foo&quot; &#39;(1 &quot;abc&quot;))\r\n    string &quot;foo&quot; visits integer 1!\r\n    string &quot;foo&quot; visits string &quot;abc&quot;!\r\n\r\nOK, so that&#39;s the Visitor Pattern: a traversal of every element in a structure, with a double dispatch of a method with a visiting context object.\r\n\r\nThe &quot;back and forth madness&quot; has to do with the boiler-plate code of simulating double dispatch in an OOP system which has only single dispatch, and in which methods belong to classes rather than being specializations of generic functions.\r\n\r\nBecause in mainstream single-dispatch OOP system, methods are encapsulated in classes, the first problem we have is where does the `visit` method live? Is it on the visitor or the node?\r\n\r\nThe answer turns out that it has to be both. We will need to dispatch something on both types.\r\n\r\nNext comes the problem that in OOP practice, we need good naming. We cannot have a `visit` method on both the `visitor` and the `visited` object. When a visited object is visited, the &quot;visit&quot; verb is not used to describe what that object is doing. It &quot;accepts&quot; a visitor. So we have to call that half of the action `accept`.\r\n\r\nWe create a structure whereby each node to be visited has an `accept` method. This method is dispatched on the type of the node, and takes a `Visitor` argument. In fact, the node has multiple `accept` methods, which are *statically* specialized on different kinds of visitors: `IntegerVisitor`, `StringVisitor`, `FooVisitor`. Note that we can&#39;t just use `String`, even if we have such a class in the language, because it doesn&#39;t implement the `Visitor` interface with the `visit` method.\r\n\r\nSo what happens is we walk the structure, get every node N, and then call `V.visit(N)` to get the visitor to visit it. We don&#39;t know the exact type of `V`; it&#39;s a base reference. Each Visitor implementation must implement `visit` as  piece of boiler plate (using a pseudo-language that isn&#39;t Java or C++):\r\n\r\n    StringVisitor::visit(Visited obj)\r\n    {\r\n      obj.Accept(self)\r\n    }\r\n\r\n    IntegerVisitor::visit(Visited obj)\r\n    {\r\n      obj.Accept(self)\r\n    }\r\n\r\nThe reason is that `self` has to be statically typed for the `Accept` call, because the `Visited` object has multiple `Accept` implementations for different types chosen at compile time:\r\n\r\n    IntegerNode::visit(StringVisitor v)\r\n    {\r\n       print(`integer @{self.value} visits string @{v.value}`)\r\n    }\r\n\r\n    IntegerNode::visit(IntegerVisitor v)\r\n    {\r\n       print(`integer @{self.value} visits string @{v.value}`)\r\n    }\r\n\r\nAll those classes and methods have to be declared somewhere:\r\n\r\n    class VisitorBase {\r\n      virtual void Visit(VisitedBase);\r\n    }\r\n\r\n    class IntegerVisitor;\r\n    class StringVisitor;\r\n\r\n    class VisitedBase {\r\n      virtual void Accept(IntegerVisitor);\r\n      virtual void Accept(StringVisitor);\r\n    }\r\n\r\n    class IntegerVisitor : inherit VisitorBase {\r\n      Integer value;\r\n      void Visit(VisitedBase);\r\n    }\r\n\r\n    class StringVisitor: inherit VisitorBase {\r\n      String value;\r\n      void Visit(VisitedBase);\r\n    }\r\n\r\n    class IntegerNode : inherit VisitedBase {\r\n      Integer value;\r\n      void Accept(IntegerVisitor);\r\n      void Accept(StringVisitor);\r\n    }\r\n\r\n    class StringNode : inherit VisitedBase {\r\n      String value;\r\n      void Accept(IntegerVisitor);\r\n      void Accept(StringVisitor);\r\n    }\r\n\r\nSo that&#39;s the single-dispatch-with-static-overloading visitor pattern: there is a bunch of boiler plate, plus the limitation that one of the classes, either visitor or visited, has to know the static types of all of the others that are supported, so it can dispatch statically on it, and for each static type, there will be a dummy method as well.\r\n","title":"Confused about the Visitor Design Pattern","body":"<p>The visitor pattern solves the problem of applying a function to the elements of a graph structure.</p>\n<p>More specifically, it solves the problem of visiting every node N in some graph structure, in the context of some object V, and for every N, invoking some generic function F(V, N). The method implementation of F is chosen based on the type of V and of N.</p>\n<p>In programming languages that have multiple dispatch, the visitor pattern almost disappears. It reduces to a walk of the graph object (e.g. recursive tree descent), which makes a simple F(V, N) call for every N node. Done!</p>\n<p>For instance in Common Lisp. For brevity, let's not even define classes: <code>integers</code> and <code>strings</code> are classes, so let's use those.</p>\n<p>First, let's write the four methods of the generic function, for every combination of an integer or string visiting an integer or string. The methods just produce output. We don't define the generic function with <code>defgeneric</code>; Lisp infers this and does it implicitly for us:</p>\n<pre><code>(defmethod visit ((visitor integer) (node string))\n  (format t &quot;integer ~s visits string ~s!~%&quot; visitor node))\n\n(defmethod visit ((visitor integer) (node integer))\n  (format t &quot;integer ~s visits integer ~s!~%&quot; visitor node))\n\n(defmethod visit ((visitor string) (node string))\n  (format t &quot;string ~s visits string ~s!~%&quot; visitor node))\n\n(defmethod visit ((visitor string) (node integer))\n  (format t &quot;string ~s visits integer ~s!~%&quot; visitor node))\n</code></pre>\n<p>Now let's use a list as our structure to be iterated by the visitor, and write a wrapper function for that:</p>\n<pre><code>(defun visitor-pattern (visitor list)\n  ;; map over the list, doing the visitation\n  (mapc (lambda (item) (visit visitor item)) list)\n  ;; return  nothing\n  (values))\n</code></pre>\n<p>Test interactively:</p>\n<pre><code>(visitor-pattern 42 '(1 &quot;abc&quot;))\ninteger 42 visits integer 1!\ninteger 42 visits string &quot;abc&quot;!\n\n(visitor-pattern &quot;foo&quot; '(1 &quot;abc&quot;))\nstring &quot;foo&quot; visits integer 1!\nstring &quot;foo&quot; visits string &quot;abc&quot;!\n</code></pre>\n<p>OK, so that's the Visitor Pattern: a traversal of every element in a structure, with a double dispatch of a method with a visiting context object.</p>\n<p>The &quot;back and forth madness&quot; has to do with the boiler-plate code of simulating double dispatch in an OOP system which has only single dispatch, and in which methods belong to classes rather than being specializations of generic functions.</p>\n<p>Because in mainstream single-dispatch OOP system, methods are encapsulated in classes, the first problem we have is where does the <code>visit</code> method live? Is it on the visitor or the node?</p>\n<p>The answer turns out that it has to be both. We will need to dispatch something on both types.</p>\n<p>Next comes the problem that in OOP practice, we need good naming. We cannot have a <code>visit</code> method on both the <code>visitor</code> and the <code>visited</code> object. When a visited object is visited, the &quot;visit&quot; verb is not used to describe what that object is doing. It &quot;accepts&quot; a visitor. So we have to call that half of the action <code>accept</code>.</p>\n<p>We create a structure whereby each node to be visited has an <code>accept</code> method. This method is dispatched on the type of the node, and takes a <code>Visitor</code> argument. In fact, the node has multiple <code>accept</code> methods, which are <em>statically</em> specialized on different kinds of visitors: <code>IntegerVisitor</code>, <code>StringVisitor</code>, <code>FooVisitor</code>. Note that we can't just use <code>String</code>, even if we have such a class in the language, because it doesn't implement the <code>Visitor</code> interface with the <code>visit</code> method.</p>\n<p>So what happens is we walk the structure, get every node N, and then call <code>V.visit(N)</code> to get the visitor to visit it. We don't know the exact type of <code>V</code>; it's a base reference. Each Visitor implementation must implement <code>visit</code> as  piece of boiler plate (using a pseudo-language that isn't Java or C++):</p>\n<pre><code>StringVisitor::visit(Visited obj)\n{\n  obj.Accept(self)\n}\n\nIntegerVisitor::visit(Visited obj)\n{\n  obj.Accept(self)\n}\n</code></pre>\n<p>The reason is that <code>self</code> has to be statically typed for the <code>Accept</code> call, because the <code>Visited</code> object has multiple <code>Accept</code> implementations for different types chosen at compile time:</p>\n<pre><code>IntegerNode::visit(StringVisitor v)\n{\n   print(`integer @{self.value} visits string @{v.value}`)\n}\n\nIntegerNode::visit(IntegerVisitor v)\n{\n   print(`integer @{self.value} visits string @{v.value}`)\n}\n</code></pre>\n<p>All those classes and methods have to be declared somewhere:</p>\n<pre><code>class VisitorBase {\n  virtual void Visit(VisitedBase);\n}\n\nclass IntegerVisitor;\nclass StringVisitor;\n\nclass VisitedBase {\n  virtual void Accept(IntegerVisitor);\n  virtual void Accept(StringVisitor);\n}\n\nclass IntegerVisitor : inherit VisitorBase {\n  Integer value;\n  void Visit(VisitedBase);\n}\n\nclass StringVisitor: inherit VisitorBase {\n  String value;\n  void Visit(VisitedBase);\n}\n\nclass IntegerNode : inherit VisitedBase {\n  Integer value;\n  void Accept(IntegerVisitor);\n  void Accept(StringVisitor);\n}\n\nclass StringNode : inherit VisitedBase {\n  String value;\n  void Accept(IntegerVisitor);\n  void Accept(StringVisitor);\n}\n</code></pre>\n<p>So that's the single-dispatch-with-static-overloading visitor pattern: there is a bunch of boiler plate, plus the limitation that one of the classes, either visitor or visited, has to know the static types of all of the others that are supported, so it can dispatch statically on it, and for each static type, there will be a dummy method as well.</p>\n"},{"tags":[],"owner":{"account_id":21395683,"reputation":1553,"user_id":15758781,"display_name":"Lunatic"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1662558279,"creation_date":1662558279,"answer_id":73636599,"question_id":67815554,"body_markdown":" - My Understanding\r\n\r\nRepresent an operation to be performed on the elements of an object structure. Visitor lets you define a new operation without changing the classes of the elements on which it operates.\r\n\r\n - Generic example\r\n\r\n&lt;!-- begin snippet: js hide: false console: true babel: false --&gt;\r\n\r\n&lt;!-- language: lang-java --&gt;\r\nVisitor root intrface\r\n\r\n    public interface Visitor&lt;R&gt; {\r\n\r\n        R visit(Object o);\r\n\r\n        static &lt;T, R&gt; X&lt;T, R&gt; forType(Class&lt;T&gt; type) {\r\n            return () -&gt; type;\r\n        }\r\n\r\n        static &lt;R&gt; Visitor&lt;R&gt; of(VisitorConsumer&lt;VisitorBuilder&lt;R&gt;&gt; visitorConsumer) {\r\n            Map&lt;Class&lt;?&gt;, Function&lt;Object, R&gt;&gt; registry = new HashMap&lt;&gt;();\r\n            VisitorBuilder&lt;R&gt; visitorBuilder = new VisitorBuilder&lt;R&gt;() {\r\n                @Override\r\n                public &lt;T&gt; void register(Class&lt;T&gt; type, Function&lt;T, R&gt; function) {\r\n                    registry.put(type, function.compose(type::cast));\r\n                }\r\n            };\r\n            visitorConsumer.accept(visitorBuilder);\r\n            return o -&gt; (R) registry.get(o.getClass()).apply(o);\r\n        }\r\n\r\n        interface X&lt;T, R&gt; {\r\n            default Y&lt;R&gt; execute(Function&lt;T, R&gt; function) {\r\n                return visitorBuilder -&gt; visitorBuilder.register(type(), function);\r\n            }\r\n\r\n            Class&lt;T&gt; type();\r\n        }\r\n\r\n        interface Y&lt;R&gt; extends VisitorConsumer&lt;VisitorBuilder&lt;R&gt;&gt; {\r\n            default &lt;T&gt; W&lt;T, R&gt; forType(Class&lt;T&gt; type) {\r\n                return index -&gt; index == 0 ? this : type;\r\n            }\r\n\r\n            default Y&lt;R&gt; andThen(Y&lt;R&gt; after) {\r\n                return t -&gt; {\r\n                    this.accept(t);\r\n                    after.accept(t);\r\n                };\r\n            }\r\n        }\r\n\r\n        interface W&lt;T, R&gt; {\r\n\r\n            Object get(int index);\r\n\r\n            default Class&lt;T&gt; type() {\r\n                return (Class&lt;T&gt;) get(1);\r\n            }\r\n\r\n            default Y&lt;R&gt; previousConsumer() {\r\n                return (Y&lt;R&gt;) get(0);\r\n            }\r\n\r\n            default Y&lt;R&gt; execute(Function&lt;T, R&gt; function) {\r\n                return previousConsumer().andThen(visitorBuilder -&gt; visitorBuilder.register(type(), function));\r\n            }\r\n        }\r\n    }\r\n\r\nVisitor consumerinterface\r\n\r\n\r\n&lt;!-- begin snippet: js hide: false console: true babel: false --&gt;\r\n\r\n&lt;!-- language: lang-java --&gt;\r\n\r\n    public interface VisitorConsumer&lt;T&gt; {\r\n\r\n        void accept(T t);\r\n\r\n        default VisitorConsumer&lt;T&gt; chainConsumer(VisitorConsumer&lt;T&gt; other) {\r\n            Objects.requireNonNull(other);\r\n            return (T t) -&gt; {\r\n                this.accept(t);\r\n                other.accept(t);\r\n            };\r\n        }\r\n\r\n        default &lt;U&gt; Z&lt;U&gt; construct(Class&lt;?&gt; type) {\r\n            return () -&gt; type;\r\n        }\r\n\r\n        interface Z&lt;U&gt; {\r\n            default U build(VisitorConsumer&lt;U&gt; consumer, Supplier&lt;U&gt; supplier) {\r\n\r\n                BiFunction&lt;VisitorConsumer&lt;U&gt;, Supplier&lt;U&gt;, U&gt; extractor = (o, s) -&gt; {\r\n                    U u = s.get();\r\n                    o.accept(u);\r\n                    return u;\r\n                };\r\n                return extractor.apply(consumer, supplier);\r\n            }\r\n\r\n            Class&lt;?&gt; type();\r\n        }\r\n        \r\n    }\r\n\r\nVisitor builder interface\r\n\r\n\r\n&lt;!-- language: lang-java --&gt;\r\n\r\n    public interface VisitorBuilder&lt;R&gt; {\r\n\r\n        &lt;T&gt; void register(Class&lt;T&gt; type, Function&lt;T, R&gt; function);\r\n\r\n    }\r\n\r\n\r\n\r\nAnd an implementation\r\n\r\n\r\n&lt;!-- language: lang-java --&gt;\r\n\r\n    public class Main {\r\n        public static void main(String[] args) {\r\n            VisitorConsumer&lt;VisitorBuilder&lt;String&gt;&gt; consumer = Visitor.&lt;Beta, String&gt;forType(Beta.class)\r\n                    .execute(o -&gt; &quot;The Great : &quot; + o.getName())\r\n                    .forType(Alpha.class).execute(Alpha::getName);\r\n\r\n            Visitor&lt;String&gt; visitor = Visitor.of(consumer);\r\n            System.out.println(visitor.visit(new Beta(&quot;Wolf&quot;)));\r\n            System.out.println(visitor.visit(new Alpha(&quot;Wolf&quot;)));\r\n        }\r\n    }\r\n\r\nIn which Alpha and Beta are just to arbitrary different class with constructor that receive a string.\r\nNote that how we specifically added operators for each specific class type and applied visitor upon their instances. \r\n","title":"Confused about the Visitor Design Pattern","body":"<ul>\n<li>My Understanding</li>\n</ul>\n<p>Represent an operation to be performed on the elements of an object structure. Visitor lets you define a new operation without changing the classes of the elements on which it operates.</p>\n<ul>\n<li>Generic example</li>\n</ul>\n\n<p>Visitor root intrface</p>\n<pre><code>public interface Visitor&lt;R&gt; {\n\n    R visit(Object o);\n\n    static &lt;T, R&gt; X&lt;T, R&gt; forType(Class&lt;T&gt; type) {\n        return () -&gt; type;\n    }\n\n    static &lt;R&gt; Visitor&lt;R&gt; of(VisitorConsumer&lt;VisitorBuilder&lt;R&gt;&gt; visitorConsumer) {\n        Map&lt;Class&lt;?&gt;, Function&lt;Object, R&gt;&gt; registry = new HashMap&lt;&gt;();\n        VisitorBuilder&lt;R&gt; visitorBuilder = new VisitorBuilder&lt;R&gt;() {\n            @Override\n            public &lt;T&gt; void register(Class&lt;T&gt; type, Function&lt;T, R&gt; function) {\n                registry.put(type, function.compose(type::cast));\n            }\n        };\n        visitorConsumer.accept(visitorBuilder);\n        return o -&gt; (R) registry.get(o.getClass()).apply(o);\n    }\n\n    interface X&lt;T, R&gt; {\n        default Y&lt;R&gt; execute(Function&lt;T, R&gt; function) {\n            return visitorBuilder -&gt; visitorBuilder.register(type(), function);\n        }\n\n        Class&lt;T&gt; type();\n    }\n\n    interface Y&lt;R&gt; extends VisitorConsumer&lt;VisitorBuilder&lt;R&gt;&gt; {\n        default &lt;T&gt; W&lt;T, R&gt; forType(Class&lt;T&gt; type) {\n            return index -&gt; index == 0 ? this : type;\n        }\n\n        default Y&lt;R&gt; andThen(Y&lt;R&gt; after) {\n            return t -&gt; {\n                this.accept(t);\n                after.accept(t);\n            };\n        }\n    }\n\n    interface W&lt;T, R&gt; {\n\n        Object get(int index);\n\n        default Class&lt;T&gt; type() {\n            return (Class&lt;T&gt;) get(1);\n        }\n\n        default Y&lt;R&gt; previousConsumer() {\n            return (Y&lt;R&gt;) get(0);\n        }\n\n        default Y&lt;R&gt; execute(Function&lt;T, R&gt; function) {\n            return previousConsumer().andThen(visitorBuilder -&gt; visitorBuilder.register(type(), function));\n        }\n    }\n}\n</code></pre>\n<p>Visitor consumerinterface</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>public interface VisitorConsumer&lt;T&gt; {\n\n    void accept(T t);\n\n    default VisitorConsumer&lt;T&gt; chainConsumer(VisitorConsumer&lt;T&gt; other) {\n        Objects.requireNonNull(other);\n        return (T t) -&gt; {\n            this.accept(t);\n            other.accept(t);\n        };\n    }\n\n    default &lt;U&gt; Z&lt;U&gt; construct(Class&lt;?&gt; type) {\n        return () -&gt; type;\n    }\n\n    interface Z&lt;U&gt; {\n        default U build(VisitorConsumer&lt;U&gt; consumer, Supplier&lt;U&gt; supplier) {\n\n            BiFunction&lt;VisitorConsumer&lt;U&gt;, Supplier&lt;U&gt;, U&gt; extractor = (o, s) -&gt; {\n                U u = s.get();\n                o.accept(u);\n                return u;\n            };\n            return extractor.apply(consumer, supplier);\n        }\n\n        Class&lt;?&gt; type();\n    }\n    \n}\n</code></pre>\n<p>Visitor builder interface</p>\n<pre class=\"lang-java prettyprint-override\"><code>public interface VisitorBuilder&lt;R&gt; {\n\n    &lt;T&gt; void register(Class&lt;T&gt; type, Function&lt;T, R&gt; function);\n\n}\n</code></pre>\n<p>And an implementation</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class Main {\n    public static void main(String[] args) {\n        VisitorConsumer&lt;VisitorBuilder&lt;String&gt;&gt; consumer = Visitor.&lt;Beta, String&gt;forType(Beta.class)\n                .execute(o -&gt; &quot;The Great : &quot; + o.getName())\n                .forType(Alpha.class).execute(Alpha::getName);\n\n        Visitor&lt;String&gt; visitor = Visitor.of(consumer);\n        System.out.println(visitor.visit(new Beta(&quot;Wolf&quot;)));\n        System.out.println(visitor.visit(new Alpha(&quot;Wolf&quot;)));\n    }\n}\n</code></pre>\n<p>In which Alpha and Beta are just to arbitrary different class with constructor that receive a string.\nNote that how we specifically added operators for each specific class type and applied visitor upon their instances.</p>\n"}],"owner":{"account_id":3000070,"reputation":2420,"user_id":2545722,"accept_rate":69,"display_name":"AFP_555"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":6494,"favorite_count":0,"down_vote_count":1,"up_vote_count":42,"accepted_answer_id":67816058,"answer_count":5,"score":41,"last_activity_date":1662558279,"creation_date":1622696079,"question_id":67815554,"body_markdown":"So, I was just reading about the Visitor pattern and I found the back and forth between the Visitor and the Elements very strange!\r\n\r\nBasically we call the element, we pass it a visitor and then the element passes itself to the visitor. AND THEN the visitor operates the element. What? Why? It feels so unnecessary. I call it the &quot;back and forth madness&quot;.\r\n\r\nSo, the intention of the Visitor is to decouple the Elements from their actions when the same actions need to be implemented across all the elements. This is done in case we need to extend our Elements with new actions, we don&#39;t want to go into all those classes and modify code that is already stable. So we&#39;re following the Open/Closed principle here.\r\n\r\n_Why is there all this back-and-forth and what do we lose if we don&#39;t have this?_\r\n\r\nFor example, I made this code that keeps that purpose in mind but skips the interaction madness of the visitor pattern. Basically I have Animals that jump and eat. I wanted to decouple those actions from the objects, so I move the actions to Visitors. Eating and jumping increases the animal health (I know, this is a very silly example...)\r\n\r\n```\r\npublic interface AnimalAction { // Abstract Visitor\r\n    public void visit(Dog dog);\r\n    public void visit(Cat cat);\r\n}\r\n\r\npublic class EatVisitor implements AnimalAction { // ConcreteVisitor\r\n    @Override\r\n    public void visit(Dog dog) {\r\n        // Eating increases the dog health by 100\r\n        dog.increaseHealth(100);\r\n    }\r\n\r\n    @Override\r\n    public void visit(Cat cat) {\r\n        // Eating increases the cat health by 50\r\n        cat.increaseHealth(50);\r\n    }\r\n}\r\n\r\npublic class JumpVisitor implements AnimalAction { // ConcreteVisitor\r\n    public void visit(Dog dog) {\r\n        // Jumping increases the dog health by 10\r\n        dog.increaseHealth(10);\r\n    }\r\n\r\n    public void visit(Cat cat) {\r\n        // Jumping increases the cat health by 20\r\n        cat.increaseHealth(20);\r\n    }\r\n}\r\n\r\npublic class Cat { // ConcreteElement\r\n    private int health;\r\n\r\n    public Cat() {\r\n        this.health = 50;\r\n    }\r\n\r\n    public void increaseHealth(int healthIncrement) {\r\n        this.health += healthIncrement;\r\n    }\r\n\r\n    public int getHealth() {\r\n        return health;\r\n    }\r\n}\r\n\r\npublic class Dog { // ConcreteElement\r\n\r\n    private int health;\r\n\r\n    public Dog() {\r\n        this.health = 10;\r\n    }\r\n\r\n    public void increaseHealth(int healthIncrement) {\r\n        this.health += healthIncrement;\r\n    }\r\n\r\n    public int getHealth() {\r\n        return health;\r\n    }\r\n}\r\n\r\npublic class Main {\r\n\r\n    public static void main(String[] args) {\r\n        AnimalAction jumpAction = new JumpVisitor();\r\n        AnimalAction eatAction = new EatVisitor();\r\n\r\n        Dog dog = new Dog();\r\n        Cat cat = new Cat();\r\n\r\n        jumpAction.visit(dog); // NOTE HERE. NOT DOING THE BACK AND FORTH MADNESS.\r\n        eatAction.visit(dog);\r\n        System.out.println(dog.getHealth());\r\n\r\n        jumpAction.visit(cat);\r\n        eatAction.visit(cat);\r\n        System.out.println(cat.getHealth());\r\n    }\r\n}\r\n\r\n```","title":"Confused about the Visitor Design Pattern","body":"<p>So, I was just reading about the Visitor pattern and I found the back and forth between the Visitor and the Elements very strange!</p>\n<p>Basically we call the element, we pass it a visitor and then the element passes itself to the visitor. AND THEN the visitor operates the element. What? Why? It feels so unnecessary. I call it the &quot;back and forth madness&quot;.</p>\n<p>So, the intention of the Visitor is to decouple the Elements from their actions when the same actions need to be implemented across all the elements. This is done in case we need to extend our Elements with new actions, we don't want to go into all those classes and modify code that is already stable. So we're following the Open/Closed principle here.</p>\n<p><em>Why is there all this back-and-forth and what do we lose if we don't have this?</em></p>\n<p>For example, I made this code that keeps that purpose in mind but skips the interaction madness of the visitor pattern. Basically I have Animals that jump and eat. I wanted to decouple those actions from the objects, so I move the actions to Visitors. Eating and jumping increases the animal health (I know, this is a very silly example...)</p>\n<pre><code>public interface AnimalAction { // Abstract Visitor\n    public void visit(Dog dog);\n    public void visit(Cat cat);\n}\n\npublic class EatVisitor implements AnimalAction { // ConcreteVisitor\n    @Override\n    public void visit(Dog dog) {\n        // Eating increases the dog health by 100\n        dog.increaseHealth(100);\n    }\n\n    @Override\n    public void visit(Cat cat) {\n        // Eating increases the cat health by 50\n        cat.increaseHealth(50);\n    }\n}\n\npublic class JumpVisitor implements AnimalAction { // ConcreteVisitor\n    public void visit(Dog dog) {\n        // Jumping increases the dog health by 10\n        dog.increaseHealth(10);\n    }\n\n    public void visit(Cat cat) {\n        // Jumping increases the cat health by 20\n        cat.increaseHealth(20);\n    }\n}\n\npublic class Cat { // ConcreteElement\n    private int health;\n\n    public Cat() {\n        this.health = 50;\n    }\n\n    public void increaseHealth(int healthIncrement) {\n        this.health += healthIncrement;\n    }\n\n    public int getHealth() {\n        return health;\n    }\n}\n\npublic class Dog { // ConcreteElement\n\n    private int health;\n\n    public Dog() {\n        this.health = 10;\n    }\n\n    public void increaseHealth(int healthIncrement) {\n        this.health += healthIncrement;\n    }\n\n    public int getHealth() {\n        return health;\n    }\n}\n\npublic class Main {\n\n    public static void main(String[] args) {\n        AnimalAction jumpAction = new JumpVisitor();\n        AnimalAction eatAction = new EatVisitor();\n\n        Dog dog = new Dog();\n        Cat cat = new Cat();\n\n        jumpAction.visit(dog); // NOTE HERE. NOT DOING THE BACK AND FORTH MADNESS.\n        eatAction.visit(dog);\n        System.out.println(dog.getHealth());\n\n        jumpAction.visit(cat);\n        eatAction.visit(cat);\n        System.out.println(cat.getHealth());\n    }\n}\n\n</code></pre>\n"},{"tags":["java","android","opencv","image-processing","edge-detection"],"comments":[{"owner":{"account_id":6199398,"reputation":20357,"user_id":6885902,"display_name":"Jeru Luke"},"score":1,"creation_date":1485521785,"post_id":41893029,"comment_id":70970792,"body_markdown":"in order to enhance the edges use **morphological dilation**. See [THIS PAGE](http://opencv-python-tutroals.readthedocs.io/en/latest/py_tutorials/py_imgproc/py_morphological_ops/py_morphological_ops.html#morphological-ops).","body":"in order to enhance the edges use <b>morphological dilation</b>. See <a href=\"http://opencv-python-tutroals.readthedocs.io/en/latest/py_tutorials/py_imgproc/py_morphological_ops/py_morphological_ops.html#morphological-ops\" rel=\"nofollow noreferrer\">THIS PAGE</a>."},{"owner":{"account_id":6199398,"reputation":20357,"user_id":6885902,"display_name":"Jeru Luke"},"score":0,"creation_date":1662704405,"post_id":41893029,"comment_id":130071389,"body_markdown":"@ChristophRackwitz I have decided to stop making such edits since it overwhelms the active page with old content. Received as per another SO user: https://stackoverflow.com/questions/44656890/measure-velocity-of-objects-in-a-video?noredirect=1#comment130031580_44656890","body":"@ChristophRackwitz I have decided to stop making such edits since it overwhelms the active page with old content. Received as per another SO user: <a href=\"https://stackoverflow.com/questions/44656890/measure-velocity-of-objects-in-a-video?noredirect=1#comment130031580_44656890\" title=\"measure velocity of objects in a video\">stackoverflow.com/questions/44656890/&hellip;</a>"}],"answers":[{"tags":[],"owner":{"account_id":6199398,"reputation":20357,"user_id":6885902,"display_name":"Jeru Luke"},"down_vote_count":0,"up_vote_count":10,"is_accepted":false,"score":10,"last_activity_date":1485524075,"creation_date":1485524075,"answer_id":41895229,"question_id":41893029,"body_markdown":"First the method of performing **Canny edge detection** has to change. You are setting a lower and higher threshold in `cv2.Canny()`**manually**. You can do this automatically. I used [THIS LINK](http://www.pyimagesearch.com/2015/04/06/zero-parameter-automatic-canny-edge-detection-with-python-and-opencv/) as reference.\r\n\r\nUse the following snippet:\r\n    \r\n\tv = np.median(gray_image)\r\n \r\n\t#---- apply automatic Canny edge detection using the computed median----\r\n\tlower = int(max(0, (1.0 - sigma) * v))\r\n\tupper = int(min(255, (1.0 + sigma) * v))\r\n\tedged = cv2.Canny(gray_image, lower, upper)\r\n    cv2.imshow(&#39;Edges&#39;,edged)\r\n\t\r\n\r\n***So what am I doing here?***\r\n\r\nI am taking the **median** value of the gray scale image. The `sigma` value of 0.33 is chosen to set the `lower` and `upper` threshold. **`0.33`** value is generally used by statisticians for data science. So it is considered here as well.\r\n\r\nThis is what I got:\r\n\r\n[![enter image description here][1]][1]\r\n\r\nTo enhance this edge information I performed **morphological dilation** using the `cv2.MORPH_CROSS` kernel:\r\n\r\n[![enter image description here][2]][2]\r\n\r\nNow just perform the usual `cv2.findContours()` operation and draw the *biggest* contour.\r\n\r\n:)\r\n\r\n  [1]: https://i.stack.imgur.com/vBJ6a.jpg\r\n  [2]: https://i.stack.imgur.com/qaCXc.jpg","title":"OpenCV - canny edge detection not working properly","body":"<p>First the method of performing <strong>Canny edge detection</strong> has to change. You are setting a lower and higher threshold in <code>cv2.Canny()</code><strong>manually</strong>. You can do this automatically. I used <a href=\"http://www.pyimagesearch.com/2015/04/06/zero-parameter-automatic-canny-edge-detection-with-python-and-opencv/\" rel=\"noreferrer\">THIS LINK</a> as reference.</p>\n\n<p>Use the following snippet:</p>\n\n<pre><code>v = np.median(gray_image)\n\n#---- apply automatic Canny edge detection using the computed median----\nlower = int(max(0, (1.0 - sigma) * v))\nupper = int(min(255, (1.0 + sigma) * v))\nedged = cv2.Canny(gray_image, lower, upper)\ncv2.imshow('Edges',edged)\n</code></pre>\n\n<p><strong><em>So what am I doing here?</em></strong></p>\n\n<p>I am taking the <strong>median</strong> value of the gray scale image. The <code>sigma</code> value of 0.33 is chosen to set the <code>lower</code> and <code>upper</code> threshold. <strong><code>0.33</code></strong> value is generally used by statisticians for data science. So it is considered here as well.</p>\n\n<p>This is what I got:</p>\n\n<p><a href=\"https://i.stack.imgur.com/vBJ6a.jpg\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/vBJ6a.jpg\" alt=\"enter image description here\"></a></p>\n\n<p>To enhance this edge information I performed <strong>morphological dilation</strong> using the <code>cv2.MORPH_CROSS</code> kernel:</p>\n\n<p><a href=\"https://i.stack.imgur.com/qaCXc.jpg\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/qaCXc.jpg\" alt=\"enter image description here\"></a></p>\n\n<p>Now just perform the usual <code>cv2.findContours()</code> operation and draw the <em>biggest</em> contour.</p>\n\n<p>:)</p>\n"},{"tags":[],"owner":{"account_id":9108449,"reputation":31,"user_id":6778022,"display_name":"Jochen"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1540994226,"creation_date":1540993828,"answer_id":53084999,"question_id":41893029,"body_markdown":"I&#39;ve got better results with a small adaption of the algorithm posted by Jeru Luke.\r\n\r\nOn document detection, we rather search for the dark shadowy edges of a document:\r\n\r\n- For light images, like with white paper, median is high and &quot;255 - median&quot; performs better than just median\r\n- For small values sigma is too small to produce a wide enought range.\r\n\r\nHere is my C#-algorithm:\r\n    \r\n        double s = 0.33;\r\n        if (imageMedian &gt; 191) // light images\r\n        {\r\n          cannyTh1 = (int)Math.Max(0, (1 - 2*s) * (255 - imageMedian));\r\n          cannyTh2 = (int)Math.Max(85, (1 + 2*s) * (255 - imageMedian));\r\n        }\r\n        else if (imageMedian &gt; 127)\r\n        {\r\n          cannyTh1 = (int)Math.Max(0, (1 - s) * (255 - imageMedian));\r\n          cannyTh2 = (int)Math.Min(255, (1 + s) * (255 - imageMedian));\r\n        }\r\n        else if (imageMedian &lt; 63) // dark images\r\n        {\r\n          cannyTh1 = (int)Math.Max(0, (1 - 2*s) * imageMedian);\r\n          cannyTh2 = (int)Math.Max(85, (1 + 2*s) * imageMedian);\r\n        }\r\n        else\r\n        {\r\n          cannyTh1 = (int)Math.Max(0, (1 - s) * imageMedian);\r\n          cannyTh2 = (int)Math.Min(255, (1 + s) * imageMedian);\r\n        }\r\n\t\t\r\nAdditionally, the result can be improved for some documents by\r\n\r\n- sharpening the image after using the median filter\r\n- using stronger median filter\r\n- computing median and perform canny filter for seperate parts of the image, because shadow and light influence can differ largely on parts of the image","title":"OpenCV - canny edge detection not working properly","body":"<p>I've got better results with a small adaption of the algorithm posted by Jeru Luke.</p>\n\n<p>On document detection, we rather search for the dark shadowy edges of a document:</p>\n\n<ul>\n<li>For light images, like with white paper, median is high and \"255 - median\" performs better than just median</li>\n<li>For small values sigma is too small to produce a wide enought range.</li>\n</ul>\n\n<p>Here is my C#-algorithm:</p>\n\n<pre><code>    double s = 0.33;\n    if (imageMedian &gt; 191) // light images\n    {\n      cannyTh1 = (int)Math.Max(0, (1 - 2*s) * (255 - imageMedian));\n      cannyTh2 = (int)Math.Max(85, (1 + 2*s) * (255 - imageMedian));\n    }\n    else if (imageMedian &gt; 127)\n    {\n      cannyTh1 = (int)Math.Max(0, (1 - s) * (255 - imageMedian));\n      cannyTh2 = (int)Math.Min(255, (1 + s) * (255 - imageMedian));\n    }\n    else if (imageMedian &lt; 63) // dark images\n    {\n      cannyTh1 = (int)Math.Max(0, (1 - 2*s) * imageMedian);\n      cannyTh2 = (int)Math.Max(85, (1 + 2*s) * imageMedian);\n    }\n    else\n    {\n      cannyTh1 = (int)Math.Max(0, (1 - s) * imageMedian);\n      cannyTh2 = (int)Math.Min(255, (1 + s) * imageMedian);\n    }\n</code></pre>\n\n<p>Additionally, the result can be improved for some documents by</p>\n\n<ul>\n<li>sharpening the image after using the median filter</li>\n<li>using stronger median filter</li>\n<li>computing median and perform canny filter for seperate parts of the image, because shadow and light influence can differ largely on parts of the image</li>\n</ul>\n"}],"owner":{"account_id":10050009,"reputation":357,"user_id":7430124,"display_name":"ImLearning"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":14927,"favorite_count":0,"down_vote_count":0,"up_vote_count":4,"answer_count":2,"score":4,"last_activity_date":1662558004,"creation_date":1485516762,"question_id":41893029,"body_markdown":"I am new to OpenCV with Android. I am currently working on document detection demo app. What I did so far is as below: \r\n\r\n**Original image** -&gt; **Gray scale image** -&gt; **GaussianBlur** -&gt; **Canny edge detection** -&gt; **finding contours** -&gt; **draw Contours** \r\n\r\nI am able to detect paper sheet perfectly as you can see in below image .\r\n\r\n[![enter image description here][1]][1]\r\n\r\nBut it does not detect some documents. Below is one of them\r\n\r\n[![enter image description here][2]][2]                     \r\n\r\nI researched a lot about that and found that the problem lies in canny edge detection and below is the canny image :\r\n\r\n[![enter image description here][3]][3] \r\n\r\nAs you can see , the edge detection is not perfectly linked and it does not connect edges at some point. That is the reason for that . \r\n\r\nI have gone through the similar issue at : [How to select the best set of parameters in Canny Edge detection algorithm implemented in OpenCV?][4]\r\nI have followed the solution but it didn&#39;t worked for me. \r\n\r\nMy canny detection code is as follow : \r\n\r\n    double otsu_thresold = Imgproc.threshold(mGray,edged,0,255, Imgproc.THRESH_OTSU);\r\n    Imgproc.Canny(mRgba, edged, otsu_thresold*0.5,otsu_thresold);\r\n\r\nI don&#39;t know where I am wrong! What should I do to perfectly detect the document?\r\n\r\n  [1]: https://i.stack.imgur.com/IfYDG.png\r\n  [2]: https://i.stack.imgur.com/JEyM7.png\r\n  [3]: https://i.stack.imgur.com/5zehN.png\r\n  [4]: https://stackoverflow.com/questions/21324950/how-to-select-the-best-set-of-parameters-in-canny-edge-detection-algorithm-imple","title":"OpenCV - canny edge detection not working properly","body":"<p>I am new to OpenCV with Android. I am currently working on document detection demo app. What I did so far is as below: </p>\n\n<p><strong>Original image</strong> -> <strong>Gray scale image</strong> -> <strong>GaussianBlur</strong> -> <strong>Canny edge detection</strong> -> <strong>finding contours</strong> -> <strong>draw Contours</strong> </p>\n\n<p>I am able to detect paper sheet perfectly as you can see in below image .</p>\n\n<p><a href=\"https://i.stack.imgur.com/IfYDG.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/IfYDG.png\" alt=\"enter image description here\"></a></p>\n\n<p>But it does not detect some documents. Below is one of them</p>\n\n<p><a href=\"https://i.stack.imgur.com/JEyM7.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/JEyM7.png\" alt=\"enter image description here\"></a>                     </p>\n\n<p>I researched a lot about that and found that the problem lies in canny edge detection and below is the canny image :</p>\n\n<p><a href=\"https://i.stack.imgur.com/5zehN.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/5zehN.png\" alt=\"enter image description here\"></a> </p>\n\n<p>As you can see , the edge detection is not perfectly linked and it does not connect edges at some point. That is the reason for that . </p>\n\n<p>I have gone through the similar issue at : <a href=\"https://stackoverflow.com/questions/21324950/how-to-select-the-best-set-of-parameters-in-canny-edge-detection-algorithm-imple\">How to select the best set of parameters in Canny Edge detection algorithm implemented in OpenCV?</a>\nI have followed the solution but it didn't worked for me. </p>\n\n<p>My canny detection code is as follow : </p>\n\n<pre><code>double otsu_thresold = Imgproc.threshold(mGray,edged,0,255, Imgproc.THRESH_OTSU);\nImgproc.Canny(mRgba, edged, otsu_thresold*0.5,otsu_thresold);\n</code></pre>\n\n<p>I don't know where I am wrong! What should I do to perfectly detect the document?</p>\n"},{"tags":["java","daml"],"answers":[{"tags":[],"owner":{"account_id":15123908,"reputation":175,"user_id":10913907,"display_name":"Stephen Compall"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1662557988,"creation_date":1662557988,"answer_id":73636535,"question_id":73635975,"body_markdown":"&quot;store received contracts in DB and fetch by key from DB&quot; is how the JSON API provides the fetch-by-key functionality, when you have a DB configured. When you don&#39;t have a DB configured, it scans all of `getActiveContracts` until it finds a match. It does not have a quick-and-easy way to fetch by key itself, which is also why no such API exists in the Java bindings.\r\n\r\nI recommend following the approach you&#39;ve hit upon, with the qualifier that you should store ledger offset as well, and use the offset with the transaction stream to update the DB. (This is also how JSON API updates its database, rather than starting with `getActiveContracts` from scratch.)","title":"daml - how to fetch contract by key using Java bindings?","body":"<p>&quot;store received contracts in DB and fetch by key from DB&quot; is how the JSON API provides the fetch-by-key functionality, when you have a DB configured. When you don't have a DB configured, it scans all of <code>getActiveContracts</code> until it finds a match. It does not have a quick-and-easy way to fetch by key itself, which is also why no such API exists in the Java bindings.</p>\n<p>I recommend following the approach you've hit upon, with the qualifier that you should store ledger offset as well, and use the offset with the transaction stream to update the DB. (This is also how JSON API updates its database, rather than starting with <code>getActiveContracts</code> from scratch.)</p>\n"}],"owner":{"account_id":16630990,"reputation":107,"user_id":12018844,"display_name":"Vsevolod"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":176,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":73636535,"answer_count":1,"score":0,"last_activity_date":1662557988,"creation_date":1662555573,"question_id":73635975,"body_markdown":"I have Daml `template` with `key` defined. I&#39;m building a Java service that tries to access Daml ledger using `bindings-rxjava`. The access pattern is a simple CRUD, and I&#39;m stuck on R(ead) part.\r\n\r\nI&#39;m not able to find how to issue `fetchByKey` request using Java. I&#39;ve looked through [examples](https://www.digitalasset.com/developers/examples) and see how it&#39;s done in `@daml/react` example [here](https://github.com/digital-asset/daml/blob/main/templates/create-daml-app/ui/src/components/MainScreen.tsx.template#L37). It uses JSON-API, and it&#39;s [/v1/fetch](https://docs.daml.com/json-api/index.html#fetch-contract-by-key) endpoint. But I don&#39;t see similar requests in [quickstart-java](https://github.com/digital-asset/daml/tree/main/templates/quickstart-java) and [ex-java-bindings](https://github.com/digital-asset/ex-java-bindings) repos. Also, both examples don&#39;t have a `template` with `key` defined.\r\n\r\nThe only working solution I can think of (based on the examples above) is to subscribe to `ActiveContractsClient.getActiveContracts` for my template, then store received contracts in DB and fetch by key from DB. But that sounds overly complicated comparing to JS examples.\r\n\r\nPlease, point me towards a working example for fetching by key using Java bindings. I&#39;m okay with any JVM language (Java, Kotlin, Scala, Clojure, Groovy).\r\n\r\nI&#39;m also okay with calling JSON-API node from Java, but don&#39;t see any bindings for this. Am I stuck with manually constructing the JSON request in this case?","title":"daml - how to fetch contract by key using Java bindings?","body":"<p>I have Daml <code>template</code> with <code>key</code> defined. I'm building a Java service that tries to access Daml ledger using <code>bindings-rxjava</code>. The access pattern is a simple CRUD, and I'm stuck on R(ead) part.</p>\n<p>I'm not able to find how to issue <code>fetchByKey</code> request using Java. I've looked through <a href=\"https://www.digitalasset.com/developers/examples\" rel=\"nofollow noreferrer\">examples</a> and see how it's done in <code>@daml/react</code> example <a href=\"https://github.com/digital-asset/daml/blob/main/templates/create-daml-app/ui/src/components/MainScreen.tsx.template#L37\" rel=\"nofollow noreferrer\">here</a>. It uses JSON-API, and it's <a href=\"https://docs.daml.com/json-api/index.html#fetch-contract-by-key\" rel=\"nofollow noreferrer\">/v1/fetch</a> endpoint. But I don't see similar requests in <a href=\"https://github.com/digital-asset/daml/tree/main/templates/quickstart-java\" rel=\"nofollow noreferrer\">quickstart-java</a> and <a href=\"https://github.com/digital-asset/ex-java-bindings\" rel=\"nofollow noreferrer\">ex-java-bindings</a> repos. Also, both examples don't have a <code>template</code> with <code>key</code> defined.</p>\n<p>The only working solution I can think of (based on the examples above) is to subscribe to <code>ActiveContractsClient.getActiveContracts</code> for my template, then store received contracts in DB and fetch by key from DB. But that sounds overly complicated comparing to JS examples.</p>\n<p>Please, point me towards a working example for fetching by key using Java bindings. I'm okay with any JVM language (Java, Kotlin, Scala, Clojure, Groovy).</p>\n<p>I'm also okay with calling JSON-API node from Java, but don't see any bindings for this. Am I stuck with manually constructing the JSON request in this case?</p>\n"},{"tags":["java","scala","apache-spark","google-bigquery","sbt"],"comments":[{"owner":{"account_id":9145961,"reputation":4103,"user_id":6802156,"display_name":"Emiliano Martinez"},"score":0,"creation_date":1662372938,"post_id":73606520,"comment_id":129983370,"body_markdown":"the problem is indeed with the jackson-databind. Are you using sbt assembly to build a fat jar?","body":"the problem is indeed with the jackson-databind. Are you using sbt assembly to build a fat jar?"},{"owner":{"account_id":26247891,"reputation":19,"user_id":19921101,"display_name":"Arjun V"},"score":0,"creation_date":1662375311,"post_id":73606520,"comment_id":129984156,"body_markdown":"@EmilianoMartinez yes i use sbt assembly. Here my issue is when i run code, i get this exception","body":"@EmilianoMartinez yes i use sbt assembly. Here my issue is when i run code, i get this exception"},{"owner":{"account_id":9145961,"reputation":4103,"user_id":6802156,"display_name":"Emiliano Martinez"},"score":0,"creation_date":1662376445,"post_id":73606520,"comment_id":129984534,"body_markdown":"I suppose that you run your code in one spark provider. Is there any reason to build a fat jar with spark and big query dependencies?","body":"I suppose that you run your code in one spark provider. Is there any reason to build a fat jar with spark and big query dependencies?"}],"answers":[{"tags":[],"owner":{"account_id":26247891,"reputation":19,"user_id":19921101,"display_name":"Arjun V"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1662557734,"creation_date":1662557641,"answer_id":73636448,"question_id":73606520,"body_markdown":"I identified root cause and came to solution\r\n\r\nIssue is that jackson used by Spark and BigQuery is different so I tried to use Spark which uses same jackson used by BigQuery (I can&#39;t change Bigquery&#39;s version because it is already latest).\r\n\r\nI upgraded Spark to 3.3.0 and it worked.","title":"GCP BigQuery dependency causes failure in spark read with error of Jackson databind dependency","body":"<p>I identified root cause and came to solution</p>\n<p>Issue is that jackson used by Spark and BigQuery is different so I tried to use Spark which uses same jackson used by BigQuery (I can't change Bigquery's version because it is already latest).</p>\n<p>I upgraded Spark to 3.3.0 and it worked.</p>\n"}],"owner":{"account_id":26247891,"reputation":19,"user_id":19921101,"display_name":"Arjun V"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":365,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"accepted_answer_id":73636448,"answer_count":1,"score":-1,"last_activity_date":1662557734,"creation_date":1662366330,"question_id":73606520,"body_markdown":"I need to process data from file using Spark and save to GCP BigQuery but i&#39;m stuck with an exception when spark read happens and sbt has library dependency of GCP BigQuery as per main need. \r\n\r\nException i face:\r\n\r\n    Caused by: com.fasterxml.jackson.databind.JsonMappingException: Scala module 2.12.3 requires Jackson Databind version &gt;= 2.12.0 and &lt; 2.13.0\r\n\tat com.fasterxml.jackson.module.scala.JacksonModule.setupModule(JacksonModule.scala:61)\r\n\tat com.fasterxml.jackson.module.scala.JacksonModule.setupModule$(JacksonModule.scala:46)\r\n\tat com.fasterxml.jackson.module.scala.DefaultScalaModule.setupModule(DefaultScalaModule.scala:17)\r\n\tat com.fasterxml.jackson.databind.ObjectMapper.registerModule(ObjectMapper.java:853)\r\n\tat org.apache.spark.rdd.RDDOperationScope$.&lt;init&gt;(RDDOperationScope.scala:82)\r\n\tat org.apache.spark.rdd.RDDOperationScope$.&lt;clinit&gt;(RDDOperationScope.scala)\r\n\r\nCode references are as below...\r\n\r\nSBT file:\r\n\r\n```\r\nThisBuild / version := &quot;0.1.0&quot;\r\n\r\nThisBuild / scalaVersion := &quot;2.12.12&quot;\r\n\r\nlazy val root = (project in file(&quot;.&quot;))\r\n  .settings(\r\n    name := &quot;spark-code&quot;\r\n  )\r\n\r\nlazy val sparkVersion = &quot;3.2.0&quot;\r\n\r\nlibraryDependencies ++= Seq(\r\n  &quot;org.apache.spark&quot; %% &quot;spark-core&quot; % sparkVersion,\r\n  &quot;org.apache.spark&quot; %% &quot;spark-sql&quot; % sparkVersion,\r\n  &quot;org.rogach&quot; %% &quot;scallop&quot; % &quot;4.0.2&quot;,\r\n  &quot;com.google.cloud&quot; % &quot;google-cloud-pubsub&quot; % &quot;1.120.11&quot;,\r\n  &quot;com.google.cloud&quot; % &quot;google-cloud-bigquery&quot; % &quot;2.15.0&quot;,\r\n  &quot;com.google.code.gson&quot; % &quot;gson&quot; % &quot;2.8.9&quot;,\r\n  &quot;com.crealytics&quot; %% &quot;spark-excel&quot; % &quot;0.14.0&quot;\r\n)\r\n\r\nassemblyMergeStrategy in assembly := {\r\n  case PathList(&quot;META-INF&quot;, xs @ _*) =&gt; MergeStrategy.discard\r\n  case x                             =&gt; MergeStrategy.first\r\n}\r\n\r\n```\r\n\r\nSpark code:\r\n\r\n    spark.read\r\n          .format(&quot;csv&quot;)\r\n          .load(&quot;mypath&quot;)\r\n\r\n*To solve this, I tried the following things but non of these worked and exception still persists.*\r\n\r\n 1. exclude databind dependency from BigQuery&#39;s dependency in sbt like this,\r\n\r\n    libraryDependencies ++= Seq(&quot;com.google.cloud&quot; % &quot;google-cloud-bigquery&quot; % &quot;2.15.0&quot;, \r\n    exclude (&quot;com.fasterxml.jackson.core&quot;, &quot;jackson-core&quot;) \r\n    exclude (&quot;com.fasterxml.jackson.core&quot;, &quot;jackson-databind&quot;) \r\n    exclude (&quot;com.fasterxml.jackson.core&quot;, &quot;jackson-annotations&quot;)\r\n    )\r\n\r\n 2. Exclude dependency and then add explicitly in sbt like this,\r\n\r\n    libraryDependencies ++= Seq(&quot;com.google.cloud&quot; % &quot;google-cloud-bigquery&quot; % &quot;2.15.0&quot;, exclude (&quot;com.fasterxml.jackson.core&quot;, &quot;jackson-core&quot;) \r\n    exclude (&quot;com.fasterxml.jackson.core&quot;, &quot;jackson-databind&quot;) \r\n    exclude (&quot;com.fasterxml.jackson.core&quot;, &quot;jackson-annotations&quot;), &quot;com.fasterxml.jackson.core&quot; % &quot;jackson-databind&quot; % &quot;2.12.0&quot;, &quot;com.fasterxml.jackson.core&quot; % &quot;jackson-core&quot; % &quot;2.12.0&quot;\r\n    )\r\n\r\n 3. Tried to alter various versions of BigQuery dependency such as ```2.14.0, 2.13.0, 2.12.0 and 2.10.0```\r\n\r\n 4. Tried to alter scala version like ```2.12.13```\r\n\r\n&gt; Strange thing is If i remove BigQuery&#39;s dependency then Spark code\r\n&gt; works well without any error\r\n\r\nSo far, nothing worked and i&#39;m still not certain about root cause of the issue. \r\nI will really appreciate if i get quick help here.\r\nFeel free to suggest things to try out.\r\nThank you in advance!","title":"GCP BigQuery dependency causes failure in spark read with error of Jackson databind dependency","body":"<p>I need to process data from file using Spark and save to GCP BigQuery but i'm stuck with an exception when spark read happens and sbt has library dependency of GCP BigQuery as per main need.</p>\n<p>Exception i face:</p>\n<pre><code>Caused by: com.fasterxml.jackson.databind.JsonMappingException: Scala module 2.12.3 requires Jackson Databind version &gt;= 2.12.0 and &lt; 2.13.0\nat com.fasterxml.jackson.module.scala.JacksonModule.setupModule(JacksonModule.scala:61)\nat com.fasterxml.jackson.module.scala.JacksonModule.setupModule$(JacksonModule.scala:46)\nat com.fasterxml.jackson.module.scala.DefaultScalaModule.setupModule(DefaultScalaModule.scala:17)\nat com.fasterxml.jackson.databind.ObjectMapper.registerModule(ObjectMapper.java:853)\nat org.apache.spark.rdd.RDDOperationScope$.&lt;init&gt;(RDDOperationScope.scala:82)\nat org.apache.spark.rdd.RDDOperationScope$.&lt;clinit&gt;(RDDOperationScope.scala)\n</code></pre>\n<p>Code references are as below...</p>\n<p>SBT file:</p>\n<pre><code>ThisBuild / version := &quot;0.1.0&quot;\n\nThisBuild / scalaVersion := &quot;2.12.12&quot;\n\nlazy val root = (project in file(&quot;.&quot;))\n  .settings(\n    name := &quot;spark-code&quot;\n  )\n\nlazy val sparkVersion = &quot;3.2.0&quot;\n\nlibraryDependencies ++= Seq(\n  &quot;org.apache.spark&quot; %% &quot;spark-core&quot; % sparkVersion,\n  &quot;org.apache.spark&quot; %% &quot;spark-sql&quot; % sparkVersion,\n  &quot;org.rogach&quot; %% &quot;scallop&quot; % &quot;4.0.2&quot;,\n  &quot;com.google.cloud&quot; % &quot;google-cloud-pubsub&quot; % &quot;1.120.11&quot;,\n  &quot;com.google.cloud&quot; % &quot;google-cloud-bigquery&quot; % &quot;2.15.0&quot;,\n  &quot;com.google.code.gson&quot; % &quot;gson&quot; % &quot;2.8.9&quot;,\n  &quot;com.crealytics&quot; %% &quot;spark-excel&quot; % &quot;0.14.0&quot;\n)\n\nassemblyMergeStrategy in assembly := {\n  case PathList(&quot;META-INF&quot;, xs @ _*) =&gt; MergeStrategy.discard\n  case x                             =&gt; MergeStrategy.first\n}\n\n</code></pre>\n<p>Spark code:</p>\n<pre><code>spark.read\n      .format(&quot;csv&quot;)\n      .load(&quot;mypath&quot;)\n</code></pre>\n<p><em>To solve this, I tried the following things but non of these worked and exception still persists.</em></p>\n<ol>\n<li><p>exclude databind dependency from BigQuery's dependency in sbt like this,</p>\n<p>libraryDependencies ++= Seq(&quot;com.google.cloud&quot; % &quot;google-cloud-bigquery&quot; % &quot;2.15.0&quot;,\nexclude (&quot;com.fasterxml.jackson.core&quot;, &quot;jackson-core&quot;)\nexclude (&quot;com.fasterxml.jackson.core&quot;, &quot;jackson-databind&quot;)\nexclude (&quot;com.fasterxml.jackson.core&quot;, &quot;jackson-annotations&quot;)\n)</p>\n</li>\n<li><p>Exclude dependency and then add explicitly in sbt like this,</p>\n<p>libraryDependencies ++= Seq(&quot;com.google.cloud&quot; % &quot;google-cloud-bigquery&quot; % &quot;2.15.0&quot;, exclude (&quot;com.fasterxml.jackson.core&quot;, &quot;jackson-core&quot;)\nexclude (&quot;com.fasterxml.jackson.core&quot;, &quot;jackson-databind&quot;)\nexclude (&quot;com.fasterxml.jackson.core&quot;, &quot;jackson-annotations&quot;), &quot;com.fasterxml.jackson.core&quot; % &quot;jackson-databind&quot; % &quot;2.12.0&quot;, &quot;com.fasterxml.jackson.core&quot; % &quot;jackson-core&quot; % &quot;2.12.0&quot;\n)</p>\n</li>\n<li><p>Tried to alter various versions of BigQuery dependency such as <code>2.14.0, 2.13.0, 2.12.0 and 2.10.0</code></p>\n</li>\n<li><p>Tried to alter scala version like <code>2.12.13</code></p>\n</li>\n</ol>\n<blockquote>\n<p>Strange thing is If i remove BigQuery's dependency then Spark code\nworks well without any error</p>\n</blockquote>\n<p>So far, nothing worked and i'm still not certain about root cause of the issue.\nI will really appreciate if i get quick help here.\nFeel free to suggest things to try out.\nThank you in advance!</p>\n"},{"tags":["java","hibernate","unique-constraint","spring-boot-test","dbunit"],"comments":[{"owner":{"account_id":179640,"reputation":15442,"user_id":412446,"accept_rate":41,"display_name":"Christian Beikov"},"score":1,"creation_date":1662541251,"post_id":73611181,"comment_id":130027014,"body_markdown":"Like I answered on discourse, this is not possible. https://discourse.hibernate.org/t/avoid-having-constraint-created-by-hibernate-without-having-access-to-the-entity/6636/2","body":"Like I answered on discourse, this is not possible. <a href=\"https://discourse.hibernate.org/t/avoid-having-constraint-created-by-hibernate-without-having-access-to-the-entity/6636/2\" rel=\"nofollow noreferrer\">discourse.hibernate.org/t/&hellip;</a>"}],"answers":[{"tags":[],"owner":{"account_id":2043806,"reputation":4771,"user_id":2118777,"display_name":"Pipo"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1662557248,"creation_date":1662557248,"answer_id":73636366,"question_id":73611181,"body_markdown":"The workaround I found is to copy-paste into JUnitTests the entity causing the issue with same package name, remove the uniqueness into this second class and the latter replaced the wrong one. I had this issue into a Springboot JUnitTest. ","title":"How to avoid having constraint created by hibernate without having access to the entity","body":"<p>The workaround I found is to copy-paste into JUnitTests the entity causing the issue with same package name, remove the uniqueness into this second class and the latter replaced the wrong one. I had this issue into a Springboot JUnitTest.</p>\n"}],"owner":{"account_id":2043806,"reputation":4771,"user_id":2118777,"display_name":"Pipo"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":161,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1662557248,"creation_date":1662389359,"question_id":73611181,"body_markdown":"I have an entity where I cant have access to modify a wrong `unique=true` into the column definition\r\n```\r\n@Embeddable\r\nclass SomePk{\r\n    @Column(name=&quot;PERSON_ID&quot;, unique=true, nullable=false, precision=15)\r\n\tpublic long getPersonId() {\r\n\t\treturn this.personId;\r\n\t}\r\n}\r\n```\r\n\r\nUsing DB-Rider/DBUnit with Hibernate and Spring into JUnitTests the tables and constraints are auto-created before inserts are done according to DB-rider principles.\r\n\r\nAm looking for a way of either avoid this constraint creation. Having something like `com.my.package.SomePk.PERSON_ID:forceUnique=false`\r\n\r\nLooked into insert listeners, as well as [hibernate reverse engineering config][1] but didnt find a way yet...\r\n\r\n\r\n  [1]: https://docs.jboss.org/tools/3.3.0.Final/en/hibernatetools/html/ant.html#d0e4485","title":"How to avoid having constraint created by hibernate without having access to the entity","body":"<p>I have an entity where I cant have access to modify a wrong <code>unique=true</code> into the column definition</p>\n<pre><code>@Embeddable\nclass SomePk{\n    @Column(name=&quot;PERSON_ID&quot;, unique=true, nullable=false, precision=15)\n    public long getPersonId() {\n        return this.personId;\n    }\n}\n</code></pre>\n<p>Using DB-Rider/DBUnit with Hibernate and Spring into JUnitTests the tables and constraints are auto-created before inserts are done according to DB-rider principles.</p>\n<p>Am looking for a way of either avoid this constraint creation. Having something like <code>com.my.package.SomePk.PERSON_ID:forceUnique=false</code></p>\n<p>Looked into insert listeners, as well as <a href=\"https://docs.jboss.org/tools/3.3.0.Final/en/hibernatetools/html/ant.html#d0e4485\" rel=\"nofollow noreferrer\">hibernate reverse engineering config</a> but didnt find a way yet...</p>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":1992310,"reputation":11172,"user_id":1786065,"accept_rate":91,"display_name":"Rogue"},"score":0,"creation_date":1662559642,"post_id":73635444,"comment_id":130034440,"body_markdown":"imo, what you&#39;re really looking for is a profiler / java-agent, which would let you see this information.","body":"imo, what you&#39;re really looking for is a profiler / java-agent, which would let you see this information."},{"owner":{"account_id":25954079,"reputation":33,"user_id":19671668,"display_name":"Bishal Ghosh"},"score":0,"creation_date":1662567227,"post_id":73635444,"comment_id":130037619,"body_markdown":"I dint get to what you&#39;ve said. Could you please elaborate on how to find out the above programatically?","body":"I dint get to what you&#39;ve said. Could you please elaborate on how to find out the above programatically?"},{"owner":{"account_id":1992310,"reputation":11172,"user_id":1786065,"accept_rate":91,"display_name":"Rogue"},"score":0,"creation_date":1662569823,"post_id":73635444,"comment_id":130038478,"body_markdown":"The profiler wouldn&#39;t be a programmatic approach necessarily, but you could utilize the java-agent available from some profilers (e.g. YourKit or VisualVM) to access the API they use, retrieving that information yourself programmatically. There&#39;s a little research involved in learning that, of course.","body":"The profiler wouldn&#39;t be a programmatic approach necessarily, but you could utilize the java-agent available from some profilers (e.g. YourKit or VisualVM) to access the API they use, retrieving that information yourself programmatically. There&#39;s a little research involved in learning that, of course."}],"answers":[{"tags":[],"owner":{"account_id":6982783,"reputation":326,"user_id":5354987,"display_name":"Samuel Marchant"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1662557240,"creation_date":1662557240,"answer_id":73636363,"question_id":73635444,"body_markdown":"\r\n\r\nlong memavailable = Runtime.getRuntime().freeMemory(); // quantity of clear memory\r\n\r\nThere are a couple of other views of memory by methods in class Runtime","title":"How to find out the total memory bytes used in java with the objects that has been removed out by GC?","body":"<p>long memavailable = Runtime.getRuntime().freeMemory(); // quantity of clear memory</p>\n<p>There are a couple of other views of memory by methods in class Runtime</p>\n"}],"owner":{"account_id":25954079,"reputation":33,"user_id":19671668,"display_name":"Bishal Ghosh"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":33,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1662557240,"creation_date":1662553351,"question_id":73635444,"body_markdown":"I want to find the total memory allocation until now with the objects that has been removed out by GC?\r\n\r\nIs there any way to find out the above with the help of any **library** or Classes like **Runtime**, **ManagementFactory** and **MemoryMxBean**?","title":"How to find out the total memory bytes used in java with the objects that has been removed out by GC?","body":"<p>I want to find the total memory allocation until now with the objects that has been removed out by GC?</p>\n<p>Is there any way to find out the above with the help of any <strong>library</strong> or Classes like <strong>Runtime</strong>, <strong>ManagementFactory</strong> and <strong>MemoryMxBean</strong>?</p>\n"},{"tags":["java","java-11"],"comments":[{"owner":{"account_id":290561,"reputation":10809,"user_id":592182,"accept_rate":100,"display_name":"forsvarir"},"score":2,"creation_date":1340783005,"post_id":11221491,"comment_id":14737255,"body_markdown":"Stupid question.. but why don&#39;t you just do this in the first place?: `String str=&quot;select * from m_menus;select * from m_roles&quot;;`  Is it really the string that&#39;s the problem or are you passing it to a SQL engine and getting results you&#39;re not happy with.","body":"Stupid question.. but why don&#39;t you just do this in the first place?: <code>String str=&quot;select * from m_menus;select * from m_roles&quot;;</code>  Is it really the string that&#39;s the problem or are you passing it to a SQL engine and getting results you&#39;re not happy with."},{"owner":{"account_id":942836,"reputation":1079,"user_id":970612,"display_name":"Mukund Samant"},"score":0,"creation_date":1340783097,"post_id":11221491,"comment_id":14737288,"body_markdown":"@forsvarir Probably he is getting string in that manner from user input?","body":"@forsvarir Probably he is getting string in that manner from user input?"},{"owner":{"account_id":1118295,"reputation":2570,"user_id":1107129,"accept_rate":76,"display_name":"happy"},"score":0,"creation_date":1340783610,"post_id":11221491,"comment_id":14737465,"body_markdown":"I am taking string as input from user","body":"I am taking string as input from user"}],"answers":[{"tags":[],"owner":{"account_id":186761,"reputation":5329,"user_id":519348,"accept_rate":100,"display_name":"TZHX"},"down_vote_count":0,"up_vote_count":6,"is_accepted":true,"score":6,"last_activity_date":1340783040,"creation_date":1340783040,"answer_id":11221552,"question_id":11221491,"body_markdown":"If you want to use regex, you should use the `String.replaceAll()` method.","title":"how to make multiple line string to single line string?","body":"<p>If you want to use regex, you should use the <code>String.replaceAll()</code> method.</p>\n"},{"tags":[],"owner":{"account_id":1390816,"reputation":19719,"user_id":1321716,"display_name":"Mattias Buelens"},"down_vote_count":0,"up_vote_count":21,"is_accepted":false,"score":21,"last_activity_date":1340783049,"creation_date":1340783049,"answer_id":11221554,"question_id":11221491,"body_markdown":"Use [`String.replaceAll`](http://docs.oracle.com/javase/7/docs/api/java/lang/String.html#replaceAll%28java.lang.String,%20java.lang.String%29) instead.\r\n\r\n    str1=str.replaceAll(&quot;[\\r\\n]+&quot;, &quot; &quot;);","title":"how to make multiple line string to single line string?","body":"<p>Use <a href=\"http://docs.oracle.com/javase/7/docs/api/java/lang/String.html#replaceAll%28java.lang.String,%20java.lang.String%29\" rel=\"noreferrer\"><code>String.replaceAll</code></a> instead.</p>\n\n<pre><code>str1=str.replaceAll(\"[\\r\\n]+\", \" \");\n</code></pre>\n"},{"tags":[],"owner":{"account_id":297410,"reputation":10125,"user_id":602928,"accept_rate":86,"display_name":"Michael Laffargue"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1340783059,"creation_date":1340783059,"answer_id":11221556,"question_id":11221491,"body_markdown":"Why don&#39;t you use `str.replaceAll(&quot;\\r\\n&quot;, &quot; &quot;)` ?\r\n\r\nShould work and replace all occurences.","title":"how to make multiple line string to single line string?","body":"<p>Why don't you use <code>str.replaceAll(\"\\r\\n\", \" \")</code> ?</p>\n\n<p>Should work and replace all occurences.</p>\n"},{"tags":[],"owner":{"account_id":3010190,"reputation":334,"user_id":2553898,"accept_rate":40,"display_name":"dfinki"},"down_vote_count":0,"up_vote_count":11,"is_accepted":false,"score":11,"last_activity_date":1521013805,"creation_date":1521013805,"answer_id":49272225,"question_id":11221491,"body_markdown":"No regular expressions and operating system independent:\r\n\r\n    str1.replaceAll(System.lineSeparator(), &quot; &quot;);\r\n\r\nWindows uses \\r\\n as a line breaker, while *nix systems use only \\n.","title":"how to make multiple line string to single line string?","body":"<p>No regular expressions and operating system independent:</p>\n\n<pre><code>str1.replaceAll(System.lineSeparator(), \" \");\n</code></pre>\n\n<p>Windows uses \\r\\n as a line breaker, while *nix systems use only \\n.</p>\n"},{"tags":[],"owner":{"account_id":124772,"reputation":10425,"user_id":320087,"accept_rate":90,"display_name":"Niraj Sonawane"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1546409087,"creation_date":1546409087,"answer_id":54001925,"question_id":11221491,"body_markdown":"**Using Java 11 lines()** \r\n\r\nJava 11 has added new method `String::lines`, `lines` method uses specialized `Spliterator` to lazily provide lines from the source string\r\n\r\n    yourMultilineString.lines().collect(Collectors.joining(&quot;;&quot;));\r\n\r\n**Note** The string uses Windows’ `\\r\\n` and even though I’m on Linux, lines() still splits it. That’s because regardless of the operating system, **the method treats \\r, \\n, and \\r\\n as line terminators and splits there** – even if they are mixed in the same string.\r\n\r\n","title":"how to make multiple line string to single line string?","body":"<p><strong>Using Java 11 lines()</strong> </p>\n\n<p>Java 11 has added new method <code>String::lines</code>, <code>lines</code> method uses specialized <code>Spliterator</code> to lazily provide lines from the source string</p>\n\n<pre><code>yourMultilineString.lines().collect(Collectors.joining(\";\"));\n</code></pre>\n\n<p><strong>Note</strong> The string uses Windows’ <code>\\r\\n</code> and even though I’m on Linux, lines() still splits it. That’s because regardless of the operating system, <strong>the method treats \\r, \\n, and \\r\\n as line terminators and splits there</strong> – even if they are mixed in the same string.</p>\n"},{"tags":[],"owner":{"account_id":13981482,"reputation":11,"user_id":10097518,"display_name":"joslin selva c"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1546411241,"creation_date":1546409708,"answer_id":54002018,"question_id":11221491,"body_markdown":"    str1=str.replaceAll(&quot;[\\r\\n]+&quot;, &quot; &quot;);","title":"how to make multiple line string to single line string?","body":"<pre><code>str1=str.replaceAll(\"[\\r\\n]+\", \" \");\n</code></pre>\n"},{"tags":[],"owner":{"account_id":17795897,"reputation":11,"user_id":12923742,"display_name":"i-am-naveen-m-j"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1662557019,"creation_date":1662556447,"answer_id":73636194,"question_id":11221491,"body_markdown":"    String actualTooltip_3 = string.replaceAll(&quot;[\\r\\n]+&quot;, &quot; &quot;);\r\n\r\n**/////////--------how to make multiple line string to single line string?--------////////**\r\n///string - value having multi lines \r\n\r\n///actualTooltip_3 - Value shown in a single line \r\n\r\n[enter image description here][1]\r\n\r\n[enter image description here][2]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/k6GAc.png\r\n  [2]: https://i.stack.imgur.com/hNrIl.png","title":"how to make multiple line string to single line string?","body":"<pre><code>String actualTooltip_3 = string.replaceAll(&quot;[\\r\\n]+&quot;, &quot; &quot;);\n</code></pre>\n<p><strong>/////////--------how to make multiple line string to single line string?--------////////</strong>\n///string - value having multi lines</p>\n<p>///actualTooltip_3 - Value shown in a single line</p>\n<p><a href=\"https://i.stack.imgur.com/k6GAc.png\" rel=\"nofollow noreferrer\">enter image description here</a></p>\n<p><a href=\"https://i.stack.imgur.com/hNrIl.png\" rel=\"nofollow noreferrer\">enter image description here</a></p>\n"}],"owner":{"account_id":1118295,"reputation":2570,"user_id":1107129,"accept_rate":76,"display_name":"happy"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":46108,"favorite_count":0,"down_vote_count":0,"up_vote_count":14,"accepted_answer_id":11221552,"answer_count":7,"score":14,"last_activity_date":1662557019,"creation_date":1340782793,"question_id":11221491,"body_markdown":"I have below string\r\n\r\n    String str=&quot;select * from m_menus;\r\n    \r\n    select * from m_roles&quot;;\r\n\r\n\r\nI want above string in one line\r\nlike\r\n\r\n    String str=&quot;select * from m_menus;select * from m_roles&quot;;\r\n\r\n\r\nI have tried \r\n\r\n    str1=str.replace(&quot;[\\r\\n]+&quot;, &quot; &quot;); \r\n\r\nand also\r\n\r\n    str1=str.replace(&quot;\\n&quot;,&quot; &quot;); \r\n\r\nBoth are not working.\r\n","title":"how to make multiple line string to single line string?","body":"<p>I have below string</p>\n\n<pre><code>String str=\"select * from m_menus;\n\nselect * from m_roles\";\n</code></pre>\n\n<p>I want above string in one line\nlike</p>\n\n<pre><code>String str=\"select * from m_menus;select * from m_roles\";\n</code></pre>\n\n<p>I have tried </p>\n\n<pre><code>str1=str.replace(\"[\\r\\n]+\", \" \"); \n</code></pre>\n\n<p>and also</p>\n\n<pre><code>str1=str.replace(\"\\n\",\" \"); \n</code></pre>\n\n<p>Both are not working.</p>\n"},{"tags":["java","rest"],"answers":[{"tags":[],"owner":{"account_id":5613556,"reputation":2315,"user_id":4445625,"accept_rate":50,"display_name":"Marc Stroebel"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1662556493,"creation_date":1662556493,"answer_id":73636204,"question_id":73635215,"body_markdown":"known problem... what I used often:\r\n\r\n- wrap (hide) third party api in a module\r\n- create custom pojo(s) containing only values needed from your domain logic\r\n- use only this pojo(s) to interact between your domain/third party module\r\n- create module private/inner classes mapping the third party api model as pojos\r\n- or consider using nested maps instead with custom jackson de/serializers \r\n- map domain pojo to api pojos\r\n\r\nor, a bit hacky, if you only need to change same values\r\n- store json request payload as a template with placeholders\r\n- use e.g. regex to replace before send","title":"Best practice to create POJO / DTO for sending deep nested JSON","body":"<p>known problem... what I used often:</p>\n<ul>\n<li>wrap (hide) third party api in a module</li>\n<li>create custom pojo(s) containing only values needed from your domain logic</li>\n<li>use only this pojo(s) to interact between your domain/third party module</li>\n<li>create module private/inner classes mapping the third party api model as pojos</li>\n<li>or consider using nested maps instead with custom jackson de/serializers</li>\n<li>map domain pojo to api pojos</li>\n</ul>\n<p>or, a bit hacky, if you only need to change same values</p>\n<ul>\n<li>store json request payload as a template with placeholders</li>\n<li>use e.g. regex to replace before send</li>\n</ul>\n"},{"tags":[],"owner":{"account_id":7655262,"reputation":7506,"user_id":5802417,"display_name":"Michael Gantman"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1662557018,"creation_date":1662557018,"answer_id":73636314,"question_id":73635215,"body_markdown":"You can do what you suggested or simply de-serialize it into `Map&lt;String, Object&gt;` Using map makes it easy but you won&#39;t have content validation and modifying the content (if you need it becomes complex)","title":"Best practice to create POJO / DTO for sending deep nested JSON","body":"<p>You can do what you suggested or simply de-serialize it into <code>Map&lt;String, Object&gt;</code> Using map makes it easy but you won't have content validation and modifying the content (if you need it becomes complex)</p>\n"}],"owner":{"account_id":24811774,"reputation":21,"user_id":18693139,"display_name":"creas443"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":604,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":73636204,"answer_count":2,"score":0,"last_activity_date":1662557018,"creation_date":1662552330,"question_id":73635215,"body_markdown":"When developing our API in spring boot that interacts with a third party API, I have to create a DTO to populate and send to a third party.  Thing is, the required JSON has a ton of nested objects.  For example:\r\n\r\n    {\r\n      &quot;profile&quot;: {\r\n        &quot;firstName&quot;: &quot;firstname&quot;,\r\n        &quot;credentials&quot;: {\r\n            &quot;password&quot; : {\r\n              &quot;hook&quot;: {\r\n                &quot;type&quot;: &quot;default&quot;\r\n              }\r\n            }\r\n        }\r\n      }\r\n    }\r\nSo, what is simple to express in a JSON object is not simple to express in POJO/DTO classes, due to the high number of nested objects.\r\n\r\nShould I create public or anonymous classes for all the nested properties? Or is there a better way to do this?\r\n\r\nFor example using anonymous, I can keep everything in one java file by not making the subobjects public.   What are your techniques for this?\r\n","title":"Best practice to create POJO / DTO for sending deep nested JSON","body":"<p>When developing our API in spring boot that interacts with a third party API, I have to create a DTO to populate and send to a third party.  Thing is, the required JSON has a ton of nested objects.  For example:</p>\n<pre><code>{\n  &quot;profile&quot;: {\n    &quot;firstName&quot;: &quot;firstname&quot;,\n    &quot;credentials&quot;: {\n        &quot;password&quot; : {\n          &quot;hook&quot;: {\n            &quot;type&quot;: &quot;default&quot;\n          }\n        }\n    }\n  }\n}\n</code></pre>\n<p>So, what is simple to express in a JSON object is not simple to express in POJO/DTO classes, due to the high number of nested objects.</p>\n<p>Should I create public or anonymous classes for all the nested properties? Or is there a better way to do this?</p>\n<p>For example using anonymous, I can keep everything in one java file by not making the subobjects public.   What are your techniques for this?</p>\n"},{"tags":["java","quarkus","reactive"],"answers":[{"tags":[],"owner":{"account_id":385127,"reputation":6284,"user_id":742081,"display_name":"Ladicek"},"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1662364358,"creation_date":1662364358,"answer_id":73606120,"question_id":73605586,"body_markdown":"You&#39;re running into https://github.com/quarkusio/quarkus/issues/21884. It may seem unexpected, but the client has a connection pool with default size of 20. If you want to allow more concurrent requests than 20, you can reconfigure it:\r\n\r\n```\r\nquarkus.rest-client.&quot;com.example.TimeoutTestService&quot;.connection-pool-size=100\r\n```","title":"Is Quarkus reactive client really reactive?","body":"<p>You're running into <a href=\"https://github.com/quarkusio/quarkus/issues/21884\" rel=\"nofollow noreferrer\">https://github.com/quarkusio/quarkus/issues/21884</a>. It may seem unexpected, but the client has a connection pool with default size of 20. If you want to allow more concurrent requests than 20, you can reconfigure it:</p>\n<pre><code>quarkus.rest-client.&quot;com.example.TimeoutTestService&quot;.connection-pool-size=100\n</code></pre>\n"}],"owner":{"account_id":26247378,"reputation":33,"user_id":19920647,"display_name":"bropyro"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":646,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"accepted_answer_id":73606120,"answer_count":1,"score":3,"last_activity_date":1662556976,"creation_date":1662361221,"question_id":73605586,"body_markdown":"I wanted to probe the reactive REST client from Quarkus for slow backends and did some load testing on their suggested sample (https://github.com/quarkusio/quarkus-quickstarts/tree/main/rest-client-reactive-quickstart) with just some minor modifications.\r\nI have the following dependencies in my build.gradle with the Quarkus version set to 2.11.3.Final:\r\n```\r\ndependencies {\r\n    implementation enforcedPlatform(&quot;${quarkusPlatformGroupId}:${quarkusPlatformArtifactId}:${quarkusPlatformVersion}&quot;)\r\n    implementation &#39;io.quarkus:quarkus-rest-client-reactive&#39;\r\n    implementation &#39;io.quarkus:quarkus-resteasy-reactive&#39;\r\n    implementation &#39;io.quarkus:quarkus-arc&#39;\r\n    testImplementation &#39;io.quarkus:quarkus-junit5&#39;\r\n    testImplementation &#39;io.rest-assured:rest-assured&#39;\r\n}\r\n```\r\nI wanted to check the behavior for a slow answering backend with two variants\r\n\r\n - Creating a new Uni and delaying its emission\r\n - Calling a locally running go server that does nothing more than waiting one second to respond (can be found here: https://gist.github.com/s-macke/c3b1d0029ef61efc7ed2d22a4132cad2)\r\n\r\nMy resource and client calling the backend look as follows:\r\n```\r\n@Path(&quot;/reactive&quot;)\r\npublic class ReactiveResource {\r\n    \r\n    @RestClient\r\n    TimeoutTestService service;\r\n    \r\n    @GET\r\n    @Path(&quot;delay&quot;)\r\n    @Produces(MediaType.TEXT_PLAIN)\r\n    public Uni&lt;String&gt; reactiveThreadTimeout() {\r\n        return Uni.createFrom().item(&quot;Hello RESTEasy&quot;)\r\n                .onItem().delayIt().by(Duration.of(1, ChronoUnit.SECONDS));\r\n    }\r\n    \r\n    @GET\r\n    @Path(&quot;remote&quot;)\r\n    @Produces(MediaType.TEXT_PLAIN)\r\n    public Uni&lt;String&gt; reactiveRemoteTimeout() {\r\n        return service.testTimeoutReactive();\r\n    }\r\n    \r\n}\r\n```\r\n\r\n```\r\n@RegisterRestClient(baseUri = &quot;http://localhost:8500&quot;)\r\n@Produces(MediaType.TEXT_PLAIN)\r\npublic interface TimeoutTestService {\r\n    \r\n    @GET\r\n    @Path(&quot;/reactive&quot;)\r\n    Uni&lt;String&gt; testTimeoutReactive();\r\n    \r\n}\r\n```\r\nWith a load test I had no problems with the first variant with all requests being answered in 1 second even with 300 requests per second. In the second variant it worked perfectly with 20 rps but with more load response times slowly increased as if something was blocking the calling threads. I can rule out the go server as this can handle the 300 rps without problems when calling it directly. Maybe the problems are due to both Quarkus and the go server running on my local machine but I still would have expected better results with the reactive client.\r\nDid anyone else observe similar problems when using the reactive client with more than basic load?","title":"Is Quarkus reactive client really reactive?","body":"<p>I wanted to probe the reactive REST client from Quarkus for slow backends and did some load testing on their suggested sample (<a href=\"https://github.com/quarkusio/quarkus-quickstarts/tree/main/rest-client-reactive-quickstart\" rel=\"nofollow noreferrer\">https://github.com/quarkusio/quarkus-quickstarts/tree/main/rest-client-reactive-quickstart</a>) with just some minor modifications.\nI have the following dependencies in my build.gradle with the Quarkus version set to 2.11.3.Final:</p>\n<pre><code>dependencies {\n    implementation enforcedPlatform(&quot;${quarkusPlatformGroupId}:${quarkusPlatformArtifactId}:${quarkusPlatformVersion}&quot;)\n    implementation 'io.quarkus:quarkus-rest-client-reactive'\n    implementation 'io.quarkus:quarkus-resteasy-reactive'\n    implementation 'io.quarkus:quarkus-arc'\n    testImplementation 'io.quarkus:quarkus-junit5'\n    testImplementation 'io.rest-assured:rest-assured'\n}\n</code></pre>\n<p>I wanted to check the behavior for a slow answering backend with two variants</p>\n<ul>\n<li>Creating a new Uni and delaying its emission</li>\n<li>Calling a locally running go server that does nothing more than waiting one second to respond (can be found here: <a href=\"https://gist.github.com/s-macke/c3b1d0029ef61efc7ed2d22a4132cad2\" rel=\"nofollow noreferrer\">https://gist.github.com/s-macke/c3b1d0029ef61efc7ed2d22a4132cad2</a>)</li>\n</ul>\n<p>My resource and client calling the backend look as follows:</p>\n<pre><code>@Path(&quot;/reactive&quot;)\npublic class ReactiveResource {\n    \n    @RestClient\n    TimeoutTestService service;\n    \n    @GET\n    @Path(&quot;delay&quot;)\n    @Produces(MediaType.TEXT_PLAIN)\n    public Uni&lt;String&gt; reactiveThreadTimeout() {\n        return Uni.createFrom().item(&quot;Hello RESTEasy&quot;)\n                .onItem().delayIt().by(Duration.of(1, ChronoUnit.SECONDS));\n    }\n    \n    @GET\n    @Path(&quot;remote&quot;)\n    @Produces(MediaType.TEXT_PLAIN)\n    public Uni&lt;String&gt; reactiveRemoteTimeout() {\n        return service.testTimeoutReactive();\n    }\n    \n}\n</code></pre>\n<pre><code>@RegisterRestClient(baseUri = &quot;http://localhost:8500&quot;)\n@Produces(MediaType.TEXT_PLAIN)\npublic interface TimeoutTestService {\n    \n    @GET\n    @Path(&quot;/reactive&quot;)\n    Uni&lt;String&gt; testTimeoutReactive();\n    \n}\n</code></pre>\n<p>With a load test I had no problems with the first variant with all requests being answered in 1 second even with 300 requests per second. In the second variant it worked perfectly with 20 rps but with more load response times slowly increased as if something was blocking the calling threads. I can rule out the go server as this can handle the 300 rps without problems when calling it directly. Maybe the problems are due to both Quarkus and the go server running on my local machine but I still would have expected better results with the reactive client.\nDid anyone else observe similar problems when using the reactive client with more than basic load?</p>\n"},{"tags":["java","android","flutter","dart","compiler-errors"],"answers":[{"tags":[],"owner":{"account_id":23410298,"reputation":15,"user_id":17472114,"display_name":"Ashraful Alam"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1648615446,"creation_date":1648615446,"answer_id":71671608,"question_id":71671546,"body_markdown":"\r\n\r\n 1. Check the the SDK version if it is over 23/29.\r\n 2. Set the \r\n\r\n&gt; buildToolsVersion As 21.1.1\r\n\r\n\r\n ","title":"Flutter Error: Execution failed for task &#39;:device_information:parseDebugLocalResources&#39;","body":"<ol>\n<li>Check the the SDK version if it is over 23/29.</li>\n<li>Set the</li>\n</ol>\n<blockquote>\n<p>buildToolsVersion As 21.1.1</p>\n</blockquote>\n"},{"tags":[],"owner":{"account_id":16348195,"reputation":173,"user_id":11807412,"display_name":"Nikko"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1662556918,"creation_date":1662556918,"answer_id":73636286,"question_id":71671546,"body_markdown":"You can go to `Android Studio -&gt; Preferences -&gt; System Settings -&gt; Android SDK`\r\n\r\nThere uninstall and reinstall any partially installed things in the tabs SDK Platforms and SDK Tools. (or any things that have an update available).\r\nYou can do that by unticking the checkbox on the left, clicking Apply, then ticking the checkbox again.","title":"Flutter Error: Execution failed for task &#39;:device_information:parseDebugLocalResources&#39;","body":"<p>You can go to <code>Android Studio -&gt; Preferences -&gt; System Settings -&gt; Android SDK</code></p>\n<p>There uninstall and reinstall any partially installed things in the tabs SDK Platforms and SDK Tools. (or any things that have an update available).\nYou can do that by unticking the checkbox on the left, clicking Apply, then ticking the checkbox again.</p>\n"}],"owner":{"account_id":16375498,"reputation":21,"user_id":11827713,"display_name":"Shoeb Adnan"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2574,"favorite_count":0,"down_vote_count":1,"up_vote_count":2,"answer_count":2,"score":1,"last_activity_date":1662556918,"creation_date":1648614882,"question_id":71671546,"body_markdown":"Can not find any solution:\r\n\r\n    FAILURE: Build failed with an exception.\r\n\r\n* What went wrong:\r\nExecution failed for task &#39;:device_information:parseDebugLocalResources&#39;.\r\n&gt; Could not resolve all files for configuration &#39;:device_information:androidApis&#39;.\r\n   &gt; Failed to transform android.jar to match attributes {artifactType=android-platform-attr, org.gradle.libraryelements=jar, org.gradle.usage=java-runtime}.\r\n      &gt; Execution failed for PlatformAttrTransform: /Users/shoebadnan/Library/Android/sdk/platforms/android-32/android.jar.\r\n         &gt; /Users/shoebadnan/Library/Android/sdk/platforms/android-32/android.jar\r\n\r\n* Try:\r\nRun with --stacktrace option to get the stack trace. Run with --info or --debug option to get more log output. Run with --scan to get full insights.\r\n\r\n* Get more help at https://help.gradle.org\r\n\r\nBUILD FAILED in 5s\r\nException: Gradle task assembleDebug failed with exit code 1\r\n","title":"Flutter Error: Execution failed for task &#39;:device_information:parseDebugLocalResources&#39;","body":"<p>Can not find any solution:</p>\n<pre><code>FAILURE: Build failed with an exception.\n</code></pre>\n<ul>\n<li>What went wrong:\nExecution failed for task ':device_information:parseDebugLocalResources'.</li>\n</ul>\n<blockquote>\n<p>Could not resolve all files for configuration ':device_information:androidApis'.\nFailed to transform android.jar to match attributes {artifactType=android-platform-attr, org.gradle.libraryelements=jar, org.gradle.usage=java-runtime}.\n&gt; Execution failed for PlatformAttrTransform: /Users/shoebadnan/Library/Android/sdk/platforms/android-32/android.jar.\n&gt; /Users/shoebadnan/Library/Android/sdk/platforms/android-32/android.jar</p>\n</blockquote>\n<ul>\n<li><p>Try:\nRun with --stacktrace option to get the stack trace. Run with --info or --debug option to get more log output. Run with --scan to get full insights.</p>\n</li>\n<li><p>Get more help at <a href=\"https://help.gradle.org\" rel=\"nofollow noreferrer\">https://help.gradle.org</a></p>\n</li>\n</ul>\n<p>BUILD FAILED in 5s\nException: Gradle task assembleDebug failed with exit code 1</p>\n"},{"tags":["java","delimiter","readfile"],"comments":[{"owner":{"account_id":231683,"reputation":4218,"user_id":496038,"display_name":"pringi"},"score":1,"creation_date":1662468189,"post_id":73622199,"comment_id":130007996,"body_markdown":"And your problem is?","body":"And your problem is?"},{"owner":{"account_id":2485939,"reputation":19426,"user_id":2164365,"accept_rate":40,"display_name":"Abra"},"score":0,"creation_date":1662468622,"post_id":73622199,"comment_id":130008157,"body_markdown":"I need to know the structure of the file in order to know how to extract from it the relevant parts. Your sample appears to be a single &quot;entry&quot;. Can you add a second &quot;entry&quot; to the sample?","body":"I need to know the structure of the file in order to know how to extract from it the relevant parts. Your sample appears to be a single &quot;entry&quot;. Can you add a second &quot;entry&quot; to the sample?"},{"owner":{"account_id":2053598,"reputation":41316,"user_id":1831987,"display_name":"VGR"},"score":0,"creation_date":1662469188,"post_id":73622199,"comment_id":130008363,"body_markdown":"It should be obvious that you can’t just read all lines of the file.  Read one line, check if that line is `----`, and if it is, start another loop that reads clothing data.  That loop will itself need another inner loop to read each clothing item’s description.","body":"It should be obvious that you can’t just read all lines of the file.  Read one line, check if that line is <code>----</code>, and if it is, start another loop that reads clothing data.  That loop will itself need another inner loop to read each clothing item’s description."},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1662470590,"post_id":73622199,"comment_id":130008981,"body_markdown":"Your problem is really caused by the fact that your input file format is poor","body":"Your problem is really caused by the fact that your input file format is poor"},{"owner":{"account_id":26260249,"reputation":1,"user_id":19931681,"display_name":"Nova Sanitas"},"score":0,"creation_date":1662471106,"post_id":73622199,"comment_id":130009190,"body_markdown":"@VGR Thanks! I know I loop through each line, but I need to create an object that has the person&#39;s name as a field, the item name (Graphic TeeShirt) as a field, then the description under the item as the next field. Then the next object will be a new object with person&#39;s name as a field, the next item (Brown Slacks) as a field, then the description as a field.","body":"@VGR Thanks! I know I loop through each line, but I need to create an object that has the person&#39;s name as a field, the item name (Graphic TeeShirt) as a field, then the description under the item as the next field. Then the next object will be a new object with person&#39;s name as a field, the next item (Brown Slacks) as a field, then the description as a field."},{"owner":{"account_id":26260249,"reputation":1,"user_id":19931681,"display_name":"Nova Sanitas"},"score":0,"creation_date":1662471152,"post_id":73622199,"comment_id":130009207,"body_markdown":"@pringi I thought I explained that, I&#39;ll revisit my post and edit it.","body":"@pringi I thought I explained that, I&#39;ll revisit my post and edit it."},{"owner":{"account_id":26260249,"reputation":1,"user_id":19931681,"display_name":"Nova Sanitas"},"score":0,"creation_date":1662471157,"post_id":73622199,"comment_id":130009212,"body_markdown":"@g00se This doesn&#39;t help me understand what&#39;s wrong.","body":"@g00se This doesn&#39;t help me understand what&#39;s wrong."},{"owner":{"account_id":26260249,"reputation":1,"user_id":19931681,"display_name":"Nova Sanitas"},"score":0,"creation_date":1662471159,"post_id":73622199,"comment_id":130009214,"body_markdown":"@Abra The text snippet at the bottom is the file and how it is structured. There is a name, a separator &quot;----&quot;, then a list of clothing items and their descriptions, separated by &quot;****&quot;.","body":"@Abra The text snippet at the bottom is the file and how it is structured. There is a name, a separator &quot;----&quot;, then a list of clothing items and their descriptions, separated by &quot;****&quot;."},{"owner":{"account_id":2053598,"reputation":41316,"user_id":1831987,"display_name":"VGR"},"score":0,"creation_date":1662473246,"post_id":73622199,"comment_id":130010147,"body_markdown":"Think about what you need to do.  The explanation is practically the code:  “If I read a line which is `----`, I must then read an item category name, then I must repeatedly read an item title (clothing title), followed by description lines until I encounter `****` or `----`.  If I encounter `****`, I should repeat the reading of an item title followed by description lines.”","body":"Think about what you need to do.  The explanation is practically the code:  “If I read a line which is <code>----</code>, I must then read an item category name, then I must repeatedly read an item title (clothing title), followed by description lines until I encounter <code>****</code> or <code>----</code>.  If I encounter <code>****</code>, I should repeat the reading of an item title followed by description lines.”"},{"owner":{"account_id":26260249,"reputation":1,"user_id":19931681,"display_name":"Nova Sanitas"},"score":0,"creation_date":1662474755,"post_id":73622199,"comment_id":130010770,"body_markdown":"@VGR Appreciate it. Maybe I am over thinking it and just need to make the code literally do what&#39;s being asked of (I mean with if nesting and while loops).","body":"@VGR Appreciate it. Maybe I am over thinking it and just need to make the code literally do what&#39;s being asked of (I mean with if nesting and while loops)."}],"answers":[{"tags":[],"owner":{"account_id":13712379,"reputation":301,"user_id":9894387,"display_name":"Alexander Golovnya"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1662470082,"creation_date":1662470082,"answer_id":73622688,"question_id":73622199,"body_markdown":"It&#39;s not clear what you want to achieve and what is your issue exactly. You said that you can&#39;t figure out how to iterate through a text file, so let&#39;s dive into this fairly straightforward task.\r\n\r\nIn general, you have a valid, but the overcomplicated method for reading a file. Modern versions of Java provide a lot simpler methods and it&#39;s better to use them (only if you&#39;re not implementing some test task to understand how everything is working under the hood). \r\n\r\nPlease see my example below for reading a file line by line using Java NIO and Streams APIs:\r\n```java\r\nimport java.io.IOException;\r\nimport java.nio.file.Files;\r\nimport java.nio.file.Path;\r\nimport java.nio.file.Paths;\r\nimport java.util.Scanner;\r\nimport java.util.stream.Stream;\r\n\r\npublic class Test {\r\n    public static void main(String[] args) {\r\n        Scanner input = new Scanner(System.in);\r\n        System.out.print(&quot;Enter file path: &quot;);\r\n        String fileName = input.nextLine();\r\n        input.close();\r\n        \r\n        Path path = Paths.get(fileName);\r\n        try (Stream&lt;String&gt; lines = Files.lines(path)) {\r\n            lines.filter(line -&gt; {\r\n                // filter your lines on some predicate\r\n                return line.startsWith(&quot;+&quot;);\r\n            });\r\n            // do the mapping to your object\r\n        } catch (IOException e) {\r\n            throw new IllegalArgumentException(&quot;Incorrect file path&quot;);\r\n        }\r\n    }\r\n}\r\n```\r\n\r\nThis should allow you to filter the lines from your files based on some predicate and later to the mapping to your POJO if you intend to do so.\r\n\r\nIf you have any other issues besides reading the file and filtering its content, please add clarification to your questions. Preferably, with examples and test data.","title":"Java: How do I iterate through a file with multiple lines, then extract specific lines after filtering delimiters?","body":"<p>It's not clear what you want to achieve and what is your issue exactly. You said that you can't figure out how to iterate through a text file, so let's dive into this fairly straightforward task.</p>\n<p>In general, you have a valid, but the overcomplicated method for reading a file. Modern versions of Java provide a lot simpler methods and it's better to use them (only if you're not implementing some test task to understand how everything is working under the hood).</p>\n<p>Please see my example below for reading a file line by line using Java NIO and Streams APIs:</p>\n<pre class=\"lang-java prettyprint-override\"><code>import java.io.IOException;\nimport java.nio.file.Files;\nimport java.nio.file.Path;\nimport java.nio.file.Paths;\nimport java.util.Scanner;\nimport java.util.stream.Stream;\n\npublic class Test {\n    public static void main(String[] args) {\n        Scanner input = new Scanner(System.in);\n        System.out.print(&quot;Enter file path: &quot;);\n        String fileName = input.nextLine();\n        input.close();\n        \n        Path path = Paths.get(fileName);\n        try (Stream&lt;String&gt; lines = Files.lines(path)) {\n            lines.filter(line -&gt; {\n                // filter your lines on some predicate\n                return line.startsWith(&quot;+&quot;);\n            });\n            // do the mapping to your object\n        } catch (IOException e) {\n            throw new IllegalArgumentException(&quot;Incorrect file path&quot;);\n        }\n    }\n}\n</code></pre>\n<p>This should allow you to filter the lines from your files based on some predicate and later to the mapping to your POJO if you intend to do so.</p>\n<p>If you have any other issues besides reading the file and filtering its content, please add clarification to your questions. Preferably, with examples and test data.</p>\n"},{"tags":[],"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1662473448,"creation_date":1662473448,"answer_id":73623483,"question_id":73622199,"body_markdown":"As I mentioned, the data file format is lousy, which is the *real* source of the problem, but your delimiters can be used to help out a little. You might approach the problem this way. Obviously don&#39;t dump your code like I&#39;ve done into ```main``` but this might start you off. You *still* need to separate the clothing names from their descriptions but you should get the idea from the below. You can then start making a pojo out of the data.\r\nPass the path to your data file to this app and look out for the metadata debug outputs of &#39;Name&#39; and &#39;Item&#39;.\r\n\r\n    import java.util.Scanner;\r\n    import java.nio.file.Paths;\r\n    \r\n    public class PersonParser {\r\n        public static void main(String[] args) {\r\n            try {\r\n                try (Scanner scPeople = new Scanner(Paths.get(args[0]))) {\r\n                    scPeople.useDelimiter(&quot;----+&quot;);\r\n                    int tokenCount = 0;\r\n                    while (scPeople.hasNext()) {\r\n                        String token = scPeople.next();\r\n                        if (tokenCount % 2 == 0) {\r\n                            System.out.printf(&quot;Name: %s&quot;, token);\r\n                        } else {\r\n                            // Parse clothing\r\n                            Scanner scClothing = new Scanner(token);\r\n                            scClothing.useDelimiter(&quot;\\\\*\\\\*\\\\*+&quot;);\r\n                            while (scClothing.hasNext()) {\r\n                                String item = scClothing.next();\r\n                                System.out.printf(&quot;Item: %s&quot;, item);\r\n                            }\r\n                        }\r\n                        tokenCount++;\r\n                    }\r\n                }\r\n            } catch (Throwable t) {\r\n                t.printStackTrace();\r\n            }\r\n        }\r\n    \r\n    }\r\n\r\n","title":"Java: How do I iterate through a file with multiple lines, then extract specific lines after filtering delimiters?","body":"<p>As I mentioned, the data file format is lousy, which is the <em>real</em> source of the problem, but your delimiters can be used to help out a little. You might approach the problem this way. Obviously don't dump your code like I've done into <code>main</code> but this might start you off. You <em>still</em> need to separate the clothing names from their descriptions but you should get the idea from the below. You can then start making a pojo out of the data.\nPass the path to your data file to this app and look out for the metadata debug outputs of 'Name' and 'Item'.</p>\n<pre><code>import java.util.Scanner;\nimport java.nio.file.Paths;\n\npublic class PersonParser {\n    public static void main(String[] args) {\n        try {\n            try (Scanner scPeople = new Scanner(Paths.get(args[0]))) {\n                scPeople.useDelimiter(&quot;----+&quot;);\n                int tokenCount = 0;\n                while (scPeople.hasNext()) {\n                    String token = scPeople.next();\n                    if (tokenCount % 2 == 0) {\n                        System.out.printf(&quot;Name: %s&quot;, token);\n                    } else {\n                        // Parse clothing\n                        Scanner scClothing = new Scanner(token);\n                        scClothing.useDelimiter(&quot;\\\\*\\\\*\\\\*+&quot;);\n                        while (scClothing.hasNext()) {\n                            String item = scClothing.next();\n                            System.out.printf(&quot;Item: %s&quot;, item);\n                        }\n                    }\n                    tokenCount++;\n                }\n            }\n        } catch (Throwable t) {\n            t.printStackTrace();\n        }\n    }\n\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2485939,"reputation":19426,"user_id":2164365,"accept_rate":40,"display_name":"Abra"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1662556805,"creation_date":1662556805,"answer_id":73636259,"question_id":73622199,"body_markdown":"The following code is according to the details in your question, namely:\r\n1. The sample file in your question is the entire file.\r\n2. You want to create instances of objects that have the following three attributes:\r\n    - Person&#39;s name.\r\n    - Name of an item of clothing.\r\n    - Description of that item.\r\n\r\nNote that rather than ask the user for the name of the file, I simply use a hard-coded file name. Also note that method `toString`, in the below code, is simply for testing purposes. The code also uses [try-with-resources][1] and [method references][2].\r\n```java\r\npublic class ReadFile {\r\n    private static final String DELIM = &quot;****&quot;;\r\n    private static final String LAST = &quot;----&quot;;\r\n    private String name;\r\n    private String item;\r\n    private String description;\r\n\r\n    public void setName(String name) {\r\n        this.name = name;\r\n    }\r\n\r\n    public String getItem() {\r\n        return item;\r\n    }\r\n\r\n    public void setItem(String item) {\r\n        this.item = item;\r\n    }\r\n\r\n    public void setDescription(String description) {\r\n        this.description = description;\r\n    }\r\n    public String toString() {\r\n        return String.format(&quot;%s | %s | %s&quot;, name, item, description);\r\n    }\r\n\r\n    public static void main(String[] strings) {\r\n        try (FileReader fr = new FileReader(&quot;clothing.txt&quot;);\r\n             BufferedReader br = new BufferedReader(fr)) {\r\n            String line = br.readLine();\r\n            String name = line;\r\n            br.readLine();\r\n            br.readLine();\r\n            line = br.readLine();\r\n            String item = line;\r\n            List&lt;ReadFile&gt; list = new ArrayList&lt;&gt;();\r\n            ReadFile instance = new ReadFile();\r\n            instance.setName(name);\r\n            instance.setItem(item);\r\n            line = br.readLine();\r\n            StringBuilder description = new StringBuilder();\r\n            while (line != null &amp;&amp; !LAST.equals(line)) {\r\n                if (DELIM.equals(line)) {\r\n                    instance.setDescription(description.toString());\r\n                    list.add(instance);\r\n                    instance = new ReadFile();\r\n                    instance.setName(name);\r\n                    description.delete(0, description.length());\r\n                }\r\n                else {\r\n                    if (instance.getItem() == null) {\r\n                        instance.setItem(line);\r\n                    }\r\n                    else {\r\n                        description.append(line);\r\n                    }\r\n                }\r\n                line = br.readLine();\r\n            }\r\n            if (description.length() &gt; 0) {\r\n                instance.setDescription(description.toString());\r\n                list.add(instance);\r\n            }\r\n            list.forEach(System.out::println);\r\n        }\r\n        catch (IOException xIo) {\r\n            xIo.printStackTrace();\r\n        }\r\n    }\r\n}\r\n```\r\nRunning the above code produces the following output:\r\n```none\r\nName of Person | Graphic TeeShirt | This shirt has a fun logo ofdepicting stackoverflow and a horizon.\r\nName of Person | Brown Slacks | These slacks reach to the floor andbarely cover the ankles.\r\nName of Person | Worn Sandals | The straps on the sandals are frayed,and the soles are obviously worn.\r\n```\r\n\r\n\r\n  [1]: https://docs.oracle.com/javase/tutorial/essential/exceptions/tryResourceClose.html\r\n  [2]: https://docs.oracle.com/javase/tutorial/java/javaOO/methodreferences.html","title":"Java: How do I iterate through a file with multiple lines, then extract specific lines after filtering delimiters?","body":"<p>The following code is according to the details in your question, namely:</p>\n<ol>\n<li>The sample file in your question is the entire file.</li>\n<li>You want to create instances of objects that have the following three attributes:\n<ul>\n<li>Person's name.</li>\n<li>Name of an item of clothing.</li>\n<li>Description of that item.</li>\n</ul>\n</li>\n</ol>\n<p>Note that rather than ask the user for the name of the file, I simply use a hard-coded file name. Also note that method <code>toString</code>, in the below code, is simply for testing purposes. The code also uses <a href=\"https://docs.oracle.com/javase/tutorial/essential/exceptions/tryResourceClose.html\" rel=\"nofollow noreferrer\">try-with-resources</a> and <a href=\"https://docs.oracle.com/javase/tutorial/java/javaOO/methodreferences.html\" rel=\"nofollow noreferrer\">method references</a>.</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class ReadFile {\n    private static final String DELIM = &quot;****&quot;;\n    private static final String LAST = &quot;----&quot;;\n    private String name;\n    private String item;\n    private String description;\n\n    public void setName(String name) {\n        this.name = name;\n    }\n\n    public String getItem() {\n        return item;\n    }\n\n    public void setItem(String item) {\n        this.item = item;\n    }\n\n    public void setDescription(String description) {\n        this.description = description;\n    }\n    public String toString() {\n        return String.format(&quot;%s | %s | %s&quot;, name, item, description);\n    }\n\n    public static void main(String[] strings) {\n        try (FileReader fr = new FileReader(&quot;clothing.txt&quot;);\n             BufferedReader br = new BufferedReader(fr)) {\n            String line = br.readLine();\n            String name = line;\n            br.readLine();\n            br.readLine();\n            line = br.readLine();\n            String item = line;\n            List&lt;ReadFile&gt; list = new ArrayList&lt;&gt;();\n            ReadFile instance = new ReadFile();\n            instance.setName(name);\n            instance.setItem(item);\n            line = br.readLine();\n            StringBuilder description = new StringBuilder();\n            while (line != null &amp;&amp; !LAST.equals(line)) {\n                if (DELIM.equals(line)) {\n                    instance.setDescription(description.toString());\n                    list.add(instance);\n                    instance = new ReadFile();\n                    instance.setName(name);\n                    description.delete(0, description.length());\n                }\n                else {\n                    if (instance.getItem() == null) {\n                        instance.setItem(line);\n                    }\n                    else {\n                        description.append(line);\n                    }\n                }\n                line = br.readLine();\n            }\n            if (description.length() &gt; 0) {\n                instance.setDescription(description.toString());\n                list.add(instance);\n            }\n            list.forEach(System.out::println);\n        }\n        catch (IOException xIo) {\n            xIo.printStackTrace();\n        }\n    }\n}\n</code></pre>\n<p>Running the above code produces the following output:</p>\n<pre class=\"lang-none prettyprint-override\"><code>Name of Person | Graphic TeeShirt | This shirt has a fun logo ofdepicting stackoverflow and a horizon.\nName of Person | Brown Slacks | These slacks reach to the floor andbarely cover the ankles.\nName of Person | Worn Sandals | The straps on the sandals are frayed,and the soles are obviously worn.\n</code></pre>\n"}],"owner":{"account_id":26260249,"reputation":1,"user_id":19931681,"display_name":"Nova Sanitas"},"comment_count":10,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":480,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":3,"score":-1,"last_activity_date":1662556805,"creation_date":1662467847,"question_id":73622199,"body_markdown":"Clarification: I have a text file with multiple lines and I want to separate specific lines into fields for an object.\r\n\r\nI have been banging my head against a wall for about 3 days now, and I feel as if I&#39;m overthinking this.\r\n\r\n    import java.io.*;\r\n    import java.util.*;\r\n    public class ReadFile {\r\n    \r\n        public static void main(String[] args) throws FileNotFoundException {\r\n            String fileName = null;\r\n    \r\n    \r\n            Scanner input = new Scanner(System.in);\r\n            System.out.print(&quot;Enter file path: &quot;);\r\n            fileName = input.nextLine();      \r\n            input.close();\r\n            String fileText = readFile(fileName);\r\n            System.out.println(fileText);\r\n    \r\n        }\r\n    \r\n        public static String readFile(String fileName) throws FileNotFoundException {\r\n            String fileText = &quot;&quot;;\r\n            String lineText = &quot;&quot;;\r\n    \r\n            File newFile = new File(fileName);\r\n            if (newFile.canRead()) {\r\n                try (Scanner scanFile = new Scanner(newFile)) {\r\n                    while (scanFile.hasNext()) {\r\n                        lineText = scanFile.nextLine();\r\n                        \r\n                        if (lineText.startsWith(&quot;+&quot;)) {\r\n    \r\n                         }\r\n                        else { \r\n                            fileText = fileText + lineText + &quot;\\n&quot;;\r\n                        }\r\n                    }\r\n                } catch (Exception e) {\r\n                    System.out.println(e);\r\n                }\r\n            } else {\r\n                System.out.println(&quot;No file found. Please try again.&quot;);\r\n            }\r\n            \r\n            return fileText;\r\n        }\r\n    \r\n    }\r\n\r\nMy goal is to take a file that looks similar to this (this is the whole file, imagine a .txt with exactly this in it):\r\n\r\n    Name of Person\r\n    ----\r\n    Clothing:\r\n    Graphic TeeShirt\r\n    This shirt has a fun logo of\r\n    depicting stackoverflow and a horizon.\r\n    ****\r\n    Brown Slacks\r\n    These slacks reach to the floor and\r\n    barely cover the ankles.\r\n    ****\r\n    Worn Sandals\r\n    The straps on the sandals are frayed,\r\n    and the soles are obviously worn.\r\n    ----\r\n\r\nThen I need to extract the top line (e.g.: &quot;Graphic TeeShirt&quot;) as a type of clothing the object is wearing, then &quot;This shirt has a fun [...]&quot; as the description of that object.\r\n\r\nI have another .java with setters/getters/constructors, but I can&#39;t figure out how to iterate through the text file.\r\n\r\n\r\nEdit: I know I loop through each line, but I need to create an object that has the person&#39;s name as a field, the item name (Graphic TeeShirt) as a field, then the description under the item as the next field. Then the next object will be a new object with person&#39;s name as a field, the next item (Brown Slacks) as a field, then the description as a field.\r\n\r\nI don&#39;t know  how to separate the lines in to the fields I need.","title":"Java: How do I iterate through a file with multiple lines, then extract specific lines after filtering delimiters?","body":"<p>Clarification: I have a text file with multiple lines and I want to separate specific lines into fields for an object.</p>\n<p>I have been banging my head against a wall for about 3 days now, and I feel as if I'm overthinking this.</p>\n<pre><code>import java.io.*;\nimport java.util.*;\npublic class ReadFile {\n\n    public static void main(String[] args) throws FileNotFoundException {\n        String fileName = null;\n\n\n        Scanner input = new Scanner(System.in);\n        System.out.print(&quot;Enter file path: &quot;);\n        fileName = input.nextLine();      \n        input.close();\n        String fileText = readFile(fileName);\n        System.out.println(fileText);\n\n    }\n\n    public static String readFile(String fileName) throws FileNotFoundException {\n        String fileText = &quot;&quot;;\n        String lineText = &quot;&quot;;\n\n        File newFile = new File(fileName);\n        if (newFile.canRead()) {\n            try (Scanner scanFile = new Scanner(newFile)) {\n                while (scanFile.hasNext()) {\n                    lineText = scanFile.nextLine();\n                    \n                    if (lineText.startsWith(&quot;+&quot;)) {\n\n                     }\n                    else { \n                        fileText = fileText + lineText + &quot;\\n&quot;;\n                    }\n                }\n            } catch (Exception e) {\n                System.out.println(e);\n            }\n        } else {\n            System.out.println(&quot;No file found. Please try again.&quot;);\n        }\n        \n        return fileText;\n    }\n\n}\n</code></pre>\n<p>My goal is to take a file that looks similar to this (this is the whole file, imagine a .txt with exactly this in it):</p>\n<pre><code>Name of Person\n----\nClothing:\nGraphic TeeShirt\nThis shirt has a fun logo of\ndepicting stackoverflow and a horizon.\n****\nBrown Slacks\nThese slacks reach to the floor and\nbarely cover the ankles.\n****\nWorn Sandals\nThe straps on the sandals are frayed,\nand the soles are obviously worn.\n----\n</code></pre>\n<p>Then I need to extract the top line (e.g.: &quot;Graphic TeeShirt&quot;) as a type of clothing the object is wearing, then &quot;This shirt has a fun [...]&quot; as the description of that object.</p>\n<p>I have another .java with setters/getters/constructors, but I can't figure out how to iterate through the text file.</p>\n<p>Edit: I know I loop through each line, but I need to create an object that has the person's name as a field, the item name (Graphic TeeShirt) as a field, then the description under the item as the next field. Then the next object will be a new object with person's name as a field, the next item (Brown Slacks) as a field, then the description as a field.</p>\n<p>I don't know  how to separate the lines in to the fields I need.</p>\n"},{"tags":["java","android"],"comments":[{"owner":{"account_id":39846,"reputation":991133,"user_id":115145,"accept_rate":84,"display_name":"CommonsWare"},"score":2,"creation_date":1518985146,"post_id":48856121,"comment_id":84715705,"body_markdown":"I *strongly* recommend that you keep the video in a single activity. You are welcome to pass the current position of the video from activity to activity, but the user will experience a delay while the second activity loads the video to that point.","body":"I <i>strongly</i> recommend that you keep the video in a single activity. You are welcome to pass the current position of the video from activity to activity, but the user will experience a delay while the second activity loads the video to that point."},{"owner":{"account_id":11649011,"reputation":1,"user_id":8530824,"display_name":"amit kumar"},"score":0,"creation_date":1518987235,"post_id":48856121,"comment_id":84716389,"body_markdown":"Thanks for your response. If I have to change the videoview from full screen to some fixed sized videoview and to continue to play the video from same time without restarting it, how to go for it? How to deal with the time, so that it will start from its current position only?","body":"Thanks for your response. If I have to change the videoview from full screen to some fixed sized videoview and to continue to play the video from same time without restarting it, how to go for it? How to deal with the time, so that it will start from its current position only?"},{"owner":{"account_id":39846,"reputation":991133,"user_id":115145,"accept_rate":84,"display_name":"CommonsWare"},"score":1,"creation_date":1518987439,"post_id":48856121,"comment_id":84716474,"body_markdown":"Do that in one activity. Just change the size of the `VideoView`. Changing the size and position of widgets in Android is annoying (you need to modify the `LayoutParams` that controls the widget&#39;s size and position, then tell the framework that you modified the `LayoutParams`). However, it certainly works, and AFAIK it should work with `VideoView`.","body":"Do that in one activity. Just change the size of the <code>VideoView</code>. Changing the size and position of widgets in Android is annoying (you need to modify the <code>LayoutParams</code> that controls the widget&#39;s size and position, then tell the framework that you modified the <code>LayoutParams</code>). However, it certainly works, and AFAIK it should work with <code>VideoView</code>."},{"owner":{"account_id":1710326,"reputation":10640,"user_id":1568530,"accept_rate":60,"display_name":"Vladyslav Matviienko"},"score":0,"creation_date":1518989086,"post_id":48856121,"comment_id":84717002,"body_markdown":"I&#39;d suggest to remove view from one layout, and add it into another layout instead of changing it&#39;s size, as @CommonsWare suggests. This way you will avoid all those *anoynig* things to handle other views&#39; sizes, etc.","body":"I&#39;d suggest to remove view from one layout, and add it into another layout instead of changing it&#39;s size, as @CommonsWare suggests. This way you will avoid all those <i>anoynig</i> things to handle other views&#39; sizes, etc."}],"answers":[{"tags":[],"owner":{"account_id":22301228,"reputation":19,"user_id":16526426,"display_name":"NNAMDI HENRY"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1662556739,"creation_date":1662556739,"answer_id":73636255,"question_id":48856121,"body_markdown":"To achieve the best result, use &quot;Fragment&quot;  to display the video and also add another fragment to the same activity to display and do other stuff as you intend to do.","title":"Sending content of videoview from one activity to next acvity&#39;s video view","body":"<p>To achieve the best result, use &quot;Fragment&quot;  to display the video and also add another fragment to the same activity to display and do other stuff as you intend to do.</p>\n"}],"owner":{"account_id":11649011,"reputation":1,"user_id":8530824,"display_name":"amit kumar"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":44,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1662556739,"creation_date":1518984984,"question_id":48856121,"body_markdown":"I have a video playing in videoview in first activity. I want to to go to second activity and it should continue to play the same video (the video should not restart) in the videoview of second activity.\r\nI am thinking to use intent to pass it&#39;s contents to video view of second activity , but I am wondering about how to resume the video from the same point.\r\n\r\nPlease help me. If any link or article is there related to that, please let me . It will be very helpful for me.\r\n\r\nThanks in advance.","title":"Sending content of videoview from one activity to next acvity&#39;s video view","body":"<p>I have a video playing in videoview in first activity. I want to to go to second activity and it should continue to play the same video (the video should not restart) in the videoview of second activity.\nI am thinking to use intent to pass it's contents to video view of second activity , but I am wondering about how to resume the video from the same point.</p>\n\n<p>Please help me. If any link or article is there related to that, please let me . It will be very helpful for me.</p>\n\n<p>Thanks in advance.</p>\n"},{"tags":["java","makefile"],"comments":[{"owner":{"account_id":3211603,"reputation":289297,"user_id":2711488,"display_name":"Holger"},"score":1,"creation_date":1662555117,"post_id":73635664,"comment_id":130032509,"body_markdown":"What do you mean with “jdeps with BCEL library”? There is no relationship between these two things.","body":"What do you mean with “jdeps with BCEL library”? There is no relationship between these two things."},{"owner":{"account_id":3211603,"reputation":289297,"user_id":2711488,"display_name":"Holger"},"score":2,"creation_date":1662555533,"post_id":73635664,"comment_id":130032696,"body_markdown":"jdeps has its own bytecode processing classes and to extend it, you have to understand them anyway. Adding BCEL is just redundant.","body":"jdeps has its own bytecode processing classes and to extend it, you have to understand them anyway. Adding BCEL is just redundant."},{"owner":{"account_id":3211603,"reputation":289297,"user_id":2711488,"display_name":"Holger"},"score":2,"creation_date":1662556531,"post_id":73635664,"comment_id":130033098,"body_markdown":"You’re using a recent JDK, aren’t you? So, everything needed for formatting, is already built-in. See [this example](https://tio.run/##VY69DgIhEIT7e4rNVVC4PsDFzkajlVZaIeDJyQGB9ZKLuWdH1MSfapOZ2W@mE4OYdeqas@mDjwRdEdAK16L0LpFwhFtNF6/2Y9BLnWRTVdKKlGCvE8G9Agi3kzUSSpjKGbxR0Avj2I6iKRxEELHlryjAWwRVSNEE8hEWULP15tk7f/bO34nmeFzxQ13aXl9jIt2jvxGG4pJ17H8V@vPyg2RfOkdlUrBi/HE5bwp0qqacHw)…","body":"You’re using a recent JDK, aren’t you? So, everything needed for formatting, is already built-in. See <a href=\"https://tio.run/##VY69DgIhEIT7e4rNVVC4PsDFzkajlVZaIeDJyQGB9ZKLuWdH1MSfapOZ2W@mE4OYdeqas@mDjwRdEdAK16L0LpFwhFtNF6/2Y9BLnWRTVdKKlGCvE8G9Agi3kzUSSpjKGbxR0Avj2I6iKRxEELHlryjAWwRVSNEE8hEWULP15tk7f/bO34nmeFzxQ13aXl9jIt2jvxGG4pJ17H8V@vPyg2RfOkdlUrBi/HE5bwp0qqacHw\" rel=\"nofollow noreferrer\">this example</a>…"},{"owner":{"account_id":3139322,"reputation":2855,"user_id":2655092,"accept_rate":80,"display_name":"whoopdedoo"},"score":0,"creation_date":1662557280,"post_id":73635664,"comment_id":130033404,"body_markdown":"@Holger in your example the output is `(long,String,int[][])boolean` can it have the full path to class ? desired output `(long,java.lang.String,int[][])boolean`.  You deserve points for the comment above, if you create an answer I&#39;ll upvote.","body":"@Holger in your example the output is <code>(long,String,int[][])boolean</code> can it have the full path to class ? desired output <code>(long,java.lang.String,int[][])boolean</code>.  You deserve points for the comment above, if you create an answer I&#39;ll upvote."},{"owner":{"account_id":3211603,"reputation":289297,"user_id":2711488,"display_name":"Holger"},"score":2,"creation_date":1662565046,"post_id":73635664,"comment_id":130036731,"body_markdown":"[This, for example](https://tio.run/##hVHLTsMwELz3K1YRB5uHuTdCCPGQQIULPVFxMLZbXOJH7W2lCvHtZR0HyA0piaPx7szs7Fru5NlafxwO1sWQENYEiE76lVDBZ5QexXE7GV9u0XYiYzLSlauJ6mTOMDcZ4XMCELdvnVVArUjHLlgNTlrPnjFZYhUCZFrxvhSggqBNVslGDAkuoGEPsyJ0Xlyc14p2sbhfjND5O8nro2cSMe3sLoSWvzTkpXDuZAKHN0RJZI8G34Oe76MpgAjLm18p9qfK2@pmn9E4EbYoIqli51klEtrm2Mn9qJn/2xNlks6gSTObkfEhMvpxMrIS13S64T0HAIXddUYhu65nSFmsg/U0OmtOgZ7ND20yuE2@TEQe4AQacP2MTyTW1/KGV3Nf9A5rGHLesOuyrD4b9bMDu2RK2HyVktwXyipAtYpc0d698TiSW7w27Xh3kVIuw6oPuTK9CX4KugeH1CpYmwbySIK3LiIJXoKeEgkxi4a@ujr/Ohy@AQ) but it’s not an answer to the question you asked.","body":"<a href=\"https://tio.run/##hVHLTsMwELz3K1YRB5uHuTdCCPGQQIULPVFxMLZbXOJH7W2lCvHtZR0HyA0piaPx7szs7Fru5NlafxwO1sWQENYEiE76lVDBZ5QexXE7GV9u0XYiYzLSlauJ6mTOMDcZ4XMCELdvnVVArUjHLlgNTlrPnjFZYhUCZFrxvhSggqBNVslGDAkuoGEPsyJ0Xlyc14p2sbhfjND5O8nro2cSMe3sLoSWvzTkpXDuZAKHN0RJZI8G34Oe76MpgAjLm18p9qfK2@pmn9E4EbYoIqli51klEtrm2Mn9qJn/2xNlks6gSTObkfEhMvpxMrIS13S64T0HAIXddUYhu65nSFmsg/U0OmtOgZ7ND20yuE2@TEQe4AQacP2MTyTW1/KGV3Nf9A5rGHLesOuyrD4b9bMDu2RK2HyVktwXyipAtYpc0d698TiSW7w27Xh3kVIuw6oPuTK9CX4KugeH1CpYmwbySIK3LiIJXoKeEgkxi4a@ujr/Ohy@AQ\" rel=\"nofollow noreferrer\">This, for example</a> but it’s not an answer to the question you asked."}],"owner":{"account_id":3139322,"reputation":2855,"user_id":2655092,"accept_rate":80,"display_name":"whoopdedoo"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":46,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1662556573,"creation_date":1662554280,"question_id":73635664,"body_markdown":"I&#39;m patching `jdeps` and using an external JAR\r\n\r\n\r\n\r\n\r\n\r\n1. where and how do I add my JAR to use it inside **jdeps** ?  [here][3] ? \r\n\r\n2. I there a way to only build [jdeps][2] ? \r\n\r\n\r\nNotes:\r\n- JDK [Makefile][4] \r\n- [jdeps make folder][5] \r\n- [SetupCompileProperties][6]\r\n- **jdeps** compiled to binary and use `libjli.so` to launch JVM\r\n\r\n\r\n  [1]: https://github.com/apache/commons-bcel\r\n  [2]: https://github.com/openjdk/jdk/tree/master/src/jdk.jdeps\r\n  [3]: https://github.com/openjdk/jdk/blob/d6961045353897967bb734740225bd1cddf158e5/make/modules/jdk.jdeps/Gensrc.gmk#L37\r\n  [4]: https://github.com/openjdk/jdk/blob/master/Makefile\r\n  [5]: https://github.com/openjdk/jdk/tree/master/make/modules/jdk.jdeps\r\n  [6]: https://github.com/openjdk/jdk/blob/d6961045353897967bb734740225bd1cddf158e5/make/common/modules/GensrcProperties.gmk#L61","title":"build jdk.jdeps with external library","body":"<p>I'm patching <code>jdeps</code> and using an external JAR</p>\n<ol>\n<li><p>where and how do I add my JAR to use it inside <strong>jdeps</strong> ?  <a href=\"https://github.com/openjdk/jdk/blob/d6961045353897967bb734740225bd1cddf158e5/make/modules/jdk.jdeps/Gensrc.gmk#L37\" rel=\"nofollow noreferrer\">here</a> ?</p>\n</li>\n<li><p>I there a way to only build <a href=\"https://github.com/openjdk/jdk/tree/master/src/jdk.jdeps\" rel=\"nofollow noreferrer\">jdeps</a> ?</p>\n</li>\n</ol>\n<p>Notes:</p>\n<ul>\n<li>JDK <a href=\"https://github.com/openjdk/jdk/blob/master/Makefile\" rel=\"nofollow noreferrer\">Makefile</a></li>\n<li><a href=\"https://github.com/openjdk/jdk/tree/master/make/modules/jdk.jdeps\" rel=\"nofollow noreferrer\">jdeps make folder</a></li>\n<li><a href=\"https://github.com/openjdk/jdk/blob/d6961045353897967bb734740225bd1cddf158e5/make/common/modules/GensrcProperties.gmk#L61\" rel=\"nofollow noreferrer\">SetupCompileProperties</a></li>\n<li><strong>jdeps</strong> compiled to binary and use <code>libjli.so</code> to launch JVM</li>\n</ul>\n"},{"tags":["java","processing","p5.js"],"answers":[{"tags":[],"owner":{"account_id":32369,"reputation":51044,"user_id":89766,"accept_rate":92,"display_name":"George Profenza"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1662556533,"creation_date":1662556533,"answer_id":73636216,"question_id":73634805,"body_markdown":"So close! :)\r\n\r\nPerhaps the formatting might have made it harder to spot the issue.\r\nYou&#39;re calling `endRaw();` (which wraps up pdf recording) nested in the `for` loops.\r\n\r\nThis means it&#39;s only picking up the first box since `record` is set to `false` so the other boxes are ignored.\r\n\r\nI recommend using **Edit &gt; Auto Format** (CMD + T / Ctrl + T).\r\n\r\nSimply move the `if(record)` after the nested `for` loops:\r\n\r\n```java\r\n\r\nimport processing.pdf.*;\r\nint ofs = 500;\r\n\r\n\r\nboolean record;\r\n\r\nvoid setup() {\r\n  size(1400, 580, P3D);\r\n}\r\n\r\nvoid draw() {\r\n  if (record) {\r\n    beginRaw(PDF, &quot;box.pdf&quot;);\r\n  }\r\n\r\n\r\n  background(255);\r\n  translate(width/2, height/2, -800);\r\n\r\n  rotateZ(0.3);\r\n  rotateY(frameCount/500.0);\r\n  float x = sin(radians(frameCount*0.1));\r\n  for ( int xo = -ofs; xo&lt;=ofs; xo += 100) {\r\n    for ( int yo = -ofs; yo&lt;=ofs; yo += 100) {\r\n      pushMatrix();\r\n      translate ( xo, yo, 0);\r\n      box(200*x);\r\n      fill(155, 150, 90);\r\n      strokeWeight(3*x);\r\n      popMatrix();\r\n    }\r\n  }\r\n  \r\n  // finish recording to PDF only after everything was drawn \r\n  if (record) {\r\n    endRaw();\r\n    record = false;\r\n  }\r\n}\r\n\r\nvoid keyPressed() {\r\n  if (key == &#39;r&#39;) {\r\n    record = true;\r\n  }\r\n}\r\n\r\n\r\n```\r\n","title":"Why it is showing only one box in export of processing.org java pdf?","body":"<p>So close! :)</p>\n<p>Perhaps the formatting might have made it harder to spot the issue.\nYou're calling <code>endRaw();</code> (which wraps up pdf recording) nested in the <code>for</code> loops.</p>\n<p>This means it's only picking up the first box since <code>record</code> is set to <code>false</code> so the other boxes are ignored.</p>\n<p>I recommend using <strong>Edit &gt; Auto Format</strong> (CMD + T / Ctrl + T).</p>\n<p>Simply move the <code>if(record)</code> after the nested <code>for</code> loops:</p>\n<pre class=\"lang-java prettyprint-override\"><code>\nimport processing.pdf.*;\nint ofs = 500;\n\n\nboolean record;\n\nvoid setup() {\n  size(1400, 580, P3D);\n}\n\nvoid draw() {\n  if (record) {\n    beginRaw(PDF, &quot;box.pdf&quot;);\n  }\n\n\n  background(255);\n  translate(width/2, height/2, -800);\n\n  rotateZ(0.3);\n  rotateY(frameCount/500.0);\n  float x = sin(radians(frameCount*0.1));\n  for ( int xo = -ofs; xo&lt;=ofs; xo += 100) {\n    for ( int yo = -ofs; yo&lt;=ofs; yo += 100) {\n      pushMatrix();\n      translate ( xo, yo, 0);\n      box(200*x);\n      fill(155, 150, 90);\n      strokeWeight(3*x);\n      popMatrix();\n    }\n  }\n  \n  // finish recording to PDF only after everything was drawn \n  if (record) {\n    endRaw();\n    record = false;\n  }\n}\n\nvoid keyPressed() {\n  if (key == 'r') {\n    record = true;\n  }\n}\n\n\n</code></pre>\n"}],"owner":{"account_id":26270400,"reputation":31,"user_id":19940377,"display_name":"prof"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":59,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"answer_count":1,"score":3,"last_activity_date":1662556533,"creation_date":1662550543,"question_id":73634805,"body_markdown":"Here is my code down below, when in run it shows multiple boxes as I wanted but when I try to export, it only shows a single box at that frame position.I tried generating output at particular frame but its same issue\r\n\r\n    import processing.pdf.*;\r\n    int ofs = 500;\r\n    \r\n    \r\n    boolean record;\r\n    \r\n    void setup() {\r\n      size(1900, 1080, P3D);\r\n    }\r\n    \r\n    void draw() {\r\n      if (record) {\r\n        beginRaw(PDF, &quot;box.pdf&quot;);\r\n      }\r\n    \r\n    \r\n      background(255);\r\n      translate(width/2, height/2, -800);\r\n      \r\n      rotateZ(0.3);\r\n      rotateY(frameCount/500.0);\r\n      float x = sin(radians(frameCount*0.1));\r\n       for ( int xo = -ofs; xo&lt;=ofs; xo += 100) {\r\n         for ( int yo = -ofs; yo&lt;=ofs; yo += 100) {\r\n            pushMatrix();\r\n            translate ( xo, yo, 0);\r\n            box(200*x);\r\n            fill(155,150,90);\r\n            strokeWeight(3*x);\r\n            popMatrix();\r\n      if (record) {\r\n        endRaw();\r\n        record = false;\r\n      }\r\n        }\r\n          }\r\n            }\r\n    \r\n    void keyPressed() {\r\n      if (key == &#39;r&#39;) {\r\n        record = true;\r\n      }\r\n    }\r\n    \r\n    \r\n      ","title":"Why it is showing only one box in export of processing.org java pdf?","body":"<p>Here is my code down below, when in run it shows multiple boxes as I wanted but when I try to export, it only shows a single box at that frame position.I tried generating output at particular frame but its same issue</p>\n<pre><code>import processing.pdf.*;\nint ofs = 500;\n\n\nboolean record;\n\nvoid setup() {\n  size(1900, 1080, P3D);\n}\n\nvoid draw() {\n  if (record) {\n    beginRaw(PDF, &quot;box.pdf&quot;);\n  }\n\n\n  background(255);\n  translate(width/2, height/2, -800);\n  \n  rotateZ(0.3);\n  rotateY(frameCount/500.0);\n  float x = sin(radians(frameCount*0.1));\n   for ( int xo = -ofs; xo&lt;=ofs; xo += 100) {\n     for ( int yo = -ofs; yo&lt;=ofs; yo += 100) {\n        pushMatrix();\n        translate ( xo, yo, 0);\n        box(200*x);\n        fill(155,150,90);\n        strokeWeight(3*x);\n        popMatrix();\n  if (record) {\n    endRaw();\n    record = false;\n  }\n    }\n      }\n        }\n\nvoid keyPressed() {\n  if (key == 'r') {\n    record = true;\n  }\n}\n\n\n  \n</code></pre>\n"},{"tags":["java","spring","jpa","spring-data","spring-data-jpa"],"answers":[{"tags":[],"owner":{"account_id":1958533,"reputation":630,"user_id":1760867,"display_name":"Logesh G"},"down_vote_count":0,"up_vote_count":21,"is_accepted":true,"score":21,"last_activity_date":1394598334,"creation_date":1394598334,"answer_id":22342025,"question_id":22116005,"body_markdown":"I finally got it working this way,\r\n\r\n\r\n    SimpleJpaRepository&lt;User, Serializable&gt; jpaRepository;\r\n    jpaRepository = new SimpleJpaRepository&lt;User, Serializable&gt;(\r\n\t\tUser.class, entityManager);\r\n\r\n\r\nWith SimpleJpaRepository, I can use all repository methods.\r\n\r\n    jpaRepository.save(user);","title":"How to create Jpa repository dynamically inside a class?","body":"<p>I finally got it working this way,</p>\n\n<pre><code>SimpleJpaRepository&lt;User, Serializable&gt; jpaRepository;\njpaRepository = new SimpleJpaRepository&lt;User, Serializable&gt;(\n    User.class, entityManager);\n</code></pre>\n\n<p>With SimpleJpaRepository, I can use all repository methods.</p>\n\n<pre><code>jpaRepository.save(user);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":12563685,"reputation":2227,"user_id":9140438,"accept_rate":33,"display_name":"Pankaj Sharma"},"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1615377609,"creation_date":1615377609,"answer_id":66564339,"question_id":22116005,"body_markdown":"Using `SimpleJpaRepository` you can only use the default methods provided by interface but not what you declare in your `UserRepository`\r\n\r\nIf you wanted to create instance of interface of your `UserRepository` you can use -\r\n\r\n    RepositoryFactorySupport factory = new JpaRepositoryFactory(entityManager);\r\n    UserRepository repository = factory.getRepository(UserRepository.class);\r\n\r\nit will give you liberty to use custom methods also that was defined by you in `UserRepository`\r\n\r\n\r\n","title":"How to create Jpa repository dynamically inside a class?","body":"<p>Using <code>SimpleJpaRepository</code> you can only use the default methods provided by interface but not what you declare in your <code>UserRepository</code></p>\n<p>If you wanted to create instance of interface of your <code>UserRepository</code> you can use -</p>\n<pre><code>RepositoryFactorySupport factory = new JpaRepositoryFactory(entityManager);\nUserRepository repository = factory.getRepository(UserRepository.class);\n</code></pre>\n<p>it will give you liberty to use custom methods also that was defined by you in <code>UserRepository</code></p>\n"},{"tags":[],"owner":{"account_id":26271310,"reputation":1,"user_id":19941183,"display_name":"kirill taksheev"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1662556509,"creation_date":1662556451,"answer_id":73636195,"question_id":22116005,"body_markdown":"If you want to use your interface, you can do something similar.\r\n\r\n1. Add a new class that implements your interface (in your case `UserRepository`) and extends `SimpleJpaRepository`.\r\n\r\n```\r\nprivate static class SimpleUserRepository&lt;T, ID&gt; extends SimpleJpaRepository&lt;T, ID&gt; implements UserRepository&lt;T, ID&gt; {\r\n    public SimpleIRepository(Class&lt;T&gt; domainClass, EntityManager em) {\r\n        super(domainClass, em);\r\n    }\r\n}\r\n```\r\n2. Create and cast your new `JpaRepository`.\r\n```\r\nUserRepository&lt;User, Long&gt; userRepository = new SimpleUserRepository&lt;&gt;(User.class, em);\r\n```\r\n3. Use this repository with your `UserRepository` interface.\r\n```\r\nuserRepository.save(user);\r\n```\r\n","title":"How to create Jpa repository dynamically inside a class?","body":"<p>If you want to use your interface, you can do something similar.</p>\n<ol>\n<li>Add a new class that implements your interface (in your case <code>UserRepository</code>) and extends <code>SimpleJpaRepository</code>.</li>\n</ol>\n<pre><code>private static class SimpleUserRepository&lt;T, ID&gt; extends SimpleJpaRepository&lt;T, ID&gt; implements UserRepository&lt;T, ID&gt; {\n    public SimpleIRepository(Class&lt;T&gt; domainClass, EntityManager em) {\n        super(domainClass, em);\n    }\n}\n</code></pre>\n<ol start=\"2\">\n<li>Create and cast your new <code>JpaRepository</code>.</li>\n</ol>\n<pre><code>UserRepository&lt;User, Long&gt; userRepository = new SimpleUserRepository&lt;&gt;(User.class, em);\n</code></pre>\n<ol start=\"3\">\n<li>Use this repository with your <code>UserRepository</code> interface.</li>\n</ol>\n<pre><code>userRepository.save(user);\n</code></pre>\n"}],"owner":{"account_id":1958533,"reputation":630,"user_id":1760867,"display_name":"Logesh G"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":18633,"favorite_count":0,"down_vote_count":0,"up_vote_count":16,"accepted_answer_id":22342025,"answer_count":3,"score":16,"last_activity_date":1662556509,"creation_date":1393686260,"question_id":22116005,"body_markdown":"How do I create and instantiate a jpa repository inside a class? I&#39;m in a situation where I have to create repositories for different entities inside a generic class.\r\n\r\nI could do that easily for Neo4j repositories like,\r\n\r\n    GraphRepository&lt;T&gt; graphRepository;\r\n\r\n    this.neo4jTemplate = new Neo4jTemplate(new RestGraphDatabase(\r\n\t\t&quot;http://localhost:7474/db/data&quot;));\r\n\tthis.graphRepository = neo4jTemplate.repositoryFor(domainClass); \r\n\r\n\r\nFor JpaRepository, I checked the documentation and found this,\r\n\r\n    RepositoryFactorySupport factory = … // Instantiate factory here\r\n    UserRepository repository = factory.getRepository(UserRepository.class);\r\n\r\nI&#39;m not sure how to instantiate factory in the above code. \r\n\r\nAlso Can&#39;t I create repository like I did for Neo4j, by specifying the domain class?\r\n","title":"How to create Jpa repository dynamically inside a class?","body":"<p>How do I create and instantiate a jpa repository inside a class? I'm in a situation where I have to create repositories for different entities inside a generic class.</p>\n\n<p>I could do that easily for Neo4j repositories like,</p>\n\n<pre><code>GraphRepository&lt;T&gt; graphRepository;\n\nthis.neo4jTemplate = new Neo4jTemplate(new RestGraphDatabase(\n    \"http://localhost:7474/db/data\"));\nthis.graphRepository = neo4jTemplate.repositoryFor(domainClass); \n</code></pre>\n\n<p>For JpaRepository, I checked the documentation and found this,</p>\n\n<pre><code>RepositoryFactorySupport factory = … // Instantiate factory here\nUserRepository repository = factory.getRepository(UserRepository.class);\n</code></pre>\n\n<p>I'm not sure how to instantiate factory in the above code. </p>\n\n<p>Also Can't I create repository like I did for Neo4j, by specifying the domain class?</p>\n"},{"tags":["java","c","java-native-interface"],"comments":[{"owner":{"account_id":1992310,"reputation":11172,"user_id":1786065,"accept_rate":91,"display_name":"Rogue"},"score":0,"creation_date":1662556195,"post_id":73636098,"comment_id":130032975,"body_markdown":"It&#39;s a [pointer](https://en.cppreference.com/book/pointers) to an arbitrary block of memory.","body":"It&#39;s a <a href=\"https://en.cppreference.com/book/pointers\" rel=\"nofollow noreferrer\">pointer</a> to an arbitrary block of memory."},{"owner":{"account_id":25660142,"reputation":55,"user_id":19425991,"display_name":"na29"},"score":0,"creation_date":1662556321,"post_id":73636098,"comment_id":130033018,"body_markdown":"And how do you decide what is the block of memory it points?","body":"And how do you decide what is the block of memory it points?"}],"answers":[{"tags":[],"owner":{"account_id":1839599,"reputation":209304,"user_id":1687119,"accept_rate":75,"display_name":"dbush"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1662556428,"creation_date":1662556428,"answer_id":73636187,"question_id":73636098,"body_markdown":"Although the documentation doesn&#39;t explicitly say so, this parameter is reserved for future use and should be set to `NULL` in all cases.","title":"What is void *reserved in the JNI_OnLoad function parameters?","body":"<p>Although the documentation doesn't explicitly say so, this parameter is reserved for future use and should be set to <code>NULL</code> in all cases.</p>\n"}],"owner":{"account_id":25660142,"reputation":55,"user_id":19425991,"display_name":"na29"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":284,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":73636187,"answer_count":1,"score":0,"last_activity_date":1662556428,"creation_date":1662556034,"question_id":73636098,"body_markdown":"The signature of the JNI_OnLoad function is this:\r\n\r\n`jint JNI_OnLoad(JavaVM *vm, void *reserved);`\r\n\r\nWhat is the void *reserved parameter?","title":"What is void *reserved in the JNI_OnLoad function parameters?","body":"<p>The signature of the JNI_OnLoad function is this:</p>\n<p><code>jint JNI_OnLoad(JavaVM *vm, void *reserved);</code></p>\n<p>What is the void *reserved parameter?</p>\n"},{"tags":["java","spring"],"comments":[{"owner":{"account_id":3116234,"reputation":9296,"user_id":2636929,"display_name":"Stultuske"},"score":1,"creation_date":1662553852,"post_id":73635549,"comment_id":130032005,"body_markdown":"normallest would be to create your own response type, but what stops you from returning an Object[] with three elements in it?","body":"normallest would be to create your own response type, but what stops you from returning an Object[] with three elements in it?"},{"owner":{"account_id":2709823,"reputation":10716,"user_id":2338547,"display_name":"markspace"},"score":0,"creation_date":1662553853,"post_id":73635549,"comment_id":130032006,"body_markdown":"I&#39;m not sure exactly what you mean, or why creating a simple data structure is hard, but you can just use `Object[]` if the actual type isn&#39;t important.","body":"I&#39;m not sure exactly what you mean, or why creating a simple data structure is hard, but you can just use <code>Object[]</code> if the actual type isn&#39;t important."},{"owner":{"account_id":960307,"reputation":107861,"user_id":984823,"display_name":"Joop Eggen"},"score":2,"creation_date":1662553966,"post_id":73635549,"comment_id":130032041,"body_markdown":"`Map&lt;LocalDateTime, Message&gt;` comes quite near.","body":"<code>Map&lt;LocalDateTime, Message&gt;</code> comes quite near."},{"owner":{"account_id":3192259,"reputation":117599,"user_id":2696260,"display_name":"M. Deinum"},"score":1,"creation_date":1662553982,"post_id":73635549,"comment_id":130032047,"body_markdown":"That i what records are for, alsoe why not use `LocalDateTime` instead of seperated fields? Lets you return 2 fields instead of 3.","body":"That i what records are for, alsoe why not use <code>LocalDateTime</code> instead of seperated fields? Lets you return 2 fields instead of 3."},{"owner":{"account_id":6520,"reputation":10523,"user_id":11002,"accept_rate":75,"display_name":"tgdavies"},"score":2,"creation_date":1662554046,"post_id":73635549,"comment_id":130032075,"body_markdown":"Create your own class. That documents what the meaning of the association between the three fields is.","body":"Create your own class. That documents what the meaning of the association between the three fields is."},{"owner":{"account_id":16894991,"reputation":449,"user_id":12217736,"display_name":"helloApp"},"score":0,"creation_date":1662554367,"post_id":73635549,"comment_id":130032209,"body_markdown":"For my specific case I cannot use LocalDateTime nor can I create a custom class. I believe an Object[] would be more apropiate for what I need to do. Thanks !","body":"For my specific case I cannot use LocalDateTime nor can I create a custom class. I believe an Object[] would be more apropiate for what I need to do. Thanks !"},{"owner":{"account_id":15064163,"reputation":13519,"user_id":10871900,"display_name":"dan1st is crying"},"score":1,"creation_date":1662554450,"post_id":73635549,"comment_id":130032243,"body_markdown":"If you use Apache Commons Lang, [it has a `Triple` object](https://commons.apache.org/proper/commons-lang/apidocs/org/apache/commons/lang3/tuple/Triple.html).","body":"If you use Apache Commons Lang, <a href=\"https://commons.apache.org/proper/commons-lang/apidocs/org/apache/commons/lang3/tuple/Triple.html\" rel=\"nofollow noreferrer\">it has a <code>Triple</code> object</a>."},{"owner":{"account_id":319873,"reputation":87612,"user_id":637853,"accept_rate":50,"display_name":"Thomas"},"score":0,"creation_date":1662556843,"post_id":73635549,"comment_id":130033230,"body_markdown":"&quot;nor can I create a custom class&quot; - Could you elaborate on the why? Seems to be an odd situation in which you can write code but cannot add classes.","body":"&quot;nor can I create a custom class&quot; - Could you elaborate on the why? Seems to be an odd situation in which you can write code but cannot add classes."}],"answers":[{"tags":[],"owner":{"account_id":319873,"reputation":87612,"user_id":637853,"accept_rate":50,"display_name":"Thomas"},"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1662556313,"creation_date":1662555054,"answer_id":73635833,"question_id":73635549,"body_markdown":"I once read a comment by one of the original designers who stated that they thought about providing classes like Pair, Triple or Tuple. However, they decided against it. Why? Because those classes are very generic and while it often makes sense to give proper names to the &quot;things&quot; in those classes. Example was `Point(int x, int y)` instead of `Pair(int a, int b)`. - So today &quot;I don&#39;t want to build a container class&quot; isn&#39;t a valid argument on most cases. \r\n\r\nJava 17+&#39;s records make it easy to build those containers:\r\n\r\n    public static record Message(LocalDate date, LocalTime time, Object msg) {};\r\n\r\nThat&#39;s it.\r\n\r\nEven without that creating those containers often is very simple by either having the IDE generate the methods or using some library like Lombok.","title":"Do any Java standard libraries have a container class with 3 data types or more?","body":"<p>I once read a comment by one of the original designers who stated that they thought about providing classes like Pair, Triple or Tuple. However, they decided against it. Why? Because those classes are very generic and while it often makes sense to give proper names to the &quot;things&quot; in those classes. Example was <code>Point(int x, int y)</code> instead of <code>Pair(int a, int b)</code>. - So today &quot;I don't want to build a container class&quot; isn't a valid argument on most cases.</p>\n<p>Java 17+'s records make it easy to build those containers:</p>\n<pre><code>public static record Message(LocalDate date, LocalTime time, Object msg) {};\n</code></pre>\n<p>That's it.</p>\n<p>Even without that creating those containers often is very simple by either having the IDE generate the methods or using some library like Lombok.</p>\n"},{"tags":[],"owner":{"account_id":20099597,"reputation":446,"user_id":14738350,"display_name":"devblack.exe"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1662556032,"creation_date":1662556032,"answer_id":73636095,"question_id":73635549,"body_markdown":"The simplest way to return multiple values with different data types is by using arrays. \r\nIn your method, append your desired values into an array and then return the array itself. \r\n\r\nYou can use a common parent type as the array&#39;s type if you want to return an array of different reference types.\r\n\r\n```java\r\nLocalData[] getLocalDataArray() {\r\n  \r\n    LocalData[] localDataArray = new LocalData[3];\r\n\r\n    localDataArray[0] = java.time.LocalDate.now();   // Date\r\n    localDataArray[1] = java.time.Time.now(); // Time\r\n    localDataArray[2] = &quot;A message&quot;; // String\r\n\r\n    return localDataArray;\r\n}\r\n```\r\n\r\nYou can find more info on [How to Return Multiple Values From a Java Method](https://www.baeldung.com/java-method-return-multiple-values)\r\n\r\n","title":"Do any Java standard libraries have a container class with 3 data types or more?","body":"<p>The simplest way to return multiple values with different data types is by using arrays.\nIn your method, append your desired values into an array and then return the array itself.</p>\n<p>You can use a common parent type as the array's type if you want to return an array of different reference types.</p>\n<pre class=\"lang-java prettyprint-override\"><code>LocalData[] getLocalDataArray() {\n  \n    LocalData[] localDataArray = new LocalData[3];\n\n    localDataArray[0] = java.time.LocalDate.now();   // Date\n    localDataArray[1] = java.time.Time.now(); // Time\n    localDataArray[2] = &quot;A message&quot;; // String\n\n    return localDataArray;\n}\n</code></pre>\n<p>You can find more info on <a href=\"https://www.baeldung.com/java-method-return-multiple-values\" rel=\"nofollow noreferrer\">How to Return Multiple Values From a Java Method</a></p>\n"}],"owner":{"account_id":16894991,"reputation":449,"user_id":12217736,"display_name":"helloApp"},"comment_count":8,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":74,"favorite_count":0,"down_vote_count":2,"up_vote_count":0,"closed_date":1662894597,"accepted_answer_id":73635833,"answer_count":2,"score":-2,"last_activity_date":1662556313,"creation_date":1662553769,"question_id":73635549,"body_markdown":"I have a method and I would like to return 3 types of data from it. I need a container class for that. I don&#39;t want to build it, but use a standard library class for it if this option exists.\r\n\r\nI want to return from the method the following data at the same time:\r\n\r\n1. `LocalDate`\r\n2. `LocalTime`\r\n3. Message Object\r\n\r\nMy question - Is there a Class/Data Structure with Generics in the Java Standard libraries which I can use as container that I can assign the respective values to and that will allow me to return all these 3 values at the same time without me having to create it or use external libraries for?\r\n\r\nIf not, what other options to solve this issue do I have ? ","title":"Do any Java standard libraries have a container class with 3 data types or more?","body":"<p>I have a method and I would like to return 3 types of data from it. I need a container class for that. I don't want to build it, but use a standard library class for it if this option exists.</p>\n<p>I want to return from the method the following data at the same time:</p>\n<ol>\n<li><code>LocalDate</code></li>\n<li><code>LocalTime</code></li>\n<li>Message Object</li>\n</ol>\n<p>My question - Is there a Class/Data Structure with Generics in the Java Standard libraries which I can use as container that I can assign the respective values to and that will allow me to return all these 3 values at the same time without me having to create it or use external libraries for?</p>\n<p>If not, what other options to solve this issue do I have ?</p>\n"},{"tags":["java","docker","google-cloud-platform","google-cloud-run"],"comments":[{"owner":{"account_id":15760814,"reputation":68963,"user_id":11372593,"display_name":"guillaume blaquiere"},"score":0,"creation_date":1662562758,"post_id":73635959,"comment_id":130035791,"body_markdown":"You MUST serve HTTP traffic with Cloud Run. You can&#39;t serve custom TCP traffic. Use GKE (autopilot or standard) or Compute Engine for that use case.","body":"You MUST serve HTTP traffic with Cloud Run. You can&#39;t serve custom TCP traffic. Use GKE (autopilot or standard) or Compute Engine for that use case."},{"owner":{"account_id":10905924,"reputation":76292,"user_id":8016720,"display_name":"John Hanley"},"score":0,"creation_date":1662586971,"post_id":73635959,"comment_id":130043204,"body_markdown":"You have incorrectly set up Java in the container. I recommend starting with an official Docker Java image and build from that.","body":"You have incorrectly set up Java in the container. I recommend starting with an official Docker Java image and build from that."}],"answers":[{"tags":[],"owner":{"account_id":2857205,"reputation":1,"user_id":2453217,"display_name":"user2453217"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1662556170,"creation_date":1662556170,"answer_id":73636124,"question_id":73635959,"body_markdown":"Firstly, the path seems to be fishy.\r\nWhy do you have to provide full java bin path. If your build is depending upon some other libraries which requires c,make tools then try with full jdk too.\r\n\r\nAlso,check this code. It provides start point for your server\r\n\r\n    # java -jar /usr/local/runme/app.jar\r\n    ENTRYPOINT [&quot;java&quot;,&quot;-jar&quot;,&quot;app.jar&quot;]\r\n\r\nFull code reference: https://mkyong.com/docker/docker-and-java-application-examples/\r\n","title":"Deploy a docker image on Google Cloud Run","body":"<p>Firstly, the path seems to be fishy.\nWhy do you have to provide full java bin path. If your build is depending upon some other libraries which requires c,make tools then try with full jdk too.</p>\n<p>Also,check this code. It provides start point for your server</p>\n<pre><code># java -jar /usr/local/runme/app.jar\nENTRYPOINT [&quot;java&quot;,&quot;-jar&quot;,&quot;app.jar&quot;]\n</code></pre>\n<p>Full code reference: <a href=\"https://mkyong.com/docker/docker-and-java-application-examples/\" rel=\"nofollow noreferrer\">https://mkyong.com/docker/docker-and-java-application-examples/</a></p>\n"}],"owner":{"account_id":6667055,"reputation":723,"user_id":7373144,"accept_rate":67,"display_name":"bradley101"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":501,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1662556170,"creation_date":1662555495,"question_id":73635959,"body_markdown":"I am trying to deploy a Java Socket application that will serve incoming requests on some port over TCP. The image is building fine and the container is running as expected locally.\r\n\r\nHowever when deploying to GCR it throws the following error\r\n```\r\n{\r\n  &quot;textPayload&quot;: &quot;terminated: Application failed to start: Failed to create init process: failed to load /usr/lib/jvm/java-17-openjdk//bin/java: exec format error&quot;,\r\n  &quot;insertId&quot;: &quot;631891ef0005eae9ece915df&quot;,\r\n  &quot;resource&quot;: {\r\n    &quot;type&quot;: &quot;cloud_run_revision&quot;,\r\n    &quot;labels&quot;: {\r\n      &quot;project_id&quot;: &quot;cumulus-0&quot;,\r\n      &quot;service_name&quot;: &quot;cumulus&quot;,\r\n      &quot;revision_name&quot;: &quot;cumulus-00001-hib&quot;,\r\n      &quot;location&quot;: &quot;asia-south1&quot;,\r\n      &quot;configuration_name&quot;: &quot;cumulus&quot;\r\n    }\r\n  },\r\n  &quot;timestamp&quot;: &quot;2022-09-07T12:43:27.387764458Z&quot;,\r\n  &quot;severity&quot;: &quot;ERROR&quot;,\r\n  &quot;labels&quot;: {\r\n    &quot;instanceId&quot;: &quot;00c527f6d4880e8a5a96fbdadc4536870f1e55a884c529efc6f860386bb3766d594380d65a657a35adebed119b05e2007cbef26928db216236f1641e97b306&quot;\r\n  },\r\n  &quot;logName&quot;: &quot;projects/cumulus-0/logs/run.googleapis.com%2Fvarlog%2Fsystem&quot;,\r\n  &quot;receiveTimestamp&quot;: &quot;2022-09-07T12:43:27.390641080Z&quot;\r\n}\r\n```\r\n\r\nSpecifically - `terminated: Application failed to start: Failed to create init process: failed to load /usr/lib/jvm/java-17-openjdk//bin/java: exec format error`\r\n\r\nthis comes when the platform in unsupported for the jvm to run. But it is inside a docker container. I dont know whats the matter with this.\r\n\r\nHere is my `Dockerfile`\r\n\r\n```\r\nFROM alpine:latest\r\nRUN apk update &amp;&amp; \\\r\n    apk add openjdk17-jre=17.0.4.1_p1-r0\r\n\r\nENV JAVA_HOME=/usr/lib/jvm/java-17-openjdk\r\n\r\nLABEL in.rainycloud.cumulus=&quot;hi@shantanubanerjee.com&quot;\r\n\r\nCOPY build/libs/cumulus*.jar /usr/lib/\r\n\r\nCMD [&quot;/usr/lib/jvm/java-17-openjdk/bin/java&quot;, &quot;-jar&quot;, &quot;/usr/lib/cumulus-v0.1.jar&quot;, &quot;in.rainycloud.cumulus.Main&quot;]\r\n\r\nEXPOSE 33333/tcp\r\n```\r\n","title":"Deploy a docker image on Google Cloud Run","body":"<p>I am trying to deploy a Java Socket application that will serve incoming requests on some port over TCP. The image is building fine and the container is running as expected locally.</p>\n<p>However when deploying to GCR it throws the following error</p>\n<pre><code>{\n  &quot;textPayload&quot;: &quot;terminated: Application failed to start: Failed to create init process: failed to load /usr/lib/jvm/java-17-openjdk//bin/java: exec format error&quot;,\n  &quot;insertId&quot;: &quot;631891ef0005eae9ece915df&quot;,\n  &quot;resource&quot;: {\n    &quot;type&quot;: &quot;cloud_run_revision&quot;,\n    &quot;labels&quot;: {\n      &quot;project_id&quot;: &quot;cumulus-0&quot;,\n      &quot;service_name&quot;: &quot;cumulus&quot;,\n      &quot;revision_name&quot;: &quot;cumulus-00001-hib&quot;,\n      &quot;location&quot;: &quot;asia-south1&quot;,\n      &quot;configuration_name&quot;: &quot;cumulus&quot;\n    }\n  },\n  &quot;timestamp&quot;: &quot;2022-09-07T12:43:27.387764458Z&quot;,\n  &quot;severity&quot;: &quot;ERROR&quot;,\n  &quot;labels&quot;: {\n    &quot;instanceId&quot;: &quot;00c527f6d4880e8a5a96fbdadc4536870f1e55a884c529efc6f860386bb3766d594380d65a657a35adebed119b05e2007cbef26928db216236f1641e97b306&quot;\n  },\n  &quot;logName&quot;: &quot;projects/cumulus-0/logs/run.googleapis.com%2Fvarlog%2Fsystem&quot;,\n  &quot;receiveTimestamp&quot;: &quot;2022-09-07T12:43:27.390641080Z&quot;\n}\n</code></pre>\n<p>Specifically - <code>terminated: Application failed to start: Failed to create init process: failed to load /usr/lib/jvm/java-17-openjdk//bin/java: exec format error</code></p>\n<p>this comes when the platform in unsupported for the jvm to run. But it is inside a docker container. I dont know whats the matter with this.</p>\n<p>Here is my <code>Dockerfile</code></p>\n<pre><code>FROM alpine:latest\nRUN apk update &amp;&amp; \\\n    apk add openjdk17-jre=17.0.4.1_p1-r0\n\nENV JAVA_HOME=/usr/lib/jvm/java-17-openjdk\n\nLABEL in.rainycloud.cumulus=&quot;hi@shantanubanerjee.com&quot;\n\nCOPY build/libs/cumulus*.jar /usr/lib/\n\nCMD [&quot;/usr/lib/jvm/java-17-openjdk/bin/java&quot;, &quot;-jar&quot;, &quot;/usr/lib/cumulus-v0.1.jar&quot;, &quot;in.rainycloud.cumulus.Main&quot;]\n\nEXPOSE 33333/tcp\n</code></pre>\n"},{"tags":["java","pdf","pdfbox"],"answers":[{"tags":[],"owner":{"account_id":1916831,"reputation":91511,"user_id":1729265,"display_name":"mkl"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1662544149,"creation_date":1662544149,"answer_id":73633372,"question_id":73630831,"body_markdown":"**The problem with your example PDF is _not_ that it&#39;s linearized.**\r\n\r\nThe actual problem is that most fonts in your PDF are missing the necessary information for text extraction: They neither have **ToUnicode** maps nor useful **Encoding**s, and they are Type 3 fonts which prevents the retrieval of additional information from an associated font program or CIDFont dictionary.\r\n\r\nIn particular such PDFs usually are _explicitly generated to prevent text extraction_ by regular text extractors.\r\n\r\nFor such PDFs essentially your only option is to try OCR.","title":"Extract text from Linearized PDF by pdfbox","body":"<p><strong>The problem with your example PDF is <em>not</em> that it's linearized.</strong></p>\n<p>The actual problem is that most fonts in your PDF are missing the necessary information for text extraction: They neither have <strong>ToUnicode</strong> maps nor useful <strong>Encoding</strong>s, and they are Type 3 fonts which prevents the retrieval of additional information from an associated font program or CIDFont dictionary.</p>\n<p>In particular such PDFs usually are <em>explicitly generated to prevent text extraction</em> by regular text extractors.</p>\n<p>For such PDFs essentially your only option is to try OCR.</p>\n"},{"tags":[],"owner":{"account_id":14313923,"reputation":8884,"user_id":10802527,"display_name":"K J"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1662556000,"creation_date":1662548411,"answer_id":73634348,"question_id":73630831,"body_markdown":"Linearized should not be an issue for text extraction but not all plain text is as you may expect, since some constructs cannot be described in plain text. So it is not clear which part you showing in source file but simple PDFtotext seem to not have a problem. I would avoid generic OCR as likely to add errors. Maths formulas are best converted by dedicated equation converters that work their OCR on image snippets. https://mathpix.com/ Snip is the commercial market leader  , and few competitors see https://www.sciaccess.net/en/InftyReader/\r\n\r\n[![enter image description here][1]][1]\r\n[![enter image description here][2]][2]\r\n\r\n***Here we can see the infty isolated svg formula from the pdf and its OCR  extracted characters `Yj=  γEj 1/θ(Ej)θ−1`.... which is meaningless  for this type of reversal. A copy of math tables or formulas as images is usually the best possible solution otherwise the result is highly likely to be corrupted.*** Note how some braces are recognized but not some critical ones.\r\n\r\n[![enter image description here][3]][3]\r\n[![enter image description here][4]][4]\r\n[![enter image description here][5]][5]\r\n\r\nWe can see why that will happen by looking at the outline of that area, looks like CMEX10 is one of the worst defined as text. `θ+ γLj 1/θ(Lj)θ−1`\r\n[![enter image description here][6]][6]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/2MtII.png\r\n  [2]: https://i.stack.imgur.com/TfJ55.png\r\n  [3]: https://i.stack.imgur.com/kJxNw.png\r\n  [4]: https://i.stack.imgur.com/uMfWq.png\r\n  [5]: https://i.stack.imgur.com/Q4QQw.png\r\n  [6]: https://i.stack.imgur.com/MhKBL.png","title":"Extract text from Linearized PDF by pdfbox","body":"<p>Linearized should not be an issue for text extraction but not all plain text is as you may expect, since some constructs cannot be described in plain text. So it is not clear which part you showing in source file but simple PDFtotext seem to not have a problem. I would avoid generic OCR as likely to add errors. Maths formulas are best converted by dedicated equation converters that work their OCR on image snippets. <a href=\"https://mathpix.com/\" rel=\"nofollow noreferrer\">https://mathpix.com/</a> Snip is the commercial market leader  , and few competitors see <a href=\"https://www.sciaccess.net/en/InftyReader/\" rel=\"nofollow noreferrer\">https://www.sciaccess.net/en/InftyReader/</a></p>\n<p><a href=\"https://i.stack.imgur.com/2MtII.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/2MtII.png\" alt=\"enter image description here\" /></a>\n<a href=\"https://i.stack.imgur.com/TfJ55.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/TfJ55.png\" alt=\"enter image description here\" /></a></p>\n<p><em><strong>Here we can see the infty isolated svg formula from the pdf and its OCR  extracted characters <code>Yj=  γEj 1/θ(Ej)θ−1</code>.... which is meaningless  for this type of reversal. A copy of math tables or formulas as images is usually the best possible solution otherwise the result is highly likely to be corrupted.</strong></em> Note how some braces are recognized but not some critical ones.</p>\n<p><a href=\"https://i.stack.imgur.com/kJxNw.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/kJxNw.png\" alt=\"enter image description here\" /></a>\n<a href=\"https://i.stack.imgur.com/uMfWq.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/uMfWq.png\" alt=\"enter image description here\" /></a>\n<a href=\"https://i.stack.imgur.com/Q4QQw.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Q4QQw.png\" alt=\"enter image description here\" /></a></p>\n<p>We can see why that will happen by looking at the outline of that area, looks like CMEX10 is one of the worst defined as text. <code>θ+ γLj 1/θ(Lj)θ−1</code>\n<a href=\"https://i.stack.imgur.com/MhKBL.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/MhKBL.png\" alt=\"enter image description here\" /></a></p>\n"}],"owner":{"account_id":18026994,"reputation":1,"user_id":13102672,"display_name":"Korpusova Svetlana"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":185,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1662556000,"creation_date":1662531212,"question_id":73630831,"body_markdown":"I am using org.apache.pdfbox.text.PDFTextStripper version 2.0.26. It works good for most PDFs. But It cannot extract text correctly from Linearized PDF:\r\n[Extracted text][1]\r\n\r\nIs there a way to extract text from Linearized PDF by pdfbox or using other tools?\r\n\r\n[Here is a Linearized PDF example][2]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/ll7g5.png\r\n  [2]: https://cloud.mail.ru/public/bXAy/pgfsbL7Ad","title":"Extract text from Linearized PDF by pdfbox","body":"<p>I am using org.apache.pdfbox.text.PDFTextStripper version 2.0.26. It works good for most PDFs. But It cannot extract text correctly from Linearized PDF:\n<a href=\"https://i.stack.imgur.com/ll7g5.png\" rel=\"nofollow noreferrer\">Extracted text</a></p>\n<p>Is there a way to extract text from Linearized PDF by pdfbox or using other tools?</p>\n<p><a href=\"https://cloud.mail.ru/public/bXAy/pgfsbL7Ad\" rel=\"nofollow noreferrer\">Here is a Linearized PDF example</a></p>\n"},{"tags":["java","maven","talend"],"comments":[{"owner":{"account_id":2486870,"reputation":685,"user_id":2165146,"display_name":"muhammed ozbilici"},"score":1,"creation_date":1662390735,"post_id":73610930,"comment_id":129989903,"body_markdown":"check here please. https://community.talend.com/s/article/Debug-issues-related-to-the-Talend-Studio-error-Could-not-find-or-load-main-class-7Cs9y?language=en_US","body":"check here please. <a href=\"https://community.talend.com/s/article/Debug-issues-related-to-the-Talend-Studio-error-Could-not-find-or-load-main-class-7Cs9y?language=en_US\" rel=\"nofollow noreferrer\">community.talend.com/s/article/&hellip;</a>"},{"owner":{"account_id":13407034,"reputation":755,"user_id":9674760,"display_name":"Amine Ben Khelifa"},"score":1,"creation_date":1662448035,"post_id":73610930,"comment_id":130000997,"body_markdown":"Duplicate the job and re-run it or simply change the workspace","body":"Duplicate the job and re-run it or simply change the workspace"}],"answers":[{"tags":[],"owner":{"account_id":22151967,"reputation":25,"user_id":16400348,"display_name":"Alex"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1662555918,"creation_date":1662555918,"answer_id":73636066,"question_id":73610930,"body_markdown":"I found a solution. \r\n\r\nLike I said, I had this error after my migration/update : \r\n[![enter image description here][1]][1]\r\n\r\nMaven parameters with this error : \r\n[![enter image description here][2]][2]\r\n\r\nMaven parameters without any error at all and all my job working perfectly well : \r\n[![enter image description here][3]][3]\r\n\r\nApparently my update, forced this Offline mode to &quot;on&quot;, if you remove this you fixed everything. \r\n\r\nThank you for your time guys.\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/fcVwd.png\r\n  [2]: https://i.stack.imgur.com/YNDId.png\r\n  [3]: https://i.stack.imgur.com/cGloN.png","title":"Trouble after update in Talend 8.0.1 . Impossible to find or load primary Class &quot;myProject&quot;.&quot;myJob&quot;","body":"<p>I found a solution.</p>\n<p>Like I said, I had this error after my migration/update :\n<a href=\"https://i.stack.imgur.com/fcVwd.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/fcVwd.png\" alt=\"enter image description here\" /></a></p>\n<p>Maven parameters with this error :\n<a href=\"https://i.stack.imgur.com/YNDId.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/YNDId.png\" alt=\"enter image description here\" /></a></p>\n<p>Maven parameters without any error at all and all my job working perfectly well :\n<a href=\"https://i.stack.imgur.com/cGloN.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/cGloN.png\" alt=\"enter image description here\" /></a></p>\n<p>Apparently my update, forced this Offline mode to &quot;on&quot;, if you remove this you fixed everything.</p>\n<p>Thank you for your time guys.</p>\n"}],"owner":{"account_id":22151967,"reputation":25,"user_id":16400348,"display_name":"Alex"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":705,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1662555918,"creation_date":1662388142,"question_id":73610930,"body_markdown":"I worked on my Talend Studio 8.0.1 for several month with no problem. But last week after an update on my git, I didn&#39;t succed to run any of my job. Here is the error message after run a job : \r\n\r\nErreur : impossible de trouver ou de charger la classe principale sandbox.tests_0_1.tests\r\nCaus&#233; par : java.lang.ClassNotFoundException: sandbox.tests_0_1.tests\r\n[![enter image description here][1]][1]\r\n\r\nIn english : \r\n\r\nError: Could not find or load main class sandbox.tests_0_1.tests\r\nCaused by: java.lang.ClassNotFoundException: sandbox.tests_0_1.tests\r\n\r\nWhen I looked the error message in the C:\\Talend\\Talend-Studio-V8.0.1\\workspace\\ .metadata\\ .log \r\n\r\nHere is the error message : \r\n\r\nERROR org.talend.commons.exception.CommonExceptionHandler  - [ERROR] Failed to execute goal on project routines: Could not resolve dependencies for project org.example.sandbox.code:routines:jar:8.0.1: Failed to collect dependencies at org.apache.commons:commons-lang3:jar:3.12.0: Failed to read artifact descriptor for org.apache.commons:commons-lang3:jar:3.12.0: Cannot access central (https://repo1.maven.org/maven2/) in offline mode and the artifact org.junit:junit-bom:pom:5.7.1 has not been downloaded from it before. -&gt; [Help 1]\r\n\r\nWould you be able to help me with this issue please ? \r\nBest Regards\r\n\r\nEdit After the comment of Muhammed Ozbilici : \r\nI tried what you propose to me, and the result is quite inexpected. \r\n[![Quite a lot of errors][2]][2]\r\n\r\n\r\nI had a problem with the folder containing the routine.jar file, I solved it by puting it in the correct compilation path I saw in Talend. But there is still a lot of problems and it dont seems to be just a single .jar file problem. \r\n\r\nAnd now I dont have the error I speak about in the first time but I have this one : \r\n[![enter image description here][3]][3]\r\n\r\nAmine : I already try this solution but I still have my problem. \r\nMore precisely, I can run my jobs in local, but not on my git anymore. \r\n\r\n\r\n  [1]: https://i.stack.imgur.com/kFwKu.png\r\n  [2]: https://i.stack.imgur.com/L9dAV.png\r\n  [3]: https://i.stack.imgur.com/jk3IN.png","title":"Trouble after update in Talend 8.0.1 . Impossible to find or load primary Class &quot;myProject&quot;.&quot;myJob&quot;","body":"<p>I worked on my Talend Studio 8.0.1 for several month with no problem. But last week after an update on my git, I didn't succed to run any of my job. Here is the error message after run a job :</p>\n<p>Erreur : impossible de trouver ou de charger la classe principale sandbox.tests_0_1.tests\nCausé par : java.lang.ClassNotFoundException: sandbox.tests_0_1.tests\n<a href=\"https://i.stack.imgur.com/kFwKu.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/kFwKu.png\" alt=\"enter image description here\" /></a></p>\n<p>In english :</p>\n<p>Error: Could not find or load main class sandbox.tests_0_1.tests\nCaused by: java.lang.ClassNotFoundException: sandbox.tests_0_1.tests</p>\n<p>When I looked the error message in the C:\\Talend\\Talend-Studio-V8.0.1\\workspace\\ .metadata\\ .log</p>\n<p>Here is the error message :</p>\n<p>ERROR org.talend.commons.exception.CommonExceptionHandler  - [ERROR] Failed to execute goal on project routines: Could not resolve dependencies for project org.example.sandbox.code:routines:jar:8.0.1: Failed to collect dependencies at org.apache.commons:commons-lang3:jar:3.12.0: Failed to read artifact descriptor for org.apache.commons:commons-lang3:jar:3.12.0: Cannot access central (<a href=\"https://repo1.maven.org/maven2/\" rel=\"nofollow noreferrer\">https://repo1.maven.org/maven2/</a>) in offline mode and the artifact org.junit:junit-bom:pom:5.7.1 has not been downloaded from it before. -&gt; [Help 1]</p>\n<p>Would you be able to help me with this issue please ?\nBest Regards</p>\n<p>Edit After the comment of Muhammed Ozbilici :\nI tried what you propose to me, and the result is quite inexpected.\n<a href=\"https://i.stack.imgur.com/L9dAV.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/L9dAV.png\" alt=\"Quite a lot of errors\" /></a></p>\n<p>I had a problem with the folder containing the routine.jar file, I solved it by puting it in the correct compilation path I saw in Talend. But there is still a lot of problems and it dont seems to be just a single .jar file problem.</p>\n<p>And now I dont have the error I speak about in the first time but I have this one :\n<a href=\"https://i.stack.imgur.com/jk3IN.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/jk3IN.png\" alt=\"enter image description here\" /></a></p>\n<p>Amine : I already try this solution but I still have my problem.\nMore precisely, I can run my jobs in local, but not on my git anymore.</p>\n"},{"tags":["java","sql","spring","postgresql","jpa"],"answers":[{"tags":[],"owner":{"account_id":25745739,"reputation":54,"user_id":19498988,"display_name":"Sniper Dev"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1661889276,"creation_date":1661889276,"answer_id":73547813,"question_id":73547654,"body_markdown":"You need to add the following commands to your sql.\r\n\r\n    GROUP BY BK.ISBN\r\n\r\nThe sql returns the right result according to filter by `BK.ISBN`","title":"List returning the same row from postgresdb","body":"<p>You need to add the following commands to your sql.</p>\n<pre><code>GROUP BY BK.ISBN\n</code></pre>\n<p>The sql returns the right result according to filter by <code>BK.ISBN</code></p>\n"},{"tags":[],"owner":{"account_id":7275947,"reputation":15,"user_id":5547399,"display_name":"T.Huss"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1662555803,"creation_date":1662555803,"answer_id":73636035,"question_id":73547654,"body_markdown":"Changed the query to use JPA joins instead.\r\nAdded the following to the bookAndReview object\r\n\r\n    @OneToMany\r\n    @JoinColumn(name = &quot;ISBN&quot;,referencedColumnName = &quot;ISBN&quot;, insertable = false, updatable = false)\r\n    List&lt;Reviews&gt; reviews;\r\n\r\nQuery changed to use JPA\r\n\r\n    List&lt;BookAndReview&gt; getBookAndReviewByISBN(@Param(&quot;ISBN&quot;) String ISBN);","title":"List returning the same row from postgresdb","body":"<p>Changed the query to use JPA joins instead.\nAdded the following to the bookAndReview object</p>\n<pre><code>@OneToMany\n@JoinColumn(name = &quot;ISBN&quot;,referencedColumnName = &quot;ISBN&quot;, insertable = false, updatable = false)\nList&lt;Reviews&gt; reviews;\n</code></pre>\n<p>Query changed to use JPA</p>\n<pre><code>List&lt;BookAndReview&gt; getBookAndReviewByISBN(@Param(&quot;ISBN&quot;) String ISBN);\n</code></pre>\n"}],"owner":{"account_id":7275947,"reputation":15,"user_id":5547399,"display_name":"T.Huss"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":64,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":73636035,"answer_count":2,"score":0,"last_activity_date":1662555803,"creation_date":1661888210,"question_id":73547654,"body_markdown":"I have an issue where only the first row from my database is being returned multiple times within a list even though the SQL query shows different rows being returning.\r\nmy jpa query is:\r\n\r\n    @Query(value = &quot;SELECT BK.ISBN,&quot; +\r\n                &quot;BK.AUTHOR, &quot; +\r\n                &quot;BK.ID, &quot; +\r\n                &quot;BK.PUBLISHER, &quot; +\r\n                &quot;BK.GENRE, &quot; +\r\n                &quot;BK.NUMBER_OF_PAGES, &quot; +\r\n                &quot;BK.WEIGHT, &quot; +\r\n                &quot;BK.PRICE, &quot; +\r\n                &quot;BK.BOOK_TYPE, &quot; +\r\n                &quot;BK.TITLE, &quot; +\r\n                &quot;RV.STAR_RATING, &quot; +\r\n                &quot;RV.REVIEW_DESCRIPTION, &quot; +\r\n                &quot;RV.ID, &quot; +\r\n                &quot;RV.ISBN, &quot; +\r\n                &quot;RV.ID AS REVIEWID &quot; +\r\n                &quot;FROM BOOKSTORE.BOOKS BK &quot; +\r\n                &quot;INNER JOIN BOOKSTORE.REVIEWS RV &quot; +\r\n                &quot;ON BK.ISBN = RV.ISBN &quot; +\r\n                &quot;WHERE BK.ISBN = :ISBN&quot;,\r\n                nativeQuery = true\r\n        )\r\n        List&lt;BookAndReview&gt; getBookAndReviews(String ISBN);\r\n\r\nThe object is:\r\n\r\n    @Data\r\n    @Entity\r\n    @AllArgsConstructor\r\n    @NoArgsConstructor\r\n    public class BookAndReview implements Serializable {\r\n    \r\n    \r\n        @Id\r\n        @Column(name = &quot;ID&quot;)\r\n        Integer id;\r\n    \r\n        @Column(name = &quot;REVIEWID&quot;)\r\n        Integer reviewId;\r\n    \r\n        @Column(name = &quot;ISBN&quot;)\r\n        String ISBN;\r\n    \r\n        @Column(name = &quot;STAR_RATING&quot;)\r\n        float starRating;\r\n    \r\n        @Column(name = &quot;REVIEW_DESCRIPTION&quot;)\r\n        String reviewDescription;\r\n    \r\n        @Column(name = &quot;AUTHOR&quot;)\r\n        String author;\r\n    \r\n        @Column(name = &quot;PUBLISHER&quot;)\r\n        String publisher;\r\n    \r\n        @Column(name = &quot;GENRE&quot;)\r\n        String genre;\r\n    \r\n        @Column(name = &quot;NUMBER_OF_PAGES&quot;)\r\n        Integer numberOfPages;\r\n    \r\n        @Column(name = &quot;WEIGHT&quot;)\r\n        String weight;\r\n    \r\n        @Column(name = &quot;PRICE&quot;)\r\n        float price;\r\n    \r\n        @Column(name = &quot;BOOK_TYPE&quot;)\r\n        String bookType;\r\n    \r\n        @Column(name = &quot;TITLE&quot;)\r\n        String title;\r\n    \r\n    }\r\n\r\ni am returning this in the controller by simply calling the method but the response returns the following twice:\r\n\r\n    [\r\n        {\r\n            &quot;id&quot;: 1,\r\n            &quot;reviewId&quot;: 1,\r\n            &quot;starRating&quot;: 4.3,\r\n            &quot;reviewDescription&quot;: &quot;Test description&quot;,\r\n            &quot;author&quot;: &quot;Tom Hindle&quot;,\r\n            &quot;publisher&quot;: &quot;Cornerstone&quot;,\r\n            &quot;genre&quot;: &quot;Fiction&quot;,\r\n            &quot;numberOfPages&quot;: 464,\r\n            &quot;weight&quot;: &quot;319&quot;,\r\n            &quot;price&quot;: 7.49,\r\n            &quot;bookType&quot;: &quot;Paperback&quot;,\r\n            &quot;title&quot;: &quot;A Fatal Crossing&quot;,\r\n            &quot;isbn&quot;: &quot;9781529157840&quot;\r\n        },\r\n        {\r\n            &quot;id&quot;: 1,\r\n            &quot;reviewId&quot;: 1,\r\n            &quot;starRating&quot;: 4.3,\r\n            &quot;reviewDescription&quot;: &quot;Test description&quot;,\r\n            &quot;author&quot;: &quot;Tom Hindle&quot;,\r\n            &quot;publisher&quot;: &quot;Cornerstone&quot;,\r\n            &quot;genre&quot;: &quot;Fiction&quot;,\r\n            &quot;numberOfPages&quot;: 464,\r\n            &quot;weight&quot;: &quot;319&quot;,\r\n            &quot;price&quot;: 7.49,\r\n            &quot;bookType&quot;: &quot;Paperback&quot;,\r\n            &quot;title&quot;: &quot;A Fatal Crossing&quot;,\r\n            &quot;isbn&quot;: &quot;9781529157840&quot;\r\n        }\r\n    ]\r\n\r\nthe review description there is the same in both objects even though in the database i have different reviews related to each book. I havent posted the controller code however that is simply calling the the repository and returning a list of BookAndReview","title":"List returning the same row from postgresdb","body":"<p>I have an issue where only the first row from my database is being returned multiple times within a list even though the SQL query shows different rows being returning.\nmy jpa query is:</p>\n<pre><code>@Query(value = &quot;SELECT BK.ISBN,&quot; +\n            &quot;BK.AUTHOR, &quot; +\n            &quot;BK.ID, &quot; +\n            &quot;BK.PUBLISHER, &quot; +\n            &quot;BK.GENRE, &quot; +\n            &quot;BK.NUMBER_OF_PAGES, &quot; +\n            &quot;BK.WEIGHT, &quot; +\n            &quot;BK.PRICE, &quot; +\n            &quot;BK.BOOK_TYPE, &quot; +\n            &quot;BK.TITLE, &quot; +\n            &quot;RV.STAR_RATING, &quot; +\n            &quot;RV.REVIEW_DESCRIPTION, &quot; +\n            &quot;RV.ID, &quot; +\n            &quot;RV.ISBN, &quot; +\n            &quot;RV.ID AS REVIEWID &quot; +\n            &quot;FROM BOOKSTORE.BOOKS BK &quot; +\n            &quot;INNER JOIN BOOKSTORE.REVIEWS RV &quot; +\n            &quot;ON BK.ISBN = RV.ISBN &quot; +\n            &quot;WHERE BK.ISBN = :ISBN&quot;,\n            nativeQuery = true\n    )\n    List&lt;BookAndReview&gt; getBookAndReviews(String ISBN);\n</code></pre>\n<p>The object is:</p>\n<pre><code>@Data\n@Entity\n@AllArgsConstructor\n@NoArgsConstructor\npublic class BookAndReview implements Serializable {\n\n\n    @Id\n    @Column(name = &quot;ID&quot;)\n    Integer id;\n\n    @Column(name = &quot;REVIEWID&quot;)\n    Integer reviewId;\n\n    @Column(name = &quot;ISBN&quot;)\n    String ISBN;\n\n    @Column(name = &quot;STAR_RATING&quot;)\n    float starRating;\n\n    @Column(name = &quot;REVIEW_DESCRIPTION&quot;)\n    String reviewDescription;\n\n    @Column(name = &quot;AUTHOR&quot;)\n    String author;\n\n    @Column(name = &quot;PUBLISHER&quot;)\n    String publisher;\n\n    @Column(name = &quot;GENRE&quot;)\n    String genre;\n\n    @Column(name = &quot;NUMBER_OF_PAGES&quot;)\n    Integer numberOfPages;\n\n    @Column(name = &quot;WEIGHT&quot;)\n    String weight;\n\n    @Column(name = &quot;PRICE&quot;)\n    float price;\n\n    @Column(name = &quot;BOOK_TYPE&quot;)\n    String bookType;\n\n    @Column(name = &quot;TITLE&quot;)\n    String title;\n\n}\n</code></pre>\n<p>i am returning this in the controller by simply calling the method but the response returns the following twice:</p>\n<pre><code>[\n    {\n        &quot;id&quot;: 1,\n        &quot;reviewId&quot;: 1,\n        &quot;starRating&quot;: 4.3,\n        &quot;reviewDescription&quot;: &quot;Test description&quot;,\n        &quot;author&quot;: &quot;Tom Hindle&quot;,\n        &quot;publisher&quot;: &quot;Cornerstone&quot;,\n        &quot;genre&quot;: &quot;Fiction&quot;,\n        &quot;numberOfPages&quot;: 464,\n        &quot;weight&quot;: &quot;319&quot;,\n        &quot;price&quot;: 7.49,\n        &quot;bookType&quot;: &quot;Paperback&quot;,\n        &quot;title&quot;: &quot;A Fatal Crossing&quot;,\n        &quot;isbn&quot;: &quot;9781529157840&quot;\n    },\n    {\n        &quot;id&quot;: 1,\n        &quot;reviewId&quot;: 1,\n        &quot;starRating&quot;: 4.3,\n        &quot;reviewDescription&quot;: &quot;Test description&quot;,\n        &quot;author&quot;: &quot;Tom Hindle&quot;,\n        &quot;publisher&quot;: &quot;Cornerstone&quot;,\n        &quot;genre&quot;: &quot;Fiction&quot;,\n        &quot;numberOfPages&quot;: 464,\n        &quot;weight&quot;: &quot;319&quot;,\n        &quot;price&quot;: 7.49,\n        &quot;bookType&quot;: &quot;Paperback&quot;,\n        &quot;title&quot;: &quot;A Fatal Crossing&quot;,\n        &quot;isbn&quot;: &quot;9781529157840&quot;\n    }\n]\n</code></pre>\n<p>the review description there is the same in both objects even though in the database i have different reviews related to each book. I havent posted the controller code however that is simply calling the the repository and returning a list of BookAndReview</p>\n"},{"tags":["java","spring-boot","logstash","logback"],"answers":[{"tags":[],"owner":{"account_id":976746,"reputation":3401,"user_id":997661,"accept_rate":40,"display_name":"NNP"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1626695302,"creation_date":1626695302,"answer_id":68439989,"question_id":68438987,"body_markdown":"I think I figured it out. It turned out to be a dependencies issue. \r\n\r\n(Basically, with logstash 6.6, jackson.core 2.9.3 threw above error. When i moved to 2.12.1 things started working. Below is actual details of the versions am using - excerpt from dependency tree)\r\n\r\n    [INFO] +- org.slf4j:slf4j-api:jar:1.7.30:compile\r\n    [INFO] +- net.logstash.logback:logstash-logback-encoder:jar:6.6:compile\r\n    [INFO] +- ch.qos.logback:logback-core:jar:1.2.3:compile\r\n    [INFO] +- ch.qos.logback:logback-classic:jar:1.2.3:compile\r\n    [INFO] +- ch.qos.logback:logback-access:jar:1.2.3:compile\r\n    [INFO] +- com.fasterxml.jackson.core:jackson-databind:jar:2.12.1:compile\r\n    [INFO] +- com.fasterxml.jackson.core:jackson-core:jar:2.12.1:compile\r\n    [INFO] +- com.fasterxml.jackson.core:jackson-annotations:jar:2.12.1:compile","title":"Logstash logback encoder failing with java.util.ServiceConfigurationError (jackson.datatype.jsr310.JavaTimeModule could not be instantiated)","body":"<p>I think I figured it out. It turned out to be a dependencies issue.</p>\n<p>(Basically, with logstash 6.6, jackson.core 2.9.3 threw above error. When i moved to 2.12.1 things started working. Below is actual details of the versions am using - excerpt from dependency tree)</p>\n<pre><code>[INFO] +- org.slf4j:slf4j-api:jar:1.7.30:compile\n[INFO] +- net.logstash.logback:logstash-logback-encoder:jar:6.6:compile\n[INFO] +- ch.qos.logback:logback-core:jar:1.2.3:compile\n[INFO] +- ch.qos.logback:logback-classic:jar:1.2.3:compile\n[INFO] +- ch.qos.logback:logback-access:jar:1.2.3:compile\n[INFO] +- com.fasterxml.jackson.core:jackson-databind:jar:2.12.1:compile\n[INFO] +- com.fasterxml.jackson.core:jackson-core:jar:2.12.1:compile\n[INFO] +- com.fasterxml.jackson.core:jackson-annotations:jar:2.12.1:compile\n</code></pre>\n"},{"tags":[],"owner":{"account_id":15889013,"reputation":21,"user_id":11464692,"display_name":"ashu"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1662555758,"creation_date":1662555758,"answer_id":73636022,"question_id":68438987,"body_markdown":"for me the error was different , but root cause was dependency issue.\r\nlogstash needs jackson version to be in sync.\r\nfollow here :[https://github.com/logfellow/logstash-logback-encoder/releases][1]\r\nI faced this while upgrading springboot version which inturn upgraded jackson version and caused application startup failure.\r\nfor logstash 7.2, jackson upgrade to 2.13.3 worked fine\r\n\r\n\r\n&lt;!-- begin snippet: js hide: false console: true babel: false --&gt;\r\n\r\n&lt;!-- language: lang-html --&gt;\r\n\r\n    \tjava.lang.IllegalStateException: java.lang.IllegalStateException: Logback configuration error detected: \r\n    ERROR in net.logstash.logback.encoder.LogstashEncoder@1a72a540 - Error occurred while dynamically loading jackson modules java.util.ServiceConfigurationError: com.fasterxml.jackson.databind.Module: com.fasterxml.jackson.module.jaxb.JaxbAnnotationModule Unable to get public no-arg constructor\r\n    \tat org.springframework.boot.context.logging.LoggingApplicationListener.initializeSystem(LoggingApplicationListener.java:344)\r\n    \tat org.springframework.boot.context.logging.LoggingApplicationListener.initialize(LoggingApplicationListener.java:298)\r\n    \tat org.springframework.boot.context.logging.LoggingApplicationListener.onApplicationEnvironmentPreparedEvent(LoggingApplicationListener.java:246)\r\n\r\n&lt;!-- end snippet --&gt;\r\n\r\n\r\n  [1]: https://github.com/logfellow/logstash-logback-encoder/releases","title":"Logstash logback encoder failing with java.util.ServiceConfigurationError (jackson.datatype.jsr310.JavaTimeModule could not be instantiated)","body":"<p>for me the error was different , but root cause was dependency issue.\nlogstash needs jackson version to be in sync.\nfollow here :<a href=\"https://github.com/logfellow/logstash-logback-encoder/releases\" rel=\"nofollow noreferrer\">https://github.com/logfellow/logstash-logback-encoder/releases</a>\nI faced this while upgrading springboot version which inturn upgraded jackson version and caused application startup failure.\nfor logstash 7.2, jackson upgrade to 2.13.3 worked fine</p>\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-html lang-html prettyprint-override\"><code>    java.lang.IllegalStateException: java.lang.IllegalStateException: Logback configuration error detected: \nERROR in net.logstash.logback.encoder.LogstashEncoder@1a72a540 - Error occurred while dynamically loading jackson modules java.util.ServiceConfigurationError: com.fasterxml.jackson.databind.Module: com.fasterxml.jackson.module.jaxb.JaxbAnnotationModule Unable to get public no-arg constructor\n    at org.springframework.boot.context.logging.LoggingApplicationListener.initializeSystem(LoggingApplicationListener.java:344)\n    at org.springframework.boot.context.logging.LoggingApplicationListener.initialize(LoggingApplicationListener.java:298)\n    at org.springframework.boot.context.logging.LoggingApplicationListener.onApplicationEnvironmentPreparedEvent(LoggingApplicationListener.java:246)</code></pre>\r\n</div>\r\n</div>\r\n</p>\n"}],"owner":{"account_id":976746,"reputation":3401,"user_id":997661,"accept_rate":40,"display_name":"NNP"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":10160,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":68439989,"answer_count":2,"score":2,"last_activity_date":1662555758,"creation_date":1626690603,"question_id":68438987,"body_markdown":"I am trying to have JSON-based logging in my springbootapp (2.4.8). I have followed instructions as mentioned in [github][1] and some other docs and StackOverflow-related questions. However, I am unable to resolve the issue.\r\n\r\nBelow is the exeption am getting:\r\n\r\nERROR in net.logstash.logback.encoder.LogstashEncoder@4fcee388 - Error occurred while dynamically loading jackson modules **java.util.ServiceConfigurationError**: com.fasterxml.jackson.databind.Module: Provider com.fasterxml.jackson.datatype.jsr310.**JavaTimeModule could not be instantiated**\r\n\r\n\r\nI did make sure **logstash-logback-encoder** dependency was added and logback dependencies are &gt;= 1.2.0 (am using 1.2.3). Please see excerpt from dependency tree for details.\r\n\r\n    [INFO] --- maven-dependency-plugin:3.1.2:tree (default-cli) @ &lt;my-spring-boot-app&gt; --\r\n    [INFO] +- org.slf4j:slf4j-api:jar:1.7.30:compile\r\n    [INFO] +- net.logstash.logback:logstash-logback-encoder:jar:6.6:compile\r\n    [INFO] +- ch.qos.logback:logback-core:jar:1.2.3:compile\r\n    [INFO] +- ch.qos.logback:logback-classic:jar:1.2.3:compile\r\n    [INFO] +- ch.qos.logback:logback-access:jar:1.2.3:compile\r\n    [INFO] +- com.fasterxml.jackson.core:jackson-databind:jar:2.9.3:compile\r\n    [INFO] +- com.fasterxml.jackson.core:jackson-core:jar:2.9.3:compile\r\n    [INFO] +- com.fasterxml.jackson.core:jackson-annotations:jar:2.9.3:compile\r\n\r\n\r\nAnd please see corresponding src/main/resources/logback.xml:\r\n\r\n    &lt;configuration&gt;\r\n        &lt;appender name=&quot;consoleAppender&quot; class=&quot;ch.qos.logback.core.ConsoleAppender&quot;&gt;\r\n            &lt;encoder class=&quot;net.logstash.logback.encoder.LogstashEncoder&quot;/&gt;\r\n        &lt;/appender&gt;\r\n        &lt;logger name=&quot;jsonLogger&quot; additivity=&quot;false&quot; level=&quot;DEBUG&quot;&gt;\r\n            &lt;appender-ref ref=&quot;consoleAppender&quot;/&gt;\r\n        &lt;/logger&gt;\r\n        &lt;root level=&quot;INFO&quot;&gt;\r\n            &lt;appender-ref ref=&quot;consoleAppender&quot;/&gt;\r\n        &lt;/root&gt;\r\n    &lt;/configuration&gt;\r\n\r\nFollowing is the runtime exception am getting:\r\n\r\n       ERROR in net.logstash.logback.encoder.LogstashEncoder@4fcee388 - Error occurred while dynamically loading jackson modules java.util.ServiceConfigurationError: com.fasterxml.jackson.databind.Module: Provider com.fasterxml.jackson.datatype.jsr310.JavaTimeModule could not be instantiated\r\n\r\n\r\n Below is the corresponding pom.xml file definitions for dependencies:\r\n\r\n    \r\n    &lt;properties&gt;\r\n        &lt;java.version&gt;11&lt;/java.version&gt;\r\n        &lt;scribejava.version&gt;5.6.0&lt;/scribejava.version&gt;\r\n        &lt;ch.qos.logback.version&gt;1.2.3&lt;/ch.qos.logback.version&gt;\r\n    &lt;/properties&gt;\r\n\r\n\r\n\r\n    &lt;dependency&gt;\r\n        &lt;groupId&gt;org.slf4j&lt;/groupId&gt;\r\n        &lt;artifactId&gt;slf4j-api&lt;/artifactId&gt;\r\n        &lt;version&gt;1.7.30&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n    \r\n    &lt;dependency&gt;\r\n        &lt;groupId&gt;net.logstash.logback&lt;/groupId&gt;\r\n        &lt;artifactId&gt;logstash-logback-encoder&lt;/artifactId&gt;\r\n        &lt;version&gt;6.6&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n    \r\n    &lt;dependency&gt;\r\n        &lt;groupId&gt;ch.qos.logback&lt;/groupId&gt;\r\n        &lt;artifactId&gt;logback-core&lt;/artifactId&gt;\r\n        &lt;version&gt;${ch.qos.logback.version}&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n    &lt;dependency&gt;\r\n        &lt;groupId&gt;ch.qos.logback&lt;/groupId&gt;\r\n        &lt;artifactId&gt;logback-classic&lt;/artifactId&gt;\r\n        &lt;version&gt;${ch.qos.logback.version}&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n    &lt;dependency&gt;\r\n        &lt;groupId&gt;ch.qos.logback&lt;/groupId&gt;\r\n        &lt;artifactId&gt;logback-access&lt;/artifactId&gt;\r\n        &lt;version&gt;${ch.qos.logback.version}&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n    \r\n    &lt;dependency&gt;\r\n        &lt;groupId&gt;com.fasterxml.jackson.core&lt;/groupId&gt;\r\n        &lt;artifactId&gt;jackson-databind&lt;/artifactId&gt;\r\n        &lt;version&gt;${com.fasterxml.jackson.core.version}&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n    &lt;dependency&gt;\r\n        &lt;groupId&gt;com.fasterxml.jackson.core&lt;/groupId&gt;\r\n        &lt;artifactId&gt;jackson-core&lt;/artifactId&gt;\r\n        &lt;version&gt;${com.fasterxml.jackson.core.version}&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n    &lt;dependency&gt;\r\n        &lt;groupId&gt;com.fasterxml.jackson.core&lt;/groupId&gt;\r\n        &lt;artifactId&gt;jackson-annotations&lt;/artifactId&gt;\r\n        &lt;version&gt;${com.fasterxml.jackson.core.version}&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n\r\n \r\n\r\n\r\n  [1]: https://github.com/logstash/logstash-logback-encoder","title":"Logstash logback encoder failing with java.util.ServiceConfigurationError (jackson.datatype.jsr310.JavaTimeModule could not be instantiated)","body":"<p>I am trying to have JSON-based logging in my springbootapp (2.4.8). I have followed instructions as mentioned in <a href=\"https://github.com/logstash/logstash-logback-encoder\" rel=\"nofollow noreferrer\">github</a> and some other docs and StackOverflow-related questions. However, I am unable to resolve the issue.</p>\n<p>Below is the exeption am getting:</p>\n<p>ERROR in net.logstash.logback.encoder.LogstashEncoder@4fcee388 - Error occurred while dynamically loading jackson modules <strong>java.util.ServiceConfigurationError</strong>: com.fasterxml.jackson.databind.Module: Provider com.fasterxml.jackson.datatype.jsr310.<strong>JavaTimeModule could not be instantiated</strong></p>\n<p>I did make sure <strong>logstash-logback-encoder</strong> dependency was added and logback dependencies are &gt;= 1.2.0 (am using 1.2.3). Please see excerpt from dependency tree for details.</p>\n<pre><code>[INFO] --- maven-dependency-plugin:3.1.2:tree (default-cli) @ &lt;my-spring-boot-app&gt; --\n[INFO] +- org.slf4j:slf4j-api:jar:1.7.30:compile\n[INFO] +- net.logstash.logback:logstash-logback-encoder:jar:6.6:compile\n[INFO] +- ch.qos.logback:logback-core:jar:1.2.3:compile\n[INFO] +- ch.qos.logback:logback-classic:jar:1.2.3:compile\n[INFO] +- ch.qos.logback:logback-access:jar:1.2.3:compile\n[INFO] +- com.fasterxml.jackson.core:jackson-databind:jar:2.9.3:compile\n[INFO] +- com.fasterxml.jackson.core:jackson-core:jar:2.9.3:compile\n[INFO] +- com.fasterxml.jackson.core:jackson-annotations:jar:2.9.3:compile\n</code></pre>\n<p>And please see corresponding src/main/resources/logback.xml:</p>\n<pre><code>&lt;configuration&gt;\n    &lt;appender name=&quot;consoleAppender&quot; class=&quot;ch.qos.logback.core.ConsoleAppender&quot;&gt;\n        &lt;encoder class=&quot;net.logstash.logback.encoder.LogstashEncoder&quot;/&gt;\n    &lt;/appender&gt;\n    &lt;logger name=&quot;jsonLogger&quot; additivity=&quot;false&quot; level=&quot;DEBUG&quot;&gt;\n        &lt;appender-ref ref=&quot;consoleAppender&quot;/&gt;\n    &lt;/logger&gt;\n    &lt;root level=&quot;INFO&quot;&gt;\n        &lt;appender-ref ref=&quot;consoleAppender&quot;/&gt;\n    &lt;/root&gt;\n&lt;/configuration&gt;\n</code></pre>\n<p>Following is the runtime exception am getting:</p>\n<pre><code>   ERROR in net.logstash.logback.encoder.LogstashEncoder@4fcee388 - Error occurred while dynamically loading jackson modules java.util.ServiceConfigurationError: com.fasterxml.jackson.databind.Module: Provider com.fasterxml.jackson.datatype.jsr310.JavaTimeModule could not be instantiated\n</code></pre>\n<p>Below is the corresponding pom.xml file definitions for dependencies:</p>\n<pre><code>&lt;properties&gt;\n    &lt;java.version&gt;11&lt;/java.version&gt;\n    &lt;scribejava.version&gt;5.6.0&lt;/scribejava.version&gt;\n    &lt;ch.qos.logback.version&gt;1.2.3&lt;/ch.qos.logback.version&gt;\n&lt;/properties&gt;\n\n\n\n&lt;dependency&gt;\n    &lt;groupId&gt;org.slf4j&lt;/groupId&gt;\n    &lt;artifactId&gt;slf4j-api&lt;/artifactId&gt;\n    &lt;version&gt;1.7.30&lt;/version&gt;\n&lt;/dependency&gt;\n\n&lt;dependency&gt;\n    &lt;groupId&gt;net.logstash.logback&lt;/groupId&gt;\n    &lt;artifactId&gt;logstash-logback-encoder&lt;/artifactId&gt;\n    &lt;version&gt;6.6&lt;/version&gt;\n&lt;/dependency&gt;\n\n&lt;dependency&gt;\n    &lt;groupId&gt;ch.qos.logback&lt;/groupId&gt;\n    &lt;artifactId&gt;logback-core&lt;/artifactId&gt;\n    &lt;version&gt;${ch.qos.logback.version}&lt;/version&gt;\n&lt;/dependency&gt;\n&lt;dependency&gt;\n    &lt;groupId&gt;ch.qos.logback&lt;/groupId&gt;\n    &lt;artifactId&gt;logback-classic&lt;/artifactId&gt;\n    &lt;version&gt;${ch.qos.logback.version}&lt;/version&gt;\n&lt;/dependency&gt;\n&lt;dependency&gt;\n    &lt;groupId&gt;ch.qos.logback&lt;/groupId&gt;\n    &lt;artifactId&gt;logback-access&lt;/artifactId&gt;\n    &lt;version&gt;${ch.qos.logback.version}&lt;/version&gt;\n&lt;/dependency&gt;\n\n&lt;dependency&gt;\n    &lt;groupId&gt;com.fasterxml.jackson.core&lt;/groupId&gt;\n    &lt;artifactId&gt;jackson-databind&lt;/artifactId&gt;\n    &lt;version&gt;${com.fasterxml.jackson.core.version}&lt;/version&gt;\n&lt;/dependency&gt;\n&lt;dependency&gt;\n    &lt;groupId&gt;com.fasterxml.jackson.core&lt;/groupId&gt;\n    &lt;artifactId&gt;jackson-core&lt;/artifactId&gt;\n    &lt;version&gt;${com.fasterxml.jackson.core.version}&lt;/version&gt;\n&lt;/dependency&gt;\n&lt;dependency&gt;\n    &lt;groupId&gt;com.fasterxml.jackson.core&lt;/groupId&gt;\n    &lt;artifactId&gt;jackson-annotations&lt;/artifactId&gt;\n    &lt;version&gt;${com.fasterxml.jackson.core.version}&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n"},{"tags":["java","hibernate","jpa","spring-data-jpa","persistence"],"answers":[{"tags":[],"owner":{"account_id":4922689,"reputation":624,"user_id":3964849,"display_name":"Harish Barma"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1501791863,"creation_date":1501791863,"answer_id":45493911,"question_id":45491551,"body_markdown":"By the time you persist the entity it will be in managed state so if you just call `something.getProperty();` it loads from the database and fills the `property` value of the `something` entity\r\n\r\n\r\n    public Something save(Something something) {\r\n        em.persist(something);\r\n        something.getProperty();\r\n        return something;\r\n    }\r\n\r\nso normally when you have many-to-one relationship that should be fetched automatically. If not calling the getters of the objects in entity will fill them too by firing a new DB Find request.  ","title":"Refresh and fetch an entity after save (JPA/Spring Data/Hibernate)","body":"<p>By the time you persist the entity it will be in managed state so if you just call <code>something.getProperty();</code> it loads from the database and fills the <code>property</code> value of the <code>something</code> entity</p>\n\n<pre><code>public Something save(Something something) {\n    em.persist(something);\n    something.getProperty();\n    return something;\n}\n</code></pre>\n\n<p>so normally when you have many-to-one relationship that should be fetched automatically. If not calling the getters of the objects in entity will fill them too by firing a new DB Find request.  </p>\n"},{"tags":[],"owner":{"account_id":1012936,"reputation":145168,"user_id":1025118,"accept_rate":100,"display_name":"Vlad Mihalcea"},"down_vote_count":0,"up_vote_count":11,"is_accepted":false,"score":11,"last_activity_date":1586838599,"creation_date":1501842975,"answer_id":45504591,"question_id":45491551,"body_markdown":"That&#39;s not enough:\r\n\r\n    Something result = somethingRepository.save(something);\r\n\r\nYou need to manually merge the incoming entity:\r\n\r\n    Something dbSomething = somethingRepository.findOne(\r\n        Something.class, something.getId()\r\n    );\r\n    dbSomething.setName(something.getName());\r\n    dbSomething.setOwner(something.getOwner());\r\n\r\n    somethingRepository.save(dbSomething);\r\n\r\nSince the `property` attribute is using the default [`FetchType.EAGER`][1], the entity should have the `property` attribute initialized.\r\n\r\nBut, that&#39;s strange to call the Repository twice from the REST controller. You should have a Service layer that does all that in a `@Transactional` service method. That way, you don&#39;t need to resave the entity since it&#39;s already managed.\r\n\r\n    @Transactional\r\n    public Something mergeSomething(Something something) {\r\n        Something dbSomething = somethingRepository.findOne(\r\n            Something.class, something.getId()\r\n        );\r\n        dbSomething.setName(something.getName());\r\n        dbSomething.setOwner(something.getOwner());\r\n    \r\n        return dbSomething;\r\n    }\r\n\r\nNow, you need to carefully merge every property you sent. In your case, if you send `null` for `property` you should decide whether you should nullify the `@ManyToOne` reference or not. So, it depends on your current application business logic requirements.\r\n\r\nUpdate\r\n------\r\n\r\nIf you make sure you always send back the same entity you previously fetched, you could just use `merge`.\r\n\r\n    em.merge(result);\r\n\r\nBut your `property` attribute is just an id, and not an actual child entity, so you have to resolve that yourself in the Service layer.\r\n\r\n  [1]: https://vladmihalcea.com/eager-fetching-is-a-code-smell/","title":"Refresh and fetch an entity after save (JPA/Spring Data/Hibernate)","body":"<p>That's not enough:</p>\n\n<pre><code>Something result = somethingRepository.save(something);\n</code></pre>\n\n<p>You need to manually merge the incoming entity:</p>\n\n<pre><code>Something dbSomething = somethingRepository.findOne(\n    Something.class, something.getId()\n);\ndbSomething.setName(something.getName());\ndbSomething.setOwner(something.getOwner());\n\nsomethingRepository.save(dbSomething);\n</code></pre>\n\n<p>Since the <code>property</code> attribute is using the default <a href=\"https://vladmihalcea.com/eager-fetching-is-a-code-smell/\" rel=\"noreferrer\"><code>FetchType.EAGER</code></a>, the entity should have the <code>property</code> attribute initialized.</p>\n\n<p>But, that's strange to call the Repository twice from the REST controller. You should have a Service layer that does all that in a <code>@Transactional</code> service method. That way, you don't need to resave the entity since it's already managed.</p>\n\n<pre><code>@Transactional\npublic Something mergeSomething(Something something) {\n    Something dbSomething = somethingRepository.findOne(\n        Something.class, something.getId()\n    );\n    dbSomething.setName(something.getName());\n    dbSomething.setOwner(something.getOwner());\n\n    return dbSomething;\n}\n</code></pre>\n\n<p>Now, you need to carefully merge every property you sent. In your case, if you send <code>null</code> for <code>property</code> you should decide whether you should nullify the <code>@ManyToOne</code> reference or not. So, it depends on your current application business logic requirements.</p>\n\n<h2>Update</h2>\n\n<p>If you make sure you always send back the same entity you previously fetched, you could just use <code>merge</code>.</p>\n\n<pre><code>em.merge(result);\n</code></pre>\n\n<p>But your <code>property</code> attribute is just an id, and not an actual child entity, so you have to resolve that yourself in the Service layer.</p>\n"},{"tags":[],"owner":{"account_id":1575780,"reputation":10830,"user_id":1462282,"accept_rate":100,"display_name":"Sahil Chhabra"},"down_vote_count":0,"up_vote_count":88,"is_accepted":false,"score":88,"last_activity_date":1519130644,"creation_date":1519107018,"answer_id":48878923,"question_id":45491551,"body_markdown":"Instead of defining `EntityManager` in each of your **resource**, you can define it once by creating a **Custom** JpaRepository. [Reference][1]\r\n\r\nThen use the `refresh` of your `EntityManager` in each of your repository directly.\r\n\r\nRefer the below example:\r\n\r\n**CustomRepository Interface**\r\n\r\n    import org.springframework.data.jpa.repository.JpaRepository;\r\n    import org.springframework.data.repository.NoRepositoryBean;\r\n    \r\n    import java.io.Serializable;\r\n    \r\n    @NoRepositoryBean\r\n    public interface CustomRepository&lt;T, ID extends Serializable&gt; extends JpaRepository&lt;T, ID&gt; {\r\n      void refresh(T t);\r\n    }\r\n\r\n\r\n**CustomRepository Implementation**\r\n\r\n    import org.springframework.data.jpa.repository.support.JpaEntityInformation;\r\n    import org.springframework.data.jpa.repository.support.SimpleJpaRepository;\r\n    import org.springframework.transaction.annotation.Transactional;\r\n    \r\n    import javax.persistence.EntityManager;\r\n    import java.io.Serializable;\r\n    \r\n    public class CustomRepositoryImpl&lt;T, ID extends Serializable&gt; extends SimpleJpaRepository&lt;T, ID&gt;\r\n        implements CustomRepository&lt;T, ID&gt; {\r\n    \r\n      private final EntityManager entityManager;\r\n    \r\n      public CustomRepositoryImpl(JpaEntityInformation entityInformation, EntityManager entityManager) {\r\n        super(entityInformation, entityManager);\r\n        this.entityManager = entityManager;\r\n      }\r\n    \r\n      @Override\r\n      @Transactional\r\n      public void refresh(T t) {\r\n        entityManager.refresh(t);\r\n      }\r\n    }\r\n\r\n**Enable Custom JPARepository in Spring Boot Application Class**\r\n\r\n    @SpringBootApplication\r\n    @EnableJpaRepositories (repositoryBaseClass = CustomRepositoryImpl.class)\r\n    public class Application {\r\n      public static void main(String[] args) {\r\n        SpringApplication.run(Application.class, args);\r\n      }\r\n    }\r\n\r\n**Your Something Repository**\r\n\r\n    \r\n    \r\n    public interface SomethingRepository extends CustomRepository&lt;Something, Long&gt; {\r\n\r\n    }\r\n\r\n**Use Refresh directly in SomethingResource** (Assuming Something is an Entity)\r\n\r\n    @RestController\r\n    @RequestMapping(&quot;/api&quot;)\r\n    @Transactional\r\n    public class SomethingResource {\r\n    \r\n        private final SomethingRepository somethingRepository;\r\n    \r\n        public SomethingResource(SomethingRepository somethingRepository) {\r\n            this.somethingRepository = somethingRepository;\r\n        }\r\n    \r\n        @PostMapping(&quot;/somethings&quot;)\r\n        public Something createSomething(@RequestBody Something something) throws URISyntaxException {\r\n            Something result = somethingRepository.save(something);\r\n            somethingRepository.refresh(result);\r\n            return result;\r\n        }\r\n    }\r\n\r\n\r\n\r\n\r\n  [1]: https://docs.spring.io/spring-data/jpa/docs/current/reference/html/#repositories.custom-implementations","title":"Refresh and fetch an entity after save (JPA/Spring Data/Hibernate)","body":"<p>Instead of defining <code>EntityManager</code> in each of your <strong>resource</strong>, you can define it once by creating a <strong>Custom</strong> JpaRepository. <a href=\"https://docs.spring.io/spring-data/jpa/docs/current/reference/html/#repositories.custom-implementations\" rel=\"noreferrer\">Reference</a></p>\n\n<p>Then use the <code>refresh</code> of your <code>EntityManager</code> in each of your repository directly.</p>\n\n<p>Refer the below example:</p>\n\n<p><strong>CustomRepository Interface</strong></p>\n\n<pre><code>import org.springframework.data.jpa.repository.JpaRepository;\nimport org.springframework.data.repository.NoRepositoryBean;\n\nimport java.io.Serializable;\n\n@NoRepositoryBean\npublic interface CustomRepository&lt;T, ID extends Serializable&gt; extends JpaRepository&lt;T, ID&gt; {\n  void refresh(T t);\n}\n</code></pre>\n\n<p><strong>CustomRepository Implementation</strong></p>\n\n<pre><code>import org.springframework.data.jpa.repository.support.JpaEntityInformation;\nimport org.springframework.data.jpa.repository.support.SimpleJpaRepository;\nimport org.springframework.transaction.annotation.Transactional;\n\nimport javax.persistence.EntityManager;\nimport java.io.Serializable;\n\npublic class CustomRepositoryImpl&lt;T, ID extends Serializable&gt; extends SimpleJpaRepository&lt;T, ID&gt;\n    implements CustomRepository&lt;T, ID&gt; {\n\n  private final EntityManager entityManager;\n\n  public CustomRepositoryImpl(JpaEntityInformation entityInformation, EntityManager entityManager) {\n    super(entityInformation, entityManager);\n    this.entityManager = entityManager;\n  }\n\n  @Override\n  @Transactional\n  public void refresh(T t) {\n    entityManager.refresh(t);\n  }\n}\n</code></pre>\n\n<p><strong>Enable Custom JPARepository in Spring Boot Application Class</strong></p>\n\n<pre><code>@SpringBootApplication\n@EnableJpaRepositories (repositoryBaseClass = CustomRepositoryImpl.class)\npublic class Application {\n  public static void main(String[] args) {\n    SpringApplication.run(Application.class, args);\n  }\n}\n</code></pre>\n\n<p><strong>Your Something Repository</strong></p>\n\n<pre><code>public interface SomethingRepository extends CustomRepository&lt;Something, Long&gt; {\n\n}\n</code></pre>\n\n<p><strong>Use Refresh directly in SomethingResource</strong> (Assuming Something is an Entity)</p>\n\n<pre><code>@RestController\n@RequestMapping(\"/api\")\n@Transactional\npublic class SomethingResource {\n\n    private final SomethingRepository somethingRepository;\n\n    public SomethingResource(SomethingRepository somethingRepository) {\n        this.somethingRepository = somethingRepository;\n    }\n\n    @PostMapping(\"/somethings\")\n    public Something createSomething(@RequestBody Something something) throws URISyntaxException {\n        Something result = somethingRepository.save(something);\n        somethingRepository.refresh(result);\n        return result;\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":13709902,"reputation":329,"user_id":9892546,"display_name":"Narasimha A"},"down_vote_count":1,"up_vote_count":7,"is_accepted":false,"score":6,"last_activity_date":1575989916,"creation_date":1575989265,"answer_id":59269843,"question_id":45491551,"body_markdown":"In Spring Boot JpaRepository:\r\n\r\nIf our modifying query changes entities contained in the persistence context, then this context becomes outdated.\r\n\r\nIn order to fetch the entities from the database with latest record. \r\n\r\nUse @Modifying(clearAutomatically = true)\r\n\r\n@Modifying annotation has clearAutomatically attribute which defines whether it should clear the underlying persistence context after executing the modifying query.\r\n\r\nExample:\r\n\r\n    @Modifying(clearAutomatically = true)\r\n    @Query(&quot;UPDATE NetworkEntity n SET n.network_status = :network_status WHERE n.network_id = :network_id&quot;)\r\n        \tint expireNetwork(@Param(&quot;network_id&quot;) Integer network_id,  @Param(&quot;network_status&quot;) String network_status);","title":"Refresh and fetch an entity after save (JPA/Spring Data/Hibernate)","body":"<p>In Spring Boot JpaRepository:</p>\n\n<p>If our modifying query changes entities contained in the persistence context, then this context becomes outdated.</p>\n\n<p>In order to fetch the entities from the database with latest record. </p>\n\n<p>Use @Modifying(clearAutomatically = true)</p>\n\n<p>@Modifying annotation has clearAutomatically attribute which defines whether it should clear the underlying persistence context after executing the modifying query.</p>\n\n<p>Example:</p>\n\n<pre><code>@Modifying(clearAutomatically = true)\n@Query(\"UPDATE NetworkEntity n SET n.network_status = :network_status WHERE n.network_id = :network_id\")\n        int expireNetwork(@Param(\"network_id\") Integer network_id,  @Param(\"network_status\") String network_status);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":6975534,"reputation":11,"user_id":5350423,"display_name":"Dinakar"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1662555646,"creation_date":1662555646,"answer_id":73635991,"question_id":45491551,"body_markdown":"I would replace the property with a proxy generated using `session.load`\r\n```\r\n        something.setProperty(session.load(Property.class, something.getProperty().getId()))\r\n        Something result = somethingRepository.save(something);\r\n        return result;\r\n```\r\n\r\nNow the result will have the entire property object loaded from the db","title":"Refresh and fetch an entity after save (JPA/Spring Data/Hibernate)","body":"<p>I would replace the property with a proxy generated using <code>session.load</code></p>\n<pre><code>        something.setProperty(session.load(Property.class, something.getProperty().getId()))\n        Something result = somethingRepository.save(something);\n        return result;\n</code></pre>\n<p>Now the result will have the entire property object loaded from the db</p>\n"}],"owner":{"account_id":10294346,"reputation":1237,"user_id":7595061,"accept_rate":53,"display_name":"Andrea Bevilacqua"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":115255,"favorite_count":0,"down_vote_count":0,"up_vote_count":74,"answer_count":5,"score":74,"last_activity_date":1662555646,"creation_date":1501783495,"question_id":45491551,"body_markdown":"I&#39;ve these two simple entities `Something` and `Property`.\r\nThe `Something` entity has a many-to-one relationship to `Property`, so when I create a new `Something` row, I assign an existing `Property`.\r\n\r\n**Something:**\r\n\r\n    @Entity\r\n    @Table(name = &quot;something&quot;)\r\n    public class Something implements Serializable {\r\n    \r\n        private static final long serialVersionUID = 1L;\r\n    \r\n        @Id\r\n        @GeneratedValue(strategy = GenerationType.IDENTITY)\r\n        private Long id;\r\n    \r\n        @Column(name = &quot;name&quot;)\r\n        private String name;\r\n    \r\n        @Column(name = &quot;owner&quot;)\r\n        private String owner;\r\n    \r\n        @ManyToOne\r\n        private Property property;\r\n    \r\n        // getters and setters\r\n    \r\n        @Override\r\n        public String toString() {\r\n            return &quot;Something{&quot; +\r\n                &quot;id=&quot; + getId() +\r\n                &quot;, name=&#39;&quot; + getName() + &quot;&#39;&quot; +\r\n                &quot;, owner=&#39;&quot; + getOwner() + &quot;&#39;&quot; +\r\n                &quot;, property=&quot; + getProperty() +\r\n                &quot;}&quot;;\r\n        }\r\n\r\n**Property:**\r\n\r\n    @Entity\r\n    @Table(name = &quot;property&quot;)\r\n    public class Property implements Serializable {\r\n    \r\n        private static final long serialVersionUID = 1L;\r\n    \r\n        @Id\r\n        @GeneratedValue(strategy = GenerationType.IDENTITY)\r\n        private Long id;\r\n    \r\n        @Column(name = &quot;shape&quot;)\r\n        private String shape;\r\n    \r\n        @Column(name = &quot;color&quot;)\r\n        private String color;\r\n    \r\n        @Column(name = &quot;dimension&quot;)\r\n        private Integer dimension;\r\n    \r\n        // getters and setters\r\n    \r\n        @Override\r\n        public String toString() {\r\n            return &quot;Property{&quot; +\r\n                &quot;id=&quot; + getId() +\r\n                &quot;, shape=&#39;&quot; + getShape() + &quot;&#39;&quot; +\r\n                &quot;, color=&#39;&quot; + getColor() + &quot;&#39;&quot; +\r\n                &quot;, dimension=&#39;&quot; + getDimension() + &quot;&#39;&quot; +\r\n                &quot;}&quot;;\r\n        }\r\n    }\r\n\r\nThis is the `SomethingRepository` (Spring):\r\n\r\n    @SuppressWarnings(&quot;unused&quot;)\r\n    @Repository\r\n    public interface SomethingRepository extends JpaRepository&lt;Something,Long&gt; {\r\n        \r\n    }\r\n\r\nThrough a REST controller and a JSON, I want to create a new `Something`:\r\n\r\n    @RestController\r\n    @RequestMapping(&quot;/api&quot;)\r\n    public class SomethingResource {\r\n    \r\n        private final SomethingRepository somethingRepository;\r\n    \r\n        public SomethingResource(SomethingRepository somethingRepository) {\r\n            this.somethingRepository = somethingRepository;\r\n        }\r\n    \r\n        @PostMapping(&quot;/somethings&quot;)\r\n        public Something createSomething(@RequestBody Something something) throws URISyntaxException {\r\n            Something result = somethingRepository.save(something);\r\n            return result;\r\n        }\r\n    }\r\n\r\nThis is the JSON in input (the `property` `id` 1 is an existing row in the database):\r\n\r\n    {\r\n      &quot;name&quot;: &quot;MyName&quot;,\r\n      &quot;owner&quot;: &quot;MySelf&quot;,\r\n      &quot;property&quot;: {\r\n        &quot;id&quot;: 1\r\n      }\r\n}\r\n\r\nThe problem is: after the method `.save(something)`, the variable `result` contains the persisted entity, but without the fields of field `property`, validated (they are `null`):\r\n\r\nOutput JSON:\r\n\r\n    {\r\n      &quot;id&quot;: 1,\r\n      &quot;name&quot;: &quot;MyName&quot;,\r\n      &quot;owner&quot;: &quot;MySelf&quot;,\r\n      &quot;property&quot;: {\r\n        &quot;id&quot;: 1,\r\n        &quot;shape&quot;: null,\r\n        &quot;color&quot;: null,\r\n        &quot;dimension&quot;: null\r\n      }\r\n    }\r\n\r\nI expect that they are validated/returned after the save operation.\r\n\r\nTo workaround this, I have to inject/declare the `EntityManager` in the REST controller, and call the method `EntityManager.refresh(something)` (or I have to call a `.findOne(something.getId())` method to have the complete persisted entity):\r\n\r\n    @RestController\r\n    @RequestMapping(&quot;/api&quot;)\r\n    @Transactional\r\n    public class SomethingResource {\r\n    \r\n        private final SomethingRepository somethingRepository;\r\n        \r\n        private final EntityManager em;\r\n    \r\n        public SomethingResource(SomethingRepository somethingRepository, EntityManager em) {\r\n            this.somethingRepository = somethingRepository;\r\n            this.em = em;\r\n        }\r\n    \r\n        @PostMapping(&quot;/somethings&quot;)\r\n        public Something createSomething(@RequestBody Something something) throws URISyntaxException {\r\n            Something result = somethingRepository.save(something);\r\n            em.refresh(result);\r\n            return result;\r\n        }\r\n    }\r\n\r\nWith this workaround, I&#39;ve the expected saved entith (with a correct JSON):\r\n\r\n    {\r\n      &quot;id&quot;: 4,\r\n      &quot;name&quot;: &quot;MyName&quot;,\r\n      &quot;owner&quot;: &quot;MySelf&quot;,\r\n      &quot;property&quot;: {\r\n        &quot;id&quot;: 1,\r\n        &quot;shape&quot;: &quot;Rectangle&quot;,\r\n        &quot;color&quot;: &quot;Red&quot;,\r\n        &quot;dimension&quot;: 50\r\n      }\r\n    }\r\n\r\nIs there an automatic method/annotation, with JPA or Spring or Hibernate, in order to have the &quot;complete&quot; persisted entity?\r\n\r\nI would like to avoid to declare the `EntityManager` in every REST or Service class, or I want avoid to call the `.findOne(Long)` method everytime I want the new refreshed persisted entity.","title":"Refresh and fetch an entity after save (JPA/Spring Data/Hibernate)","body":"<p>I've these two simple entities <code>Something</code> and <code>Property</code>.\nThe <code>Something</code> entity has a many-to-one relationship to <code>Property</code>, so when I create a new <code>Something</code> row, I assign an existing <code>Property</code>.</p>\n<p><strong>Something:</strong></p>\n<pre><code>@Entity\n@Table(name = &quot;something&quot;)\npublic class Something implements Serializable {\n\n    private static final long serialVersionUID = 1L;\n\n    @Id\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\n    private Long id;\n\n    @Column(name = &quot;name&quot;)\n    private String name;\n\n    @Column(name = &quot;owner&quot;)\n    private String owner;\n\n    @ManyToOne\n    private Property property;\n\n    // getters and setters\n\n    @Override\n    public String toString() {\n        return &quot;Something{&quot; +\n            &quot;id=&quot; + getId() +\n            &quot;, name='&quot; + getName() + &quot;'&quot; +\n            &quot;, owner='&quot; + getOwner() + &quot;'&quot; +\n            &quot;, property=&quot; + getProperty() +\n            &quot;}&quot;;\n    }\n</code></pre>\n<p><strong>Property:</strong></p>\n<pre><code>@Entity\n@Table(name = &quot;property&quot;)\npublic class Property implements Serializable {\n\n    private static final long serialVersionUID = 1L;\n\n    @Id\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\n    private Long id;\n\n    @Column(name = &quot;shape&quot;)\n    private String shape;\n\n    @Column(name = &quot;color&quot;)\n    private String color;\n\n    @Column(name = &quot;dimension&quot;)\n    private Integer dimension;\n\n    // getters and setters\n\n    @Override\n    public String toString() {\n        return &quot;Property{&quot; +\n            &quot;id=&quot; + getId() +\n            &quot;, shape='&quot; + getShape() + &quot;'&quot; +\n            &quot;, color='&quot; + getColor() + &quot;'&quot; +\n            &quot;, dimension='&quot; + getDimension() + &quot;'&quot; +\n            &quot;}&quot;;\n    }\n}\n</code></pre>\n<p>This is the <code>SomethingRepository</code> (Spring):</p>\n<pre><code>@SuppressWarnings(&quot;unused&quot;)\n@Repository\npublic interface SomethingRepository extends JpaRepository&lt;Something,Long&gt; {\n    \n}\n</code></pre>\n<p>Through a REST controller and a JSON, I want to create a new <code>Something</code>:</p>\n<pre><code>@RestController\n@RequestMapping(&quot;/api&quot;)\npublic class SomethingResource {\n\n    private final SomethingRepository somethingRepository;\n\n    public SomethingResource(SomethingRepository somethingRepository) {\n        this.somethingRepository = somethingRepository;\n    }\n\n    @PostMapping(&quot;/somethings&quot;)\n    public Something createSomething(@RequestBody Something something) throws URISyntaxException {\n        Something result = somethingRepository.save(something);\n        return result;\n    }\n}\n</code></pre>\n<p>This is the JSON in input (the <code>property</code> <code>id</code> 1 is an existing row in the database):</p>\n<pre><code>{\n  &quot;name&quot;: &quot;MyName&quot;,\n  &quot;owner&quot;: &quot;MySelf&quot;,\n  &quot;property&quot;: {\n    &quot;id&quot;: 1\n  }\n</code></pre>\n<p>}</p>\n<p>The problem is: after the method <code>.save(something)</code>, the variable <code>result</code> contains the persisted entity, but without the fields of field <code>property</code>, validated (they are <code>null</code>):</p>\n<p>Output JSON:</p>\n<pre><code>{\n  &quot;id&quot;: 1,\n  &quot;name&quot;: &quot;MyName&quot;,\n  &quot;owner&quot;: &quot;MySelf&quot;,\n  &quot;property&quot;: {\n    &quot;id&quot;: 1,\n    &quot;shape&quot;: null,\n    &quot;color&quot;: null,\n    &quot;dimension&quot;: null\n  }\n}\n</code></pre>\n<p>I expect that they are validated/returned after the save operation.</p>\n<p>To workaround this, I have to inject/declare the <code>EntityManager</code> in the REST controller, and call the method <code>EntityManager.refresh(something)</code> (or I have to call a <code>.findOne(something.getId())</code> method to have the complete persisted entity):</p>\n<pre><code>@RestController\n@RequestMapping(&quot;/api&quot;)\n@Transactional\npublic class SomethingResource {\n\n    private final SomethingRepository somethingRepository;\n    \n    private final EntityManager em;\n\n    public SomethingResource(SomethingRepository somethingRepository, EntityManager em) {\n        this.somethingRepository = somethingRepository;\n        this.em = em;\n    }\n\n    @PostMapping(&quot;/somethings&quot;)\n    public Something createSomething(@RequestBody Something something) throws URISyntaxException {\n        Something result = somethingRepository.save(something);\n        em.refresh(result);\n        return result;\n    }\n}\n</code></pre>\n<p>With this workaround, I've the expected saved entith (with a correct JSON):</p>\n<pre><code>{\n  &quot;id&quot;: 4,\n  &quot;name&quot;: &quot;MyName&quot;,\n  &quot;owner&quot;: &quot;MySelf&quot;,\n  &quot;property&quot;: {\n    &quot;id&quot;: 1,\n    &quot;shape&quot;: &quot;Rectangle&quot;,\n    &quot;color&quot;: &quot;Red&quot;,\n    &quot;dimension&quot;: 50\n  }\n}\n</code></pre>\n<p>Is there an automatic method/annotation, with JPA or Spring or Hibernate, in order to have the &quot;complete&quot; persisted entity?</p>\n<p>I would like to avoid to declare the <code>EntityManager</code> in every REST or Service class, or I want avoid to call the <code>.findOne(Long)</code> method everytime I want the new refreshed persisted entity.</p>\n"},{"tags":["java","postgresql","hibernate","jpa","sqlresultsetmapping"],"comments":[{"owner":{"account_id":107907,"reputation":40512,"user_id":286685,"accept_rate":56,"display_name":"Stijn de Witt"},"score":1,"creation_date":1485979196,"post_id":39243854,"comment_id":71154628,"body_markdown":"I have only today discovered this issue. I wasn&#39;t too happy with JPA before, as I am pretty disappointed at the lowe expressiveness of JPQL (i need native query way too often I feel), but now this... It&#39;s dramatic! I have to list 20 columns and if just one of them changes I have to fix it in 3 places. This is a disaster and the very problem I was trying to solve with JPA + Annotations in the first place. Why not just depend on order? First column named &#39;id&#39; corresponds with first entity that has an &#39;id&#39; field, next column to next entity etc.","body":"I have only today discovered this issue. I wasn&#39;t too happy with JPA before, as I am pretty disappointed at the lowe expressiveness of JPQL (i need native query way too often I feel), but now this... It&#39;s dramatic! I have to list 20 columns and if just one of them changes I have to fix it in 3 places. This is a disaster and the very problem I was trying to solve with JPA + Annotations in the first place. Why not just depend on order? First column named &#39;id&#39; corresponds with first entity that has an &#39;id&#39; field, next column to next entity etc."}],"answers":[{"tags":[],"owner":{"account_id":8857003,"reputation":418,"user_id":6614435,"display_name":"J&#252;rgen"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1472630549,"creation_date":1472630549,"answer_id":39243951,"question_id":39243854,"body_markdown":"Looks like the native query does not map to the `SqlResultSetMapping`. You have way more columns in your query than in your mapping. The selected columns in your query have to match your mapping.","title":"Java JPA Hibernate SqlResultSetMapping Aliases","body":"<p>Looks like the native query does not map to the <code>SqlResultSetMapping</code>. You have way more columns in your query than in your mapping. The selected columns in your query have to match your mapping.</p>\n"},{"tags":[],"owner":{"account_id":9028338,"reputation":36,"user_id":6726926,"display_name":"Samir CHEKOR"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1662555358,"creation_date":1472655795,"answer_id":39253103,"question_id":39243854,"body_markdown":"You can use `SELECT NEW` :\r\n\r\n 1. Create a class has all column needed use in query .\r\n     \r\n        package dz.my;\r\n      \r\n        public class GatewayGatewayWithLoc {\r\n            private Integer idGw;\r\n            private Integer activeGw;\r\n            private Integer idGwWl;\r\n            private Integer activeGwWl;\r\n        \r\n                public GatewayGatewayWithLoc(Integer idGw, Integer activeGw, Integer idGwWl, Integer activeGwWl) {\r\n                    this.idGw = idGw;\r\n                    this.activeGw = activeGw;\r\n                    this.idGwWl = idGwWl;\r\n                    this.activeGwWl = activeGwWl;\r\n                }\r\n               ....\r\n             // getter and setter\r\n             ...... \r\n                \r\n            }\r\n 2. Use the Query\r\n\r\n        Query query = em.createQuery(&quot;SELECT NEW dz.my.GatewayGatewayWithLoc(gw.id, gw.active, gwwl.id, gwwl.active) FROM Gateway gw ,GatewayGatewayWithLoc gwwl WHERE ...&quot;);\r\n        List&lt;GatewayGatewayWithLoc&gt; liste = query.getResultList();\r\n        // display the answer\r\n        for (GatewayGatewayWithLoc gwgw : liste) {\r\n            System.out.println(&quot;GatewayGatewayWithLoc : &quot; + gwgw.getIdGw() + &quot; &quot; + gwgw.getActiveGw()+ &quot; &quot; + gwgw.getIdGwWl()+ &quot; &quot; + gwgw.getActiveGwWl());\r\n        }`\r\n   \r\n\r\n","title":"Java JPA Hibernate SqlResultSetMapping Aliases","body":"<p>You can use <code>SELECT NEW</code> :</p>\n<ol>\n<li><p>Create a class has all column needed use in query .</p>\n<pre><code>package dz.my;\n\npublic class GatewayGatewayWithLoc {\n    private Integer idGw;\n    private Integer activeGw;\n    private Integer idGwWl;\n    private Integer activeGwWl;\n\n        public GatewayGatewayWithLoc(Integer idGw, Integer activeGw, Integer idGwWl, Integer activeGwWl) {\n            this.idGw = idGw;\n            this.activeGw = activeGw;\n            this.idGwWl = idGwWl;\n            this.activeGwWl = activeGwWl;\n        }\n       ....\n     // getter and setter\n     ...... \n\n    }\n</code></pre>\n</li>\n<li><p>Use the Query</p>\n<pre><code>Query query = em.createQuery(&quot;SELECT NEW dz.my.GatewayGatewayWithLoc(gw.id, gw.active, gwwl.id, gwwl.active) FROM Gateway gw ,GatewayGatewayWithLoc gwwl WHERE ...&quot;);\nList&lt;GatewayGatewayWithLoc&gt; liste = query.getResultList();\n// display the answer\nfor (GatewayGatewayWithLoc gwgw : liste) {\n    System.out.println(&quot;GatewayGatewayWithLoc : &quot; + gwgw.getIdGw() + &quot; &quot; + gwgw.getActiveGw()+ &quot; &quot; + gwgw.getIdGwWl()+ &quot; &quot; + gwgw.getActiveGwWl());\n}`\n</code></pre>\n</li>\n</ol>\n"},{"tags":[],"owner":{"account_id":1012936,"reputation":145168,"user_id":1025118,"accept_rate":100,"display_name":"Vlad Mihalcea"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1472729160,"creation_date":1472729160,"answer_id":39270277,"question_id":39243854,"body_markdown":"I think you need to specify all the `@FieldResult` explicitly especially since you have column names that are conflicting between the two tables.\r\n\r\n","title":"Java JPA Hibernate SqlResultSetMapping Aliases","body":"<p>I think you need to specify all the <code>@FieldResult</code> explicitly especially since you have column names that are conflicting between the two tables.</p>\n"}],"owner":{"account_id":7093724,"reputation":45,"user_id":5428095,"display_name":"Miha"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":3179,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":39270277,"answer_count":3,"score":2,"last_activity_date":1662555358,"creation_date":1472630250,"question_id":39243854,"body_markdown":"In Java application which uses JPA 2.1 with Hibernate 4.3.11 implementation I am trying to use `SqlResultSetMapping` to map native query results to entity. Query includes joined two tables with same column names, so I need to use aliases and map them (issue described here: http://www.tinesoft.com/java/be-aware-of-mutliple-result-mappings-in-jpa)\r\n\r\nFor simplicity of question I shrank query and entity to minimum, that still causes the issue. Real code uses two entities and DB function, which is the reason for using native query instead of JPQL.\r\n\r\nGateway entity:\r\n\r\n    @Entity\r\n    public class Gateway implements Serializable {\r\n\t    @Id\r\n\t    @GeneratedValue(strategy = GenerationType.IDENTITY)\r\n    \tprivate Integer id;\r\n\t    private Integer active;\r\n        ...\r\n\t    @Column(name = &quot;activation_code&quot;)\r\n    \tprivate String activationCode;\r\n        ...\r\n    }\r\n\r\nSqlResultSetMapping:\r\n\r\n    @SqlResultSetMapping(\r\n            name = &quot;GatewayWithLoc&quot;,\r\n            entities = {\r\n                @EntityResult( entityClass = Gateway.class , fields =     @FieldResult(name = &quot;id&quot;, column = &quot;gw_id&quot;))\r\n            }\r\n    )\r\n\r\nQuery:\r\n\r\n    Query query = em.createNativeQuery(&quot;SELECT gw.id AS gw_id, ..., active, activation_code, ... FROM gateway gw&quot;, &quot;GatewayWithLoc&quot;);\r\n    List&lt;Object[]&gt; rows = query.getResultList();\r\n\r\n\r\nException:\r\n\r\n&lt;!-- language: lang-none --&gt;\r\n\r\n    Caused by: org.postgresql.util.PSQLException: The column name activati2_1_0_ was not found in this ResultSet.\r\n\tat org.postgresql.jdbc2.AbstractJdbc2ResultSet.findColumn(AbstractJdbc2ResultSet.java:2803)\r\n    ...\r\n\r\n\r\nIf I use `SELECT *` without `fields = @FieldResult...` in `SqlResultSetMapping`, code works as expected, but I can&#39;t do that because of same column names in different tables.\r\n\r\nI will solve this by manual mapping results to entities as I need quick solution, but it would be great to know if I am doing something wrong or Hibernate does not support what I am trying to do. Book &quot;Pro JPA 2&quot; contains very similar example which is supposed to work.\r\n\r\nUpdate: Tested with Hibernate 5.1.1 (Spring 4.3.2) - same result\r\n\r\nUpdate: It looks like all column names need to be specified as mentioned in multiple answers. This seems like a big issue of JPA/Hibernate to me - those column names could be derived from entity, with just exceptions specified manually. Instead, I need to write column names 3 times (1. query, 2. result set mapping 3. entity) which is ugly and difficult to maintain.","title":"Java JPA Hibernate SqlResultSetMapping Aliases","body":"<p>In Java application which uses JPA 2.1 with Hibernate 4.3.11 implementation I am trying to use <code>SqlResultSetMapping</code> to map native query results to entity. Query includes joined two tables with same column names, so I need to use aliases and map them (issue described here: <a href=\"http://www.tinesoft.com/java/be-aware-of-mutliple-result-mappings-in-jpa\" rel=\"nofollow\">http://www.tinesoft.com/java/be-aware-of-mutliple-result-mappings-in-jpa</a>)</p>\n\n<p>For simplicity of question I shrank query and entity to minimum, that still causes the issue. Real code uses two entities and DB function, which is the reason for using native query instead of JPQL.</p>\n\n<p>Gateway entity:</p>\n\n<pre><code>@Entity\npublic class Gateway implements Serializable {\n    @Id\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\n    private Integer id;\n    private Integer active;\n    ...\n    @Column(name = \"activation_code\")\n    private String activationCode;\n    ...\n}\n</code></pre>\n\n<p>SqlResultSetMapping:</p>\n\n<pre><code>@SqlResultSetMapping(\n        name = \"GatewayWithLoc\",\n        entities = {\n            @EntityResult( entityClass = Gateway.class , fields =     @FieldResult(name = \"id\", column = \"gw_id\"))\n        }\n)\n</code></pre>\n\n<p>Query:</p>\n\n<pre><code>Query query = em.createNativeQuery(\"SELECT gw.id AS gw_id, ..., active, activation_code, ... FROM gateway gw\", \"GatewayWithLoc\");\nList&lt;Object[]&gt; rows = query.getResultList();\n</code></pre>\n\n<p>Exception:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>Caused by: org.postgresql.util.PSQLException: The column name activati2_1_0_ was not found in this ResultSet.\nat org.postgresql.jdbc2.AbstractJdbc2ResultSet.findColumn(AbstractJdbc2ResultSet.java:2803)\n...\n</code></pre>\n\n<p>If I use <code>SELECT *</code> without <code>fields = @FieldResult...</code> in <code>SqlResultSetMapping</code>, code works as expected, but I can't do that because of same column names in different tables.</p>\n\n<p>I will solve this by manual mapping results to entities as I need quick solution, but it would be great to know if I am doing something wrong or Hibernate does not support what I am trying to do. Book \"Pro JPA 2\" contains very similar example which is supposed to work.</p>\n\n<p>Update: Tested with Hibernate 5.1.1 (Spring 4.3.2) - same result</p>\n\n<p>Update: It looks like all column names need to be specified as mentioned in multiple answers. This seems like a big issue of JPA/Hibernate to me - those column names could be derived from entity, with just exceptions specified manually. Instead, I need to write column names 3 times (1. query, 2. result set mapping 3. entity) which is ugly and difficult to maintain.</p>\n"},{"tags":["java","hibernate","jpa","mapping"],"comments":[{"owner":{"account_id":3284439,"reputation":39734,"user_id":2764255,"accept_rate":50,"display_name":"Nikos Paraskevopoulos"},"score":1,"creation_date":1662553135,"post_id":73635311,"comment_id":130031717,"body_markdown":"I think the [AttributeConverter](https://javaee.github.io/javaee-spec/javadocs/javax/persistence/AttributeConverter.html) is what you need. Use it with the [Convert](https://javaee.github.io/javaee-spec/javadocs/javax/persistence/Convert.html) and [Converter](https://javaee.github.io/javaee-spec/javadocs/javax/persistence/Converter.html) annotations.","body":"I think the <a href=\"https://javaee.github.io/javaee-spec/javadocs/javax/persistence/AttributeConverter.html\" rel=\"nofollow noreferrer\">AttributeConverter</a> is what you need. Use it with the <a href=\"https://javaee.github.io/javaee-spec/javadocs/javax/persistence/Convert.html\" rel=\"nofollow noreferrer\">Convert</a> and <a href=\"https://javaee.github.io/javaee-spec/javadocs/javax/persistence/Converter.html\" rel=\"nofollow noreferrer\">Converter</a> annotations."},{"owner":{"account_id":6982783,"reputation":326,"user_id":5354987,"display_name":"Samuel Marchant"},"score":0,"creation_date":1662558801,"post_id":73635311,"comment_id":130034075,"body_markdown":"Never quite got this far for times sake in JPA , These appear useful   https://www.baeldung.com/jpa-embedded-embeddable  and   https://www.baeldung.com/hibernate-identifiers and this https://www.baeldung.com/jpa-get-auto-generated-id","body":"Never quite got this far for times sake in JPA , These appear useful   <a href=\"https://www.baeldung.com/jpa-embedded-embeddable\" rel=\"nofollow noreferrer\">baeldung.com/jpa-embedded-embeddable</a>  and   <a href=\"https://www.baeldung.com/hibernate-identifiers\" rel=\"nofollow noreferrer\">baeldung.com/hibernate-identifiers</a> and this <a href=\"https://www.baeldung.com/jpa-get-auto-generated-id\" rel=\"nofollow noreferrer\">baeldung.com/jpa-get-auto-generated-id</a>"}],"answers":[{"tags":[],"owner":{"account_id":3284439,"reputation":39734,"user_id":2764255,"accept_rate":50,"display_name":"Nikos Paraskevopoulos"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1662553684,"creation_date":1662553684,"answer_id":73635525,"question_id":73635311,"body_markdown":"```java\r\n@Converter(autoApply=true) // autoApply is reasonable, if not use @Converter on field\r\npublic class IDStringConverter implements AttributeConverter&lt;IDString,String&gt; {\r\n  @Override\r\n  public String convertToDatabaseColumn(IDString attribute) {\r\n    return attribute != null ? attribute.getValue() : null;\r\n  }\r\n\r\n  @Override\r\n  public IDString convertToEntityAttribute(String dbData) {\r\n    return dbData != null ? new IDString(dbData) : null;\r\n  }\r\n}\r\n```\r\n\r\nWith this you should not need any other modifications in your code. One limitation of the `AttributeConverter` is that it maps from exactly 1 Java field to exactly 1 DB column. If you wanted to map to more columns (not the case here), you would need embeddables.","title":"Is it possible to map a JPA/Hibernate Entity field to a field in another class without @Embeddable?","body":"<pre class=\"lang-java prettyprint-override\"><code>@Converter(autoApply=true) // autoApply is reasonable, if not use @Converter on field\npublic class IDStringConverter implements AttributeConverter&lt;IDString,String&gt; {\n  @Override\n  public String convertToDatabaseColumn(IDString attribute) {\n    return attribute != null ? attribute.getValue() : null;\n  }\n\n  @Override\n  public IDString convertToEntityAttribute(String dbData) {\n    return dbData != null ? new IDString(dbData) : null;\n  }\n}\n</code></pre>\n<p>With this you should not need any other modifications in your code. One limitation of the <code>AttributeConverter</code> is that it maps from exactly 1 Java field to exactly 1 DB column. If you wanted to map to more columns (not the case here), you would need embeddables.</p>\n"},{"tags":[],"owner":{"account_id":60737,"reputation":15904,"user_id":181336,"display_name":"Adriaan Koster"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1662555194,"creation_date":1662555194,"answer_id":73635867,"question_id":73635311,"body_markdown":"You could also put a @Column annotation on the getter:\r\n\r\n    @Entity\r\n    public class Person {\r\n    \r\n        private final IdString idString = new IdString();\r\n\r\n        @Column(name = &quot;ID_STRiNG&quot;)      \r\n        public IdString getIdString() {\r\n            return idString.getValue();\r\n        }\r\n\r\n        public void setIdString(String input) {\r\n            idString.setValue(input);\r\n        }\r\n\r\n\r\nAnother solution could be to convert to/from IdString using @PostLoad and @PrePersit event handlers:\r\n\r\n    @Entity\r\n    public class Person {\r\n    \r\n        @Column(name = &quot;ID_STRiNG&quot;)\r\n        private String the_string; // no getters &amp; setters\r\n\r\n        @Transient\r\n        private final IdString idString = new IdString();\r\n\r\n        @PostLoad\r\n        public void postLoad() {\r\n            idString.setValue(the_string);\r\n        }\r\n\r\n        @PrePersist\r\n        public void prePersist() {\r\n            the_string = idString.getValue();\r\n        }\r\n\r\n        // getters &amp; setters for idString \r\n\r\n\r\n    ","title":"Is it possible to map a JPA/Hibernate Entity field to a field in another class without @Embeddable?","body":"<p>You could also put a @Column annotation on the getter:</p>\n<pre><code>@Entity\npublic class Person {\n\n    private final IdString idString = new IdString();\n\n    @Column(name = &quot;ID_STRiNG&quot;)      \n    public IdString getIdString() {\n        return idString.getValue();\n    }\n\n    public void setIdString(String input) {\n        idString.setValue(input);\n    }\n</code></pre>\n<p>Another solution could be to convert to/from IdString using @PostLoad and @PrePersit event handlers:</p>\n<pre><code>@Entity\npublic class Person {\n\n    @Column(name = &quot;ID_STRiNG&quot;)\n    private String the_string; // no getters &amp; setters\n\n    @Transient\n    private final IdString idString = new IdString();\n\n    @PostLoad\n    public void postLoad() {\n        idString.setValue(the_string);\n    }\n\n    @PrePersist\n    public void prePersist() {\n        the_string = idString.getValue();\n    }\n\n    // getters &amp; setters for idString \n</code></pre>\n"}],"owner":{"account_id":16766539,"reputation":9,"user_id":17070576,"display_name":"Zimeon"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":770,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1662555194,"creation_date":1662552726,"question_id":73635311,"body_markdown":"I have a very simple Entity (Person.java) that I am wanting to persist via JPA/Hibernate.\r\nThe Entity contains two fields: ID and Identification String.\r\n\r\nThe ID is a simple Integer, and is no problem. The Identification String is currently a String, but for various reasons, I want to instead use a wrapper class for String (IDString), where there are various validation methods among other things.\r\n\r\nI am wondering how I can get JPA/Hibernate to use the wrapped string (inside the custom class IDString) when persisting the Person table in the database. I know this can probably be solved by letting the IDString be @Embeddable and then embed IDString in the Person entity with @Embedded, but I am looking for another method, mostly because IDString is in an entirely different package, and I am reluctant to have to go there and change stuff.\r\n\r\nGoogling, I found https://www.baeldung.com/hibernate-custom-types, but it seems to be mostly about more complicated cases, where you want to convert one class into another type, and I do feel that there is probably a smarter way that I am simply overlooking.\r\n\r\nHere is the entity (in theory)\r\n\r\n    @Entity(name=&quot;Person&quot;)\r\n    @Table(name=&quot;DB_TABLE_PERSON&quot;)\r\n    public class Person implements Serializable {\r\n        @Id\r\n        Integer id;\r\n        // WHAT SHOULD I PUT HERE? I WANT TO SIMPLY USE THE STRING INSIDE IDSTRING AS THE FIELD TO PERSIST\r\n        IDString idString;\r\n\r\n        // getter and setter for ID.\r\n        \r\n        public void getIdString() {\r\n            return idString.getValue();\r\n        }\r\n        public void setIdString(String in) {\r\n            idString.setValue(in);\r\n        }\r\n    }\r\n\r\nAnd here is the class IDString (in theory):\r\n\r\n    public class IDString {\r\n        // I really want to be a POJO\r\n        private final String the_string;\r\n        public IdString(String input) {\r\n            if (isValid(input)) {\r\n                the_string = input;\r\n            } else {\r\n                throw new SomeCoolException(&quot;Invalid format of the ID String&quot;);\r\n            }\r\n        public boolean isValid(String input) {\r\n            // bunch of code to validate the input string\r\n        }\r\n        public String getValue() {\r\n            return the_string;\r\n        }\r\n        public void setValue(String input) {\r\n            if (isValid(input)) the_string = s;\r\n            else throw new SomeCoolException(&quot;Invalid format of the ID String&quot;);\r\n    }\r\n\r\nI know that I could place the validation if the IDString inside the Entity, but the IDString will be used elsewhere (it&#39;s a general custom class), so I don&#39;t want to do that. Is there a simple way?\r\n\r\n        ","title":"Is it possible to map a JPA/Hibernate Entity field to a field in another class without @Embeddable?","body":"<p>I have a very simple Entity (Person.java) that I am wanting to persist via JPA/Hibernate.\nThe Entity contains two fields: ID and Identification String.</p>\n<p>The ID is a simple Integer, and is no problem. The Identification String is currently a String, but for various reasons, I want to instead use a wrapper class for String (IDString), where there are various validation methods among other things.</p>\n<p>I am wondering how I can get JPA/Hibernate to use the wrapped string (inside the custom class IDString) when persisting the Person table in the database. I know this can probably be solved by letting the IDString be @Embeddable and then embed IDString in the Person entity with @Embedded, but I am looking for another method, mostly because IDString is in an entirely different package, and I am reluctant to have to go there and change stuff.</p>\n<p>Googling, I found <a href=\"https://www.baeldung.com/hibernate-custom-types\" rel=\"nofollow noreferrer\">https://www.baeldung.com/hibernate-custom-types</a>, but it seems to be mostly about more complicated cases, where you want to convert one class into another type, and I do feel that there is probably a smarter way that I am simply overlooking.</p>\n<p>Here is the entity (in theory)</p>\n<pre><code>@Entity(name=&quot;Person&quot;)\n@Table(name=&quot;DB_TABLE_PERSON&quot;)\npublic class Person implements Serializable {\n    @Id\n    Integer id;\n    // WHAT SHOULD I PUT HERE? I WANT TO SIMPLY USE THE STRING INSIDE IDSTRING AS THE FIELD TO PERSIST\n    IDString idString;\n\n    // getter and setter for ID.\n    \n    public void getIdString() {\n        return idString.getValue();\n    }\n    public void setIdString(String in) {\n        idString.setValue(in);\n    }\n}\n</code></pre>\n<p>And here is the class IDString (in theory):</p>\n<pre><code>public class IDString {\n    // I really want to be a POJO\n    private final String the_string;\n    public IdString(String input) {\n        if (isValid(input)) {\n            the_string = input;\n        } else {\n            throw new SomeCoolException(&quot;Invalid format of the ID String&quot;);\n        }\n    public boolean isValid(String input) {\n        // bunch of code to validate the input string\n    }\n    public String getValue() {\n        return the_string;\n    }\n    public void setValue(String input) {\n        if (isValid(input)) the_string = s;\n        else throw new SomeCoolException(&quot;Invalid format of the ID String&quot;);\n}\n</code></pre>\n<p>I know that I could place the validation if the IDString inside the Entity, but the IDString will be used elsewhere (it's a general custom class), so I don't want to do that. Is there a simple way?</p>\n"},{"tags":["java","android","exoplayer","foreground-service","android-service-binding"],"answers":[{"tags":[],"owner":{"account_id":2020103,"reputation":550,"user_id":1806493,"display_name":"GGK stands for Ukraine"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1662554976,"creation_date":1662554976,"answer_id":73635817,"question_id":72066737,"body_markdown":"In my opinion the use of MediaSessionCompat is essential for an audio app. A very good instructions can be found [here][1].\r\nI hope this helps you.\r\n\r\nGGK\r\n\r\n  [1]: https://code.tutsplus.com/tutorials/background-audio-in-android-with-mediasessioncompat--cms-27030","title":"How to set action for previous and next controls in ExoPlayer?","body":"<p>In my opinion the use of MediaSessionCompat is essential for an audio app. A very good instructions can be found <a href=\"https://code.tutsplus.com/tutorials/background-audio-in-android-with-mediasessioncompat--cms-27030\" rel=\"nofollow noreferrer\">here</a>.\nI hope this helps you.</p>\n<p>GGK</p>\n"}],"owner":{"display_name":"user15787070"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":828,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1662554976,"creation_date":1651306067,"question_id":72066737,"body_markdown":"I am making a audio player app. I created a service for audio player and playback notification. I am facing problem with the previous/next buttons in the Player as well as the playback notification.\r\n1. The previous/next buttons in the audio playback notification just restarts the playback and do not change the song/audio file. Other controls work well.\r\n2. The previous/next buttons in the audio player (using exoplayer) change and play the next/previous file but the player artwork (image for audio file) do not change. Also, the play/pause button remains in paused state and when pressed, it plays a different file.\r\nHere is the code for the AudioActivity and AudioService-\r\n**AudioActivity.java**\r\n```\r\npackage com.example.videoplayer.audio;\r\n\r\nimport static com.example.videoplayer.RecyclerViewClasses.MediaFilesActivity.FOLDER_NAME_KEY;\r\nimport static com.example.videoplayer.RecyclerViewClasses.MediaFilesActivity.MY_PREF;\r\n\r\nimport android.annotation.SuppressLint;\r\nimport android.content.ComponentName;\r\nimport android.content.Context;\r\nimport android.content.Intent;\r\nimport android.content.ServiceConnection;\r\nimport android.content.SharedPreferences;\r\nimport android.net.Uri;\r\nimport android.os.Bundle;\r\nimport android.os.IBinder;\r\nimport android.util.Log;\r\nimport android.view.MenuInflater;\r\nimport android.view.MenuItem;\r\nimport android.view.View;\r\nimport android.view.Window;\r\nimport android.widget.ImageView;\r\nimport android.widget.PopupMenu;\r\nimport android.widget.RelativeLayout;\r\nimport android.widget.TextView;\r\nimport android.widget.Toast;\r\n\r\nimport androidx.annotation.NonNull;\r\nimport androidx.annotation.Nullable;\r\nimport androidx.appcompat.app.AppCompatActivity;\r\n\r\nimport com.example.videoplayer.MediaFiles;\r\nimport com.example.videoplayer.MediaPlayer.PlaylistDialog;\r\nimport com.example.videoplayer.R;\r\nimport com.example.videoplayer.RecyclerViewClasses.MediaFilesAdapter;\r\nimport com.google.android.exoplayer2.PlaybackException;\r\nimport com.google.android.exoplayer2.Player;\r\nimport com.google.android.exoplayer2.SimpleExoPlayer;\r\nimport com.google.android.exoplayer2.TracksInfo;\r\nimport com.google.android.exoplayer2.ui.PlayerView;\r\nimport com.google.android.exoplayer2.util.Util;\r\n\r\nimport java.util.ArrayList;\r\n\r\npublic class AudioActivity extends AppCompatActivity implements View.OnClickListener {\r\n    private static final String TAG = AudioActivity.class.getSimpleName();\r\n    private static final int NOTIFICATION_ID = 1;\r\n    private static final String CHANNEL_ID = &quot;channel_id&quot;;\r\n\r\n    PlayerView playerView;\r\n    SimpleExoPlayer player;\r\n    //public static SimpleExoPlayer player;\r\n    RelativeLayout root;\r\n    ImageView audioBack, audioList, menu_more;\r\n    ImageView nextButton, previousButton;\r\n\r\n    TextView playlistTitle, title;\r\n    ArrayList&lt;MediaFiles&gt; mAudioFilesArrayList;\r\n    int position;\r\n    MediaFilesAdapter mediaFilesAdapter;\r\n    String audioTitle;\r\n    String listTitle;\r\n    private AudioService mService;\r\n    private boolean mBound = false;\r\n    private Intent serviceIntent;\r\n\r\n    private ServiceConnection mServiceConnection = new ServiceConnection() {\r\n        @Override\r\n        public void onServiceConnected(ComponentName componentName, IBinder iBinder) {\r\n            AudioService.LocalBinder binder = (AudioService.LocalBinder) iBinder;\r\n            mService = binder.getService();\r\n            mBound = true;\r\n            Log.i(TAG + &quot; ###&quot;, &quot;in onServiceConnected: calling initializePlayer()&quot;);\r\n            initializePlayer();\r\n        }\r\n\r\n        @Override\r\n        public void onServiceDisconnected(ComponentName componentName) {\r\n            mBound = false;\r\n        }\r\n    };\r\n\r\n    void initializePlayer() {\r\n        if (mBound) {\r\n            Log.i(TAG + &quot; ###&quot;, &quot;initializePlayer() called&quot;);\r\n            player = mService.getplayerInstance();\r\n//            playerView.setVisibility(View.VISIBLE);\r\n//            player.setPlayWhenReady(true);\r\n            playerView.setPlayer(player);\r\n//            player.play();\r\n//            player.seekTo(position, C.TIME_UNSET);\r\n            playError();\r\n        }\r\n    }\r\n\r\n    @SuppressLint(&quot;UseCompatLoadingForDrawables&quot;)\r\n    @Override\r\n    protected void onCreate(@Nullable Bundle savedInstanceState) {\r\n        Log.i(TAG + &quot; ###&quot;, &quot;onCreate() called&quot;);\r\n        super.onCreate(savedInstanceState);\r\n        setFullScreen();\r\n        setContentView(R.layout.activity_audio_player);\r\n        try {\r\n            getSupportActionBar().hide();\r\n        } catch (NullPointerException e) {\r\n            Log.e(TAG + &quot; ###&quot;, &quot;in VideoPlayerActivity: &quot; + e);\r\n        }\r\n\r\n        playerView = findViewById(R.id.exoplayer_view_audio);\r\n\r\n        Log.i(TAG + &quot; ###&quot;, &quot;default artwork set in onCreate()&quot;);\r\n\r\n\r\n        root = findViewById(R.id.root_layout_audio);\r\n        audioBack = findViewById(R.id.audio_back_audio);\r\n        audioList = findViewById(R.id.audio_list);\r\n        nextButton = findViewById(R.id.exo_next);\r\n        previousButton = findViewById(R.id.exo_prev);\r\n        playlistTitle = findViewById(R.id.playlistTitle);\r\n        title = findViewById(R.id.audiofile_title);\r\n        menu_more = findViewById(R.id.audio_more);\r\n\r\n        SharedPreferences preferences = this.getSharedPreferences(MY_PREF, Context.MODE_PRIVATE);\r\n        listTitle = preferences.getString(FOLDER_NAME_KEY, &quot;DEFAULT_FOLDER_NAME&quot;);\r\n\r\n        position = getIntent().getIntExtra(&quot;position&quot;, 1);\r\n        audioTitle = getIntent().getStringExtra(&quot;media_title&quot;);\r\n        Bundle b = getIntent().getBundleExtra(this.getString(R.string.bundle));\r\n        mAudioFilesArrayList = b.getParcelableArrayList(this.getString(R.string.media_array_list));\r\n\r\n        Log.i(TAG + &quot; ###&quot;, &quot;position=&quot; + position);\r\n        Log.i(TAG + &quot; ###&quot;, &quot;is mAudioFilesArrayList null &quot; + (mAudioFilesArrayList == null));\r\n        if (mAudioFilesArrayList == null)\r\n            return;\r\n\r\n\r\n        audioList.setOnClickListener(this);\r\n        nextButton.setOnClickListener(this);\r\n        previousButton.setOnClickListener(this);\r\n        audioBack.setOnClickListener(this);\r\n        menu_more.setOnClickListener(this);\r\n\r\n\r\n        startServiceIntent();\r\n\r\n    }\r\n\r\n    void startServiceIntent() {\r\n        Log.i(TAG + &quot; ###&quot;, &quot;entered startServiceIntent&quot;);\r\n        serviceIntent = new Intent(this, AudioService.class);\r\n        Log.i(TAG + &quot; ###&quot;, &quot;position=&quot; + position);\r\n        serviceIntent.putExtra(&quot;position&quot;, position);\r\n        Bundle bundle = new Bundle();\r\n        Log.i(TAG + &quot; ###&quot;, &quot;is mediaArrayList null &quot; + (mAudioFilesArrayList == null));\r\n        bundle.putParcelableArrayList(this.getString(R.string.media_array_list), mAudioFilesArrayList);\r\n        serviceIntent.putExtra(&quot;bundle&quot;, bundle);\r\n        Util.startForegroundService(this, serviceIntent);\r\n        playerView.setControllerHideOnTouch(false);\r\n        playerView.setUseController(true);\r\n        playerView.setControllerShowTimeoutMs(0);\r\n        playerView.showController();\r\n        playerView.setControllerAutoShow(true);\r\n\r\n        setUI();\r\n\r\n\r\n    }\r\n\r\n    private void playError() {\r\n        Log.i(TAG + &quot; ###&quot;, &quot;entered the playError() method()&quot;);\r\n        //Player.EventListener is deprecated\r\n        player.addListener(new Player.Listener() {\r\n\r\n            @Override\r\n            public void onTracksInfoChanged(@NonNull TracksInfo tracksInfo) {\r\n                Player.Listener.super.onTracksInfoChanged(tracksInfo);\r\n                Toast.makeText(AudioActivity.this, &quot;TrackInfoChanged&quot;, Toast.LENGTH_SHORT).show();\r\n\r\n            }\r\n\r\n            @Override\r\n            public void onPlayerError(@NonNull PlaybackException error) {\r\n                Toast.makeText(AudioActivity.this, &quot;Audio Playing Error&quot;, Toast.LENGTH_SHORT).show();\r\n            }\r\n        });\r\n        player.setPlayWhenReady(true);\r\n    }\r\n\r\n    private void setFullScreen() {\r\n        requestWindowFeature(Window.FEATURE_NO_TITLE);\r\n    }\r\n\r\n    @Override\r\n    protected void onStart() {\r\n        super.onStart();\r\n        Log.i(TAG + &quot; ###&quot;, &quot;entered onStart()&quot;);\r\n        getApplicationContext().bindService(serviceIntent, mServiceConnection, 0);\r\n        initializePlayer();\r\n        setUI();\r\n    }\r\n\r\n    void setUI() {\r\n        Log.i(TAG + &quot; ###&quot;, &quot;entered setUI()&quot;);\r\n        title.setText(audioTitle);\r\n        playlistTitle.setText(listTitle);\r\n        Log.i(TAG + &quot; ###&quot;, &quot;text set in setUI()&quot;);\r\n        //playerView.setDefaultArtwork(AppCompatResources.getDrawable(this,R.drawable.ic_sharp_music_note_24));\r\n        //playerView.setUseArtwork(true);\r\n\r\n\r\n    }\r\n\r\n    @Override\r\n    protected void onResume() {\r\n        super.onResume();\r\n        Log.i(TAG + &quot; ###&quot;, &quot;onResume() called&quot;);\r\n    }\r\n\r\n    @Override\r\n    protected void onDestroy() {\r\n\r\n        super.onDestroy();\r\n    }\r\n\r\n    @Override\r\n    protected void onStop() {\r\n        Log.i(TAG + &quot; ###&quot;, &quot;onStop() called, unbinding service!&quot;);\r\n\r\n        getApplicationContext().unbindService(mServiceConnection);\r\n\r\n        mBound = false;\r\n        finish();\r\n        super.onStop();\r\n    }\r\n\r\n    @Override\r\n    public void onClick(View view) {\r\n        Log.i(TAG + &quot; ###&quot;, &quot;entered onClick() method&quot;);\r\n        switch (view.getId()) {\r\n            case R.id.exo_play:\r\n                player.play();\r\n                break;\r\n            case R.id.exo_pause:\r\n                player.pause();\r\n                break;\r\n            case R.id.exo_next:\r\n                try {\r\n                    player.stop();\r\n                    stopService(serviceIntent);\r\n                    position++;\r\n                    audioTitle = mAudioFilesArrayList.get(position).getTitle();\r\n                    title.setText(audioTitle);\r\n                    startServiceIntent();\r\n                    initializePlayer();\r\n                    player = mService.getplayerInstance();\r\n                    //playerView.setPlayer(null);\r\n                    playerView.setPlayer(player);\r\n                    \r\n                    playError();\r\n\r\n                } catch (Exception e) {\r\n                    Toast.makeText(this, &quot;No next audio file&quot;, Toast.LENGTH_SHORT).show();\r\n                    position--;\r\n                }\r\n                break;\r\n            case R.id.exo_prev:\r\n                Log.i(TAG + &quot; ###&quot;, &quot;previous button clicked!&quot;);\r\n                try {\r\n                    player.stop();\r\n                    Log.i(TAG+&quot; ###&quot;,&quot;player stopped!&quot;);\r\n                    stopService(serviceIntent);\r\n                    position--;\r\n                    audioTitle = mAudioFilesArrayList.get(position).getTitle();\r\n                    title.setText(audioTitle);\r\n                    startServiceIntent();\r\n                    //initializePlayer();\r\n                    player=mService.getplayerInstance();\r\n                    //playerView.setPlayer(null);\r\n                    playerView.setPlayer(player);\r\n                    \r\n                    playError();\r\n\r\n\r\n                } catch (Exception e) {\r\n                    Toast.makeText(this, &quot;No previous Video&quot;, Toast.LENGTH_SHORT).show();\r\n                    position++;\r\n                }\r\n\r\n                break;\r\n            case R.id.audio_back_audio:\r\n                if (player != null)\r\n                    //player.release();\r\n                    finish();\r\n                break;\r\n            case R.id.audio_list:\r\n                PlaylistDialog playlistDialog = new PlaylistDialog(mAudioFilesArrayList, mediaFilesAdapter);\r\n                playlistDialog.show(getSupportFragmentManager(), playlistDialog.getTag());\r\n                break;\r\n            case R.id.audio_more:\r\n                PopupMenu popupMenu = new PopupMenu(this, menu_more);\r\n                MenuInflater inflater = popupMenu.getMenuInflater();\r\n                inflater.inflate(R.menu.actions_video, popupMenu.getMenu());\r\n                popupMenu.setOnMenuItemClickListener(new PopupMenu.OnMenuItemClickListener() {\r\n                    @Override\r\n                    public boolean onMenuItemClick(MenuItem menuItem) {\r\n                        int id = menuItem.getItemId();\r\n                        switch (id) {\r\n                            case R.id.share_file:\r\n                                Intent shareIntent = new Intent(Intent.ACTION_SEND);\r\n                                String filepath = mAudioFilesArrayList.get(position).getPath();\r\n                                Uri uri = Uri.parse(filepath);\r\n                                shareIntent.setType(&quot;/&quot;);\r\n                                shareIntent.putExtra(Intent.EXTRA_STREAM, uri);\r\n                                startActivity(Intent.createChooser(shareIntent, &quot;Share File using&quot;));\r\n                                break;\r\n                        }\r\n                        return false;\r\n                    }\r\n                });\r\n                popupMenu.show();\r\n\r\n                break;\r\n        }\r\n\r\n    }\r\n}\r\n```\r\n**AudioSerivce.java**\r\n```\r\npackage com.example.videoplayer.audio;\r\n\r\nimport android.annotation.SuppressLint;\r\nimport android.app.Notification;\r\nimport android.app.NotificationChannel;\r\nimport android.app.NotificationManager;\r\nimport android.app.PendingIntent;\r\nimport android.app.Service;\r\nimport android.content.Context;\r\nimport android.content.Intent;\r\nimport android.graphics.Bitmap;\r\nimport android.net.Uri;\r\nimport android.os.Binder;\r\nimport android.os.Build;\r\nimport android.os.Bundle;\r\nimport android.os.IBinder;\r\nimport android.util.Log;\r\n\r\nimport androidx.annotation.Nullable;\r\n\r\nimport com.example.videoplayer.MediaFiles;\r\nimport com.example.videoplayer.R;\r\nimport com.google.android.exoplayer2.C;\r\nimport com.google.android.exoplayer2.MediaItem;\r\nimport com.google.android.exoplayer2.PlaybackParameters;\r\nimport com.google.android.exoplayer2.Player;\r\nimport com.google.android.exoplayer2.SimpleExoPlayer;\r\nimport com.google.android.exoplayer2.audio.AudioAttributes;\r\nimport com.google.android.exoplayer2.source.ConcatenatingMediaSource;\r\nimport com.google.android.exoplayer2.source.MediaSource;\r\nimport com.google.android.exoplayer2.source.ProgressiveMediaSource;\r\nimport com.google.android.exoplayer2.ui.PlayerNotificationManager;\r\nimport com.google.android.exoplayer2.upstream.DefaultDataSource;\r\n\r\nimport java.io.File;\r\nimport java.util.ArrayList;\r\n\r\npublic class AudioService extends Service {\r\n    private static final String TAG = AudioService.class.getSimpleName();\r\n    private final IBinder mBinder = new LocalBinder();\r\n    private SimpleExoPlayer player;\r\n    private int position;\r\n    PlaybackParameters parameters;\r\n    private ArrayList&lt;MediaFiles&gt; mAudioFilesArrayList;\r\n    private PlayerNotificationManager.Builder playerNotificationManagerBuilder;\r\n    private PlayerNotificationManager playerNotificationManager;\r\n    ConcatenatingMediaSource concatenatingMediaSource;\r\n    private static final int NOTIFICATION_ID = 1;\r\n    private static final String CHANNEL_ID = &quot;channel_id&quot;;\r\n\r\n    @Override\r\n    public void onCreate() {\r\n        super.onCreate();\r\n    }\r\n\r\n    @Override\r\n    public void onDestroy() {\r\n        Log.i(TAG+&quot; ###&quot;,&quot;onDestroy() called&quot;);\r\n        releasePlayer();\r\n        super.onDestroy();\r\n    }\r\n\r\n    private void releasePlayer() {\r\n\r\n        if (player != null) {\r\n            Log.i(TAG+&quot; ###&quot;,&quot;Player!=null and releasePlayer called&quot;);\r\n            playerNotificationManager.setPlayer(null);\r\n            player.release();\r\n            player = null;\r\n        }\r\n    }\r\n\r\n    @Nullable\r\n    @Override\r\n    public IBinder onBind(Intent intent) {\r\n        return mBinder;\r\n    }\r\n\r\n    public SimpleExoPlayer getplayerInstance() {\r\n        Log.i(TAG+&quot; ###&quot;,&quot;getplayerInstance() called: &quot;+(player==null));\r\n        if (player == null) {\r\n            startPlayer();\r\n        }\r\n        return player;\r\n    }\r\n\r\n    @Override\r\n    public int onStartCommand(Intent intent, int flags, int startId) {\r\n//        try {\r\n            Bundle b = intent.getBundleExtra(this.getString(R.string.bundle));\r\n            String name=this.getString( R.string.media_array_list);\r\n            mAudioFilesArrayList = b.getParcelableArrayList(this.getString( R.string.media_array_list));\r\n//        }\r\n//        catch(Exception e)\r\n//        {\r\n//            Log.e(AudioService.class.getSimpleName()+&quot; ###&quot;,e.toString());\r\n//            stopSelf();\r\n//        }\r\n        position = intent.getIntExtra(&quot;position&quot;, 1);\r\n        Log.i(TAG+&quot;###&quot;,&quot; in onStartCommand()&quot;);\r\n        Log.i(TAG+&quot; ###&quot;,&quot;is mediaArrayList null&quot;+(mAudioFilesArrayList==null));\r\n        Log.i(TAG+&quot; ###&quot;,&quot;position=&quot;+position);\r\n        if (player == null) {\r\n            Log.i(TAG+&quot; ###&quot;,&quot;Player is null, in onStartCommand calling startPlayer()&quot;);\r\n            Log.i(TAG+&quot; ###&quot;,&quot;is mediaArrayList null&quot;+(mAudioFilesArrayList==null));\r\n            Log.i(TAG+&quot; ###&quot;,&quot;position=&quot;+position);\r\n            startPlayer();\r\n        }\r\n        return START_STICKY;\r\n    }\r\n\r\n    private void startPlayer() {\r\n        Log.i(TAG+&quot; ###&quot;,&quot;entered startPlayer()&quot;);\r\n        Log.i(TAG+&quot; ###&quot;,&quot;is mediaArrayList null&quot;+(mAudioFilesArrayList==null));\r\n        Log.i(TAG+&quot; ###&quot;,&quot;position=&quot;+position);\r\n        final Context context = this;\r\n        createNotificationChannel();\r\n        playerNotificationManagerBuilder = new PlayerNotificationManager.Builder(context, NOTIFICATION_ID, CHANNEL_ID)\r\n                .setRewindActionIconResourceId(R.drawable.ic_rewind)\r\n                .setNextActionIconResourceId(R.drawable.ic_next)\r\n                .setPreviousActionIconResourceId(R.drawable.ic_previous)\r\n                .setSmallIconResourceId(R.drawable.ic_sharp_music_note_24);\r\n        playerNotificationManagerBuilder.setPlayActionIconResourceId(R.drawable.ic_play);\r\n        playerNotificationManagerBuilder.setPauseActionIconResourceId(R.drawable.ic_pause);\r\n        playerNotificationManagerBuilder.setFastForwardActionIconResourceId(R.drawable.ic_fast_forward);\r\n\r\n        playerNotificationManagerBuilder.setMediaDescriptionAdapter(new PlayerNotificationManager.MediaDescriptionAdapter() {\r\n            @Override\r\n            public CharSequence getCurrentContentTitle(Player player) {\r\n                return mAudioFilesArrayList.get(position).getTitle();\r\n            }\r\n\r\n            @Nullable\r\n            @Override\r\n            public PendingIntent createCurrentContentIntent(Player player) {\r\n                Intent intent = new Intent(context, AudioActivity.class);\r\n                intent.putExtra(&quot;position&quot;, position);\r\n                Bundle bundle = new Bundle();\r\n                bundle.putParcelableArrayList(context.getString( R.string.media_array_list), mAudioFilesArrayList);\r\n                intent.putExtra(&quot;bundle&quot;,bundle);\r\n\r\n                return PendingIntent.getActivity(context, 0, intent, PendingIntent.FLAG_UPDATE_CURRENT|PendingIntent.FLAG_IMMUTABLE);\r\n            }\r\n\r\n            @Nullable\r\n            @Override\r\n            public CharSequence getCurrentContentText(Player player) {\r\n                return &quot;Summary&quot;;\r\n            }\r\n\r\n            @Nullable\r\n            @Override\r\n            public Bitmap getCurrentLargeIcon(Player player, PlayerNotificationManager.BitmapCallback callback) {\r\n                int window=player.getCurrentMediaItemIndex();\r\n                Log.i(TAG+&quot;###&quot;,&quot;in getCurrentLargeIcon: window=&quot;+window);\r\n                    return null;\r\n//                return getCurrentLargeIcon(player,callback);\r\n            }\r\n\r\n        });\r\n        playerNotificationManagerBuilder.setNotificationListener(new PlayerNotificationManager.NotificationListener() {\r\n            @Override\r\n            public void onNotificationCancelled(int notificationId, boolean dismissedByUser) {\r\n                Log.i(TAG+&quot; ###&quot;,&quot;onNotificationCancelled called!&quot;);\r\n                stopSelf();\r\n            }\r\n\r\n            @Override\r\n            public void onNotificationPosted(int notificationId, Notification notification, boolean ongoing) {\r\n                startForeground(notificationId, notification);\r\n                Log.i(TAG+&quot; ###&quot;,&quot;startForeground() in onNotificationPosted!&quot;);\r\n            }\r\n        });\r\n        playerNotificationManager=playerNotificationManagerBuilder.build();\r\n\r\n        Log.i(TAG+&quot; ###&quot;,&quot;startPlayer() called&quot;);\r\n        String path = mAudioFilesArrayList.get(position).getPath();\r\n        Uri uri = Uri.parse(path);\r\n//        PlayerView.Builder builder = new ExoPlayer.Builder(this);\r\n//        builder.setSeekForwardIncrementMs(5000);\r\n//        builder.setSeekBackIncrementMs(5000);\r\n//        player = builder.build();\r\n        SimpleExoPlayer.Builder builder = new SimpleExoPlayer.Builder(this);\r\n        builder.setSeekForwardIncrementMs(10000);\r\n        builder.setSeekBackIncrementMs(10000);\r\n        player = builder.build();\r\n\r\n\r\n        DefaultDataSource.Factory dataSourceFactory = new DefaultDataSource.Factory(this);\r\n\r\n        concatenatingMediaSource = new ConcatenatingMediaSource();\r\n        for (int i = 0; i &lt; mAudioFilesArrayList.size(); i++) {\r\n            new File(String.valueOf(mAudioFilesArrayList.get(i)));\r\n            MediaSource mediaSource = new ProgressiveMediaSource.Factory(dataSourceFactory)\r\n                    .createMediaSource(MediaItem.fromUri(Uri.parse(String.valueOf(uri))));\r\n            concatenatingMediaSource.addMediaSource(mediaSource);\r\n        }\r\n\r\n        player.setMediaSource(concatenatingMediaSource);\r\n        AudioAttributes audioAttributes = new AudioAttributes.Builder()\r\n                .setUsage(C.USAGE_MEDIA)\r\n                .setContentType(C.CONTENT_TYPE_MUSIC)\r\n                .build();\r\n        player.setAudioAttributes(audioAttributes, true);\r\n        player.setPlaybackParameters(parameters);\r\n        player.prepare();\r\n\r\n        player.play();\r\n        player.seekTo(position,C.TIME_UNSET);\r\n\r\n        //player.setPlayWhenReady(true);\r\n        playerNotificationManager.setPlayer(player);\r\n        playerNotificationManager.setUseNextAction(true);\r\n        playerNotificationManager.setSmallIcon(R.drawable.ic_sharp_music_note_24);\r\n        playerNotificationManager.setColorized(true);\r\n        playerNotificationManager.setUseChronometer(true);\r\n        playerNotificationManager.setColor(R.color.teal_200);\r\n        playerNotificationManager.setUseChronometer(true);\r\n        playerNotificationManager.setUseRewindAction(true);\r\n        playerNotificationManager.setUseFastForwardAction(true);\r\n        playerNotificationManager.setUsePlayPauseActions(true);\r\n        Log.i(TAG+&quot; ###&quot;,&quot;returning from startPlayer()&quot;);\r\n    }\r\n\r\n    private void createNotificationChannel() {\r\n        Log.i(TAG+&quot; ###&quot;,&quot;createNotificationChannel()&quot;);\r\n        // Create the NotificationChannel, but only on API 26+ because\r\n        // the NotificationChannel class is new and not in the support library\r\n        if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.O) {\r\n            CharSequence name = getString(R.string.channel_name);\r\n            String description = getString(R.string.channel_description);\r\n            int importance = NotificationManager.IMPORTANCE_DEFAULT;\r\n            NotificationChannel channel = new NotificationChannel(CHANNEL_ID, name, importance);\r\n            channel.setDescription(description);\r\n            // Register the channel with the system; you can&#39;t change the importance\r\n            // or other notification behaviors after this\r\n            NotificationManager notificationManager = getSystemService(NotificationManager.class);\r\n            notificationManager.createNotificationChannel(channel);\r\n        }\r\n    }\r\n    public class LocalBinder extends Binder {\r\n        public AudioService getService() {\r\n            return AudioService.this;\r\n        }\r\n    }\r\n}\r\n```\r\nPlease help me in finding the problem and resolving it.\r\n","title":"How to set action for previous and next controls in ExoPlayer?","body":"<p>I am making a audio player app. I created a service for audio player and playback notification. I am facing problem with the previous/next buttons in the Player as well as the playback notification.</p>\n<ol>\n<li>The previous/next buttons in the audio playback notification just restarts the playback and do not change the song/audio file. Other controls work well.</li>\n<li>The previous/next buttons in the audio player (using exoplayer) change and play the next/previous file but the player artwork (image for audio file) do not change. Also, the play/pause button remains in paused state and when pressed, it plays a different file.\nHere is the code for the AudioActivity and AudioService-\n<strong>AudioActivity.java</strong></li>\n</ol>\n<pre><code>package com.example.videoplayer.audio;\n\nimport static com.example.videoplayer.RecyclerViewClasses.MediaFilesActivity.FOLDER_NAME_KEY;\nimport static com.example.videoplayer.RecyclerViewClasses.MediaFilesActivity.MY_PREF;\n\nimport android.annotation.SuppressLint;\nimport android.content.ComponentName;\nimport android.content.Context;\nimport android.content.Intent;\nimport android.content.ServiceConnection;\nimport android.content.SharedPreferences;\nimport android.net.Uri;\nimport android.os.Bundle;\nimport android.os.IBinder;\nimport android.util.Log;\nimport android.view.MenuInflater;\nimport android.view.MenuItem;\nimport android.view.View;\nimport android.view.Window;\nimport android.widget.ImageView;\nimport android.widget.PopupMenu;\nimport android.widget.RelativeLayout;\nimport android.widget.TextView;\nimport android.widget.Toast;\n\nimport androidx.annotation.NonNull;\nimport androidx.annotation.Nullable;\nimport androidx.appcompat.app.AppCompatActivity;\n\nimport com.example.videoplayer.MediaFiles;\nimport com.example.videoplayer.MediaPlayer.PlaylistDialog;\nimport com.example.videoplayer.R;\nimport com.example.videoplayer.RecyclerViewClasses.MediaFilesAdapter;\nimport com.google.android.exoplayer2.PlaybackException;\nimport com.google.android.exoplayer2.Player;\nimport com.google.android.exoplayer2.SimpleExoPlayer;\nimport com.google.android.exoplayer2.TracksInfo;\nimport com.google.android.exoplayer2.ui.PlayerView;\nimport com.google.android.exoplayer2.util.Util;\n\nimport java.util.ArrayList;\n\npublic class AudioActivity extends AppCompatActivity implements View.OnClickListener {\n    private static final String TAG = AudioActivity.class.getSimpleName();\n    private static final int NOTIFICATION_ID = 1;\n    private static final String CHANNEL_ID = &quot;channel_id&quot;;\n\n    PlayerView playerView;\n    SimpleExoPlayer player;\n    //public static SimpleExoPlayer player;\n    RelativeLayout root;\n    ImageView audioBack, audioList, menu_more;\n    ImageView nextButton, previousButton;\n\n    TextView playlistTitle, title;\n    ArrayList&lt;MediaFiles&gt; mAudioFilesArrayList;\n    int position;\n    MediaFilesAdapter mediaFilesAdapter;\n    String audioTitle;\n    String listTitle;\n    private AudioService mService;\n    private boolean mBound = false;\n    private Intent serviceIntent;\n\n    private ServiceConnection mServiceConnection = new ServiceConnection() {\n        @Override\n        public void onServiceConnected(ComponentName componentName, IBinder iBinder) {\n            AudioService.LocalBinder binder = (AudioService.LocalBinder) iBinder;\n            mService = binder.getService();\n            mBound = true;\n            Log.i(TAG + &quot; ###&quot;, &quot;in onServiceConnected: calling initializePlayer()&quot;);\n            initializePlayer();\n        }\n\n        @Override\n        public void onServiceDisconnected(ComponentName componentName) {\n            mBound = false;\n        }\n    };\n\n    void initializePlayer() {\n        if (mBound) {\n            Log.i(TAG + &quot; ###&quot;, &quot;initializePlayer() called&quot;);\n            player = mService.getplayerInstance();\n//            playerView.setVisibility(View.VISIBLE);\n//            player.setPlayWhenReady(true);\n            playerView.setPlayer(player);\n//            player.play();\n//            player.seekTo(position, C.TIME_UNSET);\n            playError();\n        }\n    }\n\n    @SuppressLint(&quot;UseCompatLoadingForDrawables&quot;)\n    @Override\n    protected void onCreate(@Nullable Bundle savedInstanceState) {\n        Log.i(TAG + &quot; ###&quot;, &quot;onCreate() called&quot;);\n        super.onCreate(savedInstanceState);\n        setFullScreen();\n        setContentView(R.layout.activity_audio_player);\n        try {\n            getSupportActionBar().hide();\n        } catch (NullPointerException e) {\n            Log.e(TAG + &quot; ###&quot;, &quot;in VideoPlayerActivity: &quot; + e);\n        }\n\n        playerView = findViewById(R.id.exoplayer_view_audio);\n\n        Log.i(TAG + &quot; ###&quot;, &quot;default artwork set in onCreate()&quot;);\n\n\n        root = findViewById(R.id.root_layout_audio);\n        audioBack = findViewById(R.id.audio_back_audio);\n        audioList = findViewById(R.id.audio_list);\n        nextButton = findViewById(R.id.exo_next);\n        previousButton = findViewById(R.id.exo_prev);\n        playlistTitle = findViewById(R.id.playlistTitle);\n        title = findViewById(R.id.audiofile_title);\n        menu_more = findViewById(R.id.audio_more);\n\n        SharedPreferences preferences = this.getSharedPreferences(MY_PREF, Context.MODE_PRIVATE);\n        listTitle = preferences.getString(FOLDER_NAME_KEY, &quot;DEFAULT_FOLDER_NAME&quot;);\n\n        position = getIntent().getIntExtra(&quot;position&quot;, 1);\n        audioTitle = getIntent().getStringExtra(&quot;media_title&quot;);\n        Bundle b = getIntent().getBundleExtra(this.getString(R.string.bundle));\n        mAudioFilesArrayList = b.getParcelableArrayList(this.getString(R.string.media_array_list));\n\n        Log.i(TAG + &quot; ###&quot;, &quot;position=&quot; + position);\n        Log.i(TAG + &quot; ###&quot;, &quot;is mAudioFilesArrayList null &quot; + (mAudioFilesArrayList == null));\n        if (mAudioFilesArrayList == null)\n            return;\n\n\n        audioList.setOnClickListener(this);\n        nextButton.setOnClickListener(this);\n        previousButton.setOnClickListener(this);\n        audioBack.setOnClickListener(this);\n        menu_more.setOnClickListener(this);\n\n\n        startServiceIntent();\n\n    }\n\n    void startServiceIntent() {\n        Log.i(TAG + &quot; ###&quot;, &quot;entered startServiceIntent&quot;);\n        serviceIntent = new Intent(this, AudioService.class);\n        Log.i(TAG + &quot; ###&quot;, &quot;position=&quot; + position);\n        serviceIntent.putExtra(&quot;position&quot;, position);\n        Bundle bundle = new Bundle();\n        Log.i(TAG + &quot; ###&quot;, &quot;is mediaArrayList null &quot; + (mAudioFilesArrayList == null));\n        bundle.putParcelableArrayList(this.getString(R.string.media_array_list), mAudioFilesArrayList);\n        serviceIntent.putExtra(&quot;bundle&quot;, bundle);\n        Util.startForegroundService(this, serviceIntent);\n        playerView.setControllerHideOnTouch(false);\n        playerView.setUseController(true);\n        playerView.setControllerShowTimeoutMs(0);\n        playerView.showController();\n        playerView.setControllerAutoShow(true);\n\n        setUI();\n\n\n    }\n\n    private void playError() {\n        Log.i(TAG + &quot; ###&quot;, &quot;entered the playError() method()&quot;);\n        //Player.EventListener is deprecated\n        player.addListener(new Player.Listener() {\n\n            @Override\n            public void onTracksInfoChanged(@NonNull TracksInfo tracksInfo) {\n                Player.Listener.super.onTracksInfoChanged(tracksInfo);\n                Toast.makeText(AudioActivity.this, &quot;TrackInfoChanged&quot;, Toast.LENGTH_SHORT).show();\n\n            }\n\n            @Override\n            public void onPlayerError(@NonNull PlaybackException error) {\n                Toast.makeText(AudioActivity.this, &quot;Audio Playing Error&quot;, Toast.LENGTH_SHORT).show();\n            }\n        });\n        player.setPlayWhenReady(true);\n    }\n\n    private void setFullScreen() {\n        requestWindowFeature(Window.FEATURE_NO_TITLE);\n    }\n\n    @Override\n    protected void onStart() {\n        super.onStart();\n        Log.i(TAG + &quot; ###&quot;, &quot;entered onStart()&quot;);\n        getApplicationContext().bindService(serviceIntent, mServiceConnection, 0);\n        initializePlayer();\n        setUI();\n    }\n\n    void setUI() {\n        Log.i(TAG + &quot; ###&quot;, &quot;entered setUI()&quot;);\n        title.setText(audioTitle);\n        playlistTitle.setText(listTitle);\n        Log.i(TAG + &quot; ###&quot;, &quot;text set in setUI()&quot;);\n        //playerView.setDefaultArtwork(AppCompatResources.getDrawable(this,R.drawable.ic_sharp_music_note_24));\n        //playerView.setUseArtwork(true);\n\n\n    }\n\n    @Override\n    protected void onResume() {\n        super.onResume();\n        Log.i(TAG + &quot; ###&quot;, &quot;onResume() called&quot;);\n    }\n\n    @Override\n    protected void onDestroy() {\n\n        super.onDestroy();\n    }\n\n    @Override\n    protected void onStop() {\n        Log.i(TAG + &quot; ###&quot;, &quot;onStop() called, unbinding service!&quot;);\n\n        getApplicationContext().unbindService(mServiceConnection);\n\n        mBound = false;\n        finish();\n        super.onStop();\n    }\n\n    @Override\n    public void onClick(View view) {\n        Log.i(TAG + &quot; ###&quot;, &quot;entered onClick() method&quot;);\n        switch (view.getId()) {\n            case R.id.exo_play:\n                player.play();\n                break;\n            case R.id.exo_pause:\n                player.pause();\n                break;\n            case R.id.exo_next:\n                try {\n                    player.stop();\n                    stopService(serviceIntent);\n                    position++;\n                    audioTitle = mAudioFilesArrayList.get(position).getTitle();\n                    title.setText(audioTitle);\n                    startServiceIntent();\n                    initializePlayer();\n                    player = mService.getplayerInstance();\n                    //playerView.setPlayer(null);\n                    playerView.setPlayer(player);\n                    \n                    playError();\n\n                } catch (Exception e) {\n                    Toast.makeText(this, &quot;No next audio file&quot;, Toast.LENGTH_SHORT).show();\n                    position--;\n                }\n                break;\n            case R.id.exo_prev:\n                Log.i(TAG + &quot; ###&quot;, &quot;previous button clicked!&quot;);\n                try {\n                    player.stop();\n                    Log.i(TAG+&quot; ###&quot;,&quot;player stopped!&quot;);\n                    stopService(serviceIntent);\n                    position--;\n                    audioTitle = mAudioFilesArrayList.get(position).getTitle();\n                    title.setText(audioTitle);\n                    startServiceIntent();\n                    //initializePlayer();\n                    player=mService.getplayerInstance();\n                    //playerView.setPlayer(null);\n                    playerView.setPlayer(player);\n                    \n                    playError();\n\n\n                } catch (Exception e) {\n                    Toast.makeText(this, &quot;No previous Video&quot;, Toast.LENGTH_SHORT).show();\n                    position++;\n                }\n\n                break;\n            case R.id.audio_back_audio:\n                if (player != null)\n                    //player.release();\n                    finish();\n                break;\n            case R.id.audio_list:\n                PlaylistDialog playlistDialog = new PlaylistDialog(mAudioFilesArrayList, mediaFilesAdapter);\n                playlistDialog.show(getSupportFragmentManager(), playlistDialog.getTag());\n                break;\n            case R.id.audio_more:\n                PopupMenu popupMenu = new PopupMenu(this, menu_more);\n                MenuInflater inflater = popupMenu.getMenuInflater();\n                inflater.inflate(R.menu.actions_video, popupMenu.getMenu());\n                popupMenu.setOnMenuItemClickListener(new PopupMenu.OnMenuItemClickListener() {\n                    @Override\n                    public boolean onMenuItemClick(MenuItem menuItem) {\n                        int id = menuItem.getItemId();\n                        switch (id) {\n                            case R.id.share_file:\n                                Intent shareIntent = new Intent(Intent.ACTION_SEND);\n                                String filepath = mAudioFilesArrayList.get(position).getPath();\n                                Uri uri = Uri.parse(filepath);\n                                shareIntent.setType(&quot;/&quot;);\n                                shareIntent.putExtra(Intent.EXTRA_STREAM, uri);\n                                startActivity(Intent.createChooser(shareIntent, &quot;Share File using&quot;));\n                                break;\n                        }\n                        return false;\n                    }\n                });\n                popupMenu.show();\n\n                break;\n        }\n\n    }\n}\n</code></pre>\n<p><strong>AudioSerivce.java</strong></p>\n<pre><code>package com.example.videoplayer.audio;\n\nimport android.annotation.SuppressLint;\nimport android.app.Notification;\nimport android.app.NotificationChannel;\nimport android.app.NotificationManager;\nimport android.app.PendingIntent;\nimport android.app.Service;\nimport android.content.Context;\nimport android.content.Intent;\nimport android.graphics.Bitmap;\nimport android.net.Uri;\nimport android.os.Binder;\nimport android.os.Build;\nimport android.os.Bundle;\nimport android.os.IBinder;\nimport android.util.Log;\n\nimport androidx.annotation.Nullable;\n\nimport com.example.videoplayer.MediaFiles;\nimport com.example.videoplayer.R;\nimport com.google.android.exoplayer2.C;\nimport com.google.android.exoplayer2.MediaItem;\nimport com.google.android.exoplayer2.PlaybackParameters;\nimport com.google.android.exoplayer2.Player;\nimport com.google.android.exoplayer2.SimpleExoPlayer;\nimport com.google.android.exoplayer2.audio.AudioAttributes;\nimport com.google.android.exoplayer2.source.ConcatenatingMediaSource;\nimport com.google.android.exoplayer2.source.MediaSource;\nimport com.google.android.exoplayer2.source.ProgressiveMediaSource;\nimport com.google.android.exoplayer2.ui.PlayerNotificationManager;\nimport com.google.android.exoplayer2.upstream.DefaultDataSource;\n\nimport java.io.File;\nimport java.util.ArrayList;\n\npublic class AudioService extends Service {\n    private static final String TAG = AudioService.class.getSimpleName();\n    private final IBinder mBinder = new LocalBinder();\n    private SimpleExoPlayer player;\n    private int position;\n    PlaybackParameters parameters;\n    private ArrayList&lt;MediaFiles&gt; mAudioFilesArrayList;\n    private PlayerNotificationManager.Builder playerNotificationManagerBuilder;\n    private PlayerNotificationManager playerNotificationManager;\n    ConcatenatingMediaSource concatenatingMediaSource;\n    private static final int NOTIFICATION_ID = 1;\n    private static final String CHANNEL_ID = &quot;channel_id&quot;;\n\n    @Override\n    public void onCreate() {\n        super.onCreate();\n    }\n\n    @Override\n    public void onDestroy() {\n        Log.i(TAG+&quot; ###&quot;,&quot;onDestroy() called&quot;);\n        releasePlayer();\n        super.onDestroy();\n    }\n\n    private void releasePlayer() {\n\n        if (player != null) {\n            Log.i(TAG+&quot; ###&quot;,&quot;Player!=null and releasePlayer called&quot;);\n            playerNotificationManager.setPlayer(null);\n            player.release();\n            player = null;\n        }\n    }\n\n    @Nullable\n    @Override\n    public IBinder onBind(Intent intent) {\n        return mBinder;\n    }\n\n    public SimpleExoPlayer getplayerInstance() {\n        Log.i(TAG+&quot; ###&quot;,&quot;getplayerInstance() called: &quot;+(player==null));\n        if (player == null) {\n            startPlayer();\n        }\n        return player;\n    }\n\n    @Override\n    public int onStartCommand(Intent intent, int flags, int startId) {\n//        try {\n            Bundle b = intent.getBundleExtra(this.getString(R.string.bundle));\n            String name=this.getString( R.string.media_array_list);\n            mAudioFilesArrayList = b.getParcelableArrayList(this.getString( R.string.media_array_list));\n//        }\n//        catch(Exception e)\n//        {\n//            Log.e(AudioService.class.getSimpleName()+&quot; ###&quot;,e.toString());\n//            stopSelf();\n//        }\n        position = intent.getIntExtra(&quot;position&quot;, 1);\n        Log.i(TAG+&quot;###&quot;,&quot; in onStartCommand()&quot;);\n        Log.i(TAG+&quot; ###&quot;,&quot;is mediaArrayList null&quot;+(mAudioFilesArrayList==null));\n        Log.i(TAG+&quot; ###&quot;,&quot;position=&quot;+position);\n        if (player == null) {\n            Log.i(TAG+&quot; ###&quot;,&quot;Player is null, in onStartCommand calling startPlayer()&quot;);\n            Log.i(TAG+&quot; ###&quot;,&quot;is mediaArrayList null&quot;+(mAudioFilesArrayList==null));\n            Log.i(TAG+&quot; ###&quot;,&quot;position=&quot;+position);\n            startPlayer();\n        }\n        return START_STICKY;\n    }\n\n    private void startPlayer() {\n        Log.i(TAG+&quot; ###&quot;,&quot;entered startPlayer()&quot;);\n        Log.i(TAG+&quot; ###&quot;,&quot;is mediaArrayList null&quot;+(mAudioFilesArrayList==null));\n        Log.i(TAG+&quot; ###&quot;,&quot;position=&quot;+position);\n        final Context context = this;\n        createNotificationChannel();\n        playerNotificationManagerBuilder = new PlayerNotificationManager.Builder(context, NOTIFICATION_ID, CHANNEL_ID)\n                .setRewindActionIconResourceId(R.drawable.ic_rewind)\n                .setNextActionIconResourceId(R.drawable.ic_next)\n                .setPreviousActionIconResourceId(R.drawable.ic_previous)\n                .setSmallIconResourceId(R.drawable.ic_sharp_music_note_24);\n        playerNotificationManagerBuilder.setPlayActionIconResourceId(R.drawable.ic_play);\n        playerNotificationManagerBuilder.setPauseActionIconResourceId(R.drawable.ic_pause);\n        playerNotificationManagerBuilder.setFastForwardActionIconResourceId(R.drawable.ic_fast_forward);\n\n        playerNotificationManagerBuilder.setMediaDescriptionAdapter(new PlayerNotificationManager.MediaDescriptionAdapter() {\n            @Override\n            public CharSequence getCurrentContentTitle(Player player) {\n                return mAudioFilesArrayList.get(position).getTitle();\n            }\n\n            @Nullable\n            @Override\n            public PendingIntent createCurrentContentIntent(Player player) {\n                Intent intent = new Intent(context, AudioActivity.class);\n                intent.putExtra(&quot;position&quot;, position);\n                Bundle bundle = new Bundle();\n                bundle.putParcelableArrayList(context.getString( R.string.media_array_list), mAudioFilesArrayList);\n                intent.putExtra(&quot;bundle&quot;,bundle);\n\n                return PendingIntent.getActivity(context, 0, intent, PendingIntent.FLAG_UPDATE_CURRENT|PendingIntent.FLAG_IMMUTABLE);\n            }\n\n            @Nullable\n            @Override\n            public CharSequence getCurrentContentText(Player player) {\n                return &quot;Summary&quot;;\n            }\n\n            @Nullable\n            @Override\n            public Bitmap getCurrentLargeIcon(Player player, PlayerNotificationManager.BitmapCallback callback) {\n                int window=player.getCurrentMediaItemIndex();\n                Log.i(TAG+&quot;###&quot;,&quot;in getCurrentLargeIcon: window=&quot;+window);\n                    return null;\n//                return getCurrentLargeIcon(player,callback);\n            }\n\n        });\n        playerNotificationManagerBuilder.setNotificationListener(new PlayerNotificationManager.NotificationListener() {\n            @Override\n            public void onNotificationCancelled(int notificationId, boolean dismissedByUser) {\n                Log.i(TAG+&quot; ###&quot;,&quot;onNotificationCancelled called!&quot;);\n                stopSelf();\n            }\n\n            @Override\n            public void onNotificationPosted(int notificationId, Notification notification, boolean ongoing) {\n                startForeground(notificationId, notification);\n                Log.i(TAG+&quot; ###&quot;,&quot;startForeground() in onNotificationPosted!&quot;);\n            }\n        });\n        playerNotificationManager=playerNotificationManagerBuilder.build();\n\n        Log.i(TAG+&quot; ###&quot;,&quot;startPlayer() called&quot;);\n        String path = mAudioFilesArrayList.get(position).getPath();\n        Uri uri = Uri.parse(path);\n//        PlayerView.Builder builder = new ExoPlayer.Builder(this);\n//        builder.setSeekForwardIncrementMs(5000);\n//        builder.setSeekBackIncrementMs(5000);\n//        player = builder.build();\n        SimpleExoPlayer.Builder builder = new SimpleExoPlayer.Builder(this);\n        builder.setSeekForwardIncrementMs(10000);\n        builder.setSeekBackIncrementMs(10000);\n        player = builder.build();\n\n\n        DefaultDataSource.Factory dataSourceFactory = new DefaultDataSource.Factory(this);\n\n        concatenatingMediaSource = new ConcatenatingMediaSource();\n        for (int i = 0; i &lt; mAudioFilesArrayList.size(); i++) {\n            new File(String.valueOf(mAudioFilesArrayList.get(i)));\n            MediaSource mediaSource = new ProgressiveMediaSource.Factory(dataSourceFactory)\n                    .createMediaSource(MediaItem.fromUri(Uri.parse(String.valueOf(uri))));\n            concatenatingMediaSource.addMediaSource(mediaSource);\n        }\n\n        player.setMediaSource(concatenatingMediaSource);\n        AudioAttributes audioAttributes = new AudioAttributes.Builder()\n                .setUsage(C.USAGE_MEDIA)\n                .setContentType(C.CONTENT_TYPE_MUSIC)\n                .build();\n        player.setAudioAttributes(audioAttributes, true);\n        player.setPlaybackParameters(parameters);\n        player.prepare();\n\n        player.play();\n        player.seekTo(position,C.TIME_UNSET);\n\n        //player.setPlayWhenReady(true);\n        playerNotificationManager.setPlayer(player);\n        playerNotificationManager.setUseNextAction(true);\n        playerNotificationManager.setSmallIcon(R.drawable.ic_sharp_music_note_24);\n        playerNotificationManager.setColorized(true);\n        playerNotificationManager.setUseChronometer(true);\n        playerNotificationManager.setColor(R.color.teal_200);\n        playerNotificationManager.setUseChronometer(true);\n        playerNotificationManager.setUseRewindAction(true);\n        playerNotificationManager.setUseFastForwardAction(true);\n        playerNotificationManager.setUsePlayPauseActions(true);\n        Log.i(TAG+&quot; ###&quot;,&quot;returning from startPlayer()&quot;);\n    }\n\n    private void createNotificationChannel() {\n        Log.i(TAG+&quot; ###&quot;,&quot;createNotificationChannel()&quot;);\n        // Create the NotificationChannel, but only on API 26+ because\n        // the NotificationChannel class is new and not in the support library\n        if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.O) {\n            CharSequence name = getString(R.string.channel_name);\n            String description = getString(R.string.channel_description);\n            int importance = NotificationManager.IMPORTANCE_DEFAULT;\n            NotificationChannel channel = new NotificationChannel(CHANNEL_ID, name, importance);\n            channel.setDescription(description);\n            // Register the channel with the system; you can't change the importance\n            // or other notification behaviors after this\n            NotificationManager notificationManager = getSystemService(NotificationManager.class);\n            notificationManager.createNotificationChannel(channel);\n        }\n    }\n    public class LocalBinder extends Binder {\n        public AudioService getService() {\n            return AudioService.this;\n        }\n    }\n}\n</code></pre>\n<p>Please help me in finding the problem and resolving it.</p>\n"},{"tags":["java","android","android-studio","android-notifications"],"answers":[{"tags":[],"owner":{"account_id":14423201,"reputation":840,"user_id":10418725,"display_name":"Jorn Rigter"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1662554751,"creation_date":1662549456,"answer_id":73634561,"question_id":73634479,"body_markdown":"You could just put all the stuff that you have in your notifyBtn `onClick` to a separate function, let&#39;s call it `notify`, and then add one line in your code:\r\n\r\n    @Override\r\n    public void onSensorChanged(SensorEvent sensorEvent) {\r\n        // Your previous code\r\n        accelerationTotalValue = accelerationTotalValue + changeIntAcceleration;\r\n        if (accelerationTotalValue &gt; 1000) {\r\n            notify();\r\n        }\r\n        // Rest of your code\r\n    }\r\n\r\nDo bear in mind that your current code will only run when your application is in the foreground. I&#39;d suggest reading up on Android&#39;s Activity Lifecycle [here][1].\r\n\r\n\r\n  [1]: https://developer.android.com/guide/components/activities/activity-lifecycle","title":"How to send notification with a delay when a condition is met in Android Studio","body":"<p>You could just put all the stuff that you have in your notifyBtn <code>onClick</code> to a separate function, let's call it <code>notify</code>, and then add one line in your code:</p>\n<pre><code>@Override\npublic void onSensorChanged(SensorEvent sensorEvent) {\n    // Your previous code\n    accelerationTotalValue = accelerationTotalValue + changeIntAcceleration;\n    if (accelerationTotalValue &gt; 1000) {\n        notify();\n    }\n    // Rest of your code\n}\n</code></pre>\n<p>Do bear in mind that your current code will only run when your application is in the foreground. I'd suggest reading up on Android's Activity Lifecycle <a href=\"https://developer.android.com/guide/components/activities/activity-lifecycle\" rel=\"nofollow noreferrer\">here</a>.</p>\n"}],"owner":{"account_id":25948834,"reputation":13,"user_id":19667185,"display_name":"quinten"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":314,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":73634561,"answer_count":1,"score":1,"last_activity_date":1662554751,"creation_date":1662549012,"question_id":73634479,"body_markdown":"I&#39;m creating an app which I want me to send a notification when I&#39;m a certain amount of time awake.\r\n\r\nI have done this by calculation the of acceleration the phone and adding this to in total number. This should be some kind of threshold to activate the timer.\r\n\r\nI was beable to sent a notification when a button is pressed. \r\n\r\nBut now I would want to sent this notification when &#39;accelerationTotalValue &gt; 1000&#39; for example.\r\n\r\nSince this is my first project in Android Studio and using java I&#39;m fairly new to all of this.\r\n\r\nMy java activity\r\n```\r\npublic class calibration extends AppCompatActivity {\r\n\r\n    TextView txt_currentAccel, txt_prevAccel, txt_acceleration;\r\n    TextView txt_totalAccel;\r\n    ProgressBar prog_shakeMeter;\r\n\r\n    private SensorManager mSensorManager;\r\n    private Sensor mAccelerometer;\r\n    private double accelerationPreviousValue;\r\n    private double accelerationTotalValue;\r\n\r\n    Button notifyBtn;\r\n\r\n    @Override\r\n    protected void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        setContentView(R.layout.calibration_layout);\r\n\r\n\r\n        // get layout ID&#39;s acceleration\r\n        txt_acceleration = findViewById(R.id.txt_accel);\r\n        txt_prevAccel = findViewById(R.id.txt_prevAccel);\r\n        txt_currentAccel = findViewById(R.id.txt_currentAccel);\r\n        txt_totalAccel = findViewById(R.id.txt_totalAccel);\r\n        prog_shakeMeter = findViewById(R.id.prog_shakeMeter);\r\n\r\n        // get info sensors\r\n        mSensorManager = (SensorManager)getSystemService(SENSOR_SERVICE);\r\n        mAccelerometer = mSensorManager.getDefaultSensor(Sensor.TYPE_ACCELEROMETER);\r\n\r\n        // notification\r\n            // open main page when clicking on notification\r\n        Intent resultIntent = new Intent(this, MainActivity.class);\r\n        TaskStackBuilder stackBuilder = TaskStackBuilder.create(this);\r\n        stackBuilder.addNextIntentWithParentStack(resultIntent);\r\n        PendingIntent resultPendingIntent =\r\n                stackBuilder.getPendingIntent(0, PendingIntent.FLAG_UPDATE_CURRENT | PendingIntent.FLAG_IMMUTABLE);\r\n\r\n            // find button to activate notification\r\n        notifyBtn = findViewById(R.id.Notification_Button);\r\n\r\n        if(Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.O) {\r\n            NotificationChannel channel = new NotificationChannel(&quot;My Notification&quot;,&quot;My Notification&quot;, NotificationManager.IMPORTANCE_DEFAULT);\r\n            NotificationManager manager = getSystemService(NotificationManager.class);\r\n            manager.createNotificationChannel(channel);\r\n        }\r\n\r\n        notifyBtn.setOnClickListener(new View.OnClickListener() {\r\n\r\n            @Override\r\n            public void onClick(View view) {\r\n                NotificationCompat.Builder builder = new NotificationCompat.Builder(calibration.this,&quot;My Notification&quot;);\r\n                builder.setContentTitle(&quot;My Title&quot;);\r\n                builder.setContentText(&quot;This is a simple notification&quot;);\r\n                builder.setSmallIcon(R.mipmap.ic_launcher_foreground);\r\n                builder.setAutoCancel(true);\r\n                builder.setPriority(NotificationCompat.PRIORITY_HIGH);\r\n                builder.setContentIntent(resultPendingIntent);\r\n\r\n                NotificationManagerCompat managerCompat = NotificationManagerCompat.from(calibration.this);\r\n                managerCompat.notify(1,builder.build());\r\n\r\n            }\r\n        });\r\n\r\n    }\r\n\r\n\r\n    // calculation acceleration\r\n    private final SensorEventListener sensorEventListener = new SensorEventListener() {\r\n        @SuppressLint(&quot;SetTextI18n&quot;)\r\n        @Override\r\n        public void onSensorChanged(SensorEvent sensorEvent) {\r\n            float x = sensorEvent.values[0];\r\n            float y = sensorEvent.values[1];\r\n            float z = sensorEvent.values[2];\r\n\r\n            double accelerationCurrentValue = Math.sqrt((x * x + y * y + z * z));\r\n\r\n            double changeIntAcceleration = Math.abs(accelerationCurrentValue - accelerationPreviousValue);\r\n            accelerationPreviousValue = accelerationCurrentValue;\r\n            accelerationTotalValue = accelerationTotalValue + changeIntAcceleration;\r\n\r\n            txt_currentAccel.setText(&quot;Current = &quot;+ accelerationCurrentValue);\r\n            txt_prevAccel.setText(&quot;Prev = &quot;+ accelerationCurrentValue);\r\n            txt_acceleration.setText(&quot;Acceleration change = &quot;+ changeIntAcceleration);\r\n            txt_totalAccel.setText(&quot;Total = &quot;+ accelerationTotalValue);\r\n\r\n            prog_shakeMeter.setProgress((int)changeIntAcceleration);\r\n        }\r\n\r\n        @Override\r\n        public void onAccuracyChanged(Sensor sensor, int i) {\r\n\r\n        }\r\n    };\r\n\r\n    protected void onResume() {\r\n        super.onResume();\r\n        mSensorManager.registerListener(sensorEventListener, mAccelerometer, SensorManager.SENSOR_DELAY_NORMAL);\r\n    }\r\n\r\n    protected void onPause() {\r\n        super.onPause();\r\n        mSensorManager.unregisterListener(sensorEventListener);\r\n    }\r\n}\r\n```\r\n","title":"How to send notification with a delay when a condition is met in Android Studio","body":"<p>I'm creating an app which I want me to send a notification when I'm a certain amount of time awake.</p>\n<p>I have done this by calculation the of acceleration the phone and adding this to in total number. This should be some kind of threshold to activate the timer.</p>\n<p>I was beable to sent a notification when a button is pressed.</p>\n<p>But now I would want to sent this notification when 'accelerationTotalValue &gt; 1000' for example.</p>\n<p>Since this is my first project in Android Studio and using java I'm fairly new to all of this.</p>\n<p>My java activity</p>\n<pre><code>public class calibration extends AppCompatActivity {\n\n    TextView txt_currentAccel, txt_prevAccel, txt_acceleration;\n    TextView txt_totalAccel;\n    ProgressBar prog_shakeMeter;\n\n    private SensorManager mSensorManager;\n    private Sensor mAccelerometer;\n    private double accelerationPreviousValue;\n    private double accelerationTotalValue;\n\n    Button notifyBtn;\n\n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.calibration_layout);\n\n\n        // get layout ID's acceleration\n        txt_acceleration = findViewById(R.id.txt_accel);\n        txt_prevAccel = findViewById(R.id.txt_prevAccel);\n        txt_currentAccel = findViewById(R.id.txt_currentAccel);\n        txt_totalAccel = findViewById(R.id.txt_totalAccel);\n        prog_shakeMeter = findViewById(R.id.prog_shakeMeter);\n\n        // get info sensors\n        mSensorManager = (SensorManager)getSystemService(SENSOR_SERVICE);\n        mAccelerometer = mSensorManager.getDefaultSensor(Sensor.TYPE_ACCELEROMETER);\n\n        // notification\n            // open main page when clicking on notification\n        Intent resultIntent = new Intent(this, MainActivity.class);\n        TaskStackBuilder stackBuilder = TaskStackBuilder.create(this);\n        stackBuilder.addNextIntentWithParentStack(resultIntent);\n        PendingIntent resultPendingIntent =\n                stackBuilder.getPendingIntent(0, PendingIntent.FLAG_UPDATE_CURRENT | PendingIntent.FLAG_IMMUTABLE);\n\n            // find button to activate notification\n        notifyBtn = findViewById(R.id.Notification_Button);\n\n        if(Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.O) {\n            NotificationChannel channel = new NotificationChannel(&quot;My Notification&quot;,&quot;My Notification&quot;, NotificationManager.IMPORTANCE_DEFAULT);\n            NotificationManager manager = getSystemService(NotificationManager.class);\n            manager.createNotificationChannel(channel);\n        }\n\n        notifyBtn.setOnClickListener(new View.OnClickListener() {\n\n            @Override\n            public void onClick(View view) {\n                NotificationCompat.Builder builder = new NotificationCompat.Builder(calibration.this,&quot;My Notification&quot;);\n                builder.setContentTitle(&quot;My Title&quot;);\n                builder.setContentText(&quot;This is a simple notification&quot;);\n                builder.setSmallIcon(R.mipmap.ic_launcher_foreground);\n                builder.setAutoCancel(true);\n                builder.setPriority(NotificationCompat.PRIORITY_HIGH);\n                builder.setContentIntent(resultPendingIntent);\n\n                NotificationManagerCompat managerCompat = NotificationManagerCompat.from(calibration.this);\n                managerCompat.notify(1,builder.build());\n\n            }\n        });\n\n    }\n\n\n    // calculation acceleration\n    private final SensorEventListener sensorEventListener = new SensorEventListener() {\n        @SuppressLint(&quot;SetTextI18n&quot;)\n        @Override\n        public void onSensorChanged(SensorEvent sensorEvent) {\n            float x = sensorEvent.values[0];\n            float y = sensorEvent.values[1];\n            float z = sensorEvent.values[2];\n\n            double accelerationCurrentValue = Math.sqrt((x * x + y * y + z * z));\n\n            double changeIntAcceleration = Math.abs(accelerationCurrentValue - accelerationPreviousValue);\n            accelerationPreviousValue = accelerationCurrentValue;\n            accelerationTotalValue = accelerationTotalValue + changeIntAcceleration;\n\n            txt_currentAccel.setText(&quot;Current = &quot;+ accelerationCurrentValue);\n            txt_prevAccel.setText(&quot;Prev = &quot;+ accelerationCurrentValue);\n            txt_acceleration.setText(&quot;Acceleration change = &quot;+ changeIntAcceleration);\n            txt_totalAccel.setText(&quot;Total = &quot;+ accelerationTotalValue);\n\n            prog_shakeMeter.setProgress((int)changeIntAcceleration);\n        }\n\n        @Override\n        public void onAccuracyChanged(Sensor sensor, int i) {\n\n        }\n    };\n\n    protected void onResume() {\n        super.onResume();\n        mSensorManager.registerListener(sensorEventListener, mAccelerometer, SensorManager.SENSOR_DELAY_NORMAL);\n    }\n\n    protected void onPause() {\n        super.onPause();\n        mSensorManager.unregisterListener(sensorEventListener);\n    }\n}\n</code></pre>\n"},{"tags":["java","json","exception","jackson"],"answers":[{"tags":[],"owner":{"account_id":973998,"reputation":138700,"user_id":995876,"display_name":"Esailija"},"down_vote_count":0,"up_vote_count":29,"is_accepted":true,"score":29,"last_activity_date":1355270027,"creation_date":1355269256,"answer_id":13830384,"question_id":13830346,"body_markdown":"The character at column 33 is `–`, and the reason this would be the byte `0x96` is that the file is physically encoded as Windows-1252. You need to save the file in UTF-8, windows-1252 is not a valid encoding for json. How to do this depends on what text editor you are using.\r\n\r\nSee [JSON RFC](http://www.ietf.org/rfc/rfc4627.txt):\r\n\r\n&gt; 3.  Encoding\r\n&gt; \r\n&gt;    JSON text SHALL be encoded in Unicode.  The default encoding is   \r\n&gt; UTF-8.","title":"Jackson JSON parser invalid utf-8 start byte","body":"<p>The character at column 33 is <code>–</code>, and the reason this would be the byte <code>0x96</code> is that the file is physically encoded as Windows-1252. You need to save the file in UTF-8, windows-1252 is not a valid encoding for json. How to do this depends on what text editor you are using.</p>\n\n<p>See <a href=\"http://www.ietf.org/rfc/rfc4627.txt\">JSON RFC</a>:</p>\n\n<blockquote>\n  <ol>\n  <li><p>Encoding</p>\n  \n  <p>JSON text SHALL be encoded in Unicode.  The default encoding is<br>\n  UTF-8.</p></li>\n  </ol>\n</blockquote>\n"},{"tags":[],"owner":{"account_id":18448262,"reputation":29,"user_id":13439002,"display_name":"safura"},"down_vote_count":1,"up_vote_count":3,"is_accepted":false,"score":2,"last_activity_date":1588231781,"creation_date":1588231781,"answer_id":61518073,"question_id":13830346,"body_markdown":"I have also faced similar issue. open your json in Notepad ++, then in encoding drop down select as UTF-8. and save the text to other file. doing this resolved the issue.","title":"Jackson JSON parser invalid utf-8 start byte","body":"<p>I have also faced similar issue. open your json in Notepad ++, then in encoding drop down select as UTF-8. and save the text to other file. doing this resolved the issue.</p>\n"},{"tags":[],"owner":{"account_id":3658649,"reputation":1521,"user_id":3049036,"accept_rate":57,"display_name":"Suresh"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1647511125,"creation_date":1647511125,"answer_id":71510336,"question_id":13830346,"body_markdown":"Everything mentioned here I tried and none solved my issue, so I manually typed the payload and it solved my issue.","title":"Jackson JSON parser invalid utf-8 start byte","body":"<p>Everything mentioned here I tried and none solved my issue, so I manually typed the payload and it solved my issue.</p>\n"},{"tags":[],"owner":{"account_id":6668982,"reputation":2717,"user_id":5145671,"display_name":"jmgoyesc"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1662554613,"creation_date":1662554613,"answer_id":73635743,"question_id":13830346,"body_markdown":"I know this question is old, but I would like to share something that works for me. It is possible to ignore the character in the following way.\r\n\r\n1. Define a charset decoded\r\n\r\n    StandardCharsets.UTF_8.newDecoder().onMalformedInput(CodingErrorAction.IGNORE);\r\n\r\n2. Use to read the InputStream \r\n\r\n    InputStreamReader stream = new InputStreamReader(resource.getInputStream(), CHARSET_DECODER)\r\n\r\n3. Use the Jackson CSV mapper to read the content\r\n\r\n    new CsvMapper().readerFor(Map.class).readValues(stream);\r\n\r\nThe key element here is the charset decoder with the option IGNORE in the malformed input.","title":"Jackson JSON parser invalid utf-8 start byte","body":"<p>I know this question is old, but I would like to share something that works for me. It is possible to ignore the character in the following way.</p>\n<ol>\n<li><p>Define a charset decoded</p>\n<p>StandardCharsets.UTF_8.newDecoder().onMalformedInput(CodingErrorAction.IGNORE);</p>\n</li>\n<li><p>Use to read the InputStream</p>\n<p>InputStreamReader stream = new InputStreamReader(resource.getInputStream(), CHARSET_DECODER)</p>\n</li>\n<li><p>Use the Jackson CSV mapper to read the content</p>\n<p>new CsvMapper().readerFor(Map.class).readValues(stream);</p>\n</li>\n</ol>\n<p>The key element here is the charset decoder with the option IGNORE in the malformed input.</p>\n"}],"owner":{"account_id":932593,"reputation":3291,"user_id":962146,"accept_rate":58,"display_name":"Android Noob"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":119234,"favorite_count":0,"down_vote_count":0,"up_vote_count":30,"accepted_answer_id":13830384,"answer_count":4,"score":30,"last_activity_date":1662554613,"creation_date":1355269030,"question_id":13830346,"body_markdown":"I&#39;m trying to parse the following JSON and I keep getting a `JsonParseException`:\r\n\r\n    {\r\n       &quot;episodes&quot;:{\r\n          &quot;description&quot;:&quot;Episode 3 – Oprah&#39;s Surprise Patrol from 1\\/20\\/04\\nTake a trip down memory lane and hear all your favorite episodes of The Oprah Winfrey Show from the last 25 seasons -- everyday on your radio!&quot;\r\n       }\r\n    }\r\n\r\nalso fails on this JSON\r\n\r\n    {\r\n       &quot;episodes&quot;:{\r\n          &quot;description&quot;:&quot;After 20 years in sports talk…he’s still the top dog!  Catch Christopher “Mad Dog” Russo weekday afternoons on Mad Dog Radio as he tells it like it is…Give the Doggie a call at 888-623-3646.&quot;\r\n       }\r\n    }\r\n\r\nException:\r\n\r\n    org.codehaus.jackson.JsonParseException: Invalid UTF-8 start byte 0x96\r\n     at [Source: C:\\Json Test Files\\episodes.txt; line: 3, column: 33]\r\n    \tat org.codehaus.jackson.JsonParser._constructError(JsonParser.java:1291)\r\n    \tat org.codehaus.jackson.impl.JsonParserMinimalBase._reportError(JsonParserMinimalBase.java:385)\r\n    \tat org.codehaus.jackson.impl.Utf8StreamParser._reportInvalidInitial(Utf8StreamParser.java:2236)\r\n    \tat org.codehaus.jackson.impl.Utf8StreamParser._reportInvalidChar(Utf8StreamParser.java:2230)\r\n    \tat org.codehaus.jackson.impl.Utf8StreamParser._finishString2(Utf8StreamParser.java:1467)\r\n    \tat org.codehaus.jackson.impl.Utf8StreamParser._finishString(Utf8StreamParser.java:1394)\r\n    \tat org.codehaus.jackson.impl.Utf8StreamParser.getText(Utf8StreamParser.java:113)\r\n    \tat com.niveus.jackson.Main.parseEpisodes(Main.java:37)\r\n    \tat com.niveus.jackson.Main.main(Main.java:13)\r\n\r\nCode:\r\n\r\n\r\n    \tpublic static void main(String [] args) {\r\n    \t\tparseEpisodes(&quot;C:\\\\Json Test Files\\\\episodes.txt&quot;);\r\n    \t}\r\n    \tpublic static void parseEpisodes(String filename) {\r\n    \t\tJsonFactory factory = new JsonFactory();\r\n    \t\tJsonParser parser = null;\r\n    \t\tString nameField = null;\r\n    \t\t\r\n    \t\ttry {\r\n    \t\t\tparser = factory.createJsonParser(new File(filename));\r\n    \t\t\t\r\n    \t\t\tparser.configure(JsonParser.Feature.ALLOW_UNQUOTED_CONTROL_CHARS, true);\r\n    \t\t\tparser.configure(JsonParser.Feature.ALLOW_BACKSLASH_ESCAPING_ANY_CHARACTER, true);\r\n    \t\t\t\r\n    \t\t\tJsonToken token = parser.nextToken();\r\n    \t\t\tnameField = parser.getText();\r\n    \t\t\tString desc = null;\r\n    \t\t\t\r\n    \t\t\twhile (token != JsonToken.END_OBJECT) {\r\n    \t\t\t\tif (nameField.equals(&quot;episodes&quot;)) {\r\n    \t\t\t\t\twhile (token != JsonToken.END_OBJECT) {\r\n    \t\t\t\t\t\tif (nameField.equals(&quot;description&quot;)) {\r\n    \t\t\t\t\t\t\tparser.nextToken();\r\n    \t\t\t\t\t\t\tdesc = parser.getText();\r\n    \t\t\t\t\t\t}\r\n    \t\t\t\t\t\t\r\n    \t\t\t\t\t\ttoken = parser.nextToken();\r\n    \t\t\t\t\t\tnameField = parser.getText();\r\n    \t\t\t\t\t}\r\n    \t\t\t\t}\r\n    \t\t\t\t\r\n    \t\t\t\ttoken = parser.nextToken();\r\n    \t\t\t\tnameField = parser.getText();\r\n    \t\t\t}\r\n    \t\t\t\r\n    \t\t\tSystem.out.println(desc);\r\n    \t\t} catch (JsonParseException e) {\r\n    \t\t\te.printStackTrace();\r\n    \t\t} catch (IOException e) {\r\n    \t\t\te.printStackTrace();\r\n    \t\t}\r\n    \t}\r\n    ","title":"Jackson JSON parser invalid utf-8 start byte","body":"<p>I'm trying to parse the following JSON and I keep getting a <code>JsonParseException</code>:</p>\n<pre><code>{\n   &quot;episodes&quot;:{\n      &quot;description&quot;:&quot;Episode 3 – Oprah's Surprise Patrol from 1\\/20\\/04\\nTake a trip down memory lane and hear all your favorite episodes of The Oprah Winfrey Show from the last 25 seasons -- everyday on your radio!&quot;\n   }\n}\n</code></pre>\n<p>also fails on this JSON</p>\n<pre><code>{\n   &quot;episodes&quot;:{\n      &quot;description&quot;:&quot;After 20 years in sports talk…he’s still the top dog!  Catch Christopher “Mad Dog” Russo weekday afternoons on Mad Dog Radio as he tells it like it is…Give the Doggie a call at 888-623-3646.&quot;\n   }\n}\n</code></pre>\n<p>Exception:</p>\n<pre><code>org.codehaus.jackson.JsonParseException: Invalid UTF-8 start byte 0x96\n at [Source: C:\\Json Test Files\\episodes.txt; line: 3, column: 33]\n    at org.codehaus.jackson.JsonParser._constructError(JsonParser.java:1291)\n    at org.codehaus.jackson.impl.JsonParserMinimalBase._reportError(JsonParserMinimalBase.java:385)\n    at org.codehaus.jackson.impl.Utf8StreamParser._reportInvalidInitial(Utf8StreamParser.java:2236)\n    at org.codehaus.jackson.impl.Utf8StreamParser._reportInvalidChar(Utf8StreamParser.java:2230)\n    at org.codehaus.jackson.impl.Utf8StreamParser._finishString2(Utf8StreamParser.java:1467)\n    at org.codehaus.jackson.impl.Utf8StreamParser._finishString(Utf8StreamParser.java:1394)\n    at org.codehaus.jackson.impl.Utf8StreamParser.getText(Utf8StreamParser.java:113)\n    at com.niveus.jackson.Main.parseEpisodes(Main.java:37)\n    at com.niveus.jackson.Main.main(Main.java:13)\n</code></pre>\n<p>Code:</p>\n<pre><code>    public static void main(String [] args) {\n        parseEpisodes(&quot;C:\\\\Json Test Files\\\\episodes.txt&quot;);\n    }\n    public static void parseEpisodes(String filename) {\n        JsonFactory factory = new JsonFactory();\n        JsonParser parser = null;\n        String nameField = null;\n        \n        try {\n            parser = factory.createJsonParser(new File(filename));\n            \n            parser.configure(JsonParser.Feature.ALLOW_UNQUOTED_CONTROL_CHARS, true);\n            parser.configure(JsonParser.Feature.ALLOW_BACKSLASH_ESCAPING_ANY_CHARACTER, true);\n            \n            JsonToken token = parser.nextToken();\n            nameField = parser.getText();\n            String desc = null;\n            \n            while (token != JsonToken.END_OBJECT) {\n                if (nameField.equals(&quot;episodes&quot;)) {\n                    while (token != JsonToken.END_OBJECT) {\n                        if (nameField.equals(&quot;description&quot;)) {\n                            parser.nextToken();\n                            desc = parser.getText();\n                        }\n                        \n                        token = parser.nextToken();\n                        nameField = parser.getText();\n                    }\n                }\n                \n                token = parser.nextToken();\n                nameField = parser.getText();\n            }\n            \n            System.out.println(desc);\n        } catch (JsonParseException e) {\n            e.printStackTrace();\n        } catch (IOException e) {\n            e.printStackTrace();\n        }\n    }\n</code></pre>\n"},{"tags":["java","android","android-tv"],"comments":[{"owner":{"account_id":15994883,"reputation":3427,"user_id":11543023,"display_name":"djmonki"},"score":0,"creation_date":1662728268,"post_id":73597895,"comment_id":130079318,"body_markdown":"What version of Android are you working with ? What device (tv) are you trying to prove this on or are you trying emulation ?","body":"What version of Android are you working with ? What device (tv) are you trying to prove this on or are you trying emulation ?"},{"owner":{"account_id":10723193,"reputation":355,"user_id":7891610,"accept_rate":46,"display_name":"Observer"},"score":0,"creation_date":1662785731,"post_id":73597895,"comment_id":130091447,"body_markdown":"Android 9. It is a Wisdom share smart TV. Even on emulator it is not working","body":"Android 9. It is a Wisdom share smart TV. Even on emulator it is not working"},{"owner":{"account_id":1930615,"reputation":317,"user_id":1740065,"display_name":"Darrin"},"score":0,"creation_date":1663117918,"post_id":73597895,"comment_id":130162295,"body_markdown":"It sounds like you need additional permissions added.  Did you closely review the documentation regarding permissions?  Perhaps that 10 year old question which only has answers up to Android 5.1 is now a little dated.  Most likely, there is at least one more user permission needed, which is not yet documented by that first SO answer that you quoted.","body":"It sounds like you need additional permissions added.  Did you closely review the documentation regarding permissions?  Perhaps that 10 year old question which only has answers up to Android 5.1 is now a little dated.  Most likely, there is at least one more user permission needed, which is not yet documented by that first SO answer that you quoted."}],"owner":{"account_id":10723193,"reputation":355,"user_id":7891610,"accept_rate":46,"display_name":"Observer"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":1357,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"answer_count":0,"score":3,"last_activity_date":1662553994,"creation_date":1662280423,"question_id":73597895,"body_markdown":"I want to automatically launch my app on TV startup. i.e. when the user power on the TV, TV will powerup and my app will start.\r\n\r\nI have followed multiple links on internet and tried to implement it but no activity is shown on startup.\r\nFollowed \r\nhttps://stackoverflow.com/questions/10428510/how-to-start-launch-application-at-boot-time-android\r\n\r\nAs I was not getting any response on start, followed https://stackoverflow.com/questions/23491777/android-boot-completed-is-not-working-in-broadcastreceiver\r\n\r\nI have extensively searched web and stackoverflow, it is strange that I cannot find a solution to make it work till now. Don&#39;t know what am I doing wrong...\r\n\r\nhere is my code...\r\n\r\n&gt; MainActivity.java\r\n\r\n    public class MainActivity extends FragmentActivity {\r\n    public WebView mWebview;\r\n    private android.content.Context Context;\r\n    private ProgressDialog mProgressDialog;\r\n\r\n    @Override\r\n    protected void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        setContentView(R.layout.activity_main);\r\n        getWindow().addFlags(WindowManager.LayoutParams.FLAG_KEEP_SCREEN_ON);\r\n\r\n        String url = &quot;http://www.test.com&quot;;\r\n\r\n        if (!DetectConnection.checkInternetConnection(this)) {\r\n            Toast.makeText(getApplicationContext(), &quot;No Internet Connection!&quot;, Toast.LENGTH_LONG).show();\r\n            finish(); //Calling this method to close this activity when internet is not available.\r\n        } else {\r\n            WebView webView = (WebView) findViewById(R.id.main_fragment);\r\n            webView.getSettings().setJavaScriptEnabled(true);\r\n            CookieManager.getInstance().setAcceptCookie(true);\r\n            webView.setScrollBarStyle(View.SCROLLBARS_INSIDE_OVERLAY);\r\n            WebSettings webSettings = webView.getSettings();\r\n            webSettings.setDomStorageEnabled(true);\r\n            webSettings.setLayoutAlgorithm(WebSettings.LayoutAlgorithm.NARROW_COLUMNS);\r\n            webSettings.setUseWideViewPort(true);\r\n            webView.setWebViewClient(new WebViewClient());\r\n            webView.loadUrl(url);\r\n        }\r\n    }\r\n\r\n&gt; StartAppOnBoot.java\r\n\r\n    public class StartAppOnBoot extends BroadcastReceiver {\r\n    @Override\r\n    public void onReceive(Context context, Intent intent) {\r\n        if (intent.getAction() == null) {\r\n            return;\r\n        }\r\n\r\n        //if (Intent.ACTION_BOOT_COMPLETED.equals(intent.getAction())) {\r\n        if (intent.getAction().equals(&quot;android.intent.action.BOOT_COMPLETED&quot;)) {\r\n            SharedPreferences prefs = PreferenceManager.getDefaultSharedPreferences(context);\r\n            boolean startupAfterBoot = prefs.getBoolean(&quot;serenity_boot_startup&quot;, false);\r\n            if (startupAfterBoot) {\r\n                Intent i = new Intent(context, MainActivity.class);\r\n                //i.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK);\r\n                i.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);\r\n                context.startActivity(i);\r\n            }\r\n        }\r\n    }\r\n\r\n&gt; Manifest.xml\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\r\n    &lt;manifest xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\r\n    xmlns:tools=&quot;http://schemas.android.com/tools&quot;\r\n    package=&quot;com.test.tv2&quot;\r\n    tools:ignore=&quot;MissingLeanbackLauncher&quot;&gt;\r\n\r\n    &lt;uses-feature\r\n        android:name=&quot;android.software.leanback&quot;\r\n        android:required=&quot;false&quot; /&gt;\r\n    &lt;uses-feature\r\n        android:name=&quot;android.hardware.touchscreen&quot;\r\n        android:required=&quot;false&quot; /&gt;\r\n\r\n    &lt;application\r\n        android:usesCleartextTraffic=&quot;true&quot;\r\n        android:allowBackup=&quot;true&quot;\r\n        android:icon=&quot;@drawable/ic_banner&quot;\r\n        android:label=&quot;TV2&quot;\r\n        android:supportsRtl=&quot;true&quot;\r\n        tools:ignore=&quot;GoogleAppIndexingWarning&quot;\r\n        android:banner=&quot;@mipmap/tv_banner_foreground&quot;&gt;\r\n        &lt;activity android:name=&quot;com.test.tv2.MainActivity&quot;\r\n            android:screenOrientation=&quot;landscape&quot;\r\n            android:theme=&quot;@style/Theme.Leanback&quot;\r\n            android:exported=&quot;true&quot;&gt;\r\n            &lt;intent-filter&gt;\r\n                &lt;action android:name=&quot;android.intent.action.MAIN&quot; /&gt;\r\n                &lt;category android:name=&quot;android.intent.category.LEANBACK_LAUNCHER&quot; /&gt;\r\n            &lt;/intent-filter&gt;\r\n        &lt;/activity&gt;\r\n        &lt;receiver android:name=&quot;com.test.tv2.StartAppOnBoot&quot;\r\n            android:enabled=&quot;true&quot;\r\n            android:exported=&quot;true&quot;&gt;\r\n            &lt;intent-filter android:priority=&quot;1000&quot;&gt;\r\n                &lt;action android:name=&quot;android.intent.action.BOOT_COMPLETED&quot; /&gt;\r\n                &lt;category android:name=&quot;android.intent.category.DEFAULT&quot; /&gt;\r\n                &lt;action android:name=&quot;android.intent.action.QUICKBOOT_POWERON&quot; /&gt;\r\n            &lt;/intent-filter&gt;\r\n        &lt;/receiver&gt;\r\n    &lt;/application&gt;\r\n\r\n    &lt;uses-permission android:name=&quot;android.permission.INTERNET&quot; /&gt;\r\n    &lt;uses-permission android:name=&quot;android.permission.ACCESS_NETWORK_STATE&quot; /&gt;\r\n    &lt;uses-permission android:name=&quot;android.permission.ACCESS_WIFI_STATE&quot; /&gt;\r\n    &lt;uses-permission android:name=&quot;android.permission.RECEIVE_BOOT_COMPLETED&quot; /&gt;\r\n    &lt;/manifest&gt;\r\n\r\n\r\n\r\n\r\n","title":"Not able to Launch an App on Boot in Android TV","body":"<p>I want to automatically launch my app on TV startup. i.e. when the user power on the TV, TV will powerup and my app will start.</p>\n<p>I have followed multiple links on internet and tried to implement it but no activity is shown on startup.\nFollowed\n<a href=\"https://stackoverflow.com/questions/10428510/how-to-start-launch-application-at-boot-time-android\">How to start/ launch application at boot time Android</a></p>\n<p>As I was not getting any response on start, followed <a href=\"https://stackoverflow.com/questions/23491777/android-boot-completed-is-not-working-in-broadcastreceiver\">Android-Boot Completed is not working in Broadcastreceiver</a></p>\n<p>I have extensively searched web and stackoverflow, it is strange that I cannot find a solution to make it work till now. Don't know what am I doing wrong...</p>\n<p>here is my code...</p>\n<blockquote>\n<p>MainActivity.java</p>\n</blockquote>\n<pre><code>public class MainActivity extends FragmentActivity {\npublic WebView mWebview;\nprivate android.content.Context Context;\nprivate ProgressDialog mProgressDialog;\n\n@Override\nprotected void onCreate(Bundle savedInstanceState) {\n    super.onCreate(savedInstanceState);\n    setContentView(R.layout.activity_main);\n    getWindow().addFlags(WindowManager.LayoutParams.FLAG_KEEP_SCREEN_ON);\n\n    String url = &quot;http://www.test.com&quot;;\n\n    if (!DetectConnection.checkInternetConnection(this)) {\n        Toast.makeText(getApplicationContext(), &quot;No Internet Connection!&quot;, Toast.LENGTH_LONG).show();\n        finish(); //Calling this method to close this activity when internet is not available.\n    } else {\n        WebView webView = (WebView) findViewById(R.id.main_fragment);\n        webView.getSettings().setJavaScriptEnabled(true);\n        CookieManager.getInstance().setAcceptCookie(true);\n        webView.setScrollBarStyle(View.SCROLLBARS_INSIDE_OVERLAY);\n        WebSettings webSettings = webView.getSettings();\n        webSettings.setDomStorageEnabled(true);\n        webSettings.setLayoutAlgorithm(WebSettings.LayoutAlgorithm.NARROW_COLUMNS);\n        webSettings.setUseWideViewPort(true);\n        webView.setWebViewClient(new WebViewClient());\n        webView.loadUrl(url);\n    }\n}\n</code></pre>\n<blockquote>\n<p>StartAppOnBoot.java</p>\n</blockquote>\n<pre><code>public class StartAppOnBoot extends BroadcastReceiver {\n@Override\npublic void onReceive(Context context, Intent intent) {\n    if (intent.getAction() == null) {\n        return;\n    }\n\n    //if (Intent.ACTION_BOOT_COMPLETED.equals(intent.getAction())) {\n    if (intent.getAction().equals(&quot;android.intent.action.BOOT_COMPLETED&quot;)) {\n        SharedPreferences prefs = PreferenceManager.getDefaultSharedPreferences(context);\n        boolean startupAfterBoot = prefs.getBoolean(&quot;serenity_boot_startup&quot;, false);\n        if (startupAfterBoot) {\n            Intent i = new Intent(context, MainActivity.class);\n            //i.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK);\n            i.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);\n            context.startActivity(i);\n        }\n    }\n}\n</code></pre>\n<blockquote>\n<p>Manifest.xml</p>\n</blockquote>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\n&lt;manifest xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\nxmlns:tools=&quot;http://schemas.android.com/tools&quot;\npackage=&quot;com.test.tv2&quot;\ntools:ignore=&quot;MissingLeanbackLauncher&quot;&gt;\n\n&lt;uses-feature\n    android:name=&quot;android.software.leanback&quot;\n    android:required=&quot;false&quot; /&gt;\n&lt;uses-feature\n    android:name=&quot;android.hardware.touchscreen&quot;\n    android:required=&quot;false&quot; /&gt;\n\n&lt;application\n    android:usesCleartextTraffic=&quot;true&quot;\n    android:allowBackup=&quot;true&quot;\n    android:icon=&quot;@drawable/ic_banner&quot;\n    android:label=&quot;TV2&quot;\n    android:supportsRtl=&quot;true&quot;\n    tools:ignore=&quot;GoogleAppIndexingWarning&quot;\n    android:banner=&quot;@mipmap/tv_banner_foreground&quot;&gt;\n    &lt;activity android:name=&quot;com.test.tv2.MainActivity&quot;\n        android:screenOrientation=&quot;landscape&quot;\n        android:theme=&quot;@style/Theme.Leanback&quot;\n        android:exported=&quot;true&quot;&gt;\n        &lt;intent-filter&gt;\n            &lt;action android:name=&quot;android.intent.action.MAIN&quot; /&gt;\n            &lt;category android:name=&quot;android.intent.category.LEANBACK_LAUNCHER&quot; /&gt;\n        &lt;/intent-filter&gt;\n    &lt;/activity&gt;\n    &lt;receiver android:name=&quot;com.test.tv2.StartAppOnBoot&quot;\n        android:enabled=&quot;true&quot;\n        android:exported=&quot;true&quot;&gt;\n        &lt;intent-filter android:priority=&quot;1000&quot;&gt;\n            &lt;action android:name=&quot;android.intent.action.BOOT_COMPLETED&quot; /&gt;\n            &lt;category android:name=&quot;android.intent.category.DEFAULT&quot; /&gt;\n            &lt;action android:name=&quot;android.intent.action.QUICKBOOT_POWERON&quot; /&gt;\n        &lt;/intent-filter&gt;\n    &lt;/receiver&gt;\n&lt;/application&gt;\n\n&lt;uses-permission android:name=&quot;android.permission.INTERNET&quot; /&gt;\n&lt;uses-permission android:name=&quot;android.permission.ACCESS_NETWORK_STATE&quot; /&gt;\n&lt;uses-permission android:name=&quot;android.permission.ACCESS_WIFI_STATE&quot; /&gt;\n&lt;uses-permission android:name=&quot;android.permission.RECEIVE_BOOT_COMPLETED&quot; /&gt;\n&lt;/manifest&gt;\n</code></pre>\n"},{"tags":["java","html","css","selenium","automation"],"comments":[{"owner":{"account_id":16422586,"reputation":1841,"user_id":11863448,"display_name":"Akzy"},"score":0,"creation_date":1662546827,"post_id":73632968,"comment_id":130029165,"body_markdown":"At which `element` or line you are getting this exception? Please remove the unnecessary code that is commented.","body":"At which <code>element</code> or line you are getting this exception? Please remove the unnecessary code that is commented."},{"owner":{"account_id":18124739,"reputation":51,"user_id":13180353,"display_name":"Avdhut Joshi"},"score":0,"creation_date":1662553612,"post_id":73632968,"comment_id":130031910,"body_markdown":"At list.click()","body":"At list.click()"},{"owner":{"account_id":16422586,"reputation":1841,"user_id":11863448,"display_name":"Akzy"},"score":0,"creation_date":1662554381,"post_id":73632968,"comment_id":130032215,"body_markdown":"Checkout this https://stackoverflow.com/a/12967602/11863448","body":"Checkout this <a href=\"https://stackoverflow.com/a/12967602/11863448\">stackoverflow.com/a/12967602/11863448</a>"}],"owner":{"account_id":18124739,"reputation":51,"user_id":13180353,"display_name":"Avdhut Joshi"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":196,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1662553925,"creation_date":1662542441,"question_id":73632968,"body_markdown":"I am a beginner in selenium, I am using java for thatU nill yesterday this code was working well, it showed me same exception for the button named &quot;show&quot;. I searched for it and solved it. But again today its showing for clicking on list please help me. Also can I use wait named as domPropertyToBe\r\n\r\nMy java code:\r\n \r\n    import java.time.Duration;\r\n    import java.util.List;\r\n    import java.awt.Robot;\r\n    import java.awt.event.KeyEvent;\r\n    \r\n    import org.openqa.selenium.By;\r\n    import org.openqa.selenium.WebDriver;\r\n    import org.openqa.selenium.WebElement;\r\n    import org.openqa.selenium.chrome.ChromeDriver;\r\n    import org.openqa.selenium.chrome.ChromeOptions;\r\n    import org.openqa.selenium.support.ui.ExpectedConditions;\r\n    import org.openqa.selenium.support.ui.WebDriverWait;\r\n    import org.testng.Assert;\r\n    \r\n    public class erp {\r\n    \r\n    \t\r\n    \tpublic static void main(String[] args) throws InterruptedException {\t\t\r\n    \t\tSystem.setProperty(&quot;webdriver.chrome.driver&quot;, &quot;C:\\\\Tools\\\\Selenium\\\\Chromedriver96\\\\chromedriver_win32 (1)\\\\chromedriver.exe&quot;);\r\n    \t\tWebDriver dChromedriver=new ChromeDriver();\r\n    \tdChromedriver.get(&quot;https://erp.mitwpu.edu.in/&quot;);\r\n    \tdChromedriver.manage().window().maximize();\r\n    \t\tWebElement \ttxtPassword=dChromedriver.findElement(By.id(&quot;txtPassword&quot;)) ;\r\n    \t\tWebElement txtUserId=dChromedriver.findElement(By.id(&quot;txtUserId&quot;)) ;\r\n    \t\ttxtUserId.sendKeys(&quot;S1032200787&quot;);\r\n    \t\ttxtPassword.sendKeys(&quot;FynS@3XbZH6ZMWH&quot;);\r\n    \t\t//\r\n    \t\tWebDriverWait w =new WebDriverWait(dChromedriver, Duration.ofSeconds(30));\r\n    \t\tw.until(ExpectedConditions.visibilityOfElementLocated(By.xpath(&quot;//div[@id=&#39;ReCaptchContainer&#39;]&quot;)));\r\n    \t\tdChromedriver.findElement(By.xpath(&quot;//div[@id=&#39;ReCaptchContainer&#39;]&quot;)).click();\r\n    //\t\tThread.sleep(3000);\r\n    \t\tw.until(ExpectedConditions.visibilityOfElementLocated(By.cssSelector(&quot;label#lblMessage&quot;)));\r\n    \t\tWebElement success_lablElement=dChromedriver.findElement(By.cssSelector(&quot;label#lblMessage&quot;));\r\n    \t\tAssert.assertEquals(success_lablElement.getText(),&quot;Success&quot; );\r\n    \t\tdChromedriver.findElement(By.id(&quot;btnLogin&quot;)).click();\r\n    \t\tWebElement resultWebElement=dChromedriver.findElement(By.xpath(&quot;//nav[@class=\\&quot;mt-2\\&quot;]/ul/li[12]/a[@href=\\&quot;Examination/Report/StudentGradeCardDetail.aspx?MENU_CODE=Web_Result\\&quot;]&quot;));\r\n    \t\tresultWebElement.click();\r\n    \t\tw.until(ExpectedConditions.frameToBeAvailableAndSwitchToIt(By.id(&quot;FrameContent&quot;)));\r\n    //\t\tw.until(ExpectedConditions.elementToBeClickable(By.id(&quot;drpSem_Arrow&quot;)));\r\n    \t\t       dChromedriver.findElement(By.id(&quot;drpSem_Arrow&quot;)).click();\r\n           w.until(ExpectedConditions.visibilityOfAllElementsLocatedBy(By.tagName(&quot;li&quot;)));\r\n           List&lt;WebElement&gt; listElement=dChromedriver.findElements(By.tagName(&quot;li&quot;));\r\n           w.until(ExpectedConditions.elementToBeClickable(By.id(&quot;btnshow&quot;)));\r\n           WebElement show_buttonElement=dChromedriver.findElement(By.id(&quot;btnshow&quot;));\r\n    \r\n    //\t   dChromedriver.findElement(By.cssSelector(&quot;a[onclick=\\&quot;$find(&#39;ReportViewer1&#39;).exportReport(&#39;PDF&#39;);\\&quot;]&quot;));\r\n           for (WebElement list : listElement) {\r\n    \r\n        \t   if (list.getText().equals(&quot;SY BTech - CSE / TRIMESTER-V / 2020-21 / Middle&quot;))   {\r\n        \t\t   list.click();           // This is the line I get error\r\n        \t\t   show_buttonElement.click();\r\n        \t\t  \r\n        \t   }\r\n    \t}\r\n          \r\n    \t}\r\n    //\tpublic static  void myfunction() {\r\n    //\t\t try {\r\n    //\t\t\t Robot robot = new Robot();\r\n    //\t   Thread mthread = new Thread(mlauncher);\r\n    //\t\t   mthread.start();\r\n    //\r\n    //\t\t  robot.keyPress(KeyEvent.VK_ENTER);\r\n    //\t\t  robot.keyRelease(KeyEvent.VK_ENTER);\r\n    //\r\n    //\t\t } catch (Exception e) {\r\n    //\t\t          e.printStackTrace();\r\n    //\t\t       }\r\n    //\t}\r\n    \t\r\n    \r\n    }","title":"java selenium org.openqa.selenium.StaleElementReferenceException: stale element reference: element is not attached to the page document","body":"<p>I am a beginner in selenium, I am using java for thatU nill yesterday this code was working well, it showed me same exception for the button named &quot;show&quot;. I searched for it and solved it. But again today its showing for clicking on list please help me. Also can I use wait named as domPropertyToBe</p>\n<p>My java code:</p>\n<pre><code>import java.time.Duration;\nimport java.util.List;\nimport java.awt.Robot;\nimport java.awt.event.KeyEvent;\n\nimport org.openqa.selenium.By;\nimport org.openqa.selenium.WebDriver;\nimport org.openqa.selenium.WebElement;\nimport org.openqa.selenium.chrome.ChromeDriver;\nimport org.openqa.selenium.chrome.ChromeOptions;\nimport org.openqa.selenium.support.ui.ExpectedConditions;\nimport org.openqa.selenium.support.ui.WebDriverWait;\nimport org.testng.Assert;\n\npublic class erp {\n\n    \n    public static void main(String[] args) throws InterruptedException {        \n        System.setProperty(&quot;webdriver.chrome.driver&quot;, &quot;C:\\\\Tools\\\\Selenium\\\\Chromedriver96\\\\chromedriver_win32 (1)\\\\chromedriver.exe&quot;);\n        WebDriver dChromedriver=new ChromeDriver();\n    dChromedriver.get(&quot;https://erp.mitwpu.edu.in/&quot;);\n    dChromedriver.manage().window().maximize();\n        WebElement  txtPassword=dChromedriver.findElement(By.id(&quot;txtPassword&quot;)) ;\n        WebElement txtUserId=dChromedriver.findElement(By.id(&quot;txtUserId&quot;)) ;\n        txtUserId.sendKeys(&quot;S1032200787&quot;);\n        txtPassword.sendKeys(&quot;FynS@3XbZH6ZMWH&quot;);\n        //\n        WebDriverWait w =new WebDriverWait(dChromedriver, Duration.ofSeconds(30));\n        w.until(ExpectedConditions.visibilityOfElementLocated(By.xpath(&quot;//div[@id='ReCaptchContainer']&quot;)));\n        dChromedriver.findElement(By.xpath(&quot;//div[@id='ReCaptchContainer']&quot;)).click();\n//      Thread.sleep(3000);\n        w.until(ExpectedConditions.visibilityOfElementLocated(By.cssSelector(&quot;label#lblMessage&quot;)));\n        WebElement success_lablElement=dChromedriver.findElement(By.cssSelector(&quot;label#lblMessage&quot;));\n        Assert.assertEquals(success_lablElement.getText(),&quot;Success&quot; );\n        dChromedriver.findElement(By.id(&quot;btnLogin&quot;)).click();\n        WebElement resultWebElement=dChromedriver.findElement(By.xpath(&quot;//nav[@class=\\&quot;mt-2\\&quot;]/ul/li[12]/a[@href=\\&quot;Examination/Report/StudentGradeCardDetail.aspx?MENU_CODE=Web_Result\\&quot;]&quot;));\n        resultWebElement.click();\n        w.until(ExpectedConditions.frameToBeAvailableAndSwitchToIt(By.id(&quot;FrameContent&quot;)));\n//      w.until(ExpectedConditions.elementToBeClickable(By.id(&quot;drpSem_Arrow&quot;)));\n               dChromedriver.findElement(By.id(&quot;drpSem_Arrow&quot;)).click();\n       w.until(ExpectedConditions.visibilityOfAllElementsLocatedBy(By.tagName(&quot;li&quot;)));\n       List&lt;WebElement&gt; listElement=dChromedriver.findElements(By.tagName(&quot;li&quot;));\n       w.until(ExpectedConditions.elementToBeClickable(By.id(&quot;btnshow&quot;)));\n       WebElement show_buttonElement=dChromedriver.findElement(By.id(&quot;btnshow&quot;));\n\n//     dChromedriver.findElement(By.cssSelector(&quot;a[onclick=\\&quot;$find('ReportViewer1').exportReport('PDF');\\&quot;]&quot;));\n       for (WebElement list : listElement) {\n\n           if (list.getText().equals(&quot;SY BTech - CSE / TRIMESTER-V / 2020-21 / Middle&quot;))   {\n               list.click();           // This is the line I get error\n               show_buttonElement.click();\n              \n           }\n    }\n      \n    }\n//  public static  void myfunction() {\n//       try {\n//           Robot robot = new Robot();\n//     Thread mthread = new Thread(mlauncher);\n//         mthread.start();\n//\n//        robot.keyPress(KeyEvent.VK_ENTER);\n//        robot.keyRelease(KeyEvent.VK_ENTER);\n//\n//       } catch (Exception e) {\n//                e.printStackTrace();\n//             }\n//  }\n    \n\n}\n</code></pre>\n"},{"tags":["java","android","android-webview"],"comments":[{"owner":{"account_id":8356567,"reputation":2899,"user_id":6276596,"display_name":"Furkan Yurdakul"},"score":0,"creation_date":1662562334,"post_id":73635551,"comment_id":130035595,"body_markdown":"The &quot;scrollTo&quot; method doesn&#39;t really work in the same frame, it works on the next frame. You can wrap the `makeBitmapOfScreen()` and `webView.scrollTo` calls into `webView.post()`. That should allow you to catch all frames and properly process them. If it works, let me know so I can post it as an answer.","body":"The &quot;scrollTo&quot; method doesn&#39;t really work in the same frame, it works on the next frame. You can wrap the <code>makeBitmapOfScreen()</code> and <code>webView.scrollTo</code> calls into <code>webView.post()</code>. That should allow you to catch all frames and properly process them. If it works, let me know so I can post it as an answer."},{"owner":{"account_id":26270113,"reputation":1,"user_id":19940135,"display_name":"Simon"},"score":0,"creation_date":1662710605,"post_id":73635551,"comment_id":130073253,"body_markdown":"@FurkanYurdakul sadly the suggested change is not fixing the mentioned issue.\nI can&#39;t see a difference in the produced results with the change and without it.\nI still only get 2 Output files instead of 10.","body":"@FurkanYurdakul sadly the suggested change is not fixing the mentioned issue. I can&#39;t see a difference in the produced results with the change and without it. I still only get 2 Output files instead of 10."}],"owner":{"account_id":26270113,"reputation":1,"user_id":19940135,"display_name":"Simon"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":32,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1662553787,"creation_date":1662553787,"question_id":73635551,"body_markdown":"My problem is,\r\nthat only after `testScroll()` is done the calls for the `scrollTo()` function are applied,\r\nwhich results in one large jump.\r\n\r\nTherefore, I&#39;m unable to create bitmaps of different regions that would lie next to each other. I&#39;m kinda clueless how to approach this issue?\r\n\r\n\r\nWhat I tried so far:\r\n\r\nI tried to interlace it in other functions in hopes of triggering it.\r\n\r\nSadly, `scrollTo()` will only trigger after all man made control structures are done.\r\n\r\nI tried following the documentation,\r\nbut there is no source code and there is nothing meaningful written there.\r\n\r\nI tried to follow it in debug mode, but that didn&#39;t bear any fruits,\r\nbe course you are limited how far you can follow along.\r\n \r\n```\r\npublic void testScroll(View view){\r\n        WebView webView = findViewById(R.id.webViewMain);\r\n        int xValue = webView.getScrollX();\r\n        int yValue = webView.getScrollY();\r\n        int scrollValue = webView.getHeight();\r\n        \r\n        for(int i=0;i&lt;10;i++){\r\n            yValue += scrollValue;\r\n            makeBitmapOfScreen();\r\n            webView.scrollTo(xValue, yValue); \r\n        }\r\n\r\n    }\r\n   ```","title":"Android Webview.scrollTo not updating (Java)","body":"<p>My problem is,\nthat only after <code>testScroll()</code> is done the calls for the <code>scrollTo()</code> function are applied,\nwhich results in one large jump.</p>\n<p>Therefore, I'm unable to create bitmaps of different regions that would lie next to each other. I'm kinda clueless how to approach this issue?</p>\n<p>What I tried so far:</p>\n<p>I tried to interlace it in other functions in hopes of triggering it.</p>\n<p>Sadly, <code>scrollTo()</code> will only trigger after all man made control structures are done.</p>\n<p>I tried following the documentation,\nbut there is no source code and there is nothing meaningful written there.</p>\n<p>I tried to follow it in debug mode, but that didn't bear any fruits,\nbe course you are limited how far you can follow along.</p>\n<pre><code>public void testScroll(View view){\n        WebView webView = findViewById(R.id.webViewMain);\n        int xValue = webView.getScrollX();\n        int yValue = webView.getScrollY();\n        int scrollValue = webView.getHeight();\n        \n        for(int i=0;i&lt;10;i++){\n            yValue += scrollValue;\n            makeBitmapOfScreen();\n            webView.scrollTo(xValue, yValue); \n        }\n\n    }\n</code></pre>\n"},{"tags":["java","json-deserialization","dto"],"comments":[{"owner":{"account_id":14357,"reputation":9128,"user_id":29470,"display_name":"Tim Moore"},"score":0,"creation_date":1662508733,"post_id":73627887,"comment_id":130020191,"body_markdown":"There isn’t enough information to answer this, and the title and text of the question don’t seem to match up. Please edit the question to include the code that deserialises the JSON and prints the output, an example of the JSON data it receives, and the output you expect from it.","body":"There isn’t enough information to answer this, and the title and text of the question don’t seem to match up. Please edit the question to include the code that deserialises the JSON and prints the output, an example of the JSON data it receives, and the output you expect from it."},{"owner":{"account_id":14357,"reputation":9128,"user_id":29470,"display_name":"Tim Moore"},"score":0,"creation_date":1662508809,"post_id":73627887,"comment_id":130020201,"body_markdown":"Is the question about how to remove the first element from a list? If so, what specific data structure are you using?","body":"Is the question about how to remove the first element from a list? If so, what specific data structure are you using?"},{"owner":{"account_id":24562753,"reputation":3,"user_id":18470274,"display_name":"SoN"},"score":0,"creation_date":1662553723,"post_id":73627887,"comment_id":130031961,"body_markdown":"I added more information","body":"I added more information"}],"owner":{"account_id":24562753,"reputation":3,"user_id":18470274,"display_name":"SoN"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":182,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1662553686,"creation_date":1662499387,"question_id":73627887,"body_markdown":"I&#39;m having a problem with deserializing json object into DTO class.\r\nThe dto object has the following structure:\r\n\r\n    @Getter\r\n    @Setter\r\n    @ToString\r\n    @RequiredArgsConstructor\r\n    @JsonIgnoreProperties(value = { &quot;charsetinfo&quot; })\r\n    public class SingleEngineJsonDto {\r\n        public List&lt;SingleEngineDTO&gt; engine;\r\n        public List&lt;Timetable&gt; timetable;\r\n        public List&lt;Dailytable&gt; dailytable;\r\n    }\r\nAnd the output is:\r\n\r\n           [SingleEngineJsonDto(engine=null, timetable=null, dailytable=null),\r\n     SingleEngineJsonDto(engine=[SingleEngineDTO(name=state, … some data)], \r\n        timetable=[Timetable(weekDay=1,some data), more data], \r\n        dailytable=[Dailytable(date=2018-05-09, more data), more data])]\r\nHow do I get rid of this([SingleEngineJsonDto(engine=null, timetable=null, dailytable=null)) part? Original json contains metadata, that I don&#39;t need. The firs object in a big json object is ignored metadata and null fields, the second one is null fields filled in. The only idea that I have is list.get(1). And I was told that this solution is wrong. \r\n\r\nUPDATE:\r\nOriginal json structure:\r\n\r\n   \r\n\r\n     [{&quot;charsetinfo&quot;:{&quot;name&quot;:&#160;&quot;utf-8&quot;}},{&quot;engine&quot;:\r\n    [{&quot;NAME&quot;:&#160;&quot;stock&quot;,&quot;title&quot;:&#160;some data}],\r\n        &quot;timetable&quot;:[{&quot;week_day&quot;:1,&quot;is_work_day&quot;:1,some data},\r\n         more data],&quot;dailytable&quot;:[{&quot;date&quot;:&#160;&quot;2018-05-09&quot;,&quot;is_work_day&quot;:0,&quot;start_time&quot;:&#160;&quot;10:00:00&quot;,data}]}]\r\n\r\nDesirialization:\r\n\r\n    @FeignClient(value = &quot;engine&quot;, url = &quot;engine&quot;)\r\n    public interface EngineClient {\r\n        @GetMapping\r\n        List&lt;EngineJsonDto&gt; getEngines(URI enginesUri,\r\n                                       @RequestParam(value = &quot;lang&quot;, required = false) String lang);\r\n        @GetMapping\r\n        List&lt;SingleEngineJsonDto&gt; getEngine(URI engineUri, @RequestParam(value = &quot;lang&quot;, required = false) String lang);\r\n    }\r\n\r\nService gets the data from client and gets a list of dto to work with. I use facory pattern to get pieces of data to work with parameters(engine,timetable,dailytable), and all of them had to look the same:\r\n\r\n    @Service\r\n    public class EngineParamEngine implements EngineFactoryInterface {\r\n    \r\n        @Override\r\n        public List&lt;SingleEngineDTO&gt; getEngineObjectPart(List&lt;SingleEngineJsonDto&gt; list){\r\n            return list.get(1).getEngine();  //&lt;&lt;this\r\n        }\r\n    }\r\n\r\nI was told to change it to list.get(0).Which gives me (engine=null, timetable=null, dailytable=null). So, I need to make the first object disappear somehow. I&#39;m sorry, English is not my first language and I&#39;m new to programming. ","title":"How to deserialize json data and get rid of all the excess information","body":"<p>I'm having a problem with deserializing json object into DTO class.\nThe dto object has the following structure:</p>\n<pre><code>@Getter\n@Setter\n@ToString\n@RequiredArgsConstructor\n@JsonIgnoreProperties(value = { &quot;charsetinfo&quot; })\npublic class SingleEngineJsonDto {\n    public List&lt;SingleEngineDTO&gt; engine;\n    public List&lt;Timetable&gt; timetable;\n    public List&lt;Dailytable&gt; dailytable;\n}\n</code></pre>\n<p>And the output is:</p>\n<pre><code>       [SingleEngineJsonDto(engine=null, timetable=null, dailytable=null),\n SingleEngineJsonDto(engine=[SingleEngineDTO(name=state, … some data)], \n    timetable=[Timetable(weekDay=1,some data), more data], \n    dailytable=[Dailytable(date=2018-05-09, more data), more data])]\n</code></pre>\n<p>How do I get rid of this([SingleEngineJsonDto(engine=null, timetable=null, dailytable=null)) part? Original json contains metadata, that I don't need. The firs object in a big json object is ignored metadata and null fields, the second one is null fields filled in. The only idea that I have is list.get(1). And I was told that this solution is wrong.</p>\n<p>UPDATE:\nOriginal json structure:</p>\n<pre><code> [{&quot;charsetinfo&quot;:{&quot;name&quot;: &quot;utf-8&quot;}},{&quot;engine&quot;:\n[{&quot;NAME&quot;: &quot;stock&quot;,&quot;title&quot;: some data}],\n    &quot;timetable&quot;:[{&quot;week_day&quot;:1,&quot;is_work_day&quot;:1,some data},\n     more data],&quot;dailytable&quot;:[{&quot;date&quot;: &quot;2018-05-09&quot;,&quot;is_work_day&quot;:0,&quot;start_time&quot;: &quot;10:00:00&quot;,data}]}]\n</code></pre>\n<p>Desirialization:</p>\n<pre><code>@FeignClient(value = &quot;engine&quot;, url = &quot;engine&quot;)\npublic interface EngineClient {\n    @GetMapping\n    List&lt;EngineJsonDto&gt; getEngines(URI enginesUri,\n                                   @RequestParam(value = &quot;lang&quot;, required = false) String lang);\n    @GetMapping\n    List&lt;SingleEngineJsonDto&gt; getEngine(URI engineUri, @RequestParam(value = &quot;lang&quot;, required = false) String lang);\n}\n</code></pre>\n<p>Service gets the data from client and gets a list of dto to work with. I use facory pattern to get pieces of data to work with parameters(engine,timetable,dailytable), and all of them had to look the same:</p>\n<pre><code>@Service\npublic class EngineParamEngine implements EngineFactoryInterface {\n\n    @Override\n    public List&lt;SingleEngineDTO&gt; getEngineObjectPart(List&lt;SingleEngineJsonDto&gt; list){\n        return list.get(1).getEngine();  //&lt;&lt;this\n    }\n}\n</code></pre>\n<p>I was told to change it to list.get(0).Which gives me (engine=null, timetable=null, dailytable=null). So, I need to make the first object disappear somehow. I'm sorry, English is not my first language and I'm new to programming.</p>\n"},{"tags":["java","spring","mockito","amazon-dynamodb"],"comments":[{"owner":{"account_id":1223835,"reputation":75848,"user_id":1189885,"accept_rate":43,"display_name":"chrylis -cautiouslyoptimistic-"},"score":0,"creation_date":1660591561,"post_id":73365374,"comment_id":129563954,"body_markdown":"If you&#39;re trying to test _that your DynamoDB queries work properly_, then I suggest you use DynamoDB Local instead of mocking out the DynamoDB client.","body":"If you&#39;re trying to test <i>that your DynamoDB queries work properly</i>, then I suggest you use DynamoDB Local instead of mocking out the DynamoDB client."},{"owner":{"display_name":"user15125148"},"score":0,"creation_date":1660594136,"post_id":73365374,"comment_id":129564664,"body_markdown":"connected to the local db they work fine. however, i need to unit test them","body":"connected to the local db they work fine. however, i need to unit test them"},{"owner":{"account_id":1223835,"reputation":75848,"user_id":1189885,"accept_rate":43,"display_name":"chrylis -cautiouslyoptimistic-"},"score":0,"creation_date":1660597456,"post_id":73365374,"comment_id":129565493,"body_markdown":"It doesn&#39;t make much sense to _unit_ test an integration layer.","body":"It doesn&#39;t make much sense to <i>unit</i> test an integration layer."}],"answers":[{"tags":[],"owner":{"account_id":4646986,"reputation":304,"user_id":3764947,"display_name":"CrazedCoder"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1660592111,"creation_date":1660592111,"answer_id":73365669,"question_id":73365374,"body_markdown":"I think you might be missing that the @Mock variables don&#39;t need to be defined. In spring these Mocks are there to allow you to expect certain responses from calls to methods within these Classes. For example this line:\r\n\r\n    dynamoDbEnhancedClient = DynamoDbEnhancedClient.builder().dynamoDbClient(dynamoDb).build();\r\n\r\nuses dynamoDb, a @Mock variable as a parameter to a call in your builder. This is incorrect. In fact, to my understanding, you have no need to initialize your @Mock Objects. Remove those from the setup, and let&#39;s see what you get.","title":"Test dynamodb using Mockito","body":"<p>I think you might be missing that the @Mock variables don't need to be defined. In spring these Mocks are there to allow you to expect certain responses from calls to methods within these Classes. For example this line:</p>\n<pre><code>dynamoDbEnhancedClient = DynamoDbEnhancedClient.builder().dynamoDbClient(dynamoDb).build();\n</code></pre>\n<p>uses dynamoDb, a @Mock variable as a parameter to a call in your builder. This is incorrect. In fact, to my understanding, you have no need to initialize your @Mock Objects. Remove those from the setup, and let's see what you get.</p>\n"}],"owner":{"display_name":"user15125148"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":3596,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":1,"score":2,"last_activity_date":1662553683,"creation_date":1660590150,"question_id":73365374,"body_markdown":"I&#39;m using dynamodb sdk2 with java. I have model, controller and repository and need to unit test them, following is the repository method i&#39;m testing \r\n```\r\npublic Customer getCustomer(final String customerId) {\r\n    DynamoDbTable&lt;Customer&gt; customerTable = getTable();\r\n    Key key = Key.builder().partitionValue(customerId)\r\n        .build();\r\n    return customerTable.getItem(key);\r\n  }\r\n\r\n  private DynamoDbTable&lt;Customer&gt; getTable() {\r\n    return dynamoDbEnhancedClient.table(&quot;Customer&quot;,\r\n        TableSchema.fromBean(Customer.class));\r\n  }\r\n```\r\nFollowing is the test i tried\r\n```\r\n\r\n@ExtendWith(MockitoExtension.class)\r\nclass CustomerRepositoryTest {\r\n\r\n  @Mock\r\n  private DynamoDbEnhancedClient dynamoDbEnhancedClient;\r\n  @Mock\r\n  private DynamoDbClient dynamoDb;\r\n  @Mock\r\n  private DynamoDbTable&lt;Customer&gt; dyamoDbTable;\r\n  @Mock\r\n  private Key key;\r\n\r\n  @InjectMocks\r\n  private CustomerRepository repository;\r\n\r\n  private final String TABLE_NAME = &quot;Customer&quot;;\r\n\r\n  private final String customerId = &quot;123&quot;;\r\n\r\n  @BeforeEach\r\n  public void setup() {\r\n    dynamoDbEnhancedClient = DynamoDbEnhancedClient.builder().dynamoDbClient(dynamoDb).build();\r\n    dyamoDbTable = dynamoDbEnhancedClient.table(TABLE_NAME, TableSchema.fromBean(Customer.class));\r\n    key = Key.builder().partitionValue(customerId).build();\r\n  }\r\n\r\n  @Test\r\n  void testGetDoorState() {\r\n    Customer custmer = new Customer();\r\n    customer.setCustomerId(&quot;123&quot;);\r\n    customer.setName(&quot;name&quot;);\r\n    when(dynamoDbEnhancedClient.table(&quot;Customer&quot;,\r\n        TableSchema.fromBean(Customer.class))).thenReturn(dyamoDbTable);\r\n    when(Key.builder().partitionValue(customerId).build()).thenReturn(key);\r\n    when(dyamoDbTable.getItem(key)).thenReturn(customer);\r\n    assertEquals(customer, repository.getCustomer(customerId));\r\n  }\r\n\r\n}\r\n```\r\ni used `mock-maker-inline` extension as Key is final class and got the below error\r\n```\r\n\r\norg.mockito.exceptions.misusing.MissingMethodInvocationException: \r\nwhen() requires an argument which has to be &#39;a method call on a mock&#39;.\r\nFor example:\r\n    when(mock.getArticles()).thenReturn(articles);\r\n\r\nAlso, this error might show up because:\r\n1. you stub either of: final/private/equals()/hashCode() methods.\r\n   Those methods *cannot* be stubbed/verified.\r\n   Mocking methods declared on non-public parent classes is not supported.\r\n2. inside when() you don&#39;t call method on mock but on some other object.\r\n```\r\nhow do i test this","title":"Test dynamodb using Mockito","body":"<p>I'm using dynamodb sdk2 with java. I have model, controller and repository and need to unit test them, following is the repository method i'm testing</p>\n<pre><code>public Customer getCustomer(final String customerId) {\n    DynamoDbTable&lt;Customer&gt; customerTable = getTable();\n    Key key = Key.builder().partitionValue(customerId)\n        .build();\n    return customerTable.getItem(key);\n  }\n\n  private DynamoDbTable&lt;Customer&gt; getTable() {\n    return dynamoDbEnhancedClient.table(&quot;Customer&quot;,\n        TableSchema.fromBean(Customer.class));\n  }\n</code></pre>\n<p>Following is the test i tried</p>\n<pre><code>\n@ExtendWith(MockitoExtension.class)\nclass CustomerRepositoryTest {\n\n  @Mock\n  private DynamoDbEnhancedClient dynamoDbEnhancedClient;\n  @Mock\n  private DynamoDbClient dynamoDb;\n  @Mock\n  private DynamoDbTable&lt;Customer&gt; dyamoDbTable;\n  @Mock\n  private Key key;\n\n  @InjectMocks\n  private CustomerRepository repository;\n\n  private final String TABLE_NAME = &quot;Customer&quot;;\n\n  private final String customerId = &quot;123&quot;;\n\n  @BeforeEach\n  public void setup() {\n    dynamoDbEnhancedClient = DynamoDbEnhancedClient.builder().dynamoDbClient(dynamoDb).build();\n    dyamoDbTable = dynamoDbEnhancedClient.table(TABLE_NAME, TableSchema.fromBean(Customer.class));\n    key = Key.builder().partitionValue(customerId).build();\n  }\n\n  @Test\n  void testGetDoorState() {\n    Customer custmer = new Customer();\n    customer.setCustomerId(&quot;123&quot;);\n    customer.setName(&quot;name&quot;);\n    when(dynamoDbEnhancedClient.table(&quot;Customer&quot;,\n        TableSchema.fromBean(Customer.class))).thenReturn(dyamoDbTable);\n    when(Key.builder().partitionValue(customerId).build()).thenReturn(key);\n    when(dyamoDbTable.getItem(key)).thenReturn(customer);\n    assertEquals(customer, repository.getCustomer(customerId));\n  }\n\n}\n</code></pre>\n<p>i used <code>mock-maker-inline</code> extension as Key is final class and got the below error</p>\n<pre><code>\norg.mockito.exceptions.misusing.MissingMethodInvocationException: \nwhen() requires an argument which has to be 'a method call on a mock'.\nFor example:\n    when(mock.getArticles()).thenReturn(articles);\n\nAlso, this error might show up because:\n1. you stub either of: final/private/equals()/hashCode() methods.\n   Those methods *cannot* be stubbed/verified.\n   Mocking methods declared on non-public parent classes is not supported.\n2. inside when() you don't call method on mock but on some other object.\n</code></pre>\n<p>how do i test this</p>\n"},{"tags":["java","jdbc"],"comments":[{"owner":{"account_id":213468,"reputation":103488,"user_id":466862,"display_name":"Mark Rotteveel"},"score":1,"creation_date":1661431574,"post_id":73463580,"comment_id":129774408,"body_markdown":"_&quot;Is it deprecated?&quot;_, no it is a feature that is not supported by the driver (nor the database). Maybe instead present the actual problem you&#39;re trying to solve, instead of a solution idea that is not viable.","body":"<i>&quot;Is it deprecated?&quot;</i>, no it is a feature that is not supported by the driver (nor the database). Maybe instead present the actual problem you&#39;re trying to solve, instead of a solution idea that is not viable."}],"answers":[{"tags":[],"owner":{"account_id":477214,"reputation":5260,"user_id":888580,"display_name":"lane.maxwell"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1661281759,"creation_date":1661281759,"answer_id":73463986,"question_id":73463580,"body_markdown":"MySQL does not support ARRAY data types.  However, as you&#39;ve tagged `spring-data-jpa` in this question, you can write your query methods to take a List and let Spring handle it.\r\n\r\ne.g.\r\n\r\n    List&lt;SomeClass&gt; findBySomeFieldIn(List&lt;Integer&gt; ids);\r\n\r\nOr, here&#39;s a simple prepared statement built with a list of Integer in an `IN` statement.\r\n\r\n    List&lt;Integer&gt; ints = new ArrayList&lt;&gt;();\r\n\r\n    String sql = String.format(&quot;SELECT * FROM some_table WHERE some_field IN (%s)&quot;,\r\n        ints.stream()\r\n        .map(String::valueOf)\r\n        .collect(Collectors.joining(&quot;, &quot;)));\r\n\r\n    PreparedStatement ps = connection.prepareStatement(sql);\r\n\r\nIf your list had 1,2,3,4 in it, this would generate SQL that reads \r\n\r\n    SELECT * FROM some_table WHERE some_field IN (1, 2, 3, 4)","title":"Connection.createArrayOf throws SQLFeatureNotSupportedException","body":"<p>MySQL does not support ARRAY data types.  However, as you've tagged <code>spring-data-jpa</code> in this question, you can write your query methods to take a List and let Spring handle it.</p>\n<p>e.g.</p>\n<pre><code>List&lt;SomeClass&gt; findBySomeFieldIn(List&lt;Integer&gt; ids);\n</code></pre>\n<p>Or, here's a simple prepared statement built with a list of Integer in an <code>IN</code> statement.</p>\n<pre><code>List&lt;Integer&gt; ints = new ArrayList&lt;&gt;();\n\nString sql = String.format(&quot;SELECT * FROM some_table WHERE some_field IN (%s)&quot;,\n    ints.stream()\n    .map(String::valueOf)\n    .collect(Collectors.joining(&quot;, &quot;)));\n\nPreparedStatement ps = connection.prepareStatement(sql);\n</code></pre>\n<p>If your list had 1,2,3,4 in it, this would generate SQL that reads</p>\n<pre><code>SELECT * FROM some_table WHERE some_field IN (1, 2, 3, 4)\n</code></pre>\n"},{"tags":[],"owner":{"account_id":24448789,"reputation":54,"user_id":18371316,"display_name":"Shashank"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1662553677,"creation_date":1662553677,"answer_id":73635521,"question_id":73463580,"body_markdown":"I had the same issue for a while but then, I chose to use [NamedParameterJdbcTemplate][1]. You can use [MapSqlParameterSource][2] to directly map Collections in your ***IN*** query.\r\n\r\n```java\r\n  public List&lt;SomeClass&gt; getSomeRecords(List&lt;Integer&gt; someIds, Integer someId) {\r\n    String sql =\r\n        &quot;SELECT * FORM some_table st WHERE st.a IN (:someIds) AND st.b = :someId;&quot;;\r\n\r\n    Map&lt;String, Object&gt; paramsMap = new HashMap&lt;&gt;();\r\n    paramsMap.put(&quot;someIds&quot;, someIds);\r\n    paramsMap.put(&quot;someId&quot;, someId);\r\n\r\n    SqlParameterSource parameters = new MapSqlParameterSource(paramsMap);\r\n    NamedParameterJdbcTemplate jdbcTemplate = new NamedParameterJdbcTemplate(dataSource);\r\n    RowMapper&lt;SomeClass&gt; rowMapper = new NestedRowMapper&lt;&gt;(SomeClass.class);\r\n    return jdbcTemplate.query(sql, parameters, rowMapper);\r\n  }\r\n```\r\n\r\n\r\n  [1]: https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/jdbc/core/namedparam/NamedParameterJdbcTemplate.html\r\n  [2]: https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/jdbc/core/namedparam/MapSqlParameterSource.html","title":"Connection.createArrayOf throws SQLFeatureNotSupportedException","body":"<p>I had the same issue for a while but then, I chose to use <a href=\"https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/jdbc/core/namedparam/NamedParameterJdbcTemplate.html\" rel=\"nofollow noreferrer\">NamedParameterJdbcTemplate</a>. You can use <a href=\"https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/jdbc/core/namedparam/MapSqlParameterSource.html\" rel=\"nofollow noreferrer\">MapSqlParameterSource</a> to directly map Collections in your <em><strong>IN</strong></em> query.</p>\n<pre class=\"lang-java prettyprint-override\"><code>  public List&lt;SomeClass&gt; getSomeRecords(List&lt;Integer&gt; someIds, Integer someId) {\n    String sql =\n        &quot;SELECT * FORM some_table st WHERE st.a IN (:someIds) AND st.b = :someId;&quot;;\n\n    Map&lt;String, Object&gt; paramsMap = new HashMap&lt;&gt;();\n    paramsMap.put(&quot;someIds&quot;, someIds);\n    paramsMap.put(&quot;someId&quot;, someId);\n\n    SqlParameterSource parameters = new MapSqlParameterSource(paramsMap);\n    NamedParameterJdbcTemplate jdbcTemplate = new NamedParameterJdbcTemplate(dataSource);\n    RowMapper&lt;SomeClass&gt; rowMapper = new NestedRowMapper&lt;&gt;(SomeClass.class);\n    return jdbcTemplate.query(sql, parameters, rowMapper);\n  }\n</code></pre>\n"}],"owner":{"account_id":10309761,"reputation":944,"user_id":7605967,"display_name":"Keshavram Kuduwa"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1133,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":73635521,"answer_count":2,"score":2,"last_activity_date":1662553677,"creation_date":1661279419,"question_id":73463580,"body_markdown":"I want to use `Connection.createArrayOf` method to create a `java.sql.Array` to use in a prepared statement, but all of the following implementations throw ***Feature Not Supported Exception***\r\n\r\nIs there no implementation of this method? Is it deprecated? Is there any other way to initialize `java.sql.Array`? Or have I imported the wrong package?\r\n\r\ncom.mysql.cj.jdbc.ConnectionImpl:\r\n```java\r\n  public Array createArrayOf(String typeName, Object[] elements) throws SQLException {\r\n    try {\r\n      throw SQLError.createSQLFeatureNotSupportedException();\r\n    } catch (CJException var4) {\r\n      throw SQLExceptionsMapping.translateException(var4, this.getExceptionInterceptor());\r\n    }\r\n  }\r\n```\r\ncom.mysql.cj.jdbc.ConnectionWrapper:\r\n```java\r\n  public Array createArrayOf(String typeName, Object[] elements) throws SQLException {\r\n    try {\r\n      this.checkClosed();\r\n\r\n      try {\r\n        return this.mc.createArrayOf(typeName, elements);\r\n      } catch (SQLException var5) {\r\n        this.checkAndFireConnectionError(var5);\r\n        return null;\r\n      }\r\n    } catch (CJException var6) {\r\n      throw SQLExceptionsMapping.translateException(var6, super.exceptionInterceptor);\r\n    }\r\n  }\r\n```\r\ncom.zaxxer.hikari.pool.HikariProxyConnection:\r\n```java\r\n  public Array createArrayOf(String var1, Object[] var2) throws SQLException {\r\n    try {\r\n      return super.delegate.createArrayOf(var1, var2);\r\n    } catch (SQLException var4) {\r\n      throw this.checkException(var4);\r\n    }\r\n  }\r\n```\r\ncom.mysql.cj.jdbc.ha.MultiHostMySQLConnection:\r\n```java\r\n  public Array createArrayOf(String typeName, Object[] elements) throws SQLException {\r\n    try {\r\n      return this.getActiveMySQLConnection().createArrayOf(typeName, elements);\r\n    } catch (CJException var4) {\r\n      throw SQLExceptionsMapping.translateException(var4, this.getExceptionInterceptor());\r\n    }\r\n  }\r\n```","title":"Connection.createArrayOf throws SQLFeatureNotSupportedException","body":"<p>I want to use <code>Connection.createArrayOf</code> method to create a <code>java.sql.Array</code> to use in a prepared statement, but all of the following implementations throw <em><strong>Feature Not Supported Exception</strong></em></p>\n<p>Is there no implementation of this method? Is it deprecated? Is there any other way to initialize <code>java.sql.Array</code>? Or have I imported the wrong package?</p>\n<p>com.mysql.cj.jdbc.ConnectionImpl:</p>\n<pre class=\"lang-java prettyprint-override\"><code>  public Array createArrayOf(String typeName, Object[] elements) throws SQLException {\n    try {\n      throw SQLError.createSQLFeatureNotSupportedException();\n    } catch (CJException var4) {\n      throw SQLExceptionsMapping.translateException(var4, this.getExceptionInterceptor());\n    }\n  }\n</code></pre>\n<p>com.mysql.cj.jdbc.ConnectionWrapper:</p>\n<pre class=\"lang-java prettyprint-override\"><code>  public Array createArrayOf(String typeName, Object[] elements) throws SQLException {\n    try {\n      this.checkClosed();\n\n      try {\n        return this.mc.createArrayOf(typeName, elements);\n      } catch (SQLException var5) {\n        this.checkAndFireConnectionError(var5);\n        return null;\n      }\n    } catch (CJException var6) {\n      throw SQLExceptionsMapping.translateException(var6, super.exceptionInterceptor);\n    }\n  }\n</code></pre>\n<p>com.zaxxer.hikari.pool.HikariProxyConnection:</p>\n<pre class=\"lang-java prettyprint-override\"><code>  public Array createArrayOf(String var1, Object[] var2) throws SQLException {\n    try {\n      return super.delegate.createArrayOf(var1, var2);\n    } catch (SQLException var4) {\n      throw this.checkException(var4);\n    }\n  }\n</code></pre>\n<p>com.mysql.cj.jdbc.ha.MultiHostMySQLConnection:</p>\n<pre class=\"lang-java prettyprint-override\"><code>  public Array createArrayOf(String typeName, Object[] elements) throws SQLException {\n    try {\n      return this.getActiveMySQLConnection().createArrayOf(typeName, elements);\n    } catch (CJException var4) {\n      throw SQLExceptionsMapping.translateException(var4, this.getExceptionInterceptor());\n    }\n  }\n</code></pre>\n"},{"tags":["java","apache-spark","cassandra","spark-cassandra-connector"],"answers":[{"tags":[],"owner":{"account_id":5357170,"reputation":14233,"user_id":4269535,"display_name":"Erick Ramirez"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1662553642,"creation_date":1662553642,"answer_id":73635510,"question_id":73635063,"body_markdown":"The [Spark Cassandra connector][1] from DataStax is the only one I&#39;m aware of. \r\n\r\nThere may be other proprietary connectors/drivers (likely paid versions) but I&#39;m not familiar with them because all the enterprises I&#39;ve worked with use the spark-cassandra-connector. Cheers!\r\n\r\n\r\n  [1]: https://github.com/datastax/spark-cassandra-connector","title":"Is there an alternative to the Spark Cassandra connector?","body":"<p>The <a href=\"https://github.com/datastax/spark-cassandra-connector\" rel=\"nofollow noreferrer\">Spark Cassandra connector</a> from DataStax is the only one I'm aware of.</p>\n<p>There may be other proprietary connectors/drivers (likely paid versions) but I'm not familiar with them because all the enterprises I've worked with use the spark-cassandra-connector. Cheers!</p>\n"}],"owner":{"account_id":13103514,"reputation":492,"user_id":9467089,"display_name":"Des0lat0r"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":86,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"accepted_answer_id":73635510,"answer_count":1,"score":-1,"last_activity_date":1662553642,"creation_date":1662551666,"question_id":73635063,"body_markdown":"My question is simple actually. Can we read/write data with Spark from/to Cassandra database without using the Spark-Cassandra-Connector? Is there also something else we could use? If so, is there any performance comparison between them?","title":"Is there an alternative to the Spark Cassandra connector?","body":"<p>My question is simple actually. Can we read/write data with Spark from/to Cassandra database without using the Spark-Cassandra-Connector? Is there also something else we could use? If so, is there any performance comparison between them?</p>\n"},{"tags":["java","regex"],"answers":[{"tags":[],"owner":{"display_name":"anon"},"down_vote_count":1,"up_vote_count":10,"is_accepted":false,"score":9,"last_activity_date":1300536824,"creation_date":1300536824,"answer_id":5361989,"question_id":5361971,"body_markdown":"I think a regex is a little bit of an overkill in this situation. If you just want to remove all the quotes in your string I would use this code:\r\n\r\n    details = details.replace(&quot;\\&quot;&quot;, &quot;&quot;);","title":"Replace all double quotes within String","body":"<p>I think a regex is a little bit of an overkill in this situation. If you just want to remove all the quotes in your string I would use this code:</p>\n\n<pre><code>details = details.replace(\"\\\"\", \"\");\n</code></pre>\n"},{"tags":[],"owner":{"account_id":102965,"reputation":415230,"user_id":276052,"accept_rate":80,"display_name":"aioobe"},"down_vote_count":0,"up_vote_count":109,"is_accepted":true,"score":109,"last_activity_date":1300537193,"creation_date":1300536891,"answer_id":5361997,"question_id":5361971,"body_markdown":"Here&#39;s how\r\n\r\n\r\n    String details = &quot;Hello \\&quot;world\\&quot;!&quot;;\r\n    details = details.replace(&quot;\\&quot;&quot;,&quot;\\\\\\&quot;&quot;);\r\n    System.out.println(details);               // Hello \\&quot;world\\&quot;!\r\n\r\nNote that strings are [immutable](http://en.wikipedia.org/wiki/Immutable_object), thus it is not sufficient to simply do `details.replace(&quot;\\&quot;&quot;,&quot;\\\\\\&quot;&quot;)`. You must reassign the variable `details` to the resulting string.\r\n\r\n\r\n----------\r\n\r\nUsing\r\n\r\n    details = details.replaceAll(&quot;\\&quot;&quot;,&quot;&amp;quote;&quot;);\r\n\r\ninstead, results in\r\n\r\n    Hello &amp;quote;world&amp;quote;!","title":"Replace all double quotes within String","body":"<p>Here's how</p>\n\n<pre><code>String details = \"Hello \\\"world\\\"!\";\ndetails = details.replace(\"\\\"\",\"\\\\\\\"\");\nSystem.out.println(details);               // Hello \\\"world\\\"!\n</code></pre>\n\n<p>Note that strings are <a href=\"http://en.wikipedia.org/wiki/Immutable_object\">immutable</a>, thus it is not sufficient to simply do <code>details.replace(\"\\\"\",\"\\\\\\\"\")</code>. You must reassign the variable <code>details</code> to the resulting string.</p>\n\n<hr>\n\n<p>Using</p>\n\n<pre><code>details = details.replaceAll(\"\\\"\",\"&amp;quote;\");\n</code></pre>\n\n<p>instead, results in</p>\n\n<pre><code>Hello &amp;quote;world&amp;quote;!\n</code></pre>\n"},{"tags":[],"owner":{"account_id":10730,"reputation":118663,"user_id":20394,"accept_rate":73,"display_name":"Mike Samuel"},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1300537249,"creation_date":1300537249,"answer_id":5362023,"question_id":5361971,"body_markdown":"To make it work in JSON, you need to escape a few more character than that.\r\n\r\n    myString.replace(&quot;\\\\&quot;, &quot;\\\\\\\\&quot;)\r\n        .replace(&quot;\\&quot;&quot;, &quot;\\\\\\&quot;&quot;)\r\n        .replace(&quot;\\r&quot;, &quot;\\\\r&quot;)\r\n        .replace(&quot;\\n&quot;, &quot;\\\\n&quot;)\r\n\r\nand if you want to be able to use `json2.js` to parse it then you also need to escape\r\n\r\n       .replace(&quot;\\u2028&quot;, &quot;\\\\u2028&quot;)\r\n       .replace(&quot;\\u2029&quot;, &quot;\\\\u2029&quot;)\r\n\r\nwhich JSON allows inside quoted strings, but which JavaScript does not.","title":"Replace all double quotes within String","body":"<p>To make it work in JSON, you need to escape a few more character than that.</p>\n\n<pre><code>myString.replace(\"\\\\\", \"\\\\\\\\\")\n    .replace(\"\\\"\", \"\\\\\\\"\")\n    .replace(\"\\r\", \"\\\\r\")\n    .replace(\"\\n\", \"\\\\n\")\n</code></pre>\n\n<p>and if you want to be able to use <code>json2.js</code> to parse it then you also need to escape</p>\n\n<pre><code>   .replace(\"\\u2028\", \"\\\\u2028\")\n   .replace(\"\\u2029\", \"\\\\u2029\")\n</code></pre>\n\n<p>which JSON allows inside quoted strings, but which JavaScript does not.</p>\n"},{"tags":[],"owner":{"account_id":206903,"reputation":536,"user_id":456478,"display_name":"mikhailgarber"},"down_vote_count":0,"up_vote_count":37,"is_accepted":false,"score":37,"last_activity_date":1323140033,"creation_date":1323130562,"answer_id":8393753,"question_id":5361971,"body_markdown":"Would not that have to be:\r\n\r\n    .replaceAll(&quot;\\&quot;&quot;,&quot;\\\\\\\\\\&quot;&quot;)\r\n\r\nFIVE backslashes in the replacement String.","title":"Replace all double quotes within String","body":"<p>Would not that have to be:</p>\n\n<pre><code>.replaceAll(\"\\\"\",\"\\\\\\\\\\\"\")\n</code></pre>\n\n<p>FIVE backslashes in the replacement String.</p>\n"},{"tags":[],"owner":{"account_id":1430416,"reputation":7077,"user_id":1352969,"accept_rate":94,"display_name":"Shrikant Ballal"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1362492331,"creation_date":1362492331,"answer_id":15225814,"question_id":5361971,"body_markdown":"I know the answer is already accepted here, but I just wanted to share what I found when I tried to escape double quotes and single quotes.\r\n\r\nHere&#39;s what I have done: and this works :)\r\n\r\nto escape **double quotes**:\r\n\r\n        if(string.contains(&quot;\\&quot;&quot;)) {\r\n    \t\tstring = string.replaceAll(&quot;\\&quot;&quot;, &quot;\\\\\\\\\\&quot;&quot;);\r\n    \t}\r\nand to escape **single quotes**: \r\n\r\n        if(string.contains(&quot;\\&#39;&quot;)) {\r\n\t\t    string = string.replaceAll(&quot;\\&#39;&quot;, &quot;\\\\\\\\&#39;&quot;);\r\n\t    }\r\n\r\nPS: Please note the number of backslashes used above.","title":"Replace all double quotes within String","body":"<p>I know the answer is already accepted here, but I just wanted to share what I found when I tried to escape double quotes and single quotes.</p>\n\n<p>Here's what I have done: and this works :)</p>\n\n<p>to escape <strong>double quotes</strong>:</p>\n\n<pre><code>    if(string.contains(\"\\\"\")) {\n        string = string.replaceAll(\"\\\"\", \"\\\\\\\\\\\"\");\n    }\n</code></pre>\n\n<p>and to escape <strong>single quotes</strong>: </p>\n\n<pre><code>    if(string.contains(\"\\'\")) {\n        string = string.replaceAll(\"\\'\", \"\\\\\\\\'\");\n    }\n</code></pre>\n\n<p>PS: Please note the number of backslashes used above.</p>\n"},{"tags":[],"owner":{"account_id":2805186,"reputation":2243,"user_id":2412571,"display_name":"Lakshmana Kumar D"},"down_vote_count":3,"up_vote_count":3,"is_accepted":false,"score":0,"last_activity_date":1374580494,"creation_date":1374580494,"answer_id":17809516,"question_id":5361971,"body_markdown":"This is to remove double quotes in a string.\r\n\r\n    str1 = str.replace(/&quot;/g, &quot;&quot;);\r\n    alert(str1);\r\n\r\n","title":"Replace all double quotes within String","body":"<p>This is to remove double quotes in a string.</p>\n\n<pre><code>str1 = str.replace(/\"/g, \"\");\nalert(str1);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":278788,"reputation":301,"user_id":573554,"display_name":"elxala"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1446275281,"creation_date":1446256465,"answer_id":33447289,"question_id":5361971,"body_markdown":"The following regex will work for both:\r\n\r\n      text = text.replaceAll(&quot;(&#39;|\\&quot;)&quot;, &quot;\\\\\\\\$1&quot;);\r\n","title":"Replace all double quotes within String","body":"<p>The following regex will work for both:</p>\n\n<pre><code>  text = text.replaceAll(\"('|\\\")\", \"\\\\\\\\$1\");\n</code></pre>\n"},{"tags":[],"owner":{"account_id":17633229,"reputation":41,"user_id":12796934,"display_name":"priti negi"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1588829728,"creation_date":1588829351,"answer_id":61650525,"question_id":5361971,"body_markdown":"\r\n    String info = &quot;Hello \\&quot;world\\&quot;!&quot;;\r\n    info = info.replace(&quot;\\&quot;&quot;, &quot;\\\\\\&quot;&quot;);\r\n\r\n    String info1 = &quot;Hello &quot;world!&quot;;\r\n    info1 = info1.replace(&#39;&quot;&#39;, &#39;\\&quot;&#39;).replace(&quot;\\&quot;&quot;, &quot;\\\\\\&quot;&quot;);\r\n\r\nFor the 2nd field info1, 1st replace double quotes with an escape character.","title":"Replace all double quotes within String","body":"<pre><code>String info = \"Hello \\\"world\\\"!\";\ninfo = info.replace(\"\\\"\", \"\\\\\\\"\");\n\nString info1 = \"Hello \"world!\";\ninfo1 = info1.replace('\"', '\\\"').replace(\"\\\"\", \"\\\\\\\"\");\n</code></pre>\n\n<p>For the 2nd field info1, 1st replace double quotes with an escape character.</p>\n"},{"tags":[],"owner":{"account_id":26270951,"reputation":1,"user_id":19940853,"display_name":"Shohabbos Usmonov"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1662553618,"creation_date":1662553618,"answer_id":73635505,"question_id":5361971,"body_markdown":"If you cannot solve the problem with only \\\\* or \\\\\\* increase the number of backslashes to 5 such as \\\\\\\\\\&quot; and this will solve your problem","title":"Replace all double quotes within String","body":"<p>If you cannot solve the problem with only \\* or \\* increase the number of backslashes to 5 such as \\\\&quot; and this will solve your problem</p>\n"}],"owner":{"account_id":68607,"reputation":1350,"user_id":200063,"accept_rate":55,"display_name":"MalTec"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":247667,"favorite_count":0,"down_vote_count":0,"up_vote_count":63,"accepted_answer_id":5361997,"answer_count":9,"score":63,"last_activity_date":1662553618,"creation_date":1300536661,"question_id":5361971,"body_markdown":"I am retrieving data from a database, where the field contains a String with HTML data. I want to replace all of the double quotes such that it can be used for `parseJSON` of *jQuery*.\r\n\r\nUsing Java, I am trying to replace the quotes using..\r\n\r\n    details.replaceAll(&quot;\\&quot;&quot;,&quot;\\\\\\&quot;&quot;);\r\n      //details.replaceAll(&quot;\\&quot;&quot;,&quot;&amp;quote;&quot;); details.replaceAll(&quot;\\&quot;&quot;,&quot;&amp;#34&quot;);\r\n\r\n\r\nThe resultant string doesn&#39;t show the desired change. \r\nAn O&#39;Reilly [article][1] prescribes using Apache string utils. Is there any other way??\r\n\r\nIs there a regex or something that I could use?\r\n\r\n\r\n  [1]: http://oreilly.com/pub/h/1515","title":"Replace all double quotes within String","body":"<p>I am retrieving data from a database, where the field contains a String with HTML data. I want to replace all of the double quotes such that it can be used for <code>parseJSON</code> of <em>jQuery</em>.</p>\n\n<p>Using Java, I am trying to replace the quotes using..</p>\n\n<pre><code>details.replaceAll(\"\\\"\",\"\\\\\\\"\");\n  //details.replaceAll(\"\\\"\",\"&amp;quote;\"); details.replaceAll(\"\\\"\",\"&amp;#34\");\n</code></pre>\n\n<p>The resultant string doesn't show the desired change. \nAn O'Reilly <a href=\"http://oreilly.com/pub/h/1515\" rel=\"noreferrer\">article</a> prescribes using Apache string utils. Is there any other way??</p>\n\n<p>Is there a regex or something that I could use?</p>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":14722107,"reputation":5143,"user_id":10632369,"display_name":"tomerpacific"},"score":1,"creation_date":1662549606,"post_id":73634575,"comment_id":130030253,"body_markdown":"You can use a [HashMap](https://www.w3schools.com/java/java_hashmap.asp) or any type of map (depending on your use case).","body":"You can use a <a href=\"https://www.w3schools.com/java/java_hashmap.asp\" rel=\"nofollow noreferrer\">HashMap</a> or any type of map (depending on your use case)."},{"owner":{"account_id":2485939,"reputation":19426,"user_id":2164365,"accept_rate":40,"display_name":"Abra"},"score":0,"creation_date":1662550003,"post_id":73634575,"comment_id":130030412,"body_markdown":"Refer to [The Map Interface](https://docs.oracle.com/javase/tutorial/collections/interfaces/map.html)","body":"Refer to <a href=\"https://docs.oracle.com/javase/tutorial/collections/interfaces/map.html\" rel=\"nofollow noreferrer\">The Map Interface</a>"}],"answers":[{"tags":[],"owner":{"account_id":12673101,"reputation":1673,"user_id":9210263,"display_name":"LeYAUable"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1662550088,"creation_date":1662550088,"answer_id":73634695,"question_id":73634575,"body_markdown":"What you want is the [Map interface][1] and its implementations.\r\n\r\nThe most used one is HashMap. Which you declare like:\r\n\r\n    Map&lt;typeOfKey,typeOfValue&gt; aMap = new HashMap&lt;typeOfKey,typeOfValue&gt;()\r\n\r\n\r\n  [1]: https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/Map.html","title":"objects with key: value in Java","body":"<p>What you want is the <a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/Map.html\" rel=\"nofollow noreferrer\">Map interface</a> and its implementations.</p>\n<p>The most used one is HashMap. Which you declare like:</p>\n<pre><code>Map&lt;typeOfKey,typeOfValue&gt; aMap = new HashMap&lt;typeOfKey,typeOfValue&gt;()\n</code></pre>\n"},{"tags":[],"owner":{"account_id":24478797,"reputation":23,"user_id":18397507,"display_name":"sciPher80s"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1662550221,"creation_date":1662550221,"answer_id":73634737,"question_id":73634575,"body_markdown":"Key:Value pairs concept exists in java and for that you can always utilize [Map Interfaces][1].\r\nThe Map interface in Java is part of the Collections framework and provides the functionality of map data structure; which means mapping a key to a value.\r\n\r\nHowever, a class is a blueprint for creating new objects/entities; such entity or object when created has its own state and behavior. \r\n\r\nMap data structure and Class/Object have no contradiction. A Map could be used to define an objects state or be produced as the result of an objects behavior.\r\n\r\n\r\n  [1]: https://www.programiz.com/java-programming/map","title":"objects with key: value in Java","body":"<p>Key:Value pairs concept exists in java and for that you can always utilize <a href=\"https://www.programiz.com/java-programming/map\" rel=\"nofollow noreferrer\">Map Interfaces</a>.\nThe Map interface in Java is part of the Collections framework and provides the functionality of map data structure; which means mapping a key to a value.</p>\n<p>However, a class is a blueprint for creating new objects/entities; such entity or object when created has its own state and behavior.</p>\n<p>Map data structure and Class/Object have no contradiction. A Map could be used to define an objects state or be produced as the result of an objects behavior.</p>\n"},{"tags":[],"owner":{"account_id":15159660,"reputation":1770,"user_id":10939204,"display_name":"Traian GEICU"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1662551208,"creation_date":1662551208,"answer_id":73634953,"question_id":73634575,"body_markdown":"&gt; So, my question is if in Java language there is no such thing like key: value.[1] Or there is no sense to use it, because of used classes? [2]\r\n\r\n[1] There is what ever wanted to be in each programming language. Maybe, some programming languages have specific features (eg: OOP, functional Interface, various data types). Do your own if what is provided is not enough.\r\n\r\n[2] `Key-Values` reflect better a paradigm of programing, saying other a way of convenient storage which latter will ease the programming work.\r\n\r\nOne of java features is `Map- type` a `List of elements stored as &lt;key,value&gt;`, but this is not necessary the only way (better an alternative). \r\n   \r\nWith a small example, `Cat(identifier, name)` and if wanted to store use a List of type Cat `List&lt;Cat&gt;`. `Name` is not required to be a property (cat name), can be what ever you wanted (an instance). `Cat(id, (name, hair color, tail length))` -&gt; instance of dog friend.\r\n\r\n","title":"objects with key: value in Java","body":"<blockquote>\n<p>So, my question is if in Java language there is no such thing like key: value.[1] Or there is no sense to use it, because of used classes? [2]</p>\n</blockquote>\n<p>[1] There is what ever wanted to be in each programming language. Maybe, some programming languages have specific features (eg: OOP, functional Interface, various data types). Do your own if what is provided is not enough.</p>\n<p>[2] <code>Key-Values</code> reflect better a paradigm of programing, saying other a way of convenient storage which latter will ease the programming work.</p>\n<p>One of java features is <code>Map- type</code> a <code>List of elements stored as &lt;key,value&gt;</code>, but this is not necessary the only way (better an alternative).</p>\n<p>With a small example, <code>Cat(identifier, name)</code> and if wanted to store use a List of type Cat <code>List&lt;Cat&gt;</code>. <code>Name</code> is not required to be a property (cat name), can be what ever you wanted (an instance). <code>Cat(id, (name, hair color, tail length))</code> -&gt; instance of dog friend.</p>\n"}],"owner":{"account_id":25114763,"reputation":54,"user_id":19928451,"display_name":"Артём Орёл"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1074,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":3,"score":0,"last_activity_date":1662553499,"creation_date":1662549509,"question_id":73634575,"body_markdown":"I have just started to learn Java. Read a small book but I didnt catch information about key: value objects. \r\n\r\nfor example in javascript: \r\n\r\n    let car = {\r\n               type:&quot;Fiat&quot;, \r\n               model:&quot;500&quot;, \r\n               color:&quot;white&quot;\r\n               };\r\n\r\nbut in java there is only classes, which create an object:\r\n\r\n    public class CarObject {\r\n        public static void main(String[] args) {\r\n        Car car = new Car(&quot;Fiat&quot;, &quot;500&quot;, &quot;White&quot;);\r\n        }\r\n    }\r\n    class Car{\r\n        String type;\r\n        String model;\r\n        String color;\r\n        public Car(String type, String model, String color){\r\n            this.color = color;\r\n            this.model = model;\r\n            this.type = type;\r\n        }\r\n    }\r\n\r\nSo, my question is if in Java language there is no such thing like key: value. Or there is no sense to use it, because of used classes?\r\n\r\n","title":"objects with key: value in Java","body":"<p>I have just started to learn Java. Read a small book but I didnt catch information about key: value objects.</p>\n<p>for example in javascript:</p>\n<pre><code>let car = {\n           type:&quot;Fiat&quot;, \n           model:&quot;500&quot;, \n           color:&quot;white&quot;\n           };\n</code></pre>\n<p>but in java there is only classes, which create an object:</p>\n<pre><code>public class CarObject {\n    public static void main(String[] args) {\n    Car car = new Car(&quot;Fiat&quot;, &quot;500&quot;, &quot;White&quot;);\n    }\n}\nclass Car{\n    String type;\n    String model;\n    String color;\n    public Car(String type, String model, String color){\n        this.color = color;\n        this.model = model;\n        this.type = type;\n    }\n}\n</code></pre>\n<p>So, my question is if in Java language there is no such thing like key: value. Or there is no sense to use it, because of used classes?</p>\n"},{"tags":["java","selenium","datepicker","date-manipulation"],"comments":[{"owner":{"account_id":7612423,"reputation":82486,"user_id":5772882,"display_name":"Anonymous"},"score":0,"creation_date":1662552206,"post_id":73634908,"comment_id":130031321,"body_markdown":"In `fullDate.getText().format(String.valueOf(DateTimeFormatter.ofPattern(&quot;MM/dd/yyyy hh:mm a&quot;)))` you are calling the static `String.format()` method. You may have wanted to call `LocalDate.format()` or the `format` method of some other date-time class.","body":"In <code>fullDate.getText().format(String.valueOf(DateTimeFormatter.o&zwnj;&#8203;fPattern(&quot;MM&#47;dd&#47;yyyy hh:mm a&quot;)))</code> you are calling the static <code>String.format()</code> method. You may have wanted to call <code>LocalDate.format()</code> or the <code>format</code> method of some other date-time class."},{"owner":{"account_id":7612423,"reputation":82486,"user_id":5772882,"display_name":"Anonymous"},"score":0,"creation_date":1662553525,"post_id":73634908,"comment_id":130031874,"body_markdown":"Your problem seems to be that `fullDate.getText()` returns a blank string to you. Why it does that, I don’t know Selenium, so can’t tell, sorry,","body":"Your problem seems to be that <code>fullDate.getText()</code> returns a blank string to you. Why it does that, I don’t know Selenium, so can’t tell, sorry,"}],"owner":{"account_id":25561914,"reputation":1,"user_id":19344406,"display_name":"Azory Kavhuru"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":124,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1662553202,"creation_date":1662551026,"question_id":73634908,"body_markdown":"Am using Selenium webdriver with Java so I need to print my date from date picker but its failing:\r\nI want to convert this datepicker value to a string:\r\n\r\n//WebElement fullDate = driver.findElement(By.id(&quot;datetimepicker&quot;));\r\n\r\n    //String date = fullDate.getText().format(String.valueOf(DateTimeFormatter.ofPattern(&quot;MM/dd/yyyy hh:mm a&quot;)));\r\n//convert the date picker value to string\r\n\r\n\r\n\r\n    public void dateExample() throws InterruptedException {\r\n        WebDriverManager.chromedriver().setup();\r\n        WebDriver driver = new ChromeDriver();\r\n        String baseURL = &quot;https://demos.telerik.com/kendo-ui/datetimepicker/index&quot;;\r\n        driver.get(baseURL);\r\n        driver.manage().timeouts().implicitlyWait(Duration.ofSeconds(10));\r\n        WebElement selectDate = driver.findElement(By.xpath(&quot;//button[@aria-label=&#39;Open the date view&#39;]&quot;));\r\n        selectDate.click();\r\n        WebElement midButn = driver.findElement(By.xpath(&quot;//a[@title=&#39;Navigate to year view&#39;]&quot;));\r\n        midButn.click();\r\n\r\n        WebElement previousBtn = driver.findElement(By.xpath(&quot;//a[@aria-label=&#39;Previous&#39;]&quot;));\r\n        previousBtn.click();\r\n\r\n        WebElement nextBtn = driver.findElement(By.xpath(&quot;//a[@aria-label=&#39;Next&#39;]&quot;));\r\n        nextBtn.click();\r\n        Thread.sleep(1000);\r\n        nextBtn.click();\r\n        Thread.sleep(1000);\r\n\r\n        WebElement pickMonth = driver.findElement(By.xpath(&quot;//a[@aria-label=&#39;July&#39;]&quot;));\r\n        pickMonth.click();\r\n        WebElement pickDay = driver.findElement(By.xpath(&quot;//a[@title=&#39;Monday, July 17, 2023&#39;]&quot;));\r\n        pickDay.click();\r\n        WebElement fullDate = driver.findElement(By.id(&quot;datetimepicker&quot;));\r\n\r\n        String date = fullDate.getText().format(String.valueOf(DateTimeFormatter.ofPattern(&quot;MM/dd/yyyy hh:mm a&quot;)));\r\n\r\n        System.out.println(&quot;Full date is: &quot;+fullDate.getText());//nothing is printing here\r\n\r\n        String splitDate[] = (date.split(&quot; &quot;)[0].split(&quot;/&quot;));\r\n        System.out.println(&quot;This is the Month &quot;+splitDate[0]);\r\n        System.out.println(&quot;This is the day &quot;+splitDate[1]);\r\n        System.out.println(&quot;This is the year &quot;+splitDate[2]);\r\n    }\r\n\r\nConsole Output:\r\n\r\n```\r\nFull date is: \r\nThis is the Month Value(MonthOfYear,2)&#39;\r\nThis is the day &#39;Value(DayOfMonth,2)&#39;\r\nThis is the year &#39;Value(YearOfEra,4,19,EXCEEDS_PAD)&#39;\r\n```","title":"How to convet a datepicker value to a string with Selenium Java","body":"<p>Am using Selenium webdriver with Java so I need to print my date from date picker but its failing:\nI want to convert this datepicker value to a string:</p>\n<p>//WebElement fullDate = driver.findElement(By.id(&quot;datetimepicker&quot;));</p>\n<pre><code>//String date = fullDate.getText().format(String.valueOf(DateTimeFormatter.ofPattern(&quot;MM/dd/yyyy hh:mm a&quot;)));\n</code></pre>\n<p>//convert the date picker value to string</p>\n<pre><code>public void dateExample() throws InterruptedException {\n    WebDriverManager.chromedriver().setup();\n    WebDriver driver = new ChromeDriver();\n    String baseURL = &quot;https://demos.telerik.com/kendo-ui/datetimepicker/index&quot;;\n    driver.get(baseURL);\n    driver.manage().timeouts().implicitlyWait(Duration.ofSeconds(10));\n    WebElement selectDate = driver.findElement(By.xpath(&quot;//button[@aria-label='Open the date view']&quot;));\n    selectDate.click();\n    WebElement midButn = driver.findElement(By.xpath(&quot;//a[@title='Navigate to year view']&quot;));\n    midButn.click();\n\n    WebElement previousBtn = driver.findElement(By.xpath(&quot;//a[@aria-label='Previous']&quot;));\n    previousBtn.click();\n\n    WebElement nextBtn = driver.findElement(By.xpath(&quot;//a[@aria-label='Next']&quot;));\n    nextBtn.click();\n    Thread.sleep(1000);\n    nextBtn.click();\n    Thread.sleep(1000);\n\n    WebElement pickMonth = driver.findElement(By.xpath(&quot;//a[@aria-label='July']&quot;));\n    pickMonth.click();\n    WebElement pickDay = driver.findElement(By.xpath(&quot;//a[@title='Monday, July 17, 2023']&quot;));\n    pickDay.click();\n    WebElement fullDate = driver.findElement(By.id(&quot;datetimepicker&quot;));\n\n    String date = fullDate.getText().format(String.valueOf(DateTimeFormatter.ofPattern(&quot;MM/dd/yyyy hh:mm a&quot;)));\n\n    System.out.println(&quot;Full date is: &quot;+fullDate.getText());//nothing is printing here\n\n    String splitDate[] = (date.split(&quot; &quot;)[0].split(&quot;/&quot;));\n    System.out.println(&quot;This is the Month &quot;+splitDate[0]);\n    System.out.println(&quot;This is the day &quot;+splitDate[1]);\n    System.out.println(&quot;This is the year &quot;+splitDate[2]);\n}\n</code></pre>\n<p>Console Output:</p>\n<pre><code>Full date is: \nThis is the Month Value(MonthOfYear,2)'\nThis is the day 'Value(DayOfMonth,2)'\nThis is the year 'Value(YearOfEra,4,19,EXCEEDS_PAD)'\n</code></pre>\n"},{"tags":["java","arrays","loops"],"comments":[{"owner":{"account_id":2360785,"reputation":11123,"user_id":2067492,"display_name":"matt"},"score":0,"creation_date":1527077791,"post_id":50488116,"comment_id":87989094,"body_markdown":"What error are you getting when you do this? And why do you limit your result to &#39;4&#39;?","body":"What error are you getting when you do this? And why do you limit your result to &#39;4&#39;?"},{"owner":{"account_id":1485367,"reputation":122993,"user_id":1393766,"display_name":"Pshemo"},"score":0,"creation_date":1527077805,"post_id":50488116,"comment_id":87989105,"body_markdown":"Possibly related: [Splitting a Java String by the pipe symbol using split(“|”)](https://stackoverflow.com/q/10796160)","body":"Possibly related: <a href=\"https://stackoverflow.com/q/10796160\">Splitting a Java String by the pipe symbol using split(“|”)</a>"},{"owner":{"account_id":10108456,"reputation":3914,"user_id":7470253,"display_name":"M. Prokhorov"},"score":0,"creation_date":1527078141,"post_id":50488116,"comment_id":87989343,"body_markdown":"You don&#39;t &quot;turn array into 2d array&quot;. You read first array and write each item from it to array of its own that you also need to save somewhere. Since you allegedly already got one array from a string, what&#39;s stopping you from getting array from each string in that array?","body":"You don&#39;t &quot;turn array into 2d array&quot;. You read first array and write each item from it to array of its own that you also need to save somewhere. Since you allegedly already got one array from a string, what&#39;s stopping you from getting array from each string in that array?"},{"owner":{"account_id":13632525,"reputation":21,"user_id":9834301,"display_name":"Cookie"},"score":0,"creation_date":1527078546,"post_id":50488116,"comment_id":87989630,"body_markdown":"M Prokhorov... my ignorance is stopping me.  Pshemo I got something that said @CheckReturnValue","body":"M Prokhorov... my ignorance is stopping me.  Pshemo I got something that said @CheckReturnValue"},{"owner":{"account_id":2803497,"reputation":25202,"user_id":2411243,"display_name":"Zabuzard"},"score":0,"creation_date":1527078663,"post_id":50488116,"comment_id":87989726,"body_markdown":"Can you give some example input and the desired output? Not only the structure of your partial result.","body":"Can you give some example input and the desired output? Not only the structure of your partial result."},{"owner":{"account_id":13632525,"reputation":21,"user_id":9834301,"display_name":"Cookie"},"score":0,"creation_date":1527078719,"post_id":50488116,"comment_id":87989782,"body_markdown":"Pshemo, the pipe symbol was just an example.  It&#39;s not compiling.","body":"Pshemo, the pipe symbol was just an example.  It&#39;s not compiling."},{"owner":{"account_id":2803497,"reputation":25202,"user_id":2411243,"display_name":"Zabuzard"},"score":1,"creation_date":1527078780,"post_id":50488116,"comment_id":87989828,"body_markdown":"Also, it would help if you add the PHP code as reference. Than it&#39;s easier to understand what exactly you want to achieve.","body":"Also, it would help if you add the PHP code as reference. Than it&#39;s easier to understand what exactly you want to achieve."},{"owner":{"account_id":10108456,"reputation":3914,"user_id":7470253,"display_name":"M. Prokhorov"},"score":0,"creation_date":1527078914,"post_id":50488116,"comment_id":87989916,"body_markdown":"@Cookie, when asking a question, you should give exactly what you want, and exactly what you did and what went wrong. I see that your code would not compile, but I know that from experience (your declaration for 2d array type is wrong).","body":"@Cookie, when asking a question, you should give exactly what you want, and exactly what you did and what went wrong. I see that your code would not compile, but I know that from experience (your declaration for 2d array type is wrong)."},{"owner":{"account_id":13632525,"reputation":21,"user_id":9834301,"display_name":"Cookie"},"score":0,"creation_date":1527079140,"post_id":50488116,"comment_id":87990082,"body_markdown":"Zabuza, I&#39;m on it.","body":"Zabuza, I&#39;m on it."},{"owner":{"account_id":2360785,"reputation":11123,"user_id":2067492,"display_name":"matt"},"score":0,"creation_date":1527079265,"post_id":50488116,"comment_id":87990177,"body_markdown":"When you assign the elements of 2dArray, you just do `2dArray[i] = array[i].splitj(&quot;\\\\|&quot;);`","body":"When you assign the elements of 2dArray, you just do <code>2dArray[i] = array[i].splitj(&quot;\\\\|&quot;);</code>"},{"owner":{"account_id":1485367,"reputation":122993,"user_id":1393766,"display_name":"Pshemo"},"score":0,"creation_date":1527079726,"post_id":50488116,"comment_id":87990518,"body_markdown":"Hello. Since you are new on Stack Overflow you may not know yet that it is good to use `@nickOfPerson` if you are responding to that person&#39;s comment. This way that person will be notified about your response. Anyway lets go back to: &quot;*the pipe symbol was just an example*&quot;, OK but code you posted was also based on that example and had problem related to splitting on `|` which is why I posted my comment (to avoid such situations lets try not to introduce problems unrelated to real question).","body":"Hello. Since you are new on Stack Overflow you may not know yet that it is good to use <code>@nickOfPerson</code> if you are responding to that person&#39;s comment. This way that person will be notified about your response. Anyway lets go back to: &quot;<i>the pipe symbol was just an example</i>&quot;, OK but code you posted was also based on that example and had problem related to splitting on <code>|</code> which is why I posted my comment (to avoid such situations lets try not to introduce problems unrelated to real question)."}],"answers":[{"tags":[],"owner":{"account_id":13611482,"reputation":1,"user_id":9818826,"display_name":"Triando"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1527078781,"creation_date":1527078781,"answer_id":50488535,"question_id":50488116,"body_markdown":"You can loop the array like this:\r\n\r\n        // Initialize array\r\n\t\tString[] array = {\r\n\t\t\t\t&quot;Bob | Smithers | Likes Cats | Doesnt Like Dogs&quot;,\r\n\t\t\t\t&quot;Jane | Haversham | Likes Bats | Doesnt Like People&quot;\r\n\t\t};\r\n\r\n\t\t// Convert 1d to 2d array\r\n\t\tString[][] array2d = new String[2][4];\r\n\t\tfor(int i=0;i&lt;array.length;i++) {\r\n\t\t\tString[] temp = array[i].split(&quot; \\\\| &quot;);\r\n\r\n\t\t\tfor(int j=0;j&lt;temp.length;j++) {\r\n\t\t\t\tarray2d[i][j] = temp[j];\r\n\t\t\t}\r\n\t\t}\r\n\t\t\t\t\r\n\t\t// Print the array\r\n\t\tfor(int i=0;i&lt;array2d.length;i++) {\r\n\t\t\tSystem.out.println(Arrays.toString(array2d[i]));\r\n\t\t}\r\n\r\nNotes: I used ` \\\\| `to split the pipe character.","title":"Looping through 2d array with String.split()","body":"<p>You can loop the array like this:</p>\n\n<pre><code>    // Initialize array\n    String[] array = {\n            \"Bob | Smithers | Likes Cats | Doesnt Like Dogs\",\n            \"Jane | Haversham | Likes Bats | Doesnt Like People\"\n    };\n\n    // Convert 1d to 2d array\n    String[][] array2d = new String[2][4];\n    for(int i=0;i&lt;array.length;i++) {\n        String[] temp = array[i].split(\" \\\\| \");\n\n        for(int j=0;j&lt;temp.length;j++) {\n            array2d[i][j] = temp[j];\n        }\n    }\n\n    // Print the array\n    for(int i=0;i&lt;array2d.length;i++) {\n        System.out.println(Arrays.toString(array2d[i]));\n    }\n</code></pre>\n\n<p>Notes: I used <code>\\\\|</code>to split the pipe character.</p>\n"},{"tags":[],"owner":{"account_id":2803497,"reputation":25202,"user_id":2411243,"display_name":"Zabuzard"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1527080366,"creation_date":1527079680,"answer_id":50488849,"question_id":50488116,"body_markdown":"## Problem ##\r\n\r\nIf I got you right you have an input like this:\r\n\r\n    {{Bob | Smithers | Likes Cats | Doesnt Like Dogs},{Jane | Haversham | Likes Bats | Doesnt Like People}}\r\n\r\nReadable version:\r\n\r\n    {\r\n        {Bob | Smithers | Likes Cats | Doesnt Like Dogs},\r\n        {Jane | Haversham | Likes Bats | Doesnt Like People}\r\n    }\r\n\r\nAnd you want to represent that structure in a 2-dimensional `String` aray, `String[][]`.\r\n\r\n----------\r\n## Solution ##\r\n\r\nThe key is the method `String#split` which splits a given `String` into substrings delimited by a given symbol. This is `,` and ` | ` in your example.\r\n\r\nFirst of all we remove all `{`, `}` as we don&#39;t need them (as long as the text itself does not contain delimiter):\r\n\r\n    String input = ...\r\n    String inputWithoutCurly = input.replaceAll(&quot;[{}]&quot;, &quot;&quot;);\r\n\r\nThe text is now:\r\n\r\n    Bob | Smithers | Likes Cats | Doesnt Like Dogs,Jane | Haversham | Likes Bats | Doesnt Like People\r\n\r\nNext we want to create the outer dimension of the array, that is split by `,`:\r\n\r\n    String[] entries = inputWithoutCurly.split(&quot;,&quot;);\r\n\r\nStructure now is:\r\n\r\n    [\r\n        &quot;Bob | Smithers | Likes Cats | Doesnt Like Dogs&quot;,\r\n        &quot;Jane | Haversham | Likes Bats | Doesnt Like People&quot;\r\n    ]\r\n\r\nWe now want to split each of the inner texts into their components. We therefore iterate all entries, split them by ` | ` and collect them to the result:\r\n\r\n    // Declaring a new 2-dim array with unknown inner dimension\r\n    String[][] result = new String[entries.length][];\r\n\r\n    // Iterating all entries\r\n    for (int i = 0; i &lt; entries.length; i++) {\r\n        String[] data = entries[i].split(&quot; | &quot;);\r\n\r\n        // Collect data to result\r\n        result[i] = data;\r\n    }\r\n\r\nFinally we have the desired structure of:\r\n\r\n    [\r\n        [ &quot;Bob&quot;, &quot;Smithers&quot;, &quot;Likes Cats&quot;, &quot;Doesnt Like Dogs&quot; ],\r\n        [ &quot;Jane&quot;, &quot;Haversham&quot;, &quot;Likes Bats&quot;, &quot;Doesnt Like People&quot;]\r\n    ]\r\n\r\nEverything compact:\r\n\r\n    String[] entries = input.replaceAll(&quot;[{}]&quot;, &quot;&quot;).split(&quot;,&quot;);\r\n    String[][] result = new String[entries.length][];\r\n    \r\n    for (int i = 0; i &lt; entries.length; i++) {\r\n        result[i] = entries[i].split(&quot; | &quot;);\r\n    }\r\n\r\n----------\r\n## Stream ##\r\n\r\nIf you have Java 8 or newer you can use the **Stream API** for a compact functional style:\r\n\r\n    String[][] result = Arrays.stream(input.replaceAll(&quot;[{}]&quot;, &quot;&quot;).split(&quot;,&quot;))\r\n        .map(entry -&gt; entry.split(&quot; | &quot;))\r\n        .toArray(String[][]::new);","title":"Looping through 2d array with String.split()","body":"<h2>Problem</h2>\n\n<p>If I got you right you have an input like this:</p>\n\n<pre><code>{{Bob | Smithers | Likes Cats | Doesnt Like Dogs},{Jane | Haversham | Likes Bats | Doesnt Like People}}\n</code></pre>\n\n<p>Readable version:</p>\n\n<pre><code>{\n    {Bob | Smithers | Likes Cats | Doesnt Like Dogs},\n    {Jane | Haversham | Likes Bats | Doesnt Like People}\n}\n</code></pre>\n\n<p>And you want to represent that structure in a 2-dimensional <code>String</code> aray, <code>String[][]</code>.</p>\n\n<hr>\n\n<h2>Solution</h2>\n\n<p>The key is the method <code>String#split</code> which splits a given <code>String</code> into substrings delimited by a given symbol. This is <code>,</code> and <code>|</code> in your example.</p>\n\n<p>First of all we remove all <code>{</code>, <code>}</code> as we don't need them (as long as the text itself does not contain delimiter):</p>\n\n<pre><code>String input = ...\nString inputWithoutCurly = input.replaceAll(\"[{}]\", \"\");\n</code></pre>\n\n<p>The text is now:</p>\n\n<pre><code>Bob | Smithers | Likes Cats | Doesnt Like Dogs,Jane | Haversham | Likes Bats | Doesnt Like People\n</code></pre>\n\n<p>Next we want to create the outer dimension of the array, that is split by <code>,</code>:</p>\n\n<pre><code>String[] entries = inputWithoutCurly.split(\",\");\n</code></pre>\n\n<p>Structure now is:</p>\n\n<pre><code>[\n    \"Bob | Smithers | Likes Cats | Doesnt Like Dogs\",\n    \"Jane | Haversham | Likes Bats | Doesnt Like People\"\n]\n</code></pre>\n\n<p>We now want to split each of the inner texts into their components. We therefore iterate all entries, split them by <code>|</code> and collect them to the result:</p>\n\n<pre><code>// Declaring a new 2-dim array with unknown inner dimension\nString[][] result = new String[entries.length][];\n\n// Iterating all entries\nfor (int i = 0; i &lt; entries.length; i++) {\n    String[] data = entries[i].split(\" | \");\n\n    // Collect data to result\n    result[i] = data;\n}\n</code></pre>\n\n<p>Finally we have the desired structure of:</p>\n\n<pre><code>[\n    [ \"Bob\", \"Smithers\", \"Likes Cats\", \"Doesnt Like Dogs\" ],\n    [ \"Jane\", \"Haversham\", \"Likes Bats\", \"Doesnt Like People\"]\n]\n</code></pre>\n\n<p>Everything compact:</p>\n\n<pre><code>String[] entries = input.replaceAll(\"[{}]\", \"\").split(\",\");\nString[][] result = new String[entries.length][];\n\nfor (int i = 0; i &lt; entries.length; i++) {\n    result[i] = entries[i].split(\" | \");\n}\n</code></pre>\n\n<hr>\n\n<h2>Stream</h2>\n\n<p>If you have Java 8 or newer you can use the <strong>Stream API</strong> for a compact functional style:</p>\n\n<pre><code>String[][] result = Arrays.stream(input.replaceAll(\"[{}]\", \"\").split(\",\"))\n    .map(entry -&gt; entry.split(\" | \"))\n    .toArray(String[][]::new);\n</code></pre>\n"}],"owner":{"account_id":13632525,"reputation":21,"user_id":9834301,"display_name":"Cookie"},"comment_count":11,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":529,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1662553144,"creation_date":1527077563,"question_id":50488116,"body_markdown":"I&#39;ve got a simple problem, but I&#39;m new to Java coming from PHP.  I need to split a delimited text file into an array.  I&#39;ve broken it down into an array of lines, each one would look something like this:\r\n\r\n    {\r\n        {Bob | Smithers | Likes Cats | Doesnt Like Dogs},\r\n        {Jane | Haversham | Likes Bats | Doesnt Like People}\r\n    }\r\n\r\nI need to turn this into a 2 dimensional array.\r\n\r\nIn PHP, it&#39;s a cinch.  You just use explode();  I tried using String.split on a 1d array and it wasn&#39;t that bad either.  The things is, I haven&#39;t yet learned how to be nice to Java.  So I don&#39;t know how to loop through the array and turn it into a 2d.  This is what I have:\r\n\r\n    for (i = 0; i &lt; array.length; i++) {\r\n        String[i][] 2dArray = array[i].split(&quot;|&quot;, 4);\r\n    }\r\n\r\nPHP would be\r\n\r\n    for ($i = 0; $i &lt; count($array); $i++) {\r\n        $array[i][] = explode(&quot;,&quot;, $array[i]);\r\n    }","title":"Looping through 2d array with String.split()","body":"<p>I've got a simple problem, but I'm new to Java coming from PHP.  I need to split a delimited text file into an array.  I've broken it down into an array of lines, each one would look something like this:</p>\n\n<pre><code>{\n    {Bob | Smithers | Likes Cats | Doesnt Like Dogs},\n    {Jane | Haversham | Likes Bats | Doesnt Like People}\n}\n</code></pre>\n\n<p>I need to turn this into a 2 dimensional array.</p>\n\n<p>In PHP, it's a cinch.  You just use explode();  I tried using String.split on a 1d array and it wasn't that bad either.  The things is, I haven't yet learned how to be nice to Java.  So I don't know how to loop through the array and turn it into a 2d.  This is what I have:</p>\n\n<pre><code>for (i = 0; i &lt; array.length; i++) {\n    String[i][] 2dArray = array[i].split(\"|\", 4);\n}\n</code></pre>\n\n<p>PHP would be</p>\n\n<pre><code>for ($i = 0; $i &lt; count($array); $i++) {\n    $array[i][] = explode(\",\", $array[i]);\n}\n</code></pre>\n"},{"tags":["java","spring"],"comments":[{"owner":{"account_id":395375,"reputation":7111,"user_id":3591528,"display_name":"teppic"},"score":0,"creation_date":1662520297,"post_id":73629619,"comment_id":130021735,"body_markdown":"Does this answer your question? [Find annotation in Spring proxy bean](https://stackoverflow.com/questions/6257092/find-annotation-in-spring-proxy-bean)","body":"Does this answer your question? <a href=\"https://stackoverflow.com/questions/6257092/find-annotation-in-spring-proxy-bean\">Find annotation in Spring proxy bean</a>"},{"owner":{"account_id":18094497,"reputation":702,"user_id":13153117,"display_name":"Stan"},"score":0,"creation_date":1662520351,"post_id":73629619,"comment_id":130021741,"body_markdown":"Ah Yes I will close it","body":"Ah Yes I will close it"},{"owner":{"account_id":18094497,"reputation":702,"user_id":13153117,"display_name":"Stan"},"score":0,"creation_date":1662523935,"post_id":73629619,"comment_id":130022208,"body_markdown":"@teppic Actually I updated the question now","body":"@teppic Actually I updated the question now"},{"owner":{"account_id":3192259,"reputation":117599,"user_id":2696260,"display_name":"M. Deinum"},"score":1,"creation_date":1662531620,"post_id":73629619,"comment_id":130023700,"body_markdown":"Without seeing the bean sources and configuration this is impossible to answer.","body":"Without seeing the bean sources and configuration this is impossible to answer."},{"owner":{"account_id":18094497,"reputation":702,"user_id":13153117,"display_name":"Stan"},"score":0,"creation_date":1662553011,"post_id":73629619,"comment_id":130031663,"body_markdown":"@M.Deinum Actually good point! The only difference between the first and second screenshot is that second one( proxied bean ) has  the Spring Cache annotation `@Cacheable`. Actually I think that is possibly the reason. Non-looker does have a clear mind!!!","body":"@M.Deinum Actually good point! The only difference between the first and second screenshot is that second one( proxied bean ) has  the Spring Cache annotation <code>@Cacheable</code>. Actually I think that is possibly the reason. Non-looker does have a clear mind!!!"},{"owner":{"account_id":18094497,"reputation":702,"user_id":13153117,"display_name":"Stan"},"score":0,"creation_date":1662553479,"post_id":73629619,"comment_id":130031855,"body_markdown":"My guess: CGLIG proxies in AOP as well as in Spring Cache framework","body":"My guess: CGLIG proxies in AOP as well as in Spring Cache framework"},{"owner":{"account_id":3192259,"reputation":117599,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1662553680,"post_id":73629619,"comment_id":130031933,"body_markdown":"Again without the code it is impossible to answer. Caching is implemented with AOP.","body":"Again without the code it is impossible to answer. Caching is implemented with AOP."},{"owner":{"account_id":18094497,"reputation":702,"user_id":13153117,"display_name":"Stan"},"score":0,"creation_date":1662554152,"post_id":73629619,"comment_id":130032113,"body_markdown":"It is private code which can not be shown here. But I can tell the biggest difference is the Cache annotation @M. Denium","body":"It is private code which can not be shown here. But I can tell the biggest difference is the Cache annotation @M. Denium"}],"owner":{"account_id":18094497,"reputation":702,"user_id":13153117,"display_name":"Stan"},"comment_count":8,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":21,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1662553132,"creation_date":1662519645,"question_id":73629619,"body_markdown":"I can sometimes get the annotation via `[object].getClass().isAnnotationPresent([Annotation.class])`\r\nbut sometimes not.\r\n So I turn on the debug mode and find the difference:\r\nIn the fist picture, b.getClass() return the actual class: `stan.beans.HisBean`\r\n[![enter image description here][1]][1]\r\nBut in the second picture, it actually return something different, looks like a modified class by Spring framework so I use the proxied word in the title:\r\nclass packagepath.Handler$$EnhancerBySpringCGLIB$$da96cafa\r\n\r\n[![enter image description here][2]][2]\r\n\r\nThanks to @Teppic I figure out we can use `AopProxyUtils.ultimateTargetClass()` to get the non-proxied class\r\n\r\n**But my question now is :**\r\n\r\nWhen will SpringCGLB proxy the class? Is there any configuration I can change? Cause I think both my screenshots use the same configuration. They almost shadow each other.\r\n\r\n**Important Info Thanks to @M. Deinum**\r\nThe second bean class(proxied one) has Spring Cache `@Cacheable` annotation on some methods\r\n\r\n  [1]: https://i.stack.imgur.com/0GECO.png\r\n  [2]: https://i.stack.imgur.com/uRmB5.png","title":"when will the class get proxied by SpringCGLB","body":"<p>I can sometimes get the annotation via <code>[object].getClass().isAnnotationPresent([Annotation.class])</code>\nbut sometimes not.\nSo I turn on the debug mode and find the difference:\nIn the fist picture, b.getClass() return the actual class: <code>stan.beans.HisBean</code>\n<a href=\"https://i.stack.imgur.com/0GECO.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/0GECO.png\" alt=\"enter image description here\" /></a>\nBut in the second picture, it actually return something different, looks like a modified class by Spring framework so I use the proxied word in the title:\nclass packagepath.Handler$$EnhancerBySpringCGLIB$$da96cafa</p>\n<p><a href=\"https://i.stack.imgur.com/uRmB5.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/uRmB5.png\" alt=\"enter image description here\" /></a></p>\n<p>Thanks to @Teppic I figure out we can use <code>AopProxyUtils.ultimateTargetClass()</code> to get the non-proxied class</p>\n<p><strong>But my question now is :</strong></p>\n<p>When will SpringCGLB proxy the class? Is there any configuration I can change? Cause I think both my screenshots use the same configuration. They almost shadow each other.</p>\n<p><strong>Important Info Thanks to @M. Deinum</strong>\nThe second bean class(proxied one) has Spring Cache <code>@Cacheable</code> annotation on some methods</p>\n"},{"tags":["java","spring-boot","neo4j"],"answers":[{"tags":[],"owner":{"account_id":19620770,"reputation":25,"user_id":16595083,"display_name":"iamzexy"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1662553127,"creation_date":1662553127,"answer_id":73635393,"question_id":73623568,"body_markdown":"So, it was a pretty simple solution\r\n\r\n    mainNode.relationshipBetween(node, &quot;REL_TYPE&quot;)\r\n\r\nYou can just pass here a String label of type that you want","title":"How to filter by relationship name in neo4j with Condition","body":"<p>So, it was a pretty simple solution</p>\n<pre><code>mainNode.relationshipBetween(node, &quot;REL_TYPE&quot;)\n</code></pre>\n<p>You can just pass here a String label of type that you want</p>\n"}],"owner":{"account_id":19620770,"reputation":25,"user_id":16595083,"display_name":"iamzexy"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":54,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":73635393,"answer_count":1,"score":0,"last_activity_date":1662553127,"creation_date":1662473808,"question_id":73623568,"body_markdown":"I have some legacy code that filters neo4j nodes with Conditions: \r\n\r\n    private Condition addConditionIfExist(String fieldName,\r\n                                          String fieldValue,\r\n                                          String nodeLabel,\r\n                                          Node mainNode,\r\n                                          Condition currentCondition) {\r\n        Node node = node(nodeLabel).withProperties(fieldName, Cypher.literalOf(fieldValue));\r\n        Relationship link = mainNode.relationshipBetween(node);\r\n        return currentCondition.and(link);\r\n\r\nNow I need to add filtering by relationship name. I tried to add .withProperties(&quot;type&quot;, Cypher.literalOf(&quot;TYPE_NAME&quot;)) to link variable, but that does nothing. So, is there any way to add specific reltype to this condition? ","title":"How to filter by relationship name in neo4j with Condition","body":"<p>I have some legacy code that filters neo4j nodes with Conditions:</p>\n<pre><code>private Condition addConditionIfExist(String fieldName,\n                                      String fieldValue,\n                                      String nodeLabel,\n                                      Node mainNode,\n                                      Condition currentCondition) {\n    Node node = node(nodeLabel).withProperties(fieldName, Cypher.literalOf(fieldValue));\n    Relationship link = mainNode.relationshipBetween(node);\n    return currentCondition.and(link);\n</code></pre>\n<p>Now I need to add filtering by relationship name. I tried to add .withProperties(&quot;type&quot;, Cypher.literalOf(&quot;TYPE_NAME&quot;)) to link variable, but that does nothing. So, is there any way to add specific reltype to this condition?</p>\n"},{"tags":["java","keycloak"],"comments":[{"owner":{"account_id":6402799,"reputation":326,"user_id":4964941,"display_name":"tom"},"score":1,"creation_date":1662553370,"post_id":73635387,"comment_id":130031800,"body_markdown":"what&#39;s the error that is thrown? what exactly does not work? what does `UserModel.getEmail()` return?","body":"what&#39;s the error that is thrown? what exactly does not work? what does <code>UserModel.getEmail()</code> return?"},{"owner":{"account_id":26270693,"reputation":1,"user_id":19940631,"display_name":"gorecode"},"score":0,"creation_date":1662554636,"post_id":73635387,"comment_id":130032319,"body_markdown":"no error. I just need to change the send message. Now I am using the parameter &quot;final UserModel user&quot; -&gt; after update to v19 this method is default and I need to implement the same method where &quot;UserModel user&quot; was changed to &quot;String address&quot;.\n\nI need a possibility to get the email address out of an object into this &quot;String address&quot; parameter...","body":"no error. I just need to change the send message. Now I am using the parameter &quot;final UserModel user&quot; -&gt; after update to v19 this method is default and I need to implement the same method where &quot;UserModel user&quot; was changed to &quot;String address&quot;.  I need a possibility to get the email address out of an object into this &quot;String address&quot; parameter..."},{"owner":{"account_id":6402799,"reputation":326,"user_id":4964941,"display_name":"tom"},"score":0,"creation_date":1662555022,"post_id":73635387,"comment_id":130032469,"body_markdown":"the [keycloak docs](https://www.keycloak.org/docs-api/19.0.1/javadocs/org/keycloak/models/UserModel.html) on UserModel is in line with your code. what is the actual return value here `final String address = retrieveEmailAddress(user);`?","body":"the <a href=\"https://www.keycloak.org/docs-api/19.0.1/javadocs/org/keycloak/models/UserModel.html\" rel=\"nofollow noreferrer\">keycloak docs</a> on UserModel is in line with your code. what is the actual return value here <code>final String address = retrieveEmailAddress(user);</code>?"},{"owner":{"account_id":26270693,"reputation":1,"user_id":19940631,"display_name":"gorecode"},"score":0,"creation_date":1662555513,"post_id":73635387,"comment_id":130032689,"body_markdown":"thanks for your help so far.\nthe actual return is the email address from users out of the database. in fact there is no error if I implement both methods (the default one with UserModel user parameter - which is used, and the second send method which is not used. the second method is only implemented with an empty body. if I delete this method an error occurs that I have to implement all methods from the interface. so I should refactor the code to use only the second method which have to be implemented. the first method is optional (default). but the second method uses only Strings as params.","body":"thanks for your help so far. the actual return is the email address from users out of the database. in fact there is no error if I implement both methods (the default one with UserModel user parameter - which is used, and the second send method which is not used. the second method is only implemented with an empty body. if I delete this method an error occurs that I have to implement all methods from the interface. so I should refactor the code to use only the second method which have to be implemented. the first method is optional (default). but the second method uses only Strings as params."},{"owner":{"account_id":6402799,"reputation":326,"user_id":4964941,"display_name":"tom"},"score":0,"creation_date":1662555931,"post_id":73635387,"comment_id":130032870,"body_markdown":"maybe do it the way it&#39;s done in the default implementation? see the `DefaultEmailProvider` class code on [github](https://github.com/keycloak/keycloak/blob/main/services/src/main/java/org/keycloak/email/DefaultEmailSenderProvider.java)","body":"maybe do it the way it&#39;s done in the default implementation? see the <code>DefaultEmailProvider</code> class code on <a href=\"https://github.com/keycloak/keycloak/blob/main/services/src/main/java/org/keycloak/email/DefaultEmailSenderProvider.java\" rel=\"nofollow noreferrer\">github</a>"},{"owner":{"account_id":26270693,"reputation":1,"user_id":19940631,"display_name":"gorecode"},"score":0,"creation_date":1662556928,"post_id":73635387,"comment_id":130033271,"body_markdown":"thanks for helping tom - I think this should work. thank you.","body":"thanks for helping tom - I think this should work. thank you."}],"owner":{"account_id":26270693,"reputation":1,"user_id":19940631,"display_name":"gorecode"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":56,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1662553098,"creation_date":1662553098,"question_id":73635387,"body_markdown":"I am learning Java and I hope someone can help me here with the following problem.\r\n\r\nSome information first:\r\n- Keycloak update v16.1.0 to v19.0.1\r\n- quarkus should not be used at the moment\r\n- interface &quot;EmailSenderProvider&quot; was implemented and worked with v16.1.0\r\n- EmailSenderProvider in v19.0.1 has two methods\r\n  - public void send (default) -&gt; parameters: UserModel user, 3x Strings\r\n  - public void send -&gt; parameters: 4x Strings\r\n\r\nThe problem now:\r\nv16.1.0 had only one method (UserModel user, 3x Strings). That is not working anymore, because I have to implement the method with 4x Strings. I should not import a method with an empty body.\r\n\r\nCode example:\r\n```\r\n  @Override\r\n  public void send(final Map&lt;String, String&gt; config, final UserModel user, final String subject, final String textBody, final String htmlBody)\r\n      throws EmailException {\r\n\r\n    try {\r\n      final String address = retrieveEmailAddress(user);\r\n```\r\n\r\nMethod &quot;retrieveEmailAddress&quot; take just an object and save the emailaddress into a String:\r\n```\r\n  protected String retrieveEmailAddress(final UserModel user) {\r\n    return user.getEmail();\r\n  }\r\n```\r\n\r\nI have no more ideas how to get the emailaddress out of an object into a String parameter...\r\n\r\nThanks in advance.\r\n\r\nHave a good day","title":"Java String parameter needed - object given","body":"<p>I am learning Java and I hope someone can help me here with the following problem.</p>\n<p>Some information first:</p>\n<ul>\n<li>Keycloak update v16.1.0 to v19.0.1</li>\n<li>quarkus should not be used at the moment</li>\n<li>interface &quot;EmailSenderProvider&quot; was implemented and worked with v16.1.0</li>\n<li>EmailSenderProvider in v19.0.1 has two methods\n<ul>\n<li>public void send (default) -&gt; parameters: UserModel user, 3x Strings</li>\n<li>public void send -&gt; parameters: 4x Strings</li>\n</ul>\n</li>\n</ul>\n<p>The problem now:\nv16.1.0 had only one method (UserModel user, 3x Strings). That is not working anymore, because I have to implement the method with 4x Strings. I should not import a method with an empty body.</p>\n<p>Code example:</p>\n<pre><code>  @Override\n  public void send(final Map&lt;String, String&gt; config, final UserModel user, final String subject, final String textBody, final String htmlBody)\n      throws EmailException {\n\n    try {\n      final String address = retrieveEmailAddress(user);\n</code></pre>\n<p>Method &quot;retrieveEmailAddress&quot; take just an object and save the emailaddress into a String:</p>\n<pre><code>  protected String retrieveEmailAddress(final UserModel user) {\n    return user.getEmail();\n  }\n</code></pre>\n<p>I have no more ideas how to get the emailaddress out of an object into a String parameter...</p>\n<p>Thanks in advance.</p>\n<p>Have a good day</p>\n"},{"tags":["java","spring","spring-boot","hibernate","stalestateexception"],"comments":[{"owner":{"account_id":3192259,"reputation":117599,"user_id":2696260,"display_name":"M. Deinum"},"score":1,"creation_date":1654592503,"post_id":72528084,"comment_id":128121433,"body_markdown":"Spring Boot 2.7 comes with H2 2.x which has breaking changes with previous versions of H2. Hence the issue you have is related to the H2 upgrade. Which is actually mentioned in the link you provide and mentioned as being **backward incompatible**.","body":"Spring Boot 2.7 comes with H2 2.x which has breaking changes with previous versions of H2. Hence the issue you have is related to the H2 upgrade. Which is actually mentioned in the link you provide and mentioned as being <b>backward incompatible</b>."},{"owner":{"account_id":5959730,"reputation":2887,"user_id":4685247,"accept_rate":69,"display_name":"user_4685247"},"score":0,"creation_date":1654593864,"post_id":72528084,"comment_id":128121889,"body_markdown":"@M.Deinum I only use the in-memory variant, so I believe this should not affect me, as no data is persisted on disk and schema is generated automatically","body":"@M.Deinum I only use the in-memory variant, so I believe this should not affect me, as no data is persisted on disk and schema is generated automatically"},{"owner":{"account_id":3192259,"reputation":117599,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1654599841,"post_id":72528084,"comment_id":128123951,"body_markdown":"It will as query language and keywords changed... It doesn&#39;t matter if it is the in-memory variant or not (I would argue that that is actually the most commonly used one).","body":"It will as query language and keywords changed... It doesn&#39;t matter if it is the in-memory variant or not (I would argue that that is actually the most commonly used one)."},{"owner":{"account_id":5959730,"reputation":2887,"user_id":4685247,"accept_rate":69,"display_name":"user_4685247"},"score":0,"creation_date":1654600781,"post_id":72528084,"comment_id":128124272,"body_markdown":"I understand, but since it&#39;s in-memory, but wouldn&#39;t ddl-auto and using JPQL avoid this issue entirelly?","body":"I understand, but since it&#39;s in-memory, but wouldn&#39;t ddl-auto and using JPQL avoid this issue entirelly?"},{"owner":{"account_id":3192259,"reputation":117599,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1654600829,"post_id":72528084,"comment_id":128124290,"body_markdown":"No, as that is only the schema part **not** the SQL part. I strongly suggest to read the migration guide for H2 (which is linked in the issue) and how you can set it to LEGACY mode. Also if that would work it would be backwards compatible, which H2 V2 isn&#39;t.","body":"No, as that is only the schema part <b>not</b> the SQL part. I strongly suggest to read the migration guide for H2 (which is linked in the issue) and how you can set it to LEGACY mode. Also if that would work it would be backwards compatible, which H2 V2 isn&#39;t."},{"owner":{"account_id":5959730,"reputation":2887,"user_id":4685247,"accept_rate":69,"display_name":"user_4685247"},"score":0,"creation_date":1654602489,"post_id":72528084,"comment_id":128124990,"body_markdown":"I tried enabling LEGACY mode, but the issue remains the same, I&#39;ve also tried to use hsqldb and I&#39;m seeing the same issues","body":"I tried enabling LEGACY mode, but the issue remains the same, I&#39;ve also tried to use hsqldb and I&#39;m seeing the same issues"},{"owner":{"account_id":3192259,"reputation":117599,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1654603739,"post_id":72528084,"comment_id":128125517,"body_markdown":"Although I still believe it is related to H2, I wonder are you managing other dependencies yourself (like hibernate etc.), could you add your `pom.xml`/`build.gradle` as well as the properties used to configure the database.","body":"Although I still believe it is related to H2, I wonder are you managing other dependencies yourself (like hibernate etc.), could you add your <code>pom.xml</code>/<code>build.gradle</code> as well as the properties used to configure the database."},{"owner":{"account_id":5959730,"reputation":2887,"user_id":4685247,"accept_rate":69,"display_name":"user_4685247"},"score":0,"creation_date":1654612441,"post_id":72528084,"comment_id":128128969,"body_markdown":"Updated with dependencies section","body":"Updated with dependencies section"},{"owner":{"account_id":3941187,"reputation":797,"user_id":3255540,"display_name":"Jan Mares"},"score":0,"creation_date":1654628489,"post_id":72528084,"comment_id":128134666,"body_markdown":"Ran into the same issue, would welcome, if the point about BC break would be the accepted answer - just saying :).","body":"Ran into the same issue, would welcome, if the point about BC break would be the accepted answer - just saying :)."},{"owner":{"account_id":5959730,"reputation":2887,"user_id":4685247,"accept_rate":69,"display_name":"user_4685247"},"score":0,"creation_date":1654851723,"post_id":72528084,"comment_id":128195651,"body_markdown":"@M.Deinum, looks like you were right, it was mostly H2 that caused the failures, but not everything is resolved by switching the db (see edit)","body":"@M.Deinum, looks like you were right, it was mostly H2 that caused the failures, but not everything is resolved by switching the db (see edit)"},{"owner":{"account_id":3192259,"reputation":117599,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1654862343,"post_id":72528084,"comment_id":128199384,"body_markdown":"What is the type of the ID field? I don&#39;t think HSQLDB supports UUID and will use a serialized form of the object, which won&#39;t match between different UUID instances. Hence nothing will get updated because there is nothing that matches. I would strongly suggest to use your actual database for testing as well with something like TestContainers that will prevent differences in HSQLDB/H2 to mess up your testing.","body":"What is the type of the ID field? I don&#39;t think HSQLDB supports UUID and will use a serialized form of the object, which won&#39;t match between different UUID instances. Hence nothing will get updated because there is nothing that matches. I would strongly suggest to use your actual database for testing as well with something like TestContainers that will prevent differences in HSQLDB/H2 to mess up your testing."},{"owner":{"account_id":285794,"reputation":8216,"user_id":584670,"accept_rate":69,"display_name":"Steve"},"score":0,"creation_date":1657988421,"post_id":72528084,"comment_id":128942671,"body_markdown":"Spring Boot 2.7.x is broken. H2 and Hibernate are incompatible. Stick with 2.6.x until they fix it.","body":"Spring Boot 2.7.x is broken. H2 and Hibernate are incompatible. Stick with 2.6.x until they fix it."}],"answers":[{"tags":[],"owner":{"account_id":2288194,"reputation":7556,"user_id":2011748,"display_name":"Peter Keller"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1662552852,"creation_date":1662552852,"answer_id":73635336,"question_id":72528084,"body_markdown":"With Spring Boot 2.7.1 the h2 database version has changed to v2.1.214 which may result into failling tests, see https://hibernate.atlassian.net/browse/HHH-15373.\r\n\r\n**Solution:** Add `columnDefinition=&quot;UUID&quot;` to the `@Column` annotation\r\n\r\nE.g., with a primary key definition for an entity like this:\r\n\r\n```java\r\n@Id\r\n@GeneratedValue(generator = &quot;UUID&quot;)\r\n@GenericGenerator(name = &quot;UUID&quot;, strategy = &quot;org.hibernate.id.UUIDGenerator&quot;)\r\n@Column(name = COLUMN_UUID, updatable = false, nullable = false)\r\nUUID uUID;\r\n```\r\n\r\nChange the column annotation to:\r\n\r\n```java\r\n@Column(name = COLUMN_UUID, updatable = false, nullable = false, columnDefinition=&quot;UUID&quot;)\r\n```\r\n","title":"StateStateException in SpringBoot 2.7.0 SpringBootTest","body":"<p>With Spring Boot 2.7.1 the h2 database version has changed to v2.1.214 which may result into failling tests, see <a href=\"https://hibernate.atlassian.net/browse/HHH-15373\" rel=\"nofollow noreferrer\">https://hibernate.atlassian.net/browse/HHH-15373</a>.</p>\n<p><strong>Solution:</strong> Add <code>columnDefinition=&quot;UUID&quot;</code> to the <code>@Column</code> annotation</p>\n<p>E.g., with a primary key definition for an entity like this:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Id\n@GeneratedValue(generator = &quot;UUID&quot;)\n@GenericGenerator(name = &quot;UUID&quot;, strategy = &quot;org.hibernate.id.UUIDGenerator&quot;)\n@Column(name = COLUMN_UUID, updatable = false, nullable = false)\nUUID uUID;\n</code></pre>\n<p>Change the column annotation to:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Column(name = COLUMN_UUID, updatable = false, nullable = false, columnDefinition=&quot;UUID&quot;)\n</code></pre>\n"}],"owner":{"account_id":5959730,"reputation":2887,"user_id":4685247,"accept_rate":69,"display_name":"user_4685247"},"comment_count":12,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":967,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1662552852,"creation_date":1654590262,"question_id":72528084,"body_markdown":"I am trying to upgrade Spring Boot server from 2.6.8 to 2.7.0 and when running tests I&#39;m getting the following exception that didn&#39;t appear on 2.6.8:\r\n\r\n```\r\norg.springframework.orm.ObjectOptimisticLockingFailureException: Batch update returned unexpected row count from update [0]; actual row count: 0; expected: 1; statement executed: delete from account where id=?; nested exception is org.hibernate.StaleStateException: Batch update returned unexpected row count from update [0]; actual row count: 0; expected: 1; statement executed: delete from account where id=?\r\n\r\n\tat org.springframework.orm.jpa.vendor.HibernateJpaDialect.convertHibernateAccessException(HibernateJpaDialect.java:318)\r\n\tat org.springframework.orm.jpa.vendor.HibernateJpaDialect.translateExceptionIfPossible(HibernateJpaDialect.java:233)\r\n\tat org.springframework.orm.jpa.JpaTransactionManager.doCommit(JpaTransactionManager.java:566)\r\n\tat org.springframework.transaction.support.AbstractPlatformTransactionManager.processCommit(AbstractPlatformTransactionManager.java:743)\r\n\tat org.springframework.transaction.support.AbstractPlatformTransactionManager.commit(AbstractPlatformTransactionManager.java:711)\r\n\tat org.springframework.transaction.interceptor.TransactionAspectSupport.commitTransactionAfterReturning(TransactionAspectSupport.java:654)\r\n\tat org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:407)\r\n\tat org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)\r\n\tat org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:137)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)\r\n\tat org.springframework.data.jpa.repository.support.CrudMethodMetadataPostProcessor$CrudMethodMetadataPopulatingMethodInterceptor.invoke(CrudMethodMetadataPostProcessor.java:174)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)\r\n\tat org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)\r\n\tat org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:215)\r\n\tat jdk.proxy2/jdk.proxy2.$Proxy192.deleteAll(Unknown Source)\r\n\tat si.richter.gedeonrichter.account.password.ResetPasswordServiceTest.tearDown(ResetPasswordServiceTest.java:61)\r\n\tat java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:577)\r\n\tat org.junit.platform.commons.util.ReflectionUtils.invokeMethod(ReflectionUtils.java:725)\r\n\tat org.junit.jupiter.engine.execution.MethodInvocation.proceed(MethodInvocation.java:60)\r\n\tat org.junit.jupiter.engine.execution.InvocationInterceptorChain$ValidatingInvocation.proceed(InvocationInterceptorChain.java:131)\r\n\tat org.junit.jupiter.engine.extension.TimeoutExtension.intercept(TimeoutExtension.java:149)\r\n\tat org.junit.jupiter.engine.extension.TimeoutExtension.interceptLifecycleMethod(TimeoutExtension.java:126)\r\n\tat org.junit.jupiter.engine.extension.TimeoutExtension.interceptAfterEachMethod(TimeoutExtension.java:108)\r\n\tat org.junit.jupiter.engine.execution.ExecutableInvoker$ReflectiveInterceptorCall.lambda$ofVoidMethod$0(ExecutableInvoker.java:115)\r\n\tat org.junit.jupiter.engine.execution.ExecutableInvoker.lambda$invoke$0(ExecutableInvoker.java:105)\r\n\tat org.junit.jupiter.engine.execution.InvocationInterceptorChain$InterceptedInvocation.proceed(InvocationInterceptorChain.java:106)\r\n\tat org.junit.jupiter.engine.execution.InvocationInterceptorChain.proceed(InvocationInterceptorChain.java:64)\r\n\tat org.junit.jupiter.engine.execution.InvocationInterceptorChain.chainAndInvoke(InvocationInterceptorChain.java:45)\r\n\tat org.junit.jupiter.engine.execution.InvocationInterceptorChain.invoke(InvocationInterceptorChain.java:37)\r\n\tat org.junit.jupiter.engine.execution.ExecutableInvoker.invoke(ExecutableInvoker.java:104)\r\n\tat org.junit.jupiter.engine.execution.ExecutableInvoker.invoke(ExecutableInvoker.java:98)\r\n\tat org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.invokeMethodInExtensionContext(ClassBasedTestDescriptor.java:506)\r\n\tat org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$synthesizeAfterEachMethodAdapter$22(ClassBasedTestDescriptor.java:496)\r\n\tat org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$invokeAfterEachMethods$10(TestMethodTestDescriptor.java:240)\r\n\tat org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$invokeAllAfterMethodsOrCallbacks$13(TestMethodTestDescriptor.java:273)\r\n\tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n\tat org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$invokeAllAfterMethodsOrCallbacks$14(TestMethodTestDescriptor.java:273)\r\n\tat java.base/java.util.ArrayList.forEach(ArrayList.java:1511)\r\n\tat org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.invokeAllAfterMethodsOrCallbacks(TestMethodTestDescriptor.java:272)\r\n\tat org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.invokeAfterEachMethods(TestMethodTestDescriptor.java:238)\r\n\tat org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:139)\r\n\tat org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:66)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:151)\r\n\tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)\r\n\tat org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)\r\n\tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)\r\n\tat java.base/java.util.ArrayList.forEach(ArrayList.java:1511)\r\n\tat org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)\r\n\tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)\r\n\tat org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)\r\n\tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)\r\n\tat java.base/java.util.ArrayList.forEach(ArrayList.java:1511)\r\n\tat org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)\r\n\tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)\r\n\tat org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)\r\n\tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)\r\n\tat org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)\r\n\tat org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)\r\n\tat org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)\r\n\tat org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:107)\r\n\tat org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:88)\r\n\tat org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:54)\r\n\tat org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:67)\r\n\tat org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:52)\r\n\tat org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:114)\r\n\tat org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:86)\r\n\tat org.junit.platform.launcher.core.DefaultLauncherSession$DelegatingLauncher.execute(DefaultLauncherSession.java:86)\r\n\tat org.junit.platform.launcher.core.SessionPerRequestLauncher.execute(SessionPerRequestLauncher.java:53)\r\n\tat com.intellij.junit5.JUnit5IdeaTestRunner.startRunnerWithArgs(JUnit5IdeaTestRunner.java:71)\r\n\tat com.intellij.rt.junit.IdeaTestRunner$Repeater$1.execute(IdeaTestRunner.java:38)\r\n\tat com.intellij.rt.execution.junit.TestsRepeater.repeat(TestsRepeater.java:11)\r\n\tat com.intellij.rt.junit.IdeaTestRunner$Repeater.startRunnerWithArgs(IdeaTestRunner.java:35)\r\n\tat com.intellij.rt.junit.JUnitStarter.prepareStreamsAndStart(JUnitStarter.java:235)\r\n\tat com.intellij.rt.junit.JUnitStarter.main(JUnitStarter.java:54)\r\nCaused by: org.hibernate.StaleStateException: Batch update returned unexpected row count from update [0]; actual row count: 0; expected: 1; statement executed: delete from account where id=?\r\n\tat org.hibernate.jdbc.Expectations$BasicExpectation.checkBatched(Expectations.java:67)\r\n\tat org.hibernate.jdbc.Expectations$BasicExpectation.verifyOutcome(Expectations.java:54)\r\n\tat org.hibernate.engine.jdbc.batch.internal.NonBatchingBatch.addToBatch(NonBatchingBatch.java:47)\r\n\tat org.hibernate.persister.entity.AbstractEntityPersister.delete(AbstractEntityPersister.java:3698)\r\n\tat org.hibernate.persister.entity.AbstractEntityPersister.delete(AbstractEntityPersister.java:3958)\r\n\tat org.hibernate.action.internal.EntityDeleteAction.execute(EntityDeleteAction.java:123)\r\n\tat org.hibernate.engine.spi.ActionQueue.executeActions(ActionQueue.java:604)\r\n\tat org.hibernate.engine.spi.ActionQueue.lambda$executeActions$1(ActionQueue.java:478)\r\n\tat java.base/java.util.LinkedHashMap.forEach(LinkedHashMap.java:721)\r\n\tat org.hibernate.engine.spi.ActionQueue.executeActions(ActionQueue.java:475)\r\n\tat org.hibernate.event.internal.AbstractFlushingEventListener.performExecutions(AbstractFlushingEventListener.java:344)\r\n\tat org.hibernate.event.internal.DefaultFlushEventListener.onFlush(DefaultFlushEventListener.java:40)\r\n\tat org.hibernate.event.service.internal.EventListenerGroupImpl.fireEventOnEachListener(EventListenerGroupImpl.java:107)\r\n\tat org.hibernate.internal.SessionImpl.doFlush(SessionImpl.java:1407)\r\n\tat org.hibernate.internal.SessionImpl.managedFlush(SessionImpl.java:489)\r\n\tat org.hibernate.internal.SessionImpl.flushBeforeTransactionCompletion(SessionImpl.java:3290)\r\n\tat org.hibernate.internal.SessionImpl.beforeTransactionCompletion(SessionImpl.java:2425)\r\n\tat org.hibernate.engine.jdbc.internal.JdbcCoordinatorImpl.beforeTransactionCompletion(JdbcCoordinatorImpl.java:449)\r\n\tat org.hibernate.resource.transaction.backend.jdbc.internal.JdbcResourceLocalTransactionCoordinatorImpl.beforeCompletionCallback(JdbcResourceLocalTransactionCoordinatorImpl.java:183)\r\n\tat org.hibernate.resource.transaction.backend.jdbc.internal.JdbcResourceLocalTransactionCoordinatorImpl.access$300(JdbcResourceLocalTransactionCoordinatorImpl.java:40)\r\n\tat org.hibernate.resource.transaction.backend.jdbc.internal.JdbcResourceLocalTransactionCoordinatorImpl$TransactionDriverControlImpl.commit(JdbcResourceLocalTransactionCoordinatorImpl.java:281)\r\n\tat org.hibernate.engine.transaction.internal.TransactionImpl.commit(TransactionImpl.java:101)\r\n\tat org.springframework.orm.jpa.JpaTransactionManager.doCommit(JpaTransactionManager.java:562)\r\n\t... 88 more\r\n```\r\n\r\nThe code that causes the error is the following:\r\n\r\n```java\r\n@Retention(RetentionPolicy.RUNTIME)\r\n@Target(ElementType.TYPE)\r\n@SpringBootTest\r\n@ActiveProfiles\r\npublic @interface ApplicationTest {\r\n    @SuppressWarnings(&quot;unused&quot;)\r\n    @AliasFor(annotation = ActiveProfiles.class, attribute = &quot;profiles&quot;)\r\n    String[] activeProfiles() default {&quot;test&quot;};\r\n}\r\n\r\n@ApplicationTest\r\nclass ResetPasswordServiceTest {\r\n    // Autowires, mocks ...\r\n\r\n    @BeforeEach\r\n    void setUp() {\r\n        var account = new AccountEntity();\r\n        accountRepository.save(account); // repository is @Autowired, using h2\r\n    }\r\n\r\n    @AfterEach\r\n    void tearDown() {\r\n        accountRepository.deleteAll(); // &lt;- this is where the exception happens\r\n    }\r\n\r\n    @Test\r\n    void resetPasswordSucceedsWithInvalidEmail() {\r\n        passwordService.resetPassword(make()); // reads from account repository internally\r\n    }\r\n\r\n    // More tests\r\n}\r\n```\r\n\r\nIt seems it fails for other tests as well. Annotating the test with @Transactional fixes (some) of these issues, but causes different issues (such as relations not being fetched). I do not see any breaking changes in [this link][1], and trying to find the exception elsewhere results in a lot of unrelated issues, how can I fix this?\r\n\r\nThe dependencies I use:\r\n\r\n```xml\r\n    &lt;!-- version: &lt;thymeleaf.version&gt;3.0.15.RELEASE&lt;/thymeleaf.version&gt; --&gt;\r\n\r\n\t&lt;dependencies&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-security&lt;/artifactId&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-validation&lt;/artifactId&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-mail&lt;/artifactId&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-actuator&lt;/artifactId&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-configuration-processor&lt;/artifactId&gt;\r\n\t\t\t&lt;optional&gt;true&lt;/optional&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;software.amazon.awssdk&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;s3&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;2.17.191&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;io.awspring.cloud&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-cloud-starter-aws-ses&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;2.4.1&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.thymeleaf&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;thymeleaf&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;${thymeleaf.version}&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.thymeleaf&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;thymeleaf-spring5&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;${thymeleaf.version}&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.flywaydb&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;flyway-core&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;8.5.11&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.jsoup&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;jsoup&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;1.14.3&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;com.auth0&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;java-jwt&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;3.19.2&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.postgresql&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;postgresql&lt;/artifactId&gt;\r\n\t\t\t&lt;scope&gt;runtime&lt;/scope&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\n\t\t&lt;!-- Swagger --&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springdoc&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;springdoc-openapi-ui&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;1.6.9&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\n\t\t&lt;!-- Testing --&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;com.h2database&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;h2&lt;/artifactId&gt;\r\n\t\t\t&lt;scope&gt;test&lt;/scope&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\r\n\t\t\t&lt;scope&gt;test&lt;/scope&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.security&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-security-test&lt;/artifactId&gt;\r\n\t\t\t&lt;scope&gt;test&lt;/scope&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t&lt;/dependencies&gt;\r\n```\r\n\r\nEDIT:\r\nI&#39;ve managed to fix most issues by using hsqldb instead, but there&#39;s one test that still seems to be failing:\r\n\r\n```java\r\n@Modifying(clearAutomatically = true)\r\n@Query(&quot;&quot;&quot;\r\n    UPDATE AccountEntity\r\n    SET email = :email\r\n    WHERE id = :id AND isApproved = false\r\n    &quot;&quot;&quot;)\r\nint setUserEmail(@Param(&quot;id&quot;) UUID id, @Param(&quot;email&quot;) String email);\r\n```\r\n\r\nLogs show that the statement is executed and the variables seem to be bound correctly, but the statement does not perform an update (and returns 0)\r\n\r\n  [1]: https://github.com/spring-projects/spring-boot/wiki/Spring-Boot-2.7-Release-Notes#upgrading-from-spring-boot-26","title":"StateStateException in SpringBoot 2.7.0 SpringBootTest","body":"<p>I am trying to upgrade Spring Boot server from 2.6.8 to 2.7.0 and when running tests I'm getting the following exception that didn't appear on 2.6.8:</p>\n<pre><code>org.springframework.orm.ObjectOptimisticLockingFailureException: Batch update returned unexpected row count from update [0]; actual row count: 0; expected: 1; statement executed: delete from account where id=?; nested exception is org.hibernate.StaleStateException: Batch update returned unexpected row count from update [0]; actual row count: 0; expected: 1; statement executed: delete from account where id=?\n\n    at org.springframework.orm.jpa.vendor.HibernateJpaDialect.convertHibernateAccessException(HibernateJpaDialect.java:318)\n    at org.springframework.orm.jpa.vendor.HibernateJpaDialect.translateExceptionIfPossible(HibernateJpaDialect.java:233)\n    at org.springframework.orm.jpa.JpaTransactionManager.doCommit(JpaTransactionManager.java:566)\n    at org.springframework.transaction.support.AbstractPlatformTransactionManager.processCommit(AbstractPlatformTransactionManager.java:743)\n    at org.springframework.transaction.support.AbstractPlatformTransactionManager.commit(AbstractPlatformTransactionManager.java:711)\n    at org.springframework.transaction.interceptor.TransactionAspectSupport.commitTransactionAfterReturning(TransactionAspectSupport.java:654)\n    at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:407)\n    at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)\n    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)\n    at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:137)\n    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)\n    at org.springframework.data.jpa.repository.support.CrudMethodMetadataPostProcessor$CrudMethodMetadataPopulatingMethodInterceptor.invoke(CrudMethodMetadataPostProcessor.java:174)\n    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)\n    at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97)\n    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)\n    at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:215)\n    at jdk.proxy2/jdk.proxy2.$Proxy192.deleteAll(Unknown Source)\n    at si.richter.gedeonrichter.account.password.ResetPasswordServiceTest.tearDown(ResetPasswordServiceTest.java:61)\n    at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)\n    at java.base/java.lang.reflect.Method.invoke(Method.java:577)\n    at org.junit.platform.commons.util.ReflectionUtils.invokeMethod(ReflectionUtils.java:725)\n    at org.junit.jupiter.engine.execution.MethodInvocation.proceed(MethodInvocation.java:60)\n    at org.junit.jupiter.engine.execution.InvocationInterceptorChain$ValidatingInvocation.proceed(InvocationInterceptorChain.java:131)\n    at org.junit.jupiter.engine.extension.TimeoutExtension.intercept(TimeoutExtension.java:149)\n    at org.junit.jupiter.engine.extension.TimeoutExtension.interceptLifecycleMethod(TimeoutExtension.java:126)\n    at org.junit.jupiter.engine.extension.TimeoutExtension.interceptAfterEachMethod(TimeoutExtension.java:108)\n    at org.junit.jupiter.engine.execution.ExecutableInvoker$ReflectiveInterceptorCall.lambda$ofVoidMethod$0(ExecutableInvoker.java:115)\n    at org.junit.jupiter.engine.execution.ExecutableInvoker.lambda$invoke$0(ExecutableInvoker.java:105)\n    at org.junit.jupiter.engine.execution.InvocationInterceptorChain$InterceptedInvocation.proceed(InvocationInterceptorChain.java:106)\n    at org.junit.jupiter.engine.execution.InvocationInterceptorChain.proceed(InvocationInterceptorChain.java:64)\n    at org.junit.jupiter.engine.execution.InvocationInterceptorChain.chainAndInvoke(InvocationInterceptorChain.java:45)\n    at org.junit.jupiter.engine.execution.InvocationInterceptorChain.invoke(InvocationInterceptorChain.java:37)\n    at org.junit.jupiter.engine.execution.ExecutableInvoker.invoke(ExecutableInvoker.java:104)\n    at org.junit.jupiter.engine.execution.ExecutableInvoker.invoke(ExecutableInvoker.java:98)\n    at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.invokeMethodInExtensionContext(ClassBasedTestDescriptor.java:506)\n    at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$synthesizeAfterEachMethodAdapter$22(ClassBasedTestDescriptor.java:496)\n    at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$invokeAfterEachMethods$10(TestMethodTestDescriptor.java:240)\n    at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$invokeAllAfterMethodsOrCallbacks$13(TestMethodTestDescriptor.java:273)\n    at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\n    at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$invokeAllAfterMethodsOrCallbacks$14(TestMethodTestDescriptor.java:273)\n    at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)\n    at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.invokeAllAfterMethodsOrCallbacks(TestMethodTestDescriptor.java:272)\n    at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.invokeAfterEachMethods(TestMethodTestDescriptor.java:238)\n    at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:139)\n    at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:66)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:151)\n    at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)\n    at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)\n    at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)\n    at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)\n    at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)\n    at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)\n    at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)\n    at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)\n    at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)\n    at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)\n    at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)\n    at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)\n    at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)\n    at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)\n    at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)\n    at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)\n    at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:107)\n    at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:88)\n    at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:54)\n    at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:67)\n    at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:52)\n    at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:114)\n    at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:86)\n    at org.junit.platform.launcher.core.DefaultLauncherSession$DelegatingLauncher.execute(DefaultLauncherSession.java:86)\n    at org.junit.platform.launcher.core.SessionPerRequestLauncher.execute(SessionPerRequestLauncher.java:53)\n    at com.intellij.junit5.JUnit5IdeaTestRunner.startRunnerWithArgs(JUnit5IdeaTestRunner.java:71)\n    at com.intellij.rt.junit.IdeaTestRunner$Repeater$1.execute(IdeaTestRunner.java:38)\n    at com.intellij.rt.execution.junit.TestsRepeater.repeat(TestsRepeater.java:11)\n    at com.intellij.rt.junit.IdeaTestRunner$Repeater.startRunnerWithArgs(IdeaTestRunner.java:35)\n    at com.intellij.rt.junit.JUnitStarter.prepareStreamsAndStart(JUnitStarter.java:235)\n    at com.intellij.rt.junit.JUnitStarter.main(JUnitStarter.java:54)\nCaused by: org.hibernate.StaleStateException: Batch update returned unexpected row count from update [0]; actual row count: 0; expected: 1; statement executed: delete from account where id=?\n    at org.hibernate.jdbc.Expectations$BasicExpectation.checkBatched(Expectations.java:67)\n    at org.hibernate.jdbc.Expectations$BasicExpectation.verifyOutcome(Expectations.java:54)\n    at org.hibernate.engine.jdbc.batch.internal.NonBatchingBatch.addToBatch(NonBatchingBatch.java:47)\n    at org.hibernate.persister.entity.AbstractEntityPersister.delete(AbstractEntityPersister.java:3698)\n    at org.hibernate.persister.entity.AbstractEntityPersister.delete(AbstractEntityPersister.java:3958)\n    at org.hibernate.action.internal.EntityDeleteAction.execute(EntityDeleteAction.java:123)\n    at org.hibernate.engine.spi.ActionQueue.executeActions(ActionQueue.java:604)\n    at org.hibernate.engine.spi.ActionQueue.lambda$executeActions$1(ActionQueue.java:478)\n    at java.base/java.util.LinkedHashMap.forEach(LinkedHashMap.java:721)\n    at org.hibernate.engine.spi.ActionQueue.executeActions(ActionQueue.java:475)\n    at org.hibernate.event.internal.AbstractFlushingEventListener.performExecutions(AbstractFlushingEventListener.java:344)\n    at org.hibernate.event.internal.DefaultFlushEventListener.onFlush(DefaultFlushEventListener.java:40)\n    at org.hibernate.event.service.internal.EventListenerGroupImpl.fireEventOnEachListener(EventListenerGroupImpl.java:107)\n    at org.hibernate.internal.SessionImpl.doFlush(SessionImpl.java:1407)\n    at org.hibernate.internal.SessionImpl.managedFlush(SessionImpl.java:489)\n    at org.hibernate.internal.SessionImpl.flushBeforeTransactionCompletion(SessionImpl.java:3290)\n    at org.hibernate.internal.SessionImpl.beforeTransactionCompletion(SessionImpl.java:2425)\n    at org.hibernate.engine.jdbc.internal.JdbcCoordinatorImpl.beforeTransactionCompletion(JdbcCoordinatorImpl.java:449)\n    at org.hibernate.resource.transaction.backend.jdbc.internal.JdbcResourceLocalTransactionCoordinatorImpl.beforeCompletionCallback(JdbcResourceLocalTransactionCoordinatorImpl.java:183)\n    at org.hibernate.resource.transaction.backend.jdbc.internal.JdbcResourceLocalTransactionCoordinatorImpl.access$300(JdbcResourceLocalTransactionCoordinatorImpl.java:40)\n    at org.hibernate.resource.transaction.backend.jdbc.internal.JdbcResourceLocalTransactionCoordinatorImpl$TransactionDriverControlImpl.commit(JdbcResourceLocalTransactionCoordinatorImpl.java:281)\n    at org.hibernate.engine.transaction.internal.TransactionImpl.commit(TransactionImpl.java:101)\n    at org.springframework.orm.jpa.JpaTransactionManager.doCommit(JpaTransactionManager.java:562)\n    ... 88 more\n</code></pre>\n<p>The code that causes the error is the following:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Retention(RetentionPolicy.RUNTIME)\n@Target(ElementType.TYPE)\n@SpringBootTest\n@ActiveProfiles\npublic @interface ApplicationTest {\n    @SuppressWarnings(&quot;unused&quot;)\n    @AliasFor(annotation = ActiveProfiles.class, attribute = &quot;profiles&quot;)\n    String[] activeProfiles() default {&quot;test&quot;};\n}\n\n@ApplicationTest\nclass ResetPasswordServiceTest {\n    // Autowires, mocks ...\n\n    @BeforeEach\n    void setUp() {\n        var account = new AccountEntity();\n        accountRepository.save(account); // repository is @Autowired, using h2\n    }\n\n    @AfterEach\n    void tearDown() {\n        accountRepository.deleteAll(); // &lt;- this is where the exception happens\n    }\n\n    @Test\n    void resetPasswordSucceedsWithInvalidEmail() {\n        passwordService.resetPassword(make()); // reads from account repository internally\n    }\n\n    // More tests\n}\n</code></pre>\n<p>It seems it fails for other tests as well. Annotating the test with @Transactional fixes (some) of these issues, but causes different issues (such as relations not being fetched). I do not see any breaking changes in <a href=\"https://github.com/spring-projects/spring-boot/wiki/Spring-Boot-2.7-Release-Notes#upgrading-from-spring-boot-26\" rel=\"nofollow noreferrer\">this link</a>, and trying to find the exception elsewhere results in a lot of unrelated issues, how can I fix this?</p>\n<p>The dependencies I use:</p>\n<pre class=\"lang-xml prettyprint-override\"><code>    &lt;!-- version: &lt;thymeleaf.version&gt;3.0.15.RELEASE&lt;/thymeleaf.version&gt; --&gt;\n\n    &lt;dependencies&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-security&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-validation&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-mail&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-actuator&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-configuration-processor&lt;/artifactId&gt;\n            &lt;optional&gt;true&lt;/optional&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;software.amazon.awssdk&lt;/groupId&gt;\n            &lt;artifactId&gt;s3&lt;/artifactId&gt;\n            &lt;version&gt;2.17.191&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;io.awspring.cloud&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-cloud-starter-aws-ses&lt;/artifactId&gt;\n            &lt;version&gt;2.4.1&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.thymeleaf&lt;/groupId&gt;\n            &lt;artifactId&gt;thymeleaf&lt;/artifactId&gt;\n            &lt;version&gt;${thymeleaf.version}&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.thymeleaf&lt;/groupId&gt;\n            &lt;artifactId&gt;thymeleaf-spring5&lt;/artifactId&gt;\n            &lt;version&gt;${thymeleaf.version}&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.flywaydb&lt;/groupId&gt;\n            &lt;artifactId&gt;flyway-core&lt;/artifactId&gt;\n            &lt;version&gt;8.5.11&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.jsoup&lt;/groupId&gt;\n            &lt;artifactId&gt;jsoup&lt;/artifactId&gt;\n            &lt;version&gt;1.14.3&lt;/version&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;com.auth0&lt;/groupId&gt;\n            &lt;artifactId&gt;java-jwt&lt;/artifactId&gt;\n            &lt;version&gt;3.19.2&lt;/version&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.postgresql&lt;/groupId&gt;\n            &lt;artifactId&gt;postgresql&lt;/artifactId&gt;\n            &lt;scope&gt;runtime&lt;/scope&gt;\n        &lt;/dependency&gt;\n\n        &lt;!-- Swagger --&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springdoc&lt;/groupId&gt;\n            &lt;artifactId&gt;springdoc-openapi-ui&lt;/artifactId&gt;\n            &lt;version&gt;1.6.9&lt;/version&gt;\n        &lt;/dependency&gt;\n\n        &lt;!-- Testing --&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;com.h2database&lt;/groupId&gt;\n            &lt;artifactId&gt;h2&lt;/artifactId&gt;\n            &lt;scope&gt;test&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\n            &lt;scope&gt;test&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.security&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-security-test&lt;/artifactId&gt;\n            &lt;scope&gt;test&lt;/scope&gt;\n        &lt;/dependency&gt;\n    &lt;/dependencies&gt;\n</code></pre>\n<p>EDIT:\nI've managed to fix most issues by using hsqldb instead, but there's one test that still seems to be failing:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Modifying(clearAutomatically = true)\n@Query(&quot;&quot;&quot;\n    UPDATE AccountEntity\n    SET email = :email\n    WHERE id = :id AND isApproved = false\n    &quot;&quot;&quot;)\nint setUserEmail(@Param(&quot;id&quot;) UUID id, @Param(&quot;email&quot;) String email);\n</code></pre>\n<p>Logs show that the statement is executed and the variables seem to be bound correctly, but the statement does not perform an update (and returns 0)</p>\n"},{"tags":["java","android","opencv","computer-vision"],"comments":[{"owner":{"account_id":8277452,"reputation":584,"user_id":6223135,"display_name":"Garvita Tiwari"},"score":1,"creation_date":1493617485,"post_id":43714659,"comment_id":74473276,"body_markdown":"Can you add the codes?","body":"Can you add the codes?"},{"owner":{"account_id":10802550,"reputation":1,"user_id":7945938,"display_name":"Steven.Hu"},"score":0,"creation_date":1493621748,"post_id":43714659,"comment_id":74474382,"body_markdown":"Of course! Here it is","body":"Of course! Here it is"},{"owner":{"account_id":6761702,"reputation":309,"user_id":5717898,"accept_rate":50,"display_name":"Optimus 1072"},"score":0,"creation_date":1493704592,"post_id":43714659,"comment_id":74505114,"body_markdown":"Can you please share the intermediate results like Calibration error, reprojection error, feature matching etc... because the pipeline for 3D reconstruction has many steps and error in one step will compound the error a lot.","body":"Can you please share the intermediate results like Calibration error, reprojection error, feature matching etc... because the pipeline for 3D reconstruction has many steps and error in one step will compound the error a lot."}],"answers":[{"tags":[],"owner":{"account_id":1540429,"reputation":11380,"user_id":1435240,"display_name":"Francesco Callari"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1493683633,"creation_date":1493683633,"answer_id":43728200,"question_id":43714659,"body_markdown":"Way too many things that could be wrong there. The bad triangulations you see could be the effect of false matches, or or of so-so matches with a very short baseline and nearly parallel rays. \r\n\r\nYou need to visualize the triangulated matches reprojecting them back into the images to see what&#39;s going on.   ","title":"3d point cloud via multiple images turns out to be several lines","body":"<p>Way too many things that could be wrong there. The bad triangulations you see could be the effect of false matches, or or of so-so matches with a very short baseline and nearly parallel rays. </p>\n\n<p>You need to visualize the triangulated matches reprojecting them back into the images to see what's going on.   </p>\n"}],"owner":{"account_id":10802550,"reputation":1,"user_id":7945938,"display_name":"Steven.Hu"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":196,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1662552672,"creation_date":1493616219,"question_id":43714659,"body_markdown":"[3D point cloud shows in Matlab][1]\r\n    \r\n[Original object][2]\r\n    \r\n    \r\n [1]: https://i.stack.imgur.com/xF8gx.png\r\n [2]: https://i.stack.imgur.com/OEgdB.jpg\r\nThis is my Android app which does 3D reconstruction on cell phone. The result of \r\nthe reconstruction is like this. The 3D points are lining up and stretching to different directions...I`ve tried for days and cannot solve this problem. Thank you in advance! The feature and matching algorithm is Pyramid_ORB\r\n\r\n            //out1 and out2 are two ArrayList that contain all the filtered feature points\r\n            MatOfPoint2f matpoints1 = new MatOfPoint2f(out1.toArray(new Point[0]));\r\n            MatOfPoint2f matpoints2 = new MatOfPoint2f(out2.toArray(new Point[0]));\r\n    \r\n            Size msize = new Size();\r\n            msize.height=3;\r\n            msize.width=3;\r\n            Mat cam = new Mat(msize,CV_64FC1);\r\n            double arr[] = {853.53285,0,476.32870,0,1132.35572,363.97813,0,0,1};\r\n            cam.put(0,0,arr);\r\n            msize.height=4;\r\n            msize.width=1;\r\n            Mat dist = new Mat(msize, CV_64FC1);\r\n            double arr2[] = {0.08580, -0.22893, -0.00541, -0.00221};\r\n            dist.put(0,0,arr2);\r\n            MatOfDouble distCoeffs = new MatOfDouble(dist);\r\n            Mat outpoints = new Mat();\r\n            //if it were the first two picture then use essential matrix to get RT and point cloud\r\n            if(count &lt; 2){\r\n                if(pointsize &lt; 5){\r\n                    count = 0;\r\n                }\r\n                else{\r\n                    Mat essen = Calib3d.findEssentialMat(matpoints1, matpoints2, cam);\r\n                    Mat rot2 = new Mat();\r\n                    Mat t2 = new Mat();\r\n                    ArrayList&lt;Mat&gt; matlist = new ArrayList&lt;Mat&gt;();\r\n                    ArrayList&lt;Mat&gt; pRes = new ArrayList&lt;Mat&gt;();\r\n                    PointCloud pc = new PointCloud(essen, pointsize);\r\n                    pRes = pc.getPointCloud(cam,reR,reT,img1,img2);\r\n                    flag = true;\r\n                    //The Projection matrix save for next triangulation, outpoint is the Mat of point cloud\r\n                    reProj = pRes.get(0);\r\n                    outpoints = pRes.get(1);\r\n                }\r\n            }\r\n\r\n            else{\r\n                //Else use PnP to get R and t matrix\r\n                int indexOfCloud = cloud.size()-1;\r\n                ArrayList&lt;Integer&gt; queryIdx = new ArrayList&lt;&gt;();\r\n                ArrayList&lt;Integer&gt; out2Idx = new ArrayList&lt;&gt;();\r\n                Mat lastOut3Dpoint = cloud.get(indexOfCloud);\r\n                //This loop get the index of 3d point in last 3d point cloud\r\n                //and the corresponding 2d coordinates of the previous right image\r\n                //out1 and out2 here have been re-ordered before to let out1.get(i) is corresponse to out2.get(i)\r\n                for(int i = 0;i &lt; out1.size();i++){\r\n                    Point tempP = out1.get(i);\r\n                    Integer n = lastPoint.get(tempP);\r\n                    if(n!=null){\r\n                        queryIdx.add(n);\r\n                        out2Idx.add(i);\r\n                    }\r\n                }\r\n                //Break here if out2Idx.size() &lt; 4, then use new pic\r\n                if(out2Idx.size() &lt; 4){\r\n                    flag = false;\r\n                    Log.d(&quot;out2idxsize&quot;, out2Idx.size()+&quot;&quot;);\r\n                }\r\n    \r\n                //end of renew\r\n                else{\r\n                    Toast.makeText(getApplicationContext(), &quot;Enough Point for PnP&quot;, Toast.LENGTH_SHORT).show();\r\n    \r\n                    List&lt;Point3&gt; inputP = new ArrayList&lt;Point3&gt;();\r\n                    double tem[] = new double[3];\r\n                    for(int i = 0;i&lt;queryIdx.size();i++){\r\n                        Point3 p3 = new Point3();\r\n                        lastOut3Dpoint.col(queryIdx.get(i)).get(0,0,tem);\r\n                        p3.x=tem[0];\r\n                        p3.y=tem[1];\r\n                        p3.z=tem[2];\r\n                        inputP.add(i,p3);\r\n                    }\r\n                    MatOfPoint3f pt = new MatOfPoint3f();\r\n                    pt.fromList(inputP);\r\n                    //End of objPoint\r\n    \r\n                    //Get the imgPoint ready\r\n                    List&lt;Point&gt; inputP2 = new ArrayList&lt;Point&gt;();\r\n    \r\n                    for(int i = 0;i&lt;out2Idx.size();i++){\r\n                        inputP2.add(i, out2.get(out2Idx.get(i)));\r\n                    }\r\n                    MatOfPoint2f pt2 = new MatOfPoint2f();\r\n                    pt2.fromList(inputP2);\r\n                    //End of imgPoint\r\n    \r\n                    RtMatrix pnpRt = new RtMatrix(cam, distCoeffs);\r\n                    ArrayList&lt;Mat&gt; Rtm = pnpRt.getRtMatrix(pt, pt2);\r\n                    ProjMatrix proj_second = new ProjMatrix(Rtm.get(0),Rtm.get(1));\r\n                    Mat proj_2 = proj_second.getProjMatrix(cam);\r\n                    Mat unNormalize = new Mat();\r\n                    Calib3d.triangulatePoints(reProj, proj_2, img1, img2, unNormalize);\r\n                    //Later this part will fuse into the class PointCloud\r\n                    int numofPoint = unNormalize.width();\r\n                    double hoc[]= new double[numofPoint];\r\n                    unNormalize.get(3,0,hoc);\r\n                    Size vect = new Size();\r\n                    vect.height = 4;\r\n                    vect.width = 4;\r\n                    ArrayList&lt;Mat&gt;outList = new ArrayList&lt;Mat&gt;();\r\n                    double invHoc;\r\n                    for(int j = 0;j &lt; numofPoint;j++){\r\n                        Mat tempHoc = new Mat(vect, CV_64FC1);\r\n                        invHoc = 1/hoc[j];\r\n                        double inputHoc[] = {invHoc,0.0,0,0,0,invHoc,0,0,0,0,invHoc,0,0,0,0,invHoc};\r\n                        tempHoc.put(0,0,inputHoc);\r\n                        Mat horTemp = new Mat();\r\n                        Core.gemm(tempHoc, unNormalize.col(j), 1, Mat.zeros(tempHoc.size(), tempHoc.type()), 0, horTemp);\r\n                        outList.add(horTemp);\r\n                    }\r\n                    Core.hconcat(outList, outpoints);\r\n                    reProj = proj_2;\r\n                    tb.print3DMat(outpoints, &quot;pnpOut&quot;);\r\n                    //End of fuse\r\n                    flag = true;\r\n    \r\n                }\r\n            }\r\n            return outputImg;","title":"3d point cloud via multiple images turns out to be several lines","body":"<p><a href=\"https://i.stack.imgur.com/xF8gx.png\" rel=\"nofollow noreferrer\">3D point cloud shows in Matlab</a></p>\n\n<p><a href=\"https://i.stack.imgur.com/OEgdB.jpg\" rel=\"nofollow noreferrer\">Original object</a></p>\n\n<p>This is my Android app which does 3D reconstruction on cell phone. The result of \nthe reconstruction is like this. The 3D points are lining up and stretching to different directions...I`ve tried for days and cannot solve this problem. Thank you in advance! The feature and matching algorithm is Pyramid_ORB</p>\n\n<pre><code>        //out1 and out2 are two ArrayList that contain all the filtered feature points\n        MatOfPoint2f matpoints1 = new MatOfPoint2f(out1.toArray(new Point[0]));\n        MatOfPoint2f matpoints2 = new MatOfPoint2f(out2.toArray(new Point[0]));\n\n        Size msize = new Size();\n        msize.height=3;\n        msize.width=3;\n        Mat cam = new Mat(msize,CV_64FC1);\n        double arr[] = {853.53285,0,476.32870,0,1132.35572,363.97813,0,0,1};\n        cam.put(0,0,arr);\n        msize.height=4;\n        msize.width=1;\n        Mat dist = new Mat(msize, CV_64FC1);\n        double arr2[] = {0.08580, -0.22893, -0.00541, -0.00221};\n        dist.put(0,0,arr2);\n        MatOfDouble distCoeffs = new MatOfDouble(dist);\n        Mat outpoints = new Mat();\n        //if it were the first two picture then use essential matrix to get RT and point cloud\n        if(count &lt; 2){\n            if(pointsize &lt; 5){\n                count = 0;\n            }\n            else{\n                Mat essen = Calib3d.findEssentialMat(matpoints1, matpoints2, cam);\n                Mat rot2 = new Mat();\n                Mat t2 = new Mat();\n                ArrayList&lt;Mat&gt; matlist = new ArrayList&lt;Mat&gt;();\n                ArrayList&lt;Mat&gt; pRes = new ArrayList&lt;Mat&gt;();\n                PointCloud pc = new PointCloud(essen, pointsize);\n                pRes = pc.getPointCloud(cam,reR,reT,img1,img2);\n                flag = true;\n                //The Projection matrix save for next triangulation, outpoint is the Mat of point cloud\n                reProj = pRes.get(0);\n                outpoints = pRes.get(1);\n            }\n        }\n\n        else{\n            //Else use PnP to get R and t matrix\n            int indexOfCloud = cloud.size()-1;\n            ArrayList&lt;Integer&gt; queryIdx = new ArrayList&lt;&gt;();\n            ArrayList&lt;Integer&gt; out2Idx = new ArrayList&lt;&gt;();\n            Mat lastOut3Dpoint = cloud.get(indexOfCloud);\n            //This loop get the index of 3d point in last 3d point cloud\n            //and the corresponding 2d coordinates of the previous right image\n            //out1 and out2 here have been re-ordered before to let out1.get(i) is corresponse to out2.get(i)\n            for(int i = 0;i &lt; out1.size();i++){\n                Point tempP = out1.get(i);\n                Integer n = lastPoint.get(tempP);\n                if(n!=null){\n                    queryIdx.add(n);\n                    out2Idx.add(i);\n                }\n            }\n            //Break here if out2Idx.size() &lt; 4, then use new pic\n            if(out2Idx.size() &lt; 4){\n                flag = false;\n                Log.d(\"out2idxsize\", out2Idx.size()+\"\");\n            }\n\n            //end of renew\n            else{\n                Toast.makeText(getApplicationContext(), \"Enough Point for PnP\", Toast.LENGTH_SHORT).show();\n\n                List&lt;Point3&gt; inputP = new ArrayList&lt;Point3&gt;();\n                double tem[] = new double[3];\n                for(int i = 0;i&lt;queryIdx.size();i++){\n                    Point3 p3 = new Point3();\n                    lastOut3Dpoint.col(queryIdx.get(i)).get(0,0,tem);\n                    p3.x=tem[0];\n                    p3.y=tem[1];\n                    p3.z=tem[2];\n                    inputP.add(i,p3);\n                }\n                MatOfPoint3f pt = new MatOfPoint3f();\n                pt.fromList(inputP);\n                //End of objPoint\n\n                //Get the imgPoint ready\n                List&lt;Point&gt; inputP2 = new ArrayList&lt;Point&gt;();\n\n                for(int i = 0;i&lt;out2Idx.size();i++){\n                    inputP2.add(i, out2.get(out2Idx.get(i)));\n                }\n                MatOfPoint2f pt2 = new MatOfPoint2f();\n                pt2.fromList(inputP2);\n                //End of imgPoint\n\n                RtMatrix pnpRt = new RtMatrix(cam, distCoeffs);\n                ArrayList&lt;Mat&gt; Rtm = pnpRt.getRtMatrix(pt, pt2);\n                ProjMatrix proj_second = new ProjMatrix(Rtm.get(0),Rtm.get(1));\n                Mat proj_2 = proj_second.getProjMatrix(cam);\n                Mat unNormalize = new Mat();\n                Calib3d.triangulatePoints(reProj, proj_2, img1, img2, unNormalize);\n                //Later this part will fuse into the class PointCloud\n                int numofPoint = unNormalize.width();\n                double hoc[]= new double[numofPoint];\n                unNormalize.get(3,0,hoc);\n                Size vect = new Size();\n                vect.height = 4;\n                vect.width = 4;\n                ArrayList&lt;Mat&gt;outList = new ArrayList&lt;Mat&gt;();\n                double invHoc;\n                for(int j = 0;j &lt; numofPoint;j++){\n                    Mat tempHoc = new Mat(vect, CV_64FC1);\n                    invHoc = 1/hoc[j];\n                    double inputHoc[] = {invHoc,0.0,0,0,0,invHoc,0,0,0,0,invHoc,0,0,0,0,invHoc};\n                    tempHoc.put(0,0,inputHoc);\n                    Mat horTemp = new Mat();\n                    Core.gemm(tempHoc, unNormalize.col(j), 1, Mat.zeros(tempHoc.size(), tempHoc.type()), 0, horTemp);\n                    outList.add(horTemp);\n                }\n                Core.hconcat(outList, outpoints);\n                reProj = proj_2;\n                tb.print3DMat(outpoints, \"pnpOut\");\n                //End of fuse\n                flag = true;\n\n            }\n        }\n        return outputImg;\n</code></pre>\n"},{"tags":["java","http","post"],"comments":[{"owner":{"account_id":11726648,"reputation":19533,"user_id":8583692,"display_name":"Mahozad"},"score":0,"creation_date":1640977922,"post_id":3324717,"comment_id":124703381,"body_markdown":"Does this answer your question? [How to use java.net.URLConnection to fire and handle HTTP requests](https://stackoverflow.com/questions/2793150/how-to-use-java-net-urlconnection-to-fire-and-handle-http-requests)","body":"Does this answer your question? <a href=\"https://stackoverflow.com/questions/2793150/how-to-use-java-net-urlconnection-to-fire-and-handle-http-requests\">How to use java.net.URLConnection to fire and handle HTTP requests</a>"}],"answers":[{"tags":[],"owner":{"account_id":71739,"reputation":307142,"user_id":207421,"accept_rate":82,"display_name":"user207421"},"down_vote_count":2,"up_vote_count":3,"is_accepted":false,"score":1,"last_activity_date":1333496048,"creation_date":1279967421,"answer_id":3324722,"question_id":3324717,"body_markdown":"Call `HttpURLConnection.setRequestMethod(&quot;POST&quot;)` and `HttpURLConnection.setDoOutput(true);` Actually only the latter is needed as POST then becomes the default method.","title":"Sending HTTP POST Request In Java","body":"<p>Call <code>HttpURLConnection.setRequestMethod(\"POST\")</code> and <code>HttpURLConnection.setDoOutput(true);</code> Actually only the latter is needed as POST then becomes the default method.</p>\n"},{"tags":[],"owner":{"account_id":160854,"reputation":6332,"user_id":381211,"accept_rate":74,"display_name":"DuduAlul"},"down_vote_count":1,"up_vote_count":115,"is_accepted":false,"score":114,"last_activity_date":1508611891,"creation_date":1279972141,"answer_id":3324964,"question_id":3324717,"body_markdown":"    String rawData = &quot;id=10&quot;;\r\n    String type = &quot;application/x-www-form-urlencoded&quot;;\r\n    String encodedData = URLEncoder.encode( rawData, &quot;UTF-8&quot; ); \r\n    URL u = new URL(&quot;http://www.example.com/page.php&quot;);\r\n    HttpURLConnection conn = (HttpURLConnection) u.openConnection();\r\n    conn.setDoOutput(true);\r\n    conn.setRequestMethod(&quot;POST&quot;);\r\n    conn.setRequestProperty( &quot;Content-Type&quot;, type );\r\n    conn.setRequestProperty( &quot;Content-Length&quot;, String.valueOf(encodedData.length()));\r\n    OutputStream os = conn.getOutputStream();\r\n    os.write(encodedData.getBytes());\r\n\r\n","title":"Sending HTTP POST Request In Java","body":"<pre><code>String rawData = \"id=10\";\nString type = \"application/x-www-form-urlencoded\";\nString encodedData = URLEncoder.encode( rawData, \"UTF-8\" ); \nURL u = new URL(\"http://www.example.com/page.php\");\nHttpURLConnection conn = (HttpURLConnection) u.openConnection();\nconn.setDoOutput(true);\nconn.setRequestMethod(\"POST\");\nconn.setRequestProperty( \"Content-Type\", type );\nconn.setRequestProperty( \"Content-Length\", String.valueOf(encodedData.length()));\nOutputStream os = conn.getOutputStream();\nos.write(encodedData.getBytes());\n</code></pre>\n"},{"tags":[],"owner":{"account_id":168371,"reputation":16522,"user_id":393786,"accept_rate":78,"display_name":"mhshams"},"down_vote_count":7,"up_vote_count":392,"is_accepted":false,"score":385,"last_activity_date":1662552436,"creation_date":1279974313,"answer_id":3325065,"question_id":3324717,"body_markdown":"# Updated answer\r\nSince some of the classes, in the original answer, are deprecated in the newer version of Apache HTTP Components, I&#39;m posting this update.\r\n\r\nBy the way, you can access the full documentation for more examples [here][1].\r\n\r\n    HttpClient httpclient = HttpClients.createDefault();\r\n    HttpPost httppost = new HttpPost(&quot;http://www.a-domain.example/foo/&quot;);\r\n\r\n    // Request parameters and other properties.\r\n    List&lt;NameValuePair&gt; params = new ArrayList&lt;NameValuePair&gt;(2);\r\n    params.add(new BasicNameValuePair(&quot;param-1&quot;, &quot;12345&quot;));\r\n    params.add(new BasicNameValuePair(&quot;param-2&quot;, &quot;Hello!&quot;));\r\n    httppost.setEntity(new UrlEncodedFormEntity(params, &quot;UTF-8&quot;));\r\n\r\n    //Execute and get the response.\r\n    HttpResponse response = httpclient.execute(httppost);\r\n    HttpEntity entity = response.getEntity();\r\n\r\n    if (entity != null) {\r\n        try (InputStream instream = entity.getContent()) {\r\n            // do something useful\r\n        }\r\n    }\r\n\r\n# Original answer\r\n\r\nI recommend to use Apache HttpClient. its faster and easier to implement.\r\n\r\n    HttpPost post = new HttpPost(&quot;http://jakarata.apache.org/&quot;);\r\n    NameValuePair[] data = {\r\n        new NameValuePair(&quot;user&quot;, &quot;joe&quot;),\r\n        new NameValuePair(&quot;password&quot;, &quot;bloggs&quot;)\r\n    };\r\n    post.setRequestBody(data);\r\n    // execute method and handle any error responses.\r\n    ...\r\n    InputStream in = post.getResponseBodyAsStream();\r\n    // handle response.\r\n\r\nfor more information check this URL: http://hc.apache.org/\r\n\r\n  [1]: https://hc.apache.org/httpcomponents-client-4.5.x/current/tutorial/html/fundamentals.html","title":"Sending HTTP POST Request In Java","body":"<h1>Updated answer</h1>\n<p>Since some of the classes, in the original answer, are deprecated in the newer version of Apache HTTP Components, I'm posting this update.</p>\n<p>By the way, you can access the full documentation for more examples <a href=\"https://hc.apache.org/httpcomponents-client-4.5.x/current/tutorial/html/fundamentals.html\" rel=\"noreferrer\">here</a>.</p>\n<pre><code>HttpClient httpclient = HttpClients.createDefault();\nHttpPost httppost = new HttpPost(&quot;http://www.a-domain.example/foo/&quot;);\n\n// Request parameters and other properties.\nList&lt;NameValuePair&gt; params = new ArrayList&lt;NameValuePair&gt;(2);\nparams.add(new BasicNameValuePair(&quot;param-1&quot;, &quot;12345&quot;));\nparams.add(new BasicNameValuePair(&quot;param-2&quot;, &quot;Hello!&quot;));\nhttppost.setEntity(new UrlEncodedFormEntity(params, &quot;UTF-8&quot;));\n\n//Execute and get the response.\nHttpResponse response = httpclient.execute(httppost);\nHttpEntity entity = response.getEntity();\n\nif (entity != null) {\n    try (InputStream instream = entity.getContent()) {\n        // do something useful\n    }\n}\n</code></pre>\n<h1>Original answer</h1>\n<p>I recommend to use Apache HttpClient. its faster and easier to implement.</p>\n<pre><code>HttpPost post = new HttpPost(&quot;http://jakarata.apache.org/&quot;);\nNameValuePair[] data = {\n    new NameValuePair(&quot;user&quot;, &quot;joe&quot;),\n    new NameValuePair(&quot;password&quot;, &quot;bloggs&quot;)\n};\npost.setRequestBody(data);\n// execute method and handle any error responses.\n...\nInputStream in = post.getResponseBodyAsStream();\n// handle response.\n</code></pre>\n<p>for more information check this URL: <a href=\"http://hc.apache.org/\" rel=\"noreferrer\">http://hc.apache.org/</a></p>\n"},{"tags":[],"owner":{"account_id":460612,"reputation":1175,"user_id":861809,"accept_rate":57,"display_name":"Mar Cnu"},"down_vote_count":0,"up_vote_count":30,"is_accepted":false,"score":30,"last_activity_date":1392168713,"creation_date":1367257047,"answer_id":16284863,"question_id":3324717,"body_markdown":"The first answer was great, but I had to add try/catch to avoid Java compiler errors.  \r\nAlso, I had troubles to figure how to read the `HttpResponse` with Java libraries.  \r\n  \r\nHere is the more complete code :\r\n\r\n    /*\r\n     * Create the POST request\r\n     */\r\n    HttpClient httpClient = new DefaultHttpClient();\r\n    HttpPost httpPost = new HttpPost(&quot;http://example.com/&quot;);\r\n    // Request parameters and other properties.\r\n    List&lt;NameValuePair&gt; params = new ArrayList&lt;NameValuePair&gt;();\r\n    params.add(new BasicNameValuePair(&quot;user&quot;, &quot;Bob&quot;));\r\n    try {\r\n        httpPost.setEntity(new UrlEncodedFormEntity(params, &quot;UTF-8&quot;));\r\n    } catch (UnsupportedEncodingException e) {\r\n        // writing error to Log\r\n        e.printStackTrace();\r\n    }\r\n    /*\r\n     * Execute the HTTP Request\r\n     */\r\n    try {\r\n        HttpResponse response = httpClient.execute(httpPost);\r\n        HttpEntity respEntity = response.getEntity();\r\n        \r\n        if (respEntity != null) {\r\n            // EntityUtils to get the response content\r\n            String content =  EntityUtils.toString(respEntity);\r\n        }\r\n    } catch (ClientProtocolException e) {\r\n        // writing exception to log\r\n        e.printStackTrace();\r\n    } catch (IOException e) {\r\n        // writing exception to log\r\n        e.printStackTrace();\r\n    }\r\n","title":"Sending HTTP POST Request In Java","body":"<p>The first answer was great, but I had to add try/catch to avoid Java compiler errors.<br>\nAlso, I had troubles to figure how to read the <code>HttpResponse</code> with Java libraries.  </p>\n\n<p>Here is the more complete code :</p>\n\n<pre><code>/*\n * Create the POST request\n */\nHttpClient httpClient = new DefaultHttpClient();\nHttpPost httpPost = new HttpPost(\"http://example.com/\");\n// Request parameters and other properties.\nList&lt;NameValuePair&gt; params = new ArrayList&lt;NameValuePair&gt;();\nparams.add(new BasicNameValuePair(\"user\", \"Bob\"));\ntry {\n    httpPost.setEntity(new UrlEncodedFormEntity(params, \"UTF-8\"));\n} catch (UnsupportedEncodingException e) {\n    // writing error to Log\n    e.printStackTrace();\n}\n/*\n * Execute the HTTP Request\n */\ntry {\n    HttpResponse response = httpClient.execute(httpPost);\n    HttpEntity respEntity = response.getEntity();\n\n    if (respEntity != null) {\n        // EntityUtils to get the response content\n        String content =  EntityUtils.toString(respEntity);\n    }\n} catch (ClientProtocolException e) {\n    // writing exception to log\n    e.printStackTrace();\n} catch (IOException e) {\n    // writing exception to log\n    e.printStackTrace();\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":182578,"reputation":4807,"user_id":417385,"accept_rate":88,"display_name":"Mathias Bak"},"down_vote_count":1,"up_vote_count":18,"is_accepted":false,"score":17,"last_activity_date":1617431285,"creation_date":1385828538,"answer_id":20302567,"question_id":3324717,"body_markdown":"A simple way using Apache HTTP Components is\r\n\r\n    Request.Post(&quot;http://www.example.com/page.php&quot;)\r\n                .bodyForm(Form.form().add(&quot;id&quot;, &quot;10&quot;).build())\r\n                .execute()\r\n                .returnContent();\r\n\r\nTake a look at the [Fluent API][1]\r\n\r\n\r\n  [1]: http://hc.apache.org/httpcomponents-client-5.0.x","title":"Sending HTTP POST Request In Java","body":"<p>A simple way using Apache HTTP Components is</p>\n<pre><code>Request.Post(&quot;http://www.example.com/page.php&quot;)\n            .bodyForm(Form.form().add(&quot;id&quot;, &quot;10&quot;).build())\n            .execute()\n            .returnContent();\n</code></pre>\n<p>Take a look at the <a href=\"http://hc.apache.org/httpcomponents-client-5.0.x\" rel=\"nofollow noreferrer\">Fluent API</a></p>\n"},{"tags":[],"owner":{"account_id":1677570,"reputation":18354,"user_id":1542723,"display_name":"Ferrybig"},"down_vote_count":3,"up_vote_count":257,"is_accepted":false,"score":254,"last_activity_date":1494957265,"creation_date":1453809557,"answer_id":35013372,"question_id":3324717,"body_markdown":"&lt;!-- language-all: java --&gt;\r\n\r\nSending a POST request is easy in vanilla Java. Starting with a `URL`, we need t convert it to a `URLConnection` using `url.openConnection();`. After that, we need to cast it to a `HttpURLConnection`, so we can access its `setRequestMethod()` method to set our method. We finally say that we are going to send data over the connection.\r\n\r\n    URL url = new URL(&quot;https://www.example.com/login&quot;);\r\n    URLConnection con = url.openConnection();\r\n    HttpURLConnection http = (HttpURLConnection)con;\r\n    http.setRequestMethod(&quot;POST&quot;); // PUT is another valid option\r\n    http.setDoOutput(true);\r\n\r\nWe then need to state what we are going to send:\r\n\r\nSending a simple form\r\n---------------------\r\n\r\nA normal POST coming from a http form has a [well defined][1] format. We need to convert our input to this format:\r\n\r\n    Map&lt;String,String&gt; arguments = new HashMap&lt;&gt;();\r\n    arguments.put(&quot;username&quot;, &quot;root&quot;);\r\n    arguments.put(&quot;password&quot;, &quot;sjh76HSn!&quot;); // This is a fake password obviously\r\n    StringJoiner sj = new StringJoiner(&quot;&amp;&quot;);\r\n    for(Map.Entry&lt;String,String&gt; entry : arguments.entrySet())\r\n        sj.add(URLEncoder.encode(entry.getKey(), &quot;UTF-8&quot;) + &quot;=&quot; \r\n             + URLEncoder.encode(entry.getValue(), &quot;UTF-8&quot;));\r\n    byte[] out = sj.toString().getBytes(StandardCharsets.UTF_8);\r\n    int length = out.length;\r\n\r\nWe can then attach our form contents to the http request with proper headers and send it.\r\n\r\n    http.setFixedLengthStreamingMode(length);\r\n    http.setRequestProperty(&quot;Content-Type&quot;, &quot;application/x-www-form-urlencoded; charset=UTF-8&quot;);\r\n    http.connect();\r\n    try(OutputStream os = http.getOutputStream()) {\r\n        os.write(out);\r\n    }\r\n    // Do something with http.getInputStream()\r\n\r\n\r\n----------\r\n\r\n\r\nSending JSON\r\n------------\r\n\r\nWe can also send json using java, this is also easy:\r\n\r\n\r\n    byte[] out = &quot;{\\&quot;username\\&quot;:\\&quot;root\\&quot;,\\&quot;password\\&quot;:\\&quot;password\\&quot;}&quot; .getBytes(StandardCharsets.UTF_8);\r\n    int length = out.length;\r\n    \r\n    http.setFixedLengthStreamingMode(length);\r\n    http.setRequestProperty(&quot;Content-Type&quot;, &quot;application/json; charset=UTF-8&quot;);\r\n    http.connect();\r\n    try(OutputStream os = http.getOutputStream()) {\r\n        os.write(out);\r\n    }\r\n    // Do something with http.getInputStream()\r\n\r\nRemember that different servers accept different content-types for json, see [this](https://stackoverflow.com/q/477816/1542723) question.\r\n\r\n\r\n----------\r\n\r\n\r\nSending files with java post\r\n----------------------------\r\n\r\nSending files can be considered more challenging to handle as the format is more complex. We are also going to add support for sending the files as a string, since we don&#39;t want to buffer the file fully into the memory.\r\n\r\nFor this, we define some helper methods:\r\n\r\n    private void sendFile(OutputStream out, String name, InputStream in, String fileName) {\r\n        String o = &quot;Content-Disposition: form-data; name=\\&quot;&quot; + URLEncoder.encode(name,&quot;UTF-8&quot;) \r\n                 + &quot;\\&quot;; filename=\\&quot;&quot; + URLEncoder.encode(filename,&quot;UTF-8&quot;) + &quot;\\&quot;\\r\\n\\r\\n&quot;;\r\n        out.write(o.getBytes(StandardCharsets.UTF_8));\r\n        byte[] buffer = new byte[2048];\r\n        for (int n = 0; n &gt;= 0; n = in.read(buffer))\r\n            out.write(buffer, 0, n);\r\n        out.write(&quot;\\r\\n&quot;.getBytes(StandardCharsets.UTF_8));\r\n    }\r\n\r\n    private void sendField(OutputStream out, String name, String field) {\r\n        String o = &quot;Content-Disposition: form-data; name=\\&quot;&quot; \r\n                 + URLEncoder.encode(name,&quot;UTF-8&quot;) + &quot;\\&quot;\\r\\n\\r\\n&quot;;\r\n        out.write(o.getBytes(StandardCharsets.UTF_8));\r\n        out.write(URLEncoder.encode(field,&quot;UTF-8&quot;).getBytes(StandardCharsets.UTF_8));\r\n        out.write(&quot;\\r\\n&quot;.getBytes(StandardCharsets.UTF_8));\r\n    }\r\n\r\nWe can then use these methods to create a multipart post request as follows:\r\n\r\n    String boundary = UUID.randomUUID().toString();\r\n    byte[] boundaryBytes = \r\n               (&quot;--&quot; + boundary + &quot;\\r\\n&quot;).getBytes(StandardCharsets.UTF_8);\r\n    byte[] finishBoundaryBytes = \r\n               (&quot;--&quot; + boundary + &quot;--&quot;).getBytes(StandardCharsets.UTF_8);\r\n    http.setRequestProperty(&quot;Content-Type&quot;, \r\n               &quot;multipart/form-data; charset=UTF-8; boundary=&quot; + boundary);\r\n\r\n    // Enable streaming mode with default settings\r\n    http.setChunkedStreamingMode(0); \r\n\r\n    // Send our fields:\r\n    try(OutputStream out = http.getOutputStream()) {\r\n        // Send our header (thx Algoman)\r\n        out.write(boundaryBytes);\r\n\r\n        // Send our first field\r\n        sendField(out, &quot;username&quot;, &quot;root&quot;);\r\n\r\n        // Send a seperator\r\n        out.write(boundaryBytes);\r\n\r\n        // Send our second field\r\n        sendField(out, &quot;password&quot;, &quot;toor&quot;);\r\n\r\n        // Send another seperator\r\n        out.write(boundaryBytes);\r\n\r\n        // Send our file\r\n        try(InputStream file = new FileInputStream(&quot;test.txt&quot;)) {\r\n            sendFile(out, &quot;identification&quot;, file, &quot;text.txt&quot;);\r\n        }\r\n\r\n        // Finish the request\r\n        out.write(finishBoundaryBytes);\r\n    }\r\n\r\n\r\n    // Do something with http.getInputStream()\r\n\r\n  [1]: https://www.rfc-editor.org/rfc/rfc1866#section-8.2.1","title":"Sending HTTP POST Request In Java","body":"\n<p>Sending a POST request is easy in vanilla Java. Starting with a <code>URL</code>, we need t convert it to a <code>URLConnection</code> using <code>url.openConnection();</code>. After that, we need to cast it to a <code>HttpURLConnection</code>, so we can access its <code>setRequestMethod()</code> method to set our method. We finally say that we are going to send data over the connection.</p>\n<pre class=\"lang-java prettyprint-override\"><code>URL url = new URL(&quot;https://www.example.com/login&quot;);\nURLConnection con = url.openConnection();\nHttpURLConnection http = (HttpURLConnection)con;\nhttp.setRequestMethod(&quot;POST&quot;); // PUT is another valid option\nhttp.setDoOutput(true);\n</code></pre>\n<p>We then need to state what we are going to send:</p>\n<h2>Sending a simple form</h2>\n<p>A normal POST coming from a http form has a <a href=\"https://www.rfc-editor.org/rfc/rfc1866#section-8.2.1\" rel=\"noreferrer\">well defined</a> format. We need to convert our input to this format:</p>\n<pre class=\"lang-java prettyprint-override\"><code>Map&lt;String,String&gt; arguments = new HashMap&lt;&gt;();\narguments.put(&quot;username&quot;, &quot;root&quot;);\narguments.put(&quot;password&quot;, &quot;sjh76HSn!&quot;); // This is a fake password obviously\nStringJoiner sj = new StringJoiner(&quot;&amp;&quot;);\nfor(Map.Entry&lt;String,String&gt; entry : arguments.entrySet())\n    sj.add(URLEncoder.encode(entry.getKey(), &quot;UTF-8&quot;) + &quot;=&quot; \n         + URLEncoder.encode(entry.getValue(), &quot;UTF-8&quot;));\nbyte[] out = sj.toString().getBytes(StandardCharsets.UTF_8);\nint length = out.length;\n</code></pre>\n<p>We can then attach our form contents to the http request with proper headers and send it.</p>\n<pre class=\"lang-java prettyprint-override\"><code>http.setFixedLengthStreamingMode(length);\nhttp.setRequestProperty(&quot;Content-Type&quot;, &quot;application/x-www-form-urlencoded; charset=UTF-8&quot;);\nhttp.connect();\ntry(OutputStream os = http.getOutputStream()) {\n    os.write(out);\n}\n// Do something with http.getInputStream()\n</code></pre>\n<hr />\n<h2>Sending JSON</h2>\n<p>We can also send json using java, this is also easy:</p>\n<pre class=\"lang-java prettyprint-override\"><code>byte[] out = &quot;{\\&quot;username\\&quot;:\\&quot;root\\&quot;,\\&quot;password\\&quot;:\\&quot;password\\&quot;}&quot; .getBytes(StandardCharsets.UTF_8);\nint length = out.length;\n\nhttp.setFixedLengthStreamingMode(length);\nhttp.setRequestProperty(&quot;Content-Type&quot;, &quot;application/json; charset=UTF-8&quot;);\nhttp.connect();\ntry(OutputStream os = http.getOutputStream()) {\n    os.write(out);\n}\n// Do something with http.getInputStream()\n</code></pre>\n<p>Remember that different servers accept different content-types for json, see <a href=\"https://stackoverflow.com/q/477816/1542723\">this</a> question.</p>\n<hr />\n<h2>Sending files with java post</h2>\n<p>Sending files can be considered more challenging to handle as the format is more complex. We are also going to add support for sending the files as a string, since we don't want to buffer the file fully into the memory.</p>\n<p>For this, we define some helper methods:</p>\n<pre class=\"lang-java prettyprint-override\"><code>private void sendFile(OutputStream out, String name, InputStream in, String fileName) {\n    String o = &quot;Content-Disposition: form-data; name=\\&quot;&quot; + URLEncoder.encode(name,&quot;UTF-8&quot;) \n             + &quot;\\&quot;; filename=\\&quot;&quot; + URLEncoder.encode(filename,&quot;UTF-8&quot;) + &quot;\\&quot;\\r\\n\\r\\n&quot;;\n    out.write(o.getBytes(StandardCharsets.UTF_8));\n    byte[] buffer = new byte[2048];\n    for (int n = 0; n &gt;= 0; n = in.read(buffer))\n        out.write(buffer, 0, n);\n    out.write(&quot;\\r\\n&quot;.getBytes(StandardCharsets.UTF_8));\n}\n\nprivate void sendField(OutputStream out, String name, String field) {\n    String o = &quot;Content-Disposition: form-data; name=\\&quot;&quot; \n             + URLEncoder.encode(name,&quot;UTF-8&quot;) + &quot;\\&quot;\\r\\n\\r\\n&quot;;\n    out.write(o.getBytes(StandardCharsets.UTF_8));\n    out.write(URLEncoder.encode(field,&quot;UTF-8&quot;).getBytes(StandardCharsets.UTF_8));\n    out.write(&quot;\\r\\n&quot;.getBytes(StandardCharsets.UTF_8));\n}\n</code></pre>\n<p>We can then use these methods to create a multipart post request as follows:</p>\n<pre class=\"lang-java prettyprint-override\"><code>String boundary = UUID.randomUUID().toString();\nbyte[] boundaryBytes = \n           (&quot;--&quot; + boundary + &quot;\\r\\n&quot;).getBytes(StandardCharsets.UTF_8);\nbyte[] finishBoundaryBytes = \n           (&quot;--&quot; + boundary + &quot;--&quot;).getBytes(StandardCharsets.UTF_8);\nhttp.setRequestProperty(&quot;Content-Type&quot;, \n           &quot;multipart/form-data; charset=UTF-8; boundary=&quot; + boundary);\n\n// Enable streaming mode with default settings\nhttp.setChunkedStreamingMode(0); \n\n// Send our fields:\ntry(OutputStream out = http.getOutputStream()) {\n    // Send our header (thx Algoman)\n    out.write(boundaryBytes);\n\n    // Send our first field\n    sendField(out, &quot;username&quot;, &quot;root&quot;);\n\n    // Send a seperator\n    out.write(boundaryBytes);\n\n    // Send our second field\n    sendField(out, &quot;password&quot;, &quot;toor&quot;);\n\n    // Send another seperator\n    out.write(boundaryBytes);\n\n    // Send our file\n    try(InputStream file = new FileInputStream(&quot;test.txt&quot;)) {\n        sendFile(out, &quot;identification&quot;, file, &quot;text.txt&quot;);\n    }\n\n    // Finish the request\n    out.write(finishBoundaryBytes);\n}\n\n\n// Do something with http.getInputStream()\n</code></pre>\n"},{"tags":[],"owner":{"account_id":7493836,"reputation":190,"user_id":5694702,"accept_rate":60,"display_name":"chandan kumar"},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1490166753,"creation_date":1490166162,"answer_id":42944806,"question_id":3324717,"body_markdown":"simplest way to send parameters with the post request:\r\n\r\n    String postURL = &quot;http://www.example.com/page.php&quot;;\r\n\r\n\tHttpPost post = new HttpPost(postURL);\r\n    \r\n    List&lt;NameValuePair&gt; params = new ArrayList&lt;NameValuePair&gt;();\r\n    params.add(new BasicNameValuePair(&quot;id&quot;, &quot;10&quot;));\r\n    \r\n    UrlEncodedFormEntity ent = new UrlEncodedFormEntity(params, &quot;UTF-8&quot;);\r\n    post.setEntity(ent);\r\n\r\n    HttpClient client = new DefaultHttpClient();\r\n    HttpResponse responsePOST = client.execute(post);\r\n\r\nYou have done. now you can use `responsePOST`.\r\nGet response content as string:\r\n\r\n    BufferedReader reader = new BufferedReader(new  InputStreamReader(responsePOST.getEntity().getContent()), 2048);\r\n\r\n\tif (responsePOST != null) {\r\n\t\tStringBuilder sb = new StringBuilder();\r\n\t\tString line;\r\n\t\twhile ((line = reader.readLine()) != null) {\r\n            System.out.println(&quot; line : &quot; + line);\r\n\t\t\tsb.append(line);\r\n\t\t}\r\n\t\tString getResponseString = &quot;&quot;;\r\n\t\tgetResponseString = sb.toString();\r\n    //use server output getResponseString as string value.\r\n    }","title":"Sending HTTP POST Request In Java","body":"<p>simplest way to send parameters with the post request:</p>\n\n<pre><code>String postURL = \"http://www.example.com/page.php\";\n\nHttpPost post = new HttpPost(postURL);\n\nList&lt;NameValuePair&gt; params = new ArrayList&lt;NameValuePair&gt;();\nparams.add(new BasicNameValuePair(\"id\", \"10\"));\n\nUrlEncodedFormEntity ent = new UrlEncodedFormEntity(params, \"UTF-8\");\npost.setEntity(ent);\n\nHttpClient client = new DefaultHttpClient();\nHttpResponse responsePOST = client.execute(post);\n</code></pre>\n\n<p>You have done. now you can use <code>responsePOST</code>.\nGet response content as string:</p>\n\n<pre><code>BufferedReader reader = new BufferedReader(new  InputStreamReader(responsePOST.getEntity().getContent()), 2048);\n\nif (responsePOST != null) {\n    StringBuilder sb = new StringBuilder();\n    String line;\n    while ((line = reader.readLine()) != null) {\n        System.out.println(\" line : \" + line);\n        sb.append(line);\n    }\n    String getResponseString = \"\";\n    getResponseString = sb.toString();\n//use server output getResponseString as string value.\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":8950570,"reputation":955,"user_id":6676704,"display_name":"Beno"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1505650470,"creation_date":1505650007,"answer_id":46263882,"question_id":3324717,"body_markdown":"I recomend use [http-request][1] built on apache http api.\r\n\r\n    HttpRequest&lt;String&gt; httpRequest = HttpRequestBuilder.createPost(&quot;http://www.example.com/page.php&quot;, String.class)\r\n    .responseDeserializer(ResponseDeserializer.ignorableDeserializer()).build();\r\n\r\n    public void send(){\r\n       String response = httpRequest.execute(&quot;id&quot;, &quot;10&quot;).get();\r\n    }\r\n\r\n  [1]: https://github.com/jsunsoftware/http-request\r\n","title":"Sending HTTP POST Request In Java","body":"<p>I recomend use <a href=\"https://github.com/jsunsoftware/http-request\" rel=\"nofollow noreferrer\">http-request</a> built on apache http api.</p>\n\n<pre><code>HttpRequest&lt;String&gt; httpRequest = HttpRequestBuilder.createPost(\"http://www.example.com/page.php\", String.class)\n.responseDeserializer(ResponseDeserializer.ignorableDeserializer()).build();\n\npublic void send(){\n   String response = httpRequest.execute(\"id\", \"10\").get();\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":14153878,"reputation":863,"user_id":10225176,"display_name":"Hani"},"down_vote_count":0,"up_vote_count":11,"is_accepted":false,"score":11,"last_activity_date":1606559215,"creation_date":1606559215,"answer_id":65048572,"question_id":3324717,"body_markdown":"I suggest using Postman to generate the request code. Simply make the request using Postman then hit the code tab: \r\n\r\n[![code tab][1]][1]\r\n\r\nThen you&#39;ll get the following window to choose in which language you want your request code to be:\r\n[![request code generation][2]][2]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/XFkQE.png\r\n  [2]: https://i.stack.imgur.com/M6v0o.png","title":"Sending HTTP POST Request In Java","body":"<p>I suggest using Postman to generate the request code. Simply make the request using Postman then hit the code tab:</p>\n<p><a href=\"https://i.stack.imgur.com/XFkQE.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/XFkQE.png\" alt=\"code tab\" /></a></p>\n<p>Then you'll get the following window to choose in which language you want your request code to be:\n<a href=\"https://i.stack.imgur.com/M6v0o.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/M6v0o.png\" alt=\"request code generation\" /></a></p>\n"},{"tags":[],"owner":{"account_id":3187015,"reputation":71,"user_id":2692384,"display_name":"Timothy Wachiuri"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1631643967,"creation_date":1631621926,"answer_id":69177664,"question_id":3324717,"body_markdown":"Using okhttp :\r\n\r\nSource code for okhttp can be found here [https://github.com/square/okhttp][1].\r\n\r\nIf you&#39;re writing a pom project, add this dependency\r\n\r\n    &lt;dependency&gt;\r\n            &lt;groupId&gt;com.squareup.okhttp3&lt;/groupId&gt;\r\n            &lt;artifactId&gt;okhttp&lt;/artifactId&gt;\r\n            &lt;version&gt;4.2.2&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n\r\nIf not simply search the internet for &#39;download okhttp&#39;. Several results will appear where you can download a jar.\r\n\r\nyour code :\r\n```java\r\nimport okhttp3.*;\r\n        \r\nimport java.io.IOException;\r\n\r\npublic class ClassName{\r\n        private void sendPost() throws IOException {\r\n        \r\n                // form parameters\r\n                RequestBody formBody = new FormBody.Builder()\r\n                        .add(&quot;id&quot;, 10)\r\n                        .build();\r\n        \r\n                Request request = new Request.Builder()\r\n                        .url(&quot;http://www.example.com/page.php&quot;)\r\n                        .post(formBody)\r\n                        .build();\r\n\r\n\r\n                OkHttpClient httpClient = new OkHttpClient();\r\n        \r\n                try (Response response = httpClient.newCall(request).execute()) {\r\n        \r\n                    if (!response.isSuccessful()) throw new IOException(&quot;Unexpected code &quot; + response);\r\n        \r\n                    // Get response body\r\n                    System.out.println(response.body().string());\r\n                }\r\n        }\r\n    }\r\n```\r\n\r\n  [1]: https://github.com/square/okhttp\r\n","title":"Sending HTTP POST Request In Java","body":"<p>Using okhttp :</p>\n<p>Source code for okhttp can be found here <a href=\"https://github.com/square/okhttp\" rel=\"nofollow noreferrer\">https://github.com/square/okhttp</a>.</p>\n<p>If you're writing a pom project, add this dependency</p>\n<pre><code>&lt;dependency&gt;\n        &lt;groupId&gt;com.squareup.okhttp3&lt;/groupId&gt;\n        &lt;artifactId&gt;okhttp&lt;/artifactId&gt;\n        &lt;version&gt;4.2.2&lt;/version&gt;\n    &lt;/dependency&gt;\n</code></pre>\n<p>If not simply search the internet for 'download okhttp'. Several results will appear where you can download a jar.</p>\n<p>your code :</p>\n<pre class=\"lang-java prettyprint-override\"><code>import okhttp3.*;\n        \nimport java.io.IOException;\n\npublic class ClassName{\n        private void sendPost() throws IOException {\n        \n                // form parameters\n                RequestBody formBody = new FormBody.Builder()\n                        .add(&quot;id&quot;, 10)\n                        .build();\n        \n                Request request = new Request.Builder()\n                        .url(&quot;http://www.example.com/page.php&quot;)\n                        .post(formBody)\n                        .build();\n\n\n                OkHttpClient httpClient = new OkHttpClient();\n        \n                try (Response response = httpClient.newCall(request).execute()) {\n        \n                    if (!response.isSuccessful()) throw new IOException(&quot;Unexpected code &quot; + response);\n        \n                    // Get response body\n                    System.out.println(response.body().string());\n                }\n        }\n    }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3191607,"reputation":91,"user_id":2695723,"display_name":"spok"},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1632994781,"creation_date":1632994781,"answer_id":69389876,"question_id":3324717,"body_markdown":"Easy with java.net:\r\n\r\n    public void post(String uri, String data) throws Exception {\r\n    HttpClient client = HttpClient.newBuilder().build();\r\n    HttpRequest request = HttpRequest.newBuilder()\r\n            .uri(URI.create(uri))\r\n            .POST(BodyPublishers.ofString(data))\r\n            .build();\r\n    \r\n    HttpResponse&lt;?&gt; response = client.send(request, BodyHandlers.discarding());\r\n    System.out.println(response.statusCode());\r\n\r\nHere is more information:\r\n[https://openjdk.java.net/groups/net/httpclient/recipes.html#post][1]\r\n\r\n\r\n  [1]: https://openjdk.java.net/groups/net/httpclient/recipes.html#post","title":"Sending HTTP POST Request In Java","body":"<p>Easy with java.net:</p>\n<pre><code>public void post(String uri, String data) throws Exception {\nHttpClient client = HttpClient.newBuilder().build();\nHttpRequest request = HttpRequest.newBuilder()\n        .uri(URI.create(uri))\n        .POST(BodyPublishers.ofString(data))\n        .build();\n\nHttpResponse&lt;?&gt; response = client.send(request, BodyHandlers.discarding());\nSystem.out.println(response.statusCode());\n</code></pre>\n<p>Here is more information:\n<a href=\"https://openjdk.java.net/groups/net/httpclient/recipes.html#post\" rel=\"noreferrer\">https://openjdk.java.net/groups/net/httpclient/recipes.html#post</a></p>\n"},{"tags":[],"owner":{"account_id":8964263,"reputation":415,"user_id":6685619,"display_name":"burak isik"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1659355696,"creation_date":1659355696,"answer_id":73193430,"question_id":3324717,"body_markdown":"Since java 11, HTTP requests can be made by using **java.net.http.HttpClient** with less code.\r\n   \r\n\r\n        var values = new HashMap&lt;String, Integer&gt;() {{\r\n        \tput(&quot;id&quot;, 10);\r\n        }};\r\n        \r\n        var objectMapper = new ObjectMapper();\r\n        String requestBody = objectMapper\r\n        \t\t.writeValueAsString(values);\r\n        \r\n        HttpClient client = HttpClient.newHttpClient();\r\n        HttpRequest request = HttpRequest.newBuilder()\r\n        \t\t.uri(URI.create(&quot;http://www.example.com/abc&quot;))\r\n        \t\t.POST(HttpRequest.BodyPublishers.ofString(requestBody))\r\n        \t\t.build();\r\n        \r\n        HttpResponse&lt;String&gt; response = client.send(request,\r\n        \t\tHttpResponse.BodyHandlers.ofString());\r\n        \r\n        System.out.println(response.body());","title":"Sending HTTP POST Request In Java","body":"<p>Since java 11, HTTP requests can be made by using <strong>java.net.http.HttpClient</strong> with less code.</p>\n<pre><code>    var values = new HashMap&lt;String, Integer&gt;() {{\n        put(&quot;id&quot;, 10);\n    }};\n    \n    var objectMapper = new ObjectMapper();\n    String requestBody = objectMapper\n            .writeValueAsString(values);\n    \n    HttpClient client = HttpClient.newHttpClient();\n    HttpRequest request = HttpRequest.newBuilder()\n            .uri(URI.create(&quot;http://www.example.com/abc&quot;))\n            .POST(HttpRequest.BodyPublishers.ofString(requestBody))\n            .build();\n    \n    HttpResponse&lt;String&gt; response = client.send(request,\n            HttpResponse.BodyHandlers.ofString());\n    \n    System.out.println(response.body());\n</code></pre>\n"}],"owner":{"account_id":172749,"reputation":3741,"user_id":400990,"display_name":"Jazz"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1083686,"favorite_count":0,"down_vote_count":0,"up_vote_count":364,"answer_count":12,"score":364,"last_activity_date":1662552436,"creation_date":1279967290,"question_id":3324717,"body_markdown":"lets assume this URL...\r\n\r\n    http://www.example.com/page.php?id=10            \r\n\r\n(Here id needs to be sent in a POST request)\r\n\r\nI want to send the `id = 10` to the server&#39;s `page.php`, which accepts it in a POST method.\r\n\r\nHow can i do this from within Java?\r\n\r\nI tried this :\r\n\r\n    URL aaa = new URL(&quot;http://www.example.com/page.php&quot;);\r\n    URLConnection ccc = aaa.openConnection();\r\n\r\n\r\nBut I still can&#39;t figure out how to send it via POST\r\n","title":"Sending HTTP POST Request In Java","body":"<p>lets assume this URL...</p>\n\n<pre><code>http://www.example.com/page.php?id=10            \n</code></pre>\n\n<p>(Here id needs to be sent in a POST request)</p>\n\n<p>I want to send the <code>id = 10</code> to the server's <code>page.php</code>, which accepts it in a POST method.</p>\n\n<p>How can i do this from within Java?</p>\n\n<p>I tried this :</p>\n\n<pre><code>URL aaa = new URL(\"http://www.example.com/page.php\");\nURLConnection ccc = aaa.openConnection();\n</code></pre>\n\n<p>But I still can't figure out how to send it via POST</p>\n"},{"tags":["java","json"],"comments":[{"owner":{"account_id":319873,"reputation":87612,"user_id":637853,"accept_rate":50,"display_name":"Thomas"},"score":1,"creation_date":1449244928,"post_id":34092346,"comment_id":55937121,"body_markdown":"`accounts` is an object itself so your `jsonObj` should point to that object. Besides that please consider adding more information to your question since we can&#39;t know what `jsonObj` actually is (actual type, which library, what does it point to etc.) The more effort you put into the question the more people will be willing to help.","body":"<code>accounts</code> is an object itself so your <code>jsonObj</code> should point to that object. Besides that please consider adding more information to your question since we can&#39;t know what <code>jsonObj</code> actually is (actual type, which library, what does it point to etc.) The more effort you put into the question the more people will be willing to help."},{"owner":{"account_id":950905,"reputation":1226,"user_id":977081,"accept_rate":76,"display_name":"melli-182"},"score":0,"creation_date":1449244947,"post_id":34092346,"comment_id":55937133,"body_markdown":"do you have a Java Object that matchs with this JSON?","body":"do you have a Java Object that matchs with this JSON?"},{"owner":{"account_id":3075327,"reputation":1001,"user_id":2604853,"accept_rate":67,"display_name":"Anoop Philip"},"score":0,"creation_date":1449246055,"post_id":34092346,"comment_id":55937939,"body_markdown":"yes @melli-182,  i have java object matching with the JSON.","body":"yes @melli-182,  i have java object matching with the JSON."},{"owner":{"account_id":3075327,"reputation":1001,"user_id":2604853,"accept_rate":67,"display_name":"Anoop Philip"},"score":0,"creation_date":1449247847,"post_id":34092346,"comment_id":55939121,"body_markdown":"@Thomas I&#39;ve added some more information to the question.","body":"@Thomas I&#39;ve added some more information to the question."}],"answers":[{"tags":[],"owner":{"account_id":319873,"reputation":87612,"user_id":637853,"accept_rate":50,"display_name":"Thomas"},"down_vote_count":0,"up_vote_count":49,"is_accepted":true,"score":49,"last_activity_date":1449476995,"creation_date":1449248305,"answer_id":34093558,"question_id":34092346,"body_markdown":"If Gson is like Jackson (I assume so) you&#39;ll have to first get the `JsonObject` &quot;accounts&quot; from the root object and then remove the member &quot;email&quot;, e.g. like this:\r\n\r\n    jsonObj.getAsJsonObject(&quot;accounts&quot;).remove(&quot;email&quot;);\r\n\r\nAlternatively - and probably the preferred way - you would map the json object to a POJO (one that has the fields &quot;status&quot;, &quot;accounts&quot; and &quot;accounts&quot; would point to another POJO), navigate to the accounts-POJO and set &quot;email&quot; to null there. Then you reformat the root POJO to JSON and apply a setting that omits fields with null values.\r\n\r\n__Edit__ (answer to the question in the comment):\r\n\r\nTo make it short, I don&#39;t know whether there is a built-in functionality or not but it should be doable.\r\n\r\nThe problem is that if you just provide keys like `email` etc. you might get situations where there are multiple keys so identifying the correct one could be hard. Thus it might be better to provide the key as `accounts.email` and split the &quot;key&quot; into sub-expressions and then traverse the Json tree using the parts or convert the Json to a POJO and use some expression language (e.g. Java EL or OGNL) to traverse the POJO.\r\n\r\nIf you want to remove all properties named `email` you could just travers the entire json tree, check whether there is a property with that name and if so remove it.","title":"Remove key from a Json inside a JsonObject","body":"<p>If Gson is like Jackson (I assume so) you'll have to first get the <code>JsonObject</code> \"accounts\" from the root object and then remove the member \"email\", e.g. like this:</p>\n\n<pre><code>jsonObj.getAsJsonObject(\"accounts\").remove(\"email\");\n</code></pre>\n\n<p>Alternatively - and probably the preferred way - you would map the json object to a POJO (one that has the fields \"status\", \"accounts\" and \"accounts\" would point to another POJO), navigate to the accounts-POJO and set \"email\" to null there. Then you reformat the root POJO to JSON and apply a setting that omits fields with null values.</p>\n\n<p><strong>Edit</strong> (answer to the question in the comment):</p>\n\n<p>To make it short, I don't know whether there is a built-in functionality or not but it should be doable.</p>\n\n<p>The problem is that if you just provide keys like <code>email</code> etc. you might get situations where there are multiple keys so identifying the correct one could be hard. Thus it might be better to provide the key as <code>accounts.email</code> and split the \"key\" into sub-expressions and then traverse the Json tree using the parts or convert the Json to a POJO and use some expression language (e.g. Java EL or OGNL) to traverse the POJO.</p>\n\n<p>If you want to remove all properties named <code>email</code> you could just travers the entire json tree, check whether there is a property with that name and if so remove it.</p>\n"},{"tags":[],"owner":{"account_id":3505199,"reputation":96,"user_id":2930871,"display_name":"nvntkmr"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1552298648,"creation_date":1552292285,"answer_id":55097685,"question_id":34092346,"body_markdown":"Alternatively, you can use below:\r\n\r\n    DocumentContext doc = JsonPath.parse(json);\r\n    doc.delete(jsonPath);\r\n\r\nWhere `json` and and `jsonPath` are strings.\r\n\r\nLibrary: [com.jayway.jsonpath.DocumentContext][1].\r\n\r\n\r\n  [1]: http://static.javadoc.io/com.jayway.jsonpath/json-path/2.2.0/com/jayway/jsonpath/DocumentContext.html","title":"Remove key from a Json inside a JsonObject","body":"<p>Alternatively, you can use below:</p>\n\n<pre><code>DocumentContext doc = JsonPath.parse(json);\ndoc.delete(jsonPath);\n</code></pre>\n\n<p>Where <code>json</code> and and <code>jsonPath</code> are strings.</p>\n\n<p>Library: <a href=\"http://static.javadoc.io/com.jayway.jsonpath/json-path/2.2.0/com/jayway/jsonpath/DocumentContext.html\" rel=\"nofollow noreferrer\">com.jayway.jsonpath.DocumentContext</a>.</p>\n"},{"tags":[],"owner":{"account_id":19093579,"reputation":497,"user_id":13943382,"display_name":"LucianDex"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1656422203,"creation_date":1630645476,"answer_id":69039757,"question_id":34092346,"body_markdown":"Another way to remove json key/value pair is to use `delete` function (in JavaScript).&lt;br&gt;\r\n\r\n```javascript\r\ndelete jsonObject.key1.subKey1;\r\n```\r\n\r\nTest data:\r\n```javascript\r\nvar jsonObject = {\r\n\tkey1: {\r\n  \tsubKey1: &#39;someText&#39;,\r\n    subKey2: &#39;someText&#39;\r\n  },\r\n  key2: &#39;anotherText&#39;\r\n};\r\n\r\nconsole.log(jsonObject);\r\n\r\ndelete jsonObject.key1.subKey1;\r\ndelete jsonObject.key2;\r\n\r\n\r\nconsole.log(jsonObject);\r\n```","title":"Remove key from a Json inside a JsonObject","body":"<p>Another way to remove json key/value pair is to use <code>delete</code> function (in JavaScript).<br></p>\n<pre class=\"lang-js prettyprint-override\"><code>delete jsonObject.key1.subKey1;\n</code></pre>\n<p>Test data:</p>\n<pre class=\"lang-js prettyprint-override\"><code>var jsonObject = {\n    key1: {\n    subKey1: 'someText',\n    subKey2: 'someText'\n  },\n  key2: 'anotherText'\n};\n\nconsole.log(jsonObject);\n\ndelete jsonObject.key1.subKey1;\ndelete jsonObject.key2;\n\n\nconsole.log(jsonObject);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":8256277,"reputation":418,"user_id":6209355,"display_name":"Yauheni Leaniuk"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1662552325,"creation_date":1662552325,"answer_id":73635214,"question_id":34092346,"body_markdown":"    import org.json.JSONObject\r\n    \r\n    // define/initialize jsonObj\r\n    jsonObj.remove(&quot;field_key&quot;)","title":"Remove key from a Json inside a JsonObject","body":"<pre><code>import org.json.JSONObject\n\n// define/initialize jsonObj\njsonObj.remove(&quot;field_key&quot;)\n</code></pre>\n"}],"owner":{"account_id":3075327,"reputation":1001,"user_id":2604853,"accept_rate":67,"display_name":"Anoop Philip"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":137947,"favorite_count":0,"down_vote_count":0,"up_vote_count":31,"accepted_answer_id":34093558,"answer_count":4,"score":31,"last_activity_date":1662552325,"creation_date":1449244766,"question_id":34092346,"body_markdown":"I have JsonObject like below\r\n\r\n    {&quot;status&quot;:&quot;ACTIVE&quot;,&quot;accounts&quot;:{&quot;email&quot;:&quot;email@gmail.com&quot;,&quot;name&quot;:&quot;Test&quot;}}\r\nHow can I remove Json key &quot;email&quot; and its value from the JsonObject by using something like `jsonObj.remove(&quot;email&quot;)` in java\r\n\r\nJsonObj.removev working for me if I need to remove status key `jsonObj.remove(&quot;status&quot;)`\r\n\r\nUpdate \r\n\r\nSome more background, \r\nThis is for mainly testing a rest end point. In my test I created java object matching to payload with Builder pattern and then covert to Json using GsonBuilder like\r\n\r\n    import com.google.gson.GsonBuilder;\r\n    import com.google.gson.JsonObject;\r\n    public class JsonConvertor() {\r\n    public static JsonObject convertToJsonObject(Object payload) {\r\n    GsonBuilder builder = new GsonBuilder();\r\n    return (JsonObject) builder.setFieldNamingPolicy(FieldNamingPolicy.Policy).\r\n                create().toJsonTree(payload);\r\n    }}\r\nIf I need to remove a required field I use, JsonObj.remove(&quot;key&quot;) on Json Object created by above function. \r\n    ","title":"Remove key from a Json inside a JsonObject","body":"<p>I have JsonObject like below</p>\n\n<pre><code>{\"status\":\"ACTIVE\",\"accounts\":{\"email\":\"email@gmail.com\",\"name\":\"Test\"}}\n</code></pre>\n\n<p>How can I remove Json key \"email\" and its value from the JsonObject by using something like <code>jsonObj.remove(\"email\")</code> in java</p>\n\n<p>JsonObj.removev working for me if I need to remove status key <code>jsonObj.remove(\"status\")</code></p>\n\n<p>Update </p>\n\n<p>Some more background, \nThis is for mainly testing a rest end point. In my test I created java object matching to payload with Builder pattern and then covert to Json using GsonBuilder like</p>\n\n<pre><code>import com.google.gson.GsonBuilder;\nimport com.google.gson.JsonObject;\npublic class JsonConvertor() {\npublic static JsonObject convertToJsonObject(Object payload) {\nGsonBuilder builder = new GsonBuilder();\nreturn (JsonObject) builder.setFieldNamingPolicy(FieldNamingPolicy.Policy).\n            create().toJsonTree(payload);\n}}\n</code></pre>\n\n<p>If I need to remove a required field I use, JsonObj.remove(\"key\") on Json Object created by above function. </p>\n"},{"tags":["java","spring","enums"],"comments":[{"owner":{"account_id":23959668,"reputation":26587,"user_id":17949945,"display_name":"Alexander Ivanchenko"},"score":1,"creation_date":1662551487,"post_id":73634963,"comment_id":130031020,"body_markdown":"You forget to describe the problem.","body":"You forget to describe the problem."},{"owner":{"account_id":23959668,"reputation":26587,"user_id":17949945,"display_name":"Alexander Ivanchenko"},"score":1,"creation_date":1662551567,"post_id":73634963,"comment_id":130031054,"body_markdown":"Names in Java **can&#39;t** start with a **digit**.","body":"Names in Java <b>can&#39;t</b> start with a <b>digit</b>."},{"owner":{"account_id":25315000,"reputation":27,"user_id":19137251,"display_name":"hamza"},"score":0,"creation_date":1662560395,"post_id":73634963,"comment_id":130034762,"body_markdown":"im trying to commicate with an API , where im supos to  send a request and it returns a reponse , and i have a problem with an enum where im supose to 1 , 2 , 3 , it gives me this error [ XML validation exception for element &#39;customerType&#39;: cvc-enumeration-valid: Value &#39;PARTICULIER&#39; is not facet-valid with respect to enumeration &#39;[1, 2, 3]&#39;. It must be a value from the enumeration.\nXML validation exception for element &#39;customerType&#39;: cvc-type.3.1.3: The value &#39;PARTICULIER&#39; of element &#39;customerType&#39; is not valid. ] , and in my customer typeEnumeration i have somthing like this SOCIETE(1)","body":"im trying to commicate with an API , where im supos to  send a request and it returns a reponse , and i have a problem with an enum where im supose to 1 , 2 , 3 , it gives me this error [ XML validation exception for element &#39;customerType&#39;: cvc-enumeration-valid: Value &#39;PARTICULIER&#39; is not facet-valid with respect to enumeration &#39;[1, 2, 3]&#39;. It must be a value from the enumeration. XML validation exception for element &#39;customerType&#39;: cvc-type.3.1.3: The value &#39;PARTICULIER&#39; of element &#39;customerType&#39; is not valid. ] , and in my customer typeEnumeration i have somthing like this SOCIETE(1)"}],"answers":[{"tags":[],"owner":{"account_id":18157117,"reputation":1,"user_id":13208993,"display_name":"X4DD3W"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1662552221,"creation_date":1662552221,"answer_id":73635193,"question_id":73634963,"body_markdown":"As far as I know there is no such thing like this in Java.  \r\nIf you **really** need enum for that, you can do it in reverse:\r\n\r\n     public enum TestEnum {\r\n    \r\n        TEST_1(1),\r\n        TEST_2(2);\r\n    \r\n        private final int value;\r\n    \r\n        TestEnum(int value) {\r\n            this.value = value;\r\n        }\r\n    \r\n        public int getValue() {\r\n            return value;\r\n        }\r\n    }","title":"creat an enumeration that containt Integer variables","body":"<p>As far as I know there is no such thing like this in Java.<br />\nIf you <strong>really</strong> need enum for that, you can do it in reverse:</p>\n<pre><code> public enum TestEnum {\n\n    TEST_1(1),\n    TEST_2(2);\n\n    private final int value;\n\n    TestEnum(int value) {\n        this.value = value;\n    }\n\n    public int getValue() {\n        return value;\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":25315000,"reputation":27,"user_id":19137251,"display_name":"hamza"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":57,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":1,"score":-1,"last_activity_date":1662552221,"creation_date":1662551234,"question_id":73634963,"body_markdown":"I want to create an enumeration that containt Integer variables , the result is needed to be something like this :\r\n\r\n```\r\n@AllArgsConstructor\r\n@Getter\r\npublic enum Test {\r\n\r\n    1(&quot;Test1&quot;),\r\n    2(&quot;Test2&quot;);\r\n    private final String value;\r\n}\r\n```\r\n","title":"creat an enumeration that containt Integer variables","body":"<p>I want to create an enumeration that containt Integer variables , the result is needed to be something like this :</p>\n<pre><code>@AllArgsConstructor\n@Getter\npublic enum Test {\n\n    1(&quot;Test1&quot;),\n    2(&quot;Test2&quot;);\n    private final String value;\n}\n</code></pre>\n"},{"tags":["java","class","object","generics","bounded-types"],"comments":[{"owner":{"account_id":23020603,"reputation":341,"user_id":17141716,"display_name":"peterz"},"score":1,"creation_date":1662553310,"post_id":73635170,"comment_id":130031774,"body_markdown":"`League&lt;Team&lt;Player&gt;&gt; league = new League&lt;&gt;(&quot;...&quot;);`","body":"<code>League&lt;Team&lt;Player&gt;&gt; league = new League&lt;&gt;(&quot;...&quot;);</code>"},{"owner":{"account_id":20510771,"reputation":1,"user_id":15052595,"display_name":"CHANDRA MOULIESH N"},"score":0,"creation_date":1662553459,"post_id":73635170,"comment_id":130031841,"body_markdown":"Fine, Could you pls explain the part &quot;League&lt;Team&lt;Player&gt;&gt;&quot;? Can&#39;t we just say League&lt;Player&gt;? I&#39;m scratching my head. Pls, provide an explanation.","body":"Fine, Could you pls explain the part &quot;League&lt;Team&lt;Player&gt;&gt;&quot;? Can&#39;t we just say League&lt;Player&gt;? I&#39;m scratching my head. Pls, provide an explanation."},{"owner":{"account_id":6520,"reputation":10523,"user_id":11002,"accept_rate":75,"display_name":"tgdavies"},"score":0,"creation_date":1662553461,"post_id":73635170,"comment_id":130031842,"body_markdown":"What ways did you try, and in what way did they not work?","body":"What ways did you try, and in what way did they not work?"},{"owner":{"account_id":6520,"reputation":10523,"user_id":11002,"accept_rate":75,"display_name":"tgdavies"},"score":0,"creation_date":1662553562,"post_id":73635170,"comment_id":130031887,"body_markdown":"The type parameter T in League says that T must extend Team. If you have a class Player which extends Team, you could say League&lt;Player&gt;. But you haven&#39;t shown your Player class.","body":"The type parameter T in League says that T must extend Team. If you have a class Player which extends Team, you could say League&lt;Player&gt;. But you haven&#39;t shown your Player class."},{"owner":{"account_id":6520,"reputation":10523,"user_id":11002,"accept_rate":75,"display_name":"tgdavies"},"score":0,"creation_date":1662553916,"post_id":73635170,"comment_id":130032030,"body_markdown":"Of course making Player extend Team is probably not what you want.","body":"Of course making Player extend Team is probably not what you want."}],"owner":{"account_id":20510771,"reputation":1,"user_id":15052595,"display_name":"CHANDRA MOULIESH N"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":104,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1662552125,"creation_date":1662552125,"question_id":73635170,"body_markdown":"   This is a generic class with bound type Player. \r\n\r\n     public class Team&lt;T extends Player&gt; implements Comparable&lt;Team&lt;T&gt;&gt; {\r\n        \r\n            private String name;\r\n            private int played=0;\r\n            private int won=0;\r\n            private int lost=0;\r\n            private int tide=0;\r\n        \r\n            private ArrayList&lt;T&gt; members = new ArrayList&lt;&gt;();\r\n        \r\n            public Team(String name) {\r\n                this.name = name;\r\n            }\r\n        \r\n            public String getName() {\r\n                return name;\r\n            }\r\n        \r\n            public int getWon() {\r\n                return won;\r\n            }\r\n        \r\n            public boolean addPlayer(T player){\r\n                if(members.contains(player)){\r\n                    System.out.println(player.getName() + &quot; is already on this team&quot; );\r\n                    return false;\r\n                }else{\r\n                    members.add(player);\r\n                    System.out.println(player.getName()+&quot; picked for team &quot;+this.name);\r\n                    return true;\r\n                }\r\n            }\r\n        \r\n            public int numPlayer(){\r\n                return this.members.size();\r\n            }\r\n        \r\n         }\r\n    \r\nThis is a generic class with bound Type as Team.\r\n\r\n    public class League&lt;T extends Team&gt;{\r\n        public String name;\r\n        private ArrayList&lt;T&gt; league = new ArrayList&lt;&gt;();\r\n    \r\n        public League(String name) {\r\n            this.name = name;\r\n        }\r\n    \r\n        public boolean addTeam(T team){\r\n            if(league.contains(team)){\r\n                System.out.println(&quot;It is already exist&quot;);\r\n                return false;\r\n            }else{\r\n                league.add(team);\r\n                return true;\r\n            }\r\n    \r\n        }\r\n    \r\n        public void showLeagueTable(){\r\n            Collections.sort(league);\r\n            for(T t:league){\r\n                System.out.println(t.getName()+&quot; : &quot;+t.ranking());\r\n            }\r\n        }\r\n    }\r\n    \r\nI don&#39;t know how to create an object for the League class, literally not able to figure out how to mention type. I&#39;ve tried several ways, but none of them worked for me. Could you guys help me with this code? \r\n            ","title":"How to create an object for generic class?","body":"<p>This is a generic class with bound type Player.</p>\n<pre><code> public class Team&lt;T extends Player&gt; implements Comparable&lt;Team&lt;T&gt;&gt; {\n    \n        private String name;\n        private int played=0;\n        private int won=0;\n        private int lost=0;\n        private int tide=0;\n    \n        private ArrayList&lt;T&gt; members = new ArrayList&lt;&gt;();\n    \n        public Team(String name) {\n            this.name = name;\n        }\n    \n        public String getName() {\n            return name;\n        }\n    \n        public int getWon() {\n            return won;\n        }\n    \n        public boolean addPlayer(T player){\n            if(members.contains(player)){\n                System.out.println(player.getName() + &quot; is already on this team&quot; );\n                return false;\n            }else{\n                members.add(player);\n                System.out.println(player.getName()+&quot; picked for team &quot;+this.name);\n                return true;\n            }\n        }\n    \n        public int numPlayer(){\n            return this.members.size();\n        }\n    \n     }\n</code></pre>\n<p>This is a generic class with bound Type as Team.</p>\n<pre><code>public class League&lt;T extends Team&gt;{\n    public String name;\n    private ArrayList&lt;T&gt; league = new ArrayList&lt;&gt;();\n\n    public League(String name) {\n        this.name = name;\n    }\n\n    public boolean addTeam(T team){\n        if(league.contains(team)){\n            System.out.println(&quot;It is already exist&quot;);\n            return false;\n        }else{\n            league.add(team);\n            return true;\n        }\n\n    }\n\n    public void showLeagueTable(){\n        Collections.sort(league);\n        for(T t:league){\n            System.out.println(t.getName()+&quot; : &quot;+t.ranking());\n        }\n    }\n}\n</code></pre>\n<p>I don't know how to create an object for the League class, literally not able to figure out how to mention type. I've tried several ways, but none of them worked for me. Could you guys help me with this code?</p>\n"},{"tags":["java","zip","zipinputstream"],"comments":[{"owner":{"account_id":2053598,"reputation":41316,"user_id":1831987,"display_name":"VGR"},"score":0,"creation_date":1662507718,"post_id":73628595,"comment_id":130020058,"body_markdown":"Each time you call `getNextEntry()`, you are reading a different entry in the zip.  One of those entries contains data which is one of your strings;  another one of those entries is your other string.  Test the value returned by `ze.getName()` to determine which entry is which.","body":"Each time you call <code>getNextEntry()</code>, you are reading a different entry in the zip.  One of those entries contains data which is one of your strings;  another one of those entries is your other string.  Test the value returned by <code>ze.getName()</code> to determine which entry is which."},{"owner":{"account_id":26265093,"reputation":1,"user_id":19935772,"display_name":"Sathish Kumar"},"score":0,"creation_date":1662509399,"post_id":73628595,"comment_id":130020248,"body_markdown":"I tried this with a zip file containing three files (word, pdf and jpg files). When the entire zip file content is represented as string, getNextEntry() only gives the first file name correctly. After that, it gives another file name as contents.xml. It is not reading the other two files.","body":"I tried this with a zip file containing three files (word, pdf and jpg files). When the entire zip file content is represented as string, getNextEntry() only gives the first file name correctly. After that, it gives another file name as contents.xml. It is not reading the other two files."},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1662546387,"post_id":73628595,"comment_id":130029005,"body_markdown":"*When the entire zip file content is represented as string, getNextEntry() only gives the first file name...* Actually it&#39;s not the content as string that seems to be the problem - it&#39;s that the whole zip file has come not from the file system, but from a byte array. I&#39;m having the same problem experimenting with this and it&#39;s got me surprised and stumped ;)","body":"<i>When the entire zip file content is represented as string, getNextEntry() only gives the first file name...</i> Actually it&#39;s not the content as string that seems to be the problem - it&#39;s that the whole zip file has come not from the file system, but from a byte array. I&#39;m having the same problem experimenting with this and it&#39;s got me surprised and stumped ;)"}],"answers":[{"tags":[],"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1662551851,"creation_date":1662551851,"answer_id":73635104,"question_id":73628595,"body_markdown":"Actually I think I was presenting the base64 file in string form incorrectly. For one thing, if line feeds are present in the input, it doesn&#39;t like it. If you&#39;re working on a Unix based system, you can run the below with something like java Unzip64 \r\n\r\n    &quot;$(cat a.zip | base64 | tr -d &#39;\\n&#39;)&quot;\r\n\r\nThe following is working fine for me\r\n\r\n    import java.util.zip.ZipInputStream;\r\n    import java.util.zip.ZipEntry;\r\n    import java.util.Base64;\r\n    import java.util.Map;\r\n    import java.util.HashMap;\r\n    import java.io.ByteArrayInputStream;\r\n    import java.io.ByteArrayOutputStream;\r\n    \r\n    public class Unzip64 {\r\n        public static void main(String[] args) {\r\n            System.out.println(Unzip64.getEntriesAndContents(args[0]));\r\n        }\r\n    \r\n        public static Map&lt;String, String&gt; getEntriesAndContents(String base64Zip) {\r\n            Map&lt;String, String&gt; result = new HashMap&lt;&gt;();\r\n            try {\r\n                byte[] data = Base64.getDecoder().decode(base64Zip);\r\n                ByteArrayInputStream bais = new ByteArrayInputStream(data);\r\n                try (ZipInputStream zin = new ZipInputStream(bais)) {\r\n                    ZipEntry ze = null;\r\n                    byte[] b = new byte[4096];\r\n    \r\n                    while ((ze = zin.getNextEntry()) != null) {\r\n                        ByteArrayOutputStream baos = new ByteArrayOutputStream();\r\n                        int numRead = -1;\r\n                        String entryName = ze.getName();\r\n                        while ((numRead = zin.read(b, 0, b.length)) &gt; -1) {\r\n                            baos.write(b, 0, numRead);\r\n                        }\r\n                        String entryData = new String(baos.toByteArray());\r\n                        result.put(entryName, entryData);\r\n                        baos = null;\r\n                        zin.closeEntry();\r\n                    }\r\n                }\r\n            } catch (Throwable t) {\r\n                t.printStackTrace();\r\n            }\r\n            return result;\r\n        }\r\n    }\r\n\r\n\r\nAnd here&#39;s a sample to run: \r\nUEsDBAoAAAgAAKdCJ1UAAAAAAAAAAAAAAAAHAAQAcm9vdC9hL/7KAABQSwMEFAAICAgAp0InVQAAAAAAAAAAAAAAAAwAAAByb290L2EvYS50eHRL5AIAUEsHCAeh6t0EAAAAAgAAAFBLAwQUAAgICACnQidVAAAAAAAAAAAAAAAADAAAAHJvb3QvYS9iLnR4dEviAgBQSwcIxPLH9gQAAAACAAAAUEsDBBQACAgIAKdCJ1UAAAAAAAAAAAAAAAAMAAAAcm9vdC9hL2MudHh0S+YCAFBLBwiFw9zvBAAAAAIAAABQSwECCgAKAAAIAACnQidVAAAAAAAAAAAAAAAABwAEAAAAAAAAAAAAAAAAAAAAcm9vdC9hL/7KAABQSwECFAAUAAgICACnQidVB6Hq3QQAAAACAAAADAAAAAAAAAAAAAAAAAApAAAAcm9vdC9hL2EudHh0UEsBAhQAFAAICAgAp0InVcTyx/YEAAAAAgAAAAwAAAAAAAAAAAAAAAAAZwAAAHJvb3QvYS9iLnR4dFBLAQIUABQACAgIAKdCJ1WFw9zvBAAAAAIAAAAMAAAAAAAAAAAAAAAAAKUAAAByb290L2EvYy50eHRQSwUGAAAAAAQABADnAAAA4wAAAAAA","title":"Zip file containing more than one file is sent as string. How to read the string and extract individual files in Java?","body":"<p>Actually I think I was presenting the base64 file in string form incorrectly. For one thing, if line feeds are present in the input, it doesn't like it. If you're working on a Unix based system, you can run the below with something like java Unzip64</p>\n<pre><code>&quot;$(cat a.zip | base64 | tr -d '\\n')&quot;\n</code></pre>\n<p>The following is working fine for me</p>\n<pre><code>import java.util.zip.ZipInputStream;\nimport java.util.zip.ZipEntry;\nimport java.util.Base64;\nimport java.util.Map;\nimport java.util.HashMap;\nimport java.io.ByteArrayInputStream;\nimport java.io.ByteArrayOutputStream;\n\npublic class Unzip64 {\n    public static void main(String[] args) {\n        System.out.println(Unzip64.getEntriesAndContents(args[0]));\n    }\n\n    public static Map&lt;String, String&gt; getEntriesAndContents(String base64Zip) {\n        Map&lt;String, String&gt; result = new HashMap&lt;&gt;();\n        try {\n            byte[] data = Base64.getDecoder().decode(base64Zip);\n            ByteArrayInputStream bais = new ByteArrayInputStream(data);\n            try (ZipInputStream zin = new ZipInputStream(bais)) {\n                ZipEntry ze = null;\n                byte[] b = new byte[4096];\n\n                while ((ze = zin.getNextEntry()) != null) {\n                    ByteArrayOutputStream baos = new ByteArrayOutputStream();\n                    int numRead = -1;\n                    String entryName = ze.getName();\n                    while ((numRead = zin.read(b, 0, b.length)) &gt; -1) {\n                        baos.write(b, 0, numRead);\n                    }\n                    String entryData = new String(baos.toByteArray());\n                    result.put(entryName, entryData);\n                    baos = null;\n                    zin.closeEntry();\n                }\n            }\n        } catch (Throwable t) {\n            t.printStackTrace();\n        }\n        return result;\n    }\n}\n</code></pre>\n<p>And here's a sample to run:\nUEsDBAoAAAgAAKdCJ1UAAAAAAAAAAAAAAAAHAAQAcm9vdC9hL/7KAABQSwMEFAAICAgAp0InVQAAAAAAAAAAAAAAAAwAAAByb290L2EvYS50eHRL5AIAUEsHCAeh6t0EAAAAAgAAAFBLAwQUAAgICACnQidVAAAAAAAAAAAAAAAADAAAAHJvb3QvYS9iLnR4dEviAgBQSwcIxPLH9gQAAAACAAAAUEsDBBQACAgIAKdCJ1UAAAAAAAAAAAAAAAAMAAAAcm9vdC9hL2MudHh0S+YCAFBLBwiFw9zvBAAAAAIAAABQSwECCgAKAAAIAACnQidVAAAAAAAAAAAAAAAABwAEAAAAAAAAAAAAAAAAAAAAcm9vdC9hL/7KAABQSwECFAAUAAgICACnQidVB6Hq3QQAAAACAAAADAAAAAAAAAAAAAAAAAApAAAAcm9vdC9hL2EudHh0UEsBAhQAFAAICAgAp0InVcTyx/YEAAAAAgAAAAwAAAAAAAAAAAAAAAAAZwAAAHJvb3QvYS9iLnR4dFBLAQIUABQACAgIAKdCJ1WFw9zvBAAAAAIAAAAMAAAAAAAAAAAAAAAAAKUAAAByb290L2EvYy50eHRQSwUGAAAAAAQABADnAAAA4wAAAAAA</p>\n"}],"owner":{"account_id":26265093,"reputation":1,"user_id":19935772,"display_name":"Sathish Kumar"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":251,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1662551851,"creation_date":1662506118,"question_id":73628595,"body_markdown":"Our external application sends the zip file name and content as two strings in the response to an API call. I converted the string to bytearray and used zipinputstream to read the bytearray. If the zip file contains only one file, I am able to read the string and extract the zipped file contents into a separate string. Below is the code snippet I used to extract the file content.\r\n\r\nIf the zipped file contains more than one file and the entire zipped content is sent as a single string, how do I extract individual file contents into separate strings? How to identify the end of each file in the string?\r\n\r\n    byte[] data = Base64Util.decodeToByteArray(ZipString);\r\n    ByteArrayInputStream bais = new ByteArrayInputStream(data);\r\n    ZipInputStream zin = new ZipInputStream(new BufferedInputStream(bais));\r\n    ZipEntry ze = null;\r\n    ByteArrayOutputStream baos = new ByteArrayOutputStream();\r\n    byte[] b =  new byte[4096];\r\n    String ZippedFileName = new String();\r\n    String ZippedFileData = new String();\r\n    \r\n    try \r\n    {\r\n     while((ze = zin.getNextEntry()) != null)\r\n     {\r\n    \tZippedFileName = ze.getName();\r\n    \twhile((zin.read(b,0,4096))!= -1)\r\n    \t{\r\n    \t\tbaos.write(b,0,4096);\r\n    \t}\r\n     }\r\n     byte[] out = baos.toByteArray();\r\n     ZippedFileData = Base64Util.encodeToString(out);\r\n     zin.close();\r\n     bais.close();\r\n     baos.close();\r\n    }\r\n    \r\n    catch(Exception Ex)\r\n    {\r\n    \tEx.toString();\r\n    }","title":"Zip file containing more than one file is sent as string. How to read the string and extract individual files in Java?","body":"<p>Our external application sends the zip file name and content as two strings in the response to an API call. I converted the string to bytearray and used zipinputstream to read the bytearray. If the zip file contains only one file, I am able to read the string and extract the zipped file contents into a separate string. Below is the code snippet I used to extract the file content.</p>\n<p>If the zipped file contains more than one file and the entire zipped content is sent as a single string, how do I extract individual file contents into separate strings? How to identify the end of each file in the string?</p>\n<pre><code>byte[] data = Base64Util.decodeToByteArray(ZipString);\nByteArrayInputStream bais = new ByteArrayInputStream(data);\nZipInputStream zin = new ZipInputStream(new BufferedInputStream(bais));\nZipEntry ze = null;\nByteArrayOutputStream baos = new ByteArrayOutputStream();\nbyte[] b =  new byte[4096];\nString ZippedFileName = new String();\nString ZippedFileData = new String();\n\ntry \n{\n while((ze = zin.getNextEntry()) != null)\n {\n    ZippedFileName = ze.getName();\n    while((zin.read(b,0,4096))!= -1)\n    {\n        baos.write(b,0,4096);\n    }\n }\n byte[] out = baos.toByteArray();\n ZippedFileData = Base64Util.encodeToString(out);\n zin.close();\n bais.close();\n baos.close();\n}\n\ncatch(Exception Ex)\n{\n    Ex.toString();\n}\n</code></pre>\n"},{"tags":["java","database","neo4j","nosql","cypher"],"owner":{"account_id":5046026,"reputation":306,"user_id":4052014,"accept_rate":0,"display_name":"Marcos"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":238,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":0,"score":2,"last_activity_date":1662551772,"creation_date":1662551772,"question_id":73635088,"body_markdown":"**Neo4j Enterprise 4.4.7**\r\n\r\n**Causal cluster with 3 nodes (1 leader + 2 followers)**\r\n\r\n**Data: 10M+ Nodes and 10M+ Rels**\r\n\r\nIt seems that our cluster has entered a corrupted state. We have a daily process in place that updates our database with new data. \r\n\r\nSince last Saturday it started failing. \r\n\r\nAfter investigating the issue it looks like **the database is keeping a reference to a deleted node** (??) \r\n\r\n[![Neo4j browser error][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/wz1AP.png\r\n\r\nThis seems to happen only when executed from the shell script batched query. If I execute the CREATE query manually it won&#39;t fail\r\n\r\n**Some other SO questions that I think are related to this one:**\r\n\r\nhttps://stackoverflow.com/questions/21937286/neo4j-2-0-unique-constraint-error-node-already-exists-when-it-does-not\r\n\r\nhttps://stackoverflow.com/questions/19771577/neo4j-constraint-deleted-node\r\n\r\n","title":"Neo4j IndexEntryConflictException when CREATE new node","body":"<p><strong>Neo4j Enterprise 4.4.7</strong></p>\n<p><strong>Causal cluster with 3 nodes (1 leader + 2 followers)</strong></p>\n<p><strong>Data: 10M+ Nodes and 10M+ Rels</strong></p>\n<p>It seems that our cluster has entered a corrupted state. We have a daily process in place that updates our database with new data.</p>\n<p>Since last Saturday it started failing.</p>\n<p>After investigating the issue it looks like <strong>the database is keeping a reference to a deleted node</strong> (??)</p>\n<p><a href=\"https://i.stack.imgur.com/wz1AP.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/wz1AP.png\" alt=\"Neo4j browser error\" /></a></p>\n<p>This seems to happen only when executed from the shell script batched query. If I execute the CREATE query manually it won't fail</p>\n<p><strong>Some other SO questions that I think are related to this one:</strong></p>\n<p><a href=\"https://stackoverflow.com/questions/21937286/neo4j-2-0-unique-constraint-error-node-already-exists-when-it-does-not\">Neo4j 2.0 unique constraint error &quot;node already exists&quot; when it does not</a></p>\n<p><a href=\"https://stackoverflow.com/questions/19771577/neo4j-constraint-deleted-node\">neo4j constraint deleted node</a></p>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":3242593,"reputation":579,"user_id":2838922,"accept_rate":85,"display_name":"Alexandre Vandermonde"},"score":0,"creation_date":1402272152,"post_id":24112096,"comment_id":37197282,"body_markdown":"@Reimeus: Thanks! How silly of me :) Any idea why the new data might not have been appended?","body":"@Reimeus: Thanks! How silly of me :) Any idea why the new data might not have been appended?"},{"owner":{"account_id":134022,"reputation":717183,"user_id":335858,"accept_rate":81,"display_name":"Sergey Kalinichenko"},"score":0,"creation_date":1402272347,"post_id":24112096,"comment_id":37197322,"body_markdown":"@AlexandreVandermonde It&#39;s strange that there&#39;s no append - are you sure the file is writable?","body":"@AlexandreVandermonde It&#39;s strange that there&#39;s no append - are you sure the file is writable?"},{"owner":{"account_id":3242593,"reputation":579,"user_id":2838922,"accept_rate":85,"display_name":"Alexandre Vandermonde"},"score":1,"creation_date":1402272800,"post_id":24112096,"comment_id":37197399,"body_markdown":"@dasblinkenlight: Upon further inspection of the file, I realize I might have been wrong in claiming there was no append. We can probably drop the issue. Thanks anyway!","body":"@dasblinkenlight: Upon further inspection of the file, I realize I might have been wrong in claiming there was no append. We can probably drop the issue. Thanks anyway!"}],"answers":[{"tags":[],"owner":{"account_id":134022,"reputation":717183,"user_id":335858,"accept_rate":81,"display_name":"Sergey Kalinichenko"},"down_vote_count":0,"up_vote_count":20,"is_accepted":true,"score":20,"last_activity_date":1402272004,"creation_date":1402272004,"answer_id":24112109,"question_id":24112096,"body_markdown":"[Pass `false` to the `append` parameter][1] to overwrite the file:\r\n\r\n    pw = new PrintWriter(new FileOutputStream(&quot;Foo.txt&quot;, false));\r\n\r\nPassing `true` for the second parameter indicates that you want to append to the file; passing `false` means that you want to overwrite the file.\r\n\r\n  [1]: http://docs.oracle.com/javase/7/docs/api/java/io/FileOutputStream.html#FileOutputStream%28java.io.File,%20boolean%29","title":"How to make PrintWriter overwrite old file","body":"<p><a href=\"http://docs.oracle.com/javase/7/docs/api/java/io/FileOutputStream.html#FileOutputStream%28java.io.File,%20boolean%29\">Pass <code>false</code> to the <code>append</code> parameter</a> to overwrite the file:</p>\n\n<pre><code>pw = new PrintWriter(new FileOutputStream(\"Foo.txt\", false));\n</code></pre>\n\n<p>Passing <code>true</code> for the second parameter indicates that you want to append to the file; passing <code>false</code> means that you want to overwrite the file.</p>\n"},{"tags":[],"owner":{"account_id":16403509,"reputation":81,"user_id":11848738,"display_name":"Neeraj Kumar"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1662551751,"creation_date":1580097345,"answer_id":59924973,"question_id":24112096,"body_markdown":"Simply pass second parameter **false**.\r\n\r\nAlso you can use other writer object instead of FileOutputStream as you are working with txt file. e.g\r\n\r\n    pw = new PrintWriter(new FileWriter(&quot;Foo.txt&quot;, false));\r\n\r\nor \r\n   \r\n\r\n    pw = new PrintWriter(new BufferedWriter(new FileWriter(&quot;Foo.txt&quot;, false)));\r\n\r\nwhile working with txt/docs files we should go for normal writer objects( `FileWriter` or `BufferedWriter`) and while working with binary file like .mp3 , image, pdf we should go for Streams ( `FileOutputStream` or `OutputStreamWriter` ).\r\n","title":"How to make PrintWriter overwrite old file","body":"<p>Simply pass second parameter <strong>false</strong>.</p>\n<p>Also you can use other writer object instead of FileOutputStream as you are working with txt file. e.g</p>\n<pre><code>pw = new PrintWriter(new FileWriter(&quot;Foo.txt&quot;, false));\n</code></pre>\n<p>or</p>\n<pre><code>pw = new PrintWriter(new BufferedWriter(new FileWriter(&quot;Foo.txt&quot;, false)));\n</code></pre>\n<p>while working with txt/docs files we should go for normal writer objects( <code>FileWriter</code> or <code>BufferedWriter</code>) and while working with binary file like .mp3 , image, pdf we should go for Streams ( <code>FileOutputStream</code> or <code>OutputStreamWriter</code> ).</p>\n"}],"owner":{"account_id":3242593,"reputation":579,"user_id":2838922,"accept_rate":85,"display_name":"Alexandre Vandermonde"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":19765,"favorite_count":0,"down_vote_count":1,"up_vote_count":12,"accepted_answer_id":24112109,"answer_count":2,"score":11,"last_activity_date":1662551751,"creation_date":1402271882,"question_id":24112096,"body_markdown":"I&#39;m working on a project where I need to print some data to a file. During debugging phase, I would like to overwrite the old textfile so that I don&#39;t have to delete the old file just to see the result of some changes that I&#39;ve made in the code. Currently, the new output data is either added to the old data in the file, or the file doesn&#39;t change at all (also, why could this be?). The following is, in essence, the printing part of the code:\r\n\r\n    public class Test {\r\n         public static void main(String[] arg) {\r\n\t     PrintWriter pw = null;\r\n\t     try {\r\n\t         pw = new PrintWriter(new FileOutputStream(&quot;Foo.txt&quot;, true));\r\n\t     } catch (Exception e){}\r\n\t     double abra = 5;\r\n\t     double kadabra = 7;\t\r\n\t     pw.printf(&quot;%f %f \\n&quot;, abra, kadabra);\r\n\t     pw.close();\r\n         }\r\n    }\r\n  \r\n\r\nThanks!","title":"How to make PrintWriter overwrite old file","body":"<p>I'm working on a project where I need to print some data to a file. During debugging phase, I would like to overwrite the old textfile so that I don't have to delete the old file just to see the result of some changes that I've made in the code. Currently, the new output data is either added to the old data in the file, or the file doesn't change at all (also, why could this be?). The following is, in essence, the printing part of the code:</p>\n\n<pre><code>public class Test {\n     public static void main(String[] arg) {\n     PrintWriter pw = null;\n     try {\n         pw = new PrintWriter(new FileOutputStream(\"Foo.txt\", true));\n     } catch (Exception e){}\n     double abra = 5;\n     double kadabra = 7;    \n     pw.printf(\"%f %f \\n\", abra, kadabra);\n     pw.close();\n     }\n}\n</code></pre>\n\n<p>Thanks!</p>\n"},{"tags":["java","wso2","wso2-enterprise-integrator"],"comments":[{"owner":{"account_id":10158538,"reputation":2222,"user_id":7502800,"accept_rate":100,"display_name":"usuario"},"score":0,"creation_date":1662549628,"post_id":73634002,"comment_id":130030264,"body_markdown":"is that `configuration` from mediaton or configuration file?","body":"is that <code>configuration</code> from mediaton or configuration file?"},{"owner":{"account_id":10932556,"reputation":1,"user_id":8035218,"display_name":"Venkatesh Puvvada"},"score":0,"creation_date":1662551782,"post_id":73634002,"comment_id":130031156,"body_markdown":"@usuario : Update code accordingly. Please help","body":"@usuario : Update code accordingly. Please help"},{"owner":{"account_id":3103561,"reputation":13341,"user_id":2627018,"accept_rate":81,"display_name":"ycr"},"score":0,"creation_date":1662552243,"post_id":73634002,"comment_id":130031339,"body_markdown":"How are you adding the Datasource?","body":"How are you adding the Datasource?"},{"owner":{"account_id":10932556,"reputation":1,"user_id":8035218,"display_name":"Venkatesh Puvvada"},"score":0,"creation_date":1662552611,"post_id":73634002,"comment_id":130031499,"body_markdown":"We are adding this data source from integration studio not by console.","body":"We are adding this data source from integration studio not by console."},{"owner":{"account_id":13839803,"reputation":1266,"user_id":9990440,"display_name":"Shanaka Dilan Premarathna"},"score":0,"creation_date":1662790517,"post_id":73634002,"comment_id":130091937,"body_markdown":"can you share the error that you are getting","body":"can you share the error that you are getting"},{"owner":{"account_id":4374011,"reputation":1381,"user_id":3567488,"accept_rate":71,"display_name":"Jenananthan"},"score":0,"creation_date":1664981866,"post_id":73634002,"comment_id":130593633,"body_markdown":"Are you using vanilla pack or WUM updated. Seems registry based secure vault look up is added to EI.6.6 after the release https://github.com/wso2/product-ei/issues/5335","body":"Are you using vanilla pack or WUM updated. Seems registry based secure vault look up is added to EI.6.6 after the release <a href=\"https://github.com/wso2/product-ei/issues/5335\" rel=\"nofollow noreferrer\">github.com/wso2/product-ei/issues/5335</a>"}],"owner":{"account_id":10932556,"reputation":1,"user_id":8035218,"display_name":"Venkatesh Puvvada"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":72,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1662551750,"creation_date":1662546789,"question_id":73634002,"body_markdown":"We are trying to use secure vault to store our passwords. If we fetch the secret values from dblookup in sequence we are able to fetch the passwords. But we are not able to fetch the passwords from data source. Below are my code snippets.\r\n        \r\nDBLookup Code Snippet : From here we call our DB     \r\n        \r\n  \r\n\r\n        &lt;insequence&gt;\r\n              &lt;dblookup&gt;\r\n                 &lt;connection&gt;\r\n                                    &lt;pool&gt;\r\n                                    &lt;driver&gt;com.microsoft.sqlserver.jdbc.SQLServerDriver&lt;/driver&gt;\r\n                                    &lt;url&gt;myurl&lt;/url&gt;\r\n                                    &lt;user&gt;username&lt;/user&gt;\r\n                                    &lt;password&gt;{wso2:vault-lookup(&#39;username&#39;)}&lt;/password&gt;\r\n                                    &lt;/pool&gt;\r\n                                &lt;/connection&gt;\r\n            &lt;/dblookup&gt;\r\n        &lt;/insequence&gt;\r\n                \r\n    &lt;!--Datasource Code Snippet.From here we call our DB--&gt;            \r\n        \r\n    \r\n    &lt;datasource&gt;\r\n        &lt;name&gt;DataSource2&lt;/name&gt;\r\n        &lt;description&gt;DB to get data&lt;/description&gt;\r\n        &lt;jndiConfig useDataSourceFactory=&quot;false&quot;&gt;\r\n            &lt;name&gt;DataSource2&lt;/name&gt;\r\n        &lt;/jndiConfig&gt;\r\n        &lt;definition type=&quot;RDBMS&quot;&gt;\r\n            &lt;configuration&gt;\r\n                &lt;driverClassName&gt;com.microsoft.sqlserver.jdbc.SQLServerDriver&lt;/driverClassName&gt;\r\n                &lt;url&gt;MyURL&lt;/url&gt;\r\n                &lt;username&gt;Username&lt;/username&gt;\r\n                &lt;password&gt;{wso2:vault-lookup(&#39;password&#39;)}&lt;/password&gt;\r\n            &lt;/configuration&gt;\r\n        &lt;/definition&gt;\r\n    &lt;/datasource&gt;\r\n    \r\n     \r\n    \r\n         &lt;dblookup&gt;\r\n                &lt;connection&gt;\r\n                    &lt;pool&gt;\r\n                        &lt;dsName&gt;DataSource2&lt;/dsName&gt;\r\n                    &lt;/pool&gt;\r\n                &lt;/connection&gt;          \r\n             &lt;/dblookup&gt; \r\n\r\n      \r\n    \r\nHow I can resolve this issue ?","title":"WSO2 EI 6.6.0 Secure Vault Issue","body":"<p>We are trying to use secure vault to store our passwords. If we fetch the secret values from dblookup in sequence we are able to fetch the passwords. But we are not able to fetch the passwords from data source. Below are my code snippets.</p>\n<p>DBLookup Code Snippet : From here we call our DB</p>\n<pre><code>    &lt;insequence&gt;\n          &lt;dblookup&gt;\n             &lt;connection&gt;\n                                &lt;pool&gt;\n                                &lt;driver&gt;com.microsoft.sqlserver.jdbc.SQLServerDriver&lt;/driver&gt;\n                                &lt;url&gt;myurl&lt;/url&gt;\n                                &lt;user&gt;username&lt;/user&gt;\n                                &lt;password&gt;{wso2:vault-lookup('username')}&lt;/password&gt;\n                                &lt;/pool&gt;\n                            &lt;/connection&gt;\n        &lt;/dblookup&gt;\n    &lt;/insequence&gt;\n            \n&lt;!--Datasource Code Snippet.From here we call our DB--&gt;            \n    \n\n&lt;datasource&gt;\n    &lt;name&gt;DataSource2&lt;/name&gt;\n    &lt;description&gt;DB to get data&lt;/description&gt;\n    &lt;jndiConfig useDataSourceFactory=&quot;false&quot;&gt;\n        &lt;name&gt;DataSource2&lt;/name&gt;\n    &lt;/jndiConfig&gt;\n    &lt;definition type=&quot;RDBMS&quot;&gt;\n        &lt;configuration&gt;\n            &lt;driverClassName&gt;com.microsoft.sqlserver.jdbc.SQLServerDriver&lt;/driverClassName&gt;\n            &lt;url&gt;MyURL&lt;/url&gt;\n            &lt;username&gt;Username&lt;/username&gt;\n            &lt;password&gt;{wso2:vault-lookup('password')}&lt;/password&gt;\n        &lt;/configuration&gt;\n    &lt;/definition&gt;\n&lt;/datasource&gt;\n\n \n\n     &lt;dblookup&gt;\n            &lt;connection&gt;\n                &lt;pool&gt;\n                    &lt;dsName&gt;DataSource2&lt;/dsName&gt;\n                &lt;/pool&gt;\n            &lt;/connection&gt;          \n         &lt;/dblookup&gt; \n\n  \n</code></pre>\n<p>How I can resolve this issue ?</p>\n"},{"tags":["java","hadoop","mapreduce"],"comments":[{"owner":{"account_id":2671330,"reputation":183376,"user_id":2308683,"accept_rate":90,"display_name":"OneCricketeer"},"score":1,"creation_date":1662487710,"post_id":73614887,"comment_id":130015365,"body_markdown":"I don&#39;t understand what you mean by &quot;twenty (-5)&quot;, &quot;sixteen (10)&quot;, or &quot;four (5)&quot; ... What &quot;shift&quot; operation are you referring to?","body":"I don&#39;t understand what you mean by &quot;twenty (-5)&quot;, &quot;sixteen (10)&quot;, or &quot;four (5)&quot; ... What &quot;shift&quot; operation are you referring to?"}],"answers":[{"tags":[],"owner":{"account_id":19769721,"reputation":57,"user_id":14476934,"display_name":"Bernard Joshua"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1662459805,"creation_date":1662459805,"answer_id":73620417,"question_id":73614887,"body_markdown":"Just intialize the wordCount to -20 and it should work. Worked for me!\r\n\r\n```\r\nint wordCount = -20;\r\n\r\n    for (IntWritable value : values) {\r\n      \r\n     \r\n        wordCount += value.get();\r\n    }\r\n    \r\n    \r\n    context.write(key, new IntWritable(wordCount));\r\n}\r\n```","title":"How do I find Word Count shifted minus twenty (-5) using MapReduce?","body":"<p>Just intialize the wordCount to -20 and it should work. Worked for me!</p>\n<pre><code>int wordCount = -20;\n\n    for (IntWritable value : values) {\n      \n     \n        wordCount += value.get();\n    }\n    \n    \n    context.write(key, new IntWritable(wordCount));\n}\n</code></pre>\n"}],"owner":{"account_id":26254121,"reputation":9,"user_id":19926450,"display_name":"dashboard34"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":97,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":1,"score":0,"last_activity_date":1662551557,"creation_date":1662414076,"question_id":73614887,"body_markdown":"Here&#39;s the sample code for the wordcount:\r\n\r\n**SumReducer.java** \r\n\r\n\t\tint wordCount = 0;\r\n\r\n\t\tfor (IntWritable value : values) {\r\n\t\t  \r\n\t\t \r\n\t\t\twordCount += value.get();\r\n\t\t}\r\n\t\t\r\n\t\t\r\n\t\tcontext.write(key, new IntWritable(wordCount));\r\n\t}\r\n\r\n\r\n**WordCount.java**\r\n\r\n    if (args.length != 2) {\r\n      System.out.printf(\r\n          &quot;Usage: WordCount &lt;input dir&gt; &lt;output dir&gt;\\n&quot;);\r\n      System.exit(-1);\r\n    }\r\n\r\n    Job job = new Job();\r\n    \r\n    job.setJarByClass(WordCount.class);\r\n    \r\n    \r\n    job.setJobName(&quot;Word Count&quot;);\r\n\r\n    FileInputFormat.setInputPaths(job, new Path(args[0]));\r\n    FileOutputFormat.setOutputPath(job, new Path(args[1]));\r\n\r\n\r\n    job.setMapperClass(WordMapper.class);\r\n    job.setReducerClass(SumReducer.class);\r\n    \r\n    job.setOutputKeyClass(Text.class);\r\n    job.setOutputValueClass(IntWritable.class);\r\n\r\n    \r\n    boolean success = job.waitForCompletion(true);\r\n    System.exit(success ? 0 : 1);\r\n  \r\n\r\n**WordMapper.java**\r\n\r\n    String line = value.toString();\r\n    \r\n    for (String word : line.split(&quot;\\\\W+&quot;)) {\r\n      if (word.length() &gt; 0) {         \r\n        context.write(new Text(word), new IntWritable(1));\r\n\r\n\r\nThe assigned shift value is minus twenty (-20). For example, assume the word “Alpha” appears sixteen (16) times in the input source, the shifted word count result for this word would be minus four (-4). ","title":"How do I find Word Count shifted minus twenty (-5) using MapReduce?","body":"<p>Here's the sample code for the wordcount:</p>\n<p><strong>SumReducer.java</strong></p>\n<pre><code>    int wordCount = 0;\n\n    for (IntWritable value : values) {\n      \n     \n        wordCount += value.get();\n    }\n    \n    \n    context.write(key, new IntWritable(wordCount));\n}\n</code></pre>\n<p><strong>WordCount.java</strong></p>\n<pre><code>if (args.length != 2) {\n  System.out.printf(\n      &quot;Usage: WordCount &lt;input dir&gt; &lt;output dir&gt;\\n&quot;);\n  System.exit(-1);\n}\n\nJob job = new Job();\n\njob.setJarByClass(WordCount.class);\n\n\njob.setJobName(&quot;Word Count&quot;);\n\nFileInputFormat.setInputPaths(job, new Path(args[0]));\nFileOutputFormat.setOutputPath(job, new Path(args[1]));\n\n\njob.setMapperClass(WordMapper.class);\njob.setReducerClass(SumReducer.class);\n\njob.setOutputKeyClass(Text.class);\njob.setOutputValueClass(IntWritable.class);\n\n\nboolean success = job.waitForCompletion(true);\nSystem.exit(success ? 0 : 1);\n</code></pre>\n<p><strong>WordMapper.java</strong></p>\n<pre><code>String line = value.toString();\n\nfor (String word : line.split(&quot;\\\\W+&quot;)) {\n  if (word.length() &gt; 0) {         \n    context.write(new Text(word), new IntWritable(1));\n</code></pre>\n<p>The assigned shift value is minus twenty (-20). For example, assume the word “Alpha” appears sixteen (16) times in the input source, the shifted word count result for this word would be minus four (-4).</p>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":17353525,"reputation":5513,"user_id":12571484,"display_name":"Adam"},"score":0,"creation_date":1662514108,"post_id":73628453,"comment_id":130020875,"body_markdown":"This looks like java so probably worth editing your tag from javascript to java.","body":"This looks like java so probably worth editing your tag from javascript to java."},{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1662514160,"post_id":73628453,"comment_id":130020883,"body_markdown":"Please clarify your specific problem or provide additional details to highlight exactly what you need. As it&#39;s currently written, it&#39;s hard to tell exactly what you&#39;re asking.","body":"Please clarify your specific problem or provide additional details to highlight exactly what you need. As it&#39;s currently written, it&#39;s hard to tell exactly what you&#39;re asking."}],"owner":{"account_id":26265027,"reputation":1,"user_id":19935724,"display_name":"Sprizen Dragon"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":56,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1662551429,"creation_date":1662504407,"question_id":73628453,"body_markdown":"I try to run gradlew setupDecompWorkspace and I get this Error. I&#39;m not sure how to solve this because I&#39;m fairly new to coding java.\r\n\r\nI am working on a Minecraft mod port of my own for a newer version.\r\n\r\nThis is the Error\r\n```\r\nFAILURE: Build failed with an exception.\r\n\r\n* What went wrong:\r\njava.lang.ExceptionInInitializerError (no error message)\r\n\r\n* Try:\r\nRun with --stacktrace option to get the stack trace. Run with --info or --debug option to get more log output.\r\n```\r\nThis is my --stacktrace\r\n```&gt;\r\n        at org.gradle.launcher.daemon.client.DaemonGreeter.parseDaemonOutput(DaemonGreeter.java:35)\r\n        at org.gradle.launcher.daemon.client.DefaultDaemonStarter.startProcess(DefaultDaemonStarter.java:160)\r\n        at org.gradle.launcher.daemon.client.DefaultDaemonStarter.startDaemon(DefaultDaemonStarter.java:136)\r\n        at org.gradle.launcher.daemon.client.DefaultDaemonConnector.doStartDaemon(DefaultDaemonConnector.java:212)\r\n        at org.gradle.launcher.daemon.client.DefaultDaemonConnector.startSingleUseDaemon(DefaultDaemonConnector.java:237)\r\n        at org.gradle.launcher.daemon.client.SingleUseDaemonClient.execute(SingleUseDaemonClient.java:51)\r\n        at org.gradle.launcher.daemon.client.SingleUseDaemonClient.execute(SingleUseDaemonClient.java:37)\r\n        at org.gradle.launcher.cli.RunBuildAction.run(RunBuildAction.java:52)\r\n        at org.gradle.internal.Actions$RunnableActionAdapter.execute(Actions.java:207)\r\n        at org.gradle.launcher.cli.CommandLineActionFactory$ParseAndBuildAction.execute(CommandLineActionFactory.java:402)\r\n        at org.gradle.launcher.cli.CommandLineActionFactory$ParseAndBuildAction.execute(CommandLineActionFactory.java:375)\r\n        at org.gradle.launcher.cli.ExceptionReportingAction.execute(ExceptionReportingAction.java:37)\r\n        at org.gradle.launcher.cli.ExceptionReportingAction.execute(ExceptionReportingAction.java:23)\r\n        at org.gradle.launcher.cli.CommandLineActionFactory$WithLogging.execute(CommandLineActionFactory.java:368)\r\n        at org.gradle.launcher.cli.CommandLineActionFactory$WithLogging.execute(CommandLineActionFactory.java:298)\r\n        at org.gradle.launcher.Main.doAction(Main.java:36)\r\n        at org.gradle.launcher.bootstrap.EntryPoint.run(EntryPoint.java:45)\r\n        at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n        at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)\r\n        at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n        at java.base/java.lang.reflect.Method.invoke(Method.java:568)\r\n        at org.gradle.launcher.bootstrap.ProcessBootstrap.runNoExit(ProcessBootstrap.java:60)\r\n        at org.gradle.launcher.bootstrap.ProcessBootstrap.run(ProcessBootstrap.java:37)\r\n        at org.gradle.launcher.GradleMain.main(GradleMain.java:23)\r\n        at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n        at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)\r\n        at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n        at java.base/java.lang.reflect.Method.invoke(Method.java:568)\r\n        at org.gradle.wrapper.BootstrapMainStarter.start(BootstrapMainStarter.java:31)\r\n        at org.gradle.wrapper.WrapperExecutor.execute(WrapperExecutor.java:108)\r\n        at org.gradle.wrapper.GradleWrapperMain.main(GradleWrapperMain.java:61)\r\n```\r\n","title":"I&#39;m trying to run a gradlew setupDecompWorkspace","body":"<p>I try to run gradlew setupDecompWorkspace and I get this Error. I'm not sure how to solve this because I'm fairly new to coding java.</p>\n<p>I am working on a Minecraft mod port of my own for a newer version.</p>\n<p>This is the Error</p>\n<pre><code>FAILURE: Build failed with an exception.\n\n* What went wrong:\njava.lang.ExceptionInInitializerError (no error message)\n\n* Try:\nRun with --stacktrace option to get the stack trace. Run with --info or --debug option to get more log output.\n</code></pre>\n<p>This is my --stacktrace</p>\n<pre><code>        at org.gradle.launcher.daemon.client.DaemonGreeter.parseDaemonOutput(DaemonGreeter.java:35)\n        at org.gradle.launcher.daemon.client.DefaultDaemonStarter.startProcess(DefaultDaemonStarter.java:160)\n        at org.gradle.launcher.daemon.client.DefaultDaemonStarter.startDaemon(DefaultDaemonStarter.java:136)\n        at org.gradle.launcher.daemon.client.DefaultDaemonConnector.doStartDaemon(DefaultDaemonConnector.java:212)\n        at org.gradle.launcher.daemon.client.DefaultDaemonConnector.startSingleUseDaemon(DefaultDaemonConnector.java:237)\n        at org.gradle.launcher.daemon.client.SingleUseDaemonClient.execute(SingleUseDaemonClient.java:51)\n        at org.gradle.launcher.daemon.client.SingleUseDaemonClient.execute(SingleUseDaemonClient.java:37)\n        at org.gradle.launcher.cli.RunBuildAction.run(RunBuildAction.java:52)\n        at org.gradle.internal.Actions$RunnableActionAdapter.execute(Actions.java:207)\n        at org.gradle.launcher.cli.CommandLineActionFactory$ParseAndBuildAction.execute(CommandLineActionFactory.java:402)\n        at org.gradle.launcher.cli.CommandLineActionFactory$ParseAndBuildAction.execute(CommandLineActionFactory.java:375)\n        at org.gradle.launcher.cli.ExceptionReportingAction.execute(ExceptionReportingAction.java:37)\n        at org.gradle.launcher.cli.ExceptionReportingAction.execute(ExceptionReportingAction.java:23)\n        at org.gradle.launcher.cli.CommandLineActionFactory$WithLogging.execute(CommandLineActionFactory.java:368)\n        at org.gradle.launcher.cli.CommandLineActionFactory$WithLogging.execute(CommandLineActionFactory.java:298)\n        at org.gradle.launcher.Main.doAction(Main.java:36)\n        at org.gradle.launcher.bootstrap.EntryPoint.run(EntryPoint.java:45)\n        at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n        at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)\n        at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n        at java.base/java.lang.reflect.Method.invoke(Method.java:568)\n        at org.gradle.launcher.bootstrap.ProcessBootstrap.runNoExit(ProcessBootstrap.java:60)\n        at org.gradle.launcher.bootstrap.ProcessBootstrap.run(ProcessBootstrap.java:37)\n        at org.gradle.launcher.GradleMain.main(GradleMain.java:23)\n        at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n        at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)\n        at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n        at java.base/java.lang.reflect.Method.invoke(Method.java:568)\n        at org.gradle.wrapper.BootstrapMainStarter.start(BootstrapMainStarter.java:31)\n        at org.gradle.wrapper.WrapperExecutor.execute(WrapperExecutor.java:108)\n        at org.gradle.wrapper.GradleWrapperMain.main(GradleWrapperMain.java:61)\n</code></pre>\n"},{"tags":["java","java-threads"],"answers":[{"tags":[],"owner":{"account_id":3211603,"reputation":289297,"user_id":2711488,"display_name":"Holger"},"down_vote_count":0,"up_vote_count":5,"is_accepted":true,"score":5,"last_activity_date":1662551207,"creation_date":1662551207,"answer_id":73634952,"question_id":73634727,"body_markdown":"Your threads are both synchronized on the same object. Therefore, you have to pay attention to the methods’s effect on synchronization:\r\n\r\n - [`Object.wait(…)`]:\r\n   - “This method causes the current thread (referred to here as *T*) to place itself in the wait set for this object and then **to relinquish any and all synchronization claims on this object**.”\r\n   - …\r\n   - “The thread *T* is then removed from the wait set for this object and re-enabled for thread scheduling. **It competes in the usual manner with other threads for the right to synchronize on the object**; once it has regained control of the object, all its synchronization claims on the object are restored to the status quo ante - that is, to the situation as of the time that the `wait` method was invoked.”\r\n\r\n - [`Thread.sleep(long)`]: “**The thread does not lose ownership of any monitors.**”\r\n\r\nSo, when the first thread invokes `wait`, it releases the lock, which is the only way how the second thread could even enter the `synchronized` block. Then, the second thread calls `sleep`, which does not release the lock. Therefore, after the time has elapsed, the first thread can not proceed, as it can’t acquire the lock, the second thread is still holding.\r\n\r\nOf course, if you extend the first thread’s waiting time, to wait longer than the second thread, the lock has been released in the meanwhile and the first thread can proceed immediately after the waiting time.\r\n\r\n[`Object.wait(…)`]: https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html#wait(long,int)\r\n[`Thread.sleep(long)`]: https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Thread.html#sleep(long)","title":"Thread not awake when timed wait elapsed in java","body":"<p>Your threads are both synchronized on the same object. Therefore, you have to pay attention to the methods’s effect on synchronization:</p>\n<ul>\n<li><p><a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html#wait(long,int)\" rel=\"noreferrer\"><code>Object.wait(…)</code></a>:</p>\n<ul>\n<li>“This method causes the current thread (referred to here as <em>T</em>) to place itself in the wait set for this object and then <strong>to relinquish any and all synchronization claims on this object</strong>.”</li>\n<li>…</li>\n<li>“The thread <em>T</em> is then removed from the wait set for this object and re-enabled for thread scheduling. <strong>It competes in the usual manner with other threads for the right to synchronize on the object</strong>; once it has regained control of the object, all its synchronization claims on the object are restored to the status quo ante - that is, to the situation as of the time that the <code>wait</code> method was invoked.”</li>\n</ul>\n</li>\n<li><p><a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Thread.html#sleep(long)\" rel=\"noreferrer\"><code>Thread.sleep(long)</code></a>: “<strong>The thread does not lose ownership of any monitors.</strong>”</p>\n</li>\n</ul>\n<p>So, when the first thread invokes <code>wait</code>, it releases the lock, which is the only way how the second thread could even enter the <code>synchronized</code> block. Then, the second thread calls <code>sleep</code>, which does not release the lock. Therefore, after the time has elapsed, the first thread can not proceed, as it can’t acquire the lock, the second thread is still holding.</p>\n<p>Of course, if you extend the first thread’s waiting time, to wait longer than the second thread, the lock has been released in the meanwhile and the first thread can proceed immediately after the waiting time.</p>\n"}],"owner":{"account_id":3830865,"reputation":13432,"user_id":3176419,"accept_rate":50,"display_name":"flyingfox"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":226,"favorite_count":0,"down_vote_count":0,"up_vote_count":6,"accepted_answer_id":73634952,"answer_count":1,"score":6,"last_activity_date":1662551226,"creation_date":1662550182,"question_id":73634727,"body_markdown":"I am study [wait(long timeout)][1] in java,and in the [offcial document][1] I found below description:\r\n&gt;- Some other thread invokes the notify method for this object and thread T happens to be arbitrarily chosen as the thread to be awakened.\r\n&gt;- Some other thread invokes the notifyAll method for this object.\r\n&gt;- Some other thread interrupts thread T.\r\n&gt;- The specified amount of real time has elapsed, more or less. If timeout is zero, however, then real time is not taken into consideration and the thread simply waits until notified.\r\n\r\nThe last item said `The specified amount of real time has elapsed, more or less`,so in my option if we invoke `wait(time)`,when time elapsed,the thread should awake itself.\r\n\r\nSo I wrote below code for test.\r\n\r\n    public static void testTimedWait() {\r\n        Object lock = new Object();\r\n        DateTimeFormatter df = DateTimeFormatter.ofPattern(&quot;HH:mm:ss:SSS&quot;);\r\n        new Thread(() -&gt; {\r\n            synchronized (lock) {\r\n                try {\r\n                    System.out.println(LocalTime.now().format(df) + &quot;\\t&quot; + Thread.currentThread().getName() + &quot; start to run&quot;);\r\n                    lock.wait(5_000);\r\n                    System.out.println(LocalTime.now().format(df) + &quot;\\t&quot; + Thread.currentThread().getName() + &quot; finished running&quot;);\r\n                } catch (InterruptedException e) {\r\n                    throw new RuntimeException(e);\r\n                }\r\n            }\r\n        }, &quot;thread-1&quot;).start();\r\n        new Thread(() -&gt; {\r\n            synchronized (lock) {\r\n                try {\r\n                    System.out.println(LocalTime.now().format(df) + &quot;\\t&quot; + Thread.currentThread().getName() + &quot; start to run&quot;);\r\n                    Thread.sleep(10_000);\r\n                    //lock.notifyAll();\r\n                    System.out.println(LocalTime.now().format(df) + &quot;\\t&quot; + Thread.currentThread().getName() + &quot; finished running&quot;);\r\n                } catch (InterruptedException e) {\r\n                    throw new RuntimeException(e);\r\n                }\r\n            }\r\n        }, &quot;thread-2&quot;).start();\r\n    }\r\n\r\n\r\nIn `Thread-1` I invoke `lock.wait(5_000)` and in `Thread-2` I invoke `Thread.sleep(10_000)`,so once the code start to run,`Thread-1` should awake after 5 seconds and `Thread-2` should awake after 10 seconds theoretically.\r\n\r\nWhen we run code above,the result listed like below:\r\n\r\n**`Thread-1` doesn&#39;t awake after 5 seconds!**\r\n\r\nCould someone help to understand **why thread not awake when the wait time has elasped,thanks in advance!**\r\n[![enter image description here][2]][2]\r\n\r\n---\r\nUpdate1:\r\n\r\nChange code as below:\r\n\r\n    public static void testTimedWait() {\r\n        Object lock = new Object();\r\n        DateTimeFormatter df = DateTimeFormatter.ofPattern(&quot;HH:mm:ss:SSS&quot;);\r\n        new Thread(() -&gt; {\r\n            synchronized (lock) {\r\n                try {\r\n                    System.out.println(LocalTime.now().format(df) + &quot;\\t&quot; + Thread.currentThread().getName() + &quot; start to run&quot;);\r\n                    lock.wait(20_000);\r\n                    System.out.println(LocalTime.now().format(df) + &quot;\\t&quot; + Thread.currentThread().getName() + &quot; finished running&quot;);\r\n                } catch (InterruptedException e) {\r\n                    throw new RuntimeException(e);\r\n                }\r\n            }\r\n        }, &quot;thread-1&quot;).start();\r\n        new Thread(() -&gt; {\r\n            synchronized (lock) {\r\n                try {\r\n                    System.out.println(LocalTime.now().format(df) + &quot;\\t&quot; + Thread.currentThread().getName() + &quot; start to run&quot;);\r\n                    Thread.sleep(10_000);\r\n                    //lock.notifyAll();\r\n                    System.out.println(LocalTime.now().format(df) + &quot;\\t&quot; + Thread.currentThread().getName() + &quot; finished running&quot;);\r\n                } catch (InterruptedException e) {\r\n                    throw new RuntimeException(e);\r\n                }\r\n            }\r\n        }, &quot;thread-2&quot;).start();\r\n    }\r\n\r\nAbove code make `Thread-1` wait for 20 seconds and `Thread-2` sleep for 10 seconds,`Thread-1` will awake after the specific seconds.Now it works as expected.\r\n\r\n[![enter image description here][3]][3]\r\n\r\n---\r\nUpdate2:\r\nRemove `Thread-2`\r\n\r\n    public static void testTimedWait() {\r\n        Object lock = new Object();\r\n        DateTimeFormatter df = DateTimeFormatter.ofPattern(&quot;HH:mm:ss:SSS&quot;);\r\n        new Thread(() -&gt; {\r\n            synchronized (lock) {\r\n                try {\r\n                    System.out.println(LocalTime.now().format(df) + &quot;\\t&quot; + Thread.currentThread().getName() + &quot; start to run&quot;);\r\n                    lock.wait(20_000);\r\n                    System.out.println(LocalTime.now().format(df) + &quot;\\t&quot; + Thread.currentThread().getName() + &quot; finished running&quot;);\r\n                } catch (InterruptedException e) {\r\n                    throw new RuntimeException(e);\r\n                }\r\n            }\r\n        }, &quot;thread-1&quot;).start();\r\n    }\r\n\r\nThe test result is also working as expected.But I still do not know why `Thread-1` not awake when it wait longer then `Thread-2`\r\n\r\n[![enter image description here][4]][4]\r\n\r\n\r\n  [1]: https://docs.oracle.com/javase/7/docs/api/java/lang/Object.html#wait(long)\r\n  [2]: https://i.stack.imgur.com/PS0vY.png\r\n  [3]: https://i.stack.imgur.com/beLqg.png\r\n  [4]: https://i.stack.imgur.com/tcoeM.png","title":"Thread not awake when timed wait elapsed in java","body":"<p>I am study <a href=\"https://docs.oracle.com/javase/7/docs/api/java/lang/Object.html#wait(long)\" rel=\"noreferrer\">wait(long timeout)</a> in java,and in the <a href=\"https://docs.oracle.com/javase/7/docs/api/java/lang/Object.html#wait(long)\" rel=\"noreferrer\">offcial document</a> I found below description:</p>\n<blockquote>\n<ul>\n<li>Some other thread invokes the notify method for this object and thread T happens to be arbitrarily chosen as the thread to be awakened.</li>\n<li>Some other thread invokes the notifyAll method for this object.</li>\n<li>Some other thread interrupts thread T.</li>\n<li>The specified amount of real time has elapsed, more or less. If timeout is zero, however, then real time is not taken into consideration and the thread simply waits until notified.</li>\n</ul>\n</blockquote>\n<p>The last item said <code>The specified amount of real time has elapsed, more or less</code>,so in my option if we invoke <code>wait(time)</code>,when time elapsed,the thread should awake itself.</p>\n<p>So I wrote below code for test.</p>\n<pre><code>public static void testTimedWait() {\n    Object lock = new Object();\n    DateTimeFormatter df = DateTimeFormatter.ofPattern(&quot;HH:mm:ss:SSS&quot;);\n    new Thread(() -&gt; {\n        synchronized (lock) {\n            try {\n                System.out.println(LocalTime.now().format(df) + &quot;\\t&quot; + Thread.currentThread().getName() + &quot; start to run&quot;);\n                lock.wait(5_000);\n                System.out.println(LocalTime.now().format(df) + &quot;\\t&quot; + Thread.currentThread().getName() + &quot; finished running&quot;);\n            } catch (InterruptedException e) {\n                throw new RuntimeException(e);\n            }\n        }\n    }, &quot;thread-1&quot;).start();\n    new Thread(() -&gt; {\n        synchronized (lock) {\n            try {\n                System.out.println(LocalTime.now().format(df) + &quot;\\t&quot; + Thread.currentThread().getName() + &quot; start to run&quot;);\n                Thread.sleep(10_000);\n                //lock.notifyAll();\n                System.out.println(LocalTime.now().format(df) + &quot;\\t&quot; + Thread.currentThread().getName() + &quot; finished running&quot;);\n            } catch (InterruptedException e) {\n                throw new RuntimeException(e);\n            }\n        }\n    }, &quot;thread-2&quot;).start();\n}\n</code></pre>\n<p>In <code>Thread-1</code> I invoke <code>lock.wait(5_000)</code> and in <code>Thread-2</code> I invoke <code>Thread.sleep(10_000)</code>,so once the code start to run,<code>Thread-1</code> should awake after 5 seconds and <code>Thread-2</code> should awake after 10 seconds theoretically.</p>\n<p>When we run code above,the result listed like below:</p>\n<p><strong><code>Thread-1</code> doesn't awake after 5 seconds!</strong></p>\n<p>Could someone help to understand <strong>why thread not awake when the wait time has elasped,thanks in advance!</strong>\n<a href=\"https://i.stack.imgur.com/PS0vY.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/PS0vY.png\" alt=\"enter image description here\" /></a></p>\n<hr />\n<p>Update1:</p>\n<p>Change code as below:</p>\n<pre><code>public static void testTimedWait() {\n    Object lock = new Object();\n    DateTimeFormatter df = DateTimeFormatter.ofPattern(&quot;HH:mm:ss:SSS&quot;);\n    new Thread(() -&gt; {\n        synchronized (lock) {\n            try {\n                System.out.println(LocalTime.now().format(df) + &quot;\\t&quot; + Thread.currentThread().getName() + &quot; start to run&quot;);\n                lock.wait(20_000);\n                System.out.println(LocalTime.now().format(df) + &quot;\\t&quot; + Thread.currentThread().getName() + &quot; finished running&quot;);\n            } catch (InterruptedException e) {\n                throw new RuntimeException(e);\n            }\n        }\n    }, &quot;thread-1&quot;).start();\n    new Thread(() -&gt; {\n        synchronized (lock) {\n            try {\n                System.out.println(LocalTime.now().format(df) + &quot;\\t&quot; + Thread.currentThread().getName() + &quot; start to run&quot;);\n                Thread.sleep(10_000);\n                //lock.notifyAll();\n                System.out.println(LocalTime.now().format(df) + &quot;\\t&quot; + Thread.currentThread().getName() + &quot; finished running&quot;);\n            } catch (InterruptedException e) {\n                throw new RuntimeException(e);\n            }\n        }\n    }, &quot;thread-2&quot;).start();\n}\n</code></pre>\n<p>Above code make <code>Thread-1</code> wait for 20 seconds and <code>Thread-2</code> sleep for 10 seconds,<code>Thread-1</code> will awake after the specific seconds.Now it works as expected.</p>\n<p><a href=\"https://i.stack.imgur.com/beLqg.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/beLqg.png\" alt=\"enter image description here\" /></a></p>\n<hr />\n<p>Update2:\nRemove <code>Thread-2</code></p>\n<pre><code>public static void testTimedWait() {\n    Object lock = new Object();\n    DateTimeFormatter df = DateTimeFormatter.ofPattern(&quot;HH:mm:ss:SSS&quot;);\n    new Thread(() -&gt; {\n        synchronized (lock) {\n            try {\n                System.out.println(LocalTime.now().format(df) + &quot;\\t&quot; + Thread.currentThread().getName() + &quot; start to run&quot;);\n                lock.wait(20_000);\n                System.out.println(LocalTime.now().format(df) + &quot;\\t&quot; + Thread.currentThread().getName() + &quot; finished running&quot;);\n            } catch (InterruptedException e) {\n                throw new RuntimeException(e);\n            }\n        }\n    }, &quot;thread-1&quot;).start();\n}\n</code></pre>\n<p>The test result is also working as expected.But I still do not know why <code>Thread-1</code> not awake when it wait longer then <code>Thread-2</code></p>\n<p><a href=\"https://i.stack.imgur.com/tcoeM.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/tcoeM.png\" alt=\"enter image description here\" /></a></p>\n"},{"tags":["java","xml","xsd","jaxb","xjc"],"answers":[{"tags":[],"owner":{"account_id":8901537,"reputation":133,"user_id":6644847,"display_name":"S. Kom"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1662551111,"creation_date":1662551111,"answer_id":73634923,"question_id":70869868,"body_markdown":"You are using the unmarshaller from *javax.xml.bind.Unmarshaller* in your Main class but your generated class uses annotations from package *jakarta.xml.bind.\\**. This mismatch led in my case to a quite similar error.\r\n\r\nTry recompiling after changing\r\n\r\n    import javax.xml.bind.JAXBContext;\r\n    import javax.xml.bind.Unmarshaller;\r\n\r\nto \r\n\r\n    import jakarta.xml.bind.JAXBContext;\r\n    import jakarta.xml.bind.Unmarshaller;\r\nin your main class.","title":"JAXB Unmarshall Error: UnmarshalException- Unexpected Element - Expected elements are (none) - @XmlRootElement NOT missing","body":"<p>You are using the unmarshaller from <em>javax.xml.bind.Unmarshaller</em> in your Main class but your generated class uses annotations from package <em>jakarta.xml.bind.*</em>. This mismatch led in my case to a quite similar error.</p>\n<p>Try recompiling after changing</p>\n<pre><code>import javax.xml.bind.JAXBContext;\nimport javax.xml.bind.Unmarshaller;\n</code></pre>\n<p>to</p>\n<pre><code>import jakarta.xml.bind.JAXBContext;\nimport jakarta.xml.bind.Unmarshaller;\n</code></pre>\n<p>in your main class.</p>\n"}],"owner":{"account_id":3729650,"reputation":1020,"user_id":3102471,"accept_rate":71,"display_name":"mbmast"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2823,"favorite_count":0,"down_vote_count":0,"up_vote_count":5,"answer_count":1,"score":5,"last_activity_date":1662551111,"creation_date":1643228981,"question_id":70869868,"body_markdown":"I am having problems unmarshalling some XML.  The partial stack dump looks like:\r\n\r\n    javax.xml.bind.UnmarshalException: unexpected element (uri:&quot;&quot;, local:&quot;properties&quot;). Expected elements are (none)\r\n    \tat com.sun.xml.internal.bind.v2.runtime.unmarshaller.UnmarshallingContext.handleEvent(UnmarshallingContext.java:726)\r\n    \tat com.sun.xml.internal.bind.v2.runtime.unmarshaller.Loader.reportError(Loader.java:247)\r\n    \tat com.sun.xml.internal.bind.v2.runtime.unmarshaller.Loader.reportError(Loader.java:242)\r\n\r\nBelow is the XML I am trying to unmarshal, the XJC generated root element Java class, the XSD fed into XJC and finally the XJC generated ObjectFactory.\r\n\r\nThe XML I am unmarshaling:\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n    &lt;properties program-name=&quot;EstateAccounting&quot;\r\n    \t\t\t\t\t\tproperties-file=&quot;EstateAccounting.properties&quot;&gt;\r\n    \t\t\t\t\t\t\r\n    \t&lt;keyword-properties&gt;\r\n    \t\t&lt;keyword-property type=&quot;string&quot; name=&quot;reportDirectory&quot; alias=&quot;rd&quot;&gt;\r\n    \t\t\t&lt;description&gt;\r\n    \t\t\t\t&lt;![CDATA[Specifies the optional report directory.  Double quotes are required if the report directory\r\n    \t\t\t\tcontains spaces.  The report directory specifies where the intermediate XML used to produce the PDF report\r\n    \t\t\t\tand where the PDF report should be produced.]]&gt;\r\n    \t\t\t&lt;/description&gt;\r\n    \t\t&lt;/keyword-property&gt;\r\n    \t\t\r\n    \t\t&lt;keyword-property type=&quot;string&quot; name=&quot;beneficiary&quot; alias=&quot;b&quot;&gt;\r\n    \t\t\t&lt;description&gt;\r\n    \t\t\t\t&lt;![CDATA[Specifies the optional beneficary name.  Double quotes are required if the beneficiary name\r\n    \t\t\t\tcontains spaces.  When omitted, all beneficiaries are included.]]&gt;\r\n    \t\t\t&lt;/description&gt;\r\n    \t\t&lt;/keyword-property&gt;\r\n    \t\t\r\n    \t\t&lt;keyword-property type=&quot;string&quot; name=&quot;date&quot; alias=&quot;d&quot;&gt;\r\n    \t\t\t&lt;description&gt;\r\n    \t\t\t\t&lt;![CDATA[Specifies the optional date(s).  The format is mm/yyyy.  Double quotes are required \r\n    \t\t\t\twhen specifying a date range as &quot;start-date - end-date&quot; (spaces optional).  When omitted,\r\n    \t\t\t\tall dates are included.]]&gt;\r\n    \t\t\t&lt;/description&gt;\r\n    \t\t&lt;/keyword-property&gt;\r\n    \t\t\r\n    \t\t&lt;keyword-property type=&quot;boolean&quot; name=&quot;isGenerateReport&quot; alias=&quot;r&quot;&gt;\r\n    \t\t\t&lt;description&gt;\r\n    \t\t\t\t&lt;![CDATA[Indicates that a PDF report should be produced.  One report for each generated XML file will be produced.]]&gt;\r\n    \t\t\t&lt;/description&gt;\r\n    \t\t&lt;/keyword-property&gt;\r\n    \t\t\r\n    \t\t&lt;keyword-property type=&quot;boolean&quot; name=&quot;isKeepIntermediateXML&quot; alias=&quot;xml&quot;&gt;\r\n    \t\t\t&lt;description&gt;\r\n    \t\t\t\t&lt;![CDATA[Indicates that the XML file used to produce the PDF report should be retained.  Normally, when the -r option\r\n    \t\t\t\tindicates that a PDF report should be produced, the generated intermediate XML file is deleted.]]&gt;\r\n    \t\t\t&lt;/description&gt;\r\n    \t\t&lt;/keyword-property&gt;\r\n    \t&lt;/keyword-properties&gt;\r\n    \t\r\n    \t&lt;positional-properties&gt;\r\n    \t\t&lt;positional-property type=&quot;string&quot; name=&quot;spreadsheet&quot; required=&quot;false&quot;&gt;\r\n    \t\t\t&lt;description&gt;\r\n    \t\t\t\t&lt;![CDATA[The location of the input spreadsheet.]]&gt;\r\n    \t\t\t&lt;/description&gt;\r\n    \t\t&lt;/positional-property&gt;\r\n    \t\t\r\n    \t\t&lt;positional-property type=&quot;string&quot; name=&quot;intermediateXML&quot; required=&quot;false&quot;&gt;\r\n    \t\t\t&lt;description&gt;\r\n    \t\t\t\t&lt;![CDATA[The location of a previously generated EstateAccounting intermediate XML file.  This is specified when \r\n                     a report based on previously generated intermediate XML is required.]]&gt;\r\n                &lt;/description&gt;\r\n    \t\t&lt;/positional-property&gt;\r\n    \t&lt;/positional-properties&gt;\r\n    \t\r\n    \t&lt;mutual-properties&gt;\r\n    \t\t&lt;mutual-property-set type=&quot;exclusive&quot;&gt;\r\n    \t\t\t&lt;mutual-property name=&quot;spreadsheet&quot;/&gt;\r\n    \t\t\t&lt;mutual-property name=&quot;intermediateXML&quot;/&gt;\r\n    \t\t&lt;/mutual-property-set&gt;\r\n    \t&lt;/mutual-properties&gt;\r\n    &lt;/properties&gt;\r\n\r\nThe partial XJC generated root element Java class.  Note the inclusion of `@XmlRootElement(name = &quot;properties&quot;)` on the `Properties` class:\r\n\r\n    //\r\n    // This file was generated by the Eclipse Implementation of JAXB, v3.0.2 \r\n    // See https://eclipse-ee4j.github.io/jaxb-ri \r\n    // Any modifications to this file will be lost upon recompilation of the source schema. \r\n    // Generated on: 2022.01.26 at 10:38:30 AM PST \r\n    //\r\n    \r\n    package com.mbm.properties.jaxb;\r\n    \r\n    import java.util.ArrayList;\r\n    import java.util.List;\r\n    import jakarta.xml.bind.annotation.XmlAccessType;\r\n    import jakarta.xml.bind.annotation.XmlAccessorType;\r\n    import jakarta.xml.bind.annotation.XmlAttribute;\r\n    import jakarta.xml.bind.annotation.XmlElement;\r\n    import jakarta.xml.bind.annotation.XmlRootElement;\r\n    import jakarta.xml.bind.annotation.XmlTransient;\r\n    import jakarta.xml.bind.annotation.XmlType;\r\n    import org.glassfish.jaxb.core.Locatable;\r\n    import org.glassfish.jaxb.core.annotation.XmlLocation;\r\n    import org.xml.sax.Locator;\r\n    \r\n    \r\n    /**\r\n     * &lt;p&gt;Java class for anonymous complex type.\r\n     * \r\n     * &lt;p&gt;The following schema fragment specifies the expected content contained within this class.\r\n     * \r\n     * &lt;pre&gt;\r\n     * &amp;lt;complexType&amp;gt;\r\n     *   &amp;lt;complexContent&amp;gt;\r\n     *     &amp;lt;restriction base=&quot;{http://www.w3.org/2001/XMLSchema}anyType&quot;&amp;gt;\r\n     *       &amp;lt;sequence&amp;gt;\r\n     *         &amp;lt;element name=&quot;description&quot; type=&quot;{urn:com-mbm-properties-jaxb}descriptionType&quot; maxOccurs=&quot;unbounded&quot; minOccurs=&quot;0&quot;/&amp;gt;\r\n     *         &amp;lt;element name=&quot;keyword-properties&quot; type=&quot;{urn:com-mbm-properties-jaxb}keywordPropertiesType&quot; minOccurs=&quot;0&quot;/&amp;gt;\r\n     *         &amp;lt;element name=&quot;positional-properties&quot; type=&quot;{urn:com-mbm-properties-jaxb}positionalPropertiesType&quot; minOccurs=&quot;0&quot;/&amp;gt;\r\n     *         &amp;lt;element name=&quot;mutual-properties&quot; type=&quot;{urn:com-mbm-properties-jaxb}MutualPropertiesType&quot; minOccurs=&quot;0&quot;/&amp;gt;\r\n     *       &amp;lt;/sequence&amp;gt;\r\n     *       &amp;lt;attribute name=&quot;program-name&quot; type=&quot;{http://www.w3.org/2001/XMLSchema}string&quot; /&amp;gt;\r\n     *       &amp;lt;attribute name=&quot;properties-file&quot; type=&quot;{http://www.w3.org/2001/XMLSchema}string&quot; /&amp;gt;\r\n     *       &amp;lt;attribute name=&quot;debug&quot; type=&quot;{http://www.w3.org/2001/XMLSchema}boolean&quot; default=&quot;false&quot; /&amp;gt;\r\n     *       &amp;lt;attribute name=&quot;strict-property-retrieval&quot; type=&quot;{http://www.w3.org/2001/XMLSchema}boolean&quot; default=&quot;true&quot; /&amp;gt;\r\n     *       &amp;lt;attribute name=&quot;strict-command-line&quot; type=&quot;{http://www.w3.org/2001/XMLSchema}boolean&quot; default=&quot;true&quot; /&amp;gt;\r\n     *       &amp;lt;attribute name=&quot;usage&quot; type=&quot;{http://www.w3.org/2001/XMLSchema}boolean&quot; default=&quot;false&quot; /&amp;gt;\r\n     *     &amp;lt;/restriction&amp;gt;\r\n     *   &amp;lt;/complexContent&amp;gt;\r\n     * &amp;lt;/complexType&amp;gt;\r\n     * &lt;/pre&gt;\r\n     * \r\n     * \r\n     */\r\n    @XmlAccessorType(XmlAccessType.FIELD)\r\n    @XmlType(name = &quot;&quot;, propOrder = {\r\n        &quot;descriptions&quot;,\r\n        &quot;containerOfListOfKeywordProperties&quot;,\r\n        &quot;containerOfListOfPositionalProperties&quot;,\r\n        &quot;mutualProperties&quot;\r\n    })\r\n    @XmlRootElement(name = &quot;properties&quot;)\r\n    public class Properties\r\n        implements Locatable\r\n    {\r\n    \r\n        @XmlElement(name = &quot;description&quot;)\r\n        protected List&lt;DescriptionType&gt; descriptions;\r\n        @XmlElement(name = &quot;keyword-properties&quot;)\r\n        protected KeywordPropertiesType containerOfListOfKeywordProperties;\r\n        @XmlElement(name = &quot;positional-properties&quot;)\r\n        protected PositionalPropertiesType containerOfListOfPositionalProperties;\r\n        @XmlElement(name = &quot;mutual-properties&quot;)\r\n        protected MutualPropertiesType mutualProperties;\r\n        @XmlAttribute(name = &quot;program-name&quot;)\r\n        protected String programName;\r\n        @XmlAttribute(name = &quot;properties-file&quot;)\r\n        protected String propertiesFile;\r\n        @XmlAttribute(name = &quot;debug&quot;)\r\n        protected Boolean debug;\r\n        @XmlAttribute(name = &quot;strict-property-retrieval&quot;)\r\n        protected Boolean strictPropertyRetrieval;\r\n        @XmlAttribute(name = &quot;strict-command-line&quot;)\r\n        protected Boolean strictCommandLine;\r\n        @XmlAttribute(name = &quot;usage&quot;)\r\n        protected Boolean usage;\r\n        @XmlLocation\r\n        @XmlTransient\r\n        protected Locator locator;\r\n    \r\n        .\r\n        .\r\n        .\r\n    \r\n        public Locator sourceLocation() {\r\n            return locator;\r\n        }\r\n    \r\n        public void setSourceLocation(Locator newLocator) {\r\n            locator = newLocator;\r\n        }\r\n    }\r\n\r\nThe XSD fed into XJC that generated the Java classes:\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n    &lt;xsd:schema xmlns:xjc=&quot;http://java.sun.com/xml/ns/jaxb/xjc&quot;\r\n    \t\t\txmlns:jaxb=&quot;https://jakarta.ee/xml/ns/jaxb&quot;\r\n    \t\t\txmlns:xsd=&quot;http://www.w3.org/2001/XMLSchema&quot;\r\n    \t\t\txmlns=&quot;urn:com-mbm-properties-jaxb&quot;\r\n    \t\t\ttargetNamespace=&quot;urn:com-mbm-properties-jaxb&quot;\r\n    \t\t\telementFormDefault=&quot;qualified&quot;\r\n    \t\t\tjaxb:extensionBindingPrefixes=&quot;xjc&quot;\r\n    \t\t\tjaxb:version=&quot;3.0&quot;&gt;\r\n    \r\n    \t&lt;xsd:annotation&gt;\r\n    \t\t&lt;xsd:appinfo&gt;\r\n    \t\t\t&lt;jaxb:globalBindings&gt;\r\n    \t\t\t\t&lt;xjc:simple/&gt;\r\n    \t\t\t&lt;/jaxb:globalBindings&gt;\r\n    \t\t&lt;/xsd:appinfo&gt;\r\n    \t&lt;/xsd:annotation&gt;\r\n    \t\r\n    \t&lt;xsd:element name=&quot;properties&quot;&gt;\r\n    \t\t&lt;xsd:complexType&gt;\r\n    \t\t\t&lt;xsd:sequence&gt;\r\n    \t\t\t\t&lt;xsd:element name=&quot;description&quot; type=&quot;descriptionType&quot; minOccurs=&quot;0&quot; maxOccurs=&quot;unbounded&quot;/&gt;\r\n    \t\t\t\t&lt;xsd:element name=&quot;keyword-properties&quot; type=&quot;keywordPropertiesType&quot; minOccurs=&quot;0&quot; maxOccurs=&quot;1&quot;&gt;\r\n    \t\t\t\t\t&lt;xsd:annotation&gt;\r\n    \t\t\t\t\t\t&lt;xsd:appinfo&gt;\r\n    \t\t\t\t\t\t\t&lt;jaxb:property name=&quot;containerOfListOfKeywordProperties&quot;/&gt;\r\n    \t\t\t\t\t\t&lt;/xsd:appinfo&gt;\r\n    \t\t\t\t\t&lt;/xsd:annotation&gt;\r\n    \t\t\t\t&lt;/xsd:element&gt;\r\n    \t\t\t\t&lt;xsd:element name=&quot;positional-properties&quot; type=&quot;positionalPropertiesType&quot; minOccurs=&quot;0&quot; maxOccurs=&quot;1&quot;&gt;\r\n    \t\t\t\t\t&lt;xsd:annotation&gt;\r\n    \t\t\t\t\t\t&lt;xsd:appinfo&gt;\r\n    \t\t\t\t\t\t\t&lt;jaxb:property name=&quot;containerOfListOfPositionalProperties&quot;/&gt;\r\n    \t\t\t\t\t\t&lt;/xsd:appinfo&gt;\r\n    \t\t\t\t\t&lt;/xsd:annotation&gt;\r\n    \t\t\t\t&lt;/xsd:element&gt;\r\n    \t\t\t\t&lt;xsd:element name=&quot;mutual-properties&quot; type=&quot;MutualPropertiesType&quot; minOccurs=&quot;0&quot; maxOccurs=&quot;1&quot;/&gt;\r\n    \t\t\t&lt;/xsd:sequence&gt;\r\n    \t\t\t&lt;xsd:attribute name=&quot;program-name&quot; type=&quot;xsd:string&quot; use=&quot;optional&quot;/&gt;\r\n    \t\t\t&lt;xsd:attribute name=&quot;properties-file&quot; type=&quot;xsd:string&quot; use=&quot;optional&quot;/&gt;\r\n    \t\t\t&lt;xsd:attribute name=&quot;debug&quot; type=&quot;xsd:boolean&quot; use=&quot;optional&quot; default=&quot;false&quot;/&gt;\r\n    \t\t\t&lt;xsd:attribute name=&quot;strict-property-retrieval&quot; type=&quot;xsd:boolean&quot; use=&quot;optional&quot; default=&quot;true&quot;/&gt;\r\n    \t\t\t&lt;xsd:attribute name=&quot;strict-command-line&quot; type=&quot;xsd:boolean&quot; use=&quot;optional&quot; default=&quot;true&quot;/&gt;\r\n    \t\t\t&lt;xsd:attribute name=&quot;usage&quot; type=&quot;xsd:boolean&quot; use=&quot;optional&quot; default=&quot;false&quot;/&gt;\r\n    \t\t&lt;/xsd:complexType&gt;\r\n    \t&lt;/xsd:element&gt;\r\n    \r\n    \t&lt;xsd:complexType name=&quot;PropertyBase&quot; abstract=&quot;true&quot;&gt;\r\n    \t\t&lt;xsd:annotation&gt;\r\n    \t\t\t&lt;xsd:appinfo&gt;\r\n    \t\t\t\t&lt;jaxb:class name=&quot;DummyPropertyBase&quot; implClass=&quot;com.mbm.properties.baseclasses.PropertyBase&quot;/&gt;\r\n    \t\t\t&lt;/xsd:appinfo&gt;\r\n    \t\t&lt;/xsd:annotation&gt;\r\n    \t&lt;/xsd:complexType&gt;\r\n    \t\r\n    \t&lt;xsd:complexType name=&quot;PropertyType&quot; abstract=&quot;true&quot;&gt;\r\n    \t\t&lt;xsd:complexContent&gt;\r\n    \t\t\t&lt;xsd:extension base=&quot;PropertyBase&quot;&gt;\r\n    \t\t\t\t&lt;xsd:sequence&gt;\r\n    \t\t\t\t\t&lt;xsd:element name=&quot;description&quot; type=&quot;descriptionType&quot; minOccurs=&quot;0&quot; maxOccurs=&quot;unbounded&quot;/&gt;\r\n    \t\t\t\t\t&lt;xsd:element name=&quot;forValues&quot; type=&quot;forValueType&quot; minOccurs=&quot;0&quot; maxOccurs=&quot;unbounded&quot;/&gt;\r\n    \t\t\t\t&lt;/xsd:sequence&gt;\r\n    \t\t\t\t&lt;xsd:attribute name=&quot;type&quot; use=&quot;required&quot;&gt;\r\n    \t\t\t\t\t&lt;xsd:simpleType&gt;\r\n    \t\t\t\t\t\t&lt;xsd:restriction base=&quot;xsd:token&quot;&gt;\r\n    \t\t\t\t\t\t\t&lt;xsd:enumeration value=&quot;integer&quot;/&gt;\r\n    \t\t\t\t\t\t\t&lt;xsd:enumeration value=&quot;float&quot;/&gt;\r\n    \t\t\t\t\t\t\t&lt;xsd:enumeration value=&quot;boolean&quot;/&gt;\r\n    \t\t\t\t\t\t\t&lt;xsd:enumeration value=&quot;string&quot;/&gt;\r\n    \t\t\t\t\t\t&lt;/xsd:restriction&gt;\r\n    \t\t\t\t\t&lt;/xsd:simpleType&gt;\r\n    \t\t\t\t&lt;/xsd:attribute&gt;\r\n    \t\t\t\t&lt;xsd:attribute name=&quot;name&quot; type=&quot;xsd:string&quot; use=&quot;required&quot;/&gt;\r\n    \t\t\t\t&lt;xsd:attribute name=&quot;required&quot; type=&quot;xsd:boolean&quot; use=&quot;optional&quot; default=&quot;false&quot;/&gt;\r\n    \t\t\t\t&lt;xsd:attribute name=&quot;alias&quot; type=&quot;xsd:string&quot; use=&quot;optional&quot;/&gt;\r\n    \t\t\t&lt;/xsd:extension&gt;\r\n    \t\t&lt;/xsd:complexContent&gt;\r\n    \t&lt;/xsd:complexType&gt;\r\n    \t\r\n    \t&lt;xsd:complexType name=&quot;keywordPropertiesType&quot;&gt;\r\n    \t\t&lt;xsd:sequence&gt;\r\n    \t\t\t&lt;xsd:element name=&quot;keyword-property&quot; type=&quot;keywordPropertyType&quot; minOccurs=&quot;1&quot; maxOccurs=&quot;unbounded&quot;&gt;\r\n    \t\t\t\t&lt;xsd:annotation&gt;\r\n    \t\t\t\t\t&lt;xsd:appinfo&gt;\r\n    \t\t\t\t\t\t&lt;jaxb:property name=&quot;listOfKeywordProperties&quot;/&gt;\r\n    \t\t\t\t\t&lt;/xsd:appinfo&gt;\r\n    \t\t\t\t&lt;/xsd:annotation&gt;\r\n    \t\t\t&lt;/xsd:element&gt;\r\n    \t\t&lt;/xsd:sequence&gt;\r\n    \t&lt;/xsd:complexType&gt;\r\n    \t\r\n    \t&lt;xsd:complexType name=&quot;keywordPropertyType&quot;&gt;\r\n    \t\t&lt;xsd:complexContent&gt;\r\n    \t\t\t&lt;xsd:extension base=&quot;PropertyType&quot;&gt;\r\n    \t\t\t\t&lt;xsd:sequence&gt;\r\n    \t\t\t\t\t&lt;xsd:element name=&quot;challenges&quot; type=&quot;ChallengeType&quot; minOccurs=&quot;0&quot; maxOccurs=&quot;unbounded&quot;/&gt;\r\n    \t\t\t\t&lt;/xsd:sequence&gt;\r\n    \t\t\t\t&lt;xsd:attribute name=&quot;default-value&quot; type=&quot;xsd:string&quot; use=&quot;optional&quot;/&gt;\r\n    \t\t\t\t&lt;xsd:attribute name=&quot;valid-values&quot; type=&quot;xsd:string&quot; use=&quot;optional&quot;/&gt;\r\n    \t\t\t&lt;/xsd:extension&gt;\r\n    \t\t&lt;/xsd:complexContent&gt;\r\n    \t&lt;/xsd:complexType&gt;\r\n    \r\n    \t&lt;xsd:complexType name=&quot;positionalPropertiesType&quot;&gt;\r\n    \t\t&lt;xsd:sequence&gt;\r\n    \t\t\t&lt;xsd:element name=&quot;positional-property&quot; type=&quot;positionalPropertyType&quot; minOccurs=&quot;1&quot; maxOccurs=&quot;unbounded&quot;&gt;\r\n    \t\t\t\t&lt;xsd:annotation&gt;\r\n    \t\t\t\t\t&lt;xsd:appinfo&gt;\r\n    \t\t\t\t\t\t&lt;jaxb:property name=&quot;listOfPositionalProperties&quot;/&gt;\r\n    \t\t\t\t\t&lt;/xsd:appinfo&gt;\r\n    \t\t\t\t&lt;/xsd:annotation&gt;\r\n    \t\t\t&lt;/xsd:element&gt;\r\n    \t\t&lt;/xsd:sequence&gt;\r\n    \t&lt;/xsd:complexType&gt;\r\n    \r\n    \t&lt;xsd:complexType name=&quot;positionalPropertyType&quot;&gt;\r\n    \t\t&lt;xsd:complexContent&gt;\r\n    \t\t\t&lt;xsd:extension base=&quot;PropertyType&quot;/&gt;\r\n    \t\t&lt;/xsd:complexContent&gt;\r\n    \t&lt;/xsd:complexType&gt;\r\n    \t\r\n    \t&lt;xsd:complexType name=&quot;ForValueBase&quot; abstract=&quot;true&quot;&gt;\r\n    \t\t&lt;xsd:annotation&gt;\r\n    \t\t\t&lt;xsd:appinfo&gt;\r\n    \t\t\t\t&lt;jaxb:class name=&quot;DummyForValueBase&quot; implClass=&quot;com.mbm.properties.baseclasses.ForValueBase&quot;/&gt;\r\n    \t\t\t&lt;/xsd:appinfo&gt;\r\n    \t\t&lt;/xsd:annotation&gt;\r\n    \t&lt;/xsd:complexType&gt;\r\n    \t\r\n    \t&lt;xsd:complexType name=&quot;forValueType&quot;&gt;\r\n    \t\t&lt;xsd:complexContent&gt;\r\n    \t\t\t&lt;xsd:extension base=&quot;ForValueBase&quot;&gt;\r\n    \t\t\t\t&lt;xsd:sequence&gt;\r\n    \t\t\t\t\t&lt;xsd:element name=&quot;description&quot; type=&quot;descriptionType&quot; minOccurs=&quot;0&quot; maxOccurs=&quot;unbounded&quot;/&gt;\r\n    \t\t\t\t&lt;/xsd:sequence&gt;\r\n    \t\t\t\t&lt;xsd:attribute name=&quot;value&quot; type=&quot;xsd:string&quot; use=&quot;required&quot;/&gt;\r\n    \t\t\t\t&lt;xsd:attribute name=&quot;implies&quot; type=&quot;xsd:string&quot; use=&quot;optional&quot;/&gt;\r\n    \t\t\t&lt;/xsd:extension&gt;\r\n    \t\t&lt;/xsd:complexContent&gt;\r\n    \t&lt;/xsd:complexType&gt;\r\n    \t\r\n    \t&lt;xsd:complexType name=&quot;descriptionType&quot;&gt;\r\n    \t\t&lt;xsd:simpleContent&gt;\r\n    \t\t\t&lt;xsd:extension base=&quot;xsd:string&quot;&gt;\r\n    \t\t\t\t&lt;xsd:attribute name=&quot;reformat&quot; type=&quot;xsd:boolean&quot; use=&quot;optional&quot; default=&quot;true&quot;/&gt;\r\n    \t\t\t\t&lt;xsd:attribute name=&quot;includeImplies&quot; type=&quot;xsd:boolean&quot; use=&quot;optional&quot; default=&quot;true&quot;/&gt;\r\n    \t\t\t&lt;/xsd:extension&gt;\r\n    \t\t&lt;/xsd:simpleContent&gt;\r\n    \t&lt;/xsd:complexType&gt;\r\n    \r\n    \t&lt;xsd:complexType name=&quot;ChallengeBase&quot; abstract=&quot;true&quot;&gt;\r\n    \t\t&lt;xsd:annotation&gt;\r\n    \t\t\t&lt;xsd:appinfo&gt;\r\n    \t\t\t\t&lt;jaxb:class name=&quot;DummyChallengeBase&quot; implClass=&quot;com.mbm.properties.baseclasses.ChallengeBase&quot;/&gt;\r\n    \t\t\t&lt;/xsd:appinfo&gt;\r\n    \t\t&lt;/xsd:annotation&gt;\r\n    \t&lt;/xsd:complexType&gt;\r\n    \t\r\n    \t&lt;xsd:complexType name=&quot;ChallengeType&quot; abstract=&quot;true&quot;&gt;\r\n    \t\t&lt;xsd:complexContent&gt;\r\n    \t\t\t&lt;xsd:extension base=&quot;ChallengeBase&quot;&gt;\r\n    \t\t\t\t&lt;xsd:attribute name=&quot;forValue&quot; type=&quot;xsd:string&quot;/&gt;\r\n    \t\t\t\t&lt;xsd:attribute name=&quot;instruction&quot; type=&quot;xsd:string&quot;/&gt;\r\n    \t\t\t\t&lt;xsd:attribute name=&quot;passChallengeValue&quot; type=&quot;xsd:string&quot;/&gt;\r\n    \t\t\t\t&lt;xsd:attribute name=&quot;failChallengeValue&quot; type=&quot;xsd:string&quot; use=&quot;optional&quot;/&gt;\r\n    \t\t\t&lt;/xsd:extension&gt;\r\n    \t\t&lt;/xsd:complexContent&gt;\r\n    \t&lt;/xsd:complexType&gt;\r\n    \r\n    \t&lt;xsd:complexType name=&quot;MutualPropertiesType&quot;&gt;\r\n    \t\t&lt;xsd:sequence&gt;\r\n    \t\t\t&lt;xsd:element name=&quot;mutual-property-set&quot; type=&quot;MutualPropertySetType&quot; minOccurs=&quot;1&quot; maxOccurs=&quot;unbounded&quot;/&gt;\r\n    \t\t&lt;/xsd:sequence&gt;\r\n    \t&lt;/xsd:complexType&gt;\r\n    \r\n    \t&lt;xsd:complexType name=&quot;MutualPropertySetBase&quot; abstract=&quot;true&quot;&gt;\r\n    \t\t&lt;xsd:annotation&gt;\r\n    \t\t\t&lt;xsd:appinfo&gt;\r\n    \t\t\t\t&lt;jaxb:class name=&quot;DummyMutualPropertySetBase&quot; implClass=&quot;com.mbm.properties.baseclasses.MutualPropertySetBase&quot;/&gt;\r\n    \t\t\t&lt;/xsd:appinfo&gt;\r\n    \t\t&lt;/xsd:annotation&gt;\r\n    \t&lt;/xsd:complexType&gt;\r\n    \r\n    \t&lt;xsd:complexType name=&quot;MutualPropertySetType&quot;&gt;\r\n    \t\t&lt;xsd:complexContent&gt;\r\n    \t\t\t&lt;xsd:extension base=&quot;MutualPropertySetBase&quot;&gt;\r\n    \t\t\t\t&lt;xsd:sequence&gt;\r\n    \t\t\t\t\t&lt;xsd:element name=&quot;mutual-property&quot; type=&quot;mutualPropertyType&quot; minOccurs=&quot;1&quot; maxOccurs=&quot;unbounded&quot;/&gt;\r\n    \t\t\t\t&lt;/xsd:sequence&gt;\r\n    \t\t\t\t&lt;xsd:attribute name=&quot;type&quot; use=&quot;required&quot;&gt;\r\n    \t\t\t\t\t&lt;xsd:simpleType&gt;\r\n    \t\t\t\t\t\t&lt;xsd:restriction base=&quot;xsd:token&quot;&gt;\r\n    \t\t\t\t\t\t\t&lt;xsd:enumeration value=&quot;inclusive&quot;/&gt;\r\n    \t\t\t\t\t\t\t&lt;xsd:enumeration value=&quot;exclusive&quot;/&gt;\r\n    \t\t\t\t\t\t&lt;/xsd:restriction&gt;\r\n    \t\t\t\t\t&lt;/xsd:simpleType&gt;\r\n    \t\t\t\t&lt;/xsd:attribute&gt;\r\n    \t\t\t\t&lt;xsd:attribute name=&quot;name&quot; type=&quot;xsd:string&quot; use=&quot;optional&quot;/&gt;\r\n    \t\t\t&lt;/xsd:extension&gt;\r\n    \t\t&lt;/xsd:complexContent&gt;\r\n    \t&lt;/xsd:complexType&gt;\r\n    \r\n    \t&lt;xsd:complexType name=&quot;mutualPropertyType&quot;&gt;\r\n    \t\t&lt;xsd:attribute name=&quot;name&quot; type=&quot;xsd:string&quot; use=&quot;required&quot;/&gt;\r\n    \t\t&lt;xsd:attribute name=&quot;value&quot; type=&quot;xsd:string&quot; use=&quot;optional&quot;/&gt;\r\n    \t&lt;/xsd:complexType&gt;\r\n    &lt;/xsd:schema&gt;\r\n\r\nThe XJC generated `ObjectClass`.  Note this is lacking any `@XmlElementDecl` attributes.\r\n\r\n    // This file was generated by the Eclipse Implementation of JAXB, v3.0.2 \r\n    // See https://eclipse-ee4j.github.io/jaxb-ri \r\n    // Any modifications to this file will be lost upon recompilation of the source schema. \r\n    // Generated on: 2022.01.26 at 10:38:30 AM PST \r\n    //\r\n    \r\n    \r\n    package com.mbm.properties.jaxb;\r\n    \r\n    import jakarta.xml.bind.annotation.XmlRegistry;\r\n    \r\n    \r\n    /**\r\n     * This object contains factory methods for each \r\n     * Java content interface and Java element interface \r\n     * generated in the com.mbm.properties.jaxb package. \r\n     * &lt;p&gt;An ObjectFactory allows you to programatically \r\n     * construct new instances of the Java representation \r\n     * for XML content. The Java representation of XML \r\n     * content can consist of schema derived interfaces \r\n     * and classes representing the binding of schema \r\n     * type definitions, element declarations and model \r\n     * groups.  Factory methods for each of these are \r\n     * provided in this class.\r\n     * \r\n     */\r\n    @XmlRegistry\r\n    public class ObjectFactory {\r\n    \r\n    \r\n        /**\r\n         * Create a new ObjectFactory that can be used to create new instances of schema derived classes for package: com.mbm.properties.jaxb\r\n         * \r\n         */\r\n        public ObjectFactory() {\r\n        }\r\n    \r\n        /**\r\n         * Create an instance of {@link Properties }\r\n         * \r\n         */\r\n        public Properties createProperties() {\r\n            return new Properties();\r\n        }\r\n    \r\n        /**\r\n         * Create an instance of {@link DescriptionType }\r\n         * \r\n         */\r\n        public DescriptionType createDescriptionType() {\r\n            return new DescriptionType();\r\n        }\r\n    \r\n        /**\r\n         * Create an instance of {@link KeywordPropertiesType }\r\n         * \r\n         */\r\n        public KeywordPropertiesType createKeywordPropertiesType() {\r\n            return new KeywordPropertiesType();\r\n        }\r\n    \r\n        /**\r\n         * Create an instance of {@link PositionalPropertiesType }\r\n         * \r\n         */\r\n        public PositionalPropertiesType createPositionalPropertiesType() {\r\n            return new PositionalPropertiesType();\r\n        }\r\n    \r\n        /**\r\n         * Create an instance of {@link MutualPropertiesType }\r\n         * \r\n         */\r\n        public MutualPropertiesType createMutualPropertiesType() {\r\n            return new MutualPropertiesType();\r\n        }\r\n    \r\n        /**\r\n         * Create an instance of {@link KeywordPropertyType }\r\n         * \r\n         */\r\n        public KeywordPropertyType createKeywordPropertyType() {\r\n            return new KeywordPropertyType();\r\n        }\r\n    \r\n        /**\r\n         * Create an instance of {@link PositionalPropertyType }\r\n         * \r\n         */\r\n        public PositionalPropertyType createPositionalPropertyType() {\r\n            return new PositionalPropertyType();\r\n        }\r\n    \r\n        /**\r\n         * Create an instance of {@link ForValueType }\r\n         * \r\n         */\r\n        public ForValueType createForValueType() {\r\n            return new ForValueType();\r\n        }\r\n    \r\n        /**\r\n         * Create an instance of {@link MutualPropertySetType }\r\n         * \r\n         */\r\n        public MutualPropertySetType createMutualPropertySetType() {\r\n            return new MutualPropertySetType();\r\n        }\r\n    \r\n        /**\r\n         * Create an instance of {@link MutualPropertyType }\r\n         * \r\n         */\r\n        public MutualPropertyType createMutualPropertyType() {\r\n            return new MutualPropertyType();\r\n        }\r\n    \r\n    }\r\n\r\nHere is the code that attempts to unmarshal the XML.  Note this code contains this statement `System.out.println(jc.toString());`:\r\n\r\n    package com.mbm.properties;\r\n    \r\n    import java.io.File;\r\n    import javax.xml.bind.JAXBContext;\r\n    import javax.xml.bind.Unmarshaller;\r\n    import com.mbm.properties.jaxb.Properties;\r\n    \r\n    public class Main {\r\n    \tpublic static void main(String[] args) {\r\n    \t\ttry {\r\n    \t\t\tFile xmlFile = new File(&quot;PropertiesDefinitions.xml&quot;);\r\n    \t\t\tJAXBContext jc = JAXBContext.newInstance(Properties.class);\r\n    \t\t\tSystem.out.println(jc.toString());\r\n    \t\t\tUnmarshaller unmarshaller = jc.createUnmarshaller();\r\n    \t\t\tProperties propertiesDefinitions = (Properties) unmarshaller.unmarshal(xmlFile);\r\n    \t\t} catch (Exception e) {\r\n    \t\t\t\te.printStackTrace();\r\n    \t\t\t\tSystem.exit(1);\r\n    \t\t}\r\n    \t}\r\n    }\r\n\r\nWhen this code runs, the statement `System.out.println(jc.toString());` produces this:\r\n\r\n    jar:file:/C:/Program%20Files/Java/jdk1.8.0_221/jre/lib/rt.jar!/com/sun/xml/internal/bind/v2/runtime/JAXBContextImpl.class Build-Id: 1.8.0_221\r\n    Classes known to this context:\r\n      [B\r\n      boolean\r\n      byte\r\n      char\r\n      com.mbm.properties.jaxb.KeywordPropertiesType\r\n      com.mbm.properties.jaxb.MutualPropertiesType\r\n      com.mbm.properties.jaxb.PositionalPropertiesType\r\n      com.mbm.properties.jaxb.Properties\r\n      com.sun.xml.internal.bind.api.CompositeStructure\r\n      double\r\n      float\r\n      int\r\n      java.awt.Image\r\n      java.io.File\r\n      java.lang.Boolean\r\n      java.lang.Byte\r\n      java.lang.Character\r\n      java.lang.Class\r\n      java.lang.Double\r\n      java.lang.Float\r\n      java.lang.Integer\r\n      java.lang.Long\r\n      java.lang.Object\r\n      java.lang.Short\r\n      java.lang.String\r\n      java.lang.Void\r\n      java.math.BigDecimal\r\n      java.math.BigInteger\r\n      java.net.URI\r\n      java.net.URL\r\n      java.util.Calendar\r\n      java.util.Date\r\n      java.util.GregorianCalendar\r\n      java.util.UUID\r\n      javax.activation.DataHandler\r\n      javax.xml.bind.JAXBElement\r\n      javax.xml.datatype.Duration\r\n      javax.xml.datatype.XMLGregorianCalendar\r\n      javax.xml.namespace.QName\r\n      javax.xml.transform.Source\r\n      long\r\n      short\r\n      void\r\n\r\nI am confused that the error states `unexpected element (uri:&quot;&quot;, local:&quot;properties&quot;). Expected elements are (none)`.  I believe I am createating the JAXB Context correctly:\r\n\r\n`JAXBContext jc = JAXBContext.newInstance(Properties.class);`\r\n\r\nI am referencing the Properties class.  Properties.java contains an `@XmlRootElement(name = &quot;properties&quot;)` element.  The XSD identifies `properties` as an element.  The only thing I am aware of that looks strange is that the generated `ObjectFactory` class lacks any `@XmlElementDecl` attributes.\r\n\r\nIf I manually modify the XJC generated `ObjectFactory` to include the `@XmlElementDecl` attribute:\r\n\r\n    @XmlRegistry\r\n    public class ObjectFactory {\r\n    \t\r\n    \t// Begin manually added code\r\n        private final static QName _Properties_QNAME = new QName(&quot;&quot;, &quot;properties&quot;);\r\n        \r\n        @XmlElementDecl(namespace = &quot;&quot;, name = &quot;properties&quot;)\r\n        public JAXBElement&lt;Properties&gt; createProperties(Properties value) {\r\n            return new JAXBElement&lt;Properties&gt;(_Properties_QNAME, Properties.class, null, value);\r\n        }\r\n        \r\n        // End manually added code\r\n\r\nThe above modification made no difference.  I get the identical exception.\r\n\r\nWhat am I doing wrong?\r\n\r\n","title":"JAXB Unmarshall Error: UnmarshalException- Unexpected Element - Expected elements are (none) - @XmlRootElement NOT missing","body":"<p>I am having problems unmarshalling some XML.  The partial stack dump looks like:</p>\n<pre><code>javax.xml.bind.UnmarshalException: unexpected element (uri:&quot;&quot;, local:&quot;properties&quot;). Expected elements are (none)\n    at com.sun.xml.internal.bind.v2.runtime.unmarshaller.UnmarshallingContext.handleEvent(UnmarshallingContext.java:726)\n    at com.sun.xml.internal.bind.v2.runtime.unmarshaller.Loader.reportError(Loader.java:247)\n    at com.sun.xml.internal.bind.v2.runtime.unmarshaller.Loader.reportError(Loader.java:242)\n</code></pre>\n<p>Below is the XML I am trying to unmarshal, the XJC generated root element Java class, the XSD fed into XJC and finally the XJC generated ObjectFactory.</p>\n<p>The XML I am unmarshaling:</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;properties program-name=&quot;EstateAccounting&quot;\n                        properties-file=&quot;EstateAccounting.properties&quot;&gt;\n                        \n    &lt;keyword-properties&gt;\n        &lt;keyword-property type=&quot;string&quot; name=&quot;reportDirectory&quot; alias=&quot;rd&quot;&gt;\n            &lt;description&gt;\n                &lt;![CDATA[Specifies the optional report directory.  Double quotes are required if the report directory\n                contains spaces.  The report directory specifies where the intermediate XML used to produce the PDF report\n                and where the PDF report should be produced.]]&gt;\n            &lt;/description&gt;\n        &lt;/keyword-property&gt;\n        \n        &lt;keyword-property type=&quot;string&quot; name=&quot;beneficiary&quot; alias=&quot;b&quot;&gt;\n            &lt;description&gt;\n                &lt;![CDATA[Specifies the optional beneficary name.  Double quotes are required if the beneficiary name\n                contains spaces.  When omitted, all beneficiaries are included.]]&gt;\n            &lt;/description&gt;\n        &lt;/keyword-property&gt;\n        \n        &lt;keyword-property type=&quot;string&quot; name=&quot;date&quot; alias=&quot;d&quot;&gt;\n            &lt;description&gt;\n                &lt;![CDATA[Specifies the optional date(s).  The format is mm/yyyy.  Double quotes are required \n                when specifying a date range as &quot;start-date - end-date&quot; (spaces optional).  When omitted,\n                all dates are included.]]&gt;\n            &lt;/description&gt;\n        &lt;/keyword-property&gt;\n        \n        &lt;keyword-property type=&quot;boolean&quot; name=&quot;isGenerateReport&quot; alias=&quot;r&quot;&gt;\n            &lt;description&gt;\n                &lt;![CDATA[Indicates that a PDF report should be produced.  One report for each generated XML file will be produced.]]&gt;\n            &lt;/description&gt;\n        &lt;/keyword-property&gt;\n        \n        &lt;keyword-property type=&quot;boolean&quot; name=&quot;isKeepIntermediateXML&quot; alias=&quot;xml&quot;&gt;\n            &lt;description&gt;\n                &lt;![CDATA[Indicates that the XML file used to produce the PDF report should be retained.  Normally, when the -r option\n                indicates that a PDF report should be produced, the generated intermediate XML file is deleted.]]&gt;\n            &lt;/description&gt;\n        &lt;/keyword-property&gt;\n    &lt;/keyword-properties&gt;\n    \n    &lt;positional-properties&gt;\n        &lt;positional-property type=&quot;string&quot; name=&quot;spreadsheet&quot; required=&quot;false&quot;&gt;\n            &lt;description&gt;\n                &lt;![CDATA[The location of the input spreadsheet.]]&gt;\n            &lt;/description&gt;\n        &lt;/positional-property&gt;\n        \n        &lt;positional-property type=&quot;string&quot; name=&quot;intermediateXML&quot; required=&quot;false&quot;&gt;\n            &lt;description&gt;\n                &lt;![CDATA[The location of a previously generated EstateAccounting intermediate XML file.  This is specified when \n                 a report based on previously generated intermediate XML is required.]]&gt;\n            &lt;/description&gt;\n        &lt;/positional-property&gt;\n    &lt;/positional-properties&gt;\n    \n    &lt;mutual-properties&gt;\n        &lt;mutual-property-set type=&quot;exclusive&quot;&gt;\n            &lt;mutual-property name=&quot;spreadsheet&quot;/&gt;\n            &lt;mutual-property name=&quot;intermediateXML&quot;/&gt;\n        &lt;/mutual-property-set&gt;\n    &lt;/mutual-properties&gt;\n&lt;/properties&gt;\n</code></pre>\n<p>The partial XJC generated root element Java class.  Note the inclusion of <code>@XmlRootElement(name = &quot;properties&quot;)</code> on the <code>Properties</code> class:</p>\n<pre><code>//\n// This file was generated by the Eclipse Implementation of JAXB, v3.0.2 \n// See https://eclipse-ee4j.github.io/jaxb-ri \n// Any modifications to this file will be lost upon recompilation of the source schema. \n// Generated on: 2022.01.26 at 10:38:30 AM PST \n//\n\npackage com.mbm.properties.jaxb;\n\nimport java.util.ArrayList;\nimport java.util.List;\nimport jakarta.xml.bind.annotation.XmlAccessType;\nimport jakarta.xml.bind.annotation.XmlAccessorType;\nimport jakarta.xml.bind.annotation.XmlAttribute;\nimport jakarta.xml.bind.annotation.XmlElement;\nimport jakarta.xml.bind.annotation.XmlRootElement;\nimport jakarta.xml.bind.annotation.XmlTransient;\nimport jakarta.xml.bind.annotation.XmlType;\nimport org.glassfish.jaxb.core.Locatable;\nimport org.glassfish.jaxb.core.annotation.XmlLocation;\nimport org.xml.sax.Locator;\n\n\n/**\n * &lt;p&gt;Java class for anonymous complex type.\n * \n * &lt;p&gt;The following schema fragment specifies the expected content contained within this class.\n * \n * &lt;pre&gt;\n * &amp;lt;complexType&amp;gt;\n *   &amp;lt;complexContent&amp;gt;\n *     &amp;lt;restriction base=&quot;{http://www.w3.org/2001/XMLSchema}anyType&quot;&amp;gt;\n *       &amp;lt;sequence&amp;gt;\n *         &amp;lt;element name=&quot;description&quot; type=&quot;{urn:com-mbm-properties-jaxb}descriptionType&quot; maxOccurs=&quot;unbounded&quot; minOccurs=&quot;0&quot;/&amp;gt;\n *         &amp;lt;element name=&quot;keyword-properties&quot; type=&quot;{urn:com-mbm-properties-jaxb}keywordPropertiesType&quot; minOccurs=&quot;0&quot;/&amp;gt;\n *         &amp;lt;element name=&quot;positional-properties&quot; type=&quot;{urn:com-mbm-properties-jaxb}positionalPropertiesType&quot; minOccurs=&quot;0&quot;/&amp;gt;\n *         &amp;lt;element name=&quot;mutual-properties&quot; type=&quot;{urn:com-mbm-properties-jaxb}MutualPropertiesType&quot; minOccurs=&quot;0&quot;/&amp;gt;\n *       &amp;lt;/sequence&amp;gt;\n *       &amp;lt;attribute name=&quot;program-name&quot; type=&quot;{http://www.w3.org/2001/XMLSchema}string&quot; /&amp;gt;\n *       &amp;lt;attribute name=&quot;properties-file&quot; type=&quot;{http://www.w3.org/2001/XMLSchema}string&quot; /&amp;gt;\n *       &amp;lt;attribute name=&quot;debug&quot; type=&quot;{http://www.w3.org/2001/XMLSchema}boolean&quot; default=&quot;false&quot; /&amp;gt;\n *       &amp;lt;attribute name=&quot;strict-property-retrieval&quot; type=&quot;{http://www.w3.org/2001/XMLSchema}boolean&quot; default=&quot;true&quot; /&amp;gt;\n *       &amp;lt;attribute name=&quot;strict-command-line&quot; type=&quot;{http://www.w3.org/2001/XMLSchema}boolean&quot; default=&quot;true&quot; /&amp;gt;\n *       &amp;lt;attribute name=&quot;usage&quot; type=&quot;{http://www.w3.org/2001/XMLSchema}boolean&quot; default=&quot;false&quot; /&amp;gt;\n *     &amp;lt;/restriction&amp;gt;\n *   &amp;lt;/complexContent&amp;gt;\n * &amp;lt;/complexType&amp;gt;\n * &lt;/pre&gt;\n * \n * \n */\n@XmlAccessorType(XmlAccessType.FIELD)\n@XmlType(name = &quot;&quot;, propOrder = {\n    &quot;descriptions&quot;,\n    &quot;containerOfListOfKeywordProperties&quot;,\n    &quot;containerOfListOfPositionalProperties&quot;,\n    &quot;mutualProperties&quot;\n})\n@XmlRootElement(name = &quot;properties&quot;)\npublic class Properties\n    implements Locatable\n{\n\n    @XmlElement(name = &quot;description&quot;)\n    protected List&lt;DescriptionType&gt; descriptions;\n    @XmlElement(name = &quot;keyword-properties&quot;)\n    protected KeywordPropertiesType containerOfListOfKeywordProperties;\n    @XmlElement(name = &quot;positional-properties&quot;)\n    protected PositionalPropertiesType containerOfListOfPositionalProperties;\n    @XmlElement(name = &quot;mutual-properties&quot;)\n    protected MutualPropertiesType mutualProperties;\n    @XmlAttribute(name = &quot;program-name&quot;)\n    protected String programName;\n    @XmlAttribute(name = &quot;properties-file&quot;)\n    protected String propertiesFile;\n    @XmlAttribute(name = &quot;debug&quot;)\n    protected Boolean debug;\n    @XmlAttribute(name = &quot;strict-property-retrieval&quot;)\n    protected Boolean strictPropertyRetrieval;\n    @XmlAttribute(name = &quot;strict-command-line&quot;)\n    protected Boolean strictCommandLine;\n    @XmlAttribute(name = &quot;usage&quot;)\n    protected Boolean usage;\n    @XmlLocation\n    @XmlTransient\n    protected Locator locator;\n\n    .\n    .\n    .\n\n    public Locator sourceLocation() {\n        return locator;\n    }\n\n    public void setSourceLocation(Locator newLocator) {\n        locator = newLocator;\n    }\n}\n</code></pre>\n<p>The XSD fed into XJC that generated the Java classes:</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;xsd:schema xmlns:xjc=&quot;http://java.sun.com/xml/ns/jaxb/xjc&quot;\n            xmlns:jaxb=&quot;https://jakarta.ee/xml/ns/jaxb&quot;\n            xmlns:xsd=&quot;http://www.w3.org/2001/XMLSchema&quot;\n            xmlns=&quot;urn:com-mbm-properties-jaxb&quot;\n            targetNamespace=&quot;urn:com-mbm-properties-jaxb&quot;\n            elementFormDefault=&quot;qualified&quot;\n            jaxb:extensionBindingPrefixes=&quot;xjc&quot;\n            jaxb:version=&quot;3.0&quot;&gt;\n\n    &lt;xsd:annotation&gt;\n        &lt;xsd:appinfo&gt;\n            &lt;jaxb:globalBindings&gt;\n                &lt;xjc:simple/&gt;\n            &lt;/jaxb:globalBindings&gt;\n        &lt;/xsd:appinfo&gt;\n    &lt;/xsd:annotation&gt;\n    \n    &lt;xsd:element name=&quot;properties&quot;&gt;\n        &lt;xsd:complexType&gt;\n            &lt;xsd:sequence&gt;\n                &lt;xsd:element name=&quot;description&quot; type=&quot;descriptionType&quot; minOccurs=&quot;0&quot; maxOccurs=&quot;unbounded&quot;/&gt;\n                &lt;xsd:element name=&quot;keyword-properties&quot; type=&quot;keywordPropertiesType&quot; minOccurs=&quot;0&quot; maxOccurs=&quot;1&quot;&gt;\n                    &lt;xsd:annotation&gt;\n                        &lt;xsd:appinfo&gt;\n                            &lt;jaxb:property name=&quot;containerOfListOfKeywordProperties&quot;/&gt;\n                        &lt;/xsd:appinfo&gt;\n                    &lt;/xsd:annotation&gt;\n                &lt;/xsd:element&gt;\n                &lt;xsd:element name=&quot;positional-properties&quot; type=&quot;positionalPropertiesType&quot; minOccurs=&quot;0&quot; maxOccurs=&quot;1&quot;&gt;\n                    &lt;xsd:annotation&gt;\n                        &lt;xsd:appinfo&gt;\n                            &lt;jaxb:property name=&quot;containerOfListOfPositionalProperties&quot;/&gt;\n                        &lt;/xsd:appinfo&gt;\n                    &lt;/xsd:annotation&gt;\n                &lt;/xsd:element&gt;\n                &lt;xsd:element name=&quot;mutual-properties&quot; type=&quot;MutualPropertiesType&quot; minOccurs=&quot;0&quot; maxOccurs=&quot;1&quot;/&gt;\n            &lt;/xsd:sequence&gt;\n            &lt;xsd:attribute name=&quot;program-name&quot; type=&quot;xsd:string&quot; use=&quot;optional&quot;/&gt;\n            &lt;xsd:attribute name=&quot;properties-file&quot; type=&quot;xsd:string&quot; use=&quot;optional&quot;/&gt;\n            &lt;xsd:attribute name=&quot;debug&quot; type=&quot;xsd:boolean&quot; use=&quot;optional&quot; default=&quot;false&quot;/&gt;\n            &lt;xsd:attribute name=&quot;strict-property-retrieval&quot; type=&quot;xsd:boolean&quot; use=&quot;optional&quot; default=&quot;true&quot;/&gt;\n            &lt;xsd:attribute name=&quot;strict-command-line&quot; type=&quot;xsd:boolean&quot; use=&quot;optional&quot; default=&quot;true&quot;/&gt;\n            &lt;xsd:attribute name=&quot;usage&quot; type=&quot;xsd:boolean&quot; use=&quot;optional&quot; default=&quot;false&quot;/&gt;\n        &lt;/xsd:complexType&gt;\n    &lt;/xsd:element&gt;\n\n    &lt;xsd:complexType name=&quot;PropertyBase&quot; abstract=&quot;true&quot;&gt;\n        &lt;xsd:annotation&gt;\n            &lt;xsd:appinfo&gt;\n                &lt;jaxb:class name=&quot;DummyPropertyBase&quot; implClass=&quot;com.mbm.properties.baseclasses.PropertyBase&quot;/&gt;\n            &lt;/xsd:appinfo&gt;\n        &lt;/xsd:annotation&gt;\n    &lt;/xsd:complexType&gt;\n    \n    &lt;xsd:complexType name=&quot;PropertyType&quot; abstract=&quot;true&quot;&gt;\n        &lt;xsd:complexContent&gt;\n            &lt;xsd:extension base=&quot;PropertyBase&quot;&gt;\n                &lt;xsd:sequence&gt;\n                    &lt;xsd:element name=&quot;description&quot; type=&quot;descriptionType&quot; minOccurs=&quot;0&quot; maxOccurs=&quot;unbounded&quot;/&gt;\n                    &lt;xsd:element name=&quot;forValues&quot; type=&quot;forValueType&quot; minOccurs=&quot;0&quot; maxOccurs=&quot;unbounded&quot;/&gt;\n                &lt;/xsd:sequence&gt;\n                &lt;xsd:attribute name=&quot;type&quot; use=&quot;required&quot;&gt;\n                    &lt;xsd:simpleType&gt;\n                        &lt;xsd:restriction base=&quot;xsd:token&quot;&gt;\n                            &lt;xsd:enumeration value=&quot;integer&quot;/&gt;\n                            &lt;xsd:enumeration value=&quot;float&quot;/&gt;\n                            &lt;xsd:enumeration value=&quot;boolean&quot;/&gt;\n                            &lt;xsd:enumeration value=&quot;string&quot;/&gt;\n                        &lt;/xsd:restriction&gt;\n                    &lt;/xsd:simpleType&gt;\n                &lt;/xsd:attribute&gt;\n                &lt;xsd:attribute name=&quot;name&quot; type=&quot;xsd:string&quot; use=&quot;required&quot;/&gt;\n                &lt;xsd:attribute name=&quot;required&quot; type=&quot;xsd:boolean&quot; use=&quot;optional&quot; default=&quot;false&quot;/&gt;\n                &lt;xsd:attribute name=&quot;alias&quot; type=&quot;xsd:string&quot; use=&quot;optional&quot;/&gt;\n            &lt;/xsd:extension&gt;\n        &lt;/xsd:complexContent&gt;\n    &lt;/xsd:complexType&gt;\n    \n    &lt;xsd:complexType name=&quot;keywordPropertiesType&quot;&gt;\n        &lt;xsd:sequence&gt;\n            &lt;xsd:element name=&quot;keyword-property&quot; type=&quot;keywordPropertyType&quot; minOccurs=&quot;1&quot; maxOccurs=&quot;unbounded&quot;&gt;\n                &lt;xsd:annotation&gt;\n                    &lt;xsd:appinfo&gt;\n                        &lt;jaxb:property name=&quot;listOfKeywordProperties&quot;/&gt;\n                    &lt;/xsd:appinfo&gt;\n                &lt;/xsd:annotation&gt;\n            &lt;/xsd:element&gt;\n        &lt;/xsd:sequence&gt;\n    &lt;/xsd:complexType&gt;\n    \n    &lt;xsd:complexType name=&quot;keywordPropertyType&quot;&gt;\n        &lt;xsd:complexContent&gt;\n            &lt;xsd:extension base=&quot;PropertyType&quot;&gt;\n                &lt;xsd:sequence&gt;\n                    &lt;xsd:element name=&quot;challenges&quot; type=&quot;ChallengeType&quot; minOccurs=&quot;0&quot; maxOccurs=&quot;unbounded&quot;/&gt;\n                &lt;/xsd:sequence&gt;\n                &lt;xsd:attribute name=&quot;default-value&quot; type=&quot;xsd:string&quot; use=&quot;optional&quot;/&gt;\n                &lt;xsd:attribute name=&quot;valid-values&quot; type=&quot;xsd:string&quot; use=&quot;optional&quot;/&gt;\n            &lt;/xsd:extension&gt;\n        &lt;/xsd:complexContent&gt;\n    &lt;/xsd:complexType&gt;\n\n    &lt;xsd:complexType name=&quot;positionalPropertiesType&quot;&gt;\n        &lt;xsd:sequence&gt;\n            &lt;xsd:element name=&quot;positional-property&quot; type=&quot;positionalPropertyType&quot; minOccurs=&quot;1&quot; maxOccurs=&quot;unbounded&quot;&gt;\n                &lt;xsd:annotation&gt;\n                    &lt;xsd:appinfo&gt;\n                        &lt;jaxb:property name=&quot;listOfPositionalProperties&quot;/&gt;\n                    &lt;/xsd:appinfo&gt;\n                &lt;/xsd:annotation&gt;\n            &lt;/xsd:element&gt;\n        &lt;/xsd:sequence&gt;\n    &lt;/xsd:complexType&gt;\n\n    &lt;xsd:complexType name=&quot;positionalPropertyType&quot;&gt;\n        &lt;xsd:complexContent&gt;\n            &lt;xsd:extension base=&quot;PropertyType&quot;/&gt;\n        &lt;/xsd:complexContent&gt;\n    &lt;/xsd:complexType&gt;\n    \n    &lt;xsd:complexType name=&quot;ForValueBase&quot; abstract=&quot;true&quot;&gt;\n        &lt;xsd:annotation&gt;\n            &lt;xsd:appinfo&gt;\n                &lt;jaxb:class name=&quot;DummyForValueBase&quot; implClass=&quot;com.mbm.properties.baseclasses.ForValueBase&quot;/&gt;\n            &lt;/xsd:appinfo&gt;\n        &lt;/xsd:annotation&gt;\n    &lt;/xsd:complexType&gt;\n    \n    &lt;xsd:complexType name=&quot;forValueType&quot;&gt;\n        &lt;xsd:complexContent&gt;\n            &lt;xsd:extension base=&quot;ForValueBase&quot;&gt;\n                &lt;xsd:sequence&gt;\n                    &lt;xsd:element name=&quot;description&quot; type=&quot;descriptionType&quot; minOccurs=&quot;0&quot; maxOccurs=&quot;unbounded&quot;/&gt;\n                &lt;/xsd:sequence&gt;\n                &lt;xsd:attribute name=&quot;value&quot; type=&quot;xsd:string&quot; use=&quot;required&quot;/&gt;\n                &lt;xsd:attribute name=&quot;implies&quot; type=&quot;xsd:string&quot; use=&quot;optional&quot;/&gt;\n            &lt;/xsd:extension&gt;\n        &lt;/xsd:complexContent&gt;\n    &lt;/xsd:complexType&gt;\n    \n    &lt;xsd:complexType name=&quot;descriptionType&quot;&gt;\n        &lt;xsd:simpleContent&gt;\n            &lt;xsd:extension base=&quot;xsd:string&quot;&gt;\n                &lt;xsd:attribute name=&quot;reformat&quot; type=&quot;xsd:boolean&quot; use=&quot;optional&quot; default=&quot;true&quot;/&gt;\n                &lt;xsd:attribute name=&quot;includeImplies&quot; type=&quot;xsd:boolean&quot; use=&quot;optional&quot; default=&quot;true&quot;/&gt;\n            &lt;/xsd:extension&gt;\n        &lt;/xsd:simpleContent&gt;\n    &lt;/xsd:complexType&gt;\n\n    &lt;xsd:complexType name=&quot;ChallengeBase&quot; abstract=&quot;true&quot;&gt;\n        &lt;xsd:annotation&gt;\n            &lt;xsd:appinfo&gt;\n                &lt;jaxb:class name=&quot;DummyChallengeBase&quot; implClass=&quot;com.mbm.properties.baseclasses.ChallengeBase&quot;/&gt;\n            &lt;/xsd:appinfo&gt;\n        &lt;/xsd:annotation&gt;\n    &lt;/xsd:complexType&gt;\n    \n    &lt;xsd:complexType name=&quot;ChallengeType&quot; abstract=&quot;true&quot;&gt;\n        &lt;xsd:complexContent&gt;\n            &lt;xsd:extension base=&quot;ChallengeBase&quot;&gt;\n                &lt;xsd:attribute name=&quot;forValue&quot; type=&quot;xsd:string&quot;/&gt;\n                &lt;xsd:attribute name=&quot;instruction&quot; type=&quot;xsd:string&quot;/&gt;\n                &lt;xsd:attribute name=&quot;passChallengeValue&quot; type=&quot;xsd:string&quot;/&gt;\n                &lt;xsd:attribute name=&quot;failChallengeValue&quot; type=&quot;xsd:string&quot; use=&quot;optional&quot;/&gt;\n            &lt;/xsd:extension&gt;\n        &lt;/xsd:complexContent&gt;\n    &lt;/xsd:complexType&gt;\n\n    &lt;xsd:complexType name=&quot;MutualPropertiesType&quot;&gt;\n        &lt;xsd:sequence&gt;\n            &lt;xsd:element name=&quot;mutual-property-set&quot; type=&quot;MutualPropertySetType&quot; minOccurs=&quot;1&quot; maxOccurs=&quot;unbounded&quot;/&gt;\n        &lt;/xsd:sequence&gt;\n    &lt;/xsd:complexType&gt;\n\n    &lt;xsd:complexType name=&quot;MutualPropertySetBase&quot; abstract=&quot;true&quot;&gt;\n        &lt;xsd:annotation&gt;\n            &lt;xsd:appinfo&gt;\n                &lt;jaxb:class name=&quot;DummyMutualPropertySetBase&quot; implClass=&quot;com.mbm.properties.baseclasses.MutualPropertySetBase&quot;/&gt;\n            &lt;/xsd:appinfo&gt;\n        &lt;/xsd:annotation&gt;\n    &lt;/xsd:complexType&gt;\n\n    &lt;xsd:complexType name=&quot;MutualPropertySetType&quot;&gt;\n        &lt;xsd:complexContent&gt;\n            &lt;xsd:extension base=&quot;MutualPropertySetBase&quot;&gt;\n                &lt;xsd:sequence&gt;\n                    &lt;xsd:element name=&quot;mutual-property&quot; type=&quot;mutualPropertyType&quot; minOccurs=&quot;1&quot; maxOccurs=&quot;unbounded&quot;/&gt;\n                &lt;/xsd:sequence&gt;\n                &lt;xsd:attribute name=&quot;type&quot; use=&quot;required&quot;&gt;\n                    &lt;xsd:simpleType&gt;\n                        &lt;xsd:restriction base=&quot;xsd:token&quot;&gt;\n                            &lt;xsd:enumeration value=&quot;inclusive&quot;/&gt;\n                            &lt;xsd:enumeration value=&quot;exclusive&quot;/&gt;\n                        &lt;/xsd:restriction&gt;\n                    &lt;/xsd:simpleType&gt;\n                &lt;/xsd:attribute&gt;\n                &lt;xsd:attribute name=&quot;name&quot; type=&quot;xsd:string&quot; use=&quot;optional&quot;/&gt;\n            &lt;/xsd:extension&gt;\n        &lt;/xsd:complexContent&gt;\n    &lt;/xsd:complexType&gt;\n\n    &lt;xsd:complexType name=&quot;mutualPropertyType&quot;&gt;\n        &lt;xsd:attribute name=&quot;name&quot; type=&quot;xsd:string&quot; use=&quot;required&quot;/&gt;\n        &lt;xsd:attribute name=&quot;value&quot; type=&quot;xsd:string&quot; use=&quot;optional&quot;/&gt;\n    &lt;/xsd:complexType&gt;\n&lt;/xsd:schema&gt;\n</code></pre>\n<p>The XJC generated <code>ObjectClass</code>.  Note this is lacking any <code>@XmlElementDecl</code> attributes.</p>\n<pre><code>// This file was generated by the Eclipse Implementation of JAXB, v3.0.2 \n// See https://eclipse-ee4j.github.io/jaxb-ri \n// Any modifications to this file will be lost upon recompilation of the source schema. \n// Generated on: 2022.01.26 at 10:38:30 AM PST \n//\n\n\npackage com.mbm.properties.jaxb;\n\nimport jakarta.xml.bind.annotation.XmlRegistry;\n\n\n/**\n * This object contains factory methods for each \n * Java content interface and Java element interface \n * generated in the com.mbm.properties.jaxb package. \n * &lt;p&gt;An ObjectFactory allows you to programatically \n * construct new instances of the Java representation \n * for XML content. The Java representation of XML \n * content can consist of schema derived interfaces \n * and classes representing the binding of schema \n * type definitions, element declarations and model \n * groups.  Factory methods for each of these are \n * provided in this class.\n * \n */\n@XmlRegistry\npublic class ObjectFactory {\n\n\n    /**\n     * Create a new ObjectFactory that can be used to create new instances of schema derived classes for package: com.mbm.properties.jaxb\n     * \n     */\n    public ObjectFactory() {\n    }\n\n    /**\n     * Create an instance of {@link Properties }\n     * \n     */\n    public Properties createProperties() {\n        return new Properties();\n    }\n\n    /**\n     * Create an instance of {@link DescriptionType }\n     * \n     */\n    public DescriptionType createDescriptionType() {\n        return new DescriptionType();\n    }\n\n    /**\n     * Create an instance of {@link KeywordPropertiesType }\n     * \n     */\n    public KeywordPropertiesType createKeywordPropertiesType() {\n        return new KeywordPropertiesType();\n    }\n\n    /**\n     * Create an instance of {@link PositionalPropertiesType }\n     * \n     */\n    public PositionalPropertiesType createPositionalPropertiesType() {\n        return new PositionalPropertiesType();\n    }\n\n    /**\n     * Create an instance of {@link MutualPropertiesType }\n     * \n     */\n    public MutualPropertiesType createMutualPropertiesType() {\n        return new MutualPropertiesType();\n    }\n\n    /**\n     * Create an instance of {@link KeywordPropertyType }\n     * \n     */\n    public KeywordPropertyType createKeywordPropertyType() {\n        return new KeywordPropertyType();\n    }\n\n    /**\n     * Create an instance of {@link PositionalPropertyType }\n     * \n     */\n    public PositionalPropertyType createPositionalPropertyType() {\n        return new PositionalPropertyType();\n    }\n\n    /**\n     * Create an instance of {@link ForValueType }\n     * \n     */\n    public ForValueType createForValueType() {\n        return new ForValueType();\n    }\n\n    /**\n     * Create an instance of {@link MutualPropertySetType }\n     * \n     */\n    public MutualPropertySetType createMutualPropertySetType() {\n        return new MutualPropertySetType();\n    }\n\n    /**\n     * Create an instance of {@link MutualPropertyType }\n     * \n     */\n    public MutualPropertyType createMutualPropertyType() {\n        return new MutualPropertyType();\n    }\n\n}\n</code></pre>\n<p>Here is the code that attempts to unmarshal the XML.  Note this code contains this statement <code>System.out.println(jc.toString());</code>:</p>\n<pre><code>package com.mbm.properties;\n\nimport java.io.File;\nimport javax.xml.bind.JAXBContext;\nimport javax.xml.bind.Unmarshaller;\nimport com.mbm.properties.jaxb.Properties;\n\npublic class Main {\n    public static void main(String[] args) {\n        try {\n            File xmlFile = new File(&quot;PropertiesDefinitions.xml&quot;);\n            JAXBContext jc = JAXBContext.newInstance(Properties.class);\n            System.out.println(jc.toString());\n            Unmarshaller unmarshaller = jc.createUnmarshaller();\n            Properties propertiesDefinitions = (Properties) unmarshaller.unmarshal(xmlFile);\n        } catch (Exception e) {\n                e.printStackTrace();\n                System.exit(1);\n        }\n    }\n}\n</code></pre>\n<p>When this code runs, the statement <code>System.out.println(jc.toString());</code> produces this:</p>\n<pre><code>jar:file:/C:/Program%20Files/Java/jdk1.8.0_221/jre/lib/rt.jar!/com/sun/xml/internal/bind/v2/runtime/JAXBContextImpl.class Build-Id: 1.8.0_221\nClasses known to this context:\n  [B\n  boolean\n  byte\n  char\n  com.mbm.properties.jaxb.KeywordPropertiesType\n  com.mbm.properties.jaxb.MutualPropertiesType\n  com.mbm.properties.jaxb.PositionalPropertiesType\n  com.mbm.properties.jaxb.Properties\n  com.sun.xml.internal.bind.api.CompositeStructure\n  double\n  float\n  int\n  java.awt.Image\n  java.io.File\n  java.lang.Boolean\n  java.lang.Byte\n  java.lang.Character\n  java.lang.Class\n  java.lang.Double\n  java.lang.Float\n  java.lang.Integer\n  java.lang.Long\n  java.lang.Object\n  java.lang.Short\n  java.lang.String\n  java.lang.Void\n  java.math.BigDecimal\n  java.math.BigInteger\n  java.net.URI\n  java.net.URL\n  java.util.Calendar\n  java.util.Date\n  java.util.GregorianCalendar\n  java.util.UUID\n  javax.activation.DataHandler\n  javax.xml.bind.JAXBElement\n  javax.xml.datatype.Duration\n  javax.xml.datatype.XMLGregorianCalendar\n  javax.xml.namespace.QName\n  javax.xml.transform.Source\n  long\n  short\n  void\n</code></pre>\n<p>I am confused that the error states <code>unexpected element (uri:&quot;&quot;, local:&quot;properties&quot;). Expected elements are (none)</code>.  I believe I am createating the JAXB Context correctly:</p>\n<p><code>JAXBContext jc = JAXBContext.newInstance(Properties.class);</code></p>\n<p>I am referencing the Properties class.  Properties.java contains an <code>@XmlRootElement(name = &quot;properties&quot;)</code> element.  The XSD identifies <code>properties</code> as an element.  The only thing I am aware of that looks strange is that the generated <code>ObjectFactory</code> class lacks any <code>@XmlElementDecl</code> attributes.</p>\n<p>If I manually modify the XJC generated <code>ObjectFactory</code> to include the <code>@XmlElementDecl</code> attribute:</p>\n<pre><code>@XmlRegistry\npublic class ObjectFactory {\n    \n    // Begin manually added code\n    private final static QName _Properties_QNAME = new QName(&quot;&quot;, &quot;properties&quot;);\n    \n    @XmlElementDecl(namespace = &quot;&quot;, name = &quot;properties&quot;)\n    public JAXBElement&lt;Properties&gt; createProperties(Properties value) {\n        return new JAXBElement&lt;Properties&gt;(_Properties_QNAME, Properties.class, null, value);\n    }\n    \n    // End manually added code\n</code></pre>\n<p>The above modification made no difference.  I get the identical exception.</p>\n<p>What am I doing wrong?</p>\n"},{"tags":["java","android","json","google-api"],"comments":[{"owner":{"account_id":1116028,"reputation":11319,"user_id":1107317,"accept_rate":100,"display_name":"Triode"},"score":0,"creation_date":1391615997,"post_id":21581977,"comment_id":32601828,"body_markdown":"how the BaseResponse look like ?","body":"how the BaseResponse look like ?"},{"owner":{"account_id":1525141,"reputation":11731,"user_id":1423773,"accept_rate":87,"display_name":"GuilhE"},"score":0,"creation_date":1391617431,"post_id":21581977,"comment_id":32602834,"body_markdown":"I&#39;ve edited the question and added the BaseResponse","body":"I&#39;ve edited the question and added the BaseResponse"},{"owner":{"account_id":1525141,"reputation":11731,"user_id":1423773,"accept_rate":87,"display_name":"GuilhE"},"score":0,"creation_date":1391620154,"post_id":21581977,"comment_id":32604861,"body_markdown":"I&#39;ve added a line to proguard-project.txt &quot;-keep class &lt;com.myapp.modelsfolder&gt;** {*;} &quot; and now the exception is not thrown. Could it be the solution?","body":"I&#39;ve added a line to proguard-project.txt &quot;-keep class &lt;com.myapp.modelsfolder&gt;** {*;} &quot; and now the exception is not thrown. Could it be the solution?"}],"answers":[{"tags":[],"owner":{"account_id":1525141,"reputation":11731,"user_id":1423773,"accept_rate":87,"display_name":"GuilhE"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1662551101,"creation_date":1662551101,"answer_id":73634921,"question_id":21581977,"body_markdown":" I&#39;ve added a line to proguard-project.txt `-keep class &lt;com.myapp.modelsfolder&gt;** {*;}` and now the exception is not thrown. ","title":"java.lang.TypeNotPresentException","body":"<p>I've added a line to proguard-project.txt <code>-keep class &lt;com.myapp.modelsfolder&gt;** {*;}</code> and now the exception is not thrown.</p>\n"}],"owner":{"account_id":1525141,"reputation":11731,"user_id":1423773,"accept_rate":87,"display_name":"GuilhE"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2578,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":73634921,"answer_count":1,"score":2,"last_activity_date":1662551101,"creation_date":1391615684,"question_id":21581977,"body_markdown":"I&#39;m using a fiew webservices that return an object but not a standard type object, it&#39;s an object of my own classes, for example:\r\n\r\n    public class BaseResponse {\r\n        public String ErrorMessage;\r\n        public String ResponseStatus;\r\n        public String ResponseDate;\r\n        public String SessionExpire;\r\n    }\r\n\r\n    public class ResponseJsonModel extends BaseResponse{\r\n        private String firstName;\r\n        private String lastName;\r\n        private boolean male;\r\n        private Address address;\r\n        ...\r\n    }\r\n\r\nNOTE: BaseResponse is a standard types object.\r\n&lt;br&gt; Everything works fine except when I use proguard because it throws:\r\n\r\n    java.lang.TypeNotPresentException: Type com.myapp.ResponseJsonModel not present\r\n\r\n\r\n&lt;br&gt;I&#39;ve found an issue similar to mine: http://code.google.com/p/google-api-java-client/issues/detail?id=527 but the solution doesn&#39;t work, I&#39;m still having the same exception even if I use:\r\n\r\n     -keep class com.google.api.client.googleapis.json.GoogleJsonError$ErrorInfo\r\n\r\nas mentioned in the issue...&lt;br&gt;&lt;br&gt;\r\nI&#39;ve read somewhere in the web that I should annotate such classes with various JAXB annotations. Could this be the solution? I know nothing about JAXB.\r\n\r\nThanks for your time.\r\n","title":"java.lang.TypeNotPresentException","body":"<p>I'm using a fiew webservices that return an object but not a standard type object, it's an object of my own classes, for example:</p>\n\n<pre><code>public class BaseResponse {\n    public String ErrorMessage;\n    public String ResponseStatus;\n    public String ResponseDate;\n    public String SessionExpire;\n}\n\npublic class ResponseJsonModel extends BaseResponse{\n    private String firstName;\n    private String lastName;\n    private boolean male;\n    private Address address;\n    ...\n}\n</code></pre>\n\n<p>NOTE: BaseResponse is a standard types object.\n<br> Everything works fine except when I use proguard because it throws:</p>\n\n<pre><code>java.lang.TypeNotPresentException: Type com.myapp.ResponseJsonModel not present\n</code></pre>\n\n<p><br>I've found an issue similar to mine: <a href=\"http://code.google.com/p/google-api-java-client/issues/detail?id=527\" rel=\"nofollow\">http://code.google.com/p/google-api-java-client/issues/detail?id=527</a> but the solution doesn't work, I'm still having the same exception even if I use:</p>\n\n<pre><code> -keep class com.google.api.client.googleapis.json.GoogleJsonError$ErrorInfo\n</code></pre>\n\n<p>as mentioned in the issue...<br><br>\nI've read somewhere in the web that I should annotate such classes with various JAXB annotations. Could this be the solution? I know nothing about JAXB.</p>\n\n<p>Thanks for your time.</p>\n"},{"tags":["java","arrays","random"],"comments":[{"owner":{"account_id":319873,"reputation":87612,"user_id":637853,"accept_rate":50,"display_name":"Thomas"},"score":2,"creation_date":1662551242,"post_id":73634893,"comment_id":130030909,"body_markdown":"I guess you want `int m = numberOnSuite.nextInt(suiteNumber.length);` and `System.out.println(suiteNumber[m]+&quot; &quot;+suite[n]);`. Your code tries to print the `Random` object which basically is a random number generator (and thus the names `suiteType` and `numberOnSuite` are _very_ misleading).","body":"I guess you want <code>int m = numberOnSuite.nextInt(suiteNumber.length);</code> and <code>System.out.println(suiteNumber[m]+&quot; &quot;+suite[n]);</code>. Your code tries to print the <code>Random</code> object which basically is a random number generator (and thus the names <code>suiteType</code> and <code>numberOnSuite</code> are <i>very</i> misleading)."},{"owner":{"account_id":7739148,"reputation":3345,"user_id":5859654,"display_name":"Nemanja"},"score":0,"creation_date":1662551301,"post_id":73634893,"comment_id":130030936,"body_markdown":"What exacly do you want to achieve? What do you expect to be written in the console?","body":"What exacly do you want to achieve? What do you expect to be written in the console?"},{"owner":{"account_id":20220873,"reputation":137,"user_id":14830371,"display_name":"Anesu Mazvimavi"},"score":0,"creation_date":1662551522,"post_id":73634893,"comment_id":130031035,"body_markdown":"I see I made a very silly error. I meant to have the index of suiteNumber and instead I was now using numberOnSuite","body":"I see I made a very silly error. I meant to have the index of suiteNumber and instead I was now using numberOnSuite"},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":1,"creation_date":1662553052,"post_id":73634893,"comment_id":130031677,"body_markdown":"You don&#39;t need more than one ```Random``` It&#39;s &#39;suit&#39; btw, not &#39;suite&#39;","body":"You don&#39;t need more than one <code>Random</code> It&#39;s &#39;suit&#39; btw, not &#39;suite&#39;"}],"owner":{"account_id":20220873,"reputation":137,"user_id":14830371,"display_name":"Anesu Mazvimavi"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":54,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1662550938,"creation_date":1662550938,"question_id":73634893,"body_markdown":"I&#39;m running a java program to generate random values from arrays. When I run the program I am getting a java.util.Random@39ed3c8d value. I know I have to override a certain class but not entirely sure how to go about it. Please can anyone assist\r\n\r\n    import java.util.Random;\r\n    class RandomArray{\r\n    public static void main(String[]args){\r\n    String suite[] = { &quot;Clubs&quot;, &quot;Diamonds&quot;, &quot;Hearts&quot;, &quot;Spades&quot;};\r\n    Object[] suiteNumber = {2,3,4,5,6,7,8,9,&quot;jack&quot;,&quot;king&quot;,&quot;queen&quot;};\r\n    Random suiteType = new Random(); \r\n    int n = suiteType.nextInt(4);\r\n    Random numberOnSuite = new Random();\r\n    int m = numberOnSuite.nextInt(11); \r\n    System.out.println(numberOnSuite.toString()+&quot; &quot;+suite[n]);\r\n    }\r\n    }\r\nThis is the output below\r\n[![enter image description here][1]][1] \r\n\r\n\r\n  [1]: https://i.stack.imgur.com/AoTvS.png","title":"Generate random values from array using Java","body":"<p>I'm running a java program to generate random values from arrays. When I run the program I am getting a java.util.Random@39ed3c8d value. I know I have to override a certain class but not entirely sure how to go about it. Please can anyone assist</p>\n<pre><code>import java.util.Random;\nclass RandomArray{\npublic static void main(String[]args){\nString suite[] = { &quot;Clubs&quot;, &quot;Diamonds&quot;, &quot;Hearts&quot;, &quot;Spades&quot;};\nObject[] suiteNumber = {2,3,4,5,6,7,8,9,&quot;jack&quot;,&quot;king&quot;,&quot;queen&quot;};\nRandom suiteType = new Random(); \nint n = suiteType.nextInt(4);\nRandom numberOnSuite = new Random();\nint m = numberOnSuite.nextInt(11); \nSystem.out.println(numberOnSuite.toString()+&quot; &quot;+suite[n]);\n}\n}\n</code></pre>\n<p>This is the output below\n<a href=\"https://i.stack.imgur.com/AoTvS.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/AoTvS.png\" alt=\"enter image description here\" /></a></p>\n"},{"tags":["java","spring-boot","parallel.foreach"],"comments":[{"owner":{"account_id":23959668,"reputation":26587,"user_id":17949945,"display_name":"Alexander Ivanchenko"},"score":1,"creation_date":1662551355,"post_id":73634780,"comment_id":130030959,"body_markdown":"*&quot;the code run on each entity few times&quot;* - Are you certain that there are no duplicated elements in the list?","body":"<i>&quot;the code run on each entity few times&quot;</i> - Are you certain that there are no duplicated elements in the list?"},{"owner":{"account_id":22244983,"reputation":21,"user_id":16478818,"display_name":"Yonatan"},"score":0,"creation_date":1666700845,"post_id":73634780,"comment_id":130994920,"body_markdown":"yes. i&#39;m sure. it&#39;s fetching it from a db that i monitored at the same time @AlexanderIvanchenko","body":"yes. i&#39;m sure. it&#39;s fetching it from a db that i monitored at the same time @AlexanderIvanchenko"}],"owner":{"account_id":22244983,"reputation":21,"user_id":16478818,"display_name":"Yonatan"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":92,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1662550438,"creation_date":1662550438,"question_id":73634780,"body_markdown":"I have a java 17, spring boot project, and i&#39;m trying to run a method on an entities list with parallel stream.\r\n\r\nwhat happens is that the code run on each entity few times.\r\n\r\nany idea how to make sure it&#39;s run only once for each entity?\r\n\r\nthanks!\r\n\r\n\r\nthis is the streaming part:\r\n```\r\n    List&lt;Entity&gt; entityList = repository.findTop1000ByStatus(PENDING);\r\n    \r\nfinal var list = entityList;\r\nForkJoinPool customThreadPool = new ForkJoinPool(Math.min(entityList.size(), 100));\r\ncustomThreadPool.submit(() -&gt; list.stream().parallel().forEach(entity -&gt; {\r\n                            long userId = entity.getUserId();\r\n                            UserDto user;\r\n                            try {\r\n    .\r\n    .\r\n    .\r\n```\r\n\r\nthis is the gradle.build file:\r\n\r\n```\r\nbuildscript {\r\n    dependencies {\r\n        classpath(&quot;org.springframework.boot:spring-boot-gradle-plugin:${springBootVersion}&quot;)\r\n        classpath &quot;com.avast.gradle:gradle-docker-compose-plugin:0.6.0&quot;\r\n    }\r\n}\r\n\r\nplugins {\r\n    id &#39;io.franzbecker.gradle-lombok&#39; version &#39;5.0.0&#39;\r\n}\r\ntest {\r\n    useJUnitPlatform()\r\n}\r\nlombok {\r\n    version = lombokVersion\r\n    sha256 = &quot;&quot;\r\n}\r\napply plugin: &#39;org.springframework.boot&#39;\r\napply plugin: &#39;io.spring.dependency-management&#39;\r\napply plugin: &#39;docker-compose&#39;\r\n\r\nbootJar {\r\n    baseName = &quot;${baseName}##${version}&quot;\r\n    classifier = &quot;&quot;\r\n    version = &quot;&quot;\r\n}\r\ntask shadowJar(dependsOn: bootJar)\r\ndependencies {\r\n    implementation project(&#39;:base&#39;),\r\n            project(&#39;:queue&#39;),\r\n            project(&#39;:data-access&#39;),\r\n            project(&#39;:data-transfer&#39;),\r\n            project(&#39;:rest-services&#39;),\r\n            project(&#39;:cache&#39;),\r\n            project(&#39;:auth&#39;),\r\n            project(&#39;:common-services&#39;),\r\n            project(&#39;:vault&#39;)\r\n    implementation(&quot;software.amazon.awssdk:s3:${awsSdk2Version}&quot;)\r\n    implementation(&#39;org.springframework.boot:spring-boot-starter-json&#39;)\r\n    implementation(&#39;org.springframework.boot:spring-boot-starter-data-jpa&#39;)\r\n    implementation(&#39;org.springframework.boot:spring-boot-starter-validation&#39;)\r\n    implementation(&#39;org.springframework.boot:spring-boot-starter-webflux&#39;)\r\n    implementation(&quot;org.springframework.retry:spring-retry:${springRetryVersion}&quot;)\r\n    implementation(&quot;com.opencsv:opencsv:${opencsvVersion}&quot;)\r\n    implementation(&quot;com.google.code.findbugs:jsr305:${googleFindbugsVersion}&quot;)\r\n    runtimeOnly(&#39;org.springframework.boot:spring-boot-devtools&#39;)\r\n    compileOnly(&#39;org.springframework.boot:spring-boot-configuration-processor&#39;)\r\n    testImplementation(&#39;org.springframework.boot:spring-boot-starter-test&#39;)\r\n    testImplementation(&quot;com.h2database:h2:${H2DatabaseVersion}&quot;)\r\n}\r\n\r\ndockerCompose {\r\n    removeContainers = true\r\n}\r\n```","title":"Why parallel streaming of entities list run on each entity more than one time?","body":"<p>I have a java 17, spring boot project, and i'm trying to run a method on an entities list with parallel stream.</p>\n<p>what happens is that the code run on each entity few times.</p>\n<p>any idea how to make sure it's run only once for each entity?</p>\n<p>thanks!</p>\n<p>this is the streaming part:</p>\n<pre><code>    List&lt;Entity&gt; entityList = repository.findTop1000ByStatus(PENDING);\n    \nfinal var list = entityList;\nForkJoinPool customThreadPool = new ForkJoinPool(Math.min(entityList.size(), 100));\ncustomThreadPool.submit(() -&gt; list.stream().parallel().forEach(entity -&gt; {\n                            long userId = entity.getUserId();\n                            UserDto user;\n                            try {\n    .\n    .\n    .\n</code></pre>\n<p>this is the gradle.build file:</p>\n<pre><code>buildscript {\n    dependencies {\n        classpath(&quot;org.springframework.boot:spring-boot-gradle-plugin:${springBootVersion}&quot;)\n        classpath &quot;com.avast.gradle:gradle-docker-compose-plugin:0.6.0&quot;\n    }\n}\n\nplugins {\n    id 'io.franzbecker.gradle-lombok' version '5.0.0'\n}\ntest {\n    useJUnitPlatform()\n}\nlombok {\n    version = lombokVersion\n    sha256 = &quot;&quot;\n}\napply plugin: 'org.springframework.boot'\napply plugin: 'io.spring.dependency-management'\napply plugin: 'docker-compose'\n\nbootJar {\n    baseName = &quot;${baseName}##${version}&quot;\n    classifier = &quot;&quot;\n    version = &quot;&quot;\n}\ntask shadowJar(dependsOn: bootJar)\ndependencies {\n    implementation project(':base'),\n            project(':queue'),\n            project(':data-access'),\n            project(':data-transfer'),\n            project(':rest-services'),\n            project(':cache'),\n            project(':auth'),\n            project(':common-services'),\n            project(':vault')\n    implementation(&quot;software.amazon.awssdk:s3:${awsSdk2Version}&quot;)\n    implementation('org.springframework.boot:spring-boot-starter-json')\n    implementation('org.springframework.boot:spring-boot-starter-data-jpa')\n    implementation('org.springframework.boot:spring-boot-starter-validation')\n    implementation('org.springframework.boot:spring-boot-starter-webflux')\n    implementation(&quot;org.springframework.retry:spring-retry:${springRetryVersion}&quot;)\n    implementation(&quot;com.opencsv:opencsv:${opencsvVersion}&quot;)\n    implementation(&quot;com.google.code.findbugs:jsr305:${googleFindbugsVersion}&quot;)\n    runtimeOnly('org.springframework.boot:spring-boot-devtools')\n    compileOnly('org.springframework.boot:spring-boot-configuration-processor')\n    testImplementation('org.springframework.boot:spring-boot-starter-test')\n    testImplementation(&quot;com.h2database:h2:${H2DatabaseVersion}&quot;)\n}\n\ndockerCompose {\n    removeContainers = true\n}\n</code></pre>\n"},{"tags":["java","amazon-web-services","amazon-cognito"],"answers":[{"tags":[],"owner":{"account_id":2369279,"reputation":2588,"user_id":2074257,"display_name":"Nghia Do"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1598447584,"creation_date":1598447584,"answer_id":63598453,"question_id":63595239,"body_markdown":"There is no such feature with Cognito yet. Either you have to call Filter couple times or you need to sync Cognito data to your database and perform SQL on top of it.","title":"AWS Cognito ListUsersRequest","body":"<p>There is no such feature with Cognito yet. Either you have to call Filter couple times or you need to sync Cognito data to your database and perform SQL on top of it.</p>\n"},{"tags":[],"owner":{"account_id":17051985,"reputation":11,"user_id":12337422,"display_name":"Prabath Udayanga"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1662550330,"creation_date":1660576459,"answer_id":73362968,"question_id":63595239,"body_markdown":"You can&#39;t add multiple conditions to the ListUsersRequest filter parameter it&#39;s not supported by Cognito,\r\n\r\n&gt; AttributeName: The name of the attribute to search for. You can only search for one attribute at a time.\r\n\r\nRefer[Document][1] for more details\r\n\r\n\r\n```\r\nListUsersRequest listUsersRequest = ListUsersRequest.builder()\r\n                .userPoolId(userPoolId)\r\n                .filter(String.format(&quot;given_name ^= \\&quot;%1$s\\&quot; &quot;, userName))\r\n                .build();\r\n```\r\n\r\n\r\n  [1]: https://docs.aws.amazon.com/cognito-user-identity-pools/latest/APIReference/API_ListUsers.html#CognitoUserPools-ListUsers-request-Filter","title":"AWS Cognito ListUsersRequest","body":"<p>You can't add multiple conditions to the ListUsersRequest filter parameter it's not supported by Cognito,</p>\n<blockquote>\n<p>AttributeName: The name of the attribute to search for. You can only search for one attribute at a time.</p>\n</blockquote>\n<p>Refer<a href=\"https://docs.aws.amazon.com/cognito-user-identity-pools/latest/APIReference/API_ListUsers.html#CognitoUserPools-ListUsers-request-Filter\" rel=\"nofollow noreferrer\">Document</a> for more details</p>\n<pre><code>ListUsersRequest listUsersRequest = ListUsersRequest.builder()\n                .userPoolId(userPoolId)\n                .filter(String.format(&quot;given_name ^= \\&quot;%1$s\\&quot; &quot;, userName))\n                .build();\n</code></pre>\n"}],"owner":{"account_id":18503804,"reputation":268,"user_id":13480545,"display_name":"jaop"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":474,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1662550330,"creation_date":1598436183,"question_id":63595239,"body_markdown":"I want to make a request to Cognito to get a list of users, whose name/email/given_name.. start with some strings. \r\n\r\nCould we make ListUsersRequest with different filters? \r\n\r\nI tried this, but it does not seem to work:\r\n\r\n    String filter = &quot;username ^= \\&quot;&quot; + searchKey + &quot;\\&quot; or name ^= \\&quot;&quot; + searchKey + &quot;\\&quot; or email ^= \\&quot;&quot; + searchKey + &quot;\\&quot;&quot; ;\r\n    ListUsersRequest request = ListUsersRequest.builder()\r\n                        .filter(filter)    \r\n                        .userPoolId(COGNITO_USER_POOL_ID)\r\n                        .build();","title":"AWS Cognito ListUsersRequest","body":"<p>I want to make a request to Cognito to get a list of users, whose name/email/given_name.. start with some strings.</p>\n<p>Could we make ListUsersRequest with different filters?</p>\n<p>I tried this, but it does not seem to work:</p>\n<pre><code>String filter = &quot;username ^= \\&quot;&quot; + searchKey + &quot;\\&quot; or name ^= \\&quot;&quot; + searchKey + &quot;\\&quot; or email ^= \\&quot;&quot; + searchKey + &quot;\\&quot;&quot; ;\nListUsersRequest request = ListUsersRequest.builder()\n                    .filter(filter)    \n                    .userPoolId(COGNITO_USER_POOL_ID)\n                    .build();\n</code></pre>\n"},{"tags":["java","install4j"],"comments":[{"owner":{"account_id":900581,"reputation":46749,"user_id":936832,"accept_rate":75,"display_name":"Ingo Kegel"},"score":0,"creation_date":1662549975,"post_id":73632108,"comment_id":130030403,"body_markdown":"On stackoverflow you cannot ask two questions in a single post. Also, for these kinds of issues, please contact support@ej-technolgies.com.","body":"On stackoverflow you cannot ask two questions in a single post. Also, for these kinds of issues, please contact support@ej-technolgies.com."},{"owner":{"account_id":23454661,"reputation":115,"user_id":17510341,"display_name":"Naveen Neelayyagari"},"score":0,"creation_date":1662552596,"post_id":73632108,"comment_id":130031490,"body_markdown":"I will to further follow up","body":"I will to further follow up"}],"answers":[{"tags":[],"owner":{"account_id":900581,"reputation":46749,"user_id":936832,"accept_rate":75,"display_name":"Ingo Kegel"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1662550130,"creation_date":1662550130,"answer_id":73634707,"question_id":73632108,"body_markdown":"The first problem looks like anti-virus software problem where the anti-virus software detects a .exe file that is extracted to the %TEMP% directory and immediately quarantines it.\r\n\r\nFor the second problem, please locate the log file of the running bgupdater process which is located in the %TEMP% directory. Either you start the bgupdater process too frequently or it is hanging somewhere, you would need to find that out. To install a new version, all executables of the installation must be closed.","title":"Update downloader with silent Version check -&gt; Error opening media file","body":"<p>The first problem looks like anti-virus software problem where the anti-virus software detects a .exe file that is extracted to the %TEMP% directory and immediately quarantines it.</p>\n<p>For the second problem, please locate the log file of the running bgupdater process which is located in the %TEMP% directory. Either you start the bgupdater process too frequently or it is hanging somewhere, you would need to find that out. To install a new version, all executables of the installation must be closed.</p>\n"}],"owner":{"account_id":23454661,"reputation":115,"user_id":17510341,"display_name":"Naveen Neelayyagari"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":40,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":73634707,"answer_count":1,"score":2,"last_activity_date":1662550130,"creation_date":1662538236,"question_id":73632108,"body_markdown":"We use the install4j &quot;Update downloader with silent Version check&quot; to periodically update our application installer.\r\n\r\nWith the introduction of the &quot;Update downloader with silent Version check&quot;, we have noticed two problems from the Users.\r\n\r\n1. Error opening media file as can be seen in the screenshot. The Media file is the file that is downloaded in the 1st Step of the updater. Screenshot below\r\n\r\n[![enter image description here][1]][1]\r\n\r\nThe error log file mentions\r\n\r\n[0:918] extracting files\r\n[0:932] Included files: 16\r\n[3:537] ERROR: Could not open FFFFFFFFFFFFFFFF 32 C:\\Users\\ttttttttt\\Downloads\\xxxxxxxxxx_7_xxxx_yy_zz_64Bit.exe\r\n[128:104] emptying C:\\Users\\ttttttttt\\AppData\\Local\\Temp\\e4j8A6C.tmp_dir1662356615\r\n\r\n\r\nThe Users have not opened the downloaded file. Normally clickin on OK and a retry generally works.\r\n\r\n2. The second problem some users are facing\r\n\r\n[![enter image description here][2]][2]\r\n\r\nThe 2nd error mentions that the bgupdater.exe is already running. Even here, clicking on &quot;Wiederholen&quot; generally works and the update proceeds.\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/sBvY2.png\r\n\r\nWhat we do not understand is that why these errors arise. A retry proceeds without errors in all cases normally.\r\n\r\nThe application uses install4j version 8 and java 1.8\r\n  [2]: https://i.stack.imgur.com/jVl3I.png","title":"Update downloader with silent Version check -&gt; Error opening media file","body":"<p>We use the install4j &quot;Update downloader with silent Version check&quot; to periodically update our application installer.</p>\n<p>With the introduction of the &quot;Update downloader with silent Version check&quot;, we have noticed two problems from the Users.</p>\n<ol>\n<li>Error opening media file as can be seen in the screenshot. The Media file is the file that is downloaded in the 1st Step of the updater. Screenshot below</li>\n</ol>\n<p><a href=\"https://i.stack.imgur.com/sBvY2.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/sBvY2.png\" alt=\"enter image description here\" /></a></p>\n<p>The error log file mentions</p>\n<p>[0:918] extracting files\n[0:932] Included files: 16\n[3:537] ERROR: Could not open FFFFFFFFFFFFFFFF 32 C:\\Users\\ttttttttt\\Downloads\\xxxxxxxxxx_7_xxxx_yy_zz_64Bit.exe\n[128:104] emptying C:\\Users\\ttttttttt\\AppData\\Local\\Temp\\e4j8A6C.tmp_dir1662356615</p>\n<p>The Users have not opened the downloaded file. Normally clickin on OK and a retry generally works.</p>\n<ol start=\"2\">\n<li>The second problem some users are facing</li>\n</ol>\n<p>[![enter image description here][2]][2]</p>\n<p>The 2nd error mentions that the bgupdater.exe is already running. Even here, clicking on &quot;Wiederholen&quot; generally works and the update proceeds.</p>\n<p>What we do not understand is that why these errors arise. A retry proceeds without errors in all cases normally.</p>\n<p>The application uses install4j version 8 and java 1.8\n[2]: <a href=\"https://i.stack.imgur.com/jVl3I.png\" rel=\"nofollow noreferrer\">https://i.stack.imgur.com/jVl3I.png</a></p>\n"}],"has_more":true,"backoff":10,"quota_max":10000,"quota_remaining":8939,"page":1053,"page_size":100}
