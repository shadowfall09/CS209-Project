{"items":[{"tags":["java","swap"],"comments":[{"owner":{"account_id":76594,"reputation":5792,"user_id":219155,"accept_rate":80,"display_name":"Nate C-K"},"score":3,"creation_date":1267905567,"post_id":2393906,"comment_id":2372727,"body_markdown":"You&#39;ll have to state more specifically what you&#39;re trying to accomplish if you want to get help with this.","body":"You&#39;ll have to state more specifically what you&#39;re trying to accomplish if you want to get help with this."},{"owner":{"account_id":79346,"reputation":57079,"user_id":225074,"accept_rate":91,"display_name":"Thomas Matthews"},"score":1,"creation_date":1267905708,"post_id":2393906,"comment_id":2372737,"body_markdown":"Check out this article: http://www.javaworld.com/javaworld/javaqa/2000-05/03-qa-0526-pass.html","body":"Check out this article: <a href=\"http://www.javaworld.com/javaworld/javaqa/2000-05/03-qa-0526-pass.html\" rel=\"nofollow noreferrer\">javaworld.com/javaworld/javaqa/2000-05/03-qa-0526-pass.html</a>"},{"owner":{"account_id":92864,"reputation":27045,"user_id":254306,"accept_rate":84,"display_name":"Travis Gockel"},"score":1,"creation_date":1267905724,"post_id":2393906,"comment_id":2372738,"body_markdown":"All parameters in Java are passed by value.","body":"All parameters in Java are passed by value."},{"owner":{"account_id":87077,"reputation":25964,"user_id":241717,"accept_rate":73,"display_name":"GuruKulki"},"score":0,"creation_date":1267906270,"post_id":2393906,"comment_id":2372781,"body_markdown":"you should use Integer instead int.","body":"you should use Integer instead int."},{"owner":{"account_id":50123,"reputation":365443,"user_id":149392,"display_name":"sepp2k"},"score":5,"creation_date":1267906550,"post_id":2393906,"comment_id":2372811,"body_markdown":"@gurukulki: That won&#39;t change a thing. If Integer had a `setValue` method, you could use that method instead of assignment and that would have the desired effect (unless you also want the object identity to change), but since there&#39;s not, using Integer won&#39;t help a bit.","body":"@gurukulki: That won&#39;t change a thing. If Integer had a <code>setValue</code> method, you could use that method instead of assignment and that would have the desired effect (unless you also want the object identity to change), but since there&#39;s not, using Integer won&#39;t help a bit."},{"owner":{"display_name":"user1487767"},"score":1,"creation_date":1340868193,"post_id":2393906,"comment_id":14769586,"body_markdown":"Chk this out.More info on swap by reference. http://www.cs.utsa.edu/~wagner/CS2213/swap/swap.html Chk this out.More info on swap by reference.","body":"Chk this out.More info on swap by reference. <a href=\"http://www.cs.utsa.edu/~wagner/CS2213/swap/swap.html\" rel=\"nofollow noreferrer\">cs.utsa.edu/~wagner/CS2213/swap/swap.html</a> Chk this out.More info on swap by reference."}],"answers":[{"tags":[],"owner":{"account_id":102991,"reputation":378282,"user_id":276101,"accept_rate":67,"display_name":"polygenelubricants"},"down_vote_count":0,"up_vote_count":16,"is_accepted":false,"score":16,"last_activity_date":1267922309,"creation_date":1267905523,"answer_id":2393913,"question_id":2393906,"body_markdown":"It depends on what you want to do. This code swaps two elements of an array.\r\n\r\n    void swap(int i, int j, int[] arr) {\r\n      int t = arr[i];\r\n      arr[i] = arr[j];\r\n      arr[j] = t;\r\n    }\r\n\r\nSomething like this swaps the content of two `int[]` of equal length.\r\n\r\n    void swap(int[] arr1, int[] arr2) {\r\n      int[] t = arr1.clone();\r\n      System.arraycopy(arr2, 0, arr1, 0, t.length);\r\n      System.arraycopy(t, 0, arr2, 0, t.length);\r\n    }\r\n\r\nSomething like this swaps the content of two `BitSet` (using the [XOR swap algorithm](http://en.wikipedia.org/wiki/XOR_swap_algorithm)):\r\n\r\n    void swap(BitSet s1, BitSet s2) {\r\n      s1.xor(s2);\r\n      s2.xor(s1);\r\n      s1.xor(s2);\r\n    }\r\n\r\nSomething like this swaps the `x` and `y` fields of some `Point` class:\r\n\r\n    void swapXY(Point p) {\r\n      int t = p.x;\r\n      p.x = p.y;\r\n      p.y = t;\r\n    }","title":"Java method to swap primitives","body":"<p>It depends on what you want to do. This code swaps two elements of an array.</p>\n\n<pre><code>void swap(int i, int j, int[] arr) {\n  int t = arr[i];\n  arr[i] = arr[j];\n  arr[j] = t;\n}\n</code></pre>\n\n<p>Something like this swaps the content of two <code>int[]</code> of equal length.</p>\n\n<pre><code>void swap(int[] arr1, int[] arr2) {\n  int[] t = arr1.clone();\n  System.arraycopy(arr2, 0, arr1, 0, t.length);\n  System.arraycopy(t, 0, arr2, 0, t.length);\n}\n</code></pre>\n\n<p>Something like this swaps the content of two <code>BitSet</code> (using the <a href=\"http://en.wikipedia.org/wiki/XOR_swap_algorithm\" rel=\"noreferrer\">XOR swap algorithm</a>):</p>\n\n<pre><code>void swap(BitSet s1, BitSet s2) {\n  s1.xor(s2);\n  s2.xor(s1);\n  s1.xor(s2);\n}\n</code></pre>\n\n<p>Something like this swaps the <code>x</code> and <code>y</code> fields of some <code>Point</code> class:</p>\n\n<pre><code>void swapXY(Point p) {\n  int t = p.x;\n  p.x = p.y;\n  p.y = t;\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":50123,"reputation":365443,"user_id":149392,"display_name":"sepp2k"},"down_vote_count":0,"up_vote_count":27,"is_accepted":true,"score":27,"last_activity_date":1353759802,"creation_date":1267905738,"answer_id":2393934,"question_id":2393906,"body_markdown":"You can&#39;t create a method swap, so that after calling `swap(x,y)` the values of x and y will be swapped. You could create such a method for mutable classes by swapping their contents&#185;, but this would not change their object identity and you could not define a general method for this.\r\n\r\nYou can however write a method that swaps two items in an array or list if that&#39;s what you want.\r\n\r\n&#185; For example you could create a swap method that takes two lists and after executing the method, list x will have the previous contents of list y and list y will have the previous contents of list x.","title":"Java method to swap primitives","body":"<p>You can't create a method swap, so that after calling <code>swap(x,y)</code> the values of x and y will be swapped. You could create such a method for mutable classes by swapping their contents¹, but this would not change their object identity and you could not define a general method for this.</p>\n\n<p>You can however write a method that swaps two items in an array or list if that's what you want.</p>\n\n<p>¹ For example you could create a swap method that takes two lists and after executing the method, list x will have the previous contents of list y and list y will have the previous contents of list x.</p>\n"},{"tags":[],"owner":{"account_id":11848,"reputation":9165,"user_id":23056,"accept_rate":100,"display_name":"nicerobot"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1441830320,"creation_date":1267921150,"answer_id":2394633,"question_id":2393906,"body_markdown":"I might do something like the following. Of course, with the wealth of Collection classes, i can&#39;t imagine ever needing to use this in any practical code.\r\n\r\n    public class Shift {\r\n      public static &lt;T&gt; T[] left (final T... i) {\r\n        if (1 &gt;= i.length) {\r\n          return i;\r\n        }\r\n        final T t = i[0];\r\n        int x = 0;\r\n        for (; x &lt; i.length - 1; x++) {\r\n          i[x] = i[x + 1];\r\n        }\r\n        i[x] = t;\r\n        return i;\r\n      }\r\n    }\r\n\r\nCalled with two arguments, it&#39;s a swap.\r\n\r\nIt can be used as follows:\r\n\r\n    int x = 1;\r\n    int y = 2;\r\n    Integer[] yx = Shift.left(x,y);\r\n\r\nAlternatively:\r\n\r\n    Integer[] yx = {x,y};\r\n    Shift.left(yx);\r\n\r\nThen\r\n\r\n    x = yx[0];\r\n    y = yx[1];\r\n\r\nNote: it auto-boxes primitives.","title":"Java method to swap primitives","body":"<p>I might do something like the following. Of course, with the wealth of Collection classes, i can't imagine ever needing to use this in any practical code.</p>\n\n<pre><code>public class Shift {\n  public static &lt;T&gt; T[] left (final T... i) {\n    if (1 &gt;= i.length) {\n      return i;\n    }\n    final T t = i[0];\n    int x = 0;\n    for (; x &lt; i.length - 1; x++) {\n      i[x] = i[x + 1];\n    }\n    i[x] = t;\n    return i;\n  }\n}\n</code></pre>\n\n<p>Called with two arguments, it's a swap.</p>\n\n<p>It can be used as follows:</p>\n\n<pre><code>int x = 1;\nint y = 2;\nInteger[] yx = Shift.left(x,y);\n</code></pre>\n\n<p>Alternatively:</p>\n\n<pre><code>Integer[] yx = {x,y};\nShift.left(yx);\n</code></pre>\n\n<p>Then</p>\n\n<pre><code>x = yx[0];\ny = yx[1];\n</code></pre>\n\n<p>Note: it auto-boxes primitives.</p>\n"},{"tags":[],"owner":{"account_id":1433328,"reputation":11556,"user_id":1355221,"accept_rate":100,"display_name":"dansalmo"},"down_vote_count":3,"up_vote_count":80,"is_accepted":false,"score":77,"last_activity_date":1387153852,"creation_date":1387142887,"answer_id":20600020,"question_id":2393906,"body_markdown":"I think this is the closest you can get to a simple swap, but it does not have a straightforward usage pattern:\r\n\r\n    int swap(int a, int b) {  // usage: y = swap(x, x=y);\r\n       return a;\r\n    }\r\n\r\n    y = swap(x, x=y);\r\n\r\nIt relies on the fact that `x` will pass into `swap` before `y` is assigned to `x`, then `x` is returned and assigned to `y`.\r\n\r\nYou can make it generic and swap any number of objects of the same type:\r\n\r\n    &lt;T&gt; T swap(T... args) {   // usage: z = swap(a, a=b, b=c, ... y=z);\r\n        return args[0];\r\n    }\r\n\r\n    c = swap(a, a=b, b=c)\r\n","title":"Java method to swap primitives","body":"<p>I think this is the closest you can get to a simple swap, but it does not have a straightforward usage pattern:</p>\n\n<pre><code>int swap(int a, int b) {  // usage: y = swap(x, x=y);\n   return a;\n}\n\ny = swap(x, x=y);\n</code></pre>\n\n<p>It relies on the fact that <code>x</code> will pass into <code>swap</code> before <code>y</code> is assigned to <code>x</code>, then <code>x</code> is returned and assigned to <code>y</code>.</p>\n\n<p>You can make it generic and swap any number of objects of the same type:</p>\n\n<pre><code>&lt;T&gt; T swap(T... args) {   // usage: z = swap(a, a=b, b=c, ... y=z);\n    return args[0];\n}\n\nc = swap(a, a=b, b=c)\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3205604,"reputation":8237,"user_id":2706707,"display_name":"D&#250;thomhas"},"down_vote_count":1,"up_vote_count":10,"is_accepted":false,"score":9,"last_activity_date":1535736043,"creation_date":1444152163,"answer_id":32975883,"question_id":2393906,"body_markdown":"Apparently I don&#39;t have enough reputation points to *comment* on [**Dansalmo**&#39;s\r\nanswer](https://stackoverflow.com/a/20600020/2706707), but it is a good one, though mis-named. His answer is actually a K-combinator.\r\n\r\n    int K( int a, int b ) {\r\n        return a;\r\n    }\r\n\r\nThe [JLS is specific about argument evaluation when passing to methods/ctors/etc](https://docs.oracle.com/javase/specs/jls/se8/html/jls-15.html#jls-15.7.4). (Was this not so in older specs?)\r\n\r\nGranted, this is a *functional* idiom, but it is clear enough to those who recognize it. (If you don&#39;t understand code you find, don&#39;t mess with it!)\r\n\r\n    y = K(x, x=y);  // swap x and y\r\n\r\nThe K-combinator is specifically designed for this kind of thing. AFAIK there&#39;s no reason it shouldn&#39;t pass a code review.\r\n\r\nMy $0.02.","title":"Java method to swap primitives","body":"<p>Apparently I don't have enough reputation points to <em>comment</em> on <a href=\"https://stackoverflow.com/a/20600020/2706707\"><strong>Dansalmo</strong>'s\nanswer</a>, but it is a good one, though mis-named. His answer is actually a K-combinator.</p>\n\n<pre><code>int K( int a, int b ) {\n    return a;\n}\n</code></pre>\n\n<p>The <a href=\"https://docs.oracle.com/javase/specs/jls/se8/html/jls-15.html#jls-15.7.4\" rel=\"nofollow noreferrer\">JLS is specific about argument evaluation when passing to methods/ctors/etc</a>. (Was this not so in older specs?)</p>\n\n<p>Granted, this is a <em>functional</em> idiom, but it is clear enough to those who recognize it. (If you don't understand code you find, don't mess with it!)</p>\n\n<pre><code>y = K(x, x=y);  // swap x and y\n</code></pre>\n\n<p>The K-combinator is specifically designed for this kind of thing. AFAIK there's no reason it shouldn't pass a code review.</p>\n\n<p>My $0.02.</p>\n"},{"tags":[],"owner":{"account_id":6440480,"reputation":19239,"user_id":4990642,"accept_rate":53,"display_name":"Soner from The Ottoman Empire"},"down_vote_count":1,"up_vote_count":3,"is_accepted":false,"score":2,"last_activity_date":1664266652,"creation_date":1465913766,"answer_id":37814602,"question_id":2393906,"body_markdown":"AFAIS, no one mentions of [atomic reference][1]. \r\n\r\nInteger\r\n\r\n    public void swap(AtomicInteger a, AtomicInteger b){\r\n        a.set(b.getAndSet(a.get()));\r\n    }\r\n\r\nString\r\n\r\n    public void swap(AtomicReference&lt;String&gt; a, AtomicReference&lt;String&gt; b){\r\n        a.set(b.getAndSet(a.get()));\r\n    }\r\n\r\n\r\nAs per @Stephan&#39;s comment: as long as you are not in a multi-threaded app, the following will work as well.\r\n\r\nFirst: wrap your simple types in an array of size 1.\r\n\r\n    int[] x1 = {x};\r\n    int[] y1 = {y};\r\n\r\nThen write a swap method\r\n\r\n    public void swap(int[] a, int[] b) {\r\n        assert(a.length == 1);\r\n        assert(b.length == 1);\r\n        int temp = a[0];\r\n        a[0] = b[0];\r\n        b[0] = temp;\r\n    }\r\n    \r\nIf you want to make this work for all simple types, you&#39;ll have to write overloads, because [Java Generics don&#39;t work for simple types][2].\r\n\r\n    \r\n\r\n\r\n  [1]: https://docs.oracle.com/javase/8/docs/api/java/util/concurrent/atomic/AtomicReference.html\r\n  [2]: https://stackoverflow.com/q/1617843/650492","title":"Java method to swap primitives","body":"<p>AFAIS, no one mentions of <a href=\"https://docs.oracle.com/javase/8/docs/api/java/util/concurrent/atomic/AtomicReference.html\" rel=\"nofollow noreferrer\">atomic reference</a>.</p>\n<p>Integer</p>\n<pre><code>public void swap(AtomicInteger a, AtomicInteger b){\n    a.set(b.getAndSet(a.get()));\n}\n</code></pre>\n<p>String</p>\n<pre><code>public void swap(AtomicReference&lt;String&gt; a, AtomicReference&lt;String&gt; b){\n    a.set(b.getAndSet(a.get()));\n}\n</code></pre>\n<p>As per @Stephan's comment: as long as you are not in a multi-threaded app, the following will work as well.</p>\n<p>First: wrap your simple types in an array of size 1.</p>\n<pre><code>int[] x1 = {x};\nint[] y1 = {y};\n</code></pre>\n<p>Then write a swap method</p>\n<pre><code>public void swap(int[] a, int[] b) {\n    assert(a.length == 1);\n    assert(b.length == 1);\n    int temp = a[0];\n    a[0] = b[0];\n    b[0] = temp;\n}\n</code></pre>\n<p>If you want to make this work for all simple types, you'll have to write overloads, because <a href=\"https://stackoverflow.com/q/1617843/650492\">Java Generics don't work for simple types</a>.</p>\n"},{"tags":[],"owner":{"account_id":1610807,"reputation":1622,"user_id":1489782,"display_name":"Mark Hetherington"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1518205666,"creation_date":1507670151,"answer_id":46676169,"question_id":2393906,"body_markdown":"Try this magic\r\n\r\n    public static &lt;T&gt; void swap(T a, T b) {\r\n        try {\r\n            Field[] fields = a.getClass().getDeclaredFields();\r\n            for (Field field : fields) {\r\n                field.setAccessible(true);\r\n                Object temp = field.get(a);\r\n                field.set(a, field.get(b));\r\n                field.set(b, temp);\r\n            }\r\n        } catch (IllegalAccessException e) {\r\n            e.printStackTrace();\r\n        }\r\n    }\r\n\r\nAnd test it!\r\n\r\n        System.out.println(&quot;a:&quot; + a);\r\n        System.out.println(&quot;b:&quot; + b);\r\n        swap(a,b);\r\n        System.out.println(&quot;a:&quot; + a);\r\n        System.out.println(&quot;b:&quot; + b);","title":"Java method to swap primitives","body":"<p>Try this magic</p>\n\n<pre><code>public static &lt;T&gt; void swap(T a, T b) {\n    try {\n        Field[] fields = a.getClass().getDeclaredFields();\n        for (Field field : fields) {\n            field.setAccessible(true);\n            Object temp = field.get(a);\n            field.set(a, field.get(b));\n            field.set(b, temp);\n        }\n    } catch (IllegalAccessException e) {\n        e.printStackTrace();\n    }\n}\n</code></pre>\n\n<p>And test it!</p>\n\n<pre><code>    System.out.println(\"a:\" + a);\n    System.out.println(\"b:\" + b);\n    swap(a,b);\n    System.out.println(\"a:\" + a);\n    System.out.println(\"b:\" + b);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3967710,"reputation":1462,"user_id":3273130,"display_name":"Bolpat"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1571340486,"creation_date":1571340486,"answer_id":58439523,"question_id":2393906,"body_markdown":"For integer types, you can do\r\n```\r\na ^= b;\r\nb ^= a;\r\na ^= b;\r\n```\r\nusing the bit-wise xor operator `^`. As all the other suggestions, you probably shouldn&#39;t use it in production code.\r\n\r\nFor a reason I don&#39;t know, the single line version `a ^= b ^= a ^= b` doesn&#39;t work (maybe my Java compiler has a bug). The single line worked in C with all compilers I tried. However, two-line versions work:\r\n```\r\na ^= b ^= a;\r\nb ^= a;\r\n```\r\nas well as\r\n```\r\nb ^= a;\r\na ^= b ^= a;\r\n```\r\n\r\nA proof that it works: Let a₀ and b₀ be the initial values for `a` and `b`. After the first line, `a` is a₁ = a₀ xor b₀; after the second line, `b` is b₁ = b₀ xor a₁ = b₀ xor (a₀ xor b₀) = a₀. After the third line, `a` is a₂ = a₁ xor b₁ = a₁ xor (b₀ xor a₁) = b₀.","title":"Java method to swap primitives","body":"<p>For integer types, you can do</p>\n\n<pre><code>a ^= b;\nb ^= a;\na ^= b;\n</code></pre>\n\n<p>using the bit-wise xor operator <code>^</code>. As all the other suggestions, you probably shouldn't use it in production code.</p>\n\n<p>For a reason I don't know, the single line version <code>a ^= b ^= a ^= b</code> doesn't work (maybe my Java compiler has a bug). The single line worked in C with all compilers I tried. However, two-line versions work:</p>\n\n<pre><code>a ^= b ^= a;\nb ^= a;\n</code></pre>\n\n<p>as well as</p>\n\n<pre><code>b ^= a;\na ^= b ^= a;\n</code></pre>\n\n<p>A proof that it works: Let a₀ and b₀ be the initial values for <code>a</code> and <code>b</code>. After the first line, <code>a</code> is a₁ = a₀ xor b₀; after the second line, <code>b</code> is b₁ = b₀ xor a₁ = b₀ xor (a₀ xor b₀) = a₀. After the third line, <code>a</code> is a₂ = a₁ xor b₁ = a₁ xor (b₀ xor a₁) = b₀.</p>\n"}],"owner":{"account_id":96642,"reputation":1561,"user_id":262588,"accept_rate":90,"display_name":"higherDefender"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":113209,"favorite_count":0,"down_vote_count":3,"up_vote_count":53,"accepted_answer_id":2393934,"answer_count":8,"score":50,"last_activity_date":1664266652,"creation_date":1267905407,"question_id":2393906,"body_markdown":"how do I make my swap function in java if there is no method by which we can pass by reference?  Could somebody give me a code?\r\n\r\n    swap(int a, int b)\r\n    {\r\n         int temp = a;\r\n         a = b;\r\n         b = temp;\r\n    }\r\n\r\nBut the changes wont be reflected back since java passes parameters by value.\r\n","title":"Java method to swap primitives","body":"<p>how do I make my swap function in java if there is no method by which we can pass by reference?  Could somebody give me a code?</p>\n\n<pre><code>swap(int a, int b)\n{\n     int temp = a;\n     a = b;\n     b = temp;\n}\n</code></pre>\n\n<p>But the changes wont be reflected back since java passes parameters by value.</p>\n"},{"tags":["java","caching","infinispan"],"comments":[{"owner":{"account_id":319873,"reputation":87612,"user_id":637853,"accept_rate":50,"display_name":"Thomas"},"score":0,"creation_date":1659432194,"post_id":73204855,"comment_id":129287751,"body_markdown":"So `cache.keySet().stream()...` works but at the same time `cache.get(Quad.of(a, b, c, d))` doesn&#39;t?","body":"So <code>cache.keySet().stream()...</code> works but at the same time <code>cache.get(Quad.of(a, b, c, d))</code> doesn&#39;t?"},{"owner":{"account_id":20373866,"reputation":51,"user_id":14945497,"display_name":"Thomas"},"score":0,"creation_date":1659432333,"post_id":73204855,"comment_id":129287794,"body_markdown":"@Thomas Yes, that is where I am confused","body":"@Thomas Yes, that is where I am confused"},{"owner":{"account_id":415139,"reputation":5726,"user_id":789756,"accept_rate":46,"display_name":"Radim Vansa"},"score":1,"creation_date":1659511067,"post_id":73204855,"comment_id":129309178,"body_markdown":"Could you try to retrieve the object using stream(), put it into a ConcurrentHashMap and retrieve it from there? I smell a subtle bug in hashCode()/equals() anyway. I guess the Quad is a POJO, or are there any transient/volatile fields?","body":"Could you try to retrieve the object using stream(), put it into a ConcurrentHashMap and retrieve it from there? I smell a subtle bug in hashCode()/equals() anyway. I guess the Quad is a POJO, or are there any transient/volatile fields?"},{"owner":{"account_id":20373866,"reputation":51,"user_id":14945497,"display_name":"Thomas"},"score":0,"creation_date":1659515728,"post_id":73204855,"comment_id":129310740,"body_markdown":"@Radim Vansa, thanks for your idea. I will try that and update my question. None of the fields of Quad are transient/volatile, same goes for the elements&#39; classes.","body":"@Radim Vansa, thanks for your idea. I will try that and update my question. None of the fields of Quad are transient/volatile, same goes for the elements&#39; classes."},{"owner":{"account_id":20373866,"reputation":51,"user_id":14945497,"display_name":"Thomas"},"score":0,"creation_date":1659537450,"post_id":73204855,"comment_id":129318841,"body_markdown":"@RadimVansa I have tried it and sadly the correct Object gets returned. I&#39;ve updated the question with the call I made (under clarification).","body":"@RadimVansa I have tried it and sadly the correct Object gets returned. I&#39;ve updated the question with the call I made (under clarification)."},{"owner":{"account_id":3534106,"reputation":1214,"user_id":2952847,"display_name":"pruivo"},"score":0,"creation_date":1659544301,"post_id":73204855,"comment_id":129321143,"body_markdown":"Can you create a reproducer? It is probably easier than just asking for stuff to test.","body":"Can you create a reproducer? It is probably easier than just asking for stuff to test."},{"owner":{"account_id":20373866,"reputation":51,"user_id":14945497,"display_name":"Thomas"},"score":0,"creation_date":1659604253,"post_id":73204855,"comment_id":129335603,"body_markdown":"@pruivo I will try to do that. As the project I&#39;m working in is monolithic (and not exactly small) it&#39;s a little difficult but I&#39;ll try my best","body":"@pruivo I will try to do that. As the project I&#39;m working in is monolithic (and not exactly small) it&#39;s a little difficult but I&#39;ll try my best"},{"owner":{"account_id":20373866,"reputation":51,"user_id":14945497,"display_name":"Thomas"},"score":0,"creation_date":1659698582,"post_id":73204855,"comment_id":129361853,"body_markdown":"@Pruivo As you can see in my update, I wasn&#39;t able to reproduce the problem outside the project. I don&#39;t know why. But your idea gave me a direction which lead me to the more precise error I stated under &quot;Update&quot;. Thanks :)","body":"@Pruivo As you can see in my update, I wasn&#39;t able to reproduce the problem outside the project. I don&#39;t know why. But your idea gave me a direction which lead me to the more precise error I stated under &quot;Update&quot;. Thanks :)"},{"owner":{"account_id":3534106,"reputation":1214,"user_id":2952847,"display_name":"pruivo"},"score":1,"creation_date":1659884829,"post_id":73204855,"comment_id":129396031,"body_markdown":"You said you are using `ProtoStream`. Can you share the marshaller for `LocalDate`? Maybe some field is missing...","body":"You said you are using <code>ProtoStream</code>. Can you share the marshaller for <code>LocalDate</code>? Maybe some field is missing..."},{"owner":{"account_id":20373866,"reputation":51,"user_id":14945497,"display_name":"Thomas"},"score":0,"creation_date":1659949437,"post_id":73204855,"comment_id":129407924,"body_markdown":"@pruivo just as I posted the adapter I saw it. The field `day` is not correctly set in `create`. Oh my god! Nasty typo! Oh man. Thanks for the direction! \nI will leave this here as info for others to triple-check their protoadapters.","body":"@pruivo just as I posted the adapter I saw it. The field <code>day</code> is not correctly set in <code>create</code>. Oh my god! Nasty typo! Oh man. Thanks for the direction!  I will leave this here as info for others to triple-check their protoadapters."},{"owner":{"account_id":20373866,"reputation":51,"user_id":14945497,"display_name":"Thomas"},"score":0,"creation_date":1659950038,"post_id":73204855,"comment_id":129408163,"body_markdown":"@Pruivo I am still wondering how it&#39;s possible that `hashCode()` and `equals()` were working though. My guess is that these methods are called directly on the pojo-cache and `get()`, `containsKey()` are not. As Infinispan implements the Map-Interface this kind of behaviour seems confusing.","body":"@Pruivo I am still wondering how it&#39;s possible that <code>hashCode()</code> and <code>equals()</code> were working though. My guess is that these methods are called directly on the pojo-cache and <code>get()</code>, <code>containsKey()</code> are not. As Infinispan implements the Map-Interface this kind of behaviour seems confusing."},{"owner":{"account_id":3534106,"reputation":1214,"user_id":2952847,"display_name":"pruivo"},"score":1,"creation_date":1659956437,"post_id":73204855,"comment_id":129410345,"body_markdown":"Infinispan uses `hashCode()` to determine the segment (and owners) of a key. Internally, the data is stored in a `ConcurrentHashMap`. My guess is, if the protostream adapter was incorrect, some nodes would store a &quot;different version&quot; of your key, and then `get()` and `containsKey()` would fail to match. We would need to debug Infinispan to find out the place where the mismatch happens.","body":"Infinispan uses <code>hashCode()</code> to determine the segment (and owners) of a key. Internally, the data is stored in a <code>ConcurrentHashMap</code>. My guess is, if the protostream adapter was incorrect, some nodes would store a &quot;different version&quot; of your key, and then <code>get()</code> and <code>containsKey()</code> would fail to match. We would need to debug Infinispan to find out the place where the mismatch happens."},{"owner":{"account_id":20373866,"reputation":51,"user_id":14945497,"display_name":"Thomas"},"score":0,"creation_date":1660043761,"post_id":73204855,"comment_id":129434424,"body_markdown":"@Pruivo Thanks for the insight. I will keep that in mind. As for the debugging, actually I was using Infinispan only on my local machine (but in Replicated Mode). The cache gets written to a SoftFileStore though. I&#39;ve also found the `ConcurrentHashMap` that&#39;s used inside the cache and it calls `get(key)` with a key that is serialized. This call is made on a map which&#39;s keys and values are also serialized. Is this normal behaviour?","body":"@Pruivo Thanks for the insight. I will keep that in mind. As for the debugging, actually I was using Infinispan only on my local machine (but in Replicated Mode). The cache gets written to a SoftFileStore though. I&#39;ve also found the <code>ConcurrentHashMap</code> that&#39;s used inside the cache and it calls <code>get(key)</code> with a key that is serialized. This call is made on a map which&#39;s keys and values are also serialized. Is this normal behaviour?"},{"owner":{"account_id":3534106,"reputation":1214,"user_id":2952847,"display_name":"pruivo"},"score":0,"creation_date":1660069403,"post_id":73204855,"comment_id":129444385,"body_markdown":"by default, embedded stores POJO but can be configured to store serialized objects. Server stores the serialized objects by default.","body":"by default, embedded stores POJO but can be configured to store serialized objects. Server stores the serialized objects by default."},{"owner":{"account_id":20373866,"reputation":51,"user_id":14945497,"display_name":"Thomas"},"score":0,"creation_date":1660141848,"post_id":73204855,"comment_id":129463533,"body_markdown":"@Pruivo Thanks for all the usefull insights. I think I will summarize the solution for my problem in an answer and use the relevant parts of information you gave to do so. Feel free to edit if I get anything wrong.","body":"@Pruivo Thanks for all the usefull insights. I think I will summarize the solution for my problem in an answer and use the relevant parts of information you gave to do so. Feel free to edit if I get anything wrong."}],"answers":[{"tags":[],"owner":{"account_id":20373866,"reputation":51,"user_id":14945497,"display_name":"Thomas"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1660890873,"creation_date":1660304880,"answer_id":73333676,"question_id":73204855,"body_markdown":"After a careful deduction following Pruivo&#39;s suggestions, I could pin down a cause for this bug. It is the `ProtoAdapter` that is written for `LocalDate` in which an incorrect `LocalDate`-object is created upon deserialization.\r\n\r\n**Concrete fix:**\r\nThe concrete fix for this case is the following:\r\n```java\r\n@ProtoAdapter(LocalDate.class)\r\npublic class LocalDateAdapter {\r\n    \r\n    @ProtoFactory\r\n    LocalDate create(int year, short month, short day) {\r\n        return LocalDate.of(year, month, day); // &lt;= here was the error\r\n    }\r\n    \r\n    @ProtoField(number = 1, required = true)\r\n    int getYear(LocalDate localDate) {\r\n        return localDate.getYear();\r\n    }\r\n    \r\n    @ProtoField(number = 2, required = true)\r\n    short getMonth(LocalDate localDate) {\r\n        return (short) localDate.getMonth().getValue();\r\n    }\r\n    \r\n    @ProtoField(number = 3, required = true)\r\n    short getDay(LocalDate localDate) {\r\n        return (short) localDate.getDayOfMonth();\r\n    }\r\n}\r\n```\r\n**Explanation:**\r\nAs Pruivo stated, Infinispan uses `hashCode()` to determine a key&#39;s owner/segment. In the background Infinispan uses a `ConcurrentHashMap` for storing keys and values. This map contains serialized objects if the cache is configured for that.\r\n\r\nNow to the problem. The `ConcurrentHashMap` contains the following method that is called to retrieve an object:\r\n```java\r\npublic V get(Object key) {\r\n   Node&lt;K,V&gt;[] tab; Node&lt;K,V&gt; e, p; int n, eh; K ek;\r\n   int h = spread(key.hashCode());\r\n   if ((tab = table) != null &amp;&amp; (n = tab.length) &gt; 0 &amp;&amp;\r\n      (e = tabAt(tab, (n - 1) &amp; h)) != null) { // &lt;= line 5\r\n         // this code here is not reached\r\n         if ((eh = e.hash) == h) {\r\n                if ((ek = e.key) == key || (ek != null &amp;&amp; key.equals(ek)))\r\n                    return e.val;\r\n            }\r\n            else if (eh &lt; 0)\r\n                return (p = e.find(h, key)) != null ? p.val : null;\r\n            while ((e = e.next) != null) {\r\n                if (e.hash == h &amp;&amp;\r\n                    ((ek = e.key) == key || (ek != null &amp;&amp; key.equals(ek))))\r\n                    return e.val;\r\n         }\r\n      }\r\n   }\r\n   return null;\r\n}\r\n```\r\nAs you can see in line 5, there is a check for a method called `tabAt()`. This checks if the object reference at that adress of the map is `null`. If so then no further actions are taken and `null` will be returned. This includes that no check for `hashCode()` or `equals()` are done under this condition. This you can see in the lines that follow `tabAt()`. So this situation explains why `cache.entrySet().stream()...` could retrieve an object an `get()` couldn&#39;t.\r\n\r\nNow my educated guess why the object&#39;s reference isn&#39;t found: My quess is that the original key is that of the correctly serialized object but after deserialization this key becomes corrupt as it is no longer the correct one. As modification of a key in a `Map` can produce unexpected behaviour, this is my theory. (Source for unexpected behaviour of `Map` when key is modified: https://stackoverflow.com/a/21601013/14945497)\r\n\r\n**Suggestion/Remark:**\r\nA final remark I would like to make is that this error can be quite inconspicuous and lead to problems down the line because wrong objects are created upon deserialization. This leads to a lot of detective work when an error does occur. So, double-triple-check your definitions for all marshallers is my suggestion.","title":"How is it possible that a key exists in cache but cannot be retrieved through cache.get(key)?","body":"<p>After a careful deduction following Pruivo's suggestions, I could pin down a cause for this bug. It is the <code>ProtoAdapter</code> that is written for <code>LocalDate</code> in which an incorrect <code>LocalDate</code>-object is created upon deserialization.</p>\n<p><strong>Concrete fix:</strong>\nThe concrete fix for this case is the following:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@ProtoAdapter(LocalDate.class)\npublic class LocalDateAdapter {\n    \n    @ProtoFactory\n    LocalDate create(int year, short month, short day) {\n        return LocalDate.of(year, month, day); // &lt;= here was the error\n    }\n    \n    @ProtoField(number = 1, required = true)\n    int getYear(LocalDate localDate) {\n        return localDate.getYear();\n    }\n    \n    @ProtoField(number = 2, required = true)\n    short getMonth(LocalDate localDate) {\n        return (short) localDate.getMonth().getValue();\n    }\n    \n    @ProtoField(number = 3, required = true)\n    short getDay(LocalDate localDate) {\n        return (short) localDate.getDayOfMonth();\n    }\n}\n</code></pre>\n<p><strong>Explanation:</strong>\nAs Pruivo stated, Infinispan uses <code>hashCode()</code> to determine a key's owner/segment. In the background Infinispan uses a <code>ConcurrentHashMap</code> for storing keys and values. This map contains serialized objects if the cache is configured for that.</p>\n<p>Now to the problem. The <code>ConcurrentHashMap</code> contains the following method that is called to retrieve an object:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public V get(Object key) {\n   Node&lt;K,V&gt;[] tab; Node&lt;K,V&gt; e, p; int n, eh; K ek;\n   int h = spread(key.hashCode());\n   if ((tab = table) != null &amp;&amp; (n = tab.length) &gt; 0 &amp;&amp;\n      (e = tabAt(tab, (n - 1) &amp; h)) != null) { // &lt;= line 5\n         // this code here is not reached\n         if ((eh = e.hash) == h) {\n                if ((ek = e.key) == key || (ek != null &amp;&amp; key.equals(ek)))\n                    return e.val;\n            }\n            else if (eh &lt; 0)\n                return (p = e.find(h, key)) != null ? p.val : null;\n            while ((e = e.next) != null) {\n                if (e.hash == h &amp;&amp;\n                    ((ek = e.key) == key || (ek != null &amp;&amp; key.equals(ek))))\n                    return e.val;\n         }\n      }\n   }\n   return null;\n}\n</code></pre>\n<p>As you can see in line 5, there is a check for a method called <code>tabAt()</code>. This checks if the object reference at that adress of the map is <code>null</code>. If so then no further actions are taken and <code>null</code> will be returned. This includes that no check for <code>hashCode()</code> or <code>equals()</code> are done under this condition. This you can see in the lines that follow <code>tabAt()</code>. So this situation explains why <code>cache.entrySet().stream()...</code> could retrieve an object an <code>get()</code> couldn't.</p>\n<p>Now my educated guess why the object's reference isn't found: My quess is that the original key is that of the correctly serialized object but after deserialization this key becomes corrupt as it is no longer the correct one. As modification of a key in a <code>Map</code> can produce unexpected behaviour, this is my theory. (Source for unexpected behaviour of <code>Map</code> when key is modified: <a href=\"https://stackoverflow.com/a/21601013/14945497\">https://stackoverflow.com/a/21601013/14945497</a>)</p>\n<p><strong>Suggestion/Remark:</strong>\nA final remark I would like to make is that this error can be quite inconspicuous and lead to problems down the line because wrong objects are created upon deserialization. This leads to a lot of detective work when an error does occur. So, double-triple-check your definitions for all marshallers is my suggestion.</p>\n"}],"owner":{"account_id":20373866,"reputation":51,"user_id":14945497,"display_name":"Thomas"},"comment_count":15,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":735,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":73333676,"answer_count":1,"score":1,"last_activity_date":1664266607,"creation_date":1659431347,"question_id":73204855,"body_markdown":"**Context:**\r\nThere is an Infinispan (13.0.10) cache that uses a custom data type `Quad&lt;String, Long, Type, ValidityPeriod&gt;` as key. As far as I can tell all `hashCode()` and `equals(Object o)`-methods are either auto-generated or implemented correctly.\r\nAlso the cache is used in Local Mode.\r\n\r\n**Question:**\r\nWhen I try to call `cache.get(Object key)` with a Quad that I know the cache contains, I get `null`. `cache.containsKey(Object key)` also returns `false`.\r\n\r\nHow is this possible?\r\n\r\n**Clarification:**\r\nI said that I know the cache contains the `Quad` key because I have done the following using the Eclipse IDE debugger:\r\n```java\r\ncache.entrySet().stream().filter(e -&gt; e.getKey().hashCode == Quad.of(a, b, c, d).hashCode()).collect(toList());\r\n// this returns a non-empty list with my expected return\r\n``` \r\n```java\r\ncache.entrySet().stream().filter(e -&gt; e.getKey().equals(Quad.of(a, b, c, d))).collect(toList());\r\n// this returns a non-empty list with my expected return\r\n``` \r\n\r\nPer Radim Vansa&#39;s suggestion I have also tried the following:\r\n```\r\ncache.entrySet().stream().collect(Collectors.toMap(Entry::getKey, Entry::getValue, (o1,o2) -&gt; o1, ConcurrentHashMap::new)).get(Quad.of(a, b, c, d));\r\n// this returns my expected return\r\n```\r\n\r\n**Further Context (if needed):**\r\nI am working on an older project where I am supposed to update from Infinispan Version 10 to 13. I have successfully done so and also integrated ProtoStream API instead of using the old JBossMarshaller. This version change is important because the retrieval stopped working after the update.\r\n\r\nThere are multiple Caches in use, some are indexed using custom data types such as `Pair&lt;K, V&gt;`, `Triple&lt;L, M, R&gt;` and `Quad&lt;A, B, C, D&gt;` which are all generic. I have written some ProtoAdpaters for all of them and they work just fine.\r\n\r\nI now have come across a problem, where there is an AdvancedCache that uses a Quad like this as key:\r\n```\r\nQuad&lt;String, Long, Type, ValidityPeriod&gt;\r\n```\r\nQuad overrides `equals(Object o)` and `hashCode` as follows:\r\n```\r\npublic class Quad&lt;A, B, C, D&gt; {\r\n\r\n    // other code omitted for brevity\r\n\r\n    public boolean equals(final Object obj) {\r\n        if (obj == this) {\r\n            return true;\r\n        }\r\n        if (obj instanceof Quad&lt;?, ?, ?, ?&gt;) {\r\n            final Quad&lt;?, ?, ?, ?&gt; other = (Quad&lt;?, ?, ?, ?&gt;) obj;\r\n            return Objects.equals(getFirst(), other.getFirst())\r\n                &amp;&amp; Objects.equals(getSecond(), other.getSecond())\r\n                &amp;&amp; Objects.equals(getThird(), other.getThird())\r\n                &amp;&amp; Objects.equals(getFourth(), other.getFourth());\r\n        }\r\n        return false;\r\n    }\r\n\r\n    public int hashCode() {\r\n        return Objects.hashCode(getFirst()) \r\n        \t\t^ Objects.hashCode(getSecond()) \r\n        \t\t^ Objects.hashCode(getThird()) \r\n        \t\t^ Objects.hashCode(getFourth());\r\n    }\r\n}\r\n```\r\nFor reference `Type` is structured along the lines of:\r\n```\r\npublic class Type implements Serializable {\r\n\tprivate int fieldA;\r\n\tprivate int fieldB;\r\n\tprivate String fieldC;\r\n\r\n    // hashCode and equals are auto-generated\r\n    // constructor, getters and setters omitted for brevity\r\n}\r\n```\r\n`ValidityPeriod` is something like this:\r\n```\r\npublic class ValidityPeriod implements Serializable {\r\n\tprivate LocalDate validFrom;\r\n\tprivate LocalDate invalidFrom;\r\n\r\n    // hashCode and equals are auto-generated\r\n    // constructor, getters and setters omitted for brevity\r\n}\r\n```\r\nThe marshaller for `LocalDate` uses the following adapter:\r\n```\r\n@ProtoAdapter(LocalDate.class)\r\npublic class LocalDateAdapter {\r\n\t\r\n\t@ProtoFactory\r\n\tLocalDate create(int year, short month, short day) {\r\n\t\treturn LocalDate.of(year, month, month);\r\n\t}\r\n\t\r\n\t@ProtoField(number = 1, required = true)\r\n\tint getYear(LocalDate localDate) {\r\n\t\treturn localDate.getYear();\r\n\t}\r\n\t\r\n\t@ProtoField(number = 2, required = true)\r\n\tshort getMonth(LocalDate localDate) {\r\n\t\treturn (short) localDate.getMonth().getValue();\r\n\t}\r\n\t\r\n\t@ProtoField(number = 3, required = true)\r\n\tshort getDay(LocalDate localDate) {\r\n\t\treturn (short) localDate.getDayOfMonth();\r\n\t}\r\n}\r\n```\r\nI have tried to use the debugger to understand the internal workings of Infinispan but I don&#39;t seem to be able to pin down a concrete line producing this error.\r\nAs far as I know it has something to do with `CacheImpl.get(Object, long, InvocationContext)`.\r\n\r\n**Update:**\r\nOk, per Pruivo&#39;s suggestion I have tried to create a reprex. The strange thing however is that I have tried to copy every process that happens before the object is retrieved from the cache, but in the reprex I created it works. \r\nFunny thing however is the following I tried:\r\nI created two methods in `ValidityPeriod` that do the following (almost like Infinispan Transformers):\r\n```\r\npublic String toFormString() {\r\n\treturn String.format(&quot;%s&#167;%s&quot;, validFrom, invalidFrom);\r\n}\r\n\t\r\npublic static ValidityPeriod fromFormString(String form) {\r\n\tString[] split = form.split(&quot;&#167;&quot;);\r\n\treturn from(LocalDate.parse(split[0]),LocalDate.parse(split[1]));\r\n}\r\n```\r\nThen I&#39;ve changed the Quad to `Quad&lt;String, Long, Type, String&gt;` while constructing the key for the cache with strings from these methods instead of the ValidityPeriod itself. Strangely enough, this fixes my original problem. \r\nHowever, as this is a dirty fix, I am not content with keeping this solution permanent. There has to be something wrong with `ValidityPeriod` is my guess.\r\n\r\n\r\nI still am confused as to why the cache returns something different than it contains, so I will still leave my original question open.","title":"How is it possible that a key exists in cache but cannot be retrieved through cache.get(key)?","body":"<p><strong>Context:</strong>\nThere is an Infinispan (13.0.10) cache that uses a custom data type <code>Quad&lt;String, Long, Type, ValidityPeriod&gt;</code> as key. As far as I can tell all <code>hashCode()</code> and <code>equals(Object o)</code>-methods are either auto-generated or implemented correctly.\nAlso the cache is used in Local Mode.</p>\n<p><strong>Question:</strong>\nWhen I try to call <code>cache.get(Object key)</code> with a Quad that I know the cache contains, I get <code>null</code>. <code>cache.containsKey(Object key)</code> also returns <code>false</code>.</p>\n<p>How is this possible?</p>\n<p><strong>Clarification:</strong>\nI said that I know the cache contains the <code>Quad</code> key because I have done the following using the Eclipse IDE debugger:</p>\n<pre class=\"lang-java prettyprint-override\"><code>cache.entrySet().stream().filter(e -&gt; e.getKey().hashCode == Quad.of(a, b, c, d).hashCode()).collect(toList());\n// this returns a non-empty list with my expected return\n</code></pre>\n<pre class=\"lang-java prettyprint-override\"><code>cache.entrySet().stream().filter(e -&gt; e.getKey().equals(Quad.of(a, b, c, d))).collect(toList());\n// this returns a non-empty list with my expected return\n</code></pre>\n<p>Per Radim Vansa's suggestion I have also tried the following:</p>\n<pre><code>cache.entrySet().stream().collect(Collectors.toMap(Entry::getKey, Entry::getValue, (o1,o2) -&gt; o1, ConcurrentHashMap::new)).get(Quad.of(a, b, c, d));\n// this returns my expected return\n</code></pre>\n<p><strong>Further Context (if needed):</strong>\nI am working on an older project where I am supposed to update from Infinispan Version 10 to 13. I have successfully done so and also integrated ProtoStream API instead of using the old JBossMarshaller. This version change is important because the retrieval stopped working after the update.</p>\n<p>There are multiple Caches in use, some are indexed using custom data types such as <code>Pair&lt;K, V&gt;</code>, <code>Triple&lt;L, M, R&gt;</code> and <code>Quad&lt;A, B, C, D&gt;</code> which are all generic. I have written some ProtoAdpaters for all of them and they work just fine.</p>\n<p>I now have come across a problem, where there is an AdvancedCache that uses a Quad like this as key:</p>\n<pre><code>Quad&lt;String, Long, Type, ValidityPeriod&gt;\n</code></pre>\n<p>Quad overrides <code>equals(Object o)</code> and <code>hashCode</code> as follows:</p>\n<pre><code>public class Quad&lt;A, B, C, D&gt; {\n\n    // other code omitted for brevity\n\n    public boolean equals(final Object obj) {\n        if (obj == this) {\n            return true;\n        }\n        if (obj instanceof Quad&lt;?, ?, ?, ?&gt;) {\n            final Quad&lt;?, ?, ?, ?&gt; other = (Quad&lt;?, ?, ?, ?&gt;) obj;\n            return Objects.equals(getFirst(), other.getFirst())\n                &amp;&amp; Objects.equals(getSecond(), other.getSecond())\n                &amp;&amp; Objects.equals(getThird(), other.getThird())\n                &amp;&amp; Objects.equals(getFourth(), other.getFourth());\n        }\n        return false;\n    }\n\n    public int hashCode() {\n        return Objects.hashCode(getFirst()) \n                ^ Objects.hashCode(getSecond()) \n                ^ Objects.hashCode(getThird()) \n                ^ Objects.hashCode(getFourth());\n    }\n}\n</code></pre>\n<p>For reference <code>Type</code> is structured along the lines of:</p>\n<pre><code>public class Type implements Serializable {\n    private int fieldA;\n    private int fieldB;\n    private String fieldC;\n\n    // hashCode and equals are auto-generated\n    // constructor, getters and setters omitted for brevity\n}\n</code></pre>\n<p><code>ValidityPeriod</code> is something like this:</p>\n<pre><code>public class ValidityPeriod implements Serializable {\n    private LocalDate validFrom;\n    private LocalDate invalidFrom;\n\n    // hashCode and equals are auto-generated\n    // constructor, getters and setters omitted for brevity\n}\n</code></pre>\n<p>The marshaller for <code>LocalDate</code> uses the following adapter:</p>\n<pre><code>@ProtoAdapter(LocalDate.class)\npublic class LocalDateAdapter {\n    \n    @ProtoFactory\n    LocalDate create(int year, short month, short day) {\n        return LocalDate.of(year, month, month);\n    }\n    \n    @ProtoField(number = 1, required = true)\n    int getYear(LocalDate localDate) {\n        return localDate.getYear();\n    }\n    \n    @ProtoField(number = 2, required = true)\n    short getMonth(LocalDate localDate) {\n        return (short) localDate.getMonth().getValue();\n    }\n    \n    @ProtoField(number = 3, required = true)\n    short getDay(LocalDate localDate) {\n        return (short) localDate.getDayOfMonth();\n    }\n}\n</code></pre>\n<p>I have tried to use the debugger to understand the internal workings of Infinispan but I don't seem to be able to pin down a concrete line producing this error.\nAs far as I know it has something to do with <code>CacheImpl.get(Object, long, InvocationContext)</code>.</p>\n<p><strong>Update:</strong>\nOk, per Pruivo's suggestion I have tried to create a reprex. The strange thing however is that I have tried to copy every process that happens before the object is retrieved from the cache, but in the reprex I created it works.\nFunny thing however is the following I tried:\nI created two methods in <code>ValidityPeriod</code> that do the following (almost like Infinispan Transformers):</p>\n<pre><code>public String toFormString() {\n    return String.format(&quot;%s§%s&quot;, validFrom, invalidFrom);\n}\n    \npublic static ValidityPeriod fromFormString(String form) {\n    String[] split = form.split(&quot;§&quot;);\n    return from(LocalDate.parse(split[0]),LocalDate.parse(split[1]));\n}\n</code></pre>\n<p>Then I've changed the Quad to <code>Quad&lt;String, Long, Type, String&gt;</code> while constructing the key for the cache with strings from these methods instead of the ValidityPeriod itself. Strangely enough, this fixes my original problem.\nHowever, as this is a dirty fix, I am not content with keeping this solution permanent. There has to be something wrong with <code>ValidityPeriod</code> is my guess.</p>\n<p>I still am confused as to why the cache returns something different than it contains, so I will still leave my original question open.</p>\n"},{"tags":["java","selenium","cucumber","ambiguous"],"answers":[{"tags":[],"owner":{"account_id":4895787,"reputation":10833,"user_id":3945473,"display_name":"M.P. Korstanje"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1664237005,"creation_date":1664237005,"answer_id":73861072,"question_id":73859492,"body_markdown":"Your original regex doesn&#39;t match the step\r\n\r\n```text\r\n^User enters (\\&quot;\\\\d+\\\\.\\\\d+\\&quot;)$\r\n```\r\n\r\nNote the `&quot;` that doesn&#39;t exist in the step \r\n\r\n```\r\nWhen User enters 1.0\r\n```\r\n\r\nThough since your steps are talking about user input you may want to capture it as a string instead, e.g:\r\n\r\n```\r\nUser enters {string}\r\n```\r\n\r\nAnd then write a step like\r\n\r\n\r\n```\r\nWhen User enters &quot;1.0&quot;\r\n```\r\n\r\nNote the added `&quot;`s.","title":"In cucumber, is it possible to have a single stepdefinition method for int and double datatypes, if no then how to handle these different datatypes?","body":"<p>Your original regex doesn't match the step</p>\n<pre><code>^User enters (\\&quot;\\\\d+\\\\.\\\\d+\\&quot;)$\n</code></pre>\n<p>Note the <code>&quot;</code> that doesn't exist in the step</p>\n<pre><code>When User enters 1.0\n</code></pre>\n<p>Though since your steps are talking about user input you may want to capture it as a string instead, e.g:</p>\n<pre><code>User enters {string}\n</code></pre>\n<p>And then write a step like</p>\n<pre><code>When User enters &quot;1.0&quot;\n</code></pre>\n<p>Note the added <code>&quot;</code>s.</p>\n"},{"tags":[],"owner":{"account_id":2330814,"reputation":504,"user_id":2044296,"accept_rate":24,"display_name":"user2044296"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1664266389,"creation_date":1664266389,"answer_id":73864351,"question_id":73859492,"body_markdown":"Issue found resolved with regex `(\\\\d*\\\\.?\\\\d*)` ","title":"In cucumber, is it possible to have a single stepdefinition method for int and double datatypes, if no then how to handle these different datatypes?","body":"<p>Issue found resolved with regex <code>(\\\\d*\\\\.?\\\\d*)</code></p>\n"}],"owner":{"account_id":2330814,"reputation":504,"user_id":2044296,"accept_rate":24,"display_name":"user2044296"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":141,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":73861072,"answer_count":2,"score":0,"last_activity_date":1664266389,"creation_date":1664223215,"question_id":73859492,"body_markdown":"In cucumber, is it possible to have a single stepdefinition method for int and double datatypes, if no then how to handle these different datatypes **without changing data/parameter to a similar datatype** like string or double?\r\n\r\nFor Eg. \r\n\r\n    Feature: Testing\r\n\r\n    Scenario: Test1\r\n    When User enters 1 \r\n    Then Print &quot;Hello&quot;\r\n\r\n    Scenario: Test2\r\n    When User enters 1.0 \r\n    Then don&#39;t print anything\r\n\r\nWhen I use the following Stepdefinition with Regular Expression, matching glue code is found missing for steps &quot;User enters 1&quot; and &quot;User enters 1.0&quot; or **steps are undefined** error comes up.\r\n\r\n    public class test {\r\n     \r\n    \t@Then(&quot;Print {string}&quot;)\r\n    \tpublic void print(String string) {\r\n    \t\tSystem.out.println(string);\r\n    \t}\r\n    \r\n    \t@When(&quot;^User enters (\\&quot;\\\\d+\\\\.\\\\d+\\&quot;)$&quot;)\r\n    \tpublic void user_enters(Double double1) {\r\n    \t   System.out.println(double1);\r\n    \t}\r\n        @Then(&quot;don&#39;t print anything&quot;)\r\n        public void don_t_print_anything() {\r\n           }\r\n    }\r\nBut when I add the suggested steps snippet to the stepdefinition(mentioned below) then io.cucumber.core.runner.**AmbiguousStepDefinitionsException** is thrown.\r\n\r\n    public class test {\r\n    @When(&quot;User enters {int}&quot;)\r\n    public void user_enters(Integer int1) {\r\n       system.out.println(int1);\r\n    }\r\n    \r\n    @Then(&quot;Print {string}&quot;)\r\n    public void print(String string) {\r\n       system.out.println(string);\r\n    }\r\n    \r\n    @When(&quot;User enters {double}&quot;)\r\n    public void user_enters(Double double1) {\r\n        system.out.println(double1);\r\n    }\r\n     @Then(&quot;don&#39;t print anything&quot;)\r\n     public void don_t_print_anything() {\r\n               }\r\n    }","title":"In cucumber, is it possible to have a single stepdefinition method for int and double datatypes, if no then how to handle these different datatypes?","body":"<p>In cucumber, is it possible to have a single stepdefinition method for int and double datatypes, if no then how to handle these different datatypes <strong>without changing data/parameter to a similar datatype</strong> like string or double?</p>\n<p>For Eg.</p>\n<pre><code>Feature: Testing\n\nScenario: Test1\nWhen User enters 1 \nThen Print &quot;Hello&quot;\n\nScenario: Test2\nWhen User enters 1.0 \nThen don't print anything\n</code></pre>\n<p>When I use the following Stepdefinition with Regular Expression, matching glue code is found missing for steps &quot;User enters 1&quot; and &quot;User enters 1.0&quot; or <strong>steps are undefined</strong> error comes up.</p>\n<pre><code>public class test {\n \n    @Then(&quot;Print {string}&quot;)\n    public void print(String string) {\n        System.out.println(string);\n    }\n\n    @When(&quot;^User enters (\\&quot;\\\\d+\\\\.\\\\d+\\&quot;)$&quot;)\n    public void user_enters(Double double1) {\n       System.out.println(double1);\n    }\n    @Then(&quot;don't print anything&quot;)\n    public void don_t_print_anything() {\n       }\n}\n</code></pre>\n<p>But when I add the suggested steps snippet to the stepdefinition(mentioned below) then io.cucumber.core.runner.<strong>AmbiguousStepDefinitionsException</strong> is thrown.</p>\n<pre><code>public class test {\n@When(&quot;User enters {int}&quot;)\npublic void user_enters(Integer int1) {\n   system.out.println(int1);\n}\n\n@Then(&quot;Print {string}&quot;)\npublic void print(String string) {\n   system.out.println(string);\n}\n\n@When(&quot;User enters {double}&quot;)\npublic void user_enters(Double double1) {\n    system.out.println(double1);\n}\n @Then(&quot;don't print anything&quot;)\n public void don_t_print_anything() {\n           }\n}\n</code></pre>\n"},{"tags":["java","spring","spring-boot","maven","properties"],"comments":[{"owner":{"account_id":3192259,"reputation":117599,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1664202471,"post_id":73855454,"comment_id":130411138,"body_markdown":"If the common module is available as a dependency it is available and can be loaded. So it must be either not available as a dependency, or you are loading it in the wrong way.","body":"If the common module is available as a dependency it is available and can be loaded. So it must be either not available as a dependency, or you are loading it in the wrong way."},{"owner":{"account_id":16711576,"reputation":434,"user_id":12078701,"display_name":"AnnKont"},"score":0,"creation_date":1664205941,"post_id":73855454,"comment_id":130412593,"body_markdown":"@M.Deinum no, I can load module. But I can not get spring properties in loaded module.","body":"@M.Deinum no, I can load module. But I can not get spring properties in loaded module."},{"owner":{"account_id":3192259,"reputation":117599,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1664266139,"post_id":73855454,"comment_id":130425880,"body_markdown":"As I stated it either isn&#39;t available as a module on the classpath **or** you are loading it wrong. So please show how you are doing things in the classpath (adding the module etc.) and how you are loading it.","body":"As I stated it either isn&#39;t available as a module on the classpath <b>or</b> you are loading it wrong. So please show how you are doing things in the classpath (adding the module etc.) and how you are loading it."}],"answers":[{"tags":[],"owner":{"account_id":9358395,"reputation":50,"user_id":13416066,"display_name":"Gaurav"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1664266158,"creation_date":1664204110,"answer_id":73855981,"question_id":73855454,"body_markdown":"The `@PropertySource` annotation is repeatable according to Java 8 conventions. Therefore, if we&#39;re using Java 8 or higher, we can use this annotation to define multiple property locations:\r\n    \r\n    @PropertySource(&quot;classpath:foo.properties&quot;)\r\n    @PropertySource(&quot;classpath:bar.properties&quot;)\r\n    public class PropertiesWithJavaConfig {\r\n        //...\r\n    }\r\n\r\n\r\n    \r\n    @PropertySources({\r\n        @PropertySource(&quot;classpath:foo.properties&quot;),\r\n        @PropertySource(&quot;classpath:bar.properties&quot;)\r\n    })\r\n    public class PropertiesWithJavaConfig {\r\n        //...\r\n    }\r\n\r\n\r\nRefer this article, https://www.baeldung.com/properties-with-spring ","title":"spring read properties file from different maven module","body":"<p>The <code>@PropertySource</code> annotation is repeatable according to Java 8 conventions. Therefore, if we're using Java 8 or higher, we can use this annotation to define multiple property locations:</p>\n<pre><code>@PropertySource(&quot;classpath:foo.properties&quot;)\n@PropertySource(&quot;classpath:bar.properties&quot;)\npublic class PropertiesWithJavaConfig {\n    //...\n}\n\n\n\n@PropertySources({\n    @PropertySource(&quot;classpath:foo.properties&quot;),\n    @PropertySource(&quot;classpath:bar.properties&quot;)\n})\npublic class PropertiesWithJavaConfig {\n    //...\n}\n</code></pre>\n<p>Refer this article, <a href=\"https://www.baeldung.com/properties-with-spring\" rel=\"nofollow noreferrer\">https://www.baeldung.com/properties-with-spring</a></p>\n"}],"owner":{"account_id":16711576,"reputation":434,"user_id":12078701,"display_name":"AnnKont"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1161,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":73855981,"answer_count":1,"score":1,"last_activity_date":1664266158,"creation_date":1664201626,"question_id":73855454,"body_markdown":"    demo-parent:\r\n      --web\r\n        --src\r\n          --main\r\n            --java\r\n              --Application.java\r\n            --resources\r\n              --application.yml\r\n              --application-mysql.yml\r\n       --service\r\n       --common\r\n         --src\r\n           --main\r\n             --java\r\n               --Config.java\r\n             --resources\r\n               --core-application.yml\r\n\r\nthere are some `spring properties` in `core-application` like `spring.kafka.properties.bootstrap.servers`. How can I get them in my *web module*?\r\n\r\nI have an error `FileNotFoundException: class path resource [core-application.yml] cannot be opened because it does not exist` now.","title":"spring read properties file from different maven module","body":"<pre><code>demo-parent:\n  --web\n    --src\n      --main\n        --java\n          --Application.java\n        --resources\n          --application.yml\n          --application-mysql.yml\n   --service\n   --common\n     --src\n       --main\n         --java\n           --Config.java\n         --resources\n           --core-application.yml\n</code></pre>\n<p>there are some <code>spring properties</code> in <code>core-application</code> like <code>spring.kafka.properties.bootstrap.servers</code>. How can I get them in my <em>web module</em>?</p>\n<p>I have an error <code>FileNotFoundException: class path resource [core-application.yml] cannot be opened because it does not exist</code> now.</p>\n"},{"tags":["java","sql","regex"],"comments":[{"owner":{"account_id":960307,"reputation":107861,"user_id":984823,"display_name":"Joop Eggen"},"score":0,"creation_date":1664182043,"post_id":73851560,"comment_id":130404268,"body_markdown":"`Pattern.compile(&quot;[^&#39;\\&quot;:]*:([\\\\w.$]+|\\&quot;[^\\&quot;]+\\&quot;|&#39;[^&#39;]+&#39;)&quot;, Pattern.MULTILINE)`","body":"<code>Pattern.compile(&quot;[^&#39;\\&quot;:]*:([\\\\w.$]+|\\&quot;[^\\&quot;]+\\&quot;|&#39;[^&#39;]+&#39;)&quot;, Pattern.MULTILINE)</code>"},{"owner":{"account_id":5226795,"reputation":656,"user_id":4178596,"accept_rate":91,"display_name":"t4dohx"},"score":0,"creation_date":1664182761,"post_id":73851560,"comment_id":130404506,"body_markdown":"Thanks for response. But in scenario: `code &lt;&gt; &#39;*&#39;\\nAND code IN (select x from ... where user = :user)` it considers `\\nAND code IN (select x from ... where user = :user` to be parameter.","body":"Thanks for response. But in scenario: <code>code &lt;&gt; &#39;*&#39;\\nAND code IN (select x from ... where user = :user)</code> it considers <code>\\nAND code IN (select x from ... where user = :user</code> to be parameter."},{"owner":{"account_id":960307,"reputation":107861,"user_id":984823,"display_name":"Joop Eggen"},"score":0,"creation_date":1664189167,"post_id":73851560,"comment_id":130406495,"body_markdown":"`Pattern.DOT_ALL` will let the `.` also match newlines. Forgotten","body":"<code>Pattern.DOT_ALL</code> will let the <code>.</code> also match newlines. Forgotten"}],"answers":[{"tags":[],"owner":{"account_id":170731,"reputation":4483,"user_id":397667,"accept_rate":100,"display_name":"bw_&#252;ezi"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1664265857,"creation_date":1664182773,"answer_id":73851787,"question_id":73851560,"body_markdown":"You could simplify your problem by assuming that a named param in sql is just a word with prefix `:` and always follows after a space (this is actually not a requirement or always true but might be just good enough to get you acceptable results with as simple of regex as possible)\r\n\r\n    Pattern.compile(&quot; :\\\\w+&quot;, Pattern.MULTILINE)\r\n\r\n--\r\n\r\nsummary of the comments:\r\n\r\n    had to match \r\n    - foo = :param AND :param = bar AND foo=:param AND :param=bar\r\n    - AND FUNC(:param) OR FUNC(0, :param) OR FUNC(:param, 0)\r\n\r\nfinally this regex with fixed length lookahead and variable length lookbehind was helpful:\r\n\r\n     Pattern.compile(&quot;(?&lt;=[=(])\\\\s*:[\\\\w_.]+|:[\\\\w_.]+(?=\\s*[=)])&quot;, Pattern.MULTILINE)","title":"Get list of parameter names from native sql expression (regex)","body":"<p>You could simplify your problem by assuming that a named param in sql is just a word with prefix <code>:</code> and always follows after a space (this is actually not a requirement or always true but might be just good enough to get you acceptable results with as simple of regex as possible)</p>\n<pre><code>Pattern.compile(&quot; :\\\\w+&quot;, Pattern.MULTILINE)\n</code></pre>\n<p>--</p>\n<p>summary of the comments:</p>\n<pre><code>had to match \n- foo = :param AND :param = bar AND foo=:param AND :param=bar\n- AND FUNC(:param) OR FUNC(0, :param) OR FUNC(:param, 0)\n</code></pre>\n<p>finally this regex with fixed length lookahead and variable length lookbehind was helpful:</p>\n<pre><code> Pattern.compile(&quot;(?&lt;=[=(])\\\\s*:[\\\\w_.]+|:[\\\\w_.]+(?=\\s*[=)])&quot;, Pattern.MULTILINE)\n</code></pre>\n"}],"owner":{"account_id":5226795,"reputation":656,"user_id":4178596,"accept_rate":91,"display_name":"t4dohx"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":138,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":73851787,"answer_count":1,"score":0,"last_activity_date":1664265857,"creation_date":1664181646,"question_id":73851560,"body_markdown":"I&#39;m having trouble getting list of all parameters in SQL query using Regex.\r\n\r\nExample of the query:\r\n\r\n    SELECT ... WHERE col1 = :user AND col2 = &#39;HELLO&#39; OR col3 = :language\r\n\r\nTo obtain parameters, I use following regex pattern:\r\n\r\n    Pattern.compile(&quot;:([\\\\w.$]+|\\&quot;[^\\&quot;]+\\&quot;|&#39;[^&#39;]+&#39;)&quot;, Pattern.MULTILINE)\r\n\r\nThe pattern returns list of parameters correctly:\r\n\r\n    :user\r\n    :language\r\n\r\nThe problem is with another type of query, where literals might contain character &#39;:&#39;\r\n\r\n    WHERE col1 = :user AND some_date &gt; &#39;2022-09-26T10:22:55&#39;\r\n\r\nThe list of parameters for this case is:\r\n\r\n    :user\r\n    :22\r\n    :55\r\n\r\nIs there any better approach that will not consider contents of literals as parameters? ","title":"Get list of parameter names from native sql expression (regex)","body":"<p>I'm having trouble getting list of all parameters in SQL query using Regex.</p>\n<p>Example of the query:</p>\n<pre><code>SELECT ... WHERE col1 = :user AND col2 = 'HELLO' OR col3 = :language\n</code></pre>\n<p>To obtain parameters, I use following regex pattern:</p>\n<pre><code>Pattern.compile(&quot;:([\\\\w.$]+|\\&quot;[^\\&quot;]+\\&quot;|'[^']+')&quot;, Pattern.MULTILINE)\n</code></pre>\n<p>The pattern returns list of parameters correctly:</p>\n<pre><code>:user\n:language\n</code></pre>\n<p>The problem is with another type of query, where literals might contain character ':'</p>\n<pre><code>WHERE col1 = :user AND some_date &gt; '2022-09-26T10:22:55'\n</code></pre>\n<p>The list of parameters for this case is:</p>\n<pre><code>:user\n:22\n:55\n</code></pre>\n<p>Is there any better approach that will not consider contents of literals as parameters?</p>\n"},{"tags":["java","spring","spring-boot","spring-security"],"answers":[{"tags":[],"owner":{"account_id":20441485,"reputation":366,"user_id":14998237,"display_name":"Andrey Grigoriev"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1652776120,"creation_date":1652776120,"answer_id":72270621,"question_id":72270270,"body_markdown":"When you call super.configure(http) it actually does the following:\r\n```\r\n\tprotected void configure(HttpSecurity http) throws Exception {\r\n\t\tthis.logger.debug(&quot;Using default configure(HttpSecurity). &quot;\r\n\t\t\t\t+ &quot;If subclassed this will potentially override subclass configure(HttpSecurity).&quot;);\r\n\t\thttp.authorizeRequests((requests) -&gt; requests.anyRequest().authenticated());\r\n\t\thttp.formLogin();\r\n\t\thttp.httpBasic();\r\n\t}\r\n```\r\nAnd after that you are trying to execute .authorizeRequests().antMatchers(&quot;/api/**&quot;) once again which causes this error. So simply don&#39;t call super.configure(http) and implement all logic you need in your method\r\n","title":"Failed to instantiate [javax.servlet.Filter]: Factory method &#39;springSecurityFilterChain&#39; Can&#39;t configure antMatchers after anyRequest","body":"<p>When you call super.configure(http) it actually does the following:</p>\n<pre><code>    protected void configure(HttpSecurity http) throws Exception {\n        this.logger.debug(&quot;Using default configure(HttpSecurity). &quot;\n                + &quot;If subclassed this will potentially override subclass configure(HttpSecurity).&quot;);\n        http.authorizeRequests((requests) -&gt; requests.anyRequest().authenticated());\n        http.formLogin();\n        http.httpBasic();\n    }\n</code></pre>\n<p>And after that you are trying to execute .authorizeRequests().antMatchers(&quot;/api/**&quot;) once again which causes this error. So simply don't call super.configure(http) and implement all logic you need in your method</p>\n"},{"tags":[],"owner":{"account_id":16425204,"reputation":959,"user_id":11865450,"display_name":"Vivek Singh"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1664265735,"creation_date":1664265735,"answer_id":73864230,"question_id":72270270,"body_markdown":"there is one other case also when you can get this error\r\n**Failed to instantiate [javax.servlet.Filter]: Factory method &#39;springSecurityFilterChain&#39; threw exception**\r\n\r\ncode which throws this exception\r\n\r\n    @Override\r\n    protected void configure(HttpSecurity http) throws Exception {\r\n        http.csrf().disable()\r\n                .authorizeRequests().antMatchers(&quot;/authenticate&quot;).permitAll()\r\n                .anyRequest();\r\n    }\r\n\r\nfix: append **.authenticated()** method\r\n\r\n    @Override\r\n    protected void configure(HttpSecurity http) throws Exception {\r\n        http.csrf().disable()\r\n                .authorizeRequests().antMatchers(&quot;/authenticate&quot;).permitAll()\r\n                .anyRequest().authenticated();\r\n    }","title":"Failed to instantiate [javax.servlet.Filter]: Factory method &#39;springSecurityFilterChain&#39; Can&#39;t configure antMatchers after anyRequest","body":"<p>there is one other case also when you can get this error\n<strong>Failed to instantiate [javax.servlet.Filter]: Factory method 'springSecurityFilterChain' threw exception</strong></p>\n<p>code which throws this exception</p>\n<pre><code>@Override\nprotected void configure(HttpSecurity http) throws Exception {\n    http.csrf().disable()\n            .authorizeRequests().antMatchers(&quot;/authenticate&quot;).permitAll()\n            .anyRequest();\n}\n</code></pre>\n<p>fix: append <strong>.authenticated()</strong> method</p>\n<pre><code>@Override\nprotected void configure(HttpSecurity http) throws Exception {\n    http.csrf().disable()\n            .authorizeRequests().antMatchers(&quot;/authenticate&quot;).permitAll()\n            .anyRequest().authenticated();\n}\n</code></pre>\n"}],"owner":{"account_id":16545718,"reputation":21,"user_id":11955274,"display_name":"cc gogo"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":7991,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"accepted_answer_id":72270621,"answer_count":2,"score":0,"last_activity_date":1664265735,"creation_date":1652774689,"question_id":72270270,"body_markdown":"I get this error after upgrading spring boot version to 2.6.2 :\r\n\r\n `Failed to instantiate [javax.servlet.Filter]: Factory method &#39;springSecurityFilterChain&#39; threw exception; nested exception is java.lang.IllegalStateException: Can&#39;t configure antMatchers after anyRequest`\r\n\r\nThis is my securityConfig class extends fromn WebSecurityConfigurerAdapter.\r\n\r\n    @Override\r\n\tprotected void configure(HttpSecurity http) throws Exception {\r\n\t\tsuper.configure(http);\r\n        http.csrf().disable().headers().frameOptions().disable().and().sessionManagement()\r\n            .sessionCreationPolicy(SessionCreationPolicy.STATELESS).and().authorizeRequests().antMatchers(&quot;/api/**&quot;)\r\n            .authenticated().and()\r\n            .addFilterAfter(new TokenAuthenticationProcessingFilter(\r\n                new PiAuthenticationProvider(\r\n                    new ApplicationPropertiesDataAdapterPi(this.applicationProperties)),\r\n                &quot;/api/**&quot;, null, new CustomAuthenticationFailureHandler(),\r\n                AuthTokenUtil::extractXAuthorizationToken), BasicAuthenticationFilter.class);\r\n\t}","title":"Failed to instantiate [javax.servlet.Filter]: Factory method &#39;springSecurityFilterChain&#39; Can&#39;t configure antMatchers after anyRequest","body":"<p>I get this error after upgrading spring boot version to 2.6.2 :</p>\n<p><code>Failed to instantiate [javax.servlet.Filter]: Factory method 'springSecurityFilterChain' threw exception; nested exception is java.lang.IllegalStateException: Can't configure antMatchers after anyRequest</code></p>\n<p>This is my securityConfig class extends fromn WebSecurityConfigurerAdapter.</p>\n<pre><code>@Override\nprotected void configure(HttpSecurity http) throws Exception {\n    super.configure(http);\n    http.csrf().disable().headers().frameOptions().disable().and().sessionManagement()\n        .sessionCreationPolicy(SessionCreationPolicy.STATELESS).and().authorizeRequests().antMatchers(&quot;/api/**&quot;)\n        .authenticated().and()\n        .addFilterAfter(new TokenAuthenticationProcessingFilter(\n            new PiAuthenticationProvider(\n                new ApplicationPropertiesDataAdapterPi(this.applicationProperties)),\n            &quot;/api/**&quot;, null, new CustomAuthenticationFailureHandler(),\n            AuthTokenUtil::extractXAuthorizationToken), BasicAuthenticationFilter.class);\n}\n</code></pre>\n"},{"tags":["java","anylogic"],"comments":[{"owner":{"account_id":9072254,"reputation":1014,"user_id":6754986,"display_name":"LinFelix"},"score":0,"creation_date":1664271647,"post_id":73864051,"comment_id":130427678,"body_markdown":"Please provide enough code so others can better understand or reproduce the problem.","body":"Please provide enough code so others can better understand or reproduce the problem."}],"answers":[{"tags":[],"owner":{"account_id":2486375,"reputation":11083,"user_id":2164728,"accept_rate":62,"display_name":"Benjamin"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1664265186,"creation_date":1664265186,"answer_id":73864130,"question_id":73864051,"body_markdown":"Simply turn off &quot;forced pushing&quot; in the source properties. Then, you can decide what to do with the agents created while the downstream queue was full:\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/nAQSj.png","title":"Stop Interarrival time of the source ,when the quee is full , and re-activate the source when the quee has space","body":"<p>Simply turn off &quot;forced pushing&quot; in the source properties. Then, you can decide what to do with the agents created while the downstream queue was full:\n<a href=\"https://i.stack.imgur.com/nAQSj.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/nAQSj.png\" alt=\"enter image description here\" /></a></p>\n"}],"owner":{"account_id":25747543,"reputation":23,"user_id":19766091,"display_name":"Adrian"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":31,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"accepted_answer_id":73864130,"answer_count":1,"score":0,"last_activity_date":1664265186,"creation_date":1664264789,"question_id":73864051,"body_markdown":"I am doing a basic design with a source+quee+delay+sink. The idea is to create 1 agent per day for example and have a maximum capacity of 5 in the quee, at the moment that the quee reaches its maximum I would like to stop the source until the delay finishes and space is released. At this point the source should continue producing agents. \r\n\r\nI tried to do this using the ratio arrival and the function:set_ratio(0), but that is not exactly what I want because the agents are not created in 1 per day as in interarrival time. \r\n\r\nAny tips on how to approach this?\r\n\r\nThanks!","title":"Stop Interarrival time of the source ,when the quee is full , and re-activate the source when the quee has space","body":"<p>I am doing a basic design with a source+quee+delay+sink. The idea is to create 1 agent per day for example and have a maximum capacity of 5 in the quee, at the moment that the quee reaches its maximum I would like to stop the source until the delay finishes and space is released. At this point the source should continue producing agents.</p>\n<p>I tried to do this using the ratio arrival and the function:set_ratio(0), but that is not exactly what I want because the agents are not created in 1 per day as in interarrival time.</p>\n<p>Any tips on how to approach this?</p>\n<p>Thanks!</p>\n"},{"tags":["java","dependency-injection","annotations","guice"],"comments":[{"owner":{"account_id":483434,"reputation":25487,"user_id":898478,"accept_rate":86,"display_name":"m0skit0"},"score":0,"creation_date":1664266247,"post_id":73859383,"comment_id":130425927,"body_markdown":"https://github.com/google/guice/wiki/InjectingProviders","body":"<a href=\"https://github.com/google/guice/wiki/InjectingProviders\" rel=\"nofollow noreferrer\">github.com/google/guice/wiki/InjectingProviders</a>"},{"owner":{"account_id":26450697,"reputation":11,"user_id":20093942,"display_name":"Lekha Dipika"},"score":0,"creation_date":1664270687,"post_id":73859383,"comment_id":130427343,"body_markdown":"Thanks @m0skit0. I&#39;ve been diving a lot into guice docs too. With injecting providers I&#39;m wondering how will Provider&lt;C&gt; know whether it is the dependency chain of A_subclass1 or A_subclass2 to accordingly pick the correct subclass of C?","body":"Thanks @m0skit0. I&#39;ve been diving a lot into guice docs too. With injecting providers I&#39;m wondering how will Provider&lt;C&gt; know whether it is the dependency chain of A_subclass1 or A_subclass2 to accordingly pick the correct subclass of C?"},{"owner":{"account_id":483434,"reputation":25487,"user_id":898478,"accept_rate":86,"display_name":"m0skit0"},"score":0,"creation_date":1664275154,"post_id":73859383,"comment_id":130428909,"body_markdown":"Sorry, my bad, I misunderstood the problem. In your case you can just use a named parameter for `B_subclass` using `@Named`.","body":"Sorry, my bad, I misunderstood the problem. In your case you can just use a named parameter for <code>B_subclass</code> using <code>@Named</code>."},{"owner":{"account_id":26450697,"reputation":11,"user_id":20093942,"display_name":"Lekha Dipika"},"score":0,"creation_date":1664291606,"post_id":73859383,"comment_id":130435389,"body_markdown":"True, and thats the current best idea I have. Of having named parameters (or Qualifiers) at each level and then having the dependency chain use the right one.\n\nThe thing is, in reality it is a chain of depth 6 (class A has member B, B has member C, C has member D ....) and basically we select the correct subclass of the lowermost level based on the uppermost level. So I can definitely have qualifiers through the entire chain. Just wondering if there is a cleaner/different way to do it?","body":"True, and thats the current best idea I have. Of having named parameters (or Qualifiers) at each level and then having the dependency chain use the right one.  The thing is, in reality it is a chain of depth 6 (class A has member B, B has member C, C has member D ....) and basically we select the correct subclass of the lowermost level based on the uppermost level. So I can definitely have qualifiers through the entire chain. Just wondering if there is a cleaner/different way to do it?"},{"owner":{"account_id":483434,"reputation":25487,"user_id":898478,"accept_rate":86,"display_name":"m0skit0"},"score":0,"creation_date":1664294807,"post_id":73859383,"comment_id":130436670,"body_markdown":"None that I can think of, sorry.","body":"None that I can think of, sorry."},{"owner":{"account_id":8321997,"reputation":522,"user_id":6253321,"accept_rate":82,"display_name":"cpp beginner"},"score":0,"creation_date":1664732840,"post_id":73859383,"comment_id":130534397,"body_markdown":"You could do it if you were able to inspect the dependency chain from your `Provider&lt;C&gt;`. You can do this using a `ProvisionListener`. I&#39;m not necessarily recommending this, but it would definitely work. The code here should give you a start: https://google.github.io/guice/api-docs/4.2/javadoc/com/google/inject/spi/ProvisionListener.ProvisionInvocation.html.","body":"You could do it if you were able to inspect the dependency chain from your <code>Provider&lt;C&gt;</code>. You can do this using a <code>ProvisionListener</code>. I&#39;m not necessarily recommending this, but it would definitely work. The code here should give you a start: <a href=\"https://google.github.io/guice/api-docs/4.2/javadoc/com/google/inject/spi/ProvisionListener.ProvisionInvocation.html\" rel=\"nofollow noreferrer\">google.github.io/guice/api-docs/4.2/javadoc/com/google/injec&zwnj;&#8203;t/&hellip;</a>."}],"owner":{"account_id":26450697,"reputation":11,"user_id":20093942,"display_name":"Lekha Dipika"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":157,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1664264900,"creation_date":1664222536,"question_id":73859383,"body_markdown":"Here is an artificial example to best illustrate what I need to do:\r\n\r\n``` java\r\ninterface A {}\r\ninterface B {}\r\ninterface C {}\r\n\r\nclass A_subclass1 implements A {\r\n    B b;\r\n}\r\n\r\nclass A_subclass2 implements A {\r\n    B b;\r\n}\r\n\r\nclass B_subclass implements B {\r\n    C c;\r\n}\r\n\r\nclass C_subclass1 implements C {}\r\n\r\nclass C_subclass2 implements C {}\r\n```\r\n\r\nFor `A_subclass1` the version of `C` that should be used is `C_subclass1`\r\nFor `A_subclass2` the version of `C` that should be used is `C_subclass2`\r\n\r\nIn other words, I wish to compose the following object graphs:\r\n\r\n``` java\r\nnew A_subclass1(\r\n    new B(\r\n        new C_subclass1()));\r\n\r\nnew A_subclass2(\r\n    new B(\r\n        new C_subclass2()));\r\n```\r\n\r\n* What is the best way to wire such a dependency?\r\n* Is there a good way within Guice to do this? \r\n* Is there some other recommended approach?","title":"Dependency injection with a dependency chain of classes","body":"<p>Here is an artificial example to best illustrate what I need to do:</p>\n<pre class=\"lang-java prettyprint-override\"><code>interface A {}\ninterface B {}\ninterface C {}\n\nclass A_subclass1 implements A {\n    B b;\n}\n\nclass A_subclass2 implements A {\n    B b;\n}\n\nclass B_subclass implements B {\n    C c;\n}\n\nclass C_subclass1 implements C {}\n\nclass C_subclass2 implements C {}\n</code></pre>\n<p>For <code>A_subclass1</code> the version of <code>C</code> that should be used is <code>C_subclass1</code>\nFor <code>A_subclass2</code> the version of <code>C</code> that should be used is <code>C_subclass2</code></p>\n<p>In other words, I wish to compose the following object graphs:</p>\n<pre class=\"lang-java prettyprint-override\"><code>new A_subclass1(\n    new B(\n        new C_subclass1()));\n\nnew A_subclass2(\n    new B(\n        new C_subclass2()));\n</code></pre>\n<ul>\n<li>What is the best way to wire such a dependency?</li>\n<li>Is there a good way within Guice to do this?</li>\n<li>Is there some other recommended approach?</li>\n</ul>\n"},{"tags":["java","json","rest"],"comments":[{"owner":{"account_id":6995331,"reputation":6431,"user_id":5363182,"accept_rate":80,"display_name":"Tharsan Sivakumar"},"score":0,"creation_date":1475746265,"post_id":19045992,"comment_id":67070726,"body_markdown":"If you are using Spring, it makes your life easy. It will perform a HTTP request, convert the HTTP response into an object type of your choice, and returns that object. https://spring.io/blog/2009/03/27/rest-in-spring-3-resttemplate","body":"If you are using Spring, it makes your life easy. It will perform a HTTP request, convert the HTTP response into an object type of your choice, and returns that object. <a href=\"https://spring.io/blog/2009/03/27/rest-in-spring-3-resttemplate\" rel=\"nofollow noreferrer\">spring.io/blog/2009/03/27/rest-in-spring-3-resttemplate</a>"}],"answers":[{"tags":[],"owner":{"account_id":2305374,"reputation":44549,"user_id":2024761,"display_name":"Rahul"},"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1380270384,"creation_date":1380270384,"answer_id":19046152,"question_id":19045992,"body_markdown":"Since this is a `PUT` request you&#39;re missing a few things here:\r\n\r\n    OutputStream os = conn.getOutputStream();\r\n    os.write(input.getBytes()); // The input you need to pass to the webservice\r\n    os.flush();\r\n    ...\r\n    BufferedReader br = new BufferedReader(new InputStreamReader(\r\n    \t\t(conn.getInputStream()))); // Getting the response from the webservice\r\n    \r\n    String output;\r\n    System.out.println(&quot;Output from Server .... \\n&quot;);\r\n    while ((output = br.readLine()) != null) {\r\n    \tSystem.out.println(output); // Instead of this, you could append all your response to a StringBuffer and use `toString()` to get the entire JSON response as a String.\r\n        // This string json response can be parsed using any json library. Eg. GSON from Google.\r\n    }\r\n\r\nHave a look at [this](http://www.mkyong.com/webservices/jax-rs/restfull-java-client-with-java-net-url/) to have a more clear idea on hitting webservices.","title":"Getting JSON response as part of Rest call in Java","body":"<p>Since this is a <code>PUT</code> request you're missing a few things here:</p>\n\n<pre><code>OutputStream os = conn.getOutputStream();\nos.write(input.getBytes()); // The input you need to pass to the webservice\nos.flush();\n...\nBufferedReader br = new BufferedReader(new InputStreamReader(\n        (conn.getInputStream()))); // Getting the response from the webservice\n\nString output;\nSystem.out.println(\"Output from Server .... \\n\");\nwhile ((output = br.readLine()) != null) {\n    System.out.println(output); // Instead of this, you could append all your response to a StringBuffer and use `toString()` to get the entire JSON response as a String.\n    // This string json response can be parsed using any json library. Eg. GSON from Google.\n}\n</code></pre>\n\n<p>Have a look at <a href=\"http://www.mkyong.com/webservices/jax-rs/restfull-java-client-with-java-net-url/\" rel=\"nofollow\">this</a> to have a more clear idea on hitting webservices.</p>\n"},{"tags":[],"owner":{"account_id":2333826,"reputation":53,"user_id":2046607,"accept_rate":50,"display_name":"djs"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1388861882,"creation_date":1388861882,"answer_id":20925312,"question_id":19045992,"body_markdown":"Since your Content-Type is application/json, you could directly cast the response to a JSON object for example\r\n\r\n    JSONObject recvObj = new JSONObject(response);","title":"Getting JSON response as part of Rest call in Java","body":"<p>Since your Content-Type is application/json, you could directly cast the response to a JSON object for example</p>\n\n<pre><code>JSONObject recvObj = new JSONObject(response);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2573906,"reputation":4528,"user_id":2232044,"accept_rate":60,"display_name":"Sergey Morozov"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1477380945,"creation_date":1475771540,"answer_id":39901291,"question_id":19045992,"body_markdown":"Your code is mostly correct, but there is mistake about `OutputStream`.\r\nAs R.J said `OutputStream` is needed to pass **request** body to the server.\r\nIf your rest service doesn&#39;t required any body you don&#39;t need to use this one.\r\n\r\nFor reading the server **response** you need use `InputStream`(R.J also show you example) like that:\r\n\r\n    try (InputStream inputStream = connection.getInputStream();\r\n         ByteArrayOutputStream byteArrayOutputStream = new ByteArrayOutputStream();) {\r\n        byte[] buf = new byte[512];\r\n        int read = -1;\r\n        while ((read = inputStream.read(buf)) &gt; 0) {\r\n            byteArrayOutputStream.write(buf, 0, read);\r\n        }\r\n        System.out.println(new String(byteArrayOutputStream.toByteArray()));\r\n    }\r\nThis way is good if you don&#39;t want to depends on third-part libraries. So I recommend you to take a look on [Jersey][1] - very nice library with huge amount of very useful feature.\r\n\r\n        Client client = JerseyClientBuilder.newBuilder().build();\r\n        Response response = client.target(&quot;http://host:port&quot;).\r\n                path(&quot;test&quot;).path(&quot;db-api&quot;).path(&quot;processor&quot;).path(&quot;packages&quot;).\r\n                request().accept(MediaType.APPLICATION_JSON_TYPE).buildGet().invoke();\r\n        System.out.println(response.readEntity(String.class));\r\n\r\n  [1]: https://jersey.java.net","title":"Getting JSON response as part of Rest call in Java","body":"<p>Your code is mostly correct, but there is mistake about <code>OutputStream</code>.\nAs R.J said <code>OutputStream</code> is needed to pass <strong>request</strong> body to the server.\nIf your rest service doesn't required any body you don't need to use this one.</p>\n\n<p>For reading the server <strong>response</strong> you need use <code>InputStream</code>(R.J also show you example) like that:</p>\n\n<pre><code>try (InputStream inputStream = connection.getInputStream();\n     ByteArrayOutputStream byteArrayOutputStream = new ByteArrayOutputStream();) {\n    byte[] buf = new byte[512];\n    int read = -1;\n    while ((read = inputStream.read(buf)) &gt; 0) {\n        byteArrayOutputStream.write(buf, 0, read);\n    }\n    System.out.println(new String(byteArrayOutputStream.toByteArray()));\n}\n</code></pre>\n\n<p>This way is good if you don't want to depends on third-part libraries. So I recommend you to take a look on <a href=\"https://jersey.java.net\" rel=\"nofollow\">Jersey</a> - very nice library with huge amount of very useful feature.</p>\n\n<pre><code>    Client client = JerseyClientBuilder.newBuilder().build();\n    Response response = client.target(\"http://host:port\").\n            path(\"test\").path(\"db-api\").path(\"processor\").path(\"packages\").\n            request().accept(MediaType.APPLICATION_JSON_TYPE).buildGet().invoke();\n    System.out.println(response.readEntity(String.class));\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3639271,"reputation":108,"user_id":3033864,"display_name":"Konzern"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1511214870,"creation_date":1511210434,"answer_id":47400673,"question_id":19045992,"body_markdown":"    JsonKey jsonkey = objectMapper.readValue(new URL(&quot;http://echo.jsontest.com/key/value/one/two&quot;), JsonKey.class);\r\n    System.out.println(&quot;jsonkey.getOne() : &quot;+jsonkey.getOne())\r\n","title":"Getting JSON response as part of Rest call in Java","body":"<pre><code>JsonKey jsonkey = objectMapper.readValue(new URL(\"http://echo.jsontest.com/key/value/one/two\"), JsonKey.class);\nSystem.out.println(\"jsonkey.getOne() : \"+jsonkey.getOne())\n</code></pre>\n"}],"owner":{"account_id":202342,"reputation":13496,"user_id":449355,"accept_rate":91,"display_name":"Umesh K"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":37949,"favorite_count":0,"down_vote_count":0,"up_vote_count":6,"accepted_answer_id":19046152,"answer_count":4,"score":6,"last_activity_date":1664264529,"creation_date":1380269851,"question_id":19045992,"body_markdown":"I am trying to make Rest service call in Java. I am new to web and Rest service. I have Rest service which returns JSON as response. I have the following code but I think it&#39;s incomplete because I don&#39;t know how to process output using JSON.\r\n\r\n    public static void main(String[] args) {\r\n    \t\ttry { \r\n    \t\t\t\r\n    \t        URL url = new URL(&quot;http://example.com:7000/test/db-api/processor&quot;); \r\n    \t        HttpURLConnection connection = (HttpURLConnection) url.openConnection(); \r\n    \t        connection.setDoOutput(true); \r\n    \t        connection.setInstanceFollowRedirects(false); \r\n    \t        connection.setRequestMethod(&quot;PUT&quot;); \r\n    \t        connection.setRequestProperty(&quot;Content-Type&quot;, &quot;application/json&quot;); \r\n    \r\n    \t        OutputStream os = connection.getOutputStream(); \r\n    \t       //how do I get json object and print it as string\r\n    \t        os.flush(); \r\n    \r\n    \t        connection.getResponseCode(); \r\n    \t        connection.disconnect(); \r\n    \t    } catch(Exception e) { \r\n    \t        throw new RuntimeException(e); \r\n    \t    } \r\n    \r\n    \t}\r\n\r\nI am new to Rest services and JSON.\r\n","title":"Getting JSON response as part of Rest call in Java","body":"<p>I am trying to make Rest service call in Java. I am new to web and Rest service. I have Rest service which returns JSON as response. I have the following code but I think it's incomplete because I don't know how to process output using JSON.</p>\n<pre><code>public static void main(String[] args) {\n        try { \n            \n            URL url = new URL(&quot;http://example.com:7000/test/db-api/processor&quot;); \n            HttpURLConnection connection = (HttpURLConnection) url.openConnection(); \n            connection.setDoOutput(true); \n            connection.setInstanceFollowRedirects(false); \n            connection.setRequestMethod(&quot;PUT&quot;); \n            connection.setRequestProperty(&quot;Content-Type&quot;, &quot;application/json&quot;); \n\n            OutputStream os = connection.getOutputStream(); \n           //how do I get json object and print it as string\n            os.flush(); \n\n            connection.getResponseCode(); \n            connection.disconnect(); \n        } catch(Exception e) { \n            throw new RuntimeException(e); \n        } \n\n    }\n</code></pre>\n<p>I am new to Rest services and JSON.</p>\n"},{"tags":["java","multithreading"],"comments":[{"owner":{"account_id":11089,"reputation":400030,"user_id":21234,"accept_rate":91,"display_name":"skaffman"},"score":24,"creation_date":1265468074,"post_id":2213340,"comment_id":2165841,"body_markdown":"The `Thread` javadoc describes what they are: http://java.sun.com/javase/6/docs/api/java/lang/Thread.html","body":"The <code>Thread</code> javadoc describes what they are: <a href=\"http://java.sun.com/javase/6/docs/api/java/lang/Thread.html\" rel=\"nofollow noreferrer\">java.sun.com/javase/6/docs/api/java/lang/Thread.html</a>"},{"owner":{"account_id":1624405,"reputation":89,"user_id":1500274,"display_name":"Robb Tsang"},"score":1,"creation_date":1413009444,"post_id":2213340,"comment_id":41290527,"body_markdown":"http://www.answers.com/Q/What_is_a_daemon_thread","body":"<a href=\"http://www.answers.com/Q/What_is_a_daemon_thread\" rel=\"nofollow noreferrer\">answers.com/Q/What_is_a_daemon_thread</a>"},{"owner":{"account_id":124072,"reputation":2812,"user_id":318938,"accept_rate":78,"display_name":"msj121"},"score":3,"creation_date":1429278691,"post_id":2213340,"comment_id":47538021,"body_markdown":"For Daemon Threads, when the JVM stops all daemon threads are exited \nDue to this reason daemon threads shouldn&#39;t be used often since cleanup might not be executed on them. For example any I/O would not gracefully exit and write/read all the way to the end.","body":"For Daemon Threads, when the JVM stops all daemon threads are exited  Due to this reason daemon threads shouldn&#39;t be used often since cleanup might not be executed on them. For example any I/O would not gracefully exit and write/read all the way to the end."}],"answers":[{"tags":[],"owner":{"account_id":85613,"reputation":21012,"user_id":238578,"accept_rate":75,"display_name":"b_erb"},"down_vote_count":1,"up_vote_count":710,"is_accepted":false,"score":709,"last_activity_date":1452864408,"creation_date":1265465457,"answer_id":2213348,"question_id":2213340,"body_markdown":"A daemon thread is a thread that does not prevent the JVM from exiting when the program finishes but the thread is still running. An example for a daemon thread is the garbage collection.\r\n\r\nYou can use the `setDaemon(boolean)` method to change the `Thread` daemon properties before the thread starts.","title":"What is a daemon thread in Java?","body":"<p>A daemon thread is a thread that does not prevent the JVM from exiting when the program finishes but the thread is still running. An example for a daemon thread is the garbage collection.</p>\n\n<p>You can use the <code>setDaemon(boolean)</code> method to change the <code>Thread</code> daemon properties before the thread starts.</p>\n"},{"tags":[],"owner":{"account_id":9867,"reputation":618181,"user_id":18393,"accept_rate":82,"display_name":"cletus"},"down_vote_count":0,"up_vote_count":105,"is_accepted":false,"score":105,"last_activity_date":1433192100,"creation_date":1265465504,"answer_id":2213350,"question_id":2213340,"body_markdown":"Traditionally daemon processes in UNIX were those that were constantly running in background, much like services in Windows.\r\n\r\nA daemon thread in Java is one that doesn&#39;t prevent the JVM from exiting. Specifically the JVM will exit when only daemon threads remain. You create one by calling the `setDaemon()` method on `Thread`.\r\n\r\nHave a read of [Daemon threads][1].\r\n\r\n\r\n  [1]: http://www.linuxtopia.org/online_books/programming_books/thinking_in_java/TIJ315_005.htm","title":"What is a daemon thread in Java?","body":"<p>Traditionally daemon processes in UNIX were those that were constantly running in background, much like services in Windows.</p>\n\n<p>A daemon thread in Java is one that doesn't prevent the JVM from exiting. Specifically the JVM will exit when only daemon threads remain. You create one by calling the <code>setDaemon()</code> method on <code>Thread</code>.</p>\n\n<p>Have a read of <a href=\"http://www.linuxtopia.org/online_books/programming_books/thinking_in_java/TIJ315_005.htm\" rel=\"noreferrer\">Daemon threads</a>.</p>\n"},{"tags":[],"owner":{"account_id":41850,"reputation":132318,"user_id":121747,"accept_rate":89,"display_name":"Jack"},"down_vote_count":1,"up_vote_count":39,"is_accepted":false,"score":38,"last_activity_date":1518087271,"creation_date":1265465563,"answer_id":2213353,"question_id":2213340,"body_markdown":"A *daemon thread* is a thread that is considered doing some tasks in the background like handling requests or various chronjobs that can exist in an application.\r\n\r\nWhen your program only have *daemon threads* remaining it will exit. That&#39;s because usually these threads work together with normal threads and provide background handling of events.\r\n\r\nYou can specify that a `Thread` is a *daemon* one by using `setDaemon` method, they usually don&#39;t exit, neither they are interrupted.. they just stop when application stops.","title":"What is a daemon thread in Java?","body":"<p>A <em>daemon thread</em> is a thread that is considered doing some tasks in the background like handling requests or various chronjobs that can exist in an application.</p>\n\n<p>When your program only have <em>daemon threads</em> remaining it will exit. That's because usually these threads work together with normal threads and provide background handling of events.</p>\n\n<p>You can specify that a <code>Thread</code> is a <em>daemon</em> one by using <code>setDaemon</code> method, they usually don't exit, neither they are interrupted.. they just stop when application stops.</p>\n"},{"tags":[],"owner":{"account_id":23282,"reputation":28065,"user_id":58220,"accept_rate":75,"display_name":"sateesh"},"down_vote_count":2,"up_vote_count":375,"is_accepted":false,"score":373,"last_activity_date":1539274860,"creation_date":1265467268,"answer_id":2213443,"question_id":2213340,"body_markdown":"A few more points (Reference: [Java Concurrency in Practice][1])  \r\n\r\n - When a new thread is created it inherits the daemon status of its\r\n   parent.\r\n - When all non-daemon threads finish, the JVM halts, and any remaining **daemon threads are abandoned**:\r\n  - **finally blocks are not executed**,\r\n  - stacks are not unwound - the JVM just exits.&lt;br/&gt;&lt;br/&gt;\r\n\r\n Due to this reason daemon threads should be used sparingly, and it is dangerous to use them for tasks that might perform any sort of I/O.\r\n\r\n  [1]: http://www.javaconcurrencyinpractice.com/","title":"What is a daemon thread in Java?","body":"<p>A few more points (Reference: <a href=\"http://www.javaconcurrencyinpractice.com/\" rel=\"noreferrer\">Java Concurrency in Practice</a>)  </p>\n\n<ul>\n<li>When a new thread is created it inherits the daemon status of its\nparent.</li>\n<li><p>When all non-daemon threads finish, the JVM halts, and any remaining <strong>daemon threads are abandoned</strong>:</p>\n\n<ul>\n<li><strong>finally blocks are not executed</strong>,</li>\n<li>stacks are not unwound - the JVM just exits.<br/><br/></li>\n</ul>\n\n<p>Due to this reason daemon threads should be used sparingly, and it is dangerous to use them for tasks that might perform any sort of I/O.</p></li>\n</ul>\n"},{"tags":[],"owner":{"account_id":1261323,"reputation":141,"user_id":1219536,"display_name":"soubhagini"},"down_vote_count":0,"up_vote_count":14,"is_accepted":false,"score":14,"last_activity_date":1329672954,"creation_date":1329672954,"answer_id":9351452,"question_id":2213340,"body_markdown":"Daemon Thread and User Threads. Generally all threads created by programmer are user thread (unless you specify it to be daemon or your parent thread is a daemon thread). User thread are generally meant to run our programm code. JVM doesn&#39;t terminates unless all the user thread terminate. \r\n","title":"What is a daemon thread in Java?","body":"<p>Daemon Thread and User Threads. Generally all threads created by programmer are user thread (unless you specify it to be daemon or your parent thread is a daemon thread). User thread are generally meant to run our programm code. JVM doesn't terminates unless all the user thread terminate. </p>\n"},{"tags":[],"owner":{"account_id":1310117,"reputation":2001,"user_id":1258275,"display_name":"russ"},"down_vote_count":0,"up_vote_count":200,"is_accepted":false,"score":200,"last_activity_date":1600166600,"creation_date":1331254461,"answer_id":9627470,"question_id":2213340,"body_markdown":"All the above answers are good. Here&#39;s a simple little code snippet, to illustrate the difference. Try it with each of the values of true and false in `setDaemon`.\r\n\r\n    public class DaemonTest {\r\n    \t\r\n    \tpublic static void main(String[] args) {\r\n    \t\tnew WorkerThread().start();\r\n\r\n    \t\ttry {\r\n    \t\t\tThread.sleep(7500);\r\n    \t\t} catch (InterruptedException e) {\r\n                // handle here exception\r\n            }\r\n\r\n    \t\tSystem.out.println(&quot;Main Thread ending&quot;) ;\r\n    \t}\r\n    \r\n    }\r\n\r\n    class WorkerThread extends Thread {\r\n    \t\r\n    \tpublic WorkerThread() {\r\n            // When false, (i.e. when it&#39;s a non daemon thread),\r\n\t\t\t// the WorkerThread continues to run.\r\n\t\t\t// When true, (i.e. when it&#39;s a daemon thread),\r\n\t\t\t// the WorkerThread terminates when the main \r\n\t\t\t// thread or/and user defined thread(non daemon) terminates.\r\n    \t\tsetDaemon(true); \r\n    \t}\r\n    \t\r\n    \tpublic void run() {\r\n    \t\tint count = 0;\r\n\r\n    \t\twhile (true) {\r\n    \t\t\tSystem.out.println(&quot;Hello from Worker &quot;+count++);\r\n\r\n    \t\t\ttry {\r\n    \t\t\t\tsleep(5000);\r\n    \t\t\t} catch (InterruptedException e) {\r\n                    // handle exception here\r\n                }\r\n    \t\t}\r\n    \t}\r\n    }\r\n","title":"What is a daemon thread in Java?","body":"<p>All the above answers are good. Here's a simple little code snippet, to illustrate the difference. Try it with each of the values of true and false in <code>setDaemon</code>.</p>\n<pre><code>public class DaemonTest {\n    \n    public static void main(String[] args) {\n        new WorkerThread().start();\n\n        try {\n            Thread.sleep(7500);\n        } catch (InterruptedException e) {\n            // handle here exception\n        }\n\n        System.out.println(&quot;Main Thread ending&quot;) ;\n    }\n\n}\n\nclass WorkerThread extends Thread {\n    \n    public WorkerThread() {\n        // When false, (i.e. when it's a non daemon thread),\n        // the WorkerThread continues to run.\n        // When true, (i.e. when it's a daemon thread),\n        // the WorkerThread terminates when the main \n        // thread or/and user defined thread(non daemon) terminates.\n        setDaemon(true); \n    }\n    \n    public void run() {\n        int count = 0;\n\n        while (true) {\n            System.out.println(&quot;Hello from Worker &quot;+count++);\n\n            try {\n                sleep(5000);\n            } catch (InterruptedException e) {\n                // handle exception here\n            }\n        }\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1441669,"reputation":10356,"user_id":1361638,"accept_rate":90,"display_name":"Okky"},"down_vote_count":1,"up_vote_count":58,"is_accepted":false,"score":57,"last_activity_date":1368262588,"creation_date":1336719030,"answer_id":10546740,"question_id":2213340,"body_markdown":"Daemon threads are like a service providers for other threads or objects running in the same process as the daemon thread. Daemon threads are used for background supporting tasks and are only needed while normal threads are executing. If normal threads are not running and remaining threads are daemon threads then the interpreter exits.\r\n\r\nFor example, the HotJava browser uses up to four daemon threads named &quot;Image Fetcher&quot; to fetch images from the file system or network for any thread that needs one.\r\n\r\nDaemon threads are typically used to perform services for your application/applet (such as loading the &quot;fiddley bits&quot;). The core difference between user threads and daemon threads is that the JVM will only shut down a program when all user threads have terminated. Daemon threads are terminated by the JVM when there are no longer any user threads running, including the main thread of execution.\r\n\r\n**setDaemon(true/false) ?** This method is used to specify that a thread is daemon thread.\r\n\r\n**public boolean isDaemon() ?** This method is used to determine the thread is daemon thread or not. \r\n\r\nEg:\r\n\r\n    public class DaemonThread extends Thread {\r\n        public void run() {\r\n            System.out.println(&quot;Entering run method&quot;);\r\n    \r\n            try {\r\n                System.out.println(&quot;In run Method: currentThread() is&quot; + Thread.currentThread());\r\n    \r\n                while (true) {\r\n                    try {\r\n                        Thread.sleep(500);\r\n                    } catch (InterruptedException x) {}\r\n    \r\n                    System.out.println(&quot;In run method: woke up again&quot;);\r\n                }\r\n            } finally {\r\n                System.out.println(&quot;Leaving run Method&quot;);\r\n            }\r\n        }\r\n        public static void main(String[] args) {\r\n            System.out.println(&quot;Entering main Method&quot;);\r\n    \r\n            DaemonThread t = new DaemonThread();\r\n            t.setDaemon(true);\r\n            t.start();\r\n    \r\n            try {\r\n                Thread.sleep(3000);\r\n            } catch (InterruptedException x) {}\r\n    \r\n            System.out.println(&quot;Leaving main method&quot;);\r\n        }\r\n    \r\n    }\r\n\r\nOutPut:\r\n\r\n    C:\\java\\thread&gt;javac DaemonThread.java\r\n    \r\n    C:\\java\\thread&gt;java DaemonThread\r\n    Entering main Method\r\n    Entering run method\r\n    In run Method: currentThread() isThread[Thread-0,5,main]\r\n    In run method: woke up again\r\n    In run method: woke up again\r\n    In run method: woke up again\r\n    In run method: woke up again\r\n    In run method: woke up again\r\n    In run method: woke up again\r\n    Leaving main method\r\n    \r\n    C:\\j2se6\\thread&gt;\r\n\r\n","title":"What is a daemon thread in Java?","body":"<p>Daemon threads are like a service providers for other threads or objects running in the same process as the daemon thread. Daemon threads are used for background supporting tasks and are only needed while normal threads are executing. If normal threads are not running and remaining threads are daemon threads then the interpreter exits.</p>\n\n<p>For example, the HotJava browser uses up to four daemon threads named \"Image Fetcher\" to fetch images from the file system or network for any thread that needs one.</p>\n\n<p>Daemon threads are typically used to perform services for your application/applet (such as loading the \"fiddley bits\"). The core difference between user threads and daemon threads is that the JVM will only shut down a program when all user threads have terminated. Daemon threads are terminated by the JVM when there are no longer any user threads running, including the main thread of execution.</p>\n\n<p><strong>setDaemon(true/false) ?</strong> This method is used to specify that a thread is daemon thread.</p>\n\n<p><strong>public boolean isDaemon() ?</strong> This method is used to determine the thread is daemon thread or not. </p>\n\n<p>Eg:</p>\n\n<pre><code>public class DaemonThread extends Thread {\n    public void run() {\n        System.out.println(\"Entering run method\");\n\n        try {\n            System.out.println(\"In run Method: currentThread() is\" + Thread.currentThread());\n\n            while (true) {\n                try {\n                    Thread.sleep(500);\n                } catch (InterruptedException x) {}\n\n                System.out.println(\"In run method: woke up again\");\n            }\n        } finally {\n            System.out.println(\"Leaving run Method\");\n        }\n    }\n    public static void main(String[] args) {\n        System.out.println(\"Entering main Method\");\n\n        DaemonThread t = new DaemonThread();\n        t.setDaemon(true);\n        t.start();\n\n        try {\n            Thread.sleep(3000);\n        } catch (InterruptedException x) {}\n\n        System.out.println(\"Leaving main method\");\n    }\n\n}\n</code></pre>\n\n<p>OutPut:</p>\n\n<pre><code>C:\\java\\thread&gt;javac DaemonThread.java\n\nC:\\java\\thread&gt;java DaemonThread\nEntering main Method\nEntering run method\nIn run Method: currentThread() isThread[Thread-0,5,main]\nIn run method: woke up again\nIn run method: woke up again\nIn run method: woke up again\nIn run method: woke up again\nIn run method: woke up again\nIn run method: woke up again\nLeaving main method\n\nC:\\j2se6\\thread&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1313662,"reputation":1419,"user_id":1261101,"accept_rate":69,"display_name":"Chanikag"},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1340765807,"creation_date":1340765807,"answer_id":11218789,"question_id":2213340,"body_markdown":"Daemon thread is just like a normal thread except that the JVM will only shut down when the other non daemon threads are not existing. Daemon threads are typically used to perform services for your application.","title":"What is a daemon thread in Java?","body":"<p>Daemon thread is just like a normal thread except that the JVM will only shut down when the other non daemon threads are not existing. Daemon threads are typically used to perform services for your application.</p>\n"},{"tags":[],"owner":{"account_id":1005074,"reputation":80,"user_id":1019062,"display_name":"Manish Malhotra"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1345097223,"creation_date":1345097223,"answer_id":11981551,"question_id":2213340,"body_markdown":"Daemon threads are as everybody explained, will not constrain JVM to exit, so basically its a happy thread for Application from exit point of view.\r\n \r\nWant to add that daemon threads can be used when say I&#39;m providing an API like pushing data to a 3rd party server / or JMS, I might need to aggregate data at the client JVM level and then send to JMS in a separate thread. I can make this thread as daemon thread, if this is not a mandatory data to be pushed to server.\r\nThis kind of data is like log push / aggregation. \r\n\r\nRegards,\r\nManish\r\n\r\n","title":"What is a daemon thread in Java?","body":"<p>Daemon threads are as everybody explained, will not constrain JVM to exit, so basically its a happy thread for Application from exit point of view.</p>\n\n<p>Want to add that daemon threads can be used when say I'm providing an API like pushing data to a 3rd party server / or JMS, I might need to aggregate data at the client JVM level and then send to JMS in a separate thread. I can make this thread as daemon thread, if this is not a mandatory data to be pushed to server.\nThis kind of data is like log push / aggregation. </p>\n\n<p>Regards,\nManish</p>\n"},{"tags":[],"owner":{"account_id":2784842,"reputation":67271,"user_id":2396539,"accept_rate":78,"display_name":"Aniket Thakur"},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1374832844,"creation_date":1374832844,"answer_id":17878439,"question_id":2213340,"body_markdown":"Daemon thread in Java are those thread which runs in background and mostly created by JVM for performing background task like Garbage collection and other house keeping tasks.\r\n\r\n**Points to Note :** \r\n\r\n1. Any thread created by main thread, which runs main method in Java is by default non daemon because Thread inherits its daemon nature from the Thread which creates it i.e. parent Thread and since main thread is a non daemon thread, any other thread created from it will remain non-daemon until explicitly made daemon by calling setDaemon(true).\r\n\r\n2. Thread.setDaemon(true) makes a Thread daemon but it can only be called before starting Thread in Java. It will throw IllegalThreadStateException if corresponding Thread is already started and running.\r\n\r\n**Difference between Daemon and Non Daemon thread in Java :**\r\n\r\n1) JVM doesn&#39;t wait for any daemon thread to finish before existing.\r\n\r\n2) Daemon Thread are treated differently than User Thread when JVM terminates, finally blocks are not called, Stacks are not unwounded and JVM just exits.\r\n","title":"What is a daemon thread in Java?","body":"<p>Daemon thread in Java are those thread which runs in background and mostly created by JVM for performing background task like Garbage collection and other house keeping tasks.</p>\n\n<p><strong>Points to Note :</strong> </p>\n\n<ol>\n<li><p>Any thread created by main thread, which runs main method in Java is by default non daemon because Thread inherits its daemon nature from the Thread which creates it i.e. parent Thread and since main thread is a non daemon thread, any other thread created from it will remain non-daemon until explicitly made daemon by calling setDaemon(true).</p></li>\n<li><p>Thread.setDaemon(true) makes a Thread daemon but it can only be called before starting Thread in Java. It will throw IllegalThreadStateException if corresponding Thread is already started and running.</p></li>\n</ol>\n\n<p><strong>Difference between Daemon and Non Daemon thread in Java :</strong></p>\n\n<p>1) JVM doesn't wait for any daemon thread to finish before existing.</p>\n\n<p>2) Daemon Thread are treated differently than User Thread when JVM terminates, finally blocks are not called, Stacks are not unwounded and JVM just exits.</p>\n"},{"tags":[],"owner":{"account_id":2021993,"reputation":401,"user_id":1807935,"display_name":"zxholy"},"down_vote_count":12,"up_vote_count":24,"is_accepted":false,"score":12,"last_activity_date":1384215582,"creation_date":1377433158,"answer_id":18428894,"question_id":2213340,"body_markdown":"Java has a special kind of thread called **daemon** thread. \r\n\r\n - Very low priority.\r\n - Only executes when no other thread of the same program is running.\r\n - JVM ends the program finishing these threads, when daemon threads are\r\n   the only threads running in a program.\r\n\r\nWhat are daemon threads used for?  \r\n\r\nNormally used as service providers for normal threads.\r\nUsually have an infinite loop that waits for the service request or performs the tasks of the thread.\r\nThey can’t do important jobs. (Because we don&#39;t know when they are going to have CPU time and they can finish any time if there aren&#39;t any other threads running. )\r\n\r\nA typical example of these kind of threads is the *Java garbage collector*.\r\n\r\nThere&#39;s more...  \r\n\r\n - You only call the `setDaemon()` method before you call the `start()` method. Once the thread is running, you can’t modify its daemon status.\r\n - Use `isDaemon()` method to check if a thread is a daemon thread or a user thread.","title":"What is a daemon thread in Java?","body":"<p>Java has a special kind of thread called <strong>daemon</strong> thread. </p>\n\n<ul>\n<li>Very low priority.</li>\n<li>Only executes when no other thread of the same program is running.</li>\n<li>JVM ends the program finishing these threads, when daemon threads are\nthe only threads running in a program.</li>\n</ul>\n\n<p>What are daemon threads used for?  </p>\n\n<p>Normally used as service providers for normal threads.\nUsually have an infinite loop that waits for the service request or performs the tasks of the thread.\nThey can’t do important jobs. (Because we don't know when they are going to have CPU time and they can finish any time if there aren't any other threads running. )</p>\n\n<p>A typical example of these kind of threads is the <em>Java garbage collector</em>.</p>\n\n<p>There's more...  </p>\n\n<ul>\n<li>You only call the <code>setDaemon()</code> method before you call the <code>start()</code> method. Once the thread is running, you can’t modify its daemon status.</li>\n<li>Use <code>isDaemon()</code> method to check if a thread is a daemon thread or a user thread.</li>\n</ul>\n"},{"tags":[],"owner":{"account_id":928111,"reputation":1021,"user_id":958470,"accept_rate":12,"display_name":"Sai Sunder"},"down_vote_count":1,"up_vote_count":4,"is_accepted":false,"score":3,"last_activity_date":1523728918,"creation_date":1390891289,"answer_id":21398615,"question_id":2213340,"body_markdown":"Daemon threads are threads that run in the background as long as other non-daemon threads of the process are still running. Thus, when all of the non-daemon threads complete, the daemon threads are terminated. An example for the non-daemon thread is the thread running the Main.\r\nA thread is made daemon by calling the `setDaemon()` method before the thread is started\r\n\r\nFor More Reference : [Daemon thread in Java][1]\r\n\r\n\r\n  [1]: http://javarevisited.blogspot.in/2012/03/what-is-daemon-thread-in-java-and.html","title":"What is a daemon thread in Java?","body":"<p>Daemon threads are threads that run in the background as long as other non-daemon threads of the process are still running. Thus, when all of the non-daemon threads complete, the daemon threads are terminated. An example for the non-daemon thread is the thread running the Main.\nA thread is made daemon by calling the <code>setDaemon()</code> method before the thread is started</p>\n\n<p>For More Reference : <a href=\"http://javarevisited.blogspot.in/2012/03/what-is-daemon-thread-in-java-and.html\" rel=\"nofollow noreferrer\">Daemon thread in Java</a></p>\n"},{"tags":[],"owner":{"account_id":3149968,"reputation":427,"user_id":2663609,"display_name":"user2663609"},"down_vote_count":1,"up_vote_count":5,"is_accepted":false,"score":4,"last_activity_date":1416949354,"creation_date":1405928174,"answer_id":24859820,"question_id":2213340,"body_markdown":"Daemon thread is like daemon process which is responsible for managing resources,a daemon thread is created by the Java VM to serve the user threads.\r\nexample updating system for unix,unix is daemon process.\r\nchild of daemon thread is always daemon thread,so by default daemon is false.you can check thread as daemon or user by using &quot;isDaemon()&quot; method.\r\nso daemon thread or daemon process are basically responsible for managing resources.\r\nfor example when you starting jvm there is garbage collector running that is daemon thread whose priority is 1 that is lowest,which is managing memory.\r\njvm is alive as long as user thread is alive,u can not kill daemon thread.jvm is responsible to kill daemon threads.","title":"What is a daemon thread in Java?","body":"<p>Daemon thread is like daemon process which is responsible for managing resources,a daemon thread is created by the Java VM to serve the user threads.\nexample updating system for unix,unix is daemon process.\nchild of daemon thread is always daemon thread,so by default daemon is false.you can check thread as daemon or user by using \"isDaemon()\" method.\nso daemon thread or daemon process are basically responsible for managing resources.\nfor example when you starting jvm there is garbage collector running that is daemon thread whose priority is 1 that is lowest,which is managing memory.\njvm is alive as long as user thread is alive,u can not kill daemon thread.jvm is responsible to kill daemon threads.</p>\n"},{"tags":[],"owner":{"account_id":1875874,"reputation":71911,"user_id":1697099,"accept_rate":100,"display_name":"Premraj"},"down_vote_count":5,"up_vote_count":50,"is_accepted":false,"score":45,"last_activity_date":1616135942,"creation_date":1437718038,"answer_id":31603321,"question_id":2213340,"body_markdown":"daemon: **d**(isk) **a**(nd) **e**(xecution) **mon**(itor) or from **de**(vice) **mon**(itor)\r\n\r\n### Definition of Daemon (Computing):\r\n\r\n&gt; A background process that handles requests for services such as print spooling and file transfers, and is dormant when not required. \r\n\r\n—— Source: [English by Oxford Dictionaries][1]\r\n\r\n### What is Daemon thread in Java? \r\n\r\n - Daemon threads can shut down any time in between their flow, Non-Daemon i.e. user thread executes completely.\r\n - Daemon threads are threads that run intermittently in the background as long as other non-daemon threads are running. \r\n - When all of the non-daemon threads complete, daemon threads terminates automatically.\r\n - Daemon threads are service providers for user threads running in the same process.\r\n - The JVM does not care about daemon threads to complete when in Running state, not even finally block also let execute. JVM do give preference to non-daemon threads that is created by us.\r\n - Daemon threads acts as services in Windows.   \r\n - The JVM stops the daemon threads when all user threads (in contrast to the daemon threads) are terminated. Hence daemon threads can be used to implement, for example, a monitoring functionality as the thread is stopped by the JVM as soon as all user threads have stopped.\r\n\r\n\r\n[1]: https://en.oxforddictionaries.com/definition/daemon","title":"What is a daemon thread in Java?","body":"<p>daemon: <strong>d</strong>(isk) <strong>a</strong>(nd) <strong>e</strong>(xecution) <strong>mon</strong>(itor) or from <strong>de</strong>(vice) <strong>mon</strong>(itor)</p>\n<h3>Definition of Daemon (Computing):</h3>\n<blockquote>\n<p>A background process that handles requests for services such as print spooling and file transfers, and is dormant when not required.</p>\n</blockquote>\n<p>—— Source: <a href=\"https://en.oxforddictionaries.com/definition/daemon\" rel=\"noreferrer\">English by Oxford Dictionaries</a></p>\n<h3>What is Daemon thread in Java?</h3>\n<ul>\n<li>Daemon threads can shut down any time in between their flow, Non-Daemon i.e. user thread executes completely.</li>\n<li>Daemon threads are threads that run intermittently in the background as long as other non-daemon threads are running.</li>\n<li>When all of the non-daemon threads complete, daemon threads terminates automatically.</li>\n<li>Daemon threads are service providers for user threads running in the same process.</li>\n<li>The JVM does not care about daemon threads to complete when in Running state, not even finally block also let execute. JVM do give preference to non-daemon threads that is created by us.</li>\n<li>Daemon threads acts as services in Windows.</li>\n<li>The JVM stops the daemon threads when all user threads (in contrast to the daemon threads) are terminated. Hence daemon threads can be used to implement, for example, a monitoring functionality as the thread is stopped by the JVM as soon as all user threads have stopped.</li>\n</ul>\n"},{"tags":[],"owner":{"account_id":543250,"reputation":18874,"user_id":912319,"accept_rate":62,"display_name":"Kanagavelu Sugumar"},"down_vote_count":2,"up_vote_count":18,"is_accepted":false,"score":16,"last_activity_date":1490915251,"creation_date":1448975676,"answer_id":34021342,"question_id":2213340,"body_markdown":"One misconception I would like to clarify:\r\n\r\n- Assume that if daemon thread (say B) is created within user thread (say\r\n A); then ending of this user thread/parent thread (A) will not end\r\n the daemon thread/child thread (B) it has created; provided user thread is the only\r\n one currently running.\r\n- So there is no parent-child relationship on thread ending. All daemon threads (irrespective of where it is created) will end once there is no single live user thread and that causes JVM to terminate.\r\n- Even this is true for both (parent/child) are daemon threads.\r\n- If a child thread created from a daemon thread then that is also a daemon thread. This won&#39;t need any explicit daemon thread flag setting.\r\nSimilarly if a child thread created from a user thread then that is also a user thread, if you want to change it, then explicit daemon flag setting is needed before start of that child thread.\r\n\r\n\r\n\r\n","title":"What is a daemon thread in Java?","body":"<p>One misconception I would like to clarify:</p>\n\n<ul>\n<li>Assume that if daemon thread (say B) is created within user thread (say\nA); then ending of this user thread/parent thread (A) will not end\nthe daemon thread/child thread (B) it has created; provided user thread is the only\none currently running.</li>\n<li>So there is no parent-child relationship on thread ending. All daemon threads (irrespective of where it is created) will end once there is no single live user thread and that causes JVM to terminate.</li>\n<li>Even this is true for both (parent/child) are daemon threads.</li>\n<li>If a child thread created from a daemon thread then that is also a daemon thread. This won't need any explicit daemon thread flag setting.\nSimilarly if a child thread created from a user thread then that is also a user thread, if you want to change it, then explicit daemon flag setting is needed before start of that child thread.</li>\n</ul>\n"},{"tags":[],"owner":{"account_id":7507054,"reputation":466,"user_id":5703255,"display_name":"Java Guru"},"down_vote_count":1,"up_vote_count":12,"is_accepted":false,"score":11,"last_activity_date":1627270053,"creation_date":1455143780,"answer_id":35327367,"question_id":2213340,"body_markdown":"In Java, Daemon Threads are one of the types of the thread which does not prevent Java Virtual Machine (JVM) from exiting.\r\nThe main purpose of a daemon thread is to execute background task especially in case of some routine periodic task or work. With JVM exits, daemon thread also dies.\r\n\r\nBy setting a `thread.setDaemon(true)`, a thread becomes a daemon thread. However, you can only set this value before the thread start.","title":"What is a daemon thread in Java?","body":"<p>In Java, Daemon Threads are one of the types of the thread which does not prevent Java Virtual Machine (JVM) from exiting.\nThe main purpose of a daemon thread is to execute background task especially in case of some routine periodic task or work. With JVM exits, daemon thread also dies.</p>\n<p>By setting a <code>thread.setDaemon(true)</code>, a thread becomes a daemon thread. However, you can only set this value before the thread start.</p>\n"},{"tags":[],"owner":{"account_id":905316,"reputation":3306,"user_id":940340,"accept_rate":97,"display_name":"Gregory Nozik"},"down_vote_count":1,"up_vote_count":4,"is_accepted":false,"score":3,"last_activity_date":1459172877,"creation_date":1459172877,"answer_id":36263704,"question_id":2213340,"body_markdown":"For me, daemon thread it&#39;s like house keeper for user threads.\r\nIf all user threads finished , the daemon thread has no job and \r\nkilled by JVM.\r\nI explained it in the [YouTube video][1].\r\n\r\n\r\n  [1]: https://youtu.be/OQLRiZwnXUM","title":"What is a daemon thread in Java?","body":"<p>For me, daemon thread it's like house keeper for user threads.\nIf all user threads finished , the daemon thread has no job and \nkilled by JVM.\nI explained it in the <a href=\"https://youtu.be/OQLRiZwnXUM\" rel=\"nofollow\">YouTube video</a>.</p>\n"},{"tags":[],"owner":{"account_id":2253500,"reputation":1478,"user_id":1985234,"display_name":"Tony"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1475726273,"creation_date":1475726273,"answer_id":39887268,"question_id":2213340,"body_markdown":"Let&#39;s talk only in code with working examples. I like russ&#39;s answer above but to remove any doubt I had, I enhanced it a little bit. I ran it twice, once with the worker thread set to deamon true  (deamon thread) and another time set it to false (user thread). It confirms that the deamon thread ends when the main thread terminates.\r\n\r\n   \r\n\r\n    public class DeamonThreadTest {\r\n\r\n\tpublic static void main(String[] args) {\r\n\r\n\t\tnew WorkerThread(false).start();    //set it to true and false and run twice.\r\n\r\n\t\ttry {\r\n\t\t\tThread.sleep(7500);\r\n\t\t} catch (InterruptedException e) {\r\n\t\t\t// handle here exception\r\n\t\t}\r\n\r\n\t\tSystem.out.println(&quot;Main Thread ending&quot;);\r\n    \t}\r\n       }\r\n\r\n       class WorkerThread extends Thread {\r\n\t\r\n        boolean isDeamon;\r\n    \r\n    \tpublic WorkerThread(boolean isDeamon) {\r\n    \t\t// When false, (i.e. when it&#39;s a user thread),\r\n    \t\t// the Worker thread continues to run.\r\n    \t\t// When true, (i.e. when it&#39;s a daemon thread),\r\n    \t\t// the Worker thread terminates when the main\r\n    \t\t// thread terminates.\r\n    \t\tthis.isDeamon = isDeamon;\r\n    \t\tsetDaemon(isDeamon);\r\n    \t}\r\n    \r\n    \tpublic void run() {\r\n    \t\tSystem.out.println(&quot;I am a &quot; + (isDeamon ? &quot;Deamon Thread&quot; : &quot;User Thread (none-deamon)&quot;));\r\n    \r\n    \t\tint counter = 0;\r\n    \r\n    \t\twhile (counter &lt; 10) {\r\n    \t\t\tcounter++;\r\n    \t\t\tSystem.out.println(&quot;\\tworking from Worker thread &quot; + counter++);\r\n    \r\n    \t\t\ttry {\r\n    \t\t\t\tsleep(5000);\r\n    \t\t\t} catch (InterruptedException e) {\r\n    \t\t\t\t// handle exception here\r\n    \t\t\t}\r\n    \t\t}\r\n    \t\tSystem.out.println(&quot;\\tWorker thread ends. &quot;);\r\n    \t}\r\n    }\r\n\r\n\r\n\r\n    result when setDeamon(true)\r\n    =====================================\r\n    I am a Deamon Thread\r\n    \tworking from Worker thread 0\r\n    \tworking from Worker thread 1\r\n    Main Thread ending\r\n    \r\n    Process finished with exit code 0\r\n    \r\n    \r\n    result when setDeamon(false)\r\n    =====================================\r\n    I am a User Thread (none-deamon)\r\n    \tworking from Worker thread 0\r\n    \tworking from Worker thread 1\r\n    Main Thread ending\r\n    \tworking from Worker thread 2\r\n    \tworking from Worker thread 3\r\n    \tworking from Worker thread 4\r\n    \tworking from Worker thread 5\r\n    \tworking from Worker thread 6\r\n    \tworking from Worker thread 7\r\n    \tworking from Worker thread 8\r\n    \tworking from Worker thread 9\r\n    \tWorker thread ends. \r\n    \r\n    Process finished with exit code 0\r\n\r\n\r\n\r\n","title":"What is a daemon thread in Java?","body":"<p>Let's talk only in code with working examples. I like russ's answer above but to remove any doubt I had, I enhanced it a little bit. I ran it twice, once with the worker thread set to deamon true  (deamon thread) and another time set it to false (user thread). It confirms that the deamon thread ends when the main thread terminates.</p>\n\n<pre><code>public class DeamonThreadTest {\n\npublic static void main(String[] args) {\n\n    new WorkerThread(false).start();    //set it to true and false and run twice.\n\n    try {\n        Thread.sleep(7500);\n    } catch (InterruptedException e) {\n        // handle here exception\n    }\n\n    System.out.println(\"Main Thread ending\");\n    }\n   }\n\n   class WorkerThread extends Thread {\n\n    boolean isDeamon;\n\n    public WorkerThread(boolean isDeamon) {\n        // When false, (i.e. when it's a user thread),\n        // the Worker thread continues to run.\n        // When true, (i.e. when it's a daemon thread),\n        // the Worker thread terminates when the main\n        // thread terminates.\n        this.isDeamon = isDeamon;\n        setDaemon(isDeamon);\n    }\n\n    public void run() {\n        System.out.println(\"I am a \" + (isDeamon ? \"Deamon Thread\" : \"User Thread (none-deamon)\"));\n\n        int counter = 0;\n\n        while (counter &lt; 10) {\n            counter++;\n            System.out.println(\"\\tworking from Worker thread \" + counter++);\n\n            try {\n                sleep(5000);\n            } catch (InterruptedException e) {\n                // handle exception here\n            }\n        }\n        System.out.println(\"\\tWorker thread ends. \");\n    }\n}\n\n\n\nresult when setDeamon(true)\n=====================================\nI am a Deamon Thread\n    working from Worker thread 0\n    working from Worker thread 1\nMain Thread ending\n\nProcess finished with exit code 0\n\n\nresult when setDeamon(false)\n=====================================\nI am a User Thread (none-deamon)\n    working from Worker thread 0\n    working from Worker thread 1\nMain Thread ending\n    working from Worker thread 2\n    working from Worker thread 3\n    working from Worker thread 4\n    working from Worker thread 5\n    working from Worker thread 6\n    working from Worker thread 7\n    working from Worker thread 8\n    working from Worker thread 9\n    Worker thread ends. \n\nProcess finished with exit code 0\n</code></pre>\n"},{"tags":[],"owner":{"account_id":6594961,"reputation":411,"user_id":5095067,"display_name":"Pankti"},"down_vote_count":2,"up_vote_count":5,"is_accepted":false,"score":3,"last_activity_date":1483633640,"creation_date":1483633640,"answer_id":41489937,"question_id":2213340,"body_markdown":"Daemon threads are generally known as &quot;Service Provider&quot; thread. These threads should not be used to execute program code but system code. These threads run parallel to your code but JVM can kill them anytime. When JVM finds no user threads, it stops it and all daemon threads terminate instantly. We can set non-daemon thread to daemon using : \r\n\r\n    setDaemon(true)","title":"What is a daemon thread in Java?","body":"<p>Daemon threads are generally known as \"Service Provider\" thread. These threads should not be used to execute program code but system code. These threads run parallel to your code but JVM can kill them anytime. When JVM finds no user threads, it stops it and all daemon threads terminate instantly. We can set non-daemon thread to daemon using : </p>\n\n<pre><code>setDaemon(true)\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2698288,"reputation":945,"user_id":2329703,"accept_rate":67,"display_name":"Harjit Singh"},"down_vote_count":2,"up_vote_count":12,"is_accepted":false,"score":10,"last_activity_date":1486738956,"creation_date":1486738956,"answer_id":42162473,"question_id":2213340,"body_markdown":"Daemon threads are like assistants. Non-Daemon threads are like front performers. Assistants help performers to complete a job. When the job is completed, no help is needed by performers to  perform anymore. As no help is needed the assistants leave the place. So when the jobs of Non-Daemon threads is over, Daemon threads march away.","title":"What is a daemon thread in Java?","body":"<p>Daemon threads are like assistants. Non-Daemon threads are like front performers. Assistants help performers to complete a job. When the job is completed, no help is needed by performers to  perform anymore. As no help is needed the assistants leave the place. So when the jobs of Non-Daemon threads is over, Daemon threads march away.</p>\n"},{"tags":[],"owner":{"account_id":10963029,"reputation":396,"user_id":8055696,"display_name":"Arman Tumanyan"},"down_vote_count":1,"up_vote_count":3,"is_accepted":false,"score":2,"last_activity_date":1523866579,"creation_date":1523698705,"answer_id":49830054,"question_id":2213340,"body_markdown":"JVM will accomplish the work when a last non-daemon thread execution is completed. By default, JVM will create a thread as nondaemon but we can make Thread as a daemon with help of method `setDaemon(true)`. A good example of Daemon thread is GC thread which will complete his work as soon as all nondaemon threads are completed.","title":"What is a daemon thread in Java?","body":"<p>JVM will accomplish the work when a last non-daemon thread execution is completed. By default, JVM will create a thread as nondaemon but we can make Thread as a daemon with help of method <code>setDaemon(true)</code>. A good example of Daemon thread is GC thread which will complete his work as soon as all nondaemon threads are completed.</p>\n"},{"tags":[],"owner":{"account_id":1811494,"reputation":141,"user_id":1647465,"display_name":"Bharat Sharma"},"down_vote_count":0,"up_vote_count":7,"is_accepted":false,"score":7,"last_activity_date":1524465634,"creation_date":1524465634,"answer_id":49974829,"question_id":2213340,"body_markdown":"Here is an example to test behavior of daemon threads in case of jvm exit due to non existence of user threads.\r\n\r\nPlease note second last line in the output below, when main thread exited, daemon thread also died and did not print **finally executed9** statement within finally block. This means that any i/o resources closed within finally block of a daemon thread will not be closed if JVM exits due to non existence of user threads.\r\n\r\n    public class DeamonTreadExample {\r\n\r\n\tpublic static void main(String[] args) throws InterruptedException {\r\n\r\n\t\tThread t = new Thread(() -&gt; {\r\n\t\t\tint count = 0;\r\n\t\t\twhile (true) {\r\n\t\t\t\tcount++;\r\n\t\t\t\ttry {\r\n\t\t\t\t\tSystem.out.println(&quot;inside try&quot;+ count);\r\n\t\t\t\t\tThread.currentThread().sleep(1000);\r\n\t\t\t\t} catch (InterruptedException e) {\r\n\t\t\t\t\t// TODO Auto-generated catch block\r\n\t\t\t\t\te.printStackTrace();\r\n\t\t\t\t} finally {\r\n\t\t\t\t\tSystem.out.println(&quot;finally executed&quot;+ count);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\t\tt.setDaemon(true);\r\n\t\tt.start();\r\n\r\n\t\tThread.currentThread().sleep(10000);\r\n\t\tSystem.out.println(&quot;main thread exited&quot;);\r\n\t  }\r\n    }\r\n\r\nOutput\r\n-------\r\n\r\n    inside try1\r\n    finally executed1\r\n    inside try2\r\n    finally executed2\r\n    inside try3\r\n    finally executed3\r\n    inside try4\r\n    finally executed4\r\n    inside try5\r\n    finally executed5\r\n    inside try6\r\n    finally executed6\r\n    inside try7\r\n    finally executed7\r\n    inside try8\r\n    finally executed8\r\n    inside try9\r\n    finally executed9\r\n    inside try10\r\n    main thread exited\r\n\r\n\r\n","title":"What is a daemon thread in Java?","body":"<p>Here is an example to test behavior of daemon threads in case of jvm exit due to non existence of user threads.</p>\n\n<p>Please note second last line in the output below, when main thread exited, daemon thread also died and did not print <strong>finally executed9</strong> statement within finally block. This means that any i/o resources closed within finally block of a daemon thread will not be closed if JVM exits due to non existence of user threads.</p>\n\n<pre><code>public class DeamonTreadExample {\n\npublic static void main(String[] args) throws InterruptedException {\n\n    Thread t = new Thread(() -&gt; {\n        int count = 0;\n        while (true) {\n            count++;\n            try {\n                System.out.println(\"inside try\"+ count);\n                Thread.currentThread().sleep(1000);\n            } catch (InterruptedException e) {\n                // TODO Auto-generated catch block\n                e.printStackTrace();\n            } finally {\n                System.out.println(\"finally executed\"+ count);\n            }\n        }\n    });\n    t.setDaemon(true);\n    t.start();\n\n    Thread.currentThread().sleep(10000);\n    System.out.println(\"main thread exited\");\n  }\n}\n</code></pre>\n\n<h2>Output</h2>\n\n<pre><code>inside try1\nfinally executed1\ninside try2\nfinally executed2\ninside try3\nfinally executed3\ninside try4\nfinally executed4\ninside try5\nfinally executed5\ninside try6\nfinally executed6\ninside try7\nfinally executed7\ninside try8\nfinally executed8\ninside try9\nfinally executed9\ninside try10\nmain thread exited\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1674243,"reputation":10043,"user_id":1553537,"accept_rate":29,"display_name":"Giorgi Tsiklauri"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1614856070,"creation_date":1593165179,"answer_id":62592242,"question_id":2213340,"body_markdown":"There already are numerous answers; however, maybe I could shed a bit clearer light on this, as when I was reading about *Daemon Threads*, initially, I had a feeling, that I understood it well; however, after playing with it and debugged a bit, I observed a strange (to me) behaviour.\r\n\r\nI was taught, that:\r\n&gt;If I want the thread to die right after the main thread orderly finishes its execution, I should set it as Diamond.\r\n\r\nWhat I tried:\r\n-\r\n- I created two threads from the `Main Thread`, and I only set *one* of those as a `diamond`;\r\n- After orderly completing execution of the `Main Thread`, *none of those newly created threads exited*, but I expected, that `Daemon` thread should have been exited;\r\n- I surfed over many blogs and articles, and the best and clearest definition I found so far, comes from the [Java Concurrency In Practice][1] book, which very clearly states, that:\r\n\r\n7.4.2 Daemon threads\r\n====================\r\n\r\n&gt; Sometimes you want to create a thread that performs some helper\r\n&gt; function but you don’t want the existence of this thread to prevent\r\n&gt; the JVM from shutting down. This is what daemon threads are for.\r\n&gt; Threads are divided into two types: normal threads and daemon threads.\r\n&gt; When the JVM starts up, all the threads it creates (such as garbage\r\n&gt; collector and other housekeeping threads) are daemon threads, except\r\n&gt; the main thread. When a new thread is created, it inherits the daemon\r\n&gt; status of the thread that created it, so by default any threads\r\n&gt; created by the main thread are also normal threads. Normal threads and\r\n&gt; daemon threads differ only in what happens when they exit. When a\r\n&gt; thread exits, the JVM performs an inventory of running threads, and if\r\n&gt; the only threads that are left are daemon threads, it initiates an\r\n&gt; orderly shutdown. When the JVM halts, any remaining daemon threads are\r\n&gt; abandoned— finally blocks are not executed, stacks are not unwound—the\r\n&gt; JVM just exits. Daemon threads should be used sparingly—few processing\r\n&gt; activities can be safely abandoned at any time with no cleanup. In\r\n&gt; particular, it is dangerous to use daemon threads for tasks that might\r\n&gt; perform any sort of I/O. Daemon threads are best saved for\r\n&gt; “housekeeping” tasks, such as a background thread that periodically\r\n&gt; removes expired entries from an in-memory cache.\r\n\r\n  [1]: https://www.amazon.com/Java-Concurrency-Practice-Brian-Goetz/dp/0321349601","title":"What is a daemon thread in Java?","body":"<p>There already are numerous answers; however, maybe I could shed a bit clearer light on this, as when I was reading about <em>Daemon Threads</em>, initially, I had a feeling, that I understood it well; however, after playing with it and debugged a bit, I observed a strange (to me) behaviour.</p>\n<p>I was taught, that:</p>\n<blockquote>\n<p>If I want the thread to die right after the main thread orderly finishes its execution, I should set it as Diamond.</p>\n</blockquote>\n<h2>What I tried:</h2>\n<ul>\n<li>I created two threads from the <code>Main Thread</code>, and I only set <em>one</em> of those as a <code>diamond</code>;</li>\n<li>After orderly completing execution of the <code>Main Thread</code>, <em>none of those newly created threads exited</em>, but I expected, that <code>Daemon</code> thread should have been exited;</li>\n<li>I surfed over many blogs and articles, and the best and clearest definition I found so far, comes from the <a href=\"https://rads.stackoverflow.com/amzn/click/com/0321349601\" rel=\"nofollow noreferrer\" rel=\"nofollow noreferrer\">Java Concurrency In Practice</a> book, which very clearly states, that:</li>\n</ul>\n<h1>7.4.2 Daemon threads</h1>\n<blockquote>\n<p>Sometimes you want to create a thread that performs some helper\nfunction but you don’t want the existence of this thread to prevent\nthe JVM from shutting down. This is what daemon threads are for.\nThreads are divided into two types: normal threads and daemon threads.\nWhen the JVM starts up, all the threads it creates (such as garbage\ncollector and other housekeeping threads) are daemon threads, except\nthe main thread. When a new thread is created, it inherits the daemon\nstatus of the thread that created it, so by default any threads\ncreated by the main thread are also normal threads. Normal threads and\ndaemon threads differ only in what happens when they exit. When a\nthread exits, the JVM performs an inventory of running threads, and if\nthe only threads that are left are daemon threads, it initiates an\norderly shutdown. When the JVM halts, any remaining daemon threads are\nabandoned— finally blocks are not executed, stacks are not unwound—the\nJVM just exits. Daemon threads should be used sparingly—few processing\nactivities can be safely abandoned at any time with no cleanup. In\nparticular, it is dangerous to use daemon threads for tasks that might\nperform any sort of I/O. Daemon threads are best saved for\n“housekeeping” tasks, such as a background thread that periodically\nremoves expired entries from an in-memory cache.</p>\n</blockquote>\n"},{"tags":[],"owner":{"account_id":15097766,"reputation":976,"user_id":10895727,"display_name":"Malith Ileperuma"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1594555011,"creation_date":1594555011,"answer_id":62860788,"question_id":2213340,"body_markdown":" - Daemon threads are those threads which provide general services for user threads (Example : clean up services - garbage collector)\r\n - Daemon threads are running all the time until kill by the JVM\r\n - Daemon Threads are treated differently than User Thread when JVM terminates , finally blocks are not called JVM just exits\r\n - JVM doesn&#39;t terminates unless all the user threads terminate. JVM terminates if all user threads are dies\r\n - JVM doesn&#39;t wait for any daemon thread to finish before existing and finally blocks are not called\r\n - If all user threads dies JVM kills all the daemon threads before stops\r\n - When all user threads have terminated, daemon threads can also be terminated and the main program terminates\r\n - setDaemon() method must be called before the thread&#39;s start() method is invoked\r\n - Once a thread has started executing its daemon status cannot be changed\r\n - To determine if a thread is a daemon thread, use the accessor method isDaemon()","title":"What is a daemon thread in Java?","body":"<ul>\n<li>Daemon threads are those threads which provide general services for user threads (Example : clean up services - garbage collector)</li>\n<li>Daemon threads are running all the time until kill by the JVM</li>\n<li>Daemon Threads are treated differently than User Thread when JVM terminates , finally blocks are not called JVM just exits</li>\n<li>JVM doesn't terminates unless all the user threads terminate. JVM terminates if all user threads are dies</li>\n<li>JVM doesn't wait for any daemon thread to finish before existing and finally blocks are not called</li>\n<li>If all user threads dies JVM kills all the daemon threads before stops</li>\n<li>When all user threads have terminated, daemon threads can also be terminated and the main program terminates</li>\n<li>setDaemon() method must be called before the thread's start() method is invoked</li>\n<li>Once a thread has started executing its daemon status cannot be changed</li>\n<li>To determine if a thread is a daemon thread, use the accessor method isDaemon()</li>\n</ul>\n"},{"tags":[],"owner":{"account_id":6115775,"reputation":30435,"user_id":4770877,"display_name":"yoAlex5"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1622299407,"creation_date":1614274955,"answer_id":66373733,"question_id":2213340,"body_markdown":"**Java daemon thread**\r\n\r\n[\\[Daemon process\\]][1]\r\n\r\nJava uses `user thread` and `daemon tread` concepts.\r\n\r\nJVM flow\r\n```\r\n1. If there are no `user treads` JVM starts terminating the program\r\n2. JVM terminates all `daemon threads` automatically without waiting when they are done\r\n3. JVM is shutdown\r\n```\r\n\r\nAs you see `daemon tread` is a **service thread** for `user treads`. \r\n\r\n- `daemon tread` is low priority thread. \r\n- Thread inherits it&#39;s properties from parent thread. To set it externally you can use `setDaemon()` method **before** starting it or  check it via `isDaemon()`\r\n\r\n\r\n  [1]: https://stackoverflow.com/a/66371178/4770877","title":"What is a daemon thread in Java?","body":"<p><strong>Java daemon thread</strong></p>\n<p><a href=\"https://stackoverflow.com/a/66371178/4770877\">[Daemon process]</a></p>\n<p>Java uses <code>user thread</code> and <code>daemon tread</code> concepts.</p>\n<p>JVM flow</p>\n<pre><code>1. If there are no `user treads` JVM starts terminating the program\n2. JVM terminates all `daemon threads` automatically without waiting when they are done\n3. JVM is shutdown\n</code></pre>\n<p>As you see <code>daemon tread</code> is a <strong>service thread</strong> for <code>user treads</code>.</p>\n<ul>\n<li><code>daemon tread</code> is low priority thread.</li>\n<li>Thread inherits it's properties from parent thread. To set it externally you can use <code>setDaemon()</code> method <strong>before</strong> starting it or  check it via <code>isDaemon()</code></li>\n</ul>\n"},{"tags":[],"owner":{"account_id":8056033,"reputation":2316,"user_id":6073148,"accept_rate":75,"display_name":"Zahid Khan"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1663167580,"creation_date":1663157457,"answer_id":73716621,"question_id":2213340,"body_markdown":"# Daemon Thread\r\n\r\nThreads that run in the background are called daemon threads. \r\n\r\nExample of Daemon Threads:\r\n\r\n 1. Garbage Collector.\r\n 2. Signal Dispatcher.\r\n\r\n\r\n## Objective of Daemon Thread: \r\nThe main objective of the daemon threads is to provide support to the non-daemon threads. \r\n\r\n### Additional information about Daemon Thread: \r\n\r\n 1. Generally, Daemon threads run in the `MIN_PRIORITY` however, it is possible to run daemon threads with `MAX_PRIORITY` as well. \r\n\r\n       Example: Usually the GC runs with a `MIN_PRIORITY` priority, however, once there is a requirement for additional memory. JVM increases the priority of the GC from `MIN_PRIORITY` to `MAX_PRIORITY`.\r\n\r\n    ---\r\n&lt;hr/&gt;\r\n\r\n 2. Once the Thread has been started, it can&#39;t be changed from Daemon Thread to Non-Daemon Thread that will result in `IllegalThreadStateException`.  \r\n   \r\n    Example:\r\n        \r\n        public static void main(String[] args) {\r\n            Thread.currentThread().setDaemon(true);\r\n        }\r\n\r\n\r\n    #### Output:\r\n\r\n        Exception in thread &quot;main&quot; java.lang.IllegalThreadStateException\r\n        \tat java.base/java.lang.Thread.setDaemon(Thread.java:1403)\r\n\r\n    ---\r\n&lt;hr/&gt;\r\n\r\n\r\n 3. If we are branching off a thread, the child thread inherits the nature of the parent thread. If the parent thread is a non-daemon thread automatically the child thread will be non-daemon as well and if the parent thread is a daemon, the child thread will be a daemon as well.\r\n\r\n        class Scratch {\r\n            public static void main(String[] args) {\r\n                CustomThread customThread = new CustomThread();\r\n                customThread.start();\r\n            }\r\n        }\r\n        class CustomThread extends Thread{\r\n            @Override\r\n            public void run() {\r\n                System.out.println(currentThread().isDaemon());\r\n            }\r\n        }\r\n\r\n    #### Output:\r\n         false\r\n\r\n    ---\r\n&lt;hr/&gt;\r\n\r\n 4. When the last non-daemon thread terminates, all the daemon threads get terminated automatically.\r\n\r\n        class Scratch {\r\n            public static void main(String[] args) {\r\n                System.out.println(&quot;Main Thread Started.&quot;);\r\n\r\n                CustomThread customThread = new CustomThread();\r\n                customThread.setDaemon(true);\r\n                customThread.start();\r\n\r\n                System.out.println(&quot;Main Thread Finished.&quot;);\r\n            }\r\n        }\r\n        class CustomThread extends Thread{\r\n            @Override\r\n            public void run() {\r\n                System.out.println(&quot;Custom Thread Started.&quot;);\r\n                try {\r\n                    sleep(2000);\r\n                } catch (InterruptedException ignore) {}\r\n                System.out.println(&quot;Custom Thread Finished.&quot;);  //Won&#39;t get executed.\r\n            }\r\n        }\r\n\r\n    #### Output:\r\n\r\n        Main Thread Started.\r\n        Main Thread Finished.\r\n        Custom Thread Started.\r\n","title":"What is a daemon thread in Java?","body":"<h1>Daemon Thread</h1>\n<p>Threads that run in the background are called daemon threads.</p>\n<p>Example of Daemon Threads:</p>\n<ol>\n<li>Garbage Collector.</li>\n<li>Signal Dispatcher.</li>\n</ol>\n<h2>Objective of Daemon Thread:</h2>\n<p>The main objective of the daemon threads is to provide support to the non-daemon threads.</p>\n<h3>Additional information about Daemon Thread:</h3>\n<ol>\n<li><p>Generally, Daemon threads run in the <code>MIN_PRIORITY</code> however, it is possible to run daemon threads with <code>MAX_PRIORITY</code> as well.</p>\n<p>Example: Usually the GC runs with a <code>MIN_PRIORITY</code> priority, however, once there is a requirement for additional memory. JVM increases the priority of the GC from <code>MIN_PRIORITY</code> to <code>MAX_PRIORITY</code>.</p>\n<hr />\n</li>\n</ol>\n<hr/>\n<ol start=\"2\">\n<li><p>Once the Thread has been started, it can't be changed from Daemon Thread to Non-Daemon Thread that will result in <code>IllegalThreadStateException</code>.</p>\n<p>Example:</p>\n<pre><code>public static void main(String[] args) {\n    Thread.currentThread().setDaemon(true);\n}\n</code></pre>\n<h4>Output:</h4>\n<pre><code>Exception in thread &quot;main&quot; java.lang.IllegalThreadStateException\n    at java.base/java.lang.Thread.setDaemon(Thread.java:1403)\n</code></pre>\n<hr />\n</li>\n</ol>\n<hr/>\n<ol start=\"3\">\n<li><p>If we are branching off a thread, the child thread inherits the nature of the parent thread. If the parent thread is a non-daemon thread automatically the child thread will be non-daemon as well and if the parent thread is a daemon, the child thread will be a daemon as well.</p>\n<pre><code>class Scratch {\n    public static void main(String[] args) {\n        CustomThread customThread = new CustomThread();\n        customThread.start();\n    }\n}\nclass CustomThread extends Thread{\n    @Override\n    public void run() {\n        System.out.println(currentThread().isDaemon());\n    }\n}\n</code></pre>\n<h4>Output:</h4>\n<pre><code> false\n</code></pre>\n<hr />\n</li>\n</ol>\n<hr/>\n<ol start=\"4\">\n<li><p>When the last non-daemon thread terminates, all the daemon threads get terminated automatically.</p>\n<pre><code>class Scratch {\n    public static void main(String[] args) {\n        System.out.println(&quot;Main Thread Started.&quot;);\n\n        CustomThread customThread = new CustomThread();\n        customThread.setDaemon(true);\n        customThread.start();\n\n        System.out.println(&quot;Main Thread Finished.&quot;);\n    }\n}\nclass CustomThread extends Thread{\n    @Override\n    public void run() {\n        System.out.println(&quot;Custom Thread Started.&quot;);\n        try {\n            sleep(2000);\n        } catch (InterruptedException ignore) {}\n        System.out.println(&quot;Custom Thread Finished.&quot;);  //Won't get executed.\n    }\n}\n</code></pre>\n<h4>Output:</h4>\n<pre><code>Main Thread Started.\nMain Thread Finished.\nCustom Thread Started.\n</code></pre>\n</li>\n</ol>\n"},{"tags":[],"owner":{"account_id":21395683,"reputation":1553,"user_id":15758781,"display_name":"Lunatic"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1664264491,"creation_date":1664264491,"answer_id":73863996,"question_id":2213340,"body_markdown":"User threads versus Daemon threads in java threads\r\n\r\n - Daemon Threads\r\n\r\nthis threads in Java are low-priority threads that runs in the background to perform tasks such as garbage collection. Daemon thread in Java is also a service provider thread that provides services to the user thread.\r\n\r\n - User Threads\r\n\r\nthis threads are high-priority threads. The JVM will wait for any user thread to complete its task before terminating it\r\n\r\n\r\n&quot;keep in mind both User and Daemon threads wrapped upon OS threads&quot;\r\n\r\nRecently OpenJdk proposed Virtual threads with in [project Loom][1] (which they are User based as well) you may find more on `Fibers` and `Continuations` for the Java Virtual Machine threads in [here][2].\r\n\r\n\r\n  [1]: https://openjdk.org/projects/loom/\r\n  [2]: https://cr.openjdk.java.net/~rpressler/loom/Loom-Proposal.html","title":"What is a daemon thread in Java?","body":"<p>User threads versus Daemon threads in java threads</p>\n<ul>\n<li>Daemon Threads</li>\n</ul>\n<p>this threads in Java are low-priority threads that runs in the background to perform tasks such as garbage collection. Daemon thread in Java is also a service provider thread that provides services to the user thread.</p>\n<ul>\n<li>User Threads</li>\n</ul>\n<p>this threads are high-priority threads. The JVM will wait for any user thread to complete its task before terminating it</p>\n<p>&quot;keep in mind both User and Daemon threads wrapped upon OS threads&quot;</p>\n<p>Recently OpenJdk proposed Virtual threads with in <a href=\"https://openjdk.org/projects/loom/\" rel=\"nofollow noreferrer\">project Loom</a> (which they are User based as well) you may find more on <code>Fibers</code> and <code>Continuations</code> for the Java Virtual Machine threads in <a href=\"https://cr.openjdk.java.net/%7Erpressler/loom/Loom-Proposal.html\" rel=\"nofollow noreferrer\">here</a>.</p>\n"}],"owner":{"account_id":84703,"reputation":11367,"user_id":236586,"accept_rate":0,"display_name":"rocker"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":542770,"favorite_count":0,"down_vote_count":6,"up_vote_count":915,"answer_count":27,"score":909,"last_activity_date":1664264491,"creation_date":1265465317,"question_id":2213340,"body_markdown":"Can anybody tell me what daemon threads are in Java?","title":"What is a daemon thread in Java?","body":"<p>Can anybody tell me what daemon threads are in Java?</p>\n"},{"tags":["java","spring","oauth-2.0","graphql","graphql-java"],"comments":[{"owner":{"account_id":19092422,"reputation":51311,"user_id":13942448,"display_name":"jccampanero"},"score":0,"creation_date":1664749535,"post_id":73838745,"comment_id":130537409,"body_markdown":"Did you see any errors in your logs in either your client, server or Keycloak?","body":"Did you see any errors in your logs in either your client, server or Keycloak?"}],"owner":{"account_id":483060,"reputation":2405,"user_id":897882,"accept_rate":62,"display_name":"krikara"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":696,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":0,"score":2,"last_activity_date":1664264449,"creation_date":1664036143,"question_id":73838745,"body_markdown":"I&#39;m using the [GraphQL Spring Webclient][1] and followed the readme, but can&#39;t seem to get OAuth 2 to work. I&#39;m trying to get auth from the keycloak server to be able to query the GraphQL API. The readme only mentioned to put the OAuth 2 info into the app yml file, so I&#39;m not sure if I needed to do anything else.\r\n\r\n    graphql:\r\n      client:\r\n        url: \r\n        oauth2:\r\n          client-id: \r\n          client-secret: \r\n          token-uri: \r\n          authorization-uri: \r\n          scope: \r\n          authorization-grant-type: \r\n          client-name: \r\n\r\nWhen sending a request to the GraphQL API, I end up getting 401 unauthorized. I put breakpoints in the `GraphQLWebClientAutoConfiguration` class as well as the `OAuth2ClientRegistrationRepositoryConfiguration` class from the `package graphql.kickstart.spring.webclient.boot`. Both appear to be working as intended, although I did notice that the `provider` and `issuer-uri` were null. I wasn&#39;t sure if these were required and honestly not sure what I would put in those spots.\r\n\r\nWhen digging into the 401 error, there wasn&#39;t any bearer token in the header or body. I&#39;m not sure if I need to create the token or just attach it somehow. \r\n \r\nI wasn&#39;t sure if I needed to create my own `SecurityConfig` class, but when I tried doing it, I was running into `ClientRegistrationRepository` not found errors. They were similar errors to when I left the `client-id` and `client-secret` fields empty in the yaml, so I figured I didn&#39;t need a `SecurityConfig` file if the `GraphQL Spring Webclient` took care of it for me.\r\n\r\nIf someone could help point me in the right direction or provide examples, that would be much appreciated.\r\n\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;com.graphql-java-kickstart&lt;/groupId&gt;\r\n            &lt;artifactId&gt;graphql-webclient-spring-boot-starter&lt;/artifactId&gt;\r\n            &lt;version&gt;1.0.0&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n\r\n  [1]: https://github.com/graphql-java-kickstart/graphql-spring-webclient\r\n","title":"How to use OAuth2 with GraphQL Spring Webclient","body":"<p>I'm using the <a href=\"https://github.com/graphql-java-kickstart/graphql-spring-webclient\" rel=\"nofollow noreferrer\">GraphQL Spring Webclient</a> and followed the readme, but can't seem to get OAuth 2 to work. I'm trying to get auth from the keycloak server to be able to query the GraphQL API. The readme only mentioned to put the OAuth 2 info into the app yml file, so I'm not sure if I needed to do anything else.</p>\n<pre><code>graphql:\n  client:\n    url: \n    oauth2:\n      client-id: \n      client-secret: \n      token-uri: \n      authorization-uri: \n      scope: \n      authorization-grant-type: \n      client-name: \n</code></pre>\n<p>When sending a request to the GraphQL API, I end up getting 401 unauthorized. I put breakpoints in the <code>GraphQLWebClientAutoConfiguration</code> class as well as the <code>OAuth2ClientRegistrationRepositoryConfiguration</code> class from the <code>package graphql.kickstart.spring.webclient.boot</code>. Both appear to be working as intended, although I did notice that the <code>provider</code> and <code>issuer-uri</code> were null. I wasn't sure if these were required and honestly not sure what I would put in those spots.</p>\n<p>When digging into the 401 error, there wasn't any bearer token in the header or body. I'm not sure if I need to create the token or just attach it somehow.</p>\n<p>I wasn't sure if I needed to create my own <code>SecurityConfig</code> class, but when I tried doing it, I was running into <code>ClientRegistrationRepository</code> not found errors. They were similar errors to when I left the <code>client-id</code> and <code>client-secret</code> fields empty in the yaml, so I figured I didn't need a <code>SecurityConfig</code> file if the <code>GraphQL Spring Webclient</code> took care of it for me.</p>\n<p>If someone could help point me in the right direction or provide examples, that would be much appreciated.</p>\n<pre><code>    &lt;dependency&gt;\n        &lt;groupId&gt;com.graphql-java-kickstart&lt;/groupId&gt;\n        &lt;artifactId&gt;graphql-webclient-spring-boot-starter&lt;/artifactId&gt;\n        &lt;version&gt;1.0.0&lt;/version&gt;\n    &lt;/dependency&gt;\n</code></pre>\n"},{"tags":["java","maven","jenkins"],"comments":[{"owner":{"account_id":4470050,"reputation":68258,"user_id":3636601,"accept_rate":75,"display_name":"Jens"},"score":0,"creation_date":1664264737,"post_id":73863990,"comment_id":130425476,"body_markdown":"You running on an old java version","body":"You running on an old java version"},{"owner":{"account_id":112317,"reputation":93939,"user_id":296328,"accept_rate":60,"display_name":"khmarbaise"},"score":0,"creation_date":1664265497,"post_id":73863990,"comment_id":130425685,"body_markdown":"You are also running an old Maven version... current is 3.8.6 (https://maven.apache.org/download.cgi)","body":"You are also running an old Maven version... current is 3.8.6 (<a href=\"https://maven.apache.org/download.cgi\" rel=\"nofollow noreferrer\">maven.apache.org/download.cgi</a>)"}],"owner":{"account_id":19827152,"reputation":57,"user_id":14522532,"display_name":"Aji Fauzan"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":28,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"closed_date":1664264829,"answer_count":0,"score":0,"last_activity_date":1664264432,"creation_date":1664264432,"question_id":73863990,"body_markdown":"try build java project with jenkins but got this error \r\n\r\n    maven35-agent.jar already up to date\r\n    maven35-interceptor.jar already up to date\r\n    maven3-interceptor-commons.jar already up to date\r\n    [apps] $ /var/lib/jenkins/tools/hudson.model.JDK/java8/bin/java -cp /var/lib/jenkins/maven35-agent.jar:/var/lib/jenkins/tools/hudson.tasks.Maven_MavenInstallation/Maven_3.5.x/boot/plexus-classworlds-2.5.2.jar:/var/lib/jenkins/tools/hudson.tasks.Maven_MavenInstallation/Maven_3.5.x/conf/logging jenkins.maven3.agent.Maven35Main /var/lib/jenkins/tools/hudson.tasks.Maven_MavenInstallation/Maven_3.5.x /var/lib/jenkins/remoting.jar /var/lib/jenkins/maven35-interceptor.jar /var/lib/jenkins/maven3-interceptor-commons.jar 38515\r\n    Exception in thread &quot;main&quot; java.lang.UnsupportedClassVersionError: hudson/remoting/Launcher has been compiled by a more recent version of the Java Runtime (class file version 55.0), this version of the Java Runtime only recognizes class file versions up to 52.0\r\n    at java.lang.ClassLoader.defineClass1(Native Method)\r\n    at java.lang.ClassLoader.defineClass(ClassLoader.java:763)\r\n    at java.security.SecureClassLoader.defineClass(SecureClassLoader.java:142)\r\n    at java.net.URLClassLoader.defineClass(URLClassLoader.java:468)\r\n    at java.net.URLClassLoader.access$100(URLClassLoader.java:74)\r\n    at java.net.URLClassLoader$1.run(URLClassLoader.java:369)\r\n    at java.net.URLClassLoader$1.run(URLClassLoader.java:363)\r\n    at java.security.AccessController.doPrivileged(Native Method)\r\n    at java.net.URLClassLoader.findClass(URLClassLoader.java:362)\r\n    at org.codehaus.plexus.classworlds.realm.ClassRealm.loadClassFromSelf(ClassRealm.java:401)\r\n    at org.codehaus.plexus.classworlds.strategy.SelfFirstStrategy.loadClass(SelfFirstStrategy.java:42)\r\n    at org.codehaus.plexus.classworlds.realm.ClassRealm.unsynchronizedLoadClass(ClassRealm.java:271)\r\n    at org.codehaus.plexus.classworlds.realm.ClassRealm.loadClass(ClassRealm.java:247)\r\n    at org.codehaus.plexus.classworlds.realm.ClassRealm.loadClass(ClassRealm.java:239)\r\n    at jenkins.maven3.agent.Maven35Main.main(Maven35Main.java:135)\r\n    at jenkins.maven3.agent.Maven35Main.main(Maven35Main.java:65)\r\n\r\n    \t\r\nthis is my pom.xml files\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n    &lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\r\n    \t&lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n    \t&lt;artifactId&gt;test1&lt;/artifactId&gt;\r\n    \t&lt;packaging&gt;pom&lt;/packaging&gt;\r\n    \t&lt;parent&gt;\r\n    \t\t&lt;groupId&gt;com.project.test1&lt;/groupId&gt;\r\n    \t\t&lt;artifactId&gt;test1-parent&lt;/artifactId&gt;\r\n    \t\t&lt;version&gt;1.0.1-SNAPSHOT&lt;/version&gt;\r\n    \t\t&lt;relativePath&gt;test1-parent&lt;/relativePath&gt;\r\n    \t&lt;/parent&gt;\r\n    \t&lt;modules&gt;\r\n    \t\t&lt;module&gt;test1-dependencies&lt;/module&gt;\r\n    \t&lt;/modules&gt;\r\n\r\nfor the java version is using jdk from jenkins global tools configuration\r\n","title":"java.lang.UnsupportedClassVersionError when build maven project with jenkins","body":"<p>try build java project with jenkins but got this error</p>\n<pre><code>maven35-agent.jar already up to date\nmaven35-interceptor.jar already up to date\nmaven3-interceptor-commons.jar already up to date\n[apps] $ /var/lib/jenkins/tools/hudson.model.JDK/java8/bin/java -cp /var/lib/jenkins/maven35-agent.jar:/var/lib/jenkins/tools/hudson.tasks.Maven_MavenInstallation/Maven_3.5.x/boot/plexus-classworlds-2.5.2.jar:/var/lib/jenkins/tools/hudson.tasks.Maven_MavenInstallation/Maven_3.5.x/conf/logging jenkins.maven3.agent.Maven35Main /var/lib/jenkins/tools/hudson.tasks.Maven_MavenInstallation/Maven_3.5.x /var/lib/jenkins/remoting.jar /var/lib/jenkins/maven35-interceptor.jar /var/lib/jenkins/maven3-interceptor-commons.jar 38515\nException in thread &quot;main&quot; java.lang.UnsupportedClassVersionError: hudson/remoting/Launcher has been compiled by a more recent version of the Java Runtime (class file version 55.0), this version of the Java Runtime only recognizes class file versions up to 52.0\nat java.lang.ClassLoader.defineClass1(Native Method)\nat java.lang.ClassLoader.defineClass(ClassLoader.java:763)\nat java.security.SecureClassLoader.defineClass(SecureClassLoader.java:142)\nat java.net.URLClassLoader.defineClass(URLClassLoader.java:468)\nat java.net.URLClassLoader.access$100(URLClassLoader.java:74)\nat java.net.URLClassLoader$1.run(URLClassLoader.java:369)\nat java.net.URLClassLoader$1.run(URLClassLoader.java:363)\nat java.security.AccessController.doPrivileged(Native Method)\nat java.net.URLClassLoader.findClass(URLClassLoader.java:362)\nat org.codehaus.plexus.classworlds.realm.ClassRealm.loadClassFromSelf(ClassRealm.java:401)\nat org.codehaus.plexus.classworlds.strategy.SelfFirstStrategy.loadClass(SelfFirstStrategy.java:42)\nat org.codehaus.plexus.classworlds.realm.ClassRealm.unsynchronizedLoadClass(ClassRealm.java:271)\nat org.codehaus.plexus.classworlds.realm.ClassRealm.loadClass(ClassRealm.java:247)\nat org.codehaus.plexus.classworlds.realm.ClassRealm.loadClass(ClassRealm.java:239)\nat jenkins.maven3.agent.Maven35Main.main(Maven35Main.java:135)\nat jenkins.maven3.agent.Maven35Main.main(Maven35Main.java:65)\n\n    \n</code></pre>\n<p>this is my pom.xml files</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n    &lt;artifactId&gt;test1&lt;/artifactId&gt;\n    &lt;packaging&gt;pom&lt;/packaging&gt;\n    &lt;parent&gt;\n        &lt;groupId&gt;com.project.test1&lt;/groupId&gt;\n        &lt;artifactId&gt;test1-parent&lt;/artifactId&gt;\n        &lt;version&gt;1.0.1-SNAPSHOT&lt;/version&gt;\n        &lt;relativePath&gt;test1-parent&lt;/relativePath&gt;\n    &lt;/parent&gt;\n    &lt;modules&gt;\n        &lt;module&gt;test1-dependencies&lt;/module&gt;\n    &lt;/modules&gt;\n</code></pre>\n<p>for the java version is using jdk from jenkins global tools configuration</p>\n"},{"tags":["java","spring","validation","portlet","spring-portlet-mvc"],"answers":[{"tags":[],"owner":{"account_id":70258,"reputation":590444,"user_id":203907,"accept_rate":81,"display_name":"Bozho"},"down_vote_count":0,"up_vote_count":4,"is_accepted":true,"score":4,"last_activity_date":1290763216,"creation_date":1290760485,"answer_id":4283651,"question_id":4283611,"body_markdown":"You need `&lt;mvc:annotation-driven /&gt;` to enable jsr-303 validation. If you don&#39;t want to use it for some reason, or if at some point it starts creating problems (like it did for me), take a look at [this question][1]\r\n\r\n\r\nUpdate:\r\nin `schemaLocation` the mvc entry should contain these _two_:\r\n\r\n    http://www.springframework.org/schema/mvc\r\n    http://www.springframework.org/schema/mvc/spring-mvc-3.0.xsd\r\n\r\n  [1]: https://stackoverflow.com/questions/3693397/howto-get-rid-of-mvcannotation-driven","title":"Spring portlet mvc: @Valid does not seem to work","body":"<p>You need <code>&lt;mvc:annotation-driven /&gt;</code> to enable jsr-303 validation. If you don't want to use it for some reason, or if at some point it starts creating problems (like it did for me), take a look at <a href=\"https://stackoverflow.com/questions/3693397/howto-get-rid-of-mvcannotation-driven\">this question</a></p>\n\n<p>Update:\nin <code>schemaLocation</code> the mvc entry should contain these <em>two</em>:</p>\n\n<pre><code>http://www.springframework.org/schema/mvc\nhttp://www.springframework.org/schema/mvc/spring-mvc-3.0.xsd\n</code></pre>\n"},{"tags":[],"owner":{"account_id":157771,"reputation":30404,"user_id":375953,"accept_rate":53,"display_name":"dira"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1290763444,"creation_date":1290763444,"answer_id":4283983,"question_id":4283611,"body_markdown":"I think the reason is that `ServletRequestDataBinder` (extends DataBinder) has no `org.springframework.validation.Validator` instance, so it does not validate anything (to validate @Valid annotated bean you must have javax.validation.Validator instance).\r\n\r\n**org.springframework.validation.DataBinder**\r\n\r\n        public void validate() {\r\n        \t\tValidator validator = getValidator();\r\n        \t\tif (validator != null) {\r\n        \t\t\tvalidator.validate(getTarget(), getBindingResult());\r\n        \t\t}\r\n        \t}\r\n\r\nYou can set the Validator instance in `@InitBinder` annotated methods:-\r\n\r\n    @InitBinder\r\n        public void initBinder(WebDataBinder binder) {\r\n            binder.setValidator(new MyValidator());\r\n        }\r\n\r\nYo can also set the validator instance in [WebBindingInitializer][1].\r\n\r\n**StandardBindingInitializer** \r\n\r\n       public class StandardBindingInitializer implements WebBindingInitializer {\r\n        \t@Autowired\r\n        \tprivate LocalValidatorFactoryBean validator;\r\n        \tpublic void setValidatorFactory(LocalValidatorFactoryBean validator) {\r\n        \t\tthis.validator = validator;\r\n        \t}\r\n        \r\n        \t@Override\r\n        \tpublic void initBinder(WebDataBinder binder, WebRequest request) {\r\n        \t\tbinder.setValidator(validator);\r\n        }\r\n    }\r\n\r\nTo create an instance of LocalValidatorFactoryBean either use [mvc:annotation-driven][2] OR [set up LocalValidatorFactoryBean as bean][3].\r\n\r\n\r\n  [1]: http://static.springsource.org/spring/docs/3.0.x/spring-framework-reference/html/mvc.html#mvc-ann-webdatabinder\r\n  [2]: http://static.springsource.org/spring/docs/3.0.x/spring-framework-reference/html/mvc.html#mvc-annotation-driven\r\n  [3]: https://stackoverflow.com/questions/4186556/hibernate-validator-custom-resourcebundlelocator-and-spring","title":"Spring portlet mvc: @Valid does not seem to work","body":"<p>I think the reason is that <code>ServletRequestDataBinder</code> (extends DataBinder) has no <code>org.springframework.validation.Validator</code> instance, so it does not validate anything (to validate @Valid annotated bean you must have javax.validation.Validator instance).</p>\n\n<p><strong>org.springframework.validation.DataBinder</strong></p>\n\n<pre><code>    public void validate() {\n            Validator validator = getValidator();\n            if (validator != null) {\n                validator.validate(getTarget(), getBindingResult());\n            }\n        }\n</code></pre>\n\n<p>You can set the Validator instance in <code>@InitBinder</code> annotated methods:-</p>\n\n<pre><code>@InitBinder\n    public void initBinder(WebDataBinder binder) {\n        binder.setValidator(new MyValidator());\n    }\n</code></pre>\n\n<p>Yo can also set the validator instance in <a href=\"http://static.springsource.org/spring/docs/3.0.x/spring-framework-reference/html/mvc.html#mvc-ann-webdatabinder\" rel=\"nofollow noreferrer\">WebBindingInitializer</a>.</p>\n\n<p><strong>StandardBindingInitializer</strong> </p>\n\n<pre><code>   public class StandardBindingInitializer implements WebBindingInitializer {\n        @Autowired\n        private LocalValidatorFactoryBean validator;\n        public void setValidatorFactory(LocalValidatorFactoryBean validator) {\n            this.validator = validator;\n        }\n\n        @Override\n        public void initBinder(WebDataBinder binder, WebRequest request) {\n            binder.setValidator(validator);\n    }\n}\n</code></pre>\n\n<p>To create an instance of LocalValidatorFactoryBean either use <a href=\"http://static.springsource.org/spring/docs/3.0.x/spring-framework-reference/html/mvc.html#mvc-annotation-driven\" rel=\"nofollow noreferrer\">mvc:annotation-driven</a> OR <a href=\"https://stackoverflow.com/questions/4186556/hibernate-validator-custom-resourcebundlelocator-and-spring\">set up LocalValidatorFactoryBean as bean</a>.</p>\n"},{"tags":[],"owner":{"account_id":33015,"reputation":2955,"user_id":92063,"accept_rate":76,"display_name":"heikkim"},"down_vote_count":0,"up_vote_count":8,"is_accepted":false,"score":8,"last_activity_date":1290766561,"creation_date":1290766561,"answer_id":4284336,"question_id":4283611,"body_markdown":"I had exactly the same problem. I read https://jira.springframework.org/browse/SPR-6817 and worked the problem around by adding to my config:\r\n\r\n    &lt;mvc:annotation-driven validator=&quot;validator&quot; /&gt;\r\n\r\n\t&lt;bean id=&quot;validator&quot; class=&quot;org.springframework.validation.beanvalidation.LocalValidatorFactoryBean&quot; /&gt;\r\n\r\n\t&lt;bean id=&quot;annotationMethodHandlerAdapter&quot; class=&quot;org.springframework.web.portlet.mvc.annotation.AnnotationMethodHandlerAdapter&quot;&gt;\r\n\t\t&lt;property name=&quot;webBindingInitializer&quot;&gt;\r\n\t\t\t&lt;bean id=&quot;configurableWebBindingInitializer&quot; class=&quot;org.springframework.web.bind.support.ConfigurableWebBindingInitializer&quot;&gt;\r\n\t\t\t\t&lt;property name=&quot;validator&quot;&gt;\r\n\t\t\t\t\t&lt;ref bean=&quot;validator&quot;/&gt;\r\n\t\t\t\t&lt;/property&gt;\r\n\t\t\t&lt;/bean&gt;\r\n\t\t&lt;/property&gt;\r\n\t&lt;/bean&gt;\r\n\r\n**You also need to have a JSR-303 validator in your project in order for it to be available** For this I used Hibernate Validator: http://www.hibernate.org/subprojects/validator.html","title":"Spring portlet mvc: @Valid does not seem to work","body":"<p>I had exactly the same problem. I read <a href=\"https://jira.springframework.org/browse/SPR-6817\" rel=\"noreferrer\">https://jira.springframework.org/browse/SPR-6817</a> and worked the problem around by adding to my config:</p>\n\n<pre><code>&lt;mvc:annotation-driven validator=\"validator\" /&gt;\n\n&lt;bean id=\"validator\" class=\"org.springframework.validation.beanvalidation.LocalValidatorFactoryBean\" /&gt;\n\n&lt;bean id=\"annotationMethodHandlerAdapter\" class=\"org.springframework.web.portlet.mvc.annotation.AnnotationMethodHandlerAdapter\"&gt;\n    &lt;property name=\"webBindingInitializer\"&gt;\n        &lt;bean id=\"configurableWebBindingInitializer\" class=\"org.springframework.web.bind.support.ConfigurableWebBindingInitializer\"&gt;\n            &lt;property name=\"validator\"&gt;\n                &lt;ref bean=\"validator\"/&gt;\n            &lt;/property&gt;\n        &lt;/bean&gt;\n    &lt;/property&gt;\n&lt;/bean&gt;\n</code></pre>\n\n<p><strong>You also need to have a JSR-303 validator in your project in order for it to be available</strong> For this I used Hibernate Validator: <a href=\"http://www.hibernate.org/subprojects/validator.html\" rel=\"noreferrer\">http://www.hibernate.org/subprojects/validator.html</a></p>\n"},{"tags":[],"owner":{"account_id":5550191,"reputation":21,"user_id":4403568,"display_name":"Andy"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1419890634,"creation_date":1419889559,"answer_id":27696521,"question_id":4283611,"body_markdown":"You need to do the following, that is how I solved in the spring portlet mvc project.\r\n\r\n1. Add `mvc:annotation-driven` to your applicatonContext.xml \r\n\r\n2. Add the following code in your controller:\r\n\r\n   `@Autowired\r\n    private LocalValidatorFactoryBean validator;`\r\n    \r\n   `@InitBinder\r\n    public void initBinder(WebDataBinder binder) {\r\n        binder.setValidator(validator);\r\n    }`","title":"Spring portlet mvc: @Valid does not seem to work","body":"<p>You need to do the following, that is how I solved in the spring portlet mvc project.</p>\n\n<ol>\n<li><p>Add <code>mvc:annotation-driven</code> to your applicatonContext.xml </p></li>\n<li><p>Add the following code in your controller:</p>\n\n<p><code>@Autowired\nprivate LocalValidatorFactoryBean validator;</code></p>\n\n<p><code>@InitBinder\npublic void initBinder(WebDataBinder binder) {\n    binder.setValidator(validator);\n}</code></p></li>\n</ol>\n"},{"tags":[],"owner":{"account_id":26410768,"reputation":1,"user_id":20059895,"display_name":"SINDUJA"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1664264237,"creation_date":1663837344,"answer_id":73811941,"question_id":4283611,"body_markdown":"Use hibernate-validator jar 6.2 version and below and so it can support spring 5 and above versions...\r\n\r\nAdd dependency in pom.xml:\r\n```\r\n&lt;!-- https://mvnrepository.com/artifact/org.hibernate.validator/hibernate-validator --&gt;\r\n&lt;dependency&gt;\r\n    &lt;groupId&gt;org.hibernate.validator&lt;/groupId&gt;\r\n    &lt;artifactId&gt;hibernate-validator&lt;/artifactId&gt;\r\n    &lt;version&gt;6.2.2.Final&lt;/version&gt;\r\n&lt;/dependency&gt;\r\n```\r\n","title":"Spring portlet mvc: @Valid does not seem to work","body":"<p>Use hibernate-validator jar 6.2 version and below and so it can support spring 5 and above versions...</p>\n<p>Add dependency in pom.xml:</p>\n<pre><code>&lt;!-- https://mvnrepository.com/artifact/org.hibernate.validator/hibernate-validator --&gt;\n&lt;dependency&gt;\n    &lt;groupId&gt;org.hibernate.validator&lt;/groupId&gt;\n    &lt;artifactId&gt;hibernate-validator&lt;/artifactId&gt;\n    &lt;version&gt;6.2.2.Final&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n"}],"owner":{"account_id":651868,"reputation":1912,"user_id":455082,"accept_rate":82,"display_name":"jack"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":11368,"favorite_count":0,"down_vote_count":0,"up_vote_count":7,"accepted_answer_id":4283651,"answer_count":5,"score":7,"last_activity_date":1664264237,"creation_date":1290760069,"question_id":4283611,"body_markdown":"I created a bean class and use it in my controller but it does not seem to work.\r\nNamely even though I enter an invalid age, `result.hasErrors` is still false.\r\n\r\nBean class:\r\n\r\n    public class User{\r\n    \t@Min(13)\r\n    \tprivate int age;\r\n        private String name;\r\n    \r\n    \tpublic int getAge() {\r\n    \t\treturn age;\r\n    \t}\r\n    \r\n    \tpublic void setAge(int age) {\r\n    \t\tthis.age = age;\r\n    \t}\r\n    \r\n        public String getName(){\r\n                return name;\r\n        }\r\n    \r\n        public void setName(String name){\r\n                this.name = name;\r\n        }\t\r\n    }\r\n\r\nController snippet:\r\n\r\n    @ActionMapping(params = &quot;myAction=validateUser&quot;)\r\n    \tpublic void validateUser(ActionRequest request, ActionResponse response, ModelMap model, @ModelAttribute(&quot;user&quot;) @Valid User user, BindingResult result ){\t\t\r\n    \t\t\r\n    \t\tif(result.hasErrors()){\r\n    \t\t\tfor(ObjectError oe : result.getAllErrors()){\r\n    \t\t\t\tSystem.out.println(oe.getDefaultMessage());\r\n    \t\t\t}\r\n    \t\t} else{\r\n    \t\t\t//code\r\n    \t\t}\r\n    \t}\r\n\r\nJSP:\r\n\r\n    &lt;form:form action=&quot;${registerUser}&quot; method=&quot;post&quot; commandName=&quot;user&quot;&gt;\r\n    \t&lt;b&gt;User&lt;/b&gt; \r\n        &lt;form:input path=&quot;age&quot;/&gt;\r\n        &lt;form:input path=&quot;name&quot;/&gt;\r\n    \t&lt;input type=&quot;submit&quot; value=&quot;register&quot;/&gt;\r\n    &lt;/form:form&gt;\r\n\r\n-------------------------------\r\nedit:\r\nMy userRegistration-portlet.xml:\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n    &lt;beans xmlns=&quot;http://www.springframework.org/schema/beans&quot;\r\n    \txmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xmlns:p=&quot;http://www.springframework.org/schema/p&quot;\r\n    \txmlns:context=&quot;http://www.springframework.org/schema/context&quot;\r\n    \txmlns:util=&quot;http://www.springframework.org/schema/util&quot;\r\n    \txmlns:mvc=&quot;http://www.springframework.org/schema/mvc&quot;\r\n    \txsi:schemaLocation=&quot;\r\n            http://www.springframework.org/schema/beans\r\n            http://www.springframework.org/schema/beans/spring-beans-3.0.xsd\r\n            http://www.springframework.org/schema/context\r\n            http://www.springframework.org/schema/context/spring-context-3.0.xsd\r\n            http://www.springframework.org/schema/util\r\n            http://www.springframework.org/schema/util/spring-util-3.0.xsd\r\n            http://www.springframework.org/schema/mvc/spring-mvc-3.0.xsd\r\n            http://www.springframework.org/schema/mvc\r\n            &quot;&gt;\r\n            \r\n        &lt;mvc:annotation-driven /&gt; \r\n         \r\n        &lt;import resource=&quot;spring-hibernate.xml&quot;/&gt;\r\n       \r\n        &lt;context:component-scan base-package=&quot;comjohndoe.dao&quot; /&gt;\r\n    \t&lt;context:component-scan base-package=&quot;comjohndoe.model&quot; /&gt;\r\n    \t&lt;context:component-scan base-package=&quot;comjohndoe.service&quot; /&gt;\r\n    \t&lt;context:component-scan base-package=&quot;comjohndoe.util&quot; /&gt;\r\n    \t&lt;context:component-scan base-package=&quot;comjohndoecontroller&quot; /&gt;\r\n    \t\r\n    \t&lt;bean class=&quot;org.springframework.web.portlet.mvc.annotation.AnnotationMethodHandlerAdapter&quot;/&gt;\r\n    \t\r\n    \t&lt;bean id=&quot;viewResolver&quot;\r\n    \t\tclass=&quot;org.springframework.web.servlet.view.InternalResourceViewResolver&quot;&gt;\r\n    \t\t&lt;property name=&quot;viewClass&quot;\r\n    \t\t\tvalue=&quot;org.springframework.web.servlet.view.JstlView&quot; /&gt;\r\n    \t\t&lt;property name=&quot;prefix&quot; value=&quot;/jsp/&quot; /&gt;\r\n    \t\t&lt;property name=&quot;suffix&quot; value=&quot;.jsp&quot; /&gt;\r\n    \t&lt;/bean&gt;\r\n    &lt;/beans&gt;\r\n\r\nIt&#39;s the mvc:spring-validation line that is giving me the: `cvc-complex-type.2.4.c the matching wildcard is strict, but no declaration can be found for the element mvc:annotation-driven.` error.","title":"Spring portlet mvc: @Valid does not seem to work","body":"<p>I created a bean class and use it in my controller but it does not seem to work.\nNamely even though I enter an invalid age, <code>result.hasErrors</code> is still false.</p>\n\n<p>Bean class:</p>\n\n<pre><code>public class User{\n    @Min(13)\n    private int age;\n    private String name;\n\n    public int getAge() {\n        return age;\n    }\n\n    public void setAge(int age) {\n        this.age = age;\n    }\n\n    public String getName(){\n            return name;\n    }\n\n    public void setName(String name){\n            this.name = name;\n    }   \n}\n</code></pre>\n\n<p>Controller snippet:</p>\n\n<pre><code>@ActionMapping(params = \"myAction=validateUser\")\n    public void validateUser(ActionRequest request, ActionResponse response, ModelMap model, @ModelAttribute(\"user\") @Valid User user, BindingResult result ){      \n\n        if(result.hasErrors()){\n            for(ObjectError oe : result.getAllErrors()){\n                System.out.println(oe.getDefaultMessage());\n            }\n        } else{\n            //code\n        }\n    }\n</code></pre>\n\n<p>JSP:</p>\n\n<pre><code>&lt;form:form action=\"${registerUser}\" method=\"post\" commandName=\"user\"&gt;\n    &lt;b&gt;User&lt;/b&gt; \n    &lt;form:input path=\"age\"/&gt;\n    &lt;form:input path=\"name\"/&gt;\n    &lt;input type=\"submit\" value=\"register\"/&gt;\n&lt;/form:form&gt;\n</code></pre>\n\n<hr>\n\n<p>edit:\nMy userRegistration-portlet.xml:</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;beans xmlns=\"http://www.springframework.org/schema/beans\"\n    xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xmlns:p=\"http://www.springframework.org/schema/p\"\n    xmlns:context=\"http://www.springframework.org/schema/context\"\n    xmlns:util=\"http://www.springframework.org/schema/util\"\n    xmlns:mvc=\"http://www.springframework.org/schema/mvc\"\n    xsi:schemaLocation=\"\n        http://www.springframework.org/schema/beans\n        http://www.springframework.org/schema/beans/spring-beans-3.0.xsd\n        http://www.springframework.org/schema/context\n        http://www.springframework.org/schema/context/spring-context-3.0.xsd\n        http://www.springframework.org/schema/util\n        http://www.springframework.org/schema/util/spring-util-3.0.xsd\n        http://www.springframework.org/schema/mvc/spring-mvc-3.0.xsd\n        http://www.springframework.org/schema/mvc\n        \"&gt;\n\n    &lt;mvc:annotation-driven /&gt; \n\n    &lt;import resource=\"spring-hibernate.xml\"/&gt;\n\n    &lt;context:component-scan base-package=\"comjohndoe.dao\" /&gt;\n    &lt;context:component-scan base-package=\"comjohndoe.model\" /&gt;\n    &lt;context:component-scan base-package=\"comjohndoe.service\" /&gt;\n    &lt;context:component-scan base-package=\"comjohndoe.util\" /&gt;\n    &lt;context:component-scan base-package=\"comjohndoecontroller\" /&gt;\n\n    &lt;bean class=\"org.springframework.web.portlet.mvc.annotation.AnnotationMethodHandlerAdapter\"/&gt;\n\n    &lt;bean id=\"viewResolver\"\n        class=\"org.springframework.web.servlet.view.InternalResourceViewResolver\"&gt;\n        &lt;property name=\"viewClass\"\n            value=\"org.springframework.web.servlet.view.JstlView\" /&gt;\n        &lt;property name=\"prefix\" value=\"/jsp/\" /&gt;\n        &lt;property name=\"suffix\" value=\".jsp\" /&gt;\n    &lt;/bean&gt;\n&lt;/beans&gt;\n</code></pre>\n\n<p>It's the mvc:spring-validation line that is giving me the: <code>cvc-complex-type.2.4.c the matching wildcard is strict, but no declaration can be found for the element mvc:annotation-driven.</code> error.</p>\n"},{"tags":["java","android","listview"],"comments":[{"owner":{"account_id":1021854,"reputation":1758,"user_id":1031979,"display_name":"Zernike"},"score":0,"creation_date":1496004392,"post_id":44229812,"comment_id":75473574,"body_markdown":"Please provide more information about error.","body":"Please provide more information about error."}],"answers":[{"tags":[],"owner":{"account_id":8153562,"reputation":23731,"user_id":6139861,"display_name":"rafsanahmad007"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1495990928,"creation_date":1495990625,"answer_id":44229842,"question_id":44229812,"body_markdown":"You need your parent activity `context` to start Activity from your Adapter class.\r\n\r\ninstead of:\r\n\r\n     startActivity(new Intent(this, Order.class));\r\n\r\nuse:\r\n\r\n     activity.startActivity(new Intent(activity, Order.class));\r\n\r\nwhere `activity` is the `Activity` context your are passing to your Adapter class","title":"Why I am not able to change layout with button in a ListView?","body":"<p>You need your parent activity <code>context</code> to start Activity from your Adapter class.</p>\n\n<p>instead of:</p>\n\n<pre><code> startActivity(new Intent(this, Order.class));\n</code></pre>\n\n<p>use:</p>\n\n<pre><code> activity.startActivity(new Intent(activity, Order.class));\n</code></pre>\n\n<p>where <code>activity</code> is the <code>Activity</code> context your are passing to your Adapter class</p>\n"},{"tags":[],"owner":{"account_id":10927511,"reputation":3072,"user_id":8031784,"display_name":"Aniruddh Parihar"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1495992671,"creation_date":1495992671,"answer_id":44230118,"question_id":44229812,"body_markdown":"**try OnClick this way**\r\n\r\n//cast imageButtonOrders by `findViewById()`\r\n\r\n    @Override\r\n        public void onClick(View view) {\r\n            if (view.getId() == imageButtonOrders) {\r\n                startActivity(new Intent(this, Order.class));\r\n         }\r\n\r\n**in Adapter You need to Initialize `Context` with Activity reference and pass that `Context` on `Intent`**\r\n\r\n    imageButtonDelete.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View view) {\r\n                startActivity(new Intent(`Context`, Order.class));\r\n        }});","title":"Why I am not able to change layout with button in a ListView?","body":"<p><strong>try OnClick this way</strong></p>\n\n<p>//cast imageButtonOrders by <code>findViewById()</code></p>\n\n<pre><code>@Override\n    public void onClick(View view) {\n        if (view.getId() == imageButtonOrders) {\n            startActivity(new Intent(this, Order.class));\n     }\n</code></pre>\n\n<p><strong>in Adapter You need to Initialize <code>Context</code> with Activity reference and pass that <code>Context</code> on <code>Intent</code></strong></p>\n\n<pre><code>imageButtonDelete.setOnClickListener(new View.OnClickListener() {\n        @Override\n        public void onClick(View view) {\n            startActivity(new Intent(`Context`, Order.class));\n    }});\n</code></pre>\n"}],"owner":{"account_id":10978986,"reputation":178,"user_id":8066778,"display_name":"AlpYuktug"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":41,"favorite_count":0,"down_vote_count":2,"up_vote_count":1,"answer_count":2,"score":-1,"last_activity_date":1664264014,"creation_date":1495990371,"question_id":44229812,"body_markdown":"I am not able to change layout when clicking on the button. Actually, I always use this code:\r\n\r\n    @Override\r\n        public void onClick(View view) {\r\n            if (view == imageButtonOrders) {\r\n                startActivity(new Intent(this, Order.class)); }\r\n\r\nNow, I want to use this function in my `ListView`. But when I use it I am getting an error. How can I fix it?\r\n\r\n**SwipeListAdapterP.java**\r\n\r\n    @Override\r\n    public View getView(final int position, View convertView, ViewGroup parent) {\r\n\r\n        if (inflater == null)\r\n            inflater = (LayoutInflater) activity\r\n                    .getSystemService(Context.LAYOUT_INFLATER_SERVICE);\r\n        if (convertView == null)\r\n            convertView = inflater.inflate(R.layout.product_items, null);\r\n\r\n        TextView pk = (TextView) convertView.findViewById(R.id.pk);\r\n        TextView name = (TextView) convertView.findViewById(R.id.name);\r\n        TextView point = (TextView) convertView.findViewById(R.id.point);\r\n        ImageButton imageButtonDelete = (ImageButton) convertView.findViewById(R.id.imageButtonDelete);\r\n        ImageButton imageButtonUpdate = (ImageButton) convertView.findViewById(R.id.imageButtonUpdate);\r\n\r\n        ProductItems m = productList.get(position);\r\n\r\n        pk.setText(String.valueOf(m.getPk()));\r\n        name.setText(String.valueOf(m.getName()));\r\n        point.setText(String.valueOf(m.getPoint()));\r\n\r\n        imageButtonDelete.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View view) {\r\n                startActivity(new Intent(this, Order.class));\r\n        }});\r\n","title":"Why I am not able to change layout with button in a ListView?","body":"<p>I am not able to change layout when clicking on the button. Actually, I always use this code:</p>\n<pre><code>@Override\n    public void onClick(View view) {\n        if (view == imageButtonOrders) {\n            startActivity(new Intent(this, Order.class)); }\n</code></pre>\n<p>Now, I want to use this function in my <code>ListView</code>. But when I use it I am getting an error. How can I fix it?</p>\n<p><strong>SwipeListAdapterP.java</strong></p>\n<pre><code>@Override\npublic View getView(final int position, View convertView, ViewGroup parent) {\n\n    if (inflater == null)\n        inflater = (LayoutInflater) activity\n                .getSystemService(Context.LAYOUT_INFLATER_SERVICE);\n    if (convertView == null)\n        convertView = inflater.inflate(R.layout.product_items, null);\n\n    TextView pk = (TextView) convertView.findViewById(R.id.pk);\n    TextView name = (TextView) convertView.findViewById(R.id.name);\n    TextView point = (TextView) convertView.findViewById(R.id.point);\n    ImageButton imageButtonDelete = (ImageButton) convertView.findViewById(R.id.imageButtonDelete);\n    ImageButton imageButtonUpdate = (ImageButton) convertView.findViewById(R.id.imageButtonUpdate);\n\n    ProductItems m = productList.get(position);\n\n    pk.setText(String.valueOf(m.getPk()));\n    name.setText(String.valueOf(m.getName()));\n    point.setText(String.valueOf(m.getPoint()));\n\n    imageButtonDelete.setOnClickListener(new View.OnClickListener() {\n        @Override\n        public void onClick(View view) {\n            startActivity(new Intent(this, Order.class));\n    }});\n</code></pre>\n"},{"tags":["java","intellij-idea"],"comments":[{"owner":{"account_id":2485939,"reputation":19426,"user_id":2164365,"accept_rate":40,"display_name":"Abra"},"score":0,"creation_date":1664256905,"post_id":73862401,"comment_id":130423429,"body_markdown":"Are you referring to this [JSObject](https://docs.oracle.com/en/java/javase/17/docs/api/jdk.jsobject/netscape/javascript/JSObject.html) ?","body":"Are you referring to this <a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/jdk.jsobject/netscape/javascript/JSObject.html\" rel=\"nofollow noreferrer\">JSObject</a> ?"},{"owner":{"account_id":19468910,"reputation":23,"user_id":19653542,"display_name":"Talha Ikram"},"score":0,"creation_date":1664257047,"post_id":73862401,"comment_id":130423454,"body_markdown":"yes the project uses the js object for web view","body":"yes the project uses the js object for web view"}],"answers":[{"tags":[],"owner":{"account_id":17693330,"reputation":3781,"user_id":12844632,"display_name":"Egor Klepikov"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1664263919,"creation_date":1664263919,"answer_id":73863882,"question_id":73862401,"body_markdown":"Please make sure to add `JDK_HOME\\jre\\lib\\jfxrt.jar` file to the classpath in `File | Project Structure | SDKs` dialog:\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/aXj4E.jpg","title":"Java Package netscape.javascript.JSObject in intellij","body":"<p>Please make sure to add <code>JDK_HOME\\jre\\lib\\jfxrt.jar</code> file to the classpath in <code>File | Project Structure | SDKs</code> dialog:</p>\n<p><a href=\"https://i.stack.imgur.com/aXj4E.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/aXj4E.jpg\" alt=\"enter image description here\" /></a></p>\n"}],"owner":{"account_id":19468910,"reputation":23,"user_id":19653542,"display_name":"Talha Ikram"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":260,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":73863882,"answer_count":1,"score":1,"last_activity_date":1664263919,"creation_date":1664252894,"question_id":73862401,"body_markdown":"I have a project demo from XTRD publick repository called renko-scalper but when i cloned and started the build command in ide it shows me the following error \r\n\r\n\r\n[Output after executing build command][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/t0Z1W.png","title":"Java Package netscape.javascript.JSObject in intellij","body":"<p>I have a project demo from XTRD publick repository called renko-scalper but when i cloned and started the build command in ide it shows me the following error</p>\n<p><a href=\"https://i.stack.imgur.com/t0Z1W.png\" rel=\"nofollow noreferrer\">Output after executing build command</a></p>\n"},{"tags":["java","spring-boot","maven","testing"],"comments":[{"owner":{"account_id":2843847,"reputation":55833,"user_id":2442804,"accept_rate":80,"display_name":"luk2302"},"score":3,"creation_date":1663927660,"post_id":73826074,"comment_id":130359585,"body_markdown":"Sounds like race conditions and some test interfering with other test, through whatever kind of mechanics. Very hard for *you* to debug, basically impossible for everybody else without the code to debug. You basically need to run different combinations of tests over and over and over again until you see a pattern of which tests combined with which other tests sometimes fail and go from there.","body":"Sounds like race conditions and some test interfering with other test, through whatever kind of mechanics. Very hard for <i>you</i> to debug, basically impossible for everybody else without the code to debug. You basically need to run different combinations of tests over and over and over again until you see a pattern of which tests combined with which other tests sometimes fail and go from there."}],"answers":[{"tags":[],"owner":{"account_id":210082,"reputation":19409,"user_id":461499,"accept_rate":73,"display_name":"Rob Audenaerde"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1663931203,"creation_date":1663931203,"answer_id":73826791,"question_id":73826074,"body_markdown":"You probably have some test leakage (data being kept between tests), so the order of the tests might matter, and might be changed between the java-versions. This can be static variables, stuff that gets stored / loaded from disk or external services, etc. etc.\r\n\r\nDo you run them in parallel? Else you could check if the execution order of the tests are the same or not. \r\n\r\nThis is very hard to debug; the main thing is to check first if tour test are really well isolated or not. ","title":"Why some tests fail when mvn clean install but not when I run them individually?","body":"<p>You probably have some test leakage (data being kept between tests), so the order of the tests might matter, and might be changed between the java-versions. This can be static variables, stuff that gets stored / loaded from disk or external services, etc. etc.</p>\n<p>Do you run them in parallel? Else you could check if the execution order of the tests are the same or not.</p>\n<p>This is very hard to debug; the main thing is to check first if tour test are really well isolated or not.</p>\n"},{"tags":[],"owner":{"account_id":8937054,"reputation":1080,"user_id":6667539,"display_name":"Paplusc"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1664263905,"creation_date":1664263905,"answer_id":73863877,"question_id":73826074,"body_markdown":"The error was that I had two dependencies for the same thing (overlapping) and when I upgraded to Java 17 one of them wasn&#39;t working. \r\n\r\nThen depending where I was running the tests from, It was taking one dependency or the other. \r\n\r\nI removed the redundant dependency that was not working and that fixed everything.","title":"Why some tests fail when mvn clean install but not when I run them individually?","body":"<p>The error was that I had two dependencies for the same thing (overlapping) and when I upgraded to Java 17 one of them wasn't working.</p>\n<p>Then depending where I was running the tests from, It was taking one dependency or the other.</p>\n<p>I removed the redundant dependency that was not working and that fixed everything.</p>\n"}],"owner":{"account_id":8937054,"reputation":1080,"user_id":6667539,"display_name":"Paplusc"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2085,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":73863877,"answer_count":2,"score":1,"last_activity_date":1664263905,"creation_date":1663927375,"question_id":73826074,"body_markdown":"So recently, I migrated from java 11 to 17 my project and suddenly some of my tests started to fail after executing `mvn clean install` command with a `500 internal error`. I wanted to debug one of the individual tests that fails to detect the problem and for my surprise when I run the command ` mvn -Dtest=TestClass#whenXthenY test ` the test passes.\r\n\r\nWhen I run `mvn clean install` from the IDE it works as well.\r\n\r\nI have no clue what could be happening here. The project is a Spring Boot project.\r\nAny idea what could be the reason of this behaviour?","title":"Why some tests fail when mvn clean install but not when I run them individually?","body":"<p>So recently, I migrated from java 11 to 17 my project and suddenly some of my tests started to fail after executing <code>mvn clean install</code> command with a <code>500 internal error</code>. I wanted to debug one of the individual tests that fails to detect the problem and for my surprise when I run the command <code>mvn -Dtest=TestClass#whenXthenY test</code> the test passes.</p>\n<p>When I run <code>mvn clean install</code> from the IDE it works as well.</p>\n<p>I have no clue what could be happening here. The project is a Spring Boot project.\nAny idea what could be the reason of this behaviour?</p>\n"},{"tags":["java","selenium","scroll"],"answers":[{"tags":[],"owner":{"account_id":6990353,"reputation":1340,"user_id":5359846,"accept_rate":23,"display_name":"Tal Angel"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1664263854,"creation_date":1664263854,"answer_id":73863864,"question_id":73858277,"body_markdown":"Do Not scroll on the element which is not yet visible. Scroll the page itself first, later find and click on the element:\r\n\r\n    JavascriptExecutor js = (JavascriptExecutor) driver; \r\n    js.executeScript(&quot;window.scrollBy(0,350)&quot;, &quot;&quot;);\r\n    WebElement element = driver.findElement(askForHelpButton);\r\n    element.click();\r\n\r\nIf you get an error try doing this in a loop, using a try / catch block","title":"How to click on element which is not available on DOM when we land on the page. JAVA + Selenium Automation","body":"<p>Do Not scroll on the element which is not yet visible. Scroll the page itself first, later find and click on the element:</p>\n<pre><code>JavascriptExecutor js = (JavascriptExecutor) driver; \njs.executeScript(&quot;window.scrollBy(0,350)&quot;, &quot;&quot;);\nWebElement element = driver.findElement(askForHelpButton);\nelement.click();\n</code></pre>\n<p>If you get an error try doing this in a loop, using a try / catch block</p>\n"}],"owner":{"account_id":14384989,"reputation":115,"user_id":10391252,"display_name":"Rock"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":65,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"accepted_answer_id":73863864,"answer_count":1,"score":0,"last_activity_date":1664263854,"creation_date":1664215990,"question_id":73858277,"body_markdown":"How to click on element which is not available on DOM when we land on the page But it gets available as soon as we scroll down.How to handle such element and to click it. \r\n\r\n\r\nI am using following code which gives me error that element not found. \r\n\r\n```\r\nprivate static By getAskForHelpButtonForOrder(String orderId) {\r\n    return By.cssSelector(\r\n      String.format(&quot;[data-qa=&#39;orders-orderitem-%s-buttons-manager-get-help&#39;]&quot;, orderId)\r\n    );\r\n  }\r\n\r\nfinal By askForHelpButton = getAskForHelpButtonForOrder(orderId);\r\nWebElement element = driver.findElement(askForHelpButton);\r\n    JavascriptExecutor je = (JavascriptExecutor) driver;\r\n    je.executeScript(&quot;arguments[0].scrollIntoView(true);&quot;,element);\r\n    element.click();\r\n```\r\n\r\nError:\r\n\r\n```\r\norg.openqa.selenium.NoSuchElementException: no such element: Unable to locate element: {&quot;method&quot;:&quot;css selector&quot;,&quot;selector&quot;:&quot;[data-qa=&#39;orders-orderitem-530638-buttons-manager-get-help&#39;]&quot;}\r\n\r\n```","title":"How to click on element which is not available on DOM when we land on the page. JAVA + Selenium Automation","body":"<p>How to click on element which is not available on DOM when we land on the page But it gets available as soon as we scroll down.How to handle such element and to click it.</p>\n<p>I am using following code which gives me error that element not found.</p>\n<pre><code>private static By getAskForHelpButtonForOrder(String orderId) {\n    return By.cssSelector(\n      String.format(&quot;[data-qa='orders-orderitem-%s-buttons-manager-get-help']&quot;, orderId)\n    );\n  }\n\nfinal By askForHelpButton = getAskForHelpButtonForOrder(orderId);\nWebElement element = driver.findElement(askForHelpButton);\n    JavascriptExecutor je = (JavascriptExecutor) driver;\n    je.executeScript(&quot;arguments[0].scrollIntoView(true);&quot;,element);\n    element.click();\n</code></pre>\n<p>Error:</p>\n<pre><code>org.openqa.selenium.NoSuchElementException: no such element: Unable to locate element: {&quot;method&quot;:&quot;css selector&quot;,&quot;selector&quot;:&quot;[data-qa='orders-orderitem-530638-buttons-manager-get-help']&quot;}\n\n</code></pre>\n"},{"tags":["java","telegram-bot"],"comments":[{"owner":{"account_id":1284275,"reputation":852,"user_id":1237683,"display_name":"ariaby"},"score":1,"creation_date":1465900123,"post_id":37779401,"comment_id":63082926,"body_markdown":"Are you sure that is a good idea to reset user&#39;s settings when they send the /start command?","body":"Are you sure that is a good idea to reset user&#39;s settings when they send the /start command?"},{"owner":{"account_id":3570566,"reputation":168,"user_id":2980992,"display_name":"konata"},"score":1,"creation_date":1466098475,"post_id":37779401,"comment_id":63188619,"body_markdown":"@ariaby I think this is pretty OK solution, because /start command is not displayed in popup command list, so it can&#39;t be picked up accidentally. It&#39;s designed to be sent only in 2 cases: 1) when user adds your bot for the first time; 2) when user bot&#39;s history is cleared and chat is restarted. If user sends /start command manually, he may expect exactly the same behavior as described above.","body":"@ariaby I think this is pretty OK solution, because /start command is not displayed in popup command list, so it can&#39;t be picked up accidentally. It&#39;s designed to be sent only in 2 cases: 1) when user adds your bot for the first time; 2) when user bot&#39;s history is cleared and chat is restarted. If user sends /start command manually, he may expect exactly the same behavior as described above."},{"owner":{"account_id":785560,"reputation":14879,"user_id":845414,"display_name":"Johannes Kuhn"},"score":0,"creation_date":1466105043,"post_id":37779401,"comment_id":63192298,"body_markdown":"You might want to write your own answer and accept that, so people can vote for the answer.","body":"You might want to write your own answer and accept that, so people can vote for the answer."},{"owner":{"account_id":3570566,"reputation":168,"user_id":2980992,"display_name":"konata"},"score":0,"creation_date":1466288466,"post_id":37779401,"comment_id":63257219,"body_markdown":"@JohannesKuhn yeah, I&#39;ll do it, thanks.","body":"@JohannesKuhn yeah, I&#39;ll do it, thanks."}],"answers":[{"tags":[],"owner":{"account_id":1284275,"reputation":852,"user_id":1237683,"display_name":"ariaby"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1465819656,"creation_date":1465819656,"answer_id":37789465,"question_id":37779401,"body_markdown":"This is not possible because you won&#39;t receive a notification when user removes the bot. The only error you get is when you try to send a message to a user that has blocked the bot.","title":"Telegram Bot — reset user settings on chat removing / clearing","body":"<p>This is not possible because you won't receive a notification when user removes the bot. The only error you get is when you try to send a message to a user that has blocked the bot.</p>\n"},{"tags":[],"owner":{"account_id":3570566,"reputation":168,"user_id":2980992,"display_name":"konata"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1466290179,"creation_date":1466288833,"answer_id":37902204,"question_id":37779401,"body_markdown":"Ok, I think I have found a possible solution.&lt;br/&gt; \r\nHope, it will help to somebody.&lt;br/&gt;&lt;br/&gt; \r\n\r\nThere&#39;s no need to handle bot removing, instead of this you can handle bot&#39;s *restart*, because first message bot receives everytime after user clears history or re-adds removed bot — is **/start** command. So receiveing **/start** command is a good point to reset previous settings and let user to specify them again.\r\n&lt;br/&gt;&lt;br/&gt;\r\n\r\nAlso see the discussion above: https://stackoverflow.com/questions/37779401/telegram-bot-reset-user-settings-on-chat-removing-clearing#comment63082926_37779401\r\n\r\n","title":"Telegram Bot — reset user settings on chat removing / clearing","body":"<p>Ok, I think I have found a possible solution.<br/> \nHope, it will help to somebody.<br/><br/> </p>\n\n<p>There's no need to handle bot removing, instead of this you can handle bot's <em>restart</em>, because first message bot receives everytime after user clears history or re-adds removed bot — is <strong>/start</strong> command. So receiveing <strong>/start</strong> command is a good point to reset previous settings and let user to specify them again.\n<br/><br/></p>\n\n<p>Also see the discussion above: <a href=\"https://stackoverflow.com/questions/37779401/telegram-bot-reset-user-settings-on-chat-removing-clearing#comment63082926_37779401\">Telegram Bot — reset user settings on chat removing / clearing</a></p>\n"},{"tags":[],"owner":{"account_id":4953752,"reputation":913,"user_id":3986967,"display_name":"Evgeny"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1664263717,"creation_date":1664263717,"answer_id":73863840,"question_id":37779401,"body_markdown":"While **/start** is working solution to recognize that user has restarted dialog with bot, now (September 2022) there is a way to get a **disconnect message**.\r\n\r\n⚠️ *I&#39;m using another  library and language, however shure that it&#39;s an API feature, not depending on language (i&#39;m using: C# nuget Telegram.Bot ver 18.0.0)*\r\n\r\nWhen user click to &quot;Stop and block bot&quot;:\r\n\r\n[![Telegram Bot Info menu, Stop and block bot][1]][1]\r\n\r\n\r\nTelegram sends an update message (`Telegram.Bot.Types.Update`) with `ChatMemberUpdated` info (`MyChatMember` field) - datails on person , see example:\r\n\r\n[![Telegram.Bot.Types.Update, Telegram.Bot.Types.ChatMemberUpdated example][2]][2]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/xwASI.png\r\n  [2]: https://i.stack.imgur.com/vrcGZ.png","title":"Telegram Bot — reset user settings on chat removing / clearing","body":"<p>While <strong>/start</strong> is working solution to recognize that user has restarted dialog with bot, now (September 2022) there is a way to get a <strong>disconnect message</strong>.</p>\n<p>⚠️ <em>I'm using another  library and language, however shure that it's an API feature, not depending on language (i'm using: C# nuget Telegram.Bot ver 18.0.0)</em></p>\n<p>When user click to &quot;Stop and block bot&quot;:</p>\n<p><a href=\"https://i.stack.imgur.com/xwASI.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/xwASI.png\" alt=\"Telegram Bot Info menu, Stop and block bot\" /></a></p>\n<p>Telegram sends an update message (<code>Telegram.Bot.Types.Update</code>) with <code>ChatMemberUpdated</code> info (<code>MyChatMember</code> field) - datails on person , see example:</p>\n<p><a href=\"https://i.stack.imgur.com/vrcGZ.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/vrcGZ.png\" alt=\"Telegram.Bot.Types.Update, Telegram.Bot.Types.ChatMemberUpdated example\" /></a></p>\n"}],"owner":{"account_id":3570566,"reputation":168,"user_id":2980992,"display_name":"konata"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":13608,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":37902204,"answer_count":3,"score":1,"last_activity_date":1664263717,"creation_date":1465768230,"question_id":37779401,"body_markdown":"I am using Java library for Telegram Bots Api: https://github.com/rubenlagus/TelegramBots\r\n\r\nThe thing I&#39;m wondering about — is it possible to detect when bot is removed from user contact list?&lt;br/&gt;\r\nI would like to handle this event to delete user settings (such as language) from database, so next time user adds my bot, he can specify settings from scratch and not stucking on selected previously.\r\n&lt;br/&gt;&lt;br/&gt;\r\n\r\n### SOLUTION FOUND ###\r\nI described my solution below.","title":"Telegram Bot — reset user settings on chat removing / clearing","body":"<p>I am using Java library for Telegram Bots Api: <a href=\"https://github.com/rubenlagus/TelegramBots\" rel=\"nofollow\">https://github.com/rubenlagus/TelegramBots</a></p>\n\n<p>The thing I'm wondering about — is it possible to detect when bot is removed from user contact list?<br/>\nI would like to handle this event to delete user settings (such as language) from database, so next time user adds my bot, he can specify settings from scratch and not stucking on selected previously.\n<br/><br/></p>\n\n<h3>SOLUTION FOUND</h3>\n\n<p>I described my solution below.</p>\n"},{"tags":["java","gallery","android-permissions","crop","scoped-storage"],"answers":[{"tags":[],"owner":{"account_id":21408664,"reputation":615,"user_id":15769379,"display_name":"Alexander"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1664263674,"creation_date":1664263674,"answer_id":73863832,"question_id":73637662,"body_markdown":"Have the same problem, but i dont need to crop images (but as i see - it will work with that after you get uri). The best way to work with images (if you need just images or video) since Android 11 - is Photo Picker (https://developer.android.com/training/data-storage/shared/photopicker#handle_the_photo_picker_results)\r\nIt doesnt need any kind of permissions.  \r\n\r\n","title":"Is it still possible to pick, crop and save an image from Gallery after Android 11?","body":"<p>Have the same problem, but i dont need to crop images (but as i see - it will work with that after you get uri). The best way to work with images (if you need just images or video) since Android 11 - is Photo Picker (<a href=\"https://developer.android.com/training/data-storage/shared/photopicker#handle_the_photo_picker_results\" rel=\"nofollow noreferrer\">https://developer.android.com/training/data-storage/shared/photopicker#handle_the_photo_picker_results</a>)\nIt doesnt need any kind of permissions.</p>\n"}],"owner":{"account_id":7741641,"reputation":89,"user_id":5861145,"display_name":"Теодор Митев"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":446,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":73863832,"answer_count":1,"score":0,"last_activity_date":1664263674,"creation_date":1662562714,"question_id":73637662,"body_markdown":"everyone.\r\n\r\nIt is well known what a big blow Google inflicted on devs by making &quot;Scoped storage&quot; mandatory.\r\nAfter my app update got rejected by Google Play Console team for using a `&quot;sensitive permission&quot;` which my app is not eligable for (according to google), I have been struggling to make the necessary code changes and preserve my app functionallity to it&#39;s best, without removing any of it&#39;s functionallity.\r\n\r\nMy question is:\r\nIs it still possible to pick an image from the gallery, crop it (with pick and crop intents) and save it to a file, without using the `&quot;MANAGE_EXTERNAL_STORAGE&quot;` permission and how?\r\n\r\nFor reference, please take a look at an [old question][1] I posted a few years back.\r\nDoes anyone know of a working method after Android 11 without the `external storage manager` permission or do I have to disable this function for newer versions?\r\n\r\nI have already tried quite a few things with no success. There is also not much information online for this type of operation yet.\r\n\r\n\r\n  [1]: https://stackoverflow.com/questions/53299393/picking-an-image-from-gallery-gives-error-android-n","title":"Is it still possible to pick, crop and save an image from Gallery after Android 11?","body":"<p>everyone.</p>\n<p>It is well known what a big blow Google inflicted on devs by making &quot;Scoped storage&quot; mandatory.\nAfter my app update got rejected by Google Play Console team for using a <code>&quot;sensitive permission&quot;</code> which my app is not eligable for (according to google), I have been struggling to make the necessary code changes and preserve my app functionallity to it's best, without removing any of it's functionallity.</p>\n<p>My question is:\nIs it still possible to pick an image from the gallery, crop it (with pick and crop intents) and save it to a file, without using the <code>&quot;MANAGE_EXTERNAL_STORAGE&quot;</code> permission and how?</p>\n<p>For reference, please take a look at an <a href=\"https://stackoverflow.com/questions/53299393/picking-an-image-from-gallery-gives-error-android-n\">old question</a> I posted a few years back.\nDoes anyone know of a working method after Android 11 without the <code>external storage manager</code> permission or do I have to disable this function for newer versions?</p>\n<p>I have already tried quite a few things with no success. There is also not much information online for this type of operation yet.</p>\n"},{"tags":["java","android","kotlin","augmented-reality","android-augmented-reality"],"comments":[{"owner":{"account_id":1029517,"reputation":1061,"user_id":1038119,"display_name":"Android Developer World"},"score":0,"creation_date":1622274747,"post_id":62771675,"comment_id":119750033,"body_markdown":"did u solved it ?","body":"did u solved it ?"}],"answers":[{"tags":[],"owner":{"account_id":21123712,"reputation":52,"user_id":15529296,"display_name":"Yash Shah"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1664263616,"creation_date":1664263616,"answer_id":73863816,"question_id":62771675,"body_markdown":"Please try this \r\n\r\n    try {\r\n                    hasmap.map { \r\n                        addImage(key, convertURLtoBitmap(your_URL(value)), 0.5f)\r\n                        Log.e(TAG, &quot;bitmap added SuccessFully&quot;)\r\n                    }\r\n\r\n\r\n\r\n\r\nfor convertURLtoBitmap\r\n\r\n    private fun convertURLtoBitmap(your_url: String?): Bitmap? {\r\n      \r\n        return Glide.with(context)\r\n            .asBitmap()\r\n            .diskCacheStrategy(DiskCacheStrategy.DATA)\r\n            .load(your_url)\r\n            .submit()\r\n            .get()\r\n    }","title":"URL Images not playing videos with Augmented Reality (AR) Android","body":"<p>Please try this</p>\n<pre><code>try {\n                hasmap.map { \n                    addImage(key, convertURLtoBitmap(your_URL(value)), 0.5f)\n                    Log.e(TAG, &quot;bitmap added SuccessFully&quot;)\n                }\n</code></pre>\n<p>for convertURLtoBitmap</p>\n<pre><code>private fun convertURLtoBitmap(your_url: String?): Bitmap? {\n  \n    return Glide.with(context)\n        .asBitmap()\n        .diskCacheStrategy(DiskCacheStrategy.DATA)\n        .load(your_url)\n        .submit()\n        .get()\n}\n</code></pre>\n"}],"owner":{"account_id":9728106,"reputation":546,"user_id":10381236,"display_name":"Idris Stack"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":146,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1664263616,"creation_date":1594112629,"question_id":62771675,"body_markdown":"I am implementing a bring Images to life feature, this is the [blog][1] that I was following, and I tried to convert the URL image to bitmap but it seems not connecting to a local video.\r\n\r\nI am using Picasso, to download the image as a bitmap from a URL but it can&#39;t seem to be working.\r\n\r\nBelow is my code :\r\n\r\n    override fun getSessionConfiguration(session: Session): Config {\r\n    \r\n            fun loadAugmentedImageBitmap(imageName: String): Bitmap =\r\n                requireContext().assets.open(imageName).use { return BitmapFactory.decodeStream(it) }\r\n    \r\n            val loader = activity?.applicationContext?.let { Coil.imageLoader(it) }\r\n    \r\n    \r\n            var hashMap: HashMap&lt;String, String&gt; = HashMap&lt;String, String&gt;()\r\n    \r\n            hashMap.put(\r\n                TEST_VIDEO_1,\r\n                &quot;https://res.cloudinary.com/do6g6dwlz/image/upload/v1594037658/lofsos15kot28ymz9fwb.jpg&quot;\r\n            )\r\n            hashMap.put(\r\n                TEST_VIDEO_2,\r\n                &quot;https://res.cloudinary.com/do6g6dwlz/image/upload/v1594038114/ijl9ngoomay9mleifv88.jpg&quot;\r\n            )\r\n            hashMap.put(\r\n                TEST_VIDEO_3,\r\n                &quot;https://res.cloudinary.com/do6g6dwlz/image/upload/v1594038131/po2fp4mviqsqkvwpztpe.jpg&quot;\r\n            )\r\n    \r\n            fun setupAugmentedImageDatabase(config: Config, session: Session): Boolean {\r\n                try {\r\n                    config.augmentedImageDatabase = AugmentedImageDatabase(session).also { db -&gt;\r\n    \r\n    \r\n                        for ((key, value) in hashMap) {\r\n    \r\n                            print(&quot;load URL ---- $value&quot;)\r\n    \r\n                            Picasso.get().load(value).into(object : com.squareup.picasso.Target {\r\n                                override fun onPrepareLoad(placeHolderDrawable: Drawable?) {\r\n                                    Toast.makeText(context,&quot;Loading Images&quot;,Toast.LENGTH_SHORT).show()\r\n                                }\r\n    \r\n                                override fun onBitmapFailed(\r\n                                    e: java.lang.Exception?,\r\n                                    errorDrawable: Drawable?\r\n                                ) {\r\n                                    Toast.makeText(context,&quot;Something wrong happened&quot;,Toast.LENGTH_SHORT).show()\r\n                                }\r\n    \r\n                                override fun onBitmapLoaded(\r\n                                    bitmap: Bitmap?,\r\n                                    from: Picasso.LoadedFrom?\r\n                                ) {\r\n                                    db.addImage(key, bitmap)\r\n                                }\r\n    \r\n                            })\r\n                        }\r\n                    }\r\n                    return true\r\n                } catch (e: IllegalArgumentException) {\r\n                    Log.e(TAG, &quot;Could not add bitmap to augmented image database&quot;, e)\r\n                } catch (e: IOException) {\r\n                    Log.e(TAG, &quot;IO exception loading augmented image bitmap.&quot;, e)\r\n                }\r\n                return false\r\n            }\r\n    \r\n            return super.getSessionConfiguration(session).also {\r\n                it.lightEstimationMode = Config.LightEstimationMode.DISABLED\r\n                it.focusMode = Config.FocusMode.AUTO\r\n    \r\n                if (!setupAugmentedImageDatabase(it, session)) {\r\n                    Toast.makeText(\r\n                        requireContext(),\r\n                        &quot;Could not setup augmented image database&quot;,\r\n                        Toast.LENGTH_LONG\r\n                    ).show()\r\n                }\r\n          \r\n\r\n      }\r\n        }\r\n\r\n\r\nThis is the entire [class][2] and as well as the repository [link][3]\r\n\r\n**NOTE:**\r\n\r\nWhen both the Images and Videos are in the local project, it works fine, but trying to access both via URL  it doesn&#39;t work.\r\n\r\n\r\n  [1]: https://medium.com/krootl/arcore-sceneform-simple-video-playback-3fe2f909bfbc\r\n  [2]: https://gist.github.com/huxaiphaer/d711143028b7d090fe3ee274cec764a3\r\n  [3]: https://github.com/huxaiphaer/ARHuxy","title":"URL Images not playing videos with Augmented Reality (AR) Android","body":"<p>I am implementing a bring Images to life feature, this is the <a href=\"https://medium.com/krootl/arcore-sceneform-simple-video-playback-3fe2f909bfbc\" rel=\"nofollow noreferrer\">blog</a> that I was following, and I tried to convert the URL image to bitmap but it seems not connecting to a local video.</p>\n<p>I am using Picasso, to download the image as a bitmap from a URL but it can't seem to be working.</p>\n<p>Below is my code :</p>\n<pre><code>override fun getSessionConfiguration(session: Session): Config {\n\n        fun loadAugmentedImageBitmap(imageName: String): Bitmap =\n            requireContext().assets.open(imageName).use { return BitmapFactory.decodeStream(it) }\n\n        val loader = activity?.applicationContext?.let { Coil.imageLoader(it) }\n\n\n        var hashMap: HashMap&lt;String, String&gt; = HashMap&lt;String, String&gt;()\n\n        hashMap.put(\n            TEST_VIDEO_1,\n            &quot;https://res.cloudinary.com/do6g6dwlz/image/upload/v1594037658/lofsos15kot28ymz9fwb.jpg&quot;\n        )\n        hashMap.put(\n            TEST_VIDEO_2,\n            &quot;https://res.cloudinary.com/do6g6dwlz/image/upload/v1594038114/ijl9ngoomay9mleifv88.jpg&quot;\n        )\n        hashMap.put(\n            TEST_VIDEO_3,\n            &quot;https://res.cloudinary.com/do6g6dwlz/image/upload/v1594038131/po2fp4mviqsqkvwpztpe.jpg&quot;\n        )\n\n        fun setupAugmentedImageDatabase(config: Config, session: Session): Boolean {\n            try {\n                config.augmentedImageDatabase = AugmentedImageDatabase(session).also { db -&gt;\n\n\n                    for ((key, value) in hashMap) {\n\n                        print(&quot;load URL ---- $value&quot;)\n\n                        Picasso.get().load(value).into(object : com.squareup.picasso.Target {\n                            override fun onPrepareLoad(placeHolderDrawable: Drawable?) {\n                                Toast.makeText(context,&quot;Loading Images&quot;,Toast.LENGTH_SHORT).show()\n                            }\n\n                            override fun onBitmapFailed(\n                                e: java.lang.Exception?,\n                                errorDrawable: Drawable?\n                            ) {\n                                Toast.makeText(context,&quot;Something wrong happened&quot;,Toast.LENGTH_SHORT).show()\n                            }\n\n                            override fun onBitmapLoaded(\n                                bitmap: Bitmap?,\n                                from: Picasso.LoadedFrom?\n                            ) {\n                                db.addImage(key, bitmap)\n                            }\n\n                        })\n                    }\n                }\n                return true\n            } catch (e: IllegalArgumentException) {\n                Log.e(TAG, &quot;Could not add bitmap to augmented image database&quot;, e)\n            } catch (e: IOException) {\n                Log.e(TAG, &quot;IO exception loading augmented image bitmap.&quot;, e)\n            }\n            return false\n        }\n\n        return super.getSessionConfiguration(session).also {\n            it.lightEstimationMode = Config.LightEstimationMode.DISABLED\n            it.focusMode = Config.FocusMode.AUTO\n\n            if (!setupAugmentedImageDatabase(it, session)) {\n                Toast.makeText(\n                    requireContext(),\n                    &quot;Could not setup augmented image database&quot;,\n                    Toast.LENGTH_LONG\n                ).show()\n            }\n      \n\n  }\n    }\n</code></pre>\n<p>This is the entire <a href=\"https://gist.github.com/huxaiphaer/d711143028b7d090fe3ee274cec764a3\" rel=\"nofollow noreferrer\">class</a> and as well as the repository <a href=\"https://github.com/huxaiphaer/ARHuxy\" rel=\"nofollow noreferrer\">link</a></p>\n<p><strong>NOTE:</strong></p>\n<p>When both the Images and Videos are in the local project, it works fine, but trying to access both via URL  it doesn't work.</p>\n"},{"tags":["java","maven","jar","dependency-properties","logback"],"answers":[{"tags":[],"owner":{"account_id":1041528,"reputation":3262,"user_id":1047469,"display_name":"marthursson"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1448348371,"creation_date":1448348371,"answer_id":33887279,"question_id":33886902,"body_markdown":"Logging configuration and properties files should be in the main resources folder (e.g. src/main/resources if you&#39;re using maven) of the **final binary** that you build (e.g. the .war project if you are building a web application). This central log configuration file needs to contain the complete log configuration for the full application, including any jars you depend on.\r\n\r\nIf you need separate logging configuration files in your modules (e.g. for testing purposes), these should be placed in the test resources folder (e.g. src/test/resources for maven).\r\n\r\nAs a side note you should typically try to avoid using systemPath in your maven dependencies. Hardcoding a system path like you&#39;re doing in your example is begging for trouble, particularly in a project where there are more people involved.","title":"What is the right way to use Logback.xml in my external library Jar","body":"<p>Logging configuration and properties files should be in the main resources folder (e.g. src/main/resources if you're using maven) of the <strong>final binary</strong> that you build (e.g. the .war project if you are building a web application). This central log configuration file needs to contain the complete log configuration for the full application, including any jars you depend on.</p>\n\n<p>If you need separate logging configuration files in your modules (e.g. for testing purposes), these should be placed in the test resources folder (e.g. src/test/resources for maven).</p>\n\n<p>As a side note you should typically try to avoid using systemPath in your maven dependencies. Hardcoding a system path like you're doing in your example is begging for trouble, particularly in a project where there are more people involved.</p>\n"}],"owner":{"account_id":4616175,"reputation":1047,"user_id":3742622,"accept_rate":40,"display_name":"user3742622"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":3987,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1664263510,"creation_date":1448346760,"question_id":33886902,"body_markdown":"I am usually using the folowing bundle of Logback.xml and application.properties to get all I need. Logback.xml:\r\n\r\n    &lt;configuration&gt;\r\n    \r\n        &lt;!-- External properties --&gt;\r\n        &lt;property file=&quot;./application.properties&quot; /&gt;    &lt;!-- for build --&gt;\r\n    \r\n        &lt;timestamp key=&quot;byDate&quot; datePattern=&quot;yyyyMMdd&quot;/&gt;\r\n    \r\n        &lt;!-- Send messages to System.out - CONSOLE --&gt;\r\n        &lt;appender name=&quot;STDOUT&quot; class=&quot;ch.qos.logback.core.ConsoleAppender&quot;&gt;\r\n            &lt;!-- encoders are assigned the type ch.qos.logback.classic.encoder.PatternLayoutEncoder by default --&gt;\r\n            &lt;encoder&gt;\r\n                &lt;pattern&gt;%d{HH:mm:ss.SSS} [%thread] %-5level %logger{5} - %msg%n&lt;/pattern&gt;\r\n            &lt;/encoder&gt;\r\n            &lt;withJansi&gt;true&lt;/withJansi&gt;\r\n        &lt;/appender&gt;\r\n    \r\n        &lt;!-- Send messages to a rolling file --&gt;\r\n        &lt;appender name=&quot;FILE&quot; class=&quot;ch.qos.logback.core.rolling.RollingFileAppender&quot;&gt;\r\n    \r\n            &lt;file&gt;${logging.path}/${spring.application.name}.log&lt;/file&gt;\r\n            &lt;rollingPolicy class=&quot;ch.qos.logback.core.rolling.TimeBasedRollingPolicy&quot;&gt;\r\n                &lt;!-- daily rollover. Make sure the path matches the one in the file element or else the rollover logs are placed in the working directory. --&gt;\r\n                &lt;fileNamePattern&gt;${logging.path}/${spring.application.name}_%d{yyyy-MM-dd}.%i.log&lt;/fileNamePattern&gt;\r\n                &lt;timeBasedFileNamingAndTriggeringPolicy class=&quot;ch.qos.logback.core.rolling.SizeAndTimeBasedFNATP&quot;&gt;\r\n                    &lt;maxFileSize&gt;5MB&lt;/maxFileSize&gt;\r\n                &lt;/timeBasedFileNamingAndTriggeringPolicy&gt;\r\n                &lt;!-- keep 30 days&#39; worth of history --&gt;\r\n                &lt;maxHistory&gt;30&lt;/maxHistory&gt;\r\n            &lt;/rollingPolicy&gt;\r\n            &lt;encoder&gt;\r\n                &lt;charset&gt;UTF-8&lt;/charset&gt;\r\n                &lt;pattern&gt;%d{HH:mm:ss.SSS} [%thread] %-5level %logger{5} - %msg%n&lt;/pattern&gt;\r\n            &lt;/encoder&gt;\r\n    \r\n        &lt;/appender&gt;\r\n    \r\n        &lt;root level=&quot;${logging.level}&quot;&gt;\r\n            &lt;appender-ref ref=&quot;STDOUT&quot; /&gt;\r\n            &lt;appender-ref ref=&quot;FILE&quot; /&gt;\r\n        &lt;/root&gt;\r\n    \r\n    &lt;/configuration&gt;\r\n\r\napplication.properties:\r\n\r\n    spring.application.name=MyApp\r\n    \r\n    #Logging Settings\r\n    logging.level=INFO\r\n    logging.path=/data/MyApp/logs/\r\n    logging.config=/data/MyApp/Logback.xml\r\n\r\nBut now I am trying to write an external Jar which I will include in my &quot;others projects&quot;. But my &quot;others projects&quot; already have Logback.xml and application.properties and I would like that external Jar will use it too. I&#39;d try to put nothing of Logback.xml and application.properties in external Jar project and I was thinking that it will find Logback.xml. But it doesn&#39;t work.\r\n\r\nI don&#39;t see any log messages when I call something from external Jar. What should I do in this case? By the way, I am using Maven for building and dependencies. So I&#39;d built external Jar and include it in my projects with:\r\n\r\n    &lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;com.myapp.someprovider&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;SomeAppProvider&lt;/artifactId&gt;\r\n    \t\t\t&lt;version&gt;1.0.0&lt;/version&gt;\r\n    \t\t\t&lt;scope&gt;system&lt;/scope&gt;\r\n    \t\t\t&lt;systemPath&gt;/Users/me/Projects/Java/Server/SomeAppProvider/target/SomeAppProvider-1.0.0.jar&lt;/systemPath&gt;\r\n    \t\t&lt;/dependency&gt;\r\n","title":"What is the right way to use Logback.xml in my external library Jar","body":"<p>I am usually using the folowing bundle of Logback.xml and application.properties to get all I need. Logback.xml:</p>\n<pre><code>&lt;configuration&gt;\n\n    &lt;!-- External properties --&gt;\n    &lt;property file=&quot;./application.properties&quot; /&gt;    &lt;!-- for build --&gt;\n\n    &lt;timestamp key=&quot;byDate&quot; datePattern=&quot;yyyyMMdd&quot;/&gt;\n\n    &lt;!-- Send messages to System.out - CONSOLE --&gt;\n    &lt;appender name=&quot;STDOUT&quot; class=&quot;ch.qos.logback.core.ConsoleAppender&quot;&gt;\n        &lt;!-- encoders are assigned the type ch.qos.logback.classic.encoder.PatternLayoutEncoder by default --&gt;\n        &lt;encoder&gt;\n            &lt;pattern&gt;%d{HH:mm:ss.SSS} [%thread] %-5level %logger{5} - %msg%n&lt;/pattern&gt;\n        &lt;/encoder&gt;\n        &lt;withJansi&gt;true&lt;/withJansi&gt;\n    &lt;/appender&gt;\n\n    &lt;!-- Send messages to a rolling file --&gt;\n    &lt;appender name=&quot;FILE&quot; class=&quot;ch.qos.logback.core.rolling.RollingFileAppender&quot;&gt;\n\n        &lt;file&gt;${logging.path}/${spring.application.name}.log&lt;/file&gt;\n        &lt;rollingPolicy class=&quot;ch.qos.logback.core.rolling.TimeBasedRollingPolicy&quot;&gt;\n            &lt;!-- daily rollover. Make sure the path matches the one in the file element or else the rollover logs are placed in the working directory. --&gt;\n            &lt;fileNamePattern&gt;${logging.path}/${spring.application.name}_%d{yyyy-MM-dd}.%i.log&lt;/fileNamePattern&gt;\n            &lt;timeBasedFileNamingAndTriggeringPolicy class=&quot;ch.qos.logback.core.rolling.SizeAndTimeBasedFNATP&quot;&gt;\n                &lt;maxFileSize&gt;5MB&lt;/maxFileSize&gt;\n            &lt;/timeBasedFileNamingAndTriggeringPolicy&gt;\n            &lt;!-- keep 30 days' worth of history --&gt;\n            &lt;maxHistory&gt;30&lt;/maxHistory&gt;\n        &lt;/rollingPolicy&gt;\n        &lt;encoder&gt;\n            &lt;charset&gt;UTF-8&lt;/charset&gt;\n            &lt;pattern&gt;%d{HH:mm:ss.SSS} [%thread] %-5level %logger{5} - %msg%n&lt;/pattern&gt;\n        &lt;/encoder&gt;\n\n    &lt;/appender&gt;\n\n    &lt;root level=&quot;${logging.level}&quot;&gt;\n        &lt;appender-ref ref=&quot;STDOUT&quot; /&gt;\n        &lt;appender-ref ref=&quot;FILE&quot; /&gt;\n    &lt;/root&gt;\n\n&lt;/configuration&gt;\n</code></pre>\n<p>application.properties:</p>\n<pre><code>spring.application.name=MyApp\n\n#Logging Settings\nlogging.level=INFO\nlogging.path=/data/MyApp/logs/\nlogging.config=/data/MyApp/Logback.xml\n</code></pre>\n<p>But now I am trying to write an external Jar which I will include in my &quot;others projects&quot;. But my &quot;others projects&quot; already have Logback.xml and application.properties and I would like that external Jar will use it too. I'd try to put nothing of Logback.xml and application.properties in external Jar project and I was thinking that it will find Logback.xml. But it doesn't work.</p>\n<p>I don't see any log messages when I call something from external Jar. What should I do in this case? By the way, I am using Maven for building and dependencies. So I'd built external Jar and include it in my projects with:</p>\n<pre><code>&lt;dependency&gt;\n            &lt;groupId&gt;com.myapp.someprovider&lt;/groupId&gt;\n            &lt;artifactId&gt;SomeAppProvider&lt;/artifactId&gt;\n            &lt;version&gt;1.0.0&lt;/version&gt;\n            &lt;scope&gt;system&lt;/scope&gt;\n            &lt;systemPath&gt;/Users/me/Projects/Java/Server/SomeAppProvider/target/SomeAppProvider-1.0.0.jar&lt;/systemPath&gt;\n        &lt;/dependency&gt;\n</code></pre>\n"},{"tags":["java","unit-testing","mocking","mockito"],"answers":[{"tags":[],"owner":{"account_id":17915,"reputation":13985,"user_id":40581,"accept_rate":75,"display_name":"David Grant"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1348670499,"creation_date":1348670499,"answer_id":12604288,"question_id":12604197,"body_markdown":"You can&#39;t mock `BufferedReader` here since it&#39;s being created inside the method.  \r\n\r\nTry mocking `inputStream` and throwing the exception from `InputStream.read()` instead.","title":"how to throw IOException while reading a file using Mockito?","body":"<p>You can't mock <code>BufferedReader</code> here since it's being created inside the method.  </p>\n\n<p>Try mocking <code>inputStream</code> and throwing the exception from <code>InputStream.read()</code> instead.</p>\n"},{"tags":[],"owner":{"account_id":277416,"reputation":681848,"user_id":571407,"accept_rate":100,"display_name":"JB Nizet"},"down_vote_count":0,"up_vote_count":9,"is_accepted":true,"score":9,"last_activity_date":1348670534,"creation_date":1348670534,"answer_id":12604300,"question_id":12604197,"body_markdown":"You&#39;re mocking a BufferedReader, but your method doesn&#39;t use your mock. It uses its own, new BufferedReader. You need to be able to inject your mock into the method. \r\n\r\nIt seems that `inputStream` is a field of the class containing this method. So you could mock the inputStream instead and make it throw an IOException when its `read()` method is called (by the InputStreamReader).","title":"how to throw IOException while reading a file using Mockito?","body":"<p>You're mocking a BufferedReader, but your method doesn't use your mock. It uses its own, new BufferedReader. You need to be able to inject your mock into the method. </p>\n\n<p>It seems that <code>inputStream</code> is a field of the class containing this method. So you could mock the inputStream instead and make it throw an IOException when its <code>read()</code> method is called (by the InputStreamReader).</p>\n"},{"tags":[],"owner":{"account_id":1085259,"reputation":78314,"user_id":1081110,"display_name":"Dawood ibn Kareem"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1348692294,"creation_date":1348692294,"answer_id":12610105,"question_id":12604197,"body_markdown":"The way that I would recommend is to have an extra class that looks after the creation of the `BufferedReader`.  This class has just one method, with no actual logic in it, so it doesn&#39;t need any unit tests.\r\n\r\n    public class BufferedReaderFactory{\r\n      public BufferedReader makeBufferedReader(InputStream input) throws IOException{\r\n        return new BufferedReader(new InputStreamReader(input));\r\n      }\r\n    }\r\n\r\nNow, add a private field of type `BufferedReaderFactory` to the class that you&#39;re testing, along with a means of injecting it - either a setter method or an alternate constructor.  In the standard constructor for your class, instantiate a `BufferedReaderFactory` and set the field accordingly.  In your `someMethod()`, call the `makeBufferedReader()` method on the field, instead of using `new`.\r\n\r\nYour class is much more testable; because now, you can write a test that injects a mocked `BufferedReaderFactory` to the object that you&#39;re testing, before calling `someMethod()`.  On that mock, you can stub the `makeBufferedReader` method to throw the exception that you want.\r\n\r\nPlease add a comment if you want me to go into more detail on any of the steps above.  You might also like to read my post on [mocking object creation](http://code.google.com/p/mockito/wiki/MockingObjectCreation) on the Mockito wiki; which is closely related to this.\r\n\r\nBut the most important message is that making your classes testable is really important, and you will reap the benefits of doing so many times over. ","title":"how to throw IOException while reading a file using Mockito?","body":"<p>The way that I would recommend is to have an extra class that looks after the creation of the <code>BufferedReader</code>.  This class has just one method, with no actual logic in it, so it doesn't need any unit tests.</p>\n\n<pre><code>public class BufferedReaderFactory{\n  public BufferedReader makeBufferedReader(InputStream input) throws IOException{\n    return new BufferedReader(new InputStreamReader(input));\n  }\n}\n</code></pre>\n\n<p>Now, add a private field of type <code>BufferedReaderFactory</code> to the class that you're testing, along with a means of injecting it - either a setter method or an alternate constructor.  In the standard constructor for your class, instantiate a <code>BufferedReaderFactory</code> and set the field accordingly.  In your <code>someMethod()</code>, call the <code>makeBufferedReader()</code> method on the field, instead of using <code>new</code>.</p>\n\n<p>Your class is much more testable; because now, you can write a test that injects a mocked <code>BufferedReaderFactory</code> to the object that you're testing, before calling <code>someMethod()</code>.  On that mock, you can stub the <code>makeBufferedReader</code> method to throw the exception that you want.</p>\n\n<p>Please add a comment if you want me to go into more detail on any of the steps above.  You might also like to read my post on <a href=\"http://code.google.com/p/mockito/wiki/MockingObjectCreation\" rel=\"nofollow\">mocking object creation</a> on the Mockito wiki; which is closely related to this.</p>\n\n<p>But the most important message is that making your classes testable is really important, and you will reap the benefits of doing so many times over. </p>\n"}],"owner":{"account_id":1198461,"reputation":55,"user_id":1169661,"display_name":"Balasubramanian Sankar"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":19328,"favorite_count":0,"down_vote_count":0,"up_vote_count":5,"accepted_answer_id":12604300,"answer_count":3,"score":5,"last_activity_date":1664261765,"creation_date":1348670227,"question_id":12604197,"body_markdown":"I have to throw an `IOException` using Mockito for a method, which is reading an input stream like given below. Is there any way to do it?\r\n\r\n    public void someMethod() {\r\n        try {\r\n            BufferedReader in = new BufferedReader(new InputStreamReader(inputStream));\r\n            firstLine = in.readLine();\r\n        } catch(IOException ioException) {\r\n            // Do something\r\n        }\r\n        ...\r\n    }\r\nI tried mocking like\r\n\r\n      BufferedReader buffReader = Mockito.mock(BufferedReader.class);\r\n      Mockito.doThrow(new IOException()).when(buffReader).readLine();\r\n\r\nbut didn&#39;t work out :(","title":"how to throw IOException while reading a file using Mockito?","body":"<p>I have to throw an <code>IOException</code> using Mockito for a method, which is reading an input stream like given below. Is there any way to do it?</p>\n<pre><code>public void someMethod() {\n    try {\n        BufferedReader in = new BufferedReader(new InputStreamReader(inputStream));\n        firstLine = in.readLine();\n    } catch(IOException ioException) {\n        // Do something\n    }\n    ...\n}\n</code></pre>\n<p>I tried mocking like</p>\n<pre><code>  BufferedReader buffReader = Mockito.mock(BufferedReader.class);\n  Mockito.doThrow(new IOException()).when(buffReader).readLine();\n</code></pre>\n<p>but didn't work out :(</p>\n"},{"tags":["java","spring-boot","netty","tcpdump","reactor-netty"],"comments":[{"owner":{"account_id":5024231,"reputation":2017,"user_id":4036754,"display_name":"Violeta Georgieva"},"score":0,"creation_date":1664265878,"post_id":73863484,"comment_id":130425804,"body_markdown":"Take a tcp dump and see which peer closes the connection.","body":"Take a tcp dump and see which peer closes the connection."}],"owner":{"account_id":25837045,"reputation":13,"user_id":19573286,"display_name":"Nitesh S"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":710,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1664261697,"creation_date":1664261697,"question_id":73863484,"body_markdown":"We are seeing some errors related to connection reset in Production under heavy load.\r\n\r\nBasically the flow is \r\n\r\n**Microservice 1 -&gt; Load Balancer() -&gt; Microservice 2**\r\n\r\nError message is \r\n```\r\nStack trace: \r\n    |_ checkpoint ? Request to post\r\n   http://LoadbalancerURL/process [Default web client]\r\n\r\nError has been observed at the following site(s):\r\n   Suppressed: reactor.core.publisher.FluxOnAssembly$OnAssemblyException:\r\n   io.netty.channel.unix.Errors$NativeIoException: readAddress(..) failed: Connection reset by peer\r\n```\r\n\r\nMy question is how do we troubleshoot this issue.\r\nDo we need to take tcpdump? if yes then what should I look for?\r\n\r\nPossible workaround I could think of is use exponential retry. Any idea where I could insert retry logic in below code?\r\n\r\nBelow is the code snipnet on how we are calling the url from microservice 1\r\n\r\n```\r\nwebclient\r\n    .create()\r\n    .post()\r\n    .uri(url)\r\n    .bodyValue(input)\r\n    .retrieve()\r\n    .toEntity(object.class)\r\n    .log()\r\n    .subscribe(\r\n     onSuccess -&gt; {\r\n     //somelogic\r\n     },\r\n     onError -&gt; {\r\n     //somelogic\r\n     },\r\n     ()-&gt;{\r\n\r\n     })\r\n\r\n```\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n","title":"Spring boot - Connection reset by peer under heavy load","body":"<p>We are seeing some errors related to connection reset in Production under heavy load.</p>\n<p>Basically the flow is</p>\n<p><strong>Microservice 1 -&gt; Load Balancer() -&gt; Microservice 2</strong></p>\n<p>Error message is</p>\n<pre><code>Stack trace: \n    |_ checkpoint ? Request to post\n   http://LoadbalancerURL/process [Default web client]\n\nError has been observed at the following site(s):\n   Suppressed: reactor.core.publisher.FluxOnAssembly$OnAssemblyException:\n   io.netty.channel.unix.Errors$NativeIoException: readAddress(..) failed: Connection reset by peer\n</code></pre>\n<p>My question is how do we troubleshoot this issue.\nDo we need to take tcpdump? if yes then what should I look for?</p>\n<p>Possible workaround I could think of is use exponential retry. Any idea where I could insert retry logic in below code?</p>\n<p>Below is the code snipnet on how we are calling the url from microservice 1</p>\n<pre><code>webclient\n    .create()\n    .post()\n    .uri(url)\n    .bodyValue(input)\n    .retrieve()\n    .toEntity(object.class)\n    .log()\n    .subscribe(\n     onSuccess -&gt; {\n     //somelogic\n     },\n     onError -&gt; {\n     //somelogic\n     },\n     ()-&gt;{\n\n     })\n\n</code></pre>\n"},{"tags":["java","ldap","jndi","connection-pooling"],"comments":[{"owner":{"account_id":71739,"reputation":307142,"user_id":207421,"accept_rate":82,"display_name":"user207421"},"score":0,"creation_date":1576463001,"post_id":59349715,"comment_id":104895577,"body_markdown":"You will not beleve this, but it is a documented fact: enabling connection pool debugging disables the pool. NB You are using a custom socket factory why?","body":"You will not beleve this, but it is a documented fact: enabling connection pool debugging disables the pool. NB You are using a custom socket factory why?"},{"owner":{"account_id":1746243,"reputation":788,"user_id":1596398,"accept_rate":58,"display_name":"Hmmmmm"},"score":0,"creation_date":1576468187,"post_id":59349715,"comment_id":104896464,"body_markdown":"I saw a comment somewhere that said that but I couldn&#39;t believe it. Funny and sad that it is true. We are using a custom socket factory so that we can easily customize the trust store without impacting other Java services running on the machine or even in the same application. Not sure if that is the best way but if there is a better way to achieve that please let me know.","body":"I saw a comment somewhere that said that but I couldn&#39;t believe it. Funny and sad that it is true. We are using a custom socket factory so that we can easily customize the trust store without impacting other Java services running on the machine or even in the same application. Not sure if that is the best way but if there is a better way to achieve that please let me know."},{"owner":{"account_id":71739,"reputation":307142,"user_id":207421,"accept_rate":82,"display_name":"user207421"},"score":1,"creation_date":1576470381,"post_id":59349715,"comment_id":104896808,"body_markdown":"The solution to all truststore problems is to have the server use a CA-signed certificate.","body":"The solution to all truststore problems is to have the server use a CA-signed certificate."},{"owner":{"account_id":1746243,"reputation":788,"user_id":1596398,"accept_rate":58,"display_name":"Hmmmmm"},"score":0,"creation_date":1576470470,"post_id":59349715,"comment_id":104896823,"body_markdown":"Yeah, we do that but there are different CAs for different use cases. In other words, we don&#39;t put all the trusted certificates into one large trust store but rather break the trust stores up based on use case.","body":"Yeah, we do that but there are different CAs for different use cases. In other words, we don&#39;t put all the trusted certificates into one large trust store but rather break the trust stores up based on use case."},{"owner":{"account_id":71739,"reputation":307142,"user_id":207421,"accept_rate":82,"display_name":"user207421"},"score":1,"creation_date":1576471308,"post_id":59349715,"comment_id":104896955,"body_markdown":"I believe I am mistaken, and that this is not documented, and that I found it in a comment in the source code years ago when facing the same issue. I have probably mentioned it on SO once or twice too. I don&#39;t see the point of different truststores. Either you trust the CA or you don&#39;t.","body":"I believe I am mistaken, and that this is not documented, and that I found it in a comment in the source code years ago when facing the same issue. I have probably mentioned it on SO once or twice too. I don&#39;t see the point of different truststores. Either you trust the CA or you don&#39;t."},{"owner":{"account_id":1746243,"reputation":788,"user_id":1596398,"accept_rate":58,"display_name":"Hmmmmm"},"score":0,"creation_date":1576471593,"post_id":59349715,"comment_id":104897013,"body_markdown":"Could you provide a link to the source where you found it, if you still have that? As for the CA trust, we trust different CAs for different uses. The Active Directory TLS is managed by an internal PKI and we would not want an external CA (e.g., DigiCert) having control over that. On the other hand, our server also makes external REST calls to other services that do chain up to publicly trusted CAs, like DigiCert. You could argue that we should trust the external CAs to not issue certs for our internal purposes but we prefer to explicitly control what they can issue certs for.","body":"Could you provide a link to the source where you found it, if you still have that? As for the CA trust, we trust different CAs for different uses. The Active Directory TLS is managed by an internal PKI and we would not want an external CA (e.g., DigiCert) having control over that. On the other hand, our server also makes external REST calls to other services that do chain up to publicly trusted CAs, like DigiCert. You could argue that we should trust the external CAs to not issue certs for our internal purposes but we prefer to explicitly control what they can issue certs for."},{"owner":{"account_id":71739,"reputation":307142,"user_id":207421,"accept_rate":82,"display_name":"user207421"},"score":0,"creation_date":1576489425,"post_id":59349715,"comment_id":104902912,"body_markdown":"Well the link is just to somewhere in the JDK source code for the LDAP JNDI provider, and it was about 10 years ago ...","body":"Well the link is just to somewhere in the JDK source code for the LDAP JNDI provider, and it was about 10 years ago ..."},{"owner":{"account_id":9784322,"reputation":143,"user_id":7251133,"display_name":"Florian H."},"score":0,"creation_date":1622701266,"post_id":59349715,"comment_id":119868120,"body_markdown":"Connection pool debugging does not disables the pool, as I notice in 2021. I suppose you have some unclosed ressources: all of the DirContext, searchResult&#39;s NamingEnumeration, attributes&#39; NamingEnumeration and values&#39; NamingEnumeration have to be closed, see https://www.avisi.nl/blog/2015/03/27/java-ldap-connection-pooling","body":"Connection pool debugging does not disables the pool, as I notice in 2021. I suppose you have some unclosed ressources: all of the DirContext, searchResult&#39;s NamingEnumeration, attributes&#39; NamingEnumeration and values&#39; NamingEnumeration have to be closed, see <a href=\"https://www.avisi.nl/blog/2015/03/27/java-ldap-connection-pooling\" rel=\"nofollow noreferrer\">avisi.nl/blog/2015/03/27/java-ldap-connection-pooling</a>"}],"answers":[{"tags":[],"owner":{"account_id":15578381,"reputation":1,"user_id":13521556,"display_name":"Tibor Lipusz"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1589238316,"creation_date":1589238316,"answer_id":61740930,"question_id":59349715,"body_markdown":"Based on the &quot;*What Gets Pooled*&quot; section of https://docs.oracle.com/javase/jndi/tutorial/ldap/connect/config.html it&#39;s probably the custom socket factory that is disabling pooling:\r\n\r\n&gt; There are a couple of environment properties that automatically\r\n&gt; disqualify a Context instance from using a pooled connection. A\r\n&gt; Context instance cannot use a pooled connection if it has its\r\n&gt; &quot;java.naming.ldap.factory.socket&quot; property set to a custom socket\r\n&gt; factory class (...)","title":"JNDI LDAP Pooled Connections","body":"<p>Based on the \"<em>What Gets Pooled</em>\" section of <a href=\"https://docs.oracle.com/javase/jndi/tutorial/ldap/connect/config.html\" rel=\"nofollow noreferrer\">https://docs.oracle.com/javase/jndi/tutorial/ldap/connect/config.html</a> it's probably the custom socket factory that is disabling pooling:</p>\n\n<blockquote>\n  <p>There are a couple of environment properties that automatically\n  disqualify a Context instance from using a pooled connection. A\n  Context instance cannot use a pooled connection if it has its\n  \"java.naming.ldap.factory.socket\" property set to a custom socket\n  factory class (...)</p>\n</blockquote>\n"},{"tags":[],"owner":{"account_id":26454911,"reputation":1,"user_id":20097598,"display_name":"jitsni"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1664261651,"creation_date":1664261586,"answer_id":73863457,"question_id":59349715,"body_markdown":"From the ClientId code, the factory needs to implement `Comparator&lt;String&gt;` not `Comparator&lt;SocketFactory&gt;`. Socket factory class name is passed to the comparator.","title":"JNDI LDAP Pooled Connections","body":"<p>From the ClientId code, the factory needs to implement <code>Comparator&lt;String&gt;</code> not <code>Comparator&lt;SocketFactory&gt;</code>. Socket factory class name is passed to the comparator.</p>\n"}],"owner":{"account_id":1746243,"reputation":788,"user_id":1596398,"accept_rate":58,"display_name":"Hmmmmm"},"comment_count":8,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":2303,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1664261651,"creation_date":1576461482,"question_id":59349715,"body_markdown":"My JNDI connection pooling doesn&#39;t seem to be working as expected. When I run my test I see that new connections are created each time. The connections succeed (as in I can query against Active Directory just fine) but they aren&#39;t pooling as I expect them to. Here are some important notes about my setup:\r\n\r\n1. Connection is going over SSL (i.e., ldaps)\r\n\r\n2. Using a custom socket factory\r\n\r\n3. Authentication to AD is done via &quot;simple&quot; authentication\r\n\r\n4. Using the default pool configuration values (for now)\r\n\r\nHere is the relevant code:\r\n\r\n**TestLdapsPooling.java**\r\n\r\n``` lang-java\r\npublic class TestLdapsPooling {\r\n\r\n\tpublic static void main(String[] args) throws Exception {\r\n        // needed system properties\r\n        System.setProperty(&quot;com.sun.jndi.ldap.connect.pool.protocol&quot;, &quot;ssl&quot;);\r\n        System.setProperty(&quot;com.sun.jndi.ldap.connect.pool.debug&quot;, &quot;fine&quot;);\r\n\r\n        Hashtable&lt;String, String&gt; env = new Hashtable&lt;&gt;();\r\n\t\tenv.put(Context.INITIAL_CONTEXT_FACTORY, &quot;com.sun.jndi.ldap.LdapCtxFactory&quot;);\r\n\t\tenv.put(Context.PROVIDER_URL, host);\r\n\r\n\t\t// use ssl\r\n\t\tenv.put(Context.SECURITY_PROTOCOL, &quot;ssl&quot;);\r\n\r\n        // authentication info\r\n        env.put(Context.SECURITY_AUTHENTICATION, &quot;simple&quot;); \r\n\t\tenv.put(Context.SECURITY_PRINCIPAL, username); \r\n\t\tenv.put(Context.SECURITY_CREDENTIALS, password); \r\n\r\n        // custom socket factory\r\n        env.put(&quot;java.naming.ldap.factory.socket&quot;, &quot;ldap.TrustedSocketFactory&quot;);\r\n\r\n        // Enable connection pooling\r\n\t    env.put(&quot;com.sun.jndi.ldap.connect.pool&quot;, &quot;true&quot;);\r\n\r\n        // Create the initial context\r\n\t\tInitialDirContext context =  new InitialDirContext(env);\r\n\t\tSystem.out.println(&quot;First context created&quot;);\r\n\r\n        // Create a second context\r\n\t\tInitialDirContext context2 =  new InitialDirContext(env);\r\n\t\tSystem.out.println(&quot;Second context created&quot;);\r\n\r\n        // close first context\r\n\t\tcontext.close();\r\n\t\tSystem.out.println(&quot;First context closed&quot;);\r\n\r\n        // close second context\r\n\t\tcontext2.close();\r\n\t    System.out.println(&quot;Second context closed&quot;);\r\n\r\n        // Create a third context - I would expect this to use a connection from the pool\r\n\t\tInitialDirContext context3 =  new InitialDirContext(env);\r\n\t\tSystem.out.println(&quot;Third context created&quot;);\r\n\r\n        // close third context\r\n        context3.close();\r\n\t    System.out.println(&quot;Third context closed&quot;);\r\n    }\r\n}\r\n```\r\n\r\n**TrustedSocketFactory.java**\r\n\r\n``` lang-java\r\npublic class TrustedSocketFactory extends SSLSocketFactory implements Comparator&lt;SocketFactory&gt; {\r\n\r\n    // all the methods required from SSLSocketFactory\r\n\r\n    @Override\r\n\tpublic int compare(SocketFactory arg0, SocketFactory arg1) {\r\n\t\t// not really sure what this value should be \r\n        // is this causing the pooling issue?\r\n\t\treturn 0;\r\n\t}\r\n\r\n}\r\n```\r\n\r\n**Output**:\r\n``` lang-none\r\nCreate com.sun.jndi.ldap.LdapClient@3f0ee7cb[testdomain.com:636]\r\nUse com.sun.jndi.ldap.LdapClient@3f0ee7cb\r\nFirst context created\r\nCreate com.sun.jndi.ldap.LdapClient@75bd9247[testdomain.com:636]\r\nUse com.sun.jndi.ldap.LdapClient@75bd9247\r\nSecond context created\r\nRelease com.sun.jndi.ldap.LdapClient@3f0ee7cb\r\nFirst context closed\r\nRelease com.sun.jndi.ldap.LdapClient@75bd9247\r\nSecond context closed\r\nCreate com.sun.jndi.ldap.LdapClient@7d417077[testdomain.com:636]\r\nUse com.sun.jndi.ldap.LdapClient@7d417077\r\nThird context created\r\nRelease com.sun.jndi.ldap.LdapClient@7d417077\r\nThird context closed\r\n```\r\n\r\nI would expect the third context to have reused one of the first two connections but the output looks like it creates its own connection. What do I need to change in order for the connection to be reused instead of a new connection being created?","title":"JNDI LDAP Pooled Connections","body":"<p>My JNDI connection pooling doesn't seem to be working as expected. When I run my test I see that new connections are created each time. The connections succeed (as in I can query against Active Directory just fine) but they aren't pooling as I expect them to. Here are some important notes about my setup:</p>\n\n<ol>\n<li><p>Connection is going over SSL (i.e., ldaps)</p></li>\n<li><p>Using a custom socket factory</p></li>\n<li><p>Authentication to AD is done via \"simple\" authentication</p></li>\n<li><p>Using the default pool configuration values (for now)</p></li>\n</ol>\n\n<p>Here is the relevant code:</p>\n\n<p><strong>TestLdapsPooling.java</strong></p>\n\n<pre class=\"lang-java prettyprint-override\"><code>public class TestLdapsPooling {\n\n    public static void main(String[] args) throws Exception {\n        // needed system properties\n        System.setProperty(\"com.sun.jndi.ldap.connect.pool.protocol\", \"ssl\");\n        System.setProperty(\"com.sun.jndi.ldap.connect.pool.debug\", \"fine\");\n\n        Hashtable&lt;String, String&gt; env = new Hashtable&lt;&gt;();\n        env.put(Context.INITIAL_CONTEXT_FACTORY, \"com.sun.jndi.ldap.LdapCtxFactory\");\n        env.put(Context.PROVIDER_URL, host);\n\n        // use ssl\n        env.put(Context.SECURITY_PROTOCOL, \"ssl\");\n\n        // authentication info\n        env.put(Context.SECURITY_AUTHENTICATION, \"simple\"); \n        env.put(Context.SECURITY_PRINCIPAL, username); \n        env.put(Context.SECURITY_CREDENTIALS, password); \n\n        // custom socket factory\n        env.put(\"java.naming.ldap.factory.socket\", \"ldap.TrustedSocketFactory\");\n\n        // Enable connection pooling\n        env.put(\"com.sun.jndi.ldap.connect.pool\", \"true\");\n\n        // Create the initial context\n        InitialDirContext context =  new InitialDirContext(env);\n        System.out.println(\"First context created\");\n\n        // Create a second context\n        InitialDirContext context2 =  new InitialDirContext(env);\n        System.out.println(\"Second context created\");\n\n        // close first context\n        context.close();\n        System.out.println(\"First context closed\");\n\n        // close second context\n        context2.close();\n        System.out.println(\"Second context closed\");\n\n        // Create a third context - I would expect this to use a connection from the pool\n        InitialDirContext context3 =  new InitialDirContext(env);\n        System.out.println(\"Third context created\");\n\n        // close third context\n        context3.close();\n        System.out.println(\"Third context closed\");\n    }\n}\n</code></pre>\n\n<p><strong>TrustedSocketFactory.java</strong></p>\n\n<pre class=\"lang-java prettyprint-override\"><code>public class TrustedSocketFactory extends SSLSocketFactory implements Comparator&lt;SocketFactory&gt; {\n\n    // all the methods required from SSLSocketFactory\n\n    @Override\n    public int compare(SocketFactory arg0, SocketFactory arg1) {\n        // not really sure what this value should be \n        // is this causing the pooling issue?\n        return 0;\n    }\n\n}\n</code></pre>\n\n<p><strong>Output</strong>:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>Create com.sun.jndi.ldap.LdapClient@3f0ee7cb[testdomain.com:636]\nUse com.sun.jndi.ldap.LdapClient@3f0ee7cb\nFirst context created\nCreate com.sun.jndi.ldap.LdapClient@75bd9247[testdomain.com:636]\nUse com.sun.jndi.ldap.LdapClient@75bd9247\nSecond context created\nRelease com.sun.jndi.ldap.LdapClient@3f0ee7cb\nFirst context closed\nRelease com.sun.jndi.ldap.LdapClient@75bd9247\nSecond context closed\nCreate com.sun.jndi.ldap.LdapClient@7d417077[testdomain.com:636]\nUse com.sun.jndi.ldap.LdapClient@7d417077\nThird context created\nRelease com.sun.jndi.ldap.LdapClient@7d417077\nThird context closed\n</code></pre>\n\n<p>I would expect the third context to have reused one of the first two connections but the output looks like it creates its own connection. What do I need to change in order for the connection to be reused instead of a new connection being created?</p>\n"},{"tags":["java","android","firebase","google-cloud-platform","google-cloud-firestore"],"comments":[{"owner":{"account_id":6819231,"reputation":132841,"user_id":5246885,"accept_rate":78,"display_name":"Alex Mamo"},"score":0,"creation_date":1664205633,"post_id":73855797,"comment_id":130412447,"body_markdown":"I provided that answer, and yes, it&#39;s a working solution. Besides that, &quot;it is stopping&quot; doesn&#39;t provide enough information so we can help. If the app crashes, there is a stack trace. Please look that up on logcat, and add it to your question.","body":"I provided that answer, and yes, it&#39;s a working solution. Besides that, &quot;it is stopping&quot; doesn&#39;t provide enough information so we can help. If the app crashes, there is a stack trace. Please look that up on logcat, and add it to your question."},{"owner":{"display_name":"user20008723"},"score":0,"creation_date":1664213525,"post_id":73855797,"comment_id":130415124,"body_markdown":"@Alex Mamo sir it is working but I have some doubt about what the limit() means here and second I want to implement the progress bar(i have added the image) please check sir","body":"@Alex Mamo sir it is working but I have some doubt about what the limit() means here and second I want to implement the progress bar(i have added the image) please check sir"},{"owner":{"account_id":6819231,"reputation":132841,"user_id":5246885,"accept_rate":78,"display_name":"Alex Mamo"},"score":0,"creation_date":1664213857,"post_id":73855797,"comment_id":130415222,"body_markdown":"The limit that is set in order to paginate the results, it&#39;s **15**. To implement a ProgressBar you need to display it when you perform the request and hide it, once you got the data.","body":"The limit that is set in order to paginate the results, it&#39;s <b>15</b>. To implement a ProgressBar you need to display it when you perform the request and hide it, once you got the data."},{"owner":{"display_name":"user20008723"},"score":0,"creation_date":1664252420,"post_id":73855797,"comment_id":130422783,"body_markdown":"@AlexMamo so if I set my limit to 5 or 6 it mean it will load 6 items first?? sir I set the limit 5 and then it just showing me only 5 items in recyclerview sir","body":"@AlexMamo so if I set my limit to 5 or 6 it mean it will load 6 items first?? sir I set the limit 5 and then it just showing me only 5 items in recyclerview sir"},{"owner":{"account_id":6819231,"reputation":132841,"user_id":5246885,"accept_rate":78,"display_name":"Alex Mamo"},"score":0,"creation_date":1664256758,"post_id":73855797,"comment_id":130423396,"body_markdown":"Yes, it will load 5 and then other 5 elements, and so on until you reach the end.","body":"Yes, it will load 5 and then other 5 elements, and so on until you reach the end."},{"owner":{"display_name":"user20008723"},"score":0,"creation_date":1664257234,"post_id":73855797,"comment_id":130423494,"body_markdown":"but sir in my case it is not loading after five i am trying to scroll no data is coming","body":"but sir in my case it is not loading after five i am trying to scroll no data is coming"},{"owner":{"display_name":"user20008723"},"score":0,"creation_date":1664257270,"post_id":73855797,"comment_id":130423501,"body_markdown":"my code is same as i have added above sir please check","body":"my code is same as i have added above sir please check"},{"owner":{"account_id":6819231,"reputation":132841,"user_id":5246885,"accept_rate":78,"display_name":"Alex Mamo"},"score":0,"creation_date":1664257374,"post_id":73855797,"comment_id":130423521,"body_markdown":"Most likely it is not the same, since it doesn&#39;t work.","body":"Most likely it is not the same, since it doesn&#39;t work."},{"owner":{"display_name":"user20008723"},"score":0,"creation_date":1664257431,"post_id":73855797,"comment_id":130423526,"body_markdown":"so what is the problem sir","body":"so what is the problem sir"},{"owner":{"account_id":6819231,"reputation":132841,"user_id":5246885,"accept_rate":78,"display_name":"Alex Mamo"},"score":0,"creation_date":1664258154,"post_id":73855797,"comment_id":130423670,"body_markdown":"StackOverflow is an inefficient interactive debugger. So y ou should debug the issue your self.","body":"StackOverflow is an inefficient interactive debugger. So y ou should debug the issue your self."},{"owner":{"display_name":"user20008723"},"score":0,"creation_date":1664259249,"post_id":73855797,"comment_id":130423896,"body_markdown":"@AlexMamo sir it is throwing an error please check i have added above","body":"@AlexMamo sir it is throwing an error please check i have added above"},{"owner":{"display_name":"user20008723"},"score":0,"creation_date":1664262352,"post_id":73855797,"comment_id":130424672,"body_markdown":"@AlexMamo sir i have implemented this same code in my dummy app (only collection) where it is working fine but in my nested collection app this is not working","body":"@AlexMamo sir i have implemented this same code in my dummy app (only collection) where it is working fine but in my nested collection app this is not working"}],"answers":[{"tags":[],"owner":{"account_id":6819231,"reputation":132841,"user_id":5246885,"accept_rate":78,"display_name":"Alex Mamo"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1664261079,"creation_date":1664261079,"answer_id":73863382,"question_id":73855797,"body_markdown":"According to your last edit, you are getting the following error:\r\n\r\n&gt; ClassCastException: com.google.firebase.firestore.Query cannot be cast to com.google.firebase.firestore.CollectionReference\r\n\r\nBecause you are trying to save an object of type [Query][1] into a variable of type [CollectionReference][2] at the following line of code:\r\n\r\n    CollectionReference productsRef =  firebaseFirestore.collectionGroup(&quot;room_details&quot;);\r\n\r\nWhich is actually not possible in Java. Why? Because the Query class, doesn&#39;t extend the CollectionReference, it&#39;s exactly vice versa, hence the error. Please note [FirebaseFirestore#collectionGroup(String collectionId)][3] method,  returns an object of type Query and not CollectionReference. So to solve this, please change the above line of code to:\r\n\r\n    Query productsRef =  firebaseFirestore.collectionGroup(&quot;room_details&quot;);\r\n    //&#128070;\r\n\r\nAnd your error will go away.\r\n\r\n  [1]: https://firebase.google.com/docs/reference/android/com/google/firebase/firestore/Query\r\n  [2]: https://firebase.google.com/docs/reference/android/com/google/firebase/firestore/CollectionReference\r\n  [3]: https://firebase.google.com/docs/reference/android/com/google/firebase/firestore/FirebaseFirestore#collectionGroup(java.lang.String)","title":"facing problems in Implementing pagination in firestore","body":"<p>According to your last edit, you are getting the following error:</p>\n<blockquote>\n<p>ClassCastException: com.google.firebase.firestore.Query cannot be cast to com.google.firebase.firestore.CollectionReference</p>\n</blockquote>\n<p>Because you are trying to save an object of type <a href=\"https://firebase.google.com/docs/reference/android/com/google/firebase/firestore/Query\" rel=\"nofollow noreferrer\">Query</a> into a variable of type <a href=\"https://firebase.google.com/docs/reference/android/com/google/firebase/firestore/CollectionReference\" rel=\"nofollow noreferrer\">CollectionReference</a> at the following line of code:</p>\n<pre><code>CollectionReference productsRef =  firebaseFirestore.collectionGroup(&quot;room_details&quot;);\n</code></pre>\n<p>Which is actually not possible in Java. Why? Because the Query class, doesn't extend the CollectionReference, it's exactly vice versa, hence the error. Please note <a href=\"https://firebase.google.com/docs/reference/android/com/google/firebase/firestore/FirebaseFirestore#collectionGroup(java.lang.String)\" rel=\"nofollow noreferrer\">FirebaseFirestore#collectionGroup(String collectionId)</a> method,  returns an object of type Query and not CollectionReference. So to solve this, please change the above line of code to:</p>\n<pre><code>Query productsRef =  firebaseFirestore.collectionGroup(&quot;room_details&quot;);\n//👆\n</code></pre>\n<p>And your error will go away.</p>\n"}],"owner":{"display_name":"user20008723"},"comment_count":12,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":107,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":73863382,"answer_count":1,"score":1,"last_activity_date":1664261104,"creation_date":1664203252,"question_id":73855797,"body_markdown":"I am trying to implement pagination in my app I have a lot of data in my Firestore and I want to implement pagination with a progress bar. I have read many documents but all are confusing and most of in Kotlin, I need them in java. Please guide me. \r\n\r\nI found the following guide by Alex Memo Sir\r\n[https://stackoverflow.com/questions/50741958/how-to-paginate-firestore-with-android][1]\r\n\r\n\r\nbut there are some doubts, one is what is the limit in it I am using it and my data is not showing after 15 items it is stopping??\r\n\r\n**COMPLETE CODE FOR IT**\r\n\r\n       firebaseFirestore.collectionGroup(&quot;room_details&quot;).orderBy(&quot;title&quot;, Query.Direction.ASCENDING).limit(limit)\r\n                .get().addOnCompleteListener(new OnCompleteListener&lt;QuerySnapshot&gt;() {\r\n            @Override\r\n            public void onComplete(@NonNull Task&lt;QuerySnapshot&gt; task) {\r\n\r\n\r\n                progressBar.setVisibility(View.VISIBLE);\r\n                if (task.isSuccessful()) {\r\n                    for (DocumentSnapshot d : task.getResult()) {\r\n                        RoomsDetails obj = d.toObject(RoomsDetails.class);\r\n                        roomsDetails.add(obj);\r\n                    }\r\n\r\n                    roomsAdapter.notifyDataSetChanged();\r\n                }\r\n                lastVisible = task.getResult().getDocuments().get(task.getResult().size() - 1);\r\n\r\n                RecyclerView.OnScrollListener onScrollListener = new RecyclerView.OnScrollListener() {\r\n                    @Override\r\n                    public void onScrollStateChanged(@NonNull RecyclerView recyclerView, int newState) {\r\n                        super.onScrollStateChanged(recyclerView, newState);\r\n                        if (newState == AbsListView.OnScrollListener.SCROLL_STATE_TOUCH_SCROLL) {\r\n                            isScrolling = true;\r\n                            progressBar.setVisibility(View.GONE);\r\n                        }\r\n                    }\r\n\r\n                    @Override\r\n                    public void onScrolled(@NonNull RecyclerView recyclerView, int dx, int dy) {\r\n                        super.onScrolled(recyclerView, dx, dy);\r\n                        LinearLayoutManager linearLayoutManager = ((LinearLayoutManager) recyclerView.getLayoutManager());\r\n                        int firstVisibleItemPosition = linearLayoutManager.findFirstVisibleItemPosition();\r\n                        int visibleItemCount = linearLayoutManager.getChildCount();\r\n                        int totalItemCount = linearLayoutManager.getItemCount();\r\n\r\n                        if (isScrolling &amp;&amp; (firstVisibleItemPosition + visibleItemCount == totalItemCount) &amp;&amp; !isLastItemReached) {\r\n                            isScrolling = false;\r\n                            Query nextQuery = firebaseFirestore.collectionGroup(&quot;room_details&quot;).orderBy(&quot;title&quot;, Query.Direction.ASCENDING).startAfter(lastVisible).limit(limit);\r\n                            nextQuery.get().addOnCompleteListener(new OnCompleteListener&lt;QuerySnapshot&gt;() {\r\n                                @Override\r\n                                public void onComplete(@NonNull Task&lt;QuerySnapshot&gt; t) {\r\n                                    if (t.isSuccessful()) {\r\n                                        for (DocumentSnapshot d : t.getResult()) {\r\n                                            RoomsDetails productModel = d.toObject(RoomsDetails.class);\r\n                                            roomsDetails.add(productModel);\r\n                                        }\r\n                                        roomsAdapter.notifyDataSetChanged();\r\n                                        lastVisible = t.getResult().getDocuments().get(t.getResult().size() - 1);\r\n\r\n                                        if (t.getResult().size() &lt; limit) {\r\n                                            isLastItemReached = true;\r\n                                        }\r\n                                    }\r\n                                }\r\n                            });\r\n                        }\r\n                    }\r\n                };\r\n\r\n                recyclerViewRooms.addOnScrollListener(onScrollListener);\r\n\r\n\r\n            }\r\n        });\r\n    }\r\n\r\n**I have two doubts sir one is I want to add a Progress bar like this sir how can I implement it?? and second is what is limit() means here(on the first line)**\r\n[![enter image description here][2]][2]\r\n\r\n\r\n  [1]: https://stackoverflow.com/questions/50741958/how-to-paginate-firestore-with-android\r\n  [2]: https://i.stack.imgur.com/Bjnf8.png\r\n\r\nIT IS THROWING AN ERROR SIR HERE\r\n\r\n        firebaseFirestore = FirebaseFirestore.getInstance();\r\n           //HERE SIR COLLECTION REFENCE IS GIVING ME ERROR SAYING ClassCastException: com.google.firebase.firestore.Query cannot be cast to com.google.firebase.firestore.CollectionReference\r\n            CollectionReference productsRef =  firebaseFirestore.collectionGroup(&quot;room_details&quot;);\r\n        Query query = productsRef.orderBy(&quot;title&quot;, Query.Direction.ASCENDING).limit(limit);","title":"facing problems in Implementing pagination in firestore","body":"<p>I am trying to implement pagination in my app I have a lot of data in my Firestore and I want to implement pagination with a progress bar. I have read many documents but all are confusing and most of in Kotlin, I need them in java. Please guide me.</p>\n<p>I found the following guide by Alex Memo Sir\n<a href=\"https://stackoverflow.com/questions/50741958/how-to-paginate-firestore-with-android\">How to paginate Firestore with Android?</a></p>\n<p>but there are some doubts, one is what is the limit in it I am using it and my data is not showing after 15 items it is stopping??</p>\n<p><strong>COMPLETE CODE FOR IT</strong></p>\n<pre><code>   firebaseFirestore.collectionGroup(&quot;room_details&quot;).orderBy(&quot;title&quot;, Query.Direction.ASCENDING).limit(limit)\n            .get().addOnCompleteListener(new OnCompleteListener&lt;QuerySnapshot&gt;() {\n        @Override\n        public void onComplete(@NonNull Task&lt;QuerySnapshot&gt; task) {\n\n\n            progressBar.setVisibility(View.VISIBLE);\n            if (task.isSuccessful()) {\n                for (DocumentSnapshot d : task.getResult()) {\n                    RoomsDetails obj = d.toObject(RoomsDetails.class);\n                    roomsDetails.add(obj);\n                }\n\n                roomsAdapter.notifyDataSetChanged();\n            }\n            lastVisible = task.getResult().getDocuments().get(task.getResult().size() - 1);\n\n            RecyclerView.OnScrollListener onScrollListener = new RecyclerView.OnScrollListener() {\n                @Override\n                public void onScrollStateChanged(@NonNull RecyclerView recyclerView, int newState) {\n                    super.onScrollStateChanged(recyclerView, newState);\n                    if (newState == AbsListView.OnScrollListener.SCROLL_STATE_TOUCH_SCROLL) {\n                        isScrolling = true;\n                        progressBar.setVisibility(View.GONE);\n                    }\n                }\n\n                @Override\n                public void onScrolled(@NonNull RecyclerView recyclerView, int dx, int dy) {\n                    super.onScrolled(recyclerView, dx, dy);\n                    LinearLayoutManager linearLayoutManager = ((LinearLayoutManager) recyclerView.getLayoutManager());\n                    int firstVisibleItemPosition = linearLayoutManager.findFirstVisibleItemPosition();\n                    int visibleItemCount = linearLayoutManager.getChildCount();\n                    int totalItemCount = linearLayoutManager.getItemCount();\n\n                    if (isScrolling &amp;&amp; (firstVisibleItemPosition + visibleItemCount == totalItemCount) &amp;&amp; !isLastItemReached) {\n                        isScrolling = false;\n                        Query nextQuery = firebaseFirestore.collectionGroup(&quot;room_details&quot;).orderBy(&quot;title&quot;, Query.Direction.ASCENDING).startAfter(lastVisible).limit(limit);\n                        nextQuery.get().addOnCompleteListener(new OnCompleteListener&lt;QuerySnapshot&gt;() {\n                            @Override\n                            public void onComplete(@NonNull Task&lt;QuerySnapshot&gt; t) {\n                                if (t.isSuccessful()) {\n                                    for (DocumentSnapshot d : t.getResult()) {\n                                        RoomsDetails productModel = d.toObject(RoomsDetails.class);\n                                        roomsDetails.add(productModel);\n                                    }\n                                    roomsAdapter.notifyDataSetChanged();\n                                    lastVisible = t.getResult().getDocuments().get(t.getResult().size() - 1);\n\n                                    if (t.getResult().size() &lt; limit) {\n                                        isLastItemReached = true;\n                                    }\n                                }\n                            }\n                        });\n                    }\n                }\n            };\n\n            recyclerViewRooms.addOnScrollListener(onScrollListener);\n\n\n        }\n    });\n}\n</code></pre>\n<p><strong>I have two doubts sir one is I want to add a Progress bar like this sir how can I implement it?? and second is what is limit() means here(on the first line)</strong>\n<a href=\"https://i.stack.imgur.com/Bjnf8.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Bjnf8.png\" alt=\"enter image description here\" /></a></p>\n<p>IT IS THROWING AN ERROR SIR HERE</p>\n<pre><code>    firebaseFirestore = FirebaseFirestore.getInstance();\n       //HERE SIR COLLECTION REFENCE IS GIVING ME ERROR SAYING ClassCastException: com.google.firebase.firestore.Query cannot be cast to com.google.firebase.firestore.CollectionReference\n        CollectionReference productsRef =  firebaseFirestore.collectionGroup(&quot;room_details&quot;);\n    Query query = productsRef.orderBy(&quot;title&quot;, Query.Direction.ASCENDING).limit(limit);\n</code></pre>\n"},{"tags":["java","unit-testing","junit","spring-data-jpa"],"answers":[{"tags":[],"owner":{"account_id":25822,"reputation":78747,"user_id":66686,"accept_rate":87,"display_name":"Jens Schauder"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1664261045,"creation_date":1664261045,"answer_id":73863374,"question_id":73857648,"body_markdown":"&gt; What should I test when using pageable like this? \r\n\r\n1. Does your SQL statement actually execute.\r\n2. Does it select the values you want.\r\n3. Does it not select the values you don&#39;t want.\r\n\r\nFor point 2 and three it is important to think about the possible values you might put in as a parameter.\r\n\r\n1. a valid user id.\r\n2. `null`\r\n\r\nTo perform these test you may create 3 groups, 2 users, and assign user 1 to groups 1 and 2 and user 2 to groups 2 and 3 and then query for one user and check that you get the correct result back. \r\nRepeat by query for `null` if that is possible in your application.\r\n\r\nYou check for the correct result by looking for the ids of the groups.\r\n\r\nYou might want to go beyond that:\r\n \r\n1. How does it perform with large amount of data\r\n2. Can you trigger errors with huge positive or negative values for `Id` or the `Pageable` \r\n3. ...\r\n\r\nBut these are specialized concerns and I&#39;ll ignore them for now since you are just starting with testing.\r\n\r\nThings you probably don&#39;t need to test:\r\n1. Are the `Group` objects instantiated correctly? Your JPA implementation does that for you. You might want to have a separate test of persisting and loading a `Group` instance to test your mapping, but don&#39;t mix that with the test we are talking about right now.\r\n2. That the `Page` is constructed correctly.\r\n3. That transactions are handled correctly.\r\n4. That connections are opened and closed correctly.\r\n5. ....\r\n\r\nAll that stuff is done by libraries and they are pretty well tested. \r\nThat doesn&#39;t mean they don&#39;t have bugs, but hunting for those by adding tests for your custom query doesn&#39;t sound like a good investment.\r\n\r\n&gt; Can somebody guide me on how to create this test when using pageable?\r\nI&#39;m not sure how `Pageable` is a problem here, since I wouldn&#39;t eve test for multiple pages. Just create a page using [`Pageable.ofSize(10)`][1] and be done with it.\r\n\r\n\r\n  [1]: https://docs.spring.io/spring-data/commons/docs/current/api/org/springframework/data/domain/Pageable.html#ofSize-int-","title":"How to test custom query in repository?","body":"<blockquote>\n<p>What should I test when using pageable like this?</p>\n</blockquote>\n<ol>\n<li>Does your SQL statement actually execute.</li>\n<li>Does it select the values you want.</li>\n<li>Does it not select the values you don't want.</li>\n</ol>\n<p>For point 2 and three it is important to think about the possible values you might put in as a parameter.</p>\n<ol>\n<li>a valid user id.</li>\n<li><code>null</code></li>\n</ol>\n<p>To perform these test you may create 3 groups, 2 users, and assign user 1 to groups 1 and 2 and user 2 to groups 2 and 3 and then query for one user and check that you get the correct result back.\nRepeat by query for <code>null</code> if that is possible in your application.</p>\n<p>You check for the correct result by looking for the ids of the groups.</p>\n<p>You might want to go beyond that:</p>\n<ol>\n<li>How does it perform with large amount of data</li>\n<li>Can you trigger errors with huge positive or negative values for <code>Id</code> or the <code>Pageable</code></li>\n<li>...</li>\n</ol>\n<p>But these are specialized concerns and I'll ignore them for now since you are just starting with testing.</p>\n<p>Things you probably don't need to test:</p>\n<ol>\n<li>Are the <code>Group</code> objects instantiated correctly? Your JPA implementation does that for you. You might want to have a separate test of persisting and loading a <code>Group</code> instance to test your mapping, but don't mix that with the test we are talking about right now.</li>\n<li>That the <code>Page</code> is constructed correctly.</li>\n<li>That transactions are handled correctly.</li>\n<li>That connections are opened and closed correctly.</li>\n<li>....</li>\n</ol>\n<p>All that stuff is done by libraries and they are pretty well tested.\nThat doesn't mean they don't have bugs, but hunting for those by adding tests for your custom query doesn't sound like a good investment.</p>\n<blockquote>\n<p>Can somebody guide me on how to create this test when using pageable?\nI'm not sure how <code>Pageable</code> is a problem here, since I wouldn't eve test for multiple pages. Just create a page using <a href=\"https://docs.spring.io/spring-data/commons/docs/current/api/org/springframework/data/domain/Pageable.html#ofSize-int-\" rel=\"nofollow noreferrer\"><code>Pageable.ofSize(10)</code></a> and be done with it.</p>\n</blockquote>\n"}],"owner":{"account_id":23727935,"reputation":117,"user_id":17747601,"display_name":"m_novak"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":202,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":73863374,"answer_count":1,"score":0,"last_activity_date":1664261045,"creation_date":1664212494,"question_id":73857648,"body_markdown":"I am learning how to create unit tests for my application and I don&#39;t know how to test custom query in repository.\r\n\r\nI have the following UserRepository where there is a custom query that returns groups that contain specific User IDs so that each user gets the groups they created.\r\n\r\n    @Repository\r\n    public interface UserRepository extends JpaRepositry&lt;User, Long&gt;{\r\n      @Query(&quot;select g from Group g where g.user.id = ?1&quot;)\r\n      Page&lt;Group&gt; findGroupByUserId(Long Id, Pageable pageable);\r\n    }\r\n\r\nAnd Im using this query like this:\r\n\r\n    public Page&lt;Group&gt; findGroupByUserId(Long Id, Pageable pageable){\r\n      return userRepository.findGroupByUserId(Id, pageable);\r\n    }\r\n\r\nSo my question is:\r\n\r\n1) What should I test when using pageable like this? If there are specific groups with user id or just if there is the right number of groups?\r\n\r\n2) Can somebody quide me on how to create this test when using pageable?","title":"How to test custom query in repository?","body":"<p>I am learning how to create unit tests for my application and I don't know how to test custom query in repository.</p>\n<p>I have the following UserRepository where there is a custom query that returns groups that contain specific User IDs so that each user gets the groups they created.</p>\n<pre><code>@Repository\npublic interface UserRepository extends JpaRepositry&lt;User, Long&gt;{\n  @Query(&quot;select g from Group g where g.user.id = ?1&quot;)\n  Page&lt;Group&gt; findGroupByUserId(Long Id, Pageable pageable);\n}\n</code></pre>\n<p>And Im using this query like this:</p>\n<pre><code>public Page&lt;Group&gt; findGroupByUserId(Long Id, Pageable pageable){\n  return userRepository.findGroupByUserId(Id, pageable);\n}\n</code></pre>\n<p>So my question is:</p>\n<ol>\n<li><p>What should I test when using pageable like this? If there are specific groups with user id or just if there is the right number of groups?</p>\n</li>\n<li><p>Can somebody quide me on how to create this test when using pageable?</p>\n</li>\n</ol>\n"},{"tags":["java","spring","spring-mvc","jpa","spring-data-jpa"],"answers":[{"tags":[],"owner":{"account_id":25822,"reputation":78747,"user_id":66686,"accept_rate":87,"display_name":"Jens Schauder"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1664259609,"creation_date":1664259609,"answer_id":73863140,"question_id":73862832,"body_markdown":"&gt; How can I avoid inserting multiple records?\r\n\r\nI would put a unique constraint on the table.\r\nThey exist exactly for that purpose are reliable and tuned for performance for dozens of years.\r\n\r\nIf you insist on doing this using `@Transactional` you&#39;d want to set the isolation level to [`SERIALIZABLE`][1]. I&#39;m not sure all databases support that so make sure to run some tests. \r\nThis puts sever limits on throughput, since it almost means that only one transaction at a time can proceed at any given time. \r\nAnd finally, I&#39;m not sure how that interacts with other transactions with other isolation levels.\r\n\r\n\r\n  [1]: https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/transaction/annotation/Isolation.html#SERIALIZABLE","title":"How to use the @Transactional annotation to avoid multiple inserts into a database when running multiple instances of an application?","body":"<blockquote>\n<p>How can I avoid inserting multiple records?</p>\n</blockquote>\n<p>I would put a unique constraint on the table.\nThey exist exactly for that purpose are reliable and tuned for performance for dozens of years.</p>\n<p>If you insist on doing this using <code>@Transactional</code> you'd want to set the isolation level to <a href=\"https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/transaction/annotation/Isolation.html#SERIALIZABLE\" rel=\"nofollow noreferrer\"><code>SERIALIZABLE</code></a>. I'm not sure all databases support that so make sure to run some tests.\nThis puts sever limits on throughput, since it almost means that only one transaction at a time can proceed at any given time.\nAnd finally, I'm not sure how that interacts with other transactions with other isolation levels.</p>\n"},{"tags":[],"owner":{"account_id":24881693,"reputation":155,"user_id":18754816,"display_name":"Игорь Ходыко"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1664260508,"creation_date":1664260508,"answer_id":73863282,"question_id":73862832,"body_markdown":"I suppose you have concurrency problem, at the moment of reading. Threads got an information about not existing row in the same moment.\r\nIn my opinion you need to synchronize this method.","title":"How to use the @Transactional annotation to avoid multiple inserts into a database when running multiple instances of an application?","body":"<p>I suppose you have concurrency problem, at the moment of reading. Threads got an information about not existing row in the same moment.\nIn my opinion you need to synchronize this method.</p>\n"}],"owner":{"account_id":11854236,"reputation":45,"user_id":8674624,"display_name":"Augustine Theodore"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":498,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"closed_date":1664260164,"accepted_answer_id":73863140,"answer_count":2,"score":1,"last_activity_date":1664260508,"creation_date":1664257216,"question_id":73862832,"body_markdown":"I have 2 instances of Spring application which has a method with the *@Transactional* annotation. The method receives a value and checks if the DB has a row with this value and simply inserts if it doesn&#39;t exist. \r\n\r\nWhen I&#39;m firing 4 concurrent calls to this method with a new value, I expected to see only 1 row to be inserted into the DB. However, I&#39;m observing that anywhere between 1 and 3 rows are getting inserted.\r\n\r\nHow can I avoid inserting multiple records?","title":"How to use the @Transactional annotation to avoid multiple inserts into a database when running multiple instances of an application?","body":"<p>I have 2 instances of Spring application which has a method with the <em>@Transactional</em> annotation. The method receives a value and checks if the DB has a row with this value and simply inserts if it doesn't exist.</p>\n<p>When I'm firing 4 concurrent calls to this method with a new value, I expected to see only 1 row to be inserted into the DB. However, I'm observing that anywhere between 1 and 3 rows are getting inserted.</p>\n<p>How can I avoid inserting multiple records?</p>\n"},{"tags":["java","spring","spring-boot"],"comments":[{"owner":{"account_id":1631680,"reputation":17783,"user_id":1506071,"accept_rate":68,"display_name":"Pradeep Simha"},"score":0,"creation_date":1664254667,"post_id":73862563,"comment_id":130423093,"body_markdown":"Search for &quot;profiles&quot; in spring-boot.","body":"Search for &quot;profiles&quot; in spring-boot."},{"owner":{"account_id":22039344,"reputation":1704,"user_id":16305340,"display_name":"abdo Salm"},"score":0,"creation_date":1664307432,"post_id":73862563,"comment_id":130440598,"body_markdown":"Please edit the question to limit it to a specific problem with enough detail to identify an adequate answer.","body":"Please edit the question to limit it to a specific problem with enough detail to identify an adequate answer."}],"answers":[{"tags":[],"owner":{"account_id":4297204,"reputation":2499,"user_id":9926179,"display_name":"b.s"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1664260320,"creation_date":1664260320,"answer_id":73863250,"question_id":73862563,"body_markdown":"&gt; Let suppose if we are deploying to test server, database connection in\r\n&gt; API project point to test database, and if deploy to production\r\n&gt; server, database automatically point to production server.\r\n\r\nThere&#39;re couple of ways. The first you can provide the properties values as part of env variables. Ex:  \r\n\r\n`-Ddb_url=jdbc:mysql://&lt;server&gt;:&lt;port&gt;/&lt;databasename&gt; -Ddb_username=root -Ddb_password=mysql`\r\n\r\n    spring.datasource.url=${db_url}\r\n    spring.datasource.username=${db_username}\r\n    spring.datasource.password=${db_password}\r\n\r\nor \r\n\r\nYou can use different properties files in accordance with different envs.\r\n\r\n    application.properties\r\n    application-test.properties\r\n    application-prod.properties\r\n\r\nIn these properties file you can pre-configured the addresses as per the profile. To activate the profile for particular env, you&#39;ve to provide the following prop to springboot application. Ex:\r\n\r\n    -Dspring.profiles.active=prod\r\n\r\nIn this case, `application.properties` file will be used first to configured the properties and then the properties from `application-prod.properties` will be configured. In case of matching properties in both the files, the later file&#39;s properties will override the properties in the default property file i.e `application.properties`.\r\n\r\n\r\n\r\n","title":"How to change database dynamically in Spring Boot?","body":"<blockquote>\n<p>Let suppose if we are deploying to test server, database connection in\nAPI project point to test database, and if deploy to production\nserver, database automatically point to production server.</p>\n</blockquote>\n<p>There're couple of ways. The first you can provide the properties values as part of env variables. Ex:</p>\n<p><code>-Ddb_url=jdbc:mysql://&lt;server&gt;:&lt;port&gt;/&lt;databasename&gt; -Ddb_username=root -Ddb_password=mysql</code></p>\n<pre><code>spring.datasource.url=${db_url}\nspring.datasource.username=${db_username}\nspring.datasource.password=${db_password}\n</code></pre>\n<p>or</p>\n<p>You can use different properties files in accordance with different envs.</p>\n<pre><code>application.properties\napplication-test.properties\napplication-prod.properties\n</code></pre>\n<p>In these properties file you can pre-configured the addresses as per the profile. To activate the profile for particular env, you've to provide the following prop to springboot application. Ex:</p>\n<pre><code>-Dspring.profiles.active=prod\n</code></pre>\n<p>In this case, <code>application.properties</code> file will be used first to configured the properties and then the properties from <code>application-prod.properties</code> will be configured. In case of matching properties in both the files, the later file's properties will override the properties in the default property file i.e <code>application.properties</code>.</p>\n"}],"owner":{"account_id":25658545,"reputation":1,"user_id":19424585,"display_name":"Ahmad Mujtaba"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":765,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1664260320,"creation_date":1664254567,"question_id":73862563,"body_markdown":"**How can we change database credentials and sources in Spring Boot project on run time or you can say dynamically?** Let suppose if we are deploying to test server, database connection in API project point to test database, and if deploy to production server, database automatically point to production server. Do some research what kind of config we need to set these settings in our spring boot project. Technically our project will switch to more than one database connections dynamically. \r\n\r\nHow all this process will happen in Spring boot?","title":"How to change database dynamically in Spring Boot?","body":"<p><strong>How can we change database credentials and sources in Spring Boot project on run time or you can say dynamically?</strong> Let suppose if we are deploying to test server, database connection in API project point to test database, and if deploy to production server, database automatically point to production server. Do some research what kind of config we need to set these settings in our spring boot project. Technically our project will switch to more than one database connections dynamically.</p>\n<p>How all this process will happen in Spring boot?</p>\n"},{"tags":["java","keystore"],"comments":[{"owner":{"account_id":12991330,"reputation":94,"user_id":9390458,"display_name":"&#199;iğdem Erşep&#231;iler"},"score":0,"creation_date":1663921468,"post_id":73824897,"comment_id":130357459,"body_markdown":"isn&#39;t password supposed to be string or char? why is it also FileInputStream?","body":"isn&#39;t password supposed to be string or char? why is it also FileInputStream?"},{"owner":{"account_id":2864238,"reputation":10897,"user_id":2458858,"accept_rate":85,"display_name":"tryingToLearn"},"score":0,"creation_date":1663921575,"post_id":73824897,"comment_id":130357497,"body_markdown":"@&#199;iğdemErşep&#231;iler it is char[] only","body":"@&#199;iğdemErşep&#231;iler it is char[] only"},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1663922110,"post_id":73824897,"comment_id":130357701,"body_markdown":"Try taking Bouncy Castle out of the classpath","body":"Try taking Bouncy Castle out of the classpath"}],"answers":[{"tags":[],"owner":{"account_id":2864238,"reputation":10897,"user_id":2458858,"accept_rate":85,"display_name":"tryingToLearn"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1664259569,"creation_date":1663924743,"answer_id":73825566,"question_id":73824897,"body_markdown":"I figured out the issue. It was this line:\r\n\r\n`KeyStore keystore = KeyStore.getInstance(KeyStore.getDefaultType());`\r\n\r\nBasically `KeyStore.getDefaultType()` returns `jks` in case of Java 8 while it returns `pkcs12` in java 11. \r\n\r\nAnd since my keystore is `jks` type, in java 11 it failed to load when keystore was getting initialised by default to `pkcs12`. \r\n\r\nChanging this line to `KeyStore.getInstance(&quot;jks&quot;)` fixed the issue.","title":"Java keystore load works fine on JDK 8 , but throws exception &quot;stream does not represent a PKCS12 key store&quot; on JDK 11","body":"<p>I figured out the issue. It was this line:</p>\n<p><code>KeyStore keystore = KeyStore.getInstance(KeyStore.getDefaultType());</code></p>\n<p>Basically <code>KeyStore.getDefaultType()</code> returns <code>jks</code> in case of Java 8 while it returns <code>pkcs12</code> in java 11.</p>\n<p>And since my keystore is <code>jks</code> type, in java 11 it failed to load when keystore was getting initialised by default to <code>pkcs12</code>.</p>\n<p>Changing this line to <code>KeyStore.getInstance(&quot;jks&quot;)</code> fixed the issue.</p>\n"}],"owner":{"account_id":2864238,"reputation":10897,"user_id":2458858,"accept_rate":85,"display_name":"tryingToLearn"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1007,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":73825566,"answer_count":1,"score":1,"last_activity_date":1664259569,"creation_date":1663921243,"question_id":73824897,"body_markdown":"I am importing certificates in Java Keystore programmatically. I referred [this SO post][1] for the same. \r\n\r\nEssentially from the post, the code works fine when compiled and run on Java 8. But on Java 11, `keystore.load` throws exception:\r\n\r\n    try {\r\n             \r\n            KeyStore keystore = KeyStore.getInstance(KeyStore.getDefaultType());\r\n            try (FileInputStream storeInputStream = new FileInputStream(keystorePath);) {\r\n\r\n                keystore.load(storeInputStream, storePassword); // storePassword is char[]\r\n                // rest of the stuff\r\n                \r\n        }\r\n\r\n\r\nException thrown by `keystore.load`:\r\n\r\n&gt; java.io.IOException: stream does not represent a PKCS12 key store \tat\r\n&gt; org.bouncycastle.jcajce.provider.ProvPKCS12$PKCS12KeyStoreSpi.engineLoad(Unknown\r\n&gt; Source) \tat java.base/java.security.KeyStore.load(KeyStore.java:1479)\r\n\r\n\r\nWhat could be the issue? I am assuming `.jks` files do not depend on Java version?\r\n\r\n  [1]: https://stackoverflow.com/q/18889058/2458858","title":"Java keystore load works fine on JDK 8 , but throws exception &quot;stream does not represent a PKCS12 key store&quot; on JDK 11","body":"<p>I am importing certificates in Java Keystore programmatically. I referred <a href=\"https://stackoverflow.com/q/18889058/2458858\">this SO post</a> for the same.</p>\n<p>Essentially from the post, the code works fine when compiled and run on Java 8. But on Java 11, <code>keystore.load</code> throws exception:</p>\n<pre><code>try {\n         \n        KeyStore keystore = KeyStore.getInstance(KeyStore.getDefaultType());\n        try (FileInputStream storeInputStream = new FileInputStream(keystorePath);) {\n\n            keystore.load(storeInputStream, storePassword); // storePassword is char[]\n            // rest of the stuff\n            \n    }\n</code></pre>\n<p>Exception thrown by <code>keystore.load</code>:</p>\n<blockquote>\n<p>java.io.IOException: stream does not represent a PKCS12 key store     at\norg.bouncycastle.jcajce.provider.ProvPKCS12$PKCS12KeyStoreSpi.engineLoad(Unknown\nSource)   at java.base/java.security.KeyStore.load(KeyStore.java:1479)</p>\n</blockquote>\n<p>What could be the issue? I am assuming <code>.jks</code> files do not depend on Java version?</p>\n"},{"tags":["java","spring","spring-boot","serialization","pojo"],"comments":[{"owner":{"account_id":680482,"reputation":26161,"user_id":664364,"accept_rate":82,"display_name":"Ariel"},"score":0,"creation_date":1605038852,"post_id":57635893,"comment_id":114529521,"body_markdown":"Look into @JsonView","body":"Look into @JsonView"}],"answers":[{"tags":[],"owner":{"account_id":796110,"reputation":10035,"user_id":869225,"accept_rate":50,"display_name":"Martin Frey"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1566632621,"creation_date":1566632621,"answer_id":57636053,"question_id":57635893,"body_markdown":"For dynamic filtering of simpler use cases i wrote an addon for jackson to use antpath style filtering. It should be exactly what you search.\r\n\r\nhttps://github.com/Antibrumm/jackson-antpathfilter\r\n","title":"Dynamic serialisation in spring using JsonFilter","body":"<p>For dynamic filtering of simpler use cases i wrote an addon for jackson to use antpath style filtering. It should be exactly what you search.</p>\n\n<p><a href=\"https://github.com/Antibrumm/jackson-antpathfilter\" rel=\"nofollow noreferrer\">https://github.com/Antibrumm/jackson-antpathfilter</a></p>\n"},{"tags":[],"owner":{"account_id":18537481,"reputation":1557,"user_id":13506812,"display_name":"abhinav kumar"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1623639729,"creation_date":1623639729,"answer_id":67964335,"question_id":57635893,"body_markdown":"Yes we can dynamically decide and create a generic filter.\r\n\r\n            ObjectMapper mapper = new ObjectMapper();\r\n            mapper.setSerializationInclusion(JsonInclude.Include.NON_NULL);\r\n            FilterProvider filters = new SimpleFilterProvider().setFailOnUnknownId(false).addFilter(&quot;CustomerFilter&quot;,\r\n                    SimpleBeanPropertyFilter.filterOutAllExcept(&quot;customerId&quot;));\r\n            ObjectWriter writer = mapper.writer(filters);\r\n            String writeValueAsString = writer.writeValueAsString(customer);\r\n            Customer resultCustomer = mapper.readValue(writeValueAsString, Customer.class);\r\n            return ResponseEntity.status(HttpStatus.OK).body(resultCustomer); \r\n\r\n\r\nIn above code snippet at place of creating filter you can pass set collection as a input.check below snippet\r\nAccept set as a method input which contains sometime x,y and sometimes w,x based on your requirements.\r\n\r\n    FilterProvider filters = new SimpleFilterProvider().setFailOnUnknownId(false).addFilter(&quot;CustomerFilter&quot;,\r\n                        SimpleBeanPropertyFilter.filterOutAllExcept(set));","title":"Dynamic serialisation in spring using JsonFilter","body":"<p>Yes we can dynamically decide and create a generic filter.</p>\n<pre><code>        ObjectMapper mapper = new ObjectMapper();\n        mapper.setSerializationInclusion(JsonInclude.Include.NON_NULL);\n        FilterProvider filters = new SimpleFilterProvider().setFailOnUnknownId(false).addFilter(&quot;CustomerFilter&quot;,\n                SimpleBeanPropertyFilter.filterOutAllExcept(&quot;customerId&quot;));\n        ObjectWriter writer = mapper.writer(filters);\n        String writeValueAsString = writer.writeValueAsString(customer);\n        Customer resultCustomer = mapper.readValue(writeValueAsString, Customer.class);\n        return ResponseEntity.status(HttpStatus.OK).body(resultCustomer); \n</code></pre>\n<p>In above code snippet at place of creating filter you can pass set collection as a input.check below snippet\nAccept set as a method input which contains sometime x,y and sometimes w,x based on your requirements.</p>\n<pre><code>FilterProvider filters = new SimpleFilterProvider().setFailOnUnknownId(false).addFilter(&quot;CustomerFilter&quot;,\n                    SimpleBeanPropertyFilter.filterOutAllExcept(set));\n</code></pre>\n"}],"owner":{"account_id":5561272,"reputation":394,"user_id":4410408,"accept_rate":21,"display_name":"Chandan"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":5410,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":2,"score":2,"last_activity_date":1664259536,"creation_date":1566630969,"question_id":57635893,"body_markdown":"I am trying to dynamically serialize a given POJO in spring boot 2.\r\nMy use case is, I have a very big model file and I want to retrieve only a subset of fields. The approach I found on the internet is using @JacksonFilter i.e annotate a POJO with @JsonFilter and use that filter name while serializing. \r\n\r\nBelow is the code sample\r\n    \r\n    @JsonFilter(&quot;myfilter&quot;)\r\n    class Resource1{\r\n      String firstName;\r\n      String lastName;\r\n      Address address;\r\n    }\r\n\r\n    class Address {\r\n     String addr1;\r\n     String addr2;\r\n     String zipcode;\r\n    }\r\n\r\nAnd when serializing, if I want only firstname I do this\r\n\r\n    SimpleFilterProvider filterProvider = new SimpleFilterProvider();\r\n    filterProvider.addFilter(&quot;myfilter&quot;, SimpleBeanPropertyFilter.filterOutAllExcept(&quot;firstName&quot;));\r\n    \r\n    ObjectMapper mapper = new ObjectMapper();\r\n    mapper.setFilterProvider(filterProvider);\r\n    mapper.writeValueAsString(resource1_instance); // Resource 1 instance\r\n\r\nNow for eg I want to filter another POJO I need to declare JsonFilter for that given class and this repeats for any given POJO.\r\n\r\nMy concern is, in order to dynamically serialize only subset of fields, for every given POJO we need to add @JsonFilter(&quot;suitable_name&quot;) and serialize it. \r\n\r\nIs there a way to declare a generic @JsonFilter and reuse it just like the inheritance concept. \r\n\r\nIf I use @JsonIgnore that would be static and fixed. \r\n\r\nMy requirement is if a model has v,w,x,y,z attributes and I request only x,y attributes at run time, a generic filter that would serialize only x,y attributes of POJO and give me back\r\n\r\nAny suggestion on this would be of great help. Thanks in advance","title":"Dynamic serialisation in spring using JsonFilter","body":"<p>I am trying to dynamically serialize a given POJO in spring boot 2.\nMy use case is, I have a very big model file and I want to retrieve only a subset of fields. The approach I found on the internet is using @JacksonFilter i.e annotate a POJO with @JsonFilter and use that filter name while serializing.</p>\n<p>Below is the code sample</p>\n<pre><code>@JsonFilter(&quot;myfilter&quot;)\nclass Resource1{\n  String firstName;\n  String lastName;\n  Address address;\n}\n\nclass Address {\n String addr1;\n String addr2;\n String zipcode;\n}\n</code></pre>\n<p>And when serializing, if I want only firstname I do this</p>\n<pre><code>SimpleFilterProvider filterProvider = new SimpleFilterProvider();\nfilterProvider.addFilter(&quot;myfilter&quot;, SimpleBeanPropertyFilter.filterOutAllExcept(&quot;firstName&quot;));\n\nObjectMapper mapper = new ObjectMapper();\nmapper.setFilterProvider(filterProvider);\nmapper.writeValueAsString(resource1_instance); // Resource 1 instance\n</code></pre>\n<p>Now for eg I want to filter another POJO I need to declare JsonFilter for that given class and this repeats for any given POJO.</p>\n<p>My concern is, in order to dynamically serialize only subset of fields, for every given POJO we need to add @JsonFilter(&quot;suitable_name&quot;) and serialize it.</p>\n<p>Is there a way to declare a generic @JsonFilter and reuse it just like the inheritance concept.</p>\n<p>If I use @JsonIgnore that would be static and fixed.</p>\n<p>My requirement is if a model has v,w,x,y,z attributes and I request only x,y attributes at run time, a generic filter that would serialize only x,y attributes of POJO and give me back</p>\n<p>Any suggestion on this would be of great help. Thanks in advance</p>\n"},{"tags":["java","junit","mockito"],"comments":[{"owner":{"account_id":2818342,"reputation":299858,"user_id":2422776,"display_name":"Mureinik"},"score":3,"creation_date":1661021791,"post_id":73427397,"comment_id":129673797,"body_markdown":"The easiest approach would probably be to extract a method that creates the `TransactionSynchronizationAdapter` and mock that.","body":"The easiest approach would probably be to extract a method that creates the <code>TransactionSynchronizationAdapter</code> and mock that."},{"owner":{"account_id":4012793,"reputation":1627,"user_id":3305737,"display_name":"Jonasz"},"score":0,"creation_date":1661186647,"post_id":73427397,"comment_id":129706885,"body_markdown":"Approach described above would be best, but you could also try using [mockConstruction](https://www.davidvlijmincx.com/posts/mockito_mock_constructor/).","body":"Approach described above would be best, but you could also try using <a href=\"https://www.davidvlijmincx.com/posts/mockito_mock_constructor/\" rel=\"nofollow noreferrer\">mockConstruction</a>."},{"owner":{"account_id":26115567,"reputation":17,"user_id":19808772,"display_name":"Soumya Khanda"},"score":0,"creation_date":1661234187,"post_id":73427397,"comment_id":129716166,"body_markdown":"@Jonasz I tried your approach but it shows this error: org.mockito.exceptions.base.MockitoException: It is not possible to construct primitive types or abstract types: org.springframework.transaction.support.TransactionSynchronizationAdapter","body":"@Jonasz I tried your approach but it shows this error: org.mockito.exceptions.base.MockitoException: It is not possible to construct primitive types or abstract types: org.springframework.transaction.support.TransactionSynchroni&zwnj;&#8203;zationAdapter"},{"owner":{"account_id":26115567,"reputation":17,"user_id":19808772,"display_name":"Soumya Khanda"},"score":0,"creation_date":1661234239,"post_id":73427397,"comment_id":129716182,"body_markdown":"@Mureinik can you please elaborate, didn&#39;t get your point","body":"@Mureinik can you please elaborate, didn&#39;t get your point"},{"owner":{"account_id":2818342,"reputation":299858,"user_id":2422776,"display_name":"Mureinik"},"score":1,"creation_date":1661250719,"post_id":73427397,"comment_id":129721599,"body_markdown":"@SoumyaKhanda added an answer with some elaborations. Hope this helps.","body":"@SoumyaKhanda added an answer with some elaborations. Hope this helps."},{"owner":{"account_id":3380632,"reputation":14294,"user_id":2837741,"accept_rate":100,"display_name":"daniu"},"score":0,"creation_date":1661251122,"post_id":73427397,"comment_id":129721749,"body_markdown":"One of your issues is that `TransactionSynchronizationManager#registerSynchronization` is static. If the manager were an instance and member of the tested class, you could use and argument captor.","body":"One of your issues is that <code>TransactionSynchronizationManager#registerSynchronization</code> is static. If the manager were an instance and member of the tested class, you could use and argument captor."}],"answers":[{"tags":[],"owner":{"account_id":2818342,"reputation":299858,"user_id":2422776,"display_name":"Mureinik"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1661250702,"creation_date":1661250702,"answer_id":73457125,"question_id":73427397,"body_markdown":"Elaborating on my suggestion from the comments:\r\n\r\nFirst, I&#39;d refactor the &quot;production&quot; code so that the `TransactionSynchronizationAdapter` is produced by a method:\r\n\r\n```java\r\npublic class MyRealClass {\r\n    private void addTransactionLifeCycleMethods(\r\n        Map&lt;Integer, ForecastRunDTO&gt; newRunDTOs, Boolean isSystemTriggeredActualComputation) {\r\n        TransactionSynchronizationManager.registerSynchronization(\r\n            getTransactionSynchronizationAdapter());\r\n    }\r\n\r\n    protected TransactionSynchronizationAdapter getTransactionSynchronizationAdapter() {\r\n        return new TransactionSynchronizationAdapter() {\r\n                @Override\r\n                public void afterCompletion(int status) {\r\n                    // Cover this using mockito\r\n                    }\r\n                }\r\n            });\r\n        };\r\n    }\r\n\r\n    // rest of the class....\r\n}\r\n```\r\n\r\nYou can then use mockito so `spy` that method and return a mock object with any arbitrary behavior you need for your test:\r\n\r\n```java\r\npublic class MyRealClassTest {\r\n    private MyRealClass underTest;\r\n\r\n    @BeforeEach\r\n    public void setUp() {\r\n        TransactionSynchronizationAdapter mockTSA = \r\n            Mockito.mock(TransactionSynchronizationAdapter.class);\r\n        // Add behavior to the mock using Mockito.when\r\n\r\n        underTest = Mockito.spy(new MyRealClass());\r\n        Mockito.doReturn(mockTSA).when(underTest).getTransactionSynchronizationAdapter();\r\n    }\r\n\r\n    // tests ...\r\n}","title":"Writing junit(mockito) for a public method and cover private method called inside it","body":"<p>Elaborating on my suggestion from the comments:</p>\n<p>First, I'd refactor the &quot;production&quot; code so that the <code>TransactionSynchronizationAdapter</code> is produced by a method:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class MyRealClass {\n    private void addTransactionLifeCycleMethods(\n        Map&lt;Integer, ForecastRunDTO&gt; newRunDTOs, Boolean isSystemTriggeredActualComputation) {\n        TransactionSynchronizationManager.registerSynchronization(\n            getTransactionSynchronizationAdapter());\n    }\n\n    protected TransactionSynchronizationAdapter getTransactionSynchronizationAdapter() {\n        return new TransactionSynchronizationAdapter() {\n                @Override\n                public void afterCompletion(int status) {\n                    // Cover this using mockito\n                    }\n                }\n            });\n        };\n    }\n\n    // rest of the class....\n}\n</code></pre>\n<p>You can then use mockito so <code>spy</code> that method and return a mock object with any arbitrary behavior you need for your test:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class MyRealClassTest {\n    private MyRealClass underTest;\n\n    @BeforeEach\n    public void setUp() {\n        TransactionSynchronizationAdapter mockTSA = \n            Mockito.mock(TransactionSynchronizationAdapter.class);\n        // Add behavior to the mock using Mockito.when\n\n        underTest = Mockito.spy(new MyRealClass());\n        Mockito.doReturn(mockTSA).when(underTest).getTransactionSynchronizationAdapter();\n    }\n\n    // tests ...\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":26115567,"reputation":17,"user_id":19808772,"display_name":"Soumya Khanda"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1661629099,"creation_date":1661283090,"answer_id":73464219,"question_id":73427397,"body_markdown":"This worked for me. First, calling the public method() so that the line TransactionSynchronizationManager.registerSynchronization(new TransactionSynchronizationAdapter() could be executed. Then we&#39;re fetching the object created and using it to access afterCompletion()\r\n\r\n\r\n                public MainClass {\r\n                      public void method() {\r\n                      .......\r\n                      addTransactionLifeCycleMethods(Map&lt;Integer, ForecastRunDTO&gt; newRunDTOs, Boolean isSystemTriggeredActualComputation);\r\n                      }\r\n                      private void addTransactionLifeCycleMethods(Map&lt;Integer, ForecastRunDTO&gt; newRunDTOs, Boolean isSystemTriggeredActualComputation) {\r\n                    TransactionSynchronizationManager.registerSynchronization(new TransactionSynchronizationAdapter() {\r\n                        @Override\r\n                        public void afterCompletion(int status) {\r\n                            // Cover this using mockito\r\n                            }\r\n                    });\r\n                }\r\n           }\r\n                \r\n     \r\n                Answer:\r\n                TestClass {\r\n                \r\n                @InjectMocks\r\n                MainClass manager;\r\n                \r\n                @BeforeEach\r\n                \tpublic void init() {\r\n                \t\tTransactionSynchronizationManager.initSynchronization();\r\n                \t}\r\n                \r\n                @AfterEach\r\n                \tpublic void clear() {\r\n                \t\tTransactionSynchronizationManager.clear();\r\n                \t}\r\n    \r\n                @Test\r\n                void Test {\r\n                       manager.method();\r\n                       TransactionSynchronizationManager.getSynchronizations().get(0).afterCompletion(anyInt());        \r\n                }\r\n    \r\n    }","title":"Writing junit(mockito) for a public method and cover private method called inside it","body":"<p>This worked for me. First, calling the public method() so that the line TransactionSynchronizationManager.registerSynchronization(new TransactionSynchronizationAdapter() could be executed. Then we're fetching the object created and using it to access afterCompletion()</p>\n<pre><code>            public MainClass {\n                  public void method() {\n                  .......\n                  addTransactionLifeCycleMethods(Map&lt;Integer, ForecastRunDTO&gt; newRunDTOs, Boolean isSystemTriggeredActualComputation);\n                  }\n                  private void addTransactionLifeCycleMethods(Map&lt;Integer, ForecastRunDTO&gt; newRunDTOs, Boolean isSystemTriggeredActualComputation) {\n                TransactionSynchronizationManager.registerSynchronization(new TransactionSynchronizationAdapter() {\n                    @Override\n                    public void afterCompletion(int status) {\n                        // Cover this using mockito\n                        }\n                });\n            }\n       }\n            \n \n            Answer:\n            TestClass {\n            \n            @InjectMocks\n            MainClass manager;\n            \n            @BeforeEach\n                public void init() {\n                    TransactionSynchronizationManager.initSynchronization();\n                }\n            \n            @AfterEach\n                public void clear() {\n                    TransactionSynchronizationManager.clear();\n                }\n\n            @Test\n            void Test {\n                   manager.method();\n                   TransactionSynchronizationManager.getSynchronizations().get(0).afterCompletion(anyInt());        \n            }\n\n}\n</code></pre>\n"}],"owner":{"account_id":26115567,"reputation":17,"user_id":19808772,"display_name":"Soumya Khanda"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":306,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":2,"score":2,"last_activity_date":1664258793,"creation_date":1661004736,"question_id":73427397,"body_markdown":"I want my test to cover the code written inside afterCompletion(). I&#39;ve tried mocking the public method which calls `addTransactionLifeCycleMethods()`, but it doesn&#39;t go inside \r\n`TransactionSynchronizationManager`. Here&#39;s the code snippet\r\n\r\n\r\n    private void addTransactionLifeCycleMethods(Map&lt;Integer, ForecastRunDTO&gt; newRunDTOs, Boolean isSystemTriggeredActualComputation) {\r\n\t\tTransactionSynchronizationManager.registerSynchronization(new TransactionSynchronizationAdapter() {\r\n\t\t\t@Override\r\n\t\t\tpublic void afterCompletion(int status) {\r\n\t\t\t\t// Cover this using mockito\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\nNote: TransactionSynchronizationManager and TransactionSynchronizationAdapter are both abstract classes in org.springframework.transaction.support;","title":"Writing junit(mockito) for a public method and cover private method called inside it","body":"<p>I want my test to cover the code written inside afterCompletion(). I've tried mocking the public method which calls <code>addTransactionLifeCycleMethods()</code>, but it doesn't go inside\n<code>TransactionSynchronizationManager</code>. Here's the code snippet</p>\n<pre><code>private void addTransactionLifeCycleMethods(Map&lt;Integer, ForecastRunDTO&gt; newRunDTOs, Boolean isSystemTriggeredActualComputation) {\n    TransactionSynchronizationManager.registerSynchronization(new TransactionSynchronizationAdapter() {\n        @Override\n        public void afterCompletion(int status) {\n            // Cover this using mockito\n            }\n        }\n    });\n}\n</code></pre>\n<p>Note: TransactionSynchronizationManager and TransactionSynchronizationAdapter are both abstract classes in org.springframework.transaction.support;</p>\n"},{"tags":["java","gwt","generated-code"],"answers":[{"tags":[],"owner":{"account_id":26066428,"reputation":21,"user_id":19766801,"display_name":"Hans Radam"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1664258374,"creation_date":1664258374,"answer_id":73862973,"question_id":72110261,"body_markdown":"try adding\r\n\r\n    \r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.seleniumhq.selenium&lt;/groupId&gt;\r\n            &lt;artifactId&gt;selenium-java&lt;/artifactId&gt;\r\n            &lt;version&gt;4.2.0&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;com.google.guava&lt;/groupId&gt;\r\n            &lt;artifactId&gt;guava&lt;/artifactId&gt;\r\n            &lt;version&gt;31.0.1-jre&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;io.github.bonigarcia&lt;/groupId&gt;\r\n            &lt;artifactId&gt;webdrivermanager&lt;/artifactId&gt;\r\n            &lt;version&gt;5.0.1&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n\r\n\r\nHere&#39;s a link for update: https://github.com/bonigarcia/webdrivermanager/blob/master/CHANGELOG.md#removed","title":"incompatible types: com.google.common.collect.ForwardingImmutableMap cannot be converted to com.google.common.collect.ImmutableMap generated-sources","body":"<p>try adding</p>\n<pre><code>    &lt;dependency&gt;\n        &lt;groupId&gt;org.seleniumhq.selenium&lt;/groupId&gt;\n        &lt;artifactId&gt;selenium-java&lt;/artifactId&gt;\n        &lt;version&gt;4.2.0&lt;/version&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;com.google.guava&lt;/groupId&gt;\n        &lt;artifactId&gt;guava&lt;/artifactId&gt;\n        &lt;version&gt;31.0.1-jre&lt;/version&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;io.github.bonigarcia&lt;/groupId&gt;\n        &lt;artifactId&gt;webdrivermanager&lt;/artifactId&gt;\n        &lt;version&gt;5.0.1&lt;/version&gt;\n    &lt;/dependency&gt;\n</code></pre>\n<p>Here's a link for update: <a href=\"https://github.com/bonigarcia/webdrivermanager/blob/master/CHANGELOG.md#removed\" rel=\"nofollow noreferrer\">https://github.com/bonigarcia/webdrivermanager/blob/master/CHANGELOG.md#removed</a></p>\n"}],"owner":{"account_id":1196041,"reputation":711,"user_id":1167753,"accept_rate":50,"display_name":"user1167753"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":163,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1664258374,"creation_date":1651654424,"question_id":72110261,"body_markdown":"When I start my wildfly in debug modue I get the following error in \r\nproject-parent\\project-frontend\\target\\generated-sources\\gwt\\com\\google\\common\\collect\\ForwardingImmutableMap_FieldSerializer.java:17:84\r\n\r\n    java: incompatible types: com.google.common.collect.ForwardingImmutableMap cannot be converted to com.google.common.collect.ImmutableMap\r\n\r\nMy problem: I have fixed this file but when I rerun the debugger the file gets generated automatically. \r\nHow to fix this issue?","title":"incompatible types: com.google.common.collect.ForwardingImmutableMap cannot be converted to com.google.common.collect.ImmutableMap generated-sources","body":"<p>When I start my wildfly in debug modue I get the following error in\nproject-parent\\project-frontend\\target\\generated-sources\\gwt\\com\\google\\common\\collect\\ForwardingImmutableMap_FieldSerializer.java:17:84</p>\n<pre><code>java: incompatible types: com.google.common.collect.ForwardingImmutableMap cannot be converted to com.google.common.collect.ImmutableMap\n</code></pre>\n<p>My problem: I have fixed this file but when I rerun the debugger the file gets generated automatically.\nHow to fix this issue?</p>\n"},{"tags":["java","visual-studio-code"],"comments":[{"owner":{"account_id":6289243,"reputation":1529,"user_id":4887464,"accept_rate":100,"display_name":"Olga Pshenichnikova"},"score":0,"creation_date":1664176049,"post_id":73850593,"comment_id":130402569,"body_markdown":"I tried to open issue there: https://github.com/redhat-developer/vscode-java/discussions/2697","body":"I tried to open issue there: <a href=\"https://github.com/redhat-developer/vscode-java/discussions/2697\" rel=\"nofollow noreferrer\">github.com/redhat-developer/vscode-java/discussions/2697</a>"},{"owner":{"account_id":3116234,"reputation":9296,"user_id":2636929,"display_name":"Stultuske"},"score":0,"creation_date":1664176285,"post_id":73850593,"comment_id":130402628,"body_markdown":"&quot;no such file or directory&quot;, well, I can understand that if it doesn&#39;t find the project, it won&#39;t open it","body":"&quot;no such file or directory&quot;, well, I can understand that if it doesn&#39;t find the project, it won&#39;t open it"},{"owner":{"account_id":6289243,"reputation":1529,"user_id":4887464,"accept_rate":100,"display_name":"Olga Pshenichnikova"},"score":0,"creation_date":1664185923,"post_id":73850593,"comment_id":130405516,"body_markdown":"No, this is normal to delete home/olga/.config/Code/User/workspaceStorage/ folder. It is part of a troubleshooting. The IDE should handle this case.","body":"No, this is normal to delete home/olga/.config/Code/User/workspaceStorage/ folder. It is part of a troubleshooting. The IDE should handle this case."},{"owner":{"account_id":3116234,"reputation":9296,"user_id":2636929,"display_name":"Stultuske"},"score":0,"creation_date":1664191680,"post_id":73850593,"comment_id":130407275,"body_markdown":"and yet, it seems to give you trouble. it&#39;s being used somewhere, and can&#39;t be located","body":"and yet, it seems to give you trouble. it&#39;s being used somewhere, and can&#39;t be located"}],"answers":[{"tags":[],"owner":{"account_id":6289243,"reputation":1529,"user_id":4887464,"accept_rate":100,"display_name":"Olga Pshenichnikova"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1664258289,"creation_date":1664258289,"answer_id":73862958,"question_id":73850593,"body_markdown":"OK, so I have an [answer][1] from the support of the project on `GitHub`.\r\nAs [testforstephen][2] wrote:\r\n\r\n&gt; Looking at the logs you shared, it&#39;s exactly same as #2655 (comment) and microsoft/vscode-java-debug#1212.\r\n&gt; A quick workaround is to manually create a release file in your jdk home.\r\n\r\n```sh\r\nsudo sh -c &#39;echo &quot;JAVA_VERSION=\\&quot;11.0.16.0\\&quot;&quot; &gt; /usr/lib64/jvm/java-11-openjdk-11/release&#39;\r\n```\r\n\r\n[1]: https://github.com/redhat-developer/vscode-java/issues/2698#issuecomment-1258845512\r\n[2]: https://github.com/testforstephen","title":"Java projects aren&#39;t imported to IDE after update","body":"<p>OK, so I have an <a href=\"https://github.com/redhat-developer/vscode-java/issues/2698#issuecomment-1258845512\" rel=\"nofollow noreferrer\">answer</a> from the support of the project on <code>GitHub</code>.\nAs <a href=\"https://github.com/testforstephen\" rel=\"nofollow noreferrer\">testforstephen</a> wrote:</p>\n<blockquote>\n<p>Looking at the logs you shared, it's exactly same as #2655 (comment) and microsoft/vscode-java-debug#1212.\nA quick workaround is to manually create a release file in your jdk home.</p>\n</blockquote>\n<pre class=\"lang-bash prettyprint-override\"><code>sudo sh -c 'echo &quot;JAVA_VERSION=\\&quot;11.0.16.0\\&quot;&quot; &gt; /usr/lib64/jvm/java-11-openjdk-11/release'\n</code></pre>\n"}],"owner":{"account_id":6289243,"reputation":1529,"user_id":4887464,"accept_rate":100,"display_name":"Olga Pshenichnikova"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":88,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1664258289,"creation_date":1664176009,"question_id":73850593,"body_markdown":"##### Environment\r\n- Operating System: openSUSE Leap 15.3\r\n- JDK version: openjdk version &quot;11.0.13&quot; 2021-10-19\r\n- Visual Studio Code version: 1.71.2\r\n- Java extension version: v1.10.0\r\n\r\n##### Steps To Reproduce\r\n1. F1 -&gt; Java: Clean Java Language ...\r\n2. Reload and delete\r\n\r\n* [Sample project](https://github.com/olgapshen/VSCodeIssue)\r\n* [Logs](https://github.com/olgapshen/VSCodeIssue/blob/main/client.log.2022-09-26)\r\n\r\n##### Current Result\r\n* Java Projects tab displays no projects, just &quot;Import Projects&quot; button\r\n* No server log file availabe\r\n* Configure Java Runtime page displays nothig, except &quot;Refresh&quot; button\r\n\r\n##### Expected Result\r\nJava project is imported to IDE\r\n\r\n##### Additional Informations\r\nIssue started after update to recent version.\r\nError from &quot;Developer Tools&quot;:\r\n\r\n&gt; ERR ENOENT: no such file or directory, open &#39;/home/olga/.config/Code/User/workspaceStorage/a173b3b78960646b4119193930553375/redhat.java/jdt_ws/.metadata/.log&#39;: Error: ENOENT: no such file or directory, open &#39;/home/olga/.config/Code/User/workspaceStorage/a173b3b78960646b4119193930553375/redhat.java/jdt_ws/.metadata/.log&#39;\r\n\r\n**UPDATE**\r\n\r\nSeveral new things.\r\n\r\nFirst of all, I upgraded Gradle to 7.5.1 and successfully built the project with VSCode Gradle plugin.\r\nThe screenshot below.\r\n\r\nSecond I messed little button in bottom of the screen: &quot;Lightweight mode&quot;, I pressed, and IDE tried to build the Java project, but with new errors.\r\n\r\nI updated the logs in the repo:\r\n\r\n* [Client log](https://github.com/olgapshen/VSCodeIssue/blob/main/client.log.2022-09-26)\r\n* [Server log](https://github.com/olgapshen/VSCodeIssue/blob/main/.log)\r\n\r\n[![VSCode Gradle][1]][1]\r\n\r\nBut unfortunately I still have the problem with Java project import.\r\n\r\n  [1]: https://i.stack.imgur.com/TZW2R.png","title":"Java projects aren&#39;t imported to IDE after update","body":"<h5>Environment</h5>\n<ul>\n<li>Operating System: openSUSE Leap 15.3</li>\n<li>JDK version: openjdk version &quot;11.0.13&quot; 2021-10-19</li>\n<li>Visual Studio Code version: 1.71.2</li>\n<li>Java extension version: v1.10.0</li>\n</ul>\n<h5>Steps To Reproduce</h5>\n<ol>\n<li>F1 -&gt; Java: Clean Java Language ...</li>\n<li>Reload and delete</li>\n</ol>\n<ul>\n<li><a href=\"https://github.com/olgapshen/VSCodeIssue\" rel=\"nofollow noreferrer\">Sample project</a></li>\n<li><a href=\"https://github.com/olgapshen/VSCodeIssue/blob/main/client.log.2022-09-26\" rel=\"nofollow noreferrer\">Logs</a></li>\n</ul>\n<h5>Current Result</h5>\n<ul>\n<li>Java Projects tab displays no projects, just &quot;Import Projects&quot; button</li>\n<li>No server log file availabe</li>\n<li>Configure Java Runtime page displays nothig, except &quot;Refresh&quot; button</li>\n</ul>\n<h5>Expected Result</h5>\n<p>Java project is imported to IDE</p>\n<h5>Additional Informations</h5>\n<p>Issue started after update to recent version.\nError from &quot;Developer Tools&quot;:</p>\n<blockquote>\n<p>ERR ENOENT: no such file or directory, open '/home/olga/.config/Code/User/workspaceStorage/a173b3b78960646b4119193930553375/redhat.java/jdt_ws/.metadata/.log': Error: ENOENT: no such file or directory, open '/home/olga/.config/Code/User/workspaceStorage/a173b3b78960646b4119193930553375/redhat.java/jdt_ws/.metadata/.log'</p>\n</blockquote>\n<p><strong>UPDATE</strong></p>\n<p>Several new things.</p>\n<p>First of all, I upgraded Gradle to 7.5.1 and successfully built the project with VSCode Gradle plugin.\nThe screenshot below.</p>\n<p>Second I messed little button in bottom of the screen: &quot;Lightweight mode&quot;, I pressed, and IDE tried to build the Java project, but with new errors.</p>\n<p>I updated the logs in the repo:</p>\n<ul>\n<li><a href=\"https://github.com/olgapshen/VSCodeIssue/blob/main/client.log.2022-09-26\" rel=\"nofollow noreferrer\">Client log</a></li>\n<li><a href=\"https://github.com/olgapshen/VSCodeIssue/blob/main/.log\" rel=\"nofollow noreferrer\">Server log</a></li>\n</ul>\n<p><a href=\"https://i.stack.imgur.com/TZW2R.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/TZW2R.png\" alt=\"VSCode Gradle\" /></a></p>\n<p>But unfortunately I still have the problem with Java project import.</p>\n"},{"tags":["java","angular","elasticsearch"],"comments":[{"owner":{"account_id":5843921,"reputation":210855,"user_id":4604579,"display_name":"Val"},"score":2,"creation_date":1664262437,"post_id":73862931,"comment_id":130424696,"body_markdown":"It depends on what you&#39;re after. In terms of functionality, completion suggesters are similar to match phrase, in that the matching of the tokens is **ordered**. Maybe explain your use case in more details so we&#39;ll be better able to suggest what feature would suit best. Performance only comes next.","body":"It depends on what you&#39;re after. In terms of functionality, completion suggesters are similar to match phrase, in that the matching of the tokens is <b>ordered</b>. Maybe explain your use case in more details so we&#39;ll be better able to suggest what feature would suit best. Performance only comes next."},{"owner":{"account_id":26454388,"reputation":1,"user_id":20097128,"display_name":"Hannes Oberberger"},"score":0,"creation_date":1664342545,"post_id":73862931,"comment_id":130446537,"body_markdown":"Basically, a customer can search for an article on the front page in a search bar - as he types, possible products should show up, e.g. customer searches iph - iphone 14 / iphone 13 should appear as suggestions which then can be selected","body":"Basically, a customer can search for an article on the front page in a search bar - as he types, possible products should show up, e.g. customer searches iph - iphone 14 / iphone 13 should appear as suggestions which then can be selected"}],"owner":{"account_id":26454388,"reputation":1,"user_id":20097128,"display_name":"Hannes Oberberger"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":14,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1664258075,"creation_date":1664258075,"question_id":73862931,"body_markdown":"I am currently implementing a search for a product catalogue with several thousand articles. Therefore, I would like to know if Completion Suggesters are the best way to implement this functionality as currently we are still using EdgeNGram. What would you suggest?","title":"Elasticsearch - are Completion Suggesters fast than EdgeNGram for product catalogues","body":"<p>I am currently implementing a search for a product catalogue with several thousand articles. Therefore, I would like to know if Completion Suggesters are the best way to implement this functionality as currently we are still using EdgeNGram. What would you suggest?</p>\n"},{"tags":["java","oracle","jpa","jboss"],"answers":[{"tags":[],"owner":{"account_id":26146492,"reputation":1,"user_id":19835031,"display_name":"JoeSat"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1664257945,"creation_date":1664207948,"answer_id":73856815,"question_id":73469084,"body_markdown":"just a quick post to share with the community a way to solve my issue :\r\nin the toplink -&gt; eclipselink migration process, some of connection setup are moved from the Java&lt;-&gt;Oracle XML mapping file (XXX.xml) and the **sessions.xml** file :\r\n```lang-xml\r\n&lt;sessions xmlns:xsd=&quot;http://www.w3.org/2001/XMLSchema&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; version=&quot;2.4.2&quot;&gt;\r\n  &lt;session xsi:type=&quot;server-session&quot;&gt;\r\n    &lt;name&gt;XXX_session&lt;/name&gt;\r\n    &lt;logging xsi:type=&quot;eclipselink-log&quot;&gt;...&lt;/logging&gt;\r\n    &lt;primary-project xsi:type=&quot;xml&quot;&gt;XXX.xml&lt;/primary-project&gt;\r\n    &lt;login xsi:type=&quot;database-login&quot;&gt;...&lt;/login&gt;\r\n  &lt;/session&gt;\r\n&lt;/sessions&gt;\r\n```\r\n\r\nI had to add/move the following tags in the **sessions.xml** file :\r\n```lang-xml\r\n&lt;server-platform xsi:type=&quot;jboss-platform&quot;&gt;\r\n   &lt;enable-jta&gt;true&lt;/enable-jta&gt;\r\n&lt;/server-platform&gt;\r\n```\r\nand\r\n```\r\n&lt;login xsi:type=&quot;database-login&quot;&gt;\r\n   &lt;platform-class&gt;org.eclipse.persistence.platform.database.OraclePlatform&lt;/platform-class&gt;\r\n   &lt;external-connection-pooling&gt;true&lt;/external-connection-pooling&gt;\r\n   &lt;external-transaction-controller&gt;true&lt;/external-transaction-controller&gt;\r\n   &lt;sequencing&gt;\r\n      &lt;default-sequence xsi:type=&quot;native-sequence&quot;&gt;\r\n         &lt;preallocation-size&gt;1&lt;/preallocation-size&gt;\r\n      &lt;/default-sequence&gt;\r\n   &lt;/sequencing&gt;\r\n   ...\r\n&lt;/login&gt;\r\n```\r\n\r\nBy this way, the write Oracle statements are correctly generated by the JPA provider during the commit phase of the container.\r\n\r\nFor information, the XSD dictionnary for sessions.xml is :\r\n/org/eclipse/persistence/eclipselink_sessions_2.1.xsd in eclipselink-2.7.11 library","title":"JBoss EJB transactions don&#39;t generate Oracle SQL Statements from JPA java persistence objetcs (eclipselink)","body":"<p>just a quick post to share with the community a way to solve my issue :\nin the toplink -&gt; eclipselink migration process, some of connection setup are moved from the Java&lt;-&gt;Oracle XML mapping file (XXX.xml) and the <strong>sessions.xml</strong> file :</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;sessions xmlns:xsd=&quot;http://www.w3.org/2001/XMLSchema&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; version=&quot;2.4.2&quot;&gt;\n  &lt;session xsi:type=&quot;server-session&quot;&gt;\n    &lt;name&gt;XXX_session&lt;/name&gt;\n    &lt;logging xsi:type=&quot;eclipselink-log&quot;&gt;...&lt;/logging&gt;\n    &lt;primary-project xsi:type=&quot;xml&quot;&gt;XXX.xml&lt;/primary-project&gt;\n    &lt;login xsi:type=&quot;database-login&quot;&gt;...&lt;/login&gt;\n  &lt;/session&gt;\n&lt;/sessions&gt;\n</code></pre>\n<p>I had to add/move the following tags in the <strong>sessions.xml</strong> file :</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;server-platform xsi:type=&quot;jboss-platform&quot;&gt;\n   &lt;enable-jta&gt;true&lt;/enable-jta&gt;\n&lt;/server-platform&gt;\n</code></pre>\n<p>and</p>\n<pre><code>&lt;login xsi:type=&quot;database-login&quot;&gt;\n   &lt;platform-class&gt;org.eclipse.persistence.platform.database.OraclePlatform&lt;/platform-class&gt;\n   &lt;external-connection-pooling&gt;true&lt;/external-connection-pooling&gt;\n   &lt;external-transaction-controller&gt;true&lt;/external-transaction-controller&gt;\n   &lt;sequencing&gt;\n      &lt;default-sequence xsi:type=&quot;native-sequence&quot;&gt;\n         &lt;preallocation-size&gt;1&lt;/preallocation-size&gt;\n      &lt;/default-sequence&gt;\n   &lt;/sequencing&gt;\n   ...\n&lt;/login&gt;\n</code></pre>\n<p>By this way, the write Oracle statements are correctly generated by the JPA provider during the commit phase of the container.</p>\n<p>For information, the XSD dictionnary for sessions.xml is :\n/org/eclipse/persistence/eclipselink_sessions_2.1.xsd in eclipselink-2.7.11 library</p>\n"}],"owner":{"account_id":26146492,"reputation":1,"user_id":19835031,"display_name":"JoeSat"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":80,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1664257945,"creation_date":1661326244,"question_id":73469084,"body_markdown":"I&#39;m trying to migrate a J2EE heavy application (jnlp) from Oracle OC4j (OAS) using Toplink, to RH JBoss using Eclipselink (without changing functional code of Beans).\r\n\r\nIf read-only java instructions are correctly translated in a SELECT SQL statement :\r\n\r\n    Session session = getSession();\r\n    ReadAllQuery query = new ReadAllQuery(Employee.class);\r\n    ExpressionBuilder builder = new ExpressionBuilder();\r\n    Expression criteres = builder.get(&quot;nom&quot;).equal(&quot;Smith&quot;);\r\n    query.setSelectionCriteria(criteres);\r\n    Vector employees = (Vector) session.executeQuery(query);\r\n    Employee employeeSmith = employees.elementAt(0);\r\n\r\n==&gt;\r\n\r\n    SELECT * FROM employee WHERE nom=&#39;Smith&#39;;\r\n\r\nBut, write java instructions seem not to be translated in corresponding SQL statements :\r\n\r\n    session.acquireUnitOfWork().deleteObject(employeeSmith);\r\n\r\n==&gt;\r\n\r\n    DELETE employee WHERE nom=&#39;Smith&#39;;\r\n(the same for session.acquireUnitOfWork().registerObject(employeeSmith) doesn&#39;t generate neither INSERT nor UPDATE SQL statements)\r\n\r\nIs there any setup in JBoss or parameter for Eclipselink to activate this &quot;translation&quot; when EJB commit its transaction ?\r\n\r\n**I want to specify that I&#39;m using &quot;native&quot; Oracle JDBC connection protocol with sessions.xml and a XML mapping file (correspondences between Oracle database tables/columns and Java classes/attributes objects), AND NOT persistence units (with persistence.xml definition file and entity managers).**\r\n\r\nThanks a lot in advance for your help and advices.\r\n\r\nRegards\r\n\r\n*Current configuration :\r\nOracle OC4j 10.1.3.5.0 using Toplink 11.1.1.2.0 JPA implementation*\r\n\r\n*Target configuration :\r\nRedHat JBoss EAP 7.4 using Eclipselink 2.7.0 JPA implementation*","title":"JBoss EJB transactions don&#39;t generate Oracle SQL Statements from JPA java persistence objetcs (eclipselink)","body":"<p>I'm trying to migrate a J2EE heavy application (jnlp) from Oracle OC4j (OAS) using Toplink, to RH JBoss using Eclipselink (without changing functional code of Beans).</p>\n<p>If read-only java instructions are correctly translated in a SELECT SQL statement :</p>\n<pre><code>Session session = getSession();\nReadAllQuery query = new ReadAllQuery(Employee.class);\nExpressionBuilder builder = new ExpressionBuilder();\nExpression criteres = builder.get(&quot;nom&quot;).equal(&quot;Smith&quot;);\nquery.setSelectionCriteria(criteres);\nVector employees = (Vector) session.executeQuery(query);\nEmployee employeeSmith = employees.elementAt(0);\n</code></pre>\n<p>==&gt;</p>\n<pre><code>SELECT * FROM employee WHERE nom='Smith';\n</code></pre>\n<p>But, write java instructions seem not to be translated in corresponding SQL statements :</p>\n<pre><code>session.acquireUnitOfWork().deleteObject(employeeSmith);\n</code></pre>\n<p>==&gt;</p>\n<pre><code>DELETE employee WHERE nom='Smith';\n</code></pre>\n<p>(the same for session.acquireUnitOfWork().registerObject(employeeSmith) doesn't generate neither INSERT nor UPDATE SQL statements)</p>\n<p>Is there any setup in JBoss or parameter for Eclipselink to activate this &quot;translation&quot; when EJB commit its transaction ?</p>\n<p><strong>I want to specify that I'm using &quot;native&quot; Oracle JDBC connection protocol with sessions.xml and a XML mapping file (correspondences between Oracle database tables/columns and Java classes/attributes objects), AND NOT persistence units (with persistence.xml definition file and entity managers).</strong></p>\n<p>Thanks a lot in advance for your help and advices.</p>\n<p>Regards</p>\n<p><em>Current configuration :\nOracle OC4j 10.1.3.5.0 using Toplink 11.1.1.2.0 JPA implementation</em></p>\n<p><em>Target configuration :\nRedHat JBoss EAP 7.4 using Eclipselink 2.7.0 JPA implementation</em></p>\n"},{"tags":["java","spring","configurationproperties"],"comments":[{"owner":{"account_id":1223835,"reputation":75848,"user_id":1189885,"accept_rate":43,"display_name":"chrylis -cautiouslyoptimistic-"},"score":1,"creation_date":1664258522,"post_id":73862905,"comment_id":130423729,"body_markdown":"It&#39;s certainly possible, but you need to show the attempt you made that isn&#39;t working as you want.","body":"It&#39;s certainly possible, but you need to show the attempt you made that isn&#39;t working as you want."}],"owner":{"account_id":22187191,"reputation":51,"user_id":16644196,"display_name":"Ivan Fomkin"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":40,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1664257871,"creation_date":1664257871,"question_id":73862905,"body_markdown":"I have my application.yaml, f.e:\r\n```yaml\r\nbookshop:\r\n  properties:\r\n    books:\r\n      maxSize:\r\n        title: 60\r\n        description: 800\r\n      price:\r\n        commonDiscount: 10\r\n      sale: true\r\n```\r\n\r\nNow I create &#39;getter-class&#39; for getting this values with `@Value` annotation:\r\n```java\r\n@Getter\r\n@Component\r\npublic class BookSettingsGetter {\r\n\r\n  @Value(&quot;${bookshop.properties.books.maxSize.title}&quot;)\r\n  private Integer titleMaxSize;\r\n  @Value(&quot;${bookshop.properties.books.maxSize.description}&quot;)\r\n  private Integer descriptionMaxSize;\r\n  @Value(&quot;${bookshop.properties.books.price.commonDiscount}&quot;)\r\n  private Integer commonDiscountPercent;\r\n  @Value(&quot;${bookshop.properties.books.sale}&quot;)\r\n  private Boolean allowSaleBooks;\r\n}\r\n```\r\n\r\nBut I want to make it with `@ConfigurationProperties`. A common part of all values is `bookshop.properties.books` and I can get easy only `bookshop.properties.books.sale`. \r\nHow to get other properties with `@ConfigurationProperties` in one class? It&#39;s possible?","title":"Using @ConfigurationProperties for partitional different prefix","body":"<p>I have my application.yaml, f.e:</p>\n<pre class=\"lang-yaml prettyprint-override\"><code>bookshop:\n  properties:\n    books:\n      maxSize:\n        title: 60\n        description: 800\n      price:\n        commonDiscount: 10\n      sale: true\n</code></pre>\n<p>Now I create 'getter-class' for getting this values with <code>@Value</code> annotation:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Getter\n@Component\npublic class BookSettingsGetter {\n\n  @Value(&quot;${bookshop.properties.books.maxSize.title}&quot;)\n  private Integer titleMaxSize;\n  @Value(&quot;${bookshop.properties.books.maxSize.description}&quot;)\n  private Integer descriptionMaxSize;\n  @Value(&quot;${bookshop.properties.books.price.commonDiscount}&quot;)\n  private Integer commonDiscountPercent;\n  @Value(&quot;${bookshop.properties.books.sale}&quot;)\n  private Boolean allowSaleBooks;\n}\n</code></pre>\n<p>But I want to make it with <code>@ConfigurationProperties</code>. A common part of all values is <code>bookshop.properties.books</code> and I can get easy only <code>bookshop.properties.books.sale</code>.\nHow to get other properties with <code>@ConfigurationProperties</code> in one class? It's possible?</p>\n"},{"tags":["java","compiler-errors","dynamic-compilation"],"comments":[{"owner":{"account_id":47283,"reputation":703817,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"score":1,"creation_date":1547476996,"post_id":54183528,"comment_id":95195606,"body_markdown":"Nope.  Not a dup of that Question.  This one is really about how to add dependencies when running the Java compiler programatically.","body":"Nope.  Not a dup of that Question.  This one is really about how to add dependencies when running the Java compiler programatically."},{"owner":{"account_id":12438217,"reputation":29,"user_id":9057695,"display_name":"dark prince"},"score":0,"creation_date":1547477980,"post_id":54183528,"comment_id":95196171,"body_markdown":"Yes you are correct. I may have put the questions incorrectly. Can you suggest any way to add dependencies when running the Java compiler programatically and executing the code.","body":"Yes you are correct. I may have put the questions incorrectly. Can you suggest any way to add dependencies when running the Java compiler programatically and executing the code."}],"answers":[{"tags":[],"owner":{"account_id":4355473,"reputation":17255,"user_id":3554264,"accept_rate":62,"display_name":"Christian Hujer"},"down_vote_count":2,"up_vote_count":0,"is_accepted":false,"score":-2,"last_activity_date":1664257741,"creation_date":1664257741,"answer_id":73862890,"question_id":54183528,"body_markdown":"First of all, I suggest that when printing the diagnostics, add the message.\r\nChange the part that prints the error message to this:\r\n```java\r\nSystem.out.format(&quot;Error %s on line %d in %s%n&quot;,\r\n    diagnostic.getMessage(null), // ⇐ Message, very useful\r\n    diagnostic.getLineNumber(),\r\n    diagnostic.getSource().toUri());\r\n```\r\n\r\nThis will help with understanding _what_ the compiler thought went wrong.\r\n\r\nOn Linux or Mac OS, we now see a problem: Even with a `sikuli.jar` containig a `Screen.class` in the right place, that class `Screen` is not found. Why? Beause Java isn&#39;t looking for a `sikuli.jar` file. Why? Because the wrong path concatenation character is used. The path concatenation character is `;` on Windows and `:` on POSIX-y systems. Instead of hard-coding `;`, we should use `System.getProperty(&quot;path.separator&quot;)`.\r\n\r\nI could now see 3 compiler errors (and one message that says &quot;Error&quot; but is actually a warning):\r\n* cannot find symbol &quot;class DoStuff&quot;\r\n* cannot find symbol &quot;class Screen&quot; (twice)\r\n\r\nSo, change the line that builds the classpath entry in the `optionList` to this:\r\n```java\r\noptionList.add(System.getProperty(&quot;java.class.path&quot;) + System.getProperty(&quot;path.separator&quot;) + &quot;sikuli.jar&quot;);\r\n```\r\n\r\nAfter this change, the code works.\r\n\r\nHere&#39;s the directory structure that I used:\r\n```\r\nplayground/ ⇐ current working directory\r\n+- inlinecompiler/\r\n|  +- Compiler.java\r\n+- sikuli.jar ⇐ contains org/sikuli/script/Screen.class\r\n```\r\n\r\nAnd the commands:\r\n```bash\r\njavac inlinecompiler/Compiler.java\r\njava -cp .:sikuli.jar inlinecompiler.Compiler\r\n```\r\n\r\nWhich means if it doesn&#39;t work, also check your directory structure.\r\n\r\nLast but not least, `java.lang.Compiler` is deprecated and scheduled for removal. You might want to switch to `javax.tools.JavaCompiler`. You can obtain an instance using:\r\n```java\r\nJavaCompiler compiler = ServiceLoader.load(JavaCompiler.class).iterator().next();\r\n```","title":"how to add dependencies when running the Java compiler programmatically","body":"<p>First of all, I suggest that when printing the diagnostics, add the message.\nChange the part that prints the error message to this:</p>\n<pre class=\"lang-java prettyprint-override\"><code>System.out.format(&quot;Error %s on line %d in %s%n&quot;,\n    diagnostic.getMessage(null), // ⇐ Message, very useful\n    diagnostic.getLineNumber(),\n    diagnostic.getSource().toUri());\n</code></pre>\n<p>This will help with understanding <em>what</em> the compiler thought went wrong.</p>\n<p>On Linux or Mac OS, we now see a problem: Even with a <code>sikuli.jar</code> containig a <code>Screen.class</code> in the right place, that class <code>Screen</code> is not found. Why? Beause Java isn't looking for a <code>sikuli.jar</code> file. Why? Because the wrong path concatenation character is used. The path concatenation character is <code>;</code> on Windows and <code>:</code> on POSIX-y systems. Instead of hard-coding <code>;</code>, we should use <code>System.getProperty(&quot;path.separator&quot;)</code>.</p>\n<p>I could now see 3 compiler errors (and one message that says &quot;Error&quot; but is actually a warning):</p>\n<ul>\n<li>cannot find symbol &quot;class DoStuff&quot;</li>\n<li>cannot find symbol &quot;class Screen&quot; (twice)</li>\n</ul>\n<p>So, change the line that builds the classpath entry in the <code>optionList</code> to this:</p>\n<pre class=\"lang-java prettyprint-override\"><code>optionList.add(System.getProperty(&quot;java.class.path&quot;) + System.getProperty(&quot;path.separator&quot;) + &quot;sikuli.jar&quot;);\n</code></pre>\n<p>After this change, the code works.</p>\n<p>Here's the directory structure that I used:</p>\n<pre><code>playground/ ⇐ current working directory\n+- inlinecompiler/\n|  +- Compiler.java\n+- sikuli.jar ⇐ contains org/sikuli/script/Screen.class\n</code></pre>\n<p>And the commands:</p>\n<pre class=\"lang-bash prettyprint-override\"><code>javac inlinecompiler/Compiler.java\njava -cp .:sikuli.jar inlinecompiler.Compiler\n</code></pre>\n<p>Which means if it doesn't work, also check your directory structure.</p>\n<p>Last but not least, <code>java.lang.Compiler</code> is deprecated and scheduled for removal. You might want to switch to <code>javax.tools.JavaCompiler</code>. You can obtain an instance using:</p>\n<pre class=\"lang-java prettyprint-override\"><code>JavaCompiler compiler = ServiceLoader.load(JavaCompiler.class).iterator().next();\n</code></pre>\n"}],"owner":{"account_id":12438217,"reputation":29,"user_id":9057695,"display_name":"dark prince"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":888,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1664257741,"creation_date":1547476648,"question_id":54183528,"body_markdown":"Hi I am trying to compile a java code(which contains classes from third party jars i.e; dependencies) dynamically and execute the same but its not working for me.\r\n\r\nEx : If i want to execute a simple java code (System.out.println) it works fine but if i add any third party jar files (ex: selenium). It throws error that symbol not found.\r\n\r\n   \r\n\r\n     import java.io.File;\r\n        import java.io.FileWriter;\r\n        import java.io.IOException;\r\n        import java.io.Writer;\r\n        import java.net.URL;\r\n        import java.net.URLClassLoader;\r\n        import java.util.ArrayList;\r\n        import java.util.Arrays;\r\n        import java.util.List;\r\n        import javax.tools.Diagnostic;\r\n        import javax.tools.DiagnosticCollector;\r\n        import javax.tools.JavaCompiler;\r\n        import javax.tools.JavaFileObject;\r\n        import javax.tools.StandardJavaFileManager;\r\n        import javax.tools.ToolProvider;\r\n        \r\n        public class InlineCompiler {\r\n        \r\n            public static void main(String[] args) {\r\n                StringBuilder sb = new StringBuilder(64);\r\n                sb.append(&quot;package testcompile;\\n&quot;);\r\n          sb.append(&quot;import org.sikuli.script.*;\\n&quot;);\r\n                sb.append(&quot;public class HelloWorld implements inlinecompiler.InlineCompiler.DoStuff {\\n&quot;);\r\n                sb.append(&quot;    public void doStuff() {\\n&quot;);\r\n     sb.append(&quot;Screen s = new Screen();\\n&quot;);\r\n                sb.append(&quot;        System.out.println(\\&quot;Hello world\\&quot;);\\n&quot;);\r\n                sb.append(&quot;    }\\n&quot;);\r\n                sb.append(&quot;}\\n&quot;);\r\n        \r\n                File helloWorldJava = new File(&quot;testcompile/HelloWorld.java&quot;);\r\n                if (helloWorldJava.getParentFile().exists() || helloWorldJava.getParentFile().mkdirs()) {\r\n        \r\n                    try {\r\n                        Writer writer = null;\r\n                        try {\r\n                            writer = new FileWriter(helloWorldJava);\r\n                            writer.write(sb.toString());\r\n                            writer.flush();\r\n                        } finally {\r\n                            try {\r\n                                writer.close();\r\n                            } catch (Exception e) {\r\n                            }\r\n                        }\r\n        \r\n                        /** Compilation Requirements *********************************************************************************************/\r\n                        DiagnosticCollector&lt;JavaFileObject&gt; diagnostics = new DiagnosticCollector&lt;JavaFileObject&gt;();\r\n                        JavaCompiler compiler = ToolProvider.getSystemJavaCompiler();\r\n                        StandardJavaFileManager fileManager = compiler.getStandardFileManager(diagnostics, null, null);\r\n        \r\n                        // This sets up the class path that the compiler will use.\r\n                        // I&#39;ve added the .jar file that contains the DoStuff interface within in it...\r\n                        List&lt;String&gt; optionList = new ArrayList&lt;String&gt;();\r\n                        optionList.add(&quot;-classpath&quot;);\r\n                        optionList.add(System.getProperty(&quot;java.class.path&quot;) + &quot;;sikuli.jar&quot;);\r\n        \r\n                        Iterable&lt;? extends JavaFileObject&gt; compilationUnit\r\n                                = fileManager.getJavaFileObjectsFromFiles(Arrays.asList(helloWorldJava));\r\n                        JavaCompiler.CompilationTask task = compiler.getTask(\r\n                            null, \r\n                            fileManager, \r\n                            diagnostics, \r\n                            optionList, \r\n                            null, \r\n                            compilationUnit);\r\n                        /********************************************************************************************* Compilation Requirements **/\r\n                        if (task.call()) {\r\n                            /** Load and execute *************************************************************************************************/\r\n                            System.out.println(&quot;Yipe&quot;);\r\n                            // Create a new custom class loader, pointing to the directory that contains the compiled\r\n                            // classes, this should point to the top of the package structure!\r\n                            URLClassLoader classLoader = new URLClassLoader(new URL[]{new File(&quot;./&quot;).toURI().toURL()});\r\n                            // Load the class from the classloader by name....\r\n                            Class&lt;?&gt; loadedClass = classLoader.loadClass(&quot;testcompile.HelloWorld&quot;);\r\n                            // Create a new instance...\r\n                            Object obj = loadedClass.newInstance();\r\n                            // Santity check\r\n                            if (obj instanceof DoStuff) {\r\n                                // Cast to the DoStuff interface\r\n                                DoStuff stuffToDo = (DoStuff)obj;\r\n                                // Run it baby\r\n                                stuffToDo.doStuff();\r\n                            }\r\n                            /************************************************************************************************* Load and execute **/\r\n                        } else {\r\n                            for (Diagnostic&lt;? extends JavaFileObject&gt; diagnostic : diagnostics.getDiagnostics()) {\r\n                                System.out.format(&quot;Error on line %d in %s%n&quot;,\r\n                                        diagnostic.getLineNumber(),\r\n                                        diagnostic.getSource().toUri());\r\n                            }\r\n                        }\r\n                        fileManager.close();\r\n                    } catch (IOException | ClassNotFoundException | InstantiationException | IllegalAccessException exp) {\r\n                        exp.printStackTrace();\r\n                    }\r\n                }\r\n            }\r\n        \r\n            public static interface DoStuff {\r\n        \r\n                public void doStuff();\r\n            }\r\n        \r\n        }\r\n\r\nthe code should run but it may through error symbol not found.\r\n\r\n\r\n\r\n","title":"how to add dependencies when running the Java compiler programmatically","body":"<p>Hi I am trying to compile a java code(which contains classes from third party jars i.e; dependencies) dynamically and execute the same but its not working for me.</p>\n\n<p>Ex : If i want to execute a simple java code (System.out.println) it works fine but if i add any third party jar files (ex: selenium). It throws error that symbol not found.</p>\n\n<pre><code> import java.io.File;\n    import java.io.FileWriter;\n    import java.io.IOException;\n    import java.io.Writer;\n    import java.net.URL;\n    import java.net.URLClassLoader;\n    import java.util.ArrayList;\n    import java.util.Arrays;\n    import java.util.List;\n    import javax.tools.Diagnostic;\n    import javax.tools.DiagnosticCollector;\n    import javax.tools.JavaCompiler;\n    import javax.tools.JavaFileObject;\n    import javax.tools.StandardJavaFileManager;\n    import javax.tools.ToolProvider;\n\n    public class InlineCompiler {\n\n        public static void main(String[] args) {\n            StringBuilder sb = new StringBuilder(64);\n            sb.append(\"package testcompile;\\n\");\n      sb.append(\"import org.sikuli.script.*;\\n\");\n            sb.append(\"public class HelloWorld implements inlinecompiler.InlineCompiler.DoStuff {\\n\");\n            sb.append(\"    public void doStuff() {\\n\");\n sb.append(\"Screen s = new Screen();\\n\");\n            sb.append(\"        System.out.println(\\\"Hello world\\\");\\n\");\n            sb.append(\"    }\\n\");\n            sb.append(\"}\\n\");\n\n            File helloWorldJava = new File(\"testcompile/HelloWorld.java\");\n            if (helloWorldJava.getParentFile().exists() || helloWorldJava.getParentFile().mkdirs()) {\n\n                try {\n                    Writer writer = null;\n                    try {\n                        writer = new FileWriter(helloWorldJava);\n                        writer.write(sb.toString());\n                        writer.flush();\n                    } finally {\n                        try {\n                            writer.close();\n                        } catch (Exception e) {\n                        }\n                    }\n\n                    /** Compilation Requirements *********************************************************************************************/\n                    DiagnosticCollector&lt;JavaFileObject&gt; diagnostics = new DiagnosticCollector&lt;JavaFileObject&gt;();\n                    JavaCompiler compiler = ToolProvider.getSystemJavaCompiler();\n                    StandardJavaFileManager fileManager = compiler.getStandardFileManager(diagnostics, null, null);\n\n                    // This sets up the class path that the compiler will use.\n                    // I've added the .jar file that contains the DoStuff interface within in it...\n                    List&lt;String&gt; optionList = new ArrayList&lt;String&gt;();\n                    optionList.add(\"-classpath\");\n                    optionList.add(System.getProperty(\"java.class.path\") + \";sikuli.jar\");\n\n                    Iterable&lt;? extends JavaFileObject&gt; compilationUnit\n                            = fileManager.getJavaFileObjectsFromFiles(Arrays.asList(helloWorldJava));\n                    JavaCompiler.CompilationTask task = compiler.getTask(\n                        null, \n                        fileManager, \n                        diagnostics, \n                        optionList, \n                        null, \n                        compilationUnit);\n                    /********************************************************************************************* Compilation Requirements **/\n                    if (task.call()) {\n                        /** Load and execute *************************************************************************************************/\n                        System.out.println(\"Yipe\");\n                        // Create a new custom class loader, pointing to the directory that contains the compiled\n                        // classes, this should point to the top of the package structure!\n                        URLClassLoader classLoader = new URLClassLoader(new URL[]{new File(\"./\").toURI().toURL()});\n                        // Load the class from the classloader by name....\n                        Class&lt;?&gt; loadedClass = classLoader.loadClass(\"testcompile.HelloWorld\");\n                        // Create a new instance...\n                        Object obj = loadedClass.newInstance();\n                        // Santity check\n                        if (obj instanceof DoStuff) {\n                            // Cast to the DoStuff interface\n                            DoStuff stuffToDo = (DoStuff)obj;\n                            // Run it baby\n                            stuffToDo.doStuff();\n                        }\n                        /************************************************************************************************* Load and execute **/\n                    } else {\n                        for (Diagnostic&lt;? extends JavaFileObject&gt; diagnostic : diagnostics.getDiagnostics()) {\n                            System.out.format(\"Error on line %d in %s%n\",\n                                    diagnostic.getLineNumber(),\n                                    diagnostic.getSource().toUri());\n                        }\n                    }\n                    fileManager.close();\n                } catch (IOException | ClassNotFoundException | InstantiationException | IllegalAccessException exp) {\n                    exp.printStackTrace();\n                }\n            }\n        }\n\n        public static interface DoStuff {\n\n            public void doStuff();\n        }\n\n    }\n</code></pre>\n\n<p>the code should run but it may through error symbol not found.</p>\n"},{"tags":["java","maven","pom.xml","java-11"],"comments":[{"owner":{"account_id":112317,"reputation":93939,"user_id":296328,"accept_rate":60,"display_name":"khmarbaise"},"score":0,"creation_date":1662631537,"post_id":73646332,"comment_id":130052468,"body_markdown":"I have my doubts that this plugin supports Java modules because it too old for that...I would try the original ...because that newer https://github.com/mojohaus/aspectj-maven-plugin","body":"I have my doubts that this plugin supports Java modules because it too old for that...I would try the original ...because that newer <a href=\"https://github.com/mojohaus/aspectj-maven-plugin\" rel=\"nofollow noreferrer\">github.com/mojohaus/aspectj-maven-plugin</a>"},{"owner":{"account_id":21458031,"reputation":58,"user_id":15809313,"display_name":"Mohit Kumar"},"score":0,"creation_date":1662631934,"post_id":73646332,"comment_id":130052636,"body_markdown":"@khmarbaise can you please elaborate . I could not understood properly.","body":"@khmarbaise can you please elaborate . I could not understood properly."},{"owner":{"account_id":21458031,"reputation":58,"user_id":15809313,"display_name":"Mohit Kumar"},"score":0,"creation_date":1662707325,"post_id":73646332,"comment_id":130072143,"body_markdown":"I have changed the group id of apectj-maven-plugin to `org.codehaus.mojo`(version 1.14.0) but problem is still same. Also it gives a new error [error](https://stackoverflow.com/questions/73658409/couldnt-find-aspectjrt-jar-on-classpath-in-intellij) . Can you look at problem @khmarbaise","body":"I have changed the group id of apectj-maven-plugin to <code>org.codehaus.mojo</code>(version 1.14.0) but problem is still same. Also it gives a new error <a href=\"https://stackoverflow.com/questions/73658409/couldnt-find-aspectjrt-jar-on-classpath-in-intellij\">error</a> . Can you look at problem @khmarbaise"}],"answers":[{"tags":[],"owner":{"account_id":21458031,"reputation":58,"user_id":15809313,"display_name":"Mohit Kumar"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1664257046,"creation_date":1664257046,"answer_id":73862810,"question_id":73646332,"body_markdown":"It solved. The issue was that I was using &#39;aspectjrt&#39;(1.9.7) as a transitive dependency of &#39;aspectj-maven-plugin&#39; and this version of &#39;aspectjrt&#39; was not compatible with java-11. So I changed it to 1.9.2.\r\nAnd now it&#39;s working.\r\n\r\nAdditionaly I changed there groupId of this plugin to &#39;org.codehaus.mojo&#39; and used latest version(1.14.0).\r\n[reference](https://www.eclipse.org/aspectj/doc/released/README-192.html)","title":"Why java.util is accessible from more than one module : &lt;unnamed&gt;, java.base","body":"<p>It solved. The issue was that I was using 'aspectjrt'(1.9.7) as a transitive dependency of 'aspectj-maven-plugin' and this version of 'aspectjrt' was not compatible with java-11. So I changed it to 1.9.2.\nAnd now it's working.</p>\n<p>Additionaly I changed there groupId of this plugin to 'org.codehaus.mojo' and used latest version(1.14.0).\n<a href=\"https://www.eclipse.org/aspectj/doc/released/README-192.html\" rel=\"nofollow noreferrer\">reference</a></p>\n"}],"owner":{"account_id":21458031,"reputation":58,"user_id":15809313,"display_name":"Mohit Kumar"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":179,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"accepted_answer_id":73862810,"answer_count":1,"score":-1,"last_activity_date":1664257046,"creation_date":1662627606,"question_id":73646332,"body_markdown":"I am new to java and working on mutlimodule maven project.\r\nI am trying to upgrade project from java 8  to java 11.\r\nbut when i run &#39;mvn  clean install&#39; i get below error:\r\n\r\n```\r\n[ERROR] Failed to execute goal com.nickwongdev:aspectj-maven-plugin:1.12.6:compile (default) on project module-1: AJC compiler errors:\r\n[ERROR] error at import java.util.Collection;\r\n[ERROR]        ^^^^^^^^\r\n\r\n[ERROR] /home/project-name/module-1/apect/classname1.java:22:0::0 The package java.util is accessible from more than one module: &lt;unnamed&gt;, java.base\r\n\r\n```\r\n\r\nI am unable to figure out why and where is &lt;unnamed&gt;.\r\ni am using sdk version 11.0.16 and apache maven 3.8.6.","title":"Why java.util is accessible from more than one module : &lt;unnamed&gt;, java.base","body":"<p>I am new to java and working on mutlimodule maven project.\nI am trying to upgrade project from java 8  to java 11.\nbut when i run 'mvn  clean install' i get below error:</p>\n<pre><code>[ERROR] Failed to execute goal com.nickwongdev:aspectj-maven-plugin:1.12.6:compile (default) on project module-1: AJC compiler errors:\n[ERROR] error at import java.util.Collection;\n[ERROR]        ^^^^^^^^\n\n[ERROR] /home/project-name/module-1/apect/classname1.java:22:0::0 The package java.util is accessible from more than one module: &lt;unnamed&gt;, java.base\n\n</code></pre>\n<p>I am unable to figure out why and where is .\ni am using sdk version 11.0.16 and apache maven 3.8.6.</p>\n"},{"tags":["java","ssl"],"comments":[{"owner":{"account_id":951889,"reputation":1417,"user_id":977855,"display_name":"vinS"},"score":0,"creation_date":1513589752,"post_id":47865499,"comment_id":82695934,"body_markdown":"Possible duplicate of [How to fix the &quot;java.security.cert.CertificateException: No subject alternative names present&quot; error?](https://stackoverflow.com/questions/19540289/how-to-fix-the-java-security-cert-certificateexception-no-subject-alternative)","body":"Possible duplicate of <a href=\"https://stackoverflow.com/questions/19540289/how-to-fix-the-java-security-cert-certificateexception-no-subject-alternative\">How to fix the &quot;java.security.cert.CertificateException: No subject alternative names present&quot; error?</a>"},{"owner":{"account_id":5983487,"reputation":237,"user_id":4701655,"accept_rate":58,"display_name":"Nitin Parashar"},"score":0,"creation_date":1513597487,"post_id":47865499,"comment_id":82700476,"body_markdown":"No it is different question, In this scenario it is not connected with endpoint","body":"No it is different question, In this scenario it is not connected with endpoint"},{"owner":{"account_id":3375408,"reputation":1561,"user_id":2833622,"accept_rate":20,"display_name":"Altmish-E-Azam"},"score":0,"creation_date":1513600730,"post_id":47865499,"comment_id":82702350,"body_markdown":"SSL was issued for IP/domain/subdomain?","body":"SSL was issued for IP/domain/subdomain?"},{"owner":{"account_id":5983487,"reputation":237,"user_id":4701655,"accept_rate":58,"display_name":"Nitin Parashar"},"score":0,"creation_date":1513601692,"post_id":47865499,"comment_id":82702868,"body_markdown":"@Altmish-E-Azam Hi can u brief this what you saying","body":"@Altmish-E-Azam Hi can u brief this what you saying"}],"answers":[{"tags":[],"owner":{"account_id":174067,"reputation":106,"user_id":403197,"display_name":"jacob"},"down_vote_count":0,"up_vote_count":9,"is_accepted":true,"score":9,"last_activity_date":1602482724,"creation_date":1516889500,"answer_id":48444910,"question_id":47865499,"body_markdown":"In case anyone see this issue again. This issue is caused by an old jdk that thinks an underscore is invalid as the sub domain name, which in a later version has been removed from the jdk. So in short upgrade jdk version will solve this issue.","title":"Error : java.security.cert.CertificateException: Illegal given domain name: abc_xyz.stg.myweb.com","body":"<p>In case anyone see this issue again. This issue is caused by an old jdk that thinks an underscore is invalid as the sub domain name, which in a later version has been removed from the jdk. So in short upgrade jdk version will solve this issue.</p>\n"},{"tags":[],"owner":{"account_id":12210830,"reputation":335,"user_id":8912667,"display_name":"Fabien MIFSUD"},"down_vote_count":0,"up_vote_count":7,"is_accepted":false,"score":7,"last_activity_date":1547136858,"creation_date":1547136858,"answer_id":54132769,"question_id":47865499,"body_markdown":"In case someone see this issue again and don&#39;t want to change jdk version, it is possible to disable the SSL Host name verification (and it is not the good solution but sometimes it is not possible to avoid this..) :\r\n\r\n        HttpsURLConnection.setDefaultHostnameVerifier(new HostnameVerifier() {\r\n            public boolean verify(String hostname, SSLSession session) {\r\n                return true;\r\n            }\r\n        });","title":"Error : java.security.cert.CertificateException: Illegal given domain name: abc_xyz.stg.myweb.com","body":"<p>In case someone see this issue again and don't want to change jdk version, it is possible to disable the SSL Host name verification (and it is not the good solution but sometimes it is not possible to avoid this..) :</p>\n\n<pre><code>    HttpsURLConnection.setDefaultHostnameVerifier(new HostnameVerifier() {\n        public boolean verify(String hostname, SSLSession session) {\n            return true;\n        }\n    });\n</code></pre>\n"},{"tags":[],"owner":{"account_id":12595620,"reputation":133,"user_id":11639585,"display_name":"Tigris"},"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1601365240,"creation_date":1601365240,"answer_id":64114998,"question_id":47865499,"body_markdown":"I had the same issue, and couldn&#39;t update jdk nor wanted disable ssl host name verification. Changing the underscore character in the name to a dash (&#39;-&#39; instead of &#39;_&#39;) worked perfectly. Apparently dash and underscore are evaluated the same. ","title":"Error : java.security.cert.CertificateException: Illegal given domain name: abc_xyz.stg.myweb.com","body":"<p>I had the same issue, and couldn't update jdk nor wanted disable ssl host name verification. Changing the underscore character in the name to a dash ('-' instead of '_') worked perfectly. Apparently dash and underscore are evaluated the same.</p>\n"}],"owner":{"account_id":5983487,"reputation":237,"user_id":4701655,"accept_rate":58,"display_name":"Nitin Parashar"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":7776,"favorite_count":0,"down_vote_count":0,"up_vote_count":7,"accepted_answer_id":48444910,"answer_count":3,"score":7,"last_activity_date":1664255502,"creation_date":1513589706,"question_id":47865499,"body_markdown":"Hi team i found below exception when calling an api \r\n\r\n&gt; https://abc_xyz.stg.myweb.com/api/AuthorizedUser?username=admin&amp;password=admin\r\n&gt; \r\n&gt; java.security.cert.CertificateException: Illegal given domain name\r\n\r\n \r\n\r\nwhen getting response from server using Jersey.\r\nEverything is fine when i get response from postman.\r\n\r\nWhy it is illegal domain name, whether browser not refuse to open this.\r\n\r\nIf my domain name not contains underscore then this exception is not rising.\r\nIs this problem of underscore in domain name?","title":"Error : java.security.cert.CertificateException: Illegal given domain name: abc_xyz.stg.myweb.com","body":"<p>Hi team i found below exception when calling an api </p>\n\n<blockquote>\n  <p><a href=\"https://abc_xyz.stg.myweb.com/api/AuthorizedUser?username=admin&amp;password=admin\" rel=\"noreferrer\">https://abc_xyz.stg.myweb.com/api/AuthorizedUser?username=admin&amp;password=admin</a></p>\n  \n  <p>java.security.cert.CertificateException: Illegal given domain name</p>\n</blockquote>\n\n<p>when getting response from server using Jersey.\nEverything is fine when i get response from postman.</p>\n\n<p>Why it is illegal domain name, whether browser not refuse to open this.</p>\n\n<p>If my domain name not contains underscore then this exception is not rising.\nIs this problem of underscore in domain name?</p>\n"},{"tags":["java","spring","spring-boot","maven","dependencies"],"answers":[{"tags":[],"owner":{"account_id":3793708,"reputation":7679,"user_id":3149528,"accept_rate":50,"display_name":"Slawomir Jaranowski"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1664255465,"creation_date":1664255465,"answer_id":73862641,"question_id":73861377,"body_markdown":"Jar file generated by `spring boot` it is executable fat jar. \r\n\r\nIt contains `spring boot` loader, all application dependencies, application configuration and of course application classes but in special directory visible for `spring boot` loader only.\r\n\r\nOriginal jar is preserved as a copy in `target/project-version.jar.original`\r\nYou can compare output of:\r\n\r\n```\r\njar --list --file=target/project-version.jar.original\r\njar --list --file=target/project-version.jar\r\n```\r\n\r\nSo simply you can not use `spring boot` application as dependencies. \r\n\r\nIn order to share some code between two `spring boot` application you should create another project - **standard jar - not spring boot application** with shared staff and use it as dependencies in both application.\r\n","title":"How can I add a spring-based project as a Maven dependency in another project?","body":"<p>Jar file generated by <code>spring boot</code> it is executable fat jar.</p>\n<p>It contains <code>spring boot</code> loader, all application dependencies, application configuration and of course application classes but in special directory visible for <code>spring boot</code> loader only.</p>\n<p>Original jar is preserved as a copy in <code>target/project-version.jar.original</code>\nYou can compare output of:</p>\n<pre><code>jar --list --file=target/project-version.jar.original\njar --list --file=target/project-version.jar\n</code></pre>\n<p>So simply you can not use <code>spring boot</code> application as dependencies.</p>\n<p>In order to share some code between two <code>spring boot</code> application you should create another project - <strong>standard jar - not spring boot application</strong> with shared staff and use it as dependencies in both application.</p>\n"}],"owner":{"account_id":26452510,"reputation":1,"user_id":20095525,"display_name":"Xeonfin"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":575,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1664255465,"creation_date":1664240954,"question_id":73861377,"body_markdown":"I created Project A from spring initalizr, the pom.xml looks essentially like this:\r\n\r\n\r\n\t&lt;parent&gt;\r\n\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t&lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\r\n\t\t&lt;version&gt;3.0.0-SNAPSHOT&lt;/version&gt;\r\n\t\t&lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;\r\n\t&lt;/parent&gt;\r\n\r\n\t&lt;groupId&gt;my.group.id&lt;/groupId&gt;\r\n\t&lt;artifactId&gt;projectA&lt;/artifactId&gt;\r\n\t&lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\r\n\t&lt;name&gt;ProjectA&lt;/name&gt;\r\n\r\n\t&lt;dependencies&gt;\r\n\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\n        &lt;!-- [...] many more Spring and non-spring related dependencies --&gt;\r\n\r\n\t&lt;/dependencies&gt;\r\n\r\n        &lt;!--  org.springframework.boot plugin, repositories and plugin repos here --&gt;\r\n\r\n&lt;/project&gt;\r\n\r\nThis is a standalone project, in the sense that it is able to run from a main class as a Spring app. This is very useful for testing purposes. \r\n\r\nI want to be able to use Project A as part of another project (Project B) - that is - another Spring application should scan all of the beans of ProjectA in addition to its own. ProjectA also has some files in the /resources folder which need to remain available. (Ideally, these would end up in the root of the final executable jar).\r\n\r\nI tried installing PrA (IntelliJ has a handy **intall** option under the Maven menu) it in my local repository and adding it as a dependency in **Project B**, but that imports neither its own dependencies (so spring annotations in project B won&#39;t work) nor its classes. Specifying the dependency type as `pom` fixed the first issue but not the second.\r\n\r\nNow, **Project B** can use all of project A&#39;s dependencies without having to import them.\r\nHowever, no classes of project A can be either seen, scanned or even imported in project B.\r\n\r\n**What am I doing wrong?** Sorry, Maven is still very obscure to me.\r\n\r\n\r\nI have tried:\r\n\r\n - Setting Project A as parent - nothing changes\r\n - Invalidating caches\r\n - Maven update\r\n - Checking .m2 folder - Project A is correctly there\r\n - Removing the `&lt;build&gt;&lt;/&gt;` portion of pom.xml in PA. It changes nothing.\r\n ","title":"How can I add a spring-based project as a Maven dependency in another project?","body":"<p>I created Project A from spring initalizr, the pom.xml looks essentially like this:</p>\n<pre><code>&lt;parent&gt;\n    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n    &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\n    &lt;version&gt;3.0.0-SNAPSHOT&lt;/version&gt;\n    &lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;\n&lt;/parent&gt;\n\n&lt;groupId&gt;my.group.id&lt;/groupId&gt;\n&lt;artifactId&gt;projectA&lt;/artifactId&gt;\n&lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\n&lt;name&gt;ProjectA&lt;/name&gt;\n\n&lt;dependencies&gt;\n\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt;\n    &lt;/dependency&gt;\n\n    &lt;!-- [...] many more Spring and non-spring related dependencies --&gt;\n\n&lt;/dependencies&gt;\n\n    &lt;!--  org.springframework.boot plugin, repositories and plugin repos here --&gt;\n</code></pre>\n\n<p>This is a standalone project, in the sense that it is able to run from a main class as a Spring app. This is very useful for testing purposes.</p>\n<p>I want to be able to use Project A as part of another project (Project B) - that is - another Spring application should scan all of the beans of ProjectA in addition to its own. ProjectA also has some files in the /resources folder which need to remain available. (Ideally, these would end up in the root of the final executable jar).</p>\n<p>I tried installing PrA (IntelliJ has a handy <strong>intall</strong> option under the Maven menu) it in my local repository and adding it as a dependency in <strong>Project B</strong>, but that imports neither its own dependencies (so spring annotations in project B won't work) nor its classes. Specifying the dependency type as <code>pom</code> fixed the first issue but not the second.</p>\n<p>Now, <strong>Project B</strong> can use all of project A's dependencies without having to import them.\nHowever, no classes of project A can be either seen, scanned or even imported in project B.</p>\n<p><strong>What am I doing wrong?</strong> Sorry, Maven is still very obscure to me.</p>\n<p>I have tried:</p>\n<ul>\n<li>Setting Project A as parent - nothing changes</li>\n<li>Invalidating caches</li>\n<li>Maven update</li>\n<li>Checking .m2 folder - Project A is correctly there</li>\n<li>Removing the <code>&lt;build&gt;&lt;/&gt;</code> portion of pom.xml in PA. It changes nothing.</li>\n</ul>\n"},{"tags":["java","spring","jpa","spring-batch"],"answers":[{"tags":[],"owner":{"account_id":6482932,"reputation":29552,"user_id":5019386,"display_name":"Mahmoud Ben Hassine"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1664254900,"creation_date":1664254900,"answer_id":73862586,"question_id":73861887,"body_markdown":"The code you shared is incorrect: The reader is defined as `ItemReader&lt;StudentDTO&gt;` but the read method returns another type `public MyDTO read()`.\r\n\r\nSpring Batch provides the `RepositoryItemWriter` which uses a JPA repository to persist items in a database. If needed, you can extend this built-in writer to customize how data is persisted.","title":"How to write Item writer to save DB","body":"<p>The code you shared is incorrect: The reader is defined as <code>ItemReader&lt;StudentDTO&gt;</code> but the read method returns another type <code>public MyDTO read()</code>.</p>\n<p>Spring Batch provides the <code>RepositoryItemWriter</code> which uses a JPA repository to persist items in a database. If needed, you can extend this built-in writer to customize how data is persisted.</p>\n"}],"owner":{"account_id":8582865,"reputation":4145,"user_id":6474292,"accept_rate":56,"display_name":"David"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":406,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1664255288,"creation_date":1664247394,"question_id":73861887,"body_markdown":"How to write Item writer to save DB. \r\n\r\n\r\nI am using spring batch where I am able to create a custom IteamReader. Now I need to save to DB but i am not getting hold of data in Item Writer. \r\n\r\n\r\nhere is my code  :\r\n\r\n    public class BatchConfig {\r\n    \r\n        @Autowired\r\n        MyRepo myrepo;\r\n        \r\n        @Bean\r\n        public ItemReader&lt;MyDTO&gt; itemReader() {\r\n            return new myItemReader();\r\n        }\r\n    \r\n        @Bean\r\n        public ItemWriter&lt;MyDTO&gt; itemWriter() {\r\n            return new LoggingItemWriter();\r\n        }\r\n    \r\n        @Bean\r\n        public Step exampleJobStep(ItemReader&lt;MyDTO&gt; reader,\r\n                                   ItemWriter&lt;MyDTO&gt; writer,\r\n                                   StepBuilderFactory stepBuilderFactory) {\r\n            return stepBuilderFactory.get(&quot;exampleJobStep&quot;)\r\n                    .&lt;MyDTO, MyDTO&gt;chunk(1)\r\n                    .reader(reader)\r\n                    .writer(writer)\r\n                    .build();\r\n        }\r\n    \r\n        @Bean\r\n        public Job exampleJob(Step exampleJobStep,\r\n                              JobBuilderFactory jobBuilderFactory) {\r\n            return jobBuilderFactory.get(&quot;exampleJob&quot;)\r\n                    .incrementer(new RunIdIncrementer())\r\n                    .flow(exampleJobStep)\r\n                    .end()\r\n                    .build();\r\n        }\r\n    }\r\n\r\nNow I will show you itemreader and itemWriter code. \r\n\r\nITEMREADER : \r\n\r\n    public class myItemReader implements ItemReader&lt;MyDTO&gt; {\r\n     \r\n        private int index;\r\n        private List&lt;MyDTO&gt; myData = new ArrayList&lt;&gt;();\r\n     \r\n        InMemoryStudentReader() {\r\n            initialize();\r\n        }\r\n     \r\n        private void initialize() {\r\n            for(int i=0; i&lt;5; i++){\r\n                MyDTO newObj = new MyDTO();\r\n                newObj.setId(id) \r\n                newObj.setName(firstName);\r\n                // some random setting values based on index...\r\n    \r\n                myData.add(newObj);\r\n                index = 0;\r\n            }\r\n        }\r\n     \r\n        @Override\r\n        public MyDTO read() throws Exception {\r\n            MyDTO nextDTO = null;\r\n     \r\n            if (index &lt; myData.size()) {\r\n                nextDTO = myData.get(index);\r\n                index++;\r\n            }\r\n            else {\r\n                index = 0;\r\n            }\r\n     \r\n            return nextDTO;\r\n        }\r\n    }\r\n\r\nItemWriter ;\r\n\r\n    public class LoggingItemWriter implements ItemWriter&lt;AreaBoundaryDTO&gt;{\r\n    \r\n        private static final Logger LOGGER = LoggerFactory.getLogger(LoggingItemWriter.class);\r\n    \r\n        public LoggingItemWriter() {\r\n           System.out.println(&quot;test&quot;);\r\n    \r\n        }\r\n    \r\n        @Override\r\n        public void write(List&lt;? extends AreaBoundaryDTO&gt; list) throws Exception {\r\n            for (MyDTO item : list) {\r\n                System.out.println(&quot;test&quot;+list);\r\n            }\r\n    \r\n        }\r\n    }\r\n\r\nWhat I want here is I want to save Data in myrepo.save() where data is myArray list which i have saved in myData during Iteamreader. \r\n\r\nCan anybody help me how to save these data which I am getting in itemreader to database through JPA repository.\r\n\r\n\r\nI was following this [Example][1]\r\n\r\n\r\n  [1]: https://www.petrikainulainen.net/programming/spring-framework/spring-batch-tutorial-creating-a-custom-itemreader/\r\n\r\n","title":"How to write Item writer to save DB","body":"<p>How to write Item writer to save DB.</p>\n<p>I am using spring batch where I am able to create a custom IteamReader. Now I need to save to DB but i am not getting hold of data in Item Writer.</p>\n<p>here is my code  :</p>\n<pre><code>public class BatchConfig {\n\n    @Autowired\n    MyRepo myrepo;\n    \n    @Bean\n    public ItemReader&lt;MyDTO&gt; itemReader() {\n        return new myItemReader();\n    }\n\n    @Bean\n    public ItemWriter&lt;MyDTO&gt; itemWriter() {\n        return new LoggingItemWriter();\n    }\n\n    @Bean\n    public Step exampleJobStep(ItemReader&lt;MyDTO&gt; reader,\n                               ItemWriter&lt;MyDTO&gt; writer,\n                               StepBuilderFactory stepBuilderFactory) {\n        return stepBuilderFactory.get(&quot;exampleJobStep&quot;)\n                .&lt;MyDTO, MyDTO&gt;chunk(1)\n                .reader(reader)\n                .writer(writer)\n                .build();\n    }\n\n    @Bean\n    public Job exampleJob(Step exampleJobStep,\n                          JobBuilderFactory jobBuilderFactory) {\n        return jobBuilderFactory.get(&quot;exampleJob&quot;)\n                .incrementer(new RunIdIncrementer())\n                .flow(exampleJobStep)\n                .end()\n                .build();\n    }\n}\n</code></pre>\n<p>Now I will show you itemreader and itemWriter code.</p>\n<p>ITEMREADER :</p>\n<pre><code>public class myItemReader implements ItemReader&lt;MyDTO&gt; {\n \n    private int index;\n    private List&lt;MyDTO&gt; myData = new ArrayList&lt;&gt;();\n \n    InMemoryStudentReader() {\n        initialize();\n    }\n \n    private void initialize() {\n        for(int i=0; i&lt;5; i++){\n            MyDTO newObj = new MyDTO();\n            newObj.setId(id) \n            newObj.setName(firstName);\n            // some random setting values based on index...\n\n            myData.add(newObj);\n            index = 0;\n        }\n    }\n \n    @Override\n    public MyDTO read() throws Exception {\n        MyDTO nextDTO = null;\n \n        if (index &lt; myData.size()) {\n            nextDTO = myData.get(index);\n            index++;\n        }\n        else {\n            index = 0;\n        }\n \n        return nextDTO;\n    }\n}\n</code></pre>\n<p>ItemWriter ;</p>\n<pre><code>public class LoggingItemWriter implements ItemWriter&lt;AreaBoundaryDTO&gt;{\n\n    private static final Logger LOGGER = LoggerFactory.getLogger(LoggingItemWriter.class);\n\n    public LoggingItemWriter() {\n       System.out.println(&quot;test&quot;);\n\n    }\n\n    @Override\n    public void write(List&lt;? extends AreaBoundaryDTO&gt; list) throws Exception {\n        for (MyDTO item : list) {\n            System.out.println(&quot;test&quot;+list);\n        }\n\n    }\n}\n</code></pre>\n<p>What I want here is I want to save Data in myrepo.save() where data is myArray list which i have saved in myData during Iteamreader.</p>\n<p>Can anybody help me how to save these data which I am getting in itemreader to database through JPA repository.</p>\n<p>I was following this <a href=\"https://www.petrikainulainen.net/programming/spring-framework/spring-batch-tutorial-creating-a-custom-itemreader/\" rel=\"nofollow noreferrer\">Example</a></p>\n"},{"tags":["java","code-coverage","jacoco","jacoco-maven-plugin"],"comments":[{"owner":{"account_id":11942036,"reputation":164,"user_id":8738512,"display_name":"David"},"score":0,"creation_date":1663649872,"post_id":73781759,"comment_id":130283376,"body_markdown":"Do you have a reproducer for the wrong coverage score? \nHere are solutions to get per test coverage: https://stackoverflow.com/questions/38094676/jacoco-coverage-per-test-setup","body":"Do you have a reproducer for the wrong coverage score?  Here are solutions to get per test coverage: <a href=\"https://stackoverflow.com/questions/38094676/jacoco-coverage-per-test-setup\" title=\"jacoco coverage per test setup\">stackoverflow.com/questions/38094676/&hellip;</a>"},{"owner":{"account_id":26386447,"reputation":11,"user_id":20038887,"display_name":"Lavanya Namburi"},"score":0,"creation_date":1663740147,"post_id":73781759,"comment_id":130307492,"body_markdown":"Hi David, When i right click my test file on Intellij and do run With Coverage, its showing 100% coverage. But When i run maven install which also runs all tests in my project and create jacaco report, i see coverage for same file as 6% . I dont understand why because logically i have written many test cases including positive and negative for the class and im sure it covers all the lines of my class. i m using Jacaco as shown in my pom.xml in post","body":"Hi David, When i right click my test file on Intellij and do run With Coverage, its showing 100% coverage. But When i run maven install which also runs all tests in my project and create jacaco report, i see coverage for same file as 6% . I dont understand why because logically i have written many test cases including positive and negative for the class and im sure it covers all the lines of my class. i m using Jacaco as shown in my pom.xml in post"},{"owner":{"account_id":26386447,"reputation":11,"user_id":20038887,"display_name":"Lavanya Namburi"},"score":0,"creation_date":1663740213,"post_id":73781759,"comment_id":130307511,"body_markdown":"I also checked the link you shared before, i wasnt able to run my tests when i was using sure-fire plugin as suggested in post. I followed exact same steps mentioned there. so reverted them back","body":"I also checked the link you shared before, i wasnt able to run my tests when i was using sure-fire plugin as suggested in post. I followed exact same steps mentioned there. so reverted them back"},{"owner":{"account_id":11942036,"reputation":164,"user_id":8738512,"display_name":"David"},"score":0,"creation_date":1663743822,"post_id":73781759,"comment_id":130308394,"body_markdown":"Normally in the Jacoco report you see every line and branch that has coverage. Look in target/site/jacoco/","body":"Normally in the Jacoco report you see every line and branch that has coverage. Look in target/site/jacoco/"},{"owner":{"account_id":26386447,"reputation":11,"user_id":20038887,"display_name":"Lavanya Namburi"},"score":0,"creation_date":1663758765,"post_id":73781759,"comment_id":130313539,"body_markdown":"HI David, yes i checked same, its showing most of the lines in red, though i have unit tests that execute those lines. Same files is shown full green on all lines when i run test class with intellj run with coverage option.","body":"HI David, yes i checked same, its showing most of the lines in red, though i have unit tests that execute those lines. Same files is shown full green on all lines when i run test class with intellj run with coverage option."},{"owner":{"account_id":26386447,"reputation":11,"user_id":20038887,"display_name":"Lavanya Namburi"},"score":0,"creation_date":1663759785,"post_id":73781759,"comment_id":130313948,"body_markdown":"What i feel happening is when i run individual test class, its coverage is shown correctly, where as when i run all tests at once, coverage is overwritten in the order of test classes executed. For example I have a CustomException class with a test class, when i run it individually it shows 100% coverage on CustomException class. But when i run all tests , lets say the last test class that is getting executed has used only 1 method in my CustomException then the previously reported 100% coverage by CustomExceptionTest class is replaced with 50% by last executed TestClass.","body":"What i feel happening is when i run individual test class, its coverage is shown correctly, where as when i run all tests at once, coverage is overwritten in the order of test classes executed. For example I have a CustomException class with a test class, when i run it individually it shows 100% coverage on CustomException class. But when i run all tests , lets say the last test class that is getting executed has used only 1 method in my CustomException then the previously reported 100% coverage by CustomExceptionTest class is replaced with 50% by last executed TestClass."},{"owner":{"account_id":26386447,"reputation":11,"user_id":20038887,"display_name":"Lavanya Namburi"},"score":0,"creation_date":1663759837,"post_id":73781759,"comment_id":130313965,"body_markdown":"Any idea how i can generate cumulative report without data getting overwritten? The report i see finally is the coverage of last test class that got executed in sequence.","body":"Any idea how i can generate cumulative report without data getting overwritten? The report i see finally is the coverage of last test class that got executed in sequence."},{"owner":{"account_id":11942036,"reputation":164,"user_id":8738512,"display_name":"David"},"score":0,"creation_date":1663761827,"post_id":73781759,"comment_id":130314597,"body_markdown":"To be honst i have no idea and never encountered this. Maybe you should try to get  sure-fire running i never saw jacoco running without it and didnt even know it was possible","body":"To be honst i have no idea and never encountered this. Maybe you should try to get  sure-fire running i never saw jacoco running without it and didnt even know it was possible"},{"owner":{"account_id":26386447,"reputation":11,"user_id":20038887,"display_name":"Lavanya Namburi"},"score":0,"creation_date":1663824350,"post_id":73781759,"comment_id":130330784,"body_markdown":"hi, mine was multi module project. i followed exact steps mentioned in below link and it solved my problem.                                                                                                              https://giri-tech.blogspot.com/2021/08/maven-multi-module-java-project-code.html?lr=1","body":"hi, mine was multi module project. i followed exact steps mentioned in below link and it solved my problem.                                                                                                              <a href=\"https://giri-tech.blogspot.com/2021/08/maven-multi-module-java-project-code.html?lr=1\" rel=\"nofollow noreferrer\">giri-tech.blogspot.com/2021/08/&hellip;</a>"}],"answers":[{"tags":[],"owner":{"account_id":26386447,"reputation":11,"user_id":20038887,"display_name":"Lavanya Namburi"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1664255208,"creation_date":1664255208,"answer_id":73862611,"question_id":73781759,"body_markdown":"I followed the steps in below link and it solved the issue. Note, mine was a multi module project and i wanted code coverage as a single report for all modules.\r\n\r\nhttps://giri-tech.blogspot.com/2021/08/maven-multi-module-java-project-code.html\r\n\r\n","title":"Jacoco code coverage report showing wrong","body":"<p>I followed the steps in below link and it solved the issue. Note, mine was a multi module project and i wanted code coverage as a single report for all modules.</p>\n<p><a href=\"https://giri-tech.blogspot.com/2021/08/maven-multi-module-java-project-code.html\" rel=\"nofollow noreferrer\">https://giri-tech.blogspot.com/2021/08/maven-multi-module-java-project-code.html</a></p>\n"}],"owner":{"account_id":26386447,"reputation":11,"user_id":20038887,"display_name":"Lavanya Namburi"},"comment_count":9,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":2420,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1664255208,"creation_date":1663649158,"question_id":73781759,"body_markdown":"When I run individual test classes, it shows 100% coverage where as when I taken maven build for whole project then Jacoco report showing wrong coverage percentage for many classes. Is there a way to get jacaco report per test class? \r\n\r\nBelow is my pom configuration\r\n\r\n          &lt;plugin&gt;\r\n                &lt;groupId&gt;org.jacoco&lt;/groupId&gt;\r\n                &lt;artifactId&gt;jacoco-maven-plugin&lt;/artifactId&gt;\r\n                &lt;version&gt;0.8.6&lt;/version&gt;\r\n                &lt;executions&gt;\r\n                    &lt;execution&gt;\r\n                        &lt;id&gt;default-prepare-agent&lt;/id&gt;\r\n                        &lt;goals&gt;\r\n                            &lt;goal&gt;prepare-agent&lt;/goal&gt;\r\n                        &lt;/goals&gt;\r\n                    &lt;/execution&gt;\r\n                    &lt;execution&gt;\r\n                        &lt;id&gt;default-report&lt;/id&gt;\r\n                        &lt;goals&gt;\r\n                            &lt;goal&gt;report&lt;/goal&gt;\r\n                        &lt;/goals&gt;\r\n                    &lt;/execution&gt;\r\n                &lt;/executions&gt;\r\n            &lt;/plugin&gt;  ","title":"Jacoco code coverage report showing wrong","body":"<p>When I run individual test classes, it shows 100% coverage where as when I taken maven build for whole project then Jacoco report showing wrong coverage percentage for many classes. Is there a way to get jacaco report per test class?</p>\n<p>Below is my pom configuration</p>\n<pre><code>      &lt;plugin&gt;\n            &lt;groupId&gt;org.jacoco&lt;/groupId&gt;\n            &lt;artifactId&gt;jacoco-maven-plugin&lt;/artifactId&gt;\n            &lt;version&gt;0.8.6&lt;/version&gt;\n            &lt;executions&gt;\n                &lt;execution&gt;\n                    &lt;id&gt;default-prepare-agent&lt;/id&gt;\n                    &lt;goals&gt;\n                        &lt;goal&gt;prepare-agent&lt;/goal&gt;\n                    &lt;/goals&gt;\n                &lt;/execution&gt;\n                &lt;execution&gt;\n                    &lt;id&gt;default-report&lt;/id&gt;\n                    &lt;goals&gt;\n                        &lt;goal&gt;report&lt;/goal&gt;\n                    &lt;/goals&gt;\n                &lt;/execution&gt;\n            &lt;/executions&gt;\n        &lt;/plugin&gt;  \n</code></pre>\n"},{"tags":["java","if-statement","console","numbers"],"answers":[{"tags":[],"owner":{"account_id":8056033,"reputation":2316,"user_id":6073148,"accept_rate":75,"display_name":"Zahid Khan"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1664253645,"creation_date":1664253291,"answer_id":73862442,"question_id":73862343,"body_markdown":"You need to remove this statement\r\n\r\n    if (choice == 1) {   //this statement\r\n       if (choice &lt; 0 || choice &gt; 6) {\r\n          System.out.println(&quot;You made a invalid choice, please try again&quot;);\r\n       }\r\n\r\nOr else when the `choice` will be set to 1. The condition `if (choice &lt; 0 || choice &gt; 6) ` is always true.\r\n\r\nFurthermore, the conditions:\r\n\r\n 1.  `if (choice == 1) {` is always `true` \r\n 2. `if (choice == 2) ` is always `false`.\r\n\r\n\r\nYou need to remove scanning the next line as well as it seems meaningless to me.\r\n\r\n    int choice = input.nextInt();\r\n    input.nextLine();  //remove this","title":"How do I make it so when I call a number, it gives me a specific word in java console?","body":"<p>You need to remove this statement</p>\n<pre><code>if (choice == 1) {   //this statement\n   if (choice &lt; 0 || choice &gt; 6) {\n      System.out.println(&quot;You made a invalid choice, please try again&quot;);\n   }\n</code></pre>\n<p>Or else when the <code>choice</code> will be set to 1. The condition <code>if (choice &lt; 0 || choice &gt; 6) </code> is always true.</p>\n<p>Furthermore, the conditions:</p>\n<ol>\n<li><code>if (choice == 1) {</code> is always <code>true</code></li>\n<li><code>if (choice == 2) </code> is always <code>false</code>.</li>\n</ol>\n<p>You need to remove scanning the next line as well as it seems meaningless to me.</p>\n<pre><code>int choice = input.nextInt();\ninput.nextLine();  //remove this\n</code></pre>\n"}],"owner":{"account_id":26453504,"reputation":11,"user_id":20096365,"display_name":"Clayton"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":51,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":73862442,"answer_count":1,"score":1,"last_activity_date":1664253645,"creation_date":1664252419,"question_id":73862343,"body_markdown":"I am new to java and I am already stumped. I am trying to make a method that allows you to create a drink in console. I get stuck when using the if statements and setting the right size and drink type. When I run the code, everything works fine until when making it so when you type a certain number, it will set the size of the drink. If I type in 2 for the size option, which is assigned to Short, it will set Demi as the size even thought it should set Short when I type in 2, and Demi when I type 1. The method btw is in a subclass that extends a superclass and the method is to be called from the main class. If you need more info or if this is not enough code to tell what I&#39;m doing specifically please let me know and I will try to give more info.\r\n\r\n\r\n   \r\n  `public void makeDrink(Scanner input) {`\r\n   \r\n    showOptions();\r\n    int choice = input.nextInt();\r\n    input.nextLine();\r\n\r\n    while (choice != 0) {\r\n      if (choice &gt; 4 || choice &lt; 0) {\r\n        System.out.println(&quot;You made a invalid choice, please reset&quot;);\r\n      }\r\n\r\n      /*\r\n       * Chose Size of the drink\r\n       */ \r\n      if (choice == 1) {\r\n        if(choice &lt; 0 || choice &gt; 6) {\r\n         System.out.println(&quot;You made a invalid choice, please try again&quot;); \r\n        }\r\n        System.out.println(&quot;&quot;);\r\n        System.out.println(&quot;&quot;);\r\n        System.out.println(&quot;&quot;);\r\n        System.out.println(&quot;&quot;);\r\n        System.out.println(&quot;Choose the size&quot;);\r\n        System.out.println(&quot;~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~&quot;);\r\n        System.out.println(&quot;|1. Demi (3 oz)|2. Short (8 oz)|3. Tall (12 oz)|4. Grande (16 oz)|5. Venti (20 oz)|6. Trenta (30 oz)|&quot;);\r\n        System.out.println(&quot;~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~&quot;);\r\n        input.nextInt();\r\n\r\n        // first issue starts here\r\n        if (choice == 1) {\r\n          setSize(&quot;Demi&quot;);\r\n        }\r\n\r\n        if (choice == 2) {\r\n          setSize(&quot;Short&quot;);\r\n        }\r\n        // first issue ends here\r\n      }\r\n\r\n      /*\r\n       * Choose Drink\r\n       */\r\n      if (choice == 2) {\r\n        System.out.println(&quot;&quot;);\r\n        System.out.println(&quot;&quot;);\r\n        System.out.println(&quot;&quot;);\r\n        System.out.println(&quot;&quot;);\r\n        System.out.println(&quot;Choose the Drink&quot;);\r\n        System.out.println(&quot;~~~~~~~~~~~~~~~~~~&quot;);\r\n        System.out.println(&quot;|1. Coffee|2. Tea|&quot;);\r\n        System.out.println(&quot;~~~~~~~~~~~~~~~~~~&quot;);\r\n        String type = input.nextLine();\r\n      // second issue starts here\r\n      if (choice == 1) {\r\n        setType(&quot;Coffee&quot;);\r\n      }\r\n      if (choice == 2) {\r\n        setType(&quot;Tea&quot;);\r\n      }\r\n      // second issue ends here\r\n        \r\n      showOptions();\r\n      choice = input.nextInt();\r\n      }\r\n  }","title":"How do I make it so when I call a number, it gives me a specific word in java console?","body":"<p>I am new to java and I am already stumped. I am trying to make a method that allows you to create a drink in console. I get stuck when using the if statements and setting the right size and drink type. When I run the code, everything works fine until when making it so when you type a certain number, it will set the size of the drink. If I type in 2 for the size option, which is assigned to Short, it will set Demi as the size even thought it should set Short when I type in 2, and Demi when I type 1. The method btw is in a subclass that extends a superclass and the method is to be called from the main class. If you need more info or if this is not enough code to tell what I'm doing specifically please let me know and I will try to give more info.</p>\n<p><code>public void makeDrink(Scanner input) {</code></p>\n<pre><code>showOptions();\nint choice = input.nextInt();\ninput.nextLine();\n\nwhile (choice != 0) {\n  if (choice &gt; 4 || choice &lt; 0) {\n    System.out.println(&quot;You made a invalid choice, please reset&quot;);\n  }\n\n  /*\n   * Chose Size of the drink\n   */ \n  if (choice == 1) {\n    if(choice &lt; 0 || choice &gt; 6) {\n     System.out.println(&quot;You made a invalid choice, please try again&quot;); \n    }\n    System.out.println(&quot;&quot;);\n    System.out.println(&quot;&quot;);\n    System.out.println(&quot;&quot;);\n    System.out.println(&quot;&quot;);\n    System.out.println(&quot;Choose the size&quot;);\n    System.out.println(&quot;~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~&quot;);\n    System.out.println(&quot;|1. Demi (3 oz)|2. Short (8 oz)|3. Tall (12 oz)|4. Grande (16 oz)|5. Venti (20 oz)|6. Trenta (30 oz)|&quot;);\n    System.out.println(&quot;~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~&quot;);\n    input.nextInt();\n\n    // first issue starts here\n    if (choice == 1) {\n      setSize(&quot;Demi&quot;);\n    }\n\n    if (choice == 2) {\n      setSize(&quot;Short&quot;);\n    }\n    // first issue ends here\n  }\n\n  /*\n   * Choose Drink\n   */\n  if (choice == 2) {\n    System.out.println(&quot;&quot;);\n    System.out.println(&quot;&quot;);\n    System.out.println(&quot;&quot;);\n    System.out.println(&quot;&quot;);\n    System.out.println(&quot;Choose the Drink&quot;);\n    System.out.println(&quot;~~~~~~~~~~~~~~~~~~&quot;);\n    System.out.println(&quot;|1. Coffee|2. Tea|&quot;);\n    System.out.println(&quot;~~~~~~~~~~~~~~~~~~&quot;);\n    String type = input.nextLine();\n  // second issue starts here\n  if (choice == 1) {\n    setType(&quot;Coffee&quot;);\n  }\n  if (choice == 2) {\n    setType(&quot;Tea&quot;);\n  }\n  // second issue ends here\n    \n  showOptions();\n  choice = input.nextInt();\n  }\n</code></pre>\n<p>}</p>\n"},{"tags":["java","macos","jpackage","full-disk-access"],"owner":{"account_id":1062115,"reputation":2086,"user_id":1063501,"display_name":"Mark Woon"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":277,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"answer_count":0,"score":3,"last_activity_date":1664253440,"creation_date":1595825840,"question_id":63108924,"body_markdown":"I&#39;ve created a java app that&#39;s packaged with `jpackage`.  Compiled and packaged with AdoptOpenJDK 14.  \r\n\r\nAfter installing on a mac, it needs full disk access to copy files to the `/Application` directory.\r\n\r\nUnfortunately, I simply cannot figure out how to do so.  Granting full disk access to the app does not seem to make any difference.\r\n\r\nUsing `jpackage` is not important.  It just looked like the simplest way to get it done.  I&#39;m happy to package it using something else as long as it&#39;s possible for it to get full disk access.\r\n","title":"How can I grant a java app packaged with jpackage full disk access on a mac?","body":"<p>I've created a java app that's packaged with <code>jpackage</code>.  Compiled and packaged with AdoptOpenJDK 14.</p>\n<p>After installing on a mac, it needs full disk access to copy files to the <code>/Application</code> directory.</p>\n<p>Unfortunately, I simply cannot figure out how to do so.  Granting full disk access to the app does not seem to make any difference.</p>\n<p>Using <code>jpackage</code> is not important.  It just looked like the simplest way to get it done.  I'm happy to package it using something else as long as it's possible for it to get full disk access.</p>\n"},{"tags":["java","regex"],"answers":[{"tags":[],"owner":{"account_id":2820814,"reputation":1038,"user_id":2424611,"display_name":"mahesh"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1664251745,"creation_date":1664251745,"answer_id":73862283,"question_id":73862221,"body_markdown":"You should escape the parenthesis.\r\n\r\n    IF(\\([^)]+\\))\r\nWith this, it should work.\r\nYou will find a list of characters that need to be escaped (though there it is for javasript) in a regex here: https://stackoverflow.com/questions/5105143/list-of-all-characters-that-should-be-escaped-before-put-in-to-regex\r\nIn summary, generally, you should escape these characters: `. \\ + * ? [ ^ ] $ ( ) { } = ! &lt; &gt; | : -`","title":"Extract string enclosed by parenthesis","body":"<p>You should escape the parenthesis.</p>\n<pre><code>IF(\\([^)]+\\))\n</code></pre>\n<p>With this, it should work.\nYou will find a list of characters that need to be escaped (though there it is for javasript) in a regex here: <a href=\"https://stackoverflow.com/questions/5105143/list-of-all-characters-that-should-be-escaped-before-put-in-to-regex\">List of all characters that should be escaped before put in to RegEx?</a>\nIn summary, generally, you should escape these characters: <code>. \\ + * ? [ ^ ] $ ( ) { } = ! &lt; &gt; | : -</code></p>\n"},{"tags":[],"owner":{"account_id":2485939,"reputation":19426,"user_id":2164365,"accept_rate":40,"display_name":"Abra"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1664252671,"creation_date":1664252671,"answer_id":73862377,"question_id":73862221,"body_markdown":"The below code achieves your desired result:\r\n```java\r\npublic class MyClass {\r\n    public static void main(String args[]) {\r\n        String formula = &quot;test+IF(one,2,2)+Wow+IF(two,1,1)&quot;;\r\n        java.util.regex.Pattern pattern = java.util.regex.Pattern.compile(&quot;IF\\\\(.*?\\\\)&quot;);\r\n        java.util.regex.Matcher matcher = pattern.matcher(formula);\r\n        while(matcher.find()) {\r\n            System.out.println(matcher.group(0));\r\n        }\r\n    }\r\n}\r\n```\r\nThe regular expression is the literal string `IF` followed by a (literal) opening parenthesis (i.e. `(`) followed by zero or more characters. The question mark is a reluctant qualifier which means that the string of any characters will be terminated by the first closing parenthesis encountered. Refer to this [regex101][1] and this [JDoodle][2] as well as the [documentation][3] for class `java.util.regex.Pattern`.\r\n\r\nRunning the above code produces the following output:\r\n```none\r\nIF(one,2,2)\r\nIF(two,1,1)\r\n```\r\n\r\n\r\n  [1]: https://regex101.com/r/bc8Ohe/1\r\n  [2]: https://www.jdoodle.com/iembed/v0/w4R\r\n  [3]: https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/regex/Pattern.html","title":"Extract string enclosed by parenthesis","body":"<p>The below code achieves your desired result:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class MyClass {\n    public static void main(String args[]) {\n        String formula = &quot;test+IF(one,2,2)+Wow+IF(two,1,1)&quot;;\n        java.util.regex.Pattern pattern = java.util.regex.Pattern.compile(&quot;IF\\\\(.*?\\\\)&quot;);\n        java.util.regex.Matcher matcher = pattern.matcher(formula);\n        while(matcher.find()) {\n            System.out.println(matcher.group(0));\n        }\n    }\n}\n</code></pre>\n<p>The regular expression is the literal string <code>IF</code> followed by a (literal) opening parenthesis (i.e. <code>(</code>) followed by zero or more characters. The question mark is a reluctant qualifier which means that the string of any characters will be terminated by the first closing parenthesis encountered. Refer to this <a href=\"https://regex101.com/r/bc8Ohe/1\" rel=\"nofollow noreferrer\">regex101</a> and this <a href=\"https://www.jdoodle.com/iembed/v0/w4R\" rel=\"nofollow noreferrer\">JDoodle</a> as well as the <a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/regex/Pattern.html\" rel=\"nofollow noreferrer\">documentation</a> for class <code>java.util.regex.Pattern</code>.</p>\n<p>Running the above code produces the following output:</p>\n<pre class=\"lang-none prettyprint-override\"><code>IF(one,2,2)\nIF(two,1,1)\n</code></pre>\n"}],"owner":{"account_id":3141803,"reputation":823,"user_id":2657121,"accept_rate":27,"display_name":"iPhoneJavaDev"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":47,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":73862377,"answer_count":2,"score":0,"last_activity_date":1664252671,"creation_date":1664251170,"question_id":73862221,"body_markdown":"I have the following string\r\n\r\n    “test+IF(one,2,2)+Wow+IF(two,1,1)”\r\n\r\nI need to get the following strings:\r\n\r\n    IF(one,2,2)\r\n    IF(two,1,1)\r\n\r\nI tried the following regex but it only gives me the following with missing close parenthesis\r\n\r\n    Pattern pattern.compile(“IF(([^)]+))”);\r\n    Matcher matcher = pattern.match(formula);\r\n    While(matcehr.find()) {\r\n        System.out.println(matcher.group(0));\r\n    }\r\n\r\nResult is\r\n\r\n    IF(one,2,2\r\n\r\n","title":"Extract string enclosed by parenthesis","body":"<p>I have the following string</p>\n<pre><code>“test+IF(one,2,2)+Wow+IF(two,1,1)”\n</code></pre>\n<p>I need to get the following strings:</p>\n<pre><code>IF(one,2,2)\nIF(two,1,1)\n</code></pre>\n<p>I tried the following regex but it only gives me the following with missing close parenthesis</p>\n<pre><code>Pattern pattern.compile(“IF(([^)]+))”);\nMatcher matcher = pattern.match(formula);\nWhile(matcehr.find()) {\n    System.out.println(matcher.group(0));\n}\n</code></pre>\n<p>Result is</p>\n<pre><code>IF(one,2,2\n</code></pre>\n"},{"tags":["java","minecraft"],"answers":[{"tags":[],"owner":{"account_id":10544242,"reputation":68,"user_id":7769075,"display_name":"Azurethi"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1606495076,"creation_date":1606495076,"answer_id":65040805,"question_id":62223924,"body_markdown":"Your path looks fine for myfunc.mcfunction, but you mention:\r\n&gt; p.s. pack.mcmeta is in datapacks\r\n\r\nYour pack.mcmeta should be inside your specific datapack folder (&quot;RandomFolderName&quot;) in your case. Since you can have multiple datapacks in the &quot;datapacks&quot; folder, each of which need their own pack.mcmeta.\r\n\r\nAfter you move that over, it should work as a valid pack.\r\n\r\nSee [this tutorial series][1] for more info. The link should take you to video 5, which has a download for a blank template pack &amp; explanation. The next couple of videos cover functions.\r\n\r\n[1]: https://www.youtube.com/watch?v=Yz2hYJ-0CTA&amp;list=PLUtW5E6R_eqT5DZXmZgFYvKejzkMija72&amp;index=5","title":"Minecraft functions file structure","body":"<p>Your path looks fine for myfunc.mcfunction, but you mention:</p>\n<blockquote>\n<p>p.s. pack.mcmeta is in datapacks</p>\n</blockquote>\n<p>Your pack.mcmeta should be inside your specific datapack folder (&quot;RandomFolderName&quot;) in your case. Since you can have multiple datapacks in the &quot;datapacks&quot; folder, each of which need their own pack.mcmeta.</p>\n<p>After you move that over, it should work as a valid pack.</p>\n<p>See <a href=\"https://www.youtube.com/watch?v=Yz2hYJ-0CTA&amp;list=PLUtW5E6R_eqT5DZXmZgFYvKejzkMija72&amp;index=5\" rel=\"nofollow noreferrer\">this tutorial series</a> for more info. The link should take you to video 5, which has a download for a blank template pack &amp; explanation. The next couple of videos cover functions.</p>\n"}],"owner":{"account_id":2502333,"reputation":97,"user_id":2177088,"accept_rate":57,"display_name":"tempneff"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":639,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1664250871,"creation_date":1591390269,"question_id":62223924,"body_markdown":"I just found out that Minecraft supports coding custom functions. The guides I find show many different file structures over time. The latest I find for version 1.15.2 is below, but nonfunctional. Is it still correct? \r\n\r\n    .minecraft -&gt; saves -&gt; World -&gt; datapacks -&gt; RandomFolderName -&gt; data -&gt; namespace -&gt; functions -&gt; myfunc.mcfunction\r\n\r\nand called it in-game with\r\n\r\n    /functions namespace:myfunc\r\n\r\n-all I get is &quot;Unknown function&quot;..\r\n\r\np.s. pack.mcmeta is in datapacks ","title":"Minecraft functions file structure","body":"<p>I just found out that Minecraft supports coding custom functions. The guides I find show many different file structures over time. The latest I find for version 1.15.2 is below, but nonfunctional. Is it still correct?</p>\n<pre><code>.minecraft -&gt; saves -&gt; World -&gt; datapacks -&gt; RandomFolderName -&gt; data -&gt; namespace -&gt; functions -&gt; myfunc.mcfunction\n</code></pre>\n<p>and called it in-game with</p>\n<pre><code>/functions namespace:myfunc\n</code></pre>\n<p>-all I get is &quot;Unknown function&quot;..</p>\n<p>p.s. pack.mcmeta is in datapacks</p>\n"},{"tags":["java","list","sorting"],"comments":[{"owner":{"account_id":12849899,"reputation":996,"user_id":9295125,"display_name":"Daniel Rafael Wosch"},"score":0,"creation_date":1654100394,"post_id":72465079,"comment_id":128012867,"body_markdown":"Where does your List.sort come from?","body":"Where does your List.sort come from?"},{"owner":{"account_id":13933791,"reputation":99,"user_id":10061340,"display_name":"rody401"},"score":1,"creation_date":1654100729,"post_id":72465079,"comment_id":128012975,"body_markdown":"@DanielWosch Sorry, I posted a previous version. I updated it. getAdministrations is a List.","body":"@DanielWosch Sorry, I posted a previous version. I updated it. getAdministrations is a List."},{"owner":{"account_id":213468,"reputation":103488,"user_id":466862,"display_name":"Mark Rotteveel"},"score":1,"creation_date":1654101367,"post_id":72465079,"comment_id":128013205,"body_markdown":"Note that `.collect(Collectors.toList()).get(0)` can be better replaced with `.findFirst()` (and appropriate handling for retrieving the value from the `Optional`)","body":"Note that <code>.collect(Collectors.toList()).get(0)</code> can be better replaced with <code>.findFirst()</code> (and appropriate handling for retrieving the value from the <code>Optional</code>)"}],"answers":[{"tags":[],"owner":{"account_id":4355473,"reputation":17255,"user_id":3554264,"accept_rate":62,"display_name":"Christian Hujer"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1654100650,"creation_date":1654100650,"answer_id":72465184,"question_id":72465079,"body_markdown":"The method `List&lt;E&gt;.sort(Comparator&lt;? super E&gt; c)` is a (default) _instance_ method of interface `java.util.List`. That means, the &quot;subject&quot; of the method needs to be an actual object that performs the method. And it requires a `Comparator` as an argument. In your context, the correct invocation would be `inc.getAdministrations().sort(X)`, with `X` being replaced with the actual `Comparator` to be used for the comparisons during sorting.\r\n\r\nAlternatively, you could try `Collections.sort(inc.getAdministrations())` which would use the natural ordering.\r\n\r\nIf you want to stick to `List.sort()` but use natural ordering, you could use this:\r\n`inc.getAdministrations().sort(Comparator.naturalOrder());`.","title":"This sort() method in my if statement giving me Non-static method &#39;sort(java.util.Comparator&lt;? super E&gt;)&#39; cannot be referenced from a static context","body":"<p>The method <code>List&lt;E&gt;.sort(Comparator&lt;? super E&gt; c)</code> is a (default) <em>instance</em> method of interface <code>java.util.List</code>. That means, the &quot;subject&quot; of the method needs to be an actual object that performs the method. And it requires a <code>Comparator</code> as an argument. In your context, the correct invocation would be <code>inc.getAdministrations().sort(X)</code>, with <code>X</code> being replaced with the actual <code>Comparator</code> to be used for the comparisons during sorting.</p>\n<p>Alternatively, you could try <code>Collections.sort(inc.getAdministrations())</code> which would use the natural ordering.</p>\n<p>If you want to stick to <code>List.sort()</code> but use natural ordering, you could use this:\n<code>inc.getAdministrations().sort(Comparator.naturalOrder());</code>.</p>\n"}],"owner":{"account_id":13933791,"reputation":99,"user_id":10061340,"display_name":"rody401"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":213,"favorite_count":0,"down_vote_count":2,"up_vote_count":1,"answer_count":1,"score":-1,"last_activity_date":1664249795,"creation_date":1654100181,"question_id":72465079,"body_markdown":"Trying to understand why this sort method isn&#39;t working. \r\n\r\n\r\nShould I be trying a separate sorting algorithm? \r\n\r\n","title":"This sort() method in my if statement giving me Non-static method &#39;sort(java.util.Comparator&lt;? super E&gt;)&#39; cannot be referenced from a static context","body":"<p>Trying to understand why this sort method isn't working.</p>\n<p>Should I be trying a separate sorting algorithm?</p>\n"},{"tags":["java","minecraft"],"comments":[{"owner":{"account_id":540166,"reputation":15708,"user_id":1663383,"accept_rate":54,"display_name":"Draco18s no longer trusts SE"},"score":0,"creation_date":1546651363,"post_id":54047514,"comment_id":94931663,"body_markdown":"`ItemStack item = PvP.inv.getItem(0);` when is that running? It sure isn&#39;t running when `onCommand` is executed, as it&#39;s *outside* of `onCommand`","body":"<code>ItemStack item = PvP.inv.getItem(0);</code> when is that running? It sure isn&#39;t running when <code>onCommand</code> is executed, as it&#39;s <i>outside</i> of <code>onCommand</code>"},{"owner":{"account_id":15060912,"reputation":1,"user_id":10869714,"display_name":"Cesar Perez"},"score":0,"creation_date":1546656228,"post_id":54047514,"comment_id":94932321,"body_markdown":"i&#39;m blind LOL how did I not see that, it&#39;s 4am and well yea, thank you lMAO.","body":"i&#39;m blind LOL how did I not see that, it&#39;s 4am and well yea, thank you lMAO."}],"owner":{"account_id":15060912,"reputation":1,"user_id":10869714,"display_name":"Cesar Perez"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":25,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1664249744,"creation_date":1546644496,"question_id":54047514,"body_markdown":"  \tItemStack item = PvP.inv.getItem(0);\r\n\tSkullMeta meta = (SkullMeta)item.getItemMeta();\r\n\tItemStack item1 = PvP.inv.getItem(1);\r\n\tItemStack item2 = PvP.inv.getItem(2);\r\n\tpublic boolean onCommand(CommandSender sender, Command cmd, String label, String[] args) {\r\n\t\tif(sender instanceof Player) {\r\n\t\tPlayer p = (Player)sender;\r\n\t\tString name = p.getName();\r\n\r\n\t\tif(label.equalsIgnoreCase(&quot;pvpexit&quot;)) {\r\n\t\t\t\t\tif(item != null) {\r\n\t\t\t\t\t\tif(item.hasItemMeta()) {\r\n\t\t\t\t\t\t\tif(item.getItemMeta().hasDisplayName()) {\r\n\t\t\t\t\t\t\t\t\tPvP.inv.setItem(0, null);\r\n\t\t\t\t\t\t\t\t\tp.sendMessage(ChatColor.RED + &quot;meng&quot;);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\treturn false;\r\n\t}\r\nI&#39;m guessing there&#39;s something I&#39;m missing out which is very simple, but right now I&#39;m just not seeing it, so what&#39;s the problem? Nothing happens when I run the command.","title":"Loop through inventory not running what its told?","body":"<pre><code>ItemStack item = PvP.inv.getItem(0);\nSkullMeta meta = (SkullMeta)item.getItemMeta();\nItemStack item1 = PvP.inv.getItem(1);\nItemStack item2 = PvP.inv.getItem(2);\npublic boolean onCommand(CommandSender sender, Command cmd, String label, String[] args) {\n    if(sender instanceof Player) {\n    Player p = (Player)sender;\n    String name = p.getName();\n\n    if(label.equalsIgnoreCase(&quot;pvpexit&quot;)) {\n                if(item != null) {\n                    if(item.hasItemMeta()) {\n                        if(item.getItemMeta().hasDisplayName()) {\n                                PvP.inv.setItem(0, null);\n                                p.sendMessage(ChatColor.RED + &quot;meng&quot;);\n                    }\n                    }\n                }\n            }\n        }\n\n    return false;\n}\n</code></pre>\n<p>I'm guessing there's something I'm missing out which is very simple, but right now I'm just not seeing it, so what's the problem? Nothing happens when I run the command.</p>\n"},{"tags":["java","minecraft"],"answers":[{"tags":[],"owner":{"account_id":3739316,"reputation":184,"user_id":3109445,"accept_rate":27,"display_name":"MartinStone"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1456799660,"creation_date":1456799660,"answer_id":35713661,"question_id":35687937,"body_markdown":"Add a delay with a scheduler. runTaskTimer runs a set of functions forever with a delay between run. Last argument is amount of time inbetween in ticks. 20 ticks = 1 second\r\nExample code:\r\n\r\n    List&lt;ItemStack&gt; list = {item1, item2, item3, item4};\r\n    int x = 0;\r\n    plugin.getServer().getScheduler().runTaskTimer(plugin, new Runnable()\r\n    {\r\n      @Override\r\n      public void run()\r\n      {\r\n        inv.setItem(slot, list.get(x);\r\n        x++\r\n      }\r\n    }, 40);\r\n\r\n","title":"Minecraft: Items scrolling though inventory","body":"<p>Add a delay with a scheduler. runTaskTimer runs a set of functions forever with a delay between run. Last argument is amount of time inbetween in ticks. 20 ticks = 1 second\nExample code:</p>\n\n<pre><code>List&lt;ItemStack&gt; list = {item1, item2, item3, item4};\nint x = 0;\nplugin.getServer().getScheduler().runTaskTimer(plugin, new Runnable()\n{\n  @Override\n  public void run()\n  {\n    inv.setItem(slot, list.get(x);\n    x++\n  }\n}, 40);\n</code></pre>\n"}],"owner":{"account_id":7905371,"reputation":3,"user_id":5971069,"display_name":"JohannB"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":798,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1664249638,"creation_date":1456691762,"question_id":35687937,"body_markdown":"I am making kind of like a CS:GO Cases plugin for a Minecraft and if you don&#39;t know what CS:GO cases are here is an explanation: So you will do a command(/common) and then it opens a common case; there is also going to be rare and legendary. But when you execute the command, a inventory should open and items should start spinning and then slow down and eventually stop and the item in the middle is the item you win I have created a inventory I just have to figure out how to make the items spin. I tried to do:\r\n\r\n    for(int x = 0; 0 &lt; 18; x++)`\r\n    {\r\n       inv.setItem(x, diamondSword);\r\n       inv.setItem(x, diamondShovel);\r\n       inv.setItem(x, Chest);\r\n       inv.setItem(x, Compass);\r\n       inv.setItem(x, stick);\r\n       inv.setItem(x, stonePickaxe);\r\n       inv.setItem(x, diamond);\r\n       inv.setItem(x, emerald);\r\n    }\r\n\r\nAnd what happens is that the inventory opens and it is full of emeralds (The last item).\r\nSo I tested and printed x in the server chat and when I do the command it makes all of the numbers appear instantly like:\r\n1\r\n2\r\n3\r\n4\r\n5\r\n... until it hits 17.\r\n\r\nSo I just want a little explanation on how I could make the items cycle through the GUI that appears when executing the command.\r\n","title":"Minecraft: Items scrolling though inventory","body":"<p>I am making kind of like a CS:GO Cases plugin for a Minecraft and if you don't know what CS:GO cases are here is an explanation: So you will do a command(/common) and then it opens a common case; there is also going to be rare and legendary. But when you execute the command, a inventory should open and items should start spinning and then slow down and eventually stop and the item in the middle is the item you win I have created a inventory I just have to figure out how to make the items spin. I tried to do:</p>\n<pre><code>for(int x = 0; 0 &lt; 18; x++)`\n{\n   inv.setItem(x, diamondSword);\n   inv.setItem(x, diamondShovel);\n   inv.setItem(x, Chest);\n   inv.setItem(x, Compass);\n   inv.setItem(x, stick);\n   inv.setItem(x, stonePickaxe);\n   inv.setItem(x, diamond);\n   inv.setItem(x, emerald);\n}\n</code></pre>\n<p>And what happens is that the inventory opens and it is full of emeralds (The last item).\nSo I tested and printed x in the server chat and when I do the command it makes all of the numbers appear instantly like:\n1\n2\n3\n4\n5\n... until it hits 17.</p>\n<p>So I just want a little explanation on how I could make the items cycle through the GUI that appears when executing the command.</p>\n"},{"tags":["java","command","minecraft","eventhandler"],"answers":[{"tags":[],"owner":{"account_id":15357806,"reputation":1,"user_id":11079629,"display_name":"IgniteDEV"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1550503524,"creation_date":1550503524,"answer_id":54750461,"question_id":54674411,"body_markdown":"Just call playerMove event                             \r\n```\r\ngetServer().getPluginManager().callEvent(...);\r\n```\r\n\r\n\r\nBetter way will be to create playerObject that save first location before teleport and then  on command call that location on teleport cause i think that normal event call will be useless there. (You want create /back command, right?)\r\n\r\n","title":"Minecraft eventhandler triggered by command","body":"<p>Just call playerMove event                             </p>\n\n<pre><code>getServer().getPluginManager().callEvent(...);\n</code></pre>\n\n<p>Better way will be to create playerObject that save first location before teleport and then  on command call that location on teleport cause i think that normal event call will be useless there. (You want create /back command, right?)</p>\n"}],"owner":{"account_id":15324133,"reputation":21,"user_id":11055752,"display_name":"dorans ring"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":81,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1664248031,"creation_date":1550073556,"question_id":54674411,"body_markdown":"I&#39;m creating a really simple plugin for minecraft to freeze player. I got it to work alltime to all players, but how can i make command do trigger it to specific player?\r\n\r\n    @EventHandler\r\n    public void Move(PlayerMoveEvent event){\r\n        Player player = event.getPlayer();\r\n        player.sendMessage(ChatColor.RED + &quot;Sinut on j&#228;&#228;dytetty tutkinnan ajaksi.&quot;);\r\n        Location back = new Location(event.getFrom().getWorld(), event.getFrom().getX(), event.getFrom().getY(), event.getFrom().getZ());\r\n        event.getPlayer().teleport(back);\r\n    }\r\n\r\n","title":"Minecraft eventhandler triggered by command","body":"<p>I'm creating a really simple plugin for minecraft to freeze player. I got it to work alltime to all players, but how can i make command do trigger it to specific player?</p>\n<pre><code>@EventHandler\npublic void Move(PlayerMoveEvent event){\n    Player player = event.getPlayer();\n    player.sendMessage(ChatColor.RED + &quot;Sinut on jäädytetty tutkinnan ajaksi.&quot;);\n    Location back = new Location(event.getFrom().getWorld(), event.getFrom().getX(), event.getFrom().getY(), event.getFrom().getZ());\n    event.getPlayer().teleport(back);\n}\n</code></pre>\n"},{"tags":["java","minecraft","bukkit"],"answers":[{"tags":[],"owner":{"account_id":19072458,"reputation":51,"user_id":13926339,"display_name":"micgd"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1602631830,"creation_date":1602631830,"answer_id":64344521,"question_id":64265822,"body_markdown":"```\r\nprivate Main plugin;\r\n    \r\n    public HelloCommand(Main plugin) {\r\n        this.plugin = plugin;\r\n        plugin.getCommand(&quot;sword&quot;).setExecutor(this);\r\n\r\n \r\n\r\n    public void onEnable() {\r\n        getCommand(&quot;sword&quot;).setExecutor(new HelloCommand(this));\r\n    } \r\n```\r\n\r\n\r\nWhy are you registering your command twice? No need. Only register the command in your onenable. Also, for your method to give the player the sword, you should not use p.performCommand();, because even if they have the permission they still need op to use /give. \r\n\r\nTry using this:\r\n\r\n```\r\nItemStack sword = new ItemStack(Material.NETHERITE_SWORD));\r\nItemMeta meta = sword.getItemMeta();\r\nmeta.addUnsafeEnchantment(Enchantment.KNOCKBACK, 1000, true);\r\nmeta.addItemFlags(ItemFlag.HIDE_UNBREAKABLE);\r\nmeta.setUnbreakable(true);\r\nmeta.setCustomName(ChatColor.GOLD + &quot;GOD Sword&quot;));\r\nsword.setItemMeta(meta);\r\n\r\nint i = 0;\r\n\r\nwhile(true){\r\n   for(ItemStack it = p.getInventory(){\r\n        if(it == null){\r\n            p.getInventory().setItem(i, sword);\r\n            break;\r\n        }else{\r\n           i++;\r\n        }\r\n    }\r\n}\r\n\r\n\r\n```\r\n","title":"Minecraft Plugin loading but command is unkown","body":"<pre><code>private Main plugin;\n    \n    public HelloCommand(Main plugin) {\n        this.plugin = plugin;\n        plugin.getCommand(&quot;sword&quot;).setExecutor(this);\n\n \n\n    public void onEnable() {\n        getCommand(&quot;sword&quot;).setExecutor(new HelloCommand(this));\n    } \n</code></pre>\n<p>Why are you registering your command twice? No need. Only register the command in your onenable. Also, for your method to give the player the sword, you should not use p.performCommand();, because even if they have the permission they still need op to use /give.</p>\n<p>Try using this:</p>\n<pre><code>ItemStack sword = new ItemStack(Material.NETHERITE_SWORD));\nItemMeta meta = sword.getItemMeta();\nmeta.addUnsafeEnchantment(Enchantment.KNOCKBACK, 1000, true);\nmeta.addItemFlags(ItemFlag.HIDE_UNBREAKABLE);\nmeta.setUnbreakable(true);\nmeta.setCustomName(ChatColor.GOLD + &quot;GOD Sword&quot;));\nsword.setItemMeta(meta);\n\nint i = 0;\n\nwhile(true){\n   for(ItemStack it = p.getInventory(){\n        if(it == null){\n            p.getInventory().setItem(i, sword);\n            break;\n        }else{\n           i++;\n        }\n    }\n}\n\n\n</code></pre>\n"}],"owner":{"account_id":14847442,"reputation":982,"user_id":10722421,"display_name":"Vaibhav Herugu"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":89,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1664247902,"creation_date":1602170976,"question_id":64265822,"body_markdown":"I have been creating a plugin for Minecraft on Eclipse, but I am encountering an error. The plugin loads fine; I can see it in the console, but it says unknown command when I try and run the command.\r\n\r\nHere is my command code:\r\n```\r\npackage me.TheThunder56.helloworld.commands;\r\n\r\nimport org.bukkit.command.Command;\r\nimport org.bukkit.command.CommandExecutor;\r\nimport org.bukkit.command.CommandSender;\r\nimport org.bukkit.entity.Player;\r\nimport org.bukkit.plugin.java.JavaPlugin;\r\n\r\nimport me.TheThunder56.helloworld.Main;\r\n\r\n@SuppressWarnings(&quot;unused&quot;)\r\npublic class HelloCommand implements CommandExecutor{\r\n\r\n\tprivate Main plugin;\r\n\t\r\n\tpublic HelloCommand(Main plugin) {\r\n\t\tthis.plugin = plugin;\r\n\t\tplugin.getCommand(&quot;sword&quot;).setExecutor(this);\r\n\t\t\r\n\t}\r\n\t\r\n\t@Override\r\n\tpublic boolean onCommand(CommandSender sender, Command cmd, String label, String[] args) {\r\n\t\tif(!(sender instanceof Player)) {\r\n\t\t\tsender.sendMessage(&quot;Only players may execute this command!&quot;);\r\n\t\t\treturn true;\r\n\t\t}\r\n\t\t\r\n\t\tPlayer p = (Player) sender;\r\n\t\t\r\n\t\tif(p.hasPermission(&quot;sword.use&quot;)) {\r\n\t\t\tp.performCommand(&quot;/give TheThunder56 netherite_sword{Unbreakable:1,Enchantments:[{id:knockback,lvl:1000}]}&quot;);\r\n\t\t\treturn true;\r\n\t\t}else {\r\n\t\t\tp.sendMessage(&quot;You do not have permission to execute this command.&quot;);\r\n\t\t\t\r\n\t\t}\r\n\t\treturn false;\r\n\t}\r\n}\r\n```\r\n\r\nHere is my Main.java:\r\n\r\n```\r\npackage me.TheThunder56.helloworld;\r\n\r\nimport org.bukkit.plugin.java.JavaPlugin;\r\n\r\nimport me.TheThunder56.helloworld.commands.HelloCommand;\r\n\r\npublic class Main extends JavaPlugin{\r\n\r\n\t@Override\r\n\tpublic void onEnable() {\r\n\t\tgetCommand(&quot;sword&quot;).setExecutor(new HelloCommand(this));\r\n\t}\r\n}\r\n```\r\n\r\nAnd here is my plugin.yml file:\r\n\r\n```\r\nname: GodSword\r\nmain: me.TheThunder56.helloworld.Main\r\nversion: 1.0\r\nauthor: TheThunder56\r\ncommands:\r\n  sword:\r\n    description: A command to give you a godly sword.\r\n    usage: /sword\r\n```\r\n\r\nPlease help!\r\nThanks.","title":"Minecraft Plugin loading but command is unkown","body":"<p>I have been creating a plugin for Minecraft on Eclipse, but I am encountering an error. The plugin loads fine; I can see it in the console, but it says unknown command when I try and run the command.</p>\n<p>Here is my command code:</p>\n<pre><code>package me.TheThunder56.helloworld.commands;\n\nimport org.bukkit.command.Command;\nimport org.bukkit.command.CommandExecutor;\nimport org.bukkit.command.CommandSender;\nimport org.bukkit.entity.Player;\nimport org.bukkit.plugin.java.JavaPlugin;\n\nimport me.TheThunder56.helloworld.Main;\n\n@SuppressWarnings(&quot;unused&quot;)\npublic class HelloCommand implements CommandExecutor{\n\n    private Main plugin;\n    \n    public HelloCommand(Main plugin) {\n        this.plugin = plugin;\n        plugin.getCommand(&quot;sword&quot;).setExecutor(this);\n        \n    }\n    \n    @Override\n    public boolean onCommand(CommandSender sender, Command cmd, String label, String[] args) {\n        if(!(sender instanceof Player)) {\n            sender.sendMessage(&quot;Only players may execute this command!&quot;);\n            return true;\n        }\n        \n        Player p = (Player) sender;\n        \n        if(p.hasPermission(&quot;sword.use&quot;)) {\n            p.performCommand(&quot;/give TheThunder56 netherite_sword{Unbreakable:1,Enchantments:[{id:knockback,lvl:1000}]}&quot;);\n            return true;\n        }else {\n            p.sendMessage(&quot;You do not have permission to execute this command.&quot;);\n            \n        }\n        return false;\n    }\n}\n</code></pre>\n<p>Here is my Main.java:</p>\n<pre><code>package me.TheThunder56.helloworld;\n\nimport org.bukkit.plugin.java.JavaPlugin;\n\nimport me.TheThunder56.helloworld.commands.HelloCommand;\n\npublic class Main extends JavaPlugin{\n\n    @Override\n    public void onEnable() {\n        getCommand(&quot;sword&quot;).setExecutor(new HelloCommand(this));\n    }\n}\n</code></pre>\n<p>And here is my plugin.yml file:</p>\n<pre><code>name: GodSword\nmain: me.TheThunder56.helloworld.Main\nversion: 1.0\nauthor: TheThunder56\ncommands:\n  sword:\n    description: A command to give you a godly sword.\n    usage: /sword\n</code></pre>\n<p>Please help!\nThanks.</p>\n"},{"tags":["java","selenium","webdriver"],"comments":[{"owner":{"account_id":5289146,"reputation":8128,"user_id":4222206,"display_name":"queeg"},"score":0,"creation_date":1664230341,"post_id":73860444,"comment_id":130419541,"body_markdown":"Where/when do you initialize FacebookLogOutTest.driver?","body":"Where/when do you initialize FacebookLogOutTest.driver?"},{"owner":{"account_id":23770791,"reputation":11,"user_id":19065808,"display_name":"hdaasdjhksad"},"score":0,"creation_date":1664230639,"post_id":73860444,"comment_id":130419589,"body_markdown":"I&#39;ve tried to initialize it the same way I did in FacebookLogIn, but in this case it opens two tabs and still gives an error. I&#39;m not sure how to do this otherwise to make it work","body":"I&#39;ve tried to initialize it the same way I did in FacebookLogIn, but in this case it opens two tabs and still gives an error. I&#39;m not sure how to do this otherwise to make it work"},{"owner":{"account_id":5289146,"reputation":8128,"user_id":4222206,"display_name":"queeg"},"score":0,"creation_date":1664231699,"post_id":73860444,"comment_id":130419771,"body_markdown":"Seems like multiple instances of WebDriver open one browser tab each. So you want to use only one for all your testcases.","body":"Seems like multiple instances of WebDriver open one browser tab each. So you want to use only one for all your testcases."},{"owner":{"account_id":6077817,"reputation":1213,"user_id":4744568,"display_name":"pcalkins"},"score":0,"creation_date":1664233715,"post_id":73860444,"comment_id":130420086,"body_markdown":"This is the problem:  &quot;driver.manage().timeouts().implicitlyWait(30, TimeUnit.SECONDS);&quot;  driver is null.  Seems like it should be fbLogin.driver.manager....&quot;  but really the driver property should probably be more global and/or an injected dependency.","body":"This is the problem:  &quot;driver.manage().timeouts().implicitlyWait(30, TimeUnit.SECONDS);&quot;  driver is null.  Seems like it should be fbLogin.driver.manager....&quot;  but really the driver property should probably be more global and/or an injected dependency."}],"answers":[{"tags":[],"owner":{"account_id":2772450,"reputation":22416,"user_id":2386774,"display_name":"JeffC"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1664247751,"creation_date":1664247751,"answer_id":73861920,"question_id":73860444,"body_markdown":"The problem is that you never assign a driver instance to the `driver` variable in `facebookLogIn()`. Each test should stand alone, e.g. you shouldn&#39;t be calling `facebookLogIn()` from `facebookLogOut()`. Each test should have it&#39;s own driver instance and should be run on it&#39;s own browser instance to keep your tests super clean.\r\n\r\nEach test should look like this:\r\n1. Launch browser\r\n2. Do stuff\r\n3. Close browser\r\n\r\nYou have the right idea in trying to reuse code but investigate page objects instead. Create a page object for the login page (to log in) and one for the header (to click the profile icon and log out).\r\n\r\nNow your test will look like:\r\n\r\n    WebDriverManager.chromedriver().setup();\r\n    driver = new ChromeDriver();\r\n    driver.get(&quot;https://www.facebook.com/&quot;);\r\n\r\n    new HomePage(driver).logIn(username, password);\r\n\r\n    Header header = new Header(driver);\r\n    header.clickProfileIcon();\r\n    header.clickLogOut();\r\n\r\nVery simple, very easy to read and lots of code reuse. Now when you create your second test, you can start with the same few lines of code setting up the driver and logging in and then get on to whatever the new test is supposed to cover.","title":"Null pointer exception while trying to use one method in another class","body":"<p>The problem is that you never assign a driver instance to the <code>driver</code> variable in <code>facebookLogIn()</code>. Each test should stand alone, e.g. you shouldn't be calling <code>facebookLogIn()</code> from <code>facebookLogOut()</code>. Each test should have it's own driver instance and should be run on it's own browser instance to keep your tests super clean.</p>\n<p>Each test should look like this:</p>\n<ol>\n<li>Launch browser</li>\n<li>Do stuff</li>\n<li>Close browser</li>\n</ol>\n<p>You have the right idea in trying to reuse code but investigate page objects instead. Create a page object for the login page (to log in) and one for the header (to click the profile icon and log out).</p>\n<p>Now your test will look like:</p>\n<pre><code>WebDriverManager.chromedriver().setup();\ndriver = new ChromeDriver();\ndriver.get(&quot;https://www.facebook.com/&quot;);\n\nnew HomePage(driver).logIn(username, password);\n\nHeader header = new Header(driver);\nheader.clickProfileIcon();\nheader.clickLogOut();\n</code></pre>\n<p>Very simple, very easy to read and lots of code reuse. Now when you create your second test, you can start with the same few lines of code setting up the driver and logging in and then get on to whatever the new test is supposed to cover.</p>\n"}],"owner":{"account_id":23770791,"reputation":11,"user_id":19065808,"display_name":"hdaasdjhksad"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":159,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":73861920,"answer_count":1,"score":0,"last_activity_date":1664247751,"creation_date":1664230255,"question_id":73860444,"body_markdown":"I&#39;m currently working on automating facebook login and logout, but I have problems. Basically, I have created a ```FacebookLogOutTest``` class, that needs to run ```FacebookLogIn``` first, and then continue. These are the classes:\r\n\r\n```FacebookLogIn```\r\n\r\n```\r\npublic class FacebookLogInTest {\r\n    WebDriver driver;\r\n\r\n    @Test\r\n    public void facebookLogIn() {\r\n        WebDriverManager.chromedriver().setup();\r\n        driver = new ChromeDriver();\r\n        driver.get(&quot;https://www.facebook.com/&quot;);\r\n        WebElement username = driver.findElement(By.id(&quot;email&quot;));\r\n        WebElement password = driver.findElement(By.id(&quot;pass&quot;));\r\n        WebElement login = driver.findElement(By.xpath(&quot;//*[@name=&#39;login&#39;]&quot;));\r\n        username.sendKeys(&quot;xxxxxx&quot;);\r\n        password.sendKeys(&quot;xxxxxx&quot;);\r\n        login.click();\r\n\r\n\r\n    }\r\n}\r\n```\r\n\r\n```\r\nFabecookLogOut\r\n```\r\n\r\n```\r\npublic class FacebookLogOutTest {\r\n    WebDriver driver;\r\n\r\n    @Test\r\n    public void facebookLogOut() {\r\n        FacebookLogInTest fbLogin = new FacebookLogInTest();\r\n        fbLogin.facebookLogIn();\r\n\r\n        driver.manage().timeouts().implicitlyWait(30, TimeUnit.SECONDS);\r\n        WebElement profileButton = driver.findElement(By.xpath((&quot;//*[@aria-label=&#39;Your page&#39;]&quot;)));\r\n        profileButton.click();\r\n        WebElement logoutButton = driver.findElement(By.xpath(&quot;//span[text()=&#39;Log out&#39;]&quot;));\r\n        logoutButton.click();\r\n    }\r\n}\r\n```\r\n\r\n\r\nBut when I&#39;m trying to run the log out class, it throws an exception and I don&#39;t know why. The log in class works properly. What should I do?\r\n\r\nHere&#39;s the stacktrace:\r\n\r\n```\r\njava.lang.NullPointerException\r\n\tat FacebookLogOutTest.facebookLogOut(FacebookLogOutTest.java:18)\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\r\n\tat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:566)\r\n\tat org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)\r\n\tat org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)\r\n\tat org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)\r\n\tat org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)\r\n\tat org.junit.runners.ParentRunner$3.evaluate(ParentRunner.java:306)\r\n\tat org.junit.runners.BlockJUnit4ClassRunner$1.evaluate(BlockJUnit4ClassRunner.java:100)\r\n\tat org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:366)\r\n\tat org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:103)\r\n\tat org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:63)\r\n\tat org.junit.runners.ParentRunner$4.run(ParentRunner.java:331)\r\n\tat org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:79)\r\n\tat org.junit.runners.ParentRunner.runChildren(ParentRunner.java:329)\r\n\tat org.junit.runners.ParentRunner.access$100(ParentRunner.java:66)\r\n\tat org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:293)\r\n\tat org.junit.runners.ParentRunner$3.evaluate(ParentRunner.java:306)\r\n\tat org.junit.runners.ParentRunner.run(ParentRunner.java:413)\r\n\tat org.junit.runner.JUnitCore.run(JUnitCore.java:137)\r\n\tat com.intellij.junit4.JUnit4IdeaTestRunner.startRunnerWithArgs(JUnit4IdeaTestRunner.java:69)\r\n\tat com.intellij.rt.junit.IdeaTestRunner$Repeater$1.execute(IdeaTestRunner.java:38)\r\n\tat com.intellij.rt.execution.junit.TestsRepeater.repeat(TestsRepeater.java:11)\r\n\tat com.intellij.rt.junit.IdeaTestRunner$Repeater.startRunnerWithArgs(IdeaTestRunner.java:35)\r\n\tat com.intellij.rt.junit.JUnitStarter.prepareStreamsAndStart(JUnitStarter.java:235)\r\n\tat com.intellij.rt.junit.JUnitStarter.main(JUnitStarter.java:54)\r\n```","title":"Null pointer exception while trying to use one method in another class","body":"<p>I'm currently working on automating facebook login and logout, but I have problems. Basically, I have created a <code>FacebookLogOutTest</code> class, that needs to run <code>FacebookLogIn</code> first, and then continue. These are the classes:</p>\n<p><code>FacebookLogIn</code></p>\n<pre><code>public class FacebookLogInTest {\n    WebDriver driver;\n\n    @Test\n    public void facebookLogIn() {\n        WebDriverManager.chromedriver().setup();\n        driver = new ChromeDriver();\n        driver.get(&quot;https://www.facebook.com/&quot;);\n        WebElement username = driver.findElement(By.id(&quot;email&quot;));\n        WebElement password = driver.findElement(By.id(&quot;pass&quot;));\n        WebElement login = driver.findElement(By.xpath(&quot;//*[@name='login']&quot;));\n        username.sendKeys(&quot;xxxxxx&quot;);\n        password.sendKeys(&quot;xxxxxx&quot;);\n        login.click();\n\n\n    }\n}\n</code></pre>\n<pre><code>FabecookLogOut\n</code></pre>\n<pre><code>public class FacebookLogOutTest {\n    WebDriver driver;\n\n    @Test\n    public void facebookLogOut() {\n        FacebookLogInTest fbLogin = new FacebookLogInTest();\n        fbLogin.facebookLogIn();\n\n        driver.manage().timeouts().implicitlyWait(30, TimeUnit.SECONDS);\n        WebElement profileButton = driver.findElement(By.xpath((&quot;//*[@aria-label='Your page']&quot;)));\n        profileButton.click();\n        WebElement logoutButton = driver.findElement(By.xpath(&quot;//span[text()='Log out']&quot;));\n        logoutButton.click();\n    }\n}\n</code></pre>\n<p>But when I'm trying to run the log out class, it throws an exception and I don't know why. The log in class works properly. What should I do?</p>\n<p>Here's the stacktrace:</p>\n<pre><code>java.lang.NullPointerException\n    at FacebookLogOutTest.facebookLogOut(FacebookLogOutTest.java:18)\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\n    at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n    at java.base/java.lang.reflect.Method.invoke(Method.java:566)\n    at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)\n    at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)\n    at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)\n    at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)\n    at org.junit.runners.ParentRunner$3.evaluate(ParentRunner.java:306)\n    at org.junit.runners.BlockJUnit4ClassRunner$1.evaluate(BlockJUnit4ClassRunner.java:100)\n    at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:366)\n    at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:103)\n    at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:63)\n    at org.junit.runners.ParentRunner$4.run(ParentRunner.java:331)\n    at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:79)\n    at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:329)\n    at org.junit.runners.ParentRunner.access$100(ParentRunner.java:66)\n    at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:293)\n    at org.junit.runners.ParentRunner$3.evaluate(ParentRunner.java:306)\n    at org.junit.runners.ParentRunner.run(ParentRunner.java:413)\n    at org.junit.runner.JUnitCore.run(JUnitCore.java:137)\n    at com.intellij.junit4.JUnit4IdeaTestRunner.startRunnerWithArgs(JUnit4IdeaTestRunner.java:69)\n    at com.intellij.rt.junit.IdeaTestRunner$Repeater$1.execute(IdeaTestRunner.java:38)\n    at com.intellij.rt.execution.junit.TestsRepeater.repeat(TestsRepeater.java:11)\n    at com.intellij.rt.junit.IdeaTestRunner$Repeater.startRunnerWithArgs(IdeaTestRunner.java:35)\n    at com.intellij.rt.junit.JUnitStarter.prepareStreamsAndStart(JUnitStarter.java:235)\n    at com.intellij.rt.junit.JUnitStarter.main(JUnitStarter.java:54)\n</code></pre>\n"},{"tags":["java","deserialization","synchronized"],"comments":[{"owner":{"account_id":14357,"reputation":9128,"user_id":29470,"display_name":"Tim Moore"},"score":1,"creation_date":1664244867,"post_id":73858251,"comment_id":130421653,"body_markdown":"Why does it need to be serializable?","body":"Why does it need to be serializable?"},{"owner":{"account_id":422777,"reputation":841,"user_id":5328820,"display_name":"Burton"},"score":0,"creation_date":1664373728,"post_id":73858251,"comment_id":130457251,"body_markdown":"I only made it serializable since the parent class was.","body":"I only made it serializable since the parent class was."},{"owner":{"account_id":14357,"reputation":9128,"user_id":29470,"display_name":"Tim Moore"},"score":1,"creation_date":1664410695,"post_id":73858251,"comment_id":130467685,"body_markdown":"OK, but is it actually serialized, and if so, why? This class has no state that seems useful to serialize, so if you do need to serialize a class that references this one, I would make _that_ reference `transient`.","body":"OK, but is it actually serialized, and if so, why? This class has no state that seems useful to serialize, so if you do need to serialize a class that references this one, I would make <i>that</i> reference <code>transient</code>."},{"owner":{"account_id":3211603,"reputation":289297,"user_id":2711488,"display_name":"Holger"},"score":1,"creation_date":1665739888,"post_id":73858251,"comment_id":130773548,"body_markdown":"@TimMoore even worse, the whole race condition of the constructor likely repeats at the deserialization. Unless the base class doesn’t start a background thread of course, in which case the object would be even more broken, not fulfilling its purpose. On the other hand, this would harmonize with the fact that `entityManagerFactory` is not restored upon deserialization.","body":"@TimMoore even worse, the whole race condition of the constructor likely repeats at the deserialization. Unless the base class doesn’t start a background thread of course, in which case the object would be even more broken, not fulfilling its purpose. On the other hand, this would harmonize with the fact that <code>entityManagerFactory</code> is not restored upon deserialization."}],"answers":[{"tags":[],"owner":{"account_id":14357,"reputation":9128,"user_id":29470,"display_name":"Tim Moore"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1664246707,"creation_date":1664246707,"answer_id":73861839,"question_id":73858251,"body_markdown":"The code in the question and the linked wiki page has an unresolvable data race condition. Unfortunately, the constructor of [`BackgroundProcess`][1] allows a reference to `this` to [escape the constructor][2] by starting a new thread that calls `beforeInvocation`. Because this call can occur before the constructor of the child class completes, it is not safe to extend `BackgroundProcess`.\r\n\r\nThis code attempts to handle the race condition on `entityManagerFactory` through use of the `lock` object, `initializationComplete` flag, and `wait`/`notify` usage. However, this only moves the race condition from `entityManagerFactory` to `lock`, as Java only [initialises the fields of subclasses _after_ the parent class constructor completes][3]. This is true regardless of whether the field is initialised inline or in the constructor.\r\n\r\nYou can find more details about this problem in the excellent accepted answer to the question [Java: reference escape][4].\r\n\r\n\r\nMy best advice is to avoid the use of `BackgroundProcess` and find another way to solve the original problem.\r\n\r\n  [1]: https://github.com/apache/struts/blob/master/core/src/main/java/org/apache/struts2/interceptor/BackgroundProcess.java\r\n  [2]: https://wiki.sei.cmu.edu/confluence/display/java/TSM01-J.+Do+not+let+the+this+reference+escape+during+object+construction\r\n  [3]: https://docs.oracle.com/javase/specs/jls/se7/html/jls-12.html#jls-12.5\r\n  [4]: https://stackoverflow.com/a/3705628/29470","title":"How to properly use a &quot;lock&quot; variable for synchronization in a Serializable class?","body":"<p>The code in the question and the linked wiki page has an unresolvable data race condition. Unfortunately, the constructor of <a href=\"https://github.com/apache/struts/blob/master/core/src/main/java/org/apache/struts2/interceptor/BackgroundProcess.java\" rel=\"nofollow noreferrer\"><code>BackgroundProcess</code></a> allows a reference to <code>this</code> to <a href=\"https://wiki.sei.cmu.edu/confluence/display/java/TSM01-J.+Do+not+let+the+this+reference+escape+during+object+construction\" rel=\"nofollow noreferrer\">escape the constructor</a> by starting a new thread that calls <code>beforeInvocation</code>. Because this call can occur before the constructor of the child class completes, it is not safe to extend <code>BackgroundProcess</code>.</p>\n<p>This code attempts to handle the race condition on <code>entityManagerFactory</code> through use of the <code>lock</code> object, <code>initializationComplete</code> flag, and <code>wait</code>/<code>notify</code> usage. However, this only moves the race condition from <code>entityManagerFactory</code> to <code>lock</code>, as Java only <a href=\"https://docs.oracle.com/javase/specs/jls/se7/html/jls-12.html#jls-12.5\" rel=\"nofollow noreferrer\">initialises the fields of subclasses <em>after</em> the parent class constructor completes</a>. This is true regardless of whether the field is initialised inline or in the constructor.</p>\n<p>You can find more details about this problem in the excellent accepted answer to the question <a href=\"https://stackoverflow.com/a/3705628/29470\">Java: reference escape</a>.</p>\n<p>My best advice is to avoid the use of <code>BackgroundProcess</code> and find another way to solve the original problem.</p>\n"}],"owner":{"account_id":422777,"reputation":841,"user_id":5328820,"display_name":"Burton"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":93,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":73861839,"answer_count":1,"score":0,"last_activity_date":1664246707,"creation_date":1664215800,"question_id":73858251,"body_markdown":"I am trying to figure out how to avoid an NPE in the the code below. I am unable to purposely reproduce the error, but every once in a while I get an NPE at the line 40 `synchronized(lock) {`. My guess is that it&#39;s happening after a serialization/deserialization process - but that is just a guess.\r\n\r\nMy IDE gives me a compile &quot;tip&quot; that says `synchronization on a non-final variable (lock)`, but to be quite honest, I&#39;m not as familiar with `synchronized` code blocks and how a serializable class affects `final` variables. \r\n\r\nAs an FYI, the code below was copied/modified from a Struts Wiki: https://cwiki.apache.org/confluence/display/WW/HibernateAndSpringEnabledExecuteAndWaitInterceptor (towards the bottom of the page in the comments). \r\n\r\n\r\n```\r\nimport com.opensymphony.xwork2.ActionInvocation;\r\nimport org.apache.struts2.interceptor.BackgroundProcess;\r\nimport org.springframework.orm.jpa.EntityManagerFactoryUtils;\r\nimport org.springframework.orm.jpa.EntityManagerHolder;\r\nimport org.springframework.transaction.support.TransactionSynchronizationManager;\r\n\r\nimport javax.persistence.EntityManager;\r\nimport javax.persistence.EntityManagerFactory;\r\nimport java.io.IOException;\r\nimport java.io.ObjectInputStream;\r\nimport java.io.Serializable;\r\n\r\npublic class OpenSessionBackgroundProcess extends BackgroundProcess implements Serializable {\r\n\r\n\tprivate static final long serialVersionUID = 3884464561311686443L;\r\n\r\n\tprivate final transient EntityManagerFactory entityManagerFactory;\r\n\r\n\t// used for synchronization\r\n\tprotected boolean initializationComplete;\r\n\tprivate transient Object lock = new Object();\r\n\r\n\tpublic OpenSessionBackgroundProcess(String name, ActionInvocation invocation, int threadPriority, EntityManagerFactory entityManagerFactory) {\r\n\t\tsuper(name, invocation, threadPriority);\r\n\t\tthis.entityManagerFactory = entityManagerFactory;\r\n\t\tinitializationComplete = true;\r\n\t\tsynchronized (lock) {\r\n\t\t\tlock.notify();\r\n\t\t}\r\n\t}\r\n\r\n\tprotected void beforeInvocation() throws Exception {\r\n\t\twhile (!initializationComplete) {\r\n\t\t\ttry {\r\n\t\t\t\tsynchronized (lock) {  // &lt;----- NPE HERE\r\n\t\t\t\t\tlock.wait(100);\r\n\t\t\t\t}\r\n\t\t\t} catch (InterruptedException e) {\r\n\t\t\t\t// behavior ignores cause of re-awakening.\r\n\t\t\t}\r\n\t\t}\r\n\t\tEntityManager em = entityManagerFactory.createEntityManager();\r\n\t\tTransactionSynchronizationManager.bindResource(entityManagerFactory, new EntityManagerHolder(em));\r\n\t\tsuper.beforeInvocation();\r\n\t}\r\n\r\n\tprotected void afterInvocation() throws Exception {\r\n\t\tsuper.afterInvocation();\r\n\t\tEntityManagerHolder emHolder = (EntityManagerHolder)\r\n\t\tTransactionSynchronizationManager.unbindResource(entityManagerFactory);\r\n\t\tEntityManagerFactoryUtils.closeEntityManager(emHolder.getEntityManager());\r\n\t}\r\n\r\n\t/**\r\n\t * Override default readObject() method when deserializing\r\n\t *\r\n\t * @param serialized the serialized object\r\n\t */\r\n\tprivate void readObject(ObjectInputStream serialized) throws IOException, ClassNotFoundException {\r\n\t\tserialized.defaultReadObject();\r\n\t\tlock = new Object();\r\n\t}\r\n}\r\n```","title":"How to properly use a &quot;lock&quot; variable for synchronization in a Serializable class?","body":"<p>I am trying to figure out how to avoid an NPE in the the code below. I am unable to purposely reproduce the error, but every once in a while I get an NPE at the line 40 <code>synchronized(lock) {</code>. My guess is that it's happening after a serialization/deserialization process - but that is just a guess.</p>\n<p>My IDE gives me a compile &quot;tip&quot; that says <code>synchronization on a non-final variable (lock)</code>, but to be quite honest, I'm not as familiar with <code>synchronized</code> code blocks and how a serializable class affects <code>final</code> variables.</p>\n<p>As an FYI, the code below was copied/modified from a Struts Wiki: <a href=\"https://cwiki.apache.org/confluence/display/WW/HibernateAndSpringEnabledExecuteAndWaitInterceptor\" rel=\"nofollow noreferrer\">https://cwiki.apache.org/confluence/display/WW/HibernateAndSpringEnabledExecuteAndWaitInterceptor</a> (towards the bottom of the page in the comments).</p>\n<pre><code>import com.opensymphony.xwork2.ActionInvocation;\nimport org.apache.struts2.interceptor.BackgroundProcess;\nimport org.springframework.orm.jpa.EntityManagerFactoryUtils;\nimport org.springframework.orm.jpa.EntityManagerHolder;\nimport org.springframework.transaction.support.TransactionSynchronizationManager;\n\nimport javax.persistence.EntityManager;\nimport javax.persistence.EntityManagerFactory;\nimport java.io.IOException;\nimport java.io.ObjectInputStream;\nimport java.io.Serializable;\n\npublic class OpenSessionBackgroundProcess extends BackgroundProcess implements Serializable {\n\n    private static final long serialVersionUID = 3884464561311686443L;\n\n    private final transient EntityManagerFactory entityManagerFactory;\n\n    // used for synchronization\n    protected boolean initializationComplete;\n    private transient Object lock = new Object();\n\n    public OpenSessionBackgroundProcess(String name, ActionInvocation invocation, int threadPriority, EntityManagerFactory entityManagerFactory) {\n        super(name, invocation, threadPriority);\n        this.entityManagerFactory = entityManagerFactory;\n        initializationComplete = true;\n        synchronized (lock) {\n            lock.notify();\n        }\n    }\n\n    protected void beforeInvocation() throws Exception {\n        while (!initializationComplete) {\n            try {\n                synchronized (lock) {  // &lt;----- NPE HERE\n                    lock.wait(100);\n                }\n            } catch (InterruptedException e) {\n                // behavior ignores cause of re-awakening.\n            }\n        }\n        EntityManager em = entityManagerFactory.createEntityManager();\n        TransactionSynchronizationManager.bindResource(entityManagerFactory, new EntityManagerHolder(em));\n        super.beforeInvocation();\n    }\n\n    protected void afterInvocation() throws Exception {\n        super.afterInvocation();\n        EntityManagerHolder emHolder = (EntityManagerHolder)\n        TransactionSynchronizationManager.unbindResource(entityManagerFactory);\n        EntityManagerFactoryUtils.closeEntityManager(emHolder.getEntityManager());\n    }\n\n    /**\n     * Override default readObject() method when deserializing\n     *\n     * @param serialized the serialized object\n     */\n    private void readObject(ObjectInputStream serialized) throws IOException, ClassNotFoundException {\n        serialized.defaultReadObject();\n        lock = new Object();\n    }\n}\n</code></pre>\n"},{"tags":["java","upload","sftp"],"answers":[{"tags":[],"owner":{"account_id":4350664,"reputation":508,"user_id":3551126,"accept_rate":30,"display_name":"teik"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1603252073,"creation_date":1603252073,"answer_id":64456394,"question_id":60756478,"body_markdown":"as the [docs][1] says\r\n```\r\nBy default, the path is relative to the user&#39;s home directory. This can be changed with:\r\n\r\nFtpFileSystemConfigBuilder.getInstance().setUserDirIsRoot(options, false);\r\n```\r\nso in you case, it is `sftp://root:***@111.222.333.444\\home\\tempfileholder\\sample.txt` which maps to `/root/home/tempfileholder/sample.txt` in your linux host.\r\n\r\n\r\n  [1]: https://commons.apache.org/proper/commons-vfs/filesystems.html","title":"When SFTP Upload using Apache Commons VFS have to face org.apache.commons.vfs2.FileSystemException: Could not find file with URI","body":"<p>as the <a href=\"https://commons.apache.org/proper/commons-vfs/filesystems.html\" rel=\"nofollow noreferrer\">docs</a> says</p>\n<pre><code>By default, the path is relative to the user's home directory. This can be changed with:\n\nFtpFileSystemConfigBuilder.getInstance().setUserDirIsRoot(options, false);\n</code></pre>\n<p>so in you case, it is <code>sftp://root:***@111.222.333.444\\home\\tempfileholder\\sample.txt</code> which maps to <code>/root/home/tempfileholder/sample.txt</code> in your linux host.</p>\n"},{"tags":[],"owner":{"account_id":372555,"reputation":4556,"user_id":721666,"accept_rate":48,"display_name":"Ralph"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1638528696,"creation_date":1638528696,"answer_id":70213132,"question_id":60756478,"body_markdown":"I also invested a lot of time using Apache vfs2 lib to connect to a SFTP server and download a file. Finally I switched to [sshj](https://github.com/hierynomus/sshj) which looks more easy to use for me:\r\n\r\nMaven Dependency:\r\n\r\n\t\t&lt;dependency&gt;\r\n\t\t  &lt;groupId&gt;com.hierynomus&lt;/groupId&gt;\r\n\t\t  &lt;artifactId&gt;sshj&lt;/artifactId&gt;\r\n\t\t  &lt;version&gt;0.31.0&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\nExample download a remote file:\r\n\r\n\t@Test\r\n\tpublic void testConnection() {\r\n\t\ttry {\r\n\r\n\t\t\tfinal SSHClient ssh = new SSHClient();\r\n\t\t\tssh.addHostKeyVerifier(new PromiscuousVerifier());\r\n\r\n\t\t\ttry {\r\n\t\t\t\tssh.loadKnownHosts();\r\n\t\t\t\tssh.connect(ftpServer, ftpPort);\r\n\t\t\t\tssh.authPassword(ftpUser, ftpPassword);\r\n\t\t\t\tSFTPClient sftpClient = ssh.newSFTPClient();\r\n\t\t\t\tString localDir=&quot;/tmp/&quot;;\r\n\t\t\t\tsftpClient.get(ftpFullPath, localDir + &quot;sshjFile.txt&quot;);\r\n\t\t\t\tsftpClient.close();\r\n\t\t\t} finally {\r\n\t\t\t\tssh.disconnect();\r\n\t\t\t}\r\n\t\t} catch (IOException e) {\r\n\t\t\tAssert.fail(e.getMessage());\r\n\t\t\te.printStackTrace();\r\n\t\t}\r\n\r\n\t}\r\n\r\nTo upload a file just use the `put` method instead of `get`. ","title":"When SFTP Upload using Apache Commons VFS have to face org.apache.commons.vfs2.FileSystemException: Could not find file with URI","body":"<p>I also invested a lot of time using Apache vfs2 lib to connect to a SFTP server and download a file. Finally I switched to <a href=\"https://github.com/hierynomus/sshj\" rel=\"nofollow noreferrer\">sshj</a> which looks more easy to use for me:</p>\n<p>Maven Dependency:</p>\n<pre><code>    &lt;dependency&gt;\n      &lt;groupId&gt;com.hierynomus&lt;/groupId&gt;\n      &lt;artifactId&gt;sshj&lt;/artifactId&gt;\n      &lt;version&gt;0.31.0&lt;/version&gt;\n    &lt;/dependency&gt;\n</code></pre>\n<p>Example download a remote file:</p>\n<pre><code>@Test\npublic void testConnection() {\n    try {\n\n        final SSHClient ssh = new SSHClient();\n        ssh.addHostKeyVerifier(new PromiscuousVerifier());\n\n        try {\n            ssh.loadKnownHosts();\n            ssh.connect(ftpServer, ftpPort);\n            ssh.authPassword(ftpUser, ftpPassword);\n            SFTPClient sftpClient = ssh.newSFTPClient();\n            String localDir=&quot;/tmp/&quot;;\n            sftpClient.get(ftpFullPath, localDir + &quot;sshjFile.txt&quot;);\n            sftpClient.close();\n        } finally {\n            ssh.disconnect();\n        }\n    } catch (IOException e) {\n        Assert.fail(e.getMessage());\n        e.printStackTrace();\n    }\n\n}\n</code></pre>\n<p>To upload a file just use the <code>put</code> method instead of <code>get</code>.</p>\n"},{"tags":[],"owner":{"account_id":21591640,"reputation":1,"user_id":15921149,"display_name":"Kit Chen"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1664246428,"creation_date":1664246213,"answer_id":73861803,"question_id":60756478,"body_markdown":"    &lt;!--Supported protocols include: Echo, Finger, FTP, NNTP, NTP, POP3(S), SMTP(S), Telnet, Whois--&gt;\r\n    &lt;dependency&gt;\r\n      &lt;groupId&gt;commons-net&lt;/groupId&gt;\r\n      &lt;artifactId&gt;commons-net&lt;/artifactId&gt;\r\n    &lt;/dependency&gt;\r\n\r\nadd this in your pom","title":"When SFTP Upload using Apache Commons VFS have to face org.apache.commons.vfs2.FileSystemException: Could not find file with URI","body":"<pre><code>&lt;!--Supported protocols include: Echo, Finger, FTP, NNTP, NTP, POP3(S), SMTP(S), Telnet, Whois--&gt;\n&lt;dependency&gt;\n  &lt;groupId&gt;commons-net&lt;/groupId&gt;\n  &lt;artifactId&gt;commons-net&lt;/artifactId&gt;\n&lt;/dependency&gt;\n</code></pre>\n<p>add this in your pom</p>\n"}],"owner":{"account_id":14888493,"reputation":86,"user_id":10750964,"display_name":"Kavindu Akash"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":2864,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":3,"score":1,"last_activity_date":1664246428,"creation_date":1584618040,"question_id":60756478,"body_markdown":"I try to upload a file from one remote server to another remote server. I use the following code for it but I have to face an &quot;org.apache.commons.vfs2.FileSystemException&quot;.\n\n**Exception: **\n\norg.apache.commons.vfs2.FileSystemException: Could not find file with URI &quot;sftp://root:***@111.222.333.444\\root\\home\\tempfileholder\\sample.txt&quot; because it is a relative path, and no base URI was provided.\n\n**also, I can&#39;t understand what hope them as base URL**\n\n  solution, please.\n\n**Code : **\n```\nimport java.io.File;\n\nimport org.apache.commons.vfs2.FileObject;\nimport org.apache.commons.vfs2.FileSystemException;\nimport org.apache.commons.vfs2.FileSystemOptions;\nimport org.apache.commons.vfs2.Selectors;\nimport org.apache.commons.vfs2.impl.StandardFileSystemManager;\nimport org.apache.commons.vfs2.provider.sftp.SftpFileSystemConfigBuilder;\n\n/**\n * The class SFTPUtil containing uploading, downloading, checking if file exists\n * and deleting functionality using Apache Commons VFS (Virtual File System)\n * Library\n * \n * @author Kavindu\n * \n */\npublic class SFTPUtility {\n\n    public static void main(String[] args) {\n        String hostName = &quot;111.222.333.444&quot;;\n        String username = &quot;root&quot;;\n        String password = &quot;kkTTpp@JacobWPST&quot;;\n\n        String localFilePath = &quot;&quot;C:&quot;+File.separator+&quot;Users&quot;+File.separator+&quot;kavindu&quot;+File.separator+&quot;Desktop&quot;+File.separator+&quot;temp&quot;+File.separator+&quot;tempdetails.txt&quot;;\n        String remoteFilePath = &quot;/root/home/tempfileholder/sample.txt&quot;;       \n       \n        upload(hostName, username, password, localFilePath, remoteFilePath);\n        \n    }\n\n    /**\n     * Method to upload a file in Remote server\n     * \n     * @param hostName\n     *            HostName of the server\n     * @param username\n     *            UserName to login\n     * @param password\n     *            Password to login\n     * @param localFilePath\n     *            LocalFilePath. Should contain the entire local file path -\n     *            Directory and Filename with \\\\ as separator\n     */\n    public static void upload(String hostName, String username, String password, String localFilePath, String remoteFilePath) {\n\n        File file = new File(localFilePath);\n        if (!file.exists())\n            throw new RuntimeException(&quot;Error. Local file not found&quot;);\n\n        StandardFileSystemManager manager = new StandardFileSystemManager();\n\n        try {\n            manager.init();\n\n            // Create local file object\n            FileObject localFile = manager.resolveFile(file.getAbsolutePath());\n\n            // Create remote file object\n            FileObject remoteFile = manager.resolveFile(createConnectionString(hostName, username, password, remoteFilePath), createDefaultOptions());\n            /*\n             * use createDefaultOptions() in place of fsOptions for all default\n             * options - Kavindu.\n             */\n\n            // Copy local file to sftp server\n            remoteFile.copyFrom(localFile, Selectors.SELECT_SELF);\n\n            System.out.println(&quot;File upload success&quot;);\n        } catch (Exception e) {\n            throw new RuntimeException(e);\n        } finally {\n            manager.close();\n        }\n    }\n\n    /**\n     * Generates SFTP URL connection String\n     * \n     * @param hostName\n     *            HostName of the server\n     * @param username\n     *            UserName to login\n     * @param password\n     *            Password to login\n     * @param remoteFilePath\n     *            remoteFilePath. Should contain the entire remote file path -\n     *            Directory and Filename with / as separator\n     * @return concatenated SFTP URL string\n     */\n    public static String createConnectionString(String hostName, String username, String password, String remoteFilePath) {\n        return &quot;sftp://&quot; + username + &quot;:&quot; + password + &quot;@&quot; + hostName + &quot;/&quot; + remoteFilePath;\n    }\n\n    /**\n     * Method to setup default SFTP config\n     * \n     * @return the FileSystemOptions object containing the specified\n     *         configuration options\n     * @throws FileSystemException\n     */\n    public static FileSystemOptions createDefaultOptions() throws FileSystemException {\n        // Create SFTP options\n        FileSystemOptions opts = new FileSystemOptions();\n\n        // SSH Key checking\n        SftpFileSystemConfigBuilder.getInstance().setStrictHostKeyChecking(opts, &quot;no&quot;);\n\n        /*\n         * Using the following line will cause VFS to choose File System&#39;s Root\n         * as VFS&#39;s root. If I wanted to use User&#39;s home as VFS&#39;s root then set\n         * 2nd method parameter to &quot;true&quot;\n         */\n        // Root directory set to user home\n        SftpFileSystemConfigBuilder.getInstance().setUserDirIsRoot(opts, false);\n\n        // Timeout is count by Milliseconds\n        SftpFileSystemConfigBuilder.getInstance().setTimeout(opts, 10000);\n\n        return opts;\n    }\n}\n","title":"When SFTP Upload using Apache Commons VFS have to face org.apache.commons.vfs2.FileSystemException: Could not find file with URI","body":"<p>I try to upload a file from one remote server to another remote server. I use the following code for it but I have to face an &quot;org.apache.commons.vfs2.FileSystemException&quot;.</p>\n<p>**Exception: **</p>\n<p>org.apache.commons.vfs2.FileSystemException: Could not find file with URI &quot;sftp://root:***@111.222.333.444\\root\\home\\tempfileholder\\sample.txt&quot; because it is a relative path, and no base URI was provided.</p>\n<p><strong>also, I can't understand what hope them as base URL</strong></p>\n<p>solution, please.</p>\n<p>**Code : **</p>\n<pre><code>import java.io.File;\n\nimport org.apache.commons.vfs2.FileObject;\nimport org.apache.commons.vfs2.FileSystemException;\nimport org.apache.commons.vfs2.FileSystemOptions;\nimport org.apache.commons.vfs2.Selectors;\nimport org.apache.commons.vfs2.impl.StandardFileSystemManager;\nimport org.apache.commons.vfs2.provider.sftp.SftpFileSystemConfigBuilder;\n\n/**\n * The class SFTPUtil containing uploading, downloading, checking if file exists\n * and deleting functionality using Apache Commons VFS (Virtual File System)\n * Library\n * \n * @author Kavindu\n * \n */\npublic class SFTPUtility {\n\n    public static void main(String[] args) {\n        String hostName = &quot;111.222.333.444&quot;;\n        String username = &quot;root&quot;;\n        String password = &quot;kkTTpp@JacobWPST&quot;;\n\n        String localFilePath = &quot;&quot;C:&quot;+File.separator+&quot;Users&quot;+File.separator+&quot;kavindu&quot;+File.separator+&quot;Desktop&quot;+File.separator+&quot;temp&quot;+File.separator+&quot;tempdetails.txt&quot;;\n        String remoteFilePath = &quot;/root/home/tempfileholder/sample.txt&quot;;       \n       \n        upload(hostName, username, password, localFilePath, remoteFilePath);\n        \n    }\n\n    /**\n     * Method to upload a file in Remote server\n     * \n     * @param hostName\n     *            HostName of the server\n     * @param username\n     *            UserName to login\n     * @param password\n     *            Password to login\n     * @param localFilePath\n     *            LocalFilePath. Should contain the entire local file path -\n     *            Directory and Filename with \\\\ as separator\n     */\n    public static void upload(String hostName, String username, String password, String localFilePath, String remoteFilePath) {\n\n        File file = new File(localFilePath);\n        if (!file.exists())\n            throw new RuntimeException(&quot;Error. Local file not found&quot;);\n\n        StandardFileSystemManager manager = new StandardFileSystemManager();\n\n        try {\n            manager.init();\n\n            // Create local file object\n            FileObject localFile = manager.resolveFile(file.getAbsolutePath());\n\n            // Create remote file object\n            FileObject remoteFile = manager.resolveFile(createConnectionString(hostName, username, password, remoteFilePath), createDefaultOptions());\n            /*\n             * use createDefaultOptions() in place of fsOptions for all default\n             * options - Kavindu.\n             */\n\n            // Copy local file to sftp server\n            remoteFile.copyFrom(localFile, Selectors.SELECT_SELF);\n\n            System.out.println(&quot;File upload success&quot;);\n        } catch (Exception e) {\n            throw new RuntimeException(e);\n        } finally {\n            manager.close();\n        }\n    }\n\n    /**\n     * Generates SFTP URL connection String\n     * \n     * @param hostName\n     *            HostName of the server\n     * @param username\n     *            UserName to login\n     * @param password\n     *            Password to login\n     * @param remoteFilePath\n     *            remoteFilePath. Should contain the entire remote file path -\n     *            Directory and Filename with / as separator\n     * @return concatenated SFTP URL string\n     */\n    public static String createConnectionString(String hostName, String username, String password, String remoteFilePath) {\n        return &quot;sftp://&quot; + username + &quot;:&quot; + password + &quot;@&quot; + hostName + &quot;/&quot; + remoteFilePath;\n    }\n\n    /**\n     * Method to setup default SFTP config\n     * \n     * @return the FileSystemOptions object containing the specified\n     *         configuration options\n     * @throws FileSystemException\n     */\n    public static FileSystemOptions createDefaultOptions() throws FileSystemException {\n        // Create SFTP options\n        FileSystemOptions opts = new FileSystemOptions();\n\n        // SSH Key checking\n        SftpFileSystemConfigBuilder.getInstance().setStrictHostKeyChecking(opts, &quot;no&quot;);\n\n        /*\n         * Using the following line will cause VFS to choose File System's Root\n         * as VFS's root. If I wanted to use User's home as VFS's root then set\n         * 2nd method parameter to &quot;true&quot;\n         */\n        // Root directory set to user home\n        SftpFileSystemConfigBuilder.getInstance().setUserDirIsRoot(opts, false);\n\n        // Timeout is count by Milliseconds\n        SftpFileSystemConfigBuilder.getInstance().setTimeout(opts, 10000);\n\n        return opts;\n    }\n}\n</code></pre>\n"},{"tags":["java","unit-testing","testng","jmockit"],"answers":[{"tags":[],"owner":{"account_id":42147,"reputation":16251,"user_id":2326914,"accept_rate":33,"display_name":"Rog&#233;rio"},"down_vote_count":0,"up_vote_count":6,"is_accepted":true,"score":6,"last_activity_date":1413226680,"creation_date":1413226680,"answer_id":26347008,"question_id":26332340,"body_markdown":"You should be able to do it in PowerMockito, yes.\r\n\r\nAnyway, in JMockit, you usually would write a *verification* block like the following:\r\n\r\n    @Test\r\n    public void exampleTest(@Mocked AFinalClass mock)\r\n    {\r\n        // Call the code under test which uses AFinalClass.\r\n\r\n        new Verifications() {{ AFinalClass.someStaticMethod(); }};\r\n    }","title":"How do I verify a call to a static method in a final class using jMockit and TestNG?","body":"<p>You should be able to do it in PowerMockito, yes.</p>\n\n<p>Anyway, in JMockit, you usually would write a <em>verification</em> block like the following:</p>\n\n<pre><code>@Test\npublic void exampleTest(@Mocked AFinalClass mock)\n{\n    // Call the code under test which uses AFinalClass.\n\n    new Verifications() {{ AFinalClass.someStaticMethod(); }};\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2863020,"reputation":312,"user_id":2457861,"display_name":"Kevin Yue"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1664245732,"creation_date":1664245732,"answer_id":73861760,"question_id":26332340,"body_markdown":"Below is my version based on `@Mocked` and `MockUp`\r\n\r\n```java\r\npublic class Util {\r\n    static {\r\n        // static initializer\r\n    }\r\n\r\n    public static void doSomething(String arg) {\r\n        // do something\r\n    }\r\n}\r\n```\r\n\r\n\r\n```java\r\npublic class SomeTest {\r\n    @Test\r\n    public void testDoSomething(@Mocked Util util) {\r\n        // NOTE: need to move the `MockUp` to @BeforeClass method if you want to mock the static initializer\r\n        new MockUp&lt;Util&gt;() {\r\n            @Mock\r\n            void $clinit() {\r\n                // do nothing\r\n            }\r\n\r\n            @Mock\r\n            void doSomething(String arg) {\r\n                // mock doSomething\r\n            }\r\n        };\r\n\r\n        // action to test\r\n\r\n        // verify\r\n        new Verifications() {{\r\n            String arg;\r\n            Util.doSomething(arg = withCapture());\r\n            assertEquals(&quot;expected&quot;, arg);\r\n        }};\r\n    }\r\n}\r\n```","title":"How do I verify a call to a static method in a final class using jMockit and TestNG?","body":"<p>Below is my version based on <code>@Mocked</code> and <code>MockUp</code></p>\n<pre class=\"lang-java prettyprint-override\"><code>public class Util {\n    static {\n        // static initializer\n    }\n\n    public static void doSomething(String arg) {\n        // do something\n    }\n}\n</code></pre>\n<pre class=\"lang-java prettyprint-override\"><code>public class SomeTest {\n    @Test\n    public void testDoSomething(@Mocked Util util) {\n        // NOTE: need to move the `MockUp` to @BeforeClass method if you want to mock the static initializer\n        new MockUp&lt;Util&gt;() {\n            @Mock\n            void $clinit() {\n                // do nothing\n            }\n\n            @Mock\n            void doSomething(String arg) {\n                // mock doSomething\n            }\n        };\n\n        // action to test\n\n        // verify\n        new Verifications() {{\n            String arg;\n            Util.doSomething(arg = withCapture());\n            assertEquals(&quot;expected&quot;, arg);\n        }};\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":327113,"reputation":2593,"user_id":649283,"accept_rate":67,"display_name":"supertonsky"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":3223,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"accepted_answer_id":26347008,"answer_count":2,"score":3,"last_activity_date":1664245732,"creation_date":1413169347,"question_id":26332340,"body_markdown":"How do I verify a call to a static method in a final class using jMockit?\r\n\r\nIn PowerMockito, this isn&#39;t possible because the class is final. If this can&#39;t be done using jMockit, what are the alternatives?","title":"How do I verify a call to a static method in a final class using jMockit and TestNG?","body":"<p>How do I verify a call to a static method in a final class using jMockit?</p>\n\n<p>In PowerMockito, this isn't possible because the class is final. If this can't be done using jMockit, what are the alternatives?</p>\n"},{"tags":["java","spring-boot","transactions","transactionmanager"],"comments":[{"owner":{"account_id":9571720,"reputation":6305,"user_id":7109162,"accept_rate":84,"display_name":"XtremeBaumer"},"score":0,"creation_date":1663163134,"post_id":73717549,"comment_id":130174550,"body_markdown":"You could use a [RoutingDataSource](https://www.baeldung.com/spring-abstract-routing-data-source)","body":"You could use a <a href=\"https://www.baeldung.com/spring-abstract-routing-data-source\" rel=\"nofollow noreferrer\">RoutingDataSource</a>"},{"owner":{"account_id":3391382,"reputation":3687,"user_id":2846138,"display_name":"cyberbrain"},"score":0,"creation_date":1664174516,"post_id":73717549,"comment_id":130402217,"body_markdown":"Your question reads to me as if you don&#39;t really have a choice - or do you have two working solutions at the moment? If you have two working solutions, please add this to your question. If not, please reformulate your question so that we know which actual problem you want to solve.","body":"Your question reads to me as if you don&#39;t really have a choice - or do you have two working solutions at the moment? If you have two working solutions, please add this to your question. If not, please reformulate your question so that we know which actual problem you want to solve."}],"answers":[{"tags":[],"owner":{"account_id":12139977,"reputation":5614,"user_id":8864226,"display_name":"James Risner"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1664245500,"creation_date":1664245500,"answer_id":73861746,"question_id":73717549,"body_markdown":"You should solve this as option 2, using one DataSourceTransactionManager per data source. You will need to keep track of the transaction manager for each data source.\r\n\r\nOne thing additionally, if you need to be able to rollback transactions on both databases, you will have to set up a ChainedTransactionManager for both.","title":"Atomikos or DataSource transaction manager with multiple datasource and local transaction","body":"<p>You should solve this as option 2, using one DataSourceTransactionManager per data source. You will need to keep track of the transaction manager for each data source.</p>\n<p>One thing additionally, if you need to be able to rollback transactions on both databases, you will have to set up a ChainedTransactionManager for both.</p>\n"}],"owner":{"account_id":191280,"reputation":15745,"user_id":431769,"accept_rate":78,"display_name":"hudi"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":557,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1664245500,"creation_date":1663161430,"question_id":73717549,"body_markdown":"My application works with multi datasources and 2 databases Oracle and PostgreSQL (I dont need global transaction) .\r\nI dont know which transaction manager to use. Both have some advantages and disadvantages.\r\n\r\n1. Atomikos suppport global transaction which I dont need and log some information about transaction to file system which I want to avoid:\r\n\r\n&gt; public void setEnableLogging(boolean enableLogging)\r\n&gt; \r\n&gt; Specifies if disk logging should be enabled or not. Defaults to true.\r\n&gt; It is useful for JUnit testing, or to profile code without seeing the\r\n&gt; transaction manager&#39;s activity as a hot spot but this should never be\r\n&gt; disabled on production or data integrity cannot be guaranteed.\r\n\r\nadvantages is that it use just one transaction manager\r\n\r\n2. When using DataSourceTransactionManager I need one per dataSource\r\n\r\n&gt;     @Bean\r\n&gt;     @Primary\r\n&gt;     DataSourceTransactionManager transactionManager1() {\r\n&gt;         DataSourceTransactionManager transactionManager = new DataSourceTransactionManager();\r\n&gt;         transactionManager.setDataSource(dataSource1());\r\n&gt;         return transactionManager;\r\n&gt;     }\r\n&gt;     \r\n&gt;     @Bean\r\n&gt;     DataSourceTransactionManager transactionManager2() {\r\n&gt;         DataSourceTransactionManager transactionManager = new DataSourceTransactionManager();\r\n&gt;         transactionManager.setDataSource(dataSource2());\r\n&gt;         return transactionManager;\r\n&gt;     }\r\n\r\n\r\n\r\nthis is problem because I need to specify name of tm in annotation:\r\n\r\n    @Transactional(&quot;transactionManager1&quot;)\r\n    public void test() {\r\n      \r\n    }\r\n\r\nbut I dont know it because in runtime I can switch in application which database to use.\r\n\r\nis there some other options or I am missing something in this two transaction manager ?\r\n","title":"Atomikos or DataSource transaction manager with multiple datasource and local transaction","body":"<p>My application works with multi datasources and 2 databases Oracle and PostgreSQL (I dont need global transaction) .\nI dont know which transaction manager to use. Both have some advantages and disadvantages.</p>\n<ol>\n<li>Atomikos suppport global transaction which I dont need and log some information about transaction to file system which I want to avoid:</li>\n</ol>\n<blockquote>\n<p>public void setEnableLogging(boolean enableLogging)</p>\n<p>Specifies if disk logging should be enabled or not. Defaults to true.\nIt is useful for JUnit testing, or to profile code without seeing the\ntransaction manager's activity as a hot spot but this should never be\ndisabled on production or data integrity cannot be guaranteed.</p>\n</blockquote>\n<p>advantages is that it use just one transaction manager</p>\n<ol start=\"2\">\n<li>When using DataSourceTransactionManager I need one per dataSource</li>\n</ol>\n<blockquote>\n<pre><code>@Bean\n@Primary\nDataSourceTransactionManager transactionManager1() {\n    DataSourceTransactionManager transactionManager = new DataSourceTransactionManager();\n    transactionManager.setDataSource(dataSource1());\n    return transactionManager;\n}\n\n@Bean\nDataSourceTransactionManager transactionManager2() {\n    DataSourceTransactionManager transactionManager = new DataSourceTransactionManager();\n    transactionManager.setDataSource(dataSource2());\n    return transactionManager;\n}\n</code></pre>\n</blockquote>\n<p>this is problem because I need to specify name of tm in annotation:</p>\n<pre><code>@Transactional(&quot;transactionManager1&quot;)\npublic void test() {\n  \n}\n</code></pre>\n<p>but I dont know it because in runtime I can switch in application which database to use.</p>\n<p>is there some other options or I am missing something in this two transaction manager ?</p>\n"},{"tags":["java","jpa","many-to-many","hibernate-criteria","criteria-api"],"comments":[{"owner":{"account_id":7871352,"reputation":13,"user_id":5948533,"display_name":"Chris Macdonald"},"score":1,"creation_date":1664248809,"post_id":73861647,"comment_id":130422190,"body_markdown":"The [ListJoin specifications](https://docs.oracle.com/javaee/7/api/javax/persistence/criteria/ListJoin.html) have the parameters `ListJoin&lt;Z, E&gt;` where Z - the source type of the join and E - the element type of the target List.\nSo would this be `ListJoin&lt;DocumentSet, DocumentType&gt;`?","body":"The <a href=\"https://docs.oracle.com/javaee/7/api/javax/persistence/criteria/ListJoin.html\" rel=\"nofollow noreferrer\">ListJoin specifications</a> have the parameters <code>ListJoin&lt;Z, E&gt;</code> where Z - the source type of the join and E - the element type of the target List. So would this be <code>ListJoin&lt;DocumentSet, DocumentType&gt;</code>?"},{"owner":{"account_id":231721,"reputation":20460,"user_id":496099,"display_name":"Chris"},"score":0,"creation_date":1664318156,"post_id":73861647,"comment_id":130443170,"body_markdown":"You&#39;ve answered your own question. \nYour problem isn&#39;t going to be with the query and Join&#39;s type, but that you are expecting a List&lt;String&gt; description list somehow - typeJoin.get(DocumentType_.description) will return a single description value - so you will get id/name duplicates with different descriptions because of the join.","body":"You&#39;ve answered your own question.  Your problem isn&#39;t going to be with the query and Join&#39;s type, but that you are expecting a List&lt;String&gt; description list somehow - typeJoin.get(DocumentType_.description) will return a single description value - so you will get id/name duplicates with different descriptions because of the join."},{"owner":{"account_id":7871352,"reputation":13,"user_id":5948533,"display_name":"Chris Macdonald"},"score":0,"creation_date":1664320695,"post_id":73861647,"comment_id":130443520,"body_markdown":"So is there a way that I can have a returned element be a list? Or will I need to do some sort of run through the returned results to filter out duplicates and add the DocumentTypes to a List.","body":"So is there a way that I can have a returned element be a list? Or will I need to do some sort of run through the returned results to filter out duplicates and add the DocumentTypes to a List."},{"owner":{"account_id":231721,"reputation":20460,"user_id":496099,"display_name":"Chris"},"score":0,"creation_date":1664382196,"post_id":73861647,"comment_id":130460559,"body_markdown":"The later option is the only one I&#39;m aware of. Queries return row data and while JPA can do some magic to turn multiple rows into a single entity, if you aren&#39;t using an entity (and want valid pagination at the DB level), you will have to correlate those return values into your single java object instance yourself. Spring view objects I don&#39;t believe handle it yet either; doing so would require caching and identity knowledge to tell when one row result is the same but not quite a full duplicate so that the new info can be added to the existing object, and sorting or order isn&#39;t a given.","body":"The later option is the only one I&#39;m aware of. Queries return row data and while JPA can do some magic to turn multiple rows into a single entity, if you aren&#39;t using an entity (and want valid pagination at the DB level), you will have to correlate those return values into your single java object instance yourself. Spring view objects I don&#39;t believe handle it yet either; doing so would require caching and identity knowledge to tell when one row result is the same but not quite a full duplicate so that the new info can be added to the existing object, and sorting or order isn&#39;t a given."}],"owner":{"account_id":7871352,"reputation":13,"user_id":5948533,"display_name":"Chris Macdonald"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":192,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1664244288,"creation_date":1664244288,"question_id":73861647,"body_markdown":"In my application, I have a JPA Entity `DocumentSet` which has a ManyToMany relationship with another entity `DocumentType`.\r\nI&#39;m using Criteria Queries, but am struggling to understand how to work with ManyToMany relationships in this context.\r\n\r\n\r\nThe goal is to have the entity return in a DAO:\r\n```\r\n@JsonProperty(&quot;id&quot;)\r\nprivate UUID id;\r\n\r\n@JsonProperty(&quot;name&quot;)\r\nprivate String name;\r\n\r\n@JsonProperty(&quot;type_descriptions&quot;)\r\nprivate List&lt;String&gt; typeDescriptions;\r\n```\r\n\r\nAnd then build a Criteria Query that uses a join to get access to all the `DocumentType` description variables.\r\n\r\nSomething along the lines of this incorrect example.\r\n```\r\nJoin&lt;DocumentSet, DocumentType&gt; typeJoin = root.join(DocumentSet_.types);\r\n\r\nquery.multiselect( root.get(...), ......, typeJoin.get(DocumentType_.description));\r\n```\r\n\r\nI&#39;m not sure how I should use `ListJoin` or `PluralAttribute` or if this is even possible / a good idea, so any advice is much appreciated.\r\n\r\nThanks!","title":"Retrieving a List of a variable with a ManyToMany relationship using JPA Criteria Query","body":"<p>In my application, I have a JPA Entity <code>DocumentSet</code> which has a ManyToMany relationship with another entity <code>DocumentType</code>.\nI'm using Criteria Queries, but am struggling to understand how to work with ManyToMany relationships in this context.</p>\n<p>The goal is to have the entity return in a DAO:</p>\n<pre><code>@JsonProperty(&quot;id&quot;)\nprivate UUID id;\n\n@JsonProperty(&quot;name&quot;)\nprivate String name;\n\n@JsonProperty(&quot;type_descriptions&quot;)\nprivate List&lt;String&gt; typeDescriptions;\n</code></pre>\n<p>And then build a Criteria Query that uses a join to get access to all the <code>DocumentType</code> description variables.</p>\n<p>Something along the lines of this incorrect example.</p>\n<pre><code>Join&lt;DocumentSet, DocumentType&gt; typeJoin = root.join(DocumentSet_.types);\n\nquery.multiselect( root.get(...), ......, typeJoin.get(DocumentType_.description));\n</code></pre>\n<p>I'm not sure how I should use <code>ListJoin</code> or <code>PluralAttribute</code> or if this is even possible / a good idea, so any advice is much appreciated.</p>\n<p>Thanks!</p>\n"},{"tags":["java","jwt","jwk"],"answers":[{"tags":[],"owner":{"account_id":3509196,"reputation":16483,"user_id":2933977,"display_name":"stdunbar"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1664244260,"creation_date":1664244260,"answer_id":73861644,"question_id":73805496,"body_markdown":"There does not appear to be a way to deal with this with standard libraries.  I was unable to find anything that indicates that a custom parameter in a JWK is legitimate but the Jose library seems to just ignore it.  So the only thing I can find is to read it &quot;by hand&quot;.  Something like:\r\n\r\n    import com.jayway.jsonpath.JsonPath;\r\n    \r\n    import java.util.HashMap;\r\n    import java.util.List;\r\n    \r\n    public class JWKSParserDirect {\r\n        private static final String jwks = &quot;{\\&quot;keys\\&quot;: [{&quot; +\r\n                &quot;\\&quot;kty\\&quot;: \\&quot;RSA\\&quot;,&quot; +\r\n                &quot;\\&quot;use\\&quot;: \\&quot;sig\\&quot;,&quot; +\r\n                &quot;\\&quot;alg\\&quot;: \\&quot;RS256\\&quot;,&quot; +\r\n                &quot;\\&quot;e\\&quot;: \\&quot;AQAB\\&quot;,&quot; +\r\n                &quot;\\&quot;kid\\&quot;: \\&quot;2aktWjYabDofafVZIQc_452eAW9Z_pw7ULGGx87ufVA\\&quot;,&quot; +\r\n                &quot;\\&quot;x5t\\&quot;: \\&quot;5FTiZff07R_NuqNy5QXUK7uZNLo\\&quot;,&quot; +\r\n                &quot;\\&quot;custom_field_1\\&quot;: \\&quot;this is some content\\&quot;,&quot; +\r\n                &quot;\\&quot;custom_field_2\\&quot;: \\&quot;this is some content, too\\&quot;,&quot; +\r\n                &quot;\\&quot;n\\&quot;: \\&quot;foofoofoo\\&quot;,&quot; +\r\n                &quot;\\&quot;x5c\\&quot;: [\\&quot;blahblahblah\\&quot;]&quot; +\r\n                &quot;}&quot; +\r\n                &quot;,&quot; +\r\n                &quot;{&quot; +\r\n                &quot;\\&quot;kty\\&quot;: \\&quot;RSA\\&quot;,&quot; +\r\n                &quot;\\&quot;use\\&quot;: \\&quot;sig\\&quot;,&quot; +\r\n                &quot;\\&quot;alg\\&quot;: \\&quot;RS256\\&quot;,&quot; +\r\n                &quot;\\&quot;e\\&quot;: \\&quot;AQAB\\&quot;,&quot; +\r\n                &quot;\\&quot;kid\\&quot;: \\&quot;2aktWjYabDofafVZIQc_452eAW9Z_pw7ULGGx87ufVA\\&quot;,&quot; +\r\n                &quot;\\&quot;x5t\\&quot;: \\&quot;5FTiZff07R_NuqNy5QXUK7uZNLo\\&quot;,&quot; +\r\n                &quot;\\&quot;custom_field_1\\&quot;: \\&quot;this is some content the second time\\&quot;,&quot; +\r\n                &quot;\\&quot;custom_field_2\\&quot;: \\&quot;this is some content, too and two\\&quot;,&quot; +\r\n                &quot;\\&quot;n\\&quot;: \\&quot;foofoofoo\\&quot;,&quot; +\r\n                &quot;\\&quot;x5c\\&quot;: [\\&quot;blahblahblah\\&quot;]&quot; +\r\n                &quot;}]}&quot;;\r\n    \r\n        @SuppressWarnings(&quot;unchecked&quot;)\r\n        public static void main(String[] argv) {\r\n            List&lt;Object&gt; keys = JsonPath.read(jwks, &quot;$.keys[*]&quot;);\r\n    \r\n            for (Object key : keys) {\r\n                HashMap&lt;String, String&gt; keyContents = (HashMap&lt;String, String&gt;) key;\r\n    \r\n                System.out.println(&quot;custom_field_1 is \\&quot;&quot; + keyContents.get(&quot;custom_field_1&quot;) + &quot;\\&quot;&quot;);\r\n                System.out.println(&quot;custom_field_2 is \\&quot;&quot; + keyContents.get(&quot;custom_field_2&quot;) + &quot;\\&quot;&quot;);\r\n            }\r\n        }\r\n    }\r\n\r\nor, to go direct to the JWK:\r\n\r\n    import com.jayway.jsonpath.JsonPath;\r\n\r\n    import java.io.IOException;\r\n    import java.io.InputStream;\r\n    import java.net.URL;\r\n    import java.net.URLConnection;\r\n    import java.util.HashMap;\r\n    import java.util.List;\r\n    \r\n    public class JWKSParserURL {\r\n        \r\n        @SuppressWarnings(&quot;unchecked&quot;)\r\n        public static void main(String[] argv) {\r\n            try {\r\n                URL url = new URL(&quot;https://someserver.tld/auth/realms/realmname/protocol/openid-connect/certs&quot;);\r\n                URLConnection urlConnection = url.openConnection();\r\n                InputStream inputStream = urlConnection.getInputStream();\r\n    \r\n                List&lt;Object&gt; keys = JsonPath.read(inputStream, &quot;$.keys[*]&quot;);\r\n    \r\n                for( Object key: keys) {\r\n                    HashMap&lt;String, String&gt; keyContents = (HashMap&lt;String, String&gt;)key;\r\n    \r\n                    System.out.println(&quot;custom_field_1 is \\&quot;&quot; + keyContents.get(&quot;custom_field_1&quot;) + &quot;\\&quot;&quot;);\r\n                    System.out.println(&quot;custom_field_2 is \\&quot;&quot; + keyContents.get(&quot;custom_field_2&quot;) + &quot;\\&quot;&quot;);\r\n                }\r\n            }\r\n            catch (IOException ioe) {\r\n                ioe.printStackTrace(System.err);\r\n            }\r\n        }\r\n    }\r\n\r\nThere isn&#39;t a way that I can find to have a regex for the Json Path key so you&#39;ll need to grab them with the full path.  You can also have something like:\r\n\r\n    List&lt;String&gt; customField1 = JsonPath.read(jwks, &quot;$.key[*].custom_field_1&quot;);\r\n\r\nto get a list of the &quot;custom_field_1&quot; values.  To me this is more difficult as you get all of the custom field values separately and not within each key.\r\n\r\nAgain, I&#39;m not finding support for custom JWK fields anywhere.  JW**T** - no problem but not JWK.  But if you&#39;ve got this I think you&#39;ll need to extract these fields without standard libraries.\r\n\r\n","title":"Java com.nimbusds.jose.jwk.JWKSet with custom field","body":"<p>There does not appear to be a way to deal with this with standard libraries.  I was unable to find anything that indicates that a custom parameter in a JWK is legitimate but the Jose library seems to just ignore it.  So the only thing I can find is to read it &quot;by hand&quot;.  Something like:</p>\n<pre><code>import com.jayway.jsonpath.JsonPath;\n\nimport java.util.HashMap;\nimport java.util.List;\n\npublic class JWKSParserDirect {\n    private static final String jwks = &quot;{\\&quot;keys\\&quot;: [{&quot; +\n            &quot;\\&quot;kty\\&quot;: \\&quot;RSA\\&quot;,&quot; +\n            &quot;\\&quot;use\\&quot;: \\&quot;sig\\&quot;,&quot; +\n            &quot;\\&quot;alg\\&quot;: \\&quot;RS256\\&quot;,&quot; +\n            &quot;\\&quot;e\\&quot;: \\&quot;AQAB\\&quot;,&quot; +\n            &quot;\\&quot;kid\\&quot;: \\&quot;2aktWjYabDofafVZIQc_452eAW9Z_pw7ULGGx87ufVA\\&quot;,&quot; +\n            &quot;\\&quot;x5t\\&quot;: \\&quot;5FTiZff07R_NuqNy5QXUK7uZNLo\\&quot;,&quot; +\n            &quot;\\&quot;custom_field_1\\&quot;: \\&quot;this is some content\\&quot;,&quot; +\n            &quot;\\&quot;custom_field_2\\&quot;: \\&quot;this is some content, too\\&quot;,&quot; +\n            &quot;\\&quot;n\\&quot;: \\&quot;foofoofoo\\&quot;,&quot; +\n            &quot;\\&quot;x5c\\&quot;: [\\&quot;blahblahblah\\&quot;]&quot; +\n            &quot;}&quot; +\n            &quot;,&quot; +\n            &quot;{&quot; +\n            &quot;\\&quot;kty\\&quot;: \\&quot;RSA\\&quot;,&quot; +\n            &quot;\\&quot;use\\&quot;: \\&quot;sig\\&quot;,&quot; +\n            &quot;\\&quot;alg\\&quot;: \\&quot;RS256\\&quot;,&quot; +\n            &quot;\\&quot;e\\&quot;: \\&quot;AQAB\\&quot;,&quot; +\n            &quot;\\&quot;kid\\&quot;: \\&quot;2aktWjYabDofafVZIQc_452eAW9Z_pw7ULGGx87ufVA\\&quot;,&quot; +\n            &quot;\\&quot;x5t\\&quot;: \\&quot;5FTiZff07R_NuqNy5QXUK7uZNLo\\&quot;,&quot; +\n            &quot;\\&quot;custom_field_1\\&quot;: \\&quot;this is some content the second time\\&quot;,&quot; +\n            &quot;\\&quot;custom_field_2\\&quot;: \\&quot;this is some content, too and two\\&quot;,&quot; +\n            &quot;\\&quot;n\\&quot;: \\&quot;foofoofoo\\&quot;,&quot; +\n            &quot;\\&quot;x5c\\&quot;: [\\&quot;blahblahblah\\&quot;]&quot; +\n            &quot;}]}&quot;;\n\n    @SuppressWarnings(&quot;unchecked&quot;)\n    public static void main(String[] argv) {\n        List&lt;Object&gt; keys = JsonPath.read(jwks, &quot;$.keys[*]&quot;);\n\n        for (Object key : keys) {\n            HashMap&lt;String, String&gt; keyContents = (HashMap&lt;String, String&gt;) key;\n\n            System.out.println(&quot;custom_field_1 is \\&quot;&quot; + keyContents.get(&quot;custom_field_1&quot;) + &quot;\\&quot;&quot;);\n            System.out.println(&quot;custom_field_2 is \\&quot;&quot; + keyContents.get(&quot;custom_field_2&quot;) + &quot;\\&quot;&quot;);\n        }\n    }\n}\n</code></pre>\n<p>or, to go direct to the JWK:</p>\n<pre><code>import com.jayway.jsonpath.JsonPath;\n\nimport java.io.IOException;\nimport java.io.InputStream;\nimport java.net.URL;\nimport java.net.URLConnection;\nimport java.util.HashMap;\nimport java.util.List;\n\npublic class JWKSParserURL {\n    \n    @SuppressWarnings(&quot;unchecked&quot;)\n    public static void main(String[] argv) {\n        try {\n            URL url = new URL(&quot;https://someserver.tld/auth/realms/realmname/protocol/openid-connect/certs&quot;);\n            URLConnection urlConnection = url.openConnection();\n            InputStream inputStream = urlConnection.getInputStream();\n\n            List&lt;Object&gt; keys = JsonPath.read(inputStream, &quot;$.keys[*]&quot;);\n\n            for( Object key: keys) {\n                HashMap&lt;String, String&gt; keyContents = (HashMap&lt;String, String&gt;)key;\n\n                System.out.println(&quot;custom_field_1 is \\&quot;&quot; + keyContents.get(&quot;custom_field_1&quot;) + &quot;\\&quot;&quot;);\n                System.out.println(&quot;custom_field_2 is \\&quot;&quot; + keyContents.get(&quot;custom_field_2&quot;) + &quot;\\&quot;&quot;);\n            }\n        }\n        catch (IOException ioe) {\n            ioe.printStackTrace(System.err);\n        }\n    }\n}\n</code></pre>\n<p>There isn't a way that I can find to have a regex for the Json Path key so you'll need to grab them with the full path.  You can also have something like:</p>\n<pre><code>List&lt;String&gt; customField1 = JsonPath.read(jwks, &quot;$.key[*].custom_field_1&quot;);\n</code></pre>\n<p>to get a list of the &quot;custom_field_1&quot; values.  To me this is more difficult as you get all of the custom field values separately and not within each key.</p>\n<p>Again, I'm not finding support for custom JWK fields anywhere.  JW<strong>T</strong> - no problem but not JWK.  But if you've got this I think you'll need to extract these fields without standard libraries.</p>\n"}],"owner":{"account_id":446439,"reputation":2037,"user_id":2956829,"accept_rate":93,"display_name":"el n00b"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":233,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":73861644,"answer_count":1,"score":0,"last_activity_date":1664244260,"creation_date":1663785514,"question_id":73805496,"body_markdown":"I have a client sending in a JWKS like this:\r\n\r\n```json\r\n{\r\n  &quot;keys&quot;: [\r\n    &quot;kty&quot;: &quot;RSA&quot;,\r\n    &quot;use&quot;: &quot;sig&quot;,\r\n    &quot;alg&quot;: &quot;RS256&quot;,\r\n    &quot;kid&quot;: &quot;...&quot;,\r\n    &quot;x5t&quot;: &quot;...&quot;,\r\n    &quot;custom_field_1&quot;: &quot;this is some content&quot;,\r\n    &quot;custom_field_2&quot;: &quot;this is some content, too&quot;,\r\n    &quot;n&quot;: &quot;...&quot;,\r\n    &quot;x5c&quot;: &quot;...&quot;\r\n  ]\r\n}\r\n```\r\n\r\nUsing the [com.nimbusds.jose.jwk.JWKSet](https://javadoc.io/doc/com.nimbusds/nimbus-jose-jwt/8.0/com/nimbusds/jose/jwk/JWKSet.html), I&#39;d like to rip through the keys via the `getKeys()` method, which gives me [com.nimbusds.jose.jwk.JWK](https://javadoc.io/doc/com.nimbusds/nimbus-jose-jwt/8.0/com/nimbusds/jose/jwk/JWK.html) objects and read those custom fields. I need to perform some custom logic based on these fields.\r\n\r\nIs there a way to do this?","title":"Java com.nimbusds.jose.jwk.JWKSet with custom field","body":"<p>I have a client sending in a JWKS like this:</p>\n<pre class=\"lang-json prettyprint-override\"><code>{\n  &quot;keys&quot;: [\n    &quot;kty&quot;: &quot;RSA&quot;,\n    &quot;use&quot;: &quot;sig&quot;,\n    &quot;alg&quot;: &quot;RS256&quot;,\n    &quot;kid&quot;: &quot;...&quot;,\n    &quot;x5t&quot;: &quot;...&quot;,\n    &quot;custom_field_1&quot;: &quot;this is some content&quot;,\n    &quot;custom_field_2&quot;: &quot;this is some content, too&quot;,\n    &quot;n&quot;: &quot;...&quot;,\n    &quot;x5c&quot;: &quot;...&quot;\n  ]\n}\n</code></pre>\n<p>Using the <a href=\"https://javadoc.io/doc/com.nimbusds/nimbus-jose-jwt/8.0/com/nimbusds/jose/jwk/JWKSet.html\" rel=\"nofollow noreferrer\">com.nimbusds.jose.jwk.JWKSet</a>, I'd like to rip through the keys via the <code>getKeys()</code> method, which gives me <a href=\"https://javadoc.io/doc/com.nimbusds/nimbus-jose-jwt/8.0/com/nimbusds/jose/jwk/JWK.html\" rel=\"nofollow noreferrer\">com.nimbusds.jose.jwk.JWK</a> objects and read those custom fields. I need to perform some custom logic based on these fields.</p>\n<p>Is there a way to do this?</p>\n"},{"tags":["java","logging","logback"],"answers":[{"tags":[],"owner":{"account_id":20026709,"reputation":351,"user_id":14680375,"display_name":"BlackC"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1664242736,"creation_date":1664242736,"answer_id":73861526,"question_id":73826590,"body_markdown":"Not supported by default.\r\n\r\nfile name is created by the [FileNamePattern](https://github.com/qos-ch/logback/blob/master/logback-core/src/main/java/ch/qos/logback/core/rolling/helper/FileNamePattern.java) class .\r\n\r\nit not supports to custom file name,because the access level of FileNamePattern member variable  is default(means only package).\r\n\r\nThere is a less recommend way to implement,use &lt;b&gt;reflect&lt;/b&gt; to replace member variable.\r\n\r\n```java\r\npublic class CustomIntegerTokenConverter extends IntegerTokenConverter {\r\n  //convert integer to string with 3 digits\r\n  @Override\r\n  public String convert(int i) {\r\n    return String.format(&quot;%03d&quot;,1);\r\n  }\r\n}\r\n```\r\n\r\n```java\r\npublic class SimpleTimeBasedFileNamingAndTriggeringPolicy&lt;E&gt; extends SizeAndTimeBasedRollingPolicy&lt;E&gt; {\r\n\r\n  //use reflect to replace member variable of FileNamePattern.\r\n  @Override\r\n  public void start() {\r\n    super.start();\r\n    try {\r\n      Field triggeringPolicyField  = TimeBasedRollingPolicy.class.getDeclaredField(&quot;timeBasedFileNamingAndTriggeringPolicy&quot;);\r\n      triggeringPolicyField.setAccessible(true);\r\n      TimeBasedFileNamingAndTriggeringPolicy triggeringPolicy = (TimeBasedFileNamingAndTriggeringPolicy) triggeringPolicyField.get(this);\r\n      triggeringPolicy.setTimeBasedRollingPolicy(this);\r\n\r\n\r\n      Field fileNamePatternField  = RollingPolicyBase.class.getDeclaredField(&quot;fileNamePattern&quot;);\r\n      fileNamePatternField.setAccessible(true);\r\n      SimpleFileNamePattern SimpleFileNamePattern = new SimpleFileNamePattern(fileNamePatternStr, this.context);\r\n      fileNamePatternField.set(this,SimpleFileNamePattern);\r\n\r\n      Field fileNamePatternWCSField  = TimeBasedRollingPolicy.class.getDeclaredField(&quot;fileNamePatternWithoutCompSuffix&quot;);\r\n      fileNamePatternWCSField.setAccessible(true);\r\n      SimpleFileNamePattern SimpleFileNamePatternWCS = new SimpleFileNamePattern(\r\n          Compressor.computeFileNameStrWithoutCompSuffix(fileNamePatternStr, compressionMode), this.context);\r\n      fileNamePatternWCSField.set(this,SimpleFileNamePatternWCS);\r\n\r\n    } catch (NoSuchFieldException e) {\r\n      e.printStackTrace();\r\n    } catch (IllegalAccessException e) {\r\n      e.printStackTrace();\r\n    }\r\n  }\r\n\r\n}\r\n```\r\n```java\r\npublic class SimpleFileNamePattern extends FileNamePattern {\r\n  public SimpleFileNamePattern(String patternArg, Context contextArg) {\r\n    super(patternArg, contextArg);\r\n  }\r\n  \r\n  // replace to a custom integer converter \r\n  static {\r\n    try {\r\n      Field field = FileNamePattern.class.getDeclaredField(&quot;CONVERTER_MAP&quot;);\r\n      field.setAccessible(true);\r\n      Map&lt;String, String&gt; map = (Map&lt;String, String&gt;) field.get(SimpleFileNamePattern.class);\r\n      map.clear();\r\n      map.put(IntegerTokenConverter.CONVERTER_KEY, CustomIntegerTokenConverter.class.getName());\r\n      map.put(DateTokenConverter.CONVERTER_KEY, DateTokenConverter.class.getName());\r\n\r\n    } catch (NoSuchFieldException e) {\r\n      e.printStackTrace();\r\n    } catch (IllegalAccessException e) {\r\n      e.printStackTrace();\r\n    }\r\n  }\r\n}\r\n```\r\n```xml\r\n&lt;appender name=&quot;ROLLING&quot; class=&quot;ch.qos.logback.core.rolling.RollingFileAppender&quot;&gt;\r\n    &lt;rollingPolicy class=&quot;SimpleTimeBasedFileNamingAndTriggeringPolicy&quot;&gt;\r\n      &lt;fileNamePattern&gt;Test.%d{yyyy-MM-dd}.%i.log&lt;/fileNamePattern&gt;\r\n       &lt;maxFileSize&gt;100MB&lt;/maxFileSize&gt;    \r\n       &lt;maxHistory&gt;60&lt;/maxHistory&gt;\r\n       &lt;totalSizeCap&gt;20GB&lt;/totalSizeCap&gt;\r\n    &lt;/rollingPolicy&gt;\r\n    &lt;encoder&gt;\r\n      &lt;pattern&gt;%msg%n&lt;/pattern&gt;\r\n    &lt;/encoder&gt;\r\n  &lt;/appender&gt;\r\n```\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/ZDa1R.png","title":"How to set integer counter format for file name in logback to 3 digits?","body":"<p>Not supported by default.</p>\n<p>file name is created by the <a href=\"https://github.com/qos-ch/logback/blob/master/logback-core/src/main/java/ch/qos/logback/core/rolling/helper/FileNamePattern.java\" rel=\"nofollow noreferrer\">FileNamePattern</a> class .</p>\n<p>it not supports to custom file name,because the access level of FileNamePattern member variable  is default(means only package).</p>\n<p>There is a less recommend way to implement,use <b>reflect</b> to replace member variable.</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class CustomIntegerTokenConverter extends IntegerTokenConverter {\n  //convert integer to string with 3 digits\n  @Override\n  public String convert(int i) {\n    return String.format(&quot;%03d&quot;,1);\n  }\n}\n</code></pre>\n<pre class=\"lang-java prettyprint-override\"><code>public class SimpleTimeBasedFileNamingAndTriggeringPolicy&lt;E&gt; extends SizeAndTimeBasedRollingPolicy&lt;E&gt; {\n\n  //use reflect to replace member variable of FileNamePattern.\n  @Override\n  public void start() {\n    super.start();\n    try {\n      Field triggeringPolicyField  = TimeBasedRollingPolicy.class.getDeclaredField(&quot;timeBasedFileNamingAndTriggeringPolicy&quot;);\n      triggeringPolicyField.setAccessible(true);\n      TimeBasedFileNamingAndTriggeringPolicy triggeringPolicy = (TimeBasedFileNamingAndTriggeringPolicy) triggeringPolicyField.get(this);\n      triggeringPolicy.setTimeBasedRollingPolicy(this);\n\n\n      Field fileNamePatternField  = RollingPolicyBase.class.getDeclaredField(&quot;fileNamePattern&quot;);\n      fileNamePatternField.setAccessible(true);\n      SimpleFileNamePattern SimpleFileNamePattern = new SimpleFileNamePattern(fileNamePatternStr, this.context);\n      fileNamePatternField.set(this,SimpleFileNamePattern);\n\n      Field fileNamePatternWCSField  = TimeBasedRollingPolicy.class.getDeclaredField(&quot;fileNamePatternWithoutCompSuffix&quot;);\n      fileNamePatternWCSField.setAccessible(true);\n      SimpleFileNamePattern SimpleFileNamePatternWCS = new SimpleFileNamePattern(\n          Compressor.computeFileNameStrWithoutCompSuffix(fileNamePatternStr, compressionMode), this.context);\n      fileNamePatternWCSField.set(this,SimpleFileNamePatternWCS);\n\n    } catch (NoSuchFieldException e) {\n      e.printStackTrace();\n    } catch (IllegalAccessException e) {\n      e.printStackTrace();\n    }\n  }\n\n}\n</code></pre>\n<pre class=\"lang-java prettyprint-override\"><code>public class SimpleFileNamePattern extends FileNamePattern {\n  public SimpleFileNamePattern(String patternArg, Context contextArg) {\n    super(patternArg, contextArg);\n  }\n  \n  // replace to a custom integer converter \n  static {\n    try {\n      Field field = FileNamePattern.class.getDeclaredField(&quot;CONVERTER_MAP&quot;);\n      field.setAccessible(true);\n      Map&lt;String, String&gt; map = (Map&lt;String, String&gt;) field.get(SimpleFileNamePattern.class);\n      map.clear();\n      map.put(IntegerTokenConverter.CONVERTER_KEY, CustomIntegerTokenConverter.class.getName());\n      map.put(DateTokenConverter.CONVERTER_KEY, DateTokenConverter.class.getName());\n\n    } catch (NoSuchFieldException e) {\n      e.printStackTrace();\n    } catch (IllegalAccessException e) {\n      e.printStackTrace();\n    }\n  }\n}\n</code></pre>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;appender name=&quot;ROLLING&quot; class=&quot;ch.qos.logback.core.rolling.RollingFileAppender&quot;&gt;\n    &lt;rollingPolicy class=&quot;SimpleTimeBasedFileNamingAndTriggeringPolicy&quot;&gt;\n      &lt;fileNamePattern&gt;Test.%d{yyyy-MM-dd}.%i.log&lt;/fileNamePattern&gt;\n       &lt;maxFileSize&gt;100MB&lt;/maxFileSize&gt;    \n       &lt;maxHistory&gt;60&lt;/maxHistory&gt;\n       &lt;totalSizeCap&gt;20GB&lt;/totalSizeCap&gt;\n    &lt;/rollingPolicy&gt;\n    &lt;encoder&gt;\n      &lt;pattern&gt;%msg%n&lt;/pattern&gt;\n    &lt;/encoder&gt;\n  &lt;/appender&gt;\n</code></pre>\n<p><a href=\"https://i.stack.imgur.com/ZDa1R.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/ZDa1R.png\" alt=\"enter image description here\" /></a></p>\n"}],"owner":{"account_id":20520447,"reputation":5,"user_id":15060172,"display_name":"MrNone"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":212,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1664242736,"creation_date":1663930014,"question_id":73826590,"body_markdown":"It is possible to set the name of the log file generated by logback so that the archive files are numbered in the following way: Test.2022-09-23.001.log instead of Test.2022-09-23.1.log? It is about the numbering, which is the archive file on a given day, to number 001.002 ... instead of 1, 2 ... &quot;% i&quot; is responsible for this place, there is no mention in the documentation and changing this parameter to another one, and the change to &quot;%iii&quot; causes a compile error and change to &quot;%03i&quot; but does not work. Does anyone know if there is such a possibility? It is a file name given in the fileNamePattern tag\r\n\r\n    &lt;appender name=&quot;ROLLING&quot; class=&quot;ch.qos.logback.core.rolling.RollingFileAppender&quot;&gt;\r\n        &lt;file&gt;Test.log&lt;/file&gt;\r\n        &lt;rollingPolicy class=&quot;ch.qos.logback.core.rolling.SizeAndTimeBasedRollingPolicy&quot;&gt;\r\n          &lt;fileNamePattern&gt;Test.%d{yyyy-MM-dd}.%i.log&lt;/fileNamePattern&gt;\r\n           &lt;maxFileSize&gt;100MB&lt;/maxFileSize&gt;    \r\n           &lt;maxHistory&gt;60&lt;/maxHistory&gt;\r\n           &lt;totalSizeCap&gt;20GB&lt;/totalSizeCap&gt;\r\n        &lt;/rollingPolicy&gt;\r\n        &lt;encoder&gt;\r\n          &lt;pattern&gt;%msg%n&lt;/pattern&gt;\r\n        &lt;/encoder&gt;\r\n      &lt;/appender&gt;\r\n\r\n","title":"How to set integer counter format for file name in logback to 3 digits?","body":"<p>It is possible to set the name of the log file generated by logback so that the archive files are numbered in the following way: Test.2022-09-23.001.log instead of Test.2022-09-23.1.log? It is about the numbering, which is the archive file on a given day, to number 001.002 ... instead of 1, 2 ... &quot;% i&quot; is responsible for this place, there is no mention in the documentation and changing this parameter to another one, and the change to &quot;%iii&quot; causes a compile error and change to &quot;%03i&quot; but does not work. Does anyone know if there is such a possibility? It is a file name given in the fileNamePattern tag</p>\n<pre><code>&lt;appender name=&quot;ROLLING&quot; class=&quot;ch.qos.logback.core.rolling.RollingFileAppender&quot;&gt;\n    &lt;file&gt;Test.log&lt;/file&gt;\n    &lt;rollingPolicy class=&quot;ch.qos.logback.core.rolling.SizeAndTimeBasedRollingPolicy&quot;&gt;\n      &lt;fileNamePattern&gt;Test.%d{yyyy-MM-dd}.%i.log&lt;/fileNamePattern&gt;\n       &lt;maxFileSize&gt;100MB&lt;/maxFileSize&gt;    \n       &lt;maxHistory&gt;60&lt;/maxHistory&gt;\n       &lt;totalSizeCap&gt;20GB&lt;/totalSizeCap&gt;\n    &lt;/rollingPolicy&gt;\n    &lt;encoder&gt;\n      &lt;pattern&gt;%msg%n&lt;/pattern&gt;\n    &lt;/encoder&gt;\n  &lt;/appender&gt;\n</code></pre>\n"},{"tags":["java","automation"],"comments":[{"owner":{"account_id":2617274,"reputation":6112,"user_id":2266098,"accept_rate":72,"display_name":"NeplatnyUdaj"},"score":1,"creation_date":1550067174,"post_id":54672149,"comment_id":96134165,"body_markdown":"This sounds like a mess, but you can create some kind of supermain which would execute the main methods of other classes in desired order.","body":"This sounds like a mess, but you can create some kind of supermain which would execute the main methods of other classes in desired order."},{"owner":{"account_id":2028868,"reputation":5918,"user_id":1813169,"accept_rate":70,"display_name":"MTCoster"},"score":0,"creation_date":1550067199,"post_id":54672149,"comment_id":96134178,"body_markdown":"Traditionally the answer here would have been [Ant](https://ant.apache.org/) or [Maven](https://maven.apache.org/), but these days [Gradle](https://gradle.org/) is becoming the preferred build tool for Java projects. All of these tools have integrations with IntelliJ.","body":"Traditionally the answer here would have been <a href=\"https://ant.apache.org/\" rel=\"nofollow noreferrer\">Ant</a> or <a href=\"https://maven.apache.org/\" rel=\"nofollow noreferrer\">Maven</a>, but these days <a href=\"https://gradle.org/\" rel=\"nofollow noreferrer\">Gradle</a> is becoming the preferred build tool for Java projects. All of these tools have integrations with IntelliJ."}],"answers":[{"tags":[],"owner":{"account_id":2617274,"reputation":6112,"user_id":2266098,"accept_rate":72,"display_name":"NeplatnyUdaj"},"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1550067567,"creation_date":1550067567,"answer_id":54672380,"question_id":54672149,"body_markdown":"There&#39;s no need to create some ant/maven build configuration. `main` is a static method just like any other. So you can simply create a class which would call the main methods of other classes\r\n\r\n    public class YourSuperClass{\r\n        public static void main(String[] args) {\r\n\t\t    YourClass1.main(null); //You can provide String[] args instead of null\r\n   \t\t    YourClass2.main(null);\r\n\t\t    YourClass3.main(null);\r\n\t    }\r\n    }","title":"Automation tool in intelliJ","body":"<p>There's no need to create some ant/maven build configuration. <code>main</code> is a static method just like any other. So you can simply create a class which would call the main methods of other classes</p>\n\n<pre><code>public class YourSuperClass{\n    public static void main(String[] args) {\n        YourClass1.main(null); //You can provide String[] args instead of null\n        YourClass2.main(null);\n        YourClass3.main(null);\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":26066428,"reputation":21,"user_id":19766801,"display_name":"Hans Radam"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1664242471,"creation_date":1664242471,"answer_id":73861501,"question_id":54672149,"body_markdown":"    import org.openqa.selenium.WebDriver;\r\n    import org.openqa.selenium.chrome.ChromeDriver;\r\n    \r\n    public class c2 {\r\n    \r\n        public static void main(String[] args) {\r\n    \r\n            System.setProperty(&quot;webdriver.chrome.driver&quot;,&quot;C:/chromedrive/chromedriver.exe&quot;);\r\n            WebDriver driver=new ChromeDriver();\r\n            driver.get(&quot;https://www.google.com&quot;);\r\n        enter code here","title":"Automation tool in intelliJ","body":"<pre><code>import org.openqa.selenium.WebDriver;\nimport org.openqa.selenium.chrome.ChromeDriver;\n\npublic class c2 {\n\n    public static void main(String[] args) {\n\n        System.setProperty(&quot;webdriver.chrome.driver&quot;,&quot;C:/chromedrive/chromedriver.exe&quot;);\n        WebDriver driver=new ChromeDriver();\n        driver.get(&quot;https://www.google.com&quot;);\n    enter code here\n</code></pre>\n"}],"owner":{"account_id":14787066,"reputation":69,"user_id":10678977,"display_name":"susliks2"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":79,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":54672380,"answer_count":2,"score":1,"last_activity_date":1664242471,"creation_date":1550066953,"question_id":54672149,"body_markdown":"I look for a good manner to automate my project. I have a project with many steps. In every steps output files are generated and compared with other files. Until know I wrote for each step a mainfunction that I have to let run in a certain order, because first I just needed the intermediate result. I know my project structure is not well planned. Is there a smart way to write a function, that run all the main-functions of the project in the correct order? Something like a `Makefile` in intelliJ? \r\n\r\nMy code works correctly but it is very bad structured and for a strange person not handy. I want to make it more handy without changing my code to much. \r\n\r\n","title":"Automation tool in intelliJ","body":"<p>I look for a good manner to automate my project. I have a project with many steps. In every steps output files are generated and compared with other files. Until know I wrote for each step a mainfunction that I have to let run in a certain order, because first I just needed the intermediate result. I know my project structure is not well planned. Is there a smart way to write a function, that run all the main-functions of the project in the correct order? Something like a <code>Makefile</code> in intelliJ? </p>\n\n<p>My code works correctly but it is very bad structured and for a strange person not handy. I want to make it more handy without changing my code to much. </p>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":11683,"reputation":1438179,"user_id":22656,"accept_rate":86,"display_name":"Jon Skeet"},"score":4,"creation_date":1663691602,"post_id":73789892,"comment_id":130297665,"body_markdown":"Any reason not to use just &quot;normal&quot; class names for your example? I&#39;d recommend editing to give a more professional (or at least adult) vibe.","body":"Any reason not to use just &quot;normal&quot; class names for your example? I&#39;d recommend editing to give a more professional (or at least adult) vibe."},{"owner":{"account_id":14679090,"reputation":1359,"user_id":10601203,"display_name":"Jesse"},"score":1,"creation_date":1663691927,"post_id":73789892,"comment_id":130297780,"body_markdown":"I don&#39;t see this as a problem, but I also don&#39;t think it&#39;s necessary. If it improves readability then go for it. If not, I don&#39;t really see a reason to do it because the only real difference is it&#39;s a few characters shorter.","body":"I don&#39;t see this as a problem, but I also don&#39;t think it&#39;s necessary. If it improves readability then go for it. If not, I don&#39;t really see a reason to do it because the only real difference is it&#39;s a few characters shorter."},{"owner":{"account_id":6606677,"reputation":1024,"user_id":5103317,"display_name":"Old Dog Programmer"},"score":4,"creation_date":1663692034,"post_id":73789892,"comment_id":130297832,"body_markdown":"It&#39;s more normal to make a copy using a method called `clone()`.  [`clone()` at java T point](https://www.javatpoint.com/object-cloning)","body":"It&#39;s more normal to make a copy using a method called <code>clone()</code>.  <a href=\"https://www.javatpoint.com/object-cloning\" rel=\"nofollow noreferrer\"><code>clone()</code> at java T point</a>"},{"owner":{"account_id":341129,"reputation":39091,"user_id":671543,"accept_rate":55,"display_name":"njzk2"},"score":2,"creation_date":1663692058,"post_id":73789892,"comment_id":130297841,"body_markdown":"can you please use slightly less vulgar and childish naming?","body":"can you please use slightly less vulgar and childish naming?"},{"owner":{"account_id":8057436,"reputation":367,"user_id":6496965,"accept_rate":100,"display_name":"Kevin"},"score":0,"creation_date":1663693322,"post_id":73789892,"comment_id":130298243,"body_markdown":"@OldDogProgrammer thanks but in cases where I want to use a copy constructor instead of using `clone()` I guess I&#39;m just looking for a way to make that approach less verbose","body":"@OldDogProgrammer thanks but in cases where I want to use a copy constructor instead of using <code>clone()</code> I guess I&#39;m just looking for a way to make that approach less verbose"},{"owner":{"account_id":11683,"reputation":1438179,"user_id":22656,"accept_rate":86,"display_name":"Jon Skeet"},"score":1,"creation_date":1663694191,"post_id":73789892,"comment_id":130298515,"body_markdown":"Yes, I do think you should change it. This is &quot;humour&quot; along the lines of &quot;you smell&quot;. It adds nothing to the post, and is purely offputting.","body":"Yes, I do think you should change it. This is &quot;humour&quot; along the lines of &quot;you smell&quot;. It adds nothing to the post, and is purely offputting."},{"owner":{"account_id":8057436,"reputation":367,"user_id":6496965,"accept_rate":100,"display_name":"Kevin"},"score":0,"creation_date":1664242268,"post_id":73789892,"comment_id":130421279,"body_markdown":"@JonSkeet almost forgot about this. Changed it. Thanks","body":"@JonSkeet almost forgot about this. Changed it. Thanks"}],"owner":{"account_id":8057436,"reputation":367,"user_id":6496965,"accept_rate":100,"display_name":"Kevin"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":56,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":0,"score":0,"last_activity_date":1664242189,"creation_date":1663691400,"question_id":73789892,"body_markdown":"As you can see by my code example I&#39;m trying to follow conventions as much as possible. Just wondering if it&#39;s common or at least acceptable to create a `copy()` instance method for a class when it has a copy constructor to avoid having to directly call the copy constructor with `new UglyStinkyClassName(instanceName)`, or would doing the following be considered a code smell?\r\n\r\n```\r\npublic class Foo {\r\n\r\n    private String bar = &quot;whatever&quot;;\r\n\r\n    /** Copy constructor */\r\n    public Foo(Foo that) {\r\n        bar = that.bar;\r\n    }\r\n\r\n    /* Instance methods */\r\n    public Foo copy() {\r\n        return new Foo(this);\r\n    }\r\n```\r\n\r\nSo instead of:\r\n```\r\nFoo a = new Foo();\r\nFoo b = new Foo(a);\r\n```\r\n\r\nI can just go:\r\n```\r\nFoo b = a.copy();","title":"copy() instance method for copy constructor","body":"<p>As you can see by my code example I'm trying to follow conventions as much as possible. Just wondering if it's common or at least acceptable to create a <code>copy()</code> instance method for a class when it has a copy constructor to avoid having to directly call the copy constructor with <code>new UglyStinkyClassName(instanceName)</code>, or would doing the following be considered a code smell?</p>\n<pre><code>public class Foo {\n\n    private String bar = &quot;whatever&quot;;\n\n    /** Copy constructor */\n    public Foo(Foo that) {\n        bar = that.bar;\n    }\n\n    /* Instance methods */\n    public Foo copy() {\n        return new Foo(this);\n    }\n</code></pre>\n<p>So instead of:</p>\n<pre><code>Foo a = new Foo();\nFoo b = new Foo(a);\n</code></pre>\n<p>I can just go:</p>\n<pre><code>Foo b = a.copy();\n</code></pre>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":1547313,"reputation":82154,"user_id":1440565,"accept_rate":59,"display_name":"Code-Apprentice"},"score":0,"creation_date":1664241907,"post_id":73858339,"comment_id":130421204,"body_markdown":"This isn&#39;t a code writing service. You should try something yourself before asking a question.","body":"This isn&#39;t a code writing service. You should try something yourself before asking a question."},{"owner":{"account_id":322981,"reputation":310745,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"score":1,"creation_date":1664249113,"post_id":73858339,"comment_id":130422230,"body_markdown":"The Java ecosystem offers several good [CSV](https://en.wikipedia.org/wiki/Comma-separated_values)/[TSV](https://en.wikipedia.org/wiki/Tab-separated_values) file writing/reading libraries. I suggest you take a look at each, to get a sense of how they work. Then [search Stack Overflow](https://duckduckgo.com/?q=site%3Astackoverflow.com+java+CSV+TSV+tab-delimited&amp;t=osx&amp;ia=web) for Questions on those libraries, to learn a bit more. If, after that research, you have specific technical questions, *then* post here.","body":"The Java ecosystem offers several good <a href=\"https://en.wikipedia.org/wiki/Comma-separated_values\" rel=\"nofollow noreferrer\">CSV</a>/<a href=\"https://en.wikipedia.org/wiki/Tab-separated_values\" rel=\"nofollow noreferrer\">TSV</a> file writing/reading libraries. I suggest you take a look at each, to get a sense of how they work. Then <a href=\"https://duckduckgo.com/?q=site%3Astackoverflow.com+java+CSV+TSV+tab-delimited&amp;t=osx&amp;ia=web\" rel=\"nofollow noreferrer\">search Stack Overflow</a> for Questions on those libraries, to learn a bit more. If, after that research, you have specific technical questions, <i>then</i> post here."},{"owner":{"account_id":1107485,"reputation":1005,"user_id":1098606,"accept_rate":64,"display_name":"Karn_way"},"score":0,"creation_date":1664251710,"post_id":73858339,"comment_id":130422654,"body_markdown":"thanks for review @Code-Apprentice.  I should have added more tried approach also. like I added above there is JAXB which takes are XML  to Java object and vice versa.","body":"thanks for review @Code-Apprentice.  I should have added more tried approach also. like I added above there is JAXB which takes are XML  to Java object and vice versa."}],"answers":[{"tags":[],"owner":{"account_id":17247093,"reputation":1133,"user_id":12488082,"display_name":"AlexElin"},"down_vote_count":1,"up_vote_count":1,"is_accepted":true,"score":0,"last_activity_date":1664217107,"creation_date":1664217107,"answer_id":73858467,"question_id":73858339,"body_markdown":"You can use [`CSVPrinter`][1] from [Apache Commons CSV][2] library with [`CSVFormat`][3] equal to `TDF`.\r\n\r\n``` java\r\ntry (CSVPrinter printer = new CSVPrinter(new FileWriter(&quot;csv.txt&quot;), CSVFormat.TDF)) {\r\n     printer.printRecord(&quot;id&quot;, &quot;userName&quot;, &quot;firstName&quot;, &quot;lastName&quot;, &quot;birthday&quot;);\r\n     printer.printRecord(1, &quot;john73&quot;, &quot;John&quot;, &quot;Doe&quot;, LocalDate.of(1973, 9, 15));\r\n     printer.println();\r\n     printer.printRecord(2, &quot;mary&quot;, &quot;Mary&quot;, &quot;Meyer&quot;, LocalDate.of(1985, 3, 29));\r\n } catch (IOException ex) {\r\n     ex.printStackTrace();\r\n }\r\n```\r\n\r\n\r\n  [1]: https://commons.apache.org/proper/commons-csv/apidocs/org/apache/commons/csv/CSVPrinter.html\r\n  [2]: https://commons.apache.org/proper/commons-csv/index.html\r\n  [3]: https://commons.apache.org/proper/commons-csv/apidocs/org/apache/commons/csv/CSVFormat.html","title":"Convert Java Object to TSV in java","body":"<p>You can use <a href=\"https://commons.apache.org/proper/commons-csv/apidocs/org/apache/commons/csv/CSVPrinter.html\" rel=\"nofollow noreferrer\"><code>CSVPrinter</code></a> from <a href=\"https://commons.apache.org/proper/commons-csv/index.html\" rel=\"nofollow noreferrer\">Apache Commons CSV</a> library with <a href=\"https://commons.apache.org/proper/commons-csv/apidocs/org/apache/commons/csv/CSVFormat.html\" rel=\"nofollow noreferrer\"><code>CSVFormat</code></a> equal to <code>TDF</code>.</p>\n<pre class=\"lang-java prettyprint-override\"><code>try (CSVPrinter printer = new CSVPrinter(new FileWriter(&quot;csv.txt&quot;), CSVFormat.TDF)) {\n     printer.printRecord(&quot;id&quot;, &quot;userName&quot;, &quot;firstName&quot;, &quot;lastName&quot;, &quot;birthday&quot;);\n     printer.printRecord(1, &quot;john73&quot;, &quot;John&quot;, &quot;Doe&quot;, LocalDate.of(1973, 9, 15));\n     printer.println();\n     printer.printRecord(2, &quot;mary&quot;, &quot;Mary&quot;, &quot;Meyer&quot;, LocalDate.of(1985, 3, 29));\n } catch (IOException ex) {\n     ex.printStackTrace();\n }\n</code></pre>\n"}],"owner":{"account_id":1107485,"reputation":1005,"user_id":1098606,"accept_rate":64,"display_name":"Karn_way"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":309,"favorite_count":0,"down_vote_count":2,"up_vote_count":0,"closed_date":1664248985,"accepted_answer_id":73858467,"answer_count":1,"score":-2,"last_activity_date":1664241865,"creation_date":1664216404,"question_id":73858339,"body_markdown":"I generate a report where I read data from postgresql and then populate a Java object\r\nBelow is kind of sample skeleton where I want to show there are many collection object within Main object i.e ReportMessageStructure\r\n```\r\npublic class ReportMessageStructure {\r\n    \r\n       \r\n    protected MessageHeader messageHeader;\r\n    \r\n    protected MessageDuration messageDuration;\r\n    \r\n    protected ObjectA sampleListA;\r\n    \r\n    protected ObjectB sampleListB;\r\n    \r\n    protected ObjectC smapleListC;\r\n\r\n   }\r\n```\r\nNow My requirement is to write data into TSV file . Could you please suggest me best way to do this. I know I can use JAXB if I had to convert into XML. However need way to convert into TSV. Any tips/suggestion would be great help. \r\n\r\nMax size the data will produce would be around 700MB from object to TSV","title":"Convert Java Object to TSV in java","body":"<p>I generate a report where I read data from postgresql and then populate a Java object\nBelow is kind of sample skeleton where I want to show there are many collection object within Main object i.e ReportMessageStructure</p>\n<pre><code>public class ReportMessageStructure {\n    \n       \n    protected MessageHeader messageHeader;\n    \n    protected MessageDuration messageDuration;\n    \n    protected ObjectA sampleListA;\n    \n    protected ObjectB sampleListB;\n    \n    protected ObjectC smapleListC;\n\n   }\n</code></pre>\n<p>Now My requirement is to write data into TSV file . Could you please suggest me best way to do this. I know I can use JAXB if I had to convert into XML. However need way to convert into TSV. Any tips/suggestion would be great help.</p>\n<p>Max size the data will produce would be around 700MB from object to TSV</p>\n"},{"tags":["java","android","android-mvvm"],"answers":[{"tags":[],"owner":{"account_id":15870958,"reputation":1467,"user_id":11451626,"display_name":"Eyosiyas"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1617792777,"creation_date":1617790419,"answer_id":66983958,"question_id":66983719,"body_markdown":"Try reordering like this.\r\n\r\n**Remove** \r\n```\r\nmAdapter = new UserAdapter(getContext(), viewModel.getEmployee().getValue());\r\n```\r\nfrom **initRecycleView**\r\n\r\n```\r\nmAdapter = new UserAdapter(getContext(), viewModel.getEmployee().getValue());\r\n\r\nviewModel.getEmployee().observe(getViewLifecycleOwner(), new Observer&lt;List&lt;employeeModel&gt;&gt;() {\r\n        @Override\r\n        public void onChanged(List&lt;employeeModel&gt; employeeModels) {\r\n            mAdapter.notifyDataSetChanged();\r\n        }\r\n    });\r\ninitRecycleView();\r\n```","title":"My recycler view not shown for the first time in fragment","body":"<p>Try reordering like this.</p>\n<p><strong>Remove</strong></p>\n<pre><code>mAdapter = new UserAdapter(getContext(), viewModel.getEmployee().getValue());\n</code></pre>\n<p>from <strong>initRecycleView</strong></p>\n<pre><code>mAdapter = new UserAdapter(getContext(), viewModel.getEmployee().getValue());\n\nviewModel.getEmployee().observe(getViewLifecycleOwner(), new Observer&lt;List&lt;employeeModel&gt;&gt;() {\n        @Override\n        public void onChanged(List&lt;employeeModel&gt; employeeModels) {\n            mAdapter.notifyDataSetChanged();\n        }\n    });\ninitRecycleView();\n</code></pre>\n"},{"tags":[],"owner":{"account_id":11571030,"reputation":1499,"user_id":8477804,"display_name":"NRUSINGHA MOHARANA"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1617793562,"creation_date":1617793061,"answer_id":66984673,"question_id":66983719,"body_markdown":"    mAdapter.notifyDataSetChanged(); \r\n\r\nAbove method will work if the list declared inside adapter has any change. So, calling above method without changing adapter&#39;s list is useless.\r\n\r\nAdd a method to UserAdapter class to update list data. Like: \r\n\r\n     public void updateData(List&lt;employeeModel&gt; updatedList){\r\n        employeeModelList.clear();\r\n        employeeModelList.addAll(updatedList);\r\n        notifyDataSetChanged();\r\n    }\r\nAnd call this method inside observer. Like: \r\n\r\n    viewModel.getEmployee().observe(getViewLifecycleOwner(), new \r\n    Observer&lt;List&lt;employeeModel&gt;&gt;() {\r\n        @Override\r\n        public void onChanged(List&lt;employeeModel&gt; employeeModels) {\r\n            mAdapter.updateData(employeeModels);\r\n        }\r\n    });","title":"My recycler view not shown for the first time in fragment","body":"<pre><code>mAdapter.notifyDataSetChanged(); \n</code></pre>\n<p>Above method will work if the list declared inside adapter has any change. So, calling above method without changing adapter's list is useless.</p>\n<p>Add a method to UserAdapter class to update list data. Like:</p>\n<pre><code> public void updateData(List&lt;employeeModel&gt; updatedList){\n    employeeModelList.clear();\n    employeeModelList.addAll(updatedList);\n    notifyDataSetChanged();\n}\n</code></pre>\n<p>And call this method inside observer. Like:</p>\n<pre><code>viewModel.getEmployee().observe(getViewLifecycleOwner(), new \nObserver&lt;List&lt;employeeModel&gt;&gt;() {\n    @Override\n    public void onChanged(List&lt;employeeModel&gt; employeeModels) {\n        mAdapter.updateData(employeeModels);\n    }\n});\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3204864,"reputation":36,"user_id":2706079,"display_name":"BlueAroma"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1664241443,"creation_date":1664241443,"answer_id":73861417,"question_id":66983719,"body_markdown":"where are you get your network data?\r\n\r\nIf your get in here -&gt; viewModel.init();\r\nI think it just timing problem.\r\n\r\nJust change code sequence\r\n\r\n    \r\n    initRecycleView();\r\n    viewModel.getEmployee().observe(getViewLifecycleOwner(), new Observer&lt;List&lt;employeeModel&gt;&gt;() {\r\n        @Override\r\n        public void onChanged(List&lt;employeeModel&gt; employeeModels) {\r\n            mAdapter.notifyDataSetChanged();\r\n        }\r\n    });\r\n    viewModel.init();\r\n\r\n\r\n","title":"My recycler view not shown for the first time in fragment","body":"<p>where are you get your network data?</p>\n<p>If your get in here -&gt; viewModel.init();\nI think it just timing problem.</p>\n<p>Just change code sequence</p>\n<pre><code>initRecycleView();\nviewModel.getEmployee().observe(getViewLifecycleOwner(), new Observer&lt;List&lt;employeeModel&gt;&gt;() {\n    @Override\n    public void onChanged(List&lt;employeeModel&gt; employeeModels) {\n        mAdapter.notifyDataSetChanged();\n    }\n});\nviewModel.init();\n</code></pre>\n"}],"owner":{"account_id":20289431,"reputation":71,"user_id":14881397,"display_name":"Madushan Weerathunga"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":882,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":3,"score":0,"last_activity_date":1664241443,"creation_date":1617789432,"question_id":66983719,"body_markdown":"**I am a beginner at android development. I tried to display data on Recycle View using MVVM. When I opened the fragment the first time it is empty, the second time it showed data. Adapter not called the first time. How to fix this.**\r\n\r\n**Fragment class**\r\n\r\n```\r\npublic class fragmentEmployee extends Fragment {\r\n\r\nprivate FragmentEmployeeBinding binding;\r\nprivate ViewGroup viewGroup;\r\nprivate View view;\r\nprivate RecyclerView mRecycleView;\r\nprivate UserAdapter mAdapter;\r\nprivate EmployeeRegisterViewModel viewModel;\r\n@Override\r\npublic void onCreate(@Nullable Bundle savedInstanceState) {\r\n    super.onCreate(savedInstanceState);\r\n}\r\n\r\n@Nullable\r\n@Override\r\npublic View onCreateView(@NonNull LayoutInflater inflater, @Nullable ViewGroup container, @Nullable Bundle savedInstanceState) {\r\n    binding = DataBindingUtil.inflate(inflater, R.layout.fragment_employee, viewGroup, false);\r\n    view = binding.getRoot();\r\n    return view;\r\n}\r\n\r\n@Override\r\npublic void onViewCreated(@NonNull View view, @Nullable Bundle savedInstanceState) {\r\n    super.onViewCreated(view, savedInstanceState);\r\n    Toast.makeText(getContext(), &quot;onViewCreated&quot;, Toast.LENGTH_SHORT).show();\r\n    mRecycleView = binding.recyleViewEmployee;\r\n    viewModel = new ViewModelProvider(this).get(EmployeeRegisterViewModel.class);\r\n    viewModel.init();\r\n    initRecycleView();\r\n    viewModel.getEmployee().observe(getViewLifecycleOwner(), new Observer&lt;List&lt;employeeModel&gt;&gt;() {\r\n        @Override\r\n        public void onChanged(List&lt;employeeModel&gt; employeeModels) {\r\n            mAdapter.notifyDataSetChanged();\r\n        }\r\n    });\r\n}\r\n\r\nprivate void initRecycleView() {\r\n    mAdapter = new UserAdapter(getContext(), viewModel.getEmployee().getValue());\r\n    RecyclerView.LayoutManager layoutManager = new LinearLayoutManager(getContext());\r\n    mRecycleView.setLayoutManager(layoutManager);\r\n    mRecycleView.setAdapter(mAdapter);\r\n}\r\n}\r\n```\r\n\r\n**UserAdapter** class  \r\n\r\n```\r\npublic class UserAdapter extends RecyclerView.Adapter&lt;RecyclerView.ViewHolder&gt;{\r\n\r\npublic List&lt;employeeModel&gt; employeeModelList= new ArrayList&lt;&gt;();\r\npublic Context context1;\r\n\r\npublic UserAdapter(Context context,List&lt;employeeModel&gt; employeeModels){\r\n    employeeModelList = employeeModels;\r\n    context1 = context;\r\n}\r\n\r\n@NonNull\r\n@Override\r\npublic RecyclerView.ViewHolder onCreateViewHolder(@NonNull ViewGroup parent, int viewType) {\r\n    View view = LayoutInflater.from(parent.getContext()).inflate(R.layout.layout_listitem,parent,false);\r\n    ViewHolder viewHolder=new ViewHolder(view);\r\n    return viewHolder;\r\n}\r\n\r\n@Override\r\npublic void onBindViewHolder(@NonNull RecyclerView.ViewHolder holder, int position) {\r\n   (ViewHolder)holder).username.setText(employeeModelList.get(position).getName());\r\n}\r\n\r\n@Override\r\npublic int getItemCount() {\r\n    return employeeModelList.size();\r\n}\r\n\r\npublic class ViewHolder extends RecyclerView.ViewHolder{\r\nTextView username;\r\n\r\npublic ViewHolder(@NonNull View itemView) {\r\n    super(itemView);\r\n    username=itemView.findViewById(R.id.userText);\r\n}\r\n}\r\n}\r\n```\r\n","title":"My recycler view not shown for the first time in fragment","body":"<p><strong>I am a beginner at android development. I tried to display data on Recycle View using MVVM. When I opened the fragment the first time it is empty, the second time it showed data. Adapter not called the first time. How to fix this.</strong></p>\n<p><strong>Fragment class</strong></p>\n<pre><code>public class fragmentEmployee extends Fragment {\n\nprivate FragmentEmployeeBinding binding;\nprivate ViewGroup viewGroup;\nprivate View view;\nprivate RecyclerView mRecycleView;\nprivate UserAdapter mAdapter;\nprivate EmployeeRegisterViewModel viewModel;\n@Override\npublic void onCreate(@Nullable Bundle savedInstanceState) {\n    super.onCreate(savedInstanceState);\n}\n\n@Nullable\n@Override\npublic View onCreateView(@NonNull LayoutInflater inflater, @Nullable ViewGroup container, @Nullable Bundle savedInstanceState) {\n    binding = DataBindingUtil.inflate(inflater, R.layout.fragment_employee, viewGroup, false);\n    view = binding.getRoot();\n    return view;\n}\n\n@Override\npublic void onViewCreated(@NonNull View view, @Nullable Bundle savedInstanceState) {\n    super.onViewCreated(view, savedInstanceState);\n    Toast.makeText(getContext(), &quot;onViewCreated&quot;, Toast.LENGTH_SHORT).show();\n    mRecycleView = binding.recyleViewEmployee;\n    viewModel = new ViewModelProvider(this).get(EmployeeRegisterViewModel.class);\n    viewModel.init();\n    initRecycleView();\n    viewModel.getEmployee().observe(getViewLifecycleOwner(), new Observer&lt;List&lt;employeeModel&gt;&gt;() {\n        @Override\n        public void onChanged(List&lt;employeeModel&gt; employeeModels) {\n            mAdapter.notifyDataSetChanged();\n        }\n    });\n}\n\nprivate void initRecycleView() {\n    mAdapter = new UserAdapter(getContext(), viewModel.getEmployee().getValue());\n    RecyclerView.LayoutManager layoutManager = new LinearLayoutManager(getContext());\n    mRecycleView.setLayoutManager(layoutManager);\n    mRecycleView.setAdapter(mAdapter);\n}\n}\n</code></pre>\n<p><strong>UserAdapter</strong> class</p>\n<pre><code>public class UserAdapter extends RecyclerView.Adapter&lt;RecyclerView.ViewHolder&gt;{\n\npublic List&lt;employeeModel&gt; employeeModelList= new ArrayList&lt;&gt;();\npublic Context context1;\n\npublic UserAdapter(Context context,List&lt;employeeModel&gt; employeeModels){\n    employeeModelList = employeeModels;\n    context1 = context;\n}\n\n@NonNull\n@Override\npublic RecyclerView.ViewHolder onCreateViewHolder(@NonNull ViewGroup parent, int viewType) {\n    View view = LayoutInflater.from(parent.getContext()).inflate(R.layout.layout_listitem,parent,false);\n    ViewHolder viewHolder=new ViewHolder(view);\n    return viewHolder;\n}\n\n@Override\npublic void onBindViewHolder(@NonNull RecyclerView.ViewHolder holder, int position) {\n   (ViewHolder)holder).username.setText(employeeModelList.get(position).getName());\n}\n\n@Override\npublic int getItemCount() {\n    return employeeModelList.size();\n}\n\npublic class ViewHolder extends RecyclerView.ViewHolder{\nTextView username;\n\npublic ViewHolder(@NonNull View itemView) {\n    super(itemView);\n    username=itemView.findViewById(R.id.userText);\n}\n}\n}\n</code></pre>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":13047412,"reputation":2792,"user_id":9428851,"display_name":"Victor Gubin"},"score":1,"creation_date":1662111561,"post_id":73563782,"comment_id":129935372,"body_markdown":"GC working only when JVM need more memory.  Decree low memory from `-Xms512m` to `-Xms16m` and check it once more.","body":"GC working only when JVM need more memory.  Decree low memory from <code>-Xms512m</code> to <code>-Xms16m</code> and check it once more."},{"owner":{"account_id":25013345,"reputation":21,"user_id":18872652,"display_name":"Chiang"},"score":0,"creation_date":1662340318,"post_id":73563782,"comment_id":129976344,"body_markdown":"I have tried -Xms16m, it doesn&#39;t work. And I tried -Xms512m -Xmn100m -Xmx512m and changed char array size to 400m, CMS run and reclaim nothing as before.","body":"I have tried -Xms16m, it doesn&#39;t work. And I tried -Xms512m -Xmn100m -Xmx512m and changed char array size to 400m, CMS run and reclaim nothing as before."}],"owner":{"account_id":25013345,"reputation":21,"user_id":18872652,"display_name":"Chiang"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":81,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":0,"score":2,"last_activity_date":1664241030,"creation_date":1662000142,"question_id":73563782,"body_markdown":"I created an char array of 500m with jdk 1.8.0_301. According to the configurations of JVM, -XX:CMSInitiatingOccupancyFraction=30(just to trigger CMS gc), CMS should reclaim the char array when the method finished,but actually not.\r\n\r\nthe code is below:\r\n```\r\npublic void add500m() throws Exception {\r\n    StringBuilder sb = new StringBuilder(262144000);\r\n    for (int i = 0; i &lt; 262144000; i++) {\r\n        sb.append(&quot;a&quot;);\r\n    }\r\n    System.out.println(&quot;finish&quot;);\r\n}\r\n```\r\n\r\nJVM arguments is below:\r\n```\r\n-XX:+UseConcMarkSweepGC\r\n-XX:CMSFullGCsBeforeCompaction=5\r\n-XX:+UseCMSCompactAtFullCollection\r\n-XX:+PrintGC\r\n-XX:+PrintGCDetails\r\n-XX:+PrintGCTimeStamps\r\n-XX:+PrintGCDateStamps\r\n-XX:CMSInitiatingOccupancyFraction=30\r\n-XX:+UseCMSInitiatingOccupancyOnly\r\n-Xloggc:jvm_local.log\r\n-XX:+HeapDumpOnOutOfMemoryError\r\n-XX:HeapDumpPath=heapdump.hprof\r\n-Xms512m\r\n-Xmn100m\r\n-Xmx2048m\r\n```\r\n\r\ntwo gc log:\r\n```\r\n2022-09-01T10:38:08.297+0800: 1691.109: [GC (CMS Initial Mark) [1 CMS-initial-mark: 512000K(933892K)] 559461K(1026052K), 0.0051052 secs] [Times: user=0.03 sys=0.00, real=0.01 secs] \r\n2022-09-01T10:38:08.302+0800: 1691.114: [CMS-concurrent-mark-start]\r\n2022-09-01T10:38:08.303+0800: 1691.115: [CMS-concurrent-mark: 0.000/0.000 secs] [Times: user=0.00 sys=0.00, real=0.00 secs] \r\n2022-09-01T10:38:08.303+0800: 1691.115: [CMS-concurrent-preclean-start]\r\n2022-09-01T10:38:08.304+0800: 1691.116: [CMS-concurrent-preclean: 0.001/0.001 secs] [Times: user=0.00 sys=0.00, real=0.00 secs] \r\n2022-09-01T10:38:08.304+0800: 1691.116: [CMS-concurrent-abortable-preclean-start]\r\n CMS: abort preclean due to time 2022-09-01T10:38:13.364+0800: 1696.177: [CMS-concurrent-abortable-preclean: 0.574/5.061 secs] [Times: user=0.45 sys=0.00, real=5.06 secs] \r\n2022-09-01T10:38:13.365+0800: 1696.177: [GC (CMS Final Remark) [YG occupancy: 47461 K (92160 K)]2022-09-01T10:38:13.365+0800: 1696.177: [Rescan (parallel) , 0.0059510 secs]2022-09-01T10:38:13.371+0800: 1696.183: [weak refs processing, 0.0000202 secs]2022-09-01T10:38:13.371+0800: 1696.183: [class unloading, 0.0014238 secs]2022-09-01T10:38:13.372+0800: 1696.184: [scrub symbol table, 0.0008487 secs]2022-09-01T10:38:13.373+0800: 1696.185: [scrub string table, 0.0001447 secs][1 CMS-remark: 512000K(933892K)] 559461K(1026052K), 0.0088900 secs] [Times: user=0.00 sys=0.00, real=0.01 secs] \r\n2022-09-01T10:38:13.374+0800: 1696.186: [CMS-concurrent-sweep-start]\r\n2022-09-01T10:38:13.374+0800: 1696.186: [CMS-concurrent-sweep: 0.000/0.000 secs] [Times: user=0.00 sys=0.00, real=0.00 secs] \r\n2022-09-01T10:38:13.374+0800: 1696.186: [CMS-concurrent-reset-start]\r\n2022-09-01T10:38:13.379+0800: 1696.191: [CMS-concurrent-reset: 0.005/0.005 secs] [Times: user=0.00 sys=0.00, real=0.00 secs] \r\n2022-09-01T10:38:15.393+0800: 1698.206: [GC (CMS Initial Mark) [1 CMS-initial-mark: 512000K(933892K)] 559461K(1026052K), 0.0049420 secs] [Times: user=0.20 sys=0.00, real=0.01 secs] \r\n2022-09-01T10:38:15.398+0800: 1698.211: [CMS-concurrent-mark-start]\r\n2022-09-01T10:38:15.399+0800: 1698.211: [CMS-concurrent-mark: 0.000/0.000 secs] [Times: user=0.00 sys=0.00, real=0.00 secs] \r\n2022-09-01T10:38:15.399+0800: 1698.211: [CMS-concurrent-preclean-start]\r\n2022-09-01T10:38:15.400+0800: 1698.212: [CMS-concurrent-preclean: 0.001/0.001 secs] [Times: user=0.00 sys=0.00, real=0.00 secs] \r\n2022-09-01T10:38:15.400+0800: 1698.212: [CMS-concurrent-abortable-preclean-start]\r\n CMS: abort preclean due to time 2022-09-01T10:38:20.472+0800: 1703.284: [CMS-concurrent-abortable-preclean: 0.576/5.072 secs] [Times: user=0.59 sys=0.00, real=5.07 secs] \r\n2022-09-01T10:38:20.472+0800: 1703.284: [GC (CMS Final Remark) [YG occupancy: 47461 K (92160 K)]2022-09-01T10:38:20.472+0800: 1703.284: [Rescan (parallel) , 0.0069744 secs]2022-09-01T10:38:20.479+0800: 1703.291: [weak refs processing, 0.0000385 secs]2022-09-01T10:38:20.479+0800: 1703.291: [class unloading, 0.0022398 secs]2022-09-01T10:38:20.481+0800: 1703.294: [scrub symbol table, 0.0013527 secs]2022-09-01T10:38:20.483+0800: 1703.295: [scrub string table, 0.0002406 secs][1 CMS-remark: 512000K(933892K)] 559461K(1026052K), 0.0113743 secs] [Times: user=0.20 sys=0.00, real=0.01 secs] \r\n2022-09-01T10:38:20.483+0800: 1703.296: [CMS-concurrent-sweep-start]\r\n2022-09-01T10:38:20.483+0800: 1703.296: [CMS-concurrent-sweep: 0.000/0.000 secs] [Times: user=0.00 sys=0.00, real=0.00 secs] \r\n2022-09-01T10:38:20.483+0800: 1703.296: [CMS-concurrent-reset-start]\r\n2022-09-01T10:38:20.489+0800: 1703.301: [CMS-concurrent-reset: 0.005/0.005 secs] [Times: user=0.00 sys=0.00, real=0.01 secs] \r\n```\r\n\r\nFrom JConsole or gc log, we can see that the char array is in old generation, and the GC times of the CMS are continuously increasing, indicating that the CMS is working, but nothing reclaimed every time.\r\n[![old generation size and CMS gc times in JConsole][2]][2]\r\n\r\nBut when I click Perform GC in JConsole or VisualVM to trigger Full GC(Metaspace gc included), the char array is reclaimed.\r\n\r\n\r\nI suspect the char array is referenced by somewhere else, for example metaspace, then I get the heapdump.hprof using jmap -dump:format=b,file=heapdump.hprof, and find that the char array can&#39;t be reachable from gc root(No gc root showed in VisualVM).\r\n[![the instances of char array in VisualVM][1]][1]\r\n\r\n\r\nIn short, why is CMS working but relaimed nothing?\r\n\r\nAnd, I find another strange question: &quot;jmap -dump:live,format=b,file=heapdump-live.hprof&quot;, the command don&#39;t trigger Full GC sometimes? Why?\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/QI9D8.png\r\n  [2]: https://i.stack.imgur.com/tM5fI.png","title":"Why is Java CMS running but reclaimed nothing?","body":"<p>I created an char array of 500m with jdk 1.8.0_301. According to the configurations of JVM, -XX:CMSInitiatingOccupancyFraction=30(just to trigger CMS gc), CMS should reclaim the char array when the method finished,but actually not.</p>\n<p>the code is below:</p>\n<pre><code>public void add500m() throws Exception {\n    StringBuilder sb = new StringBuilder(262144000);\n    for (int i = 0; i &lt; 262144000; i++) {\n        sb.append(&quot;a&quot;);\n    }\n    System.out.println(&quot;finish&quot;);\n}\n</code></pre>\n<p>JVM arguments is below:</p>\n<pre><code>-XX:+UseConcMarkSweepGC\n-XX:CMSFullGCsBeforeCompaction=5\n-XX:+UseCMSCompactAtFullCollection\n-XX:+PrintGC\n-XX:+PrintGCDetails\n-XX:+PrintGCTimeStamps\n-XX:+PrintGCDateStamps\n-XX:CMSInitiatingOccupancyFraction=30\n-XX:+UseCMSInitiatingOccupancyOnly\n-Xloggc:jvm_local.log\n-XX:+HeapDumpOnOutOfMemoryError\n-XX:HeapDumpPath=heapdump.hprof\n-Xms512m\n-Xmn100m\n-Xmx2048m\n</code></pre>\n<p>two gc log:</p>\n<pre><code>2022-09-01T10:38:08.297+0800: 1691.109: [GC (CMS Initial Mark) [1 CMS-initial-mark: 512000K(933892K)] 559461K(1026052K), 0.0051052 secs] [Times: user=0.03 sys=0.00, real=0.01 secs] \n2022-09-01T10:38:08.302+0800: 1691.114: [CMS-concurrent-mark-start]\n2022-09-01T10:38:08.303+0800: 1691.115: [CMS-concurrent-mark: 0.000/0.000 secs] [Times: user=0.00 sys=0.00, real=0.00 secs] \n2022-09-01T10:38:08.303+0800: 1691.115: [CMS-concurrent-preclean-start]\n2022-09-01T10:38:08.304+0800: 1691.116: [CMS-concurrent-preclean: 0.001/0.001 secs] [Times: user=0.00 sys=0.00, real=0.00 secs] \n2022-09-01T10:38:08.304+0800: 1691.116: [CMS-concurrent-abortable-preclean-start]\n CMS: abort preclean due to time 2022-09-01T10:38:13.364+0800: 1696.177: [CMS-concurrent-abortable-preclean: 0.574/5.061 secs] [Times: user=0.45 sys=0.00, real=5.06 secs] \n2022-09-01T10:38:13.365+0800: 1696.177: [GC (CMS Final Remark) [YG occupancy: 47461 K (92160 K)]2022-09-01T10:38:13.365+0800: 1696.177: [Rescan (parallel) , 0.0059510 secs]2022-09-01T10:38:13.371+0800: 1696.183: [weak refs processing, 0.0000202 secs]2022-09-01T10:38:13.371+0800: 1696.183: [class unloading, 0.0014238 secs]2022-09-01T10:38:13.372+0800: 1696.184: [scrub symbol table, 0.0008487 secs]2022-09-01T10:38:13.373+0800: 1696.185: [scrub string table, 0.0001447 secs][1 CMS-remark: 512000K(933892K)] 559461K(1026052K), 0.0088900 secs] [Times: user=0.00 sys=0.00, real=0.01 secs] \n2022-09-01T10:38:13.374+0800: 1696.186: [CMS-concurrent-sweep-start]\n2022-09-01T10:38:13.374+0800: 1696.186: [CMS-concurrent-sweep: 0.000/0.000 secs] [Times: user=0.00 sys=0.00, real=0.00 secs] \n2022-09-01T10:38:13.374+0800: 1696.186: [CMS-concurrent-reset-start]\n2022-09-01T10:38:13.379+0800: 1696.191: [CMS-concurrent-reset: 0.005/0.005 secs] [Times: user=0.00 sys=0.00, real=0.00 secs] \n2022-09-01T10:38:15.393+0800: 1698.206: [GC (CMS Initial Mark) [1 CMS-initial-mark: 512000K(933892K)] 559461K(1026052K), 0.0049420 secs] [Times: user=0.20 sys=0.00, real=0.01 secs] \n2022-09-01T10:38:15.398+0800: 1698.211: [CMS-concurrent-mark-start]\n2022-09-01T10:38:15.399+0800: 1698.211: [CMS-concurrent-mark: 0.000/0.000 secs] [Times: user=0.00 sys=0.00, real=0.00 secs] \n2022-09-01T10:38:15.399+0800: 1698.211: [CMS-concurrent-preclean-start]\n2022-09-01T10:38:15.400+0800: 1698.212: [CMS-concurrent-preclean: 0.001/0.001 secs] [Times: user=0.00 sys=0.00, real=0.00 secs] \n2022-09-01T10:38:15.400+0800: 1698.212: [CMS-concurrent-abortable-preclean-start]\n CMS: abort preclean due to time 2022-09-01T10:38:20.472+0800: 1703.284: [CMS-concurrent-abortable-preclean: 0.576/5.072 secs] [Times: user=0.59 sys=0.00, real=5.07 secs] \n2022-09-01T10:38:20.472+0800: 1703.284: [GC (CMS Final Remark) [YG occupancy: 47461 K (92160 K)]2022-09-01T10:38:20.472+0800: 1703.284: [Rescan (parallel) , 0.0069744 secs]2022-09-01T10:38:20.479+0800: 1703.291: [weak refs processing, 0.0000385 secs]2022-09-01T10:38:20.479+0800: 1703.291: [class unloading, 0.0022398 secs]2022-09-01T10:38:20.481+0800: 1703.294: [scrub symbol table, 0.0013527 secs]2022-09-01T10:38:20.483+0800: 1703.295: [scrub string table, 0.0002406 secs][1 CMS-remark: 512000K(933892K)] 559461K(1026052K), 0.0113743 secs] [Times: user=0.20 sys=0.00, real=0.01 secs] \n2022-09-01T10:38:20.483+0800: 1703.296: [CMS-concurrent-sweep-start]\n2022-09-01T10:38:20.483+0800: 1703.296: [CMS-concurrent-sweep: 0.000/0.000 secs] [Times: user=0.00 sys=0.00, real=0.00 secs] \n2022-09-01T10:38:20.483+0800: 1703.296: [CMS-concurrent-reset-start]\n2022-09-01T10:38:20.489+0800: 1703.301: [CMS-concurrent-reset: 0.005/0.005 secs] [Times: user=0.00 sys=0.00, real=0.01 secs] \n</code></pre>\n<p>From JConsole or gc log, we can see that the char array is in old generation, and the GC times of the CMS are continuously increasing, indicating that the CMS is working, but nothing reclaimed every time.\n<a href=\"https://i.stack.imgur.com/tM5fI.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/tM5fI.png\" alt=\"old generation size and CMS gc times in JConsole\" /></a></p>\n<p>But when I click Perform GC in JConsole or VisualVM to trigger Full GC(Metaspace gc included), the char array is reclaimed.</p>\n<p>I suspect the char array is referenced by somewhere else, for example metaspace, then I get the heapdump.hprof using jmap -dump:format=b,file=heapdump.hprof, and find that the char array can't be reachable from gc root(No gc root showed in VisualVM).\n<a href=\"https://i.stack.imgur.com/QI9D8.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/QI9D8.png\" alt=\"the instances of char array in VisualVM\" /></a></p>\n<p>In short, why is CMS working but relaimed nothing?</p>\n<p>And, I find another strange question: &quot;jmap -dump:live,format=b,file=heapdump-live.hprof&quot;, the command don't trigger Full GC sometimes? Why?</p>\n"},{"tags":["java","tomcat","logging","log4j2"],"comments":[{"owner":{"account_id":16269349,"reputation":13452,"user_id":11748454,"display_name":"Piotr P. Karwasz"},"score":1,"creation_date":1664087748,"post_id":73811944,"comment_id":130388146,"body_markdown":"&quot;Read-only file system&quot; should be an indication of what is going wrong. Most modern Linux distribution run Tomcat through SystemD with the [`ProtectSystem=strict`](https://www.freedesktop.org/software/systemd/man/systemd.exec.html#ProtectSystem=) option on. Try replacing `/var/lib/tomcat/logs` with `/var/log/tomcat`.","body":"&quot;Read-only file system&quot; should be an indication of what is going wrong. Most modern Linux distribution run Tomcat through SystemD with the <a href=\"https://www.freedesktop.org/software/systemd/man/systemd.exec.html#ProtectSystem=\" rel=\"nofollow noreferrer\"><code>ProtectSystem=strict</code></a> option on. Try replacing <code>&#47;var&#47;lib&#47;tomcat&#47;logs</code> with <code>&#47;var&#47;log&#47;tomcat</code>."},{"owner":{"account_id":16269349,"reputation":13452,"user_id":11748454,"display_name":"Piotr P. Karwasz"},"score":1,"creation_date":1664087912,"post_id":73811944,"comment_id":130388165,"body_markdown":"My guess is that `/var/lib/tomcat/logs` (read-only) is a symlink to `/var/log/tomcat` (read-write).","body":"My guess is that <code>&#47;var&#47;lib&#47;tomcat&#47;logs</code> (read-only) is a symlink to <code>&#47;var&#47;log&#47;tomcat</code> (read-write)."},{"owner":{"account_id":2043223,"reputation":469,"user_id":10965038,"display_name":"inayzi"},"score":0,"creation_date":1664238393,"post_id":73811944,"comment_id":130420750,"body_markdown":"Hi @PiotrP.Karwasz\nThanks... Your suggestion works... Managed to delete those related file.","body":"Hi @PiotrP.Karwasz Thanks... Your suggestion works... Managed to delete those related file."}],"answers":[{"tags":[],"owner":{"account_id":2043223,"reputation":469,"user_id":10965038,"display_name":"inayzi"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1664238467,"creation_date":1664238467,"answer_id":73861188,"question_id":73811944,"body_markdown":"As per mentioned in comment, answer works for changing the part to /var/log/tomcat","title":"File not deleted using log4j2","body":"<p>As per mentioned in comment, answer works for changing the part to /var/log/tomcat</p>\n"}],"owner":{"account_id":2043223,"reputation":469,"user_id":10965038,"display_name":"inayzi"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":286,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1664238467,"creation_date":1663837348,"question_id":73811944,"body_markdown":"I&#39;m using log4j2 version 2.19.0.\r\n\r\nI want to delete the old files in Tomcat folder. But when I run my program, the files was not deleted.\r\n\r\n```\r\nappender.rolling.type = RollingFile\r\nappender.rolling.name = LogToRollingFile\r\n\r\nappender.rolling.fileName = /var/lib/tomcat/logs/logger.log\r\nappender.rolling.filePattern =   /var/lib/tomcat/logs/logger.%d{dd-MM-yyyy}.log.gz\r\n\r\nappender.rolling.layout.type = PatternLayout\r\nappender.rolling.layout.pattern = %d{yyyy-MM-dd HH:mm:ss} %-5p %m%n\r\n\r\nappender.rolling.policies.type = Policies\r\nappender.rolling.policies.time.type = TimeBasedTriggeringPolicy\r\nappender.rolling.policies.time.interval = 1\r\nappender.rolling.policies.time.modulate = true\r\n\r\nappender.rolling.strategy.type = DefaultRolloverStrategy\r\nappender.rolling.strategy.delete.type = Delete\r\nappender.rolling.strategy.delete.basePath = /var/lib/tomcat/logs/\r\nappender.rolling.strategy.delete.maxDepth = 1\r\nappender.rolling.strategy.delete.ifLastModified.type = IfLastModified\r\nappender.rolling.strategy.delete.ifLastModified.age = 2d\r\n\r\n# Log to console and rolling file\r\nlogger.app.name = aHello\r\nlogger.app.level = info, error\r\nlogger.app.additivity = false\r\nlogger.app.appenderRef.rolling.ref = LogToRollingFile\r\n\r\nrootLogger.level = info\r\n```\r\n\r\nI check the /var/log/ folder, and I saw the below error\r\n\r\n```\r\n\r\n2022-09-22 14:53:38,384 Log4j2-TF-1-RollingFileManager-1 ERROR Error in post-rollover Delete when visiting /var/lib/tomcat/logs java.nio.file.FileSystemException: /var/lib/tomcat/logs: Read-only file system\r\n```\r\n\r\nIs there any other method I can use to delete the log file by using lo4j2 library?\r\nCurrently, I already include the *log4j api and core lib* to my code.\r\n\r\nThank you.","title":"File not deleted using log4j2","body":"<p>I'm using log4j2 version 2.19.0.</p>\n<p>I want to delete the old files in Tomcat folder. But when I run my program, the files was not deleted.</p>\n<pre><code>appender.rolling.type = RollingFile\nappender.rolling.name = LogToRollingFile\n\nappender.rolling.fileName = /var/lib/tomcat/logs/logger.log\nappender.rolling.filePattern =   /var/lib/tomcat/logs/logger.%d{dd-MM-yyyy}.log.gz\n\nappender.rolling.layout.type = PatternLayout\nappender.rolling.layout.pattern = %d{yyyy-MM-dd HH:mm:ss} %-5p %m%n\n\nappender.rolling.policies.type = Policies\nappender.rolling.policies.time.type = TimeBasedTriggeringPolicy\nappender.rolling.policies.time.interval = 1\nappender.rolling.policies.time.modulate = true\n\nappender.rolling.strategy.type = DefaultRolloverStrategy\nappender.rolling.strategy.delete.type = Delete\nappender.rolling.strategy.delete.basePath = /var/lib/tomcat/logs/\nappender.rolling.strategy.delete.maxDepth = 1\nappender.rolling.strategy.delete.ifLastModified.type = IfLastModified\nappender.rolling.strategy.delete.ifLastModified.age = 2d\n\n# Log to console and rolling file\nlogger.app.name = aHello\nlogger.app.level = info, error\nlogger.app.additivity = false\nlogger.app.appenderRef.rolling.ref = LogToRollingFile\n\nrootLogger.level = info\n</code></pre>\n<p>I check the /var/log/ folder, and I saw the below error</p>\n<pre><code>\n2022-09-22 14:53:38,384 Log4j2-TF-1-RollingFileManager-1 ERROR Error in post-rollover Delete when visiting /var/lib/tomcat/logs java.nio.file.FileSystemException: /var/lib/tomcat/logs: Read-only file system\n</code></pre>\n<p>Is there any other method I can use to delete the log file by using lo4j2 library?\nCurrently, I already include the <em>log4j api and core lib</em> to my code.</p>\n<p>Thank you.</p>\n"},{"tags":["java","maven","intellij-idea"],"comments":[{"owner":{"account_id":6520,"reputation":10523,"user_id":11002,"accept_rate":75,"display_name":"tgdavies"},"score":1,"creation_date":1664238590,"post_id":73861182,"comment_id":130420775,"body_markdown":"The error message isn&#39;t referring to your pom -- please read it again!","body":"The error message isn&#39;t referring to your pom -- please read it again!"},{"owner":{"account_id":112317,"reputation":93939,"user_id":296328,"accept_rate":60,"display_name":"khmarbaise"},"score":0,"creation_date":1664258063,"post_id":73861182,"comment_id":130423654,"body_markdown":"The download of some pom&#39;s has failed either network/firewall/proxy issue https://blog.soebes.io/posts/2018/10/2018-10-13-maven-artifact-checksums-what/. second the plugin is really based on Maven 3.0? (12 years+) old..? Use a more recent version as base 3.2.5 over 3.8.6.. why using plexus-utils? Use maven-plugin-plugin most recent version as well... Define plugins for building (like compiler-plugin, recources plugin, deploy/install plugin and surefire/failsafe plugin as well...","body":"The download of some pom&#39;s has failed either network/firewall/proxy issue <a href=\"https://blog.soebes.io/posts/2018/10/2018-10-13-maven-artifact-checksums-what/\" rel=\"nofollow noreferrer\">blog.soebes.io/posts/2018/10/&hellip;</a>. second the plugin is really based on Maven 3.0? (12 years+) old..? Use a more recent version as base 3.2.5 over 3.8.6.. why using plexus-utils? Use maven-plugin-plugin most recent version as well... Define plugins for building (like compiler-plugin, recources plugin, deploy/install plugin and surefire/failsafe plugin as well..."}],"owner":{"account_id":26452411,"reputation":1,"user_id":20095442,"display_name":"NulledCode"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":35,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1664238409,"creation_date":1664238409,"question_id":73861182,"body_markdown":"\r\n\r\n[ERROR] Plugin org.apache.maven.plugins:maven-surefire-plugin:2.18 or one of its dependencies could not be resolved: Failed to read artifact descriptor for org.apache.maven.plugins:maven-surefire-plugin:jar:2.18: 1 problem was encountered while building the effective model for org.apache.maven.plugins:maven-surefire-plugin:2.18\r\n[ERROR] [FATAL] Non-parseable POM C:\\Users\\Oscar Ochoa\\.m2\\repository\\org\\apache\\maven\\surefire\\surefire\\2.18\\surefire-2.18.pom: end tag name &lt;/head&gt; must be the same as start tag &lt;meta&gt; from line 5 (position: TEXT seen ...&lt;/style&gt;\\n  &lt;/head&gt;... @31:10)  @ C:\\Users\\Oscar Ochoa\\.m2\\repository\\org\\apache\\maven\\surefire\\surefire\\2.18\\surefire-2.18.pom, line 31, column 10\r\n\r\nPOM FILE\r\n\r\n&lt;!-- begin snippet: js hide: false console: true babel: false --&gt;\r\n\r\n&lt;!-- language: lang-html --&gt;\r\n\r\n    &lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\r\n        &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n        &lt;parent&gt;\r\n            &lt;groupId&gt;org.sonatype.oss&lt;/groupId&gt;\r\n            &lt;artifactId&gt;oss-parent&lt;/artifactId&gt;\r\n            &lt;version&gt;9&lt;/version&gt;\r\n        &lt;/parent&gt;\r\n        &lt;groupId&gt;net.md-5&lt;/groupId&gt;\r\n        &lt;artifactId&gt;specialsource-maven-plugin&lt;/artifactId&gt;\r\n        &lt;version&gt;1.2.4&lt;/version&gt;\r\n        &lt;packaging&gt;maven-plugin&lt;/packaging&gt;\r\n        &lt;name&gt;SpecialSourceMP&lt;/name&gt;\r\n        &lt;scm&gt;\r\n            &lt;connection&gt;scm:git:git@github.com:agaricusb/SpecialSourceMP.git&lt;/connection&gt;\r\n            &lt;developerConnection&gt;scm:git:git@github.com:agaricusb/SpecialSourceMP.git&lt;/developerConnection&gt;\r\n            &lt;url&gt;git@github.com:agaricusb/SpecialSourceMP.git&lt;/url&gt;\r\n        &lt;/scm&gt;\r\n        &lt;issueManagement&gt;\r\n            &lt;system&gt;GitHub&lt;/system&gt;\r\n            &lt;url&gt;https://github.com/agaricusb/SpecialSourceMP/issues&lt;/url&gt;\r\n        &lt;/issueManagement&gt;\r\n        &lt;properties&gt;\r\n            &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\r\n            &lt;mavenPluginVersion&gt;3.5&lt;/mavenPluginVersion&gt;\r\n            &lt;mavenVersion&gt;3.0&lt;/mavenVersion&gt;\r\n        &lt;/properties&gt;\r\n        &lt;dependencies&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;net.md-5&lt;/groupId&gt;\r\n                &lt;artifactId&gt;SpecialSource&lt;/artifactId&gt;\r\n                &lt;version&gt;1.11.0&lt;/version&gt;\r\n                &lt;type&gt;jar&lt;/type&gt;\r\n                &lt;scope&gt;compile&lt;/scope&gt;\r\n            &lt;/dependency&gt;\r\n            &lt;!--  Maven  --&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;org.apache.maven&lt;/groupId&gt;\r\n                &lt;artifactId&gt;maven-plugin-api&lt;/artifactId&gt;\r\n                &lt;version&gt;${mavenVersion}&lt;/version&gt;\r\n            &lt;/dependency&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;org.apache.maven&lt;/groupId&gt;\r\n                &lt;artifactId&gt;maven-model&lt;/artifactId&gt;\r\n                &lt;version&gt;${mavenVersion}&lt;/version&gt;\r\n            &lt;/dependency&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;org.apache.maven&lt;/groupId&gt;\r\n                &lt;artifactId&gt;maven-core&lt;/artifactId&gt;\r\n                &lt;version&gt;${mavenVersion}&lt;/version&gt;\r\n            &lt;/dependency&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;org.apache.maven&lt;/groupId&gt;\r\n                &lt;artifactId&gt;maven-compat&lt;/artifactId&gt;\r\n                &lt;version&gt;${mavenVersion}&lt;/version&gt;\r\n            &lt;/dependency&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;org.apache.maven&lt;/groupId&gt;\r\n                &lt;artifactId&gt;maven-artifact&lt;/artifactId&gt;\r\n                &lt;version&gt;${mavenVersion}&lt;/version&gt;\r\n            &lt;/dependency&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;org.apache.maven.plugin-tools&lt;/groupId&gt;\r\n                &lt;artifactId&gt;maven-plugin-annotations&lt;/artifactId&gt;\r\n                &lt;version&gt;${mavenPluginVersion}&lt;/version&gt;\r\n                &lt;scope&gt;provided&lt;/scope&gt;\r\n            &lt;/dependency&gt;\r\n            &lt;!--  Plexus  --&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;org.codehaus.plexus&lt;/groupId&gt;\r\n                &lt;artifactId&gt;plexus-utils&lt;/artifactId&gt;\r\n                &lt;version&gt;3.0.5&lt;/version&gt;\r\n            &lt;/dependency&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;org.codehaus.plexus&lt;/groupId&gt;\r\n                &lt;artifactId&gt;plexus-digest&lt;/artifactId&gt;\r\n                &lt;version&gt;1.0&lt;/version&gt;\r\n            &lt;/dependency&gt;\r\n        &lt;/dependencies&gt;\r\n        &lt;build&gt;\r\n            &lt;plugins&gt;\r\n                &lt;plugin&gt;\r\n                    &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n                    &lt;artifactId&gt;maven-plugin-plugin&lt;/artifactId&gt;\r\n                    &lt;version&gt;${mavenPluginVersion}&lt;/version&gt;\r\n                    &lt;configuration&gt;\r\n                        &lt;skipErrorNoDescriptorsFound&gt;true&lt;/skipErrorNoDescriptorsFound&gt;\r\n                    &lt;/configuration&gt;\r\n                    &lt;executions&gt;\r\n                        &lt;execution&gt;\r\n                            &lt;id&gt;mojo-descriptor&lt;/id&gt;\r\n                            &lt;goals&gt;\r\n                                &lt;goal&gt;descriptor&lt;/goal&gt;\r\n                            &lt;/goals&gt;\r\n                        &lt;/execution&gt;\r\n                    &lt;/executions&gt;\r\n                &lt;/plugin&gt;\r\n                &lt;plugin&gt;\r\n                    &lt;groupId&gt;io.github.zlika&lt;/groupId&gt;\r\n                    &lt;artifactId&gt;reproducible-build-maven-plugin&lt;/artifactId&gt;\r\n                    &lt;version&gt;0.8&lt;/version&gt;\r\n                    &lt;executions&gt;\r\n                        &lt;execution&gt;\r\n                            &lt;goals&gt;\r\n                                &lt;goal&gt;strip-jar&lt;/goal&gt;\r\n                            &lt;/goals&gt;\r\n                        &lt;/execution&gt;\r\n                    &lt;/executions&gt;\r\n                &lt;/plugin&gt;\r\n            &lt;/plugins&gt;\r\n        &lt;/build&gt;\r\n    &lt;/project&gt;\r\n\r\n&lt;!-- end snippet --&gt;\r\n\r\n","title":"Non Prseable POM","body":"<p>[ERROR] Plugin org.apache.maven.plugins:maven-surefire-plugin:2.18 or one of its dependencies could not be resolved: Failed to read artifact descriptor for org.apache.maven.plugins:maven-surefire-plugin:jar:2.18: 1 problem was encountered while building the effective model for org.apache.maven.plugins:maven-surefire-plugin:2.18\n[ERROR] [FATAL] Non-parseable POM C:\\Users\\Oscar Ochoa.m2\\repository\\org\\apache\\maven\\surefire\\surefire\\2.18\\surefire-2.18.pom: end tag name  must be the same as start tag  from line 5 (position: TEXT seen ...\\n  ... @31:10)  @ C:\\Users\\Oscar Ochoa.m2\\repository\\org\\apache\\maven\\surefire\\surefire\\2.18\\surefire-2.18.pom, line 31, column 10</p>\n<p>POM FILE</p>\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-html lang-html prettyprint-override\"><code>&lt;project xmlns=\"http://maven.apache.org/POM/4.0.0\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xsi:schemaLocation=\"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd\"&gt;\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n    &lt;parent&gt;\n        &lt;groupId&gt;org.sonatype.oss&lt;/groupId&gt;\n        &lt;artifactId&gt;oss-parent&lt;/artifactId&gt;\n        &lt;version&gt;9&lt;/version&gt;\n    &lt;/parent&gt;\n    &lt;groupId&gt;net.md-5&lt;/groupId&gt;\n    &lt;artifactId&gt;specialsource-maven-plugin&lt;/artifactId&gt;\n    &lt;version&gt;1.2.4&lt;/version&gt;\n    &lt;packaging&gt;maven-plugin&lt;/packaging&gt;\n    &lt;name&gt;SpecialSourceMP&lt;/name&gt;\n    &lt;scm&gt;\n        &lt;connection&gt;scm:git:git@github.com:agaricusb/SpecialSourceMP.git&lt;/connection&gt;\n        &lt;developerConnection&gt;scm:git:git@github.com:agaricusb/SpecialSourceMP.git&lt;/developerConnection&gt;\n        &lt;url&gt;git@github.com:agaricusb/SpecialSourceMP.git&lt;/url&gt;\n    &lt;/scm&gt;\n    &lt;issueManagement&gt;\n        &lt;system&gt;GitHub&lt;/system&gt;\n        &lt;url&gt;https://github.com/agaricusb/SpecialSourceMP/issues&lt;/url&gt;\n    &lt;/issueManagement&gt;\n    &lt;properties&gt;\n        &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\n        &lt;mavenPluginVersion&gt;3.5&lt;/mavenPluginVersion&gt;\n        &lt;mavenVersion&gt;3.0&lt;/mavenVersion&gt;\n    &lt;/properties&gt;\n    &lt;dependencies&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;net.md-5&lt;/groupId&gt;\n            &lt;artifactId&gt;SpecialSource&lt;/artifactId&gt;\n            &lt;version&gt;1.11.0&lt;/version&gt;\n            &lt;type&gt;jar&lt;/type&gt;\n            &lt;scope&gt;compile&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;!--  Maven  --&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.apache.maven&lt;/groupId&gt;\n            &lt;artifactId&gt;maven-plugin-api&lt;/artifactId&gt;\n            &lt;version&gt;${mavenVersion}&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.apache.maven&lt;/groupId&gt;\n            &lt;artifactId&gt;maven-model&lt;/artifactId&gt;\n            &lt;version&gt;${mavenVersion}&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.apache.maven&lt;/groupId&gt;\n            &lt;artifactId&gt;maven-core&lt;/artifactId&gt;\n            &lt;version&gt;${mavenVersion}&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.apache.maven&lt;/groupId&gt;\n            &lt;artifactId&gt;maven-compat&lt;/artifactId&gt;\n            &lt;version&gt;${mavenVersion}&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.apache.maven&lt;/groupId&gt;\n            &lt;artifactId&gt;maven-artifact&lt;/artifactId&gt;\n            &lt;version&gt;${mavenVersion}&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.apache.maven.plugin-tools&lt;/groupId&gt;\n            &lt;artifactId&gt;maven-plugin-annotations&lt;/artifactId&gt;\n            &lt;version&gt;${mavenPluginVersion}&lt;/version&gt;\n            &lt;scope&gt;provided&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;!--  Plexus  --&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.codehaus.plexus&lt;/groupId&gt;\n            &lt;artifactId&gt;plexus-utils&lt;/artifactId&gt;\n            &lt;version&gt;3.0.5&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.codehaus.plexus&lt;/groupId&gt;\n            &lt;artifactId&gt;plexus-digest&lt;/artifactId&gt;\n            &lt;version&gt;1.0&lt;/version&gt;\n        &lt;/dependency&gt;\n    &lt;/dependencies&gt;\n    &lt;build&gt;\n        &lt;plugins&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n                &lt;artifactId&gt;maven-plugin-plugin&lt;/artifactId&gt;\n                &lt;version&gt;${mavenPluginVersion}&lt;/version&gt;\n                &lt;configuration&gt;\n                    &lt;skipErrorNoDescriptorsFound&gt;true&lt;/skipErrorNoDescriptorsFound&gt;\n                &lt;/configuration&gt;\n                &lt;executions&gt;\n                    &lt;execution&gt;\n                        &lt;id&gt;mojo-descriptor&lt;/id&gt;\n                        &lt;goals&gt;\n                            &lt;goal&gt;descriptor&lt;/goal&gt;\n                        &lt;/goals&gt;\n                    &lt;/execution&gt;\n                &lt;/executions&gt;\n            &lt;/plugin&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;io.github.zlika&lt;/groupId&gt;\n                &lt;artifactId&gt;reproducible-build-maven-plugin&lt;/artifactId&gt;\n                &lt;version&gt;0.8&lt;/version&gt;\n                &lt;executions&gt;\n                    &lt;execution&gt;\n                        &lt;goals&gt;\n                            &lt;goal&gt;strip-jar&lt;/goal&gt;\n                        &lt;/goals&gt;\n                    &lt;/execution&gt;\n                &lt;/executions&gt;\n            &lt;/plugin&gt;\n        &lt;/plugins&gt;\n    &lt;/build&gt;\n&lt;/project&gt;</code></pre>\r\n</div>\r\n</div>\r\n</p>\n"},{"tags":["java","mocking","mockito"],"comments":[{"owner":{"account_id":4012793,"reputation":1627,"user_id":3305737,"display_name":"Jonasz"},"score":0,"creation_date":1664256898,"post_id":73861169,"comment_id":130423426,"body_markdown":"Does this answer your question? [Equivalent of Answers.RETURNS\\_DEEP\\_STUBS for a spy in mockito](https://stackoverflow.com/questions/47822542/equivalent-of-answers-returns-deep-stubs-for-a-spy-in-mockito)","body":"Does this answer your question? <a href=\"https://stackoverflow.com/questions/47822542/equivalent-of-answers-returns-deep-stubs-for-a-spy-in-mockito\">Equivalent of Answers.RETURNS_DEEP_STUBS for a spy in mockito</a>"},{"owner":{"account_id":15619920,"reputation":880,"user_id":11269090,"display_name":"Chen"},"score":0,"creation_date":1664297031,"post_id":73861169,"comment_id":130437429,"body_markdown":"Well, the example I gave is essentially what the post you gave is doing. Wondering if there is a better way of doing it.","body":"Well, the example I gave is essentially what the post you gave is doing. Wondering if there is a better way of doing it."}],"owner":{"account_id":15619920,"reputation":880,"user_id":11269090,"display_name":"Chen"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":212,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1664238214,"creation_date":1664238214,"question_id":73861169,"body_markdown":"I have the following line of code in Java:\r\n```\r\nboolean x = app1().app2().app3().returnBoolean();\r\n```\r\nLet&#39;s say `app3` has several methods, but I would like to only mock the behavior of `returnBoolean` inside app3 to always return true using Mockito. The other methods of `app3`, `app1` and `app2` remain the same. Somehow I need to do a `RETURN_DEEP_STUBS` by spying `app3`. I did some research, and I think Mockito only supports `RETURN_DEEP_STUBS` with mock.\r\n\r\nI am able to simulate the behavior with the code below:\r\n```\r\nApp1 app1Spy = spy(app1());\r\nApp2 app2Spy = spy(app1Spy.app2());\r\nApp3 app3Spy = spy(app2Spy.app3());\r\ndoReturn(app2Spy).when(app1Spy).app2();\r\ndoReturn(app3Spy).when(app2Spy).app3();\r\ndoReturn(true).when(app3Spy).returnBoolean();\r\n```\r\nBut the code is rather lengthy. Is there another way of achieving this?\r\n\r\n","title":"Mockito Spy a specific method that is several method-calls deep","body":"<p>I have the following line of code in Java:</p>\n<pre><code>boolean x = app1().app2().app3().returnBoolean();\n</code></pre>\n<p>Let's say <code>app3</code> has several methods, but I would like to only mock the behavior of <code>returnBoolean</code> inside app3 to always return true using Mockito. The other methods of <code>app3</code>, <code>app1</code> and <code>app2</code> remain the same. Somehow I need to do a <code>RETURN_DEEP_STUBS</code> by spying <code>app3</code>. I did some research, and I think Mockito only supports <code>RETURN_DEEP_STUBS</code> with mock.</p>\n<p>I am able to simulate the behavior with the code below:</p>\n<pre><code>App1 app1Spy = spy(app1());\nApp2 app2Spy = spy(app1Spy.app2());\nApp3 app3Spy = spy(app2Spy.app3());\ndoReturn(app2Spy).when(app1Spy).app2();\ndoReturn(app3Spy).when(app2Spy).app3();\ndoReturn(true).when(app3Spy).returnBoolean();\n</code></pre>\n<p>But the code is rather lengthy. Is there another way of achieving this?</p>\n"},{"tags":["java","spring-boot","junit","mockito","resttemplate"],"comments":[{"owner":{"account_id":480617,"reputation":2495,"user_id":893952,"accept_rate":57,"display_name":"Harry Coder"},"score":0,"creation_date":1663831151,"post_id":73806841,"comment_id":130332517,"body_markdown":"Does your class `FetchDataService` has a constructor that take in parameter a RestTemplate object?","body":"Does your class <code>FetchDataService</code> has a constructor that take in parameter a RestTemplate object?"},{"owner":{"account_id":6608940,"reputation":620,"user_id":5483731,"accept_rate":72,"display_name":"linuxNoob"},"score":0,"creation_date":1663866076,"post_id":73806841,"comment_id":130345749,"body_markdown":"@HarryCoder Yes, this is what it looks like `public FetchDataService(RestTemplate restTemplate)`","body":"@HarryCoder Yes, this is what it looks like <code>public FetchDataService(RestTemplate restTemplate)</code>"},{"owner":{"account_id":4753102,"reputation":3151,"user_id":4886722,"display_name":"Dmitry Khamitov"},"score":1,"creation_date":1664028846,"post_id":73806841,"comment_id":130380220,"body_markdown":"Your simplified source code doesn&#39;t really help because you return the result of `restTemplate.exchange` from it, which is `ResponseEntity`. Whereas `fetchDataService.getData()` returns some `DataResponse`. As such, I can assume there is also some code between the `restTemplate.exchange` and `getData` calls. If you can just share that part it will be really helpful and the test misbehaviour will be easy to find.","body":"Your simplified source code doesn&#39;t really help because you return the result of <code>restTemplate.exchange</code> from it, which is <code>ResponseEntity</code>. Whereas <code>fetchDataService.getData()</code> returns some <code>DataResponse</code>. As such, I can assume there is also some code between the <code>restTemplate.exchange</code> and <code>getData</code> calls. If you can just share that part it will be really helpful and the test misbehaviour will be easy to find."},{"owner":{"account_id":6608940,"reputation":620,"user_id":5483731,"accept_rate":72,"display_name":"linuxNoob"},"score":0,"creation_date":1664073800,"post_id":73806841,"comment_id":130386946,"body_markdown":"@DmitryKhamitov good catch. I have updated the source code to reflect that I&#39;m directly returning `ResponseEntity` but the body of that entity is `null` and doesn&#39;t have the `JsonNode` object that I expect it to have.","body":"@DmitryKhamitov good catch. I have updated the source code to reflect that I&#39;m directly returning <code>ResponseEntity</code> but the body of that entity is <code>null</code> and doesn&#39;t have the <code>JsonNode</code> object that I expect it to have."},{"owner":{"account_id":4753102,"reputation":3151,"user_id":4886722,"display_name":"Dmitry Khamitov"},"score":1,"creation_date":1664118322,"post_id":73806841,"comment_id":130393267,"body_markdown":"@linuxNoob given the `Mockito.verify(...)` doesn&#39;t throw and &quot;the simplified&quot; source code semantically and clearly represents the actual source code, I find it quite impossible for the `fetchDataService.getData()` to return `null`. Would you mind sharing the actual code of that method please?","body":"@linuxNoob given the <code>Mockito.verify(...)</code> doesn&#39;t throw and &quot;the simplified&quot; source code semantically and clearly represents the actual source code, I find it quite impossible for the <code>fetchDataService.getData()</code> to return <code>null</code>. Would you mind sharing the actual code of that method please?"},{"owner":{"account_id":6608940,"reputation":620,"user_id":5483731,"accept_rate":72,"display_name":"linuxNoob"},"score":0,"creation_date":1664228698,"post_id":73806841,"comment_id":130419217,"body_markdown":"@DmitryKhamitov added some more details, I&#39;m not sure what else to add. The actual query is big with nested fields but I have simplified it. Also, have verified using POSTMAN that it actually does return data.","body":"@DmitryKhamitov added some more details, I&#39;m not sure what else to add. The actual query is big with nested fields but I have simplified it. Also, have verified using POSTMAN that it actually does return data."},{"owner":{"account_id":4753102,"reputation":3151,"user_id":4886722,"display_name":"Dmitry Khamitov"},"score":1,"creation_date":1664229561,"post_id":73806841,"comment_id":130419400,"body_markdown":"@linuxNoob can you also add  the `expectedResponse` value then? In the question you are saying &quot;it&#39;s a JsonNode instance above&quot; but there is no any JsonNode instance above there...","body":"@linuxNoob can you also add  the <code>expectedResponse</code> value then? In the question you are saying &quot;it&#39;s a JsonNode instance above&quot; but there is no any JsonNode instance above there..."},{"owner":{"account_id":6608940,"reputation":620,"user_id":5483731,"accept_rate":72,"display_name":"linuxNoob"},"score":0,"creation_date":1664232472,"post_id":73806841,"comment_id":130419892,"body_markdown":"@DmitryKhamitov added. `Data.json` file just contains a sample json response and I can confirm that the `expectedResponse` is getting correctly populated. Also, I was incorrect/incomplete about the constructor earlier, this is what it looks like `public FetchDataService(RestTemplate restTemplate, ObjectMapper objectMapper)`","body":"@DmitryKhamitov added. <code>Data.json</code> file just contains a sample json response and I can confirm that the <code>expectedResponse</code> is getting correctly populated. Also, I was incorrect/incomplete about the constructor earlier, this is what it looks like <code>public FetchDataService(RestTemplate restTemplate, ObjectMapper objectMapper)</code>"},{"owner":{"account_id":6608940,"reputation":620,"user_id":5483731,"accept_rate":72,"display_name":"linuxNoob"},"score":1,"creation_date":1664233554,"post_id":73806841,"comment_id":130420061,"body_markdown":"@DmitryKhamitov you were spot on the fact that the issue was with post response processing piece. Specifically, after reading through the JSON the code does this `objectMapper.treeToValue(responseNode, DataResponse.class);` and since my test has a mock version of `ObjectMapper` without mocking `treeToValue()` it returns `null`. I appreciate you taking time to look into the problem, I was looking at the wrong place. If you could make an answer I&#39;ll accept it and mark it as solved.","body":"@DmitryKhamitov you were spot on the fact that the issue was with post response processing piece. Specifically, after reading through the JSON the code does this <code>objectMapper.treeToValue(responseNode, DataResponse.class);</code> and since my test has a mock version of <code>ObjectMapper</code> without mocking <code>treeToValue()</code> it returns <code>null</code>. I appreciate you taking time to look into the problem, I was looking at the wrong place. If you could make an answer I&#39;ll accept it and mark it as solved."}],"answers":[{"tags":[],"owner":{"account_id":4753102,"reputation":3151,"user_id":4886722,"display_name":"Dmitry Khamitov"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1664238011,"creation_date":1664238011,"answer_id":73861160,"question_id":73806841,"body_markdown":"As the author @linuxNoob has confirmed in our discussion in the comments, the issue was that `expectedResponse` didn&#39;t hold a proper `JsonNode` value. The reason for that is the `ObjectMapper` instance being mocked without any configuration to return something from its methods. So, any call was returning the default `null` value, i.e. `testMapper.readTree(json)` returns `null` that ends up being the value of the `ResponseEntity.body` through the `expectedResponse`.","title":"Mocking RestTemplate exchange returns null","body":"<p>As the author @linuxNoob has confirmed in our discussion in the comments, the issue was that <code>expectedResponse</code> didn't hold a proper <code>JsonNode</code> value. The reason for that is the <code>ObjectMapper</code> instance being mocked without any configuration to return something from its methods. So, any call was returning the default <code>null</code> value, i.e. <code>testMapper.readTree(json)</code> returns <code>null</code> that ends up being the value of the <code>ResponseEntity.body</code> through the <code>expectedResponse</code>.</p>\n"}],"owner":{"account_id":6608940,"reputation":620,"user_id":5483731,"accept_rate":72,"display_name":"linuxNoob"},"comment_count":9,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":908,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":73861160,"answer_count":1,"score":0,"last_activity_date":1664238011,"creation_date":1663793692,"question_id":73806841,"body_markdown":"I have looked at multiple posts here - [one for example](https://stackoverflow.com/questions/55590669/mocking-resttemplate-exchange-always-returns-null) and tried multiple variations but still can&#39;t seem to be able to get a non-null value after mocking   \r\n`RestTemplate#exchange(String url, HttpMethod method, HttpEntity&lt;?&gt; requestEntity, Class&lt;T&gt; responseType, Object... uriVariables)`. \r\n\r\nI am not passing any `uriVariables`. \r\n\r\nHere is my simplified source code:   \r\n\r\n    Request request = new Request();\r\n\trequest.setDataId(1);\r\n    String query = &quot;query ($ request:Request!)\\n&quot; + \r\n\t\t\t\t&quot;{\\n&quot; + \r\n\t\t\t\t&quot;    fetchData(request:$request)\\n&quot; + \r\n\t\t\t\t&quot;    {\\n&quot; + \r\n\t\t\t\t&quot;        planId\\n&quot; + \r\n                &quot;    }\\n&quot; +\r\n                &quot; }\\n&quot;;\r\n    \r\n    RequestBody requestBody = new RequestBody(query,Collections.singletonMap(&quot;request&quot;, \r\n\t\t\t\trequest));   \r\n    HttpEntity&lt;RequestBody&gt; request = new HttpEntity&lt;&gt;(requestBody, createHttpHeaders());   \r\n    return restTemplate.exchange(&quot;http://localhost:8080/gql&quot;, HttpMethod.POST, request, \r\n    JsonNode.class);\r\n\r\n    private HttpHeaders createHttpHeaders()\r\n\t{\r\n\t\tHttpHeaders headers = new HttpHeaders();\r\n\t\theaders.setContentType(MediaType.APPLICATION_JSON);\r\n\t\theaders.setAccept(Collections.singletonList(MediaType.APPLICATION_JSON));\r\n\t\treturn headers;\r\n\t}\r\n\r\nThe `RequestBody` class (uses `lombok`):   \r\n\r\n    @Getter\r\n    @AllArgsConstructor\r\n    public class RequestBody implements Serializable {\r\n\t  private static final long serialVersionUID = -203524485553511477L;\r\n\t  private String query;\r\n\t  private Map&lt;String,Object&gt; variables;\r\n    }\r\nAnd the corresponding test code:\r\n\r\n     @Mock\r\n\t private RestTemplate restTemplate;\r\n\r\n     @Mock\r\n\t private ObjectMapper objectMapper;\r\n     \r\n     @InjectMocks\r\n\t private FetchDataService fetchDataService;\r\n      \r\n     @Test\r\n     public void testFetchData() {\r\n      String json = new String(Files.readAllBytes(Paths.get(&quot;src/test/resources/Data.json&quot;)));\r\n\t     ObjectMapper testMapper = new ObjectMapper();\r\n\t     JsonNode expectedResponse = testMapper.readTree(json);\r\n     when(restTemplate.exchange(anyString(), any(HttpMethod.class), any(HttpEntity.class), \r\n\t    \t\t any(Class.class)))\r\n         .thenReturn(new ResponseEntity&lt;&gt;(expectedResponse, HttpStatus.OK));  \r\n      ResponseEntity&lt;JsonNode&gt; response = fetchDataService.getData();   \r\n      }\r\n\r\n`expectedResponse` is a `JsonNode` instance above. The problem is that `response` always returns a `null` body.   \r\n\r\nI am able to verify that the call does happen if I use this - \r\n\r\n\t  Mockito.verify(restTemplate)\r\n         .exchange(anyString(), any(HttpMethod.class), any(HttpEntity.class), any(Class.class));\r\n\r\n\r\nI&#39;m using junit 5, spring boot 2.6.7, jdk 11 if that matters.","title":"Mocking RestTemplate exchange returns null","body":"<p>I have looked at multiple posts here - <a href=\"https://stackoverflow.com/questions/55590669/mocking-resttemplate-exchange-always-returns-null\">one for example</a> and tried multiple variations but still can't seem to be able to get a non-null value after mocking<br />\n<code>RestTemplate#exchange(String url, HttpMethod method, HttpEntity&lt;?&gt; requestEntity, Class&lt;T&gt; responseType, Object... uriVariables)</code>.</p>\n<p>I am not passing any <code>uriVariables</code>.</p>\n<p>Here is my simplified source code:</p>\n<pre><code>Request request = new Request();\nrequest.setDataId(1);\nString query = &quot;query ($ request:Request!)\\n&quot; + \n            &quot;{\\n&quot; + \n            &quot;    fetchData(request:$request)\\n&quot; + \n            &quot;    {\\n&quot; + \n            &quot;        planId\\n&quot; + \n            &quot;    }\\n&quot; +\n            &quot; }\\n&quot;;\n\nRequestBody requestBody = new RequestBody(query,Collections.singletonMap(&quot;request&quot;, \n            request));   \nHttpEntity&lt;RequestBody&gt; request = new HttpEntity&lt;&gt;(requestBody, createHttpHeaders());   \nreturn restTemplate.exchange(&quot;http://localhost:8080/gql&quot;, HttpMethod.POST, request, \nJsonNode.class);\n\nprivate HttpHeaders createHttpHeaders()\n{\n    HttpHeaders headers = new HttpHeaders();\n    headers.setContentType(MediaType.APPLICATION_JSON);\n    headers.setAccept(Collections.singletonList(MediaType.APPLICATION_JSON));\n    return headers;\n}\n</code></pre>\n<p>The <code>RequestBody</code> class (uses <code>lombok</code>):</p>\n<pre><code>@Getter\n@AllArgsConstructor\npublic class RequestBody implements Serializable {\n  private static final long serialVersionUID = -203524485553511477L;\n  private String query;\n  private Map&lt;String,Object&gt; variables;\n}\n</code></pre>\n<p>And the corresponding test code:</p>\n<pre><code> @Mock\n private RestTemplate restTemplate;\n\n @Mock\n private ObjectMapper objectMapper;\n \n @InjectMocks\n private FetchDataService fetchDataService;\n  \n @Test\n public void testFetchData() {\n  String json = new String(Files.readAllBytes(Paths.get(&quot;src/test/resources/Data.json&quot;)));\n     ObjectMapper testMapper = new ObjectMapper();\n     JsonNode expectedResponse = testMapper.readTree(json);\n when(restTemplate.exchange(anyString(), any(HttpMethod.class), any(HttpEntity.class), \n             any(Class.class)))\n     .thenReturn(new ResponseEntity&lt;&gt;(expectedResponse, HttpStatus.OK));  \n  ResponseEntity&lt;JsonNode&gt; response = fetchDataService.getData();   \n  }\n</code></pre>\n<p><code>expectedResponse</code> is a <code>JsonNode</code> instance above. The problem is that <code>response</code> always returns a <code>null</code> body.</p>\n<p>I am able to verify that the call does happen if I use this -</p>\n<pre><code>  Mockito.verify(restTemplate)\n     .exchange(anyString(), any(HttpMethod.class), any(HttpEntity.class), any(Class.class));\n</code></pre>\n<p>I'm using junit 5, spring boot 2.6.7, jdk 11 if that matters.</p>\n"},{"tags":["java","microsoft-graph-api","microsoft-graph-teams"],"answers":[{"tags":[],"owner":{"account_id":1085024,"reputation":20746,"user_id":1080923,"display_name":"Glen Scales"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1664236935,"creation_date":1664236935,"answer_id":73861063,"question_id":73853970,"body_markdown":"Have you tried using the Search endpoint https://learn.microsoft.com/en-us/graph/search-concept-chat-messages . You can query on To, From or use Participants which would return anything where the target either sends or received a chat message eg\r\n\r\n&lt;!-- begin snippet: js hide: false console: true babel: false --&gt;\r\n\r\n&lt;!-- language: lang-html --&gt;\r\n\r\n    POST https://graph.microsoft.com/v1.0/search/query\r\n    {\r\n        &quot;requests&quot;: [\r\n            {\r\n                &quot;entityTypes&quot;: [\r\n                    &quot;chatMessage&quot;\r\n                ],\r\n                &quot;query&quot;: {\r\n                    &quot;queryString&quot;: &quot;participants:blah@blah.com&quot;\r\n                }\r\n            }\r\n        ]\r\n    }\r\n\r\n&lt;!-- end snippet --&gt;\r\n\r\nThis then returns both the ChatId and the MessageId \r\n\r\nThere is also an Export API https://learn.microsoft.com/en-us/microsoftteams/export-teams-content (it has a cost involved) if you where doing things a tenant level.","title":"How I Query Graph API For Chat Id In Teams?","body":"<p>Have you tried using the Search endpoint <a href=\"https://learn.microsoft.com/en-us/graph/search-concept-chat-messages\" rel=\"nofollow noreferrer\">https://learn.microsoft.com/en-us/graph/search-concept-chat-messages</a> . You can query on To, From or use Participants which would return anything where the target either sends or received a chat message eg</p>\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-html lang-html prettyprint-override\"><code>POST https://graph.microsoft.com/v1.0/search/query\n{\n    \"requests\": [\n        {\n            \"entityTypes\": [\n                \"chatMessage\"\n            ],\n            \"query\": {\n                \"queryString\": \"participants:blah@blah.com\"\n            }\n        }\n    ]\n}</code></pre>\r\n</div>\r\n</div>\r\n</p>\n<p>This then returns both the ChatId and the MessageId</p>\n<p>There is also an Export API <a href=\"https://learn.microsoft.com/en-us/microsoftteams/export-teams-content\" rel=\"nofollow noreferrer\">https://learn.microsoft.com/en-us/microsoftteams/export-teams-content</a> (it has a cost involved) if you where doing things a tenant level.</p>\n"}],"owner":{"account_id":980057,"reputation":7528,"user_id":1000011,"accept_rate":52,"display_name":"opticyclic"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":960,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1664236935,"creation_date":1664194274,"question_id":73853970,"body_markdown":"I am exporting Teams chat history to html and need to work out how to query for the chat name.\r\n\r\nWhen I know the chat id I can get the chat with\r\n\r\n    graphClient.me().chats(&quot;19:xxxxgbl.spaces&quot;).messages()\r\n\r\nI can then page through the collection and output all the chats.  \r\nHowever,  I don&#39;t know how to get the chat id from the API in the first place.\r\n\r\nI was able to find the first one from the Graph Explorer with `/beta/me/chats` and then searching the preview for a channel name and finding the name in the `topic` field.\r\n\r\nThe same section/value doesn&#39;t exist for one on one chats with a colleague though. When I search the output of `/beta/me/chats` for my colleagues name it doesn&#39;t find it.\r\n\r\nWhen I scroll down the output I see it has a `webUrl` field. Clicking on the 3rd item of the response to `/beta/me/chats` shows me the 3rd chats in the sidebar of Teams.\r\n\r\nHow can I find the chat id with the Java API if I know my colleagues name that I am chatting with?\r\n","title":"How I Query Graph API For Chat Id In Teams?","body":"<p>I am exporting Teams chat history to html and need to work out how to query for the chat name.</p>\n<p>When I know the chat id I can get the chat with</p>\n<pre><code>graphClient.me().chats(&quot;19:xxxxgbl.spaces&quot;).messages()\n</code></pre>\n<p>I can then page through the collection and output all the chats.<br />\nHowever,  I don't know how to get the chat id from the API in the first place.</p>\n<p>I was able to find the first one from the Graph Explorer with <code>/beta/me/chats</code> and then searching the preview for a channel name and finding the name in the <code>topic</code> field.</p>\n<p>The same section/value doesn't exist for one on one chats with a colleague though. When I search the output of <code>/beta/me/chats</code> for my colleagues name it doesn't find it.</p>\n<p>When I scroll down the output I see it has a <code>webUrl</code> field. Clicking on the 3rd item of the response to <code>/beta/me/chats</code> shows me the 3rd chats in the sidebar of Teams.</p>\n<p>How can I find the chat id with the Java API if I know my colleagues name that I am chatting with?</p>\n"},{"tags":["java","sonarqube","sonarqube-scan"],"comments":[{"owner":{"account_id":7404989,"reputation":7263,"user_id":5634146,"display_name":"Nicolas B."},"score":0,"creation_date":1475132411,"post_id":39753072,"comment_id":66821955,"body_markdown":"Which version of SonarQube and of Java Plugin are you using ? what is the encoding of _File.java_ on which this is failing ?","body":"Which version of SonarQube and of Java Plugin are you using ? what is the encoding of <i>File.java</i> on which this is failing ?"},{"owner":{"account_id":398412,"reputation":465,"user_id":763082,"display_name":"zageyiff"},"score":0,"creation_date":1475784059,"post_id":39753072,"comment_id":67094720,"body_markdown":"Hello, Having the same issue with SonarQube 5.6.2, java plugin 4.2, file encoded in utf-8","body":"Hello, Having the same issue with SonarQube 5.6.2, java plugin 4.2, file encoded in utf-8"},{"owner":{"account_id":36303,"reputation":1357,"user_id":103446,"accept_rate":53,"display_name":"Ro."},"score":0,"creation_date":1475828128,"post_id":39753072,"comment_id":67109435,"body_markdown":"It seemed to just start working the day after I posted this.... No changes made","body":"It seemed to just start working the day after I posted this.... No changes made"},{"owner":{"account_id":409632,"reputation":1129,"user_id":780998,"accept_rate":76,"display_name":"Deven Phillips"},"score":0,"creation_date":1479911375,"post_id":39753072,"comment_id":68758258,"body_markdown":"Having the same issue here. Using Maven on a groovy project with SonarQube 6.1.","body":"Having the same issue here. Using Maven on a groovy project with SonarQube 6.1."},{"owner":{"account_id":1255252,"reputation":453,"user_id":1214857,"accept_rate":88,"display_name":"iupchris10"},"score":1,"creation_date":1516134493,"post_id":39753072,"comment_id":83563526,"body_markdown":"I had the same issue and I resolved it by copy &amp; pasting the entire contents of the offending class into TextWrangler, then copy &amp; pasting it back into Visual Studio. It sounds silly, but I switch back &amp; forth between developing on PC and Mac and I guess I normalized the line breaks at some point, which may have caused an issue.","body":"I had the same issue and I resolved it by copy &amp; pasting the entire contents of the offending class into TextWrangler, then copy &amp; pasting it back into Visual Studio. It sounds silly, but I switch back &amp; forth between developing on PC and Mac and I guess I normalized the line breaks at some point, which may have caused an issue."}],"answers":[{"tags":[],"owner":{"account_id":1044852,"reputation":1144,"user_id":1050079,"display_name":"Don"},"down_vote_count":0,"up_vote_count":29,"is_accepted":false,"score":29,"last_activity_date":1483980646,"creation_date":1483980646,"answer_id":41552924,"question_id":39753072,"body_markdown":"I had the same issue when using sonar maven plugin and jacoco test reports. `mvn sonar:sonar` relies on an existintig jacoco report, when the source code was changed (lines had been removed), but the test report wasn&#39;t updated this error occurred. Running `mvn clean test sonar:sonar` solved it.","title":"Sonarqube scan error with line out of range?","body":"<p>I had the same issue when using sonar maven plugin and jacoco test reports. <code>mvn sonar:sonar</code> relies on an existintig jacoco report, when the source code was changed (lines had been removed), but the test report wasn't updated this error occurred. Running <code>mvn clean test sonar:sonar</code> solved it.</p>\n"},{"tags":[],"owner":{"account_id":1920543,"reputation":1047,"user_id":1732171,"accept_rate":97,"display_name":"MFIhsan"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1493328386,"creation_date":1493328386,"answer_id":43668178,"question_id":39753072,"body_markdown":"Same damn issue happens in python code as well. I got it resolved adding a blank line at the end of the file.","title":"Sonarqube scan error with line out of range?","body":"<p>Same damn issue happens in python code as well. I got it resolved adding a blank line at the end of the file.</p>\n"},{"tags":[],"owner":{"account_id":1906088,"reputation":2053,"user_id":1720938,"accept_rate":68,"display_name":"hamid"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1500539219,"creation_date":1500539219,"answer_id":45209352,"question_id":39753072,"body_markdown":"For me it was because I had exactly the same class (for example `com.test.MyClass`) name and package name in two different sub modules (maven), `MyClass` in first module is larger i.e. 120 lines of code. `MyClass` in second module is shorter, then the exception was thrown since JaCoCo though the report was for that.\r\n\r\nSolution was to rename one of the classes or move it into a different package. \r\n\r\ni.e. :\r\n`com.test.MyClass`\r\nand\r\n`com.test.MyClassB`\r\n\r\nOR:\r\n\r\n`com.test.MyClass`\r\nand\r\n`com.test.foo.MyClass`\r\n","title":"Sonarqube scan error with line out of range?","body":"<p>For me it was because I had exactly the same class (for example <code>com.test.MyClass</code>) name and package name in two different sub modules (maven), <code>MyClass</code> in first module is larger i.e. 120 lines of code. <code>MyClass</code> in second module is shorter, then the exception was thrown since JaCoCo though the report was for that.</p>\n\n<p>Solution was to rename one of the classes or move it into a different package. </p>\n\n<p>i.e. :\n<code>com.test.MyClass</code>\nand\n<code>com.test.MyClassB</code></p>\n\n<p>OR:</p>\n\n<p><code>com.test.MyClass</code>\nand\n<code>com.test.foo.MyClass</code></p>\n"},{"tags":[],"owner":{"account_id":1286798,"reputation":123,"user_id":1239705,"display_name":"StackUser"},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1530076768,"creation_date":1530076768,"answer_id":51054995,"question_id":39753072,"body_markdown":"I tried `gradle clean build`and it worked for me","title":"Sonarqube scan error with line out of range?","body":"<p>I tried <code>gradle clean build</code>and it worked for me</p>\n"},{"tags":[],"owner":{"account_id":8897,"reputation":11209,"user_id":16206,"accept_rate":78,"display_name":"borjab"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1558370489,"creation_date":1558370489,"answer_id":56225039,"question_id":39753072,"body_markdown":"If executing a *maven clean* does not work check if you have any old project folder that needs to be cleaned. Once you remove a submodule from the maven pom it won&#39;t remove the folder including the /target directory with the jacoco report from ages ago. ","title":"Sonarqube scan error with line out of range?","body":"<p>If executing a <em>maven clean</em> does not work check if you have any old project folder that needs to be cleaned. Once you remove a submodule from the maven pom it won't remove the folder including the /target directory with the jacoco report from ages ago. </p>\n"},{"tags":[],"owner":{"account_id":1677279,"reputation":1521,"user_id":1542507,"display_name":"Pau Ballada"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1570617871,"creation_date":1570617871,"answer_id":58302387,"question_id":39753072,"body_markdown":"In my case, an iOS project written in Swift had to remove previous reports.\r\nJust delete sonar-reports folder.","title":"Sonarqube scan error with line out of range?","body":"<p>In my case, an iOS project written in Swift had to remove previous reports.\nJust delete sonar-reports folder.</p>\n"},{"tags":[],"owner":{"account_id":1587312,"reputation":171,"user_id":1471355,"accept_rate":46,"display_name":"ICantSeeSharp"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1604393175,"creation_date":1604393175,"answer_id":64659419,"question_id":39753072,"body_markdown":"I got the very same error with Azure DevOps Pipelines, but a cleanup before building the solution for `sources and output` did the job.\r\n\r\nNow everything is working fine again. ","title":"Sonarqube scan error with line out of range?","body":"<p>I got the very same error with Azure DevOps Pipelines, but a cleanup before building the solution for <code>sources and output</code> did the job.</p>\n<p>Now everything is working fine again.</p>\n"},{"tags":[],"owner":{"account_id":778995,"reputation":5315,"user_id":731183,"accept_rate":70,"display_name":"AlexS"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1612871717,"creation_date":1612871717,"answer_id":66118511,"question_id":39753072,"body_markdown":"We had the same problem on our AspNET-Core-Project.\r\n\r\nWe then saw, that we had testfailures that unfortunately didn&#39;t cause our Jenkins-Job to fail. Instead sonarqube analyzing the tests and coverage produced the error.\r\n\r\nOnce the tests were fixed everything worked well again.","title":"Sonarqube scan error with line out of range?","body":"<p>We had the same problem on our AspNET-Core-Project.</p>\n<p>We then saw, that we had testfailures that unfortunately didn't cause our Jenkins-Job to fail. Instead sonarqube analyzing the tests and coverage produced the error.</p>\n<p>Once the tests were fixed everything worked well again.</p>\n"},{"tags":[],"owner":{"account_id":10986226,"reputation":306,"user_id":8071857,"display_name":"Shivam Tyagi"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1625114587,"creation_date":1625114587,"answer_id":68204415,"question_id":39753072,"body_markdown":"\r\nMajor reasons for this problem:-\r\n\r\n 1. Yes this issue arises when there is a recent change in the\r\n    repository but you are not using the updated image in the yaml file and this error will always be seen in the latest committed file in the repo.\r\n\r\n**for ex - \r\ndocker run -dt --name ${{variables.containerName}} ${{variables.tempimage}} /bin/bash**\r\n\r\n 2. In the above command we are invoking the containerName and then\r\n    using some tempimage so if this tempimage is updated(means pointing\r\n    to the latest repo) then only you will be able to resolve this issue\r\n    if we have a mismatch in the repo at sonarqube and in the yaml file\r\n    then we will get this issue.\r\n\r\n 3. To get the latest image we can use Team_image_builder inside the\r\n    yaml file  and if we remove the latest committed file from the repo then this issue\r\n    will not come because difference of both sides would be zero then.\r\n\r\n","title":"Sonarqube scan error with line out of range?","body":"<p>Major reasons for this problem:-</p>\n<ol>\n<li>Yes this issue arises when there is a recent change in the\nrepository but you are not using the updated image in the yaml file and this error will always be seen in the latest committed file in the repo.</li>\n</ol>\n<p><strong>for ex -\ndocker run -dt --name ${{variables.containerName}} ${{variables.tempimage}} /bin/bash</strong></p>\n<ol start=\"2\">\n<li><p>In the above command we are invoking the containerName and then\nusing some tempimage so if this tempimage is updated(means pointing\nto the latest repo) then only you will be able to resolve this issue\nif we have a mismatch in the repo at sonarqube and in the yaml file\nthen we will get this issue.</p>\n</li>\n<li><p>To get the latest image we can use Team_image_builder inside the\nyaml file  and if we remove the latest committed file from the repo then this issue\nwill not come because difference of both sides would be zero then.</p>\n</li>\n</ol>\n"},{"tags":[],"owner":{"account_id":415688,"reputation":4956,"user_id":790635,"accept_rate":82,"display_name":"emp"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1642758257,"creation_date":1642758257,"answer_id":70799250,"question_id":39753072,"body_markdown":"For Azure DevOps, you might want to make sure your build cleans sources before it starts building.\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/BWZe4.png","title":"Sonarqube scan error with line out of range?","body":"<p>For Azure DevOps, you might want to make sure your build cleans sources before it starts building.</p>\n<p><a href=\"https://i.stack.imgur.com/BWZe4.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/BWZe4.png\" alt=\"enter image description here\" /></a></p>\n"},{"tags":[],"owner":{"account_id":47234,"reputation":959,"user_id":139799,"accept_rate":100,"display_name":"ravi"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1664234562,"creation_date":1664234562,"answer_id":73860881,"question_id":39753072,"body_markdown":"Delete the coverage reports from the previous run before running again.","title":"Sonarqube scan error with line out of range?","body":"<p>Delete the coverage reports from the previous run before running again.</p>\n"}],"owner":{"account_id":36303,"reputation":1357,"user_id":103446,"accept_rate":53,"display_name":"Ro."},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":23832,"favorite_count":0,"down_vote_count":0,"up_vote_count":34,"answer_count":11,"score":34,"last_activity_date":1664234562,"creation_date":1475080442,"question_id":39753072,"body_markdown":"&gt; [07:43:57]W:   [Step 1/1] ERROR: Error during SonarQube Scanner execution\n&gt;\n&gt; [07:43:57]W:   [Step 1/1] ERROR: Line 523 is out of range in the file\n&gt; src/main/java/com/company/package/File.java\n&gt; (lines: 522)\n\nFor some reason Sonarqube is reporting an error on line 523 but there is only 522 lines in the source file ?\n\nI saw this on a previous file, but when I added a blank line to the end of it the problem went away, this file already has a blank line at the end of it.\n\n","title":"Sonarqube scan error with line out of range?","body":"<blockquote>\n<p>[07:43:57]W:   [Step 1/1] ERROR: Error during SonarQube Scanner execution</p>\n<p>[07:43:57]W:   [Step 1/1] ERROR: Line 523 is out of range in the file\nsrc/main/java/com/company/package/File.java\n(lines: 522)</p>\n</blockquote>\n<p>For some reason Sonarqube is reporting an error on line 523 but there is only 522 lines in the source file ?</p>\n<p>I saw this on a previous file, but when I added a blank line to the end of it the problem went away, this file already has a blank line at the end of it.</p>\n"},{"tags":["java","google-app-engine"],"comments":[{"owner":{"account_id":5685336,"reputation":39560,"user_id":4495081,"accept_rate":94,"display_name":"Dan Cornilescu"},"score":0,"creation_date":1462757305,"post_id":4140747,"comment_id":61755442,"body_markdown":"Possible duplicate of [How to check in Java App Engine if we are on development workstation](http://stackoverflow.com/questions/1574637/how-to-check-in-java-app-engine-if-we-are-on-development-workstation)","body":"Possible duplicate of <a href=\"http://stackoverflow.com/questions/1574637/how-to-check-in-java-app-engine-if-we-are-on-development-workstation\">How to check in Java App Engine if we are on development workstation</a>"},{"owner":{"account_id":47283,"reputation":703817,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"score":0,"creation_date":1664232781,"post_id":4140747,"comment_id":130419934,"body_markdown":"Not a duplicate.  That&#39;s a different problem.  Sufficiently different that &quot;clean&quot; solutions to that problem won&#39;t work for this one.","body":"Not a duplicate.  That&#39;s a different problem.  Sufficiently different that &quot;clean&quot; solutions to that problem won&#39;t work for this one."}],"answers":[{"tags":[],"owner":{"account_id":20130,"reputation":279845,"user_id":47773,"accept_rate":52,"display_name":"Matthew Flaschen"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1289357175,"creation_date":1289357175,"answer_id":4140782,"question_id":4140747,"body_markdown":"You can check the `com.google.appengine.runtime.version` property:\r\n\r\n    String appEngineVersion = System.getProperty(&quot;com.google.appengine.runtime.version&quot;);\r\n\r\nIf it&#39;s set, it&#39;s App Engine.\r\n\r\nBut I would consider using separate build targets instead, to avoid the runtime overhead.\r\n","title":"identify whether is code running on app engine runtime (Java)","body":"<p>You can check the <code>com.google.appengine.runtime.version</code> property:</p>\n\n<pre><code>String appEngineVersion = System.getProperty(\"com.google.appengine.runtime.version\");\n</code></pre>\n\n<p>If it's set, it's App Engine.</p>\n\n<p>But I would consider using separate build targets instead, to avoid the runtime overhead.</p>\n"},{"tags":[],"owner":{"account_id":47283,"reputation":703817,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1664234270,"creation_date":1289358344,"answer_id":4140870,"question_id":4140747,"body_markdown":"As [@Matthew Flaschen][1] said, there are system properties that you can check to determine if GAE is present or not.  [This link][2] gives the details.\r\n\r\nIf you go down this route, your application needs to be built so that the main code has no static dependencies on the GAE classes; i.e. no imports or other references to GAE packages and classes in the code (apart GAE class names, etc in String literals).  All dependencies have to be isolated to code that gets loaded using `Class.forName(String)` AFTER you&#39;ve determined whether or not GAE is present.\r\n\r\nThis represents a non-trivial overhead:\r\n\r\n  - You&#39;ll probably end up with an extra Adapter interface and (at least) two implementations for the GAE and non-GAE cases.\r\n  - You&#39;ve got the (minor) runtime overheads of dynamically loading the relevant class at startup, and calling through the Adapter interface.\r\n  - Your JAR file is that much bigger as a result.\r\n  - You now have to test on two platforms.\r\n\r\nOn the other hand, you do have the potential advantage of having one JAR that works in both GAE and non-GAE contexts.\r\n\r\n--------------------\r\n\r\n[@David P. Caldwell][3] commented:\r\n\r\n&gt; The other possibility is to load the GAE development server classes\r\n&gt; yourself; you can essentially run the development server inside a\r\n&gt; servlet container (I use Tomcat), which can give you more \r\n&gt; control over the development environment. \r\n\r\nThis is not quite the same as what (I think) the OP was trying to do.\r\nNonetheless, it is a very interesting idea.  If this approach works *for running a production implementation on a non-GAE platform*, it would allow you to avoid implementing a stack of non-GAE adapter code; see previous.  \r\n\r\nThe downside is that if you run into issues and try to get support from Google, you *may* run into a roadblock; i.e. &quot;we don&#39;t support GAE when it is used this way&quot;.\r\n\r\n\r\n  [1]: https://stackoverflow.com/users/47773/matthew-flaschen\r\n  [2]: http://code.google.com/appengine/docs/java/runtime.html#The_Environment\r\n  [3]: https://stackoverflow.com/users/252858/david-p-caldwell","title":"identify whether is code running on app engine runtime (Java)","body":"<p>As <a href=\"https://stackoverflow.com/users/47773/matthew-flaschen\">@Matthew Flaschen</a> said, there are system properties that you can check to determine if GAE is present or not.  <a href=\"http://code.google.com/appengine/docs/java/runtime.html#The_Environment\" rel=\"nofollow noreferrer\">This link</a> gives the details.</p>\n<p>If you go down this route, your application needs to be built so that the main code has no static dependencies on the GAE classes; i.e. no imports or other references to GAE packages and classes in the code (apart GAE class names, etc in String literals).  All dependencies have to be isolated to code that gets loaded using <code>Class.forName(String)</code> AFTER you've determined whether or not GAE is present.</p>\n<p>This represents a non-trivial overhead:</p>\n<ul>\n<li>You'll probably end up with an extra Adapter interface and (at least) two implementations for the GAE and non-GAE cases.</li>\n<li>You've got the (minor) runtime overheads of dynamically loading the relevant class at startup, and calling through the Adapter interface.</li>\n<li>Your JAR file is that much bigger as a result.</li>\n<li>You now have to test on two platforms.</li>\n</ul>\n<p>On the other hand, you do have the potential advantage of having one JAR that works in both GAE and non-GAE contexts.</p>\n<hr />\n<p><a href=\"https://stackoverflow.com/users/252858/david-p-caldwell\">@David P. Caldwell</a> commented:</p>\n<blockquote>\n<p>The other possibility is to load the GAE development server classes\nyourself; you can essentially run the development server inside a\nservlet container (I use Tomcat), which can give you more\ncontrol over the development environment.</p>\n</blockquote>\n<p>This is not quite the same as what (I think) the OP was trying to do.\nNonetheless, it is a very interesting idea.  If this approach works <em>for running a production implementation on a non-GAE platform</em>, it would allow you to avoid implementing a stack of non-GAE adapter code; see previous.</p>\n<p>The downside is that if you run into issues and try to get support from Google, you <em>may</em> run into a roadblock; i.e. &quot;we don't support GAE when it is used this way&quot;.</p>\n"},{"tags":[],"owner":{"account_id":109969,"reputation":14788,"user_id":291180,"accept_rate":80,"display_name":"Travis Webb"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1289519975,"creation_date":1289519975,"answer_id":4160452,"question_id":4140747,"body_markdown":"There is another way to do this as well. This is explained well in gaevfs&#39;s documentation on how to write Portable Code: http://code.google.com/p/gaevfs/wiki/ApplicationPortability\r\n\r\nOf interest to you is the following line:\r\n\r\n    boolean isGoogleAppEngine = getServletContext().getServerInfo().contains( &quot;Google&quot; );","title":"identify whether is code running on app engine runtime (Java)","body":"<p>There is another way to do this as well. This is explained well in gaevfs's documentation on how to write Portable Code: <a href=\"http://code.google.com/p/gaevfs/wiki/ApplicationPortability\" rel=\"nofollow\">http://code.google.com/p/gaevfs/wiki/ApplicationPortability</a></p>\n\n<p>Of interest to you is the following line:</p>\n\n<pre><code>boolean isGoogleAppEngine = getServletContext().getServerInfo().contains( \"Google\" );\n</code></pre>\n"},{"tags":[],"owner":{"account_id":330563,"reputation":145,"user_id":654749,"accept_rate":75,"display_name":"Reza"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1315804238,"creation_date":1299818792,"answer_id":5269045,"question_id":4140747,"body_markdown":"As explained [here][1] you can check the following property:\r\n\r\n    String environment = System.getProperty(\r\n        &quot;com.google.appengine.runtime.environment&quot;)\r\n\r\n`environment` is &quot;Production&quot; when running on App Engine, and &quot;Development&quot; when running in the development server.\r\n\r\n\r\n  [1]: http://code.google.com/appengine/docs/java/runtime.html#The_Environment","title":"identify whether is code running on app engine runtime (Java)","body":"<p>As explained <a href=\"http://code.google.com/appengine/docs/java/runtime.html#The_Environment\" rel=\"nofollow\">here</a> you can check the following property:</p>\n\n<pre><code>String environment = System.getProperty(\n    \"com.google.appengine.runtime.environment\")\n</code></pre>\n\n<p><code>environment</code> is \"Production\" when running on App Engine, and \"Development\" when running in the development server.</p>\n"},{"tags":[],"owner":{"account_id":10582,"reputation":2468,"user_id":20065,"accept_rate":76,"display_name":"Yonatan Maman"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1477542369,"creation_date":1301439583,"answer_id":5479920,"question_id":4140747,"body_markdown":"similar to what @Reza wrote, but a bit cleaner:\r\n\r\nuse `SystemProperty.environment.value()` to get &quot;**Production**&quot; when running on App Engine, and &quot;**Development**&quot; when running in the development server.","title":"identify whether is code running on app engine runtime (Java)","body":"<p>similar to what @Reza wrote, but a bit cleaner:</p>\n\n<p>use <code>SystemProperty.environment.value()</code> to get \"<strong>Production</strong>\" when running on App Engine, and \"<strong>Development</strong>\" when running in the development server.</p>\n"},{"tags":[],"owner":{"account_id":133137,"reputation":13350,"user_id":334270,"accept_rate":100,"display_name":"Zsolt Safrany"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1402653980,"creation_date":1402653980,"answer_id":24202794,"question_id":4140747,"body_markdown":"I saw no type-safe solution here so here it is:\r\n\r\n    if (SystemProperty.environment.value() == SystemProperty.Environment.Value.Production) {\r\n        // The app is running on App Engine...\r\n    }","title":"identify whether is code running on app engine runtime (Java)","body":"<p>I saw no type-safe solution here so here it is:</p>\n\n<pre><code>if (SystemProperty.environment.value() == SystemProperty.Environment.Value.Production) {\n    // The app is running on App Engine...\n}\n</code></pre>\n"}],"owner":{"account_id":235690,"reputation":81,"user_id":502677,"display_name":"nsegae"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1550,"favorite_count":0,"down_vote_count":0,"up_vote_count":8,"answer_count":6,"score":8,"last_activity_date":1664234270,"creation_date":1289356639,"question_id":4140747,"body_markdown":"How can one identify whether some code (a serv-let or a simple class) is running on Google App Engine run-time (Java) so that one can decide whether to utilize app engine&#39;s specific libraries or not? Is there some reliable runtime enviroment ID for that?","title":"identify whether is code running on app engine runtime (Java)","body":"<p>How can one identify whether some code (a serv-let or a simple class) is running on Google App Engine run-time (Java) so that one can decide whether to utilize app engine's specific libraries or not? Is there some reliable runtime enviroment ID for that?</p>\n"},{"tags":["java","spring","maven","spring-boot"],"comments":[{"owner":{"account_id":4545799,"reputation":2469,"user_id":3692447,"accept_rate":100,"display_name":"Tomaz Fernandes"},"score":0,"creation_date":1540265640,"post_id":52940598,"comment_id":92790194,"body_markdown":"Could you post your pom.xml?","body":"Could you post your pom.xml?"},{"owner":{"account_id":5350300,"reputation":740,"user_id":4264590,"accept_rate":62,"display_name":"John"},"score":0,"creation_date":1540270992,"post_id":52940598,"comment_id":92791390,"body_markdown":"@TomazFernandes  I have posted the pom.xml","body":"@TomazFernandes  I have posted the pom.xml"}],"answers":[{"tags":[],"owner":{"account_id":4545799,"reputation":2469,"user_id":3692447,"accept_rate":100,"display_name":"Tomaz Fernandes"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1540271461,"creation_date":1540271461,"answer_id":52941570,"question_id":52940598,"body_markdown":"You are using a wrong version in you Spring-boot parent dependency. You should use 2.0.6-RELEASE, or any other RELEASE version.\r\n\r\n     &lt;!-- https://mvnrepository.com/artifact/org.springframework.boot/spring-boot-starter-parent --&gt;\r\n    &lt;dependency&gt;\r\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n        &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\r\n        &lt;version&gt;2.0.6.RELEASE&lt;/version&gt;\r\n        &lt;type&gt;pom&lt;/type&gt;\r\n    &lt;/dependency&gt;\r\n\r\nHope it helps!","title":"Spring PetClinic application showing error in pom.xml","body":"<p>You are using a wrong version in you Spring-boot parent dependency. You should use 2.0.6-RELEASE, or any other RELEASE version.</p>\n\n<pre><code> &lt;!-- https://mvnrepository.com/artifact/org.springframework.boot/spring-boot-starter-parent --&gt;\n&lt;dependency&gt;\n    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n    &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\n    &lt;version&gt;2.0.6.RELEASE&lt;/version&gt;\n    &lt;type&gt;pom&lt;/type&gt;\n&lt;/dependency&gt;\n</code></pre>\n\n<p>Hope it helps!</p>\n"},{"tags":[],"owner":{"account_id":14589575,"reputation":21,"user_id":10537189,"display_name":"Joe.Hurke"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1540655168,"creation_date":1540417998,"answer_id":52978423,"question_id":52940598,"body_markdown":"Which Java-Version do you use?\r\n\r\nWhen building Spring petclinic on Java 9 or higher, problems with wroj have been reported https://github.com/wro4j/wro4j/pull/1041 .\r\n\r\nThese problems are solved in the code of wroj after version 1.8.0 https://github.com/wro4j/wro4j , but no version with this solution has been released https://github.com/wro4j/wro4j/branches .\r\n\r\nSo you have to build wroj version 1.8.1-SNAPSHOT yourself and use this version to build petclinic framework-version on Java 9 or higher. ","title":"Spring PetClinic application showing error in pom.xml","body":"<p>Which Java-Version do you use?</p>\n\n<p>When building Spring petclinic on Java 9 or higher, problems with wroj have been reported <a href=\"https://github.com/wro4j/wro4j/pull/1041\" rel=\"nofollow noreferrer\">https://github.com/wro4j/wro4j/pull/1041</a> .</p>\n\n<p>These problems are solved in the code of wroj after version 1.8.0 <a href=\"https://github.com/wro4j/wro4j\" rel=\"nofollow noreferrer\">https://github.com/wro4j/wro4j</a> , but no version with this solution has been released <a href=\"https://github.com/wro4j/wro4j/branches\" rel=\"nofollow noreferrer\">https://github.com/wro4j/wro4j/branches</a> .</p>\n\n<p>So you have to build wroj version 1.8.1-SNAPSHOT yourself and use this version to build petclinic framework-version on Java 9 or higher. </p>\n"},{"tags":[],"owner":{"account_id":18838619,"reputation":21,"user_id":13740689,"display_name":"Amarendra Kishore"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1592067315,"creation_date":1592067315,"answer_id":62362986,"question_id":52940598,"body_markdown":"In case, someone is facing issue with wro4j for PetClinic application.\r\n\r\nChange wro4j version to 1.9.0, it works for openjdk version &quot;11.0.3&quot; 2019-04-16\r\n\r\n`&lt;wro4j.version&gt;1.9.0&lt;/wro4j.version&gt;`","title":"Spring PetClinic application showing error in pom.xml","body":"<p>In case, someone is facing issue with wro4j for PetClinic application.</p>\n\n<p>Change wro4j version to 1.9.0, it works for openjdk version \"11.0.3\" 2019-04-16</p>\n\n<p><code>&lt;wro4j.version&gt;1.9.0&lt;/wro4j.version&gt;</code></p>\n"},{"tags":[],"owner":{"account_id":6009008,"reputation":17,"user_id":4719987,"display_name":"Salil Kumar"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1664234065,"creation_date":1664234065,"answer_id":73860840,"question_id":52940598,"body_markdown":"We can fix this issue by simply run the below command from terminal/command prompt:\r\n mvn spring-javaformat:apply","title":"Spring PetClinic application showing error in pom.xml","body":"<p>We can fix this issue by simply run the below command from terminal/command prompt:\nmvn spring-javaformat:apply</p>\n"}],"owner":{"account_id":5350300,"reputation":740,"user_id":4264590,"accept_rate":62,"display_name":"John"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1771,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":4,"score":1,"last_activity_date":1664234065,"creation_date":1540264344,"question_id":52940598,"body_markdown":"I have imported the Spring PetClinic application but it is showing error in pom.xml. I have force updated Maven but still the problem persists. The error is as follows:-\r\n\r\n  Failed to execute goal on project spring-petclinic: Could not resolve dependencies \r\n    for project org.springframework.samples:spring-petclinic:jar:2.1.0.BUILD-SNAPSHOT: \r\n    Failed to collect dependencies at org.springframework.boot:spring-boot-starter-thymeleaf:jar:2.1.0.BUILD-SNAPSHOT \r\n    -&gt; org.thymeleaf:thymeleaf-spring5:jar:3.0.10.RELEASE (ro.isdc.wro4j:wro4j-\r\n    maven-plugin:1.8.0:run:default:generate-resources)\r\n\r\nThe pom.xml is given below. The error is shown in the execution tag under groupId ro.isdc.wro4j.\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n    &lt;project xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n      xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot;\r\n      xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd&quot;&gt;\r\n      &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n      &lt;groupId&gt;org.springframework.samples&lt;/groupId&gt;\r\n      &lt;artifactId&gt;spring-petclinic&lt;/artifactId&gt;\r\n      &lt;version&gt;2.1.0.BUILD-SNAPSHOT&lt;/version&gt;\r\n    \r\n      &lt;parent&gt;\r\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n        &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\r\n        &lt;version&gt;2.1.0.BUILD-SNAPSHOT&lt;/version&gt;\r\n      &lt;/parent&gt;\r\n      &lt;name&gt;petclinic&lt;/name&gt;\r\n    \r\n      &lt;properties&gt;\r\n    \r\n        &lt;!-- Generic properties --&gt;\r\n        &lt;java.version&gt;1.8&lt;/java.version&gt;\r\n        &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\r\n        &lt;project.reporting.outputEncoding&gt;UTF-8&lt;/project.reporting.outputEncoding&gt;\r\n    \r\n        &lt;!-- Web dependencies --&gt;\r\n        &lt;webjars-bootstrap.version&gt;3.3.6&lt;/webjars-bootstrap.version&gt;\r\n        &lt;webjars-jquery-ui.version&gt;1.11.4&lt;/webjars-jquery-ui.version&gt;\r\n        &lt;webjars-jquery.version&gt;2.2.4&lt;/webjars-jquery.version&gt;\r\n        &lt;wro4j.version&gt;1.8.0&lt;/wro4j.version&gt;\r\n    \r\n        &lt;jacoco.version&gt;0.8.2&lt;/jacoco.version&gt;\r\n    \r\n      &lt;/properties&gt;\r\n    \r\n      &lt;dependencies&gt;\r\n        &lt;!-- Spring and Spring Boot dependencies --&gt;\r\n        &lt;dependency&gt;\r\n          &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n          &lt;artifactId&gt;spring-boot-starter-actuator&lt;/artifactId&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n          &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n          &lt;artifactId&gt;spring-boot-starter-cache&lt;/artifactId&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n          &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n          &lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n          &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n          &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n          &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n          &lt;artifactId&gt;spring-boot-starter-thymeleaf&lt;/artifactId&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n          &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n          &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\r\n          &lt;scope&gt;test&lt;/scope&gt;\r\n        &lt;/dependency&gt;\r\n    \r\n        &lt;!-- Databases - Uses HSQL by default --&gt;\r\n        &lt;dependency&gt;\r\n          &lt;groupId&gt;org.hsqldb&lt;/groupId&gt;\r\n          &lt;artifactId&gt;hsqldb&lt;/artifactId&gt;\r\n          &lt;scope&gt;runtime&lt;/scope&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n          &lt;groupId&gt;mysql&lt;/groupId&gt;\r\n          &lt;artifactId&gt;mysql-connector-java&lt;/artifactId&gt;\r\n          &lt;scope&gt;runtime&lt;/scope&gt;\r\n        &lt;/dependency&gt;    \r\n    \r\n        &lt;dependency&gt;\r\n          &lt;groupId&gt;org.webjars&lt;/groupId&gt;\r\n          &lt;artifactId&gt;webjars-locator-core&lt;/artifactId&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n          &lt;groupId&gt;org.webjars&lt;/groupId&gt;\r\n          &lt;artifactId&gt;jquery&lt;/artifactId&gt;\r\n          &lt;version&gt;${webjars-jquery.version}&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n          &lt;groupId&gt;org.webjars&lt;/groupId&gt;\r\n          &lt;artifactId&gt;jquery-ui&lt;/artifactId&gt;\r\n          &lt;version&gt;${webjars-jquery-ui.version}&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n          &lt;groupId&gt;org.webjars&lt;/groupId&gt;\r\n          &lt;artifactId&gt;bootstrap&lt;/artifactId&gt;\r\n          &lt;version&gt;${webjars-bootstrap.version}&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;!-- end of webjars --&gt;\r\n    \r\n        &lt;dependency&gt;\r\n          &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n          &lt;artifactId&gt;spring-boot-devtools&lt;/artifactId&gt;\r\n          &lt;optional&gt;true&lt;/optional&gt;\r\n        &lt;/dependency&gt;\r\n      &lt;/dependencies&gt;\r\n    \r\n      &lt;build&gt;\r\n        &lt;plugins&gt;\r\n          &lt;plugin&gt;\r\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n            &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\r\n            &lt;executions&gt;\r\n              &lt;execution&gt;\r\n                &lt;!-- Spring Boot Actuator displays build-related information\r\n                  if a META-INF/build-info.properties file is present --&gt;\r\n                &lt;goals&gt;\r\n                  &lt;goal&gt;build-info&lt;/goal&gt;\r\n                &lt;/goals&gt;\r\n                &lt;configuration&gt;\r\n                  &lt;additionalProperties&gt;\r\n                    &lt;encoding.source&gt;${project.build.sourceEncoding}&lt;/encoding.source&gt;\r\n                    &lt;encoding.reporting&gt;${project.reporting.outputEncoding}&lt;/encoding.reporting&gt;\r\n                    &lt;java.source&gt;${maven.compiler.source}&lt;/java.source&gt;\r\n                    &lt;java.target&gt;${maven.compiler.target}&lt;/java.target&gt;\r\n                  &lt;/additionalProperties&gt;\r\n                &lt;/configuration&gt;\r\n              &lt;/execution&gt;\r\n            &lt;/executions&gt;\r\n          &lt;/plugin&gt;\r\n          &lt;plugin&gt;\r\n            &lt;groupId&gt;org.jacoco&lt;/groupId&gt;\r\n            &lt;artifactId&gt;jacoco-maven-plugin&lt;/artifactId&gt;\r\n            &lt;version&gt;${jacoco.version}&lt;/version&gt;\r\n            &lt;executions&gt;\r\n              &lt;execution&gt;\r\n                &lt;goals&gt;\r\n                  &lt;goal&gt;prepare-agent&lt;/goal&gt;\r\n                &lt;/goals&gt;\r\n              &lt;/execution&gt;\r\n              &lt;execution&gt;\r\n                &lt;id&gt;report&lt;/id&gt;\r\n                &lt;phase&gt;prepare-package&lt;/phase&gt;\r\n                &lt;goals&gt;\r\n                  &lt;goal&gt;report&lt;/goal&gt;\r\n                &lt;/goals&gt;\r\n              &lt;/execution&gt;\r\n            &lt;/executions&gt;\r\n          &lt;/plugin&gt;\r\n    \r\n          &lt;!-- Spring Boot Actuator displays build-related information if a git.properties\r\n            file is present at the classpath --&gt;\r\n          &lt;plugin&gt;\r\n            &lt;groupId&gt;pl.project13.maven&lt;/groupId&gt;\r\n            &lt;artifactId&gt;git-commit-id-plugin&lt;/artifactId&gt;\r\n            &lt;executions&gt;\r\n              &lt;execution&gt;\r\n                &lt;goals&gt;\r\n                  &lt;goal&gt;revision&lt;/goal&gt;\r\n                &lt;/goals&gt;\r\n              &lt;/execution&gt;\r\n            &lt;/executions&gt;\r\n            &lt;configuration&gt;\r\n              &lt;verbose&gt;true&lt;/verbose&gt;\r\n              &lt;dateFormat&gt;yyyy-MM-dd&#39;T&#39;HH:mm:ssZ&lt;/dateFormat&gt;\r\n              &lt;generateGitPropertiesFile&gt;true&lt;/generateGitPropertiesFile&gt;\r\n              &lt;generateGitPropertiesFilename&gt;${project.build.outputDirectory}/git.properties\r\n              &lt;/generateGitPropertiesFilename&gt;\r\n              &lt;failOnNoGitDirectory&gt;false&lt;/failOnNoGitDirectory&gt;\r\n            &lt;/configuration&gt;\r\n          &lt;/plugin&gt;\r\n    \r\n          &lt;plugin&gt;\r\n            &lt;groupId&gt;ro.isdc.wro4j&lt;/groupId&gt;\r\n            &lt;artifactId&gt;wro4j-maven-plugin&lt;/artifactId&gt;\r\n            &lt;version&gt;${wro4j.version}&lt;/version&gt;\r\n            &lt;executions&gt;\r\n              &lt;execution&gt;\r\n                &lt;phase&gt;generate-resources&lt;/phase&gt;\r\n                &lt;goals&gt;\r\n                  &lt;goal&gt;run&lt;/goal&gt;\r\n                &lt;/goals&gt;\r\n              &lt;/execution&gt;\r\n            &lt;/executions&gt;\r\n            &lt;configuration&gt;\r\n              &lt;wroManagerFactory&gt;ro.isdc.wro.maven.plugin.manager.factory.ConfigurableWroManagerFactory&lt;/wroManagerFactory&gt;\r\n              &lt;cssDestinationFolder&gt;${project.build.directory}/classes/static/resources/css&lt;/cssDestinationFolder&gt;\r\n              &lt;wroFile&gt;${basedir}/src/main/wro/wro.xml&lt;/wroFile&gt;\r\n              &lt;extraConfigFile&gt;${basedir}/src/main/wro/wro.properties&lt;/extraConfigFile&gt;\r\n              &lt;contextFolder&gt;${basedir}/src/main/less&lt;/contextFolder&gt;\r\n            &lt;/configuration&gt;\r\n            &lt;dependencies&gt;\r\n              &lt;dependency&gt;\r\n                &lt;groupId&gt;org.webjars&lt;/groupId&gt;\r\n                &lt;artifactId&gt;bootstrap&lt;/artifactId&gt;\r\n                &lt;version&gt;${webjars-bootstrap.version}&lt;/version&gt;\r\n              &lt;/dependency&gt;\r\n              &lt;dependency&gt;\r\n                &lt;groupId&gt;org.mockito&lt;/groupId&gt;\r\n                &lt;artifactId&gt;mockito-core&lt;/artifactId&gt;\r\n                &lt;version&gt;${mockito.version}&lt;/version&gt;\r\n              &lt;/dependency&gt;\r\n            &lt;/dependencies&gt;\r\n          &lt;/plugin&gt;\r\n        &lt;/plugins&gt;\r\n      &lt;/build&gt;\r\n          \r\n      &lt;repositories&gt;\r\n        &lt;repository&gt;\r\n          &lt;id&gt;spring-snapshots&lt;/id&gt;\r\n          &lt;name&gt;Spring Snapshots&lt;/name&gt;\r\n          &lt;url&gt;https://repo.spring.io/snapshot&lt;/url&gt;\r\n          &lt;snapshots&gt;\r\n            &lt;enabled&gt;true&lt;/enabled&gt;\r\n          &lt;/snapshots&gt;\r\n        &lt;/repository&gt;\r\n        &lt;repository&gt;\r\n          &lt;id&gt;spring-milestones&lt;/id&gt;\r\n          &lt;name&gt;Spring Milestones&lt;/name&gt;\r\n          &lt;url&gt;https://repo.spring.io/milestone&lt;/url&gt;\r\n          &lt;snapshots&gt;\r\n            &lt;enabled&gt;false&lt;/enabled&gt;\r\n          &lt;/snapshots&gt;\r\n        &lt;/repository&gt;\r\n      &lt;/repositories&gt;\r\n    \r\n      &lt;pluginRepositories&gt;\r\n        &lt;pluginRepository&gt;\r\n          &lt;id&gt;spring-snapshots&lt;/id&gt;\r\n          &lt;name&gt;Spring Snapshots&lt;/name&gt;\r\n          &lt;url&gt;https://repo.spring.io/snapshot&lt;/url&gt;\r\n          &lt;snapshots&gt;\r\n            &lt;enabled&gt;true&lt;/enabled&gt;\r\n          &lt;/snapshots&gt;\r\n        &lt;/pluginRepository&gt;\r\n        &lt;pluginRepository&gt;\r\n          &lt;id&gt;spring-milestones&lt;/id&gt;\r\n          &lt;name&gt;Spring Milestones&lt;/name&gt;\r\n          &lt;url&gt;https://repo.spring.io/milestone&lt;/url&gt;\r\n          &lt;snapshots&gt;\r\n            &lt;enabled&gt;false&lt;/enabled&gt;\r\n          &lt;/snapshots&gt;\r\n        &lt;/pluginRepository&gt;\r\n      &lt;/pluginRepositories&gt;    \r\n    &lt;/project&gt;\r\n\r\n","title":"Spring PetClinic application showing error in pom.xml","body":"<p>I have imported the Spring PetClinic application but it is showing error in pom.xml. I have force updated Maven but still the problem persists. The error is as follows:-</p>\n\n<p>Failed to execute goal on project spring-petclinic: Could not resolve dependencies \n    for project org.springframework.samples:spring-petclinic:jar:2.1.0.BUILD-SNAPSHOT: \n    Failed to collect dependencies at org.springframework.boot:spring-boot-starter-thymeleaf:jar:2.1.0.BUILD-SNAPSHOT \n    -> org.thymeleaf:thymeleaf-spring5:jar:3.0.10.RELEASE (ro.isdc.wro4j:wro4j-\n    maven-plugin:1.8.0:run:default:generate-resources)</p>\n\n<p>The pom.xml is given below. The error is shown in the execution tag under groupId ro.isdc.wro4j.</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;project xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n  xmlns=\"http://maven.apache.org/POM/4.0.0\"\n  xsi:schemaLocation=\"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd\"&gt;\n  &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n  &lt;groupId&gt;org.springframework.samples&lt;/groupId&gt;\n  &lt;artifactId&gt;spring-petclinic&lt;/artifactId&gt;\n  &lt;version&gt;2.1.0.BUILD-SNAPSHOT&lt;/version&gt;\n\n  &lt;parent&gt;\n    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n    &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\n    &lt;version&gt;2.1.0.BUILD-SNAPSHOT&lt;/version&gt;\n  &lt;/parent&gt;\n  &lt;name&gt;petclinic&lt;/name&gt;\n\n  &lt;properties&gt;\n\n    &lt;!-- Generic properties --&gt;\n    &lt;java.version&gt;1.8&lt;/java.version&gt;\n    &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\n    &lt;project.reporting.outputEncoding&gt;UTF-8&lt;/project.reporting.outputEncoding&gt;\n\n    &lt;!-- Web dependencies --&gt;\n    &lt;webjars-bootstrap.version&gt;3.3.6&lt;/webjars-bootstrap.version&gt;\n    &lt;webjars-jquery-ui.version&gt;1.11.4&lt;/webjars-jquery-ui.version&gt;\n    &lt;webjars-jquery.version&gt;2.2.4&lt;/webjars-jquery.version&gt;\n    &lt;wro4j.version&gt;1.8.0&lt;/wro4j.version&gt;\n\n    &lt;jacoco.version&gt;0.8.2&lt;/jacoco.version&gt;\n\n  &lt;/properties&gt;\n\n  &lt;dependencies&gt;\n    &lt;!-- Spring and Spring Boot dependencies --&gt;\n    &lt;dependency&gt;\n      &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n      &lt;artifactId&gt;spring-boot-starter-actuator&lt;/artifactId&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n      &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n      &lt;artifactId&gt;spring-boot-starter-cache&lt;/artifactId&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n      &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n      &lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n      &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n      &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n      &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n      &lt;artifactId&gt;spring-boot-starter-thymeleaf&lt;/artifactId&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n      &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n      &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\n      &lt;scope&gt;test&lt;/scope&gt;\n    &lt;/dependency&gt;\n\n    &lt;!-- Databases - Uses HSQL by default --&gt;\n    &lt;dependency&gt;\n      &lt;groupId&gt;org.hsqldb&lt;/groupId&gt;\n      &lt;artifactId&gt;hsqldb&lt;/artifactId&gt;\n      &lt;scope&gt;runtime&lt;/scope&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n      &lt;groupId&gt;mysql&lt;/groupId&gt;\n      &lt;artifactId&gt;mysql-connector-java&lt;/artifactId&gt;\n      &lt;scope&gt;runtime&lt;/scope&gt;\n    &lt;/dependency&gt;    \n\n    &lt;dependency&gt;\n      &lt;groupId&gt;org.webjars&lt;/groupId&gt;\n      &lt;artifactId&gt;webjars-locator-core&lt;/artifactId&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n      &lt;groupId&gt;org.webjars&lt;/groupId&gt;\n      &lt;artifactId&gt;jquery&lt;/artifactId&gt;\n      &lt;version&gt;${webjars-jquery.version}&lt;/version&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n      &lt;groupId&gt;org.webjars&lt;/groupId&gt;\n      &lt;artifactId&gt;jquery-ui&lt;/artifactId&gt;\n      &lt;version&gt;${webjars-jquery-ui.version}&lt;/version&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n      &lt;groupId&gt;org.webjars&lt;/groupId&gt;\n      &lt;artifactId&gt;bootstrap&lt;/artifactId&gt;\n      &lt;version&gt;${webjars-bootstrap.version}&lt;/version&gt;\n    &lt;/dependency&gt;\n    &lt;!-- end of webjars --&gt;\n\n    &lt;dependency&gt;\n      &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n      &lt;artifactId&gt;spring-boot-devtools&lt;/artifactId&gt;\n      &lt;optional&gt;true&lt;/optional&gt;\n    &lt;/dependency&gt;\n  &lt;/dependencies&gt;\n\n  &lt;build&gt;\n    &lt;plugins&gt;\n      &lt;plugin&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\n        &lt;executions&gt;\n          &lt;execution&gt;\n            &lt;!-- Spring Boot Actuator displays build-related information\n              if a META-INF/build-info.properties file is present --&gt;\n            &lt;goals&gt;\n              &lt;goal&gt;build-info&lt;/goal&gt;\n            &lt;/goals&gt;\n            &lt;configuration&gt;\n              &lt;additionalProperties&gt;\n                &lt;encoding.source&gt;${project.build.sourceEncoding}&lt;/encoding.source&gt;\n                &lt;encoding.reporting&gt;${project.reporting.outputEncoding}&lt;/encoding.reporting&gt;\n                &lt;java.source&gt;${maven.compiler.source}&lt;/java.source&gt;\n                &lt;java.target&gt;${maven.compiler.target}&lt;/java.target&gt;\n              &lt;/additionalProperties&gt;\n            &lt;/configuration&gt;\n          &lt;/execution&gt;\n        &lt;/executions&gt;\n      &lt;/plugin&gt;\n      &lt;plugin&gt;\n        &lt;groupId&gt;org.jacoco&lt;/groupId&gt;\n        &lt;artifactId&gt;jacoco-maven-plugin&lt;/artifactId&gt;\n        &lt;version&gt;${jacoco.version}&lt;/version&gt;\n        &lt;executions&gt;\n          &lt;execution&gt;\n            &lt;goals&gt;\n              &lt;goal&gt;prepare-agent&lt;/goal&gt;\n            &lt;/goals&gt;\n          &lt;/execution&gt;\n          &lt;execution&gt;\n            &lt;id&gt;report&lt;/id&gt;\n            &lt;phase&gt;prepare-package&lt;/phase&gt;\n            &lt;goals&gt;\n              &lt;goal&gt;report&lt;/goal&gt;\n            &lt;/goals&gt;\n          &lt;/execution&gt;\n        &lt;/executions&gt;\n      &lt;/plugin&gt;\n\n      &lt;!-- Spring Boot Actuator displays build-related information if a git.properties\n        file is present at the classpath --&gt;\n      &lt;plugin&gt;\n        &lt;groupId&gt;pl.project13.maven&lt;/groupId&gt;\n        &lt;artifactId&gt;git-commit-id-plugin&lt;/artifactId&gt;\n        &lt;executions&gt;\n          &lt;execution&gt;\n            &lt;goals&gt;\n              &lt;goal&gt;revision&lt;/goal&gt;\n            &lt;/goals&gt;\n          &lt;/execution&gt;\n        &lt;/executions&gt;\n        &lt;configuration&gt;\n          &lt;verbose&gt;true&lt;/verbose&gt;\n          &lt;dateFormat&gt;yyyy-MM-dd'T'HH:mm:ssZ&lt;/dateFormat&gt;\n          &lt;generateGitPropertiesFile&gt;true&lt;/generateGitPropertiesFile&gt;\n          &lt;generateGitPropertiesFilename&gt;${project.build.outputDirectory}/git.properties\n          &lt;/generateGitPropertiesFilename&gt;\n          &lt;failOnNoGitDirectory&gt;false&lt;/failOnNoGitDirectory&gt;\n        &lt;/configuration&gt;\n      &lt;/plugin&gt;\n\n      &lt;plugin&gt;\n        &lt;groupId&gt;ro.isdc.wro4j&lt;/groupId&gt;\n        &lt;artifactId&gt;wro4j-maven-plugin&lt;/artifactId&gt;\n        &lt;version&gt;${wro4j.version}&lt;/version&gt;\n        &lt;executions&gt;\n          &lt;execution&gt;\n            &lt;phase&gt;generate-resources&lt;/phase&gt;\n            &lt;goals&gt;\n              &lt;goal&gt;run&lt;/goal&gt;\n            &lt;/goals&gt;\n          &lt;/execution&gt;\n        &lt;/executions&gt;\n        &lt;configuration&gt;\n          &lt;wroManagerFactory&gt;ro.isdc.wro.maven.plugin.manager.factory.ConfigurableWroManagerFactory&lt;/wroManagerFactory&gt;\n          &lt;cssDestinationFolder&gt;${project.build.directory}/classes/static/resources/css&lt;/cssDestinationFolder&gt;\n          &lt;wroFile&gt;${basedir}/src/main/wro/wro.xml&lt;/wroFile&gt;\n          &lt;extraConfigFile&gt;${basedir}/src/main/wro/wro.properties&lt;/extraConfigFile&gt;\n          &lt;contextFolder&gt;${basedir}/src/main/less&lt;/contextFolder&gt;\n        &lt;/configuration&gt;\n        &lt;dependencies&gt;\n          &lt;dependency&gt;\n            &lt;groupId&gt;org.webjars&lt;/groupId&gt;\n            &lt;artifactId&gt;bootstrap&lt;/artifactId&gt;\n            &lt;version&gt;${webjars-bootstrap.version}&lt;/version&gt;\n          &lt;/dependency&gt;\n          &lt;dependency&gt;\n            &lt;groupId&gt;org.mockito&lt;/groupId&gt;\n            &lt;artifactId&gt;mockito-core&lt;/artifactId&gt;\n            &lt;version&gt;${mockito.version}&lt;/version&gt;\n          &lt;/dependency&gt;\n        &lt;/dependencies&gt;\n      &lt;/plugin&gt;\n    &lt;/plugins&gt;\n  &lt;/build&gt;\n\n  &lt;repositories&gt;\n    &lt;repository&gt;\n      &lt;id&gt;spring-snapshots&lt;/id&gt;\n      &lt;name&gt;Spring Snapshots&lt;/name&gt;\n      &lt;url&gt;https://repo.spring.io/snapshot&lt;/url&gt;\n      &lt;snapshots&gt;\n        &lt;enabled&gt;true&lt;/enabled&gt;\n      &lt;/snapshots&gt;\n    &lt;/repository&gt;\n    &lt;repository&gt;\n      &lt;id&gt;spring-milestones&lt;/id&gt;\n      &lt;name&gt;Spring Milestones&lt;/name&gt;\n      &lt;url&gt;https://repo.spring.io/milestone&lt;/url&gt;\n      &lt;snapshots&gt;\n        &lt;enabled&gt;false&lt;/enabled&gt;\n      &lt;/snapshots&gt;\n    &lt;/repository&gt;\n  &lt;/repositories&gt;\n\n  &lt;pluginRepositories&gt;\n    &lt;pluginRepository&gt;\n      &lt;id&gt;spring-snapshots&lt;/id&gt;\n      &lt;name&gt;Spring Snapshots&lt;/name&gt;\n      &lt;url&gt;https://repo.spring.io/snapshot&lt;/url&gt;\n      &lt;snapshots&gt;\n        &lt;enabled&gt;true&lt;/enabled&gt;\n      &lt;/snapshots&gt;\n    &lt;/pluginRepository&gt;\n    &lt;pluginRepository&gt;\n      &lt;id&gt;spring-milestones&lt;/id&gt;\n      &lt;name&gt;Spring Milestones&lt;/name&gt;\n      &lt;url&gt;https://repo.spring.io/milestone&lt;/url&gt;\n      &lt;snapshots&gt;\n        &lt;enabled&gt;false&lt;/enabled&gt;\n      &lt;/snapshots&gt;\n    &lt;/pluginRepository&gt;\n  &lt;/pluginRepositories&gt;    \n&lt;/project&gt;\n</code></pre>\n"},{"tags":["java","ssl","ssl-certificate","x509certificate","x509"],"comments":[{"owner":{"account_id":8493198,"reputation":11341,"user_id":6368697,"display_name":"Patrick Mevzek"},"score":0,"creation_date":1664202829,"post_id":73855531,"comment_id":130411272,"body_markdown":"FWIW the rules to apply to check names are in https://www.rfc-editor.org/rfc/rfc5280#section-7 with updates in https://www.rfc-editor.org/rfc/rfc8399#section-2.3 with everything detailed and summarized in https://www.rfc-editor.org/rfc/rfc6125 which is well required reading, with specific text for wildcards (&#167;6.4.3)","body":"FWIW the rules to apply to check names are in <a href=\"https://www.rfc-editor.org/rfc/rfc5280#section-7\" rel=\"nofollow noreferrer\">rfc-editor.org/rfc/rfc5280#section-7</a> with updates in <a href=\"https://www.rfc-editor.org/rfc/rfc8399#section-2.3\" rel=\"nofollow noreferrer\">rfc-editor.org/rfc/rfc8399#section-2.3</a> with everything detailed and summarized in <a href=\"https://www.rfc-editor.org/rfc/rfc6125\" rel=\"nofollow noreferrer\">rfc-editor.org/rfc/rfc6125</a> which is well required reading, with specific text for wildcards (&#167;6.4.3)"}],"answers":[{"tags":[],"owner":{"account_id":3421244,"reputation":35863,"user_id":2868801,"display_name":"dave_thompson_085"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1664232030,"creation_date":1664232030,"answer_id":73860642,"question_id":73855531,"body_markdown":"In Java 7 up the TrustManager&#39;s created by TrustManagerFactory do hostname checking if (and only if) an &#39;endpoint identification&#39; algorithm is set for the particular _connection_ being made (more exactly, the `SSLSocket` or `SSLEngine`), see [here for socket](https://github.com/openjdk/jdk/blob/jdk-11+28/src/java.base/share/classes/sun/security/ssl/X509TrustManagerImpl.java#L230) and [here for engine](https://github.com/openjdk/jdk/blob/jdk-11+28/src/java.base/share/classes/sun/security/ssl/X509TrustManagerImpl.java#L288). The [supported algorithms HTTPS and LDAPS](https://docs.oracle.com/en/java/javase/11/docs/api/java.base/javax/net/ssl/X509ExtendedTrustManager.html) are actually implemented [here](https://github.com/openjdk/jdk/blob/master/src/java.base/share/classes/sun/security/util/HostnameChecker.java) (with HTTPS internally called TLS) which you can see handles valid wildcards (only in DNS name, not IP address) but rejects invalid ones.\r\n\r\nHttpsURLConnection and 11-up java.net.http.HttpClient use the &#39;HTTPS&#39; algorithm. For other ways of invoking JSSE, either your code or the relevant middleware must set endpoint-id if you want it done. ","title":"Default X509TrustManager and wildcard hostname validation?","body":"<p>In Java 7 up the TrustManager's created by TrustManagerFactory do hostname checking if (and only if) an 'endpoint identification' algorithm is set for the particular <em>connection</em> being made (more exactly, the <code>SSLSocket</code> or <code>SSLEngine</code>), see <a href=\"https://github.com/openjdk/jdk/blob/jdk-11+28/src/java.base/share/classes/sun/security/ssl/X509TrustManagerImpl.java#L230\" rel=\"nofollow noreferrer\">here for socket</a> and <a href=\"https://github.com/openjdk/jdk/blob/jdk-11+28/src/java.base/share/classes/sun/security/ssl/X509TrustManagerImpl.java#L288\" rel=\"nofollow noreferrer\">here for engine</a>. The <a href=\"https://docs.oracle.com/en/java/javase/11/docs/api/java.base/javax/net/ssl/X509ExtendedTrustManager.html\" rel=\"nofollow noreferrer\">supported algorithms HTTPS and LDAPS</a> are actually implemented <a href=\"https://github.com/openjdk/jdk/blob/master/src/java.base/share/classes/sun/security/util/HostnameChecker.java\" rel=\"nofollow noreferrer\">here</a> (with HTTPS internally called TLS) which you can see handles valid wildcards (only in DNS name, not IP address) but rejects invalid ones.</p>\n<p>HttpsURLConnection and 11-up java.net.http.HttpClient use the 'HTTPS' algorithm. For other ways of invoking JSSE, either your code or the relevant middleware must set endpoint-id if you want it done.</p>\n"}],"owner":{"account_id":1536635,"reputation":5711,"user_id":1432503,"accept_rate":43,"display_name":"Zed"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":285,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1664232030,"creation_date":1664202044,"question_id":73855531,"body_markdown":"I am constructing a default X509TrustManager that&#39;s gonna be used for hostname validations:\r\n\r\n            TrustManagerFactory trustManagerFactory = null;\r\n        try {\r\n            trustManagerFactory = TrustManagerFactory.getInstance(TrustManagerFactory.getDefaultAlgorithm());\r\n            trustManagerFactory.init((KeyStore) null);\r\n            TrustManager[] trustManagers = trustManagerFactory.getTrustManagers();\r\n\r\n            for (int i = 0; i &lt; trustManagers.length; i++) {\r\n                TrustManager t = trustManagers[i];\r\n                if (t instanceof X509TrustManager) {\r\n                    this.defaultTrustManager = (X509TrustManager) t;\r\n                    return;\r\n                }\r\n            }\r\n        } catch (NoSuchAlgorithmException | KeyStoreException e) {\r\n            throw new CelleryCellSTSException(&quot;Error while setting trust manager&quot;, e);\r\n        }\r\n\r\nHowever, I can&#39;t find out anywhere if this is gonna support wildcard certificates as well or do I need to build a custom trust manager just for that ? Is there any documentation somewhere available on this, I would like to read more how wildcard validation really works if it supported ? I&#39;m using java 8 and 11, thanks. ","title":"Default X509TrustManager and wildcard hostname validation?","body":"<p>I am constructing a default X509TrustManager that's gonna be used for hostname validations:</p>\n<pre><code>        TrustManagerFactory trustManagerFactory = null;\n    try {\n        trustManagerFactory = TrustManagerFactory.getInstance(TrustManagerFactory.getDefaultAlgorithm());\n        trustManagerFactory.init((KeyStore) null);\n        TrustManager[] trustManagers = trustManagerFactory.getTrustManagers();\n\n        for (int i = 0; i &lt; trustManagers.length; i++) {\n            TrustManager t = trustManagers[i];\n            if (t instanceof X509TrustManager) {\n                this.defaultTrustManager = (X509TrustManager) t;\n                return;\n            }\n        }\n    } catch (NoSuchAlgorithmException | KeyStoreException e) {\n        throw new CelleryCellSTSException(&quot;Error while setting trust manager&quot;, e);\n    }\n</code></pre>\n<p>However, I can't find out anywhere if this is gonna support wildcard certificates as well or do I need to build a custom trust manager just for that ? Is there any documentation somewhere available on this, I would like to read more how wildcard validation really works if it supported ? I'm using java 8 and 11, thanks.</p>\n"},{"tags":["java","oop","iterator","singly-linked-list"],"comments":[{"owner":{"account_id":465573,"reputation":192694,"user_id":869736,"accept_rate":82,"display_name":"Louis Wasserman"},"score":1,"creation_date":1664233807,"post_id":73860556,"comment_id":130420099,"body_markdown":"Is this a homework assignment, or is there a reason you&#39;re not using one of the pre-built list types?","body":"Is this a homework assignment, or is there a reason you&#39;re not using one of the pre-built list types?"}],"answers":[{"tags":[],"owner":{"account_id":476019,"reputation":14699,"user_id":886697,"accept_rate":92,"display_name":"Stanislav Bashkyrtsev"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1664231924,"creation_date":1664231924,"answer_id":73860632,"question_id":73860556,"body_markdown":"Here you create a new iterator each time the method is invoked:\r\n\r\n        public Warrior next() {\r\n            ...\r\n            return iterator().next();\r\n        }\r\n\r\nYou should either store this iterator somewhere and keep iterating using it. Or implement Linked List differently, e.g. by storing next Warrior right in the current one.","title":"Why my Iterator in singly linked list always returns same first value","body":"<p>Here you create a new iterator each time the method is invoked:</p>\n<pre><code>    public Warrior next() {\n        ...\n        return iterator().next();\n    }\n</code></pre>\n<p>You should either store this iterator somewhere and keep iterating using it. Or implement Linked List differently, e.g. by storing next Warrior right in the current one.</p>\n"}],"owner":{"account_id":26338497,"reputation":15,"user_id":19997982,"display_name":"Fellou98"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":58,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1664231924,"creation_date":1664231213,"question_id":73860556,"body_markdown":"So i have to implement logic to some kind of game where we add units to armies and they can fight. Right now i created new game character named Dragon. Dragon has to do mass damage to every single unit in opposite army every 3 rounds. I can&#39;t resolve why my iterator always returns same element so instead of hitting every single unit i hit X times only the first one. There is my code \r\n\r\nHit method in Dragon class implementation:\r\n```\r\n  @Override\r\n    public void hit(CanReceiveDamage opponent) {\r\n        rounds++;\r\n        if(opponent instanceof ArmyWarrior armyUnit &amp;&amp; rounds==3){\r\n                if(armyUnit.hasNext()) {\r\n                    armyUnit.next().receiveDamage(() -&gt; FIRE_BREATH_MASS_DAMAGE);\r\n                }\r\n        }\r\n    }\r\n```\r\n\r\nInterface ArmyWarrior:\r\n```\r\npublic interface ArmyWarrior {\r\n    Warrior getWarriorBehind();\r\n    Warrior next();\r\n    boolean hasNext();\r\n\r\n}\r\n```\r\n\r\n```getWarriorBehind()``` method works perfectly fine with this implementation:\r\n\r\n``` \r\n@Override\r\n        public Warrior getWarriorBehind() {\r\n\r\n            return next == head ? null : next.warrior;\r\n        }\r\n```\r\n \r\n\r\n\r\nArmy class and nested Node class:\r\n```\r\npublic class Army implements Iterable&lt;Warrior&gt; {\r\n\r\n private class Node extends Warrior implements ArmyWarrior, IHealer {\r\n        Warrior warrior;\r\n        Node next;\r\n\r\n        public Node(Warrior warrior) {\r\n            this.warrior = warrior;\r\n            this.next = this;\r\n        }\r\n\r\n @Override\r\n        public Warrior next() {\r\n            if(!hasNext()){\r\n                throw new NoSuchElementException();\r\n            }\r\n            return iterator().next();\r\n        }\r\n\r\n        @Override\r\n        public boolean hasNext() {\r\n            if(next!=head){\r\n                return true;\r\n            }\r\n            return false;\r\n        }\r\n```\r\n\r\nAnd my iterator:\r\n```\r\npublic Iterator&lt;Warrior&gt; iterator() {\r\n        return new SimpleIterator();\r\n    }\r\n\r\nprivate class SimpleIterator implements Iterator&lt;Warrior&gt; {\r\n\r\n        Node cursor = head;\r\n\r\n\r\n        @Override\r\n        public boolean hasNext() {\r\n            return cursor.next != head;\r\n        }\r\n\r\n        @Override\r\n        public Warrior next() {\r\n            if (!hasNext()) {\r\n                throw new NoSuchElementException();\r\n            }\r\n\r\n            return cursor.next;\r\n        }\r\n\r\n\r\n    }\r\n```\r\n\r\nNo matter how hard i try and how many different approaches i tried, nothing seems to work as it should, need some help","title":"Why my Iterator in singly linked list always returns same first value","body":"<p>So i have to implement logic to some kind of game where we add units to armies and they can fight. Right now i created new game character named Dragon. Dragon has to do mass damage to every single unit in opposite army every 3 rounds. I can't resolve why my iterator always returns same element so instead of hitting every single unit i hit X times only the first one. There is my code</p>\n<p>Hit method in Dragon class implementation:</p>\n<pre><code>  @Override\n    public void hit(CanReceiveDamage opponent) {\n        rounds++;\n        if(opponent instanceof ArmyWarrior armyUnit &amp;&amp; rounds==3){\n                if(armyUnit.hasNext()) {\n                    armyUnit.next().receiveDamage(() -&gt; FIRE_BREATH_MASS_DAMAGE);\n                }\n        }\n    }\n</code></pre>\n<p>Interface ArmyWarrior:</p>\n<pre><code>public interface ArmyWarrior {\n    Warrior getWarriorBehind();\n    Warrior next();\n    boolean hasNext();\n\n}\n</code></pre>\n<p><code>getWarriorBehind()</code> method works perfectly fine with this implementation:</p>\n<pre><code>@Override\n        public Warrior getWarriorBehind() {\n\n            return next == head ? null : next.warrior;\n        }\n</code></pre>\n<p>Army class and nested Node class:</p>\n<pre><code>public class Army implements Iterable&lt;Warrior&gt; {\n\n private class Node extends Warrior implements ArmyWarrior, IHealer {\n        Warrior warrior;\n        Node next;\n\n        public Node(Warrior warrior) {\n            this.warrior = warrior;\n            this.next = this;\n        }\n\n @Override\n        public Warrior next() {\n            if(!hasNext()){\n                throw new NoSuchElementException();\n            }\n            return iterator().next();\n        }\n\n        @Override\n        public boolean hasNext() {\n            if(next!=head){\n                return true;\n            }\n            return false;\n        }\n</code></pre>\n<p>And my iterator:</p>\n<pre><code>public Iterator&lt;Warrior&gt; iterator() {\n        return new SimpleIterator();\n    }\n\nprivate class SimpleIterator implements Iterator&lt;Warrior&gt; {\n\n        Node cursor = head;\n\n\n        @Override\n        public boolean hasNext() {\n            return cursor.next != head;\n        }\n\n        @Override\n        public Warrior next() {\n            if (!hasNext()) {\n                throw new NoSuchElementException();\n            }\n\n            return cursor.next;\n        }\n\n\n    }\n</code></pre>\n<p>No matter how hard i try and how many different approaches i tried, nothing seems to work as it should, need some help</p>\n"},{"tags":["java","android","date","datetime"],"comments":[{"owner":{"account_id":7612423,"reputation":82486,"user_id":5772882,"display_name":"Anonymous"},"score":1,"creation_date":1664050413,"post_id":73840103,"comment_id":130384324,"body_markdown":"Inclusive? Are 28–29/9 and 29–30/9 both within 28–30/9?","body":"Inclusive? Are 28–29/9 and 29–30/9 both within 28–30/9?"},{"owner":{"account_id":7612423,"reputation":82486,"user_id":5772882,"display_name":"Anonymous"},"score":2,"creation_date":1664050463,"post_id":73840103,"comment_id":130384336,"body_markdown":"I strongly recommend you don’t use `Date`. That class is poorly designed and long outdated. Instead use `LocalDate` from [java.time, the modern Java date and time API](https://docs.oracle.com/javase/tutorial/datetime/).","body":"I strongly recommend you don’t use <code>Date</code>. That class is poorly designed and long outdated. Instead use <code>LocalDate</code> from <a href=\"https://docs.oracle.com/javase/tutorial/datetime/\" rel=\"nofollow noreferrer\">java.time, the modern Java date and time API</a>."},{"owner":{"account_id":10814854,"reputation":4137,"user_id":7954210,"accept_rate":73,"display_name":"Mouaad Abdelghafour AITALI"},"score":0,"creation_date":1664050969,"post_id":73840103,"comment_id":130384434,"body_markdown":"Massive thanks for your help guys, @OleV.V. my apologies I didn&#39;t include the `string2Date` method","body":"Massive thanks for your help guys, @OleV.V. my apologies I didn&#39;t include the <code>string2Date</code> method"},{"owner":{"account_id":10814854,"reputation":4137,"user_id":7954210,"accept_rate":73,"display_name":"Mouaad Abdelghafour AITALI"},"score":0,"creation_date":1664051052,"post_id":73840103,"comment_id":130384447,"body_markdown":"@OleV.V. please check my updated post","body":"@OleV.V. please check my updated post"},{"owner":{"account_id":26301533,"reputation":1119,"user_id":19966820,"display_name":"YJR"},"score":0,"creation_date":1664051137,"post_id":73840103,"comment_id":130384458,"body_markdown":"Does the below answer worked for you?","body":"Does the below answer worked for you?"},{"owner":{"account_id":322981,"reputation":310745,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"score":0,"creation_date":1664063949,"post_id":73840103,"comment_id":130386175,"body_markdown":"`java.util.Date` or `java.sql.Date`?","body":"<code>java.util.Date</code> or <code>java.sql.Date</code>?"},{"owner":{"account_id":7612423,"reputation":82486,"user_id":5772882,"display_name":"Anonymous"},"score":0,"creation_date":1664087219,"post_id":73840103,"comment_id":130388092,"body_markdown":"I seem to get from your comments (that I also pasted into your question) that you want to decline the reservation if there is *an overlap* between the two intervals in question. If the car is already reserved 27–29/9 and the user wants to book it 28–30/9, it should be declined, am I right? Is your situation really more similar to this one? [Determine Whether Two Date Ranges Overlap](https://stackoverflow.com/questions/325933/determine-whether-two-date-ranges-overlap)","body":"I seem to get from your comments (that I also pasted into your question) that you want to decline the reservation if there is <i>an overlap</i> between the two intervals in question. If the car is already reserved 27–29/9 and the user wants to book it 28–30/9, it should be declined, am I right? Is your situation really more similar to this one? <a href=\"https://stackoverflow.com/questions/325933/determine-whether-two-date-ranges-overlap\">Determine Whether Two Date Ranges Overlap</a>"},{"owner":{"account_id":7612423,"reputation":82486,"user_id":5772882,"display_name":"Anonymous"},"score":1,"creation_date":1664087663,"post_id":73840103,"comment_id":130388136,"body_markdown":"You are really making it unnecessarily complicated for yourself and for us by using the poorly designed and obsolete `Date` class. Now I get *DateUtils cannot be resolved* at `DateUtils.isSameDay(selectedDate, endDate)`. I was curious to debug your code and discover what went wrong, but I am giving up now.","body":"You are really making it unnecessarily complicated for yourself and for us by using the poorly designed and obsolete <code>Date</code> class. Now I get <i>DateUtils cannot be resolved</i> at <code>DateUtils.isSameDay(selectedDate, endDate)</code>. I was curious to debug your code and discover what went wrong, but I am giving up now."}],"answers":[{"tags":[],"owner":{"account_id":26301533,"reputation":1119,"user_id":19966820,"display_name":"YJR"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1664053142,"creation_date":1664049308,"answer_id":73840201,"question_id":73840103,"body_markdown":"  Your isWithin range functions operator \r\nPrecedence is wrong.Also checking isSameDate for both end and start dates are missing. In your code it return false if user startDate is simmilar to your dateRange start date or  if user end date simmilar to datarange end date. Correct implementation as follows of isWithinRange function.\r\n\r\n  \r\n\r\n    return (selectedDate.after(startDate) || DateUtils.isSameDay(selectedDate, startDate)) &amp;&amp; (selectedDate.before(endDate) || DateUtils.isSameDay(selectedDate, endDate));\r\n\r\n\r\nUse || operator not &amp;&amp; for isWithinRange2Dates function as follows.\r\n\r\n    return isWithinRange(selectedStartDate, startDate, endDate) || isWithinRange(selectedEndDate, startDate, endDate);\r\n            ","title":"How to check if a selected date range is within a date range","body":"<p>Your isWithin range functions operator\nPrecedence is wrong.Also checking isSameDate for both end and start dates are missing. In your code it return false if user startDate is simmilar to your dateRange start date or  if user end date simmilar to datarange end date. Correct implementation as follows of isWithinRange function.</p>\n<pre><code>return (selectedDate.after(startDate) || DateUtils.isSameDay(selectedDate, startDate)) &amp;&amp; (selectedDate.before(endDate) || DateUtils.isSameDay(selectedDate, endDate));\n</code></pre>\n<p>Use || operator not &amp;&amp; for isWithinRange2Dates function as follows.</p>\n<pre><code>return isWithinRange(selectedStartDate, startDate, endDate) || isWithinRange(selectedEndDate, startDate, endDate);\n        \n</code></pre>\n"},{"tags":[],"owner":{"account_id":322981,"reputation":310745,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1664230974,"creation_date":1664064353,"answer_id":73841327,"question_id":73840103,"body_markdown":"# tl;dr\r\n\r\n    org.threeten.extra.LocalDateRange.of\r\n    (\r\n        LocalDate.of( … ) ,\r\n        LocalDate.of( … )\r\n    ) \r\n    .encloses\r\n    (\r\n        LocalDateRange.of\r\n        (\r\n            startJavaSqlDate.toLocalDate() ,\r\n            stopJavaSqlDate.toLocalDate()\r\n        ) \r\n    )\r\n\r\n# Avoid legacy date-time classes\r\n\r\nYou are using terrible date-time classes that were years ago supplanted by the modern *java.time* classes defined in JSR 310. \r\n\r\nOne of the many design flaws in the `Date` class is that there are actually *two* `Date` classes:\r\n\r\n - `java.util.Date`\r\n - `java.sql.Date`\r\n\r\nThe first represents a moment as seen in UTC. The second *pretends* to represent a date-only, without a time-of-day and without an offset or time zone. But actually, in a case of *extremely* poor judgement, the second class extends from the first… so it does indeed internally represent a moment in UTC. Messy? Yes, a terrible mess. \r\n\r\n# `LocalDate`\r\n\r\nYou neglect to mention in your Question which class you are using. So I&#39;ll go with the second one, `java.sql.Date`.\r\n\r\nWhen handed a `java.sql.Date` object, immediately convert to the modern replacement: [`LocalDate`][1]. Do so by calling the [new conversion method][2] added to the old class.\r\n\r\n    LocalDate ld = myJavaSqlDate.toLocalDate() ;\r\n\r\n# `LocalDateRange`\r\n\r\nTo compare date ranges, you *could* write the code yourself. But why bother? Add the [*ThreeTen-Extra*][3] library to your project. Doing so gives you access to the [`LocalDateRange`][4] class. That class provides several handy methods such as `contains`, `abuts`, `encloses`, `overlaps`, etc.\r\n\r\n    LocalDateRange target = \r\n        LocalDateRange.of(\r\n            LocalDate.of( … ) ,\r\n            LocalDate.of( … )\r\n        ) \r\n    ;\r\n\r\n… and:\r\n\r\n    LocalDateRange selected = \r\n        LocalDateRange.of(\r\n            startJavaSqlDate.toLocalDate() ,\r\n            stopJavaSqlDate.toLocalDate()\r\n        ) \r\n    ;\r\n\r\nCompare.\r\n\r\n    boolean enclosed = target.encloses( selected ) ;\r\n\r\n\r\n  [1]: https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/time/LocalDate.html\r\n  [2]: https://docs.oracle.com/en/java/javase/17/docs/api/java.sql/java/sql/Date.html#toLocalDate()\r\n  [3]: https://www.threeten.org/threeten-extra/\r\n  [4]: https://www.threeten.org/threeten-extra/apidocs/org.threeten.extra/org/threeten/extra/LocalDateRange.html","title":"How to check if a selected date range is within a date range","body":"<h1>tl;dr</h1>\n<pre><code>org.threeten.extra.LocalDateRange.of\n(\n    LocalDate.of( … ) ,\n    LocalDate.of( … )\n) \n.encloses\n(\n    LocalDateRange.of\n    (\n        startJavaSqlDate.toLocalDate() ,\n        stopJavaSqlDate.toLocalDate()\n    ) \n)\n</code></pre>\n<h1>Avoid legacy date-time classes</h1>\n<p>You are using terrible date-time classes that were years ago supplanted by the modern <em>java.time</em> classes defined in JSR 310.</p>\n<p>One of the many design flaws in the <code>Date</code> class is that there are actually <em>two</em> <code>Date</code> classes:</p>\n<ul>\n<li><code>java.util.Date</code></li>\n<li><code>java.sql.Date</code></li>\n</ul>\n<p>The first represents a moment as seen in UTC. The second <em>pretends</em> to represent a date-only, without a time-of-day and without an offset or time zone. But actually, in a case of <em>extremely</em> poor judgement, the second class extends from the first… so it does indeed internally represent a moment in UTC. Messy? Yes, a terrible mess.</p>\n<h1><code>LocalDate</code></h1>\n<p>You neglect to mention in your Question which class you are using. So I'll go with the second one, <code>java.sql.Date</code>.</p>\n<p>When handed a <code>java.sql.Date</code> object, immediately convert to the modern replacement: <a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/time/LocalDate.html\" rel=\"nofollow noreferrer\"><code>LocalDate</code></a>. Do so by calling the <a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.sql/java/sql/Date.html#toLocalDate()\" rel=\"nofollow noreferrer\">new conversion method</a> added to the old class.</p>\n<pre><code>LocalDate ld = myJavaSqlDate.toLocalDate() ;\n</code></pre>\n<h1><code>LocalDateRange</code></h1>\n<p>To compare date ranges, you <em>could</em> write the code yourself. But why bother? Add the <a href=\"https://www.threeten.org/threeten-extra/\" rel=\"nofollow noreferrer\"><em>ThreeTen-Extra</em></a> library to your project. Doing so gives you access to the <a href=\"https://www.threeten.org/threeten-extra/apidocs/org.threeten.extra/org/threeten/extra/LocalDateRange.html\" rel=\"nofollow noreferrer\"><code>LocalDateRange</code></a> class. That class provides several handy methods such as <code>contains</code>, <code>abuts</code>, <code>encloses</code>, <code>overlaps</code>, etc.</p>\n<pre><code>LocalDateRange target = \n    LocalDateRange.of(\n        LocalDate.of( … ) ,\n        LocalDate.of( … )\n    ) \n;\n</code></pre>\n<p>… and:</p>\n<pre><code>LocalDateRange selected = \n    LocalDateRange.of(\n        startJavaSqlDate.toLocalDate() ,\n        stopJavaSqlDate.toLocalDate()\n    ) \n;\n</code></pre>\n<p>Compare.</p>\n<pre><code>boolean enclosed = target.encloses( selected ) ;\n</code></pre>\n"}],"owner":{"account_id":10814854,"reputation":4137,"user_id":7954210,"accept_rate":73,"display_name":"Mouaad Abdelghafour AITALI"},"comment_count":8,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":761,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":73840201,"answer_count":2,"score":0,"last_activity_date":1664230974,"creation_date":1664048379,"question_id":73840103,"body_markdown":"I&#39;m trying to check if a selected dates range by the user is within a range of dates exist in database.\r\n\r\ne.g. \r\n\r\nUser select :\r\n\r\n**Start date : 24/09/2022**\r\n\r\n**End date : 30/09/2022**\r\n\r\nDate range in database is :\r\n\r\n**Start date : 28/09/2022**\r\n\r\n**End date : 30/09/2022**\r\n\r\nImagine you have a reservation car between 28/09 → 30/09, if a user wants to reserve this car between 24/09 --&gt; 30/09, then the app should notify them that the car is reserved in that date because it&#39;s already reserved between 28--&gt; 30.\r\n \r\nMy situation is similar to this: [Check if a date range is within a date range](https://stackoverflow.com/questions/3786821/check-if-a-date-range-is-within-a-date-range). Only that question is about C#, and I am coding Java.\r\n\r\nMy code so far :\r\n\r\n\r\n\r\n       boolean isFound = DateHelper.isWithinRange2Dates(\r\n                    /*ENTERED BY USER*/\r\n                    string2Date(&quot;24/09/2022&quot;),\r\n                    string2Date(&quot;30/09/2022&quot;),\r\n                    /*IN DATABASE*/\r\n                    string2Date(&quot;28/09/2022&quot;),\r\n                    string2Date(&quot;30/09/2022&quot;));\r\n\r\n            ToastUtils.showLong(isFound ? &quot;FOUND&quot; : &quot;NOT FOUND&quot;);\r\n    \r\n   Methods used : \r\n    \r\n       public static boolean isWithinRange(Date selectedDate, Date startDate, Date endDate) {\r\n            return selectedDate.after(startDate) &amp;&amp; (selectedDate.before(endDate) || DateUtils.isSameDay(selectedDate, endDate));\r\n        }\r\n        \r\n       public static boolean isWithinRange2Dates(Date selectedStartDate, Date selectedEndDate, Date startDate, Date  endDate) {\r\n            return isWithinRange(selectedStartDate, startDate, endDate) &amp;&amp; isWithinRange(selectedEndDate, startDate, endDate);\r\n        }\r\n\r\n \r\n\r\n    @SuppressLint(&quot;SimpleDateFormat&quot;)\r\n        public static Date string2Date(String dateStr) {\r\n            try {\r\n                return new SimpleDateFormat(&quot;dd/MM/yyyy&quot;).parse(dateStr);\r\n            } catch (ParseException e) {\r\n                e.printStackTrace();\r\n            }\r\n            return null;\r\n        }\r\n\r\n**Issue:**\r\n\r\n**28/09 --&gt; 30/09** is within the **24/09 --&gt; 30/09** so the method should true\r\n\r\n**Question:**\r\n\r\nHow I can check if a selected start and end date are within a date range or not?\r\n","title":"How to check if a selected date range is within a date range","body":"<p>I'm trying to check if a selected dates range by the user is within a range of dates exist in database.</p>\n<p>e.g.</p>\n<p>User select :</p>\n<p><strong>Start date : 24/09/2022</strong></p>\n<p><strong>End date : 30/09/2022</strong></p>\n<p>Date range in database is :</p>\n<p><strong>Start date : 28/09/2022</strong></p>\n<p><strong>End date : 30/09/2022</strong></p>\n<p>Imagine you have a reservation car between 28/09 → 30/09, if a user wants to reserve this car between 24/09 --&gt; 30/09, then the app should notify them that the car is reserved in that date because it's already reserved between 28--&gt; 30.</p>\n<p>My situation is similar to this: <a href=\"https://stackoverflow.com/questions/3786821/check-if-a-date-range-is-within-a-date-range\">Check if a date range is within a date range</a>. Only that question is about C#, and I am coding Java.</p>\n<p>My code so far :</p>\n<pre><code>   boolean isFound = DateHelper.isWithinRange2Dates(\n                /*ENTERED BY USER*/\n                string2Date(&quot;24/09/2022&quot;),\n                string2Date(&quot;30/09/2022&quot;),\n                /*IN DATABASE*/\n                string2Date(&quot;28/09/2022&quot;),\n                string2Date(&quot;30/09/2022&quot;));\n\n        ToastUtils.showLong(isFound ? &quot;FOUND&quot; : &quot;NOT FOUND&quot;);\n</code></pre>\n<p>Methods used :</p>\n<pre><code>   public static boolean isWithinRange(Date selectedDate, Date startDate, Date endDate) {\n        return selectedDate.after(startDate) &amp;&amp; (selectedDate.before(endDate) || DateUtils.isSameDay(selectedDate, endDate));\n    }\n    \n   public static boolean isWithinRange2Dates(Date selectedStartDate, Date selectedEndDate, Date startDate, Date  endDate) {\n        return isWithinRange(selectedStartDate, startDate, endDate) &amp;&amp; isWithinRange(selectedEndDate, startDate, endDate);\n    }\n\n\n\n@SuppressLint(&quot;SimpleDateFormat&quot;)\n    public static Date string2Date(String dateStr) {\n        try {\n            return new SimpleDateFormat(&quot;dd/MM/yyyy&quot;).parse(dateStr);\n        } catch (ParseException e) {\n            e.printStackTrace();\n        }\n        return null;\n    }\n</code></pre>\n<p><strong>Issue:</strong></p>\n<p><strong>28/09 --&gt; 30/09</strong> is within the <strong>24/09 --&gt; 30/09</strong> so the method should true</p>\n<p><strong>Question:</strong></p>\n<p>How I can check if a selected start and end date are within a date range or not?</p>\n"},{"tags":["java","angularjs","hibernate","java-8","package-info"],"answers":[{"tags":[],"owner":{"account_id":401843,"reputation":89788,"user_id":768644,"display_name":"rzwitserloot"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1664230727,"creation_date":1664208500,"answer_id":73856921,"question_id":73856749,"body_markdown":"EDIT: Additional comments have made more clear what&#39;s going wrong here; as a consequence, the nature of this answer has changed somewhat.\r\n\r\nIt sounds like you switched from Hibernate&#39;s own version of [`@NamedNativeQueries`](https://docs.jboss.org/hibernate/orm/5.2/javadocs/org/hibernate/annotations/NamedNativeQuery.html) and company, which you can stick on packages, to the general javax persistence [variant](https://docs.oracle.com/javaee/7/api/javax/persistence/NamedNativeQueries.html), which cannot be placed on packages.\r\n\r\nYou must have removed and re-generated the imports in your attempt to convert this code. Don&#39;t do that - remove all those imports and replace them with `import org.hibernate.annotations.NamedNativeQueries` and friends instead.\r\n\r\n\r\n----\r\n\r\nFor posterity, the original answer, still valid but only in context specifically for `javax.persistence.NamedNativeQueries`.\r\n\r\nYou must be misremembering; it does not [_and never has_](https://docs.oracle.com/javaee/7/api/javax/persistence/NamedNativeQueries.html) worked on java7 (that&#39;s the java7 docs of `amedNativeQueries` - note how it has a `@Target(value=TYPE)` marker, so it cannot be put on a package, and that&#39;s the v7 edition of the docs!)\r\n\r\nYou put such things on a type, for example the top level type. Which means the annotations appear near the top, but after the package statement. Given that you&#39;re using them in a `package-info.java` file, they simply cannot appear here (and never could).\r\n\r\n[`SqlResultSetMappings`](https://docs.oracle.com/javaee/7/api/javax/persistence/SqlResultSetMappings.html) is the same.\r\n\r\n\r\nThere&#39;s a small chance that somehow `javac7` didn&#39;t actually check the `Target` condition of these annotations. However, that simply means that your code never worked, even if it did compile.\r\n","title":"Annotation type not applicable to this kind of declaration error in package info class in Java 8","body":"<p>EDIT: Additional comments have made more clear what's going wrong here; as a consequence, the nature of this answer has changed somewhat.</p>\n<p>It sounds like you switched from Hibernate's own version of <a href=\"https://docs.jboss.org/hibernate/orm/5.2/javadocs/org/hibernate/annotations/NamedNativeQuery.html\" rel=\"nofollow noreferrer\"><code>@NamedNativeQueries</code></a> and company, which you can stick on packages, to the general javax persistence <a href=\"https://docs.oracle.com/javaee/7/api/javax/persistence/NamedNativeQueries.html\" rel=\"nofollow noreferrer\">variant</a>, which cannot be placed on packages.</p>\n<p>You must have removed and re-generated the imports in your attempt to convert this code. Don't do that - remove all those imports and replace them with <code>import org.hibernate.annotations.NamedNativeQueries</code> and friends instead.</p>\n<hr />\n<p>For posterity, the original answer, still valid but only in context specifically for <code>javax.persistence.NamedNativeQueries</code>.</p>\n<p>You must be misremembering; it does not <a href=\"https://docs.oracle.com/javaee/7/api/javax/persistence/NamedNativeQueries.html\" rel=\"nofollow noreferrer\"><em>and never has</em></a> worked on java7 (that's the java7 docs of <code>amedNativeQueries</code> - note how it has a <code>@Target(value=TYPE)</code> marker, so it cannot be put on a package, and that's the v7 edition of the docs!)</p>\n<p>You put such things on a type, for example the top level type. Which means the annotations appear near the top, but after the package statement. Given that you're using them in a <code>package-info.java</code> file, they simply cannot appear here (and never could).</p>\n<p><a href=\"https://docs.oracle.com/javaee/7/api/javax/persistence/SqlResultSetMappings.html\" rel=\"nofollow noreferrer\"><code>SqlResultSetMappings</code></a> is the same.</p>\n<p>There's a small chance that somehow <code>javac7</code> didn't actually check the <code>Target</code> condition of these annotations. However, that simply means that your code never worked, even if it did compile.</p>\n"}],"owner":{"account_id":2414203,"reputation":5,"user_id":2108638,"display_name":"redds1"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":149,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":73856921,"answer_count":1,"score":0,"last_activity_date":1664230727,"creation_date":1664207613,"question_id":73856749,"body_markdown":"I have a package info class, it used to compile in Java 6/7. But in Java 8, I get compilation errors:\r\n\r\n*****error: annotation type not applicable to this kind of declaration\r\n@NamedNativeQueries({\r\n\r\nerror: annotation type not applicable to this kind of declaration\r\n@SqlResultSetMappings({*****\r\n\r\nThis is the code: \r\n\r\n```\r\n@NamedNativeQueries({\r\n\r\n    @NamedNativeQuery(name = &quot;&quot;,\r\n        query = &quot;&quot;,\r\n        resultSetMapping = &quot;mapping&quot;\r\n    ),\r\n    NamedNativeQuery(\r\n         name = &quot;&quot;,\r\n         query = &quot;&quot;,\r\n         callable = true,\r\n         readOnly = false,\r\n         resultSetMapping = &quot;&quot;\r\n    )\r\n})\r\n\r\n@SqlResultSetMappings({\r\n\r\n})\r\n\r\npackage abc.domain;\r\nimport javax.persistence.ColumnResult;\r\nimport javax.persistence.EntityResult;\r\nimport javax.persistence.FieldResult;\r\nimport javax.persistence.NamedNativeQueries;\r\nimport javax.persistence.NamedNativeQuery;\r\nimport javax.persistence.SqlResultSetMapping;\r\nimport javax.persistence.SqlResultSetMappings;\r\n```\r\n\r\nThanks in advance for your help","title":"Annotation type not applicable to this kind of declaration error in package info class in Java 8","body":"<p>I have a package info class, it used to compile in Java 6/7. But in Java 8, I get compilation errors:</p>\n<p>*****error: annotation type not applicable to this kind of declaration\n@NamedNativeQueries({</p>\n<p>error: annotation type not applicable to this kind of declaration\n@SqlResultSetMappings({*****</p>\n<p>This is the code:</p>\n<pre><code>@NamedNativeQueries({\n\n    @NamedNativeQuery(name = &quot;&quot;,\n        query = &quot;&quot;,\n        resultSetMapping = &quot;mapping&quot;\n    ),\n    NamedNativeQuery(\n         name = &quot;&quot;,\n         query = &quot;&quot;,\n         callable = true,\n         readOnly = false,\n         resultSetMapping = &quot;&quot;\n    )\n})\n\n@SqlResultSetMappings({\n\n})\n\npackage abc.domain;\nimport javax.persistence.ColumnResult;\nimport javax.persistence.EntityResult;\nimport javax.persistence.FieldResult;\nimport javax.persistence.NamedNativeQueries;\nimport javax.persistence.NamedNativeQuery;\nimport javax.persistence.SqlResultSetMapping;\nimport javax.persistence.SqlResultSetMappings;\n</code></pre>\n<p>Thanks in advance for your help</p>\n"},{"tags":["java","hibernate","unit-testing","jpa","h2"],"answers":[{"tags":[],"owner":{"account_id":5157043,"reputation":1369,"user_id":4130003,"display_name":"johnnyutts"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1664230519,"creation_date":1664229657,"answer_id":73860377,"question_id":73856359,"body_markdown":"You haven&#39;t pasted in all the code and you cannot assign the return type of em.persist, but i think the issue is probably related to creating multiple instances of contenttype with id 19.\r\n\r\nAssuming content type with id 19 is already persisted and you are attempting to just create references to it rather than persist it as you have no cascade in your ManyToMany you  can do something like this as this sample test code shows. The transaction are there as I don&#39;t know your tx boundaries in your code and just for the purpose of saving the contenttype separately\r\n```\r\n    @Test\r\n    public void saveActivities() {\r\n        // Tx1 - Persist content type\r\n\r\n        EntityTransaction tx1 = em.getTransaction();\r\n        tx1.begin();\r\n\r\n        ContentTypeEntity contentType = new ContentTypeEntity(19);\r\n        em.persist(new ContentTypeEntity(19));\r\n\r\n        tx1.commit();\r\n\r\n        em.detach(contentType);\r\n\r\n        // Tx2 - Persist activities using a reference to content type\r\n\r\n        EntityTransaction tx2 = em.getTransaction();\r\n        tx2.begin();\r\n\r\n        for (int i = 0; i &lt; 3; i++) {\r\n\r\n            ActivityEntity activity = new ActivityEntity();\r\n            activity.getContentTypes().add(em.getReference(ContentTypeEntity.class, 19));\r\n\r\n            em.persist(activity);\r\n        }\r\n\r\n        tx2.commit();\r\n\r\n        // assertions\r\n    }\r\n```","title":"Entity Manager not auto increasing ID","body":"<p>You haven't pasted in all the code and you cannot assign the return type of em.persist, but i think the issue is probably related to creating multiple instances of contenttype with id 19.</p>\n<p>Assuming content type with id 19 is already persisted and you are attempting to just create references to it rather than persist it as you have no cascade in your ManyToMany you  can do something like this as this sample test code shows. The transaction are there as I don't know your tx boundaries in your code and just for the purpose of saving the contenttype separately</p>\n<pre><code>    @Test\n    public void saveActivities() {\n        // Tx1 - Persist content type\n\n        EntityTransaction tx1 = em.getTransaction();\n        tx1.begin();\n\n        ContentTypeEntity contentType = new ContentTypeEntity(19);\n        em.persist(new ContentTypeEntity(19));\n\n        tx1.commit();\n\n        em.detach(contentType);\n\n        // Tx2 - Persist activities using a reference to content type\n\n        EntityTransaction tx2 = em.getTransaction();\n        tx2.begin();\n\n        for (int i = 0; i &lt; 3; i++) {\n\n            ActivityEntity activity = new ActivityEntity();\n            activity.getContentTypes().add(em.getReference(ContentTypeEntity.class, 19));\n\n            em.persist(activity);\n        }\n\n        tx2.commit();\n\n        // assertions\n    }\n</code></pre>\n"}],"owner":{"account_id":11751385,"reputation":358,"user_id":8600439,"display_name":"Edgar Hernandez "},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":41,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1664230519,"creation_date":1664205734,"question_id":73856359,"body_markdown":"I&#39;m trying to run a UT but is failing at the @Before method. This is the error:\r\n\r\n    Caused by: org.h2.jdbc.JdbcSQLException: Unique index or primary key violation: &quot;UK_PBNJJ4MCIQ51S0SJV9U3J2WQ4_INDEX_5 ON PUBLIC.XACTIVITYCONTENTTYPE(CONTENTTYPE_ID) VALUES (19, 1)&quot;; SQL statement:\r\n    insert into XACTIVITYCONTENTTYPE (ACTIVITY_ID, CONTENTTYPE_ID) values (?, ?) [23505-197]\r\n\r\nI have an array of object(ActivityEntity) which I&#39;m initializing and persisting in a H2 DB:\r\n\r\n    for (int i = 0; i &lt; activities.length; i++) {\r\n    \t\t\tDate createdDate = new Date();\r\n    \r\n    \t\t\tActivityEntity activity = new ActivityEntity();\r\n    \t\t\tactivity.setType(ActivityType.valueOf(properties.getType()));\r\n    \t\t\tactivity.setLabel(ActivityLabel.valueOf(properties.getLabel()));\r\n    \t\t\tactivity.setStatus(Status.valueOf(properties.getStatus()));\r\n    \t\t\tactivity.setDeliveryType(DeliveryType.valueOf(properties.getDeliveryType()));\r\n    \t\t\tactivity.setSubject(em.find(SubjectEntity.class, subjectId));\r\n    \t\t\tactivity.setFontSize(FontSize.valueOf(properties.getFontSize()));\r\n    \t\t\tactivity.setEstimatedTime(ESTIMATED_TIME);\r\n    \t\t\tactivity.setPlannedTime(properties.getPlannedTime());\r\n    \t\t\tactivity.setInteractivityType(InteractivityType.valueOf(properties.getInteractivityType()));\r\n    \t\t\tactivity.setAudience(Audience.valueOf(properties.getAudience()));\r\n    \t\t\tactivity.setPurpose(Purpose.valueOf(properties.getPurpose()));\r\n    \t\t\tactivity.setAcademicLevel(AcademicLevel.valueOf(properties.getAcademicLevel()));\r\n    \t\t\tactivity.setEnvironment(Environment.valueOf(properties.getEnvironment()));\r\n    \t\t\tactivity.setInstructionMethod(InstructionMethod.valueOf(properties.getInstructionMethod()));\r\n    \t\t\tactivity.setCreatedBy(CREATED_BY);\r\n    \t\t\tactivity.setCreatedDate(createdDate);\r\n    \t\t\tactivity.setModifiedBy(CREATED_BY);\r\n    \t\t\tactivity.setModifiedDate(createdDate);\r\n    \t\t\tactivity.setDeprecated(properties.isDeprecated());\r\n    \t\t\tactivity.setTemplate(properties.isTemplate());\r\n    \t\t\tactivity.setCurriculumProvider(CurriculumProvider.valueOf(properties.getCurriculumProvider()));\r\n    \t\t\tactivity.setShowLessonNavigator(properties.isShowLessonNavigator());\r\n    \t\t\tactivity.setShowHeader(properties.isShowHeader());\r\n    \t\t\tactivity.setDisplayModuleType(properties.isDisplayModuleType());\r\n    \t\t\tactivity.setDisplayLabelType(properties.isDisplayLabelType());\r\n    \t\t\tactivity.setShowFooter(properties.isShowFooter());\r\n    \t\t\tactivity.setShowPagination(properties.isShowPagination());\r\n    \t\t\tactivity.setDisplayProgressBar(properties.isDisplayProgressBar());\r\n    \t\t\tactivity.setDisplayResources(properties.isDisplayResources());\r\n    \t\t\tactivity.setLanguage(language);\r\n    \t\t\tactivity.setPrimaryStatus(PrimaryStatus.valueOf(properties.getPrimaryStatus()));\r\n    \t\t\tactivity.setIntendedDeliveryType(IntendedDeliveryType.valueOf(properties.getIntendedDeliveryType()));\r\n    \t\t\tactivity.setNextGen(properties.isNextGen());\r\n    \t\t\tactivity.setExcludeFromSearch(properties.isExcludeFromSearch());\r\n    \t\t\tactivity.setExcludeFromRecommender(properties.isExcludeFromRecommender());\r\n    \t\t\tactivity.setTeacherCreated(properties.isTeacherCreated());\r\n    \t\t\tactivity.setTitle(TITLE + (i + 1), language);\r\n    \t\t\tactivity.getGrades().addAll(grades);\r\n    \t\t\tactivity.getStudentGroupings().add(new StudentGroupingEntity(properties.getStudentGroupingId()));\r\n    \t\t\tactivity.getPedagogicalIntents().add(new PedagogicalIntentEntity(properties.getPedagogicalIntentId()));\r\n    \t\t\tactivity.getLearnerTypes().add(new LearnerTypeEntity(properties.getLearnerTypeId()));\r\n    \t\t\tactivity.getContentTypes().add(new ContentTypeEntity(properties.getContentTypeId()));\r\n    \r\n    \t\t\tactivities[i] = em.persist(activity);\r\n    \t\t}\r\n    \t\tem.flush();\r\n\r\nThe last set it&#39;s the property related to the error. The properties have a value of 19 for the ContentTypeId. Now, this is part of the Activity entity class:\r\n\r\n        @Entity\r\n        @Table(name = &quot;ACTIVITY&quot;)\r\n        public class ActivityEntity {\r\n        \r\n        \t@Id\r\n        \t@GeneratedValue(strategy = GenerationType.SEQUENCE, generator = &quot;SQ_ACTIVITY_ACTIVITY_ID&quot;)\r\n        \t@SequenceGenerator(name = &quot;SQ_ACTIVITY_ACTIVITY_ID&quot;, sequenceName = &quot;SQ_ACTIVITY_ACTIVITY_ID&quot;, allocationSize = 1)\r\n        \t@Column(name = &quot;ACTIVITY_ID&quot;)\r\n        \tprivate Integer id;\r\n        \r\n    //MORE FIELDS LEFT OUT FOR CLARITY\r\n    \r\n        @ManyToMany\r\n        \t@JoinTable(name = &quot;XACTIVITYCONTENTTYPE&quot;, joinColumns = { @JoinColumn(name = &quot;ACTIVITY_ID&quot;, referencedColumnName = &quot;ACTIVITY_ID&quot;) }, inverseJoinColumns = { @JoinColumn(name = &quot;CONTENTTYPE_ID&quot;, referencedColumnName=&quot;ID&quot;) } )\r\n        \tprivate List&lt;ContentTypeEntity&gt; contentTypes = new ArrayList&lt;&gt;();\r\n    }\r\n\r\nAnd here&#39;s the ContentTypeEntity class:\r\n\r\n    @Entity\r\n    @Table(name = &quot;CONTENTTYPE&quot;)\r\n    public class ContentTypeEntity {\r\n    \r\n    \t@Id\r\n    \t@Column(name = &quot;ID&quot;)\r\n    \tprivate int id;\r\n    \r\n    \t@Column(name = &quot;NAME&quot;)\r\n    \tprivate String name;\r\n    \r\n    \t@Column(name = &quot;SEQ_NUM&quot;)\r\n    \tprivate int seqNum;\r\n    \t\r\n    \tpublic ContentTypeEntity() {\r\n    \t\t\r\n    \t}\r\n    \t\r\n    \tpublic ContentTypeEntity(int id) {\r\n    \t\tthis.id = id;\r\n    \t}\r\n    \r\n    \tpublic int getId() {\r\n    \t\treturn id;\r\n    \t}\r\n    \r\n    \tpublic void setId(Integer id) {\r\n    \t\tthis.id = id;\r\n    \t}\r\n    \r\n    \tpublic String getName() {\r\n    \t\treturn name;\r\n    \t}\r\n    \r\n    \tpublic void setName(String name) {\r\n    \t\tthis.name = name;\r\n    \t}\r\n    \r\n    \tpublic int getSeqNum() {\r\n    \t\treturn seqNum;\r\n    \t}\r\n    \r\n    \tpublic void setSeqNum(int seqNum) {\r\n    \t\tthis.seqNum = seqNum;\r\n    \t}\r\n    \t\r\n    }\r\n\r\nIf I debug, the ids for ActivityEntity is being generated correctly for each of the 3 objects that i&#39;m putting in the array (ids=[1,2,3]). So i don&#39;t understand why the second insert is using the id=1, which is what the exception is implying. If I put one ActivityEntity in the array, everything works correctly.","title":"Entity Manager not auto increasing ID","body":"<p>I'm trying to run a UT but is failing at the @Before method. This is the error:</p>\n<pre><code>Caused by: org.h2.jdbc.JdbcSQLException: Unique index or primary key violation: &quot;UK_PBNJJ4MCIQ51S0SJV9U3J2WQ4_INDEX_5 ON PUBLIC.XACTIVITYCONTENTTYPE(CONTENTTYPE_ID) VALUES (19, 1)&quot;; SQL statement:\ninsert into XACTIVITYCONTENTTYPE (ACTIVITY_ID, CONTENTTYPE_ID) values (?, ?) [23505-197]\n</code></pre>\n<p>I have an array of object(ActivityEntity) which I'm initializing and persisting in a H2 DB:</p>\n<pre><code>for (int i = 0; i &lt; activities.length; i++) {\n            Date createdDate = new Date();\n\n            ActivityEntity activity = new ActivityEntity();\n            activity.setType(ActivityType.valueOf(properties.getType()));\n            activity.setLabel(ActivityLabel.valueOf(properties.getLabel()));\n            activity.setStatus(Status.valueOf(properties.getStatus()));\n            activity.setDeliveryType(DeliveryType.valueOf(properties.getDeliveryType()));\n            activity.setSubject(em.find(SubjectEntity.class, subjectId));\n            activity.setFontSize(FontSize.valueOf(properties.getFontSize()));\n            activity.setEstimatedTime(ESTIMATED_TIME);\n            activity.setPlannedTime(properties.getPlannedTime());\n            activity.setInteractivityType(InteractivityType.valueOf(properties.getInteractivityType()));\n            activity.setAudience(Audience.valueOf(properties.getAudience()));\n            activity.setPurpose(Purpose.valueOf(properties.getPurpose()));\n            activity.setAcademicLevel(AcademicLevel.valueOf(properties.getAcademicLevel()));\n            activity.setEnvironment(Environment.valueOf(properties.getEnvironment()));\n            activity.setInstructionMethod(InstructionMethod.valueOf(properties.getInstructionMethod()));\n            activity.setCreatedBy(CREATED_BY);\n            activity.setCreatedDate(createdDate);\n            activity.setModifiedBy(CREATED_BY);\n            activity.setModifiedDate(createdDate);\n            activity.setDeprecated(properties.isDeprecated());\n            activity.setTemplate(properties.isTemplate());\n            activity.setCurriculumProvider(CurriculumProvider.valueOf(properties.getCurriculumProvider()));\n            activity.setShowLessonNavigator(properties.isShowLessonNavigator());\n            activity.setShowHeader(properties.isShowHeader());\n            activity.setDisplayModuleType(properties.isDisplayModuleType());\n            activity.setDisplayLabelType(properties.isDisplayLabelType());\n            activity.setShowFooter(properties.isShowFooter());\n            activity.setShowPagination(properties.isShowPagination());\n            activity.setDisplayProgressBar(properties.isDisplayProgressBar());\n            activity.setDisplayResources(properties.isDisplayResources());\n            activity.setLanguage(language);\n            activity.setPrimaryStatus(PrimaryStatus.valueOf(properties.getPrimaryStatus()));\n            activity.setIntendedDeliveryType(IntendedDeliveryType.valueOf(properties.getIntendedDeliveryType()));\n            activity.setNextGen(properties.isNextGen());\n            activity.setExcludeFromSearch(properties.isExcludeFromSearch());\n            activity.setExcludeFromRecommender(properties.isExcludeFromRecommender());\n            activity.setTeacherCreated(properties.isTeacherCreated());\n            activity.setTitle(TITLE + (i + 1), language);\n            activity.getGrades().addAll(grades);\n            activity.getStudentGroupings().add(new StudentGroupingEntity(properties.getStudentGroupingId()));\n            activity.getPedagogicalIntents().add(new PedagogicalIntentEntity(properties.getPedagogicalIntentId()));\n            activity.getLearnerTypes().add(new LearnerTypeEntity(properties.getLearnerTypeId()));\n            activity.getContentTypes().add(new ContentTypeEntity(properties.getContentTypeId()));\n\n            activities[i] = em.persist(activity);\n        }\n        em.flush();\n</code></pre>\n<p>The last set it's the property related to the error. The properties have a value of 19 for the ContentTypeId. Now, this is part of the Activity entity class:</p>\n<pre><code>    @Entity\n    @Table(name = &quot;ACTIVITY&quot;)\n    public class ActivityEntity {\n    \n        @Id\n        @GeneratedValue(strategy = GenerationType.SEQUENCE, generator = &quot;SQ_ACTIVITY_ACTIVITY_ID&quot;)\n        @SequenceGenerator(name = &quot;SQ_ACTIVITY_ACTIVITY_ID&quot;, sequenceName = &quot;SQ_ACTIVITY_ACTIVITY_ID&quot;, allocationSize = 1)\n        @Column(name = &quot;ACTIVITY_ID&quot;)\n        private Integer id;\n    \n//MORE FIELDS LEFT OUT FOR CLARITY\n\n    @ManyToMany\n        @JoinTable(name = &quot;XACTIVITYCONTENTTYPE&quot;, joinColumns = { @JoinColumn(name = &quot;ACTIVITY_ID&quot;, referencedColumnName = &quot;ACTIVITY_ID&quot;) }, inverseJoinColumns = { @JoinColumn(name = &quot;CONTENTTYPE_ID&quot;, referencedColumnName=&quot;ID&quot;) } )\n        private List&lt;ContentTypeEntity&gt; contentTypes = new ArrayList&lt;&gt;();\n}\n</code></pre>\n<p>And here's the ContentTypeEntity class:</p>\n<pre><code>@Entity\n@Table(name = &quot;CONTENTTYPE&quot;)\npublic class ContentTypeEntity {\n\n    @Id\n    @Column(name = &quot;ID&quot;)\n    private int id;\n\n    @Column(name = &quot;NAME&quot;)\n    private String name;\n\n    @Column(name = &quot;SEQ_NUM&quot;)\n    private int seqNum;\n    \n    public ContentTypeEntity() {\n        \n    }\n    \n    public ContentTypeEntity(int id) {\n        this.id = id;\n    }\n\n    public int getId() {\n        return id;\n    }\n\n    public void setId(Integer id) {\n        this.id = id;\n    }\n\n    public String getName() {\n        return name;\n    }\n\n    public void setName(String name) {\n        this.name = name;\n    }\n\n    public int getSeqNum() {\n        return seqNum;\n    }\n\n    public void setSeqNum(int seqNum) {\n        this.seqNum = seqNum;\n    }\n    \n}\n</code></pre>\n<p>If I debug, the ids for ActivityEntity is being generated correctly for each of the 3 objects that i'm putting in the array (ids=[1,2,3]). So i don't understand why the second insert is using the id=1, which is what the exception is implying. If I put one ActivityEntity in the array, everything works correctly.</p>\n"},{"tags":["java","spring","oracle","spring-boot","jdbc"],"comments":[{"owner":{"account_id":1658807,"reputation":31819,"user_id":1527544,"accept_rate":54,"display_name":"Antoniossss"},"score":0,"creation_date":1551827159,"post_id":55012856,"comment_id":96780704,"body_markdown":"Synchronize access based on username","body":"Synchronize access based on username"},{"owner":{"account_id":5985607,"reputation":337,"user_id":4703277,"accept_rate":29,"display_name":"Suleiman Alrosan"},"score":0,"creation_date":1551976998,"post_id":55012856,"comment_id":96847741,"body_markdown":"That would work if you are using on server. However, in this I&#39;m using multiple servers","body":"That would work if you are using on server. However, in this I&#39;m using multiple servers"},{"owner":{"account_id":1658807,"reputation":31819,"user_id":1527544,"accept_rate":54,"display_name":"Antoniossss"},"score":0,"creation_date":1551990409,"post_id":55012856,"comment_id":96854414,"body_markdown":"But you can use another centralized database to syncronize only access only. Or use separate centralized service to do user registration only. Also you can use eg Hazelcast to sync java constructs across clusters. As last resort, use table locking.","body":"But you can use another centralized database to syncronize only access only. Or use separate centralized service to do user registration only. Also you can use eg Hazelcast to sync java constructs across clusters. As last resort, use table locking."}],"answers":[{"tags":[],"owner":{"account_id":3339739,"reputation":1756,"user_id":2806265,"display_name":"Matthias Steinbauer"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1551862073,"creation_date":1551862073,"answer_id":55018894,"question_id":55012856,"body_markdown":"Synchronisation is not feasible in your case, because you clearly state that you are working with two application servers. A synchronized method running in two different VMs is clearly not synchronized between these two VMs.\r\n\r\nFurther I don&#39;t know the exact details of your implementation (perhaps you can share an anonymized version of your `application.properties`) but it is very likely that you have a Hibernate cache enabled.\r\n\r\nThese caches act completely transparent this means when your applications queries an entity it is very likely that this entity is served from cache instead of the database. In your case again, you are working with two application servers, each working with their own database cache.","title":"Prevent duplicate POST API calls across multiple servers","body":"<p>Synchronisation is not feasible in your case, because you clearly state that you are working with two application servers. A synchronized method running in two different VMs is clearly not synchronized between these two VMs.</p>\n\n<p>Further I don't know the exact details of your implementation (perhaps you can share an anonymized version of your <code>application.properties</code>) but it is very likely that you have a Hibernate cache enabled.</p>\n\n<p>These caches act completely transparent this means when your applications queries an entity it is very likely that this entity is served from cache instead of the database. In your case again, you are working with two application servers, each working with their own database cache.</p>\n"}],"owner":{"account_id":5985607,"reputation":337,"user_id":4703277,"accept_rate":29,"display_name":"Suleiman Alrosan"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":639,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1664230463,"creation_date":1551826210,"question_id":55012856,"body_markdown":"Lets say that I have a SPA application to manage user details (name,age,etc.. ) with the following structure:\r\n\r\n\r\nSPA &lt;--&gt;  my-api-servcie.com VIP &lt;--&gt; [my-api-server-1.com, my-api-server-2.com]\r\n\r\nThe API is built with SpringBoot, Java, Spring JDBC, oracle 12c\r\n \r\n\r\nI want to enforce the name to be unique. However, I do not have control over the DB schema and I can not add unique constraint to the name column. Anyway, I did implement the following preventive measures:\r\n\r\n- Front-end level\r\n  - validation to prevent  duplicate names \r\n  - layover full screen spinner to prevent accidental clicks\r\n- API level\r\n - validation to prevent  duplicate names\r\n\r\n   \r\nWith all of the above in mined, one of the application users managed to send 2 POST request both of which were successful passing all of the above validations. \r\n\r\nThe calls looked something like this, where each request took a couple of milliseconds to complete: \r\n\r\n    POST my-api-server-1.com/user {name:&quot;Sam&quot;} at 15-JUN-18 02.11.20.000000000 PM\r\n    POST my-api-server-2.com/user {name:&quot;Sam&quot;} at 15-JUN-18 02.11.23.000000000 PM \r\n\r\n\r\n\r\n**First** it seems odd that both requests were successful even though they were almost 2 seconds apart. So technically the second call should not have passed validation at the API level. What would have been the reason for this behavior? Is there some short-term cashing the JDBC or Oracle layer? \r\n\r\n**Second**, what are other preventive measures I could have done other than adding DB constraint? \r\n\r\nI could use synchronized method, but that would have caused some performance consequences. \r\n\r\n","title":"Prevent duplicate POST API calls across multiple servers","body":"<p>Lets say that I have a SPA application to manage user details (name,age,etc.. ) with the following structure:</p>\n\n<p>SPA &lt;-->  my-api-servcie.com VIP &lt;--> [my-api-server-1.com, my-api-server-2.com]</p>\n\n<p>The API is built with SpringBoot, Java, Spring JDBC, oracle 12c</p>\n\n<p>I want to enforce the name to be unique. However, I do not have control over the DB schema and I can not add unique constraint to the name column. Anyway, I did implement the following preventive measures:</p>\n\n<ul>\n<li>Front-end level\n\n<ul>\n<li>validation to prevent  duplicate names </li>\n<li>layover full screen spinner to prevent accidental clicks</li>\n</ul></li>\n<li>API level\n\n<ul>\n<li>validation to prevent  duplicate names</li>\n</ul></li>\n</ul>\n\n<p>With all of the above in mined, one of the application users managed to send 2 POST request both of which were successful passing all of the above validations. </p>\n\n<p>The calls looked something like this, where each request took a couple of milliseconds to complete: </p>\n\n<pre><code>POST my-api-server-1.com/user {name:\"Sam\"} at 15-JUN-18 02.11.20.000000000 PM\nPOST my-api-server-2.com/user {name:\"Sam\"} at 15-JUN-18 02.11.23.000000000 PM \n</code></pre>\n\n<p><strong>First</strong> it seems odd that both requests were successful even though they were almost 2 seconds apart. So technically the second call should not have passed validation at the API level. What would have been the reason for this behavior? Is there some short-term cashing the JDBC or Oracle layer? </p>\n\n<p><strong>Second</strong>, what are other preventive measures I could have done other than adding DB constraint? </p>\n\n<p>I could use synchronized method, but that would have caused some performance consequences. </p>\n"},{"tags":["java","unit-testing","mockito","jsonpath"],"comments":[{"owner":{"account_id":1838002,"reputation":10618,"user_id":1667977,"accept_rate":75,"display_name":"MartinTeeVarga"},"score":1,"creation_date":1489188548,"post_id":42725199,"comment_id":72578336,"body_markdown":"Can you show the rest of the exception? Anyway, looks like you have some extra spaces in `application/json`","body":"Can you show the rest of the exception? Anyway, looks like you have some extra spaces in <code>application&#47;json</code>"},{"owner":{"account_id":390700,"reputation":4080,"user_id":750940,"accept_rate":44,"display_name":"Pradeep Vairamani"},"score":0,"creation_date":1489363016,"post_id":42725199,"comment_id":72625552,"body_markdown":"Added the rest of the exception. The extra spaces was a typo in Stackoverflow. Sorry about that.","body":"Added the rest of the exception. The extra spaces was a typo in Stackoverflow. Sorry about that."},{"owner":{"account_id":1838002,"reputation":10618,"user_id":1667977,"accept_rate":75,"display_name":"MartinTeeVarga"},"score":0,"creation_date":1490839182,"post_id":42725199,"comment_id":73295409,"body_markdown":"Have you found the answer to your problem?","body":"Have you found the answer to your problem?"},{"owner":{"account_id":390700,"reputation":4080,"user_id":750940,"accept_rate":44,"display_name":"Pradeep Vairamani"},"score":0,"creation_date":1490845286,"post_id":42725199,"comment_id":73296890,"body_markdown":"Nope. Not yet. None of the existing suggestions seem to work.","body":"Nope. Not yet. None of the existing suggestions seem to work."},{"owner":{"account_id":1063749,"reputation":14067,"user_id":1064809,"accept_rate":70,"display_name":"Natix"},"score":0,"creation_date":1507835409,"post_id":42725199,"comment_id":80380673,"body_markdown":"I&#39;m getting this type of error with Spring Boot 1.5.7","body":"I&#39;m getting this type of error with Spring Boot 1.5.7"},{"owner":{"account_id":942242,"reputation":1279,"user_id":970121,"accept_rate":73,"display_name":"pramodh"},"score":2,"creation_date":1523631296,"post_id":42725199,"comment_id":86654534,"body_markdown":"I had to play around a bit to solve this issue. What worked for me was adding json-smart and net.minidev asm dependencies. `&lt;dependency&gt; &lt;br/&gt;\n            &lt;groupId&gt;net.minidev&lt;/groupId&gt;\n            &lt;artifactId&gt;json-smart&lt;/artifactId&gt;\n            &lt;version&gt;2.3&lt;/version&gt;\n            &lt;scope&gt;test&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;net.minidev&lt;/groupId&gt;\n            &lt;artifactId&gt;asm&lt;/artifactId&gt;\n            &lt;version&gt;1.0.2&lt;/version&gt;\n            &lt;scope&gt;test&lt;/scope&gt;\n        &lt;/dependency&gt; `","body":"I had to play around a bit to solve this issue. What worked for me was adding json-smart and net.minidev asm dependencies. <code>&lt;dependency&gt; &lt;br&#47;&gt;             &lt;groupId&gt;net.minidev&lt;&#47;groupId&gt;             &lt;artifactId&gt;json-smart&lt;&#47;artifactId&gt;             &lt;version&gt;2.3&lt;&#47;version&gt;             &lt;scope&gt;test&lt;&#47;scope&gt;         &lt;&#47;dependency&gt;         &lt;dependency&gt;             &lt;groupId&gt;net.minidev&lt;&#47;groupId&gt;             &lt;artifactId&gt;asm&lt;&#47;artifactId&gt;             &lt;version&gt;1.0.2&lt;&#47;version&gt;             &lt;scope&gt;test&lt;&#47;scope&gt;         &lt;&#47;dependency&gt; </code>"},{"owner":{"account_id":942242,"reputation":1279,"user_id":970121,"accept_rate":73,"display_name":"pramodh"},"score":2,"creation_date":1523632668,"post_id":42725199,"comment_id":86655461,"body_markdown":"This is the dependency  `&lt;dependency&gt; &lt;groupId&gt;net.minidev&lt;/groupId&gt; &lt;artifactId&gt;json-smart&lt;/artifactId&gt; &lt;version&gt;2.3&lt;/version&gt; &lt;scope&gt;test&lt;/scope&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;net.minidev&lt;/groupId&gt; &lt;artifactId&gt;asm&lt;/artifactId&gt; &lt;version&gt;1.0.2&lt;/version&gt; &lt;scope&gt;test&lt;/scope&gt;`","body":"This is the dependency  <code>&lt;dependency&gt; &lt;groupId&gt;net.minidev&lt;&#47;groupId&gt; &lt;artifactId&gt;json-smart&lt;&#47;artifactId&gt; &lt;version&gt;2.3&lt;&#47;version&gt; &lt;scope&gt;test&lt;&#47;scope&gt; &lt;&#47;dependency&gt; &lt;dependency&gt; &lt;groupId&gt;net.minidev&lt;&#47;groupId&gt; &lt;artifactId&gt;asm&lt;&#47;artifactId&gt; &lt;version&gt;1.0.2&lt;&#47;version&gt; &lt;scope&gt;test&lt;&#47;scope&gt;</code>"}],"answers":[{"tags":[],"owner":{"account_id":1611562,"reputation":11552,"user_id":1490322,"accept_rate":71,"display_name":"Jose Martinez"},"down_vote_count":1,"up_vote_count":35,"is_accepted":false,"score":34,"last_activity_date":1535968035,"creation_date":1489245569,"answer_id":42736879,"question_id":42725199,"body_markdown":"I think you need to pass the Matcher to the `jsonPath` method.  For example.\r\n\r\n\r\n    .andExpect(jsonPath(&quot;$.version&quot;, is(&quot;0.1&quot;)))\r\n\r\n\r\nReferences:  \r\nhttp://docs.spring.io/spring/docs/3.2.x/javadoc-api/org/springframework/test/web/servlet/result/MockMvcResultMatchers.html#jsonPath(java.lang.String,%20org.hamcrest.Matcher)\r\n\r\nhttps://www.petrikainulainen.net/programming/spring-framework/integration-testing-of-spring-mvc-applications-write-clean-assertions-with-jsonpath/\r\n\r\nhttps://stackoverflow.com/questions/15371022/springmvc-mockmvc-jsonpath-compare-list-of-strings","title":"How to use MockMvcResultMatchers.jsonPath","body":"<p>I think you need to pass the Matcher to the <code>jsonPath</code> method.  For example.</p>\n\n<pre><code>.andExpect(jsonPath(\"$.version\", is(\"0.1\")))\n</code></pre>\n\n<p>References:<br>\n<a href=\"http://docs.spring.io/spring/docs/3.2.x/javadoc-api/org/springframework/test/web/servlet/result/MockMvcResultMatchers.html#jsonPath(java.lang.String,%20org.hamcrest.Matcher)\" rel=\"noreferrer\">http://docs.spring.io/spring/docs/3.2.x/javadoc-api/org/springframework/test/web/servlet/result/MockMvcResultMatchers.html#jsonPath(java.lang.String,%20org.hamcrest.Matcher)</a></p>\n\n<p><a href=\"https://www.petrikainulainen.net/programming/spring-framework/integration-testing-of-spring-mvc-applications-write-clean-assertions-with-jsonpath/\" rel=\"noreferrer\">https://www.petrikainulainen.net/programming/spring-framework/integration-testing-of-spring-mvc-applications-write-clean-assertions-with-jsonpath/</a></p>\n\n<p><a href=\"https://stackoverflow.com/questions/15371022/springmvc-mockmvc-jsonpath-compare-list-of-strings\">SpringMVC/ mockMVC/ jsonpath compare list of strings</a></p>\n"},{"tags":[],"owner":{"account_id":1838002,"reputation":10618,"user_id":1667977,"accept_rate":75,"display_name":"MartinTeeVarga"},"down_vote_count":0,"up_vote_count":21,"is_accepted":false,"score":21,"last_activity_date":1489453992,"creation_date":1489453992,"answer_id":42776180,"question_id":42725199,"body_markdown":"Your code works for me just fine. I am using Jackson to parse the cases and that&#39;s probably the only difference. Check my code:\r\n\r\nResult class:\r\n\r\n    public class Res {\r\n        String version;\r\n    \r\n        public String getVersion() {\r\n            return version;\r\n        }\r\n    \r\n        public void setVersion(String version) {\r\n            this.version = version;\r\n        }\r\n    }\r\n\r\nController:\r\n\r\n    @RequestMapping(value = &quot;/blah&quot;,\r\n            method = GET,\r\n            produces = APPLICATION_JSON_VALUE)\r\n    public HttpEntity&lt;Res&gt; doIt() {\r\n        Res res = new Res();\r\n        res.setVersion(&quot;0.1&quot;);\r\n        return new HttpEntity&lt;&gt;(res);\r\n    }\r\n\r\nTest:\r\n\r\n    @Test\r\n    public void blahTest() throws Exception {\r\n        this.mockMvc.perform(\r\n                MockMvcRequestBuilders.get(&quot;/blah&quot;))\r\n                .andExpect(MockMvcResultMatchers.status().isOk())\r\n                .andExpect(MockMvcResultMatchers.content().contentType(&quot;application/json;charset=UTF-8&quot;))\r\n                .andExpect(jsonPath(&quot;$.version&quot;).value(&quot;0.1&quot;))\r\n                .andDo(MockMvcResultHandlers.print());\r\n    }\r\n\r\nResponse:\r\n\r\n    MockHttpServletResponse:\r\n               Status = 200\r\n        Error message = null\r\n              Headers = {Content-Type=[application/json;charset=UTF-8]}\r\n         Content type = application/json;charset=UTF-8\r\n                 Body = {&quot;version&quot;:&quot;0.1&quot;}\r\n        Forwarded URL = null\r\n       Redirected URL = null\r\n              Cookies = []\r\n\r\nI can only recommend trying to change the Json parser library you are using. Otherwise, try to update your code with all the parts that are needed to create a simple, minimal and reproducible example of your problem.","title":"How to use MockMvcResultMatchers.jsonPath","body":"<p>Your code works for me just fine. I am using Jackson to parse the cases and that's probably the only difference. Check my code:</p>\n\n<p>Result class:</p>\n\n<pre><code>public class Res {\n    String version;\n\n    public String getVersion() {\n        return version;\n    }\n\n    public void setVersion(String version) {\n        this.version = version;\n    }\n}\n</code></pre>\n\n<p>Controller:</p>\n\n<pre><code>@RequestMapping(value = \"/blah\",\n        method = GET,\n        produces = APPLICATION_JSON_VALUE)\npublic HttpEntity&lt;Res&gt; doIt() {\n    Res res = new Res();\n    res.setVersion(\"0.1\");\n    return new HttpEntity&lt;&gt;(res);\n}\n</code></pre>\n\n<p>Test:</p>\n\n<pre><code>@Test\npublic void blahTest() throws Exception {\n    this.mockMvc.perform(\n            MockMvcRequestBuilders.get(\"/blah\"))\n            .andExpect(MockMvcResultMatchers.status().isOk())\n            .andExpect(MockMvcResultMatchers.content().contentType(\"application/json;charset=UTF-8\"))\n            .andExpect(jsonPath(\"$.version\").value(\"0.1\"))\n            .andDo(MockMvcResultHandlers.print());\n}\n</code></pre>\n\n<p>Response:</p>\n\n<pre><code>MockHttpServletResponse:\n           Status = 200\n    Error message = null\n          Headers = {Content-Type=[application/json;charset=UTF-8]}\n     Content type = application/json;charset=UTF-8\n             Body = {\"version\":\"0.1\"}\n    Forwarded URL = null\n   Redirected URL = null\n          Cookies = []\n</code></pre>\n\n<p>I can only recommend trying to change the Json parser library you are using. Otherwise, try to update your code with all the parts that are needed to create a simple, minimal and reproducible example of your problem.</p>\n"},{"tags":[],"owner":{"account_id":2670445,"reputation":147,"user_id":2307979,"accept_rate":40,"display_name":"coltonfranco"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1535066867,"creation_date":1535066867,"answer_id":51995561,"question_id":42725199,"body_markdown":"All credit for this answer goes to @pramodh (Hidden in OP&#39;s comments)\r\n\r\nI had the exact same problem and installing his reccomended dependencies fixed everything.\r\n\r\n    &lt;dependency&gt;\r\n        &lt;groupId&gt;net.minidev&lt;/groupId&gt;\r\n        &lt;artifactId&gt;json-smart&lt;/artifactId&gt;\r\n        &lt;version&gt;2.3&lt;/version&gt;\r\n        &lt;scope&gt;test&lt;/scope&gt;\r\n    &lt;/dependency&gt; \r\n    &lt;dependency&gt; \r\n        &lt;groupId&gt;net.minidev&lt;/groupId&gt;\r\n        &lt;artifactId&gt;asm&lt;/artifactId&gt;\r\n        &lt;version&gt;1.0.2&lt;/version&gt;\r\n        &lt;scope&gt;test&lt;/scope&gt;\r\n    &lt;/dependency&gt;","title":"How to use MockMvcResultMatchers.jsonPath","body":"<p>All credit for this answer goes to @pramodh (Hidden in OP's comments)</p>\n\n<p>I had the exact same problem and installing his reccomended dependencies fixed everything.</p>\n\n<pre><code>&lt;dependency&gt;\n    &lt;groupId&gt;net.minidev&lt;/groupId&gt;\n    &lt;artifactId&gt;json-smart&lt;/artifactId&gt;\n    &lt;version&gt;2.3&lt;/version&gt;\n    &lt;scope&gt;test&lt;/scope&gt;\n&lt;/dependency&gt; \n&lt;dependency&gt; \n    &lt;groupId&gt;net.minidev&lt;/groupId&gt;\n    &lt;artifactId&gt;asm&lt;/artifactId&gt;\n    &lt;version&gt;1.0.2&lt;/version&gt;\n    &lt;scope&gt;test&lt;/scope&gt;\n&lt;/dependency&gt;\n</code></pre>\n"}],"owner":{"account_id":390700,"reputation":4080,"user_id":750940,"accept_rate":44,"display_name":"Pradeep Vairamani"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":135548,"favorite_count":0,"down_vote_count":1,"up_vote_count":44,"answer_count":3,"score":43,"last_activity_date":1664230433,"creation_date":1489169877,"question_id":42725199,"body_markdown":"    MvcResult result = this.mockMvc.perform(\r\n                    MockMvcRequestBuilders.get(mockUrl))\r\n                    .andExpect(MockMvcResultMatchers.status().isOk())\r\n                .andExpect(MockMvcResultMatchers.content().contentType(&quot;application/    json;charset=UTF-8&quot;))\r\n                    .andDo(MockMvcResultHandlers.print())\r\n\r\nreturns the following:\r\n\r\n    MockHttpServletResponse:\r\n               Status = 200\r\n        Error message = null\r\n              Headers = {Content-Type=[application/json;charset=UTF-8]}\r\n         Content type = application/json;charset=UTF-8\r\n                 Body = {&quot;version&quot;:&quot;0.1&quot;}\r\n        Forwarded URL = null\r\n       Redirected URL = null\r\n              Cookies = []\r\n\r\nHowever, testing it with \r\n\r\n    MvcResult result = this.mockMvc.perform(\r\n                    MockMvcRequestBuilders.get(mockUrl))\r\n                    .andExpect(MockMvcResultMatchers.status().isOk())\r\n                .andExpect(MockMvcResultMatchers.content().contentType(&quot;application/    json;charset=UTF-8&quot;))\r\n                    .andExpect(jsonPath(&quot;$.version&quot;).value(&quot;0.1&quot;))\r\n\r\nreturns the following error:\r\n\r\n    java.lang.AssertionError: No value at JSON path &quot;$.version&quot;, exception: net/minidev/json/writer/JsonReaderI\r\n\r\n\tat org.springframework.test.util.JsonPathExpectationsHelper.evaluateJsonPath(JsonPathExpectationsHelper.java:245)\r\n\tat org.springframework.test.util.JsonPathExpectationsHelper.assertValue(JsonPathExpectationsHelper.java:99)\r\n\tat org.springframework.test.web.servlet.result.JsonPathResultMatchers$2.match(JsonPathResultMatchers.java:99)\r\n\tat org.springframework.test.web.servlet.MockMvc$1.andExpect(MockMvc.java:171)\r\n\tat com.vmware.skyscraper.rts.runbooks.RunbookControllerTest.testGetSingleRunbook(RunbookControllerTest.java:93)\r\n\tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n\tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\r\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n\tat java.lang.reflect.Method.invoke(Method.java:498)\r\n\tat org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:50)\r\n\tat org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)\r\n\tat org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:47)\r\n\tat org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)\r\n\tat org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)\r\n\tat org.springframework.test.context.junit4.statements.RunBeforeTestMethodCallbacks.evaluate(RunBeforeTestMethodCallbacks.java:75)\r\n\tat org.springframework.test.context.junit4.statements.RunAfterTestMethodCallbacks.evaluate(RunAfterTestMethodCallbacks.java:86)\r\n\tat org.springframework.test.context.junit4.statements.SpringRepeat.evaluate(SpringRepeat.java:84)\r\n\tat org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:325)\r\n\tat org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:252)\r\n\tat org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:94)\r\n\tat org.junit.runners.ParentRunner$3.run(ParentRunner.java:290)\r\n\tat org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:71)\r\n\tat org.junit.runners.ParentRunner.runChildren(ParentRunner.java:288)\r\n\tat org.junit.runners.ParentRunner.access$000(ParentRunner.java:58)\r\n\tat org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:268)\r\n\tat org.springframework.test.context.junit4.statements.RunBeforeTestClassCallbacks.evaluate(RunBeforeTestClassCallbacks.java:61)\r\n\tat org.springframework.test.context.junit4.statements.RunAfterTestClassCallbacks.evaluate(RunAfterTestClassCallbacks.java:70)\r\n\tat org.junit.runners.ParentRunner.run(ParentRunner.java:363)\r\n\tat org.springframework.test.context.junit4.SpringJUnit4ClassRunner.run(SpringJUnit4ClassRunner.java:191)\r\n\tat org.junit.runner.JUnitCore.run(JUnitCore.java:137)\r\n\tat com.intellij.junit4.JUnit4IdeaTestRunner.startRunnerWithArgs(JUnit4IdeaTestRunner.java:68)\r\n\tat com.intellij.rt.execution.junit.IdeaTestRunner$Repeater.startRunnerWithArgs(IdeaTestRunner.java:51)\r\n\tat com.intellij.rt.execution.junit.JUnitStarter.prepareStreamsAndStart(JUnitStarter.java:237)\r\n\tat com.intellij.rt.execution.junit.JUnitStarter.main(JUnitStarter.java:70)\r\n\tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n\tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\r\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n\tat java.lang.reflect.Method.invoke(Method.java:498)\r\n\tat com.intellij.rt.execution.application.AppMain.main(AppMain.java:147)\r\n\r\nHow do I use jsonPath?","title":"How to use MockMvcResultMatchers.jsonPath","body":"<pre><code>MvcResult result = this.mockMvc.perform(\n                MockMvcRequestBuilders.get(mockUrl))\n                .andExpect(MockMvcResultMatchers.status().isOk())\n            .andExpect(MockMvcResultMatchers.content().contentType(&quot;application/    json;charset=UTF-8&quot;))\n                .andDo(MockMvcResultHandlers.print())\n</code></pre>\n<p>returns the following:</p>\n<pre><code>MockHttpServletResponse:\n           Status = 200\n    Error message = null\n          Headers = {Content-Type=[application/json;charset=UTF-8]}\n     Content type = application/json;charset=UTF-8\n             Body = {&quot;version&quot;:&quot;0.1&quot;}\n    Forwarded URL = null\n   Redirected URL = null\n          Cookies = []\n</code></pre>\n<p>However, testing it with</p>\n<pre><code>MvcResult result = this.mockMvc.perform(\n                MockMvcRequestBuilders.get(mockUrl))\n                .andExpect(MockMvcResultMatchers.status().isOk())\n            .andExpect(MockMvcResultMatchers.content().contentType(&quot;application/    json;charset=UTF-8&quot;))\n                .andExpect(jsonPath(&quot;$.version&quot;).value(&quot;0.1&quot;))\n</code></pre>\n<p>returns the following error:</p>\n<pre><code>java.lang.AssertionError: No value at JSON path &quot;$.version&quot;, exception: net/minidev/json/writer/JsonReaderI\n\nat org.springframework.test.util.JsonPathExpectationsHelper.evaluateJsonPath(JsonPathExpectationsHelper.java:245)\nat org.springframework.test.util.JsonPathExpectationsHelper.assertValue(JsonPathExpectationsHelper.java:99)\nat org.springframework.test.web.servlet.result.JsonPathResultMatchers$2.match(JsonPathResultMatchers.java:99)\nat org.springframework.test.web.servlet.MockMvc$1.andExpect(MockMvc.java:171)\nat com.vmware.skyscraper.rts.runbooks.RunbookControllerTest.testGetSingleRunbook(RunbookControllerTest.java:93)\nat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\nat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\nat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\nat java.lang.reflect.Method.invoke(Method.java:498)\nat org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:50)\nat org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)\nat org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:47)\nat org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)\nat org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)\nat org.springframework.test.context.junit4.statements.RunBeforeTestMethodCallbacks.evaluate(RunBeforeTestMethodCallbacks.java:75)\nat org.springframework.test.context.junit4.statements.RunAfterTestMethodCallbacks.evaluate(RunAfterTestMethodCallbacks.java:86)\nat org.springframework.test.context.junit4.statements.SpringRepeat.evaluate(SpringRepeat.java:84)\nat org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:325)\nat org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:252)\nat org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:94)\nat org.junit.runners.ParentRunner$3.run(ParentRunner.java:290)\nat org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:71)\nat org.junit.runners.ParentRunner.runChildren(ParentRunner.java:288)\nat org.junit.runners.ParentRunner.access$000(ParentRunner.java:58)\nat org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:268)\nat org.springframework.test.context.junit4.statements.RunBeforeTestClassCallbacks.evaluate(RunBeforeTestClassCallbacks.java:61)\nat org.springframework.test.context.junit4.statements.RunAfterTestClassCallbacks.evaluate(RunAfterTestClassCallbacks.java:70)\nat org.junit.runners.ParentRunner.run(ParentRunner.java:363)\nat org.springframework.test.context.junit4.SpringJUnit4ClassRunner.run(SpringJUnit4ClassRunner.java:191)\nat org.junit.runner.JUnitCore.run(JUnitCore.java:137)\nat com.intellij.junit4.JUnit4IdeaTestRunner.startRunnerWithArgs(JUnit4IdeaTestRunner.java:68)\nat com.intellij.rt.execution.junit.IdeaTestRunner$Repeater.startRunnerWithArgs(IdeaTestRunner.java:51)\nat com.intellij.rt.execution.junit.JUnitStarter.prepareStreamsAndStart(JUnitStarter.java:237)\nat com.intellij.rt.execution.junit.JUnitStarter.main(JUnitStarter.java:70)\nat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\nat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\nat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\nat java.lang.reflect.Method.invoke(Method.java:498)\nat com.intellij.rt.execution.application.AppMain.main(AppMain.java:147)\n</code></pre>\n<p>How do I use jsonPath?</p>\n"},{"tags":["java","regex","split"],"comments":[{"owner":{"account_id":1111280,"reputation":6531,"user_id":1101692,"accept_rate":89,"display_name":"Shark"},"score":0,"creation_date":1664205743,"post_id":73856289,"comment_id":130412499,"body_markdown":"How about debugging it on something like [a regex debugger](https://www.debuggex.com/) ?","body":"How about debugging it on something like <a href=\"https://www.debuggex.com/\" rel=\"nofollow noreferrer\">a regex debugger</a> ?"},{"owner":{"account_id":974021,"reputation":63348,"user_id":995891,"accept_rate":83,"display_name":"zapl"},"score":0,"creation_date":1664230169,"post_id":73856289,"comment_id":130419508,"body_markdown":"btw, not all currency characters are put before the number, e.g. 12€ would be common in Europe. Also not everyone uses `.` as decimal separator. Germany uses `5.312,50€` to mean `€5,312.50` for example. See `NumberFormat.getCurrencyInstance(locale)`","body":"btw, not all currency characters are put before the number, e.g. 12€ would be common in Europe. Also not everyone uses <code>.</code> as decimal separator. Germany uses <code>5.312,50€</code> to mean <code>€5,312.50</code> for example. See <code>NumberFormat.getCurrencyInstance(locale)</code>"}],"answers":[{"tags":[],"owner":{"account_id":262968,"reputation":767120,"user_id":548225,"accept_rate":90,"display_name":"anubhava"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1664229767,"creation_date":1664207452,"answer_id":73856713,"question_id":73856289,"body_markdown":"Instead of `split`, you may use this simpler regex to get all the desired matches:\r\n\r\n```sh\r\n[$&#163;]\\w+[$&#163;]?|[^\\p{Punct}\\h]+\r\n```\r\n\r\n[RegEx Demo][1]\r\n\r\n\r\n  [1]: https://regex101.com/r/cNDbVz/1\r\n\r\n**RegEx Breakup:**\r\n\r\n- `[$&#163;]`: Match `$` or `&#163;`\r\n- `\\w+`: Match 1+ word chars\r\n- `[$&#163;]?`: Match optional `$` or `&#163;`\r\n- `|`: OR\r\n- `[^\\p{Punct}\\h]+`: Match 1+ of any char that are not whitespace or punctuation \r\n\r\n**Code:**\r\n\r\n```Java\r\nfinal String regex = &quot;[$&#163;]\\\\w+[$&#163;]?|[^\\\\p{Punct}\\\\h]+&quot;;\r\nfinal String string = &quot;fff.fre def $fff$ &#163;45112,662 $0.33445533 abc,def 12,34&quot;;\r\n        \r\nfinal Pattern pattern = Pattern.compile(regex);\r\nfinal Matcher matcher = pattern.matcher(string);\r\n        \r\nwhile (matcher.find()) {\r\n   System.out.println(&quot;token==&gt;&quot; + matcher.group());\r\n}\r\n```","title":"Java regex for preserving currency symbols along with comma and dot if they are surrounded by numbers","body":"<p>Instead of <code>split</code>, you may use this simpler regex to get all the desired matches:</p>\n<pre class=\"lang-bash prettyprint-override\"><code>[$£]\\w+[$£]?|[^\\p{Punct}\\h]+\n</code></pre>\n<p><a href=\"https://regex101.com/r/cNDbVz/1\" rel=\"nofollow noreferrer\">RegEx Demo</a></p>\n<p><strong>RegEx Breakup:</strong></p>\n<ul>\n<li><code>[$£]</code>: Match <code>$</code> or <code>£</code></li>\n<li><code>\\w+</code>: Match 1+ word chars</li>\n<li><code>[$£]?</code>: Match optional <code>$</code> or <code>£</code></li>\n<li><code>|</code>: OR</li>\n<li><code>[^\\p{Punct}\\h]+</code>: Match 1+ of any char that are not whitespace or punctuation</li>\n</ul>\n<p><strong>Code:</strong></p>\n<pre><code>final String regex = &quot;[$£]\\\\w+[$£]?|[^\\\\p{Punct}\\\\h]+&quot;;\nfinal String string = &quot;fff.fre def $fff$ £45112,662 $0.33445533 abc,def 12,34&quot;;\n        \nfinal Pattern pattern = Pattern.compile(regex);\nfinal Matcher matcher = pattern.matcher(string);\n        \nwhile (matcher.find()) {\n   System.out.println(&quot;token==&gt;&quot; + matcher.group());\n}\n</code></pre>\n"}],"owner":{"account_id":4252980,"reputation":118,"user_id":3479420,"accept_rate":40,"display_name":"Gunjan Aswani"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":56,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":73856713,"answer_count":1,"score":1,"last_activity_date":1664229767,"creation_date":1664205409,"question_id":73856289,"body_markdown":"This is my input string\r\n\r\n    String inputString = &quot;fff.fre def $fff$ &#163;45112,662 $0.33445533 abc,def 12,34&quot;\r\n\r\nI tried below regex to split \r\n\r\n    String[] tokens = inputString.split(&quot;(?![$&#163;](?=(\\\\d)*[.,]?(\\\\d)*))[\\\\p{Punct}\\\\s]&quot;);\r\n\r\nbut it is not preserving comma and dot if they are surrounded by numbers. Basically,I don&#39;t want to split by comma and dot if they are part of price value\r\n\r\nOutput I get is\r\n\r\n   \r\n    token==&gt;fff\r\n    token==&gt;fre\r\n    token==&gt;def\r\n    token==&gt;$fff$\r\n    token==&gt;&#163;45112\r\n    token==&gt;662\r\n    token==&gt;$0\r\n    token==&gt;33445533\r\n    token==&gt;abc\r\n    token==&gt;def\r\n    token==&gt;12\r\n    token==&gt;34\r\n\r\nExpected output \r\n\r\n    token==&gt;fff\r\n    token==&gt;fre\r\n    token==&gt;def\r\n    token==&gt;$fff$\r\n    token==&gt;&#163;45112.662\r\n    token==&gt;$0.33445533\r\n    token==&gt;abc\r\n    token==&gt;def\r\n    token==&gt;12\r\n    token==&gt;34\r\n\r\n\r\n","title":"Java regex for preserving currency symbols along with comma and dot if they are surrounded by numbers","body":"<p>This is my input string</p>\n<pre><code>String inputString = &quot;fff.fre def $fff$ £45112,662 $0.33445533 abc,def 12,34&quot;\n</code></pre>\n<p>I tried below regex to split</p>\n<pre><code>String[] tokens = inputString.split(&quot;(?![$£](?=(\\\\d)*[.,]?(\\\\d)*))[\\\\p{Punct}\\\\s]&quot;);\n</code></pre>\n<p>but it is not preserving comma and dot if they are surrounded by numbers. Basically,I don't want to split by comma and dot if they are part of price value</p>\n<p>Output I get is</p>\n<pre><code>token==&gt;fff\ntoken==&gt;fre\ntoken==&gt;def\ntoken==&gt;$fff$\ntoken==&gt;£45112\ntoken==&gt;662\ntoken==&gt;$0\ntoken==&gt;33445533\ntoken==&gt;abc\ntoken==&gt;def\ntoken==&gt;12\ntoken==&gt;34\n</code></pre>\n<p>Expected output</p>\n<pre><code>token==&gt;fff\ntoken==&gt;fre\ntoken==&gt;def\ntoken==&gt;$fff$\ntoken==&gt;£45112.662\ntoken==&gt;$0.33445533\ntoken==&gt;abc\ntoken==&gt;def\ntoken==&gt;12\ntoken==&gt;34\n</code></pre>\n"},{"tags":["java","spring","inversion-of-control","spring-bean"],"comments":[{"owner":{"account_id":8909811,"reputation":2612,"user_id":6650475,"display_name":"Andrew S"},"score":0,"creation_date":1664231418,"post_id":73860384,"comment_id":130419730,"body_markdown":"[This](https://stackoverflow.com/questions/39847730/how-can-i-build-a-database-based-spring-boot-environment-property-source) should be a good starting point - it&#39;s a few years old now, so some of the involved events/classes might have changed.","body":"<a href=\"https://stackoverflow.com/questions/39847730/how-can-i-build-a-database-based-spring-boot-environment-property-source\">This</a> should be a good starting point - it&#39;s a few years old now, so some of the involved events/classes might have changed."},{"owner":{"account_id":1223835,"reputation":75848,"user_id":1189885,"accept_rate":43,"display_name":"chrylis -cautiouslyoptimistic-"},"score":0,"creation_date":1664234404,"post_id":73860384,"comment_id":130420185,"body_markdown":"It sounds like what you really need is something like Spring Cloud Config, potentially with some auto-configuration classes.","body":"It sounds like what you really need is something like Spring Cloud Config, potentially with some auto-configuration classes."},{"owner":{"account_id":10659722,"reputation":43,"user_id":7848062,"display_name":"Sebastian Daza"},"score":0,"creation_date":1664235606,"post_id":73860384,"comment_id":130420352,"body_markdown":"@AndrewS Thanks I&#39;m gonna look at it,","body":"@AndrewS Thanks I&#39;m gonna look at it,"},{"owner":{"account_id":10659722,"reputation":43,"user_id":7848062,"display_name":"Sebastian Daza"},"score":0,"creation_date":1664235615,"post_id":73860384,"comment_id":130420353,"body_markdown":"@chrylis-cautiouslyoptimistic- even though spring cloud could be useful, I would still have the same scenario since I have to load the configurations and depending on the input value choose and send it to spring.","body":"@chrylis-cautiouslyoptimistic- even though spring cloud could be useful, I would still have the same scenario since I have to load the configurations and depending on the input value choose and send it to spring."},{"owner":{"account_id":1223835,"reputation":75848,"user_id":1189885,"accept_rate":43,"display_name":"chrylis -cautiouslyoptimistic-"},"score":0,"creation_date":1664258606,"post_id":73860384,"comment_id":130423746,"body_markdown":"Which is what auto-configuration is built for.","body":"Which is what auto-configuration is built for."},{"owner":{"account_id":10659722,"reputation":43,"user_id":7848062,"display_name":"Sebastian Daza"},"score":0,"creation_date":1664283825,"post_id":73860384,"comment_id":130432067,"body_markdown":"@chrylis-cautiouslyoptimistic- but only with the configurations that are predefined and not those of the database (which can be created on demand), we have already validated these options and they do not fit the needs. thanks","body":"@chrylis-cautiouslyoptimistic- but only with the configurations that are predefined and not those of the database (which can be created on demand), we have already validated these options and they do not fit the needs. thanks"}],"owner":{"account_id":10659722,"reputation":43,"user_id":7848062,"display_name":"Sebastian Daza"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":427,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1664229691,"creation_date":1664229691,"question_id":73860384,"body_markdown":"I have a few questions to accomplish what is required and I would appreciate your support.\r\n\r\nTo start with I have a configuration bean as shown below.\r\n\r\n    @Configuration\r\n    @ConfigurationProperties(prefix = &quot;level1.level2&quot;)\r\n    @Data\r\n    @Slf4j\r\n    public class Configuration{\r\n    \r\n    \t@NotEmpty\r\n    \tprivate String valueA;\r\n    \t@NotEmpty\r\n    \tprivate String valueB;\r\n    \r\n        //Another logic methods\r\n    }\r\n\r\nAs you can see the values value1 and value2 were previously injected through the property files, but due to some changes these values will be obtained by the database.\r\n\r\nHere is an example of the table&#39;s structure\r\n\r\n| ID | Name     | ValueA | ValueB |\r\n|:---- |:------:| -----:|-----:|\r\n| 1| test    | conf1|confA|\r\n| 2| otherValue| conf2 |  confB  |\r\n| 3| otherValue2    | conf1 | confC  |\r\n\r\nas you can see there can be multiple configurations, my initial idea is to be able to load all the initial configurations, and once I know which is the configuration I need (by means of a service request) get the corresponding information, create the bean and inject it in the subsequent beans (I don&#39;t know if it is possible yet).\r\n\r\nso thank you very much if you can give me some recommendations on how to handle this scenario.\r\n\r\nI tried with **BeanFactoryPostProcessor** but because this is for when I want to handle the beans once they are loaded but not instantiated, I still can&#39;t get the information from the database.\r\n\r\n\r\n\r\n\r\n\r\n","title":"Spring create configuration bean depending on database table values","body":"<p>I have a few questions to accomplish what is required and I would appreciate your support.</p>\n<p>To start with I have a configuration bean as shown below.</p>\n<pre><code>@Configuration\n@ConfigurationProperties(prefix = &quot;level1.level2&quot;)\n@Data\n@Slf4j\npublic class Configuration{\n\n    @NotEmpty\n    private String valueA;\n    @NotEmpty\n    private String valueB;\n\n    //Another logic methods\n}\n</code></pre>\n<p>As you can see the values value1 and value2 were previously injected through the property files, but due to some changes these values will be obtained by the database.</p>\n<p>Here is an example of the table's structure</p>\n<div class=\"s-table-container\">\n<table class=\"s-table\">\n<thead>\n<tr>\n<th style=\"text-align: left;\">ID</th>\n<th style=\"text-align: center;\">Name</th>\n<th style=\"text-align: right;\">ValueA</th>\n<th style=\"text-align: right;\">ValueB</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td style=\"text-align: left;\">1</td>\n<td style=\"text-align: center;\">test</td>\n<td style=\"text-align: right;\">conf1</td>\n<td style=\"text-align: right;\">confA</td>\n</tr>\n<tr>\n<td style=\"text-align: left;\">2</td>\n<td style=\"text-align: center;\">otherValue</td>\n<td style=\"text-align: right;\">conf2</td>\n<td style=\"text-align: right;\">confB</td>\n</tr>\n<tr>\n<td style=\"text-align: left;\">3</td>\n<td style=\"text-align: center;\">otherValue2</td>\n<td style=\"text-align: right;\">conf1</td>\n<td style=\"text-align: right;\">confC</td>\n</tr>\n</tbody>\n</table>\n</div>\n<p>as you can see there can be multiple configurations, my initial idea is to be able to load all the initial configurations, and once I know which is the configuration I need (by means of a service request) get the corresponding information, create the bean and inject it in the subsequent beans (I don't know if it is possible yet).</p>\n<p>so thank you very much if you can give me some recommendations on how to handle this scenario.</p>\n<p>I tried with <strong>BeanFactoryPostProcessor</strong> but because this is for when I want to handle the beans once they are loaded but not instantiated, I still can't get the information from the database.</p>\n"},{"tags":["java","hibernate","jsp","struts2"],"comments":[{"owner":{"account_id":2808454,"reputation":14373,"user_id":2415194,"accept_rate":87,"display_name":"nachokk"},"score":0,"creation_date":1371010017,"post_id":17057478,"comment_id":24664463,"body_markdown":"..i need complete source code... that things are bad.. what did you try to do?","body":"..i need complete source code... that things are bad.. what did you try to do?"},{"owner":{"account_id":2875863,"reputation":39,"user_id":2467950,"accept_rate":43,"display_name":"MoorthyKS"},"score":0,"creation_date":1371010483,"post_id":17057478,"comment_id":24664571,"body_markdown":"see the update:first  im new to struts2 can u help me to solve dis?","body":"see the update:first  im new to struts2 can u help me to solve dis?"}],"answers":[{"tags":[],"owner":{"account_id":2587959,"reputation":1082,"user_id":2334391,"accept_rate":80,"display_name":"jos"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1371011006,"creation_date":1371011006,"answer_id":17057644,"question_id":17057478,"body_markdown":"use the following methods in the action class\r\n\r\n    /**\r\n         * Convenience method to get the request.\r\n         * @return current request\r\n         */\r\n        protected HttpServletRequest getRequest() {\r\n    \treturn ServletActionContext.getRequest();\r\n        }\r\n    \r\n        /**\r\n         * Convenience method to get the response.\r\n         * @return current response.\r\n         */\r\n        protected HttpServletResponse getResponse() {\r\n    \treturn ServletActionContext.getResponse();\r\n        }\r\n    \r\n        /**\r\n         * Convenience method to get the session. This will create a session if one\r\n         * doesn&#39;t exist.\r\n         * @return the session from the request (request.getSession()).\r\n         */\r\n        protected HttpSession getSession() {\r\n    \treturn getRequest().getSession();\r\n        }\r\n\r\n\r\nand u can use this code inside execute method\r\n\r\n     getRequest().getSession().setAttribute(&quot;projectData&quot;, scheduleData);","title":"session maintain using struts2 and hibernate?","body":"<p>use the following methods in the action class</p>\n\n<pre><code>/**\n     * Convenience method to get the request.\n     * @return current request\n     */\n    protected HttpServletRequest getRequest() {\n    return ServletActionContext.getRequest();\n    }\n\n    /**\n     * Convenience method to get the response.\n     * @return current response.\n     */\n    protected HttpServletResponse getResponse() {\n    return ServletActionContext.getResponse();\n    }\n\n    /**\n     * Convenience method to get the session. This will create a session if one\n     * doesn't exist.\n     * @return the session from the request (request.getSession()).\n     */\n    protected HttpSession getSession() {\n    return getRequest().getSession();\n    }\n</code></pre>\n\n<p>and u can use this code inside execute method</p>\n\n<pre><code> getRequest().getSession().setAttribute(\"projectData\", scheduleData);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2808454,"reputation":14373,"user_id":2415194,"accept_rate":87,"display_name":"nachokk"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1664229612,"creation_date":1371011075,"answer_id":17057654,"question_id":17057478,"body_markdown":"First of all read [Best Practices When Using SessionAware][1]\r\n\r\n\r\n  [1]: https://struts.apache.org/getting-started/http-session\r\n\r\nI will give you hints, Struts2 follow `MVC pattern` (or a variation of this pattern). So you have your Presentation layer, there you send a event to your Controller (PersonAction) and here you have to communicate with your model (Business Layer DataBase,Person) , model returns or not something to the controller and the controller decide what to show.\r\n\r\nYour problem is that you are sending `PersonAction` to your `DataBase`  , you have to send `Person` that is mapped with hibernate :).\r\nAnd try not using static methods for this things cause if you are in a concurrent application many users will access to that method `saveData`\r\n\r\nThis is bad\r\n   \r\n\r\n     for (Person p : personList)\r\n                Database.saveData(this);\r\n\r\nYou have to do something like this\r\n  \r\n\r\n    Database.saveData(personList);\r\n\r\nAnd in Database class define a method\r\n\r\n    public static int saveData(List&lt;Person&gt; person)\r\n\r\n\r\nAlso in your `Person` class you have to map name property\r\n\r\n **NOTE** I don`t recommend using static method for this kind of things\r\n\r\n","title":"session maintain using struts2 and hibernate?","body":"<p>First of all read <a href=\"https://struts.apache.org/getting-started/http-session\" rel=\"nofollow noreferrer\">Best Practices When Using SessionAware</a></p>\n<p>I will give you hints, Struts2 follow <code>MVC pattern</code> (or a variation of this pattern). So you have your Presentation layer, there you send a event to your Controller (PersonAction) and here you have to communicate with your model (Business Layer DataBase,Person) , model returns or not something to the controller and the controller decide what to show.</p>\n<p>Your problem is that you are sending <code>PersonAction</code> to your <code>DataBase</code>  , you have to send <code>Person</code> that is mapped with hibernate :).\nAnd try not using static methods for this things cause if you are in a concurrent application many users will access to that method <code>saveData</code></p>\n<p>This is bad</p>\n<pre><code> for (Person p : personList)\n            Database.saveData(this);\n</code></pre>\n<p>You have to do something like this</p>\n<pre><code>Database.saveData(personList);\n</code></pre>\n<p>And in Database class define a method</p>\n<pre><code>public static int saveData(List&lt;Person&gt; person)\n</code></pre>\n<p>Also in your <code>Person</code> class you have to map name property</p>\n<p><strong>NOTE</strong> I don`t recommend using static method for this kind of things</p>\n"},{"tags":[],"owner":{"account_id":2102673,"reputation":35121,"user_id":1869846,"accept_rate":56,"display_name":"Ruchira Gayan Ranaweera"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1371011818,"creation_date":1371011818,"answer_id":17057746,"question_id":17057478,"body_markdown":"Build your SessionFactory as follows.\r\n\r\n    sessionFactory = new Configuration().configure().buildSessionFactory();\r\n\r\n","title":"session maintain using struts2 and hibernate?","body":"<p>Build your SessionFactory as follows.</p>\n\n<pre><code>sessionFactory = new Configuration().configure().buildSessionFactory();\n</code></pre>\n"}],"owner":{"account_id":2875863,"reputation":39,"user_id":2467950,"accept_rate":43,"display_name":"MoorthyKS"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1288,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"accepted_answer_id":17057654,"answer_count":3,"score":-1,"last_activity_date":1664229612,"creation_date":1371009757,"question_id":17057478,"body_markdown":"I need to know how to maintain session for one form and multiple input[Name,City,Country] using Struts2 and finally data will stored to database using hibernate.\r\n\r\nThis form have two buttons:\r\n\r\n - add (stored to session);\r\n - Submit (stored to database).\r\n - First, enter the form details [name city and country] and click add button data will store to session.\r\n\r\n - Second, enter the details for same and now click add.\r\n\r\n - Third, enter same form details but now click submit button all details (first second &amp; third) will stored to database using hibernate.\r\n\r\npls help me to solve dis...\r\n\r\n           \r\nPerson.java :\r\n\r\n   \r\n\r\n     @Entity\r\n        public class Person {\r\n        \t@Id\r\n        \t@GeneratedValue\r\n        \tprivate int id;\r\n        \tprivate String name;\r\n        \tpublic int getId() {\r\n        \t\treturn id;\r\n        \t}\r\n        \tpublic void setId(int id) {\r\n        \t\tthis.id = id;\r\n        \t}\r\n        \tpublic String getName() {\r\n        \t\treturn name;\r\n        \t}\r\n        \tpublic void setName(String name) {\r\n        \t\tthis.name = name;\r\n        \t}\r\n        }  \r\n\r\nPersonAction.java:      \r\n\r\n    public class PersonAction extends ActionSupport implements SessionAware {\r\n    \r\n    \t  private Person person = new Person();\r\n    \t // Database base=new Database();\r\n    \r\n    \t  public Person getPerson() {\r\n    \t    return person;\r\n    \t  }\r\n    \r\n    \t  public void setPerson(Person person){\r\n    \t    this.person = person;\r\n    \t  }\r\n    \r\n    \t  private Map&lt;String, Object&gt; session;\r\n    \r\n    \t  public void setSession(Map&lt;String, Object&gt; session){\r\n    \t    this.session = session;\r\n    \t  }\r\n    \r\n    \t  public String execute() { //Create persons\r\n    \t    List&lt;Person&gt; personList = (List&lt;Person&gt;) session.get(&quot;personList&quot;);\r\n    \t    for (Person p : personList)\r\n    \t    Database.saveData(this);\r\n    \t    personList.clear();\r\n    \t    return SUCCESS;\r\n    \t  }\r\n    \r\n    \t  public String add() { //Add person\r\n    \t    List&lt;Person&gt; personList = (List&lt;Person&gt;) session.get(&quot;personList&quot;);\r\n    \t    if (personList == null) {\r\n    \t      personList = new ArrayList&lt;Person&gt;();\r\n    \t      session.put(&quot;personList&quot;, personList);\r\n    \t      System.out.println(&quot;Successfully added&quot;);\r\n    \t    }\r\n    \t    personList.add(person);\r\n    \t    return SUCCESS;\r\n    \r\n    \t  }\r\n    \r\n    \t} \r\n\r\nDatabase.java:        \r\n\r\n    public class Database {\r\n    public static int saveData(PersonAction personAction){\r\n    \t\tSessionFactory sf=new AnnotationConfiguration().configure().buildSessionFactory();\r\n    \t\tSession session=sf.openSession();\r\n    \t\tTransaction tran=session.beginTransaction();\r\n    \tint i=(Integer)session.save(personAction);\r\n    \ttran.commit();\r\n    \tsession.close();\r\n    \treturn i;\r\n    \r\n    \t}\r\n    }   \r\n\r\n struts.xml:     \r\n\r\n    \r\n\r\n    &lt;struts&gt;\r\n    \t&lt;package name=&quot;default&quot; extends=&quot;struts-default&quot;&gt;\r\n    \t\t&lt;action name=&quot;person&quot; class=&quot;org.PersonAction&quot;&gt;\r\n    \t\t\t&lt;result&gt;/person.jsp&lt;/result&gt;\r\n    \t\t&lt;/action&gt;\r\n    \t\t&lt;action name=&quot;person&quot; class=&quot;org.PersonAction&quot; method=&quot;add&quot;&gt;\r\n    \t\t\t&lt;result&gt;/person.jsp&lt;/result&gt;\r\n    \t\t&lt;/action&gt;\r\n    \t&lt;/package&gt;\r\n    &lt;/struts&gt; \r\n\r\n   \r\n\r\nindex.jsp:     \r\n\r\n    &lt;s:form action=&quot;person&quot;&gt;\r\n        &lt;s:textfield label=&quot;Enter your name&quot; name=&quot;name&quot;/&gt;\r\n        &lt;s:submit value=&quot;Add person&quot; method=&quot;add&quot;/&gt;\r\n        &lt;s:submit value=&quot;Create persons&quot;/&gt;\r\n    &lt;/s:form&gt; \r\n\r\n      \r\nperson.jsp:    \r\n \r\n\r\n    &lt;body&gt;\r\n    &lt;s:property value=&quot;#session.name&quot;/&gt;\r\n    &lt;/body&gt;","title":"session maintain using struts2 and hibernate?","body":"<p>I need to know how to maintain session for one form and multiple input[Name,City,Country] using Struts2 and finally data will stored to database using hibernate.</p>\n\n<p>This form have two buttons:</p>\n\n<ul>\n<li>add (stored to session);</li>\n<li>Submit (stored to database).</li>\n<li><p>First, enter the form details [name city and country] and click add button data will store to session.</p></li>\n<li><p>Second, enter the details for same and now click add.</p></li>\n<li><p>Third, enter same form details but now click submit button all details (first second &amp; third) will stored to database using hibernate.</p></li>\n</ul>\n\n<p>pls help me to solve dis...</p>\n\n<p>Person.java :</p>\n\n<pre><code> @Entity\n    public class Person {\n        @Id\n        @GeneratedValue\n        private int id;\n        private String name;\n        public int getId() {\n            return id;\n        }\n        public void setId(int id) {\n            this.id = id;\n        }\n        public String getName() {\n            return name;\n        }\n        public void setName(String name) {\n            this.name = name;\n        }\n    }  \n</code></pre>\n\n<p>PersonAction.java:      </p>\n\n<pre><code>public class PersonAction extends ActionSupport implements SessionAware {\n\n      private Person person = new Person();\n     // Database base=new Database();\n\n      public Person getPerson() {\n        return person;\n      }\n\n      public void setPerson(Person person){\n        this.person = person;\n      }\n\n      private Map&lt;String, Object&gt; session;\n\n      public void setSession(Map&lt;String, Object&gt; session){\n        this.session = session;\n      }\n\n      public String execute() { //Create persons\n        List&lt;Person&gt; personList = (List&lt;Person&gt;) session.get(\"personList\");\n        for (Person p : personList)\n        Database.saveData(this);\n        personList.clear();\n        return SUCCESS;\n      }\n\n      public String add() { //Add person\n        List&lt;Person&gt; personList = (List&lt;Person&gt;) session.get(\"personList\");\n        if (personList == null) {\n          personList = new ArrayList&lt;Person&gt;();\n          session.put(\"personList\", personList);\n          System.out.println(\"Successfully added\");\n        }\n        personList.add(person);\n        return SUCCESS;\n\n      }\n\n    } \n</code></pre>\n\n<p>Database.java:        </p>\n\n<pre><code>public class Database {\npublic static int saveData(PersonAction personAction){\n        SessionFactory sf=new AnnotationConfiguration().configure().buildSessionFactory();\n        Session session=sf.openSession();\n        Transaction tran=session.beginTransaction();\n    int i=(Integer)session.save(personAction);\n    tran.commit();\n    session.close();\n    return i;\n\n    }\n}   \n</code></pre>\n\n<p>struts.xml:     </p>\n\n<pre><code>&lt;struts&gt;\n    &lt;package name=\"default\" extends=\"struts-default\"&gt;\n        &lt;action name=\"person\" class=\"org.PersonAction\"&gt;\n            &lt;result&gt;/person.jsp&lt;/result&gt;\n        &lt;/action&gt;\n        &lt;action name=\"person\" class=\"org.PersonAction\" method=\"add\"&gt;\n            &lt;result&gt;/person.jsp&lt;/result&gt;\n        &lt;/action&gt;\n    &lt;/package&gt;\n&lt;/struts&gt; \n</code></pre>\n\n<p>index.jsp:     </p>\n\n<pre><code>&lt;s:form action=\"person\"&gt;\n    &lt;s:textfield label=\"Enter your name\" name=\"name\"/&gt;\n    &lt;s:submit value=\"Add person\" method=\"add\"/&gt;\n    &lt;s:submit value=\"Create persons\"/&gt;\n&lt;/s:form&gt; \n</code></pre>\n\n<p>person.jsp:    </p>\n\n<pre><code>&lt;body&gt;\n&lt;s:property value=\"#session.name\"/&gt;\n&lt;/body&gt;\n</code></pre>\n"},{"tags":["java","thermal-printer"],"comments":[{"owner":{"account_id":974021,"reputation":63348,"user_id":995891,"accept_rate":83,"display_name":"zapl"},"score":2,"creation_date":1664229702,"post_id":73860334,"comment_id":130419425,"body_markdown":"what are &quot;latin characters&quot; (really the latin alphabet a-z)? `text.getBytes(&quot;utf-8&quot;);` might be the issue but finding the right kind of character encoding could be tricky if there&#39;s no information what the printer / API accepts.","body":"what are &quot;latin characters&quot; (really the latin alphabet a-z)? <code>text.getBytes(&quot;utf-8&quot;);</code> might be the issue but finding the right kind of character encoding could be tricky if there&#39;s no information what the printer / API accepts."},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1664235252,"post_id":73860334,"comment_id":130420312,"body_markdown":"If you&#39;ve got a string, then why not ```DocFlavor.STRING``` ?","body":"If you&#39;ve got a string, then why not <code>DocFlavor.STRING</code> ?"},{"owner":{"account_id":6606677,"reputation":1024,"user_id":5103317,"display_name":"Old Dog Programmer"},"score":0,"creation_date":1664243816,"post_id":73860334,"comment_id":130421499,"body_markdown":"How well do non-java applications work with the printer?  Could you, for example,  enter something into a text editor, and print that?","body":"How well do non-java applications work with the printer?  Could you, for example,  enter something into a text editor, and print that?"},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":1,"creation_date":1664262620,"post_id":73860334,"comment_id":130424765,"body_markdown":"Make and model number please","body":"Make and model number please"}],"owner":{"account_id":18197254,"reputation":11,"user_id":13242085,"display_name":"Homarzx"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":49,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1664229310,"creation_date":1664229310,"question_id":73860334,"body_markdown":"I have a text printer which prints without any problem, but it does not print Latin characters, I have tried changing the CharsetCode, printing from a pdf and it does not work with Latin characters\r\nThis is my code currently\r\n\r\n    public static boolean print(String text,String printer){\r\n        DocFlavor docFormat = DocFlavor.BYTE_ARRAY.AUTOSENSE;\r\n        PrintService defaultPrintService = getPrinter(printer);\r\n        DocPrintJob printJob = defaultPrintService.createPrintJob();\r\n        try {\r\n            byte[] bytes = text.getBytes(&quot;utf-8&quot;);\r\n            Doc doc = new SimpleDoc(bytes, docFormat, null);\r\n            System.out.println(doc.getPrintData());\r\n            System.out.println(&quot;drag&quot;);\r\n            printJob.print(doc, null);\r\n        }catch (Exception ee) {\r\n            return false;\r\n        }\r\n        return true;   \r\n    }","title":"Java - Problem with Latin characters in thermal printer","body":"<p>I have a text printer which prints without any problem, but it does not print Latin characters, I have tried changing the CharsetCode, printing from a pdf and it does not work with Latin characters\nThis is my code currently</p>\n<pre><code>public static boolean print(String text,String printer){\n    DocFlavor docFormat = DocFlavor.BYTE_ARRAY.AUTOSENSE;\n    PrintService defaultPrintService = getPrinter(printer);\n    DocPrintJob printJob = defaultPrintService.createPrintJob();\n    try {\n        byte[] bytes = text.getBytes(&quot;utf-8&quot;);\n        Doc doc = new SimpleDoc(bytes, docFormat, null);\n        System.out.println(doc.getPrintData());\n        System.out.println(&quot;drag&quot;);\n        printJob.print(doc, null);\n    }catch (Exception ee) {\n        return false;\n    }\n    return true;   \n}\n</code></pre>\n"},{"tags":["java","spring-boot","websocket","stomp","sockjs"],"answers":[{"tags":[],"owner":{"account_id":1674328,"reputation":2652,"user_id":1540177,"display_name":"grekier"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1653917704,"creation_date":1653917704,"answer_id":72435238,"question_id":72435036,"body_markdown":"The server seems to want to write a `LinkedHashMap` as `application/javascript;charset=UTF-8` and cannot find a converter to do so. Which makes sense.\r\n\r\nI guess the return type (probably mime-type here but could be java type) is wrong. We would need a look at your endpoint to give a better answer on how to fix this.","title":"Spring boot stomp server gives warning for resolved org.springframework.http.converter.HttpMessageNotWritableException","body":"<p>The server seems to want to write a <code>LinkedHashMap</code> as <code>application/javascript;charset=UTF-8</code> and cannot find a converter to do so. Which makes sense.</p>\n<p>I guess the return type (probably mime-type here but could be java type) is wrong. We would need a look at your endpoint to give a better answer on how to fix this.</p>\n"}],"owner":{"account_id":11322917,"reputation":765,"user_id":15074748,"display_name":"pacman"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":645,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1664228907,"creation_date":1653916869,"question_id":72435036,"body_markdown":"I have been working with spring boot and stomp server for sometime now. After using it for sometime I found that my logs are filled with the following waring messages.\r\n\r\n```\r\n08:58:36.026 [38] [http-nio-8080-exec-8] WARN  org.springframework.web.servlet.mvc.support.DefaultHandlerExceptionResolver - Resolved [org.springframework.http.converter.HttpMessageNotWritableException: No converter for [class java.util.LinkedHashMap] with preset Content-Type &#39;application/javascript;charset=UTF-8&#39;],\r\n```\r\n\r\nTo investigate further what is happening I set spring framework logging to `TRACE` and the rest of the log is given below.\r\n\r\n```\r\n08:58:35.991 [94] [clientOutboundChannel-14] TRACE org.springframework.web.socket.sockjs.transport.handler.XhrStreamingTransportHandler$XhrStreamingSockJsSession - 1 message(s) to flush in session d3zz_wqj,\r\n08:58:35.991 [94] [clientOutboundChannel-14] TRACE org.springframework.web.socket.sockjs.transport.handler.XhrStreamingTransportHandler$XhrStreamingSockJsSession - Session is active, ready to flush.,\r\n08:58:35.991 [94] [clientOutboundChannel-14] TRACE org.springframework.web.socket.sockjs.transport.handler.XhrStreamingTransportHandler$XhrStreamingSockJsSession - Preparing to write SockJsFrame content=&#39;a[\\&quot;\\\\n\\&quot;]&#39;,\r\n08:58:35.991 [94] [clientOutboundChannel-14] TRACE org.springframework.web.socket.sockjs.transport.handler.XhrStreamingTransportHandler$XhrStreamingSockJsSession - Writing to HTTP response: a[\\&quot;\\\\n\\&quot;],\r\n08:58:35.992 [94] [clientOutboundChannel-14] TRACE org.springframework.web.socket.sockjs.DisconnectedClient - Looks like the client has gone away,\r\n08:58:35.994 [94] [clientOutboundChannel-14] DEBUG org.springframework.web.socket.sockjs.transport.handler.XhrStreamingTransportHandler$XhrStreamingSockJsSession - Closing SockJS session d3zz_wqj with CloseStatus[code=1011, reason=null],\r\n08:58:35.994 [94] [clientOutboundChannel-14] DEBUG org.springframework.web.socket.handler.LoggingWebSocketHandlerDecorator - XhrStreamingSockJsSession[id=d3zz_wqj] closed with CloseStatus[code=1011, reason=null],\r\n08:58:35.994 [94] [clientOutboundChannel-14] DEBUG org.springframework.web.socket.messaging.SubProtocolWebSocketHandler - Clearing session d3zz_wqj,\r\n08:58:35.994 [94] [clientOutboundChannel-14] TRACE org.springframework.beans.factory.support.DefaultListableBeanFactory - Returning cached instance of singleton bean &#39;getTracer&#39;,\r\n08:58:35.994 [102] [clientInboundChannel-21] TRACE org.springframework.beans.factory.support.DefaultListableBeanFactory - Returning cached instance of singleton bean &#39;getTracer&#39;,\r\n08:58:35.994 [94] [clientOutboundChannel-14] TRACE org.springframework.beans.factory.support.DefaultListableBeanFactory - Returning cached instance of singleton bean &#39;getTracer&#39;,\r\n08:58:35.994 [100] [clientInboundChannel-19] TRACE org.springframework.beans.factory.support.DefaultListableBeanFactory - Returning cached instance of singleton bean &#39;getTracer&#39;,\r\n08:58:35.994 [94] [clientOutboundChannel-14] TRACE org.springframework.beans.factory.support.DefaultListableBeanFactory - Returning cached instance of singleton bean &#39;getTracer&#39;,\r\n08:58:35.994 [103] [clientInboundChannel-22] TRACE org.springframework.beans.factory.support.DefaultListableBeanFactory - Returning cached instance of singleton bean &#39;getTracer&#39;,\r\n08:58:35.994 [103] [clientInboundChannel-22] DEBUG org.springframework.messaging.simp.stomp.StompBrokerRelayMessageHandler - Forwarding DISCONNECT session=d3zz_wqj,\r\n08:58:35.994 [103] [clientInboundChannel-22] TRACE org.springframework.messaging.simp.stomp.StompEncoder - Encoding STOMP DISCONNECT, headers=null,\r\n08:58:35.996 [46] [tcp-client-loop-nio-4] DEBUG org.springframework.messaging.simp.stomp.StompBrokerRelayMessageHandler - Cleaning up connection state for session d3zz_wqj,\r\n08:58:35.996 [46] [tcp-client-loop-nio-4] DEBUG org.springframework.messaging.simp.stomp.StompBrokerRelayMessageHandler - Closing TCP connection in session d3zz_wqj,\r\n08:58:35.998 [94] [clientOutboundChannel-14] DEBUG org.springframework.web.socket.messaging.StompSubProtocolHandler - Failed to send WebSocket message to client in session d3zz_wqj,\r\n08:58:36.005 [38] [http-nio-8080-exec-8] TRACE org.springframework.boot.web.servlet.filter.OrderedRequestContextFilter - Bound request context to thread: org.apache.catalina.core.ApplicationHttpRequest@2f4e2263&quot;,\r\n08:58:36.005 [38] [http-nio-8080-exec-8] TRACE org.springframework.web.servlet.DispatcherServlet - \\&quot;INCLUDE\\&quot; dispatch for POST \\&quot;/socket/error\\&quot;, parameters={}, headers={masked} in DispatcherServlet &#39;dispatcherServlet&#39;,\r\n08:58:36.010 [38] [http-nio-8080-exec-8] TRACE org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping - 2 matching mappings: [{ [/error]}, { [/error], produces [text/html]}],\r\n08:58:36.010 [38] [http-nio-8080-exec-8] TRACE org.springframework.beans.factory.support.DefaultListableBeanFactory - Returning cached instance of singleton bean &#39;basicErrorController&#39;,\r\n08:58:36.010 [38] [http-nio-8080-exec-8] TRACE org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping - Mapped to org.springframework.boot.autoconfigure.web.servlet.error.BasicErrorController#error(HttpServletRequest),\r\n08:58:36.018 [38] [http-nio-8080-exec-8] TRACE org.springframework.web.method.HandlerMethod - Arguments: [org.apache.catalina.core.ApplicationHttpRequest@2f4e2263],\r\n08:58:36.021 [38] [http-nio-8080-exec-8] DEBUG org.springframework.web.servlet.mvc.method.annotation.HttpEntityMethodProcessor - Found &#39;Content-Type:application/javascript;charset=UTF-8&#39; in response,\r\n08:58:36.022 [38] [http-nio-8080-exec-8] TRACE org.springframework.web.method.HandlerMethod - Error handling return value=[&lt;200 OK OK,{timestamp=Fri May 27 08:58:36 UTC 2022, status=200, error=OK, path=/socket/ws/067/d3zz_wqj/xhr_streaming},[]&gt;], type=org.springframework.http.ResponseEntity in org.springframework.boot.autoconfigure.web.servlet.error.BasicErrorController#error(HttpServletRequest),\r\n08:58:36.026 [38] [http-nio-8080-exec-8] WARN  org.springframework.web.servlet.mvc.support.DefaultHandlerExceptionResolver - Resolved [org.springframework.http.converter.HttpMessageNotWritableException: No converter for [class java.util.LinkedHashMap] with preset Content-Type &#39;application/javascript;charset=UTF-8&#39;],\r\n08:58:36.026 [38] [http-nio-8080-exec-8] TRACE org.springframework.web.servlet.DispatcherServlet - No view rendering, null ModelAndView returned.,\r\n08:58:36.027 [38] [http-nio-8080-exec-8] DEBUG org.springframework.web.servlet.DispatcherServlet - Exiting from \\&quot;INCLUDE\\&quot; dispatch, status 200, headers={masked},\r\n08:58:36.027 [38] [http-nio-8080-exec-8] TRACE org.springframework.boot.web.servlet.filter.OrderedRequestContextFilter - Cleared thread-bound request context: org.apache.catalina.core.ApplicationHttpRequest@2f4e2263,\r\n\r\n```\r\n\r\nLooking at the logs I can see that before the server could send the frame `a[&quot;\\n&quot;]` to the client, the client has already disconnected and trying to send the frame to closed socket is causing the error. Is there any proper way to handle this error?\r\n\r\n","title":"Spring boot stomp server gives warning for resolved org.springframework.http.converter.HttpMessageNotWritableException","body":"<p>I have been working with spring boot and stomp server for sometime now. After using it for sometime I found that my logs are filled with the following waring messages.</p>\n<pre><code>08:58:36.026 [38] [http-nio-8080-exec-8] WARN  org.springframework.web.servlet.mvc.support.DefaultHandlerExceptionResolver - Resolved [org.springframework.http.converter.HttpMessageNotWritableException: No converter for [class java.util.LinkedHashMap] with preset Content-Type 'application/javascript;charset=UTF-8'],\n</code></pre>\n<p>To investigate further what is happening I set spring framework logging to <code>TRACE</code> and the rest of the log is given below.</p>\n<pre><code>08:58:35.991 [94] [clientOutboundChannel-14] TRACE org.springframework.web.socket.sockjs.transport.handler.XhrStreamingTransportHandler$XhrStreamingSockJsSession - 1 message(s) to flush in session d3zz_wqj,\n08:58:35.991 [94] [clientOutboundChannel-14] TRACE org.springframework.web.socket.sockjs.transport.handler.XhrStreamingTransportHandler$XhrStreamingSockJsSession - Session is active, ready to flush.,\n08:58:35.991 [94] [clientOutboundChannel-14] TRACE org.springframework.web.socket.sockjs.transport.handler.XhrStreamingTransportHandler$XhrStreamingSockJsSession - Preparing to write SockJsFrame content='a[\\&quot;\\\\n\\&quot;]',\n08:58:35.991 [94] [clientOutboundChannel-14] TRACE org.springframework.web.socket.sockjs.transport.handler.XhrStreamingTransportHandler$XhrStreamingSockJsSession - Writing to HTTP response: a[\\&quot;\\\\n\\&quot;],\n08:58:35.992 [94] [clientOutboundChannel-14] TRACE org.springframework.web.socket.sockjs.DisconnectedClient - Looks like the client has gone away,\n08:58:35.994 [94] [clientOutboundChannel-14] DEBUG org.springframework.web.socket.sockjs.transport.handler.XhrStreamingTransportHandler$XhrStreamingSockJsSession - Closing SockJS session d3zz_wqj with CloseStatus[code=1011, reason=null],\n08:58:35.994 [94] [clientOutboundChannel-14] DEBUG org.springframework.web.socket.handler.LoggingWebSocketHandlerDecorator - XhrStreamingSockJsSession[id=d3zz_wqj] closed with CloseStatus[code=1011, reason=null],\n08:58:35.994 [94] [clientOutboundChannel-14] DEBUG org.springframework.web.socket.messaging.SubProtocolWebSocketHandler - Clearing session d3zz_wqj,\n08:58:35.994 [94] [clientOutboundChannel-14] TRACE org.springframework.beans.factory.support.DefaultListableBeanFactory - Returning cached instance of singleton bean 'getTracer',\n08:58:35.994 [102] [clientInboundChannel-21] TRACE org.springframework.beans.factory.support.DefaultListableBeanFactory - Returning cached instance of singleton bean 'getTracer',\n08:58:35.994 [94] [clientOutboundChannel-14] TRACE org.springframework.beans.factory.support.DefaultListableBeanFactory - Returning cached instance of singleton bean 'getTracer',\n08:58:35.994 [100] [clientInboundChannel-19] TRACE org.springframework.beans.factory.support.DefaultListableBeanFactory - Returning cached instance of singleton bean 'getTracer',\n08:58:35.994 [94] [clientOutboundChannel-14] TRACE org.springframework.beans.factory.support.DefaultListableBeanFactory - Returning cached instance of singleton bean 'getTracer',\n08:58:35.994 [103] [clientInboundChannel-22] TRACE org.springframework.beans.factory.support.DefaultListableBeanFactory - Returning cached instance of singleton bean 'getTracer',\n08:58:35.994 [103] [clientInboundChannel-22] DEBUG org.springframework.messaging.simp.stomp.StompBrokerRelayMessageHandler - Forwarding DISCONNECT session=d3zz_wqj,\n08:58:35.994 [103] [clientInboundChannel-22] TRACE org.springframework.messaging.simp.stomp.StompEncoder - Encoding STOMP DISCONNECT, headers=null,\n08:58:35.996 [46] [tcp-client-loop-nio-4] DEBUG org.springframework.messaging.simp.stomp.StompBrokerRelayMessageHandler - Cleaning up connection state for session d3zz_wqj,\n08:58:35.996 [46] [tcp-client-loop-nio-4] DEBUG org.springframework.messaging.simp.stomp.StompBrokerRelayMessageHandler - Closing TCP connection in session d3zz_wqj,\n08:58:35.998 [94] [clientOutboundChannel-14] DEBUG org.springframework.web.socket.messaging.StompSubProtocolHandler - Failed to send WebSocket message to client in session d3zz_wqj,\n08:58:36.005 [38] [http-nio-8080-exec-8] TRACE org.springframework.boot.web.servlet.filter.OrderedRequestContextFilter - Bound request context to thread: org.apache.catalina.core.ApplicationHttpRequest@2f4e2263&quot;,\n08:58:36.005 [38] [http-nio-8080-exec-8] TRACE org.springframework.web.servlet.DispatcherServlet - \\&quot;INCLUDE\\&quot; dispatch for POST \\&quot;/socket/error\\&quot;, parameters={}, headers={masked} in DispatcherServlet 'dispatcherServlet',\n08:58:36.010 [38] [http-nio-8080-exec-8] TRACE org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping - 2 matching mappings: [{ [/error]}, { [/error], produces [text/html]}],\n08:58:36.010 [38] [http-nio-8080-exec-8] TRACE org.springframework.beans.factory.support.DefaultListableBeanFactory - Returning cached instance of singleton bean 'basicErrorController',\n08:58:36.010 [38] [http-nio-8080-exec-8] TRACE org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping - Mapped to org.springframework.boot.autoconfigure.web.servlet.error.BasicErrorController#error(HttpServletRequest),\n08:58:36.018 [38] [http-nio-8080-exec-8] TRACE org.springframework.web.method.HandlerMethod - Arguments: [org.apache.catalina.core.ApplicationHttpRequest@2f4e2263],\n08:58:36.021 [38] [http-nio-8080-exec-8] DEBUG org.springframework.web.servlet.mvc.method.annotation.HttpEntityMethodProcessor - Found 'Content-Type:application/javascript;charset=UTF-8' in response,\n08:58:36.022 [38] [http-nio-8080-exec-8] TRACE org.springframework.web.method.HandlerMethod - Error handling return value=[&lt;200 OK OK,{timestamp=Fri May 27 08:58:36 UTC 2022, status=200, error=OK, path=/socket/ws/067/d3zz_wqj/xhr_streaming},[]&gt;], type=org.springframework.http.ResponseEntity in org.springframework.boot.autoconfigure.web.servlet.error.BasicErrorController#error(HttpServletRequest),\n08:58:36.026 [38] [http-nio-8080-exec-8] WARN  org.springframework.web.servlet.mvc.support.DefaultHandlerExceptionResolver - Resolved [org.springframework.http.converter.HttpMessageNotWritableException: No converter for [class java.util.LinkedHashMap] with preset Content-Type 'application/javascript;charset=UTF-8'],\n08:58:36.026 [38] [http-nio-8080-exec-8] TRACE org.springframework.web.servlet.DispatcherServlet - No view rendering, null ModelAndView returned.,\n08:58:36.027 [38] [http-nio-8080-exec-8] DEBUG org.springframework.web.servlet.DispatcherServlet - Exiting from \\&quot;INCLUDE\\&quot; dispatch, status 200, headers={masked},\n08:58:36.027 [38] [http-nio-8080-exec-8] TRACE org.springframework.boot.web.servlet.filter.OrderedRequestContextFilter - Cleared thread-bound request context: org.apache.catalina.core.ApplicationHttpRequest@2f4e2263,\n\n</code></pre>\n<p>Looking at the logs I can see that before the server could send the frame <code>a[&quot;\\n&quot;]</code> to the client, the client has already disconnected and trying to send the frame to closed socket is causing the error. Is there any proper way to handle this error?</p>\n"},{"tags":["java","spring","logging","spring-webflux","spring-webclient"],"comments":[{"owner":{"account_id":2064278,"reputation":13129,"user_id":1840146,"accept_rate":86,"display_name":"Toerktumlare"},"score":0,"creation_date":1563561215,"post_id":57108631,"comment_id":100754416,"body_markdown":"This to my knowledge not possible because webflux is a wrapper round a netty client and a body inserter is just a passed lambda function that is to be executed when the actual request is made.","body":"This to my knowledge not possible because webflux is a wrapper round a netty client and a body inserter is just a passed lambda function that is to be executed when the actual request is made."},{"owner":{"account_id":466186,"reputation":1171,"user_id":870783,"display_name":"Marcin Szulc"},"score":1,"creation_date":1563657045,"post_id":57108631,"comment_id":100773574,"body_markdown":"Any sensible alternative then? There has to be a way of relatively easy request/response logging with possibility of customisation","body":"Any sensible alternative then? There has to be a way of relatively easy request/response logging with possibility of customisation"},{"owner":{"account_id":2064278,"reputation":13129,"user_id":1840146,"accept_rate":86,"display_name":"Toerktumlare"},"score":0,"creation_date":1563659910,"post_id":57108631,"comment_id":100774158,"body_markdown":"Why does there have to be? I have never felt the nead to log bodies in requests. That is an opinion based opinion from you that there ”has to be something that logs the body easy”. Why do you have to log the body. State your case.","body":"Why does there have to be? I have never felt the nead to log bodies in requests. That is an opinion based opinion from you that there ”has to be something that logs the body easy”. Why do you have to log the body. State your case."},{"owner":{"account_id":2064278,"reputation":13129,"user_id":1840146,"accept_rate":86,"display_name":"Toerktumlare"},"score":0,"creation_date":1563660368,"post_id":57108631,"comment_id":100774242,"body_markdown":"And then open an issue at spring stating why you need it and they might implement it.","body":"And then open an issue at spring stating why you need it and they might implement it."},{"owner":{"account_id":8023174,"reputation":9194,"user_id":6051176,"display_name":"Martin Tarj&#225;nyi"},"score":0,"creation_date":1563879406,"post_id":57108631,"comment_id":100838882,"body_markdown":"At some point you pass the request body to the web client. Can you do the logging at that point?","body":"At some point you pass the request body to the web client. Can you do the logging at that point?"},{"owner":{"account_id":466186,"reputation":1171,"user_id":870783,"display_name":"Marcin Szulc"},"score":3,"creation_date":1563880035,"post_id":57108631,"comment_id":100839240,"body_markdown":"I would have to add logging per method or implement wrapper around WebClient which does not sound like a good solution to me. I want a centralised place for logging http request/response which I can share between multiple applications inside the network","body":"I would have to add logging per method or implement wrapper around WebClient which does not sound like a good solution to me. I want a centralised place for logging http request/response which I can share between multiple applications inside the network"},{"owner":{"account_id":108117,"reputation":9982,"user_id":287138,"accept_rate":82,"display_name":"Stefan Haberl"},"score":5,"creation_date":1593112347,"post_id":57108631,"comment_id":110674056,"body_markdown":"@ThomasAndolf That is an opinion based opinion from you that nobody should want to log the body in an easy way, because you personally have never felt the need to log bodies in requests. :) IMHO it actually does make sense a lot, if you want to audit/debug, what was actually sent over the wire and standard logging doesn&#39;t cut it, because you have to mask credentials (because of PCI compliance for instance)","body":"@ThomasAndolf That is an opinion based opinion from you that nobody should want to log the body in an easy way, because you personally have never felt the need to log bodies in requests. :) IMHO it actually does make sense a lot, if you want to audit/debug, what was actually sent over the wire and standard logging doesn&#39;t cut it, because you have to mask credentials (because of PCI compliance for instance)"},{"owner":{"account_id":2064278,"reputation":13129,"user_id":1840146,"accept_rate":86,"display_name":"Toerktumlare"},"score":0,"creation_date":1593112799,"post_id":57108631,"comment_id":110674257,"body_markdown":"@StefanHaberl that was exactly what i wrote, it is MY opinion, and i wanted to hear HIS case. I, and only ME no one else, just me, considers logging for debugging is a code smell and debuggers should be used. But that is MY personal opinion, and NO ONE elses. And logging requests just for logging a request, you should log what is needed by authorities for auditing, usually this does NOT include logging full requests, logging full requests is a security issue in accordance to GDPR that non compliant values are accidentally logged.","body":"@StefanHaberl that was exactly what i wrote, it is MY opinion, and i wanted to hear HIS case. I, and only ME no one else, just me, considers logging for debugging is a code smell and debuggers should be used. But that is MY personal opinion, and NO ONE elses. And logging requests just for logging a request, you should log what is needed by authorities for auditing, usually this does NOT include logging full requests, logging full requests is a security issue in accordance to GDPR that non compliant values are accidentally logged."}],"answers":[{"tags":[],"owner":{"account_id":2318625,"reputation":424,"user_id":2035043,"display_name":"Justice"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1563527127,"creation_date":1563527127,"answer_id":57109071,"question_id":57108631,"body_markdown":"Try setting the following properties:\r\n\r\n    logging.level.org.springframework.web.reactive.function.client.ExchangeFunctions=TRACE\r\n    logging.level.reactor.netty.http.client.HttpClient: DEBUG\r\n    spring.http.log-request-details=true","title":"WebClient - how to get request body?","body":"<p>Try setting the following properties:</p>\n\n<pre><code>logging.level.org.springframework.web.reactive.function.client.ExchangeFunctions=TRACE\nlogging.level.reactor.netty.http.client.HttpClient: DEBUG\nspring.http.log-request-details=true\n</code></pre>\n"},{"tags":[],"owner":{"account_id":138670,"reputation":5671,"user_id":343759,"accept_rate":70,"display_name":"rewolf"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1594537744,"creation_date":1592491192,"answer_id":62452584,"question_id":57108631,"body_markdown":"You can create your own wrapper/proxy class around the JSON encoder and intercept the serialized body before it is sent into the intertubes.\r\n\r\nThis [blog post][1] shows how to log the JSON payloads of WebClient requests and responses\r\n\r\nSpecifically, you would extend the `encodeValue` method (or `encodeValues` in case of streaming data) of `Jackson2JsonEncoder`. Then you can do with that data what you wish, such as logging etc. And you could even do this conditionally based on environment/profile\r\n\r\nThis custom logging-encoder can be specified when creating the `WebClient`, by codecs:\r\n\r\n     CustomBodyLoggingEncoder bodyLoggingEncoder = new CustomBodyLoggingEncoder();\r\n     WebClient.builder()\r\n              .codecs(clientDefaultCodecsConfigurer -&gt; {\r\n                 clientDefaultCodecsConfigurer.defaultCodecs().jackson2JsonEncoder(bodyLoggingEncoder);\r\n                 clientDefaultCodecsConfigurer.defaultCodecs().jackson2JsonDecoder(new Jackson2JsonDecoder(new ObjectMapper(), MediaType.APPLICATION_JSON));\r\n              })\r\n              ...\r\n\r\n\r\n**Update 2020/7/3:**\r\n\r\nHere is a rushed example applying the same principle but for a decoder:\r\n\r\n```\r\npublic class LoggingJsonDecoder extends Jackson2JsonDecoder {\r\n    private final Consumer&lt;byte[]&gt; payloadConsumer;\r\n\r\n    public LoggingJsonEncoder(final Consumer&lt;byte[]&gt; payloadConsumer) {\r\n        this.payloadConsumer = payloadConsumer;\r\n    }\r\n\r\n    @Override\r\n    public Mono&lt;Object&gt; decodeToMono(final Publisher&lt;DataBuffer&gt; input, final ResolvableType elementType, final MimeType mimeType, final Map&lt;String, Object&gt; hints) {\r\n        // Buffer for bytes from each published DataBuffer\r\n        final ByteArrayOutputStream payload = new ByteArrayOutputStream();\r\n\r\n        // Augment the Flux, and intercept each group of bytes buffered\r\n        final Flux&lt;DataBuffer&gt; interceptor = Flux.from(input)\r\n                                                 .doOnNext(buffer -&gt; bufferBytes(payload, buffer))\r\n                                                 .doOnComplete(() -&gt; payloadConsumer.accept(payload.toByteArray()));\r\n\r\n        // Return the original method, giving our augmented Publisher\r\n        return super.decodeToMono(interceptor, elementType, mimeType, hints);\r\n    }\r\n\r\n    private void bufferBytes(final ByteArrayOutputStream bao, final DataBuffer buffer) {\r\n        try {\r\n            bao.write(ByteUtils.extractBytesAndReset(buffer));\r\n        } catch (IOException e) {\r\n            throw new RuntimeException(e);\r\n        }\r\n    }\r\n}\r\n```\r\n\r\nYou would configure that along with the encoder using the `codecs` builder method on `WebClient`.\r\nOf course this above only works assuming your data is being deserialized to a Mono. But override other methods if you need it. Also I&#39;m just stdout&#39;ing the resulting JSON there, but you could pass in a `Consumer&lt;String&gt;` or something for the decoder to send the string to for example, or just log from there ; up to you.\r\n\r\nA word of warning that in it&#39;s current form this is going to be doubling your memory usage, as it&#39;s buffering the entire response. If you can send that byte data off to another process/thread to write to log file or some output stream (or Flux even) immediately, you could avoid buffering the whole payload in memory.\r\n\r\n  [1]: https://andrew-flower.com/blog/webclient-body-logging","title":"WebClient - how to get request body?","body":"<p>You can create your own wrapper/proxy class around the JSON encoder and intercept the serialized body before it is sent into the intertubes.</p>\n<p>This <a href=\"https://andrew-flower.com/blog/webclient-body-logging\" rel=\"nofollow noreferrer\">blog post</a> shows how to log the JSON payloads of WebClient requests and responses</p>\n<p>Specifically, you would extend the <code>encodeValue</code> method (or <code>encodeValues</code> in case of streaming data) of <code>Jackson2JsonEncoder</code>. Then you can do with that data what you wish, such as logging etc. And you could even do this conditionally based on environment/profile</p>\n<p>This custom logging-encoder can be specified when creating the <code>WebClient</code>, by codecs:</p>\n<pre><code> CustomBodyLoggingEncoder bodyLoggingEncoder = new CustomBodyLoggingEncoder();\n WebClient.builder()\n          .codecs(clientDefaultCodecsConfigurer -&gt; {\n             clientDefaultCodecsConfigurer.defaultCodecs().jackson2JsonEncoder(bodyLoggingEncoder);\n             clientDefaultCodecsConfigurer.defaultCodecs().jackson2JsonDecoder(new Jackson2JsonDecoder(new ObjectMapper(), MediaType.APPLICATION_JSON));\n          })\n          ...\n</code></pre>\n<p><strong>Update 2020/7/3:</strong></p>\n<p>Here is a rushed example applying the same principle but for a decoder:</p>\n<pre><code>public class LoggingJsonDecoder extends Jackson2JsonDecoder {\n    private final Consumer&lt;byte[]&gt; payloadConsumer;\n\n    public LoggingJsonEncoder(final Consumer&lt;byte[]&gt; payloadConsumer) {\n        this.payloadConsumer = payloadConsumer;\n    }\n\n    @Override\n    public Mono&lt;Object&gt; decodeToMono(final Publisher&lt;DataBuffer&gt; input, final ResolvableType elementType, final MimeType mimeType, final Map&lt;String, Object&gt; hints) {\n        // Buffer for bytes from each published DataBuffer\n        final ByteArrayOutputStream payload = new ByteArrayOutputStream();\n\n        // Augment the Flux, and intercept each group of bytes buffered\n        final Flux&lt;DataBuffer&gt; interceptor = Flux.from(input)\n                                                 .doOnNext(buffer -&gt; bufferBytes(payload, buffer))\n                                                 .doOnComplete(() -&gt; payloadConsumer.accept(payload.toByteArray()));\n\n        // Return the original method, giving our augmented Publisher\n        return super.decodeToMono(interceptor, elementType, mimeType, hints);\n    }\n\n    private void bufferBytes(final ByteArrayOutputStream bao, final DataBuffer buffer) {\n        try {\n            bao.write(ByteUtils.extractBytesAndReset(buffer));\n        } catch (IOException e) {\n            throw new RuntimeException(e);\n        }\n    }\n}\n</code></pre>\n<p>You would configure that along with the encoder using the <code>codecs</code> builder method on <code>WebClient</code>.\nOf course this above only works assuming your data is being deserialized to a Mono. But override other methods if you need it. Also I'm just stdout'ing the resulting JSON there, but you could pass in a <code>Consumer&lt;String&gt;</code> or something for the decoder to send the string to for example, or just log from there ; up to you.</p>\n<p>A word of warning that in it's current form this is going to be doubling your memory usage, as it's buffering the entire response. If you can send that byte data off to another process/thread to write to log file or some output stream (or Flux even) immediately, you could avoid buffering the whole payload in memory.</p>\n"},{"tags":[],"owner":{"account_id":5644474,"reputation":451,"user_id":4467091,"display_name":"Oleg Maksymuk"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1643927703,"creation_date":1643927703,"answer_id":70979246,"question_id":57108631,"body_markdown":"Request body could be accessed when `BodyInserter` writes to `ReactiveHttpOutputMessage`. So just create a FilterFunction and create new request from existing but for body set `new BodyInserser ()` overriding method insert see example below. Response and Request payloads could be read multiple times since those are buffered in DataBuffers\r\n\r\n\r\n    public class TracingExchangeFilterFunction implements ExchangeFilterFunction {\r\n     \r\n     \r\n            return next.exchange(buildTraceableRequest(request))\r\n                    .flatMap(response -&gt;\r\n                            response.body(BodyExtractors.toDataBuffers())\r\n                                    .next()\r\n                                    .doOnNext(dataBuffer -&gt; traceResponse(response, dataBuffer))\r\n                                    .thenReturn(response)) ;\r\n        }\r\n    \r\n        private ClientRequest buildTraceableRequest( \r\n                final ClientRequest clientRequest) {\r\n            return ClientRequest.from(clientRequest).body(\r\n                    new BodyInserter&lt;&gt;() {\r\n                        @Override\r\n                        public Mono&lt;Void&gt; insert(\r\n                                final ClientHttpRequest outputMessage,\r\n                                final Context context) {\r\n                            return clientRequest.body().insert(\r\n                                    new ClientHttpRequestDecorator(outputMessage) {\r\n                                        @Override\r\n                                        public Mono&lt;Void&gt; writeWith(final Publisher&lt;? extends DataBuffer&gt; body) {\r\n                                            return super.writeWith(\r\n                                                    from(body).doOnNext(buffer -&gt;\r\n                                                            traceRequest(clientRequest, buffer)));\r\n                                        }\r\n                                    }, context);\r\n                        }\r\n                    }).build();\r\n        }\r\n    \r\n        private void traceRequest(ClientRequest clientRequest, DataBuffer buffer) {\r\n            final ByteBuf byteBuf = NettyDataBufferFactory.toByteBuf(buffer);\r\n            final byte[] bytes = ByteBufUtil.getBytes(byteBuf);\r\n            // do some tracing e.g. new String(bytes)\r\n        }\r\n    \r\n    \r\n        private void traceResponse(ClientResponse response, DataBuffer dataBuffer) {\r\n            final byte[] bytes = new byte[dataBuffer.readableByteCount()];\r\n            dataBuffer.read(bytes);\r\n            // do some tracing e.g. new String(bytes)\r\n        }\r\n    }","title":"WebClient - how to get request body?","body":"<p>Request body could be accessed when <code>BodyInserter</code> writes to <code>ReactiveHttpOutputMessage</code>. So just create a FilterFunction and create new request from existing but for body set <code>new BodyInserser ()</code> overriding method insert see example below. Response and Request payloads could be read multiple times since those are buffered in DataBuffers</p>\n<pre><code>public class TracingExchangeFilterFunction implements ExchangeFilterFunction {\n \n \n        return next.exchange(buildTraceableRequest(request))\n                .flatMap(response -&gt;\n                        response.body(BodyExtractors.toDataBuffers())\n                                .next()\n                                .doOnNext(dataBuffer -&gt; traceResponse(response, dataBuffer))\n                                .thenReturn(response)) ;\n    }\n\n    private ClientRequest buildTraceableRequest( \n            final ClientRequest clientRequest) {\n        return ClientRequest.from(clientRequest).body(\n                new BodyInserter&lt;&gt;() {\n                    @Override\n                    public Mono&lt;Void&gt; insert(\n                            final ClientHttpRequest outputMessage,\n                            final Context context) {\n                        return clientRequest.body().insert(\n                                new ClientHttpRequestDecorator(outputMessage) {\n                                    @Override\n                                    public Mono&lt;Void&gt; writeWith(final Publisher&lt;? extends DataBuffer&gt; body) {\n                                        return super.writeWith(\n                                                from(body).doOnNext(buffer -&gt;\n                                                        traceRequest(clientRequest, buffer)));\n                                    }\n                                }, context);\n                    }\n                }).build();\n    }\n\n    private void traceRequest(ClientRequest clientRequest, DataBuffer buffer) {\n        final ByteBuf byteBuf = NettyDataBufferFactory.toByteBuf(buffer);\n        final byte[] bytes = ByteBufUtil.getBytes(byteBuf);\n        // do some tracing e.g. new String(bytes)\n    }\n\n\n    private void traceResponse(ClientResponse response, DataBuffer dataBuffer) {\n        final byte[] bytes = new byte[dataBuffer.readableByteCount()];\n        dataBuffer.read(bytes);\n        // do some tracing e.g. new String(bytes)\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3202494,"reputation":311,"user_id":2704295,"display_name":"Pavel Kolmykov"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1655204013,"creation_date":1654873790,"answer_id":72576476,"question_id":57108631,"body_markdown":"Tried all answers, but some of them don&#39;t fit my needs or just do not work.\r\nWrote my own solution based on this answers to intercept request/response bodies and log them.\r\n\r\n    @Slf4j\r\n    @Component\r\n    public class LoggingCustomizer implements WebClientCustomizer {\r\n    \r\n        @Override public void customize(WebClient.Builder webClientBuilder) {\r\n            webClientBuilder.filter((request, next) -&gt; {\r\n                logRequest(request);\r\n                return next\r\n                    .exchange(interceptBody(request))\r\n                    .doOnNext(this::logResponse)\r\n                    .map(this::interceptBody);\r\n            });\r\n        }\r\n    \r\n        private ClientRequest interceptBody(ClientRequest request) {\r\n            return ClientRequest.from(request)\r\n                .body((outputMessage, context) -&gt; request.body().insert(new ClientHttpRequestDecorator(outputMessage) {\r\n                    @Override public Mono&lt;Void&gt; writeWith(Publisher&lt;? extends DataBuffer&gt; body) {\r\n                        return super.writeWith(Mono.from(body)\r\n                            .doOnNext(dataBuffer -&gt; logRequestBody(dataBuffer)));\r\n                    }\r\n                }, context))\r\n                .build();\r\n        }\r\n    \r\n        private ClientResponse interceptBody(ClientResponse response) {\r\n            return response.mutate()\r\n                .body(data -&gt; data.doOnNext(this::logResponseBody))\r\n                .build();\r\n        }\r\n    \r\n        private void logRequest(ClientRequest request) {\r\n            log.debug(&quot;DOWNSTREAM REQUEST: METHOD {}, URI: {}, HEADERS: {}&quot;, request.method(), request.url(), request.headers());\r\n        }\r\n    \r\n        private void logRequestBody(DataBuffer dataBuffer) {\r\n            log.debug(&quot;DOWNSTREAM REQUEST: BODY: {}&quot;, dataBuffer.toString(StandardCharsets.UTF_8));\r\n        }\r\n    \r\n        private void logResponse(ClientResponse response) {\r\n            log.debug(&quot;DOWNSTREAM RESPONSE: STATUS: {}, HEADERS: {}&quot;, response.rawStatusCode(), response.headers().asHttpHeaders());\r\n        }\r\n    \r\n        private void logResponseBody(DataBuffer dataBuffer) {\r\n            log.debug(&quot;DOWNSTREAM RESPONSE: BODY: {}&quot;, dataBuffer.toString(StandardCharsets.UTF_8));\r\n        }\r\n    \r\n    }\r\n\r\n**Update**: added snippet to log using `reactor.netty.http.client.HttpClient` (preferrable solution)\r\n\r\n    @Slf4j\r\n    @Component\r\n    public class LoggingCustomizer implements WebClientCustomizer {\r\n    \r\n        @Override public void customize(WebClient.Builder webClientBuilder) {\r\n            HttpClient httpClient = HttpClient.create()\r\n                .doOnRequest((httpClientRequest, connection) -&gt; connection.addHandlerFirst(new LoggingHandler()));\r\n            webClientBuilder.clientConnector(new ReactorClientHttpConnector(httpClient));\r\n        }\r\n    \r\n        private static class LoggingHandler extends ChannelDuplexHandler {\r\n    \r\n            @Override public void write(ChannelHandlerContext ctx, Object msg, ChannelPromise promise) throws Exception {\r\n                if (msg instanceof FullHttpRequest request) {\r\n                    log.debug(&quot;DOWNSTREAM  REQUEST: METHOD: {}, URI: {}, BODY: {}, HEADERS: {}&quot;,\r\n                        request.method(), request.uri(), request.content().toString(defaultCharset()), request.headers());\r\n                } else if (msg instanceof HttpRequest request) {\r\n                    log.debug(&quot;DOWNSTREAM  REQUEST: METHOD: {}, URI: {}, HEADERS: {}&quot;,\r\n                        request.method(), request.uri(), request.headers());\r\n                } else if (msg instanceof FullHttpMessage message) {\r\n                    log.debug(&quot;DOWNSTREAM  REQUEST: BODY: {}&quot;,\r\n                        message.content().toString(defaultCharset()));\r\n                }\r\n                super.write(ctx, msg, promise);\r\n            }\r\n    \r\n            @Override public void channelRead(ChannelHandlerContext ctx, Object msg) throws Exception {\r\n                if (msg instanceof FullHttpResponse response) {\r\n                    log.debug(&quot;DOWNSTREAM RESPONSE: STATUS: {}, BODY: {}, HEADERS: {}&quot;,\r\n                        response.status().code(), response.content().toString(defaultCharset()), response.headers());\r\n                } else if (msg instanceof HttpResponse response) {\r\n                    log.debug(&quot;DOWNSTREAM RESPONSE: STATUS: {}, HEADERS: {}&quot;,\r\n                        response.status().code(), response.headers());\r\n                } else if (!(msg instanceof LastHttpContent) &amp;&amp; msg instanceof HttpContent httpContent) {\r\n                    log.debug(&quot;DOWNSTREAM RESPONSE: BODY: {}&quot;,\r\n                        httpContent.content().toString(defaultCharset()));\r\n                }\r\n                super.channelRead(ctx, msg);\r\n            }\r\n        }\r\n    \r\n    }\r\n\r\n","title":"WebClient - how to get request body?","body":"<p>Tried all answers, but some of them don't fit my needs or just do not work.\nWrote my own solution based on this answers to intercept request/response bodies and log them.</p>\n<pre><code>@Slf4j\n@Component\npublic class LoggingCustomizer implements WebClientCustomizer {\n\n    @Override public void customize(WebClient.Builder webClientBuilder) {\n        webClientBuilder.filter((request, next) -&gt; {\n            logRequest(request);\n            return next\n                .exchange(interceptBody(request))\n                .doOnNext(this::logResponse)\n                .map(this::interceptBody);\n        });\n    }\n\n    private ClientRequest interceptBody(ClientRequest request) {\n        return ClientRequest.from(request)\n            .body((outputMessage, context) -&gt; request.body().insert(new ClientHttpRequestDecorator(outputMessage) {\n                @Override public Mono&lt;Void&gt; writeWith(Publisher&lt;? extends DataBuffer&gt; body) {\n                    return super.writeWith(Mono.from(body)\n                        .doOnNext(dataBuffer -&gt; logRequestBody(dataBuffer)));\n                }\n            }, context))\n            .build();\n    }\n\n    private ClientResponse interceptBody(ClientResponse response) {\n        return response.mutate()\n            .body(data -&gt; data.doOnNext(this::logResponseBody))\n            .build();\n    }\n\n    private void logRequest(ClientRequest request) {\n        log.debug(&quot;DOWNSTREAM REQUEST: METHOD {}, URI: {}, HEADERS: {}&quot;, request.method(), request.url(), request.headers());\n    }\n\n    private void logRequestBody(DataBuffer dataBuffer) {\n        log.debug(&quot;DOWNSTREAM REQUEST: BODY: {}&quot;, dataBuffer.toString(StandardCharsets.UTF_8));\n    }\n\n    private void logResponse(ClientResponse response) {\n        log.debug(&quot;DOWNSTREAM RESPONSE: STATUS: {}, HEADERS: {}&quot;, response.rawStatusCode(), response.headers().asHttpHeaders());\n    }\n\n    private void logResponseBody(DataBuffer dataBuffer) {\n        log.debug(&quot;DOWNSTREAM RESPONSE: BODY: {}&quot;, dataBuffer.toString(StandardCharsets.UTF_8));\n    }\n\n}\n</code></pre>\n<p><strong>Update</strong>: added snippet to log using <code>reactor.netty.http.client.HttpClient</code> (preferrable solution)</p>\n<pre><code>@Slf4j\n@Component\npublic class LoggingCustomizer implements WebClientCustomizer {\n\n    @Override public void customize(WebClient.Builder webClientBuilder) {\n        HttpClient httpClient = HttpClient.create()\n            .doOnRequest((httpClientRequest, connection) -&gt; connection.addHandlerFirst(new LoggingHandler()));\n        webClientBuilder.clientConnector(new ReactorClientHttpConnector(httpClient));\n    }\n\n    private static class LoggingHandler extends ChannelDuplexHandler {\n\n        @Override public void write(ChannelHandlerContext ctx, Object msg, ChannelPromise promise) throws Exception {\n            if (msg instanceof FullHttpRequest request) {\n                log.debug(&quot;DOWNSTREAM  REQUEST: METHOD: {}, URI: {}, BODY: {}, HEADERS: {}&quot;,\n                    request.method(), request.uri(), request.content().toString(defaultCharset()), request.headers());\n            } else if (msg instanceof HttpRequest request) {\n                log.debug(&quot;DOWNSTREAM  REQUEST: METHOD: {}, URI: {}, HEADERS: {}&quot;,\n                    request.method(), request.uri(), request.headers());\n            } else if (msg instanceof FullHttpMessage message) {\n                log.debug(&quot;DOWNSTREAM  REQUEST: BODY: {}&quot;,\n                    message.content().toString(defaultCharset()));\n            }\n            super.write(ctx, msg, promise);\n        }\n\n        @Override public void channelRead(ChannelHandlerContext ctx, Object msg) throws Exception {\n            if (msg instanceof FullHttpResponse response) {\n                log.debug(&quot;DOWNSTREAM RESPONSE: STATUS: {}, BODY: {}, HEADERS: {}&quot;,\n                    response.status().code(), response.content().toString(defaultCharset()), response.headers());\n            } else if (msg instanceof HttpResponse response) {\n                log.debug(&quot;DOWNSTREAM RESPONSE: STATUS: {}, HEADERS: {}&quot;,\n                    response.status().code(), response.headers());\n            } else if (!(msg instanceof LastHttpContent) &amp;&amp; msg instanceof HttpContent httpContent) {\n                log.debug(&quot;DOWNSTREAM RESPONSE: BODY: {}&quot;,\n                    httpContent.content().toString(defaultCharset()));\n            }\n            super.channelRead(ctx, msg);\n        }\n    }\n\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":466186,"reputation":1171,"user_id":870783,"display_name":"Marcin Szulc"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1655068737,"creation_date":1655067980,"answer_id":72595872,"question_id":57108631,"body_markdown":"Coming back to the topic with an answer I am so far satisfied. \r\n\r\nIn following example I created `HttpClient` with [LoggingHandler](https://netty.io/4.1/api/io/netty/handler/logging/LoggingHandler.html) that does the logging magic, injected it into `ReactorClientHttpConnector` which was default `HttpConnector` (see `DefaultWebClientBuilder#initConnector`) and then to `WebClient`. \r\n\r\n\r\n```java\r\nval baseHttpClient = HttpClient.create()\r\n    .doOnRequest(\r\n        (request, conn) -&gt; conn.addHandlerFirst(new LoggingHandler(LogLevel.INFO)\r\n    ));\r\n\r\nval httpClient = WebClient.builder()\r\n    .baseUrl(&quot;https://google.pl&quot;)\r\n    .clientConnector(new ReactorClientHttpConnector(baseHttpClient))\r\n    .build();\r\n\r\nval response = httpClient.post()\r\n    .body(Mono.just(&quot;Your request body&quot;), String.class)\r\n    .exchangeToMono(clientResponse -&gt; clientResponse.bodyToMono(String.class))\r\n    .block();\r\n```\r\n\r\nI&#39;m still planning on creating custom `LoggingHandler` which will sanitise and simplify logs.","title":"WebClient - how to get request body?","body":"<p>Coming back to the topic with an answer I am so far satisfied.</p>\n<p>In following example I created <code>HttpClient</code> with <a href=\"https://netty.io/4.1/api/io/netty/handler/logging/LoggingHandler.html\" rel=\"nofollow noreferrer\">LoggingHandler</a> that does the logging magic, injected it into <code>ReactorClientHttpConnector</code> which was default <code>HttpConnector</code> (see <code>DefaultWebClientBuilder#initConnector</code>) and then to <code>WebClient</code>.</p>\n<pre class=\"lang-java prettyprint-override\"><code>val baseHttpClient = HttpClient.create()\n    .doOnRequest(\n        (request, conn) -&gt; conn.addHandlerFirst(new LoggingHandler(LogLevel.INFO)\n    ));\n\nval httpClient = WebClient.builder()\n    .baseUrl(&quot;https://google.pl&quot;)\n    .clientConnector(new ReactorClientHttpConnector(baseHttpClient))\n    .build();\n\nval response = httpClient.post()\n    .body(Mono.just(&quot;Your request body&quot;), String.class)\n    .exchangeToMono(clientResponse -&gt; clientResponse.bodyToMono(String.class))\n    .block();\n</code></pre>\n<p>I'm still planning on creating custom <code>LoggingHandler</code> which will sanitise and simplify logs.</p>\n"},{"tags":[],"owner":{"account_id":6412021,"reputation":1101,"user_id":4971476,"display_name":"Dave Ankin"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1657031827,"creation_date":1657031827,"answer_id":72871244,"question_id":57108631,"body_markdown":"Consider using an exchange filter function that wraps the request object and intercepts the body being written -- buffering it, and working with it in a callback after the body is assembled. Apparently this is not something the spring team want to support in the library itself as it as async is not the paradigm to be buffering things, but here is an example of such an exchange function that would accomplish this:\r\n\r\n&lt;!-- begin snippet: java hide: true --&gt;\r\n\r\n&lt;!-- language: lang-java --&gt;\r\n```java\r\nimport org.reactivestreams.Publisher;\r\nimport org.springframework.core.io.buffer.DataBuffer;\r\nimport org.springframework.core.io.buffer.DataBufferUtils;\r\nimport org.springframework.http.HttpMethod;\r\nimport org.springframework.http.client.reactive.ClientHttpRequest;\r\nimport org.springframework.http.client.reactive.ClientHttpRequestDecorator;\r\nimport org.springframework.lang.NonNull;\r\nimport org.springframework.web.reactive.function.BodyInserter;\r\nimport org.springframework.web.reactive.function.client.ClientResponse;\r\nimport org.springframework.web.reactive.function.client.ClientRequest;\r\nimport org.springframework.web.reactive.function.client.ExchangeFunction;\r\nimport org.springframework.web.reactive.function.client.ExchangeFilterFunction;\r\nimport reactor.core.publisher.Mono;\r\n\r\nimport java.util.function.BiConsumer;\r\n\r\n\r\nclass BodyBufferingExchangeFilterFunction implements ExchangeFilterFunction {\r\n\r\n    private BiConsumer&lt;ClientHttpRequest, DataBuffer&gt; callback;\r\n\r\n    {\r\n        // e.g.\r\n        callback = (ClientHttpRequest req, DataBuffer body) -&gt; {\r\n            // set the content length\r\n            req.getHeaders().setContentLength(body.readableByteCount());\r\n        };\r\n    }\r\n\r\n    public BodyBufferingExchangeFilterFunction(BiConsumer&lt;ClientHttpRequest, DataBuffer&gt; callback) {\r\n        this.callback = callback;\r\n    }\r\n\r\n    @Override\r\n    @NonNull\r\n    public Mono&lt;ClientResponse&gt; filter(@NonNull ClientRequest request,\r\n                                       @NonNull ExchangeFunction next) {\r\n        if (request.method() == HttpMethod.PUT ||\r\n                request.method() == HttpMethod.POST) {\r\n            ClientRequest buffered = ClientRequest.from(request)\r\n                    .body((ClientHttpRequest outputMessage, BodyInserter.Context context) -&gt;\r\n                            request.body().insert(new BufferingDecorator(outputMessage, callback), context))\r\n                    .build();\r\n            return next.exchange(buffered);\r\n        } else {\r\n            return next.exchange(request);\r\n        }\r\n    }\r\n\r\n    private static final class BufferingDecorator extends ClientHttpRequestDecorator {\r\n        private final BiConsumer&lt;ClientHttpRequest, DataBuffer&gt; callback;\r\n\r\n        public BufferingDecorator(ClientHttpRequest outputMessage,\r\n                                  BiConsumer&lt;ClientHttpRequest, DataBuffer&gt; callback) {\r\n            super(outputMessage);\r\n            this.callback = callback;\r\n        }\r\n\r\n        @Override\r\n        @NonNull\r\n        public Mono&lt;Void&gt; writeWith(@NonNull Publisher&lt;? extends DataBuffer&gt; body) {\r\n            return DataBufferUtils.join(body).flatMap(buffer -&gt; {\r\n                if (callback != null) callback.accept(this, buffer);\r\n                return super.writeWith(Mono.just(buffer));\r\n            });\r\n        }\r\n\r\n    }\r\n\r\n}\r\n```\r\n&lt;!-- end snippet --&gt;\r\n\r\nHere&#39;s how you&#39;d use it with a webclient too:\r\n\r\n&lt;!-- begin snippet: usage hide: true --&gt;\r\n\r\n&lt;!-- language: lang-java --&gt;\r\n```java\r\n// new webclient\r\nWebClient webClient = WebClient.builder()\r\n        .filter(new BodyBufferingExchangeFilterFunction())\r\n        .build();\r\n\r\n// existing webclient\r\nWebClient webClient = getWebClientSomeHow();\r\nwebClient = webClient.mutate().filter(new BodyBufferingExchangeFilterFunction()).build();\r\n\r\nResponseEntity&lt;String&gt; somePost = webClient.post()\r\n        .body(Mono.just(&quot;someData&quot;), String.class)\r\n        .retrieve().toEntity(String.class)\r\n        .block();\r\n```\r\n&lt;!-- end snippet --&gt;","title":"WebClient - how to get request body?","body":"<p>Consider using an exchange filter function that wraps the request object and intercepts the body being written -- buffering it, and working with it in a callback after the body is assembled. Apparently this is not something the spring team want to support in the library itself as it as async is not the paradigm to be buffering things, but here is an example of such an exchange function that would accomplish this:</p>\n<pre class=\"lang-java prettyprint-override\"><code>import org.reactivestreams.Publisher;\nimport org.springframework.core.io.buffer.DataBuffer;\nimport org.springframework.core.io.buffer.DataBufferUtils;\nimport org.springframework.http.HttpMethod;\nimport org.springframework.http.client.reactive.ClientHttpRequest;\nimport org.springframework.http.client.reactive.ClientHttpRequestDecorator;\nimport org.springframework.lang.NonNull;\nimport org.springframework.web.reactive.function.BodyInserter;\nimport org.springframework.web.reactive.function.client.ClientResponse;\nimport org.springframework.web.reactive.function.client.ClientRequest;\nimport org.springframework.web.reactive.function.client.ExchangeFunction;\nimport org.springframework.web.reactive.function.client.ExchangeFilterFunction;\nimport reactor.core.publisher.Mono;\n\nimport java.util.function.BiConsumer;\n\n\nclass BodyBufferingExchangeFilterFunction implements ExchangeFilterFunction {\n\n    private BiConsumer&lt;ClientHttpRequest, DataBuffer&gt; callback;\n\n    {\n        // e.g.\n        callback = (ClientHttpRequest req, DataBuffer body) -&gt; {\n            // set the content length\n            req.getHeaders().setContentLength(body.readableByteCount());\n        };\n    }\n\n    public BodyBufferingExchangeFilterFunction(BiConsumer&lt;ClientHttpRequest, DataBuffer&gt; callback) {\n        this.callback = callback;\n    }\n\n    @Override\n    @NonNull\n    public Mono&lt;ClientResponse&gt; filter(@NonNull ClientRequest request,\n                                       @NonNull ExchangeFunction next) {\n        if (request.method() == HttpMethod.PUT ||\n                request.method() == HttpMethod.POST) {\n            ClientRequest buffered = ClientRequest.from(request)\n                    .body((ClientHttpRequest outputMessage, BodyInserter.Context context) -&gt;\n                            request.body().insert(new BufferingDecorator(outputMessage, callback), context))\n                    .build();\n            return next.exchange(buffered);\n        } else {\n            return next.exchange(request);\n        }\n    }\n\n    private static final class BufferingDecorator extends ClientHttpRequestDecorator {\n        private final BiConsumer&lt;ClientHttpRequest, DataBuffer&gt; callback;\n\n        public BufferingDecorator(ClientHttpRequest outputMessage,\n                                  BiConsumer&lt;ClientHttpRequest, DataBuffer&gt; callback) {\n            super(outputMessage);\n            this.callback = callback;\n        }\n\n        @Override\n        @NonNull\n        public Mono&lt;Void&gt; writeWith(@NonNull Publisher&lt;? extends DataBuffer&gt; body) {\n            return DataBufferUtils.join(body).flatMap(buffer -&gt; {\n                if (callback != null) callback.accept(this, buffer);\n                return super.writeWith(Mono.just(buffer));\n            });\n        }\n\n    }\n\n}\n</code></pre>\n<p>Here's how you'd use it with a webclient too:</p>\n<pre class=\"lang-java prettyprint-override\"><code>// new webclient\nWebClient webClient = WebClient.builder()\n        .filter(new BodyBufferingExchangeFilterFunction())\n        .build();\n\n// existing webclient\nWebClient webClient = getWebClientSomeHow();\nwebClient = webClient.mutate().filter(new BodyBufferingExchangeFilterFunction()).build();\n\nResponseEntity&lt;String&gt; somePost = webClient.post()\n        .body(Mono.just(&quot;someData&quot;), String.class)\n        .retrieve().toEntity(String.class)\n        .block();\n</code></pre>\n"},{"tags":[],"owner":{"account_id":7653103,"reputation":1,"user_id":5801037,"display_name":"Godfried"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1664228494,"creation_date":1664228494,"answer_id":73860236,"question_id":57108631,"body_markdown":"In just a few lines this will log everything:\r\n\r\n     import reactor.netty.tcp.TcpClient;\r\n     import reactor.netty.resources.ConnectionProvider;\r\n\r\n     TcpClient tcpClient = TcpClient.create(ConnectionProvider.newConnection());\r\n     WebClient webClient = WebClient.builder().clientConnector(new \r\n     ReactorClientHttpConnector(HttpClient.from(tcpClient).wiretap(true)))\r\n                .filter(...\r\n\r\n","title":"WebClient - how to get request body?","body":"<p>In just a few lines this will log everything:</p>\n<pre><code> import reactor.netty.tcp.TcpClient;\n import reactor.netty.resources.ConnectionProvider;\n\n TcpClient tcpClient = TcpClient.create(ConnectionProvider.newConnection());\n WebClient webClient = WebClient.builder().clientConnector(new \n ReactorClientHttpConnector(HttpClient.from(tcpClient).wiretap(true)))\n            .filter(...\n</code></pre>\n"}],"owner":{"account_id":466186,"reputation":1171,"user_id":870783,"display_name":"Marcin Szulc"},"comment_count":8,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":16946,"favorite_count":0,"down_vote_count":0,"up_vote_count":16,"accepted_answer_id":72595872,"answer_count":7,"score":16,"last_activity_date":1664228494,"creation_date":1563525475,"question_id":57108631,"body_markdown":"I&#39;ve started using WebClient and I&#39;m adding logging of request/response using filter method:\r\n\r\n```\r\nWebClient.builder()\r\n    .baseUrl(properties.getEndpoint())\r\n    .filter((request, next) -&gt; {\r\n        // logging\r\n        request.body()\r\n    })\r\n    .build();\r\n```\r\n\r\nI&#39;m able to access url, http method, headers but I&#39;ve a problem with getting raw request body as `body()` method of request returns `BodyInserter` (`BodyInserter&lt;?, ? super ClientHttpRequest&gt; body()`.\r\n\r\nHow to convert `BodyInserter` to `String` representation of request body? Alternatively, how to properly log whole request/response while also being able to hash potential credentials in it?","title":"WebClient - how to get request body?","body":"<p>I've started using WebClient and I'm adding logging of request/response using filter method:</p>\n<pre><code>WebClient.builder()\n    .baseUrl(properties.getEndpoint())\n    .filter((request, next) -&gt; {\n        // logging\n        request.body()\n    })\n    .build();\n</code></pre>\n<p>I'm able to access url, http method, headers but I've a problem with getting raw request body as <code>body()</code> method of request returns <code>BodyInserter</code> (<code>BodyInserter&lt;?, ? super ClientHttpRequest&gt; body()</code>.</p>\n<p>How to convert <code>BodyInserter</code> to <code>String</code> representation of request body? Alternatively, how to properly log whole request/response while also being able to hash potential credentials in it?</p>\n"},{"tags":["java","android","kotlin","reflection"],"comments":[{"owner":{"account_id":238127,"reputation":86162,"user_id":506796,"accept_rate":83,"display_name":"Tenfour04"},"score":4,"creation_date":1663961812,"post_id":73832130,"comment_id":130370955,"body_markdown":"Static final primitive variables cannot be changed.  The compiler inlines the value at all the use sites.","body":"Static final primitive variables cannot be changed.  The compiler inlines the value at all the use sites."}],"answers":[{"tags":[],"owner":{"account_id":8361391,"reputation":181,"user_id":6279574,"display_name":"Jalalkun"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1663984994,"creation_date":1663984994,"answer_id":73834290,"question_id":73832130,"body_markdown":"**static final** is like **const val** in Kotlin, that variable can&#39;t change.\r\n\r\n**DateValidator** class is declare **DIFF** is static. so it can&#39;t change\r\n\r\nyou can read this [article][1]\r\n\r\n\r\n  [1]: https://www.geeksforgeeks.org/final-static-variable-java/","title":"Why I cannot change static final int field with reflection from kotlin android","body":"<p><strong>static final</strong> is like <strong>const val</strong> in Kotlin, that variable can't change.</p>\n<p><strong>DateValidator</strong> class is declare <strong>DIFF</strong> is static. so it can't change</p>\n<p>you can read this <a href=\"https://www.geeksforgeeks.org/final-static-variable-java/\" rel=\"nofollow noreferrer\">article</a></p>\n"}],"owner":{"account_id":4125834,"reputation":31,"user_id":3385013,"display_name":"user3385013"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":361,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1664228435,"creation_date":1663960977,"question_id":73832130,"body_markdown":"I have following java class with static final int which I need to change via reflection:\r\n\r\n    class DateValidator {\r\n       public static final int DIFF = 20;\r\n    }\r\n\r\nAnd from Android Kotlin I try to change it value from 20 to 100:\r\n\r\n    class MainActivity : AppCompatActivity() {\r\n        override fun onCreate(savedInstanceState: Bundle?) {\r\n            super.onCreate(savedInstanceState)\r\n            setContentView(R.layout.activity_main)\r\n            println(&quot;@@@@DateValidator.DIFF: ${DateValidator.DIFF}&quot;)\r\n            val clazz = DateValidator::class.java\r\n            println(&quot;@@@clazz: $clazz&quot;)\r\n            val field: Field = clazz.getDeclaredField(&quot;DIFF&quot;)\r\n            println(&quot;@@@field: $field&quot;)\r\n            println(&quot;@@@field.isAccessible: ${field.isAccessible}&quot;)\r\n            field.isAccessible = true\r\n            println(&quot;@@@field.isAccessible2: ${field.isAccessible}&quot;)\r\n            val fieldAccessFlags: Field = Field::class.java.getDeclaredField(&quot;accessFlags&quot;)\r\n            println(&quot;@@@fieldAccessFlags: $fieldAccessFlags&quot;)\r\n            println(&quot;@@@fieldAccessFlags.isAccessible: ${fieldAccessFlags.isAccessible}&quot;)\r\n            fieldAccessFlags.isAccessible = true\r\n            println(&quot;@@@fieldAccessFlags.isAccessible2: ${fieldAccessFlags.isAccessible}&quot;)\r\n            fieldAccessFlags.setInt(field, field.modifiers and Modifier.FINAL.inv())\r\n            field.set(null, 100)\r\n            println(&quot;@@@@DateValidator.DIFF2: ${DateValidator.DIFF}&quot;)\r\n            field.setInt(null, 100)\r\n            println(&quot;@@@@DateValidator.DIFF3: ${DateValidator.DIFF}&quot;)\r\n    \r\n        }\r\n\r\nAnd I have following output in Logcat:\r\n\r\n    @@@@DateValidator.DIFF: 20\r\n    @@@clazz: class com.droiddevstar.changestaticprj.DateValidator\r\n    @@@field: public static final int com.droiddevstar.changestaticprj.DateValidator.DIFF\r\n    @@@field.isAccessible: false\r\n    @@@field.isAccessible2: true\r\n    @@@fieldAccessFlags: private int java.lang.reflect.Field.accessFlags\r\n    @@@fieldAccessFlags.isAccessible: false\r\n    @@@fieldAccessFlags.isAccessible2: true\r\n    @@@@DateValidator.DIFF2: 20\r\n    @@@@DateValidator.DIFF3: 20\r\n\r\n\r\n   Perhapse reflection doesn&#39;t work with primitive int?\r\n","title":"Why I cannot change static final int field with reflection from kotlin android","body":"<p>I have following java class with static final int which I need to change via reflection:</p>\n<pre><code>class DateValidator {\n   public static final int DIFF = 20;\n}\n</code></pre>\n<p>And from Android Kotlin I try to change it value from 20 to 100:</p>\n<pre><code>class MainActivity : AppCompatActivity() {\n    override fun onCreate(savedInstanceState: Bundle?) {\n        super.onCreate(savedInstanceState)\n        setContentView(R.layout.activity_main)\n        println(&quot;@@@@DateValidator.DIFF: ${DateValidator.DIFF}&quot;)\n        val clazz = DateValidator::class.java\n        println(&quot;@@@clazz: $clazz&quot;)\n        val field: Field = clazz.getDeclaredField(&quot;DIFF&quot;)\n        println(&quot;@@@field: $field&quot;)\n        println(&quot;@@@field.isAccessible: ${field.isAccessible}&quot;)\n        field.isAccessible = true\n        println(&quot;@@@field.isAccessible2: ${field.isAccessible}&quot;)\n        val fieldAccessFlags: Field = Field::class.java.getDeclaredField(&quot;accessFlags&quot;)\n        println(&quot;@@@fieldAccessFlags: $fieldAccessFlags&quot;)\n        println(&quot;@@@fieldAccessFlags.isAccessible: ${fieldAccessFlags.isAccessible}&quot;)\n        fieldAccessFlags.isAccessible = true\n        println(&quot;@@@fieldAccessFlags.isAccessible2: ${fieldAccessFlags.isAccessible}&quot;)\n        fieldAccessFlags.setInt(field, field.modifiers and Modifier.FINAL.inv())\n        field.set(null, 100)\n        println(&quot;@@@@DateValidator.DIFF2: ${DateValidator.DIFF}&quot;)\n        field.setInt(null, 100)\n        println(&quot;@@@@DateValidator.DIFF3: ${DateValidator.DIFF}&quot;)\n\n    }\n</code></pre>\n<p>And I have following output in Logcat:</p>\n<pre><code>@@@@DateValidator.DIFF: 20\n@@@clazz: class com.droiddevstar.changestaticprj.DateValidator\n@@@field: public static final int com.droiddevstar.changestaticprj.DateValidator.DIFF\n@@@field.isAccessible: false\n@@@field.isAccessible2: true\n@@@fieldAccessFlags: private int java.lang.reflect.Field.accessFlags\n@@@fieldAccessFlags.isAccessible: false\n@@@fieldAccessFlags.isAccessible2: true\n@@@@DateValidator.DIFF2: 20\n@@@@DateValidator.DIFF3: 20\n</code></pre>\n<p>Perhapse reflection doesn't work with primitive int?</p>\n"},{"tags":["java","oracle","loadjava"],"answers":[{"tags":[],"owner":{"account_id":70285,"reputation":17694,"user_id":203968,"accept_rate":88,"display_name":"oluies"},"down_vote_count":0,"up_vote_count":7,"is_accepted":false,"score":7,"last_activity_date":1664227292,"creation_date":1290607732,"answer_id":4267677,"question_id":4267545,"body_markdown":"*System.out* and *System.err* writes to the current trace files.\r\n\r\nYou can enable output to SQL*Plus or similar with\r\n\r\n&gt;set serveroutput on size 10000\r\n&gt;\r\n&gt;exec dbms_java.set_output(10000)\r\n\r\nSee the [Java Developer&#39;s Guide][1] [here][2].\r\n\r\nThat said, you should ask yourself, *what do I want to log, that my client would not like to see returned in the interface to my procedure?*. The answer to that is usually nothing.\r\n\r\nI have been able to set up http://www.slf4j.org/ with a [JDBC][3] database appender (I am unsure of the specifics).\r\n\r\n  [1]: http://www.oracle.com/pls/db112/portal.portal_db?selected=5&amp;frame=#advanced_application_development_concepts\r\n  [2]: http://docs.oracle.com/cd/E11882_01/java.112/e10588/chseven.htm#JJDEV13285\r\n  [3]: https://en.wikipedia.org/wiki/Java_Database_Connectivity\r\n\r\n","title":"Where does the system.out.println output go in Oracle Java class?","body":"<p><em>System.out</em> and <em>System.err</em> writes to the current trace files.</p>\n<p>You can enable output to SQL*Plus or similar with</p>\n<blockquote>\n<p>set serveroutput on size 10000</p>\n<p>exec dbms_java.set_output(10000)</p>\n</blockquote>\n<p>See the <a href=\"http://www.oracle.com/pls/db112/portal.portal_db?selected=5&amp;frame=#advanced_application_development_concepts\" rel=\"nofollow noreferrer\">Java Developer's Guide</a> <a href=\"http://docs.oracle.com/cd/E11882_01/java.112/e10588/chseven.htm#JJDEV13285\" rel=\"nofollow noreferrer\">here</a>.</p>\n<p>That said, you should ask yourself, <em>what do I want to log, that my client would not like to see returned in the interface to my procedure?</em>. The answer to that is usually nothing.</p>\n<p>I have been able to set up <a href=\"http://www.slf4j.org/\" rel=\"nofollow noreferrer\">http://www.slf4j.org/</a> with a <a href=\"https://en.wikipedia.org/wiki/Java_Database_Connectivity\" rel=\"nofollow noreferrer\">JDBC</a> database appender (I am unsure of the specifics).</p>\n"},{"tags":[],"owner":{"account_id":227533,"reputation":46580,"user_id":489261,"display_name":"darioo"},"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1664227470,"creation_date":1290607877,"answer_id":4267697,"question_id":4267545,"body_markdown":"[An Oracle article](http://www.oracleutilities.com/OSUtil/loadjava.html) provides some useful information.\r\n\r\nQuote:\r\n\r\nYour class:\r\n\r\n    public class SimpleJava {\r\n       public void main(String[] args) {\r\n          System.out.println(&quot;Here we are&quot;);\r\n        }\r\n    }\r\n\r\nNow, compile and load your class:\r\n\r\n```lang-none\r\nC:\\oracle9i\\bin&gt;javac SimpleJava.java\r\nC:\\oracle9i\\bin&gt;loadjava -user scott/tiger SimpleJava.class\r\n```\r\n\r\nFrom SQL*Plus, create the PL/SQL wrapper to invoke the newly loaded Java class:\r\n\r\n```lang-none\r\nSQL&gt; create or replace procedure call_simplejava\r\n  2  as language java\r\n  3  name &#39;SimpleJava.showMessage()&#39;;\r\n  4  /\r\n```\r\n\r\n\r\nExecute the code from SQL*Plus:\r\n\r\n```lang-none\r\nSQL&gt; set serveroutput on;\r\nSQL&gt; call dbms_java.set_output(50);\r\n```\r\n\r\nCall completed.\r\n\r\n```lang-none\r\nSQL&gt; execute call_simplejava;\r\nHere we are\r\n```\r\n","title":"Where does the system.out.println output go in Oracle Java class?","body":"<p><a href=\"http://www.oracleutilities.com/OSUtil/loadjava.html\" rel=\"nofollow noreferrer\">An Oracle article</a> provides some useful information.</p>\n<p>Quote:</p>\n<p>Your class:</p>\n<pre><code>public class SimpleJava {\n   public void main(String[] args) {\n      System.out.println(&quot;Here we are&quot;);\n    }\n}\n</code></pre>\n<p>Now, compile and load your class:</p>\n<pre class=\"lang-none prettyprint-override\"><code>C:\\oracle9i\\bin&gt;javac SimpleJava.java\nC:\\oracle9i\\bin&gt;loadjava -user scott/tiger SimpleJava.class\n</code></pre>\n<p>From SQL*Plus, create the PL/SQL wrapper to invoke the newly loaded Java class:</p>\n<pre class=\"lang-none prettyprint-override\"><code>SQL&gt; create or replace procedure call_simplejava\n  2  as language java\n  3  name 'SimpleJava.showMessage()';\n  4  /\n</code></pre>\n<p>Execute the code from SQL*Plus:</p>\n<pre class=\"lang-none prettyprint-override\"><code>SQL&gt; set serveroutput on;\nSQL&gt; call dbms_java.set_output(50);\n</code></pre>\n<p>Call completed.</p>\n<pre class=\"lang-none prettyprint-override\"><code>SQL&gt; execute call_simplejava;\nHere we are\n</code></pre>\n"}],"owner":{"account_id":674022,"reputation":101,"user_id":518880,"display_name":"prabhakar"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":17731,"favorite_count":0,"down_vote_count":0,"up_vote_count":10,"answer_count":2,"score":10,"last_activity_date":1664227470,"creation_date":1290606974,"question_id":4267545,"body_markdown":"I have loaded a Java class into Oracle using the loadjava utility.\r\n\r\nThis class has some *system.out.println* messages.\r\n\r\nWhen I execute a method from this class I want to see the the sysout messages.\r\n\r\nWhere can I find these messages?\r\n\r\n","title":"Where does the system.out.println output go in Oracle Java class?","body":"<p>I have loaded a Java class into Oracle using the loadjava utility.</p>\n<p>This class has some <em>system.out.println</em> messages.</p>\n<p>When I execute a method from this class I want to see the the sysout messages.</p>\n<p>Where can I find these messages?</p>\n"},{"tags":["java","maven","maven-plugin","maven-shade-plugin"],"comments":[{"owner":{"account_id":10211727,"reputation":538,"user_id":7538619,"display_name":"ajith george"},"score":0,"creation_date":1550217132,"post_id":54704585,"comment_id":96195291,"body_markdown":"It seems like you are using an old JDK version, is there any reason for that?","body":"It seems like you are using an old JDK version, is there any reason for that?"},{"owner":{"account_id":3664853,"reputation":431,"user_id":8695455,"display_name":"Santhosh"},"score":0,"creation_date":1550223188,"post_id":54704585,"comment_id":96198220,"body_markdown":"My current project is in the old version.","body":"My current project is in the old version."}],"answers":[{"tags":[],"owner":{"account_id":3664853,"reputation":431,"user_id":8695455,"display_name":"Santhosh"},"down_vote_count":0,"up_vote_count":4,"is_accepted":true,"score":4,"last_activity_date":1550223249,"creation_date":1550223249,"answer_id":54706335,"question_id":54704585,"body_markdown":"Changing the maven-compiler-plugin version from 2.3 to 3.2.1 solved it.\r\n","title":"Maven shade plugin -Failed to execute goal","body":"<p>Changing the maven-compiler-plugin version from 2.3 to 3.2.1 solved it.</p>\n"}],"owner":{"account_id":3664853,"reputation":431,"user_id":8695455,"display_name":"Santhosh"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":3744,"favorite_count":0,"down_vote_count":0,"up_vote_count":4,"accepted_answer_id":54706335,"answer_count":1,"score":4,"last_activity_date":1664226983,"creation_date":1550216268,"question_id":54704585,"body_markdown":"I have been trying to rename tika app class. There are loading conflicts due to duplicate classes on the class path. When I try and run maven install -e, it throwing the error and I want to use the \r\n\r\n&gt; org.apache.tika\r\n\r\n class as \r\n\r\n&gt; com.test1.tika\r\n\r\nThe pom.xml file is given as below\r\n\r\n   \r\n\r\n     &lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n      xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\r\n      &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n    \r\n      &lt;groupId&gt;com.test1.tika&lt;/groupId&gt;\r\n      &lt;artifactId&gt;tika-app&lt;/artifactId&gt;\r\n      &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\r\n      &lt;packaging&gt;jar&lt;/packaging&gt;\r\n    \r\n      &lt;name&gt;tika-app&lt;/name&gt;\r\n      &lt;url&gt;http://maven.apache.org&lt;/url&gt;\r\n    \r\n      &lt;properties&gt;\r\n        &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\r\n      &lt;/properties&gt;\r\n    \r\n      &lt;dependencies&gt;\r\n        &lt;dependency&gt;\r\n          &lt;groupId&gt;junit&lt;/groupId&gt;\r\n          &lt;artifactId&gt;junit&lt;/artifactId&gt;\r\n          &lt;version&gt;3.8.1&lt;/version&gt;\r\n          &lt;scope&gt;test&lt;/scope&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n    \t    &lt;groupId&gt;org.apache.tika&lt;/groupId&gt;\r\n    \t    &lt;artifactId&gt;tika-app&lt;/artifactId&gt;\r\n    \t    &lt;version&gt;1.20&lt;/version&gt;\r\n    \t&lt;/dependency&gt;\r\n      &lt;/dependencies&gt;\r\n      \r\n      \r\n      &lt;build&gt;\r\n    \t&lt;plugins&gt;\r\n    \t\t&lt;plugin&gt;\r\n    \t\t\t&lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\r\n    \t\t\t&lt;version&gt;2.3&lt;/version&gt;\r\n    \t\t\t&lt;configuration&gt;\r\n    \t\t\t\t&lt;source&gt;1.6&lt;/source&gt;\r\n    \t\t\t\t&lt;target&gt;1.6&lt;/target&gt;\r\n    \t\t\t&lt;/configuration&gt;\r\n    \t\t&lt;/plugin&gt;\r\n    \t\t&lt;plugin&gt;\r\n    \t\t\t&lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;maven-shade-plugin&lt;/artifactId&gt;\r\n    \t\t\t&lt;version&gt;2.3&lt;/version&gt;\r\n    \t\t\t&lt;configuration&gt;\r\n    \t\t\t\t&lt;createSourcesJar&gt;true&lt;/createSourcesJar&gt;\r\n    \t\t\t\t&lt;relocations&gt;\r\n    \t\t\t\t\t&lt;relocation&gt;\r\n    \t\t\t\t\t\t&lt;pattern&gt;org.apache.tika.&lt;/pattern&gt;\r\n    \t\t\t\t\t\t&lt;shadedPattern&gt;com.test1.tika.&lt;/shadedPattern&gt;\r\n    \t\t\t\t\t&lt;/relocation&gt;\r\n    \t\t\t\t&lt;/relocations&gt;\r\n    \t\t\t&lt;/configuration&gt;\r\n    \t\t\t&lt;executions&gt;\r\n    \t\t\t\t&lt;execution&gt;\r\n    \t\t\t\t\t&lt;phase&gt;package&lt;/phase&gt;\r\n    \t\t\t\t\t&lt;goals&gt;\r\n    \t\t\t\t\t\t&lt;goal&gt;shade&lt;/goal&gt;\r\n    \t\t\t\t\t&lt;/goals&gt;\r\n    \t\t\t\t&lt;/execution&gt;\r\n    \t\t\t&lt;/executions&gt;\r\n    \t\t&lt;/plugin&gt;\r\n    \t&lt;/plugins&gt;\r\n    &lt;/build&gt;\r\n      \r\n    &lt;/project&gt;\r\n\r\nThe error from the mvn package command is the following:\r\n\r\n&gt; [ERROR] Failed to execute goal\r\n&gt; org.apache.maven.plugins:maven-shade-plugin:2.3:shade (default) on\r\n&gt; project tika-app: Error creating shaded jar: null:\r\n&gt; IllegalArgumentException -&gt; [Help 1]\r\n&gt; org.apache.maven.lifecycle.LifecycleExecutionException: Failed to\r\n&gt; execute goal org.apache.maven.plugins:maven-shade-plugin:2.3:shade\r\n&gt; (default) on project tika-app: Error creating shaded jar: null\r\n&gt;     at org.apache.maven.lifecycle.internal.MojoExecutor.execute (MojoExecutor.java:215)\r\n&gt;     at org.apache.maven.lifecycle.internal.MojoExecutor.execute (MojoExecutor.java:156)\r\n&gt;     at org.apache.maven.lifecycle.internal.MojoExecutor.execute (MojoExecutor.java:148)\r\n&gt;     at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject\r\n&gt; (LifecycleModuleBuilder.java:117)\r\n&gt;     at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject\r\n&gt; (LifecycleModuleBuilder.java:81)\r\n&gt;     at org.apache.maven.lifecycle.internal.builder.singlethreaded.SingleThreadedBuilder.build\r\n&gt; (SingleThreadedBuilder.java:56)\r\n&gt;     at org.apache.maven.lifecycle.internal.LifecycleStarter.execute (LifecycleStarter.java:128)\r\n&gt;     at org.apache.maven.DefaultMaven.doExecute (DefaultMaven.java:305)\r\n&gt;     at org.apache.maven.DefaultMaven.doExecute (DefaultMaven.java:192)\r\n&gt;     at org.apache.maven.DefaultMaven.execute (DefaultMaven.java:105)\r\n&gt;     at org.apache.maven.cli.MavenCli.execute (MavenCli.java:956)\r\n&gt;     at org.apache.maven.cli.MavenCli.doMain (MavenCli.java:288)\r\n&gt;     at org.apache.maven.cli.MavenCli.main (MavenCli.java:192)\r\n&gt;     at sun.reflect.NativeMethodAccessorImpl.invoke0 (Native Method)\r\n&gt;     at sun.reflect.NativeMethodAccessorImpl.invoke (NativeMethodAccessorImpl.java:62)\r\n&gt;     at sun.reflect.DelegatingMethodAccessorImpl.invoke (DelegatingMethodAccessorImpl.java:43)\r\n&gt;     at java.lang.reflect.Method.invoke (Method.java:498)\r\n&gt;     at org.codehaus.plexus.classworlds.launcher.Launcher.launchEnhanced\r\n&gt; (Launcher.java:289)\r\n&gt;     at org.codehaus.plexus.classworlds.launcher.Launcher.launch (Launcher.java:229)\r\n&gt;     at org.codehaus.plexus.classworlds.launcher.Launcher.mainWithExitCode\r\n&gt; (Launcher.java:415)\r\n&gt;     at org.codehaus.plexus.classworlds.launcher.Launcher.main (Launcher.java:356) Caused by:\r\n&gt; org.apache.maven.plugin.MojoExecutionException: Error creating shaded\r\n&gt; jar: null\r\n&gt;     at org.apache.maven.plugins.shade.mojo.ShadeMojo.execute (ShadeMojo.java:566)\r\n&gt;     at org.apache.maven.plugin.DefaultBuildPluginManager.executeMojo (DefaultBuildPluginManager.java:137)\r\n&gt;     at org.apache.maven.lifecycle.internal.MojoExecutor.execute (MojoExecutor.java:210)\r\n&gt;     at org.apache.maven.lifecycle.internal.MojoExecutor.execute (MojoExecutor.java:156)\r\n&gt;     at org.apache.maven.lifecycle.internal.MojoExecutor.execute (MojoExecutor.java:148)\r\n&gt;     at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject\r\n&gt; (LifecycleModuleBuilder.java:117)\r\n&gt;     at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject\r\n&gt; (LifecycleModuleBuilder.java:81)\r\n&gt;     at org.apache.maven.lifecycle.internal.builder.singlethreaded.SingleThreadedBuilder.build\r\n&gt; (SingleThreadedBuilder.java:56)\r\n&gt;     at org.apache.maven.lifecycle.internal.LifecycleStarter.execute (LifecycleStarter.java:128)\r\n&gt;     at org.apache.maven.DefaultMaven.doExecute (DefaultMaven.java:305)\r\n&gt;     at org.apache.maven.DefaultMaven.doExecute (DefaultMaven.java:192)\r\n&gt;     at org.apache.maven.DefaultMaven.execute (DefaultMaven.java:105)\r\n&gt;     at org.apache.maven.cli.MavenCli.execute (MavenCli.java:956)\r\n&gt;     at org.apache.maven.cli.MavenCli.doMain (MavenCli.java:288)\r\n&gt;     at org.apache.maven.cli.MavenCli.main (MavenCli.java:192)\r\n&gt;     at sun.reflect.NativeMethodAccessorImpl.invoke0 (Native Method)\r\n&gt;     at sun.reflect.NativeMethodAccessorImpl.invoke (NativeMethodAccessorImpl.java:62)\r\n&gt;     at sun.reflect.DelegatingMethodAccessorImpl.invoke (DelegatingMethodAccessorImpl.java:43)\r\n&gt;     at java.lang.reflect.Method.invoke (Method.java:498)\r\n&gt;     at org.codehaus.plexus.classworlds.launcher.Launcher.launchEnhanced\r\n&gt; (Launcher.java:289)\r\n&gt;     at org.codehaus.plexus.classworlds.launcher.Launcher.launch (Launcher.java:229)\r\n&gt;     at org.codehaus.plexus.classworlds.launcher.Launcher.mainWithExitCode\r\n&gt; (Launcher.java:415)\r\n&gt;     at org.codehaus.plexus.classworlds.launcher.Launcher.main (Launcher.java:356) Caused by: java.lang.IllegalArgumentException\r\n&gt;     at org.objectweb.asm.ClassReader.&lt;init&gt; (Unknown Source)\r\n&gt;     at org.objectweb.asm.ClassReader.&lt;init&gt; (Unknown Source)\r\n&gt;     at org.objectweb.asm.ClassReader.&lt;init&gt; (Unknown Source)\r\n&gt;     at org.apache.maven.plugins.shade.DefaultShader.addRemappedClass (DefaultShader.java:331)\r\n&gt;     at org.apache.maven.plugins.shade.DefaultShader.shade (DefaultShader.java:165)\r\n&gt;     at org.apache.maven.plugins.shade.mojo.ShadeMojo.execute (ShadeMojo.java:471)\r\n&gt;     at org.apache.maven.plugin.DefaultBuildPluginManager.executeMojo (DefaultBuildPluginManager.java:137)\r\n&gt;     at org.apache.maven.lifecycle.internal.MojoExecutor.execute (MojoExecutor.java:210)\r\n&gt;     at org.apache.maven.lifecycle.internal.MojoExecutor.execute (MojoExecutor.java:156)\r\n&gt;     at org.apache.maven.lifecycle.internal.MojoExecutor.execute (MojoExecutor.java:148)\r\n&gt;     at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject\r\n&gt; (LifecycleModuleBuilder.java:117)\r\n&gt;     at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject\r\n&gt; (LifecycleModuleBuilder.java:81)\r\n&gt;     at org.apache.maven.lifecycle.internal.builder.singlethreaded.SingleThreadedBuilder.build\r\n&gt; (SingleThreadedBuilder.java:56)\r\n&gt;     at org.apache.maven.lifecycle.internal.LifecycleStarter.execute (LifecycleStarter.java:128)\r\n&gt;     at org.apache.maven.DefaultMaven.doExecute (DefaultMaven.java:305)\r\n&gt;     at org.apache.maven.DefaultMaven.doExecute (DefaultMaven.java:192)\r\n&gt;     at org.apache.maven.DefaultMaven.execute (DefaultMaven.java:105)\r\n&gt;     at org.apache.maven.cli.MavenCli.execute (MavenCli.java:956)\r\n&gt;     at org.apache.maven.cli.MavenCli.doMain (MavenCli.java:288)\r\n&gt;     at org.apache.maven.cli.MavenCli.main (MavenCli.java:192)\r\n&gt;     at sun.reflect.NativeMethodAccessorImpl.invoke0 (Native Method)\r\n&gt;     at sun.reflect.NativeMethodAccessorImpl.invoke (NativeMethodAccessorImpl.java:62)\r\n&gt;     at sun.reflect.DelegatingMethodAccessorImpl.invoke (DelegatingMethodAccessorImpl.java:43)\r\n&gt;     at java.lang.reflect.Method.invoke (Method.java:498)\r\n&gt;     at org.codehaus.plexus.classworlds.launcher.Launcher.launchEnhanced\r\n&gt; (Launcher.java:289)\r\n&gt;     at org.codehaus.plexus.classworlds.launcher.Launcher.launch (Launcher.java:229)\r\n&gt;     at org.codehaus.plexus.classworlds.launcher.Launcher.mainWithExitCode\r\n&gt; (Launcher.java:415)\r\n&gt;     at org.codehaus.plexus.classworlds.launcher.Launcher.main (Launcher.java:356) [ERROR] [ERROR] Re-run Maven using the -X switch\r\n&gt; to enable full debug logging. [ERROR] [ERROR] For more information\r\n&gt; about the errors and possible solutions, please read the following\r\n&gt; articles: [ERROR] [Help 1]\r\n&gt; http://cwiki.apache.org/confluence/display/MAVEN/MojoExecutionException","title":"Maven shade plugin -Failed to execute goal","body":"<p>I have been trying to rename tika app class. There are loading conflicts due to duplicate classes on the class path. When I try and run maven install -e, it throwing the error and I want to use the </p>\n\n<blockquote>\n  <p>org.apache.tika</p>\n</blockquote>\n\n<p>class as </p>\n\n<blockquote>\n  <p>com.test1.tika</p>\n</blockquote>\n\n<p>The pom.xml file is given as below</p>\n\n<pre><code> &lt;project xmlns=\"http://maven.apache.org/POM/4.0.0\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n  xsi:schemaLocation=\"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd\"&gt;\n  &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n\n  &lt;groupId&gt;com.test1.tika&lt;/groupId&gt;\n  &lt;artifactId&gt;tika-app&lt;/artifactId&gt;\n  &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\n  &lt;packaging&gt;jar&lt;/packaging&gt;\n\n  &lt;name&gt;tika-app&lt;/name&gt;\n  &lt;url&gt;http://maven.apache.org&lt;/url&gt;\n\n  &lt;properties&gt;\n    &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\n  &lt;/properties&gt;\n\n  &lt;dependencies&gt;\n    &lt;dependency&gt;\n      &lt;groupId&gt;junit&lt;/groupId&gt;\n      &lt;artifactId&gt;junit&lt;/artifactId&gt;\n      &lt;version&gt;3.8.1&lt;/version&gt;\n      &lt;scope&gt;test&lt;/scope&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.apache.tika&lt;/groupId&gt;\n        &lt;artifactId&gt;tika-app&lt;/artifactId&gt;\n        &lt;version&gt;1.20&lt;/version&gt;\n    &lt;/dependency&gt;\n  &lt;/dependencies&gt;\n\n\n  &lt;build&gt;\n    &lt;plugins&gt;\n        &lt;plugin&gt;\n            &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n            &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\n            &lt;version&gt;2.3&lt;/version&gt;\n            &lt;configuration&gt;\n                &lt;source&gt;1.6&lt;/source&gt;\n                &lt;target&gt;1.6&lt;/target&gt;\n            &lt;/configuration&gt;\n        &lt;/plugin&gt;\n        &lt;plugin&gt;\n            &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n            &lt;artifactId&gt;maven-shade-plugin&lt;/artifactId&gt;\n            &lt;version&gt;2.3&lt;/version&gt;\n            &lt;configuration&gt;\n                &lt;createSourcesJar&gt;true&lt;/createSourcesJar&gt;\n                &lt;relocations&gt;\n                    &lt;relocation&gt;\n                        &lt;pattern&gt;org.apache.tika.&lt;/pattern&gt;\n                        &lt;shadedPattern&gt;com.test1.tika.&lt;/shadedPattern&gt;\n                    &lt;/relocation&gt;\n                &lt;/relocations&gt;\n            &lt;/configuration&gt;\n            &lt;executions&gt;\n                &lt;execution&gt;\n                    &lt;phase&gt;package&lt;/phase&gt;\n                    &lt;goals&gt;\n                        &lt;goal&gt;shade&lt;/goal&gt;\n                    &lt;/goals&gt;\n                &lt;/execution&gt;\n            &lt;/executions&gt;\n        &lt;/plugin&gt;\n    &lt;/plugins&gt;\n&lt;/build&gt;\n\n&lt;/project&gt;\n</code></pre>\n\n<p>The error from the mvn package command is the following:</p>\n\n<blockquote>\n  <p>[ERROR] Failed to execute goal\n  org.apache.maven.plugins:maven-shade-plugin:2.3:shade (default) on\n  project tika-app: Error creating shaded jar: null:\n  IllegalArgumentException -> [Help 1]\n  org.apache.maven.lifecycle.LifecycleExecutionException: Failed to\n  execute goal org.apache.maven.plugins:maven-shade-plugin:2.3:shade\n  (default) on project tika-app: Error creating shaded jar: null\n      at org.apache.maven.lifecycle.internal.MojoExecutor.execute (MojoExecutor.java:215)\n      at org.apache.maven.lifecycle.internal.MojoExecutor.execute (MojoExecutor.java:156)\n      at org.apache.maven.lifecycle.internal.MojoExecutor.execute (MojoExecutor.java:148)\n      at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject\n  (LifecycleModuleBuilder.java:117)\n      at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject\n  (LifecycleModuleBuilder.java:81)\n      at org.apache.maven.lifecycle.internal.builder.singlethreaded.SingleThreadedBuilder.build\n  (SingleThreadedBuilder.java:56)\n      at org.apache.maven.lifecycle.internal.LifecycleStarter.execute (LifecycleStarter.java:128)\n      at org.apache.maven.DefaultMaven.doExecute (DefaultMaven.java:305)\n      at org.apache.maven.DefaultMaven.doExecute (DefaultMaven.java:192)\n      at org.apache.maven.DefaultMaven.execute (DefaultMaven.java:105)\n      at org.apache.maven.cli.MavenCli.execute (MavenCli.java:956)\n      at org.apache.maven.cli.MavenCli.doMain (MavenCli.java:288)\n      at org.apache.maven.cli.MavenCli.main (MavenCli.java:192)\n      at sun.reflect.NativeMethodAccessorImpl.invoke0 (Native Method)\n      at sun.reflect.NativeMethodAccessorImpl.invoke (NativeMethodAccessorImpl.java:62)\n      at sun.reflect.DelegatingMethodAccessorImpl.invoke (DelegatingMethodAccessorImpl.java:43)\n      at java.lang.reflect.Method.invoke (Method.java:498)\n      at org.codehaus.plexus.classworlds.launcher.Launcher.launchEnhanced\n  (Launcher.java:289)\n      at org.codehaus.plexus.classworlds.launcher.Launcher.launch (Launcher.java:229)\n      at org.codehaus.plexus.classworlds.launcher.Launcher.mainWithExitCode\n  (Launcher.java:415)\n      at org.codehaus.plexus.classworlds.launcher.Launcher.main (Launcher.java:356) Caused by:\n  org.apache.maven.plugin.MojoExecutionException: Error creating shaded\n  jar: null\n      at org.apache.maven.plugins.shade.mojo.ShadeMojo.execute (ShadeMojo.java:566)\n      at org.apache.maven.plugin.DefaultBuildPluginManager.executeMojo (DefaultBuildPluginManager.java:137)\n      at org.apache.maven.lifecycle.internal.MojoExecutor.execute (MojoExecutor.java:210)\n      at org.apache.maven.lifecycle.internal.MojoExecutor.execute (MojoExecutor.java:156)\n      at org.apache.maven.lifecycle.internal.MojoExecutor.execute (MojoExecutor.java:148)\n      at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject\n  (LifecycleModuleBuilder.java:117)\n      at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject\n  (LifecycleModuleBuilder.java:81)\n      at org.apache.maven.lifecycle.internal.builder.singlethreaded.SingleThreadedBuilder.build\n  (SingleThreadedBuilder.java:56)\n      at org.apache.maven.lifecycle.internal.LifecycleStarter.execute (LifecycleStarter.java:128)\n      at org.apache.maven.DefaultMaven.doExecute (DefaultMaven.java:305)\n      at org.apache.maven.DefaultMaven.doExecute (DefaultMaven.java:192)\n      at org.apache.maven.DefaultMaven.execute (DefaultMaven.java:105)\n      at org.apache.maven.cli.MavenCli.execute (MavenCli.java:956)\n      at org.apache.maven.cli.MavenCli.doMain (MavenCli.java:288)\n      at org.apache.maven.cli.MavenCli.main (MavenCli.java:192)\n      at sun.reflect.NativeMethodAccessorImpl.invoke0 (Native Method)\n      at sun.reflect.NativeMethodAccessorImpl.invoke (NativeMethodAccessorImpl.java:62)\n      at sun.reflect.DelegatingMethodAccessorImpl.invoke (DelegatingMethodAccessorImpl.java:43)\n      at java.lang.reflect.Method.invoke (Method.java:498)\n      at org.codehaus.plexus.classworlds.launcher.Launcher.launchEnhanced\n  (Launcher.java:289)\n      at org.codehaus.plexus.classworlds.launcher.Launcher.launch (Launcher.java:229)\n      at org.codehaus.plexus.classworlds.launcher.Launcher.mainWithExitCode\n  (Launcher.java:415)\n      at org.codehaus.plexus.classworlds.launcher.Launcher.main (Launcher.java:356) Caused by: java.lang.IllegalArgumentException\n      at org.objectweb.asm.ClassReader. (Unknown Source)\n      at org.objectweb.asm.ClassReader. (Unknown Source)\n      at org.objectweb.asm.ClassReader. (Unknown Source)\n      at org.apache.maven.plugins.shade.DefaultShader.addRemappedClass (DefaultShader.java:331)\n      at org.apache.maven.plugins.shade.DefaultShader.shade (DefaultShader.java:165)\n      at org.apache.maven.plugins.shade.mojo.ShadeMojo.execute (ShadeMojo.java:471)\n      at org.apache.maven.plugin.DefaultBuildPluginManager.executeMojo (DefaultBuildPluginManager.java:137)\n      at org.apache.maven.lifecycle.internal.MojoExecutor.execute (MojoExecutor.java:210)\n      at org.apache.maven.lifecycle.internal.MojoExecutor.execute (MojoExecutor.java:156)\n      at org.apache.maven.lifecycle.internal.MojoExecutor.execute (MojoExecutor.java:148)\n      at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject\n  (LifecycleModuleBuilder.java:117)\n      at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject\n  (LifecycleModuleBuilder.java:81)\n      at org.apache.maven.lifecycle.internal.builder.singlethreaded.SingleThreadedBuilder.build\n  (SingleThreadedBuilder.java:56)\n      at org.apache.maven.lifecycle.internal.LifecycleStarter.execute (LifecycleStarter.java:128)\n      at org.apache.maven.DefaultMaven.doExecute (DefaultMaven.java:305)\n      at org.apache.maven.DefaultMaven.doExecute (DefaultMaven.java:192)\n      at org.apache.maven.DefaultMaven.execute (DefaultMaven.java:105)\n      at org.apache.maven.cli.MavenCli.execute (MavenCli.java:956)\n      at org.apache.maven.cli.MavenCli.doMain (MavenCli.java:288)\n      at org.apache.maven.cli.MavenCli.main (MavenCli.java:192)\n      at sun.reflect.NativeMethodAccessorImpl.invoke0 (Native Method)\n      at sun.reflect.NativeMethodAccessorImpl.invoke (NativeMethodAccessorImpl.java:62)\n      at sun.reflect.DelegatingMethodAccessorImpl.invoke (DelegatingMethodAccessorImpl.java:43)\n      at java.lang.reflect.Method.invoke (Method.java:498)\n      at org.codehaus.plexus.classworlds.launcher.Launcher.launchEnhanced\n  (Launcher.java:289)\n      at org.codehaus.plexus.classworlds.launcher.Launcher.launch (Launcher.java:229)\n      at org.codehaus.plexus.classworlds.launcher.Launcher.mainWithExitCode\n  (Launcher.java:415)\n      at org.codehaus.plexus.classworlds.launcher.Launcher.main (Launcher.java:356) [ERROR] [ERROR] Re-run Maven using the -X switch\n  to enable full debug logging. [ERROR] [ERROR] For more information\n  about the errors and possible solutions, please read the following\n  articles: [ERROR] [Help 1]\n  <a href=\"http://cwiki.apache.org/confluence/display/MAVEN/MojoExecutionException\" rel=\"nofollow noreferrer\">http://cwiki.apache.org/confluence/display/MAVEN/MojoExecutionException</a></p>\n</blockquote>\n"},{"tags":["java","spring-boot","download","base64","apache-poi"],"comments":[{"owner":{"account_id":1223835,"reputation":75848,"user_id":1189885,"accept_rate":43,"display_name":"chrylis -cautiouslyoptimistic-"},"score":4,"creation_date":1664227587,"post_id":73860014,"comment_id":130418976,"body_markdown":"It&#39;s an Excel file. Why are you Base64ing it instead of returning it as bytes?","body":"It&#39;s an Excel file. Why are you Base64ing it instead of returning it as bytes?"},{"owner":{"account_id":8909811,"reputation":2612,"user_id":6650475,"display_name":"Andrew S"},"score":3,"creation_date":1664229072,"post_id":73860014,"comment_id":130419290,"body_markdown":"How long will it take to create a large Excel file?  Could the client abandon the connection (timeout) before starting to return a result?  Could multiple users request large Excel files to be created?  Consider streaming directly to the response instead of building the entire Excel then returning the whole object.  Or maybe stream to blob storage, and return just the storage location to the client, and the client can download the file without going through the app.","body":"How long will it take to create a large Excel file?  Could the client abandon the connection (timeout) before starting to return a result?  Could multiple users request large Excel files to be created?  Consider streaming directly to the response instead of building the entire Excel then returning the whole object.  Or maybe stream to blob storage, and return just the storage location to the client, and the client can download the file without going through the app."},{"owner":{"account_id":8971030,"reputation":31,"user_id":6689495,"display_name":"R.Ramirez"},"score":0,"creation_date":1664245873,"post_id":73860014,"comment_id":130421767,"body_markdown":"Thanks! Do you mean by Streaming directly means return the data in the original mapped format (like json) ?","body":"Thanks! Do you mean by Streaming directly means return the data in the original mapped format (like json) ?"}],"owner":{"account_id":8971030,"reputation":31,"user_id":6689495,"display_name":"R.Ramirez"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":222,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1664226904,"creation_date":1664226904,"question_id":73860014,"body_markdown":"Currently I have within my API a service that provides the base 64 in text of an .xlxs file that can have from a thousand or two thousand to a million records.\r\n\r\nI am using\r\n```\r\n&lt;dependency&gt;\r\n    &lt;groupId&gt;org.apache.poi&lt;/groupId&gt;\r\n    &lt;artifactId&gt;poi&lt;/artifactId&gt;\r\n    &lt;version&gt;5.2.2&lt;/version&gt;\r\n&lt;/dependency&gt;\r\n```\r\nand in short, all the services list the records to pass to excel, and then I create the excel... \r\n```\r\npublic static SXSSFWorkbook toExcel(List&lt;?&gt; listToExcel) {\r\n        String[] headers = {&quot;Column A&quot;,  .... , &quot;Column n&quot;};\r\n\r\n        SXSSFWorkbook workbook = new SXSSFWorkbook(200);\r\n        Sheet sheet = workbook.createSheet(&quot;Any Sheet Name&quot;);\r\n        Row header = sheet.createRow(0);\r\n\r\n        for (int i = 0; i &lt; headers.length; i++) {\r\n            Cell headerCell = header.createCell(i);\r\n            headerCell.setCellValue(headers[i]);\r\n            headerCell.setCellStyle(getStyle(workbook));\r\n        }\r\n\r\n        for (int i = 0; i &lt; listToExcel.size(); i++) {\r\n            Row row = sheet.createRow(i + 1);\r\n            ObjectX report = (ObjectX) listToExcel.get(i);\r\n\r\n            Cell cell = row.createCell(0);\r\n            cell.setCellValue(report.getState());\r\n            // for each property of the object I create a cell \r\n            // and finally a row in a for\r\n\r\n```\r\nat the end y just return this woorkbook in base64 in the service\r\n```\r\nWorkbook workbook = ObjectX.toExcel(listFromDatabase);\r\n        return ok(toBase64(workbook), &quot;Consulta Exitosa&quot;);\r\n```\r\n\r\nI&#39;m aware about to :\r\n1. is this ok in resource optimization?\r\n2. is the fastest generator?\r\n3. will it affect the java heap memory or something I don&#39;t have visibility of?\r\n\r\n","title":"Best approach in Java - Spring Boot API to provide a file (.xlxs) with almost 1 million of registers?","body":"<p>Currently I have within my API a service that provides the base 64 in text of an .xlxs file that can have from a thousand or two thousand to a million records.</p>\n<p>I am using</p>\n<pre><code>&lt;dependency&gt;\n    &lt;groupId&gt;org.apache.poi&lt;/groupId&gt;\n    &lt;artifactId&gt;poi&lt;/artifactId&gt;\n    &lt;version&gt;5.2.2&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n<p>and in short, all the services list the records to pass to excel, and then I create the excel...</p>\n<pre><code>public static SXSSFWorkbook toExcel(List&lt;?&gt; listToExcel) {\n        String[] headers = {&quot;Column A&quot;,  .... , &quot;Column n&quot;};\n\n        SXSSFWorkbook workbook = new SXSSFWorkbook(200);\n        Sheet sheet = workbook.createSheet(&quot;Any Sheet Name&quot;);\n        Row header = sheet.createRow(0);\n\n        for (int i = 0; i &lt; headers.length; i++) {\n            Cell headerCell = header.createCell(i);\n            headerCell.setCellValue(headers[i]);\n            headerCell.setCellStyle(getStyle(workbook));\n        }\n\n        for (int i = 0; i &lt; listToExcel.size(); i++) {\n            Row row = sheet.createRow(i + 1);\n            ObjectX report = (ObjectX) listToExcel.get(i);\n\n            Cell cell = row.createCell(0);\n            cell.setCellValue(report.getState());\n            // for each property of the object I create a cell \n            // and finally a row in a for\n\n</code></pre>\n<p>at the end y just return this woorkbook in base64 in the service</p>\n<pre><code>Workbook workbook = ObjectX.toExcel(listFromDatabase);\n        return ok(toBase64(workbook), &quot;Consulta Exitosa&quot;);\n</code></pre>\n<p>I'm aware about to :</p>\n<ol>\n<li>is this ok in resource optimization?</li>\n<li>is the fastest generator?</li>\n<li>will it affect the java heap memory or something I don't have visibility of?</li>\n</ol>\n"},{"tags":["java","reactjs","corda"],"comments":[{"owner":{"account_id":2078428,"reputation":331,"user_id":1851107,"display_name":"manish"},"score":0,"creation_date":1591783765,"post_id":62299540,"comment_id":110184948,"body_markdown":"The above is not an error it is a warning if u are trying to use the Corda Observable.Could you share your Vault Query .","body":"The above is not an error it is a warning if u are trying to use the Corda Observable.Could you share your Vault Query ."},{"owner":{"account_id":16748471,"reputation":191,"user_id":12106094,"display_name":"Julian"},"score":0,"creation_date":1591785865,"post_id":62299540,"comment_id":110186011,"body_markdown":"The vault query does only provide basic information about the state itself. Like the value of the tokens and the Transaction Hash.","body":"The vault query does only provide basic information about the state itself. Like the value of the tokens and the Transaction Hash."}],"answers":[{"tags":[],"owner":{"account_id":14473237,"reputation":141,"user_id":10454528,"display_name":"Wayne Lam"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1591802821,"creation_date":1591802821,"answer_id":62307277,"question_id":62299540,"body_markdown":"The reason that the error appears is that the Observable on the client-side gets garbage collected.\r\n\r\nThe solution is provided has been provided in the bracket-\r\n*(Java users: subscribe to it then unsubscribe)*\r\n\r\nSo in your case, you can do something like this:\r\n\r\n```\r\nSubscription subs = updates.subscribe();\r\nsubs.unsubscribe();\r\n```\r\n\r\nProbably a more practical way is to keep the observable instance as a private attribute - such that it won&#39;t get garbage-collected. ie.\r\n\r\n```\r\nprivate Observable observable;\r\n```\r\n\r\nRef: https://docs.corda.net/docs/corda-os/4.4/clientrpc.html#observables","title":"Corda RPC: A hot observable returned from an RPC was never subscribed to","body":"<p>The reason that the error appears is that the Observable on the client-side gets garbage collected.</p>\n\n<p>The solution is provided has been provided in the bracket-\n<em>(Java users: subscribe to it then unsubscribe)</em></p>\n\n<p>So in your case, you can do something like this:</p>\n\n<pre><code>Subscription subs = updates.subscribe();\nsubs.unsubscribe();\n</code></pre>\n\n<p>Probably a more practical way is to keep the observable instance as a private attribute - such that it won't get garbage-collected. ie.</p>\n\n<pre><code>private Observable observable;\n</code></pre>\n\n<p>Ref: <a href=\"https://docs.corda.net/docs/corda-os/4.4/clientrpc.html#observables\" rel=\"nofollow noreferrer\">https://docs.corda.net/docs/corda-os/4.4/clientrpc.html#observables</a></p>\n"}],"owner":{"account_id":16748471,"reputation":191,"user_id":12106094,"display_name":"Julian"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":381,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":62307277,"answer_count":1,"score":1,"last_activity_date":1664226820,"creation_date":1591779226,"question_id":62299540,"body_markdown":"I build a CorDapp based on the [Java Template][1]. On top of that, I created a React front-end. Now, I want to start a flow from my front-end. To do so, I modified the template server, so that the controller starts my flow:\r\n\r\n```\r\n@GetMapping(value = &quot;/templateendpoint&quot;, produces = &quot;text/plain&quot;)\r\n    private String templateendpoint() {\r\n        proxy.startTrackedFlowDynamic(issueTokens.class, 30, &quot;O=Bob, L=Berlin, C=DE&quot;);\r\n        return &quot;The flow was started&quot;;  \r\n    }\r\n``` \r\nThis operation does start the flow that issues 30 tokens to Bob. I can see that the flow was successful, by querying Bob&#39;s vault. However, I get the following error on the template server:\r\n\r\n```\r\nRPCClientProxyHandler.onRemoval - A hot observable returned from an RPC was never subscribed to.\r\nThis wastes server-side resources because it was queueing observations for retrieval.\r\nIt is being closed now, but please adjust your code to call .notUsed() on the observable to close it explicitly. (Java users: subscribe to it then unsubscribe). \r\nIf you aren&#39;t sure where the leak is coming from, set -Dnet.corda.client.rpc.trackRpcCallSites=true on the JVM command line and you will get a stack trace with this warning.\r\n``` \r\nAfter this first transaction, I cannot start another flow. The .notUsed() method only works for Kotlin. However, I couldn&#39;t find a working way to subscribe and then unsubscribe from the observable. \r\n\r\nCould anyone give me an example on how to implement this with the Corda flow? Moreover, what is the most practical way to pass information from the front-end to the controller class, in order to use that as flow arguments?\r\n\r\n\r\n  [1]: https://github.com/corda/cordapp-template-java","title":"Corda RPC: A hot observable returned from an RPC was never subscribed to","body":"<p>I build a CorDapp based on the <a href=\"https://github.com/corda/cordapp-template-java\" rel=\"nofollow noreferrer\">Java Template</a>. On top of that, I created a React front-end. Now, I want to start a flow from my front-end. To do so, I modified the template server, so that the controller starts my flow:</p>\n\n<pre><code>@GetMapping(value = \"/templateendpoint\", produces = \"text/plain\")\n    private String templateendpoint() {\n        proxy.startTrackedFlowDynamic(issueTokens.class, 30, \"O=Bob, L=Berlin, C=DE\");\n        return \"The flow was started\";  \n    }\n</code></pre>\n\n<p>This operation does start the flow that issues 30 tokens to Bob. I can see that the flow was successful, by querying Bob's vault. However, I get the following error on the template server:</p>\n\n<pre><code>RPCClientProxyHandler.onRemoval - A hot observable returned from an RPC was never subscribed to.\nThis wastes server-side resources because it was queueing observations for retrieval.\nIt is being closed now, but please adjust your code to call .notUsed() on the observable to close it explicitly. (Java users: subscribe to it then unsubscribe). \nIf you aren't sure where the leak is coming from, set -Dnet.corda.client.rpc.trackRpcCallSites=true on the JVM command line and you will get a stack trace with this warning.\n</code></pre>\n\n<p>After this first transaction, I cannot start another flow. The .notUsed() method only works for Kotlin. However, I couldn't find a working way to subscribe and then unsubscribe from the observable. </p>\n\n<p>Could anyone give me an example on how to implement this with the Corda flow? Moreover, what is the most practical way to pass information from the front-end to the controller class, in order to use that as flow arguments?</p>\n"},{"tags":["java","eclipse","debugging"],"answers":[{"tags":[],"owner":{"account_id":60400,"reputation":19147,"user_id":180416,"accept_rate":63,"display_name":"rich"},"down_vote_count":1,"up_vote_count":25,"is_accepted":true,"score":24,"last_activity_date":1311110246,"creation_date":1311110246,"answer_id":6754274,"question_id":6754207,"body_markdown":"Sounds like the &#39;source lookup path&#39; section if you edit the debug configuration isn&#39;t setup correctly?","title":"I get &quot;Source not found&quot; when debugging my Java code in Eclipse","body":"<p>Sounds like the 'source lookup path' section if you edit the debug configuration isn't setup correctly?</p>\n"},{"tags":[],"owner":{"account_id":264535,"reputation":3576,"user_id":550889,"accept_rate":61,"display_name":"JAB"},"down_vote_count":0,"up_vote_count":15,"is_accepted":false,"score":15,"last_activity_date":1328768295,"creation_date":1328768295,"answer_id":9206285,"question_id":6754207,"body_markdown":"Click on &quot;Edit Source Lookup Path&quot; button and then click on Add button then Java Project and include your imported project .. Hope this will solve your problem","title":"I get &quot;Source not found&quot; when debugging my Java code in Eclipse","body":"<p>Click on \"Edit Source Lookup Path\" button and then click on Add button then Java Project and include your imported project .. Hope this will solve your problem</p>\n"},{"tags":[],"owner":{"account_id":1681627,"reputation":21,"user_id":1545746,"display_name":"Jeroen"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1343044000,"creation_date":1343044000,"answer_id":11611908,"question_id":6754207,"body_markdown":"We had the same problem and none of the suggestions above worked. What did work, was deleting the local workspace and from Eclipse checking out from the repository again. The problem occured for everybody previously working with Netbeans and making the switch to Eclipse.","title":"I get &quot;Source not found&quot; when debugging my Java code in Eclipse","body":"<p>We had the same problem and none of the suggestions above worked. What did work, was deleting the local workspace and from Eclipse checking out from the repository again. The problem occured for everybody previously working with Netbeans and making the switch to Eclipse.</p>\n"},{"tags":[],"owner":{"account_id":185638,"reputation":34962,"user_id":422476,"accept_rate":90,"display_name":"Filip Spiridonov"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1378243423,"creation_date":1378243423,"answer_id":18601734,"question_id":6754207,"body_markdown":"For local projects I&#39;ve solved it by selecting the &quot;Resolve Workspace artifacts&quot; checkbox in the Debug Configurations.","title":"I get &quot;Source not found&quot; when debugging my Java code in Eclipse","body":"<p>For local projects I've solved it by selecting the \"Resolve Workspace artifacts\" checkbox in the Debug Configurations.</p>\n"},{"tags":[],"owner":{"account_id":3397940,"reputation":13,"user_id":2851006,"display_name":"tony.wang"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1381033334,"creation_date":1381033334,"answer_id":19205395,"question_id":6754207,"body_markdown":"I solved this problem by adding the class file into the src folder within the project. Hope this method may help.","title":"I get &quot;Source not found&quot; when debugging my Java code in Eclipse","body":"<p>I solved this problem by adding the class file into the src folder within the project. Hope this method may help.</p>\n"},{"tags":[],"owner":{"account_id":3266543,"reputation":2246,"user_id":2750931,"display_name":"krzysiek.ste"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1398417888,"creation_date":1398417888,"answer_id":23289123,"question_id":6754207,"body_markdown":"I had similar problem with my eclipse maven project. I fought with this issue quite a long time then I tried to rebuild projet with\r\n\r\n    mvn clean eclipse:eclipse\r\n\r\nand it helped.","title":"I get &quot;Source not found&quot; when debugging my Java code in Eclipse","body":"<p>I had similar problem with my eclipse maven project. I fought with this issue quite a long time then I tried to rebuild projet with</p>\n\n<pre><code>mvn clean eclipse:eclipse\n</code></pre>\n\n<p>and it helped.</p>\n"},{"tags":[],"owner":{"account_id":4745656,"reputation":55,"user_id":3837101,"display_name":"nandox"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1455320479,"creation_date":1455320479,"answer_id":35374086,"question_id":6754207,"body_markdown":"When I faced this problem for the very first time, I&#39;ve already done all the steps mentioned here. Curiously, my problem happened when I&#39;ve copied a project into another place. Anyway, the debug starts to work without warnings, after simply remove all breakpoints that was originated from the original project.\r\nSorry about my English , I&#39;m not fluent.","title":"I get &quot;Source not found&quot; when debugging my Java code in Eclipse","body":"<p>When I faced this problem for the very first time, I've already done all the steps mentioned here. Curiously, my problem happened when I've copied a project into another place. Anyway, the debug starts to work without warnings, after simply remove all breakpoints that was originated from the original project.\nSorry about my English , I'm not fluent.</p>\n"},{"tags":[],"owner":{"display_name":"user4772709"},"down_vote_count":1,"up_vote_count":3,"is_accepted":false,"score":2,"last_activity_date":1459760536,"creation_date":1459759066,"answer_id":36397941,"question_id":6754207,"body_markdown":"Try this:\r\n\r\n - Select Project\r\n - Right click\r\n - debug\r\n - Debug configuration\r\n - Select Source Tab\r\n - Click on add button\r\n - Select Java Project\r\n - Add your project there with check box","title":"I get &quot;Source not found&quot; when debugging my Java code in Eclipse","body":"<p>Try this:</p>\n\n<ul>\n<li>Select Project</li>\n<li>Right click</li>\n<li>debug</li>\n<li>Debug configuration</li>\n<li>Select Source Tab</li>\n<li>Click on add button</li>\n<li>Select Java Project</li>\n<li>Add your project there with check box</li>\n</ul>\n"},{"tags":[],"owner":{"account_id":3373927,"reputation":351,"user_id":2832503,"display_name":"sashikanta"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1478182827,"creation_date":1478182827,"answer_id":40403920,"question_id":6754207,"body_markdown":"This is a common error while debug in eclipse. You can fix it through edit source look up. **But make sure once you attach the Project You need to stop the server and again start in Debug mode. It will work.** \r\n\r\nHere is the detail steps :\r\n&gt;Click on &quot;Edit Source Lookup Path&quot; button .\r\n&gt;Then click on Add button.\r\n&gt; Select Java Project and include your imported project\r\n&gt; **Then stop the server and start it in Debug mode** and hit your service. It will work.","title":"I get &quot;Source not found&quot; when debugging my Java code in Eclipse","body":"<p>This is a common error while debug in eclipse. You can fix it through edit source look up. <strong>But make sure once you attach the Project You need to stop the server and again start in Debug mode. It will work.</strong> </p>\n\n<p>Here is the detail steps :</p>\n\n<blockquote>\n  <p>Click on \"Edit Source Lookup Path\" button .\n  Then click on Add button.\n  Select Java Project and include your imported project\n  <strong>Then stop the server and start it in Debug mode</strong> and hit your service. It will work.</p>\n</blockquote>\n"},{"tags":[],"owner":{"account_id":957884,"reputation":143,"user_id":982860,"display_name":"jovanchohan"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1481217882,"creation_date":1481217882,"answer_id":41045295,"question_id":6754207,"body_markdown":"I got this error when I was running my server using a maven tomcat plugin. When I deployed using my configured server in Eclipse (generating a war file and copying it into my tomcat directory), I didn&#39;t have this issue anymore. ","title":"I get &quot;Source not found&quot; when debugging my Java code in Eclipse","body":"<p>I got this error when I was running my server using a maven tomcat plugin. When I deployed using my configured server in Eclipse (generating a war file and copying it into my tomcat directory), I didn't have this issue anymore. </p>\n"},{"tags":[],"owner":{"account_id":2177869,"reputation":203,"user_id":1928107,"display_name":"Kabiraj Kharel"},"down_vote_count":0,"up_vote_count":10,"is_accepted":false,"score":10,"last_activity_date":1557778862,"creation_date":1489602052,"answer_id":42817738,"question_id":6754207,"body_markdown":"I also had this issue in MyEclipse Blue. I resolved it by following these steps: \r\n\r\n1. Debug the project.\r\n\r\n2. Right click on the Thread (Which you will see in Debug tab) and click on the &quot;Edit Source lookup&quot;\r\n\r\n3. New window will open and hit the &quot;Add&quot; button and Select the &quot;Java Project&quot;.\r\n\r\n4. Get all the project that is listed over there.\r\n\r\n5. Restart your server.\r\n\r\n","title":"I get &quot;Source not found&quot; when debugging my Java code in Eclipse","body":"<p>I also had this issue in MyEclipse Blue. I resolved it by following these steps: </p>\n\n<ol>\n<li><p>Debug the project.</p></li>\n<li><p>Right click on the Thread (Which you will see in Debug tab) and click on the \"Edit Source lookup\"</p></li>\n<li><p>New window will open and hit the \"Add\" button and Select the \"Java Project\".</p></li>\n<li><p>Get all the project that is listed over there.</p></li>\n<li><p>Restart your server.</p></li>\n</ol>\n"},{"tags":[],"owner":{"account_id":5736180,"reputation":21,"user_id":4530284,"display_name":"Shobhit Mittal"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1492313924,"creation_date":1492313924,"answer_id":43433445,"question_id":6754207,"body_markdown":"After trying most of the solutions here, try this too once - \r\n\r\nClose all the .java files from the editor, in fact, close all **unrelated** projects in eclipse.\r\nAnd try running the Debugger.","title":"I get &quot;Source not found&quot; when debugging my Java code in Eclipse","body":"<p>After trying most of the solutions here, try this too once - </p>\n\n<p>Close all the .java files from the editor, in fact, close all <strong>unrelated</strong> projects in eclipse.\nAnd try running the Debugger.</p>\n"},{"tags":[],"owner":{"account_id":10363842,"reputation":43,"user_id":7643515,"display_name":"eddieB"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1502765322,"creation_date":1502765322,"answer_id":45685815,"question_id":6754207,"body_markdown":"In your debug configuration add goals as &quot;clean install&quot;in the maven build con","title":"I get &quot;Source not found&quot; when debugging my Java code in Eclipse","body":"<p>In your debug configuration add goals as \"clean install\"in the maven build con</p>\n"},{"tags":[],"owner":{"account_id":3479430,"reputation":11,"user_id":2911898,"display_name":"ericksjo"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1506965344,"creation_date":1506965344,"answer_id":46530603,"question_id":6754207,"body_markdown":"This is an expansion on JAB&#39;s answer:\r\nClick &quot;Edit Source Lookup...&quot; &gt; Add... &gt; Workspace Folder &gt; Project &gt; select your folder &gt; check ***Search subfolders*** box &gt; OK.","title":"I get &quot;Source not found&quot; when debugging my Java code in Eclipse","body":"<p>This is an expansion on JAB's answer:\nClick \"Edit Source Lookup...\" > Add... > Workspace Folder > Project > select your folder > check <strong><em>Search subfolders</em></strong> box > OK.</p>\n"},{"tags":[],"owner":{"account_id":17419178,"reputation":1,"user_id":12625052,"display_name":"Aravind"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1577706453,"creation_date":1577706453,"answer_id":59530326,"question_id":6754207,"body_markdown":"In Eclipse:Window--&gt;Go to preferences--&gt;Java--&gt;Click on JRE--&gt;Edit---&gt;Restore Default and click on Finish.\r\n\r\n**Update your Project before Debugging the code!**\r\n\r\nAlas! It worked for me.","title":"I get &quot;Source not found&quot; when debugging my Java code in Eclipse","body":"<p>In Eclipse:Window-->Go to preferences-->Java-->Click on JRE-->Edit--->Restore Default and click on Finish.</p>\n\n<p><strong>Update your Project before Debugging the code!</strong></p>\n\n<p>Alas! It worked for me.</p>\n"},{"tags":[],"owner":{"account_id":4502479,"reputation":891,"user_id":3660710,"display_name":"Asanka Siriwardena"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1658570130,"creation_date":1658570130,"answer_id":73089733,"question_id":6754207,"body_markdown":"This occurred to me when my working git branch is updated from code in master branch. I have already run **mvn clean install** after the pull, but seems I had to update projects after the maven build so that project source code and JAR build code gets synchronized.\r\n\r\nRight click on your project -&gt; Maven -&gt; Update Project, then select all the \r\nmaven modules available and press OK. This resolved the issue for me.\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/INeWL.png","title":"I get &quot;Source not found&quot; when debugging my Java code in Eclipse","body":"<p>This occurred to me when my working git branch is updated from code in master branch. I have already run <strong>mvn clean install</strong> after the pull, but seems I had to update projects after the maven build so that project source code and JAR build code gets synchronized.</p>\n<p>Right click on your project -&gt; Maven -&gt; Update Project, then select all the\nmaven modules available and press OK. This resolved the issue for me.</p>\n<p><a href=\"https://i.stack.imgur.com/INeWL.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/INeWL.png\" alt=\"enter image description here\" /></a></p>\n"},{"tags":[],"owner":{"account_id":26451238,"reputation":1,"user_id":20094442,"display_name":"anonymous guest"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1664226601,"creation_date":1664226601,"answer_id":73859970,"question_id":6754207,"body_markdown":"I was facing same issue. After banging my head for several hours, I finally noticed that although Maven was building the project successfully, the source file I was trying to step into had an incorrect package statement and that is why the &#39;Source Not Found&#39; eclipse problem was happening. When I corrected the package statement and rebuilt the project, the debugger found source file and stopped on my breakpoint.","title":"I get &quot;Source not found&quot; when debugging my Java code in Eclipse","body":"<p>I was facing same issue. After banging my head for several hours, I finally noticed that although Maven was building the project successfully, the source file I was trying to step into had an incorrect package statement and that is why the 'Source Not Found' eclipse problem was happening. When I corrected the package statement and rebuilt the project, the debugger found source file and stopped on my breakpoint.</p>\n"}],"owner":{"account_id":39261,"reputation":85203,"user_id":113141,"accept_rate":75,"display_name":"Justin"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":93028,"favorite_count":0,"down_vote_count":0,"up_vote_count":37,"accepted_answer_id":6754274,"answer_count":17,"score":37,"last_activity_date":1664226601,"creation_date":1311109915,"question_id":6754207,"body_markdown":"I&#39;m trying to debug my Java application in Eclipse however when I hit a breakpoint I simply see the following instead of my source:\r\n\r\n![Source not found message][1]\r\n\r\nIf I change the stack frame in the Debug window then I can see the function name change in the tab - this is definitely my code, the line number is correct and I&#39;m using the latest build but I still can&#39;t get Eclipse to show the source (despite it being open in another tab!)\r\n\r\nI&#39;m new to Eclipse and so I&#39;m struggling to find my way around, but everything that I&#39;ve stumbled across so far seems fine to me.\r\n\r\nWhat might cause this to happen and how can I fix it?\r\n\r\n  [1]: http://i.stack.imgur.com/0alrQ.png","title":"I get &quot;Source not found&quot; when debugging my Java code in Eclipse","body":"<p>I'm trying to debug my Java application in Eclipse however when I hit a breakpoint I simply see the following instead of my source:</p>\n\n<p><img src=\"https://i.stack.imgur.com/0alrQ.png\" alt=\"Source not found message\"></p>\n\n<p>If I change the stack frame in the Debug window then I can see the function name change in the tab - this is definitely my code, the line number is correct and I'm using the latest build but I still can't get Eclipse to show the source (despite it being open in another tab!)</p>\n\n<p>I'm new to Eclipse and so I'm struggling to find my way around, but everything that I've stumbled across so far seems fine to me.</p>\n\n<p>What might cause this to happen and how can I fix it?</p>\n"},{"tags":["java","jquery","jsp","servlets","jqgrid"],"answers":[{"tags":[],"owner":{"account_id":1646237,"reputation":2925,"user_id":1517735,"accept_rate":75,"display_name":"Vinoth Krishnan"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1380283873,"creation_date":1380190244,"answer_id":19025357,"question_id":19005441,"body_markdown":"I had the same issue initially. I solved like converting json into local data, This is how i am populating json data into jqgrid. It may helps you.\r\n\r\n    function getReport() {\r\n\t$.ajax({\r\n                url : &quot;totalSalesReport.do?method=searchSpendReport&quot;\r\n\t\ttype : &quot;POST&quot;,\r\n\t\tasync : false,\r\n\t\tsuccess : function(data) {\r\n\t\t\t$(&quot;#gridtable&quot;).jqGrid(&#39;GridUnload&#39;);\r\n\t\t\t\r\n                       var newdata = jQuery.parseJSON(data);\r\n\t\r\n\t                $(&#39;#gridtable&#39;).jqGrid({\r\n\t\t\t\tdata : newdata,\r\n\t\t\t\tdatatype : &#39;local&#39;,\r\n\t\t\t\tcolNames : [ &#39;Name&#39;, &#39;Year&#39;, &#39;Period&#39;],\r\n\t\t\t\tcolModel : [ {\r\n\t\t\t\t\tname : &#39;name&#39;,\r\n\t\t\t\t\tindex : &#39;name&#39;\r\n\t\t\t\t}, {\r\n\t\t\t\t\tname : &#39;year&#39;,\r\n\t\t\t\t\tindex : &#39;year&#39;\r\n\t\t\t\t}, {\r\n\t\t\t\t\tname : &#39;period&#39;,\r\n\t\t\t\t\tindex : &#39;period&#39;\r\n\t\t\t\t}],\r\n\t\t\t\trowNum : 10,\r\n\t\t\t\trowList : [ 10, 20, 50 ],\r\n\t\t\t\tpager : &#39;#pager&#39;,\r\n\t\t\t\tshrinkToFit : false,\r\n\t\t\t\tautowidth : true,\r\n\t\t\t\tviewrecords : true,\r\n\t\t\t\theight : &#39;auto&#39;\r\n\t\t\t}).jqGrid(&#39;navGrid&#39;, &#39;#pager&#39;, {\r\n\t\tadd : false,\r\n\t\tedit : false,\r\n\t\tdel : false,\r\n\t\tsearch : false,\r\n\t\trefresh : false\r\n\t},\r\n\r\n\t{}, /* edit options */\r\n\t{}, /* add options */\r\n\t{}, /* del options */\r\n\t{});\r\n\t}});}\r\n\r\n\r\nLet me know if you need further assistance in getting data from jsp page.\r\n\r\nUpdated Ans :\r\n\r\nI am using jsp for formatting the List data to json array. The piece of code is given below. You need to add json object jar file for this purpose. \r\n\r\n    &lt;%@page import=&quot;java.sql.ResultSet&quot;%&gt;\r\n    &lt;%@page import=&quot;java.util.*,java.util.ArrayList&quot;%&gt;\r\n    &lt;%@page import=&quot;org.json.simple.JSONObject&quot;%&gt;\r\n    &lt;%\r\n\tnet.sf.json.JSONObject responcedata = new net.sf.json.JSONObject();\r\n\tnet.sf.json.JSONArray cellarray = new net.sf.json.JSONArray();\r\n\tnet.sf.json.JSONArray cell = null; //new net.sf.json.JSONArray();\r\n\tnet.sf.json.JSONObject cellobj = null; //new net.sf.json.JSONObject();\r\n\r\n\tList&lt;ReportDto&gt; reportDtos = null;\r\n\tif (session.getAttribute(&quot;agencyReport&quot;) != null) {\r\n\t\treportDtos = (List&lt;ReportDto&gt;) session\r\n\t\t.getAttribute(&quot;agencyReport&quot;);\r\n\t}\r\n\r\n\tReportDto reportDto = null;\r\n\r\n\tint i = 0;\r\n\tif (reportDtos != null) {\r\n\t\tfor (int index = i; index &lt; reportDtos.size(); index++) {\r\n\t\t\treportDto = reportDtos.get(index);\r\n\t\t\tcellobj = new net.sf.json.JSONObject();\r\n\t\t\tcell = new net.sf.json.JSONArray();\r\n\t\t\tcellobj.put(&quot;name&quot;, reportDto.getVendorName());\r\n\t\t\tcellobj.put(&quot;year&quot;, reportDto.getSpendYear());\r\n\t\t\tcellobj.put(&quot;period&quot;,reportDto.getReportPeriod());\r\n\t\t\tcellarray.put(cellobj);\r\n\t\t\ti++;\r\n\t\t}\r\n\t\tout.println(cellarray);\r\n\t}\r\n    %&gt;\r\n\r\n\r\n","title":"JSON data from servlet to jqGrid not displaying","body":"<p>I had the same issue initially. I solved like converting json into local data, This is how i am populating json data into jqgrid. It may helps you.</p>\n\n<pre><code>function getReport() {\n$.ajax({\n            url : \"totalSalesReport.do?method=searchSpendReport\"\n    type : \"POST\",\n    async : false,\n    success : function(data) {\n        $(\"#gridtable\").jqGrid('GridUnload');\n\n                   var newdata = jQuery.parseJSON(data);\n\n                $('#gridtable').jqGrid({\n            data : newdata,\n            datatype : 'local',\n            colNames : [ 'Name', 'Year', 'Period'],\n            colModel : [ {\n                name : 'name',\n                index : 'name'\n            }, {\n                name : 'year',\n                index : 'year'\n            }, {\n                name : 'period',\n                index : 'period'\n            }],\n            rowNum : 10,\n            rowList : [ 10, 20, 50 ],\n            pager : '#pager',\n            shrinkToFit : false,\n            autowidth : true,\n            viewrecords : true,\n            height : 'auto'\n        }).jqGrid('navGrid', '#pager', {\n    add : false,\n    edit : false,\n    del : false,\n    search : false,\n    refresh : false\n},\n\n{}, /* edit options */\n{}, /* add options */\n{}, /* del options */\n{});\n}});}\n</code></pre>\n\n<p>Let me know if you need further assistance in getting data from jsp page.</p>\n\n<p>Updated Ans :</p>\n\n<p>I am using jsp for formatting the List data to json array. The piece of code is given below. You need to add json object jar file for this purpose. </p>\n\n<pre><code>&lt;%@page import=\"java.sql.ResultSet\"%&gt;\n&lt;%@page import=\"java.util.*,java.util.ArrayList\"%&gt;\n&lt;%@page import=\"org.json.simple.JSONObject\"%&gt;\n&lt;%\nnet.sf.json.JSONObject responcedata = new net.sf.json.JSONObject();\nnet.sf.json.JSONArray cellarray = new net.sf.json.JSONArray();\nnet.sf.json.JSONArray cell = null; //new net.sf.json.JSONArray();\nnet.sf.json.JSONObject cellobj = null; //new net.sf.json.JSONObject();\n\nList&lt;ReportDto&gt; reportDtos = null;\nif (session.getAttribute(\"agencyReport\") != null) {\n    reportDtos = (List&lt;ReportDto&gt;) session\n    .getAttribute(\"agencyReport\");\n}\n\nReportDto reportDto = null;\n\nint i = 0;\nif (reportDtos != null) {\n    for (int index = i; index &lt; reportDtos.size(); index++) {\n        reportDto = reportDtos.get(index);\n        cellobj = new net.sf.json.JSONObject();\n        cell = new net.sf.json.JSONArray();\n        cellobj.put(\"name\", reportDto.getVendorName());\n        cellobj.put(\"year\", reportDto.getSpendYear());\n        cellobj.put(\"period\",reportDto.getReportPeriod());\n        cellarray.put(cellobj);\n        i++;\n    }\n    out.println(cellarray);\n}\n%&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1618181,"reputation":104,"user_id":1495298,"display_name":"user1495298"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1497445433,"creation_date":1497445433,"answer_id":44545644,"question_id":19005441,"body_markdown":"change your **colModel** name and index **same as the pojo class variables name**.\r\n\r\nThanks ,\r\nAmit Kumar","title":"JSON data from servlet to jqGrid not displaying","body":"<p>change your <strong>colModel</strong> name and index <strong>same as the pojo class variables name</strong>.</p>\n\n<p>Thanks ,\nAmit Kumar</p>\n"}],"owner":{"account_id":2876710,"reputation":11,"user_id":2468563,"display_name":"Roikka"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":7560,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1664226225,"creation_date":1380113492,"question_id":19005441,"body_markdown":"I am new to jQuery and finding difficulty in displaying data from my servlet to jqGrid in my jsp.\r\nI have used google gson to convert data from ArrayList to a String variable json.\r\nIt&#39;s displaying json data in the console when I run the project and displaying an empty grid. \r\n\r\nStudent.java\r\n    \r\n    package com\r\n    public class Student {\r\n\tprivate String name;\r\n\t private String mark;\r\n\t private String address;\r\n    //getter and setters\r\n\r\n\r\nStudentDataService.java\r\n\r\n    package com;\r\n\r\n    import java.util.ArrayList;\r\n    import java.util.List;\r\n\r\n    import com.Student;\r\n\r\n    public class StudentDataService {\r\n\r\n\tpublic static List&lt;Student&gt; getStudentList() {\r\n\t\t \r\n\t\t  List&lt;Student&gt; listOfStudent = new ArrayList&lt;Student&gt;();\r\n\t\t \r\n\t\t  Student aStudent = new Student();\r\n\t\t \r\n\t\t  for (int i = 1; i &lt;= 10; i++) {\r\n\t\t \r\n\t\t   aStudent = new Student();\r\n\t\t \r\n\t\t   aStudent.setName(&quot;R&quot; + i);\r\n\t\t \r\n\t\t   aStudent.setMark(&quot;20&quot; + i);\r\n\t\t    \r\n\t\t   aStudent.setAddress(&quot;pune &quot;+i);\r\n\t\t \r\n\t\t   listOfStudent.add(aStudent);\r\n\t\t  }\r\n\t\t \r\n\t\t  return listOfStudent;\r\n\t\t \r\n\t\t }\r\n    }\r\n\r\nMy servlet code:\r\n\r\nStudentDataServlet.java\r\n\r\n    package com;\r\n\r\n    import java.io.IOException;\r\n    import java.io.PrintWriter;\r\n    import java.util.List;\r\n\r\n    import com.google.gson.Gson;\r\n    import com.google.gson.GsonBuilder;\r\n    import com.Student;\r\n    import com.StudentDataService;\r\n\r\n    /**\r\n     * Servlet implementation class StudentDataServlet\r\n    */\r\n    public class StudentDataServlet extends HttpServlet {\r\n\r\n\tprivate static final long serialVersionUID = 1L;\r\n\r\n\tpublic StudentDataServlet() {\r\n\t\tsuper();\r\n\t}\r\n\r\n\tprotected void doGet(HttpServletRequest request,\r\n\t\t\tHttpServletResponse response) throws ServletException, IOException     { \r\n\r\n\t\tresponse.setContentType(&quot;application/json&quot;);\r\n\t\tPrintWriter out = response.getWriter();\r\n\r\n\t\tList&lt;Student&gt; lisOfStudent = StudentDataService.getStudentList();\r\n\t\tGson gson = new GsonBuilder().setPrettyPrinting().create();\r\n\t\tString json = gson.toJson(lisOfStudent);\r\n\t\tout.print(json);\r\n\t\tSystem.out.println(json);\r\n\r\n\t}\r\n\r\n\tprotected void doPost(HttpServletRequest request,\r\n\t\t\tHttpServletResponse response) throws ServletException, IOException    {\r\n\r\n\t\tdoGet(request, response);\r\n\t}\r\n     }\r\n\r\n\r\nMy JSP page:\r\n\r\nslickGridDemo.jsp\r\n\r\n\r\n    &lt;html&gt;\r\n    &lt;head&gt;\r\n    &lt;meta http-equiv=&quot;X-UA-Compatible&quot; content=&quot;IE=edge&quot; /&gt;\r\n    &lt;meta http-equiv=&quot;content-type&quot; content=&quot;text/html; charset=UTF-8&quot;&gt;\r\n    &lt;title&gt;jqGrid Example&lt;/title&gt;\r\n    &lt;script type=&#39;text/javascript&#39; src=&#39;http://code.jquery.com/jquery-1.6.2.js&#39;&gt;&lt;/script&gt;\r\n    &lt;script type=&quot;text/javascript&quot; src=&quot;http://ajax.googleapis.com/ajax/\r\n    libs/jqueryui/1.8.14/jquery-ui.js&quot;&gt; \r\n    &lt;/script&gt;\r\n    &lt;link rel=&quot;stylesheet&quot; type=&quot;text/css&quot; href=&quot;http://ajax.googleapis.com/ajax/libs/jqueryui/1.8.14/themes/base/jquery-ui.css&quot;&gt;\r\n    &lt;link rel=&quot;stylesheet&quot; type=&quot;text/css&quot;  href=&quot;http://trirand.com/blog/jqgrid/themes/ui.jqgrid.css&quot;&gt;\r\n    &lt;script type=&#39;text/javascript&#39; src=&quot;http://trirand.com/blog/jqgrid/js/i18n/grid.locale-  en.js&quot;&gt;&lt;/script&gt;\r\n    &lt;script type=&#39;text/javascript&#39;  src=&quot;http://trirand.com/blog/jqgrid/js/jquery.jqGrid.min.js&quot;&gt;&lt;/script&gt;\r\n    &lt;style type=&#39;text/css&#39;&gt;\r\n    &lt;/style&gt;\r\n\r\n   \r\n   \r\n    &lt;script type=&#39;text/javascript&#39;&gt;\r\n    jQuery(document).ready(function () {\r\n  \r\n             jQuery(&quot;#grid&quot;).jqGrid({\r\n                 url: &quot;http://localhost:9080/JquerySlickGrid/StudentDataServlet&quot;,\r\n                 datatype: &quot;json&quot;,\r\n             \r\n                 jsonReader: {repeatitems: false, id: &quot;ref&quot;},\r\n                 colNames:[&#39;Name&#39;,&#39;Marks&#39;, &#39;Address&#39;],\r\n                 colModel:[\r\n                     {name:&#39;Name&#39;,index:&#39;Name&#39;, width:100},\r\n                     {name:&#39;Marks&#39;,index:&#39;Marks&#39;, width:100},\r\n                     {name:&#39;Address&#39;,index:&#39;Address&#39;, width:500}\r\n                 ],\r\n                 rowNum:20,\r\n                 rowList:[20,60,100],\r\n                 height:460,\r\n                 pager: &quot;#pagingDiv&quot;,\r\n                 viewrecords: true,\r\n                 caption: &quot;Json Example&quot;\r\n             });\r\n         });\r\n    &lt;/script&gt;\r\n    &lt;/head&gt;\r\n    &lt;body&gt;\r\n    &lt;table id=&quot;grid&quot;&gt;&lt;/table&gt;\r\n    &lt;div id=&quot;pagingDiv&quot;&gt;&lt;/div&gt;\r\n    &lt;/body&gt;\r\n    &lt;/html&gt;","title":"JSON data from servlet to jqGrid not displaying","body":"<p>I am new to jQuery and finding difficulty in displaying data from my servlet to jqGrid in my jsp.\nI have used google gson to convert data from ArrayList to a String variable json.\nIt's displaying json data in the console when I run the project and displaying an empty grid. </p>\n\n<p>Student.java</p>\n\n<pre><code>package com\npublic class Student {\nprivate String name;\n private String mark;\n private String address;\n//getter and setters\n</code></pre>\n\n<p>StudentDataService.java</p>\n\n<pre><code>package com;\n\nimport java.util.ArrayList;\nimport java.util.List;\n\nimport com.Student;\n\npublic class StudentDataService {\n\npublic static List&lt;Student&gt; getStudentList() {\n\n      List&lt;Student&gt; listOfStudent = new ArrayList&lt;Student&gt;();\n\n      Student aStudent = new Student();\n\n      for (int i = 1; i &lt;= 10; i++) {\n\n       aStudent = new Student();\n\n       aStudent.setName(\"R\" + i);\n\n       aStudent.setMark(\"20\" + i);\n\n       aStudent.setAddress(\"pune \"+i);\n\n       listOfStudent.add(aStudent);\n      }\n\n      return listOfStudent;\n\n     }\n}\n</code></pre>\n\n<p>My servlet code:</p>\n\n<p>StudentDataServlet.java</p>\n\n<pre><code>package com;\n\nimport java.io.IOException;\nimport java.io.PrintWriter;\nimport java.util.List;\n\nimport com.google.gson.Gson;\nimport com.google.gson.GsonBuilder;\nimport com.Student;\nimport com.StudentDataService;\n\n/**\n * Servlet implementation class StudentDataServlet\n*/\npublic class StudentDataServlet extends HttpServlet {\n\nprivate static final long serialVersionUID = 1L;\n\npublic StudentDataServlet() {\n    super();\n}\n\nprotected void doGet(HttpServletRequest request,\n        HttpServletResponse response) throws ServletException, IOException     { \n\n    response.setContentType(\"application/json\");\n    PrintWriter out = response.getWriter();\n\n    List&lt;Student&gt; lisOfStudent = StudentDataService.getStudentList();\n    Gson gson = new GsonBuilder().setPrettyPrinting().create();\n    String json = gson.toJson(lisOfStudent);\n    out.print(json);\n    System.out.println(json);\n\n}\n\nprotected void doPost(HttpServletRequest request,\n        HttpServletResponse response) throws ServletException, IOException    {\n\n    doGet(request, response);\n}\n }\n</code></pre>\n\n<p>My JSP page:</p>\n\n<p>slickGridDemo.jsp</p>\n\n<pre><code>&lt;html&gt;\n&lt;head&gt;\n&lt;meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge\" /&gt;\n&lt;meta http-equiv=\"content-type\" content=\"text/html; charset=UTF-8\"&gt;\n&lt;title&gt;jqGrid Example&lt;/title&gt;\n&lt;script type='text/javascript' src='http://code.jquery.com/jquery-1.6.2.js'&gt;&lt;/script&gt;\n&lt;script type=\"text/javascript\" src=\"http://ajax.googleapis.com/ajax/\nlibs/jqueryui/1.8.14/jquery-ui.js\"&gt; \n&lt;/script&gt;\n&lt;link rel=\"stylesheet\" type=\"text/css\" href=\"http://ajax.googleapis.com/ajax/libs/jqueryui/1.8.14/themes/base/jquery-ui.css\"&gt;\n&lt;link rel=\"stylesheet\" type=\"text/css\"  href=\"http://trirand.com/blog/jqgrid/themes/ui.jqgrid.css\"&gt;\n&lt;script type='text/javascript' src=\"http://trirand.com/blog/jqgrid/js/i18n/grid.locale-  en.js\"&gt;&lt;/script&gt;\n&lt;script type='text/javascript'  src=\"http://trirand.com/blog/jqgrid/js/jquery.jqGrid.min.js\"&gt;&lt;/script&gt;\n&lt;style type='text/css'&gt;\n&lt;/style&gt;\n\n\n\n&lt;script type='text/javascript'&gt;\njQuery(document).ready(function () {\n\n         jQuery(\"#grid\").jqGrid({\n             url: \"http://localhost:9080/JquerySlickGrid/StudentDataServlet\",\n             datatype: \"json\",\n\n             jsonReader: {repeatitems: false, id: \"ref\"},\n             colNames:['Name','Marks', 'Address'],\n             colModel:[\n                 {name:'Name',index:'Name', width:100},\n                 {name:'Marks',index:'Marks', width:100},\n                 {name:'Address',index:'Address', width:500}\n             ],\n             rowNum:20,\n             rowList:[20,60,100],\n             height:460,\n             pager: \"#pagingDiv\",\n             viewrecords: true,\n             caption: \"Json Example\"\n         });\n     });\n&lt;/script&gt;\n&lt;/head&gt;\n&lt;body&gt;\n&lt;table id=\"grid\"&gt;&lt;/table&gt;\n&lt;div id=\"pagingDiv\"&gt;&lt;/div&gt;\n&lt;/body&gt;\n&lt;/html&gt;\n</code></pre>\n"},{"tags":["java","spring-boot","jpa","apache-camel"],"comments":[{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1664118891,"post_id":73840641,"comment_id":130393416,"body_markdown":"Please provide enough code so others can better understand or reproduce the problem.","body":"Please provide enough code so others can better understand or reproduce the problem."}],"answers":[{"tags":[],"owner":{"account_id":1832,"reputation":11572,"user_id":2517,"accept_rate":82,"display_name":"Jeremy Ross"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1664214224,"creation_date":1664214224,"answer_id":73857963,"question_id":73840641,"body_markdown":"Assuming you&#39;re using mysql, the driver must be on the classpath. If you&#39;re using maven, that means your pom must declare the mysql driver as a dependency.","title":"Spring Boot JPA with Camel JPA throws Failed to instantiate [com.zaxxer.hikari.HikariDataSource]","body":"<p>Assuming you're using mysql, the driver must be on the classpath. If you're using maven, that means your pom must declare the mysql driver as a dependency.</p>\n"},{"tags":[],"owner":{"account_id":15576518,"reputation":31,"user_id":12979721,"display_name":"Alysson Malagutte"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1664225816,"creation_date":1664225816,"answer_id":73859865,"question_id":73840641,"body_markdown":"It is missing mysql reference.    \r\n\r\n    &lt;dependency&gt;\r\n      &lt;groupId&gt;mysql&lt;/groupId&gt;\r\n      &lt;artifactId&gt;mysql-connector-java&lt;/artifactId&gt;\r\n      &lt;scope&gt;runtime&lt;/scope&gt;\r\n    &lt;/dependency&gt;","title":"Spring Boot JPA with Camel JPA throws Failed to instantiate [com.zaxxer.hikari.HikariDataSource]","body":"<p>It is missing mysql reference.</p>\n<pre><code>&lt;dependency&gt;\n  &lt;groupId&gt;mysql&lt;/groupId&gt;\n  &lt;artifactId&gt;mysql-connector-java&lt;/artifactId&gt;\n  &lt;scope&gt;runtime&lt;/scope&gt;\n&lt;/dependency&gt;\n</code></pre>\n"}],"owner":{"account_id":4001123,"reputation":11,"user_id":3297138,"display_name":"hishamsharif"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":210,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":2,"score":1,"last_activity_date":1664225816,"creation_date":1664054296,"question_id":73840641,"body_markdown":"When created a Spring Boot with JPA and Camel JPA, and throws below &quot;Failed to instantiate [com.zaxxer.hikari.HikariDataSource] ... &quot; error.  If exclude the hikary depency for spring-boot-data-jpa start inside the pom.xml, this goes away. Finding difficulties in including a db connection with spring boot jpa and camel-jpa.\r\n\r\nCaused by: org.springframework.beans.BeanInstantiationException: Failed to instantiate [com.zaxxer.hikari.HikariDataSource]: Factory method &#39;dataSource&#39; threw exception; nested exception is java.lang.IllegalStateException: Cannot load driver class: com.mysql.cj.jdbc.Driver \r\n\tat org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate(SimpleInstantiationStrategy.java:185) ~[spring-beans-5.3.22.jar:5.3.22]\r\n\tat org.springframework.beans.factory.support.ConstructorResolver.instantiate(ConstructorResolver.java:653) ~[spring-beans-5.3.22.jar:5.3.22]\r\n\t... 107 common frames omitted","title":"Spring Boot JPA with Camel JPA throws Failed to instantiate [com.zaxxer.hikari.HikariDataSource]","body":"<p>When created a Spring Boot with JPA and Camel JPA, and throws below &quot;Failed to instantiate [com.zaxxer.hikari.HikariDataSource] ... &quot; error.  If exclude the hikary depency for spring-boot-data-jpa start inside the pom.xml, this goes away. Finding difficulties in including a db connection with spring boot jpa and camel-jpa.</p>\n<p>Caused by: org.springframework.beans.BeanInstantiationException: Failed to instantiate [com.zaxxer.hikari.HikariDataSource]: Factory method 'dataSource' threw exception; nested exception is java.lang.IllegalStateException: Cannot load driver class: com.mysql.cj.jdbc.Driver\nat org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate(SimpleInstantiationStrategy.java:185) ~[spring-beans-5.3.22.jar:5.3.22]\nat org.springframework.beans.factory.support.ConstructorResolver.instantiate(ConstructorResolver.java:653) ~[spring-beans-5.3.22.jar:5.3.22]\n... 107 common frames omitted</p>\n"},{"tags":["java","api","optimization"],"comments":[{"owner":{"account_id":6078281,"reputation":694,"user_id":4744864,"display_name":"toppk"},"score":0,"creation_date":1664216015,"post_id":73858199,"comment_id":130415875,"body_markdown":"I would not optimize around poorly written APIs unless there is a noticeable performance impact.    I would keep the call the way you had it and suggest to the API maintainer to create an api like `getProjectswithAtLeastPriority` or `getProjectswithPriorities`","body":"I would not optimize around poorly written APIs unless there is a noticeable performance impact.    I would keep the call the way you had it and suggest to the API maintainer to create an api like <code>getProjectswithAtLeastPriority</code> or <code>getProjectswithPriorities</code>"},{"owner":{"account_id":24983560,"reputation":410,"user_id":18845587,"display_name":"Tindona"},"score":0,"creation_date":1664218441,"post_id":73858199,"comment_id":130416543,"body_markdown":"@erickson I have three API calls in one function, as I mentioned I want to reduce it to one API call with a for loop if it is possible or any possible suggestions. I feel multiple API calls is not perfect","body":"@erickson I have three API calls in one function, as I mentioned I want to reduce it to one API call with a for loop if it is possible or any possible suggestions. I feel multiple API calls is not perfect"},{"owner":{"account_id":24983560,"reputation":410,"user_id":18845587,"display_name":"Tindona"},"score":0,"creation_date":1664218577,"post_id":73858199,"comment_id":130416584,"body_markdown":"@toppk multiple API calls does not make any problem in larger projects? I mean what if I have 15 types of priorities? Should I call the API 15 times?","body":"@toppk multiple API calls does not make any problem in larger projects? I mean what if I have 15 types of priorities? Should I call the API 15 times?"},{"owner":{"account_id":24983560,"reputation":410,"user_id":18845587,"display_name":"Tindona"},"score":1,"creation_date":1664224329,"post_id":73858199,"comment_id":130418198,"body_markdown":"@erickson I want to modify the caller. I am looking for a solution to reduce the API calls. If there is a need to modify the callee it is also okay! The goal is reducing the API calls. I prefer to get all the data first and then perform methods to split or map them like this example for key and priority","body":"@erickson I want to modify the caller. I am looking for a solution to reduce the API calls. If there is a need to modify the callee it is also okay! The goal is reducing the API calls. I prefer to get all the data first and then perform methods to split or map them like this example for key and priority"},{"owner":{"account_id":6078281,"reputation":694,"user_id":4744864,"display_name":"toppk"},"score":0,"creation_date":1664226105,"post_id":73858199,"comment_id":130418642,"body_markdown":"@Tindona  It is a balancing act.  IMO the biggest problem is when users of APIs don&#39;t talk to the maintainers of APIs (and the maintainers don&#39;t look at the API access patterns to discover inefficient usage).  I&#39;ve had to use bulk API queries and do my own filtering because the correct API was too slow.  But we&#39;re talking tens of seconds of difference in query execution time, not the overhead of a few extra round trips.","body":"@Tindona  It is a balancing act.  IMO the biggest problem is when users of APIs don&#39;t talk to the maintainers of APIs (and the maintainers don&#39;t look at the API access patterns to discover inefficient usage).  I&#39;ve had to use bulk API queries and do my own filtering because the correct API was too slow.  But we&#39;re talking tens of seconds of difference in query execution time, not the overhead of a few extra round trips."}],"answers":[{"tags":[],"owner":{"account_id":2496,"reputation":266234,"user_id":3474,"accept_rate":83,"display_name":"erickson"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1664225617,"creation_date":1664225617,"answer_id":73859842,"question_id":73858199,"body_markdown":"I would suggest the following changes:\r\n\r\n1. Callers have hard-coded references to specific values from what appears to be a stable set of enumerable priorities. This makes them a good candidate for an `enum` type.\r\n2. Alter (or overload) the `getProjectsWithPriority()` API to accept a set of priorities.\r\n3. Alternatively, use varargs to send a set of priorities.\r\n\r\n\r\n```java\r\n\r\nenum Priority { LUDICROUS, NEGLIBLE, TRIVIAL, LOW, MEDIUM, HIGH, CRITICAL, HIGHEST }\r\n\r\npublic Projects getProjectsWithPriority(String key, Set&lt;Priority&gt; priorities) {\r\n  /* Get projects from database... */\r\n}\r\n\r\nSet&lt;Priority&gt; important = EnumSet.of(Priority.HIGH, Priority.CRITICAL, Priority.HIGHEST);\r\nProjects projects = getProjectsWithPriority(key, important);\r\n```","title":"Code optimization to reduce the number of API calls in java","body":"<p>I would suggest the following changes:</p>\n<ol>\n<li>Callers have hard-coded references to specific values from what appears to be a stable set of enumerable priorities. This makes them a good candidate for an <code>enum</code> type.</li>\n<li>Alter (or overload) the <code>getProjectsWithPriority()</code> API to accept a set of priorities.</li>\n<li>Alternatively, use varargs to send a set of priorities.</li>\n</ol>\n<pre class=\"lang-java prettyprint-override\"><code>\nenum Priority { LUDICROUS, NEGLIBLE, TRIVIAL, LOW, MEDIUM, HIGH, CRITICAL, HIGHEST }\n\npublic Projects getProjectsWithPriority(String key, Set&lt;Priority&gt; priorities) {\n  /* Get projects from database... */\n}\n\nSet&lt;Priority&gt; important = EnumSet.of(Priority.HIGH, Priority.CRITICAL, Priority.HIGHEST);\nProjects projects = getProjectsWithPriority(key, important);\n</code></pre>\n"}],"owner":{"account_id":24983560,"reputation":410,"user_id":18845587,"display_name":"Tindona"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":213,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"accepted_answer_id":73859842,"answer_count":1,"score":0,"last_activity_date":1664225617,"creation_date":1664215464,"question_id":73858199,"body_markdown":"I have a method name `getProjectswithPriority` that has two input parameters: `key` and `priority` and it has a API call in it to get data from the database:\r\n\r\n      public Projects getProjectswithPriority(String Key, String priority) {\r\n        // Here is an API to get records from db\r\n      }\r\n\r\nIn another method, I want to get Projects with the same key but 3 values of priority, the way I implemented this is calling the function (obviously and its API) 3 times:\r\n\r\n    public Projects MY_FUNCTION (KEY){\r\n    ///...\r\n    Projects HighProjects = getProjectswithPriority(KEY, &quot;High&quot;);\r\n    Projects CriticalProjects = getProjectswithPriority(KEY, &quot;Critical&quot;);\r\n    Projects HighestProjects = getProjectswithPriority(KEY, &quot;Highest&quot;);\r\n    /// ....\r\n    }\r\n\r\nI believe there is a more convenient way to implement this method, in order to decrease the number of API calls, such as using a for and getting all the projects and loop over them. But I don&#39;t know about the possible solutions to optimize this code. Could anyone help with this?\r\n","title":"Code optimization to reduce the number of API calls in java","body":"<p>I have a method name <code>getProjectswithPriority</code> that has two input parameters: <code>key</code> and <code>priority</code> and it has a API call in it to get data from the database:</p>\n<pre><code>  public Projects getProjectswithPriority(String Key, String priority) {\n    // Here is an API to get records from db\n  }\n</code></pre>\n<p>In another method, I want to get Projects with the same key but 3 values of priority, the way I implemented this is calling the function (obviously and its API) 3 times:</p>\n<pre><code>public Projects MY_FUNCTION (KEY){\n///...\nProjects HighProjects = getProjectswithPriority(KEY, &quot;High&quot;);\nProjects CriticalProjects = getProjectswithPriority(KEY, &quot;Critical&quot;);\nProjects HighestProjects = getProjectswithPriority(KEY, &quot;Highest&quot;);\n/// ....\n}\n</code></pre>\n<p>I believe there is a more convenient way to implement this method, in order to decrease the number of API calls, such as using a for and getting all the projects and loop over them. But I don't know about the possible solutions to optimize this code. Could anyone help with this?</p>\n"},{"tags":["javascript","java","selenium","selenium-webdriver","groovy"],"answers":[{"tags":[],"owner":{"account_id":15095197,"reputation":1792,"user_id":10893827,"display_name":"Norayr Sargsyan"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1594377069,"creation_date":1594370126,"answer_id":62830340,"question_id":62828650,"body_markdown":"This works on browser console:\r\n\r\n    arguments[0].innerHTML=&#39;ac.saveDocket(\\&#39;CompanyRegistration\\&#39;,\\&#39;https://yyy.yyy\\&#39;,0);&#39;\r\n\r\nAnd for java code use like this:\r\n\r\n    String value = &quot;ac.saveDocket(\\\\&#39;CompanyRegistration\\\\&#39;,\\\\&#39;https://yyy.yyy\\\\&#39;,0);&quot;;\r\n\r\n    WebElement element = driver.findElement(By.xpath(&quot;your_xpath&quot;));\r\n\r\n    JavascriptExecutor executor = (JavascriptExecutor)driver;\r\n\r\n    executor.executeScript(&quot;arguments[0].innerHTML=&#39;&quot;+value+&quot;&#39;&quot;, element);","title":"JavaScript executor - passing single quote character throws &quot;Unexpected identifier&quot;","body":"<p>This works on browser console:</p>\n<pre><code>arguments[0].innerHTML='ac.saveDocket(\\'CompanyRegistration\\',\\'https://yyy.yyy\\',0);'\n</code></pre>\n<p>And for java code use like this:</p>\n<pre><code>String value = &quot;ac.saveDocket(\\\\'CompanyRegistration\\\\',\\\\'https://yyy.yyy\\\\',0);&quot;;\n\nWebElement element = driver.findElement(By.xpath(&quot;your_xpath&quot;));\n\nJavascriptExecutor executor = (JavascriptExecutor)driver;\n\nexecutor.executeScript(&quot;arguments[0].innerHTML='&quot;+value+&quot;'&quot;, element);\n</code></pre>\n"}],"owner":{"account_id":2606155,"reputation":3610,"user_id":2257288,"accept_rate":42,"display_name":"Prabu"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":361,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":62830340,"answer_count":1,"score":1,"last_activity_date":1664225456,"creation_date":1594363332,"question_id":62828650,"body_markdown":"I want to pass the below value in the script using the javascript executor.\r\n\r\n```javascript\r\nString value = &quot;ac.saveDocket(&#39;CompanyRegistration&#39;,&#39;https://yyy.yyy&#39;,0);&quot;\r\n```\r\n\r\n```java\r\nJavascriptExecutor executor = ((driver) as JavascriptExecutor)\r\nWebElement webElement = driver.findElement(By.xpath(&quot;//div[@class=\\&#39;CodeMirror-code\\&#39;]/div[1]//pre&quot;))\r\nexecutor.executeScript(&quot;arguments[0].innerHTML=&#39;$value&#39;;&quot;, webElement)\r\n```\r\n\t\r\nThis results in the following error:\r\n\r\n```text\r\norg.openqa.selenium.JavascriptException: javascript error: Unexpected identifier\r\n```\r\n\r\nExecution is successful without special characters so the problem is definitely with the single quotes.\r\n\r\nHow I can pass special characters like single quotes to the JavaScript executor?","title":"JavaScript executor - passing single quote character throws &quot;Unexpected identifier&quot;","body":"<p>I want to pass the below value in the script using the javascript executor.</p>\n<pre class=\"lang-js prettyprint-override\"><code>String value = &quot;ac.saveDocket('CompanyRegistration','https://yyy.yyy',0);&quot;\n</code></pre>\n<pre class=\"lang-java prettyprint-override\"><code>JavascriptExecutor executor = ((driver) as JavascriptExecutor)\nWebElement webElement = driver.findElement(By.xpath(&quot;//div[@class=\\'CodeMirror-code\\']/div[1]//pre&quot;))\nexecutor.executeScript(&quot;arguments[0].innerHTML='$value';&quot;, webElement)\n</code></pre>\n<p>This results in the following error:</p>\n<pre><code>org.openqa.selenium.JavascriptException: javascript error: Unexpected identifier\n</code></pre>\n<p>Execution is successful without special characters so the problem is definitely with the single quotes.</p>\n<p>How I can pass special characters like single quotes to the JavaScript executor?</p>\n"},{"tags":["java","selenium","junit"],"answers":[{"tags":[],"owner":{"account_id":2297930,"reputation":98,"user_id":2018929,"display_name":"Guillaume Macke"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1664225359,"creation_date":1664225359,"answer_id":73859809,"question_id":73859325,"body_markdown":"If you want to do some stuff after all tests, you&#39;ll need to implement `ExtensionContext.Store.CloseableResource` instead of `AfterAllCallback`.\r\n\r\n```java\r\npublic class Watcher implements BeforeAllCallback, ExtensionContext.Store.CloseableResource{\r\n   public static boolean started = false;\r\n\r\n   @Override\r\n   public void beforeAll(ExtensionContext ec) throws Exception {\r\n      if(!started) {\r\n         started = true;\r\n         // Some logic here and this works fine by using the static bool\r\n         System.out.println(&quot;Started all&quot;);\r\n      }   \r\n   }\r\n\r\n\r\n    @Override\r\n    public void close() {\r\n      // This runs after each test class I extend on \r\n         System.out.println(&quot;Finished all&quot;);\r\n    }\r\n\r\n} \r\n``` \r\n\r\nIf you need to execute this for every test class, then you could also use automatic extension registration. https://junit.org/junit5/docs/current/user-guide/#extensions-registration-automatic\r\nSo your BaseTest can be removed.","title":"JUnit 5 run a method after all tests in every class has run?","body":"<p>If you want to do some stuff after all tests, you'll need to implement <code>ExtensionContext.Store.CloseableResource</code> instead of <code>AfterAllCallback</code>.</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class Watcher implements BeforeAllCallback, ExtensionContext.Store.CloseableResource{\n   public static boolean started = false;\n\n   @Override\n   public void beforeAll(ExtensionContext ec) throws Exception {\n      if(!started) {\n         started = true;\n         // Some logic here and this works fine by using the static bool\n         System.out.println(&quot;Started all&quot;);\n      }   \n   }\n\n\n    @Override\n    public void close() {\n      // This runs after each test class I extend on \n         System.out.println(&quot;Finished all&quot;);\n    }\n\n} \n</code></pre>\n<p>If you need to execute this for every test class, then you could also use automatic extension registration. <a href=\"https://junit.org/junit5/docs/current/user-guide/#extensions-registration-automatic\" rel=\"nofollow noreferrer\">https://junit.org/junit5/docs/current/user-guide/#extensions-registration-automatic</a>\nSo your BaseTest can be removed.</p>\n"}],"owner":{"display_name":"user19824680"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":1053,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1664225359,"creation_date":1664222221,"question_id":73859325,"body_markdown":"I am trying to run a final method that does some logic after all my tests have completed running. I have seen the extension methods JUnit provides but they seem to all run after each test class\r\n\r\n    public class Watcher implements BeforeAllCallback, AfterAllCallback {\r\n       public static boolean started = false;\r\n    \r\n       @Override\r\n       public void beforeAll(ExtensionContext ec) throws Exception {\r\n          if(!started) {\r\n             started = true;\r\n             // Some logic here and this works fine by using the static bool\r\n             System.out.println(&quot;Started all&quot;);\r\n          }   \r\n       }\r\n    \r\n       @Override\r\n       public void afterAll(ExtensionContext ec) throws Exception {\r\n          // This runs after each test class I extend on \r\n             System.out.println(&quot;Finished all&quot;);\r\n       }\r\n    } \r\n\r\n// A Tests\r\n\r\n    public class ATest : BaseTest {\r\n       @Test\r\n       public void A() {\r\n          System.out.println(&quot;A&quot;);\r\n          assertTrue(true);\r\n       }\r\n    }\r\n\r\n \r\n// B Tests   \r\n\r\n    public class BTest : BaseTest {\r\n       @Test\r\n       public void B() {\r\n          System.out.println(&quot;B&quot;);\r\n          assertTrue(true);\r\n       }\r\n    }\r\n\r\n// My watcher class\r\n\r\n    @ExtendWith(Watcher.class)\r\n    public class BaseTest {\r\n       // Base test class stuff\r\n    }\r\n\r\nIt prints as\r\n\r\n- Started all\r\n- A\r\n- Finished all\r\n- B\r\n- Finished all\r\n\r\nBut I want\r\n\r\n- Started all\r\n- A\r\n- B\r\n- Finished all","title":"JUnit 5 run a method after all tests in every class has run?","body":"<p>I am trying to run a final method that does some logic after all my tests have completed running. I have seen the extension methods JUnit provides but they seem to all run after each test class</p>\n<pre><code>public class Watcher implements BeforeAllCallback, AfterAllCallback {\n   public static boolean started = false;\n\n   @Override\n   public void beforeAll(ExtensionContext ec) throws Exception {\n      if(!started) {\n         started = true;\n         // Some logic here and this works fine by using the static bool\n         System.out.println(&quot;Started all&quot;);\n      }   \n   }\n\n   @Override\n   public void afterAll(ExtensionContext ec) throws Exception {\n      // This runs after each test class I extend on \n         System.out.println(&quot;Finished all&quot;);\n   }\n} \n</code></pre>\n<p>// A Tests</p>\n<pre><code>public class ATest : BaseTest {\n   @Test\n   public void A() {\n      System.out.println(&quot;A&quot;);\n      assertTrue(true);\n   }\n}\n</code></pre>\n<p>// B Tests</p>\n<pre><code>public class BTest : BaseTest {\n   @Test\n   public void B() {\n      System.out.println(&quot;B&quot;);\n      assertTrue(true);\n   }\n}\n</code></pre>\n<p>// My watcher class</p>\n<pre><code>@ExtendWith(Watcher.class)\npublic class BaseTest {\n   // Base test class stuff\n}\n</code></pre>\n<p>It prints as</p>\n<ul>\n<li>Started all</li>\n<li>A</li>\n<li>Finished all</li>\n<li>B</li>\n<li>Finished all</li>\n</ul>\n<p>But I want</p>\n<ul>\n<li>Started all</li>\n<li>A</li>\n<li>B</li>\n<li>Finished all</li>\n</ul>\n"},{"tags":["java","performance","security","ssl"],"comments":[{"owner":{"account_id":47744,"reputation":5200,"user_id":141522,"accept_rate":94,"display_name":"David Weiser"},"score":0,"creation_date":1300899585,"post_id":5408767,"comment_id":6119447,"body_markdown":"Have you profiled the application with a tool like jvisualvm?","body":"Have you profiled the application with a tool like jvisualvm?"},{"owner":{"account_id":342350,"reputation":786,"user_id":673471,"accept_rate":45,"display_name":"Artiom Gourevitch"},"score":0,"creation_date":1301050547,"post_id":5408767,"comment_id":6149066,"body_markdown":"Its a bit difficult to explain to our customers (huge banks or corporations) that we want to profile them, but we work in this direction. We usually use Yourkit for profiling. Is jvisualvm better than Yourkit?","body":"Its a bit difficult to explain to our customers (huge banks or corporations) that we want to profile them, but we work in this direction. We usually use Yourkit for profiling. Is jvisualvm better than Yourkit?"},{"owner":{"account_id":47744,"reputation":5200,"user_id":141522,"accept_rate":94,"display_name":"David Weiser"},"score":0,"creation_date":1301065810,"post_id":5408767,"comment_id":6152878,"body_markdown":"Do you have test systems that you can profile?","body":"Do you have test systems that you can profile?"},{"owner":{"account_id":342350,"reputation":786,"user_id":673471,"accept_rate":45,"display_name":"Artiom Gourevitch"},"score":0,"creation_date":1301089637,"post_id":5408767,"comment_id":6158749,"body_markdown":"Unfortunately I don&#39;t. It wasn&#39;t reproduced in QA, however there are many complains from customers","body":"Unfortunately I don&#39;t. It wasn&#39;t reproduced in QA, however there are many complains from customers"}],"answers":[{"tags":[],"owner":{"account_id":329612,"reputation":71055,"user_id":653230,"display_name":"WhiteFang34"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1300902305,"creation_date":1300902305,"answer_id":5409425,"question_id":5408767,"body_markdown":"You might want to take a look at [this issue][1] reported against JBoss (not sure if that&#39;s what you&#39;re using). That issues indicates that `HandshakeCompletedNotify-Thread` can throw `ConcurrentModificationException`, which is one possible outcome of a race condition. Other outcomes include code that gets stuck in an endless loop and pegs a CPU, which sounds like your symptom. I&#39;d consider upgrading JBoss if you&#39;re using it, or the library related to causing the issue reported. It might fix your problem.\r\n\r\n\r\n  [1]: https://issues.jboss.org/browse/JBPAPP-5293","title":"SSL handshake problems","body":"<p>You might want to take a look at <a href=\"https://issues.jboss.org/browse/JBPAPP-5293\" rel=\"nofollow\">this issue</a> reported against JBoss (not sure if that's what you're using). That issues indicates that <code>HandshakeCompletedNotify-Thread</code> can throw <code>ConcurrentModificationException</code>, which is one possible outcome of a race condition. Other outcomes include code that gets stuck in an endless loop and pegs a CPU, which sounds like your symptom. I'd consider upgrading JBoss if you're using it, or the library related to causing the issue reported. It might fix your problem.</p>\n"},{"tags":[],"owner":{"account_id":113088,"reputation":3456,"user_id":298043,"display_name":"Bruno Roh&#233;e"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1300938262,"creation_date":1300938262,"answer_id":5414510,"question_id":5408767,"body_markdown":"You could try switching to the JRE default JSSE implementation to see if a BSAFE bug is the issue.\r\n\r\nEnabling the JSSE debug code can be in valuable too (`javax.net.debug` property).\r\n\r\nThose links are pretty helpful wrt debugging the JSSE\r\n\r\nhttp://download.oracle.com/javase/1.5.0/docs/guide/security/jsse/JSSERefGuide.html#Debug\r\n\r\nhttp://download.oracle.com/javase/1.5.0/docs/guide/security/jsse/ReadDebug.html\r\n\r\n","title":"SSL handshake problems","body":"<p>You could try switching to the JRE default JSSE implementation to see if a BSAFE bug is the issue.</p>\n\n<p>Enabling the JSSE debug code can be in valuable too (<code>javax.net.debug</code> property).</p>\n\n<p>Those links are pretty helpful wrt debugging the JSSE</p>\n\n<p><a href=\"http://download.oracle.com/javase/1.5.0/docs/guide/security/jsse/JSSERefGuide.html#Debug\" rel=\"nofollow\">http://download.oracle.com/javase/1.5.0/docs/guide/security/jsse/JSSERefGuide.html#Debug</a></p>\n\n<p><a href=\"http://download.oracle.com/javase/1.5.0/docs/guide/security/jsse/ReadDebug.html\" rel=\"nofollow\">http://download.oracle.com/javase/1.5.0/docs/guide/security/jsse/ReadDebug.html</a></p>\n"},{"tags":[],"owner":{"account_id":314390,"reputation":811,"user_id":629535,"accept_rate":80,"display_name":"kiran.kumar M"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1300940418,"creation_date":1300940418,"answer_id":5414714,"question_id":5408767,"body_markdown":"Have you analyzed your DNS lookups. SSL handshake could take longer when dns lookups are slow, it requires lookup as well as reverse-lookup to be efficient.\r\n","title":"SSL handshake problems","body":"<p>Have you analyzed your DNS lookups. SSL handshake could take longer when dns lookups are slow, it requires lookup as well as reverse-lookup to be efficient.</p>\n"},{"tags":[],"owner":{"account_id":153512,"reputation":932,"user_id":368813,"display_name":"judoman"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1343249769,"creation_date":1343249769,"answer_id":11658472,"question_id":5408767,"body_markdown":"This is a known bug that was introduced when Sun rolled out the Next Generation Java Plugin in 6u10.  Oracle finally fixed it in Java 7u2, but they have not backported it to Java 6, at least as of 6u33.\r\n\r\nDetails on the bug, #7060523, can be found [here][1].\r\n\r\n\r\n  [1]: https://bugs.java.com/bugdatabase/view_bug?bug_id=7060523","title":"SSL handshake problems","body":"<p>This is a known bug that was introduced when Sun rolled out the Next Generation Java Plugin in 6u10.  Oracle finally fixed it in Java 7u2, but they have not backported it to Java 6, at least as of 6u33.</p>\n<p>Details on the bug, #7060523, can be found <a href=\"https://bugs.java.com/bugdatabase/view_bug?bug_id=7060523\" rel=\"nofollow noreferrer\">here</a>.</p>\n"}],"owner":{"account_id":342350,"reputation":786,"user_id":673471,"accept_rate":45,"display_name":"Artiom Gourevitch"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":8345,"favorite_count":0,"down_vote_count":0,"up_vote_count":5,"answer_count":4,"score":5,"last_activity_date":1664225176,"creation_date":1300898889,"question_id":5408767,"body_markdown":"Our server application suffers from extreme slowness at some of the customers. The slowness is solved by server restart, however it returns after a couple of weeks.\r\n\r\nJava CPU is always around 100% (out of 200%), all other parameters are fine. Research showed that most of the CPU is consumed by &quot;HandshakeCompletedNotify-Thread&quot; thread. From tcp dump we see that the SSL handshake takes 2-8 seconds, which is very long, sometimes timeout is thrown.\r\n\r\nOur SSL provider is BSAFE. Server runs on Linux(CentOS), 640 mb heap, 2 Cores. Hibernate, spring are used, Oracle local db\r\n\r\nWhat could be reasons for such a behavior? What can be done to find them out?\r\n\r\nP.S. We can not switch the traffic to HTTP at our customers.\r\n\r\nUpdate: The system is completely freed when outgoing connections of java process are blocked with IP tables. What resource is freed in such a situation?\r\nWe see that SSL Handshake frequently gets stuck at &quot;change Cipher Spec&quot; stage. Client (my java process) tries to reuse SSL session, but the server is completely stateless, it generates new session each time.","title":"SSL handshake problems","body":"<p>Our server application suffers from extreme slowness at some of the customers. The slowness is solved by server restart, however it returns after a couple of weeks.</p>\n\n<p>Java CPU is always around 100% (out of 200%), all other parameters are fine. Research showed that most of the CPU is consumed by \"HandshakeCompletedNotify-Thread\" thread. From tcp dump we see that the SSL handshake takes 2-8 seconds, which is very long, sometimes timeout is thrown.</p>\n\n<p>Our SSL provider is BSAFE. Server runs on Linux(CentOS), 640 mb heap, 2 Cores. Hibernate, spring are used, Oracle local db</p>\n\n<p>What could be reasons for such a behavior? What can be done to find them out?</p>\n\n<p>P.S. We can not switch the traffic to HTTP at our customers.</p>\n\n<p>Update: The system is completely freed when outgoing connections of java process are blocked with IP tables. What resource is freed in such a situation?\nWe see that SSL Handshake frequently gets stuck at \"change Cipher Spec\" stage. Client (my java process) tries to reuse SSL session, but the server is completely stateless, it generates new session each time.</p>\n"},{"tags":["java","project-reactor"],"owner":{"account_id":93828,"reputation":133,"user_id":256517,"display_name":"petkov_d"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":149,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1664224941,"creation_date":1664224941,"question_id":73859748,"body_markdown":"I have a question with context propagation in Java Reactor. I have below test and don’t understand why it fails when I add additional transformation to the pipeline:\r\n\r\n    @Test\r\n    void shouldPropagateContext() {\r\n        var mono = Mono.just(&quot;VALUE&quot;)\r\n                       // TEST FAILS IF BELOW LINE IS UNCOMMENTED\r\n                       // .flatMap(Mono::just) // or event with .map(p -&gt; p)\r\n                       .defaultIfEmpty(&quot;&quot;)\r\n                       .flatMap(r -&gt; Mono.&lt;Void&gt;empty()\r\n                               .contextWrite(ctx -&gt; ctx.put(&quot;key&quot;, r)));\r\n    \r\n        StepVerifier\r\n                .create(mono)\r\n                .expectAccessibleContext()\r\n                .contains(&quot;key&quot;, &quot;VALUE&quot;)\r\n                .then()\r\n                .verifyComplete();\r\n    }","title":"Context propagation in Java Reactor","body":"<p>I have a question with context propagation in Java Reactor. I have below test and don’t understand why it fails when I add additional transformation to the pipeline:</p>\n<pre><code>@Test\nvoid shouldPropagateContext() {\n    var mono = Mono.just(&quot;VALUE&quot;)\n                   // TEST FAILS IF BELOW LINE IS UNCOMMENTED\n                   // .flatMap(Mono::just) // or event with .map(p -&gt; p)\n                   .defaultIfEmpty(&quot;&quot;)\n                   .flatMap(r -&gt; Mono.&lt;Void&gt;empty()\n                           .contextWrite(ctx -&gt; ctx.put(&quot;key&quot;, r)));\n\n    StepVerifier\n            .create(mono)\n            .expectAccessibleContext()\n            .contains(&quot;key&quot;, &quot;VALUE&quot;)\n            .then()\n            .verifyComplete();\n}\n</code></pre>\n"},{"tags":["java","pdf","itext","pdfstamper"],"comments":[{"owner":{"account_id":1916831,"reputation":91511,"user_id":1729265,"display_name":"mkl"},"score":0,"creation_date":1664227754,"post_id":73859352,"comment_id":130419022,"body_markdown":"You cannot _set_ the writer of a `PdfStamper`. Also, have you read the JavaDocs of the methods involved? The `setRunDirection` JavaDocs say &quot;This is only used as a placeholder as it does not affect anything.&quot;","body":"You cannot <i>set</i> the writer of a <code>PdfStamper</code>. Also, have you read the JavaDocs of the methods involved? The <code>setRunDirection</code> JavaDocs say &quot;This is only used as a placeholder as it does not affect anything.&quot;"},{"owner":{"account_id":26430388,"reputation":1,"user_id":20076655,"display_name":"Amit Padia"},"score":0,"creation_date":1664256773,"post_id":73859352,"comment_id":130423401,"body_markdown":"Is there anyway to set run direction in stamper?","body":"Is there anyway to set run direction in stamper?"},{"owner":{"account_id":16272723,"reputation":601,"user_id":11750807,"display_name":"shihabudheenk"},"score":0,"creation_date":1664259079,"post_id":73859352,"comment_id":130423857,"body_markdown":"Run direction can be set while writing content. Here you are not writing anything, only simply reading it","body":"Run direction can be set while writing content. Here you are not writing anything, only simply reading it"},{"owner":{"account_id":1916831,"reputation":91511,"user_id":1729265,"display_name":"mkl"},"score":0,"creation_date":1664264368,"post_id":73859352,"comment_id":130425356,"body_markdown":"If I remember correctly, the run direction in iText before version 7.x only could be non-LTR inside tables (see `PdfPTable`) or when using `ColumnText` directly. (I never needed to create non-LTR content, so please take this with a grain of salt.)","body":"If I remember correctly, the run direction in iText before version 7.x only could be non-LTR inside tables (see <code>PdfPTable</code>) or when using <code>ColumnText</code> directly. (I never needed to create non-LTR content, so please take this with a grain of salt.)"}],"owner":{"account_id":26430388,"reputation":1,"user_id":20076655,"display_name":"Amit Padia"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":104,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1664224790,"creation_date":1664222344,"question_id":73859352,"body_markdown":"I want to update the writer in PDFStamper in itext. I am using getWriter method to get the writer of my stamper object. Updated the run direction for that writer but I&#39;m not able to understand how can I set this writer to stamper. Adding the code I tried here:\r\n\r\n    PdfStamper stamper = new PdfStamper(reader, new FileOutputStream(dest));\r\n    stamper.getWriter().setRunDirection(PdfWriter.RUN_DIRECTION_RTL);\r\n    System.out.println(stamper.getWriter().getRunDirection());\r\n    stamper.close();\r\n    reader.close();\r\n\r\nThis is not working and somehow run direction stays the same. Can you please help me resolve this issue?","title":"How to set writer in PDFStamper?","body":"<p>I want to update the writer in PDFStamper in itext. I am using getWriter method to get the writer of my stamper object. Updated the run direction for that writer but I'm not able to understand how can I set this writer to stamper. Adding the code I tried here:</p>\n<pre><code>PdfStamper stamper = new PdfStamper(reader, new FileOutputStream(dest));\nstamper.getWriter().setRunDirection(PdfWriter.RUN_DIRECTION_RTL);\nSystem.out.println(stamper.getWriter().getRunDirection());\nstamper.close();\nreader.close();\n</code></pre>\n<p>This is not working and somehow run direction stays the same. Can you please help me resolve this issue?</p>\n"},{"tags":["java","spring","reflection"],"comments":[{"owner":{"account_id":12991330,"reputation":94,"user_id":9390458,"display_name":"&#199;iğdem Erşep&#231;iler"},"score":1,"creation_date":1663919705,"post_id":73820695,"comment_id":130356926,"body_markdown":"have you looked Dropwizard?","body":"have you looked Dropwizard?"},{"owner":{"account_id":5388960,"reputation":1074,"user_id":4292075,"display_name":"Till Kuhn"},"score":2,"creation_date":1663929321,"post_id":73820695,"comment_id":130360099,"body_markdown":"duplicate of https://stackoverflow.com/questions/43689282/spring-without-reflection ... there you&#39;ll also find some alternatives such as https://micronaut.io/.","body":"duplicate of <a href=\"https://stackoverflow.com/questions/43689282/spring-without-reflection\" title=\"spring without reflection\">stackoverflow.com/questions/43689282/spring-without-reflecti&zwnj;&#8203;on</a> ... there you&#39;ll also find some alternatives such as <a href=\"https://micronaut.io/\" rel=\"nofollow noreferrer\">micronaut.io</a>."}],"answers":[{"tags":[],"owner":{"account_id":1642943,"reputation":19407,"user_id":1515052,"accept_rate":90,"display_name":"Simulant"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1664224556,"creation_date":1664224556,"answer_id":73859697,"question_id":73820695,"body_markdown":"I suggest to use the Java-Framework [Micronaut][1] for your requirements.\r\n\r\nMicronaut is designed using Ahead Of Time (AOT) Compilation. It avoids reflection during runtime and gives you a very fast startup time.\r\n\r\n&gt; The Micronaut framework features a dependency injection and aspect-oriented programming runtime that uses no reflection.\r\n\r\n&gt; Keeps your startup time and memory footprint low by doing the heavy lifting up-front\r\n\r\n\r\n\r\n\r\n  [1]: https://micronaut.io/","title":"Any alternative frameworks like Spring but without using java reflections?","body":"<p>I suggest to use the Java-Framework <a href=\"https://micronaut.io/\" rel=\"nofollow noreferrer\">Micronaut</a> for your requirements.</p>\n<p>Micronaut is designed using Ahead Of Time (AOT) Compilation. It avoids reflection during runtime and gives you a very fast startup time.</p>\n<blockquote>\n<p>The Micronaut framework features a dependency injection and aspect-oriented programming runtime that uses no reflection.</p>\n</blockquote>\n<blockquote>\n<p>Keeps your startup time and memory footprint low by doing the heavy lifting up-front</p>\n</blockquote>\n"}],"owner":{"account_id":9118538,"reputation":319,"user_id":6784846,"display_name":"Annamalai Palanikumar"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":271,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"closed_date":1664264068,"accepted_answer_id":73859697,"answer_count":1,"score":0,"last_activity_date":1664224556,"creation_date":1663880968,"question_id":73820695,"body_markdown":"It seems like **Java reflections** are having a huge performance impact on the **spring** application startup based on the size of the applications. So I am looking for an alternative framework like spring but without using java reflections. If none, any other **alternative** options in **pure Java** itself now or in future?","title":"Any alternative frameworks like Spring but without using java reflections?","body":"<p>It seems like <strong>Java reflections</strong> are having a huge performance impact on the <strong>spring</strong> application startup based on the size of the applications. So I am looking for an alternative framework like spring but without using java reflections. If none, any other <strong>alternative</strong> options in <strong>pure Java</strong> itself now or in future?</p>\n"}],"has_more":true,"quota_max":10000,"quota_remaining":8985,"page":1007,"page_size":100}
